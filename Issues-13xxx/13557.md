# Issue 13557: Make the autotools spkg an optional spkg

archive/issues_013353.json:
```json
{
    "body": "Instead of \"brute force\" building the `autotools` spkg, figure out the actual dependencies. Also add Texinfo. All this makes the spkg a lot more portable.\n\nI believe this makes the package mature enough to be upgraded from \"experimental\" to \"optional\".\n\n**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/autotools-20121217.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/autotools-20121217.spkg)\n\n### autotools-20121217 (Jeroen Demeyer, 17 December 2012)\n* Add proper dependency checking instead of bruce-force building.\n* Add texinfo package\n* Make the package portable\n* Add patch m4-no-gets.patch for m4\n\nAssignee: tbd\n\nReviewer: Volker Braun\n\nAuthor: Jeroen Demeyer\n\nMerged: sage-5.6.beta0\n\nDependencies: recommended: #12707\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/13557\n\n",
    "closed_at": "2012-12-18T14:54:53Z",
    "created_at": "2012-10-01T13:49:10Z",
    "labels": [
        "component: packages: optional"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.6",
    "title": "Make the autotools spkg an optional spkg",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13557",
    "user": "https://github.com/jdemeyer"
}
```
Instead of "brute force" building the `autotools` spkg, figure out the actual dependencies. Also add Texinfo. All this makes the spkg a lot more portable.

I believe this makes the package mature enough to be upgraded from "experimental" to "optional".

**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/autotools-20121217.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/autotools-20121217.spkg)

### autotools-20121217 (Jeroen Demeyer, 17 December 2012)
* Add proper dependency checking instead of bruce-force building.
* Add texinfo package
* Make the package portable
* Add patch m4-no-gets.patch for m4

Assignee: tbd

Reviewer: Volker Braun

Author: Jeroen Demeyer

Merged: sage-5.6.beta0

Dependencies: recommended: #12707

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/13557





---

archive/issue_comments_204034.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n Instead of \"brute force\" building the `autotools` spkg, figure out the actual dependencies.\n \n This will probably also make the spkg more portable.\n+\n+**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/autotools-20120930.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/autotools-20120930.spkg)\n``````\n",
    "created_at": "2012-10-01T14:39:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204034",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
 Instead of "brute force" building the `autotools` spkg, figure out the actual dependencies.
 
 This will probably also make the spkg more portable.
+
+**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/autotools-20120930.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/autotools-20120930.spkg)
``````




---

archive/issue_comments_204035.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-10-01T15:28:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204035",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_204036.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-10-02T08:43:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204036",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_204037.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#12707 (sort of)\"",
    "created_at": "2012-10-02T19:42:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204037",
    "user": "https://github.com/jdemeyer"
}
```

Changing dependencies from "" to "#12707 (sort of)"



---

archive/issue_comments_204038.json:
```json
{
    "body": "Changing dependencies from \"#12707 (sort of)\" to \"recommended: #12707\"",
    "created_at": "2012-10-03T06:54:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204038",
    "user": "https://github.com/jdemeyer"
}
```

Changing dependencies from "#12707 (sort of)" to "recommended: #12707"



---

archive/issue_comments_204039.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,7 @@\n-Instead of \"brute force\" building the `autotools` spkg, figure out the actual dependencies.\n-\n-This will probably also make the spkg more portable.\n+Instead of \"brute force\" building the `autotools` spkg, figure out the actual dependencies. Also add Texinfo. All this makes the spkg a lot more portable.\n \n **spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/autotools-20120930.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/autotools-20120930.spkg)\n+\n+### autotools-20120930 (Jeroen Demeyer, 3 October 2012)\n+* Add proper dependency checking instead of bruce-force building.\n+* Add texinfo package\n``````\n",
    "created_at": "2012-10-03T06:54:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204039",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,7 @@
-Instead of "brute force" building the `autotools` spkg, figure out the actual dependencies.
-
-This will probably also make the spkg more portable.
+Instead of "brute force" building the `autotools` spkg, figure out the actual dependencies. Also add Texinfo. All this makes the spkg a lot more portable.
 
 **spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/autotools-20120930.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/autotools-20120930.spkg)
+
+### autotools-20120930 (Jeroen Demeyer, 3 October 2012)
+* Add proper dependency checking instead of bruce-force building.
+* Add texinfo package
``````




---

archive/issue_comments_204040.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,3 +5,4 @@\n ### autotools-20120930 (Jeroen Demeyer, 3 October 2012)\n * Add proper dependency checking instead of bruce-force building.\n * Add texinfo package\n+* Make the package portable\n``````\n",
    "created_at": "2012-10-03T11:59:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204040",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,3 +5,4 @@
 ### autotools-20120930 (Jeroen Demeyer, 3 October 2012)
 * Add proper dependency checking instead of bruce-force building.
 * Add texinfo package
+* Make the package portable
``````




---

archive/issue_comments_204041.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-10-03T14:56:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204041",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_204042.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,6 @@\n Instead of \"brute force\" building the `autotools` spkg, figure out the actual dependencies. Also add Texinfo. All this makes the spkg a lot more portable.\n+\n+I believe this makes the package mature enough to be upgraded from \"experimental\" to \"optional\".\n \n **spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/autotools-20120930.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/autotools-20120930.spkg)\n \n``````\n",
    "created_at": "2012-10-03T14:56:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204042",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,6 @@
 Instead of "brute force" building the `autotools` spkg, figure out the actual dependencies. Also add Texinfo. All this makes the spkg a lot more portable.
+
+I believe this makes the package mature enough to be upgraded from "experimental" to "optional".
 
 **spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/autotools-20120930.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/autotools-20120930.spkg)
 
``````




---

archive/issue_comments_204043.json:
```json
{
    "body": "Changing component from experimental package to optional packages.",
    "created_at": "2012-10-03T14:56:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204043",
    "user": "https://github.com/jdemeyer"
}
```

Changing component from experimental package to optional packages.



---

archive/issue_comments_204044.json:
```json
{
    "body": "<a id='comment:8'></a>\nIf I undersand correctly after just looking at the diff from the previous version, you now use spkg-write-makefile to generate Makefile.build which is later used to build autotools et al. and requires Sage with autotools, whence the impossibility to generate it on the fly.\nBut, is there really no reason to track it in the Mercurial tree?",
    "created_at": "2012-10-03T19:46:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204044",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:8'></a>
If I undersand correctly after just looking at the diff from the previous version, you now use spkg-write-makefile to generate Makefile.build which is later used to build autotools et al. and requires Sage with autotools, whence the impossibility to generate it on the fly.
But, is there really no reason to track it in the Mercurial tree?



---

archive/issue_comments_204045.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [jpflori](#comment%3A8):\n> If I undersand correctly after just looking at the diff from the previous version, you now use spkg-write-makefile to generate Makefile.build which is later used to build autotools et al. and requires Sage with autotools, whence the impossibility to generate it on the fly.\n\nExactly right.  You need `autoconf` to properly determine which `autoconf` version is needed to parse a given `configure.ac` file.  So paradoxically, the package needs itself to be installed in order to repackage it.\n\n> But, is there really no reason to track it in the Mercurial tree?\n\nIt's autogenerated, so I guess we shouldn't track it.",
    "created_at": "2012-10-03T20:12:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204045",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'></a>
Replying to [jpflori](#comment%3A8):
> If I undersand correctly after just looking at the diff from the previous version, you now use spkg-write-makefile to generate Makefile.build which is later used to build autotools et al. and requires Sage with autotools, whence the impossibility to generate it on the fly.

Exactly right.  You need `autoconf` to properly determine which `autoconf` version is needed to parse a given `configure.ac` file.  So paradoxically, the package needs itself to be installed in order to repackage it.

> But, is there really no reason to track it in the Mercurial tree?

It's autogenerated, so I guess we shouldn't track it.



---

archive/issue_comments_204046.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [jdemeyer](#comment%3A9):\n> > But, is there really no reason to track it in the Mercurial tree?\n\n> It's autogenerated, so I guess we shouldn't track it.\nI understand, just wanted to see if you could change your mind easily.\nI guess we could advocate both choices:\n* track the file because it's shipped in the spkg and used by the build process and cannot be autogenerated on all systems,\n* exclude it because it's automatically generated before shipping (as configure, Makefile  et al files in autotools driven packages!)\nI'll try to give the spkg a proper look by the end of the week (although everything looks fine after a quick look).",
    "created_at": "2012-10-03T20:19:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204046",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:10'></a>
Replying to [jdemeyer](#comment%3A9):
> > But, is there really no reason to track it in the Mercurial tree?

> It's autogenerated, so I guess we shouldn't track it.
I understand, just wanted to see if you could change your mind easily.
I guess we could advocate both choices:
* track the file because it's shipped in the spkg and used by the build process and cannot be autogenerated on all systems,
* exclude it because it's automatically generated before shipping (as configure, Makefile  et al files in autotools driven packages!)
I'll try to give the spkg a proper look by the end of the week (although everything looks fine after a quick look).



---

archive/issue_comments_204047.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [jpflori](#comment%3A10):\n> I understand, just wanted to see if you could change your mind easily.\n\nIt's not that I refuse to track it, it's more that I don't see the reason for it.\n\n> * track the file because it's shipped in the spkg and used by the build process and cannot be autogenerated on all systems,\n \nWith this argument, we would need to track all of `src/` also...\n\n> * exclude it because it's automatically generated before shipping (as configure, Makefile  et al files in autotools driven packages!)\n \nExactly, other projects would not usually track `configure` in version control.",
    "created_at": "2012-10-03T20:25:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204047",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:11'></a>
Replying to [jpflori](#comment%3A10):
> I understand, just wanted to see if you could change your mind easily.

It's not that I refuse to track it, it's more that I don't see the reason for it.

> * track the file because it's shipped in the spkg and used by the build process and cannot be autogenerated on all systems,
 
With this argument, we would need to track all of `src/` also...

> * exclude it because it's automatically generated before shipping (as configure, Makefile  et al files in autotools driven packages!)
 
Exactly, other projects would not usually track `configure` in version control.



---

archive/issue_comments_204048.json:
```json
{
    "body": "<a id='comment:12'></a>\nDoes it build on Cygwin by the way?",
    "created_at": "2012-10-03T20:26:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204048",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>
Does it build on Cygwin by the way?



---

archive/issue_comments_204049.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [jdemeyer](#comment%3A12):\n> Does it build on Cygwin by the way?\n\nNot sure, but I guess so.\nAs you ask I'll start a build tonight hoping it will be finished by tomorrow morning and that windows does not automatically restart because of updates.\nThe problem is that for some reason configure scripts are awfully slow (maybe console output? I've check for BLODA, deactivated antivirus, ran in safe mode etc. but the behavior looked the same; as well, configuring MPIR is a real pain, especially since we run the configure script twice in the spkg, and quite strangely configuring GMP seems faster because less subdirs are treated, maybe some timestamps issues upstreams, or just that the build systems really diverged...).\n\nI think the previous spkg would have built correctly, it's just it was already a few hours when I filed the bogus Trac ticket secretly hoping there was a spkg problem rather than having to wait for another bunch of hours, and then I went to sleep but Windows decided to restart after 4 hours because of updates (I was aware of that but forgot when I went to sleep and it was not sufficient to let the build finish).",
    "created_at": "2012-10-03T20:35:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204049",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:13'></a>
Replying to [jdemeyer](#comment%3A12):
> Does it build on Cygwin by the way?

Not sure, but I guess so.
As you ask I'll start a build tonight hoping it will be finished by tomorrow morning and that windows does not automatically restart because of updates.
The problem is that for some reason configure scripts are awfully slow (maybe console output? I've check for BLODA, deactivated antivirus, ran in safe mode etc. but the behavior looked the same; as well, configuring MPIR is a real pain, especially since we run the configure script twice in the spkg, and quite strangely configuring GMP seems faster because less subdirs are treated, maybe some timestamps issues upstreams, or just that the build systems really diverged...).

I think the previous spkg would have built correctly, it's just it was already a few hours when I filed the bogus Trac ticket secretly hoping there was a spkg problem rather than having to wait for another bunch of hours, and then I went to sleep but Windows decided to restart after 4 hours because of updates (I was aware of that but forgot when I went to sleep and it was not sufficient to let the build finish).



---

archive/issue_comments_204050.json:
```json
{
    "body": "<a id='comment:14'></a>\nIn fact it failed while building help2man with\n\n```\nconfig.status: creating Makefile\nmake[1] : on entre dans le r\u00e9pertoire \u00ab /home/jp/sage-5.2/spkg/build/autotools-20120930/src/help2man-1.40.11 \u00bb\nperl help2man.PL\nExtracting help2man (with variable substitutions)\nmake[1] : on quitte le r\u00e9pertoire \u00ab /home/jp/sage-5.2/spkg/build/autotools-20120930/src/help2man-1.40.11 \u00bb\nmake[1] : on entre dans le r\u00e9pertoire \u00ab /home/jp/sage-5.2/spkg/build/autotools-20120930/src/help2man-1.40.11 \u00bb\n./mkinstalldirs /home/jp/sage-5.2/local/bin\n./mkinstalldirs /home/jp/sage-5.2/local/lib/help2man\n./mkinstalldirs /home/jp/sage-5.2/local/share/man/man1\n./mkinstalldirs /home/jp/sage-5.2/local/share/info\n/usr/bin/install -c help2man /home/jp/sage-5.2/local/bin\n/usr/bin/install -c -m 644 $(perl -e 'print +(grep -f, map \"$_/$ARGV[0]\",  map +(length) ? $_ : \".\", split \":\", $ENV{VPATH} || \".\")[0]' help2man.1) /home/jp/sage-5.2/local/share/man/man1\n/usr/bin/install -c -m 644 $(perl -e 'print +(grep -f, map \"$_/$ARGV[0]\",  map +(length) ? $_ : \".\", split \":\", $ENV{VPATH} || \".\")[0]' help2man.info) \\\n    /home/jp/sage-5.2/local/share/info/help2man.info\nif test -f /home/jp/sage-5.2/local/share/info/dir; \\\nthen \\\n    /home/jp/sage-5.2/local/bin/install-info --info-dir=/home/jp/sage-5.2/local/share/info \\\n        /home/jp/sage-5.2/local/share/info/help2man.info; \\\nfi\n/usr/bin/bash: line 2: /home/jp/sage-5.2/local/bin/install-info: Permission denied\nMakefile:51: recipe for target `install_base' failed\nmake[1]: *** [install_base] Error 126\nmake[1] : on quitte le r\u00e9pertoire \u00ab /home/jp/sage-5.2/spkg/build/autotools-20120930/src/help2man-1.40.11 \u00bb\nMakefile:21: recipe for target `/home/jp/sage-5.2/local/bin/help2man' failed\nmake: *** [/home/jp/sage-5.2/local/bin/help2man] Error 2\n```\n\nI'm retesting the previous spkg to see what happened there.",
    "created_at": "2012-10-03T22:15:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204050",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:14'></a>
In fact it failed while building help2man with

```
config.status: creating Makefile
make[1] : on entre dans le répertoire « /home/jp/sage-5.2/spkg/build/autotools-20120930/src/help2man-1.40.11 »
perl help2man.PL
Extracting help2man (with variable substitutions)
make[1] : on quitte le répertoire « /home/jp/sage-5.2/spkg/build/autotools-20120930/src/help2man-1.40.11 »
make[1] : on entre dans le répertoire « /home/jp/sage-5.2/spkg/build/autotools-20120930/src/help2man-1.40.11 »
./mkinstalldirs /home/jp/sage-5.2/local/bin
./mkinstalldirs /home/jp/sage-5.2/local/lib/help2man
./mkinstalldirs /home/jp/sage-5.2/local/share/man/man1
./mkinstalldirs /home/jp/sage-5.2/local/share/info
/usr/bin/install -c help2man /home/jp/sage-5.2/local/bin
/usr/bin/install -c -m 644 $(perl -e 'print +(grep -f, map "$_/$ARGV[0]",  map +(length) ? $_ : ".", split ":", $ENV{VPATH} || ".")[0]' help2man.1) /home/jp/sage-5.2/local/share/man/man1
/usr/bin/install -c -m 644 $(perl -e 'print +(grep -f, map "$_/$ARGV[0]",  map +(length) ? $_ : ".", split ":", $ENV{VPATH} || ".")[0]' help2man.info) \
    /home/jp/sage-5.2/local/share/info/help2man.info
if test -f /home/jp/sage-5.2/local/share/info/dir; \
then \
    /home/jp/sage-5.2/local/bin/install-info --info-dir=/home/jp/sage-5.2/local/share/info \
        /home/jp/sage-5.2/local/share/info/help2man.info; \
fi
/usr/bin/bash: line 2: /home/jp/sage-5.2/local/bin/install-info: Permission denied
Makefile:51: recipe for target `install_base' failed
make[1]: *** [install_base] Error 126
make[1] : on quitte le répertoire « /home/jp/sage-5.2/spkg/build/autotools-20120930/src/help2man-1.40.11 »
Makefile:21: recipe for target `/home/jp/sage-5.2/local/bin/help2man' failed
make: *** [/home/jp/sage-5.2/local/bin/help2man] Error 2
```

I'm retesting the previous spkg to see what happened there.



---

archive/issue_comments_204051.json:
```json
{
    "body": "<a id='comment:15'></a>\nStrangely in the log from last night, there was no problem with help2man:\n\n```\nmake[1] : on entre dans le r\u00e9pertoire \u00ab /home/jp/sage-5.2/spkg/build/autotools-\\\n20120810/src/help2man-1.40.11 \u00bb\nperl help2man.PL\nExtracting help2man (with variable substitutions)\n./mkinstalldirs /home/jp/sage-5.2/local/bin\n./mkinstalldirs /home/jp/sage-5.2/local/lib/help2man\nmkdir -p -- /home/jp/sage-5.2/local/lib/help2man\n./mkinstalldirs /home/jp/sage-5.2/local/share/man/man1\n./mkinstalldirs /home/jp/sage-5.2/local/share/info\n/usr/bin/install -c help2man /home/jp/sage-5.2/local/bin\n/usr/bin/install -c -m 644 $(perl -e 'print +(grep -f, map \"$_/$ARGV[0]\",  map \\\n+(length) ? $_ : \".\", split \":\", $ENV{VPATH} || \".\")[0]' help2man.1) /home/jp/s\\\nage-5.2/local/share/man/man1\n/usr/bin/install -c -m 644 $(perl -e 'print +(grep -f, map \"$_/$ARGV[0]\",  map \\\n+(length) ? $_ : \".\", split \":\", $ENV{VPATH} || \".\")[0]' help2man.info) \\\n    /home/jp/sage-5.2/local/share/info/help2man.info\nif test -f /home/jp/sage-5.2/local/share/info/dir; \\\nthen \\\n    /usr/bin/install-info --info-dir=/home/jp/sage-5.2/local/share/info \\\n        /home/jp/sage-5.2/local/share/info/help2man.info; \\\nfi\nmake[1] : on quitte le r\u00e9pertoire \u00ab /home/jp/sage-5.2/spkg/build/autotools-2012\\\n0810/src/help2man-1.40.11 \u00bb\n( cd /home/jp/sage-5.2/spkg/build/autotools-20120810/src/autoconf && git archiv\\\ne --format=tar --prefix=autoconf-2.13.rc1/ autoconf-2-13-rc1 ) | tar xf -\n```\nOh I see now, the /usr/bin/install-info used to be used, whereas some Sage's one is now.\nIs that related to the coreutils dependency drop?",
    "created_at": "2012-10-03T22:19:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204051",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:15'></a>
Strangely in the log from last night, there was no problem with help2man:

```
make[1] : on entre dans le répertoire « /home/jp/sage-5.2/spkg/build/autotools-\
20120810/src/help2man-1.40.11 »
perl help2man.PL
Extracting help2man (with variable substitutions)
./mkinstalldirs /home/jp/sage-5.2/local/bin
./mkinstalldirs /home/jp/sage-5.2/local/lib/help2man
mkdir -p -- /home/jp/sage-5.2/local/lib/help2man
./mkinstalldirs /home/jp/sage-5.2/local/share/man/man1
./mkinstalldirs /home/jp/sage-5.2/local/share/info
/usr/bin/install -c help2man /home/jp/sage-5.2/local/bin
/usr/bin/install -c -m 644 $(perl -e 'print +(grep -f, map "$_/$ARGV[0]",  map \
+(length) ? $_ : ".", split ":", $ENV{VPATH} || ".")[0]' help2man.1) /home/jp/s\
age-5.2/local/share/man/man1
/usr/bin/install -c -m 644 $(perl -e 'print +(grep -f, map "$_/$ARGV[0]",  map \
+(length) ? $_ : ".", split ":", $ENV{VPATH} || ".")[0]' help2man.info) \
    /home/jp/sage-5.2/local/share/info/help2man.info
if test -f /home/jp/sage-5.2/local/share/info/dir; \
then \
    /usr/bin/install-info --info-dir=/home/jp/sage-5.2/local/share/info \
        /home/jp/sage-5.2/local/share/info/help2man.info; \
fi
make[1] : on quitte le répertoire « /home/jp/sage-5.2/spkg/build/autotools-2012\
0810/src/help2man-1.40.11 »
( cd /home/jp/sage-5.2/spkg/build/autotools-20120810/src/autoconf && git archiv\
e --format=tar --prefix=autoconf-2.13.rc1/ autoconf-2-13-rc1 ) | tar xf -
```
Oh I see now, the /usr/bin/install-info used to be used, whereas some Sage's one is now.
Is that related to the coreutils dependency drop?



---

archive/issue_comments_204052.json:
```json
{
    "body": "<a id='comment:16'></a>\nDid you build in parallel (i.e. with MAKE=\"make -jN\")?\n\nI don't know much about Cygwin, but does it use Unix-style permission bits?  Could you do\n\n```\nls -l /home/jp/sage-5.2/local/bin/install-info\n```\nIt looks like that program was installed without execute permission.",
    "created_at": "2012-10-04T06:35:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204052",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:16'></a>
Did you build in parallel (i.e. with MAKE="make -jN")?

I don't know much about Cygwin, but does it use Unix-style permission bits?  Could you do

```
ls -l /home/jp/sage-5.2/local/bin/install-info
```
It looks like that program was installed without execute permission.



---

archive/issue_comments_204053.json:
```json
{
    "body": "<a id='comment:17'></a>\nReplying to [jpflori](#comment%3A15):\n> Oh I see now, the /usr/bin/install-info used to be used, whereas some Sage's one is now.\n> Is that related to the coreutils dependency drop?\n\nNo, it's because I added Texinfo (which contains `install-info`) in the package.  But somehow, it doesn't get installed correctly.",
    "created_at": "2012-10-04T06:41:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204053",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'></a>
Replying to [jpflori](#comment%3A15):
> Oh I see now, the /usr/bin/install-info used to be used, whereas some Sage's one is now.
> Is that related to the coreutils dependency drop?

No, it's because I added Texinfo (which contains `install-info`) in the package.  But somehow, it doesn't get installed correctly.



---

archive/issue_comments_204054.json:
```json
{
    "body": "<a id='comment:18'></a>\nCould you attach the complete log of the failed autotools build on Cygwin?",
    "created_at": "2012-10-04T06:44:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204054",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:18'></a>
Could you attach the complete log of the failed autotools build on Cygwin?



---

archive/issue_comments_204055.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [jdemeyer](#comment%3A16):\n> Did you build in parallel (i.e. with MAKE=\"make -jN\")?\n> \n\nNo, I just launched the Cygwin shell and ran make.\n> I don't know much about Cygwin, but does it use Unix-style permission bits?  Could you do\n> \n> ```\n> ls -l /home/jp/sage-5.2/local/bin/install-info\n> ```\n> It looks like that program was installed without execute permission.\n\nThere are permission bits and the file installed is -rwx-r-x-r-x and belong to \"jp None\", much as all other exes, so should execute.\nTry to launch it from the command line fails as well with the same error.\n\nBy the way, the previous spkg build failed during the night because of memory exhaustion.\nI guess there is some memory leak (maybe because of some BLODA, but I'll have to find out which one, my previous investigation were unsuccessful), potenetially linked with the console slowness?",
    "created_at": "2012-10-04T07:07:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204055",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:19'></a>
Replying to [jdemeyer](#comment%3A16):
> Did you build in parallel (i.e. with MAKE="make -jN")?
> 

No, I just launched the Cygwin shell and ran make.
> I don't know much about Cygwin, but does it use Unix-style permission bits?  Could you do
> 
> ```
> ls -l /home/jp/sage-5.2/local/bin/install-info
> ```
> It looks like that program was installed without execute permission.

There are permission bits and the file installed is -rwx-r-x-r-x and belong to "jp None", much as all other exes, so should execute.
Try to launch it from the command line fails as well with the same error.

By the way, the previous spkg build failed during the night because of memory exhaustion.
I guess there is some memory leak (maybe because of some BLODA, but I'll have to find out which one, my previous investigation were unsuccessful), potenetially linked with the console slowness?



---

archive/issue_comments_204056.json:
```json
{
    "body": "Attachment [autotools-20120930.log](tarball://root/attachments/some-uuid/ticket13557/autotools-20120930.log) by jpflori created at 2012-10-04 07:07:54\n\nCygwin log.",
    "created_at": "2012-10-04T07:07:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204056",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Attachment [autotools-20120930.log](tarball://root/attachments/some-uuid/ticket13557/autotools-20120930.log) by jpflori created at 2012-10-04 07:07:54

Cygwin log.



---

archive/issue_comments_204057.json:
```json
{
    "body": "<a id='comment:20'></a>\nReplying to [jpflori](#comment%3A19):\n> > I don't know much about Cygwin, but does it use Unix-style permission bits?  Could you do\n> > \n> > ```\n> > ls -l /home/jp/sage-5.2/local/bin/install-info\n> > ```\n> > It looks like that program was installed without execute permission.\n\n> There are permission bits and the file installed is -rwx-r-x-r-x and belong to \"jp None\", much as all other exes, so should execute.\n> Try to launch it from the command line fails as well with the same error.\n\nBut doing so with admin rights is successful, so this must be a permission problem but hidden deeper.",
    "created_at": "2012-10-04T07:17:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204057",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:20'></a>
Replying to [jpflori](#comment%3A19):
> > I don't know much about Cygwin, but does it use Unix-style permission bits?  Could you do
> > 
> > ```
> > ls -l /home/jp/sage-5.2/local/bin/install-info
> > ```
> > It looks like that program was installed without execute permission.

> There are permission bits and the file installed is -rwx-r-x-r-x and belong to "jp None", much as all other exes, so should execute.
> Try to launch it from the command line fails as well with the same error.

But doing so with admin rights is successful, so this must be a permission problem but hidden deeper.



---

archive/issue_comments_204058.json:
```json
{
    "body": "<a id='comment:21'></a>\nAnd indeed in the windows explorer, the file has a little shield on its icon (meaning it needs admin rights).",
    "created_at": "2012-10-04T07:18:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204058",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:21'></a>
And indeed in the windows explorer, the file has a little shield on its icon (meaning it needs admin rights).



---

archive/issue_comments_204059.json:
```json
{
    "body": "<a id='comment:22'></a>\nBut looking at the permission and security properties from the windows explorer does not reveal any difference with another file which can be executed (say infokey.exe just above in the directory).",
    "created_at": "2012-10-04T07:25:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204059",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:22'></a>
But looking at the permission and security properties from the windows explorer does not reveal any difference with another file which can be executed (say infokey.exe just above in the directory).



---

archive/issue_comments_204060.json:
```json
{
    "body": "<a id='comment:23'></a>\nHmm, it might simply be related to the name (i.e. Windows might assume that a program with \"install\" in the name needs admin rights).  Could you rename/copy it to something more innocent like \"place-info\" and try to execute it?",
    "created_at": "2012-10-04T07:53:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204060",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:23'></a>
Hmm, it might simply be related to the name (i.e. Windows might assume that a program with "install" in the name needs admin rights).  Could you rename/copy it to something more innocent like "place-info" and try to execute it?



---

archive/issue_comments_204061.json:
```json
{
    "body": "<a id='comment:24'></a>\nIt might be the same problem as #11232.",
    "created_at": "2012-10-04T07:57:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204061",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:24'></a>
It might be the same problem as #11232.



---

archive/issue_comments_204062.json:
```json
{
    "body": "<a id='comment:25'></a>\nReplying to [jdemeyer](#comment%3A23):\n> Hmm, it might simply be related to the name (i.e. Windows might assume that a program with \"install\" in the name needs admin rights).  Could you rename/copy it to something more innocent like \"place-info\" and try to execute it?\n\nIn the meantime I went to the same conclusion and that's indeed the problem.\nWindows asks for admin privileges to execute any file whose name contains install.\nRename the file and it will execute as usual.\n\nThe proper solution is to add a install-info.exe.manifest file together with the executable.\nIn fact Cygwin distributed packages do so, and we might just copy it from them.",
    "created_at": "2012-10-04T08:12:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204062",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:25'></a>
Replying to [jdemeyer](#comment%3A23):
> Hmm, it might simply be related to the name (i.e. Windows might assume that a program with "install" in the name needs admin rights).  Could you rename/copy it to something more innocent like "place-info" and try to execute it?

In the meantime I went to the same conclusion and that's indeed the problem.
Windows asks for admin privileges to execute any file whose name contains install.
Rename the file and it will execute as usual.

The proper solution is to add a install-info.exe.manifest file together with the executable.
In fact Cygwin distributed packages do so, and we might just copy it from them.



---

archive/issue_comments_204063.json:
```json
{
    "body": "<a id='comment:26'></a>\nReplying to [jdemeyer](#comment%3A24):\n> It might be the same problem as #11232.\n\nIndeed, so patch is filtered as well...\nLet's hope they do not filter sage in Windows 8.",
    "created_at": "2012-10-04T08:13:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204063",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:26'></a>
Replying to [jdemeyer](#comment%3A24):
> It might be the same problem as #11232.

Indeed, so patch is filtered as well...
Let's hope they do not filter sage in Windows 8.



---

archive/issue_comments_204064.json:
```json
{
    "body": "<a id='comment:27'></a>\nAnd about #11232, shouldn't we just create an appropriate manifest files (it's only a few line) rather than disable the build on Cygwin (from Windows 7)?",
    "created_at": "2012-10-04T08:16:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204064",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:27'></a>
And about #11232, shouldn't we just create an appropriate manifest files (it's only a few line) rather than disable the build on Cygwin (from Windows 7)?



---

archive/issue_comments_204065.json:
```json
{
    "body": "<a id='comment:28'></a>\nReplying to [jpflori](#comment%3A25):\n> The proper solution is to add a install-info.exe.manifest file together with the executable.\n> In fact Cygwin distributed packages do so, and we might just copy it from them.\n\nIf you have the right file, I'd be happy to add it to the package.",
    "created_at": "2012-10-04T08:58:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204065",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:28'></a>
Replying to [jpflori](#comment%3A25):
> The proper solution is to add a install-info.exe.manifest file together with the executable.
> In fact Cygwin distributed packages do so, and we might just copy it from them.

If you have the right file, I'd be happy to add it to the package.



---

archive/issue_comments_204066.json:
```json
{
    "body": "Attachment [patch.exe.manifest](tarball://root/attachments/some-uuid/ticket13557/patch.exe.manifest) by jpflori created at 2012-10-04 09:08:16",
    "created_at": "2012-10-04T09:08:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204066",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Attachment [patch.exe.manifest](tarball://root/attachments/some-uuid/ticket13557/patch.exe.manifest) by jpflori created at 2012-10-04 09:08:16



---

archive/issue_comments_204067.json:
```json
{
    "body": "<a id='comment:29'></a>\nI've uploaded the files for install-info and patch.\nThey can be found in upstream packages, found by example in the mirrors listed here:\nhttp://cygwin.com/mirrors.html\nAnyway, the structure is quite simple, the only variation within the files being the field \"name\", which anyway looks only informative (see he patch manifest file).\nThe only important point seems that the manifest file should be named as the exe one (including .exe) + .manifest extension.\n\nAnd such files seems to be needed on Seven (and later I guess), but not before, but they should not hurt on previous versions on Windows so could be installed all the time on Cygwin.",
    "created_at": "2012-10-04T09:13:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204067",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:29'></a>
I've uploaded the files for install-info and patch.
They can be found in upstream packages, found by example in the mirrors listed here:
http://cygwin.com/mirrors.html
Anyway, the structure is quite simple, the only variation within the files being the field "name", which anyway looks only informative (see he patch manifest file).
The only important point seems that the manifest file should be named as the exe one (including .exe) + .manifest extension.

And such files seems to be needed on Seven (and later I guess), but not before, but they should not hurt on previous versions on Windows so could be installed all the time on Cygwin.



---

archive/issue_comments_204068.json:
```json
{
    "body": "<a id='comment:30'></a>\nAdded `install-info.exe.manifest` to the package.  Needs testing on Cygwin.",
    "created_at": "2012-10-04T11:40:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204068",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:30'></a>
Added `install-info.exe.manifest` to the package.  Needs testing on Cygwin.



---

archive/issue_comments_204069.json:
```json
{
    "body": "<a id='comment:31'></a>\nI think a $ is missing in front of $UNAME.\nAdding let the manifest file be installed correctly on Cygwin.\nThe build is currently going on.",
    "created_at": "2012-10-04T12:41:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204069",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:31'></a>
I think a $ is missing in front of $UNAME.
Adding let the manifest file be installed correctly on Cygwin.
The build is currently going on.



---

archive/issue_comments_204070.json:
```json
{
    "body": "<a id='comment:32'></a>\nAn failed at the same point... Maybe some timestamp issue, randomly touching install-info.exe[.manifest] made it really executable, I'm trying to make this determinist now.",
    "created_at": "2012-10-04T13:05:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204070",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:32'></a>
An failed at the same point... Maybe some timestamp issue, randomly touching install-info.exe[.manifest] made it really executable, I'm trying to make this determinist now.



---

archive/issue_comments_204071.json:
```json
{
    "body": "<a id='comment:33'></a>\nDon't ask me why, but touching install-info.exe seems to be the right solution...",
    "created_at": "2012-10-04T13:16:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204071",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:33'></a>
Don't ask me why, but touching install-info.exe seems to be the right solution...



---

archive/issue_comments_204072.json:
```json
{
    "body": "<a id='comment:34'></a>\nOkay, maybe I should not add the `-p` option to `cp`.",
    "created_at": "2012-10-04T14:53:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204072",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:34'></a>
Okay, maybe I should not add the `-p` option to `cp`.



---

archive/issue_comments_204073.json:
```json
{
    "body": "<a id='comment:35'></a>\nI made a new version, could you try it?",
    "created_at": "2012-10-04T14:57:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204073",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:35'></a>
I made a new version, could you try it?



---

archive/issue_comments_204074.json:
```json
{
    "body": "<a id='comment:36'></a>\nI just tested the previous spkg after removing the -p flag passed to cp (I assume this is what you did) and that was not sufficient.\n\nExplicitely touching the exe file is still...\nReally strange.",
    "created_at": "2012-10-04T15:53:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204074",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:36'></a>
I just tested the previous spkg after removing the -p flag passed to cp (I assume this is what you did) and that was not sufficient.

Explicitely touching the exe file is still...
Really strange.



---

archive/issue_comments_204075.json:
```json
{
    "body": "<a id='comment:37'></a>\nMaybe the manifest needs to be installed before the exe itself.  Can you try the new version (same URL).",
    "created_at": "2012-10-04T20:05:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204075",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:37'></a>
Maybe the manifest needs to be installed before the exe itself.  Can you try the new version (same URL).



---

archive/issue_comments_204076.json:
```json
{
    "body": "<a id='comment:38'></a>\nIt worked! install-info which was just installed after the manifest file can be normally executed.\nThe build process is going on now, I'll report back when it passes the point it used to fail at.\nUnfortunately I fear the complete build will not finish because of the damn Cygwin memory leaks, but that has nothing to do with Sage.",
    "created_at": "2012-10-05T07:21:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204076",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:38'></a>
It worked! install-info which was just installed after the manifest file can be normally executed.
The build process is going on now, I'll report back when it passes the point it used to fail at.
Unfortunately I fear the complete build will not finish because of the damn Cygwin memory leaks, but that has nothing to do with Sage.



---

archive/issue_comments_204077.json:
```json
{
    "body": "<a id='comment:39'></a>\nI think I spoke too fast.\nWhile trying to rebuild the spkg in safe mode, I encountered the same permission problem.\nI've just deleted the old files and relaunched the build to see if it fails again...",
    "created_at": "2012-10-05T08:53:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204077",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:39'></a>
I think I spoke too fast.
While trying to rebuild the spkg in safe mode, I encountered the same permission problem.
I've just deleted the old files and relaunched the build to see if it fails again...



---

archive/issue_comments_204078.json:
```json
{
    "body": "<a id='comment:40'></a>\nOr not... Restarting under usual Windows, the file can be executed, so I guess the manifest file is not used under Safe, that's really a great news.",
    "created_at": "2012-10-05T09:03:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204078",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:40'></a>
Or not... Restarting under usual Windows, the file can be executed, so I guess the manifest file is not used under Safe, that's really a great news.



---

archive/issue_comments_204079.json:
```json
{
    "body": "<a id='comment:41'></a>\n... although the system-wide install-info is executable normally in safe mode ...\n... what gets me even more confused.",
    "created_at": "2012-10-05T13:00:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204079",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:41'></a>
... although the system-wide install-info is executable normally in safe mode ...
... what gets me even more confused.



---

archive/issue_comments_204080.json:
```json
{
    "body": "<a id='comment:42'></a>\nAnd if I remove the install-info.exe.manifest, the file becomes executable in safe mode.\nThat's really terrible.",
    "created_at": "2012-10-05T13:05:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204080",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:42'></a>
And if I remove the install-info.exe.manifest, the file becomes executable in safe mode.
That's really terrible.



---

archive/issue_comments_204081.json:
```json
{
    "body": "<a id='comment:43'></a>\nI see the .manifest file which gets installed is not executable, but the system wide one is.\nChanging that let install-info.exe be executed in safe mode!",
    "created_at": "2012-10-05T13:19:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204081",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:43'></a>
I see the .manifest file which gets installed is not executable, but the system wide one is.
Changing that let install-info.exe be executed in safe mode!



---

archive/issue_comments_204082.json:
```json
{
    "body": "<a id='comment:44'></a>\nReplying to [jpflori](#comment%3A43):\n> I see the .manifest file which gets installed is not executable, but the system wide one is.\n> Changing that let install-info.exe be executed in safe mode!\n\nYou mean that the manifest file itself should be executable?  It doesn't make sense to me, but if it helps, I'll make that change.",
    "created_at": "2012-10-05T13:23:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204082",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:44'></a>
Replying to [jpflori](#comment%3A43):
> I see the .manifest file which gets installed is not executable, but the system wide one is.
> Changing that let install-info.exe be executed in safe mode!

You mean that the manifest file itself should be executable?  It doesn't make sense to me, but if it helps, I'll make that change.



---

archive/issue_comments_204083.json:
```json
{
    "body": "<a id='comment:45'></a>\nReplying to [jdemeyer](#comment%3A44):\n> Replying to [jpflori](#comment%3A43):\n> > I see the .manifest file which gets installed is not executable, but the system wide one is.\n> > Changing that let install-info.exe be executed in safe mode!\n\n> You mean that the manifest file itself should be executable?  It doesn't make sense to me, but if it helps, I'll make that change.\nIndeed, it does not make sense to me either and does not seem to be required in \"normal\" mode, but to be in \"safe\" mode.\nMy hope is that the BLODA which leads to memory exhaustion (I assume it is BLODA cause the memory don't get freed when I leave Cygwin) in \"normal\" mode is not running in \"safe\" mode and I'll be able to build the spkg completely there, just to be sure everything is fine.",
    "created_at": "2012-10-05T13:29:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204083",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:45'></a>
Replying to [jdemeyer](#comment%3A44):
> Replying to [jpflori](#comment%3A43):
> > I see the .manifest file which gets installed is not executable, but the system wide one is.
> > Changing that let install-info.exe be executed in safe mode!

> You mean that the manifest file itself should be executable?  It doesn't make sense to me, but if it helps, I'll make that change.
Indeed, it does not make sense to me either and does not seem to be required in "normal" mode, but to be in "safe" mode.
My hope is that the BLODA which leads to memory exhaustion (I assume it is BLODA cause the memory don't get freed when I leave Cygwin) in "normal" mode is not running in "safe" mode and I'll be able to build the spkg completely there, just to be sure everything is fine.



---

archive/issue_comments_204084.json:
```json
{
    "body": "<a id='comment:46'></a>\nI made a new spkg, can you test it?",
    "created_at": "2012-10-05T13:32:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204084",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:46'></a>
I made a new spkg, can you test it?



---

archive/issue_comments_204085.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-11-29T22:51:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204085",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_204086.json:
```json
{
    "body": "<a id='comment:47'></a>\nThis seems to fail building m4 on my Debian install:\n\n```\n...\ngcc -std=gnu99  -I.     -g -O2 -MT clean-temp.o -MD -MP -MF .deps/clean-temp.Tpo -c -o clean-temp.o clean-temp.c\nIn file included from clean-temp.h:22:0,\n                 from clean-temp.c:23:\n./stdio.h:477:1: error: 'gets' undeclared here (not in a function)\n```\n\nIndeed it seems gets has been removed from recent Debian experimental glibc.\n* http://lists.busybox.net/pipermail/buildroot/2012-July/055999.html\n* http://sourceware.org/ml/libc-alpha/2012-06/msg00807.html\n* http://git.savannah.gnu.org/gitweb/?p=gnulib.git;a=commit;h=66712c23388e93e5c518ebc8515140fa0c807348",
    "created_at": "2012-11-29T22:51:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204086",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:47'></a>
This seems to fail building m4 on my Debian install:

```
...
gcc -std=gnu99  -I.     -g -O2 -MT clean-temp.o -MD -MP -MF .deps/clean-temp.Tpo -c -o clean-temp.o clean-temp.c
In file included from clean-temp.h:22:0,
                 from clean-temp.c:23:
./stdio.h:477:1: error: 'gets' undeclared here (not in a function)
```

Indeed it seems gets has been removed from recent Debian experimental glibc.
* http://lists.busybox.net/pipermail/buildroot/2012-July/055999.html
* http://sourceware.org/ml/libc-alpha/2012-06/msg00807.html
* http://git.savannah.gnu.org/gitweb/?p=gnulib.git;a=commit;h=66712c23388e93e5c518ebc8515140fa0c807348



---

archive/issue_comments_204087.json:
```json
{
    "body": "<a id='comment:48'></a>\nIt's quite funny, because it now fails on my recently reinstalled Cygwin on 64 bits Windows 7 after building m4 with no error message.",
    "created_at": "2012-12-06T10:30:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204087",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:48'></a>
It's quite funny, because it now fails on my recently reinstalled Cygwin on 64 bits Windows 7 after building m4 with no error message.



---

archive/issue_comments_204088.json:
```json
{
    "body": "<a id='comment:49'></a>\nThe previous Cygwin problem might be related to tryin a parallel build, I've relaunched a sequential one to see what happens.",
    "created_at": "2012-12-06T11:04:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204088",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:49'></a>
The previous Cygwin problem might be related to tryin a parallel build, I've relaunched a sequential one to see what happens.



---

archive/issue_comments_204089.json:
```json
{
    "body": "<a id='comment:50'></a>\nMy bad, I was using an old version of the spkg with the $UNAME problem, trying again with the correct one.\nSo this has nothing to do with a parallel build.",
    "created_at": "2012-12-06T11:25:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204089",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:50'></a>
My bad, I was using an old version of the spkg with the $UNAME problem, trying again with the correct one.
So this has nothing to do with a parallel build.



---

archive/issue_events_037708.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-12-17T11:29:44Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "milestone": "sage-5.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13557#event-37708"
}
```



---

archive/issue_comments_204090.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,9 +2,10 @@\n \n I believe this makes the package mature enough to be upgraded from \"experimental\" to \"optional\".\n \n-**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/autotools-20120930.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/autotools-20120930.spkg)\n+**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/autotools-20121217.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/autotools-20121217.spkg)\n \n-### autotools-20120930 (Jeroen Demeyer, 3 October 2012)\n+### autotools-20121217 (Jeroen Demeyer, 17 December 2012)\n * Add proper dependency checking instead of bruce-force building.\n * Add texinfo package\n * Make the package portable\n+* Add patch m4-no-gets.patch for m4\n``````\n",
    "created_at": "2012-12-17T11:29:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204090",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,9 +2,10 @@
 
 I believe this makes the package mature enough to be upgraded from "experimental" to "optional".
 
-**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/autotools-20120930.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/autotools-20120930.spkg)
+**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/autotools-20121217.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/autotools-20121217.spkg)
 
-### autotools-20120930 (Jeroen Demeyer, 3 October 2012)
+### autotools-20121217 (Jeroen Demeyer, 17 December 2012)
 * Add proper dependency checking instead of bruce-force building.
 * Add texinfo package
 * Make the package portable
+* Add patch m4-no-gets.patch for m4
``````




---

archive/issue_comments_204091.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-12-17T11:29:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204091",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_204092.json:
```json
{
    "body": "Attachment [autotools-20121217.diff](tarball://root/attachments/some-uuid/ticket13557/autotools-20121217.diff) by @jdemeyer created at 2012-12-17 11:30:53\n\nDiff for the autotools spkg. For reference / review only.",
    "created_at": "2012-12-17T11:30:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204092",
    "user": "https://github.com/jdemeyer"
}
```

Attachment [autotools-20121217.diff](tarball://root/attachments/some-uuid/ticket13557/autotools-20121217.diff) by @jdemeyer created at 2012-12-17 11:30:53

Diff for the autotools spkg. For reference / review only.



---

archive/issue_comments_204093.json:
```json
{
    "body": "<a id='comment:52'></a>\nI added a patch for the `gets()` issue, needs review.",
    "created_at": "2012-12-17T11:31:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204093",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:52'></a>
I added a patch for the `gets()` issue, needs review.



---

archive/issue_comments_204094.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Volker Braun\"",
    "created_at": "2012-12-18T13:59:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204094",
    "user": "https://github.com/vbraun"
}
```

Changing reviewer from "" to "Volker Braun"



---

archive/issue_comments_204095.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-12-18T13:59:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204095",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_204096.json:
```json
{
    "body": "<a id='comment:53'></a>\nLooks good to me...",
    "created_at": "2012-12-18T13:59:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204096",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:53'></a>
Looks good to me...



---

archive/issue_comments_204097.json:
```json
{
    "body": "<a id='comment:54'></a>\nI just copied the spkg into the \"optional\" subdir on the server and mirrors and removed it from \"experimental\".",
    "created_at": "2012-12-18T14:35:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204097",
    "user": "https://github.com/haraldschilly"
}
```

<a id='comment:54'></a>
I just copied the spkg into the "optional" subdir on the server and mirrors and removed it from "experimental".



---

archive/issue_comments_204098.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-12-18T14:54:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204098",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_204099.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-5.6.beta0\"",
    "created_at": "2012-12-18T14:54:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204099",
    "user": "https://github.com/jdemeyer"
}
```

Changing merged from "" to "sage-5.6.beta0"



---

archive/issue_events_037709.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-12-18T14:54:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13557#event-37709"
}
```



---

archive/issue_comments_204100.json:
```json
{
    "body": "<a id='comment:56'></a>\nJust a question, why not split out m4 and make it a standard spkg?\nAnd drop the corresponding dependency for Sage?\nWe are shipping patch as a spkg, so why not m4?",
    "created_at": "2012-12-20T16:07:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204100",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:56'></a>
Just a question, why not split out m4 and make it a standard spkg?
And drop the corresponding dependency for Sage?
We are shipping patch as a spkg, so why not m4?



---

archive/issue_comments_204101.json:
```json
{
    "body": "<a id='comment:57'></a>\nReplying to [jpflori](#comment%3A56):\n> Just a question, why not split out m4 and make it a standard spkg?\n\nI am totally in favour of this: [https://groups.google.com/forum/?fromgroups#!msg/sage-devel/7LiuRMhO-B8/tlf2JWwfkfMJ](https://groups.google.com/forum/?fromgroups#!msg/sage-devel/7LiuRMhO-B8/tlf2JWwfkfMJ)\n\nNote that a recent m4 is required to fix #11391.",
    "created_at": "2012-12-20T16:15:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13557#issuecomment-204101",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:57'></a>
Replying to [jpflori](#comment%3A56):
> Just a question, why not split out m4 and make it a standard spkg?

I am totally in favour of this: [https://groups.google.com/forum/?fromgroups#!msg/sage-devel/7LiuRMhO-B8/tlf2JWwfkfMJ](https://groups.google.com/forum/?fromgroups#!msg/sage-devel/7LiuRMhO-B8/tlf2JWwfkfMJ)

Note that a recent m4 is required to fix #11391.
