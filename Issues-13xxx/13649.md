# Issue 13649: Implement sigma.domain() and sigma.codomain() for sigma a permutation

archive/issues_013445.json:
```json
{
    "assignees": [],
    "body": "Currently one needs to go through the parent of a permutation to get\nits domain and codomain:\n\n```\n    sage: G = SymmetricGroup(8)\n    sage: g = G.an_element()\n    sage: g.parent().domain()\n    {1, 2, 3, 4, 5, 6, 7, 8}\n```\n\nOne would want to have shorthands:\n\n```\n    sage: g.domain()\n    {1, 2, 3, 4, 5, 6, 7, 8}\n    sage: g.codomain()\n```\n\nlike there are for most other maps in Sage:\n\n```\n    sage: F = FiniteSetMaps(8)\n    sage: f = F.an_element()\n    sage: f.domain()\n    {0, .., 7}\n    sage: f.codomain()\n    {0, .., 7}\n```\n\nBonus points for:\n\n```\n    sage: g.image()\n    {1, 2, 3, 4, 5, 6, 7, 8}\n```\n\n\nAssignee: **joyner**\n\nCC:  sage-combinat @orlitzky\n\nKeywords: **aggregation**\n\nReviewer: **Miguel Marco, Kannappan Sampath**\n\nAuthor: **Andrea Lazzarotto, Amitabh Anand**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/13649_\n\n",
    "created_at": "2012-10-24T08:50:50Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20group%20theory",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/needs%20info"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Implement sigma.domain() and sigma.codomain() for sigma a permutation",
    "type": "issue",
    "updated_at": "2022-12-29T01:28:25Z",
    "url": "https://github.com/sagemath/sage/issues/13649",
    "user": "https://github.com/nthiery"
}
```
Currently one needs to go through the parent of a permutation to get
its domain and codomain:

```
    sage: G = SymmetricGroup(8)
    sage: g = G.an_element()
    sage: g.parent().domain()
    {1, 2, 3, 4, 5, 6, 7, 8}
```

One would want to have shorthands:

```
    sage: g.domain()
    {1, 2, 3, 4, 5, 6, 7, 8}
    sage: g.codomain()
```

like there are for most other maps in Sage:

```
    sage: F = FiniteSetMaps(8)
    sage: f = F.an_element()
    sage: f.domain()
    {0, .., 7}
    sage: f.codomain()
    {0, .., 7}
```

Bonus points for:

```
    sage: g.image()
    {1, 2, 3, 4, 5, 6, 7, 8}
```


Assignee: **joyner**

CC:  sage-combinat @orlitzky

Keywords: **aggregation**

Reviewer: **Miguel Marco, Kannappan Sampath**

Author: **Andrea Lazzarotto, Amitabh Anand**

_Issue created by migration from https://trac.sagemath.org/ticket/13649_





---

archive/issue_events_175103.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2012-10-24T08:50:50Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-175103"
}
```



---

archive/issue_events_175104.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2012-10-24T08:50:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20group%20theory",
    "label_color": "0000ff",
    "label_name": "component: group theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-175104"
}
```



---

archive/issue_events_175105.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2012-10-24T08:50:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-175105"
}
```



---

archive/issue_events_175106.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2012-10-24T08:50:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-175106"
}
```



---

archive/issue_events_175107.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2012-10-24T08:50:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "label": "https://github.com/sagemath/sage/labels/good%20first%20issue",
    "label_color": "7057ff",
    "label_name": "good first issue",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-175107"
}
```



---

archive/issue_comments_162525.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nAttachment: **[trac_13649_domain_alias.patch.gz](https://github.com/sagemath/sage/files/ticket13649/trac_13649_domain_alias.patch.gz)**\n\nI have added a small patch which adds the domain shorthand, by copying a bit the one in `FiniteSetMaps`. I haven't found a codomain in the parent type, so I would like to ask you what you exactly mean by codomain shorthand.",
    "created_at": "2012-12-10T16:48:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-162525",
    "user": "https://github.com/Lazza"
}
```

<a id='comment:1'>Comment 1:</a>
Attachment: **[trac_13649_domain_alias.patch.gz](https://github.com/sagemath/sage/files/ticket13649/trac_13649_domain_alias.patch.gz)**

I have added a small patch which adds the domain shorthand, by copying a bit the one in `FiniteSetMaps`. I haven't found a codomain in the parent type, so I would like to ask you what you exactly mean by codomain shorthand.



---

archive/issue_comments_162526.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\ncodomain = range of a map. For a permutation, it is the same as the domain.",
    "created_at": "2012-12-10T18:04:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-162526",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:2'>Comment 2:</a>
codomain = range of a map. For a permutation, it is the same as the domain.



---

archive/issue_comments_162527.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nDoes that mean that I have to simply make an alias to the `domain` method? Should I do it at the element level or in the parent set?",
    "created_at": "2012-12-10T20:48:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-162527",
    "user": "https://github.com/Lazza"
}
```

<a id='comment:3'>Comment 3:</a>
Does that mean that I have to simply make an alias to the `domain` method? Should I do it at the element level or in the parent set?



---

archive/issue_comments_162528.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nReplying to [@Lazza](#comment%3A3):\n> Should I do it at the element level or in the parent set?\n\nI'd say both. Everything with a `domain()` would ideally have a `codomain()`.",
    "created_at": "2012-12-10T21:55:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-162528",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:4'>Comment 4:</a>
Replying to [@Lazza](#comment%3A3):
> Should I do it at the element level or in the parent set?

I'd say both. Everything with a `domain()` would ideally have a `codomain()`.



---

archive/issue_comments_162529.json:
```json
{
    "body": "Attachment: **[trac_13649_added_codomain.patch.gz](https://github.com/sagemath/sage/files/ticket13649/trac_13649_added_codomain.patch.gz)**",
    "created_at": "2012-12-11T12:17:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-162529",
    "user": "https://github.com/Lazza"
}
```

Attachment: **[trac_13649_added_codomain.patch.gz](https://github.com/sagemath/sage/files/ticket13649/trac_13649_added_codomain.patch.gz)**



---

archive/issue_events_175108.json:
```json
{
    "actor": "https://github.com/Lazza",
    "created_at": "2012-12-11T12:18:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-175108"
}
```



---

archive/issue_comments_162530.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nI think I've \"implemented\" the alias correctly. Being my first contribution of course means I'm not exactly sure.",
    "created_at": "2012-12-11T12:18:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-162530",
    "user": "https://github.com/Lazza"
}
```

<a id='comment:5'>Comment 5:</a>
I think I've "implemented" the alias correctly. Being my first contribution of course means I'm not exactly sure.



---

archive/issue_comments_162531.json:
```json
{
    "body": "Author: **Andrea Lazzarotto**",
    "created_at": "2012-12-27T04:23:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-162531",
    "user": "https://github.com/nexttime"
}
```

Author: **Andrea Lazzarotto**



---

archive/issue_comments_162532.json:
```json
{
    "body": "Changed keywords from **agregation** to **aggregation**",
    "created_at": "2012-12-27T04:23:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-162532",
    "user": "https://github.com/nexttime"
}
```

Changed keywords from **agregation** to **aggregation**



---

archive/issue_comments_162533.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nReplying to [@vbraun](#comment%3A2):\n> codomain = range of a map.\n\nWell, in the case of elements of a symmetric group, yes, because they're bijections, but surely this isn't true in general. In general, the range is only a subset of the codomain, and is not necessarily equal to it. Or am I missing something?",
    "created_at": "2013-01-07T21:01:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-162533",
    "user": "https://github.com/kini"
}
```

<a id='comment:7'>Comment 7:</a>
Replying to [@vbraun](#comment%3A2):
> codomain = range of a map.

Well, in the case of elements of a symmetric group, yes, because they're bijections, but surely this isn't true in general. In general, the range is only a subset of the codomain, and is not necessarily equal to it. Or am I missing something?



---

archive/issue_comments_162534.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nDoes it really make sense to have a codomain for the permutation group itself? I can see why if you consider an individual permutation as a map, you might want to know its codomain, but the whole permutation group isn't a map. I can see why the group might have a \"domain\", since it's the underlying set of the standard group action, but that seems to be a bit different from the \"domain of a function\" usage.",
    "created_at": "2013-01-07T21:15:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-162534",
    "user": "https://github.com/kini"
}
```

<a id='comment:8'>Comment 8:</a>
Does it really make sense to have a codomain for the permutation group itself? I can see why if you consider an individual permutation as a map, you might want to know its codomain, but the whole permutation group isn't a map. I can see why the group might have a "domain", since it's the underlying set of the standard group action, but that seems to be a bit different from the "domain of a function" usage.



---

archive/issue_comments_162535.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nFor me, range = codomain. Whereas image = subset of codomain. Its probably the most popular definition but not universally accepted. This potential for confusion is why we avoid \"range\" in Sage altogether and only have domain and codomain. \n\nhttp://en.wikipedia.org/wiki/Image_(mathematics)#Other_terminology",
    "created_at": "2013-01-07T22:35:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-162535",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:9'>Comment 9:</a>
For me, range = codomain. Whereas image = subset of codomain. Its probably the most popular definition but not universally accepted. This potential for confusion is why we avoid "range" in Sage altogether and only have domain and codomain. 

http://en.wikipedia.org/wiki/Image_(mathematics)#Other_terminology



---

archive/issue_comments_162536.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nReplying to [@kini](#comment%3A8):\n> Does it really make sense to have a codomain for the permutation group itself? I can see why if you consider an individual permutation as a map, you might want to know its codomain, but the whole permutation group isn't a map. I can see why the group might have a \"domain\", since it's the underlying set of the standard group action, but that seems to be a bit different from the \"domain of a function\" usage.\n\nAs far as I recall, Sage's Homsets have a domain and a codomain (which coincide for EndSets). The symmetric group is special case, and it would seem consistent to have this systematically for all sets of functions.\n\nCheers,\n                             Nicolas",
    "created_at": "2013-01-09T21:06:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-162536",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:10'>Comment 10:</a>
Replying to [@kini](#comment%3A8):
> Does it really make sense to have a codomain for the permutation group itself? I can see why if you consider an individual permutation as a map, you might want to know its codomain, but the whole permutation group isn't a map. I can see why the group might have a "domain", since it's the underlying set of the standard group action, but that seems to be a bit different from the "domain of a function" usage.

As far as I recall, Sage's Homsets have a domain and a codomain (which coincide for EndSets). The symmetric group is special case, and it would seem consistent to have this systematically for all sets of functions.

Cheers,
                             Nicolas



---

archive/issue_comments_162537.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nI am setting this to needs work for the following reasons: \n\nMAJOR:\n\n1. There is a typo in the example indicated for the function codomain (second of the patches, in the file permgroup.py). You really want to show the function codomain(). \n\n2. It might be nice to demonstrate that the domain and codomain are the same by adding an example to this effect (using `==`)! \n\n---\n\nMINOR:\n\n1. Fullstops please! \n2. It is advisable to write the docstrings imperatively: you might find [PEP8](http://www.python.org/dev/peps/pep-0008/) and [PEP257](http://www.python.org/dev/peps/pep-0257/) a good read. (I realise that the other docstrings are also like yours: \"returns\"ing instead of \"return\"ing. So, you may not change this in this patch.) \n\nModulo these, your patch is good to go. ~KnS",
    "created_at": "2013-03-05T06:38:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-162537",
    "user": "https://github.com/KPanComputes"
}
```

<a id='comment:11'>Comment 11:</a>
I am setting this to needs work for the following reasons: 

MAJOR:

1. There is a typo in the example indicated for the function codomain (second of the patches, in the file permgroup.py). You really want to show the function codomain(). 

2. It might be nice to demonstrate that the domain and codomain are the same by adding an example to this effect (using `==`)! 

---

MINOR:

1. Fullstops please! 
2. It is advisable to write the docstrings imperatively: you might find [PEP8](http://www.python.org/dev/peps/pep-0008/) and [PEP257](http://www.python.org/dev/peps/pep-0257/) a good read. (I realise that the other docstrings are also like yours: "returns"ing instead of "return"ing. So, you may not change this in this patch.) 

Modulo these, your patch is good to go. ~KnS



---

archive/issue_events_175109.json:
```json
{
    "actor": "https://github.com/KPanComputes",
    "created_at": "2013-03-05T06:38:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-175109"
}
```



---

archive/issue_events_175110.json:
```json
{
    "actor": "https://github.com/KPanComputes",
    "created_at": "2013-03-05T06:38:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-175110"
}
```



---

archive/issue_comments_162538.json:
```json
{
    "body": "Domain, codomain, image of a permutation group element",
    "created_at": "2013-05-09T17:12:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-162538",
    "user": "https://github.com/sagetrac-aanand"
}
```

Domain, codomain, image of a permutation group element



---

archive/issue_comments_162539.json:
```json
{
    "body": "Attachment: **[trac_13649_domain_codomain_image.patch.gz](https://github.com/sagemath/sage/files/ticket13649/trac_13649_domain_codomain_image.patch.gz)**\n\nAttachment: **[trac_13649_domain_codomain_image.2.patch.gz](https://github.com/sagemath/sage/files/ticket13649/trac_13649_domain_codomain_image.2.patch.gz)**\n\nDomain, codomain, image of a permutation group element",
    "created_at": "2013-05-09T17:13:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-162539",
    "user": "https://github.com/sagetrac-aanand"
}
```

Attachment: **[trac_13649_domain_codomain_image.patch.gz](https://github.com/sagemath/sage/files/ticket13649/trac_13649_domain_codomain_image.patch.gz)**

Attachment: **[trac_13649_domain_codomain_image.2.patch.gz](https://github.com/sagemath/sage/files/ticket13649/trac_13649_domain_codomain_image.2.patch.gz)**

Domain, codomain, image of a permutation group element



---

archive/issue_comments_162540.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\naanand, make sure that you document and doctest the methods that you implement.\n\nTake a look at the sage developper's guide for the conventions to follow:\n\nhttp://www.sagemath.org/doc/developer/conventions.html#documentation-strings",
    "created_at": "2013-05-09T19:42:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-162540",
    "user": "https://github.com/miguelmarco"
}
```

<a id='comment:12'>Comment 12:</a>
aanand, make sure that you document and doctest the methods that you implement.

Take a look at the sage developper's guide for the conventions to follow:

http://www.sagemath.org/doc/developer/conventions.html#documentation-strings



---

archive/issue_comments_162541.json:
```json
{
    "body": "Followed the prescribed conventions.",
    "created_at": "2013-05-10T15:23:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-162541",
    "user": "https://github.com/sagetrac-aanand"
}
```

Followed the prescribed conventions.



---

archive/issue_comments_162542.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nAttachment: **[trac_13649_domain_codomain_image_new.patch.gz](https://github.com/sagemath/sage/files/ticket13649/trac_13649_domain_codomain_image_new.patch.gz)**\n\nLooks good to me.\nJust one minor question: for coherence, it would be nice if the output of .image would be of the same tye as the one of .domain and .codomain.",
    "created_at": "2013-05-10T16:18:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-162542",
    "user": "https://github.com/miguelmarco"
}
```

<a id='comment:13'>Comment 13:</a>
Attachment: **[trac_13649_domain_codomain_image_new.patch.gz](https://github.com/sagemath/sage/files/ticket13649/trac_13649_domain_codomain_image_new.patch.gz)**

Looks good to me.
Just one minor question: for coherence, it would be nice if the output of .image would be of the same tye as the one of .domain and .codomain.



---

archive/issue_comments_162543.json:
```json
{
    "body": "Now the output of .image() is same as that of .domain() and .codomain()",
    "created_at": "2013-05-10T17:34:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-162543",
    "user": "https://github.com/sagetrac-aanand"
}
```

Now the output of .image() is same as that of .domain() and .codomain()



---

archive/issue_comments_162544.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nAttachment: **[trac_13649_domain_codomain_image_new2.patch.gz](https://github.com/sagemath/sage/files/ticket13649/trac_13649_domain_codomain_image_new2.patch.gz)**\n\nDoctest fail:\n\n```\nRunning doctests with ID 2013-05-10-21-51-43-875205e8.\nDoctesting 1 file.\nsage -t devel/sage/sage/groups/perm_gps/permgroup_element.pyx\n**********************************************************************\nFile \"devel/sage/sage/groups/perm_gps/permgroup_element.pyx\", line 881, in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.domain\nFailed example:\n    g\nExpected:\n    (1,3,5)\nGot:\n    (1,3)(2,4,5)\n**********************************************************************\nFile \"devel/sage/sage/groups/perm_gps/permgroup_element.pyx\", line 883, in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.domain\nFailed example:\n    g.domain()\nExpected:\n    {1,2,3,4,5}\nGot:\n    {1, 2, 3, 4, 5}\n**********************************************************************\nFile \"devel/sage/sage/groups/perm_gps/permgroup_element.pyx\", line 900, in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.image\nFailed example:\n    g\nExpected:\n    (1,3,5)\nGot:\n    (1,3)(2,4,5)\n**********************************************************************\nFile \"devel/sage/sage/groups/perm_gps/permgroup_element.pyx\", line 902, in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.image\nFailed example:\n    g.image()\nExpected:\n    {1,3,5}\nGot:\n    {1, 2, 3, 4, 5}\n**********************************************************************\nFile \"devel/sage/sage/groups/perm_gps/permgroup_element.pyx\", line 917, in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.codomain\nFailed example:\n    g\nExpected:\n    (1,3,5)\nGot:\n    (1,3)(2,4,5)\n**********************************************************************\nFile \"devel/sage/sage/groups/perm_gps/permgroup_element.pyx\", line 919, in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.codomain\nFailed example:\n    g.codomain()\nExpected:\n    {1,2,3,4,5}\nGot:\n    {1, 2, 3, 4, 5}\n**********************************************************************\n```\n\nThat's because of two reasons: first, the output in doctests is not properly formated. And second, if you use a random element in a doctest, the result may vary each time the test is run.",
    "created_at": "2013-05-10T19:55:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-162544",
    "user": "https://github.com/miguelmarco"
}
```

<a id='comment:14'>Comment 14:</a>
Attachment: **[trac_13649_domain_codomain_image_new2.patch.gz](https://github.com/sagemath/sage/files/ticket13649/trac_13649_domain_codomain_image_new2.patch.gz)**

Doctest fail:

```
Running doctests with ID 2013-05-10-21-51-43-875205e8.
Doctesting 1 file.
sage -t devel/sage/sage/groups/perm_gps/permgroup_element.pyx
**********************************************************************
File "devel/sage/sage/groups/perm_gps/permgroup_element.pyx", line 881, in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.domain
Failed example:
    g
Expected:
    (1,3,5)
Got:
    (1,3)(2,4,5)
**********************************************************************
File "devel/sage/sage/groups/perm_gps/permgroup_element.pyx", line 883, in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.domain
Failed example:
    g.domain()
Expected:
    {1,2,3,4,5}
Got:
    {1, 2, 3, 4, 5}
**********************************************************************
File "devel/sage/sage/groups/perm_gps/permgroup_element.pyx", line 900, in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.image
Failed example:
    g
Expected:
    (1,3,5)
Got:
    (1,3)(2,4,5)
**********************************************************************
File "devel/sage/sage/groups/perm_gps/permgroup_element.pyx", line 902, in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.image
Failed example:
    g.image()
Expected:
    {1,3,5}
Got:
    {1, 2, 3, 4, 5}
**********************************************************************
File "devel/sage/sage/groups/perm_gps/permgroup_element.pyx", line 917, in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.codomain
Failed example:
    g
Expected:
    (1,3,5)
Got:
    (1,3)(2,4,5)
**********************************************************************
File "devel/sage/sage/groups/perm_gps/permgroup_element.pyx", line 919, in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.codomain
Failed example:
    g.codomain()
Expected:
    {1,2,3,4,5}
Got:
    {1, 2, 3, 4, 5}
**********************************************************************
```

That's because of two reasons: first, the output in doctests is not properly formated. And second, if you use a random element in a doctest, the result may vary each time the test is run.



---

archive/issue_comments_162545.json:
```json
{
    "body": "Attachment: **[trac_13649_domain_codomain_image_new3.patch.gz](https://github.com/sagemath/sage/files/ticket13649/trac_13649_domain_codomain_image_new3.patch.gz)**\n\nDoctest should run fine now.",
    "created_at": "2013-05-11T07:17:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-162545",
    "user": "https://github.com/sagetrac-aanand"
}
```

Attachment: **[trac_13649_domain_codomain_image_new3.patch.gz](https://github.com/sagemath/sage/files/ticket13649/trac_13649_domain_codomain_image_new3.patch.gz)**

Doctest should run fine now.



---

archive/issue_comments_162546.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nLooks good to me.",
    "created_at": "2013-05-12T01:17:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-162546",
    "user": "https://github.com/miguelmarco"
}
```

<a id='comment:15'>Comment 15:</a>
Looks good to me.



---

archive/issue_comments_162547.json:
```json
{
    "body": "Reviewer: **mmarco**",
    "created_at": "2013-05-12T01:17:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-162547",
    "user": "https://github.com/miguelmarco"
}
```

Reviewer: **mmarco**



---

archive/issue_events_175111.json:
```json
{
    "actor": "https://github.com/miguelmarco",
    "created_at": "2013-05-12T01:17:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-175111"
}
```



---

archive/issue_events_175112.json:
```json
{
    "actor": "https://github.com/miguelmarco",
    "created_at": "2013-05-12T01:17:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-175112"
}
```



---

archive/issue_comments_162548.json:
```json
{
    "body": "Changed author from **Andrea Lazzarotto** to **Andrea Lazzarotto, Amitabh Anand**",
    "created_at": "2013-05-12T01:27:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-162548",
    "user": "https://github.com/nexttime"
}
```

Changed author from **Andrea Lazzarotto** to **Andrea Lazzarotto, Amitabh Anand**



---

archive/issue_comments_162549.json:
```json
{
    "body": "Changed reviewer from **mmarco** to **Miguel Marco, Kannappan Sampath**",
    "created_at": "2013-05-12T01:27:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-162549",
    "user": "https://github.com/nexttime"
}
```

Changed reviewer from **mmarco** to **Miguel Marco, Kannappan Sampath**



---

archive/issue_events_175113.json:
```json
{
    "actor": "https://github.com/miguelmarco",
    "created_at": "2013-05-12T01:58:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-175113"
}
```



---

archive/issue_events_175114.json:
```json
{
    "actor": "https://github.com/miguelmarco",
    "created_at": "2013-05-12T01:58:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-175114"
}
```



---

archive/issue_comments_162550.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nNow that i think about it, your method to compute the image is clearly suboptimal. In the case of small groups you don't notice a difference. But if the group is very big, going through the image of all the elements might take a lot of time, which is unnecesary.\n\nIt would be much faster to just take it from the cycle structure.\n\nNotice the difference in timings (with your patch applied):\n\n```\n\nsage: G=SymmetricGroup(10000)                                                                                                                              \nsage: g=G('(1,2,3)(6,8,10)')                                                                                                                               \nsage: % time g.cycle_tuples()                                                                                                                              \nCPU times: user 0.00 s, sys: 0.00 s, total: 0.00 s\nWall time: 0.00 s\n[(1, 2, 3), (6, 8, 10)]\nsage: %time FiniteEnumeratedSet(flatten(g.cycle_tuples()))\nCPU times: user 0.00 s, sys: 0.00 s, total: 0.00 s\nWall time: 0.00 s\n{1, 2, 3, 6, 8, 10}\nsage: %time g.image()                                                                                                                                      \nCPU times: user 7.81 s, sys: 0.02 s, total: 7.83 s\nWall time: 7.82 s\n{1, 2, 3, 6, 8, 10}\n```\n\nAs the size of the group grows, this gets much worse.\n\nBesides that, i think it is ok.",
    "created_at": "2013-05-12T01:58:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-162550",
    "user": "https://github.com/miguelmarco"
}
```

<a id='comment:18'>Comment 18:</a>
Now that i think about it, your method to compute the image is clearly suboptimal. In the case of small groups you don't notice a difference. But if the group is very big, going through the image of all the elements might take a lot of time, which is unnecesary.

It would be much faster to just take it from the cycle structure.

Notice the difference in timings (with your patch applied):

```

sage: G=SymmetricGroup(10000)                                                                                                                              
sage: g=G('(1,2,3)(6,8,10)')                                                                                                                               
sage: % time g.cycle_tuples()                                                                                                                              
CPU times: user 0.00 s, sys: 0.00 s, total: 0.00 s
Wall time: 0.00 s
[(1, 2, 3), (6, 8, 10)]
sage: %time FiniteEnumeratedSet(flatten(g.cycle_tuples()))
CPU times: user 0.00 s, sys: 0.00 s, total: 0.00 s
Wall time: 0.00 s
{1, 2, 3, 6, 8, 10}
sage: %time g.image()                                                                                                                                      
CPU times: user 7.81 s, sys: 0.02 s, total: 7.83 s
Wall time: 7.82 s
{1, 2, 3, 6, 8, 10}
```

As the size of the group grows, this gets much worse.

Besides that, i think it is ok.



---

archive/issue_comments_162551.json:
```json
{
    "body": "Now the image elements are directly parsed from the string representation which should be optimal.",
    "created_at": "2013-05-12T10:03:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-162551",
    "user": "https://github.com/sagetrac-aanand"
}
```

Now the image elements are directly parsed from the string representation which should be optimal.



---

archive/issue_comments_162552.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nAttachment: **[trac_13649_domain_codomain_image_new4.patch.gz](https://github.com/sagemath/sage/files/ticket13649/trac_13649_domain_codomain_image_new4.patch.gz)**\n\nAlso, please note, the image function described here assumes only those elements to be in the image set which are changed by the permutation group element. If the image of the entire domain is required, use the .tuple() function instead.",
    "created_at": "2013-05-12T10:05:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-162552",
    "user": "https://github.com/sagetrac-aanand"
}
```

<a id='comment:19'>Comment 19:</a>
Attachment: **[trac_13649_domain_codomain_image_new4.patch.gz](https://github.com/sagemath/sage/files/ticket13649/trac_13649_domain_codomain_image_new4.patch.gz)**

Also, please note, the image function described here assumes only those elements to be in the image set which are changed by the permutation group element. If the image of the entire domain is required, use the .tuple() function instead.



---

archive/issue_comments_162553.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nI would suggest to use the .cycle_tuples() representation instead of the string representation. Note that the elements permuted are not necessarely integers: you can define a SymmetricGroup acting on any type of objects. Parsing the string is a very bad idea: you should have to deal with parenthesis, commas, representation of different types of objects (aven on integers, you have to deal with several digit numbers)...",
    "created_at": "2013-05-12T10:50:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-162553",
    "user": "https://github.com/miguelmarco"
}
```

<a id='comment:20'>Comment 20:</a>
I would suggest to use the .cycle_tuples() representation instead of the string representation. Note that the elements permuted are not necessarely integers: you can define a SymmetricGroup acting on any type of objects. Parsing the string is a very bad idea: you should have to deal with parenthesis, commas, representation of different types of objects (aven on integers, you have to deal with several digit numbers)...



---

archive/issue_comments_162554.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nyes, I get the point. this would only work for single digit integers. Will upload a new patch soon.",
    "created_at": "2013-05-12T11:38:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-162554",
    "user": "https://github.com/sagetrac-aanand"
}
```

<a id='comment:21'>Comment 21:</a>
yes, I get the point. this would only work for single digit integers. Will upload a new patch soon.



---

archive/issue_comments_162555.json:
```json
{
    "body": "Used cycle_tuple().",
    "created_at": "2013-05-12T12:06:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-162555",
    "user": "https://github.com/sagetrac-aanand"
}
```

Used cycle_tuple().



---

archive/issue_comments_162556.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nAttachment: **[trac_13649_domain_codomain_image_n.patch.gz](https://github.com/sagemath/sage/files/ticket13649/trac_13649_domain_codomain_image_n.patch.gz)**\n\nLooks good now.",
    "created_at": "2013-05-13T12:19:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-162556",
    "user": "https://github.com/miguelmarco"
}
```

<a id='comment:22'>Comment 22:</a>
Attachment: **[trac_13649_domain_codomain_image_n.patch.gz](https://github.com/sagemath/sage/files/ticket13649/trac_13649_domain_codomain_image_n.patch.gz)**

Looks good now.



---

archive/issue_events_175115.json:
```json
{
    "actor": "https://github.com/miguelmarco",
    "created_at": "2013-05-13T12:19:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-175115"
}
```



---

archive/issue_events_175116.json:
```json
{
    "actor": "https://github.com/miguelmarco",
    "created_at": "2013-05-13T12:19:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-175116"
}
```



---

archive/issue_comments_162557.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nWhich patches should be applied?",
    "created_at": "2013-05-13T13:39:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-162557",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:23'>Comment 23:</a>
Which patches should be applied?



---

archive/issue_events_175117.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-13T13:39:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-175117"
}
```



---

archive/issue_events_175118.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-13T13:39:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-175118"
}
```



---

archive/issue_comments_162558.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nSorry for the delayed reply, the best patch added by me is the latest one,  trac_13649_domain_codomain_image_n.patch",
    "created_at": "2013-05-17T07:39:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-162558",
    "user": "https://github.com/sagetrac-aanand"
}
```

<a id='comment:24'>Comment 24:</a>
Sorry for the delayed reply, the best patch added by me is the latest one,  trac_13649_domain_codomain_image_n.patch



---

archive/issue_comments_162559.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nI was finally going to enhance my patch (sorry, I had a busy semester) but it looks like now `perm_gps/permgroup_element.pyx` already has a `domain` method. Has there been some change which is not documented in this bug report?",
    "created_at": "2013-07-19T16:31:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-162559",
    "user": "https://github.com/Lazza"
}
```

<a id='comment:25'>Comment 25:</a>
I was finally going to enhance my patch (sorry, I had a busy semester) but it looks like now `perm_gps/permgroup_element.pyx` already has a `domain` method. Has there been some change which is not documented in this bug report?



---

archive/issue_events_175119.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-175119"
}
```



---

archive/issue_events_175120.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-175120"
}
```



---

archive/issue_events_175121.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-175121"
}
```



---

archive/issue_events_175122.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-175122"
}
```



---

archive/issue_events_175123.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-175123"
}
```



---

archive/issue_events_175124.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-175124"
}
```



---

archive/issue_events_175125.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-175125"
}
```



---

archive/issue_events_175126.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-175126"
}
```



---

archive/issue_comments_162560.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\nYeah, it looks like the `domain` method already works. We're still missing `codomain` (whose implementation is fairly obvious) and `image`, though.\n\nIs it standard terminology that the image of a permutation is the set of elements that it changes (as in the patch in [comment:21](#comment%3A21))? This isn't my area of expertise, but I was expecting `image` to do the same thing as `domain` and `codomain`.",
    "created_at": "2020-03-08T00:36:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-162560",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:30'>Comment 30:</a>
Yeah, it looks like the `domain` method already works. We're still missing `codomain` (whose implementation is fairly obvious) and `image`, though.

Is it standard terminology that the image of a permutation is the set of elements that it changes (as in the patch in [comment:21](#comment%3A21))? This isn't my area of expertise, but I was expecting `image` to do the same thing as `domain` and `codomain`.



---

archive/issue_comments_162561.json:
```json
{
    "body": "<a id='comment:31'>Comment 31:</a>\nReplying to [@orlitzky](#comment%3A30):\n> Yeah, it looks like the `domain` method already works. We're still missing `codomain` (whose implementation is fairly obvious) and `image`, though.\n> \n> Is it standard terminology that the image of a permutation is the set of elements that it changes (as in the patch in [comment:21](#comment%3A21))? This isn't my area of expertise, but I was expecting `image` to do the same thing as `domain` and `codomain`.\n\nFor the symmetric group, why not just make codomain an alias of domain() which already works? And if someone can confirm what image refers to, in case it's the same as domain, can also be made an alias od domain(). Also, on the devel group, it has been noted that the .support() method for symmetric groups is also not according to definitions. Should we just fix that too in this ticket after modifying the ticket description appropriately?",
    "created_at": "2020-03-08T12:33:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-162561",
    "user": "https://github.com/SagnikDey92"
}
```

<a id='comment:31'>Comment 31:</a>
Replying to [@orlitzky](#comment%3A30):
> Yeah, it looks like the `domain` method already works. We're still missing `codomain` (whose implementation is fairly obvious) and `image`, though.
> 
> Is it standard terminology that the image of a permutation is the set of elements that it changes (as in the patch in [comment:21](#comment%3A21))? This isn't my area of expertise, but I was expecting `image` to do the same thing as `domain` and `codomain`.

For the symmetric group, why not just make codomain an alias of domain() which already works? And if someone can confirm what image refers to, in case it's the same as domain, can also be made an alias od domain(). Also, on the devel group, it has been noted that the .support() method for symmetric groups is also not according to definitions. Should we just fix that too in this ticket after modifying the ticket description appropriately?



---

archive/issue_comments_162562.json:
```json
{
    "body": "<a id='comment:32'>Comment 32:</a>\nIf you put `codomain = domain`, then unfortunately when people type `g.codomain?`, they're going to get the documentation for the domain method and it can be pretty confusing. (This issue comes up frequently.) In that regard, adding a short codomain method that just returns `self.domain()` is preferable.\n\nThe same disclaimer applies, but it looks like you're right about `support()` doing the wrong thing:\n\n* https://reference.wolfram.com/language/ref/PermutationSupport.html\n* https://www.maplesoft.com/support/help/Maple/view.aspx?path=GroupTheory/tutorials/WorkingWithPermutations\n\nThat terminology is unfortunate, since permutations are also usually thought of as real-valued functions, whose support is the set of things that don't get mapped to zero. Since that issue will likely be more controversial and can break existing code, it is best handled on another ticket.",
    "created_at": "2020-03-08T13:30:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-162562",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:32'>Comment 32:</a>
If you put `codomain = domain`, then unfortunately when people type `g.codomain?`, they're going to get the documentation for the domain method and it can be pretty confusing. (This issue comes up frequently.) In that regard, adding a short codomain method that just returns `self.domain()` is preferable.

The same disclaimer applies, but it looks like you're right about `support()` doing the wrong thing:

* https://reference.wolfram.com/language/ref/PermutationSupport.html
* https://www.maplesoft.com/support/help/Maple/view.aspx?path=GroupTheory/tutorials/WorkingWithPermutations

That terminology is unfortunate, since permutations are also usually thought of as real-valued functions, whose support is the set of things that don't get mapped to zero. Since that issue will likely be more controversial and can break existing code, it is best handled on another ticket.



---

archive/issue_comments_162563.json:
```json
{
    "body": "<a id='comment:33'>Comment 33:</a>\nBrief opinions, mostly as confirmation of what was said before.\n\nFor permutations, domain, codomain, and image should all return the same value. And we would want them to return the same thing as their parent too, which is not the case with the current implementation of domain:\n\n    sage: G.domain()\n    {1, 2, 3, 4, 5}\n    sage: G.random_element().domain()\n    [5, 2, 3, 4, 1]\n    sage: G.random_element().domain()\n    [5, 3, 4, 2, 1]\n\nOf course, it feels a bit silly to have so many methods to apparently achieve the same thing, but this makes permutations fit within the larger setting of morphisms.\n\nFixing the support method (which should return the set of non-fixed points) would be best another ticket.\n\nThanks for the work on that ticket!",
    "created_at": "2020-03-08T17:44:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-162563",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:33'>Comment 33:</a>
Brief opinions, mostly as confirmation of what was said before.

For permutations, domain, codomain, and image should all return the same value. And we would want them to return the same thing as their parent too, which is not the case with the current implementation of domain:

    sage: G.domain()
    {1, 2, 3, 4, 5}
    sage: G.random_element().domain()
    [5, 2, 3, 4, 1]
    sage: G.random_element().domain()
    [5, 3, 4, 2, 1]

Of course, it feels a bit silly to have so many methods to apparently achieve the same thing, but this makes permutations fit within the larger setting of morphisms.

Fixing the support method (which should return the set of non-fixed points) would be best another ticket.

Thanks for the work on that ticket!



---

archive/issue_comments_162564.json:
```json
{
    "body": "<a id='comment:34'>Comment 34:</a>\nRemoving the \"beginner\" tag from old tickets. Some could be returned to beginner-friendly status by adding a comment about what needs to be done. Some others might be easy for an experienced developer to finish.",
    "created_at": "2020-05-27T03:01:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-162564",
    "user": "https://github.com/DaveWitteMorris"
}
```

<a id='comment:34'>Comment 34:</a>
Removing the "beginner" tag from old tickets. Some could be returned to beginner-friendly status by adding a comment about what needs to be done. Some others might be easy for an experienced developer to finish.



---

archive/issue_events_175127.json:
```json
{
    "actor": "https://github.com/DaveWitteMorris",
    "created_at": "2020-05-27T03:01:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "label": "https://github.com/sagemath/sage/labels/good%20first%20issue",
    "label_color": "7057ff",
    "label_name": "good first issue",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-175127"
}
```



---

archive/issue_events_175128.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-29T01:28:25Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-175128"
}
```
