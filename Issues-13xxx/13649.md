# Issue 13649: Implement sigma.domain() and sigma.codomain() for sigma a permutation

archive/issues_013445.json:
```json
{
    "assignees": [
        "https://github.com/wdjoyner"
    ],
    "body": "Currently one needs to go through the parent of a permutation to get\nits domain and codomain:\n\n```\n    sage: G = SymmetricGroup(8)\n    sage: g = G.an_element()\n    sage: g.parent().domain()\n    {1, 2, 3, 4, 5, 6, 7, 8}\n```\n\nOne would want to have shorthands:\n\n```\n    sage: g.domain()\n    {1, 2, 3, 4, 5, 6, 7, 8}\n    sage: g.codomain()\n```\n\nlike there are for most other maps in Sage:\n\n```\n    sage: F = FiniteSetMaps(8)\n    sage: f = F.an_element()\n    sage: f.domain()\n    {0, .., 7}\n    sage: f.codomain()\n    {0, .., 7}\n```\n\nBonus points for:\n\n```\n    sage: g.image()\n    {1, 2, 3, 4, 5, 6, 7, 8}\n```\n\n\nCC:  @sagetrac-sage-combinat @orlitzky\n\nKeywords: **aggregation**\n\nReviewer: **Miguel Marco, Kannappan Sampath**\n\nAuthor: **Andrea Lazzarotto, Amitabh Anand**\n\nComponent: **group theory**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/13649_\n\n",
    "created_at": "2012-10-24T08:50:50Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20group%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/needs%20info"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Implement sigma.domain() and sigma.codomain() for sigma a permutation",
    "type": "issue",
    "updated_at": "2022-12-29T01:28:25Z",
    "url": "https://github.com/sagemath/sage/issues/13649",
    "user": "https://github.com/nthiery"
}
```
Currently one needs to go through the parent of a permutation to get
its domain and codomain:

```
    sage: G = SymmetricGroup(8)
    sage: g = G.an_element()
    sage: g.parent().domain()
    {1, 2, 3, 4, 5, 6, 7, 8}
```

One would want to have shorthands:

```
    sage: g.domain()
    {1, 2, 3, 4, 5, 6, 7, 8}
    sage: g.codomain()
```

like there are for most other maps in Sage:

```
    sage: F = FiniteSetMaps(8)
    sage: f = F.an_element()
    sage: f.domain()
    {0, .., 7}
    sage: f.codomain()
    {0, .., 7}
```

Bonus points for:

```
    sage: g.image()
    {1, 2, 3, 4, 5, 6, 7, 8}
```


CC:  @sagetrac-sage-combinat @orlitzky

Keywords: **aggregation**

Reviewer: **Miguel Marco, Kannappan Sampath**

Author: **Andrea Lazzarotto, Amitabh Anand**

Component: **group theory**

_Issue created by migration from https://trac.sagemath.org/ticket/13649_





---

archive/issue_events_191804.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2012-10-24T08:50:50Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-191804"
}
```



---

archive/issue_events_191805.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2012-10-24T08:50:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20group%20theory",
    "label_color": "eeeeee",
    "label_name": "c: group theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-191805"
}
```



---

archive/issue_events_191806.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2012-10-24T08:50:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-191806"
}
```



---

archive/issue_events_191807.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2012-10-24T08:50:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-191807"
}
```



---

archive/issue_events_191808.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2012-10-24T08:50:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "label": "https://github.com/sagemath/sage/labels/good%20first%20issue",
    "label_color": "7057ff",
    "label_name": "good first issue",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-191808"
}
```



---

archive/issue_events_191809.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2012-10-24T08:50:50Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "subject": "https://github.com/nthiery",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-191809"
}
```



---

archive/issue_comments_160133.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nAttachment: **[trac_13649_domain_alias.patch.gz](https://github.com/sagemath/sage/files/ticket13649/trac_13649_domain_alias.patch.gz)**\n\nI have added a small patch which adds the domain shorthand, by copying a bit the one in `FiniteSetMaps`. I haven't found a codomain in the parent type, so I would like to ask you what you exactly mean by codomain shorthand.",
    "created_at": "2012-12-10T16:48:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-160133",
    "user": "https://github.com/Lazza"
}
```

<div id="comment:1" align="right">comment:1</div>

Attachment: **[trac_13649_domain_alias.patch.gz](https://github.com/sagemath/sage/files/ticket13649/trac_13649_domain_alias.patch.gz)**

I have added a small patch which adds the domain shorthand, by copying a bit the one in `FiniteSetMaps`. I haven't found a codomain in the parent type, so I would like to ask you what you exactly mean by codomain shorthand.



---

archive/issue_comments_160134.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\ncodomain = range of a map. For a permutation, it is the same as the domain.",
    "created_at": "2012-12-10T18:04:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-160134",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:2" align="right">comment:2</div>

codomain = range of a map. For a permutation, it is the same as the domain.



---

archive/issue_comments_160135.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nDoes that mean that I have to simply make an alias to the `domain` method? Should I do it at the element level or in the parent set?",
    "created_at": "2012-12-10T20:48:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-160135",
    "user": "https://github.com/Lazza"
}
```

<div id="comment:3" align="right">comment:3</div>

Does that mean that I have to simply make an alias to the `domain` method? Should I do it at the element level or in the parent set?



---

archive/issue_comments_160136.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nReplying to [@Lazza](#comment:3):\n> Should I do it at the element level or in the parent set?\n\nI'd say both. Everything with a `domain()` would ideally have a `codomain()`.",
    "created_at": "2012-12-10T21:55:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-160136",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:4" align="right">comment:4</div>

Replying to [@Lazza](#comment:3):
> Should I do it at the element level or in the parent set?

I'd say both. Everything with a `domain()` would ideally have a `codomain()`.



---

archive/issue_comments_160137.json:
```json
{
    "body": "Attachment: **[trac_13649_added_codomain.patch.gz](https://github.com/sagemath/sage/files/ticket13649/trac_13649_added_codomain.patch.gz)**",
    "created_at": "2012-12-11T12:17:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-160137",
    "user": "https://github.com/Lazza"
}
```

Attachment: **[trac_13649_added_codomain.patch.gz](https://github.com/sagemath/sage/files/ticket13649/trac_13649_added_codomain.patch.gz)**



---

archive/issue_events_191810.json:
```json
{
    "actor": "https://github.com/Lazza",
    "created_at": "2012-12-11T12:18:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-191810"
}
```



---

archive/issue_comments_160138.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI think I've \"implemented\" the alias correctly. Being my first contribution of course means I'm not exactly sure.",
    "created_at": "2012-12-11T12:18:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-160138",
    "user": "https://github.com/Lazza"
}
```

<div id="comment:5" align="right">comment:5</div>

I think I've "implemented" the alias correctly. Being my first contribution of course means I'm not exactly sure.



---

archive/issue_comments_160139.json:
```json
{
    "body": "Author: **Andrea Lazzarotto**",
    "created_at": "2012-12-27T04:23:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-160139",
    "user": "https://github.com/nexttime"
}
```

Author: **Andrea Lazzarotto**



---

archive/issue_comments_160140.json:
```json
{
    "body": "Changed keywords from **agregation** to **aggregation**",
    "created_at": "2012-12-27T04:23:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-160140",
    "user": "https://github.com/nexttime"
}
```

Changed keywords from **agregation** to **aggregation**



---

archive/issue_comments_160141.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@vbraun](#comment:2):\n> codomain = range of a map.\n\nWell, in the case of elements of a symmetric group, yes, because they're bijections, but surely this isn't true in general. In general, the range is only a subset of the codomain, and is not necessarily equal to it. Or am I missing something?",
    "created_at": "2013-01-07T21:01:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-160141",
    "user": "https://github.com/kini"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@vbraun](#comment:2):
> codomain = range of a map.

Well, in the case of elements of a symmetric group, yes, because they're bijections, but surely this isn't true in general. In general, the range is only a subset of the codomain, and is not necessarily equal to it. Or am I missing something?



---

archive/issue_comments_160142.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nDoes it really make sense to have a codomain for the permutation group itself? I can see why if you consider an individual permutation as a map, you might want to know its codomain, but the whole permutation group isn't a map. I can see why the group might have a \"domain\", since it's the underlying set of the standard group action, but that seems to be a bit different from the \"domain of a function\" usage.",
    "created_at": "2013-01-07T21:15:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-160142",
    "user": "https://github.com/kini"
}
```

<div id="comment:8" align="right">comment:8</div>

Does it really make sense to have a codomain for the permutation group itself? I can see why if you consider an individual permutation as a map, you might want to know its codomain, but the whole permutation group isn't a map. I can see why the group might have a "domain", since it's the underlying set of the standard group action, but that seems to be a bit different from the "domain of a function" usage.



---

archive/issue_comments_160143.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nFor me, range = codomain. Whereas image = subset of codomain. Its probably the most popular definition but not universally accepted. This potential for confusion is why we avoid \"range\" in Sage altogether and only have domain and codomain. \n\nhttp://en.wikipedia.org/wiki/Image_(mathematics)#Other_terminology",
    "created_at": "2013-01-07T22:35:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-160143",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:9" align="right">comment:9</div>

For me, range = codomain. Whereas image = subset of codomain. Its probably the most popular definition but not universally accepted. This potential for confusion is why we avoid "range" in Sage altogether and only have domain and codomain. 

http://en.wikipedia.org/wiki/Image_(mathematics)#Other_terminology



---

archive/issue_comments_160144.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@kini](#comment:8):\n> Does it really make sense to have a codomain for the permutation group itself? I can see why if you consider an individual permutation as a map, you might want to know its codomain, but the whole permutation group isn't a map. I can see why the group might have a \"domain\", since it's the underlying set of the standard group action, but that seems to be a bit different from the \"domain of a function\" usage.\n\nAs far as I recall, Sage's Homsets have a domain and a codomain (which coincide for EndSets). The symmetric group is special case, and it would seem consistent to have this systematically for all sets of functions.\n\nCheers,\n                             Nicolas",
    "created_at": "2013-01-09T21:06:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-160144",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@kini](#comment:8):
> Does it really make sense to have a codomain for the permutation group itself? I can see why if you consider an individual permutation as a map, you might want to know its codomain, but the whole permutation group isn't a map. I can see why the group might have a "domain", since it's the underlying set of the standard group action, but that seems to be a bit different from the "domain of a function" usage.

As far as I recall, Sage's Homsets have a domain and a codomain (which coincide for EndSets). The symmetric group is special case, and it would seem consistent to have this systematically for all sets of functions.

Cheers,
                             Nicolas



---

archive/issue_comments_160145.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI am setting this to needs work for the following reasons: \n\nMAJOR:\n\n1. There is a typo in the example indicated for the function codomain (second of the patches, in the file permgroup.py). You really want to show the function codomain(). \n\n2. It might be nice to demonstrate that the domain and codomain are the same by adding an example to this effect (using `==`)! \n\n---\n\nMINOR:\n\n1. Fullstops please! \n2. It is advisable to write the docstrings imperatively: you might find [PEP8](http://www.python.org/dev/peps/pep-0008/) and [PEP257](http://www.python.org/dev/peps/pep-0257/) a good read. (I realise that the other docstrings are also like yours: \"returns\"ing instead of \"return\"ing. So, you may not change this in this patch.) \n\nModulo these, your patch is good to go. ~KnS",
    "created_at": "2013-03-05T06:38:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-160145",
    "user": "https://github.com/KPanComputes"
}
```

<div id="comment:11" align="right">comment:11</div>

I am setting this to needs work for the following reasons: 

MAJOR:

1. There is a typo in the example indicated for the function codomain (second of the patches, in the file permgroup.py). You really want to show the function codomain(). 

2. It might be nice to demonstrate that the domain and codomain are the same by adding an example to this effect (using `==`)! 

---

MINOR:

1. Fullstops please! 
2. It is advisable to write the docstrings imperatively: you might find [PEP8](http://www.python.org/dev/peps/pep-0008/) and [PEP257](http://www.python.org/dev/peps/pep-0257/) a good read. (I realise that the other docstrings are also like yours: "returns"ing instead of "return"ing. So, you may not change this in this patch.) 

Modulo these, your patch is good to go. ~KnS



---

archive/issue_events_191811.json:
```json
{
    "actor": "https://github.com/KPanComputes",
    "created_at": "2013-03-05T06:38:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-191811"
}
```



---

archive/issue_events_191812.json:
```json
{
    "actor": "https://github.com/KPanComputes",
    "created_at": "2013-03-05T06:38:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-191812"
}
```



---

archive/issue_comments_160146.json:
```json
{
    "body": "Domain, codomain, image of a permutation group element",
    "created_at": "2013-05-09T17:12:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-160146",
    "user": "https://github.com/sagetrac-aanand"
}
```

Domain, codomain, image of a permutation group element



---

archive/issue_comments_160147.json:
```json
{
    "body": "Attachment: **[trac_13649_domain_codomain_image.patch.gz](https://github.com/sagemath/sage/files/ticket13649/trac_13649_domain_codomain_image.patch.gz)**\n\nAttachment: **[trac_13649_domain_codomain_image.2.patch.gz](https://github.com/sagemath/sage/files/ticket13649/trac_13649_domain_codomain_image.2.patch.gz)**\n\nDomain, codomain, image of a permutation group element",
    "created_at": "2013-05-09T17:13:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-160147",
    "user": "https://github.com/sagetrac-aanand"
}
```

Attachment: **[trac_13649_domain_codomain_image.patch.gz](https://github.com/sagemath/sage/files/ticket13649/trac_13649_domain_codomain_image.patch.gz)**

Attachment: **[trac_13649_domain_codomain_image.2.patch.gz](https://github.com/sagemath/sage/files/ticket13649/trac_13649_domain_codomain_image.2.patch.gz)**

Domain, codomain, image of a permutation group element



---

archive/issue_comments_160148.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\naanand, make sure that you document and doctest the methods that you implement.\n\nTake a look at the sage developper's guide for the conventions to follow:\n\nhttp://www.sagemath.org/doc/developer/conventions.html#documentation-strings",
    "created_at": "2013-05-09T19:42:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-160148",
    "user": "https://github.com/miguelmarco"
}
```

<div id="comment:12" align="right">comment:12</div>

aanand, make sure that you document and doctest the methods that you implement.

Take a look at the sage developper's guide for the conventions to follow:

http://www.sagemath.org/doc/developer/conventions.html#documentation-strings



---

archive/issue_comments_160149.json:
```json
{
    "body": "Followed the prescribed conventions.",
    "created_at": "2013-05-10T15:23:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-160149",
    "user": "https://github.com/sagetrac-aanand"
}
```

Followed the prescribed conventions.



---

archive/issue_comments_160150.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nAttachment: **[trac_13649_domain_codomain_image_new.patch.gz](https://github.com/sagemath/sage/files/ticket13649/trac_13649_domain_codomain_image_new.patch.gz)**\n\nLooks good to me.\nJust one minor question: for coherence, it would be nice if the output of .image would be of the same tye as the one of .domain and .codomain.",
    "created_at": "2013-05-10T16:18:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-160150",
    "user": "https://github.com/miguelmarco"
}
```

<div id="comment:13" align="right">comment:13</div>

Attachment: **[trac_13649_domain_codomain_image_new.patch.gz](https://github.com/sagemath/sage/files/ticket13649/trac_13649_domain_codomain_image_new.patch.gz)**

Looks good to me.
Just one minor question: for coherence, it would be nice if the output of .image would be of the same tye as the one of .domain and .codomain.



---

archive/issue_comments_160151.json:
```json
{
    "body": "Now the output of .image() is same as that of .domain() and .codomain()",
    "created_at": "2013-05-10T17:34:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-160151",
    "user": "https://github.com/sagetrac-aanand"
}
```

Now the output of .image() is same as that of .domain() and .codomain()



---

archive/issue_comments_160152.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nAttachment: **[trac_13649_domain_codomain_image_new2.patch.gz](https://github.com/sagemath/sage/files/ticket13649/trac_13649_domain_codomain_image_new2.patch.gz)**\n\nDoctest fail:\n\n```\nRunning doctests with ID 2013-05-10-21-51-43-875205e8.\nDoctesting 1 file.\nsage -t devel/sage/sage/groups/perm_gps/permgroup_element.pyx\n**********************************************************************\nFile \"devel/sage/sage/groups/perm_gps/permgroup_element.pyx\", line 881, in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.domain\nFailed example:\n    g\nExpected:\n    (1,3,5)\nGot:\n    (1,3)(2,4,5)\n**********************************************************************\nFile \"devel/sage/sage/groups/perm_gps/permgroup_element.pyx\", line 883, in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.domain\nFailed example:\n    g.domain()\nExpected:\n    {1,2,3,4,5}\nGot:\n    {1, 2, 3, 4, 5}\n**********************************************************************\nFile \"devel/sage/sage/groups/perm_gps/permgroup_element.pyx\", line 900, in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.image\nFailed example:\n    g\nExpected:\n    (1,3,5)\nGot:\n    (1,3)(2,4,5)\n**********************************************************************\nFile \"devel/sage/sage/groups/perm_gps/permgroup_element.pyx\", line 902, in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.image\nFailed example:\n    g.image()\nExpected:\n    {1,3,5}\nGot:\n    {1, 2, 3, 4, 5}\n**********************************************************************\nFile \"devel/sage/sage/groups/perm_gps/permgroup_element.pyx\", line 917, in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.codomain\nFailed example:\n    g\nExpected:\n    (1,3,5)\nGot:\n    (1,3)(2,4,5)\n**********************************************************************\nFile \"devel/sage/sage/groups/perm_gps/permgroup_element.pyx\", line 919, in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.codomain\nFailed example:\n    g.codomain()\nExpected:\n    {1,2,3,4,5}\nGot:\n    {1, 2, 3, 4, 5}\n**********************************************************************\n```\n\nThat's because of two reasons: first, the output in doctests is not properly formated. And second, if you use a random element in a doctest, the result may vary each time the test is run.",
    "created_at": "2013-05-10T19:55:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-160152",
    "user": "https://github.com/miguelmarco"
}
```

<div id="comment:14" align="right">comment:14</div>

Attachment: **[trac_13649_domain_codomain_image_new2.patch.gz](https://github.com/sagemath/sage/files/ticket13649/trac_13649_domain_codomain_image_new2.patch.gz)**

Doctest fail:

```
Running doctests with ID 2013-05-10-21-51-43-875205e8.
Doctesting 1 file.
sage -t devel/sage/sage/groups/perm_gps/permgroup_element.pyx
**********************************************************************
File "devel/sage/sage/groups/perm_gps/permgroup_element.pyx", line 881, in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.domain
Failed example:
    g
Expected:
    (1,3,5)
Got:
    (1,3)(2,4,5)
**********************************************************************
File "devel/sage/sage/groups/perm_gps/permgroup_element.pyx", line 883, in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.domain
Failed example:
    g.domain()
Expected:
    {1,2,3,4,5}
Got:
    {1, 2, 3, 4, 5}
**********************************************************************
File "devel/sage/sage/groups/perm_gps/permgroup_element.pyx", line 900, in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.image
Failed example:
    g
Expected:
    (1,3,5)
Got:
    (1,3)(2,4,5)
**********************************************************************
File "devel/sage/sage/groups/perm_gps/permgroup_element.pyx", line 902, in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.image
Failed example:
    g.image()
Expected:
    {1,3,5}
Got:
    {1, 2, 3, 4, 5}
**********************************************************************
File "devel/sage/sage/groups/perm_gps/permgroup_element.pyx", line 917, in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.codomain
Failed example:
    g
Expected:
    (1,3,5)
Got:
    (1,3)(2,4,5)
**********************************************************************
File "devel/sage/sage/groups/perm_gps/permgroup_element.pyx", line 919, in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.codomain
Failed example:
    g.codomain()
Expected:
    {1,2,3,4,5}
Got:
    {1, 2, 3, 4, 5}
**********************************************************************
```

That's because of two reasons: first, the output in doctests is not properly formated. And second, if you use a random element in a doctest, the result may vary each time the test is run.



---

archive/issue_comments_160153.json:
```json
{
    "body": "Attachment: **[trac_13649_domain_codomain_image_new3.patch.gz](https://github.com/sagemath/sage/files/ticket13649/trac_13649_domain_codomain_image_new3.patch.gz)**\n\nDoctest should run fine now.",
    "created_at": "2013-05-11T07:17:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-160153",
    "user": "https://github.com/sagetrac-aanand"
}
```

Attachment: **[trac_13649_domain_codomain_image_new3.patch.gz](https://github.com/sagemath/sage/files/ticket13649/trac_13649_domain_codomain_image_new3.patch.gz)**

Doctest should run fine now.



---

archive/issue_comments_160154.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nLooks good to me.",
    "created_at": "2013-05-12T01:17:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-160154",
    "user": "https://github.com/miguelmarco"
}
```

<div id="comment:15" align="right">comment:15</div>

Looks good to me.



---

archive/issue_comments_160155.json:
```json
{
    "body": "Reviewer: **mmarco**",
    "created_at": "2013-05-12T01:17:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-160155",
    "user": "https://github.com/miguelmarco"
}
```

Reviewer: **mmarco**



---

archive/issue_events_191813.json:
```json
{
    "actor": "https://github.com/miguelmarco",
    "created_at": "2013-05-12T01:17:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-191813"
}
```



---

archive/issue_events_191814.json:
```json
{
    "actor": "https://github.com/miguelmarco",
    "created_at": "2013-05-12T01:17:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-191814"
}
```



---

archive/issue_comments_160156.json:
```json
{
    "body": "Changed author from **Andrea Lazzarotto** to **Andrea Lazzarotto, Amitabh Anand**",
    "created_at": "2013-05-12T01:27:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-160156",
    "user": "https://github.com/nexttime"
}
```

Changed author from **Andrea Lazzarotto** to **Andrea Lazzarotto, Amitabh Anand**



---

archive/issue_comments_160157.json:
```json
{
    "body": "Changed reviewer from **mmarco** to **Miguel Marco, Kannappan Sampath**",
    "created_at": "2013-05-12T01:27:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-160157",
    "user": "https://github.com/nexttime"
}
```

Changed reviewer from **mmarco** to **Miguel Marco, Kannappan Sampath**



---

archive/issue_events_191815.json:
```json
{
    "actor": "https://github.com/miguelmarco",
    "created_at": "2013-05-12T01:58:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-191815"
}
```



---

archive/issue_events_191816.json:
```json
{
    "actor": "https://github.com/miguelmarco",
    "created_at": "2013-05-12T01:58:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-191816"
}
```



---

archive/issue_comments_160158.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nNow that i think about it, your method to compute the image is clearly suboptimal. In the case of small groups you don't notice a difference. But if the group is very big, going through the image of all the elements might take a lot of time, which is unnecesary.\n\nIt would be much faster to just take it from the cycle structure.\n\nNotice the difference in timings (with your patch applied):\n\n```\n\nsage: G=SymmetricGroup(10000)                                                                                                                              \nsage: g=G('(1,2,3)(6,8,10)')                                                                                                                               \nsage: % time g.cycle_tuples()                                                                                                                              \nCPU times: user 0.00 s, sys: 0.00 s, total: 0.00 s\nWall time: 0.00 s\n[(1, 2, 3), (6, 8, 10)]\nsage: %time FiniteEnumeratedSet(flatten(g.cycle_tuples()))\nCPU times: user 0.00 s, sys: 0.00 s, total: 0.00 s\nWall time: 0.00 s\n{1, 2, 3, 6, 8, 10}\nsage: %time g.image()                                                                                                                                      \nCPU times: user 7.81 s, sys: 0.02 s, total: 7.83 s\nWall time: 7.82 s\n{1, 2, 3, 6, 8, 10}\n```\n\nAs the size of the group grows, this gets much worse.\n\nBesides that, i think it is ok.",
    "created_at": "2013-05-12T01:58:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-160158",
    "user": "https://github.com/miguelmarco"
}
```

<div id="comment:18" align="right">comment:18</div>

Now that i think about it, your method to compute the image is clearly suboptimal. In the case of small groups you don't notice a difference. But if the group is very big, going through the image of all the elements might take a lot of time, which is unnecesary.

It would be much faster to just take it from the cycle structure.

Notice the difference in timings (with your patch applied):

```

sage: G=SymmetricGroup(10000)                                                                                                                              
sage: g=G('(1,2,3)(6,8,10)')                                                                                                                               
sage: % time g.cycle_tuples()                                                                                                                              
CPU times: user 0.00 s, sys: 0.00 s, total: 0.00 s
Wall time: 0.00 s
[(1, 2, 3), (6, 8, 10)]
sage: %time FiniteEnumeratedSet(flatten(g.cycle_tuples()))
CPU times: user 0.00 s, sys: 0.00 s, total: 0.00 s
Wall time: 0.00 s
{1, 2, 3, 6, 8, 10}
sage: %time g.image()                                                                                                                                      
CPU times: user 7.81 s, sys: 0.02 s, total: 7.83 s
Wall time: 7.82 s
{1, 2, 3, 6, 8, 10}
```

As the size of the group grows, this gets much worse.

Besides that, i think it is ok.



---

archive/issue_comments_160159.json:
```json
{
    "body": "Now the image elements are directly parsed from the string representation which should be optimal.",
    "created_at": "2013-05-12T10:03:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-160159",
    "user": "https://github.com/sagetrac-aanand"
}
```

Now the image elements are directly parsed from the string representation which should be optimal.



---

archive/issue_comments_160160.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nAttachment: **[trac_13649_domain_codomain_image_new4.patch.gz](https://github.com/sagemath/sage/files/ticket13649/trac_13649_domain_codomain_image_new4.patch.gz)**\n\nAlso, please note, the image function described here assumes only those elements to be in the image set which are changed by the permutation group element. If the image of the entire domain is required, use the .tuple() function instead.",
    "created_at": "2013-05-12T10:05:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-160160",
    "user": "https://github.com/sagetrac-aanand"
}
```

<div id="comment:19" align="right">comment:19</div>

Attachment: **[trac_13649_domain_codomain_image_new4.patch.gz](https://github.com/sagemath/sage/files/ticket13649/trac_13649_domain_codomain_image_new4.patch.gz)**

Also, please note, the image function described here assumes only those elements to be in the image set which are changed by the permutation group element. If the image of the entire domain is required, use the .tuple() function instead.



---

archive/issue_comments_160161.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nI would suggest to use the .cycle_tuples() representation instead of the string representation. Note that the elements permuted are not necessarely integers: you can define a SymmetricGroup acting on any type of objects. Parsing the string is a very bad idea: you should have to deal with parenthesis, commas, representation of different types of objects (aven on integers, you have to deal with several digit numbers)...",
    "created_at": "2013-05-12T10:50:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-160161",
    "user": "https://github.com/miguelmarco"
}
```

<div id="comment:20" align="right">comment:20</div>

I would suggest to use the .cycle_tuples() representation instead of the string representation. Note that the elements permuted are not necessarely integers: you can define a SymmetricGroup acting on any type of objects. Parsing the string is a very bad idea: you should have to deal with parenthesis, commas, representation of different types of objects (aven on integers, you have to deal with several digit numbers)...



---

archive/issue_comments_160162.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nyes, I get the point. this would only work for single digit integers. Will upload a new patch soon.",
    "created_at": "2013-05-12T11:38:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-160162",
    "user": "https://github.com/sagetrac-aanand"
}
```

<div id="comment:21" align="right">comment:21</div>

yes, I get the point. this would only work for single digit integers. Will upload a new patch soon.



---

archive/issue_comments_160163.json:
```json
{
    "body": "Used cycle_tuple().",
    "created_at": "2013-05-12T12:06:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-160163",
    "user": "https://github.com/sagetrac-aanand"
}
```

Used cycle_tuple().



---

archive/issue_comments_160164.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nAttachment: **[trac_13649_domain_codomain_image_n.patch.gz](https://github.com/sagemath/sage/files/ticket13649/trac_13649_domain_codomain_image_n.patch.gz)**\n\nLooks good now.",
    "created_at": "2013-05-13T12:19:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-160164",
    "user": "https://github.com/miguelmarco"
}
```

<div id="comment:22" align="right">comment:22</div>

Attachment: **[trac_13649_domain_codomain_image_n.patch.gz](https://github.com/sagemath/sage/files/ticket13649/trac_13649_domain_codomain_image_n.patch.gz)**

Looks good now.



---

archive/issue_events_191817.json:
```json
{
    "actor": "https://github.com/miguelmarco",
    "created_at": "2013-05-13T12:19:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-191817"
}
```



---

archive/issue_events_191818.json:
```json
{
    "actor": "https://github.com/miguelmarco",
    "created_at": "2013-05-13T12:19:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-191818"
}
```



---

archive/issue_comments_160165.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nWhich patches should be applied?",
    "created_at": "2013-05-13T13:39:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-160165",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:23" align="right">comment:23</div>

Which patches should be applied?



---

archive/issue_events_191819.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-13T13:39:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-191819"
}
```



---

archive/issue_events_191820.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-13T13:39:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-191820"
}
```



---

archive/issue_comments_160166.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nSorry for the delayed reply, the best patch added by me is the latest one,  trac_13649_domain_codomain_image_n.patch",
    "created_at": "2013-05-17T07:39:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-160166",
    "user": "https://github.com/sagetrac-aanand"
}
```

<div id="comment:24" align="right">comment:24</div>

Sorry for the delayed reply, the best patch added by me is the latest one,  trac_13649_domain_codomain_image_n.patch



---

archive/issue_comments_160167.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nI was finally going to enhance my patch (sorry, I had a busy semester) but it looks like now `perm_gps/permgroup_element.pyx` already has a `domain` method. Has there been some change which is not documented in this bug report?",
    "created_at": "2013-07-19T16:31:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-160167",
    "user": "https://github.com/Lazza"
}
```

<div id="comment:25" align="right">comment:25</div>

I was finally going to enhance my patch (sorry, I had a busy semester) but it looks like now `perm_gps/permgroup_element.pyx` already has a `domain` method. Has there been some change which is not documented in this bug report?



---

archive/issue_events_191821.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-191821"
}
```



---

archive/issue_events_191822.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-191822"
}
```



---

archive/issue_events_191823.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-191823"
}
```



---

archive/issue_events_191824.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-191824"
}
```



---

archive/issue_events_191825.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-191825"
}
```



---

archive/issue_events_191826.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-191826"
}
```



---

archive/issue_events_191827.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-191827"
}
```



---

archive/issue_events_191828.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-191828"
}
```



---

archive/issue_comments_160168.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nYeah, it looks like the `domain` method already works. We're still missing `codomain` (whose implementation is fairly obvious) and `image`, though.\n\nIs it standard terminology that the image of a permutation is the set of elements that it changes (as in the patch in [comment:21](#comment:21))? This isn't my area of expertise, but I was expecting `image` to do the same thing as `domain` and `codomain`.",
    "created_at": "2020-03-08T00:36:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-160168",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:30" align="right">comment:30</div>

Yeah, it looks like the `domain` method already works. We're still missing `codomain` (whose implementation is fairly obvious) and `image`, though.

Is it standard terminology that the image of a permutation is the set of elements that it changes (as in the patch in [comment:21](#comment:21))? This isn't my area of expertise, but I was expecting `image` to do the same thing as `domain` and `codomain`.



---

archive/issue_comments_160169.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nReplying to [@orlitzky](#comment:30):\n> Yeah, it looks like the `domain` method already works. We're still missing `codomain` (whose implementation is fairly obvious) and `image`, though.\n> \n> Is it standard terminology that the image of a permutation is the set of elements that it changes (as in the patch in [comment:21](#comment:21))? This isn't my area of expertise, but I was expecting `image` to do the same thing as `domain` and `codomain`.\n\nFor the symmetric group, why not just make codomain an alias of domain() which already works? And if someone can confirm what image refers to, in case it's the same as domain, can also be made an alias od domain(). Also, on the devel group, it has been noted that the .support() method for symmetric groups is also not according to definitions. Should we just fix that too in this ticket after modifying the ticket description appropriately?",
    "created_at": "2020-03-08T12:33:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-160169",
    "user": "https://github.com/SagnikDey92"
}
```

<div id="comment:31" align="right">comment:31</div>

Replying to [@orlitzky](#comment:30):
> Yeah, it looks like the `domain` method already works. We're still missing `codomain` (whose implementation is fairly obvious) and `image`, though.
> 
> Is it standard terminology that the image of a permutation is the set of elements that it changes (as in the patch in [comment:21](#comment:21))? This isn't my area of expertise, but I was expecting `image` to do the same thing as `domain` and `codomain`.

For the symmetric group, why not just make codomain an alias of domain() which already works? And if someone can confirm what image refers to, in case it's the same as domain, can also be made an alias od domain(). Also, on the devel group, it has been noted that the .support() method for symmetric groups is also not according to definitions. Should we just fix that too in this ticket after modifying the ticket description appropriately?



---

archive/issue_comments_160170.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nIf you put `codomain = domain`, then unfortunately when people type `g.codomain?`, they're going to get the documentation for the domain method and it can be pretty confusing. (This issue comes up frequently.) In that regard, adding a short codomain method that just returns `self.domain()` is preferable.\n\nThe same disclaimer applies, but it looks like you're right about `support()` doing the wrong thing:\n\n* https://reference.wolfram.com/language/ref/PermutationSupport.html\n* https://www.maplesoft.com/support/help/Maple/view.aspx?path=GroupTheory/tutorials/WorkingWithPermutations\n\nThat terminology is unfortunate, since permutations are also usually thought of as real-valued functions, whose support is the set of things that don't get mapped to zero. Since that issue will likely be more controversial and can break existing code, it is best handled on another ticket.",
    "created_at": "2020-03-08T13:30:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-160170",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:32" align="right">comment:32</div>

If you put `codomain = domain`, then unfortunately when people type `g.codomain?`, they're going to get the documentation for the domain method and it can be pretty confusing. (This issue comes up frequently.) In that regard, adding a short codomain method that just returns `self.domain()` is preferable.

The same disclaimer applies, but it looks like you're right about `support()` doing the wrong thing:

* https://reference.wolfram.com/language/ref/PermutationSupport.html
* https://www.maplesoft.com/support/help/Maple/view.aspx?path=GroupTheory/tutorials/WorkingWithPermutations

That terminology is unfortunate, since permutations are also usually thought of as real-valued functions, whose support is the set of things that don't get mapped to zero. Since that issue will likely be more controversial and can break existing code, it is best handled on another ticket.



---

archive/issue_comments_160171.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nBrief opinions, mostly as confirmation of what was said before.\n\nFor permutations, domain, codomain, and image should all return the same value. And we would want them to return the same thing as their parent too, which is not the case with the current implementation of domain:\n\n    sage: G.domain()\n    {1, 2, 3, 4, 5}\n    sage: G.random_element().domain()\n    [5, 2, 3, 4, 1]\n    sage: G.random_element().domain()\n    [5, 3, 4, 2, 1]\n\nOf course, it feels a bit silly to have so many methods to apparently achieve the same thing, but this makes permutations fit within the larger setting of morphisms.\n\nFixing the support method (which should return the set of non-fixed points) would be best another ticket.\n\nThanks for the work on that ticket!",
    "created_at": "2020-03-08T17:44:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-160171",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:33" align="right">comment:33</div>

Brief opinions, mostly as confirmation of what was said before.

For permutations, domain, codomain, and image should all return the same value. And we would want them to return the same thing as their parent too, which is not the case with the current implementation of domain:

    sage: G.domain()
    {1, 2, 3, 4, 5}
    sage: G.random_element().domain()
    [5, 2, 3, 4, 1]
    sage: G.random_element().domain()
    [5, 3, 4, 2, 1]

Of course, it feels a bit silly to have so many methods to apparently achieve the same thing, but this makes permutations fit within the larger setting of morphisms.

Fixing the support method (which should return the set of non-fixed points) would be best another ticket.

Thanks for the work on that ticket!



---

archive/issue_comments_160172.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nRemoving the \"beginner\" tag from old tickets. Some could be returned to beginner-friendly status by adding a comment about what needs to be done. Some others might be easy for an experienced developer to finish.",
    "created_at": "2020-05-27T03:01:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13649#issuecomment-160172",
    "user": "https://github.com/DaveWitteMorris"
}
```

<div id="comment:34" align="right">comment:34</div>

Removing the "beginner" tag from old tickets. Some could be returned to beginner-friendly status by adding a comment about what needs to be done. Some others might be easy for an experienced developer to finish.



---

archive/issue_events_191829.json:
```json
{
    "actor": "https://github.com/DaveWitteMorris",
    "created_at": "2020-05-27T03:01:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "label": "https://github.com/sagemath/sage/labels/good%20first%20issue",
    "label_color": "7057ff",
    "label_name": "good first issue",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-191829"
}
```



---

archive/issue_events_191830.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-29T01:28:25Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13649",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13649#event-191830"
}
```
