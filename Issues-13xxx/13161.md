# Issue 13161: Fix unicode issue in axes labels

archive/issues_012989.json:
```json
{
    "body": "See [this ask.sagemath.org post](http://ask.sagemath.org/question/1559/a-bug-in-graphicspy).  The proposed fix there is to replace [this line](http://hg.sagemath.org/sage-main/file/9ab4ab6e12d0/sage/plot/graphics.py#l634) by\n\n```diff\n-self.__axes_labels = (str(l[0]), str(l[1]))\n+self.__axes_labels = (l[0], l[1])\n```\nConsidering that `l` is already supposed to be a tuple or list of two strings, this seems pretty plausible.\n\n---\n\nApply [attachment:trac_13161.patch] and [attachment:trac_13161-review-sl.patch]\n\n**Assignee:** @jasongrout, @williamstein\n\n**CC:**  @dandrake shahuwang\n\n**Reviewer:** S\u00e9bastien Labb\u00e9\n\n**Author:** Dan Drake, \u738b\u745e\u671f\n\n**Merged:** sage-5.3.rc0\n\nIssue created by migration from https://trac.sagemath.org/ticket/13161\n\n",
    "closed_at": "2012-08-23T12:46:55Z",
    "created_at": "2012-06-25T15:34:17Z",
    "labels": [
        "component: graphics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.3",
    "title": "Fix unicode issue in axes labels",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13161",
    "user": "https://github.com/kcrisman"
}
```
See [this ask.sagemath.org post](http://ask.sagemath.org/question/1559/a-bug-in-graphicspy).  The proposed fix there is to replace [this line](http://hg.sagemath.org/sage-main/file/9ab4ab6e12d0/sage/plot/graphics.py#l634) by

```diff
-self.__axes_labels = (str(l[0]), str(l[1]))
+self.__axes_labels = (l[0], l[1])
```
Considering that `l` is already supposed to be a tuple or list of two strings, this seems pretty plausible.

---

Apply [attachment:trac_13161.patch] and [attachment:trac_13161-review-sl.patch]

**Assignee:** @jasongrout, @williamstein

**CC:**  @dandrake shahuwang

**Reviewer:** Sébastien Labbé

**Author:** Dan Drake, 王瑞期

**Merged:** sage-5.3.rc0

Issue created by migration from https://trac.sagemath.org/ticket/13161





---

archive/issue_comments_187958.json:
```json
{
    "body": "<a id='comment:1'></a>\nIn fact, I get a kind of weird error trying to do things like \n\n```\nsage: plot(x,axes_labels=['z','\ub2f4'])\n```\nanyway, so we could have better support for this in general.  One shouldn't have to set a matplotlib option.",
    "created_at": "2012-06-25T15:37:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13161#issuecomment-187958",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:1'></a>
In fact, I get a kind of weird error trying to do things like 

```
sage: plot(x,axes_labels=['z','담'])
```
anyway, so we could have better support for this in general.  One shouldn't have to set a matplotlib option.



---

archive/issue_comments_187959.json:
```json
{
    "body": "<a id='comment:2'></a>\nThere is an update at the ask.sagemath.org post.  Apparently it's actually a fair amount of work to get matplotlib to do certain unicode fonts properly... that doesn't mean this isn't a bug.\n\nI'm wondering what the Sage-mobile people at Sunkyunkwan U. in Korea do for this, if they do anything?  Dan, do you know?",
    "created_at": "2012-06-26T13:33:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13161#issuecomment-187959",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:2'></a>
There is an update at the ask.sagemath.org post.  Apparently it's actually a fair amount of work to get matplotlib to do certain unicode fonts properly... that doesn't mean this isn't a bug.

I'm wondering what the Sage-mobile people at Sunkyunkwan U. in Korea do for this, if they do anything?  Dan, do you know?



---

archive/issue_comments_187960.json:
```json
{
    "body": "<a id='comment:3'></a>\nReplying to [kcrisman](#comment%3A2):\n> I'm wondering what the Sage-mobile people at Sunkyunkwan U. in Korea do for this, if they do anything?  Dan, do you know?\n\n\nIn my experience, Korean developers are ignorant of encoding issues; it seems like they test it on their computer, and if it works, they ship it. This works fine when all your users are using the same version of Windows XP as you, but I still get lots of emails and see webpages in euc-kr or other encodings that don't declare their encoding and hence don't work when things default to utf-8.\n\nSo, short answer: my guess is they don't do anything. But I'll ask them.",
    "created_at": "2012-06-27T20:25:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13161#issuecomment-187960",
    "user": "https://github.com/dandrake"
}
```

<a id='comment:3'></a>
Replying to [kcrisman](#comment%3A2):
> I'm wondering what the Sage-mobile people at Sunkyunkwan U. in Korea do for this, if they do anything?  Dan, do you know?


In my experience, Korean developers are ignorant of encoding issues; it seems like they test it on their computer, and if it works, they ship it. This works fine when all your users are using the same version of Windows XP as you, but I still get lots of emails and see webpages in euc-kr or other encodings that don't declare their encoding and hence don't work when things default to utf-8.

So, short answer: my guess is they don't do anything. But I'll ask them.



---

archive/issue_comments_187961.json:
```json
{
    "body": "<a id='comment:4'></a>\nI came up with this bug yesterday using sage-5.0. Here are the notes I took :\n\nThe following works:\n\n```\nsage: c = circle((0,0), 1)\nsage: c.axes_labels(['X', 'Y'])\nsage: c\n```\n\nAccent in normal string gets a ValueError:\n\n```\nsage: c.axes_labels(['an accent : \u00e9', 'Y'])\nsage: c\nTraceback (most recent call last): \n... \nValueError: matplotlib display text must have all code points < 128 or use Unicode strings\n```\n \nAccent in unicode string gets translated to str which yields a UnicodeError :\n\n```\nsage: c.axes_labels([u'an accent : \u00e9', 'Y'])                               \nTraceback (most recent call last):\n...             \n--> 634         self.__axes_labels = (str(l[0]), str(l[1]))\n...\nUnicodeEncodeError: 'ascii' codec can't encode characters in position 12-13: ordinal not in range(128)\n```\n\nNot declaring the unicode for command `text` also gives a ValueError:\n\n```\nsage: text('an accent : \u00e9', (0,0))\nTraceback (most recent call last): \n... \nValueError: matplotlib display text must have all code points < 128 or use Unicode strings\n```\n\nBut declaring unicode works for command `text`. Although, no error are raised, the result is not good : the \"\u00e9\" gets printed as the two characters \"~A commercial c\" :\n\n```\nsage: text(u'an accent : \u00e9', (0,0))\n```\n\nStrangely it gets printed correctly if the command is written in a file (without declaring encoding) and then attached :\n\n```\n# file.sage\nt = text(u'an accent : \u00e9', (0,0))\n```\n\nand then\n\n```\nsage: attach file.sage\nsage: t\n```\n\nis perfect! This shows that somehow matplotlib is able to work with unicode strings. We just have to make it work properly.",
    "created_at": "2012-07-17T15:19:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13161#issuecomment-187961",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:4'></a>
I came up with this bug yesterday using sage-5.0. Here are the notes I took :

The following works:

```
sage: c = circle((0,0), 1)
sage: c.axes_labels(['X', 'Y'])
sage: c
```

Accent in normal string gets a ValueError:

```
sage: c.axes_labels(['an accent : é', 'Y'])
sage: c
Traceback (most recent call last): 
... 
ValueError: matplotlib display text must have all code points < 128 or use Unicode strings
```
 
Accent in unicode string gets translated to str which yields a UnicodeError :

```
sage: c.axes_labels([u'an accent : é', 'Y'])                               
Traceback (most recent call last):
...             
--> 634         self.__axes_labels = (str(l[0]), str(l[1]))
...
UnicodeEncodeError: 'ascii' codec can't encode characters in position 12-13: ordinal not in range(128)
```

Not declaring the unicode for command `text` also gives a ValueError:

```
sage: text('an accent : é', (0,0))
Traceback (most recent call last): 
... 
ValueError: matplotlib display text must have all code points < 128 or use Unicode strings
```

But declaring unicode works for command `text`. Although, no error are raised, the result is not good : the "é" gets printed as the two characters "~A commercial c" :

```
sage: text(u'an accent : é', (0,0))
```

Strangely it gets printed correctly if the command is written in a file (without declaring encoding) and then attached :

```
# file.sage
t = text(u'an accent : é', (0,0))
```

and then

```
sage: attach file.sage
sage: t
```

is perfect! This shows that somehow matplotlib is able to work with unicode strings. We just have to make it work properly.



---

archive/issue_comments_187962.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [ddrake](#comment%3A3):\n> So, short answer: my guess is they don't do anything. But I'll ask them.\n\n\nTo followup: their response is, they didn't do anything special and do run into encoding issues here and there.",
    "created_at": "2012-07-18T21:12:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13161#issuecomment-187962",
    "user": "https://github.com/dandrake"
}
```

<a id='comment:5'></a>
Replying to [ddrake](#comment%3A3):
> So, short answer: my guess is they don't do anything. But I'll ask them.


To followup: their response is, they didn't do anything special and do run into encoding issues here and there.



---

archive/issue_comments_187963.json:
```json
{
    "body": "**Author:** Dan Drake",
    "created_at": "2012-07-18T23:08:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13161#issuecomment-187963",
    "user": "https://github.com/dandrake"
}
```

**Author:** Dan Drake



---

archive/issue_comments_187964.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2012-07-18T23:08:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13161#issuecomment-187964",
    "user": "https://github.com/dandrake"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_187965.json:
```json
{
    "body": "<a id='comment:6'></a>\nPatch up. I removed the `str()` calls, and also just wrote `tuple(l)`, since the code guarantees that we have a tuple or list of length 2.\n\nI see the problem reported by S\u00e9bastian, though; using Unicode strings, the generated plots have the wrong characters. But I think that is a font problem and could be fixed on another ticket; for now, let's get our own code working.",
    "created_at": "2012-07-18T23:08:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13161#issuecomment-187965",
    "user": "https://github.com/dandrake"
}
```

<a id='comment:6'></a>
Patch up. I removed the `str()` calls, and also just wrote `tuple(l)`, since the code guarantees that we have a tuple or list of length 2.

I see the problem reported by Sébastian, though; using Unicode strings, the generated plots have the wrong characters. But I think that is a font problem and could be fixed on another ticket; for now, let's get our own code working.



---

archive/issue_comments_187966.json:
```json
{
    "body": "<a id='comment:7'></a>\nHi, on sage-5.0, I get the following reject :\n\n```\n10 slabbe@pol ~/Applications/sage-5.0/devel/sage/sage/plot $ cat graphics.py.rej \n--- graphics.py\n+++ graphics.py\n@@ -637,7 +656,7 @@\n             raise TypeError, \"l must be a list or tuple\"\n         if len(l) != 2:\n             raise ValueError, \"l must have length 2\"\n-        self._axes_labels = (str(l[0]), str(l[1]))\n+        self._axes_labels = tuple(l)\n \n     def axes_label_color(self, c=None):\n         r\"\"\"\n```\n\nI need to install a newer version of Sage to do the review...\n\nS\u00e9bastien",
    "created_at": "2012-07-19T18:01:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13161#issuecomment-187966",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:7'></a>
Hi, on sage-5.0, I get the following reject :

```
10 slabbe@pol ~/Applications/sage-5.0/devel/sage/sage/plot $ cat graphics.py.rej 
--- graphics.py
+++ graphics.py
@@ -637,7 +656,7 @@
             raise TypeError, "l must be a list or tuple"
         if len(l) != 2:
             raise ValueError, "l must have length 2"
-        self._axes_labels = (str(l[0]), str(l[1]))
+        self._axes_labels = tuple(l)
 
     def axes_label_color(self, c=None):
         r"""
```

I need to install a newer version of Sage to do the review...

Sébastien



---

archive/issue_comments_187967.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [slabbe](#comment%3A7):\n> Hi, on sage-5.0, I get the following reject :\n\n\nAh! Sorry! I forgot to say that I used 5.2.rc0.\n\nHowever, you can manually fix it quite easily: the problem is #12974, which changed the number of underscores. On older versions (before 5.2.beta0), use two underscores.",
    "created_at": "2012-07-19T18:27:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13161#issuecomment-187967",
    "user": "https://github.com/dandrake"
}
```

<a id='comment:8'></a>
Replying to [slabbe](#comment%3A7):
> Hi, on sage-5.0, I get the following reject :


Ah! Sorry! I forgot to say that I used 5.2.rc0.

However, you can manually fix it quite easily: the problem is #12974, which changed the number of underscores. On older versions (before 5.2.beta0), use two underscores.



---

archive/issue_comments_187968.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2012-07-26T15:36:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13161#issuecomment-187968",
    "user": "https://github.com/seblabbe"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_187969.json:
```json
{
    "body": "<a id='comment:9'></a>\nProblem is fixed (tested on sage-5.2.rc0). All tests passed on `sage/plot/graphics.py`. Documention builds fine and looks good from html and command line. I will open a new ticket for the other problem mentionned above about how matplolib handles unicode.\n\nPositive review.",
    "created_at": "2012-07-26T15:36:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13161#issuecomment-187969",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:9'></a>
Problem is fixed (tested on sage-5.2.rc0). All tests passed on `sage/plot/graphics.py`. Documention builds fine and looks good from html and command line. I will open a new ticket for the other problem mentionned above about how matplolib handles unicode.

Positive review.



---

archive/issue_comments_187970.json:
```json
{
    "body": "**Reviewer:** S\u00e9bastien Labb\u00e9",
    "created_at": "2012-07-26T15:36:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13161#issuecomment-187970",
    "user": "https://github.com/seblabbe"
}
```

**Reviewer:** Sébastien Labbé



---

archive/issue_comments_187971.json:
```json
{
    "body": "<a id='comment:10'></a>\n> I will open a new ticket for the other problem mentionned above about how matplolib handles unicode.\n\n\nThis is now #13296",
    "created_at": "2012-07-26T16:04:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13161#issuecomment-187971",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:10'></a>
> I will open a new ticket for the other problem mentionned above about how matplolib handles unicode.


This is now #13296



---

archive/issue_comments_187972.json:
```json
{
    "body": "<a id='comment:11'></a>\nI'm just temporarily adding the original author by his ask.sagemath handle.  Hopefully we'll get a complete name soon.",
    "created_at": "2012-07-26T16:19:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13161#issuecomment-187972",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:11'></a>
I'm just temporarily adding the original author by his ask.sagemath handle.  Hopefully we'll get a complete name soon.



---

archive/issue_comments_187973.json:
```json
{
    "body": "**Changing author** from \"Dan Drake\" to \"Dan Drake, shahuwang\".",
    "created_at": "2012-07-26T16:19:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13161#issuecomment-187973",
    "user": "https://github.com/kcrisman"
}
```

**Changing author** from "Dan Drake" to "Dan Drake, shahuwang".



---

archive/issue_events_041849.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-07-27T20:07:44Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13161",
    "milestone": "sage-5.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13161#event-41849"
}
```



---

archive/issue_comments_187974.json:
```json
{
    "body": "<a id='comment:13'></a>\nThis breaks when building the PDF documentation:\n\n```\n! Package ucs Error: Unknown Unicode character 45812 = U+B2F4,\n(ucs)                possibly declared in uni-178.def.\n(ucs)                Type H to see if it is available with options.\n\nSee the ucs package documentation for explanation.\nType  H <return>  for immediate help.\n ...\n\nl.39867 ...s}{<EB><8B><B4>}\\PYG{l+s}{'}\\PYG{p}{]}\\PYG{p}{)}\n\n?\n! Emergency stop.\n ...\n\nl.39867 ...s}{<EB><8B><B4>}\\PYG{l+s}{'}\\PYG{p}{]}\\PYG{p}{)}\n\n!  ==> Fatal error occurred, no output PDF file produced!\n```",
    "created_at": "2012-07-31T06:35:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13161#issuecomment-187974",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'></a>
This breaks when building the PDF documentation:

```
! Package ucs Error: Unknown Unicode character 45812 = U+B2F4,
(ucs)                possibly declared in uni-178.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H <return>  for immediate help.
 ...

l.39867 ...s}{<EB><8B><B4>}\PYG{l+s}{'}\PYG{p}{]}\PYG{p}{)}

?
! Emergency stop.
 ...

l.39867 ...s}{<EB><8B><B4>}\PYG{l+s}{'}\PYG{p}{]}\PYG{p}{)}

!  ==> Fatal error occurred, no output PDF file produced!
```



---

archive/issue_comments_187975.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2012-07-31T06:35:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13161#issuecomment-187975",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_comments_187976.json:
```json
{
    "body": "<a id='comment:14'></a>\nI never builded the documentation as pdf before. I just did it and get the same error.\n\nCould this be related to the first line added by the patch:\n\n```\n# -*- encoding: utf-8 -*- \n```\n\nwhich should be \n\n```\n# -*- coding: utf-8 -*- \n```\n\n? \n\nAnother possibility would be to write the test as\n\n```\nsage: c.axes_labels(['z',u'\\xeb\\x8b\\xb4']) \nsage: c._axes_labels \n('z', u'\\xeb\\x8b\\xb4') \n```\n\ninstead of\n\n```\nsage: c.axes_labels(['z',u'\u00eb\ufffd\u017d']) \nsage: c._axes_labels \n('z', u'\\xeb\\x8b\\xb4') \n```\n\nI am testing those two options right now.",
    "created_at": "2012-07-31T17:10:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13161#issuecomment-187976",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:14'></a>
I never builded the documentation as pdf before. I just did it and get the same error.

Could this be related to the first line added by the patch:

```
# -*- encoding: utf-8 -*- 
```

which should be 

```
# -*- coding: utf-8 -*- 
```

? 

Another possibility would be to write the test as

```
sage: c.axes_labels(['z',u'\xeb\x8b\xb4']) 
sage: c._axes_labels 
('z', u'\xeb\x8b\xb4') 
```

instead of

```
sage: c.axes_labels(['z',u'ë�Ž']) 
sage: c._axes_labels 
('z', u'\xeb\x8b\xb4') 
```

I am testing those two options right now.



---

archive/issue_comments_187977.json:
```json
{
    "body": "<a id='comment:15'></a>\n> I am testing those two options right now.\n\n\nI get the same error for both options...",
    "created_at": "2012-07-31T17:30:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13161#issuecomment-187977",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:15'></a>
> I am testing those two options right now.


I get the same error for both options...



---

archive/issue_comments_187978.json:
```json
{
    "body": "<a id='comment:16'></a>\nMy guess is that the Asian (?) character used in the doctest is not recognized by utf-8 encoding, or at least by PDFLaTeX's unicode implementation. So we should try a different character instead, for example with this change:\n\n```diff\ndiff --git a/sage/plot/graphics.py b/sage/plot/graphics.py\n--- a/sage/plot/graphics.py\n+++ b/sage/plot/graphics.py\n@@ -637,9 +637,9 @@ class Graphics(SageObject):\n         ::\n \n             sage: c = circle((0,0), 1)\n-            sage: c.axes_labels(['z',u'\ub2f4'])\n+            sage: c.axes_labels(['z',u'\u00e9'])\n             sage: c._axes_labels\n-            ('z', u'\\xeb\\x8b\\xb4')\n+            ('z', u'\\xc3\\xa9')\n \n             sage: c.axes_labels([u'an accent : \u00e9', 'Y'])\n             sage: c._axes_labels\n```\nI'm attaching a new patch which does this.",
    "created_at": "2012-07-31T22:49:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13161#issuecomment-187978",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:16'></a>
My guess is that the Asian (?) character used in the doctest is not recognized by utf-8 encoding, or at least by PDFLaTeX's unicode implementation. So we should try a different character instead, for example with this change:

```diff
diff --git a/sage/plot/graphics.py b/sage/plot/graphics.py
--- a/sage/plot/graphics.py
+++ b/sage/plot/graphics.py
@@ -637,9 +637,9 @@ class Graphics(SageObject):
         ::
 
             sage: c = circle((0,0), 1)
-            sage: c.axes_labels(['z',u'담'])
+            sage: c.axes_labels(['z',u'é'])
             sage: c._axes_labels
-            ('z', u'\xeb\x8b\xb4')
+            ('z', u'\xc3\xa9')
 
             sage: c.axes_labels([u'an accent : é', 'Y'])
             sage: c._axes_labels
```
I'm attaching a new patch which does this.



---

archive/issue_comments_187979.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2012-07-31T22:49:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13161#issuecomment-187979",
    "user": "https://github.com/jhpalmieri"
}
```

**Changing status** from needs_work to needs_review.



---

archive/attachments_017787.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_13161.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket13161/trac_13161.patch",
    "created_at": "2012-07-31T22:50:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13161",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/jhpalmieri"
}
```



---

archive/issue_comments_187980.json:
```json
{
    "body": "<a id='comment:17'></a>\n",
    "created_at": "2012-07-31T22:50:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13161#issuecomment-187980",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:17'></a>




---

archive/issue_comments_187981.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -5,3 +5,7 @@\n +self.__axes_labels = (l[0], l[1])\n ```\n Considering that `l` is already supposed to be a tuple or list of two strings, this seems pretty plausible.\n+\n+---\n+\n+Apply [attachment:trac_13161.patch].\n``````\n",
    "created_at": "2012-07-31T22:50:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13161#issuecomment-187981",
    "user": "https://github.com/jhpalmieri"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -5,3 +5,7 @@
 +self.__axes_labels = (l[0], l[1])
 ```
 Considering that `l` is already supposed to be a tuple or list of two strings, this seems pretty plausible.
+
+---
+
+Apply [attachment:trac_13161.patch].
``````




---

archive/issue_comments_187982.json:
```json
{
    "body": "<a id='comment:18'></a>\nJust for interestingness, couldn't you use an actual word instead of one character?\n\nFor example, \"int\u00e9r\u00eat\" (French for interest, a word which might plausably appear as label).",
    "created_at": "2012-08-01T06:09:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13161#issuecomment-187982",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:18'></a>
Just for interestingness, couldn't you use an actual word instead of one character?

For example, "intérêt" (French for interest, a word which might plausably appear as label).



---

archive/issue_comments_187983.json:
```json
{
    "body": "**Changing author** from \"Dan Drake, shahuwang\" to \"Dan Drake, \u738b\u745e\u671f\".",
    "created_at": "2012-08-07T02:53:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13161#issuecomment-187983",
    "user": "https://github.com/kcrisman"
}
```

**Changing author** from "Dan Drake, shahuwang" to "Dan Drake, 王瑞期".



---

archive/issue_comments_187984.json:
```json
{
    "body": "<a id='comment:19'></a>\nHi shahuwang - is this a good way to have your name?  Although usually we use more-or-less Roman characters for our stuff (including for e.g. Korean developers), maybe this is a first time...",
    "created_at": "2012-08-07T02:53:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13161#issuecomment-187984",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:19'></a>
Hi shahuwang - is this a good way to have your name?  Although usually we use more-or-less Roman characters for our stuff (including for e.g. Korean developers), maybe this is a first time...



---

archive/issue_comments_187985.json:
```json
{
    "body": "<a id='comment:20'></a>\nReplying to [kcrisman](#comment%3A19):\n\n> Hi shahuwang - is this a good way to have your name?  Although usually we use more-or-less Roman characters for our stuff (including for e.g. Korean developers), maybe this is a first time...\n\n\nHi, it seems that there will be some diffcult if I use my name in Chinese,sorry for that,and I will change it into Roman characters.Thanks very much.\n\nAlso,I want to report another bug of sage to deal with CJK(Chinese,Japanese,Korean),I open a ticket for it ,this is the\u00a0[ticket](http://trac.sagemath.org/sage_trac/ticket/13332)\u00a0.As I am not familiar with the process,maybe I have made some mistake here.",
    "created_at": "2012-08-07T04:31:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13161#issuecomment-187985",
    "user": "https://trac.sagemath.org/admin/accounts/users/shahuwang"
}
```

<a id='comment:20'></a>
Replying to [kcrisman](#comment%3A19):

> Hi shahuwang - is this a good way to have your name?  Although usually we use more-or-less Roman characters for our stuff (including for e.g. Korean developers), maybe this is a first time...


Hi, it seems that there will be some diffcult if I use my name in Chinese,sorry for that,and I will change it into Roman characters.Thanks very much.

Also,I want to report another bug of sage to deal with CJK(Chinese,Japanese,Korean),I open a ticket for it ,this is the [ticket](http://trac.sagemath.org/sage_trac/ticket/13332) .As I am not familiar with the process,maybe I have made some mistake here.



---

archive/attachments_017788.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_13161-review-sl.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket13161/trac_13161-review-sl.patch",
    "created_at": "2012-08-09T17:09:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13161",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/seblabbe"
}
```



---

archive/issue_comments_187986.json:
```json
{
    "body": "",
    "created_at": "2012-08-09T17:09:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13161#issuecomment-187986",
    "user": "https://github.com/seblabbe"
}
```





---

archive/issue_comments_187987.json:
```json
{
    "body": "<a id='comment:21'></a>\nReplying to [jdemeyer](#comment%3A18):\n> Just for interestingness, couldn't you use an actual word instead of one character?\n> \n> For example, \"int\u00e9r\u00eat\" (French for interest, a word which might plausably appear as label).\n\n\nI just added a patch which applies on top of the previous one and which adds real life example of french word which can occur in axis label and which contain an accent :\n\n- Axes des abscisses (axe des X)\n- Axes des ordonn\u00e9es (axe des Y)\n\nNeeds review!",
    "created_at": "2012-08-09T17:12:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13161#issuecomment-187987",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:21'></a>
Replying to [jdemeyer](#comment%3A18):
> Just for interestingness, couldn't you use an actual word instead of one character?
> 
> For example, "intérêt" (French for interest, a word which might plausably appear as label).


I just added a patch which applies on top of the previous one and which adds real life example of french word which can occur in axis label and which contain an accent :

- Axes des abscisses (axe des X)
- Axes des ordonnées (axe des Y)

Needs review!



---

archive/issue_comments_187988.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -8,4 +8,4 @@\n \n ---\n \n-Apply [attachment:trac_13161.patch].\n+Apply [attachment:trac_13161.patch] and [attachment:trac_13161-review-sl.patch]\n``````\n",
    "created_at": "2012-08-09T18:14:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13161#issuecomment-187988",
    "user": "https://github.com/seblabbe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -8,4 +8,4 @@
 
 ---
 
-Apply [attachment:trac_13161.patch].
+Apply [attachment:trac_13161.patch] and [attachment:trac_13161-review-sl.patch]
``````




---

archive/issue_comments_187989.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2012-08-15T20:25:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13161#issuecomment-187989",
    "user": "https://github.com/jhpalmieri"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_187990.json:
```json
{
    "body": "<a id='comment:23'></a>\nLooks good to me.",
    "created_at": "2012-08-15T20:25:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13161#issuecomment-187990",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:23'></a>
Looks good to me.



---

archive/issue_events_041850.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-23T12:46:55Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13161",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13161#event-41850"
}
```



---

archive/issue_comments_187991.json:
```json
{
    "body": "**Merged:** sage-5.3.rc0",
    "created_at": "2012-08-23T12:46:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13161#issuecomment-187991",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.3.rc0
