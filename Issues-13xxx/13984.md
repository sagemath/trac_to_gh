# Issue 13984: Improve the is_vertex_transitive test

archive/issues_013780.json:
```json
{
    "body": "As it turned out from the discussion in the TRAC ticket 13721, the is_vertex_transitive method can be optimized and simplified substantially. \n\nThis TRAC ticket aims at achieving that. \n\nAssignee: tbd\n\nCC:  azi ncohen\n\nReviewer: Jernej Azarija\n\nAuthor: Nathann Cohen\n\nMerged: sage-5.7.beta2\n\nDependencies: #13721\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/13984\n\n",
    "closed_at": "2013-01-30T07:35:57Z",
    "created_at": "2013-01-22T12:49:20Z",
    "labels": [
        "component: graph theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.7",
    "title": "Improve the is_vertex_transitive test",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13984",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```
As it turned out from the discussion in the TRAC ticket 13721, the is_vertex_transitive method can be optimized and simplified substantially. 

This TRAC ticket aims at achieving that. 

Assignee: tbd

CC:  azi ncohen

Reviewer: Jernej Azarija

Author: Nathann Cohen

Merged: sage-5.7.beta2

Dependencies: #13721

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/13984





---

archive/issue_comments_213281.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2013-01-22T13:11:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13984#issuecomment-213281",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Changing status from new to needs_info.



---

archive/issue_comments_213282.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to graph theory.",
    "created_at": "2013-01-22T13:11:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13984#issuecomment-213282",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Changing component from PLEASE CHANGE to graph theory.



---

archive/issue_comments_213283.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2013-01-22T13:11:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13984#issuecomment-213283",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_213284.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#13721\"",
    "created_at": "2013-01-22T13:48:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13984#issuecomment-213284",
    "user": "https://github.com/nathanncohen"
}
```

Changing dependencies from "" to "#13721"



---

archive/issue_comments_213285.json:
```json
{
    "body": "<a id='comment:3'></a>`partition` an `new_partition` are both partitions of the vertex set, and new_partition is necessarily more refined (i.e. each set of `new_partition` is a subset of some set of `partition`). Hence, they are equal if and only if they have same length !\n\nNathann",
    "created_at": "2013-01-22T13:56:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13984#issuecomment-213285",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:3'></a>`partition` an `new_partition` are both partitions of the vertex set, and new_partition is necessarily more refined (i.e. each set of `new_partition` is a subset of some set of `partition`). Hence, they are equal if and only if they have same length !

Nathann



---

archive/issue_comments_213286.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2013-01-22T13:56:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13984#issuecomment-213286",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_213287.json:
```json
{
    "body": "<a id='comment:4'></a>I can fix the code if someone explain to me what exactly should this partition thing be doing in the first place. I suspect what it wants to verify is if a given partition is a  system of imprimitivity?",
    "created_at": "2013-01-22T15:26:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13984#issuecomment-213287",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

<a id='comment:4'></a>I can fix the code if someone explain to me what exactly should this partition thing be doing in the first place. I suspect what it wants to verify is if a given partition is a  system of imprimitivity?



---

archive/issue_comments_213288.json:
```json
{
    "body": "<a id='comment:5'></a>Helloooooo !!\n\nWell, I just uploaded a code that replaces the block of 4 lines by the equality test. The point is that `partition` is necessarily blocks of imprimitivity of the automorphism group, for this argument says that Sage should only consider automorphisms that respect the partition given (i.e. only those such that an element from a set inside of `partition` stay in the same set). And as `new_partition` is necessarily a refinment of `new_partition`, the two are equal if and only if their lengths are the same.\n\nNathann",
    "created_at": "2013-01-22T17:32:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13984#issuecomment-213288",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:5'></a>Helloooooo !!

Well, I just uploaded a code that replaces the block of 4 lines by the equality test. The point is that `partition` is necessarily blocks of imprimitivity of the automorphism group, for this argument says that Sage should only consider automorphisms that respect the partition given (i.e. only those such that an element from a set inside of `partition` stay in the same set). And as `new_partition` is necessarily a refinment of `new_partition`, the two are equal if and only if their lengths are the same.

Nathann



---

archive/issue_comments_213289.json:
```json
{
    "body": "<a id='comment:6'></a>Indeed, this makes sense! Also could you add a quick regularity check inside? \n\nThe degrees of every  element of the same partition should coincide!",
    "created_at": "2013-01-22T17:36:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13984#issuecomment-213289",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

<a id='comment:6'></a>Indeed, this makes sense! Also could you add a quick regularity check inside? 

The degrees of every  element of the same partition should coincide!



---

archive/issue_comments_213290.json:
```json
{
    "body": "<a id='comment:7'></a>Here it is !\n\nNathann",
    "created_at": "2013-01-22T17:57:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13984#issuecomment-213290",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:7'></a>Here it is !

Nathann



---

archive/issue_comments_213291.json:
```json
{
    "body": "<a id='comment:8'></a>Looks good! \n\nMy only two questions are\n\n1. Can we expect a partition cell to be empty\n2. What happens if we call this thing on the empty graph?",
    "created_at": "2013-01-22T18:28:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13984#issuecomment-213291",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

<a id='comment:8'></a>Looks good! 

My only two questions are

1. Can we expect a partition cell to be empty
2. What happens if we call this thing on the empty graph?



---

archive/issue_comments_213292.json:
```json
{
    "body": "Attachment [trac_13984.patch](tarball://root/attachments/some-uuid/ticket13984/trac_13984.patch) by @nathanncohen created at 2013-01-22 18:33:00",
    "created_at": "2013-01-22T18:33:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13984#issuecomment-213292",
    "user": "https://github.com/nathanncohen"
}
```

Attachment [trac_13984.patch](tarball://root/attachments/some-uuid/ticket13984/trac_13984.patch) by @nathanncohen created at 2013-01-22 18:33:00



---

archive/issue_comments_213293.json:
```json
{
    "body": "<a id='comment:9'></a>Updated !!\n\nNathann",
    "created_at": "2013-01-22T18:34:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13984#issuecomment-213293",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:9'></a>Updated !!

Nathann



---

archive/issue_comments_213294.json:
```json
{
    "body": "<a id='comment:10'></a>The patch looks fine to me. Shall I mark it as positively reviewed?",
    "created_at": "2013-01-22T22:37:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13984#issuecomment-213294",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

<a id='comment:10'></a>The patch looks fine to me. Shall I mark it as positively reviewed?



---

archive/issue_comments_213295.json:
```json
{
    "body": "<a id='comment:11'></a>Yep, you can ! `:-)`\n\nNathann",
    "created_at": "2013-01-23T01:17:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13984#issuecomment-213295",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:11'></a>Yep, you can ! `:-)`

Nathann



---

archive/issue_comments_213296.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Jernej Azarija\"",
    "created_at": "2013-01-23T11:23:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13984#issuecomment-213296",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Changing reviewer from "" to "Jernej Azarija"



---

archive/issue_comments_213297.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-01-23T11:23:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13984#issuecomment-213297",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_213298.json:
```json
{
    "body": "Changing author from \"\" to \"Nathann Cohen\"",
    "created_at": "2013-01-26T09:59:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13984#issuecomment-213298",
    "user": "https://github.com/jdemeyer"
}
```

Changing author from "" to "Nathann Cohen"



---

archive/issue_comments_213299.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-5.7.beta2\"",
    "created_at": "2013-01-30T07:35:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13984#issuecomment-213299",
    "user": "https://github.com/jdemeyer"
}
```

Changing merged from "" to "sage-5.7.beta2"



---

archive/issue_comments_213300.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-01-30T07:35:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13984#issuecomment-213300",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_039293.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-30T07:35:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13984",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13984#event-39293"
}
```



---

archive/issue_comments_213301.json:
```json
{
    "body": "<a id='comment:15'></a>(oh, and by the way I sent an email to Robert Miller, who originally wrote that code, and agreed with the shortcut that this patch implements) `:-)`\n\nNathann",
    "created_at": "2013-02-04T10:32:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13984#issuecomment-213301",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:15'></a>(oh, and by the way I sent an email to Robert Miller, who originally wrote that code, and agreed with the shortcut that this patch implements) `:-)`

Nathann
