# Issue 13426: Improve gap_packages

archive/issues_013254.json:
```json
{
    "body": "We should include more packages into GAP. This ticket adds the following:\n\n* cohomolo\n* CoReLG\n* GBNP\n* hecke\n* liealgdb\n* LiePRing\n* LieRing\n* loops\n* mapclass\n* qpa\n* quagroup\n* repsn\n* sla\n\n[new tarball](https://drive.google.com/open?id=0B_R5aihegKRMT1BvXzdhQkNpN2M)\n\nAssignee: tbd\n\nCC:  @dimpase @miguelmarco @vbraun\n\nKeywords: days85\n\nBranch/Commit: 951e7e7345103ff6836f379131afa1a5aedcd838\n\nReviewer: Dima Pasechnik\n\nAuthor: Travis Scrimshaw\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/13426\n\n",
    "closed_at": "2018-06-06T19:53:36Z",
    "created_at": "2012-09-03T11:48:04Z",
    "labels": [
        "component: packages: optional"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.3",
    "title": "Improve gap_packages",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13426",
    "user": "https://github.com/vbraun"
}
```
We should include more packages into GAP. This ticket adds the following:

* cohomolo
* CoReLG
* GBNP
* hecke
* liealgdb
* LiePRing
* LieRing
* loops
* mapclass
* qpa
* quagroup
* repsn
* sla

[new tarball](https://drive.google.com/open?id=0B_R5aihegKRMT1BvXzdhQkNpN2M)

Assignee: tbd

CC:  @dimpase @miguelmarco @vbraun

Keywords: days85

Branch/Commit: 951e7e7345103ff6836f379131afa1a5aedcd838

Reviewer: Dima Pasechnik

Author: Travis Scrimshaw

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/13426





---

archive/issue_comments_172908.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,9 @@\n+\n+\n # Dima emailed me\n \n I am told that braids package is obsolete. Its functionality is now\n-superseded by another package by the same group of authors.\n+(almost) superseded by another package, mapclass, by the same group of authors.\n \n # Miguel Marco wrote\n \n@@ -12,6 +14,8 @@\n 1. https://docs.google.com/spreadsheet/ccc?key=0AvB7eBQ-W5NGdDN2X1NVQnUyQ24tQ05CQzRlVVh2Rmc \n 2. https://docs.google.com/open?id=0B_B7eBQ-W5NGWUUzQzYxdFRqaXM\n \n+\n+\n Dependencies: #13211\n \n Comment: 1\n``````\n",
    "created_at": "2012-09-03T12:31:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13426#issuecomment-172908",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,9 @@
+
+
 # Dima emailed me
 
 I am told that braids package is obsolete. Its functionality is now
-superseded by another package by the same group of authors.
+(almost) superseded by another package, mapclass, by the same group of authors.
 
 # Miguel Marco wrote
 
@@ -12,6 +14,8 @@
 1. https://docs.google.com/spreadsheet/ccc?key=0AvB7eBQ-W5NGdDN2X1NVQnUyQ24tQ05CQzRlVVh2Rmc 
 2. https://docs.google.com/open?id=0B_B7eBQ-W5NGWUUzQzYxdFRqaXM
 
+
+
 Dependencies: #13211
 
 Comment: 1
``````




---

archive/issue_events_037270.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13426#event-37270"
}
```



---

archive/issue_events_037271.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13426#event-37271"
}
```



---

archive/issue_events_037272.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13426#event-37272"
}
```



---

archive/issue_events_037273.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13426#event-37273"
}
```



---

archive/issue_events_037274.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13426#event-37274"
}
```



---

archive/issue_events_037275.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13426#event-37275"
}
```



---

archive/issue_events_037276.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13426#event-37276"
}
```



---

archive/issue_events_037277.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-03-14T09:48:29Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13426#event-37277"
}
```



---

archive/issue_events_037278.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-03-14T09:48:29Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "milestone": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13426#event-37278"
}
```



---

archive/issue_comments_172909.json:
```json
{
    "body": "<a id='comment:6'></a>See also #22190 and #22244.",
    "created_at": "2017-03-14T09:48:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13426#issuecomment-172909",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:6'></a>See also #22190 and #22244.



---

archive/issue_comments_172910.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,20 @@\n+We should include more packages into GAP. This ticket adds the following:\n \n+* cohomolo\n+* CoReLG\n+* GBNP\n+* hecke\n+* liealgdb\n+* LiePRing\n+* LieRing\n+* loops\n+* mapclass\n+* qpa\n+* quagroup\n+* repsn\n+* sla\n+\n+[new tarball](https://drive.google.com/open?id=0B_R5aihegKRMT1BvXzdhQkNpN2M)\n \n Dependencies: #13211\n \n``````\n",
    "created_at": "2017-03-16T17:24:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13426#issuecomment-172910",
    "user": "https://github.com/tscrim"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,20 @@
+We should include more packages into GAP. This ticket adds the following:
 
+* cohomolo
+* CoReLG
+* GBNP
+* hecke
+* liealgdb
+* LiePRing
+* LieRing
+* loops
+* mapclass
+* qpa
+* quagroup
+* repsn
+* sla
+
+[new tarball](https://drive.google.com/open?id=0B_R5aihegKRMT1BvXzdhQkNpN2M)
 
 Dependencies: #13211
 
``````




---

archive/issue_comments_172911.json:
```json
{
    "body": "<a id='comment:7'></a>New commits:",
    "created_at": "2017-03-16T17:24:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13426#issuecomment-172911",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:7'></a>New commits:



---

archive/issue_comments_172912.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-03-16T17:24:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13426#issuecomment-172912",
    "user": "https://github.com/tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_172913.json:
```json
{
    "body": "Changing keywords from \"\" to \"days85\".",
    "created_at": "2017-03-16T17:25:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13426#issuecomment-172913",
    "user": "https://github.com/tscrim"
}
```

Changing keywords from "" to "days85".



---

archive/issue_comments_172914.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,20 @@\n+We should include more packages into GAP. This ticket adds the following:\n \n+* cohomolo\n+* CoReLG\n+* GBNP\n+* hecke\n+* liealgdb\n+* LiePRing\n+* LieRing\n+* loops\n+* mapclass\n+* qpa\n+* quagroup\n+* repsn\n+* sla\n+\n+[new tarball](https://drive.google.com/open?id=0B_R5aihegKRMT1BvXzdhQkNpN2M)\n \n Dependencies: #13211\n \n``````\n",
    "created_at": "2017-03-16T17:25:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13426#issuecomment-172914",
    "user": "https://github.com/tscrim"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,20 @@
+We should include more packages into GAP. This ticket adds the following:
 
+* cohomolo
+* CoReLG
+* GBNP
+* hecke
+* liealgdb
+* LiePRing
+* LieRing
+* loops
+* mapclass
+* qpa
+* quagroup
+* repsn
+* sla
+
+[new tarball](https://drive.google.com/open?id=0B_R5aihegKRMT1BvXzdhQkNpN2M)
 
 Dependencies: #13211
 
``````




---

archive/issue_comments_172915.json:
```json
{
    "body": "<a id='comment:9'></a>to quote email by Alex K. on a GAP developers list:\n\n```\nIn pull request https://github.com/gap-system/gap/pull/1135\nI have attempted to reduce a list of packages loaded by default to\n\n[ \"autpgrp\", \"ctbllib\", \"factint\", \"fga\", \"irredsol\", \"tomlib\" ],\n\nWith dependencies, this results in the following set of\npackages being loaded at startup:\n\nAtlasRep 1.5.1, AutPGrp 1.6, Browse 1.8.6, CRISP 1.4.4, CTblLib 1.2.2,\nFactInt 1.5.3, FGA 1.3.1, GAPDoc 1.5.1, IO 4.4.6, IRREDSOL 1.3.1,\nSpinSym 1.5, TomLib 1.2.6\n```\nso we should aim to have as many from the latter list as possible.\n(packages that need GAP kernel extensions, like IO, are not possible to support ATM, as this will need changes in libGAP).",
    "created_at": "2017-03-16T18:12:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13426#issuecomment-172915",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:9'></a>to quote email by Alex K. on a GAP developers list:

```
In pull request https://github.com/gap-system/gap/pull/1135
I have attempted to reduce a list of packages loaded by default to

[ "autpgrp", "ctbllib", "factint", "fga", "irredsol", "tomlib" ],

With dependencies, this results in the following set of
packages being loaded at startup:

AtlasRep 1.5.1, AutPGrp 1.6, Browse 1.8.6, CRISP 1.4.4, CTblLib 1.2.2,
FactInt 1.5.3, FGA 1.3.1, GAPDoc 1.5.1, IO 4.4.6, IRREDSOL 1.3.1,
SpinSym 1.5, TomLib 1.2.6
```
so we should aim to have as many from the latter list as possible.
(packages that need GAP kernel extensions, like IO, are not possible to support ATM, as this will need changes in libGAP).



---

archive/issue_comments_172916.json:
```json
{
    "body": "<a id='comment:10'></a>`AtlasRep` is problematic in global installs. Debian has a package for it that does something but I may miss some bits that they put in gap itself. The problem is that `AtlasRep` fetch data from the net and tries to dump it where the package is installed. If you are a regular user and gap is installed in location belonging to root you are in trouble.\n\n`AtlasRep` really need to dump data in `~/.gap`.",
    "created_at": "2017-03-17T09:10:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13426#issuecomment-172916",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:10'></a>`AtlasRep` is problematic in global installs. Debian has a package for it that does something but I may miss some bits that they put in gap itself. The problem is that `AtlasRep` fetch data from the net and tries to dump it where the package is installed. If you are a regular user and gap is installed in location belonging to root you are in trouble.

`AtlasRep` really need to dump data in `~/.gap`.



---

archive/issue_comments_172917.json:
```json
{
    "body": "<a id='comment:11'></a>To note, we already have (some form of) `AtlasRep`, `AutPGrp`, `CTblLib`, `FactInt` included in `gap_packages`.\n\nThe changes to libGAP that will allow IO should be handled in #22626 (or at least be doable afterwards). However, I don't want to hold up the addition of some other packages, a number of which are related to my research (I'm already using `QuaGroup` in #22623). So I'd appreciate it if we could push off making `gap_packages` \"perfect\" to a later ticket.",
    "created_at": "2017-03-17T18:39:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13426#issuecomment-172917",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:11'></a>To note, we already have (some form of) `AtlasRep`, `AutPGrp`, `CTblLib`, `FactInt` included in `gap_packages`.

The changes to libGAP that will allow IO should be handled in #22626 (or at least be doable afterwards). However, I don't want to hold up the addition of some other packages, a number of which are related to my research (I'm already using `QuaGroup` in #22623). So I'd appreciate it if we could push off making `gap_packages` "perfect" to a later ticket.



---

archive/issue_comments_172918.json:
```json
{
    "body": "<a id='comment:12'></a>Let me reformulate that better as a question: What would you want to see included that currently is not?",
    "created_at": "2017-07-13T02:47:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13426#issuecomment-172918",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:12'></a>Let me reformulate that better as a question: What would you want to see included that currently is not?



---

archive/issue_events_037279.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-07-13T02:47:37Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "milestone": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13426#event-37279"
}
```



---

archive/issue_events_037280.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-07-13T02:47:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "milestone": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13426#event-37280"
}
```



---

archive/issue_comments_172919.json:
```json
{
    "body": "<a id='comment:13'></a>I will take a more provocative stance. \n\nYou can install gap packages for personal use or testing in `~/.gap/pkg` and they will be picked up automatically. This may need to be better documented but it means that we only need to care about packages that are difficult to install or require building against a library or executable found under `SAGE_LOCAL`. The rest is just a matter of unpacking a tarball in the right place. It is even easier than installing a R package.",
    "created_at": "2017-07-13T03:10:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13426#issuecomment-172919",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:13'></a>I will take a more provocative stance. 

You can install gap packages for personal use or testing in `~/.gap/pkg` and they will be picked up automatically. This may need to be better documented but it means that we only need to care about packages that are difficult to install or require building against a library or executable found under `SAGE_LOCAL`. The rest is just a matter of unpacking a tarball in the right place. It is even easier than installing a R package.



---

archive/issue_comments_172920.json:
```json
{
    "body": "<a id='comment:14'></a>If I understand you correctly, you want to restrict `gap_packages` to be just those packages and are \"difficult,\" and let the \"easy\" packages be left to the individual user. I have no philosophical objections to this, but there are a few technical things that need to be addressed. (Documentation will, of course, depend on precisely what we do).\n\nHow do we want to treat the GAP packages wrt doctesting? Will they be treated as optional (i.e., automatically tested against if installed), experimental, or something else? #22623 might be a good test case (I need to add more doctests anyways).\n\nDo we want a hook as part of `sage -i` or some other optional `sage` argument to help ease installation? Or will the \"official\" way to install a GAP package is to manually extract the tarball that a user downloads?\n\nWhat will we do about the packages that are previously installed by `gap_packages` that would no longer be the case? I know this will not affect people with them currently installed, but imagine someone builds a new version from scratch (or after a `make distclean`). Then suddenly a particular optional GAP package does not work. So it becomes backwards incompatible in a way (unless we have Sage automatically download it when trying to call said package, but there might be a legal issue here too).",
    "created_at": "2017-07-13T03:31:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13426#issuecomment-172920",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:14'></a>If I understand you correctly, you want to restrict `gap_packages` to be just those packages and are "difficult," and let the "easy" packages be left to the individual user. I have no philosophical objections to this, but there are a few technical things that need to be addressed. (Documentation will, of course, depend on precisely what we do).

How do we want to treat the GAP packages wrt doctesting? Will they be treated as optional (i.e., automatically tested against if installed), experimental, or something else? #22623 might be a good test case (I need to add more doctests anyways).

Do we want a hook as part of `sage -i` or some other optional `sage` argument to help ease installation? Or will the "official" way to install a GAP package is to manually extract the tarball that a user downloads?

What will we do about the packages that are previously installed by `gap_packages` that would no longer be the case? I know this will not affect people with them currently installed, but imagine someone builds a new version from scratch (or after a `make distclean`). Then suddenly a particular optional GAP package does not work. So it becomes backwards incompatible in a way (unless we have Sage automatically download it when trying to call said package, but there might be a legal issue here too).



---

archive/issue_comments_172921.json:
```json
{
    "body": "<a id='comment:15'></a>Note that I preceded my comment with the word \"provocative\" (instant success). More seriously:\n\n* there is a small list of package we may want to provide by default, we sort of already do. It is impossible to start gap without the gapdoc package being available for example.\n* if a gap package is essential for some sage functionality we should ship it as standard.\n* The spkg we currently have for gap packages and database are for convenience and are already optional. A ticket like this one wants to basically extend the convenience. Mainly in my opinion because people do not know how to install gap packages on their own. Gap upstream is not particularly verbose on that matter. They ship all the packages to you after all.\n\nDocumentation alone won't make the issue go away. Raising awareness of what you can do may achieve something. The mechanism to install R packages is well know. While debian seems to want to package CRAN we don't. People using R know what to do when they need a R packages. Gap users don't and I think that's the point that really need to be addressed.",
    "created_at": "2017-07-13T03:47:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13426#issuecomment-172921",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:15'></a>Note that I preceded my comment with the word "provocative" (instant success). More seriously:

* there is a small list of package we may want to provide by default, we sort of already do. It is impossible to start gap without the gapdoc package being available for example.
* if a gap package is essential for some sage functionality we should ship it as standard.
* The spkg we currently have for gap packages and database are for convenience and are already optional. A ticket like this one wants to basically extend the convenience. Mainly in my opinion because people do not know how to install gap packages on their own. Gap upstream is not particularly verbose on that matter. They ship all the packages to you after all.

Documentation alone won't make the issue go away. Raising awareness of what you can do may achieve something. The mechanism to install R packages is well know. While debian seems to want to package CRAN we don't. People using R know what to do when they need a R packages. Gap users don't and I think that's the point that really need to be addressed.



---

archive/issue_comments_172922.json:
```json
{
    "body": "<a id='comment:16'></a>The bigger thing for me right now is `QuaGroup`. I got an e-mail where I could point towards #22623, but had some issues with telling them how to get the `QuaGroup` in a robust way.\n\nI agree completely with points 1 and 2. For point 3, I feel that `gap_packages` is the closest thing that Sage has to an \"official\" way to install optional GAP pacakges because I think Sage tells users \" you do not have to know anything about the underlying pacakges\". So this would be a change to the official way, but I think in a good way.\n\nSome other technical questions:\n\n- What if we want a GAP package to only be for one version of Sage, what should the official way to install it (do we even care)?\n- On my system, I do not have a `~/.gap` folder (of course, I can create one), but I do not have a non-Sage copy of GAP. Do we want this in `~/.gap` or some subfolder of `~/.sage` (in particular, `~/.sage/gap`)? At least, I don't think your proposal will work because:\n  {{{\nsage: gap.console()\ngap> Print( GAPInfo.RootPaths, \"\\n\"); \n[ \"/home/travis/sage-build/local/gap/latest/\" ]\n  }}}\n- How do we get users to run `gap_reset_workspace()` (IIRC it is necessary)?",
    "created_at": "2017-07-13T04:12:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13426#issuecomment-172922",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:16'></a>The bigger thing for me right now is `QuaGroup`. I got an e-mail where I could point towards #22623, but had some issues with telling them how to get the `QuaGroup` in a robust way.

I agree completely with points 1 and 2. For point 3, I feel that `gap_packages` is the closest thing that Sage has to an "official" way to install optional GAP pacakges because I think Sage tells users " you do not have to know anything about the underlying pacakges". So this would be a change to the official way, but I think in a good way.

Some other technical questions:

- What if we want a GAP package to only be for one version of Sage, what should the official way to install it (do we even care)?
- On my system, I do not have a `~/.gap` folder (of course, I can create one), but I do not have a non-Sage copy of GAP. Do we want this in `~/.gap` or some subfolder of `~/.sage` (in particular, `~/.sage/gap`)? At least, I don't think your proposal will work because:
  {{{
sage: gap.console()
gap> Print( GAPInfo.RootPaths, "\n"); 
[ "/home/travis/sage-build/local/gap/latest/" ]
  }}}
- How do we get users to run `gap_reset_workspace()` (IIRC it is necessary)?



---

archive/issue_comments_172923.json:
```json
{
    "body": "<a id='comment:17'></a>Replying to [comment:16 tscrim]:\n> The bigger thing for me right now is `QuaGroup`. I got an e-mail where I could point towards #22623, but had some issues with telling them how to get the `QuaGroup` in a robust way.\n> \n> I agree completely with points 1 and 2. For point 3, I feel that `gap_packages` is the closest thing that Sage has to an \"official\" way to install optional GAP pacakges because I think Sage tells users \" you do not have to know anything about the underlying pacakges\". So this would be a change to the official way, but I think in a good way.\n> \n> Some other technical questions:\n> \n> - What if we want a GAP package to only be for one version of Sage, what should the official way to install it (do we even care)?\n\n\nI am not sure we can enforce that. At the very least the version of gap associated with that version of sage would need to be unique.\n\n> - On my system, I do not have a `~/.gap` folder (of course, I can create one), but I do not have a non-Sage copy of GAP. Do we want this in `~/.gap` or some subfolder of `~/.sage` (in particular, `~/.sage/gap`)? At least, I don't think your proposal will work because:\n>   {{{\n> sage: gap.console()\n> gap> Print( GAPInfo.RootPaths, \"\\n\"); \n> [ \"/home/travis/sage-build/local/gap/latest/\" ]\n>   }}}\n\n\nAfter inspection, it seems to be related to how gap is started from sage. That will need to be inspected.\n\n```\nfbissey@moonloop ~/sandbox/git-fork/sage $ ./sage -sh\n\nStarting subshell with Sage environment variables set.  Don't forget\nto exit when you are done.  Beware:\n * Do not do anything with other copies of Sage on your system.\n * Do not use this for installing Sage packages using \"sage -i\" or for\n   running \"make\" at Sage's root directory.  These should be done\n   outside the Sage shell.\n\nBypassing shell configuration files...\n\nNote: SAGE_ROOT=/home/fbissey/sandbox/git-fork/sage\n(sage-sh) fbissey@moonloop:sage$ gap\n \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   GAP 4.8.6, 12-Nov-2016, build of 2017-07-06 10:42:48 (NZST)\n \u2502  GAP  \u2502   http://www.gap-system.org\n \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   Architecture: x86_64-pc-linux-gnu-gcc-default64\n Libs used:  gmp, readline\n Loading the library and packages ...\n Packages:   GAPDoc 1.5.1\n Try '??help' for help. See also '?copyright', '?cite' and '?authors'\ngap> Print( GAPInfo.RootPaths, \"\\n\");\n[ \"/home/fbissey/.gap/\", \"/home/fbissey/sandbox/git-fork/sage/local/gap/latest/\" ]\n```\n\nRelated to your previous question, RootPaths can be customised (and obviously it is done in sage already), so you could imagine adding a unique location for that version of sage.\n\n> - How do we get users to run `gap_reset_workspace()` (IIRC it is necessary)?\n\n\nI am aware of that problem and I am not sure. I wonder if upstream sees this as a problem or if it is particular to the way sage interface with gap.",
    "created_at": "2017-07-13T05:11:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13426#issuecomment-172923",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:17'></a>Replying to [comment:16 tscrim]:
> The bigger thing for me right now is `QuaGroup`. I got an e-mail where I could point towards #22623, but had some issues with telling them how to get the `QuaGroup` in a robust way.
> 
> I agree completely with points 1 and 2. For point 3, I feel that `gap_packages` is the closest thing that Sage has to an "official" way to install optional GAP pacakges because I think Sage tells users " you do not have to know anything about the underlying pacakges". So this would be a change to the official way, but I think in a good way.
> 
> Some other technical questions:
> 
> - What if we want a GAP package to only be for one version of Sage, what should the official way to install it (do we even care)?


I am not sure we can enforce that. At the very least the version of gap associated with that version of sage would need to be unique.

> - On my system, I do not have a `~/.gap` folder (of course, I can create one), but I do not have a non-Sage copy of GAP. Do we want this in `~/.gap` or some subfolder of `~/.sage` (in particular, `~/.sage/gap`)? At least, I don't think your proposal will work because:
>   {{{
> sage: gap.console()
> gap> Print( GAPInfo.RootPaths, "\n"); 
> [ "/home/travis/sage-build/local/gap/latest/" ]
>   }}}


After inspection, it seems to be related to how gap is started from sage. That will need to be inspected.

```
fbissey@moonloop ~/sandbox/git-fork/sage $ ./sage -sh

Starting subshell with Sage environment variables set.  Don't forget
to exit when you are done.  Beware:
 * Do not do anything with other copies of Sage on your system.
 * Do not use this for installing Sage packages using "sage -i" or for
   running "make" at Sage's root directory.  These should be done
   outside the Sage shell.

Bypassing shell configuration files...

Note: SAGE_ROOT=/home/fbissey/sandbox/git-fork/sage
(sage-sh) fbissey@moonloop:sage$ gap
 ┌───────┐   GAP 4.8.6, 12-Nov-2016, build of 2017-07-06 10:42:48 (NZST)
 │  GAP  │   http://www.gap-system.org
 └───────┘   Architecture: x86_64-pc-linux-gnu-gcc-default64
 Libs used:  gmp, readline
 Loading the library and packages ...
 Packages:   GAPDoc 1.5.1
 Try '??help' for help. See also '?copyright', '?cite' and '?authors'
gap> Print( GAPInfo.RootPaths, "\n");
[ "/home/fbissey/.gap/", "/home/fbissey/sandbox/git-fork/sage/local/gap/latest/" ]
```

Related to your previous question, RootPaths can be customised (and obviously it is done in sage already), so you could imagine adding a unique location for that version of sage.

> - How do we get users to run `gap_reset_workspace()` (IIRC it is necessary)?


I am aware of that problem and I am not sure. I wonder if upstream sees this as a problem or if it is particular to the way sage interface with gap.



---

archive/issue_comments_172924.json:
```json
{
    "body": "<a id='comment:18'></a>Replying to [comment:17 fbissey]:\n> Replying to [comment:16 tscrim]:\n> > - What if we want a GAP package to only be for one version of Sage, what should the official way to install it (do we even care)?\n \n> \n> I am not sure we can enforce that. At the very least the version of gap associated with that version of sage would need to be unique.\n\n\nI guess we already have this sort of problem with multiple Sage versions and `init.sage` being in `~/.sage`. So putting something in `~/.sage` would not exacerbate the problem.\n\n> > - On my system, I do not have a `~/.gap` folder (of course, I can create one), but I do not have a non-Sage copy of GAP. Do we want this in `~/.gap` or some subfolder of `~/.sage` (in particular, `~/.sage/gap`)? At least, I don't think your proposal will work because:\n> >   {{{\n> > sage: gap.console()\n> > gap> Print( GAPInfo.RootPaths, \"\\n\"); \n> > [ \"/home/travis/sage-build/local/gap/latest/\" ]\n> >   }}}\n\n> \n> After inspection, it seems to be related to how gap is started from sage. That will need to be inspected.\n> \n> ```\n> fbissey@moonloop ~/sandbox/git-fork/sage $ ./sage -sh\n> [snip]\n> gap> Print( GAPInfo.RootPaths, \"\\n\");\n> [ \"/home/fbissey/.gap/\", \"/home/fbissey/sandbox/git-fork/sage/local/gap/latest/\" ]\n> ```\n\n\nDoing this, I get:\n\n```\ngap> Print( GAPInfo.RootPaths, \"\\n\");\n[ \"/home/travis/.gap/\", \"/home/travis/sage-build/local/gap/latest/\" ]\n```\nHowever, via `gap.console()` might be considered a special way of starting gap, but it is something I think we will need to address because\n\n```\nsage: %gap\n\n  --> Switching to Gap <--\n\ngap: Print( GAPInfo.RootPaths, \"\\n\");\n[ \"/home/travis/sage-build/local/gap/latest/\" ]\n\nsage: gap('GAPInfo.RootPaths')\n[ \"/home/travis/sage-build/local/gap/latest/\" ]\n```\nSo within Sage calls to gap, it seems to use that version.\n\n> Related to your previous question, RootPaths can be customised (and obviously it is done in sage already), so you could imagine adding a unique location for that version of sage.\n\n\nI propose `~/.sage/gap`.\n\nI'm guessing anything installed as proposed would also be available via libgap. At least via `gap_packages` in #22623 I was able to make calls via libgap. (Granted, I think this will be made moot when we go to the next gap version).\n\n> > - How do we get users to run `gap_reset_workspace()` (IIRC it is necessary)?\n \n> \n> I am aware of that problem and I am not sure. I wonder if upstream sees this as a problem or if it is particular to the way sage interface with gap.\n\n\nI have no idea. At least if we had some way to install this using something like `sage -i`, we could run it as part of our installation process.",
    "created_at": "2017-07-13T05:22:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13426#issuecomment-172924",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:18'></a>Replying to [comment:17 fbissey]:
> Replying to [comment:16 tscrim]:
> > - What if we want a GAP package to only be for one version of Sage, what should the official way to install it (do we even care)?
 
> 
> I am not sure we can enforce that. At the very least the version of gap associated with that version of sage would need to be unique.


I guess we already have this sort of problem with multiple Sage versions and `init.sage` being in `~/.sage`. So putting something in `~/.sage` would not exacerbate the problem.

> > - On my system, I do not have a `~/.gap` folder (of course, I can create one), but I do not have a non-Sage copy of GAP. Do we want this in `~/.gap` or some subfolder of `~/.sage` (in particular, `~/.sage/gap`)? At least, I don't think your proposal will work because:
> >   {{{
> > sage: gap.console()
> > gap> Print( GAPInfo.RootPaths, "\n"); 
> > [ "/home/travis/sage-build/local/gap/latest/" ]
> >   }}}

> 
> After inspection, it seems to be related to how gap is started from sage. That will need to be inspected.
> 
> ```
> fbissey@moonloop ~/sandbox/git-fork/sage $ ./sage -sh
> [snip]
> gap> Print( GAPInfo.RootPaths, "\n");
> [ "/home/fbissey/.gap/", "/home/fbissey/sandbox/git-fork/sage/local/gap/latest/" ]
> ```


Doing this, I get:

```
gap> Print( GAPInfo.RootPaths, "\n");
[ "/home/travis/.gap/", "/home/travis/sage-build/local/gap/latest/" ]
```
However, via `gap.console()` might be considered a special way of starting gap, but it is something I think we will need to address because

```
sage: %gap

  --> Switching to Gap <--

gap: Print( GAPInfo.RootPaths, "\n");
[ "/home/travis/sage-build/local/gap/latest/" ]

sage: gap('GAPInfo.RootPaths')
[ "/home/travis/sage-build/local/gap/latest/" ]
```
So within Sage calls to gap, it seems to use that version.

> Related to your previous question, RootPaths can be customised (and obviously it is done in sage already), so you could imagine adding a unique location for that version of sage.


I propose `~/.sage/gap`.

I'm guessing anything installed as proposed would also be available via libgap. At least via `gap_packages` in #22623 I was able to make calls via libgap. (Granted, I think this will be made moot when we go to the next gap version).

> > - How do we get users to run `gap_reset_workspace()` (IIRC it is necessary)?
 
> 
> I am aware of that problem and I am not sure. I wonder if upstream sees this as a problem or if it is particular to the way sage interface with gap.


I have no idea. At least if we had some way to install this using something like `sage -i`, we could run it as part of our installation process.



---

archive/issue_comments_172925.json:
```json
{
    "body": "<a id='comment:19'></a>Replying to [comment:18 tscrim]:\n> Replying to [comment:17 fbissey]:\n> > Replying to [comment:16 tscrim]:\n> > > - What if we want a GAP package to only be for one version of Sage, what should the official way to install it (do we even care)?\n \n> > \n> > I am not sure we can enforce that. At the very least the version of gap associated with that version of sage would need to be unique.\n\n> \n> I guess we already have this sort of problem with multiple Sage versions and `init.sage` being in `~/.sage`. So putting something in `~/.sage` would not exacerbate the problem.\n\n\nI may have misunderstood you. You meant a gap package only available to sage, while with your wording I understood sage-X.Y. Is it correct?\n\nSo far I haven't been able to dig where sage fiddle with the gap RootPaths.",
    "created_at": "2017-07-13T05:30:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13426#issuecomment-172925",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:19'></a>Replying to [comment:18 tscrim]:
> Replying to [comment:17 fbissey]:
> > Replying to [comment:16 tscrim]:
> > > - What if we want a GAP package to only be for one version of Sage, what should the official way to install it (do we even care)?
 
> > 
> > I am not sure we can enforce that. At the very least the version of gap associated with that version of sage would need to be unique.

> 
> I guess we already have this sort of problem with multiple Sage versions and `init.sage` being in `~/.sage`. So putting something in `~/.sage` would not exacerbate the problem.


I may have misunderstood you. You meant a gap package only available to sage, while with your wording I understood sage-X.Y. Is it correct?

So far I haven't been able to dig where sage fiddle with the gap RootPaths.



---

archive/issue_comments_172926.json:
```json
{
    "body": "<a id='comment:20'></a>Replying to [comment:19 fbissey]:\n> Replying to [comment:18 tscrim]:\n> > Replying to [comment:17 fbissey]:\n> > > Replying to [comment:16 tscrim]:\n> > > > - What if we want a GAP package to only be for one version of Sage, what should the official way to install it (do we even care)?\n \n> > > \n> > > I am not sure we can enforce that. At the very least the version of gap associated with that version of sage would need to be unique.\n\n> > \n> > I guess we already have this sort of problem with multiple Sage versions and `init.sage` being in `~/.sage`. So putting something in `~/.sage` would not exacerbate the problem.\n\n> \n> I may have misunderstood you. You meant a gap package only available to sage, while with your wording I understood sage-X.Y. Is it correct?\n\n\nLet me try to be more precise. Suppose I have two versions of sage, X and Y. I want to be able to install gap packages only available to X but not to Y.\n\nActually, thinking about this more, I don't think this would be a problem as if a gap package doesn't work with a particular version of gap, then it will fail normally. Plus there are probably better ways to compare two versions of a package. So I don't think this is really necessary.",
    "created_at": "2017-07-13T06:40:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13426#issuecomment-172926",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:20'></a>Replying to [comment:19 fbissey]:
> Replying to [comment:18 tscrim]:
> > Replying to [comment:17 fbissey]:
> > > Replying to [comment:16 tscrim]:
> > > > - What if we want a GAP package to only be for one version of Sage, what should the official way to install it (do we even care)?
 
> > > 
> > > I am not sure we can enforce that. At the very least the version of gap associated with that version of sage would need to be unique.

> > 
> > I guess we already have this sort of problem with multiple Sage versions and `init.sage` being in `~/.sage`. So putting something in `~/.sage` would not exacerbate the problem.

> 
> I may have misunderstood you. You meant a gap package only available to sage, while with your wording I understood sage-X.Y. Is it correct?


Let me try to be more precise. Suppose I have two versions of sage, X and Y. I want to be able to install gap packages only available to X but not to Y.

Actually, thinking about this more, I don't think this would be a problem as if a gap package doesn't work with a particular version of gap, then it will fail normally. Plus there are probably better ways to compare two versions of a package. So I don't think this is really necessary.



---

archive/issue_comments_172927.json:
```json
{
    "body": "<a id='comment:21'></a>A clean way to resolve this seems to be to pass the token upstream: ask them for a variant of `gap -i` facility to install GAPs packages.\n\nI have opened up an issue [#1499](https://github.com/gap-system/gap/issues/1499) on GAP's github repo.",
    "created_at": "2017-07-13T06:55:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13426#issuecomment-172927",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:21'></a>A clean way to resolve this seems to be to pass the token upstream: ask them for a variant of `gap -i` facility to install GAPs packages.

I have opened up an issue [#1499](https://github.com/gap-system/gap/issues/1499) on GAP's github repo.



---

archive/issue_comments_172928.json:
```json
{
    "body": "<a id='comment:22'></a>Replying to [comment:18 tscrim]:\n> At least if we had some way to install this using something like `sage -i`, we could run it as part of our installation process.\n\n\n-1 to use `sage -i` to install packages in `~/.sage/gap` or some variant of that. I believe that there should be a clear difference between installing packages inside Sage itself and inside some user directory.",
    "created_at": "2017-07-13T08:12:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13426#issuecomment-172928",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:22'></a>Replying to [comment:18 tscrim]:
> At least if we had some way to install this using something like `sage -i`, we could run it as part of our installation process.


-1 to use `sage -i` to install packages in `~/.sage/gap` or some variant of that. I believe that there should be a clear difference between installing packages inside Sage itself and inside some user directory.



---

archive/issue_comments_172929.json:
```json
{
    "body": "<a id='comment:23'></a>OK after some rather intricate tracking I found why `RootPaths` is different in sage from outside sage: https://github.com/sagemath/sage/blob/master/src/sage/interfaces/gap.py#L200\n\nThe \"-r\" parameter passed to `gap` has the effect to make it ignore any `.gaprc` file and set `IgnoreGapRC`. But a side effect is that if `IgnoreGapRC` is set \n\n```\nsrc/system.c:        if (!IgnoreGapRC) {\nsrc/system.c-          SySetGapRootPath(DotGapPath);\nsrc/system.c-        }\n```\n`.gap` is not added to `RootPaths`.",
    "created_at": "2017-07-13T08:25:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13426#issuecomment-172929",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:23'></a>OK after some rather intricate tracking I found why `RootPaths` is different in sage from outside sage: https://github.com/sagemath/sage/blob/master/src/sage/interfaces/gap.py#L200

The "-r" parameter passed to `gap` has the effect to make it ignore any `.gaprc` file and set `IgnoreGapRC`. But a side effect is that if `IgnoreGapRC` is set 

```
src/system.c:        if (!IgnoreGapRC) {
src/system.c-          SySetGapRootPath(DotGapPath);
src/system.c-        }
```
`.gap` is not added to `RootPaths`.



---

archive/issue_comments_172930.json:
```json
{
    "body": "<a id='comment:24'></a>What we would be doing is setting a custom place for the Sage version of gap packages, and and so we would need a custom root path passed in via `gap -l <path>`.\n\n`@`jdemeyer I somewhat see this as installing a Sage package, just within the gap part of Sage. However, I am not really convinced of the feasibility of `sage -i` as we would need all of the metadata for the gap packages and mirrors and other stuff that (IMO) is not really worth dealing with. I can deal with installing it in a specific folder (or making that the official installation method). Yet I see `~/.sage` as being something (mildly) hidden, and so we shouldn't need to tell users to go into there. IDK. What would be your preference?\n\nUpstream does seem amenable to having `gap -i`, but not enough people with the time and/or skill to properly implement it. Also, we would want to have gap install it to a specified place, which would not be where gap is installed for Sage as they would get removed on upgrade. I would like to have something more workable in the near future.",
    "created_at": "2017-07-18T12:09:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13426#issuecomment-172930",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:24'></a>What we would be doing is setting a custom place for the Sage version of gap packages, and and so we would need a custom root path passed in via `gap -l <path>`.

`@`jdemeyer I somewhat see this as installing a Sage package, just within the gap part of Sage. However, I am not really convinced of the feasibility of `sage -i` as we would need all of the metadata for the gap packages and mirrors and other stuff that (IMO) is not really worth dealing with. I can deal with installing it in a specific folder (or making that the official installation method). Yet I see `~/.sage` as being something (mildly) hidden, and so we shouldn't need to tell users to go into there. IDK. What would be your preference?

Upstream does seem amenable to having `gap -i`, but not enough people with the time and/or skill to properly implement it. Also, we would want to have gap install it to a specified place, which would not be where gap is installed for Sage as they would get removed on upgrade. I would like to have something more workable in the near future.



---

archive/issue_comments_172931.json:
```json
{
    "body": "<a id='comment:25'></a>Replying to [comment:24 tscrim]:\n> What would be your preference?\n\n\nWhat's wrong with keeping the current `$SAGE_LOCAL/gap/latest`? We install every Sage package in `$SAGE_LOCAL`, why would GAP packages be an exception?",
    "created_at": "2017-07-18T12:18:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13426#issuecomment-172931",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:25'></a>Replying to [comment:24 tscrim]:
> What would be your preference?


What's wrong with keeping the current `$SAGE_LOCAL/gap/latest`? We install every Sage package in `$SAGE_LOCAL`, why would GAP packages be an exception?



---

archive/issue_comments_172932.json:
```json
{
    "body": "<a id='comment:26'></a>Replying to [comment:25 jdemeyer]:\n> Replying to [comment:24 tscrim]:\n> > What would be your preference?\n\n> \n> What's wrong with keeping the current `$SAGE_LOCAL/gap/latest`? We install every Sage package in `$SAGE_LOCAL`, why would GAP packages be an exception?\n\n\nNote that `pip --user` would install Python modules somewhere else.",
    "created_at": "2017-07-18T12:34:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13426#issuecomment-172932",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:26'></a>Replying to [comment:25 jdemeyer]:
> Replying to [comment:24 tscrim]:
> > What would be your preference?

> 
> What's wrong with keeping the current `$SAGE_LOCAL/gap/latest`? We install every Sage package in `$SAGE_LOCAL`, why would GAP packages be an exception?


Note that `pip --user` would install Python modules somewhere else.



---

archive/issue_comments_172933.json:
```json
{
    "body": "<a id='comment:27'></a>Replying to [comment:24 tscrim]:\n\n> Upstream does seem amenable to having `gap -i`, but not enough people with the time and/or skill to properly implement it. Also, we would want to have gap install it to a specified place, which would not be where gap is installed for Sage as they would get removed on upgrade. I would like to have something more workable in the near future.\n\n\nI'm going to work on `gap -i`; it appears to align well with the current ODK grant goals.",
    "created_at": "2017-07-18T12:39:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13426#issuecomment-172933",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:27'></a>Replying to [comment:24 tscrim]:

> Upstream does seem amenable to having `gap -i`, but not enough people with the time and/or skill to properly implement it. Also, we would want to have gap install it to a specified place, which would not be where gap is installed for Sage as they would get removed on upgrade. I would like to have something more workable in the near future.


I'm going to work on `gap -i`; it appears to align well with the current ODK grant goals.



---

archive/issue_comments_172934.json:
```json
{
    "body": "<a id='comment:28'></a>Replying to [comment:25 jdemeyer]:\n> Replying to [comment:24 tscrim]:\n> > What would be your preference?\n\n> \n> What's wrong with keeping the current `$SAGE_LOCAL/gap/latest`? We install every Sage package in `$SAGE_LOCAL`, why would GAP packages be an exception?\n\n\nThe problem as I understand it is that `$SAGE_LOCAL/gap/latest` is just a symlink and changes on each upgrade. So suppose you install a package `P` in `gap-X`, then you upgrade (in the process of upgrading Sage) to `gap-Y`. Then `$SAGE_LOCAL/gap/latest` points to `gap-Y`, which does not contain `P`, and your code that uses the package suddenly doesn't work. With the current `gap_packages`, this is not a problem because our current framework automatically updates that as well. Or am I misunderstanding something?\n\nHowever, I was asking about your preference for how to tell users to install optional gap packages? I guess your proposal it to tell them untar in `$SAGE_LOCAL/gap/latest` and make that the official way (rather than on a mostly hidden sage wiki page).",
    "created_at": "2017-07-18T13:03:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13426#issuecomment-172934",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:28'></a>Replying to [comment:25 jdemeyer]:
> Replying to [comment:24 tscrim]:
> > What would be your preference?

> 
> What's wrong with keeping the current `$SAGE_LOCAL/gap/latest`? We install every Sage package in `$SAGE_LOCAL`, why would GAP packages be an exception?


The problem as I understand it is that `$SAGE_LOCAL/gap/latest` is just a symlink and changes on each upgrade. So suppose you install a package `P` in `gap-X`, then you upgrade (in the process of upgrading Sage) to `gap-Y`. Then `$SAGE_LOCAL/gap/latest` points to `gap-Y`, which does not contain `P`, and your code that uses the package suddenly doesn't work. With the current `gap_packages`, this is not a problem because our current framework automatically updates that as well. Or am I misunderstanding something?

However, I was asking about your preference for how to tell users to install optional gap packages? I guess your proposal it to tell them untar in `$SAGE_LOCAL/gap/latest` and make that the official way (rather than on a mostly hidden sage wiki page).



---

archive/issue_comments_172935.json:
```json
{
    "body": "<a id='comment:29'></a>Replying to [comment:27 dimpase]:\n> Replying to [comment:24 tscrim]:\n> \n> > Upstream does seem amenable to having `gap -i`, but not enough people with the time and/or skill to properly implement it. Also, we would want to have gap install it to a specified place, which would not be where gap is installed for Sage as they would get removed on upgrade. I would like to have something more workable in the near future.\n\n> \n> I'm going to work on `gap -i`; it appears to align well with the current ODK grant goals.\n\n\nGreat. I would offer to help, but I have neither the time nor expertise to contribute much. However, let me know if there is anything I can do. I guess if that is in the works, then we can simply tell users to install in a specific place until that method is realized as a workaround.",
    "created_at": "2017-07-18T13:05:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13426#issuecomment-172935",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:29'></a>Replying to [comment:27 dimpase]:
> Replying to [comment:24 tscrim]:
> 
> > Upstream does seem amenable to having `gap -i`, but not enough people with the time and/or skill to properly implement it. Also, we would want to have gap install it to a specified place, which would not be where gap is installed for Sage as they would get removed on upgrade. I would like to have something more workable in the near future.

> 
> I'm going to work on `gap -i`; it appears to align well with the current ODK grant goals.


Great. I would offer to help, but I have neither the time nor expertise to contribute much. However, let me know if there is anything I can do. I guess if that is in the works, then we can simply tell users to install in a specific place until that method is realized as a workaround.



---

archive/issue_comments_172936.json:
```json
{
    "body": "<a id='comment:30'></a>What is the status of this ticket? It appears to work, and I'd like to have qpa easily accessible. Can I have some cake?",
    "created_at": "2018-04-28T10:54:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13426#issuecomment-172936",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:30'></a>What is the status of this ticket? It appears to work, and I'd like to have qpa easily accessible. Can I have some cake?



---

archive/issue_comments_172937.json:
```json
{
    "body": "<a id='comment:31'></a>So these added packages don't do any GAP kernel modules, right?\nJust checking---otherwise it looks good.",
    "created_at": "2018-04-30T16:30:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13426#issuecomment-172937",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:31'></a>So these added packages don't do any GAP kernel modules, right?
Just checking---otherwise it looks good.



---

archive/issue_events_037281.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2018-04-30T16:30:41Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "milestone": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13426#event-37281"
}
```



---

archive/issue_events_037282.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2018-04-30T16:30:41Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "milestone": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13426#event-37282"
}
```



---

archive/issue_comments_172938.json:
```json
{
    "body": "<a id='comment:32'></a>I believe so. The only thing that needs to be compiled is cohomolo (https://www.gap-system.org/Packages/cohomolo.html), but that is because of some extra C bindings IIRC.",
    "created_at": "2018-04-30T22:53:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13426#issuecomment-172938",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:32'></a>I believe so. The only thing that needs to be compiled is cohomolo (https://www.gap-system.org/Packages/cohomolo.html), but that is because of some extra C bindings IIRC.



---

archive/issue_comments_172939.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-04-30T22:56:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13426#issuecomment-172939",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_172940.json:
```json
{
    "body": "<a id='comment:33'></a>OK, send it to the bots then. I hope they can get the tar file.",
    "created_at": "2018-04-30T22:56:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13426#issuecomment-172940",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:33'></a>OK, send it to the bots then. I hope they can get the tar file.



---

archive/issue_comments_172941.json:
```json
{
    "body": "<a id='comment:34'></a>Volker, is there a reason why this ticket did not get merged in the past beta?",
    "created_at": "2018-05-28T04:53:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13426#issuecomment-172941",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:34'></a>Volker, is there a reason why this ticket did not get merged in the past beta?



---

archive/issue_comments_172942.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-06-06T19:53:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13426#issuecomment-172942",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_037283.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-06-06T19:53:36Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13426",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13426#event-37283"
}
```
