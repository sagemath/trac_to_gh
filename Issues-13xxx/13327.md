# Issue 13327: Allow conversion of strings to iterated polynomial rings

archive/issues_013155.json:
```json
{
    "body": "Assignee: @malb\n\nIt is possible to convert strings and symbolic expressions to iterated polynomial rings in a single variable, but not many if the string contains names of coefficients:\n\n```\nsage: Rs = QQ[\"a\"][\"b\"]\nsage: Rs(\"a*b\")\na*b\nsage: Rm = QQ[\"a\"][\"b, c\"]\nsage: Rm(\"a*b\")\nTraceback (most recent call last):\n...\nTypeError: unable to convert string\n```\n\nThe patch introduces `gens_dict_recursive` method and uses it instead of `gens_dict` in the conversion code:\n\n```\nsage: Rs = QQ[\"a\"][\"b\"]\nsage: Rs(\"a*b\")\na*b\nsage: Rm = QQ[\"a\"][\"b, c\"]\nsage: Rm(\"a*b\")\na*b\nsage: Rm.gens_dict_recursive()\n{'a': a, 'c': c, 'b': b}\n```\n\nIssue created by migration from https://trac.sagemath.org/ticket/13327\n\n",
    "closed_at": "2012-09-06T05:24:23Z",
    "created_at": "2012-08-02T20:32:07Z",
    "labels": [
        "component: commutative algebra",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.4",
    "title": "Allow conversion of strings to iterated polynomial rings",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13327",
    "user": "https://github.com/novoselt"
}
```
Assignee: @malb

It is possible to convert strings and symbolic expressions to iterated polynomial rings in a single variable, but not many if the string contains names of coefficients:

```
sage: Rs = QQ["a"]["b"]
sage: Rs("a*b")
a*b
sage: Rm = QQ["a"]["b, c"]
sage: Rm("a*b")
Traceback (most recent call last):
...
TypeError: unable to convert string
```

The patch introduces `gens_dict_recursive` method and uses it instead of `gens_dict` in the conversion code:

```
sage: Rs = QQ["a"]["b"]
sage: Rs("a*b")
a*b
sage: Rm = QQ["a"]["b, c"]
sage: Rm("a*b")
a*b
sage: Rm.gens_dict_recursive()
{'a': a, 'c': c, 'b': b}
```

Issue created by migration from https://trac.sagemath.org/ticket/13327





---

archive/issue_comments_160311.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-08-02T20:38:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13327#issuecomment-160311",
    "user": "https://github.com/novoselt"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_160312.json:
```json
{
    "body": "Looks good to me. Maybe one could check \n\n```\nRm(\"a*b\").parent()\n```\nto be sure that it lands where it should ?",
    "created_at": "2012-08-27T09:26:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13327#issuecomment-160312",
    "user": "https://github.com/fchapoton"
}
```

Looks good to me. Maybe one could check 

```
Rm("a*b").parent()
```
to be sure that it lands where it should ?



---

archive/issue_comments_160313.json:
```json
{
    "body": "Attachment [trac_13327_string_to_iterated_mpolyring.patch](tarball://root/attachments/some-uuid/ticket13327/trac_13327_string_to_iterated_mpolyring.patch) by @novoselt created at 2012-08-27 16:55:27\n\nOK, added the check!",
    "created_at": "2012-08-27T16:55:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13327#issuecomment-160313",
    "user": "https://github.com/novoselt"
}
```

Attachment [trac_13327_string_to_iterated_mpolyring.patch](tarball://root/attachments/some-uuid/ticket13327/trac_13327_string_to_iterated_mpolyring.patch) by @novoselt created at 2012-08-27 16:55:27

OK, added the check!



---

archive/issue_comments_160314.json:
```json
{
    "body": "Ok, looks good to me. Positive review.\n\nBy the way, what do you think of that :\n\n```\nsage: QQ[\"a, a\"]           \nMultivariate Polynomial Ring in a, a over Rational Field\n```",
    "created_at": "2012-08-27T18:02:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13327#issuecomment-160314",
    "user": "https://github.com/fchapoton"
}
```

Ok, looks good to me. Positive review.

By the way, what do you think of that :

```
sage: QQ["a, a"]           
Multivariate Polynomial Ring in a, a over Rational Field
```



---

archive/issue_comments_160315.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-08-27T18:02:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13327#issuecomment-160315",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_160316.json:
```json
{
    "body": "I think this is horrible, as well as\n\n```\nsage: QQ[\"a\"][\"a\"]\nUnivariate Polynomial Ring in a over Univariate Polynomial Ring in a over Rational Field\n```\nbut some people think that it does not matter how something is printing and the name is meaningless.\n\nFrom my point of view, all generator names should be distinct and different from generator names used in the base ring (recursively). Note that if this is enforced, then it is not possible to create polynomial rings with symbolic coefficients, since \"any name is in SR\". Since such polynomials are important (at least to me), the first step is to have symbolic rings with only explicitly specified names allows as variables. Then constructors can check for name collisions.",
    "created_at": "2012-08-27T19:43:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13327#issuecomment-160316",
    "user": "https://github.com/novoselt"
}
```

I think this is horrible, as well as

```
sage: QQ["a"]["a"]
Univariate Polynomial Ring in a over Univariate Polynomial Ring in a over Rational Field
```
but some people think that it does not matter how something is printing and the name is meaningless.

From my point of view, all generator names should be distinct and different from generator names used in the base ring (recursively). Note that if this is enforced, then it is not possible to create polynomial rings with symbolic coefficients, since "any name is in SR". Since such polynomials are important (at least to me), the first step is to have symbolic rings with only explicitly specified names allows as variables. Then constructors can check for name collisions.



---

archive/issue_events_036913.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-28T07:14:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13327",
    "milestone": "sage-5.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13327#event-36913"
}
```



---

archive/issue_comments_160317.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-09-06T05:24:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13327#issuecomment-160317",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_036914.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-09-06T05:24:23Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13327",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13327#event-36914"
}
```
