# Issue 13774: Irreducible Cartan types created as reducibles

archive/issues_013570.json:
```json
{
    "body": "```\nsage: c = CartanType([[\"A\",2]])\nsage: c.is_irreducible()      \nFalse\n```\n\nAs a consequence, e.g. the cartan_matrix() method fails too.\n\n**Updated:**\n\nPatch submitted. Now:\n\n```\nsage: c = CartanType([[\"A\",2]])\nsage: c.is_irreducible()\nTrue\nsage: c = CartanType([\"A2\"])\nsage: c.is_irreducible()\nTrue\n```\n\nAssignee: joyner\n\nCC:  sage-combinat @nthiery\n\nKeywords: CartanType Reducible Irreducible\n\nBranch/Commit: bb304df710bf6e55a6da35c5e54a7d415117a359\n\nReviewer: Travis Scrimshaw, Darij Grinberg\n\nAuthor: Jes\u00fas Torrado\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/13774\n\n",
    "closed_at": "2014-03-21T17:47:39Z",
    "created_at": "2012-11-28T21:18:55Z",
    "labels": [
        "component: combinatorics",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.2",
    "title": "Irreducible Cartan types created as reducibles",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13774",
    "user": "https://trac.sagemath.org/admin/accounts/users/JesusTorrado"
}
```
```
sage: c = CartanType([["A",2]])
sage: c.is_irreducible()      
False
```

As a consequence, e.g. the cartan_matrix() method fails too.

**Updated:**

Patch submitted. Now:

```
sage: c = CartanType([["A",2]])
sage: c.is_irreducible()
True
sage: c = CartanType(["A2"])
sage: c.is_irreducible()
True
```

Assignee: joyner

CC:  sage-combinat @nthiery

Keywords: CartanType Reducible Irreducible

Branch/Commit: bb304df710bf6e55a6da35c5e54a7d415117a359

Reviewer: Travis Scrimshaw, Darij Grinberg

Author: Jes√∫s Torrado

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/13774





---

archive/issue_comments_178752.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -5,6 +5,19 @@\n ```\n \n As a consequence, e.g. the cartan_matrix() method fails too.\n+\n+**Updated:**\n+\n+Patch submitted. Now:\n+\n+```\n+    sage: c = CartanType([[\"A\",2]])\n+    sage: c.is_irreducible()\n+    True\n+    sage: c = CartanType([\"A2\"])\n+    sage: c.is_irreducible()\n+    True\n+```\n \n Upstream: Workaround found; Bug reported upstream.\n \n```\n",
    "created_at": "2012-11-28T21:38:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13774",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13774#issuecomment-178752",
    "user": "https://trac.sagemath.org/admin/accounts/users/JesusTorrado"
}
```

Description changed:
```diff
--- 
+++ 
@@ -5,6 +5,19 @@
 ```
 
 As a consequence, e.g. the cartan_matrix() method fails too.
+
+**Updated:**
+
+Patch submitted. Now:
+
+```
+    sage: c = CartanType([["A",2]])
+    sage: c.is_irreducible()
+    True
+    sage: c = CartanType(["A2"])
+    sage: c.is_irreducible()
+    True
+```
 
 Upstream: Workaround found; Bug reported upstream.
 
```




---

archive/issue_comments_178753.json:
```json
{
    "body": "<a id='comment:1'></a>Attachment [trac_13774_wrong_irreducibility_CartanType.patch](tarball://root/attachments/some-uuid/ticket13774/trac_13774_wrong_irreducibility_CartanType.patch) by JesusTorrado created at 2012-11-28 21:38:31",
    "created_at": "2012-11-28T21:38:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13774",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13774#issuecomment-178753",
    "user": "https://trac.sagemath.org/admin/accounts/users/JesusTorrado"
}
```

<a id='comment:1'></a>Attachment [trac_13774_wrong_irreducibility_CartanType.patch](tarball://root/attachments/some-uuid/ticket13774/trac_13774_wrong_irreducibility_CartanType.patch) by JesusTorrado created at 2012-11-28 21:38:31



---

archive/issue_comments_178754.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-11-28T21:38:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13774",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13774#issuecomment-178754",
    "user": "https://trac.sagemath.org/admin/accounts/users/JesusTorrado"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_178755.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,23 @@\n+```\n+sage: c = CartanType([[\"A\",2]])\n+sage: c.is_irreducible()      \n+False\n+```\n \n+As a consequence, e.g. the cartan_matrix() method fails too.\n+\n+**Updated:**\n+\n+Patch submitted. Now:\n+\n+```\n+sage: c = CartanType([[\"A\",2]])\n+sage: c.is_irreducible()\n+True\n+sage: c = CartanType([\"A2\"])\n+sage: c.is_irreducible()\n+True\n+```\n \n Upstream: Workaround found; Bug reported upstream.\n \n```\n",
    "created_at": "2012-11-28T21:39:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13774",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13774#issuecomment-178755",
    "user": "https://trac.sagemath.org/admin/accounts/users/JesusTorrado"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,23 @@
+```
+sage: c = CartanType([["A",2]])
+sage: c.is_irreducible()      
+False
+```
 
+As a consequence, e.g. the cartan_matrix() method fails too.
+
+**Updated:**
+
+Patch submitted. Now:
+
+```
+sage: c = CartanType([["A",2]])
+sage: c.is_irreducible()
+True
+sage: c = CartanType(["A2"])
+sage: c.is_irreducible()
+True
+```
 
 Upstream: Workaround found; Bug reported upstream.
 
```




---

archive/issue_comments_178756.json:
```json
{
    "body": "<a id='comment:3'></a>You should add doctests showing that the behavior is now correct, probably with a reference to this ticket:\n\n```\nFixed in :trac:`13774`::\n\n    sage: c = CartanType([[\"A\",2]])\n    sage: c.is_irreducible()\n    True\n    sage: c = CartanType([\"A2\"])\n    sage: c.is_irreducible()\n    True\n```\nI don't have any comments about the mathematical correctness of the fix here; I hope someone else will address that.",
    "created_at": "2012-11-28T21:59:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13774",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13774#issuecomment-178756",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:3'></a>You should add doctests showing that the behavior is now correct, probably with a reference to this ticket:

```
Fixed in :trac:`13774`::

    sage: c = CartanType([["A",2]])
    sage: c.is_irreducible()
    True
    sage: c = CartanType(["A2"])
    sage: c.is_irreducible()
    True
```
I don't have any comments about the mathematical correctness of the fix here; I hope someone else will address that.



---

archive/issue_comments_178757.json:
```json
{
    "body": "<a id='comment:4'></a>Replying to [comment:3 jhpalmieri]:\n> You should add doctests showing that the behavior is now correct, probably with a reference to this ticket: [...]\n\n\nI thought about it, but I wasn't sure of whether this was relevant enough to do so. Also, I wouldn't know where to include it: in the top of the file? In the CartanTypeFactory class?",
    "created_at": "2012-11-28T22:23:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13774",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13774#issuecomment-178757",
    "user": "https://trac.sagemath.org/admin/accounts/users/JesusTorrado"
}
```

<a id='comment:4'></a>Replying to [comment:3 jhpalmieri]:
> You should add doctests showing that the behavior is now correct, probably with a reference to this ticket: [...]


I thought about it, but I wasn't sure of whether this was relevant enough to do so. Also, I wouldn't know where to include it: in the top of the file? In the CartanTypeFactory class?



---

archive/issue_comments_178758.json:
```json
{
    "body": "<a id='comment:5'></a>\n```\n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 15973.8 seconds\n```",
    "created_at": "2012-11-29T08:45:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13774",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13774#issuecomment-178758",
    "user": "https://trac.sagemath.org/admin/accounts/users/JesusTorrado"
}
```

<a id='comment:5'></a>
```
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 15973.8 seconds
```



---

archive/issue_comments_178759.json:
```json
{
    "body": "<a id='comment:6'></a>Attachment [trac_13774-review-ts.patch](tarball://root/attachments/some-uuid/ticket13774/trac_13774-review-ts.patch) by @tscrim created at 2013-04-06 18:54:08\n\nI've uploaded a small review patch which adds the doctests to `__call__()`. If you agree with the changes, feel free to set this to positive review.",
    "created_at": "2013-04-06T18:54:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13774",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13774#issuecomment-178759",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:6'></a>Attachment [trac_13774-review-ts.patch](tarball://root/attachments/some-uuid/ticket13774/trac_13774-review-ts.patch) by @tscrim created at 2013-04-06 18:54:08

I've uploaded a small review patch which adds the doctests to `__call__()`. If you agree with the changes, feel free to set this to positive review.



---

archive/issue_comments_178760.json:
```json
{
    "body": "Changing component from group theory to combinatorics.",
    "created_at": "2013-04-06T18:54:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13774",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13774#issuecomment-178760",
    "user": "https://github.com/tscrim"
}
```

Changing component from group theory to combinatorics.



---

archive/issue_events_038622.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13774",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13774#event-38622"
}
```



---

archive/issue_comments_178761.json:
```json
{
    "body": "<a id='comment:9'></a>(Rebased) Branch version. I just need someone to double-check my review changes.\n\n---\nNew commits:",
    "created_at": "2013-12-27T17:21:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13774",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13774#issuecomment-178761",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:9'></a>(Rebased) Branch version. I just need someone to double-check my review changes.

---
New commits:



---

archive/issue_events_038623.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13774",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13774#event-38623"
}
```



---

archive/issue_events_038624.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13774",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13774#event-38624"
}
```



---

archive/issue_comments_178762.json:
```json
{
    "body": "<a id='comment:11'></a>Is this still relevant? I can't reproduce the bug with a current version of Sage, but I'm not sure if it was cause or symptoms that has been healed.",
    "created_at": "2014-03-07T05:47:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13774",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13774#issuecomment-178762",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:11'></a>Is this still relevant? I can't reproduce the bug with a current version of Sage, but I'm not sure if it was cause or symptoms that has been healed.



---

archive/issue_comments_178763.json:
```json
{
    "body": "<a id='comment:12'></a>I can still reproduce it:\n\n```\n\n# This is the expected behavior\n\nsage: c = CartanType([['A',2], ['D',4]]); c\nA2xD4\nsage: c.is_irreducible()\nFalse\nsage: c.cartan_matrix()\n[ 2 -1| 0  0  0  0]\n[-1  2| 0  0  0  0]\n[-----+-----------]\n[ 0  0| 2 -1  0  0]\n[ 0  0|-1  2 -1 -1]\n[ 0  0| 0 -1  2  0]\n[ 0  0| 0 -1  0  2]\nsage: c = CartanType(['A',2]); c\n['A', 2]\nsage: c.cartan_matrix()\n[ 2 -1]\n[-1  2]\n\n# This is wrong\n\nsage: c = CartanType([['A',2]]); c\nA2\nsage: c.is_irreducible()\nFalse\nsage: c.cartan_matrix()\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n...\nValueError: matrix is immutable; please change a copy instead (i.e., use copy(M) to change a copy of M).\n```",
    "created_at": "2014-03-07T15:17:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13774",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13774#issuecomment-178763",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:12'></a>I can still reproduce it:

```

# This is the expected behavior

sage: c = CartanType([['A',2], ['D',4]]); c
A2xD4
sage: c.is_irreducible()
False
sage: c.cartan_matrix()
[ 2 -1| 0  0  0  0]
[-1  2| 0  0  0  0]
[-----+-----------]
[ 0  0| 2 -1  0  0]
[ 0  0|-1  2 -1 -1]
[ 0  0| 0 -1  2  0]
[ 0  0| 0 -1  0  2]
sage: c = CartanType(['A',2]); c
['A', 2]
sage: c.cartan_matrix()
[ 2 -1]
[-1  2]

# This is wrong

sage: c = CartanType([['A',2]]); c
A2
sage: c.is_irreducible()
False
sage: c.cartan_matrix()
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
...
ValueError: matrix is immutable; please change a copy instead (i.e., use copy(M) to change a copy of M).
```



---

archive/issue_comments_178764.json:
```json
{
    "body": "<a id='comment:13'></a>Oops, I mucked something up. Anyway, could you add the Cartan matrix to the doctests?",
    "created_at": "2014-03-07T16:42:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13774",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13774#issuecomment-178764",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:13'></a>Oops, I mucked something up. Anyway, could you add the Cartan matrix to the doctests?



---

archive/issue_comments_178765.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-03-07T20:43:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13774",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13774#issuecomment-178765",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_178766.json:
```json
{
    "body": "<a id='comment:15'></a>Done.",
    "created_at": "2014-03-07T20:43:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13774",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13774#issuecomment-178766",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:15'></a>Done.



---

archive/issue_comments_178767.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-03-15T17:21:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13774",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13774#issuecomment-178767",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_178768.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-03-15T17:23:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13774",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13774#issuecomment-178768",
    "user": "https://github.com/darijgr"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_178769.json:
```json
{
    "body": "<a id='comment:17'></a>Sorry for forgetting about this. Positive review. (My commit just fixes typos, which should not be much in need for reviewing.)",
    "created_at": "2014-03-15T17:23:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13774",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13774#issuecomment-178769",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:17'></a>Sorry for forgetting about this. Positive review. (My commit just fixes typos, which should not be much in need for reviewing.)



---

archive/issue_comments_178770.json:
```json
{
    "body": "<a id='comment:18'></a>Thanks Darij.",
    "created_at": "2014-03-15T17:30:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13774",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13774#issuecomment-178770",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:18'></a>Thanks Darij.



---

archive/issue_comments_178771.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-03-21T17:47:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13774",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13774#issuecomment-178771",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_038625.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-03-21T17:47:39Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13774",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13774#event-38625"
}
```
