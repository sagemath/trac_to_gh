# Issue 13561: Supply nice error message when starting $SAGE_ROOT/sage without compiling Sage first

archive/issues_013357.json:
```json
{
    "assignees": [
        "https://github.com/nexttime"
    ],
    "body": "As title.\n\n---\nApply [attachment: trac_13561-unbuilt-sage-error-message.patch](https://github.com/sagemath/sage/files/ticket13561/trac_13561-unbuilt-sage-error-message.patch.gz) to `SAGE_ROOT`.\n\nReviewer: **Jeroen Demeyer, Punarbasu Purkayastha**\n\nAuthor: **Keshav Kini, Jeroen Demeyer**\n\nMerged: **sage-5.6.rc1**\n\nComponent: **scripts**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/13561_\n\n",
    "closed_at": "2013-01-18T07:41:37Z",
    "created_at": "2012-10-02T22:29:45Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20scripts",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Supply nice error message when starting $SAGE_ROOT/sage without compiling Sage first",
    "type": "issue",
    "updated_at": "2013-01-18T07:41:37Z",
    "url": "https://github.com/sagemath/sage/issues/13561",
    "user": "https://github.com/kini"
}
```
As title.

---
Apply [attachment: trac_13561-unbuilt-sage-error-message.patch](https://github.com/sagemath/sage/files/ticket13561/trac_13561-unbuilt-sage-error-message.patch.gz) to `SAGE_ROOT`.

Reviewer: **Jeroen Demeyer, Punarbasu Purkayastha**

Author: **Keshav Kini, Jeroen Demeyer**

Merged: **sage-5.6.rc1**

Component: **scripts**

_Issue created by migration from https://trac.sagemath.org/ticket/13561_





---

archive/issue_events_190189.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2012-10-02T22:29:45Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "milestone_number": null,
    "milestone_title": "sage-5.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13561#event-190189"
}
```



---

archive/issue_events_190190.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2012-10-02T22:29:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20scripts",
    "label_color": "000080",
    "label_name": "c: scripts",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13561#event-190190"
}
```



---

archive/issue_events_190191.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2012-10-02T22:29:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13561#event-190191"
}
```



---

archive/issue_events_190192.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2012-10-02T22:29:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13561#event-190192"
}
```



---

archive/issue_events_190193.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2012-10-02T22:29:45Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "subject": "https://github.com/kini",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13561#event-190193"
}
```



---

archive/issue_comments_158312.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nThere used to be such a warning until #11073, and then it was removed. It probably shouldn't have been.",
    "created_at": "2012-10-02T23:22:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13561#issuecomment-158312",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:1" align="right">comment:1</div>

There used to be such a warning until #11073, and then it was removed. It probably shouldn't have been.



---

archive/issue_comments_158313.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nLooks like the message used to be implemented in `$SAGE_ROOT/sage` as this:\n\n```sh\nif [ ! -f \"$SAGE_ROOT/local/bin/sage-sage\" ]; then\ncat >&2 <<COMPLAINT\n************************************************************************\nYou must compile Sage first using 'make' in the Sage root directory.\n(If you have already compiled Sage, you must set the SAGE_ROOT variable\nin the file '$0').\n************************************************************************\nCOMPLAINT\n    exit 1\nfi\n```\n\nWhat does this have to do with `$SAGE_ROOT`? Do we even still want people to manually hardcode the `$SAGE_ROOT` variable anywhere? Isn't that supposed to be automatically determined these days?\n\nI updated the patch to copy to stderr and use lines of asterisks as in the original message, but retained my new message.",
    "created_at": "2012-10-03T00:14:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13561#issuecomment-158313",
    "user": "https://github.com/kini"
}
```

<div id="comment:2" align="right">comment:2</div>

Looks like the message used to be implemented in `$SAGE_ROOT/sage` as this:

```sh
if [ ! -f "$SAGE_ROOT/local/bin/sage-sage" ]; then
cat >&2 <<COMPLAINT
************************************************************************
You must compile Sage first using 'make' in the Sage root directory.
(If you have already compiled Sage, you must set the SAGE_ROOT variable
in the file '$0').
************************************************************************
COMPLAINT
    exit 1
fi
```

What does this have to do with `$SAGE_ROOT`? Do we even still want people to manually hardcode the `$SAGE_ROOT` variable anywhere? Isn't that supposed to be automatically determined these days?

I updated the patch to copy to stderr and use lines of asterisks as in the original message, but retained my new message.



---

archive/issue_comments_158314.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nChanged the test condition from `[ -d \"$SAGE_LOCAL\" ]` to `! grep -r sage- \"$SAGE_PACKAGES\"/installed/ >& /dev/null`, which I think is maybe more apt. Now to test if this breaks the build...",
    "created_at": "2012-10-03T01:01:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13561#issuecomment-158314",
    "user": "https://github.com/kini"
}
```

<div id="comment:3" align="right">comment:3</div>

Changed the test condition from `[ -d "$SAGE_LOCAL" ]` to `! grep -r sage- "$SAGE_PACKAGES"/installed/ >& /dev/null`, which I think is maybe more apt. Now to test if this breaks the build...



---

archive/issue_comments_158315.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nOK, it does, almost immediately :P",
    "created_at": "2012-10-03T01:07:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13561#issuecomment-158315",
    "user": "https://github.com/kini"
}
```

<div id="comment:4" align="right">comment:4</div>

OK, it does, almost immediately :P



---

archive/issue_comments_158316.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nWorks as advertised. Do you want this to be reviewed or not? :P",
    "created_at": "2012-10-03T05:07:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13561#issuecomment-158316",
    "user": "https://github.com/ppurka"
}
```

<div id="comment:5" align="right">comment:5</div>

Works as advertised. Do you want this to be reviewed or not? :P



---

archive/issue_comments_158317.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nIt currently breaks the build because the spkg-install script for the sage library tries to run `sage -b` before marking itself as being installed by creating `$SAGE_ROOT/spkg/installed/sage-*`. Don't worry, I'll set it to needs_review when I think it needs review :)",
    "created_at": "2012-10-03T05:10:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13561#issuecomment-158317",
    "user": "https://github.com/kini"
}
```

<div id="comment:6" align="right">comment:6</div>

It currently breaks the build because the spkg-install script for the sage library tries to run `sage -b` before marking itself as being installed by creating `$SAGE_ROOT/spkg/installed/sage-*`. Don't worry, I'll set it to needs_review when I think it needs review :)



---

archive/issue_comments_158318.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nMaybe just look for the \"spkg/installed\" directory? It isn't present on a newly unpacked tarball. Otherwise you could look for \"sage\" instead of \"sage-\" in your grep string.",
    "created_at": "2012-10-03T05:14:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13561#issuecomment-158318",
    "user": "https://github.com/ppurka"
}
```

<div id="comment:7" align="right">comment:7</div>

Maybe just look for the "spkg/installed" directory? It isn't present on a newly unpacked tarball. Otherwise you could look for "sage" instead of "sage-" in your grep string.



---

archive/issue_comments_158319.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nWell, I was hoping to be able to display that error until Sage was in a completely built state. The old code basically checked that the scripts SPKG had been unpacked. Just checking for the `spkg/installed` directory would cause the error to go away as soon as at least one SPKG had been built.",
    "created_at": "2012-10-03T19:35:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13561#issuecomment-158319",
    "user": "https://github.com/kini"
}
```

<div id="comment:8" align="right">comment:8</div>

Well, I was hoping to be able to display that error until Sage was in a completely built state. The old code basically checked that the scripts SPKG had been unpacked. Just checking for the `spkg/installed` directory would cause the error to go away as soon as at least one SPKG had been built.



---

archive/issue_comments_158320.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nWell, you could test whether it's a binary distribution and if not, you could test whether `make` thinks everything is up to date using `make -q build`. Actually, that doesn't seem to work. For a while now, sagetex has been the last spkg to install (because it is the only one which depends on `$(SAGERUNTIME)` in spkg/standard/deps), so you could look for spkg/installed/sagetex-...  By the way, `grep -r` is not portable, so maybe this:\n\n```sh\nif [ ! -f \"$SAGE_PACKAGES\"/standard/.from_bdist ] && ! ls \"$SAGE_PACKAGES\"/installed | grep sagetex- > /dev/null ; then ...\n```\nYou would need to first check whether spkg/installed exists.",
    "created_at": "2012-10-03T20:09:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13561#issuecomment-158320",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:9" align="right">comment:9</div>

Well, you could test whether it's a binary distribution and if not, you could test whether `make` thinks everything is up to date using `make -q build`. Actually, that doesn't seem to work. For a while now, sagetex has been the last spkg to install (because it is the only one which depends on `$(SAGERUNTIME)` in spkg/standard/deps), so you could look for spkg/installed/sagetex-...  By the way, `grep -r` is not portable, so maybe this:

```sh
if [ ! -f "$SAGE_PACKAGES"/standard/.from_bdist ] && ! ls "$SAGE_PACKAGES"/installed | grep sagetex- > /dev/null ; then ...
```
You would need to first check whether spkg/installed exists.



---

archive/issue_comments_158321.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nThe problem is that currently the sage library SPKG tries to run the main sage executable while installing the sage library, which is fundamentally at odds with the goal of making the main sage executable refuse to run until sage is fully installed. One could patch the spkg-install script to run scripts in `$SAGE_LOCAL/bin` directly instead of trying to go through the sage command line interface.",
    "created_at": "2012-10-03T23:44:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13561#issuecomment-158321",
    "user": "https://github.com/kini"
}
```

<div id="comment:10" align="right">comment:10</div>

The problem is that currently the sage library SPKG tries to run the main sage executable while installing the sage library, which is fundamentally at odds with the goal of making the main sage executable refuse to run until sage is fully installed. One could patch the spkg-install script to run scripts in `$SAGE_LOCAL/bin` directly instead of trying to go through the sage command line interface.



---

archive/issue_comments_158322.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@kini](#comment:10):\n> One could patch the spkg-install script to run scripts in `$SAGE_LOCAL/bin` directly instead of trying to go through the sage command line interface.\n\nIs it just the spkg-install script which needs changing? That makes sense to me anyway, since the sage spkg depends on the scripts spkg, but does not depend (explicitly, anyway) on the root spkg.",
    "created_at": "2012-10-04T01:07:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13561#issuecomment-158322",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@kini](#comment:10):
> One could patch the spkg-install script to run scripts in `$SAGE_LOCAL/bin` directly instead of trying to go through the sage command line interface.

Is it just the spkg-install script which needs changing? That makes sense to me anyway, since the sage spkg depends on the scripts spkg, but does not depend (explicitly, anyway) on the root spkg.



---

archive/issue_comments_158323.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nAs far as I know. On the other hand, I guess Jeroen won't like adding restrictions on when the main Sage executable can be run, because of `sage --sh` and stuff like that. Maybe I'll just stick to checking whether the tarball is totally pristine, and let the executable run if sage has been even partially compiled.",
    "created_at": "2012-10-04T21:52:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13561#issuecomment-158323",
    "user": "https://github.com/kini"
}
```

<div id="comment:12" align="right">comment:12</div>

As far as I know. On the other hand, I guess Jeroen won't like adding restrictions on when the main Sage executable can be run, because of `sage --sh` and stuff like that. Maybe I'll just stick to checking whether the tarball is totally pristine, and let the executable run if sage has been even partially compiled.



---

archive/issue_events_190194.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2012-10-04T22:04:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13561#event-190194"
}
```



---

archive/issue_comments_158324.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nI'm marking this as needs_review - testing the build right now but it seems like it should work.",
    "created_at": "2012-10-04T22:04:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13561#issuecomment-158324",
    "user": "https://github.com/kini"
}
```

<div id="comment:13" align="right">comment:13</div>

I'm marking this as needs_review - testing the build right now but it seems like it should work.



---

archive/issue_comments_158325.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer**",
    "created_at": "2012-10-05T09:03:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13561#issuecomment-158325",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Jeroen Demeyer**



---

archive/issue_events_190195.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-10-05T09:03:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13561#event-190195"
}
```



---

archive/issue_events_190196.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-10-05T09:03:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13561#event-190196"
}
```



---

archive/issue_comments_158326.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nThe following should work without building Sage:\n\n```\njdemeyer@arcanis:/usr/local/src/sage-5.4.beta1$ ./sage --sh\n************************************************************************\nIt seems that you are attempting to run Sage from an unpacked source\ntarball, but you have not compiled it yet. Please run `make` in the Sage\nroot directory first. Read README.txt for more information.\n************************************************************************\n```\n\nI propose to move the check inside the `sage_setup` function in `spkg/bin/sage` (remember to apply #13459 first!)",
    "created_at": "2012-10-05T09:03:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13561#issuecomment-158326",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:14" align="right">comment:14</div>

The following should work without building Sage:

```
jdemeyer@arcanis:/usr/local/src/sage-5.4.beta1$ ./sage --sh
************************************************************************
It seems that you are attempting to run Sage from an unpacked source
tarball, but you have not compiled it yet. Please run `make` in the Sage
root directory first. Read README.txt for more information.
************************************************************************
```

I propose to move the check inside the `sage_setup` function in `spkg/bin/sage` (remember to apply #13459 first!)



---

archive/issue_comments_158327.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nInstead of checking the `local` directory, how about checking the existence of\n\n```\n$SAGE_LOCAL/lib/libcsage.so\n```\nwhich means that Sage actually has been built.",
    "created_at": "2012-10-05T09:04:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13561#issuecomment-158327",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:15" align="right">comment:15</div>

Instead of checking the `local` directory, how about checking the existence of

```
$SAGE_LOCAL/lib/libcsage.so
```
which means that Sage actually has been built.



---

archive/issue_comments_158328.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nForgot to upload the updated patch. I compiled 5.4rc4 with [this one](https://github.com/sagemath/sage/files/ticket13561/trac_13561-unbuilt-sage-error-message.2.patch.gz), and it seems to work fine.",
    "created_at": "2012-11-12T09:08:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13561#issuecomment-158328",
    "user": "https://github.com/ppurka"
}
```

<div id="comment:16" align="right">comment:16</div>

Forgot to upload the updated patch. I compiled 5.4rc4 with [this one](https://github.com/sagemath/sage/files/ticket13561/trac_13561-unbuilt-sage-error-message.2.patch.gz), and it seems to work fine.



---

archive/issue_events_190197.json:
```json
{
    "actor": "https://github.com/ppurka",
    "created_at": "2012-11-12T09:08:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13561#event-190197"
}
```



---

archive/issue_events_190198.json:
```json
{
    "actor": "https://github.com/ppurka",
    "created_at": "2012-11-12T09:08:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13561#event-190198"
}
```



---

archive/issue_comments_158329.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,4 @@\n As title.\n+\n+---\n+Apply [attachment: trac_13561-unbuilt-sage-error-message.2.patch](https://github.com/sagemath/sage/files/ticket13561/trac_13561-unbuilt-sage-error-message.2.patch.gz) to `SAGE_ROOT`.\n``````\n",
    "created_at": "2012-11-12T09:08:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13561#issuecomment-158329",
    "user": "https://github.com/ppurka"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,4 @@
 As title.
+
+---
+Apply [attachment: trac_13561-unbuilt-sage-error-message.2.patch](https://github.com/sagemath/sage/files/ticket13561/trac_13561-unbuilt-sage-error-message.2.patch.gz) to `SAGE_ROOT`.
``````




---

archive/issue_comments_158330.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nWhy are you checking for a symbolic link, we should not rely on that. You should replace `-L` by `-f`.",
    "created_at": "2012-11-12T09:42:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13561#issuecomment-158330",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:17" align="right">comment:17</div>

Why are you checking for a symbolic link, we should not rely on that. You should replace `-L` by `-f`.



---

archive/issue_comments_158331.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@jdemeyer](#comment:17):\n> Why are you checking for a symbolic link, we should not rely on that. You should replace `-L` by `-f`.\n\nWhy so? Do you expect the file type to change between different versions of Sage?",
    "created_at": "2012-11-12T09:47:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13561#issuecomment-158331",
    "user": "https://github.com/ppurka"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@jdemeyer](#comment:17):
> Why are you checking for a symbolic link, we should not rely on that. You should replace `-L` by `-f`.

Why so? Do you expect the file type to change between different versions of Sage?



---

archive/issue_comments_158332.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@ppurka](#comment:18):\n> Replying to [@jdemeyer](#comment:17):\n> > Why are you checking for a symbolic link, we should not rely on that. You should replace `-L` by `-f`.\n\n> Why so? Do you expect the file type to change between different versions of Sage?\n\nI don't *expect* it to change, but it seems strange to **require** that `libcsage.so` is a symbolic link. Also, the `-L` test will succeed if it is a broken symbolic link.",
    "created_at": "2012-11-12T09:50:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13561#issuecomment-158332",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@ppurka](#comment:18):
> Replying to [@jdemeyer](#comment:17):
> > Why are you checking for a symbolic link, we should not rely on that. You should replace `-L` by `-f`.

> Why so? Do you expect the file type to change between different versions of Sage?

I don't *expect* it to change, but it seems strange to **require** that `libcsage.so` is a symbolic link. Also, the `-L` test will succeed if it is a broken symbolic link.



---

archive/issue_comments_158333.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nOk. Updated the patch.",
    "created_at": "2012-11-12T09:57:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13561#issuecomment-158333",
    "user": "https://github.com/ppurka"
}
```

<div id="comment:20" align="right">comment:20</div>

Ok. Updated the patch.



---

archive/issue_comments_158334.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n As title.\n \n ---\n-Apply [attachment: trac_13561-unbuilt-sage-error-message.2.patch](https://github.com/sagemath/sage/files/ticket13561/trac_13561-unbuilt-sage-error-message.2.patch.gz) to `SAGE_ROOT`.\n+Apply [attachment: trac_13561-unbuilt-sage-error-message.patch](https://github.com/sagemath/sage/files/ticket13561/trac_13561-unbuilt-sage-error-message.patch.gz) to `SAGE_ROOT`.\n``````\n",
    "created_at": "2013-01-14T09:11:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13561#issuecomment-158334",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
 As title.
 
 ---
-Apply [attachment: trac_13561-unbuilt-sage-error-message.2.patch](https://github.com/sagemath/sage/files/ticket13561/trac_13561-unbuilt-sage-error-message.2.patch.gz) to `SAGE_ROOT`.
+Apply [attachment: trac_13561-unbuilt-sage-error-message.patch](https://github.com/sagemath/sage/files/ticket13561/trac_13561-unbuilt-sage-error-message.patch.gz) to `SAGE_ROOT`.
``````




---

archive/issue_comments_158335.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nI did not realize that relying on the `.so` extension is not portable (OS X uses `.dylib`).  New patch which uses `local/lib/python/site-packages/sage` instead, also with a slightly extended error message.",
    "created_at": "2013-01-14T09:11:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13561#issuecomment-158335",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:21" align="right">comment:21</div>

I did not realize that relying on the `.so` extension is not portable (OS X uses `.dylib`).  New patch which uses `local/lib/python/site-packages/sage` instead, also with a slightly extended error message.



---

archive/issue_comments_158336.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nAttachment: **[trac_13561-unbuilt-sage-error-message.patch.gz](https://github.com/sagemath/sage/files/ticket13561/trac_13561-unbuilt-sage-error-message.patch.gz)**\n\n`-d .../sage` doesn't work because it is a symbolic link and not a directory. The other option is to try `-f .../sage`.\n\nWhy don't we instead try something like this? It will check if sage can be imported:\n\n```sh\n    python -c 'import sage' > /dev/null 2>&1\n    if [ $? -ne 0 ]; then\n        echo \"sage not built blah blah\"\n        exit 1\n    fi\n```\nI did some tests with this and with checking directory and I don't see much of a difference in the time taken. I ran\n\n```\necho 3 > /proc/sys/vm/drop_caches\n```\nbefore every call to the `sage -c` command.\n\nJust the default time taken by a simple command (cold starts, i.e. caches were dropped before every command).\n\n```\n~ [1] \u00bb time sage -c 'print \"\"'\n\nsage -c 'print \"\"'  1.42s user 0.64s system 12% cpu 16.334 total\n~\u00bb time sage -c 'print \"\"'\n\nsage -c 'print \"\"'  1.47s user 0.62s system 9% cpu 22.283 total\n~\u00bb time sage -c 'print \"\"'\n\nsage -c 'print \"\"'  1.49s user 0.65s system 11% cpu 18.610 total\n```\n\n\nThe same command after removing the `site-packages/sage` symbolic link, and with the check for `python -c 'import sage'` as written above. \"aaaa..\" was the echo command (cold starts, i.e. caches were dropped before every command).\n\n```\n~\u00bb time sage -c 'print \"\"'\naaaaaaaaaaaaaaaaaaaaaa\nsage -c 'print \"\"'  0.09s user 0.04s system 7% cpu 1.605 total\n~ [1] \u00bb time sage -c 'print \"\"'\naaaaaaaaaaaaaaaaaaaaaa\nsage -c 'print \"\"'  0.06s user 0.05s system 8% cpu 1.237 total\n~ [1] \u00bb time sage -c 'print \"\"'\naaaaaaaaaaaaaaaaaaaaaa\nsage -c 'print \"\"'  0.07s user 0.05s system 2% cpu 5.046 total\n~ [1] \u00bb time sage -c 'print \"\"'\naaaaaaaaaaaaaaaaaaaaaa\nsage -c 'print \"\"'  0.06s user 0.04s system 9% cpu 1.159 total\n```\n\nThe same command but with the check `-d $SAGE_LOCAL/lib/python/site-packages/sage` (cold starts, i.e. caches were dropped before every command):\n\n```\n~\u00bb time sage -c 'print \"\"'\naaaaaaaaaaaaaaaaaaaaa\nsage -c 'print \"\"'  0.04s user 0.04s system 4% cpu 1.703 total\n~ [1] \u00bb time sage -c 'print \"\"'\naaaaaaaaaaaaaaaaaaaaa\nsage -c 'print \"\"'  0.04s user 0.05s system 6% cpu 1.244 total\n~ [1] \u00bb time sage -c 'print \"\"'\naaaaaaaaaaaaaaaaaaaaa\nsage -c 'print \"\"'  0.05s user 0.03s system 7% cpu 1.093 total\n~ [1] \u00bb time sage -c 'print \"\"'\naaaaaaaaaaaaaaaaaaaaa\nsage -c 'print \"\"'  0.04s user 0.04s system 1% cpu 4.329 total\n~ [1] \u00bb time sage -c 'print \"\"'\naaaaaaaaaaaaaaaaaaaaa\nsage -c 'print \"\"'  0.04s user 0.04s system 6% cpu 1.212 total\n```\n\nMaybe there is a very slight slowdown, of the order of 100ms on using the python command (on a cold start), but it is about 10-20ms on a warm start. Compare this with an unpatched sage file.\n\nUnpatched sage file (warm starts, no caches were dropped):\n\n```\n~\u00bb time sage -c 'print \"\"'\n\nsage -c 'print \"\"'  1.17s user 0.32s system 96% cpu 1.546 total\n~\u00bb time sage -c 'print \"\"'\n\nsage -c 'print \"\"'  1.23s user 0.30s system 99% cpu 1.543 total\n~\u00bb time sage -c 'print \"\"'\n\nsage -c 'print \"\"'  1.27s user 0.29s system 98% cpu 1.579 total\n```\n\nPatched sage file with `python -c 'import sage'` (warm starts, no caches were dropped):\n\n```\n~\u00bb time sage -c 'print \"\"'\n\nsage -c 'print \"\"'  1.29s user 0.22s system 96% cpu 1.558 total\n~\u00bb time sage -c 'print \"\"'\n\nsage -c 'print \"\"'  1.28s user 0.28s system 99% cpu 1.564 total\n~\u00bb time sage -c 'print \"\"'\n\nsage -c 'print \"\"'  1.20s user 0.35s system 98% cpu 1.563 total\n```",
    "created_at": "2013-01-14T11:24:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13561#issuecomment-158336",
    "user": "https://github.com/ppurka"
}
```

<div id="comment:22" align="right">comment:22</div>

Attachment: **[trac_13561-unbuilt-sage-error-message.patch.gz](https://github.com/sagemath/sage/files/ticket13561/trac_13561-unbuilt-sage-error-message.patch.gz)**

`-d .../sage` doesn't work because it is a symbolic link and not a directory. The other option is to try `-f .../sage`.

Why don't we instead try something like this? It will check if sage can be imported:

```sh
    python -c 'import sage' > /dev/null 2>&1
    if [ $? -ne 0 ]; then
        echo "sage not built blah blah"
        exit 1
    fi
```
I did some tests with this and with checking directory and I don't see much of a difference in the time taken. I ran

```
echo 3 > /proc/sys/vm/drop_caches
```
before every call to the `sage -c` command.

Just the default time taken by a simple command (cold starts, i.e. caches were dropped before every command).

```
~ [1] » time sage -c 'print ""'

sage -c 'print ""'  1.42s user 0.64s system 12% cpu 16.334 total
~» time sage -c 'print ""'

sage -c 'print ""'  1.47s user 0.62s system 9% cpu 22.283 total
~» time sage -c 'print ""'

sage -c 'print ""'  1.49s user 0.65s system 11% cpu 18.610 total
```


The same command after removing the `site-packages/sage` symbolic link, and with the check for `python -c 'import sage'` as written above. "aaaa.." was the echo command (cold starts, i.e. caches were dropped before every command).

```
~» time sage -c 'print ""'
aaaaaaaaaaaaaaaaaaaaaa
sage -c 'print ""'  0.09s user 0.04s system 7% cpu 1.605 total
~ [1] » time sage -c 'print ""'
aaaaaaaaaaaaaaaaaaaaaa
sage -c 'print ""'  0.06s user 0.05s system 8% cpu 1.237 total
~ [1] » time sage -c 'print ""'
aaaaaaaaaaaaaaaaaaaaaa
sage -c 'print ""'  0.07s user 0.05s system 2% cpu 5.046 total
~ [1] » time sage -c 'print ""'
aaaaaaaaaaaaaaaaaaaaaa
sage -c 'print ""'  0.06s user 0.04s system 9% cpu 1.159 total
```

The same command but with the check `-d $SAGE_LOCAL/lib/python/site-packages/sage` (cold starts, i.e. caches were dropped before every command):

```
~» time sage -c 'print ""'
aaaaaaaaaaaaaaaaaaaaa
sage -c 'print ""'  0.04s user 0.04s system 4% cpu 1.703 total
~ [1] » time sage -c 'print ""'
aaaaaaaaaaaaaaaaaaaaa
sage -c 'print ""'  0.04s user 0.05s system 6% cpu 1.244 total
~ [1] » time sage -c 'print ""'
aaaaaaaaaaaaaaaaaaaaa
sage -c 'print ""'  0.05s user 0.03s system 7% cpu 1.093 total
~ [1] » time sage -c 'print ""'
aaaaaaaaaaaaaaaaaaaaa
sage -c 'print ""'  0.04s user 0.04s system 1% cpu 4.329 total
~ [1] » time sage -c 'print ""'
aaaaaaaaaaaaaaaaaaaaa
sage -c 'print ""'  0.04s user 0.04s system 6% cpu 1.212 total
```

Maybe there is a very slight slowdown, of the order of 100ms on using the python command (on a cold start), but it is about 10-20ms on a warm start. Compare this with an unpatched sage file.

Unpatched sage file (warm starts, no caches were dropped):

```
~» time sage -c 'print ""'

sage -c 'print ""'  1.17s user 0.32s system 96% cpu 1.546 total
~» time sage -c 'print ""'

sage -c 'print ""'  1.23s user 0.30s system 99% cpu 1.543 total
~» time sage -c 'print ""'

sage -c 'print ""'  1.27s user 0.29s system 98% cpu 1.579 total
```

Patched sage file with `python -c 'import sage'` (warm starts, no caches were dropped):

```
~» time sage -c 'print ""'

sage -c 'print ""'  1.29s user 0.22s system 96% cpu 1.558 total
~» time sage -c 'print ""'

sage -c 'print ""'  1.28s user 0.28s system 99% cpu 1.564 total
~» time sage -c 'print ""'

sage -c 'print ""'  1.20s user 0.35s system 98% cpu 1.563 total
```



---

archive/issue_comments_158337.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@ppurka](#comment:22):\n> `-d .../sage` doesn't work because it is a symbolic link and not a directory.\n\nAre you sure it doesn't work?  Being a symbolic link and being a directory are not mutually exclusive (a symbolic link to a directory is both a symbolic link and a directory).\n\nIt if really doesn't work for you: what is your version of Sage and of `bash`?\n\nAnd what is the output of\n\n```\nls -ld \"$SAGE_LOCAL/lib/python/site-packages/sage\"\nls -ld \"$SAGE_LOCAL/lib/python/site-packages/sage/../../../../devel/sage/build/sage\"\n```",
    "created_at": "2013-01-14T11:33:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13561#issuecomment-158337",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@ppurka](#comment:22):
> `-d .../sage` doesn't work because it is a symbolic link and not a directory.

Are you sure it doesn't work?  Being a symbolic link and being a directory are not mutually exclusive (a symbolic link to a directory is both a symbolic link and a directory).

It if really doesn't work for you: what is your version of Sage and of `bash`?

And what is the output of

```
ls -ld "$SAGE_LOCAL/lib/python/site-packages/sage"
ls -ld "$SAGE_LOCAL/lib/python/site-packages/sage/../../../../devel/sage/build/sage"
```



---

archive/issue_comments_158338.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@jdemeyer](#comment:23):\n> Replying to [@ppurka](#comment:22):\n> > `-d .../sage` doesn't work because it is a symbolic link and not a directory.\n\n> Are you sure it doesn't work?  Being a symbolic link and being a directory are not mutually exclusive (a symbolic link to a directory is both a symbolic link and a directory).\n\nWhoops, sorry. I got confused with all the testing. It does work.",
    "created_at": "2013-01-14T11:37:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13561#issuecomment-158338",
    "user": "https://github.com/ppurka"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@jdemeyer](#comment:23):
> Replying to [@ppurka](#comment:22):
> > `-d .../sage` doesn't work because it is a symbolic link and not a directory.

> Are you sure it doesn't work?  Being a symbolic link and being a directory are not mutually exclusive (a symbolic link to a directory is both a symbolic link and a directory).

Whoops, sorry. I got confused with all the testing. It does work.



---

archive/issue_comments_158339.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nSo could you formally review my patch then?",
    "created_at": "2013-01-14T14:58:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13561#issuecomment-158339",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:25" align="right">comment:25</div>

So could you formally review my patch then?



---

archive/issue_comments_158340.json:
```json
{
    "body": "Changed author from **Keshav Kini** to **Keshav Kini, Jeroen Demeyer**",
    "created_at": "2013-01-14T15:02:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13561#issuecomment-158340",
    "user": "https://github.com/ppurka"
}
```

Changed author from **Keshav Kini** to **Keshav Kini, Jeroen Demeyer**



---

archive/issue_comments_158341.json:
```json
{
    "body": "Changed reviewer from **Jeroen Demeyer** to **Jeroen Demeyer, Punarbasu Purkayastha**",
    "created_at": "2013-01-14T15:02:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13561#issuecomment-158341",
    "user": "https://github.com/ppurka"
}
```

Changed reviewer from **Jeroen Demeyer** to **Jeroen Demeyer, Punarbasu Purkayastha**



---

archive/issue_comments_158342.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nYes, sorry. The patch is ok.",
    "created_at": "2013-01-14T15:02:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13561#issuecomment-158342",
    "user": "https://github.com/ppurka"
}
```

<div id="comment:26" align="right">comment:26</div>

Yes, sorry. The patch is ok.



---

archive/issue_events_190199.json:
```json
{
    "actor": "https://github.com/ppurka",
    "created_at": "2013-01-14T15:02:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13561#event-190199"
}
```



---

archive/issue_events_190200.json:
```json
{
    "actor": "https://github.com/ppurka",
    "created_at": "2013-01-14T15:02:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13561#event-190200"
}
```



---

archive/issue_events_190201.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-14T15:05:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "milestone_number": null,
    "milestone_title": "sage-5.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13561#event-190201"
}
```



---

archive/issue_events_190202.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-14T15:05:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "milestone_number": null,
    "milestone_title": "sage-5.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13561#event-190202"
}
```



---

archive/issue_events_190203.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-16T19:29:30Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "milestone_number": null,
    "milestone_title": "sage-5.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13561#event-190203"
}
```



---

archive/issue_events_190204.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-16T19:29:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "milestone_number": null,
    "milestone_title": "sage-5.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13561#event-190204"
}
```



---

archive/issue_comments_158343.json:
```json
{
    "body": "Merged: **sage-5.6.rc1**",
    "created_at": "2013-01-18T07:41:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13561#issuecomment-158343",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.6.rc1**



---

archive/issue_events_190205.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-18T07:41:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13561#event-190205"
}
```



---

archive/issue_events_190206.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-18T07:41:37Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/13561",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13561#event-190206"
}
```
