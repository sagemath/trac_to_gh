# Issue 13794: sage -n is broken in 5.5rc0

archive/issues_013590.json:
```json
{
    "assignees": [],
    "body": "See this [sage-devel thread](https://groups.google.com/d/topic/sage-devel/dGtkGWYlI-k/discussion).\nI should have opened the bug report here. This is a clear blocker for 5.5.\n\n---\n\nApply [attachment: trac_13794-scripts.patch.gz](https://github.com/sagemath/sage/files/ticket13794/trac_13794-scripts.patch.gz) to the scripts repo.\n\n\nAssignee: **@jasongrout, @qed777, @williamstein**\n\nReviewer: **Punarbasu Purkayastha**\n\nAuthor: **Jeroen Demeyer, John Palmieri**\n\nMerged: **sage-5.5.rc1**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/13794_\n\n",
    "closed_at": "2012-12-17T09:40:57Z",
    "created_at": "2012-12-04T10:31:09Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20notebook",
        "https://github.com/sagemath/sage/labels/p1%20%E2%80%93%20blocker",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "sage -n is broken in 5.5rc0",
    "type": "issue",
    "updated_at": "2012-12-17T09:40:57Z",
    "url": "https://github.com/sagemath/sage/issues/13794",
    "user": "https://github.com/ppurka"
}
```
See this [sage-devel thread](https://groups.google.com/d/topic/sage-devel/dGtkGWYlI-k/discussion).
I should have opened the bug report here. This is a clear blocker for 5.5.

---

Apply [attachment: trac_13794-scripts.patch.gz](https://github.com/sagemath/sage/files/ticket13794/trac_13794-scripts.patch.gz) to the scripts repo.


Assignee: **@jasongrout, @qed777, @williamstein**

Reviewer: **Punarbasu Purkayastha**

Author: **Jeroen Demeyer, John Palmieri**

Merged: **sage-5.5.rc1**

_Issue created by migration from https://trac.sagemath.org/ticket/13794_





---

archive/issue_events_171202.json:
```json
{
    "actor": "https://github.com/ppurka",
    "created_at": "2012-12-04T10:31:09Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13794",
    "milestone_number": null,
    "milestone_title": "sage-5.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13794#event-171202"
}
```



---

archive/issue_events_171203.json:
```json
{
    "actor": "https://github.com/ppurka",
    "created_at": "2012-12-04T10:31:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13794",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20notebook",
    "label_color": "000080",
    "label_name": "component: notebook",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13794#event-171203"
}
```



---

archive/issue_events_171204.json:
```json
{
    "actor": "https://github.com/ppurka",
    "created_at": "2012-12-04T10:31:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13794",
    "label": "https://github.com/sagemath/sage/labels/p1%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13794#event-171204"
}
```



---

archive/issue_events_171205.json:
```json
{
    "actor": "https://github.com/ppurka",
    "created_at": "2012-12-04T10:31:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13794",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13794#event-171205"
}
```



---

archive/issue_comments_164878.json:
```json
{
    "body": "Replying to [ticket:13794 ppurka]:\n> See this [sage-devel thread](https://groups.google.com/d/topic/sage-devel/dGtkGWYlI-k/discussion).\n> I should have opened the bug report here. This is a clear blocker for 5.5.\n\n... or posted to sage-**release** in the first place ... ;-)",
    "created_at": "2012-12-04T11:21:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13794#issuecomment-164878",
    "user": "https://github.com/nexttime"
}
```

Replying to [ticket:13794 ppurka]:
> See this [sage-devel thread](https://groups.google.com/d/topic/sage-devel/dGtkGWYlI-k/discussion).
> I should have opened the bug report here. This is a clear blocker for 5.5.

... or posted to sage-**release** in the first place ... ;-)



---

archive/issue_comments_164879.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nSee also #11409, in particular the [scripts patch](https://github.com/sagemath/sage/files/ticket11409/11409_scripts.patch.gz).",
    "created_at": "2012-12-04T17:06:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13794#issuecomment-164879",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:2'>Comment 2:</a>
See also #11409, in particular the [scripts patch](https://github.com/sagemath/sage/files/ticket11409/11409_scripts.patch.gz).



---

archive/issue_comments_164880.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nReplying to [@jhpalmieri](#comment%3A2):\n> See also #11409, in particular the [scripts patch](https://github.com/sagemath/sage/files/ticket11409/11409_scripts.patch.gz).\n\nI remember having tried only the scripts patch. It didn't work unfortunately. Only the error message changed.",
    "created_at": "2012-12-04T23:34:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13794#issuecomment-164880",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:3'>Comment 3:</a>
Replying to [@jhpalmieri](#comment%3A2):
> See also #11409, in particular the [scripts patch](https://github.com/sagemath/sage/files/ticket11409/11409_scripts.patch.gz).

I remember having tried only the scripts patch. It didn't work unfortunately. Only the error message changed.



---

archive/issue_comments_164881.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nMaybe we also need this change to `sage-notebook` and `sage-notebook-insecure`:\n\n```diff\ndiff --git a/sage-notebook b/sage-notebook\n--- a/sage-notebook\n+++ b/sage-notebook\n@@ -6,6 +6,7 @@ print open(os.environ['SAGE_ROOT'] + '/l\n \n print \"Please wait while the Sage Notebook server starts...\"\n \n+from sage.all import *\n from sagenb.notebook.all import notebook\n \n print \"...\"\n```",
    "created_at": "2012-12-05T00:39:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13794#issuecomment-164881",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:4'>Comment 4:</a>
Maybe we also need this change to `sage-notebook` and `sage-notebook-insecure`:

```diff
diff --git a/sage-notebook b/sage-notebook
--- a/sage-notebook
+++ b/sage-notebook
@@ -6,6 +6,7 @@ print open(os.environ['SAGE_ROOT'] + '/l
 
 print "Please wait while the Sage Notebook server starts..."
 
+from sage.all import *
 from sagenb.notebook.all import notebook
 
 print "..."
```



---

archive/issue_comments_164882.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nPlease try the scripts patch from #11409 again. I'm attaching it here and making this ticket a prerequisite for #11409, since it is hard to predict when a new sagenb spkg might be ready, so it's hard to predict when #11409 might get merged.",
    "created_at": "2012-12-08T05:44:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13794#issuecomment-164882",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:5'>Comment 5:</a>
Please try the scripts patch from #11409 again. I'm attaching it here and making this ticket a prerequisite for #11409, since it is hard to predict when a new sagenb spkg might be ready, so it's hard to predict when #11409 might get merged.



---

archive/issue_comments_164883.json:
```json
{
    "body": "Author: **Jeroen Demeyer, John Palmieri**",
    "created_at": "2012-12-08T05:44:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13794#issuecomment-164883",
    "user": "https://github.com/jhpalmieri"
}
```

Author: **Jeroen Demeyer, John Palmieri**



---

archive/issue_events_171206.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2012-12-08T05:44:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13794",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13794#event-171206"
}
```



---

archive/issue_comments_164884.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nOk. This patch works by itself with the nb in 5.5rc0. Thanks for the fix.\n\nCan you do the following:\n1. change the name of the patch - it has the wrong ticket number.\n2. change the commit message.\n\nI would give it a positive review otherwise.",
    "created_at": "2012-12-08T06:06:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13794#issuecomment-164884",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:6'>Comment 6:</a>
Ok. This patch works by itself with the nb in 5.5rc0. Thanks for the fix.

Can you do the following:
1. change the name of the patch - it has the wrong ticket number.
2. change the commit message.

I would give it a positive review otherwise.



---

archive/issue_comments_164885.json:
```json
{
    "body": "Attachment: **[trac_13794-scripts.patch.gz](https://github.com/sagemath/sage/files/ticket13794/trac_13794-scripts.patch.gz)**\n\nscripts repo",
    "created_at": "2012-12-08T16:06:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13794#issuecomment-164885",
    "user": "https://github.com/jhpalmieri"
}
```

Attachment: **[trac_13794-scripts.patch.gz](https://github.com/sagemath/sage/files/ticket13794/trac_13794-scripts.patch.gz)**

scripts repo



---

archive/issue_comments_164886.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nHere's a revised patch.",
    "created_at": "2012-12-08T16:07:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13794#issuecomment-164886",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:7'>Comment 7:</a>
Here's a revised patch.



---

archive/issue_comments_164887.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,7 @@\n See this [sage-devel thread](https://groups.google.com/d/topic/sage-devel/dGtkGWYlI-k/discussion).\n I should have opened the bug report here. This is a clear blocker for 5.5.\n+\n+---\n+\n+Apply [attachment: trac_13794-scripts.patch.gz](https://github.com/sagemath/sage/files/ticket13794/trac_13794-scripts.patch.gz) to the scripts repo.\n+\n``````\n",
    "created_at": "2012-12-08T16:07:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13794#issuecomment-164887",
    "user": "https://github.com/jhpalmieri"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,7 @@
 See this [sage-devel thread](https://groups.google.com/d/topic/sage-devel/dGtkGWYlI-k/discussion).
 I should have opened the bug report here. This is a clear blocker for 5.5.
+
+---
+
+Apply [attachment: trac_13794-scripts.patch.gz](https://github.com/sagemath/sage/files/ticket13794/trac_13794-scripts.patch.gz) to the scripts repo.
+
``````




---

archive/issue_comments_164888.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nThanks.",
    "created_at": "2012-12-09T07:13:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13794#issuecomment-164888",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:8'>Comment 8:</a>
Thanks.



---

archive/issue_comments_164889.json:
```json
{
    "body": "Reviewer: **Punarbasu Purkayastha**",
    "created_at": "2012-12-09T07:13:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13794#issuecomment-164889",
    "user": "https://github.com/ppurka"
}
```

Reviewer: **Punarbasu Purkayastha**



---

archive/issue_events_171207.json:
```json
{
    "actor": "https://github.com/ppurka",
    "created_at": "2012-12-09T07:13:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13794",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13794#event-171207"
}
```



---

archive/issue_events_171208.json:
```json
{
    "actor": "https://github.com/ppurka",
    "created_at": "2012-12-09T07:13:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13794",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13794#event-171208"
}
```



---

archive/issue_events_171209.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-12-17T09:40:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13794",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13794#event-171209"
}
```



---

archive/issue_events_171210.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-12-17T09:40:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/13794",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13794#event-171210"
}
```



---

archive/issue_comments_164890.json:
```json
{
    "body": "Merged: **sage-5.5.rc1**",
    "created_at": "2012-12-17T09:40:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13794#issuecomment-164890",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.5.rc1**
