# Issue 13355: doctest proper handling of domain in evalf functions

archive/issues_013183.json:
```json
{
    "assignees": [
        "https://github.com/burcin"
    ],
    "body": "<div id=\"comment:0\"></div>\n\nPrevious description of ticket:\n\n---\nPlotting currently fails when plotting a symbolic function that evaluates to complex values:\n\n```\nsage: def evalf_func(self,x,parent=None):\n....:     return parent(I*x) if parent!=None else I*x\n....: \nsage: f = function('f', evalf_func=evalf_func)\nsage: plot(abs(f(x)),0,5)\nverbose 0 (2392: plot.py, generate_plot_points) WARNING: When plotting, failed to evaluate function at 199 points.\nverbose 0 (2392: plot.py, generate_plot_points) Last error message: 'unable to simplify to float approximation'\n```\nThis is because `plot` uses `fast_float`, and `fast_float` cannot deal with the intermediate complex value.\n\nThe attached patch first changes these things:\n\n* it adds a method to `class Function` that allows one to see what output range is to be expected for a given input range. By default, it will return a complex field.\n* it overrides this method for builtin functions, which return floats for float input\n* this is then used by `fast_float` to throw an exception if complex values are to be expected\n\nThis exception will cause `plot` to fall back to `fast_callable` instead of `fast_float`. However, `fast_callable` needs patching too:\n\n* it now uses the `_evalf_` method when available instead of just `__call__`. Otherwise, `plot` will try to coerce the result to `float`, which also cannot deal with complex intermediate values.\n\nAn alternative to this step would be to fix `float` coercion, which I haven't looked into.\n\nCC:  @kcrisman @eviatarbach\n\nComponent: **symbolics**\n\nKeywords: **evalf, fast_callable**\n\nAuthor: **Timo Kluck**\n\nBranch/Commit: **[`65675e8`](https://github.com/sagemath/sagetrac-mirror/commit/65675e8384d489cd8c906cfa56be0c356334320f)**\n\nReviewer: **Ralf Stephan**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/13355_\n\n",
    "closed_at": "2014-05-15T17:18:30Z",
    "created_at": "2012-08-09T12:36:16Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "doctest proper handling of domain in evalf functions",
    "type": "issue",
    "updated_at": "2014-05-15T17:18:30Z",
    "url": "https://github.com/sagemath/sage/issues/13355",
    "user": "https://github.com/tkluck"
}
```
<div id="comment:0"></div>

Previous description of ticket:

---
Plotting currently fails when plotting a symbolic function that evaluates to complex values:

```
sage: def evalf_func(self,x,parent=None):
....:     return parent(I*x) if parent!=None else I*x
....: 
sage: f = function('f', evalf_func=evalf_func)
sage: plot(abs(f(x)),0,5)
verbose 0 (2392: plot.py, generate_plot_points) WARNING: When plotting, failed to evaluate function at 199 points.
verbose 0 (2392: plot.py, generate_plot_points) Last error message: 'unable to simplify to float approximation'
```
This is because `plot` uses `fast_float`, and `fast_float` cannot deal with the intermediate complex value.

The attached patch first changes these things:

* it adds a method to `class Function` that allows one to see what output range is to be expected for a given input range. By default, it will return a complex field.
* it overrides this method for builtin functions, which return floats for float input
* this is then used by `fast_float` to throw an exception if complex values are to be expected

This exception will cause `plot` to fall back to `fast_callable` instead of `fast_float`. However, `fast_callable` needs patching too:

* it now uses the `_evalf_` method when available instead of just `__call__`. Otherwise, `plot` will try to coerce the result to `float`, which also cannot deal with complex intermediate values.

An alternative to this step would be to fix `float` coercion, which I haven't looked into.

CC:  @kcrisman @eviatarbach

Component: **symbolics**

Keywords: **evalf, fast_callable**

Author: **Timo Kluck**

Branch/Commit: **[`65675e8`](https://github.com/sagemath/sagetrac-mirror/commit/65675e8384d489cd8c906cfa56be0c356334320f)**

Reviewer: **Ralf Stephan**

_Issue created by migration from https://trac.sagemath.org/ticket/13355_





---

archive/issue_events_184601.json:
```json
{
    "actor": "https://github.com/tkluck",
    "created_at": "2012-08-09T12:36:16Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13355#event-184601"
}
```



---

archive/issue_events_184602.json:
```json
{
    "actor": "https://github.com/tkluck",
    "created_at": "2012-08-09T12:36:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
    "label_color": "0000ff",
    "label_name": "c: symbolics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13355#event-184602"
}
```



---

archive/issue_events_184603.json:
```json
{
    "actor": "https://github.com/tkluck",
    "created_at": "2012-08-09T12:36:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13355#event-184603"
}
```



---

archive/issue_events_184604.json:
```json
{
    "actor": "https://github.com/tkluck",
    "created_at": "2012-08-09T12:36:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13355#event-184604"
}
```



---

archive/issue_events_184605.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2012-08-09T12:36:16Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "subject": "https://github.com/tkluck",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13355#event-184605"
}
```



---

archive/issue_comments_154954.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nAttachment: **[plot_with_complex_intermediates.patch.gz](https://github.com/sagemath/sage/files/ticket13355/plot_with_complex_intermediates.patch.gz)**",
    "created_at": "2012-08-09T12:37:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13355#issuecomment-154954",
    "user": "https://github.com/tkluck"
}
```

<div id="comment:1" align="right">comment:1</div>

Attachment: **[plot_with_complex_intermediates.patch.gz](https://github.com/sagemath/sage/files/ticket13355/plot_with_complex_intermediates.patch.gz)**



---

archive/issue_events_184606.json:
```json
{
    "actor": "https://github.com/tkluck",
    "created_at": "2012-08-09T12:37:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13355#event-184606"
}
```



---

archive/issue_comments_154955.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,15 +1,14 @@\n Plotting currently fails when plotting a symbolic function that evaluates to complex values:\n \n ```\n-sage: def evalf_func(self,x,parent):\n-....:     return parent(I*x)\n+sage: def evalf_func(self,x,parent=None):\n+....:     return parent(I*x) if parent!=None else I*x\n ....: \n sage: f = function('f', evalf_func=evalf_func)\n sage: plot(abs(f(x)),0,5)\n verbose 0 (2392: plot.py, generate_plot_points) WARNING: When plotting, failed to evaluate function at 199 points.\n verbose 0 (2392: plot.py, generate_plot_points) Last error message: 'unable to simplify to float approximation'\n ```\n-\n This is because `plot` uses `fast_float`, and `fast_float` cannot deal with the intermediate complex value.\n \n The attached patch first changes these things:\n``````\n",
    "created_at": "2012-08-09T12:55:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13355#issuecomment-154955",
    "user": "https://github.com/tkluck"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,15 +1,14 @@
 Plotting currently fails when plotting a symbolic function that evaluates to complex values:
 
 ```
-sage: def evalf_func(self,x,parent):
-....:     return parent(I*x)
+sage: def evalf_func(self,x,parent=None):
+....:     return parent(I*x) if parent!=None else I*x
 ....: 
 sage: f = function('f', evalf_func=evalf_func)
 sage: plot(abs(f(x)),0,5)
 verbose 0 (2392: plot.py, generate_plot_points) WARNING: When plotting, failed to evaluate function at 199 points.
 verbose 0 (2392: plot.py, generate_plot_points) Last error message: 'unable to simplify to float approximation'
 ```
-
 This is because `plot` uses `fast_float`, and `fast_float` cannot deal with the intermediate complex value.
 
 The attached patch first changes these things:
``````




---

archive/issue_comments_154956.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nThere's some issues with the patch as it is, please wait with reviewing.",
    "created_at": "2012-08-09T13:22:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13355#issuecomment-154956",
    "user": "https://github.com/tkluck"
}
```

<div id="comment:3" align="right">comment:3</div>

There's some issues with the patch as it is, please wait with reviewing.



---

archive/issue_events_184607.json:
```json
{
    "actor": "https://github.com/tkluck",
    "created_at": "2012-08-09T13:22:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13355#event-184607"
}
```



---

archive/issue_events_184608.json:
```json
{
    "actor": "https://github.com/tkluck",
    "created_at": "2012-08-09T13:22:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13355#event-184608"
}
```



---

archive/issue_events_184609.json:
```json
{
    "actor": "https://github.com/tkluck",
    "created_at": "2012-08-09T14:12:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13355#event-184609"
}
```



---

archive/issue_events_184610.json:
```json
{
    "actor": "https://github.com/tkluck",
    "created_at": "2012-08-09T14:12:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13355#event-184610"
}
```



---

archive/issue_comments_154957.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nAttachment: **[plot_with_complex_intermediates_002.patch.gz](https://github.com/sagemath/sage/files/ticket13355/plot_with_complex_intermediates_002.patch.gz)**\n\nThe _002.patch solves the issues I mentioned. Setting status back to \"needs review\".",
    "created_at": "2012-08-09T14:12:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13355#issuecomment-154957",
    "user": "https://github.com/tkluck"
}
```

<div id="comment:4" align="right">comment:4</div>

Attachment: **[plot_with_complex_intermediates_002.patch.gz](https://github.com/sagemath/sage/files/ticket13355/plot_with_complex_intermediates_002.patch.gz)**

The _002.patch solves the issues I mentioned. Setting status back to "needs review".



---

archive/issue_comments_154958.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nAdded an attachment containing the two patches together, with a proper filename containing the trac number.",
    "created_at": "2012-08-09T14:58:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13355#issuecomment-154958",
    "user": "https://github.com/tkluck"
}
```

<div id="comment:5" align="right">comment:5</div>

Added an attachment containing the two patches together, with a proper filename containing the trac number.



---

archive/issue_comments_154959.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nfor the bot:\n\napply trac_13355_plot_with_complex_intermediates.patch",
    "created_at": "2013-05-24T09:38:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13355#issuecomment-154959",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:6" align="right">comment:6</div>

for the bot:

apply trac_13355_plot_with_complex_intermediates.patch



---

archive/issue_comments_154960.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\none failing doctest, see bot report",
    "created_at": "2013-05-24T17:21:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13355#issuecomment-154960",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:7" align="right">comment:7</div>

one failing doctest, see bot report



---

archive/issue_events_184611.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2013-05-24T17:21:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13355#event-184611"
}
```



---

archive/issue_events_184612.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2013-05-24T17:21:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13355#event-184612"
}
```



---

archive/issue_comments_154961.json:
```json
{
    "body": "Work Issues: **doctest**",
    "created_at": "2013-05-24T17:21:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13355#issuecomment-154961",
    "user": "https://github.com/fchapoton"
}
```

Work Issues: **doctest**



---

archive/issue_comments_154962.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nAttachment: **[trac_13355_plot_with_complex_intermediates.patch.gz](https://github.com/sagemath/sage/files/ticket13355/trac_13355_plot_with_complex_intermediates.patch.gz)**\n\nThis should fix the doctest problem.\n\nApply trac_13355_plot_with_complex_intermediates.patch",
    "created_at": "2013-07-02T11:29:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13355#issuecomment-154962",
    "user": "https://github.com/tkluck"
}
```

<div id="comment:8" align="right">comment:8</div>

Attachment: **[trac_13355_plot_with_complex_intermediates.patch.gz](https://github.com/sagemath/sage/files/ticket13355/trac_13355_plot_with_complex_intermediates.patch.gz)**

This should fix the doctest problem.

Apply trac_13355_plot_with_complex_intermediates.patch



---

archive/issue_comments_154963.json:
```json
{
    "body": "Changed work issues from **doctest** to none",
    "created_at": "2013-07-02T11:29:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13355#issuecomment-154963",
    "user": "https://github.com/tkluck"
}
```

Changed work issues from **doctest** to none



---

archive/issue_comments_154964.json:
```json
{
    "body": "Changed keywords from **needs-review** to none",
    "created_at": "2013-07-02T11:29:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13355#issuecomment-154964",
    "user": "https://github.com/tkluck"
}
```

Changed keywords from **needs-review** to none



---

archive/issue_events_184613.json:
```json
{
    "actor": "https://github.com/tkluck",
    "created_at": "2013-07-02T11:29:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13355#event-184613"
}
```



---

archive/issue_events_184614.json:
```json
{
    "actor": "https://github.com/tkluck",
    "created_at": "2013-07-02T11:29:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13355#event-184614"
}
```



---

archive/issue_comments_154965.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nHello,\n\nI don't understand your example. You define `f` to take complex values, how do you want to plot it as a real function? Could you be more explicit about the problem you intend to solve ? What kind of picture you would like to obtain with such input?\n\nNote that for that purpose, there is yet `complex_plot`\n\n```\n{{{\nsage: def evalf_func(self,x,parent=None):\n....:     return parent(I*x) if parent!=None else I*x\n....: \nsage: f = function('f', evalf_func=evalf_func)\nsage: complex_plot(f, (-1,1), (-1,1)).show()\n}}}",
    "created_at": "2013-07-09T06:55:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13355#issuecomment-154965",
    "user": "https://github.com/videlec"
}
```

<div id="comment:9" align="right">comment:9</div>

Hello,

I don't understand your example. You define `f` to take complex values, how do you want to plot it as a real function? Could you be more explicit about the problem you intend to solve ? What kind of picture you would like to obtain with such input?

Note that for that purpose, there is yet `complex_plot`

```
{{{
sage: def evalf_func(self,x,parent=None):
....:     return parent(I*x) if parent!=None else I*x
....: 
sage: f = function('f', evalf_func=evalf_func)
sage: complex_plot(f, (-1,1), (-1,1)).show()
}}}



---

archive/issue_comments_154966.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nThanks for looking at this!\n\nReplying to [@videlec](#comment%3A9):\n> I don't understand your example. You define `f` to take complex values, how do you want to plot it as a real function?\n\nMy example was\n\n```\nsage: plot(abs(f(x)),0,5)\n```\nNote the `abs`.\n\nNow the point is that\n\n```\nsage: abs(f(3))\nabs(f(3))\nsage: float(abs(f(3)))\n3.0\n```\nboth work, but plotting doesn't:\n\n```\nplot(abs(f(x)),x,0,10)\nverbose 0 (2430: plot.py, generate_plot_points) WARNING: When plotting, failed to evaluate function at 199 points.\nverbose 0 (2430: plot.py, generate_plot_points) Last error message: 'unable to simplify to float approximation'\n```\nThe reason is that there is an optimization to use `fast_callable` for calculating plot points. The current implementation assumes that all intermediate values are floats, whereas we can still make a real plot when the argument to abs is complex. This patch should fix that.\n\nIs this any clearer? It would be great if you could test/review the patch!",
    "created_at": "2013-07-09T07:38:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13355#issuecomment-154966",
    "user": "https://github.com/tkluck"
}
```

<div id="comment:10" align="right">comment:10</div>

Thanks for looking at this!

Replying to [@videlec](#comment%3A9):
> I don't understand your example. You define `f` to take complex values, how do you want to plot it as a real function?

My example was

```
sage: plot(abs(f(x)),0,5)
```
Note the `abs`.

Now the point is that

```
sage: abs(f(3))
abs(f(3))
sage: float(abs(f(3)))
3.0
```
both work, but plotting doesn't:

```
plot(abs(f(x)),x,0,10)
verbose 0 (2430: plot.py, generate_plot_points) WARNING: When plotting, failed to evaluate function at 199 points.
verbose 0 (2430: plot.py, generate_plot_points) Last error message: 'unable to simplify to float approximation'
```
The reason is that there is an optimization to use `fast_callable` for calculating plot points. The current implementation assumes that all intermediate values are floats, whereas we can still make a real plot when the argument to abs is complex. This patch should fix that.

Is this any clearer? It would be great if you could test/review the patch!



---

archive/issue_comments_154967.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@tkluck](#comment%3A10):\n> Is this any clearer?\n\nI see. Sorry for my too fast lecture and thanks for the clarification!\n\n> It would be great if you could test/review the patch!\n\nIt was my intention ;-)",
    "created_at": "2013-07-09T07:46:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13355#issuecomment-154967",
    "user": "https://github.com/videlec"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@tkluck](#comment%3A10):
> Is this any clearer?

I see. Sorry for my too fast lecture and thanks for the clarification!

> It would be great if you could test/review the patch!

It was my intention ;-)



---

archive/issue_events_184615.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13355#event-184615"
}
```



---

archive/issue_events_184616.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13355#event-184616"
}
```



---

archive/issue_comments_154968.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\n#15030 fixes the same issue in a different (and I think simpler) way. I tried your example and it works with the #15030 patch as well.\n\nI also think this is a significant issue; you can't even plot functions like `abs(log(x))` properly. tkluck, it would be great if you could look at my patch and if you think it's a better solution review it.",
    "created_at": "2013-08-16T00:58:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13355#issuecomment-154968",
    "user": "https://github.com/eviatarbach"
}
```

<div id="comment:14" align="right">comment:14</div>

#15030 fixes the same issue in a different (and I think simpler) way. I tried your example and it works with the #15030 patch as well.

I also think this is a significant issue; you can't even plot functions like `abs(log(x))` properly. tkluck, it would be great if you could look at my patch and if you think it's a better solution review it.



---

archive/issue_events_184617.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13355#event-184617"
}
```



---

archive/issue_events_184618.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13355#event-184618"
}
```



---

archive/issue_events_184619.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-04-03T09:14:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13355#event-184619"
}
```



---

archive/issue_events_184620.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-04-03T09:14:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13355#event-184620"
}
```



---

archive/issue_comments_154969.json:
```json
{
    "body": "Work Issues: **compare patch with #15030**",
    "created_at": "2014-04-03T09:14:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13355#issuecomment-154969",
    "user": "https://github.com/rwst"
}
```

Work Issues: **compare patch with #15030**



---

archive/issue_comments_154970.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nNote that #15030 was apparently merged.\n\nAlso, anyone know how this impacts 3d plots?",
    "created_at": "2014-04-21T13:36:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13355#issuecomment-154970",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:17" align="right">comment:17</div>

Note that #15030 was apparently merged.

Also, anyone know how this impacts 3d plots?



---

archive/issue_events_184621.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-04-21T13:41:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13355#event-184621"
}
```



---

archive/issue_events_184622.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-04-21T13:41:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13355#event-184622"
}
```



---

archive/issue_events_184623.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-04-21T13:41:18Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13355#event-184623"
}
```



---

archive/issue_comments_154971.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nOne thing that could be done here is if there are any significant/useful examples on this ticket that weren't added in #15030, they could be added here...",
    "created_at": "2014-04-21T16:04:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13355#issuecomment-154971",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:19" align="right">comment:19</div>

One thing that could be done here is if there are any significant/useful examples on this ticket that weren't added in #15030, they could be added here...



---

archive/issue_comments_154972.json:
```json
{
    "body": "Branch: **[u/rws/plot_fails_if_a_function_implicitly_needs_complex_intermediate_values](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/plot_fails_if_a_function_implicitly_needs_complex_intermediate_values)**",
    "created_at": "2014-05-13T14:04:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13355#issuecomment-154972",
    "user": "https://github.com/rwst"
}
```

Branch: **[u/rws/plot_fails_if_a_function_implicitly_needs_complex_intermediate_values](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/plot_fails_if_a_function_implicitly_needs_complex_intermediate_values)**



---

archive/issue_comments_154973.json:
```json
{
    "body": "Commit: **[`23e82c2`](https://github.com/sagemath/sagetrac-mirror/commit/23e82c2ed92225aed5987f3fb22c576860237858)**",
    "created_at": "2014-05-13T14:11:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13355#issuecomment-154973",
    "user": "https://github.com/rwst"
}
```

Commit: **[`23e82c2`](https://github.com/sagemath/sagetrac-mirror/commit/23e82c2ed92225aed5987f3fb22c576860237858)**



---

archive/issue_comments_154974.json:
```json
{
    "body": "Changed keywords from none to **evalf, fast_callable**",
    "created_at": "2014-05-13T14:11:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13355#issuecomment-154974",
    "user": "https://github.com/rwst"
}
```

Changed keywords from none to **evalf, fast_callable**



---

archive/issue_events_184624.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-05-13T14:11:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13355#event-184624"
}
```



---

archive/issue_events_184625.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-05-13T14:11:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13355#event-184625"
}
```



---

archive/issue_events_184626.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-05-13T14:11:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13355#event-184626"
}
```



---

archive/issue_comments_154975.json:
```json
{
    "body": "Author: **Timo Kluck**",
    "created_at": "2014-05-13T14:11:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13355#issuecomment-154975",
    "user": "https://github.com/rwst"
}
```

Author: **Timo Kluck**



---

archive/issue_events_184627.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-05-13T14:11:47Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "title_is": "doctest proper handling of domain in evalf functions",
    "title_was": "Plot fails if a function implicitly needs complex intermediate values",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13355#event-184627"
}
```



---

archive/issue_comments_154976.json:
```json
{
    "body": "Reviewer: **Ralf Stephan**",
    "created_at": "2014-05-13T14:11:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13355#issuecomment-154976",
    "user": "https://github.com/rwst"
}
```

Reviewer: **Ralf Stephan**



---

archive/issue_comments_154977.json:
```json
{
    "body": "Changed work issues from **compare patch with #15030** to none",
    "created_at": "2014-05-13T14:11:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13355#issuecomment-154977",
    "user": "https://github.com/rwst"
}
```

Changed work issues from **compare patch with #15030** to none



---

archive/issue_comments_154978.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,6 @@\n+Previous description of ticket:\n+\n+---\n Plotting currently fails when plotting a symbolic function that evaluates to complex values:\n \n ```\n``````\n",
    "created_at": "2014-05-13T14:11:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13355#issuecomment-154978",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,6 @@
+Previous description of ticket:
+
+---
 Plotting currently fails when plotting a symbolic function that evaluates to complex values:
 
 ```
``````




---

archive/issue_comments_154979.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nI have extracted the doctests from the patch and changed the description accordingly. However, some doctests fail.\n\n```\nsage -t --long src/sage/ext/fast_callable.pyx\n**********************************************************************\nFile \"src/sage/ext/fast_callable.pyx\", line 397, in sage.ext.fast_callable.?\nFailed example:\n    fc(3,4)\nExpected:\n    12\nGot:\n    f(3, 4)\n**********************************************************************\nFile \"src/sage/ext/fast_callable.pyx\", line 405, in sage.ext.fast_callable.?\nFailed example:\n    fc(3,4)\nExpected:\n    12*I\nGot:\n    g(3, 4)\n**********************************************************************\n1 item had failures:\n   2 of  47 in sage.ext.fast_callable.?\n    [586 tests, 2 failures, 3.54 s]\n----------------------------------------------------------------------\nsage -t --long src/sage/ext/fast_callable.pyx  # 2 doctests failed\n----------------------------------------------------------------------\n```\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/23e82c2ed92225aed5987f3fb22c576860237858\"><code>23e82c2</code></a></td><td><code>13355: handle domain properly in evalf functions (doctests)</code></td></tr></table>\n",
    "created_at": "2014-05-13T14:11:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13355#issuecomment-154979",
    "user": "https://github.com/rwst"
}
```

<div id="comment:21" align="right">comment:21</div>

I have extracted the doctests from the patch and changed the description accordingly. However, some doctests fail.

```
sage -t --long src/sage/ext/fast_callable.pyx
**********************************************************************
File "src/sage/ext/fast_callable.pyx", line 397, in sage.ext.fast_callable.?
Failed example:
    fc(3,4)
Expected:
    12
Got:
    f(3, 4)
**********************************************************************
File "src/sage/ext/fast_callable.pyx", line 405, in sage.ext.fast_callable.?
Failed example:
    fc(3,4)
Expected:
    12*I
Got:
    g(3, 4)
**********************************************************************
1 item had failures:
   2 of  47 in sage.ext.fast_callable.?
    [586 tests, 2 failures, 3.54 s]
----------------------------------------------------------------------
sage -t --long src/sage/ext/fast_callable.pyx  # 2 doctests failed
----------------------------------------------------------------------
```

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/23e82c2ed92225aed5987f3fb22c576860237858"><code>23e82c2</code></a></td><td><code>13355: handle domain properly in evalf functions (doctests)</code></td></tr></table>




---

archive/issue_comments_154980.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nHmm, these doctests look strange to me anyway.\n\n```\nparent!=None\n```\nshould be \n\n```\nparent is not None\n```\nI think.  The failures are actually probably features, not bugs, since `f` and `g` are symbolic functions, which are now not automatically evaluated, if that makes sense...",
    "created_at": "2014-05-13T14:47:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13355#issuecomment-154980",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:22" align="right">comment:22</div>

Hmm, these doctests look strange to me anyway.

```
parent!=None
```
should be 

```
parent is not None
```
I think.  The failures are actually probably features, not bugs, since `f` and `g` are symbolic functions, which are now not automatically evaluated, if that makes sense...



---

archive/issue_comments_154981.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nYes. So change the doctests or abandon them?",
    "created_at": "2014-05-15T06:49:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13355#issuecomment-154981",
    "user": "https://github.com/rwst"
}
```

<div id="comment:23" align="right">comment:23</div>

Yes. So change the doctests or abandon them?



---

archive/issue_comments_154982.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nIf you agree that this is proper behavior, then we might as well change them.  Also, the plot one is definitely useful.",
    "created_at": "2014-05-15T13:07:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13355#issuecomment-154982",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:24" align="right">comment:24</div>

If you agree that this is proper behavior, then we might as well change them.  Also, the plot one is definitely useful.



---

archive/issue_comments_154983.json:
```json
{
    "body": "<div id=\"comment:25\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/66aa5093906ec39e27dd60e283ff44cc523ef983\"><code>66aa509</code></a></td><td><code>Merge branch 'develop' into t/13355/plot_fails_if_a_function_implicitly_needs_complex_intermediate_values</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/65675e8384d489cd8c906cfa56be0c356334320f\"><code>65675e8</code></a></td><td><code>13355 reviewer's patch: fix doctests, typos, PEP8</code></td></tr></table>\n",
    "created_at": "2014-05-15T13:31:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13355#issuecomment-154983",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:25"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/66aa5093906ec39e27dd60e283ff44cc523ef983"><code>66aa509</code></a></td><td><code>Merge branch 'develop' into t/13355/plot_fails_if_a_function_implicitly_needs_complex_intermediate_values</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/65675e8384d489cd8c906cfa56be0c356334320f"><code>65675e8</code></a></td><td><code>13355 reviewer's patch: fix doctests, typos, PEP8</code></td></tr></table>




---

archive/issue_comments_154984.json:
```json
{
    "body": "Changed commit from **[`23e82c2`](https://github.com/sagemath/sagetrac-mirror/commit/23e82c2ed92225aed5987f3fb22c576860237858)** to **[`65675e8`](https://github.com/sagemath/sagetrac-mirror/commit/65675e8384d489cd8c906cfa56be0c356334320f)**",
    "created_at": "2014-05-15T13:31:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13355#issuecomment-154984",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`23e82c2`](https://github.com/sagemath/sagetrac-mirror/commit/23e82c2ed92225aed5987f3fb22c576860237858)** to **[`65675e8`](https://github.com/sagemath/sagetrac-mirror/commit/65675e8384d489cd8c906cfa56be0c356334320f)**



---

archive/issue_events_184628.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-05-15T13:45:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13355#event-184628"
}
```



---

archive/issue_events_184629.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-05-15T13:45:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13355#event-184629"
}
```



---

archive/issue_comments_154985.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nBut then, somehow we want `12` or `12*I` as a result too, but for this the function needs a `simplify()` member like `hypergeometric` (#2516) has.",
    "created_at": "2014-05-15T13:45:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13355#issuecomment-154985",
    "user": "https://github.com/rwst"
}
```

<div id="comment:26" align="right">comment:26</div>

But then, somehow we want `12` or `12*I` as a result too, but for this the function needs a `simplify()` member like `hypergeometric` (#2516) has.



---

archive/issue_comments_154986.json:
```json
{
    "body": "Changed branch from **[u/rws/plot_fails_if_a_function_implicitly_needs_complex_intermediate_values](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/plot_fails_if_a_function_implicitly_needs_complex_intermediate_values)** to **[`65675e8`](https://github.com/sagemath/sagetrac-mirror/commit/65675e8384d489cd8c906cfa56be0c356334320f)**",
    "created_at": "2014-05-15T17:18:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13355#issuecomment-154986",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/rws/plot_fails_if_a_function_implicitly_needs_complex_intermediate_values](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/plot_fails_if_a_function_implicitly_needs_complex_intermediate_values)** to **[`65675e8`](https://github.com/sagemath/sagetrac-mirror/commit/65675e8384d489cd8c906cfa56be0c356334320f)**



---

archive/issue_events_184630.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-05-15T17:18:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13355#event-184630"
}
```



---

archive/issue_events_184631.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "a023185a5349bcc77d23336652ccda9e394bbd77",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-05-15T17:18:30Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/13355",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13355#event-184631"
}
```
