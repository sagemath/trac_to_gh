# Issue 13718: Another incorrect Maxima integral

archive/issues_013514.json:
```json
{
    "assignees": [],
    "body": "This is already reported upstream at [this bug tracker ticket](https://sourceforge.net/tracker/?func=detail&aid=3587932&group_id=4933&atid=104933).\n\nThe original report from a summer PREP user:\n\n```\nintegral((2/3)*x^(5/2)*(x+1)^.5, x,0,1)\n\nI got the answer -0.888888889*sqrt(2)\n\nintegral((2/3)*x^(5/2)*(x+1)^(1/2), x,0,1)\n\nAnd the answer is\n\n\n-5/192*I*pi + 61/288*sqrt(2) + 5/192*log(-sqrt(2) + 1) -\n5/192*log(sqrt(2) + 1)\n```\n\nAssignee: **@burcin**\n\nKeywords: **integral**\n\nUpstream: **Reported upstream. No feedback yet.**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/13718_\n\n",
    "created_at": "2012-11-16T15:53:27Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20calculus",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Another incorrect Maxima integral",
    "type": "issue",
    "updated_at": "2022-12-29T01:28:25Z",
    "url": "https://github.com/sagemath/sage/issues/13718",
    "user": "https://github.com/kcrisman"
}
```
This is already reported upstream at [this bug tracker ticket](https://sourceforge.net/tracker/?func=detail&aid=3587932&group_id=4933&atid=104933).

The original report from a summer PREP user:

```
integral((2/3)*x^(5/2)*(x+1)^.5, x,0,1)

I got the answer -0.888888889*sqrt(2)

integral((2/3)*x^(5/2)*(x+1)^(1/2), x,0,1)

And the answer is


-5/192*I*pi + 61/288*sqrt(2) + 5/192*log(-sqrt(2) + 1) -
5/192*log(sqrt(2) + 1)
```

Assignee: **@burcin**

Keywords: **integral**

Upstream: **Reported upstream. No feedback yet.**

_Issue created by migration from https://trac.sagemath.org/ticket/13718_





---

archive/issue_events_176254.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-11-16T15:53:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13718",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13718#event-176254"
}
```



---

archive/issue_events_176255.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-11-16T15:53:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13718",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20calculus",
    "label_color": "0000ff",
    "label_name": "component: calculus",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13718#event-176255"
}
```



---

archive/issue_events_176256.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-11-16T15:53:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13718",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13718#event-176256"
}
```



---

archive/issue_events_176257.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-11-16T15:53:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13718",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13718#event-176257"
}
```



---

archive/issue_comments_163566.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\n#11493 may be related.",
    "created_at": "2012-11-16T15:55:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13718#issuecomment-163566",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:1'>Comment 1:</a>
#11493 may be related.



---

archive/issue_events_176258.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13718",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13718#event-176258"
}
```



---

archive/issue_events_176259.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13718",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13718#event-176259"
}
```



---

archive/issue_events_176260.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13718",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13718#event-176260"
}
```



---

archive/issue_events_176261.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13718",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13718#event-176261"
}
```



---

archive/issue_events_176262.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13718",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13718#event-176262"
}
```



---

archive/issue_events_176263.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13718",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13718#event-176263"
}
```



---

archive/issue_events_176264.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13718",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13718#event-176264"
}
```



---

archive/issue_events_176265.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13718",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13718#event-176265"
}
```



---

archive/issue_comments_163567.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nThis prompts me to see what happens with alternative integration interfaces.\n\nTry with SymPy:\n\n```\nsage: sage: integral((2/3)*x^(5/2)*(x+1)^.5, x,0,1, algorithm='sympy')   \n# no output at all after ~10mins\n```\n\nTry with giac:\n\n```\nsage: giac('integrate((2/3)*x^(5/2)*sqrt(x+1), x,0,1)')   # correct and almost instantaneous\n1/288*(sqrt(2)*61+15*ln(sqrt(2)-1))\nsage: (1/288*(sqrt(2)*61+15*ln(sqrt(2)-1))).n()\n0.253633414928700\nsage: (-5/192*I*pi + 61/288*sqrt(2) + 5/192*log(-sqrt(2) + 1) -\n....: 5/192*log(sqrt(2) + 1)).n()    # compare with formula given by OP\n0.253633414928700\n```",
    "created_at": "2017-04-09T10:27:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13718#issuecomment-163567",
    "user": "https://github.com/mforets"
}
```

<a id='comment:6'>Comment 6:</a>
This prompts me to see what happens with alternative integration interfaces.

Try with SymPy:

```
sage: sage: integral((2/3)*x^(5/2)*(x+1)^.5, x,0,1, algorithm='sympy')   
# no output at all after ~10mins
```

Try with giac:

```
sage: giac('integrate((2/3)*x^(5/2)*sqrt(x+1), x,0,1)')   # correct and almost instantaneous
1/288*(sqrt(2)*61+15*ln(sqrt(2)-1))
sage: (1/288*(sqrt(2)*61+15*ln(sqrt(2)-1))).n()
0.253633414928700
sage: (-5/192*I*pi + 61/288*sqrt(2) + 5/192*log(-sqrt(2) + 1) -
....: 5/192*log(sqrt(2) + 1)).n()    # compare with formula given by OP
0.253633414928700
```



---

archive/issue_comments_163568.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nfixed at Sage v8.0.beta3:\n\n```\nsage: integrate((2/3)*x^(5/2)*sqrt(x+1), x,0,1, algorithm='maxima')\n-5/192*I*pi + 61/288*sqrt(2) - 5/192*log(sqrt(2) + 1) + 5/192*log(-sqrt(2) + 1)\nsage: _.n()\n0.253633414928700\n```",
    "created_at": "2017-04-28T05:27:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13718#issuecomment-163568",
    "user": "https://github.com/mforets"
}
```

<a id='comment:7'>Comment 7:</a>
fixed at Sage v8.0.beta3:

```
sage: integrate((2/3)*x^(5/2)*sqrt(x+1), x,0,1, algorithm='maxima')
-5/192*I*pi + 61/288*sqrt(2) - 5/192*log(sqrt(2) + 1) + 5/192*log(-sqrt(2) + 1)
sage: _.n()
0.253633414928700
```



---

archive/issue_comments_163569.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nnot really.. the problem is with the `0.5`:\n\n```\n\nsage: integral((2/3)*x^(5/2)*(x+1)^.5, x,0,1, algorithm='maxima') # wrong\n-0.8888888888888888*sqrt(2)\nsage: integral((2/3)*x^(5/2)*(x+1)^.5, x,0,1, algorithm='giac') # ok\n0.253633414929\nsage: integral((2/3)*x^(5/2)*(x+1)^.5, x,0,1, algorithm='sympy') # timeout\n```",
    "created_at": "2017-04-28T05:35:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13718#issuecomment-163569",
    "user": "https://github.com/mforets"
}
```

<a id='comment:8'>Comment 8:</a>
not really.. the problem is with the `0.5`:

```

sage: integral((2/3)*x^(5/2)*(x+1)^.5, x,0,1, algorithm='maxima') # wrong
-0.8888888888888888*sqrt(2)
sage: integral((2/3)*x^(5/2)*(x+1)^.5, x,0,1, algorithm='giac') # ok
0.253633414929
sage: integral((2/3)*x^(5/2)*(x+1)^.5, x,0,1, algorithm='sympy') # timeout
```



---

archive/issue_comments_163570.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nThat is user error. No one can expect to get correct integrals from expressions containing floating point numbers. It is not supported and maybe Sage should throw an exception in these cases anyway. If you agree, Karl-Dieter, I'll open a ticket for just this.",
    "created_at": "2017-04-28T06:12:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13718#issuecomment-163570",
    "user": "https://github.com/rwst"
}
```

<a id='comment:9'>Comment 9:</a>
That is user error. No one can expect to get correct integrals from expressions containing floating point numbers. It is not supported and maybe Sage should throw an exception in these cases anyway. If you agree, Karl-Dieter, I'll open a ticket for just this.



---

archive/issue_comments_163571.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nTogether with #22894 and `ex._convert(QQ)` one could even provide a default option that automatically converts `0.5` to `1/2` before integration.",
    "created_at": "2017-04-28T08:12:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13718#issuecomment-163571",
    "user": "https://github.com/rwst"
}
```

<a id='comment:10'>Comment 10:</a>
Together with #22894 and `ex._convert(QQ)` one could even provide a default option that automatically converts `0.5` to `1/2` before integration.



---

archive/issue_comments_163572.json:
```json
{
    "body": "Changed keywords from **** to **integral**",
    "created_at": "2022-04-02T08:00:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13718#issuecomment-163572",
    "user": "https://github.com/fchapoton"
}
```

Changed keywords from **** to **integral**



---

archive/issue_events_176266.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-29T01:28:25Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13718",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13718#event-176266"
}
```
