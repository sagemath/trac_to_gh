# Issue 13123: Move SAGE_DATA to SAGE_LOCAL/share

archive/issues_012951.json:
```json
{
    "body": "This is part of the new layout for git. Since it is not too difficult to separate off this change, I decided making this a distinct ticket was a good idea. `SAGE_EXTCODE` will be moved to `SAGE_ROOT/devel/ext`, and currently `SAGE_LOCAL/share/sage/ext` links to this.\n\nNew SPKGS:\n* [http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg](http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg)\n* [http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg](http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg)\n* [http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg](http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg)\n* [http://wstein.org/home/ohanar/spkgs/conway_polynomials-0.3.spkg](http://wstein.org/home/ohanar/spkgs/conway_polynomials-0.3.spkg)\n\nInstallation Steps:\n* Add new spkgs\n* Apply [attachment:trac13123_library.patch] to the library repo\n* Apply [attachment:trac13123_root.patch] and [attachment:13123_root_review.patch] to the root repo\n* Apply #13457 and [attachment:trac13123_scripts.patch] and [attachment:13123_bdist.patch] to the scripts repo\n* Apply [attachment:trac13123_extcode.patch] and [attachment:13123_extcode_review.patch] to the extcode repo\n\n**Assignee:** tdb\n\n**CC:**  @kini @jdemeyer @robertwb @burcin\n\n**Reviewer:** Fran\u00e7ois Bissey, Jeroen Demeyer\n\n**Author:** R. Andrew Ohana,  Jeroen Demeyer\n\n**Merged:** sage-5.4.beta2\n\n**Dependencies:** #13457\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/13123\n\n",
    "closed_at": "2012-09-18T06:41:19Z",
    "created_at": "2012-06-16T08:53:14Z",
    "labels": [
        "component: relocation"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.4",
    "title": "Move SAGE_DATA to SAGE_LOCAL/share",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13123",
    "user": "https://github.com/ohanar"
}
```
This is part of the new layout for git. Since it is not too difficult to separate off this change, I decided making this a distinct ticket was a good idea. `SAGE_EXTCODE` will be moved to `SAGE_ROOT/devel/ext`, and currently `SAGE_LOCAL/share/sage/ext` links to this.

New SPKGS:
* [http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg](http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg)
* [http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg](http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg)
* [http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg](http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg)
* [http://wstein.org/home/ohanar/spkgs/conway_polynomials-0.3.spkg](http://wstein.org/home/ohanar/spkgs/conway_polynomials-0.3.spkg)

Installation Steps:
* Add new spkgs
* Apply [attachment:trac13123_library.patch] to the library repo
* Apply [attachment:trac13123_root.patch] and [attachment:13123_root_review.patch] to the root repo
* Apply #13457 and [attachment:trac13123_scripts.patch] and [attachment:13123_bdist.patch] to the scripts repo
* Apply [attachment:trac13123_extcode.patch] and [attachment:13123_extcode_review.patch] to the extcode repo

**Assignee:** tdb

**CC:**  @kini @jdemeyer @robertwb @burcin

**Reviewer:** Fran√ßois Bissey, Jeroen Demeyer

**Author:** R. Andrew Ohana,  Jeroen Demeyer

**Merged:** sage-5.4.beta2

**Dependencies:** #13457

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/13123





---

archive/issue_comments_199139.json:
```json
{
    "body": "**Dependencies:** #12205",
    "created_at": "2012-06-18T05:46:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199139",
    "user": "https://github.com/ohanar"
}
```

**Dependencies:** #12205



---

archive/issue_comments_199140.json:
```json
{
    "body": "**Author:** R. Andrew Ohana",
    "created_at": "2012-06-18T05:46:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199140",
    "user": "https://github.com/ohanar"
}
```

**Author:** R. Andrew Ohana



---

archive/issue_comments_199141.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,6 @@\n-This is in preparation for the transition to git. `SAGE_EXTCODE` will be moved to `SAGE_ROOT/devel/ext`\n+This is in preparation for the transition to git. `SAGE_EXTCODE` will be moved to `SAGE_ROOT/devel/ext`.\n+\n+New SPKGS:\n+[http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg](http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg)\n+[http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg](http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg)\n+[http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg](http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg)\n``````\n",
    "created_at": "2012-06-18T06:23:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199141",
    "user": "https://github.com/ohanar"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,6 @@
-This is in preparation for the transition to git. `SAGE_EXTCODE` will be moved to `SAGE_ROOT/devel/ext`
+This is in preparation for the transition to git. `SAGE_EXTCODE` will be moved to `SAGE_ROOT/devel/ext`.
+
+New SPKGS:
+[http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg](http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg)
+[http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg](http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg)
+[http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg](http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg)
``````




---

archive/issue_comments_199142.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,6 +1,9 @@\n This is in preparation for the transition to git. `SAGE_EXTCODE` will be moved to `SAGE_ROOT/devel/ext`.\n \n New SPKGS:\n+\n [http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg](http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg)\n+\n [http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg](http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg)\n+\n [http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg](http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg)\n``````\n",
    "created_at": "2012-06-18T06:24:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199142",
    "user": "https://github.com/ohanar"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,6 +1,9 @@
 This is in preparation for the transition to git. `SAGE_EXTCODE` will be moved to `SAGE_ROOT/devel/ext`.
 
 New SPKGS:
+
 [http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg](http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg)
+
 [http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg](http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg)
+
 [http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg](http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg)
``````




---

archive/issue_comments_199143.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,9 +1,6 @@\n This is in preparation for the transition to git. `SAGE_EXTCODE` will be moved to `SAGE_ROOT/devel/ext`.\n \n New SPKGS:\n-\n-[http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg](http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg)\n-\n-[http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg](http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg)\n-\n-[http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg](http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg)\n+* [http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg](http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg)\n+* [http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg](http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg)\n+* [http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg](http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg)\n``````\n",
    "created_at": "2012-06-18T06:28:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199143",
    "user": "https://github.com/kini"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,9 +1,6 @@
 This is in preparation for the transition to git. `SAGE_EXTCODE` will be moved to `SAGE_ROOT/devel/ext`.
 
 New SPKGS:
-
-[http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg](http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg)
-
-[http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg](http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg)
-
-[http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg](http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg)
+* [http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg](http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg)
+* [http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg](http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg)
+* [http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg](http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg)
``````




---

archive/issue_comments_199144.json:
```json
{
    "body": "**Changing dependencies** from \"#12205\" to \"\".",
    "created_at": "2012-06-19T04:44:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199144",
    "user": "https://github.com/ohanar"
}
```

**Changing dependencies** from "#12205" to "".



---

archive/issue_comments_199145.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,3 +4,4 @@\n * [http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg](http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg)\n * [http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg](http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg)\n * [http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg](http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg)\n+* [http://wstein.org/home/ohanar/spkgs/conway_polynomials-0.3.spkg](http://wstein.org/home/ohanar/spkgs/conway_polynomials-0.3.spkg)\n``````\n",
    "created_at": "2012-06-19T04:44:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199145",
    "user": "https://github.com/ohanar"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,3 +4,4 @@
 * [http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg](http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg)
 * [http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg](http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg)
 * [http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg](http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg)
+* [http://wstein.org/home/ohanar/spkgs/conway_polynomials-0.3.spkg](http://wstein.org/home/ohanar/spkgs/conway_polynomials-0.3.spkg)
``````




---

archive/issue_comments_199146.json:
```json
{
    "body": "<a id='comment:5'></a>\nOk, everything should work now.",
    "created_at": "2012-06-19T04:44:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199146",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:5'></a>
Ok, everything should work now.



---

archive/issue_comments_199147.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2012-06-19T04:44:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199147",
    "user": "https://github.com/ohanar"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_199148.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-This is in preparation for the transition to git. `SAGE_EXTCODE` will be moved to `SAGE_ROOT/devel/ext`.\n+This is part of the new layout for git. Since it is not too difficult to separate off this change, I decided making this a distinct ticket was a good idea. `SAGE_EXTCODE` will be moved to `SAGE_ROOT/devel/ext`, and currently `SAGE_LOCAL/share/sage/ext` links to this.\n \n New SPKGS:\n * [http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg](http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg)\n``````\n",
    "created_at": "2012-06-19T07:19:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199148",
    "user": "https://github.com/ohanar"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-This is in preparation for the transition to git. `SAGE_EXTCODE` will be moved to `SAGE_ROOT/devel/ext`.
+This is part of the new layout for git. Since it is not too difficult to separate off this change, I decided making this a distinct ticket was a good idea. `SAGE_EXTCODE` will be moved to `SAGE_ROOT/devel/ext`, and currently `SAGE_LOCAL/share/sage/ext` links to this.
 
 New SPKGS:
 * [http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg](http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg)
``````




---

archive/issue_comments_199149.json:
```json
{
    "body": "<a id='comment:7'></a>\nThat will cause me a lot of work in sage-on-gentoo but overall that will make my life easier in the long term. I cannot comment on trac13123_extcode.patch and trac13123_scripts.patch as I don't know the code in there all that well. But for the rest:\n* I will need to check the spkg individually for correctness but I assume it will be OK it is the easy part.\n* trac13123_library.patch : I am spotting something that I should have reported as a bug a long time ago. In sage/interfaces/gap.py GAP_STAMP is created in $SAGE_LOCAL/bin. This is a no-no if sage is installed globally and accessible by many users. That means all users would need to be able to write to $SAGE_LOCAL/bin to use gap from sage. There is no reason why GAP_STAMP has to be stored there. It should be moved to $DOT_SAGE or possibly even $GAP_DIR. There is a similar problem with qepcad but your patch doesn't touch that particular bit.",
    "created_at": "2012-06-19T11:07:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199149",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:7'></a>
That will cause me a lot of work in sage-on-gentoo but overall that will make my life easier in the long term. I cannot comment on trac13123_extcode.patch and trac13123_scripts.patch as I don't know the code in there all that well. But for the rest:
* I will need to check the spkg individually for correctness but I assume it will be OK it is the easy part.
* trac13123_library.patch : I am spotting something that I should have reported as a bug a long time ago. In sage/interfaces/gap.py GAP_STAMP is created in $SAGE_LOCAL/bin. This is a no-no if sage is installed globally and accessible by many users. That means all users would need to be able to write to $SAGE_LOCAL/bin to use gap from sage. There is no reason why GAP_STAMP has to be stored there. It should be moved to $DOT_SAGE or possibly even $GAP_DIR. There is a similar problem with qepcad but your patch doesn't touch that particular bit.



---

archive/issue_comments_199150.json:
```json
{
    "body": "**Reviewer:** Fran\u00e7ois Bissey",
    "created_at": "2012-06-19T11:07:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199150",
    "user": "https://github.com/kiwifb"
}
```

**Reviewer:** Fran√ßois Bissey



---

archive/issue_comments_199151.json:
```json
{
    "body": "<a id='comment:8'></a>\nPlease make it clear in the ticket description which patches have to be applied where.",
    "created_at": "2012-06-19T11:38:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199151",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'></a>
Please make it clear in the ticket description which patches have to be applied where.



---

archive/issue_comments_199152.json:
```json
{
    "body": "<a id='comment:9'></a>\nYou should use `cp -R` instead of `cp -r` (like it was before).\n\nYou should deal with upgrading (probably in the new extcode installer): if `SAGE_ROOT/data` exists, then move `SAGE_ROOT/data/extcode` to `SAGE_ROOT/devel/ext-main` and delete the whole directory `SAGE_ROOT/data`.",
    "created_at": "2012-06-19T11:45:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199152",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'></a>
You should use `cp -R` instead of `cp -r` (like it was before).

You should deal with upgrading (probably in the new extcode installer): if `SAGE_ROOT/data` exists, then move `SAGE_ROOT/data/extcode` to `SAGE_ROOT/devel/ext-main` and delete the whole directory `SAGE_ROOT/data`.



---

archive/issue_comments_199153.json:
```json
{
    "body": "<a id='comment:10'></a>\nWhy don't you\n\n```\nmkdir -p \"$SAGE_DATA\"\n```\nin `spkg/install`?  That's easier than doing it in the various packages.",
    "created_at": "2012-06-19T11:48:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199153",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'></a>
Why don't you

```
mkdir -p "$SAGE_DATA"
```
in `spkg/install`?  That's easier than doing it in the various packages.



---

archive/issue_comments_199154.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [fbissey](#comment%3A7):\n> * trac13123_library.patch : I am spotting something that I should have reported as a bug a long time ago. In sage/interfaces/gap.py GAP_STAMP is created in $SAGE_LOCAL/bin. This is a no-no if sage is installed globally and accessible by many users. That means all users would need to be able to write to $SAGE_LOCAL/bin to use gap from sage. There is no reason why GAP_STAMP has to be stored there. It should be moved to $DOT_SAGE or possibly even $GAP_DIR. There is a similar problem with qepcad but your patch doesn't touch that particular bit.\n \nSee #5155.",
    "created_at": "2012-06-19T11:51:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199154",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:11'></a>
Replying to [fbissey](#comment%3A7):
> * trac13123_library.patch : I am spotting something that I should have reported as a bug a long time ago. In sage/interfaces/gap.py GAP_STAMP is created in $SAGE_LOCAL/bin. This is a no-no if sage is installed globally and accessible by many users. That means all users would need to be able to write to $SAGE_LOCAL/bin to use gap from sage. There is no reason why GAP_STAMP has to be stored there. It should be moved to $DOT_SAGE or possibly even $GAP_DIR. There is a similar problem with qepcad but your patch doesn't touch that particular bit.
 
See #5155.



---

archive/issue_comments_199155.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [jdemeyer](#comment%3A10):\n> Why don't you\n> \n> ```\n> mkdir -p \"$SAGE_DATA\"\n> ```\n> in `spkg/install`?  That's easier than doing it in the various packages.\n\n\nMaybe easier, but since I was bumping the versions of these spkgs anyways for upgrading purposes, I figured I would have them take care of their own installation, rather than relying upon the build scripts.",
    "created_at": "2012-06-19T19:12:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199155",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:12'></a>
Replying to [jdemeyer](#comment%3A10):
> Why don't you
> 
> ```
> mkdir -p "$SAGE_DATA"
> ```
> in `spkg/install`?  That's easier than doing it in the various packages.


Maybe easier, but since I was bumping the versions of these spkgs anyways for upgrading purposes, I figured I would have them take care of their own installation, rather than relying upon the build scripts.



---

archive/issue_comments_199156.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [fbissey](#comment%3A7):\n> That will cause me a lot of work in sage-on-gentoo but overall that will make my life easier in the long term.\n\n\nYou should expect to see a number of these types of changes from me over the next few months. It should definitely simply things for you as the environment variables `SAGE_DATA` and `SAGE_EXTCODE` will now be globally respected in Sage.",
    "created_at": "2012-06-19T19:16:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199156",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:13'></a>
Replying to [fbissey](#comment%3A7):
> That will cause me a lot of work in sage-on-gentoo but overall that will make my life easier in the long term.


You should expect to see a number of these types of changes from me over the next few months. It should definitely simply things for you as the environment variables `SAGE_DATA` and `SAGE_EXTCODE` will now be globally respected in Sage.



---

archive/issue_comments_199157.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -5,3 +5,10 @@\n * [http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg](http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg)\n * [http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg](http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg)\n * [http://wstein.org/home/ohanar/spkgs/conway_polynomials-0.3.spkg](http://wstein.org/home/ohanar/spkgs/conway_polynomials-0.3.spkg)\n+\n+Installation Steps:\n+* Add new spkgs\n+* Apply attachment:trac13123_library.patch to the library repo\n+* Apply attachment:trac13123_root.patch to the root repo\n+* Apply attachment:trac13123_scripts.patch to the scripts repo\n+* Apply attachment:trac13123_extcode.patch to the extcode repo\n``````\n",
    "created_at": "2012-06-19T19:19:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199157",
    "user": "https://github.com/ohanar"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -5,3 +5,10 @@
 * [http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg](http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg)
 * [http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg](http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg)
 * [http://wstein.org/home/ohanar/spkgs/conway_polynomials-0.3.spkg](http://wstein.org/home/ohanar/spkgs/conway_polynomials-0.3.spkg)
+
+Installation Steps:
+* Add new spkgs
+* Apply attachment:trac13123_library.patch to the library repo
+* Apply attachment:trac13123_root.patch to the root repo
+* Apply attachment:trac13123_scripts.patch to the scripts repo
+* Apply attachment:trac13123_extcode.patch to the extcode repo
``````




---

archive/issue_comments_199158.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [jdemeyer](#comment%3A9):\n> You should use `cp -R` instead of `cp -r` (like it was before).\n> \n> You should deal with upgrading (probably in the new extcode installer): if `SAGE_ROOT/data` exists, then move `SAGE_ROOT/data/extcode` to `SAGE_ROOT/devel/ext-main` and delete the whole directory `SAGE_ROOT/data`.\n\n\nDone and done.",
    "created_at": "2012-06-19T19:25:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199158",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:15'></a>
Replying to [jdemeyer](#comment%3A9):
> You should use `cp -R` instead of `cp -r` (like it was before).
> 
> You should deal with upgrading (probably in the new extcode installer): if `SAGE_ROOT/data` exists, then move `SAGE_ROOT/data/extcode` to `SAGE_ROOT/devel/ext-main` and delete the whole directory `SAGE_ROOT/data`.


Done and done.



---

archive/issue_comments_199159.json:
```json
{
    "body": "<a id='comment:16'></a>\nShould we deal with gap_stamp in this ticket or should I add it to #5155 and try to push its review for 5.1?",
    "created_at": "2012-06-19T22:19:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199159",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:16'></a>
Should we deal with gap_stamp in this ticket or should I add it to #5155 and try to push its review for 5.1?



---

archive/issue_comments_199160.json:
```json
{
    "body": "<a id='comment:17'></a>\nReplying to [fbissey](#comment%3A16):\n> Should we deal with gap_stamp in this ticket or should I add it to #5155 and try to push its review for 5.1?\n\n\nSince I'm already touching that line, I may as well do it here. If you do end up finishing #5155 in time for 5.1, I'll have to rebase anyway :). (This is under the assumption that this ticket doesn't make it into 5.1, which I feel like is a pretty safe assumption.)",
    "created_at": "2012-06-19T22:37:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199160",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:17'></a>
Replying to [fbissey](#comment%3A16):
> Should we deal with gap_stamp in this ticket or should I add it to #5155 and try to push its review for 5.1?


Since I'm already touching that line, I may as well do it here. If you do end up finishing #5155 in time for 5.1, I'll have to rebase anyway :). (This is under the assumption that this ticket doesn't make it into 5.1, which I feel like is a pretty safe assumption.)



---

archive/issue_comments_199161.json:
```json
{
    "body": "<a id='comment:18'></a>\nThanks. Yes considering that Jeroen wants beta5 to be the last beta before rc our target for both tickets becomes 5.2. I think gap_stamp should go in DOT_SAGE, GAP_DIR seems to be reserved for some gap workspace and it may unwise to put it in there.",
    "created_at": "2012-06-19T22:49:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199161",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:18'></a>
Thanks. Yes considering that Jeroen wants beta5 to be the last beta before rc our target for both tickets becomes 5.2. I think gap_stamp should go in DOT_SAGE, GAP_DIR seems to be reserved for some gap workspace and it may unwise to put it in there.



---

archive/issue_comments_199162.json:
```json
{
    "body": "<a id='comment:19'></a>\nActually `GAP_DIR/workspace-*/` are the gap workspaces, so it should be fine to place in `GAP_DIR`.",
    "created_at": "2012-06-19T22:57:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199162",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:19'></a>
Actually `GAP_DIR/workspace-*/` are the gap workspaces, so it should be fine to place in `GAP_DIR`.



---

archive/issue_comments_199163.json:
```json
{
    "body": "<a id='comment:20'></a>\nYou are right, I missed a line or two in the original file. Looks good to me.",
    "created_at": "2012-06-19T23:05:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199163",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:20'></a>
You are right, I missed a line or two in the original file. Looks good to me.



---

archive/issue_comments_199164.json:
```json
{
    "body": "<a id='comment:21'></a>\nQuestion, why do we sometimes get the SAGE_* variables from os.environ and sometimes from sage.misc.misc? Should we try to be uniform and do it one way only?",
    "created_at": "2012-06-28T22:58:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199164",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:21'></a>
Question, why do we sometimes get the SAGE_* variables from os.environ and sometimes from sage.misc.misc? Should we try to be uniform and do it one way only?



---

archive/issue_comments_199165.json:
```json
{
    "body": "<a id='comment:22'></a>\nReplying to [fbissey](#comment%3A21):\n> Question, why do we sometimes get the SAGE_* variables from os.environ and sometimes from sage.misc.misc? Should we try to be uniform and do it one way only?\n\n\nI would have it imported from `sage.misc.misc` (well actually I would move it to `sage.misc.env`, but that currently doesn't exist). I think that I only left one instance of `os.environ` between `SAGE_DATA` and `SAGE_EXTCODE` with this patch (I haven't touched the other `SAGE_*` with this patch).",
    "created_at": "2012-06-29T05:55:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199165",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:22'></a>
Replying to [fbissey](#comment%3A21):
> Question, why do we sometimes get the SAGE_* variables from os.environ and sometimes from sage.misc.misc? Should we try to be uniform and do it one way only?


I would have it imported from `sage.misc.misc` (well actually I would move it to `sage.misc.env`, but that currently doesn't exist). I think that I only left one instance of `os.environ` between `SAGE_DATA` and `SAGE_EXTCODE` with this patch (I haven't touched the other `SAGE_*` with this patch).



---

archive/issue_comments_199166.json:
```json
{
    "body": "<a id='comment:23'></a>\nFYI, looking at the code there might be an issue with using a `GAP_STAMP` shared by multiple copies of Sage (I'm not positive, I don't really know the code). For right now I'm using the `SAGE_EXTCODE` directory as the `GAP_STAMP`.",
    "created_at": "2012-06-30T20:42:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199166",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:23'></a>
FYI, looking at the code there might be an issue with using a `GAP_STAMP` shared by multiple copies of Sage (I'm not positive, I don't really know the code). For right now I'm using the `SAGE_EXTCODE` directory as the `GAP_STAMP`.



---

archive/issue_comments_199167.json:
```json
{
    "body": "<a id='comment:24'></a>\nReplying to [ohanar](#comment%3A23):\n> FYI, looking at the code there might be an issue with using a `GAP_STAMP` shared by multiple copies of Sage (I'm not positive, I don't really know the code). For right now I'm using the `SAGE_EXTCODE` directory as the `GAP_STAMP`.\n\n\nPutting it in SAGE_EXTCODE is about as bad as putting it in SAGE_LOCAL/bin as it was initially. If you are concerned about multiple sage session running in parallel that's would still be a problem wherever you put it. I am not sure how the file is used but we don't remove it or anything. The real question is: is it actively used by gap? If gap just check for it's presence then it is OK. If it is used then it may have to be unique for each sage session and be cleaned on exit.",
    "created_at": "2012-07-01T22:20:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199167",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:24'></a>
Replying to [ohanar](#comment%3A23):
> FYI, looking at the code there might be an issue with using a `GAP_STAMP` shared by multiple copies of Sage (I'm not positive, I don't really know the code). For right now I'm using the `SAGE_EXTCODE` directory as the `GAP_STAMP`.


Putting it in SAGE_EXTCODE is about as bad as putting it in SAGE_LOCAL/bin as it was initially. If you are concerned about multiple sage session running in parallel that's would still be a problem wherever you put it. I am not sure how the file is used but we don't remove it or anything. The real question is: is it actively used by gap? If gap just check for it's presence then it is OK. If it is used then it may have to be unique for each sage session and be cleaned on exit.



---

archive/issue_comments_199168.json:
```json
{
    "body": "<a id='comment:25'></a>\nReplying to [fbissey](#comment%3A24):\n> Putting it in SAGE_EXTCODE is about as bad as putting it in SAGE_LOCAL/bin as it was initially.\n\nNot really, since it removes yet another instance of sage trying to write to someplace it shouldn't be at runtime.\n\nThe purpose of `GAP_STAMP` seems to be a check on whether it needs to refresh the workspaces. Really, this will all become a moot point if/when libgap is finished.",
    "created_at": "2012-07-02T04:24:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199168",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:25'></a>
Replying to [fbissey](#comment%3A24):
> Putting it in SAGE_EXTCODE is about as bad as putting it in SAGE_LOCAL/bin as it was initially.

Not really, since it removes yet another instance of sage trying to write to someplace it shouldn't be at runtime.

The purpose of `GAP_STAMP` seems to be a check on whether it needs to refresh the workspaces. Really, this will all become a moot point if/when libgap is finished.



---

archive/issue_comments_199169.json:
```json
{
    "body": "<a id='comment:26'></a>\nAs far as I am concerned SAGE_EXTCODE is a place sage shouldn't write at runtime. On a system wide installation that would be a folder that a user is not supposed to own. If a sys-admin install sage under /usr/local/sage-xxx for example, it would resolve to /usr/local/sage-xxx/local/share/sage/ext and as a sys-admin I object that my users have to write something there. Their home folder, tmp and any scratch space set for them is where it should go.\n\nThat's my perspective.",
    "created_at": "2012-07-02T04:43:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199169",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:26'></a>
As far as I am concerned SAGE_EXTCODE is a place sage shouldn't write at runtime. On a system wide installation that would be a folder that a user is not supposed to own. If a sys-admin install sage under /usr/local/sage-xxx for example, it would resolve to /usr/local/sage-xxx/local/share/sage/ext and as a sys-admin I object that my users have to write something there. Their home folder, tmp and any scratch space set for them is where it should go.

That's my perspective.



---

archive/issue_comments_199170.json:
```json
{
    "body": "<a id='comment:27'></a>\nReplying to [fbissey](#comment%3A26):\n> As far as I am concerned SAGE_EXTCODE is a place sage shouldn't write at runtime.\n\nI don't write to `SAGE_EXTCODE`, I just use its creation for the timestamp that gap wants. It used to be that when you first started sage, it would touch `SAGE_LOCAL/bin/gap_stamp` and then use the timestamp of that.\n\nI agree, nothing should try to write to `SAGE_LOCAL` or its subdirectories in the long run.",
    "created_at": "2012-07-02T05:11:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199170",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:27'></a>
Replying to [fbissey](#comment%3A26):
> As far as I am concerned SAGE_EXTCODE is a place sage shouldn't write at runtime.

I don't write to `SAGE_EXTCODE`, I just use its creation for the timestamp that gap wants. It used to be that when you first started sage, it would touch `SAGE_LOCAL/bin/gap_stamp` and then use the timestamp of that.

I agree, nothing should try to write to `SAGE_LOCAL` or its subdirectories in the long run.



---

archive/issue_comments_199171.json:
```json
{
    "body": "<a id='comment:28'></a>\nOK. If we just want a GAP_STAMP file for everyone and in SAGE_EXTCODE it should really be created by the extcode spkg. Is it a file we really need?",
    "created_at": "2012-07-03T02:29:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199171",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:28'></a>
OK. If we just want a GAP_STAMP file for everyone and in SAGE_EXTCODE it should really be created by the extcode spkg. Is it a file we really need?



---

archive/issue_comments_199172.json:
```json
{
    "body": "<a id='comment:29'></a>\n@kiwifb\n\nDo you think you are capable of finishing your review of this? (No pressure, just want to know if you can, so that I can find someone else to review it if you aren't able to.)",
    "created_at": "2012-09-09T23:18:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199172",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:29'></a>
@kiwifb

Do you think you are capable of finishing your review of this? (No pressure, just want to know if you can, so that I can find someone else to review it if you aren't able to.)



---

archive/issue_comments_199173.json:
```json
{
    "body": "<a id='comment:30'></a>\nYes, I will hopefully tomorrow. I was a bit down today - but this is important and we should move this.",
    "created_at": "2012-09-10T08:46:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199173",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:30'></a>
Yes, I will hopefully tomorrow. I was a bit down today - but this is important and we should move this.



---

archive/issue_comments_199174.json:
```json
{
    "body": "<a id='comment:31'></a>\nWhy `local/share/sage/data` and not `local/share/sage` or even `local/share`?",
    "created_at": "2012-09-10T08:52:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199174",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:31'></a>
Why `local/share/sage/data` and not `local/share/sage` or even `local/share`?



---

archive/issue_comments_199175.json:
```json
{
    "body": "<a id='comment:32'></a>\nI would argue for `local/share` because the stuff in `SAGE_DATA` (apart from extcode) isn't part of Sage.  It's part of external packages/databases.  So I think it's wrong to use a `sage` subdirectory.\n\nInstalling databases in `local/share/sage/data` is like installing all binaries in `local/bin/sage/binaries` and we don't do that either.\n\nFor extcode, `local/share/sage` makes sense.",
    "created_at": "2012-09-10T08:57:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199175",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:32'></a>
I would argue for `local/share` because the stuff in `SAGE_DATA` (apart from extcode) isn't part of Sage.  It's part of external packages/databases.  So I think it's wrong to use a `sage` subdirectory.

Installing databases in `local/share/sage/data` is like installing all binaries in `local/bin/sage/binaries` and we don't do that either.

For extcode, `local/share/sage` makes sense.



---

archive/issue_comments_199176.json:
```json
{
    "body": "<a id='comment:33'></a>\nAs far as I can tell, this ticket will break upgrading because an upgraded Sage will still have the `SAGE_ROOT/data` directory.  This could be simply ignored and therefore harmless, but then it needs to be kept inside `.hgignore`.  Alternatively, you could move `SAGE_ROOT/data` or even delete it.\n\nAlso, the database packages should depend on `SAGE_ROOT_REPO`, otherwise they won't see the new `sage-env` when upgrading.",
    "created_at": "2012-09-10T09:10:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199176",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:33'></a>
As far as I can tell, this ticket will break upgrading because an upgraded Sage will still have the `SAGE_ROOT/data` directory.  This could be simply ignored and therefore harmless, but then it needs to be kept inside `.hgignore`.  Alternatively, you could move `SAGE_ROOT/data` or even delete it.

Also, the database packages should depend on `SAGE_ROOT_REPO`, otherwise they won't see the new `sage-env` when upgrading.



---

archive/issue_comments_199177.json:
```json
{
    "body": "<a id='comment:34'></a>\nI can agree with the SAGE_DATA location argument of Jeroen. The only argument against is that for most of them sage is the only application I can think of that make use of it. The splitting of the data is purely a convenience because it ease maintenance. In that case local/share/sage would be most appropriate.",
    "created_at": "2012-09-10T09:18:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199177",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:34'></a>
I can agree with the SAGE_DATA location argument of Jeroen. The only argument against is that for most of them sage is the only application I can think of that make use of it. The splitting of the data is purely a convenience because it ease maintenance. In that case local/share/sage would be most appropriate.



---

archive/issue_comments_199178.json:
```json
{
    "body": "<a id='comment:36'></a>\nSure, my main thing is just removing SAGE_ROOT/data and moving the databases that were there to some place in SAGE_LOCAL.",
    "created_at": "2012-09-10T21:18:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199178",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:36'></a>
Sure, my main thing is just removing SAGE_ROOT/data and moving the databases that were there to some place in SAGE_LOCAL.



---

archive/issue_events_042121.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "rename": {
        "from": "Move SAGE_DATA to SAGE_LOCAL/share/sage/data",
        "to": "Move SAGE_DATA to SAGE_LOCAL/share"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13123#event-42121"
}
```



---

archive/issue_comments_199179.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2012-09-11T06:30:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199179",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from needs_review to needs_work.



---

archive/attachments_017729.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "elliptic_curves.diff",
    "asset_url": "tarball://root/attachments/some-uuid/ticket13123/elliptic_curves.diff",
    "created_at": "2012-09-11T07:49:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.diff",
    "user": "https://github.com/ohanar"
}
```



---

archive/issue_comments_199180.json:
```json
{
    "body": "for review purposes",
    "created_at": "2012-09-11T07:49:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199180",
    "user": "https://github.com/ohanar"
}
```

for review purposes



---

archive/attachments_017730.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "polytopes_db.diff",
    "asset_url": "tarball://root/attachments/some-uuid/ticket13123/polytopes_db.diff",
    "created_at": "2012-09-11T07:53:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.diff",
    "user": "https://github.com/ohanar"
}
```



---

archive/issue_comments_199181.json:
```json
{
    "body": "for review purpose",
    "created_at": "2012-09-11T07:53:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199181",
    "user": "https://github.com/ohanar"
}
```

for review purpose



---

archive/issue_comments_199182.json:
```json
{
    "body": "for review purposes",
    "created_at": "2012-09-11T07:55:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199182",
    "user": "https://github.com/ohanar"
}
```

for review purposes



---

archive/attachments_017731.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "conway_polynomials.diff",
    "asset_url": "tarball://root/attachments/some-uuid/ticket13123/conway_polynomials.diff",
    "created_at": "2012-09-11T07:58:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.diff",
    "user": "https://github.com/ohanar"
}
```



---

archive/issue_comments_199183.json:
```json
{
    "body": "for review purposes",
    "created_at": "2012-09-11T07:58:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199183",
    "user": "https://github.com/ohanar"
}
```

for review purposes



---

archive/issue_comments_199184.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2012-09-11T08:02:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199184",
    "user": "https://github.com/ohanar"
}
```

**Changing status** from needs_work to needs_review.



---

archive/attachments_017732.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "graphs.diff",
    "asset_url": "tarball://root/attachments/some-uuid/ticket13123/graphs.diff",
    "created_at": "2012-09-11T08:02:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.diff",
    "user": "https://github.com/ohanar"
}
```



---

archive/issue_comments_199185.json:
```json
{
    "body": "<a id='comment:38'></a>\nOk, moved everything to `SAGE_LOCAL/share` (added `SAGE_SHARE` for convenience), and removed the `SAGE_DATA` environment variable.\n\nI also added a bit to `SAGE_ROOT/spkg/install` to handle upgrading.",
    "created_at": "2012-09-11T08:02:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199185",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:38'></a>
Ok, moved everything to `SAGE_LOCAL/share` (added `SAGE_SHARE` for convenience), and removed the `SAGE_DATA` environment variable.

I also added a bit to `SAGE_ROOT/spkg/install` to handle upgrading.



---

archive/issue_comments_199186.json:
```json
{
    "body": "<a id='comment:39'></a>\nSome optional/experimental packages use `SAGE_DATA`:\n1. cunningham_tables-1.0\n2. p_group_cohomology-2.1.2\n3. database_stein_watkins_mini.p0\n4. sage-mode-0.7\n5. database_cremona_ellcurve-20120827\n6. database_sloane_oeis-2005-12\n7. database_jones_numfield-v4\n8. soya-0.11.2.p0\n\nSome optional packages use `$SAGE_ROOT/data':\n1. database_odlyzko_zeta\n2. database_symbolic_data-20070206\n3. database_kohel-20060803\n\nFor these reasons, I would keep `SAGE_DATA` as synonym of `SAGE_SHARE` and also make a symlink\n\n```\n$SAGE_ROOT/data -> local/share\n```",
    "created_at": "2012-09-11T09:13:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199186",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:39'></a>
Some optional/experimental packages use `SAGE_DATA`:
1. cunningham_tables-1.0
2. p_group_cohomology-2.1.2
3. database_stein_watkins_mini.p0
4. sage-mode-0.7
5. database_cremona_ellcurve-20120827
6. database_sloane_oeis-2005-12
7. database_jones_numfield-v4
8. soya-0.11.2.p0

Some optional packages use `$SAGE_ROOT/data':
1. database_odlyzko_zeta
2. database_symbolic_data-20070206
3. database_kohel-20060803

For these reasons, I would keep `SAGE_DATA` as synonym of `SAGE_SHARE` and also make a symlink

```
$SAGE_ROOT/data -> local/share
```



---

archive/issue_comments_199187.json:
```json
{
    "body": "<a id='comment:40'></a>\nKeeping SAGE_DATA for a little while as a symlink definitely sound like a good idea. I don't remember  explain_picklejar to be removed in trac13123_library.patch before nor do I understand the rational for the removal. Care to shade some light on that?",
    "created_at": "2012-09-11T10:26:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199187",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:40'></a>
Keeping SAGE_DATA for a little while as a symlink definitely sound like a good idea. I don't remember  explain_picklejar to be removed in trac13123_library.patch before nor do I understand the rational for the removal. Care to shade some light on that?



---

archive/issue_comments_199188.json:
```json
{
    "body": "<a id='comment:41'></a>\nIn the extcode patch, this comment is clearly wrong:\n\n```\ncp -pR * \"$SAGE_ROOT/devel/ext-main/\" # Creates new sagenb-main dir\n```",
    "created_at": "2012-09-11T10:33:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199188",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:41'></a>
In the extcode patch, this comment is clearly wrong:

```
cp -pR * "$SAGE_ROOT/devel/ext-main/" # Creates new sagenb-main dir
```



---

archive/issue_comments_199189.json:
```json
{
    "body": "<a id='comment:42'></a>\nWhy change the logic in `sage/databases/cremona.py`?",
    "created_at": "2012-09-11T10:37:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199189",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:42'></a>
Why change the logic in `sage/databases/cremona.py`?



---

archive/issue_comments_199190.json:
```json
{
    "body": "<a id='comment:43'></a>\nIn extcode `spkg-install`, why do\n\n```\nif [ -d .hg ]\n```\n\nYou *know* that `.hg` exists (if not, that would be a bug).",
    "created_at": "2012-09-11T15:30:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199190",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:43'></a>
In extcode `spkg-install`, why do

```
if [ -d .hg ]
```

You *know* that `.hg` exists (if not, that would be a bug).



---

archive/issue_comments_199191.json:
```json
{
    "body": "<a id='comment:44'></a>\n`spkg/install`: indentation should be 4 spaces.",
    "created_at": "2012-09-11T15:32:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199191",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:44'></a>
`spkg/install`: indentation should be 4 spaces.



---

archive/issue_comments_199192.json:
```json
{
    "body": "<a id='comment:45'></a>\nI changed the logic in `sage.databases.cremona` since I wrote it, and it when replacing everything, it annoyed me that it wasn't factored appropriately.\n\nI'll see about fixing the extcode `spkg-install` (most of the code there comes from a recent version of the sagenb `spkg-install`) and`spkg/install`, as well as adding a symlink for `SAGE_DATA`.",
    "created_at": "2012-09-11T20:08:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199192",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:45'></a>
I changed the logic in `sage.databases.cremona` since I wrote it, and it when replacing everything, it annoyed me that it wasn't factored appropriately.

I'll see about fixing the extcode `spkg-install` (most of the code there comes from a recent version of the sagenb `spkg-install`) and`spkg/install`, as well as adding a symlink for `SAGE_DATA`.



---

archive/issue_comments_199193.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2012-09-11T20:08:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199193",
    "user": "https://github.com/ohanar"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_199194.json:
```json
{
    "body": "apply to extcode repo",
    "created_at": "2012-09-11T20:26:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199194",
    "user": "https://github.com/ohanar"
}
```

apply to extcode repo



---

archive/attachments_017733.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac13123_scripts.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket13123/trac13123_scripts.patch",
    "created_at": "2012-09-11T20:27:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/ohanar"
}
```



---

archive/issue_comments_199195.json:
```json
{
    "body": "apply to scripts repo",
    "created_at": "2012-09-11T20:27:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199195",
    "user": "https://github.com/ohanar"
}
```

apply to scripts repo



---

archive/issue_comments_199196.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2012-09-11T20:30:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199196",
    "user": "https://github.com/ohanar"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_199197.json:
```json
{
    "body": "<a id='comment:46'></a>\nI also fixed the commit message for the patches for the sage repos (I had already fixed the commit messages for the spkgs).",
    "created_at": "2012-09-11T20:30:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199197",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:46'></a>
I also fixed the commit message for the patches for the sage repos (I had already fixed the commit messages for the spkgs).



---

archive/issue_comments_199198.json:
```json
{
    "body": "<a id='comment:47'></a>\nI would really prefer to separate the refactoring of the Cremona database code from this ticket (and then have either this ticket depend on that or the other way around).",
    "created_at": "2012-09-12T08:09:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199198",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:47'></a>
I would really prefer to separate the refactoring of the Cremona database code from this ticket (and then have either this ticket depend on that or the other way around).



---

archive/issue_comments_199199.json:
```json
{
    "body": "**Changing reviewer** from \"Fran\u00e7ois Bissey\" to \"Fran\u00e7ois Bissey, Jeroen Demeyer\".",
    "created_at": "2012-09-12T08:28:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199199",
    "user": "https://github.com/jdemeyer"
}
```

**Changing reviewer** from "Fran√ßois Bissey" to "Fran√ßois Bissey, Jeroen Demeyer".



---

archive/issue_comments_199200.json:
```json
{
    "body": "<a id='comment:49'></a>\n`sage/interfaces/gap.py`: why change `hash(SAGE_ROOT)` to `hash(SAGE_LOCAL)`?  I don't understand why you made that change, nor the implications of that change.",
    "created_at": "2012-09-12T08:52:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199200",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:49'></a>
`sage/interfaces/gap.py`: why change `hash(SAGE_ROOT)` to `hash(SAGE_LOCAL)`?  I don't understand why you made that change, nor the implications of that change.



---

archive/issue_comments_199201.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -8,7 +8,7 @@\n \n Installation Steps:\n * Add new spkgs\n-* Apply attachment:trac13123_library.patch to the library repo\n-* Apply attachment:trac13123_root.patch to the root repo\n-* Apply attachment:trac13123_scripts.patch to the scripts repo\n-* Apply attachment:trac13123_extcode.patch to the extcode repo\n+* Apply [attachment:trac13123_library.patch] to the library repo\n+* Apply [attachment:trac13123_root.patch] and [attachment:13123_root_review.patch] to the root repo\n+* Apply [attachment:trac13123_scripts.patch] to the scripts repo\n+* Apply [attachment:trac13123_extcode.patch] and [attachment:13123_extcode_review.patch] to the extcode repo\n``````\n",
    "created_at": "2012-09-12T09:03:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199201",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -8,7 +8,7 @@
 
 Installation Steps:
 * Add new spkgs
-* Apply attachment:trac13123_library.patch to the library repo
-* Apply attachment:trac13123_root.patch to the root repo
-* Apply attachment:trac13123_scripts.patch to the scripts repo
-* Apply attachment:trac13123_extcode.patch to the extcode repo
+* Apply [attachment:trac13123_library.patch] to the library repo
+* Apply [attachment:trac13123_root.patch] and [attachment:13123_root_review.patch] to the root repo
+* Apply [attachment:trac13123_scripts.patch] to the scripts repo
+* Apply [attachment:trac13123_extcode.patch] and [attachment:13123_extcode_review.patch] to the extcode repo
``````




---

archive/issue_comments_199202.json:
```json
{
    "body": "<a id='comment:50'></a>\nBased on purely reading the patches: **positive review** modulo my reviewer patches and the Cremona and GAP changes that I mentioned.\n\nIn any case, this still needs massive amounts of testing.",
    "created_at": "2012-09-12T09:03:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199202",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:50'></a>
Based on purely reading the patches: **positive review** modulo my reviewer patches and the Cremona and GAP changes that I mentioned.

In any case, this still needs massive amounts of testing.



---

archive/issue_comments_199203.json:
```json
{
    "body": "<a id='comment:51'></a>\nSorry but I still don't understand the changes in sage/misc/explain_pickle.py and how they are related to the rest of the ticket. It may just be due to a lack of understanding on my part on the working of the pickle jar but the change seems unrelated to the rest of the ticket. Could someone offer me an explanation?",
    "created_at": "2012-09-12T09:16:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199203",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:51'></a>
Sorry but I still don't understand the changes in sage/misc/explain_pickle.py and how they are related to the rest of the ticket. It may just be due to a lack of understanding on my part on the working of the pickle jar but the change seems unrelated to the rest of the ticket. Could someone offer me an explanation?



---

archive/issue_comments_199204.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2012-09-12T14:46:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199204",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_199205.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2012-09-12T20:07:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199205",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from needs_work to needs_review.



---

archive/attachments_017734.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "13123_extcode_review.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket13123/13123_extcode_review.patch",
    "created_at": "2012-09-12T20:07:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/jdemeyer"
}
```



---

archive/issue_comments_199206.json:
```json
{
    "body": "<a id='comment:53'></a>\n",
    "created_at": "2012-09-12T20:07:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199206",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:53'></a>




---

archive/issue_comments_199207.json:
```json
{
    "body": "<a id='comment:54'></a>\nThis should be fixed:\n\n```\nsage -t --optional --long \"devel/sage/sage/databases/symbolic_data.py\"\n**********************************************************************\nFile \"/release/sage-5.4.beta2-try13123/devel/sage/sage/databases/symbolic_data.py\", line 37:\n    sage: sd = SymbolicData(); sd # optional - database_symbolic_data\nException raised:\n    Traceback (most recent call last):\n      File \"/release/sage-5.4.beta2-try13123/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/release/sage-5.4.beta2-try13123/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/release/sage-5.4.beta2-try13123/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_0[2]>\", line 1, in <module>\n        sd = SymbolicData(); sd # optional - database_symbolic_data###line 37:\n    sage: sd = SymbolicData(); sd # optional - database_symbolic_data\n      File \"/release/sage-5.4.beta2-try13123/local/lib/python/site-packages/sage/databases/symbolic_data.py\", line 78, in __init__\n        path=os.path.join(sage.misc.misc.SAGE_SHARE, 'symbolic_data')\n    NameError: global name 'sage' is not defined\n**********************************************************************\n```",
    "created_at": "2012-09-12T21:04:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199207",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:54'></a>
This should be fixed:

```
sage -t --optional --long "devel/sage/sage/databases/symbolic_data.py"
**********************************************************************
File "/release/sage-5.4.beta2-try13123/devel/sage/sage/databases/symbolic_data.py", line 37:
    sage: sd = SymbolicData(); sd # optional - database_symbolic_data
Exception raised:
    Traceback (most recent call last):
      File "/release/sage-5.4.beta2-try13123/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/release/sage-5.4.beta2-try13123/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/release/sage-5.4.beta2-try13123/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_0[2]>", line 1, in <module>
        sd = SymbolicData(); sd # optional - database_symbolic_data###line 37:
    sage: sd = SymbolicData(); sd # optional - database_symbolic_data
      File "/release/sage-5.4.beta2-try13123/local/lib/python/site-packages/sage/databases/symbolic_data.py", line 78, in __init__
        path=os.path.join(sage.misc.misc.SAGE_SHARE, 'symbolic_data')
    NameError: global name 'sage' is not defined
**********************************************************************
```



---

archive/issue_comments_199208.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2012-09-12T21:04:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199208",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_199209.json:
```json
{
    "body": "<a id='comment:55'></a>\nAlso, I can't get the `sloane_database` optional doctests to work in `sage/databases/sloane.py`, but I don't think it's because of this ticket.",
    "created_at": "2012-09-12T21:10:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199209",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:55'></a>
Also, I can't get the `sloane_database` optional doctests to work in `sage/databases/sloane.py`, but I don't think it's because of this ticket.



---

archive/issue_comments_199210.json:
```json
{
    "body": "apply to sage library",
    "created_at": "2012-09-12T21:28:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199210",
    "user": "https://github.com/ohanar"
}
```

apply to sage library



---

archive/issue_comments_199211.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2012-09-12T21:33:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199211",
    "user": "https://github.com/ohanar"
}
```

**Changing status** from needs_work to needs_review.



---

archive/attachments_017735.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac13123_library.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket13123/trac13123_library.patch",
    "created_at": "2012-09-12T21:33:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/ohanar"
}
```



---

archive/issue_comments_199212.json:
```json
{
    "body": "<a id='comment:56'></a>\n@kiwifb\n\nBecause the commented out code references `SAGE_DATA/extcode` and hasn't been used in a long long time (see #6233).\n\nOk, updated. Changes:\n\n* Removed refactoring of `sage.databases.cremona`\n* Reverted change of `SAGE_ROOT -> SAGE_LOCAL` in `sage.interfaces.gap` (better done in #13432)\n* fixed `sage.databases.symbolic_data`",
    "created_at": "2012-09-12T21:33:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199212",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:56'></a>
@kiwifb

Because the commented out code references `SAGE_DATA/extcode` and hasn't been used in a long long time (see #6233).

Ok, updated. Changes:

* Removed refactoring of `sage.databases.cremona`
* Reverted change of `SAGE_ROOT -> SAGE_LOCAL` in `sage.interfaces.gap` (better done in #13432)
* fixed `sage.databases.symbolic_data`



---

archive/issue_comments_199213.json:
```json
{
    "body": "<a id='comment:57'></a>\n`sage --bdist` doesn't copy `devel/ext`, leading to non-working binary builds.",
    "created_at": "2012-09-13T06:27:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199213",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:57'></a>
`sage --bdist` doesn't copy `devel/ext`, leading to non-working binary builds.



---

archive/issue_comments_199214.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2012-09-13T06:27:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199214",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_199215.json:
```json
{
    "body": "**Dependencies:** #13457",
    "created_at": "2012-09-13T06:45:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199215",
    "user": "https://github.com/jdemeyer"
}
```

**Dependencies:** #13457



---

archive/issue_comments_199216.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -10,5 +10,5 @@\n * Add new spkgs\n * Apply [attachment:trac13123_library.patch] to the library repo\n * Apply [attachment:trac13123_root.patch] and [attachment:13123_root_review.patch] to the root repo\n-* Apply [attachment:trac13123_scripts.patch] to the scripts repo\n+* Apply #13457 and [attachment:trac13123_scripts.patch] and [attachment:13123_bdist.patch] to the scripts repo\n * Apply [attachment:trac13123_extcode.patch] and [attachment:13123_extcode_review.patch] to the extcode repo\n``````\n",
    "created_at": "2012-09-13T06:47:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199216",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -10,5 +10,5 @@
 * Add new spkgs
 * Apply [attachment:trac13123_library.patch] to the library repo
 * Apply [attachment:trac13123_root.patch] and [attachment:13123_root_review.patch] to the root repo
-* Apply [attachment:trac13123_scripts.patch] to the scripts repo
+* Apply #13457 and [attachment:trac13123_scripts.patch] and [attachment:13123_bdist.patch] to the scripts repo
 * Apply [attachment:trac13123_extcode.patch] and [attachment:13123_extcode_review.patch] to the extcode repo
``````




---

archive/issue_comments_199217.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2012-09-13T06:47:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199217",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_199218.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2012-09-13T09:06:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199218",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_199219.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2012-09-13T11:51:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199219",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from needs_work to needs_review.



---

archive/attachments_017736.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "13123_bdist.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket13123/13123_bdist.patch",
    "created_at": "2012-09-14T06:58:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/jdemeyer"
}
```



---

archive/issue_comments_199220.json:
```json
{
    "body": "",
    "created_at": "2012-09-14T06:58:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199220",
    "user": "https://github.com/jdemeyer"
}
```





---

archive/issue_comments_199221.json:
```json
{
    "body": "<a id='comment:62'></a>\nTested building from scratch, sdist, bdist, works fine.  Positive review to everything not authored by me.\n\nI agree with the deleting of the commented-out code in `sage/misc/explain_pickle.py`.  If people really want to do something with that code, it's still in the Mercurial history.\n\nMy reviewer patches still need review.",
    "created_at": "2012-09-16T17:28:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199221",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:62'></a>
Tested building from scratch, sdist, bdist, works fine.  Positive review to everything not authored by me.

I agree with the deleting of the commented-out code in `sage/misc/explain_pickle.py`.  If people really want to do something with that code, it's still in the Mercurial history.

My reviewer patches still need review.



---

archive/issue_comments_199222.json:
```json
{
    "body": "**Changing author** from \"R. Andrew Ohana\" to \"R. Andrew Ohana,  Jeroen Demeyer\".",
    "created_at": "2012-09-16T20:50:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199222",
    "user": "https://github.com/ohanar"
}
```

**Changing author** from "R. Andrew Ohana" to "R. Andrew Ohana,  Jeroen Demeyer".



---

archive/issue_comments_199223.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2012-09-16T20:57:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199223",
    "user": "https://github.com/ohanar"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_199224.json:
```json
{
    "body": "<a id='comment:64'></a>\nMercurial should no longer be marked as a dependency for the extcode spkg (it is no longer used in the spkg-install).",
    "created_at": "2012-09-16T20:57:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199224",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:64'></a>
Mercurial should no longer be marked as a dependency for the extcode spkg (it is no longer used in the spkg-install).



---

archive/attachments_017737.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "13123_root_review.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket13123/13123_root_review.patch",
    "created_at": "2012-09-16T21:45:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/jdemeyer"
}
```



---

archive/issue_comments_199225.json:
```json
{
    "body": "",
    "created_at": "2012-09-16T21:45:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199225",
    "user": "https://github.com/jdemeyer"
}
```





---

archive/issue_comments_199226.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2012-09-16T21:46:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199226",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_199227.json:
```json
{
    "body": "<a id='comment:66'></a>\nLooks all clear to me. I didn't really notice that the explain_pickle code was commented out last week, probably because of other stuff going on locally. But still happy that this is related to the rest of the ticket and not a freebie done at the same time.\n\nAs far as I can see it is ready to go.",
    "created_at": "2012-09-17T00:56:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199227",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:66'></a>
Looks all clear to me. I didn't really notice that the explain_pickle code was commented out last week, probably because of other stuff going on locally. But still happy that this is related to the rest of the ticket and not a freebie done at the same time.

As far as I can see it is ready to go.



---

archive/issue_comments_199228.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2012-09-17T00:56:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199228",
    "user": "https://github.com/kiwifb"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_events_042122.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-09-18T06:41:19Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13123#event-42122"
}
```



---

archive/issue_comments_199229.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2012-09-18T06:41:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199229",
    "user": "https://github.com/jdemeyer"
}
```

**Resolution:** fixed



---

archive/issue_comments_199230.json:
```json
{
    "body": "**Merged:** sage-5.4.beta2",
    "created_at": "2012-09-18T06:41:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199230",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.4.beta2



---

archive/issue_comments_199231.json:
```json
{
    "body": "apply to root repo",
    "created_at": "2012-09-19T06:38:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199231",
    "user": "https://github.com/jdemeyer"
}
```

apply to root repo



---

archive/attachments_017738.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac13123_root.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket13123/trac13123_root.patch",
    "created_at": "2012-09-19T06:38:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/jdemeyer"
}
```



---

archive/issue_comments_199232.json:
```json
{
    "body": "<a id='comment:68'></a>\nRebased [attachment:trac13123_root.patch] because of fuzz.",
    "created_at": "2012-09-19T06:38:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199232",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:68'></a>
Rebased [attachment:trac13123_root.patch] because of fuzz.



---

archive/issue_comments_199233.json:
```json
{
    "body": "<a id='comment:69'></a>\nWhy was `GAP_STAMP` changed from\n\n```\nGAP_STAMP = '%s/local/bin/gap_stamp'%SAGE_ROOT\n```\nto\n\n```\nGAP_STAMP = SAGE_EXTCODE\n```\n\nThis seems a mistake and might be the cause of #13963.",
    "created_at": "2013-01-17T11:43:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13123#issuecomment-199233",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:69'></a>
Why was `GAP_STAMP` changed from

```
GAP_STAMP = '%s/local/bin/gap_stamp'%SAGE_ROOT
```
to

```
GAP_STAMP = SAGE_EXTCODE
```

This seems a mistake and might be the cause of #13963.
