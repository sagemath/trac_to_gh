# Issue 13123: Move SAGE_DATA to SAGE_LOCAL/share

archive/issues_012951.json:
```json
{
    "assignees": [],
    "body": "This is part of the new layout for git. Since it is not too difficult to separate off this change, I decided making this a distinct ticket was a good idea. `SAGE_EXTCODE` will be moved to `SAGE_ROOT/devel/ext`, and currently `SAGE_LOCAL/share/sage/ext` links to this.\n\nNew SPKGS:\n* [http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg](http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg)\n* [http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg](http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg)\n* [http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg](http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg)\n* [http://wstein.org/home/ohanar/spkgs/conway_polynomials-0.3.spkg](http://wstein.org/home/ohanar/spkgs/conway_polynomials-0.3.spkg)\n\nInstallation Steps:\n* Add new spkgs\n* Apply [attachment: trac13123_library.patch](https://github.com/sagemath/sage/files/ticket13123/trac13123_library.patch.gz) to the library repo\n* Apply [attachment: trac13123_root.patch](https://github.com/sagemath/sage/files/ticket13123/trac13123_root.patch.gz) and [attachment: 13123_root_review.patch](https://github.com/sagemath/sage/files/ticket13123/13123_root_review.patch.gz) to the root repo\n* Apply #13457 and [attachment: trac13123_scripts.patch](https://github.com/sagemath/sage/files/ticket13123/trac13123_scripts.patch.gz) and [attachment: 13123_bdist.patch](https://github.com/sagemath/sage/files/ticket13123/13123_bdist.patch.gz) to the scripts repo\n* Apply [attachment: trac13123_extcode.patch](https://github.com/sagemath/sage/files/ticket13123/trac13123_extcode.patch.gz) and [attachment: 13123_extcode_review.patch](https://github.com/sagemath/sage/files/ticket13123/13123_extcode_review.patch.gz) to the extcode repo\n\nDepends on #13457\n\nCC:  @kini @jdemeyer @robertwb @burcin\n\nReviewer: **Fran\u00e7ois Bissey, Jeroen Demeyer**\n\nAuthor: **R. Andrew Ohana,  Jeroen Demeyer**\n\nMerged: **sage-5.4.beta2**\n\nComponent: **relocation**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/13123_\n\n",
    "closed_at": "2012-09-18T06:41:19Z",
    "created_at": "2012-06-16T08:53:14Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20relocation",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Move SAGE_DATA to SAGE_LOCAL/share",
    "type": "issue",
    "updated_at": "2013-01-17T11:43:58Z",
    "url": "https://github.com/sagemath/sage/issues/13123",
    "user": "https://github.com/ohanar"
}
```
This is part of the new layout for git. Since it is not too difficult to separate off this change, I decided making this a distinct ticket was a good idea. `SAGE_EXTCODE` will be moved to `SAGE_ROOT/devel/ext`, and currently `SAGE_LOCAL/share/sage/ext` links to this.

New SPKGS:
* [http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg](http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg)
* [http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg](http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg)
* [http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg](http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg)
* [http://wstein.org/home/ohanar/spkgs/conway_polynomials-0.3.spkg](http://wstein.org/home/ohanar/spkgs/conway_polynomials-0.3.spkg)

Installation Steps:
* Add new spkgs
* Apply [attachment: trac13123_library.patch](https://github.com/sagemath/sage/files/ticket13123/trac13123_library.patch.gz) to the library repo
* Apply [attachment: trac13123_root.patch](https://github.com/sagemath/sage/files/ticket13123/trac13123_root.patch.gz) and [attachment: 13123_root_review.patch](https://github.com/sagemath/sage/files/ticket13123/13123_root_review.patch.gz) to the root repo
* Apply #13457 and [attachment: trac13123_scripts.patch](https://github.com/sagemath/sage/files/ticket13123/trac13123_scripts.patch.gz) and [attachment: 13123_bdist.patch](https://github.com/sagemath/sage/files/ticket13123/13123_bdist.patch.gz) to the scripts repo
* Apply [attachment: trac13123_extcode.patch](https://github.com/sagemath/sage/files/ticket13123/trac13123_extcode.patch.gz) and [attachment: 13123_extcode_review.patch](https://github.com/sagemath/sage/files/ticket13123/13123_extcode_review.patch.gz) to the extcode repo

Depends on #13457

CC:  @kini @jdemeyer @robertwb @burcin

Reviewer: **François Bissey, Jeroen Demeyer**

Author: **R. Andrew Ohana,  Jeroen Demeyer**

Merged: **sage-5.4.beta2**

Component: **relocation**

_Issue created by migration from https://trac.sagemath.org/ticket/13123_





---

archive/issue_events_180433.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2012-06-16T08:53:14Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "milestone_number": null,
    "milestone_title": "sage-5.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13123#event-180433"
}
```



---

archive/issue_events_180434.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2012-06-16T08:53:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20relocation",
    "label_color": "0000b0",
    "label_name": "c: relocation",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13123#event-180434"
}
```



---

archive/issue_events_180435.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2012-06-16T08:53:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13123#event-180435"
}
```



---

archive/issue_comments_149927.json:
```json
{
    "body": "Dependencies: **#12205**",
    "created_at": "2012-06-18T05:46:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149927",
    "user": "https://github.com/ohanar"
}
```

Dependencies: **#12205**



---

archive/issue_comments_149928.json:
```json
{
    "body": "Author: **R. Andrew Ohana**",
    "created_at": "2012-06-18T05:46:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149928",
    "user": "https://github.com/ohanar"
}
```

Author: **R. Andrew Ohana**



---

archive/issue_comments_149929.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,6 @@\n-This is in preparation for the transition to git. `SAGE_EXTCODE` will be moved to `SAGE_ROOT/devel/ext`\n+This is in preparation for the transition to git. `SAGE_EXTCODE` will be moved to `SAGE_ROOT/devel/ext`.\n+\n+New SPKGS:\n+[http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg](http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg)\n+[http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg](http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg)\n+[http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg](http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg)\n``````\n",
    "created_at": "2012-06-18T06:23:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149929",
    "user": "https://github.com/ohanar"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,6 @@
-This is in preparation for the transition to git. `SAGE_EXTCODE` will be moved to `SAGE_ROOT/devel/ext`
+This is in preparation for the transition to git. `SAGE_EXTCODE` will be moved to `SAGE_ROOT/devel/ext`.
+
+New SPKGS:
+[http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg](http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg)
+[http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg](http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg)
+[http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg](http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg)
``````




---

archive/issue_comments_149930.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,9 @@\n This is in preparation for the transition to git. `SAGE_EXTCODE` will be moved to `SAGE_ROOT/devel/ext`.\n \n New SPKGS:\n+\n [http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg](http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg)\n+\n [http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg](http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg)\n+\n [http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg](http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg)\n``````\n",
    "created_at": "2012-06-18T06:24:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149930",
    "user": "https://github.com/ohanar"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,9 @@
 This is in preparation for the transition to git. `SAGE_EXTCODE` will be moved to `SAGE_ROOT/devel/ext`.
 
 New SPKGS:
+
 [http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg](http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg)
+
 [http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg](http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg)
+
 [http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg](http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg)
``````




---

archive/issue_comments_149931.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,9 +1,6 @@\n This is in preparation for the transition to git. `SAGE_EXTCODE` will be moved to `SAGE_ROOT/devel/ext`.\n \n New SPKGS:\n-\n-[http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg](http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg)\n-\n-[http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg](http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg)\n-\n-[http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg](http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg)\n+* [http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg](http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg)\n+* [http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg](http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg)\n+* [http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg](http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg)\n``````\n",
    "created_at": "2012-06-18T06:28:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149931",
    "user": "https://github.com/kini"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,9 +1,6 @@
 This is in preparation for the transition to git. `SAGE_EXTCODE` will be moved to `SAGE_ROOT/devel/ext`.
 
 New SPKGS:
-
-[http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg](http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg)
-
-[http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg](http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg)
-
-[http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg](http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg)
+* [http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg](http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg)
+* [http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg](http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg)
+* [http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg](http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg)
``````




---

archive/issue_comments_149932.json:
```json
{
    "body": "Changed dependencies from **#12205** to none",
    "created_at": "2012-06-19T04:44:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149932",
    "user": "https://github.com/ohanar"
}
```

Changed dependencies from **#12205** to none



---

archive/issue_comments_149933.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,3 +4,4 @@\n * [http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg](http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg)\n * [http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg](http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg)\n * [http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg](http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg)\n+* [http://wstein.org/home/ohanar/spkgs/conway_polynomials-0.3.spkg](http://wstein.org/home/ohanar/spkgs/conway_polynomials-0.3.spkg)\n``````\n",
    "created_at": "2012-06-19T04:44:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149933",
    "user": "https://github.com/ohanar"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,3 +4,4 @@
 * [http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg](http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg)
 * [http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg](http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg)
 * [http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg](http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg)
+* [http://wstein.org/home/ohanar/spkgs/conway_polynomials-0.3.spkg](http://wstein.org/home/ohanar/spkgs/conway_polynomials-0.3.spkg)
``````




---

archive/issue_comments_149934.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nOk, everything should work now.",
    "created_at": "2012-06-19T04:44:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149934",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:5" align="right">comment:5</div>

Ok, everything should work now.



---

archive/issue_events_180436.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2012-06-19T04:44:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13123#event-180436"
}
```



---

archive/issue_comments_149935.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-This is in preparation for the transition to git. `SAGE_EXTCODE` will be moved to `SAGE_ROOT/devel/ext`.\n+This is part of the new layout for git. Since it is not too difficult to separate off this change, I decided making this a distinct ticket was a good idea. `SAGE_EXTCODE` will be moved to `SAGE_ROOT/devel/ext`, and currently `SAGE_LOCAL/share/sage/ext` links to this.\n \n New SPKGS:\n * [http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg](http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg)\n``````\n",
    "created_at": "2012-06-19T07:19:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149935",
    "user": "https://github.com/ohanar"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-This is in preparation for the transition to git. `SAGE_EXTCODE` will be moved to `SAGE_ROOT/devel/ext`.
+This is part of the new layout for git. Since it is not too difficult to separate off this change, I decided making this a distinct ticket was a good idea. `SAGE_EXTCODE` will be moved to `SAGE_ROOT/devel/ext`, and currently `SAGE_LOCAL/share/sage/ext` links to this.
 
 New SPKGS:
 * [http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg](http://wstein.org/home/ohanar/spkgs/elliptic_curves-0.7.spkg)
``````




---

archive/issue_comments_149936.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThat will cause me a lot of work in sage-on-gentoo but overall that will make my life easier in the long term. I cannot comment on trac13123_extcode.patch and trac13123_scripts.patch as I don't know the code in there all that well. But for the rest:\n* I will need to check the spkg individually for correctness but I assume it will be OK it is the easy part.\n* trac13123_library.patch : I am spotting something that I should have reported as a bug a long time ago. In sage/interfaces/gap.py GAP_STAMP is created in $SAGE_LOCAL/bin. This is a no-no if sage is installed globally and accessible by many users. That means all users would need to be able to write to $SAGE_LOCAL/bin to use gap from sage. There is no reason why GAP_STAMP has to be stored there. It should be moved to $DOT_SAGE or possibly even $GAP_DIR. There is a similar problem with qepcad but your patch doesn't touch that particular bit.",
    "created_at": "2012-06-19T11:07:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149936",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:7" align="right">comment:7</div>

That will cause me a lot of work in sage-on-gentoo but overall that will make my life easier in the long term. I cannot comment on trac13123_extcode.patch and trac13123_scripts.patch as I don't know the code in there all that well. But for the rest:
* I will need to check the spkg individually for correctness but I assume it will be OK it is the easy part.
* trac13123_library.patch : I am spotting something that I should have reported as a bug a long time ago. In sage/interfaces/gap.py GAP_STAMP is created in $SAGE_LOCAL/bin. This is a no-no if sage is installed globally and accessible by many users. That means all users would need to be able to write to $SAGE_LOCAL/bin to use gap from sage. There is no reason why GAP_STAMP has to be stored there. It should be moved to $DOT_SAGE or possibly even $GAP_DIR. There is a similar problem with qepcad but your patch doesn't touch that particular bit.



---

archive/issue_comments_149937.json:
```json
{
    "body": "Reviewer: **Fran\u00e7ois Bissey**",
    "created_at": "2012-06-19T11:07:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149937",
    "user": "https://github.com/kiwifb"
}
```

Reviewer: **François Bissey**



---

archive/issue_comments_149938.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nPlease make it clear in the ticket description which patches have to be applied where.",
    "created_at": "2012-06-19T11:38:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149938",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">comment:8</div>

Please make it clear in the ticket description which patches have to be applied where.



---

archive/issue_comments_149939.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nYou should use `cp -R` instead of `cp -r` (like it was before).\n\nYou should deal with upgrading (probably in the new extcode installer): if `SAGE_ROOT/data` exists, then move `SAGE_ROOT/data/extcode` to `SAGE_ROOT/devel/ext-main` and delete the whole directory `SAGE_ROOT/data`.",
    "created_at": "2012-06-19T11:45:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149939",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:9" align="right">comment:9</div>

You should use `cp -R` instead of `cp -r` (like it was before).

You should deal with upgrading (probably in the new extcode installer): if `SAGE_ROOT/data` exists, then move `SAGE_ROOT/data/extcode` to `SAGE_ROOT/devel/ext-main` and delete the whole directory `SAGE_ROOT/data`.



---

archive/issue_comments_149940.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nWhy don't you\n\n```\nmkdir -p \"$SAGE_DATA\"\n```\nin `spkg/install`?  That's easier than doing it in the various packages.",
    "created_at": "2012-06-19T11:48:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149940",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:10" align="right">comment:10</div>

Why don't you

```
mkdir -p "$SAGE_DATA"
```
in `spkg/install`?  That's easier than doing it in the various packages.



---

archive/issue_comments_149941.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@kiwifb](#comment%3A7):\n> * trac13123_library.patch : I am spotting something that I should have reported as a bug a long time ago. In sage/interfaces/gap.py GAP_STAMP is created in $SAGE_LOCAL/bin. This is a no-no if sage is installed globally and accessible by many users. That means all users would need to be able to write to $SAGE_LOCAL/bin to use gap from sage. There is no reason why GAP_STAMP has to be stored there. It should be moved to $DOT_SAGE or possibly even $GAP_DIR. There is a similar problem with qepcad but your patch doesn't touch that particular bit.\n\nSee #5155.",
    "created_at": "2012-06-19T11:51:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149941",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@kiwifb](#comment%3A7):
> * trac13123_library.patch : I am spotting something that I should have reported as a bug a long time ago. In sage/interfaces/gap.py GAP_STAMP is created in $SAGE_LOCAL/bin. This is a no-no if sage is installed globally and accessible by many users. That means all users would need to be able to write to $SAGE_LOCAL/bin to use gap from sage. There is no reason why GAP_STAMP has to be stored there. It should be moved to $DOT_SAGE or possibly even $GAP_DIR. There is a similar problem with qepcad but your patch doesn't touch that particular bit.

See #5155.



---

archive/issue_comments_149942.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@jdemeyer](#comment%3A10):\n> Why don't you\n> \n> ```\n> mkdir -p \"$SAGE_DATA\"\n> ```\n> in `spkg/install`?  That's easier than doing it in the various packages.\n\nMaybe easier, but since I was bumping the versions of these spkgs anyways for upgrading purposes, I figured I would have them take care of their own installation, rather than relying upon the build scripts.",
    "created_at": "2012-06-19T19:12:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149942",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@jdemeyer](#comment%3A10):
> Why don't you
> 
> ```
> mkdir -p "$SAGE_DATA"
> ```
> in `spkg/install`?  That's easier than doing it in the various packages.

Maybe easier, but since I was bumping the versions of these spkgs anyways for upgrading purposes, I figured I would have them take care of their own installation, rather than relying upon the build scripts.



---

archive/issue_comments_149943.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@kiwifb](#comment%3A7):\n> That will cause me a lot of work in sage-on-gentoo but overall that will make my life easier in the long term.\n\nYou should expect to see a number of these types of changes from me over the next few months. It should definitely simply things for you as the environment variables `SAGE_DATA` and `SAGE_EXTCODE` will now be globally respected in Sage.",
    "created_at": "2012-06-19T19:16:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149943",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@kiwifb](#comment%3A7):
> That will cause me a lot of work in sage-on-gentoo but overall that will make my life easier in the long term.

You should expect to see a number of these types of changes from me over the next few months. It should definitely simply things for you as the environment variables `SAGE_DATA` and `SAGE_EXTCODE` will now be globally respected in Sage.



---

archive/issue_comments_149944.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,3 +5,10 @@\n * [http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg](http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg)\n * [http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg](http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg)\n * [http://wstein.org/home/ohanar/spkgs/conway_polynomials-0.3.spkg](http://wstein.org/home/ohanar/spkgs/conway_polynomials-0.3.spkg)\n+\n+Installation Steps:\n+* Add new spkgs\n+* Apply [attachment: trac13123_library.patch](https://github.com/sagemath/sage/files/ticket13123/trac13123_library.patch.gz) to the library repo\n+* Apply [attachment: trac13123_root.patch](https://github.com/sagemath/sage/files/ticket13123/trac13123_root.patch.gz) to the root repo\n+* Apply [attachment: trac13123_scripts.patch](https://github.com/sagemath/sage/files/ticket13123/trac13123_scripts.patch.gz) to the scripts repo\n+* Apply [attachment: trac13123_extcode.patch](https://github.com/sagemath/sage/files/ticket13123/trac13123_extcode.patch.gz) to the extcode repo\n``````\n",
    "created_at": "2012-06-19T19:19:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149944",
    "user": "https://github.com/ohanar"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,3 +5,10 @@
 * [http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg](http://wstein.org/home/ohanar/spkgs/polytopes_db-20100210.p2.spkg)
 * [http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg](http://wstein.org/home/ohanar/spkgs/graphs-20120404.p4.spkg)
 * [http://wstein.org/home/ohanar/spkgs/conway_polynomials-0.3.spkg](http://wstein.org/home/ohanar/spkgs/conway_polynomials-0.3.spkg)
+
+Installation Steps:
+* Add new spkgs
+* Apply [attachment: trac13123_library.patch](https://github.com/sagemath/sage/files/ticket13123/trac13123_library.patch.gz) to the library repo
+* Apply [attachment: trac13123_root.patch](https://github.com/sagemath/sage/files/ticket13123/trac13123_root.patch.gz) to the root repo
+* Apply [attachment: trac13123_scripts.patch](https://github.com/sagemath/sage/files/ticket13123/trac13123_scripts.patch.gz) to the scripts repo
+* Apply [attachment: trac13123_extcode.patch](https://github.com/sagemath/sage/files/ticket13123/trac13123_extcode.patch.gz) to the extcode repo
``````




---

archive/issue_comments_149945.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@jdemeyer](#comment%3A9):\n> You should use `cp -R` instead of `cp -r` (like it was before).\n> \n> You should deal with upgrading (probably in the new extcode installer): if `SAGE_ROOT/data` exists, then move `SAGE_ROOT/data/extcode` to `SAGE_ROOT/devel/ext-main` and delete the whole directory `SAGE_ROOT/data`.\n\nDone and done.",
    "created_at": "2012-06-19T19:25:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149945",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@jdemeyer](#comment%3A9):
> You should use `cp -R` instead of `cp -r` (like it was before).
> 
> You should deal with upgrading (probably in the new extcode installer): if `SAGE_ROOT/data` exists, then move `SAGE_ROOT/data/extcode` to `SAGE_ROOT/devel/ext-main` and delete the whole directory `SAGE_ROOT/data`.

Done and done.



---

archive/issue_comments_149946.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nShould we deal with gap_stamp in this ticket or should I add it to #5155 and try to push its review for 5.1?",
    "created_at": "2012-06-19T22:19:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149946",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:16" align="right">comment:16</div>

Should we deal with gap_stamp in this ticket or should I add it to #5155 and try to push its review for 5.1?



---

archive/issue_comments_149947.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@kiwifb](#comment%3A16):\n> Should we deal with gap_stamp in this ticket or should I add it to #5155 and try to push its review for 5.1?\n\nSince I'm already touching that line, I may as well do it here. If you do end up finishing #5155 in time for 5.1, I'll have to rebase anyway :). (This is under the assumption that this ticket doesn't make it into 5.1, which I feel like is a pretty safe assumption.)",
    "created_at": "2012-06-19T22:37:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149947",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@kiwifb](#comment%3A16):
> Should we deal with gap_stamp in this ticket or should I add it to #5155 and try to push its review for 5.1?

Since I'm already touching that line, I may as well do it here. If you do end up finishing #5155 in time for 5.1, I'll have to rebase anyway :). (This is under the assumption that this ticket doesn't make it into 5.1, which I feel like is a pretty safe assumption.)



---

archive/issue_comments_149948.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nThanks. Yes considering that Jeroen wants beta5 to be the last beta before rc our target for both tickets becomes 5.2. I think gap_stamp should go in DOT_SAGE, GAP_DIR seems to be reserved for some gap workspace and it may unwise to put it in there.",
    "created_at": "2012-06-19T22:49:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149948",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:18" align="right">comment:18</div>

Thanks. Yes considering that Jeroen wants beta5 to be the last beta before rc our target for both tickets becomes 5.2. I think gap_stamp should go in DOT_SAGE, GAP_DIR seems to be reserved for some gap workspace and it may unwise to put it in there.



---

archive/issue_comments_149949.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nActually `GAP_DIR/workspace-*/` are the gap workspaces, so it should be fine to place in `GAP_DIR`.",
    "created_at": "2012-06-19T22:57:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149949",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:19" align="right">comment:19</div>

Actually `GAP_DIR/workspace-*/` are the gap workspaces, so it should be fine to place in `GAP_DIR`.



---

archive/issue_comments_149950.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nYou are right, I missed a line or two in the original file. Looks good to me.",
    "created_at": "2012-06-19T23:05:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149950",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:20" align="right">comment:20</div>

You are right, I missed a line or two in the original file. Looks good to me.



---

archive/issue_comments_149951.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nQuestion, why do we sometimes get the SAGE_* variables from os.environ and sometimes from sage.misc.misc? Should we try to be uniform and do it one way only?",
    "created_at": "2012-06-28T22:58:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149951",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:21" align="right">comment:21</div>

Question, why do we sometimes get the SAGE_* variables from os.environ and sometimes from sage.misc.misc? Should we try to be uniform and do it one way only?



---

archive/issue_comments_149952.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@kiwifb](#comment%3A21):\n> Question, why do we sometimes get the SAGE_* variables from os.environ and sometimes from sage.misc.misc? Should we try to be uniform and do it one way only?\n\nI would have it imported from `sage.misc.misc` (well actually I would move it to `sage.misc.env`, but that currently doesn't exist). I think that I only left one instance of `os.environ` between `SAGE_DATA` and `SAGE_EXTCODE` with this patch (I haven't touched the other `SAGE_*` with this patch).",
    "created_at": "2012-06-29T05:55:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149952",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@kiwifb](#comment%3A21):
> Question, why do we sometimes get the SAGE_* variables from os.environ and sometimes from sage.misc.misc? Should we try to be uniform and do it one way only?

I would have it imported from `sage.misc.misc` (well actually I would move it to `sage.misc.env`, but that currently doesn't exist). I think that I only left one instance of `os.environ` between `SAGE_DATA` and `SAGE_EXTCODE` with this patch (I haven't touched the other `SAGE_*` with this patch).



---

archive/issue_comments_149953.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nFYI, looking at the code there might be an issue with using a `GAP_STAMP` shared by multiple copies of Sage (I'm not positive, I don't really know the code). For right now I'm using the `SAGE_EXTCODE` directory as the `GAP_STAMP`.",
    "created_at": "2012-06-30T20:42:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149953",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:23" align="right">comment:23</div>

FYI, looking at the code there might be an issue with using a `GAP_STAMP` shared by multiple copies of Sage (I'm not positive, I don't really know the code). For right now I'm using the `SAGE_EXTCODE` directory as the `GAP_STAMP`.



---

archive/issue_comments_149954.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@ohanar](#comment%3A23):\n> FYI, looking at the code there might be an issue with using a `GAP_STAMP` shared by multiple copies of Sage (I'm not positive, I don't really know the code). For right now I'm using the `SAGE_EXTCODE` directory as the `GAP_STAMP`.\n\nPutting it in SAGE_EXTCODE is about as bad as putting it in SAGE_LOCAL/bin as it was initially. If you are concerned about multiple sage session running in parallel that's would still be a problem wherever you put it. I am not sure how the file is used but we don't remove it or anything. The real question is: is it actively used by gap? If gap just check for it's presence then it is OK. If it is used then it may have to be unique for each sage session and be cleaned on exit.",
    "created_at": "2012-07-01T22:20:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149954",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@ohanar](#comment%3A23):
> FYI, looking at the code there might be an issue with using a `GAP_STAMP` shared by multiple copies of Sage (I'm not positive, I don't really know the code). For right now I'm using the `SAGE_EXTCODE` directory as the `GAP_STAMP`.

Putting it in SAGE_EXTCODE is about as bad as putting it in SAGE_LOCAL/bin as it was initially. If you are concerned about multiple sage session running in parallel that's would still be a problem wherever you put it. I am not sure how the file is used but we don't remove it or anything. The real question is: is it actively used by gap? If gap just check for it's presence then it is OK. If it is used then it may have to be unique for each sage session and be cleaned on exit.



---

archive/issue_comments_149955.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@kiwifb](#comment%3A24):\n> Putting it in SAGE_EXTCODE is about as bad as putting it in SAGE_LOCAL/bin as it was initially.\n\nNot really, since it removes yet another instance of sage trying to write to someplace it shouldn't be at runtime.\n\nThe purpose of `GAP_STAMP` seems to be a check on whether it needs to refresh the workspaces. Really, this will all become a moot point if/when libgap is finished.",
    "created_at": "2012-07-02T04:24:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149955",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@kiwifb](#comment%3A24):
> Putting it in SAGE_EXTCODE is about as bad as putting it in SAGE_LOCAL/bin as it was initially.

Not really, since it removes yet another instance of sage trying to write to someplace it shouldn't be at runtime.

The purpose of `GAP_STAMP` seems to be a check on whether it needs to refresh the workspaces. Really, this will all become a moot point if/when libgap is finished.



---

archive/issue_comments_149956.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nAs far as I am concerned SAGE_EXTCODE is a place sage shouldn't write at runtime. On a system wide installation that would be a folder that a user is not supposed to own. If a sys-admin install sage under /usr/local/sage-xxx for example, it would resolve to /usr/local/sage-xxx/local/share/sage/ext and as a sys-admin I object that my users have to write something there. Their home folder, tmp and any scratch space set for them is where it should go.\n\nThat's my perspective.",
    "created_at": "2012-07-02T04:43:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149956",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:26" align="right">comment:26</div>

As far as I am concerned SAGE_EXTCODE is a place sage shouldn't write at runtime. On a system wide installation that would be a folder that a user is not supposed to own. If a sys-admin install sage under /usr/local/sage-xxx for example, it would resolve to /usr/local/sage-xxx/local/share/sage/ext and as a sys-admin I object that my users have to write something there. Their home folder, tmp and any scratch space set for them is where it should go.

That's my perspective.



---

archive/issue_comments_149957.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@kiwifb](#comment%3A26):\n> As far as I am concerned SAGE_EXTCODE is a place sage shouldn't write at runtime.\n\nI don't write to `SAGE_EXTCODE`, I just use its creation for the timestamp that gap wants. It used to be that when you first started sage, it would touch `SAGE_LOCAL/bin/gap_stamp` and then use the timestamp of that.\n\nI agree, nothing should try to write to `SAGE_LOCAL` or its subdirectories in the long run.",
    "created_at": "2012-07-02T05:11:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149957",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@kiwifb](#comment%3A26):
> As far as I am concerned SAGE_EXTCODE is a place sage shouldn't write at runtime.

I don't write to `SAGE_EXTCODE`, I just use its creation for the timestamp that gap wants. It used to be that when you first started sage, it would touch `SAGE_LOCAL/bin/gap_stamp` and then use the timestamp of that.

I agree, nothing should try to write to `SAGE_LOCAL` or its subdirectories in the long run.



---

archive/issue_comments_149958.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nOK. If we just want a GAP_STAMP file for everyone and in SAGE_EXTCODE it should really be created by the extcode spkg. Is it a file we really need?",
    "created_at": "2012-07-03T02:29:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149958",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:28" align="right">comment:28</div>

OK. If we just want a GAP_STAMP file for everyone and in SAGE_EXTCODE it should really be created by the extcode spkg. Is it a file we really need?



---

archive/issue_comments_149959.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\n@kiwifb\n\nDo you think you are capable of finishing your review of this? (No pressure, just want to know if you can, so that I can find someone else to review it if you aren't able to.)",
    "created_at": "2012-09-09T23:18:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149959",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:29" align="right">comment:29</div>

@kiwifb

Do you think you are capable of finishing your review of this? (No pressure, just want to know if you can, so that I can find someone else to review it if you aren't able to.)



---

archive/issue_comments_149960.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nYes, I will hopefully tomorrow. I was a bit down today - but this is important and we should move this.",
    "created_at": "2012-09-10T08:46:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149960",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:30" align="right">comment:30</div>

Yes, I will hopefully tomorrow. I was a bit down today - but this is important and we should move this.



---

archive/issue_comments_149961.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nWhy `local/share/sage/data` and not `local/share/sage` or even `local/share`?",
    "created_at": "2012-09-10T08:52:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149961",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:31" align="right">comment:31</div>

Why `local/share/sage/data` and not `local/share/sage` or even `local/share`?



---

archive/issue_comments_149962.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nI would argue for `local/share` because the stuff in `SAGE_DATA` (apart from extcode) isn't part of Sage.  It's part of external packages/databases.  So I think it's wrong to use a `sage` subdirectory.\n\nInstalling databases in `local/share/sage/data` is like installing all binaries in `local/bin/sage/binaries` and we don't do that either.\n\nFor extcode, `local/share/sage` makes sense.",
    "created_at": "2012-09-10T08:57:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149962",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:32" align="right">comment:32</div>

I would argue for `local/share` because the stuff in `SAGE_DATA` (apart from extcode) isn't part of Sage.  It's part of external packages/databases.  So I think it's wrong to use a `sage` subdirectory.

Installing databases in `local/share/sage/data` is like installing all binaries in `local/bin/sage/binaries` and we don't do that either.

For extcode, `local/share/sage` makes sense.



---

archive/issue_comments_149963.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nAs far as I can tell, this ticket will break upgrading because an upgraded Sage will still have the `SAGE_ROOT/data` directory.  This could be simply ignored and therefore harmless, but then it needs to be kept inside `.hgignore`.  Alternatively, you could move `SAGE_ROOT/data` or even delete it.\n\nAlso, the database packages should depend on `SAGE_ROOT_REPO`, otherwise they won't see the new `sage-env` when upgrading.",
    "created_at": "2012-09-10T09:10:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149963",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:33" align="right">comment:33</div>

As far as I can tell, this ticket will break upgrading because an upgraded Sage will still have the `SAGE_ROOT/data` directory.  This could be simply ignored and therefore harmless, but then it needs to be kept inside `.hgignore`.  Alternatively, you could move `SAGE_ROOT/data` or even delete it.

Also, the database packages should depend on `SAGE_ROOT_REPO`, otherwise they won't see the new `sage-env` when upgrading.



---

archive/issue_comments_149964.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nI can agree with the SAGE_DATA location argument of Jeroen. The only argument against is that for most of them sage is the only application I can think of that make use of it. The splitting of the data is purely a convenience because it ease maintenance. In that case local/share/sage would be most appropriate.",
    "created_at": "2012-09-10T09:18:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149964",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:34" align="right">comment:34</div>

I can agree with the SAGE_DATA location argument of Jeroen. The only argument against is that for most of them sage is the only application I can think of that make use of it. The splitting of the data is purely a convenience because it ease maintenance. In that case local/share/sage would be most appropriate.



---

archive/issue_comments_149965.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nSure, my main thing is just removing SAGE_ROOT/data and moving the databases that were there to some place in SAGE_LOCAL.",
    "created_at": "2012-09-10T21:18:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149965",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:36" align="right">comment:36</div>

Sure, my main thing is just removing SAGE_ROOT/data and moving the databases that were there to some place in SAGE_LOCAL.



---

archive/issue_events_180437.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-09-11T06:30:49Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "title_is": "Move SAGE_DATA to SAGE_LOCAL/share",
    "title_was": "Move SAGE_DATA to SAGE_LOCAL/share/sage/data",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13123#event-180437"
}
```



---

archive/issue_events_180438.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-09-11T06:30:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13123#event-180438"
}
```



---

archive/issue_events_180439.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-09-11T06:30:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13123#event-180439"
}
```



---

archive/issue_comments_149966.json:
```json
{
    "body": "Attachment: **[elliptic_curves.diff.gz](https://github.com/sagemath/sage/files/ticket13123/elliptic_curves.diff.gz)**\n\nfor review purposes",
    "created_at": "2012-09-11T07:49:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149966",
    "user": "https://github.com/ohanar"
}
```

Attachment: **[elliptic_curves.diff.gz](https://github.com/sagemath/sage/files/ticket13123/elliptic_curves.diff.gz)**

for review purposes



---

archive/issue_comments_149967.json:
```json
{
    "body": "Attachment: **[polytopes_db.diff.gz](https://github.com/sagemath/sage/files/ticket13123/polytopes_db.diff.gz)**\n\nfor review purpose",
    "created_at": "2012-09-11T07:53:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149967",
    "user": "https://github.com/ohanar"
}
```

Attachment: **[polytopes_db.diff.gz](https://github.com/sagemath/sage/files/ticket13123/polytopes_db.diff.gz)**

for review purpose



---

archive/issue_comments_149968.json:
```json
{
    "body": "for review purposes",
    "created_at": "2012-09-11T07:55:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149968",
    "user": "https://github.com/ohanar"
}
```

for review purposes



---

archive/issue_comments_149969.json:
```json
{
    "body": "Attachment: **[conway_polynomials.diff.gz](https://github.com/sagemath/sage/files/ticket13123/conway_polynomials.diff.gz)**\n\nfor review purposes",
    "created_at": "2012-09-11T07:58:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149969",
    "user": "https://github.com/ohanar"
}
```

Attachment: **[conway_polynomials.diff.gz](https://github.com/sagemath/sage/files/ticket13123/conway_polynomials.diff.gz)**

for review purposes



---

archive/issue_events_180440.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2012-09-11T08:02:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13123#event-180440"
}
```



---

archive/issue_events_180441.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2012-09-11T08:02:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13123#event-180441"
}
```



---

archive/issue_comments_149970.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nAttachment: **[graphs.diff.gz](https://github.com/sagemath/sage/files/ticket13123/graphs.diff.gz)**\n\nOk, moved everything to `SAGE_LOCAL/share` (added `SAGE_SHARE` for convenience), and removed the `SAGE_DATA` environment variable.\n\nI also added a bit to `SAGE_ROOT/spkg/install` to handle upgrading.",
    "created_at": "2012-09-11T08:02:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149970",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:38" align="right">comment:38</div>

Attachment: **[graphs.diff.gz](https://github.com/sagemath/sage/files/ticket13123/graphs.diff.gz)**

Ok, moved everything to `SAGE_LOCAL/share` (added `SAGE_SHARE` for convenience), and removed the `SAGE_DATA` environment variable.

I also added a bit to `SAGE_ROOT/spkg/install` to handle upgrading.



---

archive/issue_comments_149971.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nSome optional/experimental packages use `SAGE_DATA`:\n1. cunningham_tables-1.0\n2. p_group_cohomology-2.1.2\n3. database_stein_watkins_mini.p0\n4. sage-mode-0.7\n5. database_cremona_ellcurve-20120827\n6. database_sloane_oeis-2005-12\n7. database_jones_numfield-v4\n8. soya-0.11.2.p0\n\nSome optional packages use `$SAGE_ROOT/data':\n1. database_odlyzko_zeta\n2. database_symbolic_data-20070206\n3. database_kohel-20060803\n\nFor these reasons, I would keep `SAGE_DATA` as synonym of `SAGE_SHARE` and also make a symlink\n\n```\n$SAGE_ROOT/data -> local/share\n```",
    "created_at": "2012-09-11T09:13:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149971",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:39" align="right">comment:39</div>

Some optional/experimental packages use `SAGE_DATA`:
1. cunningham_tables-1.0
2. p_group_cohomology-2.1.2
3. database_stein_watkins_mini.p0
4. sage-mode-0.7
5. database_cremona_ellcurve-20120827
6. database_sloane_oeis-2005-12
7. database_jones_numfield-v4
8. soya-0.11.2.p0

Some optional packages use `$SAGE_ROOT/data':
1. database_odlyzko_zeta
2. database_symbolic_data-20070206
3. database_kohel-20060803

For these reasons, I would keep `SAGE_DATA` as synonym of `SAGE_SHARE` and also make a symlink

```
$SAGE_ROOT/data -> local/share
```



---

archive/issue_comments_149972.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nKeeping SAGE_DATA for a little while as a symlink definitely sound like a good idea. I don't remember  explain_picklejar to be removed in trac13123_library.patch before nor do I understand the rational for the removal. Care to shade some light on that?",
    "created_at": "2012-09-11T10:26:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149972",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:40" align="right">comment:40</div>

Keeping SAGE_DATA for a little while as a symlink definitely sound like a good idea. I don't remember  explain_picklejar to be removed in trac13123_library.patch before nor do I understand the rational for the removal. Care to shade some light on that?



---

archive/issue_comments_149973.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nIn the extcode patch, this comment is clearly wrong:\n\n```\ncp -pR * \"$SAGE_ROOT/devel/ext-main/\" # Creates new sagenb-main dir\n```",
    "created_at": "2012-09-11T10:33:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149973",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:41" align="right">comment:41</div>

In the extcode patch, this comment is clearly wrong:

```
cp -pR * "$SAGE_ROOT/devel/ext-main/" # Creates new sagenb-main dir
```



---

archive/issue_comments_149974.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nWhy change the logic in `sage/databases/cremona.py`?",
    "created_at": "2012-09-11T10:37:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149974",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:42" align="right">comment:42</div>

Why change the logic in `sage/databases/cremona.py`?



---

archive/issue_comments_149975.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nIn extcode `spkg-install`, why do\n\n```\nif [ -d .hg ]\n```\n\nYou *know* that `.hg` exists (if not, that would be a bug).",
    "created_at": "2012-09-11T15:30:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149975",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:43" align="right">comment:43</div>

In extcode `spkg-install`, why do

```
if [ -d .hg ]
```

You *know* that `.hg` exists (if not, that would be a bug).



---

archive/issue_comments_149976.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\n`spkg/install`: indentation should be 4 spaces.",
    "created_at": "2012-09-11T15:32:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149976",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:44" align="right">comment:44</div>

`spkg/install`: indentation should be 4 spaces.



---

archive/issue_comments_149977.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nI changed the logic in `sage.databases.cremona` since I wrote it, and it when replacing everything, it annoyed me that it wasn't factored appropriately.\n\nI'll see about fixing the extcode `spkg-install` (most of the code there comes from a recent version of the sagenb `spkg-install`) and`spkg/install`, as well as adding a symlink for `SAGE_DATA`.",
    "created_at": "2012-09-11T20:08:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149977",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:45" align="right">comment:45</div>

I changed the logic in `sage.databases.cremona` since I wrote it, and it when replacing everything, it annoyed me that it wasn't factored appropriately.

I'll see about fixing the extcode `spkg-install` (most of the code there comes from a recent version of the sagenb `spkg-install`) and`spkg/install`, as well as adding a symlink for `SAGE_DATA`.



---

archive/issue_events_180442.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2012-09-11T20:08:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13123#event-180442"
}
```



---

archive/issue_events_180443.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2012-09-11T20:08:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13123#event-180443"
}
```



---

archive/issue_comments_149978.json:
```json
{
    "body": "apply to extcode repo",
    "created_at": "2012-09-11T20:26:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149978",
    "user": "https://github.com/ohanar"
}
```

apply to extcode repo



---

archive/issue_comments_149979.json:
```json
{
    "body": "Attachment: **[trac13123_extcode.patch.gz](https://github.com/sagemath/sage/files/ticket13123/trac13123_extcode.patch.gz)**\n\nAttachment: **[trac13123_scripts.patch.gz](https://github.com/sagemath/sage/files/ticket13123/trac13123_scripts.patch.gz)**\n\napply to scripts repo",
    "created_at": "2012-09-11T20:27:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149979",
    "user": "https://github.com/ohanar"
}
```

Attachment: **[trac13123_extcode.patch.gz](https://github.com/sagemath/sage/files/ticket13123/trac13123_extcode.patch.gz)**

Attachment: **[trac13123_scripts.patch.gz](https://github.com/sagemath/sage/files/ticket13123/trac13123_scripts.patch.gz)**

apply to scripts repo



---

archive/issue_events_180444.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2012-09-11T20:30:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13123#event-180444"
}
```



---

archive/issue_events_180445.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2012-09-11T20:30:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13123#event-180445"
}
```



---

archive/issue_comments_149980.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nI also fixed the commit message for the patches for the sage repos (I had already fixed the commit messages for the spkgs).",
    "created_at": "2012-09-11T20:30:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149980",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:46" align="right">comment:46</div>

I also fixed the commit message for the patches for the sage repos (I had already fixed the commit messages for the spkgs).



---

archive/issue_comments_149981.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nI would really prefer to separate the refactoring of the Cremona database code from this ticket (and then have either this ticket depend on that or the other way around).",
    "created_at": "2012-09-12T08:09:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149981",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:47" align="right">comment:47</div>

I would really prefer to separate the refactoring of the Cremona database code from this ticket (and then have either this ticket depend on that or the other way around).



---

archive/issue_comments_149982.json:
```json
{
    "body": "Changed reviewer from **Fran\u00e7ois Bissey** to **Fran\u00e7ois Bissey, Jeroen Demeyer**",
    "created_at": "2012-09-12T08:28:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149982",
    "user": "https://github.com/jdemeyer"
}
```

Changed reviewer from **François Bissey** to **François Bissey, Jeroen Demeyer**



---

archive/issue_comments_149983.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\n`sage/interfaces/gap.py`: why change `hash(SAGE_ROOT)` to `hash(SAGE_LOCAL)`?  I don't understand why you made that change, nor the implications of that change.",
    "created_at": "2012-09-12T08:52:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149983",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:49" align="right">comment:49</div>

`sage/interfaces/gap.py`: why change `hash(SAGE_ROOT)` to `hash(SAGE_LOCAL)`?  I don't understand why you made that change, nor the implications of that change.



---

archive/issue_comments_149984.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,6 +9,6 @@\n Installation Steps:\n * Add new spkgs\n * Apply [attachment: trac13123_library.patch](https://github.com/sagemath/sage/files/ticket13123/trac13123_library.patch.gz) to the library repo\n-* Apply [attachment: trac13123_root.patch](https://github.com/sagemath/sage/files/ticket13123/trac13123_root.patch.gz) to the root repo\n+* Apply [attachment: trac13123_root.patch](https://github.com/sagemath/sage/files/ticket13123/trac13123_root.patch.gz) and [attachment: 13123_root_review.patch](https://github.com/sagemath/sage/files/ticket13123/13123_root_review.patch.gz) to the root repo\n * Apply [attachment: trac13123_scripts.patch](https://github.com/sagemath/sage/files/ticket13123/trac13123_scripts.patch.gz) to the scripts repo\n-* Apply [attachment: trac13123_extcode.patch](https://github.com/sagemath/sage/files/ticket13123/trac13123_extcode.patch.gz) to the extcode repo\n+* Apply [attachment: trac13123_extcode.patch](https://github.com/sagemath/sage/files/ticket13123/trac13123_extcode.patch.gz) and [attachment: 13123_extcode_review.patch](https://github.com/sagemath/sage/files/ticket13123/13123_extcode_review.patch.gz) to the extcode repo\n``````\n",
    "created_at": "2012-09-12T09:03:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149984",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,6 +9,6 @@
 Installation Steps:
 * Add new spkgs
 * Apply [attachment: trac13123_library.patch](https://github.com/sagemath/sage/files/ticket13123/trac13123_library.patch.gz) to the library repo
-* Apply [attachment: trac13123_root.patch](https://github.com/sagemath/sage/files/ticket13123/trac13123_root.patch.gz) to the root repo
+* Apply [attachment: trac13123_root.patch](https://github.com/sagemath/sage/files/ticket13123/trac13123_root.patch.gz) and [attachment: 13123_root_review.patch](https://github.com/sagemath/sage/files/ticket13123/13123_root_review.patch.gz) to the root repo
 * Apply [attachment: trac13123_scripts.patch](https://github.com/sagemath/sage/files/ticket13123/trac13123_scripts.patch.gz) to the scripts repo
-* Apply [attachment: trac13123_extcode.patch](https://github.com/sagemath/sage/files/ticket13123/trac13123_extcode.patch.gz) to the extcode repo
+* Apply [attachment: trac13123_extcode.patch](https://github.com/sagemath/sage/files/ticket13123/trac13123_extcode.patch.gz) and [attachment: 13123_extcode_review.patch](https://github.com/sagemath/sage/files/ticket13123/13123_extcode_review.patch.gz) to the extcode repo
``````




---

archive/issue_comments_149985.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nBased on purely reading the patches: **positive review** modulo my reviewer patches and the Cremona and GAP changes that I mentioned.\n\nIn any case, this still needs massive amounts of testing.",
    "created_at": "2012-09-12T09:03:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149985",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:50" align="right">comment:50</div>

Based on purely reading the patches: **positive review** modulo my reviewer patches and the Cremona and GAP changes that I mentioned.

In any case, this still needs massive amounts of testing.



---

archive/issue_comments_149986.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nSorry but I still don't understand the changes in sage/misc/explain_pickle.py and how they are related to the rest of the ticket. It may just be due to a lack of understanding on my part on the working of the pickle jar but the change seems unrelated to the rest of the ticket. Could someone offer me an explanation?",
    "created_at": "2012-09-12T09:16:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149986",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:51" align="right">comment:51</div>

Sorry but I still don't understand the changes in sage/misc/explain_pickle.py and how they are related to the rest of the ticket. It may just be due to a lack of understanding on my part on the working of the pickle jar but the change seems unrelated to the rest of the ticket. Could someone offer me an explanation?



---

archive/issue_events_180446.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-09-12T14:46:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13123#event-180446"
}
```



---

archive/issue_events_180447.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-09-12T14:46:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13123#event-180447"
}
```



---

archive/issue_events_180448.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-09-12T20:07:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13123#event-180448"
}
```



---

archive/issue_events_180449.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-09-12T20:07:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13123#event-180449"
}
```



---

archive/issue_comments_149987.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nAttachment: **[13123_extcode_review.patch.gz](https://github.com/sagemath/sage/files/ticket13123/13123_extcode_review.patch.gz)**",
    "created_at": "2012-09-12T20:07:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149987",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:53" align="right">comment:53</div>

Attachment: **[13123_extcode_review.patch.gz](https://github.com/sagemath/sage/files/ticket13123/13123_extcode_review.patch.gz)**



---

archive/issue_comments_149988.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nThis should be fixed:\n\n```\nsage -t --optional --long \"devel/sage/sage/databases/symbolic_data.py\"\n**********************************************************************\nFile \"/release/sage-5.4.beta2-try13123/devel/sage/sage/databases/symbolic_data.py\", line 37:\n    sage: sd = SymbolicData(); sd # optional - database_symbolic_data\nException raised:\n    Traceback (most recent call last):\n      File \"/release/sage-5.4.beta2-try13123/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/release/sage-5.4.beta2-try13123/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/release/sage-5.4.beta2-try13123/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_0[2]>\", line 1, in <module>\n        sd = SymbolicData(); sd # optional - database_symbolic_data###line 37:\n    sage: sd = SymbolicData(); sd # optional - database_symbolic_data\n      File \"/release/sage-5.4.beta2-try13123/local/lib/python/site-packages/sage/databases/symbolic_data.py\", line 78, in __init__\n        path=os.path.join(sage.misc.misc.SAGE_SHARE, 'symbolic_data')\n    NameError: global name 'sage' is not defined\n**********************************************************************\n```",
    "created_at": "2012-09-12T21:04:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149988",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:54" align="right">comment:54</div>

This should be fixed:

```
sage -t --optional --long "devel/sage/sage/databases/symbolic_data.py"
**********************************************************************
File "/release/sage-5.4.beta2-try13123/devel/sage/sage/databases/symbolic_data.py", line 37:
    sage: sd = SymbolicData(); sd # optional - database_symbolic_data
Exception raised:
    Traceback (most recent call last):
      File "/release/sage-5.4.beta2-try13123/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/release/sage-5.4.beta2-try13123/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/release/sage-5.4.beta2-try13123/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_0[2]>", line 1, in <module>
        sd = SymbolicData(); sd # optional - database_symbolic_data###line 37:
    sage: sd = SymbolicData(); sd # optional - database_symbolic_data
      File "/release/sage-5.4.beta2-try13123/local/lib/python/site-packages/sage/databases/symbolic_data.py", line 78, in __init__
        path=os.path.join(sage.misc.misc.SAGE_SHARE, 'symbolic_data')
    NameError: global name 'sage' is not defined
**********************************************************************
```



---

archive/issue_events_180450.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-09-12T21:04:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13123#event-180450"
}
```



---

archive/issue_events_180451.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-09-12T21:04:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13123#event-180451"
}
```



---

archive/issue_comments_149989.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nAlso, I can't get the `sloane_database` optional doctests to work in `sage/databases/sloane.py`, but I don't think it's because of this ticket.",
    "created_at": "2012-09-12T21:10:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149989",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:55" align="right">comment:55</div>

Also, I can't get the `sloane_database` optional doctests to work in `sage/databases/sloane.py`, but I don't think it's because of this ticket.



---

archive/issue_comments_149990.json:
```json
{
    "body": "apply to sage library",
    "created_at": "2012-09-12T21:28:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149990",
    "user": "https://github.com/ohanar"
}
```

apply to sage library



---

archive/issue_events_180452.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2012-09-12T21:33:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13123#event-180452"
}
```



---

archive/issue_events_180453.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2012-09-12T21:33:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13123#event-180453"
}
```



---

archive/issue_comments_149991.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nAttachment: **[trac13123_library.patch.gz](https://github.com/sagemath/sage/files/ticket13123/trac13123_library.patch.gz)**\n\n@kiwifb\n\nBecause the commented out code references `SAGE_DATA/extcode` and hasn't been used in a long long time (see #6233).\n\nOk, updated. Changes:\n\n* Removed refactoring of `sage.databases.cremona`\n* Reverted change of `SAGE_ROOT -> SAGE_LOCAL` in `sage.interfaces.gap` (better done in #13432)\n* fixed `sage.databases.symbolic_data`",
    "created_at": "2012-09-12T21:33:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149991",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:56" align="right">comment:56</div>

Attachment: **[trac13123_library.patch.gz](https://github.com/sagemath/sage/files/ticket13123/trac13123_library.patch.gz)**

@kiwifb

Because the commented out code references `SAGE_DATA/extcode` and hasn't been used in a long long time (see #6233).

Ok, updated. Changes:

* Removed refactoring of `sage.databases.cremona`
* Reverted change of `SAGE_ROOT -> SAGE_LOCAL` in `sage.interfaces.gap` (better done in #13432)
* fixed `sage.databases.symbolic_data`



---

archive/issue_comments_149992.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\n`sage --bdist` doesn't copy `devel/ext`, leading to non-working binary builds.",
    "created_at": "2012-09-13T06:27:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149992",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:57" align="right">comment:57</div>

`sage --bdist` doesn't copy `devel/ext`, leading to non-working binary builds.



---

archive/issue_events_180454.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-09-13T06:27:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13123#event-180454"
}
```



---

archive/issue_events_180455.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-09-13T06:27:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13123#event-180455"
}
```



---

archive/issue_comments_149993.json:
```json
{
    "body": "Dependencies: **#13457**",
    "created_at": "2012-09-13T06:45:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149993",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#13457**



---

archive/issue_comments_149994.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,5 +10,5 @@\n * Add new spkgs\n * Apply [attachment: trac13123_library.patch](https://github.com/sagemath/sage/files/ticket13123/trac13123_library.patch.gz) to the library repo\n * Apply [attachment: trac13123_root.patch](https://github.com/sagemath/sage/files/ticket13123/trac13123_root.patch.gz) and [attachment: 13123_root_review.patch](https://github.com/sagemath/sage/files/ticket13123/13123_root_review.patch.gz) to the root repo\n-* Apply [attachment: trac13123_scripts.patch](https://github.com/sagemath/sage/files/ticket13123/trac13123_scripts.patch.gz) to the scripts repo\n+* Apply #13457 and [attachment: trac13123_scripts.patch](https://github.com/sagemath/sage/files/ticket13123/trac13123_scripts.patch.gz) and [attachment: 13123_bdist.patch](https://github.com/sagemath/sage/files/ticket13123/13123_bdist.patch.gz) to the scripts repo\n * Apply [attachment: trac13123_extcode.patch](https://github.com/sagemath/sage/files/ticket13123/trac13123_extcode.patch.gz) and [attachment: 13123_extcode_review.patch](https://github.com/sagemath/sage/files/ticket13123/13123_extcode_review.patch.gz) to the extcode repo\n``````\n",
    "created_at": "2012-09-13T06:47:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149994",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,5 +10,5 @@
 * Add new spkgs
 * Apply [attachment: trac13123_library.patch](https://github.com/sagemath/sage/files/ticket13123/trac13123_library.patch.gz) to the library repo
 * Apply [attachment: trac13123_root.patch](https://github.com/sagemath/sage/files/ticket13123/trac13123_root.patch.gz) and [attachment: 13123_root_review.patch](https://github.com/sagemath/sage/files/ticket13123/13123_root_review.patch.gz) to the root repo
-* Apply [attachment: trac13123_scripts.patch](https://github.com/sagemath/sage/files/ticket13123/trac13123_scripts.patch.gz) to the scripts repo
+* Apply #13457 and [attachment: trac13123_scripts.patch](https://github.com/sagemath/sage/files/ticket13123/trac13123_scripts.patch.gz) and [attachment: 13123_bdist.patch](https://github.com/sagemath/sage/files/ticket13123/13123_bdist.patch.gz) to the scripts repo
 * Apply [attachment: trac13123_extcode.patch](https://github.com/sagemath/sage/files/ticket13123/trac13123_extcode.patch.gz) and [attachment: 13123_extcode_review.patch](https://github.com/sagemath/sage/files/ticket13123/13123_extcode_review.patch.gz) to the extcode repo
``````




---

archive/issue_events_180456.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-09-13T06:47:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13123#event-180456"
}
```



---

archive/issue_events_180457.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-09-13T06:47:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13123#event-180457"
}
```



---

archive/issue_events_180458.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-09-13T09:06:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13123#event-180458"
}
```



---

archive/issue_events_180459.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-09-13T09:06:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13123#event-180459"
}
```



---

archive/issue_events_180460.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-09-13T11:51:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13123#event-180460"
}
```



---

archive/issue_events_180461.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-09-13T11:51:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13123#event-180461"
}
```



---

archive/issue_comments_149995.json:
```json
{
    "body": "Attachment: **[13123_bdist.patch.gz](https://github.com/sagemath/sage/files/ticket13123/13123_bdist.patch.gz)**",
    "created_at": "2012-09-14T06:58:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149995",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[13123_bdist.patch.gz](https://github.com/sagemath/sage/files/ticket13123/13123_bdist.patch.gz)**



---

archive/issue_comments_149996.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nTested building from scratch, sdist, bdist, works fine.  Positive review to everything not authored by me.\n\nI agree with the deleting of the commented-out code in `sage/misc/explain_pickle.py`.  If people really want to do something with that code, it's still in the Mercurial history.\n\nMy reviewer patches still need review.",
    "created_at": "2012-09-16T17:28:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149996",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:62" align="right">comment:62</div>

Tested building from scratch, sdist, bdist, works fine.  Positive review to everything not authored by me.

I agree with the deleting of the commented-out code in `sage/misc/explain_pickle.py`.  If people really want to do something with that code, it's still in the Mercurial history.

My reviewer patches still need review.



---

archive/issue_comments_149997.json:
```json
{
    "body": "Changed author from **R. Andrew Ohana** to **R. Andrew Ohana,  Jeroen Demeyer**",
    "created_at": "2012-09-16T20:50:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149997",
    "user": "https://github.com/ohanar"
}
```

Changed author from **R. Andrew Ohana** to **R. Andrew Ohana,  Jeroen Demeyer**



---

archive/issue_events_180462.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2012-09-16T20:57:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13123#event-180462"
}
```



---

archive/issue_events_180463.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2012-09-16T20:57:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13123#event-180463"
}
```



---

archive/issue_comments_149998.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nMercurial should no longer be marked as a dependency for the extcode spkg (it is no longer used in the spkg-install).",
    "created_at": "2012-09-16T20:57:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149998",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:64" align="right">comment:64</div>

Mercurial should no longer be marked as a dependency for the extcode spkg (it is no longer used in the spkg-install).



---

archive/issue_comments_149999.json:
```json
{
    "body": "Attachment: **[13123_root_review.patch.gz](https://github.com/sagemath/sage/files/ticket13123/13123_root_review.patch.gz)**",
    "created_at": "2012-09-16T21:45:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-149999",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[13123_root_review.patch.gz](https://github.com/sagemath/sage/files/ticket13123/13123_root_review.patch.gz)**



---

archive/issue_events_180464.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-09-16T21:46:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13123#event-180464"
}
```



---

archive/issue_events_180465.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-09-16T21:46:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13123#event-180465"
}
```



---

archive/issue_comments_150000.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nLooks all clear to me. I didn't really notice that the explain_pickle code was commented out last week, probably because of other stuff going on locally. But still happy that this is related to the rest of the ticket and not a freebie done at the same time.\n\nAs far as I can see it is ready to go.",
    "created_at": "2012-09-17T00:56:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-150000",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:66" align="right">comment:66</div>

Looks all clear to me. I didn't really notice that the explain_pickle code was commented out last week, probably because of other stuff going on locally. But still happy that this is related to the rest of the ticket and not a freebie done at the same time.

As far as I can see it is ready to go.



---

archive/issue_events_180466.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2012-09-17T00:56:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13123#event-180466"
}
```



---

archive/issue_events_180467.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2012-09-17T00:56:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13123#event-180467"
}
```



---

archive/issue_events_180468.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-09-18T06:41:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13123#event-180468"
}
```



---

archive/issue_events_180469.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-09-18T06:41:19Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13123#event-180469"
}
```



---

archive/issue_comments_150001.json:
```json
{
    "body": "Merged: **sage-5.4.beta2**",
    "created_at": "2012-09-18T06:41:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-150001",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.4.beta2**



---

archive/issue_comments_150002.json:
```json
{
    "body": "apply to root repo",
    "created_at": "2012-09-19T06:38:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-150002",
    "user": "https://github.com/jdemeyer"
}
```

apply to root repo



---

archive/issue_comments_150003.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\nAttachment: **[trac13123_root.patch.gz](https://github.com/sagemath/sage/files/ticket13123/trac13123_root.patch.gz)**\n\nRebased [attachment: trac13123_root.patch](https://github.com/sagemath/sage/files/ticket13123/trac13123_root.patch.gz) because of fuzz.",
    "created_at": "2012-09-19T06:38:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-150003",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:68" align="right">comment:68</div>

Attachment: **[trac13123_root.patch.gz](https://github.com/sagemath/sage/files/ticket13123/trac13123_root.patch.gz)**

Rebased [attachment: trac13123_root.patch](https://github.com/sagemath/sage/files/ticket13123/trac13123_root.patch.gz) because of fuzz.



---

archive/issue_comments_150004.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\nWhy was `GAP_STAMP` changed from\n\n```\nGAP_STAMP = '%s/local/bin/gap_stamp'%SAGE_ROOT\n```\nto\n\n```\nGAP_STAMP = SAGE_EXTCODE\n```\n\nThis seems a mistake and might be the cause of #13963.",
    "created_at": "2013-01-17T11:43:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13123#issuecomment-150004",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:69" align="right">comment:69</div>

Why was `GAP_STAMP` changed from

```
GAP_STAMP = '%s/local/bin/gap_stamp'%SAGE_ROOT
```
to

```
GAP_STAMP = SAGE_EXTCODE
```

This seems a mistake and might be the cause of #13963.
