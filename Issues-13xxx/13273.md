# Issue 13273: extension of sage.numerical.optimize.find_fit

archive/issues_013101.json:
```json
{
    "body": "There is no routine in Sage to interpolate points `((x,y),(f_1,f_2))\\in\\mathbb{R}^{2} \\times \\mathbb{R}^{2}` by an arbitrary class of functions `f\\colon\\mathbb{R}^{2}\\to \\mathbb{R}^{2}` other than splines. Until now, a similar routine exists only for interpolating functions `\\mathbb{R}^{k} \\to \\mathbb{R}`, called `sage.numerical.optimize.find_fit`. It seems to me as one could extend the routine \"find_fit\" to the two-dimensional case with not too much work as the underlying routine scipy.optimize.leastsq (see line 645/655) is not restricted to the one-dimensional case. The new \"model\" (cp. line 527 ff.) should be a pair of symbolic expressions, of symbolic functions, or of python functions. model has to be a function of the variables `(x_1, x_2)` and free parameters `(a_1, a_2, \\ldots, a_l)`.  Thus I want to propose to extend the routine find_fit to the two-dimensional case.\n\n**Keywords:** fitting, interpolation, two-dimensional\n\n**Work Issues:** enhancement\n\n**Reviewer:** Dima Pasechnik\n\n**Dependencies:** #32260\n\nIssue created by migration from https://trac.sagemath.org/ticket/13273\n\n",
    "closed_at": "2021-12-03T18:41:01Z",
    "created_at": "2012-07-19T15:00:10Z",
    "labels": [
        "component: numerical",
        "enhancement",
        "invalid"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "extension of sage.numerical.optimize.find_fit",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13273",
    "user": "https://trac.sagemath.org/admin/accounts/users/hackstein"
}
```
There is no routine in Sage to interpolate points `((x,y),(f_1,f_2))\in\mathbb{R}^{2} \times \mathbb{R}^{2}` by an arbitrary class of functions `f\colon\mathbb{R}^{2}\to \mathbb{R}^{2}` other than splines. Until now, a similar routine exists only for interpolating functions `\mathbb{R}^{k} \to \mathbb{R}`, called `sage.numerical.optimize.find_fit`. It seems to me as one could extend the routine "find_fit" to the two-dimensional case with not too much work as the underlying routine scipy.optimize.leastsq (see line 645/655) is not restricted to the one-dimensional case. The new "model" (cp. line 527 ff.) should be a pair of symbolic expressions, of symbolic functions, or of python functions. model has to be a function of the variables `(x_1, x_2)` and free parameters `(a_1, a_2, \ldots, a_l)`.  Thus I want to propose to extend the routine find_fit to the two-dimensional case.

**Keywords:** fitting, interpolation, two-dimensional

**Work Issues:** enhancement

**Reviewer:** Dima Pasechnik

**Dependencies:** #32260

Issue created by migration from https://trac.sagemath.org/ticket/13273





---

archive/issue_comments_190204.json:
```json
{
    "body": "**Changing assignee** from @jasongrout, jkantor to hackstein.",
    "created_at": "2012-07-19T15:02:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13273#issuecomment-190204",
    "user": "https://trac.sagemath.org/admin/accounts/users/hackstein"
}
```

**Changing assignee** from @jasongrout, jkantor to hackstein.



---

archive/issue_comments_190205.json:
```json
{
    "body": "<a id='comment:2'></a>\nA first attempt would be the following, but it still needs careful review:\n\n```\ndef find_fit2dim(data, model, initial_guess = None, parameters = None, variables = None, solution_dict = False):\n r\"\"\"\n Finds numerical estimates for the parameters of the two dimensional function model to\n give a best fit to data.\n\n\nINPUT:\n\n - ``data`` -- A four dimensional table of floating point numbers of the\n form `[[x_{1,1}, x_{1,2},f_{1,1}, f_{1,2}],\n [x_{2,1}, x_{2,2}, f_{2,1},f_{2,2}],\n \\ldots,\n [x_{n,1}, x_{n,2},f_{n,1},f_{n,2}]]` given as a\n numpy array.\n\n - ``model`` -- Either a pair of symbolic expressions, of symbolic functions, or of\n Python functions. ``model`` has to be a pair of functions of the variables\n `(x_1, x_2, \\ldots, x_k)` and free parameters\n `(a_1, a_2, \\ldots, a_l)`.\n\n - ``initial_guess`` -- (default: ``None``) Initial estimate for the\n parameters `(a_1, a_2, \\ldots, a_l)`, given as either a list, tuple,\n vector or numpy array. If ``None``, the default estimate for each\n parameter is `1`.\n\n - ``parameters`` -- (default: ``None``) A list of the parameters\n `(a_1, a_2, \\ldots, a_l)`. If model is a symbolic function it is\n ignored, and the free parameters of the symbolic function are used.\n\n - ``variables`` -- (default: ``None``) A list of the variables\n `(x_1, x_2, \\ldots, x_k)`. If model is a symbolic function it is\n ignored, and the variables of the symbolic function are used.\n\n - ``solution_dict`` -- (default: ``False``) if ``True``, return the\n solution as a dictionary rather than an equation.\n\n\nEXAMPLES:\n\n\nALGORITHM:\n\nUses ``scipy.optimize.leastsq`` which in turn uses MINPACK's lmdif and\nlmder algorithms.\n \"\"\"\nimport numpy\n\n if not isinstance(data, numpy.ndarray):\n try:\ndata = numpy.array(data, dtype = float)\nexcept (ValueError, TypeError):\n raise TypeError, \"data has to be a numpy array\"\n elif data.dtype == object:\n raise ValueError, \"the entries of data have to be of type float\"\n\n if data.ndim != 4:\n raise ValueError, \"data has to be a four dimensional table of floating point numbers\"\n\n from sage.symbolic.expression import Expression\n\nif isinstance(model[1], Expression) and if isinstance(model[2],Expression):\nif variables is None:\nvariables = list(x_1,x_2)\nif parameters is None:\nparameters = list(Set(list(model[1].variables())+list(model[2].variables())))\nfor v in variables:\nparameters.remove(v)\n\n if data.shape[1] != len(variables) + 2:\nraise ValueError, \"each row of data needs %d entries, only %d entries given\" % (len(variables) + 2, data.shape[1])\n\n if parameters is None or len(parameters) == 0 or \\\n variables is None or len(variables) == 0:\n raise ValueError, \"no variables given\"\n\nif initial_guess == None:\ninitial_guess = len(parameters) * [1]\n\n if not isinstance(initial_guess, numpy.ndarray):\n try:\ninitial_guess = numpy.array(initial_guess, dtype = float)\nexcept (ValueError, TypeError):\nraise TypeError, \"initial_guess has to be a list, tuple, or numpy array\"\n elif initial_guess.dtype == object:\n raise ValueError, \"the entries of initial_guess have to be of type float\"\n\n if len(initial_guess) != len(parameters):\n raise ValueError, \"length of initial_guess does not coincide with the number of parameters\"\n\n if isinstance(model[1], Expression) and if isinstance(model[2], Expression):\n var_list = variables + parameters\nvar_names = map(str, var_list)\n func = model._fast_float_(*var_names)\nelse:\nfunc = model\n\ndef function(x_data, params):\nresult = numpy.zeros(len(x_data))\nfor row in xrange(len(x_data)):\nfparams = numpy.hstack((x_data[row], params)).tolist()\nresult[row] = func(*fparams)\nreturn result\n\ndef error_function(params, x_data, y1_data, y2_data):\nresult = numpy.zeros(len(x_data))\nfor row in xrange(len(x_data)):\nfparams = x_data[row].tolist() + params.tolist()\nresult[row] = func(*fparams)\nreturn np.array([result[:,-2] - y1_data,result[:,.1]-y2_data])\n\nx_data = data[:, 0:len(variables)]\ny1_data = data[:, -2]\ny2_data=data[:,-1]\n\nfrom scipy.optimize import leastsq\nestimated_params, d = leastsq(error_function, initial_guess, args = (x_data, y1_data,y2_data))\n\n if isinstance(estimated_params, float):\nestimated_params = [estimated_params]\nelse:\nestimated_params = estimated_params.tolist()\n\nif solution_dict:\ndict = {}\nfor item in zip(parameters, estimated_params):\ndict[item[0]] = item[1]\nreturn dict\n\nreturn [item[0] == item[1] for item in zip(parameters, estimated_params)]\n```",
    "created_at": "2012-07-24T10:29:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13273#issuecomment-190205",
    "user": "https://trac.sagemath.org/admin/accounts/users/hackstein"
}
```

<a id='comment:2'></a>
A first attempt would be the following, but it still needs careful review:

```
def find_fit2dim(data, model, initial_guess = None, parameters = None, variables = None, solution_dict = False):
 r"""
 Finds numerical estimates for the parameters of the two dimensional function model to
 give a best fit to data.


INPUT:

 - ``data`` -- A four dimensional table of floating point numbers of the
 form `[[x_{1,1}, x_{1,2},f_{1,1}, f_{1,2}],
 [x_{2,1}, x_{2,2}, f_{2,1},f_{2,2}],
 \ldots,
 [x_{n,1}, x_{n,2},f_{n,1},f_{n,2}]]` given as a
 numpy array.

 - ``model`` -- Either a pair of symbolic expressions, of symbolic functions, or of
 Python functions. ``model`` has to be a pair of functions of the variables
 `(x_1, x_2, \ldots, x_k)` and free parameters
 `(a_1, a_2, \ldots, a_l)`.

 - ``initial_guess`` -- (default: ``None``) Initial estimate for the
 parameters `(a_1, a_2, \ldots, a_l)`, given as either a list, tuple,
 vector or numpy array. If ``None``, the default estimate for each
 parameter is `1`.

 - ``parameters`` -- (default: ``None``) A list of the parameters
 `(a_1, a_2, \ldots, a_l)`. If model is a symbolic function it is
 ignored, and the free parameters of the symbolic function are used.

 - ``variables`` -- (default: ``None``) A list of the variables
 `(x_1, x_2, \ldots, x_k)`. If model is a symbolic function it is
 ignored, and the variables of the symbolic function are used.

 - ``solution_dict`` -- (default: ``False``) if ``True``, return the
 solution as a dictionary rather than an equation.


EXAMPLES:


ALGORITHM:

Uses ``scipy.optimize.leastsq`` which in turn uses MINPACK's lmdif and
lmder algorithms.
 """
import numpy

 if not isinstance(data, numpy.ndarray):
 try:
data = numpy.array(data, dtype = float)
except (ValueError, TypeError):
 raise TypeError, "data has to be a numpy array"
 elif data.dtype == object:
 raise ValueError, "the entries of data have to be of type float"

 if data.ndim != 4:
 raise ValueError, "data has to be a four dimensional table of floating point numbers"

 from sage.symbolic.expression import Expression

if isinstance(model[1], Expression) and if isinstance(model[2],Expression):
if variables is None:
variables = list(x_1,x_2)
if parameters is None:
parameters = list(Set(list(model[1].variables())+list(model[2].variables())))
for v in variables:
parameters.remove(v)

 if data.shape[1] != len(variables) + 2:
raise ValueError, "each row of data needs %d entries, only %d entries given" % (len(variables) + 2, data.shape[1])

 if parameters is None or len(parameters) == 0 or \
 variables is None or len(variables) == 0:
 raise ValueError, "no variables given"

if initial_guess == None:
initial_guess = len(parameters) * [1]

 if not isinstance(initial_guess, numpy.ndarray):
 try:
initial_guess = numpy.array(initial_guess, dtype = float)
except (ValueError, TypeError):
raise TypeError, "initial_guess has to be a list, tuple, or numpy array"
 elif initial_guess.dtype == object:
 raise ValueError, "the entries of initial_guess have to be of type float"

 if len(initial_guess) != len(parameters):
 raise ValueError, "length of initial_guess does not coincide with the number of parameters"

 if isinstance(model[1], Expression) and if isinstance(model[2], Expression):
 var_list = variables + parameters
var_names = map(str, var_list)
 func = model._fast_float_(*var_names)
else:
func = model

def function(x_data, params):
result = numpy.zeros(len(x_data))
for row in xrange(len(x_data)):
fparams = numpy.hstack((x_data[row], params)).tolist()
result[row] = func(*fparams)
return result

def error_function(params, x_data, y1_data, y2_data):
result = numpy.zeros(len(x_data))
for row in xrange(len(x_data)):
fparams = x_data[row].tolist() + params.tolist()
result[row] = func(*fparams)
return np.array([result[:,-2] - y1_data,result[:,.1]-y2_data])

x_data = data[:, 0:len(variables)]
y1_data = data[:, -2]
y2_data=data[:,-1]

from scipy.optimize import leastsq
estimated_params, d = leastsq(error_function, initial_guess, args = (x_data, y1_data,y2_data))

 if isinstance(estimated_params, float):
estimated_params = [estimated_params]
else:
estimated_params = estimated_params.tolist()

if solution_dict:
dict = {}
for item in zip(parameters, estimated_params):
dict[item[0]] = item[1]
return dict

return [item[0] == item[1] for item in zip(parameters, estimated_params)]
```



---

archive/issue_comments_190206.json:
```json
{
    "body": "**Changing reviewer** from \"tba\" to \"evanandel, was, ncohen\".",
    "created_at": "2012-07-25T11:01:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13273#issuecomment-190206",
    "user": "https://trac.sagemath.org/admin/accounts/users/hackstein"
}
```

**Changing reviewer** from "tba" to "evanandel, was, ncohen".



---

archive/issue_comments_190207.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2012-07-25T11:01:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13273#issuecomment-190207",
    "user": "https://trac.sagemath.org/admin/accounts/users/hackstein"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_190208.json:
```json
{
    "body": "<a id='comment:4'></a>\nPlease fill in your real name as Author.",
    "created_at": "2012-07-27T20:39:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13273#issuecomment-190208",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'></a>
Please fill in your real name as Author.



---

archive/issue_comments_190209.json:
```json
{
    "body": "**Changing author** from \"hackstein\" to \"Urs Hackstein\".",
    "created_at": "2012-07-30T08:16:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13273#issuecomment-190209",
    "user": "https://trac.sagemath.org/admin/accounts/users/hackstein"
}
```

**Changing author** from "hackstein" to "Urs Hackstein".



---

archive/issue_comments_190210.json:
```json
{
    "body": "<a id='comment:6'></a>\nI fixed some errors (see the updated code below), but it still don't fit together with the leastsq routine. Thus any comments and improvement would be highly appreciated as it is my first ticket.\n\n```\ndef find_fit2dim(data, model, initial_guess=None, parameters=None, variables=None, solution_dict=False):\n    r\"\"\"\n    Finds numerical estimates for the parameters of the two-dimensional function model to\n    give a best fit to data.\n\n\n    INPUT:\n\n    - ``data`` -- A two dimensional table of floating point numbers of the\n      form `[[x_{1,1}, x_{1,2},  f_{1,1}, f_{1,2}],\n      [x_{2,1}, x_{2,2}, f_{2,1}, f_{2,2}],\n      \\ldots,\n      [x_{n,1}, x_{n,2}, f_{n,1}, f_{n,2}]]` given as either a \n      numpy array.\n\n    - ``model`` -- Either a pair of symbolic expressions, of symbolic functions, or \n      of Python function. ``model`` has to be a function of the variables\n      `(x_1, x_2, \\ldots, x_k)` and free parameters\n      `(a_1, a_2, \\ldots, a_l)`.\n\n    - ``initial_guess`` -- (default: ``None``) Initial estimate for the\n      parameters `(a_1, a_2, \\ldots, a_l)`, given as either a list, tuple,\n      vector or numpy array. If ``None``, the default estimate for each\n      parameter is `1`.\n\n    - ``parameters`` -- (default: ``None``) A list of the parameters\n      `(a_1, a_2, \\ldots, a_l)`. If model is a symbolic function it is\n      ignored, and the free parameters of the symbolic function are used.\n\n    - ``variables`` -- (default: ``None``) A list of the variables\n      `(x_1, x_2, \\ldots, x_k)`. If model is a symbolic function it is\n      ignored, and the variables of the symbolic function are used.\n\n    - ``solution_dict`` -- (default: ``False``) if ``True``, return the\n      solution as a dictionary rather than an equation.\n\n\n    EXAMPLES:\n\n    \n\n    ALGORITHM: \n\n    Uses ``scipy.optimize.leastsq`` which in turn uses MINPACK's lmdif and\n    lmder algorithms.\n    \"\"\"\n    \n    import numpy\n\n    if not isinstance(data, numpy.ndarray):\n        try:\n            data = numpy.array(data, dtype = float)\n        except (ValueError, TypeError):\n            raise TypeError, \"data has to be a numpy array\"\n    elif data.dtype == object:\n        raise ValueError, \"the entries of data have to be of type float\"\n\n    if data.ndim != 2:\n        raise ValueError, \"data has to be a two dimensional table of floating point numbers\"\n\n    from sage.symbolic.expression import Expression\n\n    if isinstance(model[0], Expression) and isinstance(model[1],Expression):\n        if variables is None:\n            variables = list(model[0].arguments())\n        if parameters is None:\n            L=list(model[0].variables())\n            M=list(model[1].variables())\n            for v in L:\n                if v in M:\n                    M.remove(v)\n            parameters=L+M\n    for v in variables:\n            parameters.remove(v)\n\n    if data.shape[1] != len(variables) + 2:\n        raise ValueError, \"each row of data needs %d entries, only %d entries given\" % (len(variables) + 2, data.shape[1])\n\n    if parameters is None or len(parameters) == 0 or \\\n       variables is None or len(variables) == 0:\n        raise ValueError, \"no variables given\"\n\n    if initial_guess == None:\n        initial_guess = len(parameters) * [1]\n\n    if not isinstance(initial_guess, numpy.ndarray):\n        try:\n            initial_guess = numpy.array(initial_guess, dtype = float)\n        except (ValueError, TypeError):\n            raise TypeError, \"initial_guess has to be a list, tuple, or numpy array\"\n    elif initial_guess.dtype == object:\n        raise ValueError, \"the entries of initial_guess have to be of type float\"\n\n    if len(initial_guess) != len(parameters):\n        raise ValueError, \"length of initial_guess does not coincide with the number of parameters\"\n\n    if isinstance(model[0], Expression) and isinstance(model[1],Expression):\n        var_list = variables + parameters\n        var_names = map(str, var_list)\n        func = (model[0]._fast_float_(*var_names), model[1]._fast_float_(*var_names))\n    else:\n        func = model\n\n    def function(x1_data, x2_data, params):\n        s=(len(x1_data), 2)\n        result = numpy.zeros(s)\n        for row in xrange(len(x1_data)):\n            fparams = numpy.hstack((x1_data[row], x2_data[row],params)).tolist()\n            result[row] = (func[0](*fparams),func[1](*fparams))\n        return result\n\n    def error_function(params, x1_data, x2_data, y1_data, y2_data):\n        t=(len(x1_data),2)\n        result = numpy.zeros(t)\n        for row in xrange(len(x1_data)):\n            fparams = [x1_data[row], x2_data[row]]+ params.tolist()\n            result[row]= (func[0](*fparams), func[1](*fparams))\n        return numpy.array([result[:,-2] - y1_data, result[:,-1] - y2_data])\n\n    x1_data = data[:, -4]\n    x2_data = data[:, -3]  \n    y1_data = data[:, -2]\n    y2_data = data[:,-1]\n\n    from scipy.optimize import leastsq\n    estimated_params, d = leastsq(error_function, initial_guess, args = (x1_data, x2_data, y1_data, y2_data))\n\n    if isinstance(estimated_params, float):\n        estimated_params = [estimated_params]\n    else:\n        estimated_params = estimated_params.tolist()\n\n    if solution_dict:\n       dict = {}\n       for item in zip(parameters, estimated_params):\n           dict[item[0]] = item[1]\n       return dict\n\n    return [item[0] == item[1] for item in zip(parameters, estimated_params)]\n```",
    "created_at": "2012-07-30T16:28:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13273#issuecomment-190210",
    "user": "https://trac.sagemath.org/admin/accounts/users/hackstein"
}
```

<a id='comment:6'></a>
I fixed some errors (see the updated code below), but it still don't fit together with the leastsq routine. Thus any comments and improvement would be highly appreciated as it is my first ticket.

```
def find_fit2dim(data, model, initial_guess=None, parameters=None, variables=None, solution_dict=False):
    r"""
    Finds numerical estimates for the parameters of the two-dimensional function model to
    give a best fit to data.


    INPUT:

    - ``data`` -- A two dimensional table of floating point numbers of the
      form `[[x_{1,1}, x_{1,2},  f_{1,1}, f_{1,2}],
      [x_{2,1}, x_{2,2}, f_{2,1}, f_{2,2}],
      \ldots,
      [x_{n,1}, x_{n,2}, f_{n,1}, f_{n,2}]]` given as either a 
      numpy array.

    - ``model`` -- Either a pair of symbolic expressions, of symbolic functions, or 
      of Python function. ``model`` has to be a function of the variables
      `(x_1, x_2, \ldots, x_k)` and free parameters
      `(a_1, a_2, \ldots, a_l)`.

    - ``initial_guess`` -- (default: ``None``) Initial estimate for the
      parameters `(a_1, a_2, \ldots, a_l)`, given as either a list, tuple,
      vector or numpy array. If ``None``, the default estimate for each
      parameter is `1`.

    - ``parameters`` -- (default: ``None``) A list of the parameters
      `(a_1, a_2, \ldots, a_l)`. If model is a symbolic function it is
      ignored, and the free parameters of the symbolic function are used.

    - ``variables`` -- (default: ``None``) A list of the variables
      `(x_1, x_2, \ldots, x_k)`. If model is a symbolic function it is
      ignored, and the variables of the symbolic function are used.

    - ``solution_dict`` -- (default: ``False``) if ``True``, return the
      solution as a dictionary rather than an equation.


    EXAMPLES:

    

    ALGORITHM: 

    Uses ``scipy.optimize.leastsq`` which in turn uses MINPACK's lmdif and
    lmder algorithms.
    """
    
    import numpy

    if not isinstance(data, numpy.ndarray):
        try:
            data = numpy.array(data, dtype = float)
        except (ValueError, TypeError):
            raise TypeError, "data has to be a numpy array"
    elif data.dtype == object:
        raise ValueError, "the entries of data have to be of type float"

    if data.ndim != 2:
        raise ValueError, "data has to be a two dimensional table of floating point numbers"

    from sage.symbolic.expression import Expression

    if isinstance(model[0], Expression) and isinstance(model[1],Expression):
        if variables is None:
            variables = list(model[0].arguments())
        if parameters is None:
            L=list(model[0].variables())
            M=list(model[1].variables())
            for v in L:
                if v in M:
                    M.remove(v)
            parameters=L+M
    for v in variables:
            parameters.remove(v)

    if data.shape[1] != len(variables) + 2:
        raise ValueError, "each row of data needs %d entries, only %d entries given" % (len(variables) + 2, data.shape[1])

    if parameters is None or len(parameters) == 0 or \
       variables is None or len(variables) == 0:
        raise ValueError, "no variables given"

    if initial_guess == None:
        initial_guess = len(parameters) * [1]

    if not isinstance(initial_guess, numpy.ndarray):
        try:
            initial_guess = numpy.array(initial_guess, dtype = float)
        except (ValueError, TypeError):
            raise TypeError, "initial_guess has to be a list, tuple, or numpy array"
    elif initial_guess.dtype == object:
        raise ValueError, "the entries of initial_guess have to be of type float"

    if len(initial_guess) != len(parameters):
        raise ValueError, "length of initial_guess does not coincide with the number of parameters"

    if isinstance(model[0], Expression) and isinstance(model[1],Expression):
        var_list = variables + parameters
        var_names = map(str, var_list)
        func = (model[0]._fast_float_(*var_names), model[1]._fast_float_(*var_names))
    else:
        func = model

    def function(x1_data, x2_data, params):
        s=(len(x1_data), 2)
        result = numpy.zeros(s)
        for row in xrange(len(x1_data)):
            fparams = numpy.hstack((x1_data[row], x2_data[row],params)).tolist()
            result[row] = (func[0](*fparams),func[1](*fparams))
        return result

    def error_function(params, x1_data, x2_data, y1_data, y2_data):
        t=(len(x1_data),2)
        result = numpy.zeros(t)
        for row in xrange(len(x1_data)):
            fparams = [x1_data[row], x2_data[row]]+ params.tolist()
            result[row]= (func[0](*fparams), func[1](*fparams))
        return numpy.array([result[:,-2] - y1_data, result[:,-1] - y2_data])

    x1_data = data[:, -4]
    x2_data = data[:, -3]  
    y1_data = data[:, -2]
    y2_data = data[:,-1]

    from scipy.optimize import leastsq
    estimated_params, d = leastsq(error_function, initial_guess, args = (x1_data, x2_data, y1_data, y2_data))

    if isinstance(estimated_params, float):
        estimated_params = [estimated_params]
    else:
        estimated_params = estimated_params.tolist()

    if solution_dict:
       dict = {}
       for item in zip(parameters, estimated_params):
           dict[item[0]] = item[1]
       return dict

    return [item[0] == item[1] for item in zip(parameters, estimated_params)]
```



---

archive/issue_comments_190211.json:
```json
{
    "body": "<a id='comment:7'></a>\nIt runs through now, but it still needs careful review. Any comments and improvements are very welcome.\n\n```\ndef find_fit2dim(data, model, initial_guess=None, parameters=None, variables=None, solution_dict=False):\n    r\"\"\"\n    Finds numerical estimates for the parameters of the two-dimensional function model to\n    give a best fit to data.\n\n\n    INPUT:\n\n    - ``data`` -- A two dimensional table of floating point numbers of the\n      form `[[x_{1,1}, x_{1,2},  f_{1,1}, f_{1,2}],\n      [x_{2,1}, x_{2,2}, f_{2,1}, f_{2,2}],\n      \\ldots,\n      [x_{n,1}, x_{n,2}, f_{n,1}, f_{n,2}]]` given as either a \n      numpy array.\n\n    - ``model`` -- Either a pair of symbolic expressions, of symbolic functions, or \n      of Python function. ``model`` has to be a function of the variables\n      `(x_1, x_2, \\ldots, x_k)` and free parameters\n      `(a_1, a_2, \\ldots, a_l)`.\n\n    - ``initial_guess`` -- (default: ``None``) Initial estimate for the\n      parameters `(a_1, a_2, \\ldots, a_l)`, given as either a list, tuple,\n      vector or numpy array. If ``None``, the default estimate for each\n      parameter is `1`.\n\n    - ``parameters`` -- (default: ``None``) A list of the parameters\n      `(a_1, a_2, \\ldots, a_l)`. If model is a symbolic function it is\n      ignored, and the free parameters of the symbolic function are used.\n\n    - ``variables`` -- (default: ``None``) A list of the variables\n      `(x_1, x_2, \\ldots, x_k)`. If model is a symbolic function it is\n      ignored, and the variables of the symbolic function are used.\n\n    - ``solution_dict`` -- (default: ``False``) if ``True``, return the\n      solution as a dictionary rather than an equation.\n\n\n    EXAMPLES:\n    \n    First we create some data points of a function f \\colon\\R^{2}\\to\\R^{2}. Let f(x,y)=(x-1,3*y+2)\n    \n    sage: data=np.array([[1,0,0,2],[1,1,0,5],[2,1,1,5],[2,3,1,11]])\n    \n    We define a function with free parameters  \"a\" and \"b\":    \n    sage: model(x,y)=(a+x,b+3*y)\n    \n    We search for the parameters that give the best fit to the data:\n    find_fit2dim(data,model)\n    [a == -1.0000000064095422, b == 1.9999999999999998]\n\n    ALGORITHM: \n\n    Uses ``scipy.optimize.leastsq`` which in turn uses MINPACK's lmdif and\n    lmder algorithms.\n    \"\"\"\n    \n    import numpy\n\n    if not isinstance(data, numpy.ndarray):\n        try:\n            data = numpy.array(data, dtype = float)\n        except (ValueError, TypeError):\n            raise TypeError, \"data has to be a numpy array\"\n    elif data.dtype == object:\n        raise ValueError, \"the entries of data have to be of type float\"\n\n    if data.ndim != 2:\n        raise ValueError, \"data has to be a two dimensional table of floating point numbers\"\n\n    from sage.symbolic.expression import Expression\n\n    if isinstance(model[0], Expression) and isinstance(model[1],Expression):\n        if variables is None:\n            variables = list(model[0].arguments())\n        if parameters is None:\n            L=list(model[0].variables())\n            M=list(model[1].variables())\n            for v in L:\n                if v in M:\n                    M.remove(v)\n            parameters=L+M\n    for v in variables:\n            parameters.remove(v)\n\n    if data.shape[1] != len(variables) + 2:\n        raise ValueError, \"each row of data needs %d entries, only %d entries given\" % (len(variables) + 2, data.shape[1])\n\n    if parameters is None or len(parameters) == 0 or \\\n       variables is None or len(variables) == 0:\n        raise ValueError, \"no variables given\"\n\n    if initial_guess == None:\n        initial_guess = len(parameters) * [1]\n\n    if not isinstance(initial_guess, numpy.ndarray):\n        try:\n            initial_guess = numpy.array(initial_guess, dtype = float)\n        except (ValueError, TypeError):\n            raise TypeError, \"initial_guess has to be a list, tuple, or numpy array\"\n    elif initial_guess.dtype == object:\n        raise ValueError, \"the entries of initial_guess have to be of type float\"\n\n    if len(initial_guess) != len(parameters):\n        raise ValueError, \"length of initial_guess does not coincide with the number of parameters\"\n\n    if isinstance(model[0], Expression) and isinstance(model[1],Expression):\n        var_list = variables + parameters\n        var_names = map(str, var_list)\n        func = (model[0]._fast_float_(*var_names), model[1]._fast_float_(*var_names))\n    else:\n        func = model\n\n    def function(x1_data, x2_data, params):\n        s=(len(x1_data), 2)\n        result = numpy.zeros(s)\n        for row in xrange(len(x1_data)):\n            fparams = numpy.hstack((x1_data[row], x2_data[row],params)).tolist()\n            result[row] = (func[0](*fparams),func[1](*fparams))\n        return result\n\n    def error_function(params, x1_data, x2_data, y1_data, y2_data):\n        t=(len(x1_data),2)\n        result = numpy.zeros(t)\n        result2 = numpy.zeros(len(x1_data))\n        for row in xrange(len(x1_data)):\n            fparams = [x1_data[row], x2_data[row]]+ params.tolist()\n            result[row]= (func[0](*fparams), func[1](*fparams))\n            result2[row]=(result[row,-2] - y1_data[row])*(result[row,-2] - y1_data[row])+ (result[row,-1] - y2_data[row])*(result[row,-1] - y2_data[row])\n        return result2\n\n    x1_data = data[:, -4]\n    x2_data = data[:, -3]  \n    y1_data = data[:, -2]\n    y2_data = data[:,-1]\n\n    from scipy.optimize import leastsq\n    estimated_params, d = leastsq(error_function, initial_guess, args = (x1_data, x2_data, y1_data, y2_data))\n\n    if isinstance(estimated_params, float):\n        estimated_params = [estimated_params]\n    else:\n        estimated_params = estimated_params.tolist()\n\n    if solution_dict:\n       dict = {}\n       for item in zip(parameters, estimated_params):\n           dict[item[0]] = item[1]\n       return dict\n\n    return [item[0] == item[1] for item in zip(parameters, estimated_params)]\n```",
    "created_at": "2012-07-31T16:17:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13273#issuecomment-190211",
    "user": "https://trac.sagemath.org/admin/accounts/users/hackstein"
}
```

<a id='comment:7'></a>
It runs through now, but it still needs careful review. Any comments and improvements are very welcome.

```
def find_fit2dim(data, model, initial_guess=None, parameters=None, variables=None, solution_dict=False):
    r"""
    Finds numerical estimates for the parameters of the two-dimensional function model to
    give a best fit to data.


    INPUT:

    - ``data`` -- A two dimensional table of floating point numbers of the
      form `[[x_{1,1}, x_{1,2},  f_{1,1}, f_{1,2}],
      [x_{2,1}, x_{2,2}, f_{2,1}, f_{2,2}],
      \ldots,
      [x_{n,1}, x_{n,2}, f_{n,1}, f_{n,2}]]` given as either a 
      numpy array.

    - ``model`` -- Either a pair of symbolic expressions, of symbolic functions, or 
      of Python function. ``model`` has to be a function of the variables
      `(x_1, x_2, \ldots, x_k)` and free parameters
      `(a_1, a_2, \ldots, a_l)`.

    - ``initial_guess`` -- (default: ``None``) Initial estimate for the
      parameters `(a_1, a_2, \ldots, a_l)`, given as either a list, tuple,
      vector or numpy array. If ``None``, the default estimate for each
      parameter is `1`.

    - ``parameters`` -- (default: ``None``) A list of the parameters
      `(a_1, a_2, \ldots, a_l)`. If model is a symbolic function it is
      ignored, and the free parameters of the symbolic function are used.

    - ``variables`` -- (default: ``None``) A list of the variables
      `(x_1, x_2, \ldots, x_k)`. If model is a symbolic function it is
      ignored, and the variables of the symbolic function are used.

    - ``solution_dict`` -- (default: ``False``) if ``True``, return the
      solution as a dictionary rather than an equation.


    EXAMPLES:
    
    First we create some data points of a function f \colon\R^{2}\to\R^{2}. Let f(x,y)=(x-1,3*y+2)
    
    sage: data=np.array([[1,0,0,2],[1,1,0,5],[2,1,1,5],[2,3,1,11]])
    
    We define a function with free parameters  "a" and "b":    
    sage: model(x,y)=(a+x,b+3*y)
    
    We search for the parameters that give the best fit to the data:
    find_fit2dim(data,model)
    [a == -1.0000000064095422, b == 1.9999999999999998]

    ALGORITHM: 

    Uses ``scipy.optimize.leastsq`` which in turn uses MINPACK's lmdif and
    lmder algorithms.
    """
    
    import numpy

    if not isinstance(data, numpy.ndarray):
        try:
            data = numpy.array(data, dtype = float)
        except (ValueError, TypeError):
            raise TypeError, "data has to be a numpy array"
    elif data.dtype == object:
        raise ValueError, "the entries of data have to be of type float"

    if data.ndim != 2:
        raise ValueError, "data has to be a two dimensional table of floating point numbers"

    from sage.symbolic.expression import Expression

    if isinstance(model[0], Expression) and isinstance(model[1],Expression):
        if variables is None:
            variables = list(model[0].arguments())
        if parameters is None:
            L=list(model[0].variables())
            M=list(model[1].variables())
            for v in L:
                if v in M:
                    M.remove(v)
            parameters=L+M
    for v in variables:
            parameters.remove(v)

    if data.shape[1] != len(variables) + 2:
        raise ValueError, "each row of data needs %d entries, only %d entries given" % (len(variables) + 2, data.shape[1])

    if parameters is None or len(parameters) == 0 or \
       variables is None or len(variables) == 0:
        raise ValueError, "no variables given"

    if initial_guess == None:
        initial_guess = len(parameters) * [1]

    if not isinstance(initial_guess, numpy.ndarray):
        try:
            initial_guess = numpy.array(initial_guess, dtype = float)
        except (ValueError, TypeError):
            raise TypeError, "initial_guess has to be a list, tuple, or numpy array"
    elif initial_guess.dtype == object:
        raise ValueError, "the entries of initial_guess have to be of type float"

    if len(initial_guess) != len(parameters):
        raise ValueError, "length of initial_guess does not coincide with the number of parameters"

    if isinstance(model[0], Expression) and isinstance(model[1],Expression):
        var_list = variables + parameters
        var_names = map(str, var_list)
        func = (model[0]._fast_float_(*var_names), model[1]._fast_float_(*var_names))
    else:
        func = model

    def function(x1_data, x2_data, params):
        s=(len(x1_data), 2)
        result = numpy.zeros(s)
        for row in xrange(len(x1_data)):
            fparams = numpy.hstack((x1_data[row], x2_data[row],params)).tolist()
            result[row] = (func[0](*fparams),func[1](*fparams))
        return result

    def error_function(params, x1_data, x2_data, y1_data, y2_data):
        t=(len(x1_data),2)
        result = numpy.zeros(t)
        result2 = numpy.zeros(len(x1_data))
        for row in xrange(len(x1_data)):
            fparams = [x1_data[row], x2_data[row]]+ params.tolist()
            result[row]= (func[0](*fparams), func[1](*fparams))
            result2[row]=(result[row,-2] - y1_data[row])*(result[row,-2] - y1_data[row])+ (result[row,-1] - y2_data[row])*(result[row,-1] - y2_data[row])
        return result2

    x1_data = data[:, -4]
    x2_data = data[:, -3]  
    y1_data = data[:, -2]
    y2_data = data[:,-1]

    from scipy.optimize import leastsq
    estimated_params, d = leastsq(error_function, initial_guess, args = (x1_data, x2_data, y1_data, y2_data))

    if isinstance(estimated_params, float):
        estimated_params = [estimated_params]
    else:
        estimated_params = estimated_params.tolist()

    if solution_dict:
       dict = {}
       for item in zip(parameters, estimated_params):
           dict[item[0]] = item[1]
       return dict

    return [item[0] == item[1] for item in zip(parameters, estimated_params)]
```



---

archive/issue_comments_190212.json:
```json
{
    "body": "**Remove assignee** hackstein.",
    "created_at": "2012-07-31T16:17:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13273#issuecomment-190212",
    "user": "https://trac.sagemath.org/admin/accounts/users/hackstein"
}
```

**Remove assignee** hackstein.



---

archive/issue_comments_190213.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-There is no routine in Sage to interpolate points ((x,y),(f_1,f_2))\\in\\mathbb{R}^{2} \\times \\mathbb{R}^{2} by an arbitrary class of functions f\\colon\\mathbb{R}^{2}\\to \\mathbb{R}^{2} other than splines. Until now, a similar routine exists only for interpolating functions \\mathbb{R}^{k} \\to \\mathbb{R}, called sage.numerical.optimize.find_fit. It seems to me as one could extend the routine \"find_fit\" to the two-dimensional case with not too much work as the underlying routine scipy.optimize.leastsq (see line 645/655) is not restricted to the one-dimensional case. The new \"model\" (cp. line 527 ff.) should be a pair of symbolic expressions, of symbolic functions, or of python functions. model has to be a function of the variables '(x_1, x_2)` and free parameters `(a_1, a_2, \\ldots, a_l)'.  Thus I want to propose to extend the routine find_fit to the two-dimensional case.\n+There is no routine in Sage to interpolate points `((x,y),(f_1,f_2))\\in\\mathbb{R}^{2} \\times \\mathbb{R}^{2}` by an arbitrary class of functions `f\\colon\\mathbb{R}^{2}\\to \\mathbb{R}^{2}` other than splines. Until now, a similar routine exists only for interpolating functions `\\mathbb{R}^{k} \\to \\mathbb{R}`, called `sage.numerical.optimize.find_fit`. It seems to me as one could extend the routine \"find_fit\" to the two-dimensional case with not too much work as the underlying routine scipy.optimize.leastsq (see line 645/655) is not restricted to the one-dimensional case. The new \"model\" (cp. line 527 ff.) should be a pair of symbolic expressions, of symbolic functions, or of python functions. model has to be a function of the variables `(x_1, x_2)` and free parameters `(a_1, a_2, \\ldots, a_l)`.  Thus I want to propose to extend the routine find_fit to the two-dimensional case.\n``````\n",
    "created_at": "2013-01-20T10:13:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13273#issuecomment-190213",
    "user": "https://github.com/nathanncohen"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1 @@
-There is no routine in Sage to interpolate points ((x,y),(f_1,f_2))\in\mathbb{R}^{2} \times \mathbb{R}^{2} by an arbitrary class of functions f\colon\mathbb{R}^{2}\to \mathbb{R}^{2} other than splines. Until now, a similar routine exists only for interpolating functions \mathbb{R}^{k} \to \mathbb{R}, called sage.numerical.optimize.find_fit. It seems to me as one could extend the routine "find_fit" to the two-dimensional case with not too much work as the underlying routine scipy.optimize.leastsq (see line 645/655) is not restricted to the one-dimensional case. The new "model" (cp. line 527 ff.) should be a pair of symbolic expressions, of symbolic functions, or of python functions. model has to be a function of the variables '(x_1, x_2)` and free parameters `(a_1, a_2, \ldots, a_l)'.  Thus I want to propose to extend the routine find_fit to the two-dimensional case.
+There is no routine in Sage to interpolate points `((x,y),(f_1,f_2))\in\mathbb{R}^{2} \times \mathbb{R}^{2}` by an arbitrary class of functions `f\colon\mathbb{R}^{2}\to \mathbb{R}^{2}` other than splines. Until now, a similar routine exists only for interpolating functions `\mathbb{R}^{k} \to \mathbb{R}`, called `sage.numerical.optimize.find_fit`. It seems to me as one could extend the routine "find_fit" to the two-dimensional case with not too much work as the underlying routine scipy.optimize.leastsq (see line 645/655) is not restricted to the one-dimensional case. The new "model" (cp. line 527 ff.) should be a pair of symbolic expressions, of symbolic functions, or of python functions. model has to be a function of the variables `(x_1, x_2)` and free parameters `(a_1, a_2, \ldots, a_l)`.  Thus I want to propose to extend the routine find_fit to the two-dimensional case.
``````




---

archive/issue_comments_190214.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2013-02-20T16:18:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13273#issuecomment-190214",
    "user": "https://github.com/KPanComputes"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_190215.json:
```json
{
    "body": "<a id='comment:9'></a>\nAs of now, this ticket `needs_work`, as there is still no patch for reviewing. Of course, there is this code, which should be made into mercurial patch, before this can be merged into Sage. I might make a patch with  this code after two weeks or so... when I have more time to play around with. \n\n~KnS",
    "created_at": "2013-02-20T16:18:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13273#issuecomment-190215",
    "user": "https://github.com/KPanComputes"
}
```

<a id='comment:9'></a>
As of now, this ticket `needs_work`, as there is still no patch for reviewing. Of course, there is this code, which should be made into mercurial patch, before this can be merged into Sage. I might make a patch with  this code after two weeks or so... when I have more time to play around with. 

~KnS



---

archive/issue_events_042958.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13273",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13273#event-42958"
}
```



---

archive/issue_events_042959.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13273",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13273#event-42959"
}
```



---

archive/issue_events_042960.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13273",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13273#event-42960"
}
```



---

archive/issue_events_042961.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13273",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13273#event-42961"
}
```



---

archive/issue_events_042962.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13273",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13273#event-42962"
}
```



---

archive/issue_events_042963.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13273",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13273#event-42963"
}
```



---

archive/issue_events_042964.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13273",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13273#event-42964"
}
```



---

archive/issue_comments_190216.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2021-07-22T01:05:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13273#issuecomment-190216",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_190217.json:
```json
{
    "body": "**Changing author** from \"Urs Hackstein\" to \"\".",
    "created_at": "2021-07-22T01:05:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13273#issuecomment-190217",
    "user": "https://github.com/mkoeppe"
}
```

**Changing author** from "Urs Hackstein" to "".



---

archive/issue_comments_190218.json:
```json
{
    "body": "**Dependencies:** #32260",
    "created_at": "2021-07-22T01:05:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13273#issuecomment-190218",
    "user": "https://github.com/mkoeppe"
}
```

**Dependencies:** #32260



---

archive/issue_events_042965.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-22T01:05:21Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13273",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13273#event-42965"
}
```



---

archive/issue_events_042966.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-22T01:05:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13273",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13273#event-42966"
}
```



---

archive/issue_comments_190219.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2021-12-03T09:37:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13273#issuecomment-190219",
    "user": "https://github.com/dimpase"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_190220.json:
```json
{
    "body": "**Changing reviewer** from \"evanandel, was, ncohen\" to \"Dima Pasechnik\".",
    "created_at": "2021-12-03T09:37:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13273#issuecomment-190220",
    "user": "https://github.com/dimpase"
}
```

**Changing reviewer** from "evanandel, was, ncohen" to "Dima Pasechnik".



---

archive/issue_events_042967.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-03T18:41:01Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13273",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13273#event-42967"
}
```
