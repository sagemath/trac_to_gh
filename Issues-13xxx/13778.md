# Issue 13778: lazy list

archive/issues_013574.json:
```json
{
    "assignees": [
        "https://github.com/jasongrout"
    ],
    "body": "Lazy lists are iterators that behave like `list` and implement a cache mechanism.\n\nApply in that order:\n* [attachment: trac_13778-lazy_list.patch](https://github.com/sagemath/sage/files/ticket13778/trac_13778-lazy_list.patch.gz)\n* [attachment: trac_13778-lazy_list-review-ts.patch](https://github.com/sagemath/sage/files/ticket13778/trac_13778-lazy_list-review-ts.patch.gz)\n* [attachment: trac_13778-lazy_list-documentation-vd.patch](https://github.com/sagemath/sage/files/ticket13778/trac_13778-lazy_list-documentation-vd.patch.gz)\n\nDepends on #11795\n\nKeywords: **list, iterator**\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **Vincent Delecroix**\n\nMerged: **sage-5.6.beta1**\n\nComponent: **misc**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/13778_\n\n",
    "closed_at": "2012-12-26T13:20:45Z",
    "created_at": "2012-11-30T05:48:05Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "lazy list",
    "type": "issue",
    "updated_at": "2012-12-26T13:20:45Z",
    "url": "https://github.com/sagemath/sage/issues/13778",
    "user": "https://github.com/videlec"
}
```
Lazy lists are iterators that behave like `list` and implement a cache mechanism.

Apply in that order:
* [attachment: trac_13778-lazy_list.patch](https://github.com/sagemath/sage/files/ticket13778/trac_13778-lazy_list.patch.gz)
* [attachment: trac_13778-lazy_list-review-ts.patch](https://github.com/sagemath/sage/files/ticket13778/trac_13778-lazy_list-review-ts.patch.gz)
* [attachment: trac_13778-lazy_list-documentation-vd.patch](https://github.com/sagemath/sage/files/ticket13778/trac_13778-lazy_list-documentation-vd.patch.gz)

Depends on #11795

Keywords: **list, iterator**

Reviewer: **Travis Scrimshaw**

Author: **Vincent Delecroix**

Merged: **sage-5.6.beta1**

Component: **misc**

_Issue created by migration from https://trac.sagemath.org/ticket/13778_





---

archive/issue_events_191404.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2012-11-30T05:48:05Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "milestone_number": null,
    "milestone_title": "sage-5.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13778#event-191404"
}
```



---

archive/issue_events_191405.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2012-11-30T05:48:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13778#event-191405"
}
```



---

archive/issue_events_191406.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2012-11-30T05:48:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13778#event-191406"
}
```



---

archive/issue_events_191407.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2012-11-30T05:48:05Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "subject": "https://github.com/videlec",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13778#event-191407"
}
```



---

archive/issue_comments_162292.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nHmmm, haven't really checked the code, but there are a couple of typos (or grammatical errors) in the documentation (besides *\"non**-**negative\"*), and a few instances of missing mark-up (such as `self` without double-backquotes).\n\nWonder on which platform\n\n```\nsage: from sage.misc.lazy_list import lazy_list\nsage: P = lazy_list(iter(Primes()))[10::4]\nsage: P.info()\ncache length 0\nstart        10\nstop         2147483647\n...\n```\nwill fail (i.e., `INT_MAX` will differ)... ;-)",
    "created_at": "2012-11-30T09:33:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13778#issuecomment-162292",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:1" align="right">comment:1</div>

Hmmm, haven't really checked the code, but there are a couple of typos (or grammatical errors) in the documentation (besides *"non**-**negative"*), and a few instances of missing mark-up (such as `self` without double-backquotes).

Wonder on which platform

```
sage: from sage.misc.lazy_list import lazy_list
sage: P = lazy_list(iter(Primes()))[10::4]
sage: P.info()
cache length 0
start        10
stop         2147483647
...
```
will fail (i.e., `INT_MAX` will differ)... ;-)



---

archive/issue_comments_162293.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,2 @@\n-Lazy list are iterator that behaves like list and implement a cache mechanism.\n+Lazy lists are iterators that behave like `list` and implement a cache mechanism.\n+\n``````\n",
    "created_at": "2012-11-30T09:36:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13778#issuecomment-162293",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,2 @@
-Lazy list are iterator that behaves like list and implement a cache mechanism.
+Lazy lists are iterators that behave like `list` and implement a cache mechanism.
+
``````




---

archive/issue_events_191408.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2012-12-01T18:50:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13778#event-191408"
}
```



---

archive/issue_comments_162294.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nHey Vincent,\n\nI've written a review patch which is mostly docstring changes (I've explicitly put in the stop so it does not depend on `INT_MAX`), but I've changed the `_repr_()` by just calculating the number of elements instead of the try-catch blocks. Everything else looks good, so if you agree with the changes, set this to positive review.\n\nBest,\n\nTravis",
    "created_at": "2012-12-01T18:50:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13778#issuecomment-162294",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:3" align="right">comment:3</div>

Hey Vincent,

I've written a review patch which is mostly docstring changes (I've explicitly put in the stop so it does not depend on `INT_MAX`), but I've changed the `_repr_()` by just calculating the number of elements instead of the try-catch blocks. Everything else looks good, so if you agree with the changes, set this to positive review.

Best,

Travis



---

archive/issue_comments_162295.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2012-12-01T18:50:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13778#issuecomment-162295",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_162296.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nIf these lists are immutable, shouldn't they be called tuples in Python?..",
    "created_at": "2012-12-01T22:11:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13778#issuecomment-162296",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:4" align="right">comment:4</div>

If these lists are immutable, shouldn't they be called tuples in Python?..



---

archive/issue_comments_162297.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nStill some flaws, like *\"iteratable\"*.  I'd also consistently use *\"must\"* (instead of *\"should\"*) in the exceptions, as well as **either** (e.g.) *\"Returns ...\"* (descriptive) **or** *\"Return ...\"* (imperative form) in the docstrings.\n\n[I'll *perhaps<sup>TM</sup>* provide another reviewer patch later, but can't tell yet.  Just minor issues anyway, so feel free to set it to \"positive review\" in case I don't.]",
    "created_at": "2012-12-02T03:56:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13778#issuecomment-162297",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:5" align="right">comment:5</div>

Still some flaws, like *"iteratable"*.  I'd also consistently use *"must"* (instead of *"should"*) in the exceptions, as well as **either** (e.g.) *"Returns ..."* (descriptive) **or** *"Return ..."* (imperative form) in the docstrings.

[I'll *perhaps<sup>TM</sup>* provide another reviewer patch later, but can't tell yet.  Just minor issues anyway, so feel free to set it to "positive review" in case I don't.]



---

archive/issue_comments_162298.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@nexttime](#comment:5):\n> Still some flaws, like *\"iteratable\"*.  I'd also consistently use *\"must\"* (instead of *\"should\"*) in the exceptions, as well as **either** (e.g.) *\"Returns ...\"* (descriptive) **or** *\"Return ...\"* (imperative form) in the docstrings.\n> \n> [I'll *perhaps<sup>TM</sup>* provide another reviewer patch later, but can't tell yet.  Just minor issues anyway, so feel free to set it to \"positive review\" in case I don't.]\n\nRight. I correct the *\"iteratable\"*, change *\"should\"* to *\"must\"* and put everything in imperative form.",
    "created_at": "2012-12-02T09:14:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13778#issuecomment-162298",
    "user": "https://github.com/videlec"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@nexttime](#comment:5):
> Still some flaws, like *"iteratable"*.  I'd also consistently use *"must"* (instead of *"should"*) in the exceptions, as well as **either** (e.g.) *"Returns ..."* (descriptive) **or** *"Return ..."* (imperative form) in the docstrings.
> 
> [I'll *perhaps<sup>TM</sup>* provide another reviewer patch later, but can't tell yet.  Just minor issues anyway, so feel free to set it to "positive review" in case I don't.]

Right. I correct the *"iteratable"*, change *"should"* to *"must"* and put everything in imperative form.



---

archive/issue_events_191409.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2012-12-04T17:24:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13778#event-191409"
}
```



---

archive/issue_events_191410.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2012-12-04T17:24:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13778#event-191410"
}
```



---

archive/issue_comments_162299.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nLooks good to me.",
    "created_at": "2012-12-04T17:24:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13778#issuecomment-162299",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:7" align="right">comment:7</div>

Looks good to me.



---

archive/issue_comments_162300.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI am sorry. Using and reusing the code I found a mistake\n\n```\nsage: from sage.misc.lazy_list import lazy_list\nsage: lazy_list([0,0]\nTraceback (most recent call last):\n...\nIndexError: lazy list index out of range\n```\nThe problem comes from the fact that (stop - start) // step is not the good formula for the length. We should take the ceil and not the floor.",
    "created_at": "2012-12-07T10:29:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13778#issuecomment-162300",
    "user": "https://github.com/videlec"
}
```

<div id="comment:8" align="right">comment:8</div>

I am sorry. Using and reusing the code I found a mistake

```
sage: from sage.misc.lazy_list import lazy_list
sage: lazy_list([0,0]
Traceback (most recent call last):
...
IndexError: lazy list index out of range
```
The problem comes from the fact that (stop - start) // step is not the good formula for the length. We should take the ceil and not the floor.



---

archive/issue_events_191411.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2012-12-07T10:29:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13778#event-191411"
}
```



---

archive/issue_events_191412.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2012-12-07T10:29:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13778#event-191412"
}
```



---

archive/issue_comments_162301.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI've reverted the `_repr_()` back and added the above as a doctest. I didn't like the control flow with asserts, but I understand why it has to be done that way now (and I tested lists of length at most 3 before I made the change). Set it to positive review if the revised patches works for you.\n\nBest,\n\nTravis",
    "created_at": "2012-12-07T23:33:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13778#issuecomment-162301",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:9" align="right">comment:9</div>

I've reverted the `_repr_()` back and added the above as a doctest. I didn't like the control flow with asserts, but I understand why it has to be done that way now (and I tested lists of length at most 3 before I made the change). Set it to positive review if the revised patches works for you.

Best,

Travis



---

archive/issue_comments_162302.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI found a safer way to write `_repr_()` using an auxilliary `_fit()` method. I also so add additional doctests into `__getitem__()` at the very end.\n\nI switch using INT_MAX as a limiting value to PY_SSIZE_T_MAX which is defined in pyport.h (imported in Python.h). It makes more sense (and on my computer its size is larger than INT_MAX).\n\nBest,\nVincent\n\nPS (for pachbot):\n\napply trac_13778-lazy_list.patch",
    "created_at": "2012-12-08T14:28:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13778#issuecomment-162302",
    "user": "https://github.com/videlec"
}
```

<div id="comment:10" align="right">comment:10</div>

I found a safer way to write `_repr_()` using an auxilliary `_fit()` method. I also so add additional doctests into `__getitem__()` at the very end.

I switch using INT_MAX as a limiting value to PY_SSIZE_T_MAX which is defined in pyport.h (imported in Python.h). It makes more sense (and on my computer its size is larger than INT_MAX).

Best,
Vincent

PS (for pachbot):

apply trac_13778-lazy_list.patch



---

archive/issue_comments_162303.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,3 @@\n Lazy lists are iterators that behave like `list` and implement a cache mechanism.\n \n+Apply only apply trac_13778-lazy_list.patch\n``````\n",
    "created_at": "2012-12-08T14:28:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13778#issuecomment-162303",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,3 @@
 Lazy lists are iterators that behave like `list` and implement a cache mechanism.
 
+Apply only apply trac_13778-lazy_list.patch
``````




---

archive/issue_events_191413.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2012-12-08T14:28:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13778#event-191413"
}
```



---

archive/issue_events_191414.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2012-12-08T14:28:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13778#event-191414"
}
```



---

archive/issue_comments_162304.json:
```json
{
    "body": "Attachment: **[trac_13778-lazy_list-review-ts.patch.gz](https://github.com/sagemath/sage/files/ticket13778/trac_13778-lazy_list-review-ts.patch.gz)**\n\nreview patch",
    "created_at": "2012-12-09T22:03:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13778#issuecomment-162304",
    "user": "https://github.com/tscrim"
}
```

Attachment: **[trac_13778-lazy_list-review-ts.patch.gz](https://github.com/sagemath/sage/files/ticket13778/trac_13778-lazy_list-review-ts.patch.gz)**

review patch



---

archive/issue_comments_162305.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nHey Vincent,\n\nI like this implementation much better.\n\nI've added a few tests and tweaked documentation, but I've changed the behavior of `list()` slightly by not checking if stop was large since I did not like the following behavior:\n\n```\nsage: L = lazy_list([0,1]); L\nlazy list [0, 1]\nsage: L.list()\nTraceback\n...\nValueError: stop is too large!!\n```\nThere definitely is a problem with determining when iterators are infinite throughout sage (for example, `vector(RR, QQ)` in ticket #13556), however I'd rather have finite lazy lists always have a `list()` method not raise an exception.\n\nI've also added a check if the input to lazy list is a list or tuple, then it sets `stop` to the length of the list if `stop` was not specified.\n\nIf you agree with the changes, feel free to set this to positive review.\n\nBest,\n\nTravis\n\n---\n\nFor patchbot:\n\nApply: trac_13778-lazy_list.patch, trac_13778-lazy_list-review-ts.patch",
    "created_at": "2012-12-09T22:27:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13778#issuecomment-162305",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:13" align="right">comment:13</div>

Hey Vincent,

I like this implementation much better.

I've added a few tests and tweaked documentation, but I've changed the behavior of `list()` slightly by not checking if stop was large since I did not like the following behavior:

```
sage: L = lazy_list([0,1]); L
lazy list [0, 1]
sage: L.list()
Traceback
...
ValueError: stop is too large!!
```
There definitely is a problem with determining when iterators are infinite throughout sage (for example, `vector(RR, QQ)` in ticket #13556), however I'd rather have finite lazy lists always have a `list()` method not raise an exception.

I've also added a check if the input to lazy list is a list or tuple, then it sets `stop` to the length of the list if `stop` was not specified.

If you agree with the changes, feel free to set this to positive review.

Best,

Travis

---

For patchbot:

Apply: trac_13778-lazy_list.patch, trac_13778-lazy_list-review-ts.patch



---

archive/issue_comments_162306.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n Lazy lists are iterators that behave like `list` and implement a cache mechanism.\n \n-Apply only apply trac_13778-lazy_list.patch\n+Apply only: trac_13778-lazy_list.patch, trac_13778-lazy_list-review-ts.patch\n``````\n",
    "created_at": "2012-12-09T22:27:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13778#issuecomment-162306",
    "user": "https://github.com/tscrim"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
 Lazy lists are iterators that behave like `list` and implement a cache mechanism.
 
-Apply only apply trac_13778-lazy_list.patch
+Apply only: trac_13778-lazy_list.patch, trac_13778-lazy_list-review-ts.patch
``````




---

archive/issue_comments_162307.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nHi Travis,\n\nThe doctest for .info() fails on my machine and for patchbot (if the test pass on your machine, I guess that we do not have the same PY_SSIZE_T_MAX). So I changed it.\n\nI also add a TODO in the method `._update_cache_up_to(n)` which may be enhanced (but I was not able to do it because of my poor knowledge of cython).\n\nBest,\nVincent\n\nPS (for patchbot):\n\napply trac_13778-lazy_list.patch trac_13778-lazy_list-review-ts.patch trac_13778-lazy_list-documentation-vd.patch",
    "created_at": "2012-12-10T07:52:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13778#issuecomment-162307",
    "user": "https://github.com/videlec"
}
```

<div id="comment:14" align="right">comment:14</div>

Hi Travis,

The doctest for .info() fails on my machine and for patchbot (if the test pass on your machine, I guess that we do not have the same PY_SSIZE_T_MAX). So I changed it.

I also add a TODO in the method `._update_cache_up_to(n)` which may be enhanced (but I was not able to do it because of my poor knowledge of cython).

Best,
Vincent

PS (for patchbot):

apply trac_13778-lazy_list.patch trac_13778-lazy_list-review-ts.patch trac_13778-lazy_list-documentation-vd.patch



---

archive/issue_comments_162308.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,6 @@\n Lazy lists are iterators that behave like `list` and implement a cache mechanism.\n \n-Apply only: trac_13778-lazy_list.patch, trac_13778-lazy_list-review-ts.patch\n+Apply in that order:\n+* trac_13778-lazy_list.patch\n+* trac_13778-lazy_list-review-ts.patch\n+* trac_13778-lazy_list-documentation-vd.patch\n``````\n",
    "created_at": "2012-12-10T07:53:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13778#issuecomment-162308",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,6 @@
 Lazy lists are iterators that behave like `list` and implement a cache mechanism.
 
-Apply only: trac_13778-lazy_list.patch, trac_13778-lazy_list-review-ts.patch
+Apply in that order:
+* trac_13778-lazy_list.patch
+* trac_13778-lazy_list-review-ts.patch
+* trac_13778-lazy_list-documentation-vd.patch
``````




---

archive/issue_events_191415.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2012-12-10T18:52:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13778#event-191415"
}
```



---

archive/issue_events_191416.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2012-12-10T18:52:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13778#event-191416"
}
```



---

archive/issue_comments_162309.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@videlec](#comment:14):\n> The doctest for .info() fails on my machine and for patchbot (if the test pass on your machine, I guess that we do not have the same PY_SSIZE_T_MAX). So I changed it.\n\nSeems like it.\n\n> I also add a TODO in the method `._update_cache_up_to(n)` which may be enhanced (but I was not able to do it because of my poor knowledge of cython).\n\nI trying using the python syntax for catching exceptions, and while things seemed to work fine when running in the interpreter, it caused segfaults when running `sage -t`. I have no idea how to fix this (nor I could not find how to catch python exceptions in a `cdef` extension function which is where I suspect the problem was).\n\nShort version: I'm happy with the way things currently are, so I'm setting this to positive review (hopefully for the last time XP).\n\nThanks,\n\nTravis",
    "created_at": "2012-12-10T18:52:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13778#issuecomment-162309",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@videlec](#comment:14):
> The doctest for .info() fails on my machine and for patchbot (if the test pass on your machine, I guess that we do not have the same PY_SSIZE_T_MAX). So I changed it.

Seems like it.

> I also add a TODO in the method `._update_cache_up_to(n)` which may be enhanced (but I was not able to do it because of my poor knowledge of cython).

I trying using the python syntax for catching exceptions, and while things seemed to work fine when running in the interpreter, it caused segfaults when running `sage -t`. I have no idea how to fix this (nor I could not find how to catch python exceptions in a `cdef` extension function which is where I suspect the problem was).

Short version: I'm happy with the way things currently are, so I'm setting this to positive review (hopefully for the last time XP).

Thanks,

Travis



---

archive/issue_comments_162310.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nMany thanks for the review and your involvement in the ticket.\n\nVincent",
    "created_at": "2012-12-13T13:08:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13778#issuecomment-162310",
    "user": "https://github.com/videlec"
}
```

<div id="comment:17" align="right">comment:17</div>

Many thanks for the review and your involvement in the ticket.

Vincent



---

archive/issue_comments_162311.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n Lazy lists are iterators that behave like `list` and implement a cache mechanism.\n \n Apply in that order:\n-* trac_13778-lazy_list.patch\n-* trac_13778-lazy_list-review-ts.patch\n-* trac_13778-lazy_list-documentation-vd.patch\n+* [attachment: trac_13778-lazy_list.patch](https://github.com/sagemath/sage/files/ticket13778/trac_13778-lazy_list.patch.gz)\n+* [attachment: trac_13778-lazy_list-review-ts.patch](https://github.com/sagemath/sage/files/ticket13778/trac_13778-lazy_list-review-ts.patch.gz)\n+* [attachment: trac_13778-lazy_list-documentation-vd.patch](https://github.com/sagemath/sage/files/ticket13778/trac_13778-lazy_list-documentation-vd.patch.gz)\n``````\n",
    "created_at": "2012-12-16T14:34:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13778#issuecomment-162311",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 Lazy lists are iterators that behave like `list` and implement a cache mechanism.
 
 Apply in that order:
-* trac_13778-lazy_list.patch
-* trac_13778-lazy_list-review-ts.patch
-* trac_13778-lazy_list-documentation-vd.patch
+* [attachment: trac_13778-lazy_list.patch](https://github.com/sagemath/sage/files/ticket13778/trac_13778-lazy_list.patch.gz)
+* [attachment: trac_13778-lazy_list-review-ts.patch](https://github.com/sagemath/sage/files/ticket13778/trac_13778-lazy_list-review-ts.patch.gz)
+* [attachment: trac_13778-lazy_list-documentation-vd.patch](https://github.com/sagemath/sage/files/ticket13778/trac_13778-lazy_list-documentation-vd.patch.gz)
``````




---

archive/issue_comments_162312.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nPlease rebase this to #11795, there is a conflict in `doc/en/reference/misc.rst`",
    "created_at": "2012-12-18T12:55:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13778#issuecomment-162312",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:19" align="right">comment:19</div>

Please rebase this to #11795, there is a conflict in `doc/en/reference/misc.rst`



---

archive/issue_comments_162313.json:
```json
{
    "body": "Dependencies: **#11795**",
    "created_at": "2012-12-18T12:55:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13778#issuecomment-162313",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#11795**



---

archive/issue_events_191417.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-12-18T12:55:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13778#event-191417"
}
```



---

archive/issue_events_191418.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-12-18T12:55:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13778#event-191418"
}
```



---

archive/issue_comments_162314.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nRebased.\n\napply trac_13778-lazy_list.patch trac_13778-lazy_list-review-ts.patch trac_13778-lazy_list-documentation-vd.patch",
    "created_at": "2012-12-19T18:08:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13778#issuecomment-162314",
    "user": "https://github.com/videlec"
}
```

<div id="comment:20" align="right">comment:20</div>

Rebased.

apply trac_13778-lazy_list.patch trac_13778-lazy_list-review-ts.patch trac_13778-lazy_list-documentation-vd.patch



---

archive/issue_events_191419.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2012-12-19T19:27:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13778#event-191419"
}
```



---

archive/issue_events_191420.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2012-12-19T19:27:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13778#event-191420"
}
```



---

archive/issue_comments_162315.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nThe commit messages of the patches should be cleared up. In particular they should not refer to the filename `trac_13778-lazy_list-documentation-vd.patch`. And why does [attachment: trac_13778-lazy_list.patch](https://github.com/sagemath/sage/files/ticket13778/trac_13778-lazy_list.patch.gz) also refer to the other two patches in the commit message?",
    "created_at": "2012-12-20T13:02:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13778#issuecomment-162315",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:22" align="right">comment:22</div>

The commit messages of the patches should be cleared up. In particular they should not refer to the filename `trac_13778-lazy_list-documentation-vd.patch`. And why does [attachment: trac_13778-lazy_list.patch](https://github.com/sagemath/sage/files/ticket13778/trac_13778-lazy_list.patch.gz) also refer to the other two patches in the commit message?



---

archive/issue_events_191421.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-12-20T13:02:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13778#event-191421"
}
```



---

archive/issue_events_191422.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-12-20T13:02:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13778#event-191422"
}
```



---

archive/issue_comments_162316.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\n*** ping ***",
    "created_at": "2012-12-23T21:16:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13778#issuecomment-162316",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:23" align="right">comment:23</div>

*** ping ***



---

archive/issue_comments_162317.json:
```json
{
    "body": "Attachment: **[trac_13778-lazy_list.patch.gz](https://github.com/sagemath/sage/files/ticket13778/trac_13778-lazy_list.patch.gz)**",
    "created_at": "2012-12-24T12:07:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13778#issuecomment-162317",
    "user": "https://github.com/videlec"
}
```

Attachment: **[trac_13778-lazy_list.patch.gz](https://github.com/sagemath/sage/files/ticket13778/trac_13778-lazy_list.patch.gz)**



---

archive/issue_comments_162318.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nAttachment: **[trac_13778-lazy_list-documentation-vd.patch.gz](https://github.com/sagemath/sage/files/ticket13778/trac_13778-lazy_list-documentation-vd.patch.gz)**\n\nReplying to [@jdemeyer](#comment:23):\n> *** ping ***\n\nMy apologies.",
    "created_at": "2012-12-24T12:07:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13778#issuecomment-162318",
    "user": "https://github.com/videlec"
}
```

<div id="comment:24" align="right">comment:24</div>

Attachment: **[trac_13778-lazy_list-documentation-vd.patch.gz](https://github.com/sagemath/sage/files/ticket13778/trac_13778-lazy_list-documentation-vd.patch.gz)**

Replying to [@jdemeyer](#comment:23):
> *** ping ***

My apologies.



---

archive/issue_comments_162319.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\napply trac_13778-lazy_list.patch trac_13778-lazy_list-review-ts.patch trac_13778-lazy_list-documentation-vd.patch",
    "created_at": "2012-12-24T12:07:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13778#issuecomment-162319",
    "user": "https://github.com/videlec"
}
```

<div id="comment:25" align="right">comment:25</div>

apply trac_13778-lazy_list.patch trac_13778-lazy_list-review-ts.patch trac_13778-lazy_list-documentation-vd.patch



---

archive/issue_events_191423.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-12-26T13:20:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13778#event-191423"
}
```



---

archive/issue_events_191424.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-12-26T13:20:45Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13778#event-191424"
}
```



---

archive/issue_comments_162320.json:
```json
{
    "body": "Merged: **sage-5.6.beta1**",
    "created_at": "2012-12-26T13:20:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13778#issuecomment-162320",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.6.beta1**
