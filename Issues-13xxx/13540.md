# Issue 13540: Automatically detect and test optional dependencies

archive/issues_013336.json:
```json
{
    "assignees": [
        "https://github.com/sagetrac-mvngu"
    ],
    "body": "I'd deferred actually fixing the broken doctests to #13884, #13885, and #2120 so we can start using this (and not have everything optional broken).\n\n---\n\nSuperseded / fixed by #18558, #20182.\n\nCC:  @jhpalmieri @gvol @slel\n\nReviewer: **Kwankyu Lee, \u200bSamuel Leli\u00e8vre**\n\nComponent: **doctest framework**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/13540_\n\n",
    "closed_at": "2016-08-30T13:32:25Z",
    "created_at": "2012-09-27T09:20:00Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20doctest%20framework",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/wontfix"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Automatically detect and test optional dependencies",
    "type": "issue",
    "updated_at": "2016-08-30T13:32:25Z",
    "url": "https://github.com/sagemath/sage/issues/13540",
    "user": "https://github.com/robertwb"
}
```
I'd deferred actually fixing the broken doctests to #13884, #13885, and #2120 so we can start using this (and not have everything optional broken).

---

Superseded / fixed by #18558, #20182.

CC:  @jhpalmieri @gvol @slel

Reviewer: **Kwankyu Lee, ​Samuel Lelièvre**

Component: **doctest framework**

_Issue created by migration from https://trac.sagemath.org/ticket/13540_





---

archive/issue_events_189008.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2012-09-27T09:20:00Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13540#event-189008"
}
```



---

archive/issue_events_189009.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2012-09-27T09:20:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "label": "https://github.com/sagemath/sage/labels/doctest%20coverage",
    "label_color": "696969",
    "label_name": "doctest coverage",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13540#event-189009"
}
```



---

archive/issue_events_189010.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2012-09-27T09:20:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13540#event-189010"
}
```



---

archive/issue_events_189011.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2012-09-27T09:20:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13540#event-189011"
}
```



---

archive/issue_events_189012.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2012-09-27T09:20:00Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "subject": "https://github.com/robertwb",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13540#event-189012"
}
```



---

archive/issue_comments_158079.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nChecking just for the existence of `gcc` is insufficient, you would have a lot of false positives with missing/broken assemblers/linkers...  You actually need to compile something, preferably a shared library.",
    "created_at": "2012-09-27T09:27:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13540#issuecomment-158079",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:1" align="right">comment:1</div>

Checking just for the existence of `gcc` is insufficient, you would have a lot of false positives with missing/broken assemblers/linkers...  You actually need to compile something, preferably a shared library.



---

archive/issue_comments_158080.json:
```json
{
    "body": "Author: **Robert Bradshaw**",
    "created_at": "2012-09-27T09:27:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13540#issuecomment-158080",
    "user": "https://github.com/jdemeyer"
}
```

Author: **Robert Bradshaw**



---

archive/issue_comments_158081.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nFor the internet test: could you use `www.sagemath.org` instead of `173.194.33.3`.  In any case, an IP address is bad because\n1. you don't test DNS, which is required.\n2. it can change.",
    "created_at": "2012-09-27T09:30:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13540#issuecomment-158081",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:2" align="right">comment:2</div>

For the internet test: could you use `www.sagemath.org` instead of `173.194.33.3`.  In any case, an IP address is bad because
1. you don't test DNS, which is required.
2. it can change.



---

archive/issue_comments_158082.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nAlso please add a check for `g++` and `gfortran`.",
    "created_at": "2012-09-27T09:31:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13540#issuecomment-158082",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:3" align="right">comment:3</div>

Also please add a check for `g++` and `gfortran`.



---

archive/issue_comments_158083.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nInstead of relying on `which`, simply execute the command and catch `OSError`.",
    "created_at": "2012-09-27T09:44:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13540#issuecomment-158083",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:4" align="right">comment:4</div>

Instead of relying on `which`, simply execute the command and catch `OSError`.



---

archive/issue_comments_158084.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nCommand lines for `gcc`, `g++`, `gfortran` compiling a shared library from `/dev/null`:\n\n```\ngcc -shared -fpic -x c /dev/null -o /dev/null\ng++ -shared -fpic -x c++ /dev/null -o /dev/null\ngfortran -cpp -ffree-form -shared -fpic -x f95 /dev/null -o /dev/null\n```\n\nI have no idea how to do any of this with other compilers such as `clang`.",
    "created_at": "2012-09-27T09:55:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13540#issuecomment-158084",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:5" align="right">comment:5</div>

Command lines for `gcc`, `g++`, `gfortran` compiling a shared library from `/dev/null`:

```
gcc -shared -fpic -x c /dev/null -o /dev/null
g++ -shared -fpic -x c++ /dev/null -o /dev/null
gfortran -cpp -ffree-form -shared -fpic -x f95 /dev/null -o /dev/null
```

I have no idea how to do any of this with other compilers such as `clang`.



---

archive/issue_comments_158085.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI think it would be good to implement either caching or lazy evaluation (only check when actually encountering `# optional - foo`).  Otherwise, somebody with a slow internet connection could see a substantial time added to every doctest run.",
    "created_at": "2012-09-27T09:58:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13540#issuecomment-158085",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:6" align="right">comment:6</div>

I think it would be good to implement either caching or lazy evaluation (only check when actually encountering `# optional - foo`).  Otherwise, somebody with a slow internet connection could see a substantial time added to every doctest run.



---

archive/issue_comments_158086.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nFor programs like `magma`, does Sage require a specific version?  If so, you should check for that version.",
    "created_at": "2012-09-27T10:11:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13540#issuecomment-158086",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:7" align="right">comment:7</div>

For programs like `magma`, does Sage require a specific version?  If so, you should check for that version.



---

archive/issue_comments_158087.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI would be surprised if many people that have gcc have a broken gcc, but it couldn't hurt to check (and g++, etc.) Same with internet--it's rare for people to be connected but not be able to resolve DNS. (If this is lazy, latency less of an issue.)\n\nGood points. I'll refactor this to make things lazy and otherwise improve the patch.",
    "created_at": "2012-09-28T07:26:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13540#issuecomment-158087",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:8" align="right">comment:8</div>

I would be surprised if many people that have gcc have a broken gcc, but it couldn't hurt to check (and g++, etc.) Same with internet--it's rare for people to be connected but not be able to resolve DNS. (If this is lazy, latency less of an issue.)

Good points. I'll refactor this to make things lazy and otherwise improve the patch.



---

archive/issue_comments_158088.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nAttachment: **[13540-optional-tests.2.patch.gz](https://github.com/sagemath/sage/files/ticket13540/13540-optional-tests.2.patch.gz)**\n\nApply only 13540-optional-tests.2.patch",
    "created_at": "2012-10-09T07:57:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13540#issuecomment-158088",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:11" align="right">comment:11</div>

Attachment: **[13540-optional-tests.2.patch.gz](https://github.com/sagemath/sage/files/ticket13540/13540-optional-tests.2.patch.gz)**

Apply only 13540-optional-tests.2.patch



---

archive/issue_events_189013.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2012-10-09T07:57:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13540#event-189013"
}
```



---

archive/issue_comments_158089.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nApply 13540-optional-tests.2.patch to sage-local repo.",
    "created_at": "2012-10-24T06:48:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13540#issuecomment-158089",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:12" align="right">comment:12</div>

Apply 13540-optional-tests.2.patch to sage-local repo.



---

archive/issue_comments_158090.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nThe patch is great but a great number of the `# optional - internet` doctests fail because they haven't been doctested in a while... Any opinion on how to proceeed?",
    "created_at": "2012-12-20T15:11:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13540#issuecomment-158090",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:13" align="right">comment:13</div>

The patch is great but a great number of the `# optional - internet` doctests fail because they haven't been doctested in a while... Any opinion on how to proceeed?



---

archive/issue_comments_158091.json:
```json
{
    "body": "Attachment: **[13540-disable-broken.patch.gz](https://github.com/sagemath/sage/files/ticket13540/13540-disable-broken.patch.gz)**",
    "created_at": "2012-12-30T01:04:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13540#issuecomment-158091",
    "user": "https://github.com/robertwb"
}
```

Attachment: **[13540-disable-broken.patch.gz](https://github.com/sagemath/sage/files/ticket13540/13540-disable-broken.patch.gz)**



---

archive/issue_comments_158092.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+I'd deferred actually fixing the broken doctests to #13884, #13885, and #2120 so we can start using this (and not have everything optional broken).\n``````\n",
    "created_at": "2012-12-30T01:09:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13540#issuecomment-158092",
    "user": "https://github.com/robertwb"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+I'd deferred actually fixing the broken doctests to #13884, #13885, and #2120 so we can start using this (and not have everything optional broken).
``````




---

archive/issue_comments_158093.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nIMHO we shouldn't hardcode the names of the executables (`gcc`, `g++`, `gfortran` etc.), but respect for example `CC`, `CXX`, `FC`/`F77`/`F95`.\n\n(Also wonder whether \"`# optional - gcc`\" really means GCC, or *some* C compiler, perhaps at least capable of compiling Cython-generated code.)",
    "created_at": "2012-12-30T02:43:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13540#issuecomment-158093",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:15" align="right">comment:15</div>

IMHO we shouldn't hardcode the names of the executables (`gcc`, `g++`, `gfortran` etc.), but respect for example `CC`, `CXX`, `FC`/`F77`/`F95`.

(Also wonder whether "`# optional - gcc`" really means GCC, or *some* C compiler, perhaps at least capable of compiling Cython-generated code.)



---

archive/issue_comments_158094.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@nexttime](#comment:15):\n> IMHO we shouldn't hardcode the names of the executables (`gcc`, `g++`, `gfortran` etc.), but respect for example `CC`, `CXX`, `FC`/`F77`/`F95`.\n\nAs an alternative, we **might** put their settings \"during build\" (whatever that means) into dummy/wrapper scripts in `$SAGE_LOCAL/bin/`.  (I don't really have an opion on that, but tend to be against such.  It might be convenient to \"ordinary\" users, or perhaps for automated testing, but annoying or confusing to developers.)",
    "created_at": "2012-12-30T02:55:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13540#issuecomment-158094",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@nexttime](#comment:15):
> IMHO we shouldn't hardcode the names of the executables (`gcc`, `g++`, `gfortran` etc.), but respect for example `CC`, `CXX`, `FC`/`F77`/`F95`.

As an alternative, we **might** put their settings "during build" (whatever that means) into dummy/wrapper scripts in `$SAGE_LOCAL/bin/`.  (I don't really have an opion on that, but tend to be against such.  It might be convenient to "ordinary" users, or perhaps for automated testing, but annoying or confusing to developers.)



---

archive/issue_comments_158095.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nFor all intents and purposes, at the moment, gcc really means gcc. And building a Cython extension with a different compiler than Python was compiled with (and the relevant libraries, for C++ in particular) gets really messy. \n\nIn any case, the point of this ticket is to introduce a framework that lets us test optional doctests automatically, as they the current setup means they're never tested and so quickly broken. We could do something more sophisticated with CC, etc. but gcc, at the very least, provides a common enough dependency to actually exercise this code for most (probably all) developers (and it's not near as brittle as others).",
    "created_at": "2012-12-30T04:33:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13540#issuecomment-158095",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:17" align="right">comment:17</div>

For all intents and purposes, at the moment, gcc really means gcc. And building a Cython extension with a different compiler than Python was compiled with (and the relevant libraries, for C++ in particular) gets really messy. 

In any case, the point of this ticket is to introduce a framework that lets us test optional doctests automatically, as they the current setup means they're never tested and so quickly broken. We could do something more sophisticated with CC, etc. but gcc, at the very least, provides a common enough dependency to actually exercise this code for most (probably all) developers (and it's not near as brittle as others).



---

archive/issue_comments_158096.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@robertwb](#comment:17):\n> For all intents and purposes, at the moment, gcc really means gcc. And building a Cython extension with a different compiler than Python was compiled with (and the relevant libraries, for C++ in particular) gets really messy.\n\nWe might then even use Python's / distutils' settings for testing tool availability (although there's no variable for the Fortran compiler AFAIK).  Not sure what to do with bdists (in case they don't contain a pre-built GCC as well).\n\n\n\n\n> In any case, the point of this ticket is to introduce a framework that lets us test optional doctests automatically, as they the current setup means they're never tested and so quickly broken. We could do something more sophisticated with CC, etc. but gcc, at the very least, provides a common enough dependency to actually exercise this code for most (probably all) developers (and it's not near as brittle as others).\n\nYes.  Nevertheless, I don't think I'm the only one that almost always sets `CC`, `CXX` etc., in order to use *different versions of GCC*.\n\nSupport for other compilers (e.g. `clang`), probably also flags to pass, is certainly out of the scope of this ticket.  (It would be convenient to have something like `config.status`, i.e., a mechanism for storing and restoring the build environment, and/or also a \"`.sagerc`\" local / specific to the *Sage installation*, one overriding the other...)",
    "created_at": "2012-12-30T05:21:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13540#issuecomment-158096",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@robertwb](#comment:17):
> For all intents and purposes, at the moment, gcc really means gcc. And building a Cython extension with a different compiler than Python was compiled with (and the relevant libraries, for C++ in particular) gets really messy.

We might then even use Python's / distutils' settings for testing tool availability (although there's no variable for the Fortran compiler AFAIK).  Not sure what to do with bdists (in case they don't contain a pre-built GCC as well).




> In any case, the point of this ticket is to introduce a framework that lets us test optional doctests automatically, as they the current setup means they're never tested and so quickly broken. We could do something more sophisticated with CC, etc. but gcc, at the very least, provides a common enough dependency to actually exercise this code for most (probably all) developers (and it's not near as brittle as others).

Yes.  Nevertheless, I don't think I'm the only one that almost always sets `CC`, `CXX` etc., in order to use *different versions of GCC*.

Support for other compilers (e.g. `clang`), probably also flags to pass, is certainly out of the scope of this ticket.  (It would be convenient to have something like `config.status`, i.e., a mechanism for storing and restoring the build environment, and/or also a "`.sagerc`" local / specific to the *Sage installation*, one overriding the other...)



---

archive/issue_comments_158097.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nHow is this supposed to interact with the `--optional` and `--only-optional` command line options? I have a hard time understanding the new code.",
    "created_at": "2012-12-30T08:02:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13540#issuecomment-158097",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:19" align="right">comment:19</div>

How is this supposed to interact with the `--optional` and `--only-optional` command line options? I have a hard time understanding the new code.



---

archive/issue_events_189014.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2013-03-28T23:12:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "label": "https://github.com/sagemath/sage/labels/doctest%20coverage",
    "label_color": "696969",
    "label_name": "doctest coverage",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13540#event-189014"
}
```



---

archive/issue_events_189015.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2013-03-28T23:12:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20doctest%20framework",
    "label_color": "000080",
    "label_name": "c: doctest framework",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13540#event-189015"
}
```



---

archive/issue_events_189016.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-03-29T01:44:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13540#event-189016"
}
```



---

archive/issue_events_189017.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-03-29T01:44:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13540#event-189017"
}
```



---

archive/issue_comments_158098.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nThis would obviously need to be rebased to #12415.",
    "created_at": "2013-03-29T01:44:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13540#issuecomment-158098",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:21" align="right">comment:21</div>

This would obviously need to be rebased to #12415.



---

archive/issue_comments_158099.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\n(just to follow what's happening. This ticket would be a nice change indeed `O_o`)",
    "created_at": "2013-08-02T09:48:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13540#issuecomment-158099",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:22" align="right">comment:22</div>

(just to follow what's happening. This ticket would be a nice change indeed `O_o`)



---

archive/issue_events_189018.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13540#event-189018"
}
```



---

archive/issue_events_189019.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13540#event-189019"
}
```



---

archive/issue_events_189020.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13540#event-189020"
}
```



---

archive/issue_events_189021.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13540#event-189021"
}
```



---

archive/issue_events_189022.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13540#event-189022"
}
```



---

archive/issue_events_189023.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13540#event-189023"
}
```



---

archive/issue_comments_158100.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nMagma doctest failures now get fixed at #16322.",
    "created_at": "2014-05-17T22:12:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13540#issuecomment-158100",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:26" align="right">comment:26</div>

Magma doctest failures now get fixed at #16322.



---

archive/issue_events_189024.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13540#event-189024"
}
```



---

archive/issue_events_189025.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13540#event-189025"
}
```



---

archive/issue_comments_158101.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nHello everybody,\n\nA branch that does that has been created at #18558 (needs review)\n\nNathann",
    "created_at": "2015-05-31T08:40:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13540#issuecomment-158101",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:28" align="right">comment:28</div>

Hello everybody,

A branch that does that has been created at #18558 (needs review)

Nathann



---

archive/issue_comments_158102.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nThis is now  \"duplicate/wontfix\" as the replacement #20182 is now merged.",
    "created_at": "2016-04-27T04:26:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13540#issuecomment-158102",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:29" align="right">comment:29</div>

This is now  "duplicate/wontfix" as the replacement #20182 is now merged.



---

archive/issue_events_189026.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2016-04-27T04:26:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13540#event-189026"
}
```



---

archive/issue_events_189027.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2016-04-27T04:26:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13540#event-189027"
}
```



---

archive/issue_events_189028.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2016-04-27T04:26:59Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13540#event-189028"
}
```



---

archive/issue_events_189029.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2016-04-27T04:26:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13540#event-189029"
}
```



---

archive/issue_events_189030.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2016-04-27T04:26:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13540#event-189030"
}
```



---

archive/issue_events_189031.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2016-08-29T08:42:20Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "title_is": "Automatically detect and test optional dependencies",
    "title_was": "Automatically detect and test optional dependencies.",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13540#event-189031"
}
```



---

archive/issue_comments_158103.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nIs this ticket solved by the other tickets mentioned in the last comments?\nDoes any comment in the discussion beg for a follow-up ticket?",
    "created_at": "2016-08-29T08:42:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13540#issuecomment-158103",
    "user": "https://github.com/slel"
}
```

<div id="comment:30" align="right">comment:30</div>

Is this ticket solved by the other tickets mentioned in the last comments?
Does any comment in the discussion beg for a follow-up ticket?



---

archive/issue_comments_158104.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nReplying to [@slel](#comment:30):\n> Is this ticket solved by the other tickets mentioned in the last comments?\n\nYes.\n\n> Does any comment in the discussion beg for a follow-up ticket?\n\nI don't think so. Most of the comments in this discussion are 4 years old, and so perhaps invalid now.",
    "created_at": "2016-08-29T08:52:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13540#issuecomment-158104",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:31" align="right">comment:31</div>

Replying to [@slel](#comment:30):
> Is this ticket solved by the other tickets mentioned in the last comments?

Yes.

> Does any comment in the discussion beg for a follow-up ticket?

I don't think so. Most of the comments in this discussion are 4 years old, and so perhaps invalid now.



---

archive/issue_events_189032.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2016-08-29T10:27:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13540#event-189032"
}
```



---

archive/issue_events_189033.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2016-08-29T10:27:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13540#event-189033"
}
```



---

archive/issue_comments_158105.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\n4-year old => invalid\n\nROFL.",
    "created_at": "2016-08-29T16:10:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13540#issuecomment-158105",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:33" align="right">comment:33</div>

4-year old => invalid

ROFL.



---

archive/issue_comments_158106.json:
```json
{
    "body": "Reviewer: **Kwankyu Lee, \u200bSamuel Leli\u00e8vre**",
    "created_at": "2016-08-29T16:10:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13540#issuecomment-158106",
    "user": "https://github.com/nexttime"
}
```

Reviewer: **Kwankyu Lee, ​Samuel Lelièvre**



---

archive/issue_comments_158107.json:
```json
{
    "body": "Changed author from **Robert Bradshaw** to none",
    "created_at": "2016-08-29T16:10:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13540#issuecomment-158107",
    "user": "https://github.com/nexttime"
}
```

Changed author from **Robert Bradshaw** to none



---

archive/issue_comments_158108.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,5 @@\n I'd deferred actually fixing the broken doctests to #13884, #13885, and #2120 so we can start using this (and not have everything optional broken).\n+\n+---\n+\n+Superseded / fixed by #18558, #20182.\n``````\n",
    "created_at": "2016-08-29T16:14:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13540#issuecomment-158108",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,5 @@
 I'd deferred actually fixing the broken doctests to #13884, #13885, and #2120 so we can start using this (and not have everything optional broken).
+
+---
+
+Superseded / fixed by #18558, #20182.
``````




---

archive/issue_events_189034.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-08-30T13:32:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "label": "https://github.com/sagemath/sage/labels/wontfix",
    "label_color": "a6a6a6",
    "label_name": "wontfix",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13540#event-189034"
}
```



---

archive/issue_comments_158109.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nDetermined to be invalid/duplicate/wontfix (closing as \"wontfix\" as a catch-all resolution).",
    "created_at": "2016-08-30T13:32:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13540#issuecomment-158109",
    "user": "https://github.com/embray"
}
```

<div id="comment:35" align="right">comment:35</div>

Determined to be invalid/duplicate/wontfix (closing as "wontfix" as a catch-all resolution).



---

archive/issue_events_189035.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-08-30T13:32:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13540#event-189035"
}
```



---

archive/issue_events_189036.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-08-30T13:32:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/13540",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13540#event-189036"
}
```
