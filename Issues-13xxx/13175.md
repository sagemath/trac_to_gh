# Issue 13175: Upgrade Mercurial

archive/issues_013003.json:
```json
{
    "body": "The current Mercurial doesn't work fully on Solaris SPARC.  Upgrading fixes this.  \n\nI added a small sanity check in `spkg-install` that `hg log` works on the mercurial spkg repository.\n\n**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mercurial-2.2.2.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mercurial-2.2.2.p0.spkg)\n\n### mercurial-2.2.2.p0 (Jeroen Demeyer, 28 June 2012)\n* Trac #13175: upgrade to mercurial-2.2.2.\n* Remove xcode.patch, which got upstreamed.\n* Rename posix.py.patch to etc_mercurial.patch; keep the spirit of\n  the old patch but patch a different source file.\n* Don't delete python/python2.6 and python/python in $SAGE_LOCAL/lib,\n  this is handled by the Python spkg.\n\n\nAssignee: tbd\n\nReviewer: Volker Braun\n\nAuthor: Jeroen Demeyer\n\nMerged: sage-5.2.beta1\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/13175\n\n",
    "closed_at": "2012-07-07T22:31:38Z",
    "created_at": "2012-06-28T11:25:31Z",
    "labels": [
        "component: packages: standard",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.2",
    "title": "Upgrade Mercurial",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13175",
    "user": "https://github.com/jdemeyer"
}
```
The current Mercurial doesn't work fully on Solaris SPARC.  Upgrading fixes this.  

I added a small sanity check in `spkg-install` that `hg log` works on the mercurial spkg repository.

**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mercurial-2.2.2.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mercurial-2.2.2.p0.spkg)

### mercurial-2.2.2.p0 (Jeroen Demeyer, 28 June 2012)
* Trac #13175: upgrade to mercurial-2.2.2.
* Remove xcode.patch, which got upstreamed.
* Rename posix.py.patch to etc_mercurial.patch; keep the spirit of
  the old patch but patch a different source file.
* Don't delete python/python2.6 and python/python in $SAGE_LOCAL/lib,
  this is handled by the Python spkg.


Assignee: tbd

Reviewer: Volker Braun

Author: Jeroen Demeyer

Merged: sage-5.2.beta1

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/13175





---

archive/issue_comments_167178.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,8 +1,17 @@\n-The current Mercurial doesn't work on Solaris SPARC.\n+The current Mercurial doesn't work fully on Solaris SPARC.  Upgrading fixes this.  \n \n-Upgrading fixes this.\n+I added a small sanity check in `spkg-install` that `hg log` works on the mercurial spkg repository.\n \n **spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mercurial-2.2.2.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mercurial-2.2.2.p0.spkg)\n+\n+### mercurial-2.2.2.p0 (Jeroen Demeyer, 28 June 2012)\n+* Trac #13175: upgrade to mercurial-2.2.2.\n+* Remove xcode.patch, which got upstreamed.\n+* Rename posix.py.patch to etc_mercurial.patch; keep the spirit of\n+  the old patch but patch a different source file.\n+* Don't delete python/python2.6 and python/python in $SAGE_LOCAL/lib,\n+  this is handled by the Python spkg.\n+\n \n Author: Jeroen Demeyer\n \n```\n",
    "created_at": "2012-06-28T11:35:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13175#issuecomment-167178",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,8 +1,17 @@
-The current Mercurial doesn't work on Solaris SPARC.
+The current Mercurial doesn't work fully on Solaris SPARC.  Upgrading fixes this.  
 
-Upgrading fixes this.
+I added a small sanity check in `spkg-install` that `hg log` works on the mercurial spkg repository.
 
 **spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mercurial-2.2.2.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mercurial-2.2.2.p0.spkg)
+
+### mercurial-2.2.2.p0 (Jeroen Demeyer, 28 June 2012)
+* Trac #13175: upgrade to mercurial-2.2.2.
+* Remove xcode.patch, which got upstreamed.
+* Rename posix.py.patch to etc_mercurial.patch; keep the spirit of
+  the old patch but patch a different source file.
+* Don't delete python/python2.6 and python/python in $SAGE_LOCAL/lib,
+  this is handled by the Python spkg.
+
 
 Author: Jeroen Demeyer
 
```




---

archive/issue_comments_167179.json:
```json
{
    "body": "Attachment [mercurial-2.2.2.p0.diff](tarball://root/attachments/some-uuid/ticket13175/mercurial-2.2.2.p0.diff) by @jdemeyer created at 2012-06-28 11:36:45\n\nDiff between the 1.8.4.p1 and 2.2.2.p0 spkgs. For reference / review only.",
    "created_at": "2012-06-28T11:36:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13175#issuecomment-167179",
    "user": "https://github.com/jdemeyer"
}
```

Attachment [mercurial-2.2.2.p0.diff](tarball://root/attachments/some-uuid/ticket13175/mercurial-2.2.2.p0.diff) by @jdemeyer created at 2012-06-28 11:36:45

Diff between the 1.8.4.p1 and 2.2.2.p0 spkgs. For reference / review only.



---

archive/issue_comments_167180.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-06-28T13:16:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13175#issuecomment-167180",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_167181.json:
```json
{
    "body": "<a id='comment:3'></a>Fixes the bus error for me!",
    "created_at": "2012-06-29T09:10:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13175#issuecomment-167181",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:3'></a>Fixes the bus error for me!



---

archive/issue_comments_167182.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-06-29T09:10:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13175#issuecomment-167182",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_167183.json:
```json
{
    "body": "<a id='comment:4'></a>And it's notably faster than the old Mercurial.\n\nApplying *all* patches in the merger script, using sage-5.0.1 as a base (user CPU time):\n\n```\nsage-5.1.beta5:               2m4.510s\nsage-5.1.beta6:               2m9.640s\nsage-5.1.rc0:                2m21.850s\nsage-5.1 + mercurial-2.2.2:  1m36.400s\n```",
    "created_at": "2012-06-29T12:21:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13175#issuecomment-167183",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'></a>And it's notably faster than the old Mercurial.

Applying *all* patches in the merger script, using sage-5.0.1 as a base (user CPU time):

```
sage-5.1.beta5:               2m4.510s
sage-5.1.beta6:               2m9.640s
sage-5.1.rc0:                2m21.850s
sage-5.1 + mercurial-2.2.2:  1m36.400s
```



---

archive/issue_events_036308.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-07-07T22:31:38Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13175",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13175#event-36308"
}
```



---

archive/issue_comments_167184.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-07-07T22:31:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13175#issuecomment-167184",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
