# Issue 13520: Improved support for relabelled Cartan types

archive/issues_013520.json:
```json
{
    "body": "Assignee: joyner\n\nCC:  @tscrim\n\nKeywords: CartanType relabel\n\nThis ticket implements features that were missing for relabelled\nCartan types and dual cartan types::\n\n```\nsage: A3 = CartanType(\"A3\")          \nsage: A3.cartan_matrix()             \n[ 2 -1  0]\n[-1  2 -1]\n[ 0 -1  2]\nsage: A3r = A3.relabel({1:2,2:3,3:1})\nsage: A3r.cartan_matrix()\n...\nAttributeError: 'CartanType' object has no attribute 'cartan_matrix'\n```\n\nHere is a similar issue reported by Mark Shimozono:\n\n```\n    sage: ct = CartanType([\"D\",4,3]).classical(); ct\n    ['G', 2]^* relabelled by {1: 2, 2: 1}\n    sage: ct.symmetrizer()\n    Traceback (most recent call last)\n    ...\n    AttributeError: 'CartanType' object has no attribute 'symmetrizer'\n```\n\nIt does so by adding the appropriate abstract classes to those cartan\ntypes, depending on the abstract classes of the original cartan type.\n\nAt this occasion, it also implements the ambient space for relabelled\nCartan types, and implements the dual of F4 and G2 as relabelled\nCartan types. This fixes missing features for those like:\n\n```\n    sage: ct = CartanType([\"G\",2]).dual()\n    sage: ct.affine()\n    AttributeError: 'CartanType_with_superclass' object has no attribute 'affine'\n```\n\nWARNING: due to the above change, the ambient space for type G2^* and\nF4^* is now constructed by relabelling those for G2 and F4 instead of\ntaking the dual. The end result is isomorphic but not equal to the\noriginal one. This shows up in plot pictures. Computations should run\nas before, except in the (hopefully unlikely case) one is writing\ninput weights for type G2^* or F4^* as elements of those ambient\nspaces.\n\nFor safety, this ticket also turns on by default the recently added\nglobal option ``latex_relabel`` for Cartan types.\n\nRelated discussion in sage-combinat-devel: https://groups.google.com/forum/?fromgroups=#!topic/sage-combinat-devel/On-VfvxjeDk\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/13724\n\n",
    "closed_at": "2013-05-17T06:32:29Z",
    "created_at": "2012-11-19T22:31:13Z",
    "labels": [
        "component: combinatorics",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.10",
    "title": "Improved support for relabelled Cartan types",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13520",
    "user": "https://trac.sagemath.org/admin/accounts/users/JesusTorrado"
}
```
Assignee: joyner

CC:  @tscrim

Keywords: CartanType relabel

This ticket implements features that were missing for relabelled
Cartan types and dual cartan types::

```
sage: A3 = CartanType("A3")          
sage: A3.cartan_matrix()             
[ 2 -1  0]
[-1  2 -1]
[ 0 -1  2]
sage: A3r = A3.relabel({1:2,2:3,3:1})
sage: A3r.cartan_matrix()
...
AttributeError: 'CartanType' object has no attribute 'cartan_matrix'
```

Here is a similar issue reported by Mark Shimozono:

```
    sage: ct = CartanType(["D",4,3]).classical(); ct
    ['G', 2]^* relabelled by {1: 2, 2: 1}
    sage: ct.symmetrizer()
    Traceback (most recent call last)
    ...
    AttributeError: 'CartanType' object has no attribute 'symmetrizer'
```

It does so by adding the appropriate abstract classes to those cartan
types, depending on the abstract classes of the original cartan type.

At this occasion, it also implements the ambient space for relabelled
Cartan types, and implements the dual of F4 and G2 as relabelled
Cartan types. This fixes missing features for those like:

```
    sage: ct = CartanType(["G",2]).dual()
    sage: ct.affine()
    AttributeError: 'CartanType_with_superclass' object has no attribute 'affine'
```

WARNING: due to the above change, the ambient space for type G2^* and
F4^* is now constructed by relabelling those for G2 and F4 instead of
taking the dual. The end result is isomorphic but not equal to the
original one. This shows up in plot pictures. Computations should run
as before, except in the (hopefully unlikely case) one is writing
input weights for type G2^* or F4^* as elements of those ambient
spaces.

For safety, this ticket also turns on by default the recently added
global option ``latex_relabel`` for Cartan types.

Related discussion in sage-combinat-devel: https://groups.google.com/forum/?fromgroups=#!topic/sage-combinat-devel/On-VfvxjeDk


Issue created by migration from https://trac.sagemath.org/ticket/13724





---

archive/issue_comments_166685.json:
```json
{
    "body": "I just took over the patch to add similar things for type_dual and finalize. More to come soon.",
    "created_at": "2013-04-13T15:48:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13520#issuecomment-166685",
    "user": "https://github.com/nthiery"
}
```

I just took over the patch to add similar things for type_dual and finalize. More to come soon.



---

archive/issue_comments_166686.json:
```json
{
    "body": "Changing component from group theory to combinatorics.",
    "created_at": "2013-04-13T20:15:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13520#issuecomment-166686",
    "user": "https://github.com/nthiery"
}
```

Changing component from group theory to combinatorics.



---

archive/issue_comments_166687.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-04-13T20:15:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13520#issuecomment-166687",
    "user": "https://github.com/nthiery"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_166688.json:
```json
{
    "body": "There remains to decide whether we want to implemente G_2 dual as a relabelled type. I am exploring this in the queue.",
    "created_at": "2013-04-15T21:45:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13520#issuecomment-166688",
    "user": "https://github.com/nthiery"
}
```

There remains to decide whether we want to implemente G_2 dual as a relabelled type. I am exploring this in the queue.



---

archive/issue_comments_166689.json:
```json
{
    "body": "Looks good. After folding the relabelled patch, you can set this to positive review on my behalf. Thanks.",
    "created_at": "2013-05-07T21:17:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13520#issuecomment-166689",
    "user": "https://github.com/tscrim"
}
```

Looks good. After folding the relabelled patch, you can set this to positive review on my behalf. Thanks.



---

archive/issue_comments_166690.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-05-08T01:13:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13520#issuecomment-166690",
    "user": "https://github.com/nthiery"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_166691.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-05-09T17:04:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13520#issuecomment-166691",
    "user": "https://github.com/nthiery"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_166692.json:
```json
{
    "body": "New patch fixes a typo noticed by Travis and fixes on trivial test failure.",
    "created_at": "2013-05-09T17:36:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13520#issuecomment-166692",
    "user": "https://github.com/nthiery"
}
```

New patch fixes a typo noticed by Travis and fixes on trivial test failure.



---

archive/issue_comments_166693.json:
```json
{
    "body": "All long tests passed on sage.math.u-psud.fr.",
    "created_at": "2013-05-09T17:39:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13520#issuecomment-166693",
    "user": "https://github.com/nthiery"
}
```

All long tests passed on sage.math.u-psud.fr.



---

archive/issue_comments_166694.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-05-09T18:12:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13520#issuecomment-166694",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_166695.json:
```json
{
    "body": "Looks good for me as well. Thanks.",
    "created_at": "2013-05-09T18:12:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13520#issuecomment-166695",
    "user": "https://github.com/tscrim"
}
```

Looks good for me as well. Thanks.



---

archive/issue_comments_166696.json:
```json
{
    "body": "Attachment [trac_13724-cartan_type_inheritance-nt.patch](tarball://root/attachments/some-uuid/ticket13724/trac_13724-cartan_type_inheritance-nt.patch) by @nthiery created at 2013-05-10 19:06:48",
    "created_at": "2013-05-10T19:06:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13520#issuecomment-166696",
    "user": "https://github.com/nthiery"
}
```

Attachment [trac_13724-cartan_type_inheritance-nt.patch](tarball://root/attachments/some-uuid/ticket13724/trac_13724-cartan_type_inheritance-nt.patch) by @nthiery created at 2013-05-10 19:06:48



---

archive/issue_events_038448.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-17T06:32:29Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13520",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13520#event-38448"
}
```



---

archive/issue_comments_166697.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-05-17T06:32:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13520#issuecomment-166697",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
