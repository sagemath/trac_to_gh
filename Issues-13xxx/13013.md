# Issue 13013: Update to python-2.7.3

archive/issues_012841.json:
```json
{
    "body": "Python 2.7.2 distutils have a bug on ext4 or other filesystems with sub-second resolution. The result is that some source files are copied unnecessarily. This is somewhat annoying in `sage -b`.\n\nNew **spkg** at [http://boxen.math.washington.edu/home/jdemeyer/spkg/python-2.7.3.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/python-2.7.3.p0.spkg)\n\n**Apply** [attachment:trac_13013_setup_deps.patch]\n\n**CC:**  @kiwifb @novoselt\n\n**Keywords:** sd40.5\n\n**Reviewer:** Jeroen Demeyer\n\n**Author:** Volker Braun\n\n**Merged:** sage-5.0.1.rc1\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/13013\n\n",
    "closed_at": "2012-05-31T13:41:49Z",
    "created_at": "2012-05-25T17:55:20Z",
    "labels": [
        "component: packages: standard",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.0.1",
    "title": "Update to python-2.7.3",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13013",
    "user": "https://github.com/vbraun"
}
```
Python 2.7.2 distutils have a bug on ext4 or other filesystems with sub-second resolution. The result is that some source files are copied unnecessarily. This is somewhat annoying in `sage -b`.

New **spkg** at [http://boxen.math.washington.edu/home/jdemeyer/spkg/python-2.7.3.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/python-2.7.3.p0.spkg)

**Apply** [attachment:trac_13013_setup_deps.patch]

**CC:**  @kiwifb @novoselt

**Keywords:** sd40.5

**Reviewer:** Jeroen Demeyer

**Author:** Volker Braun

**Merged:** sage-5.0.1.rc1

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/13013





---

archive/issue_comments_196642.json:
```json
{
    "body": "<a id='comment:2'></a>\nOur `setup.py` needed some fixes to work with the new python, most notably you need to tell it to have at least one thread. Also fixed some other warts that annoyed me, like the \n\n```\nsetup.py:644: UserWarning: could not find dependency <vector> included in /home/vbraun/opt/sage-5.0/local/lib/python/site-packages/Cython/Includes/libcpp/vector.pxd. I will assume it is a system C/C++ header.\n```",
    "created_at": "2012-05-25T19:28:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13013#issuecomment-196642",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:2'></a>
Our `setup.py` needed some fixes to work with the new python, most notably you need to tell it to have at least one thread. Also fixed some other warts that annoyed me, like the 

```
setup.py:644: UserWarning: could not find dependency <vector> included in /home/vbraun/opt/sage-5.0/local/lib/python/site-packages/Cython/Includes/libcpp/vector.pxd. I will assume it is a system C/C++ header.
```



---

archive/issue_comments_196643.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n Python 2.7.2 distutils have a bug on ext4 or other filesystems with sub-second resolution. The result is that some source files are copied unnecessarily. This is somewhat annoying in `sage -b`.\n \n+New spkg at http://www.stp.dias.ie/~vbraun/Sage/spkg/python-2.7.3.p0.spkg\n \n+\n``````\n",
    "created_at": "2012-05-25T19:28:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13013#issuecomment-196643",
    "user": "https://github.com/vbraun"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
 Python 2.7.2 distutils have a bug on ext4 or other filesystems with sub-second resolution. The result is that some source files are copied unnecessarily. This is somewhat annoying in `sage -b`.
 
+New spkg at http://www.stp.dias.ie/~vbraun/Sage/spkg/python-2.7.3.p0.spkg
 
+
``````




---

archive/issue_comments_196644.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2012-05-25T19:29:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13013#issuecomment-196644",
    "user": "https://github.com/vbraun"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_196645.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,4 +2,4 @@\n \n New spkg at http://www.stp.dias.ie/~vbraun/Sage/spkg/python-2.7.3.p0.spkg\n \n-\n+Apply [attachment:trac_13013_setup_deps.patch]\n``````\n",
    "created_at": "2012-05-25T19:29:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13013#issuecomment-196645",
    "user": "https://github.com/vbraun"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,4 +2,4 @@
 
 New spkg at http://www.stp.dias.ie/~vbraun/Sage/spkg/python-2.7.3.p0.spkg
 
-
+Apply [attachment:trac_13013_setup_deps.patch]
``````




---

archive/issue_comments_196646.json:
```json
{
    "body": "spkg diff for review purposes only",
    "created_at": "2012-05-25T19:30:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13013#issuecomment-196646",
    "user": "https://github.com/vbraun"
}
```

spkg diff for review purposes only



---

archive/attachments_017576.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "python-spkg.diff",
    "asset_url": "tarball://root/attachments/some-uuid/ticket13013/python-spkg.diff",
    "created_at": "2012-05-25T20:11:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13013",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.diff",
    "user": "https://github.com/kiwifb"
}
```



---

archive/issue_comments_196647.json:
```json
{
    "body": "<a id='comment:4'></a>\nI think one doctest may need fixing, I don't have the particular at hand because my work computer is switched off.",
    "created_at": "2012-05-25T20:11:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13013#issuecomment-196647",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:4'></a>
I think one doctest may need fixing, I don't have the particular at hand because my work computer is switched off.



---

archive/issue_comments_196648.json:
```json
{
    "body": "<a id='comment:5'></a>\nI am getting\n\n```\nsage -t -long devel/sage-main/sage/misc/prandom.py\n**********************************************************************\nFile \"/tmp/sage-5.0/devel/sage-main/sage/misc/prandom.py\", line 211:\n    sage: [expovariate(0.001) for i in range(3)]\nExpected:\n    [2194.27528710212, 664.856145830767, 3108.01255906546]\nGot:\n    [118.152309288166, 722.261959038118, 45.7190543690470]\n**********************************************************************\nFile \"/tmp/sage-5.0/devel/sage-main/sage/misc/prandom.py\", line 213:\n    sage: [expovariate(1.0) for i in range(3)]\nExpected:\n    [1.10114367058632, 0.652772818610748, 1.69983589896220]\nGot:\n    [0.404201816061304, 0.735220464997051, 0.201765578600627]\n**********************************************************************\nFile \"/tmp/sage-5.0/devel/sage-main/sage/misc/prandom.py\", line 215:\n    sage: [expovariate(1000) for i in range(3)]\nExpected:\n    [0.0003554358393809391, 0.0025254102812587195, 0.0001175899408167489]\nGot:\n    [0.0012068700332283973, 8.340929747302108e-05, 0.00219877067980605]\n**********************************************************************\n1 items had failures:\n   3 of   6 in __main__.example_11\n***Test Failed*** 3 failures.\n```",
    "created_at": "2012-05-25T23:16:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13013#issuecomment-196648",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:5'></a>
I am getting

```
sage -t -long devel/sage-main/sage/misc/prandom.py
**********************************************************************
File "/tmp/sage-5.0/devel/sage-main/sage/misc/prandom.py", line 211:
    sage: [expovariate(0.001) for i in range(3)]
Expected:
    [2194.27528710212, 664.856145830767, 3108.01255906546]
Got:
    [118.152309288166, 722.261959038118, 45.7190543690470]
**********************************************************************
File "/tmp/sage-5.0/devel/sage-main/sage/misc/prandom.py", line 213:
    sage: [expovariate(1.0) for i in range(3)]
Expected:
    [1.10114367058632, 0.652772818610748, 1.69983589896220]
Got:
    [0.404201816061304, 0.735220464997051, 0.201765578600627]
**********************************************************************
File "/tmp/sage-5.0/devel/sage-main/sage/misc/prandom.py", line 215:
    sage: [expovariate(1000) for i in range(3)]
Expected:
    [0.0003554358393809391, 0.0025254102812587195, 0.0001175899408167489]
Got:
    [0.0012068700332283973, 8.340929747302108e-05, 0.00219877067980605]
**********************************************************************
1 items had failures:
   3 of   6 in __main__.example_11
***Test Failed*** 3 failures.
```



---

archive/issue_comments_196649.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"sd40.5\".",
    "created_at": "2012-05-26T02:04:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13013#issuecomment-196649",
    "user": "https://github.com/vbraun"
}
```

**Changing keywords** from "" to "sd40.5".



---

archive/issue_comments_196650.json:
```json
{
    "body": "<a id='comment:7'></a>\nThat's the one I got in sage-on-gentoo when we did move to 2.7.3. I think that's the exact same value but that's a memory from 3 weeks ago. We also need to check if it is platform dependent.",
    "created_at": "2012-05-26T02:07:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13013#issuecomment-196650",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:7'></a>
That's the one I got in sage-on-gentoo when we did move to 2.7.3. I think that's the exact same value but that's a memory from 3 weeks ago. We also need to check if it is platform dependent.



---

archive/issue_comments_196651.json:
```json
{
    "body": "<a id='comment:8'></a>\nThis is the upstream change http://hg.python.org/releasing/2.7.3/rev/4970fa3c4a0b\n\nOn the plus side, its as platform-independent as it was before.",
    "created_at": "2012-05-26T05:23:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13013#issuecomment-196651",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:8'></a>
This is the upstream change http://hg.python.org/releasing/2.7.3/rev/4970fa3c4a0b

On the plus side, its as platform-independent as it was before.



---

archive/attachments_017577.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_13013_setup_deps.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket13013/trac_13013_setup_deps.patch",
    "created_at": "2012-05-26T06:16:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13013",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/vbraun"
}
```



---

archive/issue_comments_196652.json:
```json
{
    "body": "Updated patch",
    "created_at": "2012-05-26T06:16:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13013#issuecomment-196652",
    "user": "https://github.com/vbraun"
}
```

Updated patch



---

archive/issue_comments_196653.json:
```json
{
    "body": "<a id='comment:9'></a>\nAll doctests pass now...",
    "created_at": "2012-05-26T06:16:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13013#issuecomment-196653",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:9'></a>
All doctests pass now...



---

archive/issue_comments_196654.json:
```json
{
    "body": "**Reviewer:** Jeroen Demeyer",
    "created_at": "2012-05-26T16:57:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13013#issuecomment-196654",
    "user": "https://github.com/jdemeyer"
}
```

**Reviewer:** Jeroen Demeyer



---

archive/issue_comments_196655.json:
```json
{
    "body": "<a id='comment:10'></a>\nI'll have a look.",
    "created_at": "2012-05-26T16:57:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13013#issuecomment-196655",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'></a>
I'll have a look.



---

archive/issue_comments_196656.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2012-05-26T18:26:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13013#issuecomment-196656",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_196657.json:
```json
{
    "body": "<a id='comment:11'></a>\nLooks good to me.  The package works and the changes to `setup.py` make sense.",
    "created_at": "2012-05-26T18:26:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13013#issuecomment-196657",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:11'></a>
Looks good to me.  The package works and the changes to `setup.py` make sense.



---

archive/issue_events_041580.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-05-28T23:06:18Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13013",
    "milestone": "sage-5.0.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13013#event-41580"
}
```



---

archive/issue_comments_196658.json:
```json
{
    "body": "<a id='comment:13'></a>\nMany files in `src/` are not world-readable.  This should be fixed to be safe.",
    "created_at": "2012-05-29T00:25:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13013#issuecomment-196658",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'></a>
Many files in `src/` are not world-readable.  This should be fixed to be safe.



---

archive/issue_comments_196659.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2012-05-29T00:25:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13013#issuecomment-196659",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_comments_196660.json:
```json
{
    "body": "**Changing status** from needs_work to positive_review.",
    "created_at": "2012-05-29T03:57:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13013#issuecomment-196660",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from needs_work to positive_review.



---

archive/issue_comments_196661.json:
```json
{
    "body": "<a id='comment:14'></a>\nPermissions fixed.",
    "created_at": "2012-05-29T03:57:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13013#issuecomment-196661",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:14'></a>
Permissions fixed.



---

archive/issue_comments_196662.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n Python 2.7.2 distutils have a bug on ext4 or other filesystems with sub-second resolution. The result is that some source files are copied unnecessarily. This is somewhat annoying in `sage -b`.\n \n-New spkg at http://www.stp.dias.ie/~vbraun/Sage/spkg/python-2.7.3.p0.spkg\n+New **spkg** at [http://boxen.math.washington.edu/home/jdemeyer/spkg/python-2.7.3.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/python-2.7.3.p0.spkg)\n \n-Apply [attachment:trac_13013_setup_deps.patch]\n+**Apply** [attachment:trac_13013_setup_deps.patch]\n``````\n",
    "created_at": "2012-05-29T03:57:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13013#issuecomment-196662",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,5 +1,5 @@
 Python 2.7.2 distutils have a bug on ext4 or other filesystems with sub-second resolution. The result is that some source files are copied unnecessarily. This is somewhat annoying in `sage -b`.
 
-New spkg at http://www.stp.dias.ie/~vbraun/Sage/spkg/python-2.7.3.p0.spkg
+New **spkg** at [http://boxen.math.washington.edu/home/jdemeyer/spkg/python-2.7.3.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/python-2.7.3.p0.spkg)
 
-Apply [attachment:trac_13013_setup_deps.patch]
+**Apply** [attachment:trac_13013_setup_deps.patch]
``````




---

archive/issue_comments_196663.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2012-05-31T13:41:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13013#issuecomment-196663",
    "user": "https://github.com/jdemeyer"
}
```

**Resolution:** fixed



---

archive/issue_events_041581.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-05-31T13:41:49Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13013",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13013#event-41581"
}
```



---

archive/issue_comments_196664.json:
```json
{
    "body": "**Merged:** sage-5.0.1.rc1",
    "created_at": "2012-05-31T13:41:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13013#issuecomment-196664",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.0.1.rc1
