# Issue 13736: add content method to symbolic expressions

archive/issues_013532.json:
```json
{
    "body": "[attachment:trac_13736-content-take2.patch] provides a thin wrapper around the `content()` method in pynac.\n\nApply \n* [attachment:trac_13736-content-take2.patch]\n* [attachment:trac_13736-unit_primpart.patch]\n\n**Assignee:** @burcin\n\n**Keywords:** sd48\n\n**Reviewer:** Volker Braun, Burcin Erocal\n\n**Author:** Burcin Erocal, Volker Braun\n\n**Merged:** sage-5.11.beta2\n\nIssue created by migration from https://trac.sagemath.org/ticket/13736\n\n",
    "closed_at": "2013-06-19T12:25:01Z",
    "created_at": "2012-11-21T14:23:53Z",
    "labels": [
        "component: symbolics",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.11",
    "title": "add content method to symbolic expressions",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13736",
    "user": "https://github.com/burcin"
}
```
[attachment:trac_13736-content-take2.patch] provides a thin wrapper around the `content()` method in pynac.

Apply 
* [attachment:trac_13736-content-take2.patch]
* [attachment:trac_13736-unit_primpart.patch]

**Assignee:** @burcin

**Keywords:** sd48

**Reviewer:** Volker Braun, Burcin Erocal

**Author:** Burcin Erocal, Volker Braun

**Merged:** sage-5.11.beta2

Issue created by migration from https://trac.sagemath.org/ticket/13736





---

archive/issue_comments_200076.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2012-11-21T14:25:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13736",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13736#issuecomment-200076",
    "user": "https://github.com/burcin"
}
```

**Changing status** from new to needs_review.



---

archive/attachments_018589.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_13736-content.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket13736/trac_13736-content.patch",
    "created_at": "2012-11-21T14:37:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13736",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/burcin"
}
```



---

archive/issue_comments_200077.json:
```json
{
    "body": "",
    "created_at": "2012-11-21T14:37:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13736",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13736#issuecomment-200077",
    "user": "https://github.com/burcin"
}
```





---

archive/issue_comments_200078.json:
```json
{
    "body": "<a id='comment:2'></a>\nIs \"content\" a well-known thing (especially for non-polynomials)?  I did find the definition in the Ginac documentation, but this should probably be slightly clarified since it will show up in the tab-completion.    Especially since this doesn't provide the corresponding `unit` and `primpart` methods (which might even be confused with other things in algebra) I'm reluctant for this to go in by itself.  Also,\n\n```\nsage: (2*x+4*sin(y)).content(2*x)\n2*x + 4*sin(y)\n```\nand things like that seem to not really be in the spirit of this.  If anything, shouldn't this content be `1`?  Or should this be disallowed?  I don't think it can be considered user error with such minimal doc of an unfamiliar term.\n\nThat said, I realize this is needed for #13609 and hence #13729, so I will try to be responsive to any responses!",
    "created_at": "2012-11-21T16:24:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13736",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13736#issuecomment-200078",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:2'></a>
Is "content" a well-known thing (especially for non-polynomials)?  I did find the definition in the Ginac documentation, but this should probably be slightly clarified since it will show up in the tab-completion.    Especially since this doesn't provide the corresponding `unit` and `primpart` methods (which might even be confused with other things in algebra) I'm reluctant for this to go in by itself.  Also,

```
sage: (2*x+4*sin(y)).content(2*x)
2*x + 4*sin(y)
```
and things like that seem to not really be in the spirit of this.  If anything, shouldn't this content be `1`?  Or should this be disallowed?  I don't think it can be considered user error with such minimal doc of an unfamiliar term.

That said, I realize this is needed for #13609 and hence #13729, so I will try to be responsive to any responses!



---

archive/issue_comments_200079.json:
```json
{
    "body": "<a id='comment:3'></a>\nThanks for looking into this.\n\nI can rename the function to `_content()` and add a warning that the behavior is not well defined. I doubt if we will ever have proper input error checking or consistency with Sage's description of content for various domains. I definitely don't have time to implement this.",
    "created_at": "2012-11-21T16:45:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13736",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13736#issuecomment-200079",
    "user": "https://github.com/burcin"
}
```

<a id='comment:3'></a>
Thanks for looking into this.

I can rename the function to `_content()` and add a warning that the behavior is not well defined. I doubt if we will ever have proper input error checking or consistency with Sage's description of content for various domains. I definitely don't have time to implement this.



---

archive/issue_comments_200080.json:
```json
{
    "body": "<a id='comment:4'></a>\nOkay, this seems like a reasonable compromise - it can be used for the purposes we need it for and not have it be something that unsuspecting new Algebra students will rely on.  I assume the `_content` version will still suffice for the needs in #13609?",
    "created_at": "2012-11-23T16:19:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13736",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13736#issuecomment-200080",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:4'></a>
Okay, this seems like a reasonable compromise - it can be used for the purposes we need it for and not have it be something that unsuspecting new Algebra students will rely on.  I assume the `_content` version will still suffice for the needs in #13609?



---

archive/issue_comments_200081.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [kcrisman](#comment%3A4):\n> Okay, this seems like a reasonable compromise - it can be used for the purposes we need it for and not have it be something that unsuspecting new Algebra students will rely on.  I assume the `_content` version will still suffice for the needs in #13609?\n\n\nYes, it will do. I will upload a new patch once I settle on the correct solution of #13609. I don't expect to have time for this till next weekend though.",
    "created_at": "2012-11-24T11:12:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13736",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13736#issuecomment-200081",
    "user": "https://github.com/burcin"
}
```

<a id='comment:5'></a>
Replying to [kcrisman](#comment%3A4):
> Okay, this seems like a reasonable compromise - it can be used for the purposes we need it for and not have it be something that unsuspecting new Algebra students will rely on.  I assume the `_content` version will still suffice for the needs in #13609?


Yes, it will do. I will upload a new patch once I settle on the correct solution of #13609. I don't expect to have time for this till next weekend though.



---

archive/issue_comments_200082.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2012-11-24T11:12:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13736",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13736#issuecomment-200082",
    "user": "https://github.com/burcin"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_200083.json:
```json
{
    "body": "<a id='comment:6'></a>\nThis ticket seems to be a the bottom of the dependency chain for a few pynac-related patches... I'd be happy to review it when ready ;-)",
    "created_at": "2013-05-07T17:16:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13736",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13736#issuecomment-200083",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:6'></a>
This ticket seems to be a the bottom of the dependency chain for a few pynac-related patches... I'd be happy to review it when ready ;-)



---

archive/attachments_018590.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_13736-content-take2.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket13736/trac_13736-content-take2.patch",
    "created_at": "2013-05-07T17:33:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13736",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/burcin"
}
```



---

archive/issue_comments_200084.json:
```json
{
    "body": "<a id='comment:7'></a>\n",
    "created_at": "2013-05-07T17:33:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13736",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13736#issuecomment-200084",
    "user": "https://github.com/burcin"
}
```

<a id='comment:7'></a>




---

archive/issue_comments_200085.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-Attached patch provides a thin wrapper around the `content()` method in pynac.\n+[attachment:trac_13736-content-take2.patch] provides a thin wrapper around the `content()` method in pynac.\n``````\n",
    "created_at": "2013-05-07T17:33:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13736",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13736#issuecomment-200085",
    "user": "https://github.com/burcin"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1 @@
-Attached patch provides a thin wrapper around the `content()` method in pynac.
+[attachment:trac_13736-content-take2.patch] provides a thin wrapper around the `content()` method in pynac.
``````




---

archive/issue_comments_200086.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2013-05-07T17:33:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13736",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13736#issuecomment-200086",
    "user": "https://github.com/burcin"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_200087.json:
```json
{
    "body": "<a id='comment:8'></a>\nIt would be less confusing if we also wrap GiNaC unit and primpart and copy in some of the documentation\n\n```\nThe methods\n\n     ex ex::unit(const ex & x);\n     ex ex::content(const ex & x);\n     ex ex::primpart(const ex & x);\n     ex ex::primpart(const ex & x, const ex & c);\n\nreturn the unit part, content part, and primitive polynomial of a\nmultivariate polynomial with respect to the variable \u2018x\u2019 (the\nunit part being the sign of the leading coefficient, the content\npart being the GCD of the coefficients, and the primitive\npolynomial being the input polynomial divided by the unit and\ncontent parts). The second variant of primpart() expects the\npreviously calculated content part of the polynomial in c, which\nenables it to work faster in the case where the content part has\nalready been computed. The product of unit, content, and\nprimitive part is the original polynomial.\n```\nThis is `FactorTermsList[poly, x]` in Mathematica, so perhaps we can have a non-underscore method that returns all three?",
    "created_at": "2013-05-09T09:49:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13736",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13736#issuecomment-200087",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:8'></a>
It would be less confusing if we also wrap GiNaC unit and primpart and copy in some of the documentation

```
The methods

     ex ex::unit(const ex & x);
     ex ex::content(const ex & x);
     ex ex::primpart(const ex & x);
     ex ex::primpart(const ex & x, const ex & c);

return the unit part, content part, and primitive polynomial of a
multivariate polynomial with respect to the variable ‘x’ (the
unit part being the sign of the leading coefficient, the content
part being the GCD of the coefficients, and the primitive
polynomial being the input polynomial divided by the unit and
content parts). The second variant of primpart() expects the
previously calculated content part of the polynomial in c, which
enables it to work faster in the case where the content part has
already been computed. The product of unit, content, and
primitive part is the original polynomial.
```
This is `FactorTermsList[poly, x]` in Mathematica, so perhaps we can have a non-underscore method that returns all three?



---

archive/issue_comments_200088.json:
```json
{
    "body": "<a id='comment:9'></a>\nI've taken the liberty to write the patch ;-) Feel free to set to positive review if you agree with it.",
    "created_at": "2013-05-09T10:21:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13736",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13736#issuecomment-200088",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:9'></a>
I've taken the liberty to write the patch ;-) Feel free to set to positive review if you agree with it.



---

archive/issue_comments_200089.json:
```json
{
    "body": "**Reviewer:** Volker Braun",
    "created_at": "2013-05-09T10:21:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13736",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13736#issuecomment-200089",
    "user": "https://github.com/vbraun"
}
```

**Reviewer:** Volker Braun



---

archive/issue_comments_200090.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,5 @@\n [attachment:trac_13736-content-take2.patch] provides a thin wrapper around the `content()` method in pynac.\n+\n+Apply \n+* [attachment:trac_13736-content-take2.patch]\n+* [attachment:trac_13736-unit_primpart.patch]\n``````\n",
    "created_at": "2013-05-09T10:21:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13736",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13736#issuecomment-200090",
    "user": "https://github.com/vbraun"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,5 @@
 [attachment:trac_13736-content-take2.patch] provides a thin wrapper around the `content()` method in pynac.
+
+Apply 
+* [attachment:trac_13736-content-take2.patch]
+* [attachment:trac_13736-unit_primpart.patch]
``````




---

archive/issue_comments_200091.json:
```json
{
    "body": "<a id='comment:10'></a>\ninstructions for the bot:\n\napply trac_13736-content-take2.patch trac_13736-unit_primpart.patch",
    "created_at": "2013-05-24T11:41:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13736",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13736#issuecomment-200091",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:10'></a>
instructions for the bot:

apply trac_13736-content-take2.patch trac_13736-unit_primpart.patch



---

archive/attachments_018591.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_13736-unit_primpart.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket13736/trac_13736-unit_primpart.patch",
    "created_at": "2013-06-17T22:50:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13736",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/vbraun"
}
```



---

archive/issue_comments_200092.json:
```json
{
    "body": "Updated patch",
    "created_at": "2013-06-17T22:50:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13736",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13736#issuecomment-200092",
    "user": "https://github.com/vbraun"
}
```

Updated patch



---

archive/issue_comments_200093.json:
```json
{
    "body": "**Changing author** from \"Burcin Erocal\" to \"Burcin Erocal, Volker Braun\".",
    "created_at": "2013-06-17T22:55:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13736",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13736#issuecomment-200093",
    "user": "https://github.com/burcin"
}
```

**Changing author** from "Burcin Erocal" to "Burcin Erocal, Volker Braun".



---

archive/issue_comments_200094.json:
```json
{
    "body": "<a id='comment:11'></a>\nLooks good to me. We can switch this to positive review when the patchbot gets around to testing it.",
    "created_at": "2013-06-17T22:55:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13736",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13736#issuecomment-200094",
    "user": "https://github.com/burcin"
}
```

<a id='comment:11'></a>
Looks good to me. We can switch this to positive review when the patchbot gets around to testing it.



---

archive/issue_comments_200095.json:
```json
{
    "body": "**Changing reviewer** from \"Volker Braun\" to \"Volker Braun, Burcin Erocal\".",
    "created_at": "2013-06-17T22:55:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13736",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13736#issuecomment-200095",
    "user": "https://github.com/burcin"
}
```

**Changing reviewer** from "Volker Braun" to "Volker Braun, Burcin Erocal".



---

archive/issue_comments_200096.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"sd48\".",
    "created_at": "2013-06-17T22:55:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13736",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13736#issuecomment-200096",
    "user": "https://github.com/burcin"
}
```

**Changing keywords** from "" to "sd48".



---

archive/issue_comments_200097.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2013-06-17T23:22:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13736",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13736#issuecomment-200097",
    "user": "https://github.com/burcin"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_200098.json:
```json
{
    "body": "<a id='comment:13'></a>\nSo ... it's okay that `content` isn't a hidden method?",
    "created_at": "2013-06-18T19:53:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13736",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13736#issuecomment-200098",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:13'></a>
So ... it's okay that `content` isn't a hidden method?



---

archive/issue_comments_200099.json:
```json
{
    "body": "<a id='comment:14'></a>\nReplying to [kcrisman](#comment%3A13):\n> So ... it's okay that `content` isn't a hidden method?\n\n\nHaving `primpart()` and `unit()` available clarifies what these functions do. The answers they return are what one would expect as long as no exotic coefficients are involved. I don't know what would happen if you have a polynomial where the coefficients live in different domains. But this is the case for most symbolics functionality. I say we merge this and see if anyone complains. :)\n\nThat said, I don't understand why the patchbot complains about startup time. These patches should not effect that at all.",
    "created_at": "2013-06-18T20:18:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13736",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13736#issuecomment-200099",
    "user": "https://github.com/burcin"
}
```

<a id='comment:14'></a>
Replying to [kcrisman](#comment%3A13):
> So ... it's okay that `content` isn't a hidden method?


Having `primpart()` and `unit()` available clarifies what these functions do. The answers they return are what one would expect as long as no exotic coefficients are involved. I don't know what would happen if you have a polynomial where the coefficients live in different domains. But this is the case for most symbolics functionality. I say we merge this and see if anyone complains. :)

That said, I don't understand why the patchbot complains about startup time. These patches should not effect that at all.



---

archive/issue_comments_200100.json:
```json
{
    "body": "<a id='comment:15'></a>\nThere might be unaccounted-for systematics in the startup timing code like hdd location and cylinder alignment. We are also talking about a tiny increase, too. And the probability is not *that* high. We have seen somewhat unexpected effects before, its not clear where it comes from.",
    "created_at": "2013-06-18T20:50:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13736",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13736#issuecomment-200100",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:15'></a>
There might be unaccounted-for systematics in the startup timing code like hdd location and cylinder alignment. We are also talking about a tiny increase, too. And the probability is not *that* high. We have seen somewhat unexpected effects before, its not clear where it comes from.



---

archive/issue_events_044858.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-06-19T12:25:01Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13736",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13736#event-44858"
}
```



---

archive/issue_comments_200101.json:
```json
{
    "body": "**Merged:** sage-5.11.beta2",
    "created_at": "2013-06-19T12:25:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13736",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13736#issuecomment-200101",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.11.beta2
