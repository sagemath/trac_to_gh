# Issue 13832: Upgrade Cython to 0.17.3

archive/issues_013628.json:
```json
{
    "assignees": [],
    "body": "New Cython version\n\nhttp://www.stp.dias.ie/~vbraun/Sage/spkg/cython-0.17.3.spkg\n\nNote: requires the patch from #13740 but supersedes the spkg.\n\nCC:  @robertwb @jpflori @simon-king-jena\n\nReviewer: **Jean-Pierre Flori**\n\nAuthor: **Volker Braun**\n\nMerged: **sage-5.6.beta2**\n\nComponent: **packages: standard**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/13832_\n\n",
    "closed_at": "2012-12-29T19:31:41Z",
    "created_at": "2012-12-14T15:03:13Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Upgrade Cython to 0.17.3",
    "type": "issue",
    "updated_at": "2012-12-29T19:31:41Z",
    "url": "https://github.com/sagemath/sage/issues/13832",
    "user": "https://github.com/vbraun"
}
```
New Cython version

http://www.stp.dias.ie/~vbraun/Sage/spkg/cython-0.17.3.spkg

Note: requires the patch from #13740 but supersedes the spkg.

CC:  @robertwb @jpflori @simon-king-jena

Reviewer: **Jean-Pierre Flori**

Author: **Volker Braun**

Merged: **sage-5.6.beta2**

Component: **packages: standard**

_Issue created by migration from https://trac.sagemath.org/ticket/13832_





---

archive/issue_events_194095.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-12-14T15:03:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13832",
    "milestone_number": null,
    "milestone_title": "sage-5.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13832#event-194095"
}
```



---

archive/issue_events_194096.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-12-14T15:03:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13832",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13832#event-194096"
}
```



---

archive/issue_events_194097.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-12-14T15:03:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13832",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13832#event-194097"
}
```



---

archive/issue_events_194098.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-12-14T15:03:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13832",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13832#event-194098"
}
```



---

archive/issue_comments_163066.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n New Cython version\n \n http://www.stp.dias.ie/~vbraun/Sage/spkg/cython-0.17.3.spkg\n+\n+Note: requires the patch from #13740 but supersedes the spkg.\n``````\n",
    "created_at": "2012-12-14T15:05:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13832#issuecomment-163066",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
 New Cython version
 
 http://www.stp.dias.ie/~vbraun/Sage/spkg/cython-0.17.3.spkg
+
+Note: requires the patch from #13740 but supersedes the spkg.
``````




---

archive/issue_events_194099.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-12-14T15:05:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13832",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13832#event-194099"
}
```



---

archive/issue_events_194100.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2012-12-26T22:18:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13832",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13832#event-194100"
}
```



---

archive/issue_events_194101.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2012-12-26T22:18:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13832",
    "label": "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p: 1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13832#event-194101"
}
```



---

archive/issue_comments_163067.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI'm putting this as blocker as it definitely fix horribly broken code for C-Extension classes using weakrefs produced by previous Cython versions.",
    "created_at": "2012-12-26T22:18:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13832#issuecomment-163067",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:4" align="right">comment:4</div>

I'm putting this as blocker as it definitely fix horribly broken code for C-Extension classes using weakrefs produced by previous Cython versions.



---

archive/issue_comments_163068.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nCould you upload a diff please?\n(I'll have a look at the repo directly, but i think its better to have it posted here as well.)",
    "created_at": "2012-12-27T09:30:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13832#issuecomment-163068",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:5" align="right">comment:5</div>

Could you upload a diff please?
(I'll have a look at the repo directly, but i think its better to have it posted here as well.)



---

archive/issue_comments_163069.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI literally only bumped the version:\n\n```\n[vbraun@volker-desktop cython-0.17.3]$ hg diff -r 16:\ndiff -r 3855e277e649 -r c54d12648e62 SPKG.txt\n--- a/SPKG.txt\tWed Nov 21 22:21:11 2012 +0000\n+++ b/SPKG.txt\tFri Dec 14 14:59:10 2012 +0000\n@@ -31,6 +31,9 @@\n \n == Changelog ==\n \n+=== cython-0.17.3 (Volker Braun, 14 December 2012) ===\n+ * Upgrade Cython 0.17.3\n+\n === cython-0.17.2 (Volker Braun, 21 November 2012) ===\n  * Upgrade Cython 0.17.2\n```",
    "created_at": "2012-12-27T10:29:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13832#issuecomment-163069",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:6" align="right">comment:6</div>

I literally only bumped the version:

```
[vbraun@volker-desktop cython-0.17.3]$ hg diff -r 16:
diff -r 3855e277e649 -r c54d12648e62 SPKG.txt
--- a/SPKG.txt	Wed Nov 21 22:21:11 2012 +0000
+++ b/SPKG.txt	Fri Dec 14 14:59:10 2012 +0000
@@ -31,6 +31,9 @@
 
 == Changelog ==
 
+=== cython-0.17.3 (Volker Braun, 14 December 2012) ===
+ * Upgrade Cython 0.17.3
+
 === cython-0.17.2 (Volker Braun, 21 November 2012) ===
  * Upgrade Cython 0.17.2
```



---

archive/issue_comments_163070.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nIf I really have to rant, I'd ask for the trac ticket number to be included in SPKG.txt (between * and U).\n\nIt's just that such information can sometimes save so much time, not that I think it will really be the case here, but...\nI've just wasted so much time understanding and reinventing the wheel at #13864...",
    "created_at": "2012-12-27T15:10:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13832#issuecomment-163070",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:7" align="right">comment:7</div>

If I really have to rant, I'd ask for the trac ticket number to be included in SPKG.txt (between * and U).

It's just that such information can sometimes save so much time, not that I think it will really be the case here, but...
I've just wasted so much time understanding and reinventing the wheel at #13864...



---

archive/issue_comments_163071.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nAnd/or put the ticket number in the hg changelog.",
    "created_at": "2012-12-27T15:19:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13832#issuecomment-163071",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:8" align="right">comment:8</div>

And/or put the ticket number in the hg changelog.



---

archive/issue_comments_163072.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI'm against more red tape just for a trivial version bump. If you want to know the trac tickets where `pkg-x.y.z.spkg` was discussed then just use the search function.",
    "created_at": "2012-12-27T15:58:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13832#issuecomment-163072",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:9" align="right">comment:9</div>

I'm against more red tape just for a trivial version bump. If you want to know the trac tickets where `pkg-x.y.z.spkg` was discussed then just use the search function.



---

archive/issue_events_194102.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2012-12-27T15:59:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13832",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13832#event-194102"
}
```



---

archive/issue_events_194103.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2012-12-27T15:59:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13832",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13832#event-194103"
}
```



---

archive/issue_comments_163073.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nOk I won't fight over this, so positive_review.",
    "created_at": "2012-12-27T15:59:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13832#issuecomment-163073",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:10" align="right">comment:10</div>

Ok I won't fight over this, so positive_review.



---

archive/issue_comments_163074.json:
```json
{
    "body": "Reviewer: **Jean-Pierre Flori**",
    "created_at": "2012-12-27T15:59:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13832#issuecomment-163074",
    "user": "https://github.com/jpflori"
}
```

Reviewer: **Jean-Pierre Flori**



---

archive/issue_comments_163075.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@vbraun](#comment:9):\n> I'm against more red tape just for a trivial version bump. If you want to know the trac tickets where `pkg-x.y.z.spkg` was discussed then just use the search function.\n\nTrac ticket numbers belong into `SPKG.txt` (i.e., an spkg's changelog) as well as into the commit messages (at least the last one, in case there are a couple of for a single patch level), while for spkgs the first is IMHO more important (even if Trac's search functions were smart...).\n\nYou may save a few seconds omitting it, at the expense of N other developers later wasting much more time searching.",
    "created_at": "2012-12-27T23:29:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13832#issuecomment-163075",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@vbraun](#comment:9):
> I'm against more red tape just for a trivial version bump. If you want to know the trac tickets where `pkg-x.y.z.spkg` was discussed then just use the search function.

Trac ticket numbers belong into `SPKG.txt` (i.e., an spkg's changelog) as well as into the commit messages (at least the last one, in case there are a couple of for a single patch level), while for spkgs the first is IMHO more important (even if Trac's search functions were smart...).

You may save a few seconds omitting it, at the expense of N other developers later wasting much more time searching.



---

archive/issue_comments_163076.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nThere is no mentioning of putting trac numbers into commit messages in the Sage developer guide. Also, the `SPKG.txt` is for human consumption, so appropriate references should be added but that can be a trac ticket, a mailinglist post, or something else. In this case there is just nothing to point to.\n\nEven the trac search engine is good enough to give you this ticket if you search for \"cython-0.17.3.spkg\". \n\nMore importantly, we should strive to make Sage development more agile and avoid making it look like filling out a German tax declaration. **Now go to trac and obtain your unique identifying number. Copy this number into the SPKG.txt and the Mercurial commit. Be careful to double-check your work as typographical errors are the main cause of rejected submissions.**",
    "created_at": "2012-12-28T09:21:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13832#issuecomment-163076",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:12" align="right">comment:12</div>

There is no mentioning of putting trac numbers into commit messages in the Sage developer guide. Also, the `SPKG.txt` is for human consumption, so appropriate references should be added but that can be a trac ticket, a mailinglist post, or something else. In this case there is just nothing to point to.

Even the trac search engine is good enough to give you this ticket if you search for "cython-0.17.3.spkg". 

More importantly, we should strive to make Sage development more agile and avoid making it look like filling out a German tax declaration. **Now go to trac and obtain your unique identifying number. Copy this number into the SPKG.txt and the Mercurial commit. Be careful to double-check your work as typographical errors are the main cause of rejected submissions.**



---

archive/issue_comments_163077.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nNice analogy. This is exactly the kind of busywork that I hope to be able to avoid with the new workflow. (In particular the actual switch to new upstream sources will simply be a commit itself, no need to keep track of the change in three or for separate places manually to record the fact that, in an unrelated process, a particular binary blob (the spkg) started getting bundled with a particular Sage release.)\n\nI, personally, wouldn't even think to look at the SPKG.txt for this information, which would necessarily send me to the trac site anyways. \n\nOn a lighter note, thanks to both of you for the spkg and review (both of which I made a mental note to do but never found the time for).",
    "created_at": "2012-12-28T18:16:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13832#issuecomment-163077",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:13" align="right">comment:13</div>

Nice analogy. This is exactly the kind of busywork that I hope to be able to avoid with the new workflow. (In particular the actual switch to new upstream sources will simply be a commit itself, no need to keep track of the change in three or for separate places manually to record the fact that, in an unrelated process, a particular binary blob (the spkg) started getting bundled with a particular Sage release.)

I, personally, wouldn't even think to look at the SPKG.txt for this information, which would necessarily send me to the trac site anyways. 

On a lighter note, thanks to both of you for the spkg and review (both of which I made a mental note to do but never found the time for).



---

archive/issue_events_194104.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-12-29T19:31:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13832",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13832#event-194104"
}
```



---

archive/issue_events_194105.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-12-29T19:31:41Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/13832",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13832#event-194105"
}
```



---

archive/issue_comments_163078.json:
```json
{
    "body": "Merged: **sage-5.6.beta2**",
    "created_at": "2012-12-29T19:31:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13832#issuecomment-163078",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.6.beta2**
