# Issue 13687: Parents for groups

archive/issues_013483.json:
```json
{
    "assignees": [],
    "body": "Groups are based on the deprecated `ParentWithGens`. This ticket is about forward-porting them to the new coercion framework.\n\nTo limit the size of the patchbomb I'm only porting the Abelian groups. The rest depends on `old.Group`\n\nVarious oddities needed to be cleaned up in the process:\n* make parents unique and elements immutable (often requires tuples instead of lists)\n* rename `AbelianGroup_class.invariants()` -> `AbelianGroup_class.gens_orders()` since they are not necessarily the abelian invariants (=elementary divisors).\n* rename `element.list()` -> `element.exponents()` for the exponent vector.\n* implement a `AbelianGroupWithValues` where you attach values to the (abstract) generators. Used in the unit group of a number field, for example.\n* lots of places return lists when they should return tuples\n\nI haven't actually deprecated `.invariants()` and `.list()`, just changed the documentation to suggest the equivalent `.gens_orders()` and .exponents()` methods. But I think we should deprecate them. Though I first want to work my way through the remaining groups code.\n\nApply\n* [attachment: 13687_parent_for_groups_all_vb.patch.gz](https://github.com/sagemath/sage/files/ticket13687/13687_parent_for_groups_all_vb.patch.gz)\n* [attachment: 13687_32bitfix.patch.gz](https://github.com/sagemath/sage/files/ticket13687/13687_32bitfix.patch.gz)\n\nAssignee: **joyner**\n\nCC:  @miguelmarco @roed314 @wdjoyner @simon-king-jena\n\nKeywords: **new Parent**\n\nReviewer: **David Roe**\n\nAuthor: **Volker Braun**\n\nMerged: **sage-5.7.beta2**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/13687_\n\n",
    "closed_at": "2013-01-31T09:20:04Z",
    "created_at": "2012-11-05T16:12:01Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20group%20theory",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Parents for groups",
    "type": "issue",
    "updated_at": "2013-01-31T09:20:04Z",
    "url": "https://github.com/sagemath/sage/issues/13687",
    "user": "https://github.com/vbraun"
}
```
Groups are based on the deprecated `ParentWithGens`. This ticket is about forward-porting them to the new coercion framework.

To limit the size of the patchbomb I'm only porting the Abelian groups. The rest depends on `old.Group`

Various oddities needed to be cleaned up in the process:
* make parents unique and elements immutable (often requires tuples instead of lists)
* rename `AbelianGroup_class.invariants()` -> `AbelianGroup_class.gens_orders()` since they are not necessarily the abelian invariants (=elementary divisors).
* rename `element.list()` -> `element.exponents()` for the exponent vector.
* implement a `AbelianGroupWithValues` where you attach values to the (abstract) generators. Used in the unit group of a number field, for example.
* lots of places return lists when they should return tuples

I haven't actually deprecated `.invariants()` and `.list()`, just changed the documentation to suggest the equivalent `.gens_orders()` and .exponents()` methods. But I think we should deprecate them. Though I first want to work my way through the remaining groups code.

Apply
* [attachment: 13687_parent_for_groups_all_vb.patch.gz](https://github.com/sagemath/sage/files/ticket13687/13687_parent_for_groups_all_vb.patch.gz)
* [attachment: 13687_32bitfix.patch.gz](https://github.com/sagemath/sage/files/ticket13687/13687_32bitfix.patch.gz)

Assignee: **joyner**

CC:  @miguelmarco @roed314 @wdjoyner @simon-king-jena

Keywords: **new Parent**

Reviewer: **David Roe**

Author: **Volker Braun**

Merged: **sage-5.7.beta2**

_Issue created by migration from https://trac.sagemath.org/ticket/13687_





---

archive/issue_events_169555.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-11-05T16:12:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "milestone_number": null,
    "milestone_title": "sage-5.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13687#event-169555"
}
```



---

archive/issue_events_169556.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-11-05T16:12:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20group%20theory",
    "label_color": "0000ff",
    "label_name": "component: group theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13687#event-169556"
}
```



---

archive/issue_events_169557.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-11-05T16:12:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13687#event-169557"
}
```



---

archive/issue_events_169558.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-11-05T16:12:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13687#event-169558"
}
```



---

archive/issue_comments_163001.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,5 +7,5 @@\n * rename `AbelianGroup_class.invariants()` -> `AbelianGroup_class.gens_orders()` since they are not necessarily the abelian invariants (=elementary divisors).\n * rename `element.list()` -> `element.exponents()` for the exponent vector.\n * implement a `AbelianGroupWithValues` where you attach values to the (abstract) generators. Used in the unit group of a number field, for example.\n+* lots of places return lists when they should return tuples\n \n-\n``````\n",
    "created_at": "2012-11-05T20:24:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13687#issuecomment-163001",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,5 +7,5 @@
 * rename `AbelianGroup_class.invariants()` -> `AbelianGroup_class.gens_orders()` since they are not necessarily the abelian invariants (=elementary divisors).
 * rename `element.list()` -> `element.exponents()` for the exponent vector.
 * implement a `AbelianGroupWithValues` where you attach values to the (abstract) generators. Used in the unit group of a number field, for example.
+* lots of places return lists when they should return tuples
 
-
``````




---

archive/issue_events_169559.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-11-05T20:25:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13687#event-169559"
}
```



---

archive/issue_comments_163002.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,3 +9,4 @@\n * implement a `AbelianGroupWithValues` where you attach values to the (abstract) generators. Used in the unit group of a number field, for example.\n * lots of places return lists when they should return tuples\n \n+I haven't actually deprecated `.invariants()` and `.list()`, just changed the documentation to suggest the equivalent `.gens_orders()` and .exponents()` methods. But I think we should deprecate them. Though I first want to work my way through the remaining groups code.\n``````\n",
    "created_at": "2012-11-06T01:15:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13687#issuecomment-163002",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,3 +9,4 @@
 * implement a `AbelianGroupWithValues` where you attach values to the (abstract) generators. Used in the unit group of a number field, for example.
 * lots of places return lists when they should return tuples
 
+I haven't actually deprecated `.invariants()` and `.list()`, just changed the documentation to suggest the equivalent `.gens_orders()` and .exponents()` methods. But I think we should deprecate them. Though I first want to work my way through the remaining groups code.
``````




---

archive/issue_comments_163003.json:
```json
{
    "body": "Author: **Volker Braun**",
    "created_at": "2012-11-06T01:17:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13687#issuecomment-163003",
    "user": "https://github.com/vbraun"
}
```

Author: **Volker Braun**



---

archive/issue_comments_163004.json:
```json
{
    "body": "Changed keywords from **** to **new Parent**",
    "created_at": "2012-11-06T01:17:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13687#issuecomment-163004",
    "user": "https://github.com/vbraun"
}
```

Changed keywords from **** to **new Parent**



---

archive/issue_events_169560.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2012-11-06T10:04:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13687#event-169560"
}
```



---

archive/issue_events_169561.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2012-11-06T10:04:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13687#event-169561"
}
```



---

archive/issue_comments_163005.json:
```json
{
    "body": "Reviewer: **David Roe**",
    "created_at": "2012-11-06T10:04:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13687#issuecomment-163005",
    "user": "https://github.com/roed314"
}
```

Reviewer: **David Roe**



---

archive/issue_comments_163006.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nHi Volker,\nI'm about halfway through this.  Overall it's looking great.  Here are some comments (let me know if anything is unclear):\n\n* in the `_normalize` function for `AbelianGroup`, perhaps the 0s should come last, since that lines up with the standard divisibility condition for invariants.  Also, if `gens_orders` is a string of length `n` then it will get through your error checking.\n\n* `_normalize` should have examples.\n\n* In `random_element`, shouldn't the fact that doctesting consistently chooses a random seed mean we don't need to mark `G.random_element()` as `# random output`?\n\n* In the docstring for `equals`, the documentation for the output is wrong: should be checking whether they are the same subset.\n\n* In `invs()`, where you write `raise Exception # WTF`, maybe we should figure out what was intended by this function and fix it.  :-)\n\n* In the module summary of `dual_abelian_group`, you can use floating point tolerance rather than just marking the output as random.  In particular, shouldn't your first example be exact?\n\n* In module doctoring for `dual_abelian_group_element`, you should take out the `# random` marking on some doctests (using floating point tolerance instead if necessary)\n\nI should go to sleep, but I'll try to get through more of this tomorrow.  When you make changes, could you upload a separate patch?",
    "created_at": "2012-11-06T10:04:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13687#issuecomment-163006",
    "user": "https://github.com/roed314"
}
```

<a id='comment:5'>Comment 5:</a>
Hi Volker,
I'm about halfway through this.  Overall it's looking great.  Here are some comments (let me know if anything is unclear):

* in the `_normalize` function for `AbelianGroup`, perhaps the 0s should come last, since that lines up with the standard divisibility condition for invariants.  Also, if `gens_orders` is a string of length `n` then it will get through your error checking.

* `_normalize` should have examples.

* In `random_element`, shouldn't the fact that doctesting consistently chooses a random seed mean we don't need to mark `G.random_element()` as `# random output`?

* In the docstring for `equals`, the documentation for the output is wrong: should be checking whether they are the same subset.

* In `invs()`, where you write `raise Exception # WTF`, maybe we should figure out what was intended by this function and fix it.  :-)

* In the module summary of `dual_abelian_group`, you can use floating point tolerance rather than just marking the output as random.  In particular, shouldn't your first example be exact?

* In module doctoring for `dual_abelian_group_element`, you should take out the `# random` marking on some doctests (using floating point tolerance instead if necessary)

I should go to sleep, but I'll try to get through more of this tomorrow.  When you make changes, could you upload a separate patch?



---

archive/issue_comments_163007.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\n1. The 0's were prepended, I just kept that behavior. I think its more in line with the mathematical expectation of writing a group as free+torsion instead of the other way round. Also, the `gens_orders` are not the abelian invariants. \n\n5. I still haven't figured out what `invs()` is for, I'll just delete it ;-)\n\nI agree with the rest. Most of it is just stuff that was already there and I didn't fix...",
    "created_at": "2012-11-06T16:16:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13687#issuecomment-163007",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:6'>Comment 6:</a>
1. The 0's were prepended, I just kept that behavior. I think its more in line with the mathematical expectation of writing a group as free+torsion instead of the other way round. Also, the `gens_orders` are not the abelian invariants. 

5. I still haven't figured out what `invs()` is for, I'll just delete it ;-)

I agree with the rest. Most of it is just stuff that was already there and I didn't fix...



---

archive/issue_comments_163008.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\n1.  Fair enough.\n\n5.  Sounds good.\n\nI know, I saw the old code.  But if you're making changes this extensive you might as well fix some more stuff.  :-)",
    "created_at": "2012-11-06T17:25:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13687#issuecomment-163008",
    "user": "https://github.com/roed314"
}
```

<a id='comment:7'>Comment 7:</a>
1.  Fair enough.

5.  Sounds good.

I know, I saw the old code.  But if you're making changes this extensive you might as well fix some more stuff.  :-)



---

archive/issue_events_169562.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-11-06T17:31:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13687#event-169562"
}
```



---

archive/issue_events_169563.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-11-06T17:31:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13687#event-169563"
}
```



---

archive/issue_comments_163009.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,3 +10,7 @@\n * lots of places return lists when they should return tuples\n \n I haven't actually deprecated `.invariants()` and `.list()`, just changed the documentation to suggest the equivalent `.gens_orders()` and .exponents()` methods. But I think we should deprecate them. Though I first want to work my way through the remaining groups code.\n+\n+Apply\n+* [attachment: trac_13687_Parent_for_groups.patch.gz](https://github.com/sagemath/sage/files/ticket13687/trac_13687_Parent_for_groups.patch.gz)\n+* [attachment: trac_13687_review.patch.gz](https://github.com/sagemath/sage/files/ticket13687/trac_13687_review.patch.gz)\n``````\n",
    "created_at": "2012-11-06T17:31:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13687#issuecomment-163009",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,3 +10,7 @@
 * lots of places return lists when they should return tuples
 
 I haven't actually deprecated `.invariants()` and `.list()`, just changed the documentation to suggest the equivalent `.gens_orders()` and .exponents()` methods. But I think we should deprecate them. Though I first want to work my way through the remaining groups code.
+
+Apply
+* [attachment: trac_13687_Parent_for_groups.patch.gz](https://github.com/sagemath/sage/files/ticket13687/trac_13687_Parent_for_groups.patch.gz)
+* [attachment: trac_13687_review.patch.gz](https://github.com/sagemath/sage/files/ticket13687/trac_13687_review.patch.gz)
``````




---

archive/issue_comments_163010.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nHere are some more suggestions.  I'm going to leave it marked as needs review so that the patchbot will continue testing.\n\n1. In `AbelianGroupElement.__init__`, I think it's useful to allow `ints` in the `generator_orders`, rather than asserting that they all be `Integers`\n\n2. Documentation of `exponents` doesn't line up with `__init__` method in `AbelianGroupElementBase`.  You should give an example in the documentation of that function showing that the exponents are still integers, not elements of the base ring.\n\n3. In docstring for `AbelianGroupWithValues`, maybe you should note that `values_group` could be a ring or field, since Sage doesn't currently support the group of units in a ring very well.\n\n4. I don't think that `AbelianGroupWithValuesEmbedding` should inherit from `CallMorphism`, but rather just from `Morphism`.\n\n5. For the arithmetic operations in `AbelianGroupWithValuesElement`, I would keep the computation of `_value` lazy (check to see if both left and right values are not None).  By being nonlazy you'll get more floating point drift and also you may compute unnecessary values.  \n\n6. Your docstring for `AbelianGroupWithValues_class.values_group` is incomplete.\n\n7. Indentation problem at the end of the docstring for `Group` (right before `def __init__`)\n\n8. You set  `Element = FractionalIdealClass` on `SFractionalIdealClass(FractionalIdealClass)`.  This should be done on the parent, not the element.\n\n9. There doesn't seem to be a failure in the test suite for `ClassGroup`, so you should remove the sentence about a failure caused by not having a category of additive abelian groups.\n\n10. In `unit_group.py` you use `_.value()` a few times; can you give `UK.torsion_generator()` (etc)  a name and use it instead of `_`?\n\n21. You have a docstring floating that needs to be deleted where `gen(self, i=0)` used to be in `UnitGroup`",
    "created_at": "2012-11-06T21:18:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13687#issuecomment-163010",
    "user": "https://github.com/roed314"
}
```

<a id='comment:9'>Comment 9:</a>
Here are some more suggestions.  I'm going to leave it marked as needs review so that the patchbot will continue testing.

1. In `AbelianGroupElement.__init__`, I think it's useful to allow `ints` in the `generator_orders`, rather than asserting that they all be `Integers`

2. Documentation of `exponents` doesn't line up with `__init__` method in `AbelianGroupElementBase`.  You should give an example in the documentation of that function showing that the exponents are still integers, not elements of the base ring.

3. In docstring for `AbelianGroupWithValues`, maybe you should note that `values_group` could be a ring or field, since Sage doesn't currently support the group of units in a ring very well.

4. I don't think that `AbelianGroupWithValuesEmbedding` should inherit from `CallMorphism`, but rather just from `Morphism`.

5. For the arithmetic operations in `AbelianGroupWithValuesElement`, I would keep the computation of `_value` lazy (check to see if both left and right values are not None).  By being nonlazy you'll get more floating point drift and also you may compute unnecessary values.  

6. Your docstring for `AbelianGroupWithValues_class.values_group` is incomplete.

7. Indentation problem at the end of the docstring for `Group` (right before `def __init__`)

8. You set  `Element = FractionalIdealClass` on `SFractionalIdealClass(FractionalIdealClass)`.  This should be done on the parent, not the element.

9. There doesn't seem to be a failure in the test suite for `ClassGroup`, so you should remove the sentence about a failure caused by not having a category of additive abelian groups.

10. In `unit_group.py` you use `_.value()` a few times; can you give `UK.torsion_generator()` (etc)  a name and use it instead of `_`?

21. You have a docstring floating that needs to be deleted where `gen(self, i=0)` used to be in `UnitGroup`



---

archive/issue_comments_163011.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\n1. `AbelianGroup_class` derives from `UniqueRepresentation`, so I want to enforce canonical arguments with the assertions. Its the job of the `AbelianGroup` factory function to canonicalize the user input.\n\n5. For the unit group, say, its much more expensive to do the exponentiation than non-lazy multiplication. Imagine you want to list all units. This is also what the `FractionalIdealClass` and friends do. If its cheap to exponentiate the values then I would agree with you, but in that case you probably don't need such an elaborate `AbelianGroupWithValues`.",
    "created_at": "2012-11-07T02:05:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13687#issuecomment-163011",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:10'>Comment 10:</a>
1. `AbelianGroup_class` derives from `UniqueRepresentation`, so I want to enforce canonical arguments with the assertions. Its the job of the `AbelianGroup` factory function to canonicalize the user input.

5. For the unit group, say, its much more expensive to do the exponentiation than non-lazy multiplication. Imagine you want to list all units. This is also what the `FractionalIdealClass` and friends do. If its cheap to exponentiate the values then I would agree with you, but in that case you probably don't need such an elaborate `AbelianGroupWithValues`.



---

archive/issue_comments_163012.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nThe updated patch addresses all remaining issues. I've also based `ClassGroup` on `AbelianGroupWithValues` and some other improvements.",
    "created_at": "2012-11-08T04:16:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13687#issuecomment-163012",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:11'>Comment 11:</a>
The updated patch addresses all remaining issues. I've also based `ClassGroup` on `AbelianGroupWithValues` and some other improvements.



---

archive/issue_comments_163013.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nLooks good.  Two more comments and then I'm happy to give a positive review:\n\n* In docstring for `SFractionalIdealClass`, your example blocks are indented.  There should also only be one block rather than three.\n\n* There's a failure in the startup plugin.  I have no problem giving a positive review even so, but I thought I'd point it out in case you wanted to change anything related to imports.  :-)",
    "created_at": "2012-11-08T08:28:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13687#issuecomment-163013",
    "user": "https://github.com/roed314"
}
```

<a id='comment:12'>Comment 12:</a>
Looks good.  Two more comments and then I'm happy to give a positive review:

* In docstring for `SFractionalIdealClass`, your example blocks are indented.  There should also only be one block rather than three.

* There's a failure in the startup plugin.  I have no problem giving a positive review even so, but I thought I'd point it out in case you wanted to change anything related to imports.  :-)



---

archive/issue_comments_163014.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nGood eyes with the indent ;-)\n\nI noticed that startup modules changed. Fun fact: the `operator` Python module (for `operator.mul`, say) was imported as a by-product of Abelian groups. And the coercion framework assumes that it is imported in its doctests. I've moved the actual import to `sage.all`, as you saw. In any case, I'm planning to make everything lazy if possible, but first I should go through the rest of the groups and port them to the new parents.",
    "created_at": "2012-11-08T16:17:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13687#issuecomment-163014",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:13'>Comment 13:</a>
Good eyes with the indent ;-)

I noticed that startup modules changed. Fun fact: the `operator` Python module (for `operator.mul`, say) was imported as a by-product of Abelian groups. And the coercion framework assumes that it is imported in its doctests. I've moved the actual import to `sage.all`, as you saw. In any case, I'm planning to make everything lazy if possible, but first I should go through the rest of the groups and port them to the new parents.



---

archive/issue_events_169564.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-11-08T16:17:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13687#event-169564"
}
```



---

archive/issue_events_169565.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-11-08T16:17:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13687#event-169565"
}
```



---

archive/issue_comments_163015.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nSounds good.  Let me know when you need a review for the transition on the other groups.  Thanks for all the changes here: fixing Groups has been a daunting task.",
    "created_at": "2012-11-08T18:05:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13687#issuecomment-163015",
    "user": "https://github.com/roed314"
}
```

<a id='comment:14'>Comment 14:</a>
Sounds good.  Let me know when you need a review for the transition on the other groups.  Thanks for all the changes here: fixing Groups has been a daunting task.



---

archive/issue_comments_163016.json:
```json
{
    "body": "Rebased patch",
    "created_at": "2012-11-13T19:51:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13687#issuecomment-163016",
    "user": "https://github.com/vbraun"
}
```

Rebased patch



---

archive/issue_comments_163017.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nAttachment: **[trac_13687_Parent_for_groups.patch.gz](https://github.com/sagemath/sage/files/ticket13687/trac_13687_Parent_for_groups.patch.gz)**\n\nPatch rebased for sage-5.5.beta0",
    "created_at": "2012-11-13T19:52:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13687#issuecomment-163017",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:15'>Comment 15:</a>
Attachment: **[trac_13687_Parent_for_groups.patch.gz](https://github.com/sagemath/sage/files/ticket13687/trac_13687_Parent_for_groups.patch.gz)**

Patch rebased for sage-5.5.beta0



---

archive/issue_comments_163018.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nLong doctests fail:\n\n```\nsage -t -long \"devel/sage/sage/rings/number_field/number_field_ideal.py\"\n  ***   Warning: precision too low for generators, not given.\n**********************************************************************\nFile \"/release/merger/sage-5.5.beta1/devel/sage/sage/rings/number_field/number_field_ideal.py\", line 2462:\n    sage: G.gens_values()\nExpected:\n    (2*a^2 - 1, 2*a^2 + 2*a - 2)\nGot:\n    (2*a - 1, 2*a^2 + 2*a - 2)\n**********************************************************************\n```",
    "created_at": "2012-11-14T15:53:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13687#issuecomment-163018",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:16'>Comment 16:</a>
Long doctests fail:

```
sage -t -long "devel/sage/sage/rings/number_field/number_field_ideal.py"
  ***   Warning: precision too low for generators, not given.
**********************************************************************
File "/release/merger/sage-5.5.beta1/devel/sage/sage/rings/number_field/number_field_ideal.py", line 2462:
    sage: G.gens_values()
Expected:
    (2*a^2 - 1, 2*a^2 + 2*a - 2)
Got:
    (2*a - 1, 2*a^2 + 2*a - 2)
**********************************************************************
```



---

archive/issue_events_169566.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-14T15:53:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13687#event-169566"
}
```



---

archive/issue_events_169567.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-14T15:53:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13687#event-169567"
}
```



---

archive/issue_comments_163019.json:
```json
{
    "body": "Attachment: **[trac_13687_review.patch.gz](https://github.com/sagemath/sage/files/ticket13687/trac_13687_review.patch.gz)**\n\nImproved patch",
    "created_at": "2012-11-14T20:50:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13687#issuecomment-163019",
    "user": "https://github.com/vbraun"
}
```

Attachment: **[trac_13687_review.patch.gz](https://github.com/sagemath/sage/files/ticket13687/trac_13687_review.patch.gz)**

Improved patch



---

archive/issue_events_169568.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-11-14T20:52:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13687#event-169568"
}
```



---

archive/issue_events_169569.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-11-14T20:52:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13687#event-169569"
}
```



---

archive/issue_comments_163020.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nI've marked the offending doctest as `# random `, which is what it was before the patch.",
    "created_at": "2012-11-14T20:52:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13687#issuecomment-163020",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:17'>Comment 17:</a>
I've marked the offending doctest as `# random `, which is what it was before the patch.



---

archive/issue_comments_163021.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nThis patch introduces some bad uses of `assert`. You should only use \"assert\" to check for actual bugs, not for bad user input. If there is any way at all to reproduce an AssertionError using documented public functions, that is by definition a bug.",
    "created_at": "2012-11-15T08:19:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13687#issuecomment-163021",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:18'>Comment 18:</a>
This patch introduces some bad uses of `assert`. You should only use "assert" to check for actual bugs, not for bad user input. If there is any way at all to reproduce an AssertionError using documented public functions, that is by definition a bug.



---

archive/issue_comments_163022.json:
```json
{
    "body": "Work Issues: **bad use of assert**",
    "created_at": "2012-11-15T08:20:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13687#issuecomment-163022",
    "user": "https://github.com/jdemeyer"
}
```

Work Issues: **bad use of assert**



---

archive/issue_events_169570.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-15T08:20:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13687#event-169570"
}
```



---

archive/issue_events_169571.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-15T08:20:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13687#event-169571"
}
```



---

archive/issue_comments_163023.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nMost importantly, you must never use `assert` for control flow. So the following is very wrong:\n\n```\ntry:\n    ...\nexcept AssertionError:\n    ...\n```",
    "created_at": "2012-11-15T08:21:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13687#issuecomment-163023",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:20'>Comment 20:</a>
Most importantly, you must never use `assert` for control flow. So the following is very wrong:

```
try:
    ...
except AssertionError:
    ...
```



---

archive/issue_events_169572.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-11-15T17:20:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13687#event-169572"
}
```



---

archive/issue_events_169573.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-11-15T17:20:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13687#event-169573"
}
```



---

archive/issue_comments_163024.json:
```json
{
    "body": "Changed work issues from **bad use of assert** to none",
    "created_at": "2012-11-15T17:20:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13687#issuecomment-163024",
    "user": "https://github.com/vbraun"
}
```

Changed work issues from **bad use of assert** to none



---

archive/issue_comments_163025.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nAgreed, but its only \"introduced\" in the sense that I copied the old `groups.pyx` to `old.pyx` to support old-style parents until every group is switched over. I've cleaned up the `AssertionError` in the new `group.pyx` but not in the `old.pyx`.",
    "created_at": "2012-11-15T17:20:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13687#issuecomment-163025",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:21'>Comment 21:</a>
Agreed, but its only "introduced" in the sense that I copied the old `groups.pyx` to `old.pyx` to support old-style parents until every group is switched over. I've cleaned up the `AssertionError` in the new `group.pyx` but not in the `old.pyx`.



---

archive/issue_comments_163026.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -14,3 +14,4 @@\n Apply\n * [attachment: trac_13687_Parent_for_groups.patch.gz](https://github.com/sagemath/sage/files/ticket13687/trac_13687_Parent_for_groups.patch.gz)\n * [attachment: trac_13687_review.patch.gz](https://github.com/sagemath/sage/files/ticket13687/trac_13687_review.patch.gz)\n+* [attachment: trac_13687_assertions.patch.gz](https://github.com/sagemath/sage/files/ticket13687/trac_13687_assertions.patch.gz)\n``````\n",
    "created_at": "2012-11-15T17:20:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13687#issuecomment-163026",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -14,3 +14,4 @@
 Apply
 * [attachment: trac_13687_Parent_for_groups.patch.gz](https://github.com/sagemath/sage/files/ticket13687/trac_13687_Parent_for_groups.patch.gz)
 * [attachment: trac_13687_review.patch.gz](https://github.com/sagemath/sage/files/ticket13687/trac_13687_review.patch.gz)
+* [attachment: trac_13687_assertions.patch.gz](https://github.com/sagemath/sage/files/ticket13687/trac_13687_assertions.patch.gz)
``````




---

archive/issue_comments_163027.json:
```json
{
    "body": "Updated patch",
    "created_at": "2012-11-22T21:06:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13687#issuecomment-163027",
    "user": "https://github.com/vbraun"
}
```

Updated patch



---

archive/issue_comments_163028.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nAttachment: **[trac_13687_assertions.patch.gz](https://github.com/sagemath/sage/files/ticket13687/trac_13687_assertions.patch.gz)**\n\nI can't seem to be able to apply the patch on sage-5.4.1 Is it rebased for some other version? Or maybe it conflicts with patches from #13211, #6391 or #13588?",
    "created_at": "2012-12-04T13:33:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13687#issuecomment-163028",
    "user": "https://github.com/miguelmarco"
}
```

<a id='comment:22'>Comment 22:</a>
Attachment: **[trac_13687_assertions.patch.gz](https://github.com/sagemath/sage/files/ticket13687/trac_13687_assertions.patch.gz)**

I can't seem to be able to apply the patch on sage-5.4.1 Is it rebased for some other version? Or maybe it conflicts with patches from #13211, #6391 or #13588?



---

archive/issue_comments_163029.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nI have based the patches on sage-5.5.rc0. Can you give that a try?",
    "created_at": "2012-12-04T14:14:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13687#issuecomment-163029",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:23'>Comment 23:</a>
I have based the patches on sage-5.5.rc0. Can you give that a try?



---

archive/issue_comments_163030.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nYes, that works. Thank you.",
    "created_at": "2012-12-04T18:43:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13687#issuecomment-163030",
    "user": "https://github.com/miguelmarco"
}
```

<a id='comment:24'>Comment 24:</a>
Yes, that works. Thank you.



---

archive/issue_comments_163031.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nSo, Jeroen, would you be happy with a positive review now that the assertion issue is cleaned from the new code, but kept in the old one?  Or should we make the full transition of groups before accepting this?",
    "created_at": "2013-01-03T09:05:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13687#issuecomment-163031",
    "user": "https://github.com/miguelmarco"
}
```

<a id='comment:25'>Comment 25:</a>
So, Jeroen, would you be happy with a positive review now that the assertion issue is cleaned from the new code, but kept in the old one?  Or should we make the full transition of groups before accepting this?



---

archive/issue_comments_163032.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nI combined and rebased the patches and marked `old.pyx` and `old.pxd` as copies.",
    "created_at": "2013-01-03T09:30:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13687#issuecomment-163032",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:26'>Comment 26:</a>
I combined and rebased the patches and marked `old.pyx` and `old.pxd` as copies.



---

archive/issue_comments_163033.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -12,6 +12,4 @@\n I haven't actually deprecated `.invariants()` and `.list()`, just changed the documentation to suggest the equivalent `.gens_orders()` and .exponents()` methods. But I think we should deprecate them. Though I first want to work my way through the remaining groups code.\n \n Apply\n-* [attachment: trac_13687_Parent_for_groups.patch.gz](https://github.com/sagemath/sage/files/ticket13687/trac_13687_Parent_for_groups.patch.gz)\n-* [attachment: trac_13687_review.patch.gz](https://github.com/sagemath/sage/files/ticket13687/trac_13687_review.patch.gz)\n-* [attachment: trac_13687_assertions.patch.gz](https://github.com/sagemath/sage/files/ticket13687/trac_13687_assertions.patch.gz)\n+* [attachment: 13687_parent_for_groups_all.patch.gz](https://github.com/sagemath/sage/files/ticket13687/13687_parent_for_groups_all.patch.gz)\n``````\n",
    "created_at": "2013-01-03T09:30:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13687#issuecomment-163033",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -12,6 +12,4 @@
 I haven't actually deprecated `.invariants()` and `.list()`, just changed the documentation to suggest the equivalent `.gens_orders()` and .exponents()` methods. But I think we should deprecate them. Though I first want to work my way through the remaining groups code.
 
 Apply
-* [attachment: trac_13687_Parent_for_groups.patch.gz](https://github.com/sagemath/sage/files/ticket13687/trac_13687_Parent_for_groups.patch.gz)
-* [attachment: trac_13687_review.patch.gz](https://github.com/sagemath/sage/files/ticket13687/trac_13687_review.patch.gz)
-* [attachment: trac_13687_assertions.patch.gz](https://github.com/sagemath/sage/files/ticket13687/trac_13687_assertions.patch.gz)
+* [attachment: 13687_parent_for_groups_all.patch.gz](https://github.com/sagemath/sage/files/ticket13687/13687_parent_for_groups_all.patch.gz)
``````




---

archive/issue_comments_163034.json:
```json
{
    "body": "Attachment: **[13687_parent_for_groups_all.patch.gz](https://github.com/sagemath/sage/files/ticket13687/13687_parent_for_groups_all.patch.gz)**",
    "created_at": "2013-01-03T09:39:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13687#issuecomment-163034",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[13687_parent_for_groups_all.patch.gz](https://github.com/sagemath/sage/files/ticket13687/13687_parent_for_groups_all.patch.gz)**



---

archive/issue_comments_163035.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nIt's not required to fix all of `old.pyx`. If the *newly introduced assertions* are fine, then that's sufficient.",
    "created_at": "2013-01-03T09:48:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13687#issuecomment-163035",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:27'>Comment 27:</a>
It's not required to fix all of `old.pyx`. If the *newly introduced assertions* are fine, then that's sufficient.



---

archive/issue_events_169574.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-01-24T12:35:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13687#event-169574"
}
```



---

archive/issue_events_169575.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-01-24T12:35:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13687#event-169575"
}
```



---

archive/issue_comments_163036.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nI'm fine with the rebasing... don't think there is anything else to review.",
    "created_at": "2013-01-24T12:35:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13687#issuecomment-163036",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:28'>Comment 28:</a>
I'm fine with the rebasing... don't think there is anything else to review.



---

archive/issue_events_169576.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-26T10:47:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13687#event-169576"
}
```



---

archive/issue_events_169577.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-26T10:47:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13687#event-169577"
}
```



---

archive/issue_comments_163037.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\nThis needs to rebased to sage-5.7.beta1.",
    "created_at": "2013-01-26T10:47:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13687#issuecomment-163037",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:29'>Comment 29:</a>
This needs to rebased to sage-5.7.beta1.



---

archive/issue_comments_163038.json:
```json
{
    "body": "Attachment: **[13687_parent_for_groups_all_vb.patch.gz](https://github.com/sagemath/sage/files/ticket13687/13687_parent_for_groups_all_vb.patch.gz)**\n\nUpdated patch",
    "created_at": "2013-01-26T17:58:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13687#issuecomment-163038",
    "user": "https://github.com/vbraun"
}
```

Attachment: **[13687_parent_for_groups_all_vb.patch.gz](https://github.com/sagemath/sage/files/ticket13687/13687_parent_for_groups_all_vb.patch.gz)**

Updated patch



---

archive/issue_comments_163039.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\nRebased to sage-5.7.beta1",
    "created_at": "2013-01-26T18:29:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13687#issuecomment-163039",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:30'>Comment 30:</a>
Rebased to sage-5.7.beta1



---

archive/issue_events_169578.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-01-26T18:32:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13687#event-169578"
}
```



---

archive/issue_events_169579.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-01-26T18:32:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13687#event-169579"
}
```



---

archive/issue_comments_163040.json:
```json
{
    "body": "<a id='comment:31'>Comment 31:</a>\nI ran into a strange issue here: http://tracker.gap-system.org/issues/224. I've added a larger initial workspace size (`-m 64m`) which should be a workaround. In any case it has nothing to do with upgrading the group parents.",
    "created_at": "2013-01-26T18:32:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13687#issuecomment-163040",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:31'>Comment 31:</a>
I ran into a strange issue here: http://tracker.gap-system.org/issues/224. I've added a larger initial workspace size (`-m 64m`) which should be a workaround. In any case it has nothing to do with upgrading the group parents.



---

archive/issue_events_169580.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-29T20:36:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13687#event-169580"
}
```



---

archive/issue_events_169581.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-29T20:36:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13687#event-169581"
}
```



---

archive/issue_comments_163041.json:
```json
{
    "body": "<a id='comment:32'>Comment 32:</a>\nThere are 2 failures on 32-bit:\n\n```\nsage -t  --long -force_lib devel/sage/sage/rings/number_field/unit_group.py\n**********************************************************************\nFile \"/var/lib/buildbot/build/sage/arando-1/arando_full/build/sage-5.7.beta2/devel/sage-main/sage/rings/number_field/unit_group.py\", line 138:\n    sage: u.value()\nExpected:\n    -1/4*a^3 - 7/4*a^2 - 17/4*a - 19/4\nGot:\n    -1/4*a^3 + 7/4*a^2 - 17/4*a + 19/4\n**********************************************************************\nsage -t  --long -force_lib devel/sage/sage/rings/polynomial/polynomial_quotient_ring.py\n**********************************************************************\nFile \"/var/lib/buildbot/build/sage/arando-1/arando_full/build/sage-5.7.beta2/devel/sage-main/sage/rings/polynomial/polynomial_quotient_ring.py\", line 974:\n    sage: S.S_class_group([K.ideal(a)])\nExpected:\n    [((2, -a + 1, 1/2*xbar + 1/2, -1/2*a*xbar + 1/2*a + 1), 6, 1/2*xbar - 3/2)] \nGot:\n    [((2, -a + 1, 1/2*xbar + 1/2, -1/2*a*xbar + 1/2*a + 1), 6, -1/2*xbar + 3/2)]\n**********************************************************************\n```",
    "created_at": "2013-01-29T20:36:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13687#issuecomment-163041",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:32'>Comment 32:</a>
There are 2 failures on 32-bit:

```
sage -t  --long -force_lib devel/sage/sage/rings/number_field/unit_group.py
**********************************************************************
File "/var/lib/buildbot/build/sage/arando-1/arando_full/build/sage-5.7.beta2/devel/sage-main/sage/rings/number_field/unit_group.py", line 138:
    sage: u.value()
Expected:
    -1/4*a^3 - 7/4*a^2 - 17/4*a - 19/4
Got:
    -1/4*a^3 + 7/4*a^2 - 17/4*a + 19/4
**********************************************************************
sage -t  --long -force_lib devel/sage/sage/rings/polynomial/polynomial_quotient_ring.py
**********************************************************************
File "/var/lib/buildbot/build/sage/arando-1/arando_full/build/sage-5.7.beta2/devel/sage-main/sage/rings/polynomial/polynomial_quotient_ring.py", line 974:
    sage: S.S_class_group([K.ideal(a)])
Expected:
    [((2, -a + 1, 1/2*xbar + 1/2, -1/2*a*xbar + 1/2*a + 1), 6, 1/2*xbar - 3/2)] 
Got:
    [((2, -a + 1, 1/2*xbar + 1/2, -1/2*a*xbar + 1/2*a + 1), 6, -1/2*xbar + 3/2)]
**********************************************************************
```



---

archive/issue_comments_163042.json:
```json
{
    "body": "Attachment: **[13687_32bitfix.patch.gz](https://github.com/sagemath/sage/files/ticket13687/13687_32bitfix.patch.gz)**\n\nInitial patch",
    "created_at": "2013-01-29T22:02:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13687#issuecomment-163042",
    "user": "https://github.com/vbraun"
}
```

Attachment: **[13687_32bitfix.patch.gz](https://github.com/sagemath/sage/files/ticket13687/13687_32bitfix.patch.gz)**

Initial patch



---

archive/issue_events_169582.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-01-29T22:03:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13687#event-169582"
}
```



---

archive/issue_events_169583.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-01-29T22:03:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13687#event-169583"
}
```



---

archive/issue_comments_163043.json:
```json
{
    "body": "<a id='comment:33'>Comment 33:</a>\nI've added the necessary `# 32-bit` clauses...",
    "created_at": "2013-01-29T22:03:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13687#issuecomment-163043",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:33'>Comment 33:</a>
I've added the necessary `# 32-bit` clauses...



---

archive/issue_comments_163044.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -13,3 +13,4 @@\n \n Apply\n * [attachment: 13687_parent_for_groups_all.patch.gz](https://github.com/sagemath/sage/files/ticket13687/13687_parent_for_groups_all.patch.gz)\n+* [attachment: 13687_32bitfix.patch.gz](https://github.com/sagemath/sage/files/ticket13687/13687_32bitfix.patch.gz)\n``````\n",
    "created_at": "2013-01-29T22:03:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13687#issuecomment-163044",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -13,3 +13,4 @@
 
 Apply
 * [attachment: 13687_parent_for_groups_all.patch.gz](https://github.com/sagemath/sage/files/ticket13687/13687_parent_for_groups_all.patch.gz)
+* [attachment: 13687_32bitfix.patch.gz](https://github.com/sagemath/sage/files/ticket13687/13687_32bitfix.patch.gz)
``````




---

archive/issue_comments_163045.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -12,5 +12,5 @@\n I haven't actually deprecated `.invariants()` and `.list()`, just changed the documentation to suggest the equivalent `.gens_orders()` and .exponents()` methods. But I think we should deprecate them. Though I first want to work my way through the remaining groups code.\n \n Apply\n-* [attachment: 13687_parent_for_groups_all.patch.gz](https://github.com/sagemath/sage/files/ticket13687/13687_parent_for_groups_all.patch.gz)\n+* [attachment: 13687_parent_for_groups_all_vb.patch.gz](https://github.com/sagemath/sage/files/ticket13687/13687_parent_for_groups_all_vb.patch.gz)\n * [attachment: 13687_32bitfix.patch.gz](https://github.com/sagemath/sage/files/ticket13687/13687_32bitfix.patch.gz)\n``````\n",
    "created_at": "2013-01-30T08:22:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13687#issuecomment-163045",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -12,5 +12,5 @@
 I haven't actually deprecated `.invariants()` and `.list()`, just changed the documentation to suggest the equivalent `.gens_orders()` and .exponents()` methods. But I think we should deprecate them. Though I first want to work my way through the remaining groups code.
 
 Apply
-* [attachment: 13687_parent_for_groups_all.patch.gz](https://github.com/sagemath/sage/files/ticket13687/13687_parent_for_groups_all.patch.gz)
+* [attachment: 13687_parent_for_groups_all_vb.patch.gz](https://github.com/sagemath/sage/files/ticket13687/13687_parent_for_groups_all_vb.patch.gz)
 * [attachment: 13687_32bitfix.patch.gz](https://github.com/sagemath/sage/files/ticket13687/13687_32bitfix.patch.gz)
``````




---

archive/issue_comments_163046.json:
```json
{
    "body": "Merged: **sage-5.7.beta2**",
    "created_at": "2013-01-31T09:20:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13687#issuecomment-163046",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.7.beta2**



---

archive/issue_events_169584.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-31T09:20:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13687#event-169584"
}
```



---

archive/issue_events_169585.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-31T09:20:04Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/13687",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13687#event-169585"
}
```
