# Issue 13356: Wrong LaTeX for products of numbers

archive/issues_013184.json:
```json
{
    "body": "E.g.\n\n```\nsage: e = 2 * 2^(1/3)\nsage: print latex(e)\n2 \\, 2^{\\left(\\frac{1}{3}\\right)} \n```\nthe output looks like power of 22, there should be \\cdot.\n\n(And there should be no parenthesis around the power, but that does not change the meaning at least.)\n\nAssignee: @burcin\n\nCC:  @burcin @eviatarbach\n\nKeywords: latex, pynac, sd48\n\nBranch/Commit: 2c9b4e6d6de18630846a529eeb0a2bde08cbd56c\n\nReviewer: Jean-Pierre Flori\n\nAuthor: Burcin Erocal\n\nDependencies: #15198\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/13356\n\n",
    "closed_at": "2014-03-04T16:58:40Z",
    "created_at": "2012-08-09T17:56:23Z",
    "labels": [
        "component: symbolics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.2",
    "title": "Wrong LaTeX for products of numbers",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13356",
    "user": "https://github.com/novoselt"
}
```
E.g.

```
sage: e = 2 * 2^(1/3)
sage: print latex(e)
2 \, 2^{\left(\frac{1}{3}\right)} 
```
the output looks like power of 22, there should be \cdot.

(And there should be no parenthesis around the power, but that does not change the meaning at least.)

Assignee: @burcin

CC:  @burcin @eviatarbach

Keywords: latex, pynac, sd48

Branch/Commit: 2c9b4e6d6de18630846a529eeb0a2bde08cbd56c

Reviewer: Jean-Pierre Flori

Author: Burcin Erocal

Dependencies: #15198

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/13356





---

archive/issue_comments_200037.json:
```json
{
    "body": "<a id='comment:1'></a>\nMy investigation shows that the issue is in `GEx_to_str_latex`, but I have no clue how to fix it.",
    "created_at": "2012-08-09T17:57:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13356#issuecomment-200037",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:1'></a>
My investigation shows that the issue is in `GEx_to_str_latex`, but I have no clue how to fix it.



---

archive/issue_comments_200038.json:
```json
{
    "body": "<a id='comment:2'></a>\n#3202 was about the same problem and claims to be fixed, but I am not sure what is/was the problem with the example there. On the other hand, there is a test in the docstring of symbolic expressions claiming that `2 \\, 2` is great.",
    "created_at": "2012-08-09T18:00:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13356#issuecomment-200038",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:2'></a>
#3202 was about the same problem and claims to be fixed, but I am not sure what is/was the problem with the example there. On the other hand, there is a test in the docstring of symbolic expressions claiming that `2 \, 2` is great.



---

archive/issue_comments_200039.json:
```json
{
    "body": "<a id='comment:3'></a>\nBurcin, any ideas on whether it is in Pynac or Ginac and how to fix it?",
    "created_at": "2012-08-09T19:59:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13356#issuecomment-200039",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:3'></a>
Burcin, any ideas on whether it is in Pynac or Ginac and how to fix it?



---

archive/issue_comments_200040.json:
```json
{
    "body": "<a id='comment:4'></a>\nSlight change in Sage-5.10.rc1:\n\n```\nsage: sage: e = 2 * 2^(1/3)\nsage: sage: print latex(e)\n2 \\, 2^{\\frac{1}{3}}\n```",
    "created_at": "2013-06-17T17:12:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13356#issuecomment-200040",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:4'></a>
Slight change in Sage-5.10.rc1:

```
sage: sage: e = 2 * 2^(1/3)
sage: sage: print latex(e)
2 \, 2^{\frac{1}{3}}
```



---

archive/issue_comments_200041.json:
```json
{
    "body": "Attachment [trac_13356-latex_coeff_sep.patch](tarball://root/attachments/some-uuid/ticket13356/trac_13356-latex_coeff_sep.patch) by @burcin created at 2013-06-17 22:00:21",
    "created_at": "2013-06-17T22:00:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13356#issuecomment-200041",
    "user": "https://github.com/burcin"
}
```

Attachment [trac_13356-latex_coeff_sep.patch](tarball://root/attachments/some-uuid/ticket13356/trac_13356-latex_coeff_sep.patch) by @burcin created at 2013-06-17 22:00:21



---

archive/issue_comments_200042.json:
```json
{
    "body": "<a id='comment:5'></a>\nPatch for pynac available [on my work-in-progress repo](https://bitbucket.org/burcin/pynac-wip/commits/838c6c3fff665d36ae262acadb2ed7a33d25500b?at=latex_overall_coeff_sep). Doctest fixes in [This is the Trac macro *attachment:trac_13356-latex_coeff_sep.patch* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#attachment:trac_13356-latex_coeff_sep.patch-macro)\n\nNow the output is:\n\n```\nsage: latex(2 * 2^x)\n2 \\cdot 2^{x}\n```\n\nWe still keep `\\,` if the next character is not a digit:\n\n```\nsage: latex(2* x^2)\n2 \\, x^{2}\n```",
    "created_at": "2013-06-17T22:12:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13356#issuecomment-200042",
    "user": "https://github.com/burcin"
}
```

<a id='comment:5'></a>
Patch for pynac available [on my work-in-progress repo](https://bitbucket.org/burcin/pynac-wip/commits/838c6c3fff665d36ae262acadb2ed7a33d25500b?at=latex_overall_coeff_sep). Doctest fixes in [This is the Trac macro *attachment:trac_13356-latex_coeff_sep.patch* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#attachment:trac_13356-latex_coeff_sep.patch-macro)

Now the output is:

```
sage: latex(2 * 2^x)
2 \cdot 2^{x}
```

We still keep `\,` if the next character is not a digit:

```
sage: latex(2* x^2)
2 \, x^{2}
```



---

archive/issue_comments_200043.json:
```json
{
    "body": "Changing author from \"\" to \"Burcin Erocal\"",
    "created_at": "2013-06-17T22:12:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13356#issuecomment-200043",
    "user": "https://github.com/burcin"
}
```

Changing author from "" to "Burcin Erocal"



---

archive/issue_comments_200044.json:
```json
{
    "body": "Changing keywords from \"latex\" to \"latex, pynac, sd48\".",
    "created_at": "2013-06-17T22:12:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13356#issuecomment-200044",
    "user": "https://github.com/burcin"
}
```

Changing keywords from "latex" to "latex, pynac, sd48".



---

archive/issue_comments_200045.json:
```json
{
    "body": "<a id='comment:6'></a>\nIn [this sage-support`@` thread](https://groups.google.com/d/topic/sage-support/K7OwY5XIsAQ/discussion) the consensus seems to be to remove `\\,` and only use `\\cdot` when both sides are numerals.\n\nI am planning to make this change if there are no objections. I'm afraid this will mean fixing doctests all over the tree yet again.",
    "created_at": "2013-06-24T18:49:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13356#issuecomment-200045",
    "user": "https://github.com/burcin"
}
```

<a id='comment:6'></a>
In [this sage-support`@` thread](https://groups.google.com/d/topic/sage-support/K7OwY5XIsAQ/discussion) the consensus seems to be to remove `\,` and only use `\cdot` when both sides are numerals.

I am planning to make this change if there are no objections. I'm afraid this will mean fixing doctests all over the tree yet again.



---

archive/issue_comments_200046.json:
```json
{
    "body": "<a id='comment:7'></a>\nI certainly would not object - I think Sage-generated code should be as close to human-written as possible, so that it is relatively easy to copy-paste into manually written papers. I've never seen anyone manually inserting `\\,` for every product. (It would be good also to have `x_0^2` rather than `x_{0}^{2}`, but that's not related to this ticket.)",
    "created_at": "2013-06-24T18:57:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13356#issuecomment-200046",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:7'></a>
I certainly would not object - I think Sage-generated code should be as close to human-written as possible, so that it is relatively easy to copy-paste into manually written papers. I've never seen anyone manually inserting `\,` for every product. (It would be good also to have `x_0^2` rather than `x_{0}^{2}`, but that's not related to this ticket.)



---

archive/issue_events_037027.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13356#event-37027"
}
```



---

archive/issue_comments_200047.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#15198\"",
    "created_at": "2013-09-15T18:17:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13356#issuecomment-200047",
    "user": "https://github.com/eviatarbach"
}
```

Changing dependencies from "" to "#15198"



---

archive/issue_events_037028.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13356#event-37028"
}
```



---

archive/issue_events_037029.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13356#event-37029"
}
```



---

archive/issue_comments_200048.json:
```json
{
    "body": "<a id='comment:12'></a>\nThis is to be merged with the pynac update at #15198.",
    "created_at": "2014-02-20T10:49:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13356#issuecomment-200048",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:12'></a>
This is to be merged with the pynac update at #15198.



---

archive/issue_comments_200049.json:
```json
{
    "body": "Changing commit from \"\" to \"2c9b4e6d6de18630846a529eeb0a2bde08cbd56c\"",
    "created_at": "2014-02-20T12:11:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13356#issuecomment-200049",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing commit from "" to "2c9b4e6d6de18630846a529eeb0a2bde08cbd56c"



---

archive/issue_comments_200050.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Jean-Pierre Flori\"",
    "created_at": "2014-02-20T12:11:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13356#issuecomment-200050",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing reviewer from "" to "Jean-Pierre Flori"



---

archive/issue_comments_200051.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-02-20T12:11:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13356#issuecomment-200051",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_200052.json:
```json
{
    "body": "Changing branch from \"\" to \"u/jpflori/ticket/13356\"",
    "created_at": "2014-02-20T12:11:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13356#issuecomment-200052",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing branch from "" to "u/jpflori/ticket/13356"



---

archive/issue_comments_200053.json:
```json
{
    "body": "<a id='comment:13'></a>\nNew commits:\n|                                                                                                                                          |                                           |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|\n|[2c9b4e6](http://git.sagemath.org/sage.git/commit/?id=2c9b4e6d6de18630846a529eeb0a2bde08cbd56c)|`Add doctests for printing fixes in pynac.`|",
    "created_at": "2014-02-20T12:11:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13356#issuecomment-200053",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:13'></a>
New commits:
|                                                                                                                                          |                                           |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|
|[2c9b4e6](http://git.sagemath.org/sage.git/commit/?id=2c9b4e6d6de18630846a529eeb0a2bde08cbd56c)|`Add doctests for printing fixes in pynac.`|



---

archive/issue_comments_200054.json:
```json
{
    "body": "<a id='comment:14'></a>\nIt seems no doctests needs updating.\nI'll double check (I have a problem with ascii_art right now, but surely for other reasons) and if so set this to positive review.",
    "created_at": "2014-02-20T12:12:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13356#issuecomment-200054",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:14'></a>
It seems no doctests needs updating.
I'll double check (I have a problem with ascii_art right now, but surely for other reasons) and if so set this to positive review.



---

archive/issue_comments_200055.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-02-20T15:39:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13356#issuecomment-200055",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_037030.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-03-04T16:58:40Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13356#event-37030"
}
```



---

archive/issue_comments_200056.json:
```json
{
    "body": "Changing branch from \"u/jpflori/ticket/13356\" to \"2c9b4e6d6de18630846a529eeb0a2bde08cbd56c\"",
    "created_at": "2014-03-04T16:58:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13356#issuecomment-200056",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/jpflori/ticket/13356" to "2c9b4e6d6de18630846a529eeb0a2bde08cbd56c"



---

archive/issue_comments_200057.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-03-04T16:58:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13356#issuecomment-200057",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
