# Issue 13356: Wrong LaTeX for products of numbers

archive/issues_013184.json:
```json
{
    "body": "E.g.\n\n```\nsage: e = 2 * 2^(1/3)\nsage: print latex(e)\n2 \\, 2^{\\left(\\frac{1}{3}\\right)} \n```\nthe output looks like power of 22, there should be \\cdot.\n\n(And there should be no parenthesis around the power, but that does not change the meaning at least.)\n\n**Assignee:** @burcin\n\n**CC:**  @burcin @eviatarbach\n\n**Keywords:** latex, pynac, sd48\n\n**Branch/Commit:** [2c9b4e6d6de18630846a529eeb0a2bde08cbd56c](https://github.com/sagemath/sagetrac-mirror/commit/2c9b4e6d6de18630846a529eeb0a2bde08cbd56c)\n\n**Reviewer:** Jean-Pierre Flori\n\n**Author:** Burcin Erocal\n\n**Dependencies:** #15198\n\nIssue created by migration from https://trac.sagemath.org/ticket/13356\n\n",
    "closed_at": "2014-03-04T16:58:40Z",
    "created_at": "2012-08-09T17:56:23Z",
    "labels": [
        "component: symbolics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.2",
    "title": "Wrong LaTeX for products of numbers",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13356",
    "user": "https://github.com/novoselt"
}
```
E.g.

```
sage: e = 2 * 2^(1/3)
sage: print latex(e)
2 \, 2^{\left(\frac{1}{3}\right)} 
```
the output looks like power of 22, there should be \cdot.

(And there should be no parenthesis around the power, but that does not change the meaning at least.)

**Assignee:** @burcin

**CC:**  @burcin @eviatarbach

**Keywords:** latex, pynac, sd48

**Branch/Commit:** [2c9b4e6d6de18630846a529eeb0a2bde08cbd56c](https://github.com/sagemath/sagetrac-mirror/commit/2c9b4e6d6de18630846a529eeb0a2bde08cbd56c)

**Reviewer:** Jean-Pierre Flori

**Author:** Burcin Erocal

**Dependencies:** #15198

Issue created by migration from https://trac.sagemath.org/ticket/13356





---

archive/issue_comments_192857.json:
```json
{
    "body": "<a id='comment:1'></a>\nMy investigation shows that the issue is in `GEx_to_str_latex`, but I have no clue how to fix it.",
    "created_at": "2012-08-09T17:57:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13356#issuecomment-192857",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:1'></a>
My investigation shows that the issue is in `GEx_to_str_latex`, but I have no clue how to fix it.



---

archive/issue_comments_192858.json:
```json
{
    "body": "<a id='comment:2'></a>\n#3202 was about the same problem and claims to be fixed, but I am not sure what is/was the problem with the example there. On the other hand, there is a test in the docstring of symbolic expressions claiming that `2 \\, 2` is great.",
    "created_at": "2012-08-09T18:00:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13356#issuecomment-192858",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:2'></a>
#3202 was about the same problem and claims to be fixed, but I am not sure what is/was the problem with the example there. On the other hand, there is a test in the docstring of symbolic expressions claiming that `2 \, 2` is great.



---

archive/issue_comments_192859.json:
```json
{
    "body": "<a id='comment:3'></a>\nBurcin, any ideas on whether it is in Pynac or Ginac and how to fix it?",
    "created_at": "2012-08-09T19:59:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13356#issuecomment-192859",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:3'></a>
Burcin, any ideas on whether it is in Pynac or Ginac and how to fix it?



---

archive/issue_comments_192860.json:
```json
{
    "body": "<a id='comment:4'></a>\nSlight change in Sage-5.10.rc1:\n\n```\nsage: sage: e = 2 * 2^(1/3)\nsage: sage: print latex(e)\n2 \\, 2^{\\frac{1}{3}}\n```",
    "created_at": "2013-06-17T17:12:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13356#issuecomment-192860",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:4'></a>
Slight change in Sage-5.10.rc1:

```
sage: sage: e = 2 * 2^(1/3)
sage: sage: print latex(e)
2 \, 2^{\frac{1}{3}}
```



---

archive/attachments_018088.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_13356-latex_coeff_sep.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket13356/trac_13356-latex_coeff_sep.patch",
    "created_at": "2013-06-17T22:00:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/burcin"
}
```



---

archive/issue_comments_192861.json:
```json
{
    "body": "",
    "created_at": "2013-06-17T22:00:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13356#issuecomment-192861",
    "user": "https://github.com/burcin"
}
```





---

archive/issue_comments_192862.json:
```json
{
    "body": "<a id='comment:5'></a>\nPatch for pynac available [on my work-in-progress repo](https://bitbucket.org/burcin/pynac-wip/commits/838c6c3fff665d36ae262acadb2ed7a33d25500b?at=latex_overall_coeff_sep). Doctest fixes in [This is the Trac macro *attachment:trac_13356-latex_coeff_sep.patch* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#attachment:trac_13356-latex_coeff_sep.patch-macro)\n\nNow the output is:\n\n```\nsage: latex(2 * 2^x)\n2 \\cdot 2^{x}\n```\n\nWe still keep `\\,` if the next character is not a digit:\n\n```\nsage: latex(2* x^2)\n2 \\, x^{2}\n```",
    "created_at": "2013-06-17T22:12:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13356#issuecomment-192862",
    "user": "https://github.com/burcin"
}
```

<a id='comment:5'></a>
Patch for pynac available [on my work-in-progress repo](https://bitbucket.org/burcin/pynac-wip/commits/838c6c3fff665d36ae262acadb2ed7a33d25500b?at=latex_overall_coeff_sep). Doctest fixes in [This is the Trac macro *attachment:trac_13356-latex_coeff_sep.patch* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#attachment:trac_13356-latex_coeff_sep.patch-macro)

Now the output is:

```
sage: latex(2 * 2^x)
2 \cdot 2^{x}
```

We still keep `\,` if the next character is not a digit:

```
sage: latex(2* x^2)
2 \, x^{2}
```



---

archive/issue_comments_192863.json:
```json
{
    "body": "**Author:** Burcin Erocal",
    "created_at": "2013-06-17T22:12:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13356#issuecomment-192863",
    "user": "https://github.com/burcin"
}
```

**Author:** Burcin Erocal



---

archive/issue_comments_192864.json:
```json
{
    "body": "**Changing keywords** from \"latex\" to \"latex, pynac, sd48\".",
    "created_at": "2013-06-17T22:12:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13356#issuecomment-192864",
    "user": "https://github.com/burcin"
}
```

**Changing keywords** from "latex" to "latex, pynac, sd48".



---

archive/issue_comments_192865.json:
```json
{
    "body": "<a id='comment:6'></a>\nIn [this sage-support@ thread](https://groups.google.com/d/topic/sage-support/K7OwY5XIsAQ/discussion) the consensus seems to be to remove `\\,` and only use `\\cdot` when both sides are numerals.\n\nI am planning to make this change if there are no objections. I'm afraid this will mean fixing doctests all over the tree yet again.",
    "created_at": "2013-06-24T18:49:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13356#issuecomment-192865",
    "user": "https://github.com/burcin"
}
```

<a id='comment:6'></a>
In [this sage-support@ thread](https://groups.google.com/d/topic/sage-support/K7OwY5XIsAQ/discussion) the consensus seems to be to remove `\,` and only use `\cdot` when both sides are numerals.

I am planning to make this change if there are no objections. I'm afraid this will mean fixing doctests all over the tree yet again.



---

archive/issue_comments_192866.json:
```json
{
    "body": "<a id='comment:7'></a>\nI certainly would not object - I think Sage-generated code should be as close to human-written as possible, so that it is relatively easy to copy-paste into manually written papers. I've never seen anyone manually inserting `\\,` for every product. (It would be good also to have `x_0^2` rather than `x_{0}^{2}`, but that's not related to this ticket.)",
    "created_at": "2013-06-24T18:57:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13356#issuecomment-192866",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:7'></a>
I certainly would not object - I think Sage-generated code should be as close to human-written as possible, so that it is relatively easy to copy-paste into manually written papers. I've never seen anyone manually inserting `\,` for every product. (It would be good also to have `x_0^2` rather than `x_{0}^{2}`, but that's not related to this ticket.)



---

archive/issue_events_042675.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13356#event-42675"
}
```



---

archive/issue_comments_192867.json:
```json
{
    "body": "**Dependencies:** #15198",
    "created_at": "2013-09-15T18:17:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13356#issuecomment-192867",
    "user": "https://github.com/eviatarbach"
}
```

**Dependencies:** #15198



---

archive/issue_events_042676.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13356#event-42676"
}
```



---

archive/issue_events_042677.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13356#event-42677"
}
```



---

archive/issue_comments_192868.json:
```json
{
    "body": "<a id='comment:12'></a>\nThis is to be merged with the pynac update at #15198.",
    "created_at": "2014-02-20T10:49:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13356#issuecomment-192868",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:12'></a>
This is to be merged with the pynac update at #15198.



---

archive/issue_comments_192869.json:
```json
{
    "body": "**Commit:** [2c9b4e6d6de18630846a529eeb0a2bde08cbd56c](https://github.com/sagemath/sagetrac-mirror/commit/2c9b4e6d6de18630846a529eeb0a2bde08cbd56c)",
    "created_at": "2014-02-20T12:11:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13356#issuecomment-192869",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Commit:** [2c9b4e6d6de18630846a529eeb0a2bde08cbd56c](https://github.com/sagemath/sagetrac-mirror/commit/2c9b4e6d6de18630846a529eeb0a2bde08cbd56c)



---

archive/issue_comments_192870.json:
```json
{
    "body": "**Reviewer:** Jean-Pierre Flori",
    "created_at": "2014-02-20T12:11:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13356#issuecomment-192870",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Reviewer:** Jean-Pierre Flori



---

archive/issue_comments_192871.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2014-02-20T12:11:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13356#issuecomment-192871",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_192872.json:
```json
{
    "body": "**Branch:** [u/jpflori/ticket/13356](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/13356)",
    "created_at": "2014-02-20T12:11:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13356#issuecomment-192872",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Branch:** [u/jpflori/ticket/13356](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/13356)



---

archive/issue_comments_192873.json:
```json
{
    "body": "<a id='comment:13'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2c9b4e6d6de18630846a529eeb0a2bde08cbd56c\">2c9b4e6</a></td><td><code>Add doctests for printing fixes in pynac.</code></td></tr></table>\n",
    "created_at": "2014-02-20T12:11:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13356#issuecomment-192873",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:13'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2c9b4e6d6de18630846a529eeb0a2bde08cbd56c">2c9b4e6</a></td><td><code>Add doctests for printing fixes in pynac.</code></td></tr></table>




---

archive/issue_comments_192874.json:
```json
{
    "body": "<a id='comment:14'></a>\nIt seems no doctests needs updating.\nI'll double check (I have a problem with ascii_art right now, but surely for other reasons) and if so set this to positive review.",
    "created_at": "2014-02-20T12:12:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13356#issuecomment-192874",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:14'></a>
It seems no doctests needs updating.
I'll double check (I have a problem with ascii_art right now, but surely for other reasons) and if so set this to positive review.



---

archive/issue_comments_192875.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2014-02-20T15:39:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13356#issuecomment-192875",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_events_042678.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-03-04T16:58:40Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13356#event-42678"
}
```



---

archive/issue_comments_192876.json:
```json
{
    "body": "**Changing branch** from \"[u/jpflori/ticket/13356](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/13356)\" to \"[2c9b4e6d6de18630846a529eeb0a2bde08cbd56c](https://github.com/sagemath/sagetrac-mirror/commit/2c9b4e6d6de18630846a529eeb0a2bde08cbd56c)\".",
    "created_at": "2014-03-04T16:58:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13356#issuecomment-192876",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/jpflori/ticket/13356](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/13356)" to "[2c9b4e6d6de18630846a529eeb0a2bde08cbd56c](https://github.com/sagemath/sagetrac-mirror/commit/2c9b4e6d6de18630846a529eeb0a2bde08cbd56c)".
