# Issue 13874: Allow automorphism group of a graph to act on the graph's vertex set

archive/issues_013670.json:
```json
{
    "body": "The current implementation of the automorphism group of a graph always relabels the graph in question to use the vertex set {1,2,...,n+1} and then returns the automorphism group based on this labeling and potentially a translation for the labeling as well.\n\nNeedless to say that this is time consuming, confusing and also prone to bugs since if one uses integers as labels (starting at 0 for example) the relabeling might go unnoticed. \n\nAs it appears from [this](https://groups.google.com/forum/?fromgroups=#!topic/sage-devel/wLtbNpeYrok) sage-devel post  it is now possible to use arbitrary domains for permutation groups.\n\nHence, it would be nice to integrate this change into the automorphism_group function as well.\n\n---\n\nFrom https://groups.google.com/d/msg/sage-devel/y_TuGhjLYJQ/8YBUmQaNsXUJ\n\n> In the long term, I think the right solution is to copy what is done for Galois groups of number fields: depending on a keyword option to automorphism_group(), we should return either the abstract permutation group (as is done now) or a group equipped with an action on the edges and vertices of the graph.\n> David\n\n\n---\nAlso what appears to be a 'defect' is that if you have a graph G on say 150 vertices and you want to compute the stabilizer (or some other subgroup..) of Aut(G) and you do\n\n```\n\nA = G.automorphism_group()\nS = A.stabilizer(v)\n\n```\n\nit happens that you lose the information about the vertices of G. Since S can be a group on a smaller domain and there is no translation from it to the vertices of G\n\n**Assignee:** @jasongrout, @nathanncohen, @rlmill\n\n**CC:**  @rbeezer @nathanncohen @dcoudert @benjaminfjones\n\nIssue created by migration from https://trac.sagemath.org/ticket/13874\n\n",
    "created_at": "2012-12-28T11:03:06Z",
    "labels": [
        "component: graph theory",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Allow automorphism group of a graph to act on the graph's vertex set",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13874",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```
The current implementation of the automorphism group of a graph always relabels the graph in question to use the vertex set {1,2,...,n+1} and then returns the automorphism group based on this labeling and potentially a translation for the labeling as well.

Needless to say that this is time consuming, confusing and also prone to bugs since if one uses integers as labels (starting at 0 for example) the relabeling might go unnoticed. 

As it appears from [this](https://groups.google.com/forum/?fromgroups=#!topic/sage-devel/wLtbNpeYrok) sage-devel post  it is now possible to use arbitrary domains for permutation groups.

Hence, it would be nice to integrate this change into the automorphism_group function as well.

---

From https://groups.google.com/d/msg/sage-devel/y_TuGhjLYJQ/8YBUmQaNsXUJ

> In the long term, I think the right solution is to copy what is done for Galois groups of number fields: depending on a keyword option to automorphism_group(), we should return either the abstract permutation group (as is done now) or a group equipped with an action on the edges and vertices of the graph.
> David


---
Also what appears to be a 'defect' is that if you have a graph G on say 150 vertices and you want to compute the stabilizer (or some other subgroup..) of Aut(G) and you do

```

A = G.automorphism_group()
S = A.stabilizer(v)

```

it happens that you lose the information about the vertices of G. Since S can be a group on a smaller domain and there is no translation from it to the vertices of G

**Assignee:** @jasongrout, @nathanncohen, @rlmill

**CC:**  @rbeezer @nathanncohen @dcoudert @benjaminfjones

Issue created by migration from https://trac.sagemath.org/ticket/13874





---

archive/issue_events_119115.json:
```json
{
    "actor": "https://github.com/benjaminfjones",
    "created_at": "2012-12-28T21:23:47Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/13874",
    "rename": {
        "from": "Allow automorphism of groups to work on the original vertex set",
        "to": "Allow automorphism group of a graph to act on the graph's vertex set"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13874#event-119115"
}
```



---

archive/issue_comments_166186.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,9 +1,16 @@\n-The current implementation of the automorphism group of a graph always relabels the graph in question to use the vertex set $1,2,...,$ and then returns the automorphism group based on this labelling and potentially a translation for the labelling as well.\n+The current implementation of the automorphism group of a graph always relabels the graph in question to use the vertex set {1,2,...,n+1} and then returns the automorphism group based on this labeling and potentially a translation for the labeling as well.\n \n-Needless to say that this is time consuming, confusing and also prone to bugs since if one uses integers as labels (starting at 0 for example) the relabelling might go unnoticed. \n+Needless to say that this is time consuming, confusing and also prone to bugs since if one uses integers as labels (starting at 0 for example) the relabeling might go unnoticed. \n \n As it appears from [this](https://groups.google.com/forum/?fromgroups=#!topic/sage-devel/wLtbNpeYrok) sage-devel post  it is now possible to use arbitrary domains for permutation groups.\n \n Hence, it would be nice to integrate this change into the automorphism_group function as well.\n \n+---\n \n+From https://groups.google.com/d/msg/sage-devel/y_TuGhjLYJQ/8YBUmQaNsXUJ\n+\n+> In the long term, I think the right solution is to copy what is done for Galois groups of number fields: depending on a keyword option to automorphism_group(), we should return either the abstract permutation group (as is done now) or a group equipped with an action on the edges and vertices of the graph.\n+> David\n+\n+\n``````\n",
    "created_at": "2012-12-28T21:23:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13874#issuecomment-166186",
    "user": "https://github.com/benjaminfjones"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,9 +1,16 @@
-The current implementation of the automorphism group of a graph always relabels the graph in question to use the vertex set $1,2,...,$ and then returns the automorphism group based on this labelling and potentially a translation for the labelling as well.
+The current implementation of the automorphism group of a graph always relabels the graph in question to use the vertex set {1,2,...,n+1} and then returns the automorphism group based on this labeling and potentially a translation for the labeling as well.
 
-Needless to say that this is time consuming, confusing and also prone to bugs since if one uses integers as labels (starting at 0 for example) the relabelling might go unnoticed. 
+Needless to say that this is time consuming, confusing and also prone to bugs since if one uses integers as labels (starting at 0 for example) the relabeling might go unnoticed. 
 
 As it appears from [this](https://groups.google.com/forum/?fromgroups=#!topic/sage-devel/wLtbNpeYrok) sage-devel post  it is now possible to use arbitrary domains for permutation groups.
 
 Hence, it would be nice to integrate this change into the automorphism_group function as well.
 
+---
 
+From https://groups.google.com/d/msg/sage-devel/y_TuGhjLYJQ/8YBUmQaNsXUJ
+
+> In the long term, I think the right solution is to copy what is done for Galois groups of number fields: depending on a keyword option to automorphism_group(), we should return either the abstract permutation group (as is done now) or a group equipped with an action on the edges and vertices of the graph.
+> David
+
+
``````




---

archive/issue_comments_166187.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -14,3 +14,14 @@\n > David\n \n \n+---\n+Also what appears to be a 'defect' is that if you have a graph G on say 150 vertices and you want to compute the stabilizer (or some other subgroup..) of Aut(G) and you do\n+\n+```\n+\n+A = G.automorphism_group()\n+S = A.stabilizer(v)\n+\n+```\n+\n+it happens that you lose the information about the vertices of G. Since S can be a group on a smaller domain and there is no translation from it to the vertices of G\n``````\n",
    "created_at": "2012-12-29T09:26:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13874#issuecomment-166187",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -14,3 +14,14 @@
 > David
 
 
+---
+Also what appears to be a 'defect' is that if you have a graph G on say 150 vertices and you want to compute the stabilizer (or some other subgroup..) of Aut(G) and you do
+
+```
+
+A = G.automorphism_group()
+S = A.stabilizer(v)
+
+```
+
+it happens that you lose the information about the vertices of G. Since S can be a group on a smaller domain and there is no translation from it to the vertices of G
``````




---

archive/issue_comments_166188.json:
```json
{
    "body": "<a id='comment:4'></a>\nI posted this to the mailing list, but it's relevant here too:\n\nUntil we have proper support for this, you can do:\n\n```\nsage: g=Graph({'a': 'b', 'b': 'c'})\nsage: p,q=g.automorphism_group(translation=True)\nsage: pp=PermutationGroup(gap_group=p._gap_(), domain=sorted(q, key=q.get))\n\nsage: pp\nPermutation Group with generators [('c','a')]\n```\n(this also helps you see how to implement it...)\n\nUnfortunately, there is a bug in the stabilizer method when the permutation group has a custom domain, which is now fixed at #13893, which now needs review.\n\na workaround for the stabilizer bug is:\n\n```\nsage: pp.subgroup(gap_group=gap.Stabilizer(pp, pp._domain_to_gap['b']))\nSubgroup of (Permutation Group with generators [('c','a')]) generated by [('c','a')] \n```",
    "created_at": "2012-12-31T15:40:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13874",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13874#issuecomment-166188",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:4'></a>
I posted this to the mailing list, but it's relevant here too:

Until we have proper support for this, you can do:

```
sage: g=Graph({'a': 'b', 'b': 'c'})
sage: p,q=g.automorphism_group(translation=True)
sage: pp=PermutationGroup(gap_group=p._gap_(), domain=sorted(q, key=q.get))

sage: pp
Permutation Group with generators [('c','a')]
```
(this also helps you see how to implement it...)

Unfortunately, there is a bug in the stabilizer method when the permutation group has a custom domain, which is now fixed at #13893, which now needs review.

a workaround for the stabilizer bug is:

```
sage: pp.subgroup(gap_group=gap.Stabilizer(pp, pp._domain_to_gap['b']))
Subgroup of (Permutation Group with generators [('c','a')]) generated by [('c','a')] 
```



---

archive/issue_events_119116.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13874",
    "milestone": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13874#event-119116"
}
```



---

archive/issue_events_119117.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13874",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13874#event-119117"
}
```



---

archive/issue_events_119118.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13874",
    "milestone": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13874#event-119118"
}
```



---

archive/issue_events_119119.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13874",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13874#event-119119"
}
```



---

archive/issue_events_119120.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13874",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13874#event-119120"
}
```



---

archive/issue_events_119121.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13874",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13874#event-119121"
}
```



---

archive/issue_events_119122.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13874",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13874#event-119122"
}
```



---

archive/issue_events_119123.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13874",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13874#event-119123"
}
```
