# Issue 13735: Fixing a bug in sage.misc.misc.coeff_repr

archive/issues_013531.json:
```json
{
    "body": "Currently, we have\n\n```\nsage: alpha,beta,gamma=FreeAlgebra(ZZ,3,'alpha,beta,gamma').gens()\nsage: latex(alpha-beta)\n\\alpha + \\left(-1\\right)\\beta\n```\n\nThis patch turns this into\n\n```\nsage: alpha,beta,gamma=FreeAlgebra(ZZ,3,'alpha,beta,gamma').gens()\nsage: latex(alpha-beta)\n\\alpha - \\beta\n```\n\n**Apply** [attachment:trac_13735_fix_repr_lincomb.patch]\n\nAssignee: sage-combinat\n\nCC:  @fchapoton\n\nKeywords: coefficient repr\n\nReviewer: Andrey Novoseltsev\n\nAuthor: V\u00edt Tu\u010dek\n\nMerged: sage-5.10.beta5\n\nDependencies: sage-5.10.beta4\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/13735\n\n",
    "closed_at": "2013-05-26T19:49:14Z",
    "created_at": "2012-11-21T11:08:01Z",
    "labels": [
        "component: combinatorics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.10",
    "title": "Fixing a bug in sage.misc.misc.coeff_repr",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13735",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```
Currently, we have

```
sage: alpha,beta,gamma=FreeAlgebra(ZZ,3,'alpha,beta,gamma').gens()
sage: latex(alpha-beta)
\alpha + \left(-1\right)\beta
```

This patch turns this into

```
sage: alpha,beta,gamma=FreeAlgebra(ZZ,3,'alpha,beta,gamma').gens()
sage: latex(alpha-beta)
\alpha - \beta
```

**Apply** [attachment:trac_13735_fix_repr_lincomb.patch]

Assignee: sage-combinat

CC:  @fchapoton

Keywords: coefficient repr

Reviewer: Andrey Novoseltsev

Author: Vít Tuček

Merged: sage-5.10.beta5

Dependencies: sage-5.10.beta4

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/13735





---

archive/issue_comments_213502.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-11-21T11:11:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213502",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_213503.json:
```json
{
    "body": "<a id='comment:2'></a>\nReplying to [stumpc5](#comment%3A1):\n\nThis one seems to not apply on 5.5.rc0 (while it does on 5.5.beta1). I am currently building rc0 and will fix this as soon as rc0 is ready on my machine.",
    "created_at": "2012-11-21T11:40:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213503",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:2'></a>
Replying to [stumpc5](#comment%3A1):

This one seems to not apply on 5.5.rc0 (while it does on 5.5.beta1). I am currently building rc0 and will fix this as soon as rc0 is ready on my machine.



---

archive/issue_comments_213504.json:
```json
{
    "body": "<a id='comment:3'></a>\nAttachment [trac_13735-fix_bug_in_coef_repr-cs.patch](tarball://root/attachments/some-uuid/ticket13735/trac_13735-fix_bug_in_coef_repr-cs.patch) by stumpc5 created at 2012-11-21 13:08:57\n\napply trac_13735-fix_bug_in_coef_repr-cs.patch",
    "created_at": "2012-11-21T13:08:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213504",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:3'></a>
Attachment [trac_13735-fix_bug_in_coef_repr-cs.patch](tarball://root/attachments/some-uuid/ticket13735/trac_13735-fix_bug_in_coef_repr-cs.patch) by stumpc5 created at 2012-11-21 13:08:57

apply trac_13735-fix_bug_in_coef_repr-cs.patch



---

archive/issue_comments_213505.json:
```json
{
    "body": "<a id='comment:4'></a>\nAnd what about `alpha - 2 * beta`? It does not look like the patch would improve this.",
    "created_at": "2012-11-21T15:48:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213505",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:4'></a>
And what about `alpha - 2 * beta`? It does not look like the patch would improve this.



---

archive/issue_comments_213506.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [novoselt](#comment%3A4):\n> And what about `alpha - 2 * beta`? It does not look like the patch would improve this.\n\n\nThis is very right. And I think you're right that the patch should not only handle one particular case (which I was catching in a completely different context).\n\nI will look into that...",
    "created_at": "2012-11-21T15:52:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213506",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:5'></a>
Replying to [novoselt](#comment%3A4):
> And what about `alpha - 2 * beta`? It does not look like the patch would improve this.


This is very right. And I think you're right that the patch should not only handle one particular case (which I was catching in a completely different context).

I will look into that...



---

archive/issue_comments_213507.json:
```json
{
    "body": "<a id='comment:6'></a>\nI started playing, but whenever I solved some problem, I introduced another. Since this is not really urgent (and not really necessary for the ticket I am actually working on), I leave it open for now, and we can decide later what we want to do with it.\n\nBest, Christian",
    "created_at": "2012-11-21T18:38:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213507",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:6'></a>
I started playing, but whenever I solved some problem, I introduced another. Since this is not really urgent (and not really necessary for the ticket I am actually working on), I leave it open for now, and we can decide later what we want to do with it.

Best, Christian



---

archive/issue_comments_213508.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-11-21T18:41:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213508",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_213509.json:
```json
{
    "body": "<a id='comment:8'></a>\nMy personal feeling is that latexing of expressions is disorganized in general and it is not clear how and where bugs have to be fixed, e.g. #13356 is much more serious than the issue here, but extra parentheses annoy me every once in while too, especially when with one ring all is OK and with another one not...",
    "created_at": "2012-11-21T19:16:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213509",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:8'></a>
My personal feeling is that latexing of expressions is disorganized in general and it is not clear how and where bugs have to be fixed, e.g. #13356 is much more serious than the issue here, but extra parentheses annoy me every once in while too, especially when with one ring all is OK and with another one not...



---

archive/issue_comments_213510.json:
```json
{
    "body": "Attachment [trac_13735_fix_latex_repr_lincomb.patch](tarball://root/attachments/some-uuid/ticket13735/trac_13735_fix_latex_repr_lincomb.patch) by @vit-tucek created at 2013-04-08 13:28:10\n\nfix the representation of linear combinations and include more testcases",
    "created_at": "2013-04-08T13:28:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213510",
    "user": "https://github.com/vit-tucek"
}
```

Attachment [trac_13735_fix_latex_repr_lincomb.patch](tarball://root/attachments/some-uuid/ticket13735/trac_13735_fix_latex_repr_lincomb.patch) by @vit-tucek created at 2013-04-08 13:28:10

fix the representation of linear combinations and include more testcases



---

archive/issue_comments_213511.json:
```json
{
    "body": "<a id='comment:9'></a>\nHi!\n\nScratching my own itch, I've changed the code for repr_lincomb to properly handle negative coefficients as well as zero. It required one change to how coeff_repr works which may cause problems. I've included testcases for repr_lincomb. \n\nIs there a way how can I test the rest of sage only for this specific change? I don't want to run all the numerical test which take quite a while on my machine.",
    "created_at": "2013-04-08T13:31:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213511",
    "user": "https://github.com/vit-tucek"
}
```

<a id='comment:9'></a>
Hi!

Scratching my own itch, I've changed the code for repr_lincomb to properly handle negative coefficients as well as zero. It required one change to how coeff_repr works which may cause problems. I've included testcases for repr_lincomb. 

Is there a way how can I test the rest of sage only for this specific change? I don't want to run all the numerical test which take quite a while on my machine.



---

archive/issue_comments_213512.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [vittucek](#comment%3A9):\n> Hi!\n> \n> Scratching my own itch, I've changed the code for repr_lincomb to properly handle negative coefficients as well as zero. It required one change to how coeff_repr works which may cause problems. I've included testcases for repr_lincomb. \n\n\nfeel free to take over this patch if you like - I stopped working on it since solving one issue somewhere caused others in other places.\n\nTo see if your patch causes problems somewhere, you cannot do much that running the complete doctests...\n\nCheers, Christian",
    "created_at": "2013-04-08T15:46:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213512",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:10'></a>
Replying to [vittucek](#comment%3A9):
> Hi!
> 
> Scratching my own itch, I've changed the code for repr_lincomb to properly handle negative coefficients as well as zero. It required one change to how coeff_repr works which may cause problems. I've included testcases for repr_lincomb. 


feel free to take over this patch if you like - I stopped working on it since solving one issue somewhere caused others in other places.

To see if your patch causes problems somewhere, you cannot do much that running the complete doctests...

Cheers, Christian



---

archive/issue_comments_213513.json:
```json
{
    "body": "<a id='comment:11'></a>\nFor future reference, this is the list of modules that fail after my patch. Some of these failures are clearly bugs (e.g.    /tmp/sage-5.8/devel/sage/sage/combinat/sf/hall_littlewood.py)\n\ndevel/sage/sage/structure/formal_sum.py \ndevel/sage/sage/rings/polynomial/plural.pyx \ndevel/sage/sage/modules/finite_submodule_iter.pyx\ndevel/sage/sage/combinat/free_module.py\ndevel/sage/sage/combinat/root_system/weyl_characters.py\ndevel/sage/sage/combinat/sf/llt.py\ndevel/sage/sage/combinat/sf/hall_littlewood.py\ndevel/sage/sage/combinat/sf/sfa.py\ndevel/sage/sage/combinat/sf/k_dual.py\ndevel/sage/sage/algebras/free_algebra_element.py\ndevel/sage/sage/algebras/group_algebra_new.py\ndevel/sage/sage/algebras/free_algebra_quotient_element.py\ndevel/sage/sage/algebras/iwahori_hecke_algebra.py\ndevel/sage/sage/algebras/steenrod/steenrod_algebra_mult.py\ndevel/sage/sage/algebras/steenrod/steenrod_algebra.py\ndevel/sage/sage/schemes/elliptic_curves/monsky_washnitzer.py\ndevel/sage/sage/schemes/generic/divisor.py\ndevel/sage/sage/modular/modsym/boundary.py",
    "created_at": "2013-04-08T17:20:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213513",
    "user": "https://github.com/vit-tucek"
}
```

<a id='comment:11'></a>
For future reference, this is the list of modules that fail after my patch. Some of these failures are clearly bugs (e.g.    /tmp/sage-5.8/devel/sage/sage/combinat/sf/hall_littlewood.py)

devel/sage/sage/structure/formal_sum.py 
devel/sage/sage/rings/polynomial/plural.pyx 
devel/sage/sage/modules/finite_submodule_iter.pyx
devel/sage/sage/combinat/free_module.py
devel/sage/sage/combinat/root_system/weyl_characters.py
devel/sage/sage/combinat/sf/llt.py
devel/sage/sage/combinat/sf/hall_littlewood.py
devel/sage/sage/combinat/sf/sfa.py
devel/sage/sage/combinat/sf/k_dual.py
devel/sage/sage/algebras/free_algebra_element.py
devel/sage/sage/algebras/group_algebra_new.py
devel/sage/sage/algebras/free_algebra_quotient_element.py
devel/sage/sage/algebras/iwahori_hecke_algebra.py
devel/sage/sage/algebras/steenrod/steenrod_algebra_mult.py
devel/sage/sage/algebras/steenrod/steenrod_algebra.py
devel/sage/sage/schemes/elliptic_curves/monsky_washnitzer.py
devel/sage/sage/schemes/generic/divisor.py
devel/sage/sage/modular/modsym/boundary.py



---

archive/issue_comments_213514.json:
```json
{
    "body": "<a id='comment:12'></a>\nCan we please have a space after the leading minus? Not `-x - x^2` but rather `- x - x^2` etc.",
    "created_at": "2013-04-08T20:25:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213514",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:12'></a>
Can we please have a space after the leading minus? Not `-x - x^2` but rather `- x - x^2` etc.



---

archive/issue_comments_213515.json:
```json
{
    "body": "<a id='comment:13'></a>\nSure. That's a trivial change.",
    "created_at": "2013-04-08T20:34:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213515",
    "user": "https://github.com/vit-tucek"
}
```

<a id='comment:13'></a>
Sure. That's a trivial change.



---

archive/issue_comments_213516.json:
```json
{
    "body": "<a id='comment:14'></a>\nI am in the middle of bugfixing right now. \n\n```\nsage: R.<q> = ZZ[]\nsage:  A2 = WeylCharacterRing(['A',2], base_ring = R, style=\"coroots\")\nsage: [A2(x) for x in [-1]]\n\n[-1*A2(0,0)]\n```\n\nThis is because the type of the coefficient -1 is sage.rings.polynomial.polynomial_integer_dense_flint.Polynomial_integer_dense_flint and the test c < 0 evaluates to False\n\nIs this a bug or intended behaviour?",
    "created_at": "2013-04-08T20:54:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213516",
    "user": "https://github.com/vit-tucek"
}
```

<a id='comment:14'></a>
I am in the middle of bugfixing right now. 

```
sage: R.<q> = ZZ[]
sage:  A2 = WeylCharacterRing(['A',2], base_ring = R, style="coroots")
sage: [A2(x) for x in [-1]]

[-1*A2(0,0)]
```

This is because the type of the coefficient -1 is sage.rings.polynomial.polynomial_integer_dense_flint.Polynomial_integer_dense_flint and the test c < 0 evaluates to False

Is this a bug or intended behaviour?



---

archive/issue_comments_213517.json:
```json
{
    "body": "<a id='comment:15'></a>\nSimilar issue arises in combinat/sf/llt.py, combinat/sf/k_dual.py and combinat/sf/hall_littlewood.py, where -t > 0 and type(-t) == sage.rings.fraction_field_element.FractionFieldElement_1poly_field\n\nI think this should be a bug since c=-t leads to \n\n```\n\nsage: c > 0 and -c > 0\n\nTrue\n```",
    "created_at": "2013-04-08T21:37:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213517",
    "user": "https://github.com/vit-tucek"
}
```

<a id='comment:15'></a>
Similar issue arises in combinat/sf/llt.py, combinat/sf/k_dual.py and combinat/sf/hall_littlewood.py, where -t > 0 and type(-t) == sage.rings.fraction_field_element.FractionFieldElement_1poly_field

I think this should be a bug since c=-t leads to 

```

sage: c > 0 and -c > 0

True
```



---

archive/issue_comments_213518.json:
```json
{
    "body": "Attachment [failures.txt](tarball://root/attachments/some-uuid/ticket13735/failures.txt) by @vit-tucek created at 2013-04-08 22:57:35",
    "created_at": "2013-04-08T22:57:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213518",
    "user": "https://github.com/vit-tucek"
}
```

Attachment [failures.txt](tarball://root/attachments/some-uuid/ticket13735/failures.txt) by @vit-tucek created at 2013-04-08 22:57:35



---

archive/issue_comments_213519.json:
```json
{
    "body": "<a id='comment:16'></a>\nI've hacked around the issues I mentioned and uploaded a bugfixed version of the patch. Right now I think that the only failures are due to the desired changes in output. Please see attached failures.txt and confirm  this.\n\nAs for the space after leading minus as suggested by novoselt -- it can be done easily, but a lot of doctests expects it to be not there; i.e. it would require more \"repairs\" to doctests than current version. I think we need broader agreement to put that space there.",
    "created_at": "2013-04-08T23:01:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213519",
    "user": "https://github.com/vit-tucek"
}
```

<a id='comment:16'></a>
I've hacked around the issues I mentioned and uploaded a bugfixed version of the patch. Right now I think that the only failures are due to the desired changes in output. Please see attached failures.txt and confirm  this.

As for the space after leading minus as suggested by novoselt -- it can be done easily, but a lot of doctests expects it to be not there; i.e. it would require more "repairs" to doctests than current version. I think we need broader agreement to put that space there.



---

archive/issue_comments_213520.json:
```json
{
    "body": "<a id='comment:17'></a>\nmake ptestlong in Sage 5.9 produced only the following error:\n\n\n```\n./sage sage -t --long devel/sage/sage/structure/sage_object.pyx\n  File \"sage\", line 31\n    resolvelinks() {\n                   ^\nSyntaxError: invalid syntax\n\n```\n\nThus my patch is still valid.",
    "created_at": "2013-05-15T16:47:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213520",
    "user": "https://github.com/vit-tucek"
}
```

<a id='comment:17'></a>
make ptestlong in Sage 5.9 produced only the following error:


```
./sage sage -t --long devel/sage/sage/structure/sage_object.pyx
  File "sage", line 31
    resolvelinks() {
                   ^
SyntaxError: invalid syntax

```

Thus my patch is still valid.



---

archive/issue_comments_213521.json:
```json
{
    "body": "<a id='comment:18'></a>\nIs the last patch the only one that has to be applied? It should also list your full name in the header, and if this is ready for review - please add your name to the authors and switch to \"needs review\"!",
    "created_at": "2013-05-15T18:27:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213521",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:18'></a>
Is the last patch the only one that has to be applied? It should also list your full name in the header, and if this is ready for review - please add your name to the authors and switch to "needs review"!



---

archive/issue_comments_213522.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-05-15T18:51:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213522",
    "user": "https://github.com/vit-tucek"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_213523.json:
```json
{
    "body": "Changing author from \"Christian Stump\" to \"Christian Stump, V\u00edt Tu\u010dek\"",
    "created_at": "2013-05-15T18:51:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213523",
    "user": "https://github.com/vit-tucek"
}
```

Changing author from "Christian Stump" to "Christian Stump, Vít Tuček"



---

archive/issue_comments_213524.json:
```json
{
    "body": "<a id='comment:19'></a>\nYes. The last patch is the only one to be applied.",
    "created_at": "2013-05-15T18:51:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213524",
    "user": "https://github.com/vit-tucek"
}
```

<a id='comment:19'></a>
Yes. The last patch is the only one to be applied.



---

archive/issue_comments_213525.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -14,3 +14,4 @@\n \\alpha - \\beta\n ```\n \n+**Apply** [attachment:trac_13735_fix_repr_lincomb.patch]\n``````\n",
    "created_at": "2013-05-15T18:53:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213525",
    "user": "https://github.com/novoselt"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -14,3 +14,4 @@
 \alpha - \beta
 ```
 
+**Apply** [attachment:trac_13735_fix_repr_lincomb.patch]
``````




---

archive/issue_comments_213526.json:
```json
{
    "body": "Reviewer: Andrey Novoseltsev",
    "created_at": "2013-05-15T20:50:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213526",
    "user": "https://github.com/novoselt"
}
```

Reviewer: Andrey Novoseltsev



---

archive/issue_comments_213527.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-05-15T20:50:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213527",
    "user": "https://github.com/novoselt"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_213528.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2013-05-16T06:22:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213528",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_213529.json:
```json
{
    "body": "<a id='comment:22'></a>\nCould this have caused\n\n```\nsage -t --long devel/sage/sage/modular/modsym/boundary.py\n**********************************************************************\nFile \"devel/sage/sage/modular/modsym/boundary.py\", line 1299, in sage.modular.modsym.boundary.BoundarySpace_wtk_eps._coerce_cusp\nFailed example:\n    [ B(Cusp(i,13)) for i in range(13) ]\nExpected:\n    [[0],\n    [1/13],\n    (-zeta4)*[1/13],\n    [1/13],\n    (-1)*[1/13],\n    (-zeta4)*[1/13],\n    (-zeta4)*[1/13],\n    zeta4*[1/13],\n    zeta4*[1/13],\n    [1/13],\n    (-1)*[1/13],\n    zeta4*[1/13],\n    (-1)*[1/13]]\nGot:\n    [[0], [1/13], -zeta4*[1/13], [1/13], -[1/13], -zeta4*[1/13], -zeta4*[1/13], zeta4*[1/13], zeta4*[1/13], [1/13], -[1/13], zeta4*[1/13], -[1/13]]\n**********************************************************************\nFile \"devel/sage/sage/modular/modsym/boundary.py\", line 1323, in sage.modular.modsym.boundary.BoundarySpace_wtk_eps._coerce_cusp\nFailed example:\n    [ B(Cusp(i,13)) for i in range(13) ]\nExpected:\n    [0,\n    [1/13],\n    (-zeta4)*[1/13],\n    [1/13],\n    (-1)*[1/13],\n    (-zeta4)*[1/13],\n    (-zeta4)*[1/13],\n    zeta4*[1/13],\n    zeta4*[1/13],\n    [1/13],\n    (-1)*[1/13],\n    zeta4*[1/13],\n    (-1)*[1/13]]\nGot:\n    [0, [1/13], -zeta4*[1/13], [1/13], -[1/13], -zeta4*[1/13], -zeta4*[1/13], zeta4*[1/13], zeta4*[1/13], [1/13], -[1/13], zeta4*[1/13], -[1/13]]\n**********************************************************************\n```\n\n```\nsage -t --long devel/sage/sage/modular/modsym/ambient.py\n**********************************************************************\nFile \"devel/sage/sage/modular/modsym/ambient.py\", line 2100, in sage.modular.modsym.ambient.ModularSymbolsAmbient.twisted_winding_element\nFailed example:\n    M.twisted_winding_element(0,eps)\nExpected:\n    2*(1,23) + (-2)*(1,32) + 2*(1,34)\nGot:\n    2*(1,23) - 2*(1,32) + 2*(1,34)\n**********************************************************************\n```\n\n```\n**********************************************************************\nFile \"devel/sage/sage/tests/book_schilling_zabrocki_kschur_primer.py\", line 571, in sage.tests.book_schilling_zabrocki_kschur_primer\nFailed example:\n    p(ks3z[2, 2, 2, 2, 2, 2, 2, 2])     # long time (17s on sage.math, 2013)\nExpected:\n    1/12*p[4, 4, 4, 4] + 1/4*p[8, 8] + (-1/3)*p[12, 4]\nGot:\n    1/12*p[4, 4, 4, 4] + 1/4*p[8, 8] - 1/3*p[12, 4]\n**********************************************************************\nFile \"devel/sage/sage/tests/book_schilling_zabrocki_kschur_primer.py\", line 573, in sage.tests.book_schilling_zabrocki_kschur_primer\nFailed example:\n    p(ks3[2,2])\nExpected:\n    1/12*p[1, 1, 1, 1] + 1/4*p[2, 2] + (-1/3)*p[3, 1]\nGot:\n    1/12*p[1, 1, 1, 1] + 1/4*p[2, 2] - 1/3*p[3, 1]\n**********************************************************************\nFile \"devel/sage/sage/tests/book_schilling_zabrocki_kschur_primer.py\", line 575, in sage.tests.book_schilling_zabrocki_kschur_primer\nFailed example:\n    p(ks3[2,2]).plethysm(p[4])\nExpected:\n    1/12*p[4, 4, 4, 4] + 1/4*p[8, 8] + (-1/3)*p[12, 4]\nGot:\n    1/12*p[4, 4, 4, 4] + 1/4*p[8, 8] - 1/3*p[12, 4]\n**********************************************************************\n```",
    "created_at": "2013-05-16T06:22:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213529",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:22'></a>
Could this have caused

```
sage -t --long devel/sage/sage/modular/modsym/boundary.py
**********************************************************************
File "devel/sage/sage/modular/modsym/boundary.py", line 1299, in sage.modular.modsym.boundary.BoundarySpace_wtk_eps._coerce_cusp
Failed example:
    [ B(Cusp(i,13)) for i in range(13) ]
Expected:
    [[0],
    [1/13],
    (-zeta4)*[1/13],
    [1/13],
    (-1)*[1/13],
    (-zeta4)*[1/13],
    (-zeta4)*[1/13],
    zeta4*[1/13],
    zeta4*[1/13],
    [1/13],
    (-1)*[1/13],
    zeta4*[1/13],
    (-1)*[1/13]]
Got:
    [[0], [1/13], -zeta4*[1/13], [1/13], -[1/13], -zeta4*[1/13], -zeta4*[1/13], zeta4*[1/13], zeta4*[1/13], [1/13], -[1/13], zeta4*[1/13], -[1/13]]
**********************************************************************
File "devel/sage/sage/modular/modsym/boundary.py", line 1323, in sage.modular.modsym.boundary.BoundarySpace_wtk_eps._coerce_cusp
Failed example:
    [ B(Cusp(i,13)) for i in range(13) ]
Expected:
    [0,
    [1/13],
    (-zeta4)*[1/13],
    [1/13],
    (-1)*[1/13],
    (-zeta4)*[1/13],
    (-zeta4)*[1/13],
    zeta4*[1/13],
    zeta4*[1/13],
    [1/13],
    (-1)*[1/13],
    zeta4*[1/13],
    (-1)*[1/13]]
Got:
    [0, [1/13], -zeta4*[1/13], [1/13], -[1/13], -zeta4*[1/13], -zeta4*[1/13], zeta4*[1/13], zeta4*[1/13], [1/13], -[1/13], zeta4*[1/13], -[1/13]]
**********************************************************************
```

```
sage -t --long devel/sage/sage/modular/modsym/ambient.py
**********************************************************************
File "devel/sage/sage/modular/modsym/ambient.py", line 2100, in sage.modular.modsym.ambient.ModularSymbolsAmbient.twisted_winding_element
Failed example:
    M.twisted_winding_element(0,eps)
Expected:
    2*(1,23) + (-2)*(1,32) + 2*(1,34)
Got:
    2*(1,23) - 2*(1,32) + 2*(1,34)
**********************************************************************
```

```
**********************************************************************
File "devel/sage/sage/tests/book_schilling_zabrocki_kschur_primer.py", line 571, in sage.tests.book_schilling_zabrocki_kschur_primer
Failed example:
    p(ks3z[2, 2, 2, 2, 2, 2, 2, 2])     # long time (17s on sage.math, 2013)
Expected:
    1/12*p[4, 4, 4, 4] + 1/4*p[8, 8] + (-1/3)*p[12, 4]
Got:
    1/12*p[4, 4, 4, 4] + 1/4*p[8, 8] - 1/3*p[12, 4]
**********************************************************************
File "devel/sage/sage/tests/book_schilling_zabrocki_kschur_primer.py", line 573, in sage.tests.book_schilling_zabrocki_kschur_primer
Failed example:
    p(ks3[2,2])
Expected:
    1/12*p[1, 1, 1, 1] + 1/4*p[2, 2] + (-1/3)*p[3, 1]
Got:
    1/12*p[1, 1, 1, 1] + 1/4*p[2, 2] - 1/3*p[3, 1]
**********************************************************************
File "devel/sage/sage/tests/book_schilling_zabrocki_kschur_primer.py", line 575, in sage.tests.book_schilling_zabrocki_kschur_primer
Failed example:
    p(ks3[2,2]).plethysm(p[4])
Expected:
    1/12*p[4, 4, 4, 4] + 1/4*p[8, 8] + (-1/3)*p[12, 4]
Got:
    1/12*p[4, 4, 4, 4] + 1/4*p[8, 8] - 1/3*p[12, 4]
**********************************************************************
```



---

archive/issue_comments_213530.json:
```json
{
    "body": "Dependencies: #4327",
    "created_at": "2013-05-16T06:29:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213530",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: #4327



---

archive/issue_comments_213531.json:
```json
{
    "body": "<a id='comment:23'></a>\nWith #4327:\n\n```\nsage -t devel/sage/sage/combinat/root_system/root_lattice_realizations.py\n**********************************************************************\nFile \"devel/sage/sage/combinat/root_system/root_lattice_realizations.py\", line 1840, in sage.combinat.root_system.root_lattice_realizations.RootLatticeRealizations.Pare\nntMethods.plot_roots\nFailed example:\n    list(RootSystem([\"A\",2]).root_lattice().plot_roots(\"all\"))\nExpected:\n    [Arrow from (0.0,0.0) to (1.0,0.0),\n     Text '$\\alpha_{1}$' at the point (1.05,0.0),\n     Arrow from (0.0,0.0) to (0.0,1.0),\n     Text '$\\alpha_{2}$' at the point (0.0,1.05),\n     Arrow from (0.0,0.0) to (1.0,1.0),\n     Text '$\\alpha_{1} + \\alpha_{2}$' at the point (1.05,1.05),\n     Arrow from (0.0,0.0) to (-1.0,0.0),\n     Text '$\\left(-1\\right)\\alpha_{1}$' at the point (-1.05,0.0),\n     Arrow from (0.0,0.0) to (0.0,-1.0),\n     Text '$\\left(-1\\right)\\alpha_{2}$' at the point (0.0,-1.05),\n     Arrow from (0.0,0.0) to (-1.0,-1.0),\n     Text '$\\left(-1\\right)\\alpha_{1} + \\left(-1\\right)\\alpha_{2}$' at the point (-1.05,-1.05)]\nGot:\n    [Arrow from (0.0,0.0) to (1.0,0.0), Text '$\\alpha_{1}$' at the point (1.05,0.0), Arrow from (0.0,0.0) to (0.0,1.0), Text '$\\alpha_{2}$' at the point (0.0,1.05), Arr\now from (0.0,0.0) to (1.0,1.0), Text '$\\alpha_{1} + \\alpha_{2}$' at the point (1.05,1.05), Arrow from (0.0,0.0) to (-1.0,0.0), Text '$-\\alpha_{1}$' at the point (-1.05,\n0.0), Arrow from (0.0,0.0) to (0.0,-1.0), Text '$-\\alpha_{2}$' at the point (0.0,-1.05), Arrow from (0.0,0.0) to (-1.0,-1.0), Text '$-\\alpha_{1} - \\alpha_{2}$' at the p\noint (-1.05,-1.05)]\n**********************************************************************\n```",
    "created_at": "2013-05-16T06:29:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213531",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:23'></a>
With #4327:

```
sage -t devel/sage/sage/combinat/root_system/root_lattice_realizations.py
**********************************************************************
File "devel/sage/sage/combinat/root_system/root_lattice_realizations.py", line 1840, in sage.combinat.root_system.root_lattice_realizations.RootLatticeRealizations.Pare
ntMethods.plot_roots
Failed example:
    list(RootSystem(["A",2]).root_lattice().plot_roots("all"))
Expected:
    [Arrow from (0.0,0.0) to (1.0,0.0),
     Text '$\alpha_{1}$' at the point (1.05,0.0),
     Arrow from (0.0,0.0) to (0.0,1.0),
     Text '$\alpha_{2}$' at the point (0.0,1.05),
     Arrow from (0.0,0.0) to (1.0,1.0),
     Text '$\alpha_{1} + \alpha_{2}$' at the point (1.05,1.05),
     Arrow from (0.0,0.0) to (-1.0,0.0),
     Text '$\left(-1\right)\alpha_{1}$' at the point (-1.05,0.0),
     Arrow from (0.0,0.0) to (0.0,-1.0),
     Text '$\left(-1\right)\alpha_{2}$' at the point (0.0,-1.05),
     Arrow from (0.0,0.0) to (-1.0,-1.0),
     Text '$\left(-1\right)\alpha_{1} + \left(-1\right)\alpha_{2}$' at the point (-1.05,-1.05)]
Got:
    [Arrow from (0.0,0.0) to (1.0,0.0), Text '$\alpha_{1}$' at the point (1.05,0.0), Arrow from (0.0,0.0) to (0.0,1.0), Text '$\alpha_{2}$' at the point (0.0,1.05), Arr
ow from (0.0,0.0) to (1.0,1.0), Text '$\alpha_{1} + \alpha_{2}$' at the point (1.05,1.05), Arrow from (0.0,0.0) to (-1.0,0.0), Text '$-\alpha_{1}$' at the point (-1.05,
0.0), Arrow from (0.0,0.0) to (0.0,-1.0), Text '$-\alpha_{2}$' at the point (0.0,-1.05), Arrow from (0.0,0.0) to (-1.0,-1.0), Text '$-\alpha_{1} - \alpha_{2}$' at the p
oint (-1.05,-1.05)]
**********************************************************************
```



---

archive/issue_comments_213532.json:
```json
{
    "body": "<a id='comment:24'></a>\nThe only bug I see is the change from [0] to 0, otherwise it is the correct behaviour. If you disagree, then we need to figure out what exactly _is_ the expected behaviour of rep().\n\nRegarding the first issue - my version of sage (5.9 + my patch) does not raise any errors. Where can I get the code to debug this?",
    "created_at": "2013-05-16T07:30:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213532",
    "user": "https://github.com/vit-tucek"
}
```

<a id='comment:24'></a>
The only bug I see is the change from [0] to 0, otherwise it is the correct behaviour. If you disagree, then we need to figure out what exactly _is_ the expected behaviour of rep().

Regarding the first issue - my version of sage (5.9 + my patch) does not raise any errors. Where can I get the code to debug this?



---

archive/issue_comments_213533.json:
```json
{
    "body": "<a id='comment:25'></a>\nSorry, I mangled two testcases together. So it's again just the question of replacing (-1)* by  unary minus and replacing (-x)* by -x* which I think is correct.",
    "created_at": "2013-05-16T07:33:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213533",
    "user": "https://github.com/vit-tucek"
}
```

<a id='comment:25'></a>
Sorry, I mangled two testcases together. So it's again just the question of replacing (-1)* by  unary minus and replacing (-x)* by -x* which I think is correct.



---

archive/issue_comments_213534.json:
```json
{
    "body": "Changing dependencies from \"#4327\" to \"sage-5.10.beta4\"",
    "created_at": "2013-05-16T08:40:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213534",
    "user": "https://github.com/jdemeyer"
}
```

Changing dependencies from "#4327" to "sage-5.10.beta4"



---

archive/issue_comments_213535.json:
```json
{
    "body": "<a id='comment:26'></a>\nYou're right about tests passing on sage-5.9 (and even sage-5.10.beta3). I recommend you to wait for sage-5.10.beta4 and then rebase to that.",
    "created_at": "2013-05-16T08:40:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213535",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:26'></a>
You're right about tests passing on sage-5.9 (and even sage-5.10.beta3). I recommend you to wait for sage-5.10.beta4 and then rebase to that.



---

archive/issue_comments_213536.json:
```json
{
    "body": "<a id='comment:27'></a>\nCan I somehow get notified when sage reaches beta4? This patch lies here for 5 weeks and could have made it into 5.9 if I knew that one has to change the status to needs_review. (Developer's guide is somehow lacking in this regard.)",
    "created_at": "2013-05-16T08:47:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213536",
    "user": "https://github.com/vit-tucek"
}
```

<a id='comment:27'></a>
Can I somehow get notified when sage reaches beta4? This patch lies here for 5 weeks and could have made it into 5.9 if I knew that one has to change the status to needs_review. (Developer's guide is somehow lacking in this regard.)



---

archive/issue_comments_213537.json:
```json
{
    "body": "<a id='comment:28'></a>\nReplying to [vittucek](#comment%3A27):\n> Can I somehow get notified when sage reaches beta4?\n\nI will personally notify you.",
    "created_at": "2013-05-16T08:51:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213537",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:28'></a>
Replying to [vittucek](#comment%3A27):
> Can I somehow get notified when sage reaches beta4?

I will personally notify you.



---

archive/issue_comments_213538.json:
```json
{
    "body": "<a id='comment:29'></a>\nThanks. So just to be clear, the plan is to wait for 5.10 beta4 and then fix all the docstrings or possible bugs and turn the status of this patch to needs_review?",
    "created_at": "2013-05-16T08:56:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213538",
    "user": "https://github.com/vit-tucek"
}
```

<a id='comment:29'></a>
Thanks. So just to be clear, the plan is to wait for 5.10 beta4 and then fix all the docstrings or possible bugs and turn the status of this patch to needs_review?



---

archive/issue_comments_213539.json:
```json
{
    "body": "<a id='comment:30'></a>\nReplying to [vittucek](#comment%3A29):\n> Thanks. So just to be clear, the plan is to wait for 5.10 beta4 and then fix all the docstrings or possible bugs and turn the status of this patch to needs_review?\n  \nYes, exactly.",
    "created_at": "2013-05-16T09:18:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213539",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:30'></a>
Replying to [vittucek](#comment%3A29):
> Thanks. So just to be clear, the plan is to wait for 5.10 beta4 and then fix all the docstrings or possible bugs and turn the status of this patch to needs_review?
  
Yes, exactly.



---

archive/issue_comments_213540.json:
```json
{
    "body": "<a id='comment:31'></a>\nReplying to [jdemeyer](#comment%3A23):\n> With #4327:\n> \n> ```\n>      ...\n>      Text '$\\left(-1\\right)\\alpha_{1} + \\left(-1\\right)\\alpha_{2}$' at the point (-1.05,-1.05)]\n> Got:\n>      Text '$-\\alpha_{1} - \\alpha_{2}$' at the point (-1.05,-1.05)]\n> ```\n\n\nSorry for the little conflict, and thank you for improving the output\nof root system plots :-)",
    "created_at": "2013-05-16T13:10:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213540",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:31'></a>
Replying to [jdemeyer](#comment%3A23):
> With #4327:
> 
> ```
>      ...
>      Text '$\left(-1\right)\alpha_{1} + \left(-1\right)\alpha_{2}$' at the point (-1.05,-1.05)]
> Got:
>      Text '$-\alpha_{1} - \alpha_{2}$' at the point (-1.05,-1.05)]
> ```


Sorry for the little conflict, and thank you for improving the output
of root system plots :-)



---

archive/issue_comments_213541.json:
```json
{
    "body": "<a id='comment:32'></a>\nsage-5.10.beta4 has been released, you should rebase this patch.",
    "created_at": "2013-05-21T06:55:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213541",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:32'></a>
sage-5.10.beta4 has been released, you should rebase this patch.



---

archive/issue_comments_213542.json:
```json
{
    "body": "final version tested on top of 5.10-beta4",
    "created_at": "2013-05-21T17:17:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213542",
    "user": "https://github.com/vit-tucek"
}
```

final version tested on top of 5.10-beta4



---

archive/issue_comments_213543.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-05-21T17:18:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213543",
    "user": "https://github.com/vit-tucek"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_213544.json:
```json
{
    "body": "<a id='comment:33'></a>\nAttachment [trac_13735_fix_repr_lincomb.patch](tarball://root/attachments/some-uuid/ticket13735/trac_13735_fix_repr_lincomb.patch) by @vit-tucek created at 2013-05-21 17:18:36",
    "created_at": "2013-05-21T17:18:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213544",
    "user": "https://github.com/vit-tucek"
}
```

<a id='comment:33'></a>
Attachment [trac_13735_fix_repr_lincomb.patch](tarball://root/attachments/some-uuid/ticket13735/trac_13735_fix_repr_lincomb.patch) by @vit-tucek created at 2013-05-21 17:18:36



---

archive/issue_comments_213545.json:
```json
{
    "body": "Changing author from \"Christian Stump, V\u00edt Tu\u010dek\" to \"V\u00edt Tu\u010dek\"",
    "created_at": "2013-05-22T12:33:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213545",
    "user": "https://github.com/vit-tucek"
}
```

Changing author from "Christian Stump, Vít Tuček" to "Vít Tuček"



---

archive/issue_comments_213546.json:
```json
{
    "body": "<a id='comment:35'></a>\nAndrey, can you review this again please?",
    "created_at": "2013-05-22T13:59:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213546",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:35'></a>
Andrey, can you review this again please?



---

archive/issue_comments_213547.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-05-22T15:36:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213547",
    "user": "https://github.com/novoselt"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_213548.json:
```json
{
    "body": "<a id='comment:36'></a>\nThe patch does not apply for me on 5.10-beta4 because of this hunk:\n\n```\n--- root_lattice_realizations.py\n+++ root_lattice_realizations.py\n@@ -1845,11 +1845,11 @@\n                  Arrow from (0.0,0.0) to (1.0,1.0),\n                  Text '$\\alpha_{1} + \\alpha_{2}$' at the point (1.05,1.05),\n                  Arrow from (0.0,0.0) to (-1.0,0.0),\n-                 Text '$\\left(-1\\right)\\alpha_{1}$' at the point (-1.05,0.0),\n+                 Text '$-\\alpha_{1}$' at the point (-1.05,0.0),\n                  Arrow from (0.0,0.0) to (0.0,-1.0),\n-                 Text '$\\left(-1\\right)\\alpha_{2}$' at the point (0.0,-1.05),\n+                 Text '$-\\alpha_{2}$' at the point (0.0,-1.05),\n                  Arrow from (0.0,0.0) to (-1.0,-1.0),\n-                 Text '$\\left(-1\\right)\\alpha_{1} + \\left(-1\\right)\\alpha_{2}$' at the point (-1.05,-1.05)]\n+                 Text '$-\\alpha_{1} - \\alpha_{2}$' at the point (-1.05,-1.05)]\n             \"\"\"\n             plot_options = self.plot_parse_options(**options)\n             root_lattice = self.root_system.root_lattice()\nsage/combinat/root_system/root_lattice_realizations.py.rej (END)\n```",
    "created_at": "2013-05-22T15:36:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213548",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:36'></a>
The patch does not apply for me on 5.10-beta4 because of this hunk:

```
--- root_lattice_realizations.py
+++ root_lattice_realizations.py
@@ -1845,11 +1845,11 @@
                  Arrow from (0.0,0.0) to (1.0,1.0),
                  Text '$\alpha_{1} + \alpha_{2}$' at the point (1.05,1.05),
                  Arrow from (0.0,0.0) to (-1.0,0.0),
-                 Text '$\left(-1\right)\alpha_{1}$' at the point (-1.05,0.0),
+                 Text '$-\alpha_{1}$' at the point (-1.05,0.0),
                  Arrow from (0.0,0.0) to (0.0,-1.0),
-                 Text '$\left(-1\right)\alpha_{2}$' at the point (0.0,-1.05),
+                 Text '$-\alpha_{2}$' at the point (0.0,-1.05),
                  Arrow from (0.0,0.0) to (-1.0,-1.0),
-                 Text '$\left(-1\right)\alpha_{1} + \left(-1\right)\alpha_{2}$' at the point (-1.05,-1.05)]
+                 Text '$-\alpha_{1} - \alpha_{2}$' at the point (-1.05,-1.05)]
             """
             plot_options = self.plot_parse_options(**options)
             root_lattice = self.root_system.root_lattice()
sage/combinat/root_system/root_lattice_realizations.py.rej (END)
```



---

archive/issue_comments_213549.json:
```json
{
    "body": "<a id='comment:37'></a>\nI've just tried it on a fresh beta4 install and it applied cleanly.",
    "created_at": "2013-05-22T15:59:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213549",
    "user": "https://github.com/vit-tucek"
}
```

<a id='comment:37'></a>
I've just tried it on a fresh beta4 install and it applied cleanly.



---

archive/issue_comments_213550.json:
```json
{
    "body": "Changing status from needs_work to needs_info.",
    "created_at": "2013-05-22T15:59:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213550",
    "user": "https://github.com/vit-tucek"
}
```

Changing status from needs_work to needs_info.



---

archive/issue_comments_213551.json:
```json
{
    "body": "<a id='comment:38'></a>\nDid you download it from trac? Maybe something got wrong while you were uploading it here?",
    "created_at": "2013-05-22T16:01:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213551",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:38'></a>
Did you download it from trac? Maybe something got wrong while you were uploading it here?



---

archive/issue_comments_213552.json:
```json
{
    "body": "<a id='comment:39'></a>\nYes, I downloaded it from trac.",
    "created_at": "2013-05-22T16:06:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213552",
    "user": "https://github.com/vit-tucek"
}
```

<a id='comment:39'></a>
Yes, I downloaded it from trac.



---

archive/issue_comments_213553.json:
```json
{
    "body": "<a id='comment:40'></a>\nI am still getting an error applying on beta4 without anything else. Can it be some caching issue that I am not getting the newest version of the patch? Does the hunk above seem to be correct at least?",
    "created_at": "2013-05-22T19:14:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213553",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:40'></a>
I am still getting an error applying on beta4 without anything else. Can it be some caching issue that I am not getting the newest version of the patch? Does the hunk above seem to be correct at least?



---

archive/issue_comments_213554.json:
```json
{
    "body": "<a id='comment:41'></a>\nI have no idea what might be the issue here. I've checked [http://trac.sagemath.org/sage_trac/ticket/4327](http://trac.sagemath.org/sage_trac/ticket/4327) and the patch there seems to agree with mine. I've downloaded & built another beta4 and applied it directly (i.e. patch -p1 < trac_13735_fix_repr_lincomb.patch) and it went without any problems.",
    "created_at": "2013-05-22T19:35:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213554",
    "user": "https://github.com/vit-tucek"
}
```

<a id='comment:41'></a>
I have no idea what might be the issue here. I've checked [http://trac.sagemath.org/sage_trac/ticket/4327](http://trac.sagemath.org/sage_trac/ticket/4327) and the patch there seems to agree with mine. I've downloaded & built another beta4 and applied it directly (i.e. patch -p1 < trac_13735_fix_repr_lincomb.patch) and it went without any problems.



---

archive/issue_comments_213555.json:
```json
{
    "body": "<a id='comment:42'></a>\nOK, my bad, sorry - I've messed up with symbolic links while switching to beta4, everything applies fine now, running tests!",
    "created_at": "2013-05-22T20:20:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213555",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:42'></a>
OK, my bad, sorry - I've messed up with symbolic links while switching to beta4, everything applies fine now, running tests!



---

archive/issue_comments_213556.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2013-05-22T20:20:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213556",
    "user": "https://github.com/novoselt"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_213557.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-05-22T20:40:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213557",
    "user": "https://github.com/novoselt"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_213558.json:
```json
{
    "body": "Merged: sage-5.10.beta5",
    "created_at": "2013-05-26T19:49:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213558",
    "user": "https://github.com/jdemeyer"
}
```

Merged: sage-5.10.beta5



---

archive/issue_events_044621.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-26T19:49:14Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13735#event-44621"
}
```



---

archive/issue_comments_213559.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-05-26T19:49:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13735#issuecomment-213559",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
