# Issue 13735: Fixing a bug in sage.misc.misc.coeff_repr

archive/issues_013531.json:
```json
{
    "assignees": [],
    "body": "Currently, we have\n\n```\nsage: alpha,beta,gamma=FreeAlgebra(ZZ,3,'alpha,beta,gamma').gens()\nsage: latex(alpha-beta)\n\\alpha + \\left(-1\\right)\\beta\n```\n\nThis patch turns this into\n\n```\nsage: alpha,beta,gamma=FreeAlgebra(ZZ,3,'alpha,beta,gamma').gens()\nsage: latex(alpha-beta)\n\\alpha - \\beta\n```\n\n**Apply** [attachment: trac_13735_fix_repr_lincomb.patch](https://github.com/sagemath/sage/files/ticket13735/trac_13735_fix_repr_lincomb.patch.gz)\n\nAssignee: **@sagetrac-sage-combinat**\n\nCC:  @fchapoton\n\nKeywords: **coefficient repr**\n\nReviewer: **Andrey Novoseltsev**\n\nAuthor: **V\u00edt Tu\u010dek**\n\nMerged: **sage-5.10.beta5**\n\nDependencies: **sage-5.10.beta4**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/13735_\n\n",
    "closed_at": "2013-05-26T19:49:14Z",
    "created_at": "2012-11-21T11:08:01Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.10",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Fixing a bug in sage.misc.misc.coeff_repr",
    "type": "issue",
    "updated_at": "2013-05-26T19:49:14Z",
    "url": "https://github.com/sagemath/sage/issues/13735",
    "user": "https://github.com/sagetrac-stumpc5"
}
```
Currently, we have

```
sage: alpha,beta,gamma=FreeAlgebra(ZZ,3,'alpha,beta,gamma').gens()
sage: latex(alpha-beta)
\alpha + \left(-1\right)\beta
```

This patch turns this into

```
sage: alpha,beta,gamma=FreeAlgebra(ZZ,3,'alpha,beta,gamma').gens()
sage: latex(alpha-beta)
\alpha - \beta
```

**Apply** [attachment: trac_13735_fix_repr_lincomb.patch](https://github.com/sagemath/sage/files/ticket13735/trac_13735_fix_repr_lincomb.patch.gz)

Assignee: **@sagetrac-sage-combinat**

CC:  @fchapoton

Keywords: **coefficient repr**

Reviewer: **Andrey Novoseltsev**

Author: **Vít Tuček**

Merged: **sage-5.10.beta5**

Dependencies: **sage-5.10.beta4**

_Issue created by migration from https://trac.sagemath.org/ticket/13735_





---

archive/issue_events_176551.json:
```json
{
    "actor": "https://github.com/sagetrac-stumpc5",
    "created_at": "2012-11-21T11:08:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "milestone_number": null,
    "milestone_title": "sage-5.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13735#event-176551"
}
```



---

archive/issue_events_176552.json:
```json
{
    "actor": "https://github.com/sagetrac-stumpc5",
    "created_at": "2012-11-21T11:08:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "component: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13735#event-176552"
}
```



---

archive/issue_events_176553.json:
```json
{
    "actor": "https://github.com/sagetrac-stumpc5",
    "created_at": "2012-11-21T11:08:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13735#event-176553"
}
```



---

archive/issue_events_176554.json:
```json
{
    "actor": "https://github.com/sagetrac-stumpc5",
    "created_at": "2012-11-21T11:08:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13735#event-176554"
}
```



---

archive/issue_events_176555.json:
```json
{
    "actor": "https://github.com/sagetrac-stumpc5",
    "created_at": "2012-11-21T11:11:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13735#event-176555"
}
```



---

archive/issue_comments_164010.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nReplying to [@sagetrac-stumpc5](#comment%3A1):\n\nThis one seems to not apply on 5.5.rc0 (while it does on 5.5.beta1). I am currently building rc0 and will fix this as soon as rc0 is ready on my machine.",
    "created_at": "2012-11-21T11:40:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164010",
    "user": "https://github.com/sagetrac-stumpc5"
}
```

<div id="comment:2" align="right">Comment 2</div>

Replying to [@sagetrac-stumpc5](#comment%3A1):

This one seems to not apply on 5.5.rc0 (while it does on 5.5.beta1). I am currently building rc0 and will fix this as soon as rc0 is ready on my machine.



---

archive/issue_comments_164011.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nAttachment: **[trac_13735-fix_bug_in_coef_repr-cs.patch.gz](https://github.com/sagemath/sage/files/ticket13735/trac_13735-fix_bug_in_coef_repr-cs.patch.gz)**\n\napply trac_13735-fix_bug_in_coef_repr-cs.patch",
    "created_at": "2012-11-21T13:08:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164011",
    "user": "https://github.com/sagetrac-stumpc5"
}
```

<div id="comment:3" align="right">Comment 3</div>

Attachment: **[trac_13735-fix_bug_in_coef_repr-cs.patch.gz](https://github.com/sagemath/sage/files/ticket13735/trac_13735-fix_bug_in_coef_repr-cs.patch.gz)**

apply trac_13735-fix_bug_in_coef_repr-cs.patch



---

archive/issue_comments_164012.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nAnd what about `alpha - 2 * beta`? It does not look like the patch would improve this.",
    "created_at": "2012-11-21T15:48:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164012",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:4" align="right">Comment 4</div>

And what about `alpha - 2 * beta`? It does not look like the patch would improve this.



---

archive/issue_comments_164013.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nReplying to [@novoselt](#comment%3A4):\n> And what about `alpha - 2 * beta`? It does not look like the patch would improve this.\n\nThis is very right. And I think you're right that the patch should not only handle one particular case (which I was catching in a completely different context).\n\nI will look into that...",
    "created_at": "2012-11-21T15:52:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164013",
    "user": "https://github.com/sagetrac-stumpc5"
}
```

<div id="comment:5" align="right">Comment 5</div>

Replying to [@novoselt](#comment%3A4):
> And what about `alpha - 2 * beta`? It does not look like the patch would improve this.

This is very right. And I think you're right that the patch should not only handle one particular case (which I was catching in a completely different context).

I will look into that...



---

archive/issue_comments_164014.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nI started playing, but whenever I solved some problem, I introduced another. Since this is not really urgent (and not really necessary for the ticket I am actually working on), I leave it open for now, and we can decide later what we want to do with it.\n\nBest, Christian",
    "created_at": "2012-11-21T18:38:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164014",
    "user": "https://github.com/sagetrac-stumpc5"
}
```

<div id="comment:6" align="right">Comment 6</div>

I started playing, but whenever I solved some problem, I introduced another. Since this is not really urgent (and not really necessary for the ticket I am actually working on), I leave it open for now, and we can decide later what we want to do with it.

Best, Christian



---

archive/issue_events_176556.json:
```json
{
    "actor": "https://github.com/sagetrac-stumpc5",
    "created_at": "2012-11-21T18:41:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13735#event-176556"
}
```



---

archive/issue_events_176557.json:
```json
{
    "actor": "https://github.com/sagetrac-stumpc5",
    "created_at": "2012-11-21T18:41:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13735#event-176557"
}
```



---

archive/issue_comments_164015.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nMy personal feeling is that latexing of expressions is disorganized in general and it is not clear how and where bugs have to be fixed, e.g. #13356 is much more serious than the issue here, but extra parentheses annoy me every once in while too, especially when with one ring all is OK and with another one not...",
    "created_at": "2012-11-21T19:16:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164015",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:8" align="right">Comment 8</div>

My personal feeling is that latexing of expressions is disorganized in general and it is not clear how and where bugs have to be fixed, e.g. #13356 is much more serious than the issue here, but extra parentheses annoy me every once in while too, especially when with one ring all is OK and with another one not...



---

archive/issue_comments_164016.json:
```json
{
    "body": "Attachment: **[trac_13735_fix_latex_repr_lincomb.patch.gz](https://github.com/sagemath/sage/files/ticket13735/trac_13735_fix_latex_repr_lincomb.patch.gz)**\n\nfix the representation of linear combinations and include more testcases",
    "created_at": "2013-04-08T13:28:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164016",
    "user": "https://github.com/vit-tucek"
}
```

Attachment: **[trac_13735_fix_latex_repr_lincomb.patch.gz](https://github.com/sagemath/sage/files/ticket13735/trac_13735_fix_latex_repr_lincomb.patch.gz)**

fix the representation of linear combinations and include more testcases



---

archive/issue_comments_164017.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nHi!\n\nScratching my own itch, I've changed the code for repr_lincomb to properly handle negative coefficients as well as zero. It required one change to how coeff_repr works which may cause problems. I've included testcases for repr_lincomb. \n\nIs there a way how can I test the rest of sage only for this specific change? I don't want to run all the numerical test which take quite a while on my machine.",
    "created_at": "2013-04-08T13:31:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164017",
    "user": "https://github.com/vit-tucek"
}
```

<div id="comment:9" align="right">Comment 9</div>

Hi!

Scratching my own itch, I've changed the code for repr_lincomb to properly handle negative coefficients as well as zero. It required one change to how coeff_repr works which may cause problems. I've included testcases for repr_lincomb. 

Is there a way how can I test the rest of sage only for this specific change? I don't want to run all the numerical test which take quite a while on my machine.



---

archive/issue_comments_164018.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nReplying to [@vit-tucek](#comment%3A9):\n> Hi!\n> \n> Scratching my own itch, I've changed the code for repr_lincomb to properly handle negative coefficients as well as zero. It required one change to how coeff_repr works which may cause problems. I've included testcases for repr_lincomb. \n\nfeel free to take over this patch if you like - I stopped working on it since solving one issue somewhere caused others in other places.\n\nTo see if your patch causes problems somewhere, you cannot do much that running the complete doctests...\n\nCheers, Christian",
    "created_at": "2013-04-08T15:46:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164018",
    "user": "https://github.com/sagetrac-stumpc5"
}
```

<div id="comment:10" align="right">Comment 10</div>

Replying to [@vit-tucek](#comment%3A9):
> Hi!
> 
> Scratching my own itch, I've changed the code for repr_lincomb to properly handle negative coefficients as well as zero. It required one change to how coeff_repr works which may cause problems. I've included testcases for repr_lincomb. 

feel free to take over this patch if you like - I stopped working on it since solving one issue somewhere caused others in other places.

To see if your patch causes problems somewhere, you cannot do much that running the complete doctests...

Cheers, Christian



---

archive/issue_comments_164019.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nFor future reference, this is the list of modules that fail after my patch. Some of these failures are clearly bugs (e.g.    /tmp/sage-5.8/devel/sage/sage/combinat/sf/hall_littlewood.py)\n\ndevel/sage/sage/structure/formal_sum.py \ndevel/sage/sage/rings/polynomial/plural.pyx \ndevel/sage/sage/modules/finite_submodule_iter.pyx\ndevel/sage/sage/combinat/free_module.py\ndevel/sage/sage/combinat/root_system/weyl_characters.py\ndevel/sage/sage/combinat/sf/llt.py\ndevel/sage/sage/combinat/sf/hall_littlewood.py\ndevel/sage/sage/combinat/sf/sfa.py\ndevel/sage/sage/combinat/sf/k_dual.py\ndevel/sage/sage/algebras/free_algebra_element.py\ndevel/sage/sage/algebras/group_algebra_new.py\ndevel/sage/sage/algebras/free_algebra_quotient_element.py\ndevel/sage/sage/algebras/iwahori_hecke_algebra.py\ndevel/sage/sage/algebras/steenrod/steenrod_algebra_mult.py\ndevel/sage/sage/algebras/steenrod/steenrod_algebra.py\ndevel/sage/sage/schemes/elliptic_curves/monsky_washnitzer.py\ndevel/sage/sage/schemes/generic/divisor.py\ndevel/sage/sage/modular/modsym/boundary.py",
    "created_at": "2013-04-08T17:20:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164019",
    "user": "https://github.com/vit-tucek"
}
```

<div id="comment:11" align="right">Comment 11</div>

For future reference, this is the list of modules that fail after my patch. Some of these failures are clearly bugs (e.g.    /tmp/sage-5.8/devel/sage/sage/combinat/sf/hall_littlewood.py)

devel/sage/sage/structure/formal_sum.py 
devel/sage/sage/rings/polynomial/plural.pyx 
devel/sage/sage/modules/finite_submodule_iter.pyx
devel/sage/sage/combinat/free_module.py
devel/sage/sage/combinat/root_system/weyl_characters.py
devel/sage/sage/combinat/sf/llt.py
devel/sage/sage/combinat/sf/hall_littlewood.py
devel/sage/sage/combinat/sf/sfa.py
devel/sage/sage/combinat/sf/k_dual.py
devel/sage/sage/algebras/free_algebra_element.py
devel/sage/sage/algebras/group_algebra_new.py
devel/sage/sage/algebras/free_algebra_quotient_element.py
devel/sage/sage/algebras/iwahori_hecke_algebra.py
devel/sage/sage/algebras/steenrod/steenrod_algebra_mult.py
devel/sage/sage/algebras/steenrod/steenrod_algebra.py
devel/sage/sage/schemes/elliptic_curves/monsky_washnitzer.py
devel/sage/sage/schemes/generic/divisor.py
devel/sage/sage/modular/modsym/boundary.py



---

archive/issue_comments_164020.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nCan we please have a space after the leading minus? Not `-x - x^2` but rather `- x - x^2` etc.",
    "created_at": "2013-04-08T20:25:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164020",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:12" align="right">Comment 12</div>

Can we please have a space after the leading minus? Not `-x - x^2` but rather `- x - x^2` etc.



---

archive/issue_comments_164021.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nSure. That's a trivial change.",
    "created_at": "2013-04-08T20:34:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164021",
    "user": "https://github.com/vit-tucek"
}
```

<div id="comment:13" align="right">Comment 13</div>

Sure. That's a trivial change.



---

archive/issue_comments_164022.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nI am in the middle of bugfixing right now. \n\n```\nsage: R.<q> = ZZ[]\nsage:  A2 = WeylCharacterRing(['A',2], base_ring = R, style=\"coroots\")\nsage: [A2(x) for x in [-1]]\n\n[-1*A2(0,0)]\n```\n\nThis is because the type of the coefficient -1 is sage.rings.polynomial.polynomial_integer_dense_flint.Polynomial_integer_dense_flint and the test c < 0 evaluates to False\n\nIs this a bug or intended behaviour?",
    "created_at": "2013-04-08T20:54:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164022",
    "user": "https://github.com/vit-tucek"
}
```

<div id="comment:14" align="right">Comment 14</div>

I am in the middle of bugfixing right now. 

```
sage: R.<q> = ZZ[]
sage:  A2 = WeylCharacterRing(['A',2], base_ring = R, style="coroots")
sage: [A2(x) for x in [-1]]

[-1*A2(0,0)]
```

This is because the type of the coefficient -1 is sage.rings.polynomial.polynomial_integer_dense_flint.Polynomial_integer_dense_flint and the test c < 0 evaluates to False

Is this a bug or intended behaviour?



---

archive/issue_comments_164023.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nSimilar issue arises in combinat/sf/llt.py, combinat/sf/k_dual.py and combinat/sf/hall_littlewood.py, where -t > 0 and type(-t) == sage.rings.fraction_field_element.FractionFieldElement_1poly_field\n\nI think this should be a bug since c=-t leads to \n\n```\n\nsage: c > 0 and -c > 0\n\nTrue\n```",
    "created_at": "2013-04-08T21:37:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164023",
    "user": "https://github.com/vit-tucek"
}
```

<div id="comment:15" align="right">Comment 15</div>

Similar issue arises in combinat/sf/llt.py, combinat/sf/k_dual.py and combinat/sf/hall_littlewood.py, where -t > 0 and type(-t) == sage.rings.fraction_field_element.FractionFieldElement_1poly_field

I think this should be a bug since c=-t leads to 

```

sage: c > 0 and -c > 0

True
```



---

archive/issue_comments_164024.json:
```json
{
    "body": "Attachment: **[failures.txt](https://github.com/sagemath/sage/files/ticket13735/failures.txt)**",
    "created_at": "2013-04-08T22:57:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164024",
    "user": "https://github.com/vit-tucek"
}
```

Attachment: **[failures.txt](https://github.com/sagemath/sage/files/ticket13735/failures.txt)**



---

archive/issue_comments_164025.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nI've hacked around the issues I mentioned and uploaded a bugfixed version of the patch. Right now I think that the only failures are due to the desired changes in output. Please see attached failures.txt and confirm  this.\n\nAs for the space after leading minus as suggested by novoselt -- it can be done easily, but a lot of doctests expects it to be not there; i.e. it would require more \"repairs\" to doctests than current version. I think we need broader agreement to put that space there.",
    "created_at": "2013-04-08T23:01:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164025",
    "user": "https://github.com/vit-tucek"
}
```

<div id="comment:16" align="right">Comment 16</div>

I've hacked around the issues I mentioned and uploaded a bugfixed version of the patch. Right now I think that the only failures are due to the desired changes in output. Please see attached failures.txt and confirm  this.

As for the space after leading minus as suggested by novoselt -- it can be done easily, but a lot of doctests expects it to be not there; i.e. it would require more "repairs" to doctests than current version. I think we need broader agreement to put that space there.



---

archive/issue_comments_164026.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nmake ptestlong in Sage 5.9 produced only the following error:\n\n\n```\n./sage sage -t --long devel/sage/sage/structure/sage_object.pyx\n  File \"sage\", line 31\n    resolvelinks() {\n                   ^\nSyntaxError: invalid syntax\n\n```\n\nThus my patch is still valid.",
    "created_at": "2013-05-15T16:47:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164026",
    "user": "https://github.com/vit-tucek"
}
```

<div id="comment:17" align="right">Comment 17</div>

make ptestlong in Sage 5.9 produced only the following error:


```
./sage sage -t --long devel/sage/sage/structure/sage_object.pyx
  File "sage", line 31
    resolvelinks() {
                   ^
SyntaxError: invalid syntax

```

Thus my patch is still valid.



---

archive/issue_comments_164027.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nIs the last patch the only one that has to be applied? It should also list your full name in the header, and if this is ready for review - please add your name to the authors and switch to \"needs review\"!",
    "created_at": "2013-05-15T18:27:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164027",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:18" align="right">Comment 18</div>

Is the last patch the only one that has to be applied? It should also list your full name in the header, and if this is ready for review - please add your name to the authors and switch to "needs review"!



---

archive/issue_events_176558.json:
```json
{
    "actor": "https://github.com/vit-tucek",
    "created_at": "2013-05-15T18:51:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13735#event-176558"
}
```



---

archive/issue_events_176559.json:
```json
{
    "actor": "https://github.com/vit-tucek",
    "created_at": "2013-05-15T18:51:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13735#event-176559"
}
```



---

archive/issue_comments_164028.json:
```json
{
    "body": "Changed author from **Christian Stump** to **Christian Stump, V\u00edt Tu\u010dek**",
    "created_at": "2013-05-15T18:51:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164028",
    "user": "https://github.com/vit-tucek"
}
```

Changed author from **Christian Stump** to **Christian Stump, Vít Tuček**



---

archive/issue_comments_164029.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nYes. The last patch is the only one to be applied.",
    "created_at": "2013-05-15T18:51:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164029",
    "user": "https://github.com/vit-tucek"
}
```

<div id="comment:19" align="right">Comment 19</div>

Yes. The last patch is the only one to be applied.



---

archive/issue_comments_164030.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -14,3 +14,4 @@\n \\alpha - \\beta\n ```\n \n+**Apply** [attachment: trac_13735_fix_repr_lincomb.patch](https://github.com/sagemath/sage/files/ticket13735/trac_13735_fix_repr_lincomb.patch.gz)\n``````\n",
    "created_at": "2013-05-15T18:53:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164030",
    "user": "https://github.com/novoselt"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -14,3 +14,4 @@
 \alpha - \beta
 ```
 
+**Apply** [attachment: trac_13735_fix_repr_lincomb.patch](https://github.com/sagemath/sage/files/ticket13735/trac_13735_fix_repr_lincomb.patch.gz)
``````




---

archive/issue_comments_164031.json:
```json
{
    "body": "Reviewer: **Andrey Novoseltsev**",
    "created_at": "2013-05-15T20:50:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164031",
    "user": "https://github.com/novoselt"
}
```

Reviewer: **Andrey Novoseltsev**



---

archive/issue_events_176560.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2013-05-15T20:50:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13735#event-176560"
}
```



---

archive/issue_events_176561.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2013-05-15T20:50:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13735#event-176561"
}
```



---

archive/issue_events_176562.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-16T06:22:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13735#event-176562"
}
```



---

archive/issue_events_176563.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-16T06:22:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13735#event-176563"
}
```



---

archive/issue_comments_164032.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nCould this have caused\n\n```\nsage -t --long devel/sage/sage/modular/modsym/boundary.py\n**********************************************************************\nFile \"devel/sage/sage/modular/modsym/boundary.py\", line 1299, in sage.modular.modsym.boundary.BoundarySpace_wtk_eps._coerce_cusp\nFailed example:\n    [ B(Cusp(i,13)) for i in range(13) ]\nExpected:\n    [[0],\n    [1/13],\n    (-zeta4)*[1/13],\n    [1/13],\n    (-1)*[1/13],\n    (-zeta4)*[1/13],\n    (-zeta4)*[1/13],\n    zeta4*[1/13],\n    zeta4*[1/13],\n    [1/13],\n    (-1)*[1/13],\n    zeta4*[1/13],\n    (-1)*[1/13]]\nGot:\n    [[0], [1/13], -zeta4*[1/13], [1/13], -[1/13], -zeta4*[1/13], -zeta4*[1/13], zeta4*[1/13], zeta4*[1/13], [1/13], -[1/13], zeta4*[1/13], -[1/13]]\n**********************************************************************\nFile \"devel/sage/sage/modular/modsym/boundary.py\", line 1323, in sage.modular.modsym.boundary.BoundarySpace_wtk_eps._coerce_cusp\nFailed example:\n    [ B(Cusp(i,13)) for i in range(13) ]\nExpected:\n    [0,\n    [1/13],\n    (-zeta4)*[1/13],\n    [1/13],\n    (-1)*[1/13],\n    (-zeta4)*[1/13],\n    (-zeta4)*[1/13],\n    zeta4*[1/13],\n    zeta4*[1/13],\n    [1/13],\n    (-1)*[1/13],\n    zeta4*[1/13],\n    (-1)*[1/13]]\nGot:\n    [0, [1/13], -zeta4*[1/13], [1/13], -[1/13], -zeta4*[1/13], -zeta4*[1/13], zeta4*[1/13], zeta4*[1/13], [1/13], -[1/13], zeta4*[1/13], -[1/13]]\n**********************************************************************\n```\n\n```\nsage -t --long devel/sage/sage/modular/modsym/ambient.py\n**********************************************************************\nFile \"devel/sage/sage/modular/modsym/ambient.py\", line 2100, in sage.modular.modsym.ambient.ModularSymbolsAmbient.twisted_winding_element\nFailed example:\n    M.twisted_winding_element(0,eps)\nExpected:\n    2*(1,23) + (-2)*(1,32) + 2*(1,34)\nGot:\n    2*(1,23) - 2*(1,32) + 2*(1,34)\n**********************************************************************\n```\n\n```\n**********************************************************************\nFile \"devel/sage/sage/tests/book_schilling_zabrocki_kschur_primer.py\", line 571, in sage.tests.book_schilling_zabrocki_kschur_primer\nFailed example:\n    p(ks3z[2, 2, 2, 2, 2, 2, 2, 2])     # long time (17s on sage.math, 2013)\nExpected:\n    1/12*p[4, 4, 4, 4] + 1/4*p[8, 8] + (-1/3)*p[12, 4]\nGot:\n    1/12*p[4, 4, 4, 4] + 1/4*p[8, 8] - 1/3*p[12, 4]\n**********************************************************************\nFile \"devel/sage/sage/tests/book_schilling_zabrocki_kschur_primer.py\", line 573, in sage.tests.book_schilling_zabrocki_kschur_primer\nFailed example:\n    p(ks3[2,2])\nExpected:\n    1/12*p[1, 1, 1, 1] + 1/4*p[2, 2] + (-1/3)*p[3, 1]\nGot:\n    1/12*p[1, 1, 1, 1] + 1/4*p[2, 2] - 1/3*p[3, 1]\n**********************************************************************\nFile \"devel/sage/sage/tests/book_schilling_zabrocki_kschur_primer.py\", line 575, in sage.tests.book_schilling_zabrocki_kschur_primer\nFailed example:\n    p(ks3[2,2]).plethysm(p[4])\nExpected:\n    1/12*p[4, 4, 4, 4] + 1/4*p[8, 8] + (-1/3)*p[12, 4]\nGot:\n    1/12*p[4, 4, 4, 4] + 1/4*p[8, 8] - 1/3*p[12, 4]\n**********************************************************************\n```",
    "created_at": "2013-05-16T06:22:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164032",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:22" align="right">Comment 22</div>

Could this have caused

```
sage -t --long devel/sage/sage/modular/modsym/boundary.py
**********************************************************************
File "devel/sage/sage/modular/modsym/boundary.py", line 1299, in sage.modular.modsym.boundary.BoundarySpace_wtk_eps._coerce_cusp
Failed example:
    [ B(Cusp(i,13)) for i in range(13) ]
Expected:
    [[0],
    [1/13],
    (-zeta4)*[1/13],
    [1/13],
    (-1)*[1/13],
    (-zeta4)*[1/13],
    (-zeta4)*[1/13],
    zeta4*[1/13],
    zeta4*[1/13],
    [1/13],
    (-1)*[1/13],
    zeta4*[1/13],
    (-1)*[1/13]]
Got:
    [[0], [1/13], -zeta4*[1/13], [1/13], -[1/13], -zeta4*[1/13], -zeta4*[1/13], zeta4*[1/13], zeta4*[1/13], [1/13], -[1/13], zeta4*[1/13], -[1/13]]
**********************************************************************
File "devel/sage/sage/modular/modsym/boundary.py", line 1323, in sage.modular.modsym.boundary.BoundarySpace_wtk_eps._coerce_cusp
Failed example:
    [ B(Cusp(i,13)) for i in range(13) ]
Expected:
    [0,
    [1/13],
    (-zeta4)*[1/13],
    [1/13],
    (-1)*[1/13],
    (-zeta4)*[1/13],
    (-zeta4)*[1/13],
    zeta4*[1/13],
    zeta4*[1/13],
    [1/13],
    (-1)*[1/13],
    zeta4*[1/13],
    (-1)*[1/13]]
Got:
    [0, [1/13], -zeta4*[1/13], [1/13], -[1/13], -zeta4*[1/13], -zeta4*[1/13], zeta4*[1/13], zeta4*[1/13], [1/13], -[1/13], zeta4*[1/13], -[1/13]]
**********************************************************************
```

```
sage -t --long devel/sage/sage/modular/modsym/ambient.py
**********************************************************************
File "devel/sage/sage/modular/modsym/ambient.py", line 2100, in sage.modular.modsym.ambient.ModularSymbolsAmbient.twisted_winding_element
Failed example:
    M.twisted_winding_element(0,eps)
Expected:
    2*(1,23) + (-2)*(1,32) + 2*(1,34)
Got:
    2*(1,23) - 2*(1,32) + 2*(1,34)
**********************************************************************
```

```
**********************************************************************
File "devel/sage/sage/tests/book_schilling_zabrocki_kschur_primer.py", line 571, in sage.tests.book_schilling_zabrocki_kschur_primer
Failed example:
    p(ks3z[2, 2, 2, 2, 2, 2, 2, 2])     # long time (17s on sage.math, 2013)
Expected:
    1/12*p[4, 4, 4, 4] + 1/4*p[8, 8] + (-1/3)*p[12, 4]
Got:
    1/12*p[4, 4, 4, 4] + 1/4*p[8, 8] - 1/3*p[12, 4]
**********************************************************************
File "devel/sage/sage/tests/book_schilling_zabrocki_kschur_primer.py", line 573, in sage.tests.book_schilling_zabrocki_kschur_primer
Failed example:
    p(ks3[2,2])
Expected:
    1/12*p[1, 1, 1, 1] + 1/4*p[2, 2] + (-1/3)*p[3, 1]
Got:
    1/12*p[1, 1, 1, 1] + 1/4*p[2, 2] - 1/3*p[3, 1]
**********************************************************************
File "devel/sage/sage/tests/book_schilling_zabrocki_kschur_primer.py", line 575, in sage.tests.book_schilling_zabrocki_kschur_primer
Failed example:
    p(ks3[2,2]).plethysm(p[4])
Expected:
    1/12*p[4, 4, 4, 4] + 1/4*p[8, 8] + (-1/3)*p[12, 4]
Got:
    1/12*p[4, 4, 4, 4] + 1/4*p[8, 8] - 1/3*p[12, 4]
**********************************************************************
```



---

archive/issue_comments_164033.json:
```json
{
    "body": "Dependencies: **#4327**",
    "created_at": "2013-05-16T06:29:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164033",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#4327**



---

archive/issue_comments_164034.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nWith #4327:\n\n```\nsage -t devel/sage/sage/combinat/root_system/root_lattice_realizations.py\n**********************************************************************\nFile \"devel/sage/sage/combinat/root_system/root_lattice_realizations.py\", line 1840, in sage.combinat.root_system.root_lattice_realizations.RootLatticeRealizations.Pare\nntMethods.plot_roots\nFailed example:\n    list(RootSystem([\"A\",2]).root_lattice().plot_roots(\"all\"))\nExpected:\n    [Arrow from (0.0,0.0) to (1.0,0.0),\n     Text '$\\alpha_{1}$' at the point (1.05,0.0),\n     Arrow from (0.0,0.0) to (0.0,1.0),\n     Text '$\\alpha_{2}$' at the point (0.0,1.05),\n     Arrow from (0.0,0.0) to (1.0,1.0),\n     Text '$\\alpha_{1} + \\alpha_{2}$' at the point (1.05,1.05),\n     Arrow from (0.0,0.0) to (-1.0,0.0),\n     Text '$\\left(-1\\right)\\alpha_{1}$' at the point (-1.05,0.0),\n     Arrow from (0.0,0.0) to (0.0,-1.0),\n     Text '$\\left(-1\\right)\\alpha_{2}$' at the point (0.0,-1.05),\n     Arrow from (0.0,0.0) to (-1.0,-1.0),\n     Text '$\\left(-1\\right)\\alpha_{1} + \\left(-1\\right)\\alpha_{2}$' at the point (-1.05,-1.05)]\nGot:\n    [Arrow from (0.0,0.0) to (1.0,0.0), Text '$\\alpha_{1}$' at the point (1.05,0.0), Arrow from (0.0,0.0) to (0.0,1.0), Text '$\\alpha_{2}$' at the point (0.0,1.05), Arr\now from (0.0,0.0) to (1.0,1.0), Text '$\\alpha_{1} + \\alpha_{2}$' at the point (1.05,1.05), Arrow from (0.0,0.0) to (-1.0,0.0), Text '$-\\alpha_{1}$' at the point (-1.05,\n0.0), Arrow from (0.0,0.0) to (0.0,-1.0), Text '$-\\alpha_{2}$' at the point (0.0,-1.05), Arrow from (0.0,0.0) to (-1.0,-1.0), Text '$-\\alpha_{1} - \\alpha_{2}$' at the p\noint (-1.05,-1.05)]\n**********************************************************************\n```",
    "created_at": "2013-05-16T06:29:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164034",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:23" align="right">Comment 23</div>

With #4327:

```
sage -t devel/sage/sage/combinat/root_system/root_lattice_realizations.py
**********************************************************************
File "devel/sage/sage/combinat/root_system/root_lattice_realizations.py", line 1840, in sage.combinat.root_system.root_lattice_realizations.RootLatticeRealizations.Pare
ntMethods.plot_roots
Failed example:
    list(RootSystem(["A",2]).root_lattice().plot_roots("all"))
Expected:
    [Arrow from (0.0,0.0) to (1.0,0.0),
     Text '$\alpha_{1}$' at the point (1.05,0.0),
     Arrow from (0.0,0.0) to (0.0,1.0),
     Text '$\alpha_{2}$' at the point (0.0,1.05),
     Arrow from (0.0,0.0) to (1.0,1.0),
     Text '$\alpha_{1} + \alpha_{2}$' at the point (1.05,1.05),
     Arrow from (0.0,0.0) to (-1.0,0.0),
     Text '$\left(-1\right)\alpha_{1}$' at the point (-1.05,0.0),
     Arrow from (0.0,0.0) to (0.0,-1.0),
     Text '$\left(-1\right)\alpha_{2}$' at the point (0.0,-1.05),
     Arrow from (0.0,0.0) to (-1.0,-1.0),
     Text '$\left(-1\right)\alpha_{1} + \left(-1\right)\alpha_{2}$' at the point (-1.05,-1.05)]
Got:
    [Arrow from (0.0,0.0) to (1.0,0.0), Text '$\alpha_{1}$' at the point (1.05,0.0), Arrow from (0.0,0.0) to (0.0,1.0), Text '$\alpha_{2}$' at the point (0.0,1.05), Arr
ow from (0.0,0.0) to (1.0,1.0), Text '$\alpha_{1} + \alpha_{2}$' at the point (1.05,1.05), Arrow from (0.0,0.0) to (-1.0,0.0), Text '$-\alpha_{1}$' at the point (-1.05,
0.0), Arrow from (0.0,0.0) to (0.0,-1.0), Text '$-\alpha_{2}$' at the point (0.0,-1.05), Arrow from (0.0,0.0) to (-1.0,-1.0), Text '$-\alpha_{1} - \alpha_{2}$' at the p
oint (-1.05,-1.05)]
**********************************************************************
```



---

archive/issue_comments_164035.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nThe only bug I see is the change from [0] to 0, otherwise it is the correct behaviour. If you disagree, then we need to figure out what exactly `_is_` the expected behaviour of rep().\n\nRegarding the first issue - my version of sage (5.9 + my patch) does not raise any errors. Where can I get the code to debug this?",
    "created_at": "2013-05-16T07:30:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164035",
    "user": "https://github.com/vit-tucek"
}
```

<div id="comment:24" align="right">Comment 24</div>

The only bug I see is the change from [0] to 0, otherwise it is the correct behaviour. If you disagree, then we need to figure out what exactly `_is_` the expected behaviour of rep().

Regarding the first issue - my version of sage (5.9 + my patch) does not raise any errors. Where can I get the code to debug this?



---

archive/issue_comments_164036.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nSorry, I mangled two testcases together. So it's again just the question of replacing (-1)* by  unary minus and replacing (-x)* by -x* which I think is correct.",
    "created_at": "2013-05-16T07:33:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164036",
    "user": "https://github.com/vit-tucek"
}
```

<div id="comment:25" align="right">Comment 25</div>

Sorry, I mangled two testcases together. So it's again just the question of replacing (-1)* by  unary minus and replacing (-x)* by -x* which I think is correct.



---

archive/issue_comments_164037.json:
```json
{
    "body": "Changed dependencies from **#4327** to **sage-5.10.beta4**",
    "created_at": "2013-05-16T08:40:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164037",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#4327** to **sage-5.10.beta4**



---

archive/issue_comments_164038.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nYou're right about tests passing on sage-5.9 (and even sage-5.10.beta3). I recommend you to wait for sage-5.10.beta4 and then rebase to that.",
    "created_at": "2013-05-16T08:40:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164038",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:26" align="right">Comment 26</div>

You're right about tests passing on sage-5.9 (and even sage-5.10.beta3). I recommend you to wait for sage-5.10.beta4 and then rebase to that.



---

archive/issue_comments_164039.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\nCan I somehow get notified when sage reaches beta4? This patch lies here for 5 weeks and could have made it into 5.9 if I knew that one has to change the status to needs_review. (Developer's guide is somehow lacking in this regard.)",
    "created_at": "2013-05-16T08:47:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164039",
    "user": "https://github.com/vit-tucek"
}
```

<div id="comment:27" align="right">Comment 27</div>

Can I somehow get notified when sage reaches beta4? This patch lies here for 5 weeks and could have made it into 5.9 if I knew that one has to change the status to needs_review. (Developer's guide is somehow lacking in this regard.)



---

archive/issue_comments_164040.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nReplying to [@vit-tucek](#comment%3A27):\n> Can I somehow get notified when sage reaches beta4?\n\nI will personally notify you.",
    "created_at": "2013-05-16T08:51:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164040",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:28" align="right">Comment 28</div>

Replying to [@vit-tucek](#comment%3A27):
> Can I somehow get notified when sage reaches beta4?

I will personally notify you.



---

archive/issue_comments_164041.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nThanks. So just to be clear, the plan is to wait for 5.10 beta4 and then fix all the docstrings or possible bugs and turn the status of this patch to needs_review?",
    "created_at": "2013-05-16T08:56:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164041",
    "user": "https://github.com/vit-tucek"
}
```

<div id="comment:29" align="right">Comment 29</div>

Thanks. So just to be clear, the plan is to wait for 5.10 beta4 and then fix all the docstrings or possible bugs and turn the status of this patch to needs_review?



---

archive/issue_comments_164042.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\nReplying to [@vit-tucek](#comment%3A29):\n> Thanks. So just to be clear, the plan is to wait for 5.10 beta4 and then fix all the docstrings or possible bugs and turn the status of this patch to needs_review?\n\nYes, exactly.",
    "created_at": "2013-05-16T09:18:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164042",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:30" align="right">Comment 30</div>

Replying to [@vit-tucek](#comment%3A29):
> Thanks. So just to be clear, the plan is to wait for 5.10 beta4 and then fix all the docstrings or possible bugs and turn the status of this patch to needs_review?

Yes, exactly.



---

archive/issue_comments_164043.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nReplying to [@jdemeyer](#comment%3A23):\n> With #4327:\n> \n> ```\n>      ...\n>      Text '$\\left(-1\\right)\\alpha_{1} + \\left(-1\\right)\\alpha_{2}$' at the point (-1.05,-1.05)]\n> Got:\n>      Text '$-\\alpha_{1} - \\alpha_{2}$' at the point (-1.05,-1.05)]\n> ```\n\nSorry for the little conflict, and thank you for improving the output\nof root system plots :-)",
    "created_at": "2013-05-16T13:10:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164043",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:31" align="right">Comment 31</div>

Replying to [@jdemeyer](#comment%3A23):
> With #4327:
> 
> ```
>      ...
>      Text '$\left(-1\right)\alpha_{1} + \left(-1\right)\alpha_{2}$' at the point (-1.05,-1.05)]
> Got:
>      Text '$-\alpha_{1} - \alpha_{2}$' at the point (-1.05,-1.05)]
> ```

Sorry for the little conflict, and thank you for improving the output
of root system plots :-)



---

archive/issue_comments_164044.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\nsage-5.10.beta4 has been released, you should rebase this patch.",
    "created_at": "2013-05-21T06:55:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164044",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:32" align="right">Comment 32</div>

sage-5.10.beta4 has been released, you should rebase this patch.



---

archive/issue_comments_164045.json:
```json
{
    "body": "final version tested on top of 5.10-beta4",
    "created_at": "2013-05-21T17:17:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164045",
    "user": "https://github.com/vit-tucek"
}
```

final version tested on top of 5.10-beta4



---

archive/issue_events_176564.json:
```json
{
    "actor": "https://github.com/vit-tucek",
    "created_at": "2013-05-21T17:18:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13735#event-176564"
}
```



---

archive/issue_events_176565.json:
```json
{
    "actor": "https://github.com/vit-tucek",
    "created_at": "2013-05-21T17:18:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13735#event-176565"
}
```



---

archive/issue_comments_164046.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\nAttachment: **[trac_13735_fix_repr_lincomb.patch.gz](https://github.com/sagemath/sage/files/ticket13735/trac_13735_fix_repr_lincomb.patch.gz)**",
    "created_at": "2013-05-21T17:18:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164046",
    "user": "https://github.com/vit-tucek"
}
```

<div id="comment:33" align="right">Comment 33</div>

Attachment: **[trac_13735_fix_repr_lincomb.patch.gz](https://github.com/sagemath/sage/files/ticket13735/trac_13735_fix_repr_lincomb.patch.gz)**



---

archive/issue_comments_164047.json:
```json
{
    "body": "Changed author from **Christian Stump, V\u00edt Tu\u010dek** to **V\u00edt Tu\u010dek**",
    "created_at": "2013-05-22T12:33:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164047",
    "user": "https://github.com/vit-tucek"
}
```

Changed author from **Christian Stump, Vít Tuček** to **Vít Tuček**



---

archive/issue_comments_164048.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">Comment 35</div>\n\nAndrey, can you review this again please?",
    "created_at": "2013-05-22T13:59:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164048",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:35" align="right">Comment 35</div>

Andrey, can you review this again please?



---

archive/issue_events_176566.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2013-05-22T15:36:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13735#event-176566"
}
```



---

archive/issue_events_176567.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2013-05-22T15:36:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13735#event-176567"
}
```



---

archive/issue_comments_164049.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">Comment 36</div>\n\nThe patch does not apply for me on 5.10-beta4 because of this hunk:\n\n```\n--- root_lattice_realizations.py\n+++ root_lattice_realizations.py\n@@ -1845,11 +1845,11 @@\n                  Arrow from (0.0,0.0) to (1.0,1.0),\n                  Text '$\\alpha_{1} + \\alpha_{2}$' at the point (1.05,1.05),\n                  Arrow from (0.0,0.0) to (-1.0,0.0),\n-                 Text '$\\left(-1\\right)\\alpha_{1}$' at the point (-1.05,0.0),\n+                 Text '$-\\alpha_{1}$' at the point (-1.05,0.0),\n                  Arrow from (0.0,0.0) to (0.0,-1.0),\n-                 Text '$\\left(-1\\right)\\alpha_{2}$' at the point (0.0,-1.05),\n+                 Text '$-\\alpha_{2}$' at the point (0.0,-1.05),\n                  Arrow from (0.0,0.0) to (-1.0,-1.0),\n-                 Text '$\\left(-1\\right)\\alpha_{1} + \\left(-1\\right)\\alpha_{2}$' at the point (-1.05,-1.05)]\n+                 Text '$-\\alpha_{1} - \\alpha_{2}$' at the point (-1.05,-1.05)]\n             \"\"\"\n             plot_options = self.plot_parse_options(**options)\n             root_lattice = self.root_system.root_lattice()\nsage/combinat/root_system/root_lattice_realizations.py.rej (END)\n```",
    "created_at": "2013-05-22T15:36:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164049",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:36" align="right">Comment 36</div>

The patch does not apply for me on 5.10-beta4 because of this hunk:

```
--- root_lattice_realizations.py
+++ root_lattice_realizations.py
@@ -1845,11 +1845,11 @@
                  Arrow from (0.0,0.0) to (1.0,1.0),
                  Text '$\alpha_{1} + \alpha_{2}$' at the point (1.05,1.05),
                  Arrow from (0.0,0.0) to (-1.0,0.0),
-                 Text '$\left(-1\right)\alpha_{1}$' at the point (-1.05,0.0),
+                 Text '$-\alpha_{1}$' at the point (-1.05,0.0),
                  Arrow from (0.0,0.0) to (0.0,-1.0),
-                 Text '$\left(-1\right)\alpha_{2}$' at the point (0.0,-1.05),
+                 Text '$-\alpha_{2}$' at the point (0.0,-1.05),
                  Arrow from (0.0,0.0) to (-1.0,-1.0),
-                 Text '$\left(-1\right)\alpha_{1} + \left(-1\right)\alpha_{2}$' at the point (-1.05,-1.05)]
+                 Text '$-\alpha_{1} - \alpha_{2}$' at the point (-1.05,-1.05)]
             """
             plot_options = self.plot_parse_options(**options)
             root_lattice = self.root_system.root_lattice()
sage/combinat/root_system/root_lattice_realizations.py.rej (END)
```



---

archive/issue_comments_164050.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">Comment 37</div>\n\nI've just tried it on a fresh beta4 install and it applied cleanly.",
    "created_at": "2013-05-22T15:59:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164050",
    "user": "https://github.com/vit-tucek"
}
```

<div id="comment:37" align="right">Comment 37</div>

I've just tried it on a fresh beta4 install and it applied cleanly.



---

archive/issue_events_176568.json:
```json
{
    "actor": "https://github.com/vit-tucek",
    "created_at": "2013-05-22T15:59:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13735#event-176568"
}
```



---

archive/issue_events_176569.json:
```json
{
    "actor": "https://github.com/vit-tucek",
    "created_at": "2013-05-22T15:59:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13735#event-176569"
}
```



---

archive/issue_comments_164051.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">Comment 38</div>\n\nDid you download it from trac? Maybe something got wrong while you were uploading it here?",
    "created_at": "2013-05-22T16:01:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164051",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:38" align="right">Comment 38</div>

Did you download it from trac? Maybe something got wrong while you were uploading it here?



---

archive/issue_comments_164052.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">Comment 39</div>\n\nYes, I downloaded it from trac.",
    "created_at": "2013-05-22T16:06:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164052",
    "user": "https://github.com/vit-tucek"
}
```

<div id="comment:39" align="right">Comment 39</div>

Yes, I downloaded it from trac.



---

archive/issue_comments_164053.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">Comment 40</div>\n\nI am still getting an error applying on beta4 without anything else. Can it be some caching issue that I am not getting the newest version of the patch? Does the hunk above seem to be correct at least?",
    "created_at": "2013-05-22T19:14:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164053",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:40" align="right">Comment 40</div>

I am still getting an error applying on beta4 without anything else. Can it be some caching issue that I am not getting the newest version of the patch? Does the hunk above seem to be correct at least?



---

archive/issue_comments_164054.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">Comment 41</div>\n\nI have no idea what might be the issue here. I've checked [https://github.com/sagemath/sage/issues/4327](https://github.com/sagemath/sage/issues/4327) and the patch there seems to agree with mine. I've downloaded & built another beta4 and applied it directly (i.e. patch -p1 < trac_13735_fix_repr_lincomb.patch) and it went without any problems.",
    "created_at": "2013-05-22T19:35:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164054",
    "user": "https://github.com/vit-tucek"
}
```

<div id="comment:41" align="right">Comment 41</div>

I have no idea what might be the issue here. I've checked [https://github.com/sagemath/sage/issues/4327](https://github.com/sagemath/sage/issues/4327) and the patch there seems to agree with mine. I've downloaded & built another beta4 and applied it directly (i.e. patch -p1 < trac_13735_fix_repr_lincomb.patch) and it went without any problems.



---

archive/issue_comments_164055.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">Comment 42</div>\n\nOK, my bad, sorry - I've messed up with symbolic links while switching to beta4, everything applies fine now, running tests!",
    "created_at": "2013-05-22T20:20:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164055",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:42" align="right">Comment 42</div>

OK, my bad, sorry - I've messed up with symbolic links while switching to beta4, everything applies fine now, running tests!



---

archive/issue_events_176570.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2013-05-22T20:20:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13735#event-176570"
}
```



---

archive/issue_events_176571.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2013-05-22T20:20:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13735#event-176571"
}
```



---

archive/issue_events_176572.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2013-05-22T20:40:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13735#event-176572"
}
```



---

archive/issue_events_176573.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2013-05-22T20:40:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13735#event-176573"
}
```



---

archive/issue_comments_164056.json:
```json
{
    "body": "Merged: **sage-5.10.beta5**",
    "created_at": "2013-05-26T19:49:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13735#issuecomment-164056",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.10.beta5**



---

archive/issue_events_176574.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-26T19:49:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13735#event-176574"
}
```



---

archive/issue_events_176575.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-26T19:49:14Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/13735",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13735#event-176575"
}
```
