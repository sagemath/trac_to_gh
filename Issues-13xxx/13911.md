# Issue 13911: Updated doc tests for k-Schur function and affine Schubert calculus book

archive/issues_013707.json:
```json
{
    "assignees": [
        "https://github.com/sagetrac-sage-combinat"
    ],
    "body": "This patch updates the doctests in the book \"k-Schur functions and affine Schubert calculus\" written by Thomas Lam, Luc Lapointe, Jennifer Morse, Anne Schilling, Mark Shimozono, Mike Zabrocki. It uses features implemented in #13762.\n\nDepends on #13762\n\nCC:  @sagetrac-sage-combinat @zabrocki\n\nKeywords: **symmetric functions, book**\n\nReviewer: **Mike Zabrocki, Anne Schilling**\n\nAuthor: **Anne Schilling, Mike Zabrocki**\n\nMerged: **sage-5.6.beta3**\n\nComponent: **combinatorics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/13911_\n\n",
    "closed_at": "2013-01-09T08:59:35Z",
    "created_at": "2013-01-04T16:57:52Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Updated doc tests for k-Schur function and affine Schubert calculus book",
    "type": "issue",
    "updated_at": "2013-01-09T08:59:35Z",
    "url": "https://github.com/sagemath/sage/issues/13911",
    "user": "https://github.com/anneschilling"
}
```
This patch updates the doctests in the book "k-Schur functions and affine Schubert calculus" written by Thomas Lam, Luc Lapointe, Jennifer Morse, Anne Schilling, Mark Shimozono, Mike Zabrocki. It uses features implemented in #13762.

Depends on #13762

CC:  @sagetrac-sage-combinat @zabrocki

Keywords: **symmetric functions, book**

Reviewer: **Mike Zabrocki, Anne Schilling**

Author: **Anne Schilling, Mike Zabrocki**

Merged: **sage-5.6.beta3**

Component: **combinatorics**

_Issue created by migration from https://trac.sagemath.org/ticket/13911_





---

archive/issue_events_196185.json:
```json
{
    "actor": "https://github.com/anneschilling",
    "created_at": "2013-01-04T16:57:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13911",
    "milestone_number": null,
    "milestone_title": "sage-5.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13911#event-196185"
}
```



---

archive/issue_events_196186.json:
```json
{
    "actor": "https://github.com/anneschilling",
    "created_at": "2013-01-04T16:57:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13911",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13911#event-196186"
}
```



---

archive/issue_events_196187.json:
```json
{
    "actor": "https://github.com/anneschilling",
    "created_at": "2013-01-04T16:57:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13911",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13911#event-196187"
}
```



---

archive/issue_events_196188.json:
```json
{
    "actor": "https://github.com/anneschilling",
    "created_at": "2013-01-04T16:57:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13911",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13911#event-196188"
}
```



---

archive/issue_events_196189.json:
```json
{
    "actor": "https://github.com/sagetrac-sage-combinat",
    "created_at": "2013-01-04T16:57:52Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/13911",
    "subject": "https://github.com/anneschilling",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13911#event-196189"
}
```



---

archive/issue_events_196190.json:
```json
{
    "actor": "https://github.com/anneschilling",
    "created_at": "2013-01-04T17:32:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13911",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13911#event-196190"
}
```



---

archive/issue_events_196191.json:
```json
{
    "actor": "https://github.com/zabrocki",
    "created_at": "2013-01-04T18:06:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13911",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13911#event-196191"
}
```



---

archive/issue_events_196192.json:
```json
{
    "actor": "https://github.com/zabrocki",
    "created_at": "2013-01-04T18:06:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13911",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13911#event-196192"
}
```



---

archive/issue_comments_164503.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nLooks good.  All tests pass.",
    "created_at": "2013-01-04T18:06:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13911#issuecomment-164503",
    "user": "https://github.com/zabrocki"
}
```

<div id="comment:2" align="right">comment:2</div>

Looks good.  All tests pass.



---

archive/issue_comments_164504.json:
```json
{
    "body": "Changed dependencies from **13762** to **#13762**",
    "created_at": "2013-01-04T20:42:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13911#issuecomment-164504",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **13762** to **#13762**



---

archive/issue_events_196193.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-07T21:06:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13911",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13911#event-196193"
}
```



---

archive/issue_events_196194.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-07T21:06:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13911",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13911#event-196194"
}
```



---

archive/issue_comments_164505.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nThis needs `# long time` additions at the following places (positive_review if you make these changes):\n\n```\ndiff --git a/sage/tests/book_schilling_zabrocki_kschur_primer.py b/sage/tests/book_schilling_zabrocki_kschur_primer.py\n--- a/sage/tests/book_schilling_zabrocki_kschur_primer.py\n+++ b/sage/tests/book_schilling_zabrocki_kschur_primer.py\n@@ -568,7 +568,7 @@\n     sage: ks3z = Sym.kschur(3,t=z4)\n     sage: ks3 = Sym.kschur(3,t=1)\n     sage: p = Sym.p()\n-    sage: p(ks3z[2, 2, 2, 2, 2, 2, 2, 2])\n+    sage: p(ks3z[2, 2, 2, 2, 2, 2, 2, 2])  # long time (17s on sage.math, 2013)\n     1/12*p[4, 4, 4, 4] + 1/4*p[8, 8] + (-1/3)*p[12, 4]\n     sage: p(ks3[2,2])\n     1/12*p[1, 1, 1, 1] + 1/4*p[2, 2] + (-1/3)*p[3, 1]\n@@ -577,7 +577,7 @@\n\n Sage example in ./kschurnotes/notes-mike-anne.tex, line 5405::\n\n-    sage: ks3z[3, 3, 3, 3]*ks3z[2, 1]\n+    sage: ks3z[3, 3, 3, 3]*ks3z[2, 1]  # long time (10s on sage.math, 2013)\n     ks3[3, 3, 3, 3, 2, 1]\n\n Sage example in ./kschurnotes/notes-mike-anne.tex, line 5565::\n@@ -585,7 +585,7 @@\n     sage: Sym = SymmetricFunctions(QQ['t'].fraction_field())\n     sage: Q3 = Sym.kBoundedQuotient(3)\n     sage: dks = Q3.dual_k_Schur()\n-    sage: dks[2,1,1]*dks[3,2,1]\n+    sage: dks[2,1,1]*dks[3,2,1]  # long time (37s on sage.math, 2013)\n     (t^7+t^6)*dks3[2, 1, 1, 1, 1, 1, 1, 1, 1] + (t^4+t^3+t^2)*dks3[2, 2, 2,\n     1, 1, 1, 1] + (t^3+t^2)*dks3[2, 2, 2, 2, 1, 1] +\n     (t^5+2*t^4+2*t^3+t^2)*dks3[2, 2, 2, 2, 2] + (t^5+2*t^4+t^3)*dks3[3, 1,\n```",
    "created_at": "2013-01-07T21:06:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13911#issuecomment-164505",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:4" align="right">comment:4</div>

This needs `# long time` additions at the following places (positive_review if you make these changes):

```
diff --git a/sage/tests/book_schilling_zabrocki_kschur_primer.py b/sage/tests/book_schilling_zabrocki_kschur_primer.py
--- a/sage/tests/book_schilling_zabrocki_kschur_primer.py
+++ b/sage/tests/book_schilling_zabrocki_kschur_primer.py
@@ -568,7 +568,7 @@
     sage: ks3z = Sym.kschur(3,t=z4)
     sage: ks3 = Sym.kschur(3,t=1)
     sage: p = Sym.p()
-    sage: p(ks3z[2, 2, 2, 2, 2, 2, 2, 2])
+    sage: p(ks3z[2, 2, 2, 2, 2, 2, 2, 2])  # long time (17s on sage.math, 2013)
     1/12*p[4, 4, 4, 4] + 1/4*p[8, 8] + (-1/3)*p[12, 4]
     sage: p(ks3[2,2])
     1/12*p[1, 1, 1, 1] + 1/4*p[2, 2] + (-1/3)*p[3, 1]
@@ -577,7 +577,7 @@

 Sage example in ./kschurnotes/notes-mike-anne.tex, line 5405::

-    sage: ks3z[3, 3, 3, 3]*ks3z[2, 1]
+    sage: ks3z[3, 3, 3, 3]*ks3z[2, 1]  # long time (10s on sage.math, 2013)
     ks3[3, 3, 3, 3, 2, 1]

 Sage example in ./kschurnotes/notes-mike-anne.tex, line 5565::
@@ -585,7 +585,7 @@
     sage: Sym = SymmetricFunctions(QQ['t'].fraction_field())
     sage: Q3 = Sym.kBoundedQuotient(3)
     sage: dks = Q3.dual_k_Schur()
-    sage: dks[2,1,1]*dks[3,2,1]
+    sage: dks[2,1,1]*dks[3,2,1]  # long time (37s on sage.math, 2013)
     (t^7+t^6)*dks3[2, 1, 1, 1, 1, 1, 1, 1, 1] + (t^4+t^3+t^2)*dks3[2, 2, 2,
     1, 1, 1, 1] + (t^3+t^2)*dks3[2, 2, 2, 2, 1, 1] +
     (t^5+2*t^4+2*t^3+t^2)*dks3[2, 2, 2, 2, 2] + (t^5+2*t^4+t^3)*dks3[3, 1,
```



---

archive/issue_comments_164506.json:
```json
{
    "body": "Attachment: **[trac_13911-doctests.patch.gz](https://github.com/sagemath/sage/files/ticket13911/trac_13911-doctests.patch.gz)**",
    "created_at": "2013-01-08T00:29:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13911#issuecomment-164506",
    "user": "https://github.com/anneschilling"
}
```

Attachment: **[trac_13911-doctests.patch.gz](https://github.com/sagemath/sage/files/ticket13911/trac_13911-doctests.patch.gz)**



---

archive/issue_comments_164507.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nOk, I marked them. What is the proper/easiest way to find tests that need to be marked long instead of going through by hand?\n\nAnne",
    "created_at": "2013-01-08T00:30:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13911#issuecomment-164507",
    "user": "https://github.com/anneschilling"
}
```

<div id="comment:5" align="right">comment:5</div>

Ok, I marked them. What is the proper/easiest way to find tests that need to be marked long instead of going through by hand?

Anne



---

archive/issue_events_196195.json:
```json
{
    "actor": "https://github.com/anneschilling",
    "created_at": "2013-01-08T00:30:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13911",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13911#event-196195"
}
```



---

archive/issue_events_196196.json:
```json
{
    "actor": "https://github.com/anneschilling",
    "created_at": "2013-01-08T00:30:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13911",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13911#event-196196"
}
```



---

archive/issue_events_196197.json:
```json
{
    "actor": "https://github.com/zabrocki",
    "created_at": "2013-01-08T05:16:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13911",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13911#event-196197"
}
```



---

archive/issue_events_196198.json:
```json
{
    "actor": "https://github.com/zabrocki",
    "created_at": "2013-01-08T05:16:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13911",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13911#event-196198"
}
```



---

archive/issue_comments_164508.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@anneschilling](#comment:5):\n> Ok, I marked them. What is the proper/easiest way to find tests that need to be marked long instead of going through by hand?\n\nThat's the problem, there isn't really a good way to do this. There are some plans to change this, see #12720.\n\nBut usually when you're writing doctests, you would first run it interactively inside Sage (to know at least what the correct answer is). Then you would notice if the answer isn't returned immediately.",
    "created_at": "2013-01-08T07:21:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13911#issuecomment-164508",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@anneschilling](#comment:5):
> Ok, I marked them. What is the proper/easiest way to find tests that need to be marked long instead of going through by hand?

That's the problem, there isn't really a good way to do this. There are some plans to change this, see #12720.

But usually when you're writing doctests, you would first run it interactively inside Sage (to know at least what the correct answer is). Then you would notice if the answer isn't returned immediately.



---

archive/issue_comments_164509.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@jdemeyer](#comment:8):\n> Replying to [@anneschilling](#comment:5):\n> > Ok, I marked them. What is the proper/easiest way to find tests that need to be marked long instead of going through by hand?\n\n> \n> That's the problem, there isn't really a good way to do this. There are some plans to change this, see #12720.\n> \n> But usually when you're writing doctests, you would first run it interactively inside Sage (to know at least what the correct answer is). Then you would notice if the answer isn't returned immediately.\n\nThanks for letting me know! In our case sagetex actually made the doctests from the latex source of the book. But I suppose when putting those into the book we could have taken notice which tests took a long time.\n\nAnne",
    "created_at": "2013-01-08T07:27:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13911#issuecomment-164509",
    "user": "https://github.com/anneschilling"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@jdemeyer](#comment:8):
> Replying to [@anneschilling](#comment:5):
> > Ok, I marked them. What is the proper/easiest way to find tests that need to be marked long instead of going through by hand?

> 
> That's the problem, there isn't really a good way to do this. There are some plans to change this, see #12720.
> 
> But usually when you're writing doctests, you would first run it interactively inside Sage (to know at least what the correct answer is). Then you would notice if the answer isn't returned immediately.

Thanks for letting me know! In our case sagetex actually made the doctests from the latex source of the book. But I suppose when putting those into the book we could have taken notice which tests took a long time.

Anne



---

archive/issue_comments_164510.json:
```json
{
    "body": "Merged: **sage-5.6.beta3**",
    "created_at": "2013-01-09T08:59:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13911#issuecomment-164510",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.6.beta3**



---

archive/issue_events_196199.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-09T08:59:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13911",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13911#event-196199"
}
```



---

archive/issue_events_196200.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-09T08:59:35Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/13911",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13911#event-196200"
}
```
