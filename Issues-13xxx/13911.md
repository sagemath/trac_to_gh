# Issue 13911: Updated doc tests for k-Schur function and affine Schubert calculus book

archive/issues_013707.json:
```json
{
    "body": "This patch updates the doctests in the book \"k-Schur functions and affine Schubert calculus\" written by Thomas Lam, Luc Lapointe, Jennifer Morse, Anne Schilling, Mark Shimozono, Mike Zabrocki. It uses features implemented in #13762.\n\n**Assignee:** sage-combinat\n\n**CC:**  sage-combinat @zabrocki\n\n**Keywords:** symmetric functions, book\n\n**Reviewer:** Mike Zabrocki, Anne Schilling\n\n**Author:** Anne Schilling, Mike Zabrocki\n\n**Merged:** sage-5.6.beta3\n\n**Dependencies:** #13762\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/13911\n\n",
    "closed_at": "2013-01-09T08:59:35Z",
    "created_at": "2013-01-04T16:57:52Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.6",
    "title": "Updated doc tests for k-Schur function and affine Schubert calculus book",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13911",
    "user": "https://github.com/anneschilling"
}
```
This patch updates the doctests in the book "k-Schur functions and affine Schubert calculus" written by Thomas Lam, Luc Lapointe, Jennifer Morse, Anne Schilling, Mark Shimozono, Mike Zabrocki. It uses features implemented in #13762.

**Assignee:** sage-combinat

**CC:**  sage-combinat @zabrocki

**Keywords:** symmetric functions, book

**Reviewer:** Mike Zabrocki, Anne Schilling

**Author:** Anne Schilling, Mike Zabrocki

**Merged:** sage-5.6.beta3

**Dependencies:** #13762

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/13911





---

archive/issue_comments_217078.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2013-01-04T17:32:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13911#issuecomment-217078",
    "user": "https://github.com/anneschilling"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_217079.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2013-01-04T18:06:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13911#issuecomment-217079",
    "user": "https://github.com/zabrocki"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_217080.json:
```json
{
    "body": "<a id='comment:2'></a>\nLooks good.  All tests pass.",
    "created_at": "2013-01-04T18:06:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13911#issuecomment-217080",
    "user": "https://github.com/zabrocki"
}
```

<a id='comment:2'></a>
Looks good.  All tests pass.



---

archive/issue_comments_217081.json:
```json
{
    "body": "**Changing dependencies** from \"13762\" to \"#13762\".",
    "created_at": "2013-01-04T20:42:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13911#issuecomment-217081",
    "user": "https://github.com/jdemeyer"
}
```

**Changing dependencies** from "13762" to "#13762".



---

archive/issue_comments_217082.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2013-01-07T21:06:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13911#issuecomment-217082",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_comments_217083.json:
```json
{
    "body": "<a id='comment:4'></a>\nThis needs `# long time` additions at the following places (positive_review if you make these changes):\n\n```\ndiff --git a/sage/tests/book_schilling_zabrocki_kschur_primer.py b/sage/tests/book_schilling_zabrocki_kschur_primer.py\n--- a/sage/tests/book_schilling_zabrocki_kschur_primer.py\n+++ b/sage/tests/book_schilling_zabrocki_kschur_primer.py\n@@ -568,7 +568,7 @@\n     sage: ks3z = Sym.kschur(3,t=z4)\n     sage: ks3 = Sym.kschur(3,t=1)\n     sage: p = Sym.p()\n-    sage: p(ks3z[2, 2, 2, 2, 2, 2, 2, 2])\n+    sage: p(ks3z[2, 2, 2, 2, 2, 2, 2, 2])  # long time (17s on sage.math, 2013)\n     1/12*p[4, 4, 4, 4] + 1/4*p[8, 8] + (-1/3)*p[12, 4]\n     sage: p(ks3[2,2])\n     1/12*p[1, 1, 1, 1] + 1/4*p[2, 2] + (-1/3)*p[3, 1]\n@@ -577,7 +577,7 @@\n\n Sage example in ./kschurnotes/notes-mike-anne.tex, line 5405::\n\n-    sage: ks3z[3, 3, 3, 3]*ks3z[2, 1]\n+    sage: ks3z[3, 3, 3, 3]*ks3z[2, 1]  # long time (10s on sage.math, 2013)\n     ks3[3, 3, 3, 3, 2, 1]\n\n Sage example in ./kschurnotes/notes-mike-anne.tex, line 5565::\n@@ -585,7 +585,7 @@\n     sage: Sym = SymmetricFunctions(QQ['t'].fraction_field())\n     sage: Q3 = Sym.kBoundedQuotient(3)\n     sage: dks = Q3.dual_k_Schur()\n-    sage: dks[2,1,1]*dks[3,2,1]\n+    sage: dks[2,1,1]*dks[3,2,1]  # long time (37s on sage.math, 2013)\n     (t^7+t^6)*dks3[2, 1, 1, 1, 1, 1, 1, 1, 1] + (t^4+t^3+t^2)*dks3[2, 2, 2,\n     1, 1, 1, 1] + (t^3+t^2)*dks3[2, 2, 2, 2, 1, 1] +\n     (t^5+2*t^4+2*t^3+t^2)*dks3[2, 2, 2, 2, 2] + (t^5+2*t^4+t^3)*dks3[3, 1,\n```",
    "created_at": "2013-01-07T21:06:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13911#issuecomment-217083",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'></a>
This needs `# long time` additions at the following places (positive_review if you make these changes):

```
diff --git a/sage/tests/book_schilling_zabrocki_kschur_primer.py b/sage/tests/book_schilling_zabrocki_kschur_primer.py
--- a/sage/tests/book_schilling_zabrocki_kschur_primer.py
+++ b/sage/tests/book_schilling_zabrocki_kschur_primer.py
@@ -568,7 +568,7 @@
     sage: ks3z = Sym.kschur(3,t=z4)
     sage: ks3 = Sym.kschur(3,t=1)
     sage: p = Sym.p()
-    sage: p(ks3z[2, 2, 2, 2, 2, 2, 2, 2])
+    sage: p(ks3z[2, 2, 2, 2, 2, 2, 2, 2])  # long time (17s on sage.math, 2013)
     1/12*p[4, 4, 4, 4] + 1/4*p[8, 8] + (-1/3)*p[12, 4]
     sage: p(ks3[2,2])
     1/12*p[1, 1, 1, 1] + 1/4*p[2, 2] + (-1/3)*p[3, 1]
@@ -577,7 +577,7 @@

 Sage example in ./kschurnotes/notes-mike-anne.tex, line 5405::

-    sage: ks3z[3, 3, 3, 3]*ks3z[2, 1]
+    sage: ks3z[3, 3, 3, 3]*ks3z[2, 1]  # long time (10s on sage.math, 2013)
     ks3[3, 3, 3, 3, 2, 1]

 Sage example in ./kschurnotes/notes-mike-anne.tex, line 5565::
@@ -585,7 +585,7 @@
     sage: Sym = SymmetricFunctions(QQ['t'].fraction_field())
     sage: Q3 = Sym.kBoundedQuotient(3)
     sage: dks = Q3.dual_k_Schur()
-    sage: dks[2,1,1]*dks[3,2,1]
+    sage: dks[2,1,1]*dks[3,2,1]  # long time (37s on sage.math, 2013)
     (t^7+t^6)*dks3[2, 1, 1, 1, 1, 1, 1, 1, 1] + (t^4+t^3+t^2)*dks3[2, 2, 2,
     1, 1, 1, 1] + (t^3+t^2)*dks3[2, 2, 2, 2, 1, 1] +
     (t^5+2*t^4+2*t^3+t^2)*dks3[2, 2, 2, 2, 2] + (t^5+2*t^4+t^3)*dks3[3, 1,
```



---

archive/issue_comments_217084.json:
```json
{
    "body": "Attachment [trac_13911-doctests.patch](tarball://root/attachments/some-uuid/ticket13911/trac_13911-doctests.patch) by @anneschilling created at 2013-01-08 00:29:19",
    "created_at": "2013-01-08T00:29:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13911#issuecomment-217084",
    "user": "https://github.com/anneschilling"
}
```

Attachment [trac_13911-doctests.patch](tarball://root/attachments/some-uuid/ticket13911/trac_13911-doctests.patch) by @anneschilling created at 2013-01-08 00:29:19



---

archive/issue_comments_217085.json:
```json
{
    "body": "<a id='comment:5'></a>\nOk, I marked them. What is the proper/easiest way to find tests that need to be marked long instead of going through by hand?\n\nAnne",
    "created_at": "2013-01-08T00:30:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13911#issuecomment-217085",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:5'></a>
Ok, I marked them. What is the proper/easiest way to find tests that need to be marked long instead of going through by hand?

Anne



---

archive/issue_comments_217086.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2013-01-08T00:30:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13911#issuecomment-217086",
    "user": "https://github.com/anneschilling"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_217087.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2013-01-08T05:16:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13911#issuecomment-217087",
    "user": "https://github.com/zabrocki"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_217088.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [aschilling](#comment%3A5):\n> Ok, I marked them. What is the proper/easiest way to find tests that need to be marked long instead of going through by hand?\n\n\nThat's the problem, there isn't really a good way to do this. There are some plans to change this, see #12720.\n\nBut usually when you're writing doctests, you would first run it interactively inside Sage (to know at least what the correct answer is). Then you would notice if the answer isn't returned immediately.",
    "created_at": "2013-01-08T07:21:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13911#issuecomment-217088",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'></a>
Replying to [aschilling](#comment%3A5):
> Ok, I marked them. What is the proper/easiest way to find tests that need to be marked long instead of going through by hand?


That's the problem, there isn't really a good way to do this. There are some plans to change this, see #12720.

But usually when you're writing doctests, you would first run it interactively inside Sage (to know at least what the correct answer is). Then you would notice if the answer isn't returned immediately.



---

archive/issue_comments_217089.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [jdemeyer](#comment%3A8):\n> Replying to [aschilling](#comment%3A5):\n> > Ok, I marked them. What is the proper/easiest way to find tests that need to be marked long instead of going through by hand?\n\n> \n> That's the problem, there isn't really a good way to do this. There are some plans to change this, see #12720.\n> \n> But usually when you're writing doctests, you would first run it interactively inside Sage (to know at least what the correct answer is). Then you would notice if the answer isn't returned immediately.\n\n\nThanks for letting me know! In our case sagetex actually made the doctests from the latex source of the book. But I suppose when putting those into the book we could have taken notice which tests took a long time.\n\nAnne",
    "created_at": "2013-01-08T07:27:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13911#issuecomment-217089",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:9'></a>
Replying to [jdemeyer](#comment%3A8):
> Replying to [aschilling](#comment%3A5):
> > Ok, I marked them. What is the proper/easiest way to find tests that need to be marked long instead of going through by hand?

> 
> That's the problem, there isn't really a good way to do this. There are some plans to change this, see #12720.
> 
> But usually when you're writing doctests, you would first run it interactively inside Sage (to know at least what the correct answer is). Then you would notice if the answer isn't returned immediately.


Thanks for letting me know! In our case sagetex actually made the doctests from the latex source of the book. But I suppose when putting those into the book we could have taken notice which tests took a long time.

Anne



---

archive/issue_comments_217090.json:
```json
{
    "body": "**Merged:** sage-5.6.beta3",
    "created_at": "2013-01-09T08:59:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13911#issuecomment-217090",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.6.beta3



---

archive/issue_comments_217091.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2013-01-09T08:59:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13911#issuecomment-217091",
    "user": "https://github.com/jdemeyer"
}
```

**Resolution:** fixed



---

archive/issue_events_045224.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-09T08:59:35Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13911",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13911#event-45224"
}
```
