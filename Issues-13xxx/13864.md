# Issue 13864: Configure Python with  pydebug when SAGE_DEBUG is set

archive/issues_013660.json:
```json
{
    "body": "Instructions for getting a debug version of Python:\n\n* Download and untar sage-5.7.beta2\n* Copy the Python spkg from #13867 to spkg/standard and (to be on the safe side) remove the previously present Python spkg\n* Run\n  {{{\nexport SAGE_DEBUG=yes\nmake\n  }}}\n  and wait.\n* (optionally) install the gdb spkg from #13866\n* Apply the patches from #13878, #14059 and #14067 to the Sage library\n* Run `sage -br`\n\nThis gives you a Sage version that passes all tests, even with MALLOC_CHECK_=3.\n\nAssignee: @jasongrout\n\nCC:  @vbraun simonking\n\nKeywords: python spkg\n\nReviewer: Volker Braun, Simon King, Jean-Pierre Flori\n\nDependencies: #10352, #13832, #13865, #13867, #13868, #13876, #13878, #13882, #13883, #13889, #13896, #13921, #14059, #14067\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/13864\n\n",
    "closed_at": "2013-02-09T12:18:04Z",
    "created_at": "2012-12-26T15:13:03Z",
    "labels": [
        "component: misc"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.7",
    "title": "Configure Python with  pydebug when SAGE_DEBUG is set",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13864",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```
Instructions for getting a debug version of Python:

* Download and untar sage-5.7.beta2
* Copy the Python spkg from #13867 to spkg/standard and (to be on the safe side) remove the previously present Python spkg
* Run
  {{{
export SAGE_DEBUG=yes
make
  }}}
  and wait.
* (optionally) install the gdb spkg from #13866
* Apply the patches from #13878, #14059 and #14067 to the Sage library
* Run `sage -br`

This gives you a Sage version that passes all tests, even with MALLOC_CHECK_=3.

Assignee: @jasongrout

CC:  @vbraun simonking

Keywords: python spkg

Reviewer: Volker Braun, Simon King, Jean-Pierre Flori

Dependencies: #10352, #13832, #13865, #13867, #13868, #13876, #13878, #13882, #13883, #13889, #13896, #13921, #14059, #14067

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/13864





---

archive/issue_comments_180052.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-12-26T15:36:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180052",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_180053.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-12-26T15:37:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180053",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_180054.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-12-26T15:41:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180054",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_180055.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2012-12-26T16:18:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180055",
    "user": "https://github.com/jdemeyer"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_180056.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-12-26T18:21:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180056",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_180057.json:
```json
{
    "body": "<a id='comment:5'></a>Looks good to me! I'm adding my proposed change to the documentation as a prerequisite to not deviate from whats documented...",
    "created_at": "2012-12-26T18:21:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180057",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:5'></a>Looks good to me! I'm adding my proposed change to the documentation as a prerequisite to not deviate from whats documented...



---

archive/issue_comments_180058.json:
```json
{
    "body": "<a id='comment:6'></a>Sage claims that the spkg built successfully. However, I see things like\n\n```\n/home/simon/SAGE/debug/sage-5.5.rc0/spkg/build/python-2.7.3.p4/src/Modules/_curses_panel.c:17:19: fatal error: panel.h: Datei oder Verzeichnis nicht gefunden\ncompilation terminated.\n\nPython build finished, but the necessary bits to build these modules were not found:\n_bsddb             bsddb185           dbm             \ndl                 gdbm               imageop         \nsunaudiodev                                           \nTo find the necessary bits, look in setup.py in detect_modules() for the module's name.\n```\nin the install log. Is that normal?",
    "created_at": "2012-12-26T18:23:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180058",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:6'></a>Sage claims that the spkg built successfully. However, I see things like

```
/home/simon/SAGE/debug/sage-5.5.rc0/spkg/build/python-2.7.3.p4/src/Modules/_curses_panel.c:17:19: fatal error: panel.h: Datei oder Verzeichnis nicht gefunden
compilation terminated.

Python build finished, but the necessary bits to build these modules were not found:
_bsddb             bsddb185           dbm             
dl                 gdbm               imageop         
sunaudiodev                                           
To find the necessary bits, look in setup.py in detect_modules() for the module's name.
```
in the install log. Is that normal?



---

archive/issue_comments_180059.json:
```json
{
    "body": "<a id='comment:7'></a>Yes it is (or at least I always had this behavior).\nI think these \"optional\" modules are only built if the needed prerequisites are present, but are not really required to get a working Python.",
    "created_at": "2012-12-26T18:35:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180059",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:7'></a>Yes it is (or at least I always had this behavior).
I think these "optional" modules are only built if the needed prerequisites are present, but are not really required to get a working Python.



---

archive/issue_comments_180060.json:
```json
{
    "body": "<a id='comment:8'></a>Replying to [comment:7 jpflori]:\n> I think these \"optional\" modules are only built if the needed prerequisites are present, but are not really required to get a working Python.\nExactly. Some of these optional modules (like \"crypt\" for example) are required for Sage, that's why we try to import them in Python's `spkg-install`.",
    "created_at": "2012-12-26T18:45:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180060",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'></a>Replying to [comment:7 jpflori]:
> I think these "optional" modules are only built if the needed prerequisites are present, but are not really required to get a working Python.
Exactly. Some of these optional modules (like "crypt" for example) are required for Sage, that's why we try to import them in Python's `spkg-install`.



---

archive/issue_comments_180061.json:
```json
{
    "body": "<a id='comment:9'></a>One observation, potentially related with what we discussed on #715:\n\nStarting python and importing sage works:\n\n```\n> ./sage -python\nPython 2.7.3 (default, Dec 26 2012, 19:09:45) \n[GCC 4.6.2] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import sage\n[39290 refs]\n```\nHowever, importing sage.categories.map.Map does not work:\n\n```\n>>> from sage.categories.map import Map\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\nImportError: cannot import name Map\n[102454 refs]\n```\nI don't know whether this *should* work, but anyway: It doesn't.",
    "created_at": "2012-12-26T19:22:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180061",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:9'></a>One observation, potentially related with what we discussed on #715:

Starting python and importing sage works:

```
> ./sage -python
Python 2.7.3 (default, Dec 26 2012, 19:09:45) 
[GCC 4.6.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import sage
[39290 refs]
```
However, importing sage.categories.map.Map does not work:

```
>>> from sage.categories.map import Map
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: cannot import name Map
[102454 refs]
```
I don't know whether this *should* work, but anyway: It doesn't.



---

archive/issue_comments_180062.json:
```json
{
    "body": "<a id='comment:10'></a>I'd say (although I don't know why) it is because it is a Cython module.\nDid you try with a plain Python build?",
    "created_at": "2012-12-26T19:26:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180062",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:10'></a>I'd say (although I don't know why) it is because it is a Cython module.
Did you try with a plain Python build?



---

archive/issue_comments_180063.json:
```json
{
    "body": "<a id='comment:11'></a>I made a gdb spkg at #13866 so you can get a working debugger with the Python debug build.",
    "created_at": "2012-12-26T19:28:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180063",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:11'></a>I made a gdb spkg at #13866 so you can get a working debugger with the Python debug build.



---

archive/issue_comments_180064.json:
```json
{
    "body": "<a id='comment:12'></a>Some debugging hint: Use `python -v` to print imports as they happen:\n\n```\n[vbraun@volker-desktop sage-5.6.beta0]$ ./sage -python -v\n...\n>>> import sage.all_cmdline\n...\nimport sage.rings.padics.padic_ext_element # dynamically loaded from /home/vbraun/opt/sage-5.6.beta0/local/lib/python2.7/site-packages/sage/rings/padics/padic_ext_element.so\nFatal Python error: UNREF invalid object\n/home/vbraun/opt/sage-5.6.beta0/local/lib/libcsage.so(print_backtrace+0x31)[0x7f0c88f3120d]\n/home/vbraun/opt/sage-5.6.beta0/local/lib/libcsage.so(sigdie+0x14)[0x7f0c88f3123f]\n/home/vbraun/opt/sage-5.6.beta0/local/lib/libcsage.so(sage_signal_handler+0x1da)[0x7f0c88f30deb]\n```",
    "created_at": "2012-12-26T19:31:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180064",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:12'></a>Some debugging hint: Use `python -v` to print imports as they happen:

```
[vbraun@volker-desktop sage-5.6.beta0]$ ./sage -python -v
...
>>> import sage.all_cmdline
...
import sage.rings.padics.padic_ext_element # dynamically loaded from /home/vbraun/opt/sage-5.6.beta0/local/lib/python2.7/site-packages/sage/rings/padics/padic_ext_element.so
Fatal Python error: UNREF invalid object
/home/vbraun/opt/sage-5.6.beta0/local/lib/libcsage.so(print_backtrace+0x31)[0x7f0c88f3120d]
/home/vbraun/opt/sage-5.6.beta0/local/lib/libcsage.so(sigdie+0x14)[0x7f0c88f3123f]
/home/vbraun/opt/sage-5.6.beta0/local/lib/libcsage.so(sage_signal_handler+0x1da)[0x7f0c88f30deb]
```



---

archive/issue_comments_180065.json:
```json
{
    "body": "<a id='comment:13'></a>Replying to [comment:12 vbraun]:\n> Some debugging hint: Use `python -v` to print imports as they happen:\n> \n> ```\n> [vbraun@volker-desktop sage-5.6.beta0]$ ./sage -python -v\n> ...\n> >>> import sage.all_cmdline\n> ...\n> import sage.rings.padics.padic_ext_element # dynamically loaded from /home/vbraun/opt/sage-5.6.beta0/local/lib/python2.7/site-packages/sage/rings/padics/padic_ext_element.so\n> Fatal Python error: UNREF invalid object\n> /home/vbraun/opt/sage-5.6.beta0/local/lib/libcsage.so(print_backtrace+0x31)[0x7f0c88f3120d]\n> /home/vbraun/opt/sage-5.6.beta0/local/lib/libcsage.so(sigdie+0x14)[0x7f0c88f3123f]\n> /home/vbraun/opt/sage-5.6.beta0/local/lib/libcsage.so(sage_signal_handler+0x1da)[0x7f0c88f30deb]\n> ```\n\n\nCould you add this to the dev doc in #13865, or here?",
    "created_at": "2012-12-26T19:36:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180065",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:13'></a>Replying to [comment:12 vbraun]:
> Some debugging hint: Use `python -v` to print imports as they happen:
> 
> ```
> [vbraun@volker-desktop sage-5.6.beta0]$ ./sage -python -v
> ...
> >>> import sage.all_cmdline
> ...
> import sage.rings.padics.padic_ext_element # dynamically loaded from /home/vbraun/opt/sage-5.6.beta0/local/lib/python2.7/site-packages/sage/rings/padics/padic_ext_element.so
> Fatal Python error: UNREF invalid object
> /home/vbraun/opt/sage-5.6.beta0/local/lib/libcsage.so(print_backtrace+0x31)[0x7f0c88f3120d]
> /home/vbraun/opt/sage-5.6.beta0/local/lib/libcsage.so(sigdie+0x14)[0x7f0c88f3123f]
> /home/vbraun/opt/sage-5.6.beta0/local/lib/libcsage.so(sage_signal_handler+0x1da)[0x7f0c88f30deb]
> ```


Could you add this to the dev doc in #13865, or here?



---

archive/issue_comments_180066.json:
```json
{
    "body": "<a id='comment:14'></a>Thank you! I was just about to ask how one can see what stuff is being imported. So, -v it is...",
    "created_at": "2012-12-26T19:38:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180066",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:14'></a>Thank you! I was just about to ask how one can see what stuff is being imported. So, -v it is...



---

archive/issue_comments_180067.json:
```json
{
    "body": "<a id='comment:15'></a>Well ideally we'd ship Sage in a state where it at least starts up with a debug build. If I find something thats particularly useful in debugging then I'll document it. For now:\n\n```\n(sage-sh) vbraun@volker-desktop:sage-5.6.beta0$ gdb python\n...\n(gdb) run -v\n...\n>>> import sage.all_cmdline\n...\nFatal Python error: UNREF invalid object\n\nProgram received signal SIGABRT, Aborted.\n0x0000003da9835ba5 in raise () from /lib64/libc.so.6\n(gdb) bt\n#0  0x0000003da9835ba5 in raise () from /lib64/libc.so.6\n#1  0x0000003da9837358 in abort () from /lib64/libc.so.6\n#2  0x00007ffff7d1a63b in Py_FatalError (msg=0x7ffff7d63eb1 \"UNREF invalid object\")\n    at Python/pythonrun.c:1677\n#3  0x00007ffff7c49f18 in _Py_ForgetReference (op=0x21194c0) at Objects/object.c:2223\n#4  0x00007ffff7c49f6b in _Py_Dealloc (op=0x21194c0) at Objects/object.c:2242\n#5  0x00007fffd9de6e7c in initpadic_ZZ_pX_element () at sage/rings/padics/padic_ZZ_pX_element.cpp:9634\n#6  0x00007ffff7d0a496 in _PyImport_LoadDynamicModule (\n    name=0x7ffffffe4360 \"sage.rings.padics.padic_ZZ_pX_element\", \n    pathname=0x7ffffffe3260 \"/home/vbraun/opt/sage-5.6.beta0/local/lib/python2.7/site-packages/sage/rings/padics/padic_ZZ_pX_element.so\", fp=0x20d23b0) at ./Python/importdl.c:53\n...\n(gdb) frame 5\n#5  0x00007fffd9de6e7c in initpadic_ZZ_pX_element () at sage/rings/padics/padic_ZZ_pX_element.cpp:9634\n9634\t  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;\n(gdb) l\n9629\t  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;\n9630\t  __pyx_t_2 = __Pyx_GetName(__pyx_m, __pyx_n_s__one); if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 34; __pyx_clineno = __LINE__; goto __pyx_L1_error;}\n9631\t  __Pyx_GOTREF(__pyx_t_2);\n9632\t  __pyx_t_3 = PyNumber_Add(__pyx_t_1, __pyx_t_2); if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 34; __pyx_clineno = __LINE__; goto __pyx_L1_error;}\n9633\t  __Pyx_GOTREF(__pyx_t_3);\n9634\t  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;\n9635\t  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;\n9636\t  if (PyObject_SetAttr(__pyx_m, __pyx_n_s__big, __pyx_t_3) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 34; __pyx_clineno = __LINE__; goto __pyx_L1_error;}\n9637\t  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;\n```",
    "created_at": "2012-12-26T19:43:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180067",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:15'></a>Well ideally we'd ship Sage in a state where it at least starts up with a debug build. If I find something thats particularly useful in debugging then I'll document it. For now:

```
(sage-sh) vbraun@volker-desktop:sage-5.6.beta0$ gdb python
...
(gdb) run -v
...
>>> import sage.all_cmdline
...
Fatal Python error: UNREF invalid object

Program received signal SIGABRT, Aborted.
0x0000003da9835ba5 in raise () from /lib64/libc.so.6
(gdb) bt
#0  0x0000003da9835ba5 in raise () from /lib64/libc.so.6
#1  0x0000003da9837358 in abort () from /lib64/libc.so.6
#2  0x00007ffff7d1a63b in Py_FatalError (msg=0x7ffff7d63eb1 "UNREF invalid object")
    at Python/pythonrun.c:1677
#3  0x00007ffff7c49f18 in _Py_ForgetReference (op=0x21194c0) at Objects/object.c:2223
#4  0x00007ffff7c49f6b in _Py_Dealloc (op=0x21194c0) at Objects/object.c:2242
#5  0x00007fffd9de6e7c in initpadic_ZZ_pX_element () at sage/rings/padics/padic_ZZ_pX_element.cpp:9634
#6  0x00007ffff7d0a496 in _PyImport_LoadDynamicModule (
    name=0x7ffffffe4360 "sage.rings.padics.padic_ZZ_pX_element", 
    pathname=0x7ffffffe3260 "/home/vbraun/opt/sage-5.6.beta0/local/lib/python2.7/site-packages/sage/rings/padics/padic_ZZ_pX_element.so", fp=0x20d23b0) at ./Python/importdl.c:53
...
(gdb) frame 5
#5  0x00007fffd9de6e7c in initpadic_ZZ_pX_element () at sage/rings/padics/padic_ZZ_pX_element.cpp:9634
9634	  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
(gdb) l
9629	  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
9630	  __pyx_t_2 = __Pyx_GetName(__pyx_m, __pyx_n_s__one); if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 34; __pyx_clineno = __LINE__; goto __pyx_L1_error;}
9631	  __Pyx_GOTREF(__pyx_t_2);
9632	  __pyx_t_3 = PyNumber_Add(__pyx_t_1, __pyx_t_2); if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 34; __pyx_clineno = __LINE__; goto __pyx_L1_error;}
9633	  __Pyx_GOTREF(__pyx_t_3);
9634	  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
9635	  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
9636	  if (PyObject_SetAttr(__pyx_m, __pyx_n_s__big, __pyx_t_3) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 34; __pyx_clineno = __LINE__; goto __pyx_L1_error;}
9637	  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
```



---

archive/issue_comments_180068.json:
```json
{
    "body": "<a id='comment:16'></a>See my long lonely rant at sage-devel https://groups.google.com/d/topic/sage-devel/Wt7uxbDkh_A/discussion, especially the links:\n* post about weakref problem solved here https://groups.google.com/d/topic/cython-users/4es75DeacRA/discussion\n* and your ticket for updating cython here #13832\nHopefully that will be enough to get Sage to start (and finally get a working #715?).",
    "created_at": "2012-12-26T21:39:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180068",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:16'></a>See my long lonely rant at sage-devel https://groups.google.com/d/topic/sage-devel/Wt7uxbDkh_A/discussion, especially the links:
* post about weakref problem solved here https://groups.google.com/d/topic/cython-users/4es75DeacRA/discussion
* and your ticket for updating cython here #13832
Hopefully that will be enough to get Sage to start (and finally get a working #715?).



---

archive/issue_comments_180069.json:
```json
{
    "body": "<a id='comment:17'></a>Interestingly, the error on my laptop looks different from what Volker reported in comment:15:\n\n```\n(sage-sh) simon@linux-sqwp:sage-5.5.rc0$ gdb python\n...\n(gdb) run -v\n...\n>>> import sage.all_cmdline\n...\nimport sage.libs.pari.gen # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/libs/pari/gen.so\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/integer.so\", 2);\npython: Modules/gcmodule.c:326: visit_decref: Assertion `gc->gc.gc_refs != 0' failed.\n\nProgram received signal SIGABRT, Aborted.\n0x00007ffff6d95d95 in raise () from /lib64/libc.so.6\n```\nHence: No `Fatal Python error: UNREF invalid object`.\nFurther:\n\n```\n(gdb) bt\n#0  0x00007ffff6d95d95 in raise () from /lib64/libc.so.6\n#1  0x00007ffff6d972ab in abort () from /lib64/libc.so.6\n#2  0x00007ffff6d8e8fe in __assert_fail_base () from /lib64/libc.so.6\n#3  0x00007ffff6d8e9a2 in __assert_fail () from /lib64/libc.so.6\n#4  0x00007ffff7b12a19 in visit_decref (op=0x1462f40, data=0x0) at Modules/gcmodule.c:326\n#5  0x00007fffeecdcfe1 in __pyx_tp_traverse_4sage_9structure_15category_object_CategoryObject (o=0x14b7d30, v=0x7ffff7b1295e <visit_decref>, a=0x0) at sage/structure/category_object.c:8971\n#6  0x00007fffeef4724f in __pyx_tp_traverse_4sage_9structure_6parent_Parent (o=0x14b7d30, v=0x7ffff7b1295e <visit_decref>, a=0x0) at sage/structure/parent.c:21293\n#7  0x00007fffef18a97c in __pyx_tp_traverse_4sage_9structure_10parent_old_Parent (o=0x14b7d30, v=0x7ffff7b1295e <visit_decref>, a=0x0) at sage/structure/parent_old.c:7253\n#8  0x00007fffef39ab57 in __pyx_tp_traverse_4sage_9structure_11parent_base_ParentWithBase (o=0x14b7d30, v=0x7ffff7b1295e <visit_decref>, a=0x0) at sage/structure/parent_base.c:1892\n#9  0x00007ffff7a4c572 in subtype_traverse (self=0x14b7d30, visit=0x7ffff7b1295e <visit_decref>, arg=0x0) at Objects/typeobject.c:838\n...\n#32 0x00007fffecc2bcbe in __Pyx_ImportModule (name=0x7fffecc2fc6c \"sage.rings.integer\") at sage/rings/complex_double.c:18370\n#33 0x00007fffecc2b951 in __Pyx_ImportType (module_name=0x7fffecc2fc6c \"sage.rings.integer\", class_name=0x7fffecc2fc64 \"Integer\", size=64, strict=1) at sage/rings/complex_double.c:18319\n#34 0x00007fffecc25b46 in initcomplex_double () at sage/rings/complex_double.c:16572\n#35 0x00007ffff7ae9282 in _PyImport_LoadDynamicModule (name=0x7ffffffed660 \"sage.rings.complex_double\", \n...\n```\n\nSo, \"Volker's\" error is in `padic_ZZ_pX_element`, but mine is in `sage.rings.integer`. Moreover, my gdb backtrace is a lot shorter, just 109 lines.\n\nBy the way: \n\n```\n>>> from sage.rings.integer_ring import IntegerRing\n```\nfails with an import error -- but there is no crash! So, there seems to be something else wrong, not just the refcount.",
    "created_at": "2012-12-26T21:48:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180069",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:17'></a>Interestingly, the error on my laptop looks different from what Volker reported in comment:15:

```
(sage-sh) simon@linux-sqwp:sage-5.5.rc0$ gdb python
...
(gdb) run -v
...
>>> import sage.all_cmdline
...
import sage.libs.pari.gen # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/libs/pari/gen.so
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/integer.so", 2);
python: Modules/gcmodule.c:326: visit_decref: Assertion `gc->gc.gc_refs != 0' failed.

Program received signal SIGABRT, Aborted.
0x00007ffff6d95d95 in raise () from /lib64/libc.so.6
```
Hence: No `Fatal Python error: UNREF invalid object`.
Further:

```
(gdb) bt
#0  0x00007ffff6d95d95 in raise () from /lib64/libc.so.6
#1  0x00007ffff6d972ab in abort () from /lib64/libc.so.6
#2  0x00007ffff6d8e8fe in __assert_fail_base () from /lib64/libc.so.6
#3  0x00007ffff6d8e9a2 in __assert_fail () from /lib64/libc.so.6
#4  0x00007ffff7b12a19 in visit_decref (op=0x1462f40, data=0x0) at Modules/gcmodule.c:326
#5  0x00007fffeecdcfe1 in __pyx_tp_traverse_4sage_9structure_15category_object_CategoryObject (o=0x14b7d30, v=0x7ffff7b1295e <visit_decref>, a=0x0) at sage/structure/category_object.c:8971
#6  0x00007fffeef4724f in __pyx_tp_traverse_4sage_9structure_6parent_Parent (o=0x14b7d30, v=0x7ffff7b1295e <visit_decref>, a=0x0) at sage/structure/parent.c:21293
#7  0x00007fffef18a97c in __pyx_tp_traverse_4sage_9structure_10parent_old_Parent (o=0x14b7d30, v=0x7ffff7b1295e <visit_decref>, a=0x0) at sage/structure/parent_old.c:7253
#8  0x00007fffef39ab57 in __pyx_tp_traverse_4sage_9structure_11parent_base_ParentWithBase (o=0x14b7d30, v=0x7ffff7b1295e <visit_decref>, a=0x0) at sage/structure/parent_base.c:1892
#9  0x00007ffff7a4c572 in subtype_traverse (self=0x14b7d30, visit=0x7ffff7b1295e <visit_decref>, arg=0x0) at Objects/typeobject.c:838
...
#32 0x00007fffecc2bcbe in __Pyx_ImportModule (name=0x7fffecc2fc6c "sage.rings.integer") at sage/rings/complex_double.c:18370
#33 0x00007fffecc2b951 in __Pyx_ImportType (module_name=0x7fffecc2fc6c "sage.rings.integer", class_name=0x7fffecc2fc64 "Integer", size=64, strict=1) at sage/rings/complex_double.c:18319
#34 0x00007fffecc25b46 in initcomplex_double () at sage/rings/complex_double.c:16572
#35 0x00007ffff7ae9282 in _PyImport_LoadDynamicModule (name=0x7ffffffed660 "sage.rings.complex_double", 
...
```

So, "Volker's" error is in `padic_ZZ_pX_element`, but mine is in `sage.rings.integer`. Moreover, my gdb backtrace is a lot shorter, just 109 lines.

By the way: 

```
>>> from sage.rings.integer_ring import IntegerRing
```
fails with an import error -- but there is no crash! So, there seems to be something else wrong, not just the refcount.



---

archive/issue_comments_180070.json:
```json
{
    "body": "<a id='comment:18'></a>What you get is similar to what I get (without gdb).\nAlthough the failing place is different as I call ./sage -c \"1+1\" which must import something else (I'd say sage/all.py) as all_cmdline.py.\n\nNot sure why Volker's output differs.\n\nAnyway, I think we should now focus on trying all of this with #13832.\n(Don't forget to rebuild the Sage library after upgrading Cython.)",
    "created_at": "2012-12-26T21:56:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180070",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:18'></a>What you get is similar to what I get (without gdb).
Although the failing place is different as I call ./sage -c "1+1" which must import something else (I'd say sage/all.py) as all_cmdline.py.

Not sure why Volker's output differs.

Anyway, I think we should now focus on trying all of this with #13832.
(Don't forget to rebuild the Sage library after upgrading Cython.)



---

archive/issue_comments_180071.json:
```json
{
    "body": "<a id='comment:19'></a>Replying to [comment:16 jpflori]:\n> See my long lonely rant at sage-devel https://groups.google.com/d/topic/sage-devel/Wt7uxbDkh_A/discussion, especially the links:\n> * post about weakref problem solved here https://groups.google.com/d/topic/cython-users/4es75DeacRA/discussion\n> * and your ticket for updating cython here #13832\n> Hopefully that will be enough to get Sage to start (and finally get a working #715?).\n\n\nI don't find these links in the discussion at sage-devel, but indeed the announcement on cython-users looks promising! I am now trying to install the cython spkg from #13832. I guess after installing it I have to do sage -ba, right?",
    "created_at": "2012-12-26T21:58:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180071",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:19'></a>Replying to [comment:16 jpflori]:
> See my long lonely rant at sage-devel https://groups.google.com/d/topic/sage-devel/Wt7uxbDkh_A/discussion, especially the links:
> * post about weakref problem solved here https://groups.google.com/d/topic/cython-users/4es75DeacRA/discussion
> * and your ticket for updating cython here #13832
> Hopefully that will be enough to get Sage to start (and finally get a working #715?).


I don't find these links in the discussion at sage-devel, but indeed the announcement on cython-users looks promising! I am now trying to install the cython spkg from #13832. I guess after installing it I have to do sage -ba, right?



---

archive/issue_comments_180072.json:
```json
{
    "body": "<a id='comment:20'></a>Replying to [comment:19 SimonKing]:\n> Replying to [comment:16 jpflori]:\n> > See my long lonely rant at sage-devel https://groups.google.com/d/topic/sage-devel/Wt7uxbDkh_A/discussion, especially the links:\n> > * post about weakref problem solved here https://groups.google.com/d/topic/cython-users/4es75DeacRA/discussion\n> > * and your ticket for updating cython here #13832\n> > Hopefully that will be enough to get Sage to start (and finally get a working #715?).\n\n> \n> I don't find these links in the discussion at sage-devel, but indeed the announcement on cython-users looks promising! I am now trying to install the cython spkg from #13832. I guess after installing it I have to do sage -ba, right?\n\nNot really sure :)\nI touched everything in sage/structure hoping it will be enough.\n\nIf the bug persists, I'll report my minimal example on cython-users.",
    "created_at": "2012-12-26T22:02:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180072",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:20'></a>Replying to [comment:19 SimonKing]:
> Replying to [comment:16 jpflori]:
> > See my long lonely rant at sage-devel https://groups.google.com/d/topic/sage-devel/Wt7uxbDkh_A/discussion, especially the links:
> > * post about weakref problem solved here https://groups.google.com/d/topic/cython-users/4es75DeacRA/discussion
> > * and your ticket for updating cython here #13832
> > Hopefully that will be enough to get Sage to start (and finally get a working #715?).

> 
> I don't find these links in the discussion at sage-devel, but indeed the announcement on cython-users looks promising! I am now trying to install the cython spkg from #13832. I guess after installing it I have to do sage -ba, right?

Not really sure :)
I touched everything in sage/structure hoping it will be enough.

If the bug persists, I'll report my minimal example on cython-users.



---

archive/issue_comments_180073.json:
```json
{
    "body": "<a id='comment:21'></a>Ok now my first errors with the pexpect interfaces are gone! Great!\n\nBut I now get an error similar to Volker's one.\nI hope that it is just some files in sage/rings/which were not rebuilt.",
    "created_at": "2012-12-26T22:10:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180073",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:21'></a>Ok now my first errors with the pexpect interfaces are gone! Great!

But I now get an error similar to Volker's one.
I hope that it is just some files in sage/rings/which were not rebuilt.



---

archive/issue_comments_180074.json:
```json
{
    "body": "<a id='comment:22'></a>I'll need a bit longer to test, because I *did* sage -ba. I thought that, if Cython gets updated, then one certainly needs to rebuild all pyx files.",
    "created_at": "2012-12-26T22:15:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180074",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:22'></a>I'll need a bit longer to test, because I *did* sage -ba. I thought that, if Cython gets updated, then one certainly needs to rebuild all pyx files.



---

archive/issue_comments_180075.json:
```json
{
    "body": "<a id='comment:23'></a>You're right, I just did not remember about the -a flag.",
    "created_at": "2012-12-26T22:17:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180075",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:23'></a>You're right, I just did not remember about the -a flag.



---

archive/issue_comments_180076.json:
```json
{
    "body": "<a id='comment:24'></a>Replying to [comment:17 SimonKing]:\n> Interestingly, the error on my laptop looks different from what Volker reported in comment:15:\n> ...\n> dlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/integer.so\", 2);\n> python: Modules/gcmodule.c:326: visit_decref: Assertion `gc->gc.gc_refs != 0' failed.\n> ...\n\n\nYou die in a garbage collection cycle, presumably because you have < 32 GB RAM (= my desktop). So the garbage collector runs earlier.\n\nWe both get killed by integer arithmetic, which points to a circular import problem. The Integer class is a particularly bad case of stuff that tries to define and compute everything upon import. At the same time it is interleaved with the rationals class, so it is full of circular imports. Which almost certainly equals half-constructed objects during the circular import fest.",
    "created_at": "2012-12-26T23:47:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180076",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:24'></a>Replying to [comment:17 SimonKing]:
> Interestingly, the error on my laptop looks different from what Volker reported in comment:15:
> ...
> dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/integer.so", 2);
> python: Modules/gcmodule.c:326: visit_decref: Assertion `gc->gc.gc_refs != 0' failed.
> ...


You die in a garbage collection cycle, presumably because you have < 32 GB RAM (= my desktop). So the garbage collector runs earlier.

We both get killed by integer arithmetic, which points to a circular import problem. The Integer class is a particularly bad case of stuff that tries to define and compute everything upon import. At the same time it is interleaved with the rationals class, so it is full of circular imports. Which almost certainly equals half-constructed objects during the circular import fest.



---

archive/issue_comments_180077.json:
```json
{
    "body": "<a id='comment:25'></a>Ok now I also get:\n\n```\n./sage -sh\n... gdb python\n... r -v\n...\nimport sage.rings.padics.padic_ext_element # dynamically loaded from /home/jp/boulot/sage/sage-5.6.beta0/local/lib/python2.7/site-packages/sage/rings/padics/padic_ext_element.so\nFatal Python error: UNREF invalid object\n\nProgram received signal SIGABRT, Aborted.\n0x00007ffff6cdfdd5 in raise () from /lib/x86_64-linux-gnu/libc.so.6\n```\nwith bt\n\n```\n(gdb) bt                                                                      \n#0  0x00007ffff6cdfdd5 in raise () from /lib/x86_64-linux-gnu/libc.so.6\n#1  0x00007ffff6ce2efb in abort () from /lib/x86_64-linux-gnu/libc.so.6\n#2  0x00007ffff7afa73c in Py_FatalError (\n    msg=0x7ffff7b441d1 \"UNREF invalid object\") at Python/pythonrun.c:1677\n#3  0x00007ffff7a2c31e in _Py_ForgetReference (op=0x1e18440)\n    at Objects/object.c:2223\n#4  0x00007ffff7a2c371 in _Py_Dealloc (op=0x1e18440) at Objects/object.c:2242\n#5  0x00007fffde01b3ac in initpadic_ZZ_pX_element ()\n    at sage/rings/padics/padic_ZZ_pX_element.cpp:9650\n#6  0x00007ffff7aea57e in _PyImport_LoadDynamicModule (\n    name=0x7ffffffe4910 \"sage.rings.padics.padic_ZZ_pX_element\", \n    pathname=0x7ffffffe3810 \"/home/jp/boulot/sage/sage-5.6.beta0/local/lib/python2.7/site-packages/sage/rings/padics/padic_ZZ_pX_element.so\", fp=0x1e13800)\n    at ./Python/importdl.c:53\n#7  0x00007ffff7ae64a5 in load_module (\n    name=0x7ffffffe4910 \"sage.rings.padics.padic_ZZ_pX_element\", \n    fp=0x1e13800, \n    pathname=0x7ffffffe3810 \"/home/jp/boulot/sage/sage-5.6.beta0/local/lib/python2.7/site-packages/sage/rings/padics/padic_ZZ_pX_element.so\", type=3, \n    loader=0x0) at Python/import.c:1831\n#8  0x00007ffff7ae8776 in import_submodule (mod=0x1acc600, \n    subname=0x7ffffffe4922 \"padic_ZZ_pX_element\", \n    fullname=0x7ffffffe4910 \"sage.rings.padics.padic_ZZ_pX_element\")\n    at Python/import.c:2595\n#9  0x00007ffff7ae7c9a in load_next (mod=0x1acc600, altmod=0x1acc600, \n    p_name=0x7ffffffe48f8, \n    buf=0x7ffffffe4910 \"sage.rings.padics.padic_ZZ_pX_element\", \n    p_buflen=0x7ffffffe4908) at Python/import.c:2415\n```\nand seems to be caused by\n\n```\nbig = two**128 + one\n#this should not fit in a long, since it's supposed to be bigger than any valid absolute precision.\n```",
    "created_at": "2012-12-26T23:54:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180077",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:25'></a>Ok now I also get:

```
./sage -sh
... gdb python
... r -v
...
import sage.rings.padics.padic_ext_element # dynamically loaded from /home/jp/boulot/sage/sage-5.6.beta0/local/lib/python2.7/site-packages/sage/rings/padics/padic_ext_element.so
Fatal Python error: UNREF invalid object

Program received signal SIGABRT, Aborted.
0x00007ffff6cdfdd5 in raise () from /lib/x86_64-linux-gnu/libc.so.6
```
with bt

```
(gdb) bt                                                                      
#0  0x00007ffff6cdfdd5 in raise () from /lib/x86_64-linux-gnu/libc.so.6
#1  0x00007ffff6ce2efb in abort () from /lib/x86_64-linux-gnu/libc.so.6
#2  0x00007ffff7afa73c in Py_FatalError (
    msg=0x7ffff7b441d1 "UNREF invalid object") at Python/pythonrun.c:1677
#3  0x00007ffff7a2c31e in _Py_ForgetReference (op=0x1e18440)
    at Objects/object.c:2223
#4  0x00007ffff7a2c371 in _Py_Dealloc (op=0x1e18440) at Objects/object.c:2242
#5  0x00007fffde01b3ac in initpadic_ZZ_pX_element ()
    at sage/rings/padics/padic_ZZ_pX_element.cpp:9650
#6  0x00007ffff7aea57e in _PyImport_LoadDynamicModule (
    name=0x7ffffffe4910 "sage.rings.padics.padic_ZZ_pX_element", 
    pathname=0x7ffffffe3810 "/home/jp/boulot/sage/sage-5.6.beta0/local/lib/python2.7/site-packages/sage/rings/padics/padic_ZZ_pX_element.so", fp=0x1e13800)
    at ./Python/importdl.c:53
#7  0x00007ffff7ae64a5 in load_module (
    name=0x7ffffffe4910 "sage.rings.padics.padic_ZZ_pX_element", 
    fp=0x1e13800, 
    pathname=0x7ffffffe3810 "/home/jp/boulot/sage/sage-5.6.beta0/local/lib/python2.7/site-packages/sage/rings/padics/padic_ZZ_pX_element.so", type=3, 
    loader=0x0) at Python/import.c:1831
#8  0x00007ffff7ae8776 in import_submodule (mod=0x1acc600, 
    subname=0x7ffffffe4922 "padic_ZZ_pX_element", 
    fullname=0x7ffffffe4910 "sage.rings.padics.padic_ZZ_pX_element")
    at Python/import.c:2595
#9  0x00007ffff7ae7c9a in load_next (mod=0x1acc600, altmod=0x1acc600, 
    p_name=0x7ffffffe48f8, 
    buf=0x7ffffffe4910 "sage.rings.padics.padic_ZZ_pX_element", 
    p_buflen=0x7ffffffe4908) at Python/import.c:2415
```
and seems to be caused by

```
big = two**128 + one
#this should not fit in a long, since it's supposed to be bigger than any valid absolute precision.
```



---

archive/issue_comments_180078.json:
```json
{
    "body": "<a id='comment:26'></a>Replying to [comment:24 vbraun]:\n> Replying to [comment:17 SimonKing]:\n> > Interestingly, the error on my laptop looks different from what Volker reported in comment:15:\n> > ...\n> > dlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/integer.so\", 2);\n> > python: Modules/gcmodule.c:326: visit_decref: Assertion `gc->gc.gc_refs != 0' failed.\n> > ...\n\n> \n> You die in a garbage collection cycle, presumably because you have < 32 GB RAM (= my desktop). So the garbage collector runs earlier.\n\nAre you sure?\nI'd say this really looks like the weakref mess fixed up in 0.17.3.\n> \n> We both get killed by integer arithmetic, which points to a circular import problem. The Integer class is a particularly bad case of stuff that tries to define and compute everything upon import. At the same time it is interleaved with the rationals class, so it is full of circular imports. Which almost certainly equals half-constructed objects during the circular import fest.",
    "created_at": "2012-12-26T23:57:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180078",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:26'></a>Replying to [comment:24 vbraun]:
> Replying to [comment:17 SimonKing]:
> > Interestingly, the error on my laptop looks different from what Volker reported in comment:15:
> > ...
> > dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/integer.so", 2);
> > python: Modules/gcmodule.c:326: visit_decref: Assertion `gc->gc.gc_refs != 0' failed.
> > ...

> 
> You die in a garbage collection cycle, presumably because you have < 32 GB RAM (= my desktop). So the garbage collector runs earlier.

Are you sure?
I'd say this really looks like the weakref mess fixed up in 0.17.3.
> 
> We both get killed by integer arithmetic, which points to a circular import problem. The Integer class is a particularly bad case of stuff that tries to define and compute everything upon import. At the same time it is interleaved with the rationals class, so it is full of circular imports. Which almost certainly equals half-constructed objects during the circular import fest.



---

archive/issue_comments_180079.json:
```json
{
    "body": "<a id='comment:27'></a>According to\nhttp://realmike.org/blog/2012/07/08/embedding-python-tutorial-part-1/\nwe might need to compile files by passing -DPy_DEBUG.\nDoes this really changes anything in python headers?\ngrep indeed finds occurences of it in $SAGE_LOCAL/include/python2.7",
    "created_at": "2012-12-27T00:07:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180079",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:27'></a>According to
http://realmike.org/blog/2012/07/08/embedding-python-tutorial-part-1/
we might need to compile files by passing -DPy_DEBUG.
Does this really changes anything in python headers?
grep indeed finds occurences of it in $SAGE_LOCAL/include/python2.7



---

archive/issue_comments_180080.json:
```json
{
    "body": "<a id='comment:28'></a>Replying to [comment:26 jpflori]:\n> Replying to [comment:24 vbraun]:\n> > Replying to [comment:17 SimonKing]:\n> > > Interestingly, the error on my laptop looks different from what Volker reported in comment:15:\n> > > ...\n> > > dlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/integer.so\", 2);\n> > > python: Modules/gcmodule.c:326: visit_decref: Assertion `gc->gc.gc_refs != 0' failed.\n> > > ...\n\n> > \n> > You die in a garbage collection cycle, presumably because you have < 32 GB RAM (= my desktop). So the garbage collector runs earlier.\n\n> Are you sure?\n> I'd say this really looks like the weakref mess fixed up in 0.17.3.\n\n\nAfter upgrading to Cython 0.17.3, I get an error that seems to confirm what Volker stated.\n\nSo, now we have to try and find out where the padics problem comes from.\n\nNote, however, that in pure python I still get a \"harmless\" import error when I want to do\n\n```\nPython 2.7.3 (default, Dec 26 2012, 19:09:45) \n[GCC 4.6.2] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> from sage.rings.integer_ring import IntegerRing\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"integer.pxd\", line 9, in init sage.rings.integer_ring (sage/rings/integer_ring.c:12178)\n  File \"integer.pyx\", line 170, in init sage.rings.integer (sage/rings/integer.c:38390)\n  File \"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/infinity.py\", line 200, in <module>\n    import sage.rings.rational\n  File \"fast_arith.pxd\", line 5, in init sage.rings.rational (sage/rings/rational.c:27828)\n  File \"fast_arith.pyx\", line 51, in init sage.rings.fast_arith (sage/rings/fast_arith.c:8060)\nImportError: cannot import name ZZ\n[133346 refs]\n>>> quit()\n```\nHence, no crash, but something is wrong with the ring of integers,",
    "created_at": "2012-12-27T00:14:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180080",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:28'></a>Replying to [comment:26 jpflori]:
> Replying to [comment:24 vbraun]:
> > Replying to [comment:17 SimonKing]:
> > > Interestingly, the error on my laptop looks different from what Volker reported in comment:15:
> > > ...
> > > dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/integer.so", 2);
> > > python: Modules/gcmodule.c:326: visit_decref: Assertion `gc->gc.gc_refs != 0' failed.
> > > ...

> > 
> > You die in a garbage collection cycle, presumably because you have < 32 GB RAM (= my desktop). So the garbage collector runs earlier.

> Are you sure?
> I'd say this really looks like the weakref mess fixed up in 0.17.3.


After upgrading to Cython 0.17.3, I get an error that seems to confirm what Volker stated.

So, now we have to try and find out where the padics problem comes from.

Note, however, that in pure python I still get a "harmless" import error when I want to do

```
Python 2.7.3 (default, Dec 26 2012, 19:09:45) 
[GCC 4.6.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> from sage.rings.integer_ring import IntegerRing
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "integer.pxd", line 9, in init sage.rings.integer_ring (sage/rings/integer_ring.c:12178)
  File "integer.pyx", line 170, in init sage.rings.integer (sage/rings/integer.c:38390)
  File "/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/infinity.py", line 200, in <module>
    import sage.rings.rational
  File "fast_arith.pxd", line 5, in init sage.rings.rational (sage/rings/rational.c:27828)
  File "fast_arith.pyx", line 51, in init sage.rings.fast_arith (sage/rings/fast_arith.c:8060)
ImportError: cannot import name ZZ
[133346 refs]
>>> quit()
```
Hence, no crash, but something is wrong with the ring of integers,



---

archive/issue_comments_180081.json:
```json
{
    "body": "<a id='comment:29'></a>Question about the way to proceed:\n\nThis ticket provides the debug version of the python spkg, and it has a positive review. However, in the debug version, Sage does not even start.\n\nSo, shall we open a new ticket \"Make Sage start when Python is build under SAGE_DEBUG\", or shall we try to resolve the starting problem *here*?\n\nI suggest to keep it here, thus changing the status into \"needs work\".",
    "created_at": "2012-12-27T00:18:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180081",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:29'></a>Question about the way to proceed:

This ticket provides the debug version of the python spkg, and it has a positive review. However, in the debug version, Sage does not even start.

So, shall we open a new ticket "Make Sage start when Python is build under SAGE_DEBUG", or shall we try to resolve the starting problem *here*?

I suggest to keep it here, thus changing the status into "needs work".



---

archive/issue_comments_180082.json:
```json
{
    "body": "<a id='comment:30'></a>For the record: These imports occur when one tries to import the integer ring, as reported by `python -v`:\n\n```\n>>> import sage\nimport sage # directory /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/__init__.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/__init__.py\nimport sage # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/__init__.pyc\n[39292 refs]\n>>> from sage.rings.integer_ring import IntegerRing\nimport sage.rings # directory /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/__init__.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/__init__.py\nimport sage.rings # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/__init__.pyc\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/integer_ring.so\", 2);\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/ring.so\", 2);\nimport sage.structure # directory /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/__init__.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/__init__.py\nimport sage.structure # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/__init__.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/dynamic_class.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/dynamic_class.py\nimport sage.structure.dynamic_class # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/dynamic_class.pyc\nimport sage.misc # directory /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/__init__.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/__init__.py\nimport sage.misc # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/__init__.pyc\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/cachefunc.so\", 2);\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/function_mangling.so\", 2);\nimport sage.misc.function_mangling # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/function_mangling.so\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/sageinspect.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/sageinspect.py\nimport sage.misc.sageinspect # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/sageinspect.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/ast.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/ast.py\nimport ast # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/ast.pyc\nimport _ast # builtin\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/inspect.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/inspect.py\nimport inspect # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/inspect.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/string.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/string.py\nimport string # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/string.pyc\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/strop.so\", 2);\nimport strop # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/strop.so\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/dis.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/dis.py\nimport dis # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/dis.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/opcode.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/opcode.py\nimport opcode # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/opcode.pyc\nimport imp # builtin\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/tokenize.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/tokenize.py\nimport tokenize # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/tokenize.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/token.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/token.py\nimport token # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/token.pyc\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/operator.so\", 2);\nimport operator # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/operator.so\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/collections.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/collections.py\nimport collections # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/collections.pyc\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/_collections.so\", 2);\nimport _collections # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/_collections.so\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/keyword.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/keyword.py\nimport keyword # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/keyword.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/heapq.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/heapq.py\nimport heapq # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/heapq.pyc\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/itertools.so\", 2);\nimport itertools # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/itertools.so\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/bisect.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/bisect.py\nimport bisect # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/bisect.pyc\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/_bisect.so\", 2);\nimport _bisect # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/_bisect.so\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/_heapq.so\", 2);\nimport _heapq # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/_heapq.so\nimport thread # builtin\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/functools.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/functools.py\nimport functools # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/functools.pyc\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/_functools.so\", 2);\nimport _functools # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/_functools.so\nimport sage.misc.cachefunc # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/cachefunc.so\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/unique_representation.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/unique_representation.py\nimport sage.structure.unique_representation # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/unique_representation.pyc\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/classcall_metaclass.so\", 2);\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/nested_class.so\", 2);\nimport sage.misc.nested_class # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/nested_class.so\nimport sage.misc.classcall_metaclass # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/classcall_metaclass.so\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/lazy_attribute.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/lazy_attribute.py\nimport sage.misc.lazy_attribute # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/lazy_attribute.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/abstract_method.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/abstract_method.py\nimport sage.misc.abstract_method # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/abstract_method.pyc\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/parent_gens.so\", 2);\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/parent_base.so\", 2);\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/parent_old.so\", 2);\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/parent.so\", 2);\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/category_object.so\", 2);\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/sage_object.so\", 2);\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/cPickle.so\", 2);\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/cStringIO.so\", 2);\nimport cStringIO # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/cStringIO.so\nimport cPickle # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/cPickle.so\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/sage_unittest.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/sage_unittest.py\nimport sage.misc.sage_unittest # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/sage_unittest.pyc\nimport unittest # directory /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/__init__.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/__init__.py\nimport unittest # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/__init__.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/result.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/result.py\nimport unittest.result # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/result.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/StringIO.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/StringIO.py\nimport StringIO # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/StringIO.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/util.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/util.py\nimport unittest.util # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/util.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/case.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/case.py\nimport unittest.case # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/case.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/difflib.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/difflib.py\nimport difflib # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/difflib.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/pprint.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/pprint.py\nimport pprint # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/pprint.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/suite.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/suite.py\nimport unittest.suite # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/suite.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/loader.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/loader.py\nimport unittest.loader # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/loader.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/fnmatch.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/fnmatch.py\nimport fnmatch # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/fnmatch.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/main.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/main.py\nimport unittest.main # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/main.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/runner.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/runner.py\nimport unittest.runner # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/runner.pyc\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/time.so\", 2);\nimport time # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/time.so\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/signals.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/signals.py\nimport unittest.signals # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/signals.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/weakref.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/weakref.py\nimport weakref # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/weakref.pyc\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/zlib.so\", 2);\nimport zlib # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/zlib.so\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/bz2.so\", 2);\nimport bz2 # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/bz2.so\nimport sage.structure.sage_object # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/sage_object.so\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/generators.so\", 2);\nimport sage.structure.generators # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/generators.so\nimport sage.categories # directory /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/__init__.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/__init__.py\nimport sage.categories # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/__init__.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/primer.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/primer.py\nimport sage.categories.primer # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/primer.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/category.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/category.py\nimport sage.categories.category # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/category.pyc\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/c3.so\", 2);\nimport sage.misc.c3 # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/c3.so\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/unknown.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/unknown.py\nimport sage.misc.unknown # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/unknown.pyc\nimport sage.structure.category_object # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/category_object.so\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/coerce_dict.so\", 2);\nimport sage.structure.coerce_dict # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/coerce_dict.so\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/element.so\", 2);\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/misc.so\", 2);\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/sage_itertools.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/sage_itertools.py\nimport sage.misc.sage_itertools # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/sage_itertools.pyc\nimport sage.structure.misc # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/misc.so\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/lazy_format.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/lazy_format.py\nimport sage.misc.lazy_format # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/lazy_format.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/copy.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/copy.py\nimport copy # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/copy.pyc\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/coerce.so\", 2);\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/map.so\", 2);\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/homset.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/homset.py\nimport sage.categories.homset # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/homset.pyc\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/morphism.so\", 2);\nimport sage.categories.morphism # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/morphism.so\nimport sage.categories.map # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/map.so\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/functor.so\", 2);\nimport sage.categories.functor # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/functor.so\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/action.so\", 2);\nimport sage.categories.action # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/action.so\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/coerce_exceptions.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/coerce_exceptions.py\nimport sage.structure.coerce_exceptions # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/coerce_exceptions.pyc\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/coerce_actions.so\", 2);\nimport sage.structure.coerce_actions # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/coerce_actions.so\nimport sage.structure.coerce # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/coerce.so\nimport sage.structure.element # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/element.so\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/sets_cat.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/sets_cat.py\nimport sage.categories.sets_cat # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/sets_cat.pyc\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/lazy_import.so\", 2);\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/shutil.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/shutil.py\nimport shutil # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/shutil.pyc\nimport pwd # builtin\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/grp.so\", 2);\nimport grp # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/grp.so\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/tempfile.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/tempfile.py\nimport tempfile # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/tempfile.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/random.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/random.py\nimport random # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/random.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/__future__.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/__future__.py\nimport __future__ # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/__future__.pyc\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/math.so\", 2);\nimport math # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/math.so\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/binascii.so\", 2);\nimport binascii # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/binascii.so\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/hashlib.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/hashlib.py\nimport hashlib # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/hashlib.pyc\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/_hashlib.so\", 2);\nimport _hashlib # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/_hashlib.so\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/_random.so\", 2);\nimport _random # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/_random.so\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/fcntl.so\", 2);\nimport fcntl # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/fcntl.so\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/lazy_import_cache.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/lazy_import_cache.py\nimport sage.misc.lazy_import_cache # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/lazy_import_cache.pyc\nimport sage.misc.lazy_import # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/lazy_import.so\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/category_singleton.so\", 2);\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/constant_function.so\", 2);\nimport sage.misc.constant_function # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/constant_function.so\nimport sage.categories.category_singleton # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/category_singleton.so\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/sets_with_partial_maps.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/sets_with_partial_maps.py\nimport sage.categories.sets_with_partial_maps # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/sets_with_partial_maps.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/objects.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/objects.py\nimport sage.categories.objects # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/objects.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/subquotients.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/subquotients.py\nimport sage.categories.subquotients # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/subquotients.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/covariant_functorial_construction.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/covariant_functorial_construction.py\nimport sage.categories.covariant_functorial_construction # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/covariant_functorial_construction.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/quotients.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/quotients.py\nimport sage.categories.quotients # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/quotients.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/subobjects.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/subobjects.py\nimport sage.categories.subobjects # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/subobjects.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/isomorphic_objects.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/isomorphic_objects.py\nimport sage.categories.isomorphic_objects # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/isomorphic_objects.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/algebra_functor.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/algebra_functor.py\nimport sage.categories.algebra_functor # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/algebra_functor.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/category_types.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/category_types.py\nimport sage.categories.category_types # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/category_types.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/latex.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/latex.py\nimport sage.misc.latex # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/latex.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/subprocess.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/subprocess.py\nimport subprocess # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/subprocess.pyc\nimport gc # builtin\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/select.so\", 2);\nimport select # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/select.so\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/pickle.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/pickle.py\nimport pickle # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/pickle.pyc\nimport marshal # builtin\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/struct.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/struct.py\nimport struct # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/struct.pyc\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/_struct.so\", 2);\nimport _struct # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/_struct.so\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/temporary_file.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/temporary_file.py\nimport sage.misc.temporary_file # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/temporary_file.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/sage_eval.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/sage_eval.py\nimport sage.misc.sage_eval # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/sage_eval.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/preparser.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/preparser.py\nimport sage.misc.preparser # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/preparser.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/base64.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/base64.py\nimport base64 # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/base64.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/sage_ostools.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/sage_ostools.py\nimport sage.misc.sage_ostools # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/sage_ostools.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/cartesian_product.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/cartesian_product.py\nimport sage.categories.cartesian_product # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/cartesian_product.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/realizations.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/realizations.py\nimport sage.categories.realizations # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/realizations.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/bindable_class.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/bindable_class.py\nimport sage.misc.bindable_class # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/bindable_class.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/with_realizations.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/with_realizations.py\nimport sage.categories.with_realizations # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/with_realizations.pyc\nimport sage.structure.parent # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/parent.so\nimport sage.structure.parent_old # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/parent_old.so\nimport sage.structure.parent_base # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/parent_base.so\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/defaults.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/defaults.py\nimport sage.misc.defaults # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/defaults.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/gens_py.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/gens_py.py\nimport sage.structure.gens_py # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/gens_py.pyc\nimport sage.structure.parent_gens # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/parent_gens.so\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/prandom.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/prandom.py\nimport sage.misc.prandom # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/prandom.pyc\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/randstate.so\", 2);\nimport sage.misc.randstate # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/randstate.so\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/rings.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/rings.py\nimport sage.categories.rings # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/rings.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/rngs.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/rngs.py\nimport sage.categories.rngs # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/rngs.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/commutative_additive_groups.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/commutative_additive_groups.py\nimport sage.categories.commutative_additive_groups # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/commutative_additive_groups.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/commutative_additive_monoids.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/commutative_additive_monoids.py\nimport sage.categories.commutative_additive_monoids # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/commutative_additive_monoids.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/commutative_additive_semigroups.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/commutative_additive_semigroups.py\nimport sage.categories.commutative_additive_semigroups # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/commutative_additive_semigroups.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/additive_magmas.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/additive_magmas.py\nimport sage.categories.additive_magmas # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/additive_magmas.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/semigroups.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/semigroups.py\nimport sage.categories.semigroups # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/semigroups.pyc\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/misc_c.so\", 2);\nimport sage.misc.misc_c # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/misc_c.so\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/magmas.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/magmas.py\nimport sage.categories.magmas # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/magmas.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/semirings.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/semirings.py\nimport sage.categories.semirings # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/semirings.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/monoids.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/monoids.py\nimport sage.categories.monoids # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/monoids.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/commutative_rings.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/commutative_rings.py\nimport sage.categories.commutative_rings # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/commutative_rings.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/integral_domains.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/integral_domains.py\nimport sage.categories.integral_domains # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/integral_domains.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/domains.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/domains.py\nimport sage.categories.domains # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/domains.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/principal_ideal_domains.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/principal_ideal_domains.py\nimport sage.categories.principal_ideal_domains # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/principal_ideal_domains.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/unique_factorization_domains.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/unique_factorization_domains.py\nimport sage.categories.unique_factorization_domains # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/unique_factorization_domains.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/gcd_domains.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/gcd_domains.py\nimport sage.categories.gcd_domains # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/gcd_domains.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/euclidean_domains.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/euclidean_domains.py\nimport sage.categories.euclidean_domains # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/euclidean_domains.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/algebras.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/algebras.py\nimport sage.categories.algebras # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/algebras.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/dual.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/dual.py\nimport sage.categories.dual # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/dual.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/tensor.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/tensor.py\nimport sage.categories.tensor # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/tensor.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/modules.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/modules.py\nimport sage.categories.modules # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/modules.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/bimodules.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/bimodules.py\nimport sage.categories.bimodules # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/bimodules.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/left_modules.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/left_modules.py\nimport sage.categories.left_modules # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/left_modules.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/right_modules.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/right_modules.py\nimport sage.categories.right_modules # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/right_modules.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/fields.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/fields.py\nimport sage.categories.fields # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/fields.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/division_rings.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/division_rings.py\nimport sage.categories.division_rings # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/division_rings.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/field.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/field.py\nimport sage.rings.field # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/field.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/vector_spaces.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/vector_spaces.py\nimport sage.categories.vector_spaces # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/vector_spaces.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/commutative_algebras.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/commutative_algebras.py\nimport sage.categories.commutative_algebras # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/commutative_algebras.pyc\nimport sage.rings.ring # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/ring.so\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/integer.so\", 2);\nimport sage.libs # directory /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/libs\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/libs/__init__.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/libs/__init__.py\nimport sage.libs # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/libs/__init__.pyc\nimport sage.libs.pari # directory /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/libs/pari\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/libs/pari/__init__.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/libs/pari/__init__.py\nimport sage.libs.pari # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/libs/pari/__init__.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/libs/pari/all.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/libs/pari/all.py\nimport sage.libs.pari.all # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/libs/pari/all.pyc\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/libs/pari/gen.so\", 2);\nimport sage.libs.pari.gen # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/libs/pari/gen.so\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/allocator.so\", 2);\nimport sage.misc.allocator # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/allocator.so\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/infinity.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/infinity.py\nimport sage.rings.infinity # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/infinity.pyc\n# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/ring_element.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/ring_element.py\nimport sage.rings.ring_element # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/ring_element.pyc\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/rational.so\", 2);\ndlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/fast_arith.so\", 2);\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"integer.pxd\", line 9, in init sage.rings.integer_ring (sage/rings/integer_ring.c:12178)\n  File \"integer.pyx\", line 170, in init sage.rings.integer (sage/rings/integer.c:38390)\n  File \"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/infinity.py\", line 200, in <module>\n    import sage.rings.rational\n  File \"fast_arith.pxd\", line 5, in init sage.rings.rational (sage/rings/rational.c:27828)\n  File \"fast_arith.pyx\", line 51, in init sage.rings.fast_arith (sage/rings/fast_arith.c:8060)\nImportError: cannot import name ZZ\n```\n\nScary. All \"usual suspects\" are in place: Weak references, coercion, categories.\n\nBut what goes wrong? Is it a circular import? If so, what can be done to improve it?",
    "created_at": "2012-12-27T00:29:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180082",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:30'></a>For the record: These imports occur when one tries to import the integer ring, as reported by `python -v`:

```
>>> import sage
import sage # directory /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/__init__.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/__init__.py
import sage # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/__init__.pyc
[39292 refs]
>>> from sage.rings.integer_ring import IntegerRing
import sage.rings # directory /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/__init__.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/__init__.py
import sage.rings # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/__init__.pyc
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/integer_ring.so", 2);
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/ring.so", 2);
import sage.structure # directory /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/__init__.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/__init__.py
import sage.structure # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/__init__.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/dynamic_class.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/dynamic_class.py
import sage.structure.dynamic_class # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/dynamic_class.pyc
import sage.misc # directory /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/__init__.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/__init__.py
import sage.misc # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/__init__.pyc
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/cachefunc.so", 2);
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/function_mangling.so", 2);
import sage.misc.function_mangling # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/function_mangling.so
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/sageinspect.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/sageinspect.py
import sage.misc.sageinspect # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/sageinspect.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/ast.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/ast.py
import ast # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/ast.pyc
import _ast # builtin
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/inspect.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/inspect.py
import inspect # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/inspect.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/string.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/string.py
import string # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/string.pyc
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/strop.so", 2);
import strop # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/strop.so
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/dis.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/dis.py
import dis # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/dis.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/opcode.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/opcode.py
import opcode # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/opcode.pyc
import imp # builtin
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/tokenize.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/tokenize.py
import tokenize # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/tokenize.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/token.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/token.py
import token # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/token.pyc
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/operator.so", 2);
import operator # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/operator.so
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/collections.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/collections.py
import collections # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/collections.pyc
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/_collections.so", 2);
import _collections # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/_collections.so
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/keyword.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/keyword.py
import keyword # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/keyword.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/heapq.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/heapq.py
import heapq # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/heapq.pyc
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/itertools.so", 2);
import itertools # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/itertools.so
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/bisect.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/bisect.py
import bisect # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/bisect.pyc
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/_bisect.so", 2);
import _bisect # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/_bisect.so
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/_heapq.so", 2);
import _heapq # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/_heapq.so
import thread # builtin
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/functools.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/functools.py
import functools # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/functools.pyc
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/_functools.so", 2);
import _functools # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/_functools.so
import sage.misc.cachefunc # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/cachefunc.so
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/unique_representation.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/unique_representation.py
import sage.structure.unique_representation # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/unique_representation.pyc
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/classcall_metaclass.so", 2);
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/nested_class.so", 2);
import sage.misc.nested_class # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/nested_class.so
import sage.misc.classcall_metaclass # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/classcall_metaclass.so
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/lazy_attribute.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/lazy_attribute.py
import sage.misc.lazy_attribute # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/lazy_attribute.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/abstract_method.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/abstract_method.py
import sage.misc.abstract_method # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/abstract_method.pyc
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/parent_gens.so", 2);
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/parent_base.so", 2);
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/parent_old.so", 2);
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/parent.so", 2);
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/category_object.so", 2);
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/sage_object.so", 2);
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/cPickle.so", 2);
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/cStringIO.so", 2);
import cStringIO # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/cStringIO.so
import cPickle # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/cPickle.so
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/sage_unittest.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/sage_unittest.py
import sage.misc.sage_unittest # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/sage_unittest.pyc
import unittest # directory /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/__init__.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/__init__.py
import unittest # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/__init__.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/result.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/result.py
import unittest.result # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/result.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/StringIO.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/StringIO.py
import StringIO # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/StringIO.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/util.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/util.py
import unittest.util # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/util.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/case.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/case.py
import unittest.case # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/case.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/difflib.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/difflib.py
import difflib # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/difflib.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/pprint.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/pprint.py
import pprint # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/pprint.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/suite.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/suite.py
import unittest.suite # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/suite.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/loader.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/loader.py
import unittest.loader # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/loader.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/fnmatch.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/fnmatch.py
import fnmatch # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/fnmatch.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/main.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/main.py
import unittest.main # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/main.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/runner.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/runner.py
import unittest.runner # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/runner.pyc
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/time.so", 2);
import time # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/time.so
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/signals.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/signals.py
import unittest.signals # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/unittest/signals.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/weakref.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/weakref.py
import weakref # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/weakref.pyc
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/zlib.so", 2);
import zlib # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/zlib.so
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/bz2.so", 2);
import bz2 # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/bz2.so
import sage.structure.sage_object # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/sage_object.so
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/generators.so", 2);
import sage.structure.generators # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/generators.so
import sage.categories # directory /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/__init__.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/__init__.py
import sage.categories # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/__init__.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/primer.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/primer.py
import sage.categories.primer # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/primer.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/category.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/category.py
import sage.categories.category # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/category.pyc
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/c3.so", 2);
import sage.misc.c3 # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/c3.so
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/unknown.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/unknown.py
import sage.misc.unknown # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/unknown.pyc
import sage.structure.category_object # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/category_object.so
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/coerce_dict.so", 2);
import sage.structure.coerce_dict # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/coerce_dict.so
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/element.so", 2);
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/misc.so", 2);
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/sage_itertools.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/sage_itertools.py
import sage.misc.sage_itertools # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/sage_itertools.pyc
import sage.structure.misc # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/misc.so
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/lazy_format.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/lazy_format.py
import sage.misc.lazy_format # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/lazy_format.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/copy.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/copy.py
import copy # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/copy.pyc
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/coerce.so", 2);
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/map.so", 2);
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/homset.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/homset.py
import sage.categories.homset # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/homset.pyc
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/morphism.so", 2);
import sage.categories.morphism # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/morphism.so
import sage.categories.map # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/map.so
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/functor.so", 2);
import sage.categories.functor # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/functor.so
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/action.so", 2);
import sage.categories.action # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/action.so
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/coerce_exceptions.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/coerce_exceptions.py
import sage.structure.coerce_exceptions # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/coerce_exceptions.pyc
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/coerce_actions.so", 2);
import sage.structure.coerce_actions # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/coerce_actions.so
import sage.structure.coerce # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/coerce.so
import sage.structure.element # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/element.so
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/sets_cat.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/sets_cat.py
import sage.categories.sets_cat # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/sets_cat.pyc
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/lazy_import.so", 2);
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/shutil.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/shutil.py
import shutil # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/shutil.pyc
import pwd # builtin
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/grp.so", 2);
import grp # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/grp.so
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/tempfile.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/tempfile.py
import tempfile # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/tempfile.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/random.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/random.py
import random # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/random.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/__future__.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/__future__.py
import __future__ # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/__future__.pyc
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/math.so", 2);
import math # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/math.so
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/binascii.so", 2);
import binascii # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/binascii.so
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/hashlib.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/hashlib.py
import hashlib # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/hashlib.pyc
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/_hashlib.so", 2);
import _hashlib # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/_hashlib.so
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/_random.so", 2);
import _random # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/_random.so
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/fcntl.so", 2);
import fcntl # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/fcntl.so
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/lazy_import_cache.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/lazy_import_cache.py
import sage.misc.lazy_import_cache # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/lazy_import_cache.pyc
import sage.misc.lazy_import # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/lazy_import.so
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/category_singleton.so", 2);
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/constant_function.so", 2);
import sage.misc.constant_function # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/constant_function.so
import sage.categories.category_singleton # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/category_singleton.so
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/sets_with_partial_maps.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/sets_with_partial_maps.py
import sage.categories.sets_with_partial_maps # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/sets_with_partial_maps.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/objects.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/objects.py
import sage.categories.objects # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/objects.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/subquotients.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/subquotients.py
import sage.categories.subquotients # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/subquotients.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/covariant_functorial_construction.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/covariant_functorial_construction.py
import sage.categories.covariant_functorial_construction # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/covariant_functorial_construction.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/quotients.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/quotients.py
import sage.categories.quotients # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/quotients.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/subobjects.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/subobjects.py
import sage.categories.subobjects # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/subobjects.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/isomorphic_objects.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/isomorphic_objects.py
import sage.categories.isomorphic_objects # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/isomorphic_objects.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/algebra_functor.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/algebra_functor.py
import sage.categories.algebra_functor # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/algebra_functor.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/category_types.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/category_types.py
import sage.categories.category_types # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/category_types.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/latex.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/latex.py
import sage.misc.latex # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/latex.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/subprocess.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/subprocess.py
import subprocess # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/subprocess.pyc
import gc # builtin
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/select.so", 2);
import select # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/select.so
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/pickle.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/pickle.py
import pickle # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/pickle.pyc
import marshal # builtin
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/struct.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/struct.py
import struct # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/struct.pyc
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/_struct.so", 2);
import _struct # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/lib-dynload/_struct.so
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/temporary_file.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/temporary_file.py
import sage.misc.temporary_file # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/temporary_file.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/sage_eval.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/sage_eval.py
import sage.misc.sage_eval # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/sage_eval.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/preparser.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/preparser.py
import sage.misc.preparser # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/preparser.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/base64.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/base64.py
import base64 # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python/base64.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/sage_ostools.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/sage_ostools.py
import sage.misc.sage_ostools # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/sage_ostools.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/cartesian_product.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/cartesian_product.py
import sage.categories.cartesian_product # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/cartesian_product.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/realizations.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/realizations.py
import sage.categories.realizations # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/realizations.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/bindable_class.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/bindable_class.py
import sage.misc.bindable_class # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/bindable_class.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/with_realizations.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/with_realizations.py
import sage.categories.with_realizations # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/with_realizations.pyc
import sage.structure.parent # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/parent.so
import sage.structure.parent_old # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/parent_old.so
import sage.structure.parent_base # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/parent_base.so
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/defaults.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/defaults.py
import sage.misc.defaults # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/defaults.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/gens_py.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/gens_py.py
import sage.structure.gens_py # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/gens_py.pyc
import sage.structure.parent_gens # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/structure/parent_gens.so
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/prandom.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/prandom.py
import sage.misc.prandom # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/prandom.pyc
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/randstate.so", 2);
import sage.misc.randstate # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/randstate.so
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/rings.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/rings.py
import sage.categories.rings # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/rings.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/rngs.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/rngs.py
import sage.categories.rngs # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/rngs.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/commutative_additive_groups.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/commutative_additive_groups.py
import sage.categories.commutative_additive_groups # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/commutative_additive_groups.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/commutative_additive_monoids.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/commutative_additive_monoids.py
import sage.categories.commutative_additive_monoids # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/commutative_additive_monoids.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/commutative_additive_semigroups.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/commutative_additive_semigroups.py
import sage.categories.commutative_additive_semigroups # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/commutative_additive_semigroups.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/additive_magmas.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/additive_magmas.py
import sage.categories.additive_magmas # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/additive_magmas.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/semigroups.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/semigroups.py
import sage.categories.semigroups # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/semigroups.pyc
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/misc_c.so", 2);
import sage.misc.misc_c # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/misc_c.so
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/magmas.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/magmas.py
import sage.categories.magmas # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/magmas.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/semirings.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/semirings.py
import sage.categories.semirings # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/semirings.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/monoids.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/monoids.py
import sage.categories.monoids # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/monoids.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/commutative_rings.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/commutative_rings.py
import sage.categories.commutative_rings # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/commutative_rings.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/integral_domains.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/integral_domains.py
import sage.categories.integral_domains # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/integral_domains.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/domains.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/domains.py
import sage.categories.domains # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/domains.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/principal_ideal_domains.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/principal_ideal_domains.py
import sage.categories.principal_ideal_domains # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/principal_ideal_domains.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/unique_factorization_domains.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/unique_factorization_domains.py
import sage.categories.unique_factorization_domains # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/unique_factorization_domains.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/gcd_domains.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/gcd_domains.py
import sage.categories.gcd_domains # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/gcd_domains.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/euclidean_domains.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/euclidean_domains.py
import sage.categories.euclidean_domains # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/euclidean_domains.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/algebras.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/algebras.py
import sage.categories.algebras # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/algebras.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/dual.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/dual.py
import sage.categories.dual # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/dual.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/tensor.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/tensor.py
import sage.categories.tensor # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/tensor.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/modules.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/modules.py
import sage.categories.modules # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/modules.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/bimodules.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/bimodules.py
import sage.categories.bimodules # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/bimodules.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/left_modules.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/left_modules.py
import sage.categories.left_modules # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/left_modules.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/right_modules.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/right_modules.py
import sage.categories.right_modules # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/right_modules.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/fields.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/fields.py
import sage.categories.fields # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/fields.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/division_rings.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/division_rings.py
import sage.categories.division_rings # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/division_rings.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/field.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/field.py
import sage.rings.field # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/field.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/vector_spaces.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/vector_spaces.py
import sage.categories.vector_spaces # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/vector_spaces.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/commutative_algebras.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/commutative_algebras.py
import sage.categories.commutative_algebras # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/categories/commutative_algebras.pyc
import sage.rings.ring # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/ring.so
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/integer.so", 2);
import sage.libs # directory /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/libs
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/libs/__init__.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/libs/__init__.py
import sage.libs # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/libs/__init__.pyc
import sage.libs.pari # directory /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/libs/pari
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/libs/pari/__init__.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/libs/pari/__init__.py
import sage.libs.pari # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/libs/pari/__init__.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/libs/pari/all.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/libs/pari/all.py
import sage.libs.pari.all # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/libs/pari/all.pyc
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/libs/pari/gen.so", 2);
import sage.libs.pari.gen # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/libs/pari/gen.so
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/allocator.so", 2);
import sage.misc.allocator # dynamically loaded from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/misc/allocator.so
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/infinity.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/infinity.py
import sage.rings.infinity # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/infinity.pyc
# /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/ring_element.pyc matches /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/ring_element.py
import sage.rings.ring_element # precompiled from /home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/ring_element.pyc
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/rational.so", 2);
dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/fast_arith.so", 2);
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "integer.pxd", line 9, in init sage.rings.integer_ring (sage/rings/integer_ring.c:12178)
  File "integer.pyx", line 170, in init sage.rings.integer (sage/rings/integer.c:38390)
  File "/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/infinity.py", line 200, in <module>
    import sage.rings.rational
  File "fast_arith.pxd", line 5, in init sage.rings.rational (sage/rings/rational.c:27828)
  File "fast_arith.pyx", line 51, in init sage.rings.fast_arith (sage/rings/fast_arith.c:8060)
ImportError: cannot import name ZZ
```

Scary. All "usual suspects" are in place: Weak references, coercion, categories.

But what goes wrong? Is it a circular import? If so, what can be done to improve it?



---

archive/issue_comments_180083.json:
```json
{
    "body": "<a id='comment:31'></a>Replying to [comment:28 SimonKing]:\n> Replying to [comment:26 jpflori]:\n> > Replying to [comment:24 vbraun]:\n> > > Replying to [comment:17 SimonKing]:\n> > > > Interestingly, the error on my laptop looks different from what Volker reported in comment:15:\n> > > > ...\n> > > > dlopen(\"/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/integer.so\", 2);\n> > > > python: Modules/gcmodule.c:326: visit_decref: Assertion `gc->gc.gc_refs != 0' failed.\n> > > > ...\n\n> > > \n> > > You die in a garbage collection cycle, presumably because you have < 32 GB RAM (= my desktop). So the garbage collector runs earlier.\n\n> > Are you sure?\n> > I'd say this really looks like the weakref mess fixed up in 0.17.3.\n\n> \n> After upgrading to Cython 0.17.3, I get an error that seems to confirm what Volker stated.\n> \n\nDo you get the same one as before? i.e. with a failing assert?\n\nOr the one that Volker got (and I now get)? i.e. with a Fatal UNREF?\n\nJust asking ot be really sure we (or I :) ) did not get confused.\n\n\nAnd I just tested that adding -DPy_DEBUG does not help with the FATAL thing.",
    "created_at": "2012-12-27T00:30:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180083",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:31'></a>Replying to [comment:28 SimonKing]:
> Replying to [comment:26 jpflori]:
> > Replying to [comment:24 vbraun]:
> > > Replying to [comment:17 SimonKing]:
> > > > Interestingly, the error on my laptop looks different from what Volker reported in comment:15:
> > > > ...
> > > > dlopen("/home/simon/SAGE/debug/sage-5.5.rc0/local/lib/python2.7/site-packages/sage/rings/integer.so", 2);
> > > > python: Modules/gcmodule.c:326: visit_decref: Assertion `gc->gc.gc_refs != 0' failed.
> > > > ...

> > > 
> > > You die in a garbage collection cycle, presumably because you have < 32 GB RAM (= my desktop). So the garbage collector runs earlier.

> > Are you sure?
> > I'd say this really looks like the weakref mess fixed up in 0.17.3.

> 
> After upgrading to Cython 0.17.3, I get an error that seems to confirm what Volker stated.
> 

Do you get the same one as before? i.e. with a failing assert?

Or the one that Volker got (and I now get)? i.e. with a Fatal UNREF?

Just asking ot be really sure we (or I :) ) did not get confused.


And I just tested that adding -DPy_DEBUG does not help with the FATAL thing.



---

archive/issue_comments_180084.json:
```json
{
    "body": "<a id='comment:32'></a>Replying to [comment:29 SimonKing]:\n> Question about the way to proceed:\n> \n> This ticket provides the debug version of the python spkg, and it has a positive review. However, in the debug version, Sage does not even start.\n> \n> So, shall we open a new ticket \"Make Sage start when Python is build under SAGE_DEBUG\", or shall we try to resolve the starting problem *here*?\n> \n> I suggest to keep it here, thus changing the status into \"needs work\".\n\nIf we have to fix circular imports before merging this, it will just never get merged.\nSo although I don't think either it is the right solution, I propose to merge this to let people who want play with it.",
    "created_at": "2012-12-27T09:16:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180084",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:32'></a>Replying to [comment:29 SimonKing]:
> Question about the way to proceed:
> 
> This ticket provides the debug version of the python spkg, and it has a positive review. However, in the debug version, Sage does not even start.
> 
> So, shall we open a new ticket "Make Sage start when Python is build under SAGE_DEBUG", or shall we try to resolve the starting problem *here*?
> 
> I suggest to keep it here, thus changing the status into "needs work".

If we have to fix circular imports before merging this, it will just never get merged.
So although I don't think either it is the right solution, I propose to merge this to let people who want play with it.



---

archive/issue_comments_180085.json:
```json
{
    "body": "<a id='comment:33'></a>Replying to [comment:30 SimonKing]:\n> For the record: These imports occur when one tries to import the integer ring, as reported by `python -v`:\n> \n> ```\n> line 200, in <module>\n>     import sage.rings.rational\n>   File \"fast_arith.pxd\", line 5, in init sage.rings.rational (sage/rings/rational.c:27828)\n>   File \"fast_arith.pyx\", line 51, in init sage.rings.fast_arith (sage/rings/fast_arith.c:8060)\n> ImportError: cannot import name ZZ\n> ```\n> \n> Scary. All \"usual suspects\" are in place: Weak references, coercion, categories.\n> \n> But what goes wrong? Is it a circular import? If so, what can be done to improve it?\n\nI think it is indeed a circular import.\nI've been chasing those starting from ring_integer yesterday night, but it just gave be bad dreams.\nAfter three or four files where I had to remove various things imported from ring_integer and importing it, I got stuck in sage/libs/ntl/ntl_ZZ_p.pyx complaining about not being able to cast a ZZ_c* to a Py_Object and gave up.",
    "created_at": "2012-12-27T09:18:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180085",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:33'></a>Replying to [comment:30 SimonKing]:
> For the record: These imports occur when one tries to import the integer ring, as reported by `python -v`:
> 
> ```
> line 200, in <module>
>     import sage.rings.rational
>   File "fast_arith.pxd", line 5, in init sage.rings.rational (sage/rings/rational.c:27828)
>   File "fast_arith.pyx", line 51, in init sage.rings.fast_arith (sage/rings/fast_arith.c:8060)
> ImportError: cannot import name ZZ
> ```
> 
> Scary. All "usual suspects" are in place: Weak references, coercion, categories.
> 
> But what goes wrong? Is it a circular import? If so, what can be done to improve it?

I think it is indeed a circular import.
I've been chasing those starting from ring_integer yesterday night, but it just gave be bad dreams.
After three or four files where I had to remove various things imported from ring_integer and importing it, I got stuck in sage/libs/ntl/ntl_ZZ_p.pyx complaining about not being able to cast a ZZ_c* to a Py_Object and gave up.



---

archive/issue_comments_180086.json:
```json
{
    "body": "<a id='comment:34'></a>For info I also get the FATAL UNREF in the same place on Sage 5.2 so this is unrelated to memleaks patches.",
    "created_at": "2012-12-27T10:31:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180086",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:34'></a>For info I also get the FATAL UNREF in the same place on Sage 5.2 so this is unrelated to memleaks patches.



---

archive/issue_comments_180087.json:
```json
{
    "body": "<a id='comment:35'></a>It seems that addition of Integer's is broken.",
    "created_at": "2012-12-27T10:53:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180087",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:35'></a>It seems that addition of Integer's is broken.



---

archive/issue_comments_180088.json:
```json
{
    "body": "<a id='comment:36'></a>As well as substraction and multiplication and powering, but not negation...\n\nNote that powering an Integer by an int seems fine.",
    "created_at": "2012-12-27T11:01:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180088",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:36'></a>As well as substraction and multiplication and powering, but not negation...

Note that powering an Integer by an int seems fine.



---

archive/issue_comments_180089.json:
```json
{
    "body": "<a id='comment:37'></a>Yes you can't do any arithmetic while the circular import is still on its way. For starters it invokes coercion so its a huge mess. The following lets me get past it\n\n```\nbig = Integer('340282366920938463463374607431768211457')  # two**128 + one\n```\nOf course it dies in the next place where stupid computations are performed upon import.",
    "created_at": "2012-12-27T11:08:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180089",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:37'></a>Yes you can't do any arithmetic while the circular import is still on its way. For starters it invokes coercion so its a huge mess. The following lets me get past it

```
big = Integer('340282366920938463463374607431768211457')  # two**128 + one
```
Of course it dies in the next place where stupid computations are performed upon import.



---

archive/issue_comments_180090.json:
```json
{
    "body": "<a id='comment:38'></a>Actually now I'm getting\n\n```\nImportError: /home/vbraun/opt/sage-5.6.beta0/local/lib/python2.7/site-packages/sage/rings/polynomial/multi_polynomial_libsingular.so: undefined symbol: _Z7_p_TestP8spolyrecP9sip_sringi\n```\nOr, unmangled:\n\n```\n[vbraun@volker-desktop sage-5.6.beta0]$ echo _Z7_p_TestP8spolyrecP9sip_sringi | c++filt \n_p_Test(spolyrec*, sip_sring*, int)\n```\nThis seems to be a singular debug function that is not exported into the Singular libraries.",
    "created_at": "2012-12-27T11:28:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180090",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:38'></a>Actually now I'm getting

```
ImportError: /home/vbraun/opt/sage-5.6.beta0/local/lib/python2.7/site-packages/sage/rings/polynomial/multi_polynomial_libsingular.so: undefined symbol: _Z7_p_TestP8spolyrecP9sip_sringi
```
Or, unmangled:

```
[vbraun@volker-desktop sage-5.6.beta0]$ echo _Z7_p_TestP8spolyrecP9sip_sringi | c++filt 
_p_Test(spolyrec*, sip_sring*, int)
```
This seems to be a singular debug function that is not exported into the Singular libraries.



---

archive/issue_comments_180091.json:
```json
{
    "body": "<a id='comment:39'></a>Ah of course thats in a `#ifdef PDEBUG` block. I guess that means **P**olynomials **DEBUG** to Singular %-)",
    "created_at": "2012-12-27T11:35:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180091",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:39'></a>Ah of course thats in a `#ifdef PDEBUG` block. I guess that means **P**olynomials **DEBUG** to Singular %-)



---

archive/issue_comments_180092.json:
```json
{
    "body": "<a id='comment:40'></a>Replying to [comment:38 vbraun]:\n> Actually now I'm getting\n> \n> ```\n> ImportError: /home/vbraun/opt/sage-5.6.beta0/local/lib/python2.7/site-packages/sage/rings/polynomial/multi_polynomial_libsingular.so: undefined symbol: _Z7_p_TestP8spolyrecP9sip_sringi\n> ```\n> Or, unmangled:\n> \n> ```\n> [vbraun@volker-desktop sage-5.6.beta0]$ echo _Z7_p_TestP8spolyrecP9sip_sringi | c++filt \n> _p_Test(spolyrec*, sip_sring*, int)\n> ```\n\nI get the same indeed.\n> This seems to be a singular debug function that is not exported into the Singular libraries.",
    "created_at": "2012-12-27T11:46:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180092",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:40'></a>Replying to [comment:38 vbraun]:
> Actually now I'm getting
> 
> ```
> ImportError: /home/vbraun/opt/sage-5.6.beta0/local/lib/python2.7/site-packages/sage/rings/polynomial/multi_polynomial_libsingular.so: undefined symbol: _Z7_p_TestP8spolyrecP9sip_sringi
> ```
> Or, unmangled:
> 
> ```
> [vbraun@volker-desktop sage-5.6.beta0]$ echo _Z7_p_TestP8spolyrecP9sip_sringi | c++filt 
> _p_Test(spolyrec*, sip_sring*, int)
> ```

I get the same indeed.
> This seems to be a singular debug function that is not exported into the Singular libraries.



---

archive/issue_comments_180093.json:
```json
{
    "body": "<a id='comment:41'></a>Replying to [comment:37 vbraun]:\n> Yes you can't do any arithmetic while the circular import is still on its way.\n\nIf I had statements at the end of integer_ring.pyx and integer.pyx they get executed before all this mess, so I thought that in this case it was not a circular import problem.\n> For starters it invokes coercion so its a huge mess.\n\nI don't see any coercion involved, where did you spot it?\n> The following lets me get past it\n> \n> ```\n> big = Integer('340282366920938463463374607431768211457')  # two**128 + one\n> ```\n> Of course it dies in the next place where stupid computations are performed upon import.",
    "created_at": "2012-12-27T11:48:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180093",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:41'></a>Replying to [comment:37 vbraun]:
> Yes you can't do any arithmetic while the circular import is still on its way.

If I had statements at the end of integer_ring.pyx and integer.pyx they get executed before all this mess, so I thought that in this case it was not a circular import problem.
> For starters it invokes coercion so its a huge mess.

I don't see any coercion involved, where did you spot it?
> The following lets me get past it
> 
> ```
> big = Integer('340282366920938463463374607431768211457')  # two**128 + one
> ```
> Of course it dies in the next place where stupid computations are performed upon import.



---

archive/issue_comments_180094.json:
```json
{
    "body": "<a id='comment:42'></a>What is strange is that I can compute one + one in integer.pyx and that succeeds and when the \"same\" computation is performed later in padic_ZZ_pX_element.pyx it fails when Python tries to dealloc the result...\n\nIn fact it depends on where I compute one + one in integer.pyx, I'm getting lost now.",
    "created_at": "2012-12-27T12:08:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180094",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:42'></a>What is strange is that I can compute one + one in integer.pyx and that succeeds and when the "same" computation is performed later in padic_ZZ_pX_element.pyx it fails when Python tries to dealloc the result...

In fact it depends on where I compute one + one in integer.pyx, I'm getting lost now.



---

archive/issue_comments_180095.json:
```json
{
    "body": "<a id='comment:43'></a>We (=distutils) usually compile Cython modules with `-DNDEBUG`, but apparently not in a debug build. This is what switches on Singular's debugging stuff.\n\nNot sure EXACTLY why it blows up doing integer arithmetic, but according to Simon's import list it is also during import of the coercion system. Which will need to access sample elements of rings etc.",
    "created_at": "2012-12-27T12:12:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180095",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:43'></a>We (=distutils) usually compile Cython modules with `-DNDEBUG`, but apparently not in a debug build. This is what switches on Singular's debugging stuff.

Not sure EXACTLY why it blows up doing integer arithmetic, but according to Simon's import list it is also during import of the coercion system. Which will need to access sample elements of rings etc.



---

archive/issue_comments_180096.json:
```json
{
    "body": "<a id='comment:44'></a>My problem is that I'm not sure the problem Simon pointed out (and I can reproduce) and which definitely involves circular import is related to the one you reported (and i can reproduce as well, nut obviously issuing a different \"import\" command).",
    "created_at": "2012-12-27T12:17:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180096",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:44'></a>My problem is that I'm not sure the problem Simon pointed out (and I can reproduce) and which definitely involves circular import is related to the one you reported (and i can reproduce as well, nut obviously issuing a different "import" command).



---

archive/issue_comments_180097.json:
```json
{
    "body": "<a id='comment:45'></a>Ok, I think I got the problem you reported (the one segfault doing basic arith with Integer's).\n\nIf I'm correct, the problem is that we hook up Integer creation and deletion and Python debug gets confused.\nHave a look at the end of integer.pyx.\nIf you try to compute \"one + one\" before the call to hook_fast_tp_functions() it succeeds, but after that it will fail during deallocation.",
    "created_at": "2012-12-27T12:22:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180097",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:45'></a>Ok, I think I got the problem you reported (the one segfault doing basic arith with Integer's).

If I'm correct, the problem is that we hook up Integer creation and deletion and Python debug gets confused.
Have a look at the end of integer.pyx.
If you try to compute "one + one" before the call to hook_fast_tp_functions() it succeeds, but after that it will fail during deallocation.



---

archive/issue_comments_180098.json:
```json
{
    "body": "<a id='comment:46'></a>In particular the reference to the previous and next object in the doubly linked list of allocated object must be complete garbage, what makes the debug Python raise the FATAL invalid error.",
    "created_at": "2012-12-27T12:24:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180098",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:46'></a>In particular the reference to the previous and next object in the doubly linked list of allocated object must be complete garbage, what makes the debug Python raise the FATAL invalid error.



---

archive/issue_comments_180099.json:
```json
{
    "body": "<a id='comment:47'></a>The question now is \"can we -- or even should -- we fix this?\".\n\nThe simplest way would be to detect at compile time that we're using a debug build and fill garbage, but satisfying for the debug checks, things in ob_prev and ob_next, let's say that they both point to the object itself?",
    "created_at": "2012-12-27T12:26:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180099",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:47'></a>The question now is "can we -- or even should -- we fix this?".

The simplest way would be to detect at compile time that we're using a debug build and fill garbage, but satisfying for the debug checks, things in ob_prev and ob_next, let's say that they both point to the object itself?



---

archive/issue_comments_180100.json:
```json
{
    "body": "<a id='comment:48'></a>Or we could not call the hook install function, but I guess that would be cheating... although I'm going to try right now to see if further problems can be discovered.",
    "created_at": "2012-12-27T12:29:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180100",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:48'></a>Or we could not call the hook install function, but I guess that would be cheating... although I'm going to try right now to see if further problems can be discovered.



---

archive/issue_comments_180101.json:
```json
{
    "body": "<a id='comment:49'></a>And got stuck as well by the Singular problem.",
    "created_at": "2012-12-27T12:31:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180101",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:49'></a>And got stuck as well by the Singular problem.



---

archive/issue_comments_180102.json:
```json
{
    "body": "<a id='comment:50'></a>For the Singular problem, replace `#ifdef NDEBUG` in `mod2.h` with `#if 0` and rebuild (`sage -ba`)",
    "created_at": "2012-12-27T12:37:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180102",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:50'></a>For the Singular problem, replace `#ifdef NDEBUG` in `mod2.h` with `#if 0` and rebuild (`sage -ba`)



---

archive/issue_comments_180103.json:
```json
{
    "body": "<a id='comment:51'></a>Oh, I tried to rebuild singular with SAGE_DEBUG=yes (which actually does something smart, contrary to what the doc currently says :) and just got a segfault when starting Sage.",
    "created_at": "2012-12-27T12:41:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180103",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:51'></a>Oh, I tried to rebuild singular with SAGE_DEBUG=yes (which actually does something smart, contrary to what the doc currently says :) and just got a segfault when starting Sage.



---

archive/issue_comments_180104.json:
```json
{
    "body": "<a id='comment:52'></a>It fails in pynac (while trying to divide things).\n\nIn fact I cannot even rebuild pynac as it complains that it does not find distutils.",
    "created_at": "2012-12-27T12:44:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180104",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:52'></a>It fails in pynac (while trying to divide things).

In fact I cannot even rebuild pynac as it complains that it does not find distutils.



---

archive/issue_comments_180105.json:
```json
{
    "body": "<a id='comment:53'></a>Which had to be expected because the autoconf test will indeed not work with a debug build, it checks that the error (and standard) output are empty.",
    "created_at": "2012-12-27T12:57:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180105",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:53'></a>Which had to be expected because the autoconf test will indeed not work with a debug build, it checks that the error (and standard) output are empty.



---

archive/issue_comments_180106.json:
```json
{
    "body": "<a id='comment:54'></a>After rebuilding pynac, it now segfaults in groupoid.py with an UNREF error.",
    "created_at": "2012-12-27T13:06:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180106",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:54'></a>After rebuilding pynac, it now segfaults in groupoid.py with an UNREF error.



---

archive/issue_comments_180107.json:
```json
{
    "body": "<a id='comment:55'></a>Nevermind, it seems to fail while initializing \"I\".",
    "created_at": "2012-12-27T13:15:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180107",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:55'></a>Nevermind, it seems to fail while initializing "I".



---

archive/issue_comments_180108.json:
```json
{
    "body": "<a id='comment:56'></a>It fails while doing some coercion stuff.",
    "created_at": "2012-12-27T13:23:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180108",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:56'></a>It fails while doing some coercion stuff.



---

archive/issue_comments_180109.json:
```json
{
    "body": "<a id='comment:57'></a>Did you fix the pynac spkg? Ticket number?",
    "created_at": "2012-12-27T14:46:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180109",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:57'></a>Did you fix the pynac spkg? Ticket number?



---

archive/issue_comments_180110.json:
```json
{
    "body": "<a id='comment:58'></a>Could somebody please clarify: when I use this spkg as it currently is and build Sage with `SAGE_DEBUG=yes`, does it make it impossible to build or use Sage?\n\nIf the answer to the above question is \"yes\", I don't think we should merge this ticket. Building with `SAGE_DEBUG=yes` should result in a working Sage.",
    "created_at": "2012-12-27T14:49:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180110",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:58'></a>Could somebody please clarify: when I use this spkg as it currently is and build Sage with `SAGE_DEBUG=yes`, does it make it impossible to build or use Sage?

If the answer to the above question is "yes", I don't think we should merge this ticket. Building with `SAGE_DEBUG=yes` should result in a working Sage.



---

archive/issue_comments_180111.json:
```json
{
    "body": "<a id='comment:59'></a>Replying to [comment:57 vbraun]:\n> Did you fix the pynac spkg? Ticket number?\n\nJust a hack, I removed the test for distutils in configure.\nThe problem is that the bad test is in the macro AX_PYTHON_DEVEL which also defines needed stuff.\n\nNot sure if we can replace this macro by other macro defining what's needed.\n\nAnother solution is to report that \"upstream\" whereever upstrea autoconf-archive is.",
    "created_at": "2012-12-27T14:51:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180111",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:59'></a>Replying to [comment:57 vbraun]:
> Did you fix the pynac spkg? Ticket number?

Just a hack, I removed the test for distutils in configure.
The problem is that the bad test is in the macro AX_PYTHON_DEVEL which also defines needed stuff.

Not sure if we can replace this macro by other macro defining what's needed.

Another solution is to report that "upstream" whereever upstrea autoconf-archive is.



---

archive/issue_comments_180112.json:
```json
{
    "body": "<a id='comment:60'></a>Replying to [comment:58 jdemeyer]:\n> Could somebody please clarify: when I use this spkg as it currently is and build Sage with `SAGE_DEBUG=yes`, does it make it impossible to build or use Sage?\n> \n> If the answer to the above question is \"yes\", I don't think we should merge this ticket. Building with `SAGE_DEBUG=yes` should result in a working Sage.\n\nIt does not currently starts (and wont even build because of pynac), so do not merge the ticket.",
    "created_at": "2012-12-27T14:52:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180112",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:60'></a>Replying to [comment:58 jdemeyer]:
> Could somebody please clarify: when I use this spkg as it currently is and build Sage with `SAGE_DEBUG=yes`, does it make it impossible to build or use Sage?
> 
> If the answer to the above question is "yes", I don't think we should merge this ticket. Building with `SAGE_DEBUG=yes` should result in a working Sage.

It does not currently starts (and wont even build because of pynac), so do not merge the ticket.



---

archive/issue_events_038902.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-12-27T14:55:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "milestone": "sage-pending",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13864#event-38902"
}
```



---

archive/issue_comments_180113.json:
```json
{
    "body": "<a id='comment:61'></a>OK, the tickets fixing building and/or running Sage with this spkg should be added as dependency then.",
    "created_at": "2012-12-27T14:55:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180113",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:61'></a>OK, the tickets fixing building and/or running Sage with this spkg should be added as dependency then.



---

archive/issue_comments_180114.json:
```json
{
    "body": "<a id='comment:62'></a>Just found other hooked tp_* functions in real_double.\nStrange I did not stop them earlier.\n\nAnd... now Sage starts!",
    "created_at": "2012-12-27T14:57:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180114",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:62'></a>Just found other hooked tp_* functions in real_double.
Strange I did not stop them earlier.

And... now Sage starts!



---

archive/issue_comments_180115.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-12-27T15:05:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180115",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_180116.json:
```json
{
    "body": "<a id='comment:63'></a>Ticket for Pynac at #13867, for fast_tp_* at #13868.\n\nWe should try to build from scratch with SAGE_DEBUG=yes to see what spkg fail.\n\nMaybe we should check again for circular imports although I am currently able to issue \"./sage\" and to get to the prompt without error.",
    "created_at": "2012-12-27T15:05:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180116",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:63'></a>Ticket for Pynac at #13867, for fast_tp_* at #13868.

We should try to build from scratch with SAGE_DEBUG=yes to see what spkg fail.

Maybe we should check again for circular imports although I am currently able to issue "./sage" and to get to the prompt without error.



---

archive/issue_comments_180117.json:
```json
{
    "body": "<a id='comment:64'></a>Other good news: I don't get any problems while testing sage/modules/module.pyx now.",
    "created_at": "2012-12-27T15:07:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180117",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:64'></a>Other good news: I don't get any problems while testing sage/modules/module.pyx now.



---

archive/issue_comments_180118.json:
```json
{
    "body": "<a id='comment:65'></a>Replying to [comment:64 jpflori]:\n> Other good news: I don't get any problems while testing sage/modules/module.pyx now.\n\nI think I've spoken too fast.\nI've rebuild a fresh 5.6.beta0 with cython 0.17.3 and still get the segfaults there.",
    "created_at": "2012-12-27T16:13:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180118",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:65'></a>Replying to [comment:64 jpflori]:
> Other good news: I don't get any problems while testing sage/modules/module.pyx now.

I think I've spoken too fast.
I've rebuild a fresh 5.6.beta0 with cython 0.17.3 and still get the segfaults there.



---

archive/issue_comments_180119.json:
```json
{
    "body": "<a id='comment:66'></a>Replying to [comment:65 jpflori]:\n> Replying to [comment:64 jpflori]:\n> > Other good news: I don't get any problems while testing sage/modules/module.pyx now.\n\n> I think I've spoken too fast.\n> I've rebuild a fresh 5.6.beta0 with cython 0.17.3 and still get the segfaults there.\n\nAnd now I've rebuilt on top of that install with debug enabled, the bug seems to be gone...\nSo maybe the problem is with the fast tp_* functions (which I've disabled for now because the suggested fix in the comments lead to segfaults)?",
    "created_at": "2012-12-27T17:00:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180119",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:66'></a>Replying to [comment:65 jpflori]:
> Replying to [comment:64 jpflori]:
> > Other good news: I don't get any problems while testing sage/modules/module.pyx now.

> I think I've spoken too fast.
> I've rebuild a fresh 5.6.beta0 with cython 0.17.3 and still get the segfaults there.

And now I've rebuilt on top of that install with debug enabled, the bug seems to be gone...
So maybe the problem is with the fast tp_* functions (which I've disabled for now because the suggested fix in the comments lead to segfaults)?



---

archive/issue_comments_180120.json:
```json
{
    "body": "<a id='comment:67'></a>In debug mode the pymalloc allocator is still used by default (but extra debugging in the pymalloc allocator is active). We would have to disable pymalloc (`--without-pymalloc`) to use the system malloc/free. This means that it is still not useful for valgrind. Just wanted to throw this out so that everyone is aware of it. I don't mind the current state. The Python docs seem to suggest that this (i.e. `--with-pymalloc`, the default) is the more useful debug setting.",
    "created_at": "2012-12-27T22:49:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180120",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:67'></a>In debug mode the pymalloc allocator is still used by default (but extra debugging in the pymalloc allocator is active). We would have to disable pymalloc (`--without-pymalloc`) to use the system malloc/free. This means that it is still not useful for valgrind. Just wanted to throw this out so that everyone is aware of it. I don't mind the current state. The Python docs seem to suggest that this (i.e. `--with-pymalloc`, the default) is the more useful debug setting.



---

archive/issue_comments_180121.json:
```json
{
    "body": "Changing type from enhancement to task.",
    "created_at": "2012-12-28T13:02:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180121",
    "user": "https://github.com/vbraun"
}
```

Changing type from enhancement to task.



---

archive/issue_comments_180122.json:
```json
{
    "body": "<a id='comment:68'></a>I'm making this into a meta-ticket to collect information to build a Python debug version.",
    "created_at": "2012-12-28T13:02:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180122",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:68'></a>I'm making this into a meta-ticket to collect information to build a Python debug version.



---

archive/issue_comments_180123.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,9 +1,21 @@\n-Try spkg at:\n-http://boxen.math.washington.edu/home/jpflori/python-2.7.3.p4.spkg\n+Instructions for getting a debug version of Python:\n \n-You'll have to rebuild cython and the Sage library if installing this on top of a previous Sage install.\n+* Download and untar sage-5.6.beta1\n+* Copy the Cython spkg from #13832 to spkg/standard\n+* Copy the Python spkg from #13867 to spkg/standard\n+* Copy the Singular spkg from #13876 to spkg/standard\n+* Run\n+  {{{\n+export SAGE_DEBUG=yes\n+make\n+  }}}\n+  and wait. At the end, Sage will die in a SIGABRT during \"Testing startup\"\n+* Apply the patch from #13868 to the Sage library\n+* Run \\`sage -br\\`\n \n-You will also have to rebuild a custom gdb linked to a debug version of Python if you plan on using gdb.\n+This gives you a Sage version that starts up, but some doctests segfault. Probably because we just found some bugs ;-)\n+\n+\n \n Author: Jean-Pierre Flori\n \n```\n",
    "created_at": "2012-12-28T13:02:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180123",
    "user": "https://github.com/vbraun"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,9 +1,21 @@
-Try spkg at:
-http://boxen.math.washington.edu/home/jpflori/python-2.7.3.p4.spkg
+Instructions for getting a debug version of Python:
 
-You'll have to rebuild cython and the Sage library if installing this on top of a previous Sage install.
+* Download and untar sage-5.6.beta1
+* Copy the Cython spkg from #13832 to spkg/standard
+* Copy the Python spkg from #13867 to spkg/standard
+* Copy the Singular spkg from #13876 to spkg/standard
+* Run
+  {{{
+export SAGE_DEBUG=yes
+make
+  }}}
+  and wait. At the end, Sage will die in a SIGABRT during "Testing startup"
+* Apply the patch from #13868 to the Sage library
+* Run \`sage -br\`
 
-You will also have to rebuild a custom gdb linked to a debug version of Python if you plan on using gdb.
+This gives you a Sage version that starts up, but some doctests segfault. Probably because we just found some bugs ;-)
+
+
 
 Author: Jean-Pierre Flori
 
```




---

archive/issue_comments_180124.json:
```json
{
    "body": "<a id='comment:69'></a>For the record (since this is a tracker ticket): The current problem when starting Sage in debug mode seems to be that tp_compare didn't return -1 or -2 for exception - tracked at #13868.",
    "created_at": "2012-12-28T13:19:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180124",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:69'></a>For the record (since this is a tracker ticket): The current problem when starting Sage in debug mode seems to be that tp_compare didn't return -1 or -2 for exception - tracked at #13868.



---

archive/issue_comments_180125.json:
```json
{
    "body": "<a id='comment:70'></a>It does work for me, for the record.",
    "created_at": "2012-12-28T13:26:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180125",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:70'></a>It does work for me, for the record.



---

archive/issue_comments_180126.json:
```json
{
    "body": "<a id='comment:71'></a>When I do as being advised, I get a starting sage-5.6.beta1 in debug mode.\n\nQuestion: Do we need the optional gdb spkg from #13866 in order to properly use gdb with Sage's debug mode? Then we should perhaps add #13866 as a new dependency here.",
    "created_at": "2012-12-28T17:47:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180126",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:71'></a>When I do as being advised, I get a starting sage-5.6.beta1 in debug mode.

Question: Do we need the optional gdb spkg from #13866 in order to properly use gdb with Sage's debug mode? Then we should perhaps add #13866 as a new dependency here.



---

archive/issue_comments_180127.json:
```json
{
    "body": "<a id='comment:72'></a>You don't need the optional gdb to see C stack traces. But its necessary if you want to use cygdb. I'll post a patch for that later. Its pretty cool ;-)",
    "created_at": "2012-12-28T17:49:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180127",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:72'></a>You don't need the optional gdb to see C stack traces. But its necessary if you want to use cygdb. I'll post a patch for that later. Its pretty cool ;-)



---

archive/issue_comments_180128.json:
```json
{
    "body": "<a id='comment:73'></a>I am running \"make testall\".\n\nSo far, the tests don't look bad: I see some failures of optional tests - I don't know why they are executed? In the first run, I still had SAGE_DEBUG=yes, but repeating it without SAGE_DEBUG I still see that optional tests were executed.\n\nIs that because of \"make testall\" versus \"make test\"?\n\nInterestingly, it is in the *optional* tests that I see instances of negative refcounts.\n\n```\n    sage: magma('GF(5)!1 eq Rationals()!1')            # optional magma required\nException raised:\n    Traceback (most recent call last):\n      File \"/home/simon/SAGE/debug/sage-5.6.beta1/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/home/simon/SAGE/debug/sage-5.6.beta1/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/home/simon/SAGE/debug/sage-5.6.beta1/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_28[2]>\", line 1, in <module>\n        magma('GF(5)!1 eq Rationals()!1')            # optional magma required###line 762:\n    sage: magma('GF(5)!1 eq Rationals()!1')            # optional magma required\n      File \"/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/python/site-packages/sage/interfaces/magma.py\", line 752, in __call__\n        A = Expect.__call__(self, x)\n      File \"/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/python/site-packages/sage/interfaces/interface.py\", line 195, in __call__\n        return cls(self, x, name=name)\n      File \"/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/python/site-packages/sage/interfaces/expect.py\", line 1308, in __init__\n        raise TypeError, x\n    TypeError: Unable to start magma\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libcsage.so(print_backtrace+0x31)[0x7fa5e6666c87]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libcsage.so(sigdie+0x14)[0x7fa5e6666cb9]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libcsage.so(sage_signal_handler+0x1dd)[0x7fa5e666685d]\n/lib64/libpthread.so.0(+0xfd00)[0x7fa5e8545d00]\n/lib64/libc.so.6(gsignal+0x35)[0x7fa5e7b7cd95]\n/lib64/libc.so.6(abort+0x17b)[0x7fa5e7b7e2ab]\n/lib64/libc.so.6(+0x2d8fe)[0x7fa5e7b758fe]\n/lib64/libc.so.6(+0x2d9a2)[0x7fa5e7b759a2]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x1a69c9)[0x7fa5e88f99c9]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0xb0bce)[0x7fa5e8803bce]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x1a6a3e)[0x7fa5e88f9a3e]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x1a7a73)[0x7fa5e88faa73]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x1a7d96)[0x7fa5e88fad96]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(_PyObject_GC_Malloc+0xaa)[0x7fa5e88fba4a]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyType_GenericAlloc+0x5c)[0x7fa5e88331b7]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyType_GenericNew+0x2d)[0x7fa5e8833341]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0xed7cd)[0x7fa5e88407cd]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyCFunction_Call+0xc0)[0x7fa5e8808088]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x15ab75)[0x7fa5e88adb75]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x7c11)[0x7fa5e88a86ba]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x10e5)[0x7fa5e88ab0aa]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x913fb)[0x7fa5e87e43fb]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyObject_Call+0x83)[0x7fa5e87a533e]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x15c113)[0x7fa5e88af113]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x7ea2)[0x7fa5e88a894b]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x10e5)[0x7fa5e88ab0aa]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x913fb)[0x7fa5e87e43fb]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyObject_Call+0x83)[0x7fa5e87a533e]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x6e311)[0x7fa5e87c1311]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyObject_Call+0x83)[0x7fa5e87a533e]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/python2.7/lib-dynload/cPickle.so(+0x10b73)[0x7fa5e31abb73]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/python2.7/lib-dynload/cPickle.so(+0x13a46)[0x7fa5e31aea46]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/python2.7/lib-dynload/cPickle.so(+0x14bf9)[0x7fa5e31afbf9]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x15a75c)[0x7fa5e88ad75c]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x7c11)[0x7fa5e88a86ba]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x15b08a)[0x7fa5e88ae08a]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x15ad76)[0x7fa5e88add76]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x7c11)[0x7fa5e88a86ba]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x15b08a)[0x7fa5e88ae08a]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x15ad76)[0x7fa5e88add76]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x7c11)[0x7fa5e88a86ba]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x15b08a)[0x7fa5e88ae08a]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x15ad76)[0x7fa5e88add76]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x7c11)[0x7fa5e88a86ba]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x10e5)[0x7fa5e88ab0aa]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x913fb)[0x7fa5e87e43fb]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyObject_Call+0x83)[0x7fa5e87a533e]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x6e311)[0x7fa5e87c1311]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyObject_Call+0x83)[0x7fa5e87a533e]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x524a6)[0x7fa5e87a54a6]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyObject_CallMethod+0x19c)[0x7fa5e87a58b8]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/python2.7/site-packages/ZODB3-3.7.0-py2.7-linux-x86_64.egg/persistent/cPersistence.so(+0x2211)[0x7fa5b0931211]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/python2.7/site-packages/ZODB3-3.7.0-py2.7-linux-x86_64.egg/persistent/cPersistence.so(+0x48c8)[0x7fa5b09338c8]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/python2.7/site-packages/ZODB3-3.7.0-py2.7-linux-x86_64.egg/BTrees/_OOBTree.so(+0xb454)[0x7fa5b0b42454]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/python2.7/site-packages/ZODB3-3.7.0-py2.7-linux-x86_64.egg/BTrees/_OOBTree.so(+0xf966)[0x7fa5b0b46966]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x15a943)[0x7fa5e88ad943]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x7c11)[0x7fa5e88a86ba]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x15b08a)[0x7fa5e88ae08a]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x15ad76)[0x7fa5e88add76]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x7c11)[0x7fa5e88a86ba]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x15b08a)[0x7fa5e88ae08a]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x15ad76)[0x7fa5e88add76]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x7c11)[0x7fa5e88a86ba]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x15b08a)[0x7fa5e88ae08a]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x15ad76)[0x7fa5e88add76]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x7c11)[0x7fa5e88a86ba]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x10e5)[0x7fa5e88ab0aa]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x913fb)[0x7fa5e87e43fb]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyObject_Call+0x83)[0x7fa5e87a533e]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x6e311)[0x7fa5e87c1311]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyObject_Call+0x83)[0x7fa5e87a533e]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/python/site-packages/sage/structure/factory.so(+0x4081)[0x7fa5d2fe7081]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/python/site-packages/sage/structure/factory.so(+0x3da7)[0x7fa5d2fe6da7]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyObject_Call+0x83)[0x7fa5e87a533e]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x15ba58)[0x7fa5e88aea58]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x15ad92)[0x7fa5e88add92]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x7c11)[0x7fa5e88a86ba]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x10e5)[0x7fa5e88ab0aa]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyEval_EvalCode+0x5a)[0x7fa5e88a0a88]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x15d693)[0x7fa5e88b0693]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x437d)[0x7fa5e88a4e26]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x10e5)[0x7fa5e88ab0aa]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x913fb)[0x7fa5e87e43fb]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyObject_Call+0x83)[0x7fa5e87a533e]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x6e311)[0x7fa5e87c1311]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyObject_Call+0x83)[0x7fa5e87a533e]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x15ba58)[0x7fa5e88aea58]\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x15ad92)[0x7fa5e88add92]\n...\npython(main+0x20)[0x4007b4]\n/lib64/libc.so.6(__libc_start_main+0xed)[0x7fa5e7b6923d]\npython[0x4006d9]\n\n------------------------------------------------------------------------\nUnhandled SIGABRT: An abort() occurred in Sage.\nThis probably occurred because a *compiled* component of Sage has a bug\nin it and is not properly wrapped with sig_on(), sig_off(). You might\nwant to run Sage under gdb with 'sage -gdb' to debug this.\nSage will now terminate.\n------------------------------------------------------------------------\n```\n\nSome tests actually opened a pdf viewer - at least with SAGE_DEBUG.\n\nAnd some doctest processes were killed, such as\n\n```\nsage -t  --optional -force_lib \"devel/sage/doc/en/tutorial/tour_rings.rst\"\nThe doctested process was killed by signal 6\n         [5.5 s]\nsage -t  --optional -force_lib \"devel/sage/doc/en/tutorial/interactive_shell.rst\"\n         [3.8 s]\nsage -t  --optional -force_lib \"devel/sage/doc/en/tutorial/tour_coercion.rst\"\nThe doctested process was killed by signal 6\n         [3.2 s]\n```\nIn the latter cases, I see best chances to see an effect of #715 and friends.\n\nI am retrying now after unsetting SAGE_DEBUG and only doing \"make test\", not \"make testall\".",
    "created_at": "2012-12-28T20:17:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180128",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:73'></a>I am running "make testall".

So far, the tests don't look bad: I see some failures of optional tests - I don't know why they are executed? In the first run, I still had SAGE_DEBUG=yes, but repeating it without SAGE_DEBUG I still see that optional tests were executed.

Is that because of "make testall" versus "make test"?

Interestingly, it is in the *optional* tests that I see instances of negative refcounts.

```
    sage: magma('GF(5)!1 eq Rationals()!1')            # optional magma required
Exception raised:
    Traceback (most recent call last):
      File "/home/simon/SAGE/debug/sage-5.6.beta1/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/home/simon/SAGE/debug/sage-5.6.beta1/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/home/simon/SAGE/debug/sage-5.6.beta1/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_28[2]>", line 1, in <module>
        magma('GF(5)!1 eq Rationals()!1')            # optional magma required###line 762:
    sage: magma('GF(5)!1 eq Rationals()!1')            # optional magma required
      File "/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/python/site-packages/sage/interfaces/magma.py", line 752, in __call__
        A = Expect.__call__(self, x)
      File "/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/python/site-packages/sage/interfaces/interface.py", line 195, in __call__
        return cls(self, x, name=name)
      File "/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/python/site-packages/sage/interfaces/expect.py", line 1308, in __init__
        raise TypeError, x
    TypeError: Unable to start magma
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libcsage.so(print_backtrace+0x31)[0x7fa5e6666c87]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libcsage.so(sigdie+0x14)[0x7fa5e6666cb9]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libcsage.so(sage_signal_handler+0x1dd)[0x7fa5e666685d]
/lib64/libpthread.so.0(+0xfd00)[0x7fa5e8545d00]
/lib64/libc.so.6(gsignal+0x35)[0x7fa5e7b7cd95]
/lib64/libc.so.6(abort+0x17b)[0x7fa5e7b7e2ab]
/lib64/libc.so.6(+0x2d8fe)[0x7fa5e7b758fe]
/lib64/libc.so.6(+0x2d9a2)[0x7fa5e7b759a2]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x1a69c9)[0x7fa5e88f99c9]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0xb0bce)[0x7fa5e8803bce]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x1a6a3e)[0x7fa5e88f9a3e]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x1a7a73)[0x7fa5e88faa73]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x1a7d96)[0x7fa5e88fad96]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(_PyObject_GC_Malloc+0xaa)[0x7fa5e88fba4a]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyType_GenericAlloc+0x5c)[0x7fa5e88331b7]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyType_GenericNew+0x2d)[0x7fa5e8833341]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0xed7cd)[0x7fa5e88407cd]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyCFunction_Call+0xc0)[0x7fa5e8808088]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x15ab75)[0x7fa5e88adb75]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x7c11)[0x7fa5e88a86ba]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x10e5)[0x7fa5e88ab0aa]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x913fb)[0x7fa5e87e43fb]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyObject_Call+0x83)[0x7fa5e87a533e]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x15c113)[0x7fa5e88af113]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x7ea2)[0x7fa5e88a894b]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x10e5)[0x7fa5e88ab0aa]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x913fb)[0x7fa5e87e43fb]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyObject_Call+0x83)[0x7fa5e87a533e]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x6e311)[0x7fa5e87c1311]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyObject_Call+0x83)[0x7fa5e87a533e]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/python2.7/lib-dynload/cPickle.so(+0x10b73)[0x7fa5e31abb73]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/python2.7/lib-dynload/cPickle.so(+0x13a46)[0x7fa5e31aea46]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/python2.7/lib-dynload/cPickle.so(+0x14bf9)[0x7fa5e31afbf9]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x15a75c)[0x7fa5e88ad75c]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x7c11)[0x7fa5e88a86ba]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x15b08a)[0x7fa5e88ae08a]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x15ad76)[0x7fa5e88add76]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x7c11)[0x7fa5e88a86ba]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x15b08a)[0x7fa5e88ae08a]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x15ad76)[0x7fa5e88add76]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x7c11)[0x7fa5e88a86ba]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x15b08a)[0x7fa5e88ae08a]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x15ad76)[0x7fa5e88add76]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x7c11)[0x7fa5e88a86ba]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x10e5)[0x7fa5e88ab0aa]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x913fb)[0x7fa5e87e43fb]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyObject_Call+0x83)[0x7fa5e87a533e]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x6e311)[0x7fa5e87c1311]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyObject_Call+0x83)[0x7fa5e87a533e]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x524a6)[0x7fa5e87a54a6]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyObject_CallMethod+0x19c)[0x7fa5e87a58b8]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/python2.7/site-packages/ZODB3-3.7.0-py2.7-linux-x86_64.egg/persistent/cPersistence.so(+0x2211)[0x7fa5b0931211]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/python2.7/site-packages/ZODB3-3.7.0-py2.7-linux-x86_64.egg/persistent/cPersistence.so(+0x48c8)[0x7fa5b09338c8]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/python2.7/site-packages/ZODB3-3.7.0-py2.7-linux-x86_64.egg/BTrees/_OOBTree.so(+0xb454)[0x7fa5b0b42454]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/python2.7/site-packages/ZODB3-3.7.0-py2.7-linux-x86_64.egg/BTrees/_OOBTree.so(+0xf966)[0x7fa5b0b46966]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x15a943)[0x7fa5e88ad943]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x7c11)[0x7fa5e88a86ba]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x15b08a)[0x7fa5e88ae08a]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x15ad76)[0x7fa5e88add76]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x7c11)[0x7fa5e88a86ba]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x15b08a)[0x7fa5e88ae08a]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x15ad76)[0x7fa5e88add76]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x7c11)[0x7fa5e88a86ba]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x15b08a)[0x7fa5e88ae08a]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x15ad76)[0x7fa5e88add76]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x7c11)[0x7fa5e88a86ba]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x10e5)[0x7fa5e88ab0aa]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x913fb)[0x7fa5e87e43fb]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyObject_Call+0x83)[0x7fa5e87a533e]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x6e311)[0x7fa5e87c1311]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyObject_Call+0x83)[0x7fa5e87a533e]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/python/site-packages/sage/structure/factory.so(+0x4081)[0x7fa5d2fe7081]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/python/site-packages/sage/structure/factory.so(+0x3da7)[0x7fa5d2fe6da7]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyObject_Call+0x83)[0x7fa5e87a533e]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x15ba58)[0x7fa5e88aea58]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x15ad92)[0x7fa5e88add92]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x7c11)[0x7fa5e88a86ba]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x10e5)[0x7fa5e88ab0aa]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyEval_EvalCode+0x5a)[0x7fa5e88a0a88]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x15d693)[0x7fa5e88b0693]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x437d)[0x7fa5e88a4e26]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x10e5)[0x7fa5e88ab0aa]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x913fb)[0x7fa5e87e43fb]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyObject_Call+0x83)[0x7fa5e87a533e]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x6e311)[0x7fa5e87c1311]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(PyObject_Call+0x83)[0x7fa5e87a533e]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x15ba58)[0x7fa5e88aea58]
/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpython2.7.so.1.0(+0x15ad92)[0x7fa5e88add92]
...
python(main+0x20)[0x4007b4]
/lib64/libc.so.6(__libc_start_main+0xed)[0x7fa5e7b6923d]
python[0x4006d9]

------------------------------------------------------------------------
Unhandled SIGABRT: An abort() occurred in Sage.
This probably occurred because a *compiled* component of Sage has a bug
in it and is not properly wrapped with sig_on(), sig_off(). You might
want to run Sage under gdb with 'sage -gdb' to debug this.
Sage will now terminate.
------------------------------------------------------------------------
```

Some tests actually opened a pdf viewer - at least with SAGE_DEBUG.

And some doctest processes were killed, such as

```
sage -t  --optional -force_lib "devel/sage/doc/en/tutorial/tour_rings.rst"
The doctested process was killed by signal 6
         [5.5 s]
sage -t  --optional -force_lib "devel/sage/doc/en/tutorial/interactive_shell.rst"
         [3.8 s]
sage -t  --optional -force_lib "devel/sage/doc/en/tutorial/tour_coercion.rst"
The doctested process was killed by signal 6
         [3.2 s]
```
In the latter cases, I see best chances to see an effect of #715 and friends.

I am retrying now after unsetting SAGE_DEBUG and only doing "make test", not "make testall".



---

archive/issue_comments_180129.json:
```json
{
    "body": "<a id='comment:74'></a>testall runs all tests, including optional.\n\nI think the problem is in pickling, all failing doctests that I've seen revolve around that. The interfaces just trigger it because they pickle stuff.",
    "created_at": "2012-12-28T20:25:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180129",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:74'></a>testall runs all tests, including optional.

I think the problem is in pickling, all failing doctests that I've seen revolve around that. The interfaces just trigger it because they pickle stuff.



---

archive/issue_comments_180130.json:
```json
{
    "body": "<a id='comment:75'></a>Replying to [comment:74 vbraun]:\n> I think the problem is in pickling, all failing doctests that I've seen revolve around that. The interfaces just trigger it because they pickle stuff.\n\n\nPickling? Interesting. How can this fail in a debug version?",
    "created_at": "2012-12-28T20:38:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180130",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:75'></a>Replying to [comment:74 vbraun]:
> I think the problem is in pickling, all failing doctests that I've seen revolve around that. The interfaces just trigger it because they pickle stuff.


Pickling? Interesting. How can this fail in a debug version?



---

archive/issue_comments_180131.json:
```json
{
    "body": "<a id='comment:76'></a>Replying to [comment:73 SimonKing]:\n\n> And some doctest processes were killed, such as\n> \n> ```\n> sage -t  --optional -force_lib \"devel/sage/doc/en/tutorial/tour_rings.rst\"\n> The doctested process was killed by signal 6\n>          [5.5 s]\n> sage -t  --optional -force_lib \"devel/sage/doc/en/tutorial/interactive_shell.rst\"\n>          [3.8 s]\n> sage -t  --optional -force_lib \"devel/sage/doc/en/tutorial/tour_coercion.rst\"\n> The doctested process was killed by signal 6\n>          [3.2 s]\n> ```\n\nThese tests succeeded for me with ZODB3-3.10.5. I don't know if these particular tests failed for me prior to upgrading ZODB, but I had lots of other tests fail. See\n[sage-devel](https://groups.google.com/group/sage-devel/browse_thread/thread/8b2a164acef937b1?hl=en).",
    "created_at": "2012-12-28T21:17:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180131",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:76'></a>Replying to [comment:73 SimonKing]:

> And some doctest processes were killed, such as
> 
> ```
> sage -t  --optional -force_lib "devel/sage/doc/en/tutorial/tour_rings.rst"
> The doctested process was killed by signal 6
>          [5.5 s]
> sage -t  --optional -force_lib "devel/sage/doc/en/tutorial/interactive_shell.rst"
>          [3.8 s]
> sage -t  --optional -force_lib "devel/sage/doc/en/tutorial/tour_coercion.rst"
> The doctested process was killed by signal 6
>          [3.2 s]
> ```

These tests succeeded for me with ZODB3-3.10.5. I don't know if these particular tests failed for me prior to upgrading ZODB, but I had lots of other tests fail. See
[sage-devel](https://groups.google.com/group/sage-devel/browse_thread/thread/8b2a164acef937b1?hl=en).



---

archive/issue_comments_180132.json:
```json
{
    "body": "<a id='comment:77'></a>Replying to [comment:76 nbruin]:\n> These tests succeeded for me with ZODB3-3.10.5. I don't know if these particular tests failed for me prior to upgrading ZODB, but I had lots of other tests fail.\n\n\nAnother Heisenbug?\n\nAnyway. Here is a different test:\n\n```\nsage -t -gdb -force_lib \"devel/sage/sage/tests/benchmark.py\"\n...\n(gdb) r\nStarting program: /home/simon/SAGE/debug/sage-5.6.beta1/local/bin/python /home/simon/.sage//tmp/benchmark_3070.py\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/lib64/libthread_db.so.1\".\npython: Modules/gcmodule.c:326: visit_decref: Assertion `gc->gc.gc_refs != 0' failed.\n\nProgram received signal SIGABRT, Aborted.\n0x00007ffff6d95d95 in raise () from /lib64/libc.so.6\n(gdb) bt\n#0  0x00007ffff6d95d95 in raise () from /lib64/libc.so.6\n#1  0x00007ffff6d972ab in abort () from /lib64/libc.so.6\n#2  0x00007ffff6d8e8fe in __assert_fail_base () from /lib64/libc.so.6\n#3  0x00007ffff6d8e9a2 in __assert_fail () from /lib64/libc.so.6\n#4  0x00007ffff7b129c9 in visit_decref (op=0x3a78ed0, data=0x0) at Modules/gcmodule.c:326\n#5  0x00007ffff7a1cbce in dict_traverse (op=0x30a04f0, visit=0x7ffff7b1290e <visit_decref>, arg=0x0) at Objects/dictobject.c:2088\n#6  0x00007ffff7b12a3e in subtract_refs (containers=0x7ffff7dc14e0 <generations>) at Modules/gcmodule.c:345\n#7  0x00007ffff7b13a73 in collect (generation=0) at Modules/gcmodule.c:874\n#8  0x00007ffff7b13d96 in collect_generations () at Modules/gcmodule.c:996\n#9  0x00007ffff7b14a4a in _PyObject_GC_Malloc (basicsize=56) at Modules/gcmodule.c:1457\n#10 0x00007ffff7b14a82 in _PyObject_GC_New (tp=0x7ffff7d9a3c0 <PyList_Type>) at Modules/gcmodule.c:1467\n#11 0x00007ffff7a02405 in PyList_New (size=242) at Objects/listobject.c:142\n#12 0x00007ffff23b8395 in Pdata_popList (self=0x3a12f90, start=280) at /home/simon/SAGE/debug/sage-5.6.beta1/spkg/build/python-2.7.3.p5/src/Modules/cPickle.c:306\n#13 0x00007ffff23c60ee in do_append (self=0x7fffbfaf26b8, x=280) at /home/simon/SAGE/debug/sage-5.6.beta1/spkg/build/python-2.7.3.p5/src/Modules/cPickle.c:4401\n#14 0x00007ffff23c6603 in load_appends (self=0x7fffbfaf26b8) at /home/simon/SAGE/debug/sage-5.6.beta1/spkg/build/python-2.7.3.p5/src/Modules/cPickle.c:4450\n#15 0x00007ffff23c7875 in load (self=0x7fffbfaf26b8) at /home/simon/SAGE/debug/sage-5.6.beta1/spkg/build/python-2.7.3.p5/src/Modules/cPickle.c:4835\n#16 0x00007ffff23c8bf9 in Unpickler_load (self=0x7fffbfaf26b8, unused=0x0) at /home/simon/SAGE/debug/sage-5.6.beta1/spkg/build/python-2.7.3.p5/src/Modules/cPickle.c:5393\n#17 0x00007ffff7ac675c in call_function (pp_stack=0x7fffffff6cd0, oparg=0) at Python/ceval.c:4005\n#18 0x00007ffff7ac16ba in PyEval_EvalFrameEx (f=0x362a940, throwflag=0) at Python/ceval.c:2666\n#19 0x00007ffff7ac708a in fast_function (func=0x3a224f8, pp_stack=0x7fffffff7050, n=2, na=2, nk=0) at Python/ceval.c:4107\n#20 0x00007ffff7ac6d76 in call_function (pp_stack=0x7fffffff7050, oparg=1) at Python/ceval.c:4042\n#21 0x00007ffff7ac16ba in PyEval_EvalFrameEx (f=0x362a730, throwflag=0) at Python/ceval.c:2666\n#22 0x00007ffff7ac708a in fast_function (func=0x3a225a0, pp_stack=0x7fffffff73d0, n=3, na=3, nk=0) at Python/ceval.c:4107\n#23 0x00007ffff7ac6d76 in call_function (pp_stack=0x7fffffff73d0, oparg=2) at Python/ceval.c:4042\n#24 0x00007ffff7ac16ba in PyEval_EvalFrameEx (f=0x362a500, throwflag=0) at Python/ceval.c:2666\n#25 0x00007ffff7ac708a in fast_function (func=0x3a256f0, pp_stack=0x7fffffff7750, n=2, na=2, nk=0) at Python/ceval.c:4107\n...\n#52 0x00007ffff79fd3fb in function_call (func=0x7fffde9a53a8, arg=0x7fffbfa4db60, kw=0x36dbe00) at Objects/funcobject.c:526\n#53 0x00007ffff79be33e in PyObject_Call (func=0x7fffde9a53a8, arg=0x7fffbfa4db60, kw=0x36dbe00) at Objects/abstract.c:2529\n#54 0x00007ffff79da311 in instancemethod_call (func=0x7fffde9a53a8, arg=0x7fffbfa4db60, kw=0x36dbe00) at Objects/classobject.c:2578\n#55 0x00007ffff79be33e in PyObject_Call (func=0x7fffbfd5a760, arg=0x7fffc2b4ad08, kw=0x36dbe00) at Objects/abstract.c:2529\n#56 0x00007fffe21bd081 in __pyx_pf_4sage_9structure_7factory_13UniqueFactory_4__call__ (__pyx_v_self=0x7fffde99f418, __pyx_v_args=0x7fffc2b4ad08, __pyx_v_kwds=0x36dbe00)\n    at sage/structure/factory.c:1028\n#57 0x00007fffe21bcda7 in __pyx_pw_4sage_9structure_7factory_13UniqueFactory_5__call__ (__pyx_v_self=0x7fffde99f418, __pyx_args=0x7fffc2b4ad08, __pyx_kwds=0x0) at sage/structure/factory.c:979\n#58 0x00007ffff79be33e in PyObject_Call (func=0x7fffde99f418, arg=0x7fffc2b4ad08, kw=0x0) at Objects/abstract.c:2529\n#59 0x00007ffff7ac7a58 in do_call (func=0x7fffde99f418, pp_stack=0x7fffffff95a0, na=2, nk=0) at Python/ceval.c:4239\n#60 0x00007ffff7ac6d92 in call_function (pp_stack=0x7fffffff95a0, oparg=2) at Python/ceval.c:4044\n#61 0x00007ffff7ac16ba in PyEval_EvalFrameEx (f=0x38ca1b0, throwflag=0) at Python/ceval.c:2666\n#62 0x00007ffff7ac40aa in PyEval_EvalCodeEx (co=0x7fffc02441a0, globals=0x34bc850, locals=0x34bc850, args=0x0, argcount=0, kws=0x0, kwcount=0, defs=0x0, defcount=0, closure=0x0) at Python/ceval.c:3253\n#63 0x00007ffff7ab9a88 in PyEval_EvalCode (co=0x7fffc02441a0, globals=0x34bc850, locals=0x34bc850) at Python/ceval.c:667\n#64 0x00007ffff7ac9693 in exec_statement (f=0x36c0720, prog=0x7fffc02441a0, globals=0x34bc850, locals=0x34bc850) at Python/ceval.c:4718\n#65 0x00007ffff7abde26 in PyEval_EvalFrameEx (f=0x36c0720, throwflag=0) at Python/ceval.c:1880\n#66 0x00007ffff7ac40aa in PyEval_EvalCodeEx (co=0x7fffc2bf9d50, globals=0x7140d0, locals=0x0, args=0x7fffbfd46238, argcount=5, kws=0x0, kwcount=0, defs=0x0, defcount=0, closure=0x0)\n    at Python/ceval.c:3253\n#67 0x00007ffff79fd3fb in function_call (func=0x7fffc2c12840, arg=0x7fffbfd46210, kw=0x0) at Objects/funcobject.c:526\n#68 0x00007ffff79be33e in PyObject_Call (func=0x7fffc2c12840, arg=0x7fffbfd46210, kw=0x0) at Objects/abstract.c:2529\n#69 0x00007ffff79da311 in instancemethod_call (func=0x7fffc2c12840, arg=0x7fffbfd46210, kw=0x0) at Objects/classobject.c:2578\n#70 0x00007ffff79be33e in PyObject_Call (func=0x7fffbfaf6060, arg=0x7fffbfd46210, kw=0x0) at Objects/abstract.c:2529\n#71 0x00007ffff7ac7a58 in do_call (func=0x7fffbfaf6060, pp_stack=0x7fffffffa270, na=5, nk=0) at Python/ceval.c:4239\n#72 0x00007ffff7ac6d92 in call_function (pp_stack=0x7fffffffa270, oparg=5) at Python/ceval.c:4044\n#73 0x00007ffff7ac16ba in PyEval_EvalFrameEx (f=0x323cc40, throwflag=0) at Python/ceval.c:2666\n#74 0x00007ffff7ac40aa in PyEval_EvalCodeEx (co=0x7fffc2eb00f0, globals=0x713f70, locals=0x0, args=0x37db250, argcount=5, kws=0x37db278, kwcount=0, defs=0x0, defcount=0, closure=0x0)\n    at Python/ceval.c:3253\n```\n\nAs much as I understand, the error occurs after finishing the tests. However, running in verbose mode, I get:\n\n```\n...\nTrying:\n    from sage.tests.benchmark import EllipticCurveMW###line 1612:_sage_    >>> from sage.tests.benchmark import EllipticCurveMW\nExpecting nothing\nok\nTrying:\n    B = EllipticCurveMW([Integer(1),Integer(2),Integer(3),Integer(4),Integer(5)])###line 1613:_sage_    >>> B = EllipticCurveMW([1,2,3,4,5])\nExpecting nothing\nok\nTrying:\n    sig_on_count()\nExpecting:\n    0\nok\nTrying:\n    set_random_seed(0L)\nExpecting nothing\nok\nTrying:\n    change_warning_output(sys.stdout)\nExpecting nothing\nok\nTrying:\n    from sage.tests.benchmark import FiniteExtFieldMult###line 1636:_sage_    >>> from sage.tests.benchmark import FiniteExtFieldMult\nExpecting nothing\nok\nTrying:\n    B = FiniteExtFieldMult(GF(Integer(9), 'x'), Integer(2))###line 1637:_sage_    >>> B = FiniteExtFieldMult(GF(9, 'x'), 2)\nExpecting nothing\npython: Modules/gcmodule.c:326: visit_decref: Assertion `gc->gc.gc_refs != 0' failed.\n\nProgram received signal SIGABRT, Aborted.\n0x00007ffff6d95d95 in raise () from /lib64/libc.so.6\n```\n\nSo, is it in the middle of the tests, after all?\n\nAnyway, the backtrace confirms Volker's statement that the problem is related with pickling.",
    "created_at": "2012-12-28T21:32:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180132",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:77'></a>Replying to [comment:76 nbruin]:
> These tests succeeded for me with ZODB3-3.10.5. I don't know if these particular tests failed for me prior to upgrading ZODB, but I had lots of other tests fail.


Another Heisenbug?

Anyway. Here is a different test:

```
sage -t -gdb -force_lib "devel/sage/sage/tests/benchmark.py"
...
(gdb) r
Starting program: /home/simon/SAGE/debug/sage-5.6.beta1/local/bin/python /home/simon/.sage//tmp/benchmark_3070.py
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib64/libthread_db.so.1".
python: Modules/gcmodule.c:326: visit_decref: Assertion `gc->gc.gc_refs != 0' failed.

Program received signal SIGABRT, Aborted.
0x00007ffff6d95d95 in raise () from /lib64/libc.so.6
(gdb) bt
#0  0x00007ffff6d95d95 in raise () from /lib64/libc.so.6
#1  0x00007ffff6d972ab in abort () from /lib64/libc.so.6
#2  0x00007ffff6d8e8fe in __assert_fail_base () from /lib64/libc.so.6
#3  0x00007ffff6d8e9a2 in __assert_fail () from /lib64/libc.so.6
#4  0x00007ffff7b129c9 in visit_decref (op=0x3a78ed0, data=0x0) at Modules/gcmodule.c:326
#5  0x00007ffff7a1cbce in dict_traverse (op=0x30a04f0, visit=0x7ffff7b1290e <visit_decref>, arg=0x0) at Objects/dictobject.c:2088
#6  0x00007ffff7b12a3e in subtract_refs (containers=0x7ffff7dc14e0 <generations>) at Modules/gcmodule.c:345
#7  0x00007ffff7b13a73 in collect (generation=0) at Modules/gcmodule.c:874
#8  0x00007ffff7b13d96 in collect_generations () at Modules/gcmodule.c:996
#9  0x00007ffff7b14a4a in _PyObject_GC_Malloc (basicsize=56) at Modules/gcmodule.c:1457
#10 0x00007ffff7b14a82 in _PyObject_GC_New (tp=0x7ffff7d9a3c0 <PyList_Type>) at Modules/gcmodule.c:1467
#11 0x00007ffff7a02405 in PyList_New (size=242) at Objects/listobject.c:142
#12 0x00007ffff23b8395 in Pdata_popList (self=0x3a12f90, start=280) at /home/simon/SAGE/debug/sage-5.6.beta1/spkg/build/python-2.7.3.p5/src/Modules/cPickle.c:306
#13 0x00007ffff23c60ee in do_append (self=0x7fffbfaf26b8, x=280) at /home/simon/SAGE/debug/sage-5.6.beta1/spkg/build/python-2.7.3.p5/src/Modules/cPickle.c:4401
#14 0x00007ffff23c6603 in load_appends (self=0x7fffbfaf26b8) at /home/simon/SAGE/debug/sage-5.6.beta1/spkg/build/python-2.7.3.p5/src/Modules/cPickle.c:4450
#15 0x00007ffff23c7875 in load (self=0x7fffbfaf26b8) at /home/simon/SAGE/debug/sage-5.6.beta1/spkg/build/python-2.7.3.p5/src/Modules/cPickle.c:4835
#16 0x00007ffff23c8bf9 in Unpickler_load (self=0x7fffbfaf26b8, unused=0x0) at /home/simon/SAGE/debug/sage-5.6.beta1/spkg/build/python-2.7.3.p5/src/Modules/cPickle.c:5393
#17 0x00007ffff7ac675c in call_function (pp_stack=0x7fffffff6cd0, oparg=0) at Python/ceval.c:4005
#18 0x00007ffff7ac16ba in PyEval_EvalFrameEx (f=0x362a940, throwflag=0) at Python/ceval.c:2666
#19 0x00007ffff7ac708a in fast_function (func=0x3a224f8, pp_stack=0x7fffffff7050, n=2, na=2, nk=0) at Python/ceval.c:4107
#20 0x00007ffff7ac6d76 in call_function (pp_stack=0x7fffffff7050, oparg=1) at Python/ceval.c:4042
#21 0x00007ffff7ac16ba in PyEval_EvalFrameEx (f=0x362a730, throwflag=0) at Python/ceval.c:2666
#22 0x00007ffff7ac708a in fast_function (func=0x3a225a0, pp_stack=0x7fffffff73d0, n=3, na=3, nk=0) at Python/ceval.c:4107
#23 0x00007ffff7ac6d76 in call_function (pp_stack=0x7fffffff73d0, oparg=2) at Python/ceval.c:4042
#24 0x00007ffff7ac16ba in PyEval_EvalFrameEx (f=0x362a500, throwflag=0) at Python/ceval.c:2666
#25 0x00007ffff7ac708a in fast_function (func=0x3a256f0, pp_stack=0x7fffffff7750, n=2, na=2, nk=0) at Python/ceval.c:4107
...
#52 0x00007ffff79fd3fb in function_call (func=0x7fffde9a53a8, arg=0x7fffbfa4db60, kw=0x36dbe00) at Objects/funcobject.c:526
#53 0x00007ffff79be33e in PyObject_Call (func=0x7fffde9a53a8, arg=0x7fffbfa4db60, kw=0x36dbe00) at Objects/abstract.c:2529
#54 0x00007ffff79da311 in instancemethod_call (func=0x7fffde9a53a8, arg=0x7fffbfa4db60, kw=0x36dbe00) at Objects/classobject.c:2578
#55 0x00007ffff79be33e in PyObject_Call (func=0x7fffbfd5a760, arg=0x7fffc2b4ad08, kw=0x36dbe00) at Objects/abstract.c:2529
#56 0x00007fffe21bd081 in __pyx_pf_4sage_9structure_7factory_13UniqueFactory_4__call__ (__pyx_v_self=0x7fffde99f418, __pyx_v_args=0x7fffc2b4ad08, __pyx_v_kwds=0x36dbe00)
    at sage/structure/factory.c:1028
#57 0x00007fffe21bcda7 in __pyx_pw_4sage_9structure_7factory_13UniqueFactory_5__call__ (__pyx_v_self=0x7fffde99f418, __pyx_args=0x7fffc2b4ad08, __pyx_kwds=0x0) at sage/structure/factory.c:979
#58 0x00007ffff79be33e in PyObject_Call (func=0x7fffde99f418, arg=0x7fffc2b4ad08, kw=0x0) at Objects/abstract.c:2529
#59 0x00007ffff7ac7a58 in do_call (func=0x7fffde99f418, pp_stack=0x7fffffff95a0, na=2, nk=0) at Python/ceval.c:4239
#60 0x00007ffff7ac6d92 in call_function (pp_stack=0x7fffffff95a0, oparg=2) at Python/ceval.c:4044
#61 0x00007ffff7ac16ba in PyEval_EvalFrameEx (f=0x38ca1b0, throwflag=0) at Python/ceval.c:2666
#62 0x00007ffff7ac40aa in PyEval_EvalCodeEx (co=0x7fffc02441a0, globals=0x34bc850, locals=0x34bc850, args=0x0, argcount=0, kws=0x0, kwcount=0, defs=0x0, defcount=0, closure=0x0) at Python/ceval.c:3253
#63 0x00007ffff7ab9a88 in PyEval_EvalCode (co=0x7fffc02441a0, globals=0x34bc850, locals=0x34bc850) at Python/ceval.c:667
#64 0x00007ffff7ac9693 in exec_statement (f=0x36c0720, prog=0x7fffc02441a0, globals=0x34bc850, locals=0x34bc850) at Python/ceval.c:4718
#65 0x00007ffff7abde26 in PyEval_EvalFrameEx (f=0x36c0720, throwflag=0) at Python/ceval.c:1880
#66 0x00007ffff7ac40aa in PyEval_EvalCodeEx (co=0x7fffc2bf9d50, globals=0x7140d0, locals=0x0, args=0x7fffbfd46238, argcount=5, kws=0x0, kwcount=0, defs=0x0, defcount=0, closure=0x0)
    at Python/ceval.c:3253
#67 0x00007ffff79fd3fb in function_call (func=0x7fffc2c12840, arg=0x7fffbfd46210, kw=0x0) at Objects/funcobject.c:526
#68 0x00007ffff79be33e in PyObject_Call (func=0x7fffc2c12840, arg=0x7fffbfd46210, kw=0x0) at Objects/abstract.c:2529
#69 0x00007ffff79da311 in instancemethod_call (func=0x7fffc2c12840, arg=0x7fffbfd46210, kw=0x0) at Objects/classobject.c:2578
#70 0x00007ffff79be33e in PyObject_Call (func=0x7fffbfaf6060, arg=0x7fffbfd46210, kw=0x0) at Objects/abstract.c:2529
#71 0x00007ffff7ac7a58 in do_call (func=0x7fffbfaf6060, pp_stack=0x7fffffffa270, na=5, nk=0) at Python/ceval.c:4239
#72 0x00007ffff7ac6d92 in call_function (pp_stack=0x7fffffffa270, oparg=5) at Python/ceval.c:4044
#73 0x00007ffff7ac16ba in PyEval_EvalFrameEx (f=0x323cc40, throwflag=0) at Python/ceval.c:2666
#74 0x00007ffff7ac40aa in PyEval_EvalCodeEx (co=0x7fffc2eb00f0, globals=0x713f70, locals=0x0, args=0x37db250, argcount=5, kws=0x37db278, kwcount=0, defs=0x0, defcount=0, closure=0x0)
    at Python/ceval.c:3253
```

As much as I understand, the error occurs after finishing the tests. However, running in verbose mode, I get:

```
...
Trying:
    from sage.tests.benchmark import EllipticCurveMW###line 1612:_sage_    >>> from sage.tests.benchmark import EllipticCurveMW
Expecting nothing
ok
Trying:
    B = EllipticCurveMW([Integer(1),Integer(2),Integer(3),Integer(4),Integer(5)])###line 1613:_sage_    >>> B = EllipticCurveMW([1,2,3,4,5])
Expecting nothing
ok
Trying:
    sig_on_count()
Expecting:
    0
ok
Trying:
    set_random_seed(0L)
Expecting nothing
ok
Trying:
    change_warning_output(sys.stdout)
Expecting nothing
ok
Trying:
    from sage.tests.benchmark import FiniteExtFieldMult###line 1636:_sage_    >>> from sage.tests.benchmark import FiniteExtFieldMult
Expecting nothing
ok
Trying:
    B = FiniteExtFieldMult(GF(Integer(9), 'x'), Integer(2))###line 1637:_sage_    >>> B = FiniteExtFieldMult(GF(9, 'x'), 2)
Expecting nothing
python: Modules/gcmodule.c:326: visit_decref: Assertion `gc->gc.gc_refs != 0' failed.

Program received signal SIGABRT, Aborted.
0x00007ffff6d95d95 in raise () from /lib64/libc.so.6
```

So, is it in the middle of the tests, after all?

Anyway, the backtrace confirms Volker's statement that the problem is related with pickling.



---

archive/issue_comments_180133.json:
```json
{
    "body": "<a id='comment:78'></a>Even better!! The above test yields a reproducible crash on the command line:\n\n```\nsage -gdb\n...\nsage: from sage.tests.benchmark import FiniteExtFieldMult\nsage: B = FiniteExtFieldMult(GF(Integer(9), 'x'), Integer(2))\npython: Modules/gcmodule.c:326: visit_decref: Assertion `gc->gc.gc_refs != 0' failed.\n\nProgram received signal SIGABRT, Aborted.\n0x00007ffff6d95d95 in raise () from /lib64/libc.so.6\n(gdb) bt\n#0  0x00007ffff6d95d95 in raise () from /lib64/libc.so.6\n#1  0x00007ffff6d972ab in abort () from /lib64/libc.so.6\n#2  0x00007ffff6d8e8fe in __assert_fail_base () from /lib64/libc.so.6\n#3  0x00007ffff6d8e9a2 in __assert_fail () from /lib64/libc.so.6\n#4  0x00007ffff7b129c9 in visit_decref (op=0x7fffc1b83a38, data=0x0) at Modules/gcmodule.c:326\n#5  0x00007ffff7a1cbce in dict_traverse (op=0x3017a60, visit=0x7ffff7b1290e <visit_decref>, arg=0x0) at Objects/dictobject.c:2088\n#6  0x00007ffff7b12a3e in subtract_refs (containers=0x7ffff7dc14e0 <generations>) at Modules/gcmodule.c:345\n#7  0x00007ffff7b13a73 in collect (generation=0) at Modules/gcmodule.c:874\n#8  0x00007ffff7b13d96 in collect_generations () at Modules/gcmodule.c:996\n#9  0x00007ffff7b14a4a in _PyObject_GC_Malloc (basicsize=56) at Modules/gcmodule.c:1457\n#10 0x00007ffff7b14a82 in _PyObject_GC_New (tp=0x7ffff7d9a3c0 <PyList_Type>) at Modules/gcmodule.c:1467\n#11 0x00007ffff7a02405 in PyList_New (size=168) at Objects/listobject.c:142\n#12 0x00007ffff2a2c395 in Pdata_popList (self=0x7fffc1c1ff90, start=80) at /home/simon/SAGE/debug/sage-5.6.beta1/spkg/build/python-2.7.3.p5/src/Modules/cPickle.c:306\n#13 0x00007ffff2a3a0ee in do_append (self=0x7fffc26c17a0, x=80) at /home/simon/SAGE/debug/sage-5.6.beta1/spkg/build/python-2.7.3.p5/src/Modules/cPickle.c:4401\n#14 0x00007ffff2a3a603 in load_appends (self=0x7fffc26c17a0) at /home/simon/SAGE/debug/sage-5.6.beta1/spkg/build/python-2.7.3.p5/src/Modules/cPickle.c:4450\n#15 0x00007ffff2a3b875 in load (self=0x7fffc26c17a0) at /home/simon/SAGE/debug/sage-5.6.beta1/spkg/build/python-2.7.3.p5/src/Modules/cPickle.c:4835\n#16 0x00007ffff2a3cbf9 in Unpickler_load (self=0x7fffc26c17a0, unused=0x0) at /home/simon/SAGE/debug/sage-5.6.beta1/spkg/build/python-2.7.3.p5/src/Modules/cPickle.c:5393\n#17 0x00007ffff7ac675c in call_function (pp_stack=0x7fffffff81e0, oparg=0) at Python/ceval.c:4005\n#18 0x00007ffff7ac16ba in PyEval_EvalFrameEx (f=0x301ca10, throwflag=0) at Python/ceval.c:2666\n#19 0x00007ffff7ac708a in fast_function (func=0x7fffc1bac060, pp_stack=0x7fffffff8560, n=2, na=2, nk=0) at Python/ceval.c:4107\n#20 0x00007ffff7ac6d76 in call_function (pp_stack=0x7fffffff8560, oparg=1) at Python/ceval.c:4042\n#21 0x00007ffff7ac16ba in PyEval_EvalFrameEx (f=0x301c800, throwflag=0) at Python/ceval.c:2666\n#22 0x00007ffff7ac708a in fast_function (func=0x7fffc1bac108, pp_stack=0x7fffffff88e0, n=3, na=3, nk=0) at Python/ceval.c:4107\n#23 0x00007ffff7ac6d76 in call_function (pp_stack=0x7fffffff88e0, oparg=2) at Python/ceval.c:4042\n#24 0x00007ffff7ac16ba in PyEval_EvalFrameEx (f=0x301c5d0, throwflag=0) at Python/ceval.c:2666\n#25 0x00007ffff7ac708a in fast_function (func=0x7fffc1baf258, pp_stack=0x7fffffff8c60, n=2, na=2, nk=0) at Python/ceval.c:4107\n#26 0x00007ffff7ac6d76 in call_function (pp_stack=0x7fffffff8c60, oparg=1) at Python/ceval.c:4042\n#27 0x00007ffff7ac16ba in PyEval_EvalFrameEx (f=0x301c3a0, throwflag=0) at Python/ceval.c:2666\n#28 0x00007ffff7ac40aa in PyEval_EvalCodeEx (co=0x7fffc1c57d50, globals=0x2f88d70, locals=0x0, args=0x7fffc2720358, argcount=2, kws=0x0, kwcount=0, defs=0x0, defcount=0, closure=0x0)\n    at Python/ceval.c:3253\n#29 0x00007ffff79fd3fb in function_call (func=0x7fffc1baf1b0, arg=0x7fffc2720330, kw=0x0) at Objects/funcobject.c:526\n#30 0x00007ffff79be33e in PyObject_Call (func=0x7fffc1baf1b0, arg=0x7fffc2720330, kw=0x0) at Objects/abstract.c:2529\n#31 0x00007ffff79da311 in instancemethod_call (func=0x7fffc1baf1b0, arg=0x7fffc2720330, kw=0x0) at Objects/classobject.c:2578\n...\n```\n\nI'd say this is something we now try to understand what is happening here. Could it be that there is some unpickle function that is not correctly raising the refcount?",
    "created_at": "2012-12-28T21:36:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180133",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:78'></a>Even better!! The above test yields a reproducible crash on the command line:

```
sage -gdb
...
sage: from sage.tests.benchmark import FiniteExtFieldMult
sage: B = FiniteExtFieldMult(GF(Integer(9), 'x'), Integer(2))
python: Modules/gcmodule.c:326: visit_decref: Assertion `gc->gc.gc_refs != 0' failed.

Program received signal SIGABRT, Aborted.
0x00007ffff6d95d95 in raise () from /lib64/libc.so.6
(gdb) bt
#0  0x00007ffff6d95d95 in raise () from /lib64/libc.so.6
#1  0x00007ffff6d972ab in abort () from /lib64/libc.so.6
#2  0x00007ffff6d8e8fe in __assert_fail_base () from /lib64/libc.so.6
#3  0x00007ffff6d8e9a2 in __assert_fail () from /lib64/libc.so.6
#4  0x00007ffff7b129c9 in visit_decref (op=0x7fffc1b83a38, data=0x0) at Modules/gcmodule.c:326
#5  0x00007ffff7a1cbce in dict_traverse (op=0x3017a60, visit=0x7ffff7b1290e <visit_decref>, arg=0x0) at Objects/dictobject.c:2088
#6  0x00007ffff7b12a3e in subtract_refs (containers=0x7ffff7dc14e0 <generations>) at Modules/gcmodule.c:345
#7  0x00007ffff7b13a73 in collect (generation=0) at Modules/gcmodule.c:874
#8  0x00007ffff7b13d96 in collect_generations () at Modules/gcmodule.c:996
#9  0x00007ffff7b14a4a in _PyObject_GC_Malloc (basicsize=56) at Modules/gcmodule.c:1457
#10 0x00007ffff7b14a82 in _PyObject_GC_New (tp=0x7ffff7d9a3c0 <PyList_Type>) at Modules/gcmodule.c:1467
#11 0x00007ffff7a02405 in PyList_New (size=168) at Objects/listobject.c:142
#12 0x00007ffff2a2c395 in Pdata_popList (self=0x7fffc1c1ff90, start=80) at /home/simon/SAGE/debug/sage-5.6.beta1/spkg/build/python-2.7.3.p5/src/Modules/cPickle.c:306
#13 0x00007ffff2a3a0ee in do_append (self=0x7fffc26c17a0, x=80) at /home/simon/SAGE/debug/sage-5.6.beta1/spkg/build/python-2.7.3.p5/src/Modules/cPickle.c:4401
#14 0x00007ffff2a3a603 in load_appends (self=0x7fffc26c17a0) at /home/simon/SAGE/debug/sage-5.6.beta1/spkg/build/python-2.7.3.p5/src/Modules/cPickle.c:4450
#15 0x00007ffff2a3b875 in load (self=0x7fffc26c17a0) at /home/simon/SAGE/debug/sage-5.6.beta1/spkg/build/python-2.7.3.p5/src/Modules/cPickle.c:4835
#16 0x00007ffff2a3cbf9 in Unpickler_load (self=0x7fffc26c17a0, unused=0x0) at /home/simon/SAGE/debug/sage-5.6.beta1/spkg/build/python-2.7.3.p5/src/Modules/cPickle.c:5393
#17 0x00007ffff7ac675c in call_function (pp_stack=0x7fffffff81e0, oparg=0) at Python/ceval.c:4005
#18 0x00007ffff7ac16ba in PyEval_EvalFrameEx (f=0x301ca10, throwflag=0) at Python/ceval.c:2666
#19 0x00007ffff7ac708a in fast_function (func=0x7fffc1bac060, pp_stack=0x7fffffff8560, n=2, na=2, nk=0) at Python/ceval.c:4107
#20 0x00007ffff7ac6d76 in call_function (pp_stack=0x7fffffff8560, oparg=1) at Python/ceval.c:4042
#21 0x00007ffff7ac16ba in PyEval_EvalFrameEx (f=0x301c800, throwflag=0) at Python/ceval.c:2666
#22 0x00007ffff7ac708a in fast_function (func=0x7fffc1bac108, pp_stack=0x7fffffff88e0, n=3, na=3, nk=0) at Python/ceval.c:4107
#23 0x00007ffff7ac6d76 in call_function (pp_stack=0x7fffffff88e0, oparg=2) at Python/ceval.c:4042
#24 0x00007ffff7ac16ba in PyEval_EvalFrameEx (f=0x301c5d0, throwflag=0) at Python/ceval.c:2666
#25 0x00007ffff7ac708a in fast_function (func=0x7fffc1baf258, pp_stack=0x7fffffff8c60, n=2, na=2, nk=0) at Python/ceval.c:4107
#26 0x00007ffff7ac6d76 in call_function (pp_stack=0x7fffffff8c60, oparg=1) at Python/ceval.c:4042
#27 0x00007ffff7ac16ba in PyEval_EvalFrameEx (f=0x301c3a0, throwflag=0) at Python/ceval.c:2666
#28 0x00007ffff7ac40aa in PyEval_EvalCodeEx (co=0x7fffc1c57d50, globals=0x2f88d70, locals=0x0, args=0x7fffc2720358, argcount=2, kws=0x0, kwcount=0, defs=0x0, defcount=0, closure=0x0)
    at Python/ceval.c:3253
#29 0x00007ffff79fd3fb in function_call (func=0x7fffc1baf1b0, arg=0x7fffc2720330, kw=0x0) at Objects/funcobject.c:526
#30 0x00007ffff79be33e in PyObject_Call (func=0x7fffc1baf1b0, arg=0x7fffc2720330, kw=0x0) at Objects/abstract.c:2529
#31 0x00007ffff79da311 in instancemethod_call (func=0x7fffc1baf1b0, arg=0x7fffc2720330, kw=0x0) at Objects/classobject.c:2578
...
```

I'd say this is something we now try to understand what is happening here. Could it be that there is some unpickle function that is not correctly raising the refcount?



---

archive/issue_comments_180134.json:
```json
{
    "body": "<a id='comment:79'></a>Replying to [comment:77 SimonKing]:\n> {{{\n> sage -t -gdb -force_lib \"devel/sage/sage/tests/benchmark.py\"\n> }}}\n\nYes, that traceback is consistent with what I was observing prior to my ZODB upgrade. My guess is that if you step up to frame !#4 and execute\n\n```\n(gdb) p PyString_AsString(PyObject_Repr(op)) \n```\nyou'll see it's stumbling on a `BTree` object. Upgrading ZODB should do the trick (i.e., download\nfrom [http://pypi.python.org/pypi/ZODB3/3.10.5](http://pypi.python.org/pypi/ZODB3/3.10.5) and then run\n\n```\n./sage -sh\npython setup.py install\n```\nThe most immediate trigger is a garbage collection. ZODB had its own weakref implementation which played tricks with the reference counts, apparently confusing so checks activated by pydebug. It looks like they've solved that in 3.10.",
    "created_at": "2012-12-28T21:43:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180134",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:79'></a>Replying to [comment:77 SimonKing]:
> {{{
> sage -t -gdb -force_lib "devel/sage/sage/tests/benchmark.py"
> }}}

Yes, that traceback is consistent with what I was observing prior to my ZODB upgrade. My guess is that if you step up to frame !#4 and execute

```
(gdb) p PyString_AsString(PyObject_Repr(op)) 
```
you'll see it's stumbling on a `BTree` object. Upgrading ZODB should do the trick (i.e., download
from [http://pypi.python.org/pypi/ZODB3/3.10.5](http://pypi.python.org/pypi/ZODB3/3.10.5) and then run

```
./sage -sh
python setup.py install
```
The most immediate trigger is a garbage collection. ZODB had its own weakref implementation which played tricks with the reference counts, apparently confusing so checks activated by pydebug. It looks like they've solved that in 3.10.



---

archive/issue_comments_180135.json:
```json
{
    "body": "<a id='comment:80'></a>Wow! You know what actually fails? The following one-liner!\n\n```\nsage: K = GF(Integer(9), 'x')\npython: Modules/gcmodule.c:326: visit_decref: Assertion `gc->gc.gc_refs != 0' failed.\n\nProgram received signal SIGABRT, Aborted.\n0x00007ffff6d95d95 in raise () from /lib64/libc.so.6\n(gdb) bt\n#0  0x00007ffff6d95d95 in raise () from /lib64/libc.so.6\n#1  0x00007ffff6d972ab in abort () from /lib64/libc.so.6\n#2  0x00007ffff6d8e8fe in __assert_fail_base () from /lib64/libc.so.6\n#3  0x00007ffff6d8e9a2 in __assert_fail () from /lib64/libc.so.6\n#4  0x00007ffff7b129c9 in visit_decref (op=0x6407cd8, data=0x0) at Modules/gcmodule.c:326\n#5  0x00007ffff7a1cbce in dict_traverse (op=0x6465ac0, visit=0x7ffff7b1290e <visit_decref>, arg=0x0) at Objects/dictobject.c:2088\n#6  0x00007ffff7b12a3e in subtract_refs (containers=0x7ffff7dc14e0 <generations>) at Modules/gcmodule.c:345\n#7  0x00007ffff7b13a73 in collect (generation=0) at Modules/gcmodule.c:874\n#8  0x00007ffff7b13d96 in collect_generations () at Modules/gcmodule.c:996\n#9  0x00007ffff7b14a4a in _PyObject_GC_Malloc (basicsize=56) at Modules/gcmodule.c:1457\n#10 0x00007ffff7b14a82 in _PyObject_GC_New (tp=0x7ffff7d9a3c0 <PyList_Type>) at Modules/gcmodule.c:1467\n#11 0x00007ffff7a02405 in PyList_New (size=49) at Objects/listobject.c:142\n#12 0x00007ffff2f86395 in Pdata_popList (self=0x6368f90, start=100) at /home/simon/SAGE/debug/sage-5.6.beta1/spkg/build/python-2.7.3.p5/src/Modules/cPickle.c:306\n#13 0x00007ffff2f940ee in do_append (self=0x622f4e8, x=100) at /home/simon/SAGE/debug/sage-5.6.beta1/spkg/build/python-2.7.3.p5/src/Modules/cPickle.c:4401\n#14 0x00007ffff2f94603 in load_appends (self=0x622f4e8) at /home/simon/SAGE/debug/sage-5.6.beta1/spkg/build/python-2.7.3.p5/src/Modules/cPickle.c:4450\n#15 0x00007ffff2f95875 in load (self=0x622f4e8) at /home/simon/SAGE/debug/sage-5.6.beta1/spkg/build/python-2.7.3.p5/src/Modules/cPickle.c:4835\n#16 0x00007ffff2f96bf9 in Unpickler_load (self=0x622f4e8, unused=0x0) at /home/simon/SAGE/debug/sage-5.6.beta1/spkg/build/python-2.7.3.p5/src/Modules/cPickle.c:5393\n...\n```\n\nHowever,\n\n```\nsage: K = GF(Integer(3), 'x')\n```\nworks fine.\n\nSo, non-prime finite fields it is, then!\n\nI don't know about ZODB. What is it doing, and how can I upgrade it?",
    "created_at": "2012-12-28T21:47:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180135",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:80'></a>Wow! You know what actually fails? The following one-liner!

```
sage: K = GF(Integer(9), 'x')
python: Modules/gcmodule.c:326: visit_decref: Assertion `gc->gc.gc_refs != 0' failed.

Program received signal SIGABRT, Aborted.
0x00007ffff6d95d95 in raise () from /lib64/libc.so.6
(gdb) bt
#0  0x00007ffff6d95d95 in raise () from /lib64/libc.so.6
#1  0x00007ffff6d972ab in abort () from /lib64/libc.so.6
#2  0x00007ffff6d8e8fe in __assert_fail_base () from /lib64/libc.so.6
#3  0x00007ffff6d8e9a2 in __assert_fail () from /lib64/libc.so.6
#4  0x00007ffff7b129c9 in visit_decref (op=0x6407cd8, data=0x0) at Modules/gcmodule.c:326
#5  0x00007ffff7a1cbce in dict_traverse (op=0x6465ac0, visit=0x7ffff7b1290e <visit_decref>, arg=0x0) at Objects/dictobject.c:2088
#6  0x00007ffff7b12a3e in subtract_refs (containers=0x7ffff7dc14e0 <generations>) at Modules/gcmodule.c:345
#7  0x00007ffff7b13a73 in collect (generation=0) at Modules/gcmodule.c:874
#8  0x00007ffff7b13d96 in collect_generations () at Modules/gcmodule.c:996
#9  0x00007ffff7b14a4a in _PyObject_GC_Malloc (basicsize=56) at Modules/gcmodule.c:1457
#10 0x00007ffff7b14a82 in _PyObject_GC_New (tp=0x7ffff7d9a3c0 <PyList_Type>) at Modules/gcmodule.c:1467
#11 0x00007ffff7a02405 in PyList_New (size=49) at Objects/listobject.c:142
#12 0x00007ffff2f86395 in Pdata_popList (self=0x6368f90, start=100) at /home/simon/SAGE/debug/sage-5.6.beta1/spkg/build/python-2.7.3.p5/src/Modules/cPickle.c:306
#13 0x00007ffff2f940ee in do_append (self=0x622f4e8, x=100) at /home/simon/SAGE/debug/sage-5.6.beta1/spkg/build/python-2.7.3.p5/src/Modules/cPickle.c:4401
#14 0x00007ffff2f94603 in load_appends (self=0x622f4e8) at /home/simon/SAGE/debug/sage-5.6.beta1/spkg/build/python-2.7.3.p5/src/Modules/cPickle.c:4450
#15 0x00007ffff2f95875 in load (self=0x622f4e8) at /home/simon/SAGE/debug/sage-5.6.beta1/spkg/build/python-2.7.3.p5/src/Modules/cPickle.c:4835
#16 0x00007ffff2f96bf9 in Unpickler_load (self=0x622f4e8, unused=0x0) at /home/simon/SAGE/debug/sage-5.6.beta1/spkg/build/python-2.7.3.p5/src/Modules/cPickle.c:5393
...
```

However,

```
sage: K = GF(Integer(3), 'x')
```
works fine.

So, non-prime finite fields it is, then!

I don't know about ZODB. What is it doing, and how can I upgrade it?



---

archive/issue_comments_180136.json:
```json
{
    "body": "<a id='comment:81'></a>Here is our problem:\n\n```\nsage: sage.databases.conway.ConwayPolynomials().has_polynomial(3,2)\n<BOOM>\n```\n\nSo, it is a look-up in a data base, which explains why (un)pickling is involved in the backtrace.",
    "created_at": "2012-12-28T22:29:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180136",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:81'></a>Here is our problem:

```
sage: sage.databases.conway.ConwayPolynomials().has_polynomial(3,2)
<BOOM>
```

So, it is a look-up in a data base, which explains why (un)pickling is involved in the backtrace.



---

archive/issue_comments_180137.json:
```json
{
    "body": "<a id='comment:82'></a>When one traces through the above command,\n\n```\nsage: trace(\"sage.databases.conway.ConwayPolynomials().has_polynomial(3,2)\")\n```\none soon sees:\n\n```\n> /home/simon/SAGE/debug/sage-5.6.beta1/local/lib/python2.7/site-packages/sage/databases/db.py(125)_load_()\n    124 \n--> 125     def _load_(self):\n    126         import BTrees.OOBTree\n\nipdb> \n> /home/simon/SAGE/debug/sage-5.6.beta1/local/lib/python2.7/site-packages/sage/databases/db.py(126)_load_()\n    125     def _load_(self):\n--> 126         import BTrees.OOBTree\n    127         from ZODB import FileStorage, DB\n```\n\nSo, ZODB *is* involved! How can it be upgraded?",
    "created_at": "2012-12-28T22:35:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180137",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:82'></a>When one traces through the above command,

```
sage: trace("sage.databases.conway.ConwayPolynomials().has_polynomial(3,2)")
```
one soon sees:

```
> /home/simon/SAGE/debug/sage-5.6.beta1/local/lib/python2.7/site-packages/sage/databases/db.py(125)_load_()
    124 
--> 125     def _load_(self):
    126         import BTrees.OOBTree

ipdb> 
> /home/simon/SAGE/debug/sage-5.6.beta1/local/lib/python2.7/site-packages/sage/databases/db.py(126)_load_()
    125     def _load_(self):
--> 126         import BTrees.OOBTree
    127         from ZODB import FileStorage, DB
```

So, ZODB *is* involved! How can it be upgraded?



---

archive/issue_comments_180138.json:
```json
{
    "body": "<a id='comment:83'></a>ZODB upgrade is at #10352.",
    "created_at": "2012-12-28T22:45:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180138",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:83'></a>ZODB upgrade is at #10352.



---

archive/issue_comments_180139.json:
```json
{
    "body": "<a id='comment:84'></a>Unfortunately, the new zodb spkg from #10352 does not solve the problem:\n\n```\nsage: sage.databases.conway.ConwayPolynomials().has_polynomial(3,2)\npython: Modules/gcmodule.c:326: visit_decref: Assertion `gc->gc.gc_refs != 0' failed.\n\nProgram received signal SIGABRT, Aborted.\n0x00007ffff6d95d95 in raise () from /lib64/libc.so.6\n(gdb) bt\n#0  0x00007ffff6d95d95 in raise () from /lib64/libc.so.6\n#1  0x00007ffff6d972ab in abort () from /lib64/libc.so.6\n#2  0x00007ffff6d8e8fe in __assert_fail_base () from /lib64/libc.so.6\n#3  0x00007ffff6d8e9a2 in __assert_fail () from /lib64/libc.so.6\n#4  0x00007ffff7b129c9 in visit_decref (op=0x688ee28, data=0x0) at Modules/gcmodule.c:326\n#5  0x00007ffff7a1cbce in dict_traverse (op=0x637f690, visit=0x7ffff7b1290e <visit_decref>, arg=0x0) at Objects/dictobject.c:2088\n#6  0x00007ffff7b12a3e in subtract_refs (containers=0x7ffff7dc14e0 <generations>) at Modules/gcmodule.c:345\n#7  0x00007ffff7b13a73 in collect (generation=0) at Modules/gcmodule.c:874\n#8  0x00007ffff7b13d96 in collect_generations () at Modules/gcmodule.c:996\n#9  0x00007ffff7b14a4a in _PyObject_GC_Malloc (basicsize=120) at Modules/gcmodule.c:1457\n#10 0x00007ffff7a4c1b7 in PyType_GenericAlloc (type=0x7fffc5af4660 <BucketType>, nitems=0) at Objects/typeobject.c:753\n#11 0x00007ffff7a4c341 in PyType_GenericNew (type=0x7fffc5af4660 <BucketType>, args=0x7ffff7f90060, kwds=0x0) at Objects/typeobject.c:778\n#12 0x00007ffff7a597cd in tp_new_wrapper (self=0x7fffc5af4660 <BucketType>, args=0x7ffff7f90060, kwds=0x0) at Objects/typeobject.c:4779\n#13 0x00007ffff7a21088 in PyCFunction_Call (func=0x61a0948, arg=0xf1f3e0, kw=0x0) at Objects/methodobject.c:85\n#14 0x00007ffff7ac6b75 in call_function (pp_stack=0x7fffffff8190, oparg=1) at Python/ceval.c:4021\n#15 0x00007ffff7ac16ba in PyEval_EvalFrameEx (f=0x63727d0, throwflag=0) at Python/ceval.c:2666\n#16 0x00007ffff7ac40aa in PyEval_EvalCodeEx (co=0x64f70f0, globals=0x6273ce0, locals=0x0, args=0xe20688, argcount=3, kws=0x0, kwcount=0, defs=0x0, defcount=0, closure=0x0) at Python/ceval.c:3253\n#17 0x00007ffff79fd3fb in function_call (func=0x6500060, arg=0xe20660, kw=0x0) at Objects/funcobject.c:526\n#18 0x00007ffff79be33e in PyObject_Call (func=0x6500060, arg=0xe20660, kw=0x0) at Objects/abstract.c:2529\n#19 0x00007ffff7ac8113 in ext_do_call (func=0x6500060, pp_stack=0x7fffffff8698, flags=1, na=1, nk=0) at Python/ceval.c:4334\n#20 0x00007ffff7ac194b in PyEval_EvalFrameEx (f=0x63725b0, throwflag=0) at Python/ceval.c:2705\n#21 0x00007ffff7ac40aa in PyEval_EvalCodeEx (co=0x64f7040, globals=0x6273ce0, locals=0x0, args=0x6516cb8, argcount=2, kws=0x0, kwcount=0, defs=0x0, defcount=0, closure=0x0) at Python/ceval.c:3253\n#22 0x00007ffff79fd3fb in function_call (func=0x64eff78, arg=0x6516c90, kw=0x0) at Objects/funcobject.c:526\n#23 0x00007ffff79be33e in PyObject_Call (func=0x64eff78, arg=0x6516c90, kw=0x0) at Objects/abstract.c:2529\n#24 0x00007ffff79da311 in instancemethod_call (func=0x64eff78, arg=0x6516c90, kw=0x0) at Objects/classobject.c:2578\n#25 0x00007ffff79be33e in PyObject_Call (func=0x619e260, arg=0x81a840, kw=0x0) at Objects/abstract.c:2529\n#26 0x00007ffff2f92b73 in load_binpersid (self=0x62c9a58) at /home/simon/SAGE/debug/sage-5.6.beta1/spkg/build/python-2.7.3.p5/src/Modules/cPickle.c:4083\n#27 0x00007ffff2f95a46 in load (self=0x62c9a58) at /home/simon/SAGE/debug/sage-5.6.beta1/spkg/build/python-2.7.3.p5/src/Modules/cPickle.c:4927\n#28 0x00007ffff2f96bf9 in Unpickler_load (self=0x62c9a58, unused=0x0) at /home/simon/SAGE/debug/sage-5.6.beta1/spkg/build/python-2.7.3.p5/src/Modules/cPickle.c:5393\n...\n```",
    "created_at": "2012-12-28T22:51:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180139",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:84'></a>Unfortunately, the new zodb spkg from #10352 does not solve the problem:

```
sage: sage.databases.conway.ConwayPolynomials().has_polynomial(3,2)
python: Modules/gcmodule.c:326: visit_decref: Assertion `gc->gc.gc_refs != 0' failed.

Program received signal SIGABRT, Aborted.
0x00007ffff6d95d95 in raise () from /lib64/libc.so.6
(gdb) bt
#0  0x00007ffff6d95d95 in raise () from /lib64/libc.so.6
#1  0x00007ffff6d972ab in abort () from /lib64/libc.so.6
#2  0x00007ffff6d8e8fe in __assert_fail_base () from /lib64/libc.so.6
#3  0x00007ffff6d8e9a2 in __assert_fail () from /lib64/libc.so.6
#4  0x00007ffff7b129c9 in visit_decref (op=0x688ee28, data=0x0) at Modules/gcmodule.c:326
#5  0x00007ffff7a1cbce in dict_traverse (op=0x637f690, visit=0x7ffff7b1290e <visit_decref>, arg=0x0) at Objects/dictobject.c:2088
#6  0x00007ffff7b12a3e in subtract_refs (containers=0x7ffff7dc14e0 <generations>) at Modules/gcmodule.c:345
#7  0x00007ffff7b13a73 in collect (generation=0) at Modules/gcmodule.c:874
#8  0x00007ffff7b13d96 in collect_generations () at Modules/gcmodule.c:996
#9  0x00007ffff7b14a4a in _PyObject_GC_Malloc (basicsize=120) at Modules/gcmodule.c:1457
#10 0x00007ffff7a4c1b7 in PyType_GenericAlloc (type=0x7fffc5af4660 <BucketType>, nitems=0) at Objects/typeobject.c:753
#11 0x00007ffff7a4c341 in PyType_GenericNew (type=0x7fffc5af4660 <BucketType>, args=0x7ffff7f90060, kwds=0x0) at Objects/typeobject.c:778
#12 0x00007ffff7a597cd in tp_new_wrapper (self=0x7fffc5af4660 <BucketType>, args=0x7ffff7f90060, kwds=0x0) at Objects/typeobject.c:4779
#13 0x00007ffff7a21088 in PyCFunction_Call (func=0x61a0948, arg=0xf1f3e0, kw=0x0) at Objects/methodobject.c:85
#14 0x00007ffff7ac6b75 in call_function (pp_stack=0x7fffffff8190, oparg=1) at Python/ceval.c:4021
#15 0x00007ffff7ac16ba in PyEval_EvalFrameEx (f=0x63727d0, throwflag=0) at Python/ceval.c:2666
#16 0x00007ffff7ac40aa in PyEval_EvalCodeEx (co=0x64f70f0, globals=0x6273ce0, locals=0x0, args=0xe20688, argcount=3, kws=0x0, kwcount=0, defs=0x0, defcount=0, closure=0x0) at Python/ceval.c:3253
#17 0x00007ffff79fd3fb in function_call (func=0x6500060, arg=0xe20660, kw=0x0) at Objects/funcobject.c:526
#18 0x00007ffff79be33e in PyObject_Call (func=0x6500060, arg=0xe20660, kw=0x0) at Objects/abstract.c:2529
#19 0x00007ffff7ac8113 in ext_do_call (func=0x6500060, pp_stack=0x7fffffff8698, flags=1, na=1, nk=0) at Python/ceval.c:4334
#20 0x00007ffff7ac194b in PyEval_EvalFrameEx (f=0x63725b0, throwflag=0) at Python/ceval.c:2705
#21 0x00007ffff7ac40aa in PyEval_EvalCodeEx (co=0x64f7040, globals=0x6273ce0, locals=0x0, args=0x6516cb8, argcount=2, kws=0x0, kwcount=0, defs=0x0, defcount=0, closure=0x0) at Python/ceval.c:3253
#22 0x00007ffff79fd3fb in function_call (func=0x64eff78, arg=0x6516c90, kw=0x0) at Objects/funcobject.c:526
#23 0x00007ffff79be33e in PyObject_Call (func=0x64eff78, arg=0x6516c90, kw=0x0) at Objects/abstract.c:2529
#24 0x00007ffff79da311 in instancemethod_call (func=0x64eff78, arg=0x6516c90, kw=0x0) at Objects/classobject.c:2578
#25 0x00007ffff79be33e in PyObject_Call (func=0x619e260, arg=0x81a840, kw=0x0) at Objects/abstract.c:2529
#26 0x00007ffff2f92b73 in load_binpersid (self=0x62c9a58) at /home/simon/SAGE/debug/sage-5.6.beta1/spkg/build/python-2.7.3.p5/src/Modules/cPickle.c:4083
#27 0x00007ffff2f95a46 in load (self=0x62c9a58) at /home/simon/SAGE/debug/sage-5.6.beta1/spkg/build/python-2.7.3.p5/src/Modules/cPickle.c:4927
#28 0x00007ffff2f96bf9 in Unpickler_load (self=0x62c9a58, unused=0x0) at /home/simon/SAGE/debug/sage-5.6.beta1/spkg/build/python-2.7.3.p5/src/Modules/cPickle.c:5393
...
```



---

archive/issue_comments_180140.json:
```json
{
    "body": "<a id='comment:85'></a>The spkg from #10352 does not solve the problem. However, when I manually install zodb as you described in comment:79, things start to work!",
    "created_at": "2012-12-28T23:06:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180140",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:85'></a>The spkg from #10352 does not solve the problem. However, when I manually install zodb as you described in comment:79, things start to work!



---

archive/issue_comments_180141.json:
```json
{
    "body": "<a id='comment:86'></a>Replying to [comment:85 SimonKing]:\n> The spkg from #10352 does not solve the problem. However, when I manually install zodb as you described in comment:79, things start to work!\n\n\nI have changed that ticket to link to an upgraded spkg, which should resolve the issue.",
    "created_at": "2012-12-28T23:53:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180141",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:86'></a>Replying to [comment:85 SimonKing]:
> The spkg from #10352 does not solve the problem. However, when I manually install zodb as you described in comment:79, things start to work!


I have changed that ticket to link to an upgraded spkg, which should resolve the issue.



---

archive/issue_comments_180142.json:
```json
{
    "body": "<a id='comment:87'></a>With a manually installed zodb3-3.10.5 and the other involved tickets, `make ptest` with `MALLOC_CHECK_=3` results in the following crashes:\n\n```\nThe following tests failed:\n\n        sage -t  -force_lib devel/sage/sage/combinat/tiling.py # Killed/crashed\n        sage -t  -force_lib devel/sage/sage/schemes/elliptic_curves/ell_local_data.py # Killed/crashed\n        sage -t  -force_lib devel/sage/sage/schemes/elliptic_curves/ell_finite_field.py # Killed/crashed\n        sage -t  -force_lib devel/sage/sage/schemes/elliptic_curves/ell_curve_isogeny.py # Killed/crashed\n        sage -t  -force_lib devel/sage/sage/schemes/elliptic_curves/BSD.py # Killed/crashed\n        sage -t  -force_lib devel/sage/sage/schemes/elliptic_curves/ell_number_field.py # Killed/crashed\n        sage -t  -force_lib devel/sage/sage/schemes/elliptic_curves/ell_torsion.py # Killed/crashed\n        sage -t  -force_lib devel/sage/sage/schemes/elliptic_curves/ell_field.py # Killed/crashed\n        sage -t  -force_lib devel/sage/sage/schemes/elliptic_curves/heegner.py # Killed/crashed\n        sage -t  -force_lib devel/sage/sage/schemes/elliptic_curves/ell_point.py # Killed/crashed\n        sage -t  -force_lib devel/sage/sage/schemes/elliptic_curves/gal_reps.py # Killed/crashed\n        sage -t  -force_lib devel/sage/sage/modules/free_module.py # Killed/crashed\n        sage -t  -force_lib devel/sage/sage/modules/matrix_morphism.py # Killed/crashed\n        sage -t  -force_lib devel/sage/sage/algebras/quatalg/quaternion_algebra.py # Killed/crashed\n        sage -t  -force_lib devel/sage/sage/quadratic_forms/quadratic_form__ternary_Tornaria.py # Killed/crashed\n        sage -t  -force_lib devel/sage/sage/quadratic_forms/quadratic_form__genus.py # Killed/crashed\n        sage -t  -force_lib devel/sage/sage/quadratic_forms/quadratic_form__equivalence_testing.py # Killed/crashed\n        sage -t  -force_lib devel/sage/sage/quadratic_forms/genera/genus.py # Killed/crashed\n        sage -t  -force_lib devel/sage/sage/homology/chain_complex.py # Killed/crashed\n        sage -t  -force_lib devel/sage/sage/modular/quatalg/brandt.py # Killed/crashed\n        sage -t  -force_lib devel/sage/sage/modular/abvar/abvar.py # Killed/crashed\n        sage -t  -force_lib devel/sage/sage/modular/modform/find_generators.py # Killed/crashed\n        sage -t  -force_lib devel/sage/sage/modular/modsym/ambient.py # Killed/crashed\n        sage -t  -force_lib devel/sage/sage/rings/residue_field.pyx # Killed/crashed\n        sage -t  -force_lib devel/sage/sage/rings/number_field/number_field_element.pyx # Killed/crashed\n        sage -t  -force_lib devel/sage/sage/rings/number_field/number_field_ideal.py # Killed/crashed\n        sage -t  -force_lib devel/sage/sage/rings/polynomial/pbori.pyx # Killed/crashed\n        sage -t  -force_lib devel/sage/sage/rings/finite_rings/finite_field_base.pyx # Killed/crashed\n        sage -t  -force_lib devel/sage/sage/matrix/benchmark.py # Killed/crashed\n        sage -t  -force_lib devel/sage/sage/matrix/matrix_modn_dense_template.pxi # Killed/crashed\n        sage -t  -force_lib devel/sage/sage/matrix/matrix_integer_dense_hnf.py # Killed/crashed\n        sage -t  -force_lib devel/sage/sage/matrix/matrix_integer_dense_saturation.py # Killed/crashed\n        sage -t  -force_lib devel/sage/sage/matrix/matrix_cyclo_dense.pyx # Killed/crashed\n        sage -t  -force_lib devel/sage/sage/matrix/matrix2.pyx # Killed/crashed\n----------------------------------------------------------------------\nTotal time for all tests: 7238.7 seconds\n```\n\nNils has reported a failure in an assert in `linbox/matric/permutation-matrix.h`, that I can confirm. Again with `MALLOC_CHECK_=3` and gdb:\n\n```\nsage: sage.homology.chain_complex.HomologyGroup(100)\n\n\nERROR (at getWritePointer in /home/simon/SAGE/debug/sage-5.6.beta1/local/include/linbox/matrix/permutation-matrix.h:175): \nPrecondition not met:P_.size()\nterminate called after throwing an instance of 'LinBox::PreconditionFailed'\n\nProgram received signal SIGABRT, Aborted.\n0x00007ffff6d95d95 in raise () from /lib64/libc.so.6\n(gdb) bt\n#0  0x00007ffff6d95d95 in raise () from /lib64/libc.so.6\n#1  0x00007ffff6d972ab in abort () from /lib64/libc.so.6\n#2  0x00007ffff2295f2d in __gnu_cxx::__verbose_terminate_handler() () from /usr/lib64/libstdc++.so.6\n#3  0x00007ffff22940d6 in ?? () from /usr/lib64/libstdc++.so.6\n#4  0x00007ffff2294103 in std::terminate() () from /usr/lib64/libstdc++.so.6\n#5  0x00007ffff22941fe in __cxa_throw () from /usr/lib64/libstdc++.so.6\n#6  0x00007fffd718c62f in LinBox::BlasPermutation<unsigned long>::getWritePointer (this=0x7fffffff6760) at /home/simon/SAGE/debug/sage-5.6.beta1/local/include/linbox/matrix/permutation-matrix.h:175\n#7  0x00007fffd717f0b1 in LinBox::LQUPMatrix<LinBox::Modular<double> >::LQUPMatrix (this=0x7fffffff6700, A=..., P=..., Q=...)\n    at /home/simon/SAGE/debug/sage-5.6.beta1/local/include/linbox/matrix/factorized-matrix.inl:810\n#8  0x00007fffd716b350 in LinBox::EchelonFormDomain<LinBox::Modular<double> >::columnReducedEchelon<LinBox::BlasMatrix<LinBox::Modular<double> > > (this=0x6a247c0, E=...)\n    at /home/simon/SAGE/debug/sage-5.6.beta1/local/include/linbox/algorithms/echelon-form.h:205\n#9  0x00007fffd716653e in LinBox::EchelonFormDomain<LinBox::Modular<double> >::rowReducedEchelon<LinBox::BlasMatrix<LinBox::Modular<double> > > (this=0x6a247c0, E=..., A=...)\n    at /home/simon/SAGE/debug/sage-5.6.beta1/local/include/linbox/algorithms/echelon-form.h:107\n#10 0x00007fffd71279f5 in __pyx_f_4sage_6matrix_24matrix_modn_dense_double_linbox_echelonize_efd (__pyx_v_modulus=21059, __pyx_v_entries=0x6a24730, __pyx_v_nrows=0, __pyx_v_ncols=100)\n    at sage/matrix/matrix_modn_dense_double.cpp:4074\n#11 0x00007fffd71417ca in __pyx_pf_4sage_6matrix_24matrix_modn_dense_double_26Matrix_modn_dense_template_34_echelonize_linbox (__pyx_v_self=0x66aa6d8, __pyx_v_efd=0x7ffff7d89ec0 <_Py_TrueStruct>)\n    at sage/matrix/matrix_modn_dense_double.cpp:11280\n#12 0x00007fffd71411c1 in __pyx_pw_4sage_6matrix_24matrix_modn_dense_double_26Matrix_modn_dense_template_35_echelonize_linbox (__pyx_v_self=0x66aa6d8, __pyx_args=0x7ffff7f90060, __pyx_kwds=0x6a39940)\n    at sage/matrix/matrix_modn_dense_double.cpp:11185\n#13 0x00007ffff7a21088 in PyCFunction_Call (func=0x66b40d8, arg=0x7ffff7f90060, kw=0x6a39940) at Objects/methodobject.c:85\n#14 0x00007ffff79be33e in PyObject_Call (func=0x66b40d8, arg=0x7ffff7f90060, kw=0x6a39940) at Objects/abstract.c:2529\n#15 0x00007fffd713f3ce in __pyx_pf_4sage_6matrix_24matrix_modn_dense_double_26Matrix_modn_dense_template_32echelonize (__pyx_v_self=0x66aa6d8, __pyx_v_algorithm=0x26ae2e0, __pyx_v_kwds=0x6a37920)\n    at sage/matrix/matrix_modn_dense_double.cpp:10889\n#16 0x00007fffd713e64a in __pyx_pw_4sage_6matrix_24matrix_modn_dense_double_26Matrix_modn_dense_template_33echelonize (__pyx_v_self=0x66aa6d8, __pyx_args=0x7ffff7f90060, __pyx_kwds=0x6a368f0)\n    at sage/matrix/matrix_modn_dense_double.cpp:10738\n#17 0x00007ffff7a21088 in PyCFunction_Call (func=0x65abc90, arg=0x7ffff7f90060, kw=0x6a368f0) at Objects/methodobject.c:85\n#18 0x00007ffff79be33e in PyObject_Call (func=0x65abc90, arg=0x7ffff7f90060, kw=0x6a368f0) at Objects/abstract.c:2529\n#19 0x00007fffd9b50c55 in __pyx_pf_4sage_6matrix_7matrix2_6Matrix_134echelon_form (__pyx_v_self=0x66aa568, __pyx_v_algorithm=0x653be0, __pyx_v_cutoff=0x61f5b8, __pyx_v_kwds=0x67154d0)\n    at sage/matrix/matrix2.c:31710\n#20 0x00007fffd9b4ffca in __pyx_pw_4sage_6matrix_7matrix2_6Matrix_135echelon_form (__pyx_v_self=0x66aa568, __pyx_args=0x7ffff7f90060, __pyx_kwds=0x0) at sage/matrix/matrix2.c:31508\n#21 0x00007ffff7a21088 in PyCFunction_Call (func=0xfb0588, arg=0x7ffff7f90060, kw=0x0) at Objects/methodobject.c:85\n#22 0x00007ffff79be33e in PyObject_Call (func=0xfb0588, arg=0x7ffff7f90060, kw=0x0) at Objects/abstract.c:2529\n#23 0x00007fffd95f2e94 in __pyx_pf_4sage_6matrix_7matrix0_6Matrix_124pivots (__pyx_v_self=0x66aa568) at sage/matrix/matrix0.c:20883\n...\n```\n\nGiven the list of crashing tests above, a failure in echelonisation of matrices is likely to explain most of the crashes.\n\nQuestion: Is that an upstream bug (in Linbox) or did we screw up by ourselves?",
    "created_at": "2012-12-29T08:12:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180142",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:87'></a>With a manually installed zodb3-3.10.5 and the other involved tickets, `make ptest` with `MALLOC_CHECK_=3` results in the following crashes:

```
The following tests failed:

        sage -t  -force_lib devel/sage/sage/combinat/tiling.py # Killed/crashed
        sage -t  -force_lib devel/sage/sage/schemes/elliptic_curves/ell_local_data.py # Killed/crashed
        sage -t  -force_lib devel/sage/sage/schemes/elliptic_curves/ell_finite_field.py # Killed/crashed
        sage -t  -force_lib devel/sage/sage/schemes/elliptic_curves/ell_curve_isogeny.py # Killed/crashed
        sage -t  -force_lib devel/sage/sage/schemes/elliptic_curves/BSD.py # Killed/crashed
        sage -t  -force_lib devel/sage/sage/schemes/elliptic_curves/ell_number_field.py # Killed/crashed
        sage -t  -force_lib devel/sage/sage/schemes/elliptic_curves/ell_torsion.py # Killed/crashed
        sage -t  -force_lib devel/sage/sage/schemes/elliptic_curves/ell_field.py # Killed/crashed
        sage -t  -force_lib devel/sage/sage/schemes/elliptic_curves/heegner.py # Killed/crashed
        sage -t  -force_lib devel/sage/sage/schemes/elliptic_curves/ell_point.py # Killed/crashed
        sage -t  -force_lib devel/sage/sage/schemes/elliptic_curves/gal_reps.py # Killed/crashed
        sage -t  -force_lib devel/sage/sage/modules/free_module.py # Killed/crashed
        sage -t  -force_lib devel/sage/sage/modules/matrix_morphism.py # Killed/crashed
        sage -t  -force_lib devel/sage/sage/algebras/quatalg/quaternion_algebra.py # Killed/crashed
        sage -t  -force_lib devel/sage/sage/quadratic_forms/quadratic_form__ternary_Tornaria.py # Killed/crashed
        sage -t  -force_lib devel/sage/sage/quadratic_forms/quadratic_form__genus.py # Killed/crashed
        sage -t  -force_lib devel/sage/sage/quadratic_forms/quadratic_form__equivalence_testing.py # Killed/crashed
        sage -t  -force_lib devel/sage/sage/quadratic_forms/genera/genus.py # Killed/crashed
        sage -t  -force_lib devel/sage/sage/homology/chain_complex.py # Killed/crashed
        sage -t  -force_lib devel/sage/sage/modular/quatalg/brandt.py # Killed/crashed
        sage -t  -force_lib devel/sage/sage/modular/abvar/abvar.py # Killed/crashed
        sage -t  -force_lib devel/sage/sage/modular/modform/find_generators.py # Killed/crashed
        sage -t  -force_lib devel/sage/sage/modular/modsym/ambient.py # Killed/crashed
        sage -t  -force_lib devel/sage/sage/rings/residue_field.pyx # Killed/crashed
        sage -t  -force_lib devel/sage/sage/rings/number_field/number_field_element.pyx # Killed/crashed
        sage -t  -force_lib devel/sage/sage/rings/number_field/number_field_ideal.py # Killed/crashed
        sage -t  -force_lib devel/sage/sage/rings/polynomial/pbori.pyx # Killed/crashed
        sage -t  -force_lib devel/sage/sage/rings/finite_rings/finite_field_base.pyx # Killed/crashed
        sage -t  -force_lib devel/sage/sage/matrix/benchmark.py # Killed/crashed
        sage -t  -force_lib devel/sage/sage/matrix/matrix_modn_dense_template.pxi # Killed/crashed
        sage -t  -force_lib devel/sage/sage/matrix/matrix_integer_dense_hnf.py # Killed/crashed
        sage -t  -force_lib devel/sage/sage/matrix/matrix_integer_dense_saturation.py # Killed/crashed
        sage -t  -force_lib devel/sage/sage/matrix/matrix_cyclo_dense.pyx # Killed/crashed
        sage -t  -force_lib devel/sage/sage/matrix/matrix2.pyx # Killed/crashed
----------------------------------------------------------------------
Total time for all tests: 7238.7 seconds
```

Nils has reported a failure in an assert in `linbox/matric/permutation-matrix.h`, that I can confirm. Again with `MALLOC_CHECK_=3` and gdb:

```
sage: sage.homology.chain_complex.HomologyGroup(100)


ERROR (at getWritePointer in /home/simon/SAGE/debug/sage-5.6.beta1/local/include/linbox/matrix/permutation-matrix.h:175): 
Precondition not met:P_.size()
terminate called after throwing an instance of 'LinBox::PreconditionFailed'

Program received signal SIGABRT, Aborted.
0x00007ffff6d95d95 in raise () from /lib64/libc.so.6
(gdb) bt
#0  0x00007ffff6d95d95 in raise () from /lib64/libc.so.6
#1  0x00007ffff6d972ab in abort () from /lib64/libc.so.6
#2  0x00007ffff2295f2d in __gnu_cxx::__verbose_terminate_handler() () from /usr/lib64/libstdc++.so.6
#3  0x00007ffff22940d6 in ?? () from /usr/lib64/libstdc++.so.6
#4  0x00007ffff2294103 in std::terminate() () from /usr/lib64/libstdc++.so.6
#5  0x00007ffff22941fe in __cxa_throw () from /usr/lib64/libstdc++.so.6
#6  0x00007fffd718c62f in LinBox::BlasPermutation<unsigned long>::getWritePointer (this=0x7fffffff6760) at /home/simon/SAGE/debug/sage-5.6.beta1/local/include/linbox/matrix/permutation-matrix.h:175
#7  0x00007fffd717f0b1 in LinBox::LQUPMatrix<LinBox::Modular<double> >::LQUPMatrix (this=0x7fffffff6700, A=..., P=..., Q=...)
    at /home/simon/SAGE/debug/sage-5.6.beta1/local/include/linbox/matrix/factorized-matrix.inl:810
#8  0x00007fffd716b350 in LinBox::EchelonFormDomain<LinBox::Modular<double> >::columnReducedEchelon<LinBox::BlasMatrix<LinBox::Modular<double> > > (this=0x6a247c0, E=...)
    at /home/simon/SAGE/debug/sage-5.6.beta1/local/include/linbox/algorithms/echelon-form.h:205
#9  0x00007fffd716653e in LinBox::EchelonFormDomain<LinBox::Modular<double> >::rowReducedEchelon<LinBox::BlasMatrix<LinBox::Modular<double> > > (this=0x6a247c0, E=..., A=...)
    at /home/simon/SAGE/debug/sage-5.6.beta1/local/include/linbox/algorithms/echelon-form.h:107
#10 0x00007fffd71279f5 in __pyx_f_4sage_6matrix_24matrix_modn_dense_double_linbox_echelonize_efd (__pyx_v_modulus=21059, __pyx_v_entries=0x6a24730, __pyx_v_nrows=0, __pyx_v_ncols=100)
    at sage/matrix/matrix_modn_dense_double.cpp:4074
#11 0x00007fffd71417ca in __pyx_pf_4sage_6matrix_24matrix_modn_dense_double_26Matrix_modn_dense_template_34_echelonize_linbox (__pyx_v_self=0x66aa6d8, __pyx_v_efd=0x7ffff7d89ec0 <_Py_TrueStruct>)
    at sage/matrix/matrix_modn_dense_double.cpp:11280
#12 0x00007fffd71411c1 in __pyx_pw_4sage_6matrix_24matrix_modn_dense_double_26Matrix_modn_dense_template_35_echelonize_linbox (__pyx_v_self=0x66aa6d8, __pyx_args=0x7ffff7f90060, __pyx_kwds=0x6a39940)
    at sage/matrix/matrix_modn_dense_double.cpp:11185
#13 0x00007ffff7a21088 in PyCFunction_Call (func=0x66b40d8, arg=0x7ffff7f90060, kw=0x6a39940) at Objects/methodobject.c:85
#14 0x00007ffff79be33e in PyObject_Call (func=0x66b40d8, arg=0x7ffff7f90060, kw=0x6a39940) at Objects/abstract.c:2529
#15 0x00007fffd713f3ce in __pyx_pf_4sage_6matrix_24matrix_modn_dense_double_26Matrix_modn_dense_template_32echelonize (__pyx_v_self=0x66aa6d8, __pyx_v_algorithm=0x26ae2e0, __pyx_v_kwds=0x6a37920)
    at sage/matrix/matrix_modn_dense_double.cpp:10889
#16 0x00007fffd713e64a in __pyx_pw_4sage_6matrix_24matrix_modn_dense_double_26Matrix_modn_dense_template_33echelonize (__pyx_v_self=0x66aa6d8, __pyx_args=0x7ffff7f90060, __pyx_kwds=0x6a368f0)
    at sage/matrix/matrix_modn_dense_double.cpp:10738
#17 0x00007ffff7a21088 in PyCFunction_Call (func=0x65abc90, arg=0x7ffff7f90060, kw=0x6a368f0) at Objects/methodobject.c:85
#18 0x00007ffff79be33e in PyObject_Call (func=0x65abc90, arg=0x7ffff7f90060, kw=0x6a368f0) at Objects/abstract.c:2529
#19 0x00007fffd9b50c55 in __pyx_pf_4sage_6matrix_7matrix2_6Matrix_134echelon_form (__pyx_v_self=0x66aa568, __pyx_v_algorithm=0x653be0, __pyx_v_cutoff=0x61f5b8, __pyx_v_kwds=0x67154d0)
    at sage/matrix/matrix2.c:31710
#20 0x00007fffd9b4ffca in __pyx_pw_4sage_6matrix_7matrix2_6Matrix_135echelon_form (__pyx_v_self=0x66aa568, __pyx_args=0x7ffff7f90060, __pyx_kwds=0x0) at sage/matrix/matrix2.c:31508
#21 0x00007ffff7a21088 in PyCFunction_Call (func=0xfb0588, arg=0x7ffff7f90060, kw=0x0) at Objects/methodobject.c:85
#22 0x00007ffff79be33e in PyObject_Call (func=0xfb0588, arg=0x7ffff7f90060, kw=0x0) at Objects/abstract.c:2529
#23 0x00007fffd95f2e94 in __pyx_pf_4sage_6matrix_7matrix0_6Matrix_124pivots (__pyx_v_self=0x66aa568) at sage/matrix/matrix0.c:20883
...
```

Given the list of crashing tests above, a failure in echelonisation of matrices is likely to explain most of the crashes.

Question: Is that an upstream bug (in Linbox) or did we screw up by ourselves?



---

archive/issue_comments_180143.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,21 @@\n+Instructions for getting a debug version of Python:\n+\n+* Download and untar sage-5.6.beta1\n+* Copy the Cython spkg from #13832 to spkg/standard\n+* Copy the Python spkg from #13867 to spkg/standard\n+* Copy the Singular spkg from #13876 to spkg/standard\n+* Copy the ZODB spkg from #10352 to spkg/standard\n+* Run\n+  {{{\n+export SAGE_DEBUG=yes\n+make\n+  }}}\n+  and wait. At the end, Sage will die in a SIGABRT during \"Testing startup\"\n+* Apply the patch from #13868 to the Sage library\n+* Run \\`sage -br\\`\n+\n+This gives you a Sage version that starts up, but some doctests segfault. Probably because we just found some bugs ;-)\n+\n \n \n Author: Jean-Pierre Flori\n```\n",
    "created_at": "2012-12-29T08:14:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180143",
    "user": "https://github.com/simon-king-jena"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,21 @@
+Instructions for getting a debug version of Python:
+
+* Download and untar sage-5.6.beta1
+* Copy the Cython spkg from #13832 to spkg/standard
+* Copy the Python spkg from #13867 to spkg/standard
+* Copy the Singular spkg from #13876 to spkg/standard
+* Copy the ZODB spkg from #10352 to spkg/standard
+* Run
+  {{{
+export SAGE_DEBUG=yes
+make
+  }}}
+  and wait. At the end, Sage will die in a SIGABRT during "Testing startup"
+* Apply the patch from #13868 to the Sage library
+* Run \`sage -br\`
+
+This gives you a Sage version that starts up, but some doctests segfault. Probably because we just found some bugs ;-)
+
 
 
 Author: Jean-Pierre Flori
```




---

archive/issue_comments_180144.json:
```json
{
    "body": "<a id='comment:89'></a>Since this is a tracker ticket, I have created #13878 to deal with the Linbox related problem.",
    "created_at": "2012-12-29T08:22:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180144",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:89'></a>Since this is a tracker ticket, I have created #13878 to deal with the Linbox related problem.



---

archive/issue_comments_180145.json:
```json
{
    "body": "<a id='comment:90'></a>Nils' preliminary patch from #13878 fixes the Linbox related problem. I am now running `make ptest` again.",
    "created_at": "2012-12-29T11:04:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180145",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:90'></a>Nils' preliminary patch from #13878 fixes the Linbox related problem. I am now running `make ptest` again.



---

archive/issue_comments_180146.json:
```json
{
    "body": "<a id='comment:91'></a>#13878 turns out to be a considerable progress. With MALLOC_CHECK_=3, make ptest results in only two crashes and one file with three failures.\n\n```\nsage -t -force_lib \"devel/sage/sage/misc/memory_info.py\"    \n**********************************************************************\nFile \"/home/simon/SAGE/debug/sage-5.6.beta1/devel/sage/sage/misc/memory_info.py\", line 342:\n    sage: MemoryInfo().available_swap() > 0\nExpected:\n    True\nGot:\n    False\n**********************************************************************\nFile \"/home/simon/SAGE/debug/sage-5.6.beta1/devel/sage/sage/misc/memory_info.py\", line 421:\n    sage: MemoryInfo().available_swap() > 0\nExpected:\n    True\nGot:\n    False\n**********************************************************************\nFile \"/home/simon/SAGE/debug/sage-5.6.beta1/devel/sage/sage/misc/memory_info.py\", line 203:\n    sage: MemoryInfo().available_swap() > 0\nExpected:\n    True\nGot:\n    False\n**********************************************************************\n3 items had failures:\n   1 of   5 in __main__.example_13\n   1 of   5 in __main__.example_18\n   1 of   5 in __main__.example_7\n***Test Failed*** 3 failures.\nFor whitespace errors, see the file /home/simon/.sage//tmp/memory_info_26498.py\n         [3.4 s]\n \n----------------------------------------------------------------------\nThe following tests failed:\n\n\n        sage -t -force_lib \"devel/sage/sage/misc/memory_info.py\"\nTotal time for all tests: 3.5 seconds\n```\nI don't know that these errors mean. Is it perhaps the case that a debug version of Sage does not use swap?\n\nThe crashes, with gdb backtraces, are\n\n```\nsage -t -gdb -force_lib devel/sage/sage/combinat/tiling.py\n...\npython: sage/combinat/matrices/dancing_links_c.h:217: void dancing_links::setup_columns(): Assertion `nr_columns > 0' failed.\n\nProgram received signal SIGABRT, Aborted.\n0x00007ffff6d95d95 in raise () from /lib64/libc.so.6\n(gdb) bt\n#0  0x00007ffff6d95d95 in raise () from /lib64/libc.so.6\n#1  0x00007ffff6d972ab in abort () from /lib64/libc.so.6\n#2  0x00007ffff6d8e8fe in __assert_fail_base () from /lib64/libc.so.6\n#3  0x00007ffff6d8e9a2 in __assert_fail () from /lib64/libc.so.6\n#4  0x00007fffc4260dc2 in dancing_links::setup_columns (this=0x7fffc047e620) at sage/combinat/matrices/dancing_links_c.h:217\n#5  0x00007fffc4261101 in dancing_links::add_rows (this=0x7fffc047e620, rows=...) at sage/combinat/matrices/dancing_links_c.h:268\n#6  0x00007fffc425a51d in __pyx_pf_4sage_8combinat_8matrices_13dancing_links_20dancing_linksWrapper_14add_rows (__pyx_v_self=0x7fffc047e600, __pyx_v_rows=0x7fffbd3d21c8)\n    at sage/combinat/matrices/dancing_links.cpp:2666\n#7  0x00007fffc4259c18 in __pyx_pw_4sage_8combinat_8matrices_13dancing_links_20dancing_linksWrapper_15add_rows (__pyx_v_self=0x7fffc047e600, __pyx_v_rows=0x7fffbd3d21c8)\n    at sage/combinat/matrices/dancing_links.cpp:2464\n#8  0x00007ffff7a21151 in PyCFunction_Call (func=0x7fffbd2dcb28, arg=0x7fffbd386e60, kw=0x0) at Objects/methodobject.c:101\n#9  0x00007ffff79be33e in PyObject_Call (func=0x7fffbd2dcb28, arg=0x7fffbd386e60, kw=0x0) at Objects/abstract.c:2529\n#10 0x00007fffc4258130 in __pyx_pf_4sage_8combinat_8matrices_13dancing_links_20dancing_linksWrapper_2__cinit__ (__pyx_v_self=0x7fffc047e600, __pyx_v_rows=0x7fffbd3d21c8)\n    at sage/combinat/matrices/dancing_links.cpp:2010\n#11 0x00007fffc4257e79 in __pyx_pw_4sage_8combinat_8matrices_13dancing_links_20dancing_linksWrapper_3__cinit__ (__pyx_v_self=0x7fffc047e600, __pyx_args=0x7fffc2ebd920, __pyx_kwds=0x0)\n    at sage/combinat/matrices/dancing_links.cpp:1946\n#12 0x00007fffc425bb28 in __pyx_tp_new_4sage_8combinat_8matrices_13dancing_links_dancing_linksWrapper (t=0x7fffc446d000 <__pyx_type_4sage_8combinat_8matrices_13dancing_links_dancing_linksWrapper>, \n    a=0x7fffc2ebd920, k=0x0) at sage/combinat/matrices/dancing_links.cpp:3037\n#13 0x00007ffff7a4bfe3 in type_call (type=0x7fffc446d000 <__pyx_type_4sage_8combinat_8matrices_13dancing_links_dancing_linksWrapper>, args=0x7fffc2ebd920, kwds=0x0) at Objects/typeobject.c:721\n#14 0x00007ffff79be33e in PyObject_Call (func=0x7fffc446d000 <__pyx_type_4sage_8combinat_8matrices_13dancing_links_dancing_linksWrapper>, arg=0x7fffc2ebd920, kw=0x0) at Objects/abstract.c:2529\n#15 0x00007fffc425af12 in __pyx_pf_4sage_8combinat_8matrices_13dancing_links_dlx_solver (__pyx_self=0x0, __pyx_v_rows=0x7fffbd3d21c8) at sage/combinat/matrices/dancing_links.cpp:2888\n#16 0x00007fffc425ae33 in __pyx_pw_4sage_8combinat_8matrices_13dancing_links_1dlx_solver (__pyx_self=0x0, __pyx_v_rows=0x7fffbd3d21c8) at sage/combinat/matrices/dancing_links.cpp:2852\n...\n```\nand\n\n```\nsage -t -gdb -force_lib \"devel/sage/sage/rings/polynomial/pbori.pyx\"\n...\npython: groebner/include/polybori/groebner/PolyEntryVector.h:74: virtual void polybori::groebner::PolyEntryVector::append(const polybori::groebner::PolyEntry&): Assertion `m_indices.checked(back().lead) == (size_type)-1' failed.\n\nProgram received signal SIGABRT, Aborted.\n0x00007ffff6d95d95 in raise () from /lib64/libc.so.6\n(gdb) bt\n#0  0x00007ffff6d95d95 in raise () from /lib64/libc.so.6\n#1  0x00007ffff6d972ab in abort () from /lib64/libc.so.6\n#2  0x00007ffff6d8e8fe in __assert_fail_base () from /lib64/libc.so.6\n#3  0x00007ffff6d8e9a2 in __assert_fail () from /lib64/libc.so.6\n#4  0x00007fffd0dc0073 in polybori::groebner::PolyEntryVector::append(polybori::groebner::PolyEntry const&) [clone .part.506] ()\n   from /home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpolybori_groebner-0.8.2.so.0\n#5  0x00007fffd0ddc5b9 in polybori::groebner::FGLMStrategy::FGLMStrategy(polybori::BoolePolyRing const&, polybori::BoolePolyRing const&, std::vector<polybori::BoolePolynomial, std::allocator<polybori::BoolePolynomial> > const&) () from /home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpolybori_groebner-0.8.2.so.0\n#6  0x00007fffd16fd8b7 in WrappedPtr<polybori::groebner::FGLMStrategy>::WrappedPtr<polybori::BoolePolyRing, polybori::BoolePolyRing, std::vector<polybori::BoolePolynomial> > (this=0x7fffffff9240, \n    arg1=..., arg2=..., arg3=...) at /home/simon/SAGE/debug/sage-5.6.beta1/local/include/csage/pb_wrap.h:197\n#7  0x00007fffd16a1c5e in __pyx_pf_4sage_5rings_10polynomial_5pbori_12FGLMStrategy___init__ (__pyx_v_self=0x7fffc284f498, __pyx_v_from_ring=0x3e04420, __pyx_v_to_ring=0x3d5ca50, \n    __pyx_v_vec=0x7fffc2851060) at sage/rings/polynomial/pbori.cpp:39777\n#8  0x00007fffd16a0e26 in __pyx_pw_4sage_5rings_10polynomial_5pbori_12FGLMStrategy_1__init__ (__pyx_v_self=0x7fffc284f498, __pyx_args=0x7fffc284b460, __pyx_kwds=0x0)\n    at sage/rings/polynomial/pbori.cpp:39568\n#9  0x00007ffff7a4c0dd in type_call (type=0x7fffd197ec20 <__pyx_type_4sage_5rings_10polynomial_5pbori_FGLMStrategy>, args=0x7fffc284b460, kwds=0x0) at Objects/typeobject.c:737\n#10 0x00007ffff79be33e in PyObject_Call (func=0x7fffd197ec20 <__pyx_type_4sage_5rings_10polynomial_5pbori_FGLMStrategy>, arg=0x7fffc284b460, kw=0x0) at Objects/abstract.c:2529\n#11 0x00007ffff7ac7a58 in do_call (func=0x7fffd197ec20 <__pyx_type_4sage_5rings_10polynomial_5pbori_FGLMStrategy>, pp_stack=0x7fffffff95a0, na=3, nk=0) at Python/ceval.c:4239\n#12 0x00007ffff7ac6d92 in call_function (pp_stack=0x7fffffff95a0, oparg=3) at Python/ceval.c:4044\n#13 0x00007ffff7ac16ba in PyEval_EvalFrameEx (f=0x3ec7250, throwflag=0) at Python/ceval.c:2666\n#14 0x00007ffff7ac40aa in PyEval_EvalCodeEx (co=0x7fffa97d59e0, globals=0x30f8e00, locals=0x30f8e00, args=0x0, argcount=0, kws=0x0, kwcount=0, defs=0x0, defcount=0, closure=0x0) at Python/ceval.c:3253\n#15 0x00007ffff7ab9a88 in PyEval_EvalCode (co=0x7fffa97d59e0, globals=0x30f8e00, locals=0x30f8e00) at Python/ceval.c:667\n#16 0x00007ffff7ac9693 in exec_statement (f=0x3e03f20, prog=0x7fffa97d59e0, globals=0x30f8e00, locals=0x30f8e00) at Python/ceval.c:4718\n#17 0x00007ffff7abde26 in PyEval_EvalFrameEx (f=0x3e03f20, throwflag=0) at Python/ceval.c:1880\n...\n```\n\nI suggest someone (or I, a bit later) opens two new tickets for the two crashes, and a third for the lack of swap, if that is really an issue here.",
    "created_at": "2012-12-29T13:42:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180146",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:91'></a>#13878 turns out to be a considerable progress. With MALLOC_CHECK_=3, make ptest results in only two crashes and one file with three failures.

```
sage -t -force_lib "devel/sage/sage/misc/memory_info.py"    
**********************************************************************
File "/home/simon/SAGE/debug/sage-5.6.beta1/devel/sage/sage/misc/memory_info.py", line 342:
    sage: MemoryInfo().available_swap() > 0
Expected:
    True
Got:
    False
**********************************************************************
File "/home/simon/SAGE/debug/sage-5.6.beta1/devel/sage/sage/misc/memory_info.py", line 421:
    sage: MemoryInfo().available_swap() > 0
Expected:
    True
Got:
    False
**********************************************************************
File "/home/simon/SAGE/debug/sage-5.6.beta1/devel/sage/sage/misc/memory_info.py", line 203:
    sage: MemoryInfo().available_swap() > 0
Expected:
    True
Got:
    False
**********************************************************************
3 items had failures:
   1 of   5 in __main__.example_13
   1 of   5 in __main__.example_18
   1 of   5 in __main__.example_7
***Test Failed*** 3 failures.
For whitespace errors, see the file /home/simon/.sage//tmp/memory_info_26498.py
         [3.4 s]
 
----------------------------------------------------------------------
The following tests failed:


        sage -t -force_lib "devel/sage/sage/misc/memory_info.py"
Total time for all tests: 3.5 seconds
```
I don't know that these errors mean. Is it perhaps the case that a debug version of Sage does not use swap?

The crashes, with gdb backtraces, are

```
sage -t -gdb -force_lib devel/sage/sage/combinat/tiling.py
...
python: sage/combinat/matrices/dancing_links_c.h:217: void dancing_links::setup_columns(): Assertion `nr_columns > 0' failed.

Program received signal SIGABRT, Aborted.
0x00007ffff6d95d95 in raise () from /lib64/libc.so.6
(gdb) bt
#0  0x00007ffff6d95d95 in raise () from /lib64/libc.so.6
#1  0x00007ffff6d972ab in abort () from /lib64/libc.so.6
#2  0x00007ffff6d8e8fe in __assert_fail_base () from /lib64/libc.so.6
#3  0x00007ffff6d8e9a2 in __assert_fail () from /lib64/libc.so.6
#4  0x00007fffc4260dc2 in dancing_links::setup_columns (this=0x7fffc047e620) at sage/combinat/matrices/dancing_links_c.h:217
#5  0x00007fffc4261101 in dancing_links::add_rows (this=0x7fffc047e620, rows=...) at sage/combinat/matrices/dancing_links_c.h:268
#6  0x00007fffc425a51d in __pyx_pf_4sage_8combinat_8matrices_13dancing_links_20dancing_linksWrapper_14add_rows (__pyx_v_self=0x7fffc047e600, __pyx_v_rows=0x7fffbd3d21c8)
    at sage/combinat/matrices/dancing_links.cpp:2666
#7  0x00007fffc4259c18 in __pyx_pw_4sage_8combinat_8matrices_13dancing_links_20dancing_linksWrapper_15add_rows (__pyx_v_self=0x7fffc047e600, __pyx_v_rows=0x7fffbd3d21c8)
    at sage/combinat/matrices/dancing_links.cpp:2464
#8  0x00007ffff7a21151 in PyCFunction_Call (func=0x7fffbd2dcb28, arg=0x7fffbd386e60, kw=0x0) at Objects/methodobject.c:101
#9  0x00007ffff79be33e in PyObject_Call (func=0x7fffbd2dcb28, arg=0x7fffbd386e60, kw=0x0) at Objects/abstract.c:2529
#10 0x00007fffc4258130 in __pyx_pf_4sage_8combinat_8matrices_13dancing_links_20dancing_linksWrapper_2__cinit__ (__pyx_v_self=0x7fffc047e600, __pyx_v_rows=0x7fffbd3d21c8)
    at sage/combinat/matrices/dancing_links.cpp:2010
#11 0x00007fffc4257e79 in __pyx_pw_4sage_8combinat_8matrices_13dancing_links_20dancing_linksWrapper_3__cinit__ (__pyx_v_self=0x7fffc047e600, __pyx_args=0x7fffc2ebd920, __pyx_kwds=0x0)
    at sage/combinat/matrices/dancing_links.cpp:1946
#12 0x00007fffc425bb28 in __pyx_tp_new_4sage_8combinat_8matrices_13dancing_links_dancing_linksWrapper (t=0x7fffc446d000 <__pyx_type_4sage_8combinat_8matrices_13dancing_links_dancing_linksWrapper>, 
    a=0x7fffc2ebd920, k=0x0) at sage/combinat/matrices/dancing_links.cpp:3037
#13 0x00007ffff7a4bfe3 in type_call (type=0x7fffc446d000 <__pyx_type_4sage_8combinat_8matrices_13dancing_links_dancing_linksWrapper>, args=0x7fffc2ebd920, kwds=0x0) at Objects/typeobject.c:721
#14 0x00007ffff79be33e in PyObject_Call (func=0x7fffc446d000 <__pyx_type_4sage_8combinat_8matrices_13dancing_links_dancing_linksWrapper>, arg=0x7fffc2ebd920, kw=0x0) at Objects/abstract.c:2529
#15 0x00007fffc425af12 in __pyx_pf_4sage_8combinat_8matrices_13dancing_links_dlx_solver (__pyx_self=0x0, __pyx_v_rows=0x7fffbd3d21c8) at sage/combinat/matrices/dancing_links.cpp:2888
#16 0x00007fffc425ae33 in __pyx_pw_4sage_8combinat_8matrices_13dancing_links_1dlx_solver (__pyx_self=0x0, __pyx_v_rows=0x7fffbd3d21c8) at sage/combinat/matrices/dancing_links.cpp:2852
...
```
and

```
sage -t -gdb -force_lib "devel/sage/sage/rings/polynomial/pbori.pyx"
...
python: groebner/include/polybori/groebner/PolyEntryVector.h:74: virtual void polybori::groebner::PolyEntryVector::append(const polybori::groebner::PolyEntry&): Assertion `m_indices.checked(back().lead) == (size_type)-1' failed.

Program received signal SIGABRT, Aborted.
0x00007ffff6d95d95 in raise () from /lib64/libc.so.6
(gdb) bt
#0  0x00007ffff6d95d95 in raise () from /lib64/libc.so.6
#1  0x00007ffff6d972ab in abort () from /lib64/libc.so.6
#2  0x00007ffff6d8e8fe in __assert_fail_base () from /lib64/libc.so.6
#3  0x00007ffff6d8e9a2 in __assert_fail () from /lib64/libc.so.6
#4  0x00007fffd0dc0073 in polybori::groebner::PolyEntryVector::append(polybori::groebner::PolyEntry const&) [clone .part.506] ()
   from /home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpolybori_groebner-0.8.2.so.0
#5  0x00007fffd0ddc5b9 in polybori::groebner::FGLMStrategy::FGLMStrategy(polybori::BoolePolyRing const&, polybori::BoolePolyRing const&, std::vector<polybori::BoolePolynomial, std::allocator<polybori::BoolePolynomial> > const&) () from /home/simon/SAGE/debug/sage-5.6.beta1/local/lib/libpolybori_groebner-0.8.2.so.0
#6  0x00007fffd16fd8b7 in WrappedPtr<polybori::groebner::FGLMStrategy>::WrappedPtr<polybori::BoolePolyRing, polybori::BoolePolyRing, std::vector<polybori::BoolePolynomial> > (this=0x7fffffff9240, 
    arg1=..., arg2=..., arg3=...) at /home/simon/SAGE/debug/sage-5.6.beta1/local/include/csage/pb_wrap.h:197
#7  0x00007fffd16a1c5e in __pyx_pf_4sage_5rings_10polynomial_5pbori_12FGLMStrategy___init__ (__pyx_v_self=0x7fffc284f498, __pyx_v_from_ring=0x3e04420, __pyx_v_to_ring=0x3d5ca50, 
    __pyx_v_vec=0x7fffc2851060) at sage/rings/polynomial/pbori.cpp:39777
#8  0x00007fffd16a0e26 in __pyx_pw_4sage_5rings_10polynomial_5pbori_12FGLMStrategy_1__init__ (__pyx_v_self=0x7fffc284f498, __pyx_args=0x7fffc284b460, __pyx_kwds=0x0)
    at sage/rings/polynomial/pbori.cpp:39568
#9  0x00007ffff7a4c0dd in type_call (type=0x7fffd197ec20 <__pyx_type_4sage_5rings_10polynomial_5pbori_FGLMStrategy>, args=0x7fffc284b460, kwds=0x0) at Objects/typeobject.c:737
#10 0x00007ffff79be33e in PyObject_Call (func=0x7fffd197ec20 <__pyx_type_4sage_5rings_10polynomial_5pbori_FGLMStrategy>, arg=0x7fffc284b460, kw=0x0) at Objects/abstract.c:2529
#11 0x00007ffff7ac7a58 in do_call (func=0x7fffd197ec20 <__pyx_type_4sage_5rings_10polynomial_5pbori_FGLMStrategy>, pp_stack=0x7fffffff95a0, na=3, nk=0) at Python/ceval.c:4239
#12 0x00007ffff7ac6d92 in call_function (pp_stack=0x7fffffff95a0, oparg=3) at Python/ceval.c:4044
#13 0x00007ffff7ac16ba in PyEval_EvalFrameEx (f=0x3ec7250, throwflag=0) at Python/ceval.c:2666
#14 0x00007ffff7ac40aa in PyEval_EvalCodeEx (co=0x7fffa97d59e0, globals=0x30f8e00, locals=0x30f8e00, args=0x0, argcount=0, kws=0x0, kwcount=0, defs=0x0, defcount=0, closure=0x0) at Python/ceval.c:3253
#15 0x00007ffff7ab9a88 in PyEval_EvalCode (co=0x7fffa97d59e0, globals=0x30f8e00, locals=0x30f8e00) at Python/ceval.c:667
#16 0x00007ffff7ac9693 in exec_statement (f=0x3e03f20, prog=0x7fffa97d59e0, globals=0x30f8e00, locals=0x30f8e00) at Python/ceval.c:4718
#17 0x00007ffff7abde26 in PyEval_EvalFrameEx (f=0x3e03f20, throwflag=0) at Python/ceval.c:1880
...
```

I suggest someone (or I, a bit later) opens two new tickets for the two crashes, and a third for the lack of swap, if that is really an issue here.



---

archive/issue_comments_180147.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,20 @@\n+Instructions for getting a debug version of Python:\n \n+* Download and untar sage-5.6.beta1\n+* Copy the Cython spkg from #13832 to spkg/standard\n+* Copy the Python spkg from #13867 to spkg/standard\n+* Copy the Singular spkg from #13876 to spkg/standard\n+* Copy the ZODB spkg from #10352 to spkg/standard\n+* Run\n+  {{{\n+export SAGE_DEBUG=yes\n+make\n+  }}}\n+  and wait. At the end, Sage will die in a SIGABRT during \"Testing startup\"\n+* Apply the patches from #13868 and #13880 to the Sage library\n+* Run \\`sage -br\\`\n+\n+This gives you a Sage version that starts up, but some doctests segfault. Probably because we just found some bugs ;-)\n \n Author: Jean-Pierre Flori\n \n```\n",
    "created_at": "2012-12-29T21:03:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180147",
    "user": "https://github.com/simon-king-jena"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,20 @@
+Instructions for getting a debug version of Python:
 
+* Download and untar sage-5.6.beta1
+* Copy the Cython spkg from #13832 to spkg/standard
+* Copy the Python spkg from #13867 to spkg/standard
+* Copy the Singular spkg from #13876 to spkg/standard
+* Copy the ZODB spkg from #10352 to spkg/standard
+* Run
+  {{{
+export SAGE_DEBUG=yes
+make
+  }}}
+  and wait. At the end, Sage will die in a SIGABRT during "Testing startup"
+* Apply the patches from #13868 and #13880 to the Sage library
+* Run \`sage -br\`
+
+This gives you a Sage version that starts up, but some doctests segfault. Probably because we just found some bugs ;-)
 
 Author: Jean-Pierre Flori
 
```




---

archive/issue_comments_180148.json:
```json
{
    "body": "<a id='comment:92'></a>I am not totally sure whether #13880 should be a dependency, since apparently only *I* am getting the error concerning available swap. Remove the new dependency, if you like.",
    "created_at": "2012-12-29T21:03:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180148",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:92'></a>I am not totally sure whether #13880 should be a dependency, since apparently only *I* am getting the error concerning available swap. Remove the new dependency, if you like.



---

archive/issue_comments_180149.json:
```json
{
    "body": "<a id='comment:93'></a>I have opened #13882 for the combinat/matrix problem.",
    "created_at": "2012-12-29T21:20:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180149",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:93'></a>I have opened #13882 for the combinat/matrix problem.



---

archive/issue_comments_180150.json:
```json
{
    "body": "<a id='comment:94'></a>With the patch from #13882, `sage -t -gdb -force_lib \"devel/sage/sage/combinat/tiling.py\"` passes.",
    "created_at": "2012-12-29T22:07:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180150",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:94'></a>With the patch from #13882, `sage -t -gdb -force_lib "devel/sage/sage/combinat/tiling.py"` passes.



---

archive/issue_comments_180151.json:
```json
{
    "body": "<a id='comment:95'></a>The ticket for the polybori issue is #13883",
    "created_at": "2012-12-29T22:19:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180151",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:95'></a>The ticket for the polybori issue is #13883



---

archive/issue_comments_180152.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,20 @@\n+Instructions for getting a debug version of Python:\n \n+* Download and untar sage-5.6.beta1\n+* Copy the Cython spkg from #13832 to spkg/standard\n+* Copy the Python spkg from #13867 to spkg/standard\n+* Copy the Singular spkg from #13876 to spkg/standard\n+* Copy the ZODB spkg from #10352 to spkg/standard\n+* Run\n+  {{{\n+export SAGE_DEBUG=yes\n+make\n+  }}}\n+  and wait. At the end, Sage will die in a SIGABRT during \"Testing startup\"\n+* Apply the patches from #13868, #13880, #13882 and #13883 to the Sage library\n+* Run \\`sage -br\\`\n+\n+This gives you a Sage version that starts up, but some doctests segfault. Probably because we just found some bugs ;-)\n \n Author: Jean-Pierre Flori\n \n```\n",
    "created_at": "2012-12-29T22:19:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180152",
    "user": "https://github.com/simon-king-jena"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,20 @@
+Instructions for getting a debug version of Python:
 
+* Download and untar sage-5.6.beta1
+* Copy the Cython spkg from #13832 to spkg/standard
+* Copy the Python spkg from #13867 to spkg/standard
+* Copy the Singular spkg from #13876 to spkg/standard
+* Copy the ZODB spkg from #10352 to spkg/standard
+* Run
+  {{{
+export SAGE_DEBUG=yes
+make
+  }}}
+  and wait. At the end, Sage will die in a SIGABRT during "Testing startup"
+* Apply the patches from #13868, #13880, #13882 and #13883 to the Sage library
+* Run \`sage -br\`
+
+This gives you a Sage version that starts up, but some doctests segfault. Probably because we just found some bugs ;-)
 
 Author: Jean-Pierre Flori
 
```




---

archive/issue_comments_180153.json:
```json
{
    "body": "<a id='comment:96'></a>#13880 has nothing to do with this.",
    "created_at": "2012-12-30T09:09:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180153",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:96'></a>#13880 has nothing to do with this.



---

archive/issue_comments_180154.json:
```json
{
    "body": "<a id='comment:97'></a>cygdb (gdb support for cython) is at #13881. If you are tired trying to figure out by hand what the cython stackframes are doing give it a spin ;-)",
    "created_at": "2012-12-30T10:51:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180154",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:97'></a>cygdb (gdb support for cython) is at #13881. If you are tired trying to figure out by hand what the cython stackframes are doing give it a spin ;-)



---

archive/issue_comments_180155.json:
```json
{
    "body": "Evil patch to trick Python into running a garbage collection in the TripleDictEraser callback",
    "created_at": "2012-12-31T16:48:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180155",
    "user": "https://github.com/vbraun"
}
```

Evil patch to trick Python into running a garbage collection in the TripleDictEraser callback



---

archive/issue_comments_180156.json:
```json
{
    "body": "Attachment [gc_tester.patch](tarball://root/attachments/some-uuid/ticket13864/gc_tester.patch) by @vbraun created at 2012-12-31 16:48:59\n\nEvil patch to trick Python into running a garbage collection in the TripleDictEraser callback",
    "created_at": "2012-12-31T16:48:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180156",
    "user": "https://github.com/vbraun"
}
```

Attachment [gc_tester.patch](tarball://root/attachments/some-uuid/ticket13864/gc_tester.patch) by @vbraun created at 2012-12-31 16:48:59

Evil patch to trick Python into running a garbage collection in the TripleDictEraser callback



---

archive/issue_comments_180157.json:
```json
{
    "body": "Attachment [sage_crash_wZk24Q.log](tarball://root/attachments/some-uuid/ticket13864/sage_crash_wZk24Q.log) by @vbraun created at 2012-12-31 16:52:15\n\ncrash log with gc_tester.patch",
    "created_at": "2012-12-31T16:52:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180157",
    "user": "https://github.com/vbraun"
}
```

Attachment [sage_crash_wZk24Q.log](tarball://root/attachments/some-uuid/ticket13864/sage_crash_wZk24Q.log) by @vbraun created at 2012-12-31 16:52:15

crash log with gc_tester.patch



---

archive/issue_comments_180158.json:
```json
{
    "body": "<a id='comment:98'></a>Should one add #13881 and/or #13889 as further dependencies? After all, this here is a task to enable debugging for Sage, and #13881/#13889 will help.",
    "created_at": "2013-01-01T15:38:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180158",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:98'></a>Should one add #13881 and/or #13889 as further dependencies? After all, this here is a task to enable debugging for Sage, and #13881/#13889 will help.



---

archive/issue_comments_180159.json:
```json
{
    "body": "<a id='comment:99'></a>I'm obviously in favor of adding #13881/#13889 ;-)",
    "created_at": "2013-01-01T15:45:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180159",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:99'></a>I'm obviously in favor of adding #13881/#13889 ;-)



---

archive/issue_comments_180160.json:
```json
{
    "body": "<a id='comment:1'></a>This is a meta-ticket without anything to merge, right? Then adding dependencies doesn't hurt.",
    "created_at": "2013-01-02T09:17:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180160",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:1'></a>This is a meta-ticket without anything to merge, right? Then adding dependencies doesn't hurt.



---

archive/issue_comments_180161.json:
```json
{
    "body": "<a id='comment:2'></a>However, on normal tickets, you should only add dependencies which are strictly required.",
    "created_at": "2013-01-02T09:26:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180161",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'></a>However, on normal tickets, you should only add dependencies which are strictly required.



---

archive/issue_comments_180162.json:
```json
{
    "body": "<a id='comment:3'></a>I lost track: Is there a ticket in which the question is discussed whether or not one should have `self.D._refcache.__delitem__((k1,k2,k3))` or `del self.D._refcache[k1,k2,k3]` in the `TripleDict` code from #715?\n\nAnyway, I see that the latter version of the code gives rise to a shorter C-code, and reportedly it fixes some problem. So, I think there *should* be a ticket.",
    "created_at": "2013-01-03T15:37:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180162",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:3'></a>I lost track: Is there a ticket in which the question is discussed whether or not one should have `self.D._refcache.__delitem__((k1,k2,k3))` or `del self.D._refcache[k1,k2,k3]` in the `TripleDict` code from #715?

Anyway, I see that the latter version of the code gives rise to a shorter C-code, and reportedly it fixes some problem. So, I think there *should* be a ticket.



---

archive/issue_comments_180163.json:
```json
{
    "body": "<a id='comment:104'></a>Replying to [comment:103 SimonKing]:\n> I lost track: Is there a ticket in which the question is discussed whether or not one should have `self.D._refcache.__delitem__((k1,k2,k3))` or `del self.D._refcache[k1,k2,k3]` in the `TripleDict` code from #715?\n> \n> Anyway, I see that the latter version of the code gives rise to a shorter C-code, and reportedly it fixes some problem. So, I think there *should* be a ticket.\n\nIndeed, it avoids the method name resolution and the creation of a tuple.\nAnd so potentially give less chances that garbage collections happen during the callback.\nSo I'm for this change as well.",
    "created_at": "2013-01-03T15:41:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180163",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:104'></a>Replying to [comment:103 SimonKing]:
> I lost track: Is there a ticket in which the question is discussed whether or not one should have `self.D._refcache.__delitem__((k1,k2,k3))` or `del self.D._refcache[k1,k2,k3]` in the `TripleDict` code from #715?
> 
> Anyway, I see that the latter version of the code gives rise to a shorter C-code, and reportedly it fixes some problem. So, I think there *should* be a ticket.

Indeed, it avoids the method name resolution and the creation of a tuple.
And so potentially give less chances that garbage collections happen during the callback.
So I'm for this change as well.



---

archive/issue_comments_180164.json:
```json
{
    "body": "<a id='comment:5'></a>I have created #13904 for the `TripleDict.__delitem__` problem.",
    "created_at": "2013-01-03T18:17:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180164",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:5'></a>I have created #13904 for the `TripleDict.__delitem__` problem.



---

archive/issue_comments_180165.json:
```json
{
    "body": "<a id='comment:6'></a>I added #13883 as a dependency and ordered the list of dependencies.",
    "created_at": "2013-01-03T18:41:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180165",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:6'></a>I added #13883 as a dependency and ordered the list of dependencies.



---

archive/issue_comments_180166.json:
```json
{
    "body": "<a id='comment:7'></a>As it turns out, the problem with segfaulting `TripleDictEraser` calls will be fixed with #13896 (Cython upgrade), so that I replace #13904 by #13896 in the list of dependencies.",
    "created_at": "2013-01-03T22:56:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180166",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:7'></a>As it turns out, the problem with segfaulting `TripleDictEraser` calls will be fixed with #13896 (Cython upgrade), so that I replace #13904 by #13896 in the list of dependencies.



---

archive/issue_comments_180167.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,20 @@\n+Instructions for getting a debug version of Python:\n \n+* Download and untar sage-5.6.beta1\n+* Copy the Cython spkg from #13896 to spkg/standard\n+* Copy the Python spkg from #13867 to spkg/standard\n+* Copy the Singular spkg from #13876 to spkg/standard\n+* Copy the ZODB spkg from #10352 to spkg/standard\n+* Run\n+  {{{\n+export SAGE_DEBUG=yes\n+make\n+  }}}\n+  and wait. At the end, Sage will die in a SIGABRT during \"Testing startup\"\n+* Apply the patches from #13868, #13880, #13882 and #13883 to the Sage library\n+* Run \\`sage -br\\`\n+\n+This gives you a Sage version that starts up, but some doctests segfault. Probably because we just found some bugs ;-)\n \n Author: Jean-Pierre Flori\n \n```\n",
    "created_at": "2013-01-04T10:37:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180167",
    "user": "https://github.com/simon-king-jena"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,20 @@
+Instructions for getting a debug version of Python:
 
+* Download and untar sage-5.6.beta1
+* Copy the Cython spkg from #13896 to spkg/standard
+* Copy the Python spkg from #13867 to spkg/standard
+* Copy the Singular spkg from #13876 to spkg/standard
+* Copy the ZODB spkg from #10352 to spkg/standard
+* Run
+  {{{
+export SAGE_DEBUG=yes
+make
+  }}}
+  and wait. At the end, Sage will die in a SIGABRT during "Testing startup"
+* Apply the patches from #13868, #13880, #13882 and #13883 to the Sage library
+* Run \`sage -br\`
+
+This gives you a Sage version that starts up, but some doctests segfault. Probably because we just found some bugs ;-)
 
 Author: Jean-Pierre Flori
 
```




---

archive/issue_comments_180168.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,20 @@\n+Instructions for getting a debug version of Python:\n \n+* Download and untar sage-5.6.beta1\n+* Copy the Cython spkg from #13896 to spkg/standard\n+* Copy the Python spkg from #13867 to spkg/standard\n+* Copy the Singular spkg from #13876 to spkg/standard\n+* Copy the ZODB spkg from #10352 to spkg/standard\n+* Run\n+  {{{\n+export SAGE_DEBUG=yes\n+make\n+  }}}\n+  and wait.\n+* Apply the patches from #13868, #13880, #13882 and #13883 to the Sage library\n+* Run \\`sage -br\\`\n+\n+This gives you a Sage version that starts up, but some doctests segfault. Probably because we just found some bugs ;-)\n \n Author: Jean-Pierre Flori\n \n```\n",
    "created_at": "2013-01-04T12:01:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180168",
    "user": "https://github.com/simon-king-jena"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,20 @@
+Instructions for getting a debug version of Python:
 
+* Download and untar sage-5.6.beta1
+* Copy the Cython spkg from #13896 to spkg/standard
+* Copy the Python spkg from #13867 to spkg/standard
+* Copy the Singular spkg from #13876 to spkg/standard
+* Copy the ZODB spkg from #10352 to spkg/standard
+* Run
+  {{{
+export SAGE_DEBUG=yes
+make
+  }}}
+  and wait.
+* Apply the patches from #13868, #13880, #13882 and #13883 to the Sage library
+* Run \`sage -br\`
+
+This gives you a Sage version that starts up, but some doctests segfault. Probably because we just found some bugs ;-)
 
 Author: Jean-Pierre Flori
 
```




---

archive/issue_comments_180169.json:
```json
{
    "body": "<a id='comment:9'></a>I removed the phrase \"At the end, Sage will die in a SIGABRT during \"Testing startup\" from the ticket description, since this is not the case anymore (at least not on bsd.math).",
    "created_at": "2013-01-04T12:01:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180169",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:9'></a>I removed the phrase "At the end, Sage will die in a SIGABRT during "Testing startup" from the ticket description, since this is not the case anymore (at least not on bsd.math).



---

archive/issue_comments_180170.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,20 @@\n+Instructions for getting a debug version of Python:\n \n+* Download and untar sage-5.6.beta1\n+* Copy the Cython spkg from #13896 to spkg/standard\n+* Copy the Python spkg from #13867 to spkg/standard\n+* Copy the Singular spkg from #13876 to spkg/standard.\n+* Copy the ZODB spkg from #10352 to spkg/standard\n+* Run\n+  {{{\n+export SAGE_DEBUG=yes\n+make\n+  }}}\n+  and wait.\n+* Apply the patches from #13868, #13880, #13882 and #13883 to the Sage library\n+* Run \\`sage -br\\`\n+\n+This gives you a Sage version that starts up, but some doctests segfault. Probably because we just found some bugs ;-)\n \n Author: Jean-Pierre Flori\n \n```\n",
    "created_at": "2013-01-04T12:23:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180170",
    "user": "https://github.com/simon-king-jena"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,20 @@
+Instructions for getting a debug version of Python:
 
+* Download and untar sage-5.6.beta1
+* Copy the Cython spkg from #13896 to spkg/standard
+* Copy the Python spkg from #13867 to spkg/standard
+* Copy the Singular spkg from #13876 to spkg/standard.
+* Copy the ZODB spkg from #10352 to spkg/standard
+* Run
+  {{{
+export SAGE_DEBUG=yes
+make
+  }}}
+  and wait.
+* Apply the patches from #13868, #13880, #13882 and #13883 to the Sage library
+* Run \`sage -br\`
+
+This gives you a Sage version that starts up, but some doctests segfault. Probably because we just found some bugs ;-)
 
 Author: Jean-Pierre Flori
 
```




---

archive/issue_comments_180171.json:
```json
{
    "body": "<a id='comment:0'></a>Apparently on also needs to remove the existing Singular spkg - when I tried to build on bsd.math, the *wrong* Singular version was built!!",
    "created_at": "2013-01-04T12:23:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180171",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:0'></a>Apparently on also needs to remove the existing Singular spkg - when I tried to build on bsd.math, the *wrong* Singular version was built!!



---

archive/issue_comments_180172.json:
```json
{
    "body": "<a id='comment:111'></a>Replying to [comment:110 SimonKing]:\n>  Apparently on also needs to remove the existing Singular spkg - when I tried to build on bsd.math, the *wrong* Singular version was built!!\n\nThis depends on timestamps. The \"latest\" version of Singular will be built, where latest is defined using the timestamp on the .spkg files.",
    "created_at": "2013-01-04T12:27:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180172",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:111'></a>Replying to [comment:110 SimonKing]:
>  Apparently on also needs to remove the existing Singular spkg - when I tried to build on bsd.math, the *wrong* Singular version was built!!

This depends on timestamps. The "latest" version of Singular will be built, where latest is defined using the timestamp on the .spkg files.



---

archive/issue_comments_180173.json:
```json
{
    "body": "<a id='comment:2'></a>I still get the crash in \"testing startup\". In fact without #13868 its pretty obvious that you must crash as soon as an integer from the free pool is being collected. You need to use integers for a bit to create->dealloc to pool->alloc from pool->dealloc but for me that happens during startup already.",
    "created_at": "2013-01-04T12:47:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180173",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:2'></a>I still get the crash in "testing startup". In fact without #13868 its pretty obvious that you must crash as soon as an integer from the free pool is being collected. You need to use integers for a bit to create->dealloc to pool->alloc from pool->dealloc but for me that happens during startup already.



---

archive/issue_comments_180174.json:
```json
{
    "body": "<a id='comment:113'></a>Replying to [comment:112 vbraun]:\n> I still get the crash in \"testing startup\". In fact without #13868 its pretty obvious that you must crash as soon as an integer from the free pool is being collected. You need to use integers for a bit to create->dealloc to pool->alloc from pool->dealloc but for me that happens during startup already.\n\n\nI am now rebuilding on bsd.math from scratch, were I took care to remove \"old\" (version-wise, not timestamp-wise) spkgs. Let's see what happens.",
    "created_at": "2013-01-04T13:10:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180174",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:113'></a>Replying to [comment:112 vbraun]:
> I still get the crash in "testing startup". In fact without #13868 its pretty obvious that you must crash as soon as an integer from the free pool is being collected. You need to use integers for a bit to create->dealloc to pool->alloc from pool->dealloc but for me that happens during startup already.


I am now rebuilding on bsd.math from scratch, were I took care to remove "old" (version-wise, not timestamp-wise) spkgs. Let's see what happens.



---

archive/issue_comments_180175.json:
```json
{
    "body": "<a id='comment:4'></a>It seems very fishy to me that without the patches from #13868, everything is fine with pydebug.",
    "created_at": "2013-01-04T13:13:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180175",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:4'></a>It seems very fishy to me that without the patches from #13868, everything is fine with pydebug.



---

archive/issue_comments_180176.json:
```json
{
    "body": "<a id='comment:115'></a>Replying to [comment:113 SimonKing]:\n> Replying to [comment:112 vbraun]:\n> > I still get the crash in \"testing startup\". In fact without #13868 its pretty obvious that you must crash as soon as an integer from the free pool is being collected. You need to use integers for a bit to create->dealloc to pool->alloc from pool->dealloc but for me that happens during startup already.\n\n> \n> I am now rebuilding on bsd.math from scratch, were I took care to remove \"old\" (version-wise, not timestamp-wise) spkgs. Let's see what happens.\n\n\nYep, I get SIGABRT now. Good.",
    "created_at": "2013-01-04T13:32:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180176",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:115'></a>Replying to [comment:113 SimonKing]:
> Replying to [comment:112 vbraun]:
> > I still get the crash in "testing startup". In fact without #13868 its pretty obvious that you must crash as soon as an integer from the free pool is being collected. You need to use integers for a bit to create->dealloc to pool->alloc from pool->dealloc but for me that happens during startup already.

> 
> I am now rebuilding on bsd.math from scratch, were I took care to remove "old" (version-wise, not timestamp-wise) spkgs. Let's see what happens.


Yep, I get SIGABRT now. Good.



---

archive/issue_comments_180177.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,20 @@\n+Instructions for getting a debug version of Python:\n \n+* Download and untar sage-5.6.beta1\n+* Copy the Cython spkg from #13896 to spkg/standard\n+* Copy the Python spkg from #13867 to spkg/standard\n+* Copy the Singular spkg from #13876 to spkg/standard.\n+* Copy the ZODB spkg from #10352 to spkg/standard\n+* Run\n+  {{{\n+export SAGE_DEBUG=yes\n+make\n+  }}}\n+  and wait. At the end, Sage will die in a SIGABRT during \"Testing startup\".\n+* Apply the patches from #13868, #13880, #13882 and #13883 to the Sage library\n+* Run \\`sage -br\\`\n+\n+This gives you a Sage version that starts up, but some doctests segfault. Probably because we just found some bugs ;-)\n \n Author: Jean-Pierre Flori\n \n```\n",
    "created_at": "2013-01-04T13:32:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180177",
    "user": "https://github.com/simon-king-jena"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,20 @@
+Instructions for getting a debug version of Python:
 
+* Download and untar sage-5.6.beta1
+* Copy the Cython spkg from #13896 to spkg/standard
+* Copy the Python spkg from #13867 to spkg/standard
+* Copy the Singular spkg from #13876 to spkg/standard.
+* Copy the ZODB spkg from #10352 to spkg/standard
+* Run
+  {{{
+export SAGE_DEBUG=yes
+make
+  }}}
+  and wait. At the end, Sage will die in a SIGABRT during "Testing startup".
+* Apply the patches from #13868, #13880, #13882 and #13883 to the Sage library
+* Run \`sage -br\`
+
+This gives you a Sage version that starts up, but some doctests segfault. Probably because we just found some bugs ;-)
 
 Author: Jean-Pierre Flori
 
```




---

archive/issue_comments_180178.json:
```json
{
    "body": "<a id='comment:6'></a>Too bad. I forgot to apply #13878 (which was missing in the ticket description). Without it, I got numerous crashes. So, trying again...",
    "created_at": "2013-01-04T15:22:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180178",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:6'></a>Too bad. I forgot to apply #13878 (which was missing in the ticket description). Without it, I got numerous crashes. So, trying again...



---

archive/issue_comments_180179.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,20 @@\n+Instructions for getting a debug version of Python:\n \n+* Download and untar sage-5.6.beta1\n+* Copy the Cython spkg from #13896 to spkg/standard\n+* Copy the Python spkg from #13867 to spkg/standard\n+* Copy the Singular spkg from #13876 to spkg/standard.\n+* Copy the ZODB spkg from #10352 to spkg/standard\n+* Run\n+  {{{\n+export SAGE_DEBUG=yes\n+make\n+  }}}\n+  and wait. At the end, Sage will die in a SIGABRT during \"Testing startup\".\n+* Apply the patches from #13868, #13878, #13880, #13882 and #13883 to the Sage library\n+* Run \\`sage -br\\`\n+\n+This gives you a Sage version that starts up, but some doctests segfault. Probably because we just found some bugs ;-)\n \n Author: Jean-Pierre Flori\n \n```\n",
    "created_at": "2013-01-04T15:22:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180179",
    "user": "https://github.com/simon-king-jena"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,20 @@
+Instructions for getting a debug version of Python:
 
+* Download and untar sage-5.6.beta1
+* Copy the Cython spkg from #13896 to spkg/standard
+* Copy the Python spkg from #13867 to spkg/standard
+* Copy the Singular spkg from #13876 to spkg/standard.
+* Copy the ZODB spkg from #10352 to spkg/standard
+* Run
+  {{{
+export SAGE_DEBUG=yes
+make
+  }}}
+  and wait. At the end, Sage will die in a SIGABRT during "Testing startup".
+* Apply the patches from #13868, #13878, #13880, #13882 and #13883 to the Sage library
+* Run \`sage -br\`
+
+This gives you a Sage version that starts up, but some doctests segfault. Probably because we just found some bugs ;-)
 
 Author: Jean-Pierre Flori
 
```




---

archive/issue_comments_180180.json:
```json
{
    "body": "<a id='comment:7'></a>However, even with #13878, the following problem with pari/gp persists:\n\n```\nsage -t -force_lib \"devel/sage/sage/schemes/plane_conics/con_rational_field.py\"\n**********************************************************************\nFile \"/scratch/sking/sage-5.6.beta2/devel/sage/sage/schemes/plane_conics/con_rational_field.py\", line 130:\n    sage: C.has_rational_point(point = True)\nException raised:\n    Traceback (most recent call last):\n      File \"/scratch/sking/sage-5.6.beta2/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/scratch/sking/sage-5.6.beta2/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/scratch/sking/sage-5.6.beta2/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_3[10]>\", line 1, in <module>\n        C.has_rational_point(point = True)###line 130:\n    sage: C.has_rational_point(point = True)\n      File \"/scratch/sking/sage-5.6.beta2/local/lib/python/site-packages/sage/schemes/plane_conics/con_rational_field.py\", line 174, in has_rational_point\n        pt = qfsolve(M)\n      File \"/scratch/sking/sage-5.6.beta2/local/lib/python/site-packages/sage/quadratic_forms/qfsolve.py\", line 100, in qfsolve\n        ret = pari(gp('Qfsolve(%s)' % G._pari_()))\n      File \"/scratch/sking/sage-5.6.beta2/local/lib/python/site-packages/sage/interfaces/interface.py\", line 195, in __call__\n        return cls(self, x, name=name)\n      File \"/scratch/sking/sage-5.6.beta2/local/lib/python/site-packages/sage/interfaces/expect.py\", line 1311, in __init__\n        raise TypeError, x\n    TypeError: Error executing code in GP:\n    CODE:\n        sage[4]=Qfsolve([1, 0, 0; 0, 113922743, 0; 0, 0, -310146482690273725409]);\n    PARI/GP ERROR:\n      ***   at top-level: sage[4]=Qfsolve([1,0,0;0,113\n      ***                         ^--------------------\n      ***   in function Qfsolve: ... du determinant\"));factD=factor(-abs(2*d));if\n      ***                                                    ^--------------------\n      *** factor: bug in PARI/GP (Segmentation Fault), please report\n**********************************************************************\n1 items had failures:\n   1 of  18 in __main__.example_3\n***Test Failed*** 1 failures.\nFor whitespace errors, see the file /Users/SimonKing/.sage//tmp/con_rational_field_24352.py\n         [7.4 s]\n \n----------------------------------------------------------------------\nThe following tests failed:\n\n\n        sage -t -force_lib \"devel/sage/sage/schemes/plane_conics/con_rational_field.py\"\n```\nIs that a known problem? I sense that we will soon have another dependency...",
    "created_at": "2013-01-04T15:26:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180180",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:7'></a>However, even with #13878, the following problem with pari/gp persists:

```
sage -t -force_lib "devel/sage/sage/schemes/plane_conics/con_rational_field.py"
**********************************************************************
File "/scratch/sking/sage-5.6.beta2/devel/sage/sage/schemes/plane_conics/con_rational_field.py", line 130:
    sage: C.has_rational_point(point = True)
Exception raised:
    Traceback (most recent call last):
      File "/scratch/sking/sage-5.6.beta2/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/scratch/sking/sage-5.6.beta2/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/scratch/sking/sage-5.6.beta2/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_3[10]>", line 1, in <module>
        C.has_rational_point(point = True)###line 130:
    sage: C.has_rational_point(point = True)
      File "/scratch/sking/sage-5.6.beta2/local/lib/python/site-packages/sage/schemes/plane_conics/con_rational_field.py", line 174, in has_rational_point
        pt = qfsolve(M)
      File "/scratch/sking/sage-5.6.beta2/local/lib/python/site-packages/sage/quadratic_forms/qfsolve.py", line 100, in qfsolve
        ret = pari(gp('Qfsolve(%s)' % G._pari_()))
      File "/scratch/sking/sage-5.6.beta2/local/lib/python/site-packages/sage/interfaces/interface.py", line 195, in __call__
        return cls(self, x, name=name)
      File "/scratch/sking/sage-5.6.beta2/local/lib/python/site-packages/sage/interfaces/expect.py", line 1311, in __init__
        raise TypeError, x
    TypeError: Error executing code in GP:
    CODE:
        sage[4]=Qfsolve([1, 0, 0; 0, 113922743, 0; 0, 0, -310146482690273725409]);
    PARI/GP ERROR:
      ***   at top-level: sage[4]=Qfsolve([1,0,0;0,113
      ***                         ^--------------------
      ***   in function Qfsolve: ... du determinant"));factD=factor(-abs(2*d));if
      ***                                                    ^--------------------
      *** factor: bug in PARI/GP (Segmentation Fault), please report
**********************************************************************
1 items had failures:
   1 of  18 in __main__.example_3
***Test Failed*** 1 failures.
For whitespace errors, see the file /Users/SimonKing/.sage//tmp/con_rational_field_24352.py
         [7.4 s]
 
----------------------------------------------------------------------
The following tests failed:


        sage -t -force_lib "devel/sage/sage/schemes/plane_conics/con_rational_field.py"
```
Is that a known problem? I sense that we will soon have another dependency...



---

archive/issue_comments_180181.json:
```json
{
    "body": "<a id='comment:8'></a>The total result of make ptest on bsd.math is:\n\n```\n        sage -t  -force_lib devel/sage/doc/en/bordeaux_2008/l_series.rst # 5 doctests failed\n        sage -t  -force_lib devel/sage/doc/en/bordeaux_2008/elliptic_curves.rst # 7 doctests failed\n        sage -t  -force_lib devel/sage/doc/en/reference/coercion.rst # 2 doctests failed\n        sage -t  -force_lib devel/sage/sage/interfaces/genus2reduction.py # 14 doctests failed\n        sage -t  -force_lib devel/sage/sage/interfaces/interface.py # 2 doctests failed\n        sage -t  -force_lib devel/sage/sage/interfaces/gp.py # 8 doctests failed\n        sage -t  -force_lib devel/sage/sage/lfunctions/lcalc.py # 2 doctests failed\n        sage -t  -force_lib devel/sage/sage/lfunctions/dokchitser.py # 45 doctests failed\n        sage -t  -force_lib devel/sage/sage/misc/misc.py # 3 doctests failed\n        sage -t  -force_lib devel/sage/sage/misc/sage_eval.py # 1 doctests failed\n        sage -t  -force_lib devel/sage/sage/modular/buzzard.py # 2 doctests failed\n        sage -t  -force_lib devel/sage/sage/modular/modform/eis_series.py # 6 doctests failed\n        sage -t  -force_lib devel/sage/sage/modular/modform/element.py # 14 doctests failed\n        sage -t  -force_lib devel/sage/sage/plot/line.py # 1 doctests failed\n        sage -t  -force_lib devel/sage/sage/quadratic_forms/qfsolve.py # 1 doctests failed\n        sage -t  -force_lib devel/sage/sage/rings/number_field/number_field.py # 5 doctests failed\n        sage -t  -force_lib devel/sage/sage/schemes/elliptic_curves/BSD.py # 4 doctests failed\n        sage -t  -force_lib devel/sage/sage/schemes/elliptic_curves/ell_number_field.py # 13 doctests failed\n        sage -t  -force_lib devel/sage/sage/schemes/elliptic_curves/gp_simon.py # 3 doctests failed\n        sage -t  -force_lib devel/sage/sage/schemes/elliptic_curves/lseries_ell.py # 8 doctests failed\n        sage -t  -force_lib devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py # 17 doctests failed\n        sage -t  -force_lib devel/sage/sage/schemes/elliptic_curves/period_lattice.py # 3 doctests failed\n        sage -t  -force_lib devel/sage/sage/schemes/elliptic_curves/sha_tate.py # 11 doctests failed\n        sage -t  -force_lib devel/sage/sage/schemes/plane_conics/con_number_field.py # 1 doctests failed\n        sage -t  -force_lib devel/sage/sage/schemes/plane_conics/con_rational_field.py # 1 doctests failed\n        sage -t  -force_lib devel/sage/sage/tests/benchmark.py # 4 doctests failed\n```\n\nSo, no crash in Sage, but I guess many (or all?) of these errors could be explained by crashes in PARI/GP.",
    "created_at": "2013-01-04T20:59:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180181",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:8'></a>The total result of make ptest on bsd.math is:

```
        sage -t  -force_lib devel/sage/doc/en/bordeaux_2008/l_series.rst # 5 doctests failed
        sage -t  -force_lib devel/sage/doc/en/bordeaux_2008/elliptic_curves.rst # 7 doctests failed
        sage -t  -force_lib devel/sage/doc/en/reference/coercion.rst # 2 doctests failed
        sage -t  -force_lib devel/sage/sage/interfaces/genus2reduction.py # 14 doctests failed
        sage -t  -force_lib devel/sage/sage/interfaces/interface.py # 2 doctests failed
        sage -t  -force_lib devel/sage/sage/interfaces/gp.py # 8 doctests failed
        sage -t  -force_lib devel/sage/sage/lfunctions/lcalc.py # 2 doctests failed
        sage -t  -force_lib devel/sage/sage/lfunctions/dokchitser.py # 45 doctests failed
        sage -t  -force_lib devel/sage/sage/misc/misc.py # 3 doctests failed
        sage -t  -force_lib devel/sage/sage/misc/sage_eval.py # 1 doctests failed
        sage -t  -force_lib devel/sage/sage/modular/buzzard.py # 2 doctests failed
        sage -t  -force_lib devel/sage/sage/modular/modform/eis_series.py # 6 doctests failed
        sage -t  -force_lib devel/sage/sage/modular/modform/element.py # 14 doctests failed
        sage -t  -force_lib devel/sage/sage/plot/line.py # 1 doctests failed
        sage -t  -force_lib devel/sage/sage/quadratic_forms/qfsolve.py # 1 doctests failed
        sage -t  -force_lib devel/sage/sage/rings/number_field/number_field.py # 5 doctests failed
        sage -t  -force_lib devel/sage/sage/schemes/elliptic_curves/BSD.py # 4 doctests failed
        sage -t  -force_lib devel/sage/sage/schemes/elliptic_curves/ell_number_field.py # 13 doctests failed
        sage -t  -force_lib devel/sage/sage/schemes/elliptic_curves/gp_simon.py # 3 doctests failed
        sage -t  -force_lib devel/sage/sage/schemes/elliptic_curves/lseries_ell.py # 8 doctests failed
        sage -t  -force_lib devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py # 17 doctests failed
        sage -t  -force_lib devel/sage/sage/schemes/elliptic_curves/period_lattice.py # 3 doctests failed
        sage -t  -force_lib devel/sage/sage/schemes/elliptic_curves/sha_tate.py # 11 doctests failed
        sage -t  -force_lib devel/sage/sage/schemes/plane_conics/con_number_field.py # 1 doctests failed
        sage -t  -force_lib devel/sage/sage/schemes/plane_conics/con_rational_field.py # 1 doctests failed
        sage -t  -force_lib devel/sage/sage/tests/benchmark.py # 4 doctests failed
```

So, no crash in Sage, but I guess many (or all?) of these errors could be explained by crashes in PARI/GP.



---

archive/issue_comments_180182.json:
```json
{
    "body": "<a id='comment:9'></a>I have created a #13921 for the gp crash.",
    "created_at": "2013-01-07T10:36:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180182",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:9'></a>I have created a #13921 for the gp crash.



---

archive/issue_comments_180183.json:
```json
{
    "body": "<a id='comment:0'></a>Just wanted to point out that the original p4 spkg which actually sets pydebug when SAGE_DEBUG is set is not linked from anywhere anymore although the p5 spkg from #13867 is based on it, so let's just merge this second ticket quickly to actually be able to use Python in debug mode with a vanilla Sage.",
    "created_at": "2013-01-29T14:02:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180183",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:0'></a>Just wanted to point out that the original p4 spkg which actually sets pydebug when SAGE_DEBUG is set is not linked from anywhere anymore although the p5 spkg from #13867 is based on it, so let's just merge this second ticket quickly to actually be able to use Python in debug mode with a vanilla Sage.



---

archive/issue_comments_180184.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,18 @@\n+Instructions for getting a debug version of Python:\n \n+* Download and untar sage-5.7.beta2\n+* Copy the Python spkg from #13867 to spkg/standard and (to be on the safe side) remove the previously present Python spkg\n+* Run\n+  {{{\n+export SAGE_DEBUG=yes\n+make\n+  }}}\n+  and wait.\n+* (optionally) install the gdb spkg from #13866\n+* Apply the patches from #13878 and #14059 to the Sage library\n+* Run \\`sage -br\\`\n+\n+This gives you a Sage version that starts up and should pass tests. If it doesn't, we just found some bugs ;-)\n \n Author: Jean-Pierre Flori\n \n```\n",
    "created_at": "2013-02-06T07:04:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180184",
    "user": "https://github.com/simon-king-jena"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,18 @@
+Instructions for getting a debug version of Python:
 
+* Download and untar sage-5.7.beta2
+* Copy the Python spkg from #13867 to spkg/standard and (to be on the safe side) remove the previously present Python spkg
+* Run
+  {{{
+export SAGE_DEBUG=yes
+make
+  }}}
+  and wait.
+* (optionally) install the gdb spkg from #13866
+* Apply the patches from #13878 and #14059 to the Sage library
+* Run \`sage -br\`
+
+This gives you a Sage version that starts up and should pass tests. If it doesn't, we just found some bugs ;-)
 
 Author: Jean-Pierre Flori
 
```




---

archive/issue_comments_180185.json:
```json
{
    "body": "<a id='comment:1'></a>With sage-5.7.beta2, another dependency is needed, namely #14059. Since several of the other dependencies were already merged, I changed the directions in the ticket description accordingly.",
    "created_at": "2013-02-06T07:04:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180185",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:1'></a>With sage-5.7.beta2, another dependency is needed, namely #14059. Since several of the other dependencies were already merged, I changed the directions in the ticket description accordingly.



---

archive/issue_comments_180186.json:
```json
{
    "body": "<a id='comment:2'></a>We are almost there. With sage-5.7.beta2 and the changes indicated in the ticket description and with MALLOC_CHECK_=3, make ptest yields:\n\n```\n        sage -t  -force_lib devel/sage/sage/graphs/generic_graph_pyx.pyx # Killed/crashed\n        sage -t  -force_lib devel/sage/doc/en/bordeaux_2008/birds_other.rst # Time out\n```\n\nI don't know if the time-out is meaningful. Is there a ticket already for the generic graph problem?",
    "created_at": "2013-02-06T09:46:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180186",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:2'></a>We are almost there. With sage-5.7.beta2 and the changes indicated in the ticket description and with MALLOC_CHECK_=3, make ptest yields:

```
        sage -t  -force_lib devel/sage/sage/graphs/generic_graph_pyx.pyx # Killed/crashed
        sage -t  -force_lib devel/sage/doc/en/bordeaux_2008/birds_other.rst # Time out
```

I don't know if the time-out is meaningful. Is there a ticket already for the generic graph problem?



---

archive/issue_comments_180187.json:
```json
{
    "body": "<a id='comment:3'></a>Not sure the crash is really related to the debug version.\nSee https://groups.google.com/d/msg/sage-release/nvm8f82Vs-U/CdhZmprersUJ\nIt might be a bug always present and triggered by MALLOC_CHECK_=3 even wihtout debug Python.",
    "created_at": "2013-02-06T09:49:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180187",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:3'></a>Not sure the crash is really related to the debug version.
See https://groups.google.com/d/msg/sage-release/nvm8f82Vs-U/CdhZmprersUJ
It might be a bug always present and triggered by MALLOC_CHECK_=3 even wihtout debug Python.



---

archive/issue_comments_180188.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,18 @@\n+Instructions for getting a debug version of Python:\n \n+* Download and untar sage-5.7.beta2\n+* Copy the Python spkg from #13867 to spkg/standard and (to be on the safe side) remove the previously present Python spkg\n+* Run\n+  {{{\n+export SAGE_DEBUG=yes\n+make\n+  }}}\n+  and wait.\n+* (optionally) install the gdb spkg from #13866\n+* Apply the patches from #13878, #14059 and #14067 to the Sage library\n+* Run \\`sage -br\\`\n+\n+This gives you a Sage version that passes all tests, even with MALLOC_CHECK_=3.\n \n Author: Jean-Pierre Flori\n \n```\n",
    "created_at": "2013-02-06T11:09:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180188",
    "user": "https://github.com/simon-king-jena"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,18 @@
+Instructions for getting a debug version of Python:
 
+* Download and untar sage-5.7.beta2
+* Copy the Python spkg from #13867 to spkg/standard and (to be on the safe side) remove the previously present Python spkg
+* Run
+  {{{
+export SAGE_DEBUG=yes
+make
+  }}}
+  and wait.
+* (optionally) install the gdb spkg from #13866
+* Apply the patches from #13878, #14059 and #14067 to the Sage library
+* Run \`sage -br\`
+
+This gives you a Sage version that passes all tests, even with MALLOC_CHECK_=3.
 
 Author: Jean-Pierre Flori
 
```




---

archive/issue_comments_180189.json:
```json
{
    "body": "<a id='comment:4'></a>Even though in generic_graph is triggered my MALLOC_CHECK_=3 and not by  the debug version, I think it won't hurt to add #14067 as a dependency, since running tests with MALLOC_CHECK_=3 is (at least for me) associated with debugging.\n\nMoreover:\n\n```\nsage -t -force_lib \"devel/sage/doc/en/bordeaux_2008/birds_other.rst\"\n         [318.2 s]\n \n----------------------------------------------------------------------\nAll tests passed!\n```\n\nHence, from my perspective, this ticket can be resolved as \"fixed\", as soon as all dependencies are merged. Since no patch will be merged from here, I suppose it has no author.",
    "created_at": "2013-02-06T11:09:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180189",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:4'></a>Even though in generic_graph is triggered my MALLOC_CHECK_=3 and not by  the debug version, I think it won't hurt to add #14067 as a dependency, since running tests with MALLOC_CHECK_=3 is (at least for me) associated with debugging.

Moreover:

```
sage -t -force_lib "devel/sage/doc/en/bordeaux_2008/birds_other.rst"
         [318.2 s]
 
----------------------------------------------------------------------
All tests passed!
```

Hence, from my perspective, this ticket can be resolved as "fixed", as soon as all dependencies are merged. Since no patch will be merged from here, I suppose it has no author.



---

archive/issue_comments_180190.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2013-02-06T11:09:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180190",
    "user": "https://github.com/simon-king-jena"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_events_038903.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-02-06T11:09:46Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "milestone": "sage-pending",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13864#event-38903"
}
```



---

archive/issue_events_038904.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-02-06T11:09:46Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "milestone": "sage-5.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13864#event-38904"
}
```



---

archive/issue_events_038905.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-02-09T12:18:04Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13864#event-38905"
}
```



---

archive/issue_comments_180191.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-02-09T12:18:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13864#issuecomment-180191",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
