# Issue 13312: Polyhedral bugfixes and improvements

archive/issues_013140.json:
```json
{
    "assignees": [],
    "body": "The .polar() method of the Polyhedron class is incorrect, currently it returns the inversion of the correct answer.  Thanks to sarah-marie belcastro for pointing this out.\n\nAnother bugfix/improvement is adding support for negation, which inverts polyhedra.  Implementing this revealed that scalar multiplication by negative numbers gave incorrect answers for polyhedra with rays.\n\nFinally this adds a convenience function for obtained faces in terms of vertex and inequality indices.\n\n\nDepends on #11763\n\nAssignee: **@sagetrac-mhampton**\n\nCC:  @vbraun\n\nKeywords: **polyhedra, polar**\n\nBranch/Commit: **[u/vbraun/polyhedral_neg_polar](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/polyhedral_neg_polar) @ [9e2fe95](https://github.com/sagemath/sagetrac-mirror/commit/9e2fe957e16c53fe39df2d58cb739b0dc416bfd6)**\n\nReviewer: **Nathann Cohen**\n\nAuthor: **Marshall Hampton, Volker Braun**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/13312_\n\n",
    "closed_at": "2013-12-26T14:50:09Z",
    "created_at": "2012-07-31T13:34:10Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20geometry",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Polyhedral bugfixes and improvements",
    "type": "issue",
    "updated_at": "2013-12-26T14:50:09Z",
    "url": "https://github.com/sagemath/sage/issues/13312",
    "user": "https://github.com/sagetrac-mhampton"
}
```
The .polar() method of the Polyhedron class is incorrect, currently it returns the inversion of the correct answer.  Thanks to sarah-marie belcastro for pointing this out.

Another bugfix/improvement is adding support for negation, which inverts polyhedra.  Implementing this revealed that scalar multiplication by negative numbers gave incorrect answers for polyhedra with rays.

Finally this adds a convenience function for obtained faces in terms of vertex and inequality indices.


Depends on #11763

Assignee: **@sagetrac-mhampton**

CC:  @vbraun

Keywords: **polyhedra, polar**

Branch/Commit: **[u/vbraun/polyhedral_neg_polar](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/polyhedral_neg_polar) @ [9e2fe95](https://github.com/sagemath/sagetrac-mirror/commit/9e2fe957e16c53fe39df2d58cb739b0dc416bfd6)**

Reviewer: **Nathann Cohen**

Author: **Marshall Hampton, Volker Braun**

_Issue created by migration from https://trac.sagemath.org/ticket/13312_





---

archive/issue_events_170145.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2012-07-31T13:34:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13312",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13312#event-170145"
}
```



---

archive/issue_events_170146.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2012-07-31T13:34:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13312",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20geometry",
    "label_color": "0000ff",
    "label_name": "component: geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13312#event-170146"
}
```



---

archive/issue_events_170147.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2012-07-31T13:34:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13312",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13312#event-170147"
}
```



---

archive/issue_events_170148.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2012-07-31T13:34:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13312",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13312#event-170148"
}
```



---

archive/issue_comments_156294.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-The .polar() method of the Polyhedron class is incorrect, currently it returns the inversion of the correct answer.  This should be an easy thing to fix.\n+The .polar() method of the Polyhedron class is incorrect, currently it returns the inversion of the correct answer.  Thanks to sarah-marie belcastro for pointing this out.\n``````\n",
    "created_at": "2012-08-03T15:50:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13312#issuecomment-156294",
    "user": "https://github.com/sagetrac-mhampton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-The .polar() method of the Polyhedron class is incorrect, currently it returns the inversion of the correct answer.  This should be an easy thing to fix.
+The .polar() method of the Polyhedron class is incorrect, currently it returns the inversion of the correct answer.  Thanks to sarah-marie belcastro for pointing this out.
``````




---

archive/issue_comments_156295.json:
```json
{
    "body": "Fixes the polar method of Polyhedron (was inverted)",
    "created_at": "2012-08-03T15:51:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13312#issuecomment-156295",
    "user": "https://github.com/sagetrac-mhampton"
}
```

Fixes the polar method of Polyhedron (was inverted)



---

archive/issue_comments_156296.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nAttachment: **[trac_13312_fix_polar_method_polyhedron.patch.gz](https://github.com/sagemath/sage/files/ticket13312/trac_13312_fix_polar_method_polyhedron.patch.gz)**",
    "created_at": "2012-08-03T15:54:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13312#issuecomment-156296",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:2" align="right">Comment 2</div>

Attachment: **[trac_13312_fix_polar_method_polyhedron.patch.gz](https://github.com/sagemath/sage/files/ticket13312/trac_13312_fix_polar_method_polyhedron.patch.gz)**



---

archive/issue_comments_156297.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,4 @@\n The .polar() method of the Polyhedron class is incorrect, currently it returns the inversion of the correct answer.  Thanks to sarah-marie belcastro for pointing this out.\n+\n+Apply \n+* [attachment: trac_13312_fix_polar_method_polyhedron.patch](https://github.com/sagemath/sage/files/ticket13312/trac_13312_fix_polar_method_polyhedron.patch.gz)\n``````\n",
    "created_at": "2012-08-03T15:54:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13312#issuecomment-156297",
    "user": "https://github.com/sagetrac-mhampton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,4 @@
 The .polar() method of the Polyhedron class is incorrect, currently it returns the inversion of the correct answer.  Thanks to sarah-marie belcastro for pointing this out.
+
+Apply 
+* [attachment: trac_13312_fix_polar_method_polyhedron.patch](https://github.com/sagemath/sage/files/ticket13312/trac_13312_fix_polar_method_polyhedron.patch.gz)
``````




---

archive/issue_events_170149.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2012-08-03T15:54:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13312",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13312#event-170149"
}
```



---

archive/issue_comments_156298.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,9 @@\n The .polar() method of the Polyhedron class is incorrect, currently it returns the inversion of the correct answer.  Thanks to sarah-marie belcastro for pointing this out.\n \n+Another bugfix/improvement is adding support for negation, which inverts polyhedra.  Implementing this revealed that scalar multiplication by negative numbers gave incorrect answers for polyhedra with rays.\n+\n+Finally this adds a convenience function for obtained faces in terms of vertex and inequality indices.\n+\n+\n Apply \n-* [attachment: trac_13312_fix_polar_method_polyhedron.patch](https://github.com/sagemath/sage/files/ticket13312/trac_13312_fix_polar_method_polyhedron.patch.gz)\n+* [attachment: trac_13312_polyhedral_bugfixes_and_improvements.patch](https://github.com/sagemath/sage/files/ticket13312/trac_13312_polyhedral_bugfixes_and_improvements.patch.gz)\n``````\n",
    "created_at": "2012-08-04T16:27:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13312#issuecomment-156298",
    "user": "https://github.com/sagetrac-mhampton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,9 @@
 The .polar() method of the Polyhedron class is incorrect, currently it returns the inversion of the correct answer.  Thanks to sarah-marie belcastro for pointing this out.
 
+Another bugfix/improvement is adding support for negation, which inverts polyhedra.  Implementing this revealed that scalar multiplication by negative numbers gave incorrect answers for polyhedra with rays.
+
+Finally this adds a convenience function for obtained faces in terms of vertex and inequality indices.
+
+
 Apply 
-* [attachment: trac_13312_fix_polar_method_polyhedron.patch](https://github.com/sagemath/sage/files/ticket13312/trac_13312_fix_polar_method_polyhedron.patch.gz)
+* [attachment: trac_13312_polyhedral_bugfixes_and_improvements.patch](https://github.com/sagemath/sage/files/ticket13312/trac_13312_polyhedral_bugfixes_and_improvements.patch.gz)
``````




---

archive/issue_events_170150.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2012-08-04T16:27:56Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/13312",
    "title_is": "Polyhedral bugfixes and improvements",
    "title_was": "polar method of polyhedra is incorrect",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13312#event-170150"
}
```



---

archive/issue_comments_156299.json:
```json
{
    "body": "Fixes polar and scalar multiplication bugs",
    "created_at": "2012-08-04T16:28:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13312#issuecomment-156299",
    "user": "https://github.com/sagetrac-mhampton"
}
```

Fixes polar and scalar multiplication bugs



---

archive/issue_comments_156300.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nAttachment: **[trac_13312_polyhedral_bugfixes_and_improvements.patch.gz](https://github.com/sagemath/sage/files/ticket13312/trac_13312_polyhedral_bugfixes_and_improvements.patch.gz)**",
    "created_at": "2012-08-04T16:29:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13312#issuecomment-156300",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:5" align="right">Comment 5</div>

Attachment: **[trac_13312_polyhedral_bugfixes_and_improvements.patch.gz](https://github.com/sagemath/sage/files/ticket13312/trac_13312_polyhedral_bugfixes_and_improvements.patch.gz)**



---

archive/issue_comments_156301.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\n* rebased on top of #11763\n* added commit message\n* I'm against the `face_dual_descriptions` method. Never return lists (mutable), and never return integer indices into internal data structures if you can help it. Just return the actual object, its the same to Python (where objects are really references to objects anyways). But I understand that it would be desirable to access the faces without having to dig through the face lattice. I've replaced it with a new `faces(dim)` method that returns the faces in the given dimension. The docstring shows a one-liner to go from there to the old `face_dual_descriptions` method.",
    "created_at": "2012-08-04T22:59:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13312#issuecomment-156301",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:6" align="right">Comment 6</div>

* rebased on top of #11763
* added commit message
* I'm against the `face_dual_descriptions` method. Never return lists (mutable), and never return integer indices into internal data structures if you can help it. Just return the actual object, its the same to Python (where objects are really references to objects anyways). But I understand that it would be desirable to access the faces without having to dig through the face lattice. I've replaced it with a new `faces(dim)` method that returns the faces in the given dimension. The docstring shows a one-liner to go from there to the old `face_dual_descriptions` method.



---

archive/issue_comments_156302.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,4 +6,4 @@\n \n \n Apply \n-* [attachment: trac_13312_polyhedral_bugfixes_and_improvements.patch](https://github.com/sagemath/sage/files/ticket13312/trac_13312_polyhedral_bugfixes_and_improvements.patch.gz)\n+* [attachment: trac_13312_neg_polar.patch](https://github.com/sagemath/sage/files/ticket13312/trac_13312_neg_polar.patch.gz)\n``````\n",
    "created_at": "2012-08-04T22:59:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13312#issuecomment-156302",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,4 +6,4 @@
 
 
 Apply 
-* [attachment: trac_13312_polyhedral_bugfixes_and_improvements.patch](https://github.com/sagemath/sage/files/ticket13312/trac_13312_polyhedral_bugfixes_and_improvements.patch.gz)
+* [attachment: trac_13312_neg_polar.patch](https://github.com/sagemath/sage/files/ticket13312/trac_13312_neg_polar.patch.gz)
``````




---

archive/issue_comments_156303.json:
```json
{
    "body": "Dependencies: **#11763**",
    "created_at": "2012-08-04T22:59:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13312#issuecomment-156303",
    "user": "https://github.com/vbraun"
}
```

Dependencies: **#11763**



---

archive/issue_comments_156304.json:
```json
{
    "body": "Changed author from **Marshall Hampton** to **Marshall Hampton, Volker Braun**",
    "created_at": "2012-08-04T22:59:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13312#issuecomment-156304",
    "user": "https://github.com/vbraun"
}
```

Changed author from **Marshall Hampton** to **Marshall Hampton, Volker Braun**



---

archive/issue_comments_156305.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nI'd really like to have the functionality of the face_dual_descriptions method.  I disagree that your docstring is really a one-liner, and I don't think that would be very easy for Sage/Python newbies to figure out.  I have talked to a couple of people who would like a platform for polyhedral computation who have tried Sage and find it very difficult to accomplish what they would like to do.  So I think perhaps we could add your faces(dim) method and an improved version of the face_dual_descriptions method which could return a tuple instead of a list if that makes you happier.",
    "created_at": "2012-08-07T18:46:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13312#issuecomment-156305",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:7" align="right">Comment 7</div>

I'd really like to have the functionality of the face_dual_descriptions method.  I disagree that your docstring is really a one-liner, and I don't think that would be very easy for Sage/Python newbies to figure out.  I have talked to a couple of people who would like a platform for polyhedral computation who have tried Sage and find it very difficult to accomplish what they would like to do.  So I think perhaps we could add your faces(dim) method and an improved version of the face_dual_descriptions method which could return a tuple instead of a list if that makes you happier.



---

archive/issue_comments_156306.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nWhat do you and/or your colleagues actually want to do? I doubt that anybody *wants* tuples of tuples of tuples of nondescript integers thrown at them. This is both non-discoverable (no way to figure out what the integers mean) while at the same time very error-prone (accidentally use the index in the wrong list and you'll get hard-to-find bugs that yield the wrong result). Its arguably true that many students were harmed with such anti-patterns, but its never too late to to change.\n\nRight now the `PolyhedronFace` class isn't really complete, so presumably we need to flesh it more out so that you can get everything you need from the face.",
    "created_at": "2012-08-08T01:05:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13312#issuecomment-156306",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:8" align="right">Comment 8</div>

What do you and/or your colleagues actually want to do? I doubt that anybody *wants* tuples of tuples of tuples of nondescript integers thrown at them. This is both non-discoverable (no way to figure out what the integers mean) while at the same time very error-prone (accidentally use the index in the wrong list and you'll get hard-to-find bugs that yield the wrong result). Its arguably true that many students were harmed with such anti-patterns, but its never too late to to change.

Right now the `PolyhedronFace` class isn't really complete, so presumably we need to flesh it more out so that you can get everything you need from the face.



---

archive/issue_comments_156307.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nOK, I am working on some sort of compromise patch and I noticed that your patch (trac_13312_polyhedral_neg_polar.patch) doesn't apply - it looks like it applies to some intermediate version you had - ?  \n\nI actually find the output of the function I wrote convenient of a number of purposes.  Here's a couple of examples of things I have wanted to do before (I can't really speak for others, I just know they find the present capabilities lacking):  Take all the facets of a polyhedron, and move them away from the center of the polyhedron (sort of explode it).  If the polyhedron is 3-dimensional, show these facets in different colors.  Or another example:  color all of the facets of a 3-d polyhedron whose outward normals satisfy some condition.",
    "created_at": "2012-08-26T22:34:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13312#issuecomment-156307",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:9" align="right">Comment 9</div>

OK, I am working on some sort of compromise patch and I noticed that your patch (trac_13312_polyhedral_neg_polar.patch) doesn't apply - it looks like it applies to some intermediate version you had - ?  

I actually find the output of the function I wrote convenient of a number of purposes.  Here's a couple of examples of things I have wanted to do before (I can't really speak for others, I just know they find the present capabilities lacking):  Take all the facets of a polyhedron, and move them away from the center of the polyhedron (sort of explode it).  If the polyhedron is 3-dimensional, show these facets in different colors.  Or another example:  color all of the facets of a 3-d polyhedron whose outward normals satisfy some condition.



---

archive/issue_comments_156308.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nPatch applies to sage-5.3.beta1, I'm building sage-5.3.rc0 now to see if there is any issue.\n\nI thought about how to handle things and I'd like to\n* Not make PolyhedronFace derive from polyhedron - can be confusing as not every `Polyhedron` method makes sense.\n* The PolyhedronFace should have a `polyhedron()` method to get it as a polyhedron without reference to ambient\n* Other methods `outward_normal()` or `offset_polyhedron()` (exploded?), `plot(color)` to implement what you want.\nThoughts?",
    "created_at": "2012-08-27T03:01:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13312#issuecomment-156308",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:10" align="right">Comment 10</div>

Patch applies to sage-5.3.beta1, I'm building sage-5.3.rc0 now to see if there is any issue.

I thought about how to handle things and I'd like to
* Not make PolyhedronFace derive from polyhedron - can be confusing as not every `Polyhedron` method makes sense.
* The PolyhedronFace should have a `polyhedron()` method to get it as a polyhedron without reference to ambient
* Other methods `outward_normal()` or `offset_polyhedron()` (exploded?), `plot(color)` to implement what you want.
Thoughts?



---

archive/issue_comments_156309.json:
```json
{
    "body": "Updated patch",
    "created_at": "2012-10-23T21:48:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13312#issuecomment-156309",
    "user": "https://github.com/vbraun"
}
```

Updated patch



---

archive/issue_comments_156310.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nAttachment: **[trac_13312_polyhedral_neg_polar.patch.gz](https://github.com/sagemath/sage/files/ticket13312/trac_13312_polyhedral_neg_polar.patch.gz)**\n\nRebased for #11763",
    "created_at": "2012-10-23T21:49:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13312#issuecomment-156310",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:11" align="right">Comment 11</div>

Attachment: **[trac_13312_polyhedral_neg_polar.patch.gz](https://github.com/sagemath/sage/files/ticket13312/trac_13312_polyhedral_neg_polar.patch.gz)**

Rebased for #11763



---

archive/issue_comments_156311.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,4 +6,4 @@\n \n \n Apply \n-* [attachment: trac_13312_neg_polar.patch](https://github.com/sagemath/sage/files/ticket13312/trac_13312_neg_polar.patch.gz)\n+* [attachment: trac_13312_polyhedral_neg_polar.patch](https://github.com/sagemath/sage/files/ticket13312/trac_13312_polyhedral_neg_polar.patch.gz)\n``````\n",
    "created_at": "2012-10-23T21:49:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13312#issuecomment-156311",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,4 +6,4 @@
 
 
 Apply 
-* [attachment: trac_13312_neg_polar.patch](https://github.com/sagemath/sage/files/ticket13312/trac_13312_neg_polar.patch.gz)
+* [attachment: trac_13312_polyhedral_neg_polar.patch](https://github.com/sagemath/sage/files/ticket13312/trac_13312_polyhedral_neg_polar.patch.gz)
``````




---

archive/issue_comments_156312.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nFor the patchbot: \n\nApply trac_13312_polyhedral_neg_polar.patch",
    "created_at": "2012-11-06T21:11:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13312#issuecomment-156312",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:12" align="right">Comment 12</div>

For the patchbot: 

Apply trac_13312_polyhedral_neg_polar.patch



---

archive/issue_events_170151.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13312",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13312#event-170151"
}
```



---

archive/issue_events_170152.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13312",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13312#event-170152"
}
```



---

archive/issue_events_170153.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2013-10-19T20:12:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13312",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13312#event-170153"
}
```



---

archive/issue_events_170154.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2013-10-19T20:12:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13312",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13312#event-170154"
}
```



---

archive/issue_comments_156313.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nThis needs to be rebased on 5.13.beta0.",
    "created_at": "2013-10-19T20:12:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13312#issuecomment-156313",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:14" align="right">Comment 14</div>

This needs to be rebased on 5.13.beta0.



---

archive/issue_comments_156314.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nRebased\n\n---\nNew commits:\n<table><tr><td>[changeset:9e2fe95]</td><td><code>face lattice posit now uses facade, so there is no element attribute any more</code></td></tr><tr><td>[changeset:549683a]</td><td><code>Allow unary negation and flip sign in the polar() method</code></td></tr></table>\n",
    "created_at": "2013-10-19T20:54:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13312#issuecomment-156314",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:15" align="right">Comment 15</div>

Rebased

---
New commits:
<table><tr><td>[changeset:9e2fe95]</td><td><code>face lattice posit now uses facade, so there is no element attribute any more</code></td></tr><tr><td>[changeset:549683a]</td><td><code>Allow unary negation and flip sign in the polar() method</code></td></tr></table>




---

archive/issue_comments_156315.json:
```json
{
    "body": "Commit: **[9e2fe95](https://github.com/sagemath/sagetrac-mirror/commit/9e2fe957e16c53fe39df2d58cb739b0dc416bfd6)**",
    "created_at": "2013-10-19T20:54:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13312#issuecomment-156315",
    "user": "https://github.com/vbraun"
}
```

Commit: **[9e2fe95](https://github.com/sagemath/sagetrac-mirror/commit/9e2fe957e16c53fe39df2d58cb739b0dc416bfd6)**



---

archive/issue_events_170155.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-10-19T20:54:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13312",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13312#event-170155"
}
```



---

archive/issue_events_170156.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-10-19T20:54:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13312",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13312#event-170156"
}
```



---

archive/issue_comments_156316.json:
```json
{
    "body": "Branch: **[u/vbraun/polyhedral_neg_polar](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/polyhedral_neg_polar)**",
    "created_at": "2013-10-19T20:54:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13312#issuecomment-156316",
    "user": "https://github.com/vbraun"
}
```

Branch: **[u/vbraun/polyhedral_neg_polar](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/polyhedral_neg_polar)**



---

archive/issue_comments_156317.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,6 +4,3 @@\n \n Finally this adds a convenience function for obtained faces in terms of vertex and inequality indices.\n \n-\n-Apply \n-* [attachment: trac_13312_polyhedral_neg_polar.patch](https://github.com/sagemath/sage/files/ticket13312/trac_13312_polyhedral_neg_polar.patch.gz)\n``````\n",
    "created_at": "2013-12-23T15:10:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13312#issuecomment-156317",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,6 +4,3 @@
 
 Finally this adds a convenience function for obtained faces in terms of vertex and inequality indices.
 
-
-Apply 
-* [attachment: trac_13312_polyhedral_neg_polar.patch](https://github.com/sagemath/sage/files/ticket13312/trac_13312_polyhedral_neg_polar.patch.gz)
``````




---

archive/issue_comments_156318.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nYooooooooooooo !!\n\nI agree with this patch, though I don't understand one bit : why this change in `.polar` ?\n\n```python\n-  verts = [list(v.vector() - self.center()) for v in self.vertex_generator()]\n+  verts = [list(self.center() - v.vector()) for v in self.vertex_generator()]\n```\n\nIf it is just to have your example of code work, shouldn't you change the constructor instead ?\n\nBy the way, running `polytopes.n_cube(3).show()` just gives me a black Jmol window. I mean, empty. It's like the world is missing a cube.\n\nNathann",
    "created_at": "2013-12-23T17:32:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13312#issuecomment-156318",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:17" align="right">Comment 17</div>

Yooooooooooooo !!

I agree with this patch, though I don't understand one bit : why this change in `.polar` ?

```python
-  verts = [list(v.vector() - self.center()) for v in self.vertex_generator()]
+  verts = [list(self.center() - v.vector()) for v in self.vertex_generator()]
```

If it is just to have your example of code work, shouldn't you change the constructor instead ?

By the way, running `polytopes.n_cube(3).show()` just gives me a black Jmol window. I mean, empty. It's like the world is missing a cube.

Nathann



---

archive/issue_comments_156319.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nProbably caused by #14358",
    "created_at": "2013-12-23T18:05:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13312#issuecomment-156319",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:18" align="right">Comment 18</div>

Probably caused by #14358



---

archive/issue_comments_156320.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nThe sign change in `polar()` is what this ticket is about. Whats your question, and why should we change the unrelated ctor?",
    "created_at": "2013-12-23T18:07:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13312#issuecomment-156320",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:19" align="right">Comment 19</div>

The sign change in `polar()` is what this ticket is about. Whats your question, and why should we change the unrelated ctor?



---

archive/issue_comments_156321.json:
```json
{
    "body": "Reviewer: **Nathann Cohen**",
    "created_at": "2013-12-23T18:12:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13312#issuecomment-156321",
    "user": "https://github.com/nathanncohen"
}
```

Reviewer: **Nathann Cohen**



---

archive/issue_events_170157.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-12-23T18:12:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13312",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13312#event-170157"
}
```



---

archive/issue_events_170158.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-12-23T18:12:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13312",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13312#event-170158"
}
```



---

archive/issue_comments_156322.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nOh sorry. I thought that you just changed the result of this `.polar()` thing so that the two constructors would be equal, and not just isomorphic. I was saying that instead of changing the behaviour of this function to get this result, you should just multiply one of the two constructors by `-1` which would appear more correct `:-P`\n\nOkayokay, then if this def of `polar` is the good one, this patch is good to go as all other additions seem good too `;-)`\n\nNathann",
    "created_at": "2013-12-23T18:12:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13312#issuecomment-156322",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:20" align="right">Comment 20</div>

Oh sorry. I thought that you just changed the result of this `.polar()` thing so that the two constructors would be equal, and not just isomorphic. I was saying that instead of changing the behaviour of this function to get this result, you should just multiply one of the two constructors by `-1` which would appear more correct `:-P`

Okayokay, then if this def of `polar` is the good one, this patch is good to go as all other additions seem good too `;-)`

Nathann



---

archive/issue_events_170159.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-12-26T14:50:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13312",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13312#event-170159"
}
```



---

archive/issue_events_170160.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "49d4b121cdd0415a1e2b22a1762b02578bda4c7c",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2013-12-26T14:50:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/13312",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13312#event-170160"
}
```
