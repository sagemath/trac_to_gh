# Issue 13410: Patchbot timeouts

archive/issues_013238.json:
```json
{
    "body": "The patchbot calls \n\n```\n  handle = urllib2.urlopen(url, timeout=5)\n```\nin `trac.py` instead of using the configurable timeout. If you have many dependencies then the probability that one takes 5 seconds to retrieve can get close to 100%...\n\nApply:\n\n* Install the spkg at http://sage.math.washington.edu/home/robertwb/patches/patchbot-1.1.spkg\n\nAssignee: tbd\n\nCC:  @kini @dkrenn @dandrake @loefflerd @haraldschilly @jdemeyer\n\nReviewer: Volker Braun\n\nAuthor: Robert Bradshaw\n\nMerged: sage-5.4.beta0\n\nDependencies: #12486\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/13410\n\n",
    "closed_at": "2012-09-05T07:20:32Z",
    "created_at": "2012-08-29T13:49:32Z",
    "labels": [
        "component: packages: optional",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.4",
    "title": "Patchbot timeouts",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13410",
    "user": "https://github.com/vbraun"
}
```
The patchbot calls 

```
  handle = urllib2.urlopen(url, timeout=5)
```
in `trac.py` instead of using the configurable timeout. If you have many dependencies then the probability that one takes 5 seconds to retrieve can get close to 100%...

Apply:

* Install the spkg at http://sage.math.washington.edu/home/robertwb/patches/patchbot-1.1.spkg

Assignee: tbd

CC:  @kini @dkrenn @dandrake @loefflerd @haraldschilly @jdemeyer

Reviewer: Volker Braun

Author: Robert Bradshaw

Merged: sage-5.4.beta0

Dependencies: #12486

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/13410





---

archive/issue_comments_201548.json:
```json
{
    "body": "<a id='comment:1'></a>\nNew spkg to try out at http://sage.math.washington.edu/home/robertwb/patches/patchbot-HEAD.spkg . Lots of other improvements too: https://github.com/robertwb/sage-patchbot/",
    "created_at": "2012-08-31T11:18:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13410#issuecomment-201548",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:1'></a>
New spkg to try out at http://sage.math.washington.edu/home/robertwb/patches/patchbot-HEAD.spkg . Lots of other improvements too: https://github.com/robertwb/sage-patchbot/



---

archive/issue_comments_201549.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-09-01T05:15:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13410#issuecomment-201549",
    "user": "https://github.com/robertwb"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_201550.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,4 +5,6 @@\n ```\n in `trac.py` instead of using the configurable timeout. If you have many dependencies then the probability that one takes 5 seconds to retrieve can get close to 100%...\n \n+Apply:\n \n+* Install the spkg at http://sage.math.washington.edu/home/robertwb/patches/patchbot-1.1.spkg\n``````\n",
    "created_at": "2012-09-01T05:15:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13410#issuecomment-201550",
    "user": "https://github.com/robertwb"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,4 +5,6 @@
 ```
 in `trac.py` instead of using the configurable timeout. If you have many dependencies then the probability that one takes 5 seconds to retrieve can get close to 100%...
 
+Apply:
 
+* Install the spkg at http://sage.math.washington.edu/home/robertwb/patches/patchbot-1.1.spkg
``````




---

archive/issue_comments_201551.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#12486\"",
    "created_at": "2012-09-01T05:15:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13410#issuecomment-201551",
    "user": "https://github.com/robertwb"
}
```

Changing dependencies from "" to "#12486"



---

archive/issue_comments_201552.json:
```json
{
    "body": "<a id='comment:2'></a>\nFixes this bug, as well as other robustness improvements, more powerful plugins, and general cleanup.\n\nInstall the spkg at http://sage.math.washington.edu/home/robertwb/patches/patchbot-1.1.spkg",
    "created_at": "2012-09-01T05:15:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13410#issuecomment-201552",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:2'></a>
Fixes this bug, as well as other robustness improvements, more powerful plugins, and general cleanup.

Install the spkg at http://sage.math.washington.edu/home/robertwb/patches/patchbot-1.1.spkg



---

archive/issue_comments_201553.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-09-02T11:30:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13410#issuecomment-201553",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_201554.json:
```json
{
    "body": "<a id='comment:3'></a>\nLooks good to me!",
    "created_at": "2012-09-02T11:30:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13410#issuecomment-201554",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:3'></a>
Looks good to me!



---

archive/issue_comments_201555.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Volker Braun\"",
    "created_at": "2012-09-02T11:30:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13410#issuecomment-201555",
    "user": "https://github.com/vbraun"
}
```

Changing reviewer from "" to "Volker Braun"



---

archive/issue_comments_201556.json:
```json
{
    "body": "Changing author from \"\" to \"Robert Bradshaw\"",
    "created_at": "2012-09-02T11:30:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13410#issuecomment-201556",
    "user": "https://github.com/vbraun"
}
```

Changing author from "" to "Robert Bradshaw"



---

archive/issue_comments_201557.json:
```json
{
    "body": "<a id='comment:4'></a>\ni just put this optional spkg on the server+mirrors.",
    "created_at": "2012-09-03T14:42:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13410#issuecomment-201557",
    "user": "https://github.com/haraldschilly"
}
```

<a id='comment:4'></a>
i just put this optional spkg on the server+mirrors.



---

archive/issue_comments_201558.json:
```json
{
    "body": "<a id='comment:5'></a>\nThanks!",
    "created_at": "2012-09-04T07:18:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13410#issuecomment-201558",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:5'></a>
Thanks!



---

archive/issue_comments_201559.json:
```json
{
    "body": "<a id='comment:6'></a>\nHarald, the list of packages still lists 1.0, but only 1.1 exists on the server, hence `sage -i patchbot` fails.",
    "created_at": "2012-09-04T09:14:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13410#issuecomment-201559",
    "user": "https://github.com/kini"
}
```

<a id='comment:6'></a>
Harald, the list of packages still lists 1.0, but only 1.1 exists on the server, hence `sage -i patchbot` fails.



---

archive/issue_comments_201560.json:
```json
{
    "body": "<a id='comment:7'></a>\nwhat list of packages? ah, well. i have no idea what this script really does or is supposed to do. i ran it again and it works.\n\nmaybe it does create two entries, if there are two versions (and it archives the older one). in the second pass, the old one was no longer there.",
    "created_at": "2012-09-04T09:24:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13410#issuecomment-201560",
    "user": "https://github.com/haraldschilly"
}
```

<a id='comment:7'></a>
what list of packages? ah, well. i have no idea what this script really does or is supposed to do. i ran it again and it works.

maybe it does create two entries, if there are two versions (and it archives the older one). in the second pass, the old one was no longer there.



---

archive/issue_comments_201561.json:
```json
{
    "body": "<a id='comment:8'></a>\nI'm not sure what list of packages, but all I know is that `sage -i patchbot` said something like \"found latest version is patchbot-1.0, attempting to download, 404\".",
    "created_at": "2012-09-04T09:33:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13410#issuecomment-201561",
    "user": "https://github.com/kini"
}
```

<a id='comment:8'></a>
I'm not sure what list of packages, but all I know is that `sage -i patchbot` said something like "found latest version is patchbot-1.0, attempting to download, 404".



---

archive/issue_comments_201562.json:
```json
{
    "body": "<a id='comment:9'></a>\nkini, just for the record, i'm pretty sure it's this list:\n  http://sagemath.org/mirror/spkg/optional/list\nwhich had two entries (one for 1.0 and one with 1.1).",
    "created_at": "2012-09-04T09:37:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13410#issuecomment-201562",
    "user": "https://github.com/haraldschilly"
}
```

<a id='comment:9'></a>
kini, just for the record, i'm pretty sure it's this list:
  http://sagemath.org/mirror/spkg/optional/list
which had two entries (one for 1.0 and one with 1.1).



---

archive/issue_comments_201563.json:
```json
{
    "body": "<a id='comment:10'></a>\nFor the record, `./sage -f patchbot` worked for me and pulled in v1.1.",
    "created_at": "2012-09-04T10:03:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13410#issuecomment-201563",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:10'></a>
For the record, `./sage -f patchbot` worked for me and pulled in v1.1.



---

archive/issue_comments_201564.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-5.4.beta0\"",
    "created_at": "2012-09-05T07:20:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13410#issuecomment-201564",
    "user": "https://github.com/jdemeyer"
}
```

Changing merged from "" to "sage-5.4.beta0"



---

archive/issue_comments_201565.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-09-05T07:20:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13410",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13410#issuecomment-201565",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_037228.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-09-05T07:20:32Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13410",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13410#event-37228"
}
```
