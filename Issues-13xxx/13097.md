# Issue 13097: integral of ln(1+4/5*sin(x)) from -3.1415 to 3.1415 crashes Maxima and Sage

archive/issues_012925.json:
```json
{
    "assignees": [
        "https://github.com/burcin"
    ],
    "body": "See extensive discussion at [this sage-support thread](https://groups.google.com/forum/?fromgroups#!topic/sage-support/dZFPiWRWSoc).\n\nReported by Ben Jones:\n\n```\nsage: integrate(ln(1+4/5*sin(x)), x, -3.1415, 3.1415)\n\n\n;;;\n;;; Binding stack overflow.\n;;; Jumping to the outermost toplevel prompt\n;;;\n\n...\n\n;;;\n;;; Binding stack overflow.\n;;; Jumping to the outermost toplevel prompt\n;;;\n\n\n/Users/jonesbe/sage/sage-5.1.beta2/spkg/bin/sage: line 335: 86594 Illegal instruction     sage-ipython \"$@\" -i\n```\n\nThere don't seem to be any problems with Maxima.  Although it's been traced down (thanks to Dan Drake) to 5.0.beta3, the only obvious candidate for a change in our interface is when we added `abs_integrate`, which doesn't seem to impact things.\n\n```\n(%i2) load(abs_integrate);\n(%o2) /Users/.../sage-5.0/local/share/maxima/5.26.0/s\\\nhare/contrib/integration/abs_integrate.mac\n(%i4) keepfloat:true;\n(%o4)                                true\n(%i7) integrate(ln(1+4/5*sin(x)), x, -3.1415, 3.1415);\n                          3.1415\n                         /\n                         [            4 sin(x)\n(%o7)                    I         ln(-------- + 1) dx\n                         ]               5\n                         /\n                          - 3.1415\n```\nAnd we have\n\n```\nsage: maxima_calculus(\" integrate(ln(1+4/5*sin(x)), x, -3.1415, 3.1415);\")\n'integrate(ln(4*sin(x)/5+1),x,-3.1415,3.1415)\n```\nso something must indeed be wrong in how we're sending this to Maxima.\n\nCC:  @benjaminfjones @sagetrac-dsm\n\nKeywords: **integral**\n\nBranch/Commit: **[`3f41b09`](https://github.com/sagemath/sagetrac-mirror/commit/3f41b09a332040a3be9fb0376b03a9397b84eaff)**\n\nUpstream: **Fixed upstream, in a later stable release.**\n\nReviewer: **Karl-Dieter Crisman**\n\nAuthor: **Dave Morris**\n\nComponent: **calculus**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/13097_\n\n",
    "closed_at": "2021-03-09T00:01:01Z",
    "created_at": "2012-06-08T13:22:58Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20calculus",
        "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "integral of ln(1+4/5*sin(x)) from -3.1415 to 3.1415 crashes Maxima and Sage",
    "type": "issue",
    "updated_at": "2021-03-09T00:01:01Z",
    "url": "https://github.com/sagemath/sage/issues/13097",
    "user": "https://github.com/kcrisman"
}
```
See extensive discussion at [this sage-support thread](https://groups.google.com/forum/?fromgroups#!topic/sage-support/dZFPiWRWSoc).

Reported by Ben Jones:

```
sage: integrate(ln(1+4/5*sin(x)), x, -3.1415, 3.1415)


;;;
;;; Binding stack overflow.
;;; Jumping to the outermost toplevel prompt
;;;

...

;;;
;;; Binding stack overflow.
;;; Jumping to the outermost toplevel prompt
;;;


/Users/jonesbe/sage/sage-5.1.beta2/spkg/bin/sage: line 335: 86594 Illegal instruction     sage-ipython "$@" -i
```

There don't seem to be any problems with Maxima.  Although it's been traced down (thanks to Dan Drake) to 5.0.beta3, the only obvious candidate for a change in our interface is when we added `abs_integrate`, which doesn't seem to impact things.

```
(%i2) load(abs_integrate);
(%o2) /Users/.../sage-5.0/local/share/maxima/5.26.0/s\
hare/contrib/integration/abs_integrate.mac
(%i4) keepfloat:true;
(%o4)                                true
(%i7) integrate(ln(1+4/5*sin(x)), x, -3.1415, 3.1415);
                          3.1415
                         /
                         [            4 sin(x)
(%o7)                    I         ln(-------- + 1) dx
                         ]               5
                         /
                          - 3.1415
```
And we have

```
sage: maxima_calculus(" integrate(ln(1+4/5*sin(x)), x, -3.1415, 3.1415);")
'integrate(ln(4*sin(x)/5+1),x,-3.1415,3.1415)
```
so something must indeed be wrong in how we're sending this to Maxima.

CC:  @benjaminfjones @sagetrac-dsm

Keywords: **integral**

Branch/Commit: **[`3f41b09`](https://github.com/sagemath/sagetrac-mirror/commit/3f41b09a332040a3be9fb0376b03a9397b84eaff)**

Upstream: **Fixed upstream, in a later stable release.**

Reviewer: **Karl-Dieter Crisman**

Author: **Dave Morris**

Component: **calculus**

_Issue created by migration from https://trac.sagemath.org/ticket/13097_





---

archive/issue_events_179951.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-06-08T13:22:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13097#event-179951"
}
```



---

archive/issue_events_179952.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-06-08T13:22:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20calculus",
    "label_color": "0000ff",
    "label_name": "c: calculus",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13097#event-179952"
}
```



---

archive/issue_events_179953.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-06-08T13:22:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13097#event-179953"
}
```



---

archive/issue_events_179954.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-06-08T13:22:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13097#event-179954"
}
```



---

archive/issue_events_179955.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2012-06-08T13:22:58Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "subject": "https://github.com/kcrisman",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13097#event-179955"
}
```



---

archive/issue_comments_149352.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-See extensive discussion at \n+See extensive discussion at [this sage-support thread](https://groups.google.com/forum/?fromgroups#!topic/sage-support/dZFPiWRWSoc).\n \n Reported by Ben Jones:\n \n``````\n",
    "created_at": "2012-06-08T13:24:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13097#issuecomment-149352",
    "user": "https://github.com/kcrisman"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-See extensive discussion at 
+See extensive discussion at [this sage-support thread](https://groups.google.com/forum/?fromgroups#!topic/sage-support/dZFPiWRWSoc).
 
 Reported by Ben Jones:
 
``````




---

archive/issue_comments_149353.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nCould it rather be something wrong in how we are receiving data from Maxima(lib)?",
    "created_at": "2012-06-08T13:59:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13097#issuecomment-149353",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:2" align="right">comment:2</div>

Could it rather be something wrong in how we are receiving data from Maxima(lib)?



---

archive/issue_comments_149354.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI don't think maxima understands `ln`. If you do\n\n```\nmaxima_calculus(\" integrate(log(1+4/5*sin(x)), x, -3.1415, 3.1415);\")\n```\nyou see the same thing happening. No problem in vanilla maxima. But when we load `abs_integrate`:\n\n```\n(%i1) load(abs_integrate);\n(%o1) /usr/local/sage/5.0/local/share/maxima/5.26.0/share/contrib/integration/abs_integrate.mac\n(%i2) integrate(log(1+4/5*sin(x)), x, -3.1415, 3.1415);\n...\nCondition of type: STACK-OVERFLOW\nBINDING-STACK overflow at size 8448. Stack can probably be resized.\n```\nFYI: with\n\n```\nfrom sage.interfaces.maxima_lib import *\nfrom sage.libs.ecl import *\nargs=(ln(1+4/5*sin(x)), x, -3.1415, 3.1415)\nI=EclObject(([max_integrate],[sr_to_max(SR(a)) for a in args]))\nI\n```\nyou see what expression gets passed to maxima_lib. With\n\n```\nEclObject('#$integrate(log(1+4/5*sin(x)), x, -3.1415, 3.1415)$')\n```\nyou see what maxima's parser would produce. With\n\n```\nmaxima_eval(I)\n```\nyou can trigger the same explosion. Note that with this trick, you can quickly see that\n\n```\nEclObject('#$integrate(ln(1+4/5*sin(x)), x, -3.1415, 3.1415)$')\n```\ncreates an essentially different expression.",
    "created_at": "2012-06-08T22:38:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13097#issuecomment-149354",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:4" align="right">comment:4</div>

I don't think maxima understands `ln`. If you do

```
maxima_calculus(" integrate(log(1+4/5*sin(x)), x, -3.1415, 3.1415);")
```
you see the same thing happening. No problem in vanilla maxima. But when we load `abs_integrate`:

```
(%i1) load(abs_integrate);
(%o1) /usr/local/sage/5.0/local/share/maxima/5.26.0/share/contrib/integration/abs_integrate.mac
(%i2) integrate(log(1+4/5*sin(x)), x, -3.1415, 3.1415);
...
Condition of type: STACK-OVERFLOW
BINDING-STACK overflow at size 8448. Stack can probably be resized.
```
FYI: with

```
from sage.interfaces.maxima_lib import *
from sage.libs.ecl import *
args=(ln(1+4/5*sin(x)), x, -3.1415, 3.1415)
I=EclObject(([max_integrate],[sr_to_max(SR(a)) for a in args]))
I
```
you see what expression gets passed to maxima_lib. With

```
EclObject('#$integrate(log(1+4/5*sin(x)), x, -3.1415, 3.1415)$')
```
you see what maxima's parser would produce. With

```
maxima_eval(I)
```
you can trigger the same explosion. Note that with this trick, you can quickly see that

```
EclObject('#$integrate(ln(1+4/5*sin(x)), x, -3.1415, 3.1415)$')
```
creates an essentially different expression.



---

archive/issue_comments_149355.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nThe problem can be simplified to\n\n```\nintegrate(log(sin(x)),x);\n```\nwhich maxima without `abs_integrate` can do (or at least it returns an answer).\n\nThis is now [Maxima Artifact 3533723](http://sourceforge.net/tracker/?func=detail&aid=3533723&group_id=4933&atid=104933)",
    "created_at": "2012-06-09T01:57:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13097#issuecomment-149355",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:5" align="right">comment:5</div>

The problem can be simplified to

```
integrate(log(sin(x)),x);
```
which maxima without `abs_integrate` can do (or at least it returns an answer).

This is now [Maxima Artifact 3533723](http://sourceforge.net/tracker/?func=detail&aid=3533723&group_id=4933&atid=104933)



---

archive/issue_comments_149356.json:
```json
{
    "body": "Upstream: **Reported upstream. No feedback yet.**",
    "created_at": "2012-06-09T01:57:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13097#issuecomment-149356",
    "user": "https://github.com/nbruin"
}
```

Upstream: **Reported upstream. No feedback yet.**



---

archive/issue_comments_149357.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\n> I don't think maxima understands `ln`. If you do\n\nWell, egg on my face!  Sorry for that noise.  I just don't use Maxima enough beyond trying to generate bug reports or find new functionality for Sage :)\n\nAnd good diagnosis; I guess if I had tried `log` instead I would have gotten the same problem.",
    "created_at": "2012-06-09T03:09:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13097#issuecomment-149357",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:6" align="right">comment:6</div>

> I don't think maxima understands `ln`. If you do

Well, egg on my face!  Sorry for that noise.  I just don't use Maxima enough beyond trying to generate bug reports or find new functionality for Sage :)

And good diagnosis; I guess if I had tried `log` instead I would have gotten the same problem.



---

archive/issue_comments_149358.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@nbruin](#comment%3A4):\n> I don't think maxima understands `ln`. \n\n*facepalm*. Sorry for noise on `sage-support`",
    "created_at": "2012-06-09T08:04:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13097#issuecomment-149358",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@nbruin](#comment%3A4):
> I don't think maxima understands `ln`. 

*facepalm*. Sorry for noise on `sage-support`



---

archive/issue_comments_149359.json:
```json
{
    "body": "Changed upstream from **Reported upstream. No feedback yet.** to **Reported upstream. Developers acknowledge bug.**",
    "created_at": "2012-06-09T16:30:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13097#issuecomment-149359",
    "user": "https://github.com/nbruin"
}
```

Changed upstream from **Reported upstream. No feedback yet.** to **Reported upstream. Developers acknowledge bug.**



---

archive/issue_comments_149360.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nWe really need more options for \"upstream\" ;-). How about \"Developers acknowledge bug, propose fix, but haven't gotten around to merging it because they got the fix with less than 24 hours round trip time\"? See Maxima tracker. I have no doubt this will be fixed in some future Maxima release.",
    "created_at": "2012-06-09T16:30:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13097#issuecomment-149360",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:8" align="right">comment:8</div>

We really need more options for "upstream" ;-). How about "Developers acknowledge bug, propose fix, but haven't gotten around to merging it because they got the fix with less than 24 hours round trip time"? See Maxima tracker. I have no doubt this will be fixed in some future Maxima release.



---

archive/issue_comments_149361.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nWe can monkey-patch Barton Willis's fix into sage's maxima:\n\n```\nsage: L=\"\"\"signum_int(q,x) :=\n....: block([w : 1, acc : [], sgn, v, f, listconstvars : true],\n....:   q : convert_to_signum(q),\n....:   if freeof('signum, q) then\n....:     (false)\n....:   else (\n....:     q : almost_everywhere_simp(q),\n....:     v : listofvars(q),\n....:     q : block([expandwrt_denom : true], expandwrt(q,'signum)),\n....:     if (f : abs_int_extra(q,x)) # false then f\n....:     else if (f : partition_as_signum(q,x)) # false then (\n....:       w : first(f),\n....:       acc : second(f),\n....:       if every(lambda([s], linear_in_p(s,x)), acc) then (\n....:       sgn : xreduce(\"*\", map(lambda([s], diff(s,x)),acc)),\n....:       acc : map(lambda([s], rhs(first(linsolve(s, x)))),acc),\n....:       signum_int_helper(signum(sgn) * w, sort(acc), x)))\n....:     else if (safe_op(q) = \"+\") then (\n....:         f : map(lambda([s], signum_int(s,x)), args(q)),\n....:         if member(false, f) then false else xreduce(\"+\", f))\n....:       else block([extra_integration_methods : [],\n....:         extra_definite_integration_methods : []],integrate(q,x))\n....:   )\n....: );\"\"\"\nsage:  integrate(ln(1+4/5*sin(x)), x, -3.1415, 3.1415)\nintegrate(log(4/5*sin(x) + 1), x, -3.1415, 3.1415)\nsage: integrate(ln(sin(x)),x)\n1/2*I*x^2 - 1/2*x*log(sin(x)^2 + cos(x)^2 - 2*cos(x) + 1) - 1/2*x*log(sin(x)^2 + cos(x)^2 + 2*cos(x) + 1) + x*log(sin(x)) + I*x*arctan2(sin(x), -cos(x) + 1) - I*x*arctan2(sin(x), cos(x) + 1) + I*polylog(2, -e^(I*x)) + I*polylog(2, e^(I*x))\n\n```\nThis just patches a routine defined in `abs_integrate.mac`. It's a *LOT* slower than in 4.7.1, though, so if performance is any concern, we might want to reconsider whether abs_integrate should be loaded by default. By manipulating the maxima variables `extra_integration_methods` and `extra_definite_integration_methods` it should be possible to control which integration methods maxima tries to use (this is what `abs_integrate` hooks into).",
    "created_at": "2012-06-09T18:37:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13097#issuecomment-149361",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:9" align="right">comment:9</div>

We can monkey-patch Barton Willis's fix into sage's maxima:

```
sage: L="""signum_int(q,x) :=
....: block([w : 1, acc : [], sgn, v, f, listconstvars : true],
....:   q : convert_to_signum(q),
....:   if freeof('signum, q) then
....:     (false)
....:   else (
....:     q : almost_everywhere_simp(q),
....:     v : listofvars(q),
....:     q : block([expandwrt_denom : true], expandwrt(q,'signum)),
....:     if (f : abs_int_extra(q,x)) # false then f
....:     else if (f : partition_as_signum(q,x)) # false then (
....:       w : first(f),
....:       acc : second(f),
....:       if every(lambda([s], linear_in_p(s,x)), acc) then (
....:       sgn : xreduce("*", map(lambda([s], diff(s,x)),acc)),
....:       acc : map(lambda([s], rhs(first(linsolve(s, x)))),acc),
....:       signum_int_helper(signum(sgn) * w, sort(acc), x)))
....:     else if (safe_op(q) = "+") then (
....:         f : map(lambda([s], signum_int(s,x)), args(q)),
....:         if member(false, f) then false else xreduce("+", f))
....:       else block([extra_integration_methods : [],
....:         extra_definite_integration_methods : []],integrate(q,x))
....:   )
....: );"""
sage:  integrate(ln(1+4/5*sin(x)), x, -3.1415, 3.1415)
integrate(log(4/5*sin(x) + 1), x, -3.1415, 3.1415)
sage: integrate(ln(sin(x)),x)
1/2*I*x^2 - 1/2*x*log(sin(x)^2 + cos(x)^2 - 2*cos(x) + 1) - 1/2*x*log(sin(x)^2 + cos(x)^2 + 2*cos(x) + 1) + x*log(sin(x)) + I*x*arctan2(sin(x), -cos(x) + 1) - I*x*arctan2(sin(x), cos(x) + 1) + I*polylog(2, -e^(I*x)) + I*polylog(2, e^(I*x))

```
This just patches a routine defined in `abs_integrate.mac`. It's a *LOT* slower than in 4.7.1, though, so if performance is any concern, we might want to reconsider whether abs_integrate should be loaded by default. By manipulating the maxima variables `extra_integration_methods` and `extra_definite_integration_methods` it should be possible to control which integration methods maxima tries to use (this is what `abs_integrate` hooks into).



---

archive/issue_comments_149362.json:
```json
{
    "body": "Changed upstream from **Reported upstream. Developers acknowledge bug.** to **Fixed upstream, but not in a stable release.**",
    "created_at": "2012-07-07T02:29:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13097#issuecomment-149362",
    "user": "https://github.com/kcrisman"
}
```

Changed upstream from **Reported upstream. Developers acknowledge bug.** to **Fixed upstream, but not in a stable release.**



---

archive/issue_events_179956.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13097#event-179956"
}
```



---

archive/issue_events_179957.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13097#event-179957"
}
```



---

archive/issue_events_179958.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13097#event-179958"
}
```



---

archive/issue_events_179959.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13097#event-179959"
}
```



---

archive/issue_events_179960.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13097#event-179960"
}
```



---

archive/issue_events_179961.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13097#event-179961"
}
```



---

archive/issue_events_179962.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13097#event-179962"
}
```



---

archive/issue_events_179963.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13097#event-179963"
}
```



---

archive/issue_comments_149363.json:
```json
{
    "body": "Changed keywords from none to **integral**",
    "created_at": "2020-09-22T12:02:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13097#issuecomment-149363",
    "user": "https://github.com/fchapoton"
}
```

Changed keywords from none to **integral**



---

archive/issue_events_179964.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-09-22T16:08:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13097#event-179964"
}
```



---

archive/issue_comments_149364.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nI don't see crashes 8 years later on:\n\n```\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 SageMath version 9.2.beta12, Release Date: 2020-09-06              \u2502\n\u2502 Using Python 3.8.5. Type \"help()\" for help.                        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\nsage: integrate(ln(1+4/5*sin(x)), x, -3.1415, 3.1415)                                                                                \n-1.40205228301\nsage: integrate(ln(1+4/5*sin(x)), x, -pi, pi)                                                                                        \nintegrate(log(4/5*sin(x) + 1), x, -pi, pi)\nsage: integrate(log(sin(x)),x)                                                                                                       \n1/2*I*x^2 - I*x*arctan2(sin(x), cos(x) + 1) + I*x*arctan2(sin(x), -cos(x) + 1) - 1/2*x*log(cos(x)^2 + sin(x)^2 + 2*cos(x) + 1) - 1/2*x*log(cos(x)^2 + sin(x)^2 - 2*cos(x) + 1) + x*log(sin(x)) + I*dilog(-e^(I*x)) + I*dilog(e^(I*x))\n```\n\npropose to close as worksforme.",
    "created_at": "2020-09-22T16:08:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13097#issuecomment-149364",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:16" align="right">comment:16</div>

I don't see crashes 8 years later on:

```
┌────────────────────────────────────────────────────────────────────┐
│ SageMath version 9.2.beta12, Release Date: 2020-09-06              │
│ Using Python 3.8.5. Type "help()" for help.                        │
└────────────────────────────────────────────────────────────────────┘
sage: integrate(ln(1+4/5*sin(x)), x, -3.1415, 3.1415)                                                                                
-1.40205228301
sage: integrate(ln(1+4/5*sin(x)), x, -pi, pi)                                                                                        
integrate(log(4/5*sin(x) + 1), x, -pi, pi)
sage: integrate(log(sin(x)),x)                                                                                                       
1/2*I*x^2 - I*x*arctan2(sin(x), cos(x) + 1) + I*x*arctan2(sin(x), -cos(x) + 1) - 1/2*x*log(cos(x)^2 + sin(x)^2 + 2*cos(x) + 1) - 1/2*x*log(cos(x)^2 + sin(x)^2 - 2*cos(x) + 1) + x*log(sin(x)) + I*dilog(-e^(I*x)) + I*dilog(e^(I*x))
```

propose to close as worksforme.



---

archive/issue_events_179965.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-09-22T16:08:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13097#event-179965"
}
```



---

archive/issue_events_179966.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-09-22T16:27:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13097#event-179966"
}
```



---

archive/issue_events_179967.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-09-22T16:27:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "label": "https://github.com/sagemath/sage/labels/worksforme",
    "label_color": "c6c6c6",
    "label_name": "worksforme",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13097#event-179967"
}
```



---

archive/issue_comments_149365.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nok, then",
    "created_at": "2020-09-22T16:27:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13097#issuecomment-149365",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:17" align="right">comment:17</div>

ok, then



---

archive/issue_events_179968.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-09-22T16:27:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13097#event-179968"
}
```



---

archive/issue_events_179969.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-09-22T16:27:49Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13097#event-179969"
}
```



---

archive/issue_events_179970.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2020-09-22T17:09:34Z",
    "event": "reopened",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13097#event-179970"
}
```



---

archive/issue_comments_149366.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nAs always, doctest ...",
    "created_at": "2020-09-22T17:09:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13097#issuecomment-149366",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:18" align="right">comment:18</div>

As always, doctest ...



---

archive/issue_events_179971.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2020-09-22T17:09:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "label": "https://github.com/sagemath/sage/labels/worksforme",
    "label_color": "c6c6c6",
    "label_name": "worksforme",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13097#event-179971"
}
```



---

archive/issue_comments_149367.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nAlso, it was indeed applied in Maxima.",
    "created_at": "2020-09-22T17:10:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13097#issuecomment-149367",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:19" align="right">comment:19</div>

Also, it was indeed applied in Maxima.



---

archive/issue_comments_149368.json:
```json
{
    "body": "Changed upstream from **Fixed upstream, but not in a stable release.** to **Fixed upstream, in a later stable release.**",
    "created_at": "2020-09-22T17:10:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13097#issuecomment-149368",
    "user": "https://github.com/kcrisman"
}
```

Changed upstream from **Fixed upstream, but not in a stable release.** to **Fixed upstream, in a later stable release.**



---

archive/issue_comments_149369.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nok, you are right, but I will wait until #25119 is in sage",
    "created_at": "2020-09-22T18:17:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13097#issuecomment-149369",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:20" align="right">comment:20</div>

ok, you are right, but I will wait until #25119 is in sage



---

archive/issue_comments_149370.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nobviously no rush whatsoever since it's fixed",
    "created_at": "2020-09-22T21:46:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13097#issuecomment-149370",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:21" align="right">comment:21</div>

obviously no rush whatsoever since it's fixed



---

archive/issue_comments_149371.json:
```json
{
    "body": "Branch: **[public/13097](https://github.com/sagemath/sagetrac-mirror/tree/public/13097)**",
    "created_at": "2021-01-24T04:07:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13097#issuecomment-149371",
    "user": "https://github.com/DaveWitteMorris"
}
```

Branch: **[public/13097](https://github.com/sagemath/sagetrac-mirror/tree/public/13097)**



---

archive/issue_comments_149372.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nThe PR adds the original issue as a doctest.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3f41b09a332040a3be9fb0376b03a9397b84eaff\"><code>3f41b09</code></a></td><td><code>doctest for trac 13097</code></td></tr></table>\n",
    "created_at": "2021-01-24T04:10:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13097#issuecomment-149372",
    "user": "https://github.com/DaveWitteMorris"
}
```

<div id="comment:23" align="right">comment:23</div>

The PR adds the original issue as a doctest.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3f41b09a332040a3be9fb0376b03a9397b84eaff"><code>3f41b09</code></a></td><td><code>doctest for trac 13097</code></td></tr></table>




---

archive/issue_comments_149373.json:
```json
{
    "body": "Author: **Dave Morris**",
    "created_at": "2021-01-24T04:10:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13097#issuecomment-149373",
    "user": "https://github.com/DaveWitteMorris"
}
```

Author: **Dave Morris**



---

archive/issue_events_179972.json:
```json
{
    "actor": "https://github.com/DaveWitteMorris",
    "created_at": "2021-01-24T04:10:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13097#event-179972"
}
```



---

archive/issue_events_179973.json:
```json
{
    "actor": "https://github.com/DaveWitteMorris",
    "created_at": "2021-01-24T04:10:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13097#event-179973"
}
```



---

archive/issue_events_179974.json:
```json
{
    "actor": "https://github.com/DaveWitteMorris",
    "created_at": "2021-01-24T04:10:04Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13097#event-179974"
}
```



---

archive/issue_comments_149374.json:
```json
{
    "body": "Commit: **[`3f41b09`](https://github.com/sagemath/sagetrac-mirror/commit/3f41b09a332040a3be9fb0376b03a9397b84eaff)**",
    "created_at": "2021-01-24T04:10:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13097#issuecomment-149374",
    "user": "https://github.com/DaveWitteMorris"
}
```

Commit: **[`3f41b09`](https://github.com/sagemath/sagetrac-mirror/commit/3f41b09a332040a3be9fb0376b03a9397b84eaff)**



---

archive/issue_events_179975.json:
```json
{
    "actor": "https://github.com/DaveWitteMorris",
    "created_at": "2021-01-24T04:10:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13097#event-179975"
}
```



---

archive/issue_events_179976.json:
```json
{
    "actor": "https://github.com/DaveWitteMorris",
    "created_at": "2021-01-24T04:10:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13097#event-179976"
}
```



---

archive/issue_comments_149375.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nThanks!",
    "created_at": "2021-01-25T13:54:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13097#issuecomment-149375",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:24" align="right">comment:24</div>

Thanks!



---

archive/issue_events_179977.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2021-01-25T13:54:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13097#event-179977"
}
```



---

archive/issue_events_179978.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2021-01-25T13:54:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13097#event-179978"
}
```



---

archive/issue_comments_149376.json:
```json
{
    "body": "Reviewer: **Karl-Dieter Crisman**",
    "created_at": "2021-01-25T13:54:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13097#issuecomment-149376",
    "user": "https://github.com/kcrisman"
}
```

Reviewer: **Karl-Dieter Crisman**



---

archive/issue_events_179979.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-03-09T00:01:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13097#event-179979"
}
```



---

archive/issue_events_179980.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "b4c66dcdffb707b32b4709bb17245b9601d15abd",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-03-09T00:01:01Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13097#event-179980"
}
```



---

archive/issue_comments_149377.json:
```json
{
    "body": "Changed branch from **[public/13097](https://github.com/sagemath/sagetrac-mirror/tree/public/13097)** to **[`3f41b09`](https://github.com/sagemath/sagetrac-mirror/commit/3f41b09a332040a3be9fb0376b03a9397b84eaff)**",
    "created_at": "2021-03-09T00:01:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13097",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13097#issuecomment-149377",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/13097](https://github.com/sagemath/sagetrac-mirror/tree/public/13097)** to **[`3f41b09`](https://github.com/sagemath/sagetrac-mirror/commit/3f41b09a332040a3be9fb0376b03a9397b84eaff)**
