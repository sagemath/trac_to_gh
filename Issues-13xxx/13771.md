# Issue 13771: Canonical Forms and Automorphism Groups of linear codes

archive/issues_013567.json:
```json
{
    "assignees": [],
    "body": "Two linear codes C, C' over a finite field F of length n are equivalent, if there is\n\n* a permutation pi in S<sub>n</sub>\n* a multiplication vector phi in F*<sup>n</sup> (F* the unit group)\n* an automorphism alpha of F\n\nwith C' = (phi, pi, alpha) C and the action is defined via\n\n(phi, pi, alpha) (c<sub>0</sub>, ..., c<sub>n-1</sub>) = ( alpha( c<sub>pi(0)</sub>) phi<sub>0</sub><sup>-1</sup>  , ... , alpha( c<sub>pi(n-1)</sub>) phi<sub>n-1</sub><sup>-1</sup> )\n\nThis patch adds an algorithm for calculating a unique representative within the equivalence class of a given linear code. Furthermore, it computes the automorphism group of the code as a byproduct.\n\nFinally, it can also deal with the action of subgroups of the semimonomial group.\n\n---\nApply:\n\n1. #13726\n\n2. [attachment: trac_13771-canonical_forms_linear_code.patch](https://github.com/sagemath/sage/files/ticket13771/trac_13771-canonical_forms_linear_code.patch.gz)\n\nDepends on #13726\nDepends on #15576\n\nAssignee: **@wdjoyner**\n\nCC:  @sagetrac-okazymyrov @dimpase @miguelmarco\n\nKeywords: **linear code, canonical form, automorphism group, semilinear equivalent**\n\nBranch/Commit: **[u/tfeulner/ticket/13771](https://github.com/sagemath/sagetrac-mirror/tree/u/tfeulner/ticket/13771) @ [ae9acc6](https://github.com/sagemath/sagetrac-mirror/commit/ae9acc60bd7368bda5771a4f2e7b6051934bc2d4)**\n\nReviewer: **Volker Braun**\n\nAuthor: **Thomas Feulner**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/13771_\n\n",
    "closed_at": "2014-01-05T00:32:20Z",
    "created_at": "2012-11-28T12:07:14Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20coding%20theory",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Canonical Forms and Automorphism Groups of linear codes",
    "type": "issue",
    "updated_at": "2014-01-05T00:32:20Z",
    "url": "https://github.com/sagemath/sage/issues/13771",
    "user": "https://github.com/sagetrac-tfeulner"
}
```
Two linear codes C, C' over a finite field F of length n are equivalent, if there is

* a permutation pi in S<sub>n</sub>
* a multiplication vector phi in F*<sup>n</sup> (F* the unit group)
* an automorphism alpha of F

with C' = (phi, pi, alpha) C and the action is defined via

(phi, pi, alpha) (c<sub>0</sub>, ..., c<sub>n-1</sub>) = ( alpha( c<sub>pi(0)</sub>) phi<sub>0</sub><sup>-1</sup>  , ... , alpha( c<sub>pi(n-1)</sub>) phi<sub>n-1</sub><sup>-1</sup> )

This patch adds an algorithm for calculating a unique representative within the equivalence class of a given linear code. Furthermore, it computes the automorphism group of the code as a byproduct.

Finally, it can also deal with the action of subgroups of the semimonomial group.

---
Apply:

1. #13726

2. [attachment: trac_13771-canonical_forms_linear_code.patch](https://github.com/sagemath/sage/files/ticket13771/trac_13771-canonical_forms_linear_code.patch.gz)

Depends on #13726
Depends on #15576

Assignee: **@wdjoyner**

CC:  @sagetrac-okazymyrov @dimpase @miguelmarco

Keywords: **linear code, canonical form, automorphism group, semilinear equivalent**

Branch/Commit: **[u/tfeulner/ticket/13771](https://github.com/sagemath/sagetrac-mirror/tree/u/tfeulner/ticket/13771) @ [ae9acc6](https://github.com/sagemath/sagetrac-mirror/commit/ae9acc60bd7368bda5771a4f2e7b6051934bc2d4)**

Reviewer: **Volker Braun**

Author: **Thomas Feulner**

_Issue created by migration from https://trac.sagemath.org/ticket/13771_





---

archive/issue_events_177113.json:
```json
{
    "actor": "https://github.com/sagetrac-tfeulner",
    "created_at": "2012-11-28T12:07:14Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13771",
    "milestone_number": null,
    "milestone_title": "sage-5.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13771#event-177113"
}
```



---

archive/issue_events_177114.json:
```json
{
    "actor": "https://github.com/sagetrac-tfeulner",
    "created_at": "2012-11-28T12:07:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13771",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20coding%20theory",
    "label_color": "0000ff",
    "label_name": "component: coding theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13771#event-177114"
}
```



---

archive/issue_events_177115.json:
```json
{
    "actor": "https://github.com/sagetrac-tfeulner",
    "created_at": "2012-11-28T12:07:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13771",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13771#event-177115"
}
```



---

archive/issue_events_177116.json:
```json
{
    "actor": "https://github.com/sagetrac-tfeulner",
    "created_at": "2012-11-28T12:07:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13771",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13771#event-177116"
}
```



---

archive/issue_comments_164594.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -11,3 +11,16 @@\n This patch adds an algorithm for calculating a unique representative within the equivalence class of a given linear code. Furthermore, it computes the automorphism group of the code as a byproduct.\n \n Finally, it can also deal with the action of subgroups of the semimonomial group.\n+\n+---\n+Apply:\n+\n+1. #6391\n+\n+2. #13726\n+\n+3. #13723\n+\n+4. #13417\n+\n+5. [attachment: trac_13771-canonical_forms_linear_code.patch](https://github.com/sagemath/sage/files/ticket13771/trac_13771-canonical_forms_linear_code.patch.gz)\n``````\n",
    "created_at": "2012-11-28T12:18:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13771#issuecomment-164594",
    "user": "https://github.com/sagetrac-tfeulner"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -11,3 +11,16 @@
 This patch adds an algorithm for calculating a unique representative within the equivalence class of a given linear code. Furthermore, it computes the automorphism group of the code as a byproduct.
 
 Finally, it can also deal with the action of subgroups of the semimonomial group.
+
+---
+Apply:
+
+1. #6391
+
+2. #13726
+
+3. #13723
+
+4. #13417
+
+5. [attachment: trac_13771-canonical_forms_linear_code.patch](https://github.com/sagemath/sage/files/ticket13771/trac_13771-canonical_forms_linear_code.patch.gz)
``````




---

archive/issue_comments_164595.json:
```json
{
    "body": "Changed keywords from **** to **linear code, canonical form, automorphism group, semilinear equiavelent**",
    "created_at": "2012-11-28T12:28:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13771#issuecomment-164595",
    "user": "https://github.com/sagetrac-tfeulner"
}
```

Changed keywords from **** to **linear code, canonical form, automorphism group, semilinear equiavelent**



---

archive/issue_comments_164596.json:
```json
{
    "body": "Changed keywords from **linear code, canonical form, automorphism group, semilinear equiavelent** to **linear code, canonical form, automorphism group, semilinear equivalent**",
    "created_at": "2012-11-28T12:29:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13771#issuecomment-164596",
    "user": "https://github.com/sagetrac-tfeulner"
}
```

Changed keywords from **linear code, canonical form, automorphism group, semilinear equiavelent** to **linear code, canonical form, automorphism group, semilinear equivalent**



---

archive/issue_events_177117.json:
```json
{
    "actor": "https://github.com/sagetrac-tfeulner",
    "created_at": "2013-01-07T13:35:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13771",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13771#event-177117"
}
```



---

archive/issue_events_177118.json:
```json
{
    "actor": "https://github.com/sagetrac-tfeulner",
    "created_at": "2013-01-07T13:35:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13771",
    "milestone_number": null,
    "milestone_title": "sage-5.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13771#event-177118"
}
```



---

archive/issue_events_177119.json:
```json
{
    "actor": "https://github.com/sagetrac-tfeulner",
    "created_at": "2013-01-07T13:35:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13771",
    "milestone_number": null,
    "milestone_title": "sage-5.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13771#event-177119"
}
```



---

archive/issue_comments_164597.json:
```json
{
    "body": "Changed dependencies from **#6391, #13726, #13723, #13417** to **#13588, #13726, #13723, #13417**",
    "created_at": "2013-01-07T13:35:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13771#issuecomment-164597",
    "user": "https://github.com/sagetrac-tfeulner"
}
```

Changed dependencies from **#6391, #13726, #13723, #13417** to **#13588, #13726, #13723, #13417**



---

archive/issue_comments_164598.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -15,7 +15,7 @@\n ---\n Apply:\n \n-1. #6391\n+1. #13588\n \n 2. #13726\n \n``````\n",
    "created_at": "2013-01-07T13:35:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13771#issuecomment-164598",
    "user": "https://github.com/sagetrac-tfeulner"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -15,7 +15,7 @@
 ---
 Apply:
 
-1. #6391
+1. #13588
 
 2. #13726
 
``````




---

archive/issue_comments_164599.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -15,12 +15,6 @@\n ---\n Apply:\n \n-1. #13588\n+1. #13726\n \n-2. #13726\n-\n-3. #13723\n-\n-4. #13417\n-\n-5. [attachment: trac_13771-canonical_forms_linear_code.patch](https://github.com/sagemath/sage/files/ticket13771/trac_13771-canonical_forms_linear_code.patch.gz)\n+2. [attachment: trac_13771-canonical_forms_linear_code.patch](https://github.com/sagemath/sage/files/ticket13771/trac_13771-canonical_forms_linear_code.patch.gz)\n``````\n",
    "created_at": "2013-04-25T11:14:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13771#issuecomment-164599",
    "user": "https://github.com/sagetrac-tfeulner"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -15,12 +15,6 @@
 ---
 Apply:
 
-1. #13588
+1. #13726
 
-2. #13726
-
-3. #13723
-
-4. #13417
-
-5. [attachment: trac_13771-canonical_forms_linear_code.patch](https://github.com/sagemath/sage/files/ticket13771/trac_13771-canonical_forms_linear_code.patch.gz)
+2. [attachment: trac_13771-canonical_forms_linear_code.patch](https://github.com/sagemath/sage/files/ticket13771/trac_13771-canonical_forms_linear_code.patch.gz)
``````




---

archive/issue_comments_164600.json:
```json
{
    "body": "Changed dependencies from **#13588, #13726, #13723, #13417** to **#13726**",
    "created_at": "2013-04-25T11:14:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13771#issuecomment-164600",
    "user": "https://github.com/sagetrac-tfeulner"
}
```

Changed dependencies from **#13588, #13726, #13723, #13417** to **#13726**



---

archive/issue_events_177120.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13771",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13771#event-177120"
}
```



---

archive/issue_events_177121.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13771",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13771#event-177121"
}
```



---

archive/issue_comments_164601.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nrebased upon #13726",
    "created_at": "2013-10-21T12:49:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13771#issuecomment-164601",
    "user": "https://github.com/sagetrac-tfeulner"
}
```

<div id="comment:8" align="right">Comment 8</div>

rebased upon #13726



---

archive/issue_comments_164602.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nDoes this patch apply to 5.13.b0?\n\n```\nsage: hg_sage.patch(\"/home/wdj/sagefiles/sage-5.13.beta0/trac_13771-canonical_forms_linear_code.patch\")\n```\nfollowed by sage -b gives\n\n```\nInstalling c_lib\nscons: `install' is up to date.\nUpdating Cython code....\nmissing cimport in module 'sage.groups.semimonomial_transformations.semimonomial_transformation': sage/coding/codecan/codecan.pxd\nCompiling sage/coding/codecan/codecan.pyx because it changed.\n\n...\n\nCompiling sage/sets/disjoint_set.pyx because it depends on sage/groups/perm_gps/partn_ref/data_structures_pyx.pxi.\nCythonizing sage/coding/codecan/autgroup_can_label.pyx\nCythonizing sage/coding/codecan/codecan.pyx\n\nError compiling Cython file:\n------------------------------------------------------------\n...\nfrom sage.groups.perm_gps.permgroup_element cimport PermutationGroupElement\nfrom sage.groups.semimonomial_transformations.semimonomial_transformation cimport SemimonomialTransformation\n^\n```\netc",
    "created_at": "2013-10-21T17:35:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13771#issuecomment-164602",
    "user": "https://github.com/wdjoyner"
}
```

<div id="comment:9" align="right">Comment 9</div>

Does this patch apply to 5.13.b0?

```
sage: hg_sage.patch("/home/wdj/sagefiles/sage-5.13.beta0/trac_13771-canonical_forms_linear_code.patch")
```
followed by sage -b gives

```
Installing c_lib
scons: `install' is up to date.
Updating Cython code....
missing cimport in module 'sage.groups.semimonomial_transformations.semimonomial_transformation': sage/coding/codecan/codecan.pxd
Compiling sage/coding/codecan/codecan.pyx because it changed.

...

Compiling sage/sets/disjoint_set.pyx because it depends on sage/groups/perm_gps/partn_ref/data_structures_pyx.pxi.
Cythonizing sage/coding/codecan/autgroup_can_label.pyx
Cythonizing sage/coding/codecan/codecan.pyx

Error compiling Cython file:
------------------------------------------------------------
...
from sage.groups.perm_gps.permgroup_element cimport PermutationGroupElement
from sage.groups.semimonomial_transformations.semimonomial_transformation cimport SemimonomialTransformation
^
```
etc



---

archive/issue_comments_164603.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nReplying to [@wdjoyner](#comment%3A9):\n> Does this patch apply to 5.13.b0?\n\nIt must be 5.13.b1. At least for the patchbot it seems to work, except for some old-style doctest continuation errors.",
    "created_at": "2013-10-23T06:41:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13771#issuecomment-164603",
    "user": "https://github.com/sagetrac-tfeulner"
}
```

<div id="comment:10" align="right">Comment 10</div>

Replying to [@wdjoyner](#comment%3A9):
> Does this patch apply to 5.13.b0?

It must be 5.13.b1. At least for the patchbot it seems to work, except for some old-style doctest continuation errors.



---

archive/issue_comments_164604.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nWhy don't you test the exception directly, instead of working with a `try`/`except` clause? It is possible to doctest exceptions:\n\n```\n            sage: # something raising an exception\n            Traceback (most recent call last):\n            ...\n            NotImplementedError\n```",
    "created_at": "2013-10-23T07:30:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13771#issuecomment-164604",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:11" align="right">Comment 11</div>

Why don't you test the exception directly, instead of working with a `try`/`except` clause? It is possible to doctest exceptions:

```
            sage: # something raising an exception
            Traceback (most recent call last):
            ...
            NotImplementedError
```



---

archive/issue_comments_164605.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nInterface-wise, it would be nice to expose the different styles of automorphism groups from linear code as\n\n```\n    @cached_method\n    def automorphism_group(self, morphisms=\"semilinear\"):\n       ...\n```\nand return the actual automorphism group, not a list of generators and order. For that, you'd have to implement subgroups of the semimonomial transformation groups as a parent, but that ought to be easy: Just derive from the parent and override as necessary. We probably should have some infrastructure to make subgroups easier to construct (but that is material for another ticket). Then you wouldn't need `_canonize`.\n\nThe implementation looks good to me, can anybody who is actually working on something related to coding theory have a look?",
    "created_at": "2013-10-23T10:50:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13771#issuecomment-164605",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:12" align="right">Comment 12</div>

Interface-wise, it would be nice to expose the different styles of automorphism groups from linear code as

```
    @cached_method
    def automorphism_group(self, morphisms="semilinear"):
       ...
```
and return the actual automorphism group, not a list of generators and order. For that, you'd have to implement subgroups of the semimonomial transformation groups as a parent, but that ought to be easy: Just derive from the parent and override as necessary. We probably should have some infrastructure to make subgroups easier to construct (but that is material for another ticket). Then you wouldn't need `_canonize`.

The implementation looks good to me, can anybody who is actually working on something related to coding theory have a look?



---

archive/issue_comments_164606.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nCould you explain what \n\n```\nFinally, it can also deal with the action of subgroups of the semimonomial group.\n```\nmeans? E.g. can you find the canonical form which does not take the ring automorphisms into account? (This would be natural is some settings, I suppose).",
    "created_at": "2013-10-23T14:59:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13771#issuecomment-164606",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:13" align="right">Comment 13</div>

Could you explain what 

```
Finally, it can also deal with the action of subgroups of the semimonomial group.
```
means? E.g. can you find the canonical form which does not take the ring automorphisms into account? (This would be natural is some settings, I suppose).



---

archive/issue_comments_164607.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nIf you look at the docstring of `class LinearCodeAutGroupCanLabel` then you'll see. There is just permutations and only linear maps as subgroups, but currently you need to dig into the innards to construct them.",
    "created_at": "2013-10-23T15:10:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13771#issuecomment-164607",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:14" align="right">Comment 14</div>

If you look at the docstring of `class LinearCodeAutGroupCanLabel` then you'll see. There is just permutations and only linear maps as subgroups, but currently you need to dig into the innards to construct them.



---

archive/issue_comments_164608.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nReplying to [@vbraun](#comment%3A14):\n> If you look at the docstring of `class LinearCodeAutGroupCanLabel` then you'll see. There is just permutations and only linear maps as subgroups, but currently you need to dig into the innards to construct them.\n\nIf the same algorithm works for any (or some other nontrivial well-defined class, e.g. the normal subgroups) of the subgroups of the semimonomial group, then there should be a proper interface for this exposed.",
    "created_at": "2013-10-23T15:28:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13771#issuecomment-164608",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:15" align="right">Comment 15</div>

Replying to [@vbraun](#comment%3A14):
> If you look at the docstring of `class LinearCodeAutGroupCanLabel` then you'll see. There is just permutations and only linear maps as subgroups, but currently you need to dig into the innards to construct them.

If the same algorithm works for any (or some other nontrivial well-defined class, e.g. the normal subgroups) of the subgroups of the semimonomial group, then there should be a proper interface for this exposed.



---

archive/issue_comments_164609.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nReplying to [@vbraun](#comment%3A12):\n> Interface-wise, it would be nice to expose the different styles of automorphism groups from linear code as\n> \n> ```\n>     @cached_method\n>     def automorphism_group(self, morphisms=\"semilinear\"):\n>        ...\n> ```\n\nYou are right, it would be nice to distinguish these different notions of equivalence in\n`automorhpism_group` and also in `canonical_representative`. I will change that.\nThere is also the possibility to restrict the permutational part of the action to Young subgroups.\nThis is non-standard, should I provide an interface for that, too?\n\n> Then you wouldn't need `_canonize`.\n\nMy algorithm computes the canonical representative and the automorphism group at the same time. Therefore I thought that I have to implement the method `_canonize`, which guarantees that the computation is carried out only once. But I think, I should define\n\n```\n     @cached_method\n     def _canonize(self, equivalence=\"semilinear\"):\n     ...\n```\ninstead and `automorphism_group` and `canonical_representative` need not to be cached.\n> and return the actual automorphism group, not a list of generators and order. For that, you'd have to implement subgroups of the semimonomial transformation groups as a parent ...\n\nI agree, but I am not sure how difficult this task will become. I am not working in academia anymore, so I am not sure if I will find enough time. Maybe we could open a seperate ticket with someone else being responsible?",
    "created_at": "2013-10-24T06:43:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13771#issuecomment-164609",
    "user": "https://github.com/sagetrac-tfeulner"
}
```

<div id="comment:16" align="right">Comment 16</div>

Replying to [@vbraun](#comment%3A12):
> Interface-wise, it would be nice to expose the different styles of automorphism groups from linear code as
> 
> ```
>     @cached_method
>     def automorphism_group(self, morphisms="semilinear"):
>        ...
> ```

You are right, it would be nice to distinguish these different notions of equivalence in
`automorhpism_group` and also in `canonical_representative`. I will change that.
There is also the possibility to restrict the permutational part of the action to Young subgroups.
This is non-standard, should I provide an interface for that, too?

> Then you wouldn't need `_canonize`.

My algorithm computes the canonical representative and the automorphism group at the same time. Therefore I thought that I have to implement the method `_canonize`, which guarantees that the computation is carried out only once. But I think, I should define

```
     @cached_method
     def _canonize(self, equivalence="semilinear"):
     ...
```
instead and `automorphism_group` and `canonical_representative` need not to be cached.
> and return the actual automorphism group, not a list of generators and order. For that, you'd have to implement subgroups of the semimonomial transformation groups as a parent ...

I agree, but I am not sure how difficult this task will become. I am not working in academia anymore, so I am not sure if I will find enough time. Maybe we could open a seperate ticket with someone else being responsible?



---

archive/issue_comments_164610.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nReplying to [@jdemeyer](#comment%3A11):\n> Why don't you test the exception directly, instead of working with a `try`/`except` clause? It is possible to doctest exceptions:\n> \n> ```\n>             sage: # something raising an exception\n>             Traceback (most recent call last):\n>             ...\n>             NotImplementedError\n> ```\n\nI have no idea, why I did this... I changed it.\n\nThe new version also provides an interface to the algorithm started for different notions of equivalence.",
    "created_at": "2013-10-24T08:55:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13771#issuecomment-164610",
    "user": "https://github.com/sagetrac-tfeulner"
}
```

<div id="comment:17" align="right">Comment 17</div>

Replying to [@jdemeyer](#comment%3A11):
> Why don't you test the exception directly, instead of working with a `try`/`except` clause? It is possible to doctest exceptions:
> 
> ```
>             sage: # something raising an exception
>             Traceback (most recent call last):
>             ...
>             NotImplementedError
> ```

I have no idea, why I did this... I changed it.

The new version also provides an interface to the algorithm started for different notions of equivalence.



---

archive/issue_comments_164611.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nMy point with the `automorphism_group` was mainly that its bad to make backwards-incompatible changes. If we implement the various subgroups properly then we would want to return the actual group and not a pair (generators, order). Its perfectly fine to leave that for future work, of course. How about we call it `automorphism_group_gens` or something like that, then we can in the future implement `automorphism_group` returning an actual group. \n\nApart from that looks good... Dima, did you take a look at the code?",
    "created_at": "2013-10-24T20:44:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13771#issuecomment-164611",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:18" align="right">Comment 18</div>

My point with the `automorphism_group` was mainly that its bad to make backwards-incompatible changes. If we implement the various subgroups properly then we would want to return the actual group and not a pair (generators, order). Its perfectly fine to leave that for future work, of course. How about we call it `automorphism_group_gens` or something like that, then we can in the future implement `automorphism_group` returning an actual group. 

Apart from that looks good... Dima, did you take a look at the code?



---

archive/issue_comments_164612.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nJust saw this mentioned on sage-combinat-devel; sorry I can't be of any actual help, so I thought I'll just drop a few remarks...\n\ntfeulner: Given that you reference your thesis in the code, wouldn't it make sense to put it online on, say, arXiv?\n\nI don't understand what `_cyclic_shift` is supposed to do. What is being cycled? If you want to get a cyclic permutation, why the `+ 1`'s in:\n\n```\n \t122\t        x[p[i - 1]] = p[i] + 1 \n \t123\t    x[p[len(p) - 1]] = p[0] + 1 \n```\n\n\"quadrupel\" should be \"quadruple\".\n\n```\n \t45\t    For every `i \\in \\{0, \\ldots, n-1\\}` \n \t46\t    there is a group `G^{(i)}` and a surjective group homomorphism `f^{(i)}: G \n \t47\t    \\rightarrow G^{(i)}` such that `(f^{(i)}, \\Pi^{(i)})` is a homomorphism of \n \t48\t    group actions where `\\Pi^{(i)}: X^n \\rightarrow X` is the projection to \n \t49\t    the `i`-th coordinate.\n```\nIsn't this a rather complicated way to say that the action of `G \\rtimes \\{id\\}` on `X^n` is given by a direct product of several `G`-sets `X` ? I agree that the above is more precise, but can't you at least get rid of the `G^{(i)}` by assuming it to be `G` right away?",
    "created_at": "2013-10-25T02:31:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13771#issuecomment-164612",
    "user": "https://github.com/darijgr"
}
```

<div id="comment:19" align="right">Comment 19</div>

Just saw this mentioned on sage-combinat-devel; sorry I can't be of any actual help, so I thought I'll just drop a few remarks...

tfeulner: Given that you reference your thesis in the code, wouldn't it make sense to put it online on, say, arXiv?

I don't understand what `_cyclic_shift` is supposed to do. What is being cycled? If you want to get a cyclic permutation, why the `+ 1`'s in:

```
 	122	        x[p[i - 1]] = p[i] + 1 
 	123	    x[p[len(p) - 1]] = p[0] + 1 
```

"quadrupel" should be "quadruple".

```
 	45	    For every `i \in \{0, \ldots, n-1\}` 
 	46	    there is a group `G^{(i)}` and a surjective group homomorphism `f^{(i)}: G 
 	47	    \rightarrow G^{(i)}` such that `(f^{(i)}, \Pi^{(i)})` is a homomorphism of 
 	48	    group actions where `\Pi^{(i)}: X^n \rightarrow X` is the projection to 
 	49	    the `i`-th coordinate.
```
Isn't this a rather complicated way to say that the action of `G \rtimes \{id\}` on `X^n` is given by a direct product of several `G`-sets `X` ? I agree that the above is more precise, but can't you at least get rid of the `G^{(i)}` by assuming it to be `G` right away?



---

archive/issue_comments_164613.json:
```json
{
    "body": "Attachment: **[trac_13771-canonical_forms_linear_code.patch.gz](https://github.com/sagemath/sage/files/ticket13771/trac_13771-canonical_forms_linear_code.patch.gz)**",
    "created_at": "2013-10-28T09:51:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13771#issuecomment-164613",
    "user": "https://github.com/sagetrac-tfeulner"
}
```

Attachment: **[trac_13771-canonical_forms_linear_code.patch.gz](https://github.com/sagemath/sage/files/ticket13771/trac_13771-canonical_forms_linear_code.patch.gz)**



---

archive/issue_comments_164614.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nReplying to [@darijgr](#comment%3A19):\n\nThanks for your comments, darij and Volker. I have changed the corresponding lines in the new patch.\n\n> tfeulner: Given that you reference your thesis in the code, wouldn't it make sense to put it online on, say, arXiv?\n\nAt the moment, it is getting reviewed. The final version will be published online by the university,  maybe in about three months.",
    "created_at": "2013-10-28T09:58:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13771#issuecomment-164614",
    "user": "https://github.com/sagetrac-tfeulner"
}
```

<div id="comment:20" align="right">Comment 20</div>

Replying to [@darijgr](#comment%3A19):

Thanks for your comments, darij and Volker. I have changed the corresponding lines in the new patch.

> tfeulner: Given that you reference your thesis in the code, wouldn't it make sense to put it online on, say, arXiv?

At the moment, it is getting reviewed. The final version will be published online by the university,  maybe in about three months.



---

archive/issue_comments_164615.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nSome weeks passed, I just want to bring this ticket back to your minds.",
    "created_at": "2013-11-23T08:02:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13771#issuecomment-164615",
    "user": "https://github.com/sagetrac-tfeulner"
}
```

<div id="comment:21" align="right">Comment 21</div>

Some weeks passed, I just want to bring this ticket back to your minds.



---

archive/issue_comments_164616.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nDima, are you reviewing this ticket?\n\nIf not then I'll merge it, code looks good and is better than what we have (i.e. nothing).",
    "created_at": "2013-12-23T15:16:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13771#issuecomment-164616",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:22" align="right">Comment 22</div>

Dima, are you reviewing this ticket?

If not then I'll merge it, code looks good and is better than what we have (i.e. nothing).



---

archive/issue_comments_164617.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nReplying to [@vbraun](#comment%3A22):\n> Dima, are you reviewing this ticket?\n> \n> If not then I'll merge it, code looks good and is better than what we have (i.e. nothing). \n\nNo, I am not. Please merge this.",
    "created_at": "2013-12-23T15:25:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13771#issuecomment-164617",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:23" align="right">Comment 23</div>

Replying to [@vbraun](#comment%3A22):
> Dima, are you reviewing this ticket?
> 
> If not then I'll merge it, code looks good and is better than what we have (i.e. nothing). 

No, I am not. Please merge this.



---

archive/issue_comments_164618.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nDoes not apply to the latest Sage-6, please rebase.\n\nBuild sage-git and then run\n\n```\nsage -dev import-patch --url http://trac.sagemath.org/raw-attachment/ticket/13771/trac_13771-canonical_forms_linear_code.patch\n```",
    "created_at": "2013-12-23T15:43:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13771#issuecomment-164618",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:24" align="right">Comment 24</div>

Does not apply to the latest Sage-6, please rebase.

Build sage-git and then run

```
sage -dev import-patch --url http://trac.sagemath.org/raw-attachment/ticket/13771/trac_13771-canonical_forms_linear_code.patch
```



---

archive/issue_comments_164619.json:
```json
{
    "body": "Changed dependencies from **#13726** to **#13726, #15576**",
    "created_at": "2013-12-26T09:47:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13771#issuecomment-164619",
    "user": "https://github.com/sagetrac-tfeulner"
}
```

Changed dependencies from **#13726** to **#13726, #15576**



---

archive/issue_comments_164620.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nDear Volker,\n\nThanks for this decision.\n\nBefore rebasing this ticket, I will work on #15576 and see if some changes will be necessary.",
    "created_at": "2013-12-26T09:47:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13771#issuecomment-164620",
    "user": "https://github.com/sagetrac-tfeulner"
}
```

<div id="comment:25" align="right">Comment 25</div>

Dear Volker,

Thanks for this decision.

Before rebasing this ticket, I will work on #15576 and see if some changes will be necessary.



---

archive/issue_comments_164621.json:
```json
{
    "body": "Branch: **[u/tfeulner/ticket/13771](https://github.com/sagemath/sagetrac-mirror/tree/u/tfeulner/ticket/13771)**",
    "created_at": "2013-12-31T15:38:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13771#issuecomment-164621",
    "user": "https://github.com/sagetrac-tfeulner"
}
```

Branch: **[u/tfeulner/ticket/13771](https://github.com/sagemath/sagetrac-mirror/tree/u/tfeulner/ticket/13771)**



---

archive/issue_comments_164622.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\nReplying to [@vbraun](#comment%3A24):\n\nrebased to sage-6.1.beta2\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ae9acc6\">ae9acc6</a></td><td><code>Rebased on sage-6.1.beta2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/82d2c10\">82d2c10</a></td><td><code># User Thomas Feulner <thomas.feulner@uni-bayreuth.de></code></td></tr></table>\n",
    "created_at": "2013-12-31T15:48:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13771#issuecomment-164622",
    "user": "https://github.com/sagetrac-tfeulner"
}
```

<div id="comment:27" align="right">Comment 27</div>

Replying to [@vbraun](#comment%3A24):

rebased to sage-6.1.beta2

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ae9acc6">ae9acc6</a></td><td><code>Rebased on sage-6.1.beta2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/82d2c10">82d2c10</a></td><td><code># User Thomas Feulner <thomas.feulner@uni-bayreuth.de></code></td></tr></table>




---

archive/issue_comments_164623.json:
```json
{
    "body": "Commit: **[ae9acc6](https://github.com/sagemath/sagetrac-mirror/commit/ae9acc60bd7368bda5771a4f2e7b6051934bc2d4)**",
    "created_at": "2013-12-31T15:48:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13771#issuecomment-164623",
    "user": "https://github.com/sagetrac-tfeulner"
}
```

Commit: **[ae9acc6](https://github.com/sagemath/sagetrac-mirror/commit/ae9acc60bd7368bda5771a4f2e7b6051934bc2d4)**



---

archive/issue_comments_164624.json:
```json
{
    "body": "Reviewer: **Volker Braun**",
    "created_at": "2014-01-04T04:20:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13771#issuecomment-164624",
    "user": "https://github.com/vbraun"
}
```

Reviewer: **Volker Braun**



---

archive/issue_events_177122.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-01-05T00:32:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13771",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13771#event-177122"
}
```



---

archive/issue_events_177123.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "fd76065bb58b3f7ea296cc6304217347cde95b7e",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-01-05T00:32:20Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/13771",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13771#event-177123"
}
```
