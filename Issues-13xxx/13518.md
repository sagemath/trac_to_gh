# Issue 13518: Additions for sensitivity analysis in glpk_backend

archive/issues_013314.json:
```json
{
    "body": "The GNU Linear Programming Kit (GLPK) provides functions to which SAGE currently does not provide access. These include:\n\n* Sensitivity analysis\n\nThe following enhancements might be helpful:\n\n* Access to glp_print_ranges to store results of a sensitivity analysis in a file\n* Access to GLPK function for getting shadow prices and reduced costs\n\nApply:\n\n* [attachment:trac_13518_sens_analysis_imp.patch]\n\nAssignee: jason, jkantor\n\nCC:  @johnperry-math @nathanncohen\n\nKeywords: sensitivity analysis, lp, linear programming\n\nReviewer: Nathann Cohen\n\nAuthor: Christian Kuper\n\nMerged: sage-5.6.beta1\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/13518\n\n",
    "closed_at": "2012-12-21T09:31:56Z",
    "created_at": "2012-09-22T10:09:10Z",
    "labels": [
        "component: numerical"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.6",
    "title": "Additions for sensitivity analysis in glpk_backend",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13518",
    "user": "https://trac.sagemath.org/admin/accounts/users/christiankuper"
}
```
The GNU Linear Programming Kit (GLPK) provides functions to which SAGE currently does not provide access. These include:

* Sensitivity analysis

The following enhancements might be helpful:

* Access to glp_print_ranges to store results of a sensitivity analysis in a file
* Access to GLPK function for getting shadow prices and reduced costs

Apply:

* [attachment:trac_13518_sens_analysis_imp.patch]

Assignee: jason, jkantor

CC:  @johnperry-math @nathanncohen

Keywords: sensitivity analysis, lp, linear programming

Reviewer: Nathann Cohen

Author: Christian Kuper

Merged: sage-5.6.beta1

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/13518





---

archive/issue_comments_174097.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-09-23T11:46:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13518#issuecomment-174097",
    "user": "https://trac.sagemath.org/admin/accounts/users/christiankuper"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_174098.json:
```json
{
    "body": "<a id='comment:2'></a>I have reworked the patch (which was originally written for Sage 4.8) for 5.3. In addition access to the max_flow algo has been implemented.",
    "created_at": "2012-10-20T18:15:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13518#issuecomment-174098",
    "user": "https://trac.sagemath.org/admin/accounts/users/christiankuper"
}
```

<a id='comment:2'></a>I have reworked the patch (which was originally written for Sage 4.8) for 5.3. In addition access to the max_flow algo has been implemented.



---

archive/issue_comments_174099.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,9 +8,8 @@\n * Access to glp_print_ranges to store results of a sensitivity analysis in a file\n * Access to GLPK function for getting shadow prices and reduced costs\n * Access to the out-of-kilter algo\n-* An interface for the easy sue of the out-of-kilter algorithm\n-\n-Keywords: out-of-kilter, sensitivity analysis, lp, linear programming\n+* Access to the max_flow algorithm\n+* An interface for the easy use of the out-of-kilter algorithm\n \n Author: Christian Kuper\n \n``````\n",
    "created_at": "2012-10-20T18:22:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13518#issuecomment-174099",
    "user": "https://trac.sagemath.org/admin/accounts/users/christiankuper"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,9 +8,8 @@
 * Access to glp_print_ranges to store results of a sensitivity analysis in a file
 * Access to GLPK function for getting shadow prices and reduced costs
 * Access to the out-of-kilter algo
-* An interface for the easy sue of the out-of-kilter algorithm
-
-Keywords: out-of-kilter, sensitivity analysis, lp, linear programming
+* Access to the max_flow algorithm
+* An interface for the easy use of the out-of-kilter algorithm
 
 Author: Christian Kuper
 
``````




---

archive/issue_comments_174100.json:
```json
{
    "body": "<a id='comment:4'></a>Hello Christian. Let's make this straight from the beginning : I am very happy that you want to contribute to Sage, but what we are doing here is write a software, not your resume. In your patch there are 11 additions of your name inside of Sage's code. You add it to the documentation, you add it to the source code as comments, you even add it before 3 lines in a .pxd file where you import stuff from a library.\n\nNow Sage is a free software, and everybody's work should be credited indeed. Your name will appear in Sage's release notes, it will appear on this website. That's enough. We're not about to add our name to Sage's source code each time we add one line, and the reason why you can still read this file is that we don't.\n\nWell. You have not set this ticket to \"needs_review\", and judging from things like \n\n```\nsage: p.write_ccdata(\"/home/chris/graph.dat\") \n```\n\nit looks like you are still working on it. I will be glad to help with the review proces when it will be ready (or even before, or whenever needed), but in the meantime please try to imitate the writing style of the source code in its current state.\n\nNathann",
    "created_at": "2012-10-20T22:42:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13518#issuecomment-174100",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:4'></a>Hello Christian. Let's make this straight from the beginning : I am very happy that you want to contribute to Sage, but what we are doing here is write a software, not your resume. In your patch there are 11 additions of your name inside of Sage's code. You add it to the documentation, you add it to the source code as comments, you even add it before 3 lines in a .pxd file where you import stuff from a library.

Now Sage is a free software, and everybody's work should be credited indeed. Your name will appear in Sage's release notes, it will appear on this website. That's enough. We're not about to add our name to Sage's source code each time we add one line, and the reason why you can still read this file is that we don't.

Well. You have not set this ticket to "needs_review", and judging from things like 

```
sage: p.write_ccdata("/home/chris/graph.dat") 
```

it looks like you are still working on it. I will be glad to help with the review proces when it will be ready (or even before, or whenever needed), but in the meantime please try to imitate the writing style of the source code in its current state.

Nathann



---

archive/issue_comments_174101.json:
```json
{
    "body": "<a id='comment:5'></a>Hello Nathann. Thanks for the feedback - comments are well taken. Actually, I thought making changes visible would be helpful for the review process, the intention was not gaining credits. As it is my first contribution please excuse this \"newbie\" error. I will follow you advice and rework the code.\n\nChristian\n\n\n> Hello Christian. Let's make this straight from the beginning : I am very happy that you want to contribute to Sage, but what we are doing here is write a software, not your resume. In your patch there are 11 additions of your name inside of Sage's code. You add it to the documentation, you add it to the source code as comments, you even add it before 3 lines in a .pxd file where you import stuff from a library.\n> \n> Now Sage is a free software, and everybody's work should be credited indeed. Your name will appear in Sage's release notes, it will appear on this website. That's enough. We're not about to add our name to Sage's source code each time we add one line, and the reason why you can still read this file is that we don't.\n> \n> Well. You have not set this ticket to \"needs_review\", and judging from things like \n> \n> \n> ```\n> sage: p.write_ccdata(\"/home/chris/graph.dat\") \n> ```\n> \n> it looks like you are still working on it. I will be glad to help with the review proces when it will be ready (or even before, or whenever needed), but in the meantime please try to imitate the writing style of the source code in its current state.\n> \n> Nathann",
    "created_at": "2012-10-21T09:12:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13518#issuecomment-174101",
    "user": "https://trac.sagemath.org/admin/accounts/users/christiankuper"
}
```

<a id='comment:5'></a>Hello Nathann. Thanks for the feedback - comments are well taken. Actually, I thought making changes visible would be helpful for the review process, the intention was not gaining credits. As it is my first contribution please excuse this "newbie" error. I will follow you advice and rework the code.

Christian


> Hello Christian. Let's make this straight from the beginning : I am very happy that you want to contribute to Sage, but what we are doing here is write a software, not your resume. In your patch there are 11 additions of your name inside of Sage's code. You add it to the documentation, you add it to the source code as comments, you even add it before 3 lines in a .pxd file where you import stuff from a library.
> 
> Now Sage is a free software, and everybody's work should be credited indeed. Your name will appear in Sage's release notes, it will appear on this website. That's enough. We're not about to add our name to Sage's source code each time we add one line, and the reason why you can still read this file is that we don't.
> 
> Well. You have not set this ticket to "needs_review", and judging from things like 
> 
> 
> ```
> sage: p.write_ccdata("/home/chris/graph.dat") 
> ```
> 
> it looks like you are still working on it. I will be glad to help with the review proces when it will be ready (or even before, or whenever needed), but in the meantime please try to imitate the writing style of the source code in its current state.
> 
> Nathann



---

archive/issue_comments_174102.json:
```json
{
    "body": "<a id='comment:6'></a>Helloooooooooo Christian !\n\nWell, I asked a friend of mine about the message I sent yesterday -- as I customarily get angry over trivial things -- and it looks like it was one of these times again... Sage is one of the few things people still work on for pleasure and not for money or anything, and these things are really hard to find right now, so... `^^;`\n\nAbout your patch : it is very large, and because it is one your first there are many things to fix (trivial things that Sage developpers agreed were necessary in a patch), and because your patch is so long... It shows. But we'll fix that ! `:-)`\n\nThere are actually two important things to keep in mind :\n* All the examples that are given in Sage's source code (inside of each function) are used both by users when they wonder how the method should be used, but also to automatically test sage. Before it is release, we run \"sage -t \" on every file, and all tests have to pass. And no patch is accepted whose \"doctests\" fail to pass. And of course a command like p.write_ccdata(\"/home/chris/graph.dat\") is only valid on your computer. There's no /home/chris/ directory on mine ! Hence \n\n```\nsage -b && sage -t glpk_backend.pyx\n```\n    would not pass tests on my computer.  And all files should pass tests.\n* The documentation that you write in each function is useful in this text version, but it is also (badly) compiled to a html doc. That's how : \n\n```\nsage -b && sage -docbuild reference html\n```\n    And of course the documentation should also be nicely displayed in this html files. Sometimes one forgets to use `::` instead of `:`, and the documentation misses something \n\nOnce more, do you consider your file needing a review or not yet ? It's not a big decision to take : I just wonder whether I should spend the time necessary to read, understand and make comments on your patch right now, or whether you still work on the file at the moment. Actually, it would be nice if you could try to fix those two things : documentation and doctests, upate your patch, and then we'll begin the review.\n\nHave fuuuuuuuun ! And thank you for your patch `:-)`\n\nNathann",
    "created_at": "2012-10-21T09:25:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13518#issuecomment-174102",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:6'></a>Helloooooooooo Christian !

Well, I asked a friend of mine about the message I sent yesterday -- as I customarily get angry over trivial things -- and it looks like it was one of these times again... Sage is one of the few things people still work on for pleasure and not for money or anything, and these things are really hard to find right now, so... `^^;`

About your patch : it is very large, and because it is one your first there are many things to fix (trivial things that Sage developpers agreed were necessary in a patch), and because your patch is so long... It shows. But we'll fix that ! `:-)`

There are actually two important things to keep in mind :
* All the examples that are given in Sage's source code (inside of each function) are used both by users when they wonder how the method should be used, but also to automatically test sage. Before it is release, we run "sage -t " on every file, and all tests have to pass. And no patch is accepted whose "doctests" fail to pass. And of course a command like p.write_ccdata("/home/chris/graph.dat") is only valid on your computer. There's no /home/chris/ directory on mine ! Hence 

```
sage -b && sage -t glpk_backend.pyx
```
    would not pass tests on my computer.  And all files should pass tests.
* The documentation that you write in each function is useful in this text version, but it is also (badly) compiled to a html doc. That's how : 

```
sage -b && sage -docbuild reference html
```
    And of course the documentation should also be nicely displayed in this html files. Sometimes one forgets to use `::` instead of `:`, and the documentation misses something 

Once more, do you consider your file needing a review or not yet ? It's not a big decision to take : I just wonder whether I should spend the time necessary to read, understand and make comments on your patch right now, or whether you still work on the file at the moment. Actually, it would be nice if you could try to fix those two things : documentation and doctests, upate your patch, and then we'll begin the review.

Have fuuuuuuuun ! And thank you for your patch `:-)`

Nathann



---

archive/issue_comments_174103.json:
```json
{
    "body": "<a id='comment:7'></a>Oh, and also : when you want to see what a patch changes in a file, there's something much easier that adding hints in the cod... Just look at the .patch file. For instance, reading this is very explicit already `:-)`\nhttp://trac.sagemath.org/sage_trac/attachment/ticket/13518/trac_13518_imp_for_sage5_3.patch\n\nNathann",
    "created_at": "2012-10-21T09:27:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13518#issuecomment-174103",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:7'></a>Oh, and also : when you want to see what a patch changes in a file, there's something much easier that adding hints in the cod... Just look at the .patch file. For instance, reading this is very explicit already `:-)`
http://trac.sagemath.org/sage_trac/attachment/ticket/13518/trac_13518_imp_for_sage5_3.patch

Nathann



---

archive/issue_comments_174104.json:
```json
{
    "body": "<a id='comment:8'></a>OOps, and another thing I forgot. It's a tool to tell you whether you forgot to add a doctest to some method in Sage :\n\n```\nsage -coverage file.pyx\n```\n\nNathann",
    "created_at": "2012-10-21T09:29:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13518#issuecomment-174104",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:8'></a>OOps, and another thing I forgot. It's a tool to tell you whether you forgot to add a doctest to some method in Sage :

```
sage -coverage file.pyx
```

Nathann



---

archive/issue_comments_174105.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-10-21T10:09:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13518#issuecomment-174105",
    "user": "https://trac.sagemath.org/admin/accounts/users/christiankuper"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_174106.json:
```json
{
    "body": "<a id='comment:10'></a>> Once more, do you consider your file needing a review or not yet ? It's not a big decision to take : I just wonder whether I should spend the time necessary to read, understand and make comments on your patch right now, or whether you still work on the file at the moment. Actually, it would be nice if you could try to fix those two things : documentation and doctests, upate your patch, and then we'll begin the review.\n\n\nThanks for you very helpful input. Before you or anybody else spending time on reviewing I will need to fix quite a number of things, thereroe I changed the status to \"needs work\".\n\nThanks again\n\nChristian",
    "created_at": "2012-10-21T10:15:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13518#issuecomment-174106",
    "user": "https://trac.sagemath.org/admin/accounts/users/christiankuper"
}
```

<a id='comment:10'></a>> Once more, do you consider your file needing a review or not yet ? It's not a big decision to take : I just wonder whether I should spend the time necessary to read, understand and make comments on your patch right now, or whether you still work on the file at the moment. Actually, it would be nice if you could try to fix those two things : documentation and doctests, upate your patch, and then we'll begin the review.


Thanks for you very helpful input. Before you or anybody else spending time on reviewing I will need to fix quite a number of things, thereroe I changed the status to "needs work".

Thanks again

Christian



---

archive/issue_comments_174107.json:
```json
{
    "body": "<a id='comment:11'></a>> Before you or anybody else spending time on reviewing I will need to fix quite a number of things, thereroe I changed the status to \"needs work\".\n\n\nNice ! If I can be of any help in the meantime, send me an email `:-)`\n\nNathann",
    "created_at": "2012-10-21T10:17:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13518#issuecomment-174107",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:11'></a>> Before you or anybody else spending time on reviewing I will need to fix quite a number of things, thereroe I changed the status to "needs work".


Nice ! If I can be of any help in the meantime, send me an email `:-)`

Nathann



---

archive/issue_comments_174108.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,11 @@\n+The GNU Linear Programming Kit (GLPK) provides functions to which SAGE currently does not provide access. These include:\n \n+* Sensitivity analysis\n+\n+The following enhancements might be helpful:\n+\n+* Access to glp_print_ranges to store results of a sensitivity analysis in a file\n+* Access to GLPK function for getting shadow prices and reduced costs\n \n Author: Christian Kuper\n \n``````\n",
    "created_at": "2012-11-10T17:25:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13518#issuecomment-174108",
    "user": "https://trac.sagemath.org/admin/accounts/users/christiankuper"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,11 @@
+The GNU Linear Programming Kit (GLPK) provides functions to which SAGE currently does not provide access. These include:
 
+* Sensitivity analysis
+
+The following enhancements might be helpful:
+
+* Access to glp_print_ranges to store results of a sensitivity analysis in a file
+* Access to GLPK function for getting shadow prices and reduced costs
 
 Author: Christian Kuper
 
``````




---

archive/issue_comments_174109.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-11-10T17:28:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13518#issuecomment-174109",
    "user": "https://trac.sagemath.org/admin/accounts/users/christiankuper"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_174110.json:
```json
{
    "body": "<a id='comment:15'></a>Helloooooooo Christian ! \n\nThank you for this updated patch !\n\nWell, there is not much to say at this level...\n\n* There's a double '-' before your name at the beginning of the file\n* Thank you for the lp->mps fix.. Could you also change the filename, which currently ends with .lp ?\n* It feels a bit weird to have a print_* method that does not print anything but writes the output to a file. Of course that's how the GLPK function is named, so it makes sense... What would you think of modifying it just a bit so that it can also \"PRINT\" the information that is being written to a file ? Something like, by default, write the information to a file and print it, unless the user explicitely wants the information to be written to a file, not displayed ? I can do that in another patch if you like the idea and don't want to spend time on it.\n* What about just having ``get_row_dual`` and not ``get_constraint_shadow_price``, which is just an alias to it anyway ? Besides, get_row_dual is how the GLPK function is named, and this method's docstring can mention what a shadow price is at the same time ? And the same goes for cols.\n* In the documentation of get_backend, why do you put ``instance`` inside of quotes ? We usually do this for python expressions.\n\nThank you agaiiiiiiiiiiin ! `:-)`\n\nNathann",
    "created_at": "2012-11-11T01:42:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13518#issuecomment-174110",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:15'></a>Helloooooooo Christian ! 

Thank you for this updated patch !

Well, there is not much to say at this level...

* There's a double '-' before your name at the beginning of the file
* Thank you for the lp->mps fix.. Could you also change the filename, which currently ends with .lp ?
* It feels a bit weird to have a print_* method that does not print anything but writes the output to a file. Of course that's how the GLPK function is named, so it makes sense... What would you think of modifying it just a bit so that it can also "PRINT" the information that is being written to a file ? Something like, by default, write the information to a file and print it, unless the user explicitely wants the information to be written to a file, not displayed ? I can do that in another patch if you like the idea and don't want to spend time on it.
* What about just having ``get_row_dual`` and not ``get_constraint_shadow_price``, which is just an alias to it anyway ? Besides, get_row_dual is how the GLPK function is named, and this method's docstring can mention what a shadow price is at the same time ? And the same goes for cols.
* In the documentation of get_backend, why do you put ``instance`` inside of quotes ? We usually do this for python expressions.

Thank you agaiiiiiiiiiiin ! `:-)`

Nathann



---

archive/issue_comments_174111.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-11-11T01:42:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13518#issuecomment-174111",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_174112.json:
```json
{
    "body": "<a id='comment:16'></a>Replying to [comment:15 ncohen]:\n\nHello Nathann,\n\nthank you for your fast feedback. All your comments are convincing, I will rework the patch accordingly. (Might take a few days as I will not have much time during next week). The suggestion regarding the \"PRINT\" function is really cool!\n\nThanks again!!!\n\nChristian",
    "created_at": "2012-11-11T11:38:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13518#issuecomment-174112",
    "user": "https://trac.sagemath.org/admin/accounts/users/christiankuper"
}
```

<a id='comment:16'></a>Replying to [comment:15 ncohen]:

Hello Nathann,

thank you for your fast feedback. All your comments are convincing, I will rework the patch accordingly. (Might take a few days as I will not have much time during next week). The suggestion regarding the "PRINT" function is really cool!

Thanks again!!!

Christian



---

archive/issue_comments_174113.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-11-18T18:11:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13518#issuecomment-174113",
    "user": "https://trac.sagemath.org/admin/accounts/users/christiankuper"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_174114.json:
```json
{
    "body": "<a id='comment:18'></a>Replying to [comment:15 ncohen]:\n> * There's a double '-' before your name at the beginning of the file\n> * Thank you for the lp->mps fix.. Could you also change the filename, which currently ends with .lp ?\n> * It feels a bit weird to have a print_* method that does not print anything but writes the output to a file. Of course that's how the GLPK function is named, so it makes sense... What would you think of modifying it just a bit so that it can also \"PRINT\" the information that is being written to a file ? Something like, by default, write the information to a file and print it, unless the user explicitely wants the information to be written to a file, not displayed ? I can do that in another patch if you like the idea and don't want to spend time on it.\n> * What about just having ``get_row_dual`` and not ``get_constraint_shadow_price``, which is just an alias to it anyway ? Besides, get_row_dual is how the GLPK function is named, and this method's docstring can mention what a shadow price is at the same time ? And the same goes for cols.\n> * In the documentation of get_backend, why do you put ``instance`` inside of quotes ? We usually do this for python expressions.\n\n\nHello Nathann,\n\nI have implmented your suggested changes and updated it for Sage 5.4.\n\nLooking forward to your feedback!\n\nChristian",
    "created_at": "2012-11-18T18:14:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13518#issuecomment-174114",
    "user": "https://trac.sagemath.org/admin/accounts/users/christiankuper"
}
```

<a id='comment:18'></a>Replying to [comment:15 ncohen]:
> * There's a double '-' before your name at the beginning of the file
> * Thank you for the lp->mps fix.. Could you also change the filename, which currently ends with .lp ?
> * It feels a bit weird to have a print_* method that does not print anything but writes the output to a file. Of course that's how the GLPK function is named, so it makes sense... What would you think of modifying it just a bit so that it can also "PRINT" the information that is being written to a file ? Something like, by default, write the information to a file and print it, unless the user explicitely wants the information to be written to a file, not displayed ? I can do that in another patch if you like the idea and don't want to spend time on it.
> * What about just having ``get_row_dual`` and not ``get_constraint_shadow_price``, which is just an alias to it anyway ? Besides, get_row_dual is how the GLPK function is named, and this method's docstring can mention what a shadow price is at the same time ? And the same goes for cols.
> * In the documentation of get_backend, why do you put ``instance`` inside of quotes ? We usually do this for python expressions.


Hello Nathann,

I have implmented your suggested changes and updated it for Sage 5.4.

Looking forward to your feedback!

Christian



---

archive/issue_comments_174115.json:
```json
{
    "body": "<a id='comment:19'></a>Wow.. Thumbs up `:-)`\n\nThis patch is almost perfect : there is an occurrence of \"algorthm\" somewhere in the patch, and one line in the docstring of get_col_dual is very long too. Shot of that, I thought that the behaviour of the ``print_ranges`` method would be to display the table if no file argument is given, and to write it to the file (without displaying it) otherwise.\n\nWhat do you think ? I never used these methods before so I will trust that what you think is the best behaviour should be the one we implement in Sage.\n\nAfter this the ticket will be good to go `:-)`\n\nThank you again !\n\nNathann",
    "created_at": "2012-11-18T19:45:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13518#issuecomment-174115",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:19'></a>Wow.. Thumbs up `:-)`

This patch is almost perfect : there is an occurrence of "algorthm" somewhere in the patch, and one line in the docstring of get_col_dual is very long too. Shot of that, I thought that the behaviour of the ``print_ranges`` method would be to display the table if no file argument is given, and to write it to the file (without displaying it) otherwise.

What do you think ? I never used these methods before so I will trust that what you think is the best behaviour should be the one we implement in Sage.

After this the ticket will be good to go `:-)`

Thank you again !

Nathann



---

archive/issue_comments_174116.json:
```json
{
    "body": "<a id='comment:20'></a>Hello Nathann,\n\nthanks for your comments.\n\n> ...there is an occurrence of \"algorthm\" somewhere in the patch, \n\n\nI searched all over the place and could'nt find that typo :-(. I did find an \"algorithn\" in one place and replaced that. (I fear I am not a good proof reader ;-))\n\n> and one line in the docstring of get_col_dual is very long too. \n\n\nChanged that.\n\n> Shot of that, I thought that the behaviour of the ``print_ranges`` method would be to display the table if no file argument is given, and to write it to the file (without displaying it) otherwise.\n> \n\nYou're right, you suggestion is better due to the wide output of the analysis report and it gives more flexibility for applications. Implemented your approach.\n\nThanks a lot for your help.\n\nChristian",
    "created_at": "2012-11-23T19:29:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13518#issuecomment-174116",
    "user": "https://trac.sagemath.org/admin/accounts/users/christiankuper"
}
```

<a id='comment:20'></a>Hello Nathann,

thanks for your comments.

> ...there is an occurrence of "algorthm" somewhere in the patch, 


I searched all over the place and could'nt find that typo :-(. I did find an "algorithn" in one place and replaced that. (I fear I am not a good proof reader ;-))

> and one line in the docstring of get_col_dual is very long too. 


Changed that.

> Shot of that, I thought that the behaviour of the ``print_ranges`` method would be to display the table if no file argument is given, and to write it to the file (without displaying it) otherwise.
> 

You're right, you suggestion is better due to the wide output of the analysis report and it gives more flexibility for applications. Implemented your approach.

Thanks a lot for your help.

Christian



---

archive/issue_comments_174117.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,15 @@\n+The GNU Linear Programming Kit (GLPK) provides functions to which SAGE currently does not provide access. These include:\n \n+* Sensitivity analysis\n+\n+The following enhancements might be helpful:\n+\n+* Access to glp_print_ranges to store results of a sensitivity analysis in a file\n+* Access to GLPK function for getting shadow prices and reduced costs\n+\n+Apply:\n+\n+* [attachment:trac_13518_sens_analysis_imp.patch]\n \n Author: Christian Kuper\n \n``````\n",
    "created_at": "2012-11-24T23:39:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13518#issuecomment-174117",
    "user": "https://github.com/nathanncohen"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,15 @@
+The GNU Linear Programming Kit (GLPK) provides functions to which SAGE currently does not provide access. These include:
 
+* Sensitivity analysis
+
+The following enhancements might be helpful:
+
+* Access to glp_print_ranges to store results of a sensitivity analysis in a file
+* Access to GLPK function for getting shadow prices and reduced costs
+
+Apply:
+
+* [attachment:trac_13518_sens_analysis_imp.patch]
 
 Author: Christian Kuper
 
``````




---

archive/issue_comments_174118.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-11-24T23:39:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13518#issuecomment-174118",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_174119.json:
```json
{
    "body": "Changing keywords from \"out-of-kilter, sensitivity analysis, lp, linear programming\" to \"sensitivity analysis, lp, linear programming\".",
    "created_at": "2012-11-24T23:39:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13518#issuecomment-174119",
    "user": "https://github.com/nathanncohen"
}
```

Changing keywords from "out-of-kilter, sensitivity analysis, lp, linear programming" to "sensitivity analysis, lp, linear programming".



---

archive/issue_comments_174120.json:
```json
{
    "body": "<a id='comment:21'></a>Welllllllll.... Nothing else to say.. Passes all tests, looks totally perfect to me.. Great work ! Thank you very much `:-)`\n\nNathann",
    "created_at": "2012-11-24T23:39:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13518#issuecomment-174120",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:21'></a>Welllllllll.... Nothing else to say.. Passes all tests, looks totally perfect to me.. Great work ! Thank you very much `:-)`

Nathann



---

archive/issue_comments_174121.json:
```json
{
    "body": "<a id='comment:22'></a>Rebased to sage-5.5.rc0.",
    "created_at": "2012-12-16T15:32:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13518#issuecomment-174121",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:22'></a>Rebased to sage-5.5.rc0.



---

archive/issue_comments_174122.json:
```json
{
    "body": "<a id='comment:23'></a>On arando (32-bit Linux i686):\n\n```\nsage -t  --long -force_lib devel/sage/sage/numerical/mip.pyx\nWriting problem data to `/var/lib/buildbot/.sage/temp/arando/15990/lp_problem.mps'...\n17 records were written\nWriting problem data to `/var/lib/buildbot/.sage/temp/arando/15990/lp_problem.lp'...\n9 lines were written\nGLPK Simplex Optimizer, v4.44\n2 rows, 2 columns, 4 non-zeros\n*     0: obj =   7.000000000e+00  infeas =  0.000e+00 (0)\n*     2: obj =   9.400000000e+00  infeas =  0.000e+00 (0)\nOPTIMAL SOLUTION FOUND\n**********************************************************************\nFile \"/var/lib/buildbot/build/sage/arando-1/arando_full/build/sage-5.6.beta0/devel/sage-main/sage/numerical/mip.pyx\", line 1853:\n    sage: p.solve()\nExpected:\n    9.399999999999999\nGot:\n    9.4\n**********************************************************************\n```",
    "created_at": "2012-12-18T07:31:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13518#issuecomment-174122",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:23'></a>On arando (32-bit Linux i686):

```
sage -t  --long -force_lib devel/sage/sage/numerical/mip.pyx
Writing problem data to `/var/lib/buildbot/.sage/temp/arando/15990/lp_problem.mps'...
17 records were written
Writing problem data to `/var/lib/buildbot/.sage/temp/arando/15990/lp_problem.lp'...
9 lines were written
GLPK Simplex Optimizer, v4.44
2 rows, 2 columns, 4 non-zeros
*     0: obj =   7.000000000e+00  infeas =  0.000e+00 (0)
*     2: obj =   9.400000000e+00  infeas =  0.000e+00 (0)
OPTIMAL SOLUTION FOUND
**********************************************************************
File "/var/lib/buildbot/build/sage/arando-1/arando_full/build/sage-5.6.beta0/devel/sage-main/sage/numerical/mip.pyx", line 1853:
    sage: p.solve()
Expected:
    9.399999999999999
Got:
    9.4
**********************************************************************
```



---

archive/issue_comments_174123.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-12-18T07:31:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13518#issuecomment-174123",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_174124.json:
```json
{
    "body": "<a id='comment:24'></a>Just added `# tolerance` flag to the doctests of this patch that return numerical values. Sorry for that !\n\nNathann",
    "created_at": "2012-12-18T09:35:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13518#issuecomment-174124",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:24'></a>Just added `# tolerance` flag to the doctests of this patch that return numerical values. Sorry for that !

Nathann



---

archive/issue_comments_174125.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2012-12-18T09:35:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13518#issuecomment-174125",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_174126.json:
```json
{
    "body": "glpk_backend extensions for sensitivity analysis (updated2)",
    "created_at": "2012-12-18T09:36:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13518#issuecomment-174126",
    "user": "https://github.com/nathanncohen"
}
```

glpk_backend extensions for sensitivity analysis (updated2)



---

archive/issue_comments_174127.json:
```json
{
    "body": "<a id='comment:25'></a>Attachment [trac_13518_sens_analysis_imp.patch](tarball://root/attachments/some-uuid/ticket13518/trac_13518_sens_analysis_imp.patch) by christiankuper created at 2012-12-21 02:49:58\n\nReplying to [comment:24 ncohen]:\n> Just added `# tolerance` flag to the doctests of this patch that return numerical values. Sorry for that !\n> \n> Nathann\n\n\nThanks for quickly jumping in here, Nathann!!!\n\nChristian",
    "created_at": "2012-12-21T02:49:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13518#issuecomment-174127",
    "user": "https://trac.sagemath.org/admin/accounts/users/christiankuper"
}
```

<a id='comment:25'></a>Attachment [trac_13518_sens_analysis_imp.patch](tarball://root/attachments/some-uuid/ticket13518/trac_13518_sens_analysis_imp.patch) by christiankuper created at 2012-12-21 02:49:58

Replying to [comment:24 ncohen]:
> Just added `# tolerance` flag to the doctests of this patch that return numerical values. Sorry for that !
> 
> Nathann


Thanks for quickly jumping in here, Nathann!!!

Christian



---

archive/issue_events_037509.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-12-21T09:31:56Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13518",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13518#event-37509"
}
```



---

archive/issue_comments_174128.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-12-21T09:31:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13518#issuecomment-174128",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
