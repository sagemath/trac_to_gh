# Issue 13237: Upgrade Singular

archive/issues_013065.json:
```json
{
    "body": "Upgrade Singular to [version 3-1-5](http://www.singular.uni-kl.de/index.php/news/release-of-singular-3-1-5.html) (released 12 July 2012).\n\nUpstream bugs discovered:\n- [#437: negate() should be NTL::negate()](http://www.singular.uni-kl.de:8002/trac/ticket/437) (upstream needs testers)\n- [#438: Singular configured --without-debug doesn't build](http://www.singular.uni-kl.de:8002/trac/ticket/438) (\"fixed\" by removing the option)\n- [#439: factorize() returns wrong constant](http://www.singular.uni-kl.de:8002/trac/ticket/439) (fixed upstream, but not in a stable release)\n- [#440: Factoring over a finite field returns reducible factor](http://www.singular.uni-kl.de:8002/trac/ticket/440) (fixed upstream, but not in a stable release)\n- [#441: Factoring over a finite field sometimes returns wrong result](http://www.singular.uni-kl.de:8002/trac/ticket/441) (fixed upstream, but not in a stable release)\n- [#443: configure should check for nanosleep in -lrt](http://www.singular.uni-kl.de:8002/trac/ticket/443) (fixed upstream, but not in a stable release)\n\nThis new version fixes #13129, #12918, #12928, #12846, #12089, #13344.\n\n**Apply** [attachment:13237_singular_3_1_5.patch] and [attachment:13237_tests.patch] to the Sage library.\n\nNew **spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p1.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p1.spkg)\n\n### singular-3-1-5.p1 (Simon King, 29 August 2012)\n* Trac #13237: add patch install_table.patch\n\n### singular-3-1-5.p0 (Jeroen Demeyer, Alexander Dreyer, 10 August 2012)\n* Trac #13237: Upgrade to version 3-1-5.\n* Removed patches which are now upstreamed:\n   - patches/Singular.Makefile.in.shared.patch\n   - patches/Singular.configure.patch\n   - patches/factory.GNUmakefile.in.patch\n   - patches/factory_configure\n   - patches/make_parallel.patch\n   - patches/os_x_ppc.patch\n* In spkg-install, simplify apply_patches(), automatically apply all\n  patches in patches/*.patch, move conditional patches to\n  patches/conditional\n* Rename some patches such that they all have the extension '.patch'\n* Put the two patches for SAGE_DEBUG (Singular.Makefile.in.debug.patch\n  and kernel.Makefile.in.debug.patch) into one file\n  conditional/sage_debug.patch.\n* Add several patches (see above):\n   - NTL_negate.patch\n   - singular_trac_439.patch\n   - singular_trac_440.patch\n   - singular_trac_441.patch\n   - singular_trac_443.patch\n   - sage_trac_12089.patch\n   - slibdir.patch\n* When building Singular, don't first make install and then\n  make install-nolns. Instead, only do the latter.\n* Don't create the LIB->lib symlink, which is no longer needed.\n* In spkg-install, remove distclean() step; merge clean_headers() and\n  part of the old distclean() into remove_old_version().\n* Only unset LD on Darwin.\n* Remove the unsetting of TMPDIR (bug fixed upstream).\n* Do not override user-set CFLAGS and CXXFLAGS.\n* Echo all error messages to stderr instead of stdout.\n* Fix various ./configure options and remove some unsupported options.\n* Always configure --with-debug, as --without-debug doesn't work, see\n  http://www.singular.uni-kl.de:8002/trac/ticket/438\n* Don't create sage_singular symlink, which wasn't used anyway.\n* Replace the $SAGE_LOCAL/bin/Singular script by a symlink.\n* Remove workaround for GCC-4.0.x on Darwin (obsolete by the GCC spkg).\n* Fix formatting of spkg-install (consistent indentation, no TABs).\n\n\n**CC:**  @kiwifb @malb jpflori\n\n**Keywords:** Singular spkg\n\n**Upstream:** None of the above - read trac for reasoning.\n\n**Reviewer:** Alexander Dreyer, Fran\u00e7ois Bissey\n\n**Author:** Jeroen Demeyer, Alexander Dreyer, Dmitrii Pasechnik, Karl-Dieter Crisman, Jean-Pierre Flori\n\n**Merged:** sage-5.4.beta0\n\nIssue created by migration from https://trac.sagemath.org/ticket/13237\n\n",
    "closed_at": "2012-09-03T12:52:54Z",
    "created_at": "2012-07-12T14:01:11Z",
    "labels": [
        "component: packages: standard",
        "critical",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.4",
    "title": "Upgrade Singular",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13237",
    "user": "https://github.com/jdemeyer"
}
```
Upgrade Singular to [version 3-1-5](http://www.singular.uni-kl.de/index.php/news/release-of-singular-3-1-5.html) (released 12 July 2012).

Upstream bugs discovered:
- [#437: negate() should be NTL::negate()](http://www.singular.uni-kl.de:8002/trac/ticket/437) (upstream needs testers)
- [#438: Singular configured --without-debug doesn't build](http://www.singular.uni-kl.de:8002/trac/ticket/438) ("fixed" by removing the option)
- [#439: factorize() returns wrong constant](http://www.singular.uni-kl.de:8002/trac/ticket/439) (fixed upstream, but not in a stable release)
- [#440: Factoring over a finite field returns reducible factor](http://www.singular.uni-kl.de:8002/trac/ticket/440) (fixed upstream, but not in a stable release)
- [#441: Factoring over a finite field sometimes returns wrong result](http://www.singular.uni-kl.de:8002/trac/ticket/441) (fixed upstream, but not in a stable release)
- [#443: configure should check for nanosleep in -lrt](http://www.singular.uni-kl.de:8002/trac/ticket/443) (fixed upstream, but not in a stable release)

This new version fixes #13129, #12918, #12928, #12846, #12089, #13344.

**Apply** [attachment:13237_singular_3_1_5.patch] and [attachment:13237_tests.patch] to the Sage library.

New **spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p1.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p1.spkg)

### singular-3-1-5.p1 (Simon King, 29 August 2012)
* Trac #13237: add patch install_table.patch

### singular-3-1-5.p0 (Jeroen Demeyer, Alexander Dreyer, 10 August 2012)
* Trac #13237: Upgrade to version 3-1-5.
* Removed patches which are now upstreamed:
   - patches/Singular.Makefile.in.shared.patch
   - patches/Singular.configure.patch
   - patches/factory.GNUmakefile.in.patch
   - patches/factory_configure
   - patches/make_parallel.patch
   - patches/os_x_ppc.patch
* In spkg-install, simplify apply_patches(), automatically apply all
  patches in patches/*.patch, move conditional patches to
  patches/conditional
* Rename some patches such that they all have the extension '.patch'
* Put the two patches for SAGE_DEBUG (Singular.Makefile.in.debug.patch
  and kernel.Makefile.in.debug.patch) into one file
  conditional/sage_debug.patch.
* Add several patches (see above):
   - NTL_negate.patch
   - singular_trac_439.patch
   - singular_trac_440.patch
   - singular_trac_441.patch
   - singular_trac_443.patch
   - sage_trac_12089.patch
   - slibdir.patch
* When building Singular, don't first make install and then
  make install-nolns. Instead, only do the latter.
* Don't create the LIB->lib symlink, which is no longer needed.
* In spkg-install, remove distclean() step; merge clean_headers() and
  part of the old distclean() into remove_old_version().
* Only unset LD on Darwin.
* Remove the unsetting of TMPDIR (bug fixed upstream).
* Do not override user-set CFLAGS and CXXFLAGS.
* Echo all error messages to stderr instead of stdout.
* Fix various ./configure options and remove some unsupported options.
* Always configure --with-debug, as --without-debug doesn't work, see
  http://www.singular.uni-kl.de:8002/trac/ticket/438
* Don't create sage_singular symlink, which wasn't used anyway.
* Replace the $SAGE_LOCAL/bin/Singular script by a symlink.
* Remove workaround for GCC-4.0.x on Darwin (obsolete by the GCC spkg).
* Fix formatting of spkg-install (consistent indentation, no TABs).


**CC:**  @kiwifb @malb jpflori

**Keywords:** Singular spkg

**Upstream:** None of the above - read trac for reasoning.

**Reviewer:** Alexander Dreyer, Fran√ßois Bissey

**Author:** Jeroen Demeyer, Alexander Dreyer, Dmitrii Pasechnik, Karl-Dieter Crisman, Jean-Pierre Flori

**Merged:** sage-5.4.beta0

Issue created by migration from https://trac.sagemath.org/ticket/13237





---

archive/issue_comments_156351.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"spkg\".",
    "created_at": "2012-07-12T15:26:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156351",
    "user": "https://github.com/nexttime"
}
```

**Changing keywords** from "" to "spkg".



---

archive/issue_comments_156352.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-Upgrade Singular to version 3-1-5 (release 12 July 2012).\n+Upgrade Singular to version 3-1-5 (released 12 July 2012).\n``````\n",
    "created_at": "2012-07-12T15:26:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156352",
    "user": "https://github.com/nexttime"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1 @@
-Upgrade Singular to version 3-1-5 (release 12 July 2012).
+Upgrade Singular to version 3-1-5 (released 12 July 2012).
``````




---

archive/issue_comments_156353.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-Upgrade Singular to version 3-1-5 (released 12 July 2012).\n+Upgrade Singular to [version 3-1-5](http://www.singular.uni-kl.de/index.php/news/release-of-singular-3-1-5.html) (released 12 July 2012).\n``````\n",
    "created_at": "2012-07-12T15:30:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156353",
    "user": "https://github.com/nexttime"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1 @@
-Upgrade Singular to version 3-1-5 (released 12 July 2012).
+Upgrade Singular to [version 3-1-5](http://www.singular.uni-kl.de/index.php/news/release-of-singular-3-1-5.html) (released 12 July 2012).
``````




---

archive/issue_comments_156354.json:
```json
{
    "body": "**Author:** Jeroen Demeyer",
    "created_at": "2012-07-25T14:39:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156354",
    "user": "https://github.com/jdemeyer"
}
```

**Author:** Jeroen Demeyer



---

archive/issue_comments_156355.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,19 @@\n Upgrade Singular to [version 3-1-5](http://www.singular.uni-kl.de/index.php/news/release-of-singular-3-1-5.html) (released 12 July 2012).\n+\n+New **spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg)\n+\n+### singular-3-1-5.p0 (Jeroen Demeyer, 25 July 2012)\n+* Trac #13237: Upgrade to version 3-1-5.\n+* Removed patches which are now upstreamed:\n+   patches/Singular.Makefile.in.shared.patch\n+   patches/Singular.configure.patch\n+   patches/factory.GNUmakefile.in.patch\n+   patches/factory_configure\n+   patches/make_parallel.patch\n+   patches/os_x_ppc.patch\n+* Put the two patches for SAGE_DEBUG (Singular.Makefile.in.debug.patch and\n+  kernel.Makefile.in.debug.patch) into one file sage_debug.patch.\n+* Add NTL_negate.patch to change negate() to NTL::negate().\n+* In spkg-install, remove distclean() step; merge clean_headers() and\n+  part of the old distclean() into remove_old_version().\n+* Replace TABs by spaces in spkg-install.\n``````\n",
    "created_at": "2012-07-25T14:39:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156355",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,19 @@
 Upgrade Singular to [version 3-1-5](http://www.singular.uni-kl.de/index.php/news/release-of-singular-3-1-5.html) (released 12 July 2012).
+
+New **spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg)
+
+### singular-3-1-5.p0 (Jeroen Demeyer, 25 July 2012)
+* Trac #13237: Upgrade to version 3-1-5.
+* Removed patches which are now upstreamed:
+   patches/Singular.Makefile.in.shared.patch
+   patches/Singular.configure.patch
+   patches/factory.GNUmakefile.in.patch
+   patches/factory_configure
+   patches/make_parallel.patch
+   patches/os_x_ppc.patch
+* Put the two patches for SAGE_DEBUG (Singular.Makefile.in.debug.patch and
+  kernel.Makefile.in.debug.patch) into one file sage_debug.patch.
+* Add NTL_negate.patch to change negate() to NTL::negate().
+* In spkg-install, remove distclean() step; merge clean_headers() and
+  part of the old distclean() into remove_old_version().
+* Replace TABs by spaces in spkg-install.
``````




---

archive/issue_comments_156356.json:
```json
{
    "body": "**Changing keywords** from \"spkg\" to \"Singular spkg\".",
    "created_at": "2012-07-25T14:39:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156356",
    "user": "https://github.com/jdemeyer"
}
```

**Changing keywords** from "spkg" to "Singular spkg".



---

archive/issue_comments_156357.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -5,15 +5,17 @@\n ### singular-3-1-5.p0 (Jeroen Demeyer, 25 July 2012)\n * Trac #13237: Upgrade to version 3-1-5.\n * Removed patches which are now upstreamed:\n-   patches/Singular.Makefile.in.shared.patch\n-   patches/Singular.configure.patch\n-   patches/factory.GNUmakefile.in.patch\n-   patches/factory_configure\n-   patches/make_parallel.patch\n-   patches/os_x_ppc.patch\n+   - patches/Singular.Makefile.in.shared.patch\n+   - patches/Singular.configure.patch\n+   - patches/factory.GNUmakefile.in.patch\n+   - patches/factory_configure\n+   - patches/make_parallel.patch\n+   - patches/os_x_ppc.patch\n * Put the two patches for SAGE_DEBUG (Singular.Makefile.in.debug.patch and\n   kernel.Makefile.in.debug.patch) into one file sage_debug.patch.\n-* Add NTL_negate.patch to change negate() to NTL::negate().\n+* Add NTL_negate.patch to change negate() to NTL::negate(), see\n+  http://www.singular.uni-kl.de:8002/trac/ticket/437\n * In spkg-install, remove distclean() step; merge clean_headers() and\n   part of the old distclean() into remove_old_version().\n * Replace TABs by spaces in spkg-install.\n+\n``````\n",
    "created_at": "2012-07-25T14:41:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156357",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -5,15 +5,17 @@
 ### singular-3-1-5.p0 (Jeroen Demeyer, 25 July 2012)
 * Trac #13237: Upgrade to version 3-1-5.
 * Removed patches which are now upstreamed:
-   patches/Singular.Makefile.in.shared.patch
-   patches/Singular.configure.patch
-   patches/factory.GNUmakefile.in.patch
-   patches/factory_configure
-   patches/make_parallel.patch
-   patches/os_x_ppc.patch
+   - patches/Singular.Makefile.in.shared.patch
+   - patches/Singular.configure.patch
+   - patches/factory.GNUmakefile.in.patch
+   - patches/factory_configure
+   - patches/make_parallel.patch
+   - patches/os_x_ppc.patch
 * Put the two patches for SAGE_DEBUG (Singular.Makefile.in.debug.patch and
   kernel.Makefile.in.debug.patch) into one file sage_debug.patch.
-* Add NTL_negate.patch to change negate() to NTL::negate().
+* Add NTL_negate.patch to change negate() to NTL::negate(), see
+  http://www.singular.uni-kl.de:8002/trac/ticket/437
 * In spkg-install, remove distclean() step; merge clean_headers() and
   part of the old distclean() into remove_old_version().
 * Replace TABs by spaces in spkg-install.
+
``````




---

archive/issue_comments_156358.json:
```json
{
    "body": "<a id='comment:6'></a>\n\n```\nchecking for FLINT >= 2.3... not found\nconfigure: WARNING: Unable to find FLINT (which is strongly recommended) on your machine: please use --with-flint=PATH_TO_DIR_CONTAINING_LIB_AND_INCLUDE (see also ./configure --help if you do not understand what we are talking about)\n```\n\n:P\n\nAnd lots of other warnings...",
    "created_at": "2012-07-25T15:07:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156358",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:6'></a>

```
checking for FLINT >= 2.3... not found
configure: WARNING: Unable to find FLINT (which is strongly recommended) on your machine: please use --with-flint=PATH_TO_DIR_CONTAINING_LIB_AND_INCLUDE (see also ./configure --help if you do not understand what we are talking about)
```

:P

And lots of other warnings...



---

archive/issue_comments_156359.json:
```json
{
    "body": "<a id='comment:7'></a>\nReplying to [leif](#comment%3A6):\n> And lots of other warnings...\n\n\nThese are the ones I get from `configure` and `config.status`:\n\n```\nconfigure: warning: Building of doc might fail. Need Texinfo\nconfigure: WARNING: unrecognized options: --with-apint, --with-ntl, --without-MP, --without-lex, --without-bison, --without-Boost, --enable-Singular, --enable-factory, --enable-libfac, --enable-IntegerProgramming, --disable-doc, --with-malloc, --disable-debug, --enable-omalloc, --with-external-config_h, --with-track-custom, --enable-Plural, --with-factory, --with-libfac\nconfigure: WARNING: Unable to find FLINT (which is strongly recommended) on your machine: please use --with-flint=PATH_TO_DIR_CONTAINING_LIB_AND_INCLUDE (see also ./configure --help if you do not understand what we are talking about)\nconfig.status: WARNING:  'GNUmakefile.in' seems to ignore the --datarootdir setting\nconfigure: WARNING: unrecognized options: --with-apint, --with-ntl, --without-MP, --without-lex, --without-bison, --without-Boost, --enable-Singular, --enable-factory, --enable-libfac, --enable-IntegerProgramming, --disable-doc, --with-malloc, --disable-debug, --enable-omalloc, --with-external-config_h, --with-track-custom, --enable-Plural, --with-factory, --with-libfac\nconfigure: warning: factory.h not found! Install factory before building libfac!\nconfigure: WARNING: unrecognized options: --with-gmp, --with-ntl, --without-bison, --enable-gmp, --enable-Singular, --enable-factory, --enable-libfac, --enable-IntegerProgramming, --disable-doc, --with-malloc, --disable-debug, --enable-omalloc, --with-external-config_h, --with-track-custom, --enable-Plural, --with-Singular\nconfigure: WARNING: building without lex -- make might fail\nconfigure: WARNING: building without python support\nconfigure: WARNING: Unable to find FLINT (which is strongly recommended) on your machine: please use --with-flint=PATH_TO_DIR_CONTAINING_LIB_AND_INCLUDE (see also ./configure --help if you do not understand what we are talking about)\nconfigure: WARNING: unrecognized options: --with-gmp, --with-ntl, --without-bison, --enable-gmp, --enable-Singular, --enable-factory, --enable-libfac, --enable-IntegerProgramming, --disable-doc, --with-malloc, --disable-debug, --enable-omalloc, --with-external-config_h, --with-track-custom, --enable-Plural, --with-Singular\nconfigure: warning: Building of doc might fail. Need Texinfo\nconfigure: WARNING: unrecognized options: --with-apint, --with-ntl, --without-MP, --without-lex, --without-bison, --without-Boost, --enable-Singular, --enable-factory, --enable-libfac, --enable-IntegerProgramming, --disable-doc, --with-malloc, --disable-debug, --enable-omalloc, --with-external-config_h, --with-track-custom, --enable-Plural, --with-factory, --with-libfac\nconfigure: WARNING: Unable to find FLINT (which is strongly recommended) on your machine: please use --with-flint=PATH_TO_DIR_CONTAINING_LIB_AND_INCLUDE (see also ./configure --help if you do not understand what we are talking about)\nconfig.status: WARNING:  'GNUmakefile.in' seems to ignore the --datarootdir setting\nconfigure: WARNING: unrecognized options: --with-apint, --with-ntl, --without-MP, --without-lex, --without-bison, --without-Boost, --enable-Singular, --enable-factory, --enable-libfac, --enable-IntegerProgramming, --disable-doc, --with-malloc, --disable-debug, --enable-omalloc, --with-external-config_h, --with-track-custom, --enable-Plural, --with-factory, --with-libfac\nconfigure: warning: factory.h not found! Install factory before building libfac!\nconfigure: WARNING: unrecognized options: --with-gmp, --with-ntl, --without-bison, --enable-gmp, --enable-Singular, --enable-factory, --enable-libfac, --enable-IntegerProgramming, --disable-doc, --with-malloc, --disable-debug, --enable-omalloc, --with-external-config_h, --with-track-custom, --enable-Plural, --with-Singular\nconfigure: WARNING: building without lex -- make might fail\nconfigure: WARNING: building without python support\nconfigure: WARNING: Unable to find FLINT (which is strongly recommended) on your machine: please use --with-flint=PATH_TO_DIR_CONTAINING_LIB_AND_INCLUDE (see also ./configure --help if you do not understand what we are talking about)\nconfigure: WARNING: unrecognized options: --with-gmp, --with-ntl, --without-bison, --enable-gmp, --enable-Singular, --enable-factory, --enable-libfac, --enable-IntegerProgramming, --disable-doc, --with-malloc, --disable-debug, --enable-omalloc, --with-external-config_h, --with-track-custom, --enable-Plural, --with-Singular\nconfigure: WARNING: unrecognized options: --with-apint, --with-ntl, --disable-debug\nconfigure: WARNING: Unable to find FLINT (which is strongly recommended) on your machine: please use --with-flint=PATH_TO_DIR_CONTAINING_LIB_AND_INCLUDE (see also ./configure --help if you do not understand what we are talking about)\nconfig.status: WARNING:  'GNUmakefile.in' seems to ignore the --datarootdir setting\nconfigure: WARNING: unrecognized options: --with-apint, --with-ntl, --disable-debug\n```\n\nThe unrecognized options should be addressed I think.\n\nNo idea how to interpret *\"`factory.h` not found! Install factory before building libfac!\"*, as the build succeeded.\n\n*\"Building without python support\"* can safely be ignored I guess, as we use our own Cython wrappers.",
    "created_at": "2012-07-25T17:14:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156359",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:7'></a>
Replying to [leif](#comment%3A6):
> And lots of other warnings...


These are the ones I get from `configure` and `config.status`:

```
configure: warning: Building of doc might fail. Need Texinfo
configure: WARNING: unrecognized options: --with-apint, --with-ntl, --without-MP, --without-lex, --without-bison, --without-Boost, --enable-Singular, --enable-factory, --enable-libfac, --enable-IntegerProgramming, --disable-doc, --with-malloc, --disable-debug, --enable-omalloc, --with-external-config_h, --with-track-custom, --enable-Plural, --with-factory, --with-libfac
configure: WARNING: Unable to find FLINT (which is strongly recommended) on your machine: please use --with-flint=PATH_TO_DIR_CONTAINING_LIB_AND_INCLUDE (see also ./configure --help if you do not understand what we are talking about)
config.status: WARNING:  'GNUmakefile.in' seems to ignore the --datarootdir setting
configure: WARNING: unrecognized options: --with-apint, --with-ntl, --without-MP, --without-lex, --without-bison, --without-Boost, --enable-Singular, --enable-factory, --enable-libfac, --enable-IntegerProgramming, --disable-doc, --with-malloc, --disable-debug, --enable-omalloc, --with-external-config_h, --with-track-custom, --enable-Plural, --with-factory, --with-libfac
configure: warning: factory.h not found! Install factory before building libfac!
configure: WARNING: unrecognized options: --with-gmp, --with-ntl, --without-bison, --enable-gmp, --enable-Singular, --enable-factory, --enable-libfac, --enable-IntegerProgramming, --disable-doc, --with-malloc, --disable-debug, --enable-omalloc, --with-external-config_h, --with-track-custom, --enable-Plural, --with-Singular
configure: WARNING: building without lex -- make might fail
configure: WARNING: building without python support
configure: WARNING: Unable to find FLINT (which is strongly recommended) on your machine: please use --with-flint=PATH_TO_DIR_CONTAINING_LIB_AND_INCLUDE (see also ./configure --help if you do not understand what we are talking about)
configure: WARNING: unrecognized options: --with-gmp, --with-ntl, --without-bison, --enable-gmp, --enable-Singular, --enable-factory, --enable-libfac, --enable-IntegerProgramming, --disable-doc, --with-malloc, --disable-debug, --enable-omalloc, --with-external-config_h, --with-track-custom, --enable-Plural, --with-Singular
configure: warning: Building of doc might fail. Need Texinfo
configure: WARNING: unrecognized options: --with-apint, --with-ntl, --without-MP, --without-lex, --without-bison, --without-Boost, --enable-Singular, --enable-factory, --enable-libfac, --enable-IntegerProgramming, --disable-doc, --with-malloc, --disable-debug, --enable-omalloc, --with-external-config_h, --with-track-custom, --enable-Plural, --with-factory, --with-libfac
configure: WARNING: Unable to find FLINT (which is strongly recommended) on your machine: please use --with-flint=PATH_TO_DIR_CONTAINING_LIB_AND_INCLUDE (see also ./configure --help if you do not understand what we are talking about)
config.status: WARNING:  'GNUmakefile.in' seems to ignore the --datarootdir setting
configure: WARNING: unrecognized options: --with-apint, --with-ntl, --without-MP, --without-lex, --without-bison, --without-Boost, --enable-Singular, --enable-factory, --enable-libfac, --enable-IntegerProgramming, --disable-doc, --with-malloc, --disable-debug, --enable-omalloc, --with-external-config_h, --with-track-custom, --enable-Plural, --with-factory, --with-libfac
configure: warning: factory.h not found! Install factory before building libfac!
configure: WARNING: unrecognized options: --with-gmp, --with-ntl, --without-bison, --enable-gmp, --enable-Singular, --enable-factory, --enable-libfac, --enable-IntegerProgramming, --disable-doc, --with-malloc, --disable-debug, --enable-omalloc, --with-external-config_h, --with-track-custom, --enable-Plural, --with-Singular
configure: WARNING: building without lex -- make might fail
configure: WARNING: building without python support
configure: WARNING: Unable to find FLINT (which is strongly recommended) on your machine: please use --with-flint=PATH_TO_DIR_CONTAINING_LIB_AND_INCLUDE (see also ./configure --help if you do not understand what we are talking about)
configure: WARNING: unrecognized options: --with-gmp, --with-ntl, --without-bison, --enable-gmp, --enable-Singular, --enable-factory, --enable-libfac, --enable-IntegerProgramming, --disable-doc, --with-malloc, --disable-debug, --enable-omalloc, --with-external-config_h, --with-track-custom, --enable-Plural, --with-Singular
configure: WARNING: unrecognized options: --with-apint, --with-ntl, --disable-debug
configure: WARNING: Unable to find FLINT (which is strongly recommended) on your machine: please use --with-flint=PATH_TO_DIR_CONTAINING_LIB_AND_INCLUDE (see also ./configure --help if you do not understand what we are talking about)
config.status: WARNING:  'GNUmakefile.in' seems to ignore the --datarootdir setting
configure: WARNING: unrecognized options: --with-apint, --with-ntl, --disable-debug
```

The unrecognized options should be addressed I think.

No idea how to interpret *"`factory.h` not found! Install factory before building libfac!"*, as the build succeeded.

*"Building without python support"* can safely be ignored I guess, as we use our own Cython wrappers.



---

archive/issue_comments_156360.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [leif](#comment%3A7):\n> The unrecognized options should be addressed I think.\n\nI fixed the fixable warnings.  Many of them are caused by recursive calling of `configure`, for example, the top-level `configure` calls `omalloc/configure`.  Many options are supported by some (but not all) `configure` scripts.  These will give warnings and I don't see how to avoid these.",
    "created_at": "2012-07-26T13:26:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156360",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'></a>
Replying to [leif](#comment%3A7):
> The unrecognized options should be addressed I think.

I fixed the fixable warnings.  Many of them are caused by recursive calling of `configure`, for example, the top-level `configure` calls `omalloc/configure`.  Many options are supported by some (but not all) `configure` scripts.  These will give warnings and I don't see how to avoid these.



---

archive/issue_comments_156361.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,7 +2,7 @@\n \n New **spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg)\n \n-### singular-3-1-5.p0 (Jeroen Demeyer, 25 July 2012)\n+### singular-3-1-5.p0 (Jeroen Demeyer, 26 July 2012)\n * Trac #13237: Upgrade to version 3-1-5.\n * Removed patches which are now upstreamed:\n    - patches/Singular.Makefile.in.shared.patch\n@@ -15,7 +15,14 @@\n   kernel.Makefile.in.debug.patch) into one file sage_debug.patch.\n * Add NTL_negate.patch to change negate() to NTL::negate(), see\n   http://www.singular.uni-kl.de:8002/trac/ticket/437\n+* Only unset LD on Darwin.\n+* Remove the unsetting of TMPDIR (bug fixed upstream).\n+* Do not override user-set CFLAGS and CXXFLAGS.\n+* Echo all error message to stderr instead of stdout.\n+* Fix various ./configure options and remove some unsupported options.\n+* Always configure --with-debug, as --without-debug doesn't work, see\n+  http://www.singular.uni-kl.de:8002/trac/ticket/438\n * In spkg-install, remove distclean() step; merge clean_headers() and\n   part of the old distclean() into remove_old_version().\n-* Replace TABs by spaces in spkg-install.\n+* Fix formatting of spkg-install (consistent indentation, no TABs)\n \n``````\n",
    "created_at": "2012-07-26T13:26:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156361",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,7 +2,7 @@
 
 New **spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg)
 
-### singular-3-1-5.p0 (Jeroen Demeyer, 25 July 2012)
+### singular-3-1-5.p0 (Jeroen Demeyer, 26 July 2012)
 * Trac #13237: Upgrade to version 3-1-5.
 * Removed patches which are now upstreamed:
    - patches/Singular.Makefile.in.shared.patch
@@ -15,7 +15,14 @@
   kernel.Makefile.in.debug.patch) into one file sage_debug.patch.
 * Add NTL_negate.patch to change negate() to NTL::negate(), see
   http://www.singular.uni-kl.de:8002/trac/ticket/437
+* Only unset LD on Darwin.
+* Remove the unsetting of TMPDIR (bug fixed upstream).
+* Do not override user-set CFLAGS and CXXFLAGS.
+* Echo all error message to stderr instead of stdout.
+* Fix various ./configure options and remove some unsupported options.
+* Always configure --with-debug, as --without-debug doesn't work, see
+  http://www.singular.uni-kl.de:8002/trac/ticket/438
 * In spkg-install, remove distclean() step; merge clean_headers() and
   part of the old distclean() into remove_old_version().
-* Replace TABs by spaces in spkg-install.
+* Fix formatting of spkg-install (consistent indentation, no TABs)
 
``````




---

archive/issue_comments_156362.json:
```json
{
    "body": "<a id='comment:10'></a>\nI assume that this is work in progress (i.e., you haven't tried to fix doctest errors yet).\n\nAnyway, here's what I got on Ubuntu 10.04.4 LTS x86_64, with Sage 5.2.rc0 and GCC 4.7.0:\n\n```\nThe following tests failed:\n\n\tsage -t  --long -force_lib devel/sage/doc/en/constructions/polynomials.rst # 1 doctests failed\n\tsage -t  --long -force_lib devel/sage/sage/rings/function_field/function_field.py # 1 doctests failed\n\tsage -t  --long -force_lib devel/sage/sage/rings/polynomial/multi_polynomial_libsingular.pyx # 3 doctests failed\n\tsage -t  --long -force_lib devel/sage/sage/rings/polynomial/multi_polynomial_ideal.py # 1 doctests failed\n\tsage -t  --long -force_lib devel/sage/sage/calculus/wester.py # 1 doctests failed\n\tsage -t  --long -force_lib devel/sage/sage/libs/singular/function.pyx # 2 doctests failed\n\tsage -t  --long -force_lib devel/sage/sage/combinat/words/words.py # 0 doctests failed\n```\n(The last failure was a segfault with a large traceback IIRC.  Somewhat surprisingly successfully compiled with `-O3`, although many if not most compile commands override this by `-O2`; looks as if they use `CPPFLAGS` *instead of* `CXXFLAGS` in some parts.) \n\nLet me know in case you're interested in further output; I guess you can reproduce most of the errors.",
    "created_at": "2012-07-26T13:46:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156362",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:10'></a>
I assume that this is work in progress (i.e., you haven't tried to fix doctest errors yet).

Anyway, here's what I got on Ubuntu 10.04.4 LTS x86_64, with Sage 5.2.rc0 and GCC 4.7.0:

```
The following tests failed:

	sage -t  --long -force_lib devel/sage/doc/en/constructions/polynomials.rst # 1 doctests failed
	sage -t  --long -force_lib devel/sage/sage/rings/function_field/function_field.py # 1 doctests failed
	sage -t  --long -force_lib devel/sage/sage/rings/polynomial/multi_polynomial_libsingular.pyx # 3 doctests failed
	sage -t  --long -force_lib devel/sage/sage/rings/polynomial/multi_polynomial_ideal.py # 1 doctests failed
	sage -t  --long -force_lib devel/sage/sage/calculus/wester.py # 1 doctests failed
	sage -t  --long -force_lib devel/sage/sage/libs/singular/function.pyx # 2 doctests failed
	sage -t  --long -force_lib devel/sage/sage/combinat/words/words.py # 0 doctests failed
```
(The last failure was a segfault with a large traceback IIRC.  Somewhat surprisingly successfully compiled with `-O3`, although many if not most compile commands override this by `-O2`; looks as if they use `CPPFLAGS` *instead of* `CXXFLAGS` in some parts.) 

Let me know in case you're interested in further output; I guess you can reproduce most of the errors.



---

archive/issue_comments_156363.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [leif](#comment%3A10):\n> I assume that this is work in progress (i.e., you haven't tried to fix doctest errors yet).\n\n\nExactly, I mainly worked on `spkg-install`.",
    "created_at": "2012-07-26T13:52:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156363",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:11'></a>
Replying to [leif](#comment%3A10):
> I assume that this is work in progress (i.e., you haven't tried to fix doctest errors yet).


Exactly, I mainly worked on `spkg-install`.



---

archive/issue_comments_156364.json:
```json
{
    "body": "<a id='comment:12'></a>\nThis is a new **bug**, the new answer is incorrect:\n\n```\nsage -t  --long -force_lib devel/sage/sage/rings/polynomial/multi_polynomial_libsingular.pyx\n**********************************************************************\nFile \"/release/merger/sage-5.2.rc1/devel/sage-main/sage/rings/polynomial/multi_polynomial_libsingular.pyx\", line 3856:\n    sage: p.factor()\nExpected:\n    (-2*v^2*u + 4*u^3 + v^2)^2\nGot:\n    (4) * (-2*v^2*u + 4*u^3 + v^2)^2\n**********************************************************************\n```",
    "created_at": "2012-07-26T14:05:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156364",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>
This is a new **bug**, the new answer is incorrect:

```
sage -t  --long -force_lib devel/sage/sage/rings/polynomial/multi_polynomial_libsingular.pyx
**********************************************************************
File "/release/merger/sage-5.2.rc1/devel/sage-main/sage/rings/polynomial/multi_polynomial_libsingular.pyx", line 3856:
    sage: p.factor()
Expected:
    (-2*v^2*u + 4*u^3 + v^2)^2
Got:
    (4) * (-2*v^2*u + 4*u^3 + v^2)^2
**********************************************************************
```



---

archive/issue_comments_156365.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [jdemeyer](#comment%3A12):\n> This is a new **bug**, the new answer is incorrect:\n> \n> ```\n> Expected:\n>     (-2*v^2*u + 4*u^3 + v^2)^2\n> Got:\n>     (4) * (-2*v^2*u + 4*u^3 + v^2)^2\n> ```\n\n\nYes, the most obvious one... :-)\n\nJust noticed the failure in `words.py` apparently isn't reproducible.  Traceback was\n\n```\n\n${SAGE_LOCAL}/lib/libcsage.so(print_backtrace+0x31)[0x2abd9e8f6664]\n${SAGE_LOCAL}/lib/libcsage.so(sigdie+0x14)[0x2abd9e8f6696]\n${SAGE_LOCAL}/lib/libcsage.so(sage_signal_handler+0x218)[0x2abd9e8f6250]\n/lib/libpthread.so.0(+0xf8f0)[0x2abd9c9158f0]\n${SAGE_LOCAL}/lib/libpython2.7.so.1.0(+0x135020)[0x2abd9c628020]\n${SAGE_LOCAL}/lib/libpython2.7.so.1.0(+0x76aa7)[0x2abd9c569aa7]\n${SAGE_LOCAL}/lib/libpython2.7.so.1.0(+0x1352b7)[0x2abd9c6282b7]\n${SAGE_LOCAL}/lib/libpython2.7.so.1.0(_PyObject_GC_Malloc+0x115)[0x2abd9c6292b5]\n${SAGE_LOCAL}/lib/libpython2.7.so.1.0(_PyObject_GC_New+0xd)[0x2abd9c6292ed]\n${SAGE_LOCAL}/lib/libpython2.7.so.1.0(PyCFunction_NewEx+0xc5)[0x2abd9c584f05]\n${SAGE_LOCAL}/lib/libpython2.7.so.1.0(Py_InitModule4_64+0x140)[0x2abd9c60bc60]\n${SAGE_LOCAL}/lib/python/site-packages/numpy/core/multiarray.so(initmultiarray+0x2b)[0x2abdcd07186b]\n${SAGE_LOCAL}/lib/libpython2.7.so.1.0(_PyImport_LoadDynamicModule+0x99)[0x2abd9c6073b9]\n...\nSegmentation fault\n```",
    "created_at": "2012-07-26T14:15:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156365",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:13'></a>
Replying to [jdemeyer](#comment%3A12):
> This is a new **bug**, the new answer is incorrect:
> 
> ```
> Expected:
>     (-2*v^2*u + 4*u^3 + v^2)^2
> Got:
>     (4) * (-2*v^2*u + 4*u^3 + v^2)^2
> ```


Yes, the most obvious one... :-)

Just noticed the failure in `words.py` apparently isn't reproducible.  Traceback was

```

${SAGE_LOCAL}/lib/libcsage.so(print_backtrace+0x31)[0x2abd9e8f6664]
${SAGE_LOCAL}/lib/libcsage.so(sigdie+0x14)[0x2abd9e8f6696]
${SAGE_LOCAL}/lib/libcsage.so(sage_signal_handler+0x218)[0x2abd9e8f6250]
/lib/libpthread.so.0(+0xf8f0)[0x2abd9c9158f0]
${SAGE_LOCAL}/lib/libpython2.7.so.1.0(+0x135020)[0x2abd9c628020]
${SAGE_LOCAL}/lib/libpython2.7.so.1.0(+0x76aa7)[0x2abd9c569aa7]
${SAGE_LOCAL}/lib/libpython2.7.so.1.0(+0x1352b7)[0x2abd9c6282b7]
${SAGE_LOCAL}/lib/libpython2.7.so.1.0(_PyObject_GC_Malloc+0x115)[0x2abd9c6292b5]
${SAGE_LOCAL}/lib/libpython2.7.so.1.0(_PyObject_GC_New+0xd)[0x2abd9c6292ed]
${SAGE_LOCAL}/lib/libpython2.7.so.1.0(PyCFunction_NewEx+0xc5)[0x2abd9c584f05]
${SAGE_LOCAL}/lib/libpython2.7.so.1.0(Py_InitModule4_64+0x140)[0x2abd9c60bc60]
${SAGE_LOCAL}/lib/python/site-packages/numpy/core/multiarray.so(initmultiarray+0x2b)[0x2abdcd07186b]
${SAGE_LOCAL}/lib/libpython2.7.so.1.0(_PyImport_LoadDynamicModule+0x99)[0x2abd9c6073b9]
...
Segmentation fault
```



---

archive/issue_comments_156366.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -26,3 +26,7 @@\n   part of the old distclean() into remove_old_version().\n * Fix formatting of spkg-install (consistent indentation, no TABs)\n \n+Upstream bugs discovered:\n+- [#437: negate() should be NTL::negate()](http://www.singular.uni-kl.de:8002/trac/ticket/437)\n+- [#438: Singular configured --without-debug doesn't build](http://www.singular.uni-kl.de:8002/trac/ticket/438)\n+- [#439: factorize() returns wrong constant](http://www.singular.uni-kl.de:8002/trac/ticket/439)\n``````\n",
    "created_at": "2012-07-26T14:59:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156366",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -26,3 +26,7 @@
   part of the old distclean() into remove_old_version().
 * Fix formatting of spkg-install (consistent indentation, no TABs)
 
+Upstream bugs discovered:
+- [#437: negate() should be NTL::negate()](http://www.singular.uni-kl.de:8002/trac/ticket/437)
+- [#438: Singular configured --without-debug doesn't build](http://www.singular.uni-kl.de:8002/trac/ticket/438)
+- [#439: factorize() returns wrong constant](http://www.singular.uni-kl.de:8002/trac/ticket/439)
``````




---

archive/issue_comments_156367.json:
```json
{
    "body": "<a id='comment:15'></a>\nAnother Singular bug:\n\n```\nsage -t --long \"devel/sage/sage/rings/function_field/function_field.py\"\n**********************************************************************\nFile \"/release/merger/sage-5.2.rc1/devel/sage/sage/rings/function_field/function_field.py\", line 1132:\n    sage: f.factor()\nExpected:\n    (1/t) * (X + 3*t) * (X + 5*t) * (X + 6*t) * (X^2 + 1/t) * (X^2 + 6/t)\nGot:\n    (1/t) * (X + 3*t) * (X + 5*t) * (X + 6*t) * (X^4 + 6/t^2)\n**********************************************************************\n```\nReported upstream at [http://www.singular.uni-kl.de:8002/trac/ticket/440](http://www.singular.uni-kl.de:8002/trac/ticket/440).",
    "created_at": "2012-07-26T15:52:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156367",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:15'></a>
Another Singular bug:

```
sage -t --long "devel/sage/sage/rings/function_field/function_field.py"
**********************************************************************
File "/release/merger/sage-5.2.rc1/devel/sage/sage/rings/function_field/function_field.py", line 1132:
    sage: f.factor()
Expected:
    (1/t) * (X + 3*t) * (X + 5*t) * (X + 6*t) * (X^2 + 1/t) * (X^2 + 6/t)
Got:
    (1/t) * (X + 3*t) * (X + 5*t) * (X + 6*t) * (X^4 + 6/t^2)
**********************************************************************
```
Reported upstream at [http://www.singular.uni-kl.de:8002/trac/ticket/440](http://www.singular.uni-kl.de:8002/trac/ticket/440).



---

archive/issue_comments_156368.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -30,3 +30,4 @@\n - [#437: negate() should be NTL::negate()](http://www.singular.uni-kl.de:8002/trac/ticket/437)\n - [#438: Singular configured --without-debug doesn't build](http://www.singular.uni-kl.de:8002/trac/ticket/438)\n - [#439: factorize() returns wrong constant](http://www.singular.uni-kl.de:8002/trac/ticket/439)\n+- [#440: Factoring over a finite field returns reducible factor](http://www.singular.uni-kl.de:8002/trac/ticket/440)\n``````\n",
    "created_at": "2012-07-26T15:52:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156368",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -30,3 +30,4 @@
 - [#437: negate() should be NTL::negate()](http://www.singular.uni-kl.de:8002/trac/ticket/437)
 - [#438: Singular configured --without-debug doesn't build](http://www.singular.uni-kl.de:8002/trac/ticket/438)
 - [#439: factorize() returns wrong constant](http://www.singular.uni-kl.de:8002/trac/ticket/439)
+- [#440: Factoring over a finite field returns reducible factor](http://www.singular.uni-kl.de:8002/trac/ticket/440)
``````




---

archive/issue_comments_156369.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -24,7 +24,11 @@\n   http://www.singular.uni-kl.de:8002/trac/ticket/438\n * In spkg-install, remove distclean() step; merge clean_headers() and\n   part of the old distclean() into remove_old_version().\n-* Fix formatting of spkg-install (consistent indentation, no TABs)\n+* Don't create sage_singular symlink, which wasn't used anyway.\n+* Slightly change the $SAGE_LOCAL/bin/Singular script, use \"$@\"\n+  instead of $*.\n+* Remove workaround for GCC-4.0.x on Darwin (obsolete by the GCC spkg).\n+* Fix formatting of spkg-install (consistent indentation, no TABs).\n \n Upstream bugs discovered:\n - [#437: negate() should be NTL::negate()](http://www.singular.uni-kl.de:8002/trac/ticket/437)\n``````\n",
    "created_at": "2012-07-26T15:55:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156369",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -24,7 +24,11 @@
   http://www.singular.uni-kl.de:8002/trac/ticket/438
 * In spkg-install, remove distclean() step; merge clean_headers() and
   part of the old distclean() into remove_old_version().
-* Fix formatting of spkg-install (consistent indentation, no TABs)
+* Don't create sage_singular symlink, which wasn't used anyway.
+* Slightly change the $SAGE_LOCAL/bin/Singular script, use "$@"
+  instead of $*.
+* Remove workaround for GCC-4.0.x on Darwin (obsolete by the GCC spkg).
+* Fix formatting of spkg-install (consistent indentation, no TABs).
 
 Upstream bugs discovered:
 - [#437: negate() should be NTL::negate()](http://www.singular.uni-kl.de:8002/trac/ticket/437)
``````




---

archive/issue_comments_156370.json:
```json
{
    "body": "**Changing upstream** from \"N/A\" to \"None of the above - read trac for reasoning.\".",
    "created_at": "2012-08-01T11:25:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156370",
    "user": "https://github.com/jdemeyer"
}
```

**Changing upstream** from "N/A" to "None of the above - read trac for reasoning.".



---

archive/issue_comments_156371.json:
```json
{
    "body": "<a id='comment:17'></a>\nNew spkg, adds fixes for Singular bugs 439 and 440.",
    "created_at": "2012-08-01T11:25:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156371",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'></a>
New spkg, adds fixes for Singular bugs 439 and 440.



---

archive/issue_comments_156372.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -31,7 +31,7 @@\n * Fix formatting of spkg-install (consistent indentation, no TABs).\n \n Upstream bugs discovered:\n-- [#437: negate() should be NTL::negate()](http://www.singular.uni-kl.de:8002/trac/ticket/437)\n-- [#438: Singular configured --without-debug doesn't build](http://www.singular.uni-kl.de:8002/trac/ticket/438)\n-- [#439: factorize() returns wrong constant](http://www.singular.uni-kl.de:8002/trac/ticket/439)\n-- [#440: Factoring over a finite field returns reducible factor](http://www.singular.uni-kl.de:8002/trac/ticket/440)\n+- [#437: negate() should be NTL::negate()](http://www.singular.uni-kl.de:8002/trac/ticket/437) (little feedback)\n+- [#438: Singular configured --without-debug doesn't build](http://www.singular.uni-kl.de:8002/trac/ticket/438) (developers acknowledge the bug)\n+- [#439: factorize() returns wrong constant](http://www.singular.uni-kl.de:8002/trac/ticket/439) (fixed upstream, but not in a stable release)\n+- [#440: Factoring over a finite field returns reducible factor](http://www.singular.uni-kl.de:8002/trac/ticket/440) (fixed upstream, but not in a stable release)\n``````\n",
    "created_at": "2012-08-01T11:25:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156372",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -31,7 +31,7 @@
 * Fix formatting of spkg-install (consistent indentation, no TABs).
 
 Upstream bugs discovered:
-- [#437: negate() should be NTL::negate()](http://www.singular.uni-kl.de:8002/trac/ticket/437)
-- [#438: Singular configured --without-debug doesn't build](http://www.singular.uni-kl.de:8002/trac/ticket/438)
-- [#439: factorize() returns wrong constant](http://www.singular.uni-kl.de:8002/trac/ticket/439)
-- [#440: Factoring over a finite field returns reducible factor](http://www.singular.uni-kl.de:8002/trac/ticket/440)
+- [#437: negate() should be NTL::negate()](http://www.singular.uni-kl.de:8002/trac/ticket/437) (little feedback)
+- [#438: Singular configured --without-debug doesn't build](http://www.singular.uni-kl.de:8002/trac/ticket/438) (developers acknowledge the bug)
+- [#439: factorize() returns wrong constant](http://www.singular.uni-kl.de:8002/trac/ticket/439) (fixed upstream, but not in a stable release)
+- [#440: Factoring over a finite field returns reducible factor](http://www.singular.uni-kl.de:8002/trac/ticket/440) (fixed upstream, but not in a stable release)
``````




---

archive/issue_comments_156373.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,7 +2,7 @@\n \n New **spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg)\n \n-### singular-3-1-5.p0 (Jeroen Demeyer, 26 July 2012)\n+### singular-3-1-5.p0 (Jeroen Demeyer, 1 August 2012)\n * Trac #13237: Upgrade to version 3-1-5.\n * Removed patches which are now upstreamed:\n    - patches/Singular.Makefile.in.shared.patch\n@@ -11,27 +11,28 @@\n    - patches/factory_configure\n    - patches/make_parallel.patch\n    - patches/os_x_ppc.patch\n-* Put the two patches for SAGE_DEBUG (Singular.Makefile.in.debug.patch and\n-  kernel.Makefile.in.debug.patch) into one file sage_debug.patch.\n-* Add NTL_negate.patch to change negate() to NTL::negate(), see\n-  http://www.singular.uni-kl.de:8002/trac/ticket/437\n+* In spkg-install, simplify apply_patches(), automatically apply all\n+  patches in patches/*.patch, move conditional patches to\n+  patches/conditional\n+* Rename some patches such that they all have the extension '.patch'\n+* Put the two patches for SAGE_DEBUG (Singular.Makefile.in.debug.patch\n+  and kernel.Makefile.in.debug.patch) into one file\n+  conditional/sage_debug.patch.\n+* Add several patches (see above):\n+   - NTL_negate.patch\n+   - singular_trac_439.patch\n+   - singular_trac_440.patch\n+* In spkg-install, remove distclean() step; merge clean_headers() and\n+  part of the old distclean() into remove_old_version().\n * Only unset LD on Darwin.\n * Remove the unsetting of TMPDIR (bug fixed upstream).\n * Do not override user-set CFLAGS and CXXFLAGS.\n-* Echo all error message to stderr instead of stdout.\n+* Echo all error messages to stderr instead of stdout.\n * Fix various ./configure options and remove some unsupported options.\n * Always configure --with-debug, as --without-debug doesn't work, see\n   http://www.singular.uni-kl.de:8002/trac/ticket/438\n-* In spkg-install, remove distclean() step; merge clean_headers() and\n-  part of the old distclean() into remove_old_version().\n * Don't create sage_singular symlink, which wasn't used anyway.\n * Slightly change the $SAGE_LOCAL/bin/Singular script, use \"$@\"\n   instead of $*.\n * Remove workaround for GCC-4.0.x on Darwin (obsolete by the GCC spkg).\n * Fix formatting of spkg-install (consistent indentation, no TABs).\n-\n-Upstream bugs discovered:\n-- [#437: negate() should be NTL::negate()](http://www.singular.uni-kl.de:8002/trac/ticket/437) (little feedback)\n-- [#438: Singular configured --without-debug doesn't build](http://www.singular.uni-kl.de:8002/trac/ticket/438) (developers acknowledge the bug)\n-- [#439: factorize() returns wrong constant](http://www.singular.uni-kl.de:8002/trac/ticket/439) (fixed upstream, but not in a stable release)\n-- [#440: Factoring over a finite field returns reducible factor](http://www.singular.uni-kl.de:8002/trac/ticket/440) (fixed upstream, but not in a stable release)\n``````\n",
    "created_at": "2012-08-01T11:28:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156373",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,7 +2,7 @@
 
 New **spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg)
 
-### singular-3-1-5.p0 (Jeroen Demeyer, 26 July 2012)
+### singular-3-1-5.p0 (Jeroen Demeyer, 1 August 2012)
 * Trac #13237: Upgrade to version 3-1-5.
 * Removed patches which are now upstreamed:
    - patches/Singular.Makefile.in.shared.patch
@@ -11,27 +11,28 @@
    - patches/factory_configure
    - patches/make_parallel.patch
    - patches/os_x_ppc.patch
-* Put the two patches for SAGE_DEBUG (Singular.Makefile.in.debug.patch and
-  kernel.Makefile.in.debug.patch) into one file sage_debug.patch.
-* Add NTL_negate.patch to change negate() to NTL::negate(), see
-  http://www.singular.uni-kl.de:8002/trac/ticket/437
+* In spkg-install, simplify apply_patches(), automatically apply all
+  patches in patches/*.patch, move conditional patches to
+  patches/conditional
+* Rename some patches such that they all have the extension '.patch'
+* Put the two patches for SAGE_DEBUG (Singular.Makefile.in.debug.patch
+  and kernel.Makefile.in.debug.patch) into one file
+  conditional/sage_debug.patch.
+* Add several patches (see above):
+   - NTL_negate.patch
+   - singular_trac_439.patch
+   - singular_trac_440.patch
+* In spkg-install, remove distclean() step; merge clean_headers() and
+  part of the old distclean() into remove_old_version().
 * Only unset LD on Darwin.
 * Remove the unsetting of TMPDIR (bug fixed upstream).
 * Do not override user-set CFLAGS and CXXFLAGS.
-* Echo all error message to stderr instead of stdout.
+* Echo all error messages to stderr instead of stdout.
 * Fix various ./configure options and remove some unsupported options.
 * Always configure --with-debug, as --without-debug doesn't work, see
   http://www.singular.uni-kl.de:8002/trac/ticket/438
-* In spkg-install, remove distclean() step; merge clean_headers() and
-  part of the old distclean() into remove_old_version().
 * Don't create sage_singular symlink, which wasn't used anyway.
 * Slightly change the $SAGE_LOCAL/bin/Singular script, use "$@"
   instead of $*.
 * Remove workaround for GCC-4.0.x on Darwin (obsolete by the GCC spkg).
 * Fix formatting of spkg-install (consistent indentation, no TABs).
-
-Upstream bugs discovered:
-- [#437: negate() should be NTL::negate()](http://www.singular.uni-kl.de:8002/trac/ticket/437) (little feedback)
-- [#438: Singular configured --without-debug doesn't build](http://www.singular.uni-kl.de:8002/trac/ticket/438) (developers acknowledge the bug)
-- [#439: factorize() returns wrong constant](http://www.singular.uni-kl.de:8002/trac/ticket/439) (fixed upstream, but not in a stable release)
-- [#440: Factoring over a finite field returns reducible factor](http://www.singular.uni-kl.de:8002/trac/ticket/440) (fixed upstream, but not in a stable release)
``````




---

archive/issue_comments_156374.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,10 @@\n Upgrade Singular to [version 3-1-5](http://www.singular.uni-kl.de/index.php/news/release-of-singular-3-1-5.html) (released 12 July 2012).\n+\n+Upstream bugs discovered:\n+- [#437: negate() should be NTL::negate()](http://www.singular.uni-kl.de:8002/trac/ticket/437) (little feedback)\n+- [#438: Singular configured --without-debug doesn't build](http://www.singular.uni-kl.de:8002/trac/ticket/438) (developers acknowledge the bug)\n+- [#439: factorize() returns wrong constant](http://www.singular.uni-kl.de:8002/trac/ticket/439) (fixed upstream, but not in a stable release)\n+- [#440: Factoring over a finite field returns reducible factor](http://www.singular.uni-kl.de:8002/trac/ticket/440) (fixed upstream, but not in a stable release)\n \n New **spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg)\n \n``````\n",
    "created_at": "2012-08-01T11:30:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156374",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,10 @@
 Upgrade Singular to [version 3-1-5](http://www.singular.uni-kl.de/index.php/news/release-of-singular-3-1-5.html) (released 12 July 2012).
+
+Upstream bugs discovered:
+- [#437: negate() should be NTL::negate()](http://www.singular.uni-kl.de:8002/trac/ticket/437) (little feedback)
+- [#438: Singular configured --without-debug doesn't build](http://www.singular.uni-kl.de:8002/trac/ticket/438) (developers acknowledge the bug)
+- [#439: factorize() returns wrong constant](http://www.singular.uni-kl.de:8002/trac/ticket/439) (fixed upstream, but not in a stable release)
+- [#440: Factoring over a finite field returns reducible factor](http://www.singular.uni-kl.de:8002/trac/ticket/440) (fixed upstream, but not in a stable release)
 
 New **spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg)
 
``````




---

archive/issue_comments_156375.json:
```json
{
    "body": "<a id='comment:20'></a>\nReproducible doctest failure:\n\n```\n**********************************************************************\nFile \"/release/merger/sage-5.3.beta0/devel/sage-main/sage/libs/singular/function.pyx\", line 1569:\n    sage: singular_list(2, 3, 6, ring=P)\nException raised:\n    Traceback (most recent call last):\n      File \"/release/merger/sage-5.3.beta0/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/release/merger/sage-5.3.beta0/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/release/merger/sage-5.3.beta0/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_72[16]>\", line 1, in <module>\n        singular_list(Integer(2), Integer(3), Integer(6), ring=P)###line 1569:\n    sage: singular_list(2, 3, 6, ring=P)\n      File \"function.pyx\", line 1248, in sage.libs.singular.function.SingularFunction.__call__ (sage/libs/singular/function.cpp:11875)\n        return call_function(self, args, ring, interruptible, attributes)\n      File \"function.pyx\", line 1438, in sage.libs.singular.function.call_function (sage/libs/singular/function.cpp:13425)\n        raise RuntimeError(\"Error in Singular function call '%s':\\n%s\"%(self._name,\n    RuntimeError: Error in Singular function call 'list':\n     list(`int`,`int`,`int`) failed\n**********************************************************************\nFile \"/release/merger/sage-5.3.beta0/devel/sage-main/sage/libs/singular/function.pyx\", line 1585:\n    sage: singular_list((1,2,3),3,[1,2,3], ring=P)\nException raised:\n    Traceback (most recent call last):\n      File \"/release/merger/sage-5.3.beta0/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/release/merger/sage-5.3.beta0/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/release/merger/sage-5.3.beta0/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_72[26]>\", line 1, in <module>\n        singular_list((Integer(1),Integer(2),Integer(3)),Integer(3),[Integer(1),Integer(2),Integer(3)], ring=P)###line 1585:\n    sage: singular_list((1,2,3),3,[1,2,3], ring=P)\n      File \"function.pyx\", line 1248, in sage.libs.singular.function.SingularFunction.__call__ (sage/libs/singular/function.cpp:11875)\n        return call_function(self, args, ring, interruptible, attributes)\n      File \"function.pyx\", line 1438, in sage.libs.singular.function.call_function (sage/libs/singular/function.cpp:13425)\n        raise RuntimeError(\"Error in Singular function call '%s':\\n%s\"%(self._name,\n    RuntimeError: Error in Singular function call 'list':\n     list(`intvec`,`int`,`list`) failed\n**********************************************************************\n```\n\nNon-reproducible doctest failure:\n\n```\n**********************************************************************\nFile \"/release/merger/sage-5.3.beta0/devel/sage-main/sage/rings/polynomial/multi_polynomial_libsingular.pyx\", line 3921:\n    sage: f.factor()\nExpected:\n    x * y^3 * (y^8 + (a)*y^7 + (a + 1)*x) * (x^7*y^3 + x*y^9 + (a)*x^8 + (a)*y^4)\nGot:\n    x * y^3 * (y^8 + (a)*y^7 + (a + 1)*x) * (x^7*y^3 + x*y^9 + (a + 1)*x^8 + (a + 1)*y^4)\n**********************************************************************\n```",
    "created_at": "2012-08-01T12:22:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156375",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:20'></a>
Reproducible doctest failure:

```
**********************************************************************
File "/release/merger/sage-5.3.beta0/devel/sage-main/sage/libs/singular/function.pyx", line 1569:
    sage: singular_list(2, 3, 6, ring=P)
Exception raised:
    Traceback (most recent call last):
      File "/release/merger/sage-5.3.beta0/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/release/merger/sage-5.3.beta0/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/release/merger/sage-5.3.beta0/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_72[16]>", line 1, in <module>
        singular_list(Integer(2), Integer(3), Integer(6), ring=P)###line 1569:
    sage: singular_list(2, 3, 6, ring=P)
      File "function.pyx", line 1248, in sage.libs.singular.function.SingularFunction.__call__ (sage/libs/singular/function.cpp:11875)
        return call_function(self, args, ring, interruptible, attributes)
      File "function.pyx", line 1438, in sage.libs.singular.function.call_function (sage/libs/singular/function.cpp:13425)
        raise RuntimeError("Error in Singular function call '%s':\n%s"%(self._name,
    RuntimeError: Error in Singular function call 'list':
     list(`int`,`int`,`int`) failed
**********************************************************************
File "/release/merger/sage-5.3.beta0/devel/sage-main/sage/libs/singular/function.pyx", line 1585:
    sage: singular_list((1,2,3),3,[1,2,3], ring=P)
Exception raised:
    Traceback (most recent call last):
      File "/release/merger/sage-5.3.beta0/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/release/merger/sage-5.3.beta0/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/release/merger/sage-5.3.beta0/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_72[26]>", line 1, in <module>
        singular_list((Integer(1),Integer(2),Integer(3)),Integer(3),[Integer(1),Integer(2),Integer(3)], ring=P)###line 1585:
    sage: singular_list((1,2,3),3,[1,2,3], ring=P)
      File "function.pyx", line 1248, in sage.libs.singular.function.SingularFunction.__call__ (sage/libs/singular/function.cpp:11875)
        return call_function(self, args, ring, interruptible, attributes)
      File "function.pyx", line 1438, in sage.libs.singular.function.call_function (sage/libs/singular/function.cpp:13425)
        raise RuntimeError("Error in Singular function call '%s':\n%s"%(self._name,
    RuntimeError: Error in Singular function call 'list':
     list(`intvec`,`int`,`list`) failed
**********************************************************************
```

Non-reproducible doctest failure:

```
**********************************************************************
File "/release/merger/sage-5.3.beta0/devel/sage-main/sage/rings/polynomial/multi_polynomial_libsingular.pyx", line 3921:
    sage: f.factor()
Expected:
    x * y^3 * (y^8 + (a)*y^7 + (a + 1)*x) * (x^7*y^3 + x*y^9 + (a)*x^8 + (a)*y^4)
Got:
    x * y^3 * (y^8 + (a)*y^7 + (a + 1)*x) * (x^7*y^3 + x*y^9 + (a + 1)*x^8 + (a + 1)*y^4)
**********************************************************************
```



---

archive/issue_comments_156376.json:
```json
{
    "body": "<a id='comment:21'></a>\nSo far I only tested the files that previously failed for me (with the new spkg and the Sage library patch applied).\n\nI get the same `list()` errors (although prepended by some debug output it seems, before the doctest error is printed), and sporadically the `f.factor()` error -- with **varying** results:\n\n```\nsage -t --long -force_lib \"devel/sage/sage/rings/polynomial/multi_polynomial_libsingular.pyx\"\n**********************************************************************\nFile \"${SAGE_ROOT}/devel/sage/sage/rings/polynomial/multi_polynomial_libsingular.pyx\", line 3910:\n    sage: f.factor()\nExpected:\n    x * y^3 * (y^8 + (a)*y^7 + (a + 1)*x) * (x^7*y^3 + x*y^9 + (a)*x^8 + (a)*y^4)\nGot:\n    x * y^3 * (y^8 + (a)*y^7 + (a + 1)*x) * (x^7*y^3 + x*y^9 + (a + 1)*x^8 + (a + 1)*y^4)\n**********************************************************************\n1 items had failures:\n   1 of  86 in __main__.example_77\n***Test Failed*** 1 failures.\n\nsage -t --long -force_lib \"devel/sage/sage/rings/polynomial/multi_polynomial_libsingular.pyx\"\n**********************************************************************\nFile \"${SAGE_ROOT}/devel/sage/sage/rings/polynomial/multi_polynomial_libsingular.pyx\", line 3910:\n    sage: f.factor()\nExpected:\n    x * y^3 * (y^8 + (a)*y^7 + (a + 1)*x) * (x^7*y^3 + x*y^9 + (a)*x^8 + (a)*y^4)\nGot:\n    x * y^3 * (y^8 + (a)*y^7 + (a + 1)*x) * (x^7*y^3 + x*y^9)\n**********************************************************************\n1 items had failures:\n   1 of  86 in __main__.example_77\n***Test Failed*** 1 failures.\n\nsage -t --long -force_lib \"devel/sage/sage/rings/polynomial/multi_polynomial_libsingular.pyx\"\n**********************************************************************\nFile \"${SAGE_ROOT}/devel/sage/sage/rings/polynomial/multi_polynomial_libsingular.pyx\", line 3910:\n    sage: f.factor()\nExpected:\n    x * y^3 * (y^8 + (a)*y^7 + (a + 1)*x) * (x^7*y^3 + x*y^9 + (a)*x^8 + (a)*y^4)\nGot:\n    x * y^3 * (y^8 + (a)*y^7 + (a + 1)*x) * (x^7*y^3 + x*y^9 + x^8 + y^4)\n**********************************************************************\n1 items had failures:\n   1 of  86 in __main__.example_77\n***Test Failed*** 1 failures.\n```\n\n(For me it's line 3910; presumably due to some other patch.  The first variant seems to occur more often.  All tests run sequentially, FWIW.)\n\n\nP.S.: Run 100 times from the shell, the test failed 51 times.",
    "created_at": "2012-08-01T15:31:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156376",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:21'></a>
So far I only tested the files that previously failed for me (with the new spkg and the Sage library patch applied).

I get the same `list()` errors (although prepended by some debug output it seems, before the doctest error is printed), and sporadically the `f.factor()` error -- with **varying** results:

```
sage -t --long -force_lib "devel/sage/sage/rings/polynomial/multi_polynomial_libsingular.pyx"
**********************************************************************
File "${SAGE_ROOT}/devel/sage/sage/rings/polynomial/multi_polynomial_libsingular.pyx", line 3910:
    sage: f.factor()
Expected:
    x * y^3 * (y^8 + (a)*y^7 + (a + 1)*x) * (x^7*y^3 + x*y^9 + (a)*x^8 + (a)*y^4)
Got:
    x * y^3 * (y^8 + (a)*y^7 + (a + 1)*x) * (x^7*y^3 + x*y^9 + (a + 1)*x^8 + (a + 1)*y^4)
**********************************************************************
1 items had failures:
   1 of  86 in __main__.example_77
***Test Failed*** 1 failures.

sage -t --long -force_lib "devel/sage/sage/rings/polynomial/multi_polynomial_libsingular.pyx"
**********************************************************************
File "${SAGE_ROOT}/devel/sage/sage/rings/polynomial/multi_polynomial_libsingular.pyx", line 3910:
    sage: f.factor()
Expected:
    x * y^3 * (y^8 + (a)*y^7 + (a + 1)*x) * (x^7*y^3 + x*y^9 + (a)*x^8 + (a)*y^4)
Got:
    x * y^3 * (y^8 + (a)*y^7 + (a + 1)*x) * (x^7*y^3 + x*y^9)
**********************************************************************
1 items had failures:
   1 of  86 in __main__.example_77
***Test Failed*** 1 failures.

sage -t --long -force_lib "devel/sage/sage/rings/polynomial/multi_polynomial_libsingular.pyx"
**********************************************************************
File "${SAGE_ROOT}/devel/sage/sage/rings/polynomial/multi_polynomial_libsingular.pyx", line 3910:
    sage: f.factor()
Expected:
    x * y^3 * (y^8 + (a)*y^7 + (a + 1)*x) * (x^7*y^3 + x*y^9 + (a)*x^8 + (a)*y^4)
Got:
    x * y^3 * (y^8 + (a)*y^7 + (a + 1)*x) * (x^7*y^3 + x*y^9 + x^8 + y^4)
**********************************************************************
1 items had failures:
   1 of  86 in __main__.example_77
***Test Failed*** 1 failures.
```

(For me it's line 3910; presumably due to some other patch.  The first variant seems to occur more often.  All tests run sequentially, FWIW.)


P.S.: Run 100 times from the shell, the test failed 51 times.



---

archive/issue_comments_156377.json:
```json
{
    "body": "<a id='comment:22'></a>\nReplying to [leif](#comment%3A21):\n> P.S.: Run 100 times from the shell, the test failed 51 times.\n\n\n(Running `sage -t ...` in a `for` loop.)\n\n```\n25x\n    x * y^3 * (y^8 + (a)*y^7 + (a + 1)*x) * (x^7*y^3 + x*y^9 + (a + 1)*x^8 + (a + 1)*y^4)\n\n15x\n    x * y^3 * (y^8 + (a)*y^7 + (a + 1)*x) * (x^7*y^3 + x*y^9 + x^8 + y^4)\n\n11x\n    x * y^3 * (y^8 + (a)*y^7 + (a + 1)*x) * (x^7*y^3 + x*y^9)\n```",
    "created_at": "2012-08-01T15:36:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156377",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:22'></a>
Replying to [leif](#comment%3A21):
> P.S.: Run 100 times from the shell, the test failed 51 times.


(Running `sage -t ...` in a `for` loop.)

```
25x
    x * y^3 * (y^8 + (a)*y^7 + (a + 1)*x) * (x^7*y^3 + x*y^9 + (a + 1)*x^8 + (a + 1)*y^4)

15x
    x * y^3 * (y^8 + (a)*y^7 + (a + 1)*x) * (x^7*y^3 + x*y^9 + x^8 + y^4)

11x
    x * y^3 * (y^8 + (a)*y^7 + (a + 1)*x) * (x^7*y^3 + x*y^9)
```



---

archive/issue_comments_156378.json:
```json
{
    "body": "<a id='comment:23'></a>\nNon-reproducible factoring bug reported upstream: [http://www.singular.uni-kl.de:8002/trac/ticket/441](http://www.singular.uni-kl.de:8002/trac/ticket/441)",
    "created_at": "2012-08-01T19:45:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156378",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:23'></a>
Non-reproducible factoring bug reported upstream: [http://www.singular.uni-kl.de:8002/trac/ticket/441](http://www.singular.uni-kl.de:8002/trac/ticket/441)



---

archive/issue_comments_156379.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -5,6 +5,7 @@\n - [#438: Singular configured --without-debug doesn't build](http://www.singular.uni-kl.de:8002/trac/ticket/438) (developers acknowledge the bug)\n - [#439: factorize() returns wrong constant](http://www.singular.uni-kl.de:8002/trac/ticket/439) (fixed upstream, but not in a stable release)\n - [#440: Factoring over a finite field returns reducible factor](http://www.singular.uni-kl.de:8002/trac/ticket/440) (fixed upstream, but not in a stable release)\n+- [#441: Factoring over a finite field sometimes returns wrong result](http://www.singular.uni-kl.de:8002/trac/ticket/441) (no feedback yet)\n \n New **spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg)\n \n``````\n",
    "created_at": "2012-08-01T19:45:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156379",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -5,6 +5,7 @@
 - [#438: Singular configured --without-debug doesn't build](http://www.singular.uni-kl.de:8002/trac/ticket/438) (developers acknowledge the bug)
 - [#439: factorize() returns wrong constant](http://www.singular.uni-kl.de:8002/trac/ticket/439) (fixed upstream, but not in a stable release)
 - [#440: Factoring over a finite field returns reducible factor](http://www.singular.uni-kl.de:8002/trac/ticket/440) (fixed upstream, but not in a stable release)
+- [#441: Factoring over a finite field sometimes returns wrong result](http://www.singular.uni-kl.de:8002/trac/ticket/441) (no feedback yet)
 
 New **spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg)
 
``````




---

archive/attachments_017906.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "13237_singular_3_1_5.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket13237/13237_singular_3_1_5.patch",
    "created_at": "2012-08-02T10:04:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/jdemeyer"
}
```



---

archive/issue_comments_156380.json:
```json
{
    "body": "Patch for the Sage library",
    "created_at": "2012-08-02T10:04:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156380",
    "user": "https://github.com/jdemeyer"
}
```

Patch for the Sage library



---

archive/issue_comments_156381.json:
```json
{
    "body": "<a id='comment:24'></a>\nNew patch fixes all doctest errors (except for the upstream factoring bug).",
    "created_at": "2012-08-02T10:06:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156381",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:24'></a>
New patch fixes all doctest errors (except for the upstream factoring bug).



---

archive/issue_comments_156382.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -6,6 +6,8 @@\n - [#439: factorize() returns wrong constant](http://www.singular.uni-kl.de:8002/trac/ticket/439) (fixed upstream, but not in a stable release)\n - [#440: Factoring over a finite field returns reducible factor](http://www.singular.uni-kl.de:8002/trac/ticket/440) (fixed upstream, but not in a stable release)\n - [#441: Factoring over a finite field sometimes returns wrong result](http://www.singular.uni-kl.de:8002/trac/ticket/441) (no feedback yet)\n+\n+**Apply** [attachment:13237_singular_3_1_5.patch]\n \n New **spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg)\n \n``````\n",
    "created_at": "2012-08-02T10:08:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156382",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -6,6 +6,8 @@
 - [#439: factorize() returns wrong constant](http://www.singular.uni-kl.de:8002/trac/ticket/439) (fixed upstream, but not in a stable release)
 - [#440: Factoring over a finite field returns reducible factor](http://www.singular.uni-kl.de:8002/trac/ticket/440) (fixed upstream, but not in a stable release)
 - [#441: Factoring over a finite field sometimes returns wrong result](http://www.singular.uni-kl.de:8002/trac/ticket/441) (no feedback yet)
+
+**Apply** [attachment:13237_singular_3_1_5.patch]
 
 New **spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg)
 
``````




---

archive/issue_comments_156383.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -5,7 +5,7 @@\n - [#438: Singular configured --without-debug doesn't build](http://www.singular.uni-kl.de:8002/trac/ticket/438) (developers acknowledge the bug)\n - [#439: factorize() returns wrong constant](http://www.singular.uni-kl.de:8002/trac/ticket/439) (fixed upstream, but not in a stable release)\n - [#440: Factoring over a finite field returns reducible factor](http://www.singular.uni-kl.de:8002/trac/ticket/440) (fixed upstream, but not in a stable release)\n-- [#441: Factoring over a finite field sometimes returns wrong result](http://www.singular.uni-kl.de:8002/trac/ticket/441) (no feedback yet)\n+- [#441: Factoring over a finite field sometimes returns wrong result](http://www.singular.uni-kl.de:8002/trac/ticket/441) (silently fixed upstream, but not in a stable release)\n \n **Apply** [attachment:13237_singular_3_1_5.patch]\n \n``````\n",
    "created_at": "2012-08-02T13:52:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156383",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -5,7 +5,7 @@
 - [#438: Singular configured --without-debug doesn't build](http://www.singular.uni-kl.de:8002/trac/ticket/438) (developers acknowledge the bug)
 - [#439: factorize() returns wrong constant](http://www.singular.uni-kl.de:8002/trac/ticket/439) (fixed upstream, but not in a stable release)
 - [#440: Factoring over a finite field returns reducible factor](http://www.singular.uni-kl.de:8002/trac/ticket/440) (fixed upstream, but not in a stable release)
-- [#441: Factoring over a finite field sometimes returns wrong result](http://www.singular.uni-kl.de:8002/trac/ticket/441) (no feedback yet)
+- [#441: Factoring over a finite field sometimes returns wrong result](http://www.singular.uni-kl.de:8002/trac/ticket/441) (silently fixed upstream, but not in a stable release)
 
 **Apply** [attachment:13237_singular_3_1_5.patch]
 
``````




---

archive/issue_comments_156384.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,7 +2,7 @@\n \n Upstream bugs discovered:\n - [#437: negate() should be NTL::negate()](http://www.singular.uni-kl.de:8002/trac/ticket/437) (little feedback)\n-- [#438: Singular configured --without-debug doesn't build](http://www.singular.uni-kl.de:8002/trac/ticket/438) (developers acknowledge the bug)\n+- [#438: Singular configured --without-debug doesn't build](http://www.singular.uni-kl.de:8002/trac/ticket/438) (\"fixed\" by removing the option)\n - [#439: factorize() returns wrong constant](http://www.singular.uni-kl.de:8002/trac/ticket/439) (fixed upstream, but not in a stable release)\n - [#440: Factoring over a finite field returns reducible factor](http://www.singular.uni-kl.de:8002/trac/ticket/440) (fixed upstream, but not in a stable release)\n - [#441: Factoring over a finite field sometimes returns wrong result](http://www.singular.uni-kl.de:8002/trac/ticket/441) (silently fixed upstream, but not in a stable release)\n``````\n",
    "created_at": "2012-08-02T13:57:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156384",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,7 +2,7 @@
 
 Upstream bugs discovered:
 - [#437: negate() should be NTL::negate()](http://www.singular.uni-kl.de:8002/trac/ticket/437) (little feedback)
-- [#438: Singular configured --without-debug doesn't build](http://www.singular.uni-kl.de:8002/trac/ticket/438) (developers acknowledge the bug)
+- [#438: Singular configured --without-debug doesn't build](http://www.singular.uni-kl.de:8002/trac/ticket/438) ("fixed" by removing the option)
 - [#439: factorize() returns wrong constant](http://www.singular.uni-kl.de:8002/trac/ticket/439) (fixed upstream, but not in a stable release)
 - [#440: Factoring over a finite field returns reducible factor](http://www.singular.uni-kl.de:8002/trac/ticket/440) (fixed upstream, but not in a stable release)
 - [#441: Factoring over a finite field sometimes returns wrong result](http://www.singular.uni-kl.de:8002/trac/ticket/441) (silently fixed upstream, but not in a stable release)
``````




---

archive/issue_events_114488.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-02T14:08:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13237#event-114488"
}
```



---

archive/issue_comments_156385.json:
```json
{
    "body": "<a id='comment:28'></a>\nI added a patch for Singular Trac 441 (which is in the git sources, even though Trac hasn't been updated yet).\n\nNeeds review (the spkg will be committed after positive_review if that's okay).",
    "created_at": "2012-08-02T14:08:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156385",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:28'></a>
I added a patch for Singular Trac 441 (which is in the git sources, even though Trac hasn't been updated yet).

Needs review (the spkg will be committed after positive_review if that's okay).



---

archive/issue_comments_156386.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -5,7 +5,7 @@\n - [#438: Singular configured --without-debug doesn't build](http://www.singular.uni-kl.de:8002/trac/ticket/438) (\"fixed\" by removing the option)\n - [#439: factorize() returns wrong constant](http://www.singular.uni-kl.de:8002/trac/ticket/439) (fixed upstream, but not in a stable release)\n - [#440: Factoring over a finite field returns reducible factor](http://www.singular.uni-kl.de:8002/trac/ticket/440) (fixed upstream, but not in a stable release)\n-- [#441: Factoring over a finite field sometimes returns wrong result](http://www.singular.uni-kl.de:8002/trac/ticket/441) (silently fixed upstream, but not in a stable release)\n+- [#441: Factoring over a finite field sometimes returns wrong result](http://www.singular.uni-kl.de:8002/trac/ticket/441) (fixed upstream, but not in a stable release)\n \n **Apply** [attachment:13237_singular_3_1_5.patch]\n \n``````\n",
    "created_at": "2012-08-02T14:48:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156386",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -5,7 +5,7 @@
 - [#438: Singular configured --without-debug doesn't build](http://www.singular.uni-kl.de:8002/trac/ticket/438) ("fixed" by removing the option)
 - [#439: factorize() returns wrong constant](http://www.singular.uni-kl.de:8002/trac/ticket/439) (fixed upstream, but not in a stable release)
 - [#440: Factoring over a finite field returns reducible factor](http://www.singular.uni-kl.de:8002/trac/ticket/440) (fixed upstream, but not in a stable release)
-- [#441: Factoring over a finite field sometimes returns wrong result](http://www.singular.uni-kl.de:8002/trac/ticket/441) (silently fixed upstream, but not in a stable release)
+- [#441: Factoring over a finite field sometimes returns wrong result](http://www.singular.uni-kl.de:8002/trac/ticket/441) (fixed upstream, but not in a stable release)
 
 **Apply** [attachment:13237_singular_3_1_5.patch]
 
``````




---

archive/issue_comments_156387.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -6,6 +6,8 @@\n - [#439: factorize() returns wrong constant](http://www.singular.uni-kl.de:8002/trac/ticket/439) (fixed upstream, but not in a stable release)\n - [#440: Factoring over a finite field returns reducible factor](http://www.singular.uni-kl.de:8002/trac/ticket/440) (fixed upstream, but not in a stable release)\n - [#441: Factoring over a finite field sometimes returns wrong result](http://www.singular.uni-kl.de:8002/trac/ticket/441) (fixed upstream, but not in a stable release)\n+\n+This new version fixes #13129, #12918, #12928.\n \n **Apply** [attachment:13237_singular_3_1_5.patch]\n \n``````\n",
    "created_at": "2012-08-03T06:20:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156387",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -6,6 +6,8 @@
 - [#439: factorize() returns wrong constant](http://www.singular.uni-kl.de:8002/trac/ticket/439) (fixed upstream, but not in a stable release)
 - [#440: Factoring over a finite field returns reducible factor](http://www.singular.uni-kl.de:8002/trac/ticket/440) (fixed upstream, but not in a stable release)
 - [#441: Factoring over a finite field sometimes returns wrong result](http://www.singular.uni-kl.de:8002/trac/ticket/441) (fixed upstream, but not in a stable release)
+
+This new version fixes #13129, #12918, #12928.
 
 **Apply** [attachment:13237_singular_3_1_5.patch]
 
``````




---

archive/issue_comments_156388.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -7,7 +7,7 @@\n - [#440: Factoring over a finite field returns reducible factor](http://www.singular.uni-kl.de:8002/trac/ticket/440) (fixed upstream, but not in a stable release)\n - [#441: Factoring over a finite field sometimes returns wrong result](http://www.singular.uni-kl.de:8002/trac/ticket/441) (fixed upstream, but not in a stable release)\n \n-This new version fixes #13129, #12918, #12928.\n+This new version fixes #13129, #12918, #12928, #12846.\n \n **Apply** [attachment:13237_singular_3_1_5.patch]\n \n``````\n",
    "created_at": "2012-08-03T06:35:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156388",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -7,7 +7,7 @@
 - [#440: Factoring over a finite field returns reducible factor](http://www.singular.uni-kl.de:8002/trac/ticket/440) (fixed upstream, but not in a stable release)
 - [#441: Factoring over a finite field sometimes returns wrong result](http://www.singular.uni-kl.de:8002/trac/ticket/441) (fixed upstream, but not in a stable release)
 
-This new version fixes #13129, #12918, #12928.
+This new version fixes #13129, #12918, #12928, #12846.
 
 **Apply** [attachment:13237_singular_3_1_5.patch]
 
``````




---

archive/issue_comments_156389.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -13,7 +13,7 @@\n \n New **spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg)\n \n-### singular-3-1-5.p0 (Jeroen Demeyer, 1 August 2012)\n+### singular-3-1-5.p0 (Jeroen Demeyer, 2 August 2012)\n * Trac #13237: Upgrade to version 3-1-5.\n * Removed patches which are now upstreamed:\n    - patches/Singular.Makefile.in.shared.patch\n@@ -33,6 +33,7 @@\n    - NTL_negate.patch\n    - singular_trac_439.patch\n    - singular_trac_440.patch\n+   - singular_trac_441.patch\n * In spkg-install, remove distclean() step; merge clean_headers() and\n   part of the old distclean() into remove_old_version().\n * Only unset LD on Darwin.\n@@ -43,7 +44,7 @@\n * Always configure --with-debug, as --without-debug doesn't work, see\n   http://www.singular.uni-kl.de:8002/trac/ticket/438\n * Don't create sage_singular symlink, which wasn't used anyway.\n-* Slightly change the $SAGE_LOCAL/bin/Singular script, use \"$@\"\n-  instead of $*.\n+* Replace the $SAGE_LOCAL/bin/Singular script by a symlink.\n * Remove workaround for GCC-4.0.x on Darwin (obsolete by the GCC spkg).\n * Fix formatting of spkg-install (consistent indentation, no TABs).\n+\n``````\n",
    "created_at": "2012-08-03T06:38:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156389",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -13,7 +13,7 @@
 
 New **spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg)
 
-### singular-3-1-5.p0 (Jeroen Demeyer, 1 August 2012)
+### singular-3-1-5.p0 (Jeroen Demeyer, 2 August 2012)
 * Trac #13237: Upgrade to version 3-1-5.
 * Removed patches which are now upstreamed:
    - patches/Singular.Makefile.in.shared.patch
@@ -33,6 +33,7 @@
    - NTL_negate.patch
    - singular_trac_439.patch
    - singular_trac_440.patch
+   - singular_trac_441.patch
 * In spkg-install, remove distclean() step; merge clean_headers() and
   part of the old distclean() into remove_old_version().
 * Only unset LD on Darwin.
@@ -43,7 +44,7 @@
 * Always configure --with-debug, as --without-debug doesn't work, see
   http://www.singular.uni-kl.de:8002/trac/ticket/438
 * Don't create sage_singular symlink, which wasn't used anyway.
-* Slightly change the $SAGE_LOCAL/bin/Singular script, use "$@"
-  instead of $*.
+* Replace the $SAGE_LOCAL/bin/Singular script by a symlink.
 * Remove workaround for GCC-4.0.x on Darwin (obsolete by the GCC spkg).
 * Fix formatting of spkg-install (consistent indentation, no TABs).
+
``````




---

archive/issue_comments_156390.json:
```json
{
    "body": "<a id='comment:34'></a>\nspkg and patch apply/install fine. Also the tests are fine. So I'm close to a positive review, just waiting for the patch from #12089.",
    "created_at": "2012-08-04T22:13:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156390",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:34'></a>
spkg and patch apply/install fine. Also the tests are fine. So I'm close to a positive review, just waiting for the patch from #12089.



---

archive/issue_comments_156391.json:
```json
{
    "body": "<a id='comment:35'></a>\nJust for the record:  Did pass `ptestlong` (with a bit of luck, cf. the \"random\" factoring) with Sage 5.2[.rc0] (Ubuntu 10.04.4 LTS x86_64, FSF GCC 4.7.0, with `-O3`, see above).\n\nPatch applies to Sage 5.3.beta0 as well (a few lines offset, never mind).\n\nOnly just noticed that old installations get removed before we even attempt to build the new one; this should in general only be done if the build succeeded.\n\n(Haven't yet closely looked at [the changes to] `spkg-install`.)",
    "created_at": "2012-08-04T23:39:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156391",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:35'></a>
Just for the record:  Did pass `ptestlong` (with a bit of luck, cf. the "random" factoring) with Sage 5.2[.rc0] (Ubuntu 10.04.4 LTS x86_64, FSF GCC 4.7.0, with `-O3`, see above).

Patch applies to Sage 5.3.beta0 as well (a few lines offset, never mind).

Only just noticed that old installations get removed before we even attempt to build the new one; this should in general only be done if the build succeeded.

(Haven't yet closely looked at [the changes to] `spkg-install`.)



---

archive/issue_comments_156392.json:
```json
{
    "body": "<a id='comment:36'></a>\nReplying to [leif](#comment%3A35):\n> Patch applies to Sage 5.3.beta0 as well (a few lines offset, never mind).\n\n\n`ptestlong` also passed without errors, but took longer than usual (despite the machine being otherwise idle).",
    "created_at": "2012-08-05T05:01:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156392",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:36'></a>
Replying to [leif](#comment%3A35):
> Patch applies to Sage 5.3.beta0 as well (a few lines offset, never mind).


`ptestlong` also passed without errors, but took longer than usual (despite the machine being otherwise idle).



---

archive/issue_comments_156393.json:
```json
{
    "body": "<a id='comment:37'></a>\nIt would be nice to fix #13344 as well in this ticket.\nHopefully the problem should be tracked down quite quickly.",
    "created_at": "2012-08-05T16:23:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156393",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:37'></a>
It would be nice to fix #13344 as well in this ticket.
Hopefully the problem should be tracked down quite quickly.



---

archive/issue_comments_156394.json:
```json
{
    "body": "<a id='comment:38'></a>\nReplying to [jpflori](#comment%3A37):\n> It would be nice to fix #13344 as well in this ticket.\n> Hopefully the problem should be tracked down quite quickly.\n\n\nyes, I can confirm that installing this spkg on MacOSX one gets Singular LIB files into `SAGELOCAL/lib/`, as well as in the right place, i.e. `SAGELOCAL/share/singular/`, which is certainly not what one would want.",
    "created_at": "2012-08-05T18:10:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156394",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:38'></a>
Replying to [jpflori](#comment%3A37):
> It would be nice to fix #13344 as well in this ticket.
> Hopefully the problem should be tracked down quite quickly.


yes, I can confirm that installing this spkg on MacOSX one gets Singular LIB files into `SAGELOCAL/lib/`, as well as in the right place, i.e. `SAGELOCAL/share/singular/`, which is certainly not what one would want.



---

archive/issue_events_114489.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-08-05T18:10:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13237#event-114489"
}
```



---

archive/issue_events_114490.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-08-05T18:10:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13237#event-114490"
}
```



---

archive/issue_comments_156395.json:
```json
{
    "body": "<a id='comment:39'></a>\nReplying to [dimpase](#comment%3A38):\n> yes, I can confirm that installing this spkg on MacOSX one gets Singular LIB files into `SAGELOCAL/lib/`, as well as in the right place, i.e. `SAGELOCAL/share/singular/`, which is certainly not what one would want.\n>  \n\nIt think the best solution would be to replace `$MAKE` by \"$MAKE slibdir=$SAGE_LOCAL/share/singular\" in the spkg.",
    "created_at": "2012-08-05T18:35:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156395",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:39'></a>
Replying to [dimpase](#comment%3A38):
> yes, I can confirm that installing this spkg on MacOSX one gets Singular LIB files into `SAGELOCAL/lib/`, as well as in the right place, i.e. `SAGELOCAL/share/singular/`, which is certainly not what one would want.
>  

It think the best solution would be to replace `$MAKE` by "$MAKE slibdir=$SAGE_LOCAL/share/singular" in the spkg.



---

archive/issue_comments_156396.json:
```json
{
    "body": "<a id='comment:40'></a>\nOr maybe `\"$MAKE slibdir=\\\"$SAGE_LOCAL/share/singular\\\"\"`?",
    "created_at": "2012-08-05T18:36:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156396",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:40'></a>
Or maybe `"$MAKE slibdir=\"$SAGE_LOCAL/share/singular\""`?



---

archive/issue_comments_156397.json:
```json
{
    "body": "<a id='comment:41'></a>\n@jdemeyer I could take care for the changes, if you don't mind?",
    "created_at": "2012-08-05T19:13:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156397",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:41'></a>
@jdemeyer I could take care for the changes, if you don't mind?



---

archive/issue_comments_156398.json:
```json
{
    "body": "<a id='comment:42'></a>\nJust in case (won't have time tomorrow), I was so free to propose a changed spkg here: http://boxen.math.washington.edu/home/dreyer/spkg/singular-3-1-5.p0.spkg \n\nAs before, the changes are not committed yet. Also I haven't changes the URL in the description, as Jeroen might continue with other fixes.\n\nThe changes are as follows (for review):\n{{{ #!diff\n--- singular-3-1-5.p0.old.diff\t2012-08-05 22:36:36.000000000 +0200\n+++ singular-3-1-5.p0.new.diff\t2012-08-05 22:47:29.000000000 +0200\n@@ -9,7 +9,7 @@\n diff -r 1275ac543b53 SPKG.txt\n --- a/SPKG.txt\tSat Mar 17 11:18:23 2012 +0100\n +++ b/SPKG.txt\tSun Aug 05 22:36:36 2012 +0200\n-@@ -30,14 +30,17 @@\n+@@ -30,14 +30,19 @@\n  See spkg-changes for how to delete unnecessary stuff under src/\n  \n  Several patches are applied. \n@@ -32,10 +32,12 @@\n +   http://www.singular.uni-kl.de:8002/trac/ticket/440\n + * singular_trac_441.patch: fix taken from upstream for\n +   http://www.singular.uni-kl.de:8002/trac/ticket/441\n++ * sage_trac_12089.patch: fix (also reported upstream) from\n++   https://github.com/alexanderdreyer/SingularSources/commit/7902222\n  \n  Other notes \n* The option '--without-dynamic-kernel' is used on *all* \n-@@ -51,9 +54,51 @@\n+@@ -51,9 +56,54 @@\n     investigated as a possible cause later. \n* Be sure that Singular/Singular.rc.in is present, as occasionally this\n  was missing, which caused problems on Cygwin (e.g., see #10235)\n@@ -49,7 +51,7 @@\n  \n  == ChangeLog ==\n  \n-+=== singular-3-1-5.p0 (Jeroen Demeyer, 2 August 2012) ===\n++=== singular-3-1-5.p0 (Jeroen Demeyer, 5 August 2012) ===\n + * Trac #13237: Upgrade to version 3-1-5.\n + * Removed patches which are now upstreamed:\n +    - patches/Singular.Makefile.in.shared.patch\n@@ -70,8 +72,11 @@\n +    - singular_trac_439.patch\n +    - singular_trac_440.patch\n +    - singular_trac_441.patch\n++    - sage_trac_12089.patch\n + * In spkg-install, remove distclean() step; merge clean_headers() and\n +   part of the old distclean() into remove_old_version().\n++ * In spkg-install, added slibdir=\"$SAGE_LOCAL/share/singular\" to \n++   $MAKE install-libsingular .\n + * Only unset LD on Darwin.\n + * Remove the unsetting of TMPDIR (bug fixed upstream).\n + * Do not override user-set CFLAGS and CXXFLAGS.\n@@ -6812,6 +6817,39 @@\n- #if defined(ix86Mac_darwin)\n- #define HAVE_ELF_SYSTEM\n- #endif\n+diff -r 1275ac543b53 patches/sage_trac_12089.patch\n+--- /dev/null\tThu Jan 01 00:00:00 1970 +0000\n++++ b/patches/sage_trac_12089.patch\tSun Aug 05 22:36:36 2012 +0200\n+@@ -0,0 +1,29 @@\n++From 7902222c6e73d452b3d75576bd9bc0140f5e827a Mon Sep 17 00:00:00 2001\n++From: Alexander Dreyer <alexander.dreyer@itwm.fraunhofer.de>\n++Date: Sat, 4 Aug 2012 21:53:32 +0200\n++Subject: [PATCH] fix: apply LDFLAGS fixes from svn#13210/git#b1dfafe to cygwin-specific flags (Sage's trac #12089; reported by Jean-Pierre Flori)\n++\n++---\n++ Singular/Makefile.in |    6 +++---\n++ 1 files changed, 3 insertions(+), 3 deletions(-)\n++\n++diff --git a/Singular/Makefile.in b/Singular/Makefile.in\n++index c4a6e78..b907085 100644\n++--- a/Singular/Makefile.in\n+++++ b/Singular/Makefile.in\n++@@ -90,9 +90,9 @@ LDFLAGSG\t= -L@prefix@/kernel -L../kernel -lkernel_g `@`LD_DYN_FLAGS1@ `@`LDFLAGS@\n++ LDFLAGSP\t= -L@prefix@/kernel -L../kernel -lkernel_p `@`LD_DYN_FLAGS1@ `@`LDFLAGS@ \n++ else\n++ ## -L/usr/local/lib -L@prefix@/modules/python --> PySingular\n++-LDFLAGS\t\t= -L@prefix@/kernel -L/bin -lkernel `@`LDFLAGS@ -L/usr/local/lib -L../modules/python \n++-LDFLAGSG\t= -L@prefix@/kernel -L/bin -lkernel_g `@`LDFLAGS@ \n++-LDFLAGSP\t= -L@prefix@/kernel -L/bin -lkernel_p `@`LDFLAGS@ \n+++LDFLAGS\t\t= -L@prefix@/kernel -L../kernel -L/bin -lkernel `@`LDFLAGS@ -L/usr/local/lib -L../modules/python \n+++LDFLAGSG\t= -L@prefix@/kernel -L../kernel -L/bin -lkernel_g `@`LDFLAGS@ \n+++LDFLAGSP\t= -L@prefix@/kernel -L../kernel -L/bin -lkernel_p `@`LDFLAGS@ \n++ endif\n++ LD_DYN_FLAGS1\t= `@`LD_DYN_FLAGS1@\n++ LD_DYN_FLAGS2\t= `@`LD_DYN_FLAGS2@\n++-- \n++1.6.0.2\n++\n diff -r 1275ac543b53 patches/sing_win.cc.diff\n --- a/patches/sing_win.cc.diff\tSat Mar 17 11:18:23 2012 +0100\n +++ /dev/null\tThu Jan 01 00:00:00 1970 +0000\n@@ -7330,7 +7368,8 @@\n +    config || return $?\n  \n      $MAKE clean\n-     $MAKE install-libsingular\n+-    $MAKE install-libsingular\n++    $MAKE slibdir=\"$SAGE_LOCAL/share/singular\" install-libsingular\n  \n      if [ $? -ne 0 ]; then\n-        echo \"Unable to install libsingular.\"\n}}}",
    "created_at": "2012-08-05T20:59:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156398",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:42'></a>
Just in case (won't have time tomorrow), I was so free to propose a changed spkg here: http://boxen.math.washington.edu/home/dreyer/spkg/singular-3-1-5.p0.spkg 

As before, the changes are not committed yet. Also I haven't changes the URL in the description, as Jeroen might continue with other fixes.

The changes are as follows (for review):
{{{ #!diff
--- singular-3-1-5.p0.old.diff	2012-08-05 22:36:36.000000000 +0200
+++ singular-3-1-5.p0.new.diff	2012-08-05 22:47:29.000000000 +0200
@@ -9,7 +9,7 @@
 diff -r 1275ac543b53 SPKG.txt
 --- a/SPKG.txt	Sat Mar 17 11:18:23 2012 +0100
 +++ b/SPKG.txt	Sun Aug 05 22:36:36 2012 +0200
-@@ -30,14 +30,17 @@
+@@ -30,14 +30,19 @@
  See spkg-changes for how to delete unnecessary stuff under src/
  
  Several patches are applied. 
@@ -32,10 +32,12 @@
 +   http://www.singular.uni-kl.de:8002/trac/ticket/440
 + * singular_trac_441.patch: fix taken from upstream for
 +   http://www.singular.uni-kl.de:8002/trac/ticket/441
++ * sage_trac_12089.patch: fix (also reported upstream) from
++   https://github.com/alexanderdreyer/SingularSources/commit/7902222
  
  Other notes 
* The option '--without-dynamic-kernel' is used on *all* 
-@@ -51,9 +54,51 @@
+@@ -51,9 +56,54 @@
     investigated as a possible cause later. 
* Be sure that Singular/Singular.rc.in is present, as occasionally this
  was missing, which caused problems on Cygwin (e.g., see #10235)
@@ -49,7 +51,7 @@
  
  == ChangeLog ==
  
-+=== singular-3-1-5.p0 (Jeroen Demeyer, 2 August 2012) ===
++=== singular-3-1-5.p0 (Jeroen Demeyer, 5 August 2012) ===
 + * Trac #13237: Upgrade to version 3-1-5.
 + * Removed patches which are now upstreamed:
 +    - patches/Singular.Makefile.in.shared.patch
@@ -70,8 +72,11 @@
 +    - singular_trac_439.patch
 +    - singular_trac_440.patch
 +    - singular_trac_441.patch
++    - sage_trac_12089.patch
 + * In spkg-install, remove distclean() step; merge clean_headers() and
 +   part of the old distclean() into remove_old_version().
++ * In spkg-install, added slibdir="$SAGE_LOCAL/share/singular" to 
++   $MAKE install-libsingular .
 + * Only unset LD on Darwin.
 + * Remove the unsetting of TMPDIR (bug fixed upstream).
 + * Do not override user-set CFLAGS and CXXFLAGS.
@@ -6812,6 +6817,39 @@
- #if defined(ix86Mac_darwin)
- #define HAVE_ELF_SYSTEM
- #endif
+diff -r 1275ac543b53 patches/sage_trac_12089.patch
+--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
++++ b/patches/sage_trac_12089.patch	Sun Aug 05 22:36:36 2012 +0200
+@@ -0,0 +1,29 @@
++From 7902222c6e73d452b3d75576bd9bc0140f5e827a Mon Sep 17 00:00:00 2001
++From: Alexander Dreyer <alexander.dreyer@itwm.fraunhofer.de>
++Date: Sat, 4 Aug 2012 21:53:32 +0200
++Subject: [PATCH] fix: apply LDFLAGS fixes from svn#13210/git#b1dfafe to cygwin-specific flags (Sage's trac #12089; reported by Jean-Pierre Flori)
++
++---
++ Singular/Makefile.in |    6 +++---
++ 1 files changed, 3 insertions(+), 3 deletions(-)
++
++diff --git a/Singular/Makefile.in b/Singular/Makefile.in
++index c4a6e78..b907085 100644
++--- a/Singular/Makefile.in
+++++ b/Singular/Makefile.in
++@@ -90,9 +90,9 @@ LDFLAGSG	= -L@prefix@/kernel -L../kernel -lkernel_g `@`LD_DYN_FLAGS1@ `@`LDFLAGS@
++ LDFLAGSP	= -L@prefix@/kernel -L../kernel -lkernel_p `@`LD_DYN_FLAGS1@ `@`LDFLAGS@ 
++ else
++ ## -L/usr/local/lib -L@prefix@/modules/python --> PySingular
++-LDFLAGS		= -L@prefix@/kernel -L/bin -lkernel `@`LDFLAGS@ -L/usr/local/lib -L../modules/python 
++-LDFLAGSG	= -L@prefix@/kernel -L/bin -lkernel_g `@`LDFLAGS@ 
++-LDFLAGSP	= -L@prefix@/kernel -L/bin -lkernel_p `@`LDFLAGS@ 
+++LDFLAGS		= -L@prefix@/kernel -L../kernel -L/bin -lkernel `@`LDFLAGS@ -L/usr/local/lib -L../modules/python 
+++LDFLAGSG	= -L@prefix@/kernel -L../kernel -L/bin -lkernel_g `@`LDFLAGS@ 
+++LDFLAGSP	= -L@prefix@/kernel -L../kernel -L/bin -lkernel_p `@`LDFLAGS@ 
++ endif
++ LD_DYN_FLAGS1	= `@`LD_DYN_FLAGS1@
++ LD_DYN_FLAGS2	= `@`LD_DYN_FLAGS2@
++-- 
++1.6.0.2
++
 diff -r 1275ac543b53 patches/sing_win.cc.diff
 --- a/patches/sing_win.cc.diff	Sat Mar 17 11:18:23 2012 +0100
 +++ /dev/null	Thu Jan 01 00:00:00 1970 +0000
@@ -7330,7 +7368,8 @@
 +    config || return $?
  
      $MAKE clean
-     $MAKE install-libsingular
+-    $MAKE install-libsingular
++    $MAKE slibdir="$SAGE_LOCAL/share/singular" install-libsingular
  
      if [ $? -ne 0 ]; then
-        echo "Unable to install libsingular."
}}}



---

archive/issue_comments_156399.json:
```json
{
    "body": "**Changing author** from \"Jeroen Demeyer\" to \"Jeroen Demeyer, Alexander Dreyer, Dmitrii Pasechnik, Karl-Dieter Crisman, Jean-Pierre Flori\".",
    "created_at": "2012-08-06T10:14:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156399",
    "user": "https://github.com/jdemeyer"
}
```

**Changing author** from "Jeroen Demeyer" to "Jeroen Demeyer, Alexander Dreyer, Dmitrii Pasechnik, Karl-Dieter Crisman, Jean-Pierre Flori".



---

archive/issue_comments_156400.json:
```json
{
    "body": "<a id='comment:44'></a>\nFor the slibdir issue, I am patching Makefile.in instead, I think this is the best solution.",
    "created_at": "2012-08-06T10:16:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156400",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:44'></a>
For the slibdir issue, I am patching Makefile.in instead, I think this is the best solution.



---

archive/issue_comments_156401.json:
```json
{
    "body": "<a id='comment:45'></a>\nJust a reminder for not forgetting to close #12089 and #13344. when this one is closed.",
    "created_at": "2012-08-06T10:20:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156401",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:45'></a>
Just a reminder for not forgetting to close #12089 and #13344. when this one is closed.



---

archive/issue_events_114491.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-06T10:21:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13237#event-114491"
}
```



---

archive/issue_events_114492.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-06T10:21:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13237#event-114492"
}
```



---

archive/issue_comments_156402.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -7,13 +7,13 @@\n - [#440: Factoring over a finite field returns reducible factor](http://www.singular.uni-kl.de:8002/trac/ticket/440) (fixed upstream, but not in a stable release)\n - [#441: Factoring over a finite field sometimes returns wrong result](http://www.singular.uni-kl.de:8002/trac/ticket/441) (fixed upstream, but not in a stable release)\n \n-This new version fixes #13129, #12918, #12928, #12846.\n+This new version fixes #13129, #12918, #12928, #12846, #12089, #13344.\n \n **Apply** [attachment:13237_singular_3_1_5.patch]\n \n New **spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg)\n \n-### singular-3-1-5.p0 (Jeroen Demeyer, 2 August 2012)\n+### singular-3-1-5.p0 (Jeroen Demeyer, Alexander Dryer, 6 August 2012)\n * Trac #13237: Upgrade to version 3-1-5.\n * Removed patches which are now upstreamed:\n    - patches/Singular.Makefile.in.shared.patch\n@@ -34,6 +34,9 @@\n    - singular_trac_439.patch\n    - singular_trac_440.patch\n    - singular_trac_441.patch\n+   - sage_trac_12089.patch\n+   - slibdir.patch\n+* Don't create the LIB->lib symlink, which is no longer needed.\n * In spkg-install, remove distclean() step; merge clean_headers() and\n   part of the old distclean() into remove_old_version().\n * Only unset LD on Darwin.\n``````\n",
    "created_at": "2012-08-06T10:21:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156402",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -7,13 +7,13 @@
 - [#440: Factoring over a finite field returns reducible factor](http://www.singular.uni-kl.de:8002/trac/ticket/440) (fixed upstream, but not in a stable release)
 - [#441: Factoring over a finite field sometimes returns wrong result](http://www.singular.uni-kl.de:8002/trac/ticket/441) (fixed upstream, but not in a stable release)
 
-This new version fixes #13129, #12918, #12928, #12846.
+This new version fixes #13129, #12918, #12928, #12846, #12089, #13344.
 
 **Apply** [attachment:13237_singular_3_1_5.patch]
 
 New **spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg)
 
-### singular-3-1-5.p0 (Jeroen Demeyer, 2 August 2012)
+### singular-3-1-5.p0 (Jeroen Demeyer, Alexander Dryer, 6 August 2012)
 * Trac #13237: Upgrade to version 3-1-5.
 * Removed patches which are now upstreamed:
    - patches/Singular.Makefile.in.shared.patch
@@ -34,6 +34,9 @@
    - singular_trac_439.patch
    - singular_trac_440.patch
    - singular_trac_441.patch
+   - sage_trac_12089.patch
+   - slibdir.patch
+* Don't create the LIB->lib symlink, which is no longer needed.
 * In spkg-install, remove distclean() step; merge clean_headers() and
   part of the old distclean() into remove_old_version().
 * Only unset LD on Darwin.
``````




---

archive/issue_comments_156403.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -13,7 +13,7 @@\n \n New **spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg)\n \n-### singular-3-1-5.p0 (Jeroen Demeyer, Alexander Dryer, 6 August 2012)\n+### singular-3-1-5.p0 (Jeroen Demeyer, Alexander Dreyer, 6 August 2012)\n * Trac #13237: Upgrade to version 3-1-5.\n * Removed patches which are now upstreamed:\n    - patches/Singular.Makefile.in.shared.patch\n``````\n",
    "created_at": "2012-08-06T10:27:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156403",
    "user": "https://github.com/alexanderdreyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -13,7 +13,7 @@
 
 New **spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg)
 
-### singular-3-1-5.p0 (Jeroen Demeyer, Alexander Dryer, 6 August 2012)
+### singular-3-1-5.p0 (Jeroen Demeyer, Alexander Dreyer, 6 August 2012)
 * Trac #13237: Upgrade to version 3-1-5.
 * Removed patches which are now upstreamed:
    - patches/Singular.Makefile.in.shared.patch
``````




---

archive/issue_comments_156404.json:
```json
{
    "body": "<a id='comment:48'></a>\nJust nitpicking: there a typo in my name.",
    "created_at": "2012-08-06T10:28:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156404",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:48'></a>
Just nitpicking: there a typo in my name.



---

archive/issue_comments_156405.json:
```json
{
    "body": "<a id='comment:49'></a>\nReplying to [AlexanderDreyer](#comment%3A48):\n> Just nitpicking: there a typo in my name.\n\nApologies, fixed.",
    "created_at": "2012-08-06T10:31:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156405",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:49'></a>
Replying to [AlexanderDreyer](#comment%3A48):
> Just nitpicking: there a typo in my name.

Apologies, fixed.



---

archive/issue_events_114493.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-06T11:37:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13237#event-114493"
}
```



---

archive/issue_events_114494.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-06T11:37:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13237#event-114494"
}
```



---

archive/issue_events_114495.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-06T12:33:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13237#event-114495"
}
```



---

archive/issue_events_114496.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-06T12:33:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13237#event-114496"
}
```



---

archive/issue_comments_156406.json:
```json
{
    "body": "<a id='comment:52'></a>\nReplying to [leif](#comment%3A35):\n> Only just noticed that old installations get removed before we even attempt to build the new one; this should in general only be done if the build succeeded.\n\n\nUnfortunately, Singular doesn't have separate `build` and `install` targets.  So building and installing must happen together.",
    "created_at": "2012-08-06T14:10:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156406",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:52'></a>
Replying to [leif](#comment%3A35):
> Only just noticed that old installations get removed before we even attempt to build the new one; this should in general only be done if the build succeeded.


Unfortunately, Singular doesn't have separate `build` and `install` targets.  So building and installing must happen together.



---

archive/issue_comments_156407.json:
```json
{
    "body": "<a id='comment:53'></a>\nReplying to [jdemeyer](#comment%3A51):\nI can confirm that the latest spkg installs cleanly on MacOSX 10.6.8 and on Cygwin.",
    "created_at": "2012-08-06T14:26:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156407",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:53'></a>
Replying to [jdemeyer](#comment%3A51):
I can confirm that the latest spkg installs cleanly on MacOSX 10.6.8 and on Cygwin.



---

archive/issue_comments_156408.json:
```json
{
    "body": "<a id='comment:54'></a>\nReplying to [dimpase](#comment%3A53):\n> Replying to [jdemeyer](#comment%3A51):\n> I can confirm that the latest spkg installs cleanly on MacOSX 10.6.8 and on Cygwin.\n\nSame here on Cygwin and Linux (Ubuntu 12.04 x86_64).\nAnd I'm happy with the changes related to #13344.\nI've given it positive review.",
    "created_at": "2012-08-06T14:37:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156408",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:54'></a>
Replying to [dimpase](#comment%3A53):
> Replying to [jdemeyer](#comment%3A51):
> I can confirm that the latest spkg installs cleanly on MacOSX 10.6.8 and on Cygwin.

Same here on Cygwin and Linux (Ubuntu 12.04 x86_64).
And I'm happy with the changes related to #13344.
I've given it positive review.



---

archive/issue_comments_156409.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,11 +1,12 @@\n Upgrade Singular to [version 3-1-5](http://www.singular.uni-kl.de/index.php/news/release-of-singular-3-1-5.html) (released 12 July 2012).\n \n Upstream bugs discovered:\n-- [#437: negate() should be NTL::negate()](http://www.singular.uni-kl.de:8002/trac/ticket/437) (little feedback)\n+- [#437: negate() should be NTL::negate()](http://www.singular.uni-kl.de:8002/trac/ticket/437) (upstream needs testers)\n - [#438: Singular configured --without-debug doesn't build](http://www.singular.uni-kl.de:8002/trac/ticket/438) (\"fixed\" by removing the option)\n - [#439: factorize() returns wrong constant](http://www.singular.uni-kl.de:8002/trac/ticket/439) (fixed upstream, but not in a stable release)\n - [#440: Factoring over a finite field returns reducible factor](http://www.singular.uni-kl.de:8002/trac/ticket/440) (fixed upstream, but not in a stable release)\n - [#441: Factoring over a finite field sometimes returns wrong result](http://www.singular.uni-kl.de:8002/trac/ticket/441) (fixed upstream, but not in a stable release)\n+- [#443: configure should check for nanosleep in -lrt](http://www.singular.uni-kl.de:8002/trac/ticket/443) (no feedback yet)\n \n This new version fixes #13129, #12918, #12928, #12846, #12089, #13344.\n \n``````\n",
    "created_at": "2012-08-09T06:38:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156409",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,11 +1,12 @@
 Upgrade Singular to [version 3-1-5](http://www.singular.uni-kl.de/index.php/news/release-of-singular-3-1-5.html) (released 12 July 2012).
 
 Upstream bugs discovered:
-- [#437: negate() should be NTL::negate()](http://www.singular.uni-kl.de:8002/trac/ticket/437) (little feedback)
+- [#437: negate() should be NTL::negate()](http://www.singular.uni-kl.de:8002/trac/ticket/437) (upstream needs testers)
 - [#438: Singular configured --without-debug doesn't build](http://www.singular.uni-kl.de:8002/trac/ticket/438) ("fixed" by removing the option)
 - [#439: factorize() returns wrong constant](http://www.singular.uni-kl.de:8002/trac/ticket/439) (fixed upstream, but not in a stable release)
 - [#440: Factoring over a finite field returns reducible factor](http://www.singular.uni-kl.de:8002/trac/ticket/440) (fixed upstream, but not in a stable release)
 - [#441: Factoring over a finite field sometimes returns wrong result](http://www.singular.uni-kl.de:8002/trac/ticket/441) (fixed upstream, but not in a stable release)
+- [#443: configure should check for nanosleep in -lrt](http://www.singular.uni-kl.de:8002/trac/ticket/443) (no feedback yet)
 
 This new version fixes #13129, #12918, #12928, #12846, #12089, #13344.
 
``````




---

archive/issue_comments_156410.json:
```json
{
    "body": "<a id='comment:55'></a>\nThis doesn't build on Solaris: http://www.singular.uni-kl.de:8002/trac/ticket/443",
    "created_at": "2012-08-09T06:38:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156410",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:55'></a>
This doesn't build on Solaris: http://www.singular.uni-kl.de:8002/trac/ticket/443



---

archive/issue_events_114497.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-09T06:38:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13237#event-114497"
}
```



---

archive/issue_events_114498.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-09T06:38:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13237#event-114498"
}
```



---

archive/issue_comments_156411.json:
```json
{
    "body": "<a id='comment:56'></a>\nHannes Sch\u00f6nemann of the Singular team has provided a patch for this: https://github.com/Singular/Sources/commit/cf39407a525018da4baffd05e88315bd83075f8c.patch",
    "created_at": "2012-08-10T11:25:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156411",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:56'></a>
Hannes Sch√∂nemann of the Singular team has provided a patch for this: https://github.com/Singular/Sources/commit/cf39407a525018da4baffd05e88315bd83075f8c.patch



---

archive/issue_events_114499.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-10T20:56:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13237#event-114499"
}
```



---

archive/issue_events_114500.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-10T20:56:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13237#event-114500"
}
```



---

archive/issue_comments_156412.json:
```json
{
    "body": "<a id='comment:57'></a>\nSeems to build fine on Solaris now, needs review again.",
    "created_at": "2012-08-10T20:56:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156412",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:57'></a>
Seems to build fine on Solaris now, needs review again.



---

archive/issue_comments_156413.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -6,7 +6,7 @@\n - [#439: factorize() returns wrong constant](http://www.singular.uni-kl.de:8002/trac/ticket/439) (fixed upstream, but not in a stable release)\n - [#440: Factoring over a finite field returns reducible factor](http://www.singular.uni-kl.de:8002/trac/ticket/440) (fixed upstream, but not in a stable release)\n - [#441: Factoring over a finite field sometimes returns wrong result](http://www.singular.uni-kl.de:8002/trac/ticket/441) (fixed upstream, but not in a stable release)\n-- [#443: configure should check for nanosleep in -lrt](http://www.singular.uni-kl.de:8002/trac/ticket/443) (no feedback yet)\n+- [#443: configure should check for nanosleep in -lrt](http://www.singular.uni-kl.de:8002/trac/ticket/443) (fixed upstream, but not in a stable release)\n \n This new version fixes #13129, #12918, #12928, #12846, #12089, #13344.\n \n@@ -14,7 +14,7 @@\n \n New **spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg)\n \n-### singular-3-1-5.p0 (Jeroen Demeyer, Alexander Dreyer, 6 August 2012)\n+### singular-3-1-5.p0 (Jeroen Demeyer, Alexander Dreyer, 10 August 2012)\n * Trac #13237: Upgrade to version 3-1-5.\n * Removed patches which are now upstreamed:\n    - patches/Singular.Makefile.in.shared.patch\n@@ -35,8 +35,11 @@\n    - singular_trac_439.patch\n    - singular_trac_440.patch\n    - singular_trac_441.patch\n+   - singular_trac_443.patch\n    - sage_trac_12089.patch\n    - slibdir.patch\n+* When building Singular, don't first make install and then\n+  make install-nolns. Instead, only do the latter.\n * Don't create the LIB->lib symlink, which is no longer needed.\n * In spkg-install, remove distclean() step; merge clean_headers() and\n   part of the old distclean() into remove_old_version().\n``````\n",
    "created_at": "2012-08-10T20:56:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156413",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -6,7 +6,7 @@
 - [#439: factorize() returns wrong constant](http://www.singular.uni-kl.de:8002/trac/ticket/439) (fixed upstream, but not in a stable release)
 - [#440: Factoring over a finite field returns reducible factor](http://www.singular.uni-kl.de:8002/trac/ticket/440) (fixed upstream, but not in a stable release)
 - [#441: Factoring over a finite field sometimes returns wrong result](http://www.singular.uni-kl.de:8002/trac/ticket/441) (fixed upstream, but not in a stable release)
-- [#443: configure should check for nanosleep in -lrt](http://www.singular.uni-kl.de:8002/trac/ticket/443) (no feedback yet)
+- [#443: configure should check for nanosleep in -lrt](http://www.singular.uni-kl.de:8002/trac/ticket/443) (fixed upstream, but not in a stable release)
 
 This new version fixes #13129, #12918, #12928, #12846, #12089, #13344.
 
@@ -14,7 +14,7 @@
 
 New **spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg)
 
-### singular-3-1-5.p0 (Jeroen Demeyer, Alexander Dreyer, 6 August 2012)
+### singular-3-1-5.p0 (Jeroen Demeyer, Alexander Dreyer, 10 August 2012)
 * Trac #13237: Upgrade to version 3-1-5.
 * Removed patches which are now upstreamed:
    - patches/Singular.Makefile.in.shared.patch
@@ -35,8 +35,11 @@
    - singular_trac_439.patch
    - singular_trac_440.patch
    - singular_trac_441.patch
+   - singular_trac_443.patch
    - sage_trac_12089.patch
    - slibdir.patch
+* When building Singular, don't first make install and then
+  make install-nolns. Instead, only do the latter.
 * Don't create the LIB->lib symlink, which is no longer needed.
 * In spkg-install, remove distclean() step; merge clean_headers() and
   part of the old distclean() into remove_old_version().
``````




---

archive/attachments_017907.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "singular-3-1-5.p0.diff",
    "asset_url": "tarball://root/attachments/some-uuid/ticket13237/singular-3-1-5.p0.diff",
    "created_at": "2012-08-10T21:00:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.diff",
    "user": "https://github.com/jdemeyer"
}
```



---

archive/issue_comments_156414.json:
```json
{
    "body": "Diff for the singular spkg. For reference / review only.",
    "created_at": "2012-08-10T21:00:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156414",
    "user": "https://github.com/jdemeyer"
}
```

Diff for the singular spkg. For reference / review only.



---

archive/issue_comments_156415.json:
```json
{
    "body": "<a id='comment:58'></a>\nInstalls and tests sage/rings without any problems. So positive review from my side.",
    "created_at": "2012-08-10T23:30:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156415",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:58'></a>
Installs and tests sage/rings without any problems. So positive review from my side.



---

archive/issue_comments_156416.json:
```json
{
    "body": "**Reviewer:** Alexander Dreyer",
    "created_at": "2012-08-12T19:09:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156416",
    "user": "https://github.com/jdemeyer"
}
```

**Reviewer:** Alexander Dreyer



---

archive/issue_comments_156417.json:
```json
{
    "body": "<a id='comment:60'></a>\nAnybody willing to fully review this ticket?",
    "created_at": "2012-08-12T21:23:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156417",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:60'></a>
Anybody willing to fully review this ticket?



---

archive/issue_comments_156418.json:
```json
{
    "body": "<a id='comment:61'></a>\nI will push the button. There is a lot of clean up and of course new issues (like one of my colleagues says: exchange old bugs for new ones). I looked carefully at all the changes in spkg-install (make that very carefully for the last 2 days - but I could still have missed something) and am happy with them. Happy with the new patches too.",
    "created_at": "2012-08-15T10:16:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156418",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:61'></a>
I will push the button. There is a lot of clean up and of course new issues (like one of my colleagues says: exchange old bugs for new ones). I looked carefully at all the changes in spkg-install (make that very carefully for the last 2 days - but I could still have missed something) and am happy with them. Happy with the new patches too.



---

archive/issue_comments_156419.json:
```json
{
    "body": "**Changing reviewer** from \"Alexander Dreyer\" to \"Alexander Dreyer, Fran\u00e7ois Bissey\".",
    "created_at": "2012-08-15T10:16:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156419",
    "user": "https://github.com/kiwifb"
}
```

**Changing reviewer** from "Alexander Dreyer" to "Alexander Dreyer, Fran√ßois Bissey".



---

archive/issue_events_114501.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2012-08-15T10:16:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13237#event-114501"
}
```



---

archive/issue_events_114502.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2012-08-15T10:16:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13237#event-114502"
}
```



---

archive/issue_comments_156420.json:
```json
{
    "body": "<a id='comment:62'></a>\nReplying to [fbissey](#comment%3A61):\n> I looked carefully at all the changes in spkg-install (make that very carefully for the last 2 days - but I could still have missed something) and am happy with them. Happy with the new patches too. \n\nThanks a lot for this.",
    "created_at": "2012-08-15T20:06:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156420",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:62'></a>
Replying to [fbissey](#comment%3A61):
> I looked carefully at all the changes in spkg-install (make that very carefully for the last 2 days - but I could still have missed something) and am happy with them. Happy with the new patches too. 

Thanks a lot for this.



---

archive/issue_comments_156421.json:
```json
{
    "body": "<a id='comment:63'></a>\nThat's annoying now that I have pushed the button I found something (that obviously is not impacting sage) that should be reported upstream. The header factory/assert.h is not installed and it is included in factory/templates/ftmpl_{matrix,array,list}.cc.\nI don't think there are anymore missing headers.",
    "created_at": "2012-08-16T02:01:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156421",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:63'></a>
That's annoying now that I have pushed the button I found something (that obviously is not impacting sage) that should be reported upstream. The header factory/assert.h is not installed and it is included in factory/templates/ftmpl_{matrix,array,list}.cc.
I don't think there are anymore missing headers.



---

archive/issue_comments_156422.json:
```json
{
    "body": "<a id='comment:64'></a>\nSpoke too soon from factory/templates/ftmpl_inst.cc\n\n```\n#include \"canonicalform.h\"\n#include \"cf_map.h\"\n#include \"cf_reval.h\"\n```\nNone of these are installed either.",
    "created_at": "2012-08-16T02:44:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156422",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:64'></a>
Spoke too soon from factory/templates/ftmpl_inst.cc

```
#include "canonicalform.h"
#include "cf_map.h"
#include "cf_reval.h"
```
None of these are installed either.



---

archive/issue_comments_156423.json:
```json
{
    "body": "<a id='comment:65'></a>\nReplying to [fbissey](#comment%3A64):\nThanks for the hint, I just reported that upstream:\nhttp://www.singular.uni-kl.de:8002/trac/ticket/446",
    "created_at": "2012-08-16T07:34:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156423",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:65'></a>
Replying to [fbissey](#comment%3A64):
Thanks for the hint, I just reported that upstream:
http://www.singular.uni-kl.de:8002/trac/ticket/446



---

archive/issue_comments_156424.json:
```json
{
    "body": "<a id='comment:66'></a>\nJust to be clear. I don't think we should delay this ticket for these headers. If there was an effect on sage we would know by now. But we should definitely have a follow up ticket to pick any upstream patch. Thanks Alexander I was counting on you picking it up :).",
    "created_at": "2012-08-16T09:24:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156424",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:66'></a>
Just to be clear. I don't think we should delay this ticket for these headers. If there was an effect on sage we would know by now. But we should definitely have a follow up ticket to pick any upstream patch. Thanks Alexander I was counting on you picking it up :).



---

archive/issue_events_114503.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-17T09:32:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "milestone": "sage-5.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13237#event-114503"
}
```



---

archive/issue_events_114504.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-17T09:32:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "milestone": "sage-5.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13237#event-114504"
}
```



---

archive/issue_comments_156425.json:
```json
{
    "body": "<a id='comment:68'></a>\nI'd like to see non-regression tests in this patch, for all tickets solved by this one:\n#13129, #12918, #12928, #12846, #12089, #13344.\n\nPaul",
    "created_at": "2012-08-27T08:34:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156425",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:68'></a>
I'd like to see non-regression tests in this patch, for all tickets solved by this one:
#13129, #12918, #12928, #12846, #12089, #13344.

Paul



---

archive/issue_comments_156426.json:
```json
{
    "body": "<a id='comment:69'></a>\nReplying to [zimmerma](#comment%3A68):\n> I'd like to see non-regression tests in this patch, for all tickets solved by this one:\n> #13129, #12918, #12928, #12846, #12089, #13344.\n\n\nGood suggestion, however #12089, #13344 are about *compiling* Singular so I don't think we should add a regression test for that (the real test is just checking that any upgrades don't break the build).  Then #12846 is also tricky because it is about a computation which randomly runs slow or gets stuck.\n\nFor the other 3 tickets, we should indeed add a regression test.  I'll take care of the patch.",
    "created_at": "2012-08-27T08:49:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156426",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:69'></a>
Replying to [zimmerma](#comment%3A68):
> I'd like to see non-regression tests in this patch, for all tickets solved by this one:
> #13129, #12918, #12928, #12846, #12089, #13344.


Good suggestion, however #12089, #13344 are about *compiling* Singular so I don't think we should add a regression test for that (the real test is just checking that any upgrades don't break the build).  Then #12846 is also tricky because it is about a computation which randomly runs slow or gets stuck.

For the other 3 tickets, we should indeed add a regression test.  I'll take care of the patch.



---

archive/issue_events_114505.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-27T08:49:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13237#event-114505"
}
```



---

archive/issue_events_114506.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-27T08:49:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13237#event-114506"
}
```



---

archive/issue_comments_156427.json:
```json
{
    "body": "<a id='comment:70'></a>\nWe could test existence of *.lib files in the LIB directory for #13344, or of $SAGE_LOCAL/LIB directory.\nThe problem is critical on Cygwin where LIB resolves to lib and messes PyOpenSSL compilation (although that package won't be built anymore soon), but was also present on every platform.\n\nI agree that #12089 cannot really be tested, except for the fact that Singular succeeded to build.",
    "created_at": "2012-08-27T08:52:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156427",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:70'></a>
We could test existence of *.lib files in the LIB directory for #13344, or of $SAGE_LOCAL/LIB directory.
The problem is critical on Cygwin where LIB resolves to lib and messes PyOpenSSL compilation (although that package won't be built anymore soon), but was also present on every platform.

I agree that #12089 cannot really be tested, except for the fact that Singular succeeded to build.



---

archive/issue_comments_156428.json:
```json
{
    "body": "<a id='comment:71'></a>\nsorry I meant I'd like to see non-regression tests **if possible**. Thank you Jeroen for taking care of them.\n\nPaul",
    "created_at": "2012-08-27T09:25:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156428",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:71'></a>
sorry I meant I'd like to see non-regression tests **if possible**. Thank you Jeroen for taking care of them.

Paul



---

archive/attachments_017908.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "13237_tests.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket13237/13237_tests.patch",
    "created_at": "2012-08-27T10:34:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/jdemeyer"
}
```



---

archive/issue_comments_156429.json:
```json
{
    "body": "Additional patch",
    "created_at": "2012-08-27T10:34:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156429",
    "user": "https://github.com/jdemeyer"
}
```

Additional patch



---

archive/issue_comments_156430.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -10,7 +10,7 @@\n \n This new version fixes #13129, #12918, #12928, #12846, #12089, #13344.\n \n-**Apply** [attachment:13237_singular_3_1_5.patch]\n+**Apply** [attachment:13237_singular_3_1_5.patch] and [attachment:13237_tests.patch] to the Sage library.\n \n New **spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg)\n \n``````\n",
    "created_at": "2012-08-27T10:35:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156430",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -10,7 +10,7 @@
 
 This new version fixes #13129, #12918, #12928, #12846, #12089, #13344.
 
-**Apply** [attachment:13237_singular_3_1_5.patch]
+**Apply** [attachment:13237_singular_3_1_5.patch] and [attachment:13237_tests.patch] to the Sage library.
 
 New **spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg)
 
``````




---

archive/issue_events_114507.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-27T10:35:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "label": "critical",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13237#event-114507"
}
```



---

archive/issue_comments_156431.json:
```json
{
    "body": "<a id='comment:72'></a>\nAdditional patch [attachment:13237_tests.patch] needs review.",
    "created_at": "2012-08-27T10:35:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156431",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:72'></a>
Additional patch [attachment:13237_tests.patch] needs review.



---

archive/issue_events_114508.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-27T10:35:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13237#event-114508"
}
```



---

archive/issue_events_114509.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-27T10:35:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13237#event-114509"
}
```



---

archive/issue_events_114510.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2012-08-27T10:46:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13237#event-114510"
}
```



---

archive/issue_events_114511.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2012-08-27T10:46:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13237#event-114511"
}
```



---

archive/issue_comments_156432.json:
```json
{
    "body": "<a id='comment:73'></a>\nReplying to [jdemeyer](#comment%3A72):\n> Additional patch [attachment:13237_tests.patch] needs review.\n\nIndeed, I can confirm that the tests check for recurrence of the solved problems.",
    "created_at": "2012-08-27T10:46:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156432",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:73'></a>
Replying to [jdemeyer](#comment%3A72):
> Additional patch [attachment:13237_tests.patch] needs review.

Indeed, I can confirm that the tests check for recurrence of the solved problems.



---

archive/issue_comments_156433.json:
```json
{
    "body": "<a id='comment:74'></a>\nThere is a small thing that I'd like to change: There is a header table.h, that is currently not installed. However, it is needed by libsing (not libsingular).\n\nlibsing is a package allowing GAP to use Singular natively. I don't know if it would be of general interest to have it in Sage. Anyway: Should there be a new ticket for the installation of table.h, or should it be done here?",
    "created_at": "2012-08-27T15:32:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156433",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:74'></a>
There is a small thing that I'd like to change: There is a header table.h, that is currently not installed. However, it is needed by libsing (not libsingular).

libsing is a package allowing GAP to use Singular natively. I don't know if it would be of general interest to have it in Sage. Anyway: Should there be a new ticket for the installation of table.h, or should it be done here?



---

archive/issue_comments_156434.json:
```json
{
    "body": "<a id='comment:75'></a>\nReplying to [SimonKing](#comment%3A74):\n> There is a small thing that I'd like to change: There is a header table.h, that is currently not installed. However, it is needed by libsing (not libsingular).\n> \n> libsing is a package allowing GAP to use Singular natively. I don't know if it would be of general interest to have it in Sage. Anyway: Should there be a new ticket for the installation of table.h, or should it be done here?\n\nI think this is not related tot he upgrade, so this should be a feature request to the Singular-team. But of course, any resulting patch could be integrated in the next spkg eventually.",
    "created_at": "2012-08-27T15:45:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156434",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:75'></a>
Replying to [SimonKing](#comment%3A74):
> There is a small thing that I'd like to change: There is a header table.h, that is currently not installed. However, it is needed by libsing (not libsingular).
> 
> libsing is a package allowing GAP to use Singular natively. I don't know if it would be of general interest to have it in Sage. Anyway: Should there be a new ticket for the installation of table.h, or should it be done here?

I think this is not related tot he upgrade, so this should be a feature request to the Singular-team. But of course, any resulting patch could be integrated in the next spkg eventually.



---

archive/issue_comments_156435.json:
```json
{
    "body": "<a id='comment:76'></a>\nIt seems to me that the spkg contains uncommitted changes.",
    "created_at": "2012-08-27T17:17:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156435",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:76'></a>
It seems to me that the spkg contains uncommitted changes.



---

archive/issue_comments_156436.json:
```json
{
    "body": "<a id='comment:77'></a>\nReplying to [SimonKing](#comment%3A76):\n> It seems to me that the spkg contains uncommitted changes.\n\nYou are very right, I forgot to do `sage --pkg` after committing the changes.  Should be fixed now.",
    "created_at": "2012-08-28T07:11:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156436",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:77'></a>
Replying to [SimonKing](#comment%3A76):
> It seems to me that the spkg contains uncommitted changes.

You are very right, I forgot to do `sage --pkg` after committing the changes.  Should be fixed now.



---

archive/issue_comments_156437.json:
```json
{
    "body": "<a id='comment:78'></a>\nReplying to [AlexanderDreyer](#comment%3A75):\n> Replying to [SimonKing](#comment%3A74):\n> I think this is not related tot he upgrade,\n\n\nGranted. But if we upgrade Singular anyway, we could as well use a little patch that installs just one additional header. \n\n> so this should be a feature request to the Singular-team. But of course, any resulting patch could be integrated in the next spkg eventually.\n\n\nHere is the suggested change, anyway. Add a file patches/install_table.patch containing\n\n  ```\n  --- src/Singular/Makefile.in    2012-07-11 11:00:13.000000000 +0100\n  +++ src/Singular/Makefile.in    2012-08-27 16:22:26.013159361 +0100\n  @@ -599,7 +599,7 @@\n            ${INSTALL_PROGRAM}  $$file ${libdir}; \\\n          done\n          ${INSTALL_PROGRAM} libsingular.h ${includedir}\n  -       for file in subexpr.h tok.h grammar.h ipid.h lists.h ipshell.h attrib.h; do \\\n  +       for file in subexpr.h tok.h grammar.h ipid.h lists.h ipshell.h attrib.h table.h; do \\\n          sed -e \"s:<kernel/:<singular/:\" < $$file |sed -e \"s:<Singular/:<singular/:\"|sed -e \"s:<omalloc/:<:\"|sed -e \"s:<factory/:<:\" >${includedir}/singular/$$file ;\\\n          done\n   ```",
    "created_at": "2012-08-28T07:38:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156437",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:78'></a>
Replying to [AlexanderDreyer](#comment%3A75):
> Replying to [SimonKing](#comment%3A74):
> I think this is not related tot he upgrade,


Granted. But if we upgrade Singular anyway, we could as well use a little patch that installs just one additional header. 

> so this should be a feature request to the Singular-team. But of course, any resulting patch could be integrated in the next spkg eventually.


Here is the suggested change, anyway. Add a file patches/install_table.patch containing

  ```
  --- src/Singular/Makefile.in    2012-07-11 11:00:13.000000000 +0100
  +++ src/Singular/Makefile.in    2012-08-27 16:22:26.013159361 +0100
  @@ -599,7 +599,7 @@
            ${INSTALL_PROGRAM}  $$file ${libdir}; \
          done
          ${INSTALL_PROGRAM} libsingular.h ${includedir}
  -       for file in subexpr.h tok.h grammar.h ipid.h lists.h ipshell.h attrib.h; do \
  +       for file in subexpr.h tok.h grammar.h ipid.h lists.h ipshell.h attrib.h table.h; do \
          sed -e "s:<kernel/:<singular/:" < $$file |sed -e "s:<Singular/:<singular/:"|sed -e "s:<omalloc/:<:"|sed -e "s:<factory/:<:" >${includedir}/singular/$$file ;\
          done
   ```



---

archive/issue_comments_156438.json:
```json
{
    "body": "<a id='comment:79'></a>\nI agree with AlexanderDreyer that you should make a request to upstream for `table.h` to be installed.  If the patch gets accepted upstream, it will also be easier to review this ticket.",
    "created_at": "2012-08-28T09:28:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156438",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:79'></a>
I agree with AlexanderDreyer that you should make a request to upstream for `table.h` to be installed.  If the patch gets accepted upstream, it will also be easier to review this ticket.



---

archive/issue_comments_156439.json:
```json
{
    "body": "<a id='comment:80'></a>\nReplying to [jdemeyer](#comment%3A79):\n> I agree with AlexanderDreyer that you should make a request to upstream for `table.h` to be installed.  If the patch gets accepted upstream, it will also be easier to review this ticket.\n\n\nI asked Hans Sch\u00f6nemann today, and he answered: \"Meinetwegen.\"\n\nIn English, I guess that's: \"I don't mind.\"",
    "created_at": "2012-08-28T09:43:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156439",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:80'></a>
Replying to [jdemeyer](#comment%3A79):
> I agree with AlexanderDreyer that you should make a request to upstream for `table.h` to be installed.  If the patch gets accepted upstream, it will also be easier to review this ticket.


I asked Hans Sch√∂nemann today, and he answered: "Meinetwegen."

In English, I guess that's: "I don't mind."



---

archive/issue_events_114512.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-29T09:38:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13237#event-114512"
}
```



---

archive/issue_events_114513.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-29T09:38:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13237#event-114513"
}
```



---

archive/issue_comments_156440.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -12,7 +12,10 @@\n \n **Apply** [attachment:13237_singular_3_1_5.patch] and [attachment:13237_tests.patch] to the Sage library.\n \n-New **spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg)\n+New **spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p1.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p1.spkg)\n+\n+### singular-3-1-5.p1 (Simon King, 29 August 2012)\n+* Trac #13237: add patch install_table.patch\n \n ### singular-3-1-5.p0 (Jeroen Demeyer, Alexander Dreyer, 10 August 2012)\n * Trac #13237: Upgrade to version 3-1-5.\n``````\n",
    "created_at": "2012-08-29T09:38:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156440",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -12,7 +12,10 @@
 
 **Apply** [attachment:13237_singular_3_1_5.patch] and [attachment:13237_tests.patch] to the Sage library.
 
-New **spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p0.spkg)
+New **spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p1.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-5.p1.spkg)
+
+### singular-3-1-5.p1 (Simon King, 29 August 2012)
+* Trac #13237: add patch install_table.patch
 
 ### singular-3-1-5.p0 (Jeroen Demeyer, Alexander Dreyer, 10 August 2012)
 * Trac #13237: Upgrade to version 3-1-5.
``````




---

archive/issue_events_114514.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-29T09:39:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13237#event-114514"
}
```



---

archive/issue_events_114515.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-29T09:39:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13237#event-114515"
}
```



---

archive/attachments_017909.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "singular-3-1-5.p1.diff",
    "asset_url": "tarball://root/attachments/some-uuid/ticket13237/singular-3-1-5.p1.diff",
    "created_at": "2012-08-29T09:39:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.diff",
    "user": "https://github.com/jdemeyer"
}
```



---

archive/issue_comments_156441.json:
```json
{
    "body": "Diff for the singular spkg p0->p1. For reference / review only.",
    "created_at": "2012-08-29T09:39:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156441",
    "user": "https://github.com/jdemeyer"
}
```

Diff for the singular spkg p0->p1. For reference / review only.



---

archive/issue_events_114516.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2012-08-29T09:42:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13237#event-114516"
}
```



---

archive/issue_events_114517.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2012-08-29T09:42:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13237#event-114517"
}
```



---

archive/issue_comments_156442.json:
```json
{
    "body": "<a id='comment:83'></a>\nReplying to [jdemeyer](#comment%3A82):\nI'll give a positive review to this (was discussed before),",
    "created_at": "2012-08-29T09:42:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156442",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:83'></a>
Replying to [jdemeyer](#comment%3A82):
I'll give a positive review to this (was discussed before),



---

archive/issue_comments_156443.json:
```json
{
    "body": "<a id='comment:84'></a>\nOne questions regarding [Alexander's comment on #7797](http://trac.sagemath.org/sage_trac/ticket/7797#comment:86): Has it really been the case on Solaris SPARC that an outdated Singular/tok.h was hanging around? And if the answer is yes, a second question: Has the new singular spkg not properly installed the new one?",
    "created_at": "2012-08-29T09:50:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156443",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:84'></a>
One questions regarding [Alexander's comment on #7797](http://trac.sagemath.org/sage_trac/ticket/7797#comment:86): Has it really been the case on Solaris SPARC that an outdated Singular/tok.h was hanging around? And if the answer is yes, a second question: Has the new singular spkg not properly installed the new one?



---

archive/issue_comments_156444.json:
```json
{
    "body": "<a id='comment:85'></a>\nI am currently doing a complete build from scratch on Solaris SPARC with the new Singular to find out what's going on.",
    "created_at": "2012-08-29T09:55:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156444",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:85'></a>
I am currently doing a complete build from scratch on Solaris SPARC with the new Singular to find out what's going on.



---

archive/issue_comments_156445.json:
```json
{
    "body": "<a id='comment:86'></a>\nReplying to [jdemeyer](#comment%3A85):\n> I am currently doing a complete build from scratch on Solaris SPARC with the new Singular to find out what's going on.\n\n\nWhat came out of it?",
    "created_at": "2012-08-30T17:29:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156445",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:86'></a>
Replying to [jdemeyer](#comment%3A85):
> I am currently doing a complete build from scratch on Solaris SPARC with the new Singular to find out what's going on.


What came out of it?



---

archive/issue_comments_156446.json:
```json
{
    "body": "<a id='comment:87'></a>\nReplying to [SimonKing](#comment%3A86):\n> What came out of it?\n\n\nI'll answer at #7797 when it's finished compiling (which should be soon now) :-)",
    "created_at": "2012-08-30T17:57:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156446",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:87'></a>
Replying to [SimonKing](#comment%3A86):
> What came out of it?


I'll answer at #7797 when it's finished compiling (which should be soon now) :-)



---

archive/issue_events_114518.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-09-03T12:52:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13237#event-114518"
}
```



---

archive/issue_events_114519.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-09-03T12:52:54Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13237#event-114519"
}
```



---

archive/issue_comments_156447.json:
```json
{
    "body": "**Merged:** sage-5.4.beta0",
    "created_at": "2012-09-03T12:52:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13237",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13237#issuecomment-156447",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.4.beta0
