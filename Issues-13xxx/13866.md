# Issue 13866: Experimental gdb spkg

archive/issues_013662.json:
```json
{
    "body": "I made a quick gdb spkg. If you used `SAGE_DEBUG=yes` to build a debug python, then the host python will most likely be unhappy: debug and normal python have a different ABI, and new gdb's link against libpython since they have significant knowledge about python internals.\n\nhttp://www.stp.dias.ie/~vbraun/Sage/spkg/gdb-7.5.1.spkg\n\n\nAssignee: tbd\n\nCC:  jpflori\n\nReviewer: Jeroen Demeyer\n\nAuthor: Volker Braun\n\nDependencies: #13669\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/13866\n\n",
    "closed_at": "2013-01-18T07:41:13Z",
    "created_at": "2012-12-26T19:26:34Z",
    "labels": [
        "component: packages: experimental"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.6",
    "title": "Experimental gdb spkg",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13866",
    "user": "https://github.com/vbraun"
}
```
I made a quick gdb spkg. If you used `SAGE_DEBUG=yes` to build a debug python, then the host python will most likely be unhappy: debug and normal python have a different ABI, and new gdb's link against libpython since they have significant knowledge about python internals.

http://www.stp.dias.ie/~vbraun/Sage/spkg/gdb-7.5.1.spkg


Assignee: tbd

CC:  jpflori

Reviewer: Jeroen Demeyer

Author: Volker Braun

Dependencies: #13669

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/13866





---

archive/issue_comments_210873.json:
```json
{
    "body": "<a id='comment:1'></a>Usable but still need to fill out `SPKG.txt`",
    "created_at": "2012-12-26T19:27:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13866#issuecomment-210873",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:1'></a>Usable but still need to fill out `SPKG.txt`



---

archive/issue_comments_210874.json:
```json
{
    "body": "<a id='comment:3'></a>What does one need to do in order to use it? With the current SAGE_DEBUG version of sage-5.6.b1 as discussed on #13864, when I simply install the gdb package, running `./sage -gdb` results in\n\n```\n/home/simon/SAGE/debug/sage-5.6.beta1/local/bin/sage-ipython\nGNU gdb (GDB) 7.5.1\nCopyright (C) 2012 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\nand \"show warranty\" for details.\nThis GDB was configured as \"x86_64-unknown-linux-gnu\".\nFor bug reporting instructions, please see:\n<http://www.gnu.org/software/gdb/bugs/>...\nReading symbols from /home/simon/SAGE/debug/sage-5.6.beta1/local/bin/python...done.\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/lib64/libthread_db.so.1\".\nPython 2.7.3 (default, Dec 28 2012, 14:58:54) \n[GCC 4.6.2] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n---------------------------------------------------------------------------\nImportError                               Traceback (most recent call last)\n\n/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/python2.7/site-packages/IPython/ipmaker.py in force_import(modname, force_reload)\n     61         reload(sys.modules[modname])\n     62     else:\n---> 63         __import__(modname)\n     64         \n     65 \n\nImportError: No module named ipy_profile_sage\nError importing ipy_profile_sage - perhaps you should run %upgrade?\nWARNING: Loading of ipy_profile_sage failed.\n```\n\nHence, do I need to re-install something? ./sage -ba even?",
    "created_at": "2012-12-28T17:57:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13866#issuecomment-210874",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:3'></a>What does one need to do in order to use it? With the current SAGE_DEBUG version of sage-5.6.b1 as discussed on #13864, when I simply install the gdb package, running `./sage -gdb` results in

```
/home/simon/SAGE/debug/sage-5.6.beta1/local/bin/sage-ipython
GNU gdb (GDB) 7.5.1
Copyright (C) 2012 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "x86_64-unknown-linux-gnu".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>...
Reading symbols from /home/simon/SAGE/debug/sage-5.6.beta1/local/bin/python...done.
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib64/libthread_db.so.1".
Python 2.7.3 (default, Dec 28 2012, 14:58:54) 
[GCC 4.6.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
---------------------------------------------------------------------------
ImportError                               Traceback (most recent call last)

/home/simon/SAGE/debug/sage-5.6.beta1/local/lib/python2.7/site-packages/IPython/ipmaker.py in force_import(modname, force_reload)
     61         reload(sys.modules[modname])
     62     else:
---> 63         __import__(modname)
     64         
     65 

ImportError: No module named ipy_profile_sage
Error importing ipy_profile_sage - perhaps you should run %upgrade?
WARNING: Loading of ipy_profile_sage failed.
```

Hence, do I need to re-install something? ./sage -ba even?



---

archive/issue_comments_210875.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#13669\"",
    "created_at": "2012-12-28T18:17:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13866#issuecomment-210875",
    "user": "https://github.com/vbraun"
}
```

Changing dependencies from "" to "#13669"



---

archive/issue_comments_210876.json:
```json
{
    "body": "<a id='comment:4'></a>You just need the fix from #13669 which I posted ages ago but nobody wants to review a one-liner so until then `sage -gdb` stays broken no matter what version of gdb you have.",
    "created_at": "2012-12-28T18:17:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13866#issuecomment-210876",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:4'></a>You just need the fix from #13669 which I posted ages ago but nobody wants to review a one-liner so until then `sage -gdb` stays broken no matter what version of gdb you have.



---

archive/issue_comments_210877.json:
```json
{
    "body": "Changing author from \"\" to \"Volker Braun\"",
    "created_at": "2012-12-28T18:17:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13866#issuecomment-210877",
    "user": "https://github.com/vbraun"
}
```

Changing author from "" to "Volker Braun"



---

archive/issue_comments_210878.json:
```json
{
    "body": "<a id='comment:5'></a>I've filled in the SPKG.txt so this is ready to become an experimental spkg",
    "created_at": "2013-01-13T11:08:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13866#issuecomment-210878",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:5'></a>I've filled in the SPKG.txt so this is ready to become an experimental spkg



---

archive/issue_comments_210879.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-01-13T11:08:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13866#issuecomment-210879",
    "user": "https://github.com/vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_210880.json:
```json
{
    "body": "<a id='comment:6'></a>Nitpicks: remove `spkg-install~` and probably you should remove the corresponding entry from `.hgignore.\n\nAre you sure that gmp, mpfr, mpc and ppl are dependencies of `gdb`?  I don't really find any evidence of that.  I agree that PPL is checked for, but it doesn't seem required:\n\n```\nchecking for version 0.11 (revision 0 or later) of PPL... no\n```",
    "created_at": "2013-01-14T10:49:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13866#issuecomment-210880",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'></a>Nitpicks: remove `spkg-install~` and probably you should remove the corresponding entry from `.hgignore.

Are you sure that gmp, mpfr, mpc and ppl are dependencies of `gdb`?  I don't really find any evidence of that.  I agree that PPL is checked for, but it doesn't seem required:

```
checking for version 0.11 (revision 0 or later) of PPL... no
```



---

archive/issue_comments_210881.json:
```json
{
    "body": "<a id='comment:7'></a>I removed the backup~ file. \n\nI don't know what gdb uses gmp, mpfr, mpc, ppl for, but the configure script lets you specify them. GDB doesn't link against these libraries but perhaps it picks bitwidths from headers? In  any case since we do ship with all of them I thought it best to add them to configure.",
    "created_at": "2013-01-14T12:12:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13866#issuecomment-210881",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:7'></a>I removed the backup~ file. 

I don't know what gdb uses gmp, mpfr, mpc, ppl for, but the configure script lets you specify them. GDB doesn't link against these libraries but perhaps it picks bitwidths from headers? In  any case since we do ship with all of them I thought it best to add them to configure.



---

archive/issue_comments_210882.json:
```json
{
    "body": "<a id='comment:8'></a>Replying to [comment:7 vbraun]:\n> I don't know what gdb uses gmp, mpfr, mpc, ppl for, but the configure script lets you specify them.\n\nYes, that's weird.  It looks like they copy/pasted the GCC configure script.  I agree that it doesn't hurt.",
    "created_at": "2013-01-14T12:19:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13866#issuecomment-210882",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'></a>Replying to [comment:7 vbraun]:
> I don't know what gdb uses gmp, mpfr, mpc, ppl for, but the configure script lets you specify them.

Yes, that's weird.  It looks like they copy/pasted the GCC configure script.  I agree that it doesn't hurt.



---

archive/issue_comments_210883.json:
```json
{
    "body": "<a id='comment:9'></a>For the record, this spkg can't work on OSX because of Apple braindamage:\n\n```\n(sage-sh) vbraun@bsd:sage-5.4.rc1$ gdb python\nGNU gdb (GDB) 7.5.1\nCopyright (C) 2012 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\nand \"show warranty\" for details.\nThis GDB was configured as \"x86_64-apple-darwin10.8.0\".\nFor bug reporting instructions, please see:\n<http://www.gnu.org/software/gdb/bugs/>...\nReading symbols from /Users/vbraun/sage-5.4.rc1/local/bin/python...\nwarning: `/Users/vbraun/sage-5.4.rc1/spkg/build/python-2.7.3.p0/src/Modules/python.o': can't open to read symbols: No such file or directory.\n(no debugging symbols found)...done.\n(gdb) run\nStarting program: /Users/vbraun/sage-5.4.rc1/local/bin/python \nUnable to find Mach task port for process-id 27416: (os/kern) failure (0x5).\n (please check gdb is codesigned - see taskgated(8))\n```",
    "created_at": "2013-01-15T12:10:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13866#issuecomment-210883",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:9'></a>For the record, this spkg can't work on OSX because of Apple braindamage:

```
(sage-sh) vbraun@bsd:sage-5.4.rc1$ gdb python
GNU gdb (GDB) 7.5.1
Copyright (C) 2012 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "x86_64-apple-darwin10.8.0".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>...
Reading symbols from /Users/vbraun/sage-5.4.rc1/local/bin/python...
warning: `/Users/vbraun/sage-5.4.rc1/spkg/build/python-2.7.3.p0/src/Modules/python.o': can't open to read symbols: No such file or directory.
(no debugging symbols found)...done.
(gdb) run
Starting program: /Users/vbraun/sage-5.4.rc1/local/bin/python 
Unable to find Mach task port for process-id 27416: (os/kern) failure (0x5).
 (please check gdb is codesigned - see taskgated(8))
```



---

archive/issue_comments_210884.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-01-17T10:41:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13866#issuecomment-210884",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_210885.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Jeroen Demeyer\"",
    "created_at": "2013-01-17T10:41:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13866#issuecomment-210885",
    "user": "https://github.com/jdemeyer"
}
```

Changing reviewer from "" to "Jeroen Demeyer"



---

archive/issue_comments_210886.json:
```json
{
    "body": "<a id='comment:11'></a>spkg has been mirrored.",
    "created_at": "2013-01-17T11:18:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13866#issuecomment-210886",
    "user": "https://github.com/haraldschilly"
}
```

<a id='comment:11'></a>spkg has been mirrored.



---

archive/issue_events_038907.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-18T07:41:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13866",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13866#event-38907"
}
```



---

archive/issue_comments_210887.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-01-18T07:41:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13866#issuecomment-210887",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
