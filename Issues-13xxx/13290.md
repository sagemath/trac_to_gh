# Issue 13290: Upgrade MPC to version 1.0

archive/issues_013118.json:
```json
{
    "assignees": [],
    "body": "Currently, Sage uses a development version of MPC (stable 0.9 had build issues on certain platforms).\n\nWe should upgrade to the just-released MPC-1.0: [http://www.multiprecision.org/index.php?prog=mpc](http://www.multiprecision.org/index.php?prog=mpc). While we're at it, import `MPComplexField` by default and add MPC to the reference manual.\n\n**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpc-1.0.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpc-1.0.p0.spkg)\n\n**apply** [attachment:13290_mpc_1_0.patch](https://github.com/sagemath/sage/files/ticket13290/13290_mpc_1_0.patch) to the Sage library.\n\n### mpc-1.0 (Jeroen Demeyer, 27 July 2012)\n* Trac #13290: upgrade to stable version 1.0.\n* Remove no_fortify_source.patch (which is upstream now).\n* Remove legacy \"unset RM\" command.\n\n**CC:**  jpflori @zimmermann6\n\n**Upstream:** Fixed upstream, in a later stable release.\n\n**Reviewer:** Leif Leonhardy, Volker Braun\n\n**Author:** Jeroen Demeyer\n\n**Merged:** sage-5.3.beta2\n\nIssue created by migration from https://trac.sagemath.org/ticket/13290\n\n",
    "closed_at": "2012-08-14T07:05:10Z",
    "created_at": "2012-07-25T13:54:56Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/minor",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Upgrade MPC to version 1.0",
    "type": "issue",
    "updated_at": "2012-09-07T07:32:18Z",
    "url": "https://github.com/sagemath/sage/issues/13290",
    "user": "https://github.com/jdemeyer"
}
```
Currently, Sage uses a development version of MPC (stable 0.9 had build issues on certain platforms).

We should upgrade to the just-released MPC-1.0: [http://www.multiprecision.org/index.php?prog=mpc](http://www.multiprecision.org/index.php?prog=mpc). While we're at it, import `MPComplexField` by default and add MPC to the reference manual.

**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpc-1.0.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpc-1.0.p0.spkg)

**apply** [attachment:13290_mpc_1_0.patch](https://github.com/sagemath/sage/files/ticket13290/13290_mpc_1_0.patch) to the Sage library.

### mpc-1.0 (Jeroen Demeyer, 27 July 2012)
* Trac #13290: upgrade to stable version 1.0.
* Remove no_fortify_source.patch (which is upstream now).
* Remove legacy "unset RM" command.

**CC:**  jpflori @zimmermann6

**Upstream:** Fixed upstream, in a later stable release.

**Reviewer:** Leif Leonhardy, Volker Braun

**Author:** Jeroen Demeyer

**Merged:** sage-5.3.beta2

Issue created by migration from https://trac.sagemath.org/ticket/13290





---

archive/issue_events_156895.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-07-25T13:54:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "milestone_number": null,
    "milestone_title": "sage-5.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13290#event-156895"
}
```



---

archive/issue_events_156896.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-07-25T13:54:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
    "label_color": "08517b",
    "label_name": "component: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13290#event-156896"
}
```



---

archive/issue_events_156897.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-07-25T13:54:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "label": "https://github.com/sagemath/sage/labels/minor",
    "label_color": "ff0000",
    "label_name": "minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13290#event-156897"
}
```



---

archive/issue_events_156898.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-07-25T13:54:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "008080",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13290#event-156898"
}
```



---

archive/issue_comments_155845.json:
```json
{
    "body": "<a id='comment:1'>**Comment 1:**</a>\nFWIW, MPFR 3.1.1 has also recently been released.  (Don't know whether there's already a ticket to upgrade to that version.)",
    "created_at": "2012-07-25T15:00:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13290#issuecomment-155845",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:1'>**Comment 1:**</a>
FWIW, MPFR 3.1.1 has also recently been released.  (Don't know whether there's already a ticket to upgrade to that version.)



---

archive/issue_comments_155846.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,3 +3,7 @@\n Upgrade to the just-released MPC-1.0: [http://www.multiprecision.org/index.php?prog=mpc](http://www.multiprecision.org/index.php?prog=mpc)\n \n At the same time, why not import `MPComplexField` by default and add MPC to the reference manual.\n+\n+**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpc-1.0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpc-1.0.spkg)\n+\n+**apply** [attachment:13290_mpc_1_0.patch](https://github.com/sagemath/sage/files/ticket13290/13290_mpc_1_0.patch) to the Sage library.\n``````\n",
    "created_at": "2012-07-27T09:38:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13290#issuecomment-155846",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,3 +3,7 @@
 Upgrade to the just-released MPC-1.0: [http://www.multiprecision.org/index.php?prog=mpc](http://www.multiprecision.org/index.php?prog=mpc)
 
 At the same time, why not import `MPComplexField` by default and add MPC to the reference manual.
+
+**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpc-1.0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpc-1.0.spkg)
+
+**apply** [attachment:13290_mpc_1_0.patch](https://github.com/sagemath/sage/files/ticket13290/13290_mpc_1_0.patch) to the Sage library.
``````




---

archive/issue_events_156899.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-07-27T11:54:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13290#event-156899"
}
```



---

archive/issue_comments_155847.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,9 +1,12 @@\n Currently, Sage uses a development version of MPC (stable 0.9 had build issues on certain platforms).\n \n-Upgrade to the just-released MPC-1.0: [http://www.multiprecision.org/index.php?prog=mpc](http://www.multiprecision.org/index.php?prog=mpc)\n-\n-At the same time, why not import `MPComplexField` by default and add MPC to the reference manual.\n+We should upgrade to the just-released MPC-1.0: [http://www.multiprecision.org/index.php?prog=mpc](http://www.multiprecision.org/index.php?prog=mpc). While we're at it, import `MPComplexField` by default and add MPC to the reference manual.\n \n **spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpc-1.0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpc-1.0.spkg)\n \n **apply** [attachment:13290_mpc_1_0.patch](https://github.com/sagemath/sage/files/ticket13290/13290_mpc_1_0.patch) to the Sage library.\n+\n+### mpc-1.0 (Jeroen Demeyer, 27 July 2012)\n+* Trac #13290: upgrade to stable version 1.0.\n+* Remove no_fortify_source.patch (which is upstream now).\n+* Remove legacy \"unset RM\" command.\n``````\n",
    "created_at": "2012-07-27T11:56:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13290#issuecomment-155847",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,9 +1,12 @@
 Currently, Sage uses a development version of MPC (stable 0.9 had build issues on certain platforms).
 
-Upgrade to the just-released MPC-1.0: [http://www.multiprecision.org/index.php?prog=mpc](http://www.multiprecision.org/index.php?prog=mpc)
-
-At the same time, why not import `MPComplexField` by default and add MPC to the reference manual.
+We should upgrade to the just-released MPC-1.0: [http://www.multiprecision.org/index.php?prog=mpc](http://www.multiprecision.org/index.php?prog=mpc). While we're at it, import `MPComplexField` by default and add MPC to the reference manual.
 
 **spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpc-1.0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpc-1.0.spkg)
 
 **apply** [attachment:13290_mpc_1_0.patch](https://github.com/sagemath/sage/files/ticket13290/13290_mpc_1_0.patch) to the Sage library.
+
+### mpc-1.0 (Jeroen Demeyer, 27 July 2012)
+* Trac #13290: upgrade to stable version 1.0.
+* Remove no_fortify_source.patch (which is upstream now).
+* Remove legacy "unset RM" command.
``````




---

archive/issue_comments_155848.json:
```json
{
    "body": "<a id='comment:5'>**Comment 5:**</a>\n`s/Gnu Mpc/GNU MPC/` in `SPKG.txt` ;-)  (The original has small caps.)\n\nFor consistency, I wouldn't remove the error check and message in `spkg-check`.\n\nI also wouldn't comment out the patch loop; in case there are no patches, simply no patch should get applied, without raising an error message (either because `patches/` doesn't exist, or because there's no patch in `patches/` such that `../patches/*.patch` \"expands\" to itself).  Otherwise we uselessly keep creating and deleting directories, and commenting code out or reversing that each time patches again appear or all previous patches vanish.  Prepending\n\n```sh\nls ../patches/*.patch &>/dev/null &&\n```\nto the `for` loop should be sufficient.",
    "created_at": "2012-07-27T13:29:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13290#issuecomment-155848",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:5'>**Comment 5:**</a>
`s/Gnu Mpc/GNU MPC/` in `SPKG.txt` ;-)  (The original has small caps.)

For consistency, I wouldn't remove the error check and message in `spkg-check`.

I also wouldn't comment out the patch loop; in case there are no patches, simply no patch should get applied, without raising an error message (either because `patches/` doesn't exist, or because there's no patch in `patches/` such that `../patches/*.patch` "expands" to itself).  Otherwise we uselessly keep creating and deleting directories, and commenting code out or reversing that each time patches again appear or all previous patches vanish.  Prepending

```sh
ls ../patches/*.patch &>/dev/null &&
```
to the `for` loop should be sufficient.



---

archive/issue_comments_155849.json:
```json
{
    "body": "<a id='comment:7'>**Comment 7:**</a>\nleif, I made some minor corrections you suggested.  I changed the patch loop to:\n\n```sh\n# Apply patches.  See SPKG.txt for information about what each patch\n# does.\nfor patch in ../patches/*.patch; do\n    [ -r \"$patch\" ] || continue\n    patch -p1 <\"$patch\"\n    if [ $? -ne 0 ]; then\n        echo >&2 \"Error applying '$patch'\"\n        exit 1\n    fi\ndone\n```",
    "created_at": "2012-07-27T13:54:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13290#issuecomment-155849",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'>**Comment 7:**</a>
leif, I made some minor corrections you suggested.  I changed the patch loop to:

```sh
# Apply patches.  See SPKG.txt for information about what each patch
# does.
for patch in ../patches/*.patch; do
    [ -r "$patch" ] || continue
    patch -p1 <"$patch"
    if [ $? -ne 0 ]; then
        echo >&2 "Error applying '$patch'"
        exit 1
    fi
done
```



---

archive/issue_comments_155850.json:
```json
{
    "body": "**Reviewer:** Leif Leonhardy",
    "created_at": "2012-07-27T13:54:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13290#issuecomment-155850",
    "user": "https://github.com/jdemeyer"
}
```

**Reviewer:** Leif Leonhardy



---

archive/issue_comments_155851.json:
```json
{
    "body": "<a id='comment:9'>**Comment 9:**</a>\nI also changed the developer documentation to change the \"patch loop\" as I did for MPC.",
    "created_at": "2012-07-27T14:01:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13290#issuecomment-155851",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'>**Comment 9:**</a>
I also changed the developer documentation to change the "patch loop" as I did for MPC.



---

archive/issue_comments_155852.json:
```json
{
    "body": "<a id='comment:10'>**Comment 10:**</a>\nOh, just reviewed the previous patch to the Sage library, which looked good except that you removed the formulas for the conjugate and the square of a complex number ;-), and some instances of `self` not typeset monospaced.",
    "created_at": "2012-07-27T14:06:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13290#issuecomment-155852",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:10'>**Comment 10:**</a>
Oh, just reviewed the previous patch to the Sage library, which looked good except that you removed the formulas for the conjugate and the square of a complex number ;-), and some instances of `self` not typeset monospaced.



---

archive/issue_comments_155853.json:
```json
{
    "body": "<a id='comment:11'>**Comment 11:**</a>\nReplying to [@jdemeyer](#comment%3A9):\n> I also changed the developer documentation to change the \"patch loop\" as I did for MPC.\n\nIs that the only change you made to the Sage library patch?  (It should better be a separate patch.)\n\nI'd rather use `[ -f \"$patch\" ]` instead of `[ -r \"$patch\" ]`.\n\nWhile you're at it, `$SAGE_ROOT` should be quoted in the Developer Guide's template.",
    "created_at": "2012-07-27T14:25:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13290#issuecomment-155853",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:11'>**Comment 11:**</a>
Replying to [@jdemeyer](#comment%3A9):
> I also changed the developer documentation to change the "patch loop" as I did for MPC.

Is that the only change you made to the Sage library patch?  (It should better be a separate patch.)

I'd rather use `[ -f "$patch" ]` instead of `[ -r "$patch" ]`.

While you're at it, `$SAGE_ROOT` should be quoted in the Developer Guide's template.



---

archive/issue_comments_155854.json:
```json
{
    "body": "<a id='comment:12'>**Comment 12:**</a>\nReplying to [@nexttime](#comment%3A11):\n> I'd rather use `[ -f \"$patch\" ]` instead of `[ -r \"$patch\" ]`.\n\nActually I like `-r`, because like this one can intentionally disable a patch by `chmod`ing it `000`.",
    "created_at": "2012-07-27T14:40:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13290#issuecomment-155854",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'>**Comment 12:**</a>
Replying to [@nexttime](#comment%3A11):
> I'd rather use `[ -f "$patch" ]` instead of `[ -r "$patch" ]`.

Actually I like `-r`, because like this one can intentionally disable a patch by `chmod`ing it `000`.



---

archive/issue_comments_155855.json:
```json
{
    "body": "<a id='comment:13'>**Comment 13:**</a>\nReplying to [@jdemeyer](#comment%3A12):\n> Replying to [@nexttime](#comment%3A11):\n> > I'd rather use `[ -f \"$patch\" ]` instead of `[ -r \"$patch\" ]`.\n\n> Actually I like `-r`, because like this one can intentionally disable a patch by `chmod`ing it `000`.\n\nI was thinking of the same, but it's also a potential pitfall I think, and not very appropriate from an educational perspective... (unless you add a comment on that; people might think `-r` tests for a **r**egular file, and `[ -r <some directory> ]` is usually true as well).\n\n---\n\n```\n...\nchecking for CC and CFLAGS in gmp.h... yes CC=gcc-4.7.0 -std=gnu99 CFLAGS=-O2 -m64 -march=btver1 -mtune=btver1  -g -march=native -O3 -fno-strict-aliasing -DHONORS_CFLAGS\nchecking for CC=gcc-4.7.0 -std=gnu99 and CFLAGS=-O2 -m64 -march=btver1 -mtune=btver1  -g -march=native -O3 -fno-strict-aliasing -DHONORS_CFLAGS... yes\nchecking for gcc... (cached) gcc\nchecking whether we are using the GNU C compiler... (cached) yes\nchecking whether gcc accepts -g... (cached) yes\nchecking for gcc option to accept ISO C89... (cached) none needed\nchecking dependency style of gcc... (cached) gcc3\nchecking how to print strings... printf\nchecking for a sed that does not truncate output... (cached) /bin/sed\nchecking for fgrep... /bin/grep -F\nchecking for ld used by gcc... ld\nchecking if the linker (ld) is GNU ld... yes\nchecking for BSD- or MS-compatible name lister (nm)... /usr/local/bin/nm -B\nchecking the name lister (/usr/local/bin/nm -B) interface... BSD nm\nchecking whether ln -s works... yes\nchecking the maximum length of command line arguments... 1572864\nchecking whether the shell understands some XSI constructs... yes\nchecking whether the shell understands \"+=\"... yes\nchecking how to convert x86_64-unknown-linux-gnu file names to x86_64-unknown-linux-gnu format... func_convert_file_noop\nchecking how to convert x86_64-unknown-linux-gnu file names to toolchain format... func_convert_file_noop\nchecking for ld option to reload object files... -r\nchecking for objdump... objdump\nchecking how to recognize dependent libraries... pass_all\nchecking for dlltool... dlltool\nchecking how to associate runtime and link libraries... printf %s\\n\nchecking for archiver @FILE support... no\nchecking for strip... strip\nchecking for ranlib... ranlib\nchecking command to parse /usr/local/bin/nm -B output from gcc object... failed\nchecking for sysroot... no\nchecking for mt... mt\nchecking if mt is a manifest tool... no\nchecking how to run the C preprocessor... cpp-4.7.0\nchecking for ANSI C header files... no\nchecking for sys/types.h... no\nchecking for sys/stat.h... no\nchecking for stdlib.h... no\nchecking for string.h... no\nchecking for memory.h... no\nchecking for strings.h... no\nchecking for inttypes.h... no\nchecking for stdint.h... no\nchecking for unistd.h... no\nchecking for dlfcn.h... no\nchecking for objdir... .libs\nchecking if gcc supports -fno-rtti -fno-exceptions... no\nchecking for gcc option to produce PIC... -fPIC -DPIC\nchecking if gcc PIC flag -fPIC -DPIC works... no\nchecking if gcc static flag -static works... no\nchecking if gcc supports -c -o file.o... no\nchecking if gcc supports -c -o file.o... (cached) no\nchecking if we can lock with hard links... yes\nchecking whether the gcc linker (ld) supports shared libraries... yes\nchecking whether -lc should be explicitly linked in... \nchecking dynamic linker characteristics... GNU/Linux ld.so\nchecking how to hardcode library paths into programs... immediate\nchecking whether stripping libraries is possible... yes\nchecking if libtool supports shared libraries... yes\nchecking whether to build shared libraries... yes\nchecking whether to build static libraries... yes\nchecking for gmp.h... no\nconfigure: error: gmp.h cannot be found or is unusable.\nError configuring MPC.\n\nreal\t0m7.518s\nuser\t0m0.780s\nsys\t0m0.700s\n************************************************************************\nError installing package mpc-1.0\n************************************************************************\n```\n\nOoops!?\n\n(`$SAGE_LOCAL/include/gmp.h` is of course present and sane as well, as you can also see since MPC found `__GMP_CC` and `__GMP_CFLAGS`.)",
    "created_at": "2012-07-27T14:51:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13290#issuecomment-155855",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:13'>**Comment 13:**</a>
Replying to [@jdemeyer](#comment%3A12):
> Replying to [@nexttime](#comment%3A11):
> > I'd rather use `[ -f "$patch" ]` instead of `[ -r "$patch" ]`.

> Actually I like `-r`, because like this one can intentionally disable a patch by `chmod`ing it `000`.

I was thinking of the same, but it's also a potential pitfall I think, and not very appropriate from an educational perspective... (unless you add a comment on that; people might think `-r` tests for a **r**egular file, and `[ -r <some directory> ]` is usually true as well).

---

```
...
checking for CC and CFLAGS in gmp.h... yes CC=gcc-4.7.0 -std=gnu99 CFLAGS=-O2 -m64 -march=btver1 -mtune=btver1  -g -march=native -O3 -fno-strict-aliasing -DHONORS_CFLAGS
checking for CC=gcc-4.7.0 -std=gnu99 and CFLAGS=-O2 -m64 -march=btver1 -mtune=btver1  -g -march=native -O3 -fno-strict-aliasing -DHONORS_CFLAGS... yes
checking for gcc... (cached) gcc
checking whether we are using the GNU C compiler... (cached) yes
checking whether gcc accepts -g... (cached) yes
checking for gcc option to accept ISO C89... (cached) none needed
checking dependency style of gcc... (cached) gcc3
checking how to print strings... printf
checking for a sed that does not truncate output... (cached) /bin/sed
checking for fgrep... /bin/grep -F
checking for ld used by gcc... ld
checking if the linker (ld) is GNU ld... yes
checking for BSD- or MS-compatible name lister (nm)... /usr/local/bin/nm -B
checking the name lister (/usr/local/bin/nm -B) interface... BSD nm
checking whether ln -s works... yes
checking the maximum length of command line arguments... 1572864
checking whether the shell understands some XSI constructs... yes
checking whether the shell understands "+="... yes
checking how to convert x86_64-unknown-linux-gnu file names to x86_64-unknown-linux-gnu format... func_convert_file_noop
checking how to convert x86_64-unknown-linux-gnu file names to toolchain format... func_convert_file_noop
checking for ld option to reload object files... -r
checking for objdump... objdump
checking how to recognize dependent libraries... pass_all
checking for dlltool... dlltool
checking how to associate runtime and link libraries... printf %s\n
checking for archiver @FILE support... no
checking for strip... strip
checking for ranlib... ranlib
checking command to parse /usr/local/bin/nm -B output from gcc object... failed
checking for sysroot... no
checking for mt... mt
checking if mt is a manifest tool... no
checking how to run the C preprocessor... cpp-4.7.0
checking for ANSI C header files... no
checking for sys/types.h... no
checking for sys/stat.h... no
checking for stdlib.h... no
checking for string.h... no
checking for memory.h... no
checking for strings.h... no
checking for inttypes.h... no
checking for stdint.h... no
checking for unistd.h... no
checking for dlfcn.h... no
checking for objdir... .libs
checking if gcc supports -fno-rtti -fno-exceptions... no
checking for gcc option to produce PIC... -fPIC -DPIC
checking if gcc PIC flag -fPIC -DPIC works... no
checking if gcc static flag -static works... no
checking if gcc supports -c -o file.o... no
checking if gcc supports -c -o file.o... (cached) no
checking if we can lock with hard links... yes
checking whether the gcc linker (ld) supports shared libraries... yes
checking whether -lc should be explicitly linked in... 
checking dynamic linker characteristics... GNU/Linux ld.so
checking how to hardcode library paths into programs... immediate
checking whether stripping libraries is possible... yes
checking if libtool supports shared libraries... yes
checking whether to build shared libraries... yes
checking whether to build static libraries... yes
checking for gmp.h... no
configure: error: gmp.h cannot be found or is unusable.
Error configuring MPC.

real	0m7.518s
user	0m0.780s
sys	0m0.700s
************************************************************************
Error installing package mpc-1.0
************************************************************************
```

Ooops!?

(`$SAGE_LOCAL/include/gmp.h` is of course present and sane as well, as you can also see since MPC found `__GMP_CC` and `__GMP_CFLAGS`.)



---

archive/issue_comments_155856.json:
```json
{
    "body": "<a id='comment:14'>**Comment 14:**</a>\nReplying to [@nexttime](#comment%3A13):\n> \n> ```\n> ************************************************************************\n> Error installing package mpc-1.0\n> ************************************************************************\n> ```\n> \n> Ooops!?\n> \n> (`$SAGE_LOCAL/include/gmp.h` is of course present and sane as well, as you can also see since MPC found `__GMP_CC` and `__GMP_CFLAGS`.)\n\n... and my environment and my Sage installation are sane; just successfully reinstalled the previous MPC spkg.",
    "created_at": "2012-07-27T14:57:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13290#issuecomment-155856",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:14'>**Comment 14:**</a>
Replying to [@nexttime](#comment%3A13):
> 
> ```
> ************************************************************************
> Error installing package mpc-1.0
> ************************************************************************
> ```
> 
> Ooops!?
> 
> (`$SAGE_LOCAL/include/gmp.h` is of course present and sane as well, as you can also see since MPC found `__GMP_CC` and `__GMP_CFLAGS`.)

... and my environment and my Sage installation are sane; just successfully reinstalled the previous MPC spkg.



---

archive/issue_comments_155857.json:
```json
{
    "body": "<a id='comment:15'>**Comment 15:**</a>\nDespite looking for GMP's `CC`, upstream's `configure` apparently uses `gcc` in almost all tests (which is GCC 4.4.3, and which e.g. doesn't understand `-march=btver1` from GMP's/MPIR's  `CFLAGS`)!",
    "created_at": "2012-07-27T15:04:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13290#issuecomment-155857",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:15'>**Comment 15:**</a>
Despite looking for GMP's `CC`, upstream's `configure` apparently uses `gcc` in almost all tests (which is GCC 4.4.3, and which e.g. doesn't understand `-march=btver1` from GMP's/MPIR's  `CFLAGS`)!



---

archive/issue_comments_155858.json:
```json
{
    "body": "<a id='comment:16'>**Comment 16:**</a>\nReplying to [@nexttime](#comment%3A15):\n> Despite looking for GMP's `CC`, upstream's `configure` apparently uses `gcc` in almost all tests (which is GCC 4.4.3, and which e.g. doesn't understand `-march=btver1` from GMP's/MPIR's  `CFLAGS`)!\n\nReally?  Could you attach the config.log from mpc-1.0?",
    "created_at": "2012-07-27T15:05:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13290#issuecomment-155858",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:16'>**Comment 16:**</a>
Replying to [@nexttime](#comment%3A15):
> Despite looking for GMP's `CC`, upstream's `configure` apparently uses `gcc` in almost all tests (which is GCC 4.4.3, and which e.g. doesn't understand `-march=btver1` from GMP's/MPIR's  `CFLAGS`)!

Really?  Could you attach the config.log from mpc-1.0?



---

archive/issue_comments_155859.json:
```json
{
    "body": "<a id='comment:17'>**Comment 17:**</a>\nNot clear to me what's causing this; the change to `configure.ac` looks harmless, but they're also using newer autotools.\n\n```diff\n\n--- mpc-1.0.0dev1126.p1/src/configure.ac\t2012-02-21 15:21:29.000000000 +0100\n+++ mpc-1.0/src/configure.ac\t2012-07-19 14:33:51.000000000 +0200\n@@ -1,4 +1,4 @@\n-# Copyright (C) 2008, 2009, 2010, 2011 INRIA\n+# Copyright (C) 2008, 2009, 2010, 2011, 2012 INRIA\n #\n # This file is part of GNU MPC.\n #\n@@ -20,16 +20,23 @@\n # Process this file with autoconf to produce a configure script.\n \n AC_PREREQ(2.61)\n-AC_INIT(mpc, 1.0.0dev, mpc-discuss@lists.gforge.inria.fr)\n+AC_INIT(mpc, 1.0, mpc-discuss@lists.gforge.inria.fr)\n AC_CONFIG_SRCDIR([src/mpc-impl.h])\n AC_CONFIG_HEADER([config.h])\n \n AM_INIT_AUTOMAKE([1.9 -Wall -Werror])\n AM_MAINTAINER_MODE\n \n+USER_CC=$CC\n+USER_CFLAGS=$CFLAGS\n+\n+# automake 1.12 seems to require this, but automake 1.11 doesn't recognize it\n+m4_ifdef([AM_PROG_AR], [AM_PROG_AR])\n+\n AC_CANONICAL_HOST\n AC_CONFIG_MACRO_DIR([m4])\n \n+\n # Extra arguments to configure\n AC_ARG_WITH([mpfr_include],\n             [AC_HELP_STRING([--with-mpfr-include=DIR],\n@@ -96,7 +103,7 @@\n # at http://lists.gforge.inria.fr/pipermail/mpc-discuss/2012-January/001056.html\n AC_PROG_EGREP\n AC_PROG_SED\n-if test -z \"$CC\" && test -z \"$CFLAGS\"; then\n+if test -z \"$USER_CC\" && test -z \"$USER_CFLAGS\"; then\n    MPC_GMP_CC_CFLAGS\n fi\n \n@@ -105,7 +112,7 @@\n AC_LANG(C)\n \n # Set up LibTool\n-AC_PROG_LIBTOOL\n+LT_INIT\n \n```",
    "created_at": "2012-07-27T15:32:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13290#issuecomment-155859",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:17'>**Comment 17:**</a>
Not clear to me what's causing this; the change to `configure.ac` looks harmless, but they're also using newer autotools.

```diff

--- mpc-1.0.0dev1126.p1/src/configure.ac	2012-02-21 15:21:29.000000000 +0100
+++ mpc-1.0/src/configure.ac	2012-07-19 14:33:51.000000000 +0200
@@ -1,4 +1,4 @@
-# Copyright (C) 2008, 2009, 2010, 2011 INRIA
+# Copyright (C) 2008, 2009, 2010, 2011, 2012 INRIA
 #
 # This file is part of GNU MPC.
 #
@@ -20,16 +20,23 @@
 # Process this file with autoconf to produce a configure script.
 
 AC_PREREQ(2.61)
-AC_INIT(mpc, 1.0.0dev, mpc-discuss@lists.gforge.inria.fr)
+AC_INIT(mpc, 1.0, mpc-discuss@lists.gforge.inria.fr)
 AC_CONFIG_SRCDIR([src/mpc-impl.h])
 AC_CONFIG_HEADER([config.h])
 
 AM_INIT_AUTOMAKE([1.9 -Wall -Werror])
 AM_MAINTAINER_MODE
 
+USER_CC=$CC
+USER_CFLAGS=$CFLAGS
+
+# automake 1.12 seems to require this, but automake 1.11 doesn't recognize it
+m4_ifdef([AM_PROG_AR], [AM_PROG_AR])
+
 AC_CANONICAL_HOST
 AC_CONFIG_MACRO_DIR([m4])
 
+
 # Extra arguments to configure
 AC_ARG_WITH([mpfr_include],
             [AC_HELP_STRING([--with-mpfr-include=DIR],
@@ -96,7 +103,7 @@
 # at http://lists.gforge.inria.fr/pipermail/mpc-discuss/2012-January/001056.html
 AC_PROG_EGREP
 AC_PROG_SED
-if test -z "$CC" && test -z "$CFLAGS"; then
+if test -z "$USER_CC" && test -z "$USER_CFLAGS"; then
    MPC_GMP_CC_CFLAGS
 fi
 
@@ -105,7 +112,7 @@
 AC_LANG(C)
 
 # Set up LibTool
-AC_PROG_LIBTOOL
+LT_INIT
 
```



---

archive/issue_comments_155860.json:
```json
{
    "body": "`config.log` from MPC 1.0 spkg showing use of `gcc` instead of `gmp.h`'s CC",
    "created_at": "2012-07-27T15:41:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13290#issuecomment-155860",
    "user": "https://github.com/nexttime"
}
```

`config.log` from MPC 1.0 spkg showing use of `gcc` instead of `gmp.h`'s CC



---

archive/issue_comments_155861.json:
```json
{
    "body": "<a id='comment:18'>**Comment 18:**</a>\n**Attachment:** [mpc-1.0.spkg-gcc-4.7.0-config.log](https://github.com/sagemath/sage/files/ticket13290/mpc-1.0.spkg-gcc-4.7.0-config.log)\n\nReplying to [@jdemeyer](#comment%3A16):\n> Could you attach the config.log from mpc-1.0?\n\nDid so.  Quite long; the relevant parts seem\n\n```\nconfigure:2930: checking for gcc\nconfigure:2946: found /usr/bin/gcc\nconfigure:2957: result: gcc\nconfigure:3186: checking for C compiler version\nconfigure:3195: gcc --version >&5\ngcc (Ubuntu 4.4.3-4ubuntu5.1) 4.4.3\nCopyright (C) 2009 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n\nconfigure:3206: $? = 0\n\n...\n\nconfigure:4394: checking for CC and CFLAGS in gmp.h\nconfigure:4420: result: yes CC=gcc-4.7.0 -std=gnu99 CFLAGS=-O2 -m64 -march=btver1 -mtune=btver1  -g -march=native -O3 -fno-strict-aliasing -DHONORS_CFLAGS\nconfigure:4426: checking for CC=gcc-4.7.0 -std=gnu99 and CFLAGS=-O2 -m64 -march=btver1 -mtune=btver1  -g -march=native -O3 -fno-strict-aliasing -DHONORS_CFLAGS\nconfigure:4430: result: yes\nconfigure:4493: checking for gcc\nconfigure:4520: result: gcc\nconfigure:4749: checking for C compiler version\nconfigure:4758: gcc --version >&5\ngcc (Ubuntu 4.4.3-4ubuntu5.1) 4.4.3\nCopyright (C) 2009 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n\nconfigure:4769: $? = 0\n\n```\n\nSomehow the settings from `gmp.h` don't get \"propagated\".",
    "created_at": "2012-07-27T15:46:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13290#issuecomment-155861",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:18'>**Comment 18:**</a>
**Attachment:** [mpc-1.0.spkg-gcc-4.7.0-config.log](https://github.com/sagemath/sage/files/ticket13290/mpc-1.0.spkg-gcc-4.7.0-config.log)

Replying to [@jdemeyer](#comment%3A16):
> Could you attach the config.log from mpc-1.0?

Did so.  Quite long; the relevant parts seem

```
configure:2930: checking for gcc
configure:2946: found /usr/bin/gcc
configure:2957: result: gcc
configure:3186: checking for C compiler version
configure:3195: gcc --version >&5
gcc (Ubuntu 4.4.3-4ubuntu5.1) 4.4.3
Copyright (C) 2009 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

configure:3206: $? = 0

...

configure:4394: checking for CC and CFLAGS in gmp.h
configure:4420: result: yes CC=gcc-4.7.0 -std=gnu99 CFLAGS=-O2 -m64 -march=btver1 -mtune=btver1  -g -march=native -O3 -fno-strict-aliasing -DHONORS_CFLAGS
configure:4426: checking for CC=gcc-4.7.0 -std=gnu99 and CFLAGS=-O2 -m64 -march=btver1 -mtune=btver1  -g -march=native -O3 -fno-strict-aliasing -DHONORS_CFLAGS
configure:4430: result: yes
configure:4493: checking for gcc
configure:4520: result: gcc
configure:4749: checking for C compiler version
configure:4758: gcc --version >&5
gcc (Ubuntu 4.4.3-4ubuntu5.1) 4.4.3
Copyright (C) 2009 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

configure:4769: $? = 0

```

Somehow the settings from `gmp.h` don't get "propagated".



---

archive/issue_comments_155862.json:
```json
{
    "body": "<a id='comment:19'>**Comment 19:**</a>\nInterestingly, similar happens if I unset `CC`, `CPP`, `CFLAGS` and `CPPFLAGS`:  While `configure` definitely uses the `CFLAGS` from `gmp.h`, it doesn't use the `CC` setting.\n\nApparently because of inappropriate caching:\n\n```\n...\nchecking for CC and CFLAGS in gmp.h... yes CC=gcc-4.7.0 -std=gnu99 CFLAGS=-O2 -m64 -march=btver1 -mtune=btver1  -g -march=native -O3 -fno-strict-aliasing -DHONORS_CFLAGS\nchecking for CC=gcc-4.7.0 -std=gnu99 and CFLAGS=-O2 -m64 -march=btver1 -mtune=btver1  -g -march=native -O3 -fno-strict-aliasing -DHONORS_CFLAGS... yes\nchecking for gcc... (cached) gcc\n...\n```",
    "created_at": "2012-07-27T16:05:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13290#issuecomment-155862",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:19'>**Comment 19:**</a>
Interestingly, similar happens if I unset `CC`, `CPP`, `CFLAGS` and `CPPFLAGS`:  While `configure` definitely uses the `CFLAGS` from `gmp.h`, it doesn't use the `CC` setting.

Apparently because of inappropriate caching:

```
...
checking for CC and CFLAGS in gmp.h... yes CC=gcc-4.7.0 -std=gnu99 CFLAGS=-O2 -m64 -march=btver1 -mtune=btver1  -g -march=native -O3 -fno-strict-aliasing -DHONORS_CFLAGS
checking for CC=gcc-4.7.0 -std=gnu99 and CFLAGS=-O2 -m64 -march=btver1 -mtune=btver1  -g -march=native -O3 -fno-strict-aliasing -DHONORS_CFLAGS... yes
checking for gcc... (cached) gcc
...
```



---

archive/issue_events_156900.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-07-27T16:53:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13290#event-156900"
}
```



---

archive/issue_events_156901.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-07-27T16:53:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13290#event-156901"
}
```



---

archive/issue_comments_155863.json:
```json
{
    "body": "<a id='comment:20'>**Comment 20:**</a>\nI can confirm the regression regarding `$CC`.",
    "created_at": "2012-07-27T16:53:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13290#issuecomment-155863",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:20'>**Comment 20:**</a>
I can confirm the regression regarding `$CC`.



---

archive/issue_comments_155864.json:
```json
{
    "body": "<a id='comment:21'>**Comment 21:**</a>\nObviously the `CC` from `gmp.h` gets overwritten with `$ac_cv_prog_CC` (determined earlier), but I don't know the proper way to avoid that.  (One could of course \"manually\" unset it in the `MPC_GMP_CC_CFLAG` macro from `mpc.m4`, or set it to the new value if appropriate, but that appears very hackish to me.  There must be some other way to update or invalidate cached variables I think, but so far I haven't found one.)\n\nThe cause of the regression seems to simply be the use of newer autotools (generating a `configure` script that now checks for the compiler *before* `MPC_GMP_CC_CFLAG` is called).",
    "created_at": "2012-07-27T17:57:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13290#issuecomment-155864",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:21'>**Comment 21:**</a>
Obviously the `CC` from `gmp.h` gets overwritten with `$ac_cv_prog_CC` (determined earlier), but I don't know the proper way to avoid that.  (One could of course "manually" unset it in the `MPC_GMP_CC_CFLAG` macro from `mpc.m4`, or set it to the new value if appropriate, but that appears very hackish to me.  There must be some other way to update or invalidate cached variables I think, but so far I haven't found one.)

The cause of the regression seems to simply be the use of newer autotools (generating a `configure` script that now checks for the compiler *before* `MPC_GMP_CC_CFLAG` is called).



---

archive/issue_comments_155865.json:
```json
{
    "body": "<a id='comment:22'>**Comment 22:**</a>\nReplying to [@nexttime](#comment%3A21):\n> The cause of the regression seems to simply be the use of newer autotools (generating a `configure` script that now checks for the compiler *before* `MPC_GMP_CC_CFLAG` is called).\n\nNot really, or at least not directly.  The culprit is `AM_PROG_AR`, which pulls in a lot of crap, or more precisely triggers the compiler tests too early.\n\nIf I move\n\n```\n# automake 1.12 seems to require this, but automake 1.11 doesn't recognize it\nm4_ifdef([AM_PROG_AR], [AM_PROG_AR])\n```\npast the call to `MPC_GMP_CC_CFLAGS`, the spkg installs and passes its test suite.",
    "created_at": "2012-07-27T19:54:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13290#issuecomment-155865",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:22'>**Comment 22:**</a>
Replying to [@nexttime](#comment%3A21):
> The cause of the regression seems to simply be the use of newer autotools (generating a `configure` script that now checks for the compiler *before* `MPC_GMP_CC_CFLAG` is called).

Not really, or at least not directly.  The culprit is `AM_PROG_AR`, which pulls in a lot of crap, or more precisely triggers the compiler tests too early.

If I move

```
# automake 1.12 seems to require this, but automake 1.11 doesn't recognize it
m4_ifdef([AM_PROG_AR], [AM_PROG_AR])
```
past the call to `MPC_GMP_CC_CFLAGS`, the spkg installs and passes its test suite.



---

archive/issue_comments_155866.json:
```json
{
    "body": "<a id='comment:23'>**Comment 23:**</a>\nP.S.:\n\nSince I don't have Automake 1.12 installed, perhaps someone else should `autoreconf` the spkg; patching `configure` IMHO doesn't make much sense.\n\nAnybody going to report this upstream?  Paul...? :P",
    "created_at": "2012-07-27T20:02:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13290#issuecomment-155866",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:23'>**Comment 23:**</a>
P.S.:

Since I don't have Automake 1.12 installed, perhaps someone else should `autoreconf` the spkg; patching `configure` IMHO doesn't make much sense.

Anybody going to report this upstream?  Paul...? :P



---

archive/issue_comments_155867.json:
```json
{
    "body": "**Attachment:** [configure.ac.patch.gz](https://github.com/sagemath/sage/files/ticket13290/configure.ac.patch.gz)\n\n\"Upstream\" patch to `configure.ac` to fix `CC` not being taken from `gmp.h`.",
    "created_at": "2012-07-27T20:25:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13290#issuecomment-155867",
    "user": "https://github.com/nexttime"
}
```

**Attachment:** [configure.ac.patch.gz](https://github.com/sagemath/sage/files/ticket13290/configure.ac.patch.gz)

"Upstream" patch to `configure.ac` to fix `CC` not being taken from `gmp.h`.



---

archive/issue_comments_155868.json:
```json
{
    "body": "<a id='comment:24'>**Comment 24:**</a>\nI've attached a patch to `src/configure.ac`.",
    "created_at": "2012-07-27T20:29:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13290#issuecomment-155868",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:24'>**Comment 24:**</a>
I've attached a patch to `src/configure.ac`.



---

archive/issue_comments_155869.json:
```json
{
    "body": "<a id='comment:25'>**Comment 25:**</a>\nReplying to [@nexttime](#comment%3A23):\n> Since I don't have Automake 1.12 installed, perhaps someone else should `autoreconf` the spkg; patching `configure` IMHO doesn't make much sense.\n> \n> Anybody going to report this upstream?\n\nOk, [reported upstream](https://gforge.inria.fr/tracker/?func=detail&group_id=131&aid=14669&atid=607) (patch included).",
    "created_at": "2012-07-27T21:22:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13290#issuecomment-155869",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:25'>**Comment 25:**</a>
Replying to [@nexttime](#comment%3A23):
> Since I don't have Automake 1.12 installed, perhaps someone else should `autoreconf` the spkg; patching `configure` IMHO doesn't make much sense.
> 
> Anybody going to report this upstream?

Ok, [reported upstream](https://gforge.inria.fr/tracker/?func=detail&group_id=131&aid=14669&atid=607) (patch included).



---

archive/issue_comments_155870.json:
```json
{
    "body": "<a id='comment:26'>**Comment 26:**</a>\nReplying to [@nexttime](#comment%3A25):\n> Ok, [reported upstream](https://gforge.inria.fr/tracker/?func=detail&group_id=131&aid=14669&atid=607) (patch included).\n\n```\nComment By: Andreas Enge (enge)\nDate: 2012-07-27 21:39\n\nMessage:\nI confirm the problem and admit I tested only the propagation of the CFLAGS, which seems to work. This part of the configuration is really tricky.\n\nThanks for working this out. I applied the patch to the trunk and the 1.0 branch. A bug fix release 1.0.1 is planned for the end of August.\n```\n\nThat's quick... :-)",
    "created_at": "2012-07-27T21:46:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13290#issuecomment-155870",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:26'>**Comment 26:**</a>
Replying to [@nexttime](#comment%3A25):
> Ok, [reported upstream](https://gforge.inria.fr/tracker/?func=detail&group_id=131&aid=14669&atid=607) (patch included).

```
Comment By: Andreas Enge (enge)
Date: 2012-07-27 21:39

Message:
I confirm the problem and admit I tested only the propagation of the CFLAGS, which seems to work. This part of the configuration is really tricky.

Thanks for working this out. I applied the patch to the trunk and the 1.0 branch. A bug fix release 1.0.1 is planned for the end of August.
```

That's quick... :-)



---

archive/issue_comments_155871.json:
```json
{
    "body": "**Upstream:** Fixed upstream, but not in a stable release.",
    "created_at": "2012-08-01T14:05:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13290#issuecomment-155871",
    "user": "https://github.com/jdemeyer"
}
```

**Upstream:** Fixed upstream, but not in a stable release.



---

archive/issue_comments_155872.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,7 +2,7 @@\n \n We should upgrade to the just-released MPC-1.0: [http://www.multiprecision.org/index.php?prog=mpc](http://www.multiprecision.org/index.php?prog=mpc). While we're at it, import `MPComplexField` by default and add MPC to the reference manual.\n \n-**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpc-1.0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpc-1.0.spkg)\n+**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpc-1.0.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpc-1.0.p0.spkg)\n \n **apply** [attachment:13290_mpc_1_0.patch](https://github.com/sagemath/sage/files/ticket13290/13290_mpc_1_0.patch) to the Sage library.\n \n``````\n",
    "created_at": "2012-08-01T14:11:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13290#issuecomment-155872",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,7 +2,7 @@
 
 We should upgrade to the just-released MPC-1.0: [http://www.multiprecision.org/index.php?prog=mpc](http://www.multiprecision.org/index.php?prog=mpc). While we're at it, import `MPComplexField` by default and add MPC to the reference manual.
 
-**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpc-1.0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpc-1.0.spkg)
+**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpc-1.0.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpc-1.0.p0.spkg)
 
 **apply** [attachment:13290_mpc_1_0.patch](https://github.com/sagemath/sage/files/ticket13290/13290_mpc_1_0.patch) to the Sage library.
 
``````




---

archive/issue_comments_155873.json:
```json
{
    "body": "Patch for the Sage library",
    "created_at": "2012-08-01T14:16:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13290#issuecomment-155873",
    "user": "https://github.com/jdemeyer"
}
```

Patch for the Sage library



---

archive/issue_comments_155874.json:
```json
{
    "body": "**Attachment:** [13290_mpc_1_0.patch.gz](https://github.com/sagemath/sage/files/ticket13290/13290_mpc_1_0.patch.gz)\n\nPatch for the mpc spkg, for review only",
    "created_at": "2012-08-01T14:19:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13290#issuecomment-155874",
    "user": "https://github.com/jdemeyer"
}
```

**Attachment:** [13290_mpc_1_0.patch.gz](https://github.com/sagemath/sage/files/ticket13290/13290_mpc_1_0.patch.gz)

Patch for the mpc spkg, for review only



---

archive/issue_events_156902.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-01T14:19:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13290#event-156902"
}
```



---

archive/issue_events_156903.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-01T14:19:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13290#event-156903"
}
```



---

archive/issue_comments_155875.json:
```json
{
    "body": "<a id='comment:29'>**Comment 29:**</a>\n**Attachment:** [mpc-1.0.p0.diff.gz](https://github.com/sagemath/sage/files/ticket13290/mpc-1.0.p0.diff.gz)",
    "created_at": "2012-08-01T14:19:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13290#issuecomment-155875",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:29'>**Comment 29:**</a>
**Attachment:** [mpc-1.0.p0.diff.gz](https://github.com/sagemath/sage/files/ticket13290/mpc-1.0.p0.diff.gz)



---

archive/issue_comments_155876.json:
```json
{
    "body": "<a id='comment:30'>**Comment 30:**</a>\nTested on the buildbots, no problems.",
    "created_at": "2012-08-12T18:44:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13290#issuecomment-155876",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:30'>**Comment 30:**</a>
Tested on the buildbots, no problems.



---

archive/issue_comments_155877.json:
```json
{
    "body": "<a id='comment:31'>**Comment 31:**</a>\nLooks good to me.",
    "created_at": "2012-08-12T19:10:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13290#issuecomment-155877",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:31'>**Comment 31:**</a>
Looks good to me.



---

archive/issue_events_156904.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-08-12T19:10:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13290#event-156904"
}
```



---

archive/issue_events_156905.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-08-12T19:10:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13290#event-156905"
}
```



---

archive/issue_events_156906.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-14T07:05:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13290#event-156906"
}
```



---

archive/issue_events_156907.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-14T07:05:10Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13290#event-156907"
}
```



---

archive/issue_comments_155878.json:
```json
{
    "body": "**Merged:** sage-5.3.beta2",
    "created_at": "2012-08-14T07:05:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13290#issuecomment-155878",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.3.beta2



---

archive/issue_comments_155879.json:
```json
{
    "body": "**Changing reviewer** from \"Leif Leonhardy\" to \"Leif Leonhardy, Volker Braun\".",
    "created_at": "2012-08-14T07:05:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13290#issuecomment-155879",
    "user": "https://github.com/jdemeyer"
}
```

**Changing reviewer** from "Leif Leonhardy" to "Leif Leonhardy, Volker Braun".



---

archive/issue_comments_155880.json:
```json
{
    "body": "<a id='comment:34'>**Comment 34:**</a>\nMPC-1.0.1 just got released.",
    "created_at": "2012-09-07T07:32:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13290#issuecomment-155880",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:34'>**Comment 34:**</a>
MPC-1.0.1 just got released.



---

archive/issue_comments_155881.json:
```json
{
    "body": "**Changing upstream** from \"Fixed upstream, but not in a stable release.\" to \"Fixed upstream, in a later stable release.\".",
    "created_at": "2012-09-07T07:32:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13290#issuecomment-155881",
    "user": "https://github.com/jdemeyer"
}
```

**Changing upstream** from "Fixed upstream, but not in a stable release." to "Fixed upstream, in a later stable release.".
