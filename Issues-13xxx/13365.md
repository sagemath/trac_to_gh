# Issue 13365: Add Semidirect Product Method for Permutation Groups

archive/issues_013193.json:
```json
{
    "body": "Adds a semidirect product method.\nA generic, top-level method is added to categories/groups.py, which simply raises a `NotImplementedError`. This  is then overridden in permgroup.py. This method wraps GAP's `SemidirectProduct` function. It is implemented so that the calling group is the group acting on an inputted normal subgroup.\n\n**Apply**\n1. [attachment:13365_semidirectproduct-v2.2.patch]\n2. [attachment:trac_13365_reviewer-v2.patch]\n\nAssignee: joyner\n\nCC:  @rbeezer\n\nKeywords: groups semidirect product GAP\n\nReviewer: Benjamin Jones\n\nAuthor: Kevin Halasz\n\nMerged: sage-5.5.beta1\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/13365\n\n",
    "closed_at": "2012-11-01T12:02:50Z",
    "created_at": "2012-08-14T05:53:56Z",
    "labels": [
        "component: group theory",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.5",
    "title": "Add Semidirect Product Method for Permutation Groups",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13365",
    "user": "https://trac.sagemath.org/admin/accounts/users/khalasz"
}
```
Adds a semidirect product method.
A generic, top-level method is added to categories/groups.py, which simply raises a `NotImplementedError`. This  is then overridden in permgroup.py. This method wraps GAP's `SemidirectProduct` function. It is implemented so that the calling group is the group acting on an inputted normal subgroup.

**Apply**
1. [attachment:13365_semidirectproduct-v2.2.patch]
2. [attachment:trac_13365_reviewer-v2.patch]

Assignee: joyner

CC:  @rbeezer

Keywords: groups semidirect product GAP

Reviewer: Benjamin Jones

Author: Kevin Halasz

Merged: sage-5.5.beta1

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/13365





---

archive/issue_comments_205612.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,5 @@\n Adds a semidirect product method.\n A generic, top-level method is added to categories/groups.py, which simply raises a `NotImplementedError`. This  is then overridden in permgroup.py. This method wraps GAP's `SemidirectProduct` function. It is implemented so that the calling group is the group acting on an inputted normal subgroup.\n+\n+**Apply**\n+1. [attachment 13365_semidirectproduct.patch\n``````\n",
    "created_at": "2012-08-14T05:55:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13365#issuecomment-205612",
    "user": "https://trac.sagemath.org/admin/accounts/users/khalasz"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,5 @@
 Adds a semidirect product method.
 A generic, top-level method is added to categories/groups.py, which simply raises a `NotImplementedError`. This  is then overridden in permgroup.py. This method wraps GAP's `SemidirectProduct` function. It is implemented so that the calling group is the group acting on an inputted normal subgroup.
+
+**Apply**
+1. [attachment 13365_semidirectproduct.patch
``````




---

archive/issue_comments_205613.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,4 +2,4 @@\n A generic, top-level method is added to categories/groups.py, which simply raises a `NotImplementedError`. This  is then overridden in permgroup.py. This method wraps GAP's `SemidirectProduct` function. It is implemented so that the calling group is the group acting on an inputted normal subgroup.\n \n **Apply**\n-1. [attachment 13365_semidirectproduct.patch\n+1. [attachment 13365_semidirectproduct.patch]\n``````\n",
    "created_at": "2012-08-14T05:56:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13365#issuecomment-205613",
    "user": "https://trac.sagemath.org/admin/accounts/users/khalasz"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,4 +2,4 @@
 A generic, top-level method is added to categories/groups.py, which simply raises a `NotImplementedError`. This  is then overridden in permgroup.py. This method wraps GAP's `SemidirectProduct` function. It is implemented so that the calling group is the group acting on an inputted normal subgroup.
 
 **Apply**
-1. [attachment 13365_semidirectproduct.patch
+1. [attachment 13365_semidirectproduct.patch]
``````




---

archive/issue_comments_205614.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,4 +2,4 @@\n A generic, top-level method is added to categories/groups.py, which simply raises a `NotImplementedError`. This  is then overridden in permgroup.py. This method wraps GAP's `SemidirectProduct` function. It is implemented so that the calling group is the group acting on an inputted normal subgroup.\n \n **Apply**\n-1. [attachment 13365_semidirectproduct.patch]\n+1. [attachment: 13365_semidirectproduct.patch]\n``````\n",
    "created_at": "2012-08-14T05:56:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13365#issuecomment-205614",
    "user": "https://trac.sagemath.org/admin/accounts/users/khalasz"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,4 +2,4 @@
 A generic, top-level method is added to categories/groups.py, which simply raises a `NotImplementedError`. This  is then overridden in permgroup.py. This method wraps GAP's `SemidirectProduct` function. It is implemented so that the calling group is the group acting on an inputted normal subgroup.
 
 **Apply**
-1. [attachment 13365_semidirectproduct.patch]
+1. [attachment: 13365_semidirectproduct.patch]
``````




---

archive/issue_comments_205615.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-08-14T05:56:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13365#issuecomment-205615",
    "user": "https://trac.sagemath.org/admin/accounts/users/khalasz"
}
```

Changing status from new to needs_review.



---

archive/issue_events_043125.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/13365",
    "rename": {
        "from": "Add semidirect product method for permutation groups",
        "to": "Add Semidirect Product Method for Permutation Groups"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13365#event-43125"
}
```



---

archive/issue_comments_205616.json:
```json
{
    "body": "Attachment [13365_semidirectproduct.patch](tarball://root/attachments/some-uuid/ticket13365/13365_semidirectproduct.patch) by khalasz created at 2012-08-17 22:35:52",
    "created_at": "2012-08-17T22:35:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13365#issuecomment-205616",
    "user": "https://trac.sagemath.org/admin/accounts/users/khalasz"
}
```

Attachment [13365_semidirectproduct.patch](tarball://root/attachments/some-uuid/ticket13365/13365_semidirectproduct.patch) by khalasz created at 2012-08-17 22:35:52



---

archive/issue_comments_205617.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Benjamin Jones\"",
    "created_at": "2012-08-18T23:34:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13365#issuecomment-205617",
    "user": "https://github.com/benjaminfjones"
}
```

Changing reviewer from "" to "Benjamin Jones"



---

archive/issue_comments_205618.json:
```json
{
    "body": "<a id='comment:6'></a>\nLook great! A couple of comments to start:\n\n* Line 92 `sage/categories/groups.py`: I think the exception message would be more clear if we just say something like \"semidirect prodcuct of %s and %s is not yet implemented.\"\n\n* Line 1762 `sage/groups/perm_gps/permgroup.py`: I think it would be clearer here to say that `N` is a group which acted on by `self` and which is isomorphic to a normal subgroup of the semidirect product.\n* Line 1803: \"where it is generally thought that\" --> \"where, by convention,\"\n* Line 1870: The three tests at the beginning of the method are a good measure, but I wonder if they pose too large a computational cost when the input groups are large? Have you tried constructing any large semidirect products with your code? I would be interested to see how much overhead the three checks cost.\n\nOne thing you could do is add an optional parameter, something like `check=True` that defaults to True, but if the user sets it to False then the three checks aren't done and the user takes full responsibility if, e.g. the supplied list of elements of `self` does not generate `self`.",
    "created_at": "2012-08-18T23:34:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13365#issuecomment-205618",
    "user": "https://github.com/benjaminfjones"
}
```

<a id='comment:6'></a>
Look great! A couple of comments to start:

* Line 92 `sage/categories/groups.py`: I think the exception message would be more clear if we just say something like "semidirect prodcuct of %s and %s is not yet implemented."

* Line 1762 `sage/groups/perm_gps/permgroup.py`: I think it would be clearer here to say that `N` is a group which acted on by `self` and which is isomorphic to a normal subgroup of the semidirect product.
* Line 1803: "where it is generally thought that" --> "where, by convention,"
* Line 1870: The three tests at the beginning of the method are a good measure, but I wonder if they pose too large a computational cost when the input groups are large? Have you tried constructing any large semidirect products with your code? I would be interested to see how much overhead the three checks cost.

One thing you could do is add an optional parameter, something like `check=True` that defaults to True, but if the user sets it to False then the three checks aren't done and the user takes full responsibility if, e.g. the supplied list of elements of `self` does not generate `self`.



---

archive/issue_comments_205619.json:
```json
{
    "body": "Changing keywords from \"\" to \"groups semidirect product GAP\".",
    "created_at": "2012-08-18T23:34:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13365#issuecomment-205619",
    "user": "https://github.com/benjaminfjones"
}
```

Changing keywords from "" to "groups semidirect product GAP".



---

archive/issue_comments_205620.json:
```json
{
    "body": "<a id='comment:7'></a>\nI ran some time tests on the checks. I'll leave it up to you to determine if they are to costly (I don't think they are, but then again, I'm no more than a novice when it comes to sage, or even CS in general).\n\nFirst, I should note that my computer is kind of slow. For calibrating purposes, see that the following process gave 31.9 ms per loop on RAB's computer:\n\n\n```\nsage: G = DihedralGroup(2000)\nsage: gens = G.gens()\nsage: timeit(\"G == PermutationGroup(gens = gens)\")\n5 loops, best of 3: 127 ms per loop\n```\n\n\nNow, for the semidihedral group tests:\n\nI didn't build actually build a semidirect product with this group, but the following does exactly what the first test does on the calling group:\n\n\n```\nsage: G = SymmetricGroup(15)\n<(1,2,6,7,5),(11,1,12,2,13,3,14,4,15,5),(6,7,8,9,10,11,1)]  #this is the end of an initialization of an 8 element list of random permutations that generates Sym(15)\nsage: len(gens)\n8\nsage: timeit(\"PermutationGroup(gens) == G\")         \n25 loops, best of 3: 18.2 ms per loop\nsage: G.order()\n1307674368000\nsage: PermutationGroup(gens) == G\nTrue\n```\n\nThe second test simply compares the length of lists using basic sage commands, which I think is clearly not very costly (though please do tell me if you disagree).\n\nFinally, I have again not built a full product, but rather an isomorphism that would be inputted into the second list of the ``mapping`` input. Obvioulsy, this list could contain more than one isomorphism, but to account for this we can just multiply this time by some small integer factor.\n\n```\n\nsage: direct_product_permgroups([c5,c5,c5,c5,c5,c5,c5,c5,c5,c5,c5,c5,c5,c5,c5,c5,c5,c5,c5,c5,c5])  \nsage: a\nPermutation Group with generators [(101,102,103,104,105), (96,97,98,99,100), (91,92,93,94,95), (86,87,88,89,90), (81,82,83,84,85), (76,77,78,79,80), (71,72,73,74,75), (66,67,68,69,70), (61,62,63,64,65), (56,57,58,59,60), (51,52,53,54,55), (46,47,48,49,50), (41,42,43,44,45), (36,37,38,39,40), (31,32,33,34,35), (26,27,28,29,30), (21,22,23,24,25), (16,17,18,19,20), (11,12,13,14,15), (6,7,8,9,10), (1,2,3,4,5)]\nsage: a.order()\n476837158203125\nsage: f = [g.inverse() for g in a.gens()]\nsage: alpha = PermutationGroupMorphism(a,a,f)\nsage: timeit(\"alpha.domain() == alpha.codomain()\")\n625 loops, best of 3: 16.4 \u00b5s per loop\n```\n\nLet me know what you think.",
    "created_at": "2012-08-20T18:02:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13365#issuecomment-205620",
    "user": "https://trac.sagemath.org/admin/accounts/users/khalasz"
}
```

<a id='comment:7'></a>
I ran some time tests on the checks. I'll leave it up to you to determine if they are to costly (I don't think they are, but then again, I'm no more than a novice when it comes to sage, or even CS in general).

First, I should note that my computer is kind of slow. For calibrating purposes, see that the following process gave 31.9 ms per loop on RAB's computer:


```
sage: G = DihedralGroup(2000)
sage: gens = G.gens()
sage: timeit("G == PermutationGroup(gens = gens)")
5 loops, best of 3: 127 ms per loop
```


Now, for the semidihedral group tests:

I didn't build actually build a semidirect product with this group, but the following does exactly what the first test does on the calling group:


```
sage: G = SymmetricGroup(15)
<(1,2,6,7,5),(11,1,12,2,13,3,14,4,15,5),(6,7,8,9,10,11,1)]  #this is the end of an initialization of an 8 element list of random permutations that generates Sym(15)
sage: len(gens)
8
sage: timeit("PermutationGroup(gens) == G")         
25 loops, best of 3: 18.2 ms per loop
sage: G.order()
1307674368000
sage: PermutationGroup(gens) == G
True
```

The second test simply compares the length of lists using basic sage commands, which I think is clearly not very costly (though please do tell me if you disagree).

Finally, I have again not built a full product, but rather an isomorphism that would be inputted into the second list of the ``mapping`` input. Obvioulsy, this list could contain more than one isomorphism, but to account for this we can just multiply this time by some small integer factor.

```

sage: direct_product_permgroups([c5,c5,c5,c5,c5,c5,c5,c5,c5,c5,c5,c5,c5,c5,c5,c5,c5,c5,c5,c5,c5])  
sage: a
Permutation Group with generators [(101,102,103,104,105), (96,97,98,99,100), (91,92,93,94,95), (86,87,88,89,90), (81,82,83,84,85), (76,77,78,79,80), (71,72,73,74,75), (66,67,68,69,70), (61,62,63,64,65), (56,57,58,59,60), (51,52,53,54,55), (46,47,48,49,50), (41,42,43,44,45), (36,37,38,39,40), (31,32,33,34,35), (26,27,28,29,30), (21,22,23,24,25), (16,17,18,19,20), (11,12,13,14,15), (6,7,8,9,10), (1,2,3,4,5)]
sage: a.order()
476837158203125
sage: f = [g.inverse() for g in a.gens()]
sage: alpha = PermutationGroupMorphism(a,a,f)
sage: timeit("alpha.domain() == alpha.codomain()")
625 loops, best of 3: 16.4 µs per loop
```

Let me know what you think.



---

archive/issue_comments_205621.json:
```json
{
    "body": "<a id='comment:8'></a>\nAttachment [13365_semidirectproduct-v1.2.patch](tarball://root/attachments/some-uuid/ticket13365/13365_semidirectproduct-v1.2.patch) by khalasz created at 2012-08-20 18:11:53",
    "created_at": "2012-08-20T18:11:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13365#issuecomment-205621",
    "user": "https://trac.sagemath.org/admin/accounts/users/khalasz"
}
```

<a id='comment:8'></a>
Attachment [13365_semidirectproduct-v1.2.patch](tarball://root/attachments/some-uuid/ticket13365/13365_semidirectproduct-v1.2.patch) by khalasz created at 2012-08-20 18:11:53



---

archive/issue_comments_205622.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,4 +2,4 @@\n A generic, top-level method is added to categories/groups.py, which simply raises a `NotImplementedError`. This  is then overridden in permgroup.py. This method wraps GAP's `SemidirectProduct` function. It is implemented so that the calling group is the group acting on an inputted normal subgroup.\n \n **Apply**\n-1. [attachment: 13365_semidirectproduct.patch]\n+1. [attachment: 13365_semidirectproduct-v1.2.patch]\n``````\n",
    "created_at": "2012-08-20T18:11:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13365#issuecomment-205622",
    "user": "https://trac.sagemath.org/admin/accounts/users/khalasz"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,4 +2,4 @@
 A generic, top-level method is added to categories/groups.py, which simply raises a `NotImplementedError`. This  is then overridden in permgroup.py. This method wraps GAP's `SemidirectProduct` function. It is implemented so that the calling group is the group acting on an inputted normal subgroup.
 
 **Apply**
-1. [attachment: 13365_semidirectproduct.patch]
+1. [attachment: 13365_semidirectproduct-v1.2.patch]
``````




---

archive/issue_comments_205623.json:
```json
{
    "body": "<a id='comment:9'></a>\nI've also added a new patch with your other suggestions.",
    "created_at": "2012-08-20T18:12:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13365#issuecomment-205623",
    "user": "https://trac.sagemath.org/admin/accounts/users/khalasz"
}
```

<a id='comment:9'></a>
I've also added a new patch with your other suggestions.



---

archive/issue_comments_205624.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,4 +2,4 @@\n A generic, top-level method is added to categories/groups.py, which simply raises a `NotImplementedError`. This  is then overridden in permgroup.py. This method wraps GAP's `SemidirectProduct` function. It is implemented so that the calling group is the group acting on an inputted normal subgroup.\n \n **Apply**\n-1. [attachment: 13365_semidirectproduct-v1.2.patch]\n+1. [attachment: 13365_semidirectproduct-v2.patch]\n``````\n",
    "created_at": "2012-08-28T20:54:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13365#issuecomment-205624",
    "user": "https://trac.sagemath.org/admin/accounts/users/khalasz"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,4 +2,4 @@
 A generic, top-level method is added to categories/groups.py, which simply raises a `NotImplementedError`. This  is then overridden in permgroup.py. This method wraps GAP's `SemidirectProduct` function. It is implemented so that the calling group is the group acting on an inputted normal subgroup.
 
 **Apply**
-1. [attachment: 13365_semidirectproduct-v1.2.patch]
+1. [attachment: 13365_semidirectproduct-v2.patch]
``````




---

archive/issue_comments_205625.json:
```json
{
    "body": "<a id='comment:10'></a>\nAttachment [13365_semidirectproduct-v2.patch](tarball://root/attachments/some-uuid/ticket13365/13365_semidirectproduct-v2.patch) by khalasz created at 2012-08-28 20:54:52",
    "created_at": "2012-08-28T20:54:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13365#issuecomment-205625",
    "user": "https://trac.sagemath.org/admin/accounts/users/khalasz"
}
```

<a id='comment:10'></a>
Attachment [13365_semidirectproduct-v2.patch](tarball://root/attachments/some-uuid/ticket13365/13365_semidirectproduct-v2.patch) by khalasz created at 2012-08-28 20:54:52



---

archive/issue_comments_205626.json:
```json
{
    "body": "<a id='comment:11'></a>\nI recently realized that my final test only checked whether or not each homomorphism listed in the second component of `mapping` was an endomorphism, but did not test whether or not this homomorphism was indeed a bijection. I have in its place added two tests, one testing whether or not each function is an endomorphism, another testing whether or not this endomorphism is one-one. Together they test whether each function is indeed an automorphism.\n\nUnfortunately, testing whether or not a function is an injection turns out to be quite costly, so I have added a check to the method. An updated patch has been attached.",
    "created_at": "2012-08-28T20:59:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13365#issuecomment-205626",
    "user": "https://trac.sagemath.org/admin/accounts/users/khalasz"
}
```

<a id='comment:11'></a>
I recently realized that my final test only checked whether or not each homomorphism listed in the second component of `mapping` was an endomorphism, but did not test whether or not this homomorphism was indeed a bijection. I have in its place added two tests, one testing whether or not each function is an endomorphism, another testing whether or not this endomorphism is one-one. Together they test whether each function is indeed an automorphism.

Unfortunately, testing whether or not a function is an injection turns out to be quite costly, so I have added a check to the method. An updated patch has been attached.



---

archive/issue_comments_205627.json:
```json
{
    "body": "Changing work_issues from \"\" to \"fix failing doctests\"",
    "created_at": "2012-08-31T19:04:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13365#issuecomment-205627",
    "user": "https://github.com/benjaminfjones"
}
```

Changing work_issues from "" to "fix failing doctests"



---

archive/issue_comments_205628.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-08-31T19:04:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13365#issuecomment-205628",
    "user": "https://github.com/benjaminfjones"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_205629.json:
```json
{
    "body": "<a id='comment:12'></a>\nSorry for the delay, I've been out of town. \n\nGood catch about the bijection check. I think the `check` optional parameter is a good idea. The only comment I have after reading over your most recent patch is that you should document what the `check` parameter does in the docstring somewhere, preferably under the description of the two required parameters.\n\nAlso, the most recent patch applies cleanly to sage-5.3.rc0 but there are a few failing doctests in `sage/groups/perm_gps/permgroup.py`, one of them is just a difference in the text of a thrown exception, but there are others.",
    "created_at": "2012-08-31T19:04:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13365#issuecomment-205629",
    "user": "https://github.com/benjaminfjones"
}
```

<a id='comment:12'></a>
Sorry for the delay, I've been out of town. 

Good catch about the bijection check. I think the `check` optional parameter is a good idea. The only comment I have after reading over your most recent patch is that you should document what the `check` parameter does in the docstring somewhere, preferably under the description of the two required parameters.

Also, the most recent patch applies cleanly to sage-5.3.rc0 but there are a few failing doctests in `sage/groups/perm_gps/permgroup.py`, one of them is just a difference in the text of a thrown exception, but there are others.



---

archive/issue_comments_205630.json:
```json
{
    "body": "<a id='comment:13'></a>\nI added a discussion of the check parameter under INPUTS. Also added another test, and found the source of the errors you were talking about; I accidentally tested for a kernel of order 0 instead of a kernel of order 1. Do you think I should add some sort of example in which the false check is chosen?\n\nAnyway, I've added a new patch with the most recent changes.",
    "created_at": "2012-09-05T07:51:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13365#issuecomment-205630",
    "user": "https://trac.sagemath.org/admin/accounts/users/khalasz"
}
```

<a id='comment:13'></a>
I added a discussion of the check parameter under INPUTS. Also added another test, and found the source of the errors you were talking about; I accidentally tested for a kernel of order 0 instead of a kernel of order 1. Do you think I should add some sort of example in which the false check is chosen?

Anyway, I've added a new patch with the most recent changes.



---

archive/issue_comments_205631.json:
```json
{
    "body": "<a id='comment:14'></a>\nAttachment [13365_semidirectproduct-v2.1.patch](tarball://root/attachments/some-uuid/ticket13365/13365_semidirectproduct-v2.1.patch) by khalasz created at 2012-09-05 07:53:21",
    "created_at": "2012-09-05T07:53:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13365#issuecomment-205631",
    "user": "https://trac.sagemath.org/admin/accounts/users/khalasz"
}
```

<a id='comment:14'></a>
Attachment [13365_semidirectproduct-v2.1.patch](tarball://root/attachments/some-uuid/ticket13365/13365_semidirectproduct-v2.1.patch) by khalasz created at 2012-09-05 07:53:21



---

archive/issue_comments_205632.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,4 +2,4 @@\n A generic, top-level method is added to categories/groups.py, which simply raises a `NotImplementedError`. This  is then overridden in permgroup.py. This method wraps GAP's `SemidirectProduct` function. It is implemented so that the calling group is the group acting on an inputted normal subgroup.\n \n **Apply**\n-1. [attachment: 13365_semidirectproduct-v2.patch]\n+1. [attachment: 13365_semidirectproduct-v2.1.patch]\n``````\n",
    "created_at": "2012-09-05T07:53:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13365#issuecomment-205632",
    "user": "https://trac.sagemath.org/admin/accounts/users/khalasz"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,4 +2,4 @@
 A generic, top-level method is added to categories/groups.py, which simply raises a `NotImplementedError`. This  is then overridden in permgroup.py. This method wraps GAP's `SemidirectProduct` function. It is implemented so that the calling group is the group acting on an inputted normal subgroup.
 
 **Apply**
-1. [attachment: 13365_semidirectproduct-v2.patch]
+1. [attachment: 13365_semidirectproduct-v2.1.patch]
``````




---

archive/issue_comments_205633.json:
```json
{
    "body": "<a id='comment:15'></a>\nMore tests are almost always better, especially if they increase the branch coverage or exercise different execution paths in the code.\n\n---\n\npatchbot, apply [attachment:13365_semidirectproduct-v2.1.patch]",
    "created_at": "2012-09-05T15:41:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13365#issuecomment-205633",
    "user": "https://github.com/benjaminfjones"
}
```

<a id='comment:15'></a>
More tests are almost always better, especially if they increase the branch coverage or exercise different execution paths in the code.

---

patchbot, apply [attachment:13365_semidirectproduct-v2.1.patch]



---

archive/issue_comments_205634.json:
```json
{
    "body": "Attachment [13365_semidirectproduct-v2.2.patch](tarball://root/attachments/some-uuid/ticket13365/13365_semidirectproduct-v2.2.patch) by khalasz created at 2012-09-08 17:24:49",
    "created_at": "2012-09-08T17:24:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13365#issuecomment-205634",
    "user": "https://trac.sagemath.org/admin/accounts/users/khalasz"
}
```

Attachment [13365_semidirectproduct-v2.2.patch](tarball://root/attachments/some-uuid/ticket13365/13365_semidirectproduct-v2.2.patch) by khalasz created at 2012-09-08 17:24:49



---

archive/issue_comments_205635.json:
```json
{
    "body": "<a id='comment:16'></a>\nI've added a short test where the check parameter is turned off.\nLet me know what you think.",
    "created_at": "2012-09-08T17:25:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13365#issuecomment-205635",
    "user": "https://trac.sagemath.org/admin/accounts/users/khalasz"
}
```

<a id='comment:16'></a>
I've added a short test where the check parameter is turned off.
Let me know what you think.



---

archive/issue_comments_205636.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,4 +2,4 @@\n A generic, top-level method is added to categories/groups.py, which simply raises a `NotImplementedError`. This  is then overridden in permgroup.py. This method wraps GAP's `SemidirectProduct` function. It is implemented so that the calling group is the group acting on an inputted normal subgroup.\n \n **Apply**\n-1. [attachment: 13365_semidirectproduct-v2.1.patch]\n+1. [attachment: 13365_semidirectproduct-v2.2.patch]\n``````\n",
    "created_at": "2012-09-08T17:26:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13365#issuecomment-205636",
    "user": "https://trac.sagemath.org/admin/accounts/users/khalasz"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,4 +2,4 @@
 A generic, top-level method is added to categories/groups.py, which simply raises a `NotImplementedError`. This  is then overridden in permgroup.py. This method wraps GAP's `SemidirectProduct` function. It is implemented so that the calling group is the group acting on an inputted normal subgroup.
 
 **Apply**
-1. [attachment: 13365_semidirectproduct-v2.1.patch]
+1. [attachment: 13365_semidirectproduct-v2.2.patch]
``````




---

archive/issue_comments_205637.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-10-16T17:44:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13365#issuecomment-205637",
    "user": "https://trac.sagemath.org/admin/accounts/users/khalasz"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_205638.json:
```json
{
    "body": "Changing work_issues from \"fix failing doctests\" to \"\"",
    "created_at": "2012-10-16T20:16:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13365#issuecomment-205638",
    "user": "https://github.com/benjaminfjones"
}
```

Changing work_issues from "fix failing doctests" to ""



---

archive/issue_comments_205639.json:
```json
{
    "body": "<a id='comment:19'></a>\nThanks for the ping, I lost track of this ticket. Your updates look good. I made a small reviewer patch to address some trivial things that I didn't think were worth bothering you for. If you are OK with my changes, I'll set to positive review.",
    "created_at": "2012-10-16T20:16:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13365#issuecomment-205639",
    "user": "https://github.com/benjaminfjones"
}
```

<a id='comment:19'></a>
Thanks for the ping, I lost track of this ticket. Your updates look good. I made a small reviewer patch to address some trivial things that I didn't think were worth bothering you for. If you are OK with my changes, I'll set to positive review.



---

archive/issue_comments_205640.json:
```json
{
    "body": "Attachment [trac_13365_reviewer.patch](tarball://root/attachments/some-uuid/ticket13365/trac_13365_reviewer.patch) by @benjaminfjones created at 2012-10-16 20:18:20\n\nreviewer patch addressing trailing whitespace and minor wording changes.",
    "created_at": "2012-10-16T20:18:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13365#issuecomment-205640",
    "user": "https://github.com/benjaminfjones"
}
```

Attachment [trac_13365_reviewer.patch](tarball://root/attachments/some-uuid/ticket13365/trac_13365_reviewer.patch) by @benjaminfjones created at 2012-10-16 20:18:20

reviewer patch addressing trailing whitespace and minor wording changes.



---

archive/issue_comments_205641.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,4 +2,5 @@\n A generic, top-level method is added to categories/groups.py, which simply raises a `NotImplementedError`. This  is then overridden in permgroup.py. This method wraps GAP's `SemidirectProduct` function. It is implemented so that the calling group is the group acting on an inputted normal subgroup.\n \n **Apply**\n-1. [attachment: 13365_semidirectproduct-v2.2.patch]\n+1. [attachment:13365_semidirectproduct-v2.2.patch]\n+2. [attachment:trac_13365_reviewer.patch]\n``````\n",
    "created_at": "2012-10-16T20:19:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13365#issuecomment-205641",
    "user": "https://github.com/benjaminfjones"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,4 +2,5 @@
 A generic, top-level method is added to categories/groups.py, which simply raises a `NotImplementedError`. This  is then overridden in permgroup.py. This method wraps GAP's `SemidirectProduct` function. It is implemented so that the calling group is the group acting on an inputted normal subgroup.
 
 **Apply**
-1. [attachment: 13365_semidirectproduct-v2.2.patch]
+1. [attachment:13365_semidirectproduct-v2.2.patch]
+2. [attachment:trac_13365_reviewer.patch]
``````




---

archive/issue_comments_205642.json:
```json
{
    "body": "<a id='comment:21'></a>\nBen, your reviewer patch needs a proper commit message.  Also, your fixes look good but you happen to have introduced a very small spelling error.  I'll let you find it :-)",
    "created_at": "2012-10-17T01:44:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13365#issuecomment-205642",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:21'></a>
Ben, your reviewer patch needs a proper commit message.  Also, your fixes look good but you happen to have introduced a very small spelling error.  I'll let you find it :-)



---

archive/issue_comments_205643.json:
```json
{
    "body": "With commit message and spell-check",
    "created_at": "2012-10-17T04:06:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13365#issuecomment-205643",
    "user": "https://github.com/rbeezer"
}
```

With commit message and spell-check



---

archive/issue_comments_205644.json:
```json
{
    "body": "<a id='comment:22'></a>\nAttachment [trac_13365_reviewer-v2.patch](tarball://root/attachments/some-uuid/ticket13365/trac_13365_reviewer-v2.patch) by @rbeezer created at 2012-10-17 04:11:25\n\nAdded a commit message to the reviewer patch and fixed a spelling mistake.  Maybe it was the same mistake KDC found, but how would we know?\n\nKevin - three of us have looked at the reviewer patch now.  But you have the final say.  If it looks OK to you, then you can say so here, and flip the ticket to positive review, or wait for Ben to do it.  (Do not add me as a reviewer or anything, just doing a public service on the reviewer patch).",
    "created_at": "2012-10-17T04:11:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13365#issuecomment-205644",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:22'></a>
Attachment [trac_13365_reviewer-v2.patch](tarball://root/attachments/some-uuid/ticket13365/trac_13365_reviewer-v2.patch) by @rbeezer created at 2012-10-17 04:11:25

Added a commit message to the reviewer patch and fixed a spelling mistake.  Maybe it was the same mistake KDC found, but how would we know?

Kevin - three of us have looked at the reviewer patch now.  But you have the final say.  If it looks OK to you, then you can say so here, and flip the ticket to positive review, or wait for Ben to do it.  (Do not add me as a reviewer or anything, just doing a public service on the reviewer patch).



---

archive/issue_comments_205645.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,4 +3,4 @@\n \n **Apply**\n 1. [attachment:13365_semidirectproduct-v2.2.patch]\n-2. [attachment:trac_13365_reviewer.patch]\n+2. [attachment:trac_13365_reviewer-v2.patch]\n``````\n",
    "created_at": "2012-10-17T04:11:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13365#issuecomment-205645",
    "user": "https://github.com/rbeezer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,4 +3,4 @@
 
 **Apply**
 1. [attachment:13365_semidirectproduct-v2.2.patch]
-2. [attachment:trac_13365_reviewer.patch]
+2. [attachment:trac_13365_reviewer-v2.patch]
``````




---

archive/issue_comments_205646.json:
```json
{
    "body": "<a id='comment:23'></a>\nThe patch looks good IMHO. I'll leave to Ben to make sure he approves of the changes before setting this to a positive review.\n\nThanks to all of you for your help.",
    "created_at": "2012-10-17T04:56:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13365#issuecomment-205646",
    "user": "https://trac.sagemath.org/admin/accounts/users/khalasz"
}
```

<a id='comment:23'></a>
The patch looks good IMHO. I'll leave to Ben to make sure he approves of the changes before setting this to a positive review.

Thanks to all of you for your help.



---

archive/issue_comments_205647.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-10-17T05:24:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13365#issuecomment-205647",
    "user": "https://github.com/benjaminfjones"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_205648.json:
```json
{
    "body": "<a id='comment:24'></a>\nLooks good! Thanks for the reviewer patch review.",
    "created_at": "2012-10-17T05:24:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13365#issuecomment-205648",
    "user": "https://github.com/benjaminfjones"
}
```

<a id='comment:24'></a>
Looks good! Thanks for the reviewer patch review.



---

archive/issue_events_043126.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-10-17T07:19:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13365",
    "milestone": "sage-5.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13365#event-43126"
}
```



---

archive/issue_comments_205649.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-11-01T12:02:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13365#issuecomment-205649",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_043127.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-01T12:02:50Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13365",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13365#event-43127"
}
```



---

archive/issue_comments_205650.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-5.5.beta1\"",
    "created_at": "2012-11-01T12:02:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13365#issuecomment-205650",
    "user": "https://github.com/jdemeyer"
}
```

Changing merged from "" to "sage-5.5.beta1"
