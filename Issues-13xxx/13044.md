# Issue 13044: ecl chokes when CC or CXX contains space

archive/issues_012872.json:
```json
{
    "assignees": [],
    "body": "Currently ecl completely fails to build when CC or CXX contains a space. This adds a patch accepted by upstream to fix this.\n\n**Upstream** (patched): http://sage.ugent.be/www/jdemeyer/sage/ecl-15.3.7.tar.bz2\n\nAssignee: **GeorgSWeber**\n\nKeywords: **sd40.5**\n\nBranch: **[9049b15](https://github.com/sagemath/sagetrac-mirror/commit/9049b155a9317d421de5ae9c22fad48eca5af824)**\n\nUpstream: **Fixed upstream, but not in a stable release.**\n\nReviewer: **Jeroen Demeyer, Erik Bray**\n\nAuthor: **R. Andrew Ohana, Erik Bray, Jeroen Demeyer**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/13044_\n\n",
    "closed_at": "2016-03-22T15:23:36Z",
    "created_at": "2012-05-28T04:37:04Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "ecl chokes when CC or CXX contains space",
    "type": "issue",
    "updated_at": "2016-03-22T15:48:25Z",
    "url": "https://github.com/sagemath/sage/issues/13044",
    "user": "https://github.com/ohanar"
}
```
Currently ecl completely fails to build when CC or CXX contains a space. This adds a patch accepted by upstream to fix this.

**Upstream** (patched): http://sage.ugent.be/www/jdemeyer/sage/ecl-15.3.7.tar.bz2

Assignee: **GeorgSWeber**

Keywords: **sd40.5**

Branch: **[9049b15](https://github.com/sagemath/sagetrac-mirror/commit/9049b155a9317d421de5ae9c22fad48eca5af824)**

Upstream: **Fixed upstream, but not in a stable release.**

Reviewer: **Jeroen Demeyer, Erik Bray**

Author: **R. Andrew Ohana, Erik Bray, Jeroen Demeyer**

_Issue created by migration from https://trac.sagemath.org/ticket/13044_





---

archive/issue_events_165502.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2012-05-28T04:37:04Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13044#event-165502"
}
```



---

archive/issue_events_165503.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2012-05-28T04:37:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20build",
    "label_color": "000080",
    "label_name": "component: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13044#event-165503"
}
```



---

archive/issue_events_165504.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2012-05-28T04:37:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13044#event-165504"
}
```



---

archive/issue_events_165505.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2012-05-28T04:37:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13044#event-165505"
}
```



---

archive/issue_comments_150857.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n Currently ccache completely fails building ecl, so we should disable ccache in our ecl spkg.\n+\n+New SPKG: http://wstein.org/home/ohanar/spkgs/ecl-11.1.2.cvs20111120.p2.spkg\n``````\n",
    "created_at": "2012-05-28T04:37:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13044#issuecomment-150857",
    "user": "https://github.com/ohanar"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 Currently ccache completely fails building ecl, so we should disable ccache in our ecl spkg.
+
+New SPKG: http://wstein.org/home/ohanar/spkgs/ecl-11.1.2.cvs20111120.p2.spkg
``````




---

archive/issue_events_165506.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2012-05-28T04:37:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13044#event-165506"
}
```



---

archive/issue_comments_150858.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-Currently ccache completely fails building ecl, so we should disable ccache in our ecl spkg.\n+Currently ecl completely fails to build when CC or CXX contains a space. This hacks around this issue by making temporary wrappers for CC and CXX.\n \n New SPKG: http://wstein.org/home/ohanar/spkgs/ecl-11.1.2.cvs20111120.p2.spkg\n``````\n",
    "created_at": "2012-05-28T05:22:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13044#issuecomment-150858",
    "user": "https://github.com/ohanar"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-Currently ccache completely fails building ecl, so we should disable ccache in our ecl spkg.
+Currently ecl completely fails to build when CC or CXX contains a space. This hacks around this issue by making temporary wrappers for CC and CXX.
 
 New SPKG: http://wstein.org/home/ohanar/spkgs/ecl-11.1.2.cvs20111120.p2.spkg
``````




---

archive/issue_events_165507.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2012-05-28T05:22:41Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "title_is": "ecl chokes when CC or CXX contains space",
    "title_was": "ccache chokes on ecl",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13044#event-165507"
}
```



---

archive/issue_comments_150859.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nI can verify that our current ECL chokes with \"`env CC='nice gcc' ./spkg -i ecl...`\" and that your spkg fixes it. Perhaps it would be nice to put something into the generated `ecl_cc` so we know whence it came: maybe a comment like `# ECL chokes when CC contains spaces; this script works around that. See #13044.` Then it would be easier to remove this workaround when ECL is updated.\n\nAlso, I tried `env CXX='nice g++' ./sage -f ecl...` with the old version and it worked fine. Perhaps we shouldn't also create `ecl_cxx` since ECL is not using a C++ compiler.\n\nAlso`^2`, we should send this upstream.",
    "created_at": "2012-05-28T18:43:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13044#issuecomment-150859",
    "user": "https://github.com/dandrake"
}
```

<a id='comment:3'>Comment 3:</a>
I can verify that our current ECL chokes with "`env CC='nice gcc' ./spkg -i ecl...`" and that your spkg fixes it. Perhaps it would be nice to put something into the generated `ecl_cc` so we know whence it came: maybe a comment like `# ECL chokes when CC contains spaces; this script works around that. See #13044.` Then it would be easier to remove this workaround when ECL is updated.

Also, I tried `env CXX='nice g++' ./sage -f ecl...` with the old version and it worked fine. Perhaps we shouldn't also create `ecl_cxx` since ECL is not using a C++ compiler.

Also`^2`, we should send this upstream.



---

archive/issue_events_165508.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-13T12:20:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20build",
    "label_color": "000080",
    "label_name": "component: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13044#event-165508"
}
```



---

archive/issue_events_165509.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-13T12:20:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages",
    "label_color": "000080",
    "label_name": "component: packages",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13044#event-165509"
}
```



---

archive/issue_events_165510.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13044#event-165510"
}
```



---

archive/issue_events_165511.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13044#event-165511"
}
```



---

archive/issue_comments_150860.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nIs this still needed?",
    "created_at": "2013-12-30T10:04:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13044#issuecomment-150860",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:6'>Comment 6:</a>
Is this still needed?



---

archive/issue_events_165512.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2013-12-30T10:04:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13044#event-165512"
}
```



---

archive/issue_events_165513.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2013-12-30T10:04:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13044#event-165513"
}
```



---

archive/issue_events_165514.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-12-30T10:20:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13044#event-165514"
}
```



---

archive/issue_events_165515.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-12-30T10:20:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13044#event-165515"
}
```



---

archive/issue_comments_150861.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nYes, it is still needed.",
    "created_at": "2013-12-30T10:20:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13044#issuecomment-150861",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'>Comment 7:</a>
Yes, it is still needed.



---

archive/issue_events_165516.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13044#event-165516"
}
```



---

archive/issue_events_165517.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13044#event-165517"
}
```



---

archive/issue_events_165518.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13044#event-165518"
}
```



---

archive/issue_events_165519.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13044#event-165519"
}
```



---

archive/issue_comments_150862.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nThis needs to be converted to a new-style package, for the ECL version we currently use.",
    "created_at": "2014-05-15T20:33:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13044#issuecomment-150862",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:10'>Comment 10:</a>
This needs to be converted to a new-style package, for the ECL version we currently use.



---

archive/issue_events_165520.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-05-15T20:33:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13044#event-165520"
}
```



---

archive/issue_events_165521.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-05-15T20:33:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13044#event-165521"
}
```



---

archive/issue_events_165522.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13044#event-165522"
}
```



---

archive/issue_events_165523.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13044#event-165523"
}
```



---

archive/issue_comments_150863.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nI can confirm this is still an issue--sage build breaks on ecl when `CC=ccache gcc`--obviously this can be worked around easily enough, but setting `CC` like that is not uncommon either, and only seems to be a problem with ecl.\n\nWould this be worth patching in ecl (both upstream and in sage)?",
    "created_at": "2016-02-24T15:47:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13044#issuecomment-150863",
    "user": "https://github.com/embray"
}
```

<a id='comment:12'>Comment 12:</a>
I can confirm this is still an issue--sage build breaks on ecl when `CC=ccache gcc`--obviously this can be worked around easily enough, but setting `CC` like that is not uncommon either, and only seems to be a problem with ecl.

Would this be worth patching in ecl (both upstream and in sage)?



---

archive/issue_comments_150864.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nThe updated spkg mentioned in this ticket is a 404 now.",
    "created_at": "2016-02-24T15:48:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13044#issuecomment-150864",
    "user": "https://github.com/embray"
}
```

<a id='comment:13'>Comment 13:</a>
The updated spkg mentioned in this ticket is a 404 now.



---

archive/issue_comments_150865.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nCurrent upstream is https://common-lisp.net/project/ecl/\nAlso `ecl-16.0.0` has been released and it would be nice to upgrade. It would be worth checking if it is still an issue in the latest release.",
    "created_at": "2016-02-24T20:22:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13044#issuecomment-150865",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:14'>Comment 14:</a>
Current upstream is https://common-lisp.net/project/ecl/
Also `ecl-16.0.0` has been released and it would be nice to upgrade. It would be worth checking if it is still an issue in the latest release.



---

archive/issue_comments_150866.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nThere is a similar bug that I've just run into, but in Python, when compiling the Cython sources.  I've never run into this before strangely, but maybe have just worked on fewer projects with cpp generated from Cython: https://bugs.python.org/issue8027\n\nI will check if the ecl issue is fixed upstream.",
    "created_at": "2016-02-25T08:36:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13044#issuecomment-150866",
    "user": "https://github.com/embray"
}
```

<a id='comment:15'>Comment 15:</a>
There is a similar bug that I've just run into, but in Python, when compiling the Cython sources.  I've never run into this before strangely, but maybe have just worked on fewer projects with cpp generated from Cython: https://bugs.python.org/issue8027

I will check if the ecl issue is fixed upstream.



---

archive/issue_comments_150867.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nFYI this bug still exists upstream, or at least in ecl-16.0.0.  I will see if I can come up with a patch.",
    "created_at": "2016-03-17T13:04:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13044#issuecomment-150867",
    "user": "https://github.com/embray"
}
```

<a id='comment:16'>Comment 16:</a>
FYI this bug still exists upstream, or at least in ecl-16.0.0.  I will see if I can come up with a patch.



---

archive/issue_comments_150868.json:
```json
{
    "body": "Upstream: **Reported upstream. No feedback yet.**",
    "created_at": "2016-03-17T15:03:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13044#issuecomment-150868",
    "user": "https://github.com/embray"
}
```

Upstream: **Reported upstream. No feedback yet.**



---

archive/issue_comments_150869.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nSubmitted a patch to upstream: https://gitlab.com/embeddable-common-lisp/ecl/merge_requests/20",
    "created_at": "2016-03-17T15:03:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13044#issuecomment-150869",
    "user": "https://github.com/embray"
}
```

<a id='comment:17'>Comment 17:</a>
Submitted a patch to upstream: https://gitlab.com/embeddable-common-lisp/ecl/merge_requests/20



---

archive/issue_events_165524.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-03-17T17:16:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13044#event-165524"
}
```



---

archive/issue_events_165525.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-03-17T17:16:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13044#event-165525"
}
```



---

archive/issue_comments_150870.json:
```json
{
    "body": "Branch: **[u/embray/issue-13044](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/issue-13044)**",
    "created_at": "2016-03-17T17:16:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13044#issuecomment-150870",
    "user": "https://github.com/embray"
}
```

Branch: **[u/embray/issue-13044](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/issue-13044)**



---

archive/issue_comments_150871.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nAdded the patch to the spkg.  It applies to the current version of the spkg with a bit of fuzz.  \n\nIf I understand correctly I should also update the patch version, and upload a new source package? Not sure exactly how to go about that though.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c9f77c6dc61f6d3684716df620706f05a0604b64\">c9f77c6</a></td><td><code>Add patch to ecl for building when CC=ccache gcc (or the like) from https://gitlab.com/embeddable-common-lisp/ecl/merge_requests/20</code></td></tr></table>\n",
    "created_at": "2016-03-17T17:16:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13044#issuecomment-150871",
    "user": "https://github.com/embray"
}
```

<a id='comment:18'>Comment 18:</a>
Added the patch to the spkg.  It applies to the current version of the spkg with a bit of fuzz.  

If I understand correctly I should also update the patch version, and upload a new source package? Not sure exactly how to go about that though.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c9f77c6dc61f6d3684716df620706f05a0604b64">c9f77c6</a></td><td><code>Add patch to ecl for building when CC=ccache gcc (or the like) from https://gitlab.com/embeddable-common-lisp/ecl/merge_requests/20</code></td></tr></table>




---

archive/issue_comments_150872.json:
```json
{
    "body": "Commit: **[c9f77c6](https://github.com/sagemath/sagetrac-mirror/commit/c9f77c6dc61f6d3684716df620706f05a0604b64)**",
    "created_at": "2016-03-17T17:16:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13044#issuecomment-150872",
    "user": "https://github.com/embray"
}
```

Commit: **[c9f77c6](https://github.com/sagemath/sagetrac-mirror/commit/c9f77c6dc61f6d3684716df620706f05a0604b64)**



---

archive/issue_comments_150873.json:
```json
{
    "body": "Changed author from **R. Andrew Ohana** to **R. Andrew Ohana, Erik Bray**",
    "created_at": "2016-03-18T18:08:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13044#issuecomment-150873",
    "user": "https://github.com/jdemeyer"
}
```

Changed author from **R. Andrew Ohana** to **R. Andrew Ohana, Erik Bray**



---

archive/issue_events_165526.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-03-18T18:08:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13044#event-165526"
}
```



---

archive/issue_events_165527.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-03-18T18:08:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "milestone_number": null,
    "milestone_title": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13044#event-165527"
}
```



---

archive/issue_comments_150874.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1 @@\n Currently ecl completely fails to build when CC or CXX contains a space. This hacks around this issue by making temporary wrappers for CC and CXX.\n-\n-New SPKG: http://wstein.org/home/ohanar/spkgs/ecl-11.1.2.cvs20111120.p2.spkg\n``````\n",
    "created_at": "2016-03-18T18:08:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13044#issuecomment-150874",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1 @@
 Currently ecl completely fails to build when CC or CXX contains a space. This hacks around this issue by making temporary wrappers for CC and CXX.
-
-New SPKG: http://wstein.org/home/ohanar/spkgs/ecl-11.1.2.cvs20111120.p2.spkg
``````




---

archive/issue_comments_150875.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nReplying to [@embray](#comment%3A18):\n> Added the patch to the spkg.  It applies to the current version of the spkg with a bit of fuzz.  \n> \n> If I understand correctly I should also update the patch version\n\nIn this exceptional case I think it's not needed because there is no reason to rebuild everybody's ECL with this patch. And in the cases where ECL didn't install before, there is no **re**build needed since there couldn't have been a build in the first place.\n\n> and upload a new source package?\n\nNo, because you are not changing the source tarball, just adding a patch.",
    "created_at": "2016-03-18T18:13:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13044#issuecomment-150875",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:20'>Comment 20:</a>
Replying to [@embray](#comment%3A18):
> Added the patch to the spkg.  It applies to the current version of the spkg with a bit of fuzz.  
> 
> If I understand correctly I should also update the patch version

In this exceptional case I think it's not needed because there is no reason to rebuild everybody's ECL with this patch. And in the cases where ECL didn't install before, there is no **re**build needed since there couldn't have been a build in the first place.

> and upload a new source package?

No, because you are not changing the source tarball, just adding a patch.



---

archive/issue_comments_150876.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nIf I understand correctly, for the package the patches are being applied by `spkg-src` which only seems to apply when building the source tarball.",
    "created_at": "2016-03-18T18:19:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13044#issuecomment-150876",
    "user": "https://github.com/embray"
}
```

<a id='comment:21'>Comment 21:</a>
If I understand correctly, for the package the patches are being applied by `spkg-src` which only seems to apply when building the source tarball.



---

archive/issue_comments_150877.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nOkay, this is unusual...",
    "created_at": "2016-03-19T13:34:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13044#issuecomment-150877",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:22'>Comment 22:</a>
Okay, this is unusual...



---

archive/issue_comments_150878.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nBad separation (i.e. none) between the patches that needs to be applied in `spkg-src` because autoconf has to be run after them and \"normal\" patches. I guess since you are patching the tarball anyway, you may as well put *all* the patches in it.",
    "created_at": "2016-03-19T19:54:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13044#issuecomment-150878",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:23'>Comment 23:</a>
Bad separation (i.e. none) between the patches that needs to be applied in `spkg-src` because autoconf has to be run after them and "normal" patches. I guess since you are patching the tarball anyway, you may as well put *all* the patches in it.



---

archive/issue_comments_150879.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nFWIW the patch has been accepted as-is upstream.",
    "created_at": "2016-03-21T10:02:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13044#issuecomment-150879",
    "user": "https://github.com/embray"
}
```

<a id='comment:24'>Comment 24:</a>
FWIW the patch has been accepted as-is upstream.



---

archive/issue_events_165528.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-03-21T10:29:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13044#event-165528"
}
```



---

archive/issue_events_165529.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-03-21T10:29:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13044#event-165529"
}
```



---

archive/issue_comments_150880.json:
```json
{
    "body": "Changed upstream from **Reported upstream. No feedback yet.** to **Fixed upstream, but not in a stable release.**",
    "created_at": "2016-03-21T10:29:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13044#issuecomment-150880",
    "user": "https://github.com/jdemeyer"
}
```

Changed upstream from **Reported upstream. No feedback yet.** to **Fixed upstream, but not in a stable release.**



---

archive/issue_comments_150881.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer**",
    "created_at": "2016-03-21T11:05:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13044#issuecomment-150881",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Jeroen Demeyer**



---

archive/issue_comments_150882.json:
```json
{
    "body": "Changed author from **R. Andrew Ohana, Erik Bray** to **R. Andrew Ohana, Erik Bray, Jeroen Demeyer**",
    "created_at": "2016-03-21T11:05:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13044#issuecomment-150882",
    "user": "https://github.com/jdemeyer"
}
```

Changed author from **R. Andrew Ohana, Erik Bray** to **R. Andrew Ohana, Erik Bray, Jeroen Demeyer**



---

archive/issue_comments_150883.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n Currently ecl completely fails to build when CC or CXX contains a space. This hacks around this issue by making temporary wrappers for CC and CXX.\n+\n+**Upstream** (patched): http://sage.ugent.be/www/jdemeyer/sage/ecl-15.3.7.tar.bz2\n``````\n",
    "created_at": "2016-03-21T11:15:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13044#issuecomment-150883",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 Currently ecl completely fails to build when CC or CXX contains a space. This hacks around this issue by making temporary wrappers for CC and CXX.
+
+**Upstream** (patched): http://sage.ugent.be/www/jdemeyer/sage/ecl-15.3.7.tar.bz2
``````




---

archive/issue_comments_150884.json:
```json
{
    "body": "Changed branch from **[u/embray/issue-13044](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/issue-13044)** to **[u/jdemeyer/issue-13044](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/issue-13044)**",
    "created_at": "2016-03-21T11:39:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13044#issuecomment-150884",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/embray/issue-13044](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/issue-13044)** to **[u/jdemeyer/issue-13044](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/issue-13044)**



---

archive/issue_comments_150885.json:
```json
{
    "body": "Changed commit from **[c9f77c6](https://github.com/sagemath/sagetrac-mirror/commit/c9f77c6dc61f6d3684716df620706f05a0604b64)** to **[9049b15](https://github.com/sagemath/sagetrac-mirror/commit/9049b155a9317d421de5ae9c22fad48eca5af824)**",
    "created_at": "2016-03-21T12:11:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13044#issuecomment-150885",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[c9f77c6](https://github.com/sagemath/sagetrac-mirror/commit/c9f77c6dc61f6d3684716df620706f05a0604b64)** to **[9049b15](https://github.com/sagemath/sagetrac-mirror/commit/9049b155a9317d421de5ae9c22fad48eca5af824)**



---

archive/issue_events_165530.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-03-21T12:11:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13044#event-165530"
}
```



---

archive/issue_events_165531.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-03-21T12:11:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13044#event-165531"
}
```



---

archive/issue_comments_150886.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\nBuilding with `CC=\"ccache cc\" CXX=\"ccache c++\"` now works.\n\nI cleaned up the packaging and build of ECL. In particular, I separated the patches which need to be applied by `spkg-src` from the ones which are applied at build-time. This part still needs to be reviewed.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9049b155a9317d421de5ae9c22fad48eca5af824\">9049b15</a></td><td><code>Improve ECL packaging and build</code></td></tr></table>\n",
    "created_at": "2016-03-21T12:11:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13044#issuecomment-150886",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:29'>Comment 29:</a>
Building with `CC="ccache cc" CXX="ccache c++"` now works.

I cleaned up the packaging and build of ECL. In particular, I separated the patches which need to be applied by `spkg-src` from the ones which are applied at build-time. This part still needs to be reviewed.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9049b155a9317d421de5ae9c22fad48eca5af824">9049b15</a></td><td><code>Improve ECL packaging and build</code></td></tr></table>




---

archive/issue_events_165532.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-03-21T13:16:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13044#event-165532"
}
```



---

archive/issue_events_165533.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-03-21T13:16:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13044#event-165533"
}
```



---

archive/issue_comments_150887.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\n+1",
    "created_at": "2016-03-21T13:16:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13044#issuecomment-150887",
    "user": "https://github.com/embray"
}
```

<a id='comment:30'>Comment 30:</a>
+1



---

archive/issue_comments_150888.json:
```json
{
    "body": "Changed reviewer from **Jeroen Demeyer** to **Jeroen Demeyer, Erik Bray**",
    "created_at": "2016-03-21T17:06:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13044#issuecomment-150888",
    "user": "https://github.com/jdemeyer"
}
```

Changed reviewer from **Jeroen Demeyer** to **Jeroen Demeyer, Erik Bray**



---

archive/issue_events_165534.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-03-22T15:23:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13044#event-165534"
}
```



---

archive/issue_events_165535.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "3aa83f50beb2e634a5e2884a28be5043cca61206",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-03-22T15:23:36Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13044#event-165535"
}
```



---

archive/issue_comments_150889.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/issue-13044](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/issue-13044)** to **[9049b15](https://github.com/sagemath/sagetrac-mirror/commit/9049b155a9317d421de5ae9c22fad48eca5af824)**",
    "created_at": "2016-03-22T15:23:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13044#issuecomment-150889",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jdemeyer/issue-13044](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/issue-13044)** to **[9049b15](https://github.com/sagemath/sagetrac-mirror/commit/9049b155a9317d421de5ae9c22fad48eca5af824)**



---

archive/issue_comments_150890.json:
```json
{
    "body": "Changed commit from **[9049b15](https://github.com/sagemath/sagetrac-mirror/commit/9049b155a9317d421de5ae9c22fad48eca5af824)** to none",
    "created_at": "2016-03-22T15:48:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13044#issuecomment-150890",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[9049b15](https://github.com/sagemath/sagetrac-mirror/commit/9049b155a9317d421de5ae9c22fad48eca5af824)** to none



---

archive/issue_comments_150891.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-Currently ecl completely fails to build when CC or CXX contains a space. This hacks around this issue by making temporary wrappers for CC and CXX.\n+Currently ecl completely fails to build when CC or CXX contains a space. This adds a patch accepted by upstream to fix this.\n \n **Upstream** (patched): http://sage.ugent.be/www/jdemeyer/sage/ecl-15.3.7.tar.bz2\n``````\n",
    "created_at": "2016-03-22T15:48:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13044#issuecomment-150891",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-Currently ecl completely fails to build when CC or CXX contains a space. This hacks around this issue by making temporary wrappers for CC and CXX.
+Currently ecl completely fails to build when CC or CXX contains a space. This adds a patch accepted by upstream to fix this.
 
 **Upstream** (patched): http://sage.ugent.be/www/jdemeyer/sage/ecl-15.3.7.tar.bz2
``````

