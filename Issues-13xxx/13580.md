# Issue 13580: Parallel map reduce on SearchForest

archive/issues_013376.json:
```json
{
    "assignees": [],
    "body": "Implement a map reduce algorithm in parallel on large sets described by a `SearchForest`. We use a work-stealing algorithm (see https://en.wikipedia.org/wiki/Work_stealing) based on Python's multiprocessing. \n\n\n**Assignee:** @hivert\n\n**CC:**  sage-combinat @nathanncohen @jdemeyer @seblabbe\n\n**Keywords:** map-reduce, days57, days77\n\n**Branch:** [134c1fad85dd50fa28528adc343bad759b174cc6](https://github.com/sagemath/sagetrac-mirror/commit/134c1fad85dd50fa28528adc343bad759b174cc6)\n\n**Reviewer:** S\u00e9bastien Labb\u00e9, Jean-Baptiste Priez\n\n**Author:** Florent Hivert, Jean-Baptiste Priez, Nathann Cohen\n\nIssue created by migration from https://trac.sagemath.org/ticket/13580\n\n",
    "closed_at": "2016-04-08T22:40:20Z",
    "created_at": "2012-10-07T17:07:38Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Parallel map reduce on SearchForest",
    "type": "issue",
    "updated_at": "2016-04-15T20:41:44Z",
    "url": "https://github.com/sagemath/sage/issues/13580",
    "user": "https://github.com/hivert"
}
```
Implement a map reduce algorithm in parallel on large sets described by a `SearchForest`. We use a work-stealing algorithm (see https://en.wikipedia.org/wiki/Work_stealing) based on Python's multiprocessing. 


**Assignee:** @hivert

**CC:**  sage-combinat @nathanncohen @jdemeyer @seblabbe

**Keywords:** map-reduce, days57, days77

**Branch:** [134c1fad85dd50fa28528adc343bad759b174cc6](https://github.com/sagemath/sagetrac-mirror/commit/134c1fad85dd50fa28528adc343bad759b174cc6)

**Reviewer:** Sébastien Labbé, Jean-Baptiste Priez

**Author:** Florent Hivert, Jean-Baptiste Priez, Nathann Cohen

Issue created by migration from https://trac.sagemath.org/ticket/13580





---

archive/issue_events_160700.json:
```json
{
    "actor": "https://github.com/hivert",
    "created_at": "2012-10-07T17:07:38Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "milestone_number": null,
    "milestone_title": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13580#event-160700"
}
```



---

archive/issue_events_160701.json:
```json
{
    "actor": "https://github.com/hivert",
    "created_at": "2012-10-07T17:07:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
    "label_color": "08517b",
    "label_name": "component: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13580#event-160701"
}
```



---

archive/issue_events_160702.json:
```json
{
    "actor": "https://github.com/hivert",
    "created_at": "2012-10-07T17:07:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "008080",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13580#event-160702"
}
```



---

archive/issue_comments_161027.json:
```json
{
    "body": "<a id='comment:1'>**Comment 1:**</a>\nSalut Florent et Nathann,\n\nI am starting to think/work on #6637... I have some questions. Mainly, I would like to know what is this ticket, because the above one liner in the description does not say much...\n\n- Will SearchForest survive or not? \n- Does it replace SearchForest?\n- Does it improve SearchForest? \n- Does it use SearchForest?\n- Or is it used by SearchForest?\n\nAlso, Florent wrote on [sage-devel](https://groups.google.com/d/msg/sage-devel/5XHvEx89RlQ/Tb_QBWepC5YJ) in October 2012 that \n\n```\n   I'm also in the process of finalizing a patch which do parallel and even\n   distributed map-reduce on recursively enumerated sets (currently badly named\n   SearchForest, I'll change the name in my patch, ticket #13580, patch on\n   Sage-Combinat queue [1]).\n```\n\n- I do not see in the cited patch that the name of SearchForest is changed.\n- What would be a better name for SearchForest ?\n- What patch is the more recent? the \"old\" one or the \"experimental\" one?\n\n```\n    trac_13580-map_reduce-fh.patch #+experimental\n    map_reduce_improved_loop-fh.patch #+experimental\n    map_reduce_condition-fh.patch #+experimental\n    trac_13580-map_reduce-old-fh.patch \n```",
    "created_at": "2013-02-09T18:12:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161027",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:1'>**Comment 1:**</a>
Salut Florent et Nathann,

I am starting to think/work on #6637... I have some questions. Mainly, I would like to know what is this ticket, because the above one liner in the description does not say much...

- Will SearchForest survive or not? 
- Does it replace SearchForest?
- Does it improve SearchForest? 
- Does it use SearchForest?
- Or is it used by SearchForest?

Also, Florent wrote on [sage-devel](https://groups.google.com/d/msg/sage-devel/5XHvEx89RlQ/Tb_QBWepC5YJ) in October 2012 that 

```
   I'm also in the process of finalizing a patch which do parallel and even
   distributed map-reduce on recursively enumerated sets (currently badly named
   SearchForest, I'll change the name in my patch, ticket #13580, patch on
   Sage-Combinat queue [1]).
```

- I do not see in the cited patch that the name of SearchForest is changed.
- What would be a better name for SearchForest ?
- What patch is the more recent? the "old" one or the "experimental" one?

```
    trac_13580-map_reduce-fh.patch #+experimental
    map_reduce_improved_loop-fh.patch #+experimental
    map_reduce_condition-fh.patch #+experimental
    trac_13580-map_reduce-old-fh.patch 
```



---

archive/issue_events_160703.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13580#event-160703"
}
```



---

archive/issue_events_160704.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13580#event-160704"
}
```



---

archive/issue_events_160705.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13580#event-160705"
}
```



---

archive/issue_events_160706.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13580#event-160706"
}
```



---

archive/issue_comments_161028.json:
```json
{
    "body": "**Branch:** [u/hivert/13580/map_reduce](https://github.com/sagemath/sagetrac-mirror/tree/u/hivert/13580/map_reduce)",
    "created_at": "2014-04-07T21:54:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161028",
    "user": "https://github.com/hivert"
}
```

**Branch:** [u/hivert/13580/map_reduce](https://github.com/sagemath/sagetrac-mirror/tree/u/hivert/13580/map_reduce)



---

archive/issue_comments_161029.json:
```json
{
    "body": "<a id='comment:5'>**Comment 5:**</a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/693c672387212c47ac65012466f92ffa2cc55932\">693c672</a></td><td><code>Imported code from trac_13580-map_reduce-fh.patch + fixed multiline doctests.</code></td></tr></table>\n",
    "created_at": "2014-04-09T02:56:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161029",
    "user": "https://github.com/hivert"
}
```

<a id='comment:5'>**Comment 5:**</a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/693c672387212c47ac65012466f92ffa2cc55932">693c672</a></td><td><code>Imported code from trac_13580-map_reduce-fh.patch + fixed multiline doctests.</code></td></tr></table>




---

archive/issue_comments_161030.json:
```json
{
    "body": "**Commit:** [693c672387212c47ac65012466f92ffa2cc55932](https://github.com/sagemath/sagetrac-mirror/commit/693c672387212c47ac65012466f92ffa2cc55932)",
    "created_at": "2014-04-09T02:56:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161030",
    "user": "https://github.com/hivert"
}
```

**Commit:** [693c672387212c47ac65012466f92ffa2cc55932](https://github.com/sagemath/sagetrac-mirror/commit/693c672387212c47ac65012466f92ffa2cc55932)



---

archive/issue_comments_161031.json:
```json
{
    "body": "**Changing keywords** from \"map-reduce\" to \"map-reduce, days57\".",
    "created_at": "2014-04-09T02:56:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161031",
    "user": "https://github.com/hivert"
}
```

**Changing keywords** from "map-reduce" to "map-reduce, days57".



---

archive/issue_events_160707.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13580#event-160707"
}
```



---

archive/issue_events_160708.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13580#event-160708"
}
```



---

archive/issue_events_160709.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13580#event-160709"
}
```



---

archive/issue_events_160710.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13580#event-160710"
}
```



---

archive/issue_comments_161032.json:
```json
{
    "body": "**Changing branch** from \"[u/hivert/13580/map_reduce](https://github.com/sagemath/sagetrac-mirror/tree/u/hivert/13580/map_reduce)\" to \"[u/nthiery/13580/map_reduce](https://github.com/sagemath/sagetrac-mirror/tree/u/nthiery/13580/map_reduce)\".",
    "created_at": "2015-03-06T11:16:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161032",
    "user": "https://github.com/nthiery"
}
```

**Changing branch** from "[u/hivert/13580/map_reduce](https://github.com/sagemath/sagetrac-mirror/tree/u/hivert/13580/map_reduce)" to "[u/nthiery/13580/map_reduce](https://github.com/sagemath/sagetrac-mirror/tree/u/nthiery/13580/map_reduce)".



---

archive/issue_comments_161033.json:
```json
{
    "body": "<a id='comment:9'>**Comment 9:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/addb17a177397cd9de0952e7c1ee457fe49220bc\">addb17a</a></td><td><code>13580: Trivial rest fix</code></td></tr></table>\n",
    "created_at": "2015-03-09T15:47:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161033",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:9'>**Comment 9:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/addb17a177397cd9de0952e7c1ee457fe49220bc">addb17a</a></td><td><code>13580: Trivial rest fix</code></td></tr></table>




---

archive/issue_comments_161034.json:
```json
{
    "body": "**Changing commit** from \"[693c672387212c47ac65012466f92ffa2cc55932](https://github.com/sagemath/sagetrac-mirror/commit/693c672387212c47ac65012466f92ffa2cc55932)\" to \"[addb17a177397cd9de0952e7c1ee457fe49220bc](https://github.com/sagemath/sagetrac-mirror/commit/addb17a177397cd9de0952e7c1ee457fe49220bc)\".",
    "created_at": "2015-03-09T15:47:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161034",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[693c672387212c47ac65012466f92ffa2cc55932](https://github.com/sagemath/sagetrac-mirror/commit/693c672387212c47ac65012466f92ffa2cc55932)" to "[addb17a177397cd9de0952e7c1ee457fe49220bc](https://github.com/sagemath/sagetrac-mirror/commit/addb17a177397cd9de0952e7c1ee457fe49220bc)".



---

archive/issue_comments_161035.json:
```json
{
    "body": "**Changing branch** from \"[u/nthiery/13580/map_reduce](https://github.com/sagemath/sagetrac-mirror/tree/u/nthiery/13580/map_reduce)\" to \"[u/hivert/13580/map_reduce](https://github.com/sagemath/sagetrac-mirror/tree/u/hivert/13580/map_reduce)\".",
    "created_at": "2015-05-08T22:01:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161035",
    "user": "https://github.com/hivert"
}
```

**Changing branch** from "[u/nthiery/13580/map_reduce](https://github.com/sagemath/sagetrac-mirror/tree/u/nthiery/13580/map_reduce)" to "[u/hivert/13580/map_reduce](https://github.com/sagemath/sagetrac-mirror/tree/u/hivert/13580/map_reduce)".



---

archive/issue_comments_161036.json:
```json
{
    "body": "<a id='comment:11'>**Comment 11:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/92e6e680771d6f286954bf85ee0064d22a0b253c\">92e6e68</a></td><td><code>Merge branch 't/13580/map_reduce' into 13580</code></td></tr></table>\n",
    "created_at": "2015-05-20T22:49:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161036",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:11'>**Comment 11:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/92e6e680771d6f286954bf85ee0064d22a0b253c">92e6e68</a></td><td><code>Merge branch 't/13580/map_reduce' into 13580</code></td></tr></table>




---

archive/issue_comments_161037.json:
```json
{
    "body": "**Changing commit** from \"[addb17a177397cd9de0952e7c1ee457fe49220bc](https://github.com/sagemath/sagetrac-mirror/commit/addb17a177397cd9de0952e7c1ee457fe49220bc)\" to \"[92e6e680771d6f286954bf85ee0064d22a0b253c](https://github.com/sagemath/sagetrac-mirror/commit/92e6e680771d6f286954bf85ee0064d22a0b253c)\".",
    "created_at": "2015-05-20T22:49:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161037",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[addb17a177397cd9de0952e7c1ee457fe49220bc](https://github.com/sagemath/sagetrac-mirror/commit/addb17a177397cd9de0952e7c1ee457fe49220bc)" to "[92e6e680771d6f286954bf85ee0064d22a0b253c](https://github.com/sagemath/sagetrac-mirror/commit/92e6e680771d6f286954bf85ee0064d22a0b253c)".



---

archive/issue_comments_161038.json:
```json
{
    "body": "<a id='comment:12'>**Comment 12:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/734c74810e63321463e4bca7bcf0da85dffc47b9\">734c748</a></td><td><code>#13580 Fixed test after merging #6637</code></td></tr></table>\n",
    "created_at": "2015-05-20T23:06:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161038",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:12'>**Comment 12:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/734c74810e63321463e4bca7bcf0da85dffc47b9">734c748</a></td><td><code>#13580 Fixed test after merging #6637</code></td></tr></table>




---

archive/issue_comments_161039.json:
```json
{
    "body": "**Changing commit** from \"[92e6e680771d6f286954bf85ee0064d22a0b253c](https://github.com/sagemath/sagetrac-mirror/commit/92e6e680771d6f286954bf85ee0064d22a0b253c)\" to \"[734c74810e63321463e4bca7bcf0da85dffc47b9](https://github.com/sagemath/sagetrac-mirror/commit/734c74810e63321463e4bca7bcf0da85dffc47b9)\".",
    "created_at": "2015-05-20T23:06:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161039",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[92e6e680771d6f286954bf85ee0064d22a0b253c](https://github.com/sagemath/sagetrac-mirror/commit/92e6e680771d6f286954bf85ee0064d22a0b253c)" to "[734c74810e63321463e4bca7bcf0da85dffc47b9](https://github.com/sagemath/sagetrac-mirror/commit/734c74810e63321463e4bca7bcf0da85dffc47b9)".



---

archive/issue_comments_161040.json:
```json
{
    "body": "<a id='comment:13'>**Comment 13:**</a>\nI saw the following typo in map reduce file while looking at the previous commit: \"As an example, ee compute\"",
    "created_at": "2015-05-21T07:51:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161040",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:13'>**Comment 13:**</a>
I saw the following typo in map reduce file while looking at the previous commit: "As an example, ee compute"



---

archive/issue_comments_161041.json:
```json
{
    "body": "<a id='comment:14'>**Comment 14:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f234f60f37e007365c2aec1b4defea55ff255c70\">f234f60</a></td><td><code>#13580 : improved documentation</code></td></tr></table>\n",
    "created_at": "2015-05-21T15:42:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161041",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:14'>**Comment 14:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f234f60f37e007365c2aec1b4defea55ff255c70">f234f60</a></td><td><code>#13580 : improved documentation</code></td></tr></table>




---

archive/issue_comments_161042.json:
```json
{
    "body": "**Changing commit** from \"[734c74810e63321463e4bca7bcf0da85dffc47b9](https://github.com/sagemath/sagetrac-mirror/commit/734c74810e63321463e4bca7bcf0da85dffc47b9)\" to \"[f234f60f37e007365c2aec1b4defea55ff255c70](https://github.com/sagemath/sagetrac-mirror/commit/f234f60f37e007365c2aec1b4defea55ff255c70)\".",
    "created_at": "2015-05-21T15:42:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161042",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[734c74810e63321463e4bca7bcf0da85dffc47b9](https://github.com/sagemath/sagetrac-mirror/commit/734c74810e63321463e4bca7bcf0da85dffc47b9)" to "[f234f60f37e007365c2aec1b4defea55ff255c70](https://github.com/sagemath/sagetrac-mirror/commit/f234f60f37e007365c2aec1b4defea55ff255c70)".



---

archive/issue_comments_161043.json:
```json
{
    "body": "**Changing commit** from \"[f234f60f37e007365c2aec1b4defea55ff255c70](https://github.com/sagemath/sagetrac-mirror/commit/f234f60f37e007365c2aec1b4defea55ff255c70)\" to \"[7a33037a2d444e2f6981637d3e187cbcca72ba7d](https://github.com/sagemath/sagetrac-mirror/commit/7a33037a2d444e2f6981637d3e187cbcca72ba7d)\".",
    "created_at": "2015-11-23T11:06:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161043",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[f234f60f37e007365c2aec1b4defea55ff255c70](https://github.com/sagemath/sagetrac-mirror/commit/f234f60f37e007365c2aec1b4defea55ff255c70)" to "[7a33037a2d444e2f6981637d3e187cbcca72ba7d](https://github.com/sagemath/sagetrac-mirror/commit/7a33037a2d444e2f6981637d3e187cbcca72ba7d)".



---

archive/issue_comments_161044.json:
```json
{
    "body": "<a id='comment:15'>**Comment 15:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/171be755e22c8f552d2e80506d55304881a907e2\">171be75</a></td><td><code>Merge branch 'master' into t/13580/13580/map_reduce</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bfdf33e488973f4f416f2335a212dee4d3ca3287\">bfdf33e</a></td><td><code>Fixed naming convention</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7a33037a2d444e2f6981637d3e187cbcca72ba7d\">7a33037</a></td><td><code>Work in progress on the DOC</code></td></tr></table>\n",
    "created_at": "2015-11-23T11:06:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161044",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:15'>**Comment 15:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/171be755e22c8f552d2e80506d55304881a907e2">171be75</a></td><td><code>Merge branch 'master' into t/13580/13580/map_reduce</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bfdf33e488973f4f416f2335a212dee4d3ca3287">bfdf33e</a></td><td><code>Fixed naming convention</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7a33037a2d444e2f6981637d3e187cbcca72ba7d">7a33037</a></td><td><code>Work in progress on the DOC</code></td></tr></table>




---

archive/issue_comments_161045.json:
```json
{
    "body": "**Changing commit** from \"[7a33037a2d444e2f6981637d3e187cbcca72ba7d](https://github.com/sagemath/sagetrac-mirror/commit/7a33037a2d444e2f6981637d3e187cbcca72ba7d)\" to \"[168ceae047328c6c529e0ce70d91a4300efabe29](https://github.com/sagemath/sagetrac-mirror/commit/168ceae047328c6c529e0ce70d91a4300efabe29)\".",
    "created_at": "2015-11-26T11:09:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161045",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[7a33037a2d444e2f6981637d3e187cbcca72ba7d](https://github.com/sagemath/sagetrac-mirror/commit/7a33037a2d444e2f6981637d3e187cbcca72ba7d)" to "[168ceae047328c6c529e0ce70d91a4300efabe29](https://github.com/sagemath/sagetrac-mirror/commit/168ceae047328c6c529e0ce70d91a4300efabe29)".



---

archive/issue_comments_161046.json:
```json
{
    "body": "<a id='comment:16'>**Comment 16:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/168ceae047328c6c529e0ce70d91a4300efabe29\">168ceae</a></td><td><code>Added architecture picture for map_reduce</code></td></tr></table>\n",
    "created_at": "2015-11-26T11:09:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161046",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:16'>**Comment 16:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/168ceae047328c6c529e0ce70d91a4300efabe29">168ceae</a></td><td><code>Added architecture picture for map_reduce</code></td></tr></table>




---

archive/issue_comments_161047.json:
```json
{
    "body": "<a id='comment:17'>**Comment 17:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/366fc174904f11f97196c0da38e53d949b236b1f\">366fc17</a></td><td><code>More Doc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6c127527dfcd62673f2d871616a22b95a4b368e9\">6c12752</a></td><td><code>Tested timeout option</code></td></tr></table>\n",
    "created_at": "2015-12-01T08:51:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161047",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:17'>**Comment 17:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/366fc174904f11f97196c0da38e53d949b236b1f">366fc17</a></td><td><code>More Doc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6c127527dfcd62673f2d871616a22b95a4b368e9">6c12752</a></td><td><code>Tested timeout option</code></td></tr></table>




---

archive/issue_comments_161048.json:
```json
{
    "body": "**Changing commit** from \"[168ceae047328c6c529e0ce70d91a4300efabe29](https://github.com/sagemath/sagetrac-mirror/commit/168ceae047328c6c529e0ce70d91a4300efabe29)\" to \"[6c127527dfcd62673f2d871616a22b95a4b368e9](https://github.com/sagemath/sagetrac-mirror/commit/6c127527dfcd62673f2d871616a22b95a4b368e9)\".",
    "created_at": "2015-12-01T08:51:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161048",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[168ceae047328c6c529e0ce70d91a4300efabe29](https://github.com/sagemath/sagetrac-mirror/commit/168ceae047328c6c529e0ce70d91a4300efabe29)" to "[6c127527dfcd62673f2d871616a22b95a4b368e9](https://github.com/sagemath/sagetrac-mirror/commit/6c127527dfcd62673f2d871616a22b95a4b368e9)".



---

archive/issue_comments_161049.json:
```json
{
    "body": "<a id='comment:18'>**Comment 18:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/493bb52f98bb2551eb557528fbfc2d6a908bd38d\">493bb52</a></td><td><code>Done the doc of Map/Reduce</code></td></tr></table>\n",
    "created_at": "2015-12-14T13:02:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161049",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:18'>**Comment 18:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/493bb52f98bb2551eb557528fbfc2d6a908bd38d">493bb52</a></td><td><code>Done the doc of Map/Reduce</code></td></tr></table>




---

archive/issue_comments_161050.json:
```json
{
    "body": "**Changing commit** from \"[6c127527dfcd62673f2d871616a22b95a4b368e9](https://github.com/sagemath/sagetrac-mirror/commit/6c127527dfcd62673f2d871616a22b95a4b368e9)\" to \"[493bb52f98bb2551eb557528fbfc2d6a908bd38d](https://github.com/sagemath/sagetrac-mirror/commit/493bb52f98bb2551eb557528fbfc2d6a908bd38d)\".",
    "created_at": "2015-12-14T13:02:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161050",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[6c127527dfcd62673f2d871616a22b95a4b368e9](https://github.com/sagemath/sagetrac-mirror/commit/6c127527dfcd62673f2d871616a22b95a4b368e9)" to "[493bb52f98bb2551eb557528fbfc2d6a908bd38d](https://github.com/sagemath/sagetrac-mirror/commit/493bb52f98bb2551eb557528fbfc2d6a908bd38d)".



---

archive/issue_comments_161051.json:
```json
{
    "body": "<a id='comment:19'>**Comment 19:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2534f12eaf4a820c6e9a76894aabf19775b8ba05\">2534f12</a></td><td><code>Moved map/reduce to sage/parallel</code></td></tr></table>\n",
    "created_at": "2015-12-14T13:57:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161051",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:19'>**Comment 19:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2534f12eaf4a820c6e9a76894aabf19775b8ba05">2534f12</a></td><td><code>Moved map/reduce to sage/parallel</code></td></tr></table>




---

archive/issue_comments_161052.json:
```json
{
    "body": "**Changing commit** from \"[493bb52f98bb2551eb557528fbfc2d6a908bd38d](https://github.com/sagemath/sagetrac-mirror/commit/493bb52f98bb2551eb557528fbfc2d6a908bd38d)\" to \"[2534f12eaf4a820c6e9a76894aabf19775b8ba05](https://github.com/sagemath/sagetrac-mirror/commit/2534f12eaf4a820c6e9a76894aabf19775b8ba05)\".",
    "created_at": "2015-12-14T13:57:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161052",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[493bb52f98bb2551eb557528fbfc2d6a908bd38d](https://github.com/sagemath/sagetrac-mirror/commit/493bb52f98bb2551eb557528fbfc2d6a908bd38d)" to "[2534f12eaf4a820c6e9a76894aabf19775b8ba05](https://github.com/sagemath/sagetrac-mirror/commit/2534f12eaf4a820c6e9a76894aabf19775b8ba05)".



---

archive/issue_comments_161053.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,2 +1,2 @@\n-Implement a map reduce algorithm in parallel on large sets described by a `SearchForest`.\n+Implement a map reduce algorithm in parallel on large sets described by a `SearchForest`. We use a work-stealing algorithm (see https://en.wikipedia.org/wiki/Work_stealing) based on Python's multiprocessing. \n \n``````\n",
    "created_at": "2015-12-14T14:07:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161053",
    "user": "https://github.com/hivert"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,2 +1,2 @@
-Implement a map reduce algorithm in parallel on large sets described by a `SearchForest`.
+Implement a map reduce algorithm in parallel on large sets described by a `SearchForest`. We use a work-stealing algorithm (see https://en.wikipedia.org/wiki/Work_stealing) based on Python's multiprocessing. 
 
``````




---

archive/issue_events_160711.json:
```json
{
    "actor": "https://github.com/hivert",
    "created_at": "2015-12-14T14:07:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13580#event-160711"
}
```



---

archive/issue_comments_161054.json:
```json
{
    "body": "<a id='comment:21'>**Comment 21:**</a>\nThe branch currently have conflicts with development version of Sage (because the link is red in the description of the ticket above). The branch seems to be based on 6.2.beta6 which is old and may explain the presence of a conflict.",
    "created_at": "2015-12-14T16:49:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161054",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:21'>**Comment 21:**</a>
The branch currently have conflicts with development version of Sage (because the link is red in the description of the ticket above). The branch seems to be based on 6.2.beta6 which is old and may explain the presence of a conflict.



---

archive/issue_events_160712.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-12-14T16:49:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13580#event-160712"
}
```



---

archive/issue_events_160713.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-12-14T16:49:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13580#event-160713"
}
```



---

archive/issue_comments_161055.json:
```json
{
    "body": "<a id='comment:22'>**Comment 22:**</a>\nReplying to [@seblabbe](#comment%3A21):\n> The branch currently have conflicts with development version of Sage (because the link is red in the description of the ticket above). The branch seems to be based on 6.2.beta6 which is old and may explain the presence of a conflict.\n\nYes ! there is a trivial conflict. Thank you for pointing it. I'm fixing it, testing and re-uploading.",
    "created_at": "2015-12-14T19:38:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161055",
    "user": "https://github.com/hivert"
}
```

<a id='comment:22'>**Comment 22:**</a>
Replying to [@seblabbe](#comment%3A21):
> The branch currently have conflicts with development version of Sage (because the link is red in the description of the ticket above). The branch seems to be based on 6.2.beta6 which is old and may explain the presence of a conflict.

Yes ! there is a trivial conflict. Thank you for pointing it. I'm fixing it, testing and re-uploading.



---

archive/issue_comments_161056.json:
```json
{
    "body": "**Changing commit** from \"[2534f12eaf4a820c6e9a76894aabf19775b8ba05](https://github.com/sagemath/sagetrac-mirror/commit/2534f12eaf4a820c6e9a76894aabf19775b8ba05)\" to \"[e5b74770eec0b0e93e22a70358bc83f16893ce2a](https://github.com/sagemath/sagetrac-mirror/commit/e5b74770eec0b0e93e22a70358bc83f16893ce2a)\".",
    "created_at": "2015-12-14T20:29:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161056",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[2534f12eaf4a820c6e9a76894aabf19775b8ba05](https://github.com/sagemath/sagetrac-mirror/commit/2534f12eaf4a820c6e9a76894aabf19775b8ba05)" to "[e5b74770eec0b0e93e22a70358bc83f16893ce2a](https://github.com/sagemath/sagetrac-mirror/commit/e5b74770eec0b0e93e22a70358bc83f16893ce2a)".



---

archive/issue_comments_161057.json:
```json
{
    "body": "<a id='comment:23'>**Comment 23:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e5b74770eec0b0e93e22a70358bc83f16893ce2a\">e5b7477</a></td><td><code>Merge 6.10.rc1 + fixed conflict</code></td></tr></table>\n",
    "created_at": "2015-12-14T20:29:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161057",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:23'>**Comment 23:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e5b74770eec0b0e93e22a70358bc83f16893ce2a">e5b7477</a></td><td><code>Merge 6.10.rc1 + fixed conflict</code></td></tr></table>




---

archive/issue_comments_161058.json:
```json
{
    "body": "**Changing commit** from \"[e5b74770eec0b0e93e22a70358bc83f16893ce2a](https://github.com/sagemath/sagetrac-mirror/commit/e5b74770eec0b0e93e22a70358bc83f16893ce2a)\" to \"[82fd1e47599b75ef22133d18199ed1ee15478f5d](https://github.com/sagemath/sagetrac-mirror/commit/82fd1e47599b75ef22133d18199ed1ee15478f5d)\".",
    "created_at": "2015-12-14T20:53:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161058",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[e5b74770eec0b0e93e22a70358bc83f16893ce2a](https://github.com/sagemath/sagetrac-mirror/commit/e5b74770eec0b0e93e22a70358bc83f16893ce2a)" to "[82fd1e47599b75ef22133d18199ed1ee15478f5d](https://github.com/sagemath/sagetrac-mirror/commit/82fd1e47599b75ef22133d18199ed1ee15478f5d)".



---

archive/issue_comments_161059.json:
```json
{
    "body": "<a id='comment:24'>**Comment 24:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/82fd1e47599b75ef22133d18199ed1ee15478f5d\">82fd1e4</a></td><td><code>Fixed links according to deprecation/rebase</code></td></tr></table>\n",
    "created_at": "2015-12-14T20:53:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161059",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:24'>**Comment 24:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/82fd1e47599b75ef22133d18199ed1ee15478f5d">82fd1e4</a></td><td><code>Fixed links according to deprecation/rebase</code></td></tr></table>




---

archive/issue_comments_161060.json:
```json
{
    "body": "<a id='comment:25'>**Comment 25:**</a>\nReplying to [@hivert](#comment%3A22):\n> Replying to [@seblabbe](#comment%3A21):\n> > The branch currently have conflicts with development version of Sage (because the link is red in the description of the ticket above). The branch seems to be based on 6.2.beta6 which is old and may explain the presence of a conflict.\n\n> \n> Yes ! there is a trivial conflict. Thank you for pointing it. I'm fixing it, testing and re-uploading.\n\nDone ! I was actually based on 6.9.",
    "created_at": "2015-12-14T20:56:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161060",
    "user": "https://github.com/hivert"
}
```

<a id='comment:25'>**Comment 25:**</a>
Replying to [@hivert](#comment%3A22):
> Replying to [@seblabbe](#comment%3A21):
> > The branch currently have conflicts with development version of Sage (because the link is red in the description of the ticket above). The branch seems to be based on 6.2.beta6 which is old and may explain the presence of a conflict.

> 
> Yes ! there is a trivial conflict. Thank you for pointing it. I'm fixing it, testing and re-uploading.

Done ! I was actually based on 6.9.



---

archive/issue_events_160714.json:
```json
{
    "actor": "https://github.com/hivert",
    "created_at": "2015-12-14T20:56:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13580#event-160714"
}
```



---

archive/issue_events_160715.json:
```json
{
    "actor": "https://github.com/hivert",
    "created_at": "2015-12-14T20:56:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13580#event-160715"
}
```



---

archive/issue_comments_161061.json:
```json
{
    "body": "**Changing commit** from \"[82fd1e47599b75ef22133d18199ed1ee15478f5d](https://github.com/sagemath/sagetrac-mirror/commit/82fd1e47599b75ef22133d18199ed1ee15478f5d)\" to \"[68b6530ecc825e773bdd34b09a98b21eb4d8987c](https://github.com/sagemath/sagetrac-mirror/commit/68b6530ecc825e773bdd34b09a98b21eb4d8987c)\".",
    "created_at": "2015-12-14T21:32:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161061",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[82fd1e47599b75ef22133d18199ed1ee15478f5d](https://github.com/sagemath/sagetrac-mirror/commit/82fd1e47599b75ef22133d18199ed1ee15478f5d)" to "[68b6530ecc825e773bdd34b09a98b21eb4d8987c](https://github.com/sagemath/sagetrac-mirror/commit/68b6530ecc825e773bdd34b09a98b21eb4d8987c)".



---

archive/issue_comments_161062.json:
```json
{
    "body": "<a id='comment:26'>**Comment 26:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/68b6530ecc825e773bdd34b09a98b21eb4d8987c\">68b6530</a></td><td><code>Removed TODO in doc</code></td></tr></table>\n",
    "created_at": "2015-12-14T21:32:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161062",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:26'>**Comment 26:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/68b6530ecc825e773bdd34b09a98b21eb4d8987c">68b6530</a></td><td><code>Removed TODO in doc</code></td></tr></table>




---

archive/issue_events_160716.json:
```json
{
    "actor": "https://github.com/hivert",
    "created_at": "2015-12-14T21:39:41Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "rename": {
        "from": "Parellel map reduce on SearchForest",
        "to": "Parallel map reduce on SearchForest"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13580#event-160716"
}
```



---

archive/issue_comments_161063.json:
```json
{
    "body": "<a id='comment:28'>**Comment 28:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b93ba7da6f57a9fd6f02469819f4d3ce0c2f289b\">b93ba7d</a></td><td><code>Fixed a link + doctest</code></td></tr></table>\n",
    "created_at": "2015-12-14T22:18:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161063",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:28'>**Comment 28:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b93ba7da6f57a9fd6f02469819f4d3ce0c2f289b">b93ba7d</a></td><td><code>Fixed a link + doctest</code></td></tr></table>




---

archive/issue_comments_161064.json:
```json
{
    "body": "**Changing commit** from \"[68b6530ecc825e773bdd34b09a98b21eb4d8987c](https://github.com/sagemath/sagetrac-mirror/commit/68b6530ecc825e773bdd34b09a98b21eb4d8987c)\" to \"[b93ba7da6f57a9fd6f02469819f4d3ce0c2f289b](https://github.com/sagemath/sagetrac-mirror/commit/b93ba7da6f57a9fd6f02469819f4d3ce0c2f289b)\".",
    "created_at": "2015-12-14T22:18:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161064",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[68b6530ecc825e773bdd34b09a98b21eb4d8987c](https://github.com/sagemath/sagetrac-mirror/commit/68b6530ecc825e773bdd34b09a98b21eb4d8987c)" to "[b93ba7da6f57a9fd6f02469819f4d3ce0c2f289b](https://github.com/sagemath/sagetrac-mirror/commit/b93ba7da6f57a9fd6f02469819f4d3ce0c2f289b)".



---

archive/issue_comments_161065.json:
```json
{
    "body": "**Changing commit** from \"[b93ba7da6f57a9fd6f02469819f4d3ce0c2f289b](https://github.com/sagemath/sagetrac-mirror/commit/b93ba7da6f57a9fd6f02469819f4d3ce0c2f289b)\" to \"[5c7720dae1034f1b2e04bb9abb3ea90797de55ee](https://github.com/sagemath/sagetrac-mirror/commit/5c7720dae1034f1b2e04bb9abb3ea90797de55ee)\".",
    "created_at": "2015-12-15T07:19:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161065",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[b93ba7da6f57a9fd6f02469819f4d3ce0c2f289b](https://github.com/sagemath/sagetrac-mirror/commit/b93ba7da6f57a9fd6f02469819f4d3ce0c2f289b)" to "[5c7720dae1034f1b2e04bb9abb3ea90797de55ee](https://github.com/sagemath/sagetrac-mirror/commit/5c7720dae1034f1b2e04bb9abb3ea90797de55ee)".



---

archive/issue_comments_161066.json:
```json
{
    "body": "<a id='comment:29'>**Comment 29:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5c7720dae1034f1b2e04bb9abb3ea90797de55ee\">5c7720d</a></td><td><code>Fixed doctest continuations and raise statements</code></td></tr></table>\n",
    "created_at": "2015-12-15T07:19:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161066",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:29'>**Comment 29:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5c7720dae1034f1b2e04bb9abb3ea90797de55ee">5c7720d</a></td><td><code>Fixed doctest continuations and raise statements</code></td></tr></table>




---

archive/issue_comments_161067.json:
```json
{
    "body": "<a id='comment:30'>**Comment 30:**</a>\nReplying to [git](#comment%3A29):\n|                                                                                                                                                 |                                                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|\n|[5c7720d](https://github.com/sagemath/sagetrac-mirror/commit/5c7720dae1034f1b2e04bb9abb3ea90797de55ee)|`Fixed doctest continuations and raise statements`|\n\nPatchbot was complaining about old style multiline doctests and exception raises. Fixed and reuped. Should be Ok now.",
    "created_at": "2015-12-15T07:20:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161067",
    "user": "https://github.com/hivert"
}
```

<a id='comment:30'>**Comment 30:**</a>
Replying to [git](#comment%3A29):
|                                                                                                                                                 |                                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|
|[5c7720d](https://github.com/sagemath/sagetrac-mirror/commit/5c7720dae1034f1b2e04bb9abb3ea90797de55ee)|`Fixed doctest continuations and raise statements`|

Patchbot was complaining about old style multiline doctests and exception raises. Fixed and reuped. Should be Ok now.



---

archive/issue_comments_161068.json:
```json
{
    "body": "<a id='comment:31'>**Comment 31:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cb9c011d0b7f2f3a736f7418c51d49ccc8c5b715\">cb9c011</a></td><td><code>Fixed another multiline doctest</code></td></tr></table>\n",
    "created_at": "2015-12-15T16:03:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161068",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:31'>**Comment 31:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cb9c011d0b7f2f3a736f7418c51d49ccc8c5b715">cb9c011</a></td><td><code>Fixed another multiline doctest</code></td></tr></table>




---

archive/issue_comments_161069.json:
```json
{
    "body": "**Changing commit** from \"[5c7720dae1034f1b2e04bb9abb3ea90797de55ee](https://github.com/sagemath/sagetrac-mirror/commit/5c7720dae1034f1b2e04bb9abb3ea90797de55ee)\" to \"[cb9c011d0b7f2f3a736f7418c51d49ccc8c5b715](https://github.com/sagemath/sagetrac-mirror/commit/cb9c011d0b7f2f3a736f7418c51d49ccc8c5b715)\".",
    "created_at": "2015-12-15T16:03:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161069",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[5c7720dae1034f1b2e04bb9abb3ea90797de55ee](https://github.com/sagemath/sagetrac-mirror/commit/5c7720dae1034f1b2e04bb9abb3ea90797de55ee)" to "[cb9c011d0b7f2f3a736f7418c51d49ccc8c5b715](https://github.com/sagemath/sagetrac-mirror/commit/cb9c011d0b7f2f3a736f7418c51d49ccc8c5b715)".



---

archive/issue_comments_161070.json:
```json
{
    "body": "<a id='comment:32'>**Comment 32:**</a>\nI just looked at the code in the browser. Looks good. I will do real code review later this week hopefully. Quickly, I saw two typos:\n\nFirst line of `/src/sage/parallel/map_reduce.py` : `Paralell`\n\nLater in the same file I think: `parameters tu the`",
    "created_at": "2015-12-15T20:14:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161070",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:32'>**Comment 32:**</a>
I just looked at the code in the browser. Looks good. I will do real code review later this week hopefully. Quickly, I saw two typos:

First line of `/src/sage/parallel/map_reduce.py` : `Paralell`

Later in the same file I think: `parameters tu the`



---

archive/issue_comments_161071.json:
```json
{
    "body": "**Changing commit** from \"[cb9c011d0b7f2f3a736f7418c51d49ccc8c5b715](https://github.com/sagemath/sagetrac-mirror/commit/cb9c011d0b7f2f3a736f7418c51d49ccc8c5b715)\" to \"[14b086beac66e6a3fe3bf6be2cd7ae0e28c20152](https://github.com/sagemath/sagetrac-mirror/commit/14b086beac66e6a3fe3bf6be2cd7ae0e28c20152)\".",
    "created_at": "2015-12-15T21:10:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161071",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[cb9c011d0b7f2f3a736f7418c51d49ccc8c5b715](https://github.com/sagemath/sagetrac-mirror/commit/cb9c011d0b7f2f3a736f7418c51d49ccc8c5b715)" to "[14b086beac66e6a3fe3bf6be2cd7ae0e28c20152](https://github.com/sagemath/sagetrac-mirror/commit/14b086beac66e6a3fe3bf6be2cd7ae0e28c20152)".



---

archive/issue_comments_161072.json:
```json
{
    "body": "<a id='comment:33'>**Comment 33:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/14b086beac66e6a3fe3bf6be2cd7ae0e28c20152\">14b086b</a></td><td><code>Fixed Sebastien's Typos</code></td></tr></table>\n",
    "created_at": "2015-12-15T21:10:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161072",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:33'>**Comment 33:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/14b086beac66e6a3fe3bf6be2cd7ae0e28c20152">14b086b</a></td><td><code>Fixed Sebastien's Typos</code></td></tr></table>




---

archive/issue_comments_161073.json:
```json
{
    "body": "<a id='comment:34'>**Comment 34:**</a>\nReplying to [@seblabbe](#comment%3A32):\n> I just looked at the code in the browser. Looks good. I will do real code review later this week hopefully. Quickly, I saw two typos:\n\nFixed ! I'm afraid you'll find more ! By the way, removed distributed from the title since I don't do distributed computation anymore. I had a prototype which allowed to launch those computation on a cluster of machines, but it induces a huge performance loss do I dropped It. maybe we will work on this with Jeroen...",
    "created_at": "2015-12-15T21:14:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161073",
    "user": "https://github.com/hivert"
}
```

<a id='comment:34'>**Comment 34:**</a>
Replying to [@seblabbe](#comment%3A32):
> I just looked at the code in the browser. Looks good. I will do real code review later this week hopefully. Quickly, I saw two typos:

Fixed ! I'm afraid you'll find more ! By the way, removed distributed from the title since I don't do distributed computation anymore. I had a prototype which allowed to launch those computation on a cluster of machines, but it induces a huge performance loss do I dropped It. maybe we will work on this with Jeroen...



---

archive/issue_comments_161074.json:
```json
{
    "body": "<a id='comment:35'>**Comment 35:**</a>\nDear Florent, I know that you like multiline doctests, but for two reasons I prefer to avoid them as much as possible in doctests:\n\n1. It is not fun for the user who wants to adapt an example after a copy paste in the console. The up arrow brings the multiline all at once and it is not fun to change the value 10 to a value 25 let say.\n2. Using variables to store the input before calling the method gives lot of information easily to the user: what are the argument names, in what order should they be used.\n\nI know I am asking you to change your style by asking you this, but don't you agree with me or can you provide some counter-arguments to mine? I give an example below:\n\n```diff\ndiff --git a/src/sage/combinat/backtrack.py b/src/sage/combinat/backtrack.py\nindex 9dee057..ac1243a 100644\n--- a/src/sage/combinat/backtrack.py\n+++ b/src/sage/combinat/backtrack.py\n@@ -695,17 +695,19 @@ class SearchForest(Parent):\n                    reduce_function = None,\n                    reduce_init = None):\n         r\"\"\"\n-        Apply en Map Reduce algorithm on ``self``\n+        Apply a Map Reduce algorithm on ``self``\n \n         EXAMPLES::\n \n-            sage: F = RecursivelyEnumeratedSet( [([i],i, i) for i in range(1,10)],\n-            ....:     lambda (list, sum, last):\n-            ....:         [(list + [i], sum + i, i) for i in range(1,last)],\n-            ....:     structure='forest', enumeration='depth')\n+            sage: seeds = [([i],i, i) for i in range(1,10)]\n+            sage: succ = lambda (list, sum, last): \n+            ....:               [(list + [i], sum + i, i) for i in range(1,last)]\n+            sage: F = RecursivelyEnumeratedSet(seeds, succ, \n+            ....:                       structure='forest', enumeration='depth')\n             sage: y = var('y')\n-            sage: F.map_reduce(\n-            ....:     lambda (li, sum, _): y**sum, lambda x,y: x + y,  0 )\n+            sage: map_function = lambda (li, sum, _): y**sum\n+            sage: reduce_function = lambda x,y: x + y\n+            sage: F.map_reduce(map_function, reduce_function, 0)\n             y^45 + y^44 + y^43 + 2*y^42 + 2*y^41 + 3*y^40 + 4*y^39 + 5*y^38 + 6*y^37 + 8*y^36 + 9*y^35 \n \n         .. SEEALSO:: :mod:`sage.parallel.map_reduce`\n```\n\nI noticed another typo on the same line as the one `parameters tu the` : `On` -> `One`",
    "created_at": "2015-12-16T11:34:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161074",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:35'>**Comment 35:**</a>
Dear Florent, I know that you like multiline doctests, but for two reasons I prefer to avoid them as much as possible in doctests:

1. It is not fun for the user who wants to adapt an example after a copy paste in the console. The up arrow brings the multiline all at once and it is not fun to change the value 10 to a value 25 let say.
2. Using variables to store the input before calling the method gives lot of information easily to the user: what are the argument names, in what order should they be used.

I know I am asking you to change your style by asking you this, but don't you agree with me or can you provide some counter-arguments to mine? I give an example below:

```diff
diff --git a/src/sage/combinat/backtrack.py b/src/sage/combinat/backtrack.py
index 9dee057..ac1243a 100644
--- a/src/sage/combinat/backtrack.py
+++ b/src/sage/combinat/backtrack.py
@@ -695,17 +695,19 @@ class SearchForest(Parent):
                    reduce_function = None,
                    reduce_init = None):
         r"""
-        Apply en Map Reduce algorithm on ``self``
+        Apply a Map Reduce algorithm on ``self``
 
         EXAMPLES::
 
-            sage: F = RecursivelyEnumeratedSet( [([i],i, i) for i in range(1,10)],
-            ....:     lambda (list, sum, last):
-            ....:         [(list + [i], sum + i, i) for i in range(1,last)],
-            ....:     structure='forest', enumeration='depth')
+            sage: seeds = [([i],i, i) for i in range(1,10)]
+            sage: succ = lambda (list, sum, last): 
+            ....:               [(list + [i], sum + i, i) for i in range(1,last)]
+            sage: F = RecursivelyEnumeratedSet(seeds, succ, 
+            ....:                       structure='forest', enumeration='depth')
             sage: y = var('y')
-            sage: F.map_reduce(
-            ....:     lambda (li, sum, _): y**sum, lambda x,y: x + y,  0 )
+            sage: map_function = lambda (li, sum, _): y**sum
+            sage: reduce_function = lambda x,y: x + y
+            sage: F.map_reduce(map_function, reduce_function, 0)
             y^45 + y^44 + y^43 + 2*y^42 + 2*y^41 + 3*y^40 + 4*y^39 + 5*y^38 + 6*y^37 + 8*y^36 + 9*y^35 
 
         .. SEEALSO:: :mod:`sage.parallel.map_reduce`
```

I noticed another typo on the same line as the one `parameters tu the` : `On` -> `One`



---

archive/issue_comments_161075.json:
```json
{
    "body": "<a id='comment:36'>**Comment 36:**</a>\nReplying to [@seblabbe](#comment%3A35):\n> Dear Florent, I know that you like multiline doctests, but for two reasons I prefer to avoid them as much as possible in doctests:\n> \n> 1. It is not fun for the user who wants to adapt an example after a copy paste in the console. The up arrow brings the multiline all at once and it is not fun to change the value 10 to a value 25 let say.\n\nI'm tempted to answer that I don't have this problem with emacs ;-). Of course, for the people using a two letters editor...\n\n> 2. Using variables to store the input before calling the method gives lot of information easily to the user: what are the argument names, in what order should they be used.\n\nI'm much more convinced by this argument. I'm watching an exam tomorrow evening. I'll change my code accordingly.",
    "created_at": "2015-12-16T23:27:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161075",
    "user": "https://github.com/hivert"
}
```

<a id='comment:36'>**Comment 36:**</a>
Replying to [@seblabbe](#comment%3A35):
> Dear Florent, I know that you like multiline doctests, but for two reasons I prefer to avoid them as much as possible in doctests:
> 
> 1. It is not fun for the user who wants to adapt an example after a copy paste in the console. The up arrow brings the multiline all at once and it is not fun to change the value 10 to a value 25 let say.

I'm tempted to answer that I don't have this problem with emacs ;-). Of course, for the people using a two letters editor...

> 2. Using variables to store the input before calling the method gives lot of information easily to the user: what are the argument names, in what order should they be used.

I'm much more convinced by this argument. I'm watching an exam tomorrow evening. I'll change my code accordingly.



---

archive/issue_comments_161076.json:
```json
{
    "body": "<a id='comment:37'>**Comment 37:**</a>\nReplying to [@hivert](#comment%3A36):\n> I'm much more convinced by this argument. I'm watching an exam tomorrow evening. I'll change my code accordingly.\n\nActually, I'm not that much convinced. It's not clear for me that\n\n```\n      sage: map_function = lambda x: 1\n      sage: reduce_function = lambda x,y: x+y\n      sage: reduce_init = 0\n      sage: S.map_reduce(map_function, reduce_function, reduce_init)\n      131071\n```\nis much better than\n\n```\n      sage: S.map_reduce(\n      ....:   map_function = lambda x: 1,\n      ....:   reduce_function = lambda x,y: x+y,\n      ....:   reduce_init = 0 )\n```\nIn this second version which is the style I adopted in `map_reduce.py`, we don't repeat the name twice, which is better in my opinion.\n\nA third possibility is\n\n```\n      sage: S.map_reduce(lambda x: 1, lambda x,y: x+y, 0)\n```\nIt is the one used through the whole `backtrack.py` files. Unless for very short example, I don't find it very readable. But since it's not adding new code but changing old one, which needs even more cleanup and doc improvement, I'd rather keep it for another ticket. More precisly, I'd rather do that during #16351.\n\nWhat do you think ?",
    "created_at": "2015-12-17T13:51:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161076",
    "user": "https://github.com/hivert"
}
```

<a id='comment:37'>**Comment 37:**</a>
Replying to [@hivert](#comment%3A36):
> I'm much more convinced by this argument. I'm watching an exam tomorrow evening. I'll change my code accordingly.

Actually, I'm not that much convinced. It's not clear for me that

```
      sage: map_function = lambda x: 1
      sage: reduce_function = lambda x,y: x+y
      sage: reduce_init = 0
      sage: S.map_reduce(map_function, reduce_function, reduce_init)
      131071
```
is much better than

```
      sage: S.map_reduce(
      ....:   map_function = lambda x: 1,
      ....:   reduce_function = lambda x,y: x+y,
      ....:   reduce_init = 0 )
```
In this second version which is the style I adopted in `map_reduce.py`, we don't repeat the name twice, which is better in my opinion.

A third possibility is

```
      sage: S.map_reduce(lambda x: 1, lambda x,y: x+y, 0)
```
It is the one used through the whole `backtrack.py` files. Unless for very short example, I don't find it very readable. But since it's not adding new code but changing old one, which needs even more cleanup and doc improvement, I'd rather keep it for another ticket. More precisly, I'd rather do that during #16351.

What do you think ?



---

archive/issue_comments_161077.json:
```json
{
    "body": "<a id='comment:38'>**Comment 38:**</a>\nI'm not sure to understand the patchbot complaint ? Is it because the `map_reduce` is not imported as Sage's startup ?",
    "created_at": "2015-12-17T13:53:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161077",
    "user": "https://github.com/hivert"
}
```

<a id='comment:38'>**Comment 38:**</a>
I'm not sure to understand the patchbot complaint ? Is it because the `map_reduce` is not imported as Sage's startup ?



---

archive/issue_comments_161078.json:
```json
{
    "body": "<a id='comment:39'>**Comment 39:**</a>\nI just uploaded a doc improvement: the `map_reduce` function was missing the description of the input.",
    "created_at": "2015-12-17T14:02:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161078",
    "user": "https://github.com/hivert"
}
```

<a id='comment:39'>**Comment 39:**</a>
I just uploaded a doc improvement: the `map_reduce` function was missing the description of the input.



---

archive/issue_comments_161079.json:
```json
{
    "body": "<a id='comment:40'>**Comment 40:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e3c4c716b4dbd9650f06de80e6477bb4e9d36a1c\">e3c4c71</a></td><td><code>Doc improvements</code></td></tr></table>\n",
    "created_at": "2015-12-17T14:02:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161079",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:40'>**Comment 40:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e3c4c716b4dbd9650f06de80e6477bb4e9d36a1c">e3c4c71</a></td><td><code>Doc improvements</code></td></tr></table>




---

archive/issue_comments_161080.json:
```json
{
    "body": "**Changing commit** from \"[14b086beac66e6a3fe3bf6be2cd7ae0e28c20152](https://github.com/sagemath/sagetrac-mirror/commit/14b086beac66e6a3fe3bf6be2cd7ae0e28c20152)\" to \"[e3c4c716b4dbd9650f06de80e6477bb4e9d36a1c](https://github.com/sagemath/sagetrac-mirror/commit/e3c4c716b4dbd9650f06de80e6477bb4e9d36a1c)\".",
    "created_at": "2015-12-17T14:02:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161080",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[14b086beac66e6a3fe3bf6be2cd7ae0e28c20152](https://github.com/sagemath/sagetrac-mirror/commit/14b086beac66e6a3fe3bf6be2cd7ae0e28c20152)" to "[e3c4c716b4dbd9650f06de80e6477bb4e9d36a1c](https://github.com/sagemath/sagetrac-mirror/commit/e3c4c716b4dbd9650f06de80e6477bb4e9d36a1c)".



---

archive/issue_comments_161081.json:
```json
{
    "body": "**Changing commit** from \"[e3c4c716b4dbd9650f06de80e6477bb4e9d36a1c](https://github.com/sagemath/sagetrac-mirror/commit/e3c4c716b4dbd9650f06de80e6477bb4e9d36a1c)\" to \"[31c4735651aa4f56c7e6899e6352669fa2b21d99](https://github.com/sagemath/sagetrac-mirror/commit/31c4735651aa4f56c7e6899e6352669fa2b21d99)\".",
    "created_at": "2015-12-17T18:13:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161081",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[e3c4c716b4dbd9650f06de80e6477bb4e9d36a1c](https://github.com/sagemath/sagetrac-mirror/commit/e3c4c716b4dbd9650f06de80e6477bb4e9d36a1c)" to "[31c4735651aa4f56c7e6899e6352669fa2b21d99](https://github.com/sagemath/sagetrac-mirror/commit/31c4735651aa4f56c7e6899e6352669fa2b21d99)".



---

archive/issue_comments_161082.json:
```json
{
    "body": "<a id='comment:41'>**Comment 41:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/31c4735651aa4f56c7e6899e6352669fa2b21d99\">31c4735</a></td><td><code>Removed unneded import in pxd</code></td></tr></table>\n",
    "created_at": "2015-12-17T18:13:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161082",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:41'>**Comment 41:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/31c4735651aa4f56c7e6899e6352669fa2b21d99">31c4735</a></td><td><code>Removed unneded import in pxd</code></td></tr></table>




---

archive/issue_comments_161083.json:
```json
{
    "body": "<a id='comment:42'>**Comment 42:**</a>\nReplying to [@hivert](#comment%3A37):\n> What do you think ?\n\nI think that some doctest are more important than other, especially the first doctests that people might be expected to see when using the map reduce code. For example the `map_reduce` method in the recursively enumerated set file is one possible entry point where clarity of doctests matters more. Therefore, I like the way you change the doctest. Definitively, the top of the module is an important entry point. For other sub methods of the class map reduce, I care less...",
    "created_at": "2015-12-18T14:23:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161083",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:42'>**Comment 42:**</a>
Replying to [@hivert](#comment%3A37):
> What do you think ?

I think that some doctest are more important than other, especially the first doctests that people might be expected to see when using the map reduce code. For example the `map_reduce` method in the recursively enumerated set file is one possible entry point where clarity of doctests matters more. Therefore, I like the way you change the doctest. Definitively, the top of the module is an important entry point. For other sub methods of the class map reduce, I care less...



---

archive/issue_comments_161084.json:
```json
{
    "body": "<a id='comment:43'>**Comment 43:**</a>\nReplying to [@hivert](#comment%3A38):\n> I'm not sure to understand the patchbot complaint ? Is it because the `map_reduce` is not imported as Sage's startup ?  \n\nI don't see why neither...",
    "created_at": "2015-12-18T14:23:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161084",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:43'>**Comment 43:**</a>
Replying to [@hivert](#comment%3A38):
> I'm not sure to understand the patchbot complaint ? Is it because the `map_reduce` is not imported as Sage's startup ?  

I don't see why neither...



---

archive/issue_comments_161085.json:
```json
{
    "body": "<a id='comment:44'>**Comment 44:**</a>\n`Event`, `Condition`, `time` and `os` are imported in map_reduce file but are not used.",
    "created_at": "2015-12-18T16:17:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161085",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:44'>**Comment 44:**</a>
`Event`, `Condition`, `time` and `os` are imported in map_reduce file but are not used.



---

archive/issue_comments_161086.json:
```json
{
    "body": "<a id='comment:45'>**Comment 45:**</a>\nIs there a reason why you use `res=[\"\"]` and `res[0]` in `print_communication_statistics` instead of `res=\"\"` and `res`?",
    "created_at": "2015-12-18T16:20:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161086",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:45'>**Comment 45:**</a>
Is there a reason why you use `res=[""]` and `res[0]` in `print_communication_statistics` instead of `res=""` and `res`?



---

archive/issue_comments_161087.json:
```json
{
    "body": "<a id='comment:46'>**Comment 46:**</a>\nReplying to [@seblabbe](#comment%3A45):\n> Is there a reason why you use `res=[\"\"]` and `res[0]` in `print_communication_statistics` instead of `res=\"\"` and `res`?\n\nYes ! This is the classical trick to have a local variable shared with the local function (see e.g: http://stackoverflow.com/questions/2609518/python-nested-function-scopes).",
    "created_at": "2015-12-18T17:32:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161087",
    "user": "https://github.com/hivert"
}
```

<a id='comment:46'>**Comment 46:**</a>
Replying to [@seblabbe](#comment%3A45):
> Is there a reason why you use `res=[""]` and `res[0]` in `print_communication_statistics` instead of `res=""` and `res`?

Yes ! This is the classical trick to have a local variable shared with the local function (see e.g: http://stackoverflow.com/questions/2609518/python-nested-function-scopes).



---

archive/issue_comments_161088.json:
```json
{
    "body": "<a id='comment:47'>**Comment 47:**</a>\nReplying to [@seblabbe](#comment%3A44):\n> `Event`, `Condition`, `time` and `os` are imported in map_reduce file but are not used.\n\nFixed in my last push.",
    "created_at": "2015-12-18T17:49:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161088",
    "user": "https://github.com/hivert"
}
```

<a id='comment:47'>**Comment 47:**</a>
Replying to [@seblabbe](#comment%3A44):
> `Event`, `Condition`, `time` and `os` are imported in map_reduce file but are not used.

Fixed in my last push.



---

archive/issue_comments_161089.json:
```json
{
    "body": "**Changing commit** from \"[31c4735651aa4f56c7e6899e6352669fa2b21d99](https://github.com/sagemath/sagetrac-mirror/commit/31c4735651aa4f56c7e6899e6352669fa2b21d99)\" to \"[cca788124c7eb757cceda7cb7a73f9af28149a1e](https://github.com/sagemath/sagetrac-mirror/commit/cca788124c7eb757cceda7cb7a73f9af28149a1e)\".",
    "created_at": "2015-12-18T17:49:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161089",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[31c4735651aa4f56c7e6899e6352669fa2b21d99](https://github.com/sagemath/sagetrac-mirror/commit/31c4735651aa4f56c7e6899e6352669fa2b21d99)" to "[cca788124c7eb757cceda7cb7a73f9af28149a1e](https://github.com/sagemath/sagetrac-mirror/commit/cca788124c7eb757cceda7cb7a73f9af28149a1e)".



---

archive/issue_comments_161090.json:
```json
{
    "body": "<a id='comment:48'>**Comment 48:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cca788124c7eb757cceda7cb7a73f9af28149a1e\">cca7881</a></td><td><code>Removed unneeded import</code></td></tr></table>\n",
    "created_at": "2015-12-18T17:49:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161090",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:48'>**Comment 48:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cca788124c7eb757cceda7cb7a73f9af28149a1e">cca7881</a></td><td><code>Removed unneeded import</code></td></tr></table>




---

archive/issue_comments_161091.json:
```json
{
    "body": "<a id='comment:49'>**Comment 49:**</a>\nReplying to [@seblabbe](#comment%3A43): \n> I don't see why neither...\n\nAccording to Vincent on Sage devel it is probably a bug of the patchbot (see https://groups.google.com/forum/#!topic/sage-devel/xlpLwktA5Hk).",
    "created_at": "2015-12-18T17:52:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161091",
    "user": "https://github.com/hivert"
}
```

<a id='comment:49'>**Comment 49:**</a>
Replying to [@seblabbe](#comment%3A43): 
> I don't see why neither...

According to Vincent on Sage devel it is probably a bug of the patchbot (see https://groups.google.com/forum/#!topic/sage-devel/xlpLwktA5Hk).



---

archive/issue_comments_161092.json:
```json
{
    "body": "<a id='comment:50'>**Comment 50:**</a>\nReplying to [@hivert](#comment%3A46):\n> Replying to [@seblabbe](#comment%3A45):\n> > Is there a reason why you use `res=[\"\"]` and `res[0]` in `print_communication_statistics` instead of `res=\"\"` and `res`?\n\n> \n> Yes ! This is the classical trick to have a local variable shared with the local function (see e.g: http://stackoverflow.com/questions/2609518/python-nested-function-scopes).\n\nCould you add this information inside the code of that method?",
    "created_at": "2015-12-21T10:56:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161092",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:50'>**Comment 50:**</a>
Replying to [@hivert](#comment%3A46):
> Replying to [@seblabbe](#comment%3A45):
> > Is there a reason why you use `res=[""]` and `res[0]` in `print_communication_statistics` instead of `res=""` and `res`?

> 
> Yes ! This is the classical trick to have a local variable shared with the local function (see e.g: http://stackoverflow.com/questions/2609518/python-nested-function-scopes).

Could you add this information inside the code of that method?



---

archive/issue_comments_161093.json:
```json
{
    "body": "<a id='comment:51'>**Comment 51:**</a>\n`map_reduce` method of `SearchForest` should document what happen when this method is called with no arguments, i.e. returns the cardinality. More precisely, it should say that the value `None` for arguments `map_function` and `reduce_function` is replaced by what?",
    "created_at": "2015-12-21T13:44:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161093",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:51'>**Comment 51:**</a>
`map_reduce` method of `SearchForest` should document what happen when this method is called with no arguments, i.e. returns the cardinality. More precisely, it should say that the value `None` for arguments `map_function` and `reduce_function` is replaced by what?



---

archive/issue_comments_161094.json:
```json
{
    "body": "<a id='comment:52'>**Comment 52:**</a>\n`On can use the three following parameters:` -> `One can use the three following parameters:`",
    "created_at": "2015-12-21T13:54:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161094",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:52'>**Comment 52:**</a>
`On can use the three following parameters:` -> `One can use the three following parameters:`



---

archive/issue_comments_161095.json:
```json
{
    "body": "<a id='comment:53'>**Comment 53:**</a>\nI get the following doctests error on top on sage-6.10 on my machine:\n\n```\nGit branch: 13580\nUsing --optional=gcc,mpir,python2,sage\nDoctesting 1 file.\nsage -t --warn-long 85.4 map_reduce.py\n**********************************************************************\nFile \"map_reduce.py\", line 960, in sage.parallel.map_reduce.RESetMapReduce._signal_task_start\nFailed example:\n    S._active_tasks\nExpected:\n    <Semaphore(value=2)>\nGot:\n    <Semaphore(value=unknown)>\n**********************************************************************\nFile \"map_reduce.py\", line 964, in sage.parallel.map_reduce.RESetMapReduce._signal_task_start\nFailed example:\n    S._active_tasks\nExpected:\n    <Semaphore(value=3)>\nGot:\n    <Semaphore(value=unknown)>\n**********************************************************************\nFile \"map_reduce.py\", line 985, in sage.parallel.map_reduce.RESetMapReduce._signal_task_done\nFailed example:\n    S._active_tasks\nExpected:\n    <Semaphore(value=2)>\nGot:\n    <Semaphore(value=unknown)>\n**********************************************************************\nFile \"map_reduce.py\", line 989, in sage.parallel.map_reduce.RESetMapReduce._signal_task_done\nFailed example:\n    S._active_tasks\nExpected:\n    <Semaphore(value=1)>\nGot:\n    <Semaphore(value=unknown)>\n**********************************************************************\n2 items had failures:\n   2 of   9 in sage.parallel.map_reduce.RESetMapReduce._signal_task_done\n   2 of   7 in sage.parallel.map_reduce.RESetMapReduce._signal_task_start\n    [249 tests, 4 failures, 43.04 s]\n----------------------------------------------------------------------\nsage -t --warn-long 85.4 map_reduce.py  # 4 doctests failed\n----------------------------------------------------------------------\n```\n\nIt seems ok on patchbot reporting seemingly unrelated errors :\n\n```\n----------------------------------------------------------------------\nsage -t --long src/sage/interfaces/expect.py  # Timed out\nsage -t --long src/sage/interfaces/gap.py  # 10 doctests failed\n----------------------------------------------------------------------\n```",
    "created_at": "2015-12-21T14:09:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161095",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:53'>**Comment 53:**</a>
I get the following doctests error on top on sage-6.10 on my machine:

```
Git branch: 13580
Using --optional=gcc,mpir,python2,sage
Doctesting 1 file.
sage -t --warn-long 85.4 map_reduce.py
**********************************************************************
File "map_reduce.py", line 960, in sage.parallel.map_reduce.RESetMapReduce._signal_task_start
Failed example:
    S._active_tasks
Expected:
    <Semaphore(value=2)>
Got:
    <Semaphore(value=unknown)>
**********************************************************************
File "map_reduce.py", line 964, in sage.parallel.map_reduce.RESetMapReduce._signal_task_start
Failed example:
    S._active_tasks
Expected:
    <Semaphore(value=3)>
Got:
    <Semaphore(value=unknown)>
**********************************************************************
File "map_reduce.py", line 985, in sage.parallel.map_reduce.RESetMapReduce._signal_task_done
Failed example:
    S._active_tasks
Expected:
    <Semaphore(value=2)>
Got:
    <Semaphore(value=unknown)>
**********************************************************************
File "map_reduce.py", line 989, in sage.parallel.map_reduce.RESetMapReduce._signal_task_done
Failed example:
    S._active_tasks
Expected:
    <Semaphore(value=1)>
Got:
    <Semaphore(value=unknown)>
**********************************************************************
2 items had failures:
   2 of   9 in sage.parallel.map_reduce.RESetMapReduce._signal_task_done
   2 of   7 in sage.parallel.map_reduce.RESetMapReduce._signal_task_start
    [249 tests, 4 failures, 43.04 s]
----------------------------------------------------------------------
sage -t --warn-long 85.4 map_reduce.py  # 4 doctests failed
----------------------------------------------------------------------
```

It seems ok on patchbot reporting seemingly unrelated errors :

```
----------------------------------------------------------------------
sage -t --long src/sage/interfaces/expect.py  # Timed out
sage -t --long src/sage/interfaces/gap.py  # 10 doctests failed
----------------------------------------------------------------------
```



---

archive/issue_events_160717.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-12-21T14:24:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13580#event-160717"
}
```



---

archive/issue_events_160718.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-12-21T14:24:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13580#event-160718"
}
```



---

archive/issue_comments_161096.json:
```json
{
    "body": "<a id='comment:54'>**Comment 54:**</a>\nI divided the review in a stack of tasks but since I am unable to parallelize my working time, I did the review serially with many interruptions during the previous days:)\n\nI finished to look at what I wanted to look at. The documentation compiles good and helps to understand what is happening. I was able to test the parallel computation on at least one extensive example. To me it will be a positive review after my previous four comments are answered.",
    "created_at": "2015-12-21T14:24:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161096",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:54'>**Comment 54:**</a>
I divided the review in a stack of tasks but since I am unable to parallelize my working time, I did the review serially with many interruptions during the previous days:)

I finished to look at what I wanted to look at. The documentation compiles good and helps to understand what is happening. I was able to test the parallel computation on at least one extensive example. To me it will be a positive review after my previous four comments are answered.



---

archive/issue_comments_161097.json:
```json
{
    "body": "<a id='comment:55'>**Comment 55:**</a>\nReplying to [@seblabbe](#comment%3A53):\n> I get the following doctests error on top on sage-6.10 on my machine:\n> \n> ```\n> Expected:\n>     <Semaphore(value=1)>\n> Got:\n>     <Semaphore(value=unknown)>\n> ```\n\nIs this happening on MacOS ? I know that Semaphore are implemented differently on this system. See in particular [the note](https://docs.python.org/2/library/multiprocessing.html#synchronization-primitives) after class `multiprocessing.BoundedSemaphore`, where it says:\n\n    on Unix platforms like Mac OS X where sem_getvalue() is not implemented.\n\nIf so and if the rests behave correctly, I'm tempted to replace the doctests with\n\n```\n    <Semaphore(value=...)>\n```\n\nWhat do you think ?",
    "created_at": "2015-12-21T14:49:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161097",
    "user": "https://github.com/hivert"
}
```

<a id='comment:55'>**Comment 55:**</a>
Replying to [@seblabbe](#comment%3A53):
> I get the following doctests error on top on sage-6.10 on my machine:
> 
> ```
> Expected:
>     <Semaphore(value=1)>
> Got:
>     <Semaphore(value=unknown)>
> ```

Is this happening on MacOS ? I know that Semaphore are implemented differently on this system. See in particular [the note](https://docs.python.org/2/library/multiprocessing.html#synchronization-primitives) after class `multiprocessing.BoundedSemaphore`, where it says:

    on Unix platforms like Mac OS X where sem_getvalue() is not implemented.

If so and if the rests behave correctly, I'm tempted to replace the doctests with

```
    <Semaphore(value=...)>
```

What do you think ?



---

archive/issue_comments_161098.json:
```json
{
    "body": "<a id='comment:56'>**Comment 56:**</a>\nReplying to [@seblabbe](#comment%3A51):\n> `map_reduce` method of `SearchForest` should document what happen when this method is called with no arguments, i.e. returns the cardinality. More precisely, it should say that the value `None` for arguments `map_function` and `reduce_function` is replaced by what?\n\nI didn't document this one because I'm was not sure It was a sensible default. If you think it is then let's go for it.\n\nBy the way thanks for your careful review !!!\n\nFlorent",
    "created_at": "2015-12-21T14:58:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161098",
    "user": "https://github.com/hivert"
}
```

<a id='comment:56'>**Comment 56:**</a>
Replying to [@seblabbe](#comment%3A51):
> `map_reduce` method of `SearchForest` should document what happen when this method is called with no arguments, i.e. returns the cardinality. More precisely, it should say that the value `None` for arguments `map_function` and `reduce_function` is replaced by what?

I didn't document this one because I'm was not sure It was a sensible default. If you think it is then let's go for it.

By the way thanks for your careful review !!!

Florent



---

archive/issue_comments_161099.json:
```json
{
    "body": "**Changing commit** from \"[cca788124c7eb757cceda7cb7a73f9af28149a1e](https://github.com/sagemath/sagetrac-mirror/commit/cca788124c7eb757cceda7cb7a73f9af28149a1e)\" to \"[1a8b78e378bf3909a5c4ad4b15a77df7320ab42d](https://github.com/sagemath/sagetrac-mirror/commit/1a8b78e378bf3909a5c4ad4b15a77df7320ab42d)\".",
    "created_at": "2015-12-21T15:17:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161099",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[cca788124c7eb757cceda7cb7a73f9af28149a1e](https://github.com/sagemath/sagetrac-mirror/commit/cca788124c7eb757cceda7cb7a73f9af28149a1e)" to "[1a8b78e378bf3909a5c4ad4b15a77df7320ab42d](https://github.com/sagemath/sagetrac-mirror/commit/1a8b78e378bf3909a5c4ad4b15a77df7320ab42d)".



---

archive/issue_comments_161100.json:
```json
{
    "body": "<a id='comment:57'>**Comment 57:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1a8b78e378bf3909a5c4ad4b15a77df7320ab42d\">1a8b78e</a></td><td><code>- MacOSX compatible doctests for semaphore.</code></td></tr></table>\n",
    "created_at": "2015-12-21T15:17:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161100",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:57'>**Comment 57:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1a8b78e378bf3909a5c4ad4b15a77df7320ab42d">1a8b78e</a></td><td><code>- MacOSX compatible doctests for semaphore.</code></td></tr></table>




---

archive/issue_comments_161101.json:
```json
{
    "body": "<a id='comment:58'>**Comment 58:**</a>\nI uploaded a patch which should address all your concerns:\n- tests on MacOSX\n- typos\n- default values documentation",
    "created_at": "2015-12-21T15:18:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161101",
    "user": "https://github.com/hivert"
}
```

<a id='comment:58'>**Comment 58:**</a>
I uploaded a patch which should address all your concerns:
- tests on MacOSX
- typos
- default values documentation



---

archive/issue_comments_161102.json:
```json
{
    "body": "<a id='comment:59'>**Comment 59:**</a>\nIntroduced typo in the previous commit: `the function costant to 1.` -> `constant`",
    "created_at": "2015-12-21T19:25:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161102",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:59'>**Comment 59:**</a>
Introduced typo in the previous commit: `the function costant to 1.` -> `constant`



---

archive/issue_comments_161103.json:
```json
{
    "body": "<a id='comment:60'>**Comment 60:**</a>\nReplying to [@hivert](#comment%3A55):\n> Replying to [@seblabbe](#comment%3A53):\n> > I get the following doctests error on top on sage-6.10 on my machine:\n> > \n> > ```\n> > Expected:\n> >     <Semaphore(value=1)>\n> > Got:\n> >     <Semaphore(value=unknown)>\n> > ```\n\n> \n> Is this happening on MacOS ? \n\nYes\n\n> If so and if the rests behave correctly, I'm tempted to replace the doctests with\n> \n> ```\n>     <Semaphore(value=...)>\n> ```\n> \n> What do you think ? \n\nI agree. All tests passed now...",
    "created_at": "2015-12-21T19:29:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161103",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:60'>**Comment 60:**</a>
Replying to [@hivert](#comment%3A55):
> Replying to [@seblabbe](#comment%3A53):
> > I get the following doctests error on top on sage-6.10 on my machine:
> > 
> > ```
> > Expected:
> >     <Semaphore(value=1)>
> > Got:
> >     <Semaphore(value=unknown)>
> > ```

> 
> Is this happening on MacOS ? 

Yes

> If so and if the rests behave correctly, I'm tempted to replace the doctests with
> 
> ```
>     <Semaphore(value=...)>
> ```
> 
> What do you think ? 

I agree. All tests passed now...



---

archive/issue_comments_161104.json:
```json
{
    "body": "<a id='comment:61'>**Comment 61:**</a>\nReplying to [@hivert](#comment%3A56):\n> I didn't document this one because I'm was not sure It was a sensible default. If you think it is then let's go for it.\n\nI think it is a good default. Also, sometimes, you may want to set only some of the arguments and this information allows it. Finally, it's good to see that cardinality is a special case of this method.",
    "created_at": "2015-12-21T19:33:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161104",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:61'>**Comment 61:**</a>
Replying to [@hivert](#comment%3A56):
> I didn't document this one because I'm was not sure It was a sensible default. If you think it is then let's go for it.

I think it is a good default. Also, sometimes, you may want to set only some of the arguments and this information allows it. Finally, it's good to see that cardinality is a special case of this method.



---

archive/issue_comments_161105.json:
```json
{
    "body": "**Reviewer:** S\u00e9bastien Labb\u00e9",
    "created_at": "2015-12-21T19:51:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161105",
    "user": "https://github.com/seblabbe"
}
```

**Reviewer:** Sébastien Labbé



---

archive/issue_comments_161106.json:
```json
{
    "body": "<a id='comment:63'>**Comment 63:**</a>\nJust to be clear: I am waiting for the `costant` -> `constant` fix to change the status to positive review.",
    "created_at": "2015-12-22T12:53:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161106",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:63'>**Comment 63:**</a>
Just to be clear: I am waiting for the `costant` -> `constant` fix to change the status to positive review.



---

archive/issue_comments_161107.json:
```json
{
    "body": "**Changing branch** from \"[u/hivert/13580/map_reduce](https://github.com/sagemath/sagetrac-mirror/tree/u/hivert/13580/map_reduce)\" to \"[u/nthiery/13580/map_reduce](https://github.com/sagemath/sagetrac-mirror/tree/u/nthiery/13580/map_reduce)\".",
    "created_at": "2015-12-24T08:16:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161107",
    "user": "https://github.com/nthiery"
}
```

**Changing branch** from "[u/hivert/13580/map_reduce](https://github.com/sagemath/sagetrac-mirror/tree/u/hivert/13580/map_reduce)" to "[u/nthiery/13580/map_reduce](https://github.com/sagemath/sagetrac-mirror/tree/u/nthiery/13580/map_reduce)".



---

archive/issue_comments_161108.json:
```json
{
    "body": "<a id='comment:65'>**Comment 65:**</a>\nTypo fixed, hence changing the status to positive review on Sebastien's behalf.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/98fd9e1c7a085b1ba62d004dba6cca4c89001cd2\">98fd9e1</a></td><td><code>13580: typo fix</code></td></tr></table>\n",
    "created_at": "2015-12-24T08:18:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161108",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:65'>**Comment 65:**</a>
Typo fixed, hence changing the status to positive review on Sebastien's behalf.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/98fd9e1c7a085b1ba62d004dba6cca4c89001cd2">98fd9e1</a></td><td><code>13580: typo fix</code></td></tr></table>




---

archive/issue_events_160719.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2015-12-24T08:18:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13580#event-160719"
}
```



---

archive/issue_events_160720.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2015-12-24T08:18:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13580#event-160720"
}
```



---

archive/issue_comments_161109.json:
```json
{
    "body": "**Changing commit** from \"[1a8b78e378bf3909a5c4ad4b15a77df7320ab42d](https://github.com/sagemath/sagetrac-mirror/commit/1a8b78e378bf3909a5c4ad4b15a77df7320ab42d)\" to \"[98fd9e1c7a085b1ba62d004dba6cca4c89001cd2](https://github.com/sagemath/sagetrac-mirror/commit/98fd9e1c7a085b1ba62d004dba6cca4c89001cd2)\".",
    "created_at": "2015-12-24T08:18:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161109",
    "user": "https://github.com/nthiery"
}
```

**Changing commit** from "[1a8b78e378bf3909a5c4ad4b15a77df7320ab42d](https://github.com/sagemath/sagetrac-mirror/commit/1a8b78e378bf3909a5c4ad4b15a77df7320ab42d)" to "[98fd9e1c7a085b1ba62d004dba6cca4c89001cd2](https://github.com/sagemath/sagetrac-mirror/commit/98fd9e1c7a085b1ba62d004dba6cca4c89001cd2)".



---

archive/issue_events_160721.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-12-24T17:13:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13580#event-160721"
}
```



---

archive/issue_events_160722.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-12-24T17:13:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13580#event-160722"
}
```



---

archive/issue_comments_161110.json:
```json
{
    "body": "<a id='comment:66'>**Comment 66:**</a>\nFails on OSX: http://build.sagedev.org/release/builders/%20%20fast%20Volker%20MiniMac%20%28OSX%2010.10%20x86_64%29%20incremental/builds/636/steps/shell_4/logs/stdio",
    "created_at": "2015-12-24T17:13:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161110",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:66'>**Comment 66:**</a>
Fails on OSX: http://build.sagedev.org/release/builders/%20%20fast%20Volker%20MiniMac%20%28OSX%2010.10%20x86_64%29%20incremental/builds/636/steps/shell_4/logs/stdio



---

archive/issue_comments_161111.json:
```json
{
    "body": "<a id='comment:67'>**Comment 67:**</a>\nHello and merry christmas every one,\n\nI have some question on this ticket.\n\nFirstly, I don't understand the documentation from the line 571:\n\n```\n    Decription of the map/reduce operation:\n\n    - ``map_function=f`` -- (default to ``None``)\n    - ``reduce_function=red`` -- (default to ``None``)\n    - ``reduce_init=init`` -- (default to ``None``)\n```\n\nWhat means `f`, `red` and `init`? My opinion is that `f`, `red`and `init` are irrelevant but an example should be interesting at this point: \n\n(copy-paste of one in the module documentation)\n\n```\n sage: from sage.parallel.map_reduce import RESetMapReduce\n sage: S = RESetMapReduce(\n ....:   roots = [[]],\n ....:   children = lambda l: [l+[0], l+[1]] if len(l) <= 15 else [],\n ....:   map_function = lambda x : 1,\n ....:   reduce_function = lambda x,y: x+y,\n ....:   reduce_init = 0 )\n sage: S.run()\n 131071\n```\n\nOk, there is the `seealso` which says go to see the documentation of the module for examples, but one example there is interesting, no?\n\nThen it seems there is some useless import (like line 1345 `from multiprocessing import current_process`) (I try to compile sage soon and I can remove all useless import if you want).\n\nFinally, I'm not sure to understand the use of `AbortError`. It is used to abort the computation and to say to the workers and the thiefs every think is done?\n\nJean-Baptiste",
    "created_at": "2015-12-26T14:25:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161111",
    "user": "https://github.com/sagetrac-elixyre"
}
```

<a id='comment:67'>**Comment 67:**</a>
Hello and merry christmas every one,

I have some question on this ticket.

Firstly, I don't understand the documentation from the line 571:

```
    Decription of the map/reduce operation:

    - ``map_function=f`` -- (default to ``None``)
    - ``reduce_function=red`` -- (default to ``None``)
    - ``reduce_init=init`` -- (default to ``None``)
```

What means `f`, `red` and `init`? My opinion is that `f`, `red`and `init` are irrelevant but an example should be interesting at this point: 

(copy-paste of one in the module documentation)

```
 sage: from sage.parallel.map_reduce import RESetMapReduce
 sage: S = RESetMapReduce(
 ....:   roots = [[]],
 ....:   children = lambda l: [l+[0], l+[1]] if len(l) <= 15 else [],
 ....:   map_function = lambda x : 1,
 ....:   reduce_function = lambda x,y: x+y,
 ....:   reduce_init = 0 )
 sage: S.run()
 131071
```

Ok, there is the `seealso` which says go to see the documentation of the module for examples, but one example there is interesting, no?

Then it seems there is some useless import (like line 1345 `from multiprocessing import current_process`) (I try to compile sage soon and I can remove all useless import if you want).

Finally, I'm not sure to understand the use of `AbortError`. It is used to abort the computation and to say to the workers and the thiefs every think is done?

Jean-Baptiste



---

archive/issue_comments_161112.json:
```json
{
    "body": "<a id='comment:68'>**Comment 68:**</a>\nReplying to [@vbraun](#comment%3A66):\n> Fails on OSX: http://build.sagedev.org/release/builders/%20%20fast%20Volker%20MiniMac%20%28OSX%2010.10%20x86_64%29%20incremental/builds/636/steps/shell_4/logs/stdio\n\nI can not reproduce this problem on my Mac OS X Yosemite 10.10.2:\n\n```\n$ sage -tp --long src/sage/parallel/map_reduce.py \nRunning doctests with ID 2015-12-28-10-44-31-65e477d9.\nGit branch: 13580\nUsing --optional=gcc,mpir,python2,sage\nDoctesting 1 file using 2 threads.\nsage -t --long --warn-long 85.0 src/sage/parallel/map_reduce.py\n    [252 tests, 40.89 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\n```",
    "created_at": "2015-12-28T09:48:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161112",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:68'>**Comment 68:**</a>
Replying to [@vbraun](#comment%3A66):
> Fails on OSX: http://build.sagedev.org/release/builders/%20%20fast%20Volker%20MiniMac%20%28OSX%2010.10%20x86_64%29%20incremental/builds/636/steps/shell_4/logs/stdio

I can not reproduce this problem on my Mac OS X Yosemite 10.10.2:

```
$ sage -tp --long src/sage/parallel/map_reduce.py 
Running doctests with ID 2015-12-28-10-44-31-65e477d9.
Git branch: 13580
Using --optional=gcc,mpir,python2,sage
Doctesting 1 file using 2 threads.
sage -t --long --warn-long 85.0 src/sage/parallel/map_reduce.py
    [252 tests, 40.89 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
```



---

archive/issue_comments_161113.json:
```json
{
    "body": "<a id='comment:69'>**Comment 69:**</a>\nHello,\n\nI can reproduce test failures on El Capitan (os x):\n\n- [log_map_reduce](http://kerios.fr/downloads/sage/2016/log_map_reduce)\n- [log_map_reduce2](http://kerios.fr/downloads/sage/2016/log_map_reduce2)\n- [log_map_reduce3](http://kerios.fr/downloads/sage/2016/log_map_reduce3)\n\nI run 3 tests and I obtained 3 distincts failures. My problem is that if I try to execute those lines which fails in sage terminal (several times) then it does not fail!\n\nIs it possible that the test environment is not robust specially on mac os?",
    "created_at": "2016-01-06T10:56:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161113",
    "user": "https://github.com/sagetrac-elixyre"
}
```

<a id='comment:69'>**Comment 69:**</a>
Hello,

I can reproduce test failures on El Capitan (os x):

- [log_map_reduce](http://kerios.fr/downloads/sage/2016/log_map_reduce)
- [log_map_reduce2](http://kerios.fr/downloads/sage/2016/log_map_reduce2)
- [log_map_reduce3](http://kerios.fr/downloads/sage/2016/log_map_reduce3)

I run 3 tests and I obtained 3 distincts failures. My problem is that if I try to execute those lines which fails in sage terminal (several times) then it does not fail!

Is it possible that the test environment is not robust specially on mac os?



---

archive/issue_comments_161114.json:
```json
{
    "body": "<a id='comment:70'>**Comment 70:**</a>\nI read the code and I don't know how to understand this:\n\n```\nres = post_process(node)\nif res is not None:\n    self._res = reduc(self._res, mapp(res))\n```\n\nin the worker code of `walk_branch_locally` method.\n\nI think this is useless, no? Or if not then the documentation of `post_process` function should be improve to specify that if `post_process` returns `None` then there is a specific behavior.",
    "created_at": "2016-01-11T09:17:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161114",
    "user": "https://github.com/sagetrac-elixyre"
}
```

<a id='comment:70'>**Comment 70:**</a>
I read the code and I don't know how to understand this:

```
res = post_process(node)
if res is not None:
    self._res = reduc(self._res, mapp(res))
```

in the worker code of `walk_branch_locally` method.

I think this is useless, no? Or if not then the documentation of `post_process` function should be improve to specify that if `post_process` returns `None` then there is a specific behavior.



---

archive/issue_comments_161115.json:
```json
{
    "body": "<a id='comment:71'>**Comment 71:**</a>\nReplying to [elixyre](#comment%3A70):\n> \n> ```\n> res = post_process(node)\n> if res is not None:\n>     self._res = reduc(self._res, mapp(res))\n> ```\n> I think this is useless, no? Or if not then the documentation of `post_process` function should be improve to specify that if `post_process` returns `None` then there is a specific behavior.\n\nOk, this behavior is specify in the documentation of `RESetMapReduce` but this is not specified in paragraph (line 135) associated of this module.",
    "created_at": "2016-01-11T09:33:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161115",
    "user": "https://github.com/sagetrac-elixyre"
}
```

<a id='comment:71'>**Comment 71:**</a>
Replying to [elixyre](#comment%3A70):
> 
> ```
> res = post_process(node)
> if res is not None:
>     self._res = reduc(self._res, mapp(res))
> ```
> I think this is useless, no? Or if not then the documentation of `post_process` function should be improve to specify that if `post_process` returns `None` then there is a specific behavior.

Ok, this behavior is specify in the documentation of `RESetMapReduce` but this is not specified in paragraph (line 135) associated of this module.



---

archive/issue_comments_161116.json:
```json
{
    "body": "<a id='comment:72'>**Comment 72:**</a>\nFurthermore the lines:\n\n```\nfor child in newnodes: \n    self._todo.append(child)\n```\nof `walk_branch_locally` should be replaced by\n\n```\nself._todo_.extend(newnodes)\n```\n\n(I just notice that I read and if you are agree with my remark then I can replace that)",
    "created_at": "2016-01-11T09:35:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161116",
    "user": "https://github.com/sagetrac-elixyre"
}
```

<a id='comment:72'>**Comment 72:**</a>
Furthermore the lines:

```
for child in newnodes: 
    self._todo.append(child)
```
of `walk_branch_locally` should be replaced by

```
self._todo_.extend(newnodes)
```

(I just notice that I read and if you are agree with my remark then I can replace that)



---

archive/issue_comments_161117.json:
```json
{
    "body": "<a id='comment:73'>**Comment 73:**</a>\nGo back to `None` activities, if I assume some users want to use *nodes* which could be `None` then my first idea is to use the `post_process` function to avoid problem but... if the *thief* doesn't receive then he send `None` and he says there is no job to do.\n\nI propose two solutions:\n- first one, to specify that `None` is not a node never! (this is assumed but this must be explicited in the documentation),\n- second one (the object way), to define an object `NoTask`.\n\nOpinion?",
    "created_at": "2016-01-11T10:08:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161117",
    "user": "https://github.com/sagetrac-elixyre"
}
```

<a id='comment:73'>**Comment 73:**</a>
Go back to `None` activities, if I assume some users want to use *nodes* which could be `None` then my first idea is to use the `post_process` function to avoid problem but... if the *thief* doesn't receive then he send `None` and he says there is no job to do.

I propose two solutions:
- first one, to specify that `None` is not a node never! (this is assumed but this must be explicited in the documentation),
- second one (the object way), to define an object `NoTask`.

Opinion?



---

archive/issue_comments_161118.json:
```json
{
    "body": "<a id='comment:74'>**Comment 74:**</a>\nReplying to [elixyre](#comment%3A73):\n> Go back to `None` activities, if I assume some users want to use *nodes* which could be `None` then my first idea is to use the `post_process` function to avoid problem but... if the *thief* doesn't receive then he send `None` and he says there is no job to do.\n> \n> I propose two solutions:\n> - first one, to specify that `None` is not a node never! (this is assumed but this must be explicited in the documentation),\n\nI'm clearly in Favor of this solution. We assume that `None` doesn't blong to the set described by the underlying RESet. Note that this is something which concerns more the underlying RESet than the map-reduce computation.",
    "created_at": "2016-01-12T08:44:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161118",
    "user": "https://github.com/hivert"
}
```

<a id='comment:74'>**Comment 74:**</a>
Replying to [elixyre](#comment%3A73):
> Go back to `None` activities, if I assume some users want to use *nodes* which could be `None` then my first idea is to use the `post_process` function to avoid problem but... if the *thief* doesn't receive then he send `None` and he says there is no job to do.
> 
> I propose two solutions:
> - first one, to specify that `None` is not a node never! (this is assumed but this must be explicited in the documentation),

I'm clearly in Favor of this solution. We assume that `None` doesn't blong to the set described by the underlying RESet. Note that this is something which concerns more the underlying RESet than the map-reduce computation.



---

archive/issue_comments_161119.json:
```json
{
    "body": "**Changing branch** from \"[u/nthiery/13580/map_reduce](https://github.com/sagemath/sagetrac-mirror/tree/u/nthiery/13580/map_reduce)\" to \"[u/hivert/13580/map_reduce](https://github.com/sagemath/sagetrac-mirror/tree/u/hivert/13580/map_reduce)\".",
    "created_at": "2016-01-12T09:55:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161119",
    "user": "https://github.com/hivert"
}
```

**Changing branch** from "[u/nthiery/13580/map_reduce](https://github.com/sagemath/sagetrac-mirror/tree/u/nthiery/13580/map_reduce)" to "[u/hivert/13580/map_reduce](https://github.com/sagemath/sagetrac-mirror/tree/u/hivert/13580/map_reduce)".



---

archive/issue_comments_161120.json:
```json
{
    "body": "<a id='comment:76'>**Comment 76:**</a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6e3bbd35f4572dffa1953e4f4acddc916a36c967\">6e3bbd3</a></td><td><code>More logging for debugging</code></td></tr></table>\n",
    "created_at": "2016-01-12T09:56:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161120",
    "user": "https://github.com/hivert"
}
```

<a id='comment:76'>**Comment 76:**</a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6e3bbd35f4572dffa1953e4f4acddc916a36c967">6e3bbd3</a></td><td><code>More logging for debugging</code></td></tr></table>




---

archive/issue_comments_161121.json:
```json
{
    "body": "**Changing author** from \"Florent Hivert, Nathann Cohen\" to \"Florent Hivert, Jean-Baptiste Priez, Nathann Cohen\".",
    "created_at": "2016-01-12T09:56:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161121",
    "user": "https://github.com/hivert"
}
```

**Changing author** from "Florent Hivert, Nathann Cohen" to "Florent Hivert, Jean-Baptiste Priez, Nathann Cohen".



---

archive/issue_comments_161122.json:
```json
{
    "body": "**Changing commit** from \"[98fd9e1c7a085b1ba62d004dba6cca4c89001cd2](https://github.com/sagemath/sagetrac-mirror/commit/98fd9e1c7a085b1ba62d004dba6cca4c89001cd2)\" to \"[6e3bbd35f4572dffa1953e4f4acddc916a36c967](https://github.com/sagemath/sagetrac-mirror/commit/6e3bbd35f4572dffa1953e4f4acddc916a36c967)\".",
    "created_at": "2016-01-12T09:56:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161122",
    "user": "https://github.com/hivert"
}
```

**Changing commit** from "[98fd9e1c7a085b1ba62d004dba6cca4c89001cd2](https://github.com/sagemath/sagetrac-mirror/commit/98fd9e1c7a085b1ba62d004dba6cca4c89001cd2)" to "[6e3bbd35f4572dffa1953e4f4acddc916a36c967](https://github.com/sagemath/sagetrac-mirror/commit/6e3bbd35f4572dffa1953e4f4acddc916a36c967)".



---

archive/issue_comments_161123.json:
```json
{
    "body": "<a id='comment:77'>**Comment 77:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/98fd9e1c7a085b1ba62d004dba6cca4c89001cd2\">98fd9e1</a></td><td><code>13580: typo fix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6b4a5cffe362093e6011801d3485a9dc02ddc1e2\">6b4a5cf</a></td><td><code>Merge branch 'u/nthiery/13580/map_reduce' into t/13580/map_reduce</code></td></tr></table>\n",
    "created_at": "2016-01-12T10:02:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161123",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:77'>**Comment 77:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/98fd9e1c7a085b1ba62d004dba6cca4c89001cd2">98fd9e1</a></td><td><code>13580: typo fix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6b4a5cffe362093e6011801d3485a9dc02ddc1e2">6b4a5cf</a></td><td><code>Merge branch 'u/nthiery/13580/map_reduce' into t/13580/map_reduce</code></td></tr></table>




---

archive/issue_comments_161124.json:
```json
{
    "body": "**Changing commit** from \"[6e3bbd35f4572dffa1953e4f4acddc916a36c967](https://github.com/sagemath/sagetrac-mirror/commit/6e3bbd35f4572dffa1953e4f4acddc916a36c967)\" to \"[6b4a5cffe362093e6011801d3485a9dc02ddc1e2](https://github.com/sagemath/sagetrac-mirror/commit/6b4a5cffe362093e6011801d3485a9dc02ddc1e2)\".",
    "created_at": "2016-01-12T10:02:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161124",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[6e3bbd35f4572dffa1953e4f4acddc916a36c967](https://github.com/sagemath/sagetrac-mirror/commit/6e3bbd35f4572dffa1953e4f4acddc916a36c967)" to "[6b4a5cffe362093e6011801d3485a9dc02ddc1e2](https://github.com/sagemath/sagetrac-mirror/commit/6b4a5cffe362093e6011801d3485a9dc02ddc1e2)".



---

archive/issue_comments_161125.json:
```json
{
    "body": "<a id='comment:78'>**Comment 78:**</a>\nReplying to [@vbraun](#comment%3A66):\n> Fails on OSX: http://build.sagedev.org/release/builders/%20%20fast%20Volker%20MiniMac%20%28OSX%2010.10%20x86_64%29%20incremental/builds/636/steps/shell_4/logs/stdio\n\nWe finally got the problem with Jean-Baptiste. It occurs that semaphore are broken on MacOSX (or at least are not fully POSIX compliant). In particular, on standard unixes, when two processes are trying to acquire a semaphore whose value is more than two, they always both succeeded. On MacOS, one of them may fail. As a consequence, I'm writing a different code form MacOS relying on a Lock and a shared integer. It may be slower on system where semaphore are implemented in a lockless way.\n\nIs there a standard Sage/Python way to check if we are on MacOS ?",
    "created_at": "2016-01-15T15:53:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161125",
    "user": "https://github.com/hivert"
}
```

<a id='comment:78'>**Comment 78:**</a>
Replying to [@vbraun](#comment%3A66):
> Fails on OSX: http://build.sagedev.org/release/builders/%20%20fast%20Volker%20MiniMac%20%28OSX%2010.10%20x86_64%29%20incremental/builds/636/steps/shell_4/logs/stdio

We finally got the problem with Jean-Baptiste. It occurs that semaphore are broken on MacOSX (or at least are not fully POSIX compliant). In particular, on standard unixes, when two processes are trying to acquire a semaphore whose value is more than two, they always both succeeded. On MacOS, one of them may fail. As a consequence, I'm writing a different code form MacOS relying on a Lock and a shared integer. It may be slower on system where semaphore are implemented in a lockless way.

Is there a standard Sage/Python way to check if we are on MacOS ?



---

archive/issue_comments_161126.json:
```json
{
    "body": "<a id='comment:79'>**Comment 79:**</a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/44566e6dea943f9494fb315d9e3794c7b309c6de\">44566e6</a></td><td><code>ticket search forest map reduce with no problem on mac os x</code></td></tr></table>\n",
    "created_at": "2016-01-17T20:00:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161126",
    "user": "https://github.com/sagetrac-elixyre"
}
```

<a id='comment:79'>**Comment 79:**</a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/44566e6dea943f9494fb315d9e3794c7b309c6de">44566e6</a></td><td><code>ticket search forest map reduce with no problem on mac os x</code></td></tr></table>




---

archive/issue_comments_161127.json:
```json
{
    "body": "**Changing branch** from \"[u/hivert/13580/map_reduce](https://github.com/sagemath/sagetrac-mirror/tree/u/hivert/13580/map_reduce)\" to \"[u/elixyre/ticket/13580](https://github.com/sagemath/sagetrac-mirror/tree/u/elixyre/ticket/13580)\".",
    "created_at": "2016-01-17T20:00:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161127",
    "user": "https://github.com/sagetrac-elixyre"
}
```

**Changing branch** from "[u/hivert/13580/map_reduce](https://github.com/sagemath/sagetrac-mirror/tree/u/hivert/13580/map_reduce)" to "[u/elixyre/ticket/13580](https://github.com/sagemath/sagetrac-mirror/tree/u/elixyre/ticket/13580)".



---

archive/issue_comments_161128.json:
```json
{
    "body": "**Changing reviewer** from \"S\u00e9bastien Labb\u00e9\" to \"S\u00e9bastien Labb\u00e9, Jean-Baptiste Priez\".",
    "created_at": "2016-01-17T20:00:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161128",
    "user": "https://github.com/sagetrac-elixyre"
}
```

**Changing reviewer** from "Sébastien Labbé" to "Sébastien Labbé, Jean-Baptiste Priez".



---

archive/issue_comments_161129.json:
```json
{
    "body": "**Changing commit** from \"[6b4a5cffe362093e6011801d3485a9dc02ddc1e2](https://github.com/sagemath/sagetrac-mirror/commit/6b4a5cffe362093e6011801d3485a9dc02ddc1e2)\" to \"[44566e6dea943f9494fb315d9e3794c7b309c6de](https://github.com/sagemath/sagetrac-mirror/commit/44566e6dea943f9494fb315d9e3794c7b309c6de)\".",
    "created_at": "2016-01-17T20:00:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161129",
    "user": "https://github.com/sagetrac-elixyre"
}
```

**Changing commit** from "[6b4a5cffe362093e6011801d3485a9dc02ddc1e2](https://github.com/sagemath/sagetrac-mirror/commit/6b4a5cffe362093e6011801d3485a9dc02ddc1e2)" to "[44566e6dea943f9494fb315d9e3794c7b309c6de](https://github.com/sagemath/sagetrac-mirror/commit/44566e6dea943f9494fb315d9e3794c7b309c6de)".



---

archive/issue_comments_161130.json:
```json
{
    "body": "<a id='comment:80'>**Comment 80:**</a>\nI pushed the modifications done with Florent about mac os problem.\n\nIt seems there still exists the problem of synchronization with the `Pipe` (of the worker) but... it is never appear... so may be I am wrong.\n\nIs it possible that two distinct process write in the same time on the `_write_task` of a worker?",
    "created_at": "2016-01-17T20:04:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161130",
    "user": "https://github.com/sagetrac-elixyre"
}
```

<a id='comment:80'>**Comment 80:**</a>
I pushed the modifications done with Florent about mac os problem.

It seems there still exists the problem of synchronization with the `Pipe` (of the worker) but... it is never appear... so may be I am wrong.

Is it possible that two distinct process write in the same time on the `_write_task` of a worker?



---

archive/issue_comments_161131.json:
```json
{
    "body": "**Changing branch** from \"[u/elixyre/ticket/13580](https://github.com/sagemath/sagetrac-mirror/tree/u/elixyre/ticket/13580)\" to \"[u/hivert/ticket/13580](https://github.com/sagemath/sagetrac-mirror/tree/u/hivert/ticket/13580)\".",
    "created_at": "2016-02-02T10:39:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161131",
    "user": "https://github.com/hivert"
}
```

**Changing branch** from "[u/elixyre/ticket/13580](https://github.com/sagemath/sagetrac-mirror/tree/u/elixyre/ticket/13580)" to "[u/hivert/ticket/13580](https://github.com/sagemath/sagetrac-mirror/tree/u/hivert/ticket/13580)".



---

archive/issue_comments_161132.json:
```json
{
    "body": "**Changing commit** from \"[44566e6dea943f9494fb315d9e3794c7b309c6de](https://github.com/sagemath/sagetrac-mirror/commit/44566e6dea943f9494fb315d9e3794c7b309c6de)\" to \"[aa8280f9cf68d1e592b760cc85bb7442b47a243e](https://github.com/sagemath/sagetrac-mirror/commit/aa8280f9cf68d1e592b760cc85bb7442b47a243e)\".",
    "created_at": "2016-02-02T10:43:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161132",
    "user": "https://github.com/hivert"
}
```

**Changing commit** from "[44566e6dea943f9494fb315d9e3794c7b309c6de](https://github.com/sagemath/sagetrac-mirror/commit/44566e6dea943f9494fb315d9e3794c7b309c6de)" to "[aa8280f9cf68d1e592b760cc85bb7442b47a243e](https://github.com/sagemath/sagetrac-mirror/commit/aa8280f9cf68d1e592b760cc85bb7442b47a243e)".



---

archive/issue_comments_161133.json:
```json
{
    "body": "<a id='comment:82'>**Comment 82:**</a>\nI just uploaded a version which hopefully should be working on all OSes including MacOS. Please tests on various oses and report any failure here. I don't put needs review yet because it needs a few refactoring and the coverage it not yet 100%. \n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9456035b5b136ed3c95d0a2ab8c05ba7b160dac2\">9456035</a></td><td><code>Work in problem in fixing MACOX broken Semaphore</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/158023b6a1d2feeff292b354306f33234a726acf\">158023b</a></td><td><code>Wrote commented out MacOS version</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aa8280f9cf68d1e592b760cc85bb7442b47a243e\">aa8280f</a></td><td><code>Map-reduce version which should be working even on Darwin based OSes.</code></td></tr></table>\n",
    "created_at": "2016-02-02T10:43:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161133",
    "user": "https://github.com/hivert"
}
```

<a id='comment:82'>**Comment 82:**</a>
I just uploaded a version which hopefully should be working on all OSes including MacOS. Please tests on various oses and report any failure here. I don't put needs review yet because it needs a few refactoring and the coverage it not yet 100%. 

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9456035b5b136ed3c95d0a2ab8c05ba7b160dac2">9456035</a></td><td><code>Work in problem in fixing MACOX broken Semaphore</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/158023b6a1d2feeff292b354306f33234a726acf">158023b</a></td><td><code>Wrote commented out MacOS version</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aa8280f9cf68d1e592b760cc85bb7442b47a243e">aa8280f</a></td><td><code>Map-reduce version which should be working even on Darwin based OSes.</code></td></tr></table>




---

archive/issue_comments_161134.json:
```json
{
    "body": "<a id='comment:83'>**Comment 83:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f9841658ccda142d07cbfaa633dbf4b236165986\">f984165</a></td><td><code>Fixed the doc</code></td></tr></table>\n",
    "created_at": "2016-02-03T09:11:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161134",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:83'>**Comment 83:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f9841658ccda142d07cbfaa633dbf4b236165986">f984165</a></td><td><code>Fixed the doc</code></td></tr></table>




---

archive/issue_comments_161135.json:
```json
{
    "body": "**Changing commit** from \"[aa8280f9cf68d1e592b760cc85bb7442b47a243e](https://github.com/sagemath/sagetrac-mirror/commit/aa8280f9cf68d1e592b760cc85bb7442b47a243e)\" to \"[f9841658ccda142d07cbfaa633dbf4b236165986](https://github.com/sagemath/sagetrac-mirror/commit/f9841658ccda142d07cbfaa633dbf4b236165986)\".",
    "created_at": "2016-02-03T09:11:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161135",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[aa8280f9cf68d1e592b760cc85bb7442b47a243e](https://github.com/sagemath/sagetrac-mirror/commit/aa8280f9cf68d1e592b760cc85bb7442b47a243e)" to "[f9841658ccda142d07cbfaa633dbf4b236165986](https://github.com/sagemath/sagetrac-mirror/commit/f9841658ccda142d07cbfaa633dbf4b236165986)".



---

archive/issue_comments_161136.json:
```json
{
    "body": "**Changing commit** from \"[f9841658ccda142d07cbfaa633dbf4b236165986](https://github.com/sagemath/sagetrac-mirror/commit/f9841658ccda142d07cbfaa633dbf4b236165986)\" to \"[a5f4d676ce7201a801bf6c841aae0585fc144336](https://github.com/sagemath/sagetrac-mirror/commit/a5f4d676ce7201a801bf6c841aae0585fc144336)\".",
    "created_at": "2016-03-16T16:01:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161136",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[f9841658ccda142d07cbfaa633dbf4b236165986](https://github.com/sagemath/sagetrac-mirror/commit/f9841658ccda142d07cbfaa633dbf4b236165986)" to "[a5f4d676ce7201a801bf6c841aae0585fc144336](https://github.com/sagemath/sagetrac-mirror/commit/a5f4d676ce7201a801bf6c841aae0585fc144336)".



---

archive/issue_comments_161137.json:
```json
{
    "body": "<a id='comment:84'>**Comment 84:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a5f4d676ce7201a801bf6c841aae0585fc144336\">a5f4d67</a></td><td><code>Improved doc for map-reduce</code></td></tr></table>\n",
    "created_at": "2016-03-16T16:01:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161137",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:84'>**Comment 84:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a5f4d676ce7201a801bf6c841aae0585fc144336">a5f4d67</a></td><td><code>Improved doc for map-reduce</code></td></tr></table>




---

archive/issue_comments_161138.json:
```json
{
    "body": "<a id='comment:85'>**Comment 85:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/569de0dae0d23e084cbce7690a2a64b53f906f8b\">569de0d</a></td><td><code>Merge branch 'develop' into t/13580/map_reduce</code></td></tr></table>\n",
    "created_at": "2016-04-06T17:24:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161138",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:85'>**Comment 85:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/569de0dae0d23e084cbce7690a2a64b53f906f8b">569de0d</a></td><td><code>Merge branch 'develop' into t/13580/map_reduce</code></td></tr></table>




---

archive/issue_comments_161139.json:
```json
{
    "body": "**Changing commit** from \"[a5f4d676ce7201a801bf6c841aae0585fc144336](https://github.com/sagemath/sagetrac-mirror/commit/a5f4d676ce7201a801bf6c841aae0585fc144336)\" to \"[569de0dae0d23e084cbce7690a2a64b53f906f8b](https://github.com/sagemath/sagetrac-mirror/commit/569de0dae0d23e084cbce7690a2a64b53f906f8b)\".",
    "created_at": "2016-04-06T17:24:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161139",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[a5f4d676ce7201a801bf6c841aae0585fc144336](https://github.com/sagemath/sagetrac-mirror/commit/a5f4d676ce7201a801bf6c841aae0585fc144336)" to "[569de0dae0d23e084cbce7690a2a64b53f906f8b](https://github.com/sagemath/sagetrac-mirror/commit/569de0dae0d23e084cbce7690a2a64b53f906f8b)".



---

archive/issue_comments_161140.json:
```json
{
    "body": "**Changing commit** from \"[569de0dae0d23e084cbce7690a2a64b53f906f8b](https://github.com/sagemath/sagetrac-mirror/commit/569de0dae0d23e084cbce7690a2a64b53f906f8b)\" to \"[b07dfe28221a7473041d65230be409d6cbfafbfc](https://github.com/sagemath/sagetrac-mirror/commit/b07dfe28221a7473041d65230be409d6cbfafbfc)\".",
    "created_at": "2016-04-07T09:20:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161140",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[569de0dae0d23e084cbce7690a2a64b53f906f8b](https://github.com/sagemath/sagetrac-mirror/commit/569de0dae0d23e084cbce7690a2a64b53f906f8b)" to "[b07dfe28221a7473041d65230be409d6cbfafbfc](https://github.com/sagemath/sagetrac-mirror/commit/b07dfe28221a7473041d65230be409d6cbfafbfc)".



---

archive/issue_comments_161141.json:
```json
{
    "body": "<a id='comment:86'>**Comment 86:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b07dfe28221a7473041d65230be409d6cbfafbfc\">b07dfe2</a></td><td><code>Doc of the two implementationsof ActiveTaskCounter</code></td></tr></table>\n",
    "created_at": "2016-04-07T09:20:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161141",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:86'>**Comment 86:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b07dfe28221a7473041d65230be409d6cbfafbfc">b07dfe2</a></td><td><code>Doc of the two implementationsof ActiveTaskCounter</code></td></tr></table>




---

archive/issue_comments_161142.json:
```json
{
    "body": "**Changing commit** from \"[b07dfe28221a7473041d65230be409d6cbfafbfc](https://github.com/sagemath/sagetrac-mirror/commit/b07dfe28221a7473041d65230be409d6cbfafbfc)\" to \"[beebcbcd43c2d7a9d024f142f5e3cb328fbc4036](https://github.com/sagemath/sagetrac-mirror/commit/beebcbcd43c2d7a9d024f142f5e3cb328fbc4036)\".",
    "created_at": "2016-04-07T09:30:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161142",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[b07dfe28221a7473041d65230be409d6cbfafbfc](https://github.com/sagemath/sagetrac-mirror/commit/b07dfe28221a7473041d65230be409d6cbfafbfc)" to "[beebcbcd43c2d7a9d024f142f5e3cb328fbc4036](https://github.com/sagemath/sagetrac-mirror/commit/beebcbcd43c2d7a9d024f142f5e3cb328fbc4036)".



---

archive/issue_comments_161143.json:
```json
{
    "body": "<a id='comment:87'>**Comment 87:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/beebcbcd43c2d7a9d024f142f5e3cb328fbc4036\">beebcbc</a></td><td><code>#13580: Added comment on timing in the doc</code></td></tr></table>\n",
    "created_at": "2016-04-07T09:30:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161143",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:87'>**Comment 87:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/beebcbcd43c2d7a9d024f142f5e3cb328fbc4036">beebcbc</a></td><td><code>#13580: Added comment on timing in the doc</code></td></tr></table>




---

archive/issue_comments_161144.json:
```json
{
    "body": "**Changing keywords** from \"map-reduce, days57\" to \"map-reduce, days57, days77\".",
    "created_at": "2016-04-07T09:35:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161144",
    "user": "https://github.com/hivert"
}
```

**Changing keywords** from "map-reduce, days57" to "map-reduce, days57, days77".



---

archive/issue_events_160723.json:
```json
{
    "actor": "https://github.com/hivert",
    "created_at": "2016-04-07T09:35:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13580#event-160723"
}
```



---

archive/issue_events_160724.json:
```json
{
    "actor": "https://github.com/hivert",
    "created_at": "2016-04-07T09:35:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13580#event-160724"
}
```



---

archive/issue_comments_161145.json:
```json
{
    "body": "<a id='comment:88'>**Comment 88:**</a>\nI just uploaded a patch with basically two implementation of `ActiveTaskCounter`: one using semaphore and which doesn't work on MACOS and one using semaphore for all POSIX compliant OSes. It should be ready for review.",
    "created_at": "2016-04-07T09:35:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161145",
    "user": "https://github.com/hivert"
}
```

<a id='comment:88'>**Comment 88:**</a>
I just uploaded a patch with basically two implementation of `ActiveTaskCounter`: one using semaphore and which doesn't work on MACOS and one using semaphore for all POSIX compliant OSes. It should be ready for review.



---

archive/issue_comments_161146.json:
```json
{
    "body": "<a id='comment:89'>**Comment 89:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/58eca2e4decb05733145b18e08f16120b8765a81\">58eca2e</a></td><td><code>#13580: Removed comment which is now in the doc</code></td></tr></table>\n",
    "created_at": "2016-04-07T13:02:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161146",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:89'>**Comment 89:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/58eca2e4decb05733145b18e08f16120b8765a81">58eca2e</a></td><td><code>#13580: Removed comment which is now in the doc</code></td></tr></table>




---

archive/issue_comments_161147.json:
```json
{
    "body": "**Changing commit** from \"[beebcbcd43c2d7a9d024f142f5e3cb328fbc4036](https://github.com/sagemath/sagetrac-mirror/commit/beebcbcd43c2d7a9d024f142f5e3cb328fbc4036)\" to \"[58eca2e4decb05733145b18e08f16120b8765a81](https://github.com/sagemath/sagetrac-mirror/commit/58eca2e4decb05733145b18e08f16120b8765a81)\".",
    "created_at": "2016-04-07T13:02:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161147",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[beebcbcd43c2d7a9d024f142f5e3cb328fbc4036](https://github.com/sagemath/sagetrac-mirror/commit/beebcbcd43c2d7a9d024f142f5e3cb328fbc4036)" to "[58eca2e4decb05733145b18e08f16120b8765a81](https://github.com/sagemath/sagetrac-mirror/commit/58eca2e4decb05733145b18e08f16120b8765a81)".



---

archive/issue_comments_161148.json:
```json
{
    "body": "**Changing commit** from \"[58eca2e4decb05733145b18e08f16120b8765a81](https://github.com/sagemath/sagetrac-mirror/commit/58eca2e4decb05733145b18e08f16120b8765a81)\" to \"[1badd8aec7efc3229cfdf76bffab3ad1f532bd33](https://github.com/sagemath/sagetrac-mirror/commit/1badd8aec7efc3229cfdf76bffab3ad1f532bd33)\".",
    "created_at": "2016-04-07T17:03:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161148",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[58eca2e4decb05733145b18e08f16120b8765a81](https://github.com/sagemath/sagetrac-mirror/commit/58eca2e4decb05733145b18e08f16120b8765a81)" to "[1badd8aec7efc3229cfdf76bffab3ad1f532bd33](https://github.com/sagemath/sagetrac-mirror/commit/1badd8aec7efc3229cfdf76bffab3ad1f532bd33)".



---

archive/issue_comments_161149.json:
```json
{
    "body": "<a id='comment:90'>**Comment 90:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1badd8aec7efc3229cfdf76bffab3ad1f532bd33\">1badd8a</a></td><td><code>#13580: Renamed ActiveTaskCounter(Posix)</code></td></tr></table>\n",
    "created_at": "2016-04-07T17:03:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161149",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:90'>**Comment 90:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1badd8aec7efc3229cfdf76bffab3ad1f532bd33">1badd8a</a></td><td><code>#13580: Renamed ActiveTaskCounter(Posix)</code></td></tr></table>




---

archive/issue_comments_161150.json:
```json
{
    "body": "<a id='comment:91'>**Comment 91:**</a>\nI get the following errors on OSX :\n\n```\nRunning doctests with ID 2016-04-07-19-23-55-8fd43b63.\nGit branch: 13580\nUsing --optional=dot2tex,mpir,python2,sage\nDoctesting 1 file using 2 threads.\nsage -t --long --warn-long 84.5 src/sage/parallel/map_reduce.py\n**********************************************************************\nFile \"src/sage/parallel/map_reduce.py\", line 727, in sage.parallel.map_reduce.ActiveTaskCounterPosix.__repr__\nFailed example:\n    ATC(4)\nExpected:\n    ActiveTaskCounter(value=4)\nGot:\n    <repr(<sage.parallel.map_reduce.ActiveTaskCounterPosix at 0x190d32e90>) failed: NotImplementedError>\n**********************************************************************\nFile \"src/sage/parallel/map_reduce.py\", line 743, in sage.parallel.map_reduce.ActiveTaskCounterPosix.task_start\nFailed example:\n    c = ATC(4); c\nExpected:\n    ActiveTaskCounter(value=4)\nGot:\n    <repr(<sage.parallel.map_reduce.ActiveTaskCounterPosix at 0x190d32e50>) failed: NotImplementedError>\n**********************************************************************\nFile \"src/sage/parallel/map_reduce.py\", line 745, in sage.parallel.map_reduce.ActiveTaskCounterPosix.task_start\nFailed example:\n    c.task_start()\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/slabbe/Applications/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/slabbe/Applications/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.parallel.map_reduce.ActiveTaskCounterPosix.task_start[2]>\", line 1, in <module>\n        c.task_start()\n      File \"/Users/slabbe/Applications/sage-git/local/lib/python2.7/site-packages/sage/parallel/map_reduce.py\", line 764, in task_start\n        return self._active_tasks.get_value()\n      File \"/Users/slabbe/Applications/sage-git/local/lib/python/multiprocessing/synchronize.py\", line 114, in get_value\n        return self._semlock._get_value()\n    NotImplementedError\n**********************************************************************\nFile \"src/sage/parallel/map_reduce.py\", line 747, in sage.parallel.map_reduce.ActiveTaskCounterPosix.task_start\nFailed example:\n    c\nExpected:\n    ActiveTaskCounter(value=5)\nGot:\n    <repr(<sage.parallel.map_reduce.ActiveTaskCounterPosix at 0x190d32e50>) failed: NotImplementedError>\n**********************************************************************\nFile \"src/sage/parallel/map_reduce.py\", line 755, in sage.parallel.map_reduce.ActiveTaskCounterPosix.task_start\nFailed example:\n    c\nExpected:\n    ActiveTaskCounter(value=0)\nGot:\n    <repr(<sage.parallel.map_reduce.ActiveTaskCounterPosix at 0x190d32f90>) failed: NotImplementedError>\n**********************************************************************\nFile \"src/sage/parallel/map_reduce.py\", line 778, in sage.parallel.map_reduce.ActiveTaskCounterPosix.task_done\nFailed example:\n    c = ATC(4); c\nExpected:\n    ActiveTaskCounter(value=4)\nGot:\n    <repr(<sage.parallel.map_reduce.ActiveTaskCounterPosix at 0x1026a5c10>) failed: NotImplementedError>\n**********************************************************************\nFile \"src/sage/parallel/map_reduce.py\", line 780, in sage.parallel.map_reduce.ActiveTaskCounterPosix.task_done\nFailed example:\n    c.task_done()\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/slabbe/Applications/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/slabbe/Applications/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.parallel.map_reduce.ActiveTaskCounterPosix.task_done[2]>\", line 1, in <module>\n        c.task_done()\n      File \"/Users/slabbe/Applications/sage-git/local/lib/python2.7/site-packages/sage/parallel/map_reduce.py\", line 796, in task_done\n        return self._active_tasks.get_value()\n      File \"/Users/slabbe/Applications/sage-git/local/lib/python/multiprocessing/synchronize.py\", line 114, in get_value\n        return self._semlock._get_value()\n    NotImplementedError\n**********************************************************************\nFile \"src/sage/parallel/map_reduce.py\", line 782, in sage.parallel.map_reduce.ActiveTaskCounterPosix.task_done\nFailed example:\n    c\nExpected:\n    ActiveTaskCounter(value=3)\nGot:\n    <repr(<sage.parallel.map_reduce.ActiveTaskCounterPosix at 0x1026a5c10>) failed: NotImplementedError>\n**********************************************************************\nFile \"src/sage/parallel/map_reduce.py\", line 805, in sage.parallel.map_reduce.ActiveTaskCounterPosix.abort\nFailed example:\n    c = ATC(4); c\nExpected:\n    ActiveTaskCounter(value=4)\nGot:\n    <repr(<sage.parallel.map_reduce.ActiveTaskCounterPosix at 0x1026a5910>) failed: NotImplementedError>\n**********************************************************************\nFile \"src/sage/parallel/map_reduce.py\", line 808, in sage.parallel.map_reduce.ActiveTaskCounterPosix.abort\nFailed example:\n    c\nExpected:\n    ActiveTaskCounter(value=0)\nGot:\n    <repr(<sage.parallel.map_reduce.ActiveTaskCounterPosix at 0x1026a5910>) failed: NotImplementedError>\n**********************************************************************\n4 items had failures:\n   1 of   3 in sage.parallel.map_reduce.ActiveTaskCounterPosix.__repr__\n   2 of   5 in sage.parallel.map_reduce.ActiveTaskCounterPosix.abort\n   3 of   7 in sage.parallel.map_reduce.ActiveTaskCounterPosix.task_done\n   4 of   8 in sage.parallel.map_reduce.ActiveTaskCounterPosix.task_start\n    [296 tests, 10 failures, 33.64 s]\n----------------------------------------------------------------------\nsage -t --long --warn-long 84.5 src/sage/parallel/map_reduce.py  # 10 doctests failed\n----------------------------------------------------------------------\nTotal time for all tests: 33.9 seconds\n    cpu time: 5.8 seconds\n    cumulative wall time: 33.6 seconds\n```",
    "created_at": "2016-04-07T17:27:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161150",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:91'>**Comment 91:**</a>
I get the following errors on OSX :

```
Running doctests with ID 2016-04-07-19-23-55-8fd43b63.
Git branch: 13580
Using --optional=dot2tex,mpir,python2,sage
Doctesting 1 file using 2 threads.
sage -t --long --warn-long 84.5 src/sage/parallel/map_reduce.py
**********************************************************************
File "src/sage/parallel/map_reduce.py", line 727, in sage.parallel.map_reduce.ActiveTaskCounterPosix.__repr__
Failed example:
    ATC(4)
Expected:
    ActiveTaskCounter(value=4)
Got:
    <repr(<sage.parallel.map_reduce.ActiveTaskCounterPosix at 0x190d32e90>) failed: NotImplementedError>
**********************************************************************
File "src/sage/parallel/map_reduce.py", line 743, in sage.parallel.map_reduce.ActiveTaskCounterPosix.task_start
Failed example:
    c = ATC(4); c
Expected:
    ActiveTaskCounter(value=4)
Got:
    <repr(<sage.parallel.map_reduce.ActiveTaskCounterPosix at 0x190d32e50>) failed: NotImplementedError>
**********************************************************************
File "src/sage/parallel/map_reduce.py", line 745, in sage.parallel.map_reduce.ActiveTaskCounterPosix.task_start
Failed example:
    c.task_start()
Exception raised:
    Traceback (most recent call last):
      File "/Users/slabbe/Applications/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/slabbe/Applications/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.parallel.map_reduce.ActiveTaskCounterPosix.task_start[2]>", line 1, in <module>
        c.task_start()
      File "/Users/slabbe/Applications/sage-git/local/lib/python2.7/site-packages/sage/parallel/map_reduce.py", line 764, in task_start
        return self._active_tasks.get_value()
      File "/Users/slabbe/Applications/sage-git/local/lib/python/multiprocessing/synchronize.py", line 114, in get_value
        return self._semlock._get_value()
    NotImplementedError
**********************************************************************
File "src/sage/parallel/map_reduce.py", line 747, in sage.parallel.map_reduce.ActiveTaskCounterPosix.task_start
Failed example:
    c
Expected:
    ActiveTaskCounter(value=5)
Got:
    <repr(<sage.parallel.map_reduce.ActiveTaskCounterPosix at 0x190d32e50>) failed: NotImplementedError>
**********************************************************************
File "src/sage/parallel/map_reduce.py", line 755, in sage.parallel.map_reduce.ActiveTaskCounterPosix.task_start
Failed example:
    c
Expected:
    ActiveTaskCounter(value=0)
Got:
    <repr(<sage.parallel.map_reduce.ActiveTaskCounterPosix at 0x190d32f90>) failed: NotImplementedError>
**********************************************************************
File "src/sage/parallel/map_reduce.py", line 778, in sage.parallel.map_reduce.ActiveTaskCounterPosix.task_done
Failed example:
    c = ATC(4); c
Expected:
    ActiveTaskCounter(value=4)
Got:
    <repr(<sage.parallel.map_reduce.ActiveTaskCounterPosix at 0x1026a5c10>) failed: NotImplementedError>
**********************************************************************
File "src/sage/parallel/map_reduce.py", line 780, in sage.parallel.map_reduce.ActiveTaskCounterPosix.task_done
Failed example:
    c.task_done()
Exception raised:
    Traceback (most recent call last):
      File "/Users/slabbe/Applications/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/slabbe/Applications/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.parallel.map_reduce.ActiveTaskCounterPosix.task_done[2]>", line 1, in <module>
        c.task_done()
      File "/Users/slabbe/Applications/sage-git/local/lib/python2.7/site-packages/sage/parallel/map_reduce.py", line 796, in task_done
        return self._active_tasks.get_value()
      File "/Users/slabbe/Applications/sage-git/local/lib/python/multiprocessing/synchronize.py", line 114, in get_value
        return self._semlock._get_value()
    NotImplementedError
**********************************************************************
File "src/sage/parallel/map_reduce.py", line 782, in sage.parallel.map_reduce.ActiveTaskCounterPosix.task_done
Failed example:
    c
Expected:
    ActiveTaskCounter(value=3)
Got:
    <repr(<sage.parallel.map_reduce.ActiveTaskCounterPosix at 0x1026a5c10>) failed: NotImplementedError>
**********************************************************************
File "src/sage/parallel/map_reduce.py", line 805, in sage.parallel.map_reduce.ActiveTaskCounterPosix.abort
Failed example:
    c = ATC(4); c
Expected:
    ActiveTaskCounter(value=4)
Got:
    <repr(<sage.parallel.map_reduce.ActiveTaskCounterPosix at 0x1026a5910>) failed: NotImplementedError>
**********************************************************************
File "src/sage/parallel/map_reduce.py", line 808, in sage.parallel.map_reduce.ActiveTaskCounterPosix.abort
Failed example:
    c
Expected:
    ActiveTaskCounter(value=0)
Got:
    <repr(<sage.parallel.map_reduce.ActiveTaskCounterPosix at 0x1026a5910>) failed: NotImplementedError>
**********************************************************************
4 items had failures:
   1 of   3 in sage.parallel.map_reduce.ActiveTaskCounterPosix.__repr__
   2 of   5 in sage.parallel.map_reduce.ActiveTaskCounterPosix.abort
   3 of   7 in sage.parallel.map_reduce.ActiveTaskCounterPosix.task_done
   4 of   8 in sage.parallel.map_reduce.ActiveTaskCounterPosix.task_start
    [296 tests, 10 failures, 33.64 s]
----------------------------------------------------------------------
sage -t --long --warn-long 84.5 src/sage/parallel/map_reduce.py  # 10 doctests failed
----------------------------------------------------------------------
Total time for all tests: 33.9 seconds
    cpu time: 5.8 seconds
    cumulative wall time: 33.6 seconds
```



---

archive/issue_events_160725.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2016-04-07T17:27:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13580#event-160725"
}
```



---

archive/issue_events_160726.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2016-04-07T17:27:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13580#event-160726"
}
```



---

archive/issue_comments_161151.json:
```json
{
    "body": "**Changing commit** from \"[1badd8aec7efc3229cfdf76bffab3ad1f532bd33](https://github.com/sagemath/sagetrac-mirror/commit/1badd8aec7efc3229cfdf76bffab3ad1f532bd33)\" to \"[46cbab9d81890649c3d056f47ed62065bcb04ca3](https://github.com/sagemath/sagetrac-mirror/commit/46cbab9d81890649c3d056f47ed62065bcb04ca3)\".",
    "created_at": "2016-04-07T17:57:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161151",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[1badd8aec7efc3229cfdf76bffab3ad1f532bd33](https://github.com/sagemath/sagetrac-mirror/commit/1badd8aec7efc3229cfdf76bffab3ad1f532bd33)" to "[46cbab9d81890649c3d056f47ed62065bcb04ca3](https://github.com/sagemath/sagetrac-mirror/commit/46cbab9d81890649c3d056f47ed62065bcb04ca3)".



---

archive/issue_comments_161152.json:
```json
{
    "body": "<a id='comment:92'>**Comment 92:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/46cbab9d81890649c3d056f47ed62065bcb04ca3\">46cbab9</a></td><td><code>13580: Fixed doctests to pass on Darwin</code></td></tr></table>\n",
    "created_at": "2016-04-07T17:57:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161152",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:92'>**Comment 92:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/46cbab9d81890649c3d056f47ed62065bcb04ca3">46cbab9</a></td><td><code>13580: Fixed doctests to pass on Darwin</code></td></tr></table>




---

archive/issue_comments_161153.json:
```json
{
    "body": "<a id='comment:93'>**Comment 93:**</a>\nIt works now! : \n\n```\nUsing --optional=dot2tex,mpir,python2,sage\nDoctesting 1 file using 2 threads.\nsage -t --warn-long 84.3 src/sage/parallel/map_reduce.py\n    [296 tests, 32.56 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\n```",
    "created_at": "2016-04-07T18:00:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161153",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:93'>**Comment 93:**</a>
It works now! : 

```
Using --optional=dot2tex,mpir,python2,sage
Doctesting 1 file using 2 threads.
sage -t --warn-long 84.3 src/sage/parallel/map_reduce.py
    [296 tests, 32.56 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
```



---

archive/issue_comments_161154.json:
```json
{
    "body": "<a id='comment:94'>**Comment 94:**</a>\nsome typos:\n\n`compute the the cardinality`\n\n`its job. Non only mapping` -> `Not only`\n\n`method so that to compute the number of element you only need to call::` -> wrap the line\n\n`precedingly by we only ` -> `previously`? , `but` \n\nI would suggest to replace this:\n\n```\n        OUTPUT: Calling :meth:`task_done` decrement the counter and returns\n        its value after the decrementation.\n```\n\nby\n\n```\n        OUTPUT: \n\n        Calling :meth:`task_done` decrement the counter and returns\n        its value after the decrementation.\n```\n\nto follow sage standards (more than once).\n\nAlso, I would replace this:\n\n```\nINPUT: ``o`` -- a node\n```\n\nby\n\n```\nINPUT: \n\n- ``o`` -- a node\n```\n\nto follow sage standards (more than once).\n\n`the computation are done i` -> s missing",
    "created_at": "2016-04-07T18:29:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161154",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:94'>**Comment 94:**</a>
some typos:

`compute the the cardinality`

`its job. Non only mapping` -> `Not only`

`method so that to compute the number of element you only need to call::` -> wrap the line

`precedingly by we only ` -> `previously`? , `but` 

I would suggest to replace this:

```
        OUTPUT: Calling :meth:`task_done` decrement the counter and returns
        its value after the decrementation.
```

by

```
        OUTPUT: 

        Calling :meth:`task_done` decrement the counter and returns
        its value after the decrementation.
```

to follow sage standards (more than once).

Also, I would replace this:

```
INPUT: ``o`` -- a node
```

by

```
INPUT: 

- ``o`` -- a node
```

to follow sage standards (more than once).

`the computation are done i` -> s missing



---

archive/issue_comments_161155.json:
```json
{
    "body": "**Changing commit** from \"[46cbab9d81890649c3d056f47ed62065bcb04ca3](https://github.com/sagemath/sagetrac-mirror/commit/46cbab9d81890649c3d056f47ed62065bcb04ca3)\" to \"[134c1fad85dd50fa28528adc343bad759b174cc6](https://github.com/sagemath/sagetrac-mirror/commit/134c1fad85dd50fa28528adc343bad759b174cc6)\".",
    "created_at": "2016-04-07T21:11:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161155",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[46cbab9d81890649c3d056f47ed62065bcb04ca3](https://github.com/sagemath/sagetrac-mirror/commit/46cbab9d81890649c3d056f47ed62065bcb04ca3)" to "[134c1fad85dd50fa28528adc343bad759b174cc6](https://github.com/sagemath/sagetrac-mirror/commit/134c1fad85dd50fa28528adc343bad759b174cc6)".



---

archive/issue_comments_161156.json:
```json
{
    "body": "<a id='comment:95'>**Comment 95:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/134c1fad85dd50fa28528adc343bad759b174cc6\">134c1fa</a></td><td><code>13580: doc rereading</code></td></tr></table>\n",
    "created_at": "2016-04-07T21:11:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161156",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:95'>**Comment 95:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/134c1fad85dd50fa28528adc343bad759b174cc6">134c1fa</a></td><td><code>13580: doc rereading</code></td></tr></table>




---

archive/issue_comments_161157.json:
```json
{
    "body": "<a id='comment:96'>**Comment 96:**</a>\nI am wondering what else is currently needed for this ticket before a positive review?\n\nAlso, what are the current plans to cythonize `SearchForest` and the parallel reduce map?",
    "created_at": "2016-04-07T23:02:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161157",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:96'>**Comment 96:**</a>
I am wondering what else is currently needed for this ticket before a positive review?

Also, what are the current plans to cythonize `SearchForest` and the parallel reduce map?



---

archive/issue_comments_161158.json:
```json
{
    "body": "<a id='comment:97'>**Comment 97:**</a>\nWhat I had in mind for the next step to do was to move the `SearchForest` code from backtrack file into the `recursivelyenumerated_set.pyx` file *and* into the hierarchy of `RecEnumSet` classes so that it benefits for example of methods like the newly added `to_digraph`.",
    "created_at": "2016-04-08T00:43:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161158",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:97'>**Comment 97:**</a>
What I had in mind for the next step to do was to move the `SearchForest` code from backtrack file into the `recursivelyenumerated_set.pyx` file *and* into the hierarchy of `RecEnumSet` classes so that it benefits for example of methods like the newly added `to_digraph`.



---

archive/issue_events_160727.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2016-04-08T00:43:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13580#event-160727"
}
```



---

archive/issue_events_160728.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2016-04-08T00:43:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13580#event-160728"
}
```



---

archive/issue_comments_161159.json:
```json
{
    "body": "<a id='comment:98'>**Comment 98:**</a>\nReplying to [@tscrim](#comment%3A96):\n> I am wondering what else is currently needed for this ticket before a positive review?\n\nSebastien is currently rereading it. I think he is very close to put a positive review.\n\n> Also, what are the current plans to cythonize `SearchForest` and the parallel reduce map?\n\nConcerning Cythonization of map-reduce, my current opinion is that, the code\nis designed for case where the computation of the children is costly. In this\ncase the cost of the current code should be negligible. There are a lot of\nfunction calls, I'm using Python synchronization primitive, but most\nimportantly, communication is are by pickling/unpickling which is very\nslow. So the idea is to reduce at most at possible the communication, but\nwithout drastically changing the technology, I don't think you get a large\nimprovement without great effort. You'll need to rewrite all the communication\nprimitive and to inline the function call to the client code.\n\nOn the other hand, If you are allowed to write the code directly in C/C++\n(which is the case for small basic objects), then the Cilk extension of C is\nwonderful. It's a small extension which is supported by GCC since version 5,\nICC and in recent CLANG (https://cilkplus.github.io/). I've several code where\nI've been able to have very large speedup. See\ne.g. https://hal.archives-ouvertes.fr/hal-00823339/file/article.pdf if you are\ncurious.\n\nNow if you have a specific use case, I'll be happy to experiment.",
    "created_at": "2016-04-08T01:05:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161159",
    "user": "https://github.com/hivert"
}
```

<a id='comment:98'>**Comment 98:**</a>
Replying to [@tscrim](#comment%3A96):
> I am wondering what else is currently needed for this ticket before a positive review?

Sebastien is currently rereading it. I think he is very close to put a positive review.

> Also, what are the current plans to cythonize `SearchForest` and the parallel reduce map?

Concerning Cythonization of map-reduce, my current opinion is that, the code
is designed for case where the computation of the children is costly. In this
case the cost of the current code should be negligible. There are a lot of
function calls, I'm using Python synchronization primitive, but most
importantly, communication is are by pickling/unpickling which is very
slow. So the idea is to reduce at most at possible the communication, but
without drastically changing the technology, I don't think you get a large
improvement without great effort. You'll need to rewrite all the communication
primitive and to inline the function call to the client code.

On the other hand, If you are allowed to write the code directly in C/C++
(which is the case for small basic objects), then the Cilk extension of C is
wonderful. It's a small extension which is supported by GCC since version 5,
ICC and in recent CLANG (https://cilkplus.github.io/). I've several code where
I've been able to have very large speedup. See
e.g. https://hal.archives-ouvertes.fr/hal-00823339/file/article.pdf if you are
curious.

Now if you have a specific use case, I'll be happy to experiment.



---

archive/issue_comments_161160.json:
```json
{
    "body": "<a id='comment:99'>**Comment 99:**</a>\nReplying to [@seblabbe](#comment%3A97):\n> What I had in mind for the next step to do was to move the `SearchForest` code from backtrack file into the `recursivelyenumerated_set.pyx` file *and* into the hierarchy of `RecEnumSet` classes so that it benefits for example of methods like the newly added `to_digraph`.\n\nThat was also the next goal in my mind.",
    "created_at": "2016-04-08T01:07:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161160",
    "user": "https://github.com/hivert"
}
```

<a id='comment:99'>**Comment 99:**</a>
Replying to [@seblabbe](#comment%3A97):
> What I had in mind for the next step to do was to move the `SearchForest` code from backtrack file into the `recursivelyenumerated_set.pyx` file *and* into the hierarchy of `RecEnumSet` classes so that it benefits for example of methods like the newly added `to_digraph`.

That was also the next goal in my mind.



---

archive/issue_comments_161161.json:
```json
{
    "body": "<a id='comment:0'>**Comment 0:**</a>\nSee #16351",
    "created_at": "2016-04-08T08:28:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161161",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:0'>**Comment 0:**</a>
See #16351



---

archive/issue_events_160729.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-04-08T09:28:57Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13580#event-160729"
}
```



---

archive/issue_events_160730.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-04-08T09:28:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "milestone_number": null,
    "milestone_title": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13580#event-160730"
}
```



---

archive/issue_comments_161162.json:
```json
{
    "body": "<a id='comment:101'>**Comment 101:**</a>\nReplying to [@hivert](#comment%3A98):\n> Replying to [@tscrim](#comment%3A96):\n> > Also, what are the current plans to cythonize `SearchForest` and the parallel reduce map?\n\n> \n> Concerning Cythonization of map-reduce, my current opinion is that, the code\n> is designed for case where the computation of the children is costly. In this\n> case the cost of the current code should be negligible. There are a lot of\n> function calls, I'm using Python synchronization primitive, but most\n> importantly, communication is are by pickling/unpickling which is very\n> slow. So the idea is to reduce at most at possible the communication, but\n> without drastically changing the technology, I don't think you get a large\n> improvement without great effort. You'll need to rewrite all the communication\n> primitive and to inline the function call to the client code.\n> \n> On the other hand, If you are allowed to write the code directly in C/C++\n> (which is the case for small basic objects), then the Cilk extension of C is\n> wonderful. It's a small extension which is supported by GCC since version 5,\n> ICC and in recent CLANG (https://cilkplus.github.io/). I've several code where\n> I've been able to have very large speedup. See\n> e.g. https://hal.archives-ouvertes.fr/hal-00823339/file/article.pdf if you are\n> curious.\n> \n> Now if you have a specific use case, I'll be happy to experiment.\n\nChristian, Vivien, and I are working on trying to speed up the iteration of finite Coxeter groups by using (subgroups of) permutation groups and the iterator method of generic Coxeter groups, which uses a `SearchForest` (see #11187 and the `CoxeterGroups` category). Our goal is to try and match or beat GAP3 iteration time (which we are about ~30x slower).\n\nWe are in the process pushing our successor computation code to Cython and some of our other methods, but we would appreciate any insights you have.\n\nYet the code on this ticket will definitely help with that. Thank you for finishing it.",
    "created_at": "2016-04-08T09:28:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161162",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:101'>**Comment 101:**</a>
Replying to [@hivert](#comment%3A98):
> Replying to [@tscrim](#comment%3A96):
> > Also, what are the current plans to cythonize `SearchForest` and the parallel reduce map?

> 
> Concerning Cythonization of map-reduce, my current opinion is that, the code
> is designed for case where the computation of the children is costly. In this
> case the cost of the current code should be negligible. There are a lot of
> function calls, I'm using Python synchronization primitive, but most
> importantly, communication is are by pickling/unpickling which is very
> slow. So the idea is to reduce at most at possible the communication, but
> without drastically changing the technology, I don't think you get a large
> improvement without great effort. You'll need to rewrite all the communication
> primitive and to inline the function call to the client code.
> 
> On the other hand, If you are allowed to write the code directly in C/C++
> (which is the case for small basic objects), then the Cilk extension of C is
> wonderful. It's a small extension which is supported by GCC since version 5,
> ICC and in recent CLANG (https://cilkplus.github.io/). I've several code where
> I've been able to have very large speedup. See
> e.g. https://hal.archives-ouvertes.fr/hal-00823339/file/article.pdf if you are
> curious.
> 
> Now if you have a specific use case, I'll be happy to experiment.

Christian, Vivien, and I are working on trying to speed up the iteration of finite Coxeter groups by using (subgroups of) permutation groups and the iterator method of generic Coxeter groups, which uses a `SearchForest` (see #11187 and the `CoxeterGroups` category). Our goal is to try and match or beat GAP3 iteration time (which we are about ~30x slower).

We are in the process pushing our successor computation code to Cython and some of our other methods, but we would appreciate any insights you have.

Yet the code on this ticket will definitely help with that. Thank you for finishing it.



---

archive/issue_comments_161163.json:
```json
{
    "body": "<a id='comment:102'>**Comment 102:**</a>\nReplying to [@tscrim](#comment%3A101):\n> Christian, Vivien, and I are working on trying to speed up the iteration of\n> finite Coxeter groups by using (subgroups of) permutation groups and the\n> iterator method of generic Coxeter groups, which uses a `SearchForest` (see\n> #11187 and the `CoxeterGroups` category). Our goal is to try and match or\n> beat GAP3 iteration time (which we are about ~30x slower).\n\nI'll be both very happy and interested to have usecase for this code.\n\n> We are in the process pushing our successor computation code to Cython and\n> some of our other methods, but we would appreciate any insights you have.\n\nDo you have a typical example relying on `SearchForest` of code on top of\n#11187 that I can profile ? Note that I included in the documentation of\nmap_reduce.py a guide on how to profile the parallel code. I'd like to measure\nthe proportion of time that is spend on Coxeter code one one hand and on the\nparallel infrastructure on the other.\n\n\nNow, concerning coxeter group, I'm quite sure that rewriting part of the code\nin C/C++ and using advanced parallel stuff (AVX instruction set + SIMD) you\ncan get speedup a large as several hundreds and even thousand ! As a witness\non https://github.com/hivert/IVMPG I wrote a code whose goal is to enumerate\ninteger vector modulo permutation group. Compared to the code we have in Sage\nwhich has been Cythonized and optimized by Simon King I manage to get speedup\na large as x2000 ! I need help on the build system to be able to distribute\nit. I'm pretty sure the code there is very similar to what you need in Coxeter\ngroups.\n\nBy the way, should we transfer this discussion on #11187 ?",
    "created_at": "2016-04-08T09:51:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161163",
    "user": "https://github.com/hivert"
}
```

<a id='comment:102'>**Comment 102:**</a>
Replying to [@tscrim](#comment%3A101):
> Christian, Vivien, and I are working on trying to speed up the iteration of
> finite Coxeter groups by using (subgroups of) permutation groups and the
> iterator method of generic Coxeter groups, which uses a `SearchForest` (see
> #11187 and the `CoxeterGroups` category). Our goal is to try and match or
> beat GAP3 iteration time (which we are about ~30x slower).

I'll be both very happy and interested to have usecase for this code.

> We are in the process pushing our successor computation code to Cython and
> some of our other methods, but we would appreciate any insights you have.

Do you have a typical example relying on `SearchForest` of code on top of
#11187 that I can profile ? Note that I included in the documentation of
map_reduce.py a guide on how to profile the parallel code. I'd like to measure
the proportion of time that is spend on Coxeter code one one hand and on the
parallel infrastructure on the other.


Now, concerning coxeter group, I'm quite sure that rewriting part of the code
in C/C++ and using advanced parallel stuff (AVX instruction set + SIMD) you
can get speedup a large as several hundreds and even thousand ! As a witness
on https://github.com/hivert/IVMPG I wrote a code whose goal is to enumerate
integer vector modulo permutation group. Compared to the code we have in Sage
which has been Cythonized and optimized by Simon King I manage to get speedup
a large as x2000 ! I need help on the build system to be able to distribute
it. I'm pretty sure the code there is very similar to what you need in Coxeter
groups.

By the way, should we transfer this discussion on #11187 ?



---

archive/issue_comments_161164.json:
```json
{
    "body": "<a id='comment:103'>**Comment 103:**</a>\nReplying to [@hivert](#comment%3A102):\n> By the way, should we transfer this discussion on #11187 ?\n\nDone.",
    "created_at": "2016-04-08T10:07:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161164",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:103'>**Comment 103:**</a>
Replying to [@hivert](#comment%3A102):
> By the way, should we transfer this discussion on #11187 ?

Done.



---

archive/issue_events_160731.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-04-08T22:40:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13580#event-160731"
}
```



---

archive/issue_events_160732.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "a8c9bc05f2d37fe05ab545a0ed59e1f38b6c6889",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-04-08T22:40:20Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13580#event-160732"
}
```



---

archive/issue_comments_161165.json:
```json
{
    "body": "**Changing branch** from \"[u/hivert/ticket/13580](https://github.com/sagemath/sagetrac-mirror/tree/u/hivert/ticket/13580)\" to \"[134c1fad85dd50fa28528adc343bad759b174cc6](https://github.com/sagemath/sagetrac-mirror/commit/134c1fad85dd50fa28528adc343bad759b174cc6)\".",
    "created_at": "2016-04-08T22:40:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161165",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/hivert/ticket/13580](https://github.com/sagemath/sagetrac-mirror/tree/u/hivert/ticket/13580)" to "[134c1fad85dd50fa28528adc343bad759b174cc6](https://github.com/sagemath/sagetrac-mirror/commit/134c1fad85dd50fa28528adc343bad759b174cc6)".



---

archive/issue_comments_161166.json:
```json
{
    "body": "<a id='comment:5'>**Comment 5:**</a>\nThis ticket breaks the doctests on my patchbot, i do not know whether it is because it is run from a VM or from a 32-bit system, see http://patchbot.sagemath.org/log/0/debian/8.3/i686/3.16.0-4-586/tmonteil-debian-jessie-32/2016-04-15%2012:13:01?short",
    "created_at": "2016-04-15T15:39:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161166",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<a id='comment:5'>**Comment 5:**</a>
This ticket breaks the doctests on my patchbot, i do not know whether it is because it is run from a VM or from a 32-bit system, see http://patchbot.sagemath.org/log/0/debian/8.3/i686/3.16.0-4-586/tmonteil-debian-jessie-32/2016-04-15%2012:13:01?short



---

archive/issue_comments_161167.json:
```json
{
    "body": "**Changing commit** from \"[134c1fad85dd50fa28528adc343bad759b174cc6](https://github.com/sagemath/sagetrac-mirror/commit/134c1fad85dd50fa28528adc343bad759b174cc6)\" to \"\".",
    "created_at": "2016-04-15T15:39:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161167",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

**Changing commit** from "[134c1fad85dd50fa28528adc343bad759b174cc6](https://github.com/sagemath/sagetrac-mirror/commit/134c1fad85dd50fa28528adc343bad759b174cc6)" to "".



---

archive/issue_comments_161168.json:
```json
{
    "body": "<a id='comment:6'>**Comment 6:**</a>\nNote also that the VM emulates a \"Pentium III (Katmai)\"",
    "created_at": "2016-04-15T15:44:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161168",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<a id='comment:6'>**Comment 6:**</a>
Note also that the VM emulates a "Pentium III (Katmai)"



---

archive/issue_comments_161169.json:
```json
{
    "body": "<a id='comment:107'>**Comment 107:**</a>\nReplying to [tmonteil](#comment%3A105):\n> This ticket breaks the doctests on my patchbot, i do not know whether it is because it is run from a VM or from a 32-bit system, see http://patchbot.sagemath.org/log/0/debian/8.3/i686/3.16.0-4-586/tmonteil-debian-jessie-32/2016-04-15%2012:13:01?short\n\nFrom the error message, it is neither because of 32 bits nor because of the VM but because your (virtual) machine has only one core. The goal of the patch is to distribute computation on several cores. The doctest assumes that your machine has at least 2 cores. I should fix that. Though I'm not sure what to do on those kind of machine. Pretend that they are two core and let the computation run on those two cores ?",
    "created_at": "2016-04-15T20:01:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161169",
    "user": "https://github.com/hivert"
}
```

<a id='comment:107'>**Comment 107:**</a>
Replying to [tmonteil](#comment%3A105):
> This ticket breaks the doctests on my patchbot, i do not know whether it is because it is run from a VM or from a 32-bit system, see http://patchbot.sagemath.org/log/0/debian/8.3/i686/3.16.0-4-586/tmonteil-debian-jessie-32/2016-04-15%2012:13:01?short

From the error message, it is neither because of 32 bits nor because of the VM but because your (virtual) machine has only one core. The goal of the patch is to distribute computation on several cores. The doctest assumes that your machine has at least 2 cores. I should fix that. Though I'm not sure what to do on those kind of machine. Pretend that they are two core and let the computation run on those two cores ?



---

archive/issue_comments_161170.json:
```json
{
    "body": "<a id='comment:108'>**Comment 108:**</a>\nReplying to [@hivert](#comment%3A107):\n> From the error message, it is neither because of 32 bits nor because of the VM but because your (virtual) machine has only one core. The goal of the patch is to distribute computation on several cores. The doctest assumes that your machine has at least 2 cores. I should fix that. Though I'm not sure what to do on those kind of machine. Pretend that they are two core and let the computation run on those two cores ?\n\nI just checked that I get the very same errors on my machine pretending that it has only one core.",
    "created_at": "2016-04-15T20:16:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161170",
    "user": "https://github.com/hivert"
}
```

<a id='comment:108'>**Comment 108:**</a>
Replying to [@hivert](#comment%3A107):
> From the error message, it is neither because of 32 bits nor because of the VM but because your (virtual) machine has only one core. The goal of the patch is to distribute computation on several cores. The doctest assumes that your machine has at least 2 cores. I should fix that. Though I'm not sure what to do on those kind of machine. Pretend that they are two core and let the computation run on those two cores ?

I just checked that I get the very same errors on my machine pretending that it has only one core.



---

archive/issue_comments_161171.json:
```json
{
    "body": "<a id='comment:9'>**Comment 9:**</a>\nOK thanks for isolating the culplrit, i made #20449 as a follwup.",
    "created_at": "2016-04-15T20:41:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13580#issuecomment-161171",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<a id='comment:9'>**Comment 9:**</a>
OK thanks for isolating the culplrit, i made #20449 as a follwup.
