# Issue 13461: Another WeylCharacterRing speedup

archive/issues_013289.json:
```json
{
    "body": "After trac_13461-demazure-speedup.patch, if a WeylCharacterRing is created with style=\"coroots\",\ncharacters are computed using not the Freudenthal multiplicity formula, but\nrather the Demazure character formula. This can be done using only integer\naddition and subtraction. If we run `sage -t --long weyl_characters.py`,\nit is more than twice as fast (26 seconds versus 69 seconds) as previously.\nIf we omit `--long` it is slightly slower, so there is a speedup for\nbig computations and a slight penalty for small ones.\n\nDemazure characters are added as a method of WeylCharacterRing and the\nDemazure operators and Demazure-Lusztig operators are implemented as methods \nof WeightRing elements.\n\nFor documentation see:\n\nhttp://sporadic.stanford.edu/bump/reference-5.4.beta1/sage/combinat/root_system/weyl_characters.html\n\nApply:\n\n```\ntrac_13461-demazure-speedup.patch\n```\n\nAssignee: @dwbump\n\nCC:  sage-combinat\n\nKeywords: Weyl character ring, Demazure characters, Demazure-Lusztig operators\n\nReviewer: Anne Schilling\n\nAuthor: Daniel Bump\n\nMerged: sage-5.5.beta0\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/13461\n\n",
    "closed_at": "2012-10-17T21:00:54Z",
    "created_at": "2012-09-13T19:42:47Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.5",
    "title": "Another WeylCharacterRing speedup",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13461",
    "user": "https://github.com/dwbump"
}
```
After trac_13461-demazure-speedup.patch, if a WeylCharacterRing is created with style="coroots",
characters are computed using not the Freudenthal multiplicity formula, but
rather the Demazure character formula. This can be done using only integer
addition and subtraction. If we run `sage -t --long weyl_characters.py`,
it is more than twice as fast (26 seconds versus 69 seconds) as previously.
If we omit `--long` it is slightly slower, so there is a speedup for
big computations and a slight penalty for small ones.

Demazure characters are added as a method of WeylCharacterRing and the
Demazure operators and Demazure-Lusztig operators are implemented as methods 
of WeightRing elements.

For documentation see:

http://sporadic.stanford.edu/bump/reference-5.4.beta1/sage/combinat/root_system/weyl_characters.html

Apply:

```
trac_13461-demazure-speedup.patch
```

Assignee: @dwbump

CC:  sage-combinat

Keywords: Weyl character ring, Demazure characters, Demazure-Lusztig operators

Reviewer: Anne Schilling

Author: Daniel Bump

Merged: sage-5.5.beta0

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/13461





---

archive/issue_comments_173615.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -5,6 +5,9 @@\n it is more than twice as fast (26 seconds versus 69 seconds) as previously.\n If we omit \\`--long\\` it is slightly slower, so there is a speedup for\n big computations and a slight penalty for small ones.\n+\n+Demazure characters are added as a method of WeylCharacterRing and the\n+Demazure operators are implemented as methods of WeightRing elements.\n \n Work_Issues: needs testing and tweaking\n \n```\n",
    "created_at": "2012-09-17T00:52:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13461#issuecomment-173615",
    "user": "https://github.com/dwbump"
}
```

Description changed:
```diff
--- 
+++ 
@@ -5,6 +5,9 @@
 it is more than twice as fast (26 seconds versus 69 seconds) as previously.
 If we omit \`--long\` it is slightly slower, so there is a speedup for
 big computations and a slight penalty for small ones.
+
+Demazure characters are added as a method of WeylCharacterRing and the
+Demazure operators are implemented as methods of WeightRing elements.
 
 Work_Issues: needs testing and tweaking
 
```




---

archive/issue_comments_173616.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-09-17T00:52:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13461#issuecomment-173616",
    "user": "https://github.com/dwbump"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_173617.json:
```json
{
    "body": "<a id='comment:2'></a>Apply trac_13461-demazure-speedup.patch",
    "created_at": "2012-09-17T00:54:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13461#issuecomment-173617",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:2'></a>Apply trac_13461-demazure-speedup.patch



---

archive/issue_comments_173618.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,18 @@\n+After trac_13461-demazure-speedup.patch, if a WeylCharacterRing is created with style=\"coroots\",\n+characters are computed using not the Freudenthal multiplicity formula, but\n+rather the Demazure character formula. This can be done using only integer\n+addition and subtraction. If we run \\`sage -t --long weyl_characters.py\\`,\n+it is more than twice as fast (26 seconds versus 69 seconds) as previously.\n+If we omit \\`--long\\` it is slightly slower, so there is a speedup for\n+big computations and a slight penalty for small ones.\n \n+Demazure characters are added as a method of WeylCharacterRing and the\n+Demazure operators are implemented as methods of WeightRing elements.\n+\n+The second patch trac_13461-demazure-lusztig.patch implements Demazure-Lusztig\n+operators as a method of the weight ring. For documentation see:\n+\n+http://sporadic.stanford.edu/bump/reference-5.4.beta1/sage/combinat/root_system/weyl_characters.html\n \n Work_Issues: needs testing and tweaking\n \n```\n",
    "created_at": "2012-09-18T23:03:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13461#issuecomment-173618",
    "user": "https://github.com/dwbump"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,18 @@
+After trac_13461-demazure-speedup.patch, if a WeylCharacterRing is created with style="coroots",
+characters are computed using not the Freudenthal multiplicity formula, but
+rather the Demazure character formula. This can be done using only integer
+addition and subtraction. If we run \`sage -t --long weyl_characters.py\`,
+it is more than twice as fast (26 seconds versus 69 seconds) as previously.
+If we omit \`--long\` it is slightly slower, so there is a speedup for
+big computations and a slight penalty for small ones.
 
+Demazure characters are added as a method of WeylCharacterRing and the
+Demazure operators are implemented as methods of WeightRing elements.
+
+The second patch trac_13461-demazure-lusztig.patch implements Demazure-Lusztig
+operators as a method of the weight ring. For documentation see:
+
+http://sporadic.stanford.edu/bump/reference-5.4.beta1/sage/combinat/root_system/weyl_characters.html
 
 Work_Issues: needs testing and tweaking
 
```




---

archive/issue_comments_173619.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,25 @@\n+After trac_13461-demazure-speedup.patch, if a WeylCharacterRing is created with style=\"coroots\",\n+characters are computed using not the Freudenthal multiplicity formula, but\n+rather the Demazure character formula. This can be done using only integer\n+addition and subtraction. If we run \\`sage -t --long weyl_characters.py\\`,\n+it is more than twice as fast (26 seconds versus 69 seconds) as previously.\n+If we omit \\`--long\\` it is slightly slower, so there is a speedup for\n+big computations and a slight penalty for small ones.\n \n+Demazure characters are added as a method of WeylCharacterRing and the\n+Demazure operators are implemented as methods of WeightRing elements.\n+\n+The second patch trac_13461-demazure-lusztig.patch implements Demazure-Lusztig\n+operators as a method of the weight ring. For documentation see:\n+\n+http://sporadic.stanford.edu/bump/reference-5.4.beta1/sage/combinat/root_system/weyl_characters.html\n+\n+Apply:\n+\n+\\`\\`\\`\n+trac_13461-demazure-speedup.patch\n+trac_13461-demazure-lusztig.patch\n+\\`\\`\\`\n \n Work_Issues: needs testing and tweaking\n \n```\n",
    "created_at": "2012-09-18T23:17:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13461#issuecomment-173619",
    "user": "https://github.com/dwbump"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,25 @@
+After trac_13461-demazure-speedup.patch, if a WeylCharacterRing is created with style="coroots",
+characters are computed using not the Freudenthal multiplicity formula, but
+rather the Demazure character formula. This can be done using only integer
+addition and subtraction. If we run \`sage -t --long weyl_characters.py\`,
+it is more than twice as fast (26 seconds versus 69 seconds) as previously.
+If we omit \`--long\` it is slightly slower, so there is a speedup for
+big computations and a slight penalty for small ones.
 
+Demazure characters are added as a method of WeylCharacterRing and the
+Demazure operators are implemented as methods of WeightRing elements.
+
+The second patch trac_13461-demazure-lusztig.patch implements Demazure-Lusztig
+operators as a method of the weight ring. For documentation see:
+
+http://sporadic.stanford.edu/bump/reference-5.4.beta1/sage/combinat/root_system/weyl_characters.html
+
+Apply:
+
+\`\`\`
+trac_13461-demazure-speedup.patch
+trac_13461-demazure-lusztig.patch
+\`\`\`
 
 Work_Issues: needs testing and tweaking
 
```




---

archive/issue_comments_173620.json:
```json
{
    "body": "<a id='comment:5'></a>I can confirm that this patch gives a major speedup for the long tests in /combinat/root_systems/weyl_characters.py:\n\n28.6 seconds versus 69.9 seconds\n\nWithout the long option I get 13.4 seconds versus 12.1 seconds.\n\nHere are a couple of comments on the patch:\n\n- Nicolas taught me that the standard doc strings should have a one-line description, followed by the INPUT and then, if necessary, a longer description. It might be good to follow these standards.\n\n- Do you want to keep the \"debug\" options in _demazure_helper? If so, please give a short description of what it is for and a doc test with it.\n\n- In demazure_character you refer to analogous methods in WeightRing elements and as methods of crystals. It might be good to link these using :meth:, so this is an easy click in the documentation.\n\n- Would it make sense to briefly explain how the notation in \n\n```\nsage: A2=WeylCharacterRing(\"A2\",style=\"coroots\") \nsage: sage: h=sum(A2.fundamental_weights())\nsage: A2.demazure_character(h,word=[1,2]) \na2(0,0) + a2(-2,1) + a2(2,-1) + a2(1,1) + a2(-1,2)\n```\nand\n\n```\nsage: C = CrystalOfTableaux(['A',2],shape=[2,1])\nsage: C.demazure_character([1,2],reduced_word=True)\nx1^2*x2 + x1^2*x3 + x1*x2^2 + x1*x2*x3 + x2^2*x3\n```\nmatch?\n\n- The description of the patch trac_13461-demazure-lusztig.patch seems to refer to itself \"Depends on trac_13461-demazure-lusztig.patch\". Perhaps it is best to fold both patches.\n\n- There is a spurious \"xo\" in line 548 in trac_13461-demazure-lusztig.patch.\n\n- It might be good to use REFERENCES: for the references in demazure_lusztig. It currently does not read well after `sage -docbuild reference html`.\n\nSo much for now!\n\nAnne",
    "created_at": "2012-09-25T23:32:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13461#issuecomment-173620",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:5'></a>I can confirm that this patch gives a major speedup for the long tests in /combinat/root_systems/weyl_characters.py:

28.6 seconds versus 69.9 seconds

Without the long option I get 13.4 seconds versus 12.1 seconds.

Here are a couple of comments on the patch:

- Nicolas taught me that the standard doc strings should have a one-line description, followed by the INPUT and then, if necessary, a longer description. It might be good to follow these standards.

- Do you want to keep the "debug" options in _demazure_helper? If so, please give a short description of what it is for and a doc test with it.

- In demazure_character you refer to analogous methods in WeightRing elements and as methods of crystals. It might be good to link these using :meth:, so this is an easy click in the documentation.

- Would it make sense to briefly explain how the notation in 

```
sage: A2=WeylCharacterRing("A2",style="coroots") 
sage: sage: h=sum(A2.fundamental_weights())
sage: A2.demazure_character(h,word=[1,2]) 
a2(0,0) + a2(-2,1) + a2(2,-1) + a2(1,1) + a2(-1,2)
```
and

```
sage: C = CrystalOfTableaux(['A',2],shape=[2,1])
sage: C.demazure_character([1,2],reduced_word=True)
x1^2*x2 + x1^2*x3 + x1*x2^2 + x1*x2*x3 + x2^2*x3
```
match?

- The description of the patch trac_13461-demazure-lusztig.patch seems to refer to itself "Depends on trac_13461-demazure-lusztig.patch". Perhaps it is best to fold both patches.

- There is a spurious "xo" in line 548 in trac_13461-demazure-lusztig.patch.

- It might be good to use REFERENCES: for the references in demazure_lusztig. It currently does not read well after `sage -docbuild reference html`.

So much for now!

Anne



---

archive/issue_comments_173621.json:
```json
{
    "body": "Changing keywords from \"\" to \"Weyl character ring, Demazure characters, Demazure-Lusztig operators\".",
    "created_at": "2012-09-25T23:33:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13461#issuecomment-173621",
    "user": "https://github.com/anneschilling"
}
```

Changing keywords from "" to "Weyl character ring, Demazure characters, Demazure-Lusztig operators".



---

archive/issue_comments_173622.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-09-25T23:33:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13461#issuecomment-173622",
    "user": "https://github.com/anneschilling"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_173623.json:
```json
{
    "body": "<a id='comment:7'></a>Regarding the link that Anne suggested to the method of `ClassicalCrystals` I tried:\n`:meth:`sage.categories.classical_crystals.ClassicalCrystals.demazure_character`` .\nThis doesn't produce an html link. Note that demazure_character is a `ParentMethod` of the\n`ClassicalCrystals` Class. I wasn't able to find any similar examples in the sage documentation.\n\nHow do I do this?",
    "created_at": "2012-09-26T02:51:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13461#issuecomment-173623",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:7'></a>Regarding the link that Anne suggested to the method of `ClassicalCrystals` I tried:
`:meth:`sage.categories.classical_crystals.ClassicalCrystals.demazure_character`` .
This doesn't produce an html link. Note that demazure_character is a `ParentMethod` of the
`ClassicalCrystals` Class. I wasn't able to find any similar examples in the sage documentation.

How do I do this?



---

archive/issue_comments_173624.json:
```json
{
    "body": "<a id='comment:8'></a>Replying to [comment:7 bump]:\n> Regarding the link that Anne suggested to the method of `ClassicalCrystals` I tried:\n> `:meth:`sage.categories.classical_crystals.ClassicalCrystals.demazure_character`` .\n> This doesn't produce an html link. Note that demazure_character is a `ParentMethod` of the\n> `ClassicalCrystals` Class. I wasn't able to find any similar examples in the sage documentation.\n> \n> How do I do this?\n\n\nHi Dan,\n\nMost likely you need \n\n`:meth:`~sage.categories.classical_crystals.ClassicalCrystals.demazure_character``\n\n(with the tilde in front of sage).\n\nAnne",
    "created_at": "2012-09-26T04:46:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13461#issuecomment-173624",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:8'></a>Replying to [comment:7 bump]:
> Regarding the link that Anne suggested to the method of `ClassicalCrystals` I tried:
> `:meth:`sage.categories.classical_crystals.ClassicalCrystals.demazure_character`` .
> This doesn't produce an html link. Note that demazure_character is a `ParentMethod` of the
> `ClassicalCrystals` Class. I wasn't able to find any similar examples in the sage documentation.
> 
> How do I do this?


Hi Dan,

Most likely you need 

`:meth:`~sage.categories.classical_crystals.ClassicalCrystals.demazure_character``

(with the tilde in front of sage).

Anne



---

archive/issue_comments_173625.json:
```json
{
    "body": "<a id='comment:9'></a>Replying to [comment:8 aschilling]:\n> `:meth:`~sage.categories.classical_crystals.ClassicalCrystals.demazure_character``\n\n\nI guess:\n\n`:meth:`~sage.categories.classical_crystals.ClassicalCrystals.ParentMethods.demazure_character``\n\nwhich in fact should be should be shortenable to:\n\n`:meth:`ClassicalCrystals.ParentMethods.demazure_character``\n\nNow it could well be that the above links currently break because #9107. In that case, just use this last form and the link will eventually work.\n\nThanks!",
    "created_at": "2012-09-26T13:24:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13461#issuecomment-173625",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:9'></a>Replying to [comment:8 aschilling]:
> `:meth:`~sage.categories.classical_crystals.ClassicalCrystals.demazure_character``


I guess:

`:meth:`~sage.categories.classical_crystals.ClassicalCrystals.ParentMethods.demazure_character``

which in fact should be should be shortenable to:

`:meth:`ClassicalCrystals.ParentMethods.demazure_character``

Now it could well be that the above links currently break because #9107. In that case, just use this last form and the link will eventually work.

Thanks!



---

archive/issue_comments_173626.json:
```json
{
    "body": "<a id='comment:10'></a>Thanks ... I thought I tried that.\n\n> Do you want to keep the \"debug\" options in _demazure_helper? If so, please give a short description of \n> what it is for and a doc test with it.\n\n\nMy experience (with GNU Go) is that it is a good idea to leave debug code in for something this complicated. There is also debug code in the Freudenthal method. However this code is not meant\nto be used in normal operation. A doctest would look something like this:\n\n```\nsage: A2=WeylCharacterRing(\"A2\",style=\"coroots\")\nsage: A2.demazure_character((1,1),word=[1,2],debug=True)\ncm[1]=(2, -1)\ncm[2]=(-1, 2)\ni=2\n   v=(1, 1), coroot=1\n     mu=(1, 1), next[mu]=1\n     mu=(2, -1), next[mu]=1\ni=1\n   v=(2, -1), coroot=2\n     mu=(2, -1), next[mu]=1\n     mu=(0, 0), next[mu]=1\n     mu=(-2, 1), next[mu]=1\n   v=(1, 1), coroot=1\n     mu=(1, 1), next[mu]=1\n     mu=(-1, 2), next[mu]=1\na2(0,0) + a2(-2,1) + a2(2,-1) + a2(1,1) + a2(-1,2)\n```\nThis can be really helpful for figuring out what the code is doing but I'm dubious that a doctest is appropriate. Should I take the code out?",
    "created_at": "2012-09-26T15:37:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13461#issuecomment-173626",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:10'></a>Thanks ... I thought I tried that.

> Do you want to keep the "debug" options in _demazure_helper? If so, please give a short description of 
> what it is for and a doc test with it.


My experience (with GNU Go) is that it is a good idea to leave debug code in for something this complicated. There is also debug code in the Freudenthal method. However this code is not meant
to be used in normal operation. A doctest would look something like this:

```
sage: A2=WeylCharacterRing("A2",style="coroots")
sage: A2.demazure_character((1,1),word=[1,2],debug=True)
cm[1]=(2, -1)
cm[2]=(-1, 2)
i=2
   v=(1, 1), coroot=1
     mu=(1, 1), next[mu]=1
     mu=(2, -1), next[mu]=1
i=1
   v=(2, -1), coroot=2
     mu=(2, -1), next[mu]=1
     mu=(0, 0), next[mu]=1
     mu=(-2, 1), next[mu]=1
   v=(1, 1), coroot=1
     mu=(1, 1), next[mu]=1
     mu=(-1, 2), next[mu]=1
a2(0,0) + a2(-2,1) + a2(2,-1) + a2(1,1) + a2(-1,2)
```
This can be really helpful for figuring out what the code is doing but I'm dubious that a doctest is appropriate. Should I take the code out?



---

archive/issue_comments_173627.json:
```json
{
    "body": "<a id='comment:11'></a>> This can be really helpful for figuring out what the code is doing but I'm dubious that a doctest is appropriate. Should I take the code out?\n\n\nIf you think the debug code it useful to have around, you can leave it in. I have just never seen this before integrated into sage.\n\nAnne",
    "created_at": "2012-09-26T18:24:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13461#issuecomment-173627",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:11'></a>> This can be really helpful for figuring out what the code is doing but I'm dubious that a doctest is appropriate. Should I take the code out?


If you think the debug code it useful to have around, you can leave it in. I have just never seen this before integrated into sage.

Anne



---

archive/issue_comments_173628.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [comment:10 bump]:\n> This can be really helpful for figuring out what the code is doing but I'm dubious that a doctest is appropriate. Should I take the code out?\n\n\nA quick grep shows a couple of occurences of a similar idiom in e.g. `schemes/elliptic_curves/ell_finite_field.py`. So I guess it's ok as long as it is consistent with what's done there.\n\nCheers,\n                          Nicolas",
    "created_at": "2012-09-26T22:31:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13461#issuecomment-173628",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:12'></a>Replying to [comment:10 bump]:
> This can be really helpful for figuring out what the code is doing but I'm dubious that a doctest is appropriate. Should I take the code out?


A quick grep shows a couple of occurences of a similar idiom in e.g. `schemes/elliptic_curves/ell_finite_field.py`. So I guess it's ok as long as it is consistent with what's done there.

Cheers,
                          Nicolas



---

archive/issue_comments_173629.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-09-27T17:00:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13461#issuecomment-173629",
    "user": "https://github.com/dwbump"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_173630.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,24 @@\n+After trac_13461-demazure-speedup.patch, if a WeylCharacterRing is created with style=\"coroots\",\n+characters are computed using not the Freudenthal multiplicity formula, but\n+rather the Demazure character formula. This can be done using only integer\n+addition and subtraction. If we run \\`sage -t --long weyl_characters.py\\`,\n+it is more than twice as fast (26 seconds versus 69 seconds) as previously.\n+If we omit \\`--long\\` it is slightly slower, so there is a speedup for\n+big computations and a slight penalty for small ones.\n \n+Demazure characters are added as a method of WeylCharacterRing and the\n+Demazure operators and Demazure-Lusztig operators are implemented as methods \n+of WeightRing elements.\n+\n+For documentation see:\n+\n+http://sporadic.stanford.edu/bump/reference-5.4.beta1/sage/combinat/root_system/weyl_characters.html\n+\n+Apply:\n+\n+\\`\\`\\`\n+trac_13461-demazure-speedup.patch\n+\\`\\`\\`\n \n Work_Issues: needs testing and tweaking\n \n```\n",
    "created_at": "2012-09-27T17:00:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13461#issuecomment-173630",
    "user": "https://github.com/dwbump"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,24 @@
+After trac_13461-demazure-speedup.patch, if a WeylCharacterRing is created with style="coroots",
+characters are computed using not the Freudenthal multiplicity formula, but
+rather the Demazure character formula. This can be done using only integer
+addition and subtraction. If we run \`sage -t --long weyl_characters.py\`,
+it is more than twice as fast (26 seconds versus 69 seconds) as previously.
+If we omit \`--long\` it is slightly slower, so there is a speedup for
+big computations and a slight penalty for small ones.
 
+Demazure characters are added as a method of WeylCharacterRing and the
+Demazure operators and Demazure-Lusztig operators are implemented as methods 
+of WeightRing elements.
+
+For documentation see:
+
+http://sporadic.stanford.edu/bump/reference-5.4.beta1/sage/combinat/root_system/weyl_characters.html
+
+Apply:
+
+\`\`\`
+trac_13461-demazure-speedup.patch
+\`\`\`
 
 Work_Issues: needs testing and tweaking
 
```




---

archive/issue_comments_173631.json:
```json
{
    "body": "<a id='comment:14'></a>Per Anne's recommendations:\n\nThe patches are now folded, xo is gone, `:meth:` is used `:meth:`odically\nand most methods in `weyl_characters.py` now have docstrings consisting\nof a single line followed by INPUT and then further doc. I added a sentence\ncomparing the Demazure methods of crystals. \n\nI did not take out the debugging code per discussion in comments 10, 11 and 12.\n\nI did not use REFERENCES but instead reformulated the citations for DL\noperators so they look good in the reference manual.",
    "created_at": "2012-09-27T17:13:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13461#issuecomment-173631",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:14'></a>Per Anne's recommendations:

The patches are now folded, xo is gone, `:meth:` is used `:meth:`odically
and most methods in `weyl_characters.py` now have docstrings consisting
of a single line followed by INPUT and then further doc. I added a sentence
comparing the Demazure methods of crystals. 

I did not take out the debugging code per discussion in comments 10, 11 and 12.

I did not use REFERENCES but instead reformulated the citations for DL
operators so they look good in the reference manual.



---

archive/issue_comments_173632.json:
```json
{
    "body": "<a id='comment:15'></a>Apply trac_13461-demazure-speedup.patch",
    "created_at": "2012-09-27T17:17:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13461#issuecomment-173632",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:15'></a>Apply trac_13461-demazure-speedup.patch



---

archive/issue_comments_173633.json:
```json
{
    "body": "<a id='comment:16'></a>Hi Dan,\n\nThe patch looks good and the tests pass on my machine. Here \nare some trivial remarks about the documentation that you\nmight still want to fix:\n\n- In the demazure_lusztig method replace devisible -> divisible\n\n- In the method symmetric_power something went wrong between h_k and p_k\n(at least on the website link you posted).\n\nOther than this, positive review!\n\nAnne",
    "created_at": "2012-09-28T06:42:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13461#issuecomment-173633",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:16'></a>Hi Dan,

The patch looks good and the tests pass on my machine. Here 
are some trivial remarks about the documentation that you
might still want to fix:

- In the demazure_lusztig method replace devisible -> divisible

- In the method symmetric_power something went wrong between h_k and p_k
(at least on the website link you posted).

Other than this, positive review!

Anne



---

archive/issue_comments_173634.json:
```json
{
    "body": "<a id='comment:17'></a>I made the corrections in comment:16.",
    "created_at": "2012-09-28T13:45:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13461#issuecomment-173634",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:17'></a>I made the corrections in comment:16.



---

archive/issue_comments_173635.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-09-28T14:00:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13461#issuecomment-173635",
    "user": "https://github.com/anneschilling"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_173636.json:
```json
{
    "body": "<a id='comment:19'></a>Apply trac_13461-demazure-speedup.patch",
    "created_at": "2012-09-28T15:22:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13461#issuecomment-173636",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:19'></a>Apply trac_13461-demazure-speedup.patch



---

archive/issue_events_037426.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-09-29T07:13:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13461",
    "milestone": "sage-5.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13461#event-37426"
}
```



---

archive/issue_comments_173637.json:
```json
{
    "body": "<a id='comment:21'></a>Apply trac_13461-demazure-speedup.patch",
    "created_at": "2012-10-04T16:33:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13461#issuecomment-173637",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:21'></a>Apply trac_13461-demazure-speedup.patch



---

archive/issue_comments_173638.json:
```json
{
    "body": "<a id='comment:22'></a>I don't understand the patchbot's red light. The patchbot says apply failed, but there is no error message in the log, just \"timed out\".",
    "created_at": "2012-10-04T18:04:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13461#issuecomment-173638",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:22'></a>I don't understand the patchbot's red light. The patchbot says apply failed, but there is no error message in the log, just "timed out".



---

archive/issue_comments_173639.json:
```json
{
    "body": "<a id='comment:23'></a>Apply trac_13461-demazure-speedup.patch",
    "created_at": "2012-10-08T12:48:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13461#issuecomment-173639",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:23'></a>Apply trac_13461-demazure-speedup.patch



---

archive/issue_comments_173640.json:
```json
{
    "body": "Changing status from positive_review to needs_info.",
    "created_at": "2012-10-09T10:04:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13461#issuecomment-173640",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_info.



---

archive/issue_comments_173641.json:
```json
{
    "body": "<a id='comment:24'></a>Just noticed that this ticket is already at positive review. I think this means that the patchbot will not run the ticket any more. I'm temporarily setting this back to needs review to test my theory :)",
    "created_at": "2012-10-09T10:04:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13461#issuecomment-173641",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:24'></a>Just noticed that this ticket is already at positive review. I think this means that the patchbot will not run the ticket any more. I'm temporarily setting this back to needs review to test my theory :)



---

archive/issue_comments_173642.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2012-10-09T10:04:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13461#issuecomment-173642",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_173643.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-10-09T10:35:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13461#issuecomment-173643",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_173644.json:
```json
{
    "body": "<a id='comment:26'></a>Yes, that did the trick.",
    "created_at": "2012-10-09T10:35:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13461#issuecomment-173644",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:26'></a>Yes, that did the trick.



---

archive/issue_comments_173645.json:
```json
{
    "body": "Weyl CharacterRing speedup: use Demazure algorithm",
    "created_at": "2012-10-09T18:08:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13461#issuecomment-173645",
    "user": "https://github.com/dwbump"
}
```

Weyl CharacterRing speedup: use Demazure algorithm



---

archive/issue_comments_173646.json:
```json
{
    "body": "<a id='comment:27'></a>Attachment [trac_13461-demazure-speedup.patch](tarball://root/attachments/some-uuid/ticket13461/trac_13461-demazure-speedup.patch) by @dwbump created at 2012-10-09 18:12:43\n\nThe tracbot found some whitespace at trailing lines and the tracbot light turned blue ... I therefore reposted the patch. I will change the status to needs_info, kick, then change it back to positive_review. \n\nThe changes only delete some whitespace at ends of lines.",
    "created_at": "2012-10-09T18:12:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13461#issuecomment-173646",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:27'></a>Attachment [trac_13461-demazure-speedup.patch](tarball://root/attachments/some-uuid/ticket13461/trac_13461-demazure-speedup.patch) by @dwbump created at 2012-10-09 18:12:43

The tracbot found some whitespace at trailing lines and the tracbot light turned blue ... I therefore reposted the patch. I will change the status to needs_info, kick, then change it back to positive_review. 

The changes only delete some whitespace at ends of lines.



---

archive/issue_comments_173647.json:
```json
{
    "body": "Changing status from positive_review to needs_info.",
    "created_at": "2012-10-09T18:18:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13461#issuecomment-173647",
    "user": "https://github.com/dwbump"
}
```

Changing status from positive_review to needs_info.



---

archive/issue_comments_173648.json:
```json
{
    "body": "<a id='comment:29'></a>There is nothing wrong with trailing whitespace, its purely advisory at this point. Feel free to remove whitespace from the changed lines, but don't introduce additional changes just as a sacrifice to the whitespace gods.",
    "created_at": "2012-10-09T18:39:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13461#issuecomment-173648",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:29'></a>There is nothing wrong with trailing whitespace, its purely advisory at this point. Feel free to remove whitespace from the changed lines, but don't introduce additional changes just as a sacrifice to the whitespace gods.



---

archive/issue_comments_173649.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2012-10-09T23:39:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13461#issuecomment-173649",
    "user": "https://github.com/dwbump"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_173650.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-10-09T23:40:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13461#issuecomment-173650",
    "user": "https://github.com/dwbump"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_173651.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-10-17T21:00:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13461#issuecomment-173651",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_037427.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-10-17T21:00:54Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13461",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13461#event-37427"
}
```
