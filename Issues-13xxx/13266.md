# Issue 13266: Weil restriction for elliptic curves over number fields

archive/issues_013094.json:
```json
{
    "assignees": [],
    "body": "This enhancement takes an elliptic curve, finds its defining ideal and then applies the Weil restriction.\n\nAssignee: **@JohnCremona**\n\nKeywords: **elliptic curve, weil restriction**\n\nAuthor: **Hester Graves**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/13266_\n\n",
    "created_at": "2012-07-18T03:12:01Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20elliptic%20curves",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/needs%20info"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Weil restriction for elliptic curves over number fields",
    "type": "issue",
    "updated_at": "2022-12-29T01:28:25Z",
    "url": "https://github.com/sagemath/sage/issues/13266",
    "user": "https://github.com/sagetrac-Hester"
}
```
This enhancement takes an elliptic curve, finds its defining ideal and then applies the Weil restriction.

Assignee: **@JohnCremona**

Keywords: **elliptic curve, weil restriction**

Author: **Hester Graves**

_Issue created by migration from https://trac.sagemath.org/ticket/13266_





---

archive/issue_events_169389.json:
```json
{
    "actor": "https://github.com/sagetrac-Hester",
    "created_at": "2012-07-18T03:12:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13266#event-169389"
}
```



---

archive/issue_events_169390.json:
```json
{
    "actor": "https://github.com/sagetrac-Hester",
    "created_at": "2012-07-18T03:12:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20elliptic%20curves",
    "label_color": "0000ff",
    "label_name": "component: elliptic curves",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13266#event-169390"
}
```



---

archive/issue_events_169391.json:
```json
{
    "actor": "https://github.com/sagetrac-Hester",
    "created_at": "2012-07-18T03:12:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "label": "https://github.com/sagemath/sage/labels/p5%20%E2%80%93%20trivial",
    "label_color": "fff9e5",
    "label_name": "p5 \u2013 trivial",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13266#event-169391"
}
```



---

archive/issue_events_169392.json:
```json
{
    "actor": "https://github.com/sagetrac-Hester",
    "created_at": "2012-07-18T03:12:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13266#event-169392"
}
```



---

archive/issue_comments_155529.json:
```json
{
    "body": "This is the code and documentation of a propsed enhancement.",
    "created_at": "2012-07-18T03:15:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13266#issuecomment-155529",
    "user": "https://github.com/sagetrac-Hester"
}
```

This is the code and documentation of a propsed enhancement.



---

archive/issue_comments_155530.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-This enhancement takes an elliptic curve, finds its defining ideal and then applies the Weil restriction.  \n+This enhancement takes an elliptic curve, finds its defining ideal and then applies the Weil restriction.\n``````\n",
    "created_at": "2012-07-18T04:48:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13266#issuecomment-155530",
    "user": "https://github.com/kini"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-This enhancement takes an elliptic curve, finds its defining ideal and then applies the Weil restriction.  
+This enhancement takes an elliptic curve, finds its defining ideal and then applies the Weil restriction.
``````




---

archive/issue_comments_155531.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nAttachment: **[newweil13266.gz](https://github.com/sagemath/sage/files/ticket13266/newweil13266.gz)**\n\nI take it Hester Graves is your (the patch author's) name? I've put it in the Author field instead of the Summary field, and put a summary of the code change in the Summary field (I hope it's accurate, I don't know anything about elliptic curves).",
    "created_at": "2012-07-18T04:48:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13266#issuecomment-155531",
    "user": "https://github.com/kini"
}
```

<a id='comment:1'>Comment 1:</a>
Attachment: **[newweil13266.gz](https://github.com/sagemath/sage/files/ticket13266/newweil13266.gz)**

I take it Hester Graves is your (the patch author's) name? I've put it in the Author field instead of the Summary field, and put a summary of the code change in the Summary field (I hope it's accurate, I don't know anything about elliptic curves).



---

archive/issue_events_169393.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2012-07-18T04:48:47Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "title_is": "Weil restriction for elliptic curves over number fields",
    "title_was": "Hester Graves",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13266#event-169393"
}
```



---

archive/issue_comments_155532.json:
```json
{
    "body": "Author: **Hester Graves**",
    "created_at": "2012-07-18T04:48:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13266#issuecomment-155532",
    "user": "https://github.com/kini"
}
```

Author: **Hester Graves**



---

archive/issue_events_169394.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2012-07-18T04:48:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "label": "https://github.com/sagemath/sage/labels/p5%20%E2%80%93%20trivial",
    "label_color": "fff9e5",
    "label_name": "p5 \u2013 trivial",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13266#event-169394"
}
```



---

archive/issue_events_169395.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2012-07-18T04:48:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13266#event-169395"
}
```



---

archive/issue_comments_155533.json:
```json
{
    "body": "apply to $SAGE_ROOT/devel/sage",
    "created_at": "2012-07-18T04:55:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13266#issuecomment-155533",
    "user": "https://github.com/kini"
}
```

apply to $SAGE_ROOT/devel/sage



---

archive/issue_comments_155534.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nAttachment: **[newweil13266.patch.gz](https://github.com/sagemath/sage/files/ticket13266/newweil13266.patch.gz)**\n\nI reuploaded your patch with a filename ending in `.patch` so that it gets a nice diff display on trac, and also so that the patchbot notices it.",
    "created_at": "2012-07-18T04:56:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13266#issuecomment-155534",
    "user": "https://github.com/kini"
}
```

<a id='comment:2'>Comment 2:</a>
Attachment: **[newweil13266.patch.gz](https://github.com/sagemath/sage/files/ticket13266/newweil13266.patch.gz)**

I reuploaded your patch with a filename ending in `.patch` so that it gets a nice diff display on trac, and also so that the patchbot notices it.



---

archive/issue_comments_155535.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nQuestion:  Is this supposed to be only for quadratic fields, as suggest by \"abelian surface\"?  If so, it needs to be said i nthe documentation.  If not, the function name needs changing, and an exaple of a higher degree field included.",
    "created_at": "2012-07-18T08:36:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13266#issuecomment-155535",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:3'>Comment 3:</a>
Question:  Is this supposed to be only for quadratic fields, as suggest by "abelian surface"?  If so, it needs to be said i nthe documentation.  If not, the function name needs changing, and an exaple of a higher degree field included.



---

archive/issue_events_169396.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2012-07-18T08:36:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13266#event-169396"
}
```



---

archive/issue_comments_155536.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nAnother question: The current implementation makes\n\n```\nE.weilrestriction()\n```\nan alias for\n\n```\nE.defining_ideal().weilrestriction()\n```\nso it saves typing 17 characters, at the expense of implementing \"weilrestriction\" for elliptic curves as a functor from the category of elliptic curves over a number field K to the category of ideals over Q.\n\nI'm afraid most people would expect the weil restriction of an elliptic curve to be an abelian variety, not an ideal.\n\nPlus, in what sense is the returned ideal describing the Weil restriction?\n\nSince you're restricting a projective ideal, you have to be careful what you divide out by.\nProjective equivalence for `(x:y:z) in P^2(K)` is modulo `K^*` whereas for\n`(x0:x1:y0:y1:z0:z1) in P^5(Q)` it's only modulo `Q^*`.\n\nYou also run into problems because there are subvarieties where (x0,x1,y0,y1,z0,z1) are not all zero and yet correspond to (x,y,z) with no x,y,z invertible (if K is a field over Q then these varieties won't have Q-rational points, though), so you'd have to take something much more complicated than Proj(...), and something that depends on the field extension that you have forgotten by now, before this gives you the Weil restriction.\n\nThere is a reason why Weil restrictions are taken of affine varieties and then glued together.\n\nI'm afraid that saving 17 keystrokes is not worth the misleading terminology. This routine needs a fundamentally different approach before it can be considered for inclusion.",
    "created_at": "2012-07-21T18:55:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13266#issuecomment-155536",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:4'>Comment 4:</a>
Another question: The current implementation makes

```
E.weilrestriction()
```
an alias for

```
E.defining_ideal().weilrestriction()
```
so it saves typing 17 characters, at the expense of implementing "weilrestriction" for elliptic curves as a functor from the category of elliptic curves over a number field K to the category of ideals over Q.

I'm afraid most people would expect the weil restriction of an elliptic curve to be an abelian variety, not an ideal.

Plus, in what sense is the returned ideal describing the Weil restriction?

Since you're restricting a projective ideal, you have to be careful what you divide out by.
Projective equivalence for `(x:y:z) in P^2(K)` is modulo `K^*` whereas for
`(x0:x1:y0:y1:z0:z1) in P^5(Q)` it's only modulo `Q^*`.

You also run into problems because there are subvarieties where (x0,x1,y0,y1,z0,z1) are not all zero and yet correspond to (x,y,z) with no x,y,z invertible (if K is a field over Q then these varieties won't have Q-rational points, though), so you'd have to take something much more complicated than Proj(...), and something that depends on the field extension that you have forgotten by now, before this gives you the Weil restriction.

There is a reason why Weil restrictions are taken of affine varieties and then glued together.

I'm afraid that saving 17 keystrokes is not worth the misleading terminology. This routine needs a fundamentally different approach before it can be considered for inclusion.



---

archive/issue_events_169397.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13266#event-169397"
}
```



---

archive/issue_events_169398.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13266#event-169398"
}
```



---

archive/issue_events_169399.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13266#event-169399"
}
```



---

archive/issue_events_169400.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13266#event-169400"
}
```



---

archive/issue_events_169401.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13266#event-169401"
}
```



---

archive/issue_events_169402.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13266#event-169402"
}
```



---

archive/issue_events_169403.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13266#event-169403"
}
```



---

archive/issue_events_169404.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13266#event-169404"
}
```



---

archive/issue_events_169405.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-29T01:28:25Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13266#event-169405"
}
```
