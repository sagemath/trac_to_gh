# Issue 13266: Weil restriction for elliptic curves over number fields

archive/issues_013094.json:
```json
{
    "assignees": [
        "https://github.com/JohnCremona"
    ],
    "body": "This enhancement takes an elliptic curve, finds its defining ideal and then applies the Weil restriction.\n\nKeywords: **weil restriction**\n\nAuthor: **Hester Graves**\n\nComponent: **elliptic curves**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/13266_\n\n",
    "created_at": "2012-07-18T03:12:01Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20elliptic%20curves",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/c%3A%20elliptic%20curves",
        "https://github.com/sagemath/sage/labels/needs%20info"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Weil restriction for elliptic curves over number fields",
    "type": "issue",
    "updated_at": "2022-12-29T01:28:25Z",
    "url": "https://github.com/sagemath/sage/issues/13266",
    "user": "https://github.com/sagetrac-Hester"
}
```
This enhancement takes an elliptic curve, finds its defining ideal and then applies the Weil restriction.

Keywords: **weil restriction**

Author: **Hester Graves**

Component: **elliptic curves**

_Issue created by migration from https://trac.sagemath.org/ticket/13266_





---

archive/issue_events_183080.json:
```json
{
    "actor": "https://github.com/sagetrac-Hester",
    "created_at": "2012-07-18T03:12:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13266#event-183080"
}
```



---

archive/issue_events_183081.json:
```json
{
    "actor": "https://github.com/sagetrac-Hester",
    "created_at": "2012-07-18T03:12:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20elliptic%20curves",
    "label_color": "0000ff",
    "label_name": "c: elliptic curves",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13266#event-183081"
}
```



---

archive/issue_events_183082.json:
```json
{
    "actor": "https://github.com/sagetrac-Hester",
    "created_at": "2012-07-18T03:12:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20trivial%20/%205",
    "label_color": "fff9e5",
    "label_name": "p: trivial / 5",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13266#event-183082"
}
```



---

archive/issue_events_183083.json:
```json
{
    "actor": "https://github.com/sagetrac-Hester",
    "created_at": "2012-07-18T03:12:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13266#event-183083"
}
```



---

archive/issue_events_183084.json:
```json
{
    "actor": "https://github.com/sagetrac-Hester",
    "created_at": "2012-07-18T03:12:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20elliptic%20curves",
    "label_color": "0000ff",
    "label_name": "c: elliptic curves",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13266#event-183084"
}
```



---

archive/issue_events_183085.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2012-07-18T03:12:01Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "subject": "https://github.com/sagetrac-Hester",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13266#event-183085"
}
```



---

archive/issue_comments_153174.json:
```json
{
    "body": "This is the code and documentation of a propsed enhancement.",
    "created_at": "2012-07-18T03:15:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13266#issuecomment-153174",
    "user": "https://github.com/sagetrac-Hester"
}
```

This is the code and documentation of a propsed enhancement.



---

archive/issue_comments_153175.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-This enhancement takes an elliptic curve, finds its defining ideal and then applies the Weil restriction.  \n+This enhancement takes an elliptic curve, finds its defining ideal and then applies the Weil restriction.\n``````\n",
    "created_at": "2012-07-18T04:48:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13266#issuecomment-153175",
    "user": "https://github.com/kini"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-This enhancement takes an elliptic curve, finds its defining ideal and then applies the Weil restriction.  
+This enhancement takes an elliptic curve, finds its defining ideal and then applies the Weil restriction.
``````




---

archive/issue_comments_153176.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nAttachment: **[newweil13266.gz](https://github.com/sagemath/sage/files/ticket13266/newweil13266.gz)**\n\nI take it Hester Graves is your (the patch author's) name? I've put it in the Author field instead of the Summary field, and put a summary of the code change in the Summary field (I hope it's accurate, I don't know anything about elliptic curves).",
    "created_at": "2012-07-18T04:48:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13266#issuecomment-153176",
    "user": "https://github.com/kini"
}
```

<div id="comment:1" align="right">comment:1</div>

Attachment: **[newweil13266.gz](https://github.com/sagemath/sage/files/ticket13266/newweil13266.gz)**

I take it Hester Graves is your (the patch author's) name? I've put it in the Author field instead of the Summary field, and put a summary of the code change in the Summary field (I hope it's accurate, I don't know anything about elliptic curves).



---

archive/issue_events_183086.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2012-07-18T04:48:47Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "title_is": "Weil restriction for elliptic curves over number fields",
    "title_was": "Hester Graves",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13266#event-183086"
}
```



---

archive/issue_comments_153177.json:
```json
{
    "body": "Author: **Hester Graves**",
    "created_at": "2012-07-18T04:48:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13266#issuecomment-153177",
    "user": "https://github.com/kini"
}
```

Author: **Hester Graves**



---

archive/issue_events_183087.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2012-07-18T04:48:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20trivial%20/%205",
    "label_color": "fff9e5",
    "label_name": "p: trivial / 5",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13266#event-183087"
}
```



---

archive/issue_events_183088.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2012-07-18T04:48:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13266#event-183088"
}
```



---

archive/issue_comments_153178.json:
```json
{
    "body": "apply to $SAGE_ROOT/devel/sage",
    "created_at": "2012-07-18T04:55:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13266#issuecomment-153178",
    "user": "https://github.com/kini"
}
```

apply to $SAGE_ROOT/devel/sage



---

archive/issue_comments_153179.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nAttachment: **[newweil13266.patch.gz](https://github.com/sagemath/sage/files/ticket13266/newweil13266.patch.gz)**\n\nI reuploaded your patch with a filename ending in `.patch` so that it gets a nice diff display on trac, and also so that the patchbot notices it.",
    "created_at": "2012-07-18T04:56:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13266#issuecomment-153179",
    "user": "https://github.com/kini"
}
```

<div id="comment:2" align="right">comment:2</div>

Attachment: **[newweil13266.patch.gz](https://github.com/sagemath/sage/files/ticket13266/newweil13266.patch.gz)**

I reuploaded your patch with a filename ending in `.patch` so that it gets a nice diff display on trac, and also so that the patchbot notices it.



---

archive/issue_comments_153180.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nQuestion:  Is this supposed to be only for quadratic fields, as suggest by \"abelian surface\"?  If so, it needs to be said i nthe documentation.  If not, the function name needs changing, and an exaple of a higher degree field included.",
    "created_at": "2012-07-18T08:36:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13266#issuecomment-153180",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:3" align="right">comment:3</div>

Question:  Is this supposed to be only for quadratic fields, as suggest by "abelian surface"?  If so, it needs to be said i nthe documentation.  If not, the function name needs changing, and an exaple of a higher degree field included.



---

archive/issue_events_183089.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2012-07-18T08:36:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13266#event-183089"
}
```



---

archive/issue_comments_153181.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nAnother question: The current implementation makes\n\n```\nE.weilrestriction()\n```\nan alias for\n\n```\nE.defining_ideal().weilrestriction()\n```\nso it saves typing 17 characters, at the expense of implementing \"weilrestriction\" for elliptic curves as a functor from the category of elliptic curves over a number field K to the category of ideals over Q.\n\nI'm afraid most people would expect the weil restriction of an elliptic curve to be an abelian variety, not an ideal.\n\nPlus, in what sense is the returned ideal describing the Weil restriction?\n\nSince you're restricting a projective ideal, you have to be careful what you divide out by.\nProjective equivalence for `(x:y:z) in P^2(K)` is modulo `K^*` whereas for\n`(x0:x1:y0:y1:z0:z1) in P^5(Q)` it's only modulo `Q^*`.\n\nYou also run into problems because there are subvarieties where (x0,x1,y0,y1,z0,z1) are not all zero and yet correspond to (x,y,z) with no x,y,z invertible (if K is a field over Q then these varieties won't have Q-rational points, though), so you'd have to take something much more complicated than Proj(...), and something that depends on the field extension that you have forgotten by now, before this gives you the Weil restriction.\n\nThere is a reason why Weil restrictions are taken of affine varieties and then glued together.\n\nI'm afraid that saving 17 keystrokes is not worth the misleading terminology. This routine needs a fundamentally different approach before it can be considered for inclusion.",
    "created_at": "2012-07-21T18:55:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13266#issuecomment-153181",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:4" align="right">comment:4</div>

Another question: The current implementation makes

```
E.weilrestriction()
```
an alias for

```
E.defining_ideal().weilrestriction()
```
so it saves typing 17 characters, at the expense of implementing "weilrestriction" for elliptic curves as a functor from the category of elliptic curves over a number field K to the category of ideals over Q.

I'm afraid most people would expect the weil restriction of an elliptic curve to be an abelian variety, not an ideal.

Plus, in what sense is the returned ideal describing the Weil restriction?

Since you're restricting a projective ideal, you have to be careful what you divide out by.
Projective equivalence for `(x:y:z) in P^2(K)` is modulo `K^*` whereas for
`(x0:x1:y0:y1:z0:z1) in P^5(Q)` it's only modulo `Q^*`.

You also run into problems because there are subvarieties where (x0,x1,y0,y1,z0,z1) are not all zero and yet correspond to (x,y,z) with no x,y,z invertible (if K is a field over Q then these varieties won't have Q-rational points, though), so you'd have to take something much more complicated than Proj(...), and something that depends on the field extension that you have forgotten by now, before this gives you the Weil restriction.

There is a reason why Weil restrictions are taken of affine varieties and then glued together.

I'm afraid that saving 17 keystrokes is not worth the misleading terminology. This routine needs a fundamentally different approach before it can be considered for inclusion.



---

archive/issue_events_183090.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13266#event-183090"
}
```



---

archive/issue_events_183091.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13266#event-183091"
}
```



---

archive/issue_events_183092.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13266#event-183092"
}
```



---

archive/issue_events_183093.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13266#event-183093"
}
```



---

archive/issue_events_183094.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13266#event-183094"
}
```



---

archive/issue_events_183095.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13266#event-183095"
}
```



---

archive/issue_events_183096.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13266#event-183096"
}
```



---

archive/issue_events_183097.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13266#event-183097"
}
```



---

archive/issue_events_183098.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-29T01:28:25Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13266",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13266#event-183098"
}
```
