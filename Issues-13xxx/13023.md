# Issue 13023: Move toric varieties to a dedicated folder

archive/issues_012851.json:
```json
{
    "body": "Currently all files related to toric varieties are in `schemes/generic`, yet there are many of them and it would be more convenient to have a separate folder rather than `toric_` prefix on all of them.\n\n**Apply:**\n* [attachment:trac_13023_move_toric_files.patch]\n* [attachment:trac_13023_adjust_toric_imports.patch]\n* [attachment:trac_13023_fix_circular_imports.patch]\n\nAssignee: @aghitza\n\nCC:  @vbraun\n\nKeywords: toric, sd40.5\n\nReviewer: William Stein\n\nAuthor: Andrey Novoseltsev\n\nMerged: sage-5.1.beta4\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/13023\n\n",
    "closed_at": "2012-06-14T06:43:38Z",
    "created_at": "2012-05-26T16:09:30Z",
    "labels": [
        "component: algebraic geometry"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.1",
    "title": "Move toric varieties to a dedicated folder",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13023",
    "user": "https://github.com/novoselt"
}
```
Currently all files related to toric varieties are in `schemes/generic`, yet there are many of them and it would be more convenient to have a separate folder rather than `toric_` prefix on all of them.

**Apply:**
* [attachment:trac_13023_move_toric_files.patch]
* [attachment:trac_13023_adjust_toric_imports.patch]
* [attachment:trac_13023_fix_circular_imports.patch]

Assignee: @aghitza

CC:  @vbraun

Keywords: toric, sd40.5

Reviewer: William Stein

Author: Andrey Novoseltsev

Merged: sage-5.1.beta4

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/13023





---

archive/issue_comments_164121.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2012-05-26T16:09:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13023#issuecomment-164121",
    "user": "https://github.com/novoselt"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_164122.json:
```json
{
    "body": "Attachment [trac_13023_adjust_toric_imports.patch](tarball://root/attachments/some-uuid/ticket13023/trac_13023_adjust_toric_imports.patch) by @novoselt created at 2012-05-26 18:38:05\n\nAutomatic adjustment of imports",
    "created_at": "2012-05-26T18:38:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13023#issuecomment-164122",
    "user": "https://github.com/novoselt"
}
```

Attachment [trac_13023_adjust_toric_imports.patch](tarball://root/attachments/some-uuid/ticket13023/trac_13023_adjust_toric_imports.patch) by @novoselt created at 2012-05-26 18:38:05

Automatic adjustment of imports



---

archive/issue_comments_164123.json:
```json
{
    "body": "Attachment [trac_13023_fix_circular_imports.patch](tarball://root/attachments/some-uuid/ticket13023/trac_13023_fix_circular_imports.patch) by @novoselt created at 2012-05-26 18:58:59\n\nManual adjustment of imports",
    "created_at": "2012-05-26T18:58:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13023#issuecomment-164123",
    "user": "https://github.com/novoselt"
}
```

Attachment [trac_13023_fix_circular_imports.patch](tarball://root/attachments/some-uuid/ticket13023/trac_13023_fix_circular_imports.patch) by @novoselt created at 2012-05-26 18:58:59

Manual adjustment of imports



---

archive/issue_comments_164124.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-05-26T19:25:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13023#issuecomment-164124",
    "user": "https://github.com/novoselt"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_164125.json:
```json
{
    "body": "Changing keywords from \"\" to \"toric, sd40.5\".",
    "created_at": "2012-05-26T19:36:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13023#issuecomment-164125",
    "user": "https://github.com/novoselt"
}
```

Changing keywords from "" to "toric, sd40.5".



---

archive/issue_comments_164126.json:
```json
{
    "body": "Script for rebasing other patches on top of this ticket",
    "created_at": "2012-05-27T16:51:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13023#issuecomment-164126",
    "user": "https://github.com/novoselt"
}
```

Script for rebasing other patches on top of this ticket



---

archive/issue_comments_164127.json:
```json
{
    "body": "<a id='comment:4'></a>Attachment [rebase_for_13023.sh](tarball://root/attachments/some-uuid/ticket13023/rebase_for_13023.sh) by @novoselt created at 2012-05-27 16:53:35\n\nThe script may be not too elegant, but it worked for rebasing #12892 on top of this ticket.\n\nFor the patchbot:\n\nApply trac_13023_move_toric_files.patch trac_13023_adjust_toric_imports.patch trac_13023_fix_circular_imports.patch",
    "created_at": "2012-05-27T16:53:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13023#issuecomment-164127",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:4'></a>Attachment [rebase_for_13023.sh](tarball://root/attachments/some-uuid/ticket13023/rebase_for_13023.sh) by @novoselt created at 2012-05-27 16:53:35

The script may be not too elegant, but it worked for rebasing #12892 on top of this ticket.

For the patchbot:

Apply trac_13023_move_toric_files.patch trac_13023_adjust_toric_imports.patch trac_13023_fix_circular_imports.patch



---

archive/issue_comments_164128.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,9 @@\n Currently all files related to toric varieties are in \\`schemes/generic\\`, yet there are many of them and it would be more convenient to have a separate folder rather than \\`toric_\\` prefix on all of them.\n+\n+**Apply:**\n+* [attachement:trac_13023_move_toric_files.patch]\n+* [attachement:trac_13023_adjust_toric_imports.patch]\n+* [attachement:trac_13023_fix_circular_imports.patch]\n \n Author: Andrey Novoseltsev\n \n```\n",
    "created_at": "2012-05-27T16:53:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13023#issuecomment-164128",
    "user": "https://github.com/novoselt"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,9 @@
 Currently all files related to toric varieties are in \`schemes/generic\`, yet there are many of them and it would be more convenient to have a separate folder rather than \`toric_\` prefix on all of them.
+
+**Apply:**
+* [attachement:trac_13023_move_toric_files.patch]
+* [attachement:trac_13023_adjust_toric_imports.patch]
+* [attachement:trac_13023_fix_circular_imports.patch]
 
 Author: Andrey Novoseltsev
 
```




---

archive/issue_comments_164129.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,9 @@\n+Currently all files related to toric varieties are in \\`schemes/generic\\`, yet there are many of them and it would be more convenient to have a separate folder rather than \\`toric_\\` prefix on all of them.\n \n+**Apply:**\n+* [attachment:trac_13023_move_toric_files.patch]\n+* [attachment:trac_13023_adjust_toric_imports.patch]\n+* [attachment:trac_13023_fix_circular_imports.patch]\n \n Author: Andrey Novoseltsev\n \n```\n",
    "created_at": "2012-05-27T16:54:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13023#issuecomment-164129",
    "user": "https://github.com/novoselt"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,9 @@
+Currently all files related to toric varieties are in \`schemes/generic\`, yet there are many of them and it would be more convenient to have a separate folder rather than \`toric_\` prefix on all of them.
 
+**Apply:**
+* [attachment:trac_13023_move_toric_files.patch]
+* [attachment:trac_13023_adjust_toric_imports.patch]
+* [attachment:trac_13023_fix_circular_imports.patch]
 
 Author: Andrey Novoseltsev
 
```




---

archive/issue_comments_164130.json:
```json
{
    "body": "<a id='comment:6'></a>This looks good.",
    "created_at": "2012-05-27T19:53:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13023#issuecomment-164130",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:6'></a>This looks good.



---

archive/issue_comments_164131.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-05-27T19:53:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13023#issuecomment-164131",
    "user": "https://github.com/williamstein"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_164132.json:
```json
{
    "body": "<a id='comment:7'></a>The patchbot fails due to:\n\n```\ntrac_13023_fix_circular_imports.patch\nTrailing whitespace inserted on 5 non-empty lines.\nTraceback (most recent call last):\n  File \"/opt/patchbot-5.1.beta0/local/bin/patchbot/patchbot.py\", line 276, in test_a_ticket\n    plugin(ticket, **kwds)\n  File \"/opt/patchbot-5.1.beta0/local/bin/patchbot/plugins.py\", line 49, in trailing_whitespace\n    raise ValueError(msg)\nValueError: Trailing whitespace inserted on 5 non-empty lines.\nplugins.trailing_whitespace -- 0 seconds\n```\n\nbut when I manually did \"sage -br\", everything did work fine, hence the positive review.",
    "created_at": "2012-05-27T20:14:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13023#issuecomment-164132",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:7'></a>The patchbot fails due to:

```
trac_13023_fix_circular_imports.patch
Trailing whitespace inserted on 5 non-empty lines.
Traceback (most recent call last):
  File "/opt/patchbot-5.1.beta0/local/bin/patchbot/patchbot.py", line 276, in test_a_ticket
    plugin(ticket, **kwds)
  File "/opt/patchbot-5.1.beta0/local/bin/patchbot/plugins.py", line 49, in trailing_whitespace
    raise ValueError(msg)
ValueError: Trailing whitespace inserted on 5 non-empty lines.
plugins.trailing_whitespace -- 0 seconds
```

but when I manually did "sage -br", everything did work fine, hence the positive review.



---

archive/issue_comments_164133.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-05-29T14:56:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13023#issuecomment-164133",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_164134.json:
```json
{
    "body": "<a id='comment:9'></a>The documentation needs work:\n\n```\ndochtml.log:/padic/scratch/jdemeyer/merger/sage-5.1.beta2/devel/sage/doc/en/reference/sage/schemes/toric/variety_library.rst:11: WARNING: autodoc can't import/find module 'sage.schemes.toric.variety_library', it reported error: \"No module named variety_library\", please check your spelling and sys.path\ndochtml.log:None:27: WARNING: citation not found: FultonP65\ndochtml.log:None:70: WARNING: citation not found: FS\n```",
    "created_at": "2012-05-29T14:56:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13023#issuecomment-164134",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'></a>The documentation needs work:

```
dochtml.log:/padic/scratch/jdemeyer/merger/sage-5.1.beta2/devel/sage/doc/en/reference/sage/schemes/toric/variety_library.rst:11: WARNING: autodoc can't import/find module 'sage.schemes.toric.variety_library', it reported error: "No module named variety_library", please check your spelling and sys.path
dochtml.log:None:27: WARNING: citation not found: FultonP65
dochtml.log:None:70: WARNING: citation not found: FS
```



---

archive/issue_comments_164135.json:
```json
{
    "body": "Attachment [trac_13023_move_toric_files.patch](tarball://root/attachments/some-uuid/ticket13023/trac_13023_move_toric_files.patch) by @novoselt created at 2012-05-29 16:34:30\n\nActual move with minimal changes",
    "created_at": "2012-05-29T16:34:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13023#issuecomment-164135",
    "user": "https://github.com/novoselt"
}
```

Attachment [trac_13023_move_toric_files.patch](tarball://root/attachments/some-uuid/ticket13023/trac_13023_move_toric_files.patch) by @novoselt created at 2012-05-29 16:34:30

Actual move with minimal changes



---

archive/issue_comments_164136.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2012-05-29T16:35:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13023#issuecomment-164136",
    "user": "https://github.com/novoselt"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_164137.json:
```json
{
    "body": "<a id='comment:10'></a>I'll take the liberty of switching back to positive review - in the rst file \"variety_library\" had to be just \"library\".",
    "created_at": "2012-05-29T16:35:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13023#issuecomment-164137",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:10'></a>I'll take the liberty of switching back to positive review - in the rst file "variety_library" had to be just "library".



---

archive/issue_comments_164138.json:
```json
{
    "body": "<a id='comment:11'></a>Apply trac_13023_move_toric_files.patch trac_13023_adjust_toric_imports.patch trac_13023_fix_circular_imports.patch",
    "created_at": "2012-05-29T16:36:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13023#issuecomment-164138",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:11'></a>Apply trac_13023_move_toric_files.patch trac_13023_adjust_toric_imports.patch trac_13023_fix_circular_imports.patch



---

archive/issue_comments_164139.json:
```json
{
    "body": "<a id='comment:12'></a>With new patches and after completely wiping out the doc output:\n\n```\nsphinx-build -b html -d /home/novoselt/sage-5.1.beta0/devel/sage/doc/output/doctrees/en/reference    /home/novoselt/sage-5.1.beta0/devel/sage/doc/en/reference /home/novoselt/sage-5.1.beta0/devel/sage/doc/output/html/en/reference\nRunning Sphinx v1.1.2\nloading pickled environment... not yet created\nloading intersphinx inventory from /home/novoselt/sage-5.1.beta0/devel/sage/doc/common/python.inv...\nbuilding [html]: targets for 1026 source files that are out of date\nupdating environment: 1026 added, 0 changed, 0 removed\nreading sources... [100%] todolist                                                                                                                           \nlooking for now-outdated files... none found\npickling environment... done\nchecking consistency... done\npreparing documents... done\nwriting output... [100%] todolist                                                                                                                            \nwriting additional files... genindex py-modindex search\ncopying images... [100%] sage/homology/../../media/homology/torus_labelled.png                                                                               \ncopying static files... done\ndumping search index... done\ndumping object inventory... done\nbuild succeeded.\nBuild finished.  The built documents can be found in /home/novoselt/sage-5.1.beta0/devel/sage/doc/output/html/en/reference\n```\nso all seems to be well now.",
    "created_at": "2012-05-29T17:33:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13023#issuecomment-164139",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:12'></a>With new patches and after completely wiping out the doc output:

```
sphinx-build -b html -d /home/novoselt/sage-5.1.beta0/devel/sage/doc/output/doctrees/en/reference    /home/novoselt/sage-5.1.beta0/devel/sage/doc/en/reference /home/novoselt/sage-5.1.beta0/devel/sage/doc/output/html/en/reference
Running Sphinx v1.1.2
loading pickled environment... not yet created
loading intersphinx inventory from /home/novoselt/sage-5.1.beta0/devel/sage/doc/common/python.inv...
building [html]: targets for 1026 source files that are out of date
updating environment: 1026 added, 0 changed, 0 removed
reading sources... [100%] todolist                                                                                                                           
looking for now-outdated files... none found
pickling environment... done
checking consistency... done
preparing documents... done
writing output... [100%] todolist                                                                                                                            
writing additional files... genindex py-modindex search
copying images... [100%] sage/homology/../../media/homology/torus_labelled.png                                                                               
copying static files... done
dumping search index... done
dumping object inventory... done
build succeeded.
Build finished.  The built documents can be found in /home/novoselt/sage-5.1.beta0/devel/sage/doc/output/html/en/reference
```
so all seems to be well now.



---

archive/issue_events_035671.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-06-14T06:43:38Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13023",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13023#event-35671"
}
```



---

archive/issue_comments_164140.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-06-14T06:43:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13023#issuecomment-164140",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
