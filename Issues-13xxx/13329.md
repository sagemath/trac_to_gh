# Issue 13329: Add OpenSSL prereq check

archive/issues_013157.json:
```json
{
    "body": "In the `prereq` script, add a check for OpenSSL headers (required to build the new Sage Notebook).\n\nApply:\n- to SAGE_ROOT: [attachment:13329_sage_root.patch]\n- copy the new prereq tarball into `spkg/base`: [http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.1.tar.gz](http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.1.tar.gz) (changes for review: [attachment:prereq-1.1.2.diff] and [attachment:prereq-1.1-reviewer.diff] and [attachment:prereq-1.1-libs.patch])\n\nAssignee: GeorgSWeber\n\nCC:  @kini\n\nReviewer: Volker Braun, Jeroen Demeyer\n\nAuthor: Jeroen Demeyer, Volker Braun\n\nMerged: sage-5.3.beta1\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/13329\n\n",
    "closed_at": "2012-08-12T19:02:14Z",
    "created_at": "2012-08-03T06:10:34Z",
    "labels": [
        "component: build",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.3",
    "title": "Add OpenSSL prereq check",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13329",
    "user": "https://github.com/jdemeyer"
}
```
In the `prereq` script, add a check for OpenSSL headers (required to build the new Sage Notebook).

Apply:
- to SAGE_ROOT: [attachment:13329_sage_root.patch]
- copy the new prereq tarball into `spkg/base`: [http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.1.tar.gz](http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.1.tar.gz) (changes for review: [attachment:prereq-1.1.2.diff] and [attachment:prereq-1.1-reviewer.diff] and [attachment:prereq-1.1-libs.patch])

Assignee: GeorgSWeber

CC:  @kini

Reviewer: Volker Braun, Jeroen Demeyer

Author: Jeroen Demeyer, Volker Braun

Merged: sage-5.3.beta1

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/13329





---

archive/issue_comments_199474.json:
```json
{
    "body": "<a id='comment:1'></a>Yes, and maybe more.",
    "created_at": "2012-08-03T07:09:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13329#issuecomment-199474",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:1'></a>Yes, and maybe more.



---

archive/issue_comments_199475.json:
```json
{
    "body": "Changing author from \"\" to \"Jeroen Demeyer\"",
    "created_at": "2012-08-03T10:15:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13329#issuecomment-199475",
    "user": "https://github.com/jdemeyer"
}
```

Changing author from "" to "Jeroen Demeyer"



---

archive/issue_comments_199476.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,8 @@\n In the `prereq` script, add a check for OpenSSL headers (required to build the new Sage Notebook).\n+\n+Apply:\n+- to SAGE_ROOT: [attachment:13329_sage_root.patch]\n+- copy the new prereq tarball into `spkg/base`: [http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.1.tar.gz](http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.1.tar.gz) (changes for review: [attachment:prereq-1.1.diff])\n \n Comment: 1\n \n``````\n",
    "created_at": "2012-08-03T10:15:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13329#issuecomment-199476",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,8 @@
 In the `prereq` script, add a check for OpenSSL headers (required to build the new Sage Notebook).
+
+Apply:
+- to SAGE_ROOT: [attachment:13329_sage_root.patch]
+- copy the new prereq tarball into `spkg/base`: [http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.1.tar.gz](http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.1.tar.gz) (changes for review: [attachment:prereq-1.1.diff])
 
 Comment: 1
 
``````




---

archive/issue_comments_199477.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-08-03T10:16:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13329#issuecomment-199477",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_199478.json:
```json
{
    "body": "Attachment [prereq-1.1.2.diff](tarball://root/attachments/some-uuid/ticket13329/prereq-1.1.2.diff) by @vbraun created at 2012-08-03 13:54:09\n\nDiff for Volker's version",
    "created_at": "2012-08-03T13:54:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13329#issuecomment-199478",
    "user": "https://github.com/vbraun"
}
```

Attachment [prereq-1.1.2.diff](tarball://root/attachments/some-uuid/ticket13329/prereq-1.1.2.diff) by @vbraun created at 2012-08-03 13:54:09

Diff for Volker's version



---

archive/issue_comments_199479.json:
```json
{
    "body": "<a id='comment:4'></a>As I said on the mailinglist, I think its good to also check for `dpkg-architecture`. I've also added checks for the OpenSSL library and some misc. I'm fine with Jeroen's changes, of course.",
    "created_at": "2012-08-03T13:56:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13329#issuecomment-199479",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:4'></a>As I said on the mailinglist, I think its good to also check for `dpkg-architecture`. I've also added checks for the OpenSSL library and some misc. I'm fine with Jeroen's changes, of course.



---

archive/issue_comments_199480.json:
```json
{
    "body": "Changing author from \"Jeroen Demeyer\" to \"Jeroen Demeyer, Volker Braun\"",
    "created_at": "2012-08-03T13:56:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13329#issuecomment-199480",
    "user": "https://github.com/vbraun"
}
```

Changing author from "Jeroen Demeyer" to "Jeroen Demeyer, Volker Braun"



---

archive/issue_comments_199481.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,8 @@\n+In the `prereq` script, add a check for OpenSSL headers (required to build the new Sage Notebook).\n \n+Apply:\n+- to SAGE_ROOT: [attachment:13329_sage_root.patch]\n+- copy the new prereq tarball into `spkg/base`: [http://www.stp.dias.ie/~vbraun/Sage/spkg/prereq-1.1.tar.gz](http://www.stp.dias.ie/~vbraun/Sage/spkg/prereq-1.1.tar.gz) (changes for review: [attachment:prereq-1.1.diff])\n \n Comment: 1\n \n``````\n",
    "created_at": "2012-08-03T13:56:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13329#issuecomment-199481",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,8 @@
+In the `prereq` script, add a check for OpenSSL headers (required to build the new Sage Notebook).
 
+Apply:
+- to SAGE_ROOT: [attachment:13329_sage_root.patch]
+- copy the new prereq tarball into `spkg/base`: [http://www.stp.dias.ie/~vbraun/Sage/spkg/prereq-1.1.tar.gz](http://www.stp.dias.ie/~vbraun/Sage/spkg/prereq-1.1.tar.gz) (changes for review: [attachment:prereq-1.1.diff])
 
 Comment: 1
 
``````




---

archive/issue_comments_199482.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Volker Braun\"",
    "created_at": "2012-08-03T13:56:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13329#issuecomment-199482",
    "user": "https://github.com/vbraun"
}
```

Changing reviewer from "" to "Volker Braun"



---

archive/issue_comments_199483.json:
```json
{
    "body": "Incremental diff, based on Volker's version",
    "created_at": "2012-08-04T09:44:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13329#issuecomment-199483",
    "user": "https://github.com/jdemeyer"
}
```

Incremental diff, based on Volker's version



---

archive/issue_comments_199484.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,8 @@\n+In the `prereq` script, add a check for OpenSSL headers (required to build the new Sage Notebook).\n \n+Apply:\n+- to SAGE_ROOT: [attachment:13329_sage_root.patch]\n+- copy the new prereq tarball into `spkg/base`: [http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.1.tar.gz](http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.1.tar.gz) (changes for review: [attachment:prereq-1.1.2.diff] and [attachment:prereq-1.1-reviewer.diff])\n \n Comment: 1\n \n``````\n",
    "created_at": "2012-08-04T09:47:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13329#issuecomment-199484",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,8 @@
+In the `prereq` script, add a check for OpenSSL headers (required to build the new Sage Notebook).
 
+Apply:
+- to SAGE_ROOT: [attachment:13329_sage_root.patch]
+- copy the new prereq tarball into `spkg/base`: [http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.1.tar.gz](http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.1.tar.gz) (changes for review: [attachment:prereq-1.1.2.diff] and [attachment:prereq-1.1-reviewer.diff])
 
 Comment: 1
 
``````




---

archive/issue_comments_199485.json:
```json
{
    "body": "<a id='comment:5'></a>Attachment [prereq-1.1-reviewer.diff](tarball://root/attachments/some-uuid/ticket13329/prereq-1.1-reviewer.diff) by @jdemeyer created at 2012-08-04 09:47:33\n\nVolker, I made some further changes.  If you're happy with these, you can set the whole ticket to positive_review.",
    "created_at": "2012-08-04T09:47:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13329#issuecomment-199485",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:5'></a>Attachment [prereq-1.1-reviewer.diff](tarball://root/attachments/some-uuid/ticket13329/prereq-1.1-reviewer.diff) by @jdemeyer created at 2012-08-04 09:47:33

Volker, I made some further changes.  If you're happy with these, you can set the whole ticket to positive_review.



---

archive/issue_comments_199486.json:
```json
{
    "body": "Changing reviewer from \"Volker Braun\" to \"Volker Braun, Jeroen Demeyer\"",
    "created_at": "2012-08-04T09:47:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13329#issuecomment-199486",
    "user": "https://github.com/jdemeyer"
}
```

Changing reviewer from "Volker Braun" to "Volker Braun, Jeroen Demeyer"



---

archive/issue_comments_199487.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-08-04T13:55:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13329#issuecomment-199487",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_199488.json:
```json
{
    "body": "<a id='comment:6'></a>Looks good!",
    "created_at": "2012-08-04T13:55:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13329#issuecomment-199488",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:6'></a>Looks good!



---

archive/issue_comments_199489.json:
```json
{
    "body": "<a id='comment:8'></a>In some cases, we need to add `-lcrypto -ldl` for OpenSSL to link correctly.",
    "created_at": "2012-08-08T09:15:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13329#issuecomment-199489",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'></a>In some cases, we need to add `-lcrypto -ldl` for OpenSSL to link correctly.



---

archive/issue_comments_199490.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-08-08T09:15:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13329#issuecomment-199490",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_199491.json:
```json
{
    "body": "<a id='comment:9'></a>Another issue: prereq doesn't actually check `SAGE_LOCAL/lib`, since `sage-env` wasn't sourced. Fixed in the new SAGE_ROOT patch.",
    "created_at": "2012-08-08T10:02:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13329#issuecomment-199491",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'></a>Another issue: prereq doesn't actually check `SAGE_LOCAL/lib`, since `sage-env` wasn't sourced. Fixed in the new SAGE_ROOT patch.



---

archive/issue_comments_199492.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,8 @@\n+In the `prereq` script, add a check for OpenSSL headers (required to build the new Sage Notebook).\n \n+Apply:\n+- to SAGE_ROOT: [attachment:13329_sage_root.patch]\n+- copy the new prereq tarball into `spkg/base`: [http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.1.tar.gz](http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.1.tar.gz) (changes for review: [attachment:prereq-1.1.2.diff] and [attachment:prereq-1.1-reviewer.diff] and [attachment:prereq-1.1-libs.patch])\n \n Comment: 1\n \n``````\n",
    "created_at": "2012-08-08T10:06:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13329#issuecomment-199492",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,8 @@
+In the `prereq` script, add a check for OpenSSL headers (required to build the new Sage Notebook).
 
+Apply:
+- to SAGE_ROOT: [attachment:13329_sage_root.patch]
+- copy the new prereq tarball into `spkg/base`: [http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.1.tar.gz](http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.1.tar.gz) (changes for review: [attachment:prereq-1.1.2.diff] and [attachment:prereq-1.1-reviewer.diff] and [attachment:prereq-1.1-libs.patch])
 
 Comment: 1
 
``````




---

archive/issue_comments_199493.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#13348\"",
    "created_at": "2012-08-08T10:16:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13329#issuecomment-199493",
    "user": "https://github.com/jdemeyer"
}
```

Changing dependencies from "" to "#13348"



---

archive/issue_comments_199494.json:
```json
{
    "body": "Changing dependencies from \"#13348\" to \"\"",
    "created_at": "2012-08-08T10:24:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13329#issuecomment-199494",
    "user": "https://github.com/jdemeyer"
}
```

Changing dependencies from "#13348" to ""



---

archive/issue_comments_199495.json:
```json
{
    "body": "<a id='comment:13'></a>Actually, sourcing `sage-env` doesn't help because using the `LIBRARY_PATH` environment variable isn't very portable.",
    "created_at": "2012-08-08T10:36:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13329#issuecomment-199495",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'></a>Actually, sourcing `sage-env` doesn't help because using the `LIBRARY_PATH` environment variable isn't very portable.



---

archive/issue_comments_199496.json:
```json
{
    "body": "Apply to SAGE_ROOT",
    "created_at": "2012-08-08T10:37:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13329#issuecomment-199496",
    "user": "https://github.com/jdemeyer"
}
```

Apply to SAGE_ROOT



---

archive/issue_comments_199497.json:
```json
{
    "body": "Attachment [prereq-1.1-libs.patch](tarball://root/attachments/some-uuid/ticket13329/prereq-1.1-libs.patch) by @jdemeyer created at 2012-08-08 11:59:51",
    "created_at": "2012-08-08T11:59:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13329#issuecomment-199497",
    "user": "https://github.com/jdemeyer"
}
```

Attachment [prereq-1.1-libs.patch](tarball://root/attachments/some-uuid/ticket13329/prereq-1.1-libs.patch) by @jdemeyer created at 2012-08-08 11:59:51



---

archive/issue_comments_199498.json:
```json
{
    "body": "<a id='comment:14'></a>In the end, I reverted the SAGE_ROOT patch to the one which got positive_review already.\n\nI added [attachment:prereq-1.1-libs.patch] to the prereq configure script, needs review.",
    "created_at": "2012-08-08T12:05:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13329#issuecomment-199498",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:14'></a>In the end, I reverted the SAGE_ROOT patch to the one which got positive_review already.

I added [attachment:prereq-1.1-libs.patch] to the prereq configure script, needs review.



---

archive/issue_comments_199499.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-08-08T12:05:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13329#issuecomment-199499",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_199500.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-08-08T13:15:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13329#issuecomment-199500",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_199501.json:
```json
{
    "body": "<a id='comment:15'></a>looks good to me",
    "created_at": "2012-08-08T13:15:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13329#issuecomment-199501",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:15'></a>looks good to me



---

archive/issue_comments_199502.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-08-12T19:02:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13329#issuecomment-199502",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_199503.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-5.3.beta1\"",
    "created_at": "2012-08-12T19:02:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13329#issuecomment-199503",
    "user": "https://github.com/jdemeyer"
}
```

Changing merged from "" to "sage-5.3.beta1"



---

archive/issue_events_036916.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-12T19:02:14Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13329",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13329#event-36916"
}
```



---

archive/issue_comments_199504.json:
```json
{
    "body": "<a id='comment:17'></a>If [sage-devel](http://thread.gmane.org/gmane.comp.mathematics.sage.devel/54802/) decides #13385 is a good idea, we would have to undo part of this, namely the check for OpenSSL dev headers that titles this ticket.",
    "created_at": "2012-08-21T07:05:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13329",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13329#issuecomment-199504",
    "user": "https://github.com/kini"
}
```

<a id='comment:17'></a>If [sage-devel](http://thread.gmane.org/gmane.comp.mathematics.sage.devel/54802/) decides #13385 is a good idea, we would have to undo part of this, namely the check for OpenSSL dev headers that titles this ticket.
