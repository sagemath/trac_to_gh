# Issue 24966: Speed up FiniteField.zeta()

archive/issues_024966.json:
```json
{
    "body": "Something like this takes forever:\n\n```\nsage: GF(2^1000).zeta(3)\n```\n\nThis is because `k.zeta()` is implemented by taking the power of a multiplicative generator, but computing a multiplicative generator can take a very long time.\n\nIssue created by migration from https://trac.sagemath.org/ticket/25203\n\n",
    "created_at": "2018-04-18T12:15:02Z",
    "labels": [
        "finite rings",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.3",
    "title": "Speed up FiniteField.zeta()",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24966",
    "user": "@jdemeyer"
}
```
Something like this takes forever:

```
sage: GF(2^1000).zeta(3)
```

This is because `k.zeta()` is implemented by taking the power of a multiplicative generator, but computing a multiplicative generator can take a very long time.

Issue created by migration from https://trac.sagemath.org/ticket/25203





---

archive/issue_comments_351379.json:
```json
{
    "body": "New commits:",
    "created_at": "2018-04-19T08:54:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24966#issuecomment-351379",
    "user": "@jdemeyer"
}
```

New commits:



---

archive/issue_comments_351380.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-04-19T08:54:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24966#issuecomment-351380",
    "user": "@jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_351381.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-04-19T12:35:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24966#issuecomment-351381",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_351382.json:
```json
{
    "body": "There is no clear specifications with `R.zeta(n)` for a general ring `R` but I would expect `R.zeta(m*n) ** m == R.zeta(n)` to be `True`. This might not be the case anymore with your implementation that returns \"some\" root of unity. I do think that your version is more useful than the previous one. But perhaps not appropriate for the name \"zeta\". What do you think?",
    "created_at": "2018-05-01T12:55:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24966#issuecomment-351382",
    "user": "@videlec"
}
```

There is no clear specifications with `R.zeta(n)` for a general ring `R` but I would expect `R.zeta(m*n) ** m == R.zeta(n)` to be `True`. This might not be the case anymore with your implementation that returns "some" root of unity. I do think that your version is more useful than the previous one. But perhaps not appropriate for the name "zeta". What do you think?



---

archive/issue_comments_351383.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2018-05-01T12:55:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24966#issuecomment-351383",
    "user": "@videlec"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_351384.json:
```json
{
    "body": "I am wondering if we can somehow compute `zeta(n)` in a compatible way. Suppose that somebody first asks for `zeta(n)` and then `zeta(n * m)`, can we enforce compatibility? Or do we need discrete logs for that?",
    "created_at": "2018-05-01T14:35:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24966#issuecomment-351384",
    "user": "@jdemeyer"
}
```

I am wondering if we can somehow compute `zeta(n)` in a compatible way. Suppose that somebody first asks for `zeta(n)` and then `zeta(n * m)`, can we enforce compatibility? Or do we need discrete logs for that?



---

archive/issue_comments_351385.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-05-01T17:38:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24966#issuecomment-351385",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_351386.json:
```json
{
    "body": "I just talked to Luca and we both think that it's hard to enforce compatibility for large finite fields. So I suggest that we don't do this. I added a warning to the documentation to explain this.",
    "created_at": "2018-05-01T17:39:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24966#issuecomment-351386",
    "user": "@jdemeyer"
}
```

I just talked to Luca and we both think that it's hard to enforce compatibility for large finite fields. So I suggest that we don't do this. I added a warning to the documentation to explain this.



---

archive/issue_comments_351387.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2018-05-01T19:21:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24966#issuecomment-351387",
    "user": "@jdemeyer"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_351388.json:
```json
{
    "body": "The doctest\n\n```\nsage: k.<a> = GF(2^2000)\nsage: p = 8877945148742945001146041439025147034098690503591013177336356694416517527310181938001\nsage: z = k.zeta(p)\nsage: z ^ p\n1\n```\n\nis not wonderful as it might well be that `z = 1`. Sadly `z.multiplicative_order()` does not terminate.",
    "created_at": "2018-05-02T05:38:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24966#issuecomment-351388",
    "user": "@videlec"
}
```

The doctest

```
sage: k.<a> = GF(2^2000)
sage: p = 8877945148742945001146041439025147034098690503591013177336356694416517527310181938001
sage: z = k.zeta(p)
sage: z ^ p
1
```

is not wonderful as it might well be that `z = 1`. Sadly `z.multiplicative_order()` does not terminate.



---

archive/issue_comments_351389.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-05-02T07:43:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24966#issuecomment-351389",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_351390.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-05-02T08:42:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24966#issuecomment-351390",
    "user": "@videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_351391.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-05-14T17:35:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24966#issuecomment-351391",
    "user": "@vbraun"
}
```

Resolution: fixed
