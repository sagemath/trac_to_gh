# Issue 25504: Speedup _mpoly_dict_recursive by Cythonizing it

archive/issues_025504.json:
```json
{
    "body": "CC:  tscrim jdemeyer\n\nKeywords: days94\n\nThis is called in constructing elements of multivariate Laurent polynomial rings, so it is worth speeding it up.\n\nIssue created by migration from https://trac.sagemath.org/ticket/25741\n\n",
    "created_at": "2018-07-02T14:10:00Z",
    "labels": [
        "performance",
        "major",
        "enhancement"
    ],
    "title": "Speedup _mpoly_dict_recursive by Cythonizing it",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25504",
    "user": "tscrim"
}
```
CC:  tscrim jdemeyer

Keywords: days94

This is called in constructing elements of multivariate Laurent polynomial rings, so it is worth speeding it up.

Issue created by migration from https://trac.sagemath.org/ticket/25741





---

archive/issue_comments_359736.json:
```json
{
    "body": "\n```\nsage: R = Integers(10)['x,y,z']['t,s']\nsage: t,s = R.gens()\nsage: x,y,z = R.base_ring().gens()\nsage: %timeit (x+y+2*z*s+3*t)._mpoly_dict_recursive(('z','t','s'))\nThe slowest run took 8.13 times longer than the fastest. This could mean that an intermediate result is being cached.\n1000 loops, best of 3: 1.38 ms per loop\n```\n\nversus old\n\n```\nsage: %timeit (x+y+2*z*s+3*t)._mpoly_dict_recursive(('z','t','s'))\nThe slowest run took 115.43 times longer than the fastest. This could mean that an intermediate result is being cached.\n1000 loops, best of 3: 1.47 ms per loop\n```\n\nSo currently it has a ~10% speedup.",
    "created_at": "2018-07-02T14:11:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25504#issuecomment-359736",
    "user": "tscrim"
}
```


```
sage: R = Integers(10)['x,y,z']['t,s']
sage: t,s = R.gens()
sage: x,y,z = R.base_ring().gens()
sage: %timeit (x+y+2*z*s+3*t)._mpoly_dict_recursive(('z','t','s'))
The slowest run took 8.13 times longer than the fastest. This could mean that an intermediate result is being cached.
1000 loops, best of 3: 1.38 ms per loop
```

versus old

```
sage: %timeit (x+y+2*z*s+3*t)._mpoly_dict_recursive(('z','t','s'))
The slowest run took 115.43 times longer than the fastest. This could mean that an intermediate result is being cached.
1000 loops, best of 3: 1.47 ms per loop
```

So currently it has a ~10% speedup.



---

archive/issue_comments_359737.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-07-02T15:19:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25504#issuecomment-359737",
    "user": "tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_359738.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-07-02T15:19:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25504#issuecomment-359738",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_359739.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-07-03T08:32:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25504#issuecomment-359739",
    "user": "mmezzarobba"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_359740.json:
```json
{
    "body": "lgtm!",
    "created_at": "2018-07-03T08:32:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25504#issuecomment-359740",
    "user": "mmezzarobba"
}
```

lgtm!



---

archive/issue_comments_359741.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-08-05T08:17:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25504#issuecomment-359741",
    "user": "vbraun"
}
```

Resolution: fixed
