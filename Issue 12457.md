# Issue 12457: Fix Linbox DISABLE_COMMENTATOR

Issue created by migration from https://trac.sagemath.org/ticket/12629

Original creator: jdemeyer

Original creation time: 2012-03-04 22:52:42

Assignee: tbd

Linbox has its infamous `DISABLE_COMMENTATOR` #define.  When compiling code with this flag set, the commentator is disabled.  But Linbox itself is compiled with the commentator enabled.  Because the Sage library is built with the commentator disabled, this creates the following problem:

 1. The disabled commentator is constructed using a dummy constructor.
 2. That commentator is then destructed using the real destructor, causing havoc.


---

Comment by jdemeyer created at 2012-03-04 22:52:53

Changing type from PLEASE CHANGE to defect.


---

Comment by jdemeyer created at 2012-03-05 11:28:37

Changing priority from critical to blocker.


---

Comment by jdemeyer created at 2012-03-06 13:10:32

Diff for the linbox spkg, for review only


---

Attachment


---

Comment by jdemeyer created at 2012-03-06 13:10:45

Changing status from new to needs_review.


---

Comment by malb created at 2012-03-06 14:47:30

Changing status from needs_review to positive_review.


---

Comment by malb created at 2012-03-06 14:47:30

* patch looks good
 * SPKG has no obvious problems (hg status, hg log etc.)
 * doctests pass.

I am satisfied and assume that any possibly outstanding issues will be caught by the buildbot.


---

Comment by jdemeyer created at 2012-03-13 08:25:27

Resolution: fixed


---

Comment by leif created at 2012-04-07 21:17:55

See #12762 for a follow-up.  (The "disable commentator" patch in the p7 breaks building the test suite; fixed in a p8 there, which [of course] also adds an `spkg-check` file.)
