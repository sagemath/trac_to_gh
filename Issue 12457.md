# Issue 12457: Fix Linbox DISABLE_COMMENTATOR

archive/issues_012457.json:
```json
{
    "body": "Assignee: tbd\n\nLinbox has its infamous `DISABLE_COMMENTATOR` #define.  When compiling code with this flag set, the commentator is disabled.  But Linbox itself is compiled with the commentator enabled.  Because the Sage library is built with the commentator disabled, this creates the following problem:\n\n1. The disabled commentator is constructed using a dummy constructor.\n2. That commentator is then destructed using the real destructor, causing havoc.\n\nIssue created by migration from https://trac.sagemath.org/ticket/12629\n\n",
    "created_at": "2012-03-04T22:52:42Z",
    "labels": [
        "packages: standard",
        "critical",
        "PLEASE CHANGE"
    ],
    "title": "Fix Linbox DISABLE_COMMENTATOR",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12457",
    "user": "jdemeyer"
}
```
Assignee: tbd

Linbox has its infamous `DISABLE_COMMENTATOR` #define.  When compiling code with this flag set, the commentator is disabled.  But Linbox itself is compiled with the commentator enabled.  Because the Sage library is built with the commentator disabled, this creates the following problem:

1. The disabled commentator is constructed using a dummy constructor.
2. That commentator is then destructed using the real destructor, causing havoc.

Issue created by migration from https://trac.sagemath.org/ticket/12629





---

archive/issue_comments_147222.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2012-03-04T22:52:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12457",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12457#issuecomment-147222",
    "user": "jdemeyer"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_147223.json:
```json
{
    "body": "Changing priority from critical to blocker.",
    "created_at": "2012-03-05T11:28:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12457",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12457#issuecomment-147223",
    "user": "jdemeyer"
}
```

Changing priority from critical to blocker.



---

archive/issue_comments_147224.json:
```json
{
    "body": "Diff for the linbox spkg, for review only",
    "created_at": "2012-03-06T13:10:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12457",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12457#issuecomment-147224",
    "user": "jdemeyer"
}
```

Diff for the linbox spkg, for review only



---

archive/issue_comments_147225.json:
```json
{
    "body": "Attachment [linbox-1.1.6.p7.diff](tarball://root/attachments/some-uuid/ticket12629/linbox-1.1.6.p7.diff) by jdemeyer created at 2012-03-06 13:10:45",
    "created_at": "2012-03-06T13:10:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12457",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12457#issuecomment-147225",
    "user": "jdemeyer"
}
```

Attachment [linbox-1.1.6.p7.diff](tarball://root/attachments/some-uuid/ticket12629/linbox-1.1.6.p7.diff) by jdemeyer created at 2012-03-06 13:10:45



---

archive/issue_comments_147226.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-03-06T13:10:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12457",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12457#issuecomment-147226",
    "user": "jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_147227.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-03-06T14:47:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12457",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12457#issuecomment-147227",
    "user": "malb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_147228.json:
```json
{
    "body": "* patch looks good\n  * SPKG has no obvious problems (hg status, hg log etc.)\n  * doctests pass.\n\nI am satisfied and assume that any possibly outstanding issues will be caught by the buildbot.",
    "created_at": "2012-03-06T14:47:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12457",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12457#issuecomment-147228",
    "user": "malb"
}
```

* patch looks good
  * SPKG has no obvious problems (hg status, hg log etc.)
  * doctests pass.

I am satisfied and assume that any possibly outstanding issues will be caught by the buildbot.



---

archive/issue_comments_147229.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-03-13T08:25:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12457",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12457#issuecomment-147229",
    "user": "jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_147230.json:
```json
{
    "body": "See #12762 for a follow-up.  (The \"disable commentator\" patch in the p7 breaks building the test suite; fixed in a p8 there, which [of course] also adds an `spkg-check` file.)",
    "created_at": "2012-04-07T21:17:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12457",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12457#issuecomment-147230",
    "user": "leif"
}
```

See #12762 for a follow-up.  (The "disable commentator" patch in the p7 breaks building the test suite; fixed in a p8 there, which [of course] also adds an `spkg-check` file.)
