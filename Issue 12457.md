# Issue 12457: Completely disable the LinBox commentator

archive/issues_012457.json:
```json
{
    "body": "Assignee: tbd\n\nLinbox has its infamous commentator, regularly causing trouble on various systems.  This commentator can be disabled by building with `-DDISABLE_COMMENTATOR`, this is done in the parts of the Sage library which use Linbox.\n\nBut Linbox itself is compiled with the commentator enabled.  The problem is that commentator-enabled code is not compatible with commentator-disabled code because of C++ constructors/destructors.\n\nThis causes problems in particular with GCC-4.6.3 (#12369) on OS X 10.4 PPC, but problems with the Linbox commentator have been observed on different systems too.\n\nProposed solution: **always** disable the commentator by using `-DDISABLE_COMMENTATOR` in the Linbox spkg.  A patch is needed (backported from Linbox-1.2.2) to actually allow building Linbox like this.\n\n**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/linbox-1.1.6.p7.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/linbox-1.1.6.p7.spkg)\n\nIssue created by migration from https://trac.sagemath.org/ticket/12629\n\n",
    "closed_at": "2012-03-13T08:25:27Z",
    "created_at": "2012-03-04T22:52:42Z",
    "labels": [
        "component: packages: standard",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.0",
    "title": "Completely disable the LinBox commentator",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12457",
    "user": "https://github.com/jdemeyer"
}
```
Assignee: tbd

Linbox has its infamous commentator, regularly causing trouble on various systems.  This commentator can be disabled by building with `-DDISABLE_COMMENTATOR`, this is done in the parts of the Sage library which use Linbox.

But Linbox itself is compiled with the commentator enabled.  The problem is that commentator-enabled code is not compatible with commentator-disabled code because of C++ constructors/destructors.

This causes problems in particular with GCC-4.6.3 (#12369) on OS X 10.4 PPC, but problems with the Linbox commentator have been observed on different systems too.

Proposed solution: **always** disable the commentator by using `-DDISABLE_COMMENTATOR` in the Linbox spkg.  A patch is needed (backported from Linbox-1.2.2) to actually allow building Linbox like this.

**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/linbox-1.1.6.p7.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/linbox-1.1.6.p7.spkg)

Issue created by migration from https://trac.sagemath.org/ticket/12629





---

archive/issue_comments_146999.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2012-03-04T22:52:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12457",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12457#issuecomment-146999",
    "user": "https://github.com/jdemeyer"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_147000.json:
```json
{
    "body": "Changing priority from critical to blocker.",
    "created_at": "2012-03-05T11:28:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12457",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12457#issuecomment-147000",
    "user": "https://github.com/jdemeyer"
}
```

Changing priority from critical to blocker.



---

archive/issue_comments_147001.json:
```json
{
    "body": "Diff for the linbox spkg, for review only",
    "created_at": "2012-03-06T13:10:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12457",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12457#issuecomment-147001",
    "user": "https://github.com/jdemeyer"
}
```

Diff for the linbox spkg, for review only



---

archive/issue_comments_147002.json:
```json
{
    "body": "Attachment [linbox-1.1.6.p7.diff](tarball://root/attachments/some-uuid/ticket12629/linbox-1.1.6.p7.diff) by @jdemeyer created at 2012-03-06 13:10:45",
    "created_at": "2012-03-06T13:10:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12457",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12457#issuecomment-147002",
    "user": "https://github.com/jdemeyer"
}
```

Attachment [linbox-1.1.6.p7.diff](tarball://root/attachments/some-uuid/ticket12629/linbox-1.1.6.p7.diff) by @jdemeyer created at 2012-03-06 13:10:45



---

archive/issue_comments_147003.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-03-06T13:10:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12457",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12457#issuecomment-147003",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_147004.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-03-06T14:47:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12457",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12457#issuecomment-147004",
    "user": "https://github.com/malb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_147005.json:
```json
{
    "body": "* patch looks good\n  * SPKG has no obvious problems (hg status, hg log etc.)\n  * doctests pass.\n\nI am satisfied and assume that any possibly outstanding issues will be caught by the buildbot.",
    "created_at": "2012-03-06T14:47:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12457",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12457#issuecomment-147005",
    "user": "https://github.com/malb"
}
```

* patch looks good
  * SPKG has no obvious problems (hg status, hg log etc.)
  * doctests pass.

I am satisfied and assume that any possibly outstanding issues will be caught by the buildbot.



---

archive/issue_events_034220.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-03-13T08:25:27Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12457",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12457#event-34220"
}
```



---

archive/issue_comments_147006.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-03-13T08:25:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12457",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12457#issuecomment-147006",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_147007.json:
```json
{
    "body": "See #12762 for a follow-up.  (The \"disable commentator\" patch in the p7 breaks building the test suite; fixed in a p8 there, which [of course] also adds an `spkg-check` file.)",
    "created_at": "2012-04-07T21:17:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12457",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12457#issuecomment-147007",
    "user": "https://github.com/nexttime"
}
```

See #12762 for a follow-up.  (The "disable commentator" patch in the p7 breaks building the test suite; fixed in a p8 there, which [of course] also adds an `spkg-check` file.)
