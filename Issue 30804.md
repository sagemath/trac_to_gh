# Issue 30804: Set environment for sage.misc.cython

Issue created by migration from https://trac.sagemath.org/ticket/31041

Original creator: mkoeppe

Original creation time: 2020-12-11 19:11:47

CC:  fbissey thansen @tobiasdiez strogdon dimpase mjo

Keywords: sd111

In particular `libdir` needs to be set correctly, using `sysconfig`, to ensure that it works correctly in distributions that use `lib64` or multiarch installation schemes.

It may seem that nothing needs to be set because the environment variable `LIBRARY_PATH` is already set by `sage-env`. But for #30818 we wish to support also a full functional sagelib when `sage-env` has not been used.

See also: #30901: `sage.env._get_shared_lib_filename`: Fix for `MULTIARCH`




---

Comment by mkoeppe created at 2021-03-27 02:13:38

Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.


---

Comment by mkoeppe created at 2021-05-27 21:05:55

Another question here is whether the whole functionality of `sage.misc.cython` (and the IPython line/cell magic %cython) should not be split out into a separate Python distribution package.
