# Issue 18615: interactive_simplex_method: Output improvements

Issue created by migration from Trac.

Original creator: mkoeppe

Original creation time: 2015-07-06 00:26:30

CC:  novoselt ncohen

Keywords: lp

I tried to use interactive_simplex_method in SageMathCloud, and it seems the current model of `InteractiveLPProblemStandardForm.run_simplex_method` and `LPDictionary.ELLUL` to return a string of LaTeX code is not a good fit.

I propose to change these methods so they just call `pretty_print` repeatedly and return nothing. An optional keyword argument, show=False, would turn off output. This is used when, for example, `run_simplex_method` is called by `final_dictionary`.


---

Comment by mkoeppe created at 2015-07-06 02:27:24

screen shot - interactive simplex in SageMathCloud


---

Attachment


---

Comment by novoselt created at 2015-07-06 02:49:07

Please don't make rush changes here - it was a lot of pain to make things work in SageNB and SageTeX. The name also may not be fitting if it was just printing something.

Note that it does not return just a string - it returns a `LatexExpr` which should be typeset by frontends automatically.

Although there are problems because of the long LaTeX code - I had to increase limits on the size of expressions handled by SMC. So there may be some sense in showing steps as separate formulas in `run_simplex_method` to ease the load on MathJax, but `ELLUL` works exactly as it should - if SMC can't deal with it, SMC has to be tuned.


---

Comment by mkoeppe created at 2015-07-06 03:32:33

Thanks a lot for your comments!
Do we need to Cc: someone working on SMC to make them aware of this?


---

Comment by novoselt created at 2015-07-06 19:01:48

I've opened https://github.com/sagemathinc/smc/issues/40


---

Comment by mkoeppe created at 2015-07-22 01:18:19

Replying to [comment:2 novoselt]:
> Although there are problems because of the long LaTeX code - I had to increase limits on the size of expressions handled by SMC. So there may be some sense in showing steps as separate formulas in `run_simplex_method` to ease the load on MathJax, but `ELLUL` works exactly as it should - if SMC can't deal with it, SMC has to be tuned.

I guess showing the steps as separate formulas would also allow to show a plot after each update step (if the user requests that), showing the current basic solution...


---

Comment by novoselt created at 2015-08-25 19:33:06

Once we have html blocks implemented, `run_simplex_method` should return `HTMLFragment` which will be the current string:
 - it should display nicely when rendered as HTML
 - formulas will be in math mode automatically and will be rendered one-by-one, helping to avoid problems with too long input for MathJax
 - the same string should work as LaTeX code as well

`ELLUL` on the other hand still should return `LatexExpr` since it constructs a single formula.


---

Comment by mkoeppe created at 2015-08-26 19:09:21

This sounds like a plan, though I must say that I don't understand the output model of Sage. 

I know that run_simplex_method stores the final dictionary in an attribute; but suppose it would have to be a return value instead. If the function wants to print its progress (sequence of dictionaries) on the screen AND return a value, would it then have to return two values: (1) the HTMLFragment and (2) the dictionary?


---

Comment by novoselt created at 2015-08-26 19:39:00

It is usually a bad idea to output "the progress": you can't be sure how output is handled and there will be no way to catch this output for further processing.


---

Comment by mkoeppe created at 2015-08-26 20:30:55

Well, it's called logging, and python has a somewhat sophisticated facility for this.

Without using the logging facility, one could simply pass a callback function to a productive function such as run_simplex_method that is called when there is something to be output.


---

Comment by novoselt created at 2015-08-26 22:40:21

Logging and output are quite orthogonal, I would say.

I am also not aware of many (if any) functions in Sage that use callbacks apart from "infrastructure". And there is certainly no need for them in this module.


---

Comment by mkoeppe created at 2015-08-26 22:43:35

OK, we'll just wait for #18292


---

Comment by mkoeppe created at 2015-11-13 22:52:30

The new output code of #19097 is a better approach.

This ticket can be closed.


---

Comment by novoselt created at 2015-11-15 17:45:45

Changing status from new to needs_review.


---

Comment by novoselt created at 2015-11-15 17:45:55

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-11-22 20:58:17

Resolution: duplicate
