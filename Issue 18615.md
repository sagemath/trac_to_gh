# Issue 18615: interactive_simplex_method: Output improvements

archive/issues_018615.json:
```json
{
    "body": "CC:  @novoselt @nathanncohen\n\nKeywords: lp\n\nI tried to use interactive_simplex_method in SageMathCloud, and it seems the current model of `InteractiveLPProblemStandardForm.run_simplex_method` and `LPDictionary.ELLUL` to return a string of LaTeX code is not a good fit.\n\nI propose to change these methods so they just call `pretty_print` repeatedly and return nothing. An optional keyword argument, show=False, would turn off output. This is used when, for example, `run_simplex_method` is called by `final_dictionary`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/18852\n\n",
    "created_at": "2015-07-06T00:26:30Z",
    "labels": [
        "component: numerical",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "interactive_simplex_method: Output improvements",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18615",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @novoselt @nathanncohen

Keywords: lp

I tried to use interactive_simplex_method in SageMathCloud, and it seems the current model of `InteractiveLPProblemStandardForm.run_simplex_method` and `LPDictionary.ELLUL` to return a string of LaTeX code is not a good fit.

I propose to change these methods so they just call `pretty_print` repeatedly and return nothing. An optional keyword argument, show=False, would turn off output. This is used when, for example, `run_simplex_method` is called by `final_dictionary`.

Issue created by migration from https://trac.sagemath.org/ticket/18852





---

archive/issue_comments_253143.json:
```json
{
    "body": "screen shot - interactive simplex in SageMathCloud",
    "created_at": "2015-07-06T02:27:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18615#issuecomment-253143",
    "user": "https://github.com/mkoeppe"
}
```

screen shot - interactive simplex in SageMathCloud



---

archive/issue_comments_253144.json:
```json
{
    "body": "Attachment [Screen Shot 2015-07-05 at 7.26.06 PM.png](tarball://root/attachments/some-uuid/ticket18852/Screen Shot 2015-07-05 at 7.26.06 PM.png) by @mkoeppe created at 2015-07-06 02:29:27",
    "created_at": "2015-07-06T02:29:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18615#issuecomment-253144",
    "user": "https://github.com/mkoeppe"
}
```

Attachment [Screen Shot 2015-07-05 at 7.26.06 PM.png](tarball://root/attachments/some-uuid/ticket18852/Screen Shot 2015-07-05 at 7.26.06 PM.png) by @mkoeppe created at 2015-07-06 02:29:27



---

archive/issue_comments_253145.json:
```json
{
    "body": "Please don't make rush changes here - it was a lot of pain to make things work in SageNB and SageTeX. The name also may not be fitting if it was just printing something.\n\nNote that it does not return just a string - it returns a `LatexExpr` which should be typeset by frontends automatically.\n\nAlthough there are problems because of the long LaTeX code - I had to increase limits on the size of expressions handled by SMC. So there may be some sense in showing steps as separate formulas in `run_simplex_method` to ease the load on MathJax, but `ELLUL` works exactly as it should - if SMC can't deal with it, SMC has to be tuned.",
    "created_at": "2015-07-06T02:49:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18615#issuecomment-253145",
    "user": "https://github.com/novoselt"
}
```

Please don't make rush changes here - it was a lot of pain to make things work in SageNB and SageTeX. The name also may not be fitting if it was just printing something.

Note that it does not return just a string - it returns a `LatexExpr` which should be typeset by frontends automatically.

Although there are problems because of the long LaTeX code - I had to increase limits on the size of expressions handled by SMC. So there may be some sense in showing steps as separate formulas in `run_simplex_method` to ease the load on MathJax, but `ELLUL` works exactly as it should - if SMC can't deal with it, SMC has to be tuned.



---

archive/issue_comments_253146.json:
```json
{
    "body": "Thanks a lot for your comments!\nDo we need to Cc: someone working on SMC to make them aware of this?",
    "created_at": "2015-07-06T03:32:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18615#issuecomment-253146",
    "user": "https://github.com/mkoeppe"
}
```

Thanks a lot for your comments!
Do we need to Cc: someone working on SMC to make them aware of this?



---

archive/issue_comments_253147.json:
```json
{
    "body": "I've opened https://github.com/sagemathinc/smc/issues/40",
    "created_at": "2015-07-06T19:01:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18615#issuecomment-253147",
    "user": "https://github.com/novoselt"
}
```

I've opened https://github.com/sagemathinc/smc/issues/40



---

archive/issue_comments_253148.json:
```json
{
    "body": "Replying to [comment:2 novoselt]:\n> Although there are problems because of the long LaTeX code - I had to increase limits on the size of expressions handled by SMC. So there may be some sense in showing steps as separate formulas in `run_simplex_method` to ease the load on MathJax, but `ELLUL` works exactly as it should - if SMC can't deal with it, SMC has to be tuned.\n\nI guess showing the steps as separate formulas would also allow to show a plot after each update step (if the user requests that), showing the current basic solution...",
    "created_at": "2015-07-22T01:18:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18615#issuecomment-253148",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:2 novoselt]:
> Although there are problems because of the long LaTeX code - I had to increase limits on the size of expressions handled by SMC. So there may be some sense in showing steps as separate formulas in `run_simplex_method` to ease the load on MathJax, but `ELLUL` works exactly as it should - if SMC can't deal with it, SMC has to be tuned.

I guess showing the steps as separate formulas would also allow to show a plot after each update step (if the user requests that), showing the current basic solution...



---

archive/issue_comments_253149.json:
```json
{
    "body": "Once we have html blocks implemented, `run_simplex_method` should return `HTMLFragment` which will be the current string:\n- it should display nicely when rendered as HTML\n- formulas will be in math mode automatically and will be rendered one-by-one, helping to avoid problems with too long input for MathJax\n- the same string should work as LaTeX code as well\n\n`ELLUL` on the other hand still should return `LatexExpr` since it constructs a single formula.",
    "created_at": "2015-08-25T19:33:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18615#issuecomment-253149",
    "user": "https://github.com/novoselt"
}
```

Once we have html blocks implemented, `run_simplex_method` should return `HTMLFragment` which will be the current string:
- it should display nicely when rendered as HTML
- formulas will be in math mode automatically and will be rendered one-by-one, helping to avoid problems with too long input for MathJax
- the same string should work as LaTeX code as well

`ELLUL` on the other hand still should return `LatexExpr` since it constructs a single formula.



---

archive/issue_comments_253150.json:
```json
{
    "body": "This sounds like a plan, though I must say that I don't understand the output model of Sage. \n\nI know that run_simplex_method stores the final dictionary in an attribute; but suppose it would have to be a return value instead. If the function wants to print its progress (sequence of dictionaries) on the screen AND return a value, would it then have to return two values: (1) the HTMLFragment and (2) the dictionary?",
    "created_at": "2015-08-26T19:09:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18615#issuecomment-253150",
    "user": "https://github.com/mkoeppe"
}
```

This sounds like a plan, though I must say that I don't understand the output model of Sage. 

I know that run_simplex_method stores the final dictionary in an attribute; but suppose it would have to be a return value instead. If the function wants to print its progress (sequence of dictionaries) on the screen AND return a value, would it then have to return two values: (1) the HTMLFragment and (2) the dictionary?



---

archive/issue_comments_253151.json:
```json
{
    "body": "It is usually a bad idea to output \"the progress\": you can't be sure how output is handled and there will be no way to catch this output for further processing.",
    "created_at": "2015-08-26T19:39:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18615#issuecomment-253151",
    "user": "https://github.com/novoselt"
}
```

It is usually a bad idea to output "the progress": you can't be sure how output is handled and there will be no way to catch this output for further processing.



---

archive/issue_comments_253152.json:
```json
{
    "body": "Well, it's called logging, and python has a somewhat sophisticated facility for this.\n\nWithout using the logging facility, one could simply pass a callback function to a productive function such as run_simplex_method that is called when there is something to be output.",
    "created_at": "2015-08-26T20:30:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18615#issuecomment-253152",
    "user": "https://github.com/mkoeppe"
}
```

Well, it's called logging, and python has a somewhat sophisticated facility for this.

Without using the logging facility, one could simply pass a callback function to a productive function such as run_simplex_method that is called when there is something to be output.



---

archive/issue_comments_253153.json:
```json
{
    "body": "Logging and output are quite orthogonal, I would say.\n\nI am also not aware of many (if any) functions in Sage that use callbacks apart from \"infrastructure\". And there is certainly no need for them in this module.",
    "created_at": "2015-08-26T22:40:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18615#issuecomment-253153",
    "user": "https://github.com/novoselt"
}
```

Logging and output are quite orthogonal, I would say.

I am also not aware of many (if any) functions in Sage that use callbacks apart from "infrastructure". And there is certainly no need for them in this module.



---

archive/issue_comments_253154.json:
```json
{
    "body": "OK, we'll just wait for #18292",
    "created_at": "2015-08-26T22:43:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18615#issuecomment-253154",
    "user": "https://github.com/mkoeppe"
}
```

OK, we'll just wait for #18292



---

archive/issue_comments_253155.json:
```json
{
    "body": "The new output code of #19097 is a better approach.\n\nThis ticket can be closed.",
    "created_at": "2015-11-13T22:52:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18615#issuecomment-253155",
    "user": "https://github.com/mkoeppe"
}
```

The new output code of #19097 is a better approach.

This ticket can be closed.



---

archive/issue_comments_253156.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-11-15T17:45:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18615#issuecomment-253156",
    "user": "https://github.com/novoselt"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_253157.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-11-15T17:45:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18615#issuecomment-253157",
    "user": "https://github.com/novoselt"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_017800.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-11-22T20:58:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18615",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18615#event-17800"
}
```



---

archive/issue_comments_253158.json:
```json
{
    "body": "Resolution: duplicate",
    "created_at": "2015-11-22T20:58:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18615#issuecomment-253158",
    "user": "https://github.com/vbraun"
}
```

Resolution: duplicate
