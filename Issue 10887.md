# Issue 10887: Make it impossible for unpiviliged trac users to close tickets

archive/issues_010887.json:
```json
{
    "body": "Assignee: mvngu, schilly\n\nIn several places in the documentation it says you shouldn't close\u00a0\ntickets if you have never done the release management.\u00a0\nSince it's so trivial to fix maybe we should change the needed rights\u00a0\nto change the\u00a0\nstatus to prevent someone unknowing to close a ticket. According to\u00a0\n[http://trac.edgewall.org/wiki/TracWorkflow](http://www.google.com/url?sa=D&q=http://trac.edgewall.org/wiki/TracWorkflow)\u00a0this\u00a0\ncan be done by changing:\u00a0\n\nclose.permissions = TICKET_MODIFY\u00a0\n\ninto\u00a0\n\nclose.permissions = TICKET_ADMIN\u00a0\n\nin the trac.ini file. Offcourse TICKET_ADMIN could be anything logical\u00a0\nfrom\u00a0[http://trac.edgewall.org/wiki/TracPermissions](http://www.google.com/url?sa=D&q=http://trac.edgewall.org/wiki/TracPermissions)\u00a0\n\nps. we could even do more fancy stuff like add a \"nominate for\u00a0\nclosure\" status to the workflow or a \"request patchbot\" and a\u00a0\n\"patchbot doctest passed\" depending on how the developement workflow\u00a0\nin real life.\n\nIssue created by migration from https://trac.sagemath.org/ticket/10966\n\n",
    "created_at": "2011-03-19T02:36:02Z",
    "labels": [
        "component: website/wiki"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.7",
    "title": "Make it impossible for unpiviliged trac users to close tickets",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10887",
    "user": "https://github.com/koffie"
}
```
Assignee: mvngu, schilly

In several places in the documentation it says you shouldn't close 
tickets if you have never done the release management. 
Since it's so trivial to fix maybe we should change the needed rights 
to change the 
status to prevent someone unknowing to close a ticket. According to 
[http://trac.edgewall.org/wiki/TracWorkflow](http://www.google.com/url?sa=D&q=http://trac.edgewall.org/wiki/TracWorkflow) this 
can be done by changing: 

close.permissions = TICKET_MODIFY 

into 

close.permissions = TICKET_ADMIN 

in the trac.ini file. Offcourse TICKET_ADMIN could be anything logical 
from [http://trac.edgewall.org/wiki/TracPermissions](http://www.google.com/url?sa=D&q=http://trac.edgewall.org/wiki/TracPermissions) 

ps. we could even do more fancy stuff like add a "nominate for 
closure" status to the workflow or a "request patchbot" and a 
"patchbot doctest passed" depending on how the developement workflow 
in real life.

Issue created by migration from https://trac.sagemath.org/ticket/10966





---

archive/issue_comments_116319.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-04-22T10:27:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10887#issuecomment-116319",
    "user": "https://github.com/koffie"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_116320.json:
```json
{
    "body": "I changed the trac config so that closing should not be possible anymore. So test and review :)",
    "created_at": "2011-04-22T10:27:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10887#issuecomment-116320",
    "user": "https://github.com/koffie"
}
```

I changed the trac config so that closing should not be possible anymore. So test and review :)



---

archive/issue_comments_116321.json:
```json
{
    "body": "At least not when you don't have TICKET_ADMIN right's if you have TICKET_ADMIN or something higher like TRAC_ADMIN it is still possible.",
    "created_at": "2011-04-22T10:28:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10887#issuecomment-116321",
    "user": "https://github.com/koffie"
}
```

At least not when you don't have TICKET_ADMIN right's if you have TICKET_ADMIN or something higher like TRAC_ADMIN it is still possible.



---

archive/issue_comments_116322.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-04-22T11:08:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10887#issuecomment-116322",
    "user": "https://github.com/koffie"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_116323.json:
```json
{
    "body": "Attachment [doc-closing-tickets.patch](tarball://root/attachments/some-uuid/ticket10966/doc-closing-tickets.patch) by @koffie created at 2011-04-22 11:10:47",
    "created_at": "2011-04-22T11:10:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10887#issuecomment-116323",
    "user": "https://github.com/koffie"
}
```

Attachment [doc-closing-tickets.patch](tarball://root/attachments/some-uuid/ticket10966/doc-closing-tickets.patch) by @koffie created at 2011-04-22 11:10:47



---

archive/issue_comments_116324.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-04-22T11:11:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10887#issuecomment-116324",
    "user": "https://github.com/koffie"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_116325.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-04-22T11:53:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10887#issuecomment-116325",
    "user": "https://github.com/kini"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_116326.json:
```json
{
    "body": "Looks good. I can't close tickets, and the documentation builds fine. I successfully added a dependency to #11120. Positive review!",
    "created_at": "2011-04-22T11:53:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10887#issuecomment-116326",
    "user": "https://github.com/kini"
}
```

Looks good. I can't close tickets, and the documentation builds fine. I successfully added a dependency to #11120. Positive review!



---

archive/issue_comments_116327.json:
```json
{
    "body": "It's not a major problem, but it is nice if the filename of a patch contains the ticket number (mainly to ensure no two patches from different tickets have the same filename).",
    "created_at": "2011-04-22T13:15:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10887#issuecomment-116327",
    "user": "https://github.com/jdemeyer"
}
```

It's not a major problem, but it is nice if the filename of a patch contains the ticket number (mainly to ensure no two patches from different tickets have the same filename).



---

archive/issue_comments_116328.json:
```json
{
    "body": "Seems I am still an \"unprivileged trac user\", so I cannot close tickets, I sent an email to William about this.\nAnyway, this one can be closed.",
    "created_at": "2011-04-22T17:18:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10887#issuecomment-116328",
    "user": "https://github.com/jdemeyer"
}
```

Seems I am still an "unprivileged trac user", so I cannot close tickets, I sent an email to William about this.
Anyway, this one can be closed.



---

archive/issue_events_011002.json:
```json
{
    "actor": "https://github.com/koffie",
    "created_at": "2011-04-22T17:35:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10887",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10887#event-11002"
}
```



---

archive/issue_comments_116329.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-04-22T17:35:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10887#issuecomment-116329",
    "user": "https://github.com/koffie"
}
```

Resolution: fixed



---

archive/issue_comments_116330.json:
```json
{
    "body": "Hej Jeroen, Are you sure you cannot close tickets. I looked at the permissions and we have exactly the same permissions, yet I was able to close this ticket. (This is also how I tested if you would still be able to close tickets, since that would be very! important)\n\nKind Regards",
    "created_at": "2011-04-22T17:37:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10887#issuecomment-116330",
    "user": "https://github.com/koffie"
}
```

Hej Jeroen, Are you sure you cannot close tickets. I looked at the permissions and we have exactly the same permissions, yet I was able to close this ticket. (This is also how I tested if you would still be able to close tickets, since that would be very! important)

Kind Regards



---

archive/issue_comments_116331.json:
```json
{
    "body": "Replying to [comment:10 mderickx]:\n> Hej Jeroen, Are you sure you cannot close tickets.\nDid the procedure for closing tickets change?\n\nI do **not** see \"resolve as...\" in the Actions box on the bottom of a ticket webpage.\n\nI am using `Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.2.16) Gecko/20110420 Gentoo Firefox/3.6.16` if that is relevant.",
    "created_at": "2011-04-22T17:51:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10887#issuecomment-116331",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:10 mderickx]:
> Hej Jeroen, Are you sure you cannot close tickets.
Did the procedure for closing tickets change?

I do **not** see "resolve as..." in the Actions box on the bottom of a ticket webpage.

I am using `Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.2.16) Gecko/20110420 Gentoo Firefox/3.6.16` if that is relevant.



---

archive/issue_comments_116332.json:
```json
{
    "body": "The procedure is exactly the same, only the permissions needed to do certain things have been changed. I set the closing of tickets to require \"TICKET_ADMIN\" rights. After looking a bit more carefull at http://trac.sagemath.org/sage_trac/admin/general/perm I saw that the person who gave you administrative rights on trac made a small error. The account jdmeyer had TRAC_ADMIN as rights. I changed it to jdemeyer. I hope you can now close tickets again. (ps. you should now also see an admin button on trac.",
    "created_at": "2011-04-22T18:17:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10887#issuecomment-116332",
    "user": "https://github.com/koffie"
}
```

The procedure is exactly the same, only the permissions needed to do certain things have been changed. I set the closing of tickets to require "TICKET_ADMIN" rights. After looking a bit more carefull at http://trac.sagemath.org/sage_trac/admin/general/perm I saw that the person who gave you administrative rights on trac made a small error. The account jdmeyer had TRAC_ADMIN as rights. I changed it to jdemeyer. I hope you can now close tickets again. (ps. you should now also see an admin button on trac.



---

archive/issue_comments_116333.json:
```json
{
    "body": "Replying to [comment:12 mderickx]:\n> The account jdmeyer had TRAC_ADMIN as rights. I changed it to jdemeyer. I hope you can now close tickets again. (ps. you should now also see an admin button on trac.\n\nBedankt!",
    "created_at": "2011-04-22T18:37:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10887#issuecomment-116333",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:12 mderickx]:
> The account jdmeyer had TRAC_ADMIN as rights. I changed it to jdemeyer. I hope you can now close tickets again. (ps. you should now also see an admin button on trac.

Bedankt!
