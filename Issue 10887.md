# Issue 10887: Make it impossible for unpiviliged trac users to close tickets

Issue created by migration from https://trac.sagemath.org/ticket/10966

Original creator: mderickx

Original creation time: 2011-03-19 02:36:02

Assignee: mvngu, schilly

In several places in the documentation it says you shouldn't close 
tickets if you have never done the release management. 
Since it's so trivial to fix maybe we should change the needed rights 
to change the 
status to prevent someone unknowing to close a ticket. According to 
[http://trac.edgewall.org/wiki/TracWorkflow](http://www.google.com/url?sa=D&q=http://trac.edgewall.org/wiki/TracWorkflow) this 
can be done by changing: 

close.permissions = TICKET_MODIFY 

into 

close.permissions = TICKET_ADMIN 

in the trac.ini file. Offcourse TICKET_ADMIN could be anything logical 
from [http://trac.edgewall.org/wiki/TracPermissions](http://www.google.com/url?sa=D&q=http://trac.edgewall.org/wiki/TracPermissions) 

ps. we could even do more fancy stuff like add a "nominate for 
closure" status to the workflow or a "request patchbot" and a 
"patchbot doctest passed" depending on how the developement workflow 
in real life.


---

Comment by mderickx created at 2011-04-22 10:27:30

Changing status from new to needs_review.


---

Comment by mderickx created at 2011-04-22 10:27:30

I changed the trac config so that closing should not be possible anymore. So test and review :)


---

Comment by mderickx created at 2011-04-22 10:28:43

At least not when you don't have TICKET_ADMIN right's if you have TICKET_ADMIN or something higher like TRAC_ADMIN it is still possible.


---

Comment by mderickx created at 2011-04-22 11:08:18

Changing status from needs_review to needs_work.


---

Attachment


---

Comment by mderickx created at 2011-04-22 11:11:44

Changing status from needs_work to needs_review.


---

Comment by kini created at 2011-04-22 11:53:01

Changing status from needs_review to positive_review.


---

Comment by kini created at 2011-04-22 11:53:01

Looks good. I can't close tickets, and the documentation builds fine. I successfully added a dependency to #11120. Positive review!


---

Comment by jdemeyer created at 2011-04-22 13:15:00

It's not a major problem, but it is nice if the filename of a patch contains the ticket number (mainly to ensure no two patches from different tickets have the same filename).


---

Comment by jdemeyer created at 2011-04-22 17:18:57

Seems I am still an "unprivileged trac user", so I cannot close tickets, I sent an email to William about this.
Anyway, this one can be closed.


---

Comment by mderickx created at 2011-04-22 17:35:53

Resolution: fixed


---

Comment by mderickx created at 2011-04-22 17:37:47

Hej Jeroen, Are you sure you cannot close tickets. I looked at the permissions and we have exactly the same permissions, yet I was able to close this ticket. (This is also how I tested if you would still be able to close tickets, since that would be very! important)

Kind Regards


---

Comment by jdemeyer created at 2011-04-22 17:51:28

Replying to [comment:10 mderickx]:
> Hej Jeroen, Are you sure you cannot close tickets.
Did the procedure for closing tickets change?

I do *not* see "resolve as..." in the Actions box on the bottom of a ticket webpage.

I am using `Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.2.16) Gecko/20110420 Gentoo Firefox/3.6.16` if that is relevant.


---

Comment by mderickx created at 2011-04-22 18:17:37

The procedure is exactly the same, only the permissions needed to do certain things have been changed. I set the closing of tickets to require "TICKET_ADMIN" rights. After looking a bit more carefull at http://trac.sagemath.org/sage_trac/admin/general/perm I saw that the person who gave you administrative rights on trac made a small error. The account jdmeyer had TRAC_ADMIN as rights. I changed it to jdemeyer. I hope you can now close tickets again. (ps. you should now also see an admin button on trac.


---

Comment by jdemeyer created at 2011-04-22 18:37:50

Replying to [comment:12 mderickx]:
> The account jdmeyer had TRAC_ADMIN as rights. I changed it to jdemeyer. I hope you can now close tickets again. (ps. you should now also see an admin button on trac.

Bedankt!
