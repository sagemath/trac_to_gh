# Issue 10708: Update Maxima to the latest upstream release.

Issue created by migration from https://trac.sagemath.org/ticket/10773

Original creator: drkirkby

Original creation time: 2011-02-12 11:08:40

Assignee: AlexGhitza

CC:  fbissey kcrisman jpflori

The version of Maxima in Sage (5.22.1) is not the latest (5.23.2), so we should update. We need to update this along with ECL at the same time (see #10766 for the ECL update).

There are some doctest issues when both ECL and Maxima are updated, which seems to be the case every single time these are updated. The patches to fix the doctests are on the ECL upgrade ticket.


---

Attachment

Shows changes to SPKG.txt - only for review purposes, as all changes are in .spkg


---

Comment by drkirkby created at 2011-02-12 11:17:17

Changing status from new to needs_review.


---

Comment by drkirkby created at 2011-02-12 11:22:14

Changing assignee from AlexGhitza to drkirkby.


---

Comment by fbissey created at 2011-02-12 22:11:50

This will need a patch in interface/maxima.py as maxima's version number is harcoded in 2 tests.


---

Comment by fbissey created at 2011-02-13 08:36:57

Fixing the doctests with hardcoded version of maxima


---

Attachment

Added a patch to sage/interfaces/maxima.py to fix maxima hardcoded version number.


---

Comment by drkirkby created at 2011-02-13 11:45:30

Replying to [comment:4 fbissey]:
> Added a patch to sage/interfaces/maxima.py to fix maxima hardcoded version number.

Thank you for that. It looks good to me, so I'm happy to give the patch a positive review. If you are happy to do likewise for my changes, then add yourself to the reviewer field and this can be changed to positive review. 

However, it must be merged along with #10766 - neither can be done independently of the other. 

Dave


---

Comment by fbissey created at 2011-02-14 09:04:20

Changing status from needs_review to positive_review.


---

Comment by fbissey created at 2011-02-14 09:04:20

Well no change apart from the src folder and SPKG.txt and that's just what we want. The package build fine against ecl-11.1.1 and returns what we want

```
sage: maxima.version()
'5.23.2'
sage: maxima("next_prime(113);")
127
```

So it's a positive review from me. Don't forget to review and test my ecl spkg in #10766.


---

Comment by drkirkby created at 2011-02-14 15:23:42

## Note to the release manager
This must be merged along with #10766 - neither can be done independently of the other. They should be upgraded as a pair.


---

Comment by kcrisman created at 2011-02-14 16:19:39

I have a question about the new Maxima. Did anyone else notice that it is building a lot of documentation that I don't know if it did in the past? At any rate, I am getting tons of error messages (where I didn't before) about missing nodes and so forth - also some other similar ones. It doesn't seem to affect installation, unsurprisingly, but still seems odd. It may be related to the /src folder having a new /admin subdirectory which contains another Makefile and a new TODO file that I hadn't seen before.


---

Comment by kcrisman created at 2011-02-14 19:09:09

Well, other than this weird documentation issue, I have no problems with this package.  It passes the doctests I have time to check now on OS X 10.4 PPC (old and very slow, but hence useful for testing), and assuming it's passed more common platforms I think the changes are fine.


---

Comment by kcrisman created at 2011-02-14 19:11:53

Changing milestone in the hopes it will get in for 4.7 :)


---

Comment by fbissey created at 2011-02-14 21:09:54

Replying to [comment:9 kcrisman]:
> I have a question about the new Maxima. Did anyone else notice that it is building a lot of documentation that I don't know if it did in the past? At any rate, I am getting tons of error messages (where I didn't before) about missing nodes and so forth - also some other similar ones. It doesn't seem to affect installation, unsurprisingly, but still seems odd. It may be related to the /src folder having a new /admin subdirectory which contains another Makefile and a new TODO file that I hadn't seen before.

I hadn't noticed because I have been building maxima a lot (both versions 5..2.1 and 5.23.2) in sage and on the system. I compared build logs on the system and this is new. I don't know if it can be disabled yet but it may be a good idea if it can.

For the record it looks like texinfo stuff to me and it is located in doc/info.


---

Comment by drkirkby created at 2011-02-15 09:12:12

To my knowledge 4.6.2 is not in any sort of "feature freeze" yet, with no release candidates released - only alphas. So I've set this back to 4.6.2. I've asked on sage-devel if it can go in 4.6.2, but so far no response. I'd rather not wait until 4.7 if possible, as the ECL update is critical to a successful 64-bit Sage on Solaris. 


## Note to the release manager

This must be merged along with #10766 - neither can be done independently of the other. They should be upgraded as a pair.


---

Comment by jpflori created at 2011-02-15 10:23:16

Hi,

I'm currently building the new Maxima package (on Ubuntu  10.10) and it failed because I did not have makeinfo (part of texinfo  package) installed, which did not seem to be required to build Sage so  far (and is not mentionned on !http://www.sagemath.org/doc/installation/source.html)

I  guess this is related to the newly built documentation issue mentionned  above and maybe the ticket should be changed back to needs_work ?

Cheers.


---

Comment by kcrisman created at 2011-02-15 13:19:06

Replying to [comment:16 jpflori]:
> Hi,
> 
> I'm currently building the new Maxima package (on Ubuntu  10.10) and it failed because I did not have makeinfo (part of texinfo  package) installed, which did not seem to be required to build Sage so  far (and is not mentionned on !http://www.sagemath.org/doc/installation/source.html)
> 
> I  guess this is related to the newly built documentation issue mentionned  above and maybe the ticket should be changed back to needs_work ?
> 

But on #10766, about 90 minutes later, you said everything was okay. Is it okay or not? I notice that drkirkby already posted about this on the [maxima list](http://permalink.gmane.org/gmane.comp.mathematics.maxima.general/33565).


---

Comment by jpflori created at 2011-02-15 13:28:37

Replying to [comment:17 kcrisman]:

> Replying to [comment:16 jpflori]:
> > Hi, I'm currently building the new Maxima package (on Ubuntu  10.10) and it failed because I did not have makeinfo (part of texinfo  package) installed, which did not seem to be required to build Sage so  far (and is not mentionned on !http://www.sagemath.org/doc/installation/source.html) I  guess this is related to the newly built documentation issue mentionned  above and maybe the ticket should be changed back to needs_work ?
> But on #10766, about 90 minutes later, you said everything was okay. Is it okay or not? I notice that drkirkby already posted about this on the [maxima list](http://permalink.gmane.org/gmane.comp.mathematics.maxima.general/33565).

Sorry, I meant that "make ptest" is fine once I install texinfo and Maxima is built.


---

Comment by kcrisman created at 2011-02-15 14:03:26

Replying to [comment:19 jpflori]:
> Replying to [comment:17 kcrisman]:
> 
> > Replying to [comment:16 jpflori]:
> > > Hi, I'm currently building the new Maxima package (on Ubuntu  10.10) and it failed because I did not have makeinfo (part of texinfo  package) installed, which did not seem to be required to build Sage so  far (and is not mentionned on !http://www.sagemath.org/doc/installation/source.html) I  guess this is related to the newly built documentation issue mentionned  above and maybe the ticket should be changed back to needs_work ?
> > But on #10766, about 90 minutes later, you said everything was okay. Is it okay or not? I notice that drkirkby already posted about this on the [maxima list](http://permalink.gmane.org/gmane.comp.mathematics.maxima.general/33565).
> 
> Sorry, I meant that "make ptest" is fine once I install texinfo and Maxima is built.

Hmm, that is unfortunate.  I wonder if we can try to detect texinfo, then (if needed) disable building the documentation but still have the interactive help...


---

Comment by kcrisman created at 2011-02-15 15:37:39

I want to confirm that I do not have this problem with our previous Maxima (5.22.1) on the same computer.   They both seem to build the same documentation etc. (in `$SAGE_ROOT/local/share/maxima`), and the changelogs don't indicate something unusual, so I'm not sure what has changed.


---

Comment by kcrisman created at 2011-02-15 16:48:39

Here are relevant log excerpt comparisons.  Notice that before, we have

```
/Users/student/Desktop/sage-4.6.2.alpha3/spkg/build/maxima-5.22.1/src/install-sh -d /Users/student/Desktop/sage-4.6.2.alpha3/local/share/maxima/5.22.1/doc/html
```

after the 'nothing to be done', and it just installs the html etc., while now we have 

```
sh extract_categories.sh maxima
```

and we get horrible error messages.  There is a lot of stuff that seems to be happening before we get to contour1.gif now.  And it all has the `+` in front, which sort of baffles me.  Interestingly, `extract_categories.sh` existed before, has not changed, and presumably did its thing before... and for that matter `install-sh` doesn't seem to have changed either.  What the heck is going on?

Before:

```
 /usr/bin/install -c -m 644 ./wester_problems/test_zero_equivalence.mac /Users/student/Desktop/sage-4.6.2.alpha3/local/share/maxima/5.22.1/tests/wester_problems/test_zero_equivalence.mac
Making install in doc
Making install in info
pattern=`printf "\r$"` ; \
bad_files=`find . -name '*.texi' -print | xargs grep -E -l -e "$pattern"` ; \
[ -z  "$bad_files" ] || ( echo "WARNING: The following files have DOS-style EOLs: $bad_files" ; \
echo "Run /doc/info/fix_crlf to fix the problem." )
pattern=`printf "\t"` ; \
bad_files=`find . -name '*.texi' -print | xargs grep -E -l -e "$pattern"` ; \
[ -z  "$bad_files" ] || ( echo "WARNING: The following files have unexpanded Tabs: $bad_files" ; \
echo "Run /doc/info/fix_tab to fix the problem." )
make[4]: Nothing to be done for `install-exec-am'.
/Users/student/Desktop/sage-4.6.2.alpha3/spkg/build/maxima-5.22.1/src/install-sh -d /Users/student/Desktop/sage-4.6.2.alpha3/local/share/maxima/5.22.1/doc/html
 /usr/bin/install -c -m 644 ./figures/contour1.gif /Users/student/Desktop/sage-4.6.2.alpha3/local/share/maxima/5.22.1/doc/html/figures/contour1.gif

```


After:

```
 /usr/bin/install -c -m 644 ./wester_problems/test_zero_equivalence.mac /Users/student/Desktop/sage-4.6.2.alpha3/local/share/maxima/5.23.2/tests/wester_problems/test_zero_equivalence.mac
Making install in doc
 cd .. && /bin/sh ./config.status doc/Makefile 
config.status: creating doc/Makefile
Making install in info
 cd ../.. && /bin/sh ./config.status doc/info/Makefile 
config.status: creating doc/info/Makefile
pattern=`printf "\r$"` ; \
bad_files=`find . -name '*.texi' -print | xargs /usr/bin/grep -E -l -e "$pattern"` ; \
[ -z  "$bad_files" ] || ( echo "WARNING: The following files have DOS-style EOLs: $bad_files" ; \
echo "Run /doc/info/fix_crlf to fix the problem." )
pattern=`printf "\t"` ; \
bad_files=`find . -name '*.texi' -print | xargs /usr/bin/grep -E -l -e "$pattern"` ; \
[ -z  "$bad_files" ] || ( echo "WARNING: The following files have unexpanded Tabs: $bad_files" ; \
echo "Run /doc/info/fix_tab to fix the problem." )
make[4]: Nothing to be done for `install-exec-am'.
sh extract_categories.sh maxima
+ TARGET_TEXI=maxima.texi
++ mktemp -d /tmp/maxima-texinfo-categories-XXXXXX
+ WORKING_DIRECTORY=/tmp/maxima-texinfo-categories-oW3FTb
+ cp -R Affine.texi Arrays.texi Atensor.texi Bugs.texi Command.texi Constants.texi Contexts.texi Ctensor.texi Debugging.texi Deleted.texi Differential.texi Differentiation.texi Elliptic.texi Equations.texi Expressions.texi Floating.texi Function.texi Groups.texi Help.texi Indices.texi Input.texi Integration.texi Introduction.texi Itensor.texi Limits.texi Lists.texi Logarithms.texi Matrices.texi Miscellaneous.texi Number.texi Numerical.texi Operators.texi Plotting.texi Polynomials.texi Program.texi Rules.texi Runtime.texi Series.texi Simplification.texi Special.texi Symmetries.texi Trigonometric.texi asympa.texi augmented_lagrangian.texi bode.texi category-macros.texi cobyla.texi contrib_ode.texi descriptive.texi diag.texi distrib.texi draw.texi drawdf.texi dynamics.texi ezunits.texi f90.texi ggf.texi graphs.texi grobner.texi impdiff.texi implicit_plot.texi include-maxima.texi interpol.texi lapack.texi lbfgs.texi lindstedt.texi linearalgebra.texi lsquares.texi makeOrders.texi maxima.texi minpack.texi mnewton.texi nset.texi numericalio.texi opsubst.texi orthopoly.texi plotdf.texi romberg.texi simplex.texi simplifications.texi solve_rec.texi stats.texi stirling.texi stringproc.texi unit.texi zeilberger.texi figures /tmp/maxima-texinfo-categories-oW3FTb
++ pwd
+ d=/Users/student/Desktop/sage-4.6.2.alpha3/spkg/build/maxima-5.23.2/src/doc/info
<snip LOTS of stuff>
+ set +x
perl ./create_index
/Users/student/Desktop/sage-4.6.2.alpha3/spkg/build/maxima-5.23.2/src/install-sh -d /Users/student/Desktop/sage-4.6.2.alpha3/local/share/maxima/5.23.2/doc/html
 /usr/bin/install -c -m 644 ./figures/introduction1.gif /Users/student/Desktop/sage-4.6.2.alpha3/local/share/maxima/5.23.2/doc/html/figures/introduction1.gif
 /usr/bin/install -c -m 644 ./figures/introduction2.gif /Users/student/Desktop/sage-4.6.2.alpha3/local/share/maxima/5.23.2/doc/html/figures/introduction2.gif
 /usr/bin/install -c -m 644 ./figures/introduction3.gif /Users/student/Desktop/sage-4.6.2.alpha3/local/share/maxima/5.23.2/doc/html/figures/introduction3.gif
 /usr/bin/install -c -m 644 ./figures/contour1.gif /Users/student/Desktop/sage-4.6.2.alpha3/local/share/maxima/5.23.2/doc/html/figures/contour1.gif
```



---

Comment by drkirkby created at 2011-02-15 18:32:02

Changing status from positive_review to needs_work.


---

Comment by drkirkby created at 2011-02-15 18:32:02

Replying to [comment:16 jpflori]:
> Hi,
> 
> I'm currently building the new Maxima package (on Ubuntu  10.10) and it failed because I did not have makeinfo (part of texinfo  package) installed, which did not seem to be required to build Sage so  far (and is not mentionned on !http://www.sagemath.org/doc/installation/source.html)
> 
> I  guess this is related to the newly built documentation issue mentioned  above and maybe the ticket should be changed back to needs_work ?
> 
> Cheers.

As someone noted, I have posted this on the Maxima list. The only record I can find with Google is this one, but you can see my question and Robert Dodlier's answer. 

http://permalink.gmane.org/gmane.comp.mathematics.maxima.general/33568

I'm not sure I understand what he is saying, but I think he is saying the source tarball from Sourceforge should have the generated .info files. That does in fact seem to be so, as using `find` will show. 


```
drkirkby@hawk:~/sage-4.6.2.alpha4/spkg/standard$ find . -name '*.info'
./maxima-5.23.2/src/doc/info/pt_BR/maxima.info
./maxima-5.23.2/src/doc/info/pt/maxima.info
./maxima-5.23.2/src/doc/info/pt_BR.utf8/maxima.info
./maxima-5.23.2/src/doc/info/maxima.info
./maxima-5.23.2/src/doc/info/pt.utf8/maxima.info
./maxima-5.23.2/src/doc/info/es/maxima.info
./maxima-5.23.2/src/doc/info/es.utf8/maxima.info
./maxima-5.23.2/src/interfaces/xmaxima/doc/xmaxima.info
./maxima-5.23.2/src/interfaces/emacs/imaxima/imaxima.info
```



So it looks to me the generated files are present, so there should be no need for them to be generated. 

My Sun does have `makeinfo` present, but I've just renamed it to something else, so the command does not exist. The Maxima build did then fail:


```
make[3]: makeinfo: Command not found
make[3]: *** [maxima.info] Error 127
```


So I am in fact putting this back to "needs work"

Dave


---

Comment by fbissey created at 2011-02-15 19:59:24

I will have a closer look. I am wondering if it is just a time stamp issue. I have seen the same change of behavior building on Gentoo.


---

Comment by drkirkby created at 2011-02-15 22:21:13

Replying to [comment:24 fbissey]:
> I will have a closer look. I am wondering if it is just a time stamp issue. I have seen the same change of behavior building on Gentoo.

I've touched all the .info files. so they are dated today, but the files they are generated from are obviously older. But that did not solve the problem. 

Someone posted this on the Maxima list:

----------

```
I think you can just cd to src and then run "make ecl".  This will just
make maxima with ecl.  No attempt will be made to build the info files
or anything else.

Ray
```


This will need a bit of looking into I think.


---

Comment by fbissey created at 2011-02-15 22:44:36

Oh yes. And what happens when you do make install?


---

Comment by drkirkby created at 2011-02-15 22:49:42

Replying to [comment:26 fbissey]:
> Oh yes. And what happens when you do make install?

I've asked that very question.

This seems like a new Maxima bug to me. Hopefully we can work around it easily. Perhaps editing the Makefile.in and removing the docs directory, or something like that. But it is a bit of a pain. 

Dave


---

Comment by fbissey created at 2011-02-16 00:58:12

I think I've got it (successful in Gentoo, no spkg at this time). Timestamps with a twist. First let's see some difference between 5.22.1 and 5.23.2 in doc/info/Makefile.am:

```
@@ -25,7 +25,7 @@
 SUBDIRS = $(ES_DIR) $(ES_DIR_UTF8) $(PT_DIR) $(PT_DIR_UTF8) $(PT_BR_DIR) $(PT_BR_DIR_UTF8)
 
 info_TEXINFOS = maxima.texi
-maxima_TEXINFOS = Introduction.texi Help.texi Command.texi Operators.texi \
+maxima_TEXINFOS = include-maxima.texi Introduction.texi Help.texi Command.texi Operators.texi \
   Expressions.texi Simplification.texi Plotting.texi Input.texi \
   Floating.texi Contexts.texi Polynomials.texi Constants.texi \
   Logarithms.texi Trigonometric.texi Special.texi \
```

Then you should know this from the same file (unchanged):

```
maxima.html: maxima.texi $(maxima_TEXINFOS)
	sh extract_categories.sh maxima
```

Now what about this new file. Well it is touched at configuration time

```
config.status: creating doc/info/include-maxima.texi
```

So you need to touch the html files at least after config. I touched them after compilation and before install.


---

Comment by kcrisman created at 2011-02-16 01:32:48

This explains the superfluous `sh extract_categories.sh maxima` in my log above.  Do you think we need to patch the makefile?  Or should Dave mention this and ask about whether there is a natural way around this on the Maxima list?  I am so sorry I lack the technical knowledge to help more.


---

Comment by fbissey created at 2011-02-16 01:49:57

I am working on an updated spkg. No need to update Makefile. We don't want to update makefile. In fact that may not be the end of our trouble. I am inserting the follwing after configuration in spkg-install:

```

# Touching html and info file to avoid to regenerate them.
# This must be done after configuration since the timestamp need
# to be later than include-maxima.texi which is generated at 
# configuration time
for i in doc/info/*.html ; do
   touch "${i}"
done
touch doc/info/maxima.info*
```

That should take care of the texinfo trouble. I am wondering whether or not to add maxima-index.lisp to the list of touched file to bypass it as well. It should only require perl which is ok.

Now I need a brave soul with no autotool/automake/autoconf installed on their machine to try my new spkg when it is up. This is not very clean in regards to autotools and run into "maintainer mode", I think we should worry about this and pass it on the maxima mailing list:

```
make[1]: Leaving directory `/home/fbissey/sandbox/maxima-5.23.2/interfaces'
Making all in share
make[1]: Entering directory `/home/fbissey/sandbox/maxima-5.23.2/share'
 cd .. && /bin/sh /home/fbissey/sandbox/maxima-5.23.2/missing --run automake-1.9 --gnu  share/Makefile
Useless use of /d modifier in transliteration operator at /usr/share/automake-1.9/Automake/Wrap.pm line 60.
configure.in:5: version mismatch.  This is Automake 1.9.6,
configure.in:5: but the definition used by this AM_INIT_AUTOMAKE
configure.in:5: comes from Automake 1.9.2.  You should recreate
configure.in:5: aclocal.m4 with aclocal and run automake again.
WARNING: `automake-1.9' is probably too old.  You should only need it if
         you modified `Makefile.am', `acinclude.m4' or `configure.in'.
         You might want to install the `Automake' and `Perl' packages.
         Grab them from any GNU archive site.
 cd .. && /bin/sh ./config.status share/Makefile 
config.status: creating share/Makefile
make[1]: Leaving directory `/home/fbissey/sandbox/maxima-5.23.2/share'
```



---

Comment by fbissey created at 2011-02-16 02:09:52

OK here is a new spkg for you to try:
[http://spkg-upload.googlecode.com/files/maxima-5.23.2.spkg](http://spkg-upload.googlecode.com/files/maxima-5.23.2.spkg)

Someone should forward my timestamps observation to the maxima mailing list. I am sure they think no one need to regenerate those files. Which is easy to overlook.


---

Comment by nbruin created at 2011-02-16 02:12:48

Perhaps a little more minimalist approach. If `maxima.texi` is the only file that gets touched, that file is present already anyway. So you may be able to get away with "mv"-ing the original file out of the way, "configure" and "mv" the original file back if the one created by configure has the same content. The nice thing is that "mv" should not change the timestamp:
so spkg-install becomes something like:

```
...
mv doc/info/maxima.texi doc/info/maxima.texi.orig
./configure --prefix="$SAGE_LOCAL" --enable-ecl 
check_error "Failed to configure Maxima." 
cmp -s doc/info/maxima.texi doc/info/maxima.texi.orig && mv doc/info/maxima.texi.orig doc/info/maxima.texi
```

If you want you could raise an error or warning instead when the two files do not agree.

An advantage of this approach is that you're not anything that voids manufacturer's warranty. A disadvantage could be that it doesn't work, as I haven't tested it.


---

Comment by fbissey created at 2011-02-16 02:21:20

That's an interesting alternative Nils (the file is include-maxima.texi for anyone who wants to try). 

We have a little bit of time before deciding. In the meantime people should try the current posted solution. Once we have really established that it is working we will decide what way is the most elegant.


---

Comment by jpflori created at 2011-02-16 08:35:54

Replying to [comment:30 fbissey]:

> Now I need a brave soul with no autotool/automake/autoconf installed on their machine to try my new spkg when it is up. This is not very clean in regards to autotools and run into "maintainer mode", I think we should worry about this

There is currently no auto* installed on my system, I'll uninstall texinfo and try your new spkg.


---

Comment by jpflori created at 2011-02-16 09:35:44

Replying to [comment:31 fbissey]:

> OK here is a new spkg for you to try: [http://spkg-upload.googlecode.com/files/maxima-5.23.2.spkg](http://spkg-upload.googlecode.com/files/maxima-5.23.2.spkg) Someone should forward my timestamps observation to the maxima mailing list. I am sure they think no one need to regenerate those files. Which is easy to overlook.

This new spkg is building correctly here (without texinfo installed of course).


---

Comment by kcrisman created at 2011-02-16 13:27:29

Replying to [comment:35 jpflori]:
> Replying to [comment:31 fbissey]:
> 
> > OK here is a new spkg for you to try: [http://spkg-upload.googlecode.com/files/maxima-5.23.2.spkg](http://spkg-upload.googlecode.com/files/maxima-5.23.2.spkg) Someone should forward my timestamps observation to the maxima mailing list. I am sure they think no one need to regenerate those files. Which is easy to overlook.
> 
> This new spkg is building correctly here (without texinfo installed of course).
I do have at least automake and another auto, but that didn't make a difference before since I didn't have texinfo or whatever.  Anyway, it made it past the bad stage - does have the new perl create index thing, but all went well.


---

Comment by drkirkby created at 2011-02-16 14:25:59

Replying to [comment:36 kcrisman]:
> Replying to [comment:35 jpflori]:
> > Replying to [comment:31 fbissey]:
> > 
> > > OK here is a new spkg for you to try: [http://spkg-upload.googlecode.com/files/maxima-5.23.2.spkg](http://spkg-upload.googlecode.com/files/maxima-5.23.2.spkg) Someone should forward my timestamps observation to the maxima mailing list. I am sure they think no one need to regenerate those files. Which is easy to overlook.
> > 
> > This new spkg is building correctly here (without texinfo installed of course).
> I do have at least automake and another auto, but that didn't make a difference before since I didn't have texinfo or whatever.  Anyway, it made it past the bad stage - does have the new perl create index thing, but all went well.

Same here. 

I uninstalled autoconf, automake and texinfo. The Maxima package built fine, and all doctests (including the long ones) passed. 

So I'm happy with this. I don't really see any advantage in another method, given this does work and has been tested by a few people. Those tests (in my case at least) are not only that it builds, but that all the tests pass too. 

My tests were performed on an OpenSolaris system (quad core Xeon processor). 

I'll leave as "needs work" for now, as this is too late for 4.6.2, so we could use another method if we want. But personally I think this is fine and should be put to positive review. 

Dave


---

Comment by kcrisman created at 2011-02-16 16:07:42

Changing status from needs_work to positive_review.


---

Comment by kcrisman created at 2011-02-16 16:14:07


```
### maxima-5.23.2 (David Kirkby, 10th Feb 2011)
 * #10773 Update Maxima to the latest upstream release. 
 * Starting with this version we need to touch all html and info file in doc/info, otherwise they
   get regenerated which does require texinfo.
```

I suppose this should have Francois as well listed.  So if someone wants to revert positive review based on that - that someone being Francois - they can.  On the other hand, he posted the new spkg!  And it is a correctly created spkg.  So I'm fine with it if he is.


---

Comment by nbruin created at 2011-02-16 18:20:14

Replying to [comment:32 nbruin]:
> Perhaps a little more minimalist approach.
I tried the minimalist approach with `include-maxima.texi` using the original 5.23.2 package and after building, the html files still had their old stamp and I didn't see excessive building activity. So I think that trick works too. I don't know how robust "mv"s property to not change timestamps is, though, so perhaps "touch" is more portable.


---

Comment by fbissey created at 2011-02-16 18:24:46

Thanks for all the testing guys. Yes I was also wondering about mv and time stamps, so touch may be safer.

I forgot to add myself - bother. Doesn't matter. I want this to be done and I am listed as an author here on trac, that's good enough.


---

Comment by drkirkby created at 2011-02-16 22:53:48

OK guys, thanks for all this. I think we are done with this now. I know I wrote this before, but it makes it clearer if at the end. 

## Note to the release manager

This must be merged along with #10766 - neither can be done independently of the other. They should be upgraded as a pair.

Dave


---

Comment by jdemeyer created at 2011-02-18 08:44:20

Changing component from algebra to packages.


---

Comment by jdemeyer created at 2011-02-24 13:56:17

Changing status from positive_review to needs_work.


---

Comment by jdemeyer created at 2011-02-24 13:56:17

Considering the `makeinfo` issue has not been resolved yet, this still needs work.


---

Comment by kcrisman created at 2011-02-24 15:00:31

Replying to [comment:45 jdemeyer]:
> Considering the `makeinfo` issue has not been resolved yet, this still needs work.
???

Dave clearly said 
> I uninstalled autoconf, automake and texinfo. The Maxima package built fine, and all doctests (including the long ones) passed.

And at least above it seems like makeinfo is part of texinfo.  Am I missing something here?


---

Comment by jdemeyer created at 2011-02-24 15:36:41

Well, it doesn't work for me on `sage.math.washington.edu` which does not have texinfo installed.


---

Comment by jpflori created at 2011-02-24 15:49:09

Did you use the new (new) spkg linked in http://trac.sagemath.org/sage_trac/ticket/10773#comment:31 ?

The one in the ticket description is the original new one and does not compile without makeinfo (part of makeinfo package on debian).


---

Comment by drkirkby created at 2011-02-24 16:10:30

The makeinfo problem has been resolved. 

I've changed the ticket description, as that did have the old version, where the revised one produced by François Bissey builds without it. Sorry for the confusion. 
I think this can be put back to positive review, but I'll leave someone else to do it. 

Dave


---

Comment by jdemeyer created at 2011-02-24 16:42:53

Changing status from needs_work to needs_review.


---

Comment by jdemeyer created at 2011-02-24 16:42:53

I'll test again on `sage.math.washington.edu`.


---

Comment by jdemeyer created at 2011-02-25 08:13:38

I have tested this on `sage.math.washington.edu` (a system without `makeinfo`) and it does indeed work now.


---

Comment by jdemeyer created at 2011-02-25 08:13:38

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2011-03-08 21:47:27

Resolution: fixed
