# Issue 13170: Adds Abelian sandpile model to the reference manual

archive/issues_013170.json:
```json
{
    "body": "Assignee: mvngu\n\nCC:  dperkinson\n\nKeywords: sandpile\n\nThere is a nice thematic tutorial on Sandpiles (http://www.sagemath.org/doc/thematic_tutorials/sandpile.html), but the functions are not included in the reference manual. This is done by this patch.\n\nIssue created by migration from https://trac.sagemath.org/ticket/13342\n\n",
    "created_at": "2012-08-05T10:33:40Z",
    "labels": [
        "documentation",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Adds Abelian sandpile model to the reference manual",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13170",
    "user": "@dcoudert"
}
```
Assignee: mvngu

CC:  dperkinson

Keywords: sandpile

There is a nice thematic tutorial on Sandpiles (http://www.sagemath.org/doc/thematic_tutorials/sandpile.html), but the functions are not included in the reference manual. This is done by this patch.

Issue created by migration from https://trac.sagemath.org/ticket/13342





---

archive/issue_comments_160732.json:
```json
{
    "body": "I'm unable to build the documentation :( \nAny help to find the missing instructions is more than welcome.",
    "created_at": "2012-08-05T12:30:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13170#issuecomment-160732",
    "user": "@dcoudert"
}
```

I'm unable to build the documentation :( 
Any help to find the missing instructions is more than welcome.



---

archive/issue_comments_160733.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-08-05T12:30:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13170#issuecomment-160733",
    "user": "@dcoudert"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_160734.json:
```json
{
    "body": "I was unable to apply the patch.  Running hg_sage.apply('trac_13342-adds-sandpile-to-reference-manual.patch') produced an error:\n\nsage: hg_sage.apply('/home/davidp/downloads/trac_13342-adds-sandpile-to-reference-manual.patch')\ncd \"/usr/local/sage/devel/sage\" && sage --hg import   \"/home/davidp/downloads/trac_13342-adds-sandpile-to-reference-manual.patch\"\napplying /home/davidp/downloads/trac_13342-adds-sandpile-to-reference-manual.patch\n** unknown exception encountered, please report by visiting\n**  http://mercurial.selenic.com/wiki/BugTracker\n** Python 2.7.3 (default, Jul  9 2012, 15:05:17) [GCC 4.6.3]\n** Mercurial Distributed SCM (version 1.8.4)\n** Extensions loaded: color, mq, pager, rebase, relink\nTraceback (most recent call last):\n  File \"/usr/local/sage/local/bin/hg\", line 38, in <module>\n    mercurial.dispatch.run()\n\n<------- snip ------------->\n\n  File \"/usr/local/sage/local/lib/python/mercurial/patch.py\", line 983, in scangitpatch\n    gitpatches = readgitpatch(gitlr)\n  File \"/usr/local/sage/local/lib/python/mercurial/patch.py\", line 339, in readgitpatch\n    gp.setmode(int(line[-6:], 8))\nValueError: invalid literal for int() with base 8: '</pre>'\n\n\n\nI don't know if this is a problem with sage or a problem with the patch.",
    "created_at": "2012-08-05T16:31:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13170#issuecomment-160734",
    "user": "dperkinson"
}
```

I was unable to apply the patch.  Running hg_sage.apply('trac_13342-adds-sandpile-to-reference-manual.patch') produced an error:

sage: hg_sage.apply('/home/davidp/downloads/trac_13342-adds-sandpile-to-reference-manual.patch')
cd "/usr/local/sage/devel/sage" && sage --hg import   "/home/davidp/downloads/trac_13342-adds-sandpile-to-reference-manual.patch"
applying /home/davidp/downloads/trac_13342-adds-sandpile-to-reference-manual.patch
** unknown exception encountered, please report by visiting
**  http://mercurial.selenic.com/wiki/BugTracker
** Python 2.7.3 (default, Jul  9 2012, 15:05:17) [GCC 4.6.3]
** Mercurial Distributed SCM (version 1.8.4)
** Extensions loaded: color, mq, pager, rebase, relink
Traceback (most recent call last):
  File "/usr/local/sage/local/bin/hg", line 38, in <module>
    mercurial.dispatch.run()

<------- snip ------------->

  File "/usr/local/sage/local/lib/python/mercurial/patch.py", line 983, in scangitpatch
    gitpatches = readgitpatch(gitlr)
  File "/usr/local/sage/local/lib/python/mercurial/patch.py", line 339, in readgitpatch
    gp.setmode(int(line[-6:], 8))
ValueError: invalid literal for int() with base 8: '</pre>'



I don't know if this is a problem with sage or a problem with the patch.



---

archive/issue_comments_160735.json:
```json
{
    "body": "Replying to [comment:1 dcoudert]:\n> I'm unable to build the documentation :( \n> Any help to find the missing instructions is more than welcome.\n\nDo you mean that \n\n> sage -docbuild reference html\n\ndoes not work?  I read about making the document in the installation guide.  You can also enter\n\n> sage -docbuild -H\n\nto see all the options.",
    "created_at": "2012-08-05T16:37:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13170#issuecomment-160735",
    "user": "dperkinson"
}
```

Replying to [comment:1 dcoudert]:
> I'm unable to build the documentation :( 
> Any help to find the missing instructions is more than welcome.

Do you mean that 

> sage -docbuild reference html

does not work?  I read about making the document in the installation guide.  You can also enter

> sage -docbuild -H

to see all the options.



---

archive/issue_comments_160736.json:
```json
{
    "body": "I don't use the hg_sage.apply('...') function to apply a patch but\n\n```\nsage -hg qimport some_patch.patch\nsage -hg qpush\nsage -b\n...\n```\n\n\nCurrently the patch has no effect when running:\n\n```\nsage -docbuild reference html\n```\n\nThe objective is to build a reference page for sandpiles, as for all other modules in sage.\n\n\nMost probably, I'm missing some informations in some .rst or .py file, but I don't know which one :(\n\nLet's hope someone will be able to find the solution.",
    "created_at": "2012-08-05T20:03:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13170#issuecomment-160736",
    "user": "@dcoudert"
}
```

I don't use the hg_sage.apply('...') function to apply a patch but

```
sage -hg qimport some_patch.patch
sage -hg qpush
sage -b
...
```


Currently the patch has no effect when running:

```
sage -docbuild reference html
```

The objective is to build a reference page for sandpiles, as for all other modules in sage.


Most probably, I'm missing some informations in some .rst or .py file, but I don't know which one :(

Let's hope someone will be able to find the solution.



---

archive/issue_comments_160737.json:
```json
{
    "body": "Why are you changing `setup.py`?",
    "created_at": "2012-08-08T12:49:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13170#issuecomment-160737",
    "user": "@jdemeyer"
}
```

Why are you changing `setup.py`?



---

archive/issue_comments_160738.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-08-08T12:49:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13170#issuecomment-160738",
    "user": "@jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_160739.json:
```json
{
    "body": "When I was trying to build this documentation, I did some cleaning to setup.py, but you are right this should not be in this patch. I will remove it.\n\n\nI still don't know what's missing for building the documentation.\n\nWhen I run trying to build the documentation, I got the following message. It builds a page sandpiles.html, but it is empty :(\n\n```\nompote:/path-to-sage/sage-5.3.beta0/devel/sage> ../../sage -docbuild reference html                                                        \nsphinx-build -b html -d /path-to-sage/sage-5.3.beta0/devel/sage/doc/output/doctrees/en/reference    /path-to-sage/sage-5.3.beta0/devel/sage/doc/en/reference /path-to-sage/sage-5.3.beta0/devel/sage/doc/output/html/en/reference\nRunning Sphinx v1.1.2\nloading pickled environment... done\nloading intersphinx inventory from /path-to-sage/sage-5.3.beta0/devel/sage/doc/common/python.inv...\nbuilding [html]: targets for 2 source files that are out of date\nupdating environment: 0 added, 2 changed, 0 removed\nreading sources... [ 50%] index\nreading sources... [100%] sandpiles\n\n/path-to-sage/sage-5.3.beta0/devel/sage/doc/en/reference/sandpiles.rst:4: WARNING: toctree contains reference to nonexisting document u'sage/sandpiles/sandpile'\nlooking for now-outdated files... none found\npickling environment... done\nchecking consistency... done\npreparing documents... done\nwriting output... [ 50%] index\nwriting output... [100%] sandpiles\n\nwriting additional files... genindex py-modindex search\ncopying static files... done\ndumping search index... done\ndumping object inventory... done\nbuild succeeded, 1 warning.\nBuild finished.  The built documents can be found in /path-to-sage/sage-5.3.beta0/devel/sage/doc/output/html/en/reference\n```\n",
    "created_at": "2012-08-08T13:30:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13170#issuecomment-160739",
    "user": "@dcoudert"
}
```

When I was trying to build this documentation, I did some cleaning to setup.py, but you are right this should not be in this patch. I will remove it.


I still don't know what's missing for building the documentation.

When I run trying to build the documentation, I got the following message. It builds a page sandpiles.html, but it is empty :(

```
ompote:/path-to-sage/sage-5.3.beta0/devel/sage> ../../sage -docbuild reference html                                                        
sphinx-build -b html -d /path-to-sage/sage-5.3.beta0/devel/sage/doc/output/doctrees/en/reference    /path-to-sage/sage-5.3.beta0/devel/sage/doc/en/reference /path-to-sage/sage-5.3.beta0/devel/sage/doc/output/html/en/reference
Running Sphinx v1.1.2
loading pickled environment... done
loading intersphinx inventory from /path-to-sage/sage-5.3.beta0/devel/sage/doc/common/python.inv...
building [html]: targets for 2 source files that are out of date
updating environment: 0 added, 2 changed, 0 removed
reading sources... [ 50%] index
reading sources... [100%] sandpiles

/path-to-sage/sage-5.3.beta0/devel/sage/doc/en/reference/sandpiles.rst:4: WARNING: toctree contains reference to nonexisting document u'sage/sandpiles/sandpile'
looking for now-outdated files... none found
pickling environment... done
checking consistency... done
preparing documents... done
writing output... [ 50%] index
writing output... [100%] sandpiles

writing additional files... genindex py-modindex search
copying static files... done
dumping search index... done
dumping object inventory... done
build succeeded, 1 warning.
Build finished.  The built documents can be found in /path-to-sage/sage-5.3.beta0/devel/sage/doc/output/html/en/reference
```




---

archive/issue_comments_160740.json:
```json
{
    "body": "Without touching file setup.py",
    "created_at": "2012-08-08T13:32:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13170#issuecomment-160740",
    "user": "@dcoudert"
}
```

Without touching file setup.py



---

archive/issue_comments_160741.json:
```json
{
    "body": "Attachment [trac_13342-adds-sandpile-to-reference-manual.patch](tarball://root/attachments/some-uuid/ticket13342/trac_13342-adds-sandpile-to-reference-manual.patch) by @jdemeyer created at 2013-08-13 15:35:53",
    "created_at": "2013-08-13T15:35:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13170#issuecomment-160741",
    "user": "@jdemeyer"
}
```

Attachment [trac_13342-adds-sandpile-to-reference-manual.patch](tarball://root/attachments/some-uuid/ticket13342/trac_13342-adds-sandpile-to-reference-manual.patch) by @jdemeyer created at 2013-08-13 15:35:53



---

archive/issue_comments_160742.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2015-07-31T14:29:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13170#issuecomment-160742",
    "user": "@fchapoton"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_160743.json:
```json
{
    "body": "They are now included in the doc.\n\nhttp://doc.sagemath.org/html/en/reference/dynamics/index.html",
    "created_at": "2015-07-31T14:29:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13170#issuecomment-160743",
    "user": "@fchapoton"
}
```

They are now included in the doc.

http://doc.sagemath.org/html/en/reference/dynamics/index.html



---

archive/issue_comments_160744.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-08-14T07:34:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13170#issuecomment-160744",
    "user": "@vbraun"
}
```

Resolution: fixed
