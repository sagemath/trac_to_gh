# Issue 13170: Adds Abelian sandpile model to the reference manual

Issue created by migration from Trac.

Original creator: dcoudert

Original creation time: 2012-08-05 10:33:40

Assignee: mvngu

CC:  dperkinson

Keywords: sandpile

There is a nice thematic tutorial on Sandpiles (http://www.sagemath.org/doc/thematic_tutorials/sandpile.html), but the functions are not included in the reference manual. This is done by this patch.


---

Comment by dcoudert created at 2012-08-05 12:30:06

I'm unable to build the documentation :( 
Any help to find the missing instructions is more than welcome.


---

Comment by dcoudert created at 2012-08-05 12:30:06

Changing status from new to needs_review.


---

Comment by dperkinson created at 2012-08-05 16:31:04

I was unable to apply the patch.  Running hg_sage.apply('trac_13342-adds-sandpile-to-reference-manual.patch') produced an error:

sage: hg_sage.apply('/home/davidp/downloads/trac_13342-adds-sandpile-to-reference-manual.patch')
cd "/usr/local/sage/devel/sage" && sage --hg import   "/home/davidp/downloads/trac_13342-adds-sandpile-to-reference-manual.patch"
applying /home/davidp/downloads/trac_13342-adds-sandpile-to-reference-manual.patch
** unknown exception encountered, please report by visiting
**  http://mercurial.selenic.com/wiki/BugTracker
** Python 2.7.3 (default, Jul  9 2012, 15:05:17) [GCC 4.6.3]
** Mercurial Distributed SCM (version 1.8.4)
** Extensions loaded: color, mq, pager, rebase, relink
Traceback (most recent call last):
  File "/usr/local/sage/local/bin/hg", line 38, in <module>
    mercurial.dispatch.run()

<------- snip ------------->

  File "/usr/local/sage/local/lib/python/mercurial/patch.py", line 983, in scangitpatch
    gitpatches = readgitpatch(gitlr)
  File "/usr/local/sage/local/lib/python/mercurial/patch.py", line 339, in readgitpatch
    gp.setmode(int(line[-6:], 8))
ValueError: invalid literal for int() with base 8: '</pre>'



I don't know if this is a problem with sage or a problem with the patch.


---

Comment by dperkinson created at 2012-08-05 16:37:12

Replying to [comment:1 dcoudert]:
> I'm unable to build the documentation :( 
> Any help to find the missing instructions is more than welcome.

Do you mean that 

> sage -docbuild reference html

does not work?  I read about making the document in the installation guide.  You can also enter

> sage -docbuild -H

to see all the options.


---

Comment by dcoudert created at 2012-08-05 20:03:15

I don't use the hg_sage.apply('...') function to apply a patch but

```
sage -hg qimport some_patch.patch
sage -hg qpush
sage -b
...
```


Currently the patch has no effect when running:

```
sage -docbuild reference html
```

The objective is to build a reference page for sandpiles, as for all other modules in sage.


Most probably, I'm missing some informations in some .rst or .py file, but I don't know which one :(

Let's hope someone will be able to find the solution.


---

Comment by jdemeyer created at 2012-08-08 12:49:07

Why are you changing `setup.py`?


---

Comment by jdemeyer created at 2012-08-08 12:49:07

Changing status from needs_review to needs_work.


---

Comment by dcoudert created at 2012-08-08 13:30:34

When I was trying to build this documentation, I did some cleaning to setup.py, but you are right this should not be in this patch. I will remove it.


I still don't know what's missing for building the documentation.

When I run trying to build the documentation, I got the following message. It builds a page sandpiles.html, but it is empty :(

```
ompote:/path-to-sage/sage-5.3.beta0/devel/sage> ../../sage -docbuild reference html                                                        
sphinx-build -b html -d /path-to-sage/sage-5.3.beta0/devel/sage/doc/output/doctrees/en/reference    /path-to-sage/sage-5.3.beta0/devel/sage/doc/en/reference /path-to-sage/sage-5.3.beta0/devel/sage/doc/output/html/en/reference
Running Sphinx v1.1.2
loading pickled environment... done
loading intersphinx inventory from /path-to-sage/sage-5.3.beta0/devel/sage/doc/common/python.inv...
building [html]: targets for 2 source files that are out of date
updating environment: 0 added, 2 changed, 0 removed
reading sources... [ 50%] index
reading sources... [100%] sandpiles

/path-to-sage/sage-5.3.beta0/devel/sage/doc/en/reference/sandpiles.rst:4: WARNING: toctree contains reference to nonexisting document u'sage/sandpiles/sandpile'
looking for now-outdated files... none found
pickling environment... done
checking consistency... done
preparing documents... done
writing output... [ 50%] index
writing output... [100%] sandpiles

writing additional files... genindex py-modindex search
copying static files... done
dumping search index... done
dumping object inventory... done
build succeeded, 1 warning.
Build finished.  The built documents can be found in /path-to-sage/sage-5.3.beta0/devel/sage/doc/output/html/en/reference
```



---

Comment by dcoudert created at 2012-08-08 13:32:25

Without touching file setup.py


---

Attachment


---

Comment by chapoton created at 2015-07-31 14:29:48

Changing status from needs_work to positive_review.


---

Comment by chapoton created at 2015-07-31 14:29:48

They are now included in the doc.

http://doc.sagemath.org/html/en/reference/dynamics/index.html


---

Comment by vbraun created at 2015-08-14 07:34:33

Resolution: fixed
