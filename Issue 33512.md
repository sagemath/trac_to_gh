# Issue 33512: set positions in butterfly digraph generator

Issue created by migration from https://trac.sagemath.org/ticket/33749

Original creator: dcoudert

Original creation time: 2022-04-23 09:56:35

We improve the butterfly digraph generator and set the positions of the vertices.


---

Comment by dcoudert created at 2022-04-23 10:21:23

on the way, we set position of vertices in method `Circuit`.
----
New commits:


---

Comment by dcoudert created at 2022-04-23 10:21:23

Changing status from new to needs_review.


---

Comment by tscrim created at 2022-04-25 00:30:52

I don't think we should have this doctest:

```
sage: digraphs.ButterflyGraph(3).show()  # long time
```

It doesn't fundamentally do anything for testing. I would have a test that outputs the information you want, the position of the vertices for plotting.


---

Comment by git created at 2022-04-25 13:01:01

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dcoudert created at 2022-04-25 13:01:42

Let's try this.


---

Comment by tscrim created at 2022-04-25 14:01:48

Thanks. LGTM.


---

Comment by tscrim created at 2022-04-25 14:02:07

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2022-05-22 18:10:58

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2022-05-22 18:10:58


```
sage -t --long --warn-long 47.0 --random-seed=123 src/sage/graphs/digraph_generators.py
**********************************************************************
File "src/sage/graphs/digraph_generators.py", line 260, in sage.graphs.digraph_generators.DiGraphGenerators.ButterflyGraph
Failed example:
    digraphs.ButterflyGraph(2).get_pos()
Expected:
    {('11', 0): (0, 0),
     ('11', 1): (2, 0),
     ('11', 2): (4, 0),
     ('10', 0): (0, 1),
     ('10', 1): (2, 1),
     ('10', 2): (4, 1),
     ('01', 0): (0, 2),
     ('01', 1): (2, 2),
     ('01', 2): (4, 2),
     ('00', 0): (0, 3),
     ('00', 1): (2, 3),
     ('00', 2): (4, 3)}
Got:
    {('00', 0): (0, 3),
     ('00', 1): (2, 3),
     ('00', 2): (4, 3),
     ('01', 0): (0, 2),
     ('01', 1): (2, 2),
     ('01', 2): (4, 2),
     ('10', 0): (0, 1),
     ('10', 1): (2, 1),
     ('10', 2): (4, 1),
     ('11', 0): (0, 0),
     ('11', 1): (2, 0),
     ('11', 2): (4, 0)}
**********************************************************************
1 item had failures:
   1 of   6 in sage.graphs.digraph_generators.DiGraphGenerators.ButterflyGraph
    [151 tests, 1 failure, 3.19 s]
----------------------------------------------------------------------
sage -t --long --warn-long 47.0 --random-seed=123 src/sage/graphs/digraph_generators.py  # 1 doctest failed
----------------------------------------------------------------------
```



---

Comment by git created at 2022-05-22 19:44:06

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dcoudert created at 2022-05-22 19:44:43

Let's avoid sorting issues with a simpler test.


---

Comment by dcoudert created at 2022-05-22 19:44:43

Changing status from needs_work to needs_review.


---

Comment by tscrim created at 2022-05-22 22:31:15

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2022-05-22 22:31:15

Okay. Although I am slightly surprised that there was an issue but a green patchbot. Usually this is sorted correctly and consistently when running the doctests...


---

Comment by dcoudert created at 2022-05-22 22:37:52

I agree this is very surprising. Let's hope we will not hope such issue in other places.


---

Comment by vbraun created at 2022-05-26 22:49:36

Resolution: fixed
