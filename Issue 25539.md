# Issue 25539: bug in printing of a genus symbol

Issue created by migration from Trac.

Original creator: sbrandhorst

Original creation time: 2018-07-05 07:44:30

Keywords: genus


```
sage: G
Genus of
[ 2  0  0]
[ 0  2  0]
[ 0  0 64]
Genus symbol at 2:    [2^2]_1 :[64^1]_1
```


The correct symbol is
{{{ 
[2<sup>2]_2:[64</sup>1]_1 
}}}


---

Comment by sbrandhorst created at 2018-07-05 08:11:34

Changing status from new to needs_review.


---

Comment by sbrandhorst created at 2018-07-05 08:11:34

New commits:


---

Comment by tscrim created at 2018-10-04 22:40:45

LGTM (I don't understand the math, but the code matches what you put in the comments.). Once you add the author name, you can set a positive review.


---

Comment by sbrandhorst created at 2018-10-05 06:49:28

I just noticed another bug:


```
sage: a=matrix.diagonal([1,3])
sage: b=matrix(ZZ,2,[2,1,1,2])*2
sage: c = matrix.block_diagonal([a,b])
sage: Genus(c)
Genus of
[1 0|0 0]
[0 3|0 0]
[---+---]
[0 0|4 2]
[0 0|2 4]
Genus symbol at 2:    [1^2]_02^2 
Genus symbol at 3:     1^2 3^2
}}} 
Here
`Genus symbol at 2:    [1^2]_0 2^2 `
is better.

Also it would be good to print the signature of the quadratic form and
moreover if the representative is greater than ``20 x 20`` or something to suppress it - just like our matrices.


---

Comment by git created at 2018-10-05 07:56:19

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by tscrim created at 2018-10-05 10:12:23

Nitpicking: It would be a much nicer test output to run `latex(G)` instead of `G.__latex__()` (this is also a often done test). Similarly `repr(s)` instead of `s.__repr__()`. It would also be more useful to use raw strings when writing the latex strings, e.g., `"\\\\"` -> `r"\\"`.

Otherwise LGTM (i.e., feel free to set a positive review if you don't want to change these things).


---

Comment by git created at 2018-10-05 11:00:35

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by sbrandhorst created at 2018-10-05 11:01:22

thank you. Those tricks were new to me.


---

Comment by tscrim created at 2018-10-05 11:02:16

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2018-10-06 17:13:10

Resolution: fixed
