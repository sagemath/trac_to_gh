# Issue 25539: bug in printing of a genus symbol

archive/issues_025539.json:
```json
{
    "body": "Keywords: genus\n\n\n```\nsage: G\nGenus of\n[ 2  0  0]\n[ 0  2  0]\n[ 0  0 64]\nGenus symbol at 2:    [2^2]_1 :[64^1]_1\n```\n\n\nThe correct symbol is\n\n``` \n[2^2]_2:[64^1]_1 \n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/25776\n\n",
    "created_at": "2018-07-05T07:44:30Z",
    "labels": [
        "component: quadratic forms",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.4",
    "title": "bug in printing of a genus symbol",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25539",
    "user": "https://github.com/simonbrandhorst"
}
```
Keywords: genus


```
sage: G
Genus of
[ 2  0  0]
[ 0  2  0]
[ 0  0 64]
Genus symbol at 2:    [2^2]_1 :[64^1]_1
```


The correct symbol is

``` 
[2^2]_2:[64^1]_1 
```


Issue created by migration from https://trac.sagemath.org/ticket/25776





---

archive/issue_comments_359674.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-07-05T08:11:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25539#issuecomment-359674",
    "user": "https://github.com/simonbrandhorst"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_359675.json:
```json
{
    "body": "New commits:",
    "created_at": "2018-07-05T08:11:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25539#issuecomment-359675",
    "user": "https://github.com/simonbrandhorst"
}
```

New commits:



---

archive/issue_comments_359676.json:
```json
{
    "body": "LGTM (I don't understand the math, but the code matches what you put in the comments.). Once you add the author name, you can set a positive review.",
    "created_at": "2018-10-04T22:40:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25539#issuecomment-359676",
    "user": "https://github.com/tscrim"
}
```

LGTM (I don't understand the math, but the code matches what you put in the comments.). Once you add the author name, you can set a positive review.



---

archive/issue_comments_359677.json:
```json
{
    "body": "I just noticed another bug:\n\n\n```\nsage: a=matrix.diagonal([1,3])\nsage: b=matrix(ZZ,2,[2,1,1,2])*2\nsage: c = matrix.block_diagonal([a,b])\nsage: Genus(c)\nGenus of\n[1 0|0 0]\n[0 3|0 0]\n[---+---]\n[0 0|4 2]\n[0 0|2 4]\nGenus symbol at 2:    [1^2]_02^2 \nGenus symbol at 3:     1^2 3^2\n```\n \nHere\n`Genus symbol at 2:    [1^2]_0 2^2 `\nis better.\n\nAlso it would be good to print the signature of the quadratic form and\nmoreover if the representative is greater than ``20 x 20`` or something to suppress it - just like our matrices.",
    "created_at": "2018-10-05T06:49:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25539#issuecomment-359677",
    "user": "https://github.com/simonbrandhorst"
}
```

I just noticed another bug:


```
sage: a=matrix.diagonal([1,3])
sage: b=matrix(ZZ,2,[2,1,1,2])*2
sage: c = matrix.block_diagonal([a,b])
sage: Genus(c)
Genus of
[1 0|0 0]
[0 3|0 0]
[---+---]
[0 0|4 2]
[0 0|2 4]
Genus symbol at 2:    [1^2]_02^2 
Genus symbol at 3:     1^2 3^2
```
 
Here
`Genus symbol at 2:    [1^2]_0 2^2 `
is better.

Also it would be good to print the signature of the quadratic form and
moreover if the representative is greater than ``20 x 20`` or something to suppress it - just like our matrices.



---

archive/issue_comments_359678.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2018-10-05T07:56:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25539#issuecomment-359678",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_359679.json:
```json
{
    "body": "Nitpicking: It would be a much nicer test output to run `latex(G)` instead of `G.__latex__()` (this is also a often done test). Similarly `repr(s)` instead of `s.__repr__()`. It would also be more useful to use raw strings when writing the latex strings, e.g., `\"\\\\\\\\\"` -> `r\"\\\\\"`.\n\nOtherwise LGTM (i.e., feel free to set a positive review if you don't want to change these things).",
    "created_at": "2018-10-05T10:12:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25539#issuecomment-359679",
    "user": "https://github.com/tscrim"
}
```

Nitpicking: It would be a much nicer test output to run `latex(G)` instead of `G.__latex__()` (this is also a often done test). Similarly `repr(s)` instead of `s.__repr__()`. It would also be more useful to use raw strings when writing the latex strings, e.g., `"\\\\"` -> `r"\\"`.

Otherwise LGTM (i.e., feel free to set a positive review if you don't want to change these things).



---

archive/issue_comments_359680.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-10-05T11:00:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25539#issuecomment-359680",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_359681.json:
```json
{
    "body": "thank you. Those tricks were new to me.",
    "created_at": "2018-10-05T11:01:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25539#issuecomment-359681",
    "user": "https://github.com/simonbrandhorst"
}
```

thank you. Those tricks were new to me.



---

archive/issue_comments_359682.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-10-05T11:02:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25539#issuecomment-359682",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_359683.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-10-06T17:13:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25539#issuecomment-359683",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_023773.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-10-06T17:13:10Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/25539",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25539#event-23773"
}
```
