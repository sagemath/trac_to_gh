# Issue 12164: The optional doctests in sage/databases/symbolic_data.py are misformatted so they are never run

Issue created by migration from Trac.

Original creator: was

Original creation time: 2012-01-21 21:01:24

Assignee: mvngu

CC:  mjo

The format for optional tests is:

```
sage:   the_test   # optional - package_or_other_name
```

But in databases/symbolic_data.py, we find

```
sage: search_src('optional', 'database_symbo')
databases/symbolic_data.py:33:    sage: sd = SymbolicData(); sd # optional requires database_symbolic_data
databases/symbolic_data.py:36:    sage: sd.ZeroDim__example_1 # optional requires database_symbolic_data
databases/symbolic_data.py:39:    sage: sd.Katsura_3 # optional requires database_symbolic_data
...
```


Using "requires" doesn't work, though you can optional put that after the dash.


---

Attachment

Fix optional syntax in symbolic_data.py


---

Comment by mjo created at 2012-01-24 00:25:50

Changing status from new to needs_review.


---

Comment by mjo created at 2012-01-24 00:25:50

All optional doctests in symbolic_data.py:


```
$ sage -t -verbose -only-optional symbolic_data.py
...
31 passed and 0 failed.
```


Before the patch:



```
$ sage -t -verbose -only-optional=database_symbolic_data symbolic_data.py 
sage -t -verbose -only-optional=database_symbolic_data "devel/sage-devel/sage/databases/symbolic_data.py"
	 [0.1 s]
 
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 0.1 seconds
```


And after the patch,


```
$ sage -t -verbose -only-optional=database_symbolic_data symbolic_data.py
...
31 passed and 0 failed.
```



---

Comment by malb created at 2012-01-25 10:47:17

Ah, crap. I completely missed that there was a patch up already, so I prepared my own. Sorry. But to sweeten the deal: I fixed the format of the docs so that they work with sphinx and added the docs to the reference manual.


---

Comment by was created at 2012-02-03 20:42:43

mjo: can you referee malb's patch?  (or conversely -- I'm confused.)


---

Comment by mjo created at 2012-02-03 22:44:12

Replying to [comment:3 was]:
> mjo: can you referee malb's patch?  (or conversely -- I'm confused.)

His is the better patch.

It's annoying for me to review documentation from home thanks to #12276 (I have to rebuild a chunk of my system or the HTML looks like hell), but I can do it tonight. I've got to build beta2 anyway.


---

Comment by mjo created at 2012-02-04 02:35:30

I know this is silly, but since the patch touches them all, can you change EXAMPLE to EXAMPLES? At least for the one with multiple examples (I prefer them to be consistent, but don't care all that much).

Other than that, the patch is fine and the new docs look great.


---

Comment by mjo created at 2012-02-04 02:40:30

Changing status from needs_review to needs_work.


---

Attachment


---

Comment by malb created at 2012-02-05 12:23:02

Changing status from needs_work to needs_review.


---

Comment by malb created at 2012-02-05 12:23:02

done :)


---

Comment by mjo created at 2012-02-06 02:47:30

Today I learned that you can start a commit message with the comment delimiter. Thanks!


---

Comment by mjo created at 2012-02-06 02:47:30

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2012-02-07 13:23:38

I guess...


---

Comment by jdemeyer created at 2012-02-14 14:21:52

Resolution: fixed
