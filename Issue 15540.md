# Issue 15540: Problems with polynomials over extensions of finite fields

archive/issues_015540.json:
```json
{
    "body": "Assignee: @tscrim\n\nCC:  brucin @roed314 @jdemeyer @pjbruin\n\nWhile looking at #13642, I noticed the following:\n\n```\nsage: k = GF(5)\nsage: D.<x> = k[]\nsage: l.<x> = k.extension(x^2 + 2)\nsage: R.<t> = l[]\nsage: f = t^4 + (2*x - 1)*t^3 + (2*x + 1)*t^2 + 3\nsage: h = t^4 - x*t^3 + (3*x + 1)*t^2 + 2*t + 2*x - 1\nsage: pow(f, 2, h)\n---------------------------------------------------------------------------\nRuntimeError                              Traceback (most recent call last)\n...\nRuntimeError: PowerMod: bad args\n\nsage: pow(t, 2, x) # segfault\n```\n\nThis occurs on a clean 6.1.\n\nIssue created by migration from https://trac.sagemath.org/ticket/15777\n\n",
    "created_at": "2014-02-02T07:39:06Z",
    "labels": [
        "component: basic arithmetic",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.2",
    "title": "Problems with polynomials over extensions of finite fields",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15540",
    "user": "https://github.com/tscrim"
}
```
Assignee: @tscrim

CC:  brucin @roed314 @jdemeyer @pjbruin

While looking at #13642, I noticed the following:

```
sage: k = GF(5)
sage: D.<x> = k[]
sage: l.<x> = k.extension(x^2 + 2)
sage: R.<t> = l[]
sage: f = t^4 + (2*x - 1)*t^3 + (2*x + 1)*t^2 + 3
sage: h = t^4 - x*t^3 + (3*x + 1)*t^2 + 2*t + 2*x - 1
sage: pow(f, 2, h)
---------------------------------------------------------------------------
RuntimeError                              Traceback (most recent call last)
...
RuntimeError: PowerMod: bad args

sage: pow(t, 2, x) # segfault
```

This occurs on a clean 6.1.

Issue created by migration from https://trac.sagemath.org/ticket/15777





---

archive/issue_comments_200489.json:
```json
{
    "body": "Also we should re-enable the tests in #13642.",
    "created_at": "2014-02-02T07:44:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15540#issuecomment-200489",
    "user": "https://github.com/tscrim"
}
```

Also we should re-enable the tests in #13642.



---

archive/issue_comments_200490.json:
```json
{
    "body": "Changing keywords from \"\" to \"NTL\".",
    "created_at": "2014-02-26T20:28:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15540#issuecomment-200490",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing keywords from "" to "NTL".



---

archive/issue_comments_200491.json:
```json
{
    "body": "It was a problem with the use of NTL modular exp which does not like the base of equal or higher degree than the modulus.\n----\nNew commits:",
    "created_at": "2014-02-26T20:28:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15540#issuecomment-200491",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

It was a problem with the use of NTL modular exp which does not like the base of equal or higher degree than the modulus.
----
New commits:



---

archive/issue_comments_200492.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-02-26T20:28:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15540#issuecomment-200492",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_200493.json:
```json
{
    "body": "Oops, I forgot the segfault which was not in the disabled tests.",
    "created_at": "2014-02-26T20:32:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15540#issuecomment-200493",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Oops, I forgot the segfault which was not in the disabled tests.



---

archive/issue_comments_200494.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-02-26T20:32:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15540#issuecomment-200494",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_200495.json:
```json
{
    "body": "Ok NTL does not like building a pre conditionning modulus object when the modulus is of degree one...",
    "created_at": "2014-02-26T20:33:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15540#issuecomment-200495",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Ok NTL does not like building a pre conditionning modulus object when the modulus is of degree one...



---

archive/issue_comments_200496.json:
```json
{
    "body": "Not sure what to do about this one:\n\n```\nsage: x = polygen(GF(5))\nsage: x % 2\n0\n```\n\nand similar stuff.\nWhatsoever, I propose to postpone that case where the modulus is of degree < 1 to a later ticket.",
    "created_at": "2014-02-26T21:03:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15540#issuecomment-200496",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Not sure what to do about this one:

```
sage: x = polygen(GF(5))
sage: x % 2
0
```

and similar stuff.
Whatsoever, I propose to postpone that case where the modulus is of degree < 1 to a later ticket.



---

archive/issue_comments_200497.json:
```json
{
    "body": "This one in not so good as well:\n\n```\nsage: x = polygen(GF(5))\nsage: pow(x,100000000000,x)\nException (FLINT memory_manager). Unable to allocate memory.\n```\n",
    "created_at": "2014-02-26T21:18:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15540#issuecomment-200497",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

This one in not so good as well:

```
sage: x = polygen(GF(5))
sage: pow(x,100000000000,x)
Exception (FLINT memory_manager). Unable to allocate memory.
```




---

archive/issue_comments_200498.json:
```json
{
    "body": "This one is nice enough as well:\n\n```\nsage: x = polygen(ZZ)\nsage: pow(x,100,x+1)\nx^100\n```\n",
    "created_at": "2014-02-26T21:24:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15540#issuecomment-200498",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

This one is nice enough as well:

```
sage: x = polygen(ZZ)
sage: pow(x,100,x+1)
x^100
```




---

archive/issue_comments_200499.json:
```json
{
    "body": "Replying to [comment:4 jpflori]:\n> Ok NTL does not like building a pre conditionning modulus object when the modulus is of degree one...\nSame problem for NTL GF2X polynomials.",
    "created_at": "2014-02-26T21:43:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15540#issuecomment-200499",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Replying to [comment:4 jpflori]:
> Ok NTL does not like building a pre conditionning modulus object when the modulus is of degree one...
Same problem for NTL GF2X polynomials.



---

archive/issue_comments_200500.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-02-26T22:33:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15540#issuecomment-200500",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200501.json:
```json
{
    "body": "At least the two problems mentioned in the ticket description and involving NTL are fixed now.\n\nThe polynomial stuff needs major refactoring anyway, we should move the template files to different folders in the spirit of what was done in #12555 for p-adics, use templating for additional classes, etc.; so let's postpone the other issues I reported here to follow up tickets.",
    "created_at": "2014-02-26T22:35:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15540#issuecomment-200501",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

At least the two problems mentioned in the ticket description and involving NTL are fixed now.

The polynomial stuff needs major refactoring anyway, we should move the template files to different folders in the spirit of what was done in #12555 for p-adics, use templating for additional classes, etc.; so let's postpone the other issues I reported here to follow up tickets.



---

archive/issue_comments_200502.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-02-26T22:35:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15540#issuecomment-200502",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_200503.json:
```json
{
    "body": "Follow-up tickets: #15866, #15867, #15868.",
    "created_at": "2014-02-26T22:43:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15540#issuecomment-200503",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Follow-up tickets: #15866, #15867, #15868.



---

archive/issue_comments_200504.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-02-27T07:57:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15540#issuecomment-200504",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_200505.json:
```json
{
    "body": "Well let's get on those, but first, positive review here. Thanks Jean-Pierre.",
    "created_at": "2014-02-27T07:57:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15540#issuecomment-200505",
    "user": "https://github.com/tscrim"
}
```

Well let's get on those, but first, positive review here. Thanks Jean-Pierre.



---

archive/issue_comments_200506.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-03-01T08:48:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15540#issuecomment-200506",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
