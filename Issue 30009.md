# Issue 30009: Support interacts in JupyterLab

archive/issues_030009.json:
```json
{
    "body": "CC:  @slel\n\nKeywords: jupyterlab\n\nBefore this ticket: interacts don't work in JupyterLab.\n\nReported at:\n\n- [Ask Sage question 50194: Interact in Jupyterlab vs Jupyter](https://ask.sagemath.org/question/50194)\n- comment to an answer at [Ask Sage question 52707](https://ask.sagemath.org/question/52707)\n\nRelated:\n\n- #29728: Meta-ticket: improve compatibility with the Python library\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/30246\n\n",
    "created_at": "2020-07-29T11:56:57Z",
    "labels": [
        "component: interact"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "Support interacts in JupyterLab",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30009",
    "user": "https://github.com/slel"
}
```
CC:  @slel

Keywords: jupyterlab

Before this ticket: interacts don't work in JupyterLab.

Reported at:

- [Ask Sage question 50194: Interact in Jupyterlab vs Jupyter](https://ask.sagemath.org/question/50194)
- comment to an answer at [Ask Sage question 52707](https://ask.sagemath.org/question/52707)

Related:

- #29728: Meta-ticket: improve compatibility with the Python library


Issue created by migration from https://trac.sagemath.org/ticket/30246





---

archive/issue_comments_426080.json:
```json
{
    "body": "Could this just be a documentation issue? Is it documented somewhere what extensions need to be installed in jupyterlab so that sage works?",
    "created_at": "2020-08-18T18:02:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30009",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30009#issuecomment-426080",
    "user": "https://github.com/mkoeppe"
}
```

Could this just be a documentation issue? Is it documented somewhere what extensions need to be installed in jupyterlab so that sage works?



---

archive/issue_comments_426081.json:
```json
{
    "body": "Replying to [comment:1 mkoeppe]:\n> Could this just be a documentation issue? Is it documented somewhere what extensions need to be installed in jupyterlab so that sage works?\n\n\nI was able to get interacts working in jupyterlab 2.2.5 using the following command:\n[ipywidgets install instructions](https://github.com/jupyter-widgets/ipywidgets#install)\n\n```\n./sage --jupyter labextension install @jupyter-widgets/jupyterlab-manager@2.0\n```\n\nThis requires nodejs >= 10 to be installed though. Looks like jupyterlab's extension ecosystem is all based on npm. Grabbing the extension tarball directly, still need node for bundling. (webpack, if I remember; been awhile since I've done anything with node.)\n\nSo unless we want to make nodejs an optional->standard package as well, maybe just leave it to the user to install and make a note in the documentation regarding interact functionality? Similar to how imagemagick and ffmpeg are noted in [animated plots](https://doc.sagemath.org/html/en/reference/plotting/sage/plot/animate.html).",
    "created_at": "2020-08-21T18:01:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30009",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30009#issuecomment-426081",
    "user": "https://github.com/jcamp0x2a"
}
```

Replying to [comment:1 mkoeppe]:
> Could this just be a documentation issue? Is it documented somewhere what extensions need to be installed in jupyterlab so that sage works?


I was able to get interacts working in jupyterlab 2.2.5 using the following command:
[ipywidgets install instructions](https://github.com/jupyter-widgets/ipywidgets#install)

```
./sage --jupyter labextension install @jupyter-widgets/jupyterlab-manager@2.0
```

This requires nodejs >= 10 to be installed though. Looks like jupyterlab's extension ecosystem is all based on npm. Grabbing the extension tarball directly, still need node for bundling. (webpack, if I remember; been awhile since I've done anything with node.)

So unless we want to make nodejs an optional->standard package as well, maybe just leave it to the user to install and make a note in the documentation regarding interact functionality? Similar to how imagemagick and ffmpeg are noted in [animated plots](https://doc.sagemath.org/html/en/reference/plotting/sage/plot/animate.html).



---

archive/issue_comments_426082.json:
```json
{
    "body": "Is installation via https://pypi.org/project/nodeenv/ an option?",
    "created_at": "2020-08-21T18:15:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30009",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30009#issuecomment-426082",
    "user": "https://github.com/mkoeppe"
}
```

Is installation via https://pypi.org/project/nodeenv/ an option?



---

archive/issue_comments_426083.json:
```json
{
    "body": "Replying to [comment:4 mkoeppe]:\n> Is installation via https://pypi.org/project/nodeenv/ an option?\n\n\nCool stuff. I was indeed able to get interacts working without a system nodejs using `./sage --pip install nodeenv` and creating a nodeenv to do the jupyter-widgets extension installation. Since node isn't needed for running jupyterlab, that nodeenv could probably get wiped out automatically following installation.\n\nNot having node though does prevent you from browsing/installing other extensions in the extensions sidebar of jupyterlab. I played around with modifying the main sage script to activate the nodeenv when using `./sage -n jupyterlab` and was able to install, for example, the [jupyterlab-toc](https://github.com/jupyterlab/jupyterlab-toc) extension and use it without issue.\n\nI'll continue experimenting with this for a bit longer, do some tidying up, and push a branch for review.",
    "created_at": "2020-08-21T21:48:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30009",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30009#issuecomment-426083",
    "user": "https://github.com/jcamp0x2a"
}
```

Replying to [comment:4 mkoeppe]:
> Is installation via https://pypi.org/project/nodeenv/ an option?


Cool stuff. I was indeed able to get interacts working without a system nodejs using `./sage --pip install nodeenv` and creating a nodeenv to do the jupyter-widgets extension installation. Since node isn't needed for running jupyterlab, that nodeenv could probably get wiped out automatically following installation.

Not having node though does prevent you from browsing/installing other extensions in the extensions sidebar of jupyterlab. I played around with modifying the main sage script to activate the nodeenv when using `./sage -n jupyterlab` and was able to install, for example, the [jupyterlab-toc](https://github.com/jupyterlab/jupyterlab-toc) extension and use it without issue.

I'll continue experimenting with this for a bit longer, do some tidying up, and push a branch for review.



---

archive/issue_comments_426084.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-08-22T21:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30009",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30009#issuecomment-426084",
    "user": "https://github.com/jcamp0x2a"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_426085.json:
```json
{
    "body": "I've pushed a branch for review. It adds 4 new optional packages: nodeenv, nodejs, jupyterlab, and jupyterlab_widgets. The last one, jupyterlab_widgets, gets you everything.\n\nI opted to break them up in this way for (1) convenience in packaging them and (2) flexibility in installing them. For example, if you just want the JupyterLab client and don't care about interacts or other extensions or if you don't want JupyterLab but would like nodejs present in your Sage environment for some other purpose. Please let me know if you'd prefer a different structuring.\n\nShell scripting isn't my forte, so I welcome any feedback regarding coding conventions and best practices!",
    "created_at": "2020-08-22T21:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30009",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30009#issuecomment-426085",
    "user": "https://github.com/jcamp0x2a"
}
```

I've pushed a branch for review. It adds 4 new optional packages: nodeenv, nodejs, jupyterlab, and jupyterlab_widgets. The last one, jupyterlab_widgets, gets you everything.

I opted to break them up in this way for (1) convenience in packaging them and (2) flexibility in installing them. For example, if you just want the JupyterLab client and don't care about interacts or other extensions or if you don't want JupyterLab but would like nodejs present in your Sage environment for some other purpose. Please let me know if you'd prefer a different structuring.

Shell scripting isn't my forte, so I welcome any feedback regarding coding conventions and best practices!



---

archive/issue_comments_426086.json:
```json
{
    "body": "I suppose this also includes what should've been worked under #26059 first and separately (just the jupyterlab package). I apologize for that; got carried away :)",
    "created_at": "2020-08-22T21:43:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30009",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30009#issuecomment-426086",
    "user": "https://github.com/jcamp0x2a"
}
```

I suppose this also includes what should've been worked under #26059 first and separately (just the jupyterlab package). I apologize for that; got carried away :)



---

archive/issue_comments_426087.json:
```json
{
    "body": "Replying to [comment:7 gh-jcamp0x2a]:\n> includes what should've been worked under #26059\n> first and separately\n\n\nWe can mark the other ticket as solved by this one.\n\nI would use https in the home page url for JupyterLab.",
    "created_at": "2020-08-22T22:04:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30009",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30009#issuecomment-426087",
    "user": "https://github.com/slel"
}
```

Replying to [comment:7 gh-jcamp0x2a]:
> includes what should've been worked under #26059
> first and separately


We can mark the other ticket as solved by this one.

I would use https in the home page url for JupyterLab.



---

archive/issue_comments_426088.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-22T23:17:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30009",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30009#issuecomment-426088",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426089.json:
```json
{
    "body": "This looks great overall.\n\nI'm getting the following with this branch (without installing any packages):\n\n```\n./sage -h\n/Users/mkoeppe/s/sage/sage-rebasing/src/bin/sage-env: line 69: cd: /Users/mkoeppe/s/sage/sage-rebasing/local/share/nodejs/: No such file or directory\nSageMath version 9.2.beta10, Release Date: 2020-08-23\n...\n  --notebook=[...]    -- start the Sage notebook (valid options are\n                         'default', 'jupyter', and 'export')\n                         Current default is 'export' from sagenb to jupyter\n  -n, --notebook      -- shortcut for --notebook=default\n...\n$ ./sage -n jupyterlab\n/Users/mkoeppe/s/sage/sage-rebasing/src/bin/sage-env: line 69: cd: /Users/mkoeppe/s/sage/sage-rebasing/local/share/nodejs/: No such file or directory\nJupyterlab is not installed (at least not in this Sage installation).\nYou can install it by running\n  sage --pip install jupyterlab\n```",
    "created_at": "2020-08-23T23:44:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30009",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30009#issuecomment-426089",
    "user": "https://github.com/mkoeppe"
}
```

This looks great overall.

I'm getting the following with this branch (without installing any packages):

```
./sage -h
/Users/mkoeppe/s/sage/sage-rebasing/src/bin/sage-env: line 69: cd: /Users/mkoeppe/s/sage/sage-rebasing/local/share/nodejs/: No such file or directory
SageMath version 9.2.beta10, Release Date: 2020-08-23
...
  --notebook=[...]    -- start the Sage notebook (valid options are
                         'default', 'jupyter', and 'export')
                         Current default is 'export' from sagenb to jupyter
  -n, --notebook      -- shortcut for --notebook=default
...
$ ./sage -n jupyterlab
/Users/mkoeppe/s/sage/sage-rebasing/src/bin/sage-env: line 69: cd: /Users/mkoeppe/s/sage/sage-rebasing/local/share/nodejs/: No such file or directory
Jupyterlab is not installed (at least not in this Sage installation).
You can install it by running
  sage --pip install jupyterlab
```



---

archive/issue_comments_426090.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-08-23T23:44:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30009",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30009#issuecomment-426090",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_426091.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-24T02:02:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30009",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30009#issuecomment-426091",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426092.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-24T02:13:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30009",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30009#issuecomment-426092",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426093.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-08-24T02:22:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30009",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30009#issuecomment-426093",
    "user": "https://github.com/jcamp0x2a"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_426094.json:
```json
{
    "body": "Thank you for catching that! \n\nI've pushed a couple more changes, the first making sure to check that `nodeenv_activate` symlink exists before trying to resolve it, and the second mentioning to the user to install using `sage -i jupyterlab` instead of `sage --pip install jupyterlab`.\n\nOh, do you happen to know of a good way to uninstall Sage packages? I tested these last couple changes by manually removing/moving files around in SAGE_LOCAL. I'd like to get back to a state without, for example, jupyterlab for testing, but I'd also like to avoid having to do a full clean and rebuild. I suppose I could be doing this in a VM and just snapshot and rollback.",
    "created_at": "2020-08-24T02:22:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30009",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30009#issuecomment-426094",
    "user": "https://github.com/jcamp0x2a"
}
```

Thank you for catching that! 

I've pushed a couple more changes, the first making sure to check that `nodeenv_activate` symlink exists before trying to resolve it, and the second mentioning to the user to install using `sage -i jupyterlab` instead of `sage --pip install jupyterlab`.

Oh, do you happen to know of a good way to uninstall Sage packages? I tested these last couple changes by manually removing/moving files around in SAGE_LOCAL. I'd like to get back to a state without, for example, jupyterlab for testing, but I'd also like to avoid having to do a full clean and rebuild. I suppose I could be doing this in a VM and just snapshot and rollback.



---

archive/issue_comments_426095.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-08-25T12:26:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30009",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30009#issuecomment-426095",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_426096.json:
```json
{
    "body": "This ticket breaks the patchbots (at least the ones i run). It seems due to some modification in `src/bin/sage-env` that tries to cd into a nonexistent `local/share/nodejs` directory. When the patchbots run:\n\n```\n./sage --python --version\n```\n\nThey get:\n\n```\n/home/sagemath/sage-9.1/src/bin/sage-env: line 69: cd: /home/sagemath/sage-9.1/local/share/nodejs/: No such file or directory\nPython 3.7.3\n```\n\nThe error should be catched (e.g. stderr could be redirected to `/dev/null`).",
    "created_at": "2020-08-25T12:26:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30009",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30009#issuecomment-426096",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

This ticket breaks the patchbots (at least the ones i run). It seems due to some modification in `src/bin/sage-env` that tries to cd into a nonexistent `local/share/nodejs` directory. When the patchbots run:

```
./sage --python --version
```

They get:

```
/home/sagemath/sage-9.1/src/bin/sage-env: line 69: cd: /home/sagemath/sage-9.1/local/share/nodejs/: No such file or directory
Python 3.7.3
```

The error should be catched (e.g. stderr could be redirected to `/dev/null`).



---

archive/issue_comments_426097.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-08-25T12:39:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30009",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30009#issuecomment-426097",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_426098.json:
```json
{
    "body": "Apparently, you fixed the issue already, sorry for the noise, let us see if the patchbots are happy now.",
    "created_at": "2020-08-25T12:39:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30009",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30009#issuecomment-426098",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Apparently, you fixed the issue already, sorry for the noise, let us see if the patchbots are happy now.



---

archive/issue_comments_426099.json:
```json
{
    "body": "Replying to [comment:16 tmonteil]:\n> Apparently, you fixed the issue already, sorry for the noise, let us see if the patchbots are happy now.\n\n\nNo worries. Thank you for running those patchbots.",
    "created_at": "2020-08-25T15:54:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30009",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30009#issuecomment-426099",
    "user": "https://github.com/jcamp0x2a"
}
```

Replying to [comment:16 tmonteil]:
> Apparently, you fixed the issue already, sorry for the noise, let us see if the patchbots are happy now.


No worries. Thank you for running those patchbots.



---

archive/issue_comments_426100.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2020-08-27T01:00:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30009",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30009#issuecomment-426100",
    "user": "https://github.com/mkoeppe"
}
```

Changing priority from major to critical.



---

archive/issue_comments_426101.json:
```json
{
    "body": "Replying to [comment:14 gh-jcamp0x2a]:\n>  mentioning to the user to install using `sage -i jupyterlab` instead of `sage --pip install jupyterlab`.\n\n\nWould it perhaps be better to direct the user to do `sage -i jupyterlab_widgets` so that a full-featured jupyterlab is installed?",
    "created_at": "2020-08-27T01:06:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30009",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30009#issuecomment-426101",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:14 gh-jcamp0x2a]:
>  mentioning to the user to install using `sage -i jupyterlab` instead of `sage --pip install jupyterlab`.


Would it perhaps be better to direct the user to do `sage -i jupyterlab_widgets` so that a full-featured jupyterlab is installed?



---

archive/issue_comments_426102.json:
```json
{
    "body": "Also, could you update the help messages in `src/bin/sage` so that jupyterlab is mentioned as an option. (Also I would guess that the default that is mentioned there is not correct.)",
    "created_at": "2020-08-27T01:10:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30009",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30009#issuecomment-426102",
    "user": "https://github.com/mkoeppe"
}
```

Also, could you update the help messages in `src/bin/sage` so that jupyterlab is mentioned as an option. (Also I would guess that the default that is mentioned there is not correct.)



---

archive/issue_comments_426103.json:
```json
{
    "body": "on macOS:\n\n```\n[nodejs-12.18.3] usage: grep [-abcDEFGHhIiJLlmnOoqRSsUVvwxZ] [-A num] [-B num] [-C[num]]\n[nodejs-12.18.3] \t[-e pattern] [-f file] [--binary-files=value] [--color=when]\n[nodejs-12.18.3] \t[--context[=num]] [--directories=action] [--label] [--line-buffered]\n[nodejs-12.18.3] \t[--null] [pattern] [file ...]\n[nodejs-12.18.3] Error determining which nodejs version to install ... exiting\n```",
    "created_at": "2020-08-27T01:22:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30009",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30009#issuecomment-426103",
    "user": "https://github.com/mkoeppe"
}
```

on macOS:

```
[nodejs-12.18.3] usage: grep [-abcDEFGHhIiJLlmnOoqRSsUVvwxZ] [-A num] [-B num] [-C[num]]
[nodejs-12.18.3] 	[-e pattern] [-f file] [--binary-files=value] [--color=when]
[nodejs-12.18.3] 	[--context[=num]] [--directories=action] [--label] [--line-buffered]
[nodejs-12.18.3] 	[--null] [pattern] [file ...]
[nodejs-12.18.3] Error determining which nodejs version to install ... exiting
```



---

archive/issue_comments_426104.json:
```json
{
    "body": "`grep -P` is not portable",
    "created_at": "2020-08-27T01:24:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30009",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30009#issuecomment-426104",
    "user": "https://github.com/mkoeppe"
}
```

`grep -P` is not portable



---

archive/issue_comments_426105.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-08-27T01:24:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30009",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30009#issuecomment-426105",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_426106.json:
```json
{
    "body": "Replying to [comment:19 mkoeppe]:\n> Would it perhaps be better to direct the user to do `sage -i jupyterlab_widgets` so that a full-featured jupyterlab is installed?\n\nI will update the message to suggest jupyterlab_widgets by default, with a short aside about a minimal installation using just jupyterlab.\n\nReplying to [comment:20 mkoeppe]:\n> Also, could you update the help messages in `src/bin/sage` so that jupyterlab is mentioned as an option. (Also I would guess that the default that is mentioned there is not correct.)\n\nI will add mention of jupyterlab to the help messages. I'm not sure I understand you about the default. The help messages I see list jupyter as the default, and indeed running `sage -n` or `sage -n default` starts jupyter.\n\nReplying to [comment:22 mkoeppe]:\n> `grep -P` is not portable\n\nI should know better. I remember this bit me on Solaris a few years ago, too. I will fix this.",
    "created_at": "2020-08-27T05:29:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30009",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30009#issuecomment-426106",
    "user": "https://github.com/jcamp0x2a"
}
```

Replying to [comment:19 mkoeppe]:
> Would it perhaps be better to direct the user to do `sage -i jupyterlab_widgets` so that a full-featured jupyterlab is installed?

I will update the message to suggest jupyterlab_widgets by default, with a short aside about a minimal installation using just jupyterlab.

Replying to [comment:20 mkoeppe]:
> Also, could you update the help messages in `src/bin/sage` so that jupyterlab is mentioned as an option. (Also I would guess that the default that is mentioned there is not correct.)

I will add mention of jupyterlab to the help messages. I'm not sure I understand you about the default. The help messages I see list jupyter as the default, and indeed running `sage -n` or `sage -n default` starts jupyter.

Replying to [comment:22 mkoeppe]:
> `grep -P` is not portable

I should know better. I remember this bit me on Solaris a few years ago, too. I will fix this.



---

archive/issue_comments_426107.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-27T16:55:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30009",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30009#issuecomment-426107",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426108.json:
```json
{
    "body": "Upon re-reading the basic help message, I saw what you mentioned about the default needing to be updated. I've pushed changes that I believe address your feedback items.\n\nI also came across `sage --notebook --help` which had already mentioned jupyterlab and so didn't need updating, but I found that it also mentions an ipython option:\n\n```\n--notebook [NOTEBOOK], -n [NOTEBOOK], -notebook [NOTEBOOK]\n                      The notebook to run [one of: default, ipython,\n                      jupyter, jupyterlab, export]. Default is jupyter\n```\n\nLooking at the code in `src/bin/sage-notebook`, this option is currently just an alias for jupyter. Would it be valuable to mention this option in the basic and/or advanced help messages for sage as well?",
    "created_at": "2020-08-27T17:03:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30009",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30009#issuecomment-426108",
    "user": "https://github.com/jcamp0x2a"
}
```

Upon re-reading the basic help message, I saw what you mentioned about the default needing to be updated. I've pushed changes that I believe address your feedback items.

I also came across `sage --notebook --help` which had already mentioned jupyterlab and so didn't need updating, but I found that it also mentions an ipython option:

```
--notebook [NOTEBOOK], -n [NOTEBOOK], -notebook [NOTEBOOK]
                      The notebook to run [one of: default, ipython,
                      jupyter, jupyterlab, export]. Default is jupyter
```

Looking at the code in `src/bin/sage-notebook`, this option is currently just an alias for jupyter. Would it be valuable to mention this option in the basic and/or advanced help messages for sage as well?



---

archive/issue_comments_426109.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-08-27T17:03:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30009",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30009#issuecomment-426109",
    "user": "https://github.com/jcamp0x2a"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_426110.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-08-28T04:53:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30009",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30009#issuecomment-426110",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_426111.json:
```json
{
    "body": "This works for me on macOS and is looking great overall.\n\nI have added dependencies to make sure that a parallel build works correctly.\n\n---\nNew commits:",
    "created_at": "2020-08-28T04:53:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30009",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30009#issuecomment-426111",
    "user": "https://github.com/mkoeppe"
}
```

This works for me on macOS and is looking great overall.

I have added dependencies to make sure that a parallel build works correctly.

---
New commits:



---

archive/issue_comments_426112.json:
```json
{
    "body": "Replying to [comment:28 mkoeppe]:\n> This works for me on macOS and is looking great overall.\n> \n> I have added dependencies to make sure that a parallel build works correctly.\n\n\nAwesome! Thank you for all your time and assistance on this ticket.",
    "created_at": "2020-08-28T16:17:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30009",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30009#issuecomment-426112",
    "user": "https://github.com/jcamp0x2a"
}
```

Replying to [comment:28 mkoeppe]:
> This works for me on macOS and is looking great overall.
> 
> I have added dependencies to make sure that a parallel build works correctly.


Awesome! Thank you for all your time and assistance on this ticket.



---

archive/issue_events_078222.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-09-01T23:00:19Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30009",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30009#event-78222"
}
```



---

archive/issue_comments_426113.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-09-01T23:00:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30009",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30009#issuecomment-426113",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_426114.json:
```json
{
    "body": "Minor booboo : after (successful) installlation, `jupyterlab_widgets` is still marked as not installed:\n\n```\ncharpent@zen-book-flip:/usr/local/sage-exp$ ./sage -optional | grep jupyter\ngap_jupyter.............................0.9 (0.9)\njupyterlab..............................2.2.6 (2.2.6)\njupyterlab_widgets......................none (2.0)\npari_jupyter............................1.3.2 (1.3.2)\nr_jupyter...............................none (not_installed)\nsingular_jupyter........................0.9.7 (0.9.7)\n```\n\nUntidy, and potentially confusing...",
    "created_at": "2020-09-04T11:22:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30009",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30009#issuecomment-426114",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Minor booboo : after (successful) installlation, `jupyterlab_widgets` is still marked as not installed:

```
charpent@zen-book-flip:/usr/local/sage-exp$ ./sage -optional | grep jupyter
gap_jupyter.............................0.9 (0.9)
jupyterlab..............................2.2.6 (2.2.6)
jupyterlab_widgets......................none (2.0)
pari_jupyter............................1.3.2 (1.3.2)
r_jupyter...............................none (not_installed)
singular_jupyter........................0.9.7 (0.9.7)
```

Untidy, and potentially confusing...



---

archive/issue_comments_426115.json:
```json
{
    "body": "I believe the version in parentheses is the installed version while the other is the available version. I'm not sure why the available version isn't displayed since there is a package-version.txt present for jupyterlab_widgets, but I'm thinking this may be a problem for \"script\" packages in general. For example:\n\n```\n$ ./sage --installed | grep none\njupyterlab_widgets......................none (2.0)\nnodejs..................................none (12.18.3)\nsage_conf...............................none (none)\nsagelib.................................none (9.2.beta10)\nzope_interface..........................none (none)\n```",
    "created_at": "2020-09-04T16:00:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30009",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30009#issuecomment-426115",
    "user": "https://github.com/jcamp0x2a"
}
```

I believe the version in parentheses is the installed version while the other is the available version. I'm not sure why the available version isn't displayed since there is a package-version.txt present for jupyterlab_widgets, but I'm thinking this may be a problem for "script" packages in general. For example:

```
$ ./sage --installed | grep none
jupyterlab_widgets......................none (2.0)
nodejs..................................none (12.18.3)
sage_conf...............................none (none)
sagelib.................................none (9.2.beta10)
zope_interface..........................none (none)
```



---

archive/issue_comments_426116.json:
```json
{
    "body": "Has anyone figured out how to use MathJax in JupyterLab markdown cells?",
    "created_at": "2020-10-24T22:05:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30009",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30009#issuecomment-426116",
    "user": "https://github.com/dimpase"
}
```

Has anyone figured out how to use MathJax in JupyterLab markdown cells?
