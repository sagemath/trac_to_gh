# Issue 30335: Remove indirect typecasts when calling bitset.pxi

Issue created by migration from https://trac.sagemath.org/ticket/30572

Original creator: @kliem

Original creation time: 2020-09-14 15:05:02

Keywords: bitset, typecasting, fused types

This ticket makes typecasts to functions in `data_structures/bitset.pxi` explicit.

This allows [fused types](https://cython.readthedocs.io/en/latest/src/userguide/fusedtypes.html,) as signatures of those functions. E.g.

`cdef inline void bitset_add(bitset_t bits, mp_bitcnt_t n)` -> `cdef inline void bitset_add(fused_bitset_t bits, mp_bitcnt_t n)`. Fused functions do not allow from `PyObject`. (`int` to `size_t` etc. is ok though.)

This way, we can use most of the code in `bitset.pxi` for `CombinatorialPolyhedron`, while easily optimizing it for the special situation.


---

Comment by @kliem created at 2020-09-14 15:05:23

Changing status from new to needs_review.


---

Comment by tscrim created at 2020-09-17 00:02:31

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2020-09-17 00:02:31

LGTM.


---

Comment by @kliem created at 2020-09-17 03:42:18

Thank you.


---

Comment by vbraun created at 2020-09-27 09:09:28

Resolution: fixed
