# Issue 26622: Intersphinx: include python.inv files for Python 2 and 3

archive/issues_026622.json:
```json
{
    "body": "CC:  @fchapoton @strogdon @jdemeyer\n\nThe file `src/doc/common/python.inv` is specific to Python 2. We should include an inventory file for Python 3, to prepare for docbuilding with Python 3.\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/26859\n\n",
    "created_at": "2018-12-08T23:26:56Z",
    "labels": [
        "component: python3"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.6",
    "title": "Intersphinx: include python.inv files for Python 2 and 3",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/26622",
    "user": "https://github.com/jhpalmieri"
}
```
CC:  @fchapoton @strogdon @jdemeyer

The file `src/doc/common/python.inv` is specific to Python 2. We should include an inventory file for Python 3, to prepare for docbuilding with Python 3.


Issue created by migration from https://trac.sagemath.org/ticket/26859





---

archive/issue_comments_373743.json:
```json
{
    "body": "New commits:",
    "created_at": "2018-12-08T23:29:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26622#issuecomment-373743",
    "user": "https://github.com/jhpalmieri"
}
```

New commits:



---

archive/issue_comments_373744.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-12-08T23:29:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26622#issuecomment-373744",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_373745.json:
```json
{
    "body": "Note that the script `update-python-inv.sh` should not need to be run often, but it should still be compatible with OS X. OS X does not include `wget` as standard, but it does include `curl`, so the script will use either one. Also, the old script used `cut` in a non-posix standard way. Please test this script on linux.",
    "created_at": "2018-12-08T23:31:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26622#issuecomment-373745",
    "user": "https://github.com/jhpalmieri"
}
```

Note that the script `update-python-inv.sh` should not need to be run often, but it should still be compatible with OS X. OS X does not include `wget` as standard, but it does include `curl`, so the script will use either one. Also, the old script used `cut` in a non-posix standard way. Please test this script on linux.



---

archive/issue_comments_373746.json:
```json
{
    "body": "these *.inv-files, these are some binary blobs. Is there a reason for this, could they be replaced by something which can be used to generate them?",
    "created_at": "2018-12-08T23:39:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26622#issuecomment-373746",
    "user": "https://github.com/dimpase"
}
```

these *.inv-files, these are some binary blobs. Is there a reason for this, could they be replaced by something which can be used to generate them?



---

archive/issue_comments_373747.json:
```json
{
    "body": "Replying to [comment:4 dimpase]:\n> these *.inv-files, these are some binary blobs. Is there a reason for this, could they be replaced by something which can be used to generate them? \n\nNot without internet access. If we want to maintain the ability to build Sage and its documentation without internet access, we need to have these files. (With internet access, we could replace the files with links to the on-line versions.)",
    "created_at": "2018-12-08T23:41:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26622#issuecomment-373747",
    "user": "https://github.com/jhpalmieri"
}
```

Replying to [comment:4 dimpase]:
> these *.inv-files, these are some binary blobs. Is there a reason for this, could they be replaced by something which can be used to generate them? 

Not without internet access. If we want to maintain the ability to build Sage and its documentation without internet access, we need to have these files. (With internet access, we could replace the files with links to the on-line versions.)



---

archive/issue_comments_373748.json:
```json
{
    "body": "Hmm, I don't get it - these files, they must be generated somehow... It's not some binary-only firmware, is it?",
    "created_at": "2018-12-08T23:46:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26622#issuecomment-373748",
    "user": "https://github.com/dimpase"
}
```

Hmm, I don't get it - these files, they must be generated somehow... It's not some binary-only firmware, is it?



---

archive/issue_comments_373749.json:
```json
{
    "body": "They come from python.org (e.g., https://docs.python.org/3/objects.inv), and they contain links to python.org. I'm sure the Python people have some autogeneration for them, but I don't know how we would do that. \n\nSee http://www.sphinx-doc.org/en/master/usage/extensions/intersphinx.html#confval-intersphinx_mapping for how we could use the links if we assumed internet access. (I think being able to build without internet access is valuable and I am not suggesting changing that \u2013\u00a0I am including this link if you want to figure out what is in the files and if there is any way we could generate them ourselves.) As noted on that Sphinx page, you can also run\n\n```\n./sage --python -msphinx.ext.intersphinx src/doc/common/python.inv\n```\n\nto see the intersphinx mapping provided by that file.",
    "created_at": "2018-12-08T23:53:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26622#issuecomment-373749",
    "user": "https://github.com/jhpalmieri"
}
```

They come from python.org (e.g., https://docs.python.org/3/objects.inv), and they contain links to python.org. I'm sure the Python people have some autogeneration for them, but I don't know how we would do that. 

See http://www.sphinx-doc.org/en/master/usage/extensions/intersphinx.html#confval-intersphinx_mapping for how we could use the links if we assumed internet access. (I think being able to build without internet access is valuable and I am not suggesting changing that – I am including this link if you want to figure out what is in the files and if there is any way we could generate them ourselves.) As noted on that Sphinx page, you can also run

```
./sage --python -msphinx.ext.intersphinx src/doc/common/python.inv
```

to see the intersphinx mapping provided by that file.



---

archive/issue_comments_373750.json:
```json
{
    "body": "I just found [this](https://sphobjinv.readthedocs.io/en/latest/index.html), which lets you create your own `object.inv` files. Maybe we could use that. I am not that interested in spending time on it: the binary files are not that big, and I don't mind just distributing them with Sage.",
    "created_at": "2018-12-08T23:57:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26622#issuecomment-373750",
    "user": "https://github.com/jhpalmieri"
}
```

I just found [this](https://sphobjinv.readthedocs.io/en/latest/index.html), which lets you create your own `object.inv` files. Maybe we could use that. I am not that interested in spending time on it: the binary files are not that big, and I don't mind just distributing them with Sage.



---

archive/issue_comments_373751.json:
```json
{
    "body": "The whole issue would not have arisen if these files were generated...\n\nPerhaps Jeroen could comment on the ease of having this done properly.",
    "created_at": "2018-12-09T00:03:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26622#issuecomment-373751",
    "user": "https://github.com/dimpase"
}
```

The whole issue would not have arisen if these files were generated...

Perhaps Jeroen could comment on the ease of having this done properly.



---

archive/issue_comments_373752.json:
```json
{
    "body": "\"Done properly\". Thanks very much.  ;)",
    "created_at": "2018-12-09T00:08:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26622#issuecomment-373752",
    "user": "https://github.com/jhpalmieri"
}
```

"Done properly". Thanks very much.  ;)



---

archive/issue_comments_373753.json:
```json
{
    "body": "I would say, by the way, that if you want to change how these files are produced, if it is feasible and especially if it will take a while, it belongs on a separate ticket.",
    "created_at": "2018-12-09T00:17:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26622#issuecomment-373753",
    "user": "https://github.com/jhpalmieri"
}
```

I would say, by the way, that if you want to change how these files are produced, if it is feasible and especially if it will take a while, it belongs on a separate ticket.



---

archive/issue_comments_373754.json:
```json
{
    "body": "Replying to [comment:10 jhpalmieri]:\n> \"Done properly\". Thanks very much.  ;)\n\nyes, sometimes I wish we could do anonymous refereeing of tickets :)",
    "created_at": "2018-12-09T00:30:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26622#issuecomment-373754",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:10 jhpalmieri]:
> "Done properly". Thanks very much.  ;)

yes, sometimes I wish we could do anonymous refereeing of tickets :)



---

archive/issue_comments_373755.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-12-10T12:33:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26622#issuecomment-373755",
    "user": "https://github.com/embray"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_373756.json:
```json
{
    "body": "I believe for the `.inv` files the usual approach is for them to be generated and distributed by the relevant projects' maintainers.  So for the ones from Python the correct approach is to download them and include our own copies of them if necessary.\n\nI think this approach looks good for now.",
    "created_at": "2018-12-10T12:33:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26622#issuecomment-373756",
    "user": "https://github.com/embray"
}
```

I believe for the `.inv` files the usual approach is for them to be generated and distributed by the relevant projects' maintainers.  So for the ones from Python the correct approach is to download them and include our own copies of them if necessary.

I think this approach looks good for now.



---

archive/issue_comments_373757.json:
```json
{
    "body": "Sage does generate plenty of `.inv` files while building its docs. Why would one not generate all the `.inv` files then, relying instead on selective manual downloads of stuff? This looks flaky to me...",
    "created_at": "2018-12-11T10:31:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26622#issuecomment-373757",
    "user": "https://github.com/dimpase"
}
```

Sage does generate plenty of `.inv` files while building its docs. Why would one not generate all the `.inv` files then, relying instead on selective manual downloads of stuff? This looks flaky to me...



---

archive/issue_comments_373758.json:
```json
{
    "body": "That would require building the docs for Python, for matplotlib, etc. (or at the very least their inventories).  Flaky or not (I don't think it is) it's pretty normal.  The inventories are just databases of keywords--it's the same reason you would download any pre-computed database of maths results.",
    "created_at": "2018-12-11T11:10:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26622#issuecomment-373758",
    "user": "https://github.com/embray"
}
```

That would require building the docs for Python, for matplotlib, etc. (or at the very least their inventories).  Flaky or not (I don't think it is) it's pretty normal.  The inventories are just databases of keywords--it's the same reason you would download any pre-computed database of maths results.



---

archive/issue_comments_373759.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-12-23T23:40:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26622#issuecomment-373759",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_373760.json:
```json
{
    "body": "This tickets were closed as fixed after the Sage 8.5 release.",
    "created_at": "2018-12-28T14:06:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26622#issuecomment-373760",
    "user": "https://github.com/embray"
}
```

This tickets were closed as fixed after the Sage 8.5 release.
