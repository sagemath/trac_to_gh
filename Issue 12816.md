# Issue 12816: characteristic() should be an integer

archive/issues_012816.json:
```json
{
    "body": "Assignee: @aghitza\n\nKeywords: ZZ, characteristic\n\nCurrently `characteristic()` does not return an `Integer` for some rings:\n\n\n```\nsage: type(ZZ.characteristic())\n<type 'int'>\n```\n\n\nThis is annoying because one cannot for example do:\n\n```\nsage: ZZ.characteristic().is_prime()\nAttributeError: 'int' object has no attribute 'is_prime'\n```\n\n\nI don't see a good reason not to make characteristic always an Integer. The minimal performance loss should not be an issue in any computation that I can imagine.\n\nIssue created by migration from https://trac.sagemath.org/ticket/12988\n\n",
    "created_at": "2012-05-21T16:47:11Z",
    "labels": [
        "component: algebra",
        "trivial"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.1",
    "title": "characteristic() should be an integer",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12816",
    "user": "https://github.com/saraedum"
}
```
Assignee: @aghitza

Keywords: ZZ, characteristic

Currently `characteristic()` does not return an `Integer` for some rings:


```
sage: type(ZZ.characteristic())
<type 'int'>
```


This is annoying because one cannot for example do:

```
sage: ZZ.characteristic().is_prime()
AttributeError: 'int' object has no attribute 'is_prime'
```


I don't see a good reason not to make characteristic always an Integer. The minimal performance loss should not be an issue in any computation that I can imagine.

Issue created by migration from https://trac.sagemath.org/ticket/12988





---

archive/issue_comments_153734.json:
```json
{
    "body": "I believe it is easiest to check that this is correct through the test framework of the categories.\n\nI added a test to Rings and also one to Fields() checking that it's a prime or zero.",
    "created_at": "2012-05-21T16:56:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12816#issuecomment-153734",
    "user": "https://github.com/saraedum"
}
```

I believe it is easiest to check that this is correct through the test framework of the categories.

I added a test to Rings and also one to Fields() checking that it's a prime or zero.



---

archive/issue_comments_153735.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-05-21T16:56:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12816#issuecomment-153735",
    "user": "https://github.com/saraedum"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_153736.json:
```json
{
    "body": "Changing keywords from \"ZZ, characteristic\" to \"ZZ characteristic sd40.5\".",
    "created_at": "2012-05-26T06:05:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12816#issuecomment-153736",
    "user": "https://github.com/jdemeyer"
}
```

Changing keywords from "ZZ, characteristic" to "ZZ characteristic sd40.5".



---

archive/issue_comments_153737.json:
```json
{
    "body": "It seems like the test suite is not being run:\n\n```\ndrake@sagenb:~/s/sage-5.1.beta0$ ./sage -t devel/sage/sage/categories/algebras_with_basis.py\nsage -t  \"devel/sage/sage/categories/algebras_with_basis.py\"\n**********************************************************************\nFile \"/home/drake/s/sage-5.1.beta0/devel/sage/sage/categories/algebras_with_basis.py\", line 60:\n    sage: TestSuite(A).run(verbose=True)\nExpected:\n    running ._test_additive_associativity() . . . pass\n    running ._test_an_element() . . . pass\n    running ._test_associativity() . . . pass\n    running ._test_category() . . . pass\n    running ._test_characteristic() . . . pass\n    running ._test_distributivity() . . . pass\n    running ._test_elements() . . .\n      Running the test suite of self.an_element()\n      running ._test_category() . . . pass\n      running ._test_eq() . . . pass\n      running ._test_not_implemented_methods() . . . pass\n      running ._test_pickling() . . . pass      pass\n    running ._test_elements_eq() . . . pass\n    running ._test_eq() . . . pass\n    running ._test_not_implemented_methods() . . . pass\n    running ._test_one() . . . pass\n    running ._test_pickling() . . . pass\n    running ._test_prod() . . . pass\n    running ._test_some_elements() . . . pass\n    running ._test_zero() . . . pass\nGot:\n    running ._test_additive_associativity() . . . pass\n    running ._test_an_element() . . . pass\n    running ._test_associativity() . . . pass\n    running ._test_category() . . . pass\n    running ._test_distributivity() . . . pass\n    running ._test_elements() . . .\n      Running the test suite of self.an_element()\n      running ._test_category() . . . pass\n      running ._test_eq() . . . pass\n      running ._test_not_implemented_methods() . . . pass\n      running ._test_pickling() . . . pass\n      pass\n    running ._test_elements_eq() . . . pass\n    running ._test_eq() . . . pass\n    running ._test_not_implemented_methods() . . . pass\n    running ._test_one() . . . pass\n    running ._test_pickling() . . . pass\n    running ._test_prod() . . . pass\n    running ._test_some_elements() . . . pass\n    running ._test_zero() . . . pass\n```\n\nIt's expecting to see the characteristic test, but that test is not run. I don't know the categories and test frameworks well enough to fix this. Do you see what's wrong?",
    "created_at": "2012-05-26T17:12:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12816#issuecomment-153737",
    "user": "https://github.com/dandrake"
}
```

It seems like the test suite is not being run:

```
drake@sagenb:~/s/sage-5.1.beta0$ ./sage -t devel/sage/sage/categories/algebras_with_basis.py
sage -t  "devel/sage/sage/categories/algebras_with_basis.py"
**********************************************************************
File "/home/drake/s/sage-5.1.beta0/devel/sage/sage/categories/algebras_with_basis.py", line 60:
    sage: TestSuite(A).run(verbose=True)
Expected:
    running ._test_additive_associativity() . . . pass
    running ._test_an_element() . . . pass
    running ._test_associativity() . . . pass
    running ._test_category() . . . pass
    running ._test_characteristic() . . . pass
    running ._test_distributivity() . . . pass
    running ._test_elements() . . .
      Running the test suite of self.an_element()
      running ._test_category() . . . pass
      running ._test_eq() . . . pass
      running ._test_not_implemented_methods() . . . pass
      running ._test_pickling() . . . pass      pass
    running ._test_elements_eq() . . . pass
    running ._test_eq() . . . pass
    running ._test_not_implemented_methods() . . . pass
    running ._test_one() . . . pass
    running ._test_pickling() . . . pass
    running ._test_prod() . . . pass
    running ._test_some_elements() . . . pass
    running ._test_zero() . . . pass
Got:
    running ._test_additive_associativity() . . . pass
    running ._test_an_element() . . . pass
    running ._test_associativity() . . . pass
    running ._test_category() . . . pass
    running ._test_distributivity() . . . pass
    running ._test_elements() . . .
      Running the test suite of self.an_element()
      running ._test_category() . . . pass
      running ._test_eq() . . . pass
      running ._test_not_implemented_methods() . . . pass
      running ._test_pickling() . . . pass
      pass
    running ._test_elements_eq() . . . pass
    running ._test_eq() . . . pass
    running ._test_not_implemented_methods() . . . pass
    running ._test_one() . . . pass
    running ._test_pickling() . . . pass
    running ._test_prod() . . . pass
    running ._test_some_elements() . . . pass
    running ._test_zero() . . . pass
```

It's expecting to see the characteristic test, but that test is not run. I don't know the categories and test frameworks well enough to fix this. Do you see what's wrong?



---

archive/issue_comments_153738.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-05-26T17:12:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12816#issuecomment-153738",
    "user": "https://github.com/dandrake"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_153739.json:
```json
{
    "body": "That's strange. I'll run the doctests again to see if this also happens here.\n\nActually `_test_characteristic` didn't catch wrong `characteristic()` implementations in some cases which is related to #13043. I'll upload an updated patch soon.",
    "created_at": "2012-05-28T02:21:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12816#issuecomment-153739",
    "user": "https://github.com/saraedum"
}
```

That's strange. I'll run the doctests again to see if this also happens here.

Actually `_test_characteristic` didn't catch wrong `characteristic()` implementations in some cases which is related to #13043. I'll upload an updated patch soon.



---

archive/issue_comments_153740.json:
```json
{
    "body": "Attachment [trac_12988.patch](tarball://root/attachments/some-uuid/ticket12988/trac_12988.patch) by @saraedum created at 2012-05-28 13:45:06\n\nmove characteristic() to the category of rings and check that it is in ZZ",
    "created_at": "2012-05-28T13:45:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12816#issuecomment-153740",
    "user": "https://github.com/saraedum"
}
```

Attachment [trac_12988.patch](tarball://root/attachments/some-uuid/ticket12988/trac_12988.patch) by @saraedum created at 2012-05-28 13:45:06

move characteristic() to the category of rings and check that it is in ZZ



---

archive/issue_comments_153741.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-05-28T15:00:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12816#issuecomment-153741",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_153742.json:
```json
{
    "body": "This now passes doctests, and every example that I've tried successfully returns Integer characteristic. But I would like someone who understands the category framework and the test framework a bit better to look at this. Consider your patch to have a weak positive review.",
    "created_at": "2012-05-28T18:04:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12816#issuecomment-153742",
    "user": "https://github.com/dandrake"
}
```

This now passes doctests, and every example that I've tried successfully returns Integer characteristic. But I would like someone who understands the category framework and the test framework a bit better to look at this. Consider your patch to have a weak positive review.



---

archive/issue_comments_153743.json:
```json
{
    "body": "This looks good to me.",
    "created_at": "2012-05-28T19:02:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12816#issuecomment-153743",
    "user": "https://github.com/roed314"
}
```

This looks good to me.



---

archive/issue_comments_153744.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-05-28T19:02:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12816#issuecomment-153744",
    "user": "https://github.com/roed314"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_153745.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-05-29T22:02:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12816#issuecomment-153745",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_153746.json:
```json
{
    "body": "3 doctest failures with sage-5.1.beta1:\n\n```\nsage -t  \"devel/sage-main/sage/rings/padics/padic_base_leaves.py\"\n**********************************************************************\nFile \"/usr/local/src/sage-5.1.beta1/devel/sage-main/sage/rings/padics/padic_base_leaves.py\", line 168:\n    sage: TestSuite(R).run()\nExpected nothing\nGot:\n    Failure in _test_characteristic:\n    Traceback (most recent call last):\n      File \"/usr/local/src/sage-5.1.beta1/local/lib/python/site-packages/sage/misc/sage_unittest.py\", line 275, in run\n        test_method(tester = tester)\n      File \"/usr/local/src/sage-5.1.beta1/local/lib/python/site-packages/sage/categories/rings.py\", line 258, in _test_characteristic\n        tester.assertEqual(type(characteristic),sage.rings.integer.Integer)\n      File \"/usr/local/src/sage-5.1.beta1/local/lib/python2.7/unittest/case.py\", line 509, in assertEqual\n        assertion_func(first, second, msg=msg)\n      File \"/usr/local/src/sage-5.1.beta1/local/lib/python2.7/unittest/case.py\", line 502, in _baseAssertEqual\n        raise self.failureException(msg)\n    AssertionError: <type 'int'> != <type 'sage.rings.integer.Integer'>\n    ------------------------------------------------------------\n    The following tests failed: _test_characteristic\n**********************************************************************\nFile \"/usr/local/src/sage-5.1.beta1/devel/sage-main/sage/rings/padics/padic_base_leaves.py\", line 175:\n    sage: TestSuite(R).run()\nExpected nothing\nGot:\n    Failure in _test_characteristic:\n    Traceback (most recent call last):\n      File \"/usr/local/src/sage-5.1.beta1/local/lib/python/site-packages/sage/misc/sage_unittest.py\", line 275, in run\n        test_method(tester = tester)\n      File \"/usr/local/src/sage-5.1.beta1/local/lib/python/site-packages/sage/categories/rings.py\", line 258, in _test_characteristic\n        tester.assertEqual(type(characteristic),sage.rings.integer.Integer)\n      File \"/usr/local/src/sage-5.1.beta1/local/lib/python2.7/unittest/case.py\", line 509, in assertEqual\n        assertion_func(first, second, msg=msg)\n      File \"/usr/local/src/sage-5.1.beta1/local/lib/python2.7/unittest/case.py\", line 502, in _baseAssertEqual\n        raise self.failureException(msg)\n    AssertionError: <type 'int'> != <type 'sage.rings.integer.Integer'>\n    ------------------------------------------------------------\n    The following tests failed: _test_characteristic\n**********************************************************************\nFile \"/usr/local/src/sage-5.1.beta1/devel/sage-main/sage/rings/padics/padic_base_leaves.py\", line 182:\n    sage: TestSuite(R).run()\nExpected nothing\nGot:\n    Failure in _test_characteristic:\n    Traceback (most recent call last):\n      File \"/usr/local/src/sage-5.1.beta1/local/lib/python/site-packages/sage/misc/sage_unittest.py\", line 275, in run\n        test_method(tester = tester)\n      File \"/usr/local/src/sage-5.1.beta1/local/lib/python/site-packages/sage/categories/rings.py\", line 258, in _test_characteristic\n        tester.assertEqual(type(characteristic),sage.rings.integer.Integer)\n      File \"/usr/local/src/sage-5.1.beta1/local/lib/python2.7/unittest/case.py\", line 509, in assertEqual\n        assertion_func(first, second, msg=msg)\n      File \"/usr/local/src/sage-5.1.beta1/local/lib/python2.7/unittest/case.py\", line 502, in _baseAssertEqual\n        raise self.failureException(msg)\n    AssertionError: <type 'int'> != <type 'sage.rings.integer.Integer'>\n    ------------------------------------------------------------\n    The following tests failed: _test_characteristic\n**********************************************************************\n```\n",
    "created_at": "2012-05-29T22:02:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12816#issuecomment-153746",
    "user": "https://github.com/jdemeyer"
}
```

3 doctest failures with sage-5.1.beta1:

```
sage -t  "devel/sage-main/sage/rings/padics/padic_base_leaves.py"
**********************************************************************
File "/usr/local/src/sage-5.1.beta1/devel/sage-main/sage/rings/padics/padic_base_leaves.py", line 168:
    sage: TestSuite(R).run()
Expected nothing
Got:
    Failure in _test_characteristic:
    Traceback (most recent call last):
      File "/usr/local/src/sage-5.1.beta1/local/lib/python/site-packages/sage/misc/sage_unittest.py", line 275, in run
        test_method(tester = tester)
      File "/usr/local/src/sage-5.1.beta1/local/lib/python/site-packages/sage/categories/rings.py", line 258, in _test_characteristic
        tester.assertEqual(type(characteristic),sage.rings.integer.Integer)
      File "/usr/local/src/sage-5.1.beta1/local/lib/python2.7/unittest/case.py", line 509, in assertEqual
        assertion_func(first, second, msg=msg)
      File "/usr/local/src/sage-5.1.beta1/local/lib/python2.7/unittest/case.py", line 502, in _baseAssertEqual
        raise self.failureException(msg)
    AssertionError: <type 'int'> != <type 'sage.rings.integer.Integer'>
    ------------------------------------------------------------
    The following tests failed: _test_characteristic
**********************************************************************
File "/usr/local/src/sage-5.1.beta1/devel/sage-main/sage/rings/padics/padic_base_leaves.py", line 175:
    sage: TestSuite(R).run()
Expected nothing
Got:
    Failure in _test_characteristic:
    Traceback (most recent call last):
      File "/usr/local/src/sage-5.1.beta1/local/lib/python/site-packages/sage/misc/sage_unittest.py", line 275, in run
        test_method(tester = tester)
      File "/usr/local/src/sage-5.1.beta1/local/lib/python/site-packages/sage/categories/rings.py", line 258, in _test_characteristic
        tester.assertEqual(type(characteristic),sage.rings.integer.Integer)
      File "/usr/local/src/sage-5.1.beta1/local/lib/python2.7/unittest/case.py", line 509, in assertEqual
        assertion_func(first, second, msg=msg)
      File "/usr/local/src/sage-5.1.beta1/local/lib/python2.7/unittest/case.py", line 502, in _baseAssertEqual
        raise self.failureException(msg)
    AssertionError: <type 'int'> != <type 'sage.rings.integer.Integer'>
    ------------------------------------------------------------
    The following tests failed: _test_characteristic
**********************************************************************
File "/usr/local/src/sage-5.1.beta1/devel/sage-main/sage/rings/padics/padic_base_leaves.py", line 182:
    sage: TestSuite(R).run()
Expected nothing
Got:
    Failure in _test_characteristic:
    Traceback (most recent call last):
      File "/usr/local/src/sage-5.1.beta1/local/lib/python/site-packages/sage/misc/sage_unittest.py", line 275, in run
        test_method(tester = tester)
      File "/usr/local/src/sage-5.1.beta1/local/lib/python/site-packages/sage/categories/rings.py", line 258, in _test_characteristic
        tester.assertEqual(type(characteristic),sage.rings.integer.Integer)
      File "/usr/local/src/sage-5.1.beta1/local/lib/python2.7/unittest/case.py", line 509, in assertEqual
        assertion_func(first, second, msg=msg)
      File "/usr/local/src/sage-5.1.beta1/local/lib/python2.7/unittest/case.py", line 502, in _baseAssertEqual
        raise self.failureException(msg)
    AssertionError: <type 'int'> != <type 'sage.rings.integer.Integer'>
    ------------------------------------------------------------
    The following tests failed: _test_characteristic
**********************************************************************
```




---

archive/issue_comments_153747.json:
```json
{
    "body": "Attachment [trac_12988_padic.patch](tarball://root/attachments/some-uuid/ticket12988/trac_12988_padic.patch) by @saraedum created at 2012-05-30 01:51:11\n\nfix characteristic for padics",
    "created_at": "2012-05-30T01:51:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12816#issuecomment-153747",
    "user": "https://github.com/saraedum"
}
```

Attachment [trac_12988_padic.patch](tarball://root/attachments/some-uuid/ticket12988/trac_12988_padic.patch) by @saraedum created at 2012-05-30 01:51:11

fix characteristic for padics



---

archive/issue_comments_153748.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-05-30T01:51:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12816#issuecomment-153748",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_153749.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-06-01T10:01:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12816#issuecomment-153749",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_153750.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-06-02T12:16:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12816#issuecomment-153750",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_012777.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-06-02T12:16:01Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12816",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12816#event-12777"
}
```
