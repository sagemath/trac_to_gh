# Issue 19179: Implement some generic category methods

Issue created by migration from Trac.

Original creator: tscrim

Original creation time: 2015-10-15 13:43:10

Assignee: tscrim

CC:  jhpalmieri

We implement a generic `is_commutative` test for finite-dimensional algebras with a basis and a `cardinality` for modules with a basis.


---

Comment by tscrim created at 2015-10-15 14:29:05

Changing status from new to needs_review.


---

Comment by tscrim created at 2015-10-15 14:29:05

New commits:


---

Comment by jhpalmieri created at 2015-10-20 05:28:19

I would prefer if the docstring for `is_commutative` said "Return _whether_ self is a commutative algebra" (or "Return whether this algebra is a commutative algebra").

Is it worth saving any time by removing `self.one()` from the basis before doing the iteration? With the following change:

```diff
diff --git a/src/sage/categories/finite_dimensional_algebras_with_basis.py b/src/sage/categories/finite_dimensional_algebras_with_basis.py
index da1a870..8934e6c 100644
--- a/src/sage/categories/finite_dimensional_algebras_with_basis.py
+++ b/src/sage/categories/finite_dimensional_algebras_with_basis.py
`@``@` -951,7 +951,7 `@``@` class FiniteDimensionalAlgebrasWithBasis(CategoryWithAxiom_over_base_ring):
         `@`cached_method
         def is_commutative(self):
             """
-            Return if ``self`` is a commutative algebra.
+            Return whether ``self`` is a commutative algebra.
 
             EXAMPLES::
 
`@``@` -963,6 +963,7 `@``@` class FiniteDimensionalAlgebrasWithBasis(CategoryWithAxiom_over_base_ring):
                 True
             """
             B = list(self.basis())
+            B.remove(self.one())
             return all(b*bp == bp*b for i,b in enumerate(B) for bp in B[i+1:])
 
     class ElementMethods:
```

it appears to be faster to check commutativity for `SymmetricGroupAlgebra(5, QQ)`. (I removed the ``@`cached_method` line before testing.) It's even a little faster for commutative algebras: the time spent removing the element from the list is made up by the time saved by not having as many iterations.


---

Comment by git created at 2015-10-20 12:03:11

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2015-10-20 12:07:35

Replying to [comment:2 jhpalmieri]:
> I would prefer if the docstring for `is_commutative` said "Return _whether_ self is a commutative algebra" (or "Return whether this algebra is a commutative algebra").

Done.

> Is it worth saving any time by removing `self.one()` from the basis before doing the iteration? With the following change:
> ...
> it appears to be faster to check commutativity for `SymmetricGroupAlgebra(5, QQ)`. (I removed the ``@`cached_method` line before testing.) It's even a little faster for commutative algebras: the time spent removing the element from the list is made up by the time saved by not having as many iterations.

The only possible issue I see is that not all algebras in Sage have `one` as a basis element, so for those algebras, by adding this extra `remove` check, it might be longer. However, since the vast majority of algebras in Sage do have `one` as a basis element, and probably it appears early on, this should be faster and I think it is worthwhile to have it.


---

Comment by jhpalmieri created at 2015-10-20 16:34:56

Changing status from needs_review to positive_review.


---

Comment by jhpalmieri created at 2015-10-20 16:34:56

Looks good, thanks.


---

Comment by vbraun created at 2015-10-21 08:26:57

Resolution: fixed
