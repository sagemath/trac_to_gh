# Issue 20682: Apparent bug in incomplete orthogonal arrays

archive/issues_020682.json:
```json
{
    "body": "CC:  @videlec\n\nKeywords: days78\n\nThe docstring for `designs.incomplete_orthogocal_array` claims that if `existence=True`, the function will return a boolean or `Unknown`. However, for certain values, it returns the array.\n\nFor example,\n\n\n```\nsage: type(designs.incomplete_orthogonal_array(9,82,[9],existence=True))\n<type 'list'>\n```\n\n\nI encountered this while working on something else, and I have no idea of the math behind this, but it seems to be incorrect. The problem seems to be in the block starting at line 1371 in `orthogonal_arrays.py` (\"From a quasi-difference matrix\"); all other branches in the function take into account whether `existence` is set, but this one does not.\n\nIssue created by migration from https://trac.sagemath.org/ticket/20919\n\n",
    "created_at": "2016-07-01T23:16:40Z",
    "labels": [
        "combinatorial designs",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.3",
    "title": "Apparent bug in incomplete orthogonal arrays",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20682",
    "user": "@eviatarbach"
}
```
CC:  @videlec

Keywords: days78

The docstring for `designs.incomplete_orthogocal_array` claims that if `existence=True`, the function will return a boolean or `Unknown`. However, for certain values, it returns the array.

For example,


```
sage: type(designs.incomplete_orthogonal_array(9,82,[9],existence=True))
<type 'list'>
```


I encountered this while working on something else, and I have no idea of the math behind this, but it seems to be incorrect. The problem seems to be in the block starting at line 1371 in `orthogonal_arrays.py` ("From a quasi-difference matrix"); all other branches in the function take into account whether `existence` is set, but this one does not.

Issue created by migration from https://trac.sagemath.org/ticket/20919





---

archive/issue_comments_285742.json:
```json
{
    "body": "Similar problem with `designs.difference_family(3, 2, 1, existence=True)`",
    "created_at": "2016-07-01T23:57:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20682",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20682#issuecomment-285742",
    "user": "@eviatarbach"
}
```

Similar problem with `designs.difference_family(3, 2, 1, existence=True)`
