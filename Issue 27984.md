# Issue 27984: minor improvement in bidirectional_dijkstra

archive/issues_027984.json:
```json
{
    "body": "CC:  @dcoudert\n\nWhile reading some cython codes I came across this code and found a variable can be converted to cython. Its very minor but I thought it must be fixed.\n\nIssue created by migration from https://trac.sagemath.org/ticket/28221\n\n",
    "created_at": "2019-07-21T02:23:14Z",
    "labels": [
        "component: graph theory",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.9",
    "title": "minor improvement in bidirectional_dijkstra",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27984",
    "user": "https://github.com/rajat1433"
}
```
CC:  @dcoudert

While reading some cython codes I came across this code and found a variable can be converted to cython. Its very minor but I thought it must be fixed.

Issue created by migration from https://trac.sagemath.org/ticket/28221





---

archive/issue_comments_394919.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-21T02:25:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27984#issuecomment-394919",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_394920.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-07-21T02:25:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27984#issuecomment-394920",
    "user": "https://github.com/rajat1433"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_394921.json:
```json
{
    "body": "I think it can be improved further as the distance can be float so \n\n\n\n```\n\ncdef int distance\n\ncdef priority_queue[pair[pair[int, int], pair[int, int]]] pq\n\n```\n\n\ncan be changed to \n\n\n```\n\ncdef double distance\n\ncdef priority_queue[pair[pair[double, int], pair[int, int]]] pq\n```\n\n\nwaiting for your thoughts on it....",
    "created_at": "2019-07-21T02:41:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27984#issuecomment-394921",
    "user": "https://github.com/rajat1433"
}
```

I think it can be improved further as the distance can be float so 



```

cdef int distance

cdef priority_queue[pair[pair[int, int], pair[int, int]]] pq

```


can be changed to 


```

cdef double distance

cdef priority_queue[pair[pair[double, int], pair[int, int]]] pq
```


waiting for your thoughts on it....



---

archive/issue_comments_394922.json:
```json
{
    "body": "Try to do the change and check if it passes all doctests.",
    "created_at": "2019-07-21T05:02:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27984#issuecomment-394922",
    "user": "https://github.com/dcoudert"
}
```

Try to do the change and check if it passes all doctests.



---

archive/issue_comments_394923.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-21T05:48:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27984#issuecomment-394923",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_394924.json:
```json
{
    "body": "You should sometimes run `./sage -btp --long src/sage/graphs/`\n\n\n```\nsage -t src/sage/graphs/generic_graph.py\n**********************************************************************\nFile \"src/sage/graphs/generic_graph.py\", line 14446, in sage.graphs.generic_graph.GenericGraph.distance\nFailed example:\n    G.distance(0, 3, by_weight=True)\nExpected:\n    3\nGot:\n    3.0\n**********************************************************************\nFile \"src/sage/graphs/generic_graph.py\", line 16362, in sage.graphs.generic_graph.GenericGraph.?\nFailed example:\n    D.shortest_path_length(4, 9, algorithm='Dijkstra_Bid')\nExpected:\n    5\nGot:\n    5.0\n**********************************************************************\nFile \"src/sage/graphs/generic_graph.py\", line 16375, in sage.graphs.generic_graph.GenericGraph.?\nFailed example:\n    G.shortest_path_length(0, 3, by_weight=True)\nExpected:\n    3\nGot:\n    3.0\n**********************************************************************\nFile \"src/sage/graphs/generic_graph.py\", line 16397, in sage.graphs.generic_graph.GenericGraph.?\nFailed example:\n    G.shortest_path_length(0, 2, by_weight=True)\nExpected:\n    2\nGot:\n    2.0\n**********************************************************************\n2 items had failures:\n   3 of 858 in sage.graphs.generic_graph.GenericGraph.?\n   1 of  10 in sage.graphs.generic_graph.GenericGraph.distance\n    [3470 tests, 4 failures, 50.62 s]\n```\n\n\nCan you check for instance in the boost backend for a method to turn the result to int when possible ? It would be a smarter solution than just changing the doctests.",
    "created_at": "2019-07-22T00:52:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27984#issuecomment-394924",
    "user": "https://github.com/dcoudert"
}
```

You should sometimes run `./sage -btp --long src/sage/graphs/`


```
sage -t src/sage/graphs/generic_graph.py
**********************************************************************
File "src/sage/graphs/generic_graph.py", line 14446, in sage.graphs.generic_graph.GenericGraph.distance
Failed example:
    G.distance(0, 3, by_weight=True)
Expected:
    3
Got:
    3.0
**********************************************************************
File "src/sage/graphs/generic_graph.py", line 16362, in sage.graphs.generic_graph.GenericGraph.?
Failed example:
    D.shortest_path_length(4, 9, algorithm='Dijkstra_Bid')
Expected:
    5
Got:
    5.0
**********************************************************************
File "src/sage/graphs/generic_graph.py", line 16375, in sage.graphs.generic_graph.GenericGraph.?
Failed example:
    G.shortest_path_length(0, 3, by_weight=True)
Expected:
    3
Got:
    3.0
**********************************************************************
File "src/sage/graphs/generic_graph.py", line 16397, in sage.graphs.generic_graph.GenericGraph.?
Failed example:
    G.shortest_path_length(0, 2, by_weight=True)
Expected:
    2
Got:
    2.0
**********************************************************************
2 items had failures:
   3 of 858 in sage.graphs.generic_graph.GenericGraph.?
   1 of  10 in sage.graphs.generic_graph.GenericGraph.distance
    [3470 tests, 4 failures, 50.62 s]
```


Can you check for instance in the boost backend for a method to turn the result to int when possible ? It would be a smarter solution than just changing the doctests.



---

archive/issue_comments_394925.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-07-22T00:52:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27984#issuecomment-394925",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_394926.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-22T05:32:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27984#issuecomment-394926",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_394927.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-07-22T05:32:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27984#issuecomment-394927",
    "user": "https://github.com/rajat1433"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_394928.json:
```json
{
    "body": "this might be better\n\n```\nsage: from sage.rings.integer_ring import ZZ\nsage: 3.0 in ZZ\nTrue\nsage: 3.1 in ZZ\nFalse\n```\n\nI don't know if we have a faster (cython level) method.",
    "created_at": "2019-07-22T15:32:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27984#issuecomment-394928",
    "user": "https://github.com/dcoudert"
}
```

this might be better

```
sage: from sage.rings.integer_ring import ZZ
sage: 3.0 in ZZ
True
sage: 3.1 in ZZ
False
```

I don't know if we have a faster (cython level) method.



---

archive/issue_comments_394929.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-23T00:42:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27984#issuecomment-394929",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_394930.json:
```json
{
    "body": "LGTM",
    "created_at": "2019-07-23T04:34:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27984#issuecomment-394930",
    "user": "https://github.com/dcoudert"
}
```

LGTM



---

archive/issue_comments_394931.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-07-23T04:34:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27984#issuecomment-394931",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_394932.json:
```json
{
    "body": "Merge conflict",
    "created_at": "2019-07-28T22:54:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27984#issuecomment-394932",
    "user": "https://github.com/vbraun"
}
```

Merge conflict



---

archive/issue_comments_394933.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2019-07-28T22:54:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27984#issuecomment-394933",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_394934.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-29T01:25:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27984#issuecomment-394934",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_394935.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-07-29T01:29:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27984#issuecomment-394935",
    "user": "https://github.com/rajat1433"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_394936.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-07-29T07:16:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27984#issuecomment-394936",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_394937.json:
```json
{
    "body": "LGTM.",
    "created_at": "2019-07-29T07:16:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27984#issuecomment-394937",
    "user": "https://github.com/dcoudert"
}
```

LGTM.



---

archive/issue_comments_394938.json:
```json
{
    "body": "Author name is missing",
    "created_at": "2019-07-30T22:18:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27984#issuecomment-394938",
    "user": "https://github.com/vbraun"
}
```

Author name is missing



---

archive/issue_comments_394939.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2019-07-30T22:18:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27984#issuecomment-394939",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_394940.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-07-31T01:39:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27984#issuecomment-394940",
    "user": "https://github.com/rajat1433"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_394941.json:
```json
{
    "body": "OK",
    "created_at": "2019-07-31T06:42:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27984#issuecomment-394941",
    "user": "https://github.com/dcoudert"
}
```

OK



---

archive/issue_comments_394942.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-07-31T06:42:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27984#issuecomment-394942",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_394943.json:
```json
{
    "body": "Changing keywords from \"\" to \"gsoc19\".",
    "created_at": "2019-07-31T06:44:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27984#issuecomment-394943",
    "user": "https://github.com/dcoudert"
}
```

Changing keywords from "" to "gsoc19".



---

archive/issue_comments_394944.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-08-03T23:51:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27984#issuecomment-394944",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_070141.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-08-03T23:51:40Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27984",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27984#event-70141"
}
```
