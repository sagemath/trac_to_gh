# Issue 14192: ISGCI update, small graphs and recognition

archive/issues_014192.json:
```json
{
    "body": "Assignee: jason, ncohen, rlm\n\nCC:  @nthiery @dimpase @dcoudert konrad127123 elixyre\n\nHelloooooooooooooooo !\n\nThis patch is nice ! It adds in Sage the list of smallgraphs used in ISGCI [1], which can now be obtained like that :\n\n\n```\nsage: d = graph_classes.smallgraphs()\nsage: d['P_5']                                                                                                                                                           \nGraph on 5 vertices\nsage: d['P_5'].is_isomorphic(graphs.PathGraph(5))\nTrue\n```\n\n\nNow that we have this information, we can do another veeeeeeery nice thing : write a generic recognition algorithm for graph classes defined by a list of forbidden subgraphs.\n\n\n```\n    sage: g = graphs.PetersenGraph()                                                                                                                                      \n    sage: g in graph_classes.ClawFree                                                                                                                                     \n    False                                                                                                                                                                 \n    sage: g.line_graph() in graph_classes.ClawFree                                                                                                                        \n    True                                                                                                                                                                                                                                                                                                                       \n    sage: gc = graph_classes.get_class(\"gc_441\")                                                                                                                          \n    sage: gc                                                                                                                                                              \n    diamond--free graphs                                                                                                                                                  \n    sage: graphs.PetersenGraph() in gc                                                                                                                                    \n    True   \n```\n\n\nOf course there is no specific code written for these classes. The list of subgraphs is obtained from the ISGCI database, and each of them is tested.... Nice generic stuff. Of course many graph classes are not defined in such a way, so everything is not done on that front `;-)`\n\nAnd of course, it's an occasion to update the version of ISGCI we ship in Sage.\n\nNathann\n\n[1] http://www.graphclasses.org/\n\nIssue created by migration from https://trac.sagemath.org/ticket/14396\n\n",
    "created_at": "2013-04-02T09:08:28Z",
    "labels": [
        "component: graph theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "ISGCI update, small graphs and recognition",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14192",
    "user": "https://github.com/nathanncohen"
}
```
Assignee: jason, ncohen, rlm

CC:  @nthiery @dimpase @dcoudert konrad127123 elixyre

Helloooooooooooooooo !

This patch is nice ! It adds in Sage the list of smallgraphs used in ISGCI [1], which can now be obtained like that :


```
sage: d = graph_classes.smallgraphs()
sage: d['P_5']                                                                                                                                                           
Graph on 5 vertices
sage: d['P_5'].is_isomorphic(graphs.PathGraph(5))
True
```


Now that we have this information, we can do another veeeeeeery nice thing : write a generic recognition algorithm for graph classes defined by a list of forbidden subgraphs.


```
    sage: g = graphs.PetersenGraph()                                                                                                                                      
    sage: g in graph_classes.ClawFree                                                                                                                                     
    False                                                                                                                                                                 
    sage: g.line_graph() in graph_classes.ClawFree                                                                                                                        
    True                                                                                                                                                                                                                                                                                                                       
    sage: gc = graph_classes.get_class("gc_441")                                                                                                                          
    sage: gc                                                                                                                                                              
    diamond--free graphs                                                                                                                                                  
    sage: graphs.PetersenGraph() in gc                                                                                                                                    
    True   
```


Of course there is no specific code written for these classes. The list of subgraphs is obtained from the ISGCI database, and each of them is tested.... Nice generic stuff. Of course many graph classes are not defined in such a way, so everything is not done on that front `;-)`

And of course, it's an occasion to update the version of ISGCI we ship in Sage.

Nathann

[1] http://www.graphclasses.org/

Issue created by migration from https://trac.sagemath.org/ticket/14396





---

archive/issue_comments_178092.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-04-02T09:27:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14192#issuecomment-178092",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_178093.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2013-12-31T15:54:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14192#issuecomment-178093",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_178094.json:
```json
{
    "body": "Attachment [graphs-20130920.tar.bz2](tarball://root/attachments/some-uuid/ticket14396/graphs-20130920.tar.bz2) by @nathanncohen created at 2013-12-31 15:55:02",
    "created_at": "2013-12-31T15:55:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14192#issuecomment-178094",
    "user": "https://github.com/nathanncohen"
}
```

Attachment [graphs-20130920.tar.bz2](tarball://root/attachments/some-uuid/ticket14396/graphs-20130920.tar.bz2) by @nathanncohen created at 2013-12-31 15:55:02



---

archive/issue_comments_178095.json:
```json
{
    "body": "Hello,\n\nI tried this patch and indeed it is cool :)\n\nIf I understand well, each time we implement a new membership test to a graph class, we should try to include it in isgci module, right? \nAlso, is there a simple way for the user to know which recognition tests are available?\n\nA small error:\n\n```\n**********************************************************************\nFile \"src/sage/graphs/isgci.py\", line 758, in sage.graphs.isgci.GraphClasses.smallgraphs\nFailed example:\n    t[0]\nExpected:\n    {'super': 'gc_2', 'sub': 'gc_1'}\nGot:\n    {'sub': 'gc_1', 'super': 'gc_2'}\n**********************************************************************\n```\n",
    "created_at": "2015-01-19T15:27:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14192#issuecomment-178095",
    "user": "https://github.com/dcoudert"
}
```

Hello,

I tried this patch and indeed it is cool :)

If I understand well, each time we implement a new membership test to a graph class, we should try to include it in isgci module, right? 
Also, is there a simple way for the user to know which recognition tests are available?

A small error:

```
**********************************************************************
File "src/sage/graphs/isgci.py", line 758, in sage.graphs.isgci.GraphClasses.smallgraphs
Failed example:
    t[0]
Expected:
    {'super': 'gc_2', 'sub': 'gc_1'}
Got:
    {'sub': 'gc_1', 'super': 'gc_2'}
**********************************************************************
```




---

archive/issue_comments_178096.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-01-19T15:27:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14192#issuecomment-178096",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_178097.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-01-20T15:00:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14192#issuecomment-178097",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_178098.json:
```json
{
    "body": "Yo !\n\n> I tried this patch and indeed it is cool :)\n\nI had almost forgotten about it. Two years old `:-P`\n\n> If I understand well, each time we implement a new membership test to a graph class, we should try to include it in isgci module, right? \n\nYes, if we want the syntax `g in graph_classes.X` to use it.\n\n> Also, is there a simple way for the user to know which recognition tests are available?\n\nDo you mean \"to get the list of all classes defined by forbidden subgraphs\"? If so, I don't think so. For specific recognition problems, however, they often correspond to our \"Graph.is_*\" functions.\n\n> A small error:\nFixed.\n\nNathann",
    "created_at": "2015-01-20T15:02:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14192#issuecomment-178098",
    "user": "https://github.com/nathanncohen"
}
```

Yo !

> I tried this patch and indeed it is cool :)

I had almost forgotten about it. Two years old `:-P`

> If I understand well, each time we implement a new membership test to a graph class, we should try to include it in isgci module, right? 

Yes, if we want the syntax `g in graph_classes.X` to use it.

> Also, is there a simple way for the user to know which recognition tests are available?

Do you mean "to get the list of all classes defined by forbidden subgraphs"? If so, I don't think so. For specific recognition problems, however, they often correspond to our "Graph.is_*" functions.

> A small error:
Fixed.

Nathann



---

archive/issue_comments_178099.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-01-20T15:02:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14192#issuecomment-178099",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_178100.json:
```json
{
    "body": "In the description of method `graph_classes.smallgraphs` is weird:\n\n\n```\nsage: graph_classes.smallgraphs?\nType:            CachedMethodCallerNoArgs\nString form:     Cached version of <function smallgraphs at 0x1132b62a8>\nFile:            /Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/misc/cachefunc.so\nDefinition:      graph_classes.smallgraphs(self)\nDocstring:\n   Returns a dictionary associating a graph to a graph description\n   string.\n\n   Upon the first call, this loads the database from the local XML\n   files. Subsequent calls are cached.\n\n   EXAMPLES:\n\n      sage: t = graph_classes.inclusions()\n      sage: type(t)\n      <type 'list'>\n      sage: t[0]\n      {'sub': 'gc_1', 'super': 'gc_2'}\n\nClass docstring:\n   Utility class that is used by \"CachedMethod\" to bind a cached\n   method to an instance, in the case of a method that does not accept\n   any arguments except \"self\".\n\n   Note: The return value \"None\" would not be cached. So, if you\n     have a method that does not accept arguments and may return\n     \"None\" after a lengthy computation, then \"@cached_method\" should\n     not be used.\n\n   EXAMPLE:\n\n      sage: P.<a,b,c,d> = QQ[]\n      sage: I = P*[a,b]\n      sage: I.gens\n      Cached version of <function gens at 0x...>\n      sage: type(I.gens)\n      <type 'sage.misc.cachefunc.CachedMethodCallerNoArgs'>\n      sage: I.gens is I.gens\n      True\n      sage: I.gens() is I.gens()\n      True\n\n   AUTHOR:\n\n   * Simon King (2011-04)\nInit docstring:\n   EXAMPLES:\n\n      sage: class Foo:\n      ....:     def __init__(self, x):\n      ....:         self._x = x\n      ....:     @cached_method\n      ....:     def f(self):\n      ....:         return self._x^2\n      sage: a = Foo(2)\n      sage: print a.f.get_cache()\n      None\n      sage: a.f()\n      4\n      sage: a.f.get_cache()\n      4\nCall docstring:\n   Call the cached method.\n\n   EXAMPLE:\n\n      sage: P.<a,b,c,d> = QQ[]\n      sage: I = P*[a,b]\n      sage: I.gens()    # indirect doctest\n      [a, b]\n      sage: I.gens() is I.gens()\n      True\n```\n\n\nFurthermore, the example exposes `graph_classes.inclusions()` but not `graph_classes.smallgraphs()`.\n\nThe rest seems ok.\n\nDavid.",
    "created_at": "2015-01-20T15:35:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14192#issuecomment-178100",
    "user": "https://github.com/dcoudert"
}
```

In the description of method `graph_classes.smallgraphs` is weird:


```
sage: graph_classes.smallgraphs?
Type:            CachedMethodCallerNoArgs
String form:     Cached version of <function smallgraphs at 0x1132b62a8>
File:            /Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/misc/cachefunc.so
Definition:      graph_classes.smallgraphs(self)
Docstring:
   Returns a dictionary associating a graph to a graph description
   string.

   Upon the first call, this loads the database from the local XML
   files. Subsequent calls are cached.

   EXAMPLES:

      sage: t = graph_classes.inclusions()
      sage: type(t)
      <type 'list'>
      sage: t[0]
      {'sub': 'gc_1', 'super': 'gc_2'}

Class docstring:
   Utility class that is used by "CachedMethod" to bind a cached
   method to an instance, in the case of a method that does not accept
   any arguments except "self".

   Note: The return value "None" would not be cached. So, if you
     have a method that does not accept arguments and may return
     "None" after a lengthy computation, then "@cached_method" should
     not be used.

   EXAMPLE:

      sage: P.<a,b,c,d> = QQ[]
      sage: I = P*[a,b]
      sage: I.gens
      Cached version of <function gens at 0x...>
      sage: type(I.gens)
      <type 'sage.misc.cachefunc.CachedMethodCallerNoArgs'>
      sage: I.gens is I.gens
      True
      sage: I.gens() is I.gens()
      True

   AUTHOR:

   * Simon King (2011-04)
Init docstring:
   EXAMPLES:

      sage: class Foo:
      ....:     def __init__(self, x):
      ....:         self._x = x
      ....:     @cached_method
      ....:     def f(self):
      ....:         return self._x^2
      sage: a = Foo(2)
      sage: print a.f.get_cache()
      None
      sage: a.f()
      4
      sage: a.f.get_cache()
      4
Call docstring:
   Call the cached method.

   EXAMPLE:

      sage: P.<a,b,c,d> = QQ[]
      sage: I = P*[a,b]
      sage: I.gens()    # indirect doctest
      [a, b]
      sage: I.gens() is I.gens()
      True
```


Furthermore, the example exposes `graph_classes.inclusions()` but not `graph_classes.smallgraphs()`.

The rest seems ok.

David.



---

archive/issue_comments_178101.json:
```json
{
    "body": "Yo !\n\n> In the description of method `graph_classes.smallgraphs` is weird:\n\nThat's because the method is a `cached_method`, and the documentation of `cached_method` is automatically appended to the function's doc. I don't think that it help either `:-/`\n\n> Furthermore, the example exposes `graph_classes.inclusions()` but not `graph_classes.smallgraphs()`.\nFixed.\n\nNathann",
    "created_at": "2015-01-20T15:53:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14192#issuecomment-178101",
    "user": "https://github.com/nathanncohen"
}
```

Yo !

> In the description of method `graph_classes.smallgraphs` is weird:

That's because the method is a `cached_method`, and the documentation of `cached_method` is automatically appended to the function's doc. I don't think that it help either `:-/`

> Furthermore, the example exposes `graph_classes.inclusions()` but not `graph_classes.smallgraphs()`.
Fixed.

Nathann



---

archive/issue_comments_178102.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-01-20T15:54:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14192#issuecomment-178102",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_178103.json:
```json
{
    "body": "Perfect. For me the patch is good to go (installation, tests, doc build, etc.). Cool!\n\nDavid.",
    "created_at": "2015-01-20T16:47:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14192#issuecomment-178103",
    "user": "https://github.com/dcoudert"
}
```

Perfect. For me the patch is good to go (installation, tests, doc build, etc.). Cool!

David.



---

archive/issue_comments_178104.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-01-20T16:47:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14192#issuecomment-178104",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_178105.json:
```json
{
    "body": "Wow.\n\nWow.\n\nReviewed.\n\nWow.",
    "created_at": "2015-01-20T17:10:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14192#issuecomment-178105",
    "user": "https://github.com/nathanncohen"
}
```

Wow.

Wow.

Reviewed.

Wow.



---

archive/issue_comments_178106.json:
```json
{
    "body": "(Thanks)",
    "created_at": "2015-01-20T17:10:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14192#issuecomment-178106",
    "user": "https://github.com/nathanncohen"
}
```

(Thanks)



---

archive/issue_comments_178107.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-01-23T15:19:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14192#issuecomment-178107",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_178108.json:
```json
{
    "body": "Missing link to the new graphs database",
    "created_at": "2015-01-23T15:19:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14192#issuecomment-178108",
    "user": "https://github.com/vbraun"
}
```

Missing link to the new graphs database



---

archive/issue_comments_178109.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2015-01-23T15:33:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14192#issuecomment-178109",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_178110.json:
```json
{
    "body": "It is attached to this ticket. I know we should avoid that, sorry. I did not know that two years ago apparently `^^;`\n\nNathann",
    "created_at": "2015-01-23T15:33:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14192#issuecomment-178110",
    "user": "https://github.com/nathanncohen"
}
```

It is attached to this ticket. I know we should avoid that, sorry. I did not know that two years ago apparently `^^;`

Nathann



---

archive/issue_events_013992.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-01-24T13:19:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14192",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14192#event-13992"
}
```



---

archive/issue_comments_178111.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-01-24T13:19:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14192#issuecomment-178111",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
