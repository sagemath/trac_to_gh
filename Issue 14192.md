# Issue 14192: ISGCI update, small graphs and recognition

Issue created by migration from https://trac.sagemath.org/ticket/14396

Original creator: ncohen

Original creation time: 2013-04-02 09:08:28

Assignee: jason, ncohen, rlm

CC:  nthiery dimpase dcoudert konrad127123 elixyre

Helloooooooooooooooo !

This patch is nice ! It adds in Sage the list of smallgraphs used in ISGCI [1], which can now be obtained like that :


```
sage: d = graph_classes.smallgraphs()
sage: d['P_5']                                                                                                                                                           
Graph on 5 vertices
sage: d['P_5'].is_isomorphic(graphs.PathGraph(5))
True
```


Now that we have this information, we can do another veeeeeeery nice thing : write a generic recognition algorithm for graph classes defined by a list of forbidden subgraphs.


```
    sage: g = graphs.PetersenGraph()                                                                                                                                      
    sage: g in graph_classes.ClawFree                                                                                                                                     
    False                                                                                                                                                                 
    sage: g.line_graph() in graph_classes.ClawFree                                                                                                                        
    True                                                                                                                                                                                                                                                                                                                       
    sage: gc = graph_classes.get_class("gc_441")                                                                                                                          
    sage: gc                                                                                                                                                              
    diamond--free graphs                                                                                                                                                  
    sage: graphs.PetersenGraph() in gc                                                                                                                                    
    True   
```


Of course there is no specific code written for these classes. The list of subgraphs is obtained from the ISGCI database, and each of them is tested.... Nice generic stuff. Of course many graph classes are not defined in such a way, so everything is not done on that front `;-)`

And of course, it's an occasion to update the version of ISGCI we ship in Sage.

Nathann

[1] http://www.graphclasses.org/


---

Comment by ncohen created at 2013-04-02 09:27:54

Changing status from new to needs_review.


---

Comment by git created at 2013-12-31 15:54:05

Branch pushed to git repo; I updated commit sha1. New commits:


---

Attachment


---

Comment by dcoudert created at 2015-01-19 15:27:17

Hello,

I tried this patch and indeed it is cool :)

If I understand well, each time we implement a new membership test to a graph class, we should try to include it in isgci module, right? 
Also, is there a simple way for the user to know which recognition tests are available?

A small error:

```
**********************************************************************
File "src/sage/graphs/isgci.py", line 758, in sage.graphs.isgci.GraphClasses.smallgraphs
Failed example:
    t[0]
Expected:
    {'super': 'gc_2', 'sub': 'gc_1'}
Got:
    {'sub': 'gc_1', 'super': 'gc_2'}
**********************************************************************
```



---

Comment by dcoudert created at 2015-01-19 15:27:17

Changing status from needs_review to needs_work.


---

Comment by git created at 2015-01-20 15:00:17

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by ncohen created at 2015-01-20 15:02:35

Yo !

> I tried this patch and indeed it is cool :)

I had almost forgotten about it. Two years old `:-P`

> If I understand well, each time we implement a new membership test to a graph class, we should try to include it in isgci module, right? 

Yes, if we want the syntax `g in graph_classes.X` to use it.

> Also, is there a simple way for the user to know which recognition tests are available?

Do you mean "to get the list of all classes defined by forbidden subgraphs"? If so, I don't think so. For specific recognition problems, however, they often correspond to our "Graph.is_*" functions.

> A small error:
Fixed.

Nathann


---

Comment by ncohen created at 2015-01-20 15:02:35

Changing status from needs_work to needs_review.


---

Comment by dcoudert created at 2015-01-20 15:35:00

In the description of method `graph_classes.smallgraphs` is weird:


```
sage: graph_classes.smallgraphs?
Type:            CachedMethodCallerNoArgs
String form:     Cached version of <function smallgraphs at 0x1132b62a8>
File:            /Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/misc/cachefunc.so
Definition:      graph_classes.smallgraphs(self)
Docstring:
   Returns a dictionary associating a graph to a graph description
   string.

   Upon the first call, this loads the database from the local XML
   files. Subsequent calls are cached.

   EXAMPLES:

      sage: t = graph_classes.inclusions()
      sage: type(t)
      <type 'list'>
      sage: t[0]
      {'sub': 'gc_1', 'super': 'gc_2'}

Class docstring:
   Utility class that is used by "CachedMethod" to bind a cached
   method to an instance, in the case of a method that does not accept
   any arguments except "self".

   Note: The return value "None" would not be cached. So, if you
     have a method that does not accept arguments and may return
     "None" after a lengthy computation, then "@cached_method" should
     not be used.

   EXAMPLE:

      sage: P.<a,b,c,d> = QQ[]
      sage: I = P*[a,b]
      sage: I.gens
      Cached version of <function gens at 0x...>
      sage: type(I.gens)
      <type 'sage.misc.cachefunc.CachedMethodCallerNoArgs'>
      sage: I.gens is I.gens
      True
      sage: I.gens() is I.gens()
      True

   AUTHOR:

   * Simon King (2011-04)
Init docstring:
   EXAMPLES:

      sage: class Foo:
      ....:     def __init__(self, x):
      ....:         self._x = x
      ....:     @cached_method
      ....:     def f(self):
      ....:         return self._x^2
      sage: a = Foo(2)
      sage: print a.f.get_cache()
      None
      sage: a.f()
      4
      sage: a.f.get_cache()
      4
Call docstring:
   Call the cached method.

   EXAMPLE:

      sage: P.<a,b,c,d> = QQ[]
      sage: I = P*[a,b]
      sage: I.gens()    # indirect doctest
      [a, b]
      sage: I.gens() is I.gens()
      True
```


Furthermore, the example exposes `graph_classes.inclusions()` but not `graph_classes.smallgraphs()`.

The rest seems ok.

David.


---

Comment by ncohen created at 2015-01-20 15:53:45

Yo !

> In the description of method `graph_classes.smallgraphs` is weird:

That's because the method is a `cached_method`, and the documentation of `cached_method` is automatically appended to the function's doc. I don't think that it help either `:-/`

> Furthermore, the example exposes `graph_classes.inclusions()` but not `graph_classes.smallgraphs()`.
Fixed.

Nathann


---

Comment by git created at 2015-01-20 15:54:06

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dcoudert created at 2015-01-20 16:47:22

Perfect. For me the patch is good to go (installation, tests, doc build, etc.). Cool!

David.


---

Comment by dcoudert created at 2015-01-20 16:47:22

Changing status from needs_review to positive_review.


---

Comment by ncohen created at 2015-01-20 17:10:04

Wow.

Wow.

Reviewed.

Wow.


---

Comment by ncohen created at 2015-01-20 17:10:10

(Thanks)


---

Comment by vbraun created at 2015-01-23 15:19:15

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2015-01-23 15:19:15

Missing link to the new graphs database


---

Comment by ncohen created at 2015-01-23 15:33:30

Changing status from needs_work to positive_review.


---

Comment by ncohen created at 2015-01-23 15:33:30

It is attached to this ticket. I know we should avoid that, sorry. I did not know that two years ago apparently `^^;`

Nathann


---

Comment by vbraun created at 2015-01-24 13:19:17

Resolution: fixed
