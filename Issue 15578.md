# Issue 15578: rational preimages for projective morphisms returns incorrect points

archive/issues_015578.json:
```json
{
    "body": "The function rational_preimages for projective morphism polynomials, returns points that are not\npre-images of the input points. The issue is that the solutions found may only be solutions to\nsome of the equations in the ideal.\n\nI will add a check to insure only correct points are returned.\n\nIssue created by migration from https://trac.sagemath.org/ticket/15815\n\n",
    "created_at": "2014-02-13T13:40:48Z",
    "labels": [
        "component: algebraic geometry",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.2",
    "title": "rational preimages for projective morphisms returns incorrect points",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15578",
    "user": "https://github.com/bhutz"
}
```
The function rational_preimages for projective morphism polynomials, returns points that are not
pre-images of the input points. The issue is that the solutions found may only be solutions to
some of the equations in the ideal.

I will add a check to insure only correct points are returned.

Issue created by migration from https://trac.sagemath.org/ticket/15815





---

archive/issue_comments_201110.json:
```json
{
    "body": "Set assignee to @bhutz.",
    "created_at": "2014-02-13T14:12:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15578#issuecomment-201110",
    "user": "https://github.com/bhutz"
}
```

Set assignee to @bhutz.



---

archive/issue_comments_201111.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-02-13T14:56:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15578#issuecomment-201111",
    "user": "https://github.com/bhutz"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_201112.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-02-13T15:05:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15578#issuecomment-201112",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_201113.json:
```json
{
    "body": "I do not see any relation between the ticket description and the actual content of the branch. And I do not understand how the modified test could even pass before the change in the branch.",
    "created_at": "2014-03-05T09:15:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15578#issuecomment-201113",
    "user": "https://github.com/fchapoton"
}
```

I do not see any relation between the ticket description and the actual content of the branch. And I do not understand how the modified test could even pass before the change in the branch.



---

archive/issue_comments_201114.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2014-03-05T09:16:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15578#issuecomment-201114",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_201115.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2014-03-05T13:50:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15578#issuecomment-201115",
    "user": "https://github.com/bhutz"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_201116.json:
```json
{
    "body": "Here is a longer description. The goal is to find all rational solutions to a zero dimensional ideal in projective space. The method is just basic elimination theory: compute an elimination ideal and solve one variable at a time. As each variable is solved the values are stored in `points`. The initial test was to check if there was an actual rational solution, i.e. we had a rational value for each of the N+1 variables. So to answer one question, the test would pass when there was a rational value for all N+1 variables.\n\nThe issue is that for higher dimensions there may be multiple equations involving one of the variables, one of which does and one of which does not have a rational solution. These slipped through to give wrong values. The test was modified to check that the \"solution\" really was a zero for *all* defining equations of the ideal.\n\nAs for the content of the branch matching the description. This seems clear to me. This is a modification to the {{rational_preimages}}} function to correct the particular problem I just described in more detail by adding the test I described. However, I did neglect to update it to say that I also added a simple codomain check to ensure that the base point was in the codomain of the function. Is that the point of confusion between description and branch?\n\nIf this is still not clear to you with this more verbose description, then I need a more specific question.",
    "created_at": "2014-03-05T13:50:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15578#issuecomment-201116",
    "user": "https://github.com/bhutz"
}
```

Here is a longer description. The goal is to find all rational solutions to a zero dimensional ideal in projective space. The method is just basic elimination theory: compute an elimination ideal and solve one variable at a time. As each variable is solved the values are stored in `points`. The initial test was to check if there was an actual rational solution, i.e. we had a rational value for each of the N+1 variables. So to answer one question, the test would pass when there was a rational value for all N+1 variables.

The issue is that for higher dimensions there may be multiple equations involving one of the variables, one of which does and one of which does not have a rational solution. These slipped through to give wrong values. The test was modified to check that the "solution" really was a zero for *all* defining equations of the ideal.

As for the content of the branch matching the description. This seems clear to me. This is a modification to the {{rational_preimages}}} function to correct the particular problem I just described in more detail by adding the test I described. However, I did neglect to update it to say that I also added a simple codomain check to ensure that the base point was in the codomain of the function. Is that the point of confusion between description and branch?

If this is still not clear to you with this more verbose description, then I need a more specific question.



---

archive/issue_comments_201117.json:
```json
{
    "body": "Oops, sorry, I was only looking at the second commit. Thanks for the clarification.",
    "created_at": "2014-03-05T16:31:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15578#issuecomment-201117",
    "user": "https://github.com/fchapoton"
}
```

Oops, sorry, I was only looking at the second commit. Thanks for the clarification.



---

archive/issue_comments_201118.json:
```json
{
    "body": "All tests passed on longtest",
    "created_at": "2014-03-13T19:18:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15578#issuecomment-201118",
    "user": "https://trac.sagemath.org/admin/accounts/users/jdefaria"
}
```

All tests passed on longtest



---

archive/issue_comments_201119.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-03-13T19:18:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15578#issuecomment-201119",
    "user": "https://trac.sagemath.org/admin/accounts/users/jdefaria"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_201120.json:
```json
{
    "body": "Reviewer name",
    "created_at": "2014-03-13T22:23:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15578#issuecomment-201120",
    "user": "https://github.com/vbraun"
}
```

Reviewer name



---

archive/issue_comments_201121.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-03-15T16:22:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15578#issuecomment-201121",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
