# Issue 12820: pari should avoid usage of mp_set_memory_functions

Issue created by migration from https://trac.sagemath.org/ticket/12992

Original creator: pcpa

Original creation time: 2012-05-23 00:58:45

Assignee: was

I reported the issue to upstream and proposed a patch, for details, see http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1317

I suggested a patch to not call mp_set_memory_functions if it will be a noop (when not handling signals), and upstream suggests fixing it in sagemath side by saving and restoring pointers when calling pari_init_opts.

Sage simply removes the mp_set_memory_functions call in the pari spkg, but I believe my proposed solution is better, and I am doing it in my work to build a sagemath package using system wide packages.



---

Comment by pcpa created at 2012-09-08 22:28:04

Sample patch file to follow upstream suggestion and not patch pari


---

Attachment


---

Comment by pbruin created at 2014-04-10 23:44:29

Changing status from new to needs_review.


---

Comment by pbruin created at 2014-04-10 23:44:29

I think this can be closed as a duplicate of #15774.


---

Comment by jdemeyer created at 2014-04-11 08:17:57

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2014-04-11 08:17:57

Agreed.


---

Comment by vbraun created at 2014-04-12 07:34:39

Resolution: duplicate
