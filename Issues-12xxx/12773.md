# Issue 12773: include R interface in reference manual

archive/issues_012601.json:
```json
{
    "body": "The R/Sage interface is not in the reference manual, which is really unfortunate!\n\nApply [attachment:trac_12773-r.patch] and [attachment:trac_12773-ref.patch] to the Sage library.\n\nAssignee: mvngu\n\nCC:  @hivert\n\nReviewer: Andrey Novoseltsev\n\nAuthor: William Stein, John Palmieri\n\nMerged: sage-5.1.beta0\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/12773\n\n",
    "closed_at": "2012-05-06T12:18:31Z",
    "created_at": "2012-03-28T16:49:57Z",
    "labels": [
        "component: documentation",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.1",
    "title": "include R interface in reference manual",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12773",
    "user": "https://github.com/williamstein"
}
```
The R/Sage interface is not in the reference manual, which is really unfortunate!

Apply [attachment:trac_12773-r.patch] and [attachment:trac_12773-ref.patch] to the Sage library.

Assignee: mvngu

CC:  @hivert

Reviewer: Andrey Novoseltsev

Author: William Stein, John Palmieri

Merged: sage-5.1.beta0

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/12773





---

archive/issue_comments_182719.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-03-28T16:50:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12773",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12773#issuecomment-182719",
    "user": "https://github.com/williamstein"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_182720.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-03-28T19:59:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12773",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12773#issuecomment-182720",
    "user": "https://github.com/novoselt"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_182721.json:
```json
{
    "body": "Changing author from \"\" to \"William Stein\"",
    "created_at": "2012-03-28T19:59:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12773",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12773#issuecomment-182721",
    "user": "https://github.com/novoselt"
}
```

Changing author from "" to "William Stein"



---

archive/issue_comments_182722.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Andrey Novoseltsev\"",
    "created_at": "2012-03-28T19:59:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12773",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12773#issuecomment-182722",
    "user": "https://github.com/novoselt"
}
```

Changing reviewer from "" to "Andrey Novoseltsev"



---

archive/issue_comments_182723.json:
```json
{
    "body": "<a id='comment:2'></a>\nAttachment [trac12773.patch](tarball://root/attachments/some-uuid/ticket12773/trac12773.patch) by @novoselt created at 2012-03-28 19:59:46",
    "created_at": "2012-03-28T19:59:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12773",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12773#issuecomment-182723",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:2'></a>
Attachment [trac12773.patch](tarball://root/attachments/some-uuid/ticket12773/trac12773.patch) by @novoselt created at 2012-03-28 19:59:46



---

archive/issue_comments_182724.json:
```json
{
    "body": "<a id='comment:3'></a>\nWhen I build the reference manual with this patch, I get about a dozen warnings. The file r.py has to be revised using propert reST markup.",
    "created_at": "2012-03-28T22:26:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12773",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12773#issuecomment-182724",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:3'></a>
When I build the reference manual with this patch, I get about a dozen warnings. The file r.py has to be revised using propert reST markup.



---

archive/issue_comments_182725.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-03-28T22:26:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12773",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12773#issuecomment-182725",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_182726.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n The R/Sage interface is not in the reference manual, which is really unfortunate!  So here's the 1-line change to add it. \n+\n+Apply [attachment:trac_12773-r.patch] to the Sage library.\n``````\n",
    "created_at": "2012-03-28T22:31:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12773",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12773#issuecomment-182726",
    "user": "https://github.com/jhpalmieri"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 The R/Sage interface is not in the reference manual, which is really unfortunate!  So here's the 1-line change to add it. 
+
+Apply [attachment:trac_12773-r.patch] to the Sage library.
``````




---

archive/issue_comments_182727.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-03-28T22:31:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12773",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12773#issuecomment-182727",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_182728.json:
```json
{
    "body": "<a id='comment:4'></a>\nHere's a new patch which cleans up some of the markup. It doesn't do a perfect job: code like variables should all be enclosed in double backquotes, but at least this builds for me with no warnings.",
    "created_at": "2012-03-28T22:31:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12773",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12773#issuecomment-182728",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:4'></a>
Here's a new patch which cleans up some of the markup. It doesn't do a perfect job: code like variables should all be enclosed in double backquotes, but at least this builds for me with no warnings.



---

archive/issue_comments_182729.json:
```json
{
    "body": "Changing author from \"William Stein\" to \"William Stein, John Palmieri\"",
    "created_at": "2012-03-28T22:31:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12773",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12773#issuecomment-182729",
    "user": "https://github.com/jhpalmieri"
}
```

Changing author from "William Stein" to "William Stein, John Palmieri"



---

archive/issue_comments_182730.json:
```json
{
    "body": "<a id='comment:5'></a>\nAttachment [trac_12773-r.patch](tarball://root/attachments/some-uuid/ticket12773/trac_12773-r.patch) by @loefflerd created at 2012-03-29 12:59:31\n\nApply trac_12773-r.patch\n\n(for patchbot)",
    "created_at": "2012-03-29T12:59:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12773",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12773#issuecomment-182730",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:5'></a>
Attachment [trac_12773-r.patch](tarball://root/attachments/some-uuid/ticket12773/trac_12773-r.patch) by @loefflerd created at 2012-03-29 12:59:31

Apply trac_12773-r.patch

(for patchbot)



---

archive/issue_comments_182731.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-The R/Sage interface is not in the reference manual, which is really unfortunate!  So here's the 1-line change to add it. \n+The R/Sage interface is not in the reference manual, which is really unfortunate!\n \n Apply [attachment:trac_12773-r.patch] to the Sage library.\n``````\n",
    "created_at": "2012-04-02T09:40:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12773",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12773#issuecomment-182731",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-The R/Sage interface is not in the reference manual, which is really unfortunate!  So here's the 1-line change to add it. 
+The R/Sage interface is not in the reference manual, which is really unfortunate!
 
 Apply [attachment:trac_12773-r.patch] to the Sage library.
``````




---

archive/issue_comments_182732.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-04-03T18:20:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12773",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12773#issuecomment-182732",
    "user": "https://github.com/novoselt"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_182733.json:
```json
{
    "body": "<a id='comment:7'></a>\nDespite of patchbot complains, the new patch passes all tests for me on Sage-5.0.beta11 and documentation builds and looks OK as well.\n\nThere is some inconsistency in how it appears in the list of interfaces: \"R Interface\" as opposed to \"Interface to X\" for most (but not all) others.",
    "created_at": "2012-04-03T18:20:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12773",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12773#issuecomment-182733",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:7'></a>
Despite of patchbot complains, the new patch passes all tests for me on Sage-5.0.beta11 and documentation builds and looks OK as well.

There is some inconsistency in how it appears in the list of interfaces: "R Interface" as opposed to "Interface to X" for most (but not all) others.



---

archive/issue_comments_182734.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-5.0.beta14\"",
    "created_at": "2012-04-19T06:41:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12773",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12773#issuecomment-182734",
    "user": "https://github.com/jdemeyer"
}
```

Changing merged from "" to "sage-5.0.beta14"



---

archive/issue_events_048319.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-04-19T06:41:20Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12773",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12773#event-48319"
}
```



---

archive/issue_comments_182735.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-04-19T06:41:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12773",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12773#issuecomment-182735",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_182736.json:
```json
{
    "body": "Resolution changed from fixed to ",
    "created_at": "2012-04-23T07:20:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12773",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12773#issuecomment-182736",
    "user": "https://github.com/jdemeyer"
}
```

Resolution changed from fixed to 



---

archive/issue_comments_182737.json:
```json
{
    "body": "<a id='comment:9'></a>\nWith #12849 applied, I get a documentation error:\n\n```\nreading sources... [ 99%] tensor\nreading sources... [100%] todolist\n\n/padic/scratch/jdemeyer/merger/sage-5.0.beta15/devel/sage/doc/en/reference/sage/interfaces/r.rst:9: WARNING: error while formatting signat\nure for sage.interfaces.r.iskeyword: <built-in method __contains__ of frozenset object at 0x2b13fe531d00> is not a module, class, method,\nfunction, traceback, frame, or code object\nlooking for now-outdated files... none found\npickling environment... done\nchecking consistency... done\npreparing documents... done\nwriting output... [  0%] algebras\nwriting output... [  0%] arithgroup\n```\n\nI'm not entirely sure this ticket is to blame, but I'm not merging it, just in case.",
    "created_at": "2012-04-23T07:20:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12773",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12773#issuecomment-182737",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'></a>
With #12849 applied, I get a documentation error:

```
reading sources... [ 99%] tensor
reading sources... [100%] todolist

/padic/scratch/jdemeyer/merger/sage-5.0.beta15/devel/sage/doc/en/reference/sage/interfaces/r.rst:9: WARNING: error while formatting signat
ure for sage.interfaces.r.iskeyword: <built-in method __contains__ of frozenset object at 0x2b13fe531d00> is not a module, class, method,
function, traceback, frame, or code object
looking for now-outdated files... none found
pickling environment... done
checking consistency... done
preparing documents... done
writing output... [  0%] algebras
writing output... [  0%] arithgroup
```

I'm not entirely sure this ticket is to blame, but I'm not merging it, just in case.



---

archive/issue_comments_182738.json:
```json
{
    "body": "Changing merged from \"sage-5.0.beta14\" to \"\"",
    "created_at": "2012-04-23T07:20:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12773",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12773#issuecomment-182738",
    "user": "https://github.com/jdemeyer"
}
```

Changing merged from "sage-5.0.beta14" to ""



---

archive/issue_comments_182739.json:
```json
{
    "body": "Changing status from closed to new.",
    "created_at": "2012-04-23T07:20:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12773",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12773#issuecomment-182739",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from closed to new.



---

archive/issue_events_048320.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-04-23T07:20:12Z",
    "event": "reopened",
    "issue": "https://github.com/sagemath/sagetest/issues/12773",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12773#event-48320"
}
```



---

archive/issue_comments_182740.json:
```json
{
    "body": "Attachment [trac_12773-ref.patch](tarball://root/attachments/some-uuid/ticket12773/trac_12773-ref.patch) by @jhpalmieri created at 2012-04-23 19:34:21",
    "created_at": "2012-04-23T19:34:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12773",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12773#issuecomment-182740",
    "user": "https://github.com/jhpalmieri"
}
```

Attachment [trac_12773-ref.patch](tarball://root/attachments/some-uuid/ticket12773/trac_12773-ref.patch) by @jhpalmieri created at 2012-04-23 19:34:21



---

archive/issue_comments_182741.json:
```json
{
    "body": "<a id='comment:10'></a>\nHere's a patch which fixes the problem. With the various patches to Sphinx (for example, #12489), when you import a function at the top level, its documentation seems to get imported, too. So this patch moves some of those top-level imports to just where they are needed.",
    "created_at": "2012-04-23T19:35:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12773",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12773#issuecomment-182741",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:10'></a>
Here's a patch which fixes the problem. With the various patches to Sphinx (for example, #12489), when you import a function at the top level, its documentation seems to get imported, too. So this patch moves some of those top-level imports to just where they are needed.



---

archive/issue_comments_182742.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n The R/Sage interface is not in the reference manual, which is really unfortunate!\n \n-Apply [attachment:trac_12773-r.patch] to the Sage library.\n+Apply [attachment:trac_12773-r.patch] and [attachment:trac_12773-ref.patch] to the Sage library.\n``````\n",
    "created_at": "2012-04-23T19:35:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12773",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12773#issuecomment-182742",
    "user": "https://github.com/jhpalmieri"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
 The R/Sage interface is not in the reference manual, which is really unfortunate!
 
-Apply [attachment:trac_12773-r.patch] to the Sage library.
+Apply [attachment:trac_12773-r.patch] and [attachment:trac_12773-ref.patch] to the Sage library.
``````




---

archive/issue_comments_182743.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-04-23T19:35:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12773",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12773#issuecomment-182743",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_182744.json:
```json
{
    "body": "<a id='comment:11'></a>\nI am not sure I quite understand the problem: does it mean that we can no longer import functions at the top level?! Or this particular file is somehow special?",
    "created_at": "2012-04-23T22:18:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12773",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12773#issuecomment-182744",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:11'></a>
I am not sure I quite understand the problem: does it mean that we can no longer import functions at the top level?! Or this particular file is somehow special?



---

archive/issue_comments_182745.json:
```json
{
    "body": "<a id='comment:12'></a>\nI think that it's best to avoid top-level imports. The best thing to do is to check each file in the reference manual (!) to see that we don't have lots of redundant documentation lying around. I suppose one could just grep for top-level imports and check those files. I have no idea how big a problem it is; I haven't seen any other problems doing a little spot-checking, and I don't know what triggered the problem with this file.  (Adding `from keyword import iskeyword` in another file, say `sage/interfaces/tachyon.py`, also causes problems in that file.)",
    "created_at": "2012-04-24T05:22:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12773",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12773#issuecomment-182745",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:12'></a>
I think that it's best to avoid top-level imports. The best thing to do is to check each file in the reference manual (!) to see that we don't have lots of redundant documentation lying around. I suppose one could just grep for top-level imports and check those files. I have no idea how big a problem it is; I haven't seen any other problems doing a little spot-checking, and I don't know what triggered the problem with this file.  (Adding `from keyword import iskeyword` in another file, say `sage/interfaces/tachyon.py`, also causes problems in that file.)



---

archive/issue_comments_182746.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-04-30T20:28:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12773",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12773#issuecomment-182746",
    "user": "https://github.com/novoselt"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_182747.json:
```json
{
    "body": "<a id='comment:13'></a>\nI think that we should not prohibit top-level imports - if it is something that is used in a module often or it is in a time-critical function, such imports are better, as far as I understand.\n\nHowever it is a separate issue and I think that the new patch is a reasonable work-around for including R interface into documentation. So positive review again.",
    "created_at": "2012-04-30T20:28:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12773",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12773#issuecomment-182747",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:13'></a>
I think that we should not prohibit top-level imports - if it is something that is used in a module often or it is in a time-critical function, such imports are better, as far as I understand.

However it is a separate issue and I think that the new patch is a reasonable work-around for including R interface into documentation. So positive review again.



---

archive/issue_events_048321.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-04-30T21:07:07Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12773",
    "milestone": "sage-5.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12773#event-48321"
}
```



---

archive/issue_comments_182748.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-05-06T12:18:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12773",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12773#issuecomment-182748",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_048322.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-05-06T12:18:31Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12773",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12773#event-48322"
}
```



---

archive/issue_comments_182749.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-5.1.beta0\"",
    "created_at": "2012-05-06T12:18:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12773",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12773#issuecomment-182749",
    "user": "https://github.com/jdemeyer"
}
```

Changing merged from "" to "sage-5.1.beta0"
