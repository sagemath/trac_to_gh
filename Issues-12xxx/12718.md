# Issue 12718: polynomial substitution overflow hell (libsingular bug?)

archive/issues_012546.json:
```json
{
    "body": "\n```\nsage: R.<x,y> = QQ[]\nsage: n=1000; f = x^n; f.subs(x = x^n)\nx^1000000\nsage: n=100000; f = x^n; f.subs(x = x^n)\nx^1410065408*y^2 \n```\n\nAssignee: @malb\n\nKeywords: sd59\n\nBranch/Commit: 18ddc6dec77d39d764dcaa9fbdbe91adf02bfbbc\n\nReviewer: Volker Braun, William Stein\n\nAuthor: Martin Albrecht\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/12718\n\n",
    "closed_at": "2014-07-08T18:51:57Z",
    "created_at": "2012-03-21T18:41:05Z",
    "labels": [
        "component: commutative algebra",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.3",
    "title": "polynomial substitution overflow hell (libsingular bug?)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12718",
    "user": "https://github.com/williamstein"
}
```

```
sage: R.<x,y> = QQ[]
sage: n=1000; f = x^n; f.subs(x = x^n)
x^1000000
sage: n=100000; f = x^n; f.subs(x = x^n)
x^1410065408*y^2 
```

Assignee: @malb

Keywords: sd59

Branch/Commit: 18ddc6dec77d39d764dcaa9fbdbe91adf02bfbbc

Reviewer: Volker Braun, William Stein

Author: Martin Albrecht

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/12718





---

archive/issue_comments_181211.json:
```json
{
    "body": "Changing stopgaps from \"\" to \"todo\"",
    "created_at": "2012-03-21T18:41:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12718#issuecomment-181211",
    "user": "https://github.com/williamstein"
}
```

Changing stopgaps from "" to "todo"



---

archive/issue_comments_181212.json:
```json
{
    "body": "<a id='comment:2'></a>\nAh, crap, we took care of the actual overflows but missed this one. I'll try to port our fix from `__pow__` over this weekend.",
    "created_at": "2012-03-21T22:55:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12718#issuecomment-181212",
    "user": "https://github.com/malb"
}
```

<a id='comment:2'></a>
Ah, crap, we took care of the actual overflows but missed this one. I'll try to port our fix from `__pow__` over this weekend.



---

archive/issue_comments_181213.json:
```json
{
    "body": "<a id='comment:3'></a>\nBy the way, this bug was quickly hit by Ben Hutz, who is doing research in arithmetic dynamics, which involves dynamics of *iterating* maps.",
    "created_at": "2012-03-22T13:36:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12718#issuecomment-181213",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:3'></a>
By the way, this bug was quickly hit by Ben Hutz, who is doing research in arithmetic dynamics, which involves dynamics of *iterating* maps.



---

archive/issue_comments_181214.json:
```json
{
    "body": "Changing author from \"\" to \"Martin Albrecht\"",
    "created_at": "2012-03-24T14:33:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12718#issuecomment-181214",
    "user": "https://github.com/malb"
}
```

Changing author from "" to "Martin Albrecht"



---

archive/issue_comments_181215.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-03-24T14:33:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12718#issuecomment-181215",
    "user": "https://github.com/malb"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_181216.json:
```json
{
    "body": "<a id='comment:5'></a>\nI am not sure what I am supposed to do about this **stopgap** business.",
    "created_at": "2012-03-24T14:36:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12718#issuecomment-181216",
    "user": "https://github.com/malb"
}
```

<a id='comment:5'></a>
I am not sure what I am supposed to do about this **stopgap** business.



---

archive/issue_comments_181217.json:
```json
{
    "body": "<a id='comment:6'></a>\nREFEREE REPORT:\n\n  This looks *great* except for one little thing. Can you give examples to illustrate the `max_degree_per_variable` parameter in the Python-callable functions that define it.",
    "created_at": "2012-03-29T12:35:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12718#issuecomment-181217",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:6'></a>
REFEREE REPORT:

  This looks *great* except for one little thing. Can you give examples to illustrate the `max_degree_per_variable` parameter in the Python-callable functions that define it.



---

archive/issue_comments_181218.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-03-29T12:35:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12718#issuecomment-181218",
    "user": "https://github.com/williamstein"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_181219.json:
```json
{
    "body": "<a id='comment:7'></a>\nAttachment [trac_12718_singular_overflow.patch](tarball://root/attachments/some-uuid/ticket12718/trac_12718_singular_overflow.patch) by @malb created at 2012-04-14 00:23:53",
    "created_at": "2012-04-14T00:23:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12718#issuecomment-181219",
    "user": "https://github.com/malb"
}
```

<a id='comment:7'></a>
Attachment [trac_12718_singular_overflow.patch](tarball://root/attachments/some-uuid/ticket12718/trac_12718_singular_overflow.patch) by @malb created at 2012-04-14 00:23:53



---

archive/issue_comments_181220.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-04-14T00:23:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12718#issuecomment-181220",
    "user": "https://github.com/malb"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_181221.json:
```json
{
    "body": "<a id='comment:8'></a>\nI removed `max_degree_per_variable` because it turns out to not work anyway.",
    "created_at": "2012-04-14T00:24:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12718#issuecomment-181221",
    "user": "https://github.com/malb"
}
```

<a id='comment:8'></a>
I removed `max_degree_per_variable` because it turns out to not work anyway.



---

archive/issue_comments_181222.json:
```json
{
    "body": "<a id='comment:9'></a>\nLooks good!",
    "created_at": "2012-04-19T14:37:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12718#issuecomment-181222",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:9'></a>
Looks good!



---

archive/issue_comments_181223.json:
```json
{
    "body": "Changing stopgaps from \"todo\" to \"\"",
    "created_at": "2012-04-19T14:38:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12718#issuecomment-181223",
    "user": "https://github.com/vbraun"
}
```

Changing stopgaps from "todo" to ""



---

archive/issue_comments_181224.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Volker Braun, William Stein\"",
    "created_at": "2012-04-19T14:38:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12718#issuecomment-181224",
    "user": "https://github.com/vbraun"
}
```

Changing reviewer from "" to "Volker Braun, William Stein"



---

archive/issue_comments_181225.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-04-19T14:38:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12718#issuecomment-181225",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_181226.json:
```json
{
    "body": "<a id='comment:11'></a>\nIn `cdef int singular_polynomial_subst()`, did you verify that adding the `sig_on()` conditions doesn't slow things down?  If you need a function call to determine whether to call `sig_on()`, it's probably faster to always call `sig_on()`.",
    "created_at": "2012-04-20T07:41:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12718#issuecomment-181226",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:11'></a>
In `cdef int singular_polynomial_subst()`, did you verify that adding the `sig_on()` conditions doesn't slow things down?  If you need a function call to determine whether to call `sig_on()`, it's probably faster to always call `sig_on()`.



---

archive/issue_comments_181227.json:
```json
{
    "body": "<a id='comment:12'></a>\nNever mind, the difference is hardly noticable anyway.  Your way (with the conditional `sig_on()`) seems to be very slightly faster.",
    "created_at": "2012-04-20T08:06:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12718#issuecomment-181227",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>
Never mind, the difference is hardly noticable anyway.  Your way (with the conditional `sig_on()`) seems to be very slightly faster.



---

archive/issue_comments_181228.json:
```json
{
    "body": "<a id='comment:13'></a>\nBtw. it's the \"standard\" way we do it in the singular interface. I think Joel Mohler introduced it ages ago.",
    "created_at": "2012-04-20T08:52:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12718#issuecomment-181228",
    "user": "https://github.com/malb"
}
```

<a id='comment:13'></a>
Btw. it's the "standard" way we do it in the singular interface. I think Joel Mohler introduced it ages ago.



---

archive/issue_comments_181229.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-04-28T11:52:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12718#issuecomment-181229",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_181230.json:
```json
{
    "body": "<a id='comment:14'></a>\nOn 32-bit systems:\n\n```\n**********************************************************************\nFile \"/Users/buildbot/build/sage/moufang-1/moufang_full/build/sage-5.0.beta15/devel/sage-main/sage/rings/polynomial/multi_polynomial_libsingular.pyx\", line 3154:\n    sage: n=1000; f = x^n; f.subs(x = x^n)\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildbot/build/sage/moufang-1/moufang_full/build/sage-5.0.beta15/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/Users/buildbot/build/sage/moufang-1/moufang_full/build/sage-5.0.beta15/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/Users/buildbot/build/sage/moufang-1/moufang_full/build/sage-5.0.beta15/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_61[28]>\", line 1, in <module>\n        n=Integer(1000); f = x**n; f.subs(x = x**n)###line 3154:\n    sage: n=1000; f = x^n; f.subs(x = x^n)\n      File \"multi_polynomial_libsingular.pyx\", line 3240, in sage.rings.polynomial.multi_polynomial_libsingular.MPolynomial_libsingular.subs (sage/rings/polynomial/multi_polynomial_libsingular.cpp:21411)\n        raise OverflowError(\"Exponent overflow (%d).\"%(degree))\n    OverflowError: Exponent overflow (1000000).\n**********************************************************************\nFile \"/Users/buildbot/build/sage/moufang-1/moufang_full/build/sage-5.0.beta15/devel/sage-main/sage/rings/polynomial/multi_polynomial_libsingular.pyx\", line 3157:\n    sage: n=100000; f = x^n; f.subs(x = x^n)\nExpected:\n    Traceback (most recent call last):\n    ...\n    OverflowError: Exponent overflow (10000000000).\nGot:\n    Traceback (most recent call last):\n      File \"/Users/buildbot/build/sage/moufang-1/moufang_full/build/sage-5.0.beta15/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/Users/buildbot/build/sage/moufang-1/moufang_full/build/sage-5.0.beta15/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/Users/buildbot/build/sage/moufang-1/moufang_full/build/sage-5.0.beta15/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_61[29]>\", line 1, in <module>\n        n=Integer(100000); f = x**n; f.subs(x = x**n)###line 3157:\n    sage: n=100000; f = x^n; f.subs(x = x^n)\n      File \"multi_polynomial_libsingular.pyx\", line 2347, in sage.rings.polynomial.multi_polynomial_libsingular.MPolynomial_libsingular.__pow__ (sage/rings/polynomial/multi_polynomial_libsingular.cpp:16619)\n        singular_polynomial_pow(&_p, self._poly, exp, _ring)\n      File \"polynomial.pyx\", line 322, in sage.libs.singular.polynomial.singular_polynomial_pow (sage/libs/singular/polynomial.cpp:3976)\n      File \"singular.pyx\", line 667, in sage.libs.singular.singular.overflow_check (sage/libs/singular/singular.cpp:6526)\n    OverflowError: Exponent overflow (100000).\n**********************************************************************\n```",
    "created_at": "2012-04-28T11:52:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12718#issuecomment-181230",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:14'></a>
On 32-bit systems:

```
**********************************************************************
File "/Users/buildbot/build/sage/moufang-1/moufang_full/build/sage-5.0.beta15/devel/sage-main/sage/rings/polynomial/multi_polynomial_libsingular.pyx", line 3154:
    sage: n=1000; f = x^n; f.subs(x = x^n)
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildbot/build/sage/moufang-1/moufang_full/build/sage-5.0.beta15/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/Users/buildbot/build/sage/moufang-1/moufang_full/build/sage-5.0.beta15/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/Users/buildbot/build/sage/moufang-1/moufang_full/build/sage-5.0.beta15/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_61[28]>", line 1, in <module>
        n=Integer(1000); f = x**n; f.subs(x = x**n)###line 3154:
    sage: n=1000; f = x^n; f.subs(x = x^n)
      File "multi_polynomial_libsingular.pyx", line 3240, in sage.rings.polynomial.multi_polynomial_libsingular.MPolynomial_libsingular.subs (sage/rings/polynomial/multi_polynomial_libsingular.cpp:21411)
        raise OverflowError("Exponent overflow (%d)."%(degree))
    OverflowError: Exponent overflow (1000000).
**********************************************************************
File "/Users/buildbot/build/sage/moufang-1/moufang_full/build/sage-5.0.beta15/devel/sage-main/sage/rings/polynomial/multi_polynomial_libsingular.pyx", line 3157:
    sage: n=100000; f = x^n; f.subs(x = x^n)
Expected:
    Traceback (most recent call last):
    ...
    OverflowError: Exponent overflow (10000000000).
Got:
    Traceback (most recent call last):
      File "/Users/buildbot/build/sage/moufang-1/moufang_full/build/sage-5.0.beta15/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/Users/buildbot/build/sage/moufang-1/moufang_full/build/sage-5.0.beta15/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/Users/buildbot/build/sage/moufang-1/moufang_full/build/sage-5.0.beta15/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_61[29]>", line 1, in <module>
        n=Integer(100000); f = x**n; f.subs(x = x**n)###line 3157:
    sage: n=100000; f = x^n; f.subs(x = x^n)
      File "multi_polynomial_libsingular.pyx", line 2347, in sage.rings.polynomial.multi_polynomial_libsingular.MPolynomial_libsingular.__pow__ (sage/rings/polynomial/multi_polynomial_libsingular.cpp:16619)
        singular_polynomial_pow(&_p, self._poly, exp, _ring)
      File "polynomial.pyx", line 322, in sage.libs.singular.polynomial.singular_polynomial_pow (sage/libs/singular/polynomial.cpp:3976)
      File "singular.pyx", line 667, in sage.libs.singular.singular.overflow_check (sage/libs/singular/singular.cpp:6526)
    OverflowError: Exponent overflow (100000).
**********************************************************************
```



---

archive/issue_events_048085.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:34:36Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12718",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12718#event-48085"
}
```



---

archive/issue_events_048086.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12718",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12718#event-48086"
}
```



---

archive/issue_events_048087.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12718",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12718#event-48087"
}
```



---

archive/issue_events_048088.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:19:32Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12718",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12718#event-48088"
}
```



---

archive/issue_events_048089.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:19:32Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12718",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12718#event-48089"
}
```



---

archive/issue_comments_181231.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd59\".",
    "created_at": "2014-06-27T01:08:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12718#issuecomment-181231",
    "user": "https://github.com/malb"
}
```

Changing keywords from "" to "sd59".



---

archive/issue_comments_181232.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-06-27T01:08:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12718#issuecomment-181232",
    "user": "https://github.com/malb"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_181233.json:
```json
{
    "body": "Changing commit from \"\" to \"a35f3d18c57f087e99419ee47d89f4e170c2d23b\"",
    "created_at": "2014-06-27T01:08:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12718#issuecomment-181233",
    "user": "https://github.com/malb"
}
```

Changing commit from "" to "a35f3d18c57f087e99419ee47d89f4e170c2d23b"



---

archive/issue_comments_181234.json:
```json
{
    "body": "Changing branch from \"\" to \"u/malb/trac_12718\"",
    "created_at": "2014-06-27T01:08:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12718#issuecomment-181234",
    "user": "https://github.com/malb"
}
```

Changing branch from "" to "u/malb/trac_12718"



---

archive/issue_comments_181235.json:
```json
{
    "body": "<a id='comment:18'></a>\nA mere two years later \u2026 and I fixed those doctest failures.\n\n---\nNew commits:\n|                                                                                                                                          |                                                                 |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------|\n|[a35f3d1](https://github.com/sagemath/sagetrac-mirror/commit/a35f3d18c57f087e99419ee47d89f4e170c2d23b)|`catch overflows in f.subs() where f is a libsingular polynomial`|",
    "created_at": "2014-06-27T01:08:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12718#issuecomment-181235",
    "user": "https://github.com/malb"
}
```

<a id='comment:18'></a>
A mere two years later … and I fixed those doctest failures.

---
New commits:
|                                                                                                                                          |                                                                 |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------|
|[a35f3d1](https://github.com/sagemath/sagetrac-mirror/commit/a35f3d18c57f087e99419ee47d89f4e170c2d23b)|`catch overflows in f.subs() where f is a libsingular polynomial`|



---

archive/issue_comments_181236.json:
```json
{
    "body": "<a id='comment:19'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                        |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|\n|[4dfd393](https://github.com/sagemath/sagetrac-mirror/commit/4dfd3934026ce570573856f5b4dee2b610be129b)|`Merge branch 'develop' into trac_12718`|\n|[c9a1ebc](https://github.com/sagemath/sagetrac-mirror/commit/c9a1ebcc33f1aaf1fbc2147de1a639f2c550ecb2)|`fixed SIGSEGV when calling subs on 0`|\n|[38c07da](https://github.com/sagemath/sagetrac-mirror/commit/38c07da8745a467c2669ee70adab4e5fbb927876)|`shut up Cython warnings about complicated declarations`|",
    "created_at": "2014-06-27T16:15:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12718#issuecomment-181236",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                        |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|
|[4dfd393](https://github.com/sagemath/sagetrac-mirror/commit/4dfd3934026ce570573856f5b4dee2b610be129b)|`Merge branch 'develop' into trac_12718`|
|[c9a1ebc](https://github.com/sagemath/sagetrac-mirror/commit/c9a1ebcc33f1aaf1fbc2147de1a639f2c550ecb2)|`fixed SIGSEGV when calling subs on 0`|
|[38c07da](https://github.com/sagemath/sagetrac-mirror/commit/38c07da8745a467c2669ee70adab4e5fbb927876)|`shut up Cython warnings about complicated declarations`|



---

archive/issue_comments_181237.json:
```json
{
    "body": "Changing commit from \"a35f3d18c57f087e99419ee47d89f4e170c2d23b\" to \"38c07da8745a467c2669ee70adab4e5fbb927876\"",
    "created_at": "2014-06-27T16:15:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12718#issuecomment-181237",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a35f3d18c57f087e99419ee47d89f4e170c2d23b" to "38c07da8745a467c2669ee70adab4e5fbb927876"



---

archive/issue_comments_181238.json:
```json
{
    "body": "<a id='comment:20'></a>\nfixed segfault.",
    "created_at": "2014-06-27T16:16:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12718#issuecomment-181238",
    "user": "https://github.com/malb"
}
```

<a id='comment:20'></a>
fixed segfault.



---

archive/issue_comments_181239.json:
```json
{
    "body": "<a id='comment:21'></a>\nanyone up for reviewing this?",
    "created_at": "2014-07-07T15:43:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12718#issuecomment-181239",
    "user": "https://github.com/malb"
}
```

<a id='comment:21'></a>
anyone up for reviewing this?



---

archive/issue_comments_181240.json:
```json
{
    "body": "<a id='comment:22'></a>\nI'm getting a bunch of doctest errors, including\n\n```\nsage -t --long src/sage/rings/polynomial/multi_polynomial_libsingular.pyx\n**********************************************************************\nFile \"src/sage/rings/polynomial/multi_polynomial_libsingular.pyx\", line 3279, in sage.rings.polynomial.multi_polynomial_libsingular.MPolynomial_libsingular.subs\nFailed example:\n    try:\n      f.subs(x = x^n)\n      print \"no overflow\"\n    except OverflowError:\n      print \"overflow\"\nExpected:\n    no overflow \nGot:\n    x^1000000\n    no overflow\n```\nbut really there is a bunch more. Did you run the tests?",
    "created_at": "2014-07-07T17:38:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12718#issuecomment-181240",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:22'></a>
I'm getting a bunch of doctest errors, including

```
sage -t --long src/sage/rings/polynomial/multi_polynomial_libsingular.pyx
**********************************************************************
File "src/sage/rings/polynomial/multi_polynomial_libsingular.pyx", line 3279, in sage.rings.polynomial.multi_polynomial_libsingular.MPolynomial_libsingular.subs
Failed example:
    try:
      f.subs(x = x^n)
      print "no overflow"
    except OverflowError:
      print "overflow"
Expected:
    no overflow 
Got:
    x^1000000
    no overflow
```
but really there is a bunch more. Did you run the tests?



---

archive/issue_comments_181241.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-07-07T20:09:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12718#issuecomment-181241",
    "user": "https://github.com/malb"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_181242.json:
```json
{
    "body": "<a id='comment:23'></a>\nI did and they passed (I thought at least), but I'm now getting these, too. Damn.",
    "created_at": "2014-07-07T20:09:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12718#issuecomment-181242",
    "user": "https://github.com/malb"
}
```

<a id='comment:23'></a>
I did and they passed (I thought at least), but I'm now getting these, too. Damn.



---

archive/issue_comments_181243.json:
```json
{
    "body": "Changing commit from \"38c07da8745a467c2669ee70adab4e5fbb927876\" to \"3e8a09e700d9a83f84e1c2085818d6aea81b1515\"",
    "created_at": "2014-07-07T21:34:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12718#issuecomment-181243",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "38c07da8745a467c2669ee70adab4e5fbb927876" to "3e8a09e700d9a83f84e1c2085818d6aea81b1515"



---

archive/issue_comments_181244.json:
```json
{
    "body": "<a id='comment:24'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                             |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|\n|[5f84119](https://github.com/sagemath/sagetrac-mirror/commit/5f84119d5175b06e44221e1ed7639237ab00853d)|`fixed some doctest failures`|\n|[3e8a09e](https://github.com/sagemath/sagetrac-mirror/commit/3e8a09e700d9a83f84e1c2085818d6aea81b1515)|`we still need to run subst if self == 0 to allow ring changes`|",
    "created_at": "2014-07-07T21:34:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12718#issuecomment-181244",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                             |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|
|[5f84119](https://github.com/sagemath/sagetrac-mirror/commit/5f84119d5175b06e44221e1ed7639237ab00853d)|`fixed some doctest failures`|
|[3e8a09e](https://github.com/sagemath/sagetrac-mirror/commit/3e8a09e700d9a83f84e1c2085818d6aea81b1515)|`we still need to run subst if self == 0 to allow ring changes`|



---

archive/issue_comments_181245.json:
```json
{
    "body": "<a id='comment:25'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                                 |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------|\n|[a35f3d1](https://github.com/sagemath/sagetrac-mirror/commit/a35f3d18c57f087e99419ee47d89f4e170c2d23b)|`catch overflows in f.subs() where f is a libsingular polynomial`|\n|[4dfd393](https://github.com/sagemath/sagetrac-mirror/commit/4dfd3934026ce570573856f5b4dee2b610be129b)|`Merge branch 'develop' into trac_12718`|\n|[c9a1ebc](https://github.com/sagemath/sagetrac-mirror/commit/c9a1ebcc33f1aaf1fbc2147de1a639f2c550ecb2)|`fixed SIGSEGV when calling subs on 0`|\n|[38c07da](https://github.com/sagemath/sagetrac-mirror/commit/38c07da8745a467c2669ee70adab4e5fbb927876)|`shut up Cython warnings about complicated declarations`|\n|[5f84119](https://github.com/sagemath/sagetrac-mirror/commit/5f84119d5175b06e44221e1ed7639237ab00853d)|`fixed some doctest failures`|\n|[18ddc6d](https://github.com/sagemath/sagetrac-mirror/commit/18ddc6dec77d39d764dcaa9fbdbe91adf02bfbbc)|`we still need to run subst if self == 0 to allow ring changes`|",
    "created_at": "2014-07-08T09:16:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12718#issuecomment-181245",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                                 |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------|
|[a35f3d1](https://github.com/sagemath/sagetrac-mirror/commit/a35f3d18c57f087e99419ee47d89f4e170c2d23b)|`catch overflows in f.subs() where f is a libsingular polynomial`|
|[4dfd393](https://github.com/sagemath/sagetrac-mirror/commit/4dfd3934026ce570573856f5b4dee2b610be129b)|`Merge branch 'develop' into trac_12718`|
|[c9a1ebc](https://github.com/sagemath/sagetrac-mirror/commit/c9a1ebcc33f1aaf1fbc2147de1a639f2c550ecb2)|`fixed SIGSEGV when calling subs on 0`|
|[38c07da](https://github.com/sagemath/sagetrac-mirror/commit/38c07da8745a467c2669ee70adab4e5fbb927876)|`shut up Cython warnings about complicated declarations`|
|[5f84119](https://github.com/sagemath/sagetrac-mirror/commit/5f84119d5175b06e44221e1ed7639237ab00853d)|`fixed some doctest failures`|
|[18ddc6d](https://github.com/sagemath/sagetrac-mirror/commit/18ddc6dec77d39d764dcaa9fbdbe91adf02bfbbc)|`we still need to run subst if self == 0 to allow ring changes`|



---

archive/issue_comments_181246.json:
```json
{
    "body": "Changing commit from \"3e8a09e700d9a83f84e1c2085818d6aea81b1515\" to \"18ddc6dec77d39d764dcaa9fbdbe91adf02bfbbc\"",
    "created_at": "2014-07-08T09:16:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12718#issuecomment-181246",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "3e8a09e700d9a83f84e1c2085818d6aea81b1515" to "18ddc6dec77d39d764dcaa9fbdbe91adf02bfbbc"



---

archive/issue_comments_181247.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-07-08T09:54:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12718#issuecomment-181247",
    "user": "https://github.com/malb"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_181248.json:
```json
{
    "body": "<a id='comment:26'></a>\nOkay, figured out what went wrong:\n\n* the doctest failure Volker posted was missed because I ran my last tests on 32-bit not on 64-bit, but it only shows on 64-bit\n* the other doctest failures were introduced in my last - seemingly innocent - fix\n\nI've addressed these and ran doctests on one 64-bit and one 32-bit system. They passed.",
    "created_at": "2014-07-08T09:54:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12718#issuecomment-181248",
    "user": "https://github.com/malb"
}
```

<a id='comment:26'></a>
Okay, figured out what went wrong:

* the doctest failure Volker posted was missed because I ran my last tests on 32-bit not on 64-bit, but it only shows on 64-bit
* the other doctest failures were introduced in my last - seemingly innocent - fix

I've addressed these and ran doctests on one 64-bit and one 32-bit system. They passed.



---

archive/issue_comments_181249.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-07-08T18:51:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12718#issuecomment-181249",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_048090.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-08T18:51:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12718",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12718#event-48090"
}
```



---

archive/issue_comments_181250.json:
```json
{
    "body": "Changing branch from \"u/malb/trac_12718\" to \"18ddc6dec77d39d764dcaa9fbdbe91adf02bfbbc\"",
    "created_at": "2014-07-08T18:51:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12718#issuecomment-181250",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/malb/trac_12718" to "18ddc6dec77d39d764dcaa9fbdbe91adf02bfbbc"
