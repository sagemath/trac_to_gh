# Issue 12694: Fix four SPKGs with irregular directory structures

archive/issues_012522.json:
```json
{
    "body": "The following SPKGs do not have a `src/` directory:\n\n```\nsage_scripts\nextcode\nlibm4ri\nsage_root\nelliptic_curves\ngraphs\nsage\npolytopes_db\n```\nThe sage spkgs are obviously supposed to be irregular (I guess) but the other four - `libm4ri`, `elliptic_curves`, `graphs`, and `polytopes_db` should follow the guidelines given in the developers' guide and have a `src/` directory.\n\n---\nInstall:\n\n* http://boxen.math.washington.edu/home/keshav/files/fixed-spkgs/elliptic_curves-0.5.spkg\n* http://boxen.math.washington.edu/home/keshav/files/fixed-spkgs/libm4ri-20111004.p1.spkg\n* http://boxen.math.washington.edu/home/keshav/files/fixed-spkgs/graphs-20070722.p2.spkg\n* http://boxen.math.washington.edu/home/keshav/files/fixed-spkgs/polytopes_db-20100210.p1.spkg\n\nAssignee: @kini\n\nCC:  @ohanar @malb ekirkman @novoselt @jasongrout @williamstein\n\nKeywords: libm4ri elliptic_curves graphs polytopes_db rd2\n\nReviewer: R. Andrew Ohana\n\nAuthor: Keshav Kini\n\nMerged: sage-5.0.beta10\n\nDependencies: #12644\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/12694\n\n",
    "closed_at": "2012-03-23T15:23:49Z",
    "created_at": "2012-03-19T01:12:27Z",
    "labels": [
        "component: packages: standard",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.0",
    "title": "Fix four SPKGs with irregular directory structures",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12694",
    "user": "https://github.com/kini"
}
```
The following SPKGs do not have a `src/` directory:

```
sage_scripts
extcode
libm4ri
sage_root
elliptic_curves
graphs
sage
polytopes_db
```
The sage spkgs are obviously supposed to be irregular (I guess) but the other four - `libm4ri`, `elliptic_curves`, `graphs`, and `polytopes_db` should follow the guidelines given in the developers' guide and have a `src/` directory.

---
Install:

* http://boxen.math.washington.edu/home/keshav/files/fixed-spkgs/elliptic_curves-0.5.spkg
* http://boxen.math.washington.edu/home/keshav/files/fixed-spkgs/libm4ri-20111004.p1.spkg
* http://boxen.math.washington.edu/home/keshav/files/fixed-spkgs/graphs-20070722.p2.spkg
* http://boxen.math.washington.edu/home/keshav/files/fixed-spkgs/polytopes_db-20100210.p1.spkg

Assignee: @kini

CC:  @ohanar @malb ekirkman @novoselt @jasongrout @williamstein

Keywords: libm4ri elliptic_curves graphs polytopes_db rd2

Reviewer: R. Andrew Ohana

Author: Keshav Kini

Merged: sage-5.0.beta10

Dependencies: #12644

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/12694





---

archive/issue_comments_148117.json:
```json
{
    "body": "Changing priority from major to minor.",
    "created_at": "2012-03-19T01:13:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12694",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12694#issuecomment-148117",
    "user": "https://github.com/kini"
}
```

Changing priority from major to minor.



---

archive/issue_comments_148118.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2012-03-19T01:13:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12694",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12694#issuecomment-148118",
    "user": "https://github.com/kini"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_148119.json:
```json
{
    "body": "<a id='comment:3'></a>I have uploaded an spkg.",
    "created_at": "2012-03-19T02:26:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12694",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12694#issuecomment-148119",
    "user": "https://github.com/kini"
}
```

<a id='comment:3'></a>I have uploaded an spkg.



---

archive/issue_comments_148120.json:
```json
{
    "body": "<a id='comment:4'></a>The above comment was a test of the newly upgraded trac server. Here are two more SPKGs.",
    "created_at": "2012-03-19T02:42:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12694",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12694#issuecomment-148120",
    "user": "https://github.com/kini"
}
```

<a id='comment:4'></a>The above comment was a test of the newly upgraded trac server. Here are two more SPKGs.



---

archive/issue_comments_148121.json:
```json
{
    "body": "<a id='comment:5'></a>And the last one.",
    "created_at": "2012-03-19T02:55:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12694",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12694#issuecomment-148121",
    "user": "https://github.com/kini"
}
```

<a id='comment:5'></a>And the last one.



---

archive/issue_comments_148122.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-03-19T02:55:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12694",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12694#issuecomment-148122",
    "user": "https://github.com/kini"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_148123.json:
```json
{
    "body": "<a id='comment:6'></a>these are not the comments you are looking for",
    "created_at": "2012-03-19T05:38:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12694",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12694#issuecomment-148123",
    "user": "https://github.com/kini"
}
```

<a id='comment:6'></a>these are not the comments you are looking for



---

archive/issue_comments_148124.json:
```json
{
    "body": "<a id='comment:7'></a>CCing the maintainers of the SPKGs",
    "created_at": "2012-03-19T23:12:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12694",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12694#issuecomment-148124",
    "user": "https://github.com/kini"
}
```

<a id='comment:7'></a>CCing the maintainers of the SPKGs



---

archive/issue_comments_148125.json:
```json
{
    "body": "<a id='comment:8'></a>the elliptic_curves spkg still has the ellcurves directory (which should  now be gone), also at the same time you may as well remove the  xreadlines from the spkg-install since the command has be deprecated (in  favor of just using an implicit iterator)",
    "created_at": "2012-03-19T23:17:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12694",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12694#issuecomment-148125",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:8'></a>the elliptic_curves spkg still has the ellcurves directory (which should  now be gone), also at the same time you may as well remove the  xreadlines from the spkg-install since the command has be deprecated (in  favor of just using an implicit iterator)



---

archive/issue_comments_148126.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-03-19T23:17:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12694",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12694#issuecomment-148126",
    "user": "https://github.com/ohanar"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_148127.json:
```json
{
    "body": "<a id='comment:9'></a>Oops, how did that happen... fixed (I think).",
    "created_at": "2012-03-20T00:17:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12694",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12694#issuecomment-148127",
    "user": "https://github.com/kini"
}
```

<a id='comment:9'></a>Oops, how did that happen... fixed (I think).



---

archive/issue_comments_148128.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-03-20T00:17:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12694",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12694#issuecomment-148128",
    "user": "https://github.com/kini"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_148129.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-03-20T00:20:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12694",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12694#issuecomment-148129",
    "user": "https://github.com/ohanar"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_148130.json:
```json
{
    "body": "<a id='comment:10'></a>```\n$ hg status\n? .SPKG.txt.swp\n```",
    "created_at": "2012-03-20T00:20:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12694",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12694#issuecomment-148130",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:10'></a>```
$ hg status
? .SPKG.txt.swp
```



---

archive/issue_comments_148131.json:
```json
{
    "body": "<a id='comment:11'></a>You caught me - that's already fixed, download it again :)",
    "created_at": "2012-03-20T00:24:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12694",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12694#issuecomment-148131",
    "user": "https://github.com/kini"
}
```

<a id='comment:11'></a>You caught me - that's already fixed, download it again :)



---

archive/issue_comments_148132.json:
```json
{
    "body": "<a id='comment:12'></a>I also would remove Emily as the maintainer of the graphs spkg, she hasn't been around for years (if I had the source for her db file, I would maintain this package, but alas, I don't, maybe Jason or William does?).",
    "created_at": "2012-03-20T00:37:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12694",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12694#issuecomment-148132",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:12'></a>I also would remove Emily as the maintainer of the graphs spkg, she hasn't been around for years (if I had the source for her db file, I would maintain this package, but alas, I don't, maybe Jason or William does?).



---

archive/issue_comments_148133.json:
```json
{
    "body": "<a id='comment:13'></a>Jason? William?",
    "created_at": "2012-03-20T00:42:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12694",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12694#issuecomment-148133",
    "user": "https://github.com/kini"
}
```

<a id='comment:13'></a>Jason? William?



---

archive/issue_comments_148134.json:
```json
{
    "body": "<a id='comment:14'></a>also, in the polytopes_db I would suggest changing the cp to a mv (like you did with the graphs spkg), removes nearly all io assuming you are building and installing on the same disk",
    "created_at": "2012-03-20T00:47:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12694",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12694#issuecomment-148134",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:14'></a>also, in the polytopes_db I would suggest changing the cp to a mv (like you did with the graphs spkg), removes nearly all io assuming you are building and installing on the same disk



---

archive/issue_comments_148135.json:
```json
{
    "body": "<a id='comment:15'></a>Is the graphs spkg my 8-vertex graph properties database?  It's a sqlite database, right?  Probably the easiest thing to do is to dump the sql to a text file and put that in src/.  We could even just distribute that and build the sqlite database on the fly when the spkg is installed.",
    "created_at": "2012-03-20T00:52:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12694",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12694#issuecomment-148135",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:15'></a>Is the graphs spkg my 8-vertex graph properties database?  It's a sqlite database, right?  Probably the easiest thing to do is to dump the sql to a text file and put that in src/.  We could even just distribute that and build the sqlite database on the fly when the spkg is installed.



---

archive/issue_comments_148136.json:
```json
{
    "body": "<a id='comment:16'></a>Replying to [comment:15 jason]:\n> We could even just distribute that and build the sqlite database on the fly when the spkg is installed.\n\nI would suggest this, it should reduce the size of the spkg, which is always a good thing, and it shouldn't take long to build. Plus, I did a major refactoring of the SQLDatabase object in Sage last summer, and had to put some special cases in for the Graph's database (that could be fixed with this). In any case, I think this belongs in a separate ticket. For now, mark me as the maintainer of the graphs spkg.",
    "created_at": "2012-03-20T00:57:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12694",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12694#issuecomment-148136",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:16'></a>Replying to [comment:15 jason]:
> We could even just distribute that and build the sqlite database on the fly when the spkg is installed.

I would suggest this, it should reduce the size of the spkg, which is always a good thing, and it shouldn't take long to build. Plus, I did a major refactoring of the SQLDatabase object in Sage last summer, and had to put some special cases in for the Graph's database (that could be fixed with this). In any case, I think this belongs in a separate ticket. For now, mark me as the maintainer of the graphs spkg.



---

archive/issue_comments_148137.json:
```json
{
    "body": "<a id='comment:17'></a>Done and done.",
    "created_at": "2012-03-20T01:13:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12694",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12694#issuecomment-148137",
    "user": "https://github.com/kini"
}
```

<a id='comment:17'></a>Done and done.



---

archive/issue_comments_148138.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-03-20T01:13:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12694",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12694#issuecomment-148138",
    "user": "https://github.com/kini"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_148139.json:
```json
{
    "body": "<a id='comment:18'></a>ok, looks good now",
    "created_at": "2012-03-20T02:39:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12694",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12694#issuecomment-148139",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:18'></a>ok, looks good now



---

archive/issue_comments_148140.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-03-20T02:39:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12694",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12694#issuecomment-148140",
    "user": "https://github.com/ohanar"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_148141.json:
```json
{
    "body": "Changing keywords from \"libm4ri elliptic_curves graphs polytopes_db\" to \"libm4ri elliptic_curves graphs polytopes_db rd2\".",
    "created_at": "2012-03-20T12:24:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12694",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12694#issuecomment-148141",
    "user": "https://github.com/kini"
}
```

Changing keywords from "libm4ri elliptic_curves graphs polytopes_db" to "libm4ri elliptic_curves graphs polytopes_db rd2".



---

archive/issue_comments_148142.json:
```json
{
    "body": "<a id='comment:19'></a>Thanks!",
    "created_at": "2012-03-20T12:24:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12694",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12694#issuecomment-148142",
    "user": "https://github.com/kini"
}
```

<a id='comment:19'></a>Thanks!



---

archive/issue_events_034416.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-03-23T15:23:49Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12694",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12694#event-34416"
}
```



---

archive/issue_comments_148143.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-03-23T15:23:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12694",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12694#issuecomment-148143",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
