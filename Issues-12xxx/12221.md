# Issue 12221: Failures in gp pexpect interface with specific length of $DOT_SAGE using a "screen" terminal

archive/issues_012049.json:
```json
{
    "body": "On Gentoo Linux x86_64 and on sage.math running sage-4.8.alpha6 + #11073 (but *without* #12263):\n\nUse a \"screen\" terminal.\n\nWhen $DOT_SAGE (and therefore, $HOME) contains a specific number of characters in relation to the number of columns on the pseudo-terminal ($COLUMNS), failures happen.  I believe this is due to temporary filenames word-wrapping in the pseudo-terminal (pty).  The pty seems to inherit properties of the actual terminal, that's why there are failures with screen but not with xterm.\n\nFor example, on a 138-column terminal:\n\n```\n( export HOME=/mnt/usb1/scratch/jdemeyer/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx; mkdir -p $HOME; ./sage -t devel/sage/sage/schemes )\n[...]\nsage -t  \"devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\"\n  ***   Warning: new stack size = 1003360 (0.957 Mbytes).\n  ***   Warning: new stack size = 1003360 (0.957 Mbytes).\n**********************************************************************\nFile \"/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\", line 526:\n    sage: E.conductor(algorithm=\"gp\")\nException raised:\n    Traceback (most recent call last):\n      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_12[5]>\", line 1, in <module>\n        E.conductor(algorithm=\"gp\")###line 526:\n    sage: E.conductor(algorithm=\"gp\")\n      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 552, in conductor\n        self.__conductor_gp = Integer(gp.eval('ellglobalred(ellinit(%s,0))[1]'%list(self.a_invariants())))\n      File \"integer.pyx\", line 681, in sage.rings.integer.Integer.__init__ (sage/rings/integer.c:6786)\n    TypeError: unable to convert x (=read(\"/tmp/123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789/.sage/temp/arcanis/5630//interface//tmp5647\") ) to an integer\n**********************************************************************\nFile \"/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\", line 1430:\n    sage: E.simon_two_descent()\nException raised:\n    Traceback (most recent call last):\n      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_28[4]>\", line 1, in <module>\n        E.simon_two_descent()###line 1430:\n    sage: E.simon_two_descent()\n      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 1493, in simon_two_descent\n        maxprob=maxprob, limbigprime=limbigprime)\n      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/gp_simon.py\", line 117, in simon_two_descent\n        ans = sage_eval(v, {'Mod': _gp_mod, 'y': K.gen(0)})\n      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/misc/sage_eval.py\", line 199, in sage_eval\n        return eval(source, sage.all.__dict__, locals)\n      File \"<string>\", line 0\n\n        ^\n     SyntaxError: unexpected EOF while parsing\n**********************************************************************\n[...]\nThe following tests failed:\n\n        sage -t  devel/sage/sage/schemes/elliptic_curves/lseries_ell.py # 1 doctests failed\n        sage -t  devel/sage/sage/schemes/elliptic_curves/gp_simon.py # 3 doctests failed\n        sage -t  devel/sage/sage/schemes/elliptic_curves/BSD.py # 3 doctests failed\n        sage -t  devel/sage/sage/schemes/elliptic_curves/sha_tate.py # 4 doctests failed\n        sage -t  devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py # 14 doctests failed\n        sage -t  devel/sage/sage/schemes/elliptic_curves/ell_number_field.py # 11 doctests failed\n```\n\n---\n\n**How to reproduce this more artificially**:\napply [attachment:12221_debug.patch].  This will send all gp pexpect commands less than 200 characters directly to gp, without using a temporary file.  The problem is the filename length of the temporary files used in the read() command.  This depends on `$DOT_SAGE`, on the hostname, on process IDs.\n\nDownload [attachment:test12221.sage] and run (from within a \"screen\" session).  This will execute a read() command with increasing filename lengths:\n\n```\n$ ./sage test12221.sage\n```\nI see\n\n```\nTERM = screen\n18 char filename: ok\n19 char filename: ok\n20 char filename: ok\n[...]\n68 char filename: ok\n69 char filename: ok\n70 char filename: fail\n[...]\n```\n\n**apply** [attachment:12221_pexpect_unset_TERM.patch] and the **spkg** [http://boxen.math.washington.edu/home/jdemeyer/spkg/pexpect-2.0.p5.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/pexpect-2.0.p5.spkg)\n\nAssignee: @williamstein\n\nCC:  @JohnCremona\n\nKeywords: gp pexpect spkg\n\nResolution: fixed\n\nAuthor: Jeroen Demeyer\n\nReviewer: Georg S. Weber\n\nMerged: sage-5.0.beta0\n\nIssue created by migration from https://trac.sagemath.org/ticket/12221\n\n",
    "closed_at": "2012-01-20T13:43:16Z",
    "created_at": "2011-12-22T13:27:47Z",
    "labels": [
        "component: interfaces",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.0",
    "title": "Failures in gp pexpect interface with specific length of $DOT_SAGE using a \"screen\" terminal",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12221",
    "user": "https://github.com/jdemeyer"
}
```
On Gentoo Linux x86_64 and on sage.math running sage-4.8.alpha6 + #11073 (but *without* #12263):

Use a "screen" terminal.

When $DOT_SAGE (and therefore, $HOME) contains a specific number of characters in relation to the number of columns on the pseudo-terminal ($COLUMNS), failures happen.  I believe this is due to temporary filenames word-wrapping in the pseudo-terminal (pty).  The pty seems to inherit properties of the actual terminal, that's why there are failures with screen but not with xterm.

For example, on a 138-column terminal:

```
( export HOME=/mnt/usb1/scratch/jdemeyer/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx; mkdir -p $HOME; ./sage -t devel/sage/sage/schemes )
[...]
sage -t  "devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py"
  ***   Warning: new stack size = 1003360 (0.957 Mbytes).
  ***   Warning: new stack size = 1003360 (0.957 Mbytes).
**********************************************************************
File "/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py", line 526:
    sage: E.conductor(algorithm="gp")
Exception raised:
    Traceback (most recent call last):
      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_12[5]>", line 1, in <module>
        E.conductor(algorithm="gp")###line 526:
    sage: E.conductor(algorithm="gp")
      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 552, in conductor
        self.__conductor_gp = Integer(gp.eval('ellglobalred(ellinit(%s,0))[1]'%list(self.a_invariants())))
      File "integer.pyx", line 681, in sage.rings.integer.Integer.__init__ (sage/rings/integer.c:6786)
    TypeError: unable to convert x (=read("/tmp/123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789/.sage/temp/arcanis/5630//interface//tmp5647") ) to an integer
**********************************************************************
File "/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py", line 1430:
    sage: E.simon_two_descent()
Exception raised:
    Traceback (most recent call last):
      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_28[4]>", line 1, in <module>
        E.simon_two_descent()###line 1430:
    sage: E.simon_two_descent()
      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 1493, in simon_two_descent
        maxprob=maxprob, limbigprime=limbigprime)
      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/gp_simon.py", line 117, in simon_two_descent
        ans = sage_eval(v, {'Mod': _gp_mod, 'y': K.gen(0)})
      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/misc/sage_eval.py", line 199, in sage_eval
        return eval(source, sage.all.__dict__, locals)
      File "<string>", line 0

        ^
     SyntaxError: unexpected EOF while parsing
**********************************************************************
[...]
The following tests failed:

        sage -t  devel/sage/sage/schemes/elliptic_curves/lseries_ell.py # 1 doctests failed
        sage -t  devel/sage/sage/schemes/elliptic_curves/gp_simon.py # 3 doctests failed
        sage -t  devel/sage/sage/schemes/elliptic_curves/BSD.py # 3 doctests failed
        sage -t  devel/sage/sage/schemes/elliptic_curves/sha_tate.py # 4 doctests failed
        sage -t  devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py # 14 doctests failed
        sage -t  devel/sage/sage/schemes/elliptic_curves/ell_number_field.py # 11 doctests failed
```

---

**How to reproduce this more artificially**:
apply [attachment:12221_debug.patch].  This will send all gp pexpect commands less than 200 characters directly to gp, without using a temporary file.  The problem is the filename length of the temporary files used in the read() command.  This depends on `$DOT_SAGE`, on the hostname, on process IDs.

Download [attachment:test12221.sage] and run (from within a "screen" session).  This will execute a read() command with increasing filename lengths:

```
$ ./sage test12221.sage
```
I see

```
TERM = screen
18 char filename: ok
19 char filename: ok
20 char filename: ok
[...]
68 char filename: ok
69 char filename: ok
70 char filename: fail
[...]
```

**apply** [attachment:12221_pexpect_unset_TERM.patch] and the **spkg** [http://boxen.math.washington.edu/home/jdemeyer/spkg/pexpect-2.0.p5.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/pexpect-2.0.p5.spkg)

Assignee: @williamstein

CC:  @JohnCremona

Keywords: gp pexpect spkg

Resolution: fixed

Author: Jeroen Demeyer

Reviewer: Georg S. Weber

Merged: sage-5.0.beta0

Issue created by migration from https://trac.sagemath.org/ticket/12221





---

archive/issue_comments_171718.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2011-12-22T13:28:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171718",
    "user": "https://github.com/jdemeyer"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_171719.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,7 @@\n When the home directory $HOME is unusually long, failures happen in the gp interface:\n \n ```\n-( export HOME=\"/tmp/123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789/\"; mkdir -p $HOME; ./sage -t --long devel/sage/sage/ )\n+( export HOME=\"/tmp/123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789/\"; mkdir -p $HOME; ./sage -t devel/sage/sage/schemes/elliptic_curves )\n [...]\n sage -t  \"devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\"\n   ***   Warning: new stack size = 1003360 (0.957 Mbytes).\n@@ -62,8 +62,6 @@\n         sage -t  \"devel/sage/sage/schemes/elliptic_curves/BSD.py\"\n ```\n \n-Keywords: gp pexpect\n-\n Comment: 1\n \n Type: PLEASE CHANGE\n``````\n",
    "created_at": "2011-12-22T13:28:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171719",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,7 @@
 When the home directory $HOME is unusually long, failures happen in the gp interface:
 
 ```
-( export HOME="/tmp/123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789/"; mkdir -p $HOME; ./sage -t --long devel/sage/sage/ )
+( export HOME="/tmp/123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789/"; mkdir -p $HOME; ./sage -t devel/sage/sage/schemes/elliptic_curves )
 [...]
 sage -t  "devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py"
   ***   Warning: new stack size = 1003360 (0.957 Mbytes).
@@ -62,8 +62,6 @@
         sage -t  "devel/sage/sage/schemes/elliptic_curves/BSD.py"
 ```
 
-Keywords: gp pexpect
-
 Comment: 1
 
 Type: PLEASE CHANGE
``````




---

archive/issue_comments_171720.json:
```json
{
    "body": "<a id='comment:2'></a>I can't reproduce this, either on sage.math or an OS X box.  What platform were you using?",
    "created_at": "2011-12-22T16:37:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171720",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:2'></a>I can't reproduce this, either on sage.math or an OS X box.  What platform were you using?



---

archive/issue_comments_171721.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,72 @@\n+On Gentoo Linux, x86_64:\n \n+```\n+Linux arcanis 2.6.34-gentoo-r12 #4 SMP Thu May 26 19:17:15 EEST 2011 x86_64 Intel(R) Core(TM)2 Duo CPU T5870 @ 2.00GHz GenuineIntel GNU/Linux\n+```\n+\n+When the home directory $HOME is unusually long, failures happen in the gp interface:\n+\n+```\n+( export HOME=\"/tmp/123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789/\"; mkdir -p $HOME; ./sage -t devel/sage/sage/schemes/elliptic_curves )\n+[...]\n+sage -t  \"devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\"\n+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).\n+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).\n+**********************************************************************\n+File \"/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\", line 526:\n+    sage: E.conductor(algorithm=\"gp\")\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1231, in run_one_test\n+        self.run_one_example(test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py\", line 38, in run_one_example\n+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1172, in run_one_example\n+        compileflags, 1) in test.globs\n+      File \"<doctest __main__.example_12[5]>\", line 1, in <module>\n+        E.conductor(algorithm=\"gp\")###line 526:\n+    sage: E.conductor(algorithm=\"gp\")\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 552, in conductor\n+        self.__conductor_gp = Integer(gp.eval('ellglobalred(ellinit(%s,0))[1]'%list(self.a_invariants())))\n+      File \"integer.pyx\", line 681, in sage.rings.integer.Integer.__init__ (sage/rings/integer.c:6786)\n+    TypeError: unable to convert x (=read(\"/tmp/123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789/.sage/temp/arcanis/5630//interface//tmp5647\") ) to an integer\n+**********************************************************************\n+File \"/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\", line 1430:\n+    sage: E.simon_two_descent()\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1231, in run_one_test\n+        self.run_one_example(test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py\", line 38, in run_one_example\n+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1172, in run_one_example\n+        compileflags, 1) in test.globs\n+      File \"<doctest __main__.example_28[4]>\", line 1, in <module>\n+        E.simon_two_descent()###line 1430:\n+    sage: E.simon_two_descent()\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 1493, in simon_two_descent\n+        maxprob=maxprob, limbigprime=limbigprime)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/gp_simon.py\", line 117, in simon_two_descent\n+        ans = sage_eval(v, {'Mod': _gp_mod, 'y': K.gen(0)})\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/misc/sage_eval.py\", line 199, in sage_eval\n+        return eval(source, sage.all.__dict__, locals)\n+      File \"<string>\", line 0\n+\n+        ^\n+     SyntaxError: unexpected EOF while parsing\n+**********************************************************************\n+[...]\n+The following tests failed:\n+\n+\n+        sage -t  \"devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\"\n+        sage -t  \"devel/sage/sage/schemes/elliptic_curves/gp_simon.py\"\n+        sage -t  \"devel/sage/sage/schemes/elliptic_curves/lseries_ell.py\"\n+        sage -t  \"devel/sage/sage/schemes/elliptic_curves/sha_tate.py\"\n+        sage -t  \"devel/sage/sage/schemes/elliptic_curves/ell_number_field.py\"\n+        sage -t  \"devel/sage/sage/schemes/elliptic_curves/period_lattice.py\"\n+        sage -t  \"devel/sage/sage/schemes/elliptic_curves/BSD.py\"\n+```\n \n Comment: 1\n \n``````\n",
    "created_at": "2011-12-22T16:47:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171721",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,72 @@
+On Gentoo Linux, x86_64:
 
+```
+Linux arcanis 2.6.34-gentoo-r12 #4 SMP Thu May 26 19:17:15 EEST 2011 x86_64 Intel(R) Core(TM)2 Duo CPU T5870 @ 2.00GHz GenuineIntel GNU/Linux
+```
+
+When the home directory $HOME is unusually long, failures happen in the gp interface:
+
+```
+( export HOME="/tmp/123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789/"; mkdir -p $HOME; ./sage -t devel/sage/sage/schemes/elliptic_curves )
+[...]
+sage -t  "devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py"
+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).
+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).
+**********************************************************************
+File "/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py", line 526:
+    sage: E.conductor(algorithm="gp")
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1231, in run_one_test
+        self.run_one_example(test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py", line 38, in run_one_example
+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1172, in run_one_example
+        compileflags, 1) in test.globs
+      File "<doctest __main__.example_12[5]>", line 1, in <module>
+        E.conductor(algorithm="gp")###line 526:
+    sage: E.conductor(algorithm="gp")
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 552, in conductor
+        self.__conductor_gp = Integer(gp.eval('ellglobalred(ellinit(%s,0))[1]'%list(self.a_invariants())))
+      File "integer.pyx", line 681, in sage.rings.integer.Integer.__init__ (sage/rings/integer.c:6786)
+    TypeError: unable to convert x (=read("/tmp/123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789/.sage/temp/arcanis/5630//interface//tmp5647") ) to an integer
+**********************************************************************
+File "/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py", line 1430:
+    sage: E.simon_two_descent()
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1231, in run_one_test
+        self.run_one_example(test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py", line 38, in run_one_example
+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1172, in run_one_example
+        compileflags, 1) in test.globs
+      File "<doctest __main__.example_28[4]>", line 1, in <module>
+        E.simon_two_descent()###line 1430:
+    sage: E.simon_two_descent()
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 1493, in simon_two_descent
+        maxprob=maxprob, limbigprime=limbigprime)
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/gp_simon.py", line 117, in simon_two_descent
+        ans = sage_eval(v, {'Mod': _gp_mod, 'y': K.gen(0)})
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/misc/sage_eval.py", line 199, in sage_eval
+        return eval(source, sage.all.__dict__, locals)
+      File "<string>", line 0
+
+        ^
+     SyntaxError: unexpected EOF while parsing
+**********************************************************************
+[...]
+The following tests failed:
+
+
+        sage -t  "devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py"
+        sage -t  "devel/sage/sage/schemes/elliptic_curves/gp_simon.py"
+        sage -t  "devel/sage/sage/schemes/elliptic_curves/lseries_ell.py"
+        sage -t  "devel/sage/sage/schemes/elliptic_curves/sha_tate.py"
+        sage -t  "devel/sage/sage/schemes/elliptic_curves/ell_number_field.py"
+        sage -t  "devel/sage/sage/schemes/elliptic_curves/period_lattice.py"
+        sage -t  "devel/sage/sage/schemes/elliptic_curves/BSD.py"
+```
 
 Comment: 1
 
``````




---

archive/issue_comments_171722.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,72 @@\n+On Gentoo Linux x86_64:\n \n+```\n+Linux arcanis 2.6.34-gentoo-r12 #4 SMP Thu May 26 19:17:15 EEST 2011 x86_64 Intel(R) Core(TM)2 Duo CPU T5870 @ 2.00GHz GenuineIntel GNU/Linux\n+```\n+\n+When the home directory $HOME is unusually long, failures happen in the gp interface (with sage-4.8.alpha4):\n+\n+```\n+( export HOME=\"/tmp/123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789/\"; mkdir -p $HOME; ./sage -t devel/sage/sage/schemes/elliptic_curves )\n+[...]\n+sage -t  \"devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\"\n+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).\n+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).\n+**********************************************************************\n+File \"/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\", line 526:\n+    sage: E.conductor(algorithm=\"gp\")\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1231, in run_one_test\n+        self.run_one_example(test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py\", line 38, in run_one_example\n+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1172, in run_one_example\n+        compileflags, 1) in test.globs\n+      File \"<doctest __main__.example_12[5]>\", line 1, in <module>\n+        E.conductor(algorithm=\"gp\")###line 526:\n+    sage: E.conductor(algorithm=\"gp\")\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 552, in conductor\n+        self.__conductor_gp = Integer(gp.eval('ellglobalred(ellinit(%s,0))[1]'%list(self.a_invariants())))\n+      File \"integer.pyx\", line 681, in sage.rings.integer.Integer.__init__ (sage/rings/integer.c:6786)\n+    TypeError: unable to convert x (=read(\"/tmp/123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789/.sage/temp/arcanis/5630//interface//tmp5647\") ) to an integer\n+**********************************************************************\n+File \"/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\", line 1430:\n+    sage: E.simon_two_descent()\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1231, in run_one_test\n+        self.run_one_example(test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py\", line 38, in run_one_example\n+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1172, in run_one_example\n+        compileflags, 1) in test.globs\n+      File \"<doctest __main__.example_28[4]>\", line 1, in <module>\n+        E.simon_two_descent()###line 1430:\n+    sage: E.simon_two_descent()\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 1493, in simon_two_descent\n+        maxprob=maxprob, limbigprime=limbigprime)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/gp_simon.py\", line 117, in simon_two_descent\n+        ans = sage_eval(v, {'Mod': _gp_mod, 'y': K.gen(0)})\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/misc/sage_eval.py\", line 199, in sage_eval\n+        return eval(source, sage.all.__dict__, locals)\n+      File \"<string>\", line 0\n+\n+        ^\n+     SyntaxError: unexpected EOF while parsing\n+**********************************************************************\n+[...]\n+The following tests failed:\n+\n+\n+        sage -t  \"devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\"\n+        sage -t  \"devel/sage/sage/schemes/elliptic_curves/gp_simon.py\"\n+        sage -t  \"devel/sage/sage/schemes/elliptic_curves/lseries_ell.py\"\n+        sage -t  \"devel/sage/sage/schemes/elliptic_curves/sha_tate.py\"\n+        sage -t  \"devel/sage/sage/schemes/elliptic_curves/ell_number_field.py\"\n+        sage -t  \"devel/sage/sage/schemes/elliptic_curves/period_lattice.py\"\n+        sage -t  \"devel/sage/sage/schemes/elliptic_curves/BSD.py\"\n+```\n \n Comment: 1\n \n``````\n",
    "created_at": "2011-12-22T16:48:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171722",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,72 @@
+On Gentoo Linux x86_64:
 
+```
+Linux arcanis 2.6.34-gentoo-r12 #4 SMP Thu May 26 19:17:15 EEST 2011 x86_64 Intel(R) Core(TM)2 Duo CPU T5870 @ 2.00GHz GenuineIntel GNU/Linux
+```
+
+When the home directory $HOME is unusually long, failures happen in the gp interface (with sage-4.8.alpha4):
+
+```
+( export HOME="/tmp/123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789/"; mkdir -p $HOME; ./sage -t devel/sage/sage/schemes/elliptic_curves )
+[...]
+sage -t  "devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py"
+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).
+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).
+**********************************************************************
+File "/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py", line 526:
+    sage: E.conductor(algorithm="gp")
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1231, in run_one_test
+        self.run_one_example(test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py", line 38, in run_one_example
+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1172, in run_one_example
+        compileflags, 1) in test.globs
+      File "<doctest __main__.example_12[5]>", line 1, in <module>
+        E.conductor(algorithm="gp")###line 526:
+    sage: E.conductor(algorithm="gp")
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 552, in conductor
+        self.__conductor_gp = Integer(gp.eval('ellglobalred(ellinit(%s,0))[1]'%list(self.a_invariants())))
+      File "integer.pyx", line 681, in sage.rings.integer.Integer.__init__ (sage/rings/integer.c:6786)
+    TypeError: unable to convert x (=read("/tmp/123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789/.sage/temp/arcanis/5630//interface//tmp5647") ) to an integer
+**********************************************************************
+File "/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py", line 1430:
+    sage: E.simon_two_descent()
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1231, in run_one_test
+        self.run_one_example(test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py", line 38, in run_one_example
+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1172, in run_one_example
+        compileflags, 1) in test.globs
+      File "<doctest __main__.example_28[4]>", line 1, in <module>
+        E.simon_two_descent()###line 1430:
+    sage: E.simon_two_descent()
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 1493, in simon_two_descent
+        maxprob=maxprob, limbigprime=limbigprime)
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/gp_simon.py", line 117, in simon_two_descent
+        ans = sage_eval(v, {'Mod': _gp_mod, 'y': K.gen(0)})
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/misc/sage_eval.py", line 199, in sage_eval
+        return eval(source, sage.all.__dict__, locals)
+      File "<string>", line 0
+
+        ^
+     SyntaxError: unexpected EOF while parsing
+**********************************************************************
+[...]
+The following tests failed:
+
+
+        sage -t  "devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py"
+        sage -t  "devel/sage/sage/schemes/elliptic_curves/gp_simon.py"
+        sage -t  "devel/sage/sage/schemes/elliptic_curves/lseries_ell.py"
+        sage -t  "devel/sage/sage/schemes/elliptic_curves/sha_tate.py"
+        sage -t  "devel/sage/sage/schemes/elliptic_curves/ell_number_field.py"
+        sage -t  "devel/sage/sage/schemes/elliptic_curves/period_lattice.py"
+        sage -t  "devel/sage/sage/schemes/elliptic_curves/BSD.py"
+```
 
 Comment: 1
 
``````




---

archive/issue_comments_171723.json:
```json
{
    "body": "<a id='comment:5'></a>It might really be caused by #11704 then.  Need to do some more tests.",
    "created_at": "2011-12-22T16:55:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171723",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:5'></a>It might really be caused by #11704 then.  Need to do some more tests.



---

archive/issue_comments_171724.json:
```json
{
    "body": "<a id='comment:6'></a>I should clarify: I couldn't reproduce this, either before applying the patch from #11704 or after.",
    "created_at": "2011-12-22T17:19:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171724",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:6'></a>I should clarify: I couldn't reproduce this, either before applying the patch from #11704 or after.



---

archive/issue_comments_171725.json:
```json
{
    "body": "<a id='comment:7'></a>It might really be caused by #11704 + #11073 then. Need to do some more tests.",
    "created_at": "2011-12-23T16:32:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171725",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'></a>It might really be caused by #11704 + #11073 then. Need to do some more tests.



---

archive/issue_comments_171726.json:
```json
{
    "body": "<a id='comment:8'></a>Replying to [comment:7 jdemeyer]:\n> It might really be caused by #11704 + #11073 then. Need to do some more tests. \n\n\nThat combination doesn't cause me problems on sage.math: I have a copy of sage in `/scratch/palmieri/11073/sage-4.8.a4-11073` which has the patches from #11073 and its dependencies, including #11704.  Tests pass when I use the command in the ticket description.  (I produced this version of Sage with the file [http://sage.math.washington.edu/home/palmieri/misc/11073/sage-4.8.a4-11073.tar](http://sage.math.washington.edu/home/palmieri/misc/11073/sage-4.8.a4-11073.tar).)",
    "created_at": "2011-12-23T18:07:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171726",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:8'></a>Replying to [comment:7 jdemeyer]:
> It might really be caused by #11704 + #11073 then. Need to do some more tests. 


That combination doesn't cause me problems on sage.math: I have a copy of sage in `/scratch/palmieri/11073/sage-4.8.a4-11073` which has the patches from #11073 and its dependencies, including #11704.  Tests pass when I use the command in the ticket description.  (I produced this version of Sage with the file [http://sage.math.washington.edu/home/palmieri/misc/11073/sage-4.8.a4-11073.tar](http://sage.math.washington.edu/home/palmieri/misc/11073/sage-4.8.a4-11073.tar).)



---

archive/issue_comments_171727.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,72 @@\n+On Gentoo Linux x86_64:\n \n+```\n+Linux arcanis 2.6.34-gentoo-r12 #4 SMP Thu May 26 19:17:15 EEST 2011 x86_64 Intel(R) Core(TM)2 Duo CPU T5870 @ 2.00GHz GenuineIntel GNU/Linux\n+```\n+\n+When the home directory $HOME is unusually long, failures happen in the gp interface (with sage-4.8.alpha4):\n+\n+```\n+( export HOME=\"/tmp/123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789/\"; mkdir -p $HOME; ./sage -t devel/sage/sage/schemes/elliptic_curves )\n+[...]\n+sage -t  \"devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\"\n+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).\n+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).\n+**********************************************************************\n+File \"/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\", line 526:\n+    sage: E.conductor(algorithm=\"gp\")\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1231, in run_one_test\n+        self.run_one_example(test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py\", line 38, in run_one_example\n+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1172, in run_one_example\n+        compileflags, 1) in test.globs\n+      File \"<doctest __main__.example_12[5]>\", line 1, in <module>\n+        E.conductor(algorithm=\"gp\")###line 526:\n+    sage: E.conductor(algorithm=\"gp\")\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 552, in conductor\n+        self.__conductor_gp = Integer(gp.eval('ellglobalred(ellinit(%s,0))[1]'%list(self.a_invariants())))\n+      File \"integer.pyx\", line 681, in sage.rings.integer.Integer.__init__ (sage/rings/integer.c:6786)\n+    TypeError: unable to convert x (=read(\"/tmp/123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789/.sage/temp/arcanis/5630//interface//tmp5647\") ) to an integer\n+**********************************************************************\n+File \"/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\", line 1430:\n+    sage: E.simon_two_descent()\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1231, in run_one_test\n+        self.run_one_example(test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py\", line 38, in run_one_example\n+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1172, in run_one_example\n+        compileflags, 1) in test.globs\n+      File \"<doctest __main__.example_28[4]>\", line 1, in <module>\n+        E.simon_two_descent()###line 1430:\n+    sage: E.simon_two_descent()\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 1493, in simon_two_descent\n+        maxprob=maxprob, limbigprime=limbigprime)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/gp_simon.py\", line 117, in simon_two_descent\n+        ans = sage_eval(v, {'Mod': _gp_mod, 'y': K.gen(0)})\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/misc/sage_eval.py\", line 199, in sage_eval\n+        return eval(source, sage.all.__dict__, locals)\n+      File \"<string>\", line 0\n+\n+        ^\n+     SyntaxError: unexpected EOF while parsing\n+**********************************************************************\n+[...]\n+The following tests failed:\n+\n+\n+        sage -t  \"devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\"\n+        sage -t  \"devel/sage/sage/schemes/elliptic_curves/gp_simon.py\"\n+        sage -t  \"devel/sage/sage/schemes/elliptic_curves/lseries_ell.py\"\n+        sage -t  \"devel/sage/sage/schemes/elliptic_curves/sha_tate.py\"\n+        sage -t  \"devel/sage/sage/schemes/elliptic_curves/ell_number_field.py\"\n+        sage -t  \"devel/sage/sage/schemes/elliptic_curves/period_lattice.py\"\n+        sage -t  \"devel/sage/sage/schemes/elliptic_curves/BSD.py\"\n+```\n \n Comment: 1\n \n``````\n",
    "created_at": "2011-12-24T01:17:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171727",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,72 @@
+On Gentoo Linux x86_64:
 
+```
+Linux arcanis 2.6.34-gentoo-r12 #4 SMP Thu May 26 19:17:15 EEST 2011 x86_64 Intel(R) Core(TM)2 Duo CPU T5870 @ 2.00GHz GenuineIntel GNU/Linux
+```
+
+When the home directory $HOME is unusually long, failures happen in the gp interface (with sage-4.8.alpha4):
+
+```
+( export HOME="/tmp/123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789/"; mkdir -p $HOME; ./sage -t devel/sage/sage/schemes/elliptic_curves )
+[...]
+sage -t  "devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py"
+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).
+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).
+**********************************************************************
+File "/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py", line 526:
+    sage: E.conductor(algorithm="gp")
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1231, in run_one_test
+        self.run_one_example(test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py", line 38, in run_one_example
+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1172, in run_one_example
+        compileflags, 1) in test.globs
+      File "<doctest __main__.example_12[5]>", line 1, in <module>
+        E.conductor(algorithm="gp")###line 526:
+    sage: E.conductor(algorithm="gp")
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 552, in conductor
+        self.__conductor_gp = Integer(gp.eval('ellglobalred(ellinit(%s,0))[1]'%list(self.a_invariants())))
+      File "integer.pyx", line 681, in sage.rings.integer.Integer.__init__ (sage/rings/integer.c:6786)
+    TypeError: unable to convert x (=read("/tmp/123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789/.sage/temp/arcanis/5630//interface//tmp5647") ) to an integer
+**********************************************************************
+File "/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py", line 1430:
+    sage: E.simon_two_descent()
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1231, in run_one_test
+        self.run_one_example(test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py", line 38, in run_one_example
+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1172, in run_one_example
+        compileflags, 1) in test.globs
+      File "<doctest __main__.example_28[4]>", line 1, in <module>
+        E.simon_two_descent()###line 1430:
+    sage: E.simon_two_descent()
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 1493, in simon_two_descent
+        maxprob=maxprob, limbigprime=limbigprime)
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/gp_simon.py", line 117, in simon_two_descent
+        ans = sage_eval(v, {'Mod': _gp_mod, 'y': K.gen(0)})
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/misc/sage_eval.py", line 199, in sage_eval
+        return eval(source, sage.all.__dict__, locals)
+      File "<string>", line 0
+
+        ^
+     SyntaxError: unexpected EOF while parsing
+**********************************************************************
+[...]
+The following tests failed:
+
+
+        sage -t  "devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py"
+        sage -t  "devel/sage/sage/schemes/elliptic_curves/gp_simon.py"
+        sage -t  "devel/sage/sage/schemes/elliptic_curves/lseries_ell.py"
+        sage -t  "devel/sage/sage/schemes/elliptic_curves/sha_tate.py"
+        sage -t  "devel/sage/sage/schemes/elliptic_curves/ell_number_field.py"
+        sage -t  "devel/sage/sage/schemes/elliptic_curves/period_lattice.py"
+        sage -t  "devel/sage/sage/schemes/elliptic_curves/BSD.py"
+```
 
 Comment: 1
 
``````




---

archive/issue_comments_171728.json:
```json
{
    "body": "<a id='comment:10'></a>Now I also have problems reproducing it.  It must be some strange interaction between several tickets.",
    "created_at": "2011-12-24T01:25:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171728",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'></a>Now I also have problems reproducing it.  It must be some strange interaction between several tickets.



---

archive/issue_comments_171729.json:
```json
{
    "body": "<a id='comment:11'></a>Maybe it's a race condition of some sort being triggered by #11704?",
    "created_at": "2011-12-24T01:34:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171729",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:11'></a>Maybe it's a race condition of some sort being triggered by #11704?



---

archive/issue_events_032564.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-28T22:32:36Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12221#event-32564"
}
```



---

archive/issue_comments_171730.json:
```json
{
    "body": "<a id='comment:12'></a>I can't seem to reproduce this anymore...",
    "created_at": "2011-12-28T22:32:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171730",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>I can't seem to reproduce this anymore...



---

archive/issue_comments_171731.json:
```json
{
    "body": "<a id='comment:13'></a>Reproducing it again sometimes when merging #11073...  must be some race condition, which makes it an even more annoying bug.",
    "created_at": "2012-01-04T19:00:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171731",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'></a>Reproducing it again sometimes when merging #11073...  must be some race condition, which makes it an even more annoying bug.



---

archive/issue_events_032565.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-04T19:00:37Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12221#event-32565"
}
```



---

archive/issue_events_032566.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-04T19:00:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "milestone": "sage-5.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12221#event-32566"
}
```



---

archive/issue_comments_171732.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,68 @@\n+On Gentoo Linux x86_64 and on sage.math with #11073:\n \n+When the home directory $HOME is unusually long, failures happen in the gp interface (with sage-4.8.alpha6 + #11073):\n+\n+```\n+( export HOME=\"/tmp/123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789/\"; mkdir -p $HOME; ./sage -t devel/sage/sage/schemes/elliptic_curves )\n+[...]\n+sage -t  \"devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\"\n+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).\n+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).\n+**********************************************************************\n+File \"/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\", line 526:\n+    sage: E.conductor(algorithm=\"gp\")\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1231, in run_one_test\n+        self.run_one_example(test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py\", line 38, in run_one_example\n+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1172, in run_one_example\n+        compileflags, 1) in test.globs\n+      File \"<doctest __main__.example_12[5]>\", line 1, in <module>\n+        E.conductor(algorithm=\"gp\")###line 526:\n+    sage: E.conductor(algorithm=\"gp\")\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 552, in conductor\n+        self.__conductor_gp = Integer(gp.eval('ellglobalred(ellinit(%s,0))[1]'%list(self.a_invariants())))\n+      File \"integer.pyx\", line 681, in sage.rings.integer.Integer.__init__ (sage/rings/integer.c:6786)\n+    TypeError: unable to convert x (=read(\"/tmp/123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789/.sage/temp/arcanis/5630//interface//tmp5647\") ) to an integer\n+**********************************************************************\n+File \"/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\", line 1430:\n+    sage: E.simon_two_descent()\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1231, in run_one_test\n+        self.run_one_example(test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py\", line 38, in run_one_example\n+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1172, in run_one_example\n+        compileflags, 1) in test.globs\n+      File \"<doctest __main__.example_28[4]>\", line 1, in <module>\n+        E.simon_two_descent()###line 1430:\n+    sage: E.simon_two_descent()\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 1493, in simon_two_descent\n+        maxprob=maxprob, limbigprime=limbigprime)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/gp_simon.py\", line 117, in simon_two_descent\n+        ans = sage_eval(v, {'Mod': _gp_mod, 'y': K.gen(0)})\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/misc/sage_eval.py\", line 199, in sage_eval\n+        return eval(source, sage.all.__dict__, locals)\n+      File \"<string>\", line 0\n+\n+        ^\n+     SyntaxError: unexpected EOF while parsing\n+**********************************************************************\n+[...]\n+The following tests failed:\n+\n+\n+        sage -t  \"devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\"\n+        sage -t  \"devel/sage/sage/schemes/elliptic_curves/gp_simon.py\"\n+        sage -t  \"devel/sage/sage/schemes/elliptic_curves/lseries_ell.py\"\n+        sage -t  \"devel/sage/sage/schemes/elliptic_curves/sha_tate.py\"\n+        sage -t  \"devel/sage/sage/schemes/elliptic_curves/ell_number_field.py\"\n+        sage -t  \"devel/sage/sage/schemes/elliptic_curves/period_lattice.py\"\n+        sage -t  \"devel/sage/sage/schemes/elliptic_curves/BSD.py\"\n+```\n \n Comment: 1\n \n``````\n",
    "created_at": "2012-01-06T14:34:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171732",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,68 @@
+On Gentoo Linux x86_64 and on sage.math with #11073:
 
+When the home directory $HOME is unusually long, failures happen in the gp interface (with sage-4.8.alpha6 + #11073):
+
+```
+( export HOME="/tmp/123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789/"; mkdir -p $HOME; ./sage -t devel/sage/sage/schemes/elliptic_curves )
+[...]
+sage -t  "devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py"
+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).
+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).
+**********************************************************************
+File "/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py", line 526:
+    sage: E.conductor(algorithm="gp")
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1231, in run_one_test
+        self.run_one_example(test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py", line 38, in run_one_example
+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1172, in run_one_example
+        compileflags, 1) in test.globs
+      File "<doctest __main__.example_12[5]>", line 1, in <module>
+        E.conductor(algorithm="gp")###line 526:
+    sage: E.conductor(algorithm="gp")
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 552, in conductor
+        self.__conductor_gp = Integer(gp.eval('ellglobalred(ellinit(%s,0))[1]'%list(self.a_invariants())))
+      File "integer.pyx", line 681, in sage.rings.integer.Integer.__init__ (sage/rings/integer.c:6786)
+    TypeError: unable to convert x (=read("/tmp/123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789/.sage/temp/arcanis/5630//interface//tmp5647") ) to an integer
+**********************************************************************
+File "/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py", line 1430:
+    sage: E.simon_two_descent()
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1231, in run_one_test
+        self.run_one_example(test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py", line 38, in run_one_example
+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1172, in run_one_example
+        compileflags, 1) in test.globs
+      File "<doctest __main__.example_28[4]>", line 1, in <module>
+        E.simon_two_descent()###line 1430:
+    sage: E.simon_two_descent()
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 1493, in simon_two_descent
+        maxprob=maxprob, limbigprime=limbigprime)
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/gp_simon.py", line 117, in simon_two_descent
+        ans = sage_eval(v, {'Mod': _gp_mod, 'y': K.gen(0)})
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/misc/sage_eval.py", line 199, in sage_eval
+        return eval(source, sage.all.__dict__, locals)
+      File "<string>", line 0
+
+        ^
+     SyntaxError: unexpected EOF while parsing
+**********************************************************************
+[...]
+The following tests failed:
+
+
+        sage -t  "devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py"
+        sage -t  "devel/sage/sage/schemes/elliptic_curves/gp_simon.py"
+        sage -t  "devel/sage/sage/schemes/elliptic_curves/lseries_ell.py"
+        sage -t  "devel/sage/sage/schemes/elliptic_curves/sha_tate.py"
+        sage -t  "devel/sage/sage/schemes/elliptic_curves/ell_number_field.py"
+        sage -t  "devel/sage/sage/schemes/elliptic_curves/period_lattice.py"
+        sage -t  "devel/sage/sage/schemes/elliptic_curves/BSD.py"
+```
 
 Comment: 1
 
``````




---

archive/issue_comments_171733.json:
```json
{
    "body": "<a id='comment:15'></a>These errors happen much less frequently (but they still do happen) with python-2.7.  At least that's my feeling.",
    "created_at": "2012-01-10T07:22:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171733",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:15'></a>These errors happen much less frequently (but they still do happen) with python-2.7.  At least that's my feeling.



---

archive/issue_comments_171734.json:
```json
{
    "body": "<a id='comment:17'></a>Important data point: the failures seem to happen only (or at least mostly) during the first test run.  Running \"make ptest\" from a fresh install causes a lot of failures.  Running \"make ptest\" a second time gives no (or much less) failures.",
    "created_at": "2012-01-10T23:03:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171734",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'></a>Important data point: the failures seem to happen only (or at least mostly) during the first test run.  Running "make ptest" from a fresh install causes a lot of failures.  Running "make ptest" a second time gives no (or much less) failures.



---

archive/issue_comments_171735.json:
```json
{
    "body": "<a id='comment:18'></a>This observation about the \"first run\" could be because of a cold disk cache causing some race condition.",
    "created_at": "2012-01-10T23:06:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171735",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:18'></a>This observation about the "first run" could be because of a cold disk cache causing some race condition.



---

archive/issue_comments_171736.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,69 @@\n+On Gentoo Linux x86_64 and on sage.math with #11073:\n \n+With certain values of $HOME (I haven't determined which), failures happen in the gp interface (with sage-4.8.alpha6 + #11073):\n+\n+```\n+( export HOME=\"/scratch/jdemeyer/merger/sage-4.8.alpha6-remove-base/home\"; mkdir -p $HOME; ./sage -t devel/sage/sage/schemes )\n+[...]\n+sage -t  \"devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\"\n+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).\n+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).\n+**********************************************************************\n+File \"/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\", line 526:\n+    sage: E.conductor(algorithm=\"gp\")\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1231, in run_one_test\n+        self.run_one_example(test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py\", line 38, in run_one_example\n+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1172, in run_one_example\n+        compileflags, 1) in test.globs\n+      File \"<doctest __main__.example_12[5]>\", line 1, in <module>\n+        E.conductor(algorithm=\"gp\")###line 526:\n+    sage: E.conductor(algorithm=\"gp\")\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 552, in conductor\n+        self.__conductor_gp = Integer(gp.eval('ellglobalred(ellinit(%s,0))[1]'%list(self.a_invariants())))\n+      File \"integer.pyx\", line 681, in sage.rings.integer.Integer.__init__ (sage/rings/integer.c:6786)\n+    TypeError: unable to convert x (=read(\"/tmp/123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789/.sage/temp/arcanis/5630//interface//tmp5647\") ) to an integer\n+**********************************************************************\n+File \"/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\", line 1430:\n+    sage: E.simon_two_descent()\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1231, in run_one_test\n+        self.run_one_example(test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py\", line 38, in run_one_example\n+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1172, in run_one_example\n+        compileflags, 1) in test.globs\n+      File \"<doctest __main__.example_28[4]>\", line 1, in <module>\n+        E.simon_two_descent()###line 1430:\n+    sage: E.simon_two_descent()\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 1493, in simon_two_descent\n+        maxprob=maxprob, limbigprime=limbigprime)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/gp_simon.py\", line 117, in simon_two_descent\n+        ans = sage_eval(v, {'Mod': _gp_mod, 'y': K.gen(0)})\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/misc/sage_eval.py\", line 199, in sage_eval\n+        return eval(source, sage.all.__dict__, locals)\n+      File \"<string>\", line 0\n+\n+        ^\n+     SyntaxError: unexpected EOF while parsing\n+**********************************************************************\n+[...]\n+The following tests failed:\n+\n+\n+        sage -t  \"devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\"\n+        sage -t  \"devel/sage/sage/schemes/elliptic_curves/gp_simon.py\"\n+        sage -t  \"devel/sage/sage/schemes/elliptic_curves/lseries_ell.py\"\n+        sage -t  \"devel/sage/sage/schemes/elliptic_curves/sha_tate.py\"\n+        sage -t  \"devel/sage/sage/schemes/elliptic_curves/ell_number_field.py\"\n+        sage -t  \"devel/sage/sage/schemes/elliptic_curves/period_lattice.py\"\n+        sage -t  \"devel/sage/sage/schemes/elliptic_curves/BSD.py\"\n+```\n+(the list of failed tests changes every time I try this, sometimes there are no failures).\n \n Comment: 1\n \n``````\n",
    "created_at": "2012-01-11T14:06:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171736",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,69 @@
+On Gentoo Linux x86_64 and on sage.math with #11073:
 
+With certain values of $HOME (I haven't determined which), failures happen in the gp interface (with sage-4.8.alpha6 + #11073):
+
+```
+( export HOME="/scratch/jdemeyer/merger/sage-4.8.alpha6-remove-base/home"; mkdir -p $HOME; ./sage -t devel/sage/sage/schemes )
+[...]
+sage -t  "devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py"
+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).
+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).
+**********************************************************************
+File "/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py", line 526:
+    sage: E.conductor(algorithm="gp")
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1231, in run_one_test
+        self.run_one_example(test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py", line 38, in run_one_example
+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1172, in run_one_example
+        compileflags, 1) in test.globs
+      File "<doctest __main__.example_12[5]>", line 1, in <module>
+        E.conductor(algorithm="gp")###line 526:
+    sage: E.conductor(algorithm="gp")
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 552, in conductor
+        self.__conductor_gp = Integer(gp.eval('ellglobalred(ellinit(%s,0))[1]'%list(self.a_invariants())))
+      File "integer.pyx", line 681, in sage.rings.integer.Integer.__init__ (sage/rings/integer.c:6786)
+    TypeError: unable to convert x (=read("/tmp/123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789/.sage/temp/arcanis/5630//interface//tmp5647") ) to an integer
+**********************************************************************
+File "/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py", line 1430:
+    sage: E.simon_two_descent()
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1231, in run_one_test
+        self.run_one_example(test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py", line 38, in run_one_example
+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1172, in run_one_example
+        compileflags, 1) in test.globs
+      File "<doctest __main__.example_28[4]>", line 1, in <module>
+        E.simon_two_descent()###line 1430:
+    sage: E.simon_two_descent()
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 1493, in simon_two_descent
+        maxprob=maxprob, limbigprime=limbigprime)
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/gp_simon.py", line 117, in simon_two_descent
+        ans = sage_eval(v, {'Mod': _gp_mod, 'y': K.gen(0)})
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/misc/sage_eval.py", line 199, in sage_eval
+        return eval(source, sage.all.__dict__, locals)
+      File "<string>", line 0
+
+        ^
+     SyntaxError: unexpected EOF while parsing
+**********************************************************************
+[...]
+The following tests failed:
+
+
+        sage -t  "devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py"
+        sage -t  "devel/sage/sage/schemes/elliptic_curves/gp_simon.py"
+        sage -t  "devel/sage/sage/schemes/elliptic_curves/lseries_ell.py"
+        sage -t  "devel/sage/sage/schemes/elliptic_curves/sha_tate.py"
+        sage -t  "devel/sage/sage/schemes/elliptic_curves/ell_number_field.py"
+        sage -t  "devel/sage/sage/schemes/elliptic_curves/period_lattice.py"
+        sage -t  "devel/sage/sage/schemes/elliptic_curves/BSD.py"
+```
+(the list of failed tests changes every time I try this, sometimes there are no failures).
 
 Comment: 1
 
``````




---

archive/issue_comments_171737.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,69 @@\n+On Gentoo Linux x86_64 and on sage.math with #11073:\n \n+When $HOME is set to a directory inside the Sage install tree, failures sometimes happen in the gp interface (with sage-4.8.alpha6 + #11073):\n+\n+```\n+( export HOME=`pwd`/home; mkdir -p $HOME; ./sage -t devel/sage/sage/schemes )\n+[...]\n+sage -t  \"devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\"\n+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).\n+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).\n+**********************************************************************\n+File \"/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\", line 526:\n+    sage: E.conductor(algorithm=\"gp\")\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1231, in run_one_test\n+        self.run_one_example(test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py\", line 38, in run_one_example\n+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1172, in run_one_example\n+        compileflags, 1) in test.globs\n+      File \"<doctest __main__.example_12[5]>\", line 1, in <module>\n+        E.conductor(algorithm=\"gp\")###line 526:\n+    sage: E.conductor(algorithm=\"gp\")\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 552, in conductor\n+        self.__conductor_gp = Integer(gp.eval('ellglobalred(ellinit(%s,0))[1]'%list(self.a_invariants())))\n+      File \"integer.pyx\", line 681, in sage.rings.integer.Integer.__init__ (sage/rings/integer.c:6786)\n+    TypeError: unable to convert x (=read(\"/tmp/123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789/.sage/temp/arcanis/5630//interface//tmp5647\") ) to an integer\n+**********************************************************************\n+File \"/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\", line 1430:\n+    sage: E.simon_two_descent()\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1231, in run_one_test\n+        self.run_one_example(test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py\", line 38, in run_one_example\n+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1172, in run_one_example\n+        compileflags, 1) in test.globs\n+      File \"<doctest __main__.example_28[4]>\", line 1, in <module>\n+        E.simon_two_descent()###line 1430:\n+    sage: E.simon_two_descent()\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 1493, in simon_two_descent\n+        maxprob=maxprob, limbigprime=limbigprime)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/gp_simon.py\", line 117, in simon_two_descent\n+        ans = sage_eval(v, {'Mod': _gp_mod, 'y': K.gen(0)})\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/misc/sage_eval.py\", line 199, in sage_eval\n+        return eval(source, sage.all.__dict__, locals)\n+      File \"<string>\", line 0\n+\n+        ^\n+     SyntaxError: unexpected EOF while parsing\n+**********************************************************************\n+[...]\n+The following tests failed:\n+\n+\n+        sage -t  \"devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\"\n+        sage -t  \"devel/sage/sage/schemes/elliptic_curves/gp_simon.py\"\n+        sage -t  \"devel/sage/sage/schemes/elliptic_curves/lseries_ell.py\"\n+        sage -t  \"devel/sage/sage/schemes/elliptic_curves/sha_tate.py\"\n+        sage -t  \"devel/sage/sage/schemes/elliptic_curves/ell_number_field.py\"\n+        sage -t  \"devel/sage/sage/schemes/elliptic_curves/period_lattice.py\"\n+        sage -t  \"devel/sage/sage/schemes/elliptic_curves/BSD.py\"\n+```\n+(the list of failed tests changes every time I try this, sometimes there are no failures).\n \n Comment: 1\n \n``````\n",
    "created_at": "2012-01-11T14:46:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171737",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,69 @@
+On Gentoo Linux x86_64 and on sage.math with #11073:
 
+When $HOME is set to a directory inside the Sage install tree, failures sometimes happen in the gp interface (with sage-4.8.alpha6 + #11073):
+
+```
+( export HOME=`pwd`/home; mkdir -p $HOME; ./sage -t devel/sage/sage/schemes )
+[...]
+sage -t  "devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py"
+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).
+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).
+**********************************************************************
+File "/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py", line 526:
+    sage: E.conductor(algorithm="gp")
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1231, in run_one_test
+        self.run_one_example(test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py", line 38, in run_one_example
+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1172, in run_one_example
+        compileflags, 1) in test.globs
+      File "<doctest __main__.example_12[5]>", line 1, in <module>
+        E.conductor(algorithm="gp")###line 526:
+    sage: E.conductor(algorithm="gp")
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 552, in conductor
+        self.__conductor_gp = Integer(gp.eval('ellglobalred(ellinit(%s,0))[1]'%list(self.a_invariants())))
+      File "integer.pyx", line 681, in sage.rings.integer.Integer.__init__ (sage/rings/integer.c:6786)
+    TypeError: unable to convert x (=read("/tmp/123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789/.sage/temp/arcanis/5630//interface//tmp5647") ) to an integer
+**********************************************************************
+File "/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py", line 1430:
+    sage: E.simon_two_descent()
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1231, in run_one_test
+        self.run_one_example(test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py", line 38, in run_one_example
+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1172, in run_one_example
+        compileflags, 1) in test.globs
+      File "<doctest __main__.example_28[4]>", line 1, in <module>
+        E.simon_two_descent()###line 1430:
+    sage: E.simon_two_descent()
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 1493, in simon_two_descent
+        maxprob=maxprob, limbigprime=limbigprime)
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/gp_simon.py", line 117, in simon_two_descent
+        ans = sage_eval(v, {'Mod': _gp_mod, 'y': K.gen(0)})
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/misc/sage_eval.py", line 199, in sage_eval
+        return eval(source, sage.all.__dict__, locals)
+      File "<string>", line 0
+
+        ^
+     SyntaxError: unexpected EOF while parsing
+**********************************************************************
+[...]
+The following tests failed:
+
+
+        sage -t  "devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py"
+        sage -t  "devel/sage/sage/schemes/elliptic_curves/gp_simon.py"
+        sage -t  "devel/sage/sage/schemes/elliptic_curves/lseries_ell.py"
+        sage -t  "devel/sage/sage/schemes/elliptic_curves/sha_tate.py"
+        sage -t  "devel/sage/sage/schemes/elliptic_curves/ell_number_field.py"
+        sage -t  "devel/sage/sage/schemes/elliptic_curves/period_lattice.py"
+        sage -t  "devel/sage/sage/schemes/elliptic_curves/BSD.py"
+```
+(the list of failed tests changes every time I try this, sometimes there are no failures).
 
 Comment: 1
 
``````




---

archive/issue_comments_171738.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,67 @@\n+On Gentoo Linux x86_64 and on sage.math with #11073:\n \n+When $HOME is set to a directory inside the Sage install tree, failures sometimes happen in the gp interface (with sage-4.8.alpha6 + #11073):\n+\n+```\n+( export HOME=`pwd`/home; mkdir -p $HOME; ./sage -t devel/sage/sage/schemes )\n+[...]\n+sage -t  \"devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\"\n+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).\n+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).\n+**********************************************************************\n+File \"/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\", line 526:\n+    sage: E.conductor(algorithm=\"gp\")\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1231, in run_one_test\n+        self.run_one_example(test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py\", line 38, in run_one_example\n+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1172, in run_one_example\n+        compileflags, 1) in test.globs\n+      File \"<doctest __main__.example_12[5]>\", line 1, in <module>\n+        E.conductor(algorithm=\"gp\")###line 526:\n+    sage: E.conductor(algorithm=\"gp\")\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 552, in conductor\n+        self.__conductor_gp = Integer(gp.eval('ellglobalred(ellinit(%s,0))[1]'%list(self.a_invariants())))\n+      File \"integer.pyx\", line 681, in sage.rings.integer.Integer.__init__ (sage/rings/integer.c:6786)\n+    TypeError: unable to convert x (=read(\"/tmp/123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789/.sage/temp/arcanis/5630//interface//tmp5647\") ) to an integer\n+**********************************************************************\n+File \"/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\", line 1430:\n+    sage: E.simon_two_descent()\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1231, in run_one_test\n+        self.run_one_example(test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py\", line 38, in run_one_example\n+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1172, in run_one_example\n+        compileflags, 1) in test.globs\n+      File \"<doctest __main__.example_28[4]>\", line 1, in <module>\n+        E.simon_two_descent()###line 1430:\n+    sage: E.simon_two_descent()\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 1493, in simon_two_descent\n+        maxprob=maxprob, limbigprime=limbigprime)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/gp_simon.py\", line 117, in simon_two_descent\n+        ans = sage_eval(v, {'Mod': _gp_mod, 'y': K.gen(0)})\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/misc/sage_eval.py\", line 199, in sage_eval\n+        return eval(source, sage.all.__dict__, locals)\n+      File \"<string>\", line 0\n+\n+        ^\n+     SyntaxError: unexpected EOF while parsing\n+**********************************************************************\n+[...]\n+The following tests failed:\n+\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/lseries_ell.py # 1 doctests failed\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/gp_simon.py # 3 doctests failed\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/BSD.py # 3 doctests failed\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/sha_tate.py # 4 doctests failed\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py # 14 doctests failed\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/ell_number_field.py # 11 doctests failed\n+```\n+(the list of failed tests changes every time I try this, sometimes there are no failures).\n \n Comment: 1\n \n``````\n",
    "created_at": "2012-01-11T14:47:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171738",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,67 @@
+On Gentoo Linux x86_64 and on sage.math with #11073:
 
+When $HOME is set to a directory inside the Sage install tree, failures sometimes happen in the gp interface (with sage-4.8.alpha6 + #11073):
+
+```
+( export HOME=`pwd`/home; mkdir -p $HOME; ./sage -t devel/sage/sage/schemes )
+[...]
+sage -t  "devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py"
+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).
+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).
+**********************************************************************
+File "/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py", line 526:
+    sage: E.conductor(algorithm="gp")
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1231, in run_one_test
+        self.run_one_example(test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py", line 38, in run_one_example
+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1172, in run_one_example
+        compileflags, 1) in test.globs
+      File "<doctest __main__.example_12[5]>", line 1, in <module>
+        E.conductor(algorithm="gp")###line 526:
+    sage: E.conductor(algorithm="gp")
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 552, in conductor
+        self.__conductor_gp = Integer(gp.eval('ellglobalred(ellinit(%s,0))[1]'%list(self.a_invariants())))
+      File "integer.pyx", line 681, in sage.rings.integer.Integer.__init__ (sage/rings/integer.c:6786)
+    TypeError: unable to convert x (=read("/tmp/123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789/.sage/temp/arcanis/5630//interface//tmp5647") ) to an integer
+**********************************************************************
+File "/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py", line 1430:
+    sage: E.simon_two_descent()
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1231, in run_one_test
+        self.run_one_example(test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py", line 38, in run_one_example
+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1172, in run_one_example
+        compileflags, 1) in test.globs
+      File "<doctest __main__.example_28[4]>", line 1, in <module>
+        E.simon_two_descent()###line 1430:
+    sage: E.simon_two_descent()
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 1493, in simon_two_descent
+        maxprob=maxprob, limbigprime=limbigprime)
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/gp_simon.py", line 117, in simon_two_descent
+        ans = sage_eval(v, {'Mod': _gp_mod, 'y': K.gen(0)})
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/misc/sage_eval.py", line 199, in sage_eval
+        return eval(source, sage.all.__dict__, locals)
+      File "<string>", line 0
+
+        ^
+     SyntaxError: unexpected EOF while parsing
+**********************************************************************
+[...]
+The following tests failed:
+
+        sage -t  devel/sage/sage/schemes/elliptic_curves/lseries_ell.py # 1 doctests failed
+        sage -t  devel/sage/sage/schemes/elliptic_curves/gp_simon.py # 3 doctests failed
+        sage -t  devel/sage/sage/schemes/elliptic_curves/BSD.py # 3 doctests failed
+        sage -t  devel/sage/sage/schemes/elliptic_curves/sha_tate.py # 4 doctests failed
+        sage -t  devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py # 14 doctests failed
+        sage -t  devel/sage/sage/schemes/elliptic_curves/ell_number_field.py # 11 doctests failed
+```
+(the list of failed tests changes every time I try this, sometimes there are no failures).
 
 Comment: 1
 
``````




---

archive/issue_comments_171739.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,69 @@\n+On Gentoo Linux x86_64 and on sage.math:\n \n+When $DOT_SAGE (and therefore, $HOME) contains a specific number of characters in relation to the number of columns on the pseudo-terminal ($COLUMNS), failures happen.  I believe this is due to temporary filenames word-wrapping in the pseudo-terminal.\n+\n+For example, on a 138-column terminal:\n+\n+```\n+( export HOME=/mnt/usb1/scratch/jdemeyer/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx; mkdir -p $HOME; ./sage -t devel/sage/sage/schemes )\n+[...]\n+sage -t  \"devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\"\n+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).\n+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).\n+**********************************************************************\n+File \"/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\", line 526:\n+    sage: E.conductor(algorithm=\"gp\")\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1231, in run_one_test\n+        self.run_one_example(test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py\", line 38, in run_one_example\n+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1172, in run_one_example\n+        compileflags, 1) in test.globs\n+      File \"<doctest __main__.example_12[5]>\", line 1, in <module>\n+        E.conductor(algorithm=\"gp\")###line 526:\n+    sage: E.conductor(algorithm=\"gp\")\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 552, in conductor\n+        self.__conductor_gp = Integer(gp.eval('ellglobalred(ellinit(%s,0))[1]'%list(self.a_invariants())))\n+      File \"integer.pyx\", line 681, in sage.rings.integer.Integer.__init__ (sage/rings/integer.c:6786)\n+    TypeError: unable to convert x (=read(\"/tmp/123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789/.sage/temp/arcanis/5630//interface//tmp5647\") ) to an integer\n+**********************************************************************\n+File \"/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\", line 1430:\n+    sage: E.simon_two_descent()\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1231, in run_one_test\n+        self.run_one_example(test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py\", line 38, in run_one_example\n+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1172, in run_one_example\n+        compileflags, 1) in test.globs\n+      File \"<doctest __main__.example_28[4]>\", line 1, in <module>\n+        E.simon_two_descent()###line 1430:\n+    sage: E.simon_two_descent()\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 1493, in simon_two_descent\n+        maxprob=maxprob, limbigprime=limbigprime)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/gp_simon.py\", line 117, in simon_two_descent\n+        ans = sage_eval(v, {'Mod': _gp_mod, 'y': K.gen(0)})\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/misc/sage_eval.py\", line 199, in sage_eval\n+        return eval(source, sage.all.__dict__, locals)\n+      File \"<string>\", line 0\n+\n+        ^\n+     SyntaxError: unexpected EOF while parsing\n+**********************************************************************\n+[...]\n+The following tests failed:\n+\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/lseries_ell.py # 1 doctests failed\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/gp_simon.py # 3 doctests failed\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/BSD.py # 3 doctests failed\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/sha_tate.py # 4 doctests failed\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py # 14 doctests failed\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/ell_number_field.py # 11 doctests failed\n+```\n+(the list of failed tests changes every time I try this, sometimes there are no failures).\n \n Comment: 1\n \n``````\n",
    "created_at": "2012-01-12T10:41:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171739",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,69 @@
+On Gentoo Linux x86_64 and on sage.math:
 
+When $DOT_SAGE (and therefore, $HOME) contains a specific number of characters in relation to the number of columns on the pseudo-terminal ($COLUMNS), failures happen.  I believe this is due to temporary filenames word-wrapping in the pseudo-terminal.
+
+For example, on a 138-column terminal:
+
+```
+( export HOME=/mnt/usb1/scratch/jdemeyer/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx; mkdir -p $HOME; ./sage -t devel/sage/sage/schemes )
+[...]
+sage -t  "devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py"
+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).
+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).
+**********************************************************************
+File "/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py", line 526:
+    sage: E.conductor(algorithm="gp")
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1231, in run_one_test
+        self.run_one_example(test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py", line 38, in run_one_example
+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1172, in run_one_example
+        compileflags, 1) in test.globs
+      File "<doctest __main__.example_12[5]>", line 1, in <module>
+        E.conductor(algorithm="gp")###line 526:
+    sage: E.conductor(algorithm="gp")
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 552, in conductor
+        self.__conductor_gp = Integer(gp.eval('ellglobalred(ellinit(%s,0))[1]'%list(self.a_invariants())))
+      File "integer.pyx", line 681, in sage.rings.integer.Integer.__init__ (sage/rings/integer.c:6786)
+    TypeError: unable to convert x (=read("/tmp/123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789/.sage/temp/arcanis/5630//interface//tmp5647") ) to an integer
+**********************************************************************
+File "/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py", line 1430:
+    sage: E.simon_two_descent()
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1231, in run_one_test
+        self.run_one_example(test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py", line 38, in run_one_example
+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1172, in run_one_example
+        compileflags, 1) in test.globs
+      File "<doctest __main__.example_28[4]>", line 1, in <module>
+        E.simon_two_descent()###line 1430:
+    sage: E.simon_two_descent()
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 1493, in simon_two_descent
+        maxprob=maxprob, limbigprime=limbigprime)
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/gp_simon.py", line 117, in simon_two_descent
+        ans = sage_eval(v, {'Mod': _gp_mod, 'y': K.gen(0)})
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/misc/sage_eval.py", line 199, in sage_eval
+        return eval(source, sage.all.__dict__, locals)
+      File "<string>", line 0
+
+        ^
+     SyntaxError: unexpected EOF while parsing
+**********************************************************************
+[...]
+The following tests failed:
+
+        sage -t  devel/sage/sage/schemes/elliptic_curves/lseries_ell.py # 1 doctests failed
+        sage -t  devel/sage/sage/schemes/elliptic_curves/gp_simon.py # 3 doctests failed
+        sage -t  devel/sage/sage/schemes/elliptic_curves/BSD.py # 3 doctests failed
+        sage -t  devel/sage/sage/schemes/elliptic_curves/sha_tate.py # 4 doctests failed
+        sage -t  devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py # 14 doctests failed
+        sage -t  devel/sage/sage/schemes/elliptic_curves/ell_number_field.py # 11 doctests failed
+```
+(the list of failed tests changes every time I try this, sometimes there are no failures).
 
 Comment: 1
 
``````




---

archive/issue_comments_171740.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,94 @@\n+On Gentoo Linux x86_64 and on sage.math running sage-4.8.alpha6 + #11073 (but *without* #12263):\n \n+Use a \"screen\" terminal.\n+\n+When $DOT_SAGE (and therefore, $HOME) contains a specific number of characters in relation to the number of columns on the pseudo-terminal ($COLUMNS), failures happen.  I believe this is due to temporary filenames word-wrapping in the pseudo-terminal (which seems to inherit properties of the actual terminal, that's why there are failures with screen but not with xterm).\n+\n+For example, on a 138-column terminal:\n+\n+```\n+( export HOME=/mnt/usb1/scratch/jdemeyer/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx; mkdir -p $HOME; ./sage -t devel/sage/sage/schemes )\n+[...]\n+sage -t  \"devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\"\n+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).\n+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).\n+**********************************************************************\n+File \"/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\", line 526:\n+    sage: E.conductor(algorithm=\"gp\")\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1231, in run_one_test\n+        self.run_one_example(test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py\", line 38, in run_one_example\n+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1172, in run_one_example\n+        compileflags, 1) in test.globs\n+      File \"<doctest __main__.example_12[5]>\", line 1, in <module>\n+        E.conductor(algorithm=\"gp\")###line 526:\n+    sage: E.conductor(algorithm=\"gp\")\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 552, in conductor\n+        self.__conductor_gp = Integer(gp.eval('ellglobalred(ellinit(%s,0))[1]'%list(self.a_invariants())))\n+      File \"integer.pyx\", line 681, in sage.rings.integer.Integer.__init__ (sage/rings/integer.c:6786)\n+    TypeError: unable to convert x (=read(\"/tmp/123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789/.sage/temp/arcanis/5630//interface//tmp5647\") ) to an integer\n+**********************************************************************\n+File \"/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\", line 1430:\n+    sage: E.simon_two_descent()\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1231, in run_one_test\n+        self.run_one_example(test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py\", line 38, in run_one_example\n+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1172, in run_one_example\n+        compileflags, 1) in test.globs\n+      File \"<doctest __main__.example_28[4]>\", line 1, in <module>\n+        E.simon_two_descent()###line 1430:\n+    sage: E.simon_two_descent()\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 1493, in simon_two_descent\n+        maxprob=maxprob, limbigprime=limbigprime)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/gp_simon.py\", line 117, in simon_two_descent\n+        ans = sage_eval(v, {'Mod': _gp_mod, 'y': K.gen(0)})\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/misc/sage_eval.py\", line 199, in sage_eval\n+        return eval(source, sage.all.__dict__, locals)\n+      File \"<string>\", line 0\n+\n+        ^\n+     SyntaxError: unexpected EOF while parsing\n+**********************************************************************\n+[...]\n+The following tests failed:\n+\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/lseries_ell.py # 1 doctests failed\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/gp_simon.py # 3 doctests failed\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/BSD.py # 3 doctests failed\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/sha_tate.py # 4 doctests failed\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py # 14 doctests failed\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/ell_number_field.py # 11 doctests failed\n+```\n+\n+---\n+\n+How to reproduce this more artificially:\n+apply [attachment:12221_debug.patch], download [attachment:test12221.sage] and run\n+\n+```\n+$ ./sage test12221.sage\n+```\n+I see\n+\n+```\n+TERM = screen\n+18 char filename: ok\n+19 char filename: ok\n+20 char filename: ok\n+[...]\n+68 char filename: ok\n+69 char filename: ok\n+70 char filename: fail\n+71 char filename: fail\n+72 char filename: fail\n+[...]\n+```\n \n Comment: 1\n \n``````\n",
    "created_at": "2012-01-12T11:00:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171740",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,94 @@
+On Gentoo Linux x86_64 and on sage.math running sage-4.8.alpha6 + #11073 (but *without* #12263):
 
+Use a "screen" terminal.
+
+When $DOT_SAGE (and therefore, $HOME) contains a specific number of characters in relation to the number of columns on the pseudo-terminal ($COLUMNS), failures happen.  I believe this is due to temporary filenames word-wrapping in the pseudo-terminal (which seems to inherit properties of the actual terminal, that's why there are failures with screen but not with xterm).
+
+For example, on a 138-column terminal:
+
+```
+( export HOME=/mnt/usb1/scratch/jdemeyer/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx; mkdir -p $HOME; ./sage -t devel/sage/sage/schemes )
+[...]
+sage -t  "devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py"
+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).
+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).
+**********************************************************************
+File "/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py", line 526:
+    sage: E.conductor(algorithm="gp")
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1231, in run_one_test
+        self.run_one_example(test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py", line 38, in run_one_example
+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1172, in run_one_example
+        compileflags, 1) in test.globs
+      File "<doctest __main__.example_12[5]>", line 1, in <module>
+        E.conductor(algorithm="gp")###line 526:
+    sage: E.conductor(algorithm="gp")
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 552, in conductor
+        self.__conductor_gp = Integer(gp.eval('ellglobalred(ellinit(%s,0))[1]'%list(self.a_invariants())))
+      File "integer.pyx", line 681, in sage.rings.integer.Integer.__init__ (sage/rings/integer.c:6786)
+    TypeError: unable to convert x (=read("/tmp/123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789/.sage/temp/arcanis/5630//interface//tmp5647") ) to an integer
+**********************************************************************
+File "/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py", line 1430:
+    sage: E.simon_two_descent()
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1231, in run_one_test
+        self.run_one_example(test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py", line 38, in run_one_example
+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1172, in run_one_example
+        compileflags, 1) in test.globs
+      File "<doctest __main__.example_28[4]>", line 1, in <module>
+        E.simon_two_descent()###line 1430:
+    sage: E.simon_two_descent()
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 1493, in simon_two_descent
+        maxprob=maxprob, limbigprime=limbigprime)
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/gp_simon.py", line 117, in simon_two_descent
+        ans = sage_eval(v, {'Mod': _gp_mod, 'y': K.gen(0)})
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/misc/sage_eval.py", line 199, in sage_eval
+        return eval(source, sage.all.__dict__, locals)
+      File "<string>", line 0
+
+        ^
+     SyntaxError: unexpected EOF while parsing
+**********************************************************************
+[...]
+The following tests failed:
+
+        sage -t  devel/sage/sage/schemes/elliptic_curves/lseries_ell.py # 1 doctests failed
+        sage -t  devel/sage/sage/schemes/elliptic_curves/gp_simon.py # 3 doctests failed
+        sage -t  devel/sage/sage/schemes/elliptic_curves/BSD.py # 3 doctests failed
+        sage -t  devel/sage/sage/schemes/elliptic_curves/sha_tate.py # 4 doctests failed
+        sage -t  devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py # 14 doctests failed
+        sage -t  devel/sage/sage/schemes/elliptic_curves/ell_number_field.py # 11 doctests failed
+```
+
+---
+
+How to reproduce this more artificially:
+apply [attachment:12221_debug.patch], download [attachment:test12221.sage] and run
+
+```
+$ ./sage test12221.sage
+```
+I see
+
+```
+TERM = screen
+18 char filename: ok
+19 char filename: ok
+20 char filename: ok
+[...]
+68 char filename: ok
+69 char filename: ok
+70 char filename: fail
+71 char filename: fail
+72 char filename: fail
+[...]
+```
 
 Comment: 1
 
``````




---

archive/issue_comments_171741.json:
```json
{
    "body": "Attachment [12221_debug.patch](tarball://root/attachments/some-uuid/ticket12221/12221_debug.patch) by @jdemeyer created at 2012-01-12 11:01:12",
    "created_at": "2012-01-12T11:01:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171741",
    "user": "https://github.com/jdemeyer"
}
```

Attachment [12221_debug.patch](tarball://root/attachments/some-uuid/ticket12221/12221_debug.patch) by @jdemeyer created at 2012-01-12 11:01:12



---

archive/issue_comments_171742.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,96 @@\n+On Gentoo Linux x86_64 and on sage.math running sage-4.8.alpha6 + #11073 (but *without* #12263):\n \n+Use a \"screen\" terminal.\n+\n+When $DOT_SAGE (and therefore, $HOME) contains a specific number of characters in relation to the number of columns on the pseudo-terminal ($COLUMNS), failures happen.  I believe this is due to temporary filenames word-wrapping in the pseudo-terminal (which seems to inherit properties of the actual terminal, that's why there are failures with screen but not with xterm).\n+\n+For example, on a 138-column terminal:\n+\n+```\n+( export HOME=/mnt/usb1/scratch/jdemeyer/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx; mkdir -p $HOME; ./sage -t devel/sage/sage/schemes )\n+[...]\n+sage -t  \"devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\"\n+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).\n+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).\n+**********************************************************************\n+File \"/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\", line 526:\n+    sage: E.conductor(algorithm=\"gp\")\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1231, in run_one_test\n+        self.run_one_example(test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py\", line 38, in run_one_example\n+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1172, in run_one_example\n+        compileflags, 1) in test.globs\n+      File \"<doctest __main__.example_12[5]>\", line 1, in <module>\n+        E.conductor(algorithm=\"gp\")###line 526:\n+    sage: E.conductor(algorithm=\"gp\")\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 552, in conductor\n+        self.__conductor_gp = Integer(gp.eval('ellglobalred(ellinit(%s,0))[1]'%list(self.a_invariants())))\n+      File \"integer.pyx\", line 681, in sage.rings.integer.Integer.__init__ (sage/rings/integer.c:6786)\n+    TypeError: unable to convert x (=read(\"/tmp/123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789/.sage/temp/arcanis/5630//interface//tmp5647\") ) to an integer\n+**********************************************************************\n+File \"/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\", line 1430:\n+    sage: E.simon_two_descent()\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1231, in run_one_test\n+        self.run_one_example(test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py\", line 38, in run_one_example\n+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1172, in run_one_example\n+        compileflags, 1) in test.globs\n+      File \"<doctest __main__.example_28[4]>\", line 1, in <module>\n+        E.simon_two_descent()###line 1430:\n+    sage: E.simon_two_descent()\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 1493, in simon_two_descent\n+        maxprob=maxprob, limbigprime=limbigprime)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/gp_simon.py\", line 117, in simon_two_descent\n+        ans = sage_eval(v, {'Mod': _gp_mod, 'y': K.gen(0)})\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/misc/sage_eval.py\", line 199, in sage_eval\n+        return eval(source, sage.all.__dict__, locals)\n+      File \"<string>\", line 0\n+\n+        ^\n+     SyntaxError: unexpected EOF while parsing\n+**********************************************************************\n+[...]\n+The following tests failed:\n+\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/lseries_ell.py # 1 doctests failed\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/gp_simon.py # 3 doctests failed\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/BSD.py # 3 doctests failed\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/sha_tate.py # 4 doctests failed\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py # 14 doctests failed\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/ell_number_field.py # 11 doctests failed\n+```\n+\n+---\n+\n+How to reproduce this more artificially:\n+apply [attachment:12221_debug.patch].  This will send all gp pexpect commands less than 200 characters directly to gp, without using a temporary file.  We want to directly call a read() command, controlling the filename length.\n+\n+Download [attachment:test12221.sage] and run\n+\n+```\n+$ ./sage test12221.sage\n+```\n+I see\n+\n+```\n+TERM = screen\n+18 char filename: ok\n+19 char filename: ok\n+20 char filename: ok\n+[...]\n+68 char filename: ok\n+69 char filename: ok\n+70 char filename: fail\n+71 char filename: fail\n+72 char filename: fail\n+[...]\n+```\n \n Comment: 1\n \n``````\n",
    "created_at": "2012-01-12T11:05:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171742",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,96 @@
+On Gentoo Linux x86_64 and on sage.math running sage-4.8.alpha6 + #11073 (but *without* #12263):
 
+Use a "screen" terminal.
+
+When $DOT_SAGE (and therefore, $HOME) contains a specific number of characters in relation to the number of columns on the pseudo-terminal ($COLUMNS), failures happen.  I believe this is due to temporary filenames word-wrapping in the pseudo-terminal (which seems to inherit properties of the actual terminal, that's why there are failures with screen but not with xterm).
+
+For example, on a 138-column terminal:
+
+```
+( export HOME=/mnt/usb1/scratch/jdemeyer/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx; mkdir -p $HOME; ./sage -t devel/sage/sage/schemes )
+[...]
+sage -t  "devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py"
+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).
+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).
+**********************************************************************
+File "/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py", line 526:
+    sage: E.conductor(algorithm="gp")
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1231, in run_one_test
+        self.run_one_example(test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py", line 38, in run_one_example
+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1172, in run_one_example
+        compileflags, 1) in test.globs
+      File "<doctest __main__.example_12[5]>", line 1, in <module>
+        E.conductor(algorithm="gp")###line 526:
+    sage: E.conductor(algorithm="gp")
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 552, in conductor
+        self.__conductor_gp = Integer(gp.eval('ellglobalred(ellinit(%s,0))[1]'%list(self.a_invariants())))
+      File "integer.pyx", line 681, in sage.rings.integer.Integer.__init__ (sage/rings/integer.c:6786)
+    TypeError: unable to convert x (=read("/tmp/123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789/.sage/temp/arcanis/5630//interface//tmp5647") ) to an integer
+**********************************************************************
+File "/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py", line 1430:
+    sage: E.simon_two_descent()
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1231, in run_one_test
+        self.run_one_example(test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py", line 38, in run_one_example
+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1172, in run_one_example
+        compileflags, 1) in test.globs
+      File "<doctest __main__.example_28[4]>", line 1, in <module>
+        E.simon_two_descent()###line 1430:
+    sage: E.simon_two_descent()
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 1493, in simon_two_descent
+        maxprob=maxprob, limbigprime=limbigprime)
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/gp_simon.py", line 117, in simon_two_descent
+        ans = sage_eval(v, {'Mod': _gp_mod, 'y': K.gen(0)})
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/misc/sage_eval.py", line 199, in sage_eval
+        return eval(source, sage.all.__dict__, locals)
+      File "<string>", line 0
+
+        ^
+     SyntaxError: unexpected EOF while parsing
+**********************************************************************
+[...]
+The following tests failed:
+
+        sage -t  devel/sage/sage/schemes/elliptic_curves/lseries_ell.py # 1 doctests failed
+        sage -t  devel/sage/sage/schemes/elliptic_curves/gp_simon.py # 3 doctests failed
+        sage -t  devel/sage/sage/schemes/elliptic_curves/BSD.py # 3 doctests failed
+        sage -t  devel/sage/sage/schemes/elliptic_curves/sha_tate.py # 4 doctests failed
+        sage -t  devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py # 14 doctests failed
+        sage -t  devel/sage/sage/schemes/elliptic_curves/ell_number_field.py # 11 doctests failed
+```
+
+---
+
+How to reproduce this more artificially:
+apply [attachment:12221_debug.patch].  This will send all gp pexpect commands less than 200 characters directly to gp, without using a temporary file.  We want to directly call a read() command, controlling the filename length.
+
+Download [attachment:test12221.sage] and run
+
+```
+$ ./sage test12221.sage
+```
+I see
+
+```
+TERM = screen
+18 char filename: ok
+19 char filename: ok
+20 char filename: ok
+[...]
+68 char filename: ok
+69 char filename: ok
+70 char filename: fail
+71 char filename: fail
+72 char filename: fail
+[...]
+```
 
 Comment: 1
 
``````




---

archive/issue_comments_171743.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,96 @@\n+On Gentoo Linux x86_64 and on sage.math running sage-4.8.alpha6 + #11073 (but *without* #12263):\n \n+Use a \"screen\" terminal.\n+\n+When $DOT_SAGE (and therefore, $HOME) contains a specific number of characters in relation to the number of columns on the pseudo-terminal ($COLUMNS), failures happen.  I believe this is due to temporary filenames word-wrapping in the pseudo-terminal (pty).  The pty seems to inherit properties of the actual terminal, that's why there are failures with screen but not with xterm.\n+\n+For example, on a 138-column terminal:\n+\n+```\n+( export HOME=/mnt/usb1/scratch/jdemeyer/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx; mkdir -p $HOME; ./sage -t devel/sage/sage/schemes )\n+[...]\n+sage -t  \"devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\"\n+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).\n+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).\n+**********************************************************************\n+File \"/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\", line 526:\n+    sage: E.conductor(algorithm=\"gp\")\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1231, in run_one_test\n+        self.run_one_example(test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py\", line 38, in run_one_example\n+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1172, in run_one_example\n+        compileflags, 1) in test.globs\n+      File \"<doctest __main__.example_12[5]>\", line 1, in <module>\n+        E.conductor(algorithm=\"gp\")###line 526:\n+    sage: E.conductor(algorithm=\"gp\")\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 552, in conductor\n+        self.__conductor_gp = Integer(gp.eval('ellglobalred(ellinit(%s,0))[1]'%list(self.a_invariants())))\n+      File \"integer.pyx\", line 681, in sage.rings.integer.Integer.__init__ (sage/rings/integer.c:6786)\n+    TypeError: unable to convert x (=read(\"/tmp/123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789/.sage/temp/arcanis/5630//interface//tmp5647\") ) to an integer\n+**********************************************************************\n+File \"/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\", line 1430:\n+    sage: E.simon_two_descent()\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1231, in run_one_test\n+        self.run_one_example(test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py\", line 38, in run_one_example\n+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1172, in run_one_example\n+        compileflags, 1) in test.globs\n+      File \"<doctest __main__.example_28[4]>\", line 1, in <module>\n+        E.simon_two_descent()###line 1430:\n+    sage: E.simon_two_descent()\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 1493, in simon_two_descent\n+        maxprob=maxprob, limbigprime=limbigprime)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/gp_simon.py\", line 117, in simon_two_descent\n+        ans = sage_eval(v, {'Mod': _gp_mod, 'y': K.gen(0)})\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/misc/sage_eval.py\", line 199, in sage_eval\n+        return eval(source, sage.all.__dict__, locals)\n+      File \"<string>\", line 0\n+\n+        ^\n+     SyntaxError: unexpected EOF while parsing\n+**********************************************************************\n+[...]\n+The following tests failed:\n+\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/lseries_ell.py # 1 doctests failed\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/gp_simon.py # 3 doctests failed\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/BSD.py # 3 doctests failed\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/sha_tate.py # 4 doctests failed\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py # 14 doctests failed\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/ell_number_field.py # 11 doctests failed\n+```\n+\n+---\n+\n+**How to reproduce this more artificially**:\n+apply [attachment:12221_debug.patch].  This will send all gp pexpect commands less than 200 characters directly to gp, without using a temporary file.  The problem is the filename length of the temporary files used in the read() command.  This depends on `$DOT_SAGE`, on the hostname, on process IDs.\n+\n+Download [attachment:test12221.sage] and run (from within a \"screen\" session).  This will execute a read() command with increasing filename lengths:\n+\n+```\n+$ ./sage test12221.sage\n+```\n+I see\n+\n+```\n+TERM = screen\n+18 char filename: ok\n+19 char filename: ok\n+20 char filename: ok\n+[...]\n+68 char filename: ok\n+69 char filename: ok\n+70 char filename: fail\n+71 char filename: fail\n+72 char filename: fail\n+[...]\n+```\n \n Comment: 1\n \n``````\n",
    "created_at": "2012-01-12T11:11:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171743",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,96 @@
+On Gentoo Linux x86_64 and on sage.math running sage-4.8.alpha6 + #11073 (but *without* #12263):
 
+Use a "screen" terminal.
+
+When $DOT_SAGE (and therefore, $HOME) contains a specific number of characters in relation to the number of columns on the pseudo-terminal ($COLUMNS), failures happen.  I believe this is due to temporary filenames word-wrapping in the pseudo-terminal (pty).  The pty seems to inherit properties of the actual terminal, that's why there are failures with screen but not with xterm.
+
+For example, on a 138-column terminal:
+
+```
+( export HOME=/mnt/usb1/scratch/jdemeyer/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx; mkdir -p $HOME; ./sage -t devel/sage/sage/schemes )
+[...]
+sage -t  "devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py"
+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).
+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).
+**********************************************************************
+File "/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py", line 526:
+    sage: E.conductor(algorithm="gp")
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1231, in run_one_test
+        self.run_one_example(test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py", line 38, in run_one_example
+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1172, in run_one_example
+        compileflags, 1) in test.globs
+      File "<doctest __main__.example_12[5]>", line 1, in <module>
+        E.conductor(algorithm="gp")###line 526:
+    sage: E.conductor(algorithm="gp")
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 552, in conductor
+        self.__conductor_gp = Integer(gp.eval('ellglobalred(ellinit(%s,0))[1]'%list(self.a_invariants())))
+      File "integer.pyx", line 681, in sage.rings.integer.Integer.__init__ (sage/rings/integer.c:6786)
+    TypeError: unable to convert x (=read("/tmp/123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789/.sage/temp/arcanis/5630//interface//tmp5647") ) to an integer
+**********************************************************************
+File "/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py", line 1430:
+    sage: E.simon_two_descent()
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1231, in run_one_test
+        self.run_one_example(test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py", line 38, in run_one_example
+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1172, in run_one_example
+        compileflags, 1) in test.globs
+      File "<doctest __main__.example_28[4]>", line 1, in <module>
+        E.simon_two_descent()###line 1430:
+    sage: E.simon_two_descent()
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 1493, in simon_two_descent
+        maxprob=maxprob, limbigprime=limbigprime)
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/gp_simon.py", line 117, in simon_two_descent
+        ans = sage_eval(v, {'Mod': _gp_mod, 'y': K.gen(0)})
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/misc/sage_eval.py", line 199, in sage_eval
+        return eval(source, sage.all.__dict__, locals)
+      File "<string>", line 0
+
+        ^
+     SyntaxError: unexpected EOF while parsing
+**********************************************************************
+[...]
+The following tests failed:
+
+        sage -t  devel/sage/sage/schemes/elliptic_curves/lseries_ell.py # 1 doctests failed
+        sage -t  devel/sage/sage/schemes/elliptic_curves/gp_simon.py # 3 doctests failed
+        sage -t  devel/sage/sage/schemes/elliptic_curves/BSD.py # 3 doctests failed
+        sage -t  devel/sage/sage/schemes/elliptic_curves/sha_tate.py # 4 doctests failed
+        sage -t  devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py # 14 doctests failed
+        sage -t  devel/sage/sage/schemes/elliptic_curves/ell_number_field.py # 11 doctests failed
+```
+
+---
+
+**How to reproduce this more artificially**:
+apply [attachment:12221_debug.patch].  This will send all gp pexpect commands less than 200 characters directly to gp, without using a temporary file.  The problem is the filename length of the temporary files used in the read() command.  This depends on `$DOT_SAGE`, on the hostname, on process IDs.
+
+Download [attachment:test12221.sage] and run (from within a "screen" session).  This will execute a read() command with increasing filename lengths:
+
+```
+$ ./sage test12221.sage
+```
+I see
+
+```
+TERM = screen
+18 char filename: ok
+19 char filename: ok
+20 char filename: ok
+[...]
+68 char filename: ok
+69 char filename: ok
+70 char filename: fail
+71 char filename: fail
+72 char filename: fail
+[...]
+```
 
 Comment: 1
 
``````




---

archive/issue_comments_171744.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,98 @@\n+On Gentoo Linux x86_64 and on sage.math running sage-4.8.alpha6 + #11073 (but *without* #12263):\n \n+Use a \"screen\" terminal.\n+\n+When $DOT_SAGE (and therefore, $HOME) contains a specific number of characters in relation to the number of columns on the pseudo-terminal ($COLUMNS), failures happen.  I believe this is due to temporary filenames word-wrapping in the pseudo-terminal (pty).  The pty seems to inherit properties of the actual terminal, that's why there are failures with screen but not with xterm.\n+\n+For example, on a 138-column terminal:\n+\n+```\n+( export HOME=/mnt/usb1/scratch/jdemeyer/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx; mkdir -p $HOME; ./sage -t devel/sage/sage/schemes )\n+[...]\n+sage -t  \"devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\"\n+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).\n+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).\n+**********************************************************************\n+File \"/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\", line 526:\n+    sage: E.conductor(algorithm=\"gp\")\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1231, in run_one_test\n+        self.run_one_example(test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py\", line 38, in run_one_example\n+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1172, in run_one_example\n+        compileflags, 1) in test.globs\n+      File \"<doctest __main__.example_12[5]>\", line 1, in <module>\n+        E.conductor(algorithm=\"gp\")###line 526:\n+    sage: E.conductor(algorithm=\"gp\")\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 552, in conductor\n+        self.__conductor_gp = Integer(gp.eval('ellglobalred(ellinit(%s,0))[1]'%list(self.a_invariants())))\n+      File \"integer.pyx\", line 681, in sage.rings.integer.Integer.__init__ (sage/rings/integer.c:6786)\n+    TypeError: unable to convert x (=read(\"/tmp/123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789/.sage/temp/arcanis/5630//interface//tmp5647\") ) to an integer\n+**********************************************************************\n+File \"/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\", line 1430:\n+    sage: E.simon_two_descent()\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1231, in run_one_test\n+        self.run_one_example(test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py\", line 38, in run_one_example\n+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1172, in run_one_example\n+        compileflags, 1) in test.globs\n+      File \"<doctest __main__.example_28[4]>\", line 1, in <module>\n+        E.simon_two_descent()###line 1430:\n+    sage: E.simon_two_descent()\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 1493, in simon_two_descent\n+        maxprob=maxprob, limbigprime=limbigprime)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/gp_simon.py\", line 117, in simon_two_descent\n+        ans = sage_eval(v, {'Mod': _gp_mod, 'y': K.gen(0)})\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/misc/sage_eval.py\", line 199, in sage_eval\n+        return eval(source, sage.all.__dict__, locals)\n+      File \"<string>\", line 0\n+\n+        ^\n+     SyntaxError: unexpected EOF while parsing\n+**********************************************************************\n+[...]\n+The following tests failed:\n+\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/lseries_ell.py # 1 doctests failed\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/gp_simon.py # 3 doctests failed\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/BSD.py # 3 doctests failed\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/sha_tate.py # 4 doctests failed\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py # 14 doctests failed\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/ell_number_field.py # 11 doctests failed\n+```\n+\n+---\n+\n+**How to reproduce this more artificially**:\n+apply [attachment:12221_debug.patch].  This will send all gp pexpect commands less than 200 characters directly to gp, without using a temporary file.  The problem is the filename length of the temporary files used in the read() command.  This depends on `$DOT_SAGE`, on the hostname, on process IDs.\n+\n+Download [attachment:test12221.sage] and run (from within a \"screen\" session).  This will execute a read() command with increasing filename lengths:\n+\n+```\n+$ ./sage test12221.sage\n+```\n+I see\n+\n+```\n+TERM = screen\n+18 char filename: ok\n+19 char filename: ok\n+20 char filename: ok\n+[...]\n+68 char filename: ok\n+69 char filename: ok\n+70 char filename: fail\n+71 char filename: fail\n+72 char filename: fail\n+[...]\n+```\n+\n+**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/pexpect-2.0.p5.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/pexpect-2.0.p5.spkg)\n \n Comment: 1\n \n``````\n",
    "created_at": "2012-01-12T12:58:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171744",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,98 @@
+On Gentoo Linux x86_64 and on sage.math running sage-4.8.alpha6 + #11073 (but *without* #12263):
 
+Use a "screen" terminal.
+
+When $DOT_SAGE (and therefore, $HOME) contains a specific number of characters in relation to the number of columns on the pseudo-terminal ($COLUMNS), failures happen.  I believe this is due to temporary filenames word-wrapping in the pseudo-terminal (pty).  The pty seems to inherit properties of the actual terminal, that's why there are failures with screen but not with xterm.
+
+For example, on a 138-column terminal:
+
+```
+( export HOME=/mnt/usb1/scratch/jdemeyer/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx; mkdir -p $HOME; ./sage -t devel/sage/sage/schemes )
+[...]
+sage -t  "devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py"
+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).
+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).
+**********************************************************************
+File "/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py", line 526:
+    sage: E.conductor(algorithm="gp")
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1231, in run_one_test
+        self.run_one_example(test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py", line 38, in run_one_example
+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1172, in run_one_example
+        compileflags, 1) in test.globs
+      File "<doctest __main__.example_12[5]>", line 1, in <module>
+        E.conductor(algorithm="gp")###line 526:
+    sage: E.conductor(algorithm="gp")
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 552, in conductor
+        self.__conductor_gp = Integer(gp.eval('ellglobalred(ellinit(%s,0))[1]'%list(self.a_invariants())))
+      File "integer.pyx", line 681, in sage.rings.integer.Integer.__init__ (sage/rings/integer.c:6786)
+    TypeError: unable to convert x (=read("/tmp/123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789/.sage/temp/arcanis/5630//interface//tmp5647") ) to an integer
+**********************************************************************
+File "/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py", line 1430:
+    sage: E.simon_two_descent()
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1231, in run_one_test
+        self.run_one_example(test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py", line 38, in run_one_example
+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1172, in run_one_example
+        compileflags, 1) in test.globs
+      File "<doctest __main__.example_28[4]>", line 1, in <module>
+        E.simon_two_descent()###line 1430:
+    sage: E.simon_two_descent()
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 1493, in simon_two_descent
+        maxprob=maxprob, limbigprime=limbigprime)
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/gp_simon.py", line 117, in simon_two_descent
+        ans = sage_eval(v, {'Mod': _gp_mod, 'y': K.gen(0)})
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/misc/sage_eval.py", line 199, in sage_eval
+        return eval(source, sage.all.__dict__, locals)
+      File "<string>", line 0
+
+        ^
+     SyntaxError: unexpected EOF while parsing
+**********************************************************************
+[...]
+The following tests failed:
+
+        sage -t  devel/sage/sage/schemes/elliptic_curves/lseries_ell.py # 1 doctests failed
+        sage -t  devel/sage/sage/schemes/elliptic_curves/gp_simon.py # 3 doctests failed
+        sage -t  devel/sage/sage/schemes/elliptic_curves/BSD.py # 3 doctests failed
+        sage -t  devel/sage/sage/schemes/elliptic_curves/sha_tate.py # 4 doctests failed
+        sage -t  devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py # 14 doctests failed
+        sage -t  devel/sage/sage/schemes/elliptic_curves/ell_number_field.py # 11 doctests failed
+```
+
+---
+
+**How to reproduce this more artificially**:
+apply [attachment:12221_debug.patch].  This will send all gp pexpect commands less than 200 characters directly to gp, without using a temporary file.  The problem is the filename length of the temporary files used in the read() command.  This depends on `$DOT_SAGE`, on the hostname, on process IDs.
+
+Download [attachment:test12221.sage] and run (from within a "screen" session).  This will execute a read() command with increasing filename lengths:
+
+```
+$ ./sage test12221.sage
+```
+I see
+
+```
+TERM = screen
+18 char filename: ok
+19 char filename: ok
+20 char filename: ok
+[...]
+68 char filename: ok
+69 char filename: ok
+70 char filename: fail
+71 char filename: fail
+72 char filename: fail
+[...]
+```
+
+**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/pexpect-2.0.p5.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/pexpect-2.0.p5.spkg)
 
 Comment: 1
 
``````




---

archive/issue_comments_171745.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,98 @@\n+On Gentoo Linux x86_64 and on sage.math running sage-4.8.alpha6 + #11073 (but *without* #12263):\n \n+Use a \"screen\" terminal.\n+\n+When $DOT_SAGE (and therefore, $HOME) contains a specific number of characters in relation to the number of columns on the pseudo-terminal ($COLUMNS), failures happen.  I believe this is due to temporary filenames word-wrapping in the pseudo-terminal (pty).  The pty seems to inherit properties of the actual terminal, that's why there are failures with screen but not with xterm.\n+\n+For example, on a 138-column terminal:\n+\n+```\n+( export HOME=/mnt/usb1/scratch/jdemeyer/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx; mkdir -p $HOME; ./sage -t devel/sage/sage/schemes )\n+[...]\n+sage -t  \"devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\"\n+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).\n+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).\n+**********************************************************************\n+File \"/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\", line 526:\n+    sage: E.conductor(algorithm=\"gp\")\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1231, in run_one_test\n+        self.run_one_example(test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py\", line 38, in run_one_example\n+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1172, in run_one_example\n+        compileflags, 1) in test.globs\n+      File \"<doctest __main__.example_12[5]>\", line 1, in <module>\n+        E.conductor(algorithm=\"gp\")###line 526:\n+    sage: E.conductor(algorithm=\"gp\")\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 552, in conductor\n+        self.__conductor_gp = Integer(gp.eval('ellglobalred(ellinit(%s,0))[1]'%list(self.a_invariants())))\n+      File \"integer.pyx\", line 681, in sage.rings.integer.Integer.__init__ (sage/rings/integer.c:6786)\n+    TypeError: unable to convert x (=read(\"/tmp/123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789/.sage/temp/arcanis/5630//interface//tmp5647\") ) to an integer\n+**********************************************************************\n+File \"/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\", line 1430:\n+    sage: E.simon_two_descent()\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1231, in run_one_test\n+        self.run_one_example(test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py\", line 38, in run_one_example\n+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1172, in run_one_example\n+        compileflags, 1) in test.globs\n+      File \"<doctest __main__.example_28[4]>\", line 1, in <module>\n+        E.simon_two_descent()###line 1430:\n+    sage: E.simon_two_descent()\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 1493, in simon_two_descent\n+        maxprob=maxprob, limbigprime=limbigprime)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/gp_simon.py\", line 117, in simon_two_descent\n+        ans = sage_eval(v, {'Mod': _gp_mod, 'y': K.gen(0)})\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/misc/sage_eval.py\", line 199, in sage_eval\n+        return eval(source, sage.all.__dict__, locals)\n+      File \"<string>\", line 0\n+\n+        ^\n+     SyntaxError: unexpected EOF while parsing\n+**********************************************************************\n+[...]\n+The following tests failed:\n+\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/lseries_ell.py # 1 doctests failed\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/gp_simon.py # 3 doctests failed\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/BSD.py # 3 doctests failed\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/sha_tate.py # 4 doctests failed\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py # 14 doctests failed\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/ell_number_field.py # 11 doctests failed\n+```\n+\n+---\n+\n+**How to reproduce this more artificially**:\n+apply [attachment:12221_debug.patch].  This will send all gp pexpect commands less than 200 characters directly to gp, without using a temporary file.  The problem is the filename length of the temporary files used in the read() command.  This depends on `$DOT_SAGE`, on the hostname, on process IDs.\n+\n+Download [attachment:test12221.sage] and run (from within a \"screen\" session).  This will execute a read() command with increasing filename lengths:\n+\n+```\n+$ ./sage test12221.sage\n+```\n+I see\n+\n+```\n+TERM = screen\n+18 char filename: ok\n+19 char filename: ok\n+20 char filename: ok\n+[...]\n+68 char filename: ok\n+69 char filename: ok\n+70 char filename: fail\n+71 char filename: fail\n+72 char filename: fail\n+[...]\n+```\n+\n+**apply** [attachment:12221_pexpect_unset_TERM.patch] and the **spkg** [http://boxen.math.washington.edu/home/jdemeyer/spkg/pexpect-2.0.p5.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/pexpect-2.0.p5.spkg)\n \n Comment: 1\n \n``````\n",
    "created_at": "2012-01-12T13:51:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171745",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,98 @@
+On Gentoo Linux x86_64 and on sage.math running sage-4.8.alpha6 + #11073 (but *without* #12263):
 
+Use a "screen" terminal.
+
+When $DOT_SAGE (and therefore, $HOME) contains a specific number of characters in relation to the number of columns on the pseudo-terminal ($COLUMNS), failures happen.  I believe this is due to temporary filenames word-wrapping in the pseudo-terminal (pty).  The pty seems to inherit properties of the actual terminal, that's why there are failures with screen but not with xterm.
+
+For example, on a 138-column terminal:
+
+```
+( export HOME=/mnt/usb1/scratch/jdemeyer/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx; mkdir -p $HOME; ./sage -t devel/sage/sage/schemes )
+[...]
+sage -t  "devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py"
+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).
+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).
+**********************************************************************
+File "/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py", line 526:
+    sage: E.conductor(algorithm="gp")
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1231, in run_one_test
+        self.run_one_example(test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py", line 38, in run_one_example
+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1172, in run_one_example
+        compileflags, 1) in test.globs
+      File "<doctest __main__.example_12[5]>", line 1, in <module>
+        E.conductor(algorithm="gp")###line 526:
+    sage: E.conductor(algorithm="gp")
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 552, in conductor
+        self.__conductor_gp = Integer(gp.eval('ellglobalred(ellinit(%s,0))[1]'%list(self.a_invariants())))
+      File "integer.pyx", line 681, in sage.rings.integer.Integer.__init__ (sage/rings/integer.c:6786)
+    TypeError: unable to convert x (=read("/tmp/123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789/.sage/temp/arcanis/5630//interface//tmp5647") ) to an integer
+**********************************************************************
+File "/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py", line 1430:
+    sage: E.simon_two_descent()
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1231, in run_one_test
+        self.run_one_example(test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py", line 38, in run_one_example
+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1172, in run_one_example
+        compileflags, 1) in test.globs
+      File "<doctest __main__.example_28[4]>", line 1, in <module>
+        E.simon_two_descent()###line 1430:
+    sage: E.simon_two_descent()
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 1493, in simon_two_descent
+        maxprob=maxprob, limbigprime=limbigprime)
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/gp_simon.py", line 117, in simon_two_descent
+        ans = sage_eval(v, {'Mod': _gp_mod, 'y': K.gen(0)})
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/misc/sage_eval.py", line 199, in sage_eval
+        return eval(source, sage.all.__dict__, locals)
+      File "<string>", line 0
+
+        ^
+     SyntaxError: unexpected EOF while parsing
+**********************************************************************
+[...]
+The following tests failed:
+
+        sage -t  devel/sage/sage/schemes/elliptic_curves/lseries_ell.py # 1 doctests failed
+        sage -t  devel/sage/sage/schemes/elliptic_curves/gp_simon.py # 3 doctests failed
+        sage -t  devel/sage/sage/schemes/elliptic_curves/BSD.py # 3 doctests failed
+        sage -t  devel/sage/sage/schemes/elliptic_curves/sha_tate.py # 4 doctests failed
+        sage -t  devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py # 14 doctests failed
+        sage -t  devel/sage/sage/schemes/elliptic_curves/ell_number_field.py # 11 doctests failed
+```
+
+---
+
+**How to reproduce this more artificially**:
+apply [attachment:12221_debug.patch].  This will send all gp pexpect commands less than 200 characters directly to gp, without using a temporary file.  The problem is the filename length of the temporary files used in the read() command.  This depends on `$DOT_SAGE`, on the hostname, on process IDs.
+
+Download [attachment:test12221.sage] and run (from within a "screen" session).  This will execute a read() command with increasing filename lengths:
+
+```
+$ ./sage test12221.sage
+```
+I see
+
+```
+TERM = screen
+18 char filename: ok
+19 char filename: ok
+20 char filename: ok
+[...]
+68 char filename: ok
+69 char filename: ok
+70 char filename: fail
+71 char filename: fail
+72 char filename: fail
+[...]
+```
+
+**apply** [attachment:12221_pexpect_unset_TERM.patch] and the **spkg** [http://boxen.math.washington.edu/home/jdemeyer/spkg/pexpect-2.0.p5.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/pexpect-2.0.p5.spkg)
 
 Comment: 1
 
``````




---

archive/issue_comments_171746.json:
```json
{
    "body": "Changing author from \"\" to \"Jeroen Demeyer\"",
    "created_at": "2012-01-12T13:51:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171746",
    "user": "https://github.com/jdemeyer"
}
```

Changing author from "" to "Jeroen Demeyer"



---

archive/issue_comments_171747.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-01-12T13:51:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171747",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_171748.json:
```json
{
    "body": "<a id='comment:27'></a>Very experimental fix seems to work on first sight, certainly needs more testing.",
    "created_at": "2012-01-12T13:51:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171748",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:27'></a>Very experimental fix seems to work on first sight, certainly needs more testing.



---

archive/issue_comments_171749.json:
```json
{
    "body": "Changing keywords from \"gp pexpect\" to \"gp pexpect spkg\".",
    "created_at": "2012-01-12T13:51:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171749",
    "user": "https://github.com/jdemeyer"
}
```

Changing keywords from "gp pexpect" to "gp pexpect spkg".



---

archive/issue_comments_171750.json:
```json
{
    "body": "<a id='comment:29'></a>For the record, I still can't reproduce it on Fedora 16:\n\n```\n\n[vbraun@volker-laptop-two hg]$ hg qapplied\n12221_debug.patch\n[vbraun@volker-laptop-two hg]$ export TERM=screen\n[vbraun@volker-laptop-two hg]$ sage /tmp/test12221.sage \nTERM = screen\n18 char filename: ok\n19 char filename: ok\n[...\n117 char filename: ok\n```",
    "created_at": "2012-01-12T15:35:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171750",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:29'></a>For the record, I still can't reproduce it on Fedora 16:

```

[vbraun@volker-laptop-two hg]$ hg qapplied
12221_debug.patch
[vbraun@volker-laptop-two hg]$ export TERM=screen
[vbraun@volker-laptop-two hg]$ sage /tmp/test12221.sage 
TERM = screen
18 char filename: ok
19 char filename: ok
[...
117 char filename: ok
```



---

archive/issue_comments_171751.json:
```json
{
    "body": "<a id='comment:30'></a>I haven't looked at this at all, but it's probably safer to set TERM to `dumb' than unsetting it. (As also evidenced by the termcap crash in #12282)",
    "created_at": "2012-01-12T15:55:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171751",
    "user": "https://github.com/wjp"
}
```

<a id='comment:30'></a>I haven't looked at this at all, but it's probably safer to set TERM to `dumb' than unsetting it. (As also evidenced by the termcap crash in #12282)



---

archive/issue_comments_171752.json:
```json
{
    "body": "<a id='comment:31'></a>Volker: you need to actually use \"screen\", not just set TERM=screen.\n\nAnd then the obvious: is your `sage` executable the same as `./sage` and did you run `./sage -b`?",
    "created_at": "2012-01-12T15:56:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171752",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:31'></a>Volker: you need to actually use "screen", not just set TERM=screen.

And then the obvious: is your `sage` executable the same as `./sage` and did you run `./sage -b`?



---

archive/issue_comments_171753.json:
```json
{
    "body": "<a id='comment:32'></a>Replying to [comment:30 wjp]:\n> I haven't looked at this at all, but it's probably safer to set TERM to `dumb' than unsetting it. (As also evidenced by the termcap crash in #12282)\n\nI already tried this and unfortunately the error still remains with TERM=dumb.",
    "created_at": "2012-01-12T15:57:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171753",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:32'></a>Replying to [comment:30 wjp]:
> I haven't looked at this at all, but it's probably safer to set TERM to `dumb' than unsetting it. (As also evidenced by the termcap crash in #12282)

I already tried this and unfortunately the error still remains with TERM=dumb.



---

archive/issue_comments_171754.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,96 @@\n+On Gentoo Linux x86_64 and on sage.math running sage-4.8.alpha6 + #11073 (but *without* #12263):\n \n+Use a \"screen\" terminal.\n+\n+When $DOT_SAGE (and therefore, $HOME) contains a specific number of characters in relation to the number of columns on the pseudo-terminal ($COLUMNS), failures happen.  I believe this is due to temporary filenames word-wrapping in the pseudo-terminal (pty).  The pty seems to inherit properties of the actual terminal, that's why there are failures with screen but not with xterm.\n+\n+For example, on a 138-column terminal:\n+\n+```\n+( export HOME=/mnt/usb1/scratch/jdemeyer/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx; mkdir -p $HOME; ./sage -t devel/sage/sage/schemes )\n+[...]\n+sage -t  \"devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\"\n+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).\n+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).\n+**********************************************************************\n+File \"/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\", line 526:\n+    sage: E.conductor(algorithm=\"gp\")\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1231, in run_one_test\n+        self.run_one_example(test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py\", line 38, in run_one_example\n+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1172, in run_one_example\n+        compileflags, 1) in test.globs\n+      File \"<doctest __main__.example_12[5]>\", line 1, in <module>\n+        E.conductor(algorithm=\"gp\")###line 526:\n+    sage: E.conductor(algorithm=\"gp\")\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 552, in conductor\n+        self.__conductor_gp = Integer(gp.eval('ellglobalred(ellinit(%s,0))[1]'%list(self.a_invariants())))\n+      File \"integer.pyx\", line 681, in sage.rings.integer.Integer.__init__ (sage/rings/integer.c:6786)\n+    TypeError: unable to convert x (=read(\"/tmp/123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789/.sage/temp/arcanis/5630//interface//tmp5647\") ) to an integer\n+**********************************************************************\n+File \"/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\", line 1430:\n+    sage: E.simon_two_descent()\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1231, in run_one_test\n+        self.run_one_example(test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py\", line 38, in run_one_example\n+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py\", line 1172, in run_one_example\n+        compileflags, 1) in test.globs\n+      File \"<doctest __main__.example_28[4]>\", line 1, in <module>\n+        E.simon_two_descent()###line 1430:\n+    sage: E.simon_two_descent()\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 1493, in simon_two_descent\n+        maxprob=maxprob, limbigprime=limbigprime)\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/gp_simon.py\", line 117, in simon_two_descent\n+        ans = sage_eval(v, {'Mod': _gp_mod, 'y': K.gen(0)})\n+      File \"/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/misc/sage_eval.py\", line 199, in sage_eval\n+        return eval(source, sage.all.__dict__, locals)\n+      File \"<string>\", line 0\n+\n+        ^\n+     SyntaxError: unexpected EOF while parsing\n+**********************************************************************\n+[...]\n+The following tests failed:\n+\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/lseries_ell.py # 1 doctests failed\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/gp_simon.py # 3 doctests failed\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/BSD.py # 3 doctests failed\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/sha_tate.py # 4 doctests failed\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py # 14 doctests failed\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/ell_number_field.py # 11 doctests failed\n+```\n+\n+---\n+\n+**How to reproduce this more artificially**:\n+apply [attachment:12221_debug.patch].  This will send all gp pexpect commands less than 200 characters directly to gp, without using a temporary file.  The problem is the filename length of the temporary files used in the read() command.  This depends on `$DOT_SAGE`, on the hostname, on process IDs.\n+\n+Download [attachment:test12221.sage] and run (from within a \"screen\" session).  This will execute a read() command with increasing filename lengths:\n+\n+```\n+$ ./sage test12221.sage\n+```\n+I see\n+\n+```\n+TERM = screen\n+18 char filename: ok\n+19 char filename: ok\n+20 char filename: ok\n+[...]\n+68 char filename: ok\n+69 char filename: ok\n+70 char filename: fail\n+[...]\n+```\n+\n+**apply** [attachment:12221_pexpect_unset_TERM.patch] and the **spkg** [http://boxen.math.washington.edu/home/jdemeyer/spkg/pexpect-2.0.p5.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/pexpect-2.0.p5.spkg)\n \n Comment: 1\n \n``````\n",
    "created_at": "2012-01-12T15:58:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171754",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,96 @@
+On Gentoo Linux x86_64 and on sage.math running sage-4.8.alpha6 + #11073 (but *without* #12263):
 
+Use a "screen" terminal.
+
+When $DOT_SAGE (and therefore, $HOME) contains a specific number of characters in relation to the number of columns on the pseudo-terminal ($COLUMNS), failures happen.  I believe this is due to temporary filenames word-wrapping in the pseudo-terminal (pty).  The pty seems to inherit properties of the actual terminal, that's why there are failures with screen but not with xterm.
+
+For example, on a 138-column terminal:
+
+```
+( export HOME=/mnt/usb1/scratch/jdemeyer/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx; mkdir -p $HOME; ./sage -t devel/sage/sage/schemes )
+[...]
+sage -t  "devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py"
+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).
+  ***   Warning: new stack size = 1003360 (0.957 Mbytes).
+**********************************************************************
+File "/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py", line 526:
+    sage: E.conductor(algorithm="gp")
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1231, in run_one_test
+        self.run_one_example(test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py", line 38, in run_one_example
+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1172, in run_one_example
+        compileflags, 1) in test.globs
+      File "<doctest __main__.example_12[5]>", line 1, in <module>
+        E.conductor(algorithm="gp")###line 526:
+    sage: E.conductor(algorithm="gp")
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 552, in conductor
+        self.__conductor_gp = Integer(gp.eval('ellglobalred(ellinit(%s,0))[1]'%list(self.a_invariants())))
+      File "integer.pyx", line 681, in sage.rings.integer.Integer.__init__ (sage/rings/integer.c:6786)
+    TypeError: unable to convert x (=read("/tmp/123456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789/.sage/temp/arcanis/5630//interface//tmp5647") ) to an integer
+**********************************************************************
+File "/usr/local/src/sage-4.8.alpha4/devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py", line 1430:
+    sage: E.simon_two_descent()
+Exception raised:
+    Traceback (most recent call last):
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1231, in run_one_test
+        self.run_one_example(test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/sagedoctest.py", line 38, in run_one_example
+        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
+      File "/usr/local/src/sage-4.8.alpha4/local/bin/ncadoctest.py", line 1172, in run_one_example
+        compileflags, 1) in test.globs
+      File "<doctest __main__.example_28[4]>", line 1, in <module>
+        E.simon_two_descent()###line 1430:
+    sage: E.simon_two_descent()
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 1493, in simon_two_descent
+        maxprob=maxprob, limbigprime=limbigprime)
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/elliptic_curves/gp_simon.py", line 117, in simon_two_descent
+        ans = sage_eval(v, {'Mod': _gp_mod, 'y': K.gen(0)})
+      File "/usr/local/src/sage-4.8.alpha4/local/lib/python/site-packages/sage/misc/sage_eval.py", line 199, in sage_eval
+        return eval(source, sage.all.__dict__, locals)
+      File "<string>", line 0
+
+        ^
+     SyntaxError: unexpected EOF while parsing
+**********************************************************************
+[...]
+The following tests failed:
+
+        sage -t  devel/sage/sage/schemes/elliptic_curves/lseries_ell.py # 1 doctests failed
+        sage -t  devel/sage/sage/schemes/elliptic_curves/gp_simon.py # 3 doctests failed
+        sage -t  devel/sage/sage/schemes/elliptic_curves/BSD.py # 3 doctests failed
+        sage -t  devel/sage/sage/schemes/elliptic_curves/sha_tate.py # 4 doctests failed
+        sage -t  devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py # 14 doctests failed
+        sage -t  devel/sage/sage/schemes/elliptic_curves/ell_number_field.py # 11 doctests failed
+```
+
+---
+
+**How to reproduce this more artificially**:
+apply [attachment:12221_debug.patch].  This will send all gp pexpect commands less than 200 characters directly to gp, without using a temporary file.  The problem is the filename length of the temporary files used in the read() command.  This depends on `$DOT_SAGE`, on the hostname, on process IDs.
+
+Download [attachment:test12221.sage] and run (from within a "screen" session).  This will execute a read() command with increasing filename lengths:
+
+```
+$ ./sage test12221.sage
+```
+I see
+
+```
+TERM = screen
+18 char filename: ok
+19 char filename: ok
+20 char filename: ok
+[...]
+68 char filename: ok
+69 char filename: ok
+70 char filename: fail
+[...]
+```
+
+**apply** [attachment:12221_pexpect_unset_TERM.patch] and the **spkg** [http://boxen.math.washington.edu/home/jdemeyer/spkg/pexpect-2.0.p5.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/pexpect-2.0.p5.spkg)
 
 Comment: 1
 
``````




---

archive/issue_comments_171755.json:
```json
{
    "body": "Attachment [test12221.sage](tarball://root/attachments/some-uuid/ticket12221/test12221.sage) by @jdemeyer created at 2012-01-12 15:59:31",
    "created_at": "2012-01-12T15:59:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171755",
    "user": "https://github.com/jdemeyer"
}
```

Attachment [test12221.sage](tarball://root/attachments/some-uuid/ticket12221/test12221.sage) by @jdemeyer created at 2012-01-12 15:59:31



---

archive/issue_comments_171756.json:
```json
{
    "body": "<a id='comment:34'></a>I tried it under `screen` as well without problems. I also tried running the loop longer and this works until I hit the 255 byte filename limit in ext4:\n\n```\n269 char filename: ok\n270 char filename: ok\nTraceback (most recent call last):\n  File \"/tmp/test12221.py\", line 11, in <module>\n    f = open(gpfilename, \"w\")\nIOError: [Errno 36] File name too long: '/tmp/tmppzCAbE/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx.gp'\n```",
    "created_at": "2012-01-12T16:30:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171756",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:34'></a>I tried it under `screen` as well without problems. I also tried running the loop longer and this works until I hit the 255 byte filename limit in ext4:

```
269 char filename: ok
270 char filename: ok
Traceback (most recent call last):
  File "/tmp/test12221.py", line 11, in <module>
    f = open(gpfilename, "w")
IOError: [Errno 36] File name too long: '/tmp/tmppzCAbE/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx.gp'
```



---

archive/issue_comments_171757.json:
```json
{
    "body": "<a id='comment:35'></a>I can reproduce the failing test12221.sage at home in a screen session, but it goes away with TERM=dumb.\n\nOn sage.math the test doesn't fail for me, but I do get a lot of escape sequences (1b 4d, followed by a lot of 1b 5b 43, followed by a 1b 5b 4b) when the length hits 70.",
    "created_at": "2012-01-12T19:36:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171757",
    "user": "https://github.com/wjp"
}
```

<a id='comment:35'></a>I can reproduce the failing test12221.sage at home in a screen session, but it goes away with TERM=dumb.

On sage.math the test doesn't fail for me, but I do get a lot of escape sequences (1b 4d, followed by a lot of 1b 5b 43, followed by a 1b 5b 4b) when the length hits 70.



---

archive/issue_comments_171758.json:
```json
{
    "body": "<a id='comment:36'></a>With some terminal capabilities, gp is using escape sequences to \"redraw\" the current line once you send a newline after exactly the right (or wrong) input line length. This redrawing of the current line includes the prompt characters, and that triggers pexpect to output the next command prematurely, getting things out of sync.",
    "created_at": "2012-01-12T20:47:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171758",
    "user": "https://github.com/wjp"
}
```

<a id='comment:36'></a>With some terminal capabilities, gp is using escape sequences to "redraw" the current line once you send a newline after exactly the right (or wrong) input line length. This redrawing of the current line includes the prompt characters, and that triggers pexpect to output the next command prematurely, getting things out of sync.



---

archive/issue_comments_171759.json:
```json
{
    "body": "Diff for the pexpect spkg, for review only",
    "created_at": "2012-01-13T10:04:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171759",
    "user": "https://github.com/jdemeyer"
}
```

Diff for the pexpect spkg, for review only



---

archive/issue_comments_171760.json:
```json
{
    "body": "<a id='comment:37'></a>Attachment [pexpect-2.0.p4-p5.diff](tarball://root/attachments/some-uuid/ticket12221/pexpect-2.0.p4-p5.diff) by @jdemeyer created at 2012-01-15 21:58:57",
    "created_at": "2012-01-15T21:58:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171760",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:37'></a>Attachment [pexpect-2.0.p4-p5.diff](tarball://root/attachments/some-uuid/ticket12221/pexpect-2.0.p4-p5.diff) by @jdemeyer created at 2012-01-15 21:58:57



---

archive/issue_comments_171761.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-5.0.beta0\"",
    "created_at": "2012-01-15T21:58:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171761",
    "user": "https://github.com/jdemeyer"
}
```

Changing merged from "" to "sage-5.0.beta0"



---

archive/issue_comments_171762.json:
```json
{
    "body": "<a id='comment:38'></a>Well,\nI'm not too fond of mixing up the change of \"eval_using_file_cutoff\" value from 50 to 1024 (in \"12221_pexpect_unset_TERM.patch\") on the one hand, and the safer handling of the \"TERM\" envorinment variable on the other hand --- these seem orthogonal action items to me, being worth independent tickets.\n\nHowever, none of these changes makes the situation worse than before, and the cleaning up of the pexpect spkg alone is worth to have this getting in the main tree as soon as possible.\n\n\nCheers,\nGeorg",
    "created_at": "2012-01-20T13:26:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171762",
    "user": "https://trac.sagemath.org/admin/accounts/users/GeorgSWeber"
}
```

<a id='comment:38'></a>Well,
I'm not too fond of mixing up the change of "eval_using_file_cutoff" value from 50 to 1024 (in "12221_pexpect_unset_TERM.patch") on the one hand, and the safer handling of the "TERM" envorinment variable on the other hand --- these seem orthogonal action items to me, being worth independent tickets.

However, none of these changes makes the situation worse than before, and the cleaning up of the pexpect spkg alone is worth to have this getting in the main tree as soon as possible.


Cheers,
Georg



---

archive/issue_comments_171763.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-01-20T13:26:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171763",
    "user": "https://trac.sagemath.org/admin/accounts/users/GeorgSWeber"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_171764.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Georg S. Weber\"",
    "created_at": "2012-01-20T13:26:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171764",
    "user": "https://trac.sagemath.org/admin/accounts/users/GeorgSWeber"
}
```

Changing reviewer from "" to "Georg S. Weber"



---

archive/issue_comments_171765.json:
```json
{
    "body": "<a id='comment:39'></a>Replying to [comment:38 GeorgSWeber]:\n> Well,\n> I'm not too fond of mixing up the change of \"eval_using_file_cutoff\" value from 50 to 1024 (in \"12221_pexpect_unset_TERM.patch\") on the one hand, and the safer handling of the \"TERM\" envorinment variable on the other hand --- these seem orthogonal action items to me, being worth independent tickets.\n\nFair enough, see #12330.",
    "created_at": "2012-01-20T13:40:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171765",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:39'></a>Replying to [comment:38 GeorgSWeber]:
> Well,
> I'm not too fond of mixing up the change of "eval_using_file_cutoff" value from 50 to 1024 (in "12221_pexpect_unset_TERM.patch") on the one hand, and the safer handling of the "TERM" envorinment variable on the other hand --- these seem orthogonal action items to me, being worth independent tickets.

Fair enough, see #12330.



---

archive/issue_events_032567.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-20T13:43:16Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12221#event-32567"
}
```



---

archive/issue_comments_171766.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-01-20T13:43:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171766",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_171767.json:
```json
{
    "body": "<a id='comment:40'></a>Attachment [12221_pexpect_unset_TERM.patch](tarball://root/attachments/some-uuid/ticket12221/12221_pexpect_unset_TERM.patch) by @jdemeyer created at 2012-01-20 13:43:16",
    "created_at": "2012-01-20T13:43:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171767",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:40'></a>Attachment [12221_pexpect_unset_TERM.patch](tarball://root/attachments/some-uuid/ticket12221/12221_pexpect_unset_TERM.patch) by @jdemeyer created at 2012-01-20 13:43:16



---

archive/issue_comments_171768.json:
```json
{
    "body": "<a id='comment:41'></a>Georg, would you mind reviewing #12330 then?",
    "created_at": "2012-01-20T13:43:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12221#issuecomment-171768",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:41'></a>Georg, would you mind reviewing #12330 then?
