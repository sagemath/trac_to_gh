# Issue 12806: upgrade of spkg networkx-1.2.p2 to 1.6

archive/issues_012634.json:
```json
{
    "assignees": [
        "https://github.com/jasongrout",
        "https://github.com/nathanncohen",
        "https://github.com/rlmill"
    ],
    "body": "When upgrading the networkx package to 1.6, there arise a lot of doctest errors, see discussion on [sage-devel](http://groups.google.com/group/sage-devel/browse_thread/thread/60e2704e68cad4f4).\nThis ticket should contain everything that is necessary to do so.\n\nTo get the doctests passing, the following modifications have been made:\n1. Fixed the calls in `graph.py` to conform to the new API for `betweennness_centrality`. Also exposed the new options.\n2. Failing doctest in `digraph.py` was shocasing a bug that isn't there anymore. Fixed and documented it, and exposed the previously offending implementation to sage\n3. Two failures in `graph_generators.py` were due to changes in randomized methods, so just changed the tests to conform to the new output, the rest were due to a bad-parameter case that was used to raise an exception but now degenerates gracefully. Fixed the corresponding doctests to account for that.\n4. Failures in `graph_generic.py` were due to a change in the output of clustering coefficients for weighted graphs. Added an optional parameter to use the new output, implemented the old behaviour as it was in NetworkX 1.2, and set the old behaviour to default with a deprecation warning. \n\nTo review this ticket:\n1. Install [this spkg](http://www.math.tugraz.at/~krenn/whatever/networkx-1.6.spkg)\n2. Apply [attachment: trac_12806_doctest_fixes.patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806_doctest_fixes.patch.gz), [attachment: trac_12806.reviewer.patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806.reviewer.patch.gz) and [attachment: trac_12806-docbuild-and-links-alt.patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806-docbuild-and-links-alt.patch.gz)\n\nCC:  @kini @kiwifb @sagetrac-brunellus @nathanncohen\n\nKeywords: **spkg networkx graphs**\n\nReviewer: **Keshav Kini, Karl-Dieter Crisman**\n\nAuthor: **Daniel Krenn, Javier L\u00f3pez Pe\u00f1a**\n\nMerged: **sage-5.2.beta1**\n\nComponent: **graph theory**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/12806_\n\n",
    "closed_at": "2012-07-07T22:30:05Z",
    "created_at": "2012-04-03T23:15:36Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "upgrade of spkg networkx-1.2.p2 to 1.6",
    "type": "issue",
    "updated_at": "2012-07-07T22:30:05Z",
    "url": "https://github.com/sagemath/sage/issues/12806",
    "user": "https://github.com/dkrenn"
}
```
When upgrading the networkx package to 1.6, there arise a lot of doctest errors, see discussion on [sage-devel](http://groups.google.com/group/sage-devel/browse_thread/thread/60e2704e68cad4f4).
This ticket should contain everything that is necessary to do so.

To get the doctests passing, the following modifications have been made:
1. Fixed the calls in `graph.py` to conform to the new API for `betweennness_centrality`. Also exposed the new options.
2. Failing doctest in `digraph.py` was shocasing a bug that isn't there anymore. Fixed and documented it, and exposed the previously offending implementation to sage
3. Two failures in `graph_generators.py` were due to changes in randomized methods, so just changed the tests to conform to the new output, the rest were due to a bad-parameter case that was used to raise an exception but now degenerates gracefully. Fixed the corresponding doctests to account for that.
4. Failures in `graph_generic.py` were due to a change in the output of clustering coefficients for weighted graphs. Added an optional parameter to use the new output, implemented the old behaviour as it was in NetworkX 1.2, and set the old behaviour to default with a deprecation warning. 

To review this ticket:
1. Install [this spkg](http://www.math.tugraz.at/~krenn/whatever/networkx-1.6.spkg)
2. Apply [attachment: trac_12806_doctest_fixes.patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806_doctest_fixes.patch.gz), [attachment: trac_12806.reviewer.patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806.reviewer.patch.gz) and [attachment: trac_12806-docbuild-and-links-alt.patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806-docbuild-and-links-alt.patch.gz)

CC:  @kini @kiwifb @sagetrac-brunellus @nathanncohen

Keywords: **spkg networkx graphs**

Reviewer: **Keshav Kini, Karl-Dieter Crisman**

Author: **Daniel Krenn, Javier López Peña**

Merged: **sage-5.2.beta1**

Component: **graph theory**

_Issue created by migration from https://trac.sagemath.org/ticket/12806_





---

archive/issue_events_174792.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2012-04-03T23:15:36Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "milestone_number": null,
    "milestone_title": "sage-5.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12806#event-174792"
}
```



---

archive/issue_events_174793.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2012-04-03T23:15:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12806#event-174793"
}
```



---

archive/issue_events_174794.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2012-04-03T23:15:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12806#event-174794"
}
```



---

archive/issue_events_174795.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2012-04-03T23:15:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12806#event-174795"
}
```



---

archive/issue_events_174796.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2012-04-03T23:15:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12806#event-174796"
}
```



---

archive/issue_events_174797.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2012-04-03T23:15:36Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "subject": "https://github.com/dkrenn",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12806#event-174797"
}
```



---

archive/issue_events_174798.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-04-03T23:15:36Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "subject": "https://github.com/dkrenn",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12806#event-174798"
}
```



---

archive/issue_events_174799.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2012-04-03T23:15:36Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "subject": "https://github.com/dkrenn",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12806#event-174799"
}
```



---

archive/issue_comments_143766.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nI made a package networkx-1.6, which is available [here](http://www.math.tugraz.at/~krenn/whatever/networkx-1.6.spkg). \n\nThere are a lot of doctests failing in sage.graphs.",
    "created_at": "2012-04-03T23:18:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-143766",
    "user": "https://github.com/dkrenn"
}
```

<div id="comment:1" align="right">comment:1</div>

I made a package networkx-1.6, which is available [here](http://www.math.tugraz.at/~krenn/whatever/networkx-1.6.spkg). 

There are a lot of doctests failing in sage.graphs.



---

archive/issue_comments_143767.json:
```json
{
    "body": "Author: **Daniel Krenn**",
    "created_at": "2012-04-03T23:18:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-143767",
    "user": "https://github.com/dkrenn"
}
```

Author: **Daniel Krenn**



---

archive/issue_comments_143768.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nThe failing tests in graph.py are due to an API change in the betweenness_centrality function.\nThey get fixed by replacing\n\n```\n    return networkx.betweenness_centrality(self.networkx_graph(copy=False), normalized)\n```\nin line 3252 of SAGE_ROOT/devel/sage-main/sage/graphs/graph.py by\n\n```\n    return networkx.betweenness_centrality(self.networkx_graph(copy=False), normalized = normalized)\n```\nI will take a look at the rest of the failing tests tomorrow and write a patch.",
    "created_at": "2012-06-13T16:44:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-143768",
    "user": "https://github.com/sagetrac-jlopez"
}
```

<div id="comment:5" align="right">comment:5</div>

The failing tests in graph.py are due to an API change in the betweenness_centrality function.
They get fixed by replacing

```
    return networkx.betweenness_centrality(self.networkx_graph(copy=False), normalized)
```
in line 3252 of SAGE_ROOT/devel/sage-main/sage/graphs/graph.py by

```
    return networkx.betweenness_centrality(self.networkx_graph(copy=False), normalized = normalized)
```
I will take a look at the rest of the failing tests tomorrow and write a patch.



---

archive/issue_comments_143769.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nThe failing test in digraph.py is an improvement. In older versions of NetworkX `topological_sort_recursive` had a problem that has since been sorted out. The failing test was showcasing a bug that is not there anymore. This is also good news since we can also expose the recursive implementation of topological sorts in sage.",
    "created_at": "2012-06-14T10:31:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-143769",
    "user": "https://github.com/sagetrac-jlopez"
}
```

<div id="comment:6" align="right">comment:6</div>

The failing test in digraph.py is an improvement. In older versions of NetworkX `topological_sort_recursive` had a problem that has since been sorted out. The failing test was showcasing a bug that is not there anymore. This is also good news since we can also expose the recursive implementation of topological sorts in sage.



---

archive/issue_comments_143770.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nAll but two of the failing tests in `graph_generators.py` are due to extreme cases of balanced trees (degree 1, height 0), that didn't use to be allowed before and now degenerate gracefully. So this problem gets sorted out just by removing the offending doctests. As a nice side-effect, the offending tests took most of the testing time before. After removing them time for running the tests in `graph_generators.py` drops for me from 357s to 18s.",
    "created_at": "2012-06-14T11:57:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-143770",
    "user": "https://github.com/sagetrac-jlopez"
}
```

<div id="comment:7" align="right">comment:7</div>

All but two of the failing tests in `graph_generators.py` are due to extreme cases of balanced trees (degree 1, height 0), that didn't use to be allowed before and now degenerate gracefully. So this problem gets sorted out just by removing the offending doctests. As a nice side-effect, the offending tests took most of the testing time before. After removing them time for running the tests in `graph_generators.py` drops for me from 357s to 18s.



---

archive/issue_comments_143771.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nThe two remaining doctests in `graph_generators.py` are due to changes in two randomized methods: a change in `networkx.powerlaw_cluster_graph` from using `random.random` to `_random_subset` and a rewriting of the random method `expected_degree_graph`. Since the functions called in the doctests have a randomized nature it is not unreasonable to expect the results to change after the randomized function is rewritten. Unless somebody complains I will just update the tests to the results with the new methods.",
    "created_at": "2012-06-14T13:44:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-143771",
    "user": "https://github.com/sagetrac-jlopez"
}
```

<div id="comment:8" align="right">comment:8</div>

The two remaining doctests in `graph_generators.py` are due to changes in two randomized methods: a change in `networkx.powerlaw_cluster_graph` from using `random.random` to `_random_subset` and a rewriting of the random method `expected_degree_graph`. Since the functions called in the doctests have a randomized nature it is not unreasonable to expect the results to change after the randomized function is rewritten. Unless somebody complains I will just update the tests to the results with the new methods.



---

archive/issue_comments_143772.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nAttachment: **[trac_12806_doctest_fixes.patch.gz](https://github.com/sagemath/sage/files/ticket12806/trac_12806_doctest_fixes.patch.gz)**\n\nAdded a patch with the necessary changes for the doctests. All tests pass in my system. To review this patch you need to install the spkg by Daniel Krenn in the first comment and then apply the patch.",
    "created_at": "2012-06-14T16:20:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-143772",
    "user": "https://github.com/sagetrac-jlopez"
}
```

<div id="comment:10" align="right">comment:10</div>

Attachment: **[trac_12806_doctest_fixes.patch.gz](https://github.com/sagemath/sage/files/ticket12806/trac_12806_doctest_fixes.patch.gz)**

Added a patch with the necessary changes for the doctests. All tests pass in my system. To review this patch you need to install the spkg by Daniel Krenn in the first comment and then apply the patch.



---

archive/issue_comments_143773.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,12 @@\n When upgrading the networkx package to 1.6, there arise a lot of doctest errors, see discussion on [sage-devel](http://groups.google.com/group/sage-devel/browse_thread/thread/60e2704e68cad4f4).\n This ticket should contain everything that is necessary to do so.\n+\n+To get the doctests passing, the following modifications have been made:\n+1. Fixed the calls in `graph.py` to conform to the new API for `betweennness_centrality`. Also exposed the new options.\n+2. Failing doctest in `digraph.py` was shocasing a bug that isn't there anymore. Fixed and documented it, and exposed the previously offending implementation to sage\n+3. Two failures in `graph_generators.py` were due to changes in randomized methods, so just changed the tests to conform to the new output, the rest were due to a bad-parameter case that was used to raise an exception but now degenerates gracefully. Fixed the corresponding doctests to account for that.\n+4. Failures in `graph_generic.py` were due to a change in the output of clustering coefficients for weighted graphs. Added an optional parameter to use the new output, implemented the old behaviour as it was in NetworkX 1.2, and set the old behaviour to default with a deprecation warning. \n+\n+To review this ticket:\n+1. Install [this spkg](http://www.math.tugraz.at/~krenn/whatever/networkx-1.6.spkg)\n+2. Apply [this patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806_doctest_fixes.patch.gz)\n``````\n",
    "created_at": "2012-06-14T16:35:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-143773",
    "user": "https://github.com/sagetrac-jlopez"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,12 @@
 When upgrading the networkx package to 1.6, there arise a lot of doctest errors, see discussion on [sage-devel](http://groups.google.com/group/sage-devel/browse_thread/thread/60e2704e68cad4f4).
 This ticket should contain everything that is necessary to do so.
+
+To get the doctests passing, the following modifications have been made:
+1. Fixed the calls in `graph.py` to conform to the new API for `betweennness_centrality`. Also exposed the new options.
+2. Failing doctest in `digraph.py` was shocasing a bug that isn't there anymore. Fixed and documented it, and exposed the previously offending implementation to sage
+3. Two failures in `graph_generators.py` were due to changes in randomized methods, so just changed the tests to conform to the new output, the rest were due to a bad-parameter case that was used to raise an exception but now degenerates gracefully. Fixed the corresponding doctests to account for that.
+4. Failures in `graph_generic.py` were due to a change in the output of clustering coefficients for weighted graphs. Added an optional parameter to use the new output, implemented the old behaviour as it was in NetworkX 1.2, and set the old behaviour to default with a deprecation warning. 
+
+To review this ticket:
+1. Install [this spkg](http://www.math.tugraz.at/~krenn/whatever/networkx-1.6.spkg)
+2. Apply [this patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806_doctest_fixes.patch.gz)
``````




---

archive/issue_comments_143774.json:
```json
{
    "body": "Changed author from **Daniel Krenn** to **Daniel Krenn, Javier L\u00f3pez Pe\u00f1a**",
    "created_at": "2012-06-14T16:35:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-143774",
    "user": "https://github.com/sagetrac-jlopez"
}
```

Changed author from **Daniel Krenn** to **Daniel Krenn, Javier López Peña**



---

archive/issue_events_174800.json:
```json
{
    "actor": "https://github.com/sagetrac-jlopez",
    "created_at": "2012-06-14T16:35:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12806#event-174800"
}
```



---

archive/issue_comments_143775.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI think the name (and commit message) of the patch is kind of misleading since you are actually changing code and not just fixing doctests.\n\nAnyway, the code looks good - I'm running `make ptestlong` just to make sure.",
    "created_at": "2012-06-14T16:58:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-143775",
    "user": "https://github.com/kini"
}
```

<div id="comment:12" align="right">comment:12</div>

I think the name (and commit message) of the patch is kind of misleading since you are actually changing code and not just fixing doctests.

Anyway, the code looks good - I'm running `make ptestlong` just to make sure.



---

archive/issue_comments_143776.json:
```json
{
    "body": "apply to $SAGE_ROOT/devel/sage",
    "created_at": "2012-06-14T20:42:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-143776",
    "user": "https://github.com/kini"
}
```

apply to $SAGE_ROOT/devel/sage



---

archive/issue_comments_143777.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nAttachment: **[trac_12806.reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket12806/trac_12806.reviewer.patch.gz)**\n\nI fixed a doctest that was failing (deprecation warnings only appear once per session). I also took the liberty of fixing formatting and trailing whitespace in the functions you touched :)\n\npatchbot: apply trac_12806_doctest_fixes.patch trac_12806.reviewer.patch",
    "created_at": "2012-06-14T20:45:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-143777",
    "user": "https://github.com/kini"
}
```

<div id="comment:13" align="right">comment:13</div>

Attachment: **[trac_12806.reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket12806/trac_12806.reviewer.patch.gz)**

I fixed a doctest that was failing (deprecation warnings only appear once per session). I also took the liberty of fixing formatting and trailing whitespace in the functions you touched :)

patchbot: apply trac_12806_doctest_fixes.patch trac_12806.reviewer.patch



---

archive/issue_comments_143778.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,4 +9,4 @@\n \n To review this ticket:\n 1. Install [this spkg](http://www.math.tugraz.at/~krenn/whatever/networkx-1.6.spkg)\n-2. Apply [this patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806_doctest_fixes.patch.gz)\n+2. Apply [this patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806_doctest_fixes.patch.gz) and [this patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806.reviewer.patch.gz)\n``````\n",
    "created_at": "2012-06-14T20:47:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-143778",
    "user": "https://github.com/kini"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,4 +9,4 @@
 
 To review this ticket:
 1. Install [this spkg](http://www.math.tugraz.at/~krenn/whatever/networkx-1.6.spkg)
-2. Apply [this patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806_doctest_fixes.patch.gz)
+2. Apply [this patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806_doctest_fixes.patch.gz) and [this patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806.reviewer.patch.gz)
``````




---

archive/issue_comments_143779.json:
```json
{
    "body": "Reviewer: **Keshav Kini**",
    "created_at": "2012-06-14T20:47:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-143779",
    "user": "https://github.com/kini"
}
```

Reviewer: **Keshav Kini**



---

archive/issue_comments_143780.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nIf you agree with the reviewer patch, I'll set this to positive review.",
    "created_at": "2012-06-14T20:47:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-143780",
    "user": "https://github.com/kini"
}
```

<div id="comment:15" align="right">comment:15</div>

If you agree with the reviewer patch, I'll set this to positive review.



---

archive/issue_events_174801.json:
```json
{
    "actor": "https://github.com/sagetrac-jlopez",
    "created_at": "2012-06-15T08:22:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12806#event-174801"
}
```



---

archive/issue_events_174802.json:
```json
{
    "actor": "https://github.com/sagetrac-jlopez",
    "created_at": "2012-06-15T08:22:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12806#event-174802"
}
```



---

archive/issue_comments_143781.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nThanks for the prompt response, Keshav! The reviewer patch looks good to me, so I guess we can consider this reviewed!\n\nNow it is time for all the graph people to start doing cool stuff with all the great functionalities of NetworkX we have been missing out! :-D",
    "created_at": "2012-06-15T08:22:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-143781",
    "user": "https://github.com/sagetrac-jlopez"
}
```

<div id="comment:16" align="right">comment:16</div>

Thanks for the prompt response, Keshav! The reviewer patch looks good to me, so I guess we can consider this reviewed!

Now it is time for all the graph people to start doing cool stuff with all the great functionalities of NetworkX we have been missing out! :-D



---

archive/issue_events_174803.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-06-18T13:33:45Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "milestone_number": null,
    "milestone_title": "sage-5.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12806#event-174803"
}
```



---

archive/issue_events_174804.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-06-18T13:33:45Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "milestone_number": null,
    "milestone_title": "sage-5.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12806#event-174804"
}
```



---

archive/issue_events_174805.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-06-28T11:41:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12806#event-174805"
}
```



---

archive/issue_events_174806.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-06-28T11:41:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12806#event-174806"
}
```



---

archive/issue_comments_143782.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nThe documentation doesn't build correctly.  I've lost the exact warning/error messages though.",
    "created_at": "2012-06-28T11:41:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-143782",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:18" align="right">comment:18</div>

The documentation doesn't build correctly.  I've lost the exact warning/error messages though.



---

archive/issue_events_174807.json:
```json
{
    "actor": "https://github.com/sagetrac-jlopez",
    "created_at": "2012-07-03T12:05:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12806#event-174807"
}
```



---

archive/issue_events_174808.json:
```json
{
    "actor": "https://github.com/sagetrac-jlopez",
    "created_at": "2012-07-03T12:05:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12806#event-174808"
}
```



---

archive/issue_comments_143783.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nI think the documentation building problem is fixed; `sage --docbuild reference pdf` gives me no errors. Needs review just for the docbuild patch.",
    "created_at": "2012-07-03T12:05:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-143783",
    "user": "https://github.com/sagetrac-jlopez"
}
```

<div id="comment:19" align="right">comment:19</div>

I think the documentation building problem is fixed; `sage --docbuild reference pdf` gives me no errors. Needs review just for the docbuild patch.



---

archive/issue_comments_143784.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,4 +9,4 @@\n \n To review this ticket:\n 1. Install [this spkg](http://www.math.tugraz.at/~krenn/whatever/networkx-1.6.spkg)\n-2. Apply [this patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806_doctest_fixes.patch.gz) and [this patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806.reviewer.patch.gz)\n+2. Apply [this patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806_doctest_fixes.patch.gz), [this patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806.reviewer.patch.gz) and [this patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806_docbuild_fix.patch.gz)\n``````\n",
    "created_at": "2012-07-03T12:05:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-143784",
    "user": "https://github.com/sagetrac-jlopez"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,4 +9,4 @@
 
 To review this ticket:
 1. Install [this spkg](http://www.math.tugraz.at/~krenn/whatever/networkx-1.6.spkg)
-2. Apply [this patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806_doctest_fixes.patch.gz) and [this patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806.reviewer.patch.gz)
+2. Apply [this patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806_doctest_fixes.patch.gz), [this patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806.reviewer.patch.gz) and [this patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806_docbuild_fix.patch.gz)
``````




---

archive/issue_comments_143785.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\npatchbot: apply trac_12806_doctest_fixes.patch trac_12806.reviewer.patch trac_12806_docbuild_fix.patch",
    "created_at": "2012-07-03T15:22:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-143785",
    "user": "https://github.com/sagetrac-jlopez"
}
```

<div id="comment:20" align="right">comment:20</div>

patchbot: apply trac_12806_doctest_fixes.patch trac_12806.reviewer.patch trac_12806_docbuild_fix.patch



---

archive/issue_comments_143786.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nI'm not sure what you did, but the third patch does not apply - pretty obviously, it is not based on the reviewer patch.  Needs work.  I may put something together quickly for this.",
    "created_at": "2012-07-04T13:37:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-143786",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:21" align="right">comment:21</div>

I'm not sure what you did, but the third patch does not apply - pretty obviously, it is not based on the reviewer patch.  Needs work.  I may put something together quickly for this.



---

archive/issue_comments_143787.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nThere were a few other build errors, and incorrect linking syntax.  I'll fix these.\n\nAlso, is \n\n```\nequivalent to ``weight = weight``\n```\nsupposed to be\n\n```\nequivalent to ``weight = 'weight'``\n```\nsince weight takes a boolean or a string?",
    "created_at": "2012-07-04T13:50:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-143787",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:22" align="right">comment:22</div>

There were a few other build errors, and incorrect linking syntax.  I'll fix these.

Also, is 

```
equivalent to ``weight = weight``
```
supposed to be

```
equivalent to ``weight = 'weight'``
```
since weight takes a boolean or a string?



---

archive/issue_comments_143788.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nThanks for jumping in!\n\nI must have messed up my patch queue at some stage. I am building a clean version of sage right now, will made a new patch on top of it if you don't beat me to it.\n\nReplying to [@kcrisman](#comment%3A22):\n> Also, is \n> \n> ```\n> equivalent to ``weight = weight``\n> ```\n> supposed to be\n> \n> ```\n> equivalent to ``weight = 'weight'``\n> ```\n> since weight takes a boolean or a string?\n\nThat's right, nice catch.\nThanks again for your help!",
    "created_at": "2012-07-04T14:18:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-143788",
    "user": "https://github.com/sagetrac-jlopez"
}
```

<div id="comment:23" align="right">comment:23</div>

Thanks for jumping in!

I must have messed up my patch queue at some stage. I am building a clean version of sage right now, will made a new patch on top of it if you don't beat me to it.

Replying to [@kcrisman](#comment%3A22):
> Also, is 
> 
> ```
> equivalent to ``weight = weight``
> ```
> supposed to be
> 
> ```
> equivalent to ``weight = 'weight'``
> ```
> since weight takes a boolean or a string?

That's right, nice catch.
Thanks again for your help!



---

archive/issue_comments_143789.json:
```json
{
    "body": "Attachment: **[trac_12806-docbuild-and-links-alt.patch.gz](https://github.com/sagemath/sage/files/ticket12806/trac_12806-docbuild-and-links-alt.patch.gz)**\n\napply if weight='weight'",
    "created_at": "2012-07-04T14:32:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-143789",
    "user": "https://github.com/kcrisman"
}
```

Attachment: **[trac_12806-docbuild-and-links-alt.patch.gz](https://github.com/sagemath/sage/files/ticket12806/trac_12806-docbuild-and-links-alt.patch.gz)**

apply if weight='weight'



---

archive/issue_comments_143790.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,4 +9,4 @@\n \n To review this ticket:\n 1. Install [this spkg](http://www.math.tugraz.at/~krenn/whatever/networkx-1.6.spkg)\n-2. Apply [this patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806_doctest_fixes.patch.gz), [this patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806.reviewer.patch.gz) and [this patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806_docbuild_fix.patch.gz)\n+2. Apply [attachment: trac_12806_doctest_fixes.patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806_doctest_fixes.patch.gz), [attachment: trac_12806.reviewer.patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806.reviewer.patch.gz) and [attachment: trac_12806-docbuild-and-links-alt.patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806-docbuild-and-links-alt.patch.gz)\n``````\n",
    "created_at": "2012-07-04T14:34:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-143790",
    "user": "https://github.com/kcrisman"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,4 +9,4 @@
 
 To review this ticket:
 1. Install [this spkg](http://www.math.tugraz.at/~krenn/whatever/networkx-1.6.spkg)
-2. Apply [this patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806_doctest_fixes.patch.gz), [this patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806.reviewer.patch.gz) and [this patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806_docbuild_fix.patch.gz)
+2. Apply [attachment: trac_12806_doctest_fixes.patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806_doctest_fixes.patch.gz), [attachment: trac_12806.reviewer.patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806.reviewer.patch.gz) and [attachment: trac_12806-docbuild-and-links-alt.patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806-docbuild-and-links-alt.patch.gz)
``````




---

archive/issue_comments_143791.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nOk, I didn't see your message, so we'll go with the alt patch.\n\nPatchbot:\n\nApply [attachment: trac_12806_doctest_fixes.patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806_doctest_fixes.patch.gz), [attachment: trac_12806.reviewer.patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806.reviewer.patch.gz) and [attachment: trac_12806-docbuild-and-links-alt.patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806-docbuild-and-links-alt.patch.gz)",
    "created_at": "2012-07-04T14:34:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-143791",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:24" align="right">comment:24</div>

Ok, I didn't see your message, so we'll go with the alt patch.

Patchbot:

Apply [attachment: trac_12806_doctest_fixes.patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806_doctest_fixes.patch.gz), [attachment: trac_12806.reviewer.patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806.reviewer.patch.gz) and [attachment: trac_12806-docbuild-and-links-alt.patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806-docbuild-and-links-alt.patch.gz)



---

archive/issue_comments_143792.json:
```json
{
    "body": "Changed reviewer from **Keshav Kini** to **Keshav Kini, Karl-Dieter Crisman**",
    "created_at": "2012-07-04T14:34:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-143792",
    "user": "https://github.com/kcrisman"
}
```

Changed reviewer from **Keshav Kini** to **Keshav Kini, Karl-Dieter Crisman**



---

archive/issue_comments_143793.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\n@sagetrac-jlopez: I'll leave it to you to give final positive review, but this should catch all of the docbuild errors, fix some links, and removed some whitespace that was right next to the stuff being changed anyway.",
    "created_at": "2012-07-04T14:36:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-143793",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:25" align="right">comment:25</div>

@sagetrac-jlopez: I'll leave it to you to give final positive review, but this should catch all of the docbuild errors, fix some links, and removed some whitespace that was right next to the stuff being changed anyway.



---

archive/issue_comments_143794.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nlooks good to go.",
    "created_at": "2012-07-04T16:00:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-143794",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:26" align="right">comment:26</div>

looks good to go.



---

archive/issue_events_174809.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-07-04T16:00:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12806#event-174809"
}
```



---

archive/issue_events_174810.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-07-04T16:00:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12806#event-174810"
}
```



---

archive/issue_events_174811.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-07-07T22:30:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12806#event-174811"
}
```



---

archive/issue_events_174812.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-07-07T22:30:05Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12806#event-174812"
}
```



---

archive/issue_comments_143795.json:
```json
{
    "body": "Merged: **sage-5.2.beta1**",
    "created_at": "2012-07-07T22:30:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-143795",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.2.beta1**
