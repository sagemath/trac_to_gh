# Issue 12806: upgrade of spkg networkx-1.2.p2 to 1.6

archive/issues_012634.json:
```json
{
    "body": "When upgrading the networkx package to 1.6, there arise a lot of doctest errors, see discussion on [sage-devel](http://groups.google.com/group/sage-devel/browse_thread/thread/60e2704e68cad4f4).\nThis ticket should contain everything that is necessary to do so.\n\nTo get the doctests passing, the following modifications have been made:\n1. Fixed the calls in `graph.py` to conform to the new API for `betweennness_centrality`. Also exposed the new options.\n2. Failing doctest in `digraph.py` was shocasing a bug that isn't there anymore. Fixed and documented it, and exposed the previously offending implementation to sage\n3. Two failures in `graph_generators.py` were due to changes in randomized methods, so just changed the tests to conform to the new output, the rest were due to a bad-parameter case that was used to raise an exception but now degenerates gracefully. Fixed the corresponding doctests to account for that.\n4. Failures in `graph_generic.py` were due to a change in the output of clustering coefficients for weighted graphs. Added an optional parameter to use the new output, implemented the old behaviour as it was in NetworkX 1.2, and set the old behaviour to default with a deprecation warning. \n\nTo review this ticket:\n1. Install [this spkg](http://www.math.tugraz.at/~krenn/whatever/networkx-1.6.spkg)\n2. Apply [attachment:trac_12806_doctest_fixes.patch], [attachment:trac_12806.reviewer.patch] and [attachment:trac_12806-docbuild-and-links-alt.patch]\n\n**Assignee:** @jasongrout, @nathanncohen, @rlmill\n\n**CC:**  @kini @kiwifb brunellus @nathanncohen\n\n**Keywords:** spkg networkx graphs\n\n**Reviewer:** Keshav Kini, Karl-Dieter Crisman\n\n**Author:** Daniel Krenn, Javier L\u00f3pez Pe\u00f1a\n\n**Merged:** sage-5.2.beta1\n\nIssue created by migration from https://trac.sagemath.org/ticket/12806\n\n",
    "closed_at": "2012-07-07T22:30:05Z",
    "created_at": "2012-04-03T23:15:36Z",
    "labels": [
        "component: graph theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.2",
    "title": "upgrade of spkg networkx-1.2.p2 to 1.6",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/12806",
    "user": "https://github.com/dkrenn"
}
```
When upgrading the networkx package to 1.6, there arise a lot of doctest errors, see discussion on [sage-devel](http://groups.google.com/group/sage-devel/browse_thread/thread/60e2704e68cad4f4).
This ticket should contain everything that is necessary to do so.

To get the doctests passing, the following modifications have been made:
1. Fixed the calls in `graph.py` to conform to the new API for `betweennness_centrality`. Also exposed the new options.
2. Failing doctest in `digraph.py` was shocasing a bug that isn't there anymore. Fixed and documented it, and exposed the previously offending implementation to sage
3. Two failures in `graph_generators.py` were due to changes in randomized methods, so just changed the tests to conform to the new output, the rest were due to a bad-parameter case that was used to raise an exception but now degenerates gracefully. Fixed the corresponding doctests to account for that.
4. Failures in `graph_generic.py` were due to a change in the output of clustering coefficients for weighted graphs. Added an optional parameter to use the new output, implemented the old behaviour as it was in NetworkX 1.2, and set the old behaviour to default with a deprecation warning. 

To review this ticket:
1. Install [this spkg](http://www.math.tugraz.at/~krenn/whatever/networkx-1.6.spkg)
2. Apply [attachment:trac_12806_doctest_fixes.patch], [attachment:trac_12806.reviewer.patch] and [attachment:trac_12806-docbuild-and-links-alt.patch]

**Assignee:** @jasongrout, @nathanncohen, @rlmill

**CC:**  @kini @kiwifb brunellus @nathanncohen

**Keywords:** spkg networkx graphs

**Reviewer:** Keshav Kini, Karl-Dieter Crisman

**Author:** Daniel Krenn, Javier López Peña

**Merged:** sage-5.2.beta1

Issue created by migration from https://trac.sagemath.org/ticket/12806





---

archive/issue_comments_146045.json:
```json
{
    "body": "<a id='comment:1'></a>\nI made a package networkx-1.6, which is available [here](http://www.math.tugraz.at/~krenn/whatever/networkx-1.6.spkg). \n\nThere are a lot of doctests failing in sage.graphs.",
    "created_at": "2012-04-03T23:18:33Z",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-146045",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:1'></a>
I made a package networkx-1.6, which is available [here](http://www.math.tugraz.at/~krenn/whatever/networkx-1.6.spkg). 

There are a lot of doctests failing in sage.graphs.



---

archive/issue_comments_146046.json:
```json
{
    "body": "**Author:** Daniel Krenn",
    "created_at": "2012-04-03T23:18:33Z",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-146046",
    "user": "https://github.com/dkrenn"
}
```

**Author:** Daniel Krenn



---

archive/issue_comments_146047.json:
```json
{
    "body": "<a id='comment:5'></a>\nThe failing tests in graph.py are due to an API change in the betweenness_centrality function.\nThey get fixed by replacing\n\n```\n    return networkx.betweenness_centrality(self.networkx_graph(copy=False), normalized)\n```\nin line 3252 of SAGE_ROOT/devel/sage-main/sage/graphs/graph.py by\n\n```\n    return networkx.betweenness_centrality(self.networkx_graph(copy=False), normalized = normalized)\n```\nI will take a look at the rest of the failing tests tomorrow and write a patch.",
    "created_at": "2012-06-13T16:44:09Z",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-146047",
    "user": "https://trac.sagemath.org/admin/accounts/users/jlopez"
}
```

<a id='comment:5'></a>
The failing tests in graph.py are due to an API change in the betweenness_centrality function.
They get fixed by replacing

```
    return networkx.betweenness_centrality(self.networkx_graph(copy=False), normalized)
```
in line 3252 of SAGE_ROOT/devel/sage-main/sage/graphs/graph.py by

```
    return networkx.betweenness_centrality(self.networkx_graph(copy=False), normalized = normalized)
```
I will take a look at the rest of the failing tests tomorrow and write a patch.



---

archive/issue_comments_146048.json:
```json
{
    "body": "<a id='comment:6'></a>\nThe failing test in digraph.py is an improvement. In older versions of NetworkX `topological_sort_recursive` had a problem that has since been sorted out. The failing test was showcasing a bug that is not there anymore. This is also good news since we can also expose the recursive implementation of topological sorts in sage.",
    "created_at": "2012-06-14T10:31:20Z",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-146048",
    "user": "https://trac.sagemath.org/admin/accounts/users/jlopez"
}
```

<a id='comment:6'></a>
The failing test in digraph.py is an improvement. In older versions of NetworkX `topological_sort_recursive` had a problem that has since been sorted out. The failing test was showcasing a bug that is not there anymore. This is also good news since we can also expose the recursive implementation of topological sorts in sage.



---

archive/issue_comments_146049.json:
```json
{
    "body": "<a id='comment:7'></a>\nAll but two of the failing tests in `graph_generators.py` are due to extreme cases of balanced trees (degree 1, height 0), that didn't use to be allowed before and now degenerate gracefully. So this problem gets sorted out just by removing the offending doctests. As a nice side-effect, the offending tests took most of the testing time before. After removing them time for running the tests in `graph_generators.py` drops for me from 357s to 18s.",
    "created_at": "2012-06-14T11:57:12Z",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-146049",
    "user": "https://trac.sagemath.org/admin/accounts/users/jlopez"
}
```

<a id='comment:7'></a>
All but two of the failing tests in `graph_generators.py` are due to extreme cases of balanced trees (degree 1, height 0), that didn't use to be allowed before and now degenerate gracefully. So this problem gets sorted out just by removing the offending doctests. As a nice side-effect, the offending tests took most of the testing time before. After removing them time for running the tests in `graph_generators.py` drops for me from 357s to 18s.



---

archive/issue_comments_146050.json:
```json
{
    "body": "<a id='comment:8'></a>\nThe two remaining doctests in `graph_generators.py` are due to changes in two randomized methods: a change in `networkx.powerlaw_cluster_graph` from using `random.random` to `_random_subset` and a rewriting of the random method `expected_degree_graph`. Since the functions called in the doctests have a randomized nature it is not unreasonable to expect the results to change after the randomized function is rewritten. Unless somebody complains I will just update the tests to the results with the new methods.",
    "created_at": "2012-06-14T13:44:35Z",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-146050",
    "user": "https://trac.sagemath.org/admin/accounts/users/jlopez"
}
```

<a id='comment:8'></a>
The two remaining doctests in `graph_generators.py` are due to changes in two randomized methods: a change in `networkx.powerlaw_cluster_graph` from using `random.random` to `_random_subset` and a rewriting of the random method `expected_degree_graph`. Since the functions called in the doctests have a randomized nature it is not unreasonable to expect the results to change after the randomized function is rewritten. Unless somebody complains I will just update the tests to the results with the new methods.



---

archive/attachments_017245.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_12806_doctest_fixes.patch",
    "asset_url": "tarball://root/attachments/ticket12806/trac_12806_doctest_fixes.patch",
    "created_at": "2012-06-14T16:20:31Z",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket12806/trac_12806_doctest_fixes.patch",
    "user": "https://trac.sagemath.org/admin/accounts/users/jlopez"
}
```



---

archive/issue_comments_146051.json:
```json
{
    "body": "<a id='comment:10'></a>\nAttachment [trac_12806_doctest_fixes.patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806_doctest_fixes.patch) by jlopez created at 2012-06-14 16:20:31\n\nAdded a patch with the necessary changes for the doctests. All tests pass in my system. To review this patch you need to install the spkg by Daniel Krenn in the first comment and then apply the patch.",
    "created_at": "2012-06-14T16:20:31Z",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-146051",
    "user": "https://trac.sagemath.org/admin/accounts/users/jlopez"
}
```

<a id='comment:10'></a>
Attachment [trac_12806_doctest_fixes.patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806_doctest_fixes.patch) by jlopez created at 2012-06-14 16:20:31

Added a patch with the necessary changes for the doctests. All tests pass in my system. To review this patch you need to install the spkg by Daniel Krenn in the first comment and then apply the patch.



---

archive/issue_comments_146052.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,2 +1,12 @@\n When upgrading the networkx package to 1.6, there arise a lot of doctest errors, see discussion on [sage-devel](http://groups.google.com/group/sage-devel/browse_thread/thread/60e2704e68cad4f4).\n This ticket should contain everything that is necessary to do so.\n+\n+To get the doctests passing, the following modifications have been made:\n+1. Fixed the calls in `graph.py` to conform to the new API for `betweennness_centrality`. Also exposed the new options.\n+2. Failing doctest in `digraph.py` was shocasing a bug that isn't there anymore. Fixed and documented it, and exposed the previously offending implementation to sage\n+3. Two failures in `graph_generators.py` were due to changes in randomized methods, so just changed the tests to conform to the new output, the rest were due to a bad-parameter case that was used to raise an exception but now degenerates gracefully. Fixed the corresponding doctests to account for that.\n+4. Failures in `graph_generic.py` were due to a change in the output of clustering coefficients for weighted graphs. Added an optional parameter to use the new output, implemented the old behaviour as it was in NetworkX 1.2, and set the old behaviour to default with a deprecation warning. \n+\n+To review this ticket:\n+1. Install [this spkg](http://www.math.tugraz.at/~krenn/whatever/networkx-1.6.spkg)\n+2. Apply [this patch](http://trac.sagemath.org/sage_trac/attachment/ticket/12806/trac_12806_doctest_fixes.patch)\n``````\n",
    "created_at": "2012-06-14T16:35:30Z",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-146052",
    "user": "https://trac.sagemath.org/admin/accounts/users/jlopez"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,2 +1,12 @@
 When upgrading the networkx package to 1.6, there arise a lot of doctest errors, see discussion on [sage-devel](http://groups.google.com/group/sage-devel/browse_thread/thread/60e2704e68cad4f4).
 This ticket should contain everything that is necessary to do so.
+
+To get the doctests passing, the following modifications have been made:
+1. Fixed the calls in `graph.py` to conform to the new API for `betweennness_centrality`. Also exposed the new options.
+2. Failing doctest in `digraph.py` was shocasing a bug that isn't there anymore. Fixed and documented it, and exposed the previously offending implementation to sage
+3. Two failures in `graph_generators.py` were due to changes in randomized methods, so just changed the tests to conform to the new output, the rest were due to a bad-parameter case that was used to raise an exception but now degenerates gracefully. Fixed the corresponding doctests to account for that.
+4. Failures in `graph_generic.py` were due to a change in the output of clustering coefficients for weighted graphs. Added an optional parameter to use the new output, implemented the old behaviour as it was in NetworkX 1.2, and set the old behaviour to default with a deprecation warning. 
+
+To review this ticket:
+1. Install [this spkg](http://www.math.tugraz.at/~krenn/whatever/networkx-1.6.spkg)
+2. Apply [this patch](http://trac.sagemath.org/sage_trac/attachment/ticket/12806/trac_12806_doctest_fixes.patch)
``````




---

archive/issue_comments_146053.json:
```json
{
    "body": "**Changing author** from \"Daniel Krenn\" to \"Daniel Krenn, Javier L\u00f3pez Pe\u00f1a\".",
    "created_at": "2012-06-14T16:35:30Z",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-146053",
    "user": "https://trac.sagemath.org/admin/accounts/users/jlopez"
}
```

**Changing author** from "Daniel Krenn" to "Daniel Krenn, Javier López Peña".



---

archive/issue_events_106635.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jlopez",
    "created_at": "2012-06-14T16:35:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12806#event-106635"
}
```



---

archive/issue_comments_146054.json:
```json
{
    "body": "<a id='comment:12'></a>\nI think the name (and commit message) of the patch is kind of misleading since you are actually changing code and not just fixing doctests.\n\nAnyway, the code looks good - I'm running `make ptestlong` just to make sure.",
    "created_at": "2012-06-14T16:58:24Z",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-146054",
    "user": "https://github.com/kini"
}
```

<a id='comment:12'></a>
I think the name (and commit message) of the patch is kind of misleading since you are actually changing code and not just fixing doctests.

Anyway, the code looks good - I'm running `make ptestlong` just to make sure.



---

archive/issue_comments_146055.json:
```json
{
    "body": "apply to $SAGE_ROOT/devel/sage",
    "created_at": "2012-06-14T20:42:39Z",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-146055",
    "user": "https://github.com/kini"
}
```

apply to $SAGE_ROOT/devel/sage



---

archive/attachments_017246.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_12806.reviewer.patch",
    "asset_url": "tarball://root/attachments/ticket12806/trac_12806.reviewer.patch",
    "created_at": "2012-06-14T20:45:43Z",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket12806/trac_12806.reviewer.patch",
    "user": "https://github.com/kini"
}
```



---

archive/issue_comments_146056.json:
```json
{
    "body": "<a id='comment:13'></a>\nAttachment [trac_12806.reviewer.patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806.reviewer.patch) by @kini created at 2012-06-14 20:45:43\n\nI fixed a doctest that was failing (deprecation warnings only appear once per session). I also took the liberty of fixing formatting and trailing whitespace in the functions you touched :)\n\npatchbot: apply trac_12806_doctest_fixes.patch trac_12806.reviewer.patch",
    "created_at": "2012-06-14T20:45:43Z",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-146056",
    "user": "https://github.com/kini"
}
```

<a id='comment:13'></a>
Attachment [trac_12806.reviewer.patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806.reviewer.patch) by @kini created at 2012-06-14 20:45:43

I fixed a doctest that was failing (deprecation warnings only appear once per session). I also took the liberty of fixing formatting and trailing whitespace in the functions you touched :)

patchbot: apply trac_12806_doctest_fixes.patch trac_12806.reviewer.patch



---

archive/issue_comments_146057.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -9,4 +9,4 @@\n \n To review this ticket:\n 1. Install [this spkg](http://www.math.tugraz.at/~krenn/whatever/networkx-1.6.spkg)\n-2. Apply [this patch](http://trac.sagemath.org/sage_trac/attachment/ticket/12806/trac_12806_doctest_fixes.patch)\n+2. Apply [this patch](http://trac.sagemath.org/sage_trac/attachment/ticket/12806/trac_12806_doctest_fixes.patch) and [this patch](http://trac.sagemath.org/sage_trac/attachment/ticket/12806/trac_12806.reviewer.patch)\n``````\n",
    "created_at": "2012-06-14T20:47:23Z",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-146057",
    "user": "https://github.com/kini"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -9,4 +9,4 @@
 
 To review this ticket:
 1. Install [this spkg](http://www.math.tugraz.at/~krenn/whatever/networkx-1.6.spkg)
-2. Apply [this patch](http://trac.sagemath.org/sage_trac/attachment/ticket/12806/trac_12806_doctest_fixes.patch)
+2. Apply [this patch](http://trac.sagemath.org/sage_trac/attachment/ticket/12806/trac_12806_doctest_fixes.patch) and [this patch](http://trac.sagemath.org/sage_trac/attachment/ticket/12806/trac_12806.reviewer.patch)
``````




---

archive/issue_comments_146058.json:
```json
{
    "body": "**Reviewer:** Keshav Kini",
    "created_at": "2012-06-14T20:47:23Z",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-146058",
    "user": "https://github.com/kini"
}
```

**Reviewer:** Keshav Kini



---

archive/issue_comments_146059.json:
```json
{
    "body": "<a id='comment:15'></a>\nIf you agree with the reviewer patch, I'll set this to positive review.",
    "created_at": "2012-06-14T20:47:48Z",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-146059",
    "user": "https://github.com/kini"
}
```

<a id='comment:15'></a>
If you agree with the reviewer patch, I'll set this to positive review.



---

archive/issue_events_106636.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jlopez",
    "created_at": "2012-06-15T08:22:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12806#event-106636"
}
```



---

archive/issue_events_106637.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jlopez",
    "created_at": "2012-06-15T08:22:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12806#event-106637"
}
```



---

archive/issue_comments_146060.json:
```json
{
    "body": "<a id='comment:16'></a>\nThanks for the prompt response, Keshav! The reviewer patch looks good to me, so I guess we can consider this reviewed!\n\nNow it is time for all the graph people to start doing cool stuff with all the great functionalities of NetworkX we have been missing out! :-D",
    "created_at": "2012-06-15T08:22:10Z",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-146060",
    "user": "https://trac.sagemath.org/admin/accounts/users/jlopez"
}
```

<a id='comment:16'></a>
Thanks for the prompt response, Keshav! The reviewer patch looks good to me, so I guess we can consider this reviewed!

Now it is time for all the graph people to start doing cool stuff with all the great functionalities of NetworkX we have been missing out! :-D



---

archive/issue_events_106638.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-06-18T13:33:45Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "milestone": "sage-5.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12806#event-106638"
}
```



---

archive/issue_events_106639.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-06-18T13:33:45Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "milestone": "sage-5.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12806#event-106639"
}
```



---

archive/issue_events_106640.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-06-28T11:41:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12806#event-106640"
}
```



---

archive/issue_events_106641.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-06-28T11:41:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12806#event-106641"
}
```



---

archive/issue_comments_146061.json:
```json
{
    "body": "<a id='comment:18'></a>\nThe documentation doesn't build correctly.  I've lost the exact warning/error messages though.",
    "created_at": "2012-06-28T11:41:51Z",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-146061",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:18'></a>
The documentation doesn't build correctly.  I've lost the exact warning/error messages though.



---

archive/issue_events_106642.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jlopez",
    "created_at": "2012-07-03T12:05:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12806#event-106642"
}
```



---

archive/issue_events_106643.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jlopez",
    "created_at": "2012-07-03T12:05:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12806#event-106643"
}
```



---

archive/issue_comments_146062.json:
```json
{
    "body": "<a id='comment:19'></a>\nI think the documentation building problem is fixed; `sage --docbuild reference pdf` gives me no errors. Needs review just for the docbuild patch.",
    "created_at": "2012-07-03T12:05:13Z",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-146062",
    "user": "https://trac.sagemath.org/admin/accounts/users/jlopez"
}
```

<a id='comment:19'></a>
I think the documentation building problem is fixed; `sage --docbuild reference pdf` gives me no errors. Needs review just for the docbuild patch.



---

archive/issue_comments_146063.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -9,4 +9,4 @@\n \n To review this ticket:\n 1. Install [this spkg](http://www.math.tugraz.at/~krenn/whatever/networkx-1.6.spkg)\n-2. Apply [this patch](http://trac.sagemath.org/sage_trac/attachment/ticket/12806/trac_12806_doctest_fixes.patch) and [this patch](http://trac.sagemath.org/sage_trac/attachment/ticket/12806/trac_12806.reviewer.patch)\n+2. Apply [this patch](http://trac.sagemath.org/sage_trac/attachment/ticket/12806/trac_12806_doctest_fixes.patch), [this patch](http://trac.sagemath.org/sage_trac/attachment/ticket/12806/trac_12806.reviewer.patch) and [this patch](http://trac.sagemath.org/sage_trac/attachment/ticket/12806/trac_12806_docbuild_fix.patch)\n``````\n",
    "created_at": "2012-07-03T12:05:13Z",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-146063",
    "user": "https://trac.sagemath.org/admin/accounts/users/jlopez"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -9,4 +9,4 @@
 
 To review this ticket:
 1. Install [this spkg](http://www.math.tugraz.at/~krenn/whatever/networkx-1.6.spkg)
-2. Apply [this patch](http://trac.sagemath.org/sage_trac/attachment/ticket/12806/trac_12806_doctest_fixes.patch) and [this patch](http://trac.sagemath.org/sage_trac/attachment/ticket/12806/trac_12806.reviewer.patch)
+2. Apply [this patch](http://trac.sagemath.org/sage_trac/attachment/ticket/12806/trac_12806_doctest_fixes.patch), [this patch](http://trac.sagemath.org/sage_trac/attachment/ticket/12806/trac_12806.reviewer.patch) and [this patch](http://trac.sagemath.org/sage_trac/attachment/ticket/12806/trac_12806_docbuild_fix.patch)
``````




---

archive/issue_comments_146064.json:
```json
{
    "body": "<a id='comment:20'></a>\npatchbot: apply trac_12806_doctest_fixes.patch trac_12806.reviewer.patch trac_12806_docbuild_fix.patch",
    "created_at": "2012-07-03T15:22:43Z",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-146064",
    "user": "https://trac.sagemath.org/admin/accounts/users/jlopez"
}
```

<a id='comment:20'></a>
patchbot: apply trac_12806_doctest_fixes.patch trac_12806.reviewer.patch trac_12806_docbuild_fix.patch



---

archive/issue_comments_146065.json:
```json
{
    "body": "<a id='comment:21'></a>\nI'm not sure what you did, but the third patch does not apply - pretty obviously, it is not based on the reviewer patch.  Needs work.  I may put something together quickly for this.",
    "created_at": "2012-07-04T13:37:00Z",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-146065",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:21'></a>
I'm not sure what you did, but the third patch does not apply - pretty obviously, it is not based on the reviewer patch.  Needs work.  I may put something together quickly for this.



---

archive/issue_comments_146066.json:
```json
{
    "body": "<a id='comment:22'></a>\nThere were a few other build errors, and incorrect linking syntax.  I'll fix these.\n\nAlso, is \n\n```\nequivalent to ``weight = weight``\n```\nsupposed to be\n\n```\nequivalent to ``weight = 'weight'``\n```\nsince weight takes a boolean or a string?",
    "created_at": "2012-07-04T13:50:10Z",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-146066",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:22'></a>
There were a few other build errors, and incorrect linking syntax.  I'll fix these.

Also, is 

```
equivalent to ``weight = weight``
```
supposed to be

```
equivalent to ``weight = 'weight'``
```
since weight takes a boolean or a string?



---

archive/issue_comments_146067.json:
```json
{
    "body": "<a id='comment:23'></a>\nThanks for jumping in!\n\nI must have messed up my patch queue at some stage. I am building a clean version of sage right now, will made a new patch on top of it if you don't beat me to it.\n\nReplying to [kcrisman](#comment%3A22):\n> Also, is \n> \n> ```\n> equivalent to ``weight = weight``\n> ```\n> supposed to be\n> \n> ```\n> equivalent to ``weight = 'weight'``\n> ```\n> since weight takes a boolean or a string?\n\n\nThat's right, nice catch.\nThanks again for your help!",
    "created_at": "2012-07-04T14:18:52Z",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-146067",
    "user": "https://trac.sagemath.org/admin/accounts/users/jlopez"
}
```

<a id='comment:23'></a>
Thanks for jumping in!

I must have messed up my patch queue at some stage. I am building a clean version of sage right now, will made a new patch on top of it if you don't beat me to it.

Replying to [kcrisman](#comment%3A22):
> Also, is 
> 
> ```
> equivalent to ``weight = weight``
> ```
> supposed to be
> 
> ```
> equivalent to ``weight = 'weight'``
> ```
> since weight takes a boolean or a string?


That's right, nice catch.
Thanks again for your help!



---

archive/attachments_017247.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_12806-docbuild-and-links-alt.patch",
    "asset_url": "tarball://root/attachments/ticket12806/trac_12806-docbuild-and-links-alt.patch",
    "created_at": "2012-07-04T14:32:19Z",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket12806/trac_12806-docbuild-and-links-alt.patch",
    "user": "https://github.com/kcrisman"
}
```



---

archive/issue_comments_146068.json:
```json
{
    "body": "Attachment [trac_12806-docbuild-and-links-alt.patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806-docbuild-and-links-alt.patch) by @kcrisman created at 2012-07-04 14:32:19\n\napply if weight='weight'",
    "created_at": "2012-07-04T14:32:19Z",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-146068",
    "user": "https://github.com/kcrisman"
}
```

Attachment [trac_12806-docbuild-and-links-alt.patch](https://github.com/sagemath/sage/files/ticket12806/trac_12806-docbuild-and-links-alt.patch) by @kcrisman created at 2012-07-04 14:32:19

apply if weight='weight'



---

archive/issue_comments_146069.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -9,4 +9,4 @@\n \n To review this ticket:\n 1. Install [this spkg](http://www.math.tugraz.at/~krenn/whatever/networkx-1.6.spkg)\n-2. Apply [this patch](http://trac.sagemath.org/sage_trac/attachment/ticket/12806/trac_12806_doctest_fixes.patch), [this patch](http://trac.sagemath.org/sage_trac/attachment/ticket/12806/trac_12806.reviewer.patch) and [this patch](http://trac.sagemath.org/sage_trac/attachment/ticket/12806/trac_12806_docbuild_fix.patch)\n+2. Apply [attachment:trac_12806_doctest_fixes.patch], [attachment:trac_12806.reviewer.patch] and [attachment:trac_12806-docbuild-and-links-alt.patch]\n``````\n",
    "created_at": "2012-07-04T14:34:37Z",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-146069",
    "user": "https://github.com/kcrisman"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -9,4 +9,4 @@
 
 To review this ticket:
 1. Install [this spkg](http://www.math.tugraz.at/~krenn/whatever/networkx-1.6.spkg)
-2. Apply [this patch](http://trac.sagemath.org/sage_trac/attachment/ticket/12806/trac_12806_doctest_fixes.patch), [this patch](http://trac.sagemath.org/sage_trac/attachment/ticket/12806/trac_12806.reviewer.patch) and [this patch](http://trac.sagemath.org/sage_trac/attachment/ticket/12806/trac_12806_docbuild_fix.patch)
+2. Apply [attachment:trac_12806_doctest_fixes.patch], [attachment:trac_12806.reviewer.patch] and [attachment:trac_12806-docbuild-and-links-alt.patch]
``````




---

archive/issue_comments_146070.json:
```json
{
    "body": "<a id='comment:24'></a>\nOk, I didn't see your message, so we'll go with the alt patch.\n\nPatchbot:\n\nApply [attachment:trac_12806_doctest_fixes.patch], [attachment:trac_12806.reviewer.patch] and [attachment:trac_12806-docbuild-and-links-alt.patch]",
    "created_at": "2012-07-04T14:34:37Z",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-146070",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:24'></a>
Ok, I didn't see your message, so we'll go with the alt patch.

Patchbot:

Apply [attachment:trac_12806_doctest_fixes.patch], [attachment:trac_12806.reviewer.patch] and [attachment:trac_12806-docbuild-and-links-alt.patch]



---

archive/issue_comments_146071.json:
```json
{
    "body": "**Changing reviewer** from \"Keshav Kini\" to \"Keshav Kini, Karl-Dieter Crisman\".",
    "created_at": "2012-07-04T14:34:37Z",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-146071",
    "user": "https://github.com/kcrisman"
}
```

**Changing reviewer** from "Keshav Kini" to "Keshav Kini, Karl-Dieter Crisman".



---

archive/issue_comments_146072.json:
```json
{
    "body": "<a id='comment:25'></a>\n`@`jlopez: I'll leave it to you to give final positive review, but this should catch all of the docbuild errors, fix some links, and removed some whitespace that was right next to the stuff being changed anyway.",
    "created_at": "2012-07-04T14:36:32Z",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-146072",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:25'></a>
`@`jlopez: I'll leave it to you to give final positive review, but this should catch all of the docbuild errors, fix some links, and removed some whitespace that was right next to the stuff being changed anyway.



---

archive/issue_comments_146073.json:
```json
{
    "body": "<a id='comment:26'></a>\nlooks good to go.",
    "created_at": "2012-07-04T16:00:05Z",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-146073",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:26'></a>
looks good to go.



---

archive/issue_events_106644.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-07-04T16:00:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12806#event-106644"
}
```



---

archive/issue_events_106645.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-07-04T16:00:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12806#event-106645"
}
```



---

archive/issue_events_106646.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-07-07T22:30:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12806#event-106646"
}
```



---

archive/issue_events_106647.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-07-07T22:30:05Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12806#event-106647"
}
```



---

archive/issue_comments_146074.json:
```json
{
    "body": "**Merged:** sage-5.2.beta1",
    "created_at": "2012-07-07T22:30:05Z",
    "issue": "https://github.com/sagemath/sage/issues/12806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12806#issuecomment-146074",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.2.beta1
