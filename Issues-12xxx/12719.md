# Issue 12719: Upgrade to IPython 0.13

archive/issues_012547.json:
```json
{
    "assignees": [],
    "body": "We need to upgrade IPython to the shiny new thing. Well, not really - the shiny new thing was 0.11, and 0.13 is now stable. It's been mostly rewritten and is now a lot more modular, as I understand it. Definitely worth using in Sage.\n\nNote: To use the QT console (`sage -ipython qtconsole`), you need qt/qt-devel in your base OS install, the optional zeromq/pyzmq spkgs from #12843, and the optional sip/PyQt spkgs from #13022.\n\nInstall the IPython 0.13.1 spkg at [http://boxen.math.washington.edu/home/jdemeyer/spkg/ipython-0.13.1.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/ipython-0.13.1.spkg)\n\n**apply**:\n\nTo the scripts repository: \n* [attachment: trac_12719-scripts-vb.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts-vb.patch.gz)\n* [attachment: trac_12719_remove_sage_gdb_ipython.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz)\n* [attachment: 12719-test-displayhook.patch](https://github.com/sagemath/sage/files/ticket12719/12719-test-displayhook.patch.gz)\n* [attachment: 12719_run_cython.patch](https://github.com/sagemath/sage/files/ticket12719/12719_run_cython.patch.gz)\n* [attachment: trac_12719-hgignore.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-hgignore.patch.gz)\n* [attachment: trac_12719_purge_ipy_profile_sage.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_purge_ipy_profile_sage.patch.gz)\n\nTo the root repository:\n* [attachment: trac_12719_ROOT_configuration_files.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz)\n* [attachment: trac_12719-root-spkg-install.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-root-spkg-install.patch.gz)\n\nTo the sage library:\n* [attachment: trac_12719-rebased-to-13211-vb.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-rebased-to-13211-vb.patch.gz)\n* [attachment: trac_12719-move_to_preparser_rebased.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser_rebased.patch.gz)\n* [attachment: trac_12719_ipython_fixes.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz)\n* [attachment: trac_12719_dedent.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz)\n* [attachment: trac_12719-crash.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-crash.patch.gz)\n* [attachment: trac_12719-cellmagics013.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-cellmagics013.patch.gz)\n* [attachment: 12719-newipython-take2.patch](https://github.com/sagemath/sage/files/ticket12719/12719-newipython-take2.patch.gz)\n* [attachment: 12719-displayhook.patch](https://github.com/sagemath/sage/files/ticket12719/12719-displayhook.patch.gz)\n* [attachment: 12719-fix-transformer.patch](https://github.com/sagemath/sage/files/ticket12719/12719-fix-transformer.patch.gz)\n* [attachment: 12719-5.4rc1.patch](https://github.com/sagemath/sage/files/ticket12719/12719-5.4rc1.patch.gz)\n* [attachment: 12719-remove-plugin.patch](https://github.com/sagemath/sage/files/ticket12719/12719-remove-plugin.patch.gz)\n* [attachment: 12719-displayhook-library.patch](https://github.com/sagemath/sage/files/ticket12719/12719-displayhook-library.patch.gz)\n* [attachment: trac_12719-pager.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-pager.patch.gz)\n* [attachment: trac_12719-preparse-doctest.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-preparse-doctest.patch.gz)\n* [attachment: trac_12719-gcd-repr.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-gcd-repr.patch.gz)\n* [attachment: 12719-system.patch](https://github.com/sagemath/sage/files/ticket12719/12719-system.patch.gz)\n* [attachment: trac-12719-always-preparse.patch](https://github.com/sagemath/sage/files/ticket12719/trac-12719-always-preparse.patch.gz)\n* [attachment: 12719_ipython_test.patch](https://github.com/sagemath/sage/files/ticket12719/12719_ipython_test.patch.gz)\n* [attachment: 12719_ipython_no_history.patch](https://github.com/sagemath/sage/files/ticket12719/12719_ipython_no_history.patch.gz)\n\nSo:\n\n```\ncd SAGE_ROOT\n\n./sage --hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz\n./sage --hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-root-spkg-install.patch.gz\n\n./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts-vb.patch.gz\n./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz\n./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-test-displayhook.patch.gz\n./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/12719_run_cython.patch.gz\n./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-hgignore.patch.gz\n./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_purge_ipy_profile_sage.patch.gz\n\n./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-rebased-to-13211-vb.patch.gz\n./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser_rebased.patch.gz\n./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz\n./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz\n./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-crash.patch.gz\n./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-cellmagics013.patch.gz\n./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-newipython-take2.patch.gz\n./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-displayhook.patch.gz\n./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-fix-transformer.patch.gz\n./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-5.4rc1.patch.gz\n./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-remove-plugin.patch.gz\n./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-displayhook-library.patch.gz\n./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-pager.patch.gz\n./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-preparse-doctest.patch.gz\n./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-gcd-repr.patch.gz\n./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-system.patch.gz\n./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac-12719-always-preparse.patch.gz\n./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719_ipython_test.patch.gz\n./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719_ipython_no_history.patch.gz\n\n./sage -i http://sage.math.washington.edu/home/jason/ipython-0.13.1.spkg\n\n./sage -br\n```\n\nDepends on #13459\nDepends on #9191\nDepends on #13717\nDepends on #13963\n\nCC:  @gvol @vbraun @jasongrout @alexanderdreyer @robertwb\n\nKeywords: **sd40.5**\n\nReviewer: **Volker Braun, Mike Hansen, Jason Grout, Jeroen Demeyer**\n\nAuthor: **Mike Hansen, Volker Braun, Jason Grout, Jeroen Demeyer**\n\nMerged: **sage-5.7.beta1**\n\nComponent: **packages: standard**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/12719_\n\n",
    "closed_at": "2013-01-26T09:53:28Z",
    "created_at": "2012-03-21T20:03:03Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Upgrade to IPython 0.13",
    "type": "issue",
    "updated_at": "2016-09-06T08:31:35Z",
    "url": "https://github.com/sagemath/sage/issues/12719",
    "user": "https://github.com/kini"
}
```
We need to upgrade IPython to the shiny new thing. Well, not really - the shiny new thing was 0.11, and 0.13 is now stable. It's been mostly rewritten and is now a lot more modular, as I understand it. Definitely worth using in Sage.

Note: To use the QT console (`sage -ipython qtconsole`), you need qt/qt-devel in your base OS install, the optional zeromq/pyzmq spkgs from #12843, and the optional sip/PyQt spkgs from #13022.

Install the IPython 0.13.1 spkg at [http://boxen.math.washington.edu/home/jdemeyer/spkg/ipython-0.13.1.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/ipython-0.13.1.spkg)

**apply**:

To the scripts repository: 
* [attachment: trac_12719-scripts-vb.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts-vb.patch.gz)
* [attachment: trac_12719_remove_sage_gdb_ipython.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz)
* [attachment: 12719-test-displayhook.patch](https://github.com/sagemath/sage/files/ticket12719/12719-test-displayhook.patch.gz)
* [attachment: 12719_run_cython.patch](https://github.com/sagemath/sage/files/ticket12719/12719_run_cython.patch.gz)
* [attachment: trac_12719-hgignore.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-hgignore.patch.gz)
* [attachment: trac_12719_purge_ipy_profile_sage.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_purge_ipy_profile_sage.patch.gz)

To the root repository:
* [attachment: trac_12719_ROOT_configuration_files.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz)
* [attachment: trac_12719-root-spkg-install.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-root-spkg-install.patch.gz)

To the sage library:
* [attachment: trac_12719-rebased-to-13211-vb.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-rebased-to-13211-vb.patch.gz)
* [attachment: trac_12719-move_to_preparser_rebased.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser_rebased.patch.gz)
* [attachment: trac_12719_ipython_fixes.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz)
* [attachment: trac_12719_dedent.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz)
* [attachment: trac_12719-crash.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-crash.patch.gz)
* [attachment: trac_12719-cellmagics013.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-cellmagics013.patch.gz)
* [attachment: 12719-newipython-take2.patch](https://github.com/sagemath/sage/files/ticket12719/12719-newipython-take2.patch.gz)
* [attachment: 12719-displayhook.patch](https://github.com/sagemath/sage/files/ticket12719/12719-displayhook.patch.gz)
* [attachment: 12719-fix-transformer.patch](https://github.com/sagemath/sage/files/ticket12719/12719-fix-transformer.patch.gz)
* [attachment: 12719-5.4rc1.patch](https://github.com/sagemath/sage/files/ticket12719/12719-5.4rc1.patch.gz)
* [attachment: 12719-remove-plugin.patch](https://github.com/sagemath/sage/files/ticket12719/12719-remove-plugin.patch.gz)
* [attachment: 12719-displayhook-library.patch](https://github.com/sagemath/sage/files/ticket12719/12719-displayhook-library.patch.gz)
* [attachment: trac_12719-pager.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-pager.patch.gz)
* [attachment: trac_12719-preparse-doctest.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-preparse-doctest.patch.gz)
* [attachment: trac_12719-gcd-repr.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-gcd-repr.patch.gz)
* [attachment: 12719-system.patch](https://github.com/sagemath/sage/files/ticket12719/12719-system.patch.gz)
* [attachment: trac-12719-always-preparse.patch](https://github.com/sagemath/sage/files/ticket12719/trac-12719-always-preparse.patch.gz)
* [attachment: 12719_ipython_test.patch](https://github.com/sagemath/sage/files/ticket12719/12719_ipython_test.patch.gz)
* [attachment: 12719_ipython_no_history.patch](https://github.com/sagemath/sage/files/ticket12719/12719_ipython_no_history.patch.gz)

So:

```
cd SAGE_ROOT

./sage --hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz
./sage --hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-root-spkg-install.patch.gz

./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts-vb.patch.gz
./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz
./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-test-displayhook.patch.gz
./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/12719_run_cython.patch.gz
./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-hgignore.patch.gz
./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_purge_ipy_profile_sage.patch.gz

./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-rebased-to-13211-vb.patch.gz
./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser_rebased.patch.gz
./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz
./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz
./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-crash.patch.gz
./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-cellmagics013.patch.gz
./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-newipython-take2.patch.gz
./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-displayhook.patch.gz
./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-fix-transformer.patch.gz
./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-5.4rc1.patch.gz
./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-remove-plugin.patch.gz
./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-displayhook-library.patch.gz
./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-pager.patch.gz
./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-preparse-doctest.patch.gz
./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-gcd-repr.patch.gz
./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-system.patch.gz
./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac-12719-always-preparse.patch.gz
./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719_ipython_test.patch.gz
./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719_ipython_no_history.patch.gz

./sage -i http://sage.math.washington.edu/home/jason/ipython-0.13.1.spkg

./sage -br
```

Depends on #13459
Depends on #9191
Depends on #13717
Depends on #13963

CC:  @gvol @vbraun @jasongrout @alexanderdreyer @robertwb

Keywords: **sd40.5**

Reviewer: **Volker Braun, Mike Hansen, Jason Grout, Jeroen Demeyer**

Author: **Mike Hansen, Volker Braun, Jason Grout, Jeroen Demeyer**

Merged: **sage-5.7.beta1**

Component: **packages: standard**

_Issue created by migration from https://trac.sagemath.org/ticket/12719_





---

archive/issue_events_175696.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2012-03-21T20:03:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "milestone_number": null,
    "milestone_title": "sage-5.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175696"
}
```



---

archive/issue_events_175697.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2012-03-21T20:03:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175697"
}
```



---

archive/issue_events_175698.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2012-03-21T20:03:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175698"
}
```



---

archive/issue_events_175699.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2012-03-21T20:03:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175699"
}
```



---

archive/issue_comments_141986.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nSee #12167 for a related ticket: how we deal with IPython configuration files.",
    "created_at": "2012-03-21T20:11:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-141986",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:1" align="right">comment:1</div>

See #12167 for a related ticket: how we deal with IPython configuration files.



---

archive/issue_comments_141987.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nWould be nice but we need some porting, here is what typically happen if you try to use ipython-0.12 with sage (we had several reports in sage-on-gentoo before I pinned down the version used by sage):\n\n```\n$ sage\n----------------------------------------------------------------------\n| Sage Version 4.7.2, Release Date: 2011-10-29                       |\n| Type notebook() for the GUI, and license() for information.        |\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/usr/bin/sage-ipython\", line 19, in <module>\n    from IPython.CrashHandler import CrashHandler\nImportError: No module named CrashHandler\n```",
    "created_at": "2012-03-22T00:55:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-141987",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:2" align="right">comment:2</div>

Would be nice but we need some porting, here is what typically happen if you try to use ipython-0.12 with sage (we had several reports in sage-on-gentoo before I pinned down the version used by sage):

```
$ sage
----------------------------------------------------------------------
| Sage Version 4.7.2, Release Date: 2011-10-29                       |
| Type notebook() for the GUI, and license() for information.        |
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/bin/sage-ipython", line 19, in <module>
    from IPython.CrashHandler import CrashHandler
ImportError: No module named CrashHandler
```



---

archive/issue_comments_141988.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nYes, obviously :) I'm just making this ticket since it is absolutely must be an eventual goal for us and nobody else has made a ticket yet, even though IPython 0.12 has been out for about three months.",
    "created_at": "2012-03-22T01:01:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-141988",
    "user": "https://github.com/kini"
}
```

<div id="comment:3" align="right">comment:3</div>

Yes, obviously :) I'm just making this ticket since it is absolutely must be an eventual goal for us and nobody else has made a ticket yet, even though IPython 0.12 has been out for about three months.



---

archive/issue_comments_141989.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nTo be honest Fernando Perez and I talked about it on the mailing list at the time of ipython 0.11 and I said I would tell him what happens when we use ipython 0.11+ with sage because he is interested. For various reason I haven't been able to go back to it. But some sage-on-gentoo users eventually got a taste of it when it finally landed in the portage tree.\n\nSo first hurdle: do something about the crash handling.",
    "created_at": "2012-03-22T01:09:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-141989",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:4" align="right">comment:4</div>

To be honest Fernando Perez and I talked about it on the mailing list at the time of ipython 0.11 and I said I would tell him what happens when we use ipython 0.11+ with sage because he is interested. For various reason I haven't been able to go back to it. But some sage-on-gentoo users eventually got a taste of it when it finally landed in the portage tree.

So first hurdle: do something about the crash handling.



---

archive/issue_comments_141990.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI'm working on this now, and have made quite a bit of progress.  As an added bonus, making the Sage customizations to IPython is quite a bit cleaner.  I should hopefully be able to clean out the mess in sage/misc/preparser_ipython.py and sage/misc/interpreter.py .",
    "created_at": "2012-03-23T22:35:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-141990",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:6" align="right">comment:6</div>

I'm working on this now, and have made quite a bit of progress.  As an added bonus, making the Sage customizations to IPython is quite a bit cleaner.  I should hopefully be able to clean out the mess in sage/misc/preparser_ipython.py and sage/misc/interpreter.py .



---

archive/issue_comments_141991.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThis will fix #4413.",
    "created_at": "2012-03-29T07:47:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-141991",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:7" align="right">comment:7</div>

This will fix #4413.



---

archive/issue_comments_141992.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nGreat, I'm glad you're on the case! :)",
    "created_at": "2012-03-29T07:56:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-141992",
    "user": "https://github.com/kini"
}
```

<div id="comment:8" align="right">comment:8</div>

Great, I'm glad you're on the case! :)



---

archive/issue_comments_141993.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nWhat about zmq/pyzmq? It would really add to the functionality and I'm interested in the parallel/cluster support. But, strictly speaking, its not necessary to run ipython. Its also used in the new notebook so maybe its time for it to become a standard package?",
    "created_at": "2012-04-02T18:56:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-141993",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:10" align="right">comment:10</div>

What about zmq/pyzmq? It would really add to the functionality and I'm interested in the parallel/cluster support. But, strictly speaking, its not necessary to run ipython. Its also used in the new notebook so maybe its time for it to become a standard package?



---

archive/issue_comments_141994.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nCCing Jason as he expressed interest on sage-devel.",
    "created_at": "2012-04-11T05:41:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-141994",
    "user": "https://github.com/kini"
}
```

<div id="comment:11" align="right">comment:11</div>

CCing Jason as he expressed interest on sage-devel.



---

archive/issue_comments_141995.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nmhansen: we'd love to see your work-in-progress if it's available somewhere.  I just spent some time reading the IPython docs again and thinking about how we could use it to implement the notebook hub and worker processes.",
    "created_at": "2012-04-11T05:49:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-141995",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:12" align="right">comment:12</div>

mhansen: we'd love to see your work-in-progress if it's available somewhere.  I just spent some time reading the IPython docs again and thinking about how we could use it to implement the notebook hub and worker processes.



---

archive/issue_comments_141996.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nI've posted patches which let Sage work with IPython 0.12 as well as cleaning up some old messy code.  These should be in a state where they're ready to review.\n\nI haven't done anything with preparing an spkg yet.",
    "created_at": "2012-04-11T06:16:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-141996",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:13" align="right">comment:13</div>

I've posted patches which let Sage work with IPython 0.12 as well as cleaning up some old messy code.  These should be in a state where they're ready to review.

I haven't done anything with preparing an spkg yet.



---

archive/issue_comments_141997.json:
```json
{
    "body": "Author: **Mike Hansen**",
    "created_at": "2012-04-11T06:27:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-141997",
    "user": "https://github.com/jasongrout"
}
```

Author: **Mike Hansen**



---

archive/issue_comments_141998.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,9 @@\n We need to upgrade IPython to the shiny new thing. Well, not really - the shiny new thing was 0.11, and 0.12 is now stable. It's been mostly rewritten and is now a lot more modular, as I understand it. Definitely worth using in Sage.\n+\n+**apply**:\n+\n+1. [attachment: trac_12719-scripts.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz)\n+2. [attachment: trac_12719.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719.patch.gz)\n+3. [attachment: trac_12719-move_to_preparser.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser.patch.gz)\n+\n+Install IPython 0.12 (spkg coming soon...)\n``````\n",
    "created_at": "2012-04-11T06:27:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-141998",
    "user": "https://github.com/jasongrout"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,9 @@
 We need to upgrade IPython to the shiny new thing. Well, not really - the shiny new thing was 0.11, and 0.12 is now stable. It's been mostly rewritten and is now a lot more modular, as I understand it. Definitely worth using in Sage.
+
+**apply**:
+
+1. [attachment: trac_12719-scripts.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz)
+2. [attachment: trac_12719.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719.patch.gz)
+3. [attachment: trac_12719-move_to_preparser.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser.patch.gz)
+
+Install IPython 0.12 (spkg coming soon...)
``````




---

archive/issue_comments_141999.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nI've updated the instructions in the description.  Please correct if I messed something up.",
    "created_at": "2012-04-11T06:27:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-141999",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:14" align="right">comment:14</div>

I've updated the instructions in the description.  Please correct if I messed something up.



---

archive/issue_events_175700.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2012-04-11T06:27:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175700"
}
```



---

archive/issue_events_175701.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2012-04-11T06:27:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175701"
}
```



---

archive/issue_events_175702.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2012-04-11T06:27:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175702"
}
```



---

archive/issue_comments_142000.json:
```json
{
    "body": "Work Issues: **spkg**",
    "created_at": "2012-04-11T06:27:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142000",
    "user": "https://github.com/jasongrout"
}
```

Work Issues: **spkg**



---

archive/issue_comments_142001.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nJust curious: do your patches work with the current 0.12, or did you base them on the current git master (or does it not matter?).  On the IPython mailing list, they mentioned that 0.12 had some big bugs, so they were thinking about cutting a quick 0.12.1.  Also, they expect 0.13 in about a month.",
    "created_at": "2012-04-11T06:28:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142001",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:17" align="right">comment:17</div>

Just curious: do your patches work with the current 0.12, or did you base them on the current git master (or does it not matter?).  On the IPython mailing list, they mentioned that 0.12 had some big bugs, so they were thinking about cutting a quick 0.12.1.  Also, they expect 0.13 in about a month.



---

archive/issue_comments_142002.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nI was thinking more about security today with the zmq messages.  I think it may be more secure to have a default ipcontroller transport of IPC in a directory inside of $DOT_SAGE, rather than tcp over the loopback interface.  That would be more secure in that random people on your computer wouldn't be able to try to register with the IPython hub.  I emailed the IPython mailing list about it: http://thread.gmane.org/gmane.comp.python.ipython.devel/7789\n\nWhat do you think?",
    "created_at": "2012-04-11T06:38:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142002",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:18" align="right">comment:18</div>

I was thinking more about security today with the zmq messages.  I think it may be more secure to have a default ipcontroller transport of IPC in a directory inside of $DOT_SAGE, rather than tcp over the loopback interface.  That would be more secure in that random people on your computer wouldn't be able to try to register with the IPython hub.  I emailed the IPython mailing list about it: http://thread.gmane.org/gmane.comp.python.ipython.devel/7789

What do you think?



---

archive/issue_comments_142003.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@jasongrout](#comment:17):\n> Just curious: do your patches work with the current 0.12, or did you base them on the current git master (or does it not matter?).  On the IPython mailing list, they mentioned that 0.12 had some big bugs, so they were thinking about cutting a quick 0.12.1.  Also, they expect 0.13 in about a month.\n\nI've looked at the current git master as I was making these changes, and I think these changes should work fine with what's on there.  I'd be surprised if it made a difference.",
    "created_at": "2012-04-11T06:50:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142003",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@jasongrout](#comment:17):
> Just curious: do your patches work with the current 0.12, or did you base them on the current git master (or does it not matter?).  On the IPython mailing list, they mentioned that 0.12 had some big bugs, so they were thinking about cutting a quick 0.12.1.  Also, they expect 0.13 in about a month.

I've looked at the current git master as I was making these changes, and I think these changes should work fine with what's on there.  I'd be surprised if it made a difference.



---

archive/issue_comments_142004.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nI just tested things against git master and everything seems fine.",
    "created_at": "2012-04-11T07:23:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142004",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:20" align="right">comment:20</div>

I just tested things against git master and everything seems fine.



---

archive/issue_comments_142005.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,9 +1,9 @@\n We need to upgrade IPython to the shiny new thing. Well, not really - the shiny new thing was 0.11, and 0.12 is now stable. It's been mostly rewritten and is now a lot more modular, as I understand it. Definitely worth using in Sage.\n \n-**apply**:\n+**apply** (maybe; this needs to be checked...):\n \n 1. [attachment: trac_12719-scripts.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz)\n 2. [attachment: trac_12719.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719.patch.gz)\n 3. [attachment: trac_12719-move_to_preparser.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser.patch.gz)\n \n-Install IPython 0.12 (spkg coming soon...)\n+Install IPython 0.12: preliminary spkg at [http://sage.math.washington.edu/home/jason/ipython-0.12.p0.spkg](http://sage.math.washington.edu/home/jason/ipython-0.12.p0.spkg)\n``````\n",
    "created_at": "2012-04-12T03:03:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142005",
    "user": "https://github.com/jasongrout"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,9 +1,9 @@
 We need to upgrade IPython to the shiny new thing. Well, not really - the shiny new thing was 0.11, and 0.12 is now stable. It's been mostly rewritten and is now a lot more modular, as I understand it. Definitely worth using in Sage.
 
-**apply**:
+**apply** (maybe; this needs to be checked...):
 
 1. [attachment: trac_12719-scripts.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz)
 2. [attachment: trac_12719.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719.patch.gz)
 3. [attachment: trac_12719-move_to_preparser.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser.patch.gz)
 
-Install IPython 0.12 (spkg coming soon...)
+Install IPython 0.12: preliminary spkg at [http://sage.math.washington.edu/home/jason/ipython-0.12.p0.spkg](http://sage.math.washington.edu/home/jason/ipython-0.12.p0.spkg)
``````




---

archive/issue_comments_142006.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nI'm trying to apply these to 5.0beta12.  I think I probably got the order wrong in the description, so it would be great if you could check that.  But regardless, none of the patches seem to apply to 5.0beta12 cleanly (each has rejects).",
    "created_at": "2012-04-12T03:03:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142006",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:21" align="right">comment:21</div>

I'm trying to apply these to 5.0beta12.  I think I probably got the order wrong in the description, so it would be great if you could check that.  But regardless, none of the patches seem to apply to 5.0beta12 cleanly (each has rejects).



---

archive/issue_comments_142007.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nI just tried applying to beta6 and the -scripts patch still had problems.",
    "created_at": "2012-04-12T03:07:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142007",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:22" align="right">comment:22</div>

I just tried applying to beta6 and the -scripts patch still had problems.



---

archive/issue_comments_142008.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,9 +1,3 @@\n We need to upgrade IPython to the shiny new thing. Well, not really - the shiny new thing was 0.11, and 0.12 is now stable. It's been mostly rewritten and is now a lot more modular, as I understand it. Definitely worth using in Sage.\n \n-**apply** (maybe; this needs to be checked...):\n-\n-1. [attachment: trac_12719-scripts.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz)\n-2. [attachment: trac_12719.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719.patch.gz)\n-3. [attachment: trac_12719-move_to_preparser.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser.patch.gz)\n-\n Install IPython 0.12: preliminary spkg at [http://sage.math.washington.edu/home/jason/ipython-0.12.p0.spkg](http://sage.math.washington.edu/home/jason/ipython-0.12.p0.spkg)\n``````\n",
    "created_at": "2012-04-12T03:07:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142008",
    "user": "https://github.com/jasongrout"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,9 +1,3 @@
 We need to upgrade IPython to the shiny new thing. Well, not really - the shiny new thing was 0.11, and 0.12 is now stable. It's been mostly rewritten and is now a lot more modular, as I understand it. Definitely worth using in Sage.
 
-**apply** (maybe; this needs to be checked...):
-
-1. [attachment: trac_12719-scripts.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz)
-2. [attachment: trac_12719.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719.patch.gz)
-3. [attachment: trac_12719-move_to_preparser.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser.patch.gz)
-
 Install IPython 0.12: preliminary spkg at [http://sage.math.washington.edu/home/jason/ipython-0.12.p0.spkg](http://sage.math.washington.edu/home/jason/ipython-0.12.p0.spkg)
``````




---

archive/issue_comments_142009.json:
```json
{
    "body": "Changed work issues from **spkg** to **patches don't apply**",
    "created_at": "2012-04-12T03:07:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142009",
    "user": "https://github.com/jasongrout"
}
```

Changed work issues from **spkg** to **patches don't apply**



---

archive/issue_comments_142010.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nAttachment: **[trac_12719-move_to_preparser.patch.gz](https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser.patch.gz)**\n\nThe -scripts patch should apply fine to the scripts repository.  I've rebased the other ones to work on the newer 5.0 beta's.",
    "created_at": "2012-04-12T03:34:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142010",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:23" align="right">comment:23</div>

Attachment: **[trac_12719-move_to_preparser.patch.gz](https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser.patch.gz)**

The -scripts patch should apply fine to the scripts repository.  I've rebased the other ones to work on the newer 5.0 beta's.



---

archive/issue_comments_142011.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nAfter applying the patches to sage-5.0 beta12 I still have `ip = IPython.ipapi.get()` at the end of `sage/misc/edit_module.py`, which crashes Sage on startup.",
    "created_at": "2012-04-12T11:26:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142011",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:24" align="right">comment:24</div>

After applying the patches to sage-5.0 beta12 I still have `ip = IPython.ipapi.get()` at the end of `sage/misc/edit_module.py`, which crashes Sage on startup.



---

archive/issue_comments_142012.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nI get a crash when I apply these (with a latest git IPython).  I've posted the crash report at http://sage.math.washington.edu/home/jason/Sage_crash_report.txt",
    "created_at": "2012-04-12T11:43:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142012",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:25" align="right">comment:25</div>

I get a crash when I apply these (with a latest git IPython).  I've posted the crash report at http://sage.math.washington.edu/home/jason/Sage_crash_report.txt



---

archive/issue_comments_142013.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nIs the zmq communication in ipython going through tcp/localhost sockets, or through UDS sockets?  I really think we should use UDS sockets with the files in $DOTSAGE so that it is more secure (i.e., random other people on the computer can't connect to the kernel).",
    "created_at": "2012-04-12T13:53:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142013",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:26" align="right">comment:26</div>

Is the zmq communication in ipython going through tcp/localhost sockets, or through UDS sockets?  I really think we should use UDS sockets with the files in $DOTSAGE so that it is more secure (i.e., random other people on the computer can't connect to the kernel).



---

archive/issue_comments_142014.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nBy default we should not use zeromq. For example, if you want to fork you should do so before creating a zmq context. The zmq context creates threads and open file descriptors.\n\nApart from that, you should either use IPC or TCP+magic cookie, much like the X window system. Implementation wise its probably easiest to allow any socket and alway check the magic cookie.",
    "created_at": "2012-04-12T14:00:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142014",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:27" align="right">comment:27</div>

By default we should not use zeromq. For example, if you want to fork you should do so before creating a zmq context. The zmq context creates threads and open file descriptors.

Apart from that, you should either use IPC or TCP+magic cookie, much like the X window system. Implementation wise its probably easiest to allow any socket and alway check the magic cookie.



---

archive/issue_comments_142015.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nI don't think we have a choice of whether or not to use zmq with the new ipython.  ZMQ is an integral part of how it communicates results from the backend to the frontend.  They do have a system for signing messages and ignoring unsigned messages (is that the magic cookie thing?).  UDS sockets is IPC, so we're good there.  My problem with TCP+magic cookie is that it still allows someone else to attempt to connect to the various sockets, whereas using IPC, with the socket files in $DOTSAGE, filesystem permissions prevent others from even attempting to connect.",
    "created_at": "2012-04-12T14:06:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142015",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:28" align="right">comment:28</div>

I don't think we have a choice of whether or not to use zmq with the new ipython.  ZMQ is an integral part of how it communicates results from the backend to the frontend.  They do have a system for signing messages and ignoring unsigned messages (is that the magic cookie thing?).  UDS sockets is IPC, so we're good there.  My problem with TCP+magic cookie is that it still allows someone else to attempt to connect to the various sockets, whereas using IPC, with the socket files in $DOTSAGE, filesystem permissions prevent others from even attempting to connect.



---

archive/issue_comments_142016.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nIt may be that I'm misunderstanding how ipython is using zmq when you just execute 'ipython'.  It may be that it uses in-process communication (using zmq) instead of opening ports on localhost.  I've posted to the ipython-devel mailing list about this.",
    "created_at": "2012-04-12T14:23:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142016",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:29" align="right">comment:29</div>

It may be that I'm misunderstanding how ipython is using zmq when you just execute 'ipython'.  It may be that it uses in-process communication (using zmq) instead of opening ports on localhost.  I've posted to the ipython-devel mailing list about this.



---

archive/issue_comments_142017.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nGiven that you can build IPython without zeromq support it surely must be possible to run without?\n\nI don't see the problem with tcp + magic cookie. Yes you can connect but your connection attempt will be ignored. And the difference in pyzmq to ipc + magic cookie is a single string.  So why bother with ipc without magic cookie?",
    "created_at": "2012-04-12T14:25:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142017",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:30" align="right">comment:30</div>

Given that you can build IPython without zeromq support it surely must be possible to run without?

I don't see the problem with tcp + magic cookie. Yes you can connect but your connection attempt will be ignored. And the difference in pyzmq to ipc + magic cookie is a single string.  So why bother with ipc without magic cookie?



---

archive/issue_comments_142018.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nThomas on the ipython mailing list confirmed that the plain ipython command doesn't use zmq, so that was a big misunderstanding I had about the new ipython.  So never mind what I said about sockets.",
    "created_at": "2012-04-12T14:48:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142018",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:31" align="right">comment:31</div>

Thomas on the ipython mailing list confirmed that the plain ipython command doesn't use zmq, so that was a big misunderstanding I had about the new ipython.  So never mind what I said about sockets.



---

archive/issue_comments_142019.json:
```json
{
    "body": "Attachment: **[trac_12719.patch.gz](https://github.com/sagemath/sage/files/ticket12719/trac_12719.patch.gz)**",
    "created_at": "2012-04-12T18:59:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142019",
    "user": "https://github.com/mwhansen"
}
```

Attachment: **[trac_12719.patch.gz](https://github.com/sagemath/sage/files/ticket12719/trac_12719.patch.gz)**



---

archive/issue_comments_142020.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nOkay, I fixed the problem with edit_module.\n\nSorry I wasn't clear about the default IPython not using zmq.  There is a experimental console shell that uses two processes which can be accessed with \"ipython console\", but we aren't using that at all.",
    "created_at": "2012-04-12T19:01:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142020",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:32" align="right">comment:32</div>

Okay, I fixed the problem with edit_module.

Sorry I wasn't clear about the default IPython not using zmq.  There is a experimental console shell that uses two processes which can be accessed with "ipython console", but we aren't using that at all.



---

archive/issue_events_175703.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2012-04-12T19:11:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175703"
}
```



---

archive/issue_events_175704.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2012-04-12T19:11:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175704"
}
```



---

archive/issue_comments_142021.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,12 @@\n We need to upgrade IPython to the shiny new thing. Well, not really - the shiny new thing was 0.11, and 0.12 is now stable. It's been mostly rewritten and is now a lot more modular, as I understand it. Definitely worth using in Sage.\n \n Install IPython 0.12: preliminary spkg at [http://sage.math.washington.edu/home/jason/ipython-0.12.p0.spkg](http://sage.math.washington.edu/home/jason/ipython-0.12.p0.spkg)\n+\n+**apply**:\n+\n+To the scripts repository: [attachment: trac_12719-scripts.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz)\n+\n+To the sage library:\n+\n+1. [attachment: trac_12719.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719.patch.gz)\n+2. [attachment: trac_12719-move_to_preparser.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser.patch.gz)\n``````\n",
    "created_at": "2012-04-12T19:11:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142021",
    "user": "https://github.com/jasongrout"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,12 @@
 We need to upgrade IPython to the shiny new thing. Well, not really - the shiny new thing was 0.11, and 0.12 is now stable. It's been mostly rewritten and is now a lot more modular, as I understand it. Definitely worth using in Sage.
 
 Install IPython 0.12: preliminary spkg at [http://sage.math.washington.edu/home/jason/ipython-0.12.p0.spkg](http://sage.math.washington.edu/home/jason/ipython-0.12.p0.spkg)
+
+**apply**:
+
+To the scripts repository: [attachment: trac_12719-scripts.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz)
+
+To the sage library:
+
+1. [attachment: trac_12719.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719.patch.gz)
+2. [attachment: trac_12719-move_to_preparser.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser.patch.gz)
``````




---

archive/issue_comments_142022.json:
```json
{
    "body": "Changed work issues from **patches don't apply** to none",
    "created_at": "2012-04-12T19:11:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142022",
    "user": "https://github.com/jasongrout"
}
```

Changed work issues from **patches don't apply** to none



---

archive/issue_comments_142023.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nFor the record, the patches now apply to my 5.0beta12 and Sage starts up.",
    "created_at": "2012-04-12T19:20:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142023",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:34" align="right">comment:34</div>

For the record, the patches now apply to my 5.0beta12 and Sage starts up.



---

archive/issue_comments_142024.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nWhen doing %edit, I edit the sage library file, but the file isn't copied over to the library after editing, so the changes don't take effect.  This doesn't hold back this issue, though, since it didn't work before either.",
    "created_at": "2012-04-12T19:24:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142024",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:35" align="right">comment:35</div>

When doing %edit, I edit the sage library file, but the file isn't copied over to the library after editing, so the changes don't take effect.  This doesn't hold back this issue, though, since it didn't work before either.



---

archive/issue_comments_142025.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nAlthough zeromq is not, strictly speaking, necessary for IPython it might be of interest that I made zeromq and pyzmq spkgs at #12843",
    "created_at": "2012-04-14T20:59:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142025",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:36" align="right">comment:36</div>

Although zeromq is not, strictly speaking, necessary for IPython it might be of interest that I made zeromq and pyzmq spkgs at #12843



---

archive/issue_comments_142026.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n We need to upgrade IPython to the shiny new thing. Well, not really - the shiny new thing was 0.11, and 0.12 is now stable. It's been mostly rewritten and is now a lot more modular, as I understand it. Definitely worth using in Sage.\n \n-Install IPython 0.12: preliminary spkg at [http://sage.math.washington.edu/home/jason/ipython-0.12.p0.spkg](http://sage.math.washington.edu/home/jason/ipython-0.12.p0.spkg)\n+Install IPython 0.12.1: spkg at [http://sage.math.washington.edu/home/jason/ipython-0.12.1.spkg](http://sage.math.washington.edu/home/jason/ipython-0.12.1.spkg)\n \n **apply**:\n \n``````\n",
    "created_at": "2012-05-09T06:45:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142026",
    "user": "https://github.com/jasongrout"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 We need to upgrade IPython to the shiny new thing. Well, not really - the shiny new thing was 0.11, and 0.12 is now stable. It's been mostly rewritten and is now a lot more modular, as I understand it. Definitely worth using in Sage.
 
-Install IPython 0.12: preliminary spkg at [http://sage.math.washington.edu/home/jason/ipython-0.12.p0.spkg](http://sage.math.washington.edu/home/jason/ipython-0.12.p0.spkg)
+Install IPython 0.12.1: spkg at [http://sage.math.washington.edu/home/jason/ipython-0.12.1.spkg](http://sage.math.washington.edu/home/jason/ipython-0.12.1.spkg)
 
 **apply**:
 
``````




---

archive/issue_comments_142027.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nNot working on sage-5.0.rc0 (system Darwin 10.8.0).\nI installed the spkg and applied the patches in the given order and places, but still have the following error lauching Sage :\n\n```\nTraceback (most recent call last):\n  File \"/Users/pece/sage-5.0.rc0/local/bin/sage-ipython\", line 19, in <module>\n    from IPython.CrashHandler import CrashHandler\nImportError: No module named CrashHandler\n```\n\nI even installed the patches from #12843 without any success.",
    "created_at": "2012-05-10T15:06:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142027",
    "user": "https://github.com/sagetrac-PierreCagne"
}
```

<div id="comment:38" align="right">comment:38</div>

Not working on sage-5.0.rc0 (system Darwin 10.8.0).
I installed the spkg and applied the patches in the given order and places, but still have the following error lauching Sage :

```
Traceback (most recent call last):
  File "/Users/pece/sage-5.0.rc0/local/bin/sage-ipython", line 19, in <module>
    from IPython.CrashHandler import CrashHandler
ImportError: No module named CrashHandler
```

I even installed the patches from #12843 without any success.



---

archive/issue_comments_142028.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nI have OSX 10.6.8: `Darwin Kernel Version 10.8.0`.  I'm running the IPython git master and the patches, and it seems to work well.  Did you do `sage -b` to compile the patches?  Maybe the problem is in the IPython 0.12.1->0.13 changes.",
    "created_at": "2012-05-11T02:33:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142028",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:39" align="right">comment:39</div>

I have OSX 10.6.8: `Darwin Kernel Version 10.8.0`.  I'm running the IPython git master and the patches, and it seems to work well.  Did you do `sage -b` to compile the patches?  Maybe the problem is in the IPython 0.12.1->0.13 changes.



---

archive/issue_comments_142029.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nHmmm, it looks like the scripts/ patch wasn't applied (the problematic line is deleted in the patch).  Can you check again that trac_12719-scripts.patch is applied to the SAGE_ROOT/local/bin repository?",
    "created_at": "2012-05-11T02:38:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142029",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:40" align="right">comment:40</div>

Hmmm, it looks like the scripts/ patch wasn't applied (the problematic line is deleted in the patch).  Can you check again that trac_12719-scripts.patch is applied to the SAGE_ROOT/local/bin repository?



---

archive/issue_comments_142030.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nReplying to [@jasongrout](#comment:39):\n> Maybe the problem is in the IPython 0.12.1->0.13 changes.\n\nOn sage-5.0.rc0, I managed to apply the three patches and sage starts correctly. So I guess it's not a matter of IPython 0.13 changes. Although, the sage prompt is not in color anymore (my file .sage/ipython/ipythonrc is set to dark background color).\n\nIs the ipython notebook suppose to work? How should I test it?\n\nAlso, doing `sage -ipython notebook` creates this error :\n\n```\n$ sage -ipython notebook\nTraceback (most recent call last):\n...\nImportError: The IPython Notebook requires tornado >= 2.1.0\n```",
    "created_at": "2012-05-13T18:34:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142030",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:41" align="right">comment:41</div>

Replying to [@jasongrout](#comment:39):
> Maybe the problem is in the IPython 0.12.1->0.13 changes.

On sage-5.0.rc0, I managed to apply the three patches and sage starts correctly. So I guess it's not a matter of IPython 0.13 changes. Although, the sage prompt is not in color anymore (my file .sage/ipython/ipythonrc is set to dark background color).

Is the ipython notebook suppose to work? How should I test it?

Also, doing `sage -ipython notebook` creates this error :

```
$ sage -ipython notebook
Traceback (most recent call last):
...
ImportError: The IPython Notebook requires tornado >= 2.1.0
```



---

archive/issue_comments_142031.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nThe first patch (`trac_12719.patch`) applies only with fuzz 2 on sage-5.0",
    "created_at": "2012-05-24T23:32:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142031",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:42" align="right">comment:42</div>

The first patch (`trac_12719.patch`) applies only with fuzz 2 on sage-5.0



---

archive/issue_events_175705.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-05-25T04:27:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175705"
}
```



---

archive/issue_events_175706.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-05-25T04:27:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175706"
}
```



---

archive/issue_comments_142032.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nLots of doctests fail because the display hook is not correctly set up. I'll have a look into this if nobody beats me to it...",
    "created_at": "2012-05-25T04:27:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142032",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:43" align="right">comment:43</div>

Lots of doctests fail because the display hook is not correctly set up. I'll have a look into this if nobody beats me to it...



---

archive/issue_comments_142033.json:
```json
{
    "body": "Changed keywords from none to **sd40.5**",
    "created_at": "2012-05-25T04:27:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142033",
    "user": "https://github.com/vbraun"
}
```

Changed keywords from none to **sd40.5**



---

archive/issue_comments_142034.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,12 +1,17 @@\n We need to upgrade IPython to the shiny new thing. Well, not really - the shiny new thing was 0.11, and 0.12 is now stable. It's been mostly rewritten and is now a lot more modular, as I understand it. Definitely worth using in Sage.\n+\n+Note: To use the QT console (`sage -ipython qtconsole`), you need qt/qt-devel in your base OS install, the optional zeromq/pyzmq spkgs from #12843, and the optional sip/PyQt spkgs from #13022.\n \n Install IPython 0.12.1: spkg at [http://sage.math.washington.edu/home/jason/ipython-0.12.1.spkg](http://sage.math.washington.edu/home/jason/ipython-0.12.1.spkg)\n \n **apply**:\n \n-To the scripts repository: [attachment: trac_12719-scripts.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz)\n+To the scripts repository: \n+* [attachment: trac_12719-scripts.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz)\n+\n+To the root repository:\n+* [attachment: trac_13013_ROOT_configuration_files.patch](https://github.com/sagemath/sage/files/ticket12719/trac_13013_ROOT_configuration_files.patch.gz)\n \n To the sage library:\n-\n-1. [attachment: trac_12719.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719.patch.gz)\n-2. [attachment: trac_12719-move_to_preparser.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser.patch.gz)\n+* [attachment: trac_12719.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719.patch.gz)\n+* [attachment: trac_12719-move_to_preparser.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser.patch.gz)\n``````\n",
    "created_at": "2012-05-26T17:50:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142034",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,12 +1,17 @@
 We need to upgrade IPython to the shiny new thing. Well, not really - the shiny new thing was 0.11, and 0.12 is now stable. It's been mostly rewritten and is now a lot more modular, as I understand it. Definitely worth using in Sage.
+
+Note: To use the QT console (`sage -ipython qtconsole`), you need qt/qt-devel in your base OS install, the optional zeromq/pyzmq spkgs from #12843, and the optional sip/PyQt spkgs from #13022.
 
 Install IPython 0.12.1: spkg at [http://sage.math.washington.edu/home/jason/ipython-0.12.1.spkg](http://sage.math.washington.edu/home/jason/ipython-0.12.1.spkg)
 
 **apply**:
 
-To the scripts repository: [attachment: trac_12719-scripts.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz)
+To the scripts repository: 
+* [attachment: trac_12719-scripts.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz)
+
+To the root repository:
+* [attachment: trac_13013_ROOT_configuration_files.patch](https://github.com/sagemath/sage/files/ticket12719/trac_13013_ROOT_configuration_files.patch.gz)
 
 To the sage library:
-
-1. [attachment: trac_12719.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719.patch.gz)
-2. [attachment: trac_12719-move_to_preparser.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser.patch.gz)
+* [attachment: trac_12719.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719.patch.gz)
+* [attachment: trac_12719-move_to_preparser.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser.patch.gz)
``````




---

archive/issue_comments_142035.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nThe new ipython configuration files are once more incompatible with the previous ones. My patch versions the directory now (that is, it is named .sage/ipython-VERSION) and deletes the SAGE_ROOT/ipythonrc stuff. I think all sage-specific configuration should go into `sage/misc/interface.py`",
    "created_at": "2012-05-26T17:50:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142035",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:44" align="right">comment:44</div>

The new ipython configuration files are once more incompatible with the previous ones. My patch versions the directory now (that is, it is named .sage/ipython-VERSION) and deletes the SAGE_ROOT/ipythonrc stuff. I think all sage-specific configuration should go into `sage/misc/interface.py`



---

archive/issue_comments_142036.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nHere is some reasonable documentation about Prefilter vs. InputSplitter: http://mail.scipy.org/pipermail/ipython-dev/2011-March/007334.html",
    "created_at": "2012-05-27T17:59:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142036",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:45" align="right">comment:45</div>

Here is some reasonable documentation about Prefilter vs. InputSplitter: http://mail.scipy.org/pipermail/ipython-dev/2011-March/007334.html



---

archive/issue_comments_142037.json:
```json
{
    "body": "Updated patch",
    "created_at": "2012-05-27T20:26:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142037",
    "user": "https://github.com/vbraun"
}
```

Updated patch



---

archive/issue_comments_142038.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nAttachment: **[trac_13013_ROOT_configuration_files.patch.gz](https://github.com/sagemath/sage/files/ticket12719/trac_13013_ROOT_configuration_files.patch.gz)**\n\nThe trac_12719_ipython_fixes.patch switches form Prefilter to InputSplitter. \n\nI'm giving a positive review to everything that Mike wrote.",
    "created_at": "2012-05-27T20:34:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142038",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:46" align="right">comment:46</div>

Attachment: **[trac_13013_ROOT_configuration_files.patch.gz](https://github.com/sagemath/sage/files/ticket12719/trac_13013_ROOT_configuration_files.patch.gz)**

The trac_12719_ipython_fixes.patch switches form Prefilter to InputSplitter. 

I'm giving a positive review to everything that Mike wrote.



---

archive/issue_events_175707.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-05-27T20:34:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175707"
}
```



---

archive/issue_events_175708.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-05-27T20:34:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175708"
}
```



---

archive/issue_comments_142039.json:
```json
{
    "body": "Reviewer: **Volker Braun**",
    "created_at": "2012-05-27T20:34:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142039",
    "user": "https://github.com/vbraun"
}
```

Reviewer: **Volker Braun**



---

archive/issue_comments_142040.json:
```json
{
    "body": "Changed author from **Mike Hansen** to **Mike Hansen, Volker Braun**",
    "created_at": "2012-05-27T20:34:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142040",
    "user": "https://github.com/vbraun"
}
```

Changed author from **Mike Hansen** to **Mike Hansen, Volker Braun**



---

archive/issue_comments_142041.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -15,3 +15,4 @@\n To the sage library:\n * [attachment: trac_12719.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719.patch.gz)\n * [attachment: trac_12719-move_to_preparser.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser.patch.gz)\n+* [attachment: trac_12719_ipython_fixes.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz)\n``````\n",
    "created_at": "2012-05-27T20:34:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142041",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -15,3 +15,4 @@
 To the sage library:
 * [attachment: trac_12719.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719.patch.gz)
 * [attachment: trac_12719-move_to_preparser.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser.patch.gz)
+* [attachment: trac_12719_ipython_fixes.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz)
``````




---

archive/issue_comments_142042.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nWith the new patch `sage/misc/interpreter.py` has 100% coverage.",
    "created_at": "2012-05-27T22:05:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142042",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:47" align="right">comment:47</div>

With the new patch `sage/misc/interpreter.py` has 100% coverage.



---

archive/issue_comments_142043.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nnever mind.",
    "created_at": "2012-05-27T23:44:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142043",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:48" align="right">comment:48</div>

never mind.



---

archive/issue_comments_142044.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nIn Sage before this patch, the sage notebook, the Python command line, etc., we have:\n\n```\nfor i in range(10):\n    i\n```\noutputs the numbers up to 10.\n\nWith the new Ipython spkg, etc., we don't.  \n\n```\nsage: for i in range(10): i\nsage: \nExiting Sage (CPU time 0m0.07s, Wall time 2m3.22s).\nblastoff:sage wstein$ sage -ipython\nPython 2.7.2 (default, May 17 2012, 13:12:30) \nIn [1]: for i in range(10): i\nIn [2]: \n```\n\nI'm disappointed, especially because I thought this through and in sagews I recently wrote code so this works correctly in a single cell, even if there are several instances of this.  It's a matter of passing the 'single' option to exec, as is documented in the Python reference.  I wonder why they screwed this up in Ipython 0.12...?\n\nAnyway, I'm not saying this is a show stopper at all - I want the new ipython in sage.  I'm just a little concerned that literally the first thing I tried shows that they made what I consider a bad design choice.  Hopefully it was just bad luck.",
    "created_at": "2012-05-27T23:50:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142044",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:49" align="right">comment:49</div>

In Sage before this patch, the sage notebook, the Python command line, etc., we have:

```
for i in range(10):
    i
```
outputs the numbers up to 10.

With the new Ipython spkg, etc., we don't.  

```
sage: for i in range(10): i
sage: 
Exiting Sage (CPU time 0m0.07s, Wall time 2m3.22s).
blastoff:sage wstein$ sage -ipython
Python 2.7.2 (default, May 17 2012, 13:12:30) 
In [1]: for i in range(10): i
In [2]: 
```

I'm disappointed, especially because I thought this through and in sagews I recently wrote code so this works correctly in a single cell, even if there are several instances of this.  It's a matter of passing the 'single' option to exec, as is documented in the Python reference.  I wonder why they screwed this up in Ipython 0.12...?

Anyway, I'm not saying this is a show stopper at all - I want the new ipython in sage.  I'm just a little concerned that literally the first thing I tried shows that they made what I consider a bad design choice.  Hopefully it was just bad luck.



---

archive/issue_comments_142045.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nCool -- I tried out a bunch of other things including the new notebook (sage -ipython notebook) and didn't run into any serious issues.  So I'm happy with this from from a purely functional perspective.  Also, deleting tons of ugly code (done in the patches), looks great.",
    "created_at": "2012-05-28T00:04:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142045",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:50" align="right">comment:50</div>

Cool -- I tried out a bunch of other things including the new notebook (sage -ipython notebook) and didn't run into any serious issues.  So I'm happy with this from from a purely functional perspective.  Also, deleting tons of ugly code (done in the patches), looks great.



---

archive/issue_comments_142046.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nIt should be easy to get to get the correct functionality for `for i in range(10): i`. The  `shell.run_ast_nodes` method just has to be called with `interactivity=\"all\"` instead of `interactivity=\"last_expr\"`.",
    "created_at": "2012-05-28T00:10:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142046",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:51" align="right">comment:51</div>

It should be easy to get to get the correct functionality for `for i in range(10): i`. The  `shell.run_ast_nodes` method just has to be called with `interactivity="all"` instead of `interactivity="last_expr"`.



---

archive/issue_comments_142047.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nHere's a review of Volker's ipython_fixes patch:\n\n\n1. (minor) Remove \\ on line 1071\n2. Do one of the following:\n   a. Fix/deprecate/remove sage-gdb-ipython since it depends on SAGE_CLEAN\n   b. Just throw a deprecation warning with SAGE_CLEAN\n3. Turn autoindent back on.\n4. Why add debug=True and confirm_exit=False to default config.\n5. Load the startup file: line 1151",
    "created_at": "2012-05-28T04:38:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142047",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:52" align="right">comment:52</div>

Here's a review of Volker's ipython_fixes patch:


1. (minor) Remove \ on line 1071
2. Do one of the following:
   a. Fix/deprecate/remove sage-gdb-ipython since it depends on SAGE_CLEAN
   b. Just throw a deprecation warning with SAGE_CLEAN
3. Turn autoindent back on.
4. Why add debug=True and confirm_exit=False to default config.
5. Load the startup file: line 1151



---

archive/issue_comments_142048.json:
```json
{
    "body": "Initial patch",
    "created_at": "2012-05-28T05:45:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142048",
    "user": "https://github.com/vbraun"
}
```

Initial patch



---

archive/issue_comments_142049.json:
```json
{
    "body": "Changed reviewer from **Volker Braun** to **Volker Braun, Mike Hansen**",
    "created_at": "2012-05-28T05:55:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142049",
    "user": "https://github.com/vbraun"
}
```

Changed reviewer from **Volker Braun** to **Volker Braun, Mike Hansen**



---

archive/issue_comments_142050.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,9 +10,10 @@\n * [attachment: trac_12719-scripts.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz)\n \n To the root repository:\n-* [attachment: trac_13013_ROOT_configuration_files.patch](https://github.com/sagemath/sage/files/ticket12719/trac_13013_ROOT_configuration_files.patch.gz)\n+* [attachment: trac_12719_ROOT_configuration_files.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz)\n \n To the sage library:\n * [attachment: trac_12719.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719.patch.gz)\n * [attachment: trac_12719-move_to_preparser.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser.patch.gz)\n * [attachment: trac_12719_ipython_fixes.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz)\n+* [attachment: trac_12719_dedent.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz)\n``````\n",
    "created_at": "2012-05-28T05:55:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142050",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,9 +10,10 @@
 * [attachment: trac_12719-scripts.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz)
 
 To the root repository:
-* [attachment: trac_13013_ROOT_configuration_files.patch](https://github.com/sagemath/sage/files/ticket12719/trac_13013_ROOT_configuration_files.patch.gz)
+* [attachment: trac_12719_ROOT_configuration_files.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz)
 
 To the sage library:
 * [attachment: trac_12719.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719.patch.gz)
 * [attachment: trac_12719-move_to_preparser.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser.patch.gz)
 * [attachment: trac_12719_ipython_fixes.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz)
+* [attachment: trac_12719_dedent.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz)
``````




---

archive/issue_comments_142051.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nAttachment: **[trac_12719_dedent.patch.gz](https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz)**\n\n1, 3, 5: done\n\n4: I removed the debug, but I (and most others, I asked) definitely want to keep `confirm_exit=False`. Yes I really want to quit, geez! \n\n2: I'm in favor of a) and removed it.\n\nI've also renamed trac_13013_ROOT_configuration_files.patch (wrong ticket number) and added a patch to auto-dedent and eval in loops. Now the following works:\n\n```\nsage:         for i in range(3): i\n0\n1\n2\n```",
    "created_at": "2012-05-28T05:55:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142051",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:53" align="right">comment:53</div>

Attachment: **[trac_12719_dedent.patch.gz](https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz)**

1, 3, 5: done

4: I removed the debug, but I (and most others, I asked) definitely want to keep `confirm_exit=False`. Yes I really want to quit, geez! 

2: I'm in favor of a) and removed it.

I've also renamed trac_13013_ROOT_configuration_files.patch (wrong ticket number) and added a patch to auto-dedent and eval in loops. Now the following works:

```
sage:         for i in range(3): i
0
1
2
```



---

archive/issue_comments_142052.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nVolker's changes look good to me.",
    "created_at": "2012-05-28T06:09:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142052",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:54" align="right">comment:54</div>

Volker's changes look good to me.



---

archive/issue_comments_142053.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -17,3 +17,4 @@\n * [attachment: trac_12719-move_to_preparser.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser.patch.gz)\n * [attachment: trac_12719_ipython_fixes.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz)\n * [attachment: trac_12719_dedent.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz)\n+* [attachment: trac_12719_remove_sage_gdb_ipython.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz)\n``````\n",
    "created_at": "2012-05-28T06:09:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142053",
    "user": "https://github.com/mwhansen"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -17,3 +17,4 @@
 * [attachment: trac_12719-move_to_preparser.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser.patch.gz)
 * [attachment: trac_12719_ipython_fixes.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz)
 * [attachment: trac_12719_dedent.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz)
+* [attachment: trac_12719_remove_sage_gdb_ipython.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz)
``````




---

archive/issue_events_175709.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2012-05-28T06:09:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175709"
}
```



---

archive/issue_events_175710.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2012-05-28T06:09:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175710"
}
```



---

archive/issue_comments_142054.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -18,3 +18,4 @@\n * [attachment: trac_12719_ipython_fixes.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz)\n * [attachment: trac_12719_dedent.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz)\n * [attachment: trac_12719_remove_sage_gdb_ipython.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz)\n+* [attachment: trac_12719-crash.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-crash.patch.gz)\n``````\n",
    "created_at": "2012-05-28T20:20:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142054",
    "user": "https://github.com/mwhansen"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -18,3 +18,4 @@
 * [attachment: trac_12719_ipython_fixes.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz)
 * [attachment: trac_12719_dedent.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz)
 * [attachment: trac_12719_remove_sage_gdb_ipython.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz)
+* [attachment: trac_12719-crash.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-crash.patch.gz)
``````




---

archive/issue_comments_142055.json:
```json
{
    "body": "Attachment: **[trac_12719-crash.patch.gz](https://github.com/sagemath/sage/files/ticket12719/trac_12719-crash.patch.gz)**",
    "created_at": "2012-05-28T20:25:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142055",
    "user": "https://github.com/mwhansen"
}
```

Attachment: **[trac_12719-crash.patch.gz](https://github.com/sagemath/sage/files/ticket12719/trac_12719-crash.patch.gz)**



---

archive/issue_comments_142056.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nMike's addition of  trac_12719-crash.patch looks *great* to me as an addition.",
    "created_at": "2012-05-28T20:27:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142056",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:56" align="right">comment:56</div>

Mike's addition of  trac_12719-crash.patch looks *great* to me as an addition.



---

archive/issue_events_175711.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-05-29T00:48:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175711"
}
```



---

archive/issue_events_175712.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-05-29T00:48:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175712"
}
```



---

archive/issue_comments_142057.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nUnfortunately, this doesn't apply to sage-5.1.beta1:\n\n```\napplying trac_12719.patch\npatching file doc/en/reference/misc.rst\nHunk #1 succeeded at 30 with fuzz 2 (offset 2 lines).\npatching file sage/misc/interpreter.py\nHunk #1 FAILED at 0\nHunk #3 FAILED at 271\nHunk #4 FAILED at 385\nHunk #5 FAILED at 449\n4 out of 5 hunks FAILED -- saving rejects to file sage/misc/interpreter.py.rej\npatch failed, unable to continue (try -v)\npatch failed, rejects left in working dir\nerrors during apply, please fix and refresh trac_12719.patch\n```",
    "created_at": "2012-05-29T00:48:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142057",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:57" align="right">comment:57</div>

Unfortunately, this doesn't apply to sage-5.1.beta1:

```
applying trac_12719.patch
patching file doc/en/reference/misc.rst
Hunk #1 succeeded at 30 with fuzz 2 (offset 2 lines).
patching file sage/misc/interpreter.py
Hunk #1 FAILED at 0
Hunk #3 FAILED at 271
Hunk #4 FAILED at 385
Hunk #5 FAILED at 449
4 out of 5 hunks FAILED -- saving rejects to file sage/misc/interpreter.py.rej
patch failed, unable to continue (try -v)
patch failed, rejects left in working dir
errors during apply, please fix and refresh trac_12719.patch
```



---

archive/issue_comments_142058.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nI've rebased this on top of #11817.",
    "created_at": "2012-05-29T01:18:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142058",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:58" align="right">comment:58</div>

I've rebased this on top of #11817.



---

archive/issue_comments_142059.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -13,7 +13,7 @@\n * [attachment: trac_12719_ROOT_configuration_files.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz)\n \n To the sage library:\n-* [attachment: trac_12719.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719.patch.gz)\n+* [attachment: trac_12719-5.1beta1.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-5.1beta1.patch.gz)\n * [attachment: trac_12719-move_to_preparser.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser.patch.gz)\n * [attachment: trac_12719_ipython_fixes.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz)\n * [attachment: trac_12719_dedent.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz)\n``````\n",
    "created_at": "2012-05-29T01:18:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142059",
    "user": "https://github.com/mwhansen"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -13,7 +13,7 @@
 * [attachment: trac_12719_ROOT_configuration_files.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz)
 
 To the sage library:
-* [attachment: trac_12719.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719.patch.gz)
+* [attachment: trac_12719-5.1beta1.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-5.1beta1.patch.gz)
 * [attachment: trac_12719-move_to_preparser.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser.patch.gz)
 * [attachment: trac_12719_ipython_fixes.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz)
 * [attachment: trac_12719_dedent.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz)
``````




---

archive/issue_events_175713.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2012-05-29T01:18:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175713"
}
```



---

archive/issue_events_175714.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2012-05-29T01:18:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175714"
}
```



---

archive/issue_comments_142060.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,6 +8,7 @@\n \n To the scripts repository: \n * [attachment: trac_12719-scripts.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz)\n+* [attachment: trac_12719_remove_sage_gdb_ipython.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz)\n \n To the root repository:\n * [attachment: trac_12719_ROOT_configuration_files.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz)\n@@ -17,5 +18,4 @@\n * [attachment: trac_12719-move_to_preparser.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser.patch.gz)\n * [attachment: trac_12719_ipython_fixes.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz)\n * [attachment: trac_12719_dedent.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz)\n-* [attachment: trac_12719_remove_sage_gdb_ipython.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz)\n * [attachment: trac_12719-crash.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-crash.patch.gz)\n``````\n",
    "created_at": "2012-05-29T20:08:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142060",
    "user": "https://github.com/jhpalmieri"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,6 +8,7 @@
 
 To the scripts repository: 
 * [attachment: trac_12719-scripts.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz)
+* [attachment: trac_12719_remove_sage_gdb_ipython.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz)
 
 To the root repository:
 * [attachment: trac_12719_ROOT_configuration_files.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz)
@@ -17,5 +18,4 @@
 * [attachment: trac_12719-move_to_preparser.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser.patch.gz)
 * [attachment: trac_12719_ipython_fixes.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz)
 * [attachment: trac_12719_dedent.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz)
-* [attachment: trac_12719_remove_sage_gdb_ipython.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz)
 * [attachment: trac_12719-crash.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-crash.patch.gz)
``````




---

archive/issue_comments_142061.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nNow it applies but I get documentation errors:\n\n```\ndochtml.log:/padic/scratch/jdemeyer/merger/sage-5.1.beta3/local/lib/python2.7/site-packages/sage/misc/interpreter.py:docstring of sage.misc.interpreter:12: WARNING: Block quote ends without a blank line; unexpected unindent.\ndochtml.log:/padic/scratch/jdemeyer/merger/sage-5.1.beta3/local/lib/python2.7/site-packages/sage/misc/interpreter.py:docstring of sage.misc.interpreter:8: WARNING: Block quote ends without a blank line; unexpected unindent.\ndochtml.log:/padic/scratch/jdemeyer/merger/sage-5.1.beta3/local/lib/python2.7/site-packages/sage/misc/interpreter.py:docstring of sage.misc.interpreter:8: WARNING: Block quote ends without a blank line; unexpected unindent.\ndochtml.log:/padic/scratch/jdemeyer/merger/sage-5.1.beta3/local/lib/python2.7/site-packages/sage/misc/interpreter.py:docstring of sage.misc.interpreter:11: WARNING: Definition list ends without a blank line; unexpected unindent.\ndochtml.log:/padic/scratch/jdemeyer/merger/sage-5.1.beta3/local/lib/python2.7/site-packages/sage/misc/interpreter.py:docstring of sage.misc.interpreter:13: ERROR: Unexpected indentation.\n```",
    "created_at": "2012-05-30T05:34:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142061",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:60" align="right">comment:60</div>

Now it applies but I get documentation errors:

```
dochtml.log:/padic/scratch/jdemeyer/merger/sage-5.1.beta3/local/lib/python2.7/site-packages/sage/misc/interpreter.py:docstring of sage.misc.interpreter:12: WARNING: Block quote ends without a blank line; unexpected unindent.
dochtml.log:/padic/scratch/jdemeyer/merger/sage-5.1.beta3/local/lib/python2.7/site-packages/sage/misc/interpreter.py:docstring of sage.misc.interpreter:8: WARNING: Block quote ends without a blank line; unexpected unindent.
dochtml.log:/padic/scratch/jdemeyer/merger/sage-5.1.beta3/local/lib/python2.7/site-packages/sage/misc/interpreter.py:docstring of sage.misc.interpreter:8: WARNING: Block quote ends without a blank line; unexpected unindent.
dochtml.log:/padic/scratch/jdemeyer/merger/sage-5.1.beta3/local/lib/python2.7/site-packages/sage/misc/interpreter.py:docstring of sage.misc.interpreter:11: WARNING: Definition list ends without a blank line; unexpected unindent.
dochtml.log:/padic/scratch/jdemeyer/merger/sage-5.1.beta3/local/lib/python2.7/site-packages/sage/misc/interpreter.py:docstring of sage.misc.interpreter:13: ERROR: Unexpected indentation.
```



---

archive/issue_events_175715.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-05-30T05:34:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175715"
}
```



---

archive/issue_events_175716.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-05-30T05:34:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175716"
}
```



---

archive/issue_comments_142062.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nAlso, [attachment: trac_12719-scripts.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz) needs a commit message.",
    "created_at": "2012-05-30T05:36:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142062",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:61" align="right">comment:61</div>

Also, [attachment: trac_12719-scripts.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz) needs a commit message.



---

archive/issue_comments_142063.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nIt seems that double question mark, like `trace??`, doesn't bring up the source code anymore, but just brings up the docstring.  It seems that trac_12719_ipython_fixes.patch broke this (double question marks work with just the first two patches, but not after that third patch).",
    "created_at": "2012-06-08T03:47:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142063",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:62" align="right">comment:62</div>

It seems that double question mark, like `trace??`, doesn't bring up the source code anymore, but just brings up the docstring.  It seems that trac_12719_ipython_fixes.patch broke this (double question marks work with just the first two patches, but not after that third patch).



---

archive/issue_comments_142064.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,6 +3,8 @@\n Note: To use the QT console (`sage -ipython qtconsole`), you need qt/qt-devel in your base OS install, the optional zeromq/pyzmq spkgs from #12843, and the optional sip/PyQt spkgs from #13022.\n \n Install IPython 0.12.1: spkg at [http://sage.math.washington.edu/home/jason/ipython-0.12.1.spkg](http://sage.math.washington.edu/home/jason/ipython-0.12.1.spkg)\n+\n+I also have an IPython 0.13beta1 spkg at [http://sage.math.washington.edu/home/jason/ipython-0.13.beta1.spkg](http://sage.math.washington.edu/home/jason/ipython-0.13.beta1.spkg), which does not currently work (but would be great if it did!)\n \n **apply**:\n \n``````\n",
    "created_at": "2012-06-19T22:02:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142064",
    "user": "https://github.com/jasongrout"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,6 +3,8 @@
 Note: To use the QT console (`sage -ipython qtconsole`), you need qt/qt-devel in your base OS install, the optional zeromq/pyzmq spkgs from #12843, and the optional sip/PyQt spkgs from #13022.
 
 Install IPython 0.12.1: spkg at [http://sage.math.washington.edu/home/jason/ipython-0.12.1.spkg](http://sage.math.washington.edu/home/jason/ipython-0.12.1.spkg)
+
+I also have an IPython 0.13beta1 spkg at [http://sage.math.washington.edu/home/jason/ipython-0.13.beta1.spkg](http://sage.math.washington.edu/home/jason/ipython-0.13.beta1.spkg), which does not currently work (but would be great if it did!)
 
 **apply**:
 
``````




---

archive/issue_comments_142065.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -14,6 +14,7 @@\n \n To the root repository:\n * [attachment: trac_12719_ROOT_configuration_files.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz)\n+* [attachment: trac_12719-ipythondir013.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-ipythondir013.patch.gz) -- for IPython 0.13\n \n To the sage library:\n * [attachment: trac_12719-5.1beta1.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-5.1beta1.patch.gz)\n@@ -21,3 +22,4 @@\n * [attachment: trac_12719_ipython_fixes.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz)\n * [attachment: trac_12719_dedent.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz)\n * [attachment: trac_12719-crash.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-crash.patch.gz)\n+* [attachment: trac_12719-cellmagics013.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-cellmagics013.patch.gz) -- for IPython 0.13\n``````\n",
    "created_at": "2012-06-20T13:48:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142065",
    "user": "https://github.com/jasongrout"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -14,6 +14,7 @@
 
 To the root repository:
 * [attachment: trac_12719_ROOT_configuration_files.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz)
+* [attachment: trac_12719-ipythondir013.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-ipythondir013.patch.gz) -- for IPython 0.13
 
 To the sage library:
 * [attachment: trac_12719-5.1beta1.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-5.1beta1.patch.gz)
@@ -21,3 +22,4 @@
 * [attachment: trac_12719_ipython_fixes.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz)
 * [attachment: trac_12719_dedent.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz)
 * [attachment: trac_12719-crash.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-crash.patch.gz)
+* [attachment: trac_12719-cellmagics013.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-cellmagics013.patch.gz) -- for IPython 0.13
``````




---

archive/issue_comments_142066.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nAdd two more patches to get the new IPython 0.13beta1 spkg above to work.",
    "created_at": "2012-06-20T13:48:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142066",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:64" align="right">comment:64</div>

Add two more patches to get the new IPython 0.13beta1 spkg above to work.



---

archive/issue_comments_142067.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,7 +4,7 @@\n \n Install IPython 0.12.1: spkg at [http://sage.math.washington.edu/home/jason/ipython-0.12.1.spkg](http://sage.math.washington.edu/home/jason/ipython-0.12.1.spkg)\n \n-I also have an IPython 0.13beta1 spkg at [http://sage.math.washington.edu/home/jason/ipython-0.13.beta1.spkg](http://sage.math.washington.edu/home/jason/ipython-0.13.beta1.spkg), which does not currently work (but would be great if it did!)\n+I also have an IPython 0.13beta1 spkg at [http://sage.math.washington.edu/home/jason/ipython-0.13beta1.spkg](http://sage.math.washington.edu/home/jason/ipython-0.13beta1.spkg), which does not currently work (but would be great if it did!)\n \n **apply**:\n \n``````\n",
    "created_at": "2012-06-20T15:33:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142067",
    "user": "https://github.com/jasongrout"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,7 +4,7 @@
 
 Install IPython 0.12.1: spkg at [http://sage.math.washington.edu/home/jason/ipython-0.12.1.spkg](http://sage.math.washington.edu/home/jason/ipython-0.12.1.spkg)
 
-I also have an IPython 0.13beta1 spkg at [http://sage.math.washington.edu/home/jason/ipython-0.13.beta1.spkg](http://sage.math.washington.edu/home/jason/ipython-0.13.beta1.spkg), which does not currently work (but would be great if it did!)
+I also have an IPython 0.13beta1 spkg at [http://sage.math.washington.edu/home/jason/ipython-0.13beta1.spkg](http://sage.math.washington.edu/home/jason/ipython-0.13beta1.spkg), which does not currently work (but would be great if it did!)
 
 **apply**:
 
``````




---

archive/issue_comments_142068.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,7 +4,7 @@\n \n Install IPython 0.12.1: spkg at [http://sage.math.washington.edu/home/jason/ipython-0.12.1.spkg](http://sage.math.washington.edu/home/jason/ipython-0.12.1.spkg)\n \n-I also have an IPython 0.13beta1 spkg at [http://sage.math.washington.edu/home/jason/ipython-0.13beta1.spkg](http://sage.math.washington.edu/home/jason/ipython-0.13beta1.spkg), which does not currently work (but would be great if it did!)\n+I also have an IPython 0.13beta1 spkg at [http://sage.math.washington.edu/home/jason/ipython-0.13beta1.spkg](http://sage.math.washington.edu/home/jason/ipython-0.13beta1.spkg), which requires the patches below marked \"for IPython 0.13\" as well.\n \n **apply**:\n \n``````\n",
    "created_at": "2012-06-20T15:33:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142068",
    "user": "https://github.com/jasongrout"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,7 +4,7 @@
 
 Install IPython 0.12.1: spkg at [http://sage.math.washington.edu/home/jason/ipython-0.12.1.spkg](http://sage.math.washington.edu/home/jason/ipython-0.12.1.spkg)
 
-I also have an IPython 0.13beta1 spkg at [http://sage.math.washington.edu/home/jason/ipython-0.13beta1.spkg](http://sage.math.washington.edu/home/jason/ipython-0.13beta1.spkg), which does not currently work (but would be great if it did!)
+I also have an IPython 0.13beta1 spkg at [http://sage.math.washington.edu/home/jason/ipython-0.13beta1.spkg](http://sage.math.washington.edu/home/jason/ipython-0.13beta1.spkg), which requires the patches below marked "for IPython 0.13" as well.
 
 **apply**:
 
``````




---

archive/issue_comments_142069.json:
```json
{
    "body": "Work Issues: **?? doesn't work**",
    "created_at": "2012-06-20T17:26:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142069",
    "user": "https://github.com/jasongrout"
}
```

Work Issues: **?? doesn't work**



---

archive/issue_comments_142070.json:
```json
{
    "body": "Changed work issues from **?? doesn't work** to **?? doesn't show code**",
    "created_at": "2012-06-20T17:26:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142070",
    "user": "https://github.com/jasongrout"
}
```

Changed work issues from **?? doesn't work** to **?? doesn't show code**



---

archive/issue_comments_142071.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -23,3 +23,22 @@\n * [attachment: trac_12719_dedent.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz)\n * [attachment: trac_12719-crash.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-crash.patch.gz)\n * [attachment: trac_12719-cellmagics013.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-cellmagics013.patch.gz) -- for IPython 0.13\n+\n+```\n+cd SAGE_ROOT\n+cd local/bin\n+hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz\n+hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz\n+cd ../../\n+hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz\n+hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-ipythondir013.patch.gz\n+cd devel/sage\n+hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-5.1beta1.patch.gz\n+hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser.patch.gz\n+hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz\n+hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz\n+hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-crash.patch.gz\n+hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-cellmagics013.patch.gz\n+cd ../../\n+sage -br\n+```\n``````\n",
    "created_at": "2012-06-21T20:39:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142071",
    "user": "https://github.com/jasongrout"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -23,3 +23,22 @@
 * [attachment: trac_12719_dedent.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz)
 * [attachment: trac_12719-crash.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-crash.patch.gz)
 * [attachment: trac_12719-cellmagics013.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-cellmagics013.patch.gz) -- for IPython 0.13
+
+```
+cd SAGE_ROOT
+cd local/bin
+hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz
+hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz
+cd ../../
+hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz
+hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-ipythondir013.patch.gz
+cd devel/sage
+hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-5.1beta1.patch.gz
+hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser.patch.gz
+hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz
+hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz
+hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-crash.patch.gz
+hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-cellmagics013.patch.gz
+cd ../../
+sage -br
+```
``````




---

archive/issue_comments_142072.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -40,5 +40,5 @@\n hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-crash.patch.gz\n hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-cellmagics013.patch.gz\n cd ../../\n-sage -br\n+./sage -br\n ```\n``````\n",
    "created_at": "2012-06-21T20:40:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142072",
    "user": "https://github.com/jasongrout"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -40,5 +40,5 @@
 hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-crash.patch.gz
 hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-cellmagics013.patch.gz
 cd ../../
-sage -br
+./sage -br
 ```
``````




---

archive/issue_comments_142073.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nI rebased [attachment: trac_12719_ROOT_configuration_files.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz) to sage 5.1beta6",
    "created_at": "2012-06-25T16:44:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142073",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:71" align="right">comment:71</div>

I rebased [attachment: trac_12719_ROOT_configuration_files.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz) to sage 5.1beta6



---

archive/issue_comments_142074.json:
```json
{
    "body": "Changed author from **Mike Hansen, Volker Braun** to **Mike Hansen, Volker Braun, Jason Grout**",
    "created_at": "2012-06-30T16:49:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142074",
    "user": "https://github.com/jasongrout"
}
```

Changed author from **Mike Hansen, Volker Braun** to **Mike Hansen, Volker Braun, Jason Grout**



---

archive/issue_comments_142075.json:
```json
{
    "body": "Changed reviewer from **Volker Braun, Mike Hansen** to **Volker Braun, Mike Hansen, Jason Grout**",
    "created_at": "2012-06-30T16:49:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142075",
    "user": "https://github.com/jasongrout"
}
```

Changed reviewer from **Volker Braun, Mike Hansen** to **Volker Braun, Mike Hansen, Jason Grout**



---

archive/issue_events_175717.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2012-06-30T16:49:48Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "title_is": "Upgrade to IPython 0.13",
    "title_was": "Upgrade to IPython 0.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175717"
}
```



---

archive/issue_comments_142076.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,9 +2,7 @@\n \n Note: To use the QT console (`sage -ipython qtconsole`), you need qt/qt-devel in your base OS install, the optional zeromq/pyzmq spkgs from #12843, and the optional sip/PyQt spkgs from #13022.\n \n-Install IPython 0.12.1: spkg at [http://sage.math.washington.edu/home/jason/ipython-0.12.1.spkg](http://sage.math.washington.edu/home/jason/ipython-0.12.1.spkg)\n-\n-I also have an IPython 0.13beta1 spkg at [http://sage.math.washington.edu/home/jason/ipython-0.13beta1.spkg](http://sage.math.washington.edu/home/jason/ipython-0.13beta1.spkg), which requires the patches below marked \"for IPython 0.13\" as well.\n+Install the IPython 0.13 spkg at [http://sage.math.washington.edu/home/jason/ipython-0.13.spkg](http://sage.math.washington.edu/home/jason/ipython-0.13.spkg)\n \n **apply**:\n \n@@ -14,7 +12,7 @@\n \n To the root repository:\n * [attachment: trac_12719_ROOT_configuration_files.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz)\n-* [attachment: trac_12719-ipythondir013.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-ipythondir013.patch.gz) -- for IPython 0.13\n+* [attachment: trac_12719-ipythondir013.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-ipythondir013.patch.gz)\n \n To the sage library:\n * [attachment: trac_12719-5.1beta1.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-5.1beta1.patch.gz)\n@@ -22,7 +20,7 @@\n * [attachment: trac_12719_ipython_fixes.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz)\n * [attachment: trac_12719_dedent.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz)\n * [attachment: trac_12719-crash.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-crash.patch.gz)\n-* [attachment: trac_12719-cellmagics013.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-cellmagics013.patch.gz) -- for IPython 0.13\n+* [attachment: trac_12719-cellmagics013.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-cellmagics013.patch.gz)\n \n ```\n cd SAGE_ROOT\n``````\n",
    "created_at": "2012-06-30T16:49:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142076",
    "user": "https://github.com/jasongrout"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,9 +2,7 @@
 
 Note: To use the QT console (`sage -ipython qtconsole`), you need qt/qt-devel in your base OS install, the optional zeromq/pyzmq spkgs from #12843, and the optional sip/PyQt spkgs from #13022.
 
-Install IPython 0.12.1: spkg at [http://sage.math.washington.edu/home/jason/ipython-0.12.1.spkg](http://sage.math.washington.edu/home/jason/ipython-0.12.1.spkg)
-
-I also have an IPython 0.13beta1 spkg at [http://sage.math.washington.edu/home/jason/ipython-0.13beta1.spkg](http://sage.math.washington.edu/home/jason/ipython-0.13beta1.spkg), which requires the patches below marked "for IPython 0.13" as well.
+Install the IPython 0.13 spkg at [http://sage.math.washington.edu/home/jason/ipython-0.13.spkg](http://sage.math.washington.edu/home/jason/ipython-0.13.spkg)
 
 **apply**:
 
@@ -14,7 +12,7 @@
 
 To the root repository:
 * [attachment: trac_12719_ROOT_configuration_files.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz)
-* [attachment: trac_12719-ipythondir013.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-ipythondir013.patch.gz) -- for IPython 0.13
+* [attachment: trac_12719-ipythondir013.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-ipythondir013.patch.gz)
 
 To the sage library:
 * [attachment: trac_12719-5.1beta1.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-5.1beta1.patch.gz)
@@ -22,7 +20,7 @@
 * [attachment: trac_12719_ipython_fixes.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz)
 * [attachment: trac_12719_dedent.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz)
 * [attachment: trac_12719-crash.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-crash.patch.gz)
-* [attachment: trac_12719-cellmagics013.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-cellmagics013.patch.gz) -- for IPython 0.13
+* [attachment: trac_12719-cellmagics013.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-cellmagics013.patch.gz)
 
 ```
 cd SAGE_ROOT
``````




---

archive/issue_comments_142077.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">comment:73</div>\n\nI upgraded the spkg to 0.13, which was just released today.",
    "created_at": "2012-06-30T16:50:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142077",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:73" align="right">comment:73</div>

I upgraded the spkg to 0.13, which was just released today.



---

archive/issue_comments_142078.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-We need to upgrade IPython to the shiny new thing. Well, not really - the shiny new thing was 0.11, and 0.12 is now stable. It's been mostly rewritten and is now a lot more modular, as I understand it. Definitely worth using in Sage.\n+We need to upgrade IPython to the shiny new thing. Well, not really - the shiny new thing was 0.11, and 0.13 is now stable. It's been mostly rewritten and is now a lot more modular, as I understand it. Definitely worth using in Sage.\n \n Note: To use the QT console (`sage -ipython qtconsole`), you need qt/qt-devel in your base OS install, the optional zeromq/pyzmq spkgs from #12843, and the optional sip/PyQt spkgs from #13022.\n \n``````\n",
    "created_at": "2012-06-30T17:15:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142078",
    "user": "https://github.com/jasongrout"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-We need to upgrade IPython to the shiny new thing. Well, not really - the shiny new thing was 0.11, and 0.12 is now stable. It's been mostly rewritten and is now a lot more modular, as I understand it. Definitely worth using in Sage.
+We need to upgrade IPython to the shiny new thing. Well, not really - the shiny new thing was 0.11, and 0.13 is now stable. It's been mostly rewritten and is now a lot more modular, as I understand it. Definitely worth using in Sage.
 
 Note: To use the QT console (`sage -ipython qtconsole`), you need qt/qt-devel in your base OS install, the optional zeromq/pyzmq spkgs from #12843, and the optional sip/PyQt spkgs from #13022.
 
``````




---

archive/issue_comments_142079.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">comment:75</div>\n\nReplying to [@williamstein](#comment:49):\n> In Sage before this patch, the sage notebook, the Python command line, etc., we have:\n> \n> ```\n> for i in range(10):\n>     i\n> ```\n> outputs the numbers up to 10.\n> \n> With the new Ipython spkg, etc., we don't.  \n> \n> ```\n> sage: for i in range(10): i\n> sage: \n> Exiting Sage (CPU time 0m0.07s, Wall time 2m3.22s).\n> blastoff:sage wstein$ sage -ipython\n> Python 2.7.2 (default, May 17 2012, 13:12:30) \n> In [1]: for i in range(10): i\n> In [2]: \n> ```\n> \n> I'm disappointed, especially because I thought this through and in sagews I recently wrote code so this works correctly in a single cell, even if there are several instances of this.  It's a matter of passing the 'single' option to exec, as is documented in the Python reference.  I wonder why they screwed this up in Ipython 0.12...?\n> \n> Anyway, I'm not saying this is a show stopper at all - I want the new ipython in sage.  I'm just a little concerned that literally the first thing I tried shows that they made what I consider a bad design choice.  Hopefully it was just bad luck. \n\nFernando Perez responded: \n\nBTW, regarding William's comment, that was not a mistake or omission: it was a very deliberate choice we made after lots of thought. Given that we manage numbered prompts and history, and that matplotlib produces so many plots as side effects, after much experimentation we found it worked much better to only execute with 'interactive' mode the last block.\n\nSage doesn't distinguish stdout from python sys.displayhook, so the opposite behavior may be more desirable, but we actually consider that a 'bad design choice' of sage, because it loses an important distinction and the cache management of output history.\n\nSo in summary: our choice is actually sensible and consistent given IPython's internal design :)",
    "created_at": "2012-06-30T17:38:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142079",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:75" align="right">comment:75</div>

Replying to [@williamstein](#comment:49):
> In Sage before this patch, the sage notebook, the Python command line, etc., we have:
> 
> ```
> for i in range(10):
>     i
> ```
> outputs the numbers up to 10.
> 
> With the new Ipython spkg, etc., we don't.  
> 
> ```
> sage: for i in range(10): i
> sage: 
> Exiting Sage (CPU time 0m0.07s, Wall time 2m3.22s).
> blastoff:sage wstein$ sage -ipython
> Python 2.7.2 (default, May 17 2012, 13:12:30) 
> In [1]: for i in range(10): i
> In [2]: 
> ```
> 
> I'm disappointed, especially because I thought this through and in sagews I recently wrote code so this works correctly in a single cell, even if there are several instances of this.  It's a matter of passing the 'single' option to exec, as is documented in the Python reference.  I wonder why they screwed this up in Ipython 0.12...?
> 
> Anyway, I'm not saying this is a show stopper at all - I want the new ipython in sage.  I'm just a little concerned that literally the first thing I tried shows that they made what I consider a bad design choice.  Hopefully it was just bad luck. 

Fernando Perez responded: 

BTW, regarding William's comment, that was not a mistake or omission: it was a very deliberate choice we made after lots of thought. Given that we manage numbered prompts and history, and that matplotlib produces so many plots as side effects, after much experimentation we found it worked much better to only execute with 'interactive' mode the last block.

Sage doesn't distinguish stdout from python sys.displayhook, so the opposite behavior may be more desirable, but we actually consider that a 'bad design choice' of sage, because it loses an important distinction and the cache management of output history.

So in summary: our choice is actually sensible and consistent given IPython's internal design :)



---

archive/issue_comments_142080.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">comment:76</div>\n\nFernando:  I looked in the IPython source, and it seems that IPython is a little more subtle than mentioned above.  By default, it only executes the last block as interactive (compile in 'single' mode) *if it is an expression*. In Sage, we (by default) execute the last block always in 'single' mode.  I think that is the difference here.\n\nGiven that (and if I understood correctly), could you explain again your reasoning for choosing to not compile in 'single' mode if it isn't an expression?\n\nNote to self for future reference: `for i in range(10): i` invokes sys.displayhook 10 times to display i if compiled in 'single' mode.",
    "created_at": "2012-06-30T18:11:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142080",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:76" align="right">comment:76</div>

Fernando:  I looked in the IPython source, and it seems that IPython is a little more subtle than mentioned above.  By default, it only executes the last block as interactive (compile in 'single' mode) *if it is an expression*. In Sage, we (by default) execute the last block always in 'single' mode.  I think that is the difference here.

Given that (and if I understood correctly), could you explain again your reasoning for choosing to not compile in 'single' mode if it isn't an expression?

Note to self for future reference: `for i in range(10): i` invokes sys.displayhook 10 times to display i if compiled in 'single' mode.



---

archive/issue_comments_142081.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">comment:77</div>\n\nAlso, note to William: it is an easy option to set to have IPython *always* execute the last block in interactive mode.  It's just not the default.",
    "created_at": "2012-06-30T18:12:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142081",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:77" align="right">comment:77</div>

Also, note to William: it is an easy option to set to have IPython *always* execute the last block in interactive mode.  It's just not the default.



---

archive/issue_comments_142082.json:
```json
{
    "body": "<div id=\"comment:78\" align=\"right\">comment:78</div>\n\nReplying to [@jasongrout](#comment:76):\n> Fernando:  I looked in the IPython source, and it seems that IPython is a little more subtle than mentioned above.  By default, it only executes the last block as interactive (compile in 'single' mode) *if it is an expression*. In Sage, we (by default) execute the last block always in 'single' mode.  I think that is the difference here.\n> \n> Given that (and if I understood correctly), could you explain again your reasoning for choosing to not compile in 'single' mode if it isn't an expression?\n\nAnd here is Fernando's response:\n\nPrecisely so that if the last block has a loop, it doesn't produce multiple `Out [NN]` cells.  We want to keep a one-to-one mapping between a cell and its output.  For example it's quite common to write code like:\n\n```\nfor i in x:\n  plot(x[i], label='blah_i')\n```\n\nIf we compile that as 'single', we'd get all the Matplotlib line collection results piling up at the bottom, one for each plot call.\n\nWe played a *lot* with various options, and settled on this behavior after much experimentation.  After 2 years of using it, I remain convinced it's the right solution *for us*.  Not to say that Sage can't make a different choice that works better for you guys, of course!",
    "created_at": "2012-06-30T18:24:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142082",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:78" align="right">comment:78</div>

Replying to [@jasongrout](#comment:76):
> Fernando:  I looked in the IPython source, and it seems that IPython is a little more subtle than mentioned above.  By default, it only executes the last block as interactive (compile in 'single' mode) *if it is an expression*. In Sage, we (by default) execute the last block always in 'single' mode.  I think that is the difference here.
> 
> Given that (and if I understood correctly), could you explain again your reasoning for choosing to not compile in 'single' mode if it isn't an expression?

And here is Fernando's response:

Precisely so that if the last block has a loop, it doesn't produce multiple `Out [NN]` cells.  We want to keep a one-to-one mapping between a cell and its output.  For example it's quite common to write code like:

```
for i in x:
  plot(x[i], label='blah_i')
```

If we compile that as 'single', we'd get all the Matplotlib line collection results piling up at the bottom, one for each plot call.

We played a *lot* with various options, and settled on this behavior after much experimentation.  After 2 years of using it, I remain convinced it's the right solution *for us*.  Not to say that Sage can't make a different choice that works better for you guys, of course!



---

archive/issue_comments_142083.json:
```json
{
    "body": "<div id=\"comment:79\" align=\"right\">comment:79</div>\n\nTo change this, we just need to set `ast_node_interactivity` to `\"last\"` in the InteractiveShell.",
    "created_at": "2012-06-30T18:26:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142083",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:79" align="right">comment:79</div>

To change this, we just need to set `ast_node_interactivity` to `"last"` in the InteractiveShell.



---

archive/issue_comments_142084.json:
```json
{
    "body": "<div id=\"comment:80\" align=\"right\">comment:80</div>\n\nReplying to [@kiwifb](#comment:2):\n> Would be nice but we need some porting, here is what typically happen if you try to use ipython-0.12 with sage:\n> \n> ```\n> $ sage\n> ----------------------------------------------------------------------\n> | Sage Version 4.7.2, Release Date: 2011-10-29                       |\n> | Type notebook() for the GUI, and license() for information.        |\n> ----------------------------------------------------------------------\n> Traceback (most recent call last):\n>   File \"/usr/bin/sage-ipython\", line 19, in <module>\n>     from IPython.CrashHandler import CrashHandler\n> ImportError: No module named CrashHandler\n> ```\n\n\nHi fbissey, sorry for hijacking this a bit, but i had exactly the same problem over and over again. What I just found out (and I think it really helps) is to temporarily disable the paths containing \".local\" in sys.path in the sage-ipython file. The reason is, that ipython seems to import the \"site package\" (disable it for pure python via \"-S\"), because that's where my ipython 0.13 is.\n\nSo, by adding this to sage-ipython you I have both at the same time:\n\n```\n~~~ after import sys\noldpath = sys.path\nsys.path = filter(lambda s : '.local' not in s, sys.path)\nimport IPython\nsys.path = oldpath\n```",
    "created_at": "2012-07-14T20:20:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142084",
    "user": "https://github.com/haraldschilly"
}
```

<div id="comment:80" align="right">comment:80</div>

Replying to [@kiwifb](#comment:2):
> Would be nice but we need some porting, here is what typically happen if you try to use ipython-0.12 with sage:
> 
> ```
> $ sage
> ----------------------------------------------------------------------
> | Sage Version 4.7.2, Release Date: 2011-10-29                       |
> | Type notebook() for the GUI, and license() for information.        |
> ----------------------------------------------------------------------
> Traceback (most recent call last):
>   File "/usr/bin/sage-ipython", line 19, in <module>
>     from IPython.CrashHandler import CrashHandler
> ImportError: No module named CrashHandler
> ```


Hi fbissey, sorry for hijacking this a bit, but i had exactly the same problem over and over again. What I just found out (and I think it really helps) is to temporarily disable the paths containing ".local" in sys.path in the sage-ipython file. The reason is, that ipython seems to import the "site package" (disable it for pure python via "-S"), because that's where my ipython 0.13 is.

So, by adding this to sage-ipython you I have both at the same time:

```
~~~ after import sys
oldpath = sys.path
sys.path = filter(lambda s : '.local' not in s, sys.path)
import IPython
sys.path = oldpath
```



---

archive/issue_comments_142085.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -24,19 +24,19 @@\n \n ```\n cd SAGE_ROOT\n-cd local/bin\n-hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz\n-hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz\n-cd ../../\n-hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz\n-hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-ipythondir013.patch.gz\n-cd devel/sage\n-hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-5.1beta1.patch.gz\n-hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser.patch.gz\n-hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz\n-hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz\n-hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-crash.patch.gz\n-hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-cellmagics013.patch.gz\n-cd ../../\n+\n+./sage --hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz\n+./sage --hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-ipythondir013.patch.gz\n+\n+./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz\n+./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz\n+\n+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-5.1beta1.patch.gz\n+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser.patch.gz\n+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz\n+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz\n+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-crash.patch.gz\n+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-cellmagics013.patch.gz\n+\n ./sage -br\n ```\n``````\n",
    "created_at": "2012-07-17T14:16:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142085",
    "user": "https://github.com/jasongrout"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -24,19 +24,19 @@
 
 ```
 cd SAGE_ROOT
-cd local/bin
-hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz
-hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz
-cd ../../
-hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz
-hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-ipythondir013.patch.gz
-cd devel/sage
-hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-5.1beta1.patch.gz
-hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser.patch.gz
-hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz
-hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz
-hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-crash.patch.gz
-hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-cellmagics013.patch.gz
-cd ../../
+
+./sage --hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz
+./sage --hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-ipythondir013.patch.gz
+
+./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz
+./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz
+
+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-5.1beta1.patch.gz
+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser.patch.gz
+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz
+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz
+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-crash.patch.gz
+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-cellmagics013.patch.gz
+
 ./sage -br
 ```
``````




---

archive/issue_comments_142086.json:
```json
{
    "body": "Attachment: **[trac_12719_ipython_fixes.patch.gz](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz)**\n\nUpdated patch",
    "created_at": "2012-07-17T14:29:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142086",
    "user": "https://github.com/jasongrout"
}
```

Attachment: **[trac_12719_ipython_fixes.patch.gz](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz)**

Updated patch



---

archive/issue_comments_142087.json:
```json
{
    "body": "<div id=\"comment:82\" align=\"right\">comment:82</div>\n\nI rebased the only rejected patch for 5.2beta1",
    "created_at": "2012-07-17T14:30:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142087",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:82" align="right">comment:82</div>

I rebased the only rejected patch for 5.2beta1



---

archive/issue_comments_142088.json:
```json
{
    "body": "<div id=\"comment:83\" align=\"right\">comment:83</div>\n\nMy 2 cents, after I forced myself to use this for the last few weeks on my laptop.  I have found the new ipython to be pretty annoying.  The cut and paste behavior and lack of autoindent at the command line is pretty painful.   The thing that made me finally give up and revert to the old 0.10 ipython was when I hit control-c at the wrong moment when starting Sage, and somehow the ipython history sqlite database got in a weird locked state.  Nothing I could think to do (including deleting $HOME/.sage/ipython) got this unstuck.  Maybe rebooting would have worked; I don't know.   I'm concerned about how stable and well-tested in the wild the new ipython is.     Proceed with caution.",
    "created_at": "2012-07-30T15:24:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142088",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:83" align="right">comment:83</div>

My 2 cents, after I forced myself to use this for the last few weeks on my laptop.  I have found the new ipython to be pretty annoying.  The cut and paste behavior and lack of autoindent at the command line is pretty painful.   The thing that made me finally give up and revert to the old 0.10 ipython was when I hit control-c at the wrong moment when starting Sage, and somehow the ipython history sqlite database got in a weird locked state.  Nothing I could think to do (including deleting $HOME/.sage/ipython) got this unstuck.  Maybe rebooting would have worked; I don't know.   I'm concerned about how stable and well-tested in the wild the new ipython is.     Proceed with caution.



---

archive/issue_comments_142089.json:
```json
{
    "body": "<div id=\"comment:84\" align=\"right\">comment:84</div>\n\nWorking cut&past and working autoindent are contradictory goals. The terminal just sees a stream of characters, you either inject indentation or not. AFAIR I turned off auto-indent, we could turn that back on. Breaks pasting of indented text, of course.\n\nThe ipython dir is now versioned, you should have deleted `$DOT_SAGE/ipython-0.12` / `$DOT_SAGE/ipython-0.13`",
    "created_at": "2012-07-30T15:45:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142089",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:84" align="right">comment:84</div>

Working cut&past and working autoindent are contradictory goals. The terminal just sees a stream of characters, you either inject indentation or not. AFAIR I turned off auto-indent, we could turn that back on. Breaks pasting of indented text, of course.

The ipython dir is now versioned, you should have deleted `$DOT_SAGE/ipython-0.12` / `$DOT_SAGE/ipython-0.13`



---

archive/issue_comments_142090.json:
```json
{
    "body": "<div id=\"comment:85\" align=\"right\">comment:85</div>\n\nPS: Maybe you can upload your broken ipython dir somewhere, this would be a good testcase to catch the sqlite error...",
    "created_at": "2012-07-30T15:47:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142090",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:85" align="right">comment:85</div>

PS: Maybe you can upload your broken ipython dir somewhere, this would be a good testcase to catch the sqlite error...



---

archive/issue_comments_142091.json:
```json
{
    "body": "<div id=\"comment:86\" align=\"right\">comment:86</div>\n\nIMO, leave auto-indent on, and use `%paste` or `%cpaste` when you want to paste. `%paste` tries to automatically get the contents of your clipboard. If that's not working for whatever reason, `%cpaste` creates a prompt where you can paste text verbatim, which IPython doesn't read until you end input with Ctrl+D or a line containing only the text \"--\".",
    "created_at": "2012-07-30T15:55:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142091",
    "user": "https://github.com/kini"
}
```

<div id="comment:86" align="right">comment:86</div>

IMO, leave auto-indent on, and use `%paste` or `%cpaste` when you want to paste. `%paste` tries to automatically get the contents of your clipboard. If that's not working for whatever reason, `%cpaste` creates a prompt where you can paste text verbatim, which IPython doesn't read until you end input with Ctrl+D or a line containing only the text "--".



---

archive/issue_comments_142092.json:
```json
{
    "body": "<div id=\"comment:87\" align=\"right\">comment:87</div>\n\nReplying to [@kini](#comment:86):\n> IMO, leave auto-indent on, and use `%paste` or `%cpaste` when you want to paste.\n\nFor the record, thats not how I use the commandline. I paste code all the time, but I almost never enter multi-line statements manually. So I'd rather have autoindent off by default (and no need for `%cpaste`), and use `%autoindent` if I want it on. Though thats of course a matter of personal preferences, and I'm happy with whatever the majority prefers...",
    "created_at": "2012-07-30T16:05:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142092",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:87" align="right">comment:87</div>

Replying to [@kini](#comment:86):
> IMO, leave auto-indent on, and use `%paste` or `%cpaste` when you want to paste.

For the record, thats not how I use the commandline. I paste code all the time, but I almost never enter multi-line statements manually. So I'd rather have autoindent off by default (and no need for `%cpaste`), and use `%autoindent` if I want it on. Though thats of course a matter of personal preferences, and I'm happy with whatever the majority prefers...



---

archive/issue_comments_142093.json:
```json
{
    "body": "<div id=\"comment:88\" align=\"right\">comment:88</div>\n\nReplying to [@vbraun](#comment:87):\n> Replying to [@kini](#comment:86):\n> > IMO, leave auto-indent on, and use `%paste` or `%cpaste` when you want to paste.\n\n> \n> For the record, thats not how I use the commandline. I paste code all the time, but I almost never enter multi-line statements manually. So I'd rather have autoindent off by default (and no need for `%cpaste`), and use `%autoindent` if I want it on. Though thats of course a matter of personal preferences, and I'm happy with whatever the majority prefers...\n\nAt least it is configurable, right?   I think it is best not to change the default from what it is already in all previous versions of Sage, whether or not that is what the majority prefers (unless it is a huge majority).    I'm not fan of changing UI's on people unless it is absolutely necessary.",
    "created_at": "2012-07-30T16:33:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142093",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:88" align="right">comment:88</div>

Replying to [@vbraun](#comment:87):
> Replying to [@kini](#comment:86):
> > IMO, leave auto-indent on, and use `%paste` or `%cpaste` when you want to paste.

> 
> For the record, thats not how I use the commandline. I paste code all the time, but I almost never enter multi-line statements manually. So I'd rather have autoindent off by default (and no need for `%cpaste`), and use `%autoindent` if I want it on. Though thats of course a matter of personal preferences, and I'm happy with whatever the majority prefers...

At least it is configurable, right?   I think it is best not to change the default from what it is already in all previous versions of Sage, whether or not that is what the majority prefers (unless it is a huge majority).    I'm not fan of changing UI's on people unless it is absolutely necessary.



---

archive/issue_comments_142094.json:
```json
{
    "body": "<div id=\"comment:89\" align=\"right\">comment:89</div>\n\nWell IPythons defaults changed, we didn't just change stuff for the fun of it. For starters, vanilla IPython now disallows any superfluous indentation, i.e. \n\n```\nIn [1]: 1\nOut[1]: 1\n\nIn [2]:  1\nIndentationError: unexpected indent (<ipython-input-2-0066badbf200>, line 1)\n```",
    "created_at": "2012-07-30T16:40:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142094",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:89" align="right">comment:89</div>

Well IPythons defaults changed, we didn't just change stuff for the fun of it. For starters, vanilla IPython now disallows any superfluous indentation, i.e. 

```
In [1]: 1
Out[1]: 1

In [2]:  1
IndentationError: unexpected indent (<ipython-input-2-0066badbf200>, line 1)
```



---

archive/issue_comments_142095.json:
```json
{
    "body": "<div id=\"comment:90\" align=\"right\">comment:90</div>\n\nTwo more issues:\n\n- when Sage starts, any lines in my init.sage file are echoed to the screen after the first \"sage:\" prompt. They aren't executed until I hit the return key:\n\n```\n----------------------------------------------------------------------\n| Sage Version 5.2, Release Date: 2012-07-25                         |\n| Type \"notebook()\" for the browser-based notebook interface.        |\n| Type \"help()\" for help.                                            |\n----------------------------------------------------------------------\nsage: # Here is the beginning of init.sage.\n\n2+2\n\n# Here is another comment\n\na = 5\n\n# Here is the end of init.sage.\n```\n At this point, hitting <RETURN> inserts a 4, a newline, and the \"sage:\" prompt, and `a` is defined to be 5.\n\n- when I evaluate or `plot` a graphics object, two plot windows are opened:\n\n```\nsage: P = plot(sin(x), (x, 0, 10))\nsage: P  # opens up two windows showing the same plot. Note also the blank line.\n\nsage: plot(P) # also opens up two windows.\n\nsage: show(P)  # opens up only one window.\n```",
    "created_at": "2012-07-30T21:24:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142095",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:90" align="right">comment:90</div>

Two more issues:

- when Sage starts, any lines in my init.sage file are echoed to the screen after the first "sage:" prompt. They aren't executed until I hit the return key:

```
----------------------------------------------------------------------
| Sage Version 5.2, Release Date: 2012-07-25                         |
| Type "notebook()" for the browser-based notebook interface.        |
| Type "help()" for help.                                            |
----------------------------------------------------------------------
sage: # Here is the beginning of init.sage.

2+2

# Here is another comment

a = 5

# Here is the end of init.sage.
```
 At this point, hitting <RETURN> inserts a 4, a newline, and the "sage:" prompt, and `a` is defined to be 5.

- when I evaluate or `plot` a graphics object, two plot windows are opened:

```
sage: P = plot(sin(x), (x, 0, 10))
sage: P  # opens up two windows showing the same plot. Note also the blank line.

sage: plot(P) # also opens up two windows.

sage: show(P)  # opens up only one window.
```



---

archive/issue_comments_142096.json:
```json
{
    "body": "<div id=\"comment:91\" align=\"right\">comment:91</div>\n\nRegarding indentation, autoindent being on breaks sage inside Emacs (dumb terminal).  So I think it should be off, at least in a dumb terminal, until/unless I can figure out how to fix this in Emacs.  I haven't really looked into it at all, so it may be easy to fix inside Emacs by setting some environment variables or something.  See #10504.",
    "created_at": "2012-08-01T12:57:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142096",
    "user": "https://github.com/gvol"
}
```

<div id="comment:91" align="right">comment:91</div>

Regarding indentation, autoindent being on breaks sage inside Emacs (dumb terminal).  So I think it should be off, at least in a dumb terminal, until/unless I can figure out how to fix this in Emacs.  I haven't really looked into it at all, so it may be easy to fix inside Emacs by setting some environment variables or something.  See #10504.



---

archive/issue_comments_142097.json:
```json
{
    "body": "<div id=\"comment:92\" align=\"right\">comment:92</div>\n\n+1 for autoindent being on by default.  That helps what is probably the vast majority of the cases---interactively typing into the command line.",
    "created_at": "2012-08-01T13:53:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142097",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:92" align="right">comment:92</div>

+1 for autoindent being on by default.  That helps what is probably the vast majority of the cases---interactively typing into the command line.



---

archive/issue_comments_142098.json:
```json
{
    "body": "<div id=\"comment:93\" align=\"right\">comment:93</div>\n\nI'm having a weird problem when I use IPython.parallel in sage. Here's what happens:\n\n```\nfrom IPython.parallel import Client\nrc = Client('/home/seshu/.sage/ipython-new/profile_default/security/ipcontroller-client.json')\ndview = rc[:]\ndview.map_sync(lambda x: x**10, range(32))\n[0:apply]: \n---------------------------------------------------------------------------\nNameError                                 Traceback (most recent call last)<string> in <module>()\n<ipython-input-4-ad199b8d76dc> in <lambda>(x)\nNameError: global name 'Integer' is not defined\n```\n\nIf I do anything that doesn't involve integers like dview.map_sync(lambda x: \"hi\", range(32)), it works fine. Sorry if this isn't the appropriate place to ask these questions. I wasn't sure where to ask since this is a bit bleeding edge. I would like to be able to use IPython.parallel from the sage notebook if possible.",
    "created_at": "2012-08-12T23:50:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142098",
    "user": "https://github.com/sagetrac-broken-symlink"
}
```

<div id="comment:93" align="right">comment:93</div>

I'm having a weird problem when I use IPython.parallel in sage. Here's what happens:

```
from IPython.parallel import Client
rc = Client('/home/seshu/.sage/ipython-new/profile_default/security/ipcontroller-client.json')
dview = rc[:]
dview.map_sync(lambda x: x**10, range(32))
[0:apply]: 
---------------------------------------------------------------------------
NameError                                 Traceback (most recent call last)<string> in <module>()
<ipython-input-4-ad199b8d76dc> in <lambda>(x)
NameError: global name 'Integer' is not defined
```

If I do anything that doesn't involve integers like dview.map_sync(lambda x: "hi", range(32)), it works fine. Sorry if this isn't the appropriate place to ask these questions. I wasn't sure where to ask since this is a bit bleeding edge. I would like to be able to use IPython.parallel from the sage notebook if possible.



---

archive/issue_comments_142099.json:
```json
{
    "body": "<div id=\"comment:94\" align=\"right\">comment:94</div>\n\nThe ipython engines need to import the sage modules. The fix is dview.execute(\"from sage.all import *\"). Also I did sage -sh ipcluster start.",
    "created_at": "2012-08-13T16:54:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142099",
    "user": "https://github.com/sagetrac-broken-symlink"
}
```

<div id="comment:94" align="right">comment:94</div>

The ipython engines need to import the sage modules. The fix is dview.execute("from sage.all import *"). Also I did sage -sh ipcluster start.



---

archive/issue_comments_142100.json:
```json
{
    "body": "<div id=\"comment:95\" align=\"right\">comment:95</div>\n\nJust FYI, for the *next* version (so not an issue on this ticket), https://github.com/ipython/ipython/pull/2299 broke Sage, I think  by getting rid of PrefilterTransformer tricks.",
    "created_at": "2012-08-25T14:05:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142100",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:95" align="right">comment:95</div>

Just FYI, for the *next* version (so not an issue on this ticket), https://github.com/ipython/ipython/pull/2299 broke Sage, I think  by getting rid of PrefilterTransformer tricks.



---

archive/issue_comments_142101.json:
```json
{
    "body": "<div id=\"comment:96\" align=\"right\">comment:96</div>\n\nSo I think that the only issue with this ticket is turning back on auto-indentation and getting ?? to show the source code?  Any other issues?\n\nI think the parallel issues above should be moved to another ticket.",
    "created_at": "2012-08-25T14:07:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142101",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:96" align="right">comment:96</div>

So I think that the only issue with this ticket is turning back on auto-indentation and getting ?? to show the source code?  Any other issues?

I think the parallel issues above should be moved to another ticket.



---

archive/issue_comments_142102.json:
```json
{
    "body": "<div id=\"comment:97\" align=\"right\">comment:97</div>\n\nNote: ?? shows the source code fine, it seems, in the notebook (at least there doesn't seem to be a regression; ?? shows source when doing tab completion, but not on evaluating, just like before the python upgrade).  It is a regression on the command line, though.",
    "created_at": "2012-08-25T14:15:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142102",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:97" align="right">comment:97</div>

Note: ?? shows the source code fine, it seems, in the notebook (at least there doesn't seem to be a regression; ?? shows source when doing tab completion, but not on evaluating, just like before the python upgrade).  It is a regression on the command line, though.



---

archive/issue_comments_142103.json:
```json
{
    "body": "<div id=\"comment:98\" align=\"right\">comment:98</div>\n\nThere are the issues [I mentioned above](#comment:90). Can anyone else reproduce them?",
    "created_at": "2012-08-25T14:54:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142103",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:98" align="right">comment:98</div>

There are the issues [I mentioned above](#comment:90). Can anyone else reproduce them?



---

archive/issue_comments_142104.json:
```json
{
    "body": "<div id=\"comment:99\" align=\"right\">comment:99</div>\n\nThe parallel issues only seem to effect the notebook. I've successfully gotten ipython.parallel and sage to run on a small 24 core amazon ec2 cluster, using ssh with the ipython 0.13.1 branch on github. According to the ipython guys, the ssh launcher in 0.13 is broken. I kinda have some idea of whats going with the parallel issues and the notebook as well, but i'm not sure how to fix it. I can write something for how to setup sage with ipython engines started over ssh if this package gets updated to 0.13.1.",
    "created_at": "2012-08-26T03:35:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142104",
    "user": "https://github.com/sagetrac-broken-symlink"
}
```

<div id="comment:99" align="right">comment:99</div>

The parallel issues only seem to effect the notebook. I've successfully gotten ipython.parallel and sage to run on a small 24 core amazon ec2 cluster, using ssh with the ipython 0.13.1 branch on github. According to the ipython guys, the ssh launcher in 0.13 is broken. I kinda have some idea of whats going with the parallel issues and the notebook as well, but i'm not sure how to fix it. I can write something for how to setup sage with ipython engines started over ssh if this package gets updated to 0.13.1.



---

archive/issue_comments_142105.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nWell, hopefully this gets merged before 0.13.1 comes out.",
    "created_at": "2012-08-26T03:58:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142105",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:0" align="right">comment:0</div>

Well, hopefully this gets merged before 0.13.1 comes out.



---

archive/issue_comments_142106.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\njhpalmieri, I can confirm both of the issues that you saw.  I'm seeing them too.",
    "created_at": "2012-09-06T23:26:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142106",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:1" align="right">comment:1</div>

jhpalmieri, I can confirm both of the issues that you saw.  I'm seeing them too.



---

archive/issue_comments_142107.json:
```json
{
    "body": "Changed work issues from **?? doesn't show code** to **?? doesn't show code, init.sage displayed, double plot windows, autoindent disabled**",
    "created_at": "2012-09-06T23:27:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142107",
    "user": "https://github.com/jasongrout"
}
```

Changed work issues from **?? doesn't show code** to **?? doesn't show code, init.sage displayed, double plot windows, autoindent disabled**



---

archive/issue_comments_142108.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nactually, it looks like autoindent was turned back on: https://github.com/sagemath/sage/issues/12719#comment:52",
    "created_at": "2012-09-06T23:29:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142108",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:3" align="right">comment:3</div>

actually, it looks like autoindent was turned back on: https://github.com/sagemath/sage/issues/12719#comment:52



---

archive/issue_comments_142109.json:
```json
{
    "body": "Changed work issues from **?? doesn't show code, init.sage displayed, double plot windows, autoindent disabled** to **?? doesn't show code, init.sage displayed, double plot windows**",
    "created_at": "2012-09-06T23:29:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142109",
    "user": "https://github.com/jasongrout"
}
```

Changed work issues from **?? doesn't show code, init.sage displayed, double plot windows, autoindent disabled** to **?? doesn't show code, init.sage displayed, double plot windows**



---

archive/issue_comments_142110.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nDoes anyone know where in the code init.sage is run?  I've searched the entire codebase for \"init.sage\" and I'm not finding anything that looks like it is responsible for running the file.",
    "created_at": "2012-09-06T23:40:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142110",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:4" align="right">comment:4</div>

Does anyone know where in the code init.sage is run?  I've searched the entire codebase for "init.sage" and I'm not finding anything that looks like it is responsible for running the file.



---

archive/issue_comments_142111.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nAh, I found it.  It's the last line in sage/misc/interpreter.py, the one that says `self.shell.run_cell('%%load \"%s\"'%startup_file)`",
    "created_at": "2012-09-06T23:50:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142111",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:5" align="right">comment:5</div>

Ah, I found it.  It's the last line in sage/misc/interpreter.py, the one that says `self.shell.run_cell('%%load "%s"'%startup_file)`



---

archive/issue_comments_142112.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nOkay, it looks like the problem is that we punt to the ipython load, which *pastes* the content so you can edit it first: http://ipython.org/ipython-doc/dev/interactive/qtconsole.html#load",
    "created_at": "2012-09-07T00:25:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142112",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:6" align="right">comment:6</div>

Okay, it looks like the problem is that we punt to the ipython load, which *pastes* the content so you can edit it first: http://ipython.org/ipython-doc/dev/interactive/qtconsole.html#load



---

archive/issue_comments_142113.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nSo our conclusion on https://github.com/ipython/ipython/pull/2299 was that Sage should make %load an alias for IPython's %run, and beef up IPython's %run to be able to handle remote files.  In fact, make IPython's %run use the same simple mechanism as IPython's %load would be great (though may not be possible---%run uses file-specific features in python and execfile, etc.)",
    "created_at": "2012-09-07T08:58:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142113",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:7" align="right">comment:7</div>

So our conclusion on https://github.com/ipython/ipython/pull/2299 was that Sage should make %load an alias for IPython's %run, and beef up IPython's %run to be able to handle remote files.  In fact, make IPython's %run use the same simple mechanism as IPython's %load would be great (though may not be possible---%run uses file-specific features in python and execfile, etc.)



---

archive/issue_comments_142114.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nIs there a reason we didn't use a profile config file for all of our customizations?\n\nI've started a different approach to the customizations we use here: https://github.com/jasongrout/sage-ipython-profile\n\nput these into the .sage/ipython-new directory and then start with `sage -ipython --profile=sage`",
    "created_at": "2012-09-08T19:59:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142114",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:8" align="right">comment:8</div>

Is there a reason we didn't use a profile config file for all of our customizations?

I've started a different approach to the customizations we use here: https://github.com/jasongrout/sage-ipython-profile

put these into the .sage/ipython-new directory and then start with `sage -ipython --profile=sage`



---

archive/issue_comments_142115.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -21,6 +21,7 @@\n * [attachment: trac_12719_dedent.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz)\n * [attachment: trac_12719-crash.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-crash.patch.gz)\n * [attachment: trac_12719-cellmagics013.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-cellmagics013.patch.gz)\n+* [attachment: 12719-newipython-take2.patch](https://github.com/sagemath/sage/files/ticket12719/12719-newipython-take2.patch.gz)\n \n ```\n cd SAGE_ROOT\n@@ -37,6 +38,6 @@\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-crash.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-cellmagics013.patch.gz\n-\n+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-newipython-take2.patch.gz\n ./sage -br\n ```\n``````\n",
    "created_at": "2012-09-13T18:41:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142115",
    "user": "https://github.com/jasongrout"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -21,6 +21,7 @@
 * [attachment: trac_12719_dedent.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz)
 * [attachment: trac_12719-crash.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-crash.patch.gz)
 * [attachment: trac_12719-cellmagics013.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-cellmagics013.patch.gz)
+* [attachment: 12719-newipython-take2.patch](https://github.com/sagemath/sage/files/ticket12719/12719-newipython-take2.patch.gz)
 
 ```
 cd SAGE_ROOT
@@ -37,6 +38,6 @@
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-crash.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-cellmagics013.patch.gz
-
+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-newipython-take2.patch.gz
 ./sage -br
 ```
``````




---

archive/issue_comments_142116.json:
```json
{
    "body": "Attachment: **[12719-newipython-take2.patch.gz](https://github.com/sagemath/sage/files/ticket12719/12719-newipython-take2.patch.gz)**",
    "created_at": "2012-09-13T18:53:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142116",
    "user": "https://github.com/jasongrout"
}
```

Attachment: **[12719-newipython-take2.patch.gz](https://github.com/sagemath/sage/files/ticket12719/12719-newipython-take2.patch.gz)**



---

archive/issue_comments_142117.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nOkay, I think my \"take2\" patch significantly cleans things up and makes things more modular and more \"IPythonic\".\n\nIn particular, this seems to work nicely: do `sage -ipython notebook` to launch the ipython notebook, then evaluate `%load_ext sage.misc.sage_extension`. All preparsing is turned on, etc.  It's great!\n\nThere should probably be a bit more documentation in the sage_extension file, and full doctests should be run.  But I think it's ready for other people to hammer on it too.\n\nHere is one issue: something broke in `sage -startuptime`.  I'm not sure it's IPython's fault, though.\n\nOh, and I was working from IPython master, not IPython 0.13.  I hope that doesn't put a wrench in the works...",
    "created_at": "2012-09-13T18:57:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142117",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:0" align="right">comment:0</div>

Okay, I think my "take2" patch significantly cleans things up and makes things more modular and more "IPythonic".

In particular, this seems to work nicely: do `sage -ipython notebook` to launch the ipython notebook, then evaluate `%load_ext sage.misc.sage_extension`. All preparsing is turned on, etc.  It's great!

There should probably be a bit more documentation in the sage_extension file, and full doctests should be run.  But I think it's ready for other people to hammer on it too.

Here is one issue: something broke in `sage -startuptime`.  I'm not sure it's IPython's fault, though.

Oh, and I was working from IPython master, not IPython 0.13.  I hope that doesn't put a wrench in the works...



---

archive/issue_comments_142118.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nPreliminary tests seem to indicate that these patches and the new take work just fine with IPython 0.13 (at least when I revert my IPython git repository).  So it's still probably ready for more people to hammer on this.",
    "created_at": "2012-09-13T19:31:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142118",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:1" align="right">comment:1</div>

Preliminary tests seem to indicate that these patches and the new take work just fine with IPython 0.13 (at least when I revert my IPython git repository).  So it's still probably ready for more people to hammer on this.



---

archive/issue_comments_142119.json:
```json
{
    "body": "Changed work issues from **?? doesn't show code, init.sage displayed, double plot windows** to **?? doesn't show code**",
    "created_at": "2012-09-13T20:26:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142119",
    "user": "https://github.com/jasongrout"
}
```

Changed work issues from **?? doesn't show code, init.sage displayed, double plot windows** to **?? doesn't show code**



---

archive/issue_comments_142120.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nMy take2 patch seems to have solved the double plot window problem.  It also solved the init.sage/load problems, as well as the ?? problem.  So that was all of the issues listed...",
    "created_at": "2012-09-13T20:26:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142120",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:2" align="right">comment:2</div>

My take2 patch seems to have solved the double plot window problem.  It also solved the init.sage/load problems, as well as the ?? problem.  So that was all of the issues listed...



---

archive/issue_comments_142121.json:
```json
{
    "body": "Changed work issues from **?? doesn't show code** to none",
    "created_at": "2012-09-13T20:27:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142121",
    "user": "https://github.com/jasongrout"
}
```

Changed work issues from **?? doesn't show code** to none



---

archive/issue_comments_142122.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nAttachment: **[12719-displayhook.patch.gz](https://github.com/sagemath/sage/files/ticket12719/12719-displayhook.patch.gz)**\n\nSince we now hook into the IPython display hook, we can delete our special display hook.",
    "created_at": "2012-09-14T12:24:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142122",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:4" align="right">comment:4</div>

Attachment: **[12719-displayhook.patch.gz](https://github.com/sagemath/sage/files/ticket12719/12719-displayhook.patch.gz)**

Since we now hook into the IPython display hook, we can delete our special display hook.



---

archive/issue_events_175718.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2012-09-14T12:24:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175718"
}
```



---

archive/issue_events_175719.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2012-09-14T12:24:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175719"
}
```



---

archive/issue_comments_142123.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -22,6 +22,8 @@\n * [attachment: trac_12719-crash.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-crash.patch.gz)\n * [attachment: trac_12719-cellmagics013.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-cellmagics013.patch.gz)\n * [attachment: 12719-newipython-take2.patch](https://github.com/sagemath/sage/files/ticket12719/12719-newipython-take2.patch.gz)\n+* [attachment: 12719-displayhook.patch](https://github.com/sagemath/sage/files/ticket12719/12719-displayhook.patch.gz)\n+\n \n ```\n cd SAGE_ROOT\n@@ -39,5 +41,6 @@\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-crash.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-cellmagics013.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-newipython-take2.patch.gz\n+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-displayhook.patch.gz\n ./sage -br\n ```\n``````\n",
    "created_at": "2012-09-14T12:24:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142123",
    "user": "https://github.com/jasongrout"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -22,6 +22,8 @@
 * [attachment: trac_12719-crash.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-crash.patch.gz)
 * [attachment: trac_12719-cellmagics013.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-cellmagics013.patch.gz)
 * [attachment: 12719-newipython-take2.patch](https://github.com/sagemath/sage/files/ticket12719/12719-newipython-take2.patch.gz)
+* [attachment: 12719-displayhook.patch](https://github.com/sagemath/sage/files/ticket12719/12719-displayhook.patch.gz)
+
 
 ```
 cd SAGE_ROOT
@@ -39,5 +41,6 @@
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-crash.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-cellmagics013.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-newipython-take2.patch.gz
+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-displayhook.patch.gz
 ./sage -br
 ```
``````




---

archive/issue_comments_142124.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,6 +9,7 @@\n To the scripts repository: \n * [attachment: trac_12719-scripts.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz)\n * [attachment: trac_12719_remove_sage_gdb_ipython.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz)\n+* [attachment: 12719-startuptime.patch](https://github.com/sagemath/sage/files/ticket12719/12719-startuptime.patch.gz)\n \n To the root repository:\n * [attachment: trac_12719_ROOT_configuration_files.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz)\n@@ -33,6 +34,7 @@\n \n ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz\n ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz\n+./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-startuptime.patch.gz\n \n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-5.1beta1.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser.patch.gz\n``````\n",
    "created_at": "2012-09-15T10:17:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142124",
    "user": "https://github.com/jasongrout"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,6 +9,7 @@
 To the scripts repository: 
 * [attachment: trac_12719-scripts.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz)
 * [attachment: trac_12719_remove_sage_gdb_ipython.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz)
+* [attachment: 12719-startuptime.patch](https://github.com/sagemath/sage/files/ticket12719/12719-startuptime.patch.gz)
 
 To the root repository:
 * [attachment: trac_12719_ROOT_configuration_files.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz)
@@ -33,6 +34,7 @@
 
 ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz
 ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz
+./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-startuptime.patch.gz
 
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-5.1beta1.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser.patch.gz
``````




---

archive/issue_comments_142125.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nFixed the startup issue with new patch to scripts repository",
    "created_at": "2012-09-15T10:17:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142125",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:5" align="right">comment:5</div>

Fixed the startup issue with new patch to scripts repository



---

archive/issue_comments_142126.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -44,5 +44,8 @@\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-cellmagics013.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-newipython-take2.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-displayhook.patch.gz\n+\n+./sage -i http://sage.math.washington.edu/home/jason/ipython-0.13.spkg\n+\n ./sage -br\n ```\n``````\n",
    "created_at": "2012-09-18T13:23:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142126",
    "user": "https://github.com/jasongrout"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -44,5 +44,8 @@
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-cellmagics013.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-newipython-take2.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-displayhook.patch.gz
+
+./sage -i http://sage.math.washington.edu/home/jason/ipython-0.13.spkg
+
 ./sage -br
 ```
``````




---

archive/issue_comments_142127.json:
```json
{
    "body": "Attachment: **[12719-fix-transformer.patch.gz](https://github.com/sagemath/sage/files/ticket12719/12719-fix-transformer.patch.gz)**",
    "created_at": "2012-09-25T12:46:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142127",
    "user": "https://github.com/jasongrout"
}
```

Attachment: **[12719-fix-transformer.patch.gz](https://github.com/sagemath/sage/files/ticket12719/12719-fix-transformer.patch.gz)**



---

archive/issue_comments_142128.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nFix a transforming issue: see http://mail.scipy.org/pipermail/ipython-dev/2012-September/010329.html or the commit message.",
    "created_at": "2012-09-25T12:48:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142128",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:7" align="right">comment:7</div>

Fix a transforming issue: see http://mail.scipy.org/pipermail/ipython-dev/2012-September/010329.html or the commit message.



---

archive/issue_comments_142129.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -24,7 +24,7 @@\n * [attachment: trac_12719-cellmagics013.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-cellmagics013.patch.gz)\n * [attachment: 12719-newipython-take2.patch](https://github.com/sagemath/sage/files/ticket12719/12719-newipython-take2.patch.gz)\n * [attachment: 12719-displayhook.patch](https://github.com/sagemath/sage/files/ticket12719/12719-displayhook.patch.gz)\n-\n+* [attachment: 12719-fix-transformer.patch](https://github.com/sagemath/sage/files/ticket12719/12719-fix-transformer.patch.gz)\n \n ```\n cd SAGE_ROOT\n@@ -44,7 +44,7 @@\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-cellmagics013.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-newipython-take2.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-displayhook.patch.gz\n-\n+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-fix-transformer.patch.gz\n ./sage -i http://sage.math.washington.edu/home/jason/ipython-0.13.spkg\n \n ./sage -br\n``````\n",
    "created_at": "2012-09-25T12:48:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142129",
    "user": "https://github.com/jasongrout"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -24,7 +24,7 @@
 * [attachment: trac_12719-cellmagics013.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-cellmagics013.patch.gz)
 * [attachment: 12719-newipython-take2.patch](https://github.com/sagemath/sage/files/ticket12719/12719-newipython-take2.patch.gz)
 * [attachment: 12719-displayhook.patch](https://github.com/sagemath/sage/files/ticket12719/12719-displayhook.patch.gz)
-
+* [attachment: 12719-fix-transformer.patch](https://github.com/sagemath/sage/files/ticket12719/12719-fix-transformer.patch.gz)
 
 ```
 cd SAGE_ROOT
@@ -44,7 +44,7 @@
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-cellmagics013.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-newipython-take2.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-displayhook.patch.gz
-
+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-fix-transformer.patch.gz
 ./sage -i http://sage.math.washington.edu/home/jason/ipython-0.13.spkg
 
 ./sage -br
``````




---

archive/issue_comments_142130.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nThis needs to be rebased to sage-5.4.rc0, in particular #13459.",
    "created_at": "2012-10-05T15:07:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142130",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">comment:8</div>

This needs to be rebased to sage-5.4.rc0, in particular #13459.



---

archive/issue_events_175720.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-10-05T15:07:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175720"
}
```



---

archive/issue_events_175721.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-10-05T15:07:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175721"
}
```



---

archive/issue_comments_142131.json:
```json
{
    "body": "Dependencies: **#13459**",
    "created_at": "2012-10-05T15:07:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142131",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#13459**



---

archive/issue_comments_142132.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nAlso, #13361 includes the change in the startuptime.py patch, so we can delete it.",
    "created_at": "2012-10-10T03:18:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142132",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:9" align="right">comment:9</div>

Also, #13361 includes the change in the startuptime.py patch, so we can delete it.



---

archive/issue_comments_142133.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,7 +9,6 @@\n To the scripts repository: \n * [attachment: trac_12719-scripts.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz)\n * [attachment: trac_12719_remove_sage_gdb_ipython.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz)\n-* [attachment: 12719-startuptime.patch](https://github.com/sagemath/sage/files/ticket12719/12719-startuptime.patch.gz)\n \n To the root repository:\n * [attachment: trac_12719_ROOT_configuration_files.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz)\n@@ -34,7 +33,6 @@\n \n ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz\n ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz\n-./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-startuptime.patch.gz\n \n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-5.1beta1.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser.patch.gz\n``````\n",
    "created_at": "2012-10-10T03:19:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142133",
    "user": "https://github.com/jasongrout"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,7 +9,6 @@
 To the scripts repository: 
 * [attachment: trac_12719-scripts.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz)
 * [attachment: trac_12719_remove_sage_gdb_ipython.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz)
-* [attachment: 12719-startuptime.patch](https://github.com/sagemath/sage/files/ticket12719/12719-startuptime.patch.gz)
 
 To the root repository:
 * [attachment: trac_12719_ROOT_configuration_files.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz)
@@ -34,7 +33,6 @@
 
 ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz
 ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz
-./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-startuptime.patch.gz
 
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-5.1beta1.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser.patch.gz
``````




---

archive/issue_comments_142134.json:
```json
{
    "body": "rebased to 5.4rc1",
    "created_at": "2012-10-10T03:32:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142134",
    "user": "https://github.com/jasongrout"
}
```

rebased to 5.4rc1



---

archive/issue_comments_142135.json:
```json
{
    "body": "Attachment: **[trac_12719-5.1beta1.patch.gz](https://github.com/sagemath/sage/files/ticket12719/trac_12719-5.1beta1.patch.gz)**\n\nrebased to 5.4rc1",
    "created_at": "2012-10-10T03:37:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142135",
    "user": "https://github.com/jasongrout"
}
```

Attachment: **[trac_12719-5.1beta1.patch.gz](https://github.com/sagemath/sage/files/ticket12719/trac_12719-5.1beta1.patch.gz)**

rebased to 5.4rc1



---

archive/issue_comments_142136.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -24,6 +24,7 @@\n * [attachment: 12719-newipython-take2.patch](https://github.com/sagemath/sage/files/ticket12719/12719-newipython-take2.patch.gz)\n * [attachment: 12719-displayhook.patch](https://github.com/sagemath/sage/files/ticket12719/12719-displayhook.patch.gz)\n * [attachment: 12719-fix-transformer.patch](https://github.com/sagemath/sage/files/ticket12719/12719-fix-transformer.patch.gz)\n+* [attachment: 12719-5.4rc1.patch](https://github.com/sagemath/sage/files/ticket12719/12719-5.4rc1.patch.gz)\n \n ```\n cd SAGE_ROOT\n@@ -43,6 +44,7 @@\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-newipython-take2.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-displayhook.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-fix-transformer.patch.gz\n+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-5.4rc1.patch.gz\n ./sage -i http://sage.math.washington.edu/home/jason/ipython-0.13.spkg\n \n ./sage -br\n``````\n",
    "created_at": "2012-10-10T04:02:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142136",
    "user": "https://github.com/jasongrout"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -24,6 +24,7 @@
 * [attachment: 12719-newipython-take2.patch](https://github.com/sagemath/sage/files/ticket12719/12719-newipython-take2.patch.gz)
 * [attachment: 12719-displayhook.patch](https://github.com/sagemath/sage/files/ticket12719/12719-displayhook.patch.gz)
 * [attachment: 12719-fix-transformer.patch](https://github.com/sagemath/sage/files/ticket12719/12719-fix-transformer.patch.gz)
+* [attachment: 12719-5.4rc1.patch](https://github.com/sagemath/sage/files/ticket12719/12719-5.4rc1.patch.gz)
 
 ```
 cd SAGE_ROOT
@@ -43,6 +44,7 @@
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-newipython-take2.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-displayhook.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-fix-transformer.patch.gz
+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-5.4rc1.patch.gz
 ./sage -i http://sage.math.washington.edu/home/jason/ipython-0.13.spkg
 
 ./sage -br
``````




---

archive/issue_comments_142137.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nAttachment: **[trac_12719_remove_sage_gdb_ipython.patch.gz](https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz)**\n\nAdd one more patch so we don't change directories anymore.",
    "created_at": "2012-10-10T04:02:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142137",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:1" align="right">comment:1</div>

Attachment: **[trac_12719_remove_sage_gdb_ipython.patch.gz](https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz)**

Add one more patch so we don't change directories anymore.



---

archive/issue_events_175722.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2012-10-10T04:02:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175722"
}
```



---

archive/issue_events_175723.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2012-10-10T04:02:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175723"
}
```



---

archive/issue_comments_142138.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nSomething that seems to work fine now is starting up sage in the devel/sage directory.  So it seems that the issue discussed in #13361 is fixed in this ipython upgrade.",
    "created_at": "2012-10-10T04:14:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142138",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:2" align="right">comment:2</div>

Something that seems to work fine now is starting up sage in the devel/sage directory.  So it seems that the issue discussed in #13361 is fixed in this ipython upgrade.



---

archive/issue_comments_142139.json:
```json
{
    "body": "Attachment: **[12719-remove-plugin.patch.gz](https://github.com/sagemath/sage/files/ticket12719/12719-remove-plugin.patch.gz)**",
    "created_at": "2012-10-10T04:44:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142139",
    "user": "https://github.com/jasongrout"
}
```

Attachment: **[12719-remove-plugin.patch.gz](https://github.com/sagemath/sage/files/ticket12719/12719-remove-plugin.patch.gz)**



---

archive/issue_comments_142140.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -25,6 +25,7 @@\n * [attachment: 12719-displayhook.patch](https://github.com/sagemath/sage/files/ticket12719/12719-displayhook.patch.gz)\n * [attachment: 12719-fix-transformer.patch](https://github.com/sagemath/sage/files/ticket12719/12719-fix-transformer.patch.gz)\n * [attachment: 12719-5.4rc1.patch](https://github.com/sagemath/sage/files/ticket12719/12719-5.4rc1.patch.gz)\n+* [attachment: 12719-remove-plugin.patch](https://github.com/sagemath/sage/files/ticket12719/12719-remove-plugin.patch.gz)\n \n ```\n cd SAGE_ROOT\n@@ -45,6 +46,7 @@\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-displayhook.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-fix-transformer.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-5.4rc1.patch.gz\n+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-remove-plugin.patch.gz\n ./sage -i http://sage.math.washington.edu/home/jason/ipython-0.13.spkg\n \n ./sage -br\n``````\n",
    "created_at": "2012-10-10T04:45:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142140",
    "user": "https://github.com/jasongrout"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -25,6 +25,7 @@
 * [attachment: 12719-displayhook.patch](https://github.com/sagemath/sage/files/ticket12719/12719-displayhook.patch.gz)
 * [attachment: 12719-fix-transformer.patch](https://github.com/sagemath/sage/files/ticket12719/12719-fix-transformer.patch.gz)
 * [attachment: 12719-5.4rc1.patch](https://github.com/sagemath/sage/files/ticket12719/12719-5.4rc1.patch.gz)
+* [attachment: 12719-remove-plugin.patch](https://github.com/sagemath/sage/files/ticket12719/12719-remove-plugin.patch.gz)
 
 ```
 cd SAGE_ROOT
@@ -45,6 +46,7 @@
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-displayhook.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-fix-transformer.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-5.4rc1.patch.gz
+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-remove-plugin.patch.gz
 ./sage -i http://sage.math.washington.edu/home/jason/ipython-0.13.spkg
 
 ./sage -br
``````




---

archive/issue_comments_142141.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nOkay, I think this may be ready for review again.\n\nIt's a big enough change that maybe it would be good to shoot for one of the first patches in the 5.5 release, so it gets plenty of testing???",
    "created_at": "2012-10-10T05:18:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142141",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:4" align="right">comment:4</div>

Okay, I think this may be ready for review again.

It's a big enough change that maybe it would be good to shoot for one of the first patches in the 5.5 release, so it gets plenty of testing???



---

archive/issue_comments_142142.json:
```json
{
    "body": "<div id=\"comment:125\" align=\"right\">comment:125</div>\n\nReplying to [@seblabbe](#comment:41):\n\n> Also, doing `sage -ipython notebook` creates this error :\n> \n> ```\n> $ sage -ipython notebook\n> Traceback (most recent call last):\n> ...\n> ImportError: The IPython Notebook requires tornado >= 2.1.0\n> ```\n\nI get this too. Should I just install tornado somehow, or should this be fixed as part of this ticket?\n\nEdit: after installing tornado (with `sage --sh` and `easy_install tornado`), it said I had to install pyzmq. So I did that, and now the notebook runs. It looks very nice, and feels pretty snappy, maybe snappier than the Sage notebook.",
    "created_at": "2012-10-10T05:39:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142142",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:125" align="right">comment:125</div>

Replying to [@seblabbe](#comment:41):

> Also, doing `sage -ipython notebook` creates this error :
> 
> ```
> $ sage -ipython notebook
> Traceback (most recent call last):
> ...
> ImportError: The IPython Notebook requires tornado >= 2.1.0
> ```

I get this too. Should I just install tornado somehow, or should this be fixed as part of this ticket?

Edit: after installing tornado (with `sage --sh` and `easy_install tornado`), it said I had to install pyzmq. So I did that, and now the notebook runs. It looks very nice, and feels pretty snappy, maybe snappier than the Sage notebook.



---

archive/issue_comments_142143.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nYes, tornado and zmq (pyzmq) are required for the ipython notebook.  That's not part of this ticket.\n\nAnd yes, the ipython notebook is very nice.  After loading it up, try doing \n\n```\n%load_ext sage.misc.sage_extension\n```\nto get some sage goodness, like the preparser, etc.!",
    "created_at": "2012-10-10T05:54:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142143",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:6" align="right">comment:6</div>

Yes, tornado and zmq (pyzmq) are required for the ipython notebook.  That's not part of this ticket.

And yes, the ipython notebook is very nice.  After loading it up, try doing 

```
%load_ext sage.misc.sage_extension
```
to get some sage goodness, like the preparser, etc.!



---

archive/issue_comments_142144.json:
```json
{
    "body": "<div id=\"comment:127\" align=\"right\">comment:127</div>\n\nReplying to [@jasongrout](#comment:122):\n> Something that seems to work fine now is starting up sage in the devel/sage directory.\n\nFYI: this was fixed by #13459.",
    "created_at": "2012-10-10T06:46:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142144",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:127" align="right">comment:127</div>

Replying to [@jasongrout](#comment:122):
> Something that seems to work fine now is starting up sage in the devel/sage directory.

FYI: this was fixed by #13459.



---

archive/issue_comments_142145.json:
```json
{
    "body": "<div id=\"comment:128\" align=\"right\">comment:128</div>\n\nReplying to [@jdemeyer](#comment:127):\n> Replying to [@jasongrout](#comment:122):\n> > Something that seems to work fine now is starting up sage in the devel/sage directory.\n\n> FYI: this was fixed by #13459.\n\nBut I reverted the \"import sage\" that #13459 does in [attachment: trac_12719-scripts.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz), and it still works fine for me (running sage in devel/sage and then `import sage` actually imports the site-packages sage).  Maybe IPython changed its handling of sys.path.  What I'm saying is that we should test that my reverting of part of #13459 (the part where we imported sage in sage-ipython) actually does what I think it does.",
    "created_at": "2012-10-10T13:22:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142145",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:128" align="right">comment:128</div>

Replying to [@jdemeyer](#comment:127):
> Replying to [@jasongrout](#comment:122):
> > Something that seems to work fine now is starting up sage in the devel/sage directory.

> FYI: this was fixed by #13459.

But I reverted the "import sage" that #13459 does in [attachment: trac_12719-scripts.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz), and it still works fine for me (running sage in devel/sage and then `import sage` actually imports the site-packages sage).  Maybe IPython changed its handling of sys.path.  What I'm saying is that we should test that my reverting of part of #13459 (the part where we imported sage in sage-ipython) actually does what I think it does.



---

archive/issue_comments_142146.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI'm getting doctest failures because of how lists of matrices are printed. For example, with matrix2.pyx:\n\n```\nFile \".../sage-5.4.rc1/devel/sage/sage/matrix/matrix2.pyx\", line 11627:\n    sage: (d, u, v)\nExpected:\n    (\n    [     1      0]  [ 1  0]  [ 1 -w]\n    [     0 -w + 9], [-w  1], [ 0  1]\n    )\nGot:\n    ([     1      0]\n    [     0 -w + 9], [ 1  0]\n    [-w  1], [ 1 -w]\n    [ 0  1])\n```\nThat file has 7 failures altogether. Is this because you turned off Sage's displayhook?",
    "created_at": "2012-10-10T20:59:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142146",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:9" align="right">comment:9</div>

I'm getting doctest failures because of how lists of matrices are printed. For example, with matrix2.pyx:

```
File ".../sage-5.4.rc1/devel/sage/sage/matrix/matrix2.pyx", line 11627:
    sage: (d, u, v)
Expected:
    (
    [     1      0]  [ 1  0]  [ 1 -w]
    [     0 -w + 9], [-w  1], [ 0  1]
    )
Got:
    ([     1      0]
    [     0 -w + 9], [ 1  0]
    [-w  1], [ 1 -w]
    [ 0  1])
```
That file has 7 failures altogether. Is this because you turned off Sage's displayhook?



---

archive/issue_comments_142147.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nInteresting.  I thought I used Sage's displayhook (I know I was at one time anyway), but I've also noticed the same problems on my install with printing tuples of matrices and it's been frustrating to me.  I'll take a look at it.",
    "created_at": "2012-10-10T21:18:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142147",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:0" align="right">comment:0</div>

Interesting.  I thought I used Sage's displayhook (I know I was at one time anyway), but I've also noticed the same problems on my install with printing tuples of matrices and it's been frustrating to me.  I'll take a look at it.



---

archive/issue_comments_142148.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\n[attachment: 12719-displayhook.patch](https://github.com/sagemath/sage/files/ticket12719/12719-displayhook.patch.gz) looks relevant, in particular removing the lines\n\n```\nimport sage.misc.displayhook  \nsage.misc.displayhook.install() \n```\nand removing the corresponding functions from sage/misc/displayhook.py. But I've never worked with this aspect of Sage before.",
    "created_at": "2012-10-10T21:29:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142148",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:1" align="right">comment:1</div>

[attachment: 12719-displayhook.patch](https://github.com/sagemath/sage/files/ticket12719/12719-displayhook.patch.gz) looks relevant, in particular removing the lines

```
import sage.misc.displayhook  
sage.misc.displayhook.install() 
```
and removing the corresponding functions from sage/misc/displayhook.py. But I've never worked with this aspect of Sage before.



---

archive/issue_comments_142149.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nWhen I use either `time` or `%time`, the rest of the line doesn't seem to be preparsed: try\n\n```\nsage: srange(1/10, 1/2, 1/10)\n[1/10, 1/5, 3/10, 2/5]\n```\nvs.\n\n```\nsage: %time srange(1/10, 1/2, 1/10)\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n...\nValueError: srange() step argument must not be zero\n```\nOr even\n\n```\nsage: %time 1/10\nCPU times: user 0.00 s, sys: 0.00 s, total: 0.00 s\nWall time: 0.00 s\n0  <-- note the answer!\n```",
    "created_at": "2012-10-10T22:21:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142149",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:2" align="right">comment:2</div>

When I use either `time` or `%time`, the rest of the line doesn't seem to be preparsed: try

```
sage: srange(1/10, 1/2, 1/10)
[1/10, 1/5, 3/10, 2/5]
```
vs.

```
sage: %time srange(1/10, 1/2, 1/10)
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
...
ValueError: srange() step argument must not be zero
```
Or even

```
sage: %time 1/10
CPU times: user 0.00 s, sys: 0.00 s, total: 0.00 s
Wall time: 0.00 s
0  <-- note the answer!
```



---

archive/issue_comments_142150.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nThe displayhook is activated when Sage is run (try running those matrix doctests from the command line).  The problem is that the doctesting framework does *not* use the interactive version of Sage; it seems to use straight python.  So the display hook is not set.\n\nIt seems that the display hook used to be set when just importing Sage as a library, maybe?  If so, I think that's the wrong approach.  Importing a library shouldn't obliterate the display hook.\n\nSo it sounds like we need to make the doctesting framework load the right Sage things, like the preparser, the display hook, etc.",
    "created_at": "2012-10-10T23:48:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142150",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:3" align="right">comment:3</div>

The displayhook is activated when Sage is run (try running those matrix doctests from the command line).  The problem is that the doctesting framework does *not* use the interactive version of Sage; it seems to use straight python.  So the display hook is not set.

It seems that the display hook used to be set when just importing Sage as a library, maybe?  If so, I think that's the wrong approach.  Importing a library shouldn't obliterate the display hook.

So it sounds like we need to make the doctesting framework load the right Sage things, like the preparser, the display hook, etc.



---

archive/issue_comments_142151.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI'll take a look at %time.  That indeed seems to be a problem where the preparser isn't being run.",
    "created_at": "2012-10-10T23:50:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142151",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:4" align="right">comment:4</div>

I'll take a look at %time.  That indeed seems to be a problem where the preparser isn't being run.



---

archive/issue_comments_142152.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nFor some reason, the preparser explicitly turned itself off for magic lines.  I'm not sure why but I'm posting a patch to fix that.",
    "created_at": "2012-10-11T02:08:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142152",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:5" align="right">comment:5</div>

For some reason, the preparser explicitly turned itself off for magic lines.  I'm not sure why but I'm posting a patch to fix that.



---

archive/issue_comments_142153.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -51,3 +51,5 @@\n \n ./sage -br\n ```\n+\n+Fixes #11223\n``````\n",
    "created_at": "2012-10-11T02:08:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142153",
    "user": "https://github.com/jasongrout"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -51,3 +51,5 @@
 
 ./sage -br
 ```
+
+Fixes #11223
``````




---

archive/issue_comments_142154.json:
```json
{
    "body": "Attachment: **[12719-preparse-magic.patch.gz](https://github.com/sagemath/sage/files/ticket12719/12719-preparse-magic.patch.gz)**",
    "created_at": "2012-10-11T02:10:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142154",
    "user": "https://github.com/jasongrout"
}
```

Attachment: **[12719-preparse-magic.patch.gz](https://github.com/sagemath/sage/files/ticket12719/12719-preparse-magic.patch.gz)**



---

archive/issue_comments_142155.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -26,6 +26,7 @@\n * [attachment: 12719-fix-transformer.patch](https://github.com/sagemath/sage/files/ticket12719/12719-fix-transformer.patch.gz)\n * [attachment: 12719-5.4rc1.patch](https://github.com/sagemath/sage/files/ticket12719/12719-5.4rc1.patch.gz)\n * [attachment: 12719-remove-plugin.patch](https://github.com/sagemath/sage/files/ticket12719/12719-remove-plugin.patch.gz)\n+* [attachment: 12719-preparse-magic.patch](https://github.com/sagemath/sage/files/ticket12719/12719-preparse-magic.patch.gz)\n \n ```\n cd SAGE_ROOT\n@@ -47,6 +48,7 @@\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-fix-transformer.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-5.4rc1.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-remove-plugin.patch.gz\n+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-preparse-magic.patch.gz\n ./sage -i http://sage.math.washington.edu/home/jason/ipython-0.13.spkg\n \n ./sage -br\n``````\n",
    "created_at": "2012-10-11T02:10:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142155",
    "user": "https://github.com/jasongrout"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -26,6 +26,7 @@
 * [attachment: 12719-fix-transformer.patch](https://github.com/sagemath/sage/files/ticket12719/12719-fix-transformer.patch.gz)
 * [attachment: 12719-5.4rc1.patch](https://github.com/sagemath/sage/files/ticket12719/12719-5.4rc1.patch.gz)
 * [attachment: 12719-remove-plugin.patch](https://github.com/sagemath/sage/files/ticket12719/12719-remove-plugin.patch.gz)
+* [attachment: 12719-preparse-magic.patch](https://github.com/sagemath/sage/files/ticket12719/12719-preparse-magic.patch.gz)
 
 ```
 cd SAGE_ROOT
@@ -47,6 +48,7 @@
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-fix-transformer.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-5.4rc1.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-remove-plugin.patch.gz
+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-preparse-magic.patch.gz
 ./sage -i http://sage.math.washington.edu/home/jason/ipython-0.13.spkg
 
 ./sage -br
``````




---

archive/issue_comments_142156.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nJohn, you know the doctest framework a lot better than I do.  If you start up sage-ipython and load the sage extension, it will install the display hook, import Sage, etc.  John, do you know how to get the doctest runner to execute this as part of ipython: `get_ipython().extension_manager.load_extension('sage.misc.sage_extension')`\n\n```\ngrout@tiny:~/sage% sage -ipython -ic \"get_ipython().extension_manager.load_extension('sage.misc.sage_extension')\"                    E:128\nPython 2.7.3 (default, Oct  9 2012, 11:53:24) \nType \"copyright\", \"credits\" or \"license\" for more information.\n\nIPython 0.13 -- An enhanced Interactive Python.\n?         -> Introduction and overview of IPython's features.\n%quickref -> Quick reference.\nhelp      -> Python's own help system.\nobject?   -> Details about 'object', use 'object??' for extra details.\n\nIn [1]: (identity_matrix(3), identity_matrix(5))\nOut[1]: \n(\n         [1 0 0 0 0]\n         [0 1 0 0 0]\n[1 0 0]  [0 0 1 0 0]\n[0 1 0]  [0 0 0 1 0]\n[0 0 1], [0 0 0 0 1]\n)\n```",
    "created_at": "2012-10-11T03:00:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142156",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:7" align="right">comment:7</div>

John, you know the doctest framework a lot better than I do.  If you start up sage-ipython and load the sage extension, it will install the display hook, import Sage, etc.  John, do you know how to get the doctest runner to execute this as part of ipython: `get_ipython().extension_manager.load_extension('sage.misc.sage_extension')`

```
grout@tiny:~/sage% sage -ipython -ic "get_ipython().extension_manager.load_extension('sage.misc.sage_extension')"                    E:128
Python 2.7.3 (default, Oct  9 2012, 11:53:24) 
Type "copyright", "credits" or "license" for more information.

IPython 0.13 -- An enhanced Interactive Python.
?         -> Introduction and overview of IPython's features.
%quickref -> Quick reference.
help      -> Python's own help system.
object?   -> Details about 'object', use 'object??' for extra details.

In [1]: (identity_matrix(3), identity_matrix(5))
Out[1]: 
(
         [1 0 0 0 0]
         [0 1 0 0 0]
[1 0 0]  [0 0 1 0 0]
[0 1 0]  [0 0 0 1 0]
[0 0 1], [0 0 0 0 1]
)
```



---

archive/issue_comments_142157.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI guess one reason to turn off the preparser for magic lines is so that in a line like\n\n```\n%ed file1.py\n```\nthe \"1\" doesn't get preparsed. I don't know how the old \"time\" command was written; did it just call \"%time\"? If so, maybe that was to allow lines starting with \"time\" to be preparsed.\n\nFor doctesting, I don't know if IPython is used at all during doctesting. If it's possible to turn on this extension using pure Python, we can add it at the top of each file as it's doctested, with a patch like this to local/bin/sage-doctest:\n\n```diff\ndiff --git a/sage-doctest b/sage-doctest\n--- a/sage-doctest\n+++ b/sage-doctest\n@@ -490,6 +490,7 @@ def extract_doc(file_name, library_code=\n \n \"\"\"  % os.path.join(os.getcwd(), file_name)\n     s += \"from sage.all_cmdline import *; \\n\"\n+    s += \"ADD NEW CODE HERE\\n\"\n     s += \"import sage.plot.plot; sage.plot.plot.DOCTEST_MODE=True\\n\"  # turn off image popup\n     s += r\"\"\"\n def warning_function(f):\n```",
    "created_at": "2012-10-11T15:28:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142157",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:8" align="right">comment:8</div>

I guess one reason to turn off the preparser for magic lines is so that in a line like

```
%ed file1.py
```
the "1" doesn't get preparsed. I don't know how the old "time" command was written; did it just call "%time"? If so, maybe that was to allow lines starting with "time" to be preparsed.

For doctesting, I don't know if IPython is used at all during doctesting. If it's possible to turn on this extension using pure Python, we can add it at the top of each file as it's doctested, with a patch like this to local/bin/sage-doctest:

```diff
diff --git a/sage-doctest b/sage-doctest
--- a/sage-doctest
+++ b/sage-doctest
@@ -490,6 +490,7 @@ def extract_doc(file_name, library_code=
 
 """  % os.path.join(os.getcwd(), file_name)
     s += "from sage.all_cmdline import *; \n"
+    s += "ADD NEW CODE HERE\n"
     s += "import sage.plot.plot; sage.plot.plot.DOCTEST_MODE=True\n"  # turn off image popup
     s += r"""
 def warning_function(f):
```



---

archive/issue_comments_142158.json:
```json
{
    "body": "Attachment: **[12719-test-displayhook.patch.gz](https://github.com/sagemath/sage/files/ticket12719/12719-test-displayhook.patch.gz)**\n\napply to scripts repository in local/bin/",
    "created_at": "2012-10-11T16:36:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142158",
    "user": "https://github.com/jasongrout"
}
```

Attachment: **[12719-test-displayhook.patch.gz](https://github.com/sagemath/sage/files/ticket12719/12719-test-displayhook.patch.gz)**

apply to scripts repository in local/bin/



---

archive/issue_comments_142159.json:
```json
{
    "body": "Attachment: **[12719-displayhook-library.patch.gz](https://github.com/sagemath/sage/files/ticket12719/12719-displayhook-library.patch.gz)**",
    "created_at": "2012-10-11T16:46:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142159",
    "user": "https://github.com/jasongrout"
}
```

Attachment: **[12719-displayhook-library.patch.gz](https://github.com/sagemath/sage/files/ticket12719/12719-displayhook-library.patch.gz)**



---

archive/issue_comments_142160.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nUpdated instructions for new display hook patch that sets the display hook when doctesting.",
    "created_at": "2012-10-11T16:48:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142160",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:9" align="right">comment:9</div>

Updated instructions for new display hook patch that sets the display hook when doctesting.



---

archive/issue_comments_142161.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,6 +9,7 @@\n To the scripts repository: \n * [attachment: trac_12719-scripts.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz)\n * [attachment: trac_12719_remove_sage_gdb_ipython.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz)\n+* [attachment: 12719-test-displayhook.patch](https://github.com/sagemath/sage/files/ticket12719/12719-test-displayhook.patch.gz)\n \n To the root repository:\n * [attachment: trac_12719_ROOT_configuration_files.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz)\n@@ -27,6 +28,7 @@\n * [attachment: 12719-5.4rc1.patch](https://github.com/sagemath/sage/files/ticket12719/12719-5.4rc1.patch.gz)\n * [attachment: 12719-remove-plugin.patch](https://github.com/sagemath/sage/files/ticket12719/12719-remove-plugin.patch.gz)\n * [attachment: 12719-preparse-magic.patch](https://github.com/sagemath/sage/files/ticket12719/12719-preparse-magic.patch.gz)\n+* [attachment: 12719-displayhook-library.patch](https://github.com/sagemath/sage/files/ticket12719/12719-displayhook-library.patch.gz)\n \n ```\n cd SAGE_ROOT\n@@ -36,6 +38,7 @@\n \n ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz\n ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz\n+./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-test-displayhook.patch.gz\n \n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-5.1beta1.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser.patch.gz\n@@ -49,6 +52,7 @@\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-5.4rc1.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-remove-plugin.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-preparse-magic.patch.gz\n+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-displayhook-library.patch.gz\n ./sage -i http://sage.math.washington.edu/home/jason/ipython-0.13.spkg\n \n ./sage -br\n``````\n",
    "created_at": "2012-10-11T16:48:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142161",
    "user": "https://github.com/jasongrout"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,6 +9,7 @@
 To the scripts repository: 
 * [attachment: trac_12719-scripts.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz)
 * [attachment: trac_12719_remove_sage_gdb_ipython.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz)
+* [attachment: 12719-test-displayhook.patch](https://github.com/sagemath/sage/files/ticket12719/12719-test-displayhook.patch.gz)
 
 To the root repository:
 * [attachment: trac_12719_ROOT_configuration_files.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz)
@@ -27,6 +28,7 @@
 * [attachment: 12719-5.4rc1.patch](https://github.com/sagemath/sage/files/ticket12719/12719-5.4rc1.patch.gz)
 * [attachment: 12719-remove-plugin.patch](https://github.com/sagemath/sage/files/ticket12719/12719-remove-plugin.patch.gz)
 * [attachment: 12719-preparse-magic.patch](https://github.com/sagemath/sage/files/ticket12719/12719-preparse-magic.patch.gz)
+* [attachment: 12719-displayhook-library.patch](https://github.com/sagemath/sage/files/ticket12719/12719-displayhook-library.patch.gz)
 
 ```
 cd SAGE_ROOT
@@ -36,6 +38,7 @@
 
 ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz
 ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz
+./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-test-displayhook.patch.gz
 
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-5.1beta1.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser.patch.gz
@@ -49,6 +52,7 @@
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-5.4rc1.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-remove-plugin.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-preparse-magic.patch.gz
+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-displayhook-library.patch.gz
 ./sage -i http://sage.math.washington.edu/home/jason/ipython-0.13.spkg
 
 ./sage -br
``````




---

archive/issue_comments_142162.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nFor the %time command, I filed an issue with IPython a while ago: https://github.com/ipython/ipython/pull/2403\n\nFor now, it appears like we'll have to ship that patch ourselves.",
    "created_at": "2012-10-11T20:28:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142162",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:0" align="right">comment:0</div>

For the %time command, I filed an issue with IPython a while ago: https://github.com/ipython/ipython/pull/2403

For now, it appears like we'll have to ship that patch ourselves.



---

archive/issue_comments_142163.json:
```json
{
    "body": "Work Issues: **ship https://github.com/ipython/ipython/pull/2403**",
    "created_at": "2012-10-11T20:28:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142163",
    "user": "https://github.com/jasongrout"
}
```

Work Issues: **ship https://github.com/ipython/ipython/pull/2403**



---

archive/issue_comments_142164.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nThe matrix-printing seems to work now, but I'm seeing a few other doctest failures:\n\n```\nsage -t  --long -force_lib devel/sage/sage/interfaces/sage0.py\n**********************************************************************\nFile \"/scratch/palmieri/12719/sage-5.4.rc1/devel/sage-main/sage/interfaces/sage0.py\", line 489:\n    sage: sage0(4).gcd\nExpected:\n    <built-in method gcd of sage.rings.integer.Integer object at 0x...>\nGot:\n    <function gcd>\n**********************************************************************\n```\nand several failures in sage_extension.py, which would take up too much room to include here.",
    "created_at": "2012-10-11T21:23:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142164",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:2" align="right">comment:2</div>

The matrix-printing seems to work now, but I'm seeing a few other doctest failures:

```
sage -t  --long -force_lib devel/sage/sage/interfaces/sage0.py
**********************************************************************
File "/scratch/palmieri/12719/sage-5.4.rc1/devel/sage-main/sage/interfaces/sage0.py", line 489:
    sage: sage0(4).gcd
Expected:
    <built-in method gcd of sage.rings.integer.Integer object at 0x...>
Got:
    <function gcd>
**********************************************************************
```
and several failures in sage_extension.py, which would take up too much room to include here.



---

archive/issue_comments_142165.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI think the errors in `sage_extension.py` are because file names in `%runfile foo` are being preparsed: for example, the first error message is pretty long, but it ends with\n\n```\nIOError: did not find file '/home/palmieri/.sage/temp/sage.math.washington.edu/Integer(21508)/dir_0/run_cell.py' to load or attach\n```\nNote that `Integer(21508)` in the file name; this should presumably just be `21508`. This preparsing doesn't happen if the number is mixed in with letters, but for files or directories with purely numeric names, it seems to pop up. So from the command line:\n\n```\nsage: %runfile hello2.py   # works\nsage: %runfile 123/hello2.py   # fails\nsage: %runfile /home/palmieri/123/hello2.py   # fails\n```\nThe same thing happens with `%attach`, and I assume also with the other magic functions which take file names as arguments.",
    "created_at": "2012-10-15T20:56:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142165",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:3" align="right">comment:3</div>

I think the errors in `sage_extension.py` are because file names in `%runfile foo` are being preparsed: for example, the first error message is pretty long, but it ends with

```
IOError: did not find file '/home/palmieri/.sage/temp/sage.math.washington.edu/Integer(21508)/dir_0/run_cell.py' to load or attach
```
Note that `Integer(21508)` in the file name; this should presumably just be `21508`. This preparsing doesn't happen if the number is mixed in with letters, but for files or directories with purely numeric names, it seems to pop up. So from the command line:

```
sage: %runfile hello2.py   # works
sage: %runfile 123/hello2.py   # fails
sage: %runfile /home/palmieri/123/hello2.py   # fails
```
The same thing happens with `%attach`, and I assume also with the other magic functions which take file names as arguments.



---

archive/issue_comments_142166.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI don't understand the `sage0.py` failure. Does the new IPython have a different default print representation for some objects? Before the  patches here:\n\n```\nsage: a = 4\nsage: a.gcd\n<built-in method gcd of sage.rings.integer.Integer object at 0x480e330>\nsage: a.gcd?\nType:\t\tbuiltin_function_or_method\nBase Class:\t<type 'builtin_function_or_method'>\nString Form:\t<built-in method gcd of sage.rings.integer.Integer object at 0x480e330>\nNamespace:\tInteractive\nDefinition:\ta.gcd(self, n)\nDocstring:\n     ...\n```\nWith the patches:\n\n```\nsage: a = 4\nsage: a.gcd\n<function gcd>\nsage: a.gcd?\nType:       builtin_function_or_method\nString Form:<built-in method gcd of sage.rings.integer.Integer object at 0x5b7c5a0>\nDefinition: a.gcd(self, n)\nDocstring:\n   ...\n```\nWith the old version, the print rep for `a.gcd` is the same as what's labeled the \"String Form\" when you do `a.gcd?`. With the new version, the print rep has changed but the \"String Form\" has not. I'm also confused by this behavior (with the patches):\n\n```\nsage: a = 4\nsage: G = a.gcd\nsage: G.__repr__()\n'<built-in method gcd of sage.rings.integer.Integer object at 0x4b685a0>'\nsage: G\n<function gcd>\nsage: str(G)\n'<built-in method gcd of sage.rings.integer.Integer object at 0x4b685a0>'\n```\nWhy isn't `G` printed using its `__repr__` method?\n\nI've tried out some other objects (e.g., matrices and elements of the Steenrod algebra) and my guess is that the print representations for methods defined in pyx files are getting changed to `<function ...>`, while those defined in py files haven't changed. Any ideas why? Looking at `ipython-0.10.2.p1/src/IPython/UserConfig/ipythonrc`, I see the configuration option `object_info_string_level 0`, which looks relevant, but we're not using this style of configuration, right?",
    "created_at": "2012-10-15T21:31:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142166",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:4" align="right">comment:4</div>

I don't understand the `sage0.py` failure. Does the new IPython have a different default print representation for some objects? Before the  patches here:

```
sage: a = 4
sage: a.gcd
<built-in method gcd of sage.rings.integer.Integer object at 0x480e330>
sage: a.gcd?
Type:		builtin_function_or_method
Base Class:	<type 'builtin_function_or_method'>
String Form:	<built-in method gcd of sage.rings.integer.Integer object at 0x480e330>
Namespace:	Interactive
Definition:	a.gcd(self, n)
Docstring:
     ...
```
With the patches:

```
sage: a = 4
sage: a.gcd
<function gcd>
sage: a.gcd?
Type:       builtin_function_or_method
String Form:<built-in method gcd of sage.rings.integer.Integer object at 0x5b7c5a0>
Definition: a.gcd(self, n)
Docstring:
   ...
```
With the old version, the print rep for `a.gcd` is the same as what's labeled the "String Form" when you do `a.gcd?`. With the new version, the print rep has changed but the "String Form" has not. I'm also confused by this behavior (with the patches):

```
sage: a = 4
sage: G = a.gcd
sage: G.__repr__()
'<built-in method gcd of sage.rings.integer.Integer object at 0x4b685a0>'
sage: G
<function gcd>
sage: str(G)
'<built-in method gcd of sage.rings.integer.Integer object at 0x4b685a0>'
```
Why isn't `G` printed using its `__repr__` method?

I've tried out some other objects (e.g., matrices and elements of the Steenrod algebra) and my guess is that the print representations for methods defined in pyx files are getting changed to `<function ...>`, while those defined in py files haven't changed. Any ideas why? Looking at `ipython-0.10.2.p1/src/IPython/UserConfig/ipythonrc`, I see the configuration option `object_info_string_level 0`, which looks relevant, but we're not using this style of configuration, right?



---

archive/issue_comments_142167.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nJust a heads up that iPython 0.13.1 is set to be released on Friday. It fixes all the bugs I was having with ipython.parallel.",
    "created_at": "2012-10-15T22:29:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142167",
    "user": "https://github.com/sagetrac-broken-symlink"
}
```

<div id="comment:5" align="right">comment:5</div>

Just a heads up that iPython 0.13.1 is set to be released on Friday. It fixes all the bugs I was having with ipython.parallel.



---

archive/issue_comments_142168.json:
```json
{
    "body": "Attachment: **[trac_12719-pager.patch.gz](https://github.com/sagemath/sage/files/ticket12719/trac_12719-pager.patch.gz)**",
    "created_at": "2012-10-23T15:52:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142168",
    "user": "https://github.com/jhpalmieri"
}
```

Attachment: **[trac_12719-pager.patch.gz](https://github.com/sagemath/sage/files/ticket12719/trac_12719-pager.patch.gz)**



---

archive/issue_comments_142169.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nWe need another patch, since the pager in IPython has moved. One instance of this was fixed in one of the patches, but we need to fix others.\n\nNote the change to sagedoc.py; this needs to be tested.",
    "created_at": "2012-10-23T15:53:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142169",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:6" align="right">comment:6</div>

We need another patch, since the pager in IPython has moved. One instance of this was fixed in one of the patches, but we need to fix others.

Note the change to sagedoc.py; this needs to be tested.



---

archive/issue_comments_142170.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -29,6 +29,7 @@\n * [attachment: 12719-remove-plugin.patch](https://github.com/sagemath/sage/files/ticket12719/12719-remove-plugin.patch.gz)\n * [attachment: 12719-preparse-magic.patch](https://github.com/sagemath/sage/files/ticket12719/12719-preparse-magic.patch.gz)\n * [attachment: 12719-displayhook-library.patch](https://github.com/sagemath/sage/files/ticket12719/12719-displayhook-library.patch.gz)\n+* [attachment: trac_12719-pager.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-pager.patch.gz)\n \n ```\n cd SAGE_ROOT\n@@ -53,6 +54,7 @@\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-remove-plugin.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-preparse-magic.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-displayhook-library.patch.gz\n+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-pager.patch.gz\n ./sage -i http://sage.math.washington.edu/home/jason/ipython-0.13.spkg\n \n ./sage -br\n``````\n",
    "created_at": "2012-10-23T15:53:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142170",
    "user": "https://github.com/jhpalmieri"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -29,6 +29,7 @@
 * [attachment: 12719-remove-plugin.patch](https://github.com/sagemath/sage/files/ticket12719/12719-remove-plugin.patch.gz)
 * [attachment: 12719-preparse-magic.patch](https://github.com/sagemath/sage/files/ticket12719/12719-preparse-magic.patch.gz)
 * [attachment: 12719-displayhook-library.patch](https://github.com/sagemath/sage/files/ticket12719/12719-displayhook-library.patch.gz)
+* [attachment: trac_12719-pager.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-pager.patch.gz)
 
 ```
 cd SAGE_ROOT
@@ -53,6 +54,7 @@
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-remove-plugin.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-preparse-magic.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-displayhook-library.patch.gz
+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-pager.patch.gz
 ./sage -i http://sage.math.washington.edu/home/jason/ipython-0.13.spkg
 
 ./sage -br
``````




---

archive/issue_comments_142171.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nIt seems like you caught all of the instances of the IPython pager:\n\n```\ngrout@tiny:~/sage/devel/sage/sage% ack genutils *\ninterfaces/gap3.py\n493:            import IPython.genutils\n494:            IPython.genutils.page(helptext)\n\nmisc/pager.py\n27:        import IPython.genutils\n28:        return IPython.genutils.page\n\nmisc/sagedoc.py\n833:        from IPython.genutils import page\n```",
    "created_at": "2012-10-23T18:02:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142171",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:7" align="right">comment:7</div>

It seems like you caught all of the instances of the IPython pager:

```
grout@tiny:~/sage/devel/sage/sage% ack genutils *
interfaces/gap3.py
493:            import IPython.genutils
494:            IPython.genutils.page(helptext)

misc/pager.py
27:        import IPython.genutils
28:        return IPython.genutils.page

misc/sagedoc.py
833:        from IPython.genutils import page
```



---

archive/issue_comments_142172.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,7 +2,7 @@\n \n Note: To use the QT console (`sage -ipython qtconsole`), you need qt/qt-devel in your base OS install, the optional zeromq/pyzmq spkgs from #12843, and the optional sip/PyQt spkgs from #13022.\n \n-Install the IPython 0.13 spkg at [http://sage.math.washington.edu/home/jason/ipython-0.13.spkg](http://sage.math.washington.edu/home/jason/ipython-0.13.spkg)\n+Install the IPython 0.13.1 spkg at [http://sage.math.washington.edu/home/jason/ipython-0.13.1spkg](http://sage.math.washington.edu/home/jason/ipython-0.13.1spkg)\n \n **apply**:\n \n@@ -55,7 +55,7 @@\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-preparse-magic.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-displayhook-library.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-pager.patch.gz\n-./sage -i http://sage.math.washington.edu/home/jason/ipython-0.13.spkg\n+./sage -i http://sage.math.washington.edu/home/jason/ipython-0.13.1.spkg\n \n ./sage -br\n ```\n``````\n",
    "created_at": "2012-10-23T18:08:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142172",
    "user": "https://github.com/jasongrout"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,7 +2,7 @@
 
 Note: To use the QT console (`sage -ipython qtconsole`), you need qt/qt-devel in your base OS install, the optional zeromq/pyzmq spkgs from #12843, and the optional sip/PyQt spkgs from #13022.
 
-Install the IPython 0.13 spkg at [http://sage.math.washington.edu/home/jason/ipython-0.13.spkg](http://sage.math.washington.edu/home/jason/ipython-0.13.spkg)
+Install the IPython 0.13.1 spkg at [http://sage.math.washington.edu/home/jason/ipython-0.13.1spkg](http://sage.math.washington.edu/home/jason/ipython-0.13.1spkg)
 
 **apply**:
 
@@ -55,7 +55,7 @@
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-preparse-magic.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-displayhook-library.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-pager.patch.gz
-./sage -i http://sage.math.washington.edu/home/jason/ipython-0.13.spkg
+./sage -i http://sage.math.washington.edu/home/jason/ipython-0.13.1.spkg
 
 ./sage -br
 ```
``````




---

archive/issue_comments_142173.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nPositive review to the sagedoc.py change---search_src didn't work before, but it does work after the change.",
    "created_at": "2012-10-23T18:12:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142173",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:9" align="right">comment:9</div>

Positive review to the sagedoc.py change---search_src didn't work before, but it does work after the change.



---

archive/issue_comments_142174.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nI uploaded an IPython 0.13.1 spkg, updating to the latest stable.  (the old 0.13 spkg is still in my home directory too).",
    "created_at": "2012-10-23T18:13:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142174",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:0" align="right">comment:0</div>

I uploaded an IPython 0.13.1 spkg, updating to the latest stable.  (the old 0.13 spkg is still in my home directory too).



---

archive/issue_comments_142175.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nAttachment: **[trac_12719-move_to_preparser_rebased.patch.gz](https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser_rebased.patch.gz)**\n\n[attachment: trac_12719-move_to_preparser.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser.patch.gz) doesn't apply cleanly to 5.4.rc2. Here's a rebased version.",
    "created_at": "2012-10-23T19:06:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142175",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:1" align="right">comment:1</div>

Attachment: **[trac_12719-move_to_preparser_rebased.patch.gz](https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser_rebased.patch.gz)**

[attachment: trac_12719-move_to_preparser.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser.patch.gz) doesn't apply cleanly to 5.4.rc2. Here's a rebased version.



---

archive/issue_comments_142176.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -17,7 +17,7 @@\n \n To the sage library:\n * [attachment: trac_12719-5.1beta1.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-5.1beta1.patch.gz)\n-* [attachment: trac_12719-move_to_preparser.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser.patch.gz)\n+* [attachment: trac_12719-move_to_preparser_rebased.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser_rebased.patch.gz)\n * [attachment: trac_12719_ipython_fixes.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz)\n * [attachment: trac_12719_dedent.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz)\n * [attachment: trac_12719-crash.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-crash.patch.gz)\n@@ -42,7 +42,7 @@\n ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-test-displayhook.patch.gz\n \n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-5.1beta1.patch.gz\n-./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser.patch.gz\n+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser_rebased.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-crash.patch.gz\n``````\n",
    "created_at": "2012-10-23T19:06:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142176",
    "user": "https://github.com/jhpalmieri"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -17,7 +17,7 @@
 
 To the sage library:
 * [attachment: trac_12719-5.1beta1.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-5.1beta1.patch.gz)
-* [attachment: trac_12719-move_to_preparser.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser.patch.gz)
+* [attachment: trac_12719-move_to_preparser_rebased.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser_rebased.patch.gz)
 * [attachment: trac_12719_ipython_fixes.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz)
 * [attachment: trac_12719_dedent.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz)
 * [attachment: trac_12719-crash.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-crash.patch.gz)
@@ -42,7 +42,7 @@
 ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-test-displayhook.patch.gz
 
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-5.1beta1.patch.gz
-./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser.patch.gz
+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser_rebased.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-crash.patch.gz
``````




---

archive/issue_comments_142177.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\njhpalmieri: I uploaded a new IPython 0.13.1 spkg that applies https://github.com/ipython/ipython/pull/2403.  This means we can delete the  [attachment: 12719-preparse-magic.patch](https://github.com/sagemath/sage/files/ticket12719/12719-preparse-magic.patch.gz) patch, which will solve the %runfile problems, but keep the preparsing for %time, %timeit, and %prun.\n\nI've updated the instructions.",
    "created_at": "2012-10-23T19:08:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142177",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:2" align="right">comment:2</div>

jhpalmieri: I uploaded a new IPython 0.13.1 spkg that applies https://github.com/ipython/ipython/pull/2403.  This means we can delete the  [attachment: 12719-preparse-magic.patch](https://github.com/sagemath/sage/files/ticket12719/12719-preparse-magic.patch.gz) patch, which will solve the %runfile problems, but keep the preparsing for %time, %timeit, and %prun.

I've updated the instructions.



---

archive/issue_comments_142178.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -27,7 +27,6 @@\n * [attachment: 12719-fix-transformer.patch](https://github.com/sagemath/sage/files/ticket12719/12719-fix-transformer.patch.gz)\n * [attachment: 12719-5.4rc1.patch](https://github.com/sagemath/sage/files/ticket12719/12719-5.4rc1.patch.gz)\n * [attachment: 12719-remove-plugin.patch](https://github.com/sagemath/sage/files/ticket12719/12719-remove-plugin.patch.gz)\n-* [attachment: 12719-preparse-magic.patch](https://github.com/sagemath/sage/files/ticket12719/12719-preparse-magic.patch.gz)\n * [attachment: 12719-displayhook-library.patch](https://github.com/sagemath/sage/files/ticket12719/12719-displayhook-library.patch.gz)\n * [attachment: trac_12719-pager.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-pager.patch.gz)\n \n@@ -52,7 +51,6 @@\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-fix-transformer.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-5.4rc1.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-remove-plugin.patch.gz\n-./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-preparse-magic.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-displayhook-library.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-pager.patch.gz\n ./sage -i http://sage.math.washington.edu/home/jason/ipython-0.13.1.spkg\n``````\n",
    "created_at": "2012-10-23T19:08:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142178",
    "user": "https://github.com/jasongrout"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -27,7 +27,6 @@
 * [attachment: 12719-fix-transformer.patch](https://github.com/sagemath/sage/files/ticket12719/12719-fix-transformer.patch.gz)
 * [attachment: 12719-5.4rc1.patch](https://github.com/sagemath/sage/files/ticket12719/12719-5.4rc1.patch.gz)
 * [attachment: 12719-remove-plugin.patch](https://github.com/sagemath/sage/files/ticket12719/12719-remove-plugin.patch.gz)
-* [attachment: 12719-preparse-magic.patch](https://github.com/sagemath/sage/files/ticket12719/12719-preparse-magic.patch.gz)
 * [attachment: 12719-displayhook-library.patch](https://github.com/sagemath/sage/files/ticket12719/12719-displayhook-library.patch.gz)
 * [attachment: trac_12719-pager.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-pager.patch.gz)
 
@@ -52,7 +51,6 @@
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-fix-transformer.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-5.4rc1.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-remove-plugin.patch.gz
-./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-preparse-magic.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-displayhook-library.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-pager.patch.gz
 ./sage -i http://sage.math.washington.edu/home/jason/ipython-0.13.1.spkg
``````




---

archive/issue_comments_142179.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nWhew, with all these patches---I can't wait until we move to using git (or even mercurial properly) and we have branches for this sort of thing.",
    "created_at": "2012-10-23T19:10:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142179",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:3" align="right">comment:3</div>

Whew, with all these patches---I can't wait until we move to using git (or even mercurial properly) and we have branches for this sort of thing.



---

archive/issue_comments_142180.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nThe cython function printing issue appears to boil down to those functions being treated as builtin functions, so this line applies: https://github.com/ipython/ipython/blob/master/IPython/lib/pretty.py#L669, rather than this line: https://github.com/ipython/ipython/blob/master/IPython/lib/pretty.py#L671\n\nSuggestions for how to fix this?  How do we distinguish between built-in functions and Cython methods?",
    "created_at": "2012-10-23T19:33:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142180",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:4" align="right">comment:4</div>

The cython function printing issue appears to boil down to those functions being treated as builtin functions, so this line applies: https://github.com/ipython/ipython/blob/master/IPython/lib/pretty.py#L669, rather than this line: https://github.com/ipython/ipython/blob/master/IPython/lib/pretty.py#L671

Suggestions for how to fix this?  How do we distinguish between built-in functions and Cython methods?



---

archive/issue_comments_142181.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI've posted to the IPython list about the Cython method printing: http://mail.scipy.org/pipermail/ipython-dev/2012-October/010503.html",
    "created_at": "2012-10-23T20:01:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142181",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:5" align="right">comment:5</div>

I've posted to the IPython list about the Cython method printing: http://mail.scipy.org/pipermail/ipython-dev/2012-October/010503.html



---

archive/issue_comments_142182.json:
```json
{
    "body": "Changed work issues from **ship https://github.com/ipython/ipython/pull/2403** to **Cython method printing**",
    "created_at": "2012-10-23T20:03:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142182",
    "user": "https://github.com/jasongrout"
}
```

Changed work issues from **ship https://github.com/ipython/ipython/pull/2403** to **Cython method printing**



---

archive/issue_comments_142183.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nAre there any other outstanding issues other than the Cython method printing?",
    "created_at": "2012-10-23T20:03:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142183",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:6" align="right">comment:6</div>

Are there any other outstanding issues other than the Cython method printing?



---

archive/issue_comments_142184.json:
```json
{
    "body": "<div id=\"comment:157\" align=\"right\">comment:157</div>\n\nReplying to [@jasongrout](#comment:152):\n> jhpalmieri: I uploaded a new IPython 0.13.1 spkg that applies https://github.com/ipython/ipython/pull/2403.  This means we can delete the  [attachment: 12719-preparse-magic.patch](https://github.com/sagemath/sage/files/ticket12719/12719-preparse-magic.patch.gz) patch, which will solve the %runfile problems, but keep the preparsing for %time, %timeit, and %prun.\n\nCan you think of a way to doctest this? (I haven't tried anything at all, so it might be easy.)",
    "created_at": "2012-10-23T20:08:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142184",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:157" align="right">comment:157</div>

Replying to [@jasongrout](#comment:152):
> jhpalmieri: I uploaded a new IPython 0.13.1 spkg that applies https://github.com/ipython/ipython/pull/2403.  This means we can delete the  [attachment: 12719-preparse-magic.patch](https://github.com/sagemath/sage/files/ticket12719/12719-preparse-magic.patch.gz) patch, which will solve the %runfile problems, but keep the preparsing for %time, %timeit, and %prun.

Can you think of a way to doctest this? (I haven't tried anything at all, so it might be easy.)



---

archive/issue_comments_142185.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nIf just putting in a magic `%timeit ...` doesn't work, then this should work *if* the doctesting framework is using IPython:\n\n```\nsage: get_ipython().run_line_magic('time', '594.factor()')\nCPU times: user 0.00 s, sys: 0.00 s, total: 0.00 s\nWall time: 0.00 s\n2 * 3^3 * 11\n```",
    "created_at": "2012-10-23T20:21:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142185",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:8" align="right">comment:8</div>

If just putting in a magic `%timeit ...` doesn't work, then this should work *if* the doctesting framework is using IPython:

```
sage: get_ipython().run_line_magic('time', '594.factor()')
CPU times: user 0.00 s, sys: 0.00 s, total: 0.00 s
Wall time: 0.00 s
2 * 3^3 * 11
```



---

archive/issue_comments_142186.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -29,6 +29,7 @@\n * [attachment: 12719-remove-plugin.patch](https://github.com/sagemath/sage/files/ticket12719/12719-remove-plugin.patch.gz)\n * [attachment: 12719-displayhook-library.patch](https://github.com/sagemath/sage/files/ticket12719/12719-displayhook-library.patch.gz)\n * [attachment: trac_12719-pager.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-pager.patch.gz)\n+* [attachment: trac_12719-preparse-doctest.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-preparse-doctest.patch.gz)\n \n ```\n cd SAGE_ROOT\n@@ -53,6 +54,7 @@\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-remove-plugin.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-displayhook-library.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-pager.patch.gz\n+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-preparse-doctest.patch.gz\n ./sage -i http://sage.math.washington.edu/home/jason/ipython-0.13.1.spkg\n \n ./sage -br\n``````\n",
    "created_at": "2012-10-23T20:45:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142186",
    "user": "https://github.com/jhpalmieri"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -29,6 +29,7 @@
 * [attachment: 12719-remove-plugin.patch](https://github.com/sagemath/sage/files/ticket12719/12719-remove-plugin.patch.gz)
 * [attachment: 12719-displayhook-library.patch](https://github.com/sagemath/sage/files/ticket12719/12719-displayhook-library.patch.gz)
 * [attachment: trac_12719-pager.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-pager.patch.gz)
+* [attachment: trac_12719-preparse-doctest.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-preparse-doctest.patch.gz)
 
 ```
 cd SAGE_ROOT
@@ -53,6 +54,7 @@
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-remove-plugin.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-displayhook-library.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-pager.patch.gz
+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-preparse-doctest.patch.gz
 ./sage -i http://sage.math.washington.edu/home/jason/ipython-0.13.1.spkg
 
 ./sage -br
``````




---

archive/issue_comments_142187.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nHey, let's add another patch to the pile!",
    "created_at": "2012-10-23T20:45:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142187",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:9" align="right">comment:9</div>

Hey, let's add another patch to the pile!



---

archive/issue_comments_142188.json:
```json
{
    "body": "Attachment: **[trac_12719-preparse-doctest.patch.gz](https://github.com/sagemath/sage/files/ticket12719/trac_12719-preparse-doctest.patch.gz)**",
    "created_at": "2012-10-23T22:38:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142188",
    "user": "https://github.com/jhpalmieri"
}
```

Attachment: **[trac_12719-preparse-doctest.patch.gz](https://github.com/sagemath/sage/files/ticket12719/trac_12719-preparse-doctest.patch.gz)**



---

archive/issue_comments_142189.json:
```json
{
    "body": "<div id=\"comment:160\" align=\"right\">comment:160</div>\n\nReplying to [@jasongrout](#comment:154):\n> The cython function printing issue appears to boil down to those functions being treated as builtin functions, so this line applies: https://github.com/ipython/ipython/blob/master/IPython/lib/pretty.py#L669, rather than this line: https://github.com/ipython/ipython/blob/master/IPython/lib/pretty.py#L671\n> \n> Suggestions for how to fix this?  How do we distinguish between built-in functions and Cython methods?\n\nI don't know. Even in previous versions of Sage:\n\n```\nsage: type(4.gcd)\n<type 'builtin_function_or_method'>\n```\nI wonder if changing this would require patching Cython. If we knew where the methods for Cython methods were defined, maybe we could just define a method `_repr_pretty_`, as described in https://github.com/ipython/ipython/blob/master/IPython/lib/pretty.py#L27. Line 3737-3740 of `local/lib/python/site-packages/Cython/Compiler/Nodes.py` says\n\n```\n        is_builtin_function_or_method = \"PyCFunction_Check(%s)\" % func_node_temp\n        is_overridden = \"(PyCFunction_GET_FUNCTION(%s) != (PyCFunction)%s)\" % (\n            func_node_temp, self.py_func.entry.func_cname)\n        code.putln(\"if (!%s || %s) {\" % (is_builtin_function_or_method, is_overridden))\n```\nIs this relevant?\n\nAlternatively, we could patch the file \"pretty.py\", modifying the definition of `_type_pprinters` somehow, although I'm not sure how.\n\nAlternatively, we could temporarily accept the new print representation for Cython-defined methods, and create a new ticket for fixing this. It seems like a small issue to me, and maybe it shouldn't hold up the rest of this ticket.",
    "created_at": "2012-10-24T21:05:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142189",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:160" align="right">comment:160</div>

Replying to [@jasongrout](#comment:154):
> The cython function printing issue appears to boil down to those functions being treated as builtin functions, so this line applies: https://github.com/ipython/ipython/blob/master/IPython/lib/pretty.py#L669, rather than this line: https://github.com/ipython/ipython/blob/master/IPython/lib/pretty.py#L671
> 
> Suggestions for how to fix this?  How do we distinguish between built-in functions and Cython methods?

I don't know. Even in previous versions of Sage:

```
sage: type(4.gcd)
<type 'builtin_function_or_method'>
```
I wonder if changing this would require patching Cython. If we knew where the methods for Cython methods were defined, maybe we could just define a method `_repr_pretty_`, as described in https://github.com/ipython/ipython/blob/master/IPython/lib/pretty.py#L27. Line 3737-3740 of `local/lib/python/site-packages/Cython/Compiler/Nodes.py` says

```
        is_builtin_function_or_method = "PyCFunction_Check(%s)" % func_node_temp
        is_overridden = "(PyCFunction_GET_FUNCTION(%s) != (PyCFunction)%s)" % (
            func_node_temp, self.py_func.entry.func_cname)
        code.putln("if (!%s || %s) {" % (is_builtin_function_or_method, is_overridden))
```
Is this relevant?

Alternatively, we could patch the file "pretty.py", modifying the definition of `_type_pprinters` somehow, although I'm not sure how.

Alternatively, we could temporarily accept the new print representation for Cython-defined methods, and create a new ticket for fixing this. It seems like a small issue to me, and maybe it shouldn't hold up the rest of this ticket.



---

archive/issue_comments_142190.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nAlternatively, we could post to the Cython list and ask them :).\n\nCcing robertwb (see the comment or two above about Cython function printing, as well as http://mail.scipy.org/pipermail/ipython-dev/2012-October/010503.html, which tries to lay out the issue more concisely).",
    "created_at": "2012-10-24T21:14:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142190",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:1" align="right">comment:1</div>

Alternatively, we could post to the Cython list and ask them :).

Ccing robertwb (see the comment or two above about Cython function printing, as well as http://mail.scipy.org/pipermail/ipython-dev/2012-October/010503.html, which tries to lay out the issue more concisely).



---

archive/issue_comments_142191.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nAsking the Cython developers is a great idea. Here's a real hack, but it seems to work: for built-in functions, if the print representation includes \"sage.\", we use that. (Now that I look at your post to the IPython list, it's just a version of the hack you described there.) This is a patch for IPython/lib/pretty.py:\n\n```diff\n--- pretty.py.orig\t2012-10-20 17:30:54.000000000 -0700\n+++ pretty.py\t2012-10-24 14:19:40.000000000 -0700\n@@ -616,11 +616,14 @@\n \n def _function_pprint(obj, p, cycle):\n     \"\"\"Base pprint for all functions and builtin functions.\"\"\"\n-    if obj.__module__ in ('__builtin__', 'exceptions') or not obj.__module__:\n-        name = obj.__name__\n+    if obj.__repr__().find('sage.') != -1:\n+        p.text(obj.__repr__())\n     else:\n-        name = obj.__module__ + '.' + obj.__name__\n-    p.text('<function %s>' % name)\n+        if obj.__module__ in ('__builtin__', 'exceptions') or not obj.__module__:\n+            name = obj.__name__\n+        else:\n+            name = obj.__module__ + '.' + obj.__name__\n+        p.text('<function %s>' % name)\n \n \n def _exception_pprint(obj, p, cycle):\n```",
    "created_at": "2012-10-24T21:26:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142191",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:2" align="right">comment:2</div>

Asking the Cython developers is a great idea. Here's a real hack, but it seems to work: for built-in functions, if the print representation includes "sage.", we use that. (Now that I look at your post to the IPython list, it's just a version of the hack you described there.) This is a patch for IPython/lib/pretty.py:

```diff
--- pretty.py.orig	2012-10-20 17:30:54.000000000 -0700
+++ pretty.py	2012-10-24 14:19:40.000000000 -0700
@@ -616,11 +616,14 @@
 
 def _function_pprint(obj, p, cycle):
     """Base pprint for all functions and builtin functions."""
-    if obj.__module__ in ('__builtin__', 'exceptions') or not obj.__module__:
-        name = obj.__name__
+    if obj.__repr__().find('sage.') != -1:
+        p.text(obj.__repr__())
     else:
-        name = obj.__module__ + '.' + obj.__name__
-    p.text('<function %s>' % name)
+        if obj.__module__ in ('__builtin__', 'exceptions') or not obj.__module__:
+            name = obj.__name__
+        else:
+            name = obj.__module__ + '.' + obj.__name__
+        p.text('<function %s>' % name)
 
 
 def _exception_pprint(obj, p, cycle):
```



---

archive/issue_comments_142192.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nOn the [Cython users](https://groups.google.com/d/topic/cython-users/lVEMHM5keNI/discussion) mailing list, in which I essentially quoted Jason's message to the IPython list, Bradley Froehle says\n\n```\nThere's nothing to be done in Cython here.  As you point out, \na.seed is a builtin (i.e. compiled) method and type(a.seed) returns\n`builtin_function_or_method` correctly.\n```\nSo I think our options are\n\n- hack pretty.py\n- wait for a real IPython fix\n- change the doctests to match the current output for now, and open a new ticket to fix this later.\n\nPreferences? Am I missing any good choices?",
    "created_at": "2012-10-26T18:42:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142192",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:3" align="right">comment:3</div>

On the [Cython users](https://groups.google.com/d/topic/cython-users/lVEMHM5keNI/discussion) mailing list, in which I essentially quoted Jason's message to the IPython list, Bradley Froehle says

```
There's nothing to be done in Cython here.  As you point out, 
a.seed is a builtin (i.e. compiled) method and type(a.seed) returns
`builtin_function_or_method` correctly.
```
So I think our options are

- hack pretty.py
- wait for a real IPython fix
- change the doctests to match the current output for now, and open a new ticket to fix this later.

Preferences? Am I missing any good choices?



---

archive/issue_comments_142193.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nPing. Any opinions?",
    "created_at": "2012-11-02T20:50:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142193",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:4" align="right">comment:4</div>

Ping. Any opinions?



---

archive/issue_comments_142194.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nIs it hard to change the doctests (how many?).  If that's easy, I'd say to change the doctests, especially given that any patch we make will take a long time to make it back into Sage through IPython.  I'd veto \"wait for a real IPython fix\".\n\nIs this the only thing holding us back now?",
    "created_at": "2012-11-02T20:55:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142194",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:5" align="right">comment:5</div>

Is it hard to change the doctests (how many?).  If that's easy, I'd say to change the doctests, especially given that any patch we make will take a long time to make it back into Sage through IPython.  I'd veto "wait for a real IPython fix".

Is this the only thing holding us back now?



---

archive/issue_comments_142195.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI think there is only one failing doctest:\n\n```\nsage -t  --long -force_lib devel/sage/sage/interfaces/sage0.py\n**********************************************************************\nFile \"/Users/palmieri/Desktop/Sage_stuff/sage_builds/12719/sage-5.4.rc3/devel/sage-main/sage/interfaces/sage0.py\", \\\nline 489:\n    sage: sage0(4).gcd\nExpected:\n    <built-in method gcd of sage.rings.integer.Integer object at 0x...>\nGot:\n    <function gcd>\n**********************************************************************\n```\nand it should be trivial to fix. I also don't know how serious the issue is. I mean, it would be nice if `4.gcd` printed more information, but it doesn't seem crucial in any way.",
    "created_at": "2012-11-02T23:47:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142195",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:6" align="right">comment:6</div>

I think there is only one failing doctest:

```
sage -t  --long -force_lib devel/sage/sage/interfaces/sage0.py
**********************************************************************
File "/Users/palmieri/Desktop/Sage_stuff/sage_builds/12719/sage-5.4.rc3/devel/sage-main/sage/interfaces/sage0.py", \
line 489:
    sage: sage0(4).gcd
Expected:
    <built-in method gcd of sage.rings.integer.Integer object at 0x...>
Got:
    <function gcd>
**********************************************************************
```
and it should be trivial to fix. I also don't know how serious the issue is. I mean, it would be nice if `4.gcd` printed more information, but it doesn't seem crucial in any way.



---

archive/issue_comments_142196.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -30,6 +30,7 @@\n * [attachment: 12719-displayhook-library.patch](https://github.com/sagemath/sage/files/ticket12719/12719-displayhook-library.patch.gz)\n * [attachment: trac_12719-pager.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-pager.patch.gz)\n * [attachment: trac_12719-preparse-doctest.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-preparse-doctest.patch.gz)\n+* [attachment: trac_12719-gcd-repr.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-gcd-repr.patch.gz)\n \n ```\n cd SAGE_ROOT\n@@ -55,9 +56,11 @@\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-displayhook-library.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-pager.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-preparse-doctest.patch.gz\n+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-gcd-repr.patch.gz\n+\n ./sage -i http://sage.math.washington.edu/home/jason/ipython-0.13.1.spkg\n \n ./sage -br\n ```\n \n-Fixes #11223\n+Fixes #11223?\n``````\n",
    "created_at": "2012-11-02T23:47:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142196",
    "user": "https://github.com/jhpalmieri"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -30,6 +30,7 @@
 * [attachment: 12719-displayhook-library.patch](https://github.com/sagemath/sage/files/ticket12719/12719-displayhook-library.patch.gz)
 * [attachment: trac_12719-pager.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-pager.patch.gz)
 * [attachment: trac_12719-preparse-doctest.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-preparse-doctest.patch.gz)
+* [attachment: trac_12719-gcd-repr.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-gcd-repr.patch.gz)
 
 ```
 cd SAGE_ROOT
@@ -55,9 +56,11 @@
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-displayhook-library.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-pager.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-preparse-doctest.patch.gz
+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-gcd-repr.patch.gz
+
 ./sage -i http://sage.math.washington.edu/home/jason/ipython-0.13.1.spkg
 
 ./sage -br
 ```
 
-Fixes #11223
+Fixes #11223?
``````




---

archive/issue_comments_142197.json:
```json
{
    "body": "Attachment: **[trac_12719-gcd-repr.patch.gz](https://github.com/sagemath/sage/files/ticket12719/trac_12719-gcd-repr.patch.gz)**",
    "created_at": "2012-11-02T23:47:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142197",
    "user": "https://github.com/jhpalmieri"
}
```

Attachment: **[trac_12719-gcd-repr.patch.gz](https://github.com/sagemath/sage/files/ticket12719/trac_12719-gcd-repr.patch.gz)**



---

archive/issue_comments_142198.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI'd say let's change our doctest, and then work with upstream to get a patch in.  When the patch comes down (probably in a few months to a year?), we'll change our doctest again.",
    "created_at": "2012-11-03T09:33:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142198",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:7" align="right">comment:7</div>

I'd say let's change our doctest, and then work with upstream to get a patch in.  When the patch comes down (probably in a few months to a year?), we'll change our doctest again.



---

archive/issue_comments_142199.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI changed the doctest. All tests pass for me on sage.math. Since it was already positively reviewed once before, I think we can set it back to that. What do you think?",
    "created_at": "2012-11-03T15:10:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142199",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:8" align="right">comment:8</div>

I changed the doctest. All tests pass for me on sage.math. Since it was already positively reviewed once before, I think we can set it back to that. What do you think?



---

archive/issue_comments_142200.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nYippee!!",
    "created_at": "2012-11-03T15:44:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142200",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:9" align="right">comment:9</div>

Yippee!!



---

archive/issue_events_175724.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2012-11-03T17:29:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175724"
}
```



---

archive/issue_events_175725.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2012-11-03T17:29:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175725"
}
```



---

archive/issue_events_175726.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-05T07:43:40Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "milestone_number": null,
    "milestone_title": "sage-5.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175726"
}
```



---

archive/issue_events_175727.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-05T07:43:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "milestone_number": null,
    "milestone_title": "sage-5.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175727"
}
```



---

archive/issue_comments_142201.json:
```json
{
    "body": "Changed work issues from **Cython method printing** to none",
    "created_at": "2012-11-05T07:43:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142201",
    "user": "https://github.com/jdemeyer"
}
```

Changed work issues from **Cython method printing** to none



---

archive/issue_comments_142202.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\njdemeyer -- it would be great if this were merged into one of the 5.5 betas.",
    "created_at": "2012-11-08T06:54:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142202",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:2" align="right">comment:2</div>

jdemeyer -- it would be great if this were merged into one of the 5.5 betas.



---

archive/issue_comments_142203.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nOf course, don't worry.",
    "created_at": "2012-11-08T08:45:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142203",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:3" align="right">comment:3</div>

Of course, don't worry.



---

archive/issue_comments_142204.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,7 +2,7 @@\n \n Note: To use the QT console (`sage -ipython qtconsole`), you need qt/qt-devel in your base OS install, the optional zeromq/pyzmq spkgs from #12843, and the optional sip/PyQt spkgs from #13022.\n \n-Install the IPython 0.13.1 spkg at [http://sage.math.washington.edu/home/jason/ipython-0.13.1spkg](http://sage.math.washington.edu/home/jason/ipython-0.13.1spkg)\n+Install the IPython 0.13.1 spkg at [http://sage.math.washington.edu/home/jason/ipython-0.13.1.spkg](http://sage.math.washington.edu/home/jason/ipython-0.13.1.spkg)\n \n **apply**:\n \n``````\n",
    "created_at": "2012-11-08T14:14:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142204",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,7 +2,7 @@
 
 Note: To use the QT console (`sage -ipython qtconsole`), you need qt/qt-devel in your base OS install, the optional zeromq/pyzmq spkgs from #12843, and the optional sip/PyQt spkgs from #13022.
 
-Install the IPython 0.13.1 spkg at [http://sage.math.washington.edu/home/jason/ipython-0.13.1spkg](http://sage.math.washington.edu/home/jason/ipython-0.13.1spkg)
+Install the IPython 0.13.1 spkg at [http://sage.math.washington.edu/home/jason/ipython-0.13.1.spkg](http://sage.math.washington.edu/home/jason/ipython-0.13.1.spkg)
 
 **apply**:
 
``````




---

archive/issue_comments_142205.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nWith #13211, I get\n\n```\napplying /release/merger/patches/trac_12719-5.1beta1.patch\npatching file sage/interfaces/gap.py\nHunk #2 FAILED at 1065\n1 out of 2 hunks FAILED -- saving rejects to file sage/interfaces/gap.py.rej\n```\n\nNote that #13211 isn't certain to be merged (there were some problems before and the fixes haven't been properly tested yet).",
    "created_at": "2012-11-08T14:32:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142205",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:5" align="right">comment:5</div>

With #13211, I get

```
applying /release/merger/patches/trac_12719-5.1beta1.patch
patching file sage/interfaces/gap.py
Hunk #2 FAILED at 1065
1 out of 2 hunks FAILED -- saving rejects to file sage/interfaces/gap.py.rej
```

Note that #13211 isn't certain to be merged (there were some problems before and the fixes haven't been properly tested yet).



---

archive/issue_events_175728.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-08T14:32:24Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "milestone_number": null,
    "milestone_title": "sage-5.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175728"
}
```



---

archive/issue_events_175729.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-08T14:32:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175729"
}
```



---

archive/issue_comments_142206.json:
```json
{
    "body": "Changed dependencies from **#13459** to **#13459, #13211**",
    "created_at": "2012-11-08T14:32:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142206",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#13459** to **#13459, #13211**



---

archive/issue_comments_142207.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI don't think I've ever applied #13211, and I certainly don't have it applied now.  I didn't realize it was a dependency (I've just been pasting in the instructions in the description).  Can we just remove the dependency?  I'm not sure why we even have it.",
    "created_at": "2012-11-08T14:36:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142207",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:6" align="right">comment:6</div>

I don't think I've ever applied #13211, and I certainly don't have it applied now.  I didn't realize it was a dependency (I've just been pasting in the instructions in the description).  Can we just remove the dependency?  I'm not sure why we even have it.



---

archive/issue_comments_142208.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nMy point is that it should be made a dependency and be rebased to #13211.",
    "created_at": "2012-11-08T15:28:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142208",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:7" align="right">comment:7</div>

My point is that it should be made a dependency and be rebased to #13211.



---

archive/issue_comments_142209.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nBut if #13211's future isn't sure yet, should we add that as a dependency?  Granted that the rebase (for either ticket) is a simple 1-2 line fix, but it'd be a shame if this huge work didn't get in because #13211 for some reason didn't pass muster.\n\nYou're the release manager, so you make the calls.  Do you still want me to rebase to depend on that ticket?  Does that hurt our chances of getting into 5.5?",
    "created_at": "2012-11-08T16:03:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142209",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:8" align="right">comment:8</div>

But if #13211's future isn't sure yet, should we add that as a dependency?  Granted that the rebase (for either ticket) is a simple 1-2 line fix, but it'd be a shame if this huge work didn't get in because #13211 for some reason didn't pass muster.

You're the release manager, so you make the calls.  Do you still want me to rebase to depend on that ticket?  Does that hurt our chances of getting into 5.5?



---

archive/issue_comments_142210.json:
```json
{
    "body": "<div id=\"comment:179\" align=\"right\">comment:179</div>\n\nReplying to [@jasongrout](#comment:178):\n> You're the release manager, so you make the calls.  Do you still want me to rebase to depend on that ticket?  Does that hurt our chances of getting into 5.5?\n\nI will test #13211 and then I'll know better whether or not it will be merged. So let's wait for now.\n\nThe best chances for getting this merged is to respond quickly when I ask for it to be rebased.",
    "created_at": "2012-11-08T20:15:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142210",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:179" align="right">comment:179</div>

Replying to [@jasongrout](#comment:178):
> You're the release manager, so you make the calls.  Do you still want me to rebase to depend on that ticket?  Does that hurt our chances of getting into 5.5?

I will test #13211 and then I'll know better whether or not it will be merged. So let's wait for now.

The best chances for getting this merged is to respond quickly when I ask for it to be rebased.



---

archive/issue_comments_142211.json:
```json
{
    "body": "Attachment: **[trac_12719-rebased-to-13211.patch.gz](https://github.com/sagemath/sage/files/ticket12719/trac_12719-rebased-to-13211.patch.gz)**",
    "created_at": "2012-11-08T20:34:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142211",
    "user": "https://github.com/jhpalmieri"
}
```

Attachment: **[trac_12719-rebased-to-13211.patch.gz](https://github.com/sagemath/sage/files/ticket12719/trac_12719-rebased-to-13211.patch.gz)**



---

archive/issue_comments_142212.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nHere's a patch rebased to #13211. Let's keep the old patch, too, just in case.",
    "created_at": "2012-11-08T20:36:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142212",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:0" align="right">comment:0</div>

Here's a patch rebased to #13211. Let's keep the old patch, too, just in case.



---

archive/issue_comments_142213.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -16,7 +16,7 @@\n * [attachment: trac_12719-ipythondir013.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-ipythondir013.patch.gz)\n \n To the sage library:\n-* [attachment: trac_12719-5.1beta1.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-5.1beta1.patch.gz)\n+* [attachment: trac_12719-rebased-to-13211.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-rebased-to-13211.patch.gz) (or [attachment: trac_12719-5.1beta1.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-5.1beta1.patch.gz) if #13211 has not been applied)\n * [attachment: trac_12719-move_to_preparser_rebased.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser_rebased.patch.gz)\n * [attachment: trac_12719_ipython_fixes.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz)\n * [attachment: trac_12719_dedent.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz)\n@@ -32,6 +32,8 @@\n * [attachment: trac_12719-preparse-doctest.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-preparse-doctest.patch.gz)\n * [attachment: trac_12719-gcd-repr.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-gcd-repr.patch.gz)\n \n+So assuming that #13211 has been applied:\n+\n ```\n cd SAGE_ROOT\n \n@@ -42,7 +44,7 @@\n ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz\n ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-test-displayhook.patch.gz\n \n-./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-5.1beta1.patch.gz\n+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-rebased-to-13211.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser_rebased.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz\n``````\n",
    "created_at": "2012-11-08T20:36:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142213",
    "user": "https://github.com/jhpalmieri"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -16,7 +16,7 @@
 * [attachment: trac_12719-ipythondir013.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-ipythondir013.patch.gz)
 
 To the sage library:
-* [attachment: trac_12719-5.1beta1.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-5.1beta1.patch.gz)
+* [attachment: trac_12719-rebased-to-13211.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-rebased-to-13211.patch.gz) (or [attachment: trac_12719-5.1beta1.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-5.1beta1.patch.gz) if #13211 has not been applied)
 * [attachment: trac_12719-move_to_preparser_rebased.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser_rebased.patch.gz)
 * [attachment: trac_12719_ipython_fixes.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz)
 * [attachment: trac_12719_dedent.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz)
@@ -32,6 +32,8 @@
 * [attachment: trac_12719-preparse-doctest.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-preparse-doctest.patch.gz)
 * [attachment: trac_12719-gcd-repr.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-gcd-repr.patch.gz)
 
+So assuming that #13211 has been applied:
+
 ```
 cd SAGE_ROOT
 
@@ -42,7 +44,7 @@
 ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz
 ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-test-displayhook.patch.gz
 
-./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-5.1beta1.patch.gz
+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-rebased-to-13211.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser_rebased.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz
``````




---

archive/issue_events_175730.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-09T09:29:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175730"
}
```



---

archive/issue_events_175731.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-09T09:29:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175731"
}
```



---

archive/issue_comments_142214.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -16,7 +16,7 @@\n * [attachment: trac_12719-ipythondir013.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-ipythondir013.patch.gz)\n \n To the sage library:\n-* [attachment: trac_12719-rebased-to-13211.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-rebased-to-13211.patch.gz) (or [attachment: trac_12719-5.1beta1.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-5.1beta1.patch.gz) if #13211 has not been applied)\n+* [attachment: trac_12719-5.1beta1.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-5.1beta1.patch.gz) (or [attachment: trac_12719-rebased-to-13211.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-rebased-to-13211.patch.gz) if #13211 has been applied)\n * [attachment: trac_12719-move_to_preparser_rebased.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser_rebased.patch.gz)\n * [attachment: trac_12719_ipython_fixes.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz)\n * [attachment: trac_12719_dedent.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz)\n``````\n",
    "created_at": "2012-11-09T09:29:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142214",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -16,7 +16,7 @@
 * [attachment: trac_12719-ipythondir013.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-ipythondir013.patch.gz)
 
 To the sage library:
-* [attachment: trac_12719-rebased-to-13211.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-rebased-to-13211.patch.gz) (or [attachment: trac_12719-5.1beta1.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-5.1beta1.patch.gz) if #13211 has not been applied)
+* [attachment: trac_12719-5.1beta1.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-5.1beta1.patch.gz) (or [attachment: trac_12719-rebased-to-13211.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-rebased-to-13211.patch.gz) if #13211 has been applied)
 * [attachment: trac_12719-move_to_preparser_rebased.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser_rebased.patch.gz)
 * [attachment: trac_12719_ipython_fixes.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz)
 * [attachment: trac_12719_dedent.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz)
``````




---

archive/issue_comments_142215.json:
```json
{
    "body": "Changed dependencies from **#13459, #13211** to **#13459, #9191**",
    "created_at": "2012-11-09T09:29:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142215",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#13459, #13211** to **#13459, #9191**



---

archive/issue_comments_142216.json:
```json
{
    "body": "Attachment: **[12719_run_cython.patch.gz](https://github.com/sagemath/sage/files/ticket12719/12719_run_cython.patch.gz)**",
    "created_at": "2012-11-09T09:31:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142216",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[12719_run_cython.patch.gz](https://github.com/sagemath/sage/files/ticket12719/12719_run_cython.patch.gz)**



---

archive/issue_events_175732.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-09T09:33:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175732"
}
```



---

archive/issue_events_175733.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-09T09:33:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175733"
}
```



---

archive/issue_comments_142217.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\n[attachment: 12719_run_cython.patch](https://github.com/sagemath/sage/files/ticket12719/12719_run_cython.patch.gz) needs review.",
    "created_at": "2012-11-09T09:33:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142217",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:2" align="right">comment:2</div>

[attachment: 12719_run_cython.patch](https://github.com/sagemath/sage/files/ticket12719/12719_run_cython.patch.gz) needs review.



---

archive/issue_comments_142218.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,6 +10,7 @@\n * [attachment: trac_12719-scripts.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz)\n * [attachment: trac_12719_remove_sage_gdb_ipython.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz)\n * [attachment: 12719-test-displayhook.patch](https://github.com/sagemath/sage/files/ticket12719/12719-test-displayhook.patch.gz)\n+* [attachment: 12719_run_cython.patch](https://github.com/sagemath/sage/files/ticket12719/12719_run_cython.patch.gz)\n \n To the root repository:\n * [attachment: trac_12719_ROOT_configuration_files.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz)\n``````\n",
    "created_at": "2012-11-09T09:33:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142218",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,6 +10,7 @@
 * [attachment: trac_12719-scripts.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz)
 * [attachment: trac_12719_remove_sage_gdb_ipython.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz)
 * [attachment: 12719-test-displayhook.patch](https://github.com/sagemath/sage/files/ticket12719/12719-test-displayhook.patch.gz)
+* [attachment: 12719_run_cython.patch](https://github.com/sagemath/sage/files/ticket12719/12719_run_cython.patch.gz)
 
 To the root repository:
 * [attachment: trac_12719_ROOT_configuration_files.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz)
``````




---

archive/issue_comments_142219.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI think this looks okay. I'm building and running doctests one more time to make sure.",
    "created_at": "2012-11-09T17:58:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142219",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:3" align="right">comment:3</div>

I think this looks okay. I'm building and running doctests one more time to make sure.



---

archive/issue_comments_142220.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -33,7 +33,7 @@\n * [attachment: trac_12719-preparse-doctest.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-preparse-doctest.patch.gz)\n * [attachment: trac_12719-gcd-repr.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-gcd-repr.patch.gz)\n \n-So assuming that #13211 has been applied:\n+So (assuming that #13211 has **not** been applied):\n \n ```\n cd SAGE_ROOT\n@@ -44,8 +44,9 @@\n ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz\n ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz\n ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-test-displayhook.patch.gz\n+./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/12719_run_cython.patch.gz\n \n-./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-rebased-to-13211.patch.gz\n+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-5.1beta1.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser_rebased.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz\n``````\n",
    "created_at": "2012-11-09T17:58:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142220",
    "user": "https://github.com/jhpalmieri"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -33,7 +33,7 @@
 * [attachment: trac_12719-preparse-doctest.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-preparse-doctest.patch.gz)
 * [attachment: trac_12719-gcd-repr.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-gcd-repr.patch.gz)
 
-So assuming that #13211 has been applied:
+So (assuming that #13211 has **not** been applied):
 
 ```
 cd SAGE_ROOT
@@ -44,8 +44,9 @@
 ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz
 ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz
 ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-test-displayhook.patch.gz
+./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/12719_run_cython.patch.gz
 
-./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-rebased-to-13211.patch.gz
+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-5.1beta1.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser_rebased.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz
``````




---

archive/issue_events_175734.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2012-11-09T20:15:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175734"
}
```



---

archive/issue_events_175735.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2012-11-09T20:15:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175735"
}
```



---

archive/issue_events_175736.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2012-11-10T20:14:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175736"
}
```



---

archive/issue_events_175737.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2012-11-10T20:14:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175737"
}
```



---

archive/issue_comments_142221.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nAttachment: **[trac_12719-hgignore.patch.gz](https://github.com/sagemath/sage/files/ticket12719/trac_12719-hgignore.patch.gz)**\n\n[attachment: trac_12719-hgignore.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-hgignore.patch.gz) needs review.",
    "created_at": "2012-11-10T20:14:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142221",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:5" align="right">comment:5</div>

Attachment: **[trac_12719-hgignore.patch.gz](https://github.com/sagemath/sage/files/ticket12719/trac_12719-hgignore.patch.gz)**

[attachment: trac_12719-hgignore.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-hgignore.patch.gz) needs review.



---

archive/issue_comments_142222.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -11,6 +11,7 @@\n * [attachment: trac_12719_remove_sage_gdb_ipython.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz)\n * [attachment: 12719-test-displayhook.patch](https://github.com/sagemath/sage/files/ticket12719/12719-test-displayhook.patch.gz)\n * [attachment: 12719_run_cython.patch](https://github.com/sagemath/sage/files/ticket12719/12719_run_cython.patch.gz)\n+* [attachment: trac_12719-hgignore.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-hgignore.patch.gz)\n \n To the root repository:\n * [attachment: trac_12719_ROOT_configuration_files.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz)\n@@ -45,6 +46,7 @@\n ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz\n ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-test-displayhook.patch.gz\n ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/12719_run_cython.patch.gz\n+./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-hgignore.patch.gz\n \n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-5.1beta1.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser_rebased.patch.gz\n``````\n",
    "created_at": "2012-11-10T20:14:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142222",
    "user": "https://github.com/jhpalmieri"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -11,6 +11,7 @@
 * [attachment: trac_12719_remove_sage_gdb_ipython.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz)
 * [attachment: 12719-test-displayhook.patch](https://github.com/sagemath/sage/files/ticket12719/12719-test-displayhook.patch.gz)
 * [attachment: 12719_run_cython.patch](https://github.com/sagemath/sage/files/ticket12719/12719_run_cython.patch.gz)
+* [attachment: trac_12719-hgignore.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-hgignore.patch.gz)
 
 To the root repository:
 * [attachment: trac_12719_ROOT_configuration_files.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz)
@@ -45,6 +46,7 @@
 ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz
 ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-test-displayhook.patch.gz
 ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/12719_run_cython.patch.gz
+./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-hgignore.patch.gz
 
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-5.1beta1.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser_rebased.patch.gz
``````




---

archive/issue_events_175738.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2012-11-10T20:14:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175738"
}
```



---

archive/issue_events_175739.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2012-11-10T20:14:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175739"
}
```



---

archive/issue_comments_142223.json:
```json
{
    "body": "Changed reviewer from **Volker Braun, Mike Hansen, Jason Grout** to **Volker Braun, Mike Hansen, Jason Grout, Jeroen Demeyer**",
    "created_at": "2012-11-11T09:40:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142223",
    "user": "https://github.com/jdemeyer"
}
```

Changed reviewer from **Volker Braun, Mike Hansen, Jason Grout** to **Volker Braun, Mike Hansen, Jason Grout, Jeroen Demeyer**



---

archive/issue_events_175740.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-11T09:40:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175740"
}
```



---

archive/issue_events_175741.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-11T09:40:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175741"
}
```



---

archive/issue_events_175742.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-12T08:00:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175742"
}
```



---

archive/issue_events_175743.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-12T08:00:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175743"
}
```



---

archive/issue_comments_142224.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\n[attachment: trac_12719-scripts.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz) is missing a commit message.\n\n[attachment: 12719-5.4rc1.patch](https://github.com/sagemath/sage/files/ticket12719/12719-5.4rc1.patch.gz) is missing a user name in the patch file.\n\n[attachment: trac_12719-cellmagics013.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-cellmagics013.patch.gz) has a commit message which is all on one line and too long. You should make sure that the lines in commit messages are not too long, but the first line should still be descriptive by itself, since that shows up in `hg log`.\n\npositive review to [attachment: trac_12719-hgignore.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-hgignore.patch.gz)",
    "created_at": "2012-11-12T08:00:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142224",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">comment:8</div>

[attachment: trac_12719-scripts.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz) is missing a commit message.

[attachment: 12719-5.4rc1.patch](https://github.com/sagemath/sage/files/ticket12719/12719-5.4rc1.patch.gz) is missing a user name in the patch file.

[attachment: trac_12719-cellmagics013.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-cellmagics013.patch.gz) has a commit message which is all on one line and too long. You should make sure that the lines in commit messages are not too long, but the first line should still be descriptive by itself, since that shows up in `hg log`.

positive review to [attachment: trac_12719-hgignore.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-hgignore.patch.gz)



---

archive/issue_comments_142225.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nIn `SageInteractiveShell.system_raw`, does `libraries` refer to a global or is that variable simply unused?  Since `false` isn't guaranteed to return exit status 1 (on Solaris, it returns 255, POSIX specifies it must be non-zero), the doctest must be changed to something more portable. I also don't see this function discussed on #975.\n\nSo, I suggest the following patch:\n\n```patch\ndiff --git a/sage/misc/interpreter.py b/sage/misc/interpreter.py\n--- a/sage/misc/interpreter.py\n+++ b/sage/misc/interpreter.py\n@@ -161,26 +161,18 @@ class SageInteractiveShell(TerminalInter\n\n     def system_raw(self, cmd):\n         \"\"\"\n-        Adjust the libraries before calling system commands.  See Trac\n-        #975 for a discussion of this function.\n+        Run a system command.\n\n         EXAMPLES::\n\n             sage: from sage.misc.interpreter import get_test_shell\n             sage: shell = get_test_shell()\n             sage: shell.system_raw('false')\n-            sage: shell.user_ns['_exit_code']\n-            256\n+            sage: status = shell.user_ns['_exit_code']\n+            sage: os.WIFEXITED(status) and os.WEXITSTATUS(status) != 0\n+            True\n         \"\"\"\n-        sage_commands = os.listdir(os.environ['SAGE_ROOT']+\"/local/bin/\")\n-        DARWIN_SYSTEM = os.uname()[0]=='Darwin'\n-        if cmd in sage_commands:\n-            return super(SageInteractiveShell, self).system_raw(cmd)\n-        else:\n-            libraries = 'LD_LIBRARY_PATH=$$SAGE_ORIG_LD_LIBRARY_PATH;'\n-            if DARWIN_SYSTEM:\n-                libraries += 'DYLD_LIBRARY_PATH=$$SAGE_ORIG_DYLD_LIBRARY_PATH;'\n-            return super(SageInteractiveShell, self).system_raw(cmd)\n+        return super(SageInteractiveShell, self).system_raw(cmd)\n\n     def ask_exit(self):\n         \"\"\"\n```",
    "created_at": "2012-11-13T08:17:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142225",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:9" align="right">comment:9</div>

In `SageInteractiveShell.system_raw`, does `libraries` refer to a global or is that variable simply unused?  Since `false` isn't guaranteed to return exit status 1 (on Solaris, it returns 255, POSIX specifies it must be non-zero), the doctest must be changed to something more portable. I also don't see this function discussed on #975.

So, I suggest the following patch:

```patch
diff --git a/sage/misc/interpreter.py b/sage/misc/interpreter.py
--- a/sage/misc/interpreter.py
+++ b/sage/misc/interpreter.py
@@ -161,26 +161,18 @@ class SageInteractiveShell(TerminalInter

     def system_raw(self, cmd):
         """
-        Adjust the libraries before calling system commands.  See Trac
-        #975 for a discussion of this function.
+        Run a system command.

         EXAMPLES::

             sage: from sage.misc.interpreter import get_test_shell
             sage: shell = get_test_shell()
             sage: shell.system_raw('false')
-            sage: shell.user_ns['_exit_code']
-            256
+            sage: status = shell.user_ns['_exit_code']
+            sage: os.WIFEXITED(status) and os.WEXITSTATUS(status) != 0
+            True
         """
-        sage_commands = os.listdir(os.environ['SAGE_ROOT']+"/local/bin/")
-        DARWIN_SYSTEM = os.uname()[0]=='Darwin'
-        if cmd in sage_commands:
-            return super(SageInteractiveShell, self).system_raw(cmd)
-        else:
-            libraries = 'LD_LIBRARY_PATH=$$SAGE_ORIG_LD_LIBRARY_PATH;'
-            if DARWIN_SYSTEM:
-                libraries += 'DYLD_LIBRARY_PATH=$$SAGE_ORIG_DYLD_LIBRARY_PATH;'
-            return super(SageInteractiveShell, self).system_raw(cmd)
+        return super(SageInteractiveShell, self).system_raw(cmd)

     def ask_exit(self):
         """
```



---

archive/issue_comments_142226.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -33,6 +33,7 @@\n * [attachment: trac_12719-pager.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-pager.patch.gz)\n * [attachment: trac_12719-preparse-doctest.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-preparse-doctest.patch.gz)\n * [attachment: trac_12719-gcd-repr.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-gcd-repr.patch.gz)\n+* [attachment: 12719-system.patch](https://github.com/sagemath/sage/files/ticket12719/12719-system.patch.gz)\n \n So (assuming that #13211 has **not** been applied):\n \n@@ -63,6 +64,7 @@\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-pager.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-preparse-doctest.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-gcd-repr.patch.gz\n+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-system.patch.gz\n \n ./sage -i http://sage.math.washington.edu/home/jason/ipython-0.13.1.spkg\n \n``````\n",
    "created_at": "2012-11-13T19:48:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142226",
    "user": "https://github.com/jasongrout"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -33,6 +33,7 @@
 * [attachment: trac_12719-pager.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-pager.patch.gz)
 * [attachment: trac_12719-preparse-doctest.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-preparse-doctest.patch.gz)
 * [attachment: trac_12719-gcd-repr.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-gcd-repr.patch.gz)
+* [attachment: 12719-system.patch](https://github.com/sagemath/sage/files/ticket12719/12719-system.patch.gz)
 
 So (assuming that #13211 has **not** been applied):
 
@@ -63,6 +64,7 @@
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-pager.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-preparse-doctest.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-gcd-repr.patch.gz
+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-system.patch.gz
 
 ./sage -i http://sage.math.washington.edu/home/jason/ipython-0.13.1.spkg
 
``````




---

archive/issue_comments_142227.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nI've uploaded a patch to the system command.  The point is that we need to reset the original system libraries if we run a non-sage command.",
    "created_at": "2012-11-13T19:48:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142227",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:0" align="right">comment:0</div>

I've uploaded a patch to the system command.  The point is that we need to reset the original system libraries if we run a non-sage command.



---

archive/issue_comments_142228.json:
```json
{
    "body": "Apply to sage repository",
    "created_at": "2012-11-13T19:57:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142228",
    "user": "https://github.com/jasongrout"
}
```

Apply to sage repository



---

archive/issue_comments_142229.json:
```json
{
    "body": "Attachment: **[trac_12719-cellmagics013.patch.gz](https://github.com/sagemath/sage/files/ticket12719/trac_12719-cellmagics013.patch.gz)**\n\nAttachment: **[trac_12719-scripts.patch.gz](https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz)**\n\nrebased to 5.4rc1",
    "created_at": "2012-11-13T19:57:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142229",
    "user": "https://github.com/jasongrout"
}
```

Attachment: **[trac_12719-cellmagics013.patch.gz](https://github.com/sagemath/sage/files/ticket12719/trac_12719-cellmagics013.patch.gz)**

Attachment: **[trac_12719-scripts.patch.gz](https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz)**

rebased to 5.4rc1



---

archive/issue_comments_142230.json:
```json
{
    "body": "Attachment: **[12719-5.4rc1.patch.gz](https://github.com/sagemath/sage/files/ticket12719/12719-5.4rc1.patch.gz)**",
    "created_at": "2012-11-13T19:58:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142230",
    "user": "https://github.com/jasongrout"
}
```

Attachment: **[12719-5.4rc1.patch.gz](https://github.com/sagemath/sage/files/ticket12719/12719-5.4rc1.patch.gz)**



---

archive/issue_events_175744.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2012-11-13T20:00:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175744"
}
```



---

archive/issue_events_175745.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2012-11-13T20:00:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175745"
}
```



---

archive/issue_comments_142231.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nOkay, I think I've taken care of the outstanding issues with the patches.",
    "created_at": "2012-11-13T20:00:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142231",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:1" align="right">comment:1</div>

Okay, I think I've taken care of the outstanding issues with the patches.



---

archive/issue_comments_142232.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI updated the system patch to also include a doctest checking to see if a system command is running with the Sage LD_LIBRARY_PATH.",
    "created_at": "2012-11-13T20:20:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142232",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:2" align="right">comment:2</div>

I updated the system patch to also include a doctest checking to see if a system command is running with the Sage LD_LIBRARY_PATH.



---

archive/issue_comments_142233.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nYou should also doctest `system_raw` working succesfully.\n\nI think you can replace\n\n```\nos.file.isfile(FILE)\n```\nby\n\n```\nos.access(FILE, os.X_OK):\n```\nsince you want to check for an *executable* file.\n\nAlso, I assume that \"cmd\" uses shell syntax? Then you're doing it wrong. Correct shell syntax is\n\n```\nLD_LIBRARY_PATH=\"$SAGE_ORIG_LD_LIBRARY_PATH\"; export LD_LIBRARY_PATH\n```",
    "created_at": "2012-11-13T20:42:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142233",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:3" align="right">comment:3</div>

You should also doctest `system_raw` working succesfully.

I think you can replace

```
os.file.isfile(FILE)
```
by

```
os.access(FILE, os.X_OK):
```
since you want to check for an *executable* file.

Also, I assume that "cmd" uses shell syntax? Then you're doing it wrong. Correct shell syntax is

```
LD_LIBRARY_PATH="$SAGE_ORIG_LD_LIBRARY_PATH"; export LD_LIBRARY_PATH
```



---

archive/issue_events_175746.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-13T20:42:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175746"
}
```



---

archive/issue_events_175747.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-13T20:42:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175747"
}
```



---

archive/issue_comments_142234.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI'm not an expert on bash syntax (I assume this is using bash), but perhaps some (or all?) of these would work:\n\n```sh\nLD_LIBRARY_PATH=\"$SAGE_ORIG_LD_LIBRARY_PATH\"; export LD_LIBRARY_PATH; ...\nexport LD_LIBRARY_PATH=\"$SAGE_ORIG_LD_LIBRARY_PATH\"; ...\nenv LD_LIBRARY_PATH=\"$SAGE_ORIG_LD_LIBRARY_PATH\"  ...   # note no semicolon\nLD_LIBRARY_PATH=\"$SAGE_ORIG_LD_LIBRARY_PATH\"  ...       # ??\n```",
    "created_at": "2012-11-13T21:03:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142234",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:5" align="right">comment:5</div>

I'm not an expert on bash syntax (I assume this is using bash), but perhaps some (or all?) of these would work:

```sh
LD_LIBRARY_PATH="$SAGE_ORIG_LD_LIBRARY_PATH"; export LD_LIBRARY_PATH; ...
export LD_LIBRARY_PATH="$SAGE_ORIG_LD_LIBRARY_PATH"; ...
env LD_LIBRARY_PATH="$SAGE_ORIG_LD_LIBRARY_PATH"  ...   # note no semicolon
LD_LIBRARY_PATH="$SAGE_ORIG_LD_LIBRARY_PATH"  ...       # ??
```



---

archive/issue_comments_142235.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI don't know whether we can assume bash, I would go for Posix `/bin/sh` compatible.\n\nFor example\n\n```\nexport LD_LIBRARY_PATH=\"$SAGE_ORIG_LD_LIBRARY_PATH\";\n```\nis bash-specific and I'm not sure about\n\n```\nLD_LIBRARY_PATH=\"$SAGE_ORIG_LD_LIBRARY_PATH\"  ...\n```",
    "created_at": "2012-11-13T21:12:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142235",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:6" align="right">comment:6</div>

I don't know whether we can assume bash, I would go for Posix `/bin/sh` compatible.

For example

```
export LD_LIBRARY_PATH="$SAGE_ORIG_LD_LIBRARY_PATH";
```
is bash-specific and I'm not sure about

```
LD_LIBRARY_PATH="$SAGE_ORIG_LD_LIBRARY_PATH"  ...
```



---

archive/issue_events_175748.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2012-11-13T21:24:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175748"
}
```



---

archive/issue_events_175749.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2012-11-13T21:24:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175749"
}
```



---

archive/issue_comments_142236.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI hope this redo is good!  Thanks for the tips.",
    "created_at": "2012-11-13T21:24:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142236",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:7" align="right">comment:7</div>

I hope this redo is good!  Thanks for the tips.



---

archive/issue_events_175750.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-13T21:26:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175750"
}
```



---

archive/issue_events_175751.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-13T21:26:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175751"
}
```



---

archive/issue_comments_142237.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nYou should replace $$ by $.",
    "created_at": "2012-11-13T21:26:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142237",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">comment:8</div>

You should replace $$ by $.



---

archive/issue_comments_142238.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nAnd please also doctest a non-Sage command working successfully. For example\n\n```\nsystem_raw(\"true\")\n```",
    "created_at": "2012-11-13T21:27:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142238",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:9" align="right">comment:9</div>

And please also doctest a non-Sage command working successfully. For example

```
system_raw("true")
```



---

archive/issue_comments_142239.json:
```json
{
    "body": "Attachment: **[12719-system.patch.gz](https://github.com/sagemath/sage/files/ticket12719/12719-system.patch.gz)**\n\napply to sage repository",
    "created_at": "2012-11-13T21:36:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142239",
    "user": "https://github.com/jasongrout"
}
```

Attachment: **[12719-system.patch.gz](https://github.com/sagemath/sage/files/ticket12719/12719-system.patch.gz)**

apply to sage repository



---

archive/issue_events_175752.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2012-11-13T21:36:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175752"
}
```



---

archive/issue_events_175753.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2012-11-13T21:36:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175753"
}
```



---

archive/issue_comments_142240.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nAll of the patches apply cleanly (on top of 5.5.beta0 + #9191), and the new [attachment: 12719-system.patch](https://github.com/sagemath/sage/files/ticket12719/12719-system.patch.gz) looks okay to me. Jeroen, what do you think?\n\nI have one mild complaint: if I do\n\n```\nsage: note[TAB]\n```\nit doesn't complete to \"notebook\" anymore, saying that \"%notebook\" is also a valid completion. Would it be possible, here or on a followup ticket, to rename the \"%notebook\" magic command to \"%ipython_notebook\" or something similar?",
    "created_at": "2012-11-14T20:49:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142240",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:1" align="right">comment:1</div>

All of the patches apply cleanly (on top of 5.5.beta0 + #9191), and the new [attachment: 12719-system.patch](https://github.com/sagemath/sage/files/ticket12719/12719-system.patch.gz) looks okay to me. Jeroen, what do you think?

I have one mild complaint: if I do

```
sage: note[TAB]
```
it doesn't complete to "notebook" anymore, saying that "%notebook" is also a valid completion. Would it be possible, here or on a followup ticket, to rename the "%notebook" magic command to "%ipython_notebook" or something similar?



---

archive/issue_events_175754.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-14T20:55:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175754"
}
```



---

archive/issue_events_175755.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-14T20:55:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175755"
}
```



---

archive/issue_comments_142241.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nLooks fine. As for the TAB-completion: a different ticket please.",
    "created_at": "2012-11-14T20:55:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142241",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:2" align="right">comment:2</div>

Looks fine. As for the TAB-completion: a different ticket please.



---

archive/issue_events_175756.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-15T08:46:59Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "milestone_number": null,
    "milestone_title": "sage-5.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175756"
}
```



---

archive/issue_events_175757.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-15T08:46:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175757"
}
```



---

archive/issue_comments_142242.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nUpgrading from sage-4.5 fails with a trial version of sage-5.5.beta2 and this is the only ticket I can think of that could cause this problem. The error shows up in `Twisted` (part of `sagenb` now):\n\n```\nInstalled /release/buildbot/sage/sage-1/sage_upgrade_4.5/build/sage-5.5.beta2/local/lib/python2.7/site-packages/Twisted-12.1.0-py2.7-linux-x86_64.egg\nProcessing dependencies for Twisted==12.1.0\nSearching for zope.interface\n\nLink to http://pypi.python.org/simple/zope.interface/ ***BLOCKED*** by --allow-hosts\n\nCouldn't find index page for 'zope.interface' (maybe misspelled?)\nScanning index of all packages (this may take a while)\n\nLink to http://pypi.python.org/simple/ ***BLOCKED*** by --allow-hosts\n\nNo local packages or download links found for zope.interface\nerror: Could not find suitable distribution for Requirement.parse('zope.interface')\nError installing Twisted-12.1.0.tar.bz2 !\n```",
    "created_at": "2012-11-16T12:16:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142242",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:4" align="right">comment:4</div>

Upgrading from sage-4.5 fails with a trial version of sage-5.5.beta2 and this is the only ticket I can think of that could cause this problem. The error shows up in `Twisted` (part of `sagenb` now):

```
Installed /release/buildbot/sage/sage-1/sage_upgrade_4.5/build/sage-5.5.beta2/local/lib/python2.7/site-packages/Twisted-12.1.0-py2.7-linux-x86_64.egg
Processing dependencies for Twisted==12.1.0
Searching for zope.interface

Link to http://pypi.python.org/simple/zope.interface/ ***BLOCKED*** by --allow-hosts

Couldn't find index page for 'zope.interface' (maybe misspelled?)
Scanning index of all packages (this may take a while)

Link to http://pypi.python.org/simple/ ***BLOCKED*** by --allow-hosts

No local packages or download links found for zope.interface
error: Could not find suitable distribution for Requirement.parse('zope.interface')
Error installing Twisted-12.1.0.tar.bz2 !
```



---

archive/issue_comments_142243.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nWhether or not IPython causes the zope.interface problem, I won't have time anyway to test it...",
    "created_at": "2012-11-16T12:59:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142243",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:5" align="right">comment:5</div>

Whether or not IPython causes the zope.interface problem, I won't have time anyway to test it...



---

archive/issue_events_175758.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-16T12:59:19Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "milestone_number": null,
    "milestone_title": "sage-5.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175758"
}
```



---

archive/issue_events_175759.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-16T12:59:19Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "milestone_number": null,
    "milestone_title": "sage-5.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175759"
}
```



---

archive/issue_comments_142244.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nThis seems like it has to be a sagenb problem (that we aren't requiring zope.interface, and thus packaging zope.interface, in our sagenb prereqs).\n\nUpgrading from sage 4.5?  I'm almost sure that it's the sagenb upgrade at #13121, not this ticket.",
    "created_at": "2012-11-16T14:43:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142244",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:6" align="right">comment:6</div>

This seems like it has to be a sagenb problem (that we aren't requiring zope.interface, and thus packaging zope.interface, in our sagenb prereqs).

Upgrading from sage 4.5?  I'm almost sure that it's the sagenb upgrade at #13121, not this ticket.



---

archive/issue_comments_142245.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nOkay, here's what makes sense: the old IPython required zope.interface, so it was always installed when we installed the new notebook, so we never noticed that we needed it for the sage notebook.  The new IPython no longer requires zope.interface, so when the notebook at #13121 checks for it, it isn't installed so sagenb tries to install it.\n\nThe correct fix is to make sagenb require and package zope.interface, like it should have before now, not to change this ticket.",
    "created_at": "2012-11-16T14:52:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142245",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:7" align="right">comment:7</div>

Okay, here's what makes sense: the old IPython required zope.interface, so it was always installed when we installed the new notebook, so we never noticed that we needed it for the sage notebook.  The new IPython no longer requires zope.interface, so when the notebook at #13121 checks for it, it isn't installed so sagenb tries to install it.

The correct fix is to make sagenb require and package zope.interface, like it should have before now, not to change this ticket.



---

archive/issue_comments_142246.json:
```json
{
    "body": "Changed dependencies from **#13459, #9191** to **#13459, #9191, #13717**",
    "created_at": "2012-11-16T16:09:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142246",
    "user": "https://github.com/jasongrout"
}
```

Changed dependencies from **#13459, #9191** to **#13459, #9191, #13717**



---

archive/issue_comments_142247.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI uploaded a new sagenb spkg at #13717",
    "created_at": "2012-11-16T16:09:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142247",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:8" align="right">comment:8</div>

I uploaded a new sagenb spkg at #13717



---

archive/issue_events_175760.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-16T19:21:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175760"
}
```



---

archive/issue_events_175761.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-16T19:21:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175761"
}
```



---

archive/issue_comments_142248.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nAnother upgrade issue:\n\n```\nsage_root-5.5.beta2\nMachine:\nDarwin bsd.math.washington.edu 10.8.0 Darwin Kernel Version 10.8.0: Tue Jun  7 16:32:41 PDT 2011; root:xnu-1504.15.3~1/RELEASE_X86_64 x86_64\nDeleting directories from past builds of previous/current versions of sage_root-5.5.beta2\nExtracting package /Users/buildbot/build/sage/bsd-1/bsd_upgrade_4.6.2/build/sage-5.5.beta2/spkg/standard/sage_root-5.5.beta2.spkg ...\n-rw-r--r--  1 buildbot  staff  323619 Nov 16 04:38 /Users/buildbot/build/sage/bsd-1/bsd_upgrade_4.6.2/build/sage-5.5.beta2/spkg/standard/sage_root-5.5.beta2.spkg\nFinished extraction\n****************************************************\nHost system\nuname -a:\nDarwin bsd.math.washington.edu 10.8.0 Darwin Kernel Version 10.8.0: Tue Jun  7 16:32:41 PDT 2011; root:xnu-1504.15.3~1/RELEASE_X86_64 x86_64\n****************************************************\n****************************************************\nCC Version\ngcc -v\nUsing built-in specs.\nCOLLECT_GCC=gcc\nCOLLECT_LTO_WRAPPER=/Users/buildbot/build/sage/bsd-1/bsd_upgrade_4.6.2/build/sage-5.5.beta2/local/libexec/gcc/x86_64-apple-darwin10.8.0/4.6.3/lto-wrapper\nTarget: x86_64-apple-darwin10.8.0\nConfigured with: ../src/configure --prefix=/Users/buildbot/build/sage/bsd-1/bsd_upgrade_4.6.2/build/sage-5.5.beta2/local --with-local-prefix=/Users/buildbot/build/sage/bsd-1/bsd_upgrade_4.6.2/build/sage-5.5.beta2/local --with-gmp=/Users/buildbot/build/sage/bsd-1/bsd_upgrade_4.6.2/build/sage-5.5.beta2/local --with-mpfr=/Users/buildbot/build/sage/bsd-1/bsd_upgrade_4.6.2/build/sage-5.5.beta2/local --with-mpc=/Users/buildbot/build/sage/bsd-1/bsd_upgrade_4.6.2/build/sage-5.5.beta2/local --with-system-zlib --disable-multilib  \nThread model: posix\ngcc version 4.6.3 (GCC) \n****************************************************\ncp: ipython: No such file or directory\nRoot repo: Error copying files from Sage root repo to /Users/buildbot/build/sage/bsd-1/bsd_upgrade_4.6.2/build/sage-5.5.beta2\n```\n\nThe file `spkg/root-spkg-install` should be fixed.",
    "created_at": "2012-11-16T19:21:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142248",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:9" align="right">comment:9</div>

Another upgrade issue:

```
sage_root-5.5.beta2
Machine:
Darwin bsd.math.washington.edu 10.8.0 Darwin Kernel Version 10.8.0: Tue Jun  7 16:32:41 PDT 2011; root:xnu-1504.15.3~1/RELEASE_X86_64 x86_64
Deleting directories from past builds of previous/current versions of sage_root-5.5.beta2
Extracting package /Users/buildbot/build/sage/bsd-1/bsd_upgrade_4.6.2/build/sage-5.5.beta2/spkg/standard/sage_root-5.5.beta2.spkg ...
-rw-r--r--  1 buildbot  staff  323619 Nov 16 04:38 /Users/buildbot/build/sage/bsd-1/bsd_upgrade_4.6.2/build/sage-5.5.beta2/spkg/standard/sage_root-5.5.beta2.spkg
Finished extraction
****************************************************
Host system
uname -a:
Darwin bsd.math.washington.edu 10.8.0 Darwin Kernel Version 10.8.0: Tue Jun  7 16:32:41 PDT 2011; root:xnu-1504.15.3~1/RELEASE_X86_64 x86_64
****************************************************
****************************************************
CC Version
gcc -v
Using built-in specs.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=/Users/buildbot/build/sage/bsd-1/bsd_upgrade_4.6.2/build/sage-5.5.beta2/local/libexec/gcc/x86_64-apple-darwin10.8.0/4.6.3/lto-wrapper
Target: x86_64-apple-darwin10.8.0
Configured with: ../src/configure --prefix=/Users/buildbot/build/sage/bsd-1/bsd_upgrade_4.6.2/build/sage-5.5.beta2/local --with-local-prefix=/Users/buildbot/build/sage/bsd-1/bsd_upgrade_4.6.2/build/sage-5.5.beta2/local --with-gmp=/Users/buildbot/build/sage/bsd-1/bsd_upgrade_4.6.2/build/sage-5.5.beta2/local --with-mpfr=/Users/buildbot/build/sage/bsd-1/bsd_upgrade_4.6.2/build/sage-5.5.beta2/local --with-mpc=/Users/buildbot/build/sage/bsd-1/bsd_upgrade_4.6.2/build/sage-5.5.beta2/local --with-system-zlib --disable-multilib  
Thread model: posix
gcc version 4.6.3 (GCC) 
****************************************************
cp: ipython: No such file or directory
Root repo: Error copying files from Sage root repo to /Users/buildbot/build/sage/bsd-1/bsd_upgrade_4.6.2/build/sage-5.5.beta2
```

The file `spkg/root-spkg-install` should be fixed.



---

archive/issue_comments_142249.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nJason: that makes sense.",
    "created_at": "2012-11-16T19:22:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142249",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:0" align="right">comment:0</div>

Jason: that makes sense.



---

archive/issue_comments_142250.json:
```json
{
    "body": "Attachment: **[trac_12719-root-spkg-install.patch.gz](https://github.com/sagemath/sage/files/ticket12719/trac_12719-root-spkg-install.patch.gz)**\n\nroot repo",
    "created_at": "2012-11-16T19:27:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142250",
    "user": "https://github.com/jhpalmieri"
}
```

Attachment: **[trac_12719-root-spkg-install.patch.gz](https://github.com/sagemath/sage/files/ticket12719/trac_12719-root-spkg-install.patch.gz)**

root repo



---

archive/issue_comments_142251.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -16,6 +16,7 @@\n To the root repository:\n * [attachment: trac_12719_ROOT_configuration_files.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz)\n * [attachment: trac_12719-ipythondir013.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-ipythondir013.patch.gz)\n+* [attachment: trac_12719-root-spkg-install.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-root-spkg-install.patch.gz)\n \n To the sage library:\n * [attachment: trac_12719-5.1beta1.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-5.1beta1.patch.gz) (or [attachment: trac_12719-rebased-to-13211.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-rebased-to-13211.patch.gz) if #13211 has been applied)\n@@ -42,6 +43,7 @@\n \n ./sage --hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz\n ./sage --hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-ipythondir013.patch.gz\n+./sage --hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-root-spkg-install.patch.gz\n \n ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz\n ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz\n``````\n",
    "created_at": "2012-11-16T19:29:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142251",
    "user": "https://github.com/jhpalmieri"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -16,6 +16,7 @@
 To the root repository:
 * [attachment: trac_12719_ROOT_configuration_files.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz)
 * [attachment: trac_12719-ipythondir013.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-ipythondir013.patch.gz)
+* [attachment: trac_12719-root-spkg-install.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-root-spkg-install.patch.gz)
 
 To the sage library:
 * [attachment: trac_12719-5.1beta1.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-5.1beta1.patch.gz) (or [attachment: trac_12719-rebased-to-13211.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-rebased-to-13211.patch.gz) if #13211 has been applied)
@@ -42,6 +43,7 @@
 
 ./sage --hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz
 ./sage --hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-ipythondir013.patch.gz
+./sage --hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-root-spkg-install.patch.gz
 
 ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz
 ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz
``````




---

archive/issue_comments_142252.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nI think this patch will fix the problem.",
    "created_at": "2012-11-16T19:29:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142252",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:1" align="right">comment:1</div>

I think this patch will fix the problem.



---

archive/issue_events_175762.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2012-11-16T19:29:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175762"
}
```



---

archive/issue_events_175763.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2012-11-16T19:29:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175763"
}
```



---

archive/issue_comments_142253.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nHere's another problem highlighted by https://github.com/sagemath/sagecell/issues/378: \n\n```\n\"\"\"string\n\"\"\"; type(1)\n```\ndoes no preparsing on the second line because IPython doesn't do transformations for the second line (since it's inside quotes).  IPython admits that this is a hackish and fragile strategy, and they are working on the issue.  For example, they are implementing [AST transformers](https://github.com/ipython/ipython/pull/2301) and [stateful line transformers](https://github.com/ipython/ipython/pull/2447).  However, for now, we should run at least our preparser on every line of input, since we *do* keep track of state, so we need to be preparsing that second line.\n\nI have a patch coming up shortly.",
    "created_at": "2012-11-29T04:35:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142253",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:2" align="right">comment:2</div>

Here's another problem highlighted by https://github.com/sagemath/sagecell/issues/378: 

```
"""string
"""; type(1)
```
does no preparsing on the second line because IPython doesn't do transformations for the second line (since it's inside quotes).  IPython admits that this is a hackish and fragile strategy, and they are working on the issue.  For example, they are implementing [AST transformers](https://github.com/ipython/ipython/pull/2301) and [stateful line transformers](https://github.com/ipython/ipython/pull/2447).  However, for now, we should run at least our preparser on every line of input, since we *do* keep track of state, so we need to be preparsing that second line.

I have a patch coming up shortly.



---

archive/issue_comments_142254.json:
```json
{
    "body": "Attachment: **[trac-12719-always-preparse.patch.gz](https://github.com/sagemath/sage/files/ticket12719/trac-12719-always-preparse.patch.gz)**\n\napply to sage library",
    "created_at": "2012-11-29T06:28:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142254",
    "user": "https://github.com/jasongrout"
}
```

Attachment: **[trac-12719-always-preparse.patch.gz](https://github.com/sagemath/sage/files/ticket12719/trac-12719-always-preparse.patch.gz)**

apply to sage library



---

archive/issue_comments_142255.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -35,6 +35,7 @@\n * [attachment: trac_12719-preparse-doctest.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-preparse-doctest.patch.gz)\n * [attachment: trac_12719-gcd-repr.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-gcd-repr.patch.gz)\n * [attachment: 12719-system.patch](https://github.com/sagemath/sage/files/ticket12719/12719-system.patch.gz)\n+* [attachment: trac-12719-always-preparse.patch](https://github.com/sagemath/sage/files/ticket12719/trac-12719-always-preparse.patch.gz)\n \n So (assuming that #13211 has **not** been applied):\n \n@@ -67,6 +68,7 @@\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-preparse-doctest.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-gcd-repr.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-system.patch.gz\n+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac-12719-always-preparse.patch.gz\n \n ./sage -i http://sage.math.washington.edu/home/jason/ipython-0.13.1.spkg\n \n``````\n",
    "created_at": "2012-11-29T06:29:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142255",
    "user": "https://github.com/jasongrout"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -35,6 +35,7 @@
 * [attachment: trac_12719-preparse-doctest.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-preparse-doctest.patch.gz)
 * [attachment: trac_12719-gcd-repr.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-gcd-repr.patch.gz)
 * [attachment: 12719-system.patch](https://github.com/sagemath/sage/files/ticket12719/12719-system.patch.gz)
+* [attachment: trac-12719-always-preparse.patch](https://github.com/sagemath/sage/files/ticket12719/trac-12719-always-preparse.patch.gz)
 
 So (assuming that #13211 has **not** been applied):
 
@@ -67,6 +68,7 @@
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-preparse-doctest.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-gcd-repr.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-system.patch.gz
+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac-12719-always-preparse.patch.gz
 
 ./sage -i http://sage.math.washington.edu/home/jason/ipython-0.13.1.spkg
 
``````




---

archive/issue_comments_142256.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nDoes this most recent patch need a doctest?",
    "created_at": "2012-11-29T19:14:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142256",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:4" align="right">comment:4</div>

Does this most recent patch need a doctest?



---

archive/issue_comments_142257.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nBy the way, this passes all doctests. I also upgraded Sage 5.2 successfully from a source distribution prepared using the patches here.",
    "created_at": "2012-11-30T05:48:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142257",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:5" align="right">comment:5</div>

By the way, this passes all doctests. I also upgraded Sage 5.2 successfully from a source distribution prepared using the patches here.



---

archive/issue_events_175764.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-12T15:14:55Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "milestone_number": null,
    "milestone_title": "sage-5.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175764"
}
```



---

archive/issue_events_175765.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-12T15:14:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175765"
}
```



---

archive/issue_comments_142258.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -19,7 +19,7 @@\n * [attachment: trac_12719-root-spkg-install.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-root-spkg-install.patch.gz)\n \n To the sage library:\n-* [attachment: trac_12719-5.1beta1.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-5.1beta1.patch.gz) (or [attachment: trac_12719-rebased-to-13211.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-rebased-to-13211.patch.gz) if #13211 has been applied)\n+* [attachment: trac_12719-rebased-to-13211.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-rebased-to-13211.patch.gz)\n * [attachment: trac_12719-move_to_preparser_rebased.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser_rebased.patch.gz)\n * [attachment: trac_12719_ipython_fixes.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz)\n * [attachment: trac_12719_dedent.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz)\n@@ -37,7 +37,7 @@\n * [attachment: 12719-system.patch](https://github.com/sagemath/sage/files/ticket12719/12719-system.patch.gz)\n * [attachment: trac-12719-always-preparse.patch](https://github.com/sagemath/sage/files/ticket12719/trac-12719-always-preparse.patch.gz)\n \n-So (assuming that #13211 has **not** been applied):\n+So:\n \n ```\n cd SAGE_ROOT\n@@ -52,7 +52,7 @@\n ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/12719_run_cython.patch.gz\n ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-hgignore.patch.gz\n \n-./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-5.1beta1.patch.gz\n+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-rebased-to-13211.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser_rebased.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz\n``````\n",
    "created_at": "2013-01-12T15:14:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142258",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -19,7 +19,7 @@
 * [attachment: trac_12719-root-spkg-install.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-root-spkg-install.patch.gz)
 
 To the sage library:
-* [attachment: trac_12719-5.1beta1.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-5.1beta1.patch.gz) (or [attachment: trac_12719-rebased-to-13211.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-rebased-to-13211.patch.gz) if #13211 has been applied)
+* [attachment: trac_12719-rebased-to-13211.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-rebased-to-13211.patch.gz)
 * [attachment: trac_12719-move_to_preparser_rebased.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser_rebased.patch.gz)
 * [attachment: trac_12719_ipython_fixes.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz)
 * [attachment: trac_12719_dedent.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz)
@@ -37,7 +37,7 @@
 * [attachment: 12719-system.patch](https://github.com/sagemath/sage/files/ticket12719/12719-system.patch.gz)
 * [attachment: trac-12719-always-preparse.patch](https://github.com/sagemath/sage/files/ticket12719/trac-12719-always-preparse.patch.gz)
 
-So (assuming that #13211 has **not** been applied):
+So:
 
 ```
 cd SAGE_ROOT
@@ -52,7 +52,7 @@
 ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/12719_run_cython.patch.gz
 ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-hgignore.patch.gz
 
-./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-5.1beta1.patch.gz
+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-rebased-to-13211.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser_rebased.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz
``````




---

archive/issue_comments_142259.json:
```json
{
    "body": "Attachment: **[trac_12719-scripts-vb.patch.gz](https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts-vb.patch.gz)**\n\nUpdated patch",
    "created_at": "2013-01-13T14:42:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142259",
    "user": "https://github.com/vbraun"
}
```

Attachment: **[trac_12719-scripts-vb.patch.gz](https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts-vb.patch.gz)**

Updated patch



---

archive/issue_comments_142260.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI've rediffed trac_12719-scripts-vb.patch to account for pure whitespace changes in #13899 (merged in sage-5.6.beta3)",
    "created_at": "2013-01-13T14:45:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142260",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:7" align="right">comment:7</div>

I've rediffed trac_12719-scripts-vb.patch to account for pure whitespace changes in #13899 (merged in sage-5.6.beta3)



---

archive/issue_comments_142261.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,7 +7,7 @@\n **apply**:\n \n To the scripts repository: \n-* [attachment: trac_12719-scripts.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz)\n+* [attachment: trac_12719-scripts-vb.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts-vb.patch.gz)\n * [attachment: trac_12719_remove_sage_gdb_ipython.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz)\n * [attachment: 12719-test-displayhook.patch](https://github.com/sagemath/sage/files/ticket12719/12719-test-displayhook.patch.gz)\n * [attachment: 12719_run_cython.patch](https://github.com/sagemath/sage/files/ticket12719/12719_run_cython.patch.gz)\n``````\n",
    "created_at": "2013-01-13T14:45:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142261",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,7 +7,7 @@
 **apply**:
 
 To the scripts repository: 
-* [attachment: trac_12719-scripts.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz)
+* [attachment: trac_12719-scripts-vb.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts-vb.patch.gz)
 * [attachment: trac_12719_remove_sage_gdb_ipython.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz)
 * [attachment: 12719-test-displayhook.patch](https://github.com/sagemath/sage/files/ticket12719/12719-test-displayhook.patch.gz)
 * [attachment: 12719_run_cython.patch](https://github.com/sagemath/sage/files/ticket12719/12719_run_cython.patch.gz)
``````




---

archive/issue_comments_142262.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -19,7 +19,7 @@\n * [attachment: trac_12719-root-spkg-install.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-root-spkg-install.patch.gz)\n \n To the sage library:\n-* [attachment: trac_12719-rebased-to-13211.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-rebased-to-13211.patch.gz)\n+* [attachment: trac_12719-rebased-to-13211-vb.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-rebased-to-13211-vb.patch.gz)\n * [attachment: trac_12719-move_to_preparser_rebased.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser_rebased.patch.gz)\n * [attachment: trac_12719_ipython_fixes.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz)\n * [attachment: trac_12719_dedent.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz)\n``````\n",
    "created_at": "2013-01-13T14:57:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142262",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -19,7 +19,7 @@
 * [attachment: trac_12719-root-spkg-install.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-root-spkg-install.patch.gz)
 
 To the sage library:
-* [attachment: trac_12719-rebased-to-13211.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-rebased-to-13211.patch.gz)
+* [attachment: trac_12719-rebased-to-13211-vb.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-rebased-to-13211-vb.patch.gz)
 * [attachment: trac_12719-move_to_preparser_rebased.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser_rebased.patch.gz)
 * [attachment: trac_12719_ipython_fixes.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz)
 * [attachment: trac_12719_dedent.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz)
``````




---

archive/issue_comments_142263.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -74,5 +74,3 @@\n \n ./sage -br\n ```\n-\n-Fixes #11223?\n``````\n",
    "created_at": "2013-01-14T11:47:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142263",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -74,5 +74,3 @@
 
 ./sage -br
 ```
-
-Fixes #11223?
``````




---

archive/issue_events_175766.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-01-14T11:47:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175766"
}
```



---

archive/issue_events_175767.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-01-14T11:47:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175767"
}
```



---

archive/issue_comments_142264.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nWorks for me and as far as I can tell all remaining issues have been addressed.\n\nDoes not fix #11223, %bg is not implemented in ipython-0.13.1.",
    "created_at": "2013-01-14T11:47:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142264",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:9" align="right">comment:9</div>

Works for me and as far as I can tell all remaining issues have been addressed.

Does not fix #11223, %bg is not implemented in ipython-0.13.1.



---

archive/issue_comments_142265.json:
```json
{
    "body": "Rediffed patch",
    "created_at": "2013-01-17T15:44:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142265",
    "user": "https://github.com/jdemeyer"
}
```

Rediffed patch



---

archive/issue_comments_142266.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nAttachment: **[trac_12719-rebased-to-13211-vb.patch.gz](https://github.com/sagemath/sage/files/ticket12719/trac_12719-rebased-to-13211-vb.patch.gz)**",
    "created_at": "2013-01-17T15:44:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142266",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:0" align="right">comment:0</div>

Attachment: **[trac_12719-rebased-to-13211-vb.patch.gz](https://github.com/sagemath/sage/files/ticket12719/trac_12719-rebased-to-13211-vb.patch.gz)**



---

archive/issue_comments_142267.json:
```json
{
    "body": "Changed dependencies from **#13459, #9191, #13717** to **#13459, #9191, #13717, #13963**",
    "created_at": "2013-01-17T15:44:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142267",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#13459, #9191, #13717** to **#13459, #9191, #13717, #13963**



---

archive/issue_comments_142268.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nThis seems to cause some problems on OpenSolaris.\n\nFirst a doctest time-out:\n\n```\nTrying:\n    sage0.eval('2+2')###line 320:_sage_    sage: sage0.eval('2+2')\nExpecting:\n    '4'\n[...hangs...]\n```\n\nInterrupting this and restarting Sage gives:\n\n```\nbuildbot@hawk:~/build/sage/hawk-1/hawk_suncc/build/sage$ ./sage\n----------------------------------------------------------------------\n| Sage Version 5.7.beta0, Release Date: 2013-01-20                   |\n| Type \"notebook()\" for the browser-based notebook interface.        |\n| Type \"help()\" for help.                                            |\n----------------------------------------------------------------------\n**********************************************************************\n*                                                                    *\n* Warning: this is a prerelease version, and it may be unstable.     *\n*                                                                    *\n**********************************************************************\n\n**********************************************************************\n\nOops, Sage crashed. We do our best to make it stable, but...\n\nA crash report was automatically generated with the following information:\n  - A verbatim copy of the crash traceback.\n  - A copy of your input history during this session.\n  - Data on your current Sage configuration.\n\nIt was left in the file named:\n        '/export/home/buildbot/.sage/ipython-new/Sage_crash_report.txt'\nIf you can email this file to the developers, the information in it will help\nthem in understanding and correcting the problem.\n\nYou can mail it to: sage-support at sage-support@googlegroups.com\nwith the subject 'Sage Crash Report'.\n\nIf you want to do it now, the following command will work (under Unix):\nmail -s 'Sage Crash Report' sage-support@googlegroups.com < /export/home/buildbot/.sage/ipython-new/Sage_crash_report.txt\n\nTo ensure accurate tracking of this issue, please file a report about it at:\nhttp://trac.sagemath.org/sage_trac\n\nHit <Enter> to quit (your terminal may close)\n```\n\nRemoving `$HOME/.sage` fixed that.",
    "created_at": "2013-01-20T21:22:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142268",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:1" align="right">comment:1</div>

This seems to cause some problems on OpenSolaris.

First a doctest time-out:

```
Trying:
    sage0.eval('2+2')###line 320:_sage_    sage: sage0.eval('2+2')
Expecting:
    '4'
[...hangs...]
```

Interrupting this and restarting Sage gives:

```
buildbot@hawk:~/build/sage/hawk-1/hawk_suncc/build/sage$ ./sage
----------------------------------------------------------------------
| Sage Version 5.7.beta0, Release Date: 2013-01-20                   |
| Type "notebook()" for the browser-based notebook interface.        |
| Type "help()" for help.                                            |
----------------------------------------------------------------------
**********************************************************************
*                                                                    *
* Warning: this is a prerelease version, and it may be unstable.     *
*                                                                    *
**********************************************************************

**********************************************************************

Oops, Sage crashed. We do our best to make it stable, but...

A crash report was automatically generated with the following information:
  - A verbatim copy of the crash traceback.
  - A copy of your input history during this session.
  - Data on your current Sage configuration.

It was left in the file named:
        '/export/home/buildbot/.sage/ipython-new/Sage_crash_report.txt'
If you can email this file to the developers, the information in it will help
them in understanding and correcting the problem.

You can mail it to: sage-support at sage-support@googlegroups.com
with the subject 'Sage Crash Report'.

If you want to do it now, the following command will work (under Unix):
mail -s 'Sage Crash Report' sage-support@googlegroups.com < /export/home/buildbot/.sage/ipython-new/Sage_crash_report.txt

To ensure accurate tracking of this issue, please file a report about it at:
http://trac.sagemath.org/sage_trac

Hit <Enter> to quit (your terminal may close)
```

Removing `$HOME/.sage` fixed that.



---

archive/issue_events_175768.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-20T21:22:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175768"
}
```



---

archive/issue_events_175769.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-20T21:22:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175769"
}
```



---

archive/issue_comments_142269.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nCan we have a beta0 with this ticket? Its a bit ridiculous to have to use a script to apply all these patches.\n\nAlso, `.sage/ipython-new`? What are we going to do the next time the configuration file format changes, `.sage/ipython-even-newer`?",
    "created_at": "2013-01-20T22:43:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142269",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:2" align="right">comment:2</div>

Can we have a beta0 with this ticket? Its a bit ridiculous to have to use a script to apply all these patches.

Also, `.sage/ipython-new`? What are we going to do the next time the configuration file format changes, `.sage/ipython-even-newer`?



---

archive/issue_comments_142270.json:
```json
{
    "body": "<div id=\"comment:223\" align=\"right\">comment:223</div>\n\nReplying to [@vbraun](#comment:222):\n> Can we have a beta0 with this ticket?\n\nSee [http://sage.math.washington.edu/home/release/sage-5.7.beta1](http://sage.math.washington.edu/home/release/sage-5.7.beta1)",
    "created_at": "2013-01-21T10:25:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142270",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:223" align="right">comment:223</div>

Replying to [@vbraun](#comment:222):
> Can we have a beta0 with this ticket?

See [http://sage.math.washington.edu/home/release/sage-5.7.beta1](http://sage.math.washington.edu/home/release/sage-5.7.beta1)



---

archive/issue_comments_142271.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nVolker, you're right that the config file directory is still a bit clunky.  On the one hand, I didn't want to put the version number in there so that it changes every time we upgrade IPython.  On the other hand, calling something 'new' doesn't scale.\n\nWhat if we put the version number in there like this: `ipython-0.12-or-later`?  That's weird too, but it also means that people don't have to keep moving their configuration files if IPython upgrades, but the config format stays the same.",
    "created_at": "2013-01-21T15:11:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142271",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:4" align="right">comment:4</div>

Volker, you're right that the config file directory is still a bit clunky.  On the one hand, I didn't want to put the version number in there so that it changes every time we upgrade IPython.  On the other hand, calling something 'new' doesn't scale.

What if we put the version number in there like this: `ipython-0.12-or-later`?  That's weird too, but it also means that people don't have to keep moving their configuration files if IPython upgrades, but the config format stays the same.



---

archive/issue_comments_142272.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI think we are smart enough to figure out that `ipython-0.12` is the directory for configuration files that were introduced with iPython 0.12 and that you might run a later (but still compatible) version.",
    "created_at": "2013-01-21T15:24:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142272",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:5" align="right">comment:5</div>

I think we are smart enough to figure out that `ipython-0.12` is the directory for configuration files that were introduced with iPython 0.12 and that you might run a later (but still compatible) version.



---

archive/issue_comments_142273.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nBut IIRC, Matplotlib uses a per-version config directory inside of .sage, so having two conventions could be confusing.",
    "created_at": "2013-01-21T19:21:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142273",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:6" align="right">comment:6</div>

But IIRC, Matplotlib uses a per-version config directory inside of .sage, so having two conventions could be confusing.



---

archive/issue_comments_142274.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nWhat about the name `IPython-0.12+`?",
    "created_at": "2013-01-21T19:22:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142274",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:7" align="right">comment:7</div>

What about the name `IPython-0.12+`?



---

archive/issue_comments_142275.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI don't really care about the name as long as it has the version somewhere in there. Personally I find anything extra just confusing but feel free to pick what you like.",
    "created_at": "2013-01-21T19:42:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142275",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:8" align="right">comment:8</div>

I don't really care about the name as long as it has the version somewhere in there. Personally I find anything extra just confusing but feel free to pick what you like.



---

archive/issue_comments_142276.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nJeroen: can you attach the /export/home/buildbot/.sage/ipython-new/Sage_crash_report.txt",
    "created_at": "2013-01-21T19:44:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142276",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:9" align="right">comment:9</div>

Jeroen: can you attach the /export/home/buildbot/.sage/ipython-new/Sage_crash_report.txt



---

archive/issue_comments_142277.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nI tested this on OpenIndiana (OpenSolaris clone) and I don't see the timeout that Jeroen has. I get occasional non-reproducible timeouts on OI though, it might be something generally wonky with their PTYs. Remind me again why something that nobody is using or has access to is a primary platform?",
    "created_at": "2013-01-21T22:54:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142277",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:0" align="right">comment:0</div>

I tested this on OpenIndiana (OpenSolaris clone) and I don't see the timeout that Jeroen has. I get occasional non-reproducible timeouts on OI though, it might be something generally wonky with their PTYs. Remind me again why something that nobody is using or has access to is a primary platform?



---

archive/issue_comments_142278.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nI see a crash on David Kirkby's machine hawk. Crash log posted [here](http://sage.math.washington.edu/home/palmieri/misc/Sage_crash_report.txt).",
    "created_at": "2013-01-21T23:43:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142278",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:1" align="right">comment:1</div>

I see a crash on David Kirkby's machine hawk. Crash log posted [here](http://sage.math.washington.edu/home/palmieri/misc/Sage_crash_report.txt).



---

archive/issue_comments_142279.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nSane catching of history database errors has been fixed upstream at https://github.com/ipython/ipython/commit/d347c347bab915df69d499521b4876d3c9b168b9, but not in a released version.\n\nSee also: https://github.com/ipython/ipython/issues/2097",
    "created_at": "2013-01-22T12:43:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142279",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:2" align="right">comment:2</div>

Sane catching of history database errors has been fixed upstream at https://github.com/ipython/ipython/commit/d347c347bab915df69d499521b4876d3c9b168b9, but not in a released version.

See also: https://github.com/ipython/ipython/issues/2097



---

archive/issue_events_175770.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-01-22T13:41:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175770"
}
```



---

archive/issue_events_175771.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-01-22T13:41:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175771"
}
```



---

archive/issue_comments_142280.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,7 +2,7 @@\n \n Note: To use the QT console (`sage -ipython qtconsole`), you need qt/qt-devel in your base OS install, the optional zeromq/pyzmq spkgs from #12843, and the optional sip/PyQt spkgs from #13022.\n \n-Install the IPython 0.13.1 spkg at [http://sage.math.washington.edu/home/jason/ipython-0.13.1.spkg](http://sage.math.washington.edu/home/jason/ipython-0.13.1.spkg)\n+Install the IPython 0.13.1 spkg at [http://www.stp.dias.ie/~vbraun/Sage/spkg/ipython-0.13.1.spkg](http://www.stp.dias.ie/~vbraun/Sage/spkg/ipython-0.13.1.spkg)\n \n **apply**:\n \n``````\n",
    "created_at": "2013-01-22T13:41:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142280",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,7 +2,7 @@
 
 Note: To use the QT console (`sage -ipython qtconsole`), you need qt/qt-devel in your base OS install, the optional zeromq/pyzmq spkgs from #12843, and the optional sip/PyQt spkgs from #13022.
 
-Install the IPython 0.13.1 spkg at [http://sage.math.washington.edu/home/jason/ipython-0.13.1.spkg](http://sage.math.washington.edu/home/jason/ipython-0.13.1.spkg)
+Install the IPython 0.13.1 spkg at [http://www.stp.dias.ie/~vbraun/Sage/spkg/ipython-0.13.1.spkg](http://www.stp.dias.ie/~vbraun/Sage/spkg/ipython-0.13.1.spkg)
 
 **apply**:
 
``````




---

archive/issue_comments_142281.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI've backported the changes to `history.py`, this should fix the startup failure.",
    "created_at": "2013-01-22T13:41:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142281",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:3" align="right">comment:3</div>

I've backported the changes to `history.py`, this should fix the startup failure.



---

archive/issue_comments_142282.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nKeeping track, I guess there's one more thing to do: change the config directory back to .sage/ipython-0.12 in [attachment: trac_12719-ipythondir013.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-ipythondir013.patch.gz)",
    "created_at": "2013-01-22T16:49:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142282",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:4" align="right">comment:4</div>

Keeping track, I guess there's one more thing to do: change the config directory back to .sage/ipython-0.12 in [attachment: trac_12719-ipythondir013.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-ipythondir013.patch.gz)



---

archive/issue_comments_142283.json:
```json
{
    "body": "Attachment: **[trac_12719-ipythondir013.patch.gz](https://github.com/sagemath/sage/files/ticket12719/trac_12719-ipythondir013.patch.gz)**\n\nrebased to 5.4rc1",
    "created_at": "2013-01-22T17:22:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142283",
    "user": "https://github.com/jasongrout"
}
```

Attachment: **[trac_12719-ipythondir013.patch.gz](https://github.com/sagemath/sage/files/ticket12719/trac_12719-ipythondir013.patch.gz)**

rebased to 5.4rc1



---

archive/issue_comments_142284.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nOkay, I changed the ipythondir013.patch to use the config directory ipython-0.12.  So that needs review too.",
    "created_at": "2013-01-22T17:24:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142284",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:5" align="right">comment:5</div>

Okay, I changed the ipythondir013.patch to use the config directory ipython-0.12.  So that needs review too.



---

archive/issue_comments_142285.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nUpdating work issues with the things that need review.",
    "created_at": "2013-01-22T17:25:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142285",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:6" align="right">comment:6</div>

Updating work issues with the things that need review.



---

archive/issue_comments_142286.json:
```json
{
    "body": "Work Issues: **history-related crash, config directory name**",
    "created_at": "2013-01-22T17:25:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142286",
    "user": "https://github.com/jasongrout"
}
```

Work Issues: **history-related crash, config directory name**



---

archive/issue_comments_142287.json:
```json
{
    "body": "Changed work issues from **history-related crash, config directory name** to none",
    "created_at": "2013-01-22T19:44:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142287",
    "user": "https://github.com/vbraun"
}
```

Changed work issues from **history-related crash, config directory name** to none



---

archive/issue_events_175772.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-01-22T19:44:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175772"
}
```



---

archive/issue_events_175773.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-01-22T19:44:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175773"
}
```



---

archive/issue_comments_142288.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI'm fine with your patch for the directory name. Any expect interface on OpenIndiana occasionally crashes (maybe 1 in 20), but I've verified we are now not permanently stuck with a corrupted history file any more.",
    "created_at": "2013-01-22T19:44:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142288",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:7" align="right">comment:7</div>

I'm fine with your patch for the directory name. Any expect interface on OpenIndiana occasionally crashes (maybe 1 in 20), but I've verified we are now not permanently stuck with a corrupted history file any more.



---

archive/issue_comments_142289.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nOn hawk, I see a doctest failure, but I'm not sure how it could be related to this ticket:\n\n```\nsage -t  --long -force_lib devel/sage/sage/tests/french_book/mpoly.py                     \n**********************************************************************                    \nFile \"/export/home/palmieri/testing/clean/sage-5.7.beta1/devel/sage-main/sage/tests/frenc\\\nh_book/mpoly.py\", line 373:                                                               \n    sage: J.variety(RDF)                                                                  \nExpected:                                                                                 \n    [{y: 396340.89..., x: 26.61226...}]                                                   \nGot:                                                                                      \n    [{y: 396340.890167, x: -46.7888621592}]                                               \n**********************************************************************                    \n1 items had failures:                                                                     \n   1 of 151 in __main__.example_0                                                         \n***Test Failed*** 1 failures.                       \n```\nI also see a time out:\n\n```\nsage -t  --long -force_lib devel/sage/sage/interfaces/sage0.py                            \n*** *** Error: TIMED OUT! PROCESS KILLED! *** ***                                         \n                                                                                          \n         [1800.2 s] \n```\nwhich perhaps is related to this ticket.",
    "created_at": "2013-01-22T20:51:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142289",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:8" align="right">comment:8</div>

On hawk, I see a doctest failure, but I'm not sure how it could be related to this ticket:

```
sage -t  --long -force_lib devel/sage/sage/tests/french_book/mpoly.py                     
**********************************************************************                    
File "/export/home/palmieri/testing/clean/sage-5.7.beta1/devel/sage-main/sage/tests/frenc\
h_book/mpoly.py", line 373:                                                               
    sage: J.variety(RDF)                                                                  
Expected:                                                                                 
    [{y: 396340.89..., x: 26.61226...}]                                                   
Got:                                                                                      
    [{y: 396340.890167, x: -46.7888621592}]                                               
**********************************************************************                    
1 items had failures:                                                                     
   1 of 151 in __main__.example_0                                                         
***Test Failed*** 1 failures.                       
```
I also see a time out:

```
sage -t  --long -force_lib devel/sage/sage/interfaces/sage0.py                            
*** *** Error: TIMED OUT! PROCESS KILLED! *** ***                                         
                                                                                          
         [1800.2 s] 
```
which perhaps is related to this ticket.



---

archive/issue_comments_142290.json:
```json
{
    "body": "<div id=\"comment:239\" align=\"right\">comment:239</div>\n\nReplying to [@jhpalmieri](#comment:238):\n> sage -t  --long -force_lib devel/sage/sage/tests/french_book/mpoly.py                     \n\nNot related to this ticket.\n\n> ```\n> sage -t  --long -force_lib devel/sage/sage/interfaces/sage0.py                            \n> *** *** Error: TIMED OUT! PROCESS KILLED! *** ***                                         \n>                                                                                           \n>          [1800.2 s] \n> ```\n\nThis is indeed related to this ticket, see [comment:221].  But I haven't tried with the latest version of the spkg.",
    "created_at": "2013-01-23T07:55:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142290",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:239" align="right">comment:239</div>

Replying to [@jhpalmieri](#comment:238):
> sage -t  --long -force_lib devel/sage/sage/tests/french_book/mpoly.py                     

Not related to this ticket.

> ```
> sage -t  --long -force_lib devel/sage/sage/interfaces/sage0.py                            
> *** *** Error: TIMED OUT! PROCESS KILLED! *** ***                                         
>                                                                                           
>          [1800.2 s] 
> ```

This is indeed related to this ticket, see [comment:221].  But I haven't tried with the latest version of the spkg.



---

archive/issue_events_175774.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-23T13:50:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175774"
}
```



---

archive/issue_events_175775.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-23T13:50:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175775"
}
```



---

archive/issue_comments_142291.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nPatches [attachment: trac_12719_ROOT_configuration_files.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz) and [attachment: trac_12719-ipythondir013.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-ipythondir013.patch.gz) combined and rebased.  And moved the setting of `IPYTHONDIR` to `sage-env` where it belongs.",
    "created_at": "2013-01-23T13:50:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142291",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:0" align="right">comment:0</div>

Patches [attachment: trac_12719_ROOT_configuration_files.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz) and [attachment: trac_12719-ipythondir013.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-ipythondir013.patch.gz) combined and rebased.  And moved the setting of `IPYTHONDIR` to `sage-env` where it belongs.



---

archive/issue_comments_142292.json:
```json
{
    "body": "Attachment: **[trac_12719_ROOT_configuration_files.patch.gz](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz)**\n\nRebased to sage-5.7.beta0",
    "created_at": "2013-01-23T13:51:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142292",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[trac_12719_ROOT_configuration_files.patch.gz](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz)**

Rebased to sage-5.7.beta0



---

archive/issue_comments_142293.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -15,7 +15,6 @@\n \n To the root repository:\n * [attachment: trac_12719_ROOT_configuration_files.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz)\n-* [attachment: trac_12719-ipythondir013.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-ipythondir013.patch.gz)\n * [attachment: trac_12719-root-spkg-install.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-root-spkg-install.patch.gz)\n \n To the sage library:\n@@ -43,7 +42,6 @@\n cd SAGE_ROOT\n \n ./sage --hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz\n-./sage --hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-ipythondir013.patch.gz\n ./sage --hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-root-spkg-install.patch.gz\n \n ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz\n``````\n",
    "created_at": "2013-01-23T13:51:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142293",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -15,7 +15,6 @@
 
 To the root repository:
 * [attachment: trac_12719_ROOT_configuration_files.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz)
-* [attachment: trac_12719-ipythondir013.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-ipythondir013.patch.gz)
 * [attachment: trac_12719-root-spkg-install.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-root-spkg-install.patch.gz)
 
 To the sage library:
@@ -43,7 +42,6 @@
 cd SAGE_ROOT
 
 ./sage --hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz
-./sage --hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-ipythondir013.patch.gz
 ./sage --hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-root-spkg-install.patch.gz
 
 ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz
``````




---

archive/issue_events_175776.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-23T13:51:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175776"
}
```



---

archive/issue_events_175777.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-23T13:51:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175777"
}
```



---

archive/issue_events_175778.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-01-23T15:18:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175778"
}
```



---

archive/issue_events_175779.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-01-23T15:18:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175779"
}
```



---

archive/issue_comments_142294.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nSounds good to me.",
    "created_at": "2013-01-23T15:18:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142294",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:2" align="right">comment:2</div>

Sounds good to me.



---

archive/issue_events_175780.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-23T15:47:50Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "milestone_number": null,
    "milestone_title": "sage-5.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175780"
}
```



---

archive/issue_events_175781.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-23T15:47:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175781"
}
```



---

archive/issue_comments_142295.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nVolker and Jeroen: thanks for both of you working quickly on the last remaining issues!",
    "created_at": "2013-01-23T17:09:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142295",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:4" align="right">comment:4</div>

Volker and Jeroen: thanks for both of you working quickly on the last remaining issues!



---

archive/issue_comments_142296.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -44,13 +44,13 @@\n ./sage --hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz\n ./sage --hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-root-spkg-install.patch.gz\n \n-./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz\n+./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts-vb.patch.gz\n ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz\n ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-test-displayhook.patch.gz\n ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/12719_run_cython.patch.gz\n ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-hgignore.patch.gz\n \n-./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-rebased-to-13211.patch.gz\n+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-rebased-to-13211-vb.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser_rebased.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz\n``````\n",
    "created_at": "2013-01-23T19:57:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142296",
    "user": "https://github.com/jhpalmieri"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -44,13 +44,13 @@
 ./sage --hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz
 ./sage --hg qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-root-spkg-install.patch.gz
 
-./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts.patch.gz
+./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-scripts-vb.patch.gz
 ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_remove_sage_gdb_ipython.patch.gz
 ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-test-displayhook.patch.gz
 ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/12719_run_cython.patch.gz
 ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-hgignore.patch.gz
 
-./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-rebased-to-13211.patch.gz
+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-rebased-to-13211-vb.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser_rebased.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_ipython_fixes.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_dedent.patch.gz
``````




---

archive/issue_comments_142297.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nOne patch doesn't apply cleanly to 5.6.rc1:\n\n```\nadding trac_12719-rebased-to-13211-vb.patch to series file\napplying trac_12719-rebased-to-13211-vb.patch\npatching file sage/interfaces/gap.py\nHunk #1 FAILED at 177\n1 out of 2 hunks FAILED -- saving rejects to file sage/interfaces/gap.py.rej\n```\nI *think* that the hang on hawk is gone with the latest versions, but I'm testing again to make sure.",
    "created_at": "2013-01-23T20:05:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142297",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:6" align="right">comment:6</div>

One patch doesn't apply cleanly to 5.6.rc1:

```
adding trac_12719-rebased-to-13211-vb.patch to series file
applying trac_12719-rebased-to-13211-vb.patch
patching file sage/interfaces/gap.py
Hunk #1 FAILED at 177
1 out of 2 hunks FAILED -- saving rejects to file sage/interfaces/gap.py.rej
```
I *think* that the hang on hawk is gone with the latest versions, but I'm testing again to make sure.



---

archive/issue_comments_142298.json:
```json
{
    "body": "<div id=\"comment:247\" align=\"right\">comment:247</div>\n\nReplying to [@jhpalmieri](#comment:246):\n> One patch doesn't apply cleanly to 5.6.rc1:\n\nYou might be missing a dependency since the patch is in sage-5.7.beta1...",
    "created_at": "2013-01-23T20:14:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142298",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:247" align="right">comment:247</div>

Replying to [@jhpalmieri](#comment:246):
> One patch doesn't apply cleanly to 5.6.rc1:

You might be missing a dependency since the patch is in sage-5.7.beta1...



---

archive/issue_events_175782.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2013-01-23T20:19:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175782"
}
```



---

archive/issue_events_175783.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2013-01-23T20:19:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175783"
}
```



---

archive/issue_comments_142299.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI didn't think that 5.7.beta0 had been released. Am I supposed to use the unofficial version of it?\n\nBy the way, since the file `ipy_profile_sage.py` has been deleted, any mention of it should also be removed from `sage-make_devel_packages` and `sage-spkg-install`.",
    "created_at": "2013-01-23T20:19:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142299",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:8" align="right">comment:8</div>

I didn't think that 5.7.beta0 had been released. Am I supposed to use the unofficial version of it?

By the way, since the file `ipy_profile_sage.py` has been deleted, any mention of it should also be removed from `sage-make_devel_packages` and `sage-spkg-install`.



---

archive/issue_comments_142300.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nCan someone test something really quick with the official version of the ticket, if it's convenient?\n\nDo:\n\n```\n1; 2\n```\n\nDoes it print out both 1 and 2 in both the command line and the notebook?  Right now, aleph only prints out 2, and I've narrowed it down to how IPython handles the 'print out the last expression' (IPython prints out the last expression, while Sage prints out the last physical line).",
    "created_at": "2013-01-23T20:39:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142300",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:9" align="right">comment:9</div>

Can someone test something really quick with the official version of the ticket, if it's convenient?

Do:

```
1; 2
```

Does it print out both 1 and 2 in both the command line and the notebook?  Right now, aleph only prints out 2, and I've narrowed it down to how IPython handles the 'print out the last expression' (IPython prints out the last expression, while Sage prints out the last physical line).



---

archive/issue_comments_142301.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nJohn, see [comment:223](#comment:223). Since Jeroen linked to it I'd say its official ;-)\n\nJason, works for me (this is with the sagenb update but it shouldn't matter):\n\n```\n[vbraun@volker-desktop sage-5.7.beta1]$ ./sage\n----------------------------------------------------------------------\n| Sage Version 5.7.beta1, Release Date: 2013-01-21                   |\n| Type \"notebook()\" for the browser-based notebook interface.        |\n| Type \"help()\" for help.                                            |\n----------------------------------------------------------------------\n**********************************************************************\n*                                                                    *\n* Warning: this is a prerelease version, and it may be unstable.     *\n*                                                                    *\n**********************************************************************\nsage: \u00a01; 2\n1\n2\n```",
    "created_at": "2013-01-23T21:43:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142301",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:0" align="right">comment:0</div>

John, see [comment:223](#comment:223). Since Jeroen linked to it I'd say its official ;-)

Jason, works for me (this is with the sagenb update but it shouldn't matter):

```
[vbraun@volker-desktop sage-5.7.beta1]$ ./sage
----------------------------------------------------------------------
| Sage Version 5.7.beta1, Release Date: 2013-01-21                   |
| Type "notebook()" for the browser-based notebook interface.        |
| Type "help()" for help.                                            |
----------------------------------------------------------------------
**********************************************************************
*                                                                    *
* Warning: this is a prerelease version, and it may be unstable.     *
*                                                                    *
**********************************************************************
sage: 1; 2
1
2
```



---

archive/issue_comments_142302.json:
```json
{
    "body": "Initial patch",
    "created_at": "2013-01-23T22:25:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142302",
    "user": "https://github.com/vbraun"
}
```

Initial patch



---

archive/issue_events_175784.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-01-23T22:29:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175784"
}
```



---

archive/issue_events_175785.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-01-23T22:29:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175785"
}
```



---

archive/issue_comments_142303.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -12,6 +12,7 @@\n * [attachment: 12719-test-displayhook.patch](https://github.com/sagemath/sage/files/ticket12719/12719-test-displayhook.patch.gz)\n * [attachment: 12719_run_cython.patch](https://github.com/sagemath/sage/files/ticket12719/12719_run_cython.patch.gz)\n * [attachment: trac_12719-hgignore.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-hgignore.patch.gz)\n+* [attachment: trac_12719_purge_ipy_profile_sage.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_purge_ipy_profile_sage.patch.gz)\n \n To the root repository:\n * [attachment: trac_12719_ROOT_configuration_files.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz)\n``````\n",
    "created_at": "2013-01-23T22:29:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142303",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -12,6 +12,7 @@
 * [attachment: 12719-test-displayhook.patch](https://github.com/sagemath/sage/files/ticket12719/12719-test-displayhook.patch.gz)
 * [attachment: 12719_run_cython.patch](https://github.com/sagemath/sage/files/ticket12719/12719_run_cython.patch.gz)
 * [attachment: trac_12719-hgignore.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-hgignore.patch.gz)
+* [attachment: trac_12719_purge_ipy_profile_sage.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_purge_ipy_profile_sage.patch.gz)
 
 To the root repository:
 * [attachment: trac_12719_ROOT_configuration_files.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719_ROOT_configuration_files.patch.gz)
``````




---

archive/issue_comments_142304.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nAttachment: **[trac_12719_purge_ipy_profile_sage.patch.gz](https://github.com/sagemath/sage/files/ticket12719/trac_12719_purge_ipy_profile_sage.patch.gz)**\n\nI've removed the last occurrences from `ipy_profile_sage.py`.",
    "created_at": "2013-01-23T22:29:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142304",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:1" align="right">comment:1</div>

Attachment: **[trac_12719_purge_ipy_profile_sage.patch.gz](https://github.com/sagemath/sage/files/ticket12719/trac_12719_purge_ipy_profile_sage.patch.gz)**

I've removed the last occurrences from `ipy_profile_sage.py`.



---

archive/issue_comments_142305.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nVolker: and in the sage notebook, it does the same thing?  I think it should, but I just want to make sure.",
    "created_at": "2013-01-23T22:30:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142305",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:2" align="right">comment:2</div>

Volker: and in the sage notebook, it does the same thing?  I think it should, but I just want to make sure.



---

archive/issue_comments_142306.json:
```json
{
    "body": "<div id=\"comment:253\" align=\"right\">comment:253</div>\n\nReplying to [@jasongrout](#comment:252):\n> Volker: and in the sage notebook, it does the same thing?\n\nYes, same (correct) output in the notebook (with the sagenb-0.10.4 spkg).",
    "created_at": "2013-01-23T22:35:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142306",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:253" align="right">comment:253</div>

Replying to [@jasongrout](#comment:252):
> Volker: and in the sage notebook, it does the same thing?

Yes, same (correct) output in the notebook (with the sagenb-0.10.4 spkg).



---

archive/issue_comments_142307.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nCould somebody who knows this ticket please look at #12167 and #12926 to check whether they might be closed?",
    "created_at": "2013-01-24T08:02:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142307",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:4" align="right">comment:4</div>

Could somebody who knows this ticket please look at #12167 and #12926 to check whether they might be closed?



---

archive/issue_comments_142308.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI think both of those can be closed.  The new config system is set up with IPYTHONDIR, which is in DOTSAGE.  sage --ipython should use that now.",
    "created_at": "2013-01-24T08:55:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142308",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:5" align="right">comment:5</div>

I think both of those can be closed.  The new config system is set up with IPYTHONDIR, which is in DOTSAGE.  sage --ipython should use that now.



---

archive/issue_comments_142309.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nHello,\n\nI just want to confirm that this is expected with this ticket:\n\n```\n----------------------------------------------------------------------\n| Sage Version 5.6, Release Date: 2013-01-21                         |\n| Type \"notebook()\" for the browser-based notebook interface.        |\n| Type \"help()\" for help.                                            |\n----------------------------------------------------------------------\nsage: exit\n'Use Ctrl-D (i.e. EOF), %Exit, or %Quit to exit without confirmation.'\nsage: \n```\nWas \"just exit for exit\" a feature of old IPython or Sage?",
    "created_at": "2013-01-25T02:27:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142309",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:6" align="right">comment:6</div>

Hello,

I just want to confirm that this is expected with this ticket:

```
----------------------------------------------------------------------
| Sage Version 5.6, Release Date: 2013-01-21                         |
| Type "notebook()" for the browser-based notebook interface.        |
| Type "help()" for help.                                            |
----------------------------------------------------------------------
sage: exit
'Use Ctrl-D (i.e. EOF), %Exit, or %Quit to exit without confirmation.'
sage: 
```
Was "just exit for exit" a feature of old IPython or Sage?



---

archive/issue_comments_142310.json:
```json
{
    "body": "Attachment: **[12719_ipython_test.patch.gz](https://github.com/sagemath/sage/files/ticket12719/12719_ipython_test.patch.gz)**",
    "created_at": "2013-01-25T09:02:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142310",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[12719_ipython_test.patch.gz](https://github.com/sagemath/sage/files/ticket12719/12719_ipython_test.patch.gz)**



---

archive/issue_events_175786.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-25T09:03:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175786"
}
```



---

archive/issue_events_175787.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-25T09:03:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175787"
}
```



---

archive/issue_comments_142311.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -36,6 +36,7 @@\n * [attachment: trac_12719-gcd-repr.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-gcd-repr.patch.gz)\n * [attachment: 12719-system.patch](https://github.com/sagemath/sage/files/ticket12719/12719-system.patch.gz)\n * [attachment: trac-12719-always-preparse.patch](https://github.com/sagemath/sage/files/ticket12719/trac-12719-always-preparse.patch.gz)\n+* [attachnebt:12719_ipython_test.patch]\n \n So:\n \n@@ -68,6 +69,7 @@\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-gcd-repr.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-system.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac-12719-always-preparse.patch.gz\n+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719_ipython_test.patch.gz\n \n ./sage -i http://sage.math.washington.edu/home/jason/ipython-0.13.1.spkg\n \n``````\n",
    "created_at": "2013-01-25T09:03:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142311",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -36,6 +36,7 @@
 * [attachment: trac_12719-gcd-repr.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-gcd-repr.patch.gz)
 * [attachment: 12719-system.patch](https://github.com/sagemath/sage/files/ticket12719/12719-system.patch.gz)
 * [attachment: trac-12719-always-preparse.patch](https://github.com/sagemath/sage/files/ticket12719/trac-12719-always-preparse.patch.gz)
+* [attachnebt:12719_ipython_test.patch]
 
 So:
 
@@ -68,6 +69,7 @@
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-gcd-repr.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-system.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac-12719-always-preparse.patch.gz
+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719_ipython_test.patch.gz
 
 ./sage -i http://sage.math.washington.edu/home/jason/ipython-0.13.1.spkg
 
``````




---

archive/issue_events_175788.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-25T09:03:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175788"
}
```



---

archive/issue_events_175789.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-25T09:03:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175789"
}
```



---

archive/issue_comments_142312.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\n[attachment: 12719_ipython_test.patch](https://github.com/sagemath/sage/files/ticket12719/12719_ipython_test.patch.gz) needs review",
    "created_at": "2013-01-25T09:03:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142312",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">comment:8</div>

[attachment: 12719_ipython_test.patch](https://github.com/sagemath/sage/files/ticket12719/12719_ipython_test.patch.gz) needs review



---

archive/issue_comments_142313.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI don't know whats up with the overly attached Python interpreter but at least Ctrl-D works. Imho exit should just do that but that can be done (and doctested) on another ticket.\n\nJeroen's patch looks good to me.",
    "created_at": "2013-01-25T09:13:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142313",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:9" align="right">comment:9</div>

I don't know whats up with the overly attached Python interpreter but at least Ctrl-D works. Imho exit should just do that but that can be done (and doctested) on another ticket.

Jeroen's patch looks good to me.



---

archive/issue_events_175790.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-01-25T09:14:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175790"
}
```



---

archive/issue_events_175791.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-01-25T09:14:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175791"
}
```



---

archive/issue_comments_142314.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -36,7 +36,7 @@\n * [attachment: trac_12719-gcd-repr.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-gcd-repr.patch.gz)\n * [attachment: 12719-system.patch](https://github.com/sagemath/sage/files/ticket12719/12719-system.patch.gz)\n * [attachment: trac-12719-always-preparse.patch](https://github.com/sagemath/sage/files/ticket12719/trac-12719-always-preparse.patch.gz)\n-* [attachnebt:12719_ipython_test.patch]\n+* [attachment: 12719_ipython_test.patch](https://github.com/sagemath/sage/files/ticket12719/12719_ipython_test.patch.gz)\n \n So:\n \n@@ -51,6 +51,7 @@\n ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-test-displayhook.patch.gz\n ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/12719_run_cython.patch.gz\n ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-hgignore.patch.gz\n+./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_purge_ipy_profile_sage.patch.gz\n \n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-rebased-to-13211-vb.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser_rebased.patch.gz\n``````\n",
    "created_at": "2013-01-25T09:15:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142314",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -36,7 +36,7 @@
 * [attachment: trac_12719-gcd-repr.patch](https://github.com/sagemath/sage/files/ticket12719/trac_12719-gcd-repr.patch.gz)
 * [attachment: 12719-system.patch](https://github.com/sagemath/sage/files/ticket12719/12719-system.patch.gz)
 * [attachment: trac-12719-always-preparse.patch](https://github.com/sagemath/sage/files/ticket12719/trac-12719-always-preparse.patch.gz)
-* [attachnebt:12719_ipython_test.patch]
+* [attachment: 12719_ipython_test.patch](https://github.com/sagemath/sage/files/ticket12719/12719_ipython_test.patch.gz)
 
 So:
 
@@ -51,6 +51,7 @@
 ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-test-displayhook.patch.gz
 ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/12719_run_cython.patch.gz
 ./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-hgignore.patch.gz
+./sage --hg -R local/bin qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719_purge_ipy_profile_sage.patch.gz
 
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-rebased-to-13211-vb.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac_12719-move_to_preparser_rebased.patch.gz
``````




---

archive/issue_comments_142315.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nThe timeout on `hawk` of [comment:221] still exists, I'll have a look.",
    "created_at": "2013-01-25T13:03:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142315",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:2" align="right">comment:2</div>

The timeout on `hawk` of [comment:221] still exists, I'll have a look.



---

archive/issue_comments_142316.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nThis is the cause of the crash on `hawk`, it still has to do with the history database: [http://boxen.math.washington.edu/home/buildbot/crashlogs/hawk_ipython_crash.log](http://boxen.math.washington.edu/home/buildbot/crashlogs/hawk_ipython_crash.log)",
    "created_at": "2013-01-25T14:05:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142316",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:3" align="right">comment:3</div>

This is the cause of the crash on `hawk`, it still has to do with the history database: [http://boxen.math.washington.edu/home/buildbot/crashlogs/hawk_ipython_crash.log](http://boxen.math.washington.edu/home/buildbot/crashlogs/hawk_ipython_crash.log)



---

archive/issue_events_175792.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-25T14:10:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175792"
}
```



---

archive/issue_events_175793.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-25T14:10:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175793"
}
```



---

archive/issue_comments_142317.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nWe should probably disable the command history for the `sage0()` interface, but I don't know how one can do that.",
    "created_at": "2013-01-25T14:10:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142317",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:4" align="right">comment:4</div>

We should probably disable the command history for the `sage0()` interface, but I don't know how one can do that.



---

archive/issue_comments_142318.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nCan be done in IPython with \n\n```\nipython --HistoryManager.hist_file=:memory:\n```",
    "created_at": "2013-01-25T14:24:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142318",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:5" align="right">comment:5</div>

Can be done in IPython with 

```
ipython --HistoryManager.hist_file=:memory:
```



---

archive/issue_comments_142319.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nHow about we run sage0 with `--nodotsage`?",
    "created_at": "2013-01-25T14:27:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142319",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:6" align="right">comment:6</div>

How about we run sage0 with `--nodotsage`?



---

archive/issue_comments_142320.json:
```json
{
    "body": "<div id=\"comment:267\" align=\"right\">comment:267</div>\n\nReplying to [@vbraun](#comment:266):\n> How about we run sage0 with `--nodotsage`?\n\nNo, having access to the IPython crash log would be good.\n\nI'm preparing a patch, hang on...",
    "created_at": "2013-01-25T14:30:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142320",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:267" align="right">comment:267</div>

Replying to [@vbraun](#comment:266):
> How about we run sage0 with `--nodotsage`?

No, having access to the IPython crash log would be good.

I'm preparing a patch, hang on...



---

archive/issue_comments_142321.json:
```json
{
    "body": "Attachment: **[12719_ipython_no_history.patch.gz](https://github.com/sagemath/sage/files/ticket12719/12719_ipython_no_history.patch.gz)**",
    "created_at": "2013-01-25T14:41:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142321",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[12719_ipython_no_history.patch.gz](https://github.com/sagemath/sage/files/ticket12719/12719_ipython_no_history.patch.gz)**



---

archive/issue_comments_142322.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -37,6 +37,7 @@\n * [attachment: 12719-system.patch](https://github.com/sagemath/sage/files/ticket12719/12719-system.patch.gz)\n * [attachment: trac-12719-always-preparse.patch](https://github.com/sagemath/sage/files/ticket12719/trac-12719-always-preparse.patch.gz)\n * [attachment: 12719_ipython_test.patch](https://github.com/sagemath/sage/files/ticket12719/12719_ipython_test.patch.gz)\n+* [attachment: 12719_ipython_no_history.patch](https://github.com/sagemath/sage/files/ticket12719/12719_ipython_no_history.patch.gz)\n \n So:\n \n@@ -71,6 +72,7 @@\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-system.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac-12719-always-preparse.patch.gz\n ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719_ipython_test.patch.gz\n+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719_ipython_no_history.patch.gz\n \n ./sage -i http://sage.math.washington.edu/home/jason/ipython-0.13.1.spkg\n \n``````\n",
    "created_at": "2013-01-25T14:42:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142322",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -37,6 +37,7 @@
 * [attachment: 12719-system.patch](https://github.com/sagemath/sage/files/ticket12719/12719-system.patch.gz)
 * [attachment: trac-12719-always-preparse.patch](https://github.com/sagemath/sage/files/ticket12719/trac-12719-always-preparse.patch.gz)
 * [attachment: 12719_ipython_test.patch](https://github.com/sagemath/sage/files/ticket12719/12719_ipython_test.patch.gz)
+* [attachment: 12719_ipython_no_history.patch](https://github.com/sagemath/sage/files/ticket12719/12719_ipython_no_history.patch.gz)
 
 So:
 
@@ -71,6 +72,7 @@
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719-system.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/trac-12719-always-preparse.patch.gz
 ./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719_ipython_test.patch.gz
+./sage --hg -R devel/sage qimport -P https://github.com/sagemath/sage/files/ticket12719/12719_ipython_no_history.patch.gz
 
 ./sage -i http://sage.math.washington.edu/home/jason/ipython-0.13.1.spkg
 
``````




---

archive/issue_events_175794.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-25T14:42:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175794"
}
```



---

archive/issue_events_175795.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-25T14:42:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175795"
}
```



---

archive/issue_comments_142323.json:
```json
{
    "body": "Changed author from **Mike Hansen, Volker Braun, Jason Grout** to **Mike Hansen, Volker Braun, Jason Grout, Jeroen Demeyer**",
    "created_at": "2013-01-25T14:43:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142323",
    "user": "https://github.com/jdemeyer"
}
```

Changed author from **Mike Hansen, Volker Braun, Jason Grout** to **Mike Hansen, Volker Braun, Jason Grout, Jeroen Demeyer**



---

archive/issue_comments_142324.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nI've reported the issue upstream: https://github.com/ipython/ipython/issues/2845",
    "created_at": "2013-01-25T14:46:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142324",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:0" align="right">comment:0</div>

I've reported the issue upstream: https://github.com/ipython/ipython/issues/2845



---

archive/issue_events_175796.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-01-25T14:52:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175796"
}
```



---

archive/issue_events_175797.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-01-25T14:52:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175797"
}
```



---

archive/issue_comments_142325.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nSounds good to me. I've verified that this disables caching. I don't have a harddisk that is slow enough to trigger the locking issue ;-)",
    "created_at": "2013-01-25T14:52:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142325",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:1" align="right">comment:1</div>

Sounds good to me. I've verified that this disables caching. I don't have a harddisk that is slow enough to trigger the locking issue ;-)



---

archive/issue_comments_142326.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nOn `sage.math`, over NFS it's fairly easy to reproduce.",
    "created_at": "2013-01-25T15:21:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142326",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:2" align="right">comment:2</div>

On `sage.math`, over NFS it's fairly easy to reproduce.



---

archive/issue_events_175798.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-26T09:53:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175798"
}
```



---

archive/issue_events_175799.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-26T09:53:28Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12719#event-175799"
}
```



---

archive/issue_comments_142327.json:
```json
{
    "body": "Merged: **sage-5.7.beta1**",
    "created_at": "2013-01-26T09:53:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142327",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.7.beta1**



---

archive/issue_comments_142328.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nJohn Cremona reports on `sage-release`:\n\n```\njec@fermat%./sage\n----------------------------------------------------------------------\n| Sage Version 5.7.beta1, Release Date: 2013-01-26                   |\n| Type \"notebook()\" for the browser-based notebook interface.        |\n| Type \"help()\" for help.                                            |\n----------------------------------------------------------------------\n**********************************************************************\n*                                                                    *\n* Warning: this is a prerelease version, and it may be unstable.     *\n*                                                                    *\n**********************************************************************\n---------------------------------------------------------------------------\nNameError                                 Traceback (most recent call last)\n/home/jec/sage-5.7.beta1/local/lib/python2.7/site-packages/IPython/utils/py3compat.pyc\nin execfile(fname, *where)\n    176             else:\n    177                 filename = fname\n--> 178             __builtin__.execfile(filename, *where)\n\n/home/jec/.sage/init.sage in <module>()\n----> 1 load /home/jec/sage/ecdb.py\n\nNameError: name 'load' is not defined\n```",
    "created_at": "2013-01-28T11:03:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142328",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:4" align="right">comment:4</div>

John Cremona reports on `sage-release`:

```
jec@fermat%./sage
----------------------------------------------------------------------
| Sage Version 5.7.beta1, Release Date: 2013-01-26                   |
| Type "notebook()" for the browser-based notebook interface.        |
| Type "help()" for help.                                            |
----------------------------------------------------------------------
**********************************************************************
*                                                                    *
* Warning: this is a prerelease version, and it may be unstable.     *
*                                                                    *
**********************************************************************
---------------------------------------------------------------------------
NameError                                 Traceback (most recent call last)
/home/jec/sage-5.7.beta1/local/lib/python2.7/site-packages/IPython/utils/py3compat.pyc
in execfile(fname, *where)
    176             else:
    177                 filename = fname
--> 178             __builtin__.execfile(filename, *where)

/home/jec/.sage/init.sage in <module>()
----> 1 load /home/jec/sage/ecdb.py

NameError: name 'load' is not defined
```



---

archive/issue_comments_142329.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nVolker Braun reports:\n\n```\n/mnt/storage2TB/patchbot/Sage/sage-5.7.beta1/local/lib/python2.7/site-packages/sage/misc/sage_extension.pyc in print_branch(self=<sage.misc.sage_extension.SageCustomizations object>)\n    423     def set_quit_hook(self):\n    424         \"\"\"\n    425         Set the exit hook to cleanly exit Sage.  This does not work in all cases right now.\n    426         \"\"\"\n    427         def quit(shell):\n    428             import sage\n    429             sage.all.quit_sage()\n    430         self.shell.set_hook('shutdown_hook', quit)\n    431 \n    432     def print_branch(self):\n    433         \"\"\"\n    434         Print the branch we are on currently\n    435         \"\"\"\n    436         from sage.misc.misc import branch_current_hg_notice, branch_current_hg\n    437         branch = branch_current_hg_notice(branch_current_hg())\n--> 438         if branch and not self.shell.test_shell:\n        branch = 'Loading Sage library. Current Mercurial branch is: 0'\n        self.shell.test_shell = undefined\n    439             print branch\n    440 \n    441     def init_environment(self):\n    442         \"\"\"\n    443         Set up Sage command-line environment\n    444         \"\"\"\n    445         try:\n    446             self.shell.run_cell('from sage.all import Integer, RealNumber')\n    447         except Exception:\n    448             import traceback\n    449             print \"Error importing the Sage library\"\n    450             traceback.print_exc()\n    451             print\n    452             print \"To debug this, you can run:\"\n    453             print 'sage -ipython -i -c \"import sage.all\"'\n\nAttributeError: 'SageInteractiveShell' object has no attribute 'test_shell'\n```",
    "created_at": "2013-01-28T11:04:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142329",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:5" align="right">comment:5</div>

Volker Braun reports:

```
/mnt/storage2TB/patchbot/Sage/sage-5.7.beta1/local/lib/python2.7/site-packages/sage/misc/sage_extension.pyc in print_branch(self=<sage.misc.sage_extension.SageCustomizations object>)
    423     def set_quit_hook(self):
    424         """
    425         Set the exit hook to cleanly exit Sage.  This does not work in all cases right now.
    426         """
    427         def quit(shell):
    428             import sage
    429             sage.all.quit_sage()
    430         self.shell.set_hook('shutdown_hook', quit)
    431 
    432     def print_branch(self):
    433         """
    434         Print the branch we are on currently
    435         """
    436         from sage.misc.misc import branch_current_hg_notice, branch_current_hg
    437         branch = branch_current_hg_notice(branch_current_hg())
--> 438         if branch and not self.shell.test_shell:
        branch = 'Loading Sage library. Current Mercurial branch is: 0'
        self.shell.test_shell = undefined
    439             print branch
    440 
    441     def init_environment(self):
    442         """
    443         Set up Sage command-line environment
    444         """
    445         try:
    446             self.shell.run_cell('from sage.all import Integer, RealNumber')
    447         except Exception:
    448             import traceback
    449             print "Error importing the Sage library"
    450             traceback.print_exc()
    451             print
    452             print "To debug this, you can run:"
    453             print 'sage -ipython -i -c "import sage.all"'

AttributeError: 'SageInteractiveShell' object has no attribute 'test_shell'
```



---

archive/issue_comments_142330.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI've created #14024 to collect any patches that we need on top of Sage-5.7.beta1",
    "created_at": "2013-01-28T11:12:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142330",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:6" align="right">comment:6</div>

I've created #14024 to collect any patches that we need on top of Sage-5.7.beta1



---

archive/issue_comments_142331.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,7 +2,7 @@\n \n Note: To use the QT console (`sage -ipython qtconsole`), you need qt/qt-devel in your base OS install, the optional zeromq/pyzmq spkgs from #12843, and the optional sip/PyQt spkgs from #13022.\n \n-Install the IPython 0.13.1 spkg at [http://www.stp.dias.ie/~vbraun/Sage/spkg/ipython-0.13.1.spkg](http://www.stp.dias.ie/~vbraun/Sage/spkg/ipython-0.13.1.spkg)\n+Install the IPython 0.13.1 spkg at [http://boxen.math.washington.edu/home/jdemeyer/spkg/ipython-0.13.1.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/ipython-0.13.1.spkg)\n \n **apply**:\n \n``````\n",
    "created_at": "2013-01-30T07:43:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142331",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,7 +2,7 @@
 
 Note: To use the QT console (`sage -ipython qtconsole`), you need qt/qt-devel in your base OS install, the optional zeromq/pyzmq spkgs from #12843, and the optional sip/PyQt spkgs from #13022.
 
-Install the IPython 0.13.1 spkg at [http://www.stp.dias.ie/~vbraun/Sage/spkg/ipython-0.13.1.spkg](http://www.stp.dias.ie/~vbraun/Sage/spkg/ipython-0.13.1.spkg)
+Install the IPython 0.13.1 spkg at [http://boxen.math.washington.edu/home/jdemeyer/spkg/ipython-0.13.1.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/ipython-0.13.1.spkg)
 
 **apply**:
 
``````




---

archive/issue_comments_142332.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nPlease have a look at #14042, another follow-up.",
    "created_at": "2013-01-31T10:54:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142332",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">comment:8</div>

Please have a look at #14042, another follow-up.



---

archive/issue_comments_142333.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThere is still this problem:\n\n```\njec@fermat%./sage\n----------------------------------------------------------------------\n| Sage Version 5.7.beta1, Release Date: 2013-01-26                   |\n| Type \"notebook()\" for the browser-based notebook interface.        |\n| Type \"help()\" for help.                                            |\n----------------------------------------------------------------------\n**********************************************************************\n*                                                                    *\n* Warning: this is a prerelease version, and it may be unstable.     *\n*                                                                    *\n**********************************************************************\n---------------------------------------------------------------------------\nNameError                                 Traceback (most recent call last)\n/home/jec/sage-5.7.beta1/local/lib/python2.7/site-packages/IPython/utils/py3compat.pyc\nin execfile(fname, *where)\n    176             else:\n    177                 filename = fname\n--> 178             __builtin__.execfile(filename, *where)\n\n/home/jec/.sage/init.sage in <module>()\n----> 1 load /home/jec/sage/ecdb.py\n\nNameError: name 'load' is not defined\n```",
    "created_at": "2013-02-01T12:42:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142333",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:9" align="right">comment:9</div>

There is still this problem:

```
jec@fermat%./sage
----------------------------------------------------------------------
| Sage Version 5.7.beta1, Release Date: 2013-01-26                   |
| Type "notebook()" for the browser-based notebook interface.        |
| Type "help()" for help.                                            |
----------------------------------------------------------------------
**********************************************************************
*                                                                    *
* Warning: this is a prerelease version, and it may be unstable.     *
*                                                                    *
**********************************************************************
---------------------------------------------------------------------------
NameError                                 Traceback (most recent call last)
/home/jec/sage-5.7.beta1/local/lib/python2.7/site-packages/IPython/utils/py3compat.pyc
in execfile(fname, *where)
    176             else:
    177                 filename = fname
--> 178             __builtin__.execfile(filename, *where)

/home/jec/.sage/init.sage in <module>()
----> 1 load /home/jec/sage/ecdb.py

NameError: name 'load' is not defined
```



---

archive/issue_comments_142334.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\n#14066 was opened to deal with all remaining issues.",
    "created_at": "2013-02-06T06:40:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142334",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:0" align="right">comment:0</div>

#14066 was opened to deal with all remaining issues.



---

archive/issue_comments_142335.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nHow are users supposed to configure Sage's IPython now? See [sage-support](https://groups.google.com/d/topic/sage-support/yZ9W-un7Hlg/discussion). Right now, it looks like IPython's config files (either `.sage/ipython-0.12/profile_default/ipython_config.py` or `.sage/ipython-0.12/profile_sage/ipython_config.py`) are not loaded when Sage initializes its terminal. A possible solution:\n\n```diff\ndiff --git a/sage/misc/interpreter.py b/sage/misc/interpreter.py\n--- a/sage/misc/interpreter.py\n+++ b/sage/misc/interpreter.py\n@@ -672,9 +672,11 @@\n \n     def __init__(self, **kwargs):\n         # Overwrite the default Sage configuration with the user's.\n+        from IPython.frontend.terminal.ipapp import load_default_config\n         new_config = Config()\n         new_config._merge(DEFAULT_SAGE_CONFIG)\n         new_config._merge(kwargs.get('config', Config()))\n+        new_config._merge(load_default_config())\n         kwargs['config']=new_config\n         super(SageTerminalApp, self).__init__(**kwargs)\n \n```\nThen `.sage/ipython-0.12/profile_default/ipython_config.py` will be read and merged with Sage's configuration. Is this the right solution? Should I open a ticket? Or am I missing something?",
    "created_at": "2013-02-26T18:01:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142335",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:1" align="right">comment:1</div>

How are users supposed to configure Sage's IPython now? See [sage-support](https://groups.google.com/d/topic/sage-support/yZ9W-un7Hlg/discussion). Right now, it looks like IPython's config files (either `.sage/ipython-0.12/profile_default/ipython_config.py` or `.sage/ipython-0.12/profile_sage/ipython_config.py`) are not loaded when Sage initializes its terminal. A possible solution:

```diff
diff --git a/sage/misc/interpreter.py b/sage/misc/interpreter.py
--- a/sage/misc/interpreter.py
+++ b/sage/misc/interpreter.py
@@ -672,9 +672,11 @@
 
     def __init__(self, **kwargs):
         # Overwrite the default Sage configuration with the user's.
+        from IPython.frontend.terminal.ipapp import load_default_config
         new_config = Config()
         new_config._merge(DEFAULT_SAGE_CONFIG)
         new_config._merge(kwargs.get('config', Config()))
+        new_config._merge(load_default_config())
         kwargs['config']=new_config
         super(SageTerminalApp, self).__init__(**kwargs)
 
```
Then `.sage/ipython-0.12/profile_default/ipython_config.py` will be read and merged with Sage's configuration. Is this the right solution? Should I open a ticket? Or am I missing something?



---

archive/issue_comments_142336.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nLooks good to me",
    "created_at": "2013-02-26T18:21:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142336",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:2" align="right">comment:2</div>

Looks good to me



---

archive/issue_comments_142337.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nSee #14188.",
    "created_at": "2013-02-26T18:29:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142337",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:3" align="right">comment:3</div>

See #14188.



---

archive/issue_comments_142338.json:
```json
{
    "body": "<div id=\"comment:284\" align=\"right\">comment:284</div>\n\nReplying to [@vbraun](#comment:225):\n> I think we are smart enough to figure out that `ipython-0.12` is the directory for configuration files that were introduced with iPython 0.12 and that you might run a later (but still compatible) version.\n\nNo, we are not:\n\n```diff\ncommit 24ea89290988305d93f85988022cde7284268aeb\nAuthor: R. Andrew Ohana <andrew.ohana@gmail.com>\nDate:   Sun Feb 16 16:32:29 2014 -0800\n\n    dynamically set IPYTHONDIR based on the current version of ipython\n\ndiff --git a/src/bin/sage-env b/src/bin/sage-env\nindex a9021b7..fee3c56 100644\n--- a/src/bin/sage-env\n+++ b/src/bin/sage-env\n@@ -359,7 +359,12 @@ if [ \"$SAGE_STARTUP_FILE\" = \"\" ]; then\n     export SAGE_STARTUP_FILE\n fi\n \n-export IPYTHONDIR=\"$DOT_SAGE/ipython-0.12\"\n+if [ -x \"$SAGE_LOCAL/bin/ipython\" ]; then\n+    export IPYTHONDIR=\"$DOT_SAGE/ipython-\"`ipython --version`\n+else\n+    # IPython is not yet installed\n+    export IPYTHONDIR=\"$DOT_SAGE/ipython-\"`sed 's+\\.p[0-9]*$++' \"$SAGE_ROOT\"/build/pkgs/ipython/package-version.txt`\n+fi\n \n if [ -d \"$SAGE_ROOT/local/lib/python\" ]; then\n     PYTHONPATH=\"$SAGE_ROOT/local/lib/python\"\n```\n\nI will change this back to a hardcoded version in #21430.",
    "created_at": "2016-09-06T08:31:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12719#issuecomment-142338",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:284" align="right">comment:284</div>

Replying to [@vbraun](#comment:225):
> I think we are smart enough to figure out that `ipython-0.12` is the directory for configuration files that were introduced with iPython 0.12 and that you might run a later (but still compatible) version.

No, we are not:

```diff
commit 24ea89290988305d93f85988022cde7284268aeb
Author: R. Andrew Ohana <andrew.ohana@gmail.com>
Date:   Sun Feb 16 16:32:29 2014 -0800

    dynamically set IPYTHONDIR based on the current version of ipython

diff --git a/src/bin/sage-env b/src/bin/sage-env
index a9021b7..fee3c56 100644
--- a/src/bin/sage-env
+++ b/src/bin/sage-env
@@ -359,7 +359,12 @@ if [ "$SAGE_STARTUP_FILE" = "" ]; then
     export SAGE_STARTUP_FILE
 fi
 
-export IPYTHONDIR="$DOT_SAGE/ipython-0.12"
+if [ -x "$SAGE_LOCAL/bin/ipython" ]; then
+    export IPYTHONDIR="$DOT_SAGE/ipython-"`ipython --version`
+else
+    # IPython is not yet installed
+    export IPYTHONDIR="$DOT_SAGE/ipython-"`sed 's+\.p[0-9]*$++' "$SAGE_ROOT"/build/pkgs/ipython/package-version.txt`
+fi
 
 if [ -d "$SAGE_ROOT/local/lib/python" ]; then
     PYTHONPATH="$SAGE_ROOT/local/lib/python"
```

I will change this back to a hardcoded version in #21430.
