# Issue 12518: Enumerated set from iterator

archive/issues_012346.json:
```json
{
    "assignees": [
        "https://github.com/videlec"
    ],
    "body": "Implementation of a set (using the category framework) from a function that returns an iterator as in\n\n```\nsage: from sage.sets.set_from_iterator import EnumeratedSetFromIterator\nsage: E = EnumeratedSetFromIterator(graphs)\n{Graph on 0 vertices, Graph on 1 vertex, Graph on 2 vertices, Graph on 2 vertices, Graph on 3 vertices, Graph on 3 vertices, ...}\n```\nNote that in order to be able to pickle, we do not build directly a set from an iterator.\n\nA previous implementation in sage-combinat was CombinatorialClassFromIterator (in sage.combinat.combinat) which is now deprecated.\n\nThe patch depends on #12653 which allows to initialize a graph from a dictionnary of iterables.\n\n**Apply**: [attachment: trac_12518-enumerated_set_from_iterator-final.patch](https://github.com/sagemath/sage/files/ticket12518/trac_12518-enumerated_set_from_iterator-final.patch.gz) and [attachment: trac_12518-enumerated_set_from_iterator-final_fix.patch](https://github.com/sagemath/sage/files/ticket12518/trac_12518-enumerated_set_from_iterator-final_fix.patch.gz)\n\nDepends on #12653\nDepends on #11795\nDepends on #13778\n\nCC:  @staroste\n\nKeywords: **set, iterator**\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **Vincent Delecroix**\n\nMerged: **sage-5.6.beta2**\n\nComponent: **combinatorics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/12518_\n\n",
    "closed_at": "2013-01-01T11:37:17Z",
    "created_at": "2012-02-16T09:25:49Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Enumerated set from iterator",
    "type": "issue",
    "updated_at": "2015-02-18T12:06:44Z",
    "url": "https://github.com/sagemath/sage/issues/12518",
    "user": "https://github.com/videlec"
}
```
Implementation of a set (using the category framework) from a function that returns an iterator as in

```
sage: from sage.sets.set_from_iterator import EnumeratedSetFromIterator
sage: E = EnumeratedSetFromIterator(graphs)
{Graph on 0 vertices, Graph on 1 vertex, Graph on 2 vertices, Graph on 2 vertices, Graph on 3 vertices, Graph on 3 vertices, ...}
```
Note that in order to be able to pickle, we do not build directly a set from an iterator.

A previous implementation in sage-combinat was CombinatorialClassFromIterator (in sage.combinat.combinat) which is now deprecated.

The patch depends on #12653 which allows to initialize a graph from a dictionnary of iterables.

**Apply**: [attachment: trac_12518-enumerated_set_from_iterator-final.patch](https://github.com/sagemath/sage/files/ticket12518/trac_12518-enumerated_set_from_iterator-final.patch.gz) and [attachment: trac_12518-enumerated_set_from_iterator-final_fix.patch](https://github.com/sagemath/sage/files/ticket12518/trac_12518-enumerated_set_from_iterator-final_fix.patch.gz)

Depends on #12653
Depends on #11795
Depends on #13778

CC:  @staroste

Keywords: **set, iterator**

Reviewer: **Travis Scrimshaw**

Author: **Vincent Delecroix**

Merged: **sage-5.6.beta2**

Component: **combinatorics**

_Issue created by migration from https://trac.sagemath.org/ticket/12518_





---

archive/issue_events_169698.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2012-02-16T09:25:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "milestone_number": null,
    "milestone_title": "sage-5.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12518#event-169698"
}
```



---

archive/issue_events_169699.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2012-02-16T09:25:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12518#event-169699"
}
```



---

archive/issue_events_169700.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2012-02-16T09:25:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12518#event-169700"
}
```



---

archive/issue_events_169701.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2012-02-16T09:25:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12518#event-169701"
}
```



---

archive/issue_events_169702.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2012-02-16T09:25:49Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "subject": "https://github.com/videlec",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12518#event-169702"
}
```



---

archive/issue_comments_138430.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nHi,\n\nI'm in trouble with two points:\n\n1) What to do with the equality test when the set are both infinite ? (see in the patch the warning printing on stderr)\n\n2) What is the good way to implement the decorator for a method ? The implementation for functions work quite well but in sage.misc.cachefunc the implementation for methods rather than functions seem more tricky.",
    "created_at": "2012-02-16T09:31:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12518#issuecomment-138430",
    "user": "https://github.com/videlec"
}
```

<div id="comment:1" align="right">comment:1</div>

Hi,

I'm in trouble with two points:

1) What to do with the equality test when the set are both infinite ? (see in the patch the warning printing on stderr)

2) What is the good way to implement the decorator for a method ? The implementation for functions work quite well but in sage.misc.cachefunc the implementation for methods rather than functions seem more tricky.



---

archive/issue_comments_138431.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n Implementation of a set (using the category framework) from a function that returns an iterator. Building a set directly from an iterator leads to the impossibility of pickling.\n \n-A previous implementation was CombinatorialClassFromIterator (in sage.combinat.combinat) which is now deprecated.\n+A previous implementation in sage-combinat was CombinatorialClassFromIterator (in sage.combinat.combinat) which is now deprecated.\n \n``````\n",
    "created_at": "2012-02-18T13:36:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12518#issuecomment-138431",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
 Implementation of a set (using the category framework) from a function that returns an iterator. Building a set directly from an iterator leads to the impossibility of pickling.
 
-A previous implementation was CombinatorialClassFromIterator (in sage.combinat.combinat) which is now deprecated.
+A previous implementation in sage-combinat was CombinatorialClassFromIterator (in sage.combinat.combinat) which is now deprecated.
 
``````




---

archive/issue_events_169703.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2012-02-18T15:55:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12518#event-169703"
}
```



---

archive/issue_comments_138432.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,11 @@\n-Implementation of a set (using the category framework) from a function that returns an iterator. Building a set directly from an iterator leads to the impossibility of pickling.\n+Implementation of a set (using the category framework) from a function that returns an iterator as in\n+\n+```\n+sage: from sage.sets.set_from_iterator import EnumeratedSetFromIterator\n+sage: E = EnumeratedSetFromIterator(graphs)\n+{Graph on 0 vertices, Graph on 1 vertex, Graph on 2 vertices, Graph on 2 vertices, Graph on 3 vertices, Graph on 3 vertices, ...}\n+```\n+Note that in order to be able to pickle, we do not build directly a set from an iterator.\n \n A previous implementation in sage-combinat was CombinatorialClassFromIterator (in sage.combinat.combinat) which is now deprecated.\n \n``````\n",
    "created_at": "2012-02-18T15:55:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12518#issuecomment-138432",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,11 @@
-Implementation of a set (using the category framework) from a function that returns an iterator. Building a set directly from an iterator leads to the impossibility of pickling.
+Implementation of a set (using the category framework) from a function that returns an iterator as in
+
+```
+sage: from sage.sets.set_from_iterator import EnumeratedSetFromIterator
+sage: E = EnumeratedSetFromIterator(graphs)
+{Graph on 0 vertices, Graph on 1 vertex, Graph on 2 vertices, Graph on 2 vertices, Graph on 3 vertices, Graph on 3 vertices, ...}
+```
+Note that in order to be able to pickle, we do not build directly a set from an iterator.
 
 A previous implementation in sage-combinat was CombinatorialClassFromIterator (in sage.combinat.combinat) which is now deprecated.
 
``````




---

archive/issue_comments_138433.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI removed trailing whitespaces and correct a failing doctest.",
    "created_at": "2012-02-28T16:10:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12518#issuecomment-138433",
    "user": "https://github.com/videlec"
}
```

<div id="comment:5" align="right">comment:5</div>

I removed trailing whitespaces and correct a failing doctest.



---

archive/issue_comments_138434.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI changed the attachment in order to make the patchbot happy :-)",
    "created_at": "2012-03-09T02:23:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12518#issuecomment-138434",
    "user": "https://github.com/videlec"
}
```

<div id="comment:6" align="right">comment:6</div>

I changed the attachment in order to make the patchbot happy :-)



---

archive/issue_comments_138435.json:
```json
{
    "body": "Reviewer: **PatchBot**",
    "created_at": "2012-03-11T11:25:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12518#issuecomment-138435",
    "user": "https://github.com/loefflerd"
}
```

Reviewer: **PatchBot**



---

archive/issue_comments_138436.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nBut patchbot's not happy -- a bunch of doctests fail (as you can see from the latest patchbot logs). I reproduced this by hand on 5.0.beta7, so it's not just a patchbot issue. The failures all have something to do with dicts not being hashable. (I'm not sure what patch has caused this conflict, but it worked in 5.0.beta3; my guess would be #10998.)",
    "created_at": "2012-03-11T11:25:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12518#issuecomment-138436",
    "user": "https://github.com/loefflerd"
}
```

<div id="comment:7" align="right">comment:7</div>

But patchbot's not happy -- a bunch of doctests fail (as you can see from the latest patchbot logs). I reproduced this by hand on 5.0.beta7, so it's not just a patchbot issue. The failures all have something to do with dicts not being hashable. (I'm not sure what patch has caused this conflict, but it worked in 5.0.beta3; my guess would be #10998.)



---

archive/issue_events_169704.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2012-03-11T11:25:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12518#event-169704"
}
```



---

archive/issue_events_169705.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2012-03-11T11:25:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12518#event-169705"
}
```



---

archive/issue_comments_138437.json:
```json
{
    "body": "Changed author from **vdelecroix** to **Vincent Delecroix**",
    "created_at": "2012-03-11T11:25:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12518#issuecomment-138437",
    "user": "https://github.com/loefflerd"
}
```

Changed author from **vdelecroix** to **Vincent Delecroix**



---

archive/issue_comments_138438.json:
```json
{
    "body": "Dependencies: **#12653**",
    "created_at": "2012-03-12T23:41:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12518#issuecomment-138438",
    "user": "https://github.com/videlec"
}
```

Dependencies: **#12653**



---

archive/issue_comments_138439.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,3 +9,5 @@\n \n A previous implementation in sage-combinat was CombinatorialClassFromIterator (in sage.combinat.combinat) which is now deprecated.\n \n+The patch depends on #12653 which allows to initialize a graph from a dictionnary of iterables.\n+\n``````\n",
    "created_at": "2012-03-12T23:41:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12518#issuecomment-138439",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,3 +9,5 @@
 
 A previous implementation in sage-combinat was CombinatorialClassFromIterator (in sage.combinat.combinat) which is now deprecated.
 
+The patch depends on #12653 which allows to initialize a graph from a dictionnary of iterables.
+
``````




---

archive/issue_events_169706.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2012-03-12T23:41:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12518#event-169706"
}
```



---

archive/issue_events_169707.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2012-03-12T23:41:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12518#event-169707"
}
```



---

archive/issue_comments_138440.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI just remove the only trailing whitespace (in sage/combinat/combinat.py) that made the patchbot unhappy.",
    "created_at": "2012-04-29T19:22:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12518#issuecomment-138440",
    "user": "https://github.com/videlec"
}
```

<div id="comment:9" align="right">comment:9</div>

I just remove the only trailing whitespace (in sage/combinat/combinat.py) that made the patchbot unhappy.



---

archive/issue_comments_138441.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nHey Vincent,\n\nI also get the patchbot errors when running the patch in the combinat queue on 5.5.rc0. Also from a quick look-through the patch, there are a few things which I believe needs to be addressed:\n- Documentation and tests for the deprecated functions in `combinat/combinat.py`\n- An example in `iter_with_cache()`, I also don't quite understand the documentation.\n- You'll need to add `iter_with_cache` and `set_from_iterator` to the documentation by adding/editing a `.rst` file (probably `misc.rst`).\n- I prefer to see the reserved words in code blocks: <code>\\`\\`None\\`\\`</code>, <code>\\`\\`self\\`\\`</code>, <code>\\`\\`True\\`\\`</code>, and <code>\\`\\`False\\`\\`</code>\n- Same for input parameters and private functions, even in private functions.\n- I prefer to have as much linking as possible: ex. <code>:class:\\`EnumeratedSetFromIterator\\`</code>\n- Instead of\n\n  ```python\n  if x is True:\n  ...\n  if x is False:\n  ...\n  ```\n  it is better to do\n\n  ```python\n  if x:\n  ...\n  if not x:\n  ...\n  ```\n  in case `x` is not a boolean (ex. `x = 1`).\n\nThanks,\n\nTravis",
    "created_at": "2012-11-27T23:40:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12518#issuecomment-138441",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:10" align="right">comment:10</div>

Hey Vincent,

I also get the patchbot errors when running the patch in the combinat queue on 5.5.rc0. Also from a quick look-through the patch, there are a few things which I believe needs to be addressed:
- Documentation and tests for the deprecated functions in `combinat/combinat.py`
- An example in `iter_with_cache()`, I also don't quite understand the documentation.
- You'll need to add `iter_with_cache` and `set_from_iterator` to the documentation by adding/editing a `.rst` file (probably `misc.rst`).
- I prefer to see the reserved words in code blocks: <code>\`\`None\`\`</code>, <code>\`\`self\`\`</code>, <code>\`\`True\`\`</code>, and <code>\`\`False\`\`</code>
- Same for input parameters and private functions, even in private functions.
- I prefer to have as much linking as possible: ex. <code>:class:\`EnumeratedSetFromIterator\`</code>
- Instead of

  ```python
  if x is True:
  ...
  if x is False:
  ...
  ```
  it is better to do

  ```python
  if x:
  ...
  if not x:
  ...
  ```
  in case `x` is not a boolean (ex. `x = 1`).

Thanks,

Travis



---

archive/issue_comments_138442.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nHi Travis,\n\n> I also get the patchbot errors when running the patch in the combinat queue on 5.5.rc0. Also from a quick look-through the patch, there are a few things which I believe needs to be addressed:\n> - Documentation and tests for the deprecated functions in `combinat/combinat.py`\n\nThese functions were *only* in the sage-combinat queues and not inside Sage. So the deprecation is just intended for people from combinat who were using it (and I think that none of them uses it).\n\n> - An example in `iter_with_cache()`, I also don't quite understand the documentation.\n\nI will open (few days) a new ticket for a better implementation of iter_with_cache. There is a similar construction in lazy power series and I would like to merge both. The idea is to have a Python data structure that behave like a list but with possibly infinitely many entries.\n\n> - I prefer to see the reserved words in code blocks: <code>\\`\\`None\\`\\`</code>, <code>\\`\\`self\\`\\`</code>, <code>\\`\\`True\\`\\`</code>, and <code>\\`\\`False\\`\\`</code>\n\nIs there a difference for documentation ? I thought that code blocks open a new paragraph.\n\nThanks for careful reading, I will adress all remarks in a new patch.\n\nBest,\nVincent",
    "created_at": "2012-11-28T06:21:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12518#issuecomment-138442",
    "user": "https://github.com/videlec"
}
```

<div id="comment:11" align="right">comment:11</div>

Hi Travis,

> I also get the patchbot errors when running the patch in the combinat queue on 5.5.rc0. Also from a quick look-through the patch, there are a few things which I believe needs to be addressed:
> - Documentation and tests for the deprecated functions in `combinat/combinat.py`

These functions were *only* in the sage-combinat queues and not inside Sage. So the deprecation is just intended for people from combinat who were using it (and I think that none of them uses it).

> - An example in `iter_with_cache()`, I also don't quite understand the documentation.

I will open (few days) a new ticket for a better implementation of iter_with_cache. There is a similar construction in lazy power series and I would like to merge both. The idea is to have a Python data structure that behave like a list but with possibly infinitely many entries.

> - I prefer to see the reserved words in code blocks: <code>\`\`None\`\`</code>, <code>\`\`self\`\`</code>, <code>\`\`True\`\`</code>, and <code>\`\`False\`\`</code>

Is there a difference for documentation ? I thought that code blocks open a new paragraph.

Thanks for careful reading, I will adress all remarks in a new patch.

Best,
Vincent



---

archive/issue_comments_138443.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nHey Vincent,\n\n> > I also get the patchbot errors when running the patch in the combinat queue on 5.5.rc0. Also from a quick look-through the patch, there are a few things which I believe needs to be addressed:\n> > - Documentation and tests for the deprecated functions in `combinat/combinat.py`\n\n> \n> These functions were *only* in the sage-combinat queues and not inside Sage. So the deprecation is just intended for people from combinat who were using it (and I think that none of them uses it).\n\nSince these functions are not in sage, its probably best to remove these functions from this patch and then put a second patch in the combinat queue deprecating these functions.\n\n> > - I prefer to see the reserved words in code blocks: <code>\\`\\`None\\`\\`</code>, <code>\\`\\`self\\`\\`</code>, <code>\\`\\`True\\`\\`</code>, and <code>\\`\\`False\\`\\`</code>\n\n> \n> Is there a difference for documentation ? I thought that code blocks open a new paragraph.\n\nI should have called it (inline) code format, and it just changes the format in the output html.\n\nThanks,\n\nTravis",
    "created_at": "2012-11-29T16:45:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12518#issuecomment-138443",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:12" align="right">comment:12</div>

Hey Vincent,

> > I also get the patchbot errors when running the patch in the combinat queue on 5.5.rc0. Also from a quick look-through the patch, there are a few things which I believe needs to be addressed:
> > - Documentation and tests for the deprecated functions in `combinat/combinat.py`

> 
> These functions were *only* in the sage-combinat queues and not inside Sage. So the deprecation is just intended for people from combinat who were using it (and I think that none of them uses it).

Since these functions are not in sage, its probably best to remove these functions from this patch and then put a second patch in the combinat queue deprecating these functions.

> > - I prefer to see the reserved words in code blocks: <code>\`\`None\`\`</code>, <code>\`\`self\`\`</code>, <code>\`\`True\`\`</code>, and <code>\`\`False\`\`</code>

> 
> Is there a difference for documentation ? I thought that code blocks open a new paragraph.

I should have called it (inline) code format, and it just changes the format in the output html.

Thanks,

Travis



---

archive/issue_comments_138444.json:
```json
{
    "body": "Changed dependencies from **#12653** to **#12653, #13778**",
    "created_at": "2012-11-30T06:11:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12518#issuecomment-138444",
    "user": "https://github.com/videlec"
}
```

Changed dependencies from **#12653** to **#12653, #13778**



---

archive/issue_comments_138445.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nAttachment: **[trac_12518-enumerated_set_from_iterator.patch.gz](https://github.com/sagemath/sage/files/ticket12518/trac_12518-enumerated_set_from_iterator.patch.gz)**",
    "created_at": "2012-11-30T06:11:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12518#issuecomment-138445",
    "user": "https://github.com/videlec"
}
```

<div id="comment:13" align="right">comment:13</div>

Attachment: **[trac_12518-enumerated_set_from_iterator.patch.gz](https://github.com/sagemath/sage/files/ticket12518/trac_12518-enumerated_set_from_iterator.patch.gz)**



---

archive/issue_comments_138446.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nHi,\n\nThe error in patchbot comes from the lazy import of graphs (which does not support pickling). I modify a little bit the implementation to use the generic framework of lazy list (in #13778). In particular, there is no more iter_with_cache.\n\nBest,\nVincent",
    "created_at": "2012-11-30T06:12:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12518#issuecomment-138446",
    "user": "https://github.com/videlec"
}
```

<div id="comment:14" align="right">comment:14</div>

Hi,

The error in patchbot comes from the lazy import of graphs (which does not support pickling). I modify a little bit the implementation to use the generic framework of lazy list (in #13778). In particular, there is no more iter_with_cache.

Best,
Vincent



---

archive/issue_comments_138447.json:
```json
{
    "body": "Changed reviewer from **PatchBot** to **Travis Scrimshaw**",
    "created_at": "2012-12-04T17:57:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12518#issuecomment-138447",
    "user": "https://github.com/tscrim"
}
```

Changed reviewer from **PatchBot** to **Travis Scrimshaw**



---

archive/issue_comments_138448.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nHey Vincent,\n\nI'm uploading a review patch which just makes some documentation tweaks. Functionally it looks good. \n\nHowever I would like those functions in `combinat/combinat.py` removed since they only exist in your patch (I grep'ed the patches in the queue and only found them in this patch), and I believe we don't need to follow the sage deprecation scheme within the combinat queue (please correct me if I'm wrong). If you're worried about it, I would place the functions in a separate patch.\n\nThank you,\n\nTravis",
    "created_at": "2012-12-04T17:57:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12518#issuecomment-138448",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:15" align="right">comment:15</div>

Hey Vincent,

I'm uploading a review patch which just makes some documentation tweaks. Functionally it looks good. 

However I would like those functions in `combinat/combinat.py` removed since they only exist in your patch (I grep'ed the patches in the queue and only found them in this patch), and I believe we don't need to follow the sage deprecation scheme within the combinat queue (please correct me if I'm wrong). If you're worried about it, I would place the functions in a separate patch.

Thank you,

Travis



---

archive/issue_comments_138449.json:
```json
{
    "body": "Attachment: **[trac_12518-enumerated_set_from_iterator-review-ts.patch.gz](https://github.com/sagemath/sage/files/ticket12518/trac_12518-enumerated_set_from_iterator-review-ts.patch.gz)**",
    "created_at": "2012-12-04T17:59:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12518#issuecomment-138449",
    "user": "https://github.com/tscrim"
}
```

Attachment: **[trac_12518-enumerated_set_from_iterator-review-ts.patch.gz](https://github.com/sagemath/sage/files/ticket12518/trac_12518-enumerated_set_from_iterator-review-ts.patch.gz)**



---

archive/issue_comments_138450.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -11,3 +11,6 @@\n \n The patch depends on #12653 which allows to initialize a graph from a dictionnary of iterables.\n \n+Apply only:\n+\n+* trac_12518-enumerated_set_from_iterator-final.patch\n``````\n",
    "created_at": "2012-12-06T07:40:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12518#issuecomment-138450",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -11,3 +11,6 @@
 
 The patch depends on #12653 which allows to initialize a graph from a dictionnary of iterables.
 
+Apply only:
+
+* trac_12518-enumerated_set_from_iterator-final.patch
``````




---

archive/issue_comments_138451.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nHi Travis,\n\n> I'm uploading a review patch which just makes some documentation tweaks. Functionally it looks good. \n\nI fold your patch in trac_12518-*-final-*\n \n> However I would like those functions in `combinat/combinat.py` removed since they only exist in your patch (I grep'ed the patches in the queue and only found them in this patch), and I believe we don't need to follow the sage deprecation scheme within the combinat queue (please correct me if I'm wrong). If you're worried about it, I would place the functions in a separate patch.\n\nI removed it and I also delete the decorator on bruhat_succ adn bruhat_pred that was previously on the sage-combinat server.\n\n\nThanks,\nVincent",
    "created_at": "2012-12-06T07:41:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12518#issuecomment-138451",
    "user": "https://github.com/videlec"
}
```

<div id="comment:17" align="right">comment:17</div>

Hi Travis,

> I'm uploading a review patch which just makes some documentation tweaks. Functionally it looks good. 

I fold your patch in trac_12518-*-final-*
 
> However I would like those functions in `combinat/combinat.py` removed since they only exist in your patch (I grep'ed the patches in the queue and only found them in this patch), and I believe we don't need to follow the sage deprecation scheme within the combinat queue (please correct me if I'm wrong). If you're worried about it, I would place the functions in a separate patch.

I removed it and I also delete the decorator on bruhat_succ adn bruhat_pred that was previously on the sage-combinat server.


Thanks,
Vincent



---

archive/issue_comments_138452.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nHey Vincent,\n\nThanks. However there's one small mistake (and it's mine in the review patch, sorry) in the class doc for `EnumeratedSetFromIterator`, it should be `.. NOTE::`, the space is missing.\n\nBest,\n\nTravis\n\nEdit - Once you do this, feel free to set this to positive review.\n\nFor patchbot:\n\nApply only: trac_12518-enumerated_set_from_iterator-final.patch",
    "created_at": "2012-12-06T08:58:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12518#issuecomment-138452",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:18" align="right">comment:18</div>

Hey Vincent,

Thanks. However there's one small mistake (and it's mine in the review patch, sorry) in the class doc for `EnumeratedSetFromIterator`, it should be `.. NOTE::`, the space is missing.

Best,

Travis

Edit - Once you do this, feel free to set this to positive review.

For patchbot:

Apply only: trac_12518-enumerated_set_from_iterator-final.patch



---

archive/issue_events_169708.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2012-12-06T09:34:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12518#event-169708"
}
```



---

archive/issue_events_169709.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2012-12-06T09:34:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12518#event-169709"
}
```



---

archive/issue_comments_138453.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nAll right... done",
    "created_at": "2012-12-06T09:34:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12518#issuecomment-138453",
    "user": "https://github.com/videlec"
}
```

<div id="comment:19" align="right">comment:19</div>

All right... done



---

archive/issue_comments_138454.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -11,6 +11,6 @@\n \n The patch depends on #12653 which allows to initialize a graph from a dictionnary of iterables.\n \n-Apply only:\n+For patchbot:\n \n-* trac_12518-enumerated_set_from_iterator-final.patch\n+Apply only: trac_12518-enumerated_set_from_iterator-final.patch\n``````\n",
    "created_at": "2012-12-06T12:28:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12518#issuecomment-138454",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -11,6 +11,6 @@
 
 The patch depends on #12653 which allows to initialize a graph from a dictionnary of iterables.
 
-Apply only:
+For patchbot:
 
-* trac_12518-enumerated_set_from_iterator-final.patch
+Apply only: trac_12518-enumerated_set_from_iterator-final.patch
``````




---

archive/issue_comments_138455.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\napply trac_12518-enumerated_set_from_iterator-final.patch\n\n(for patchbot)",
    "created_at": "2012-12-06T12:42:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12518#issuecomment-138455",
    "user": "https://github.com/videlec"
}
```

<div id="comment:21" align="right">comment:21</div>

apply trac_12518-enumerated_set_from_iterator-final.patch

(for patchbot)



---

archive/issue_events_169710.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2012-12-06T14:09:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12518#event-169710"
}
```



---

archive/issue_events_169711.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2012-12-06T14:09:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12518#event-169711"
}
```



---

archive/issue_comments_138456.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nThe following does not work\n\n```\nsage: from sage.sets.set_from_iterator import set_from_method\nsage: class A:\n...     a = 10\n...     @set_from_method\n...     def f(self):\n...         return xsrange(self.a)\nsage: a = A()\nsage: a.f()             # works perfectly\n{0, 1, 2, 3, 4, ...}\nsage: A.f(a)            # does not work at all\nTraceback (most recent call last):\n...\nTypeError: f() takes exactly 1 argument (2 given)\n```\n\nIt causes many problems with element classes which are Cython classes.\n\nI am on this. Sorry.\nVincent",
    "created_at": "2012-12-06T14:09:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12518#issuecomment-138456",
    "user": "https://github.com/videlec"
}
```

<div id="comment:22" align="right">comment:22</div>

The following does not work

```
sage: from sage.sets.set_from_iterator import set_from_method
sage: class A:
...     a = 10
...     @set_from_method
...     def f(self):
...         return xsrange(self.a)
sage: a = A()
sage: a.f()             # works perfectly
{0, 1, 2, 3, 4, ...}
sage: A.f(a)            # does not work at all
Traceback (most recent call last):
...
TypeError: f() takes exactly 1 argument (2 given)
```

It causes many problems with element classes which are Cython classes.

I am on this. Sorry.
Vincent



---

archive/issue_comments_138457.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\napply trac_12518-enumerated_set_from_iterator-final.patch\n\n(for patchbot)",
    "created_at": "2012-12-06T17:43:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12518#issuecomment-138457",
    "user": "https://github.com/videlec"
}
```

<div id="comment:23" align="right">comment:23</div>

apply trac_12518-enumerated_set_from_iterator-final.patch

(for patchbot)



---

archive/issue_events_169712.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2012-12-06T17:44:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12518#event-169712"
}
```



---

archive/issue_events_169713.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2012-12-06T17:44:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12518#event-169713"
}
```



---

archive/issue_comments_138458.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nHey Vincent,\n\nCould you remove all of your (commented) print statements and move the `DummyExampleForPicklingTest` into the doctest for `__init__()` where you use it?\n\nThanks,\n\nTravis",
    "created_at": "2012-12-06T17:50:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12518#issuecomment-138458",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:25" align="right">comment:25</div>

Hey Vincent,

Could you remove all of your (commented) print statements and move the `DummyExampleForPicklingTest` into the doctest for `__init__()` where you use it?

Thanks,

Travis



---

archive/issue_comments_138459.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nHey Travis,\n\n> Could you remove all of your (commented) print statements\n\nThis I can.\n\n> and move the `DummyExampleForPicklingTest` into the doctest for `__init__()` where you use it?\n\nDo you mean put the whole class DummyExampleForPicklingTest into the doctest ? If it is the case, I can not because pickling classes defined in an interactive console is not (easily) possible.\n\nCheers,\nVincent",
    "created_at": "2012-12-06T18:01:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12518#issuecomment-138459",
    "user": "https://github.com/videlec"
}
```

<div id="comment:26" align="right">comment:26</div>

Hey Travis,

> Could you remove all of your (commented) print statements

This I can.

> and move the `DummyExampleForPicklingTest` into the doctest for `__init__()` where you use it?

Do you mean put the whole class DummyExampleForPicklingTest into the doctest ? If it is the case, I can not because pickling classes defined in an interactive console is not (easily) possible.

Cheers,
Vincent



---

archive/issue_comments_138460.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@videlec](#comment:26):\n> > and move the `DummyExampleForPicklingTest` into the doctest for `__init__()` where you use it?\n\n> \n> Do you mean put the whole class DummyExampleForPicklingTest into the doctest ? If it is the case, I can not because pickling classes defined in an interactive console is not (easily) possible.\n\nAh okay, then a quick doctest for the `f()` method and something like:\n\n```\n.. WARNING::\n\n    This class is used for pickling tests only. Do not use.\n```\ndocstring for the class. Thanks.",
    "created_at": "2012-12-06T18:16:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12518#issuecomment-138460",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@videlec](#comment:26):
> > and move the `DummyExampleForPicklingTest` into the doctest for `__init__()` where you use it?

> 
> Do you mean put the whole class DummyExampleForPicklingTest into the doctest ? If it is the case, I can not because pickling classes defined in an interactive console is not (easily) possible.

Ah okay, then a quick doctest for the `f()` method and something like:

```
.. WARNING::

    This class is used for pickling tests only. Do not use.
```
docstring for the class. Thanks.



---

archive/issue_comments_138461.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nAttachment: **[trac_12518-enumerated_set_from_iterator-final.patch.gz](https://github.com/sagemath/sage/files/ticket12518/trac_12518-enumerated_set_from_iterator-final.patch.gz)**\n\napply trac_12518-enumerated_set_from_iterator-final.patch\n\n(for patchbot)",
    "created_at": "2012-12-06T18:26:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12518#issuecomment-138461",
    "user": "https://github.com/videlec"
}
```

<div id="comment:28" align="right">comment:28</div>

Attachment: **[trac_12518-enumerated_set_from_iterator-final.patch.gz](https://github.com/sagemath/sage/files/ticket12518/trac_12518-enumerated_set_from_iterator-final.patch.gz)**

apply trac_12518-enumerated_set_from_iterator-final.patch

(for patchbot)



---

archive/issue_events_169714.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2012-12-06T18:37:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12518#event-169714"
}
```



---

archive/issue_events_169715.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2012-12-06T18:37:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12518#event-169715"
}
```



---

archive/issue_comments_138462.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nLooks good to me now. Thanks Vincent.",
    "created_at": "2012-12-06T18:37:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12518#issuecomment-138462",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:29" align="right">comment:29</div>

Looks good to me now. Thanks Vincent.



---

archive/issue_comments_138463.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nReplying to [@tscrim](#comment:29):\n> Looks good to me now. Thanks Vincent.\n\nThanks for your review !",
    "created_at": "2012-12-07T07:39:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12518#issuecomment-138463",
    "user": "https://github.com/videlec"
}
```

<div id="comment:30" align="right">comment:30</div>

Replying to [@tscrim](#comment:29):
> Looks good to me now. Thanks Vincent.

Thanks for your review !



---

archive/issue_comments_138464.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\napply trac_12518-enumerated_set_from_iterator-final.patch trac_12518-enumerated_set_from_iterator-final_fix.patch\n\n(for patchbot)",
    "created_at": "2012-12-07T09:09:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12518#issuecomment-138464",
    "user": "https://github.com/videlec"
}
```

<div id="comment:31" align="right">comment:31</div>

apply trac_12518-enumerated_set_from_iterator-final.patch trac_12518-enumerated_set_from_iterator-final_fix.patch

(for patchbot)



---

archive/issue_comments_138465.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -13,4 +13,4 @@\n \n For patchbot:\n \n-Apply only: trac_12518-enumerated_set_from_iterator-final.patch\n+Apply only: trac_12518-enumerated_set_from_iterator-final.patch trac_12518-enumerated_set_from_iterator-final_fix.patch\n``````\n",
    "created_at": "2012-12-07T09:09:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12518#issuecomment-138465",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -13,4 +13,4 @@
 
 For patchbot:
 
-Apply only: trac_12518-enumerated_set_from_iterator-final.patch
+Apply only: trac_12518-enumerated_set_from_iterator-final.patch trac_12518-enumerated_set_from_iterator-final_fix.patch
``````




---

archive/issue_events_169716.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-12-18T13:09:05Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "milestone_number": null,
    "milestone_title": "sage-5.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12518#event-169716"
}
```



---

archive/issue_events_169717.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-12-18T13:09:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12518#event-169717"
}
```



---

archive/issue_comments_138466.json:
```json
{
    "body": "Changed dependencies from **#12653, #13778** to **#12653, #11795, #13778**",
    "created_at": "2012-12-18T13:09:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12518#issuecomment-138466",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#12653, #13778** to **#12653, #11795, #13778**



---

archive/issue_events_169718.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-12-27T10:35:04Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "milestone_number": null,
    "milestone_title": "sage-5.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12518#event-169718"
}
```



---

archive/issue_events_169719.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-12-27T10:35:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12518#event-169719"
}
```



---

archive/issue_comments_138467.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -11,6 +11,4 @@\n \n The patch depends on #12653 which allows to initialize a graph from a dictionnary of iterables.\n \n-For patchbot:\n-\n-Apply only: trac_12518-enumerated_set_from_iterator-final.patch trac_12518-enumerated_set_from_iterator-final_fix.patch\n+**Apply**: [attachment: trac_12518-enumerated_set_from_iterator-final.patch](https://github.com/sagemath/sage/files/ticket12518/trac_12518-enumerated_set_from_iterator-final.patch.gz) and [attachment: trac_12518-enumerated_set_from_iterator-final_fix.patch](https://github.com/sagemath/sage/files/ticket12518/trac_12518-enumerated_set_from_iterator-final_fix.patch.gz)\n``````\n",
    "created_at": "2012-12-29T19:46:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12518#issuecomment-138467",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -11,6 +11,4 @@
 
 The patch depends on #12653 which allows to initialize a graph from a dictionnary of iterables.
 
-For patchbot:
-
-Apply only: trac_12518-enumerated_set_from_iterator-final.patch trac_12518-enumerated_set_from_iterator-final_fix.patch
+**Apply**: [attachment: trac_12518-enumerated_set_from_iterator-final.patch](https://github.com/sagemath/sage/files/ticket12518/trac_12518-enumerated_set_from_iterator-final.patch.gz) and [attachment: trac_12518-enumerated_set_from_iterator-final_fix.patch](https://github.com/sagemath/sage/files/ticket12518/trac_12518-enumerated_set_from_iterator-final_fix.patch.gz)
``````




---

archive/issue_comments_138468.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\n[attachment: trac_12518-enumerated_set_from_iterator-final_fix.patch](https://github.com/sagemath/sage/files/ticket12518/trac_12518-enumerated_set_from_iterator-final_fix.patch.gz) is missing a commit message.",
    "created_at": "2012-12-30T09:22:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12518#issuecomment-138468",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:35" align="right">comment:35</div>

[attachment: trac_12518-enumerated_set_from_iterator-final_fix.patch](https://github.com/sagemath/sage/files/ticket12518/trac_12518-enumerated_set_from_iterator-final_fix.patch.gz) is missing a commit message.



---

archive/issue_events_169720.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-12-30T09:22:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12518#event-169720"
}
```



---

archive/issue_events_169721.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-12-30T09:22:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12518#event-169721"
}
```



---

archive/issue_comments_138469.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nAttachment: **[trac_12518-enumerated_set_from_iterator-final_fix.patch.gz](https://github.com/sagemath/sage/files/ticket12518/trac_12518-enumerated_set_from_iterator-final_fix.patch.gz)**\n\nReplying to [@jdemeyer](#comment:35):\n> [attachment: trac_12518-enumerated_set_from_iterator-final_fix.patch](https://github.com/sagemath/sage/files/ticket12518/trac_12518-enumerated_set_from_iterator-final_fix.patch.gz) is missing a commit message.\n\nThanks. Done.",
    "created_at": "2012-12-31T10:27:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12518#issuecomment-138469",
    "user": "https://github.com/videlec"
}
```

<div id="comment:36" align="right">comment:36</div>

Attachment: **[trac_12518-enumerated_set_from_iterator-final_fix.patch.gz](https://github.com/sagemath/sage/files/ticket12518/trac_12518-enumerated_set_from_iterator-final_fix.patch.gz)**

Replying to [@jdemeyer](#comment:35):
> [attachment: trac_12518-enumerated_set_from_iterator-final_fix.patch](https://github.com/sagemath/sage/files/ticket12518/trac_12518-enumerated_set_from_iterator-final_fix.patch.gz) is missing a commit message.

Thanks. Done.



---

archive/issue_events_169722.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-01T11:37:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12518#event-169722"
}
```



---

archive/issue_events_169723.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-01T11:37:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12518#event-169723"
}
```



---

archive/issue_comments_138470.json:
```json
{
    "body": "Merged: **sage-5.6.beta2**",
    "created_at": "2013-01-01T11:37:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12518#issuecomment-138470",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.6.beta2**



---

archive/issue_comments_138471.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nCould you please explain the motivation behind the doctests\n\n```\n        TESTS::\n\n            sage: from sage.sets.set_from_iterator import set_from_method\n            sage: from sage.structure.misc import getattr_from_other_class\n            sage: class A:\n            ...      stop = 10000\n            ...      @set_from_method\n            ...      def f(self,start):\n            ...          return xsrange(start,self.stop)\n            sage: a = A()\n            sage: getattr_from_other_class(a, A, 'f')(4)\n            {4, 5, 6, 7, 8, ...}\n\n            sage: class B:\n            ...      stop = 10000\n            ...      @set_from_method(category=FiniteEnumeratedSets())\n            ...      def f(self,start):\n            ...          return xsrange(start,self.stop)\n            sage: b = B()\n            sage: getattr_from_other_class(b, B, 'f')(2)\n            {2, 3, 4, 5, 6, ...}\n```\n\nHowever, the documentation of `getattr_from_other_class` says:\n\n```\n    If self is an instance of cls, raises an ``AttributeError``, to\n    avoid a double lookup. This function is intended to be called from\n    __getattr__, and so should not be called if name is an attribute\n    of self.\n```\n\nBut this is precisely what that doctest is doing! Due to a bug in `getattr_from_other_class` (see #17801), the `AttributeError` is not always raised when it should. The obvious fix for that bug gives doctest failures in the above doctests.",
    "created_at": "2015-02-18T11:28:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12518#issuecomment-138471",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:38" align="right">comment:38</div>

Could you please explain the motivation behind the doctests

```
        TESTS::

            sage: from sage.sets.set_from_iterator import set_from_method
            sage: from sage.structure.misc import getattr_from_other_class
            sage: class A:
            ...      stop = 10000
            ...      @set_from_method
            ...      def f(self,start):
            ...          return xsrange(start,self.stop)
            sage: a = A()
            sage: getattr_from_other_class(a, A, 'f')(4)
            {4, 5, 6, 7, 8, ...}

            sage: class B:
            ...      stop = 10000
            ...      @set_from_method(category=FiniteEnumeratedSets())
            ...      def f(self,start):
            ...          return xsrange(start,self.stop)
            sage: b = B()
            sage: getattr_from_other_class(b, B, 'f')(2)
            {2, 3, 4, 5, 6, ...}
```

However, the documentation of `getattr_from_other_class` says:

```
    If self is an instance of cls, raises an ``AttributeError``, to
    avoid a double lookup. This function is intended to be called from
    __getattr__, and so should not be called if name is an attribute
    of self.
```

But this is precisely what that doctest is doing! Due to a bug in `getattr_from_other_class` (see #17801), the `AttributeError` is not always raised when it should. The obvious fix for that bug gives doctest failures in the above doctests.



---

archive/issue_comments_138472.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nReplying to [@jdemeyer](#comment:38):\n> Could you please explain the motivation behind the doctests\n> ...\n\nNo idea. I guess it would be safe to replace them with `sage: A.f(a,4)` and `sage: B.f(b,2)`.",
    "created_at": "2015-02-18T12:06:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12518#issuecomment-138472",
    "user": "https://github.com/videlec"
}
```

<div id="comment:39" align="right">comment:39</div>

Replying to [@jdemeyer](#comment:38):
> Could you please explain the motivation behind the doctests
> ...

No idea. I guess it would be safe to replace them with `sage: A.f(a,4)` and `sage: B.f(b,2)`.
