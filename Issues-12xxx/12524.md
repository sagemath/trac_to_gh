# Issue 12524: Elliptic Curve latex method can create new latex commands by accident

archive/issues_012352.json:
```json
{
    "body": "\n```\nsage: K.<phi> = NumberField(x^2-x-1)\nsage: a = phi\nsage: E = EllipticCurve([0,0,a,27*a-43,-80*a+128])\nsage: latex(E)\ny^2 + \\phiy = x^3 + \\left(27 \\phi - 43\\right)x + \\left(-80 \\phi + 128\\right) \n```\n\nSee the `\\phiy`.  Not good\n\nAssignee: @jasongrout\n\nKeywords: latex, elliptic curve, sd51\n\nReviewer: Alex Ghitza\n\nAuthor: Fr\u00e9d\u00e9ric Chapoton\n\nMerged: sage-5.12.beta2\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/12524\n\n",
    "closed_at": "2013-08-16T21:17:30Z",
    "created_at": "2012-02-17T01:02:56Z",
    "labels": [
        "component: elliptic curves",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.12",
    "title": "Elliptic Curve latex method can create new latex commands by accident",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12524",
    "user": "https://github.com/williamstein"
}
```

```
sage: K.<phi> = NumberField(x^2-x-1)
sage: a = phi
sage: E = EllipticCurve([0,0,a,27*a-43,-80*a+128])
sage: latex(E)
y^2 + \phiy = x^3 + \left(27 \phi - 43\right)x + \left(-80 \phi + 128\right) 
```

See the `\phiy`.  Not good

Assignee: @jasongrout

Keywords: latex, elliptic curve, sd51

Reviewer: Alex Ghitza

Author: Frédéric Chapoton

Merged: sage-5.12.beta2

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/12524





---

archive/issue_events_039593.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/12524",
    "rename": {
        "from": "latex of var named phi next to a y is bad news.",
        "to": "Elliptic Curve latex method can create new latex commands by accident"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12524#event-39593"
}
```



---

archive/issue_comments_185060.json:
```json
{
    "body": "<a id='comment:1'></a>\nThis is not a problem about `latex()`.  \n\n```\nsage: var('phi,y')\n(phi, y)\nsage: phi*y\nphi*y\nsage: latex(phi*y)\n\\phi y\n```\nIt's a problem in `E.latex()`:\n\n```\n\n        elif b[2]:\n            s += \"+ %sy \"%a[2]\n```\nUmm, yeah.  Probably the intended use case is \n\n```\nsage: L.<z>=NumberField(x^2-x-1)\nsage: b = z\nsage: F = EllipticCurve([0,0,b,27*b-43,-80*b+128])\nsage: latex(F)\ny^2 + zy = x^3 + \\left(27 z - 43\\right)x + \\left(-80 z + 128\\right) \n```\nSo do you think that a one-whitespace change would fix this?  (Actually, there are a few similar places.)",
    "created_at": "2012-02-22T02:55:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12524#issuecomment-185060",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:1'></a>
This is not a problem about `latex()`.  

```
sage: var('phi,y')
(phi, y)
sage: phi*y
phi*y
sage: latex(phi*y)
\phi y
```
It's a problem in `E.latex()`:

```

        elif b[2]:
            s += "+ %sy "%a[2]
```
Umm, yeah.  Probably the intended use case is 

```
sage: L.<z>=NumberField(x^2-x-1)
sage: b = z
sage: F = EllipticCurve([0,0,b,27*b-43,-80*b+128])
sage: latex(F)
y^2 + zy = x^3 + \left(27 z - 43\right)x + \left(-80 z + 128\right) 
```
So do you think that a one-whitespace change would fix this?  (Actually, there are a few similar places.)



---

archive/issue_comments_185061.json:
```json
{
    "body": "<a id='comment:2'></a>\nSorry, `E._latex_()`.",
    "created_at": "2012-02-22T02:55:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12524#issuecomment-185061",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:2'></a>
Sorry, `E._latex_()`.



---

archive/issue_comments_185062.json:
```json
{
    "body": "<a id='comment:3'></a>\nAttachment [trac_12524_latex_elliptic.patch](tarball://root/attachments/some-uuid/ticket12524/trac_12524_latex_elliptic.patch) by @fchapoton created at 2013-07-23 09:18:46\n\nHere is a proposal, needs review",
    "created_at": "2013-07-23T09:18:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12524#issuecomment-185062",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:3'></a>
Attachment [trac_12524_latex_elliptic.patch](tarball://root/attachments/some-uuid/ticket12524/trac_12524_latex_elliptic.patch) by @fchapoton created at 2013-07-23 09:18:46

Here is a proposal, needs review



---

archive/issue_comments_185063.json:
```json
{
    "body": "Changing author from \"\" to \"Fr\u00e9d\u00e9ric Chapoton\"",
    "created_at": "2013-07-23T09:18:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12524#issuecomment-185063",
    "user": "https://github.com/fchapoton"
}
```

Changing author from "" to "Frédéric Chapoton"



---

archive/issue_comments_185064.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-07-23T09:18:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12524#issuecomment-185064",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_185065.json:
```json
{
    "body": "Changing keywords from \"\" to \"latex, elliptic curve\".",
    "created_at": "2013-07-23T09:18:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12524#issuecomment-185065",
    "user": "https://github.com/fchapoton"
}
```

Changing keywords from "" to "latex, elliptic curve".



---

archive/issue_comments_185066.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Alex Ghitza\"",
    "created_at": "2013-07-23T13:26:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12524#issuecomment-185066",
    "user": "https://github.com/aghitza"
}
```

Changing reviewer from "" to "Alex Ghitza"



---

archive/issue_comments_185067.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-07-23T13:26:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12524#issuecomment-185067",
    "user": "https://github.com/aghitza"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_185068.json:
```json
{
    "body": "Changing keywords from \"latex, elliptic curve\" to \"latex, elliptic curve, sd51\".",
    "created_at": "2013-07-23T13:26:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12524#issuecomment-185068",
    "user": "https://github.com/aghitza"
}
```

Changing keywords from "latex, elliptic curve" to "latex, elliptic curve, sd51".



---

archive/issue_events_039594.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-07-24T06:25:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12524",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12524#event-39594"
}
```



---

archive/issue_comments_185069.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-5.12.beta2\"",
    "created_at": "2013-08-16T21:17:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12524#issuecomment-185069",
    "user": "https://github.com/jdemeyer"
}
```

Changing merged from "" to "sage-5.12.beta2"



---

archive/issue_comments_185070.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-08-16T21:17:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12524#issuecomment-185070",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_039595.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-16T21:17:30Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12524",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12524#event-39595"
}
```
