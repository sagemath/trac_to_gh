# Issue 12246: Wiener index without dictionary

archive/issues_012074.json:
```json
{
    "body": "This patch implements the wiener index function without using the costly and useless dictionary. It has been prepared using sage-4.8.alpha5 and depends on patch #12244.\n\nThis is my first patch.\n\nApply:\n* [attachment:wiener_index.patch]\n\nRequires:\n* #12244\n\n**Assignee:** @jasongrout, @nathanncohen, @rlmill\n\n**CC:**  @nathanncohen\n\n**Dependencies:** #12244\n\n**Author:** David Coudert\n\n**Reviewer:** Nathann Cohen\n\n**Merged:** sage-5.0.beta1\n\nIssue created by migration from https://trac.sagemath.org/ticket/12246\n\n",
    "closed_at": "2012-01-18T08:16:35Z",
    "created_at": "2012-01-02T14:07:44Z",
    "labels": [
        "component: graph theory",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.0",
    "title": "Wiener index without dictionary",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12246",
    "user": "https://github.com/dcoudert"
}
```
This patch implements the wiener index function without using the costly and useless dictionary. It has been prepared using sage-4.8.alpha5 and depends on patch #12244.

This is my first patch.

Apply:
* [attachment:wiener_index.patch]

Requires:
* #12244

**Assignee:** @jasongrout, @nathanncohen, @rlmill

**CC:**  @nathanncohen

**Dependencies:** #12244

**Author:** David Coudert

**Reviewer:** Nathann Cohen

**Merged:** sage-5.0.beta1

Issue created by migration from https://trac.sagemath.org/ticket/12246





---

archive/issue_events_102192.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2012-01-02T14:12:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/12246",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12246#event-102192"
}
```



---

archive/issue_comments_136329.json:
```json
{
    "body": "<a id='comment:3'></a>\nThe patch should be better now.\nHowever, I'm fighting with &\u00e9@$@&@ references. Several functions are referencing exactly the same papers and so we have some duplication. The only solution I have found to remove the warnings when building the documentation is to use alternative bib key entries, but I'm not sure its the best option and so I have let the warnings.",
    "created_at": "2012-01-02T15:48:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12246",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12246#issuecomment-136329",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:3'></a>
The patch should be better now.
However, I'm fighting with &Ã©@$@&@ references. Several functions are referencing exactly the same papers and so we have some duplication. The only solution I have found to remove the warnings when building the documentation is to use alternative bib key entries, but I'm not sure its the best option and so I have let the warnings.



---

archive/issue_comments_136330.json:
```json
{
    "body": "<a id='comment:4'></a>\nHelloooooooo !!!\n\nI think I had the same problem a looong time ago, and I probably chosed the nasty way out. What happens when you cite the paper while not defining them in the same function ? Are the links broken, or fo they redirect toward the other function's references ?\nThe release manager is wise but his wrath is terrifying. In particular, he does not like warnings, so we should avoid that `:-D`\nBy the way (and I know that the difference in runtime is very small), it is easier to check whether a graph is connected than to count the number of connected components. So in the process, could you replace ``self.connected_components_number() == 1`` by ``self.is_connected()`` ?\n\nIf the references are broken when you cite in one method the references defined in another one, I'd say that duplicating them and changing the name (add a number at the end, or a letter) is not thaaaaaat bad anyway `:-)`\n\nNathann",
    "created_at": "2012-01-02T15:57:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12246",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12246#issuecomment-136330",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:4'></a>
Helloooooooo !!!

I think I had the same problem a looong time ago, and I probably chosed the nasty way out. What happens when you cite the paper while not defining them in the same function ? Are the links broken, or fo they redirect toward the other function's references ?
The release manager is wise but his wrath is terrifying. In particular, he does not like warnings, so we should avoid that `:-D`
By the way (and I know that the difference in runtime is very small), it is easier to check whether a graph is connected than to count the number of connected components. So in the process, could you replace ``self.connected_components_number() == 1`` by ``self.is_connected()`` ?

If the references are broken when you cite in one method the references defined in another one, I'd say that duplicating them and changing the name (add a number at the end, or a letter) is not thaaaaaat bad anyway `:-)`

Nathann



---

archive/issue_comments_136331.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,9 @@\n This patch implements the wiener index function without using the costly and useless dictionary. It has been prepared using sage-4.8.alpha5 and depends on patch #12244.\n \n This is my first patch.\n+\n+Apply:\n+* [attachment:wiener_index.patch]\n+\n+Requires:\n+* #12244\n``````\n",
    "created_at": "2012-01-02T16:04:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12246",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12246#issuecomment-136331",
    "user": "https://github.com/nathanncohen"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,9 @@
 This patch implements the wiener index function without using the costly and useless dictionary. It has been prepared using sage-4.8.alpha5 and depends on patch #12244.
 
 This is my first patch.
+
+Apply:
+* [attachment:wiener_index.patch]
+
+Requires:
+* #12244
``````




---

archive/issue_comments_136332.json:
```json
{
    "body": "<a id='comment:5'></a>\nOh, and two other things :\n* The \"commit message\" of the patch you send must begin with \"trac #12246 -- explanation of what the ticket does\"\n* When there are several patches to be applied, or when there are dependencies, it should be explicitely said in the ticket's description.\n\nThe reason behind 1) is that there is a script using this information to create the list of contributions (and contributors) for each release, and most importantly that the release manager prefers it this way `:-D`\n\nThe reason behind 2) is that there is a program we call the \"sagebot\" (cf. the circle you can see on this page, just near the ticket's title) that uses this information to automatically apply the tickets and check the tests pass.\n\nLast thing --> The ticket's \"type\" is \"enhancement\".",
    "created_at": "2012-01-02T16:04:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12246",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12246#issuecomment-136332",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:5'></a>
Oh, and two other things :
* The "commit message" of the patch you send must begin with "trac #12246 -- explanation of what the ticket does"
* When there are several patches to be applied, or when there are dependencies, it should be explicitely said in the ticket's description.

The reason behind 1) is that there is a script using this information to create the list of contributions (and contributors) for each release, and most importantly that the release manager prefers it this way `:-D`

The reason behind 2) is that there is a program we call the "sagebot" (cf. the circle you can see on this page, just near the ticket's title) that uses this information to automatically apply the tickets and check the tests pass.

Last thing --> The ticket's "type" is "enhancement".



---

archive/issue_events_102193.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-01-02T16:04:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/12246",
    "label": "enhancement",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12246#event-102193"
}
```



---

archive/issue_comments_136333.json:
```json
{
    "body": "<a id='comment:6'></a>\nI tried to make all mentioned improvements. \nIs it better now ?\nBest,\nDavid.",
    "created_at": "2012-01-02T16:24:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12246",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12246#issuecomment-136333",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:6'></a>
I tried to make all mentioned improvements. 
Is it better now ?
Best,
David.



---

archive/issue_comments_136334.json:
```json
{
    "body": "<a id='comment:7'></a>\nWell, the wiener_index function from distances_all_pairs.pyx still returns wrong result on disconnected graph, so it would be better to move the test there to avoid any problem `^^;`\n\nShort of this, all tests pass !\n\nNathann",
    "created_at": "2012-01-02T16:40:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12246",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12246#issuecomment-136334",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:7'></a>
Well, the wiener_index function from distances_all_pairs.pyx still returns wrong result on disconnected graph, so it would be better to move the test there to avoid any problem `^^;`

Short of this, all tests pass !

Nathann



---

archive/issue_comments_136335.json:
```json
{
    "body": "<a id='comment:8'></a>\nI have moved the test to the distances_all_pairs.pyx file.\nShould be ok now.",
    "created_at": "2012-01-02T17:07:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12246",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12246#issuecomment-136335",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:8'></a>
I have moved the test to the distances_all_pairs.pyx file.
Should be ok now.



---

archive/issue_comments_136336.json:
```json
{
    "body": "**Reviewer:** Nathann Cohen",
    "created_at": "2012-01-02T17:15:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12246",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12246#issuecomment-136336",
    "user": "https://github.com/nathanncohen"
}
```

**Reviewer:** Nathann Cohen



---

archive/issue_comments_136337.json:
```json
{
    "body": "**Author:** David Coudert",
    "created_at": "2012-01-02T17:15:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12246",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12246#issuecomment-136337",
    "user": "https://github.com/nathanncohen"
}
```

**Author:** David Coudert



---

archive/issue_comments_136338.json:
```json
{
    "body": "<a id='comment:9'></a>\nYeeeeeepeeeeeeeeee !!\n\nPasses all tests, everything looks fine, good to go ! `:-)`\n\nCongratulations ! `^^`\n\nNathann",
    "created_at": "2012-01-02T17:15:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12246",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12246#issuecomment-136338",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:9'></a>
Yeeeeeepeeeeeeeeee !!

Passes all tests, everything looks fine, good to go ! `:-)`

Congratulations ! `^^`

Nathann



---

archive/issue_events_102194.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-01-02T17:15:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/12246",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12246#event-102194"
}
```



---

archive/issue_events_102195.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-01-02T17:15:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/12246",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12246#event-102195"
}
```



---

archive/issue_comments_136339.json:
```json
{
    "body": "<a id='comment:10'></a>\nThank you Nathann, this is my first patch !\nD.",
    "created_at": "2012-01-02T17:16:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12246",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12246#issuecomment-136339",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:10'></a>
Thank you Nathann, this is my first patch !
D.



---

archive/issue_events_102196.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-05T22:13:41Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/12246",
    "rename": {
        "from": "Wiener index without dictionnary",
        "to": "Wiener index without dictionary"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12246#event-102196"
}
```



---

archive/issue_comments_136340.json:
```json
{
    "body": "<a id='comment:12'></a>\nThank you for the correction.\nIn french it is \"dictionnaire\" with 2 n.\nBest,\nDavid.",
    "created_at": "2012-01-05T22:18:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12246",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12246#issuecomment-136340",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:12'></a>
Thank you for the correction.
In french it is "dictionnaire" with 2 n.
Best,
David.



---

archive/issue_comments_136341.json:
```json
{
    "body": "<a id='comment:13'></a>\nA small comment about the patch: the commit message (edited by `hg qrefresh -e` if you use Mercurial queues) now is one long line.  It should be broken up into several shorter lines.  Make sure the first line makes sense by itself.  And remove \"Dependency: #12244\" which should not be in the commit message.",
    "created_at": "2012-01-09T23:36:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12246",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12246#issuecomment-136341",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'></a>
A small comment about the patch: the commit message (edited by `hg qrefresh -e` if you use Mercurial queues) now is one long line.  It should be broken up into several shorter lines.  Make sure the first line makes sense by itself.  And remove "Dependency: #12244" which should not be in the commit message.



---

archive/issue_events_102197.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-09T23:36:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/12246",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12246#event-102197"
}
```



---

archive/issue_events_102198.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-09T23:36:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/12246",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12246#event-102198"
}
```



---

archive/issue_comments_136342.json:
```json
{
    "body": "improvement of the commit message",
    "created_at": "2012-01-10T00:20:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12246",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12246#issuecomment-136342",
    "user": "https://github.com/dcoudert"
}
```

improvement of the commit message



---

archive/attachments_016415.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "wiener_index.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket12246/wiener_index.patch",
    "created_at": "2012-01-10T00:22:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12246",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/dcoudert"
}
```



---

archive/issue_comments_136343.json:
```json
{
    "body": "<a id='comment:14'></a>\nI have changed the commit message as recommended.\nI have also updated the comments in the function to use no more than 80 chars per lines.\nI hope it better fits the standard now.\nThank you,\nDavid.",
    "created_at": "2012-01-10T00:22:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12246",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12246#issuecomment-136343",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:14'></a>
I have changed the commit message as recommended.
I have also updated the comments in the function to use no more than 80 chars per lines.
I hope it better fits the standard now.
Thank you,
David.



---

archive/issue_events_102199.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-01-10T07:44:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/12246",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12246#event-102199"
}
```



---

archive/issue_events_102200.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-01-10T07:44:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/12246",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12246#event-102200"
}
```



---

archive/issue_comments_136344.json:
```json
{
    "body": "<a id='comment:15'></a>\n(otherwise it will never be merged) `:-)`",
    "created_at": "2012-01-10T07:44:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12246",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12246#issuecomment-136344",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:15'></a>
(otherwise it will never be merged) `:-)`



---

archive/issue_comments_136345.json:
```json
{
    "body": "**Merged:** sage-5.0.beta1",
    "created_at": "2012-01-18T08:16:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12246",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12246#issuecomment-136345",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.0.beta1



---

archive/issue_events_102201.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-18T08:16:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/12246",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12246#event-102201"
}
```



---

archive/issue_events_102202.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-18T08:16:35Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12246",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12246#event-102202"
}
```
