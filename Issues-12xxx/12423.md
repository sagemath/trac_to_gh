# Issue 12423: Numpy wrongly assumes that any non-i386 OS X system is PowerPC

archive/issues_012251.json:
```json
{
    "body": "Apparently Numpy forgot about the existence of \"x86_64\" systems:\n\n```\nPython 2.7.2 (default, Feb  3 2012, 15:29:15)\n[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> from distutils.util import get_platform\n>>> get_platform()\n'macosx-10.6-x86_64'\n```\n\nThe bug is in `src/numpy/distutils/system_info.py`:\n\n```\n        if sys.platform=='darwin' and not os.environ.get('ATLAS',None):\n            args = []\n            link_args = []\n            if get_platform()[-4:] == 'i386':\n                intel = 1\n            else:\n                intel = 0\n            if os.path.exists('/System/Library/Frameworks/Accelerate.framework/'):\n                if intel:\n                    args.extend(['-msse3'])\n                else:\n                    args.extend(['-faltivec'])\n                link_args.extend(['-Wl,-framework','-Wl,Accelerate'])\n```\n\nThis is already fixed upstream, see [http://projects.scipy.org/numpy/ticket/2039](http://projects.scipy.org/numpy/ticket/2039).  We apply the upstream fix.\n\n**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/numpy-1.5.1.p1.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/numpy-1.5.1.p1.spkg)\n\nAssignee: tbd\n\nResolution: fixed\n\nAuthor: Jeroen Demeyer\n\nReviewer: William Stein\n\nUpstream: Fixed upstream, but not in a stable release.\n\nMerged: sage-5.0.beta5\n\nIssue created by migration from https://trac.sagemath.org/ticket/12423\n\n",
    "closed_at": "2012-02-22T10:46:03Z",
    "created_at": "2012-02-03T23:43:18Z",
    "labels": [
        "component: packages: standard",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.0",
    "title": "Numpy wrongly assumes that any non-i386 OS X system is PowerPC",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12423",
    "user": "https://github.com/jdemeyer"
}
```
Apparently Numpy forgot about the existence of "x86_64" systems:

```
Python 2.7.2 (default, Feb  3 2012, 15:29:15)
[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> from distutils.util import get_platform
>>> get_platform()
'macosx-10.6-x86_64'
```

The bug is in `src/numpy/distutils/system_info.py`:

```
        if sys.platform=='darwin' and not os.environ.get('ATLAS',None):
            args = []
            link_args = []
            if get_platform()[-4:] == 'i386':
                intel = 1
            else:
                intel = 0
            if os.path.exists('/System/Library/Frameworks/Accelerate.framework/'):
                if intel:
                    args.extend(['-msse3'])
                else:
                    args.extend(['-faltivec'])
                link_args.extend(['-Wl,-framework','-Wl,Accelerate'])
```

This is already fixed upstream, see [http://projects.scipy.org/numpy/ticket/2039](http://projects.scipy.org/numpy/ticket/2039).  We apply the upstream fix.

**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/numpy-1.5.1.p1.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/numpy-1.5.1.p1.spkg)

Assignee: tbd

Resolution: fixed

Author: Jeroen Demeyer

Reviewer: William Stein

Upstream: Fixed upstream, but not in a stable release.

Merged: sage-5.0.beta5

Issue created by migration from https://trac.sagemath.org/ticket/12423





---

archive/issue_comments_151990.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -12,14 +12,21 @@\n The bug is in \\`src/numpy/distutils/system_info.py\\`:\n \n \\`\\`\\`\n-        if sys.platform=='darwin' and not os.environ.get('ATLAS',None):\n+os.environ.get('ATLAS',None):\n             args = []\n             link_args = []\n             if get_platform()[-4:] == 'i386':\n                 intel = 1\n             else:\n                 intel = 0\n+            if os.path.exists('/System/Library/Frameworks/Accelerate.framework/'):\n+                if intel:\n+                    args.extend(['-msse3'])\n+                else:\n+                    args.extend(['-faltivec'])\n+                link_args.extend(['-Wl,-framework','-Wl,Accelerate'])\n \\`\\`\\`\n+The above code is actually wrong is so many different ways that it should better be scrapped altogether.  However, I'm going for a minimal fix in this ticket, adding a check for \"x86\"64\".\n \n Upstream: Not yet reported upstream; Will do shortly.\n \n```\n",
    "created_at": "2012-02-03T23:44:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12423#issuecomment-151990",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -12,14 +12,21 @@
 The bug is in \`src/numpy/distutils/system_info.py\`:
 
 \`\`\`
-        if sys.platform=='darwin' and not os.environ.get('ATLAS',None):
+os.environ.get('ATLAS',None):
             args = []
             link_args = []
             if get_platform()[-4:] == 'i386':
                 intel = 1
             else:
                 intel = 0
+            if os.path.exists('/System/Library/Frameworks/Accelerate.framework/'):
+                if intel:
+                    args.extend(['-msse3'])
+                else:
+                    args.extend(['-faltivec'])
+                link_args.extend(['-Wl,-framework','-Wl,Accelerate'])
 \`\`\`
+The above code is actually wrong is so many different ways that it should better be scrapped altogether.  However, I'm going for a minimal fix in this ticket, adding a check for "x86"64".
 
 Upstream: Not yet reported upstream; Will do shortly.
 
```




---

archive/issue_comments_151991.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,32 @@\n+Apparently Numpy forgot about the existence of \"x86_64\" systems:\n \n+\\`\\`\\`\n+Python 2.7.2 (default, Feb  3 2012, 15:29:15)\n+[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin\n+Type \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n+>>> from distutils.util import get_platform\n+>>> get_platform()\n+'macosx-10.6-x86_64'\n+\\`\\`\\`\n+\n+The bug is in \\`src/numpy/distutils/system_info.py\\`:\n+\n+\\`\\`\\`\n+        if sys.platform=='darwin' and not os.environ.get('ATLAS',None):\n+            args = []\n+            link_args = []\n+            if get_platform()[-4:] == 'i386':\n+                intel = 1\n+            else:\n+                intel = 0\n+            if os.path.exists('/System/Library/Frameworks/Accelerate.framework/'):\n+                if intel:\n+                    args.extend(['-msse3'])\n+                else:\n+                    args.extend(['-faltivec'])\n+                link_args.extend(['-Wl,-framework','-Wl,Accelerate'])\n+\\`\\`\\`\n+The above code is actually wrong is so many different ways that it should better be scrapped altogether.  However, I'm going for a minimal fix in this ticket, adding a check for \"x86\"64\".\n \n Upstream: Not yet reported upstream; Will do shortly.\n \n```\n",
    "created_at": "2012-02-03T23:45:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12423#issuecomment-151991",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,32 @@
+Apparently Numpy forgot about the existence of "x86_64" systems:
 
+\`\`\`
+Python 2.7.2 (default, Feb  3 2012, 15:29:15)
+[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
+Type "help", "copyright", "credits" or "license" for more information.
+>>> from distutils.util import get_platform
+>>> get_platform()
+'macosx-10.6-x86_64'
+\`\`\`
+
+The bug is in \`src/numpy/distutils/system_info.py\`:
+
+\`\`\`
+        if sys.platform=='darwin' and not os.environ.get('ATLAS',None):
+            args = []
+            link_args = []
+            if get_platform()[-4:] == 'i386':
+                intel = 1
+            else:
+                intel = 0
+            if os.path.exists('/System/Library/Frameworks/Accelerate.framework/'):
+                if intel:
+                    args.extend(['-msse3'])
+                else:
+                    args.extend(['-faltivec'])
+                link_args.extend(['-Wl,-framework','-Wl,Accelerate'])
+\`\`\`
+The above code is actually wrong is so many different ways that it should better be scrapped altogether.  However, I'm going for a minimal fix in this ticket, adding a check for "x86"64".
 
 Upstream: Not yet reported upstream; Will do shortly.
 
```




---

archive/issue_comments_151992.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,32 @@\n+Apparently Numpy forgot about the existence of \"x86_64\" systems:\n \n+\\`\\`\\`\n+Python 2.7.2 (default, Feb  3 2012, 15:29:15)\n+[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin\n+Type \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n+>>> from distutils.util import get_platform\n+>>> get_platform()\n+'macosx-10.6-x86_64'\n+\\`\\`\\`\n+\n+The bug is in \\`src/numpy/distutils/system_info.py\\`:\n+\n+\\`\\`\\`\n+        if sys.platform=='darwin' and not os.environ.get('ATLAS',None):\n+            args = []\n+            link_args = []\n+            if get_platform()[-4:] == 'i386':\n+                intel = 1\n+            else:\n+                intel = 0\n+            if os.path.exists('/System/Library/Frameworks/Accelerate.framework/'):\n+                if intel:\n+                    args.extend(['-msse3'])\n+                else:\n+                    args.extend(['-faltivec'])\n+                link_args.extend(['-Wl,-framework','-Wl,Accelerate'])\n+\\`\\`\\`\n+The above code is actually wrong is so many different ways that it should better be scrapped altogether.  However, I'm going for a minimal fix in this ticket, adding a check for \"x86_64\".\n \n Upstream: Not yet reported upstream; Will do shortly.\n \n```\n",
    "created_at": "2012-02-03T23:45:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12423#issuecomment-151992",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,32 @@
+Apparently Numpy forgot about the existence of "x86_64" systems:
 
+\`\`\`
+Python 2.7.2 (default, Feb  3 2012, 15:29:15)
+[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
+Type "help", "copyright", "credits" or "license" for more information.
+>>> from distutils.util import get_platform
+>>> get_platform()
+'macosx-10.6-x86_64'
+\`\`\`
+
+The bug is in \`src/numpy/distutils/system_info.py\`:
+
+\`\`\`
+        if sys.platform=='darwin' and not os.environ.get('ATLAS',None):
+            args = []
+            link_args = []
+            if get_platform()[-4:] == 'i386':
+                intel = 1
+            else:
+                intel = 0
+            if os.path.exists('/System/Library/Frameworks/Accelerate.framework/'):
+                if intel:
+                    args.extend(['-msse3'])
+                else:
+                    args.extend(['-faltivec'])
+                link_args.extend(['-Wl,-framework','-Wl,Accelerate'])
+\`\`\`
+The above code is actually wrong is so many different ways that it should better be scrapped altogether.  However, I'm going for a minimal fix in this ticket, adding a check for "x86_64".
 
 Upstream: Not yet reported upstream; Will do shortly.
 
```




---

archive/issue_comments_151993.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,34 @@\n+Apparently Numpy forgot about the existence of \"x86_64\" systems:\n \n+\\`\\`\\`\n+Python 2.7.2 (default, Feb  3 2012, 15:29:15)\n+[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin\n+Type \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n+>>> from distutils.util import get_platform\n+>>> get_platform()\n+'macosx-10.6-x86_64'\n+\\`\\`\\`\n+\n+The bug is in \\`src/numpy/distutils/system_info.py\\`:\n+\n+\\`\\`\\`\n+        if sys.platform=='darwin' and not os.environ.get('ATLAS',None):\n+            args = []\n+            link_args = []\n+            if get_platform()[-4:] == 'i386':\n+                intel = 1\n+            else:\n+                intel = 0\n+            if os.path.exists('/System/Library/Frameworks/Accelerate.framework/'):\n+                if intel:\n+                    args.extend(['-msse3'])\n+                else:\n+                    args.extend(['-faltivec'])\n+                link_args.extend(['-Wl,-framework','-Wl,Accelerate'])\n+\\`\\`\\`\n+The above code is actually wrong is so many different ways that it should better be scrapped altogether.  However, I'm going for a minimal fix in this ticket, adding a check for \"x86_64\".\n+\n+**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/numpy-1.5.1.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/numpy-1.5.1.p0.spkg)\n \n Upstream: Not yet reported upstream; Will do shortly.\n \n```\n",
    "created_at": "2012-02-04T11:46:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12423#issuecomment-151993",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,34 @@
+Apparently Numpy forgot about the existence of "x86_64" systems:
 
+\`\`\`
+Python 2.7.2 (default, Feb  3 2012, 15:29:15)
+[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
+Type "help", "copyright", "credits" or "license" for more information.
+>>> from distutils.util import get_platform
+>>> get_platform()
+'macosx-10.6-x86_64'
+\`\`\`
+
+The bug is in \`src/numpy/distutils/system_info.py\`:
+
+\`\`\`
+        if sys.platform=='darwin' and not os.environ.get('ATLAS',None):
+            args = []
+            link_args = []
+            if get_platform()[-4:] == 'i386':
+                intel = 1
+            else:
+                intel = 0
+            if os.path.exists('/System/Library/Frameworks/Accelerate.framework/'):
+                if intel:
+                    args.extend(['-msse3'])
+                else:
+                    args.extend(['-faltivec'])
+                link_args.extend(['-Wl,-framework','-Wl,Accelerate'])
+\`\`\`
+The above code is actually wrong is so many different ways that it should better be scrapped altogether.  However, I'm going for a minimal fix in this ticket, adding a check for "x86_64".
+
+**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/numpy-1.5.1.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/numpy-1.5.1.p0.spkg)
 
 Upstream: Not yet reported upstream; Will do shortly.
 
```




---

archive/issue_comments_151994.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,36 @@\n+Apparently Numpy forgot about the existence of \"x86_64\" systems:\n \n+\\`\\`\\`\n+Python 2.7.2 (default, Feb  3 2012, 15:29:15)\n+[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin\n+Type \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n+>>> from distutils.util import get_platform\n+>>> get_platform()\n+'macosx-10.6-x86_64'\n+\\`\\`\\`\n+\n+The bug is in \\`src/numpy/distutils/system_info.py\\`:\n+\n+\\`\\`\\`\n+        if sys.platform=='darwin' and not os.environ.get('ATLAS',None):\n+            args = []\n+            link_args = []\n+            if get_platform()[-4:] == 'i386':\n+                intel = 1\n+            else:\n+                intel = 0\n+            if os.path.exists('/System/Library/Frameworks/Accelerate.framework/'):\n+                if intel:\n+                    args.extend(['-msse3'])\n+                else:\n+                    args.extend(['-faltivec'])\n+                link_args.extend(['-Wl,-framework','-Wl,Accelerate'])\n+\\`\\`\\`\n+The above code is actually wrong is so many different ways that it should better be scrapped altogether.  However, I'm going for a minimal fix in this ticket, adding a check for \"x86_64\".\n+\n+Reported upstream: [http://projects.scipy.org/numpy/ticket/2039](http://projects.scipy.org/numpy/ticket/2039)\n+\n+**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/numpy-1.5.1.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/numpy-1.5.1.p0.spkg)\n \n Upstream: Not yet reported upstream; Will do shortly.\n \n```\n",
    "created_at": "2012-02-04T12:00:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12423#issuecomment-151994",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,36 @@
+Apparently Numpy forgot about the existence of "x86_64" systems:
 
+\`\`\`
+Python 2.7.2 (default, Feb  3 2012, 15:29:15)
+[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
+Type "help", "copyright", "credits" or "license" for more information.
+>>> from distutils.util import get_platform
+>>> get_platform()
+'macosx-10.6-x86_64'
+\`\`\`
+
+The bug is in \`src/numpy/distutils/system_info.py\`:
+
+\`\`\`
+        if sys.platform=='darwin' and not os.environ.get('ATLAS',None):
+            args = []
+            link_args = []
+            if get_platform()[-4:] == 'i386':
+                intel = 1
+            else:
+                intel = 0
+            if os.path.exists('/System/Library/Frameworks/Accelerate.framework/'):
+                if intel:
+                    args.extend(['-msse3'])
+                else:
+                    args.extend(['-faltivec'])
+                link_args.extend(['-Wl,-framework','-Wl,Accelerate'])
+\`\`\`
+The above code is actually wrong is so many different ways that it should better be scrapped altogether.  However, I'm going for a minimal fix in this ticket, adding a check for "x86_64".
+
+Reported upstream: [http://projects.scipy.org/numpy/ticket/2039](http://projects.scipy.org/numpy/ticket/2039)
+
+**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/numpy-1.5.1.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/numpy-1.5.1.p0.spkg)
 
 Upstream: Not yet reported upstream; Will do shortly.
 
```




---

archive/issue_comments_151995.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,36 @@\n+Apparently Numpy forgot about the existence of \"x86_64\" systems:\n \n+\\`\\`\\`\n+Python 2.7.2 (default, Feb  3 2012, 15:29:15)\n+[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin\n+Type \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n+>>> from distutils.util import get_platform\n+>>> get_platform()\n+'macosx-10.6-x86_64'\n+\\`\\`\\`\n+\n+The bug is in \\`src/numpy/distutils/system_info.py\\`:\n+\n+\\`\\`\\`\n+        if sys.platform=='darwin' and not os.environ.get('ATLAS',None):\n+            args = []\n+            link_args = []\n+            if get_platform()[-4:] == 'i386':\n+                intel = 1\n+            else:\n+                intel = 0\n+            if os.path.exists('/System/Library/Frameworks/Accelerate.framework/'):\n+                if intel:\n+                    args.extend(['-msse3'])\n+                else:\n+                    args.extend(['-faltivec'])\n+                link_args.extend(['-Wl,-framework','-Wl,Accelerate'])\n+\\`\\`\\`\n+The above code is actually wrong in so many different ways that it should better be scrapped altogether.  However, I'm going for a minimal fix in this ticket, adding a check for \"x86_64\".  Let's also see what upstream says.\n+\n+Reported upstream: [http://projects.scipy.org/numpy/ticket/2039](http://projects.scipy.org/numpy/ticket/2039)\n+\n+**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/numpy-1.5.1.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/numpy-1.5.1.p0.spkg)\n \n Upstream: Not yet reported upstream; Will do shortly.\n \n```\n",
    "created_at": "2012-02-04T12:02:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12423#issuecomment-151995",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,36 @@
+Apparently Numpy forgot about the existence of "x86_64" systems:
 
+\`\`\`
+Python 2.7.2 (default, Feb  3 2012, 15:29:15)
+[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
+Type "help", "copyright", "credits" or "license" for more information.
+>>> from distutils.util import get_platform
+>>> get_platform()
+'macosx-10.6-x86_64'
+\`\`\`
+
+The bug is in \`src/numpy/distutils/system_info.py\`:
+
+\`\`\`
+        if sys.platform=='darwin' and not os.environ.get('ATLAS',None):
+            args = []
+            link_args = []
+            if get_platform()[-4:] == 'i386':
+                intel = 1
+            else:
+                intel = 0
+            if os.path.exists('/System/Library/Frameworks/Accelerate.framework/'):
+                if intel:
+                    args.extend(['-msse3'])
+                else:
+                    args.extend(['-faltivec'])
+                link_args.extend(['-Wl,-framework','-Wl,Accelerate'])
+\`\`\`
+The above code is actually wrong in so many different ways that it should better be scrapped altogether.  However, I'm going for a minimal fix in this ticket, adding a check for "x86_64".  Let's also see what upstream says.
+
+Reported upstream: [http://projects.scipy.org/numpy/ticket/2039](http://projects.scipy.org/numpy/ticket/2039)
+
+**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/numpy-1.5.1.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/numpy-1.5.1.p0.spkg)
 
 Upstream: Not yet reported upstream; Will do shortly.
 
```




---

archive/issue_comments_151996.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-02-04T12:08:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12423#issuecomment-151996",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_151997.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-02-10T12:52:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12423#issuecomment-151997",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_151998.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-02-10T13:01:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12423#issuecomment-151998",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_151999.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,35 @@\n+Apparently Numpy forgot about the existence of \"x86_64\" systems:\n \n+\\`\\`\\`\n+Python 2.7.2 (default, Feb  3 2012, 15:29:15)\n+[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin\n+Type \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n+>>> from distutils.util import get_platform\n+>>> get_platform()\n+'macosx-10.6-x86_64'\n+\\`\\`\\`\n+\n+The bug is in \\`src/numpy/distutils/system_info.py\\`:\n+\n+\\`\\`\\`\n+        if sys.platform=='darwin' and not os.environ.get('ATLAS',None):\n+            args = []\n+            link_args = []\n+            if get_platform()[-4:] == 'i386':\n+                intel = 1\n+            else:\n+                intel = 0\n+            if os.path.exists('/System/Library/Frameworks/Accelerate.framework/'):\n+                if intel:\n+                    args.extend(['-msse3'])\n+                else:\n+                    args.extend(['-faltivec'])\n+                link_args.extend(['-Wl,-framework','-Wl,Accelerate'])\n+\\`\\`\\`\n+\n+This is already fixed upstream, see [http://projects.scipy.org/numpy/ticket/2039](http://projects.scipy.org/numpy/ticket/2039).  We apply the upstream fix.\n+\n+**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/numpy-1.5.1.p1.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/numpy-1.5.1.p1.spkg)\n \n Upstream: Not yet reported upstream; Will do shortly.\n \n```\n",
    "created_at": "2012-02-10T13:01:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12423#issuecomment-151999",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,35 @@
+Apparently Numpy forgot about the existence of "x86_64" systems:
 
+\`\`\`
+Python 2.7.2 (default, Feb  3 2012, 15:29:15)
+[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
+Type "help", "copyright", "credits" or "license" for more information.
+>>> from distutils.util import get_platform
+>>> get_platform()
+'macosx-10.6-x86_64'
+\`\`\`
+
+The bug is in \`src/numpy/distutils/system_info.py\`:
+
+\`\`\`
+        if sys.platform=='darwin' and not os.environ.get('ATLAS',None):
+            args = []
+            link_args = []
+            if get_platform()[-4:] == 'i386':
+                intel = 1
+            else:
+                intel = 0
+            if os.path.exists('/System/Library/Frameworks/Accelerate.framework/'):
+                if intel:
+                    args.extend(['-msse3'])
+                else:
+                    args.extend(['-faltivec'])
+                link_args.extend(['-Wl,-framework','-Wl,Accelerate'])
+\`\`\`
+
+This is already fixed upstream, see [http://projects.scipy.org/numpy/ticket/2039](http://projects.scipy.org/numpy/ticket/2039).  We apply the upstream fix.
+
+**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/numpy-1.5.1.p1.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/numpy-1.5.1.p1.spkg)
 
 Upstream: Not yet reported upstream; Will do shortly.
 
```




---

archive/issue_comments_152000.json:
```json
{
    "body": "Diff for the numpy spkg, for review only",
    "created_at": "2012-02-10T13:02:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12423#issuecomment-152000",
    "user": "https://github.com/jdemeyer"
}
```

Diff for the numpy spkg, for review only



---

archive/issue_comments_152001.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-02-13T15:26:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12423#issuecomment-152001",
    "user": "https://github.com/williamstein"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_152002.json:
```json
{
    "body": "<a id='comment:11'></a>Attachment [numpy-1.5.1.p1.diff](tarball://root/attachments/some-uuid/ticket12423/numpy-1.5.1.p1.diff) by @williamstein created at 2012-02-13 15:26:29\n\nPlease remove everything from the patch that involves deleting support for Cygwin.  Though I'm now not gung ho about the future of porting Sage to Cygwin and using it, I definitely don't think we should start silently sneaking in removing bits of cygwin support left and right all over in Sage!  If somebody already did the work to figure out how to get numpy to build on Cygwin, let's not just delete that.  What if I'm wrong, and it turns out that some genius does get Sage working well on Cygwin (and if nothing else, deleting cygwin support should be a different ticket).\n\nThe actual change for OS X 10.7 seems to be:\n \n* general clean up SPKG.txt -- good!\n* test for \"intel\" or \"i386\" instead of just \"i386\" -- can't be bad.\n\nSo I think the cygwin deletions should be deleted from this patch, then this should get a positive review once somebody checks that it actually works. \n\nWilliam",
    "created_at": "2012-02-13T15:26:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12423#issuecomment-152002",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:11'></a>Attachment [numpy-1.5.1.p1.diff](tarball://root/attachments/some-uuid/ticket12423/numpy-1.5.1.p1.diff) by @williamstein created at 2012-02-13 15:26:29

Please remove everything from the patch that involves deleting support for Cygwin.  Though I'm now not gung ho about the future of porting Sage to Cygwin and using it, I definitely don't think we should start silently sneaking in removing bits of cygwin support left and right all over in Sage!  If somebody already did the work to figure out how to get numpy to build on Cygwin, let's not just delete that.  What if I'm wrong, and it turns out that some genius does get Sage working well on Cygwin (and if nothing else, deleting cygwin support should be a different ticket).

The actual change for OS X 10.7 seems to be:
 
* general clean up SPKG.txt -- good!
* test for "intel" or "i386" instead of just "i386" -- can't be bad.

So I think the cygwin deletions should be deleted from this patch, then this should get a positive review once somebody checks that it actually works. 

William



---

archive/issue_comments_152003.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2012-02-13T15:51:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12423#issuecomment-152003",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_152004.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [comment:11 was]:\n> Please remove everything from the patch that involves deleting support for Cygwin.\n\nThere is no such thing.  I am only removing the *patched* file, not the *patch*.  This is because I changed the spkg to use \"patch\" instead of \"cp\" to apply patches.  So it should still work as before on Cygwin (even though I haven't tested this).\n\n> The actual change for OS X 10.7 seems to be:\n>  \n> * general clean up SPKG.txt -- good!\n> * test for \"intel\" or \"i386\" instead of just \"i386\" -- can't be bad.\n> \n> So I think the cygwin deletions should be deleted from this patch, then this should get a positive review once somebody checks that it actually works. \n\nSince there is no problem with Cygwin and since it does actually work, I take this as \"positive_review\".",
    "created_at": "2012-02-13T15:51:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12423#issuecomment-152004",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>Replying to [comment:11 was]:
> Please remove everything from the patch that involves deleting support for Cygwin.

There is no such thing.  I am only removing the *patched* file, not the *patch*.  This is because I changed the spkg to use "patch" instead of "cp" to apply patches.  So it should still work as before on Cygwin (even though I haven't tested this).

> The actual change for OS X 10.7 seems to be:
>  
> * general clean up SPKG.txt -- good!
> * test for "intel" or "i386" instead of just "i386" -- can't be bad.
> 
> So I think the cygwin deletions should be deleted from this patch, then this should get a positive review once somebody checks that it actually works. 

Since there is no problem with Cygwin and since it does actually work, I take this as "positive_review".



---

archive/issue_comments_152005.json:
```json
{
    "body": "<a id='comment:13'></a>Replying to [comment:12 jdemeyer]:\n> Replying to [comment:11 was]:\n> > Please remove everything from the patch that involves deleting support for Cygwin.\n\n> There is no such thing.  I am only removing the *patched* file, not the *patch*.  This is because I changed the spkg to use \"patch\" instead of \"cp\" to apply patches.  So it should still work as before on Cygwin (even though I haven't tested this).\n> \n\n\nThanks for the clarification.  In fact, what you've done is really, really good. \n\n> > The actual change for OS X 10.7 seems to be:\n> >  \n> > * general clean up SPKG.txt -- good!\n> > * test for \"intel\" or \"i386\" instead of just \"i386\" -- can't be bad.\n> > \n> > So I think the cygwin deletions should be deleted from this patch, then this should get a positive review once somebody checks that it actually works. \n\n> Since there is no problem with Cygwin and since it does actually work, I take this as \"positive_review\".\n\nIndeed.  OK, positive_review.",
    "created_at": "2012-02-13T16:38:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12423#issuecomment-152005",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:13'></a>Replying to [comment:12 jdemeyer]:
> Replying to [comment:11 was]:
> > Please remove everything from the patch that involves deleting support for Cygwin.

> There is no such thing.  I am only removing the *patched* file, not the *patch*.  This is because I changed the spkg to use "patch" instead of "cp" to apply patches.  So it should still work as before on Cygwin (even though I haven't tested this).
> 


Thanks for the clarification.  In fact, what you've done is really, really good. 

> > The actual change for OS X 10.7 seems to be:
> >  
> > * general clean up SPKG.txt -- good!
> > * test for "intel" or "i386" instead of just "i386" -- can't be bad.
> > 
> > So I think the cygwin deletions should be deleted from this patch, then this should get a positive review once somebody checks that it actually works. 

> Since there is no problem with Cygwin and since it does actually work, I take this as "positive_review".

Indeed.  OK, positive_review.



---

archive/issue_comments_152006.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-02-22T10:46:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12423#issuecomment-152006",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_033368.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-22T10:46:03Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12423",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12423#event-33368"
}
```
