# Issue 12414: system-wide default color

archive/issues_012242.json:
```json
{
    "body": "It would be useful to have a system-wide default plotting color.  For example, when embedding in latex, you want all the default line colors that are now blue to be black instead.\n\nThis patch implements a sage.plot.colors.DEFAULTCOLOR variable that is used, instead of specifying blue in every object.\n\nThis patch avoids touching objects that don't have the default color blue so that it won't be very controversial.  Cleaning up the graphics in Sage is a much bigger project...\n\n**apply**: [attachment:trac-12414-defaultcolor.patch]\n\n**Assignee:** @jasongrout, @williamstein\n\n**CC:**  @kcrisman\n\n**Reviewer:** Karl-Dieter Crisman\n\n**Author:** Jason Grout\n\n**Status:** needs_info\n\nIssue created by migration from https://trac.sagemath.org/ticket/12414\n\n",
    "created_at": "2012-02-02T16:08:16Z",
    "labels": [
        "component: graphics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "system-wide default color",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12414",
    "user": "https://github.com/jasongrout"
}
```
It would be useful to have a system-wide default plotting color.  For example, when embedding in latex, you want all the default line colors that are now blue to be black instead.

This patch implements a sage.plot.colors.DEFAULTCOLOR variable that is used, instead of specifying blue in every object.

This patch avoids touching objects that don't have the default color blue so that it won't be very controversial.  Cleaning up the graphics in Sage is a much bigger project...

**apply**: [attachment:trac-12414-defaultcolor.patch]

**Assignee:** @jasongrout, @williamstein

**CC:**  @kcrisman

**Reviewer:** Karl-Dieter Crisman

**Author:** Jason Grout

**Status:** needs_info

Issue created by migration from https://trac.sagemath.org/ticket/12414





---

archive/issue_comments_181692.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2012-02-02T16:16:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12414#issuecomment-181692",
    "user": "https://github.com/jasongrout"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_181693.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,3 +3,5 @@\n This patch implements a sage.plot.colors.DEFAULTCOLOR variable that is used, instead of specifying blue in every object.\n \n This patch avoids touching objects that don't have the default color blue so that it won't be very controversial.  Cleaning up the graphics in Sage is a much bigger project...\n+\n+**apply**: [attachment:trac-12414-defaultcolor.patch]\n``````\n",
    "created_at": "2012-02-02T16:16:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12414#issuecomment-181693",
    "user": "https://github.com/jasongrout"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,3 +3,5 @@
 This patch implements a sage.plot.colors.DEFAULTCOLOR variable that is used, instead of specifying blue in every object.
 
 This patch avoids touching objects that don't have the default color blue so that it won't be very controversial.  Cleaning up the graphics in Sage is a much bigger project...
+
+**apply**: [attachment:trac-12414-defaultcolor.patch]
``````




---

archive/issue_comments_181694.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2012-02-02T16:18:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12414#issuecomment-181694",
    "user": "https://github.com/jasongrout"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_181695.json:
```json
{
    "body": "<a id='comment:2'></a>\nsome doctests are failing...",
    "created_at": "2012-02-02T16:18:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12414#issuecomment-181695",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:2'></a>
some doctests are failing...



---

archive/issue_comments_181696.json:
```json
{
    "body": "<a id='comment:3'></a>\nFixed the failing doctests.",
    "created_at": "2012-02-02T17:30:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12414#issuecomment-181696",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:3'></a>
Fixed the failing doctests.



---

archive/issue_comments_181697.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2012-02-02T17:30:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12414#issuecomment-181697",
    "user": "https://github.com/jasongrout"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_181698.json:
```json
{
    "body": "<a id='comment:4'></a>\nFound a few more failing doctests...",
    "created_at": "2012-02-02T17:41:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12414#issuecomment-181698",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:4'></a>
Found a few more failing doctests...



---

archive/issue_comments_181699.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2012-02-02T17:41:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12414#issuecomment-181699",
    "user": "https://github.com/jasongrout"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_181700.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2012-02-02T18:14:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12414#issuecomment-181700",
    "user": "https://github.com/jasongrout"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_181701.json:
```json
{
    "body": "<a id='comment:5'></a>\nAnd now all doctests in plot/ pass...",
    "created_at": "2012-02-02T18:14:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12414#issuecomment-181701",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:5'></a>
And now all doctests in plot/ pass...



---

archive/issue_comments_181702.json:
```json
{
    "body": "<a id='comment:6'></a>\nOk, this all makes sense to me (and a great idea!) and works well, apparently. \n\nI do except the 3D issues.    Can you explain to me the rationale for the changes in texture.py?  On a related note, I do feel like we're changing end-user use with requiring the `.rgb()` business. \n\nI'm not saying they're bad changes, but I don't see any particular reason (other than perhaps making doctests pass, which isn't quite sufficient by itself).  Just need explanation/justification.\n\nAlso, what formats should work?  I tried\n\n```\nsage: sage.plot.colors.DEFAULTCOLOR='black' \nsage: sage.plot.colors.DEFAULTCOLOR=(0,0,1)\n```\nand they worked.  What about hsv or something?  (Not that I know how we'd distinguish between them.)  Or hex?  Just wondering.",
    "created_at": "2012-02-02T18:36:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12414#issuecomment-181702",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:6'></a>
Ok, this all makes sense to me (and a great idea!) and works well, apparently. 

I do except the 3D issues.    Can you explain to me the rationale for the changes in texture.py?  On a related note, I do feel like we're changing end-user use with requiring the `.rgb()` business. 

I'm not saying they're bad changes, but I don't see any particular reason (other than perhaps making doctests pass, which isn't quite sufficient by itself).  Just need explanation/justification.

Also, what formats should work?  I tried

```
sage: sage.plot.colors.DEFAULTCOLOR='black' 
sage: sage.plot.colors.DEFAULTCOLOR=(0,0,1)
```
and they worked.  What about hsv or something?  (Not that I know how we'd distinguish between them.)  Or hex?  Just wondering.



---

archive/issue_comments_181703.json:
```json
{
    "body": "<a id='comment:7'></a>\nThe changes to the 3d plot parse_color are to make parse_color more consistent and also to get it to use the default color if the color is None.  Before, it returned a tuple if you passed in a Color, but it returned a Color if you passed in a string---not very consistent.  I made it so that it always returns a tuple, and it returns the default color if called with nothing (that's the call to to_mpl_color).\n\nAny format supported by any `color=` option should be supported. Strings, hex strings, rgb colors, color names, etc.",
    "created_at": "2012-02-02T18:41:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12414#issuecomment-181703",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:7'></a>
The changes to the 3d plot parse_color are to make parse_color more consistent and also to get it to use the default color if the color is None.  Before, it returned a tuple if you passed in a Color, but it returned a Color if you passed in a string---not very consistent.  I made it so that it always returns a tuple, and it returns the default color if called with nothing (that's the call to to_mpl_color).

Any format supported by any `color=` option should be supported. Strings, hex strings, rgb colors, color names, etc.



---

archive/issue_comments_181704.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2012-02-02T19:06:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12414#issuecomment-181704",
    "user": "https://github.com/kcrisman"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_181705.json:
```json
{
    "body": "<a id='comment:8'></a>\nI see.  In that case, you forgot to change the documentation!\n\n```\n\n       Parses the color.\n    \n       It transforms a valid color string into a color object and a color\n       object into an RBG tuple of length 3. Otherwise, it multiplies the\n       info by the base color.\n    \n```\n\n---\nOn the other issue - before:\n\n```\nsage: [t.color for t in G.texture_set()]\n[RGB color (1.0, 0.0, 0.0), RGB color (1.0, 0.0, 0.0), RGB color (1.0, 1.0, 0.0)]\n```\nafter:\n\n```\nsage: [t.color for t in G.texture_set()]\n[(1.0, 0.0, 0.0), (1.0, 0.0, 0.0), (1.0, 1.0, 0.0)]\n```\nThis really won't break anything in the initialization of `Texture` where this is used?\n\n---\nAlso, I just found a doctest typo, unnoticed because of the fact that `Texture` pretty much takes any input without complaining.  You didn't do this, but we should fix it here.\n\n```\n\n        sage: Texture(ambiant=0.7)\n        Texture(texture..., 6666ff)\n```",
    "created_at": "2012-02-02T19:06:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12414#issuecomment-181705",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:8'></a>
I see.  In that case, you forgot to change the documentation!

```

       Parses the color.
    
       It transforms a valid color string into a color object and a color
       object into an RBG tuple of length 3. Otherwise, it multiplies the
       info by the base color.
    
```

---
On the other issue - before:

```
sage: [t.color for t in G.texture_set()]
[RGB color (1.0, 0.0, 0.0), RGB color (1.0, 0.0, 0.0), RGB color (1.0, 1.0, 0.0)]
```
after:

```
sage: [t.color for t in G.texture_set()]
[(1.0, 0.0, 0.0), (1.0, 0.0, 0.0), (1.0, 1.0, 0.0)]
```
This really won't break anything in the initialization of `Texture` where this is used?

---
Also, I just found a doctest typo, unnoticed because of the fact that `Texture` pretty much takes any input without complaining.  You didn't do this, but we should fix it here.

```

        sage: Texture(ambiant=0.7)
        Texture(texture..., 6666ff)
```



---

archive/issue_comments_181706.json:
```json
{
    "body": "<a id='comment:9'></a>\nI'm waffling about whether I should back out the texture changes (I don't have time now to dive deeply into the 3d plotting).  What do you think?  I can just put an extra test in there that returns the default color if no color is passed in.\n\nI've attached a patch which takes care of the typo and docs.",
    "created_at": "2012-02-02T19:15:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12414#issuecomment-181706",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:9'></a>
I'm waffling about whether I should back out the texture changes (I don't have time now to dive deeply into the 3d plotting).  What do you think?  I can just put an extra test in there that returns the default color if no color is passed in.

I've attached a patch which takes care of the typo and docs.



---

archive/issue_comments_181707.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2012-02-02T19:15:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12414#issuecomment-181707",
    "user": "https://github.com/jasongrout"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_181708.json:
```json
{
    "body": "<a id='comment:10'></a>\nAttachment [trac-12414-defaultcolor.patch](tarball://root/attachments/some-uuid/ticket12414/trac-12414-defaultcolor.patch) by @kcrisman created at 2012-02-02 19:39:23\n\n> I'm waffling about whether I should back out the texture changes (I don't have time now to dive deeply into the 3d plotting).  What do you think?  I can just put an extra test in there that returns the default color if no color is passed in.\n\nI think that is the easier solution for now.  I assume that most people wouldn't care, but I think there was some method to the way it's returned, so that the same parsing function could be used in a few different contexts.  I don't know whether `parse_color` is used outside of the initialization of `Texture`, but I think it would be unfortunate for attributes of `Texture`s to change format without discussion somewhere by someone who uses them.\n\nIf you do change that back, please give the new patch a different name, because then we have this other fix still on Trac for easy reference later.\n\n> I've attached a patch which takes care of the typo and docs.\n\nExcept there was a typo there from before this ticket which I just noticed.  Aargh!\n\n```\nIt transforms a valid color description into an RBG tuple of \n```\nWhat is RBG, kcrisman?  Silly... This would be needed no matter how you deal with `parse_color`.",
    "created_at": "2012-02-02T19:39:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12414#issuecomment-181708",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:10'></a>
Attachment [trac-12414-defaultcolor.patch](tarball://root/attachments/some-uuid/ticket12414/trac-12414-defaultcolor.patch) by @kcrisman created at 2012-02-02 19:39:23

> I'm waffling about whether I should back out the texture changes (I don't have time now to dive deeply into the 3d plotting).  What do you think?  I can just put an extra test in there that returns the default color if no color is passed in.

I think that is the easier solution for now.  I assume that most people wouldn't care, but I think there was some method to the way it's returned, so that the same parsing function could be used in a few different contexts.  I don't know whether `parse_color` is used outside of the initialization of `Texture`, but I think it would be unfortunate for attributes of `Texture`s to change format without discussion somewhere by someone who uses them.

If you do change that back, please give the new patch a different name, because then we have this other fix still on Trac for easy reference later.

> I've attached a patch which takes care of the typo and docs.

Except there was a typo there from before this ticket which I just noticed.  Aargh!

```
It transforms a valid color description into an RBG tuple of 
```
What is RBG, kcrisman?  Silly... This would be needed no matter how you deal with `parse_color`.



---

archive/issue_comments_181709.json:
```json
{
    "body": "**Reviewer:** Karl-Dieter Crisman",
    "created_at": "2012-02-02T19:39:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12414#issuecomment-181709",
    "user": "https://github.com/kcrisman"
}
```

**Reviewer:** Karl-Dieter Crisman



---

archive/issue_comments_181710.json:
```json
{
    "body": "**Changing status** from needs_review to needs_info.",
    "created_at": "2012-02-03T02:50:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12414#issuecomment-181710",
    "user": "https://github.com/kcrisman"
}
```

**Changing status** from needs_review to needs_info.



---

archive/issue_comments_181711.json:
```json
{
    "body": "<a id='comment:11'></a>\nJust needing info on how it will proceed.",
    "created_at": "2012-02-03T02:50:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12414#issuecomment-181711",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:11'></a>
Just needing info on how it will proceed.



---

archive/issue_comments_181712.json:
```json
{
    "body": "<a id='comment:12'></a>\nI'll put up a new patch later; no time now...",
    "created_at": "2012-02-03T03:11:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12414#issuecomment-181712",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:12'></a>
I'll put up a new patch later; no time now...



---

archive/issue_comments_181713.json:
```json
{
    "body": "<a id='comment:13'></a>\nGetting back to this...where are we?  Should I back out the texture part?",
    "created_at": "2012-05-11T13:40:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12414#issuecomment-181713",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:13'></a>
Getting back to this...where are we?  Should I back out the texture part?



---

archive/issue_comments_181714.json:
```json
{
    "body": "<a id='comment:14'></a>\nI guess, except see #12904 which has positive review and makes a change to `parse_color` that might impact this.",
    "created_at": "2012-05-11T15:49:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12414#issuecomment-181714",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:14'></a>
I guess, except see #12904 which has positive review and makes a change to `parse_color` that might impact this.



---

archive/issue_events_039111.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12414",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12414#event-39111"
}
```



---

archive/issue_events_039112.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12414",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12414#event-39112"
}
```



---

archive/issue_events_039113.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12414",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12414#event-39113"
}
```



---

archive/issue_events_039114.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12414",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12414#event-39114"
}
```



---

archive/issue_events_039115.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12414",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12414#event-39115"
}
```



---

archive/issue_events_039116.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12414",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12414#event-39116"
}
```



---

archive/issue_events_039117.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12414",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12414#event-39117"
}
```
