# Issue 12171: Update MPFI to 1.5.1

archive/issues_011999.json:
```json
{
    "body": "This is needed for #11666.\n\nUse http://perso.telecom-paristech.fr/~flori/sage/mpfi-1.5.1.spkg\n\nApply first [attachment:trac_12171a.patch], then [attachment:trac_12171b.patch]\n\n**CC:**  cwitty @robertwb @jdemeyer jpflori\n\n**Keywords:** sd35 sd36\n\n**Dependencies:** #12131, #12353\n\n**Author:** Mike Hansen, Paul Zimmermann, Jean-Pierre Flori\n\n**Reviewer:** Fran\u00e7ois Bissey\n\n**Merged:** sage-5.0.beta6\n\nIssue created by migration from https://trac.sagemath.org/ticket/12171\n\n",
    "closed_at": "2012-02-27T11:21:32Z",
    "created_at": "2011-12-17T10:49:25Z",
    "labels": [
        "component: packages: standard",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.0",
    "title": "Update MPFI to 1.5.1",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/12171",
    "user": "https://github.com/mwhansen"
}
```
This is needed for #11666.

Use http://perso.telecom-paristech.fr/~flori/sage/mpfi-1.5.1.spkg

Apply first [attachment:trac_12171a.patch], then [attachment:trac_12171b.patch]

**CC:**  cwitty @robertwb @jdemeyer jpflori

**Keywords:** sd35 sd36

**Dependencies:** #12131, #12353

**Author:** Mike Hansen, Paul Zimmermann, Jean-Pierre Flori

**Reviewer:** Fran√ßois Bissey

**Merged:** sage-5.0.beta6

Issue created by migration from https://trac.sagemath.org/ticket/12171





---

archive/issue_events_098923.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2011-12-17T10:49:42Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "rename": {
        "from": "Update MPIR to 1.5.0",
        "to": "Update MPFI to 1.5.0"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12171#event-98923"
}
```



---

archive/issue_comments_132673.json:
```json
{
    "body": "<a id='comment:2'></a>\nThere is spkg at http://sage.math.washington.edu/home/mhansen/mpfi-1.5.0.spkg",
    "created_at": "2011-12-17T10:53:26Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132673",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:2'></a>
There is spkg at http://sage.math.washington.edu/home/mhansen/mpfi-1.5.0.spkg



---

archive/issue_events_098924.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2011-12-17T10:53:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12171#event-98924"
}
```



---

archive/issue_comments_132674.json:
```json
{
    "body": "<a id='comment:3'></a>\nHave you checked the following doctests:\n\n```\nsage -t -long \"devel/sage/sage/rings/qqbar.py\"              \n**********************************************************************\nFile \"/usr/share/sage/devel/sage/sage/rings/qqbar.py\", line 3808:\n    sage: (x-2).real_exact(RR)\nExpected:\n    0.000000000000000\nGot:\n    -0.000000000000000\n**********************************************************************\nFile \"/usr/share/sage/devel/sage/sage/rings/qqbar.py\", line 3810:\n    sage: (x-2).real_exact(RealField(53, rnd='RNDD'))\nExpected:\n    0.000000000000000\nGot:\n    -0.000000000000000\n**********************************************************************\nFile \"/usr/share/sage/devel/sage/sage/rings/qqbar.py\", line 3812:\n    sage: (x-2).real_exact(RealField(53, rnd='RNDU'))\nExpected:\n    0.000000000000000\nGot:\n    -0.000000000000000\n**********************************************************************\nFile \"/usr/share/sage/devel/sage/sage/rings/qqbar.py\", line 3814:\n    sage: (x-2).real_exact(RealField(53, rnd='RNDZ'))\nExpected:\n    0.000000000000000\nGot:\n    -0.000000000000000\n**********************************************************************\n1 items had failures:\n   4 of  20 in __main__.example_96\n***Test Failed*** 4 failures.\n```\nand\n\n```\nsage -t -long \"devel/sage/sage/rings/real_mpfi.pyx\"         \n**********************************************************************\nFile \"/usr/share/sage/devel/sage/sage/rings/real_mpfi.pyx\", line 1078:\n    sage: b = R(1)/R(0); b\nExpected:\n    [+infinity .. +infinity]\nGot:\n    [-infinity .. +infinity]\n**********************************************************************\nFile \"/usr/share/sage/devel/sage/sage/rings/real_mpfi.pyx\", line 1080:\n    sage: loads(dumps(b)) == b\nExpected:\n    True\nGot:\n    False\n**********************************************************************\nFile \"/usr/share/sage/devel/sage/sage/rings/real_mpfi.pyx\", line 1082:\n    sage: b = R(-1)/R(0); b\nExpected:\n    [-infinity .. -infinity]\nGot:\n    [-infinity .. +infinity]\n**********************************************************************\nFile \"/usr/share/sage/devel/sage/sage/rings/real_mpfi.pyx\", line 1084:\n    sage: loads(dumps(b)) == b\nExpected:\n    True\nGot:\n    False\n**********************************************************************\nFile \"/usr/share/sage/devel/sage/sage/rings/real_mpfi.pyx\", line 2360:\n    sage: R(1)/R(0)\nExpected:\n    [+infinity .. +infinity]\nGot:\n    [-infinity .. +infinity]\n**********************************************************************\nFile \"/usr/share/sage/devel/sage/sage/rings/real_mpfi.pyx\", line 3217:\n    sage: RIF(-1, 1).min(0).endpoints()\nExpected:\n    (-1.00000000000000, 0.000000000000000)\nGot:\n    (-1.00000000000000, -0.000000000000000)\n**********************************************************************\nFile \"/usr/share/sage/devel/sage/sage/rings/real_mpfi.pyx\", line 3221:\n    sage: RIF(-1, 1).min(0).endpoints()\nExpected:\n    (-1.00000000000000, 0.000000000000000)\nGot:\n    (-1.00000000000000, -0.000000000000000)\n**********************************************************************\n3 items had failures:\n   4 of  18 in __main__.example_29\n   1 of   8 in __main__.example_55\n   2 of   9 in __main__.example_80\n***Test Failed*** 7 failures.\n```\nI did those test about one year ago [https://github.com/cschwan/sage-on-gentoo/issues/30](https://github.com/cschwan/sage-on-gentoo/issues/30) so some things have probably changed a little bit but I expect you'll have to patch sage.",
    "created_at": "2011-12-17T18:44:17Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132674",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:3'></a>
Have you checked the following doctests:

```
sage -t -long "devel/sage/sage/rings/qqbar.py"              
**********************************************************************
File "/usr/share/sage/devel/sage/sage/rings/qqbar.py", line 3808:
    sage: (x-2).real_exact(RR)
Expected:
    0.000000000000000
Got:
    -0.000000000000000
**********************************************************************
File "/usr/share/sage/devel/sage/sage/rings/qqbar.py", line 3810:
    sage: (x-2).real_exact(RealField(53, rnd='RNDD'))
Expected:
    0.000000000000000
Got:
    -0.000000000000000
**********************************************************************
File "/usr/share/sage/devel/sage/sage/rings/qqbar.py", line 3812:
    sage: (x-2).real_exact(RealField(53, rnd='RNDU'))
Expected:
    0.000000000000000
Got:
    -0.000000000000000
**********************************************************************
File "/usr/share/sage/devel/sage/sage/rings/qqbar.py", line 3814:
    sage: (x-2).real_exact(RealField(53, rnd='RNDZ'))
Expected:
    0.000000000000000
Got:
    -0.000000000000000
**********************************************************************
1 items had failures:
   4 of  20 in __main__.example_96
***Test Failed*** 4 failures.
```
and

```
sage -t -long "devel/sage/sage/rings/real_mpfi.pyx"         
**********************************************************************
File "/usr/share/sage/devel/sage/sage/rings/real_mpfi.pyx", line 1078:
    sage: b = R(1)/R(0); b
Expected:
    [+infinity .. +infinity]
Got:
    [-infinity .. +infinity]
**********************************************************************
File "/usr/share/sage/devel/sage/sage/rings/real_mpfi.pyx", line 1080:
    sage: loads(dumps(b)) == b
Expected:
    True
Got:
    False
**********************************************************************
File "/usr/share/sage/devel/sage/sage/rings/real_mpfi.pyx", line 1082:
    sage: b = R(-1)/R(0); b
Expected:
    [-infinity .. -infinity]
Got:
    [-infinity .. +infinity]
**********************************************************************
File "/usr/share/sage/devel/sage/sage/rings/real_mpfi.pyx", line 1084:
    sage: loads(dumps(b)) == b
Expected:
    True
Got:
    False
**********************************************************************
File "/usr/share/sage/devel/sage/sage/rings/real_mpfi.pyx", line 2360:
    sage: R(1)/R(0)
Expected:
    [+infinity .. +infinity]
Got:
    [-infinity .. +infinity]
**********************************************************************
File "/usr/share/sage/devel/sage/sage/rings/real_mpfi.pyx", line 3217:
    sage: RIF(-1, 1).min(0).endpoints()
Expected:
    (-1.00000000000000, 0.000000000000000)
Got:
    (-1.00000000000000, -0.000000000000000)
**********************************************************************
File "/usr/share/sage/devel/sage/sage/rings/real_mpfi.pyx", line 3221:
    sage: RIF(-1, 1).min(0).endpoints()
Expected:
    (-1.00000000000000, 0.000000000000000)
Got:
    (-1.00000000000000, -0.000000000000000)
**********************************************************************
3 items had failures:
   4 of  18 in __main__.example_29
   1 of   8 in __main__.example_55
   2 of   9 in __main__.example_80
***Test Failed*** 7 failures.
```
I did those test about one year ago [https://github.com/cschwan/sage-on-gentoo/issues/30](https://github.com/cschwan/sage-on-gentoo/issues/30) so some things have probably changed a little bit but I expect you'll have to patch sage.



---

archive/issue_comments_132675.json:
```json
{
    "body": "<a id='comment:4'></a>\nby the way, MPFI 1.5.0 fixes a limitation to 1000 characters in `mpfi_set_str`, which can be\ndemonstrated by the following test:\n\n```\nsage: R = RealIntervalField(53)\nsage: R(\"1\" * 1000)\n1.111111111111112?e999\n```\nwhich failed previously. Maybe add a test for that?\n\nPaul",
    "created_at": "2011-12-19T12:52:42Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132675",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:4'></a>
by the way, MPFI 1.5.0 fixes a limitation to 1000 characters in `mpfi_set_str`, which can be
demonstrated by the following test:

```
sage: R = RealIntervalField(53)
sage: R("1" * 1000)
1.111111111111112?e999
```
which failed previously. Maybe add a test for that?

Paul



---

archive/issue_comments_132676.json:
```json
{
    "body": "<a id='comment:5'></a>\ntwo doctests are failing:\n\n```\n        sage -t  devel/sage-11666/sage/rings/qqbar.py # 4 doctests failed\n        sage -t  devel/sage-11666/sage/rings/real_mpfi.pyx # 7 doctests failed\n```\nThe issues are `+0.0` versus `-0.0`, and also 1/0 which now gives `[-Inf, +Inf]`\ninstead of `[+Inf, +Inf]`.\n\nPaul",
    "created_at": "2011-12-19T13:35:41Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132676",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:5'></a>
two doctests are failing:

```
        sage -t  devel/sage-11666/sage/rings/qqbar.py # 4 doctests failed
        sage -t  devel/sage-11666/sage/rings/real_mpfi.pyx # 7 doctests failed
```
The issues are `+0.0` versus `-0.0`, and also 1/0 which now gives `[-Inf, +Inf]`
instead of `[+Inf, +Inf]`.

Paul



---

archive/issue_events_098925.json:
```json
{
    "actor": "https://github.com/zimmermann6",
    "created_at": "2011-12-19T13:35:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12171#event-98925"
}
```



---

archive/issue_events_098926.json:
```json
{
    "actor": "https://github.com/zimmermann6",
    "created_at": "2011-12-19T13:35:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12171#event-98926"
}
```



---

archive/issue_comments_132677.json:
```json
{
    "body": "<a id='comment:6'></a>\nthere is one important change in MPFI 1.5.0 which might cause the failures: `mpfi_set_ui` on\ninput 0 gives `[+0.0,-0.0]` instead of `[+0.0,+0.0]` previously. I will ask upstream why:\n\n```\nsage: R=RealIntervalField(53)\nsage: a=R(0)\nsage: a.lower(), a.upper()\n(0.000000000000000, -0.000000000000000)\n```\n\nMore annoying is the following, which I believe is a bug in MPFI 1.5.0:\n\n```\nsage: a=R(infinity)\nsage: a.lower(), a.upper()\n(+infinity, +infinity)\nsage: b=1/a\nsage: b.lower(), b.upper()\n(0.000000000000000, -0.000000000000000)\n```\n(I would expect `b=[+0.0,+0.0]`.)\n\nPaul",
    "created_at": "2011-12-19T17:59:35Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132677",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:6'></a>
there is one important change in MPFI 1.5.0 which might cause the failures: `mpfi_set_ui` on
input 0 gives `[+0.0,-0.0]` instead of `[+0.0,+0.0]` previously. I will ask upstream why:

```
sage: R=RealIntervalField(53)
sage: a=R(0)
sage: a.lower(), a.upper()
(0.000000000000000, -0.000000000000000)
```

More annoying is the following, which I believe is a bug in MPFI 1.5.0:

```
sage: a=R(infinity)
sage: a.lower(), a.upper()
(+infinity, +infinity)
sage: b=1/a
sage: b.lower(), b.upper()
(0.000000000000000, -0.000000000000000)
```
(I would expect `b=[+0.0,+0.0]`.)

Paul



---

archive/issue_comments_132678.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"sd35\".",
    "created_at": "2011-12-20T12:48:04Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132678",
    "user": "https://github.com/mwhansen"
}
```

**Changing keywords** from "" to "sd35".



---

archive/issue_comments_132679.json:
```json
{
    "body": "<a id='comment:8'></a>\nthe detailed failures (on a 32-bit computer) are:\n\n```\n\nmacaron% ./sage -t devel/sage-12171/sage/rings/real_mpfi.pyx \nsage -t  \"devel/sage-12171/sage/rings/real_mpfi.pyx\"        \n**********************************************************************\nFile \"/localdisk/tmp/sage-4.7.2/devel/sage-12171/sage/rings/real_mpfi.pyx\", line 4142:\n    sage: 0 in (RealField(2000)(-19/3).gamma() - RealIntervalField(1000)(-19/3).gamma())\nExpected:\n    True\nGot:\n    False\n**********************************************************************\nFile \"/localdisk/tmp/sage-4.7.2/devel/sage-12171/sage/rings/real_mpfi.pyx\", line 1082:\n    sage: b = R(1)/R(0); b\nExpected:\n    [+infinity .. +infinity]\nGot:\n    [-infinity .. +infinity]\n**********************************************************************\nFile \"/localdisk/tmp/sage-4.7.2/devel/sage-12171/sage/rings/real_mpfi.pyx\", line 1084:\n    sage: loads(dumps(b)) == b\nExpected:\n    True\nGot:\n    False\n**********************************************************************\nFile \"/localdisk/tmp/sage-4.7.2/devel/sage-12171/sage/rings/real_mpfi.pyx\", line 1086:\n    sage: b = R(-1)/R(0); b\nExpected:\n    [-infinity .. -infinity]\nGot:\n    [-infinity .. +infinity]\n\n**********************************************************************\nFile \"/localdisk/tmp/sage-4.7.2/devel/sage-12171/sage/rings/real_mpfi.pyx\", line 1088:\n    sage: loads(dumps(b)) == b\nExpected:\n    True\nGot:\n    False\n**********************************************************************\nFile \"/localdisk/tmp/sage-4.7.2/devel/sage-12171/sage/rings/real_mpfi.pyx\", line 2364:\n    sage: R(1)/R(0)\nExpected:\n    [+infinity .. +infinity]\nGot:\n    [-infinity .. +infinity]\n**********************************************************************\nFile \"/localdisk/tmp/sage-4.7.2/devel/sage-12171/sage/rings/real_mpfi.pyx\", line 3221:\n    sage: RIF(-1, 1).min(0).endpoints()\nExpected:\n    (-1.00000000000000, 0.000000000000000)\nGot:\n    (-1.00000000000000, -0.000000000000000)\n**********************************************************************\nFile \"/localdisk/tmp/sage-4.7.2/devel/sage-12171/sage/rings/real_mpfi.pyx\", line 3225:\n    sage: RIF(-1, 1).min(0).endpoints()\nExpected:\n    (-1.00000000000000, 0.000000000000000)\nGot:\n    (-1.00000000000000, -0.000000000000000)\n\n**********************************************************************\n4 items had failures:\n   1 of  19 in __main__.example_117\n   4 of  19 in __main__.example_29\n   1 of   9 in __main__.example_55\n   2 of  10 in __main__.example_80\n***Test Failed*** 8 failures.\nFor whitespace errors, see the file /users/caramel/zimmerma/.sage//tmp/real_mpfi_8949.py\n         [8.1 s]\n```\nand:\n\n```\n\nmacaron% ./sage -t devel/sage-12171/sage/rings/qqbar.py \nsage -t  \"devel/sage-12171/sage/rings/qqbar.py\"             \n**********************************************************************\nFile \"/localdisk/tmp/sage-4.7.2/devel/sage-12171/sage/rings/qqbar.py\", line 4003:\n    sage: (x-2).real_exact(RR)\nExpected:\n    0.000000000000000\nGot:\n    -0.000000000000000\n**********************************************************************\nFile \"/localdisk/tmp/sage-4.7.2/devel/sage-12171/sage/rings/qqbar.py\", line 4005:\n    sage: (x-2).real_exact(RealField(53, rnd='RNDD'))\nExpected:\n    0.000000000000000\nGot:\n    -0.000000000000000\n**********************************************************************\nFile \"/localdisk/tmp/sage-4.7.2/devel/sage-12171/sage/rings/qqbar.py\", line 4007:\n    sage: (x-2).real_exact(RealField(53, rnd='RNDU'))\nExpected:\n    0.000000000000000\nGot:\n    -0.000000000000000\n**********************************************************************\nFile \"/localdisk/tmp/sage-4.7.2/devel/sage-12171/sage/rings/qqbar.py\", line 4009:\n    sage: (x-2).real_exact(RealField(53, rnd='RNDZ'))\n\nExpected:\n    0.000000000000000\nGot:\n    -0.000000000000000\n**********************************************************************\n1 items had failures:\n   4 of  21 in __main__.example_101\n***Test Failed*** 4 failures.\n```\nPaul",
    "created_at": "2011-12-21T11:20:22Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132679",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:8'></a>
the detailed failures (on a 32-bit computer) are:

```

macaron% ./sage -t devel/sage-12171/sage/rings/real_mpfi.pyx 
sage -t  "devel/sage-12171/sage/rings/real_mpfi.pyx"        
**********************************************************************
File "/localdisk/tmp/sage-4.7.2/devel/sage-12171/sage/rings/real_mpfi.pyx", line 4142:
    sage: 0 in (RealField(2000)(-19/3).gamma() - RealIntervalField(1000)(-19/3).gamma())
Expected:
    True
Got:
    False
**********************************************************************
File "/localdisk/tmp/sage-4.7.2/devel/sage-12171/sage/rings/real_mpfi.pyx", line 1082:
    sage: b = R(1)/R(0); b
Expected:
    [+infinity .. +infinity]
Got:
    [-infinity .. +infinity]
**********************************************************************
File "/localdisk/tmp/sage-4.7.2/devel/sage-12171/sage/rings/real_mpfi.pyx", line 1084:
    sage: loads(dumps(b)) == b
Expected:
    True
Got:
    False
**********************************************************************
File "/localdisk/tmp/sage-4.7.2/devel/sage-12171/sage/rings/real_mpfi.pyx", line 1086:
    sage: b = R(-1)/R(0); b
Expected:
    [-infinity .. -infinity]
Got:
    [-infinity .. +infinity]

**********************************************************************
File "/localdisk/tmp/sage-4.7.2/devel/sage-12171/sage/rings/real_mpfi.pyx", line 1088:
    sage: loads(dumps(b)) == b
Expected:
    True
Got:
    False
**********************************************************************
File "/localdisk/tmp/sage-4.7.2/devel/sage-12171/sage/rings/real_mpfi.pyx", line 2364:
    sage: R(1)/R(0)
Expected:
    [+infinity .. +infinity]
Got:
    [-infinity .. +infinity]
**********************************************************************
File "/localdisk/tmp/sage-4.7.2/devel/sage-12171/sage/rings/real_mpfi.pyx", line 3221:
    sage: RIF(-1, 1).min(0).endpoints()
Expected:
    (-1.00000000000000, 0.000000000000000)
Got:
    (-1.00000000000000, -0.000000000000000)
**********************************************************************
File "/localdisk/tmp/sage-4.7.2/devel/sage-12171/sage/rings/real_mpfi.pyx", line 3225:
    sage: RIF(-1, 1).min(0).endpoints()
Expected:
    (-1.00000000000000, 0.000000000000000)
Got:
    (-1.00000000000000, -0.000000000000000)

**********************************************************************
4 items had failures:
   1 of  19 in __main__.example_117
   4 of  19 in __main__.example_29
   1 of   9 in __main__.example_55
   2 of  10 in __main__.example_80
***Test Failed*** 8 failures.
For whitespace errors, see the file /users/caramel/zimmerma/.sage//tmp/real_mpfi_8949.py
         [8.1 s]
```
and:

```

macaron% ./sage -t devel/sage-12171/sage/rings/qqbar.py 
sage -t  "devel/sage-12171/sage/rings/qqbar.py"             
**********************************************************************
File "/localdisk/tmp/sage-4.7.2/devel/sage-12171/sage/rings/qqbar.py", line 4003:
    sage: (x-2).real_exact(RR)
Expected:
    0.000000000000000
Got:
    -0.000000000000000
**********************************************************************
File "/localdisk/tmp/sage-4.7.2/devel/sage-12171/sage/rings/qqbar.py", line 4005:
    sage: (x-2).real_exact(RealField(53, rnd='RNDD'))
Expected:
    0.000000000000000
Got:
    -0.000000000000000
**********************************************************************
File "/localdisk/tmp/sage-4.7.2/devel/sage-12171/sage/rings/qqbar.py", line 4007:
    sage: (x-2).real_exact(RealField(53, rnd='RNDU'))
Expected:
    0.000000000000000
Got:
    -0.000000000000000
**********************************************************************
File "/localdisk/tmp/sage-4.7.2/devel/sage-12171/sage/rings/qqbar.py", line 4009:
    sage: (x-2).real_exact(RealField(53, rnd='RNDZ'))

Expected:
    0.000000000000000
Got:
    -0.000000000000000
**********************************************************************
1 items had failures:
   4 of  21 in __main__.example_101
***Test Failed*** 4 failures.
```
Paul



---

archive/issue_comments_132680.json:
```json
{
    "body": "<a id='comment:9'></a>\nthe first issue with gamma seems to be due to that bug in Sage:\n\n```\nsage: RealIntervalField(54)(-19/3) > 1.462\nTrue\n```\n(works for precision 53 or less).\n\nPaul",
    "created_at": "2011-12-21T11:21:31Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132680",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:9'></a>
the first issue with gamma seems to be due to that bug in Sage:

```
sage: RealIntervalField(54)(-19/3) > 1.462
True
```
(works for precision 53 or less).

Paul



---

archive/issue_comments_132681.json:
```json
{
    "body": "<a id='comment:10'></a>\nI got a message from the developers of the Sollya package who say that they had similar\nproblems when upgrading to MPFI 1.5.0. Their solution was to write a wrapper around\nMPFI to give sense to intervals like [+Inf,+Inf].\n\nPaul",
    "created_at": "2011-12-21T11:27:03Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132681",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:10'></a>
I got a message from the developers of the Sollya package who say that they had similar
problems when upgrading to MPFI 1.5.0. Their solution was to write a wrapper around
MPFI to give sense to intervals like [+Inf,+Inf].

Paul



---

archive/issue_comments_132682.json:
```json
{
    "body": "<a id='comment:11'></a>\nthe problem from comment [comment:9] seems to only apply on 32-bit machines. I'll first try to\nsolve problems on 64-bit. There is one strange thing with the patch applied:\n\n```\nsage: x = AA(2).sqrt()^2\nsage: (x-2).real_exact(RR)\n0.000000000000000\nsage: x.real_exact(RR)\n2.00000000000000\nsage: (x-2).real_exact(RR)\n-0.000000000000000\n```\nThe MPFI developers claim that in MPFI 1.5 the sign of 0 is irrelevant, but this is still a\nnon-deterministic issue.\n\nPaul",
    "created_at": "2011-12-22T09:44:49Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132682",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:11'></a>
the problem from comment [comment:9] seems to only apply on 32-bit machines. I'll first try to
solve problems on 64-bit. There is one strange thing with the patch applied:

```
sage: x = AA(2).sqrt()^2
sage: (x-2).real_exact(RR)
0.000000000000000
sage: x.real_exact(RR)
2.00000000000000
sage: (x-2).real_exact(RR)
-0.000000000000000
```
The MPFI developers claim that in MPFI 1.5 the sign of 0 is irrelevant, but this is still a
non-deterministic issue.

Paul



---

archive/attachments_016227.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_12171a.patch",
    "asset_url": "tarball://root/attachments/ticket12171/trac_12171a.patch",
    "created_at": "2011-12-22T09:49:12Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket12171/trac_12171a.patch",
    "user": "https://github.com/zimmermann6"
}
```



---

archive/issue_comments_132683.json:
```json
{
    "body": "Attachment [trac_12171a.patch](https://github.com/sagemath/sage/files/ticket12171/trac_12171a.patch) by @zimmermann6 created at 2011-12-22 09:49:12",
    "created_at": "2011-12-22T09:49:12Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132683",
    "user": "https://github.com/zimmermann6"
}
```

Attachment [trac_12171a.patch](https://github.com/sagemath/sage/files/ticket12171/trac_12171a.patch) by @zimmermann6 created at 2011-12-22 09:49:12



---

archive/issue_events_098927.json:
```json
{
    "actor": "https://github.com/zimmermann6",
    "created_at": "2011-12-22T09:54:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12171#event-98927"
}
```



---

archive/issue_events_098928.json:
```json
{
    "actor": "https://github.com/zimmermann6",
    "created_at": "2011-12-22T09:54:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12171#event-98928"
}
```



---

archive/issue_comments_132684.json:
```json
{
    "body": "<a id='comment:12'></a>\nthe attached `trac_12171a.patch` fixes all issues but two on 64-bit. The remaining issues\nare related to `loads(dumps(b)) == b`:\n\n```\nFile \"/usr/local/sage-4.7.2/sage/devel/sage-12171/sage/rings/real_mpfi.pyx\", line 1084:\n    sage: loads(dumps(b)) == b\nExpected:\n    True\nGot:\n    False\n**********************************************************************\nFile \"/usr/local/sage-4.7.2/sage/devel/sage-12171/sage/rings/real_mpfi.pyx\", line 1088:\n    sage: loads(dumps(b)) == b\nExpected:\n    True\nGot:\n    False\n```\nI see in `real_mpfi.pyx` that other similar tests are failing and were rewritten in a\ndifferent way:\n\n```\nsage: R = RealIntervalField(4000)\nsage: s = 1/R(3)\nsage: t = loads(dumps(s))\nsage: (t.upper(), t.lower()) == (s.upper(), s.lower())\nTrue\n```\nIndeed `t==s` fails:\n\n```\nsage: t == s\nFalse\n```\nShould I also rewrite the 2 failing tests like this? What is the reason for the failures?\n\nPaul",
    "created_at": "2011-12-22T09:54:52Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132684",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:12'></a>
the attached `trac_12171a.patch` fixes all issues but two on 64-bit. The remaining issues
are related to `loads(dumps(b)) == b`:

```
File "/usr/local/sage-4.7.2/sage/devel/sage-12171/sage/rings/real_mpfi.pyx", line 1084:
    sage: loads(dumps(b)) == b
Expected:
    True
Got:
    False
**********************************************************************
File "/usr/local/sage-4.7.2/sage/devel/sage-12171/sage/rings/real_mpfi.pyx", line 1088:
    sage: loads(dumps(b)) == b
Expected:
    True
Got:
    False
```
I see in `real_mpfi.pyx` that other similar tests are failing and were rewritten in a
different way:

```
sage: R = RealIntervalField(4000)
sage: s = 1/R(3)
sage: t = loads(dumps(s))
sage: (t.upper(), t.lower()) == (s.upper(), s.lower())
True
```
Indeed `t==s` fails:

```
sage: t == s
False
```
Should I also rewrite the 2 failing tests like this? What is the reason for the failures?

Paul



---

archive/issue_comments_132685.json:
```json
{
    "body": "<a id='comment:13'></a>\n> Should I also rewrite the 2 failing tests like this? What is the reason for the failures?\n\n\nRobert, Mike, are you there?\n\nPaul",
    "created_at": "2011-12-23T18:37:56Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132685",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:13'></a>
> Should I also rewrite the 2 failing tests like this? What is the reason for the failures?


Robert, Mike, are you there?

Paul



---

archive/issue_comments_132686.json:
```json
{
    "body": "<a id='comment:14'></a>\nJeroen, since I got no answer to my question I ask you: do you have an idea how to proceed?\n\nPaul",
    "created_at": "2011-12-27T09:05:26Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132686",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:14'></a>
Jeroen, since I got no answer to my question I ask you: do you have an idea how to proceed?

Paul



---

archive/issue_comments_132687.json:
```json
{
    "body": "<a id='comment:15'></a>\nHi Paul, sorry for the delay; I've been busy with traveling back to the states / the holidays.  I'll look into why these are failing today.  I started while I was in Warwick, but didn't make much progress.",
    "created_at": "2011-12-27T17:24:41Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132687",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:15'></a>
Hi Paul, sorry for the delay; I've been busy with traveling back to the states / the holidays.  I'll look into why these are failing today.  I started while I was in Warwick, but didn't make much progress.



---

archive/issue_comments_132688.json:
```json
{
    "body": "<a id='comment:17'></a>\nReplying to [zimmerma](#comment%3A12):\n> I see in `real_mpfi.pyx` that other similar tests are failing and were rewritten in a\n> different way:\n> \n> ```\n> sage: R = RealIntervalField(4000)\n> sage: s = 1/R(3)\n> sage: t = loads(dumps(s))\n> sage: (t.upper(), t.lower()) == (s.upper(), s.lower())\n> True\n> ```\n> Indeed `t==s` fails:\n> \n> ```\n> sage: t == s\n> False\n> ```\n> Should I also rewrite the 2 failing tests like this? What is the reason for the failures?\n\n\nThis is quite strange I cannot think of a reason this would fail unless the \"==\" operator is doing something slightly wrong or something unexpected.",
    "created_at": "2011-12-31T03:34:54Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132688",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:17'></a>
Replying to [zimmerma](#comment%3A12):
> I see in `real_mpfi.pyx` that other similar tests are failing and were rewritten in a
> different way:
> 
> ```
> sage: R = RealIntervalField(4000)
> sage: s = 1/R(3)
> sage: t = loads(dumps(s))
> sage: (t.upper(), t.lower()) == (s.upper(), s.lower())
> True
> ```
> Indeed `t==s` fails:
> 
> ```
> sage: t == s
> False
> ```
> Should I also rewrite the 2 failing tests like this? What is the reason for the failures?


This is quite strange I cannot think of a reason this would fail unless the "==" operator is doing something slightly wrong or something unexpected.



---

archive/issue_comments_132689.json:
```json
{
    "body": "<a id='comment:18'></a>\nok I understand why the following \"fails\":\n\n```\nsage: R = RealIntervalField(100)\nsage: s = 1/R(3)\nsage: t = loads(dumps(s))\nsage: t == s\nFalse\n```\nIn the `real_mpfi.pyx` file, it is said that s cmp t returns True if a cmp b is true for any\nelement a in s and any element b in t. Obviously when cmp is == and t is the same interval as s\nthis can hold only when both are the same point interval. Thus to check if s and t are the same\ninterval, we should write:\n\n```\nsage: (t.upper(), t.lower()) == (s.upper(), s.lower())\nTrue\n```\nPaul",
    "created_at": "2011-12-31T10:04:38Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132689",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:18'></a>
ok I understand why the following "fails":

```
sage: R = RealIntervalField(100)
sage: s = 1/R(3)
sage: t = loads(dumps(s))
sage: t == s
False
```
In the `real_mpfi.pyx` file, it is said that s cmp t returns True if a cmp b is true for any
element a in s and any element b in t. Obviously when cmp is == and t is the same interval as s
this can hold only when both are the same point interval. Thus to check if s and t are the same
interval, we should write:

```
sage: (t.upper(), t.lower()) == (s.upper(), s.lower())
True
```
Paul



---

archive/issue_comments_132690.json:
```json
{
    "body": "this patch should be applied after trac_12171a.patch",
    "created_at": "2011-12-31T10:13:39Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132690",
    "user": "https://github.com/zimmermann6"
}
```

this patch should be applied after trac_12171a.patch



---

archive/attachments_016228.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_12171b.patch",
    "asset_url": "tarball://root/attachments/ticket12171/trac_12171b.patch",
    "created_at": "2011-12-31T10:15:36Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket12171/trac_12171b.patch",
    "user": "https://github.com/zimmermann6"
}
```



---

archive/issue_comments_132691.json:
```json
{
    "body": "<a id='comment:19'></a>\nAttachment [trac_12171b.patch](https://github.com/sagemath/sage/files/ticket12171/trac_12171b.patch) by @zimmermann6 created at 2011-12-31 10:15:36\n\nthe second patch attached fixes the remaining failing tests. Ready for review.\n\nPaul",
    "created_at": "2011-12-31T10:15:36Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132691",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:19'></a>
Attachment [trac_12171b.patch](https://github.com/sagemath/sage/files/ticket12171/trac_12171b.patch) by @zimmermann6 created at 2011-12-31 10:15:36

the second patch attached fixes the remaining failing tests. Ready for review.

Paul



---

archive/issue_comments_132692.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n-This is needed for #11666\n+This is needed for #11666.\n+\n+Apply first trac_12171a.patch, then trac_12171b.patch\n``````\n",
    "created_at": "2011-12-31T10:15:36Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132692",
    "user": "https://github.com/zimmermann6"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,3 @@
-This is needed for #11666
+This is needed for #11666.
+
+Apply first trac_12171a.patch, then trac_12171b.patch
``````




---

archive/issue_comments_132693.json:
```json
{
    "body": "**Changing author** from \"Mike Hansen\" to \"Mike Hansen, Paul Zimmermann\".",
    "created_at": "2011-12-31T10:15:36Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132693",
    "user": "https://github.com/zimmermann6"
}
```

**Changing author** from "Mike Hansen" to "Mike Hansen, Paul Zimmermann".



---

archive/issue_events_098929.json:
```json
{
    "actor": "https://github.com/zimmermann6",
    "created_at": "2011-12-31T10:15:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12171#event-98929"
}
```



---

archive/issue_events_098930.json:
```json
{
    "actor": "https://github.com/zimmermann6",
    "created_at": "2011-12-31T10:15:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12171#event-98930"
}
```



---

archive/issue_comments_132694.json:
```json
{
    "body": "<a id='comment:20'></a>\nThere is no doubt that this second patch will do the trick and does the right thing. I am just wondering why \"t == s\" doesn't work as expected in the first place. \n\nIn any case I will do some basic reviewing shortly. The patch themselves look good to me. I need to check the spkg in details.",
    "created_at": "2012-01-04T01:40:50Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132694",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:20'></a>
There is no doubt that this second patch will do the trick and does the right thing. I am just wondering why "t == s" doesn't work as expected in the first place. 

In any case I will do some basic reviewing shortly. The patch themselves look good to me. I need to check the spkg in details.



---

archive/issue_comments_132695.json:
```json
{
    "body": "<a id='comment:21'></a>\nFrancois, I explain in comment [comment:18] that the semantics of `t == s` is special for\nintervals. If `t=[a,b]` and `s=[c,d]`, it requires that `x==y` for any `a <= x <= b` and `c <= y <= d`, which obviously requires `a=b=c=d`.\n\nThe modified tests did work before because they had `a=b=c=d`, which is no longer the case due\nto change of semantics of MPFI.\n\nPaul",
    "created_at": "2012-01-04T06:40:50Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132695",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:21'></a>
Francois, I explain in comment [comment:18] that the semantics of `t == s` is special for
intervals. If `t=[a,b]` and `s=[c,d]`, it requires that `x==y` for any `a <= x <= b` and `c <= y <= d`, which obviously requires `a=b=c=d`.

The modified tests did work before because they had `a=b=c=d`, which is no longer the case due
to change of semantics of MPFI.

Paul



---

archive/issue_comments_132696.json:
```json
{
    "body": "<a id='comment:22'></a>\nJust a quick update: it doesn't appear that mpfi runs a test suite when SAGE_CHECK is set can you fix that?",
    "created_at": "2012-01-07T18:47:52Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132696",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:22'></a>
Just a quick update: it doesn't appear that mpfi runs a test suite when SAGE_CHECK is set can you fix that?



---

archive/issue_comments_132697.json:
```json
{
    "body": "<a id='comment:23'></a>\nI further inspected the spkg. There is one issue\n\n```\n hg status\n! patches/configure.ac\n! patches/configure.ac.patch\n```\nYou have to tell hg to remove them, just removing them with \"rm\" is not enough. \n\n```\n hg addremove\n```\nwill do the trick then you can commit and make the spkg.\nAs mentioned above I would also like you to add a section to spkg-install that runs \"make check\" if SAGE_CHECK is set to yes.\nOnce all that is done I'll have another look but it should be a positive review then.",
    "created_at": "2012-01-07T22:31:55Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132697",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:23'></a>
I further inspected the spkg. There is one issue

```
 hg status
! patches/configure.ac
! patches/configure.ac.patch
```
You have to tell hg to remove them, just removing them with "rm" is not enough. 

```
 hg addremove
```
will do the trick then you can commit and make the spkg.
As mentioned above I would also like you to add a section to spkg-install that runs "make check" if SAGE_CHECK is set to yes.
Once all that is done I'll have another look but it should be a positive review then.



---

archive/issue_comments_132698.json:
```json
{
    "body": "**Work_Issues:** clean hg repo; add SAGE_CHECK",
    "created_at": "2012-01-07T23:08:59Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132698",
    "user": "https://github.com/kiwifb"
}
```

**Work_Issues:** clean hg repo; add SAGE_CHECK



---

archive/issue_comments_132699.json:
```json
{
    "body": "**Reviewer:** Fran\u00e7ois Bissey",
    "created_at": "2012-01-07T23:08:59Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132699",
    "user": "https://github.com/kiwifb"
}
```

**Reviewer:** Fran√ßois Bissey



---

archive/issue_events_098931.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2012-01-07T23:08:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12171#event-98931"
}
```



---

archive/issue_events_098932.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2012-01-07T23:08:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12171#event-98932"
}
```



---

archive/issue_comments_132700.json:
```json
{
    "body": "<a id='comment:25'></a>\nMike, please can you make the changes in the spkg? I'd like to make progress on this patch during\nSD 35.5, so that we can proceed on #11666.\n\nPaul",
    "created_at": "2012-01-08T10:56:03Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132700",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:25'></a>
Mike, please can you make the changes in the spkg? I'd like to make progress on this patch during
SD 35.5, so that we can proceed on #11666.

Paul



---

archive/issue_events_098933.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2012-01-08T11:17:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12171#event-98933"
}
```



---

archive/issue_events_098934.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2012-01-08T11:17:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12171#event-98934"
}
```



---

archive/issue_comments_132701.json:
```json
{
    "body": "<a id='comment:26'></a>\nAs I happened to be cc'ed on this ticket, I've uplaoded a package with the requested easy changes at http://perso.telecom-paristech.fr/~flori/sage/mpfi-1.5.0.spkg\n\nAt least it install on a (vanilla? not sure... but nothing to exotic) sage 4.7.2 and runs the test suite (and succeed) when asked so on my machine.",
    "created_at": "2012-01-08T11:17:07Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132701",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:26'></a>
As I happened to be cc'ed on this ticket, I've uplaoded a package with the requested easy changes at http://perso.telecom-paristech.fr/~flori/sage/mpfi-1.5.0.spkg

At least it install on a (vanilla? not sure... but nothing to exotic) sage 4.7.2 and runs the test suite (and succeed) when asked so on my machine.



---

archive/issue_comments_132702.json:
```json
{
    "body": "<a id='comment:27'></a>\nI've also put another version of the package at the same address + \".new\" where the last test in spkg-install is slightly simplified...",
    "created_at": "2012-01-08T11:41:36Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132702",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:27'></a>
I've also put another version of the package at the same address + ".new" where the last test in spkg-install is slightly simplified...



---

archive/issue_comments_132703.json:
```json
{
    "body": "**Changing work_issues** from \"clean hg repo; add SAGE_CHECK\" to \"\".",
    "created_at": "2012-01-08T11:41:36Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132703",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Changing work_issues** from "clean hg repo; add SAGE_CHECK" to "".



---

archive/issue_comments_132704.json:
```json
{
    "body": "**Changing author** from \"Mike Hansen, Paul Zimmermann\" to \"Mike Hansen, Paul Zimmermann, Jean-Pierre Flori\".",
    "created_at": "2012-01-08T20:52:22Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132704",
    "user": "https://github.com/kiwifb"
}
```

**Changing author** from "Mike Hansen, Paul Zimmermann" to "Mike Hansen, Paul Zimmermann, Jean-Pierre Flori".



---

archive/issue_events_098935.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2012-01-08T20:52:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12171#event-98935"
}
```



---

archive/issue_events_098936.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2012-01-08T20:52:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12171#event-98936"
}
```



---

archive/issue_comments_132705.json:
```json
{
    "body": "<a id='comment:28'></a>\nLooking at it again it may have been a little bit more verbose about the removal of the patches in SPKG.txt but it is otherwise fine now. It actually builds and tests fine on something exotic (SLES 11SP1 on power7, although there may be a slight clue about some problems on power7 in those tests).\n\nI giving this a positive review.",
    "created_at": "2012-01-08T20:52:22Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132705",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:28'></a>
Looking at it again it may have been a little bit more verbose about the removal of the patches in SPKG.txt but it is otherwise fine now. It actually builds and tests fine on something exotic (SLES 11SP1 on power7, although there may be a slight clue about some problems on power7 in those tests).

I giving this a positive review.



---

archive/issue_comments_132706.json:
```json
{
    "body": "<a id='comment:29'></a>\nI've put the last package at the \"normal\" address (i.e. without .new at the end) and linked it in the ticket description.",
    "created_at": "2012-01-09T10:25:08Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132706",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:29'></a>
I've put the last package at the "normal" address (i.e. without .new at the end) and linked it in the ticket description.



---

archive/issue_comments_132707.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n This is needed for #11666.\n \n+Use http://perso.telecom-paristech.fr/~flori/sage/mpfi-1.5.0.spkg\n+\n Apply first trac_12171a.patch, then trac_12171b.patch\n``````\n",
    "created_at": "2012-01-09T10:25:08Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132707",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
 This is needed for #11666.
 
+Use http://perso.telecom-paristech.fr/~flori/sage/mpfi-1.5.0.spkg
+
 Apply first trac_12171a.patch, then trac_12171b.patch
``````




---

archive/issue_events_098937.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-09T12:52:14Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "milestone": "sage-4.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12171#event-98937"
}
```



---

archive/issue_events_098938.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-09T12:52:14Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "milestone": "sage-5.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12171#event-98938"
}
```



---

archive/issue_comments_132708.json:
```json
{
    "body": "**Dependencies:** #12131",
    "created_at": "2012-01-09T23:13:36Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132708",
    "user": "https://github.com/jdemeyer"
}
```

**Dependencies:** #12131



---

archive/issue_comments_132709.json:
```json
{
    "body": "<a id='comment:31'></a>\nThis should be rebased to #12131.",
    "created_at": "2012-01-09T23:13:36Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132709",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:31'></a>
This should be rebased to #12131.



---

archive/issue_events_098939.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-09T23:13:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12171#event-98939"
}
```



---

archive/issue_events_098940.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-09T23:13:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12171#event-98940"
}
```



---

archive/issue_comments_132710.json:
```json
{
    "body": "**Work_Issues:** rebase",
    "created_at": "2012-01-09T23:13:36Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132710",
    "user": "https://github.com/jdemeyer"
}
```

**Work_Issues:** rebase



---

archive/issue_comments_132711.json:
```json
{
    "body": "<a id='comment:32'></a>\nI hadn't noticed that mpfi was one of the concerned package but I guess it make sense. This should be easy and quick to fix.",
    "created_at": "2012-01-10T01:21:35Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132711",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:32'></a>
I hadn't noticed that mpfi was one of the concerned package but I guess it make sense. This should be easy and quick to fix.



---

archive/issue_comments_132712.json:
```json
{
    "body": "**Changing work_issues** from \"rebase\" to \"\".",
    "created_at": "2012-01-10T12:55:35Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132712",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Changing work_issues** from "rebase" to "".



---

archive/issue_events_098941.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2012-01-10T12:55:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12171#event-98941"
}
```



---

archive/issue_events_098942.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2012-01-10T12:55:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12171#event-98942"
}
```



---

archive/issue_comments_132713.json:
```json
{
    "body": "<a id='comment:33'></a>\nThe concerned line of spkg-install has been updated according to #12131.\n\nYou can find the updated package at the same address:\n\nhttp://perso.telecom-paristech.fr/~flori/sage/mpfi-1.5.0.spkg",
    "created_at": "2012-01-10T12:55:35Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132713",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:33'></a>
The concerned line of spkg-install has been updated according to #12131.

You can find the updated package at the same address:

http://perso.telecom-paristech.fr/~flori/sage/mpfi-1.5.0.spkg



---

archive/issue_comments_132714.json:
```json
{
    "body": "<a id='comment:34'></a>\nIt is not how rebasing a spkg works Jean-Pierre (I had to do it several time for python-2.7). You have to start from the latest spkg available in #12131. The idea is that by doing what you just did you lost all the history from the spkg in #12131 that includes hg logs and the log entries from SPKG.txt.\n\nSo I am afraid you will have to take the spkg from #12131 and then add all the changes needed for 1.5.0.",
    "created_at": "2012-01-11T00:57:30Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132714",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:34'></a>
It is not how rebasing a spkg works Jean-Pierre (I had to do it several time for python-2.7). You have to start from the latest spkg available in #12131. The idea is that by doing what you just did you lost all the history from the spkg in #12131 that includes hg logs and the log entries from SPKG.txt.

So I am afraid you will have to take the spkg from #12131 and then add all the changes needed for 1.5.0.



---

archive/issue_events_098943.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2012-01-11T00:57:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12171#event-98943"
}
```



---

archive/issue_events_098944.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2012-01-11T00:57:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12171#event-98944"
}
```



---

archive/issue_comments_132715.json:
```json
{
    "body": "<a id='comment:35'></a>\nMy bad, I did not really thought before adding the one line fix from #12131.\n\nI'll do it the right way around later.",
    "created_at": "2012-01-11T08:00:49Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132715",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:35'></a>
My bad, I did not really thought before adding the one line fix from #12131.

I'll do it the right way around later.



---

archive/issue_comments_132716.json:
```json
{
    "body": "<a id='comment:36'></a>\nnote that MPFI 1.5.1 will soon be out:\nhttp://lists.gforge.inria.fr/pipermail/mpfi-users/2012-January/000031.html\n\nPaul",
    "created_at": "2012-01-11T17:44:31Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132716",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:36'></a>
note that MPFI 1.5.1 will soon be out:
http://lists.gforge.inria.fr/pipermail/mpfi-users/2012-January/000031.html

Paul



---

archive/issue_comments_132717.json:
```json
{
    "body": "<a id='comment:37'></a>\nI'm currently properly rebuilding the spkg (for 1.5.0).\n\nI see that in Mike package, he got rid of the previous patch for cygwin.\n\nI guess it has been merged upstream. Anyway, I'll document it in SPKG.txt when I find a ref, remove src/configure.ac from tracked files and delete patches directory, unless someone has an objection.\n\nIf v1.5.1 happens to get released, I'll just use it instead of 1.5.",
    "created_at": "2012-01-12T10:12:47Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132717",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:37'></a>
I'm currently properly rebuilding the spkg (for 1.5.0).

I see that in Mike package, he got rid of the previous patch for cygwin.

I guess it has been merged upstream. Anyway, I'll document it in SPKG.txt when I find a ref, remove src/configure.ac from tracked files and delete patches directory, unless someone has an objection.

If v1.5.1 happens to get released, I'll just use it instead of 1.5.



---

archive/issue_comments_132718.json:
```json
{
    "body": "<a id='comment:38'></a>\nI've contacted Philippe Th\u00e9veny who is in charge of MPFI and he was not even aware of the patch we used in 1.3.4.something to compile under cygwin, so there is a priori no reason for the patch not to be needed anymore (I verified that the configure.ac file in Mike's spkg is the original one from MPFI 1.5).\n\nThe release is planned for the middle of next week, but if the patch is still needed Philippe is ready to get it merged upstream for that release. The original ticket for that issue is #3235.\n\nCould someone who has access to cygwin try the last package I posted (or Mike's one) and report on success or failure ASAP?",
    "created_at": "2012-01-13T10:42:25Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132718",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:38'></a>
I've contacted Philippe Th√©veny who is in charge of MPFI and he was not even aware of the patch we used in 1.3.4.something to compile under cygwin, so there is a priori no reason for the patch not to be needed anymore (I verified that the configure.ac file in Mike's spkg is the original one from MPFI 1.5).

The release is planned for the middle of next week, but if the patch is still needed Philippe is ready to get it merged upstream for that release. The original ticket for that issue is #3235.

Could someone who has access to cygwin try the last package I posted (or Mike's one) and report on success or failure ASAP?



---

archive/issue_comments_132719.json:
```json
{
    "body": "<a id='comment:39'></a>\nReplying to [jpflori](#comment%3A38):\n> I've contacted Philippe Th\u00e9veny who is in charge of MPFI and he was not even aware of the patch we used in 1.3.4.something to compile under cygwin, so there is a priori no reason for the patch not to be needed anymore (I verified that the configure.ac file in Mike's spkg is the original one from MPFI 1.5).\n> \n> The release is planned for the middle of next week, but if the patch is still needed Philippe is ready to get it merged upstream for that release. The original ticket for that issue is #3235.\n> \n> Could someone who has access to cygwin try the last package I posted (or Mike's one) and report on success or failure ASAP?\n\n\nThe spkg builds just fine on Sage 4.7.2 on Cygwin.\n\nDima",
    "created_at": "2012-01-13T17:58:02Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132719",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:39'></a>
Replying to [jpflori](#comment%3A38):
> I've contacted Philippe Th√©veny who is in charge of MPFI and he was not even aware of the patch we used in 1.3.4.something to compile under cygwin, so there is a priori no reason for the patch not to be needed anymore (I verified that the configure.ac file in Mike's spkg is the original one from MPFI 1.5).
> 
> The release is planned for the middle of next week, but if the patch is still needed Philippe is ready to get it merged upstream for that release. The original ticket for that issue is #3235.
> 
> Could someone who has access to cygwin try the last package I posted (or Mike's one) and report on success or failure ASAP?


The spkg builds just fine on Sage 4.7.2 on Cygwin.

Dima



---

archive/issue_comments_132720.json:
```json
{
    "body": "<a id='comment:40'></a>\na release candidate for MPFI 1.5.1 is available:\n\n```\nDate: Fri, 13 Jan 2012 20:08:36 +0100\nFrom: philipe theveny <philippe.theveny@ens-lyon.fr>\nTo: mpfi-users@lists.gforge.inria.fr\nSubject: [Mpfi-users] announce: mpfi-1.5.1 release candidate\nContent-Type: text/plain; charset=\"iso-8859-1\"; Format=\"flowed\"\n\nThe release of MPFI 1.5.1 is is imminent. Please help to make this\nrelease as good as possible by downloading and testing this release\ncandidate:\n\nhttps://gforge.inria.fr/frs/download.php/30117/mpfi-1.5.1-rc1.tar.bz2\nhttps://gforge.inria.fr/frs/download.php/30116/mpfi-1.5.1-rc1.tar.gz\nhttps://gforge.inria.fr/frs/download.php/30115/mpfi-1.5.1-rc1.zip\n\nThe MD5's:\nccff519222077407c3ca188a3e643c07  mpfi-1.5.1-rc1.tar.bz2\ncd868c21d87afa05085d36d97dfde761  mpfi-1.5.1-rc1.tar.gz\n5e8a29bfcd8cd8b3eb6d90ca86822763  mpfi-1.5.1-rc1.zip\n\nThe SHA1's:\n5cacf98c882f217d8db937e12a4bc7104a5c322d  mpfi-1.5.1-rc1.tar.bz2\n4f58755fbcc346ae23b04e9617e84c776e7b119f  mpfi-1.5.1-rc1.tar.gz\n3e1d180c3640d9eae0a456efc4995cb1d6b99e03  mpfi-1.5.1-rc1.zip\n\n\nChanges between MPFI version 1.5 and 1.5.1:\n* fix bug in mpfi_sub_fr (reported by Takayuki YAMAGUCHI)\n* now require at least GMP version 4.1.0 and MPFR version 2.4.2\n* detect availability of mpfr_z_sub, mpfr_z_div, and mpfr_q_sub and use\n   a custom implementation for the ones not provided by MPFR (mpfr_z_sub\n   appeared in MPFR 3.1.0, the other ones are used in tests only)\n* code cleanup (unused variables)\n* tadd_q does no more check overflow by default (required too much\n   memory)\n* sign of zeros choice documented\n\n\nPlease send success and failure reports with \"./config.guess\" output\nto <mpfi-users@lists.gforge.inria.fr>.\n\nIf no problems are found, MPFI 1.5.1 should be released around January\n18, 2012.\n\nRegards,\nPhilippe Theveny\n\n_______________________________________________\nMpfi-users mailing list\nMpfi-users@lists.gforge.inria.fr\nhttp://lists.gforge.inria.fr/cgi-bin/mailman/listinfo/mpfi-users\n```",
    "created_at": "2012-01-13T20:13:44Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132720",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:40'></a>
a release candidate for MPFI 1.5.1 is available:

```
Date: Fri, 13 Jan 2012 20:08:36 +0100
From: philipe theveny <philippe.theveny@ens-lyon.fr>
To: mpfi-users@lists.gforge.inria.fr
Subject: [Mpfi-users] announce: mpfi-1.5.1 release candidate
Content-Type: text/plain; charset="iso-8859-1"; Format="flowed"

The release of MPFI 1.5.1 is is imminent. Please help to make this
release as good as possible by downloading and testing this release
candidate:

https://gforge.inria.fr/frs/download.php/30117/mpfi-1.5.1-rc1.tar.bz2
https://gforge.inria.fr/frs/download.php/30116/mpfi-1.5.1-rc1.tar.gz
https://gforge.inria.fr/frs/download.php/30115/mpfi-1.5.1-rc1.zip

The MD5's:
ccff519222077407c3ca188a3e643c07  mpfi-1.5.1-rc1.tar.bz2
cd868c21d87afa05085d36d97dfde761  mpfi-1.5.1-rc1.tar.gz
5e8a29bfcd8cd8b3eb6d90ca86822763  mpfi-1.5.1-rc1.zip

The SHA1's:
5cacf98c882f217d8db937e12a4bc7104a5c322d  mpfi-1.5.1-rc1.tar.bz2
4f58755fbcc346ae23b04e9617e84c776e7b119f  mpfi-1.5.1-rc1.tar.gz
3e1d180c3640d9eae0a456efc4995cb1d6b99e03  mpfi-1.5.1-rc1.zip


Changes between MPFI version 1.5 and 1.5.1:
* fix bug in mpfi_sub_fr (reported by Takayuki YAMAGUCHI)
* now require at least GMP version 4.1.0 and MPFR version 2.4.2
* detect availability of mpfr_z_sub, mpfr_z_div, and mpfr_q_sub and use
   a custom implementation for the ones not provided by MPFR (mpfr_z_sub
   appeared in MPFR 3.1.0, the other ones are used in tests only)
* code cleanup (unused variables)
* tadd_q does no more check overflow by default (required too much
   memory)
* sign of zeros choice documented


Please send success and failure reports with "./config.guess" output
to <mpfi-users@lists.gforge.inria.fr>.

If no problems are found, MPFI 1.5.1 should be released around January
18, 2012.

Regards,
Philippe Theveny

_______________________________________________
Mpfi-users mailing list
Mpfi-users@lists.gforge.inria.fr
http://lists.gforge.inria.fr/cgi-bin/mailman/listinfo/mpfi-users
```



---

archive/issue_comments_132721.json:
```json
{
    "body": "<a id='comment:41'></a>\nSorry I have fallen of the face of the internet in the past few days (not quite literally but almost). If there is a bit of time the test suite pass on power7 in a sage setting but with the following messages:\n\n```\nPASS: tinit\nPASS: tinit_set\nWarning: reverted endpoints line 21\nWarning: reverted endpoints line 22\nWarning: reverted endpoints line 23\nWarning: reverted endpoints line 26\nWarning: reverted endpoints line 30\nWarning: reverted endpoints line 37\nWarning: reverted endpoints line 38\nPASS: tintersect\n```\nand\n\n```\nPASS: tsech\nPASS: tset\nWarning: reverted endpoints line 11\nWarning: reverted endpoints line 12\nWarning: reverted endpoints line 13\nWarning: reverted endpoints line 14\nWarning: reverted endpoints line 15\nPASS: tset_d\n```\nNot sure if it can have an impact on some sage use or not.",
    "created_at": "2012-01-16T00:27:42Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132721",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:41'></a>
Sorry I have fallen of the face of the internet in the past few days (not quite literally but almost). If there is a bit of time the test suite pass on power7 in a sage setting but with the following messages:

```
PASS: tinit
PASS: tinit_set
Warning: reverted endpoints line 21
Warning: reverted endpoints line 22
Warning: reverted endpoints line 23
Warning: reverted endpoints line 26
Warning: reverted endpoints line 30
Warning: reverted endpoints line 37
Warning: reverted endpoints line 38
PASS: tintersect
```
and

```
PASS: tsech
PASS: tset
Warning: reverted endpoints line 11
Warning: reverted endpoints line 12
Warning: reverted endpoints line 13
Warning: reverted endpoints line 14
Warning: reverted endpoints line 15
PASS: tset_d
```
Not sure if it can have an impact on some sage use or not.



---

archive/issue_comments_132722.json:
```json
{
    "body": "<a id='comment:42'></a>\nFrancois,\n\n> Not sure if it can have an impact on some sage use or not.\n\n\nI reported the same warnings to the MPFI developers when 1.5.0 came out\n(http://lists.gforge.inria.fr/pipermail/mpfi-users/2011-May/000023.html)\nbut got no feedback. I will ask them again.\n\nPaul",
    "created_at": "2012-01-16T07:49:44Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132722",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:42'></a>
Francois,

> Not sure if it can have an impact on some sage use or not.


I reported the same warnings to the MPFI developers when 1.5.0 came out
(http://lists.gforge.inria.fr/pipermail/mpfi-users/2011-May/000023.html)
but got no feedback. I will ask them again.

Paul



---

archive/issue_comments_132723.json:
```json
{
    "body": "<a id='comment:43'></a>\nFYI I get the same warnings, on the same kind of architecture.\n\nAnd as far as the spkg is concerned, I'd prefer to wait until thursday when there is some sage meeting in Paris to package directly MPFI 1.5.1 on top of#12131. Unless someone has a very good reason for me to do it earlier with 1.5.1.rc1.",
    "created_at": "2012-01-16T07:54:33Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132723",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:43'></a>
FYI I get the same warnings, on the same kind of architecture.

And as far as the spkg is concerned, I'd prefer to wait until thursday when there is some sage meeting in Paris to package directly MPFI 1.5.1 on top of#12131. Unless someone has a very good reason for me to do it earlier with 1.5.1.rc1.



---

archive/issue_events_098945.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2012-01-23T14:38:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12171#event-98945"
}
```



---

archive/issue_events_098946.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2012-01-23T14:38:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12171#event-98946"
}
```



---

archive/issue_events_098947.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2012-01-23T14:38:48Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "rename": {
        "from": "Update MPFI to 1.5.0",
        "to": "Update MPFI to 1.5.1"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12171#event-98947"
}
```



---

archive/issue_comments_132724.json:
```json
{
    "body": "<a id='comment:44'></a>\nHere comes finally a 1.5.1 spkg rebased on #12131 \n\nYou can find it at http://perso.telecom-paristech.fr/~flori/sage/mpfi-1.5.1.spkg\n\nI slightly updated the description and license info as well.",
    "created_at": "2012-01-23T14:38:48Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132724",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:44'></a>
Here comes finally a 1.5.1 spkg rebased on #12131 

You can find it at http://perso.telecom-paristech.fr/~flori/sage/mpfi-1.5.1.spkg

I slightly updated the description and license info as well.



---

archive/issue_comments_132725.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n This is needed for #11666.\n \n-Use http://perso.telecom-paristech.fr/~flori/sage/mpfi-1.5.0.spkg\n+Use http://perso.telecom-paristech.fr/~flori/sage/mpfi-1.5.1.spkg\n \n Apply first trac_12171a.patch, then trac_12171b.patch\n``````\n",
    "created_at": "2012-01-23T14:38:48Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132725",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,5 +1,5 @@
 This is needed for #11666.
 
-Use http://perso.telecom-paristech.fr/~flori/sage/mpfi-1.5.0.spkg
+Use http://perso.telecom-paristech.fr/~flori/sage/mpfi-1.5.1.spkg
 
 Apply first trac_12171a.patch, then trac_12171b.patch
``````




---

archive/issue_comments_132726.json:
```json
{
    "body": "<a id='comment:45'></a>\nShouldn't spkg-check actually be a proper shell script? By that I mean start with something like\n\n```\n#!/bin/sh\n```\nor possibly\n\n```\n#!/usr/bin/env bash\n```",
    "created_at": "2012-01-23T22:04:51Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132726",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:45'></a>
Shouldn't spkg-check actually be a proper shell script? By that I mean start with something like

```
#!/bin/sh
```
or possibly

```
#!/usr/bin/env bash
```



---

archive/issue_comments_132727.json:
```json
{
    "body": "<a id='comment:46'></a>\nfbissey: yes, it should be.  It should also be executable.",
    "created_at": "2012-01-23T22:15:50Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132727",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:46'></a>
fbissey: yes, it should be.  It should also be executable.



---

archive/issue_comments_132728.json:
```json
{
    "body": "<a id='comment:47'></a>\nReplying to [jdemeyer](#comment%3A46):\n> fbissey: yes, it should be.  It should also be executable.\n\n\nIt is executable just not a proper shell script, putting it back to needs work. Everything else looks ok.",
    "created_at": "2012-01-23T22:18:53Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132728",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:47'></a>
Replying to [jdemeyer](#comment%3A46):
> fbissey: yes, it should be.  It should also be executable.


It is executable just not a proper shell script, putting it back to needs work. Everything else looks ok.



---

archive/issue_events_098948.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2012-01-23T22:18:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12171#event-98948"
}
```



---

archive/issue_events_098949.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2012-01-23T22:18:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12171#event-98949"
}
```



---

archive/issue_events_098950.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2012-01-23T23:07:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12171#event-98950"
}
```



---

archive/issue_events_098951.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2012-01-23T23:07:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12171#event-98951"
}
```



---

archive/issue_comments_132729.json:
```json
{
    "body": "<a id='comment:48'></a>\nSorry about that, I definitely tried to repackage that one and mpfr one too quickly from scratch on my personal computer and mixed everything.\n\nIt should be ok now (same address as before).",
    "created_at": "2012-01-23T23:07:34Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132729",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:48'></a>
Sorry about that, I definitely tried to repackage that one and mpfr one too quickly from scratch on my personal computer and mixed everything.

It should be ok now (same address as before).



---

archive/issue_comments_132730.json:
```json
{
    "body": "<a id='comment:49'></a>\nOK, I am putting it back to positive review, looks all right, survives basic testing.",
    "created_at": "2012-01-23T23:31:07Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132730",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:49'></a>
OK, I am putting it back to positive review, looks all right, survives basic testing.



---

archive/issue_events_098952.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2012-01-23T23:31:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12171#event-98952"
}
```



---

archive/issue_events_098953.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2012-01-23T23:31:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12171#event-98953"
}
```



---

archive/issue_events_098954.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-24T20:44:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12171#event-98954"
}
```



---

archive/issue_events_098955.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-24T20:44:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12171#event-98955"
}
```



---

archive/issue_comments_132731.json:
```json
{
    "body": "<a id='comment:50'></a>\nI actually get the doctest failure\n\n```\nsage -t  -force_lib devel/sage/sage/rings/real_mpfi.pyx\n**********************************************************************\nFile \"/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta2/devel/sage-main/sage/rings/real_mpfi.pyx\", line 4143:\n    sage: 0 in (RealField(2000)(-19/3).gamma() - RealIntervalField(1000)(-19/3).gamma())\nExpected:\n    True\nGot:\n    False\n**********************************************************************\n```",
    "created_at": "2012-01-24T20:44:38Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132731",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:50'></a>
I actually get the doctest failure

```
sage -t  -force_lib devel/sage/sage/rings/real_mpfi.pyx
**********************************************************************
File "/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta2/devel/sage-main/sage/rings/real_mpfi.pyx", line 4143:
    sage: 0 in (RealField(2000)(-19/3).gamma() - RealIntervalField(1000)(-19/3).gamma())
Expected:
    True
Got:
    False
**********************************************************************
```



---

archive/issue_comments_132732.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,4 +2,4 @@\n \n Use http://perso.telecom-paristech.fr/~flori/sage/mpfi-1.5.1.spkg\n \n-Apply first trac_12171a.patch, then trac_12171b.patch\n+Apply first [attachment:trac_12171a.patch], then [attachment:trac_12171b.patch]\n``````\n",
    "created_at": "2012-01-24T20:44:38Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132732",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,4 +2,4 @@
 
 Use http://perso.telecom-paristech.fr/~flori/sage/mpfi-1.5.1.spkg
 
-Apply first trac_12171a.patch, then trac_12171b.patch
+Apply first [attachment:trac_12171a.patch], then [attachment:trac_12171b.patch]
``````




---

archive/issue_comments_132733.json:
```json
{
    "body": "<a id='comment:51'></a>\nReplying to [jdemeyer](#comment%3A50):\n> I actually get the doctest failure\n> \n> ```\n> sage -t  -force_lib devel/sage/sage/rings/real_mpfi.pyx\n> **********************************************************************\n> File \"/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta2/devel/sage-main/sage/rings/real_mpfi.pyx\", line 4143:\n>     sage: 0 in (RealField(2000)(-19/3).gamma() - RealIntervalField(1000)(-19/3).gamma())\n> Expected:\n>     True\n> Got:\n>     False\n> **********************************************************************\n> ```\n\nIs it a 32 bit or 64 bit system? Or it doesn't matter? Was it 5.0_beta1?",
    "created_at": "2012-01-24T21:19:26Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132733",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:51'></a>
Replying to [jdemeyer](#comment%3A50):
> I actually get the doctest failure
> 
> ```
> sage -t  -force_lib devel/sage/sage/rings/real_mpfi.pyx
> **********************************************************************
> File "/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta2/devel/sage-main/sage/rings/real_mpfi.pyx", line 4143:
>     sage: 0 in (RealField(2000)(-19/3).gamma() - RealIntervalField(1000)(-19/3).gamma())
> Expected:
>     True
> Got:
>     False
> **********************************************************************
> ```

Is it a 32 bit or 64 bit system? Or it doesn't matter? Was it 5.0_beta1?



---

archive/issue_comments_132734.json:
```json
{
    "body": "<a id='comment:52'></a>\nSorry, should have mentioned this.  It happened on sage.math, with sage-5.0.beta1 + various other patches + #12171.  I have not tried a plain sage-5.0.beta1 + #12171.",
    "created_at": "2012-01-24T21:25:05Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132734",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:52'></a>
Sorry, should have mentioned this.  It happened on sage.math, with sage-5.0.beta1 + various other patches + #12171.  I have not tried a plain sage-5.0.beta1 + #12171.



---

archive/issue_comments_132735.json:
```json
{
    "body": "<a id='comment:53'></a>\nI haven't noticed any of that in the prealpha, interestingly enough the time out on power7 apparently happened on a call to .gamma(). I will try 5.0.beta1.",
    "created_at": "2012-01-24T21:34:19Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132735",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:53'></a>
I haven't noticed any of that in the prealpha, interestingly enough the time out on power7 apparently happened on a call to .gamma(). I will try 5.0.beta1.



---

archive/issue_comments_132736.json:
```json
{
    "body": "<a id='comment:54'></a>\nOn my 64 bit linux box after accounting for #12349 (which came out of nowhere suddenly) and applying this ticket\n\n```\nfbissey@QCD-nzi3 /home/work/fbissey/sandbox/sage-5.0.beta1 $ ./sage -t -long -force_lib devel/sage/sage/rings/real_mpfi.pyx\nsage -t -long -force_lib \"devel/sage/sage/rings/real_mpfi.pyx\"\n         [1.3 s]\n \n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 1.3 seconds\n```",
    "created_at": "2012-01-25T03:27:29Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132736",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:54'></a>
On my 64 bit linux box after accounting for #12349 (which came out of nowhere suddenly) and applying this ticket

```
fbissey@QCD-nzi3 /home/work/fbissey/sandbox/sage-5.0.beta1 $ ./sage -t -long -force_lib devel/sage/sage/rings/real_mpfi.pyx
sage -t -long -force_lib "devel/sage/sage/rings/real_mpfi.pyx"
         [1.3 s]
 
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 1.3 seconds
```



---

archive/issue_comments_132737.json:
```json
{
    "body": "<a id='comment:55'></a>\nReplying to [jdemeyer](#comment%3A50):\n> I actually get the doctest failure [...]\n\n\nJeroen, what do you get for the following?\n\n```\nsage: (RealField(2000)(-19/3).gamma() - RealIntervalField(1000)(-19/3).gamma())\n```\n\nMy guess is that this problem is due to the one mentioned in comment [comment:9],\nwhich is a bug already present in Sage, and thus separate from this ticket (however\nI don't know why the doctest worked before...)\n\nPaul",
    "created_at": "2012-01-25T07:30:02Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132737",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:55'></a>
Replying to [jdemeyer](#comment%3A50):
> I actually get the doctest failure [...]


Jeroen, what do you get for the following?

```
sage: (RealField(2000)(-19/3).gamma() - RealIntervalField(1000)(-19/3).gamma())
```

My guess is that this problem is due to the one mentioned in comment [comment:9],
which is a bug already present in Sage, and thus separate from this ticket (however
I don't know why the doctest worked before...)

Paul



---

archive/issue_comments_132738.json:
```json
{
    "body": "<a id='comment:56'></a>\nthe above problem can be simplified to:\n\n```\nsage: RealIntervalField(54)(-1) > RR(1)\nTrue\n```\nwhich already happens in Sage 4.7.2, and seems to be due to the coercion model.\nI'll open a separate ticket for that (for precision between 2 and 53 we get the correct\nanswer `False`).\n\nPaul",
    "created_at": "2012-01-25T08:15:20Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132738",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:56'></a>
the above problem can be simplified to:

```
sage: RealIntervalField(54)(-1) > RR(1)
True
```
which already happens in Sage 4.7.2, and seems to be due to the coercion model.
I'll open a separate ticket for that (for precision between 2 and 53 we get the correct
answer `False`).

Paul



---

archive/issue_comments_132739.json:
```json
{
    "body": "<a id='comment:57'></a>\n> I'll open a separate ticket for that\n\n\nit is #12353.\n\nPaul",
    "created_at": "2012-01-25T08:22:44Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132739",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:57'></a>
> I'll open a separate ticket for that


it is #12353.

Paul



---

archive/issue_comments_132740.json:
```json
{
    "body": "<a id='comment:58'></a>\nI don't understand what's happening here.\n\nThe test only seems to fail when running `make ptest`, not when running only the one test\n\n```\njdemeyer@sage:/scratch/jdemeyer/merger/sage-5.0.beta2$ ./sage -t  -force_lib devel/sage/sage/rings/real_mpfi.pyx 2>&1 |cat\nsage -t -force_lib \"devel/sage/sage/rings/real_mpfi.pyx\"\n         [2.3 s]\n\n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 2.3 seconds\n```",
    "created_at": "2012-01-25T13:48:30Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132740",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:58'></a>
I don't understand what's happening here.

The test only seems to fail when running `make ptest`, not when running only the one test

```
jdemeyer@sage:/scratch/jdemeyer/merger/sage-5.0.beta2$ ./sage -t  -force_lib devel/sage/sage/rings/real_mpfi.pyx 2>&1 |cat
sage -t -force_lib "devel/sage/sage/rings/real_mpfi.pyx"
         [2.3 s]

----------------------------------------------------------------------
All tests passed!
Total time for all tests: 2.3 seconds
```



---

archive/issue_comments_132741.json:
```json
{
    "body": "<a id='comment:59'></a>\nReplying to [jdemeyer](#comment%3A58):\n> I don't understand what's happening here [...]\n\n\ndid you try the test case from #12353?\n\nPaul",
    "created_at": "2012-01-25T13:54:10Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132741",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:59'></a>
Replying to [jdemeyer](#comment%3A58):
> I don't understand what's happening here [...]


did you try the test case from #12353?

Paul



---

archive/issue_comments_132742.json:
```json
{
    "body": "<a id='comment:60'></a>\nI get\n\n```\nsage: RealIntervalField(53)(-1) > RR(1)\nFalse\nsage: RealIntervalField(54)(-1) > RR(1)\nFalse\nsage: (RealField(2000)(-19/3).gamma() - RealIntervalField(1000)(-19/3).gamma())\n0.?e-302\nsage: 0 in (RealField(2000)(-19/3).gamma() - RealIntervalField(1000)(-19/3).gamma())\nTrue\n```",
    "created_at": "2012-01-25T14:38:55Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132742",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:60'></a>
I get

```
sage: RealIntervalField(53)(-1) > RR(1)
False
sage: RealIntervalField(54)(-1) > RR(1)
False
sage: (RealField(2000)(-19/3).gamma() - RealIntervalField(1000)(-19/3).gamma())
0.?e-302
sage: 0 in (RealField(2000)(-19/3).gamma() - RealIntervalField(1000)(-19/3).gamma())
True
```



---

archive/issue_comments_132743.json:
```json
{
    "body": "<a id='comment:61'></a>\nstrange, with 4.8 just compiled on a Core2 under Ubuntu 10.10 I get:\n\n```\n\ntarte% ./sage\n----------------------------------------------------------------------\n| Sage Version 4.8, Release Date: 2012-01-20                         |\n| Type notebook() for the GUI, and license() for information.        |\n----------------------------------------------------------------------\nsage: RealIntervalField(53)(-1) > RR(1)\nFalse\nsage: RealIntervalField(54)(-1) > RR(1)\nTrue\n```\nPaul",
    "created_at": "2012-01-25T14:48:26Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132743",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:61'></a>
strange, with 4.8 just compiled on a Core2 under Ubuntu 10.10 I get:

```

tarte% ./sage
----------------------------------------------------------------------
| Sage Version 4.8, Release Date: 2012-01-20                         |
| Type notebook() for the GUI, and license() for information.        |
----------------------------------------------------------------------
sage: RealIntervalField(53)(-1) > RR(1)
False
sage: RealIntervalField(54)(-1) > RR(1)
True
```
Paul



---

archive/issue_comments_132744.json:
```json
{
    "body": "<a id='comment:62'></a>\nI get (64 bit linux)\n\n```\n----------------------------------------------------------------------\n| Sage Version 5.0.beta1, Release Date: 2012-01-22                   |\n| Type notebook() for the GUI, and license() for information.        |\n----------------------------------------------------------------------\n**********************************************************************\n*                                                                    *\n* Warning: this is a prerelease version, and it may be unstable.     *\n*                                                                    *\n**********************************************************************\nsage: RealIntervalField(53)(-1) > RR(1)\nFalse\nsage: RealIntervalField(54)(-1) > RR(1)\nFalse\nsage: (RealField(2000)(-19/3).gamma() - RealIntervalField(1000)(-19/3).gamma())\n0.?e-302\nsage: 0 in (RealField(2000)(-19/3).gamma() - RealIntervalField(1000)(-19/3).gamma())\nTrue\n```\nOn OS X 10.5.8 (32bit):\n\n```\nBlueFerniMac1:sage-5.0.beta1 frb15$ ./sage -t -long -force_lib devel/sage/sage/rings/real_mpfi.pyx\nsage -t -long -force_lib \"devel/sage/sage/rings/real_mpfi.pyx\"\n**********************************************************************\nFile \"/Users/frb15/Desktop/sage-5.0.beta1/devel/sage/sage/rings/real_mpfi.pyx\", line 4143:\n    sage: 0 in (RealField(2000)(-19/3).gamma() - RealIntervalField(1000)(-19/3).gamma())\nExpected:\n    True\nGot:\n    False\n**********************************************************************\n1 items had failures:\n   1 of  19 in __main__.example_117\n***Test Failed*** 1 failures.\nFor whitespace errors, see the file /Users/frb15/.sage//tmp/real_mpfi_78068.py\n\t [2.9 s]\n```\nand\n\n```\nBlueFerniMac1:sage-5.0.beta1 frb15$ ./sage\n----------------------------------------------------------------------\n| Sage Version 5.0.beta1, Release Date: 2012-01-22                   |\n| Type notebook() for the GUI, and license() for information.        |\n----------------------------------------------------------------------\n**********************************************************************\n*                                                                    *\n* Warning: this is a prerelease version, and it may be unstable.     *\n*                                                                    *\n**********************************************************************\nsage: RealIntervalField(53)(-1) > RR(1)\nFalse\nsage: RealIntervalField(54)(-1) > RR(1)\nTrue\nsage: (RealField(2000)(-19/3).gamma() - RealIntervalField(1000)(-19/3).gamma())\n1.1?e-303\nsage:  0 in (RealField(2000)(-19/3).gamma() - RealIntervalField(1000)(-19/3).gamma())\nFalse\n```\nso there are differences of behavior between 32 and 64 bit naively.",
    "created_at": "2012-01-25T20:25:17Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132744",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:62'></a>
I get (64 bit linux)

```
----------------------------------------------------------------------
| Sage Version 5.0.beta1, Release Date: 2012-01-22                   |
| Type notebook() for the GUI, and license() for information.        |
----------------------------------------------------------------------
**********************************************************************
*                                                                    *
* Warning: this is a prerelease version, and it may be unstable.     *
*                                                                    *
**********************************************************************
sage: RealIntervalField(53)(-1) > RR(1)
False
sage: RealIntervalField(54)(-1) > RR(1)
False
sage: (RealField(2000)(-19/3).gamma() - RealIntervalField(1000)(-19/3).gamma())
0.?e-302
sage: 0 in (RealField(2000)(-19/3).gamma() - RealIntervalField(1000)(-19/3).gamma())
True
```
On OS X 10.5.8 (32bit):

```
BlueFerniMac1:sage-5.0.beta1 frb15$ ./sage -t -long -force_lib devel/sage/sage/rings/real_mpfi.pyx
sage -t -long -force_lib "devel/sage/sage/rings/real_mpfi.pyx"
**********************************************************************
File "/Users/frb15/Desktop/sage-5.0.beta1/devel/sage/sage/rings/real_mpfi.pyx", line 4143:
    sage: 0 in (RealField(2000)(-19/3).gamma() - RealIntervalField(1000)(-19/3).gamma())
Expected:
    True
Got:
    False
**********************************************************************
1 items had failures:
   1 of  19 in __main__.example_117
***Test Failed*** 1 failures.
For whitespace errors, see the file /Users/frb15/.sage//tmp/real_mpfi_78068.py
	 [2.9 s]
```
and

```
BlueFerniMac1:sage-5.0.beta1 frb15$ ./sage
----------------------------------------------------------------------
| Sage Version 5.0.beta1, Release Date: 2012-01-22                   |
| Type notebook() for the GUI, and license() for information.        |
----------------------------------------------------------------------
**********************************************************************
*                                                                    *
* Warning: this is a prerelease version, and it may be unstable.     *
*                                                                    *
**********************************************************************
sage: RealIntervalField(53)(-1) > RR(1)
False
sage: RealIntervalField(54)(-1) > RR(1)
True
sage: (RealField(2000)(-19/3).gamma() - RealIntervalField(1000)(-19/3).gamma())
1.1?e-303
sage:  0 in (RealField(2000)(-19/3).gamma() - RealIntervalField(1000)(-19/3).gamma())
False
```
so there are differences of behavior between 32 and 64 bit naively.



---

archive/issue_comments_132745.json:
```json
{
    "body": "<a id='comment:63'></a>\nFrancois,\n\nI just built Sage 5.0.beta1 on another 64 bit linux (Core2 under Ubuntu 10.10) and got:\n\n```\ntarte% ./sage\n----------------------------------------------------------------------\n| Sage Version 5.0.beta1, Release Date: 2012-01-22                   |\n| Type notebook() for the GUI, and license() for information.        |\n----------------------------------------------------------------------\n**********************************************************************\n*                                                                    *\n* Warning: this is a prerelease version, and it may be unstable.     *\n*                                                                    *\n**********************************************************************\nsage: RealIntervalField(53)(-1) > RR(1)\nFalse\nsage: RealIntervalField(54)(-1) > RR(1)\nTrue\n```\nPaul",
    "created_at": "2012-01-26T06:57:36Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132745",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:63'></a>
Francois,

I just built Sage 5.0.beta1 on another 64 bit linux (Core2 under Ubuntu 10.10) and got:

```
tarte% ./sage
----------------------------------------------------------------------
| Sage Version 5.0.beta1, Release Date: 2012-01-22                   |
| Type notebook() for the GUI, and license() for information.        |
----------------------------------------------------------------------
**********************************************************************
*                                                                    *
* Warning: this is a prerelease version, and it may be unstable.     *
*                                                                    *
**********************************************************************
sage: RealIntervalField(53)(-1) > RR(1)
False
sage: RealIntervalField(54)(-1) > RR(1)
True
```
Paul



---

archive/issue_comments_132746.json:
```json
{
    "body": "<a id='comment:64'></a>\nThis is way more subtle than I thought then. I did my tests without #11666, did you use #11666 as well as this one?",
    "created_at": "2012-01-28T00:28:21Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132746",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:64'></a>
This is way more subtle than I thought then. I did my tests without #11666, did you use #11666 as well as this one?



---

archive/issue_comments_132747.json:
```json
{
    "body": "<a id='comment:65'></a>\nFrancois,\n\nno, I didn't use #11666. Can anybody reproduce the problem I have (cf #12353)?\nAnyway I believe this is independent from this ticket, since it already happened before\n(e.g., in Sage 4.7.2). Thus it should not prevent a positive review, if this is the only\nremaining issue, and we should solve #12353 independently.\n\nPaul",
    "created_at": "2012-01-28T06:56:10Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132747",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:65'></a>
Francois,

no, I didn't use #11666. Can anybody reproduce the problem I have (cf #12353)?
Anyway I believe this is independent from this ticket, since it already happened before
(e.g., in Sage 4.7.2). Thus it should not prevent a positive review, if this is the only
remaining issue, and we should solve #12353 independently.

Paul



---

archive/issue_comments_132748.json:
```json
{
    "body": "<a id='comment:66'></a>\nEverything I said was *without* #11666.",
    "created_at": "2012-01-29T11:10:26Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132748",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:66'></a>
Everything I said was *without* #11666.



---

archive/issue_comments_132749.json:
```json
{
    "body": "<a id='comment:67'></a>\nReplying to [zimmerma](#comment%3A65):\n> Francois,\n> \n> no, I didn't use #11666. Can anybody reproduce the problem I have (cf #12353)?\n> Anyway I believe this is independent from this ticket, since it already happened before\n> (e.g., in Sage 4.7.2). Thus it should not prevent a positive review, if this is the only\n> remaining issue, and we should solve #12353 independently.\n> \n\nI can reproduce it on OS X 10.5.8 (32bit) and linux on ppc64, but not on linux x86_64. You are probably right that's an orthogonal problem if it can happen as well in the current version of sage.",
    "created_at": "2012-01-30T02:41:59Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132749",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:67'></a>
Replying to [zimmerma](#comment%3A65):
> Francois,
> 
> no, I didn't use #11666. Can anybody reproduce the problem I have (cf #12353)?
> Anyway I believe this is independent from this ticket, since it already happened before
> (e.g., in Sage 4.7.2). Thus it should not prevent a positive review, if this is the only
> remaining issue, and we should solve #12353 independently.
> 

I can reproduce it on OS X 10.5.8 (32bit) and linux on ppc64, but not on linux x86_64. You are probably right that's an orthogonal problem if it can happen as well in the current version of sage.



---

archive/issue_comments_132750.json:
```json
{
    "body": "<a id='comment:68'></a>\nsince this ticket got a positive review at comment [comment:49], and the doctest\nfailure at comment [comment:50] is a separate issue (#12353) I put this back as \"needs review\".\n\nPaul",
    "created_at": "2012-01-30T08:06:01Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132750",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:68'></a>
since this ticket got a positive review at comment [comment:49], and the doctest
failure at comment [comment:50] is a separate issue (#12353) I put this back as "needs review".

Paul



---

archive/issue_events_098956.json:
```json
{
    "actor": "https://github.com/zimmermann6",
    "created_at": "2012-01-30T08:06:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12171#event-98956"
}
```



---

archive/issue_events_098957.json:
```json
{
    "actor": "https://github.com/zimmermann6",
    "created_at": "2012-01-30T08:06:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12171#event-98957"
}
```



---

archive/issue_events_098958.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-30T10:16:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12171#event-98958"
}
```



---

archive/issue_events_098959.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-30T10:16:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12171#event-98959"
}
```



---

archive/issue_comments_132751.json:
```json
{
    "body": "<a id='comment:69'></a>\nIf nothing on this ticket changed, I guess we're back to positive review *with* a dependency on #12353.",
    "created_at": "2012-01-30T10:16:05Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132751",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:69'></a>
If nothing on this ticket changed, I guess we're back to positive review *with* a dependency on #12353.



---

archive/issue_comments_132752.json:
```json
{
    "body": "**Changing dependencies** from \"#12131\" to \"#12131, #12353\".",
    "created_at": "2012-01-30T10:16:05Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132752",
    "user": "https://github.com/jdemeyer"
}
```

**Changing dependencies** from "#12131" to "#12131, #12353".



---

archive/issue_comments_132753.json:
```json
{
    "body": "<a id='comment:70'></a>\nReplying to [jdemeyer](#comment%3A69):\n> If nothing on this ticket changed, I guess we're back to positive review *with* a dependency on #12353.\n\n\ngreat! I'm working in #12353.\n\nPaul",
    "created_at": "2012-01-30T10:26:58Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132753",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:70'></a>
Replying to [jdemeyer](#comment%3A69):
> If nothing on this ticket changed, I guess we're back to positive review *with* a dependency on #12353.


great! I'm working in #12353.

Paul



---

archive/issue_comments_132754.json:
```json
{
    "body": "<a id='comment:71'></a>\nJeroen, now that #12353 has been fixed, you can merge this one too.\n\nPaul",
    "created_at": "2012-02-16T11:22:34Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132754",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:71'></a>
Jeroen, now that #12353 has been fixed, you can merge this one too.

Paul



---

archive/issue_comments_132755.json:
```json
{
    "body": "<a id='comment:72'></a>\nReplying to [zimmerma](#comment%3A71):\n> Jeroen, now that #12353 has been fixed, you can merge this one too.\n\n\nDon't worry, it's on my radar and should be merged in sage-5.0.beta5 if no further problems arise.",
    "created_at": "2012-02-16T21:24:30Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132755",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:72'></a>
Replying to [zimmerma](#comment%3A71):
> Jeroen, now that #12353 has been fixed, you can merge this one too.


Don't worry, it's on my radar and should be merged in sage-5.0.beta5 if no further problems arise.



---

archive/issue_events_098960.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-20T19:37:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12171#event-98960"
}
```



---

archive/issue_events_098961.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-20T19:37:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12171#event-98961"
}
```



---

archive/issue_comments_132756.json:
```json
{
    "body": "<a id='comment:73'></a>\nIn `spkg-install`, you should `unset RM` as old Sage versions set `RM=rm` which breaks `libtool`.  For example, when upgrading from sage-4.5.3:\n\n```\n/bin/bash ../libtool --tag=CC   --mode=link gcc  -O2 -g -fPIC  -L/mnt/usb1/scratch/buildbot/sage/sage-1/sage_upgrade/build/sage-4.5.3-5.0.beta5/local/lib -L/mnt/usb1/scratch/buildbot/sage/sage-1/sage_upgrade/build/sage-4.5.3-5.0.beta5/local/lib  -o libmpfi.la -rpath /mnt/usb1/scratch/buildbot/sage/sage-1/sage_upgrade/build/sage-4.5.3-5.0.beta5/local/lib abs.lo acos.lo acosh.lo add.lo add_d.lo add_fr.lo add_q.lo add_si.lo add_ui.lo add_z.lo alea.lo asin.lo asinh.lo atan2.lo atan.lo atanh.lo bisect.lo blow.lo cbrt.lo clear.lo cmp.lo cmp_sym_pi.lo constants.lo cos.lo cosh.lo csc.lo csch.lo cot.lo coth.lo d_div.lo d_sub.lo diam.lo div.lo div_2exp.lo div_2si.lo div_2ui.lo div_d.lo div_fr.lo div_q.lo div_si.lo div_ui.lo div_z.lo error.lo exp.lo exp2.lo expm1.lo fr_div.lo fr_sub.lo get_endpoints.lo get_fr.lo get_d.lo get_prec.lo get_version.lo has_zero.lo hypot.lo increase.lo init.lo intersect.lo interv_d.lo interv_fr.lo interv_q.lo interv_si.lo interv_ui.lo interv_z.lo inp_str.lo inv.lo is_empty.lo is_inside.lo log.lo log10.lo log1p.lo log2.lo mag.lo mid.lo mig.lo mul.lo mul_2exp.lo mul_2si.lo mul_2ui.lo mul_d.lo mul_fr.lo mul_q.lo mul_si.lo mul_ui.lo mul_z.lo neg.lo out_str.lo predicates.lo print_binary.lo put.lo put_d.lo put_fr.lo put_q.lo put_si.lo put_ui.lo put_z.lo q_div.lo q_sub.lo quadrant.lo revert_if_needed.lo round_prec.lo sec.lo sech.lo set.lo set_d.lo set_fr.lo set_prec.lo set_q.lo set_si.lo set_str.lo set_ui.lo set_z.lo si_div.lo si_sub.lo sign.lo sin.lo sinh.lo sqr.lo sqrt.lo sub.lo sub_d.lo sub_fr.lo sub_q.lo sub_si.lo sub_ui.lo sub_z.lo swap.lo tan.lo tanh.lo ui_div.lo ui_sub.lo union.lo urandom.lo z_div.lo z_sub.lo  -lmpfr -lgmp\nlibtool: link: gcc -shared  -fPIC -DPIC  .libs/abs.o .libs/acos.o .libs/acosh.o .libs/add.o .libs/add_d.o .libs/add_fr.o .libs/add_q.o .libs/add_si.o .libs/add_ui.o .libs/add_z.o .libs/alea.o .libs/asin.o .libs/asinh.o .libs/atan2.o .libs/atan.o .libs/atanh.o .libs/bisect.o .libs/blow.o .libs/cbrt.o .libs/clear.o .libs/cmp.o .libs/cmp_sym_pi.o .libs/constants.o .libs/cos.o .libs/cosh.o .libs/csc.o .libs/csch.o .libs/cot.o .libs/coth.o .libs/d_div.o .libs/d_sub.o .libs/diam.o .libs/div.o .libs/div_2exp.o .libs/div_2si.o .libs/div_2ui.o .libs/div_d.o .libs/div_fr.o .libs/div_q.o .libs/div_si.o .libs/div_ui.o .libs/div_z.o .libs/error.o .libs/exp.o .libs/exp2.o .libs/expm1.o .libs/fr_div.o .libs/fr_sub.o .libs/get_endpoints.o .libs/get_fr.o .libs/get_d.o .libs/get_prec.o .libs/get_version.o .libs/has_zero.o .libs/hypot.o .libs/increase.o .libs/init.o .libs/intersect.o .libs/interv_d.o .libs/interv_fr.o .libs/interv_q.o .libs/interv_si.o .libs/interv_ui.o .libs/interv_z.o .libs/inp_str.o .libs/inv.o .libs/is_empty.o .libs/is_inside.o .libs/log.o .libs/log10.o .libs/log1p.o .libs/log2.o .libs/mag.o .libs/mid.o .libs/mig.o .libs/mul.o .libs/mul_2exp.o .libs/mul_2si.o .libs/mul_2ui.o .libs/mul_d.o .libs/mul_fr.o .libs/mul_q.o .libs/mul_si.o .libs/mul_ui.o .libs/mul_z.o .libs/neg.o .libs/out_str.o .libs/predicates.o .libs/print_binary.o .libs/put.o .libs/put_d.o .libs/put_fr.o .libs/put_q.o .libs/put_si.o .libs/put_ui.o .libs/put_z.o .libs/q_div.o .libs/q_sub.o .libs/quadrant.o .libs/revert_if_needed.o .libs/round_prec.o .libs/sec.o .libs/sech.o .libs/set.o .libs/set_d.o .libs/set_fr.o .libs/set_prec.o .libs/set_q.o .libs/set_si.o .libs/set_str.o .libs/set_ui.o .libs/set_z.o .libs/si_div.o .libs/si_sub.o .libs/sign.o .libs/sin.o .libs/sinh.o .libs/sqr.o .libs/sqrt.o .libs/sub.o .libs/sub_d.o .libs/sub_fr.o .libs/sub_q.o .libs/sub_si.o .libs/sub_ui.o .libs/sub_z.o .libs/swap.o .libs/tan.o .libs/tanh.o .libs/ui_div.o .libs/ui_sub.o .libs/union.o .libs/urandom.o .libs/z_div.o .libs/z_sub.o   -Wl,-rpath -Wl,/mnt/usb1/scratch/buildbot/sage/sage-1/sage_upgrade/build/sage-4.5.3-5.0.beta5/local/lib -Wl,-rpath -Wl,/mnt/usb1/scratch/buildbot/sage/sage-1/sage_upgrade/build/sage-4.5.3-5.0.beta5/local/lib -L/mnt/usb1/scratch/buildbot/sage/sage-1/sage_upgrade/build/sage-4.5.3-5.0.beta5/local/lib /mnt/usb1/scratch/buildbot/sage/sage-1/sage_upgrade/build/sage-4.5.3-5.0.beta5/local/lib/libmpfr.so /mnt/usb1/scratch/buildbot/sage/sage-1/sage_upgrade/build/sage-4.5.3-5.0.beta5/local/lib/libgmp.so  -O2   -Wl,-soname -Wl,libmpfi.so.0 -o .libs/libmpfi.so.0.0.0\nlibtool: link: (cd \".libs\" && rm \"libmpfi.so.0\" && ln -s \"libmpfi.so.0.0.0\" \"libmpfi.so.0\")\nrm: cannot remove `libmpfi.so.0': No such file or directory\nmake[2]: *** [libmpfi.la] Error 1\n```",
    "created_at": "2012-02-20T19:37:56Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132756",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:73'></a>
In `spkg-install`, you should `unset RM` as old Sage versions set `RM=rm` which breaks `libtool`.  For example, when upgrading from sage-4.5.3:

```
/bin/bash ../libtool --tag=CC   --mode=link gcc  -O2 -g -fPIC  -L/mnt/usb1/scratch/buildbot/sage/sage-1/sage_upgrade/build/sage-4.5.3-5.0.beta5/local/lib -L/mnt/usb1/scratch/buildbot/sage/sage-1/sage_upgrade/build/sage-4.5.3-5.0.beta5/local/lib  -o libmpfi.la -rpath /mnt/usb1/scratch/buildbot/sage/sage-1/sage_upgrade/build/sage-4.5.3-5.0.beta5/local/lib abs.lo acos.lo acosh.lo add.lo add_d.lo add_fr.lo add_q.lo add_si.lo add_ui.lo add_z.lo alea.lo asin.lo asinh.lo atan2.lo atan.lo atanh.lo bisect.lo blow.lo cbrt.lo clear.lo cmp.lo cmp_sym_pi.lo constants.lo cos.lo cosh.lo csc.lo csch.lo cot.lo coth.lo d_div.lo d_sub.lo diam.lo div.lo div_2exp.lo div_2si.lo div_2ui.lo div_d.lo div_fr.lo div_q.lo div_si.lo div_ui.lo div_z.lo error.lo exp.lo exp2.lo expm1.lo fr_div.lo fr_sub.lo get_endpoints.lo get_fr.lo get_d.lo get_prec.lo get_version.lo has_zero.lo hypot.lo increase.lo init.lo intersect.lo interv_d.lo interv_fr.lo interv_q.lo interv_si.lo interv_ui.lo interv_z.lo inp_str.lo inv.lo is_empty.lo is_inside.lo log.lo log10.lo log1p.lo log2.lo mag.lo mid.lo mig.lo mul.lo mul_2exp.lo mul_2si.lo mul_2ui.lo mul_d.lo mul_fr.lo mul_q.lo mul_si.lo mul_ui.lo mul_z.lo neg.lo out_str.lo predicates.lo print_binary.lo put.lo put_d.lo put_fr.lo put_q.lo put_si.lo put_ui.lo put_z.lo q_div.lo q_sub.lo quadrant.lo revert_if_needed.lo round_prec.lo sec.lo sech.lo set.lo set_d.lo set_fr.lo set_prec.lo set_q.lo set_si.lo set_str.lo set_ui.lo set_z.lo si_div.lo si_sub.lo sign.lo sin.lo sinh.lo sqr.lo sqrt.lo sub.lo sub_d.lo sub_fr.lo sub_q.lo sub_si.lo sub_ui.lo sub_z.lo swap.lo tan.lo tanh.lo ui_div.lo ui_sub.lo union.lo urandom.lo z_div.lo z_sub.lo  -lmpfr -lgmp
libtool: link: gcc -shared  -fPIC -DPIC  .libs/abs.o .libs/acos.o .libs/acosh.o .libs/add.o .libs/add_d.o .libs/add_fr.o .libs/add_q.o .libs/add_si.o .libs/add_ui.o .libs/add_z.o .libs/alea.o .libs/asin.o .libs/asinh.o .libs/atan2.o .libs/atan.o .libs/atanh.o .libs/bisect.o .libs/blow.o .libs/cbrt.o .libs/clear.o .libs/cmp.o .libs/cmp_sym_pi.o .libs/constants.o .libs/cos.o .libs/cosh.o .libs/csc.o .libs/csch.o .libs/cot.o .libs/coth.o .libs/d_div.o .libs/d_sub.o .libs/diam.o .libs/div.o .libs/div_2exp.o .libs/div_2si.o .libs/div_2ui.o .libs/div_d.o .libs/div_fr.o .libs/div_q.o .libs/div_si.o .libs/div_ui.o .libs/div_z.o .libs/error.o .libs/exp.o .libs/exp2.o .libs/expm1.o .libs/fr_div.o .libs/fr_sub.o .libs/get_endpoints.o .libs/get_fr.o .libs/get_d.o .libs/get_prec.o .libs/get_version.o .libs/has_zero.o .libs/hypot.o .libs/increase.o .libs/init.o .libs/intersect.o .libs/interv_d.o .libs/interv_fr.o .libs/interv_q.o .libs/interv_si.o .libs/interv_ui.o .libs/interv_z.o .libs/inp_str.o .libs/inv.o .libs/is_empty.o .libs/is_inside.o .libs/log.o .libs/log10.o .libs/log1p.o .libs/log2.o .libs/mag.o .libs/mid.o .libs/mig.o .libs/mul.o .libs/mul_2exp.o .libs/mul_2si.o .libs/mul_2ui.o .libs/mul_d.o .libs/mul_fr.o .libs/mul_q.o .libs/mul_si.o .libs/mul_ui.o .libs/mul_z.o .libs/neg.o .libs/out_str.o .libs/predicates.o .libs/print_binary.o .libs/put.o .libs/put_d.o .libs/put_fr.o .libs/put_q.o .libs/put_si.o .libs/put_ui.o .libs/put_z.o .libs/q_div.o .libs/q_sub.o .libs/quadrant.o .libs/revert_if_needed.o .libs/round_prec.o .libs/sec.o .libs/sech.o .libs/set.o .libs/set_d.o .libs/set_fr.o .libs/set_prec.o .libs/set_q.o .libs/set_si.o .libs/set_str.o .libs/set_ui.o .libs/set_z.o .libs/si_div.o .libs/si_sub.o .libs/sign.o .libs/sin.o .libs/sinh.o .libs/sqr.o .libs/sqrt.o .libs/sub.o .libs/sub_d.o .libs/sub_fr.o .libs/sub_q.o .libs/sub_si.o .libs/sub_ui.o .libs/sub_z.o .libs/swap.o .libs/tan.o .libs/tanh.o .libs/ui_div.o .libs/ui_sub.o .libs/union.o .libs/urandom.o .libs/z_div.o .libs/z_sub.o   -Wl,-rpath -Wl,/mnt/usb1/scratch/buildbot/sage/sage-1/sage_upgrade/build/sage-4.5.3-5.0.beta5/local/lib -Wl,-rpath -Wl,/mnt/usb1/scratch/buildbot/sage/sage-1/sage_upgrade/build/sage-4.5.3-5.0.beta5/local/lib -L/mnt/usb1/scratch/buildbot/sage/sage-1/sage_upgrade/build/sage-4.5.3-5.0.beta5/local/lib /mnt/usb1/scratch/buildbot/sage/sage-1/sage_upgrade/build/sage-4.5.3-5.0.beta5/local/lib/libmpfr.so /mnt/usb1/scratch/buildbot/sage/sage-1/sage_upgrade/build/sage-4.5.3-5.0.beta5/local/lib/libgmp.so  -O2   -Wl,-soname -Wl,libmpfi.so.0 -o .libs/libmpfi.so.0.0.0
libtool: link: (cd ".libs" && rm "libmpfi.so.0" && ln -s "libmpfi.so.0.0.0" "libmpfi.so.0")
rm: cannot remove `libmpfi.so.0': No such file or directory
make[2]: *** [libmpfi.la] Error 1
```



---

archive/issue_comments_132757.json:
```json
{
    "body": "<a id='comment:74'></a>\nAn updated package is available at the same address.\n\nI also added a mecurial tag for mpfi-1.5.1.",
    "created_at": "2012-02-22T10:26:11Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132757",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:74'></a>
An updated package is available at the same address.

I also added a mecurial tag for mpfi-1.5.1.



---

archive/issue_events_098962.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2012-02-22T10:26:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12171#event-98962"
}
```



---

archive/issue_events_098963.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2012-02-22T10:26:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12171#event-98963"
}
```



---

archive/issue_events_098964.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-02-22T19:53:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12171#event-98964"
}
```



---

archive/issue_events_098965.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-02-22T19:53:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12171#event-98965"
}
```



---

archive/issue_comments_132758.json:
```json
{
    "body": "**Changing keywords** from \"sd35\" to \"sd35 sd36\".",
    "created_at": "2012-02-22T19:53:20Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132758",
    "user": "https://github.com/vbraun"
}
```

**Changing keywords** from "sd35" to "sd35 sd36".



---

archive/issue_comments_132759.json:
```json
{
    "body": "<a id='comment:75'></a>\nLooks good!",
    "created_at": "2012-02-22T19:53:20Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132759",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:75'></a>
Looks good!



---

archive/issue_events_098966.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-27T11:21:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12171#event-98966"
}
```



---

archive/issue_events_098967.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-27T11:21:32Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12171#event-98967"
}
```



---

archive/issue_comments_132760.json:
```json
{
    "body": "**Merged:** sage-5.0.beta6",
    "created_at": "2012-02-27T11:21:32Z",
    "issue": "https://github.com/sagemath/sage/issues/12171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12171#issuecomment-132760",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.0.beta6
