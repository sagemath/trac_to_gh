# Issue 12587: simplicial complexes lack hash function

archive/issues_012415.json:
```json
{
    "assignees": [],
    "body": "Simplicial complexes are lacking a proper hash function. See the example below.\n\n```\nsage: S = SimplicialComplex([[]]); S\nSimplicial complex with vertex set () and facets {()}\nsage: hash(S)\n-3899221226149827755\nsage: S.__hash__??\nSource:\n    def __hash__(self):\n        return hash(self.__repr__())\n```\n\n---\n\nApply:\n\n- [attachment: trac_12587-simplicial_complex_hash-ts.patch.gz](https://github.com/sagemath/sage/files/ticket12587/trac_12587-simplicial_complex_hash-ts.patch.gz)\n- [attachment: trac_12587-simplicial_complex_hash_review-cs.patch.gz](https://github.com/sagemath/sage/files/ticket12587/trac_12587-simplicial_complex_hash_review-cs.patch.gz)\n- [attachment: trac_12587-ref-jhp.patch.gz](https://github.com/sagemath/sage/files/ticket12587/trac_12587-ref-jhp.patch.gz)\n\nDepends on #13226\nDepends on #13244\nDepends on #13590\n\nAssignee: **sage-combinat**\n\nCC:  sage-combinat\n\nReviewer: **Christian Stump, John Palmieri**\n\nAuthor: **Travis Scrimshaw**\n\nMerged: **sage-5.6.beta1**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/12587_\n\n",
    "closed_at": "2012-12-21T09:31:20Z",
    "created_at": "2012-02-26T12:21:04Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "simplicial complexes lack hash function",
    "type": "issue",
    "updated_at": "2013-01-02T14:53:10Z",
    "url": "https://github.com/sagemath/sage/issues/12587",
    "user": "https://github.com/sagetrac-vpilaud"
}
```
Simplicial complexes are lacking a proper hash function. See the example below.

```
sage: S = SimplicialComplex([[]]); S
Simplicial complex with vertex set () and facets {()}
sage: hash(S)
-3899221226149827755
sage: S.__hash__??
Source:
    def __hash__(self):
        return hash(self.__repr__())
```

---

Apply:

- [attachment: trac_12587-simplicial_complex_hash-ts.patch.gz](https://github.com/sagemath/sage/files/ticket12587/trac_12587-simplicial_complex_hash-ts.patch.gz)
- [attachment: trac_12587-simplicial_complex_hash_review-cs.patch.gz](https://github.com/sagemath/sage/files/ticket12587/trac_12587-simplicial_complex_hash_review-cs.patch.gz)
- [attachment: trac_12587-ref-jhp.patch.gz](https://github.com/sagemath/sage/files/ticket12587/trac_12587-ref-jhp.patch.gz)

Depends on #13226
Depends on #13244
Depends on #13590

Assignee: **sage-combinat**

CC:  sage-combinat

Reviewer: **Christian Stump, John Palmieri**

Author: **Travis Scrimshaw**

Merged: **sage-5.6.beta1**

_Issue created by migration from https://trac.sagemath.org/ticket/12587_





---

archive/issue_events_158039.json:
```json
{
    "actor": "https://github.com/sagetrac-vpilaud",
    "created_at": "2012-02-26T12:21:04Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "milestone_number": null,
    "milestone_title": "sage-5.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12587#event-158039"
}
```



---

archive/issue_events_158040.json:
```json
{
    "actor": "https://github.com/sagetrac-vpilaud",
    "created_at": "2012-02-26T12:21:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "component: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12587#event-158040"
}
```



---

archive/issue_events_158041.json:
```json
{
    "actor": "https://github.com/sagetrac-vpilaud",
    "created_at": "2012-02-26T12:21:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12587#event-158041"
}
```



---

archive/issue_events_158042.json:
```json
{
    "actor": "https://github.com/sagetrac-vpilaud",
    "created_at": "2012-02-26T12:21:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12587#event-158042"
}
```



---

archive/issue_events_158043.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2012-08-17T04:13:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12587#event-158043"
}
```



---

archive/issue_events_158044.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2012-08-17T04:13:09Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "milestone_number": null,
    "milestone_title": "sage-5.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12587#event-158044"
}
```



---

archive/issue_events_158045.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2012-08-17T04:13:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12587#event-158045"
}
```



---

archive/issue_events_158046.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2012-08-17T04:13:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12587#event-158046"
}
```



---

archive/issue_comments_142036.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nSince SimplicialComplex is mutable, the hash function must depend on something immutable. Because of this, I would like for it to be handled like Graph and throw a TypeError. However there are many dependencies on SimplicialComplex being hashable, so my thought behind setting this to wontfix is that repr is the only immutable part of the class.",
    "created_at": "2012-08-17T04:13:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142036",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:1'>Comment 1:</a>
Since SimplicialComplex is mutable, the hash function must depend on something immutable. Because of this, I would like for it to be handled like Graph and throw a TypeError. However there are many dependencies on SimplicialComplex being hashable, so my thought behind setting this to wontfix is that repr is the only immutable part of the class.



---

archive/issue_comments_142037.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nWhy not instead modify the `SimplicialComplex` class so that it is immutable?",
    "created_at": "2012-08-17T05:43:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142037",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:2'>Comment 2:</a>
Why not instead modify the `SimplicialComplex` class so that it is immutable?



---

archive/issue_events_158047.json:
```json
{
    "actor": "https://github.com/sagetrac-sluther",
    "created_at": "2012-08-17T09:44:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12587#event-158047"
}
```



---

archive/issue_events_158048.json:
```json
{
    "actor": "https://github.com/sagetrac-sluther",
    "created_at": "2012-08-17T09:44:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12587#event-158048"
}
```



---

archive/issue_events_158049.json:
```json
{
    "actor": "https://github.com/sagetrac-sluther",
    "created_at": "2012-08-17T09:44:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12587#event-158049"
}
```



---

archive/issue_events_158050.json:
```json
{
    "actor": "https://github.com/sagetrac-sluther",
    "created_at": "2012-08-17T09:44:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12587#event-158050"
}
```



---

archive/issue_comments_142038.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nBeing mutable and hashable is definetly a bug. See [1].\n\nI don't understand what you mean with repr is the only immutable part, because it may change when the object changes.\n\n[1] http://docs.python.org/glossary.html#term-hashable",
    "created_at": "2012-08-17T09:44:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142038",
    "user": "https://github.com/sagetrac-sluther"
}
```

<a id='comment:3'>Comment 3:</a>
Being mutable and hashable is definetly a bug. See [1].

I don't understand what you mean with repr is the only immutable part, because it may change when the object changes.

[1] http://docs.python.org/glossary.html#term-hashable



---

archive/issue_events_158051.json:
```json
{
    "actor": "https://github.com/sagetrac-sluther",
    "created_at": "2012-08-17T09:44:34Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "milestone_number": null,
    "milestone_title": "sage-5.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12587#event-158051"
}
```



---

archive/issue_comments_142039.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nReplying to [sluther](#comment%3A3):\n> Being mutable and hashable is definetly a bug. See [1].\n> \n> I don't understand what you mean with repr is the only immutable part, because it may change when the object changes.\n> \n> [1] http://docs.python.org/glossary.html#term-hashable\n\nYou're correct. I forgot that repr outputs the facets.\n\nHowever I'm not in favor of making SimplicialComplex an immutable object outright since it contains mutators and there are inductive constructions which would require you to build copies. For example, suppose you had an algorithm which built a simplicial complex facet by facet, at each step you would need to clone the SimplicialComplex object in the mutator. Thus extra memory handling and multiple transient objects.\n\nPerhaps we should do something closer to ClonableArray and have an attribute _is_mutable which we set to True when `__hash__()` is called and in any mutators, we do something of the following:\n\n```\nif _is_mutable:\n    raise TypeError, \"This simplicial complex is no longer mutable\"\n```\nThus making it immutable as soon as it becomes hashed?\n\nAlso we'd have\n\n```\n__hash__(self):\n    _is_mutable = True\n    return hash(self.facets())\n```\n\nYour thoughts?",
    "created_at": "2012-08-17T16:53:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142039",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:4'>Comment 4:</a>
Replying to [sluther](#comment%3A3):
> Being mutable and hashable is definetly a bug. See [1].
> 
> I don't understand what you mean with repr is the only immutable part, because it may change when the object changes.
> 
> [1] http://docs.python.org/glossary.html#term-hashable

You're correct. I forgot that repr outputs the facets.

However I'm not in favor of making SimplicialComplex an immutable object outright since it contains mutators and there are inductive constructions which would require you to build copies. For example, suppose you had an algorithm which built a simplicial complex facet by facet, at each step you would need to clone the SimplicialComplex object in the mutator. Thus extra memory handling and multiple transient objects.

Perhaps we should do something closer to ClonableArray and have an attribute _is_mutable which we set to True when `__hash__()` is called and in any mutators, we do something of the following:

```
if _is_mutable:
    raise TypeError, "This simplicial complex is no longer mutable"
```
Thus making it immutable as soon as it becomes hashed?

Also we'd have

```
__hash__(self):
    _is_mutable = True
    return hash(self.facets())
```

Your thoughts?



---

archive/issue_comments_142040.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nReplying to [@tscrim](#comment%3A4):\n> Perhaps we should do something closer to ClonableArray and have an attribute _is_mutable which we set to True when `__hash__()` is called and in any mutators, we do something of the following:\n> \n> ```\n> if _is_mutable:\n>     raise TypeError, \"This simplicial complex is no longer mutable\"\n> ```\n> Thus making it immutable as soon as it becomes hashed?\n> \n> Also we'd have\n> \n> ```\n> __hash__(self):\n>     _is_mutable = True\n>     return hash(self.facets())\n> ```\n> \n> Your thoughts?\n\nI don't like this idea because it violoates the principle of least suprise. For example the question if an object can be modified depends upon the question if it has been added into a set or not. \nBetter add an explicit method that sets this attribute.",
    "created_at": "2012-08-17T17:32:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142040",
    "user": "https://github.com/sagetrac-sluther"
}
```

<a id='comment:5'>Comment 5:</a>
Replying to [@tscrim](#comment%3A4):
> Perhaps we should do something closer to ClonableArray and have an attribute _is_mutable which we set to True when `__hash__()` is called and in any mutators, we do something of the following:
> 
> ```
> if _is_mutable:
>     raise TypeError, "This simplicial complex is no longer mutable"
> ```
> Thus making it immutable as soon as it becomes hashed?
> 
> Also we'd have
> 
> ```
> __hash__(self):
>     _is_mutable = True
>     return hash(self.facets())
> ```
> 
> Your thoughts?

I don't like this idea because it violoates the principle of least suprise. For example the question if an object can be modified depends upon the question if it has been added into a set or not. 
Better add an explicit method that sets this attribute.



---

archive/issue_comments_142041.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nReplying to [sluther](#comment%3A5):\n> I don't like this idea because it violoates the principle of least suprise. For example the question if an object can be modified depends upon the question if it has been added into a set or not. \n> Better add an explicit method that sets this attribute.\n\nGood point. Then how about this?\n\n```\ndef set_immutable(self):\n    self._is_mutable = False\n\ndef __hash__(self):\n    if not _is_mutable:\n        raise TypeError, \"This simplicial complex must be set to immutable by calling set_immutable()\"\n    return hash(self.facets())\n```",
    "created_at": "2012-08-17T19:27:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142041",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:6'>Comment 6:</a>
Replying to [sluther](#comment%3A5):
> I don't like this idea because it violoates the principle of least suprise. For example the question if an object can be modified depends upon the question if it has been added into a set or not. 
> Better add an explicit method that sets this attribute.

Good point. Then how about this?

```
def set_immutable(self):
    self._is_mutable = False

def __hash__(self):
    if not _is_mutable:
        raise TypeError, "This simplicial complex must be set to immutable by calling set_immutable()"
    return hash(self.facets())
```



---

archive/issue_comments_142042.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nReplying to [@tscrim](#comment%3A6):\n> Good point. Then how about this?\n> \n> ```\n> def set_immutable(self):\n>     self._is_mutable = False\n> \n> def __hash__(self):\n>     if not _is_mutable:\n>         raise TypeError, \"This simplicial complex must be set to immutable by calling set_immutable()\"\n>     return hash(self.facets())\n> ```\n\nFine, just be careful with not reversing the meaning of _is_mutable like in `__hash__`.",
    "created_at": "2012-08-17T20:16:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142042",
    "user": "https://github.com/sagetrac-sluther"
}
```

<a id='comment:7'>Comment 7:</a>
Replying to [@tscrim](#comment%3A6):
> Good point. Then how about this?
> 
> ```
> def set_immutable(self):
>     self._is_mutable = False
> 
> def __hash__(self):
>     if not _is_mutable:
>         raise TypeError, "This simplicial complex must be set to immutable by calling set_immutable()"
>     return hash(self.facets())
> ```

Fine, just be careful with not reversing the meaning of _is_mutable like in `__hash__`.



---

archive/issue_comments_142043.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nI have no opinion on what the best error types and messages are for this, but it is probably good if they are consistent. Since this is completely analogous to matrices, you should probably follow that example or change it to conform to yours (if you have good arguments to change it):\n\n```\nsage: M=matrix([[1,2],[3,4]])\nsage: M.__hash__()\nTypeError: mutable matrices are unhashable\nsage: M[0,0]=5\nsage: M.set_immutable()\nsage: M.__hash__()\nsage: M[0,0]=5\nValueError: matrix is immutable; please change a copy instead (i.e., use copy(M) to change a copy of M).\n```\nOn the other hand:\n\n```\nsage: t=(1,2,3)\nsage: t[0]=4\nTypeError: 'tuple' object does not support item assignment\n```\nbut then again a `ValueError` indicates something that something is wrong with the value, not with the type (`tuple` is never mutable, but `matrix` can be).",
    "created_at": "2012-08-18T06:15:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142043",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:8'>Comment 8:</a>
I have no opinion on what the best error types and messages are for this, but it is probably good if they are consistent. Since this is completely analogous to matrices, you should probably follow that example or change it to conform to yours (if you have good arguments to change it):

```
sage: M=matrix([[1,2],[3,4]])
sage: M.__hash__()
TypeError: mutable matrices are unhashable
sage: M[0,0]=5
sage: M.set_immutable()
sage: M.__hash__()
sage: M[0,0]=5
ValueError: matrix is immutable; please change a copy instead (i.e., use copy(M) to change a copy of M).
```
On the other hand:

```
sage: t=(1,2,3)
sage: t[0]=4
TypeError: 'tuple' object does not support item assignment
```
but then again a `ValueError` indicates something that something is wrong with the value, not with the type (`tuple` is never mutable, but `matrix` can be).



---

archive/issue_comments_142044.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nI feel like it should raise a `TypeError` since making it immutable is, in essence, a class property. Additionally Graph raises a `TypeError` anytime `__hash__()` is called.\n\nAlso more of a random thought: what if we delete the mutators when we make it immutable?\n\n```\ndef is_mutable(self):\n    del self.add_face\n    del self.remove_face\n```",
    "created_at": "2012-08-18T15:40:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142044",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:9'>Comment 9:</a>
I feel like it should raise a `TypeError` since making it immutable is, in essence, a class property. Additionally Graph raises a `TypeError` anytime `__hash__()` is called.

Also more of a random thought: what if we delete the mutators when we make it immutable?

```
def is_mutable(self):
    del self.add_face
    del self.remove_face
```



---

archive/issue_comments_142045.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\n`remove_face` is not a mutator.",
    "created_at": "2012-08-18T15:48:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142045",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:10'>Comment 10:</a>
`remove_face` is not a mutator.



---

archive/issue_comments_142046.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nReplying to [@tscrim](#comment%3A9):\n> I feel like it should raise a `TypeError` since making it immutable is, in essence, a class property. Additionally Graph raises a `TypeError` anytime `__hash__()` is called.\n\nSage isn't consistent (yet?) in this regard:\n\n```\nsage: L=Sequence([1,2,3])\nsage: hash(L)\nValueError: mutable sequences are unhashable\nsage: L.append(4)\nsage: L.set_immutable()\nsage: hash(L)\n...\nsage: L.append(4)\nValueError: object is immutable; please change a copy instead.\n```\nOn the one hand, it's convenient if \"hash(...)\" always gives the same kind of\nerror on an unhashable object (easier to catch). This is what `Matrix` does.\n\nOne the other, if a class instance can change from being unhashable to being\nhashable it's obviously not a property of the class, but of this individual\nobject (its \"value\"). This is what `Sequence` does.\n\nDon't go deleting methods! That's just a hack. Cython classes can't even do it.\nIf you want to go that way, you should make it a separate category\n`FrozenSimplicialComplex`, ala `set` and `frozenset` in python itself, but the\napproach you currently propose is more in line with other sage classes.",
    "created_at": "2012-08-18T17:06:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142046",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:11'>Comment 11:</a>
Replying to [@tscrim](#comment%3A9):
> I feel like it should raise a `TypeError` since making it immutable is, in essence, a class property. Additionally Graph raises a `TypeError` anytime `__hash__()` is called.

Sage isn't consistent (yet?) in this regard:

```
sage: L=Sequence([1,2,3])
sage: hash(L)
ValueError: mutable sequences are unhashable
sage: L.append(4)
sage: L.set_immutable()
sage: hash(L)
...
sage: L.append(4)
ValueError: object is immutable; please change a copy instead.
```
On the one hand, it's convenient if "hash(...)" always gives the same kind of
error on an unhashable object (easier to catch). This is what `Matrix` does.

One the other, if a class instance can change from being unhashable to being
hashable it's obviously not a property of the class, but of this individual
object (its "value"). This is what `Sequence` does.

Don't go deleting methods! That's just a hack. Cython classes can't even do it.
If you want to go that way, you should make it a separate category
`FrozenSimplicialComplex`, ala `set` and `frozenset` in python itself, but the
approach you currently propose is more in line with other sage classes.



---

archive/issue_comments_142047.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nReplying to [@jhpalmieri](#comment%3A10):\n> `remove_face` is not a mutator.\n\nTo be consistant, I changed it into a mutator. Let me know if there are any objections.\n\nReplying to [@nbruin](#comment%3A11):\n> On the one hand, it's convenient if \"hash(...)\" always gives the same kind of\n> error on an unhashable object (easier to catch). This is what `Matrix` does.\n> \n> One the other, if a class instance can change from being unhashable to being\n> hashable it's obviously not a property of the class, but of this individual\n> object (its \"value\"). This is what `Sequence` does.\n\nI've changed everything to raise a ValueError. I'm wondering if we should create a new exception class for mutable objects such as MutableError. Probabily needs a discussion and for sure another ticket.\n\n> Don't go deleting methods! That's just a hack. Cython classes can't even do it.\n> If you want to go that way, you should make it a separate category\n> `FrozenSimplicialComplex`, ala `set` and `frozenset` in python itself, but the\n> approach you currently propose is more in line with other sage classes.\n\nThat's a good point about the cython class. I'm going to keep with the current methodology.",
    "created_at": "2012-08-18T23:54:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142047",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:12'>Comment 12:</a>
Replying to [@jhpalmieri](#comment%3A10):
> `remove_face` is not a mutator.

To be consistant, I changed it into a mutator. Let me know if there are any objections.

Replying to [@nbruin](#comment%3A11):
> On the one hand, it's convenient if "hash(...)" always gives the same kind of
> error on an unhashable object (easier to catch). This is what `Matrix` does.
> 
> One the other, if a class instance can change from being unhashable to being
> hashable it's obviously not a property of the class, but of this individual
> object (its "value"). This is what `Sequence` does.

I've changed everything to raise a ValueError. I'm wondering if we should create a new exception class for mutable objects such as MutableError. Probabily needs a discussion and for sure another ticket.

> Don't go deleting methods! That's just a hack. Cython classes can't even do it.
> If you want to go that way, you should make it a separate category
> `FrozenSimplicialComplex`, ala `set` and `frozenset` in python itself, but the
> approach you currently propose is more in line with other sage classes.

That's a good point about the cython class. I'm going to keep with the current methodology.



---

archive/issue_comments_142048.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nI'd be appreciative if anyone is willing to review this.\n\nAlso, I found another patch by vp (which I presume is vpiluad) in the sage-combinat queue which makes very small tweaks to `__hash__()` and `__cmp__()` of `Simplex`. So vpiluad, would it be okay if I just delete your patch?",
    "created_at": "2012-08-19T19:26:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142048",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:13'>Comment 13:</a>
I'd be appreciative if anyone is willing to review this.

Also, I found another patch by vp (which I presume is vpiluad) in the sage-combinat queue which makes very small tweaks to `__hash__()` and `__cmp__()` of `Simplex`. So vpiluad, would it be okay if I just delete your patch?



---

archive/issue_events_158052.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2012-08-19T19:26:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12587#event-158052"
}
```



---

archive/issue_events_158053.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2012-08-19T19:26:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12587#event-158053"
}
```



---

archive/issue_comments_142049.json:
```json
{
    "body": "Author: **Travis Scrimshaw**",
    "created_at": "2012-08-19T19:26:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142049",
    "user": "https://github.com/tscrim"
}
```

Author: **Travis Scrimshaw**



---

archive/issue_comments_142050.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nReplying to [@tscrim](#comment%3A12):\n> Replying to [@jhpalmieri](#comment%3A10):\n> > `remove_face` is not a mutator.\n\n> \n> To be consistant, I changed it into a mutator. Let me know if there are any objections.\n\nWhy not change `add_face` so it's not a mutator. Wouldn't that simplify the hashing issue?",
    "created_at": "2012-08-19T19:32:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142050",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:15'>Comment 15:</a>
Replying to [@tscrim](#comment%3A12):
> Replying to [@jhpalmieri](#comment%3A10):
> > `remove_face` is not a mutator.

> 
> To be consistant, I changed it into a mutator. Let me know if there are any objections.

Why not change `add_face` so it's not a mutator. Wouldn't that simplify the hashing issue?



---

archive/issue_comments_142051.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nReplying to [@jhpalmieri](#comment%3A15):\n> Replying to [@tscrim](#comment%3A12):\n> > Replying to [@jhpalmieri](#comment%3A10):\n> > > `remove_face` is not a mutator.\n\n> > \n> > To be consistant, I changed it into a mutator. Let me know if there are any objections.\n\n> \n> Why not change `add_face` so it's not a mutator. Wouldn't that simplify the hashing issue?\n\nDoing that would fix it. However some of the methods in SimplicialComplex use `add_face()` (as I recall `_enlarge_subcomplex()` is the main culprit), so it'd cut down on the number of transient objects. Also I feel like this is becomes consistent with `Graph` (and by my understanding `Sequence` and `Matrix`).",
    "created_at": "2012-08-19T19:52:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142051",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:16'>Comment 16:</a>
Replying to [@jhpalmieri](#comment%3A15):
> Replying to [@tscrim](#comment%3A12):
> > Replying to [@jhpalmieri](#comment%3A10):
> > > `remove_face` is not a mutator.

> > 
> > To be consistant, I changed it into a mutator. Let me know if there are any objections.

> 
> Why not change `add_face` so it's not a mutator. Wouldn't that simplify the hashing issue?

Doing that would fix it. However some of the methods in SimplicialComplex use `add_face()` (as I recall `_enlarge_subcomplex()` is the main culprit), so it'd cut down on the number of transient objects. Also I feel like this is becomes consistent with `Graph` (and by my understanding `Sequence` and `Matrix`).



---

archive/issue_comments_142052.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nReplying to [@tscrim](#comment%3A16):\n> Replying to [@jhpalmieri](#comment%3A15):\n> > Replying to [@tscrim](#comment%3A12):\n> > > Replying to [@jhpalmieri](#comment%3A10):\n> > > > `remove_face` is not a mutator.\n\n> > > \n> > > To be consistant, I changed it into a mutator. Let me know if there are any objections.\n\n> > \n> > Why not change `add_face` so it's not a mutator. Wouldn't that simplify the hashing issue?\n\n> \n> Doing that would fix it. However some of the methods in SimplicialComplex use `add_face()` (as I recall `_enlarge_subcomplex()` is the main culprit), so it'd cut down on the number of transient objects. Also I feel like this is becomes consistent with `Graph` (and by my understanding `Sequence` and `Matrix`).\n\nFor what it's worth, I just searched through simplicial_complex.py, and I don't see `add_face()` used anywhere except for some doctests.\n\nI think consistency with other classes is secondary. I think the central question is: is there a good reason for simplicial complexes to be mutable?",
    "created_at": "2012-09-05T20:05:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142052",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:17'>Comment 17:</a>
Replying to [@tscrim](#comment%3A16):
> Replying to [@jhpalmieri](#comment%3A15):
> > Replying to [@tscrim](#comment%3A12):
> > > Replying to [@jhpalmieri](#comment%3A10):
> > > > `remove_face` is not a mutator.

> > > 
> > > To be consistant, I changed it into a mutator. Let me know if there are any objections.

> > 
> > Why not change `add_face` so it's not a mutator. Wouldn't that simplify the hashing issue?

> 
> Doing that would fix it. However some of the methods in SimplicialComplex use `add_face()` (as I recall `_enlarge_subcomplex()` is the main culprit), so it'd cut down on the number of transient objects. Also I feel like this is becomes consistent with `Graph` (and by my understanding `Sequence` and `Matrix`).

For what it's worth, I just searched through simplicial_complex.py, and I don't see `add_face()` used anywhere except for some doctests.

I think consistency with other classes is secondary. I think the central question is: is there a good reason for simplicial complexes to be mutable?



---

archive/issue_comments_142053.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nReplying to [@jhpalmieri](#comment%3A17):\n> Replying to [@tscrim](#comment%3A16):\n> >\n> > Doing that would fix it. However some of the methods in SimplicialComplex use `add_face()` (as I recall `_enlarge_subcomplex()` is the main culprit), so it'd cut down on the number of transient objects. Also I feel like this is becomes consistent with `Graph` (and by my understanding `Sequence` and `Matrix`).\n\n> \n> For what it's worth, I just searched through simplicial_complex.py, and I don't see `add_face()` used anywhere except for some doctests.\n> \n> I think consistency with other classes is secondary. I think the central question is: is there a good reason for simplicial complexes to be mutable?\n\nA priori, no. You're right, I could not find any code either (I looked through both the homology and combinat directories) which used `add_face()` other than for the doc-tests. I feel like there are many constructions which iteratively build-up simplicial complexes or break them down piece by piece (such as k-decomposeability) and creating copies would create transient objects and inflate the memory usage. This is why I feel that we should have SimplicialComplex be mutable.",
    "created_at": "2012-09-14T05:49:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142053",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:18'>Comment 18:</a>
Replying to [@jhpalmieri](#comment%3A17):
> Replying to [@tscrim](#comment%3A16):
> >
> > Doing that would fix it. However some of the methods in SimplicialComplex use `add_face()` (as I recall `_enlarge_subcomplex()` is the main culprit), so it'd cut down on the number of transient objects. Also I feel like this is becomes consistent with `Graph` (and by my understanding `Sequence` and `Matrix`).

> 
> For what it's worth, I just searched through simplicial_complex.py, and I don't see `add_face()` used anywhere except for some doctests.
> 
> I think consistency with other classes is secondary. I think the central question is: is there a good reason for simplicial complexes to be mutable?

A priori, no. You're right, I could not find any code either (I looked through both the homology and combinat directories) which used `add_face()` other than for the doc-tests. I feel like there are many constructions which iteratively build-up simplicial complexes or break them down piece by piece (such as k-decomposeability) and creating copies would create transient objects and inflate the memory usage. This is why I feel that we should have SimplicialComplex be mutable.



---

archive/issue_comments_142054.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nReplying to [@tscrim](#comment%3A13):\n> Also, I found another patch by vp (which I presume is vpiluad) in the sage-combinat queue which makes very small tweaks to `__hash__()` and `__cmp__()` of `Simplex`. So vpiluad, would it be okay if I just delete your patch?\n\nMy collaborator vpilaud actually opened this ticket (as his very first ticket). You can delete his small patch in the combinat queue concerning the hash of simplicial complexes.\n\nWe were/are working on a patch on implementing \"subword complexes\" (which are simplicial complexes) as defined by Knutson and Miller in [1]. In this context, we needed fast hashing of simplicies and of simplicial complexes for constructing them. We now use a different algorithm, but if there will eventually be an immutable version of simplicial complexes with fast hashing, we might go back to another, faster algorithm.\n\nAnyway, I appreciate your work on this!\n\nChristian\n\n[1] A. Knutson and E. Miller, Subword complexes in Coxeter groups, Adv. Math. 184(1), 2004.",
    "created_at": "2012-10-28T08:29:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142054",
    "user": "https://github.com/sagetrac-stumpc5"
}
```

<a id='comment:19'>Comment 19:</a>
Replying to [@tscrim](#comment%3A13):
> Also, I found another patch by vp (which I presume is vpiluad) in the sage-combinat queue which makes very small tweaks to `__hash__()` and `__cmp__()` of `Simplex`. So vpiluad, would it be okay if I just delete your patch?

My collaborator vpilaud actually opened this ticket (as his very first ticket). You can delete his small patch in the combinat queue concerning the hash of simplicial complexes.

We were/are working on a patch on implementing "subword complexes" (which are simplicial complexes) as defined by Knutson and Miller in [1]. In this context, we needed fast hashing of simplicies and of simplicial complexes for constructing them. We now use a different algorithm, but if there will eventually be an immutable version of simplicial complexes with fast hashing, we might go back to another, faster algorithm.

Anyway, I appreciate your work on this!

Christian

[1] A. Knutson and E. Miller, Subword complexes in Coxeter groups, Adv. Math. 184(1), 2004.



---

archive/issue_comments_142055.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nSince you propose to make the hash only dependent on the facets:\n\n```\nsage: S = SimplicialComplex([1,2,3],[[1,2]])\nsage: S\nSimplicial complex with vertex set (1, 2, 3) and facets {(1, 2)}\n```\n(`[1,2,3]` is actually not the vertex set, but the *ground set*, while the vertex set is `[1,2]`.) The proposed implementation only takes the facets into account for hashing, thus we get the same hash for\n\n```\nsage: S = SimplicialComplex([1,2],[[1,2]])\nsage: S\nSimplicial complex with vertex set (1, 2) and facets {(1, 2)}\n```\n\nIs this the desired behaviour - or should the ground set be used as well for hashing?\n\n(I don't have a strong opinion on this question, but I thought I bring it up anyway. If you don't want to take care of the vertex set vs. ground set issue in this ticket here, I will open another and ask for other peoples opinion there.)",
    "created_at": "2012-10-28T08:50:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142055",
    "user": "https://github.com/sagetrac-stumpc5"
}
```

<a id='comment:20'>Comment 20:</a>
Since you propose to make the hash only dependent on the facets:

```
sage: S = SimplicialComplex([1,2,3],[[1,2]])
sage: S
Simplicial complex with vertex set (1, 2, 3) and facets {(1, 2)}
```
(`[1,2,3]` is actually not the vertex set, but the *ground set*, while the vertex set is `[1,2]`.) The proposed implementation only takes the facets into account for hashing, thus we get the same hash for

```
sage: S = SimplicialComplex([1,2],[[1,2]])
sage: S
Simplicial complex with vertex set (1, 2) and facets {(1, 2)}
```

Is this the desired behaviour - or should the ground set be used as well for hashing?

(I don't have a strong opinion on this question, but I thought I bring it up anyway. If you don't want to take care of the vertex set vs. ground set issue in this ticket here, I will open another and ask for other peoples opinion there.)



---

archive/issue_comments_142056.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nReplying to [stumpc5](#comment%3A20):\n> Since you propose to make the hash only dependent on the facets:\n> \n> ```\n> sage: S = SimplicialComplex([1,2,3],[[1,2]])\n> sage: S\n> Simplicial complex with vertex set (1, 2, 3) and facets {(1, 2)}\n> ```\n> (`[1,2,3]` is actually not the vertex set, but the *ground set*, while the vertex set is `[1,2]`.) The proposed implementation only takes the facets into account for hashing, thus we get the same hash for\n> \n> ```\n> sage: S = SimplicialComplex([1,2],[[1,2]])\n> sage: S\n> Simplicial complex with vertex set (1, 2) and facets {(1, 2)}\n> ```\n> \n> Is this the desired behaviour - or should the ground set be used as well for hashing?\n> \n> (I don't have a strong opinion on this question, but I thought I bring it up anyway. If you don't want to take care of the vertex set vs. ground set issue in this ticket here, I will open another and ask for other peoples opinion there.)\n\nThere are a few possibilities:\n\n1. This is a bug, in that `(3,)` should also be listed as a facet.\n2. We handle this more like a matroid (I believe this is what you're suggesting) and add methods like `ground_set()`.\n3. Split the difference and make an optional argument.\n4. We just do a stopgap here and make the hash depend upon the vertex/ground set and push this to another ticket.\n\nMy thought is we handle this as a bug, but I'm happy to implement whichever is decided upon. I have no strong opinions either.\n\nBest,\n\nTravis",
    "created_at": "2012-10-28T17:38:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142056",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:21'>Comment 21:</a>
Replying to [stumpc5](#comment%3A20):
> Since you propose to make the hash only dependent on the facets:
> 
> ```
> sage: S = SimplicialComplex([1,2,3],[[1,2]])
> sage: S
> Simplicial complex with vertex set (1, 2, 3) and facets {(1, 2)}
> ```
> (`[1,2,3]` is actually not the vertex set, but the *ground set*, while the vertex set is `[1,2]`.) The proposed implementation only takes the facets into account for hashing, thus we get the same hash for
> 
> ```
> sage: S = SimplicialComplex([1,2],[[1,2]])
> sage: S
> Simplicial complex with vertex set (1, 2) and facets {(1, 2)}
> ```
> 
> Is this the desired behaviour - or should the ground set be used as well for hashing?
> 
> (I don't have a strong opinion on this question, but I thought I bring it up anyway. If you don't want to take care of the vertex set vs. ground set issue in this ticket here, I will open another and ask for other peoples opinion there.)

There are a few possibilities:

1. This is a bug, in that `(3,)` should also be listed as a facet.
2. We handle this more like a matroid (I believe this is what you're suggesting) and add methods like `ground_set()`.
3. Split the difference and make an optional argument.
4. We just do a stopgap here and make the hash depend upon the vertex/ground set and push this to another ticket.

My thought is we handle this as a bug, but I'm happy to implement whichever is decided upon. I have no strong opinions either.

Best,

Travis



---

archive/issue_comments_142057.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\n> Is this the desired behaviour?\n\nWell, it's certainly the documented behavior (I mean the documented behavior of simplicial complexes). Note that you can also do\n\n```\nS = SimplicialComplex([[1,2]])\n```\nto get a complex with a single facet. So the vertex list is already an optional argument, in some sense.\n\nI think that the hash should only depend on the facets; the unused vertices shouldn't have any effect. That makes the most mathematical sense to me.",
    "created_at": "2012-10-29T02:12:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142057",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:22'>Comment 22:</a>
> Is this the desired behaviour?

Well, it's certainly the documented behavior (I mean the documented behavior of simplicial complexes). Note that you can also do

```
S = SimplicialComplex([[1,2]])
```
to get a complex with a single facet. So the vertex list is already an optional argument, in some sense.

I think that the hash should only depend on the facets; the unused vertices shouldn't have any effect. That makes the most mathematical sense to me.



---

archive/issue_comments_142058.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nReplying to [@jhpalmieri](#comment%3A22):\n> I think that the hash should only depend on the facets; the unused vertices shouldn't have any effect. That makes the most mathematical sense to me.\n\nI agree.\n\nBut I still think that mathematically, a vertex is a 0-dimensional face, and thus must be contained in some facet, see [1] or basically any book on simplicial complexes. In the example above, `3` is therefore not a vertex. (In particular, \"unused vertices\" do not exist.) But this is then another issue, and we can discuss it on another ticket, as Travis suggested as well.\n\n[1] http://en.wikipedia.org/wiki/Abstract_simplicial_complex : \"The vertex set of \u0394 is defined as V(\u0394) = \u222a\u0394, the union of all faces of \u0394\"",
    "created_at": "2012-10-29T08:04:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142058",
    "user": "https://github.com/sagetrac-stumpc5"
}
```

<a id='comment:23'>Comment 23:</a>
Replying to [@jhpalmieri](#comment%3A22):
> I think that the hash should only depend on the facets; the unused vertices shouldn't have any effect. That makes the most mathematical sense to me.

I agree.

But I still think that mathematically, a vertex is a 0-dimensional face, and thus must be contained in some facet, see [1] or basically any book on simplicial complexes. In the example above, `3` is therefore not a vertex. (In particular, "unused vertices" do not exist.) But this is then another issue, and we can discuss it on another ticket, as Travis suggested as well.

[1] http://en.wikipedia.org/wiki/Abstract_simplicial_complex : "The vertex set of  is defined as V() = , the union of all faces of "



---

archive/issue_comments_142059.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nI think it would be absolutely fine to change the *documentation* of `SimplicialComplex` to encourage the use of\n\n```\nsage: SimplicialComplex( list of facets )\n```\ninstead of\n\n```\nsage: SimplicialComplex( vertex set, list of facets )\n```\nWe could also go further and change the *behavior* of `SimplicialComplex` so it ignores `vertex_set` even if it is present, thus essentially deprecating its use. We could formally deprecate its use, in fact.",
    "created_at": "2012-10-29T17:59:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142059",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:24'>Comment 24:</a>
I think it would be absolutely fine to change the *documentation* of `SimplicialComplex` to encourage the use of

```
sage: SimplicialComplex( list of facets )
```
instead of

```
sage: SimplicialComplex( vertex set, list of facets )
```
We could also go further and change the *behavior* of `SimplicialComplex` so it ignores `vertex_set` even if it is present, thus essentially deprecating its use. We could formally deprecate its use, in fact.



---

archive/issue_comments_142060.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nReplying to [@jhpalmieri](#comment%3A24):\n> I think it would be absolutely fine to change the *documentation* of `SimplicialComplex` to encourage the use of\n> \n> ```\n> sage: SimplicialComplex( list of facets )\n> ```\n> instead of\n> \n> ```\n> sage: SimplicialComplex( vertex set, list of facets )\n> ```\n> We could also go further and change the *behavior* of `SimplicialComplex` so it ignores `vertex_set` even if it is present, thus essentially deprecating its use. We could formally deprecate its use, in fact.\n\nI'd be happy with deprecating `vertex_set`. I could go through and make those changes on this ticket.",
    "created_at": "2012-10-29T21:49:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142060",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:25'>Comment 25:</a>
Replying to [@jhpalmieri](#comment%3A24):
> I think it would be absolutely fine to change the *documentation* of `SimplicialComplex` to encourage the use of
> 
> ```
> sage: SimplicialComplex( list of facets )
> ```
> instead of
> 
> ```
> sage: SimplicialComplex( vertex set, list of facets )
> ```
> We could also go further and change the *behavior* of `SimplicialComplex` so it ignores `vertex_set` even if it is present, thus essentially deprecating its use. We could formally deprecate its use, in fact.

I'd be happy with deprecating `vertex_set`. I could go through and make those changes on this ticket.



---

archive/issue_comments_142061.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nDeprecated `vertex_set` and made all of the appropriate changes. This is now based on (the to be merged) #13244.",
    "created_at": "2012-11-13T02:33:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142061",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:26'>Comment 26:</a>
Deprecated `vertex_set` and made all of the appropriate changes. This is now based on (the to be merged) #13244.



---

archive/issue_comments_142062.json:
```json
{
    "body": "Dependencies: **#13244**",
    "created_at": "2012-11-13T02:33:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142062",
    "user": "https://github.com/tscrim"
}
```

Dependencies: **#13244**



---

archive/issue_events_158054.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2012-11-13T02:33:27Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "milestone_number": null,
    "milestone_title": "sage-5.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12587#event-158054"
}
```



---

archive/issue_events_158055.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2012-11-13T02:33:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "milestone_number": null,
    "milestone_title": "sage-5.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12587#event-158055"
}
```



---

archive/issue_comments_142063.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nMinor tweaks. Ready for review.",
    "created_at": "2012-11-13T05:05:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142063",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:27'>Comment 27:</a>
Minor tweaks. Ready for review.



---

archive/issue_comments_142064.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nRebased over #13590.",
    "created_at": "2012-11-13T21:51:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142064",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:28'>Comment 28:</a>
Rebased over #13590.



---

archive/issue_comments_142065.json:
```json
{
    "body": "Changed dependencies from **#13244** to **#13244 #13590**",
    "created_at": "2012-11-13T21:51:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142065",
    "user": "https://github.com/tscrim"
}
```

Changed dependencies from **#13244** to **#13244 #13590**



---

archive/issue_comments_142066.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\nHi Travis,\n\nI started to review the patch. Everything looks quite well, but you seem to have missed handling the parameters properly, see below:\n\n```\nsage: S = SimplicialComplex(maximal_faces=[[1,4], [2,4]])\n...\nTypeError: 'NoneType' object is not iterable\n```\n\nand with this\n\n```\nsage: S = SimplicialComplex(vertex_set=[1,2,4],maximal_faces=[[1,4], [2,4]])    \nsage: S\nSimplicial complex with vertex set (1, 2, 4) and facets {(2, 4), (1, 4)}\n```\nThe deprecation could maybe as well quickly be mentioned in the init of SimplicialComplex, since `vertex_set` is still there as an optional argument.",
    "created_at": "2012-11-19T10:35:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142066",
    "user": "https://github.com/sagetrac-stumpc5"
}
```

<a id='comment:29'>Comment 29:</a>
Hi Travis,

I started to review the patch. Everything looks quite well, but you seem to have missed handling the parameters properly, see below:

```
sage: S = SimplicialComplex(maximal_faces=[[1,4], [2,4]])
...
TypeError: 'NoneType' object is not iterable
```

and with this

```
sage: S = SimplicialComplex(vertex_set=[1,2,4],maximal_faces=[[1,4], [2,4]])    
sage: S
Simplicial complex with vertex set (1, 2, 4) and facets {(2, 4), (1, 4)}
```
The deprecation could maybe as well quickly be mentioned in the init of SimplicialComplex, since `vertex_set` is still there as an optional argument.



---

archive/issue_comments_142067.json:
```json
{
    "body": "Reviewer: **Christian Stump**",
    "created_at": "2012-11-19T10:35:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142067",
    "user": "https://github.com/sagetrac-stumpc5"
}
```

Reviewer: **Christian Stump**



---

archive/issue_events_158056.json:
```json
{
    "actor": "https://github.com/sagetrac-stumpc5",
    "created_at": "2012-11-19T10:35:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12587#event-158056"
}
```



---

archive/issue_events_158057.json:
```json
{
    "actor": "https://github.com/sagetrac-stumpc5",
    "created_at": "2012-11-19T10:35:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12587#event-158057"
}
```



---

archive/issue_events_158058.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2012-11-19T18:03:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12587#event-158058"
}
```



---

archive/issue_events_158059.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2012-11-19T18:03:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12587#event-158059"
}
```



---

archive/issue_comments_142068.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\nThanks for reviewing this. Here's the updated patch fixing the above and with the added documentation in `__init__()`.",
    "created_at": "2012-11-19T18:03:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142068",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:30'>Comment 30:</a>
Thanks for reviewing this. Here's the updated patch fixing the above and with the added documentation in `__init__()`.



---

archive/issue_comments_142069.json:
```json
{
    "body": "<a id='comment:31'>Comment 31:</a>\nWhat about\n\n```\nsage: S = SimplicialComplex(vertex_set=[1,2,3,4],maximal_faces=[[1,4], [2,4]])\n/home/stumpc5/progs/sage-5.5.beta1/local/bin/sage-ipython:1: DeprecationWarning: vertex_set is deprecated.\nSee http://trac.sagemath.org/12587 for details.\n  #!/usr/bin/env python\nsage: S\nSimplicial complex with vertex set (1, 2, 3, 4) and facets {(2, 4), (1, 4)}\n```\n\nsorry to be picky here: I thought we agreed that the input `vertex_set` is ignored, didn't we ? Mathematically, the above is simply wrong (see [comment:22](#comment%3A22)), so I would prefer if we could get rid of\n\n```\nSimplicial complex with vertex set (1, 2, 3, 4) and facets {(2, 4), (1, 4)}\n```\n\nOr do you think that deprecation enough?",
    "created_at": "2012-11-19T18:12:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142069",
    "user": "https://github.com/sagetrac-stumpc5"
}
```

<a id='comment:31'>Comment 31:</a>
What about

```
sage: S = SimplicialComplex(vertex_set=[1,2,3,4],maximal_faces=[[1,4], [2,4]])
/home/stumpc5/progs/sage-5.5.beta1/local/bin/sage-ipython:1: DeprecationWarning: vertex_set is deprecated.
See http://trac.sagemath.org/12587 for details.
  #!/usr/bin/env python
sage: S
Simplicial complex with vertex set (1, 2, 3, 4) and facets {(2, 4), (1, 4)}
```

sorry to be picky here: I thought we agreed that the input `vertex_set` is ignored, didn't we ? Mathematically, the above is simply wrong (see [comment:22](#comment%3A22)), so I would prefer if we could get rid of

```
Simplicial complex with vertex set (1, 2, 3, 4) and facets {(2, 4), (1, 4)}
```

Or do you think that deprecation enough?



---

archive/issue_comments_142070.json:
```json
{
    "body": "<a id='comment:32'>Comment 32:</a>\nI left it there in case someone was relying on that behavior as I thought the agreement was to just deprecate the functionality. However I have no problem completely ignoring it and can make the appropriate changes. Alternatively I can make a more robust warning in the init or class description about it being wrong. Which would you prefer?",
    "created_at": "2012-11-19T18:53:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142070",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:32'>Comment 32:</a>
I left it there in case someone was relying on that behavior as I thought the agreement was to just deprecate the functionality. However I have no problem completely ignoring it and can make the appropriate changes. Alternatively I can make a more robust warning in the init or class description about it being wrong. Which would you prefer?



---

archive/issue_comments_142071.json:
```json
{
    "body": "<a id='comment:33'>Comment 33:</a>\nReplying to [@tscrim](#comment%3A32):\n> I left it there in case someone was relying on that behavior as I thought the agreement was to just deprecate the functionality. However I have no problem completely ignoring it and can make the appropriate changes. Alternatively I can make a more robust warning in the init or class description about it being wrong. Which would you prefer?\n\nI'd prefer that if the user puts in something mathematically wrong, then he should be getting an error. But you're writing the patch, so you decide. I will finish my review as soon as I have your decision...",
    "created_at": "2012-11-20T12:14:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142071",
    "user": "https://github.com/sagetrac-stumpc5"
}
```

<a id='comment:33'>Comment 33:</a>
Replying to [@tscrim](#comment%3A32):
> I left it there in case someone was relying on that behavior as I thought the agreement was to just deprecate the functionality. However I have no problem completely ignoring it and can make the appropriate changes. Alternatively I can make a more robust warning in the init or class description about it being wrong. Which would you prefer?

I'd prefer that if the user puts in something mathematically wrong, then he should be getting an error. But you're writing the patch, so you decide. I will finish my review as soon as I have your decision...



---

archive/issue_comments_142072.json:
```json
{
    "body": "<a id='comment:34'>Comment 34:</a>\nI've uploaded the new patch which ignores the `vertex_set` option. Thanks for the review.",
    "created_at": "2012-11-20T16:24:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142072",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:34'>Comment 34:</a>
I've uploaded the new patch which ignores the `vertex_set` option. Thanks for the review.



---

archive/issue_comments_142073.json:
```json
{
    "body": "<a id='comment:35'>Comment 35:</a>\nRebased off of #13226.",
    "created_at": "2012-11-21T00:55:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142073",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:35'>Comment 35:</a>
Rebased off of #13226.



---

archive/issue_comments_142074.json:
```json
{
    "body": "Changed dependencies from **#13244 #13590** to **#13244 #13590 #13226**",
    "created_at": "2012-11-21T00:55:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142074",
    "user": "https://github.com/tscrim"
}
```

Changed dependencies from **#13244 #13590** to **#13244 #13590 #13226**



---

archive/issue_comments_142075.json:
```json
{
    "body": "Changed dependencies from **#13244 #13590 #13226** to none",
    "created_at": "2012-11-21T13:25:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142075",
    "user": "https://github.com/sagetrac-stumpc5"
}
```

Changed dependencies from **#13244 #13590 #13226** to none



---

archive/issue_comments_142076.json:
```json
{
    "body": "<a id='comment:36'>Comment 36:</a>\nAttachment: **[trac_12587-simplicial_complex_hash-ts.patch.gz](https://github.com/sagemath/sage/files/ticket12587/trac_12587-simplicial_complex_hash-ts.patch.gz)**",
    "created_at": "2012-11-21T13:25:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142076",
    "user": "https://github.com/sagetrac-stumpc5"
}
```

<a id='comment:36'>Comment 36:</a>
Attachment: **[trac_12587-simplicial_complex_hash-ts.patch.gz](https://github.com/sagemath/sage/files/ticket12587/trac_12587-simplicial_complex_hash-ts.patch.gz)**



---

archive/issue_comments_142077.json:
```json
{
    "body": "<a id='comment:37'>Comment 37:</a>\nAttachment: **[trac_12587-simplicial_complex_hash_review-cs.patch.gz](https://github.com/sagemath/sage/files/ticket12587/trac_12587-simplicial_complex_hash_review-cs.patch.gz)**",
    "created_at": "2012-11-21T14:52:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142077",
    "user": "https://github.com/sagetrac-stumpc5"
}
```

<a id='comment:37'>Comment 37:</a>
Attachment: **[trac_12587-simplicial_complex_hash_review-cs.patch.gz](https://github.com/sagemath/sage/files/ticket12587/trac_12587-simplicial_complex_hash_review-cs.patch.gz)**



---

archive/issue_events_158060.json:
```json
{
    "actor": "https://github.com/sagetrac-stumpc5",
    "created_at": "2012-11-21T14:52:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12587#event-158060"
}
```



---

archive/issue_events_158061.json:
```json
{
    "actor": "https://github.com/sagetrac-stumpc5",
    "created_at": "2012-11-21T14:52:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12587#event-158061"
}
```



---

archive/issue_comments_142078.json:
```json
{
    "body": "<a id='comment:38'>Comment 38:</a>\nReplying to [stumpc5](#comment%3A37):\n\nEverything looks good to me now -- I fixed a typo and a missing remove of the vertex_set, plus two doc strings.\n\nSo: I give it a positive review!",
    "created_at": "2012-11-21T14:54:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142078",
    "user": "https://github.com/sagetrac-stumpc5"
}
```

<a id='comment:38'>Comment 38:</a>
Replying to [stumpc5](#comment%3A37):

Everything looks good to me now -- I fixed a typo and a missing remove of the vertex_set, plus two doc strings.

So: I give it a positive review!



---

archive/issue_comments_142079.json:
```json
{
    "body": "<a id='comment:39'>Comment 39:</a>\nThank you for the review.",
    "created_at": "2012-11-21T16:04:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142079",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:39'>Comment 39:</a>
Thank you for the review.



---

archive/issue_events_158062.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2012-11-21T22:47:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12587#event-158062"
}
```



---

archive/issue_events_158063.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2012-11-21T22:47:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12587#event-158063"
}
```



---

archive/issue_comments_142080.json:
```json
{
    "body": "<a id='comment:40'>Comment 40:</a>\nThis looks very good. I have a few more changes, though: we should make sure that the various deprecations are documented in the reference manual (which does not include methods like `__init__`). Also, when I built the documentation, I got a warning about a duplicated reference for `[Hat]`, so I removed one of them. Finally, I added doctests to the `__init__` method to test the new deprecations. I think my patch needs review.",
    "created_at": "2012-11-21T22:47:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142080",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:40'>Comment 40:</a>
This looks very good. I have a few more changes, though: we should make sure that the various deprecations are documented in the reference manual (which does not include methods like `__init__`). Also, when I built the documentation, I got a warning about a duplicated reference for `[Hat]`, so I removed one of them. Finally, I added doctests to the `__init__` method to test the new deprecations. I think my patch needs review.



---

archive/issue_comments_142081.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,3 +10,11 @@\n     def __hash__(self):\n         return hash(self.__repr__())\n ```\n+\n+---\n+\n+Apply:\n+\n+- [attachment: trac_12587-simplicial_complex_hash-ts.patch.gz](https://github.com/sagemath/sage/files/ticket12587/trac_12587-simplicial_complex_hash-ts.patch.gz)\n+- [attachment: trac_12587-simplicial_complex_hash_review-cs.patch.gz](https://github.com/sagemath/sage/files/ticket12587/trac_12587-simplicial_complex_hash_review-cs.patch.gz)\n+- [attachment: trac_12587-ref-jhp.patch.gz](https://github.com/sagemath/sage/files/ticket12587/trac_12587-ref-jhp.patch.gz)\n``````\n",
    "created_at": "2012-11-21T22:50:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142081",
    "user": "https://github.com/jhpalmieri"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,3 +10,11 @@
     def __hash__(self):
         return hash(self.__repr__())
 ```
+
+---
+
+Apply:
+
+- [attachment: trac_12587-simplicial_complex_hash-ts.patch.gz](https://github.com/sagemath/sage/files/ticket12587/trac_12587-simplicial_complex_hash-ts.patch.gz)
+- [attachment: trac_12587-simplicial_complex_hash_review-cs.patch.gz](https://github.com/sagemath/sage/files/ticket12587/trac_12587-simplicial_complex_hash_review-cs.patch.gz)
+- [attachment: trac_12587-ref-jhp.patch.gz](https://github.com/sagemath/sage/files/ticket12587/trac_12587-ref-jhp.patch.gz)
``````




---

archive/issue_events_158064.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2012-11-21T22:50:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12587#event-158064"
}
```



---

archive/issue_events_158065.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2012-11-21T22:50:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12587#event-158065"
}
```



---

archive/issue_comments_142082.json:
```json
{
    "body": "<a id='comment:42'>Comment 42:</a>\nI also got the duplicate reference once (a long while ago), but never on any subsequent docbuild. I've looked over you review patch and looks good to me. Thank you for your diligence.",
    "created_at": "2012-11-22T06:34:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142082",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:42'>Comment 42:</a>
I also got the duplicate reference once (a long while ago), but never on any subsequent docbuild. I've looked over you review patch and looks good to me. Thank you for your diligence.



---

archive/issue_events_158066.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2012-11-22T06:34:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12587#event-158066"
}
```



---

archive/issue_events_158067.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2012-11-22T06:34:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12587#event-158067"
}
```



---

archive/issue_comments_142083.json:
```json
{
    "body": "Changed reviewer from **Christian Stump** to **Christian Stump, John Palmieri**",
    "created_at": "2012-11-22T06:34:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142083",
    "user": "https://github.com/tscrim"
}
```

Changed reviewer from **Christian Stump** to **Christian Stump, John Palmieri**



---

archive/issue_comments_142084.json:
```json
{
    "body": "<a id='comment:43'>Comment 43:</a>\nReplying to [@jhpalmieri](#comment%3A40):\n> Also, when I built the documentation, I got a warning about a duplicated reference for `[Hat]`, so I removed one of them.\n\nI also had this problem only the first time I built the documentation.\n\nNow, the reference is missing in the documentation of Simplex.product, which I don't think is the solution either. When I was doing the review, I spent some time to figure out how to solve this issue but didn't manage to do so.\n\nDo you happen to know how to either reference a citation in a different file, or to have the same citation in different files without getting a warning?\n\nBest, Christian",
    "created_at": "2012-11-22T07:53:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142084",
    "user": "https://github.com/sagetrac-stumpc5"
}
```

<a id='comment:43'>Comment 43:</a>
Replying to [@jhpalmieri](#comment%3A40):
> Also, when I built the documentation, I got a warning about a duplicated reference for `[Hat]`, so I removed one of them.

I also had this problem only the first time I built the documentation.

Now, the reference is missing in the documentation of Simplex.product, which I don't think is the solution either. When I was doing the review, I spent some time to figure out how to solve this issue but didn't manage to do so.

Do you happen to know how to either reference a citation in a different file, or to have the same citation in different files without getting a warning?

Best, Christian



---

archive/issue_comments_142085.json:
```json
{
    "body": "<a id='comment:44'>Comment 44:</a>\nReplying to [stumpc5](#comment%3A43):\n> Replying to [@jhpalmieri](#comment%3A40):\n> > Also, when I built the documentation, I got a warning about a duplicated reference for `[Hat]`, so I removed one of them.\n\n> \n> I also had this problem only the first time I built the documentation.\n\nI would guess that if you delete the documentation output, or if you somehow force Sage to rebuild the documentation of delta_complex.py, you'll see the warning again.\n\n> Now, the reference is missing in the documentation of Simplex.product, which I don't think is the solution either. When I was doing the review, I spent some time to figure out how to solve this issue but didn't manage to do so.\n\nI still see the reference, and if I click on the citation, I get taken to the reference in the other file. Also, most people reading the docstring will know what \"Hatcher\" means \u2013 it's not an obscure reference \u2013 so won't even need to look it up.\n\n> Do you happen to know how to either reference a citation in a different file\n\nIt works for me. Try rebuilding all of the documentation (`rm -rf SAGE_ROOT/devel/sage/doc/output/` and then `sage --docbuild reference html`).",
    "created_at": "2012-11-22T15:57:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142085",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:44'>Comment 44:</a>
Replying to [stumpc5](#comment%3A43):
> Replying to [@jhpalmieri](#comment%3A40):
> > Also, when I built the documentation, I got a warning about a duplicated reference for `[Hat]`, so I removed one of them.

> 
> I also had this problem only the first time I built the documentation.

I would guess that if you delete the documentation output, or if you somehow force Sage to rebuild the documentation of delta_complex.py, you'll see the warning again.

> Now, the reference is missing in the documentation of Simplex.product, which I don't think is the solution either. When I was doing the review, I spent some time to figure out how to solve this issue but didn't manage to do so.

I still see the reference, and if I click on the citation, I get taken to the reference in the other file. Also, most people reading the docstring will know what "Hatcher" means  it's not an obscure reference  so won't even need to look it up.

> Do you happen to know how to either reference a citation in a different file

It works for me. Try rebuilding all of the documentation (`rm -rf SAGE_ROOT/devel/sage/doc/output/` and then `sage --docbuild reference html`).



---

archive/issue_comments_142086.json:
```json
{
    "body": "<a id='comment:45'>Comment 45:</a>\nReplying to [@jhpalmieri](#comment%3A44):\n> Replying to [stumpc5](#comment%3A43):\n> > Replying to [@jhpalmieri](#comment%3A40):\n\n> I still see the reference, and if I click on the citation, I get taken to the reference in the other file. Also, most people reading the docstring will know what \"Hatcher\" means \u2013 it's not an obscure reference \u2013 so won't even need to look it up.\n\nSaying this: might it be even worth adding the reference of the freely available pdf version of the book?\n\n> It works for me. Try rebuilding all of the documentation (`rm -rf SAGE_ROOT/devel/sage/doc/output/` and then `sage --docbuild reference html`).\n\nThis indeed solved the issue on my machine as well, thanks!\n\nIf any one of you wanna go ahead: I am happy with giving it a positive review again!",
    "created_at": "2012-11-22T16:44:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142086",
    "user": "https://github.com/sagetrac-stumpc5"
}
```

<a id='comment:45'>Comment 45:</a>
Replying to [@jhpalmieri](#comment%3A44):
> Replying to [stumpc5](#comment%3A43):
> > Replying to [@jhpalmieri](#comment%3A40):

> I still see the reference, and if I click on the citation, I get taken to the reference in the other file. Also, most people reading the docstring will know what "Hatcher" means  it's not an obscure reference  so won't even need to look it up.

Saying this: might it be even worth adding the reference of the freely available pdf version of the book?

> It works for me. Try rebuilding all of the documentation (`rm -rf SAGE_ROOT/devel/sage/doc/output/` and then `sage --docbuild reference html`).

This indeed solved the issue on my machine as well, thanks!

If any one of you wanna go ahead: I am happy with giving it a positive review again!



---

archive/issue_comments_142087.json:
```json
{
    "body": "<a id='comment:46'>Comment 46:</a>\nHere's what happened (in writing this patch):\n- I wrote the reference into `simplicial_complex.py`,\n- compiled doc and got the warning,\n- remove the reference and rebuilt the doc from that (i.e. just that file),\n- it did not link, so put the reference back in and no warning showed up,\n- rebuilt the entire documentation without any #12587 patches applied\n- added the review patches, then all references/linking worked.\n\nRebuilding the entire documentation is the only way to get it to work since references are global and global changes are (currently) only removed/edited when the entire documentation is rebuilt. (This is unbelievably annoying to me when working between patches that add/modify .rst files.) Or something like that...",
    "created_at": "2012-11-22T16:46:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142087",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:46'>Comment 46:</a>
Here's what happened (in writing this patch):
- I wrote the reference into `simplicial_complex.py`,
- compiled doc and got the warning,
- remove the reference and rebuilt the doc from that (i.e. just that file),
- it did not link, so put the reference back in and no warning showed up,
- rebuilt the entire documentation without any #12587 patches applied
- added the review patches, then all references/linking worked.

Rebuilding the entire documentation is the only way to get it to work since references are global and global changes are (currently) only removed/edited when the entire documentation is rebuilt. (This is unbelievably annoying to me when working between patches that add/modify .rst files.) Or something like that...



---

archive/issue_events_158068.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-27T03:11:09Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "milestone_number": null,
    "milestone_title": "sage-5.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12587#event-158068"
}
```



---

archive/issue_events_158069.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-27T03:11:09Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "milestone_number": null,
    "milestone_title": "sage-5.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12587#event-158069"
}
```



---

archive/issue_comments_142088.json:
```json
{
    "body": "Attachment: **[trac_12587-ref-jhp.patch.gz](https://github.com/sagemath/sage/files/ticket12587/trac_12587-ref-jhp.patch.gz)**",
    "created_at": "2012-11-28T04:27:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142088",
    "user": "https://github.com/jhpalmieri"
}
```

Attachment: **[trac_12587-ref-jhp.patch.gz](https://github.com/sagemath/sage/files/ticket12587/trac_12587-ref-jhp.patch.gz)**



---

archive/issue_comments_142089.json:
```json
{
    "body": "<a id='comment:48'>Comment 48:</a>\nI updated my referee patch to deal with one more instance of `SimplicialComplex` begin called with a vertex set (in `interfaces/chomp.py`). There is probably one more that needs fixing (in `sandpiles/sandpile.py`), but I haven't installed the optional package 4ti2 to check it. I *have* installed CHomP, so I can verify the one I added to the patch.",
    "created_at": "2012-11-28T04:35:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142089",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:48'>Comment 48:</a>
I updated my referee patch to deal with one more instance of `SimplicialComplex` begin called with a vertex set (in `interfaces/chomp.py`). There is probably one more that needs fixing (in `sandpiles/sandpile.py`), but I haven't installed the optional package 4ti2 to check it. I *have* installed CHomP, so I can verify the one I added to the patch.



---

archive/issue_comments_142090.json:
```json
{
    "body": "<a id='comment:49'>Comment 49:</a>\n(See also #13769, which fixes optional doctests for `interfaces/chomp.py` when CHomP is installed.)",
    "created_at": "2012-11-28T04:45:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142090",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:49'>Comment 49:</a>
(See also #13769, which fixes optional doctests for `interfaces/chomp.py` when CHomP is installed.)



---

archive/issue_comments_142091.json:
```json
{
    "body": "Dependencies: **#13226, #13244, #13590**",
    "created_at": "2012-12-11T21:29:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142091",
    "user": "https://github.com/jhpalmieri"
}
```

Dependencies: **#13226, #13244, #13590**



---

archive/issue_comments_142092.json:
```json
{
    "body": "Merged: **sage-5.6.beta1**",
    "created_at": "2012-12-21T09:31:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12587#issuecomment-142092",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.6.beta1**



---

archive/issue_events_158070.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-12-21T09:31:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12587#event-158070"
}
```



---

archive/issue_events_158071.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-12-21T09:31:20Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/12587",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12587#event-158071"
}
```
