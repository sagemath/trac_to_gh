# Issue 12011: cvxopt: fix illegal BLAS call and fix Solaris build

archive/issues_011839.json:
```json
{
    "body": "On OS X Lion, if you set `SAGE_CHECK=yes` and build cvxopt, some tests fail and then it hangs before completing the tests.  See [http://sage.math.washington.edu/home/palmieri/misc/cvxopt-1.1.3.log](http://sage.math.washington.edu/home/palmieri/misc/cvxopt-1.1.3.log) for the install log.\n\nCVXOPT devs claimed that Apple shipped a broken BLAS. But it turned out that they cannot provide valid examples showing this; they did not adhere to a de facto BLAS standard, and they agreed to fix the corresponding CVXOPT bug quickly.\n\nThis spkg also fixes an issue building with GCC on Solaris 10.  There already was a fix for this in the spkg, but it was only enabled for GCC versions < 4.5 (without any mention of why).  Enable this fix for all GCC versions.\n\n---\n\nNew spkg: [http://boxen.math.washington.edu/home/jdemeyer/spkg/cvxopt-1.1.4.p1.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/cvxopt-1.1.4.p1.spkg)\n\n\n**CC:**  @dimpase @vbraun\n\n**Keywords:** Lion Darwin cvxopt atlas blas Solaris\n\n**Upstream:** Fixed upstream, in a later stable release.\n\n**Reviewer:** Jeroen Demeyer, John Palmieri\n\n**Author:** Jeroen Demeyer, John Palmieri\n\n**Merged:** sage-5.0.beta13\n\n**Dependencies:** #12519\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/12011\n\n",
    "closed_at": "2012-04-04T19:27:35Z",
    "created_at": "2011-11-11T06:40:38Z",
    "labels": [
        "component: packages: standard",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.0",
    "title": "cvxopt: fix illegal BLAS call and fix Solaris build",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12011",
    "user": "https://github.com/jhpalmieri"
}
```
On OS X Lion, if you set `SAGE_CHECK=yes` and build cvxopt, some tests fail and then it hangs before completing the tests.  See [http://sage.math.washington.edu/home/palmieri/misc/cvxopt-1.1.3.log](http://sage.math.washington.edu/home/palmieri/misc/cvxopt-1.1.3.log) for the install log.

CVXOPT devs claimed that Apple shipped a broken BLAS. But it turned out that they cannot provide valid examples showing this; they did not adhere to a de facto BLAS standard, and they agreed to fix the corresponding CVXOPT bug quickly.

This spkg also fixes an issue building with GCC on Solaris 10.  There already was a fix for this in the spkg, but it was only enabled for GCC versions < 4.5 (without any mention of why).  Enable this fix for all GCC versions.

---

New spkg: [http://boxen.math.washington.edu/home/jdemeyer/spkg/cvxopt-1.1.4.p1.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/cvxopt-1.1.4.p1.spkg)


**CC:**  @dimpase @vbraun

**Keywords:** Lion Darwin cvxopt atlas blas Solaris

**Upstream:** Fixed upstream, in a later stable release.

**Reviewer:** Jeroen Demeyer, John Palmieri

**Author:** Jeroen Demeyer, John Palmieri

**Merged:** sage-5.0.beta13

**Dependencies:** #12519

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/12011





---

archive/issue_events_037555.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-02T13:12:19Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "milestone": "sage-5.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12011#event-37555"
}
```



---

archive/issue_comments_171683.json:
```json
{
    "body": "<a id='comment:2'></a>\nIn a related matter, we should patch spkg-check to exit with a nonzero return value if tests fail.  We can either exit immediately once there's a failure, or we can run all tests and then exit.  I'm not sure which of these is better.  In general I would suggest the latter, but since it's actually hanging on OS X Lion (after at least one failed test), I might lean toward the former...\n\nAlso, should we upgrade to version 1.1.4?",
    "created_at": "2012-02-01T06:41:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171683",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:2'></a>
In a related matter, we should patch spkg-check to exit with a nonzero return value if tests fail.  We can either exit immediately once there's a failure, or we can run all tests and then exit.  I'm not sure which of these is better.  In general I would suggest the latter, but since it's actually hanging on OS X Lion (after at least one failed test), I might lean toward the former...

Also, should we upgrade to version 1.1.4?



---

archive/issue_comments_171684.json:
```json
{
    "body": "<a id='comment:3'></a>\nSee #12519 for a new cvxopt spkg.  I fixed `spkg-check` such that it now actually exists when there is a failure.  However, it still fails on OS X Lion.",
    "created_at": "2012-02-16T11:09:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171684",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:3'></a>
See #12519 for a new cvxopt spkg.  I fixed `spkg-check` such that it now actually exists when there is a failure.  However, it still fails on OS X Lion.



---

archive/issue_comments_171685.json:
```json
{
    "body": "<a id='comment:4'></a>\nDima: any ideas about the self-test failures?",
    "created_at": "2012-02-20T04:36:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171685",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:4'></a>
Dima: any ideas about the self-test failures?



---

archive/issue_comments_171686.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [jhpalmieri](#comment%3A4):\n> Dima: any ideas about the self-test failures?\n\n\nI just asked  upstream [here](https://groups.google.com/d/msg/cvxopt/cTZo0LYDo0c/PekNsa2yP-IJ).\nIs there a way to get access to 10.7 for me?\n\nDima",
    "created_at": "2012-02-20T10:35:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171686",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:5'></a>
Replying to [jhpalmieri](#comment%3A4):
> Dima: any ideas about the self-test failures?


I just asked  upstream [here](https://groups.google.com/d/msg/cvxopt/cTZo0LYDo0c/PekNsa2yP-IJ).
Is there a way to get access to 10.7 for me?

Dima



---

archive/issue_comments_171687.json:
```json
{
    "body": "**Changing upstream** from \"N/A\" to \"Reported upstream. Little or no feedback.\".",
    "created_at": "2012-02-20T10:35:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171687",
    "user": "https://github.com/dimpase"
}
```

**Changing upstream** from "N/A" to "Reported upstream. Little or no feedback.".



---

archive/issue_comments_171688.json:
```json
{
    "body": "**Changing status** from new to needs_info.",
    "created_at": "2012-02-20T12:42:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171688",
    "user": "https://github.com/dimpase"
}
```

**Changing status** from new to needs_info.



---

archive/issue_comments_171689.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [dimpase](#comment%3A5):\n> Replying to [jhpalmieri](#comment%3A4):\n> > Dima: any ideas about the self-test failures?\n\n> \n> I just asked  upstream [here](https://groups.google.com/d/msg/cvxopt/cTZo0LYDo0c/PekNsa2yP-IJ).\n> Is there a way to get access to 10.7 for me?\n> \n> Dima\n\n\n[here](https://groups.google.com/d/msg/cvxopt/cTZo0LYDo0c/T2gs1V7gyygJ) it is written that it's probably a bug in Apple's blas/lapack. A workaround is to use Atlas. I have no way to check this at the moment, but it looks very reasonable to me.\n\nIt would be great if you tested this with the newest Xcode...",
    "created_at": "2012-02-20T12:42:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171689",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:6'></a>
Replying to [dimpase](#comment%3A5):
> Replying to [jhpalmieri](#comment%3A4):
> > Dima: any ideas about the self-test failures?

> 
> I just asked  upstream [here](https://groups.google.com/d/msg/cvxopt/cTZo0LYDo0c/PekNsa2yP-IJ).
> Is there a way to get access to 10.7 for me?
> 
> Dima


[here](https://groups.google.com/d/msg/cvxopt/cTZo0LYDo0c/T2gs1V7gyygJ) it is written that it's probably a bug in Apple's blas/lapack. A workaround is to use Atlas. I have no way to check this at the moment, but it looks very reasonable to me.

It would be great if you tested this with the newest Xcode...



---

archive/issue_comments_171690.json:
```json
{
    "body": "<a id='comment:7'></a>\nReplying to [dimpase](#comment%3A6):\n> [here](https://groups.google.com/d/msg/cvxopt/cTZo0LYDo0c/T2gs1V7gyygJ) it is written that it's probably a bug in Apple's blas/lapack. A workaround is to use Atlas. I have no way to check this at the moment, but it looks very reasonable to me.\n\n\nDo you mean Apple's ATLAS? We don't build ATLAS on Mac OS X, we just use the system's libraries.  What should I do to try this out? Can I just make some changes in the spkg-install script?\n \n> It would be great if you tested this with the newest Xcode...\n\n\nI've tried this with various versions of Xcode, including the newly released 4.3, and I get failures in all of them.",
    "created_at": "2012-02-20T23:19:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171690",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:7'></a>
Replying to [dimpase](#comment%3A6):
> [here](https://groups.google.com/d/msg/cvxopt/cTZo0LYDo0c/T2gs1V7gyygJ) it is written that it's probably a bug in Apple's blas/lapack. A workaround is to use Atlas. I have no way to check this at the moment, but it looks very reasonable to me.


Do you mean Apple's ATLAS? We don't build ATLAS on Mac OS X, we just use the system's libraries.  What should I do to try this out? Can I just make some changes in the spkg-install script?
 
> It would be great if you tested this with the newest Xcode...


I've tried this with various versions of Xcode, including the newly released 4.3, and I get failures in all of them.



---

archive/issue_comments_171691.json:
```json
{
    "body": "<a id='comment:8'></a>\nBy the way, it might make sense to base further discussion on the new cvxopt package at #12519.",
    "created_at": "2012-02-20T23:36:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171691",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:8'></a>
By the way, it might make sense to base further discussion on the new cvxopt package at #12519.



---

archive/issue_comments_171692.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [jhpalmieri](#comment%3A7):\n> Replying to [dimpase](#comment%3A6):\n> > [here](https://groups.google.com/d/msg/cvxopt/cTZo0LYDo0c/T2gs1V7gyygJ) it is written that it's probably a bug in Apple's blas/lapack. A workaround is to use Atlas. I have no way to check this at the moment, but it looks very reasonable to me.\n\n> \n> Do you mean Apple's ATLAS? We don't build ATLAS on Mac OS X, we just use the system's libraries.  What should I do to try this out? Can I just make some changes in the spkg-install script?\n\n\nWell, no. We need to build ATLAS spkg (or get some other non-Apple lapack/blas somehow) and use it.\nActually, if I recall right, this (native lapack/blas) is an artefact of the PPC support. We can perfectly well use Atlas\non x86, right?\n\n\n>  \n\n> > It would be great if you tested this with the newest Xcode...\n> \n> I've tried this with various versions of Xcode, including the newly released 4.3, and I get failures in all of them.\n",
    "created_at": "2012-02-21T03:15:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171692",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:9'></a>
Replying to [jhpalmieri](#comment%3A7):
> Replying to [dimpase](#comment%3A6):
> > [here](https://groups.google.com/d/msg/cvxopt/cTZo0LYDo0c/T2gs1V7gyygJ) it is written that it's probably a bug in Apple's blas/lapack. A workaround is to use Atlas. I have no way to check this at the moment, but it looks very reasonable to me.

> 
> Do you mean Apple's ATLAS? We don't build ATLAS on Mac OS X, we just use the system's libraries.  What should I do to try this out? Can I just make some changes in the spkg-install script?


Well, no. We need to build ATLAS spkg (or get some other non-Apple lapack/blas somehow) and use it.
Actually, if I recall right, this (native lapack/blas) is an artefact of the PPC support. We can perfectly well use Atlas
on x86, right?


>  

> > It would be great if you tested this with the newest Xcode...
> 
> I've tried this with various versions of Xcode, including the newly released 4.3, and I get failures in all of them.




---

archive/issue_events_037556.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "rename": {
        "from": "OS X Lion: cvxopt fails self tests",
        "to": "Build ATLAS on OS X Lion"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12011#event-37556"
}
```



---

archive/issue_comments_171693.json:
```json
{
    "body": "**Changing keywords** from \"Lion Darwin cvxopt\" to \"Lion Darwin cvxopt atlas blas\".",
    "created_at": "2012-03-06T10:46:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171693",
    "user": "https://github.com/jdemeyer"
}
```

**Changing keywords** from "Lion Darwin cvxopt" to "Lion Darwin cvxopt atlas blas".



---

archive/issue_comments_171694.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,6 +1,3 @@\n-On OS X Lion, if you set `SAGE_CHECK=yes` and build cvxopt, some tests fail and then it hangs before completing the tests.  See\n+On OS X Lion, if you set `SAGE_CHECK=yes` and build cvxopt, some tests fail and then it hangs before completing the tests.  See [http://sage.math.washington.edu/home/palmieri/misc/cvxopt-1.1.3.log](http://sage.math.washington.edu/home/palmieri/misc/cvxopt-1.1.3.log) for the install log.\n \n- [http://sage.math.washington.edu/home/palmieri/misc/cvxopt-1.1.3.log](http://sage.math.washington.edu/home/palmieri/misc/cvxopt-1.1.3.log)\n-\n-for the install log.\n-\n+The problem is due to Apple shipping a totally broken BLAS.  Therefore, we need to build ATLAS.\n``````\n",
    "created_at": "2012-03-06T10:46:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171694",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,6 +1,3 @@
-On OS X Lion, if you set `SAGE_CHECK=yes` and build cvxopt, some tests fail and then it hangs before completing the tests.  See
+On OS X Lion, if you set `SAGE_CHECK=yes` and build cvxopt, some tests fail and then it hangs before completing the tests.  See [http://sage.math.washington.edu/home/palmieri/misc/cvxopt-1.1.3.log](http://sage.math.washington.edu/home/palmieri/misc/cvxopt-1.1.3.log) for the install log.
 
- [http://sage.math.washington.edu/home/palmieri/misc/cvxopt-1.1.3.log](http://sage.math.washington.edu/home/palmieri/misc/cvxopt-1.1.3.log)
-
-for the install log.
-
+The problem is due to Apple shipping a totally broken BLAS.  Therefore, we need to build ATLAS.
``````




---

archive/issue_comments_171695.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n On OS X Lion, if you set `SAGE_CHECK=yes` and build cvxopt, some tests fail and then it hangs before completing the tests.  See [http://sage.math.washington.edu/home/palmieri/misc/cvxopt-1.1.3.log](http://sage.math.washington.edu/home/palmieri/misc/cvxopt-1.1.3.log) for the install log.\n \n The problem is due to Apple shipping a totally broken BLAS.  Therefore, we need to build ATLAS.\n+\n+**spkg** (untested!): [http://boxen.math.washington.edu/home/jdemeyer/spkg/atlas-3.8.4.p2.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/atlas-3.8.4.p2.spkg)\n``````\n",
    "created_at": "2012-03-06T11:22:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171695",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
 On OS X Lion, if you set `SAGE_CHECK=yes` and build cvxopt, some tests fail and then it hangs before completing the tests.  See [http://sage.math.washington.edu/home/palmieri/misc/cvxopt-1.1.3.log](http://sage.math.washington.edu/home/palmieri/misc/cvxopt-1.1.3.log) for the install log.
 
 The problem is due to Apple shipping a totally broken BLAS.  Therefore, we need to build ATLAS.
+
+**spkg** (untested!): [http://boxen.math.washington.edu/home/jdemeyer/spkg/atlas-3.8.4.p2.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/atlas-3.8.4.p2.spkg)
``````




---

archive/issue_comments_171696.json:
```json
{
    "body": "<a id='comment:12'></a>\ndoesnt work on OSX10.6:\n\n```\nCalling sage-spkg on 'http://boxen.math.washington.edu/home/jdemeyer/spkg/atlas-3.8.4.p2.spkg'\natlas-3.8.4.p2\nMachine:\nDarwin nash 10.8.0 Darwin Kernel Version 10.8.0: Tue Jun  7 16:33:36 PDT 2011; root:xnu-1504.15.3~1/RELEASE_I386 i386\nDeleting directories from past builds of previous/current versions of atlas-3.8.4.p2\n/usr/local/src/sage/sage-4.8.alpha4/local/bin/sage-spkg: file atlas-3.8.4.p2 does not exist\nAttempting to download it.\nhttp://boxen.math.washington.edu/home/jdemeyer/spkg/atlas-3.8.4.p2.spkg --> atlas-3.8.4.p2.spkg\n[..................................................]\nExtracting package /usr/local/src/sage/sage-4.8.alpha4/spkg/optional/atlas-3.8.4.p2.spkg ...\n-rw-r--r--  1 dima  staff  2866339 Mar  6 19:27 /usr/local/src/sage/sage-4.8.alpha4/spkg/optional/atlas-3.8.4.p2.spkg\nFinished extraction\n****************************************************\nHost system\nuname -a:\nDarwin nash 10.8.0 Darwin Kernel Version 10.8.0: Tue Jun  7 16:33:36 PDT 2011; root:xnu-1504.15.3~1/RELEASE_I386 i386\n****************************************************\n****************************************************\nCC Version\ngcc -v\nUsing built-in specs.\nTarget: i686-apple-darwin10\nConfigured with: /var/tmp/gcc/gcc-5666.3~6/src/configure --disable-checking --enable-werror --prefix=/usr --mandir=/share/man --enable-languages=c,objc,c++,obj-c++ --program-transform-name=/^[cg][^.-]*$/s/$/-4.2/ --with-slibdir=/usr/lib --build=i686-apple-darwin10 --program-prefix=i686-apple-darwin10- --host=x86_64-apple-darwin10 --target=i686-apple-darwin10 --with-gxx-include-dir=/include/c++/4.2.1\nThread model: posix\ngcc version 4.2.1 (Apple Inc. build 5666) (dot 3)\n****************************************************\nTraceback (most recent call last):\n  File \"./spkg-install\", line 13, in <module>\n    from configuration import conf, cp, try_run, edit_in_place\n  File \"/usr/local/src/sage/sage-4.8.alpha4/spkg/build/atlas-3.8.4.p2/configuration.py\", line 108, in <module>\n    conf['release'] = subprocess.check_output(['uname', '-r'])\nAttributeError: 'module' object has no attribute 'check_output'\n\nreal\t0m0.092s\nuser\t0m0.038s\nsys\t0m0.044s\n************************************************************************\nError installing package atlas-3.8.4.p2\n************************************************************************\nPlease email sage-devel (http://groups.google.com/group/sage-devel)\nexplaining the problem and including the relevant part of the log file\n  /usr/local/src/sage/sage-4.8.alpha4/spkg/logs/atlas-3.8.4.p2.log\nDescribe your computer, operating system, etc.\nIf you want to try to fix the problem yourself, *don't* just cd to\n/usr/local/src/sage/sage-4.8.alpha4/spkg/build/atlas-3.8.4.p2 and type 'make' or whatever is appropriate.\nInstead, the following commands setup all environment variables\ncorrectly and load a subshell for you to debug the error:\n  (cd '/usr/local/src/sage/sage-4.8.alpha4/spkg/build/atlas-3.8.4.p2' && '/usr/local/src/sage/sage-4.8.alpha4/sage' -sh)\nWhen you are done debugging, you can type \"exit\" to leave the subshell.\n************************************************************************\nError: Failed to install package 'atlas-3.8.4.p2'.\nnash:sage-5.0.beta6 dima$ \n\n```",
    "created_at": "2012-03-06T11:29:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171696",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:12'></a>
doesnt work on OSX10.6:

```
Calling sage-spkg on 'http://boxen.math.washington.edu/home/jdemeyer/spkg/atlas-3.8.4.p2.spkg'
atlas-3.8.4.p2
Machine:
Darwin nash 10.8.0 Darwin Kernel Version 10.8.0: Tue Jun  7 16:33:36 PDT 2011; root:xnu-1504.15.3~1/RELEASE_I386 i386
Deleting directories from past builds of previous/current versions of atlas-3.8.4.p2
/usr/local/src/sage/sage-4.8.alpha4/local/bin/sage-spkg: file atlas-3.8.4.p2 does not exist
Attempting to download it.
http://boxen.math.washington.edu/home/jdemeyer/spkg/atlas-3.8.4.p2.spkg --> atlas-3.8.4.p2.spkg
[..................................................]
Extracting package /usr/local/src/sage/sage-4.8.alpha4/spkg/optional/atlas-3.8.4.p2.spkg ...
-rw-r--r--  1 dima  staff  2866339 Mar  6 19:27 /usr/local/src/sage/sage-4.8.alpha4/spkg/optional/atlas-3.8.4.p2.spkg
Finished extraction
****************************************************
Host system
uname -a:
Darwin nash 10.8.0 Darwin Kernel Version 10.8.0: Tue Jun  7 16:33:36 PDT 2011; root:xnu-1504.15.3~1/RELEASE_I386 i386
****************************************************
****************************************************
CC Version
gcc -v
Using built-in specs.
Target: i686-apple-darwin10
Configured with: /var/tmp/gcc/gcc-5666.3~6/src/configure --disable-checking --enable-werror --prefix=/usr --mandir=/share/man --enable-languages=c,objc,c++,obj-c++ --program-transform-name=/^[cg][^.-]*$/s/$/-4.2/ --with-slibdir=/usr/lib --build=i686-apple-darwin10 --program-prefix=i686-apple-darwin10- --host=x86_64-apple-darwin10 --target=i686-apple-darwin10 --with-gxx-include-dir=/include/c++/4.2.1
Thread model: posix
gcc version 4.2.1 (Apple Inc. build 5666) (dot 3)
****************************************************
Traceback (most recent call last):
  File "./spkg-install", line 13, in <module>
    from configuration import conf, cp, try_run, edit_in_place
  File "/usr/local/src/sage/sage-4.8.alpha4/spkg/build/atlas-3.8.4.p2/configuration.py", line 108, in <module>
    conf['release'] = subprocess.check_output(['uname', '-r'])
AttributeError: 'module' object has no attribute 'check_output'

real	0m0.092s
user	0m0.038s
sys	0m0.044s
************************************************************************
Error installing package atlas-3.8.4.p2
************************************************************************
Please email sage-devel (http://groups.google.com/group/sage-devel)
explaining the problem and including the relevant part of the log file
  /usr/local/src/sage/sage-4.8.alpha4/spkg/logs/atlas-3.8.4.p2.log
Describe your computer, operating system, etc.
If you want to try to fix the problem yourself, *don't* just cd to
/usr/local/src/sage/sage-4.8.alpha4/spkg/build/atlas-3.8.4.p2 and type 'make' or whatever is appropriate.
Instead, the following commands setup all environment variables
correctly and load a subshell for you to debug the error:
  (cd '/usr/local/src/sage/sage-4.8.alpha4/spkg/build/atlas-3.8.4.p2' && '/usr/local/src/sage/sage-4.8.alpha4/sage' -sh)
When you are done debugging, you can type "exit" to leave the subshell.
************************************************************************
Error: Failed to install package 'atlas-3.8.4.p2'.
nash:sage-5.0.beta6 dima$ 

```



---

archive/issue_comments_171697.json:
```json
{
    "body": "<a id='comment:13'></a>\nYou're using a too old version of Sage.",
    "created_at": "2012-03-06T11:32:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171697",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'></a>
You're using a too old version of Sage.



---

archive/issue_comments_171698.json:
```json
{
    "body": "<a id='comment:14'></a>\nReplying to [jdemeyer](#comment%3A13):\n> You're using a too old version of Sage.\n\n/me bangs head on the kbd...",
    "created_at": "2012-03-06T11:59:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171698",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:14'></a>
Replying to [jdemeyer](#comment%3A13):
> You're using a too old version of Sage.

/me bangs head on the kbd...



---

archive/issue_comments_171699.json:
```json
{
    "body": "<a id='comment:15'></a>\nDoes this *only* build ATLAS in Lion, or all Mac?  Seems silly to do it from scratch on others, maybe we can check Dima's program mentioned at #12519 on older versions...",
    "created_at": "2012-03-06T14:44:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171699",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:15'></a>
Does this *only* build ATLAS in Lion, or all Mac?  Seems silly to do it from scratch on others, maybe we can check Dima's program mentioned at #12519 on older versions...



---

archive/issue_comments_171700.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [kcrisman](#comment%3A15):\n> Does this *only* build ATLAS in Lion, or all Mac?\n\n\nOnly on Lion.",
    "created_at": "2012-03-06T14:46:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171700",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:16'></a>
Replying to [kcrisman](#comment%3A15):
> Does this *only* build ATLAS in Lion, or all Mac?


Only on Lion.



---

archive/issue_comments_171701.json:
```json
{
    "body": "<a id='comment:17'></a>\nAfter more than 3 hours, it finally managed to **fail** to build on `sqrt5`:\n\n```\nATLAS install complete.  Examine\nATLAS/bin/<arch>/INSTALL_LOG/SUMMARY.LOG for details.\nmake -j1 clean\nrm -f *.o x* config?.out *core*\nrm: xarchinfo_freebsd.dSYM: is a directory\nrm: xarchinfo_x86.dSYM: is a directory\nrm: xconfig.dSYM: is a directory\nrm: xprobe_gas_x8632.dSYM: is a directory\nrm: xprobe_gas_x8664.dSYM: is a directory\nrm: xspew.dSYM: is a directory\nmake[1]: *** [clean] Error 1\nmake: *** [build] Error 2\nATLAS failed to build, possibly because of a loaded system.\nTraceback (most recent call last):\n  File \"./spkg-install\", line 473, in <module>\n    assert rc==0, 'Failed to build ATLAS.'\nAssertionError: Failed to build ATLAS.\n\nreal    202m1.081s\nuser    182m33.861s\nsys     10m48.195s\n```\n\nWeird that it reported that the build succeeded, but still it failed somehow.",
    "created_at": "2012-03-06T16:05:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171701",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'></a>
After more than 3 hours, it finally managed to **fail** to build on `sqrt5`:

```
ATLAS install complete.  Examine
ATLAS/bin/<arch>/INSTALL_LOG/SUMMARY.LOG for details.
make -j1 clean
rm -f *.o x* config?.out *core*
rm: xarchinfo_freebsd.dSYM: is a directory
rm: xarchinfo_x86.dSYM: is a directory
rm: xconfig.dSYM: is a directory
rm: xprobe_gas_x8632.dSYM: is a directory
rm: xprobe_gas_x8664.dSYM: is a directory
rm: xspew.dSYM: is a directory
make[1]: *** [clean] Error 1
make: *** [build] Error 2
ATLAS failed to build, possibly because of a loaded system.
Traceback (most recent call last):
  File "./spkg-install", line 473, in <module>
    assert rc==0, 'Failed to build ATLAS.'
AssertionError: Failed to build ATLAS.

real    202m1.081s
user    182m33.861s
sys     10m48.195s
```

Weird that it reported that the build succeeded, but still it failed somehow.



---

archive/issue_comments_171702.json:
```json
{
    "body": "<a id='comment:18'></a>\nReplace a \"rm -f\" by \"rm -rf\" probably will solve this problem.\n\nThis explain the dSYM directories: [http://stackoverflow.com/questions/584825/dsym-directories-while-compiling-c-code-in-macos](http://stackoverflow.com/questions/584825/dsym-directories-while-compiling-c-code-in-macos)",
    "created_at": "2012-03-06T16:24:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171702",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:18'></a>
Replace a "rm -f" by "rm -rf" probably will solve this problem.

This explain the dSYM directories: [http://stackoverflow.com/questions/584825/dsym-directories-while-compiling-c-code-in-macos](http://stackoverflow.com/questions/584825/dsym-directories-while-compiling-c-code-in-macos)



---

archive/issue_comments_171703.json:
```json
{
    "body": "<a id='comment:19'></a>\nAah, you beat me by five seconds!   I concur.",
    "created_at": "2012-03-06T16:25:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171703",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:19'></a>
Aah, you beat me by five seconds!   I concur.



---

archive/issue_comments_171704.json:
```json
{
    "body": "<a id='comment:20'></a>\nI put up a new version hopefully fixing this, currently building on `sqrt5`...",
    "created_at": "2012-03-06T16:52:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171704",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:20'></a>
I put up a new version hopefully fixing this, currently building on `sqrt5`...



---

archive/issue_comments_171705.json:
```json
{
    "body": "<a id='comment:21'></a>\n:-(\n\n```\nATLAS install complete.  Examine\nATLAS/bin/<arch>/INSTALL_LOG/SUMMARY.LOG for details.\nmake -j1 clean\n# Xcode (OS X) may create directories like xspew.dSYM.\n# Add -r option to delete also these.\nrm -rf *.o x* config?.out *core*\nFinished building ATLAS core.\nFinished building ATLAS core.\nRunning make -j1 shared cshared\nrm -f libatlas.so liblapack.so\nmake -j1 libatlas.so liblapack.so libf77blas.so libcblas.so liblapack.so\nld -melf_x86_64 -shared -soname libatlas.so -o libatlas.so \\\n        --whole-archive libatlas.a --no-whole-archive -lc -lpthread -lm\nld: unknown option: -melf_x86_64\nmake[1]: *** [libatlas.so] Error 1\nmake: *** [shared] Error 2\nTraceback (most recent call last):\n  File \"./spkg-install\", line 480, in <module>\n    assert rc==0, 'Building shared ATLAS library failed.'\nAssertionError: Building shared ATLAS library failed.\n```",
    "created_at": "2012-03-06T17:02:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171705",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:21'></a>
:-(

```
ATLAS install complete.  Examine
ATLAS/bin/<arch>/INSTALL_LOG/SUMMARY.LOG for details.
make -j1 clean
# Xcode (OS X) may create directories like xspew.dSYM.
# Add -r option to delete also these.
rm -rf *.o x* config?.out *core*
Finished building ATLAS core.
Finished building ATLAS core.
Running make -j1 shared cshared
rm -f libatlas.so liblapack.so
make -j1 libatlas.so liblapack.so libf77blas.so libcblas.so liblapack.so
ld -melf_x86_64 -shared -soname libatlas.so -o libatlas.so \
        --whole-archive libatlas.a --no-whole-archive -lc -lpthread -lm
ld: unknown option: -melf_x86_64
make[1]: *** [libatlas.so] Error 1
make: *** [shared] Error 2
Traceback (most recent call last):
  File "./spkg-install", line 480, in <module>
    assert rc==0, 'Building shared ATLAS library failed.'
AssertionError: Building shared ATLAS library failed.
```



---

archive/issue_comments_171706.json:
```json
{
    "body": "<a id='comment:22'></a>\nWe need to totally rewrite the command line\n\n```\nld -melf_x86_64 -shared -soname libatlas.so -o libatlas.so \\\n        --whole-archive libatlas.a --no-whole-archive -lc -lpthread -lm\n```\n\nI unfortunately don't know enough about Apple's linker to know what to do here...",
    "created_at": "2012-03-06T20:20:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171706",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:22'></a>
We need to totally rewrite the command line

```
ld -melf_x86_64 -shared -soname libatlas.so -o libatlas.so \
        --whole-archive libatlas.a --no-whole-archive -lc -lpthread -lm
```

I unfortunately don't know enough about Apple's linker to know what to do here...



---

archive/issue_comments_171707.json:
```json
{
    "body": "**Author:** Jeroen Demeyer",
    "created_at": "2012-03-06T20:20:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171707",
    "user": "https://github.com/jdemeyer"
}
```

**Author:** Jeroen Demeyer



---

archive/issue_comments_171708.json:
```json
{
    "body": "**Changing status** from needs_info to needs_review.",
    "created_at": "2012-03-06T20:20:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171708",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from needs_info to needs_review.



---

archive/issue_comments_171709.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2012-03-06T20:20:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171709",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_171710.json:
```json
{
    "body": "<a id='comment:24'></a>\nAccording to Clint Whaley, only ATLAS 3.9+ supports building a shared library on OSX:\n\nhttp://sourceforge.net/tracker/?func=detail&aid=3178751&group_id=23725&atid=379483",
    "created_at": "2012-03-06T22:58:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171710",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:24'></a>
According to Clint Whaley, only ATLAS 3.9+ supports building a shared library on OSX:

http://sourceforge.net/tracker/?func=detail&aid=3178751&group_id=23725&atid=379483



---

archive/issue_comments_171711.json:
```json
{
    "body": "<a id='comment:25'></a>\nI've made a new atlas spkg here:\n\nhttp://www.stp.dias.ie/~vbraun/Sage/spkg/atlas-3.9.68.spkg\n\nTesting will take some time...",
    "created_at": "2012-03-07T01:45:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171711",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:25'></a>
I've made a new atlas spkg here:

http://www.stp.dias.ie/~vbraun/Sage/spkg/atlas-3.9.68.spkg

Testing will take some time...



---

archive/issue_comments_171712.json:
```json
{
    "body": "<a id='comment:26'></a>\nReplying to [vbraun](#comment%3A25):\n> I've made a new atlas spkg here:\n> \n> http://www.stp.dias.ie/~vbraun/Sage/spkg/atlas-3.9.68.spkg\n> \n> Testing will take some time...\n\n\non sqrt5 with Sage 5.0.beta7:\n\n```\n...\n    Intel?: True\n    processor: i386\nInstalling ATLAS on OS X Lion, as the BLAS shipped with the system\nis broken, see http://trac.sagemath.org/sage_trac/ticket/12011\nCopying patches/Makefile to src/CONFIG/src/Makefile\nCopying patches/archinfo_linux.c to src/CONFIG/src/backend/archinfo_linux.c\nCopying patches/archinfo_x86.c to src/CONFIG/src/backend/archinfo_x86.c\nCopying patches/probe_comp.c to src/CONFIG/src/probe_comp.c\nFirst attempt: automatic tuning.\nRunning configure with arch = None and isa extensions None\nTraceback (most recent call last):\n  File \"./spkg-install\", line 408, in <module>\n    rc = build()\n  File \"./spkg-install\", line 396, in build\n    rc = configure(arch, isa_ext)    \n  File \"./spkg-install\", line 278, in configure\n    cmd += ' -O'+atlas_system\nTypeError: cannot concatenate 'str' and 'int' objects\n```",
    "created_at": "2012-03-07T02:47:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171712",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:26'></a>
Replying to [vbraun](#comment%3A25):
> I've made a new atlas spkg here:
> 
> http://www.stp.dias.ie/~vbraun/Sage/spkg/atlas-3.9.68.spkg
> 
> Testing will take some time...


on sqrt5 with Sage 5.0.beta7:

```
...
    Intel?: True
    processor: i386
Installing ATLAS on OS X Lion, as the BLAS shipped with the system
is broken, see http://trac.sagemath.org/sage_trac/ticket/12011
Copying patches/Makefile to src/CONFIG/src/Makefile
Copying patches/archinfo_linux.c to src/CONFIG/src/backend/archinfo_linux.c
Copying patches/archinfo_x86.c to src/CONFIG/src/backend/archinfo_x86.c
Copying patches/probe_comp.c to src/CONFIG/src/probe_comp.c
First attempt: automatic tuning.
Running configure with arch = None and isa extensions None
Traceback (most recent call last):
  File "./spkg-install", line 408, in <module>
    rc = build()
  File "./spkg-install", line 396, in build
    rc = configure(arch, isa_ext)    
  File "./spkg-install", line 278, in configure
    cmd += ' -O'+atlas_system
TypeError: cannot concatenate 'str' and 'int' objects
```



---

archive/issue_comments_171713.json:
```json
{
    "body": "<a id='comment:27'></a>\nReplying to [dimpase](#comment%3A26):\n \n> on sqrt5 with Sage 5.0.beta7:\n\n\n```\n  File \"./spkg-install\", line 278, in configure\n    cmd += ' -O'+atlas_system\n```\n\nReplace this line with \n\n```\ncmd += ' -O '+str(atlas_system)\n```\n(note the space after O!)\n\nThe result can be obtained here: [http://boxen.math.washington.edu/home/dima/packages/atlas-3.9.68.spkg](http://boxen.math.washington.edu/home/dima/packages/atlas-3.9.68.spkg)\n\nThen is starts building. I'll report when it's done.",
    "created_at": "2012-03-07T03:21:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171713",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:27'></a>
Replying to [dimpase](#comment%3A26):
 
> on sqrt5 with Sage 5.0.beta7:


```
  File "./spkg-install", line 278, in configure
    cmd += ' -O'+atlas_system
```

Replace this line with 

```
cmd += ' -O '+str(atlas_system)
```
(note the space after O!)

The result can be obtained here: [http://boxen.math.washington.edu/home/dima/packages/atlas-3.9.68.spkg](http://boxen.math.washington.edu/home/dima/packages/atlas-3.9.68.spkg)

Then is starts building. I'll report when it's done.



---

archive/issue_comments_171714.json:
```json
{
    "body": "<a id='comment:28'></a>\nI've also fixed the spkg in the meantime, for the record",
    "created_at": "2012-03-07T03:26:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171714",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:28'></a>
I've also fixed the spkg in the meantime, for the record



---

archive/issue_comments_171715.json:
```json
{
    "body": "<a id='comment:29'></a>\nReplying to [vbraun](#comment%3A28):\n> I've also fixed the spkg in the meantime, for the record\n\n\n\n```\nsqrt5:standard dima$ mailx vbraun\nSubject: let's not try to build 2 atlaces at the same time \nOK? :)\nEOT\n```",
    "created_at": "2012-03-07T03:31:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171715",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:29'></a>
Replying to [vbraun](#comment%3A28):
> I've also fixed the spkg in the meantime, for the record



```
sqrt5:standard dima$ mailx vbraun
Subject: let's not try to build 2 atlaces at the same time 
OK? :)
EOT
```



---

archive/issue_comments_171716.json:
```json
{
    "body": "<a id='comment:30'></a>\nUnrelated to this ticket, but why include LAPACK inside the ATLAS spkg?",
    "created_at": "2012-03-07T09:56:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171716",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:30'></a>
Unrelated to this ticket, but why include LAPACK inside the ATLAS spkg?



---

archive/issue_comments_171717.json:
```json
{
    "body": "<a id='comment:31'></a>\nThe following code (compile with Sage's gfortran, with -lblas library option) crashes not only on OSX 10.7, but also on \nOSX 10.6.\n\nShould we also provide Atlas on 10.6 ?\n\n```\n        PROGRAM TEST\n        COMPLEX*16 A(1), B(1),C\n        COMPLEX*16 ZDOTC\n        EXTERNAL ZDOTC\n        A(1)=1;\n        B(1)=2;\n        C=ZDOTC( 1, A, 1, B, 1 )\n        WRITE (*,*) C\n        END\n```",
    "created_at": "2012-03-07T12:19:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171717",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:31'></a>
The following code (compile with Sage's gfortran, with -lblas library option) crashes not only on OSX 10.7, but also on 
OSX 10.6.

Should we also provide Atlas on 10.6 ?

```
        PROGRAM TEST
        COMPLEX*16 A(1), B(1),C
        COMPLEX*16 ZDOTC
        EXTERNAL ZDOTC
        A(1)=1;
        B(1)=2;
        C=ZDOTC( 1, A, 1, B, 1 )
        WRITE (*,*) C
        END
```



---

archive/issue_comments_171718.json:
```json
{
    "body": "<a id='comment:32'></a>\nwell, no, no luck yet. atlas-3.9.68 fails on sqrt5 with plenty of `ld: unknown option: -melf_x86_64` messages at the end.\n\n```\n...\nmake[2]: *** [LDTRY] Error 1\nld -melf_x86_64 -shared -soname /Users/dima/Sage/sage-5.0.beta7/local/lib/libtatlas.so -o libtatlas.so \\\n           -rpath-link /Users/dima/Sage/sage-5.0.beta7/local/lib \\\n           --whole-archive libptlapack.a libptf77blas.a libptcblas.a libatlas.a --no-whole-archive -lpthread -lm\nld: unknown option: -melf_x86_64\nmake[2]: *** [LDTRY] Error 1\ngcc -fPIC -m64 -shared -o libtatlas.so -Wl,\"rpath-link /Users/dima/Sage/sage-5.0.beta7/local/lib\" \\\n           -Wl,--whole-archive libptlapack.a libptf77blas.a libptcblas.a libatlas.a -Wl,--no-whole-archive -lpthread -lm\nld: file not found: rpath-link /Users/dima/Sage/sage-5.0.beta7/local/lib\ncollect2: ld returned 1 exit status\nmake[2]: *** [GCCTRY] Error 1\nmake[1]: *** [TRYALL] Error 2\nmake: *** [fat_ptshared] Error 2\nTraceback (most recent call last):\n  File \"./spkg-install\", line 431, in <module>\n    assert rc==0, 'Building shared ATLAS library failed.'\nAssertionError: Building shared ATLAS library failed.\n\nreal    683m42.661s\nuser    200m29.372s\nsys     36m57.615s\n************************************************************************\nError installing package atlas-3.9.68\n************************************************************************\n```",
    "created_at": "2012-03-07T15:39:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171718",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:32'></a>
well, no, no luck yet. atlas-3.9.68 fails on sqrt5 with plenty of `ld: unknown option: -melf_x86_64` messages at the end.

```
...
make[2]: *** [LDTRY] Error 1
ld -melf_x86_64 -shared -soname /Users/dima/Sage/sage-5.0.beta7/local/lib/libtatlas.so -o libtatlas.so \
           -rpath-link /Users/dima/Sage/sage-5.0.beta7/local/lib \
           --whole-archive libptlapack.a libptf77blas.a libptcblas.a libatlas.a --no-whole-archive -lpthread -lm
ld: unknown option: -melf_x86_64
make[2]: *** [LDTRY] Error 1
gcc -fPIC -m64 -shared -o libtatlas.so -Wl,"rpath-link /Users/dima/Sage/sage-5.0.beta7/local/lib" \
           -Wl,--whole-archive libptlapack.a libptf77blas.a libptcblas.a libatlas.a -Wl,--no-whole-archive -lpthread -lm
ld: file not found: rpath-link /Users/dima/Sage/sage-5.0.beta7/local/lib
collect2: ld returned 1 exit status
make[2]: *** [GCCTRY] Error 1
make[1]: *** [TRYALL] Error 2
make: *** [fat_ptshared] Error 2
Traceback (most recent call last):
  File "./spkg-install", line 431, in <module>
    assert rc==0, 'Building shared ATLAS library failed.'
AssertionError: Building shared ATLAS library failed.

real    683m42.661s
user    200m29.372s
sys     36m57.615s
************************************************************************
Error installing package atlas-3.9.68
************************************************************************
```



---

archive/issue_comments_171719.json:
```json
{
    "body": "<a id='comment:33'></a>\natlas-3.9 is designed to build lapack as part of its build process. This is why lapack is now included and can be removed as separate spkg (see discussion at #10508).\n\nFortunately, atlas-3.9.68 has actually make targets for OSX dylibs so fixing the remaining issue should be easy. Updated spkg at http://www.stp.dias.ie/~vbraun/Sage/spkg/atlas-3.9.68.spkg, though its still compiling of course...",
    "created_at": "2012-03-08T00:12:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171719",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:33'></a>
atlas-3.9 is designed to build lapack as part of its build process. This is why lapack is now included and can be removed as separate spkg (see discussion at #10508).

Fortunately, atlas-3.9.68 has actually make targets for OSX dylibs so fixing the remaining issue should be easy. Updated spkg at http://www.stp.dias.ie/~vbraun/Sage/spkg/atlas-3.9.68.spkg, though its still compiling of course...



---

archive/issue_comments_171720.json:
```json
{
    "body": "<a id='comment:34'></a>\nI am not thrilled by atlas-3.9.xx. Do we know if they have have finally solved some of the problems they have in dgemm? At least 3.9.68 seems to have all the symbols unlike 3.9.67 which somehow left a pile of lapack symbols behind.",
    "created_at": "2012-03-08T02:34:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171720",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:34'></a>
I am not thrilled by atlas-3.9.xx. Do we know if they have have finally solved some of the problems they have in dgemm? At least 3.9.68 seems to have all the symbols unlike 3.9.67 which somehow left a pile of lapack symbols behind.



---

archive/issue_comments_171721.json:
```json
{
    "body": "<a id='comment:35'></a>\nFor the record, I've tentatively run some tests on Linux haven't found any breakage so far with atlas-3.9.68.",
    "created_at": "2012-03-08T03:32:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171721",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:35'></a>
For the record, I've tentatively run some tests on Linux haven't found any breakage so far with atlas-3.9.68.



---

archive/issue_comments_171722.json:
```json
{
    "body": "<a id='comment:36'></a>\nDidn't test 3.9.68 (last one I checked was 3.9.49). The following tests were historically failing with 3.9.xx:\n\n```\nsage -t -force_lib \"devel/sage/sage/modular/modsym/space.py\"\nsage -t -force_lib \"devel/sage/sage/calculus/interpolators.pyx\"\n```",
    "created_at": "2012-03-08T03:59:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171722",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:36'></a>
Didn't test 3.9.68 (last one I checked was 3.9.49). The following tests were historically failing with 3.9.xx:

```
sage -t -force_lib "devel/sage/sage/modular/modsym/space.py"
sage -t -force_lib "devel/sage/sage/calculus/interpolators.pyx"
```



---

archive/issue_comments_171723.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,4 +2,8 @@\n \n The problem is due to Apple shipping a totally broken BLAS.  Therefore, we need to build ATLAS.\n \n-**spkg** (untested!): [http://boxen.math.washington.edu/home/jdemeyer/spkg/atlas-3.8.4.p2.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/atlas-3.8.4.p2.spkg)\n+To test:\n+* Copy http://www.stp.dias.ie/~vbraun/Sage/spkg/atlas-3.9.68.spkg to SAGE_ROOT/spkg/standard\n+* Apply [attachment:trac_10508_spkg_install.patch] to the root repository.\n+\n+\n``````\n",
    "created_at": "2012-03-08T05:19:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171723",
    "user": "https://github.com/vbraun"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,4 +2,8 @@
 
 The problem is due to Apple shipping a totally broken BLAS.  Therefore, we need to build ATLAS.
 
-**spkg** (untested!): [http://boxen.math.washington.edu/home/jdemeyer/spkg/atlas-3.8.4.p2.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/atlas-3.8.4.p2.spkg)
+To test:
+* Copy http://www.stp.dias.ie/~vbraun/Sage/spkg/atlas-3.9.68.spkg to SAGE_ROOT/spkg/standard
+* Apply [attachment:trac_10508_spkg_install.patch] to the root repository.
+
+
``````




---

archive/issue_comments_171724.json:
```json
{
    "body": "<a id='comment:38'></a>\nReplying to [vbraun](#comment%3A33):\n> atlas-3.9 is designed to build lapack as part of its build process. This is why lapack is now included and can be removed as separate spkg (see discussion at #10508).\n\n\nDoes this imply we have to build ATLAS+LAPACK on *every* system (we used to build LAPACK on every system)?  Not saying this is a bad thing, just asking...\n\nPutting `lapack` in patches is just weird, you should probably distribute it extracted (either inside `src` or in a `lapack` top-level directory in the spkg).",
    "created_at": "2012-03-08T08:16:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171724",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:38'></a>
Replying to [vbraun](#comment%3A33):
> atlas-3.9 is designed to build lapack as part of its build process. This is why lapack is now included and can be removed as separate spkg (see discussion at #10508).


Does this imply we have to build ATLAS+LAPACK on *every* system (we used to build LAPACK on every system)?  Not saying this is a bad thing, just asking...

Putting `lapack` in patches is just weird, you should probably distribute it extracted (either inside `src` or in a `lapack` top-level directory in the spkg).



---

archive/issue_comments_171725.json:
```json
{
    "body": "<a id='comment:39'></a>\nIf you patch `spkg/install`, please keep in mind #10492 (which has positive_review).",
    "created_at": "2012-03-08T08:23:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171725",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:39'></a>
If you patch `spkg/install`, please keep in mind #10492 (which has positive_review).



---

archive/issue_comments_171726.json:
```json
{
    "body": "<a id='comment:40'></a>\nReplying to [jdemeyer](#comment%3A38):\n> Replying to [vbraun](#comment%3A33):\n> > atlas-3.9 is designed to build lapack as part of its build process. This is why lapack is now included and can be removed as separate spkg (see discussion at #10508).\n\n> \n> Does this imply we have to build ATLAS+LAPACK on *every* system (we used to build LAPACK on every system)?  Not saying this is a bad thing, just asking...\n\n\n\nhmm, all? \nAre we dropping OSX PPC support? IMHO Atlas doesn't run on OSX PPC. Also, I don't think we build Atlas on ARM.\n(And Linux ARM support sort of works, it's matter of just a little bit more work)\n\n> \n> Putting `lapack` in patches is just weird, you should probably distribute it extracted (either inside `src` or in a `lapack` top-level directory in the spkg).\n",
    "created_at": "2012-03-08T08:35:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171726",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:40'></a>
Replying to [jdemeyer](#comment%3A38):
> Replying to [vbraun](#comment%3A33):
> > atlas-3.9 is designed to build lapack as part of its build process. This is why lapack is now included and can be removed as separate spkg (see discussion at #10508).

> 
> Does this imply we have to build ATLAS+LAPACK on *every* system (we used to build LAPACK on every system)?  Not saying this is a bad thing, just asking...



hmm, all? 
Are we dropping OSX PPC support? IMHO Atlas doesn't run on OSX PPC. Also, I don't think we build Atlas on ARM.
(And Linux ARM support sort of works, it's matter of just a little bit more work)

> 
> Putting `lapack` in patches is just weird, you should probably distribute it extracted (either inside `src` or in a `lapack` top-level directory in the spkg).




---

archive/issue_comments_171727.json:
```json
{
    "body": "<a id='comment:41'></a>\nThe new ATLAS spkg builds for me on several OS X Lion machines. The self-tests are disabled on Darwin (I realized after installing it), so they didn't run; I'm trying again after modifying `spkg-check`. In an existing Sage build (one in which lapack and blas were already installed), after building ATLAS, the cvxopt spkg still fails self-tests. Do we need to modify that spkg to tell it where to find the ATLAS libraries? Or could there be a problem with the old lapack or blas?",
    "created_at": "2012-03-08T14:58:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171727",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:41'></a>
The new ATLAS spkg builds for me on several OS X Lion machines. The self-tests are disabled on Darwin (I realized after installing it), so they didn't run; I'm trying again after modifying `spkg-check`. In an existing Sage build (one in which lapack and blas were already installed), after building ATLAS, the cvxopt spkg still fails self-tests. Do we need to modify that spkg to tell it where to find the ATLAS libraries? Or could there be a problem with the old lapack or blas?



---

archive/issue_comments_171728.json:
```json
{
    "body": "<a id='comment:42'></a>\nAs far as installing this on OS X: I think we can test the existing ATLAS and/or BLAS libraries with Python, and Python is a prerequisite for this spkg. So why not test to see if the system libraries seem to be functioning; if so, don't install this. Then we shouldn't install this on pre-Lion machines, and if Apple ever fixes their system libraries, we won't install it then either.",
    "created_at": "2012-03-08T15:55:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171728",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:42'></a>
As far as installing this on OS X: I think we can test the existing ATLAS and/or BLAS libraries with Python, and Python is a prerequisite for this spkg. So why not test to see if the system libraries seem to be functioning; if so, don't install this. Then we shouldn't install this on pre-Lion machines, and if Apple ever fixes their system libraries, we won't install it then either.



---

archive/issue_comments_171729.json:
```json
{
    "body": "<a id='comment:43'></a>\nI think we have some more work to do until we can ship the new atlas on any system, you are a bit premature in discussing how to support old systems.\n\nThe only way to be sure that you don't have statically linked to another blas is to build Sage from source with the new atlas spkg. This doesn't add much overhead over building atlas.\n\nAlso, the atlas shared libraries are now named `lib{t,s}atlas.{so,dylib}` for threaded/singlethreaded and unix/osx respectively. We need to change `modules_list.py` and `sage/misc/cython.py` to actually use the new libraries. How about one of you with an actual OSX machine makes these config changes.\n\nAlso, on Linux I'm getting\n\n```\n/home/vbraun/opt/sage-atlas/sage-5.0.beta7/local/lib/python2.7/site-packages/numpy/linalg/lapack_lite.so: undefined symbol: dpotrf_\n```\nwhen installing scipy. I'll try to track this down.",
    "created_at": "2012-03-08T18:05:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171729",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:43'></a>
I think we have some more work to do until we can ship the new atlas on any system, you are a bit premature in discussing how to support old systems.

The only way to be sure that you don't have statically linked to another blas is to build Sage from source with the new atlas spkg. This doesn't add much overhead over building atlas.

Also, the atlas shared libraries are now named `lib{t,s}atlas.{so,dylib}` for threaded/singlethreaded and unix/osx respectively. We need to change `modules_list.py` and `sage/misc/cython.py` to actually use the new libraries. How about one of you with an actual OSX machine makes these config changes.

Also, on Linux I'm getting

```
/home/vbraun/opt/sage-atlas/sage-5.0.beta7/local/lib/python2.7/site-packages/numpy/linalg/lapack_lite.so: undefined symbol: dpotrf_
```
when installing scipy. I'll try to track this down.



---

archive/issue_comments_171730.json:
```json
{
    "body": "<a id='comment:44'></a>\nReplying to [vbraun](#comment%3A43):\n> I think we have some more work to do until we can ship the new atlas on any system, you are a bit premature in discussing how to support old systems.\n> \n> The only way to be sure that you don't have statically linked to another blas is to build Sage from source with the new atlas spkg. This doesn't add much overhead over building atlas.\n> \n> Also, the atlas shared libraries are now named `lib{t,s}atlas.{so,dylib}` for threaded/singlethreaded and unix/osx respectively. We need to change `modules_list.py` and `sage/misc/cython.py` to actually use the new libraries. How about one of you with an actual OSX machine makes these config changes.\n> \n> Also, on Linux I'm getting\n> \n> ```\n> /home/vbraun/opt/sage-atlas/sage-5.0.beta7/local/lib/python2.7/site-packages/numpy/linalg/lapack_lite.so: undefined symbol: dpotrf_\n> ```\n> when installing scipy. I'll try to track this down.\n\n\nWhich lapack version are you using in the package. We had quite a few problem of that kind in Gentoo and Sebastien Fabbro (the package maintainer of atlas) did go from\nlapack-3.4.0_p20120215 back to lapack-3.4.0 to solve the problem.",
    "created_at": "2012-03-08T21:01:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171730",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:44'></a>
Replying to [vbraun](#comment%3A43):
> I think we have some more work to do until we can ship the new atlas on any system, you are a bit premature in discussing how to support old systems.
> 
> The only way to be sure that you don't have statically linked to another blas is to build Sage from source with the new atlas spkg. This doesn't add much overhead over building atlas.
> 
> Also, the atlas shared libraries are now named `lib{t,s}atlas.{so,dylib}` for threaded/singlethreaded and unix/osx respectively. We need to change `modules_list.py` and `sage/misc/cython.py` to actually use the new libraries. How about one of you with an actual OSX machine makes these config changes.
> 
> Also, on Linux I'm getting
> 
> ```
> /home/vbraun/opt/sage-atlas/sage-5.0.beta7/local/lib/python2.7/site-packages/numpy/linalg/lapack_lite.so: undefined symbol: dpotrf_
> ```
> when installing scipy. I'll try to track this down.


Which lapack version are you using in the package. We had quite a few problem of that kind in Gentoo and Sebastien Fabbro (the package maintainer of atlas) did go from
lapack-3.4.0_p20120215 back to lapack-3.4.0 to solve the problem.



---

archive/issue_comments_171731.json:
```json
{
    "body": "<a id='comment:45'></a>\nI'm using lapack-3.4.0 in atlas-3.9.68 (did you mean lapack-3.3.0?)",
    "created_at": "2012-03-08T21:27:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171731",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:45'></a>
I'm using lapack-3.4.0 in atlas-3.9.68 (did you mean lapack-3.3.0?)



---

archive/issue_comments_171732.json:
```json
{
    "body": "<a id='comment:46'></a>\nReplying to [vbraun](#comment%3A45):\n> I'm using lapack-3.4.0 in atlas-3.9.68 (did you mean lapack-3.3.0?)\n\nNo I meant 3.4.0, the reports that we had were for a different symbols but there could have been several missing for all I know. dpotrf_ is definitely present in my system install of atlas-lapack which is atlas 3.9.68 + lapack-3.4.0. But it may be worth a try with 3.3.1. I am looking at the spkg (I am on irc right now).",
    "created_at": "2012-03-08T21:42:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171732",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:46'></a>
Replying to [vbraun](#comment%3A45):
> I'm using lapack-3.4.0 in atlas-3.9.68 (did you mean lapack-3.3.0?)

No I meant 3.4.0, the reports that we had were for a different symbols but there could have been several missing for all I know. dpotrf_ is definitely present in my system install of atlas-lapack which is atlas 3.9.68 + lapack-3.4.0. But it may be worth a try with 3.3.1. I am looking at the spkg (I am on irc right now).



---

archive/issue_comments_171733.json:
```json
{
    "body": "<a id='comment:47'></a>\nNow on OS X Lion, with Sage built from scratch (using the root repo patch from this ticket), this spkg passes its self-tests, but cvxopt doesn't:\n\n```\nRunning the test suite for cvxopt-1.1.3.p1...\nTesting in /Users/palmieri/Desktop/Sage_stuff/sage_builds/new-atlas/sage-5.0.beta7-gcc/spkg/build/cvxopt-1.1.3.p1/src/examples/doc/chap10\nTesting l1svc.py ...\nTraceback (most recent call last):\n  File \"l1svc.py\", line 12, in <module>\n    op(sum(abs(x)) + sum(u), [A*x >= 1-u, u >= 0]).solve()\n  File \"/Users/palmieri/Desktop/Sage_stuff/sage_builds/new-atlas/sage-5.0.beta7-gcc/local/lib/python2.7/site-packages/cvxopt/modeling.py\", line 2575, in solve\n    sol = solvers.lp(c[:], G, h, A, b, solver=solver)\n  File \"/Users/palmieri/Desktop/Sage_stuff/sage_builds/new-atlas/sage-5.0.beta7-gcc/local/lib/python2.7/site-packages/cvxopt/coneprog.py\", line 2794, in lp\n    from cvxopt import base, blas, misc\n  File \"/Users/palmieri/Desktop/Sage_stuff/sage_builds/new-atlas/sage-5.0.beta7-gcc/local/lib/python2.7/site-packages/cvxopt/misc.py\", line 20, in <module>\n    from cvxopt import base, blas, lapack, cholmod, misc_solvers\nImportError: dlopen(/Users/palmieri/Desktop/Sage_stuff/sage_builds/new-atlas/sage-5.0.beta7-gcc/local/lib/python2.7/site-packages/cvxopt/lapack.so, 2): Symbol not found: _ATL_cGetNB\n  Referenced from: /Users/palmieri/Desktop/Sage_stuff/sage_builds/new-atlas/sage-5.0.beta7-gcc/local/lib/python2.7/site-packages/cvxopt/lapack.so\n  Expected in: flat namespace\n in /Users/palmieri/Desktop/Sage_stuff/sage_builds/new-atlas/sage-5.0.beta7-gcc/local/lib/python2.7/site-packages/cvxopt/lapack.so\nError: test /Users/palmieri/Desktop/Sage_stuff/sage_builds/new-atlas/sage-5.0.beta7-gcc/spkg/build/cvxopt-1.1.3.p1/src/examples/doc/chap10/l1svc.py failed\n```",
    "created_at": "2012-03-09T00:38:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171733",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:47'></a>
Now on OS X Lion, with Sage built from scratch (using the root repo patch from this ticket), this spkg passes its self-tests, but cvxopt doesn't:

```
Running the test suite for cvxopt-1.1.3.p1...
Testing in /Users/palmieri/Desktop/Sage_stuff/sage_builds/new-atlas/sage-5.0.beta7-gcc/spkg/build/cvxopt-1.1.3.p1/src/examples/doc/chap10
Testing l1svc.py ...
Traceback (most recent call last):
  File "l1svc.py", line 12, in <module>
    op(sum(abs(x)) + sum(u), [A*x >= 1-u, u >= 0]).solve()
  File "/Users/palmieri/Desktop/Sage_stuff/sage_builds/new-atlas/sage-5.0.beta7-gcc/local/lib/python2.7/site-packages/cvxopt/modeling.py", line 2575, in solve
    sol = solvers.lp(c[:], G, h, A, b, solver=solver)
  File "/Users/palmieri/Desktop/Sage_stuff/sage_builds/new-atlas/sage-5.0.beta7-gcc/local/lib/python2.7/site-packages/cvxopt/coneprog.py", line 2794, in lp
    from cvxopt import base, blas, misc
  File "/Users/palmieri/Desktop/Sage_stuff/sage_builds/new-atlas/sage-5.0.beta7-gcc/local/lib/python2.7/site-packages/cvxopt/misc.py", line 20, in <module>
    from cvxopt import base, blas, lapack, cholmod, misc_solvers
ImportError: dlopen(/Users/palmieri/Desktop/Sage_stuff/sage_builds/new-atlas/sage-5.0.beta7-gcc/local/lib/python2.7/site-packages/cvxopt/lapack.so, 2): Symbol not found: _ATL_cGetNB
  Referenced from: /Users/palmieri/Desktop/Sage_stuff/sage_builds/new-atlas/sage-5.0.beta7-gcc/local/lib/python2.7/site-packages/cvxopt/lapack.so
  Expected in: flat namespace
 in /Users/palmieri/Desktop/Sage_stuff/sage_builds/new-atlas/sage-5.0.beta7-gcc/local/lib/python2.7/site-packages/cvxopt/lapack.so
Error: test /Users/palmieri/Desktop/Sage_stuff/sage_builds/new-atlas/sage-5.0.beta7-gcc/spkg/build/cvxopt-1.1.3.p1/src/examples/doc/chap10/l1svc.py failed
```



---

archive/issue_comments_171734.json:
```json
{
    "body": "<a id='comment:48'></a>\nWe talked on irc with Volker it is not impossible that you didn't link against the right library because there is a slightly difference in naming scheme in 3.9.68. What does\n\n```\notool -L /Users/palmieri/Desktop/Sage_stuff/sage_builds/new-atlas/sage-5.0.beta7-gcc/local/lib/python2.7/site-packages/cvxopt/lapack.so\n```\nsays?",
    "created_at": "2012-03-09T00:44:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171734",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:48'></a>
We talked on irc with Volker it is not impossible that you didn't link against the right library because there is a slightly difference in naming scheme in 3.9.68. What does

```
otool -L /Users/palmieri/Desktop/Sage_stuff/sage_builds/new-atlas/sage-5.0.beta7-gcc/local/lib/python2.7/site-packages/cvxopt/lapack.so
```
says?



---

archive/issue_comments_171735.json:
```json
{
    "body": "<a id='comment:49'></a>\nIn fact, there is no urgent need to build Atlas on OSX 10.7, as I just learned. \nit turns out to be a CVXOPT bug. Please see this  [message](https://groups.google.com/d/msg/sage-devel/f1XvpcK0KxE/oSFsKrA7MfkJ) and this [discussion](https://discussions.apple.com/message/17795537))",
    "created_at": "2012-03-09T00:57:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171735",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:49'></a>
In fact, there is no urgent need to build Atlas on OSX 10.7, as I just learned. 
it turns out to be a CVXOPT bug. Please see this  [message](https://groups.google.com/d/msg/sage-devel/f1XvpcK0KxE/oSFsKrA7MfkJ) and this [discussion](https://discussions.apple.com/message/17795537))



---

archive/issue_comments_171736.json:
```json
{
    "body": "**Changing status** from needs_work to needs_info.",
    "created_at": "2012-03-09T00:57:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171736",
    "user": "https://github.com/dimpase"
}
```

**Changing status** from needs_work to needs_info.



---

archive/issue_comments_171737.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,6 +1,9 @@\n On OS X Lion, if you set `SAGE_CHECK=yes` and build cvxopt, some tests fail and then it hangs before completing the tests.  See [http://sage.math.washington.edu/home/palmieri/misc/cvxopt-1.1.3.log](http://sage.math.washington.edu/home/palmieri/misc/cvxopt-1.1.3.log) for the install log.\n \n-The problem is due to Apple shipping a totally broken BLAS.  Therefore, we need to build ATLAS.\n+CVXOPT devs claimed that  Apple shipped a totally broken BLAS.  \n+(But it turns out that they cannot provide valid examples showing this; they do not adhere to a de facto BLAS standard).\n+\n+Thus we don't really need to build ATLAS on OSX 10.7, at least not until a real proof of bugs is found.\n \n To test:\n * Copy http://www.stp.dias.ie/~vbraun/Sage/spkg/atlas-3.9.68.spkg to SAGE_ROOT/spkg/standard\n``````\n",
    "created_at": "2012-03-09T01:00:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171737",
    "user": "https://github.com/dimpase"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,6 +1,9 @@
 On OS X Lion, if you set `SAGE_CHECK=yes` and build cvxopt, some tests fail and then it hangs before completing the tests.  See [http://sage.math.washington.edu/home/palmieri/misc/cvxopt-1.1.3.log](http://sage.math.washington.edu/home/palmieri/misc/cvxopt-1.1.3.log) for the install log.
 
-The problem is due to Apple shipping a totally broken BLAS.  Therefore, we need to build ATLAS.
+CVXOPT devs claimed that  Apple shipped a totally broken BLAS.  
+(But it turns out that they cannot provide valid examples showing this; they do not adhere to a de facto BLAS standard).
+
+Thus we don't really need to build ATLAS on OSX 10.7, at least not until a real proof of bugs is found.
 
 To test:
 * Copy http://www.stp.dias.ie/~vbraun/Sage/spkg/atlas-3.9.68.spkg to SAGE_ROOT/spkg/standard
``````




---

archive/issue_comments_171738.json:
```json
{
    "body": "<a id='comment:51'></a>\nReplying to [dimpase](#comment%3A49):\n> In fact, there is no urgent need to build Atlas on OSX 10.7, as I just learned. \n> it turns out to be a CVXOPT bug. Please see this  [message](https://groups.google.com/d/msg/sage-devel/f1XvpcK0KxE/oSFsKrA7MfkJ) and this [discussion](https://discussions.apple.com/message/17795537))\n> \n\n\nwhat is true is that in OSX 10.7 there is a change in behavour of Apple's BLAS on a technically illegal input. What used to work as (wrongly!) expected does not work  any more.",
    "created_at": "2012-03-09T01:27:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171738",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:51'></a>
Replying to [dimpase](#comment%3A49):
> In fact, there is no urgent need to build Atlas on OSX 10.7, as I just learned. 
> it turns out to be a CVXOPT bug. Please see this  [message](https://groups.google.com/d/msg/sage-devel/f1XvpcK0KxE/oSFsKrA7MfkJ) and this [discussion](https://discussions.apple.com/message/17795537))
> 


what is true is that in OSX 10.7 there is a change in behavour of Apple's BLAS on a technically illegal input. What used to work as (wrongly!) expected does not work  any more.



---

archive/issue_comments_171739.json:
```json
{
    "body": "**Changing upstream** from \"Reported upstream. Little or no feedback.\" to \"Reported upstream. Developers acknowledge bug.\".",
    "created_at": "2012-03-09T03:14:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171739",
    "user": "https://github.com/dimpase"
}
```

**Changing upstream** from "Reported upstream. Little or no feedback." to "Reported upstream. Developers acknowledge bug.".



---

archive/issue_comments_171740.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,7 +1,6 @@\n On OS X Lion, if you set `SAGE_CHECK=yes` and build cvxopt, some tests fail and then it hangs before completing the tests.  See [http://sage.math.washington.edu/home/palmieri/misc/cvxopt-1.1.3.log](http://sage.math.washington.edu/home/palmieri/misc/cvxopt-1.1.3.log) for the install log.\n \n-CVXOPT devs claimed that  Apple shipped a totally broken BLAS.  \n-(But it turns out that they cannot provide valid examples showing this; they do not adhere to a de facto BLAS standard).\n+CVXOPT devs claimed that Apple shipped a broken BLAS. But it turned out that they cannot provide valid examples showing this; they did not adhere to a de facto BLAS standard, and they agreed to fix the corresponding CVXOPT bug quickly.\n \n Thus we don't really need to build ATLAS on OSX 10.7, at least not until a real proof of bugs is found.\n \n``````\n",
    "created_at": "2012-03-09T03:14:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171740",
    "user": "https://github.com/dimpase"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,7 +1,6 @@
 On OS X Lion, if you set `SAGE_CHECK=yes` and build cvxopt, some tests fail and then it hangs before completing the tests.  See [http://sage.math.washington.edu/home/palmieri/misc/cvxopt-1.1.3.log](http://sage.math.washington.edu/home/palmieri/misc/cvxopt-1.1.3.log) for the install log.
 
-CVXOPT devs claimed that  Apple shipped a totally broken BLAS.  
-(But it turns out that they cannot provide valid examples showing this; they do not adhere to a de facto BLAS standard).
+CVXOPT devs claimed that Apple shipped a broken BLAS. But it turned out that they cannot provide valid examples showing this; they did not adhere to a de facto BLAS standard, and they agreed to fix the corresponding CVXOPT bug quickly.
 
 Thus we don't really need to build ATLAS on OSX 10.7, at least not until a real proof of bugs is found.
 
``````




---

archive/issue_events_037557.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "rename": {
        "from": "Build ATLAS on OS X Lion",
        "to": "Fix illegal BLAS call in cvxopt"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12011#event-37557"
}
```



---

archive/issue_comments_171741.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,8 +4,3 @@\n \n Thus we don't really need to build ATLAS on OSX 10.7, at least not until a real proof of bugs is found.\n \n-To test:\n-* Copy http://www.stp.dias.ie/~vbraun/Sage/spkg/atlas-3.9.68.spkg to SAGE_ROOT/spkg/standard\n-* Apply [attachment:trac_10508_spkg_install.patch] to the root repository.\n-\n-\n``````\n",
    "created_at": "2012-03-10T10:06:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171741",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,8 +4,3 @@
 
 Thus we don't really need to build ATLAS on OSX 10.7, at least not until a real proof of bugs is found.
 
-To test:
-* Copy http://www.stp.dias.ie/~vbraun/Sage/spkg/atlas-3.9.68.spkg to SAGE_ROOT/spkg/standard
-* Apply [attachment:trac_10508_spkg_install.patch] to the root repository.
-
-
``````




---

archive/issue_comments_171742.json:
```json
{
    "body": "**Dependencies:** #12519",
    "created_at": "2012-03-10T10:06:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171742",
    "user": "https://github.com/jdemeyer"
}
```

**Dependencies:** #12519



---

archive/issue_comments_171743.json:
```json
{
    "body": "<a id='comment:55'></a>\nAny news from upstream CVXOPT?",
    "created_at": "2012-03-28T08:19:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171743",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:55'></a>
Any news from upstream CVXOPT?



---

archive/issue_comments_171744.json:
```json
{
    "body": "**Changing upstream** from \"Reported upstream. Developers acknowledge bug.\" to \"Fixed upstream, in a later stable release.\".",
    "created_at": "2012-03-31T06:52:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171744",
    "user": "https://github.com/dimpase"
}
```

**Changing upstream** from "Reported upstream. Developers acknowledge bug." to "Fixed upstream, in a later stable release.".



---

archive/issue_comments_171745.json:
```json
{
    "body": "<a id='comment:56'></a>\nReplying to [jdemeyer](#comment%3A55):\n> Any news from upstream CVXOPT?\n\nThey have released 1.1.5 [fixing](http://abel.ee.ucla.edu/cvxopt/documentation/index.html) this issue.\nAny takers to update the cvxopt spkg ? I,  right now, have too many other things to do.",
    "created_at": "2012-03-31T06:52:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171745",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:56'></a>
Replying to [jdemeyer](#comment%3A55):
> Any news from upstream CVXOPT?

They have released 1.1.5 [fixing](http://abel.ee.ucla.edu/cvxopt/documentation/index.html) this issue.
Any takers to update the cvxopt spkg ? I,  right now, have too many other things to do.



---

archive/issue_comments_171746.json:
```json
{
    "body": "<a id='comment:57'></a>\nReplying to [dimpase](#comment%3A56):\n> They have released 1.1.5 [fixing](http://abel.ee.ucla.edu/cvxopt/documentation/index.html) this issue.\n> Any takers to update the cvxopt spkg ? I,  right now, have too many other things to do.\n\n\nI'm working on it. More details in a few minutes.",
    "created_at": "2012-03-31T18:41:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171746",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:57'></a>
Replying to [dimpase](#comment%3A56):
> They have released 1.1.5 [fixing](http://abel.ee.ucla.edu/cvxopt/documentation/index.html) this issue.
> Any takers to update the cvxopt spkg ? I,  right now, have too many other things to do.


I'm working on it. More details in a few minutes.



---

archive/issue_comments_171747.json:
```json
{
    "body": "**Changing status** from needs_info to needs_review.",
    "created_at": "2012-03-31T18:55:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171747",
    "user": "https://github.com/jhpalmieri"
}
```

**Changing status** from needs_info to needs_review.



---

archive/issue_comments_171748.json:
```json
{
    "body": "<a id='comment:58'></a>\nI'm posting a new spkg, but not a perfect one. The flaw is that it is version 1.1.4 rather than 1.1.5. I looked at 1.1.4 and 1.1.5, and (using `diff -r ...`) I found two changes in the code: the file `src/C/dense.c` was modified, and I imported that change into the 1.1.4 spkg. With this change, it builds and self-tests pass on OS X Lion, and also on sage.math and OpenSolaris. So that's the version I'm posting here.\n\nThe other change was to `setup.py`, and I don't understand enough of the changes in our patch to modify it. That is, `setup.py` in version 1.1.4 was almost identical to the version in 1.1.3, so it was easy to rebase our patch, but I couldn't figure out how to rebase to 1.1.5. C'est la vie.",
    "created_at": "2012-03-31T18:55:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171748",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:58'></a>
I'm posting a new spkg, but not a perfect one. The flaw is that it is version 1.1.4 rather than 1.1.5. I looked at 1.1.4 and 1.1.5, and (using `diff -r ...`) I found two changes in the code: the file `src/C/dense.c` was modified, and I imported that change into the 1.1.4 spkg. With this change, it builds and self-tests pass on OS X Lion, and also on sage.math and OpenSolaris. So that's the version I'm posting here.

The other change was to `setup.py`, and I don't understand enough of the changes in our patch to modify it. That is, `setup.py` in version 1.1.4 was almost identical to the version in 1.1.3, so it was easy to rebase our patch, but I couldn't figure out how to rebase to 1.1.5. C'est la vie.



---

archive/issue_comments_171749.json:
```json
{
    "body": "**Changing author** from \"Jeroen Demeyer\" to \"Jeroen Demeyer, John Palmieri\".",
    "created_at": "2012-03-31T18:55:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171749",
    "user": "https://github.com/jhpalmieri"
}
```

**Changing author** from "Jeroen Demeyer" to "Jeroen Demeyer, John Palmieri".



---

archive/issue_comments_171750.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,3 +4,7 @@\n \n Thus we don't really need to build ATLAS on OSX 10.7, at least not until a real proof of bugs is found.\n \n+---\n+\n+New spkg: [http://boxen.math.washington.edu/home/palmieri/SPKG/cvxopt-1.1.4.p0.spkg](http://boxen.math.washington.edu/home/palmieri/SPKG/cvxopt-1.1.4.p0.spkg)\n+\n``````\n",
    "created_at": "2012-03-31T18:55:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171750",
    "user": "https://github.com/jhpalmieri"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,3 +4,7 @@
 
 Thus we don't really need to build ATLAS on OSX 10.7, at least not until a real proof of bugs is found.
 
+---
+
+New spkg: [http://boxen.math.washington.edu/home/palmieri/SPKG/cvxopt-1.1.4.p0.spkg](http://boxen.math.washington.edu/home/palmieri/SPKG/cvxopt-1.1.4.p0.spkg)
+
``````




---

archive/issue_comments_171751.json:
```json
{
    "body": "patch for cvxopt spkg; for review only",
    "created_at": "2012-03-31T18:56:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171751",
    "user": "https://github.com/jhpalmieri"
}
```

patch for cvxopt spkg; for review only



---

archive/issue_comments_171752.json:
```json
{
    "body": "<a id='comment:59'></a>\nAttachment [trac_12011-cvxopt.patch](tarball://root/attachments/some-uuid/ticket12011/trac_12011-cvxopt.patch) by @jdemeyer created at 2012-04-03 13:01:23\n\nUnfortunately, I don't have access anymore to a OS X 10.7 machine.",
    "created_at": "2012-04-03T13:01:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171752",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:59'></a>
Attachment [trac_12011-cvxopt.patch](tarball://root/attachments/some-uuid/ticket12011/trac_12011-cvxopt.patch) by @jdemeyer created at 2012-04-03 13:01:23

Unfortunately, I don't have access anymore to a OS X 10.7 machine.



---

archive/issue_comments_171753.json:
```json
{
    "body": "<a id='comment:60'></a>\nThis spkg is included in [http://boxen.math.washington.edu/home/jdemeyer/release/sage-5.0.beta12-gcc/](http://boxen.math.washington.edu/home/jdemeyer/release/sage-5.0.beta12-gcc/) for testing.",
    "created_at": "2012-04-03T13:12:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171753",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:60'></a>
This spkg is included in [http://boxen.math.washington.edu/home/jdemeyer/release/sage-5.0.beta12-gcc/](http://boxen.math.washington.edu/home/jdemeyer/release/sage-5.0.beta12-gcc/) for testing.



---

archive/issue_comments_171754.json:
```json
{
    "body": "Diff for the cvxopt spkg (p0->p1). For review only",
    "created_at": "2012-04-03T13:53:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171754",
    "user": "https://github.com/jdemeyer"
}
```

Diff for the cvxopt spkg (p0->p1). For review only



---

archive/issue_comments_171755.json:
```json
{
    "body": "**Reviewer:** Jeroen Demeyer",
    "created_at": "2012-04-03T14:00:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171755",
    "user": "https://github.com/jdemeyer"
}
```

**Reviewer:** Jeroen Demeyer



---

archive/issue_comments_171756.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,9 +2,9 @@\n \n CVXOPT devs claimed that Apple shipped a broken BLAS. But it turned out that they cannot provide valid examples showing this; they did not adhere to a de facto BLAS standard, and they agreed to fix the corresponding CVXOPT bug quickly.\n \n-Thus we don't really need to build ATLAS on OSX 10.7, at least not until a real proof of bugs is found.\n+This spkg also fixes an issue building with GCC on Solaris 10.  There already was a fix for this in the spkg, but it was only enabled for GCC versions < 4.5 (without any mention of why).  Enable this fix for all GCC versions.\n \n ---\n \n-New spkg: [http://boxen.math.washington.edu/home/palmieri/SPKG/cvxopt-1.1.4.p0.spkg](http://boxen.math.washington.edu/home/palmieri/SPKG/cvxopt-1.1.4.p0.spkg)\n+New spkg: [http://boxen.math.washington.edu/home/jdemeyer/spkg/cvxopt-1.1.4.p1.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/cvxopt-1.1.4.p1.spkg)\n \n``````\n",
    "created_at": "2012-04-03T14:00:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171756",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,9 +2,9 @@
 
 CVXOPT devs claimed that Apple shipped a broken BLAS. But it turned out that they cannot provide valid examples showing this; they did not adhere to a de facto BLAS standard, and they agreed to fix the corresponding CVXOPT bug quickly.
 
-Thus we don't really need to build ATLAS on OSX 10.7, at least not until a real proof of bugs is found.
+This spkg also fixes an issue building with GCC on Solaris 10.  There already was a fix for this in the spkg, but it was only enabled for GCC versions < 4.5 (without any mention of why).  Enable this fix for all GCC versions.
 
 ---
 
-New spkg: [http://boxen.math.washington.edu/home/palmieri/SPKG/cvxopt-1.1.4.p0.spkg](http://boxen.math.washington.edu/home/palmieri/SPKG/cvxopt-1.1.4.p0.spkg)
+New spkg: [http://boxen.math.washington.edu/home/jdemeyer/spkg/cvxopt-1.1.4.p1.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/cvxopt-1.1.4.p1.spkg)
 
``````




---

archive/issue_events_037558.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "rename": {
        "from": "Fix illegal BLAS call in cvxopt",
        "to": "cvxopt: fix illegal BLAS call and fix Solaris build"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12011#event-37558"
}
```



---

archive/issue_comments_171757.json:
```json
{
    "body": "**Changing keywords** from \"Lion Darwin cvxopt atlas blas\" to \"Lion Darwin cvxopt atlas blas Solaris\".",
    "created_at": "2012-04-03T14:00:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171757",
    "user": "https://github.com/jdemeyer"
}
```

**Changing keywords** from "Lion Darwin cvxopt atlas blas" to "Lion Darwin cvxopt atlas blas Solaris".



---

archive/issue_comments_171758.json:
```json
{
    "body": "<a id='comment:61'></a>\nAttachment [cvxopt-1.1.4.p1.diff](tarball://root/attachments/some-uuid/ticket12011/cvxopt-1.1.4.p1.diff) by @jdemeyer created at 2012-04-03 14:00:26\n\nReviewer spkg: [http://boxen.math.washington.edu/home/jdemeyer/spkg/cvxopt-1.1.4.p1.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/cvxopt-1.1.4.p1.spkg)\n\nChanges: [attachment:cvxopt-1.1.4.p1.diff]\n\nJohn, if you confirm that my spkg builds with SAGE_CHECK=yes on OS X Lion and you agree with my changes, you may set this to positive review.",
    "created_at": "2012-04-03T14:00:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171758",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:61'></a>
Attachment [cvxopt-1.1.4.p1.diff](tarball://root/attachments/some-uuid/ticket12011/cvxopt-1.1.4.p1.diff) by @jdemeyer created at 2012-04-03 14:00:26

Reviewer spkg: [http://boxen.math.washington.edu/home/jdemeyer/spkg/cvxopt-1.1.4.p1.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/cvxopt-1.1.4.p1.spkg)

Changes: [attachment:cvxopt-1.1.4.p1.diff]

John, if you confirm that my spkg builds with SAGE_CHECK=yes on OS X Lion and you agree with my changes, you may set this to positive review.



---

archive/issue_comments_171759.json:
```json
{
    "body": "**Changing reviewer** from \"Jeroen Demeyer\" to \"Jeroen Demeyer, John Palmieri\".",
    "created_at": "2012-04-03T18:44:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171759",
    "user": "https://github.com/jhpalmieri"
}
```

**Changing reviewer** from "Jeroen Demeyer" to "Jeroen Demeyer, John Palmieri".



---

archive/issue_comments_171760.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2012-04-03T18:44:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171760",
    "user": "https://github.com/jhpalmieri"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_171761.json:
```json
{
    "body": "<a id='comment:62'></a>\nChanges look good and this passes tests on OS X Lion (and OpenSolaris, which I tried just for fun).",
    "created_at": "2012-04-03T18:44:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171761",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:62'></a>
Changes look good and this passes tests on OS X Lion (and OpenSolaris, which I tried just for fun).



---

archive/issue_comments_171762.json:
```json
{
    "body": "**Merged:** sage-5.0.beta13",
    "created_at": "2012-04-04T19:27:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171762",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.0.beta13



---

archive/issue_events_037559.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-04-04T19:27:35Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12011#event-37559"
}
```



---

archive/issue_comments_171763.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2012-04-04T19:27:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12011#issuecomment-171763",
    "user": "https://github.com/jdemeyer"
}
```

**Resolution:** fixed
