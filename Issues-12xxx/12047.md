# Issue 12047: numerical_integral(f, a, a) should always be zero

archive/issues_011875.json:
```json
{
    "body": "Currently, in sage-4.7.2:\n\n```\nsage: integral_numerical(log(x), 0, 0)\n(nan, nan)\n```\n\nMathematically, the integral should certainly be zero: there is a\nprimitive function which is continuous and defined at 0.  Symbolically, we can compute the integral correctly:\n\n```\nsage: integral(log(x), (x,0,0))\n0\n```\n\nSo I would like to add a special-case check for `integral_numerical()`: if the interval of integration is a point, then always return 0.\n\nI realize that this means that also the integral of 1/x from 0 to 0\nwould be 0, even though 1/x has no continuous primitive at 0.  But\naccording to the Lebesgue theory of integration, I think this is not\neven a problem.\n\nAlso: remove various unused things from the file `sage/gsl/integration.pyx` and clean up the documentation.\n\nAssignee: @burcin\n\nCC:  karsten.naert@gmail.com @zimmermann6 @orlitzky\n\nResolution: fixed\n\nAuthor: Jeroen Demeyer\n\nReviewer: Michael Orlitzky\n\nMerged: sage-4.8.alpha3\n\nIssue created by migration from https://trac.sagemath.org/ticket/12047\n\n",
    "closed_at": "2011-11-26T09:35:38Z",
    "created_at": "2011-11-17T12:11:42Z",
    "labels": [
        "component: calculus",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.8",
    "title": "numerical_integral(f, a, a) should always be zero",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12047",
    "user": "https://github.com/jdemeyer"
}
```
Currently, in sage-4.7.2:

```
sage: integral_numerical(log(x), 0, 0)
(nan, nan)
```

Mathematically, the integral should certainly be zero: there is a
primitive function which is continuous and defined at 0.  Symbolically, we can compute the integral correctly:

```
sage: integral(log(x), (x,0,0))
0
```

So I would like to add a special-case check for `integral_numerical()`: if the interval of integration is a point, then always return 0.

I realize that this means that also the integral of 1/x from 0 to 0
would be 0, even though 1/x has no continuous primitive at 0.  But
according to the Lebesgue theory of integration, I think this is not
even a problem.

Also: remove various unused things from the file `sage/gsl/integration.pyx` and clean up the documentation.

Assignee: @burcin

CC:  karsten.naert@gmail.com @zimmermann6 @orlitzky

Resolution: fixed

Author: Jeroen Demeyer

Reviewer: Michael Orlitzky

Merged: sage-4.8.alpha3

Issue created by migration from https://trac.sagemath.org/ticket/12047





---

archive/issue_comments_172485.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,23 @@\n+Currently, in sage-4.7.2:\n \n+```\n+sage: integral_numerical(log(x), 0, 0)\n+(nan, nan)\n+```\n+\n+Mathematically, the integral should certainly be zero: there is a\n+primitive function which is continuous and defined at 0.  Symbolically, we can compute the integral correctly:\n+\n+```\n+sage: integral(log(x), (x,0,0))\n+0\n+```\n+\n+So I would like to add a special-case check for `integral_numerical()`: if the interval of integration is a point, then always return 0.\n+\n+I realize that this means that also the integral of 1/x from 0 to 0\n+would be 0, even though 1/x has no continuous primitive at 0.  But\n+according to the Lebesgue theory of integration, I think this is not\n+even a problem.\n+\n+Also: remove various unused things from the file `sage/gsl/integration.pyx`.\n``````\n",
    "created_at": "2011-11-17T12:49:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12047",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12047#issuecomment-172485",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,23 @@
+Currently, in sage-4.7.2:
 
+```
+sage: integral_numerical(log(x), 0, 0)
+(nan, nan)
+```
+
+Mathematically, the integral should certainly be zero: there is a
+primitive function which is continuous and defined at 0.  Symbolically, we can compute the integral correctly:
+
+```
+sage: integral(log(x), (x,0,0))
+0
+```
+
+So I would like to add a special-case check for `integral_numerical()`: if the interval of integration is a point, then always return 0.
+
+I realize that this means that also the integral of 1/x from 0 to 0
+would be 0, even though 1/x has no continuous primitive at 0.  But
+according to the Lebesgue theory of integration, I think this is not
+even a problem.
+
+Also: remove various unused things from the file `sage/gsl/integration.pyx`.
``````




---

archive/issue_comments_172486.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -20,4 +20,4 @@\n according to the Lebesgue theory of integration, I think this is not\n even a problem.\n \n-Also: remove various unused things from the file `sage/gsl/integration.pyx`.\n+Also: remove various unused things from the file `sage/gsl/integration.pyx` and clean up the documentation.\n``````\n",
    "created_at": "2011-11-17T12:52:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12047",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12047#issuecomment-172486",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -20,4 +20,4 @@
 according to the Lebesgue theory of integration, I think this is not
 even a problem.
 
-Also: remove various unused things from the file `sage/gsl/integration.pyx`.
+Also: remove various unused things from the file `sage/gsl/integration.pyx` and clean up the documentation.
``````




---

archive/issue_comments_172487.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-11-17T13:33:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12047",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12047#issuecomment-172487",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_172488.json:
```json
{
    "body": "Changing author from \"\" to \"Jeroen Demeyer\"",
    "created_at": "2011-11-17T13:33:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12047",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12047#issuecomment-172488",
    "user": "https://github.com/jdemeyer"
}
```

Changing author from "" to "Jeroen Demeyer"



---

archive/issue_comments_172489.json:
```json
{
    "body": "<a id='comment:4'></a>\nWas that Fourier stuff ever going to be used?  Or is it elsewhere?   I didn't really look at it. \n\nConsidering that\n\n```\nsage: integral(1/x,x,0,0)\n0\n```\nalready, I guess we should do this.  Are there *any* symbolic integrals on a point that Maxima doesn't give 0 for?\n\nI'll review this more formally - especially the doc stuff, which seems good at a quick glance - if I get a chance, otherwise someone else feel free to do so!",
    "created_at": "2011-11-17T13:54:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12047",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12047#issuecomment-172489",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:4'></a>
Was that Fourier stuff ever going to be used?  Or is it elsewhere?   I didn't really look at it. 

Considering that

```
sage: integral(1/x,x,0,0)
0
```
already, I guess we should do this.  Are there *any* symbolic integrals on a point that Maxima doesn't give 0 for?

I'll review this more formally - especially the doc stuff, which seems good at a quick glance - if I get a chance, otherwise someone else feel free to do so!



---

archive/issue_comments_172490.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [kcrisman](#comment%3A4):\n> Was that Fourier stuff ever going to be used?  Or is it elsewhere?\n\nProbably \"no\" to both questions.  That commented-out code has been there since 2007, the day that file was created.  It does not look very developed, so I think it's okay to remove it.",
    "created_at": "2011-11-17T14:04:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12047",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12047#issuecomment-172490",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:5'></a>
Replying to [kcrisman](#comment%3A4):
> Was that Fourier stuff ever going to be used?  Or is it elsewhere?

Probably "no" to both questions.  That commented-out code has been there since 2007, the day that file was created.  It does not look very developed, so I think it's okay to remove it.



---

archive/issue_comments_172491.json:
```json
{
    "body": "A one-off script I used to throw random functions at the numerical integration",
    "created_at": "2011-11-23T19:37:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12047",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12047#issuecomment-172491",
    "user": "https://github.com/orlitzky"
}
```

A one-off script I used to throw random functions at the numerical integration



---

archive/issue_comments_172492.json:
```json
{
    "body": "<a id='comment:8'></a>\nAttachment [numerical_integration_tests.py](tarball://root/attachments/some-uuid/ticket12047/numerical_integration_tests.py) by @orlitzky created at 2011-11-23 19:38:31\n\nYou should add the ticket number to the new doctests, and maybe add yourself as author/copyright. Other than that, it looks good.",
    "created_at": "2011-11-23T19:38:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12047",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12047#issuecomment-172492",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:8'></a>
Attachment [numerical_integration_tests.py](tarball://root/attachments/some-uuid/ticket12047/numerical_integration_tests.py) by @orlitzky created at 2011-11-23 19:38:31

You should add the ticket number to the new doctests, and maybe add yourself as author/copyright. Other than that, it looks good.



---

archive/issue_comments_172493.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-11-23T19:38:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12047",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12047#issuecomment-172493",
    "user": "https://github.com/orlitzky"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_172494.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [mjo](#comment%3A8):\n> You should add the ticket number to the new doctests, and maybe add yourself as author/copyright.\n\nDone that.",
    "created_at": "2011-11-23T20:55:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12047",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12047#issuecomment-172494",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'></a>
Replying to [mjo](#comment%3A8):
> You should add the ticket number to the new doctests, and maybe add yourself as author/copyright.

Done that.



---

archive/issue_comments_172495.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-11-23T20:58:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12047",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12047#issuecomment-172495",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_172496.json:
```json
{
    "body": "<a id='comment:10'></a>\nAttachment [12047.patch](tarball://root/attachments/some-uuid/ticket12047/12047.patch) by @jdemeyer created at 2011-11-23 20:58:42",
    "created_at": "2011-11-23T20:58:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12047",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12047#issuecomment-172496",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'></a>
Attachment [12047.patch](tarball://root/attachments/some-uuid/ticket12047/12047.patch) by @jdemeyer created at 2011-11-23 20:58:42



---

archive/issue_comments_172497.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-11-23T21:10:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12047",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12047#issuecomment-172497",
    "user": "https://github.com/orlitzky"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_172498.json:
```json
{
    "body": "<a id='comment:11'></a>\nPositive review from me, then, although this is my first review so you may want a second opinion.",
    "created_at": "2011-11-23T21:10:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12047",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12047#issuecomment-172498",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:11'></a>
Positive review from me, then, although this is my first review so you may want a second opinion.



---

archive/issue_comments_172499.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Michael Orlitzky\"",
    "created_at": "2011-11-23T21:14:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12047",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12047#issuecomment-172499",
    "user": "https://github.com/kcrisman"
}
```

Changing reviewer from "" to "Michael Orlitzky"



---

archive/issue_comments_172500.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [mjo](#comment%3A11):\n> Positive review from me, then, although this is my first review so you may want a second opinion.\n\nFirst time for everything, right?  I guess this patch is pretty safe, it makes only a small functional change to Sage.  If all doctests pass and the documentation builds and looks okay (which is the case), then this patch should be merged.\n\nThanks for the review!",
    "created_at": "2011-11-23T21:16:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12047",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12047#issuecomment-172500",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'></a>
Replying to [mjo](#comment%3A11):
> Positive review from me, then, although this is my first review so you may want a second opinion.

First time for everything, right?  I guess this patch is pretty safe, it makes only a small functional change to Sage.  If all doctests pass and the documentation builds and looks okay (which is the case), then this patch should be merged.

Thanks for the review!



---

archive/issue_comments_172501.json:
```json
{
    "body": "<a id='comment:14'></a>\n`@`mjo:\n\nGiven the author and his current role, I'm sure this isn't an issue, but one thing to make sure to do with things that change the reference manual is to do \n\n```\nsage -docbuild reference html\n```\nor the like, just to check that links look right and there isn't a misplaced colon or something.  \n\nLooking forward to seeing many more reviews - and other contributions? - from you!  Thanks for helping.",
    "created_at": "2011-11-24T02:33:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12047",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12047#issuecomment-172501",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:14'></a>
`@`mjo:

Given the author and his current role, I'm sure this isn't an issue, but one thing to make sure to do with things that change the reference manual is to do 

```
sage -docbuild reference html
```
or the like, just to check that links look right and there isn't a misplaced colon or something.  

Looking forward to seeing many more reviews - and other contributions? - from you!  Thanks for helping.



---

archive/issue_comments_172502.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-4.8.alpha3\"",
    "created_at": "2011-11-26T09:35:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12047",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12047#issuecomment-172502",
    "user": "https://github.com/jdemeyer"
}
```

Changing merged from "" to "sage-4.8.alpha3"



---

archive/issue_comments_172503.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-11-26T09:35:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12047",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12047#issuecomment-172503",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_037669.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-11-26T09:35:38Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12047",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12047#event-37669"
}
```
