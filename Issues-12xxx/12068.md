# Issue 12068: Numerator for symbolic expression shouldn't use maxima

archive/issues_011896.json:
```json
{
    "assignees": [
        "https://github.com/hivert"
    ],
    "body": "<div id=\"comment:0\"></div>\n\nThe code for numerator is currently\n\n```python\ndef numerator(self):\n        \"\"\"\n        Returns the numerator of this symbolic expression.  If the\n[...]\n        \"\"\"\n        return self.parent()(self._maxima_().num())\n```\nUsing Pynac should be much faster.\n\nThe patch wraps numer, denom, numer_denom and normal from GiNaC and fixes a\nbunch of wrong sphinx markup in `expression.pyx`.\n\n**Apply** [attachment: trac_12068-numer_denom_normal-ginac-fh.patch](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_normal-ginac-fh.patch.gz) and [attachment: trac_12068-reviewer.patch](https://github.com/sagemath/sage/files/ticket12068/trac_12068-reviewer.patch.gz).\n\n\nComponent: **symbolics**\n\nKeywords: **numerator, denominator**\n\nAuthor: **Florent Hivert, Burcin Erocal**\n\nReviewer: **Burcin Erocal, Florent Hivert, Karl-Dieter Crisman**\n\nMerged: **sage-5.0.beta2**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/12068_\n\n",
    "closed_at": "2012-02-02T12:53:25Z",
    "created_at": "2011-11-21T22:50:11Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Numerator for symbolic expression shouldn't use maxima",
    "type": "issue",
    "updated_at": "2012-02-02T12:53:25Z",
    "url": "https://github.com/sagemath/sage/issues/12068",
    "user": "https://github.com/hivert"
}
```
<div id="comment:0"></div>

The code for numerator is currently

```python
def numerator(self):
        """
        Returns the numerator of this symbolic expression.  If the
[...]
        """
        return self.parent()(self._maxima_().num())
```
Using Pynac should be much faster.

The patch wraps numer, denom, numer_denom and normal from GiNaC and fixes a
bunch of wrong sphinx markup in `expression.pyx`.

**Apply** [attachment: trac_12068-numer_denom_normal-ginac-fh.patch](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_normal-ginac-fh.patch.gz) and [attachment: trac_12068-reviewer.patch](https://github.com/sagemath/sage/files/ticket12068/trac_12068-reviewer.patch.gz).


Component: **symbolics**

Keywords: **numerator, denominator**

Author: **Florent Hivert, Burcin Erocal**

Reviewer: **Burcin Erocal, Florent Hivert, Karl-Dieter Crisman**

Merged: **sage-5.0.beta2**

_Issue created by migration from https://trac.sagemath.org/ticket/12068_





---

archive/issue_events_161884.json:
```json
{
    "actor": "https://github.com/hivert",
    "created_at": "2011-11-21T22:50:11Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "milestone_number": null,
    "milestone_title": "sage-5.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12068#event-161884"
}
```



---

archive/issue_events_161885.json:
```json
{
    "actor": "https://github.com/hivert",
    "created_at": "2011-11-21T22:50:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
    "label_color": "0000ff",
    "label_name": "c: symbolics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12068#event-161885"
}
```



---

archive/issue_events_161886.json:
```json
{
    "actor": "https://github.com/hivert",
    "created_at": "2011-11-21T22:50:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12068#event-161886"
}
```



---

archive/issue_events_161887.json:
```json
{
    "actor": "https://github.com/hivert",
    "created_at": "2011-11-21T22:50:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12068#event-161887"
}
```



---

archive/issue_events_161888.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2011-11-21T22:50:11Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "subject": "https://github.com/hivert",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12068#event-161888"
}
```



---

archive/issue_events_161889.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2011-11-22T00:04:03Z",
    "event": "unassigned",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "subject": "https://github.com/hivert",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12068#event-161889"
}
```



---

archive/issue_events_161890.json:
```json
{
    "actor": "https://github.com/hivert",
    "created_at": "2011-11-22T00:04:03Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "subject": "https://github.com/hivert",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12068#event-161890"
}
```



---

archive/issue_comments_128495.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nGinac's behavior is not the same has Maxima: given `1 + 1/(x + 1)`\n\n- Maxima returns `1 + 1/(x + 1)` as numerator and `1` as denominator;\n\n- Ginac returns `x + 2` as numerator and `x + 1` as denominator.\n\nI think both are useful. My patch keeps the current behavior. Is this what we want ?\n\nFlorent",
    "created_at": "2011-11-22T00:04:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-128495",
    "user": "https://github.com/hivert"
}
```

<div id="comment:1" align="right">comment:1</div>

Ginac's behavior is not the same has Maxima: given `1 + 1/(x + 1)`

- Maxima returns `1 + 1/(x + 1)` as numerator and `1` as denominator;

- Ginac returns `x + 2` as numerator and `x + 1` as denominator.

I think both are useful. My patch keeps the current behavior. Is this what we want ?

Florent



---

archive/issue_comments_128496.json:
```json
{
    "body": "Author: **Florent Hivert**",
    "created_at": "2011-11-22T00:04:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-128496",
    "user": "https://github.com/hivert"
}
```

Author: **Florent Hivert**



---

archive/issue_events_161891.json:
```json
{
    "actor": "https://github.com/hivert",
    "created_at": "2011-11-22T00:05:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12068#event-161891"
}
```



---

archive/issue_comments_128497.json:
```json
{
    "body": "Reviewer: **Burcin Erocal**",
    "created_at": "2011-11-22T21:57:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-128497",
    "user": "https://github.com/burcin"
}
```

Reviewer: **Burcin Erocal**



---

archive/issue_events_161892.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2011-11-22T21:57:11Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "title_is": "Numerator for symbolic expression shouldn't use maxima",
    "title_was": "Numerator for symbolic expression should'nt use maxima",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12068#event-161892"
}
```



---

archive/issue_comments_128498.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nLooks good to me. It would be better to use `elif` in line 6480 and 6481. Otherwise, positive review once the tests pass.\n\nThank you for working on this.",
    "created_at": "2011-11-22T21:57:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-128498",
    "user": "https://github.com/burcin"
}
```

<div id="comment:3" align="right">comment:3</div>

Looks good to me. It would be better to use `elif` in line 6480 and 6481. Otherwise, positive review once the tests pass.

Thank you for working on this.



---

archive/issue_comments_128499.json:
```json
{
    "body": "Attachment: **[trac_12068-numer_denom_ginac-fh.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_ginac-fh.patch.gz)**",
    "created_at": "2011-11-22T22:03:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-128499",
    "user": "https://github.com/hivert"
}
```

Attachment: **[trac_12068-numer_denom_ginac-fh.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_ginac-fh.patch.gz)**



---

archive/issue_comments_128500.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nReplying to [@burcin](#comment%3A3):\n> Looks good to me. It would be better to use `elif` in line 6480 and 6481. Otherwise, positive review once the tests pass.\n\nDone !",
    "created_at": "2011-11-22T22:05:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-128500",
    "user": "https://github.com/hivert"
}
```

<div id="comment:4" align="right">comment:4</div>

Replying to [@burcin](#comment%3A3):
> Looks good to me. It would be better to use `elif` in line 6480 and 6481. Otherwise, positive review once the tests pass.

Done !



---

archive/issue_comments_128501.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI got a all test passed on my laptop except a timeout in `sage/schemes/elliptic_curves/ell_rational_field.py` however relaunching a non parallel test on this single file gives:\n\n```\nsage -t  \"sage/schemes/elliptic_curves/ell_rational_field.py\"\n         [89.8 s]\n \n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 89.8 seconds\n```",
    "created_at": "2011-11-22T22:17:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-128501",
    "user": "https://github.com/hivert"
}
```

<div id="comment:5" align="right">comment:5</div>

I got a all test passed on my laptop except a timeout in `sage/schemes/elliptic_curves/ell_rational_field.py` however relaunching a non parallel test on this single file gives:

```
sage -t  "sage/schemes/elliptic_curves/ell_rational_field.py"
         [89.8 s]
 
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 89.8 seconds
```



---

archive/issue_comments_128502.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,3 +10,4 @@\n ```\n Using Pynac should be much faster.\n \n+Apply [attachment: trac_12068-numer_denom_ginac-fh.patch,](https://github.com/sagemath/sage/files/ticket12068/9bb6f96a4d6ba696baa8e103d4ce1c8e.gz) [attachment: trac_12068-denominator.patch](https://github.com/sagemath/sage/files/ticket12068/trac_12068-denominator.patch.gz)\n``````\n",
    "created_at": "2011-11-23T14:34:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-128502",
    "user": "https://github.com/burcin"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,3 +10,4 @@
 ```
 Using Pynac should be much faster.
 
+Apply [attachment: trac_12068-numer_denom_ginac-fh.patch,](https://github.com/sagemath/sage/files/ticket12068/9bb6f96a4d6ba696baa8e103d4ce1c8e.gz) [attachment: trac_12068-denominator.patch](https://github.com/sagemath/sage/files/ticket12068/trac_12068-denominator.patch.gz)
``````




---

archive/issue_comments_128503.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nAttachment: **[trac_12068-denominator.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-denominator.patch.gz)**\n\nDeclaring `py_pow` as an `int` caused problems with [attachment: trac_12068-numer_denom_ginac-fh.patch](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_ginac-fh.patch.gz)`py_object_from_numeric()` returns a `PyObject`. Assigning the return value to an `int` worked because Cython was creating a temporary `PyObject` and trying to convert that to an `int`. This failed if the exponent was not an integer.\n\n[attachment: trac_12068-denominator.patch](https://github.com/sagemath/sage/files/ticket12068/trac_12068-denominator.patch.gz) fixes this problem and handles expressions which contain only a `power`.\n\nFlorent can you review my patch?\n\nApply [attachment: trac_12068-numer_denom_ginac-fh.patch,](https://github.com/sagemath/sage/files/ticket12068/9bb6f96a4d6ba696baa8e103d4ce1c8e.gz) [attachment: trac_12068-denominator.patch](https://github.com/sagemath/sage/files/ticket12068/trac_12068-denominator.patch.gz)",
    "created_at": "2011-11-23T14:34:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-128503",
    "user": "https://github.com/burcin"
}
```

<div id="comment:6" align="right">comment:6</div>

Attachment: **[trac_12068-denominator.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-denominator.patch.gz)**

Declaring `py_pow` as an `int` caused problems with [attachment: trac_12068-numer_denom_ginac-fh.patch](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_ginac-fh.patch.gz)`py_object_from_numeric()` returns a `PyObject`. Assigning the return value to an `int` worked because Cython was creating a temporary `PyObject` and trying to convert that to an `int`. This failed if the exponent was not an integer.

[attachment: trac_12068-denominator.patch](https://github.com/sagemath/sage/files/ticket12068/trac_12068-denominator.patch.gz) fixes this problem and handles expressions which contain only a `power`.

Florent can you review my patch?

Apply [attachment: trac_12068-numer_denom_ginac-fh.patch,](https://github.com/sagemath/sage/files/ticket12068/9bb6f96a4d6ba696baa8e103d4ce1c8e.gz) [attachment: trac_12068-denominator.patch](https://github.com/sagemath/sage/files/ticket12068/trac_12068-denominator.patch.gz)



---

archive/issue_comments_128504.json:
```json
{
    "body": "Changed author from **Florent Hivert** to **Florent Hivert, Burcin Erocal**",
    "created_at": "2011-11-23T14:34:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-128504",
    "user": "https://github.com/burcin"
}
```

Changed author from **Florent Hivert** to **Florent Hivert, Burcin Erocal**



---

archive/issue_comments_128505.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@burcin](#comment%3A6):\n> Florent can you review my patch?\n\nThanks for fixing my mistake. Unfortunately, because I choose to duplicate the code to speedup `numerator_denominator`, I also duplicate the mistake. You corrected only one. I'll upload a patch fixing everything.",
    "created_at": "2011-11-24T10:20:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-128505",
    "user": "https://github.com/hivert"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@burcin](#comment%3A6):
> Florent can you review my patch?

Thanks for fixing my mistake. Unfortunately, because I choose to duplicate the code to speedup `numerator_denominator`, I also duplicate the mistake. You corrected only one. I'll upload a patch fixing everything.



---

archive/issue_comments_128506.json:
```json
{
    "body": "Attachment: **[trac_12068-numer_denom_fix-fh.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_fix-fh.patch.gz)**",
    "created_at": "2011-11-24T10:34:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-128506",
    "user": "https://github.com/hivert"
}
```

Attachment: **[trac_12068-numer_denom_fix-fh.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_fix-fh.patch.gz)**



---

archive/issue_comments_128507.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,4 +10,4 @@\n ```\n Using Pynac should be much faster.\n \n-Apply [attachment: trac_12068-numer_denom_ginac-fh.patch,](https://github.com/sagemath/sage/files/ticket12068/9bb6f96a4d6ba696baa8e103d4ce1c8e.gz) [attachment: trac_12068-denominator.patch](https://github.com/sagemath/sage/files/ticket12068/trac_12068-denominator.patch.gz)\n+**Apply** [attachment: trac_12068-numer_denom_ginac-folded-fh.patch](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_ginac-folded-fh.patch.gz)\n``````\n",
    "created_at": "2011-11-24T10:37:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-128507",
    "user": "https://github.com/hivert"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,4 +10,4 @@
 ```
 Using Pynac should be much faster.
 
-Apply [attachment: trac_12068-numer_denom_ginac-fh.patch,](https://github.com/sagemath/sage/files/ticket12068/9bb6f96a4d6ba696baa8e103d4ce1c8e.gz) [attachment: trac_12068-denominator.patch](https://github.com/sagemath/sage/files/ticket12068/trac_12068-denominator.patch.gz)
+**Apply** [attachment: trac_12068-numer_denom_ginac-folded-fh.patch](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_ginac-folded-fh.patch.gz)
``````




---

archive/issue_comments_128508.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nAttachment: **[trac_12068-numer_denom_ginac-folded-fh.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_ginac-folded-fh.patch.gz)**\n\nHi Burcin,\n\nThe uploaded patch should fix everything.  [attachment: trac_12068-numer_denom_fix-fh.patch](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_fix-fh.patch.gz)\ncontains my modifications on top of yours and [attachment: trac_12068-numer_denom_ginac-folded-fh.patch](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_ginac-folded-fh.patch.gz) contains everything folded.\n\nYour turn to review ;-)",
    "created_at": "2011-11-24T10:37:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-128508",
    "user": "https://github.com/hivert"
}
```

<div id="comment:8" align="right">comment:8</div>

Attachment: **[trac_12068-numer_denom_ginac-folded-fh.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_ginac-folded-fh.patch.gz)**

Hi Burcin,

The uploaded patch should fix everything.  [attachment: trac_12068-numer_denom_fix-fh.patch](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_fix-fh.patch.gz)
contains my modifications on top of yours and [attachment: trac_12068-numer_denom_ginac-folded-fh.patch](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_ginac-folded-fh.patch.gz) contains everything folded.

Your turn to review ;-)



---

archive/issue_comments_128509.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nIt all looks good. The declaration `cdef int py_pow` is redundant in `numerator_denominator()`, but I'll switch to positive review anyway.",
    "created_at": "2011-11-24T11:13:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-128509",
    "user": "https://github.com/burcin"
}
```

<div id="comment:9" align="right">comment:9</div>

It all looks good. The declaration `cdef int py_pow` is redundant in `numerator_denominator()`, but I'll switch to positive review anyway.



---

archive/issue_events_161893.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2011-11-24T11:13:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12068#event-161893"
}
```



---

archive/issue_events_161894.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2011-11-24T11:13:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12068#event-161894"
}
```



---

archive/issue_comments_128510.json:
```json
{
    "body": "Changed reviewer from **Burcin Erocal** to **Burcin Erocal, Florent Hivert**",
    "created_at": "2011-11-24T11:13:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-128510",
    "user": "https://github.com/burcin"
}
```

Changed reviewer from **Burcin Erocal** to **Burcin Erocal, Florent Hivert**



---

archive/issue_events_161895.json:
```json
{
    "actor": "https://github.com/hivert",
    "created_at": "2011-11-24T15:46:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12068#event-161895"
}
```



---

archive/issue_events_161896.json:
```json
{
    "actor": "https://github.com/hivert",
    "created_at": "2011-11-24T15:46:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12068#event-161896"
}
```



---

archive/issue_comments_128511.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nBi Burcin,\n\nReplying to [@burcin](#comment%3A9):\n> It all looks good. The declaration `cdef int py_pow` is redundant in `numerator_denominator()`, but I'll switch to positive review anyway.\n\nThe following diff\n\n```diff\ndiff --git a/sage/symbolic/expression.pyx b/sage/symbolic/expression.pyx\n--- a/sage/symbolic/expression.pyx\n+++ b/sage/symbolic/expression.pyx\n@@ -1867,7 +1867,7 @@ cdef class Expression(CommutativeRingEle\n         assured that if True or False is returned (and proof is False) then \n         the answer is correct. \n \n-        INPUT::\n+        INPUT:\n         \n            ntests -- (default 20) the number of iterations to run\n            domain -- (optional) the domain from which to draw the random values\n```\nbroke the doc. So I had to fix my patch. Doing so I discovered a few more typos and fixed them once for all. In the process I ended up folding the patch for #12072.  \n\nSo please re review. Sorry for the double review.\n\nFlorent",
    "created_at": "2011-11-24T15:46:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-128511",
    "user": "https://github.com/hivert"
}
```

<div id="comment:10" align="right">comment:10</div>

Bi Burcin,

Replying to [@burcin](#comment%3A9):
> It all looks good. The declaration `cdef int py_pow` is redundant in `numerator_denominator()`, but I'll switch to positive review anyway.

The following diff

```diff
diff --git a/sage/symbolic/expression.pyx b/sage/symbolic/expression.pyx
--- a/sage/symbolic/expression.pyx
+++ b/sage/symbolic/expression.pyx
@@ -1867,7 +1867,7 @@ cdef class Expression(CommutativeRingEle
         assured that if True or False is returned (and proof is False) then 
         the answer is correct. 
 
-        INPUT::
+        INPUT:
         
            ntests -- (default 20) the number of iterations to run
            domain -- (optional) the domain from which to draw the random values
```
broke the doc. So I had to fix my patch. Doing so I discovered a few more typos and fixed them once for all. In the process I ended up folding the patch for #12072.  

So please re review. Sorry for the double review.

Florent



---

archive/issue_comments_128512.json:
```json
{
    "body": "Attachment: **[trac_12068-numer_denom_normal-ginac-fh.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_normal-ginac-fh.patch.gz)**",
    "created_at": "2011-11-24T15:52:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-128512",
    "user": "https://github.com/hivert"
}
```

Attachment: **[trac_12068-numer_denom_normal-ginac-fh.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_normal-ginac-fh.patch.gz)**



---

archive/issue_events_161897.json:
```json
{
    "actor": "https://github.com/hivert",
    "created_at": "2011-11-24T15:54:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12068#event-161897"
}
```



---

archive/issue_events_161898.json:
```json
{
    "actor": "https://github.com/hivert",
    "created_at": "2011-11-24T15:54:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12068#event-161898"
}
```



---

archive/issue_comments_128513.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nPlease re-review. Compared to my previous patch, I\n\n- wrapped normal;\n- removed the unused `py_pow` declaration;\n- fixed a bunch of doc typos.\n\nAgain sorry for the extra work,\n\nFlorent",
    "created_at": "2011-11-24T15:54:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-128513",
    "user": "https://github.com/hivert"
}
```

<div id="comment:11" align="right">comment:11</div>

Please re-review. Compared to my previous patch, I

- wrapped normal;
- removed the unused `py_pow` declaration;
- fixed a bunch of doc typos.

Again sorry for the extra work,

Florent



---

archive/issue_comments_128514.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,4 +10,8 @@\n ```\n Using Pynac should be much faster.\n \n-**Apply** [attachment: trac_12068-numer_denom_ginac-folded-fh.patch](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_ginac-folded-fh.patch.gz)\n+The patch wraps numer, denom, numer_denom and normal from GiNaC and fixes a\n+bunch of wrong sphinx markup in `expression.pyx`.\n+\n+**Apply** [attachment: trac_12068-numer_denom_normal-ginac-fh.patch](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_normal-ginac-fh.patch.gz)\n+\n``````\n",
    "created_at": "2011-11-24T15:54:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-128514",
    "user": "https://github.com/hivert"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,4 +10,8 @@
 ```
 Using Pynac should be much faster.
 
-**Apply** [attachment: trac_12068-numer_denom_ginac-folded-fh.patch](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_ginac-folded-fh.patch.gz)
+The patch wraps numer, denom, numer_denom and normal from GiNaC and fixes a
+bunch of wrong sphinx markup in `expression.pyx`.
+
+**Apply** [attachment: trac_12068-numer_denom_normal-ginac-fh.patch](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_normal-ginac-fh.patch.gz)
+
``````




---

archive/issue_comments_128515.json:
```json
{
    "body": "Changed reviewer from **Burcin Erocal, Florent Hivert** to **Burcin Erocal, Florent Hivert, Karl-Dieter Crisman**",
    "created_at": "2012-01-27T04:27:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-128515",
    "user": "https://github.com/kcrisman"
}
```

Changed reviewer from **Burcin Erocal, Florent Hivert** to **Burcin Erocal, Florent Hivert, Karl-Dieter Crisman**



---

archive/issue_comments_128516.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nThe changes to the previous patch seem fine, docs are good, tests pass.  In fact, it's a very nice patch.  \n\nThe only problem I spied is in the last hunk:\n\n```\n         - ``self`` -- the symbolic expression converting from \n         - ``target`` -- (default None) the symbolic expression\n```\nis too far indented.  If you're going to fix all of this stuff, you might as well make these at the same indentation level as INPUT, such as in the second-to-last hunk.\n\nIn fact, I'm attaching a reviewer patch to fix this.\n\nI wonder if there is a more 'obvious' name for `normalize` that could be an alias... anyway, not for this ticket.  Assuming that Burcin has no objections, positive review other than this.",
    "created_at": "2012-01-27T04:27:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-128516",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:12" align="right">comment:12</div>

The changes to the previous patch seem fine, docs are good, tests pass.  In fact, it's a very nice patch.  

The only problem I spied is in the last hunk:

```
         - ``self`` -- the symbolic expression converting from 
         - ``target`` -- (default None) the symbolic expression
```
is too far indented.  If you're going to fix all of this stuff, you might as well make these at the same indentation level as INPUT, such as in the second-to-last hunk.

In fact, I'm attaching a reviewer patch to fix this.

I wonder if there is a more 'obvious' name for `normalize` that could be an alias... anyway, not for this ticket.  Assuming that Burcin has no objections, positive review other than this.



---

archive/issue_events_161899.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-01-27T04:27:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12068#event-161899"
}
```



---

archive/issue_events_161900.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-01-27T04:27:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12068#event-161900"
}
```



---

archive/issue_comments_128517.json:
```json
{
    "body": "Attachment: **[trac_12068-reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-reviewer.patch.gz)**\n\nreviewer patch",
    "created_at": "2012-01-27T04:27:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-128517",
    "user": "https://github.com/kcrisman"
}
```

Attachment: **[trac_12068-reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-reviewer.patch.gz)**

reviewer patch



---

archive/issue_comments_128518.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -13,5 +13,5 @@\n The patch wraps numer, denom, numer_denom and normal from GiNaC and fixes a\n bunch of wrong sphinx markup in `expression.pyx`.\n \n-**Apply** [attachment: trac_12068-numer_denom_normal-ginac-fh.patch](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_normal-ginac-fh.patch.gz)\n+**Apply** [attachment: trac_12068-numer_denom_normal-ginac-fh.patch](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_normal-ginac-fh.patch.gz) and [attachment: trac_12068-reviewer.patch](https://github.com/sagemath/sage/files/ticket12068/trac_12068-reviewer.patch.gz).\n \n``````\n",
    "created_at": "2012-01-27T04:28:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-128518",
    "user": "https://github.com/kcrisman"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -13,5 +13,5 @@
 The patch wraps numer, denom, numer_denom and normal from GiNaC and fixes a
 bunch of wrong sphinx markup in `expression.pyx`.
 
-**Apply** [attachment: trac_12068-numer_denom_normal-ginac-fh.patch](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_normal-ginac-fh.patch.gz)
+**Apply** [attachment: trac_12068-numer_denom_normal-ginac-fh.patch](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_normal-ginac-fh.patch.gz) and [attachment: trac_12068-reviewer.patch](https://github.com/sagemath/sage/files/ticket12068/trac_12068-reviewer.patch.gz).
 
``````




---

archive/issue_comments_128519.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\n**Apply** [attachment: trac_12068-numer_denom_normal-ginac-fh.patch](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_normal-ginac-fh.patch.gz) and [attachment: trac_12068-reviewer.patch](https://github.com/sagemath/sage/files/ticket12068/trac_12068-reviewer.patch.gz).",
    "created_at": "2012-01-27T04:28:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-128519",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:13" align="right">comment:13</div>

**Apply** [attachment: trac_12068-numer_denom_normal-ginac-fh.patch](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_normal-ginac-fh.patch.gz) and [attachment: trac_12068-reviewer.patch](https://github.com/sagemath/sage/files/ticket12068/trac_12068-reviewer.patch.gz).



---

archive/issue_comments_128520.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nHi Karl-Dieter,\n\nReplying to [@kcrisman](#comment%3A12):\n> The changes to the previous patch seem fine, docs are good, tests pass.  In fact, it's a very nice patch.  \n\nThanks !\n\n> The only problem I spied is in the last hunk:\n\n\n  ```\n           - ``self`` -- the symbolic expression converting from \n           - ``target`` -- (default None) the symbolic expression\n  ```\n> is too far indented.  If you're going to fix all of this stuff, you might as well make these at the same indentation level as INPUT, such as in the second-to-last hunk.\n\n> In fact, I'm attaching a reviewer patch to fix this.\n\nShould't someone review your trivial reviewer patch before putting positive review ? Anyway, It is an obvious patch and I did review it. So I confirm your positive review.\n\n> I wonder if there is a more 'obvious' name for `normalize` that could be an alias... anyway, not for this ticket.  Assuming that Burcin has no objections, positive review other than this.\n\nIn every CAS I used, I've always been confused by simplify, normal, combine... I guess Sage isn't an exception.",
    "created_at": "2012-01-27T08:01:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-128520",
    "user": "https://github.com/hivert"
}
```

<div id="comment:14" align="right">comment:14</div>

Hi Karl-Dieter,

Replying to [@kcrisman](#comment%3A12):
> The changes to the previous patch seem fine, docs are good, tests pass.  In fact, it's a very nice patch.  

Thanks !

> The only problem I spied is in the last hunk:


  ```
           - ``self`` -- the symbolic expression converting from 
           - ``target`` -- (default None) the symbolic expression
  ```
> is too far indented.  If you're going to fix all of this stuff, you might as well make these at the same indentation level as INPUT, such as in the second-to-last hunk.

> In fact, I'm attaching a reviewer patch to fix this.

Should't someone review your trivial reviewer patch before putting positive review ? Anyway, It is an obvious patch and I did review it. So I confirm your positive review.

> I wonder if there is a more 'obvious' name for `normalize` that could be an alias... anyway, not for this ticket.  Assuming that Burcin has no objections, positive review other than this.

In every CAS I used, I've always been confused by simplify, normal, combine... I guess Sage isn't an exception.



---

archive/issue_comments_128521.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\n> > In fact, I'm attaching a reviewer patch to fix this.\n> \n> \n> Should't someone review your trivial reviewer patch before putting positive review ? Anyway, It is an obvious patch and I did review it. So I confirm your positive review.\n\nNo, reviewers are usually allowed to make VERY trivial changes, esp. to fix doc, without 'formal' other review, otherwise we would take even longer to review things than normal.  Naturally, anyone could decide that \"reviewer patch X needs review\" if they felt it was nontrivial.",
    "created_at": "2012-01-27T15:40:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-128521",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:15" align="right">comment:15</div>

> > In fact, I'm attaching a reviewer patch to fix this.
> 
> 
> Should't someone review your trivial reviewer patch before putting positive review ? Anyway, It is an obvious patch and I did review it. So I confirm your positive review.

No, reviewers are usually allowed to make VERY trivial changes, esp. to fix doc, without 'formal' other review, otherwise we would take even longer to review things than normal.  Naturally, anyone could decide that "reviewer patch X needs review" if they felt it was nontrivial.



---

archive/issue_comments_128522.json:
```json
{
    "body": "Merged: **sage-5.0.beta2**",
    "created_at": "2012-02-02T12:53:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-128522",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.0.beta2**



---

archive/issue_events_161901.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-02T12:53:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12068#event-161901"
}
```



---

archive/issue_events_161902.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-02T12:53:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12068#event-161902"
}
```
