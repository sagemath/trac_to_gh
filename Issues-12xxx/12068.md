# Issue 12068: Numerator for symbolic expression shouldn't use maxima

archive/issues_011896.json:
```json
{
    "assignees": [],
    "body": "The code for numerator is currently\n\n```python\ndef numerator(self):\n        \"\"\"\n        Returns the numerator of this symbolic expression.  If the\n[...]\n        \"\"\"\n        return self.parent()(self._maxima_().num())\n```\nUsing Pynac should be much faster.\n\nThe patch wraps numer, denom, numer_denom and normal from GiNaC and fixes a\nbunch of wrong sphinx markup in `expression.pyx`.\n\n**Apply** [and [attachment: trac_12068-reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-reviewer.patch.gz)(https://github.com/sagemath/sage/files/ticket12068/792cff91b3fef8e3a48855110e94929f.gz).\n\n\nAssignee: **@hivert**\n\nKeywords: **numerator, denominator**\n\nAuthor: **Florent Hivert, Burcin Erocal**\n\nReviewer: **Burcin Erocal, Florent Hivert, Karl-Dieter Crisman**\n\nMerged: **sage-5.0.beta2**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/12068_\n\n",
    "closed_at": "2012-02-02T12:53:25Z",
    "created_at": "2011-11-21T22:50:11Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20symbolics",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Numerator for symbolic expression shouldn't use maxima",
    "type": "issue",
    "updated_at": "2012-02-02T12:53:25Z",
    "url": "https://github.com/sagemath/sage/issues/12068",
    "user": "https://github.com/hivert"
}
```
The code for numerator is currently

```python
def numerator(self):
        """
        Returns the numerator of this symbolic expression.  If the
[...]
        """
        return self.parent()(self._maxima_().num())
```
Using Pynac should be much faster.

The patch wraps numer, denom, numer_denom and normal from GiNaC and fixes a
bunch of wrong sphinx markup in `expression.pyx`.

**Apply** [and [attachment: trac_12068-reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-reviewer.patch.gz)(https://github.com/sagemath/sage/files/ticket12068/792cff91b3fef8e3a48855110e94929f.gz).


Assignee: **@hivert**

Keywords: **numerator, denominator**

Author: **Florent Hivert, Burcin Erocal**

Reviewer: **Burcin Erocal, Florent Hivert, Karl-Dieter Crisman**

Merged: **sage-5.0.beta2**

_Issue created by migration from https://trac.sagemath.org/ticket/12068_





---

archive/issue_events_144371.json:
```json
{
    "actor": "https://github.com/hivert",
    "created_at": "2011-11-21T22:50:11Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "milestone_number": null,
    "milestone_title": "sage-5.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12068#event-144371"
}
```



---

archive/issue_events_144372.json:
```json
{
    "actor": "https://github.com/hivert",
    "created_at": "2011-11-21T22:50:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20symbolics",
    "label_color": "0000ff",
    "label_name": "component: symbolics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12068#event-144372"
}
```



---

archive/issue_events_144373.json:
```json
{
    "actor": "https://github.com/hivert",
    "created_at": "2011-11-21T22:50:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12068#event-144373"
}
```



---

archive/issue_events_144374.json:
```json
{
    "actor": "https://github.com/hivert",
    "created_at": "2011-11-21T22:50:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12068#event-144374"
}
```



---

archive/issue_comments_130754.json:
```json
{
    "body": "Changed assignee from **@burcin** to **@hivert**",
    "created_at": "2011-11-22T00:04:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-130754",
    "user": "https://github.com/hivert"
}
```

Changed assignee from **@burcin** to **@hivert**



---

archive/issue_comments_130755.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nGinac's behavior is not the same has Maxima: given `1 + 1/(x + 1)`\n\n- Maxima returns `1 + 1/(x + 1)` as numerator and `1` as denominator;\n\n- Ginac returns `x + 2` as numerator and `x + 1` as denominator.\n\nI think both are useful. My patch keeps the current behavior. Is this what we want ?\n\nFlorent",
    "created_at": "2011-11-22T00:04:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-130755",
    "user": "https://github.com/hivert"
}
```

<a id='comment:1'>Comment 1:</a>
Ginac's behavior is not the same has Maxima: given `1 + 1/(x + 1)`

- Maxima returns `1 + 1/(x + 1)` as numerator and `1` as denominator;

- Ginac returns `x + 2` as numerator and `x + 1` as denominator.

I think both are useful. My patch keeps the current behavior. Is this what we want ?

Florent



---

archive/issue_comments_130756.json:
```json
{
    "body": "Author: **Florent Hivert**",
    "created_at": "2011-11-22T00:04:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-130756",
    "user": "https://github.com/hivert"
}
```

Author: **Florent Hivert**



---

archive/issue_events_144375.json:
```json
{
    "actor": "https://github.com/hivert",
    "created_at": "2011-11-22T00:05:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12068#event-144375"
}
```



---

archive/issue_comments_130757.json:
```json
{
    "body": "Reviewer: **Burcin Erocal**",
    "created_at": "2011-11-22T21:57:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-130757",
    "user": "https://github.com/burcin"
}
```

Reviewer: **Burcin Erocal**



---

archive/issue_events_144376.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2011-11-22T21:57:11Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "title_is": "Numerator for symbolic expression shouldn't use maxima",
    "title_was": "Numerator for symbolic expression should'nt use maxima",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12068#event-144376"
}
```



---

archive/issue_comments_130758.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nLooks good to me. It would be better to use `elif` in line 6480 and 6481. Otherwise, positive review once the tests pass.\n\nThank you for working on this.",
    "created_at": "2011-11-22T21:57:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-130758",
    "user": "https://github.com/burcin"
}
```

<a id='comment:3'>Comment 3:</a>
Looks good to me. It would be better to use `elif` in line 6480 and 6481. Otherwise, positive review once the tests pass.

Thank you for working on this.



---

archive/issue_comments_130759.json:
```json
{
    "body": "Attachment: **[trac_12068-numer_denom_ginac-fh.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_ginac-fh.patch.gz)**",
    "created_at": "2011-11-22T22:03:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-130759",
    "user": "https://github.com/hivert"
}
```

Attachment: **[trac_12068-numer_denom_ginac-fh.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_ginac-fh.patch.gz)**



---

archive/issue_comments_130760.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nReplying to [@burcin](#comment%3A3):\n> Looks good to me. It would be better to use `elif` in line 6480 and 6481. Otherwise, positive review once the tests pass.\n\nDone !",
    "created_at": "2011-11-22T22:05:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-130760",
    "user": "https://github.com/hivert"
}
```

<a id='comment:4'>Comment 4:</a>
Replying to [@burcin](#comment%3A3):
> Looks good to me. It would be better to use `elif` in line 6480 and 6481. Otherwise, positive review once the tests pass.

Done !



---

archive/issue_comments_130761.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nI got a all test passed on my laptop except a timeout in `sage/schemes/elliptic_curves/ell_rational_field.py` however relaunching a non parallel test on this single file gives:\n\n```\nsage -t  \"sage/schemes/elliptic_curves/ell_rational_field.py\"\n         [89.8 s]\n \n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 89.8 seconds\n```",
    "created_at": "2011-11-22T22:17:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-130761",
    "user": "https://github.com/hivert"
}
```

<a id='comment:5'>Comment 5:</a>
I got a all test passed on my laptop except a timeout in `sage/schemes/elliptic_curves/ell_rational_field.py` however relaunching a non parallel test on this single file gives:

```
sage -t  "sage/schemes/elliptic_curves/ell_rational_field.py"
         [89.8 s]
 
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 89.8 seconds
```



---

archive/issue_comments_130762.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,3 +10,4 @@\n ```\n Using Pynac should be much faster.\n \n+Apply [attachment: trac_12068-numer_denom_ginac-fh.patch,.gz](https://github.com/sagemath/sage/files/ticket12068/9bb6f96a4d6ba696baa8e103d4ce1c8e.gz) [attachment: trac_12068-denominator.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-denominator.patch.gz)\n``````\n",
    "created_at": "2011-11-23T14:34:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-130762",
    "user": "https://github.com/burcin"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,3 +10,4 @@
 ```
 Using Pynac should be much faster.
 
+Apply [attachment: trac_12068-numer_denom_ginac-fh.patch,.gz](https://github.com/sagemath/sage/files/ticket12068/9bb6f96a4d6ba696baa8e103d4ce1c8e.gz) [attachment: trac_12068-denominator.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-denominator.patch.gz)
``````




---

archive/issue_comments_130763.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nAttachment: **[trac_12068-denominator.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-denominator.patch.gz)**\n\nDeclaring `py_pow` as an `int` caused problems with [attachment: trac_12068-numer_denom_ginac-fh.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_ginac-fh.patch.gz)`py_object_from_numeric()` returns a `PyObject`. Assigning the return value to an `int` worked because Cython was creating a temporary `PyObject` and trying to convert that to an `int`. This failed if the exponent was not an integer.\n\n[attachment: trac_12068-denominator.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-denominator.patch.gz) fixes this problem and handles expressions which contain only a `power`.\n\nFlorent can you review my patch?\n\nApply [attachment: trac_12068-numer_denom_ginac-fh.patch,.gz](https://github.com/sagemath/sage/files/ticket12068/9bb6f96a4d6ba696baa8e103d4ce1c8e.gz) [attachment: trac_12068-denominator.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-denominator.patch.gz)",
    "created_at": "2011-11-23T14:34:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-130763",
    "user": "https://github.com/burcin"
}
```

<a id='comment:6'>Comment 6:</a>
Attachment: **[trac_12068-denominator.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-denominator.patch.gz)**

Declaring `py_pow` as an `int` caused problems with [attachment: trac_12068-numer_denom_ginac-fh.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_ginac-fh.patch.gz)`py_object_from_numeric()` returns a `PyObject`. Assigning the return value to an `int` worked because Cython was creating a temporary `PyObject` and trying to convert that to an `int`. This failed if the exponent was not an integer.

[attachment: trac_12068-denominator.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-denominator.patch.gz) fixes this problem and handles expressions which contain only a `power`.

Florent can you review my patch?

Apply [attachment: trac_12068-numer_denom_ginac-fh.patch,.gz](https://github.com/sagemath/sage/files/ticket12068/9bb6f96a4d6ba696baa8e103d4ce1c8e.gz) [attachment: trac_12068-denominator.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-denominator.patch.gz)



---

archive/issue_comments_130764.json:
```json
{
    "body": "Changed author from **Florent Hivert** to **Florent Hivert, Burcin Erocal**",
    "created_at": "2011-11-23T14:34:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-130764",
    "user": "https://github.com/burcin"
}
```

Changed author from **Florent Hivert** to **Florent Hivert, Burcin Erocal**



---

archive/issue_comments_130765.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nReplying to [@burcin](#comment%3A6):\n> Florent can you review my patch?\n\nThanks for fixing my mistake. Unfortunately, because I choose to duplicate the code to speedup `numerator_denominator`, I also duplicate the mistake. You corrected only one. I'll upload a patch fixing everything.",
    "created_at": "2011-11-24T10:20:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-130765",
    "user": "https://github.com/hivert"
}
```

<a id='comment:7'>Comment 7:</a>
Replying to [@burcin](#comment%3A6):
> Florent can you review my patch?

Thanks for fixing my mistake. Unfortunately, because I choose to duplicate the code to speedup `numerator_denominator`, I also duplicate the mistake. You corrected only one. I'll upload a patch fixing everything.



---

archive/issue_comments_130766.json:
```json
{
    "body": "Attachment: **[trac_12068-numer_denom_fix-fh.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_fix-fh.patch.gz)**",
    "created_at": "2011-11-24T10:34:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-130766",
    "user": "https://github.com/hivert"
}
```

Attachment: **[trac_12068-numer_denom_fix-fh.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_fix-fh.patch.gz)**



---

archive/issue_comments_130767.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,4 +10,4 @@\n ```\n Using Pynac should be much faster.\n \n-Apply [attachment: trac_12068-numer_denom_ginac-fh.patch,.gz](https://github.com/sagemath/sage/files/ticket12068/9bb6f96a4d6ba696baa8e103d4ce1c8e.gz) [attachment: trac_12068-denominator.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-denominator.patch.gz)\n+**Apply** [attachment: trac_12068-numer_denom_ginac-folded-fh.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_ginac-folded-fh.patch.gz)\n``````\n",
    "created_at": "2011-11-24T10:37:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-130767",
    "user": "https://github.com/hivert"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,4 +10,4 @@
 ```
 Using Pynac should be much faster.
 
-Apply [attachment: trac_12068-numer_denom_ginac-fh.patch,.gz](https://github.com/sagemath/sage/files/ticket12068/9bb6f96a4d6ba696baa8e103d4ce1c8e.gz) [attachment: trac_12068-denominator.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-denominator.patch.gz)
+**Apply** [attachment: trac_12068-numer_denom_ginac-folded-fh.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_ginac-folded-fh.patch.gz)
``````




---

archive/issue_comments_130768.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nAttachment: **[trac_12068-numer_denom_ginac-folded-fh.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_ginac-folded-fh.patch.gz)**\n\nHi Burcin,\n\nThe uploaded patch should fix everything.  [attachment: trac_12068-numer_denom_fix-fh.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_fix-fh.patch.gz)\ncontains my modifications on top of yours and [attachment: trac_12068-numer_denom_ginac-folded-fh.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_ginac-folded-fh.patch.gz) contains everything folded.\n\nYour turn to review ;-)",
    "created_at": "2011-11-24T10:37:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-130768",
    "user": "https://github.com/hivert"
}
```

<a id='comment:8'>Comment 8:</a>
Attachment: **[trac_12068-numer_denom_ginac-folded-fh.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_ginac-folded-fh.patch.gz)**

Hi Burcin,

The uploaded patch should fix everything.  [attachment: trac_12068-numer_denom_fix-fh.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_fix-fh.patch.gz)
contains my modifications on top of yours and [attachment: trac_12068-numer_denom_ginac-folded-fh.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_ginac-folded-fh.patch.gz) contains everything folded.

Your turn to review ;-)



---

archive/issue_comments_130769.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nIt all looks good. The declaration `cdef int py_pow` is redundant in `numerator_denominator()`, but I'll switch to positive review anyway.",
    "created_at": "2011-11-24T11:13:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-130769",
    "user": "https://github.com/burcin"
}
```

<a id='comment:9'>Comment 9:</a>
It all looks good. The declaration `cdef int py_pow` is redundant in `numerator_denominator()`, but I'll switch to positive review anyway.



---

archive/issue_events_144377.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2011-11-24T11:13:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12068#event-144377"
}
```



---

archive/issue_events_144378.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2011-11-24T11:13:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12068#event-144378"
}
```



---

archive/issue_comments_130770.json:
```json
{
    "body": "Changed reviewer from **Burcin Erocal** to **Burcin Erocal, Florent Hivert**",
    "created_at": "2011-11-24T11:13:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-130770",
    "user": "https://github.com/burcin"
}
```

Changed reviewer from **Burcin Erocal** to **Burcin Erocal, Florent Hivert**



---

archive/issue_events_144379.json:
```json
{
    "actor": "https://github.com/hivert",
    "created_at": "2011-11-24T15:46:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12068#event-144379"
}
```



---

archive/issue_events_144380.json:
```json
{
    "actor": "https://github.com/hivert",
    "created_at": "2011-11-24T15:46:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12068#event-144380"
}
```



---

archive/issue_comments_130771.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nBi Burcin,\n\nReplying to [@burcin](#comment%3A9):\n> It all looks good. The declaration `cdef int py_pow` is redundant in `numerator_denominator()`, but I'll switch to positive review anyway.\n\nThe following diff\n\n```diff\ndiff --git a/sage/symbolic/expression.pyx b/sage/symbolic/expression.pyx\n--- a/sage/symbolic/expression.pyx\n+++ b/sage/symbolic/expression.pyx\n@@ -1867,7 +1867,7 @@ cdef class Expression(CommutativeRingEle\n         assured that if True or False is returned (and proof is False) then \n         the answer is correct. \n \n-        INPUT::\n+        INPUT:\n         \n            ntests -- (default 20) the number of iterations to run\n            domain -- (optional) the domain from which to draw the random values\n```\nbroke the doc. So I had to fix my patch. Doing so I discovered a few more typos and fixed them once for all. In the process I ended up folding the patch for #12072.  \n\nSo please re review. Sorry for the double review.\n\nFlorent",
    "created_at": "2011-11-24T15:46:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-130771",
    "user": "https://github.com/hivert"
}
```

<a id='comment:10'>Comment 10:</a>
Bi Burcin,

Replying to [@burcin](#comment%3A9):
> It all looks good. The declaration `cdef int py_pow` is redundant in `numerator_denominator()`, but I'll switch to positive review anyway.

The following diff

```diff
diff --git a/sage/symbolic/expression.pyx b/sage/symbolic/expression.pyx
--- a/sage/symbolic/expression.pyx
+++ b/sage/symbolic/expression.pyx
@@ -1867,7 +1867,7 @@ cdef class Expression(CommutativeRingEle
         assured that if True or False is returned (and proof is False) then 
         the answer is correct. 
 
-        INPUT::
+        INPUT:
         
            ntests -- (default 20) the number of iterations to run
            domain -- (optional) the domain from which to draw the random values
```
broke the doc. So I had to fix my patch. Doing so I discovered a few more typos and fixed them once for all. In the process I ended up folding the patch for #12072.  

So please re review. Sorry for the double review.

Florent



---

archive/issue_comments_130772.json:
```json
{
    "body": "Attachment: **[trac_12068-numer_denom_normal-ginac-fh.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_normal-ginac-fh.patch.gz)**",
    "created_at": "2011-11-24T15:52:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-130772",
    "user": "https://github.com/hivert"
}
```

Attachment: **[trac_12068-numer_denom_normal-ginac-fh.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_normal-ginac-fh.patch.gz)**



---

archive/issue_events_144381.json:
```json
{
    "actor": "https://github.com/hivert",
    "created_at": "2011-11-24T15:54:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12068#event-144381"
}
```



---

archive/issue_events_144382.json:
```json
{
    "actor": "https://github.com/hivert",
    "created_at": "2011-11-24T15:54:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12068#event-144382"
}
```



---

archive/issue_comments_130773.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nPlease re-review. Compared to my previous patch, I\n\n- wrapped normal;\n- removed the unused `py_pow` declaration;\n- fixed a bunch of doc typos.\n\nAgain sorry for the extra work,\n\nFlorent",
    "created_at": "2011-11-24T15:54:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-130773",
    "user": "https://github.com/hivert"
}
```

<a id='comment:11'>Comment 11:</a>
Please re-review. Compared to my previous patch, I

- wrapped normal;
- removed the unused `py_pow` declaration;
- fixed a bunch of doc typos.

Again sorry for the extra work,

Florent



---

archive/issue_comments_130774.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,4 +10,8 @@\n ```\n Using Pynac should be much faster.\n \n-**Apply** [attachment: trac_12068-numer_denom_ginac-folded-fh.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_ginac-folded-fh.patch.gz)\n+The patch wraps numer, denom, numer_denom and normal from GiNaC and fixes a\n+bunch of wrong sphinx markup in `expression.pyx`.\n+\n+**Apply** [attachment: trac_12068-numer_denom_normal-ginac-fh.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_normal-ginac-fh.patch.gz)\n+\n``````\n",
    "created_at": "2011-11-24T15:54:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-130774",
    "user": "https://github.com/hivert"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,4 +10,8 @@
 ```
 Using Pynac should be much faster.
 
-**Apply** [attachment: trac_12068-numer_denom_ginac-folded-fh.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_ginac-folded-fh.patch.gz)
+The patch wraps numer, denom, numer_denom and normal from GiNaC and fixes a
+bunch of wrong sphinx markup in `expression.pyx`.
+
+**Apply** [attachment: trac_12068-numer_denom_normal-ginac-fh.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_normal-ginac-fh.patch.gz)
+
``````




---

archive/issue_comments_130775.json:
```json
{
    "body": "Changed reviewer from **Burcin Erocal, Florent Hivert** to **Burcin Erocal, Florent Hivert, Karl-Dieter Crisman**",
    "created_at": "2012-01-27T04:27:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-130775",
    "user": "https://github.com/kcrisman"
}
```

Changed reviewer from **Burcin Erocal, Florent Hivert** to **Burcin Erocal, Florent Hivert, Karl-Dieter Crisman**



---

archive/issue_comments_130776.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nThe changes to the previous patch seem fine, docs are good, tests pass.  In fact, it's a very nice patch.  \n\nThe only problem I spied is in the last hunk:\n\n```\n         - ``self`` -- the symbolic expression converting from \n         - ``target`` -- (default None) the symbolic expression\n```\nis too far indented.  If you're going to fix all of this stuff, you might as well make these at the same indentation level as INPUT, such as in the second-to-last hunk.\n\nIn fact, I'm attaching a reviewer patch to fix this.\n\nI wonder if there is a more 'obvious' name for `normalize` that could be an alias... anyway, not for this ticket.  Assuming that Burcin has no objections, positive review other than this.",
    "created_at": "2012-01-27T04:27:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-130776",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:12'>Comment 12:</a>
The changes to the previous patch seem fine, docs are good, tests pass.  In fact, it's a very nice patch.  

The only problem I spied is in the last hunk:

```
         - ``self`` -- the symbolic expression converting from 
         - ``target`` -- (default None) the symbolic expression
```
is too far indented.  If you're going to fix all of this stuff, you might as well make these at the same indentation level as INPUT, such as in the second-to-last hunk.

In fact, I'm attaching a reviewer patch to fix this.

I wonder if there is a more 'obvious' name for `normalize` that could be an alias... anyway, not for this ticket.  Assuming that Burcin has no objections, positive review other than this.



---

archive/issue_events_144383.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-01-27T04:27:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12068#event-144383"
}
```



---

archive/issue_events_144384.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-01-27T04:27:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12068#event-144384"
}
```



---

archive/issue_comments_130777.json:
```json
{
    "body": "Attachment: **[trac_12068-reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-reviewer.patch.gz)**\n\nreviewer patch",
    "created_at": "2012-01-27T04:27:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-130777",
    "user": "https://github.com/kcrisman"
}
```

Attachment: **[trac_12068-reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-reviewer.patch.gz)**

reviewer patch



---

archive/issue_comments_130778.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -13,5 +13,5 @@\n The patch wraps numer, denom, numer_denom and normal from GiNaC and fixes a\n bunch of wrong sphinx markup in `expression.pyx`.\n \n-**Apply** [attachment: trac_12068-numer_denom_normal-ginac-fh.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_normal-ginac-fh.patch.gz)\n+**Apply** [and [attachment: trac_12068-reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-reviewer.patch.gz)(https://github.com/sagemath/sage/files/ticket12068/792cff91b3fef8e3a48855110e94929f.gz).\n \n``````\n",
    "created_at": "2012-01-27T04:28:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-130778",
    "user": "https://github.com/kcrisman"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -13,5 +13,5 @@
 The patch wraps numer, denom, numer_denom and normal from GiNaC and fixes a
 bunch of wrong sphinx markup in `expression.pyx`.
 
-**Apply** [attachment: trac_12068-numer_denom_normal-ginac-fh.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-numer_denom_normal-ginac-fh.patch.gz)
+**Apply** [and [attachment: trac_12068-reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-reviewer.patch.gz)(https://github.com/sagemath/sage/files/ticket12068/792cff91b3fef8e3a48855110e94929f.gz).
 
``````




---

archive/issue_comments_130779.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\n**Apply** [and [attachment: trac_12068-reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-reviewer.patch.gz)(https://github.com/sagemath/sage/files/ticket12068/792cff91b3fef8e3a48855110e94929f.gz).",
    "created_at": "2012-01-27T04:28:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-130779",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:13'>Comment 13:</a>
**Apply** [and [attachment: trac_12068-reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket12068/trac_12068-reviewer.patch.gz)(https://github.com/sagemath/sage/files/ticket12068/792cff91b3fef8e3a48855110e94929f.gz).



---

archive/issue_comments_130780.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nHi Karl-Dieter,\n\nReplying to [@kcrisman](#comment%3A12):\n> The changes to the previous patch seem fine, docs are good, tests pass.  In fact, it's a very nice patch.  \n\nThanks !\n\n> The only problem I spied is in the last hunk:\n\n\n  ```\n           - ``self`` -- the symbolic expression converting from \n           - ``target`` -- (default None) the symbolic expression\n  ```\n> is too far indented.  If you're going to fix all of this stuff, you might as well make these at the same indentation level as INPUT, such as in the second-to-last hunk.\n\n> In fact, I'm attaching a reviewer patch to fix this.\n\nShould't someone review your trivial reviewer patch before putting positive review ? Anyway, It is an obvious patch and I did review it. So I confirm your positive review.\n\n> I wonder if there is a more 'obvious' name for `normalize` that could be an alias... anyway, not for this ticket.  Assuming that Burcin has no objections, positive review other than this.\n\nIn every CAS I used, I've always been confused by simplify, normal, combine... I guess Sage isn't an exception.",
    "created_at": "2012-01-27T08:01:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-130780",
    "user": "https://github.com/hivert"
}
```

<a id='comment:14'>Comment 14:</a>
Hi Karl-Dieter,

Replying to [@kcrisman](#comment%3A12):
> The changes to the previous patch seem fine, docs are good, tests pass.  In fact, it's a very nice patch.  

Thanks !

> The only problem I spied is in the last hunk:


  ```
           - ``self`` -- the symbolic expression converting from 
           - ``target`` -- (default None) the symbolic expression
  ```
> is too far indented.  If you're going to fix all of this stuff, you might as well make these at the same indentation level as INPUT, such as in the second-to-last hunk.

> In fact, I'm attaching a reviewer patch to fix this.

Should't someone review your trivial reviewer patch before putting positive review ? Anyway, It is an obvious patch and I did review it. So I confirm your positive review.

> I wonder if there is a more 'obvious' name for `normalize` that could be an alias... anyway, not for this ticket.  Assuming that Burcin has no objections, positive review other than this.

In every CAS I used, I've always been confused by simplify, normal, combine... I guess Sage isn't an exception.



---

archive/issue_comments_130781.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\n> > In fact, I'm attaching a reviewer patch to fix this.\n\n> \n> Should't someone review your trivial reviewer patch before putting positive review ? Anyway, It is an obvious patch and I did review it. So I confirm your positive review.\n\nNo, reviewers are usually allowed to make VERY trivial changes, esp. to fix doc, without 'formal' other review, otherwise we would take even longer to review things than normal.  Naturally, anyone could decide that \"reviewer patch X needs review\" if they felt it was nontrivial.",
    "created_at": "2012-01-27T15:40:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-130781",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:15'>Comment 15:</a>
> > In fact, I'm attaching a reviewer patch to fix this.

> 
> Should't someone review your trivial reviewer patch before putting positive review ? Anyway, It is an obvious patch and I did review it. So I confirm your positive review.

No, reviewers are usually allowed to make VERY trivial changes, esp. to fix doc, without 'formal' other review, otherwise we would take even longer to review things than normal.  Naturally, anyone could decide that "reviewer patch X needs review" if they felt it was nontrivial.



---

archive/issue_comments_130782.json:
```json
{
    "body": "Merged: **sage-5.0.beta2**",
    "created_at": "2012-02-02T12:53:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12068#issuecomment-130782",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.0.beta2**



---

archive/issue_events_144385.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-02T12:53:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12068#event-144385"
}
```



---

archive/issue_events_144386.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-02T12:53:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/12068",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12068#event-144386"
}
```
