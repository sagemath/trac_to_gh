# Issue 12222: default aspect ratio for geometric objects

archive/issues_012050.json:
```json
{
    "body": "Assignee: jason, was\n\nCC:  @williamstein @kcrisman\n\nThis ticket is about changing the default aspect ratio for these objects to 1.0:\n\n* circle\n* arc\n* disk\n* ellipse\n* polygon\n\nThe idea is that when someone draws these, they want angles and circles to look correct in the plot.  Changing the default aspect ratio for a circle also corrects the very first example in plot.py (which was broken by #12213)\n\nApply [attachment:trac-12222-default-aspect-ratio.patch] and [attachment:trac_12222-reviewer.patch].\n\nIssue created by migration from https://trac.sagemath.org/ticket/12222\n\n",
    "closed_at": "2012-01-06T08:48:45Z",
    "created_at": "2011-12-22T14:16:59Z",
    "labels": [
        "component: graphics",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.8",
    "title": "default aspect ratio for geometric objects",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12222",
    "user": "https://github.com/jasongrout"
}
```
Assignee: jason, was

CC:  @williamstein @kcrisman

This ticket is about changing the default aspect ratio for these objects to 1.0:

* circle
* arc
* disk
* ellipse
* polygon

The idea is that when someone draws these, they want angles and circles to look correct in the plot.  Changing the default aspect ratio for a circle also corrects the very first example in plot.py (which was broken by #12213)

Apply [attachment:trac-12222-default-aspect-ratio.patch] and [attachment:trac_12222-reviewer.patch].

Issue created by migration from https://trac.sagemath.org/ticket/12222





---

archive/issue_comments_139516.json:
```json
{
    "body": "Attachment [trac-12222-default-aspect-ratio.patch](tarball://root/attachments/some-uuid/ticket12222/trac-12222-default-aspect-ratio.patch) by @jasongrout created at 2011-12-22 15:47:53\n\nThe list of objects this ticket touches is up for discussion at http://groups.google.com/group/sage-devel/browse_thread/thread/100cbb64787d0ba9",
    "created_at": "2011-12-22T15:47:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12222#issuecomment-139516",
    "user": "https://github.com/jasongrout"
}
```

Attachment [trac-12222-default-aspect-ratio.patch](tarball://root/attachments/some-uuid/ticket12222/trac-12222-default-aspect-ratio.patch) by @jasongrout created at 2011-12-22 15:47:53

The list of objects this ticket touches is up for discussion at http://groups.google.com/group/sage-devel/browse_thread/thread/100cbb64787d0ba9



---

archive/issue_comments_139517.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2011-12-22T15:47:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12222#issuecomment-139517",
    "user": "https://github.com/jasongrout"
}
```

Changing status from new to needs_info.



---

archive/issue_comments_139518.json:
```json
{
    "body": "Let me repeat a suggestion from #12213: have a distinction between \"user set aspect ratio 1\" and \"automatically set aspect ratio 1\". In the first case we definitely must do what the user wants. In the second case it is reasonable to skew circles, if otherwise the plot will be totally horrible: something like having one dimension 5 times bigger than another.\n\nIf this is implemented, I would argue that the default always should be 1, except for cases when there is a good reason otherwise.\n\nWe think that if someone draws a circle, it is expected to be round, but for lines nobody cares.\n\nHowever, if I draw two lines with slopes 2 and -1/2, I expect to see that they are perpendicular, and if they are not - it is the same as a skew circle.\n\nIt also seems to me that plot addition does not have to be associative, especially for 2D plots: to me left + right means \"draw right on top of left\" and it seemed to me that's what it does.\n\nWith this convention, it actually may make sense to inherit the aspect ratio from the left (which is likely to be more complicated, especially in \"+=\" operations). I unintentionally expected it when I had a complicated plot and wanted to add a couple lines to it. When the first plot is obtained from some function and it also has say, label options adjusted in a certain way, it gets especially annoying that adding a single line or a point discards all the customized look, unless I repeat all adjustments (which were hidden in the function).",
    "created_at": "2011-12-22T19:59:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12222#issuecomment-139518",
    "user": "https://github.com/novoselt"
}
```

Let me repeat a suggestion from #12213: have a distinction between "user set aspect ratio 1" and "automatically set aspect ratio 1". In the first case we definitely must do what the user wants. In the second case it is reasonable to skew circles, if otherwise the plot will be totally horrible: something like having one dimension 5 times bigger than another.

If this is implemented, I would argue that the default always should be 1, except for cases when there is a good reason otherwise.

We think that if someone draws a circle, it is expected to be round, but for lines nobody cares.

However, if I draw two lines with slopes 2 and -1/2, I expect to see that they are perpendicular, and if they are not - it is the same as a skew circle.

It also seems to me that plot addition does not have to be associative, especially for 2D plots: to me left + right means "draw right on top of left" and it seemed to me that's what it does.

With this convention, it actually may make sense to inherit the aspect ratio from the left (which is likely to be more complicated, especially in "+=" operations). I unintentionally expected it when I had a complicated plot and wanted to add a couple lines to it. When the first plot is obtained from some function and it also has say, label options adjusted in a certain way, it gets especially annoying that adding a single line or a point discards all the customized look, unless I repeat all adjustments (which were hidden in the function).



---

archive/issue_comments_139519.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2011-12-22T20:29:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12222#issuecomment-139519",
    "user": "https://github.com/jasongrout"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_139520.json:
```json
{
    "body": "It sounds like a good idea to have better heuristics.  I guess the tricky part is being smart enough to be nice, but not too smart that it is a guess what is going to happen.  Can we open a ticket and discussion about this suggestion, since it is going far beyond the rather limited purpose of this ticket, which is to repair some common use case problems that #12213 breaks?",
    "created_at": "2011-12-22T20:29:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12222#issuecomment-139520",
    "user": "https://github.com/jasongrout"
}
```

It sounds like a good idea to have better heuristics.  I guess the tricky part is being smart enough to be nice, but not too smart that it is a guess what is going to happen.  Can we open a ticket and discussion about this suggestion, since it is going far beyond the rather limited purpose of this ticket, which is to repair some common use case problems that #12213 breaks?



---

archive/issue_comments_139521.json:
```json
{
    "body": "See also #6249 about the z-order of sums of graphs.",
    "created_at": "2011-12-22T20:49:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12222#issuecomment-139521",
    "user": "https://github.com/vbraun"
}
```

See also #6249 about the z-order of sums of graphs.



---

archive/issue_comments_139522.json:
```json
{
    "body": "> See also #6249 about the z-order of sums of graphs.\n\nAnd, as I point out there, #3251.",
    "created_at": "2011-12-23T16:56:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12222#issuecomment-139522",
    "user": "https://github.com/kcrisman"
}
```

> See also #6249 about the z-order of sums of graphs.

And, as I point out there, #3251.



---

archive/issue_comments_139523.json:
```json
{
    "body": "Can I ask again for a review of this conservative, but important, fix for some unintended consequences of #12213?",
    "created_at": "2011-12-29T02:58:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12222#issuecomment-139523",
    "user": "https://github.com/jasongrout"
}
```

Can I ask again for a review of this conservative, but important, fix for some unintended consequences of #12213?



---

archive/issue_comments_139524.json:
```json
{
    "body": "Considering it breaks a doctest (even if it still \"passes\")...",
    "created_at": "2011-12-29T03:01:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12222#issuecomment-139524",
    "user": "https://github.com/kcrisman"
}
```

Considering it breaks a doctest (even if it still "passes")...



---

archive/issue_comments_139525.json:
```json
{
    "body": "Changing priority from major to blocker.",
    "created_at": "2011-12-29T03:01:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12222#issuecomment-139525",
    "user": "https://github.com/kcrisman"
}
```

Changing priority from major to blocker.



---

archive/issue_comments_139526.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-12-29T03:20:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12222#issuecomment-139526",
    "user": "https://github.com/kcrisman"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_139527.json:
```json
{
    "body": "In general, this is great.  So almost ready for prime time.  \n\nOkay, here's something that still doesn't look good and is in the documentation already.\n\nIn plot.py:\n\n```\nf(x) = (x-3)*(x-5)*(x-7)+40\nP = line([(2,0),(2,f(2))], color='black')\nP += line([(8,0),(8,f(8))], color='black')\nP += polygon([(2,0),(2,f(2))] + [(x, f(x)) for x in [2,2.1,..,8]] + [(8,0),(2,0)],  rgbcolor=(0.8,0.8,0.8))\nP += text(\"$\\\\int_{a}^b f(x) dx$\", (5, 20), fontsize=16, color='black')\nP += plot(f, (1, 8.5), thickness=3)\nP    # show the result\n```\nThe polygon one needs to have something done with it, because it's overriding the 'automatic' and looks quite bad.\n\nHopefully this is the only one.  Putting to 'needs work', but don't whip up a patch immediately until I've checked the rest.\n\nI have to say, reading through the plot doc page with pictures is quite pleasant visually.",
    "created_at": "2011-12-29T03:20:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12222#issuecomment-139527",
    "user": "https://github.com/kcrisman"
}
```

In general, this is great.  So almost ready for prime time.  

Okay, here's something that still doesn't look good and is in the documentation already.

In plot.py:

```
f(x) = (x-3)*(x-5)*(x-7)+40
P = line([(2,0),(2,f(2))], color='black')
P += line([(8,0),(8,f(8))], color='black')
P += polygon([(2,0),(2,f(2))] + [(x, f(x)) for x in [2,2.1,..,8]] + [(8,0),(2,0)],  rgbcolor=(0.8,0.8,0.8))
P += text("$\\int_{a}^b f(x) dx$", (5, 20), fontsize=16, color='black')
P += plot(f, (1, 8.5), thickness=3)
P    # show the result
```
The polygon one needs to have something done with it, because it's overriding the 'automatic' and looks quite bad.

Hopefully this is the only one.  Putting to 'needs work', but don't whip up a patch immediately until I've checked the rest.

I have to say, reading through the plot doc page with pictures is quite pleasant visually.



---

archive/issue_comments_139528.json:
```json
{
    "body": "I'm okay with setting the default for polygon to 'automatic'",
    "created_at": "2011-12-29T03:24:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12222#issuecomment-139528",
    "user": "https://github.com/jasongrout"
}
```

I'm okay with setting the default for polygon to 'automatic'



---

archive/issue_comments_139529.json:
```json
{
    "body": "I wasn't suggesting setting default for polygon to 'automatic', but to use it in this particular example.  I think it's a little unusual - usually one would use the `fill` keyword, not the polygon, for this case!\n\nA few more things:\n* I don't know why, but I'm still getting aspect ratio automatic pictures in arcs even though the aspect ratio test in the documentation is passing.\n* I have a feeling that complex plots should have 'automatic' as well, now, if that's possible to do easily (it may not be, and if it's not new then forget about it).  Try, for instance, `complex_plot(sqrt(x), (-5, 5), (-.1, .1))`.\n* Contour plots and vector fields seem to have 'automatic' now (try `contour_plot(f, (-1, 1), (-200, 200), contours=(0.1, 1.0, 1.2, 1.4), cmap='hsv')`) but density plots clearly are 1.0.   I'm not sure which is better, but they should be the same, I think.  I seem to recall them being 1.0 before, but of course all the examples are ones where 1.0 and automatic will look the same.",
    "created_at": "2011-12-29T03:40:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12222#issuecomment-139529",
    "user": "https://github.com/kcrisman"
}
```

I wasn't suggesting setting default for polygon to 'automatic', but to use it in this particular example.  I think it's a little unusual - usually one would use the `fill` keyword, not the polygon, for this case!

A few more things:
* I don't know why, but I'm still getting aspect ratio automatic pictures in arcs even though the aspect ratio test in the documentation is passing.
* I have a feeling that complex plots should have 'automatic' as well, now, if that's possible to do easily (it may not be, and if it's not new then forget about it).  Try, for instance, `complex_plot(sqrt(x), (-5, 5), (-.1, .1))`.
* Contour plots and vector fields seem to have 'automatic' now (try `contour_plot(f, (-1, 1), (-200, 200), contours=(0.1, 1.0, 1.2, 1.4), cmap='hsv')`) but density plots clearly are 1.0.   I'm not sure which is better, but they should be the same, I think.  I seem to recall them being 1.0 before, but of course all the examples are ones where 1.0 and automatic will look the same.



---

archive/issue_comments_139530.json:
```json
{
    "body": "Are there any plans to get this fixed soon, considering this has been made a blocker?",
    "created_at": "2012-01-04T19:17:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12222#issuecomment-139530",
    "user": "https://github.com/jdemeyer"
}
```

Are there any plans to get this fixed soon, considering this has been made a blocker?



---

archive/issue_comments_139531.json:
```json
{
    "body": "I will work on this at the Sage days starting next Monday.  Is that soon enough?",
    "created_at": "2012-01-04T22:20:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12222#issuecomment-139531",
    "user": "https://github.com/jasongrout"
}
```

I will work on this at the Sage days starting next Monday.  Is that soon enough?



---

archive/issue_comments_139532.json:
```json
{
    "body": "I would be okay with fixing the doctest in comment:11 by adding the `'automatic'` in that example for the polygon (assuming we have another ticket to fix the underlying problem) and getting aspect ratio `1.0` pictures in arcs.   The first is trivial, and hopefully the second wouldn't be too hard - must be a missing option decorator somewhere - maybe (?) it would be a good thing to show people at the Sage booth how we fix Sage... ?\n\nThe other things are something we'd want to think about on another ticket, as no current doctests break.",
    "created_at": "2012-01-05T04:14:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12222#issuecomment-139532",
    "user": "https://github.com/kcrisman"
}
```

I would be okay with fixing the doctest in comment:11 by adding the `'automatic'` in that example for the polygon (assuming we have another ticket to fix the underlying problem) and getting aspect ratio `1.0` pictures in arcs.   The first is trivial, and hopefully the second wouldn't be too hard - must be a missing option decorator somewhere - maybe (?) it would be a good thing to show people at the Sage booth how we fix Sage... ?

The other things are something we'd want to think about on another ticket, as no current doctests break.



---

archive/issue_comments_139533.json:
```json
{
    "body": "Considering this is a *blocker* ticket, you should really aim for a minimal fix: simply fix the blocker issue, nothing more.",
    "created_at": "2012-01-05T09:01:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12222#issuecomment-139533",
    "user": "https://github.com/jdemeyer"
}
```

Considering this is a *blocker* ticket, you should really aim for a minimal fix: simply fix the blocker issue, nothing more.



---

archive/issue_comments_139534.json:
```json
{
    "body": "Okay, but then we still have changed a doctest (to be wrong) and comment:11 needs to be fixed. I would argue that William's ticket breaking the arcs is bad too, but I suppose I could live with this just so 4.8 can be out.\n\nIf I have enough internet today, I may fix this.",
    "created_at": "2012-01-05T13:54:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12222#issuecomment-139534",
    "user": "https://github.com/kcrisman"
}
```

Okay, but then we still have changed a doctest (to be wrong) and comment:11 needs to be fixed. I would argue that William's ticket breaking the arcs is bad too, but I suppose I could live with this just so 4.8 can be out.

If I have enough internet today, I may fix this.



---

archive/issue_comments_139535.json:
```json
{
    "body": "Okay, fixing comment:11 is easy.  I cannot figure out why arcs don't work but ellipses don't; the code seems identical.  I'll ask Jason later this morning.",
    "created_at": "2012-01-05T14:18:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12222#issuecomment-139535",
    "user": "https://github.com/kcrisman"
}
```

Okay, fixing comment:11 is easy.  I cannot figure out why arcs don't work but ellipses don't; the code seems identical.  I'll ask Jason later this morning.



---

archive/issue_comments_139536.json:
```json
{
    "body": "Okay, Jason and I figured out that the ellipse thing is not a bug, it's me being dense.  (The axes don't intersect!)\n\nSo upcoming reviewer patch gives positive review - Jason gives verbal consent after seeing the fix :)",
    "created_at": "2012-01-05T17:14:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12222#issuecomment-139536",
    "user": "https://github.com/kcrisman"
}
```

Okay, Jason and I figured out that the ellipse thing is not a bug, it's me being dense.  (The axes don't intersect!)

So upcoming reviewer patch gives positive review - Jason gives verbal consent after seeing the fix :)



---

archive/issue_comments_139537.json:
```json
{
    "body": "Attachment [trac_12222-reviewer.patch](tarball://root/attachments/some-uuid/ticket12222/trac_12222-reviewer.patch) by @kcrisman created at 2012-01-05 17:18:30",
    "created_at": "2012-01-05T17:18:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12222#issuecomment-139537",
    "user": "https://github.com/kcrisman"
}
```

Attachment [trac_12222-reviewer.patch](tarball://root/attachments/some-uuid/ticket12222/trac_12222-reviewer.patch) by @kcrisman created at 2012-01-05 17:18:30



---

archive/issue_comments_139538.json:
```json
{
    "body": "Apply [attachment:trac-12222-default-aspect-ratio.patch] and [attachment:trac_12222-reviewer.patch].",
    "created_at": "2012-01-05T17:19:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12222#issuecomment-139538",
    "user": "https://github.com/kcrisman"
}
```

Apply [attachment:trac-12222-default-aspect-ratio.patch] and [attachment:trac_12222-reviewer.patch].



---

archive/issue_comments_139539.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2012-01-05T17:19:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12222#issuecomment-139539",
    "user": "https://github.com/kcrisman"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_139540.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-01-06T08:48:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12222#issuecomment-139540",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_032568.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-06T08:48:45Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12222",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12222#event-32568"
}
```
