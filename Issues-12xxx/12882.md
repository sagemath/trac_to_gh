# Issue 12882: Allows a generalized Cartan matrix as input for Dynkin diagrams

archive/issues_012710.json:
```json
{
    "body": "Dynkin diagrams can currently not be constructed using a generalized Cartan matrix.\n\nApply: [attachment:trac_12882-matrix_as_dynkin_diagram-ts.patch]\n\n**Assignee:** sage-combinat\n\n**CC:**  sage-combinat\n\n**Keywords:** Weyl group, Dynkin diagram, Cartan matrix, days49\n\n**Reviewer:** Ben Salisbury\n\n**Author:** Christian Stump, Travis Scrimshaw\n\n**Merged:** sage-5.12.beta4\n\n**Dependencies:** #14137 #14516\n\nIssue created by migration from https://trac.sagemath.org/ticket/12882\n\n",
    "closed_at": "2013-08-28T06:52:12Z",
    "created_at": "2012-04-26T14:29:20Z",
    "labels": [
        "component: combinatorics",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.12",
    "title": "Allows a generalized Cartan matrix as input for Dynkin diagrams",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12882",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```
Dynkin diagrams can currently not be constructed using a generalized Cartan matrix.

Apply: [attachment:trac_12882-matrix_as_dynkin_diagram-ts.patch]

**Assignee:** sage-combinat

**CC:**  sage-combinat

**Keywords:** Weyl group, Dynkin diagram, Cartan matrix, days49

**Reviewer:** Ben Salisbury

**Author:** Christian Stump, Travis Scrimshaw

**Merged:** sage-5.12.beta4

**Dependencies:** #14137 #14516

Issue created by migration from https://trac.sagemath.org/ticket/12882





---

archive/issue_comments_181015.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n Dynkin diagrams can currently not be constructed using a generalized Cartan matrix.\n \n-This patch implements this.\n+This patch implements this. For the most recent version of the patch see the combinat queue!\n``````\n",
    "created_at": "2012-04-26T14:31:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181015",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
 Dynkin diagrams can currently not be constructed using a generalized Cartan matrix.
 
-This patch implements this.
+This patch implements this. For the most recent version of the patch see the combinat queue!
``````




---

archive/issue_comments_181016.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2012-04-26T14:31:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181016",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_181017.json:
```json
{
    "body": "**Dependencies:** #8327",
    "created_at": "2012-04-26T14:32:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181017",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

**Dependencies:** #8327



---

archive/issue_comments_181018.json:
```json
{
    "body": "<a id='comment:3'></a>\nPlease fill in your real name as Author.",
    "created_at": "2012-07-27T20:40:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181018",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:3'></a>
Please fill in your real name as Author.



---

archive/issue_comments_181019.json:
```json
{
    "body": "**Author:** Christian Stump",
    "created_at": "2012-07-27T22:46:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181019",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

**Author:** Christian Stump



---

archive/issue_comments_181020.json:
```json
{
    "body": "<a id='comment:5'></a>\nHi Christian--\n\nYour code is checking that all the off-diagonal entries in the input matrix are strictly negative.  That seems a bit over-enthusiastic.  \n\nA doctest for the new functionality would also be good.  \n\ncheers,\n\nHugh",
    "created_at": "2012-11-11T06:33:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181020",
    "user": "https://github.com/hughrthomas"
}
```

<a id='comment:5'></a>
Hi Christian--

Your code is checking that all the off-diagonal entries in the input matrix are strictly negative.  That seems a bit over-enthusiastic.  

A doctest for the new functionality would also be good.  

cheers,

Hugh



---

archive/issue_comments_181021.json:
```json
{
    "body": "<a id='comment:6'></a>\nHi Christian--\n\nWhy does this have #8327 listed as a dependency?  \n\ncheers,\n\nHugh",
    "created_at": "2012-11-11T06:38:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181021",
    "user": "https://github.com/hughrthomas"
}
```

<a id='comment:6'></a>
Hi Christian--

Why does this have #8327 listed as a dependency?  

cheers,

Hugh



---

archive/issue_comments_181022.json:
```json
{
    "body": "**Changing dependencies** from \"#8327\" to \"\".",
    "created_at": "2012-11-11T08:24:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181022",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

**Changing dependencies** from "#8327" to "".



---

archive/issue_comments_181023.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [hthomas](#comment%3A5):\n> Hi Christian--\n> \n> Your code is checking that all the off-diagonal entries in the input matrix are strictly negative.  That seems a bit over-enthusiastic.  \n> \n> A doctest for the new functionality would also be good.  \n\n\nHi Hugh!\n\nThanks for bringing back my/our attention to this ticket!\n\nI will be too busy to actively work on this patch in the next two weeks, but feel free to take it over and review/finish it if you like! I will now provide a version that you can work with (in particular, I deleted the dependency). Of course, you can as well wait until I finish the patch, if you prefer.\n\nBest, Christian",
    "created_at": "2012-11-11T08:28:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181023",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:8'></a>
Replying to [hthomas](#comment%3A5):
> Hi Christian--
> 
> Your code is checking that all the off-diagonal entries in the input matrix are strictly negative.  That seems a bit over-enthusiastic.  
> 
> A doctest for the new functionality would also be good.  


Hi Hugh!

Thanks for bringing back my/our attention to this ticket!

I will be too busy to actively work on this patch in the next two weeks, but feel free to take it over and review/finish it if you like! I will now provide a version that you can work with (in particular, I deleted the dependency). Of course, you can as well wait until I finish the patch, if you prefer.

Best, Christian



---

archive/attachments_017367.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_12882-generalized_cartan_matrix_as_dynkin_diagram_input-cs.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket12882/trac_12882-generalized_cartan_matrix_as_dynkin_diagram_input-cs.patch",
    "created_at": "2012-11-11T08:48:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```



---

archive/issue_comments_181024.json:
```json
{
    "body": "",
    "created_at": "2012-11-11T08:48:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181024",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```





---

archive/issue_comments_181025.json:
```json
{
    "body": "<a id='comment:9'></a>\nI updated the patch on the combinat queue and also uploaded it here. The negative entries test was accidentally fixed in the following patch on reflection groups rather than in this patch. I replaced all `asserts` by `ValueErrors` (since I was told that's the way to do it some time ago).\n\nAs said, Hugh: feel free to take it over, or to review it as is.\n\nBest, Christian",
    "created_at": "2012-11-11T08:53:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181025",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:9'></a>
I updated the patch on the combinat queue and also uploaded it here. The negative entries test was accidentally fixed in the following patch on reflection groups rather than in this patch. I replaced all `asserts` by `ValueErrors` (since I was told that's the way to do it some time ago).

As said, Hugh: feel free to take it over, or to review it as is.

Best, Christian



---

archive/issue_comments_181026.json:
```json
{
    "body": "<a id='comment:10'></a>\nI will take this over (since no progress has been made recently) and base it on #14137.",
    "created_at": "2013-04-12T14:09:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181026",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:10'></a>
I will take this over (since no progress has been made recently) and base it on #14137.



---

archive/issue_comments_181027.json:
```json
{
    "body": "**Dependencies:** #14137",
    "created_at": "2013-04-12T14:09:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181027",
    "user": "https://github.com/tscrim"
}
```

**Dependencies:** #14137



---

archive/issue_comments_181028.json:
```json
{
    "body": "**Changing author** from \"Christian Stump\" to \"Christian Stump, Travis Scrimshaw\".",
    "created_at": "2013-04-12T14:09:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181028",
    "user": "https://github.com/tscrim"
}
```

**Changing author** from "Christian Stump" to "Christian Stump, Travis Scrimshaw".



---

archive/issue_comments_181029.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2013-04-12T14:09:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181029",
    "user": "https://github.com/tscrim"
}
```

**Changing status** from needs_review to needs_work.



---

archive/attachments_017368.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_12882-generalized_cartan_matrix_as_dynkin_diagram_input-cs.2.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket12882/trac_12882-generalized_cartan_matrix_as_dynkin_diagram_input-cs.2.patch",
    "created_at": "2013-04-12T21:02:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/tscrim"
}
```



---

archive/issue_comments_181030.json:
```json
{
    "body": "",
    "created_at": "2013-04-12T21:02:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181030",
    "user": "https://github.com/tscrim"
}
```





---

archive/issue_comments_181031.json:
```json
{
    "body": "<a id='comment:11'></a>\nNew version of the patch ready for review.\n\nFor patchbot:\n\nApply: trac_12882-matrix_as_dynkin_diagram-ts.patch",
    "created_at": "2013-04-12T21:06:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181031",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:11'></a>
New version of the patch ready for review.

For patchbot:

Apply: trac_12882-matrix_as_dynkin_diagram-ts.patch



---

archive/issue_comments_181032.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n Dynkin diagrams can currently not be constructed using a generalized Cartan matrix.\n \n-This patch implements this. For the most recent version of the patch see the combinat queue!\n+Apply: [attachment:trac_12882-matrix_as_dynkin_diagram-ts.patch]\n``````\n",
    "created_at": "2013-04-12T21:06:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181032",
    "user": "https://github.com/tscrim"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
 Dynkin diagrams can currently not be constructed using a generalized Cartan matrix.
 
-This patch implements this. For the most recent version of the patch see the combinat queue!
+Apply: [attachment:trac_12882-matrix_as_dynkin_diagram-ts.patch]
``````




---

archive/issue_comments_181033.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2013-04-12T21:06:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181033",
    "user": "https://github.com/tscrim"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_181034.json:
```json
{
    "body": "<a id='comment:12'></a>\nRebased patch.\n\nApply: trac_12882-matrix_as_dynkin_diagram-ts.patch",
    "created_at": "2013-06-01T16:26:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181034",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:12'></a>
Rebased patch.

Apply: trac_12882-matrix_as_dynkin_diagram-ts.patch



---

archive/issue_comments_181035.json:
```json
{
    "body": "<a id='comment:13'></a>\nHi Travis,\n\nThis patch does not pass all of it's doctests.  Also, is it a good idea to add a note to the documentation saying that only Cartan matrices whose Cartan types are implemented in Sage are legal input?  For example, the Cartan matrix \n\n```\nCartanMatrix([[2,-3],[-3,2]])\n```\nyields an error.  Can you also provide an example of inputting a Cartan matrix and an index set in the documentation?  \n\n-Ben",
    "created_at": "2013-06-21T18:31:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181035",
    "user": "https://github.com/bsalisbury1"
}
```

<a id='comment:13'></a>
Hi Travis,

This patch does not pass all of it's doctests.  Also, is it a good idea to add a note to the documentation saying that only Cartan matrices whose Cartan types are implemented in Sage are legal input?  For example, the Cartan matrix 

```
CartanMatrix([[2,-3],[-3,2]])
```
yields an error.  Can you also provide an example of inputting a Cartan matrix and an index set in the documentation?  

-Ben



---

archive/issue_comments_181036.json:
```json
{
    "body": "**Changing keywords** from \"Weyl group, Dynkin diagram, Cartan matrix\" to \"Weyl group, Dynkin diagram, Cartan matrix, days49\".",
    "created_at": "2013-06-21T18:32:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181036",
    "user": "https://github.com/bsalisbury1"
}
```

**Changing keywords** from "Weyl group, Dynkin diagram, Cartan matrix" to "Weyl group, Dynkin diagram, Cartan matrix, days49".



---

archive/issue_comments_181037.json:
```json
{
    "body": "<a id='comment:15'></a>\nHey Ben,\n\nNew version of the patch which passes all doctests and adds the example. Thanks for reviewing this.\n\nBest,\n\nTravis\n\nFor patchbot:\n\nApply: trac_12882-matrix_as_dynkin_diagram-ts.patch",
    "created_at": "2013-06-22T15:52:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181037",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:15'></a>
Hey Ben,

New version of the patch which passes all doctests and adds the example. Thanks for reviewing this.

Best,

Travis

For patchbot:

Apply: trac_12882-matrix_as_dynkin_diagram-ts.patch



---

archive/issue_comments_181038.json:
```json
{
    "body": "<a id='comment:16'></a>\nHey Ben,\n\nOkay, `is_finite()` and `is_affine()` are working now for arbitrary Cartan matrices.\n\nBest,\n\nTravis",
    "created_at": "2013-06-23T21:32:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181038",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:16'></a>
Hey Ben,

Okay, `is_finite()` and `is_affine()` are working now for arbitrary Cartan matrices.

Best,

Travis



---

archive/issue_comments_181039.json:
```json
{
    "body": "<a id='comment:17'></a>\nFor patchbot:\n\nApply: trac_12882-matrix_as_dynkin_diagram-ts.patch",
    "created_at": "2013-06-23T21:32:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181039",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:17'></a>
For patchbot:

Apply: trac_12882-matrix_as_dynkin_diagram-ts.patch



---

archive/issue_comments_181040.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2013-06-24T13:29:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181040",
    "user": "https://github.com/bsalisbury1"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_181041.json:
```json
{
    "body": "**Reviewer:** Ben Salisbury",
    "created_at": "2013-06-24T13:29:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181041",
    "user": "https://github.com/bsalisbury1"
}
```

**Reviewer:** Ben Salisbury



---

archive/issue_comments_181042.json:
```json
{
    "body": "<a id='comment:18'></a>\nHi Travis,\n\nThank you for making those changes!\n\n-Ben",
    "created_at": "2013-06-24T13:29:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181042",
    "user": "https://github.com/bsalisbury1"
}
```

<a id='comment:18'></a>
Hi Travis,

Thank you for making those changes!

-Ben



---

archive/issue_events_041308.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-07-21T21:41:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12882#event-41308"
}
```



---

archive/issue_comments_181043.json:
```json
{
    "body": "<a id='comment:20'></a>\nThere are obvious doctest failures with the patchbot:\n\n```\nsage -t devel/sage/sage/combinat/root_system/dynkin_diagram.py\n**********************************************************************\nFile \"devel/sage/sage/combinat/root_system/dynkin_diagram.py\", line 145, in sage.combinat.root_system.dynkin_diagram.DynkinDiagram\nFailed example:\n    DI.index_set()\nExpected:\n    (3, 5)\nGot:\n    [3, 5]\n**********************************************************************\nFile \"devel/sage/sage/combinat/root_system/dynkin_diagram.py\", line 149, in sage.combinat.root_system.dynkin_diagram.DynkinDiagram\nFailed example:\n    DII.index_set()\nExpected:\n    ('x', -1)\nGot:\n    [-1, 'x']\n**********************************************************************\n```",
    "created_at": "2013-08-04T06:03:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181043",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:20'></a>
There are obvious doctest failures with the patchbot:

```
sage -t devel/sage/sage/combinat/root_system/dynkin_diagram.py
**********************************************************************
File "devel/sage/sage/combinat/root_system/dynkin_diagram.py", line 145, in sage.combinat.root_system.dynkin_diagram.DynkinDiagram
Failed example:
    DI.index_set()
Expected:
    (3, 5)
Got:
    [3, 5]
**********************************************************************
File "devel/sage/sage/combinat/root_system/dynkin_diagram.py", line 149, in sage.combinat.root_system.dynkin_diagram.DynkinDiagram
Failed example:
    DII.index_set()
Expected:
    ('x', -1)
Got:
    [-1, 'x']
**********************************************************************
```



---

archive/issue_comments_181044.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2013-08-04T06:03:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181044",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_comments_181045.json:
```json
{
    "body": "**Changing status** from needs_work to positive_review.",
    "created_at": "2013-08-08T00:11:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181045",
    "user": "https://github.com/tscrim"
}
```

**Changing status** from needs_work to positive_review.



---

archive/issue_comments_181046.json:
```json
{
    "body": "<a id='comment:21'></a>\nAh, there's a dependency from #14516 for those doctests. Ben and I were doing this on the combinat queue which had that patch applied.\n\n```\nsage -t root_system/dynkin_diagram.py\n    [88 tests, 3.67 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 4.1 seconds\n    cpu time: 1.8 seconds\n    cumulative wall time: 3.7 seconds\n```\n\nFor patchbot:\n\nApply: trac_12882-matrix_as_dynkin_diagram-ts.patch\u200b",
    "created_at": "2013-08-08T00:11:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181046",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:21'></a>
Ah, there's a dependency from #14516 for those doctests. Ben and I were doing this on the combinat queue which had that patch applied.

```
sage -t root_system/dynkin_diagram.py
    [88 tests, 3.67 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 4.1 seconds
    cpu time: 1.8 seconds
    cumulative wall time: 3.7 seconds
```

For patchbot:

Apply: trac_12882-matrix_as_dynkin_diagram-ts.patch​



---

archive/issue_comments_181047.json:
```json
{
    "body": "**Changing dependencies** from \"#14137\" to \"#14137 #14516\".",
    "created_at": "2013-08-08T00:11:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181047",
    "user": "https://github.com/tscrim"
}
```

**Changing dependencies** from "#14137" to "#14137 #14516".



---

archive/issue_comments_181048.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2013-08-16T08:09:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181048",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_comments_181049.json:
```json
{
    "body": "<a id='comment:22'></a>\n\n```\nsage -t devel/sage/sage/combinat/root_system/dynkin_diagram.py\n**********************************************************************\nFile \"devel/sage/sage/combinat/root_system/dynkin_diagram.py\", line 149, in sage.combinat.root_system.dynkin_diagram.DynkinDiagram\nFailed example:\n    DII.index_set()\nExpected:\n    ('x', -1)\nGot:\n    (-1, 'x')\n**********************************************************************\n```",
    "created_at": "2013-08-16T08:09:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181049",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:22'></a>

```
sage -t devel/sage/sage/combinat/root_system/dynkin_diagram.py
**********************************************************************
File "devel/sage/sage/combinat/root_system/dynkin_diagram.py", line 149, in sage.combinat.root_system.dynkin_diagram.DynkinDiagram
Failed example:
    DII.index_set()
Expected:
    ('x', -1)
Got:
    (-1, 'x')
**********************************************************************
```



---

archive/issue_comments_181050.json:
```json
{
    "body": "<a id='comment:23'></a>\nOkay, I've made the offending test return a sorted list. However this should be overkill since `index_set` just makes the call to `vertices`, which returns a sorted list, into a tuple (i.e. there doesn't seem to be a set/dict being returned...). Here's the patches have applied on `5.11.rc0`:\n\n```\ntrac_14882-backtrack_longtime-dg.patch\ntrac_13589-categories-c3_under_control-nt.patch\ntrac_14507-tropical_semiring-ts.patch\ntrac_7983-major_index_and_other_tableau_fixes-dg.patch\ntrac_7983-review-ts.patch\ntrac_8386_really_just_moving-fc.patch\ntrac_8386_big_clean_fc.patch\ntrac_8386_assert_removal.patch\ntrac_14808-recoils_of_permutations-ts.patch\ntrac_10630-vector_partition-ap.patch\ntrac_14870-fix_int_mod_QQ-ts.patch\ntrac_14787-gyw_stats-bs.patch\ntrac_14787-pdf_fix-ts.patch\ntrac_14573-path_realizations-ts.patch\ntrac_11407-list_clone_improve-fh.patch\ntrac_14516-crystals_speedup-ts.patch\ntrac_12882-matrix_as_dynkin_diagram-ts.patch\n```\nSo I'm confused about why we're getting different results (and slightly worried).\n\nAnyways, Ben could you do a quick re-review of the patch? Thanks.\n\nFor patchbot:\n\nApply: trac_12882-matrix_as_dynkin_diagram-ts.patch\u200b",
    "created_at": "2013-08-16T15:29:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181050",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:23'></a>
Okay, I've made the offending test return a sorted list. However this should be overkill since `index_set` just makes the call to `vertices`, which returns a sorted list, into a tuple (i.e. there doesn't seem to be a set/dict being returned...). Here's the patches have applied on `5.11.rc0`:

```
trac_14882-backtrack_longtime-dg.patch
trac_13589-categories-c3_under_control-nt.patch
trac_14507-tropical_semiring-ts.patch
trac_7983-major_index_and_other_tableau_fixes-dg.patch
trac_7983-review-ts.patch
trac_8386_really_just_moving-fc.patch
trac_8386_big_clean_fc.patch
trac_8386_assert_removal.patch
trac_14808-recoils_of_permutations-ts.patch
trac_10630-vector_partition-ap.patch
trac_14870-fix_int_mod_QQ-ts.patch
trac_14787-gyw_stats-bs.patch
trac_14787-pdf_fix-ts.patch
trac_14573-path_realizations-ts.patch
trac_11407-list_clone_improve-fh.patch
trac_14516-crystals_speedup-ts.patch
trac_12882-matrix_as_dynkin_diagram-ts.patch
```
So I'm confused about why we're getting different results (and slightly worried).

Anyways, Ben could you do a quick re-review of the patch? Thanks.

For patchbot:

Apply: trac_12882-matrix_as_dynkin_diagram-ts.patch​



---

archive/issue_comments_181051.json:
```json
{
    "body": "<a id='comment:24'></a>\nI ran the tests again on `5.12.beta0` on the entire root_system folder with following patches applied:\n\n```\napplying trac_14610-LSenergy-ms.patch\napplying trac9107_nesting_nested_classes.patch\napplying trac_9107_fix_cross_reference.patch\napplying trac_14787-gyw_stats-bs.patch\napplying trac_14787-pdf_fix-ts.patch\napplying trac_14573-path_realizations-ts.patch\napplying trac_11407-list_clone_improve-fh.patch\napplying trac_14516-crystals_speedup-ts.patch\napplying trac_12882-matrix_as_dynkin_diagram-ts.patch\n```\nAll tests passed\n\n```\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 235.7 seconds\n    cpu time: 212.6 seconds\n    cumulative wall time: 233.4 seconds\n```\nand in particular:\n\n```\nsage -t --long root_system/dynkin_diagram.py\n    [88 tests, 0.53 s]\n```\nI also copied and ran those tests in Sage directly, and received the expected result:\n\n```\nsage: CII = CartanMatrix([[2, -3], [-4, 2]])\nsage: DII = DynkinDiagram(CII, (-1, 'x'))\nsage: DII.index_set()\n('x', -1)\n```",
    "created_at": "2013-08-16T15:49:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181051",
    "user": "https://github.com/bsalisbury1"
}
```

<a id='comment:24'></a>
I ran the tests again on `5.12.beta0` on the entire root_system folder with following patches applied:

```
applying trac_14610-LSenergy-ms.patch
applying trac9107_nesting_nested_classes.patch
applying trac_9107_fix_cross_reference.patch
applying trac_14787-gyw_stats-bs.patch
applying trac_14787-pdf_fix-ts.patch
applying trac_14573-path_realizations-ts.patch
applying trac_11407-list_clone_improve-fh.patch
applying trac_14516-crystals_speedup-ts.patch
applying trac_12882-matrix_as_dynkin_diagram-ts.patch
```
All tests passed

```
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 235.7 seconds
    cpu time: 212.6 seconds
    cumulative wall time: 233.4 seconds
```
and in particular:

```
sage -t --long root_system/dynkin_diagram.py
    [88 tests, 0.53 s]
```
I also copied and ran those tests in Sage directly, and received the expected result:

```
sage: CII = CartanMatrix([[2, -3], [-4, 2]])
sage: DII = DynkinDiagram(CII, (-1, 'x'))
sage: DII.index_set()
('x', -1)
```



---

archive/issue_comments_181052.json:
```json
{
    "body": "**Changing status** from needs_work to positive_review.",
    "created_at": "2013-08-16T15:49:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181052",
    "user": "https://github.com/bsalisbury1"
}
```

**Changing status** from needs_work to positive_review.



---

archive/issue_comments_181053.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2013-08-18T12:45:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181053",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_comments_181054.json:
```json
{
    "body": "<a id='comment:26'></a>\nStill doesn't work:\n\n```\nsage -t devel/sage/sage/combinat/root_system/dynkin_diagram.py\n**********************************************************************\nFile \"devel/sage/sage/combinat/root_system/dynkin_diagram.py\", line 149, in sage.combinat.root_system.dynkin_diagram.DynkinDiagram\nFailed example:\n    sorted(DII.index_set())\nExpected:\n    ['x', -1]\nGot:\n    [-1, 'x']\n**********************************************************************\n```",
    "created_at": "2013-08-18T12:45:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181054",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:26'></a>
Still doesn't work:

```
sage -t devel/sage/sage/combinat/root_system/dynkin_diagram.py
**********************************************************************
File "devel/sage/sage/combinat/root_system/dynkin_diagram.py", line 149, in sage.combinat.root_system.dynkin_diagram.DynkinDiagram
Failed example:
    sorted(DII.index_set())
Expected:
    ['x', -1]
Got:
    [-1, 'x']
**********************************************************************
```



---

archive/issue_comments_181055.json:
```json
{
    "body": "<a id='comment:27'></a>\nJeroen, so somehow your system (and the patchbot's) is sorting things differently than ours. Do you have any idea about why this is happening? I don't want to change the output of the doctest because then it will fail on our computers. (My guess as to why we're only seeing this here because it's the only time we're doctesting a sorted list with a string and an integer.)",
    "created_at": "2013-08-18T15:00:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181055",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:27'></a>
Jeroen, so somehow your system (and the patchbot's) is sorting things differently than ours. Do you have any idea about why this is happening? I don't want to change the output of the doctest because then it will fail on our computers. (My guess as to why we're only seeing this here because it's the only time we're doctesting a sorted list with a string and an integer.)



---

archive/issue_comments_181056.json:
```json
{
    "body": "<a id='comment:28'></a>\nReplying to [tscrim](#comment%3A27):\n> My guess as to why we're only seeing this here because it's the only time we're doctesting a sorted list with a string and an integer.\n\nYes, it seems that comparing a string and an integer simply isn't well-defined.",
    "created_at": "2013-08-19T04:57:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181056",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:28'></a>
Replying to [tscrim](#comment%3A27):
> My guess as to why we're only seeing this here because it's the only time we're doctesting a sorted list with a string and an integer.

Yes, it seems that comparing a string and an integer simply isn't well-defined.



---

archive/issue_comments_181057.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2013-08-19T15:22:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181057",
    "user": "https://github.com/tscrim"
}
```

**Changing status** from needs_work to needs_review.



---

archive/attachments_017369.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_12882-matrix_as_dynkin_diagram-ts.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket12882/trac_12882-matrix_as_dynkin_diagram-ts.patch",
    "created_at": "2013-08-19T15:22:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/tscrim"
}
```



---

archive/issue_comments_181058.json:
```json
{
    "body": "<a id='comment:29'></a>\nHere's a new version of the patch which sidesteps the issue by making it indexed by two strings. Jeroen, could you check to make sure the tests also pass for you? Thanks.",
    "created_at": "2013-08-19T15:22:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181058",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:29'></a>
Here's a new version of the patch which sidesteps the issue by making it indexed by two strings. Jeroen, could you check to make sure the tests also pass for you? Thanks.



---

archive/issue_comments_181059.json:
```json
{
    "body": "<a id='comment:30'></a>\napply only trac_12882-matrix_as_dynkin_diagram-ts.patch\u200b",
    "created_at": "2013-08-21T09:49:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181059",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:30'></a>
apply only trac_12882-matrix_as_dynkin_diagram-ts.patch​



---

archive/issue_comments_181060.json:
```json
{
    "body": "<a id='comment:31'></a>\napply trac_12882-matrix_as_dynkin_diagram-ts.patch",
    "created_at": "2013-08-21T09:59:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181060",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:31'></a>
apply trac_12882-matrix_as_dynkin_diagram-ts.patch



---

archive/issue_comments_181061.json:
```json
{
    "body": "<a id='comment:32'></a>\nHey Ben,\n\nCould you check to make sure this works for you still? I've given the patchbot a kick and we'll check against that going green.\n\nBest,\n\nTravis",
    "created_at": "2013-08-22T18:34:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181061",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:32'></a>
Hey Ben,

Could you check to make sure this works for you still? I've given the patchbot a kick and we'll check against that going green.

Best,

Travis



---

archive/issue_comments_181062.json:
```json
{
    "body": "<a id='comment:33'></a>\nit seems that the patchbot is (or was?) broken (it tries to apply very old dependencies)",
    "created_at": "2013-08-22T18:44:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181062",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:33'></a>
it seems that the patchbot is (or was?) broken (it tries to apply very old dependencies)



---

archive/issue_comments_181063.json:
```json
{
    "body": "<a id='comment:34'></a>\nAll tests passed for me.",
    "created_at": "2013-08-22T20:29:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181063",
    "user": "https://github.com/bsalisbury1"
}
```

<a id='comment:34'></a>
All tests passed for me.



---

archive/issue_comments_181064.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2013-08-22T20:29:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181064",
    "user": "https://github.com/bsalisbury1"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_events_041309.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-28T06:52:12Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12882#event-41309"
}
```



---

archive/issue_comments_181065.json:
```json
{
    "body": "**Merged:** sage-5.12.beta4",
    "created_at": "2013-08-28T06:52:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12882",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12882#issuecomment-181065",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.12.beta4
