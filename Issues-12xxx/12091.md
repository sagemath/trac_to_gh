# Issue 12091: chained inequalities bug in add_constraint to MixedIntegerLinearProgram

archive/issues_011919.json:
```json
{
    "assignees": [
        "https://github.com/nathanncohen"
    ],
    "body": "This ticket was originally started to address problems now dealt with in #13646. \nStill, the following (chained inequalities don't work) needs to be fixed:\n\n```\nsage: p = MixedIntegerLinearProgram()\nsage: b = p.new_variable()\nsage: b[0] <= b[1] <= 2  # This is not ok\nx_1 <= 2\nsage: (b[0] <= b[1] <= 2).constraints # Not ok\n[x_1, 2]\nsage: 1 >= b[1] >= 2*b[0] # Not ok (note that without #13646 this returns False)\n2 x_0 <= x_1\nsage: b[2] >= b[1] >= 2*b[0]  # Not ok\n2 x_0 <= x_1\n```\nSee also this [sage-support thread](http://permalink.gmane.org/gmane.comp.mathematics.sage.support/29948).\n\nApply\n* [attachment: trac_12091_constraints_parents.patch](https://github.com/sagemath/sage/files/ticket12091/trac_12091_constraints_parents.patch.gz)\n\nDepends on #13650\n\nCC:  @nathanncohen @kini @vbraun\n\nComponent: **linear programming**\n\nAuthor: **Volker Braun**\n\nReviewer: **Dmitrii Pasechnik**\n\nMerged: **sage-5.5.rc0**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/12091_\n\n",
    "closed_at": "2012-11-17T08:56:28Z",
    "created_at": "2011-11-27T17:33:11Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20linear%20programming",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "chained inequalities bug in add_constraint to MixedIntegerLinearProgram",
    "type": "issue",
    "updated_at": "2012-11-17T08:56:28Z",
    "url": "https://github.com/sagemath/sage/issues/12091",
    "user": "https://github.com/dimpase"
}
```
This ticket was originally started to address problems now dealt with in #13646. 
Still, the following (chained inequalities don't work) needs to be fixed:

```
sage: p = MixedIntegerLinearProgram()
sage: b = p.new_variable()
sage: b[0] <= b[1] <= 2  # This is not ok
x_1 <= 2
sage: (b[0] <= b[1] <= 2).constraints # Not ok
[x_1, 2]
sage: 1 >= b[1] >= 2*b[0] # Not ok (note that without #13646 this returns False)
2 x_0 <= x_1
sage: b[2] >= b[1] >= 2*b[0]  # Not ok
2 x_0 <= x_1
```
See also this [sage-support thread](http://permalink.gmane.org/gmane.comp.mathematics.sage.support/29948).

Apply
* [attachment: trac_12091_constraints_parents.patch](https://github.com/sagemath/sage/files/ticket12091/trac_12091_constraints_parents.patch.gz)

Depends on #13650

CC:  @nathanncohen @kini @vbraun

Component: **linear programming**

Author: **Volker Braun**

Reviewer: **Dmitrii Pasechnik**

Merged: **sage-5.5.rc0**

_Issue created by migration from https://trac.sagemath.org/ticket/12091_





---

archive/issue_events_162277.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2011-11-27T17:33:11Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "milestone_number": null,
    "milestone_title": "sage-5.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12091#event-162277"
}
```



---

archive/issue_events_162278.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2011-11-27T17:33:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20linear%20programming",
    "label_color": "0000ff",
    "label_name": "c: linear programming",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12091#event-162278"
}
```



---

archive/issue_events_162279.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2011-11-27T17:33:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20critical%20/%202",
    "label_color": "ff7700",
    "label_name": "p: critical / 2",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12091#event-162279"
}
```



---

archive/issue_events_162280.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2011-11-27T17:33:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12091#event-162280"
}
```



---

archive/issue_events_162281.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2011-11-27T17:33:11Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "subject": "https://github.com/dimpase",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12091#event-162281"
}
```



---

archive/issue_comments_128887.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI spent days already on this problem, so I should at least update the ticket. This does not work because of.... that :\n\n```\nsage: p = MixedIntegerLinearProgram()\nsage: b = p.new_variable()\nsage: b[2] + b[4] >= 5\n5 <= x_0 +x_1\nsage: 5 <= b[2] + b[4]\nTrue\n```\n\nIt is as easy as that. And of course, calling ``p.add_constraint(True)`` can not do anything useful. That comes from the fact that the way it is implemented the comparison methods I wrote for the LP variables are totally ignored when there is an integer on the left of the equation.\n\nI went through hell (aka the coercion system) to make it work, and after getting back from hell (writing new classes, using categories, parents objets, elements objects, ...) Sage finally understood that it has to coerce integers to \"LinearFunction\" objects before applying the ``<=`` operation.\n\nI was happy at this point. And then I noticed that when I typed ``3*b[i]`` in Sage, it first converted the \"3\" to a ``LinearFunction`` object and then tried to multiply linear functions between themselves. And multiply linear functions is *never* a good idea.\n\nSo unless there is a magical way to make it work (without destroying all the code... I mean, even reaching that former point amounted to something like 100 additional lines of code totally exclusively dealing with categories and coercion), I'd stand for big \"DO NOT PUT AN INTEGER BY ITSELF ON THE LEFT SIDE OF A LP INEQUALITY\" in the doc.\n\nBut I'd prefer to find a magical way, of course..\n\nNathann",
    "created_at": "2012-02-20T08:40:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12091#issuecomment-128887",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:2" align="right">comment:2</div>

I spent days already on this problem, so I should at least update the ticket. This does not work because of.... that :

```
sage: p = MixedIntegerLinearProgram()
sage: b = p.new_variable()
sage: b[2] + b[4] >= 5
5 <= x_0 +x_1
sage: 5 <= b[2] + b[4]
True
```

It is as easy as that. And of course, calling ``p.add_constraint(True)`` can not do anything useful. That comes from the fact that the way it is implemented the comparison methods I wrote for the LP variables are totally ignored when there is an integer on the left of the equation.

I went through hell (aka the coercion system) to make it work, and after getting back from hell (writing new classes, using categories, parents objets, elements objects, ...) Sage finally understood that it has to coerce integers to "LinearFunction" objects before applying the ``<=`` operation.

I was happy at this point. And then I noticed that when I typed ``3*b[i]`` in Sage, it first converted the "3" to a ``LinearFunction`` object and then tried to multiply linear functions between themselves. And multiply linear functions is *never* a good idea.

So unless there is a magical way to make it work (without destroying all the code... I mean, even reaching that former point amounted to something like 100 additional lines of code totally exclusively dealing with categories and coercion), I'd stand for big "DO NOT PUT AN INTEGER BY ITSELF ON THE LEFT SIDE OF A LP INEQUALITY" in the doc.

But I'd prefer to find a magical way, of course..

Nathann



---

archive/issue_comments_128888.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -30,3 +30,21 @@\n   x_1 is a continuous variable (min=0.0, max=+oo)\n ```\n \n+The bug is in `sage.numerical.mip.LinearConstraint` and `sage.numerical.mip.LinearFunction`. More examples:\n+\n+```\n+sage: p = MixedIntegerLinearProgram()\n+sage: b = p.new_variable()\n+sage: b[0] <= b[1] <= 2  # This is not ok\n+x_1 <= 2\n+sage: (b[0] <= b[1] <= 2).constraints # Not ok\n+[x_1, 2]\n+sage: b[0] >= b[1] # This is ok\n+x_1 <= x_0\n+sage: 1 >= b[1]    # This is not since it starts with a constant\n+False\n+sage: 1 >= b[1] >= 2*b[0] # Not ok\n+False\n+sage: b[2] >= b[1] >= 2*b[0]  # Not ok\n+2 x_0 <= x_1\n+```\n``````\n",
    "created_at": "2012-02-20T13:42:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12091#issuecomment-128888",
    "user": "https://github.com/ppurka"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -30,3 +30,21 @@
   x_1 is a continuous variable (min=0.0, max=+oo)
 ```
 
+The bug is in `sage.numerical.mip.LinearConstraint` and `sage.numerical.mip.LinearFunction`. More examples:
+
+```
+sage: p = MixedIntegerLinearProgram()
+sage: b = p.new_variable()
+sage: b[0] <= b[1] <= 2  # This is not ok
+x_1 <= 2
+sage: (b[0] <= b[1] <= 2).constraints # Not ok
+[x_1, 2]
+sage: b[0] >= b[1] # This is ok
+x_1 <= x_0
+sage: 1 >= b[1]    # This is not since it starts with a constant
+False
+sage: 1 >= b[1] >= 2*b[0] # Not ok
+False
+sage: b[2] >= b[1] >= 2*b[0]  # Not ok
+2 x_0 <= x_1
+```
``````




---

archive/issue_comments_128889.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI might be clueless, but this asks a modification of the Sage pre-parser. The pre-parser might be able to add the crap necessary for the Hell (aka coersion framework) to freeze over and do the right thing...\n\nDima",
    "created_at": "2012-02-20T13:50:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12091#issuecomment-128889",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:4" align="right">comment:4</div>

I might be clueless, but this asks a modification of the Sage pre-parser. The pre-parser might be able to add the crap necessary for the Hell (aka coersion framework) to freeze over and do the right thing...

Dima



---

archive/issue_comments_128890.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@dimpase](#comment%3A4):\n> I might be clueless, but this asks a modification of the Sage pre-parser. The pre-parser might be able to add the crap necessary for the Hell (aka coersion framework) to freeze over and do the right thing...\n\nNot sure about the preparser. But I feel that at least some of the bugs (the examples I added) can be fixed by modifying the Linear* classes I mentioned. I had been hacking it for about a day, but I haven't yet got the right solution. The constants are indeed way more trickier to handle, since there seems to be no way of knowing when we have normal inequalities and when we have LP ones.",
    "created_at": "2012-02-20T13:55:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12091#issuecomment-128890",
    "user": "https://github.com/ppurka"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@dimpase](#comment%3A4):
> I might be clueless, but this asks a modification of the Sage pre-parser. The pre-parser might be able to add the crap necessary for the Hell (aka coersion framework) to freeze over and do the right thing...

Not sure about the preparser. But I feel that at least some of the bugs (the examples I added) can be fixed by modifying the Linear* classes I mentioned. I had been hacking it for about a day, but I haven't yet got the right solution. The constants are indeed way more trickier to handle, since there seems to be no way of knowing when we have normal inequalities and when we have LP ones.



---

archive/issue_comments_128891.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@ppurka](#comment%3A5):\n> The constants are indeed way more trickier to handle, since there seems to be no way of knowing when we have normal inequalities and when we have LP ones.\n\nHow come? The LP inequalities have LP variables. So one of the tokens will be such a variable...",
    "created_at": "2012-02-20T14:02:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12091#issuecomment-128891",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@ppurka](#comment%3A5):
> The constants are indeed way more trickier to handle, since there seems to be no way of knowing when we have normal inequalities and when we have LP ones.

How come? The LP inequalities have LP variables. So one of the tokens will be such a variable...



---

archive/issue_comments_128892.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@dimpase](#comment%3A6):\n> How come? The LP inequalities have LP variables. So one of the tokens will be such a variable...\n\nMy understanding is this:\n\nWhen you start with `5 <= b[0]` your program will see the *number* 5 not an object from the class `LinearConstraint` or `LinearFunction`. So, `LinearConstraint.__le__` won't be called. This is ok when you have the opposite `b[0] >= 5`.",
    "created_at": "2012-02-20T14:18:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12091#issuecomment-128892",
    "user": "https://github.com/ppurka"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@dimpase](#comment%3A6):
> How come? The LP inequalities have LP variables. So one of the tokens will be such a variable...

My understanding is this:

When you start with `5 <= b[0]` your program will see the *number* 5 not an object from the class `LinearConstraint` or `LinearFunction`. So, `LinearConstraint.__le__` won't be called. This is ok when you have the opposite `b[0] >= 5`.



---

archive/issue_comments_128893.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@ppurka](#comment%3A7):\n> Replying to [@dimpase](#comment%3A6):\n> > How come? The LP inequalities have LP variables. So one of the tokens will be such a variable...\n\n> \n> My understanding is this:\n> \n> When you start with `5 <= b[0]` your program will see the *number* 5 not an object from the class `LinearConstraint` or `LinearFunction`. So, `LinearConstraint.__le__` won't be called. This is ok when you have the opposite `b[0] >= 5`.\n\nOK, this just means that the preparser should keep looking further if he sees a constant...\nIMHO it's some kind of basic compiler/interpreter piece of technology.",
    "created_at": "2012-02-20T14:22:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12091#issuecomment-128893",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@ppurka](#comment%3A7):
> Replying to [@dimpase](#comment%3A6):
> > How come? The LP inequalities have LP variables. So one of the tokens will be such a variable...

> 
> My understanding is this:
> 
> When you start with `5 <= b[0]` your program will see the *number* 5 not an object from the class `LinearConstraint` or `LinearFunction`. So, `LinearConstraint.__le__` won't be called. This is ok when you have the opposite `b[0] >= 5`.

OK, this just means that the preparser should keep looking further if he sees a constant...
IMHO it's some kind of basic compiler/interpreter piece of technology.



---

archive/issue_comments_128894.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nWhy do you see the problem at the preparser level ? This kind of lines can also appear fron the inside of Sage's code, where the preparser does nothing.. Or am I mistaken ?\n\nNathann",
    "created_at": "2012-02-20T14:24:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12091#issuecomment-128894",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:9" align="right">comment:9</div>

Why do you see the problem at the preparser level ? This kind of lines can also appear fron the inside of Sage's code, where the preparser does nothing.. Or am I mistaken ?

Nathann



---

archive/issue_comments_128895.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@nathanncohen](#comment%3A9):\n> Why do you see the problem at the preparser level ? This kind of lines can also appear fron the inside of Sage's code, where the preparser does nothing.. Or am I mistaken ?\n\nNothing? Why? Surely you can use symbolic functions in Sage library code, why not? It gets preparsed all right.",
    "created_at": "2012-02-20T14:27:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12091#issuecomment-128895",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@nathanncohen](#comment%3A9):
> Why do you see the problem at the preparser level ? This kind of lines can also appear fron the inside of Sage's code, where the preparser does nothing.. Or am I mistaken ?

Nothing? Why? Surely you can use symbolic functions in Sage library code, why not? It gets preparsed all right.



---

archive/issue_comments_128896.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nOh, I thought the preparser was the piece of code that replaced 5 by Integer(5) when using the console, and that you had to rely on yourself when writing code from the inside of Sage. That's why I was convinced that the only way out of this mess was to deal with the coercion system.\n\nNathann",
    "created_at": "2012-02-20T14:29:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12091#issuecomment-128896",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:11" align="right">comment:11</div>

Oh, I thought the preparser was the piece of code that replaced 5 by Integer(5) when using the console, and that you had to rely on yourself when writing code from the inside of Sage. That's why I was convinced that the only way out of this mess was to deal with the coercion system.

Nathann



---

archive/issue_comments_128897.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@dimpase](#comment%3A10):\n> Replying to [@nathanncohen](#comment%3A9):\n> > Why do you see the problem at the preparser level ? This kind of lines can also appear fron the inside of Sage's code, where the preparser does nothing.. Or am I mistaken ?\n\n> \n> Nothing? Why? Surely you can use symbolic functions in Sage library code, why not? It gets preparsed all right.\n\nActually no. Not everything gets preparsed. I ran into this problem not long ago, where the `^` wasn't preparsed since it was in a separate file I was importing.",
    "created_at": "2012-02-20T14:30:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12091#issuecomment-128897",
    "user": "https://github.com/ppurka"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@dimpase](#comment%3A10):
> Replying to [@nathanncohen](#comment%3A9):
> > Why do you see the problem at the preparser level ? This kind of lines can also appear fron the inside of Sage's code, where the preparser does nothing.. Or am I mistaken ?

> 
> Nothing? Why? Surely you can use symbolic functions in Sage library code, why not? It gets preparsed all right.

Actually no. Not everything gets preparsed. I ran into this problem not long ago, where the `^` wasn't preparsed since it was in a separate file I was importing.



---

archive/issue_comments_128898.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nAFAIK nothing gets preparsed from the library. The library is pure Python, not \"Sage code\" (thankfully).",
    "created_at": "2012-02-20T14:34:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12091#issuecomment-128898",
    "user": "https://github.com/kini"
}
```

<div id="comment:13" align="right">comment:13</div>

AFAIK nothing gets preparsed from the library. The library is pure Python, not "Sage code" (thankfully).



---

archive/issue_comments_128899.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@kini](#comment%3A13):\n> AFAIK nothing gets preparsed from the library. The library is pure Python, not \"Sage code\" (thankfully).\n\nI recall in our MTH213 code we certainly used symbolic functions inside .py files. I might be delusional, however...",
    "created_at": "2012-02-20T14:43:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12091#issuecomment-128899",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@kini](#comment%3A13):
> AFAIK nothing gets preparsed from the library. The library is pure Python, not "Sage code" (thankfully).

I recall in our MTH213 code we certainly used symbolic functions inside .py files. I might be delusional, however...



---

archive/issue_comments_128900.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nWell I guess you can, but I don't think the manipulation of symbolic variables requires the preparser to do its job. I mean, adding LP variables is already some kind of symbolic computation and all it requires is to define `__add__`, `__mul__`, etc ...\n\nNathann",
    "created_at": "2012-02-20T14:45:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12091#issuecomment-128900",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:15" align="right">comment:15</div>

Well I guess you can, but I don't think the manipulation of symbolic variables requires the preparser to do its job. I mean, adding LP variables is already some kind of symbolic computation and all it requires is to define `__add__`, `__mul__`, etc ...

Nathann



---

archive/issue_comments_128901.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\ndimpase: if you mean the syntax\n\n```\nf(x) = x^2\n```\n\nthen no, we definitely did not use it in .py files :) But you certainly don't NEED the preparser for any Sage functionality. Well, unless you count the preparser itself as \"Sage functionality\". For example the above is equivalent to\n\n```python\nf = (x^2).function(x)\n```",
    "created_at": "2012-02-20T14:48:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12091#issuecomment-128901",
    "user": "https://github.com/kini"
}
```

<div id="comment:16" align="right">comment:16</div>

dimpase: if you mean the syntax

```
f(x) = x^2
```

then no, we definitely did not use it in .py files :) But you certainly don't NEED the preparser for any Sage functionality. Well, unless you count the preparser itself as "Sage functionality". For example the above is equivalent to

```python
f = (x^2).function(x)
```



---

archive/issue_comments_128902.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@kini](#comment%3A16):\n> we definitely did not use it in .py files :) But you certainly don't NEED the preparser for any Sage functionality. Well, unless you count the preparser itself as \"Sage functionality\". \n\nwell, anyway. Actually, I don't see why Sage library files can't be .sage file, is it some kind of religion?  (OK, you'd need to preparse them once, I guess).\n\nIt's obviously makes things unnecessarily verbose to rely upon Python's idea of what a well-formed mathematical expression might be.",
    "created_at": "2012-02-20T14:58:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12091#issuecomment-128902",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@kini](#comment%3A16):
> we definitely did not use it in .py files :) But you certainly don't NEED the preparser for any Sage functionality. Well, unless you count the preparser itself as "Sage functionality". 

well, anyway. Actually, I don't see why Sage library files can't be .sage file, is it some kind of religion?  (OK, you'd need to preparse them once, I guess).

It's obviously makes things unnecessarily verbose to rely upon Python's idea of what a well-formed mathematical expression might be.



---

archive/issue_comments_128903.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\n> well, anyway. Actually, I don't see why Sage library files can't be .sage file, is it some kind of religion?\n\nYeah, at some point we stopped blaming God for everything. We should do it again `:-D`\n\n> It's obviously makes things unnecessarily verbose to rely upon Python's idea of what a well-formed mathematical expression might be.\n\n+1\n\nThat's precisely why I had to create a \"Sum\" function for LP variables. Because I refused to add n variables in n^2 times, and that it is the only way to do it with `__add__` methods. And this \"Sum\" method fixes the problem but is a bad solution.\n\nNathann",
    "created_at": "2012-02-20T15:03:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12091#issuecomment-128903",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:18" align="right">comment:18</div>

> well, anyway. Actually, I don't see why Sage library files can't be .sage file, is it some kind of religion?

Yeah, at some point we stopped blaming God for everything. We should do it again `:-D`

> It's obviously makes things unnecessarily verbose to rely upon Python's idea of what a well-formed mathematical expression might be.

+1

That's precisely why I had to create a "Sum" function for LP variables. Because I refused to add n variables in n^2 times, and that it is the only way to do it with `__add__` methods. And this "Sum" method fixes the problem but is a bad solution.

Nathann



---

archive/issue_comments_128904.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nI disagree. The library should remain Python because \"Sage code\" is not a well defined language. In fact I would go so far to say that it is a complete ad-hoc hash. I try to avoid using it whenever I can.\n\nNathann: I don't see how that is an argument for including .sage files in the Sage library... or maybe it wasn't meant that way?",
    "created_at": "2012-02-20T15:08:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12091#issuecomment-128904",
    "user": "https://github.com/kini"
}
```

<div id="comment:19" align="right">comment:19</div>

I disagree. The library should remain Python because "Sage code" is not a well defined language. In fact I would go so far to say that it is a complete ad-hoc hash. I try to avoid using it whenever I can.

Nathann: I don't see how that is an argument for including .sage files in the Sage library... or maybe it wasn't meant that way?



---

archive/issue_comments_128905.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@kini](#comment%3A19):\n> I disagree. The library should remain Python because \"Sage code\" is not a well defined language. In fact I would go so far to say that it is a complete ad-hoc hash. I try to avoid using it whenever I can.\n> \n\nlet's make it well-defined then!",
    "created_at": "2012-02-20T15:12:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12091#issuecomment-128905",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@kini](#comment%3A19):
> I disagree. The library should remain Python because "Sage code" is not a well defined language. In fact I would go so far to say that it is a complete ad-hoc hash. I try to avoid using it whenever I can.
> 

let's make it well-defined then!



---

archive/issue_comments_128906.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\n> Nathann: I don't see how that is an argument for including .sage files in the Sage library... or maybe it wasn't meant that way?\n\nOh. Well, my \"+1\" was just about Dima's remark that what we were fighting in this situation was precisely Python's management of + / * - operators...  Looks like in this situation it is clearly our main problem `:-)`\n\nNathann",
    "created_at": "2012-02-20T15:14:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12091#issuecomment-128906",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:21" align="right">comment:21</div>

> Nathann: I don't see how that is an argument for including .sage files in the Sage library... or maybe it wasn't meant that way?

Oh. Well, my "+1" was just about Dima's remark that what we were fighting in this situation was precisely Python's management of + / * - operators...  Looks like in this situation it is clearly our main problem `:-)`

Nathann



---

archive/issue_comments_128907.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nThe problem with the `a <= b <= c` is actually a problem with python. According to [this](http://www.python.org/dev/peps/pep-0207/), chained inequalities behave as follows:\n\n```\n# Trying to do x < y < z\n             temp1 = x < y\n             if temp1:\n               return y < z\n             else:\n               return temp1\n```\nAccording to one of my colleagues this behavior is different in python-3 (and that python-3 has the behavior we want), but I haven't checked (I will need to install python-3).\n\nOne workaround is to explicitly group the inequalities. So, instead of inputting `a <= b <= c`, if we do `(a <= b) <= c` then it works. Since we are not moving to python-3 any time soon, the documentation should be updated to either discourage chained inequalities or to use explicitly grouped chained inequalities.",
    "created_at": "2012-04-05T14:42:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12091#issuecomment-128907",
    "user": "https://github.com/ppurka"
}
```

<div id="comment:22" align="right">comment:22</div>

The problem with the `a <= b <= c` is actually a problem with python. According to [this](http://www.python.org/dev/peps/pep-0207/), chained inequalities behave as follows:

```
# Trying to do x < y < z
             temp1 = x < y
             if temp1:
               return y < z
             else:
               return temp1
```
According to one of my colleagues this behavior is different in python-3 (and that python-3 has the behavior we want), but I haven't checked (I will need to install python-3).

One workaround is to explicitly group the inequalities. So, instead of inputting `a <= b <= c`, if we do `(a <= b) <= c` then it works. Since we are not moving to python-3 any time soon, the documentation should be updated to either discourage chained inequalities or to use explicitly grouped chained inequalities.



---

archive/issue_comments_128908.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nThis can be closed as a duplicate as soon as #13646 is done.",
    "created_at": "2012-10-24T16:08:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12091#issuecomment-128908",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:23" align="right">comment:23</div>

This can be closed as a duplicate as soon as #13646 is done.



---

archive/issue_comments_128909.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@dimpase](#comment%3A23):\n> This can be closed as a duplicate as soon as #13646 is done. \n\nNope. The problem with the chained inequalities still remains.",
    "created_at": "2012-10-24T16:09:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12091#issuecomment-128909",
    "user": "https://github.com/ppurka"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@dimpase](#comment%3A23):
> This can be closed as a duplicate as soon as #13646 is done. 

Nope. The problem with the chained inequalities still remains.



---

archive/issue_events_162282.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-10-24T22:09:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20critical%20/%202",
    "label_color": "ff7700",
    "label_name": "p: critical / 2",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12091#event-162282"
}
```



---

archive/issue_events_162283.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-10-24T22:09:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12091#event-162283"
}
```



---

archive/issue_comments_128910.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,36 +1,5 @@\n-constraints with 0 on one size of an inequality get lost, somehow:\n-\n-```\n-sage: p = MixedIntegerLinearProgram(maximization=True)\n-sage: A = p.new_variable()\n-sage: p.add_constraint(A[0]==1)\n-sage: p.add_constraint(0<= A[1]-A[0])\n-sage: p.show()\n-Maximization:\n- \n-Constraints:\n-  1.0 <= x_0 <= 1.0\n-Variables:\n-  x_0 is a continuous variable (min=0.0, max=+oo)\n-  x_1 is a continuous variable (min=0.0, max=+oo)\n-```\n-\n-homogenizing the constraint fixes this problem:\n-\n-```\n-sage: p.add_constraint(0*A[0]<= A[1]-A[0])\n-sage: p.show()\n-Maximization:\n- \n-Constraints:\n-  1.0 <= x_0 <= 1.0\n-  x_0 -x_1 <= 0.0\n-Variables:\n-  x_0 is a continuous variable (min=0.0, max=+oo)\n-  x_1 is a continuous variable (min=0.0, max=+oo)\n-```\n-\n-The bug is in `sage.numerical.mip.LinearConstraint` and `sage.numerical.mip.LinearFunction`. More examples:\n+This ticket was originally started to address problems now dealt with in #13646. \n+Still, the following (chained inequalities don't work) needs to be fixed:\n \n ```\n sage: p = MixedIntegerLinearProgram()\n@@ -39,12 +8,9 @@\n x_1 <= 2\n sage: (b[0] <= b[1] <= 2).constraints # Not ok\n [x_1, 2]\n-sage: b[0] >= b[1] # This is ok\n-x_1 <= x_0\n-sage: 1 >= b[1]    # This is not since it starts with a constant\n-False\n-sage: 1 >= b[1] >= 2*b[0] # Not ok\n-False\n+sage: 1 >= b[1] >= 2*b[0] # Not ok (note that without #13646 this returns False)\n+2 x_0 <= x_1\n sage: b[2] >= b[1] >= 2*b[0]  # Not ok\n 2 x_0 <= x_1\n ```\n+See also this [sage-support thread](http://permalink.gmane.org/gmane.comp.mathematics.sage.support/29948).\n``````\n",
    "created_at": "2012-10-24T22:09:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12091#issuecomment-128910",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,36 +1,5 @@
-constraints with 0 on one size of an inequality get lost, somehow:
-
-```
-sage: p = MixedIntegerLinearProgram(maximization=True)
-sage: A = p.new_variable()
-sage: p.add_constraint(A[0]==1)
-sage: p.add_constraint(0<= A[1]-A[0])
-sage: p.show()
-Maximization:
- 
-Constraints:
-  1.0 <= x_0 <= 1.0
-Variables:
-  x_0 is a continuous variable (min=0.0, max=+oo)
-  x_1 is a continuous variable (min=0.0, max=+oo)
-```
-
-homogenizing the constraint fixes this problem:
-
-```
-sage: p.add_constraint(0*A[0]<= A[1]-A[0])
-sage: p.show()
-Maximization:
- 
-Constraints:
-  1.0 <= x_0 <= 1.0
-  x_0 -x_1 <= 0.0
-Variables:
-  x_0 is a continuous variable (min=0.0, max=+oo)
-  x_1 is a continuous variable (min=0.0, max=+oo)
-```
-
-The bug is in `sage.numerical.mip.LinearConstraint` and `sage.numerical.mip.LinearFunction`. More examples:
+This ticket was originally started to address problems now dealt with in #13646. 
+Still, the following (chained inequalities don't work) needs to be fixed:
 
 ```
 sage: p = MixedIntegerLinearProgram()
@@ -39,12 +8,9 @@
 x_1 <= 2
 sage: (b[0] <= b[1] <= 2).constraints # Not ok
 [x_1, 2]
-sage: b[0] >= b[1] # This is ok
-x_1 <= x_0
-sage: 1 >= b[1]    # This is not since it starts with a constant
-False
-sage: 1 >= b[1] >= 2*b[0] # Not ok
-False
+sage: 1 >= b[1] >= 2*b[0] # Not ok (note that without #13646 this returns False)
+2 x_0 <= x_1
 sage: b[2] >= b[1] >= 2*b[0]  # Not ok
 2 x_0 <= x_1
 ```
+See also this [sage-support thread](http://permalink.gmane.org/gmane.comp.mathematics.sage.support/29948).
``````




---

archive/issue_events_162284.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-10-24T22:09:02Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "title_is": "chained inequalities bug in add_constraint to MixedIntegerLinearProgram",
    "title_was": "bug in add_constraint to MixedIntegerLinearProgram",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12091#event-162284"
}
```



---

archive/issue_comments_128911.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nPatch fixes chained constraints:\n\n```\n    sage: p = MixedIntegerLinearProgram()\n    sage: b = p.new_variable()\n    sage: b[0] <= b[1] <= 2\n    x_0 <= x_1 <= 2\n    sage: list(b[0] <= b[1] <= 2)\n    [x_0, x_1, 2]\n    sage: 1 >= b[1] >= 2*b[0]\n    2*x_0 <= x_1 <= 1\n    sage: b[2] >= b[1] >= 2*b[0]\n    2*x_0 <= x_1 <= x_2\n```",
    "created_at": "2012-10-25T21:22:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12091#issuecomment-128911",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:26" align="right">comment:26</div>

Patch fixes chained constraints:

```
    sage: p = MixedIntegerLinearProgram()
    sage: b = p.new_variable()
    sage: b[0] <= b[1] <= 2
    x_0 <= x_1 <= 2
    sage: list(b[0] <= b[1] <= 2)
    [x_0, x_1, 2]
    sage: 1 >= b[1] >= 2*b[0]
    2*x_0 <= x_1 <= 1
    sage: b[2] >= b[1] >= 2*b[0]
    2*x_0 <= x_1 <= x_2
```



---

archive/issue_comments_128912.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@vbraun](#comment%3A26):\n> Patch fixes chained constraints:\n\nindeed! What about more convoluted cases:\n\n```\nsage: b[0] <= 555/11*b[1] >= 2\n2 <= x_0 <= 555/11*x_1\nsage: b[0] <= 555/11*b[1] == 2\n555/11*x_1 == 2\n```\nthe 1st one ought to become 2 inequalities, and the 2nd an inequality and an equation.\nIn both cases, the behaviour is rather strange...\n\nWell, I don't know how easy is to make these work, or at least throw an error.",
    "created_at": "2012-10-26T09:28:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12091#issuecomment-128912",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@vbraun](#comment%3A26):
> Patch fixes chained constraints:

indeed! What about more convoluted cases:

```
sage: b[0] <= 555/11*b[1] >= 2
2 <= x_0 <= 555/11*x_1
sage: b[0] <= 555/11*b[1] == 2
555/11*x_1 == 2
```
the 1st one ought to become 2 inequalities, and the 2nd an inequality and an equation.
In both cases, the behaviour is rather strange...

Well, I don't know how easy is to make these work, or at least throw an error.



---

archive/issue_comments_128913.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nI agree that it is odd behavior. The whole idea of automatically converting all inequalities into less-or-equal is broken, even before my patch:\n\n```\nsage: (b[0] <= b[1]) >= b[2]\nx_2 <= x_0 <= x_1\n```\nInequalities need to remember `>=` vs. `<=` for us to be able to raise an error. The second example is a bug in my patch.",
    "created_at": "2012-10-26T09:46:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12091#issuecomment-128913",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:28" align="right">comment:28</div>

I agree that it is odd behavior. The whole idea of automatically converting all inequalities into less-or-equal is broken, even before my patch:

```
sage: (b[0] <= b[1]) >= b[2]
x_2 <= x_0 <= x_1
```
Inequalities need to remember `>=` vs. `<=` for us to be able to raise an error. The second example is a bug in my patch.



---

archive/issue_comments_128914.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nReplying to [@vbraun](#comment%3A28):\n> I agree that it is odd behavior. The whole idea of automatically converting all inequalities into less-or-equal is broken, even before my patch:\n> \n> ```\n> sage: (b[0] <= b[1]) >= b[2]\n> x_2 <= x_0 <= x_1\n> ```\n> Inequalities need to remember `>=` vs. `<=` for us to be able to raise an error. \n\nAnything wrong with having that much more in the inequalities class? \n\nPotentially one would also want to have `<` and `>` and a proper integration with Sage's polyhedra.\n\nYour patch also inspires a grand plan for [linear matrix inequalities](http://en.wikipedia.org/wiki/Linear_matrix_inequality) in Sage...",
    "created_at": "2012-10-26T10:32:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12091#issuecomment-128914",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:29" align="right">comment:29</div>

Replying to [@vbraun](#comment%3A28):
> I agree that it is odd behavior. The whole idea of automatically converting all inequalities into less-or-equal is broken, even before my patch:
> 
> ```
> sage: (b[0] <= b[1]) >= b[2]
> x_2 <= x_0 <= x_1
> ```
> Inequalities need to remember `>=` vs. `<=` for us to be able to raise an error. 

Anything wrong with having that much more in the inequalities class? 

Potentially one would also want to have `<` and `>` and a proper integration with Sage's polyhedra.

Your patch also inspires a grand plan for [linear matrix inequalities](http://en.wikipedia.org/wiki/Linear_matrix_inequality) in Sage...



---

archive/issue_comments_128915.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nI think mixed chained inequalities/equalities could be errored out. That would ensure that such obtuse inputs are taken care of.\n\nThe reason for providing chained inequalities is to actually give inequalities in the form `2 <= x[0] <= 3` or `2 >= x[1] >= 1`, instead of having to set them separately. These types of inequalities are quite common to encounter, and it helps the user if the mathematical expressions can be transferred to sage in a straightforward manner.\n\nExamples like `x[0] <= x[1] >= x[2]` or `x[0] <= x[1] == 2` are quite unusual. I have never seen such expressions come up naturally. The first example, for instance, says nothing about the relation between `x[0]` and `x[2]` and hence one would typically never encounter inequations (written) like that.",
    "created_at": "2012-10-26T11:05:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12091#issuecomment-128915",
    "user": "https://github.com/ppurka"
}
```

<div id="comment:30" align="right">comment:30</div>

I think mixed chained inequalities/equalities could be errored out. That would ensure that such obtuse inputs are taken care of.

The reason for providing chained inequalities is to actually give inequalities in the form `2 <= x[0] <= 3` or `2 >= x[1] >= 1`, instead of having to set them separately. These types of inequalities are quite common to encounter, and it helps the user if the mathematical expressions can be transferred to sage in a straightforward manner.

Examples like `x[0] <= x[1] >= x[2]` or `x[0] <= x[1] == 2` are quite unusual. I have never seen such expressions come up naturally. The first example, for instance, says nothing about the relation between `x[0]` and `x[2]` and hence one would typically never encounter inequations (written) like that.



---

archive/issue_comments_128916.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nI agree that one should raise an error. But to be able to do this you must not auto-convert to less-or-equal. And thats definitely doable ;-)",
    "created_at": "2012-10-26T11:40:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12091#issuecomment-128916",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:31" align="right">comment:31</div>

I agree that one should raise an error. But to be able to do this you must not auto-convert to less-or-equal. And thats definitely doable ;-)



---

archive/issue_comments_128917.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nReplying to [@vbraun](#comment%3A31):\n> I agree that one should raise an error. But to be able to do this you must not auto-convert to less-or-equal. And thats definitely doable ;-)\n\nHi Volker, will you work on this? Just to indicate the ticket status right.",
    "created_at": "2012-10-28T06:51:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12091#issuecomment-128917",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:32" align="right">comment:32</div>

Replying to [@vbraun](#comment%3A31):
> I agree that one should raise an error. But to be able to do this you must not auto-convert to less-or-equal. And thats definitely doable ;-)

Hi Volker, will you work on this? Just to indicate the ticket status right.



---

archive/issue_events_162285.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-10-28T06:51:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12091#event-162285"
}
```



---

archive/issue_comments_128918.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nProbably won't have time to work on this in the next two weeks...",
    "created_at": "2012-10-28T11:37:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12091#issuecomment-128918",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:33" align="right">comment:33</div>

Probably won't have time to work on this in the next two weeks...



---

archive/issue_comments_128919.json:
```json
{
    "body": "Updated patch",
    "created_at": "2012-11-06T17:41:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12091#issuecomment-128919",
    "user": "https://github.com/vbraun"
}
```

Updated patch



---

archive/issue_comments_128920.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nAttachment: **[trac_12091_constraints_parents.patch.gz](https://github.com/sagemath/sage/files/ticket12091/trac_12091_constraints_parents.patch.gz)**\n\nI've removed the \"cdef double c\" in `show()`, so the following works:\n\n```\n            sage: p = MixedIntegerLinearProgram(solver= 'ppl')\n            sage: x = p.new_variable()\n            sage: p.set_objective(x[1] + 1/2*x[2])\n            sage: p.add_constraint(-3/5*x[1] + 2/7*x[2], max=2/5)\n            sage: p.show()\n            Maximization:\n              x_0 + 1/2 x_1\n            Constraints:\n              constraint_0: -3/5 x_0 + 2/7 x_1 <= 2/5\n            Variables:\n              x_0 is a continuous variable (min=0, max=+oo)\n              x_1 is a continuous variable (min=0, max=+oo)\n```",
    "created_at": "2012-11-06T17:41:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12091#issuecomment-128920",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:34" align="right">comment:34</div>

Attachment: **[trac_12091_constraints_parents.patch.gz](https://github.com/sagemath/sage/files/ticket12091/trac_12091_constraints_parents.patch.gz)**

I've removed the "cdef double c" in `show()`, so the following works:

```
            sage: p = MixedIntegerLinearProgram(solver= 'ppl')
            sage: x = p.new_variable()
            sage: p.set_objective(x[1] + 1/2*x[2])
            sage: p.add_constraint(-3/5*x[1] + 2/7*x[2], max=2/5)
            sage: p.show()
            Maximization:
              x_0 + 1/2 x_1
            Constraints:
              constraint_0: -3/5 x_0 + 2/7 x_1 <= 2/5
            Variables:
              x_0 is a continuous variable (min=0, max=+oo)
              x_1 is a continuous variable (min=0, max=+oo)
```



---

archive/issue_events_162286.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-11-08T15:17:21Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "milestone_number": null,
    "milestone_title": "sage-5.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12091#event-162286"
}
```



---

archive/issue_events_162287.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-11-08T15:17:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "milestone_number": null,
    "milestone_title": "sage-5.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12091#event-162287"
}
```



---

archive/issue_events_162288.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-11-08T15:17:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12091#event-162288"
}
```



---

archive/issue_events_162289.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-11-08T15:17:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12091#event-162289"
}
```



---

archive/issue_comments_128921.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nAs far as I am concerned, better parsing of things like `x[0] <= x[1] >= x[2]` or `x[0] <= x[1] == 2` can wait till another ticket.",
    "created_at": "2012-11-08T15:22:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12091#issuecomment-128921",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:36" align="right">comment:36</div>

As far as I am concerned, better parsing of things like `x[0] <= x[1] >= x[2]` or `x[0] <= x[1] == 2` can wait till another ticket.



---

archive/issue_comments_128922.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -14,3 +14,6 @@\n 2 x_0 <= x_1\n ```\n See also this [sage-support thread](http://permalink.gmane.org/gmane.comp.mathematics.sage.support/29948).\n+\n+Apply\n+* [attachment: trac_12091_constraints_parents.patch](https://github.com/sagemath/sage/files/ticket12091/trac_12091_constraints_parents.patch.gz)\n``````\n",
    "created_at": "2012-11-08T15:22:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12091#issuecomment-128922",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -14,3 +14,6 @@
 2 x_0 <= x_1
 ```
 See also this [sage-support thread](http://permalink.gmane.org/gmane.comp.mathematics.sage.support/29948).
+
+Apply
+* [attachment: trac_12091_constraints_parents.patch](https://github.com/sagemath/sage/files/ticket12091/trac_12091_constraints_parents.patch.gz)
``````




---

archive/issue_comments_128923.json:
```json
{
    "body": "Dependencies: **13650**",
    "created_at": "2012-11-08T15:22:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12091#issuecomment-128923",
    "user": "https://github.com/dimpase"
}
```

Dependencies: **13650**



---

archive/issue_events_162290.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-11-08T15:22:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12091#event-162290"
}
```



---

archive/issue_events_162291.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-11-08T15:22:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12091#event-162291"
}
```



---

archive/issue_comments_128924.json:
```json
{
    "body": "Changed dependencies from **13650** to **#13650**",
    "created_at": "2012-11-09T09:41:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12091#issuecomment-128924",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **13650** to **#13650**



---

archive/issue_comments_128925.json:
```json
{
    "body": "Author: **Volker Braun**",
    "created_at": "2012-11-09T09:44:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12091#issuecomment-128925",
    "user": "https://github.com/jdemeyer"
}
```

Author: **Volker Braun**



---

archive/issue_comments_128926.json:
```json
{
    "body": "Reviewer: **Dmitrii Pasechnik**",
    "created_at": "2012-11-09T09:44:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12091#issuecomment-128926",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Dmitrii Pasechnik**



---

archive/issue_comments_128927.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nFair enough but can you make another ticket about invalid combinations? Otherwise its too easy to forget ;-)",
    "created_at": "2012-11-09T15:26:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12091#issuecomment-128927",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:39" align="right">comment:39</div>

Fair enough but can you make another ticket about invalid combinations? Otherwise its too easy to forget ;-)



---

archive/issue_comments_128928.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nReplying to [@vbraun](#comment%3A39):\n> Fair enough but can you make another ticket about invalid combinations? Otherwise its too easy to forget ;-)\n\nSure! Please see #13696.",
    "created_at": "2012-11-10T11:32:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12091#issuecomment-128928",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:40" align="right">comment:40</div>

Replying to [@vbraun](#comment%3A39):
> Fair enough but can you make another ticket about invalid combinations? Otherwise its too easy to forget ;-)

Sure! Please see #13696.



---

archive/issue_events_162292.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-17T08:56:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12091#event-162292"
}
```



---

archive/issue_events_162293.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-17T08:56:28Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12091#event-162293"
}
```



---

archive/issue_comments_128929.json:
```json
{
    "body": "Merged: **sage-5.5.rc0**",
    "created_at": "2012-11-17T08:56:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12091",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12091#issuecomment-128929",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.5.rc0**
