# Issue 12959: Improvements to Sets.WithRealizations

archive/issues_012787.json:
```json
{
    "body": "This is a follow up to #7980\n\n**Apply**:\n* [attachment:trac_12959-improve_with_realizations-fs.patch]\n* [attachment:trac_12959-doctest_fix-fs.patch]\n* [attachment:trac_12959-100_percent_coverage_for_algebras_with_basis-fs.patch]\n* [attachment:trac_12959-remove_lower_from_realization_name-fs.patch]\n\n**Assignee:** @nthiery\n\n**CC:**  sage-combinat chrisjamesberg @zabrocki\n\n**Keywords:** realizations, sd40\n\n**Reviewer:** Mike Zabrocki\n\n**Author:** Nicolas M. Thi\u00e9ry, Franco Saliola\n\n**Merged:** sage-5.3.beta0\n\n**Dependencies:** #12953\n\nIssue created by migration from https://trac.sagemath.org/ticket/12959\n\n",
    "closed_at": "2012-08-01T12:11:30Z",
    "created_at": "2012-05-17T06:58:24Z",
    "labels": [
        "component: categories",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.3",
    "title": "Improvements to Sets.WithRealizations",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12959",
    "user": "https://github.com/nthiery"
}
```
This is a follow up to #7980

**Apply**:
* [attachment:trac_12959-improve_with_realizations-fs.patch]
* [attachment:trac_12959-doctest_fix-fs.patch]
* [attachment:trac_12959-100_percent_coverage_for_algebras_with_basis-fs.patch]
* [attachment:trac_12959-remove_lower_from_realization_name-fs.patch]

**Assignee:** @nthiery

**CC:**  sage-combinat chrisjamesberg @zabrocki

**Keywords:** realizations, sd40

**Reviewer:** Mike Zabrocki

**Author:** Nicolas M. Thiéry, Franco Saliola

**Merged:** sage-5.3.beta0

**Dependencies:** #12953

Issue created by migration from https://trac.sagemath.org/ticket/12959





---

archive/attachments_017481.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_12959-improve_with_realizations-fs.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket12959/trac_12959-improve_with_realizations-fs.patch",
    "created_at": "2012-07-15T13:44:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12959",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/saliola"
}
```



---

archive/issue_comments_150817.json:
```json
{
    "body": "",
    "created_at": "2012-07-15T13:44:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12959#issuecomment-150817",
    "user": "https://github.com/saliola"
}
```





---

archive/issue_comments_150818.json:
```json
{
    "body": "**Changing keywords** from \"realizations\" to \"realizations, sd40\".",
    "created_at": "2012-07-15T13:47:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12959#issuecomment-150818",
    "user": "https://github.com/saliola"
}
```

**Changing keywords** from "realizations" to "realizations, sd40".



---

archive/issue_comments_150819.json:
```json
{
    "body": "**Changing author** from \"Nicolas M. Thi\u00e9ry, ...\" to \"Nicolas M. Thi\u00e9ry, Franco Saliola\".",
    "created_at": "2012-07-15T13:47:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12959#issuecomment-150819",
    "user": "https://github.com/saliola"
}
```

**Changing author** from "Nicolas M. Thiéry, ..." to "Nicolas M. Thiéry, Franco Saliola".



---

archive/issue_comments_150820.json:
```json
{
    "body": "<a id='comment:1'></a>\nImplement default methods for (With)Realizations that use the realization provided by the method a_realization for computations:\n\n- `AlgebrasWithBasis.ParentMethods.product` is modified to use\n  product_by_coercion if `product_on_basis` is not available\n- `Magmas.Realizations` added and\n  `Magmas.Realizations.ParentMethods.product_by_coercion` uses\n  `self.a_realization()`\n- `CommutativeAdditiveMonoids.WithRealizations` added and\n  `CommutativeAdditiveMonoids.WithRealizations.ParentMethods.zero`\n  returns `self.a_realization().zero()`\n- `Monoids.WithRealizations` added and `Monoids.WithRealizations.ParentMethods.one`\n  returns `self.a_realization().one()`\n- `Sets.WithRealizations.ParentMethods.inject_shorthands` : injects any\n  shorthands names for realizations provided in the `_shorthands` attribute\n- added `_shorthand` attribute to the example in\n  `sage.categories.example.with_realizations`\n\nAnd update `examples/with_realizations.py` accordingly.",
    "created_at": "2012-07-15T13:47:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12959#issuecomment-150820",
    "user": "https://github.com/saliola"
}
```

<a id='comment:1'></a>
Implement default methods for (With)Realizations that use the realization provided by the method a_realization for computations:

- `AlgebrasWithBasis.ParentMethods.product` is modified to use
  product_by_coercion if `product_on_basis` is not available
- `Magmas.Realizations` added and
  `Magmas.Realizations.ParentMethods.product_by_coercion` uses
  `self.a_realization()`
- `CommutativeAdditiveMonoids.WithRealizations` added and
  `CommutativeAdditiveMonoids.WithRealizations.ParentMethods.zero`
  returns `self.a_realization().zero()`
- `Monoids.WithRealizations` added and `Monoids.WithRealizations.ParentMethods.one`
  returns `self.a_realization().one()`
- `Sets.WithRealizations.ParentMethods.inject_shorthands` : injects any
  shorthands names for realizations provided in the `_shorthands` attribute
- added `_shorthand` attribute to the example in
  `sage.categories.example.with_realizations`

And update `examples/with_realizations.py` accordingly.



---

archive/issue_events_111016.json:
```json
{
    "actor": "https://github.com/saliola",
    "created_at": "2012-07-15T13:47:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/12959",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12959#event-111016"
}
```



---

archive/attachments_017482.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_12959-doctest_fix-fs.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket12959/trac_12959-doctest_fix-fs.patch",
    "created_at": "2012-07-15T14:48:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12959",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/saliola"
}
```



---

archive/issue_comments_150821.json:
```json
{
    "body": "",
    "created_at": "2012-07-15T14:48:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12959#issuecomment-150821",
    "user": "https://github.com/saliola"
}
```





---

archive/attachments_017483.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_12959-100_percent_coverage_for_algebras_with_basis-fs.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket12959/trac_12959-100_percent_coverage_for_algebras_with_basis-fs.patch",
    "created_at": "2012-07-23T18:54:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12959",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/saliola"
}
```



---

archive/issue_comments_150822.json:
```json
{
    "body": "100% doctest coverage for algebras_with_basis",
    "created_at": "2012-07-23T18:54:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12959#issuecomment-150822",
    "user": "https://github.com/saliola"
}
```

100% doctest coverage for algebras_with_basis



---

archive/issue_comments_150823.json:
```json
{
    "body": "<a id='comment:3'></a>\nMike pointed out that `algebras_with_basis.py` needed only 1 doctest to get 100% coverage, so this latest patch adds one.",
    "created_at": "2012-07-23T18:55:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12959#issuecomment-150823",
    "user": "https://github.com/saliola"
}
```

<a id='comment:3'></a>
Mike pointed out that `algebras_with_basis.py` needed only 1 doctest to get 100% coverage, so this latest patch adds one.



---

archive/attachments_017484.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_12959-remove_lower_from_realization_name-fs.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket12959/trac_12959-remove_lower_from_realization_name-fs.patch",
    "created_at": "2012-07-25T15:04:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12959",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/saliola"
}
```



---

archive/issue_comments_150824.json:
```json
{
    "body": "<a id='comment:4'></a>\nLatest patch switches to using the class name for determining the default realization name (currently, the class name is taken and it is rendered lowercase for some reason; there was a FIXME suggesting this should not be lowercased).",
    "created_at": "2012-07-25T15:04:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12959#issuecomment-150824",
    "user": "https://github.com/saliola"
}
```

<a id='comment:4'></a>
Latest patch switches to using the class name for determining the default realization name (currently, the class name is taken and it is rendered lowercase for some reason; there was a FIXME suggesting this should not be lowercased).



---

archive/issue_events_111017.json:
```json
{
    "actor": "https://github.com/zabrocki",
    "created_at": "2012-07-26T23:01:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/12959",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12959#event-111017"
}
```



---

archive/issue_events_111018.json:
```json
{
    "actor": "https://github.com/zabrocki",
    "created_at": "2012-07-26T23:01:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/12959",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12959#event-111018"
}
```



---

archive/issue_comments_150825.json:
```json
{
    "body": "<a id='comment:6'></a>\nPlease fill in your real name as Reviewer.",
    "created_at": "2012-07-27T20:43:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12959#issuecomment-150825",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'></a>
Please fill in your real name as Reviewer.



---

archive/issue_comments_150826.json:
```json
{
    "body": "**Reviewer:** Mike Zabrocki",
    "created_at": "2012-07-27T20:49:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12959#issuecomment-150826",
    "user": "https://github.com/saliola"
}
```

**Reviewer:** Mike Zabrocki



---

archive/issue_comments_150827.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,7 @@\n This is a follow up to #7980\n+\n+**Apply**:\n+* [attachment:trac_12959-improve_with_realizations-fs.patch]\n+* [attachment:trac_12959-doctest_fix-fs.patch]\n+* [attachment:trac_12959-100_percent_coverage_for_algebras_with_basis-fs.patch]\n+* [attachment:trac_12959-remove_lower_from_realization_name-fs.patch]\n``````\n",
    "created_at": "2012-07-27T21:15:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12959#issuecomment-150827",
    "user": "https://github.com/saliola"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,7 @@
 This is a follow up to #7980
+
+**Apply**:
+* [attachment:trac_12959-improve_with_realizations-fs.patch]
+* [attachment:trac_12959-doctest_fix-fs.patch]
+* [attachment:trac_12959-100_percent_coverage_for_algebras_with_basis-fs.patch]
+* [attachment:trac_12959-remove_lower_from_realization_name-fs.patch]
``````




---

archive/issue_events_111019.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-01T12:11:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/12959",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12959#event-111019"
}
```



---

archive/issue_events_111020.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-01T12:11:30Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12959",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12959#event-111020"
}
```



---

archive/issue_comments_150828.json:
```json
{
    "body": "**Merged:** sage-5.3.beta0",
    "created_at": "2012-08-01T12:11:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12959#issuecomment-150828",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.3.beta0



---

archive/issue_comments_150829.json:
```json
{
    "body": "<a id='comment:10'></a>\nFor the record: I imported the latest version of the patches in the Sage-Combinat queue, and rebased my functorial construction patch on top of it.\n\nCheers,",
    "created_at": "2012-08-03T16:15:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12959#issuecomment-150829",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:10'></a>
For the record: I imported the latest version of the patches in the Sage-Combinat queue, and rebased my functorial construction patch on top of it.

Cheers,



---

archive/issue_comments_150830.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [saliola](#comment%3A4):\n> Latest patch switches to using the class name for determining the default realization name (currently, the class name is taken and it is rendered lowercase for some reason; there was a FIXME suggesting this should not be lowercased).\n\n\nThere was a question mark at the end of the FIXME; so this was to be discussed! Oh well, since it's merged in, I guess we can just consider the discussion as closed.",
    "created_at": "2012-08-03T17:33:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12959#issuecomment-150830",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:11'></a>
Replying to [saliola](#comment%3A4):
> Latest patch switches to using the class name for determining the default realization name (currently, the class name is taken and it is rendered lowercase for some reason; there was a FIXME suggesting this should not be lowercased).


There was a question mark at the end of the FIXME; so this was to be discussed! Oh well, since it's merged in, I guess we can just consider the discussion as closed.
