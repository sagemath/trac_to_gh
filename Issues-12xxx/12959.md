# Issue 12959: Improvements to Sets.WithRealizations

archive/issues_012787.json:
```json
{
    "assignees": [
        "https://github.com/nthiery"
    ],
    "body": "<div id=\"comment:0\"></div>\n\nThis is a follow up to #7980\n\n**Apply**:\n* [attachment: trac_12959-improve_with_realizations-fs.patch](https://github.com/sagemath/sage/files/ticket12959/trac_12959-improve_with_realizations-fs.patch.gz)\n* [attachment: trac_12959-doctest_fix-fs.patch](https://github.com/sagemath/sage/files/ticket12959/trac_12959-doctest_fix-fs.patch.gz)\n* [attachment: trac_12959-100_percent_coverage_for_algebras_with_basis-fs.patch](https://github.com/sagemath/sage/files/ticket12959/trac_12959-100_percent_coverage_for_algebras_with_basis-fs.patch.gz)\n* [attachment: trac_12959-remove_lower_from_realization_name-fs.patch](https://github.com/sagemath/sage/files/ticket12959/trac_12959-remove_lower_from_realization_name-fs.patch.gz)\n\nDepends on #12953\n\nCC:  @sagetrac-sage-combinat @sagetrac-chrisjamesberg @zabrocki\n\nComponent: **categories**\n\nKeywords: **realizations, sd40**\n\nAuthor: **Nicolas M. Thi\u00e9ry, Franco Saliola**\n\nReviewer: **Mike Zabrocki**\n\nMerged: **sage-5.3.beta0**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/12959_\n\n",
    "closed_at": "2012-08-01T12:11:30Z",
    "created_at": "2012-05-17T06:58:24Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20categories",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Improvements to Sets.WithRealizations",
    "type": "issue",
    "updated_at": "2012-08-03T17:33:28Z",
    "url": "https://github.com/sagemath/sage/issues/12959",
    "user": "https://github.com/nthiery"
}
```
<div id="comment:0"></div>

This is a follow up to #7980

**Apply**:
* [attachment: trac_12959-improve_with_realizations-fs.patch](https://github.com/sagemath/sage/files/ticket12959/trac_12959-improve_with_realizations-fs.patch.gz)
* [attachment: trac_12959-doctest_fix-fs.patch](https://github.com/sagemath/sage/files/ticket12959/trac_12959-doctest_fix-fs.patch.gz)
* [attachment: trac_12959-100_percent_coverage_for_algebras_with_basis-fs.patch](https://github.com/sagemath/sage/files/ticket12959/trac_12959-100_percent_coverage_for_algebras_with_basis-fs.patch.gz)
* [attachment: trac_12959-remove_lower_from_realization_name-fs.patch](https://github.com/sagemath/sage/files/ticket12959/trac_12959-remove_lower_from_realization_name-fs.patch.gz)

Depends on #12953

CC:  @sagetrac-sage-combinat @sagetrac-chrisjamesberg @zabrocki

Component: **categories**

Keywords: **realizations, sd40**

Author: **Nicolas M. Thiéry, Franco Saliola**

Reviewer: **Mike Zabrocki**

Merged: **sage-5.3.beta0**

_Issue created by migration from https://trac.sagemath.org/ticket/12959_





---

archive/issue_events_177577.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2012-05-17T06:58:24Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12959",
    "milestone_number": null,
    "milestone_title": "sage-5.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12959#event-177577"
}
```



---

archive/issue_events_177578.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2012-05-17T06:58:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12959",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20categories",
    "label_color": "0000ff",
    "label_name": "c: categories",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12959#event-177578"
}
```



---

archive/issue_events_177579.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2012-05-17T06:58:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12959",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12959#event-177579"
}
```



---

archive/issue_events_177580.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2012-05-17T06:58:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12959",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12959#event-177580"
}
```



---

archive/issue_events_177581.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2012-05-17T06:58:24Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/12959",
    "subject": "https://github.com/nthiery",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12959#event-177581"
}
```



---

archive/issue_comments_146915.json:
```json
{
    "body": "Attachment: **[trac_12959-improve_with_realizations-fs.patch.gz](https://github.com/sagemath/sage/files/ticket12959/trac_12959-improve_with_realizations-fs.patch.gz)**",
    "created_at": "2012-07-15T13:44:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12959#issuecomment-146915",
    "user": "https://github.com/saliola"
}
```

Attachment: **[trac_12959-improve_with_realizations-fs.patch.gz](https://github.com/sagemath/sage/files/ticket12959/trac_12959-improve_with_realizations-fs.patch.gz)**



---

archive/issue_comments_146916.json:
```json
{
    "body": "Changed keywords from **realizations** to **realizations, sd40**",
    "created_at": "2012-07-15T13:47:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12959#issuecomment-146916",
    "user": "https://github.com/saliola"
}
```

Changed keywords from **realizations** to **realizations, sd40**



---

archive/issue_comments_146917.json:
```json
{
    "body": "Changed author from **Nicolas M. Thi\u00e9ry, ...** to **Nicolas M. Thi\u00e9ry, Franco Saliola**",
    "created_at": "2012-07-15T13:47:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12959#issuecomment-146917",
    "user": "https://github.com/saliola"
}
```

Changed author from **Nicolas M. Thiéry, ...** to **Nicolas M. Thiéry, Franco Saliola**



---

archive/issue_comments_146918.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nImplement default methods for (With)Realizations that use the realization provided by the method a_realization for computations:\n\n- `AlgebrasWithBasis.ParentMethods.product` is modified to use\n  product_by_coercion if `product_on_basis` is not available\n- `Magmas.Realizations` added and\n  `Magmas.Realizations.ParentMethods.product_by_coercion` uses\n  `self.a_realization()`\n- `CommutativeAdditiveMonoids.WithRealizations` added and\n  `CommutativeAdditiveMonoids.WithRealizations.ParentMethods.zero`\n  returns `self.a_realization().zero()`\n- `Monoids.WithRealizations` added and `Monoids.WithRealizations.ParentMethods.one`\n  returns `self.a_realization().one()`\n- `Sets.WithRealizations.ParentMethods.inject_shorthands` : injects any\n  shorthands names for realizations provided in the `_shorthands` attribute\n- added `_shorthand` attribute to the example in\n  `sage.categories.example.with_realizations`\n\nAnd update `examples/with_realizations.py` accordingly.",
    "created_at": "2012-07-15T13:47:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12959#issuecomment-146918",
    "user": "https://github.com/saliola"
}
```

<div id="comment:1" align="right">comment:1</div>

Implement default methods for (With)Realizations that use the realization provided by the method a_realization for computations:

- `AlgebrasWithBasis.ParentMethods.product` is modified to use
  product_by_coercion if `product_on_basis` is not available
- `Magmas.Realizations` added and
  `Magmas.Realizations.ParentMethods.product_by_coercion` uses
  `self.a_realization()`
- `CommutativeAdditiveMonoids.WithRealizations` added and
  `CommutativeAdditiveMonoids.WithRealizations.ParentMethods.zero`
  returns `self.a_realization().zero()`
- `Monoids.WithRealizations` added and `Monoids.WithRealizations.ParentMethods.one`
  returns `self.a_realization().one()`
- `Sets.WithRealizations.ParentMethods.inject_shorthands` : injects any
  shorthands names for realizations provided in the `_shorthands` attribute
- added `_shorthand` attribute to the example in
  `sage.categories.example.with_realizations`

And update `examples/with_realizations.py` accordingly.



---

archive/issue_events_177582.json:
```json
{
    "actor": "https://github.com/saliola",
    "created_at": "2012-07-15T13:47:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12959",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12959#event-177582"
}
```



---

archive/issue_comments_146919.json:
```json
{
    "body": "Attachment: **[trac_12959-doctest_fix-fs.patch.gz](https://github.com/sagemath/sage/files/ticket12959/trac_12959-doctest_fix-fs.patch.gz)**",
    "created_at": "2012-07-15T14:48:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12959#issuecomment-146919",
    "user": "https://github.com/saliola"
}
```

Attachment: **[trac_12959-doctest_fix-fs.patch.gz](https://github.com/sagemath/sage/files/ticket12959/trac_12959-doctest_fix-fs.patch.gz)**



---

archive/issue_comments_146920.json:
```json
{
    "body": "Attachment: **[trac_12959-100_percent_coverage_for_algebras_with_basis-fs.patch.gz](https://github.com/sagemath/sage/files/ticket12959/trac_12959-100_percent_coverage_for_algebras_with_basis-fs.patch.gz)**\n\n100% doctest coverage for algebras_with_basis",
    "created_at": "2012-07-23T18:54:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12959#issuecomment-146920",
    "user": "https://github.com/saliola"
}
```

Attachment: **[trac_12959-100_percent_coverage_for_algebras_with_basis-fs.patch.gz](https://github.com/sagemath/sage/files/ticket12959/trac_12959-100_percent_coverage_for_algebras_with_basis-fs.patch.gz)**

100% doctest coverage for algebras_with_basis



---

archive/issue_comments_146921.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nMike pointed out that `algebras_with_basis.py` needed only 1 doctest to get 100% coverage, so this latest patch adds one.",
    "created_at": "2012-07-23T18:55:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12959#issuecomment-146921",
    "user": "https://github.com/saliola"
}
```

<div id="comment:3" align="right">comment:3</div>

Mike pointed out that `algebras_with_basis.py` needed only 1 doctest to get 100% coverage, so this latest patch adds one.



---

archive/issue_comments_146922.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nAttachment: **[trac_12959-remove_lower_from_realization_name-fs.patch.gz](https://github.com/sagemath/sage/files/ticket12959/trac_12959-remove_lower_from_realization_name-fs.patch.gz)**\n\nLatest patch switches to using the class name for determining the default realization name (currently, the class name is taken and it is rendered lowercase for some reason; there was a FIXME suggesting this should not be lowercased).",
    "created_at": "2012-07-25T15:04:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12959#issuecomment-146922",
    "user": "https://github.com/saliola"
}
```

<div id="comment:4" align="right">comment:4</div>

Attachment: **[trac_12959-remove_lower_from_realization_name-fs.patch.gz](https://github.com/sagemath/sage/files/ticket12959/trac_12959-remove_lower_from_realization_name-fs.patch.gz)**

Latest patch switches to using the class name for determining the default realization name (currently, the class name is taken and it is rendered lowercase for some reason; there was a FIXME suggesting this should not be lowercased).



---

archive/issue_events_177583.json:
```json
{
    "actor": "https://github.com/zabrocki",
    "created_at": "2012-07-26T23:01:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12959",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12959#event-177583"
}
```



---

archive/issue_events_177584.json:
```json
{
    "actor": "https://github.com/zabrocki",
    "created_at": "2012-07-26T23:01:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12959",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12959#event-177584"
}
```



---

archive/issue_comments_146923.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nPlease fill in your real name as Reviewer.",
    "created_at": "2012-07-27T20:43:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12959#issuecomment-146923",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:6" align="right">comment:6</div>

Please fill in your real name as Reviewer.



---

archive/issue_comments_146924.json:
```json
{
    "body": "Reviewer: **Mike Zabrocki**",
    "created_at": "2012-07-27T20:49:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12959#issuecomment-146924",
    "user": "https://github.com/saliola"
}
```

Reviewer: **Mike Zabrocki**



---

archive/issue_comments_146925.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,7 @@\n This is a follow up to #7980\n+\n+**Apply**:\n+* [attachment: trac_12959-improve_with_realizations-fs.patch](https://github.com/sagemath/sage/files/ticket12959/trac_12959-improve_with_realizations-fs.patch.gz)\n+* [attachment: trac_12959-doctest_fix-fs.patch](https://github.com/sagemath/sage/files/ticket12959/trac_12959-doctest_fix-fs.patch.gz)\n+* [attachment: trac_12959-100_percent_coverage_for_algebras_with_basis-fs.patch](https://github.com/sagemath/sage/files/ticket12959/trac_12959-100_percent_coverage_for_algebras_with_basis-fs.patch.gz)\n+* [attachment: trac_12959-remove_lower_from_realization_name-fs.patch](https://github.com/sagemath/sage/files/ticket12959/trac_12959-remove_lower_from_realization_name-fs.patch.gz)\n``````\n",
    "created_at": "2012-07-27T21:15:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12959#issuecomment-146925",
    "user": "https://github.com/saliola"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,7 @@
 This is a follow up to #7980
+
+**Apply**:
+* [attachment: trac_12959-improve_with_realizations-fs.patch](https://github.com/sagemath/sage/files/ticket12959/trac_12959-improve_with_realizations-fs.patch.gz)
+* [attachment: trac_12959-doctest_fix-fs.patch](https://github.com/sagemath/sage/files/ticket12959/trac_12959-doctest_fix-fs.patch.gz)
+* [attachment: trac_12959-100_percent_coverage_for_algebras_with_basis-fs.patch](https://github.com/sagemath/sage/files/ticket12959/trac_12959-100_percent_coverage_for_algebras_with_basis-fs.patch.gz)
+* [attachment: trac_12959-remove_lower_from_realization_name-fs.patch](https://github.com/sagemath/sage/files/ticket12959/trac_12959-remove_lower_from_realization_name-fs.patch.gz)
``````




---

archive/issue_events_177585.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-01T12:11:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12959",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12959#event-177585"
}
```



---

archive/issue_events_177586.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-01T12:11:30Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/12959",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12959#event-177586"
}
```



---

archive/issue_comments_146926.json:
```json
{
    "body": "Merged: **sage-5.3.beta0**",
    "created_at": "2012-08-01T12:11:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12959#issuecomment-146926",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.3.beta0**



---

archive/issue_comments_146927.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nFor the record: I imported the latest version of the patches in the Sage-Combinat queue, and rebased my functorial construction patch on top of it.\n\nCheers,",
    "created_at": "2012-08-03T16:15:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12959#issuecomment-146927",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:10" align="right">comment:10</div>

For the record: I imported the latest version of the patches in the Sage-Combinat queue, and rebased my functorial construction patch on top of it.

Cheers,



---

archive/issue_comments_146928.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@saliola](#comment%3A4):\n> Latest patch switches to using the class name for determining the default realization name (currently, the class name is taken and it is rendered lowercase for some reason; there was a FIXME suggesting this should not be lowercased).\n\nThere was a question mark at the end of the FIXME; so this was to be discussed! Oh well, since it's merged in, I guess we can just consider the discussion as closed.",
    "created_at": "2012-08-03T17:33:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12959#issuecomment-146928",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@saliola](#comment%3A4):
> Latest patch switches to using the class name for determining the default realization name (currently, the class name is taken and it is rendered lowercase for some reason; there was a FIXME suggesting this should not be lowercased).

There was a question mark at the end of the FIXME; so this was to be discussed! Oh well, since it's merged in, I guess we can just consider the discussion as closed.
