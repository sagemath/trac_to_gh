# Issue 12729: decrease the size of SAGE_ROOT/install.log

archive/issues_012557.json:
```json
{
    "assignees": [],
    "body": "The main install.log file is huge, and most of its contents are reproduced, more helpfully, in the individual log files in spkg/log/. The attached patch removes most of its contents.\n\nI modified the mpir package so it would fail, and then built Sage with this patch. The install.log file looked like this:\n\n```\nInstalling GCC because your 'gcc' is not so recent.\nInstalling GCC because a Fortran compiler is missing.\n*** ALL ENVIRONMENT VARIABLES BEFORE BUILD: ***\n\n    [...snip...]\n\n***********************************************\ndir-0.1: installing. Log file: SAGE_ROOT/spkg/logs/dir-0.1.log.\n  dir-0.1: installed successfully.\nprereq-0.9: installing. Log file: SAGE_ROOT/spkg/logs/prereq-0.9.log.\n  prereq-0.9: installed successfully.\nbzip2-1.0.5: installing. Log file: SAGE_ROOT/spkg/logs/bzip2-1.0.5.log.\n  bzip2-1.0.5: installed successfully.\npatch-2.5.9.p2: installing. Log file: SAGE_ROOT/spkg/logs/patch-2.5.9.p2.log.\n  patch-2.5.9.p2: installed successfully.\niconv-1.13.1.p3: installing. Log file: SAGE_ROOT/spkg/logs/iconv-1.13.1.p3.log.\nzlib-1.2.5.p0: installing. Log file: SAGE_ROOT/spkg/logs/zlib-1.2.5.p0.log.\n  iconv-1.13.1.p3: installed successfully.\nmpir-2.1.3.p9: installing. Log file: SAGE_ROOT/spkg/logs/mpir-2.1.3.p9.log.\n  zlib-1.2.5.p0: installed successfully.\nmake[1]: *** [installed/mpir-2.1.3.p9] Error 1\n\nreal 0m38.531s\nuser 0m17.554s\nsys 0m10.304s\n```\nOn the screen, you do not see the list of environment variables or the status updates for each package (\"PKG: installing. Log file ...\"); instead, you see the ongoing build process for each package, just the way things are now.\n\n---\n\nTo make install.log small, apply [attachment:trac_12729-small-install-log.patch](https://github.com/sagemath/sage/files/ticket12729/trac_12729-small-install-log.patch) to the root repository.\n\nTo instead cut down on what is printed to the screen, apply [attachment:trac_12729-less-output.patch](https://github.com/sagemath/sage/files/ticket12729/trac_12729-less-output.patch) to the root repo.\n\nNote: this depends on #12369, so it might be best to grab the tarball in that ticket's description. You can then apply this right after unpacking the tarball.\n\nDepends on #12714\n\nDepends on #12369\n\n**Assignee:** GeorgSWeber\n\n**CC:**  @kini @roed314 @nexttime\n\n**Reviewer:** John Palmieri, Jeroen Demeyer\n\nIssue created by migration from https://trac.sagemath.org/ticket/12729\n\n",
    "closed_at": "2015-07-17T20:10:20Z",
    "created_at": "2012-03-22T16:52:20Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20build",
        "https://github.com/sagemath/sage/labels/minor",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/invalid"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "decrease the size of SAGE_ROOT/install.log",
    "type": "issue",
    "updated_at": "2015-09-06T17:27:50Z",
    "url": "https://github.com/sagemath/sage/issues/12729",
    "user": "https://github.com/jhpalmieri"
}
```
The main install.log file is huge, and most of its contents are reproduced, more helpfully, in the individual log files in spkg/log/. The attached patch removes most of its contents.

I modified the mpir package so it would fail, and then built Sage with this patch. The install.log file looked like this:

```
Installing GCC because your 'gcc' is not so recent.
Installing GCC because a Fortran compiler is missing.
*** ALL ENVIRONMENT VARIABLES BEFORE BUILD: ***

    [...snip...]

***********************************************
dir-0.1: installing. Log file: SAGE_ROOT/spkg/logs/dir-0.1.log.
  dir-0.1: installed successfully.
prereq-0.9: installing. Log file: SAGE_ROOT/spkg/logs/prereq-0.9.log.
  prereq-0.9: installed successfully.
bzip2-1.0.5: installing. Log file: SAGE_ROOT/spkg/logs/bzip2-1.0.5.log.
  bzip2-1.0.5: installed successfully.
patch-2.5.9.p2: installing. Log file: SAGE_ROOT/spkg/logs/patch-2.5.9.p2.log.
  patch-2.5.9.p2: installed successfully.
iconv-1.13.1.p3: installing. Log file: SAGE_ROOT/spkg/logs/iconv-1.13.1.p3.log.
zlib-1.2.5.p0: installing. Log file: SAGE_ROOT/spkg/logs/zlib-1.2.5.p0.log.
  iconv-1.13.1.p3: installed successfully.
mpir-2.1.3.p9: installing. Log file: SAGE_ROOT/spkg/logs/mpir-2.1.3.p9.log.
  zlib-1.2.5.p0: installed successfully.
make[1]: *** [installed/mpir-2.1.3.p9] Error 1

real 0m38.531s
user 0m17.554s
sys 0m10.304s
```
On the screen, you do not see the list of environment variables or the status updates for each package ("PKG: installing. Log file ..."); instead, you see the ongoing build process for each package, just the way things are now.

---

To make install.log small, apply [attachment:trac_12729-small-install-log.patch](https://github.com/sagemath/sage/files/ticket12729/trac_12729-small-install-log.patch) to the root repository.

To instead cut down on what is printed to the screen, apply [attachment:trac_12729-less-output.patch](https://github.com/sagemath/sage/files/ticket12729/trac_12729-less-output.patch) to the root repo.

Note: this depends on #12369, so it might be best to grab the tarball in that ticket's description. You can then apply this right after unpacking the tarball.

Depends on #12714

Depends on #12369

**Assignee:** GeorgSWeber

**CC:**  @kini @roed314 @nexttime

**Reviewer:** John Palmieri, Jeroen Demeyer

Issue created by migration from https://trac.sagemath.org/ticket/12729





---

archive/issue_comments_144799.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -31,3 +31,9 @@\n ```\n On the screen, you do not see the list of environment variables or the status updates for each package (\"PKG: installing. Log file ...\"); instead, you see the ongoing build process for each package, just the way things are now.\n \n+---\n+\n+Apply [attachment:trac_12729-small-install-log.patch](https://github.com/sagemath/sage/files/ticket12729/trac_12729-small-install-log.patch) to the root repository.\n+\n+Note: this depends on #12369, so it might be best to grab the tarball in that ticket's description. You can then apply this right after unpacking the tarball.\n+\n``````\n",
    "created_at": "2012-03-22T16:54:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12729#issuecomment-144799",
    "user": "https://github.com/jhpalmieri"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -31,3 +31,9 @@
 ```
 On the screen, you do not see the list of environment variables or the status updates for each package ("PKG: installing. Log file ..."); instead, you see the ongoing build process for each package, just the way things are now.
 
+---
+
+Apply [attachment:trac_12729-small-install-log.patch](https://github.com/sagemath/sage/files/ticket12729/trac_12729-small-install-log.patch) to the root repository.
+
+Note: this depends on #12369, so it might be best to grab the tarball in that ticket's description. You can then apply this right after unpacking the tarball.
+
``````




---

archive/issue_events_105798.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2012-03-22T16:54:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12729",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12729#event-105798"
}
```



---

archive/issue_comments_144800.json:
```json
{
    "body": "**Attachment:** [trac_12729-small-install-log.patch.gz](https://github.com/sagemath/sage/files/ticket12729/trac_12729-small-install-log.patch.gz)\n\nroot repo",
    "created_at": "2012-03-22T17:04:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12729#issuecomment-144800",
    "user": "https://github.com/jhpalmieri"
}
```

**Attachment:** [trac_12729-small-install-log.patch.gz](https://github.com/sagemath/sage/files/ticket12729/trac_12729-small-install-log.patch.gz)

root repo



---

archive/issue_comments_144801.json:
```json
{
    "body": "**Changing dependencies** from \"#12369\" to \"#12714, #12369\".",
    "created_at": "2012-03-22T17:06:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12729#issuecomment-144801",
    "user": "https://github.com/jhpalmieri"
}
```

**Changing dependencies** from "#12369" to "#12714, #12369".



---

archive/issue_comments_144802.json:
```json
{
    "body": "<a id='comment:2'></a>\n(As of this writing, the tarball in #12369 may need to be updated (taking #12714 into account) before the patch here applies cleanly. I'm making #12714 a dependency for this ticket to make this explicit, even though #12714 is already a dependency for #12369.)",
    "created_at": "2012-03-22T17:06:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12729#issuecomment-144802",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:2'></a>
(As of this writing, the tarball in #12369 may need to be updated (taking #12714 into account) before the patch here applies cleanly. I'm making #12714 a dependency for this ticket to make this explicit, even though #12714 is already a dependency for #12369.)



---

archive/issue_comments_144803.json:
```json
{
    "body": "<a id='comment:4'></a>\nWow, the dependencies are really weird... ;-)\n\nI was primarily thinking of by default reducing the verbosity level of ECL and setuptools etc. when I mentioned this recently.  (IIRC I gave some figures on the ticket we made tar extraction less verbose.)",
    "created_at": "2012-03-23T00:21:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12729#issuecomment-144803",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:4'></a>
Wow, the dependencies are really weird... ;-)

I was primarily thinking of by default reducing the verbosity level of ECL and setuptools etc. when I mentioned this recently.  (IIRC I gave some figures on the ticket we made tar extraction less verbose.)



---

archive/issue_comments_144804.json:
```json
{
    "body": "<a id='comment:5'></a>\nTo me it would also make more sense to reduce the (default) *screen* output; the size of `install.log` doesn't bother me much, although it doesn't hurt if that gets \"more readable\" as well.\n\n(For debugging parallel builds, it might still be necessary to [optionally] have the full install log as it is now.)",
    "created_at": "2012-03-23T00:31:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12729#issuecomment-144804",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:5'></a>
To me it would also make more sense to reduce the (default) *screen* output; the size of `install.log` doesn't bother me much, although it doesn't hurt if that gets "more readable" as well.

(For debugging parallel builds, it might still be necessary to [optionally] have the full install log as it is now.)



---

archive/issue_comments_144805.json:
```json
{
    "body": "<a id='comment:6'></a>\nOf course, just getting rid of MoinMoin (#12713) will cut down considerably on the size of the log file...\n\nWe could also add some more environment variables (:p) to control the output from the make process: what gets written to install.log, what gets written to the screen, etc. If we took my patch and interchanged various roles, writing just a little information to the screen and (optionally) writing more in install.log, there would be times when the installation might look stalled, especially with ATLAS or gcc. I guess we could write\n\n```\n    PKG: installing. Please wait; installation has not stalled. Log file: ....\n```\nbut the current level of feedback might be better.",
    "created_at": "2012-03-23T04:26:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12729#issuecomment-144805",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:6'></a>
Of course, just getting rid of MoinMoin (#12713) will cut down considerably on the size of the log file...

We could also add some more environment variables (:p) to control the output from the make process: what gets written to install.log, what gets written to the screen, etc. If we took my patch and interchanged various roles, writing just a little information to the screen and (optionally) writing more in install.log, there would be times when the installation might look stalled, especially with ATLAS or gcc. I guess we could write

```
    PKG: installing. Please wait; installation has not stalled. Log file: ....
```
but the current level of feedback might be better.



---

archive/issue_comments_144806.json:
```json
{
    "body": "<a id='comment:7'></a>\nOne easy way to decrease the size of install.log would be to bzip2 it... :)",
    "created_at": "2012-03-23T04:34:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12729#issuecomment-144806",
    "user": "https://github.com/kini"
}
```

<a id='comment:7'></a>
One easy way to decrease the size of install.log would be to bzip2 it... :)



---

archive/issue_comments_144807.json:
```json
{
    "body": "<a id='comment:8'></a>\nHere's a different patch. With it, install.log looks like it does now (large, with the output from the different processes all mixed together). The screen looks like this:\n\n```\n$ make\ncd spkg && env SAGE_PARALLEL_SPKG_BUILD='' ./install all 2>&1\n\nBuilding Sage, writing log to install.log. Each component of Sage\nalso logs its output into an individual log file, as indicated.\n\ndir-0.1: installing. Log file: spkg/logs/dir-0.1.log.\n  dir-0.1: installed successfully.\nprereq-0.9: installing. Log file: spkg/logs/prereq-0.9.log.\n  prereq-0.9: installed successfully.\nbzip2-1.0.5: installing. Log file: spkg/logs/bzip2-1.0.5.log.\n  bzip2-1.0.5: installed successfully.\npatch-2.5.9.p2: installing. Log file: spkg/logs/patch-2.5.9.p2.log.\n  patch-2.5.9.p2: installed successfully.\nzlib-1.2.5.p0: installing. Log file: spkg/logs/zlib-1.2.5.p0.log.\niconv-1.13.1.p3: installing. Log file: spkg/logs/iconv-1.13.1.p3.log.\n  iconv-1.13.1.p3: installed successfully.\nmpir-2.1.3.p9: installing. Log file: spkg/logs/mpir-2.1.3.p9.log.\n  zlib-1.2.5.p0: installed successfully.\nmake[1]: *** [installed/mpir-2.1.3.p9] Error 1\n\nreal\t0m28.860s\nuser\t0m17.394s\nsys\t0m9.852s\nError building Sage.\nmake: *** [build] Error 1\n$ \n```",
    "created_at": "2012-03-23T05:08:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12729#issuecomment-144807",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:8'></a>
Here's a different patch. With it, install.log looks like it does now (large, with the output from the different processes all mixed together). The screen looks like this:

```
$ make
cd spkg && env SAGE_PARALLEL_SPKG_BUILD='' ./install all 2>&1

Building Sage, writing log to install.log. Each component of Sage
also logs its output into an individual log file, as indicated.

dir-0.1: installing. Log file: spkg/logs/dir-0.1.log.
  dir-0.1: installed successfully.
prereq-0.9: installing. Log file: spkg/logs/prereq-0.9.log.
  prereq-0.9: installed successfully.
bzip2-1.0.5: installing. Log file: spkg/logs/bzip2-1.0.5.log.
  bzip2-1.0.5: installed successfully.
patch-2.5.9.p2: installing. Log file: spkg/logs/patch-2.5.9.p2.log.
  patch-2.5.9.p2: installed successfully.
zlib-1.2.5.p0: installing. Log file: spkg/logs/zlib-1.2.5.p0.log.
iconv-1.13.1.p3: installing. Log file: spkg/logs/iconv-1.13.1.p3.log.
  iconv-1.13.1.p3: installed successfully.
mpir-2.1.3.p9: installing. Log file: spkg/logs/mpir-2.1.3.p9.log.
  zlib-1.2.5.p0: installed successfully.
make[1]: *** [installed/mpir-2.1.3.p9] Error 1

real	0m28.860s
user	0m17.394s
sys	0m9.852s
Error building Sage.
make: *** [build] Error 1
$ 
```



---

archive/issue_comments_144808.json:
```json
{
    "body": "**Attachment:** [trac_12729-less-output.patch.gz](https://github.com/sagemath/sage/files/ticket12729/trac_12729-less-output.patch.gz)\n\nroot repo",
    "created_at": "2012-03-23T05:08:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12729#issuecomment-144808",
    "user": "https://github.com/jhpalmieri"
}
```

**Attachment:** [trac_12729-less-output.patch.gz](https://github.com/sagemath/sage/files/ticket12729/trac_12729-less-output.patch.gz)

root repo



---

archive/issue_comments_144809.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -33,7 +33,8 @@\n \n ---\n \n-Apply [attachment:trac_12729-small-install-log.patch](https://github.com/sagemath/sage/files/ticket12729/trac_12729-small-install-log.patch) to the root repository.\n+To make install.log small, apply [attachment:trac_12729-small-install-log.patch](https://github.com/sagemath/sage/files/ticket12729/trac_12729-small-install-log.patch) to the root repository.\n+\n+To instead cut down on what is printed to the screen, apply [attachment:trac_12729-less-output.patch](https://github.com/sagemath/sage/files/ticket12729/trac_12729-less-output.patch) to the root repo.\n \n Note: this depends on #12369, so it might be best to grab the tarball in that ticket's description. You can then apply this right after unpacking the tarball.\n-\n``````\n",
    "created_at": "2012-03-23T05:09:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12729#issuecomment-144809",
    "user": "https://github.com/jhpalmieri"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -33,7 +33,8 @@
 
 ---
 
-Apply [attachment:trac_12729-small-install-log.patch](https://github.com/sagemath/sage/files/ticket12729/trac_12729-small-install-log.patch) to the root repository.
+To make install.log small, apply [attachment:trac_12729-small-install-log.patch](https://github.com/sagemath/sage/files/ticket12729/trac_12729-small-install-log.patch) to the root repository.
+
+To instead cut down on what is printed to the screen, apply [attachment:trac_12729-less-output.patch](https://github.com/sagemath/sage/files/ticket12729/trac_12729-less-output.patch) to the root repo.
 
 Note: this depends on #12369, so it might be best to grab the tarball in that ticket's description. You can then apply this right after unpacking the tarball.
-
``````




---

archive/issue_comments_144810.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [@kini](#comment%3A7):\n> One easy way to decrease the size of install.log would be to bzip2 it... :)\n\nYou mean\n\n```sh\nnohup make build & ; tail -f install.log | bzip2 -c9\n```\n?",
    "created_at": "2012-03-23T09:03:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12729#issuecomment-144810",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:10'></a>
Replying to [@kini](#comment%3A7):
> One easy way to decrease the size of install.log would be to bzip2 it... :)

You mean

```sh
nohup make build & ; tail -f install.log | bzip2 -c9
```
?



---

archive/issue_comments_144811.json:
```json
{
    "body": "<a id='comment:11'></a>\nSince we're going to *generate* the effective `Makefile` anyway, I wouldn't patch `deps`, but only put dependencies (as its name suggests) into it, and flexibly generate the build *rules* on-the-fly, depending on what output / verbosity level is currently requested.\n\nI.e., `deps` would just contain lines like\n\n```make\n$(INST)/$(ATLAS): $(BASE) $(INST)/$(LAPACK) $(INST)/$(PYTHON) $(INST)/$(PATCH)\n \n$(INST)/$(BOEHM_GC): $(BASE) $(INST)/$(PATCH)\n\n$(INST)/$(BOOST_CROPPED): $(BASE) $(INST)/$(PATCH)\n \n$(INST)/$(CLIQUER): $(BASE) $(INST)/$(PATCH)\n \n$(INST)/$(TERMCAP): $(BASE) $(INST)/$(PATCH)\n```\nor, preferably:\n\n```make\n$(ATLAS): $(BASE) $(LAPACK) $(PYTHON) $(PATCH)\n \n$(BOEHM_GC): $(BASE) $(PATCH)\n\n$(BOOST_CROPPED): $(BASE) $(PATCH)\n \n$(CLIQUER): $(BASE) $(PATCH)\n \n$(TERMCAP): $(BASE) $(PATCH)\n```\nOr, for the example given:\n\n```make\n$(ATLAS) $(BOEHM_GC) $(BOOST_CROPPED) $(CLIQUER) $(TERMCAP): $(BASE) $(PATCH)\n\n$(ATLAS): $(LAPACK) $(PYTHON)\n```\n\n(In general, one could write *a single* `make` rule for building / installing all spkgs, probably with some changes to the directory structure though.)",
    "created_at": "2012-03-23T09:35:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12729#issuecomment-144811",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:11'></a>
Since we're going to *generate* the effective `Makefile` anyway, I wouldn't patch `deps`, but only put dependencies (as its name suggests) into it, and flexibly generate the build *rules* on-the-fly, depending on what output / verbosity level is currently requested.

I.e., `deps` would just contain lines like

```make
$(INST)/$(ATLAS): $(BASE) $(INST)/$(LAPACK) $(INST)/$(PYTHON) $(INST)/$(PATCH)
 
$(INST)/$(BOEHM_GC): $(BASE) $(INST)/$(PATCH)

$(INST)/$(BOOST_CROPPED): $(BASE) $(INST)/$(PATCH)
 
$(INST)/$(CLIQUER): $(BASE) $(INST)/$(PATCH)
 
$(INST)/$(TERMCAP): $(BASE) $(INST)/$(PATCH)
```
or, preferably:

```make
$(ATLAS): $(BASE) $(LAPACK) $(PYTHON) $(PATCH)
 
$(BOEHM_GC): $(BASE) $(PATCH)

$(BOOST_CROPPED): $(BASE) $(PATCH)
 
$(CLIQUER): $(BASE) $(PATCH)
 
$(TERMCAP): $(BASE) $(PATCH)
```
Or, for the example given:

```make
$(ATLAS) $(BOEHM_GC) $(BOOST_CROPPED) $(CLIQUER) $(TERMCAP): $(BASE) $(PATCH)

$(ATLAS): $(LAPACK) $(PYTHON)
```

(In general, one could write *a single* `make` rule for building / installing all spkgs, probably with some changes to the directory structure though.)



---

archive/issue_comments_144812.json:
```json
{
    "body": "<a id='comment:12'></a>\nI like the idea of the patch, but not the actual implementation, in particular the fact that `spkg/standard/deps` has to be changed and that file descriptor numbers are hard-coded.\n\nI might think about alternatives, but in any case this is a low-priority ticket for me.",
    "created_at": "2012-08-13T12:50:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12729#issuecomment-144812",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>
I like the idea of the patch, but not the actual implementation, in particular the fact that `spkg/standard/deps` has to be changed and that file descriptor numbers are hard-coded.

I might think about alternatives, but in any case this is a low-priority ticket for me.



---

archive/issue_comments_144813.json:
```json
{
    "body": "<a id='comment:13'></a>\nI like Leif's idea to do the modifications when creating the Makefile from `deps`. But it's also low priority for me.",
    "created_at": "2012-08-15T20:57:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12729#issuecomment-144813",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:13'></a>
I like Leif's idea to do the modifications when creating the Makefile from `deps`. But it's also low priority for me.



---

archive/issue_comments_144814.json:
```json
{
    "body": "<a id='comment:14'></a>\nNow that I think about this again, it is sometimes useful to have the full `install.log` like we have now, for debugging race conditions that exist in parallel builds.  With this patch applied, it would have been much harder to diagnose #13407 for example.  So consider this as a mild proposal to close this ticket as \"wontfix\".",
    "created_at": "2013-01-23T15:58:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12729#issuecomment-144814",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:14'></a>
Now that I think about this again, it is sometimes useful to have the full `install.log` like we have now, for debugging race conditions that exist in parallel builds.  With this patch applied, it would have been much harder to diagnose #13407 for example.  So consider this as a mild proposal to close this ticket as "wontfix".



---

archive/issue_comments_144815.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [@jdemeyer](#comment%3A14):\n> Now that I think about this again, it is sometimes useful to have the full `install.log` like we have now, for debugging race conditions that exist in parallel builds.  With this patch applied, it would have been much harder to diagnose #13407 for example.  So consider this as a mild proposal to close this ticket as \"wontfix\".\n\nWell, as mentioned, the amount of output (especially to the screen) should be *configurable*, which is IMHO feasable.\n\nThe *average user<sup>TM</sup>* will hardly be interested in what we produce now (while some kind of `install.log` could still be complete, also configurably);  buildbots should certainly create \"full\" logs.\n\nIf a user disables all full logs but afterwards reports some hardly reproducable error (presumably due to some race condition), he and we will have to live with that;  that's not much different to the frequent case where the logs (or further details regarding the build conditions) *somehow* got lost...",
    "created_at": "2013-01-23T16:24:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12729#issuecomment-144815",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:15'></a>
Replying to [@jdemeyer](#comment%3A14):
> Now that I think about this again, it is sometimes useful to have the full `install.log` like we have now, for debugging race conditions that exist in parallel builds.  With this patch applied, it would have been much harder to diagnose #13407 for example.  So consider this as a mild proposal to close this ticket as "wontfix".

Well, as mentioned, the amount of output (especially to the screen) should be *configurable*, which is IMHO feasable.

The *average user<sup>TM</sup>* will hardly be interested in what we produce now (while some kind of `install.log` could still be complete, also configurably);  buildbots should certainly create "full" logs.

If a user disables all full logs but afterwards reports some hardly reproducable error (presumably due to some race condition), he and we will have to live with that;  that's not much different to the frequent case where the logs (or further details regarding the build conditions) *somehow* got lost...



---

archive/issue_comments_144816.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [@nexttime](#comment%3A15):\n> Well, as mentioned, the amount of output (especially to the screen) should be *configurable*, which is IMHO feasable.\n\nSure, it's feasible but why would you ever be bothered by how much stuff is written to the screen?\n\n> The *average user<sup>TM</sup>* will hardly be interested in what we produce now\n\nWhich also implies that the average user doesn't care. Hence, the average user would be happy with the status quo.",
    "created_at": "2013-03-06T15:07:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12729#issuecomment-144816",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:16'></a>
Replying to [@nexttime](#comment%3A15):
> Well, as mentioned, the amount of output (especially to the screen) should be *configurable*, which is IMHO feasable.

Sure, it's feasible but why would you ever be bothered by how much stuff is written to the screen?

> The *average user<sup>TM</sup>* will hardly be interested in what we produce now

Which also implies that the average user doesn't care. Hence, the average user would be happy with the status quo.



---

archive/issue_events_105799.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-03-06T15:07:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12729",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12729#event-105799"
}
```



---

archive/issue_events_105800.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-03-06T15:07:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12729",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "008080",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12729#event-105800"
}
```



---

archive/issue_comments_144817.json:
```json
{
    "body": "<a id='comment:17'></a>\nFirst, I think this is not ready for review any more; it should be configurable, as Leif says. Second, working on this has extremely low priority. Third, I can think of one problem this could solve: you try to build Sage in parallel, and it fails to build. Which package failed? You can figure that out, but perhaps it should be more obvious.",
    "created_at": "2013-03-06T18:15:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12729#issuecomment-144817",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:17'></a>
First, I think this is not ready for review any more; it should be configurable, as Leif says. Second, working on this has extremely low priority. Third, I can think of one problem this could solve: you try to build Sage in parallel, and it fails to build. Which package failed? You can figure that out, but perhaps it should be more obvious.



---

archive/issue_events_105801.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12729",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12729#event-105801"
}
```



---

archive/issue_events_105802.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12729",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12729#event-105802"
}
```



---

archive/issue_events_105803.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12729",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12729#event-105803"
}
```



---

archive/issue_events_105804.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12729",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12729#event-105804"
}
```



---

archive/issue_events_105805.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12729",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12729#event-105805"
}
```



---

archive/issue_events_105806.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12729",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12729#event-105806"
}
```



---

archive/issue_events_105807.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12729",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12729#event-105807"
}
```



---

archive/issue_events_105808.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12729",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12729#event-105808"
}
```



---

archive/issue_comments_144818.json:
```json
{
    "body": "After reading through the comments on this ticket again, I am still convinced it should be closed as \"wontfix\". The few megabytes that this file takes is not a major problem and, as some comments note, the full log is still useful for debugging race conditions during a parallel build.\n\n> Third, I can think of one problem this could solve: you try to build Sage in parallel, and it fails to build. Which package failed? You can figure that out, but perhaps it should be more obvious.\n\nThis is now clearer since #14263: a list of failed packages (with log files) is output after the build fails.",
    "created_at": "2015-06-17T12:47:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12729#issuecomment-144818",
    "user": "https://github.com/jdemeyer"
}
```

After reading through the comments on this ticket again, I am still convinced it should be closed as "wontfix". The few megabytes that this file takes is not a major problem and, as some comments note, the full log is still useful for debugging race conditions during a parallel build.

> Third, I can think of one problem this could solve: you try to build Sage in parallel, and it fails to build. Which package failed? You can figure that out, but perhaps it should be more obvious.

This is now clearer since #14263: a list of failed packages (with log files) is output after the build fails.



---

archive/issue_comments_144819.json:
```json
{
    "body": "**Changing author** from \"John Palmieri\" to \"\".",
    "created_at": "2015-07-01T12:29:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12729#issuecomment-144819",
    "user": "https://github.com/jdemeyer"
}
```

**Changing author** from "John Palmieri" to "".



---

archive/issue_events_105809.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-07-01T12:29:30Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12729",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12729#event-105809"
}
```



---

archive/issue_comments_144820.json:
```json
{
    "body": "**Reviewer:** John Palmieri, Jeroen Demeyer",
    "created_at": "2015-07-01T12:29:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12729#issuecomment-144820",
    "user": "https://github.com/jdemeyer"
}
```

**Reviewer:** John Palmieri, Jeroen Demeyer



---

archive/issue_events_105810.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-07-01T12:29:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12729",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "008080",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12729#event-105810"
}
```



---

archive/issue_events_105811.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-07-01T12:29:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12729",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12729#event-105811"
}
```



---

archive/issue_events_105812.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-07-17T20:10:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12729",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12729#event-105812"
}
```



---

archive/issue_events_105813.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-07-17T20:10:20Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/12729",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12729#event-105813"
}
```



---

archive/issue_comments_144821.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -25,9 +25,9 @@\n   zlib-1.2.5.p0: installed successfully.\n make[1]: *** [installed/mpir-2.1.3.p9] Error 1\n \n-real\t0m38.531s\n-user\t0m17.554s\n-sys\t0m10.304s\n+real 0m38.531s\n+user 0m17.554s\n+sys 0m10.304s\n ```\n On the screen, you do not see the list of environment variables or the status updates for each package (\"PKG: installing. Log file ...\"); instead, you see the ongoing build process for each package, just the way things are now.\n \n``````\n",
    "created_at": "2015-09-06T17:27:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12729#issuecomment-144821",
    "user": "https://github.com/fchapoton"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -25,9 +25,9 @@
   zlib-1.2.5.p0: installed successfully.
 make[1]: *** [installed/mpir-2.1.3.p9] Error 1
 
-real	0m38.531s
-user	0m17.554s
-sys	0m10.304s
+real 0m38.531s
+user 0m17.554s
+sys 0m10.304s
 ```
 On the screen, you do not see the list of environment variables or the status updates for each package ("PKG: installing. Log file ..."); instead, you see the ongoing build process for each package, just the way things are now.
 
``````

