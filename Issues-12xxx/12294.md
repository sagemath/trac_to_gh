# Issue 12294: Failures in sage0 pexpect interface with specific length of $DOT_SAGE using a "screen" terminal

archive/issues_012122.json:
```json
{
    "body": "Assignee: @williamstein\n\nKeywords: sage0 pexpect\n\nIn similar spirit as #12221, the following is a **reproducible** failure on sage.math when the $HOME directory is set to `/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/home` using a \"screen\" terminal (with 138 columns if this matters):\n\n```\nsage -t  -force_lib devel/sage/sage/interfaces/sage0.py\n**********************************************************************\nFile \"/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/devel/sage-main/sage/interfaces/sage0.py\", line 448:\n    sage: F == sage0(F)._sage_()\nException raised:\n    Traceback (most recent call last):\n      File \"/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_20[4]>\", line 1, in <module>\n        F == sage0(F)._sage_()###line 448:\n    sage: F == sage0(F)._sage_()\n      File \"/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/local/lib/python/site-packages/sage/interfaces/sage0.py\", line 458, in _sage_\n        return load(P._local_tmpfile())\n      File \"sage_object.pyx\", line 775, in sage.structure.sage_object.load (sage/structure/sage_object.c:7937)\n    IOError: [Errno 2] No such file or directory: '/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/home/.sage//temp/sage.math.washington.edu/29758//interface//tmp29886.sobj'\n**********************************************************************\nFile \"/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/devel/sage-main/sage/interfaces/sage0.py\", line 466:\n    sage: four_gcd(6)\nExpected:\n    2\nGot:\n    <BLANKLINE>\n**********************************************************************\nFile \"/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/devel/sage-main/sage/interfaces/sage0.py\", line 489:\n    sage: sage0(4).gcd\nExpected:\n    <built-in method gcd of sage.rings.integer.Integer object at 0x...>\nGot:\n    <BLANKLINE>\n**********************************************************************\nFile \"/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/devel/sage-main/sage/interfaces/sage0.py\", line 515:\n    sage: half = reduce_load_element(s); half\nExpected:\n    1/2\nGot:\n    <BLANKLINE>\n**********************************************************************\nFile \"/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/devel/sage-main/sage/interfaces/sage0.py\", line 547:\n    sage: sage0_version() == version()\nExpected:\n    True\nGot:\n    False\n**********************************************************************\nFile \"/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/devel/sage-main/sage/interfaces/sage0.py\", line 174:\n    sage: print \"ignore this\";  sage0.cputime()     # random output\nException raised:\n    Traceback (most recent call last):\n      File \"/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_3[2]>\", line 1, in <module>\n        print \"ignore this\";  sage0.cputime()     # random output###line 174:\n    sage: print \"ignore this\";  sage0.cputime()     # random output\n      File \"/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/local/lib/python/site-packages/sage/interfaces/sage0.py\", line 185, in cputime\n        return float(s)\n    ValueError: could not convert string to float:\n**********************************************************************\nFile \"/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/devel/sage-main/sage/interfaces/sage0.py\", line 176:\n    sage: sage0('factor(2^157-1)')\nExpected:\n    852133201 * 60726444167 * 1654058017289 * 2134387368610417\nGot:\n    <BLANKLINE>\n**********************************************************************\nFile \"/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/devel/sage-main/sage/interfaces/sage0.py\", line 178:\n    sage: print \"ignore this\";  sage0.cputime()     # random output\nException raised:\n    Traceback (most recent call last):\n      File \"/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_3[4]>\", line 1, in <module>\n        print \"ignore this\";  sage0.cputime()     # random output###line 178:\n    sage: print \"ignore this\";  sage0.cputime()     # random output\n      File \"/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/local/lib/python/site-packages/sage/interfaces/sage0.py\", line 185, in cputime\n        return float(s)\n    ValueError: invalid literal for float(): 852133201 * 60726444167 * 1654058017289 * 2134387368610417\n**********************************************************************\nFile \"/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/devel/sage-main/sage/interfaces/sage0.py\", line 191:\n    sage: t = sage0.trait_names()\nException raised:\n    Traceback (most recent call last):\n      File \"/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_4[2]>\", line 1, in <module>\n        t = sage0.trait_names()###line 191:\n    sage: t = sage0.trait_names()\n      File \"/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/local/lib/python/site-packages/sage/interfaces/sage0.py\", line 197, in trait_names\n        return eval(self.eval('print repr(globals().keys())'))\n      File \"<string>\", line 0\n\n       ^\n    SyntaxError: unexpected EOF while parsing\n**********************************************************************\nFile \"/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/devel/sage-main/sage/interfaces/sage0.py\", line 192:\n    sage: len(t) > 100\nException raised:\n    Traceback (most recent call last):\n      File \"/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_4[3]>\", line 1, in <module>\n        len(t) > Integer(100)###line 192:\n    sage: len(t) > 100\n    NameError: name 't' is not defined\n**********************************************************************\nFile \"/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/devel/sage-main/sage/interfaces/sage0.py\", line 194:\n    sage: 'gcd' in t\nException raised:\n    Traceback (most recent call last):\n      File \"/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_4[4]>\", line 1, in <module>\n        'gcd' in t###line 194:\n    sage: 'gcd' in t\n    NameError: name 't' is not defined\n**********************************************************************\n```\n\nThis reproducible error is fixed by #12221.\n\nThe above error also sometimes happens in different circumstances in a non-reproducible way.  It is regularly seen on the buildbot for example.\n\nIssue created by migration from https://trac.sagemath.org/ticket/12294\n\n",
    "closed_at": "2012-02-24T18:39:09Z",
    "created_at": "2012-01-11T10:08:22Z",
    "labels": [
        "component: interfaces",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Failures in sage0 pexpect interface with specific length of $DOT_SAGE using a \"screen\" terminal",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12294",
    "user": "https://github.com/jdemeyer"
}
```
Assignee: @williamstein

Keywords: sage0 pexpect

In similar spirit as #12221, the following is a **reproducible** failure on sage.math when the $HOME directory is set to `/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/home` using a "screen" terminal (with 138 columns if this matters):

```
sage -t  -force_lib devel/sage/sage/interfaces/sage0.py
**********************************************************************
File "/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/devel/sage-main/sage/interfaces/sage0.py", line 448:
    sage: F == sage0(F)._sage_()
Exception raised:
    Traceback (most recent call last):
      File "/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_20[4]>", line 1, in <module>
        F == sage0(F)._sage_()###line 448:
    sage: F == sage0(F)._sage_()
      File "/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/local/lib/python/site-packages/sage/interfaces/sage0.py", line 458, in _sage_
        return load(P._local_tmpfile())
      File "sage_object.pyx", line 775, in sage.structure.sage_object.load (sage/structure/sage_object.c:7937)
    IOError: [Errno 2] No such file or directory: '/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/home/.sage//temp/sage.math.washington.edu/29758//interface//tmp29886.sobj'
**********************************************************************
File "/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/devel/sage-main/sage/interfaces/sage0.py", line 466:
    sage: four_gcd(6)
Expected:
    2
Got:
    <BLANKLINE>
**********************************************************************
File "/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/devel/sage-main/sage/interfaces/sage0.py", line 489:
    sage: sage0(4).gcd
Expected:
    <built-in method gcd of sage.rings.integer.Integer object at 0x...>
Got:
    <BLANKLINE>
**********************************************************************
File "/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/devel/sage-main/sage/interfaces/sage0.py", line 515:
    sage: half = reduce_load_element(s); half
Expected:
    1/2
Got:
    <BLANKLINE>
**********************************************************************
File "/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/devel/sage-main/sage/interfaces/sage0.py", line 547:
    sage: sage0_version() == version()
Expected:
    True
Got:
    False
**********************************************************************
File "/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/devel/sage-main/sage/interfaces/sage0.py", line 174:
    sage: print "ignore this";  sage0.cputime()     # random output
Exception raised:
    Traceback (most recent call last):
      File "/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_3[2]>", line 1, in <module>
        print "ignore this";  sage0.cputime()     # random output###line 174:
    sage: print "ignore this";  sage0.cputime()     # random output
      File "/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/local/lib/python/site-packages/sage/interfaces/sage0.py", line 185, in cputime
        return float(s)
    ValueError: could not convert string to float:
**********************************************************************
File "/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/devel/sage-main/sage/interfaces/sage0.py", line 176:
    sage: sage0('factor(2^157-1)')
Expected:
    852133201 * 60726444167 * 1654058017289 * 2134387368610417
Got:
    <BLANKLINE>
**********************************************************************
File "/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/devel/sage-main/sage/interfaces/sage0.py", line 178:
    sage: print "ignore this";  sage0.cputime()     # random output
Exception raised:
    Traceback (most recent call last):
      File "/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_3[4]>", line 1, in <module>
        print "ignore this";  sage0.cputime()     # random output###line 178:
    sage: print "ignore this";  sage0.cputime()     # random output
      File "/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/local/lib/python/site-packages/sage/interfaces/sage0.py", line 185, in cputime
        return float(s)
    ValueError: invalid literal for float(): 852133201 * 60726444167 * 1654058017289 * 2134387368610417
**********************************************************************
File "/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/devel/sage-main/sage/interfaces/sage0.py", line 191:
    sage: t = sage0.trait_names()
Exception raised:
    Traceback (most recent call last):
      File "/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_4[2]>", line 1, in <module>
        t = sage0.trait_names()###line 191:
    sage: t = sage0.trait_names()
      File "/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/local/lib/python/site-packages/sage/interfaces/sage0.py", line 197, in trait_names
        return eval(self.eval('print repr(globals().keys())'))
      File "<string>", line 0

       ^
    SyntaxError: unexpected EOF while parsing
**********************************************************************
File "/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/devel/sage-main/sage/interfaces/sage0.py", line 192:
    sage: len(t) > 100
Exception raised:
    Traceback (most recent call last):
      File "/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_4[3]>", line 1, in <module>
        len(t) > Integer(100)###line 192:
    sage: len(t) > 100
    NameError: name 't' is not defined
**********************************************************************
File "/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/devel/sage-main/sage/interfaces/sage0.py", line 194:
    sage: 'gcd' in t
Exception raised:
    Traceback (most recent call last):
      File "/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_4[4]>", line 1, in <module>
        'gcd' in t###line 194:
    sage: 'gcd' in t
    NameError: name 't' is not defined
**********************************************************************
```

This reproducible error is fixed by #12221.

The above error also sometimes happens in different circumstances in a non-reproducible way.  It is regularly seen on the buildbot for example.

Issue created by migration from https://trac.sagemath.org/ticket/12294





---

archive/issue_comments_140329.json:
```json
{
    "body": "This might very well be a duplicate of #12221.",
    "created_at": "2012-01-13T09:30:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12294",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12294#issuecomment-140329",
    "user": "https://github.com/jdemeyer"
}
```

This might very well be a duplicate of #12221.



---

archive/issue_comments_140330.json:
```json
{
    "body": "Changing priority from major to blocker.",
    "created_at": "2012-01-13T09:40:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12294",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12294#issuecomment-140330",
    "user": "https://github.com/jdemeyer"
}
```

Changing priority from major to blocker.



---

archive/issue_comments_140331.json:
```json
{
    "body": "Resolution: duplicate",
    "created_at": "2012-02-24T18:39:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12294",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12294#issuecomment-140331",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: duplicate



---

archive/issue_comments_140332.json:
```json
{
    "body": "Closing this as duplicate of #12221.",
    "created_at": "2012-02-24T18:39:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12294",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12294#issuecomment-140332",
    "user": "https://github.com/jdemeyer"
}
```

Closing this as duplicate of #12221.



---

archive/issue_events_032863.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-24T18:39:09Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12294",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12294#event-32863"
}
```



---

archive/issue_events_032864.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-24T18:39:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12294",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12294#event-32864"
}
```
