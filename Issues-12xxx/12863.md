# Issue 12863: Roots of polynomial dies with PariError: division by zero (27)

archive/issues_012691.json:
```json
{
    "body": "With a rather special polynomial of degree 32 with two roots of multiplicity 4, `roots()` dies with a PariError:\n\n```\nsage: R.<t> = PolynomialRing(ComplexField(2700), 1)\nsage: p = (special polynomial)\nsage: p.roots()\n... correct output ...\nsage: p.roots(ring=CDF)\n---------------------------------------------------------------------------\nPariError                                 Traceback (most recent call last)\n\n/home/vbraun/Sage/EllipticFibration/<ipython console> in <module>()\n\n/home/vbraun/opt/sage-5.0.beta13/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_element.so in sage.rings.polynomial.polynomial_element.Polynomial.roots (sage/rings/polynomial/polynomial_element.c:31077)()\n\n/home/vbraun/opt/sage-5.0.beta13/local/lib/python2.7/site-packages/sage/libs/pari/gen.so in sage.libs.pari.gen._pari_trap (sage/libs/pari/gen.c:49842)()\n\nPariError: division by zero (27)\n```\nFor a specific polynomial to trigger this, see [This is the Trac macro *attachment:test_roots_3.sage* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#attachment:test_roots_3.sage-macro)\n\nMight be related to #2418 \n\n**Assignee:** @williamstein\n\n**CC:**  @JohnCremona @williamstein\n\n**Keywords:** pari roots\n\n**Upstream:** Completely fixed; Fix reported upstream\n\n**Reviewer:** Peter Bruin\n\n**Resolution:** worksforme\n\nIssue created by migration from https://trac.sagemath.org/ticket/12863\n\n",
    "closed_at": "2013-10-31T08:30:42Z",
    "created_at": "2012-04-20T23:14:44Z",
    "labels": [
        "component: interfaces",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Roots of polynomial dies with PariError: division by zero (27)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12863",
    "user": "https://github.com/vbraun"
}
```
With a rather special polynomial of degree 32 with two roots of multiplicity 4, `roots()` dies with a PariError:

```
sage: R.<t> = PolynomialRing(ComplexField(2700), 1)
sage: p = (special polynomial)
sage: p.roots()
... correct output ...
sage: p.roots(ring=CDF)
---------------------------------------------------------------------------
PariError                                 Traceback (most recent call last)

/home/vbraun/Sage/EllipticFibration/<ipython console> in <module>()

/home/vbraun/opt/sage-5.0.beta13/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_element.so in sage.rings.polynomial.polynomial_element.Polynomial.roots (sage/rings/polynomial/polynomial_element.c:31077)()

/home/vbraun/opt/sage-5.0.beta13/local/lib/python2.7/site-packages/sage/libs/pari/gen.so in sage.libs.pari.gen._pari_trap (sage/libs/pari/gen.c:49842)()

PariError: division by zero (27)
```
For a specific polynomial to trigger this, see [This is the Trac macro *attachment:test_roots_3.sage* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#attachment:test_roots_3.sage-macro)

Might be related to #2418 

**Assignee:** @williamstein

**CC:**  @JohnCremona @williamstein

**Keywords:** pari roots

**Upstream:** Completely fixed; Fix reported upstream

**Reviewer:** Peter Bruin

**Resolution:** worksforme

Issue created by migration from https://trac.sagemath.org/ticket/12863





---

archive/issue_comments_193127.json:
```json
{
    "body": "example polynomial exhibiting the problem",
    "created_at": "2012-04-20T23:15:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12863#issuecomment-193127",
    "user": "https://github.com/vbraun"
}
```

example polynomial exhibiting the problem



---

archive/attachments_017338.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "test_roots_3.sage",
    "asset_url": "tarball://root/attachments/some-uuid/ticket12863/test_roots_3.sage",
    "created_at": "2012-04-20T23:20:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12863",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.sage",
    "user": "https://github.com/vbraun"
}
```



---

archive/issue_comments_193128.json:
```json
{
    "body": "<a id='comment:1'></a>\n",
    "created_at": "2012-04-20T23:20:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12863#issuecomment-193128",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:1'></a>




---

archive/issue_comments_193129.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"pari roots\".",
    "created_at": "2012-04-20T23:20:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12863#issuecomment-193129",
    "user": "https://github.com/vbraun"
}
```

**Changing keywords** from "" to "pari roots".



---

archive/issue_comments_193130.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-With a rather special polynomial of degree 32 with two roots with multiplicity 4, `roots()` dies with a PariError:\n+With a rather special polynomial of degree 32 with two roots of multiplicity 4, `roots()` dies with a PariError:\n \n ```\n sage: R.<t> = PolynomialRing(ComplexField(2700), 1)\n@@ -17,5 +17,6 @@\n \n PariError: division by zero (27)\n ```\n+For a specific polynomial to trigger this, see [This is the Trac macro *attachment:test_roots_3.sage* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#attachment:test_roots_3.sage-macro)\n \n Might be related to #2418 \n``````\n",
    "created_at": "2012-04-20T23:20:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12863#issuecomment-193130",
    "user": "https://github.com/vbraun"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-With a rather special polynomial of degree 32 with two roots with multiplicity 4, `roots()` dies with a PariError:
+With a rather special polynomial of degree 32 with two roots of multiplicity 4, `roots()` dies with a PariError:
 
 ```
 sage: R.<t> = PolynomialRing(ComplexField(2700), 1)
@@ -17,5 +17,6 @@
 
 PariError: division by zero (27)
 ```
+For a specific polynomial to trigger this, see [This is the Trac macro *attachment:test_roots_3.sage* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#attachment:test_roots_3.sage-macro)
 
 Might be related to #2418 
``````




---

archive/issue_comments_193131.json:
```json
{
    "body": "<a id='comment:2'></a>\nI've isolated a test case and reported the bug upstream at\n\nhttp://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1309",
    "created_at": "2012-04-28T20:29:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12863#issuecomment-193131",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:2'></a>
I've isolated a test case and reported the bug upstream at

http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1309



---

archive/issue_comments_193132.json:
```json
{
    "body": "**Changing upstream** from \"N/A\" to \"Reported upstream. Little or no feedback.\".",
    "created_at": "2012-04-28T20:29:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12863#issuecomment-193132",
    "user": "https://github.com/vbraun"
}
```

**Changing upstream** from "N/A" to "Reported upstream. Little or no feedback.".



---

archive/issue_comments_193133.json:
```json
{
    "body": "**Changing upstream** from \"Reported upstream. Little or no feedback.\" to \"Reported upstream. Developers acknowledge bug.\".",
    "created_at": "2012-04-30T16:36:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12863#issuecomment-193133",
    "user": "https://github.com/vbraun"
}
```

**Changing upstream** from "Reported upstream. Little or no feedback." to "Reported upstream. Developers acknowledge bug.".



---

archive/issue_comments_193134.json:
```json
{
    "body": "**Changing upstream** from \"Reported upstream. Developers acknowledge bug.\" to \"Fixed upstream, in a later stable release.\".",
    "created_at": "2012-05-02T13:47:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12863#issuecomment-193134",
    "user": "https://github.com/vbraun"
}
```

**Changing upstream** from "Reported upstream. Developers acknowledge bug." to "Fixed upstream, in a later stable release.".



---

archive/issue_comments_193135.json:
```json
{
    "body": "<a id='comment:4'></a>\nIt turns out that this was a floating point bug in pari's `sqrt()`. For the record:\n\nFixed in branches master (testing, commit d1eb887b21) and pari-2.5 (stable,\ncommit 1550af281).",
    "created_at": "2012-05-02T13:47:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12863#issuecomment-193135",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:4'></a>
It turns out that this was a floating point bug in pari's `sqrt()`. For the record:

Fixed in branches master (testing, commit d1eb887b21) and pari-2.5 (stable,
commit 1550af281).



---

archive/issue_events_040963.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12863",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12863#event-40963"
}
```



---

archive/issue_events_040964.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2013-10-30T16:32:40Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12863",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12863#event-40964"
}
```



---

archive/issue_events_040965.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2013-10-30T16:32:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12863",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12863#event-40965"
}
```



---

archive/issue_comments_193136.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2013-10-30T16:32:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12863#issuecomment-193136",
    "user": "https://github.com/pjbruin"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_193137.json:
```json
{
    "body": "**Changing upstream** from \"Fixed upstream, in a later stable release.\" to \"Completely fixed; Fix reported upstream\".",
    "created_at": "2013-10-30T16:32:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12863#issuecomment-193137",
    "user": "https://github.com/pjbruin"
}
```

**Changing upstream** from "Fixed upstream, in a later stable release." to "Completely fixed; Fix reported upstream".



---

archive/issue_comments_193138.json:
```json
{
    "body": "**Reviewer:** Peter Bruin",
    "created_at": "2013-10-30T16:34:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12863#issuecomment-193138",
    "user": "https://github.com/pjbruin"
}
```

**Reviewer:** Peter Bruin



---

archive/issue_comments_193139.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2013-10-30T16:34:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12863#issuecomment-193139",
    "user": "https://github.com/pjbruin"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_193140.json:
```json
{
    "body": "<a id='comment:7'></a>\nThis was fixed in PARI 2.5 (see [comment:4](#comment%3A4)), which has been in Sage for some time.",
    "created_at": "2013-10-30T16:34:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12863#issuecomment-193140",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:7'></a>
This was fixed in PARI 2.5 (see [comment:4](#comment%3A4)), which has been in Sage for some time.



---

archive/issue_comments_193141.json:
```json
{
    "body": "**Resolution:** worksforme",
    "created_at": "2013-10-31T08:30:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12863#issuecomment-193141",
    "user": "https://github.com/jdemeyer"
}
```

**Resolution:** worksforme



---

archive/issue_events_040966.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-10-31T08:30:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12863",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12863#event-40966"
}
```
