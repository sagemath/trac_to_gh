# Issue 12353: wrong comparison between RealIntervalField and RealField

archive/issues_012181.json:
```json
{
    "assignees": [
        "https://github.com/aghitza"
    ],
    "body": "<div id=\"comment:0\"></div>\n\non some machines we get the following:\n\n```\nsage: RealIntervalField(53)(-1) > RR(1)\nFalse\nsage: RealIntervalField(54)(-1) > RR(1)\nTrue\n```\nThe second answer `True` is clearly wrong.\n\nIf your machine gets the correct answer `False` in both cases, then it most probably gives:\n\n```\nsage: RealIntervalField(53)(1) > RR(-1)\nTrue\nsage: RealIntervalField(54)(1) > RR(-1)\nFalse\n```\nwhere the second answer `False` is wrong.\n\nCC:  @robertwb @williamstein\n\nComponent: **basic arithmetic**\n\nAuthor: **David Roe**\n\nReviewer: **Paul Zimmermann**\n\nMerged: **sage-5.0.beta4**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/12353_\n\n",
    "closed_at": "2012-02-14T14:22:14Z",
    "created_at": "2012-01-25T08:21:49Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20basic%20arithmetic",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "wrong comparison between RealIntervalField and RealField",
    "type": "issue",
    "updated_at": "2012-02-14T14:22:14Z",
    "url": "https://github.com/sagemath/sage/issues/12353",
    "user": "https://github.com/zimmermann6"
}
```
<div id="comment:0"></div>

on some machines we get the following:

```
sage: RealIntervalField(53)(-1) > RR(1)
False
sage: RealIntervalField(54)(-1) > RR(1)
True
```
The second answer `True` is clearly wrong.

If your machine gets the correct answer `False` in both cases, then it most probably gives:

```
sage: RealIntervalField(53)(1) > RR(-1)
True
sage: RealIntervalField(54)(1) > RR(-1)
False
```
where the second answer `False` is wrong.

CC:  @robertwb @williamstein

Component: **basic arithmetic**

Author: **David Roe**

Reviewer: **Paul Zimmermann**

Merged: **sage-5.0.beta4**

_Issue created by migration from https://trac.sagemath.org/ticket/12353_





---

archive/issue_events_166781.json:
```json
{
    "actor": "https://github.com/zimmermann6",
    "created_at": "2012-01-25T08:21:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "milestone_number": null,
    "milestone_title": "sage-5.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12353#event-166781"
}
```



---

archive/issue_events_166782.json:
```json
{
    "actor": "https://github.com/zimmermann6",
    "created_at": "2012-01-25T08:21:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20basic%20arithmetic",
    "label_color": "0000ff",
    "label_name": "c: basic arithmetic",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12353#event-166782"
}
```



---

archive/issue_events_166783.json:
```json
{
    "actor": "https://github.com/zimmermann6",
    "created_at": "2012-01-25T08:21:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20blocker%20/%201",
    "label_color": "ff0000",
    "label_name": "p: blocker / 1",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12353#event-166783"
}
```



---

archive/issue_events_166784.json:
```json
{
    "actor": "https://github.com/zimmermann6",
    "created_at": "2012-01-25T08:21:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12353#event-166784"
}
```



---

archive/issue_events_166785.json:
```json
{
    "actor": "https://github.com/aghitza",
    "created_at": "2012-01-25T08:21:49Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "subject": "https://github.com/zimmermann6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12353#event-166785"
}
```



---

archive/issue_comments_134446.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nstill wrong with Sage 5.0.beta1 on a 64-bit Core 2 under Ubuntu 10.10 (gcc 4.4.5):\n\n```\ntarte% ./sage\n----------------------------------------------------------------------\n| Sage Version 5.0.beta1, Release Date: 2012-01-22                   |\n| Type notebook() for the GUI, and license() for information.        |\n----------------------------------------------------------------------\n**********************************************************************\n*                                                                    *\n* Warning: this is a prerelease version, and it may be unstable.     *\n*                                                                    *\n**********************************************************************\nsage: RealIntervalField(53)(-1) > RR(1)\nFalse\nsage: RealIntervalField(54)(-1) > RR(1)\nTrue\n```\nPaul",
    "created_at": "2012-01-26T06:59:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12353#issuecomment-134446",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:1" align="right">comment:1</div>

still wrong with Sage 5.0.beta1 on a 64-bit Core 2 under Ubuntu 10.10 (gcc 4.4.5):

```
tarte% ./sage
----------------------------------------------------------------------
| Sage Version 5.0.beta1, Release Date: 2012-01-22                   |
| Type notebook() for the GUI, and license() for information.        |
----------------------------------------------------------------------
**********************************************************************
*                                                                    *
* Warning: this is a prerelease version, and it may be unstable.     *
*                                                                    *
**********************************************************************
sage: RealIntervalField(53)(-1) > RR(1)
False
sage: RealIntervalField(54)(-1) > RR(1)
True
```
Paul



---

archive/issue_comments_134447.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nRobert, this seems related to the coercion model. Please could you help?\n\nPaul",
    "created_at": "2012-01-30T10:19:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12353#issuecomment-134447",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:2" align="right">comment:2</div>

Robert, this seems related to the coercion model. Please could you help?

Paul



---

archive/issue_comments_134448.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI'm currently building Sage 4.8 on `sage.math` (where the bug doesn't happen\nwith 4.7.2) to compare with my workstation where the bug happens, and isolate the\nproblem.\n\nPaul",
    "created_at": "2012-01-30T10:25:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12353#issuecomment-134448",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:3" align="right">comment:3</div>

I'm currently building Sage 4.8 on `sage.math` (where the bug doesn't happen
with 4.7.2) to compare with my workstation where the bug happens, and isolate the
problem.

Paul



---

archive/issue_comments_134449.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-consider the following:\n+on some machines we get the following:\n \n ```\n sage: RealIntervalField(53)(-1) > RR(1)\n@@ -6,11 +6,14 @@\n sage: RealIntervalField(54)(-1) > RR(1)\n True\n ```\n-The second answer is clearly wrong.\n+The second answer `True` is clearly wrong.\n \n-The problem seems to be the following: the `_richcmp` function\n-from `structure/element.pyx` is called. With precision 54, the\n-call to `coercion_model.canonical_coercion` fails, then we have\n-`r=1`, the two tests around line 853 fail, and the returned value is `_rich_to_bool(op, r)` which does not depend on `left` and `right`!\n+If your machine gets the correct answer `False` in both cases, then it most probably gives:\n \n-Paul\n+```\n+sage: RealIntervalField(54)(1) > RR(-1)\n+True\n+sage: RealIntervalField(54)(1) > RR(-1)\n+False\n+```\n+where the second answer `False` is wrong.\n``````\n",
    "created_at": "2012-01-30T15:48:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12353#issuecomment-134449",
    "user": "https://github.com/zimmermann6"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-consider the following:
+on some machines we get the following:
 
 ```
 sage: RealIntervalField(53)(-1) > RR(1)
@@ -6,11 +6,14 @@
 sage: RealIntervalField(54)(-1) > RR(1)
 True
 ```
-The second answer is clearly wrong.
+The second answer `True` is clearly wrong.
 
-The problem seems to be the following: the `_richcmp` function
-from `structure/element.pyx` is called. With precision 54, the
-call to `coercion_model.canonical_coercion` fails, then we have
-`r=1`, the two tests around line 853 fail, and the returned value is `_rich_to_bool(op, r)` which does not depend on `left` and `right`!
+If your machine gets the correct answer `False` in both cases, then it most probably gives:
 
-Paul
+```
+sage: RealIntervalField(54)(1) > RR(-1)
+True
+sage: RealIntervalField(54)(1) > RR(-1)
+False
+```
+where the second answer `False` is wrong.
``````




---

archive/issue_comments_134450.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nafter some investigation, the function `_richcmp` in `structure/element.pyx`\ncomputes `r = cmp(type(left), type(right))`, which gives `r=-1` on sage.math,\nand `r=1` on my workstation (both with Sage 4.8).\n\nNote that the *types* only are compared, thus by swapping the values I can produce a\nbug on sage.math too:\n\n```\nsage: RealIntervalField(54)(1) > RR(-1)\nFalse\n```\n\nSomething is badly wrong by comparing the types, not the values. Here we need help from someone more fluent in the Sage internals.\n\nPaul",
    "created_at": "2012-01-30T15:48:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12353#issuecomment-134450",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:4" align="right">comment:4</div>

after some investigation, the function `_richcmp` in `structure/element.pyx`
computes `r = cmp(type(left), type(right))`, which gives `r=-1` on sage.math,
and `r=1` on my workstation (both with Sage 4.8).

Note that the *types* only are compared, thus by swapping the values I can produce a
bug on sage.math too:

```
sage: RealIntervalField(54)(1) > RR(-1)
False
```

Something is badly wrong by comparing the types, not the values. Here we need help from someone more fluent in the Sage internals.

Paul



---

archive/issue_comments_134451.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nAre we talking about this piece of code (line 840)\n\n```\n            except (TypeError, NotImplementedError):\n                r = cmp(type(left), type(right))\n                if r == 0:\n                    r = -1\n```\nAs far as I know comparing type when you cannot compare the values is standard python behavior and is implemented in other places such as sets/set.py\n\n```\n    def __cmp__(self, right):\n        r\"\"\"\n        Compare self and right.\n\n        If right is not a Set compare types.  If right is also a Set,\n        returns comparison on the underlying objects.\n\n        .. note::\n\n           If `X < Y` is true this does *not* necessarily mean\n           that `X` is a subset of `Y`.  Also, any two sets can be\n           compared still, but the result need not be meaningful\n           if they are not equal. \n\n        EXAMPLES:\n            sage: Set(ZZ) == Set(QQ)\n            False\n            sage: Set(ZZ) < Set(QQ)\n            True\n            sage: Primes() == Set(QQ)\n            False\n\n        The following is random, illustrating that comparison of\n        sets is not the subset relation, when they are not equal::\n        \n            sage: Primes() < Set(QQ)             # random\n            True or False\n        \"\"\"\n        if not isinstance(right, Set_object):\n            return cmp(type(self), type(right))\n        return cmp(self.__object, right.__object)\n```\nThe comparison of type can be machine dependent as far as I remember which explain the inconsistencies. I guess it would be nice to try to get\n* a better answer\n* a better comparison",
    "created_at": "2012-01-30T21:47:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12353#issuecomment-134451",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:5" align="right">comment:5</div>

Are we talking about this piece of code (line 840)

```
            except (TypeError, NotImplementedError):
                r = cmp(type(left), type(right))
                if r == 0:
                    r = -1
```
As far as I know comparing type when you cannot compare the values is standard python behavior and is implemented in other places such as sets/set.py

```
    def __cmp__(self, right):
        r"""
        Compare self and right.

        If right is not a Set compare types.  If right is also a Set,
        returns comparison on the underlying objects.

        .. note::

           If `X < Y` is true this does *not* necessarily mean
           that `X` is a subset of `Y`.  Also, any two sets can be
           compared still, but the result need not be meaningful
           if they are not equal. 

        EXAMPLES:
            sage: Set(ZZ) == Set(QQ)
            False
            sage: Set(ZZ) < Set(QQ)
            True
            sage: Primes() == Set(QQ)
            False

        The following is random, illustrating that comparison of
        sets is not the subset relation, when they are not equal::
        
            sage: Primes() < Set(QQ)             # random
            True or False
        """
        if not isinstance(right, Set_object):
            return cmp(type(self), type(right))
        return cmp(self.__object, right.__object)
```
The comparison of type can be machine dependent as far as I remember which explain the inconsistencies. I guess it would be nice to try to get
* a better answer
* a better comparison



---

archive/issue_comments_134452.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nFrancois,\n\n> Are we talking about this piece of code (line 840) [...]\n\nyes exactly. But in this case the comparison of numerical values (the point interval\n[-1.0, -1.0] and the real 1.0) is well defined, thus I do not understand why the code returns\na comparison of *types* which is machine dependent. And moreover I don't understand how the\ndoctests could work before (see comment 50 in #12171).\n\nPaul",
    "created_at": "2012-01-30T21:58:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12353#issuecomment-134452",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:6" align="right">comment:6</div>

Francois,

> Are we talking about this piece of code (line 840) [...]

yes exactly. But in this case the comparison of numerical values (the point interval
[-1.0, -1.0] and the real 1.0) is well defined, thus I do not understand why the code returns
a comparison of *types* which is machine dependent. And moreover I don't understand how the
doctests could work before (see comment 50 in #12171).

Paul



---

archive/issue_comments_134453.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nAfter thinking about it, I agree it should work. So something is wrong with the coercion (line 2774 onward) so we should try to debug what's happening there.",
    "created_at": "2012-01-30T22:09:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12353#issuecomment-134453",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:7" align="right">comment:7</div>

After thinking about it, I agree it should work. So something is wrong with the coercion (line 2774 onward) so we should try to debug what's happening there.



---

archive/issue_events_166786.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-02T21:59:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20blocker%20/%201",
    "label_color": "ff0000",
    "label_name": "p: blocker / 1",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12353#event-166786"
}
```



---

archive/issue_events_166787.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-02T21:59:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12353#event-166787"
}
```



---

archive/issue_comments_134454.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nWhy is this a blocker?",
    "created_at": "2012-02-02T21:59:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12353#issuecomment-134454",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">comment:8</div>

Why is this a blocker?



---

archive/issue_comments_134455.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@jdemeyer](#comment%3A8):\n> Why is this a blocker?\n\nbecause this is a wrong result in basic arithmetic, which can yield wrong results\nin any part of Sage.\n\nWilliam, Robert, are you out there to help fixing this?\n\nPaul",
    "created_at": "2012-02-03T07:16:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12353#issuecomment-134455",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@jdemeyer](#comment%3A8):
> Why is this a blocker?

because this is a wrong result in basic arithmetic, which can yield wrong results
in any part of Sage.

William, Robert, are you out there to help fixing this?

Paul



---

archive/issue_comments_134456.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI will take a look in the next few hours.",
    "created_at": "2012-02-03T21:37:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12353#issuecomment-134456",
    "user": "https://github.com/roed314"
}
```

<div id="comment:10" align="right">comment:10</div>

I will take a look in the next few hours.



---

archive/issue_comments_134457.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nAlright.  I know what's going on and am working on a fix.  I'll try to post a patch tonight.",
    "created_at": "2012-02-04T00:47:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12353#issuecomment-134457",
    "user": "https://github.com/roed314"
}
```

<div id="comment:11" align="right">comment:11</div>

Alright.  I know what's going on and am working on a fix.  I'll try to post a patch tonight.



---

archive/issue_comments_134458.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI didn't get to it tonight but will do so in the next couple days. Here's a brief description of the fix.\n\nWe need to update the construction functors returned by RIF.construction() and RR.construction() to be able to merge construction functors of different types. So there's a total ordering on the types of real fields, and the pushout of two real fields has type the \"minimum\" of their types, and precision the minimum of their precisions.",
    "created_at": "2012-02-04T08:09:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12353#issuecomment-134458",
    "user": "https://github.com/roed314"
}
```

<div id="comment:12" align="right">comment:12</div>

I didn't get to it tonight but will do so in the next couple days. Here's a brief description of the fix.

We need to update the construction functors returned by RIF.construction() and RR.construction() to be able to merge construction functors of different types. So there's a total ordering on the types of real fields, and the pushout of two real fields has type the "minimum" of their types, and precision the minimum of their precisions.



---

archive/issue_events_166788.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2012-02-07T03:29:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12353#event-166788"
}
```



---

archive/issue_events_166789.json:
```json
{
    "actor": "https://github.com/zimmermann6",
    "created_at": "2012-02-07T10:03:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12353#event-166789"
}
```



---

archive/issue_events_166790.json:
```json
{
    "actor": "https://github.com/zimmermann6",
    "created_at": "2012-02-07T10:03:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12353#event-166790"
}
```



---

archive/issue_comments_134459.json:
```json
{
    "body": "Work Issues: **remove RQDF reference**",
    "created_at": "2012-02-07T10:03:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12353#issuecomment-134459",
    "user": "https://github.com/zimmermann6"
}
```

Work Issues: **remove RQDF reference**



---

archive/issue_comments_134460.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nDavid, thanks for your patch, I will review it. A first comment: RQDF is deprecated, thus it should not be considered in the patch. Please can you update this?\n\nPaul",
    "created_at": "2012-02-07T10:03:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12353#issuecomment-134460",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:14" align="right">comment:14</div>

David, thanks for your patch, I will review it. A first comment: RQDF is deprecated, thus it should not be considered in the patch. Please can you update this?

Paul



---

archive/issue_comments_134461.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nThere is a new ticket #12458 about obsolete RQDF stuff.\n\nPaul",
    "created_at": "2012-02-07T10:16:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12353#issuecomment-134461",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:15" align="right">comment:15</div>

There is a new ticket #12458 about obsolete RQDF stuff.

Paul



---

archive/issue_comments_134462.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -11,7 +11,7 @@\n If your machine gets the correct answer `False` in both cases, then it most probably gives:\n \n ```\n-sage: RealIntervalField(54)(1) > RR(-1)\n+sage: RealIntervalField(53)(1) > RR(-1)\n True\n sage: RealIntervalField(54)(1) > RR(-1)\n False\n``````\n",
    "created_at": "2012-02-07T10:19:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12353#issuecomment-134462",
    "user": "https://github.com/zimmermann6"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -11,7 +11,7 @@
 If your machine gets the correct answer `False` in both cases, then it most probably gives:
 
 ```
-sage: RealIntervalField(54)(1) > RR(-1)
+sage: RealIntervalField(53)(1) > RR(-1)
 True
 sage: RealIntervalField(54)(1) > RR(-1)
 False
``````




---

archive/issue_comments_134463.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\noops there was a typo in the description.\n\nPaul",
    "created_at": "2012-02-07T10:19:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12353#issuecomment-134463",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:16" align="right">comment:16</div>

oops there was a typo in the description.

Paul



---

archive/issue_comments_134464.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nHow about the following?  I made it clear that it was deprecated and removed it from pushout, but left it as an option in `create_RealField` where it returns `RealField(212)`?  Let me know if you prefer a different solution.",
    "created_at": "2012-02-07T10:23:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12353#issuecomment-134464",
    "user": "https://github.com/roed314"
}
```

<div id="comment:17" align="right">comment:17</div>

How about the following?  I made it clear that it was deprecated and removed it from pushout, but left it as an option in `create_RealField` where it returns `RealField(212)`?  Let me know if you prefer a different solution.



---

archive/issue_events_166791.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2012-02-07T10:23:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12353#event-166791"
}
```



---

archive/issue_events_166792.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2012-02-07T10:23:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12353#event-166792"
}
```



---

archive/issue_comments_134465.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nDavid,\n\nsince RQDF is since long time obsolete in Sage, I would prefer we don't add new references to it (see #12458).\n\nPaul",
    "created_at": "2012-02-07T10:28:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12353#issuecomment-134465",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:18" align="right">comment:18</div>

David,

since RQDF is since long time obsolete in Sage, I would prefer we don't add new references to it (see #12458).

Paul



---

archive/issue_comments_134466.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nChanged.",
    "created_at": "2012-02-07T10:50:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12353#issuecomment-134466",
    "user": "https://github.com/roed314"
}
```

<div id="comment:19" align="right">comment:19</div>

Changed.



---

archive/issue_events_166793.json:
```json
{
    "actor": "https://github.com/zimmermann6",
    "created_at": "2012-02-07T11:00:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12353#event-166793"
}
```



---

archive/issue_events_166794.json:
```json
{
    "actor": "https://github.com/zimmermann6",
    "created_at": "2012-02-07T11:00:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12353#event-166794"
}
```



---

archive/issue_comments_134467.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\na typo while reading the patch: approrpiate should be appropriate.\n\nPaul",
    "created_at": "2012-02-07T11:00:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12353#issuecomment-134467",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:20" align="right">comment:20</div>

a typo while reading the patch: approrpiate should be appropriate.

Paul



---

archive/issue_comments_134468.json:
```json
{
    "body": "Changed work issues from **remove RQDF reference** to **fix typo**",
    "created_at": "2012-02-07T11:00:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12353#issuecomment-134468",
    "user": "https://github.com/zimmermann6"
}
```

Changed work issues from **remove RQDF reference** to **fix typo**



---

archive/issue_comments_134469.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nalso, in `We check that #12353 has been resolved`, the 3rd and 4th tests are\nidentical (my fault). The 3rd one should be at precision 53:\n\n```\nsage: RealIntervalField(53)(1) > RR(-1) \nTrue\n```\nPaul",
    "created_at": "2012-02-07T11:04:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12353#issuecomment-134469",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:21" align="right">comment:21</div>

also, in `We check that #12353 has been resolved`, the 3rd and 4th tests are
identical (my fault). The 3rd one should be at precision 53:

```
sage: RealIntervalField(53)(1) > RR(-1) 
True
```
Paul



---

archive/issue_events_166795.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2012-02-07T11:06:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12353#event-166795"
}
```



---

archive/issue_events_166796.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2012-02-07T11:06:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12353#event-166796"
}
```



---

archive/issue_comments_134470.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nFixed",
    "created_at": "2012-02-07T11:06:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12353#issuecomment-134470",
    "user": "https://github.com/roed314"
}
```

<div id="comment:22" align="right">comment:22</div>

Fixed



---

archive/issue_comments_134471.json:
```json
{
    "body": "Changed work issues from **fix typo** to none",
    "created_at": "2012-02-07T12:28:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12353#issuecomment-134471",
    "user": "https://github.com/zimmermann6"
}
```

Changed work issues from **fix typo** to none



---

archive/issue_events_166797.json:
```json
{
    "actor": "https://github.com/zimmermann6",
    "created_at": "2012-02-07T12:28:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12353#event-166797"
}
```



---

archive/issue_events_166798.json:
```json
{
    "actor": "https://github.com/zimmermann6",
    "created_at": "2012-02-07T12:28:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12353#event-166798"
}
```



---

archive/issue_comments_134472.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nI give a positive review since all doctests still work, and the problem is fixed.\nHowever I'm not fluent enough in the construction functors to really review the new\ncode. If Robert or William can do this, please go ahead. In the meantime, since this\nfixes an major defect, I set to positive review.\n\nPaul",
    "created_at": "2012-02-07T12:28:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12353#issuecomment-134472",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:23" align="right">comment:23</div>

I give a positive review since all doctests still work, and the problem is fixed.
However I'm not fluent enough in the construction functors to really review the new
code. If Robert or William can do this, please go ahead. In the meantime, since this
fixes an major defect, I set to positive review.

Paul



---

archive/issue_comments_134473.json:
```json
{
    "body": "Author: **David Roe**",
    "created_at": "2012-02-07T12:28:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12353#issuecomment-134473",
    "user": "https://github.com/zimmermann6"
}
```

Author: **David Roe**



---

archive/issue_comments_134474.json:
```json
{
    "body": "Reviewer: **Paul Zimmermann**",
    "created_at": "2012-02-07T12:28:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12353#issuecomment-134474",
    "user": "https://github.com/zimmermann6"
}
```

Reviewer: **Paul Zimmermann**



---

archive/issue_comments_134475.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nAttachment: **[12353.patch.gz](https://github.com/sagemath/sage/files/ticket12353/12353.patch.gz)**\n\nFolded both patches into one.",
    "created_at": "2012-02-09T09:24:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12353#issuecomment-134475",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:24" align="right">comment:24</div>

Attachment: **[12353.patch.gz](https://github.com/sagemath/sage/files/ticket12353/12353.patch.gz)**

Folded both patches into one.



---

archive/issue_comments_134476.json:
```json
{
    "body": "Merged: **sage-5.0.beta4**",
    "created_at": "2012-02-14T14:22:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12353#issuecomment-134476",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.0.beta4**



---

archive/issue_events_166799.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-14T14:22:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12353#event-166799"
}
```



---

archive/issue_events_166800.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-14T14:22:14Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/12353",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12353#event-166800"
}
```
