# Issue 12170: Genus computation (using singular) and _singular_ object for function field

archive/issues_011998.json:
```json
{
    "assignees": [],
    "body": "Following my the discussion on sage-devel this adds genus() function to the `FunctionField` class, to compute the genus of the function field using singular.\n\nIt is not as fast as magma but it is at least a first step.\n\nApply [attachment: trac_12170-gen_comp_singular_obj.patch.gz](https://github.com/sagemath/sage/files/ticket12170/trac_12170-gen_comp_singular_obj.patch.gz)\n\nDepends on #9054\n\nAssignee: **@aghitza**\n\nCC:  @koffie minz @saraedum\n\nKeywords: **function field, genus, singular**\n\nReviewer: **Dmitrii Pasechnik**\n\nAuthor: **Syed Ahmad Lavasani**\n\nMerged: **sage-5.13.beta1**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/12170_\n\n",
    "closed_at": "2013-10-19T09:20:27Z",
    "created_at": "2011-12-17T02:22:47Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20algebraic%20geometry",
        "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.13",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Genus computation (using singular) and _singular_ object for function field",
    "type": "issue",
    "updated_at": "2013-10-19T09:20:27Z",
    "url": "https://github.com/sagemath/sage/issues/12170",
    "user": "https://github.com/sagetrac-sydahmad"
}
```
Following my the discussion on sage-devel this adds genus() function to the `FunctionField` class, to compute the genus of the function field using singular.

It is not as fast as magma but it is at least a first step.

Apply [attachment: trac_12170-gen_comp_singular_obj.patch.gz](https://github.com/sagemath/sage/files/ticket12170/trac_12170-gen_comp_singular_obj.patch.gz)

Depends on #9054

Assignee: **@aghitza**

CC:  @koffie minz @saraedum

Keywords: **function field, genus, singular**

Reviewer: **Dmitrii Pasechnik**

Author: **Syed Ahmad Lavasani**

Merged: **sage-5.13.beta1**

_Issue created by migration from https://trac.sagemath.org/ticket/12170_





---

archive/issue_events_145887.json:
```json
{
    "actor": "https://github.com/sagetrac-sydahmad",
    "created_at": "2011-12-17T02:22:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12170",
    "milestone_number": null,
    "milestone_title": "sage-5.13",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12170#event-145887"
}
```



---

archive/issue_events_145888.json:
```json
{
    "actor": "https://github.com/sagetrac-sydahmad",
    "created_at": "2011-12-17T02:22:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12170",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20algebraic%20geometry",
    "label_color": "0000ff",
    "label_name": "component: algebraic geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12170#event-145888"
}
```



---

archive/issue_events_145889.json:
```json
{
    "actor": "https://github.com/sagetrac-sydahmad",
    "created_at": "2011-12-17T02:22:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12170",
    "label": "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12170#event-145889"
}
```



---

archive/issue_events_145890.json:
```json
{
    "actor": "https://github.com/sagetrac-sydahmad",
    "created_at": "2011-12-17T02:22:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12170",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12170#event-145890"
}
```



---

archive/issue_events_145891.json:
```json
{
    "actor": "https://github.com/sagetrac-sydahmad",
    "created_at": "2011-12-17T03:23:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12170",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12170#event-145891"
}
```



---

archive/issue_comments_132703.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nif we have:\n\nkx.<x> = FunctionField(QQ)\nkxY.<Y> = PolynomialRing(QQ)\n\nkxY._singular_ should be k(x)[Y] (which is what this code generates) however, singular only computes the genus of an ideal of k[x][Y] ring. So, I have to generate a tmpR = k[x][Y] each time I need to compute the genus. Maybe it's worth it to add __singular_deg2_ private object to store this ring as well. \n\nAlso, it makes sense to store the genus in __genus. But I'm not sure how should I check it's validity. Can the defining polynomial of the function field change after its creation. If not then we can set __genus = -1 and if it's non-negative then it's valid.",
    "created_at": "2011-12-17T03:23:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12170#issuecomment-132703",
    "user": "https://github.com/sagetrac-sydahmad"
}
```

<a id='comment:1'>Comment 1:</a>
if we have:

kx.<x> = FunctionField(QQ)
kxY.<Y> = PolynomialRing(QQ)

kxY._singular_ should be k(x)[Y] (which is what this code generates) however, singular only computes the genus of an ideal of k[x][Y] ring. So, I have to generate a tmpR = k[x][Y] each time I need to compute the genus. Maybe it's worth it to add __singular_deg2_ private object to store this ring as well. 

Also, it makes sense to store the genus in __genus. But I'm not sure how should I check it's validity. Can the defining polynomial of the function field change after its creation. If not then we can set __genus = -1 and if it's non-negative then it's valid.



---

archive/issue_events_145892.json:
```json
{
    "actor": "https://github.com/sagetrac-sydahmad",
    "created_at": "2011-12-17T03:24:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12170",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20algebraic%20geometry",
    "label_color": "0000ff",
    "label_name": "component: algebraic geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12170#event-145892"
}
```



---

archive/issue_events_145893.json:
```json
{
    "actor": "https://github.com/sagetrac-sydahmad",
    "created_at": "2011-12-17T03:24:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12170",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20algebra",
    "label_color": "0000ff",
    "label_name": "component: algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12170#event-145893"
}
```



---

archive/issue_events_145894.json:
```json
{
    "actor": "https://github.com/sagetrac-sydahmad",
    "created_at": "2011-12-17T03:24:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12170",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20algebra",
    "label_color": "0000ff",
    "label_name": "component: algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12170#event-145894"
}
```



---

archive/issue_events_145895.json:
```json
{
    "actor": "https://github.com/sagetrac-sydahmad",
    "created_at": "2011-12-17T03:24:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12170",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20algebraic%20geometry",
    "label_color": "0000ff",
    "label_name": "component: algebraic geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12170#event-145895"
}
```



---

archive/issue_comments_132704.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nReplying to [sydahmad](#comment%3A1):\n> if we have:\n> \n> kx.<x> = FunctionField(QQ)\n> kxY.<Y> = PolynomialRing(QQ)\n> \n> kxY._singular_ should be k(x)[Y] (which is what this code generates) however, singular only computes the genus of an ideal of k[x][Y] ring. So, I have to generate a tmpR = k[x][Y] each time I need to compute the genus. Maybe it's worth it to add __singular_deg2_ private object to store this ring as well. \n\n>\n\nWell if we are going to cache the genus computation then this won't be needed.\n\nReplying to [sydahmad](#comment%3A1):\n> Also, it makes sense to store the genus in __genus. But I'm not sure how should I check it's validity. Can the defining polynomial of the function field change after its creation. If not then we can set __genus = -1 and if it's non-negative then it's valid.\n\nYou should look at the documentation of cached_method on how to do this. It would be indeed some function ideal for caching since it's answer takes a while to compute while it takes only a small integer to store it. \n\nNote that you can change the defining polynomial (because you have to go trough a lot of trouble to make python objects immutable). But you are safe to assume that the defining polynomial doesn't change. In fact the current code already assumes that as shown below.\n\n```\nsage: K.<x>=FunctionField(QQ)\nsage: R.<y>=K[]\nsage: L=K.extension(y^3+y*x+x)\nsage: L\nFunction field in y defined by y^3 + x*y + x\nsage: L.__init__(y^3+x,'y')\nsage: L\nFunction field in y defined by y^3 + x\nsage: K.extension(y^3+y*x+x)\nFunction field in y defined by y^3 + x\n```",
    "created_at": "2011-12-17T09:49:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12170#issuecomment-132704",
    "user": "https://github.com/koffie"
}
```

<a id='comment:5'>Comment 5:</a>
Replying to [sydahmad](#comment%3A1):
> if we have:
> 
> kx.<x> = FunctionField(QQ)
> kxY.<Y> = PolynomialRing(QQ)
> 
> kxY._singular_ should be k(x)[Y] (which is what this code generates) however, singular only computes the genus of an ideal of k[x][Y] ring. So, I have to generate a tmpR = k[x][Y] each time I need to compute the genus. Maybe it's worth it to add __singular_deg2_ private object to store this ring as well. 

>

Well if we are going to cache the genus computation then this won't be needed.

Replying to [sydahmad](#comment%3A1):
> Also, it makes sense to store the genus in __genus. But I'm not sure how should I check it's validity. Can the defining polynomial of the function field change after its creation. If not then we can set __genus = -1 and if it's non-negative then it's valid.

You should look at the documentation of cached_method on how to do this. It would be indeed some function ideal for caching since it's answer takes a while to compute while it takes only a small integer to store it. 

Note that you can change the defining polynomial (because you have to go trough a lot of trouble to make python objects immutable). But you are safe to assume that the defining polynomial doesn't change. In fact the current code already assumes that as shown below.

```
sage: K.<x>=FunctionField(QQ)
sage: R.<y>=K[]
sage: L=K.extension(y^3+y*x+x)
sage: L
Function field in y defined by y^3 + x*y + x
sage: L.__init__(y^3+x,'y')
sage: L
Function field in y defined by y^3 + x
sage: K.extension(y^3+y*x+x)
Function field in y defined by y^3 + x
```



---

archive/issue_comments_132705.json:
```json
{
    "body": "Changed dependencies from **9054** to **#9054**",
    "created_at": "2011-12-17T19:46:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12170#issuecomment-132705",
    "user": "https://github.com/saraedum"
}
```

Changed dependencies from **9054** to **#9054**



---

archive/issue_comments_132706.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nI'm surprised myself but singular does not complain about fractions:\n\n```\nsage: singular.ideal('y^5 - (x^3 + 2*x*y + 1/x)')\n-x^3-2*x*y+y^5\nsage: singular.eval('1/x')\n0\n```\n\nThe 1/x was just thrown out because in singular it evaluates to 0. Anyway I think you're maybe doing too many direct calls to singular. Why not go to the polynomial ring QQ[x,y] create the ideal there get its singular object and determine the genus in singular? Or maybe I misunderstand what the genus function in singular does.\n\nAlso, is_RationalFunctionField() should imho be a member method is_rational() of FunctionField that is overwritten in RationalFunctionField and FunctionField_polymod.",
    "created_at": "2011-12-17T20:56:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12170#issuecomment-132706",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:7'>Comment 7:</a>
I'm surprised myself but singular does not complain about fractions:

```
sage: singular.ideal('y^5 - (x^3 + 2*x*y + 1/x)')
-x^3-2*x*y+y^5
sage: singular.eval('1/x')
0
```

The 1/x was just thrown out because in singular it evaluates to 0. Anyway I think you're maybe doing too many direct calls to singular. Why not go to the polynomial ring QQ[x,y] create the ideal there get its singular object and determine the genus in singular? Or maybe I misunderstand what the genus function in singular does.

Also, is_RationalFunctionField() should imho be a member method is_rational() of FunctionField that is overwritten in RationalFunctionField and FunctionField_polymod.



---

archive/issue_events_145896.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2011-12-17T20:56:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12170",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12170#event-145896"
}
```



---

archive/issue_events_145897.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2011-12-17T20:56:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12170",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12170#event-145897"
}
```



---

archive/issue_comments_132707.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nThinking about this, is_RationalFunctionField()/is_rational() is probably not the right name. Take QQ(x) and the extension given by y^2=x then that gives you a rational function field but probably that's not what you want there. In this case what you actually want is probably one implementation in RationalFunctionField (returning 0) and one in FunctionField_polymod (calling singular).",
    "created_at": "2011-12-17T22:01:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12170#issuecomment-132707",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:8'>Comment 8:</a>
Thinking about this, is_RationalFunctionField()/is_rational() is probably not the right name. Take QQ(x) and the extension given by y^2=x then that gives you a rational function field but probably that's not what you want there. In this case what you actually want is probably one implementation in RationalFunctionField (returning 0) and one in FunctionField_polymod (calling singular).



---

archive/issue_comments_132708.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nJust a quick observation.  The docstring for is_RationalFunctionField claims that it checks if the input is \"of rational function field *type*\".  However, that is not what it does.  It checks if it is either of rational function field type, or if it isn't, it also checks if the input is in the category of Function Fields and is equal to its base.  I think the docstring should be changed.  Also, be sure to include an example that illustrates something that is not of RationalFunctionField type but is in the category FunctionFields().\n\n```\n        960\tdef is_RationalFunctionField(x): \n \t961\t    \"\"\" \n \t962\t    Return True if ``x`` is of rational function field type. \n...\n \t971\t    \"\"\" \n \t972\t    if isinstance(x, RationalFunctionField): return True \n \t973\t    if (x in FunctionFields()): \n \t974\t        return x == x.base_field() \n \t975\t    else: \n```",
    "created_at": "2011-12-20T03:39:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12170#issuecomment-132708",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:9'>Comment 9:</a>
Just a quick observation.  The docstring for is_RationalFunctionField claims that it checks if the input is "of rational function field *type*".  However, that is not what it does.  It checks if it is either of rational function field type, or if it isn't, it also checks if the input is in the category of Function Fields and is equal to its base.  I think the docstring should be changed.  Also, be sure to include an example that illustrates something that is not of RationalFunctionField type but is in the category FunctionFields().

```
        960	def is_RationalFunctionField(x): 
 	961	    """ 
 	962	    Return True if ``x`` is of rational function field type. 
...
 	971	    """ 
 	972	    if isinstance(x, RationalFunctionField): return True 
 	973	    if (x in FunctionFields()): 
 	974	        return x == x.base_field() 
 	975	    else: 
```



---

archive/issue_comments_132709.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nReplying to [@saraedum](#comment%3A7):\n\n> I'm surprised myself but singular does not complain about fractions: ` sage: singular.ideal('y^5 - (x^3 + 2*x*y + 1/x)') -x<sup>3-2*x*y+y</sup>5 sage: singular.eval('1/x') 0 ` The 1/x was just thrown out because in singular it evaluates to 0.\n\nSo, basically, I need to clear the denominator before handing the job to Singular, correct? If yes is there a method to do so, or I just compute the GCD of the denom of all coeffs?\n\nThanx.",
    "created_at": "2011-12-20T07:41:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12170#issuecomment-132709",
    "user": "https://github.com/sagetrac-sydahmad"
}
```

<a id='comment:10'>Comment 10:</a>
Replying to [@saraedum](#comment%3A7):

> I'm surprised myself but singular does not complain about fractions: ` sage: singular.ideal('y^5 - (x^3 + 2*x*y + 1/x)') -x<sup>3-2*x*y+y</sup>5 sage: singular.eval('1/x') 0 ` The 1/x was just thrown out because in singular it evaluates to 0.

So, basically, I need to clear the denominator before handing the job to Singular, correct? If yes is there a method to do so, or I just compute the GCD of the denom of all coeffs?

Thanx.



---

archive/issue_comments_132710.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nReplying to [@saraedum](#comment%3A8):\n\n> Thinking about this, is_RationalFunctionField()/is_rational() is probably not the right name. Take QQ(x) and the extension given by y^2 = x then that gives you a rational function field but probably that's not what you want there. In this case what you actually want is probably one implementation in RationalFunctionField (returning 0) and one in FunctionField_polymod (calling singular).^\n\nThis is why the function is called \"is_RationalFunctionField()\". This is because it does not check if (mathematically) the function field is rational, but it checks, if it is (programatically) of RationalFunctionField type. I need that because (AFAIUnderstood the manual) when I ask Singular to create a ring of k(t)[y] form, singular expects that k be a prime field (you only get to give the characteristic). so I can not accept k(x)[y]/(y^2 - x) for my purpose:\n\n```\nsage: singular.eval('ring r = (7^2,a,b),(x,y,z),dp;')\n---------------------------------------------------------------------------\nRuntimeError                              Traceback (most recent call last)\n\n/home/syd/Programmes/sage-4.7.2/devel/sage-sydevel/<ipython console> in <module>()\n\n/home/syd/Programmes/sage-4.7.2/local/lib/python2.6/site-packages/sage/interfaces/singular.pyc in eval(self, x, allow_semicolon, strip, **kw\\\nds)\n    572\n    573         if s.find(\"error\") != -1 or s.find(\"Segment fault\") != -1:\n--> 574             raise RuntimeError, 'Singular error:\\n%s'%s\n    575\n    576         if get_verbose() > 0:\n\nRuntimeError: Singular error:\n   ? too many parameters\n   ? cannot make ring\n   ? error occurred in or before STDIN line 41: `ring r = (7^2,a,b),(x,y,z),dp;`\n   ? expected ring-expression. type 'help ring;'\n\n```\n\n\nSo, I'm OK with making it a method of FunctionField class but I think we should keep the name. We can have an additional method of \"is_rational()\" if you like (which will involve computing the genus).",
    "created_at": "2011-12-20T08:27:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12170#issuecomment-132710",
    "user": "https://github.com/sagetrac-sydahmad"
}
```

<a id='comment:11'>Comment 11:</a>
Replying to [@saraedum](#comment%3A8):

> Thinking about this, is_RationalFunctionField()/is_rational() is probably not the right name. Take QQ(x) and the extension given by y^2 = x then that gives you a rational function field but probably that's not what you want there. In this case what you actually want is probably one implementation in RationalFunctionField (returning 0) and one in FunctionField_polymod (calling singular).^

This is why the function is called "is_RationalFunctionField()". This is because it does not check if (mathematically) the function field is rational, but it checks, if it is (programatically) of RationalFunctionField type. I need that because (AFAIUnderstood the manual) when I ask Singular to create a ring of k(t)[y] form, singular expects that k be a prime field (you only get to give the characteristic). so I can not accept k(x)[y]/(y^2 - x) for my purpose:

```
sage: singular.eval('ring r = (7^2,a,b),(x,y,z),dp;')
---------------------------------------------------------------------------
RuntimeError                              Traceback (most recent call last)

/home/syd/Programmes/sage-4.7.2/devel/sage-sydevel/<ipython console> in <module>()

/home/syd/Programmes/sage-4.7.2/local/lib/python2.6/site-packages/sage/interfaces/singular.pyc in eval(self, x, allow_semicolon, strip, **kw\
ds)
    572
    573         if s.find("error") != -1 or s.find("Segment fault") != -1:
--> 574             raise RuntimeError, 'Singular error:\n%s'%s
    575
    576         if get_verbose() > 0:

RuntimeError: Singular error:
   ? too many parameters
   ? cannot make ring
   ? error occurred in or before STDIN line 41: `ring r = (7^2,a,b),(x,y,z),dp;`
   ? expected ring-expression. type 'help ring;'

```


So, I'm OK with making it a method of FunctionField class but I think we should keep the name. We can have an additional method of "is_rational()" if you like (which will involve computing the genus).



---

archive/issue_comments_132711.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nReplying to [@williamstein](#comment%3A9):\n> Just a quick observation.  The docstring for is_RationalFunctionField claims that it checks if the input is \"of rational function field *type*\".  However, that is not what it does.\n\nWhat I needed was the type check, but because I wanted to follow is_FunctionField line by line and that there's no category of RationalFunctionFields I thought that this is the closest approximation.\n\n```\n  \t973\t    if (x in FunctionFields()): \n  \t974\t        return x == x.base_field() \n  \t975\t    else: \n```\nSaying that, I do not think that I can come up with such an example because I do not know how the members of FunctionFields category which are not of FunctionField type looks like, I even do not know if they have base_field() method or not (David Roe told me last week that categorical parenthood does not implies OOP parenthood), and if not, the code will generate an error. So, I think we should get rid of these three lines instead.",
    "created_at": "2011-12-20T08:41:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12170#issuecomment-132711",
    "user": "https://github.com/sagetrac-sydahmad"
}
```

<a id='comment:12'>Comment 12:</a>
Replying to [@williamstein](#comment%3A9):
> Just a quick observation.  The docstring for is_RationalFunctionField claims that it checks if the input is "of rational function field *type*".  However, that is not what it does.

What I needed was the type check, but because I wanted to follow is_FunctionField line by line and that there's no category of RationalFunctionFields I thought that this is the closest approximation.

```
  	973	    if (x in FunctionFields()): 
  	974	        return x == x.base_field() 
  	975	    else: 
```
Saying that, I do not think that I can come up with such an example because I do not know how the members of FunctionFields category which are not of FunctionField type looks like, I even do not know if they have base_field() method or not (David Roe told me last week that categorical parenthood does not implies OOP parenthood), and if not, the code will generate an error. So, I think we should get rid of these three lines instead.



---

archive/issue_comments_132712.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nReplying to [sydahmad](#comment%3A10):\n> Replying to [@saraedum](#comment%3A7):\n> \n> > I'm surprised myself but singular does not complain about fractions: ` sage: singular.ideal('y^5 - (x^3 + 2*x*y + 1/x)') -x<sup>3-2*x*y+y</sup>5 sage: singular.eval('1/x') 0 ` The 1/x was just thrown out because in singular it evaluates to 0.\n\n> \n> So, basically, I need to clear the denominator before handing the job to Singular, correct? If yes is there a method to do so, or I just compute the GCD of the denom of all coeffs?\n> \n> Thanx.\n\nThere's a method `_make_monic_integral()` that seems to do just that.",
    "created_at": "2011-12-21T14:38:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12170#issuecomment-132712",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:14'>Comment 14:</a>
Replying to [sydahmad](#comment%3A10):
> Replying to [@saraedum](#comment%3A7):
> 
> > I'm surprised myself but singular does not complain about fractions: ` sage: singular.ideal('y^5 - (x^3 + 2*x*y + 1/x)') -x<sup>3-2*x*y+y</sup>5 sage: singular.eval('1/x') 0 ` The 1/x was just thrown out because in singular it evaluates to 0.

> 
> So, basically, I need to clear the denominator before handing the job to Singular, correct? If yes is there a method to do so, or I just compute the GCD of the denom of all coeffs?
> 
> Thanx.

There's a method `_make_monic_integral()` that seems to do just that.



---

archive/issue_events_145898.json:
```json
{
    "actor": "https://github.com/sagetrac-sydahmad",
    "created_at": "2011-12-22T09:13:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12170",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12170#event-145898"
}
```



---

archive/issue_events_145899.json:
```json
{
    "actor": "https://github.com/sagetrac-sydahmad",
    "created_at": "2011-12-22T09:13:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12170",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12170#event-145899"
}
```



---

archive/issue_comments_132713.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nI addressed cache_method, reducing calls and using integral polynomial. I also got rid of the line in is_RationalFunctionField which was making the documentation invalid. About the name and place of definition of is_RationalFunctionField, I think the name is appropriate because it shows that we are asking about the type of the object and not the rationality of the function field. For the same reason, because it's asking about the type of the object and not one of its attribute, doesn't it make sense to remain outside, like is_FunctionField (though we don't have a cat (yet!)).\n\nAnyways, if there's a unanimous decision about its name and its place of definition, I'll apply it. But if it is defined in the FunctionField class it will be only:\n\n```\ndef is_RationalFunctionField(self):\n\u00a0   return False;\n```\nand in the RationalFunctionField\u00a0class:\n\n```\ndef is_RationalFunctionField(self):\n    return True;\n```\nWe can also, get rid of it, but I think it improves the readability of the code.\n\nAnd sorry about two patches. I initiated my queue after the first submission and now hg doesn't let me rollback.",
    "created_at": "2011-12-22T09:13:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12170#issuecomment-132713",
    "user": "https://github.com/sagetrac-sydahmad"
}
```

<a id='comment:15'>Comment 15:</a>
I addressed cache_method, reducing calls and using integral polynomial. I also got rid of the line in is_RationalFunctionField which was making the documentation invalid. About the name and place of definition of is_RationalFunctionField, I think the name is appropriate because it shows that we are asking about the type of the object and not the rationality of the function field. For the same reason, because it's asking about the type of the object and not one of its attribute, doesn't it make sense to remain outside, like is_FunctionField (though we don't have a cat (yet!)).

Anyways, if there's a unanimous decision about its name and its place of definition, I'll apply it. But if it is defined in the FunctionField class it will be only:

```
def is_RationalFunctionField(self):
    return False;
```
and in the RationalFunctionField class:

```
def is_RationalFunctionField(self):
    return True;
```
We can also, get rid of it, but I think it improves the readability of the code.

And sorry about two patches. I initiated my queue after the first submission and now hg doesn't let me rollback.



---

archive/issue_comments_132714.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nI have finally qfolded the two patches in one but I don't know how to delete the two first files. Maybe I don't have permission to do so. If anybody can delete *\"*[trac_12170.patch](https://github.com/sagemath/sage/files/ticket12170/trac_12170.patch.gz)*\" and\u00a0\"*[trac_12170_1.patch](https://github.com/sagemath/sage/files/ticket12170/trac_12170_1.patch.gz)\" from this ticket please do so.",
    "created_at": "2011-12-29T02:48:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12170#issuecomment-132714",
    "user": "https://github.com/sagetrac-sydahmad"
}
```

<a id='comment:17'>Comment 17:</a>
I have finally qfolded the two patches in one but I don't know how to delete the two first files. Maybe I don't have permission to do so. If anybody can delete *"*[trac_12170.patch](https://github.com/sagemath/sage/files/ticket12170/trac_12170.patch.gz)*" and "*[trac_12170_1.patch](https://github.com/sagemath/sage/files/ticket12170/trac_12170_1.patch.gz)" from this ticket please do so.



---

archive/issue_comments_132715.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nReplying to [sydahmad](#comment%3A17):\n> I have finally qfolded the two patches in one but I don't know how to delete the two first files. Maybe I don't have permission to do so. If anybody can delete *\"*[trac_12170.patch](https://github.com/sagemath/sage/files/ticket12170/trac_12170.patch.gz)*\" and\u00a0\"*[trac_12170_1.patch](https://github.com/sagemath/sage/files/ticket12170/trac_12170_1.patch.gz)\" from this ticket please do so.\n\nYou can just mention in the ticket's Description which patch to apply.",
    "created_at": "2012-01-26T05:43:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12170#issuecomment-132715",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:18'>Comment 18:</a>
Replying to [sydahmad](#comment%3A17):
> I have finally qfolded the two patches in one but I don't know how to delete the two first files. Maybe I don't have permission to do so. If anybody can delete *"*[trac_12170.patch](https://github.com/sagemath/sage/files/ticket12170/trac_12170.patch.gz)*" and "*[trac_12170_1.patch](https://github.com/sagemath/sage/files/ticket12170/trac_12170_1.patch.gz)" from this ticket please do so.

You can just mention in the ticket's Description which patch to apply.



---

archive/issue_comments_132716.json:
```json
{
    "body": "Attachment: **[trac_12170-gen_comp_singular_obj.patch.gz](https://github.com/sagemath/sage/files/ticket12170/trac_12170-gen_comp_singular_obj.patch.gz)**\n\nadds genus computation; adds function fieds and rational func field over non prime finite fields to _singular_init and can_convert_to_singular in the singular interface with reduce no of calls to Singular; non integral polynomial bug fixed.",
    "created_at": "2012-02-20T16:44:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12170#issuecomment-132716",
    "user": "https://github.com/sagetrac-sydahmad"
}
```

Attachment: **[trac_12170-gen_comp_singular_obj.patch.gz](https://github.com/sagemath/sage/files/ticket12170/trac_12170-gen_comp_singular_obj.patch.gz)**

adds genus computation; adds function fieds and rational func field over non prime finite fields to _singular_init and can_convert_to_singular in the singular interface with reduce no of calls to Singular; non integral polynomial bug fixed.



---

archive/issue_comments_132717.json:
```json
{
    "body": "Replying to [ticket:12170 sydahmad]:\n> Following my the discussion on sage-devel this adds genus() function to the FunctionField class, to compute the genus of the function field using singular.\n> \n> It is not as fast as magma but it is at least a first step.",
    "created_at": "2012-02-20T16:46:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12170#issuecomment-132717",
    "user": "https://github.com/sagetrac-sydahmad"
}
```

Replying to [ticket:12170 sydahmad]:
> Following my the discussion on sage-devel this adds genus() function to the FunctionField class, to compute the genus of the function field using singular.
> 
> It is not as fast as magma but it is at least a first step.



---

archive/issue_comments_132718.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n Following my the discussion on sage-devel this adds genus() function to the FunctionField class, to compute the genus of the function field using singular.\n \n It is not as fast as magma but it is at least a first step.\n+\n+You should only apply \"trac_12170-gen_comp_singular_obj.patch\"\n``````\n",
    "created_at": "2012-02-20T16:46:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12170#issuecomment-132718",
    "user": "https://github.com/sagetrac-sydahmad"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
 Following my the discussion on sage-devel this adds genus() function to the FunctionField class, to compute the genus of the function field using singular.
 
 It is not as fast as magma but it is at least a first step.
+
+You should only apply "trac_12170-gen_comp_singular_obj.patch"
``````




---

archive/issue_comments_132719.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nApply trac_12170-gen_comp_singular_obj.patch\n\n(for patchbot)",
    "created_at": "2012-03-13T13:48:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12170#issuecomment-132719",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:20'>Comment 20:</a>
Apply trac_12170-gen_comp_singular_obj.patch

(for patchbot)



---

archive/issue_events_145900.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12170",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12170#event-145900"
}
```



---

archive/issue_events_145901.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12170",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12170#event-145901"
}
```



---

archive/issue_events_145902.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2013-10-15T19:33:47Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/12170",
    "title_is": "Genus computation (using singular) and _singular_ object for function field",
    "title_was": "Genus computation (using singular) and _singular_ object for function filed",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12170#event-145902"
}
```



---

archive/issue_events_145903.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2013-10-15T20:03:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12170",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12170#event-145903"
}
```



---

archive/issue_events_145904.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2013-10-15T20:03:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12170",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12170#event-145904"
}
```



---

archive/issue_comments_132720.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n-Following my the discussion on sage-devel this adds genus() function to the FunctionField class, to compute the genus of the function field using singular.\n+Following my the discussion on sage-devel this adds genus() function to the `FunctionField` class, to compute the genus of the function field using singular.\n \n It is not as fast as magma but it is at least a first step.\n \n-You should only apply \"trac_12170-gen_comp_singular_obj.patch\"\n+Apply [attachment: trac_12170-gen_comp_singular_obj.patch.gz](https://github.com/sagemath/sage/files/ticket12170/trac_12170-gen_comp_singular_obj.patch.gz)\n``````\n",
    "created_at": "2013-10-15T20:03:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12170#issuecomment-132720",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,5 @@
-Following my the discussion on sage-devel this adds genus() function to the FunctionField class, to compute the genus of the function field using singular.
+Following my the discussion on sage-devel this adds genus() function to the `FunctionField` class, to compute the genus of the function field using singular.
 
 It is not as fast as magma but it is at least a first step.
 
-You should only apply "trac_12170-gen_comp_singular_obj.patch"
+Apply [attachment: trac_12170-gen_comp_singular_obj.patch.gz](https://github.com/sagemath/sage/files/ticket12170/trac_12170-gen_comp_singular_obj.patch.gz)
``````




---

archive/issue_comments_132721.json:
```json
{
    "body": "Reviewer: **Dmitrii Pasechnik**",
    "created_at": "2013-10-17T13:26:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12170#issuecomment-132721",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Dmitrii Pasechnik**



---

archive/issue_comments_132722.json:
```json
{
    "body": "Merged: **sage-5.13.beta1**",
    "created_at": "2013-10-19T09:20:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12170#issuecomment-132722",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.13.beta1**



---

archive/issue_events_145905.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-10-19T09:20:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12170",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12170#event-145905"
}
```



---

archive/issue_events_145906.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-10-19T09:20:27Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/12170",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12170#event-145906"
}
```
