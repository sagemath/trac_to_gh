# Issue 12879: TestSuite failures for HeckeModule Homsets

archive/issues_012707.json:
```json
{
    "assignees": [
        "https://github.com/craigcitro"
    ],
    "body": "Adding a Testsuite run in #12876 in the documentation of\nsage.categories.hecke_modules.HeckeModules.ParentMethods._Hom_\nrevealed the following bug:\n\n```\nsage: M = ModularForms(Gamma0(7), 4)\nsage: H = Hom(M); H\nsage: H.zero()\nTraceback (most recent call last):\n  File \"<ipython console>\", line 1, in <module>\n  File \"cachefunc.pyx\", line 1397, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (sage/misc/cachefunc.c:7026)\n  File \"/opt/sage-5.0.beta11/local/lib/python2.7/site-packages/sage/categories/modules.py\", line 221, in zero\n    From: Free module generated by {1, 2, 3} over Integer Ring\n  File \"/opt/sage-5.0.beta11/local/lib/python2.7/site-packages/sage/modular/hecke/homspace.py\", line 111, in __call__\n    return morphism.HeckeModuleMorphism_matrix(self, A, name)\n  File \"/opt/sage-5.0.beta11/local/lib/python2.7/site-packages/sage/modular/hecke/morphism.py\", line 116, in __init__\n    MatrixMorphism.__init__(self, parent, A)\n  File \"/opt/sage-5.0.beta11/local/lib/python2.7/site-packages/sage/modules/matrix_morphism.py\", line 1191, in __init__\n    parent.codomain().rank())(A)\n  File \"/opt/sage-5.0.beta11/local/lib/python2.7/site-packages/sage/matrix/matrix_space.py\", line 543, in __call__\n    return self.matrix(entries, copy=copy, coerce=coerce, rows=rows)\n  File \"/opt/sage-5.0.beta11/local/lib/python2.7/site-packages/sage/matrix/matrix_space.py\", line 1372, in matrix\n    return self.__matrix_class(self, entries=x, copy=copy, coerce=coerce)\n  File \"matrix_rational_dense.pyx\", line 205, in sage.matrix.matrix_rational_dense.Matrix_rational_dense.__init__ (sage/matrix/matrix_rational_dense.c:5788)\nTypeError: entries must be coercible to a list or integer\n```\n\n`TestSuite(H).run()` also fails for \"_test_elements\".\n\n\nCC:  @tscrim @koffie @JohnCremona @loefflerd @jonhanke\n\nBranch/Commit: **[`761ac1d`](https://github.com/sagemath/sagetrac-mirror/commit/761ac1d2b925153462e3529a374abedb8a8ccb07)**\n\nReviewer: **Travis Scrimshaw, Maarten Derickx**\n\nAuthor: **Fr\u00e9d\u00e9ric Chapoton**\n\nComponent: **modular forms**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/12879_\n\n",
    "closed_at": "2017-08-26T09:58:09Z",
    "created_at": "2012-04-25T00:25:30Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20modular%20forms",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "TestSuite failures for HeckeModule Homsets",
    "type": "issue",
    "updated_at": "2017-08-26T09:58:09Z",
    "url": "https://github.com/sagemath/sage/issues/12879",
    "user": "https://github.com/nthiery"
}
```
Adding a Testsuite run in #12876 in the documentation of
sage.categories.hecke_modules.HeckeModules.ParentMethods._Hom_
revealed the following bug:

```
sage: M = ModularForms(Gamma0(7), 4)
sage: H = Hom(M); H
sage: H.zero()
Traceback (most recent call last):
  File "<ipython console>", line 1, in <module>
  File "cachefunc.pyx", line 1397, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (sage/misc/cachefunc.c:7026)
  File "/opt/sage-5.0.beta11/local/lib/python2.7/site-packages/sage/categories/modules.py", line 221, in zero
    From: Free module generated by {1, 2, 3} over Integer Ring
  File "/opt/sage-5.0.beta11/local/lib/python2.7/site-packages/sage/modular/hecke/homspace.py", line 111, in __call__
    return morphism.HeckeModuleMorphism_matrix(self, A, name)
  File "/opt/sage-5.0.beta11/local/lib/python2.7/site-packages/sage/modular/hecke/morphism.py", line 116, in __init__
    MatrixMorphism.__init__(self, parent, A)
  File "/opt/sage-5.0.beta11/local/lib/python2.7/site-packages/sage/modules/matrix_morphism.py", line 1191, in __init__
    parent.codomain().rank())(A)
  File "/opt/sage-5.0.beta11/local/lib/python2.7/site-packages/sage/matrix/matrix_space.py", line 543, in __call__
    return self.matrix(entries, copy=copy, coerce=coerce, rows=rows)
  File "/opt/sage-5.0.beta11/local/lib/python2.7/site-packages/sage/matrix/matrix_space.py", line 1372, in matrix
    return self.__matrix_class(self, entries=x, copy=copy, coerce=coerce)
  File "matrix_rational_dense.pyx", line 205, in sage.matrix.matrix_rational_dense.Matrix_rational_dense.__init__ (sage/matrix/matrix_rational_dense.c:5788)
TypeError: entries must be coercible to a list or integer
```

`TestSuite(H).run()` also fails for "_test_elements".


CC:  @tscrim @koffie @JohnCremona @loefflerd @jonhanke

Branch/Commit: **[`761ac1d`](https://github.com/sagemath/sagetrac-mirror/commit/761ac1d2b925153462e3529a374abedb8a8ccb07)**

Reviewer: **Travis Scrimshaw, Maarten Derickx**

Author: **Frédéric Chapoton**

Component: **modular forms**

_Issue created by migration from https://trac.sagemath.org/ticket/12879_





---

archive/issue_events_176128.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2012-04-25T00:25:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12879#event-176128"
}
```



---

archive/issue_events_176129.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2012-04-25T00:25:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20modular%20forms",
    "label_color": "0000ff",
    "label_name": "c: modular forms",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12879#event-176129"
}
```



---

archive/issue_events_176130.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2012-04-25T00:25:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12879#event-176130"
}
```



---

archive/issue_events_176131.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2012-04-25T00:25:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12879#event-176131"
}
```



---

archive/issue_events_176132.json:
```json
{
    "actor": "https://github.com/craigcitro",
    "created_at": "2012-04-25T00:25:30Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "subject": "https://github.com/nthiery",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12879#event-176132"
}
```



---

archive/issue_comments_145495.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nNicolas suggested to me to move this from #12876 to here. I found the following steps needed:\n\n* Make `HeckeModule_generic` inherit from `UniqueRepresentation`. I guess it was for a reason that William did not always want modular forms being cached (there *is* a cache, but it isn't always used). Since nowadays the cache has weak keys, it shouldn't be so bad. I'll ask on sage-nt.\n* Provide the Hecke homsets with a `__reduce__` method, so that (after the Hecke modules being unique) the homsets are identical.\n* Provide the Hecke homsets with an `Element` attribute, and let the constructors return instances of the `element_class`. Note that there is only *one* type of morphisms being returned, hence, having a default element class absolutely makes sense.\n* It was impossible to override the custom `__call__` method of Hecke homsets by a proper `_element_construtor_`, since there is yet another custon `__call__` method up in the class hierarchy.\n* Provide the Hecke homsets with a `zero()` method - the default one wouldn't work.\n* Provide the Hecke homsets with an `_an_element_` method. The idea is: Domain and codomain have a known dimension, and the morphisms are given by matrices anyway. Hence, I construct the corresponding matrix space (which I made a lazy attribute to the Hecke homsets), take `an_element` from the matrix space, and return the corresponding morphism.\n\nWith that approach, I get\n\n```\n        sage -t  -force_lib devel/sage/sage/modular/modsym/ambient.py # 1 doctests failed\n        sage -t  -force_lib devel/sage/sage/modular/abvar/homspace.py # 1 doctests failed\n        sage -t  -force_lib devel/sage/sage/modular/modform/constructor.py # 3 doctests failed\n        sage -t  -force_lib devel/sage/sage/modular/quatalg/brandt.py # 3 doctests failed\n        sage -t  -force_lib devel/sage/sage/modular/hecke/ambient_module.py # 2 doctests failed\n        sage -t  -force_lib devel/sage/sage/modular/modsym/modsym.py # 2 doctests failed\n        sage -t  -force_lib devel/sage/sage/modular/abvar/homology.py # 9 doctests failed\n        sage -t  -force_lib devel/sage/sage/modular/modform/hecke_operator_on_qexp.py # 2 doctests failed\n```\nwhich isn't so bad, because most of them fail due to new class names from the category framework.\n\nSuggestion: I provide a small reviewer patch at #12876 making the `TestSuite` skip more tests, and then a proper solution will be dealt with here.",
    "created_at": "2012-08-29T07:40:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12879#issuecomment-145495",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:1" align="right">comment:1</div>

Nicolas suggested to me to move this from #12876 to here. I found the following steps needed:

* Make `HeckeModule_generic` inherit from `UniqueRepresentation`. I guess it was for a reason that William did not always want modular forms being cached (there *is* a cache, but it isn't always used). Since nowadays the cache has weak keys, it shouldn't be so bad. I'll ask on sage-nt.
* Provide the Hecke homsets with a `__reduce__` method, so that (after the Hecke modules being unique) the homsets are identical.
* Provide the Hecke homsets with an `Element` attribute, and let the constructors return instances of the `element_class`. Note that there is only *one* type of morphisms being returned, hence, having a default element class absolutely makes sense.
* It was impossible to override the custom `__call__` method of Hecke homsets by a proper `_element_construtor_`, since there is yet another custon `__call__` method up in the class hierarchy.
* Provide the Hecke homsets with a `zero()` method - the default one wouldn't work.
* Provide the Hecke homsets with an `_an_element_` method. The idea is: Domain and codomain have a known dimension, and the morphisms are given by matrices anyway. Hence, I construct the corresponding matrix space (which I made a lazy attribute to the Hecke homsets), take `an_element` from the matrix space, and return the corresponding morphism.

With that approach, I get

```
        sage -t  -force_lib devel/sage/sage/modular/modsym/ambient.py # 1 doctests failed
        sage -t  -force_lib devel/sage/sage/modular/abvar/homspace.py # 1 doctests failed
        sage -t  -force_lib devel/sage/sage/modular/modform/constructor.py # 3 doctests failed
        sage -t  -force_lib devel/sage/sage/modular/quatalg/brandt.py # 3 doctests failed
        sage -t  -force_lib devel/sage/sage/modular/hecke/ambient_module.py # 2 doctests failed
        sage -t  -force_lib devel/sage/sage/modular/modsym/modsym.py # 2 doctests failed
        sage -t  -force_lib devel/sage/sage/modular/abvar/homology.py # 9 doctests failed
        sage -t  -force_lib devel/sage/sage/modular/modform/hecke_operator_on_qexp.py # 2 doctests failed
```
which isn't so bad, because most of them fail due to new class names from the category framework.

Suggestion: I provide a small reviewer patch at #12876 making the `TestSuite` skip more tests, and then a proper solution will be dealt with here.



---

archive/issue_comments_145496.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nReplying to [@simon-king-jena](#comment%3A1):\n> which isn't so bad, because most of them fail due to new class names from the category framework.\n\nSorry, that was wrong. More nasty errors happen as well.",
    "created_at": "2012-08-29T07:43:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12879#issuecomment-145496",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:2" align="right">comment:2</div>

Replying to [@simon-king-jena](#comment%3A1):
> which isn't so bad, because most of them fail due to new class names from the category framework.

Sorry, that was wrong. More nasty errors happen as well.



---

archive/issue_comments_145497.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nHere is one particularly nasty thing. I stored some objects involved in errors. Reloading them, I find the following in a patched version (as suggested above):\n\n```\nsage: A = load(\"/home/king/SAGE/work/categories/modformA\")\nsage: B = load(\"/home/king/SAGE/work/categories/modformB\")\nsage: A\nModular Symbols space of dimension 3 and level 5, weight 7, character [i], sign 1, over Number Field in c with defining polynomial x^2 - 402*i over its base field\nsage: B\nModular Symbols space of dimension 3 and level 5, weight 7, character [i], sign 1, over Number Field in i with defining polynomial x^2 + 1\nsage: A.boundary_space().dimension()\n0\nsage: K.<i> = QuadraticField(-1)\nsage: x = polygen(K); L.<c> = K.extension(x^2 - 402*i)\nsage: chi = DirichletGroup(5, K).gen(0)\nsage: N = Newforms(chi, 7, base_ring = L)\nsage: Newforms(chi, 7, names='a')\nTraceback (most recent call last):\n...\nTypeError: Unable to coerce x (=[-1]\n[-1]  \n[-1]) to a morphism in Set of Morphisms from Modular Symbols space of dimension 3 and level 5, weight 7, character [i], sign 1, over Number Field in i with defining polynomial x^2 + 1 to Boundary Modular Symbols space of level 5, weight 7, character [i] and dimension 1 over Number Field in c with defining polynomial x^2 - 402*i over its base field in Category of commutative additive groups\nsage: A.boundary_space().dimension()\n1\n```\nHence, `A.boundary_space()` used to be of dimension zero, but during the computation, it is turned into dimension one!\n\nThat does not happen without the patch:\n\n```\nsage: A = load(\"/home/king/SAGE/work/categories/modformA\")\nsage: B = load(\"/home/king/SAGE/work/categories/modformB\")\nsage: A.boundary_space().dimension()\n0\nsage: K.<i> = QuadraticField(-1)\nsage: x = polygen(K); L.<c> = K.extension(x^2 - 402*i)\nsage: chi = DirichletGroup(5, K).gen(0)\nsage: N = Newforms(chi, 7, base_ring = L)\nsage: Newforms(chi, 7, names='a')\n[q + a0*q^2 + (i*a0 - 5*i + 5)*q^3 + ((-5*i - 5)*a0 + 24*i)*q^4 + ((10*i - 5)*a0 - 40*i - 55)*q^5 + O(q^6)]\nsage: A.boundary_space().dimension()\n0\n```\n\nFurther digging reveals: `A.boundary_space().dimension()` is indeed *not* constant! It relies on a list of known generators, that may grow. But with my patch, the homset assumes that the dimensions are constant. Bad me.",
    "created_at": "2012-08-29T12:30:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12879#issuecomment-145497",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:3" align="right">comment:3</div>

Here is one particularly nasty thing. I stored some objects involved in errors. Reloading them, I find the following in a patched version (as suggested above):

```
sage: A = load("/home/king/SAGE/work/categories/modformA")
sage: B = load("/home/king/SAGE/work/categories/modformB")
sage: A
Modular Symbols space of dimension 3 and level 5, weight 7, character [i], sign 1, over Number Field in c with defining polynomial x^2 - 402*i over its base field
sage: B
Modular Symbols space of dimension 3 and level 5, weight 7, character [i], sign 1, over Number Field in i with defining polynomial x^2 + 1
sage: A.boundary_space().dimension()
0
sage: K.<i> = QuadraticField(-1)
sage: x = polygen(K); L.<c> = K.extension(x^2 - 402*i)
sage: chi = DirichletGroup(5, K).gen(0)
sage: N = Newforms(chi, 7, base_ring = L)
sage: Newforms(chi, 7, names='a')
Traceback (most recent call last):
...
TypeError: Unable to coerce x (=[-1]
[-1]  
[-1]) to a morphism in Set of Morphisms from Modular Symbols space of dimension 3 and level 5, weight 7, character [i], sign 1, over Number Field in i with defining polynomial x^2 + 1 to Boundary Modular Symbols space of level 5, weight 7, character [i] and dimension 1 over Number Field in c with defining polynomial x^2 - 402*i over its base field in Category of commutative additive groups
sage: A.boundary_space().dimension()
1
```
Hence, `A.boundary_space()` used to be of dimension zero, but during the computation, it is turned into dimension one!

That does not happen without the patch:

```
sage: A = load("/home/king/SAGE/work/categories/modformA")
sage: B = load("/home/king/SAGE/work/categories/modformB")
sage: A.boundary_space().dimension()
0
sage: K.<i> = QuadraticField(-1)
sage: x = polygen(K); L.<c> = K.extension(x^2 - 402*i)
sage: chi = DirichletGroup(5, K).gen(0)
sage: N = Newforms(chi, 7, base_ring = L)
sage: Newforms(chi, 7, names='a')
[q + a0*q^2 + (i*a0 - 5*i + 5)*q^3 + ((-5*i - 5)*a0 + 24*i)*q^4 + ((10*i - 5)*a0 - 40*i - 55)*q^5 + O(q^6)]
sage: A.boundary_space().dimension()
0
```

Further digging reveals: `A.boundary_space().dimension()` is indeed *not* constant! It relies on a list of known generators, that may grow. But with my patch, the homset assumes that the dimensions are constant. Bad me.



---

archive/issue_comments_145498.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nNo, that didn't help.",
    "created_at": "2012-08-29T12:34:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12879#issuecomment-145498",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:4" align="right">comment:4</div>

No, that didn't help.



---

archive/issue_comments_145499.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@simon-king-jena](#comment%3A4):\n> No, that didn't help.\n\nBah, unless you personnaly need this ticket to be fixed, you can just leave it to the number theory people. That's their problem :-)\n\n+1 on the short reviewer patch on #12876\n\nCheers,\n                                    Nicolas",
    "created_at": "2012-08-29T12:54:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12879#issuecomment-145499",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@simon-king-jena](#comment%3A4):
> No, that didn't help.

Bah, unless you personnaly need this ticket to be fixed, you can just leave it to the number theory people. That's their problem :-)

+1 on the short reviewer patch on #12876

Cheers,
                                    Nicolas



---

archive/issue_events_176133.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12879#event-176133"
}
```



---

archive/issue_events_176134.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12879#event-176134"
}
```



---

archive/issue_events_176135.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12879#event-176135"
}
```



---

archive/issue_events_176136.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12879#event-176136"
}
```



---

archive/issue_events_176137.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12879#event-176137"
}
```



---

archive/issue_events_176138.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12879#event-176138"
}
```



---

archive/issue_events_176139.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12879#event-176139"
}
```



---

archive/issue_events_176140.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12879#event-176140"
}
```



---

archive/issue_comments_145500.json:
```json
{
    "body": "Branch: **[u/chapoton/12879](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/12879)**",
    "created_at": "2017-07-27T08:56:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12879#issuecomment-145500",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[u/chapoton/12879](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/12879)**



---

archive/issue_events_176141.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-07-27T08:56:05Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12879#event-176141"
}
```



---

archive/issue_events_176142.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-07-27T08:56:05Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12879#event-176142"
}
```



---

archive/issue_events_176143.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-07-27T08:56:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12879#event-176143"
}
```



---

archive/issue_comments_145501.json:
```json
{
    "body": "Commit: **[`578b814`](https://github.com/sagemath/sagetrac-mirror/commit/578b8144d44d00316b107eafd915c60ebecb604e)**",
    "created_at": "2017-07-27T08:56:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12879#issuecomment-145501",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[`578b814`](https://github.com/sagemath/sagetrac-mirror/commit/578b8144d44d00316b107eafd915c60ebecb604e)**



---

archive/issue_comments_145502.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nHere is a try. Not perfect, but better than right now.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/578b8144d44d00316b107eafd915c60ebecb604e\"><code>578b814</code></a></td><td><code>trac 12879 some care for Hecke modules homsets</code></td></tr></table>\n",
    "created_at": "2017-07-27T08:56:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12879#issuecomment-145502",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:10" align="right">comment:10</div>

Here is a try. Not perfect, but better than right now.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/578b8144d44d00316b107eafd915c60ebecb604e"><code>578b814</code></a></td><td><code>trac 12879 some care for Hecke modules homsets</code></td></tr></table>




---

archive/issue_comments_145503.json:
```json
{
    "body": "Author: **Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2017-07-27T08:56:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12879#issuecomment-145503",
    "user": "https://github.com/fchapoton"
}
```

Author: **Frédéric Chapoton**



---

archive/issue_comments_145504.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nbot is morally green, please review",
    "created_at": "2017-07-27T17:04:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12879#issuecomment-145504",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:11" align="right">comment:11</div>

bot is morally green, please review



---

archive/issue_events_176144.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-07-28T17:00:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12879#event-176144"
}
```



---

archive/issue_events_176145.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-07-28T17:00:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12879#event-176145"
}
```



---

archive/issue_comments_145505.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nLGTM. At least there is nothing in the documentation that seems to put a restriction on what the matrices could be.",
    "created_at": "2017-07-28T17:00:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12879#issuecomment-145505",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:12" align="right">comment:12</div>

LGTM. At least there is nothing in the documentation that seems to put a restriction on what the matrices could be.



---

archive/issue_comments_145506.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2017-07-28T17:00:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12879#issuecomment-145506",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_145507.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nOh, I did not think about that. Indeed, these Hecke modules are modules, so there are some operators that should act in a compatible way on both domain and codomain. Maybe we should not implement this \"naive\" version of an_element, which is probably not correct.",
    "created_at": "2017-07-28T18:25:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12879#issuecomment-145507",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:13" align="right">comment:13</div>

Oh, I did not think about that. Indeed, these Hecke modules are modules, so there are some operators that should act in a compatible way on both domain and codomain. Maybe we should not implement this "naive" version of an_element, which is probably not correct.



---

archive/issue_comments_145508.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nWell, there is no real documentation or checks in the code on this AFAICS. So as far as it is specified, any matrix will work. Perhaps also cc some number theory people to get their opinion?",
    "created_at": "2017-07-29T06:41:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12879#issuecomment-145508",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:14" align="right">comment:14</div>

Well, there is no real documentation or checks in the code on this AFAICS. So as far as it is specified, any matrix will work. Perhaps also cc some number theory people to get their opinion?



---

archive/issue_comments_145509.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nTo specialists of modular forms and symbols, do you agree with the proposed implementation of \"an_element\" for the space of Hecke module morphisms ? In short, we just take a random matrix, and declare that it is a morphism, which seems dubious.",
    "created_at": "2017-07-29T06:45:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12879#issuecomment-145509",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:15" align="right">comment:15</div>

To specialists of modular forms and symbols, do you agree with the proposed implementation of "an_element" for the space of Hecke module morphisms ? In short, we just take a random matrix, and declare that it is a morphism, which seems dubious.



---

archive/issue_comments_145510.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nNo, since it does not take into account that Hecke module are modules over some Hecke algebra. So indeed as you say earlier, morphisms should commute with the action of the Hecke operators on both sides. I think creating a valid nonzero element (if it exists, which is very often not the case) is something that is not trivial to implement. So I would maybe always just return the zero morphism. If domain and codomain are equal you could do something like `_.hecke_operator(2)` if you want a more typical element.",
    "created_at": "2017-07-29T09:38:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12879#issuecomment-145510",
    "user": "https://github.com/koffie"
}
```

<div id="comment:16" align="right">comment:16</div>

No, since it does not take into account that Hecke module are modules over some Hecke algebra. So indeed as you say earlier, morphisms should commute with the action of the Hecke operators on both sides. I think creating a valid nonzero element (if it exists, which is very often not the case) is something that is not trivial to implement. So I would maybe always just return the zero morphism. If domain and codomain are equal you could do something like `_.hecke_operator(2)` if you want a more typical element.



---

archive/issue_events_176146.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-07-29T09:40:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12879#event-176146"
}
```



---

archive/issue_events_176147.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-07-29T09:40:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12879#event-176147"
}
```



---

archive/issue_comments_145511.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nok, thanks",
    "created_at": "2017-07-29T09:40:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12879#issuecomment-145511",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:17" align="right">comment:17</div>

ok, thanks



---

archive/issue_comments_145512.json:
```json
{
    "body": "Changed commit from **[`578b814`](https://github.com/sagemath/sagetrac-mirror/commit/578b8144d44d00316b107eafd915c60ebecb604e)** to **[`dc917d4`](https://github.com/sagemath/sagetrac-mirror/commit/dc917d4e81a9f7daf8560748c0747371440d75d8)**",
    "created_at": "2017-07-29T09:53:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12879#issuecomment-145512",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`578b814`](https://github.com/sagemath/sagetrac-mirror/commit/578b8144d44d00316b107eafd915c60ebecb604e)** to **[`dc917d4`](https://github.com/sagemath/sagetrac-mirror/commit/dc917d4e81a9f7daf8560748c0747371440d75d8)**



---

archive/issue_comments_145513.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dc917d4e81a9f7daf8560748c0747371440d75d8\"><code>dc917d4</code></a></td><td><code>trac 12879 implement a correct element</code></td></tr></table>\n",
    "created_at": "2017-07-29T09:53:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12879#issuecomment-145513",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dc917d4e81a9f7daf8560748c0747371440d75d8"><code>dc917d4</code></a></td><td><code>trac 12879 implement a correct element</code></td></tr></table>




---

archive/issue_events_176148.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-07-29T09:53:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12879#event-176148"
}
```



---

archive/issue_events_176149.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-07-29T09:53:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12879#event-176149"
}
```



---

archive/issue_comments_145514.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\ndone, please review.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dc917d4e81a9f7daf8560748c0747371440d75d8\"><code>dc917d4</code></a></td><td><code>trac 12879 implement a correct element</code></td></tr></table>\n",
    "created_at": "2017-07-29T09:53:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12879#issuecomment-145514",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:19" align="right">comment:19</div>

done, please review.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dc917d4e81a9f7daf8560748c0747371440d75d8"><code>dc917d4</code></a></td><td><code>trac 12879 implement a correct element</code></td></tr></table>




---

archive/issue_comments_145515.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nI also looked at the code in `__call__`, and the part that handles the case that A is an element of the basing only makes sense if the domain and codomain are actually the same space! If A is in the base ring but the domain and the codomain are unequal we should throw an Error.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dc917d4e81a9f7daf8560748c0747371440d75d8\"><code>dc917d4</code></a></td><td><code>trac 12879 implement a correct element</code></td></tr></table>\n",
    "created_at": "2017-07-29T09:58:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12879#issuecomment-145515",
    "user": "https://github.com/koffie"
}
```

<div id="comment:20" align="right">comment:20</div>

I also looked at the code in `__call__`, and the part that handles the case that A is an element of the basing only makes sense if the domain and codomain are actually the same space! If A is in the base ring but the domain and the codomain are unequal we should throw an Error.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dc917d4e81a9f7daf8560748c0747371440d75d8"><code>dc917d4</code></a></td><td><code>trac 12879 implement a correct element</code></td></tr></table>




---

archive/issue_comments_145516.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nThe call of identity matrix will raise an error if the dimensions are not the same. Do you want an explicit check that domain == codomain ?",
    "created_at": "2017-07-29T10:18:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12879#issuecomment-145516",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:21" align="right">comment:21</div>

The call of identity matrix will raise an error if the dimensions are not the same. Do you want an explicit check that domain == codomain ?



---

archive/issue_comments_145517.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1ea2824e6813a8f2bcaaae332537681126aded03\"><code>1ea2824</code></a></td><td><code>trac 12879 stronger check for scalar elements</code></td></tr></table>\n",
    "created_at": "2017-07-29T11:22:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12879#issuecomment-145517",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1ea2824e6813a8f2bcaaae332537681126aded03"><code>1ea2824</code></a></td><td><code>trac 12879 stronger check for scalar elements</code></td></tr></table>




---

archive/issue_comments_145518.json:
```json
{
    "body": "Changed commit from **[`dc917d4`](https://github.com/sagemath/sagetrac-mirror/commit/dc917d4e81a9f7daf8560748c0747371440d75d8)** to **[`1ea2824`](https://github.com/sagemath/sagetrac-mirror/commit/1ea2824e6813a8f2bcaaae332537681126aded03)**",
    "created_at": "2017-07-29T11:22:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12879#issuecomment-145518",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`dc917d4`](https://github.com/sagemath/sagetrac-mirror/commit/dc917d4e81a9f7daf8560748c0747371440d75d8)** to **[`1ea2824`](https://github.com/sagemath/sagetrac-mirror/commit/1ea2824e6813a8f2bcaaae332537681126aded03)**



---

archive/issue_events_176150.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-07-29T19:26:37Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12879#event-176150"
}
```



---

archive/issue_events_176151.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-07-29T19:26:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12879#event-176151"
}
```



---

archive/issue_comments_145519.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\n@vbraun Why the bump to 8.2?",
    "created_at": "2017-07-30T17:05:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12879#issuecomment-145519",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:24" align="right">comment:24</div>

@vbraun Why the bump to 8.2?



---

archive/issue_comments_145520.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nHi Sorry for not reacting earlier. I see that you added the explicit check for `domain == codomain` which is good! It is possible to construct hecke modules which have noting to do with each other that still have the same rank. And then asking for the identity matrix makes no sense, since it is a linear map that sends whichever basis we computed for the first space to a basis we computed for the second space, and since the basis are quite random so is the map. In particular it will rarely be a hecke module morphism.",
    "created_at": "2017-08-13T21:52:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12879#issuecomment-145520",
    "user": "https://github.com/koffie"
}
```

<div id="comment:25" align="right">comment:25</div>

Hi Sorry for not reacting earlier. I see that you added the explicit check for `domain == codomain` which is good! It is possible to construct hecke modules which have noting to do with each other that still have the same rank. And then asking for the identity matrix makes no sense, since it is a linear map that sends whichever basis we computed for the first space to a basis we computed for the second space, and since the basis are quite random so is the map. In particular it will rarely be a hecke module morphism.



---

archive/issue_comments_145521.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nI've looked at the code and I can give a positive review on the mathematical content of this ticket. I have no Idea what all the `TestSuite` stuff is about. So is there someone else who can say that that part makes sense?",
    "created_at": "2017-08-13T21:54:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12879#issuecomment-145521",
    "user": "https://github.com/koffie"
}
```

<div id="comment:26" align="right">comment:26</div>

I've looked at the code and I can give a positive review on the mathematical content of this ticket. I have no Idea what all the `TestSuite` stuff is about. So is there someone else who can say that that part makes sense?



---

archive/issue_comments_145522.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\n@koffie `TestSuite` runs a bunch of \"standard\" tests on the object (i.e., all of the `_test_*` methods of an object) as a consistency check. Also, if you add your (real) name to the reviewers.\n\n@fchapoton I believe we are now claiming it passes the `TestSuite`, so I think we should explicitly add that as a doctest.",
    "created_at": "2017-08-14T01:14:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12879#issuecomment-145522",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:27" align="right">comment:27</div>

@koffie `TestSuite` runs a bunch of "standard" tests on the object (i.e., all of the `_test_*` methods of an object) as a consistency check. Also, if you add your (real) name to the reviewers.

@fchapoton I believe we are now claiming it passes the `TestSuite`, so I think we should explicitly add that as a doctest.



---

archive/issue_comments_145523.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nno, the TestSuite still does not pass:\n\n```\n  The following tests failed: _test_category\nFailure in _test_elements\nThe following tests failed: _test_elements\n```",
    "created_at": "2017-08-20T06:48:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12879#issuecomment-145523",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:28" align="right">comment:28</div>

no, the TestSuite still does not pass:

```
  The following tests failed: _test_category
Failure in _test_elements
The following tests failed: _test_elements
```



---

archive/issue_comments_145524.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nIs it possible to get more verbose output?",
    "created_at": "2017-08-20T12:55:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12879#issuecomment-145524",
    "user": "https://github.com/koffie"
}
```

<div id="comment:29" align="right">comment:29</div>

Is it possible to get more verbose output?



---

archive/issue_comments_145525.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\noh, well, this says\n\n```\n  Running the test suite of self.an_element()\n  running ._test_category() . . . fail\n  Traceback (most recent call last):\n    File \"/home/chapoton/sage/local/lib/python2.7/site-packages/sage/misc/sage_unittest.py\", line 293, in run\n      test_method(tester = tester)\n    File \"sage/structure/element.pyx\", line 687, in sage.structure.element.Element._test_category (/home/chapoton/sage/src/build/cythonized/sage/structure/element.c:6380)\n      tester.assert_(isinstance(self, self.parent().category().element_class))\n    File \"/home/chapoton/sage/local/lib/python2.7/unittest/case.py\", line 422, in assertTrue\n      raise self.failureException(msg)\n  AssertionError: False is not true\n```",
    "created_at": "2017-08-20T13:13:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12879#issuecomment-145525",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:30" align="right">comment:30</div>

oh, well, this says

```
  Running the test suite of self.an_element()
  running ._test_category() . . . fail
  Traceback (most recent call last):
    File "/home/chapoton/sage/local/lib/python2.7/site-packages/sage/misc/sage_unittest.py", line 293, in run
      test_method(tester = tester)
    File "sage/structure/element.pyx", line 687, in sage.structure.element.Element._test_category (/home/chapoton/sage/src/build/cythonized/sage/structure/element.c:6380)
      tester.assert_(isinstance(self, self.parent().category().element_class))
    File "/home/chapoton/sage/local/lib/python2.7/unittest/case.py", line 422, in assertTrue
      raise self.failureException(msg)
  AssertionError: False is not true
```



---

archive/issue_comments_145526.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nThat is a common issue for Homsets because of it creating elements that are not specifically an instance of its unique `Element` class. Currently, we don't have the infastructure to really work around this.\n\nCould we add a `TestSuite` that skips the `_test_elements` (this is done for other Homsets too)?",
    "created_at": "2017-08-20T16:40:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12879#issuecomment-145526",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:31" align="right">comment:31</div>

That is a common issue for Homsets because of it creating elements that are not specifically an instance of its unique `Element` class. Currently, we don't have the infastructure to really work around this.

Could we add a `TestSuite` that skips the `_test_elements` (this is done for other Homsets too)?



---

archive/issue_comments_145527.json:
```json
{
    "body": "<div id=\"comment:32\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e7132eea7f646e36917251a6f8233aac10cfcfde\"><code>e7132ee</code></a></td><td><code>Merge branch 'u/chapoton/12879' in 8.1.b2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/761ac1d2b925153462e3529a374abedb8a8ccb07\"><code>761ac1d</code></a></td><td><code>trac 12879 adding TesTsuite</code></td></tr></table>\n",
    "created_at": "2017-08-20T17:49:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12879#issuecomment-145527",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:32"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e7132eea7f646e36917251a6f8233aac10cfcfde"><code>e7132ee</code></a></td><td><code>Merge branch 'u/chapoton/12879' in 8.1.b2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/761ac1d2b925153462e3529a374abedb8a8ccb07"><code>761ac1d</code></a></td><td><code>trac 12879 adding TesTsuite</code></td></tr></table>




---

archive/issue_comments_145528.json:
```json
{
    "body": "Changed commit from **[`1ea2824`](https://github.com/sagemath/sagetrac-mirror/commit/1ea2824e6813a8f2bcaaae332537681126aded03)** to **[`761ac1d`](https://github.com/sagemath/sagetrac-mirror/commit/761ac1d2b925153462e3529a374abedb8a8ccb07)**",
    "created_at": "2017-08-20T17:49:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12879#issuecomment-145528",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1ea2824`](https://github.com/sagemath/sagetrac-mirror/commit/1ea2824e6813a8f2bcaaae332537681126aded03)** to **[`761ac1d`](https://github.com/sagemath/sagetrac-mirror/commit/761ac1d2b925153462e3529a374abedb8a8ccb07)**



---

archive/issue_comments_145529.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\ndone",
    "created_at": "2017-08-20T17:50:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12879#issuecomment-145529",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:33" align="right">comment:33</div>

done



---

archive/issue_comments_145530.json:
```json
{
    "body": "Changed reviewer from **Travis Scrimshaw** to **Travis Scrimshaw, Maarten Derickx**",
    "created_at": "2017-08-20T18:10:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12879#issuecomment-145530",
    "user": "https://github.com/tscrim"
}
```

Changed reviewer from **Travis Scrimshaw** to **Travis Scrimshaw, Maarten Derickx**



---

archive/issue_events_176152.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-08-20T18:10:09Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12879#event-176152"
}
```



---

archive/issue_events_176153.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-08-20T18:10:09Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12879#event-176153"
}
```



---

archive/issue_comments_145531.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nThank you.",
    "created_at": "2017-08-20T18:10:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12879#issuecomment-145531",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:34" align="right">comment:34</div>

Thank you.



---

archive/issue_events_176154.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-08-20T18:10:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12879#event-176154"
}
```



---

archive/issue_events_176155.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-08-20T18:10:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12879#event-176155"
}
```



---

archive/issue_comments_145532.json:
```json
{
    "body": "Changed branch from **[u/chapoton/12879](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/12879)** to **[`761ac1d`](https://github.com/sagemath/sagetrac-mirror/commit/761ac1d2b925153462e3529a374abedb8a8ccb07)**",
    "created_at": "2017-08-26T09:58:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12879#issuecomment-145532",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/chapoton/12879](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/12879)** to **[`761ac1d`](https://github.com/sagemath/sagetrac-mirror/commit/761ac1d2b925153462e3529a374abedb8a8ccb07)**



---

archive/issue_events_176156.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-08-26T09:58:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12879#event-176156"
}
```



---

archive/issue_events_176157.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "ddf46df0bd0c029e86750c0da1738dbf5f2d8864",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-08-26T09:58:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/12879",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12879#event-176157"
}
```
