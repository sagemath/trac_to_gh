# Issue 12975: Fix misleading typo in the doc of "cython"

archive/issues_012803.json:
```json
{
    "body": "\n```\nsage: cython?\n...\n       For example:\n    \n          #clang C++\n          #clib givaro\n          #cinclude /usr/local/include/\n          #cargs -ggdb\n          #cfile foo.c\n...\n```\n\nThat's misleading, as Cython does only accept `#clang c++` but not `#clang C++`. Thank you, Burcin, for pointing that out!\n\n__Apply__\n\n* [attachment:trac_12975-cython_cpp_pragma.patch]\n* [attachment:trac_12975_reviewer.patch]\n\nAssignee: mvngu\n\nCC:  @burcin\n\nReviewer: Simon King\n\nAuthor: Burcin Erocal\n\nMerged: sage-5.1.beta1\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/12975\n\n",
    "closed_at": "2012-05-23T21:39:04Z",
    "created_at": "2012-05-19T12:51:06Z",
    "labels": [
        "component: interfaces",
        "trivial",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.1",
    "title": "Fix misleading typo in the doc of \"cython\"",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12975",
    "user": "https://github.com/simon-king-jena"
}
```

```
sage: cython?
...
       For example:
    
          #clang C++
          #clib givaro
          #cinclude /usr/local/include/
          #cargs -ggdb
          #cfile foo.c
...
```

That's misleading, as Cython does only accept `#clang c++` but not `#clang C++`. Thank you, Burcin, for pointing that out!

__Apply__

* [attachment:trac_12975-cython_cpp_pragma.patch]
* [attachment:trac_12975_reviewer.patch]

Assignee: mvngu

CC:  @burcin

Reviewer: Simon King

Author: Burcin Erocal

Merged: sage-5.1.beta1

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/12975





---

archive/issue_comments_190603.json:
```json
{
    "body": "<a id='comment:1'></a>C++ typo fixed.",
    "created_at": "2012-05-19T12:53:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12975",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12975#issuecomment-190603",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:1'></a>C++ typo fixed.



---

archive/issue_comments_190604.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-05-19T12:53:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12975",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12975#issuecomment-190604",
    "user": "https://github.com/simon-king-jena"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_190605.json:
```json
{
    "body": "<a id='comment:2'></a>I attached a new patch which should allow `cython()` to accept `#clang C++` as well as `#clang c++`. I have no clue how to doctest this.",
    "created_at": "2012-05-19T13:10:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12975",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12975#issuecomment-190605",
    "user": "https://github.com/burcin"
}
```

<a id='comment:2'></a>I attached a new patch which should allow `cython()` to accept `#clang C++` as well as `#clang c++`. I have no clue how to doctest this.



---

archive/issue_comments_190606.json:
```json
{
    "body": "<a id='comment:3'></a>With your patch, the following still does not work\n\n```\nsage: cython(\"\"\"#clang C++\n....: #cinclude /home/simon/SAGE/sage-5.0/local/include/singular /home/simon/SAGE/sage-5.0/local/include/factory \n....: #clib m readline singular givaro ntl gmpxx gmp\n....: from sage.rings.polynomial.multi_polynomial_libsingular cimport MPolynomial_libsingular\n....: \"\"\")\n---------------------------------------------------------------------------\nRuntimeError                              Traceback (most recent call last)\n\n/home/simon/SAGE/sage-5.0/devel/sage-main/<ipython console> in <module>()\n\n/home/simon/SAGE/sage-5.0/local/lib/python2.7/site-packages/sage/misc/cython_c.so in sage.misc.cython_c.cython (sage/misc/cython_c.c:688)()\n\n/home/simon/SAGE/sage-5.0/local/lib/python2.7/site-packages/sage/server/support.pyc in cython_import_all(filename, globals, verbose, compile_message, use_cache, create_local_c_file)\n    471     m = cython_import(filename, verbose=verbose, compile_message=compile_message,\n    472                      use_cache=use_cache,\n--> 473                      create_local_c_file=create_local_c_file)\n    474     for k, x in m.__dict__.iteritems():\n    475         if k[0] != '_':\n\n/home/simon/SAGE/sage-5.0/local/lib/python2.7/site-packages/sage/server/support.pyc in cython_import(filename, verbose, compile_message, use_cache, create_local_c_file, **kwds)\n    448                                             use_cache=use_cache,\n    449                                             create_local_c_file=create_local_c_file,\n--> 450                                             **kwds)\n    451     sys.path.append(build_dir)\n    452     return __builtin__.__import__(name)\n\n/home/simon/SAGE/sage-5.0/local/lib/python2.7/site-packages/sage/misc/cython.pyc in cython(filename, verbose, compile_message, use_cache, create_local_c_file, annotate, sage_namespace, create_local_so_file)\n    529         log = open('%s/log'%build_dir).read()\n    530         err = open('%s/err'%build_dir).read()\n--> 531         raise RuntimeError, \"Error compiling %s:\\n%s\\n%s\"%(filename, log, err)\n    532 \n    533     # Move from lib directory.\n\nRuntimeError: Error compiling /home/simon/.sage//temp/linux_sqwp.site/5382//tmp_2.spyx:\nrunning build\nrunning build_ext\nbuilding '_home_simon__sage_temp_linux_sqwp_site_5382_tmp_2_spyx_0' extension\ncreating build\ncreating build/temp.linux-x86_64-2.7\ngcc -fno-strict-aliasing -fwrapv -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I/home/simon/SAGE/sage-5.0/local/include/singular -I/home/simon/SAGE/sage-5.0/local/include/factory -I/home/simon/SAGE/sage-5.0/local/include/csage/ -I/home/simon/SAGE/sage-5.0/local/include/ -I/home/simon/SAGE/sage-5.0/local/include/python2.7/ -I/home/simon/SAGE/sage-5.0/local/lib/python2.7/site-packages/numpy/core/include -I/home/simon/SAGE/sage-5.0/devel/sage/sage/ext/ -I/home/simon/SAGE/sage-5.0/devel/sage/ -I/home/simon/SAGE/sage-5.0/devel/sage/sage/gsl/ -I/home/simon/.sage//temp/linux_sqwp.site/5382 -I/home/simon/SAGE/sage-5.0/local/include/python2.7 -c _home_simon__sage_temp_linux_sqwp_site_5382_tmp_2_spyx_0.cpp -o build/temp.linux-x86_64-2.7/_home_simon__sage_temp_linux_sqwp_site_5382_tmp_2_spyx_0.o -w -O2\n\ngcc: error: _home_simon__sage_temp_linux_sqwp_site_5382_tmp_2_spyx_0.cpp: Datei oder Verzeichnis nicht gefunden\ngcc: fatal error: no input files\ncompilation terminated.\nerror: command 'gcc' failed with exit status 1\n```\n\nHence, one still needs\n\n```\nsage: cython(\"\"\"#clang c++\n#cinclude /home/simon/SAGE/sage-5.0/local/include/singular /home/simon/SAGE/sage-5.0/local/include/factory \n#clib m readline singular givaro ntl gmpxx gmp\nfrom sage.rings.polynomial.multi_polynomial_libsingular cimport MPolynomial_libsingular\n\"\"\")",
    "created_at": "2012-05-19T14:17:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12975",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12975#issuecomment-190606",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:3'></a>With your patch, the following still does not work

```
sage: cython("""#clang C++
....: #cinclude /home/simon/SAGE/sage-5.0/local/include/singular /home/simon/SAGE/sage-5.0/local/include/factory 
....: #clib m readline singular givaro ntl gmpxx gmp
....: from sage.rings.polynomial.multi_polynomial_libsingular cimport MPolynomial_libsingular
....: """)
---------------------------------------------------------------------------
RuntimeError                              Traceback (most recent call last)

/home/simon/SAGE/sage-5.0/devel/sage-main/<ipython console> in <module>()

/home/simon/SAGE/sage-5.0/local/lib/python2.7/site-packages/sage/misc/cython_c.so in sage.misc.cython_c.cython (sage/misc/cython_c.c:688)()

/home/simon/SAGE/sage-5.0/local/lib/python2.7/site-packages/sage/server/support.pyc in cython_import_all(filename, globals, verbose, compile_message, use_cache, create_local_c_file)
    471     m = cython_import(filename, verbose=verbose, compile_message=compile_message,
    472                      use_cache=use_cache,
--> 473                      create_local_c_file=create_local_c_file)
    474     for k, x in m.__dict__.iteritems():
    475         if k[0] != '_':

/home/simon/SAGE/sage-5.0/local/lib/python2.7/site-packages/sage/server/support.pyc in cython_import(filename, verbose, compile_message, use_cache, create_local_c_file, **kwds)
    448                                             use_cache=use_cache,
    449                                             create_local_c_file=create_local_c_file,
--> 450                                             **kwds)
    451     sys.path.append(build_dir)
    452     return __builtin__.__import__(name)

/home/simon/SAGE/sage-5.0/local/lib/python2.7/site-packages/sage/misc/cython.pyc in cython(filename, verbose, compile_message, use_cache, create_local_c_file, annotate, sage_namespace, create_local_so_file)
    529         log = open('%s/log'%build_dir).read()
    530         err = open('%s/err'%build_dir).read()
--> 531         raise RuntimeError, "Error compiling %s:\n%s\n%s"%(filename, log, err)
    532 
    533     # Move from lib directory.

RuntimeError: Error compiling /home/simon/.sage//temp/linux_sqwp.site/5382//tmp_2.spyx:
running build
running build_ext
building '_home_simon__sage_temp_linux_sqwp_site_5382_tmp_2_spyx_0' extension
creating build
creating build/temp.linux-x86_64-2.7
gcc -fno-strict-aliasing -fwrapv -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I/home/simon/SAGE/sage-5.0/local/include/singular -I/home/simon/SAGE/sage-5.0/local/include/factory -I/home/simon/SAGE/sage-5.0/local/include/csage/ -I/home/simon/SAGE/sage-5.0/local/include/ -I/home/simon/SAGE/sage-5.0/local/include/python2.7/ -I/home/simon/SAGE/sage-5.0/local/lib/python2.7/site-packages/numpy/core/include -I/home/simon/SAGE/sage-5.0/devel/sage/sage/ext/ -I/home/simon/SAGE/sage-5.0/devel/sage/ -I/home/simon/SAGE/sage-5.0/devel/sage/sage/gsl/ -I/home/simon/.sage//temp/linux_sqwp.site/5382 -I/home/simon/SAGE/sage-5.0/local/include/python2.7 -c _home_simon__sage_temp_linux_sqwp_site_5382_tmp_2_spyx_0.cpp -o build/temp.linux-x86_64-2.7/_home_simon__sage_temp_linux_sqwp_site_5382_tmp_2_spyx_0.o -w -O2

gcc: error: _home_simon__sage_temp_linux_sqwp_site_5382_tmp_2_spyx_0.cpp: Datei oder Verzeichnis nicht gefunden
gcc: fatal error: no input files
compilation terminated.
error: command 'gcc' failed with exit status 1
```

Hence, one still needs

```
sage: cython("""#clang c++
#cinclude /home/simon/SAGE/sage-5.0/local/include/singular /home/simon/SAGE/sage-5.0/local/include/factory 
#clib m readline singular givaro ntl gmpxx gmp
from sage.rings.polynomial.multi_polynomial_libsingular cimport MPolynomial_libsingular
""")



---

archive/issue_comments_190607.json:
```json
{
    "body": "<a id='comment:4'></a>My reviewer patch will contain a test such as this:\n\n```\n    TESTS:\n\n    Before :trac:`12975`, it would have beeen needed to write ``#clang c++``,\n    but upper case ``C++`` has resulted in an error::\n\n        sage: from sage.all import SAGE_ROOT\n        sage: code = [                     \n        ... \"#clang C++\",\n        ... \"#cinclude %s/local/include/singular %s/local/include/factory\"%(SAGE_ROOT,SAGE_ROOT),\n        ... \"#clib m readline singular givaro ntl gmpxx gmp\",\n        ... \"from sage.rings.polynomial.multi_polynomial_libsingular cimport MPolynomial_libsingular\",\n        ... \"from sage.libs.singular.polynomial cimport singular_polynomial_pow\",\n        ... \"def test(MPolynomial_libsingular p):\",\n        ... \"    singular_polynomial_pow(&p._poly, p._poly, 2, p._parent_ring)\"]\n        sage: cython(os.linesep.join(code))\n\n    The function ``test`` now manipulates internal C data of polynomials,\n    squaring them::\n\n        sage: P.<x,y>=QQ[]\n        sage: test(x)\n        sage: x\n        x^2\n```\nBut with your current patch, one would still need c++, not C++.",
    "created_at": "2012-05-19T14:23:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12975",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12975#issuecomment-190607",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:4'></a>My reviewer patch will contain a test such as this:

```
    TESTS:

    Before :trac:`12975`, it would have beeen needed to write ``#clang c++``,
    but upper case ``C++`` has resulted in an error::

        sage: from sage.all import SAGE_ROOT
        sage: code = [                     
        ... "#clang C++",
        ... "#cinclude %s/local/include/singular %s/local/include/factory"%(SAGE_ROOT,SAGE_ROOT),
        ... "#clib m readline singular givaro ntl gmpxx gmp",
        ... "from sage.rings.polynomial.multi_polynomial_libsingular cimport MPolynomial_libsingular",
        ... "from sage.libs.singular.polynomial cimport singular_polynomial_pow",
        ... "def test(MPolynomial_libsingular p):",
        ... "    singular_polynomial_pow(&p._poly, p._poly, 2, p._parent_ring)"]
        sage: cython(os.linesep.join(code))

    The function ``test`` now manipulates internal C data of polynomials,
    squaring them::

        sage: P.<x,y>=QQ[]
        sage: test(x)
        sage: x
        x^2
```
But with your current patch, one would still need c++, not C++.



---

archive/issue_comments_190608.json:
```json
{
    "body": "<a id='comment:5'></a>Attachment [trac_12975-cython_cpp_pragma.patch](tarball://root/attachments/some-uuid/ticket12975/trac_12975-cython_cpp_pragma.patch) by @burcin created at 2012-05-19 14:47:13\n\nNew patch attached with same name. This one should do it. :)",
    "created_at": "2012-05-19T14:47:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12975",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12975#issuecomment-190608",
    "user": "https://github.com/burcin"
}
```

<a id='comment:5'></a>Attachment [trac_12975-cython_cpp_pragma.patch](tarball://root/attachments/some-uuid/ticket12975/trac_12975-cython_cpp_pragma.patch) by @burcin created at 2012-05-19 14:47:13

New patch attached with same name. This one should do it. :)



---

archive/issue_comments_190609.json:
```json
{
    "body": "Changing author from \"Simon King\" to \"Simon King, Burcin Erocal\"",
    "created_at": "2012-05-19T14:47:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12975",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12975#issuecomment-190609",
    "user": "https://github.com/burcin"
}
```

Changing author from "Simon King" to "Simon King, Burcin Erocal"



---

archive/issue_comments_190610.json:
```json
{
    "body": "doc test for Burcin's patch",
    "created_at": "2012-05-19T15:30:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12975",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12975#issuecomment-190610",
    "user": "https://github.com/simon-king-jena"
}
```

doc test for Burcin's patch



---

archive/issue_comments_190611.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -14,4 +14,7 @@\n \n That's misleading, as Cython does only accept `#clang c++` but not `#clang C++`. Thank you, Burcin, for pointing that out!\n \n-Fixed in the attached patch.\n+__Apply__\n+\n+* [attachment:trac_12975-cython_cpp_pragma.patch]\n+* [attachment:trac_12975_reviewer.patch]\n``````\n",
    "created_at": "2012-05-19T15:33:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12975",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12975#issuecomment-190611",
    "user": "https://github.com/simon-king-jena"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -14,4 +14,7 @@
 
 That's misleading, as Cython does only accept `#clang c++` but not `#clang C++`. Thank you, Burcin, for pointing that out!
 
-Fixed in the attached patch.
+__Apply__
+
+* [attachment:trac_12975-cython_cpp_pragma.patch]
+* [attachment:trac_12975_reviewer.patch]
``````




---

archive/issue_comments_190612.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Simon King\"",
    "created_at": "2012-05-19T15:33:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12975",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12975#issuecomment-190612",
    "user": "https://github.com/simon-king-jena"
}
```

Changing reviewer from "" to "Simon King"



---

archive/issue_comments_190613.json:
```json
{
    "body": "Changing author from \"Simon King, Burcin Erocal\" to \"Burcin Erocal\"",
    "created_at": "2012-05-19T15:33:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12975",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12975#issuecomment-190613",
    "user": "https://github.com/simon-king-jena"
}
```

Changing author from "Simon King, Burcin Erocal" to "Burcin Erocal"



---

archive/issue_comments_190614.json:
```json
{
    "body": "<a id='comment:6'></a>Attachment [trac_12975_reviewer.patch](tarball://root/attachments/some-uuid/ticket12975/trac_12975_reviewer.patch) by @simon-king-jena created at 2012-05-19 15:33:21\n\nI have successfully run the tests in sage/misc with your patch and my reviewer patch. I will wait for a full test run (either by myself or the patchbot) before giving a positive review.\n\nApply trac_12975-cython_cpp_pragma.patch trac_12975_reviewer.patch",
    "created_at": "2012-05-19T15:33:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12975",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12975#issuecomment-190614",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:6'></a>Attachment [trac_12975_reviewer.patch](tarball://root/attachments/some-uuid/ticket12975/trac_12975_reviewer.patch) by @simon-king-jena created at 2012-05-19 15:33:21

I have successfully run the tests in sage/misc with your patch and my reviewer patch. I will wait for a full test run (either by myself or the patchbot) before giving a positive review.

Apply trac_12975-cython_cpp_pragma.patch trac_12975_reviewer.patch



---

archive/issue_comments_190615.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-05-20T04:10:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12975",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12975#issuecomment-190615",
    "user": "https://github.com/simon-king-jena"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_190616.json:
```json
{
    "body": "<a id='comment:7'></a>make ptest passes, and thus I give it a positive review.",
    "created_at": "2012-05-20T04:10:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12975",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12975#issuecomment-190616",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:7'></a>make ptest passes, and thus I give it a positive review.



---

archive/issue_comments_190617.json:
```json
{
    "body": "<a id='comment:8'></a>I changed the component into \"interfaces\" (to cython), since the fix was not just modifying the documentation, after all.",
    "created_at": "2012-05-20T04:11:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12975",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12975#issuecomment-190617",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:8'></a>I changed the component into "interfaces" (to cython), since the fix was not just modifying the documentation, after all.



---

archive/issue_comments_190618.json:
```json
{
    "body": "Changing component from documentation to interfaces.",
    "created_at": "2012-05-20T04:11:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12975",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12975#issuecomment-190618",
    "user": "https://github.com/simon-king-jena"
}
```

Changing component from documentation to interfaces.



---

archive/issue_events_035519.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-05-23T21:39:04Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12975",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12975#event-35519"
}
```



---

archive/issue_comments_190619.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-05-23T21:39:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12975",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12975#issuecomment-190619",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_190620.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-5.1.beta1\"",
    "created_at": "2012-05-23T21:39:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12975",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12975#issuecomment-190620",
    "user": "https://github.com/jdemeyer"
}
```

Changing merged from "" to "sage-5.1.beta1"
