# Issue 12156: Pretty print LatexExpr directly

archive/issues_011984.json:
```json
{
    "assignees": [],
    "body": "An object of type `LatexExpr` should be pretty-printed as-is, that is\n\n```\nsage: pretty_print(LatexExpr('x^2 + 1'))\n```\nshould really typeset `\"x^2 + 1\"` instead of displaying the string `\"x^2 + 1\"`.\n\nAlso, import `LatexExpr` globally.\n\n**Apply** [[attachment: 12156_reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_reviewer.patch.gz), [attachment: 12156_add_LatexExpr.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_add_LatexExpr.patch.gz), [attachment: 12156_extra_doc.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_extra_doc.patch.gz)(https://github.com/sagemath/sage/files/ticket12156/10b8f9bc2d28e337290223860f2a7fa1.gz),\n[[attachment: 12156_jhp.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_jhp.patch.gz)(https://github.com/sagemath/sage/files/ticket12156/fde0defc5dc365ed1109c6b8ec26c223.gz)\n\nDepends on #12197\n\nAssignee: **@jasongrout**\n\nCC:  tdemedts@java.UGent.be @jhpalmieri\n\nKeywords: **sd35**\n\nAuthor: **Jeroen Demeyer, Punarbasu Purkayastha**\n\nReviewer: **Andrey Novoseltsev, Punarbasu Purkayastha, John Palmieri**\n\nMerged: **sage-4.8.alpha6**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/12156_\n\n",
    "closed_at": "2011-12-24T01:04:53Z",
    "created_at": "2011-12-15T09:42:30Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Pretty print LatexExpr directly",
    "type": "issue",
    "updated_at": "2011-12-24T01:04:53Z",
    "url": "https://github.com/sagemath/sage/issues/12156",
    "user": "https://github.com/jdemeyer"
}
```
An object of type `LatexExpr` should be pretty-printed as-is, that is

```
sage: pretty_print(LatexExpr('x^2 + 1'))
```
should really typeset `"x^2 + 1"` instead of displaying the string `"x^2 + 1"`.

Also, import `LatexExpr` globally.

**Apply** [[attachment: 12156_reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_reviewer.patch.gz), [attachment: 12156_add_LatexExpr.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_add_LatexExpr.patch.gz), [attachment: 12156_extra_doc.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_extra_doc.patch.gz)(https://github.com/sagemath/sage/files/ticket12156/10b8f9bc2d28e337290223860f2a7fa1.gz),
[[attachment: 12156_jhp.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_jhp.patch.gz)(https://github.com/sagemath/sage/files/ticket12156/fde0defc5dc365ed1109c6b8ec26c223.gz)

Depends on #12197

Assignee: **@jasongrout**

CC:  tdemedts@java.UGent.be @jhpalmieri

Keywords: **sd35**

Author: **Jeroen Demeyer, Punarbasu Purkayastha**

Reviewer: **Andrey Novoseltsev, Punarbasu Purkayastha, John Palmieri**

Merged: **sage-4.8.alpha6**

_Issue created by migration from https://trac.sagemath.org/ticket/12156_





---

archive/issue_events_150842.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-15T09:42:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "milestone_number": null,
    "milestone_title": "sage-4.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12156#event-150842"
}
```



---

archive/issue_events_150843.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-15T09:42:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12156#event-150843"
}
```



---

archive/issue_events_150844.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-15T09:42:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12156#event-150844"
}
```



---

archive/issue_comments_132528.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,4 +3,6 @@\n ```\n sage: pretty_print(LatexExpr('x^2 + 1'))\n ```\n-should really typeset \"x^2 + 1\" instead of displaying the string \"x^2 + 1\".\n+should really typeset `\"x^2 + 1\"` instead of displaying the string `\"x^2 + 1\"`.\n+\n+Also, import `LatexExpr` globally.\n``````\n",
    "created_at": "2011-12-15T09:43:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12156#issuecomment-132528",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,4 +3,6 @@
 ```
 sage: pretty_print(LatexExpr('x^2 + 1'))
 ```
-should really typeset "x^2 + 1" instead of displaying the string "x^2 + 1".
+should really typeset `"x^2 + 1"` instead of displaying the string `"x^2 + 1"`.
+
+Also, import `LatexExpr` globally.
``````




---

archive/issue_comments_132529.json:
```json
{
    "body": "Author: **Jeroen Demeyer**",
    "created_at": "2011-12-15T09:45:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12156#issuecomment-132529",
    "user": "https://github.com/jdemeyer"
}
```

Author: **Jeroen Demeyer**



---

archive/issue_comments_132530.json:
```json
{
    "body": "Attachment: **[12156_latex_pretty_print.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_latex_pretty_print.patch.gz)**",
    "created_at": "2011-12-15T10:12:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12156#issuecomment-132530",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[12156_latex_pretty_print.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_latex_pretty_print.patch.gz)**



---

archive/issue_events_150845.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-15T10:14:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12156#event-150845"
}
```



---

archive/issue_comments_132531.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nAttachment: **[12156_reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_reviewer.patch.gz)**\n\nI got a bit confused by the description of the class, so I propose the attached change. The main patch has positive review from me.",
    "created_at": "2011-12-15T18:51:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12156#issuecomment-132531",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:5'>Comment 5:</a>
Attachment: **[12156_reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_reviewer.patch.gz)**

I got a bit confused by the description of the class, so I propose the attached change. The main patch has positive review from me.



---

archive/issue_comments_132532.json:
```json
{
    "body": "Reviewer: **Andrey Novoseltsev**",
    "created_at": "2011-12-15T18:51:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12156#issuecomment-132532",
    "user": "https://github.com/novoselt"
}
```

Reviewer: **Andrey Novoseltsev**



---

archive/issue_comments_132533.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,3 +6,5 @@\n should really typeset `\"x^2 + 1\"` instead of displaying the string `\"x^2 + 1\"`.\n \n Also, import `LatexExpr` globally.\n+\n+**Apply** [[attachment: 12156_reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_reviewer.patch.gz), [attachment: 12156_extra_doc.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_extra_doc.patch.gz)(https://github.com/sagemath/sage/files/ticket12156/10b8f9bc2d28e337290223860f2a7fa1.gz)\n``````\n",
    "created_at": "2011-12-16T09:25:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12156#issuecomment-132533",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,3 +6,5 @@
 should really typeset `"x^2 + 1"` instead of displaying the string `"x^2 + 1"`.
 
 Also, import `LatexExpr` globally.
+
+**Apply** [[attachment: 12156_reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_reviewer.patch.gz), [attachment: 12156_extra_doc.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_extra_doc.patch.gz)(https://github.com/sagemath/sage/files/ticket12156/10b8f9bc2d28e337290223860f2a7fa1.gz)
``````




---

archive/issue_comments_132534.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nI removed \"Strings are wrapped into verbatim environment for typeset output, while LaTeX expressions are left as-is\" because I think that's confusing.  I added some more documentation changes and examples.  Needs review.",
    "created_at": "2011-12-16T09:30:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12156#issuecomment-132534",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'>Comment 7:</a>
I removed "Strings are wrapped into verbatim environment for typeset output, while LaTeX expressions are left as-is" because I think that's confusing.  I added some more documentation changes and examples.  Needs review.



---

archive/issue_comments_132535.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nThere is just one point. It is not possible to combine normal strings with latex strings or LatexExpr with itself. Something like this fails to produce the right output: `LatexExpr(r'\\Delta') + LatexExpr(r'\\frac{x}2')`. This gives the wrong output even though the addition goes through as strings. Proposed patch is attached, though I leave it up to you to decide whether to include it.\n\nOther than this minor point, the patches provided earlier work as advertised. So, positive review from my side.",
    "created_at": "2011-12-16T14:40:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12156#issuecomment-132535",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:8'>Comment 8:</a>
There is just one point. It is not possible to combine normal strings with latex strings or LatexExpr with itself. Something like this fails to produce the right output: `LatexExpr(r'\Delta') + LatexExpr(r'\frac{x}2')`. This gives the wrong output even though the addition goes through as strings. Proposed patch is attached, though I leave it up to you to decide whether to include it.

Other than this minor point, the patches provided earlier work as advertised. So, positive review from my side.



---

archive/issue_comments_132536.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nIf we do add the last patch (which is a bit beyond the title of this ticket), then I think that we MUST add a space between concatenated expressions: if you join \"x\" and \"y\" into \"xy\" it may be exactly what you need, but \"\\alpha\" and \"x\" get joined into \"\\alphax\" which is not a valid code any more (as I have \"discovered\" at #9478). Plus spaces (or even new lines) help reading the code and adjusting it if necessary.\n\nI also was actually surprised that `\"\\frac{x}2\"` works, I would put it as `\"\\frac{x}{2}\"`, although it is just a personal preference, I guess ;-)",
    "created_at": "2011-12-16T20:31:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12156#issuecomment-132536",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:9'>Comment 9:</a>
If we do add the last patch (which is a bit beyond the title of this ticket), then I think that we MUST add a space between concatenated expressions: if you join "x" and "y" into "xy" it may be exactly what you need, but "\alpha" and "x" get joined into "\alphax" which is not a valid code any more (as I have "discovered" at #9478). Plus spaces (or even new lines) help reading the code and adjusting it if necessary.

I also was actually surprised that `"\frac{x}2"` works, I would put it as `"\frac{x}{2}"`, although it is just a personal preference, I guess ;-)



---

archive/issue_comments_132537.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nReplying to [@novoselt](#comment%3A9):\n> If we do add the last patch (which is a bit beyond the title of this ticket), then I think that we MUST add a space between concatenated expressions: if you join \"x\" and \"y\" into \"xy\" it may be exactly what you need, but \"\\alpha\" and \"x\" get joined into \"\\alphax\" which is not a valid code any more (as I have \"discovered\" at #9478). Plus spaces (or even new lines) help reading the code and adjusting it if necessary.\n\nThe problem is that maybe sometimes you *don't* want a space.  How about adding a \"{}\" instead which acts like a seperator but otherwise doesn't do much.",
    "created_at": "2011-12-16T20:36:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12156#issuecomment-132537",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'>Comment 10:</a>
Replying to [@novoselt](#comment%3A9):
> If we do add the last patch (which is a bit beyond the title of this ticket), then I think that we MUST add a space between concatenated expressions: if you join "x" and "y" into "xy" it may be exactly what you need, but "\alpha" and "x" get joined into "\alphax" which is not a valid code any more (as I have "discovered" at #9478). Plus spaces (or even new lines) help reading the code and adjusting it if necessary.

The problem is that maybe sometimes you *don't* want a space.  How about adding a "{}" instead which acts like a seperator but otherwise doesn't do much.



---

archive/issue_comments_132538.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nThis breaks the pdf manual:\n\n```\nRunaway argument?\n\\PYG {g+gp}{sage: }\\PYG {n}{LatexExpr}\\PYG {p}{(}\\PYG {l+s}{r\"}\\PYG {\\ETC.\n! Forbidden control sequence found while scanning use of \\FancyVerbGetLine.\n<inserted text>\n                \\par\nl.126604 ...r}\\PYG{p}{(}\\PYG{l+s}{r\"}\\PYG{l+s}{^^L\n                                                  rac\\PYGZob{}x\\PYGZca{}2 + ...\n\n?\n! Emergency stop.\n<inserted text>\n                \\par\nl.126604 ...r}\\PYG{p}{(}\\PYG{l+s}{r\"}\\PYG{l+s}{^^L\n                                                  rac\\PYGZob{}x\\PYGZca{}2 + ...\n\n!  ==> Fatal error occurred, no output PDF file produced!\nTranscript written on reference.log.\n```",
    "created_at": "2011-12-16T20:48:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12156#issuecomment-132538",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:11'>Comment 11:</a>
This breaks the pdf manual:

```
Runaway argument?
\PYG {g+gp}{sage: }\PYG {n}{LatexExpr}\PYG {p}{(}\PYG {l+s}{r"}\PYG {\ETC.
! Forbidden control sequence found while scanning use of \FancyVerbGetLine.
<inserted text>
                \par
l.126604 ...r}\PYG{p}{(}\PYG{l+s}{r"}\PYG{l+s}{^^L
                                                  rac\PYGZob{}x\PYGZca{}2 + ...

?
! Emergency stop.
<inserted text>
                \par
l.126604 ...r}\PYG{p}{(}\PYG{l+s}{r"}\PYG{l+s}{^^L
                                                  rac\PYGZob{}x\PYGZca{}2 + ...

!  ==> Fatal error occurred, no output PDF file produced!
Transcript written on reference.log.
```



---

archive/issue_comments_132539.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nReplying to [@jdemeyer](#comment%3A10):\n> The problem is that maybe sometimes you *don't* want a space.  How about adding a \"{}\" instead which acts like a seperator but otherwise doesn't do much.\n\nIn what situations does the space matter in math mode? It seems to me that if both were valid expressions before, then they can be separated by a space without any harm... As I understand `{}` will do the same, but it will make the code much uglier, `x{}y` is not as cool as `x y`. And I think that readability of the LaTeX output is a valid concern since I quite regularly take some Sage generated code and then do some manual tweaking. For example - take a long polynomial and then typeset it in an align-environment in a paper. In editors that auto-wrap lines on spaces it is also preferable to have just a space separator.\n\nIf there are situations when space does not work, which I think are quite rare since I cannot think of any, one always has an option of converting things to strings, doing anything there and then assembling them back. On a related note, it would be nice to have automatic vertical assembling of such expressions as well, but it is definitely beyond this ticket.",
    "created_at": "2011-12-16T21:06:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12156#issuecomment-132539",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:12'>Comment 12:</a>
Replying to [@jdemeyer](#comment%3A10):
> The problem is that maybe sometimes you *don't* want a space.  How about adding a "{}" instead which acts like a seperator but otherwise doesn't do much.

In what situations does the space matter in math mode? It seems to me that if both were valid expressions before, then they can be separated by a space without any harm... As I understand `{}` will do the same, but it will make the code much uglier, `x{}y` is not as cool as `x y`. And I think that readability of the LaTeX output is a valid concern since I quite regularly take some Sage generated code and then do some manual tweaking. For example - take a long polynomial and then typeset it in an align-environment in a paper. In editors that auto-wrap lines on spaces it is also preferable to have just a space separator.

If there are situations when space does not work, which I think are quite rare since I cannot think of any, one always has an option of converting things to strings, doing anything there and then assembling them back. On a related note, it would be nice to have automatic vertical assembling of such expressions as well, but it is definitely beyond this ticket.



---

archive/issue_comments_132540.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nWhich patch does break the PDF manual? The last one or all of them?",
    "created_at": "2011-12-16T21:08:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12156#issuecomment-132540",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:13'>Comment 13:</a>
Which patch does break the PDF manual? The last one or all of them?



---

archive/issue_events_150846.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-16T21:18:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12156#event-150846"
}
```



---

archive/issue_events_150847.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-16T21:18:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12156#event-150847"
}
```



---

archive/issue_comments_132541.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nReplying to [@novoselt](#comment%3A13):\n> Which patch does break the PDF manual? The last one or all of them?\n\nProblem solved by using `r\"\"\"` instead of `\"\"\"`.\n\nConcerning adding: you are right, I did not consider that we are using math mode all the time.  But you should use `_add_` (single underscores).  I don't know why, but Sage does it this way.",
    "created_at": "2011-12-16T21:18:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12156#issuecomment-132541",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:14'>Comment 14:</a>
Replying to [@novoselt](#comment%3A13):
> Which patch does break the PDF manual? The last one or all of them?

Problem solved by using `r"""` instead of `"""`.

Concerning adding: you are right, I did not consider that we are using math mode all the time.  But you should use `_add_` (single underscores).  I don't know why, but Sage does it this way.



---

archive/issue_comments_132542.json:
```json
{
    "body": "Work Issues: **_add_()**",
    "created_at": "2011-12-16T21:18:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12156#issuecomment-132542",
    "user": "https://github.com/jdemeyer"
}
```

Work Issues: **_add_()**



---

archive/issue_comments_132543.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nI think `_add_` is used so that coercion can work properly. But it requires inheriting from `SageObject` or maybe even `Element`, so that generic `__add__` can do its part of the job. So I doubt it will work for `LatexExpr` which inherits from `str` and nothing else.",
    "created_at": "2011-12-16T21:33:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12156#issuecomment-132543",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:15'>Comment 15:</a>
I think `_add_` is used so that coercion can work properly. But it requires inheriting from `SageObject` or maybe even `Element`, so that generic `__add__` can do its part of the job. So I doubt it will work for `LatexExpr` which inherits from `str` and nothing else.



---

archive/issue_comments_132544.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nActually space seems to work just fine to separate elements. Since we are in math mode, JSMath will collapse the extra spaces automatically.\n\nAs mentioned by novoselt, `_add_` does not work. I tried it out just now. Updated the patch.",
    "created_at": "2011-12-17T02:10:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12156#issuecomment-132544",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:16'>Comment 16:</a>
Actually space seems to work just fine to separate elements. Since we are in math mode, JSMath will collapse the extra spaces automatically.

As mentioned by novoselt, `_add_` does not work. I tried it out just now. Updated the patch.



---

archive/issue_comments_132545.json:
```json
{
    "body": "Add to LatexExpr (added space in between the two)",
    "created_at": "2011-12-19T13:29:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12156#issuecomment-132545",
    "user": "https://github.com/jdemeyer"
}
```

Add to LatexExpr (added space in between the two)



---

archive/issue_comments_132546.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,4 +7,4 @@\n \n Also, import `LatexExpr` globally.\n \n-**Apply** [[attachment: 12156_reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_reviewer.patch.gz), [attachment: 12156_extra_doc.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_extra_doc.patch.gz)(https://github.com/sagemath/sage/files/ticket12156/10b8f9bc2d28e337290223860f2a7fa1.gz)\n+**Apply** [[attachment: 12156_reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_reviewer.patch.gz), [attachment: 12156_add_LatexExpr.patch], [attachment: 12156_extra_doc.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_extra_doc.patch.gz)(https://github.com/sagemath/sage/files/ticket12156/10b8f9bc2d28e337290223860f2a7fa1.gz)\n``````\n",
    "created_at": "2011-12-19T13:32:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12156#issuecomment-132546",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,4 +7,4 @@
 
 Also, import `LatexExpr` globally.
 
-**Apply** [[attachment: 12156_reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_reviewer.patch.gz), [attachment: 12156_extra_doc.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_extra_doc.patch.gz)(https://github.com/sagemath/sage/files/ticket12156/10b8f9bc2d28e337290223860f2a7fa1.gz)
+**Apply** [[attachment: 12156_reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_reviewer.patch.gz), [attachment: 12156_add_LatexExpr.patch], [attachment: 12156_extra_doc.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_extra_doc.patch.gz)(https://github.com/sagemath/sage/files/ticket12156/10b8f9bc2d28e337290223860f2a7fa1.gz)
``````




---

archive/issue_comments_132547.json:
```json
{
    "body": "Changed work issues from **_add_()** to none",
    "created_at": "2011-12-19T13:32:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12156#issuecomment-132547",
    "user": "https://github.com/jdemeyer"
}
```

Changed work issues from **_add_()** to none



---

archive/issue_comments_132548.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nAttachment: **[12156_add_LatexExpr.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_add_LatexExpr.patch.gz)**",
    "created_at": "2011-12-19T13:32:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12156#issuecomment-132548",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'>Comment 17:</a>
Attachment: **[12156_add_LatexExpr.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_add_LatexExpr.patch.gz)**



---

archive/issue_comments_132549.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nAttachment: **[12156_extra_doc.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_extra_doc.patch.gz)**\n\nPositive review to everything except my extra_doc patch.",
    "created_at": "2011-12-19T13:45:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12156#issuecomment-132549",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:18'>Comment 18:</a>
Attachment: **[12156_extra_doc.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_extra_doc.patch.gz)**

Positive review to everything except my extra_doc patch.



---

archive/issue_events_150848.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-19T13:45:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12156#event-150848"
}
```



---

archive/issue_events_150849.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-19T13:45:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12156#event-150849"
}
```



---

archive/issue_comments_132550.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,4 +7,4 @@\n \n Also, import `LatexExpr` globally.\n \n-**Apply** [[attachment: 12156_reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_reviewer.patch.gz), [attachment: 12156_add_LatexExpr.patch], [attachment: 12156_extra_doc.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_extra_doc.patch.gz)(https://github.com/sagemath/sage/files/ticket12156/10b8f9bc2d28e337290223860f2a7fa1.gz)\n+**Apply** [[attachment: 12156_reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_reviewer.patch.gz), [attachment: 12156_add_LatexExpr.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_add_LatexExpr.patch.gz), [attachment: 12156_extra_doc.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_extra_doc.patch.gz)(https://github.com/sagemath/sage/files/ticket12156/10b8f9bc2d28e337290223860f2a7fa1.gz)\n``````\n",
    "created_at": "2011-12-19T13:53:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12156#issuecomment-132550",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,4 +7,4 @@
 
 Also, import `LatexExpr` globally.
 
-**Apply** [[attachment: 12156_reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_reviewer.patch.gz), [attachment: 12156_add_LatexExpr.patch], [attachment: 12156_extra_doc.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_extra_doc.patch.gz)(https://github.com/sagemath/sage/files/ticket12156/10b8f9bc2d28e337290223860f2a7fa1.gz)
+**Apply** [[attachment: 12156_reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_reviewer.patch.gz), [attachment: 12156_add_LatexExpr.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_add_LatexExpr.patch.gz), [attachment: 12156_extra_doc.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_extra_doc.patch.gz)(https://github.com/sagemath/sage/files/ticket12156/10b8f9bc2d28e337290223860f2a7fa1.gz)
``````




---

archive/issue_comments_132551.json:
```json
{
    "body": "Changed reviewer from **Andrey Novoseltsev** to **Andrey Novoseltsev, Punarbasu Purkayastha**",
    "created_at": "2011-12-19T15:16:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12156#issuecomment-132551",
    "user": "https://github.com/novoselt"
}
```

Changed reviewer from **Andrey Novoseltsev** to **Andrey Novoseltsev, Punarbasu Purkayastha**



---

archive/issue_events_150850.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2011-12-19T15:16:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12156#event-150850"
}
```



---

archive/issue_events_150851.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2011-12-19T15:16:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12156#event-150851"
}
```



---

archive/issue_comments_132552.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nPositive review to the last patch as well! Why do we have the reviewer field before the author one?..",
    "created_at": "2011-12-19T15:16:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12156#issuecomment-132552",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:20'>Comment 20:</a>
Positive review to the last patch as well! Why do we have the reviewer field before the author one?..



---

archive/issue_comments_132553.json:
```json
{
    "body": "Changed author from **Jeroen Demeyer** to **Jeroen Demeyer, Punarbasu Purkayastha**",
    "created_at": "2011-12-19T15:16:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12156#issuecomment-132553",
    "user": "https://github.com/novoselt"
}
```

Changed author from **Jeroen Demeyer** to **Jeroen Demeyer, Punarbasu Purkayastha**



---

archive/issue_comments_132554.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nUnfortunately there are some doctest errors in various unrelated files. I am working on a patch.",
    "created_at": "2011-12-20T09:20:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12156#issuecomment-132554",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:21'>Comment 21:</a>
Unfortunately there are some doctest errors in various unrelated files. I am working on a patch.



---

archive/issue_events_150852.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-20T09:20:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12156#event-150852"
}
```



---

archive/issue_events_150853.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-20T09:20:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12156#event-150853"
}
```



---

archive/issue_comments_132555.json:
```json
{
    "body": "Work Issues: **sd35**",
    "created_at": "2011-12-20T09:22:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12156#issuecomment-132555",
    "user": "https://github.com/jdemeyer"
}
```

Work Issues: **sd35**



---

archive/issue_comments_132556.json:
```json
{
    "body": "Changed work issues from **sd35** to none",
    "created_at": "2011-12-20T09:22:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12156#issuecomment-132556",
    "user": "https://github.com/jdemeyer"
}
```

Changed work issues from **sd35** to none



---

archive/issue_comments_132557.json:
```json
{
    "body": "Changed keywords from **** to **sd35**",
    "created_at": "2011-12-20T09:22:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12156#issuecomment-132557",
    "user": "https://github.com/jdemeyer"
}
```

Changed keywords from **** to **sd35**



---

archive/issue_comments_132558.json:
```json
{
    "body": "Dependencies: **#12197**",
    "created_at": "2011-12-20T11:25:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12156#issuecomment-132558",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#12197**



---

archive/issue_events_150854.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-20T11:25:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12156#event-150854"
}
```



---

archive/issue_events_150855.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-20T11:25:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12156#event-150855"
}
```



---

archive/issue_comments_132559.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,4 +7,5 @@\n \n Also, import `LatexExpr` globally.\n \n-**Apply** [[attachment: 12156_reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_reviewer.patch.gz), [attachment: 12156_add_LatexExpr.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_add_LatexExpr.patch.gz), [attachment: 12156_extra_doc.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_extra_doc.patch.gz)(https://github.com/sagemath/sage/files/ticket12156/10b8f9bc2d28e337290223860f2a7fa1.gz)\n+**Apply** [[attachment: 12156_reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_reviewer.patch.gz), [attachment: 12156_add_LatexExpr.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_add_LatexExpr.patch.gz), [attachment: 12156_extra_doc.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_extra_doc.patch.gz)(https://github.com/sagemath/sage/files/ticket12156/10b8f9bc2d28e337290223860f2a7fa1.gz),\n+[attachment: 12156_fix_latex.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_fix_latex.patch.gz)\n``````\n",
    "created_at": "2011-12-20T11:26:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12156#issuecomment-132559",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,4 +7,5 @@
 
 Also, import `LatexExpr` globally.
 
-**Apply** [[attachment: 12156_reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_reviewer.patch.gz), [attachment: 12156_add_LatexExpr.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_add_LatexExpr.patch.gz), [attachment: 12156_extra_doc.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_extra_doc.patch.gz)(https://github.com/sagemath/sage/files/ticket12156/10b8f9bc2d28e337290223860f2a7fa1.gz)
+**Apply** [[attachment: 12156_reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_reviewer.patch.gz), [attachment: 12156_add_LatexExpr.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_add_LatexExpr.patch.gz), [attachment: 12156_extra_doc.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_extra_doc.patch.gz)(https://github.com/sagemath/sage/files/ticket12156/10b8f9bc2d28e337290223860f2a7fa1.gz),
+[attachment: 12156_fix_latex.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_fix_latex.patch.gz)
``````




---

archive/issue_comments_132560.json:
```json
{
    "body": "Attachment: **[12156_fix_latex.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_fix_latex.patch.gz)**",
    "created_at": "2011-12-20T14:51:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12156#issuecomment-132560",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[12156_fix_latex.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_fix_latex.patch.gz)**



---

archive/issue_comments_132561.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nNew patch also allows str + LatexExpr additions, which needed a few changes in various places inside Sage.  I left one more substantial change for differential forms at #12197.\n\nNeeds review.",
    "created_at": "2011-12-20T15:33:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12156#issuecomment-132561",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:26'>Comment 26:</a>
New patch also allows str + LatexExpr additions, which needed a few changes in various places inside Sage.  I left one more substantial change for differential forms at #12197.

Needs review.



---

archive/issue_comments_132562.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,4 +8,4 @@\n Also, import `LatexExpr` globally.\n \n **Apply** [[attachment: 12156_reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_reviewer.patch.gz), [attachment: 12156_add_LatexExpr.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_add_LatexExpr.patch.gz), [attachment: 12156_extra_doc.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_extra_doc.patch.gz)(https://github.com/sagemath/sage/files/ticket12156/10b8f9bc2d28e337290223860f2a7fa1.gz),\n-[attachment: 12156_fix_latex.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_fix_latex.patch.gz)\n+[[attachment: 12156_jhp.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_jhp.patch.gz)(https://github.com/sagemath/sage/files/ticket12156/fde0defc5dc365ed1109c6b8ec26c223.gz)\n``````\n",
    "created_at": "2011-12-21T01:14:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12156#issuecomment-132562",
    "user": "https://github.com/jhpalmieri"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,4 +8,4 @@
 Also, import `LatexExpr` globally.
 
 **Apply** [[attachment: 12156_reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_reviewer.patch.gz), [attachment: 12156_add_LatexExpr.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_add_LatexExpr.patch.gz), [attachment: 12156_extra_doc.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_extra_doc.patch.gz)(https://github.com/sagemath/sage/files/ticket12156/10b8f9bc2d28e337290223860f2a7fa1.gz),
-[attachment: 12156_fix_latex.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_fix_latex.patch.gz)
+[[attachment: 12156_jhp.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_jhp.patch.gz)(https://github.com/sagemath/sage/files/ticket12156/fde0defc5dc365ed1109c6b8ec26c223.gz)
``````




---

archive/issue_comments_132563.json:
```json
{
    "body": "Changed reviewer from **Andrey Novoseltsev, Punarbasu Purkayastha** to **Andrey Novoseltsev, Punarbasu Purkayastha, John Palmieri**",
    "created_at": "2011-12-21T01:14:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12156#issuecomment-132563",
    "user": "https://github.com/jhpalmieri"
}
```

Changed reviewer from **Andrey Novoseltsev, Punarbasu Purkayastha** to **Andrey Novoseltsev, Punarbasu Purkayastha, John Palmieri**



---

archive/issue_comments_132564.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nI think I'll join the patch party: I'm attaching a patch which rewords a few docstrings. Otherwise, everything looks good to me.  With the patch at #12197 and all of the patches here, all tests pass.\n\nI'm willing to give everything but my patch a positive review.",
    "created_at": "2011-12-21T01:14:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12156#issuecomment-132564",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:27'>Comment 27:</a>
I think I'll join the patch party: I'm attaching a patch which rewords a few docstrings. Otherwise, everything looks good to me.  With the patch at #12197 and all of the patches here, all tests pass.

I'm willing to give everything but my patch a positive review.



---

archive/issue_comments_132565.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nAttachment: **[12156_jhp.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_jhp.patch.gz)**\n\nReviewer patch looks fine.",
    "created_at": "2011-12-21T12:15:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12156#issuecomment-132565",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:28'>Comment 28:</a>
Attachment: **[12156_jhp.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_jhp.patch.gz)**

Reviewer patch looks fine.



---

archive/issue_events_150856.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-21T12:15:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12156#event-150856"
}
```



---

archive/issue_events_150857.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-21T12:15:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12156#event-150857"
}
```



---

archive/issue_comments_132566.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\nI guess you are patching some 4.8alpha version of sage. I was patching 4.7.2, so I had to modify the patch [attachment: 12156_fix_latex.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_fix_latex.patch.gz) for `sage/modular/dirichlet.py` to read as:\n\n```diff\ndiff --git a/sage/modular/dirichlet.py b/sage/modular/dirichlet.py\n--- a/sage/modular/dirichlet.py\n+++ b/sage/modular/dirichlet.py\n@@ -511,7 +511,7 @@\n         for i in range(len(self.values_on_gens())):\n             if i != 0:\n                 mapst += ', '\n-            mapst += latex(self.parent().unit_gens()[i]) + ' \\mapsto ' + latex(self.values_on_gens()[i])\n+            mapst += self.parent().unit_gens()[i]._latex_() + ' \\mapsto ' + self.values_on_gens()[i]._latex_()\n         return r'Dirichlet character modulo %s of conductor %s mapping $%s$'%(self.modulus(), self.conductor(), mapst)\n                  \n         def base_ring(self):\n```\n\nThis, along with #12197 makes it pass the doctests. So, positive review from me too.",
    "created_at": "2011-12-21T13:03:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12156#issuecomment-132566",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:29'>Comment 29:</a>
I guess you are patching some 4.8alpha version of sage. I was patching 4.7.2, so I had to modify the patch [attachment: 12156_fix_latex.patch.gz](https://github.com/sagemath/sage/files/ticket12156/12156_fix_latex.patch.gz) for `sage/modular/dirichlet.py` to read as:

```diff
diff --git a/sage/modular/dirichlet.py b/sage/modular/dirichlet.py
--- a/sage/modular/dirichlet.py
+++ b/sage/modular/dirichlet.py
@@ -511,7 +511,7 @@
         for i in range(len(self.values_on_gens())):
             if i != 0:
                 mapst += ', '
-            mapst += latex(self.parent().unit_gens()[i]) + ' \mapsto ' + latex(self.values_on_gens()[i])
+            mapst += self.parent().unit_gens()[i]._latex_() + ' \mapsto ' + self.values_on_gens()[i]._latex_()
         return r'Dirichlet character modulo %s of conductor %s mapping $%s$'%(self.modulus(), self.conductor(), mapst)
                  
         def base_ring(self):
```

This, along with #12197 makes it pass the doctests. So, positive review from me too.



---

archive/issue_comments_132567.json:
```json
{
    "body": "Merged: **sage-4.8.alpha6**",
    "created_at": "2011-12-24T01:04:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12156#issuecomment-132567",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-4.8.alpha6**



---

archive/issue_events_150858.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-24T01:04:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12156#event-150858"
}
```



---

archive/issue_events_150859.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-24T01:04:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/12156",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12156#event-150859"
}
```
