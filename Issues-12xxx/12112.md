# Issue 12112: Update the prereq script

archive/issues_011940.json:
```json
{
    "assignees": [
        "https://github.com/sagetrac-GeorgSWeber"
    ],
    "body": "<div id=\"comment:0\"></div>\n\n1. Added a test for a C99 compiler, since some packages require that.\n\n2. Remove the useless checks for bison and flex (in the past, we did the checks but didn't fail if these programs weren't found).\n\n3. We don't need to check gcc/g++/gfortran versions if we're building GCC.  Use the environment variable `SAGE_BUILD_TOOLCHAIN` (introduced in #12369) for this.\n\n4. Make the script portable, so it doesn't require bash (instead of #12621, which proposed to force `bash`).\n\n**Apply** to the SAGE_ROOT repository:\n1. [attachment: 12112_from_12576.patch](https://github.com/sagemath/sage/files/ticket12112/12112_from_12576.patch.gz) (**positive_review**, see #12576)\n2. [attachment: 12112_update_prereq.patch](https://github.com/sagemath/sage/files/ticket12112/12112_update_prereq.patch.gz)\n\n**Download** [http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.0.tar.gz](http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.0.tar.gz) to `SAGE_ROOT/spkg/base` and **delete** `prereq-0.9.tar.gz` (reviewers: look at [attachment: prereq-1.0.diff](https://github.com/sagemath/sage/files/ticket12112/prereq-1.0.diff.gz) for the changes)\n\n**See also**: #12785 (update the FAQ)\n\nDepends on #12739\nDepends on #12369\n\nDependencies: **#12739, to be merged with #12369**\n\nCC:  @orlitzky @jhpalmieri @sagetrac-drkirkby\n\nComponent: **build**\n\nAuthor: **John Palmieri, Jeroen Demeyer**\n\nReviewer: **Jeroen Demeyer, David Kirkby**\n\nMerged: **sage-5.0.beta13**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/12112_\n\n",
    "closed_at": "2012-04-07T15:08:00Z",
    "created_at": "2011-12-03T13:06:03Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20build",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Update the prereq script",
    "type": "issue",
    "updated_at": "2012-04-07T15:08:00Z",
    "url": "https://github.com/sagemath/sage/issues/12112",
    "user": "https://github.com/jdemeyer"
}
```
<div id="comment:0"></div>

1. Added a test for a C99 compiler, since some packages require that.

2. Remove the useless checks for bison and flex (in the past, we did the checks but didn't fail if these programs weren't found).

3. We don't need to check gcc/g++/gfortran versions if we're building GCC.  Use the environment variable `SAGE_BUILD_TOOLCHAIN` (introduced in #12369) for this.

4. Make the script portable, so it doesn't require bash (instead of #12621, which proposed to force `bash`).

**Apply** to the SAGE_ROOT repository:
1. [attachment: 12112_from_12576.patch](https://github.com/sagemath/sage/files/ticket12112/12112_from_12576.patch.gz) (**positive_review**, see #12576)
2. [attachment: 12112_update_prereq.patch](https://github.com/sagemath/sage/files/ticket12112/12112_update_prereq.patch.gz)

**Download** [http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.0.tar.gz](http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.0.tar.gz) to `SAGE_ROOT/spkg/base` and **delete** `prereq-0.9.tar.gz` (reviewers: look at [attachment: prereq-1.0.diff](https://github.com/sagemath/sage/files/ticket12112/prereq-1.0.diff.gz) for the changes)

**See also**: #12785 (update the FAQ)

Depends on #12739
Depends on #12369

Dependencies: **#12739, to be merged with #12369**

CC:  @orlitzky @jhpalmieri @sagetrac-drkirkby

Component: **build**

Author: **John Palmieri, Jeroen Demeyer**

Reviewer: **Jeroen Demeyer, David Kirkby**

Merged: **sage-5.0.beta13**

_Issue created by migration from https://trac.sagemath.org/ticket/12112_





---

archive/issue_events_162594.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-03T13:06:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "milestone_number": null,
    "milestone_title": "sage-5.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12112#event-162594"
}
```



---

archive/issue_events_162595.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-03T13:06:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build",
    "label_color": "0000b0",
    "label_name": "c: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12112#event-162595"
}
```



---

archive/issue_events_162596.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-03T13:06:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12112#event-162596"
}
```



---

archive/issue_events_162597.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-03T13:06:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12112#event-162597"
}
```



---

archive/issue_events_162598.json:
```json
{
    "actor": "https://github.com/sagetrac-GeorgSWeber",
    "created_at": "2011-12-03T13:06:03Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "subject": "https://github.com/jdemeyer",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12112#event-162598"
}
```



---

archive/issue_comments_129409.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nHuh, that would be useful to know for the Cygwin thing as well.  Currently we need it there, presumably for the same reason.  Thanks.",
    "created_at": "2011-12-03T15:36:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12112#issuecomment-129409",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:1" align="right">comment:1</div>

Huh, that would be useful to know for the Cygwin thing as well.  Currently we need it there, presumably for the same reason.  Thanks.



---

archive/issue_comments_129410.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nSage may not need it, but the rest of the prereq build system does:\n\n```\nprereq-0.9 $ make\n(CDPATH=\"${ZSH_VERSION+.}:\" && cd . && /bin/sh /home/mjo/src/sage-4.8.alpha3/spkg/build/prereq-0.9/missing --run autoheader)\nautom4te-2.68: need GNU m4 1.4 or later: /usr/bin/m4\nautoheader-2.68: '/usr/bin/autom4te-2.68' failed with exit status: 1\nmake: *** [config.h.in] Error 1\n```\n\nWe could probably ship a pre-built `configure` and `Makefile` rather than rely on autotools, but this is black magic to me and I don't understand the tradeoffs involved.",
    "created_at": "2011-12-07T17:02:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12112#issuecomment-129410",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:2" align="right">comment:2</div>

Sage may not need it, but the rest of the prereq build system does:

```
prereq-0.9 $ make
(CDPATH="${ZSH_VERSION+.}:" && cd . && /bin/sh /home/mjo/src/sage-4.8.alpha3/spkg/build/prereq-0.9/missing --run autoheader)
autom4te-2.68: need GNU m4 1.4 or later: /usr/bin/m4
autoheader-2.68: '/usr/bin/autom4te-2.68' failed with exit status: 1
make: *** [config.h.in] Error 1
```

We could probably ship a pre-built `configure` and `Makefile` rather than rely on autotools, but this is black magic to me and I don't understand the tradeoffs involved.



---

archive/issue_comments_129411.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nReplying to [@orlitzky](#comment%3A2):\n> Sage may not need it, but the rest of the prereq build system does.\n\nNot really, you just need to run it **once**, it is sufficient if the developer of the new `prereq` package runs it before shipping it into Sage.",
    "created_at": "2011-12-07T22:30:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12112#issuecomment-129411",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:3" align="right">comment:3</div>

Replying to [@orlitzky](#comment%3A2):
> Sage may not need it, but the rest of the prereq build system does.

Not really, you just need to run it **once**, it is sufficient if the developer of the new `prereq` package runs it before shipping it into Sage.



---

archive/issue_events_162599.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-03-23T21:46:26Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "title_is": "Update the prereq script",
    "title_was": "prereq should not check for m4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12112#event-162599"
}
```



---

archive/issue_comments_129412.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n-Since Sage does not need m4, we should not check for it.\n+1. Since Sage does not need m4, we should not check for it.\n+\n+2. We don't need to check gcc/g++/gfortran versions if we're building GCC.\n``````\n",
    "created_at": "2012-03-23T21:46:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12112#issuecomment-129412",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
-Since Sage does not need m4, we should not check for it.
+1. Since Sage does not need m4, we should not check for it.
+
+2. We don't need to check gcc/g++/gfortran versions if we're building GCC.
``````




---

archive/issue_comments_129413.json:
```json
{
    "body": "Dependencies: **#12739**",
    "created_at": "2012-03-23T22:35:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12112#issuecomment-129413",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#12739**



---

archive/issue_comments_129414.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,7 @@\n 1. Since Sage does not need m4, we should not check for it.\n \n 2. We don't need to check gcc/g++/gfortran versions if we're building GCC.\n+\n+**Apply** to the SAGE_ROOT repository:\n+1. [attachment: 12112_from_12576.patch](https://github.com/sagemath/sage/files/ticket12112/12112_from_12576.patch.gz) (**positive_review**, see #12576)\n+2. [attachment: 12112_update_prereq.patch](https://github.com/sagemath/sage/files/ticket12112/12112_update_prereq.patch.gz)\n``````\n",
    "created_at": "2012-03-26T13:43:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12112#issuecomment-129414",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,7 @@
 1. Since Sage does not need m4, we should not check for it.
 
 2. We don't need to check gcc/g++/gfortran versions if we're building GCC.
+
+**Apply** to the SAGE_ROOT repository:
+1. [attachment: 12112_from_12576.patch](https://github.com/sagemath/sage/files/ticket12112/12112_from_12576.patch.gz) (**positive_review**, see #12576)
+2. [attachment: 12112_update_prereq.patch](https://github.com/sagemath/sage/files/ticket12112/12112_update_prereq.patch.gz)
``````




---

archive/issue_comments_129415.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer**",
    "created_at": "2012-03-26T13:43:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12112#issuecomment-129415",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Jeroen Demeyer**



---

archive/issue_comments_129416.json:
```json
{
    "body": "Changed author from **Jeroen Demeyer** to **John Palmieri, Jeroen Demeyer**",
    "created_at": "2012-03-26T13:43:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12112#issuecomment-129416",
    "user": "https://github.com/jdemeyer"
}
```

Changed author from **Jeroen Demeyer** to **John Palmieri, Jeroen Demeyer**



---

archive/issue_comments_129417.json:
```json
{
    "body": "Attachment: **[12112_from_12576.patch.gz](https://github.com/sagemath/sage/files/ticket12112/12112_from_12576.patch.gz)**",
    "created_at": "2012-03-26T13:45:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12112#issuecomment-129417",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[12112_from_12576.patch.gz](https://github.com/sagemath/sage/files/ticket12112/12112_from_12576.patch.gz)**



---

archive/issue_comments_129418.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,11 @@\n 1. Since Sage does not need m4, we should not check for it.\n \n-2. We don't need to check gcc/g++/gfortran versions if we're building GCC.\n+2. Remove the useless checks for bison and flex (in the past, we did the checks but didn't fail if these programs weren't found)\n+\n+3. We don't need to check gcc/g++/gfortran versions if we're building GCC.\n \n **Apply** to the SAGE_ROOT repository:\n 1. [attachment: 12112_from_12576.patch](https://github.com/sagemath/sage/files/ticket12112/12112_from_12576.patch.gz) (**positive_review**, see #12576)\n 2. [attachment: 12112_update_prereq.patch](https://github.com/sagemath/sage/files/ticket12112/12112_update_prereq.patch.gz)\n+\n+**Download** [http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.0.tar.gz](http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.0.tar.gz) to `SAGE_ROOT/spkg/base` and **delete** `prereq-0.9.tar.gz`\n``````\n",
    "created_at": "2012-03-26T16:06:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12112#issuecomment-129418",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,11 @@
 1. Since Sage does not need m4, we should not check for it.
 
-2. We don't need to check gcc/g++/gfortran versions if we're building GCC.
+2. Remove the useless checks for bison and flex (in the past, we did the checks but didn't fail if these programs weren't found)
+
+3. We don't need to check gcc/g++/gfortran versions if we're building GCC.
 
 **Apply** to the SAGE_ROOT repository:
 1. [attachment: 12112_from_12576.patch](https://github.com/sagemath/sage/files/ticket12112/12112_from_12576.patch.gz) (**positive_review**, see #12576)
 2. [attachment: 12112_update_prereq.patch](https://github.com/sagemath/sage/files/ticket12112/12112_update_prereq.patch.gz)
+
+**Download** [http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.0.tar.gz](http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.0.tar.gz) to `SAGE_ROOT/spkg/base` and **delete** `prereq-0.9.tar.gz`
``````




---

archive/issue_comments_129419.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nWhat do you think about changing the prereq install script to use bash instead of sh?  (See #12621: with non-bash versions of sh, e.g., on Solaris, at least one part of the script doesn't work properly.)",
    "created_at": "2012-03-26T20:56:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12112#issuecomment-129419",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:8" align="right">comment:8</div>

What do you think about changing the prereq install script to use bash instead of sh?  (See #12621: with non-bash versions of sh, e.g., on Solaris, at least one part of the script doesn't work properly.)



---

archive/issue_comments_129420.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,10 @@\n 1. Since Sage does not need m4, we should not check for it.\n \n-2. Remove the useless checks for bison and flex (in the past, we did the checks but didn't fail if these programs weren't found)\n+2. Remove the useless checks for bison and flex (in the past, we did the checks but didn't fail if these programs weren't found).\n \n 3. We don't need to check gcc/g++/gfortran versions if we're building GCC.\n+\n+4. Use bash to run the prereq install file and configure, see #12621.\n \n **Apply** to the SAGE_ROOT repository:\n 1. [attachment: 12112_from_12576.patch](https://github.com/sagemath/sage/files/ticket12112/12112_from_12576.patch.gz) (**positive_review**, see #12576)\n``````\n",
    "created_at": "2012-03-26T21:38:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12112#issuecomment-129420",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,10 @@
 1. Since Sage does not need m4, we should not check for it.
 
-2. Remove the useless checks for bison and flex (in the past, we did the checks but didn't fail if these programs weren't found)
+2. Remove the useless checks for bison and flex (in the past, we did the checks but didn't fail if these programs weren't found).
 
 3. We don't need to check gcc/g++/gfortran versions if we're building GCC.
+
+4. Use bash to run the prereq install file and configure, see #12621.
 
 **Apply** to the SAGE_ROOT repository:
 1. [attachment: 12112_from_12576.patch](https://github.com/sagemath/sage/files/ticket12112/12112_from_12576.patch.gz) (**positive_review**, see #12576)
``````




---

archive/issue_comments_129421.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,6 +6,8 @@\n \n 4. Use bash to run the prereq install file and configure, see #12621.\n \n+5. Added a test for a C99 compiler, since some packages require that.\n+\n **Apply** to the SAGE_ROOT repository:\n 1. [attachment: 12112_from_12576.patch](https://github.com/sagemath/sage/files/ticket12112/12112_from_12576.patch.gz) (**positive_review**, see #12576)\n 2. [attachment: 12112_update_prereq.patch](https://github.com/sagemath/sage/files/ticket12112/12112_update_prereq.patch.gz)\n``````\n",
    "created_at": "2012-03-27T20:12:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12112#issuecomment-129421",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,6 +6,8 @@
 
 4. Use bash to run the prereq install file and configure, see #12621.
 
+5. Added a test for a C99 compiler, since some packages require that.
+
 **Apply** to the SAGE_ROOT repository:
 1. [attachment: 12112_from_12576.patch](https://github.com/sagemath/sage/files/ticket12112/12112_from_12576.patch.gz) (**positive_review**, see #12576)
 2. [attachment: 12112_update_prereq.patch](https://github.com/sagemath/sage/files/ticket12112/12112_update_prereq.patch.gz)
``````




---

archive/issue_comments_129422.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -12,4 +12,4 @@\n 1. [attachment: 12112_from_12576.patch](https://github.com/sagemath/sage/files/ticket12112/12112_from_12576.patch.gz) (**positive_review**, see #12576)\n 2. [attachment: 12112_update_prereq.patch](https://github.com/sagemath/sage/files/ticket12112/12112_update_prereq.patch.gz)\n \n-**Download** [http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.0.tar.gz](http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.0.tar.gz) to `SAGE_ROOT/spkg/base` and **delete** `prereq-0.9.tar.gz`\n+**Download** [http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.0.tar.gz](http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.0.tar.gz) to `SAGE_ROOT/spkg/base` and **delete** `prereq-0.9.tar.gz` (reviewers: look at [attachment: prereq-1.0.diff](https://github.com/sagemath/sage/files/ticket12112/prereq-1.0.diff.gz) for the changes)\n``````\n",
    "created_at": "2012-03-27T20:15:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12112#issuecomment-129422",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -12,4 +12,4 @@
 1. [attachment: 12112_from_12576.patch](https://github.com/sagemath/sage/files/ticket12112/12112_from_12576.patch.gz) (**positive_review**, see #12576)
 2. [attachment: 12112_update_prereq.patch](https://github.com/sagemath/sage/files/ticket12112/12112_update_prereq.patch.gz)
 
-**Download** [http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.0.tar.gz](http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.0.tar.gz) to `SAGE_ROOT/spkg/base` and **delete** `prereq-0.9.tar.gz`
+**Download** [http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.0.tar.gz](http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.0.tar.gz) to `SAGE_ROOT/spkg/base` and **delete** `prereq-0.9.tar.gz` (reviewers: look at [attachment: prereq-1.0.diff](https://github.com/sagemath/sage/files/ticket12112/prereq-1.0.diff.gz) for the changes)
``````




---

archive/issue_comments_129423.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nThis seems to work like it should, so needs_review.",
    "created_at": "2012-03-27T20:17:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12112#issuecomment-129423",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:12" align="right">comment:12</div>

This seems to work like it should, so needs_review.



---

archive/issue_events_162600.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-03-27T20:17:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12112#event-162600"
}
```



---

archive/issue_comments_129424.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nDave, I'm cc'ing you. I don't know if you have any time these days, but since you worked on the original prereq script, you may be one of the most qualified people to review this, especially the changes in [attachment: prereq-1.0.diff](https://github.com/sagemath/sage/files/ticket12112/prereq-1.0.diff.gz). (The other changes are pretty straightforward, I think.)",
    "created_at": "2012-03-28T04:32:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12112#issuecomment-129424",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:13" align="right">comment:13</div>

Dave, I'm cc'ing you. I don't know if you have any time these days, but since you worked on the original prereq script, you may be one of the most qualified people to review this, especially the changes in [attachment: prereq-1.0.diff](https://github.com/sagemath/sage/files/ticket12112/prereq-1.0.diff.gz). (The other changes are pretty straightforward, I think.)



---

archive/issue_comments_129425.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nConcerning `bash`: maybe we shoudn't require bash in the prereq script.  The prereq script checks whether bash is available and gives a clear error message if it's not.  So I would try to make the script portable, and not force bash.",
    "created_at": "2012-03-29T12:14:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12112#issuecomment-129425",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:14" align="right">comment:14</div>

Concerning `bash`: maybe we shoudn't require bash in the prereq script.  The prereq script checks whether bash is available and gives a clear error message if it's not.  So I would try to make the script portable, and not force bash.



---

archive/issue_comments_129426.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,9 +2,9 @@\n \n 2. Remove the useless checks for bison and flex (in the past, we did the checks but didn't fail if these programs weren't found).\n \n-3. We don't need to check gcc/g++/gfortran versions if we're building GCC.\n+3. We don't need to check gcc/g++/gfortran versions if we're building GCC.  Use the environment variable `SAGE_BUILD_TOOLCHAIN` (introduced in #12369) for this.\n \n-4. Use bash to run the prereq install file and configure, see #12621.\n+4. Make the portable, so it doesn't require bash (instead of #12621, which proposed to force `bash`).\n \n 5. Added a test for a C99 compiler, since some packages require that.\n \n``````\n",
    "created_at": "2012-03-29T12:19:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12112#issuecomment-129426",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,9 +2,9 @@
 
 2. Remove the useless checks for bison and flex (in the past, we did the checks but didn't fail if these programs weren't found).
 
-3. We don't need to check gcc/g++/gfortran versions if we're building GCC.
+3. We don't need to check gcc/g++/gfortran versions if we're building GCC.  Use the environment variable `SAGE_BUILD_TOOLCHAIN` (introduced in #12369) for this.
 
-4. Use bash to run the prereq install file and configure, see #12621.
+4. Make the portable, so it doesn't require bash (instead of #12621, which proposed to force `bash`).
 
 5. Added a test for a C99 compiler, since some packages require that.
 
``````




---

archive/issue_comments_129427.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nIf we don't use bash, then the code\n\n```sh\nif ! [ -f \"$SAGE_ROOT/spkg/base/$TARGET.tar\" ]; then\n```\nneeds to be changed: it gives an error when run on Solaris:\n\n```\nbase/prereq-0.9-install: !: not found\n```\n(The error is ignored and installation continues, but this should still be fixed.)",
    "created_at": "2012-03-29T15:20:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12112#issuecomment-129427",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:16" align="right">comment:16</div>

If we don't use bash, then the code

```sh
if ! [ -f "$SAGE_ROOT/spkg/base/$TARGET.tar" ]; then
```
needs to be changed: it gives an error when run on Solaris:

```
base/prereq-0.9-install: !: not found
```
(The error is ignored and installation continues, but this should still be fixed.)



---

archive/issue_comments_129428.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nOkay, un-negated the test and swapped the \"if\" and \"else\" clauses.",
    "created_at": "2012-03-29T15:34:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12112#issuecomment-129428",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:17" align="right">comment:17</div>

Okay, un-negated the test and swapped the "if" and "else" clauses.



---

archive/issue_comments_129429.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\n(After a little experimentation, I guess putting the `!` inside the test would have worked, too: `if [ ! -f ... ]`.)",
    "created_at": "2012-03-29T15:57:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12112#issuecomment-129429",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:18" align="right">comment:18</div>

(After a little experimentation, I guess putting the `!` inside the test would have worked, too: `if [ ! -f ... ]`.)



---

archive/issue_comments_129430.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@jdemeyer](#comment%3A14):\n> Concerning `bash`: maybe we shouldn't require bash in the prereq script.  The prereq script checks whether bash is available and gives a clear error message if it's not.  So I would try to make the script portable, and not force bash.\n\nAgreed. Someone had ideas of converting sage to use the autotools (or autohell to William). The tools are carefully written to be portable, so the last thing we should do is force any non-portable code in there, as it would make it more difficult to use the current script as a basis for others.",
    "created_at": "2012-03-29T21:55:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12112#issuecomment-129430",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@jdemeyer](#comment%3A14):
> Concerning `bash`: maybe we shouldn't require bash in the prereq script.  The prereq script checks whether bash is available and gives a clear error message if it's not.  So I would try to make the script portable, and not force bash.

Agreed. Someone had ideas of converting sage to use the autotools (or autohell to William). The tools are carefully written to be portable, so the last thing we should do is force any non-portable code in there, as it would make it more difficult to use the current script as a basis for others.



---

archive/issue_comments_129431.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@jhpalmieri](#comment%3A13):\n> Dave, I'm cc'ing you. I don't know if you have any time these days, but since you worked on the original prereq script, you may be one of the most qualified people to review this, especially the changes in [attachment: prereq-1.0.diff](https://github.com/sagemath/sage/files/ticket12112/prereq-1.0.diff.gz). (The other changes are pretty straightforward, I think.)\n\nI'll comment there.",
    "created_at": "2012-03-29T22:00:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12112#issuecomment-129431",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@jhpalmieri](#comment%3A13):
> Dave, I'm cc'ing you. I don't know if you have any time these days, but since you worked on the original prereq script, you may be one of the most qualified people to review this, especially the changes in [attachment: prereq-1.0.diff](https://github.com/sagemath/sage/files/ticket12112/prereq-1.0.diff.gz). (The other changes are pretty straightforward, I think.)

I'll comment there.



---

archive/issue_comments_129432.json:
```json
{
    "body": "Changed reviewer from **Jeroen Demeyer** to **Jeroen Demeyer, David Kirkby**",
    "created_at": "2012-03-29T22:56:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12112#issuecomment-129432",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

Changed reviewer from **Jeroen Demeyer** to **Jeroen Demeyer, David Kirkby**



---

archive/issue_comments_129433.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nA few comments: \n\n1) Testing with: \n\n```\nif [ \"$SAGE_BUILD_DIR\" = \"\" ]; then \n```\n\nis bad practice. Testing on \"\" can fail under some admittedly obscure circumstances. Better would be \n\n```\nif [ \"x$SAGE_BUILD_DIR\" = x ]; then \n```\n\n2) Are we 100% sure m4 is not needed? I have some recollection of it being needed somewhere. If not, this \nhttp://www.sagemath.org/doc/faq/faq-usage.html\nneeds modifying, as that specifically says to install m4. The configure script was clearly written with this in mind too. \n\nI can't judge all the implications of all the changes, but looking at the diffs only, I can't see anything that looks as though it will be a problem.  \n\nA couple of minor points, one could address if one wanted to: \n\na) The Solaris page should now really be to Oracle and not Sun, but it's no big deal. \n\nb) Although William was annoyed when Sage would not build with gcc 3.4 series due to \"ratpoints\", and was keen to get Sage working with gcc 3.4.x, I think the chances of that happening are very remote now. There is too much code that will not compile with such an old version of gcc. So one could consider removing all the checks associated with gcc 3.4.x, and simply accept that gcc 4.0.1 is the minimum version. That could take quite a bit of code out, and would mean that SAGE_USE_OLD_GCC could be removed from the list of environment variables. \n\nSo I can't see anything wrong, with the exception of how SAGE_BUILD_DIR is tested. \n\nAssuming John and Jeroen are happy with each others changes, and the SAGE_BUILD_DIR issue is fixed, I think this should be set to positive review. \n\n\nDave",
    "created_at": "2012-03-29T22:56:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12112#issuecomment-129433",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:21" align="right">comment:21</div>

A few comments: 

1) Testing with: 

```
if [ "$SAGE_BUILD_DIR" = "" ]; then 
```

is bad practice. Testing on "" can fail under some admittedly obscure circumstances. Better would be 

```
if [ "x$SAGE_BUILD_DIR" = x ]; then 
```

2) Are we 100% sure m4 is not needed? I have some recollection of it being needed somewhere. If not, this 
http://www.sagemath.org/doc/faq/faq-usage.html
needs modifying, as that specifically says to install m4. The configure script was clearly written with this in mind too. 

I can't judge all the implications of all the changes, but looking at the diffs only, I can't see anything that looks as though it will be a problem.  

A couple of minor points, one could address if one wanted to: 

a) The Solaris page should now really be to Oracle and not Sun, but it's no big deal. 

b) Although William was annoyed when Sage would not build with gcc 3.4 series due to "ratpoints", and was keen to get Sage working with gcc 3.4.x, I think the chances of that happening are very remote now. There is too much code that will not compile with such an old version of gcc. So one could consider removing all the checks associated with gcc 3.4.x, and simply accept that gcc 4.0.1 is the minimum version. That could take quite a bit of code out, and would mean that SAGE_USE_OLD_GCC could be removed from the list of environment variables. 

So I can't see anything wrong, with the exception of how SAGE_BUILD_DIR is tested. 

Assuming John and Jeroen are happy with each others changes, and the SAGE_BUILD_DIR issue is fixed, I think this should be set to positive review. 


Dave



---

archive/issue_comments_129434.json:
```json
{
    "body": "Changed dependencies from **#12739** to **#12739, #12785**",
    "created_at": "2012-03-29T23:34:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12112#issuecomment-129434",
    "user": "https://github.com/jhpalmieri"
}
```

Changed dependencies from **#12739** to **#12739, #12785**



---

archive/issue_comments_129435.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nSee #12785 for the FAQ issue. Regarding tests like `if [ x\"...\" = x ]; then`, if we were sure to be using bash, I would feel comfortable omitting the x's, but since we're not using bash here, perhaps we should include the x's.",
    "created_at": "2012-03-29T23:35:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12112#issuecomment-129435",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:23" align="right">comment:23</div>

See #12785 for the FAQ issue. Regarding tests like `if [ x"..." = x ]; then`, if we were sure to be using bash, I would feel comfortable omitting the x's, but since we're not using bash here, perhaps we should include the x's.



---

archive/issue_comments_129436.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nOk, I'm making the following changes:\n\n```diff\n--- a/spkg/base/prereq-1.0-install\n+++ b/spkg/base/prereq-1.0-install\n@@ -5,7 +5,7 @@\n\n\n TARGET=prereq-1.0\n-if [ \"$SAGE_BUILD_DIR\" = \"\" ]; then\n+if [ \"x$SAGE_BUILD_DIR\" = x ]; then\n     SAGE_BUILD_DIR=\"$SAGE_ROOT/spkg/build\"\n fi\n mkdir -p \"$SAGE_BUILD_DIR\"\n@@ -22,7 +22,7 @@\n echo \"Starting prerequisite check.\"\n echo \"Machine: `uname -a`\"\n\n-if [ \"$SAGE_PORT\" = \"\" ]; then\n+if [ \"x$SAGE_PORT\" = x ]; then\n     if [ `uname | sed -e 's/WIN.\\+/WIN/'` = \"CYGWIN\" ]; then\n         echo \"Unfortunately, building SAGE on Cygwin is not currently supported,\"\n         echo \"though we are actively working on supporting it.  If you would like\"\n@@ -138,7 +138,7 @@\n     fi\n\n     # If we are installing GCC, skip all compiler checks in ./configure\n-    if [ \"$SAGE_BUILD_TOOLCHAIN\" = yes ]; then\n+    if [ \"x$SAGE_BUILD_TOOLCHAIN\" = xyes ]; then\n         PREREQ_OPTIONS=\"--disable-compiler-checks $PREREQ_OPTIONS\"\n     fi\n\n```",
    "created_at": "2012-03-30T12:15:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12112#issuecomment-129436",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:24" align="right">comment:24</div>

Ok, I'm making the following changes:

```diff
--- a/spkg/base/prereq-1.0-install
+++ b/spkg/base/prereq-1.0-install
@@ -5,7 +5,7 @@


 TARGET=prereq-1.0
-if [ "$SAGE_BUILD_DIR" = "" ]; then
+if [ "x$SAGE_BUILD_DIR" = x ]; then
     SAGE_BUILD_DIR="$SAGE_ROOT/spkg/build"
 fi
 mkdir -p "$SAGE_BUILD_DIR"
@@ -22,7 +22,7 @@
 echo "Starting prerequisite check."
 echo "Machine: `uname -a`"

-if [ "$SAGE_PORT" = "" ]; then
+if [ "x$SAGE_PORT" = x ]; then
     if [ `uname | sed -e 's/WIN.\+/WIN/'` = "CYGWIN" ]; then
         echo "Unfortunately, building SAGE on Cygwin is not currently supported,"
         echo "though we are actively working on supporting it.  If you would like"
@@ -138,7 +138,7 @@
     fi

     # If we are installing GCC, skip all compiler checks in ./configure
-    if [ "$SAGE_BUILD_TOOLCHAIN" = yes ]; then
+    if [ "x$SAGE_BUILD_TOOLCHAIN" = xyes ]; then
         PREREQ_OPTIONS="--disable-compiler-checks $PREREQ_OPTIONS"
     fi

```



---

archive/issue_comments_129437.json:
```json
{
    "body": "Attachment: **[12112_update_prereq.patch.gz](https://github.com/sagemath/sage/files/ticket12112/12112_update_prereq.patch.gz)**",
    "created_at": "2012-03-30T12:15:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12112#issuecomment-129437",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[12112_update_prereq.patch.gz](https://github.com/sagemath/sage/files/ticket12112/12112_update_prereq.patch.gz)**



---

archive/issue_comments_129438.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A21):\n> b) Although William was annoyed when Sage would not build with gcc 3.4 series due to \"ratpoints\", and was keen to get Sage working with gcc 3.4.x, I think the chances of that happening are very remote now. There is too much code that will not compile with such an old version of gcc. So one could consider removing all the checks associated with gcc 3.4.x, and simply accept that gcc 4.0.1 is the minimum version. That could take quite a bit of code out, and would mean that SAGE_USE_OLD_GCC could be removed from the list of environment variables. \n\nI would wait with this until #12369 is merged.",
    "created_at": "2012-03-30T12:19:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12112#issuecomment-129438",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@sagetrac-drkirkby](#comment%3A21):
> b) Although William was annoyed when Sage would not build with gcc 3.4 series due to "ratpoints", and was keen to get Sage working with gcc 3.4.x, I think the chances of that happening are very remote now. There is too much code that will not compile with such an old version of gcc. So one could consider removing all the checks associated with gcc 3.4.x, and simply accept that gcc 4.0.1 is the minimum version. That could take quite a bit of code out, and would mean that SAGE_USE_OLD_GCC could be removed from the list of environment variables. 

I would wait with this until #12369 is merged.



---

archive/issue_comments_129439.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A21):\n> Assuming John and Jeroen are happy with each others changes, and the SAGE_BUILD_DIR issue is fixed, I think this should be set to positive review. \n\nDone!",
    "created_at": "2012-03-30T13:32:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12112#issuecomment-129439",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@sagetrac-drkirkby](#comment%3A21):
> Assuming John and Jeroen are happy with each others changes, and the SAGE_BUILD_DIR issue is fixed, I think this should be set to positive review. 

Done!



---

archive/issue_events_162601.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-03-30T13:33:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12112#event-162601"
}
```



---

archive/issue_events_162602.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-03-30T13:33:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12112#event-162602"
}
```



---

archive/issue_comments_129440.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -13,3 +13,5 @@\n 2. [attachment: 12112_update_prereq.patch](https://github.com/sagemath/sage/files/ticket12112/12112_update_prereq.patch.gz)\n \n **Download** [http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.0.tar.gz](http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.0.tar.gz) to `SAGE_ROOT/spkg/base` and **delete** `prereq-0.9.tar.gz` (reviewers: look at [attachment: prereq-1.0.diff](https://github.com/sagemath/sage/files/ticket12112/prereq-1.0.diff.gz) for the changes)\n+\n+**See also**: #12785 (update the FAQ)\n``````\n",
    "created_at": "2012-03-30T15:37:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12112#issuecomment-129440",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -13,3 +13,5 @@
 2. [attachment: 12112_update_prereq.patch](https://github.com/sagemath/sage/files/ticket12112/12112_update_prereq.patch.gz)
 
 **Download** [http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.0.tar.gz](http://boxen.math.washington.edu/home/jdemeyer/spkg/prereq-1.0.tar.gz) to `SAGE_ROOT/spkg/base` and **delete** `prereq-0.9.tar.gz` (reviewers: look at [attachment: prereq-1.0.diff](https://github.com/sagemath/sage/files/ticket12112/prereq-1.0.diff.gz) for the changes)
+
+**See also**: #12785 (update the FAQ)
``````




---

archive/issue_comments_129441.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nI wouldn't say #12785 is a dependency, it's more like a follow-up.",
    "created_at": "2012-03-30T15:37:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12112#issuecomment-129441",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:28" align="right">comment:28</div>

I wouldn't say #12785 is a dependency, it's more like a follow-up.



---

archive/issue_comments_129442.json:
```json
{
    "body": "Changed dependencies from **#12739, #12785** to **#12739**",
    "created_at": "2012-03-30T15:37:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12112#issuecomment-129442",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#12739, #12785** to **#12739**



---

archive/issue_comments_129443.json:
```json
{
    "body": "Changed dependencies from **#12739** to **#12739, to be merged with #12369**",
    "created_at": "2012-03-30T22:34:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12112#issuecomment-129443",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#12739** to **#12739, to be merged with #12369**



---

archive/issue_comments_129444.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nI was wrong about Sage not requiring `m4`.  At least MPIR does require m4 (maybe older versions which I tested initially didn't require `m4`).",
    "created_at": "2012-04-01T16:04:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12112#issuecomment-129444",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:30" align="right">comment:30</div>

I was wrong about Sage not requiring `m4`.  At least MPIR does require m4 (maybe older versions which I tested initially didn't require `m4`).



---

archive/issue_events_162603.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-04-01T16:04:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12112#event-162603"
}
```



---

archive/issue_events_162604.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-04-01T16:04:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12112#event-162604"
}
```



---

archive/issue_comments_129445.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,12 +1,10 @@\n-1. Since Sage does not need m4, we should not check for it.\n+1. Added a test for a C99 compiler, since some packages require that.\n \n 2. Remove the useless checks for bison and flex (in the past, we did the checks but didn't fail if these programs weren't found).\n \n 3. We don't need to check gcc/g++/gfortran versions if we're building GCC.  Use the environment variable `SAGE_BUILD_TOOLCHAIN` (introduced in #12369) for this.\n \n-4. Make the portable, so it doesn't require bash (instead of #12621, which proposed to force `bash`).\n-\n-5. Added a test for a C99 compiler, since some packages require that.\n+4. Make the script portable, so it doesn't require bash (instead of #12621, which proposed to force `bash`).\n \n **Apply** to the SAGE_ROOT repository:\n 1. [attachment: 12112_from_12576.patch](https://github.com/sagemath/sage/files/ticket12112/12112_from_12576.patch.gz) (**positive_review**, see #12576)\n``````\n",
    "created_at": "2012-04-01T16:16:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12112#issuecomment-129445",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,12 +1,10 @@
-1. Since Sage does not need m4, we should not check for it.
+1. Added a test for a C99 compiler, since some packages require that.
 
 2. Remove the useless checks for bison and flex (in the past, we did the checks but didn't fail if these programs weren't found).
 
 3. We don't need to check gcc/g++/gfortran versions if we're building GCC.  Use the environment variable `SAGE_BUILD_TOOLCHAIN` (introduced in #12369) for this.
 
-4. Make the portable, so it doesn't require bash (instead of #12621, which proposed to force `bash`).
-
-5. Added a test for a C99 compiler, since some packages require that.
+4. Make the script portable, so it doesn't require bash (instead of #12621, which proposed to force `bash`).
 
 **Apply** to the SAGE_ROOT repository:
 1. [attachment: 12112_from_12576.patch](https://github.com/sagemath/sage/files/ticket12112/12112_from_12576.patch.gz) (**positive_review**, see #12576)
``````




---

archive/issue_comments_129446.json:
```json
{
    "body": "Diff for the prereq tarball, for review only",
    "created_at": "2012-04-01T16:39:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12112#issuecomment-129446",
    "user": "https://github.com/jdemeyer"
}
```

Diff for the prereq tarball, for review only



---

archive/issue_events_162605.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-04-01T16:40:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12112#event-162605"
}
```



---

archive/issue_events_162606.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-04-01T16:40:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12112#event-162606"
}
```



---

archive/issue_comments_129447.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nAttachment: **[prereq-1.0.diff.gz](https://github.com/sagemath/sage/files/ticket12112/prereq-1.0.diff.gz)**\n\nRestored the m4 check.",
    "created_at": "2012-04-01T16:40:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12112#issuecomment-129447",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:32" align="right">comment:32</div>

Attachment: **[prereq-1.0.diff.gz](https://github.com/sagemath/sage/files/ticket12112/prereq-1.0.diff.gz)**

Restored the m4 check.



---

archive/issue_comments_129448.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nCan somebody please review this again?  The only change with respect to the old version was to restore the check for `m4`.",
    "created_at": "2012-04-04T07:08:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12112#issuecomment-129448",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:33" align="right">comment:33</div>

Can somebody please review this again?  The only change with respect to the old version was to restore the check for `m4`.



---

archive/issue_comments_129449.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nDavid Kirkby sent this is an email:\n\n```\nHi,\nI see your comment about wanting the update reviewed, and the only\nchange was checking for m4 again. I'm at work now, and don't have my\nSage trac password with me, so I can't update the ticket. Please\nconsider I have given this a positive review. I suggest you copy this\nemail, and put it in the trac ticket, and change it to positive\nyourself\n\nDave\n```",
    "created_at": "2012-04-04T12:36:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12112#issuecomment-129449",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:34" align="right">comment:34</div>

David Kirkby sent this is an email:

```
Hi,
I see your comment about wanting the update reviewed, and the only
change was checking for m4 again. I'm at work now, and don't have my
Sage trac password with me, so I can't update the ticket. Please
consider I have given this a positive review. I suggest you copy this
email, and put it in the trac ticket, and change it to positive
yourself

Dave
```



---

archive/issue_events_162607.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-04-04T12:36:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12112#event-162607"
}
```



---

archive/issue_events_162608.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-04-04T12:36:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12112#event-162608"
}
```



---

archive/issue_comments_129450.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nSee #12814 for a **blocker** follow-up: `prereq-0.9-install` should be added to `.hgignore` for upgraded Sage versions.",
    "created_at": "2012-04-06T11:45:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12112#issuecomment-129450",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:35" align="right">comment:35</div>

See #12814 for a **blocker** follow-up: `prereq-0.9-install` should be added to `.hgignore` for upgraded Sage versions.



---

archive/issue_comments_129451.json:
```json
{
    "body": "Merged: **sage-5.0.beta13**",
    "created_at": "2012-04-07T15:08:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12112#issuecomment-129451",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.0.beta13**



---

archive/issue_events_162609.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-04-07T15:08:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12112#event-162609"
}
```



---

archive/issue_events_162610.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-04-07T15:08:00Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/12112",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12112#event-162610"
}
```
