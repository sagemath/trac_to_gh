# Issue 12212: Colormap for implicit_plot3d and parametric_plot3d

archive/issues_012040.json:
```json
{
    "assignees": [
        "https://github.com/jasongrout",
        "https://github.com/williamstein"
    ],
    "body": "Colormaps work for `plot3d`, but not for `implicit_plot3d` or `parametric_plot3d`.  \n\nCompare the following:\n\n```\nsage: var('r v')\nsage: cmsel = [colormaps['autumn'](i) for i in sxrange(0,1,0.05)]\nsage: p = plot3d(0.2*(r**2 + v**2) + cos(2*r)*sin(2*v),(r,-2,2), (v,-2,2), adaptive=True, color=cmsel, plot_points=10, opacity=0.9)\nsage: p2 = sphere((0,0,0),1,color='black',opacity=0.5)\nsage: (p+p2).show(aspect_ratio=(1,1,1), figsize=[7,3])\n```\n\n\n```\nsage: cmsel = [colormaps['autumn'](i) for i in sxrange(0,1,0.05)]\nsage: var('x,y,z')\nsage: implicit_plot3d(x^2+y^2+z^2==4, (x, -3, 3), (y, -3,3), (z, -3,3), color=cmsel)\nERROR: An unexpected error occurred while tokenizing input\nThe following traceback may be corrupted or invalid\nThe error message is: ('EOF in multi-line statement', (49, 0))\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n...\nTypeError: 'NoneType' object is not iterable\n```\n\nSee details at this [Ask Sage question](http://ask.sagemath.org/question/17/use-a-colormap-for-implicit_plot3d).\n\n**Upstream**: http://chapoton.perso.math.cnrs.fr/jmol-14.2.11_2015.01.20.tar.bz2\n\n\nDepends on #17645\n\nCC:  @haraldschilly @jasongrout @jvkersch @kcrisman @ppurka @gutow\n\nKeywords: **colormap, plot**\n\nBranch/Commit: **[`36e4d8c`](https://github.com/sagemath/sagetrac-mirror/commit/36e4d8cae0037fc8442fbd20594a8e36c5b46196)**\n\nReviewer: **Fr\u00e9d\u00e9ric Chapoton, Niles Johnson, Karl-Dieter Crisman, Jonathan Gutow**\n\nAuthor: **Joris Vankerschaver, Fr\u00e9d\u00e9ric Chapoton, Niles Johnson**\n\nComponent: **graphics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/12212_\n\n",
    "closed_at": "2015-02-08T15:26:33Z",
    "created_at": "2011-12-21T13:24:43Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graphics",
        "https://github.com/sagemath/sage/labels/p%3A%20blocker%20/%201",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Colormap for implicit_plot3d and parametric_plot3d",
    "type": "issue",
    "updated_at": "2015-02-08T15:26:33Z",
    "url": "https://github.com/sagemath/sage/issues/12212",
    "user": "https://github.com/nilesjohnson"
}
```
Colormaps work for `plot3d`, but not for `implicit_plot3d` or `parametric_plot3d`.  

Compare the following:

```
sage: var('r v')
sage: cmsel = [colormaps['autumn'](i) for i in sxrange(0,1,0.05)]
sage: p = plot3d(0.2*(r**2 + v**2) + cos(2*r)*sin(2*v),(r,-2,2), (v,-2,2), adaptive=True, color=cmsel, plot_points=10, opacity=0.9)
sage: p2 = sphere((0,0,0),1,color='black',opacity=0.5)
sage: (p+p2).show(aspect_ratio=(1,1,1), figsize=[7,3])
```


```
sage: cmsel = [colormaps['autumn'](i) for i in sxrange(0,1,0.05)]
sage: var('x,y,z')
sage: implicit_plot3d(x^2+y^2+z^2==4, (x, -3, 3), (y, -3,3), (z, -3,3), color=cmsel)
ERROR: An unexpected error occurred while tokenizing input
The following traceback may be corrupted or invalid
The error message is: ('EOF in multi-line statement', (49, 0))
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
...
TypeError: 'NoneType' object is not iterable
```

See details at this [Ask Sage question](http://ask.sagemath.org/question/17/use-a-colormap-for-implicit_plot3d).

**Upstream**: http://chapoton.perso.math.cnrs.fr/jmol-14.2.11_2015.01.20.tar.bz2


Depends on #17645

CC:  @haraldschilly @jasongrout @jvkersch @kcrisman @ppurka @gutow

Keywords: **colormap, plot**

Branch/Commit: **[`36e4d8c`](https://github.com/sagemath/sagetrac-mirror/commit/36e4d8cae0037fc8442fbd20594a8e36c5b46196)**

Reviewer: **Frédéric Chapoton, Niles Johnson, Karl-Dieter Crisman, Jonathan Gutow**

Author: **Joris Vankerschaver, Frédéric Chapoton, Niles Johnson**

Component: **graphics**

_Issue created by migration from https://trac.sagemath.org/ticket/12212_





---

archive/issue_events_164351.json:
```json
{
    "actor": "https://github.com/nilesjohnson",
    "created_at": "2011-12-21T13:24:43Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12212#event-164351"
}
```



---

archive/issue_events_164352.json:
```json
{
    "actor": "https://github.com/nilesjohnson",
    "created_at": "2011-12-21T13:24:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graphics",
    "label_color": "0000ff",
    "label_name": "c: graphics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12212#event-164352"
}
```



---

archive/issue_events_164353.json:
```json
{
    "actor": "https://github.com/nilesjohnson",
    "created_at": "2011-12-21T13:24:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12212#event-164353"
}
```



---

archive/issue_events_164354.json:
```json
{
    "actor": "https://github.com/nilesjohnson",
    "created_at": "2011-12-21T13:24:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12212#event-164354"
}
```



---

archive/issue_events_164355.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2011-12-21T13:24:43Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "subject": "https://github.com/nilesjohnson",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12212#event-164355"
}
```



---

archive/issue_events_164356.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2011-12-21T13:24:43Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "subject": "https://github.com/nilesjohnson",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12212#event-164356"
}
```



---

archive/issue_comments_131556.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI've noticed that the functionality for dealing with a color map can be found in the `plot3d_adaptive` method in `sage.plot.plot3d.plot3d` (notice the `adaptive=True` keyword in the above).  This code only supposes that the graphical object is an instance of `IndexFaceSet`, and so it's not too hard to take out the code and apply it to parametric plots and implicit plots as well.\n\nIn fact, building upon the original idea one can apply color maps that vary not just in the z-direction, but according to the level sets of some arbitrary function.  This is nice, for instance, if you want to paint a surface according to its curvature.  And the original idea can also be adapted to gradually vary other texture attributes (for instance opacity) according to some scalar function.\n\nI've put this functionality into a class tentatively called `GradualTextureTransform`, but since I'm not entirely happy with the class layout, I wanted to ask for your input before turning this into a full-fledged patch.  I've put all of my code into a [sagenb worksheet](http://www.sagenb.org/home/pub/3910) and I've also uploaded some sample images.  \n\nOne issue with the worksheet is that the JMOL applet crashes (at least in my browser) after rendering a bunch of colormapped images.  This could be because the colormap algorithm basically splits each surface into 10s or 100s of parts and colors those pieces individually, so having too many of these processed images around may be too much for the applet...",
    "created_at": "2011-12-29T04:09:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131556",
    "user": "https://github.com/jvkersch"
}
```

<div id="comment:2" align="right">comment:2</div>

I've noticed that the functionality for dealing with a color map can be found in the `plot3d_adaptive` method in `sage.plot.plot3d.plot3d` (notice the `adaptive=True` keyword in the above).  This code only supposes that the graphical object is an instance of `IndexFaceSet`, and so it's not too hard to take out the code and apply it to parametric plots and implicit plots as well.

In fact, building upon the original idea one can apply color maps that vary not just in the z-direction, but according to the level sets of some arbitrary function.  This is nice, for instance, if you want to paint a surface according to its curvature.  And the original idea can also be adapted to gradually vary other texture attributes (for instance opacity) according to some scalar function.

I've put this functionality into a class tentatively called `GradualTextureTransform`, but since I'm not entirely happy with the class layout, I wanted to ask for your input before turning this into a full-fledged patch.  I've put all of my code into a [sagenb worksheet](http://www.sagenb.org/home/pub/3910) and I've also uploaded some sample images.  

One issue with the worksheet is that the JMOL applet crashes (at least in my browser) after rendering a bunch of colormapped images.  This could be because the colormap algorithm basically splits each surface into 10s or 100s of parts and colors those pieces individually, so having too many of these processed images around may be too much for the applet...



---

archive/issue_comments_131557.json:
```json
{
    "body": "Implicit plot colormap (example from the ticket)",
    "created_at": "2011-12-29T04:09:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131557",
    "user": "https://github.com/jvkersch"
}
```

Implicit plot colormap (example from the ticket)



---

archive/issue_comments_131558.json:
```json
{
    "body": "Attachment: **[implicit_plot_colormap.jpeg](https://github.com/sagemath/sage/files/ticket12212/implicit_plot_colormap.jpeg)**\n\nparametric plot colormap",
    "created_at": "2011-12-29T04:10:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131558",
    "user": "https://github.com/jvkersch"
}
```

Attachment: **[implicit_plot_colormap.jpeg](https://github.com/sagemath/sage/files/ticket12212/implicit_plot_colormap.jpeg)**

parametric plot colormap



---

archive/issue_comments_131559.json:
```json
{
    "body": "Attachment: **[parametric_plot_colormap.jpeg](https://github.com/sagemath/sage/files/ticket12212/parametric_plot_colormap.jpeg)**\n\nimplicit plot colormap (non-uniform)",
    "created_at": "2011-12-29T04:10:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131559",
    "user": "https://github.com/jvkersch"
}
```

Attachment: **[parametric_plot_colormap.jpeg](https://github.com/sagemath/sage/files/ticket12212/parametric_plot_colormap.jpeg)**

implicit plot colormap (non-uniform)



---

archive/issue_comments_131560.json:
```json
{
    "body": "Attachment: **[implicit_plot_nonuniform_colormap.jpeg](https://github.com/sagemath/sage/files/ticket12212/implicit_plot_nonuniform_colormap.jpeg)**\n\npartially translucent spheres",
    "created_at": "2011-12-29T04:46:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131560",
    "user": "https://github.com/jvkersch"
}
```

Attachment: **[implicit_plot_nonuniform_colormap.jpeg](https://github.com/sagemath/sage/files/ticket12212/implicit_plot_nonuniform_colormap.jpeg)**

partially translucent spheres



---

archive/issue_comments_131561.json:
```json
{
    "body": "Attachment: **[spheres_opacity.jpeg](https://github.com/sagemath/sage/files/ticket12212/spheres_opacity.jpeg)**\n\nAttachment: **[ellipsoid_curvature.jpeg](https://github.com/sagemath/sage/files/ticket12212/ellipsoid_curvature.jpeg)**\n\nellipsoid colored by gaussian curvature",
    "created_at": "2011-12-29T04:46:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131561",
    "user": "https://github.com/jvkersch"
}
```

Attachment: **[spheres_opacity.jpeg](https://github.com/sagemath/sage/files/ticket12212/spheres_opacity.jpeg)**

Attachment: **[ellipsoid_curvature.jpeg](https://github.com/sagemath/sage/files/ticket12212/ellipsoid_curvature.jpeg)**

ellipsoid colored by gaussian curvature



---

archive/issue_comments_131562.json:
```json
{
    "body": "saddle colored by gaussian curvature",
    "created_at": "2011-12-29T04:46:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131562",
    "user": "https://github.com/jvkersch"
}
```

saddle colored by gaussian curvature



---

archive/issue_comments_131563.json:
```json
{
    "body": "Attachment: **[saddle_curvature.jpeg](https://github.com/sagemath/sage/files/ticket12212/saddle_curvature.jpeg)**\n\nAttachment: **[buckyball_curvature.jpeg](https://github.com/sagemath/sage/files/ticket12212/buckyball_curvature.jpeg)**\n\ncomplicated surface colored by gaussian curvature",
    "created_at": "2011-12-29T04:47:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131563",
    "user": "https://github.com/jvkersch"
}
```

Attachment: **[saddle_curvature.jpeg](https://github.com/sagemath/sage/files/ticket12212/saddle_curvature.jpeg)**

Attachment: **[buckyball_curvature.jpeg](https://github.com/sagemath/sage/files/ticket12212/buckyball_curvature.jpeg)**

complicated surface colored by gaussian curvature



---

archive/issue_comments_131564.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nReplying to [@jvkersch](#comment%3A2):\n\n\n> In fact, building upon the original idea one can apply color maps that vary not just in the z-direction, but according to the level sets of some arbitrary function.  \n\nThis is great!  Indeed my original interest was to color by some other function :)\n\n> I've put this functionality into a class tentatively called `GradualTextureTransform`, but since I'm not entirely happy with the class layout, I wanted to ask for your input before turning this into a full-fledged patch.\n\nThanks; I won't be able to look at this for a couple of weeks, but I'll let you know when I can.",
    "created_at": "2011-12-29T14:21:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131564",
    "user": "https://github.com/nilesjohnson"
}
```

<div id="comment:3" align="right">comment:3</div>

Replying to [@jvkersch](#comment%3A2):


> In fact, building upon the original idea one can apply color maps that vary not just in the z-direction, but according to the level sets of some arbitrary function.  

This is great!  Indeed my original interest was to color by some other function :)

> I've put this functionality into a class tentatively called `GradualTextureTransform`, but since I'm not entirely happy with the class layout, I wanted to ask for your input before turning this into a full-fledged patch.

Thanks; I won't be able to look at this for a couple of weeks, but I'll let you know when I can.



---

archive/issue_comments_131565.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nThis is a really cool feature.\n\nJoris, are you still working on this? The link is not valid. Could you attach the code hede?",
    "created_at": "2013-02-22T12:24:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131565",
    "user": "https://github.com/lftabera"
}
```

<div id="comment:4" align="right">comment:4</div>

This is a really cool feature.

Joris, are you still working on this? The link is not valid. Could you attach the code hede?



---

archive/issue_comments_131566.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\n> Joris, are you still working on this? The link is not valid. Could you attach the code hede? \n\nThanks for your comment; I totally forgot about this. \n\nI've attached the worksheet here, feel free to play with it.  I'd be all for making this into a patch if you want.\n\nEdit: the worksheet is too big to serve as an attachment, so I'm providing this external link: http://www2.imperial.ac.uk/~jvankers/12212-implicit-colors-worksheet.sws",
    "created_at": "2013-02-23T21:07:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131566",
    "user": "https://github.com/jvkersch"
}
```

<div id="comment:5" align="right">comment:5</div>

> Joris, are you still working on this? The link is not valid. Could you attach the code hede? 

Thanks for your comment; I totally forgot about this. 

I've attached the worksheet here, feel free to play with it.  I'd be all for making this into a patch if you want.

Edit: the worksheet is too big to serve as an attachment, so I'm providing this external link: http://www2.imperial.ac.uk/~jvankers/12212-implicit-colors-worksheet.sws



---

archive/issue_events_164357.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12212#event-164357"
}
```



---

archive/issue_events_164358.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12212#event-164358"
}
```



---

archive/issue_events_164359.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12212#event-164359"
}
```



---

archive/issue_events_164360.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12212#event-164360"
}
```



---

archive/issue_comments_131567.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nSee [this ask.sagemath question](http://ask.sagemath.org/question/3980/controling-the-color-of-a-parametric-surface) as well.",
    "created_at": "2014-04-30T16:43:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131567",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:8" align="right">comment:8</div>

See [this ask.sagemath question](http://ask.sagemath.org/question/3980/controling-the-color-of-a-parametric-surface) as well.



---

archive/issue_events_164361.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12212#event-164361"
}
```



---

archive/issue_events_164362.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12212#event-164362"
}
```



---

archive/issue_events_164363.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2014-07-24T10:11:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12212#event-164363"
}
```



---

archive/issue_comments_131568.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nHere is a git branch, made from the worksheet above. It needs a better integration into Sage, at the very least.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a6e0d47d681d64a5d0c21cceb1a1f012fba29645\"><code>a6e0d47</code></a></td><td><code>trac #12212 allows to color implicit 3d plots</code></td></tr></table>\n",
    "created_at": "2014-07-24T10:11:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131568",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:10" align="right">comment:10</div>

Here is a git branch, made from the worksheet above. It needs a better integration into Sage, at the very least.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a6e0d47d681d64a5d0c21cceb1a1f012fba29645"><code>a6e0d47</code></a></td><td><code>trac #12212 allows to color implicit 3d plots</code></td></tr></table>




---

archive/issue_comments_131569.json:
```json
{
    "body": "Branch: **[u/chapoton/12212](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/12212)**",
    "created_at": "2014-07-24T10:11:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131569",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[u/chapoton/12212](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/12212)**



---

archive/issue_comments_131570.json:
```json
{
    "body": "Commit: **[`a6e0d47`](https://github.com/sagemath/sagetrac-mirror/commit/a6e0d47d681d64a5d0c21cceb1a1f012fba29645)**",
    "created_at": "2014-07-24T10:11:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131570",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[`a6e0d47`](https://github.com/sagemath/sagetrac-mirror/commit/a6e0d47d681d64a5d0c21cceb1a1f012fba29645)**



---

archive/issue_comments_131571.json:
```json
{
    "body": "Author: **Joris Vankerschaver**",
    "created_at": "2014-07-24T10:11:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131571",
    "user": "https://github.com/fchapoton"
}
```

Author: **Joris Vankerschaver**



---

archive/issue_events_164364.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2014-07-24T10:11:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12212#event-164364"
}
```



---

archive/issue_events_164365.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2014-07-24T10:11:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12212#event-164365"
}
```



---

archive/issue_comments_131572.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@fchapoton](#comment%3A11):\n\nThanks for getting this started.  Could you clarify what you think the work issues are?  Maybe we just need to set up the other plot commands to call this when they are given colormaps for the `color` argument?\n\nDo you have any timings for applying these textures?  Is the code reasonably fast?",
    "created_at": "2014-07-28T15:57:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131572",
    "user": "https://github.com/nilesjohnson"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@fchapoton](#comment%3A11):

Thanks for getting this started.  Could you clarify what you think the work issues are?  Maybe we just need to set up the other plot commands to call this when they are given colormaps for the `color` argument?

Do you have any timings for applying these textures?  Is the code reasonably fast?



---

archive/issue_comments_131573.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nYes, I think it is necessary to make this available when sending a colormap to the color keyword of plot3d commands. How and where in the code to do this is not clear to me.\n\nI have no idea about the speed and timings.",
    "created_at": "2014-07-28T19:58:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131573",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:13" align="right">comment:13</div>

Yes, I think it is necessary to make this available when sending a colormap to the color keyword of plot3d commands. How and where in the code to do this is not clear to me.

I have no idea about the speed and timings.



---

archive/issue_comments_131574.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nWhen I wrote this, it was pretty memory-intensive, depending on the level function used, and could crash the notebook when I generated a bunch of successive plots. I didn't optimize anything for speed or efficiency, though.",
    "created_at": "2014-07-28T20:07:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131574",
    "user": "https://github.com/jvkersch"
}
```

<div id="comment:14" align="right">comment:14</div>

When I wrote this, it was pretty memory-intensive, depending on the level function used, and could crash the notebook when I generated a bunch of successive plots. I didn't optimize anything for speed or efficiency, though.



---

archive/issue_comments_131575.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nI've played with this a little bit now, and it seems reasonably fast in my simple tests.\n\nI realized that using an arbitrary scalar function (e.g. curvature) for the colormap only works for implicit surfaces, not parametrized surfaces.  If I understand correctly, this is a fundamental limitation of this approach, because it applies colors only *after* the surface is constructed and therefore only has access to coordinates in 3-space, not the parametrization that was used to produce them.\n\nThis is still more useful than what currently exists (i.e., nothing!), but perhaps it can be integrated into the surface construction methods in a way that works for both implicit and parametrized surfaces.",
    "created_at": "2014-08-01T13:54:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131575",
    "user": "https://github.com/nilesjohnson"
}
```

<div id="comment:15" align="right">comment:15</div>

I've played with this a little bit now, and it seems reasonably fast in my simple tests.

I realized that using an arbitrary scalar function (e.g. curvature) for the colormap only works for implicit surfaces, not parametrized surfaces.  If I understand correctly, this is a fundamental limitation of this approach, because it applies colors only *after* the surface is constructed and therefore only has access to coordinates in 3-space, not the parametrization that was used to produce them.

This is still more useful than what currently exists (i.e., nothing!), but perhaps it can be integrated into the surface construction methods in a way that works for both implicit and parametrized surfaces.



---

archive/issue_comments_131576.json:
```json
{
    "body": "Changed commit from **[`a6e0d47`](https://github.com/sagemath/sagetrac-mirror/commit/a6e0d47d681d64a5d0c21cceb1a1f012fba29645)** to **[`b6ba287`](https://github.com/sagemath/sagetrac-mirror/commit/b6ba287bc4c7cac2fbbc4c274ac351dc7b6e37af)**",
    "created_at": "2014-08-02T19:22:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131576",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a6e0d47`](https://github.com/sagemath/sagetrac-mirror/commit/a6e0d47d681d64a5d0c21cceb1a1f012fba29645)** to **[`b6ba287`](https://github.com/sagemath/sagetrac-mirror/commit/b6ba287bc4c7cac2fbbc4c274ac351dc7b6e37af)**



---

archive/issue_comments_131577.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1cca14bff75615064dfcd83816703ff9ae3c17b8\"><code>1cca14b</code></a></td><td><code>Merge branch 'u/chapoton/12212' of ssh://trac.sagemath.org:22/sage into 12212</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b6ba287bc4c7cac2fbbc4c274ac351dc7b6e37af\"><code>b6ba287</code></a></td><td><code>trac #12212 introduce colored faces in IndexFaceSet + tachyon view</code></td></tr></table>\n",
    "created_at": "2014-08-02T19:22:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131577",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1cca14bff75615064dfcd83816703ff9ae3c17b8"><code>1cca14b</code></a></td><td><code>Merge branch 'u/chapoton/12212' of ssh://trac.sagemath.org:22/sage into 12212</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b6ba287bc4c7cac2fbbc4c274ac351dc7b6e37af"><code>b6ba287</code></a></td><td><code>trac #12212 introduce colored faces in IndexFaceSet + tachyon view</code></td></tr></table>




---

archive/issue_comments_131578.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nHello,\n\nI have worked hard, and managed to modify the class IndexFaceSet, so that it can handle colored faces (one face per color). One can now give one more parameter to IndexFaceSet, which is a texture list. This is only preliminary, as this new behaviour can only be viewed with tachyon, and from the texture only the color is used.\n\nIs there somebody familiar with jmol syntax and wanting to help ?",
    "created_at": "2014-08-02T19:27:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131578",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:17" align="right">comment:17</div>

Hello,

I have worked hard, and managed to modify the class IndexFaceSet, so that it can handle colored faces (one face per color). One can now give one more parameter to IndexFaceSet, which is a texture list. This is only preliminary, as this new behaviour can only be viewed with tachyon, and from the texture only the color is used.

Is there somebody familiar with jmol syntax and wanting to help ?



---

archive/issue_comments_131579.json:
```json
{
    "body": "Changed commit from **[`b6ba287`](https://github.com/sagemath/sagetrac-mirror/commit/b6ba287bc4c7cac2fbbc4c274ac351dc7b6e37af)** to **[`b663f13`](https://github.com/sagemath/sagetrac-mirror/commit/b663f1382e9274e77772534f63b2cace8e33f611)**",
    "created_at": "2014-08-03T12:17:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131579",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b6ba287`](https://github.com/sagemath/sagetrac-mirror/commit/b6ba287bc4c7cac2fbbc4c274ac351dc7b6e37af)** to **[`b663f13`](https://github.com/sagemath/sagetrac-mirror/commit/b663f1382e9274e77772534f63b2cace8e33f611)**



---

archive/issue_comments_131580.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b663f1382e9274e77772534f63b2cace8e33f611\"><code>b663f13</code></a></td><td><code>trac #12212 X3D output for colored IndexedFaceSet that seems to work</code></td></tr></table>\n",
    "created_at": "2014-08-03T12:17:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131580",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b663f1382e9274e77772534f63b2cace8e33f611"><code>b663f13</code></a></td><td><code>trac #12212 X3D output for colored IndexedFaceSet that seems to work</code></td></tr></table>




---

archive/issue_comments_131581.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/94239a4d70ad7fdac414cb15af7db746d77387a0\"><code>94239a4</code></a></td><td><code>trac #12212 more doc, and all tests pass</code></td></tr></table>\n",
    "created_at": "2014-08-03T14:52:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131581",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/94239a4d70ad7fdac414cb15af7db746d77387a0"><code>94239a4</code></a></td><td><code>trac #12212 more doc, and all tests pass</code></td></tr></table>




---

archive/issue_comments_131582.json:
```json
{
    "body": "Changed commit from **[`b663f13`](https://github.com/sagemath/sagetrac-mirror/commit/b663f1382e9274e77772534f63b2cace8e33f611)** to **[`94239a4`](https://github.com/sagemath/sagetrac-mirror/commit/94239a4d70ad7fdac414cb15af7db746d77387a0)**",
    "created_at": "2014-08-03T14:52:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131582",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b663f13`](https://github.com/sagemath/sagetrac-mirror/commit/b663f1382e9274e77772534f63b2cace8e33f611)** to **[`94239a4`](https://github.com/sagemath/sagetrac-mirror/commit/94239a4d70ad7fdac414cb15af7db746d77387a0)**



---

archive/issue_comments_131583.json:
```json
{
    "body": "Changed commit from **[`94239a4`](https://github.com/sagemath/sagetrac-mirror/commit/94239a4d70ad7fdac414cb15af7db746d77387a0)** to **[`edb4c5a`](https://github.com/sagemath/sagetrac-mirror/commit/edb4c5a4211e9920a95fe5e1e166a3e7a997e958)**",
    "created_at": "2014-08-03T18:46:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131583",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`94239a4`](https://github.com/sagemath/sagetrac-mirror/commit/94239a4d70ad7fdac414cb15af7db746d77387a0)** to **[`edb4c5a`](https://github.com/sagemath/sagetrac-mirror/commit/edb4c5a4211e9920a95fe5e1e166a3e7a997e958)**



---

archive/issue_comments_131584.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/edb4c5a4211e9920a95fe5e1e166a3e7a997e958\"><code>edb4c5a</code></a></td><td><code>trac #12212 incorporate coloring into parametric_surface</code></td></tr></table>\n",
    "created_at": "2014-08-03T18:46:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131584",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/edb4c5a4211e9920a95fe5e1e166a3e7a997e958"><code>edb4c5a</code></a></td><td><code>trac #12212 incorporate coloring into parametric_surface</code></td></tr></table>




---

archive/issue_comments_131585.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nAttachment: **[resultat2.png](https://github.com/sagemath/sage/files/ticket12212/resultat2.png)**\n\nI have introduced a new argument for a pair (coloring function, colormap) in parametric plot. This can produce that (in tachyon and x3d only for the moment):\n\n![](https://github.com/sagemath/sage/files/ticket12212/resultat2.png)",
    "created_at": "2014-08-03T18:49:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131585",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:21" align="right">comment:21</div>

Attachment: **[resultat2.png](https://github.com/sagemath/sage/files/ticket12212/resultat2.png)**

I have introduced a new argument for a pair (coloring function, colormap) in parametric plot. This can produce that (in tachyon and x3d only for the moment):

![](https://github.com/sagemath/sage/files/ticket12212/resultat2.png)



---

archive/issue_comments_131586.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nAfter reading the doc of jmol here\n\nhttp://chemapps.stolaf.edu/jmol/docs/#isosurfacesurfaceobject--surfacedata-derivedisosurfaces\n\nI am rather pessimistic about achieving to transmit colored surfaces to jmol. Currently, we send `pmesh` files to jmol. Using this format, there seems to be no way to give a color to every face (other than horrible splitting : one `pmesh` file for every color). \n\nOne other possibility would be to use `obj` files instead. But jmol is using the `obj` format in a strange (bad?) way : colors are coded in the **names** of the groups, instead of using the material `mtl` file. To do this, one would need to group faces according to their colors, which would take some work to code.\n\nThis same work would probably also be necessary just to make sure that the `obj` file output works correctly for colored surfaces.\n\nI have not yet understood if the `json` format allows to deal eeasily with colored surfaces.",
    "created_at": "2014-08-04T12:49:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131586",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:22" align="right">comment:22</div>

After reading the doc of jmol here

http://chemapps.stolaf.edu/jmol/docs/#isosurfacesurfaceobject--surfacedata-derivedisosurfaces

I am rather pessimistic about achieving to transmit colored surfaces to jmol. Currently, we send `pmesh` files to jmol. Using this format, there seems to be no way to give a color to every face (other than horrible splitting : one `pmesh` file for every color). 

One other possibility would be to use `obj` files instead. But jmol is using the `obj` format in a strange (bad?) way : colors are coded in the **names** of the groups, instead of using the material `mtl` file. To do this, one would need to group faces according to their colors, which would take some work to code.

This same work would probably also be necessary just to make sure that the `obj` file output works correctly for colored surfaces.

I have not yet understood if the `json` format allows to deal eeasily with colored surfaces.



---

archive/issue_comments_131587.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@fchapoton](#comment%3A21):\n> I have introduced a new argument for a pair (coloring function, colormap) in parametric plot. This can produce that (in tachyon and x3d only for the moment):\n> \n\n\nThis is fantastic!!  I'm excited to try it out :)\n\nI wouldn't worry too much about jmol -- I think that eventually Sage will transition to another interactive 3d viewer since java support is declining anyway.  For example, I believe sagemath cloud uses three.js.",
    "created_at": "2014-08-04T13:54:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131587",
    "user": "https://github.com/nilesjohnson"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@fchapoton](#comment%3A21):
> I have introduced a new argument for a pair (coloring function, colormap) in parametric plot. This can produce that (in tachyon and x3d only for the moment):
> 


This is fantastic!!  I'm excited to try it out :)

I wouldn't worry too much about jmol -- I think that eventually Sage will transition to another interactive 3d viewer since java support is declining anyway.  For example, I believe sagemath cloud uses three.js.



---

archive/issue_comments_131588.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nDoes jsmol support something different? (I assume not.)  As long as the documentation says you need one of the other things to see this, that is okay.",
    "created_at": "2014-08-05T00:29:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131588",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:24" align="right">comment:24</div>

Does jsmol support something different? (I assume not.)  As long as the documentation says you need one of the other things to see this, that is okay.



---

archive/issue_comments_131589.json:
```json
{
    "body": "<div id=\"comment:25\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9e53e2e88b370cf0edd784c1da73ce529173f362\"><code>9e53e2e</code></a></td><td><code>trac #12212 modified the json format to allow for colored faces</code></td></tr></table>\n",
    "created_at": "2014-08-05T19:46:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131589",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:25"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9e53e2e88b370cf0edd784c1da73ce529173f362"><code>9e53e2e</code></a></td><td><code>trac #12212 modified the json format to allow for colored faces</code></td></tr></table>




---

archive/issue_comments_131590.json:
```json
{
    "body": "Changed commit from **[`edb4c5a`](https://github.com/sagemath/sagetrac-mirror/commit/edb4c5a4211e9920a95fe5e1e166a3e7a997e958)** to **[`9e53e2e`](https://github.com/sagemath/sagetrac-mirror/commit/9e53e2e88b370cf0edd784c1da73ce529173f362)**",
    "created_at": "2014-08-05T19:46:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131590",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`edb4c5a`](https://github.com/sagemath/sagetrac-mirror/commit/edb4c5a4211e9920a95fe5e1e166a3e7a997e958)** to **[`9e53e2e`](https://github.com/sagemath/sagetrac-mirror/commit/9e53e2e88b370cf0edd784c1da73ce529173f362)**



---

archive/issue_comments_131591.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nHello,\n\nI have still not taken care of the jmol issue, which seems to be hard without changing jmol itself.\n\nI have changed the json output in IndexFaceSet, which is a private format used in the notebook for the viewer `'canvas3d'`. I have also proposed the corresponding changes on sagenb.",
    "created_at": "2014-08-05T19:50:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131591",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:26" align="right">comment:26</div>

Hello,

I have still not taken care of the jmol issue, which seems to be hard without changing jmol itself.

I have changed the json output in IndexFaceSet, which is a private format used in the notebook for the viewer `'canvas3d'`. I have also proposed the corresponding changes on sagenb.



---

archive/issue_comments_131592.json:
```json
{
    "body": "<div id=\"comment:28\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c06dcfae7dd9aa796eb833eb422024af19dbc7b6\"><code>c06dcfa</code></a></td><td><code>trac #12212 trying to use p3 .format ; little more doc</code></td></tr></table>\n",
    "created_at": "2014-08-06T07:36:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131592",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c06dcfae7dd9aa796eb833eb422024af19dbc7b6"><code>c06dcfa</code></a></td><td><code>trac #12212 trying to use p3 .format ; little more doc</code></td></tr></table>




---

archive/issue_comments_131593.json:
```json
{
    "body": "Changed commit from **[`9e53e2e`](https://github.com/sagemath/sagetrac-mirror/commit/9e53e2e88b370cf0edd784c1da73ce529173f362)** to **[`c06dcfa`](https://github.com/sagemath/sagetrac-mirror/commit/c06dcfae7dd9aa796eb833eb422024af19dbc7b6)**",
    "created_at": "2014-08-06T07:36:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131593",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9e53e2e`](https://github.com/sagemath/sagetrac-mirror/commit/9e53e2e88b370cf0edd784c1da73ce529173f362)** to **[`c06dcfa`](https://github.com/sagemath/sagetrac-mirror/commit/c06dcfae7dd9aa796eb833eb422024af19dbc7b6)**



---

archive/issue_comments_131594.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nYou're going to need some extra blank lines for this to format right.\n\n```\n         [[(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 0.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 1.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 2.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 3.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 4.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 5.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 6.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 7.0)]]\n         sage: S.show()\n-    Example of colored IndexFaceSet (:trac:`12212`)::\n+    A simple example of colored IndexFaceSet (:trac:`12212`)::\n         sage: from sage.plot.plot3d.index_face_set import IndexFaceSet\n         sage: from sage.plot.plot3d.texture import Texture\n```\n\nShould be \n\n```\n         [[(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 0.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 1.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 2.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 3.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 4.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 5.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 6.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 7.0)]]\n         sage: S.show()\n+\n-    Example of colored IndexFaceSet (:trac:`12212`)::\n+    A simple example of colored IndexFaceSet (:trac:`12212`)::\n+\n         sage: from sage.plot.plot3d.index_face_set import IndexFaceSet\n         sage: from sage.plot.plot3d.texture import Texture",
    "created_at": "2014-08-06T10:53:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131594",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:29" align="right">comment:29</div>

You're going to need some extra blank lines for this to format right.

```
         [[(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 0.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 1.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 2.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 3.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 4.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 5.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 6.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 7.0)]]
         sage: S.show()
-    Example of colored IndexFaceSet (:trac:`12212`)::
+    A simple example of colored IndexFaceSet (:trac:`12212`)::
         sage: from sage.plot.plot3d.index_face_set import IndexFaceSet
         sage: from sage.plot.plot3d.texture import Texture
```

Should be 

```
         [[(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 0.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 1.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 2.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 3.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 4.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 5.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 6.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 7.0)]]
         sage: S.show()
+
-    Example of colored IndexFaceSet (:trac:`12212`)::
+    A simple example of colored IndexFaceSet (:trac:`12212`)::
+
         sage: from sage.plot.plot3d.index_face_set import IndexFaceSet
         sage: from sage.plot.plot3d.texture import Texture



---

archive/issue_comments_131595.json:
```json
{
    "body": "Changed commit from **[`c06dcfa`](https://github.com/sagemath/sagetrac-mirror/commit/c06dcfae7dd9aa796eb833eb422024af19dbc7b6)** to **[`db88a1f`](https://github.com/sagemath/sagetrac-mirror/commit/db88a1fd27a1f72e1e10a4f0e02699671d78098b)**",
    "created_at": "2014-08-06T12:17:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131595",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c06dcfa`](https://github.com/sagemath/sagetrac-mirror/commit/c06dcfae7dd9aa796eb833eb422024af19dbc7b6)** to **[`db88a1f`](https://github.com/sagemath/sagetrac-mirror/commit/db88a1fd27a1f72e1e10a4f0e02699671d78098b)**



---

archive/issue_comments_131596.json:
```json
{
    "body": "<div id=\"comment:30\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/db88a1fd27a1f72e1e10a4f0e02699671d78098b\"><code>db88a1f</code></a></td><td><code>trac #12212 including index_face_set in the reference + more doc</code></td></tr></table>\n",
    "created_at": "2014-08-06T12:17:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131596",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:30"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/db88a1fd27a1f72e1e10a4f0e02699671d78098b"><code>db88a1f</code></a></td><td><code>trac #12212 including index_face_set in the reference + more doc</code></td></tr></table>




---

archive/issue_comments_131597.json:
```json
{
    "body": "Changed commit from **[`db88a1f`](https://github.com/sagemath/sagetrac-mirror/commit/db88a1fd27a1f72e1e10a4f0e02699671d78098b)** to **[`edc6370`](https://github.com/sagemath/sagetrac-mirror/commit/edc63704fb1f82ec1897ec299935b2589dfb2170)**",
    "created_at": "2014-08-06T12:20:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131597",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`db88a1f`](https://github.com/sagemath/sagetrac-mirror/commit/db88a1fd27a1f72e1e10a4f0e02699671d78098b)** to **[`edc6370`](https://github.com/sagemath/sagetrac-mirror/commit/edc63704fb1f82ec1897ec299935b2589dfb2170)**



---

archive/issue_comments_131598.json:
```json
{
    "body": "<div id=\"comment:31\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/edc63704fb1f82ec1897ec299935b2589dfb2170\"><code>edc6370</code></a></td><td><code>trac #12212 correct one failing doctest</code></td></tr></table>\n",
    "created_at": "2014-08-06T12:20:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131598",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:31"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/edc63704fb1f82ec1897ec299935b2589dfb2170"><code>edc6370</code></a></td><td><code>trac #12212 correct one failing doctest</code></td></tr></table>




---

archive/issue_comments_131599.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nThe `'canvas3d'` viewer (using `json` output with colors defined here and a patched `sagenb`) results look good, but there seems to be a little problem in the notebook. Here is one example\n\n```\nfrom sage.plot.plot3d.parametric_surface import ParametricSurface\ncm = colormaps.autumn\ndef c(x,y): return sin(x*y)**2\ndef g(x,y): return x, y, x**2 + y**2\nP1 = ParametricSurface(g, (srange(-10,10,0.1), srange(-5,5.0,0.1)),(c,cm))\n```\nWhen one defines several parametric surfaces, say P1 and P2. Try P1.show(viewer='canvas3d') inside one cell. Then change **this cell** to P2.show(viewer='canvas3d'). It will still show P1 and will never change, whatever you do to P1. No such problem inside a new cell. Seems to be some caching problem.",
    "created_at": "2014-08-07T08:53:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131599",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:32" align="right">comment:32</div>

The `'canvas3d'` viewer (using `json` output with colors defined here and a patched `sagenb`) results look good, but there seems to be a little problem in the notebook. Here is one example

```
from sage.plot.plot3d.parametric_surface import ParametricSurface
cm = colormaps.autumn
def c(x,y): return sin(x*y)**2
def g(x,y): return x, y, x**2 + y**2
P1 = ParametricSurface(g, (srange(-10,10,0.1), srange(-5,5.0,0.1)),(c,cm))
```
When one defines several parametric surfaces, say P1 and P2. Try P1.show(viewer='canvas3d') inside one cell. Then change **this cell** to P2.show(viewer='canvas3d'). It will still show P1 and will never change, whatever you do to P1. No such problem inside a new cell. Seems to be some caching problem.



---

archive/issue_comments_131600.json:
```json
{
    "body": "Changed author from **Joris Vankerschaver** to **Joris Vankerschaver, Frederic Chapoton**",
    "created_at": "2014-08-07T09:17:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131600",
    "user": "https://github.com/kcrisman"
}
```

Changed author from **Joris Vankerschaver** to **Joris Vankerschaver, Frederic Chapoton**



---

archive/issue_comments_131601.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nGood point, but from my testing this is completely independent of your changes, so shouldn't hold this up.  Probably it's because the notebook displays whatever files it finds, but in this case the previous one is likely not destroyed or perhaps it's numbered differently or something.  Can you open an issue there about this (assuming there isn't already one open here on Trac or there on github)?\n\nOh, and if I missed an accent in your name my apologies!",
    "created_at": "2014-08-07T09:17:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131601",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:33" align="right">comment:33</div>

Good point, but from my testing this is completely independent of your changes, so shouldn't hold this up.  Probably it's because the notebook displays whatever files it finds, but in this case the previous one is likely not destroyed or perhaps it's numbered differently or something.  Can you open an issue there about this (assuming there isn't already one open here on Trac or there on github)?

Oh, and if I missed an accent in your name my apologies!



---

archive/issue_comments_131602.json:
```json
{
    "body": "Changed commit from **[`edc6370`](https://github.com/sagemath/sagetrac-mirror/commit/edc63704fb1f82ec1897ec299935b2589dfb2170)** to **[`a7302cb`](https://github.com/sagemath/sagetrac-mirror/commit/a7302cbc80856a6a707ac4315e5e7b5bc451ecb1)**",
    "created_at": "2014-08-07T12:03:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131602",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`edc6370`](https://github.com/sagemath/sagetrac-mirror/commit/edc63704fb1f82ec1897ec299935b2589dfb2170)** to **[`a7302cb`](https://github.com/sagemath/sagetrac-mirror/commit/a7302cbc80856a6a707ac4315e5e7b5bc451ecb1)**



---

archive/issue_comments_131603.json:
```json
{
    "body": "<div id=\"comment:34\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a7302cbc80856a6a707ac4315e5e7b5bc451ecb1\"><code>a7302cb</code></a></td><td><code>trac #12212 polishing doc and correction to mobius band</code></td></tr></table>\n",
    "created_at": "2014-08-07T12:03:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131603",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:34"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a7302cbc80856a6a707ac4315e5e7b5bc451ecb1"><code>a7302cb</code></a></td><td><code>trac #12212 polishing doc and correction to mobius band</code></td></tr></table>




---

archive/issue_comments_131604.json:
```json
{
    "body": "Changed commit from **[`a7302cb`](https://github.com/sagemath/sagetrac-mirror/commit/a7302cbc80856a6a707ac4315e5e7b5bc451ecb1)** to **[`0af95c7`](https://github.com/sagemath/sagetrac-mirror/commit/0af95c7f0727a4e7f39391952fa58ce22fe01f9a)**",
    "created_at": "2014-08-07T18:38:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131604",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a7302cb`](https://github.com/sagemath/sagetrac-mirror/commit/a7302cbc80856a6a707ac4315e5e7b5bc451ecb1)** to **[`0af95c7`](https://github.com/sagemath/sagetrac-mirror/commit/0af95c7f0727a4e7f39391952fa58ce22fe01f9a)**



---

archive/issue_comments_131605.json:
```json
{
    "body": "<div id=\"comment:35\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0af95c7f0727a4e7f39391952fa58ce22fe01f9a\"><code>0af95c7</code></a></td><td><code>trac #12212 more doc, also in parametric_plot3d.py</code></td></tr></table>\n",
    "created_at": "2014-08-07T18:38:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131605",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:35"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0af95c7f0727a4e7f39391952fa58ce22fe01f9a"><code>0af95c7</code></a></td><td><code>trac #12212 more doc, also in parametric_plot3d.py</code></td></tr></table>




---

archive/issue_comments_131606.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\n> You're going to need some extra blank lines for this to format right.\n\nYour recent changes still don't fix this, as far as I can tell.  Try building the documentation.\n> \n> ```\n>          [[(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 0.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 1.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 2.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 3.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 4.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 5.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 6.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 7.0)]]\n>          sage: S.show()\n> -    Example of colored IndexFaceSet (:trac:`12212`)::\n> +    A simple example of colored IndexFaceSet (:trac:`12212`)::\n>          sage: from sage.plot.plot3d.index_face_set import IndexFaceSet\n>          sage: from sage.plot.plot3d.texture import Texture\n> ```\n> \n> Should be \n> \n> ```\n>          [[(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 0.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 1.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 2.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 3.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 4.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 5.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 6.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 7.0)]]\n>          sage: S.show()\n> +\n> -    Example of colored IndexFaceSet (:trac:`12212`)::\n> +    A simple example of colored IndexFaceSet (:trac:`12212`)::\n> +\n>          sage: from sage.plot.plot3d.index_face_set import IndexFaceSet\n>          sage: from sage.plot.plot3d.texture import Texture",
    "created_at": "2014-08-08T04:45:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131606",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:36" align="right">comment:36</div>

> You're going to need some extra blank lines for this to format right.

Your recent changes still don't fix this, as far as I can tell.  Try building the documentation.
> 
> ```
>          [[(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 0.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 1.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 2.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 3.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 4.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 5.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 6.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 7.0)]]
>          sage: S.show()
> -    Example of colored IndexFaceSet (:trac:`12212`)::
> +    A simple example of colored IndexFaceSet (:trac:`12212`)::
>          sage: from sage.plot.plot3d.index_face_set import IndexFaceSet
>          sage: from sage.plot.plot3d.texture import Texture
> ```
> 
> Should be 
> 
> ```
>          [[(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 0.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 1.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 2.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 3.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 4.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 5.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 6.0)], [(1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (0.0, 0.0, 7.0)]]
>          sage: S.show()
> +
> -    Example of colored IndexFaceSet (:trac:`12212`)::
> +    A simple example of colored IndexFaceSet (:trac:`12212`)::
> +
>          sage: from sage.plot.plot3d.index_face_set import IndexFaceSet
>          sage: from sage.plot.plot3d.texture import Texture



---

archive/issue_comments_131607.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nI have tried, and it builds. Please do look at the code and not only at the diffs. Or maybe just click on the green link for the branch.",
    "created_at": "2014-08-08T06:41:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131607",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:37" align="right">comment:37</div>

I have tried, and it builds. Please do look at the code and not only at the diffs. Or maybe just click on the green link for the branch.



---

archive/issue_comments_131608.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\n> I have tried, and it builds. Please do look at the code and not only at the diffs. Or maybe just click on the green link for the branch.\n\nThanks for this pointer; I find that on very large tickets it pays just to look at diffs so seeing the changes is easy.  Interestingly, now the diffs look correct as well - they definitely didn't before - so I am confused!  So I'm quite sorry for the noise.\n\nOn a related note, I would recommend adding something about Jmol not working with this in \"main\" documentation, like\n\n```\n+       One can use the keyword ``colordata`` to color the surface using a\n+       coloring function and a colormap::\n```\nor \n\n```\n+One can instead provide a coloring function and a color map::\n+\n```\nAlso, do you want to include src/sage/plot/texture_map.py in the reference manual like you've added index_face_set, or is that all internals better left out?  You (or the original author) spent a lot of time on it so I'm sure it's fine if you do.  (Or did I screw up again and it is actually there? I *think* I didn't miss it...)",
    "created_at": "2014-08-08T08:33:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131608",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:38" align="right">comment:38</div>

> I have tried, and it builds. Please do look at the code and not only at the diffs. Or maybe just click on the green link for the branch.

Thanks for this pointer; I find that on very large tickets it pays just to look at diffs so seeing the changes is easy.  Interestingly, now the diffs look correct as well - they definitely didn't before - so I am confused!  So I'm quite sorry for the noise.

On a related note, I would recommend adding something about Jmol not working with this in "main" documentation, like

```
+       One can use the keyword ``colordata`` to color the surface using a
+       coloring function and a colormap::
```
or 

```
+One can instead provide a coloring function and a color map::
+
```
Also, do you want to include src/sage/plot/texture_map.py in the reference manual like you've added index_face_set, or is that all internals better left out?  You (or the original author) spent a lot of time on it so I'm sure it's fine if you do.  (Or did I screw up again and it is actually there? I *think* I didn't miss it...)



---

archive/issue_comments_131609.json:
```json
{
    "body": "<div id=\"comment:39\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/10e1a7af46b4fca28339970c51688e0026e1ba47\"><code>10e1a7a</code></a></td><td><code>trac #12212 adding texture_map to the doc, plus relocating it in plot3d</code></td></tr></table>\n",
    "created_at": "2014-08-08T11:45:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131609",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:39"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/10e1a7af46b4fca28339970c51688e0026e1ba47"><code>10e1a7a</code></a></td><td><code>trac #12212 adding texture_map to the doc, plus relocating it in plot3d</code></td></tr></table>




---

archive/issue_comments_131610.json:
```json
{
    "body": "Changed commit from **[`0af95c7`](https://github.com/sagemath/sagetrac-mirror/commit/0af95c7f0727a4e7f39391952fa58ce22fe01f9a)** to **[`10e1a7a`](https://github.com/sagemath/sagetrac-mirror/commit/10e1a7af46b4fca28339970c51688e0026e1ba47)**",
    "created_at": "2014-08-08T11:45:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131610",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0af95c7`](https://github.com/sagemath/sagetrac-mirror/commit/0af95c7f0727a4e7f39391952fa58ce22fe01f9a)** to **[`10e1a7a`](https://github.com/sagemath/sagetrac-mirror/commit/10e1a7af46b4fca28339970c51688e0026e1ba47)**



---

archive/issue_comments_131611.json:
```json
{
    "body": "Changed author from **Joris Vankerschaver, Frederic Chapoton** to **Joris Vankerschaver, Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2014-08-08T11:47:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131611",
    "user": "https://github.com/fchapoton"
}
```

Changed author from **Joris Vankerschaver, Frederic Chapoton** to **Joris Vankerschaver, Frédéric Chapoton**



---

archive/issue_comments_131612.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nHello,\n\nI have polished the doc a little bit more, and included `texture_map` in the doc. In my opinion this is getting closer to the `needs_review` status. It is already quite a big \"patch\".",
    "created_at": "2014-08-08T11:47:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131612",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:40" align="right">comment:40</div>

Hello,

I have polished the doc a little bit more, and included `texture_map` in the doc. In my opinion this is getting closer to the `needs_review` status. It is already quite a big "patch".



---

archive/issue_comments_131613.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nTrue.  What would you say still needs review (e.g., which commits)?  Remember, you yourself can review jvkersch's contributions.",
    "created_at": "2014-08-08T13:06:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131613",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:41" align="right">comment:41</div>

True.  What would you say still needs review (e.g., which commits)?  Remember, you yourself can review jvkersch's contributions.



---

archive/issue_comments_131614.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nReplying to [@fchapoton](#comment%3A40):\n> Hello,\n> \n> I have polished the doc a little bit more, and included `texture_map` in the doc. In my opinion this is getting closer to the `needs_review` status. It is already quite a big \"patch\".\n\nThanks for all the work here -- I've been testing it too and I'm really impressed with the progress!  Here are some things that I think still need to be addressed:\n\n* I think there need to be some more doctests that verify the coloring of triangles is working.  At the moment, if some bug stopped colors from being applied to triangles, I think most of the doctests would still pass.  Maybe at least you could add tests in `IndexFaceSet` for `tachyon_repr`, `obj`, and `x3d_geometry` similar to the one for `json_repr`.\n\n* Was `IndexFaceSet.dual` broken before this patch?  Is there another ticket open for it?\n\n* The argument `texture_list` for `IndexFaceSet.__init__` displaces the argument `enclosed`, which technically means that the new behavior is not backwards-compatible.  I'm sorry to bring this up, because I think it's a really annoying detail, but I think Sage policy is that there should be a deprecation period in case someone somewhere is using `S = IndexFaceSet(face_list, point_list, False)`.  One thing would be to add a check `if type(texture_list) is bool:...\" which issues a deprecation warning and fixes the arguments.  Or, maybe better, put the texture argument after the enclosure one, and always use it as a keyword.\n\n* Since colormaps don't work with jmol, I think the demonstrations in parametric_plot3d and elsewhere should specifiy a viewer where they do work.  For example:\n\n```\nsage: u,v = var('u,v')\nsage: col = rainbow(10, 'rgbtuple')\nsage: def cf(u,v): return sin(u^2 + v^2)**2\nsage: parametric_plot3d((u, u+v, v), (u, -3,3), (v, -3, 3), colordata=(cf, colormaps.PiYG), viewer='tachyon')\n```\n\n* Why do this example and some others look so bad?  I think the first examples (the ones users are most likely to see) should be chosen to look really good.  If specifying a large number of plot points and marking #long or #optional is necessary, then I think that's better than fast but low-quality examples.  (Fast, low-quality examples are good for automatic testing, in parts of the documentation that new users are not likely to start with.)\n\n* The syntax for colormaps of plotted functions (e.g. with `plot3d`) and parametric surfaces should be the same if at all possible.  Since `plot3d` calls `parametric_plot3d`, they should use the same code for colormaps.  Also check `plot3d_adaptive` to see what it's doing.\n\n* In `parametric_plot3d`, wouldn't it be more consistent to use `color_data` for the argument name, rather than `colordata`?  I know `colormap` is an established argument name (coming from matplot lib, I think), but I think it's better to use Sage's convention if possible.\n\n* `ImplicitSurface` is derived from `IndexFaceSet`, so it should be reasonably straightforward to get colormaps for implicit plots working too.  Is there a good way to do it without just duplicating the code from `ParametricSurface`?  There seems to already be some duplicated code between them.  Maybe there needs to be some other kind of `PlotSurface` class that contains the common code?",
    "created_at": "2014-08-08T14:52:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131614",
    "user": "https://github.com/nilesjohnson"
}
```

<div id="comment:42" align="right">comment:42</div>

Replying to [@fchapoton](#comment%3A40):
> Hello,
> 
> I have polished the doc a little bit more, and included `texture_map` in the doc. In my opinion this is getting closer to the `needs_review` status. It is already quite a big "patch".

Thanks for all the work here -- I've been testing it too and I'm really impressed with the progress!  Here are some things that I think still need to be addressed:

* I think there need to be some more doctests that verify the coloring of triangles is working.  At the moment, if some bug stopped colors from being applied to triangles, I think most of the doctests would still pass.  Maybe at least you could add tests in `IndexFaceSet` for `tachyon_repr`, `obj`, and `x3d_geometry` similar to the one for `json_repr`.

* Was `IndexFaceSet.dual` broken before this patch?  Is there another ticket open for it?

* The argument `texture_list` for `IndexFaceSet.__init__` displaces the argument `enclosed`, which technically means that the new behavior is not backwards-compatible.  I'm sorry to bring this up, because I think it's a really annoying detail, but I think Sage policy is that there should be a deprecation period in case someone somewhere is using `S = IndexFaceSet(face_list, point_list, False)`.  One thing would be to add a check `if type(texture_list) is bool:..." which issues a deprecation warning and fixes the arguments.  Or, maybe better, put the texture argument after the enclosure one, and always use it as a keyword.

* Since colormaps don't work with jmol, I think the demonstrations in parametric_plot3d and elsewhere should specifiy a viewer where they do work.  For example:

```
sage: u,v = var('u,v')
sage: col = rainbow(10, 'rgbtuple')
sage: def cf(u,v): return sin(u^2 + v^2)**2
sage: parametric_plot3d((u, u+v, v), (u, -3,3), (v, -3, 3), colordata=(cf, colormaps.PiYG), viewer='tachyon')
```

* Why do this example and some others look so bad?  I think the first examples (the ones users are most likely to see) should be chosen to look really good.  If specifying a large number of plot points and marking #long or #optional is necessary, then I think that's better than fast but low-quality examples.  (Fast, low-quality examples are good for automatic testing, in parts of the documentation that new users are not likely to start with.)

* The syntax for colormaps of plotted functions (e.g. with `plot3d`) and parametric surfaces should be the same if at all possible.  Since `plot3d` calls `parametric_plot3d`, they should use the same code for colormaps.  Also check `plot3d_adaptive` to see what it's doing.

* In `parametric_plot3d`, wouldn't it be more consistent to use `color_data` for the argument name, rather than `colordata`?  I know `colormap` is an established argument name (coming from matplot lib, I think), but I think it's better to use Sage's convention if possible.

* `ImplicitSurface` is derived from `IndexFaceSet`, so it should be reasonably straightforward to get colormaps for implicit plots working too.  Is there a good way to do it without just duplicating the code from `ParametricSurface`?  There seems to already be some duplicated code between them.  Maybe there needs to be some other kind of `PlotSurface` class that contains the common code?



---

archive/issue_comments_131615.json:
```json
{
    "body": "Changed commit from **[`10e1a7a`](https://github.com/sagemath/sagetrac-mirror/commit/10e1a7af46b4fca28339970c51688e0026e1ba47)** to **[`eb4be95`](https://github.com/sagemath/sagetrac-mirror/commit/eb4be95baaf9dc4baa3587cc2f9a4f6a8b8cdd02)**",
    "created_at": "2014-08-08T18:46:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131615",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`10e1a7a`](https://github.com/sagemath/sagetrac-mirror/commit/10e1a7af46b4fca28339970c51688e0026e1ba47)** to **[`eb4be95`](https://github.com/sagemath/sagetrac-mirror/commit/eb4be95baaf9dc4baa3587cc2f9a4f6a8b8cdd02)**



---

archive/issue_comments_131616.json:
```json
{
    "body": "<div id=\"comment:43\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/17bed300a32abcc5b1b6048649487fa974dd9da2\"><code>17bed30</code></a></td><td><code>trac #12212 improved examples, more doc (after reviewers comments)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eb4be95baaf9dc4baa3587cc2f9a4f6a8b8cdd02\"><code>eb4be95</code></a></td><td><code>trac #12212 better use of colormaps in texture_map</code></td></tr></table>\n",
    "created_at": "2014-08-08T18:46:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131616",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:43"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/17bed300a32abcc5b1b6048649487fa974dd9da2"><code>17bed30</code></a></td><td><code>trac #12212 improved examples, more doc (after reviewers comments)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eb4be95baaf9dc4baa3587cc2f9a4f6a8b8cdd02"><code>eb4be95</code></a></td><td><code>trac #12212 better use of colormaps in texture_map</code></td></tr></table>




---

archive/issue_comments_131617.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nThanks for your comments. I have adressed some of them\n\n> * I think there need to be some more doctests that verify the coloring of triangles is working.  At the moment, if some bug stopped colors from being applied to triangles, I think most of the doctests would still pass.  Maybe at least you could add tests in `IndexFaceSet` for `tachyon_repr`, `obj`, and `x3d_geometry` similar to the one for `json_repr`.\n\nI have added a few doctests in index_face_set\n\n> * Was `IndexFaceSet.dual` broken before this patch?  Is there another ticket open for it?\n\nIt is not really broken, just a bit fragile. I put a working doctest.\n \n> * The argument `texture_list` for `IndexFaceSet.__init__` displaces the argument `enclosed`, which technically means that the new behavior is not backwards-compatible.  I'm sorry to bring this up, because I think it's a really annoying detail, but I think Sage policy is that there should be a deprecation period in case someone somewhere is using `S = IndexFaceSet(face_list, point_list, False)`.  One thing would be to add a check `if type(texture_list) is bool:...\" which issues a deprecation warning and fixes the arguments.  Or, maybe better, put the texture argument after the enclosure one, and always use it as a keyword.\n\nI have changed the order to keep \"enclosed\" before \"texture_list\"\n \n> * Since colormaps don't work with jmol, I think the demonstrations in parametric_plot3d and elsewhere should specifiy a viewer where they do work.  For example:\n> \n> ```\n> sage: u,v = var('u,v')\n> sage: col = rainbow(10, 'rgbtuple')\n> sage: def cf(u,v): return sin(u^2 + v^2)**2\n> sage: parametric_plot3d((u, u+v, v), (u, -3,3), (v, -3, 3), colordata=(cf, colormaps.PiYG), viewer='tachyon')\n> ```\n\nI have added lines with `P.show(viewer='tachyon')` where appropriate\n \n> * Why do this example and some others look so bad?  I think the first examples (the ones users are most likely to see) should be chosen to look really good.  If specifying a large number of plot points and marking #long or #optional is necessary, then I think that's better than fast but low-quality examples.  (Fast, low-quality examples are good for automatic testing, in parts of the documentation that new users are not likely to start with.)\n\nI have tried to enhance the quality of examples\n \n> * The syntax for colormaps of plotted functions (e.g. with `plot3d`) and parametric surfaces should be the same if at all possible.  Since `plot3d` calls `parametric_plot3d`, they should use the same code for colormaps.  Also check `plot3d_adaptive` to see what it's doing.\n\nThis is a difficult point. Achieving coeherence would be great, but I do not think that I am able to do that. For another ticket ?\n\n> * In `parametric_plot3d`, wouldn't it be more consistent to use `color_data` for the argument name, rather than `colordata`?  I know `colormap` is an established argument name (coming from matplot lib, I think), but I think it's better to use Sage's convention if possible.\n\nI have switched to color_data\n \n> * `ImplicitSurface` is derived from `IndexFaceSet`, so it should be reasonably straightforward to get colormaps for implicit plots working too.  Is there a good way to do it without just duplicating the code from `ParametricSurface`?  There seems to already be some duplicated code between them.  Maybe there needs to be some other kind of `PlotSurface` class that contains the common code?\n\nThis is not as straightforward as it may look. It would be great to do that, but the code for implicit plot is very sophisticated, and it is not easy to see where to put the color assignment of faces.\n\nPLUS:\n\nI have reformatted texture_map so that the use of colormaps is simpler.",
    "created_at": "2014-08-08T18:53:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131617",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:44" align="right">comment:44</div>

Thanks for your comments. I have adressed some of them

> * I think there need to be some more doctests that verify the coloring of triangles is working.  At the moment, if some bug stopped colors from being applied to triangles, I think most of the doctests would still pass.  Maybe at least you could add tests in `IndexFaceSet` for `tachyon_repr`, `obj`, and `x3d_geometry` similar to the one for `json_repr`.

I have added a few doctests in index_face_set

> * Was `IndexFaceSet.dual` broken before this patch?  Is there another ticket open for it?

It is not really broken, just a bit fragile. I put a working doctest.
 
> * The argument `texture_list` for `IndexFaceSet.__init__` displaces the argument `enclosed`, which technically means that the new behavior is not backwards-compatible.  I'm sorry to bring this up, because I think it's a really annoying detail, but I think Sage policy is that there should be a deprecation period in case someone somewhere is using `S = IndexFaceSet(face_list, point_list, False)`.  One thing would be to add a check `if type(texture_list) is bool:..." which issues a deprecation warning and fixes the arguments.  Or, maybe better, put the texture argument after the enclosure one, and always use it as a keyword.

I have changed the order to keep "enclosed" before "texture_list"
 
> * Since colormaps don't work with jmol, I think the demonstrations in parametric_plot3d and elsewhere should specifiy a viewer where they do work.  For example:
> 
> ```
> sage: u,v = var('u,v')
> sage: col = rainbow(10, 'rgbtuple')
> sage: def cf(u,v): return sin(u^2 + v^2)**2
> sage: parametric_plot3d((u, u+v, v), (u, -3,3), (v, -3, 3), colordata=(cf, colormaps.PiYG), viewer='tachyon')
> ```

I have added lines with `P.show(viewer='tachyon')` where appropriate
 
> * Why do this example and some others look so bad?  I think the first examples (the ones users are most likely to see) should be chosen to look really good.  If specifying a large number of plot points and marking #long or #optional is necessary, then I think that's better than fast but low-quality examples.  (Fast, low-quality examples are good for automatic testing, in parts of the documentation that new users are not likely to start with.)

I have tried to enhance the quality of examples
 
> * The syntax for colormaps of plotted functions (e.g. with `plot3d`) and parametric surfaces should be the same if at all possible.  Since `plot3d` calls `parametric_plot3d`, they should use the same code for colormaps.  Also check `plot3d_adaptive` to see what it's doing.

This is a difficult point. Achieving coeherence would be great, but I do not think that I am able to do that. For another ticket ?

> * In `parametric_plot3d`, wouldn't it be more consistent to use `color_data` for the argument name, rather than `colordata`?  I know `colormap` is an established argument name (coming from matplot lib, I think), but I think it's better to use Sage's convention if possible.

I have switched to color_data
 
> * `ImplicitSurface` is derived from `IndexFaceSet`, so it should be reasonably straightforward to get colormaps for implicit plots working too.  Is there a good way to do it without just duplicating the code from `ParametricSurface`?  There seems to already be some duplicated code between them.  Maybe there needs to be some other kind of `PlotSurface` class that contains the common code?

This is not as straightforward as it may look. It would be great to do that, but the code for implicit plot is very sophisticated, and it is not easy to see where to put the color assignment of faces.

PLUS:

I have reformatted texture_map so that the use of colormaps is simpler.



---

archive/issue_comments_131618.json:
```json
{
    "body": "Changed commit from **[`eb4be95`](https://github.com/sagemath/sagetrac-mirror/commit/eb4be95baaf9dc4baa3587cc2f9a4f6a8b8cdd02)** to **[`c01c2bc`](https://github.com/sagemath/sagetrac-mirror/commit/c01c2bc6575aa6324233dd0a84949cdc9f6e0188)**",
    "created_at": "2014-08-09T11:56:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131618",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`eb4be95`](https://github.com/sagemath/sagetrac-mirror/commit/eb4be95baaf9dc4baa3587cc2f9a4f6a8b8cdd02)** to **[`c01c2bc`](https://github.com/sagemath/sagetrac-mirror/commit/c01c2bc6575aa6324233dd0a84949cdc9f6e0188)**



---

archive/issue_comments_131619.json:
```json
{
    "body": "<div id=\"comment:45\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c01c2bc6575aa6324233dd0a84949cdc9f6e0188\"><code>c01c2bc</code></a></td><td><code>trac #12212 now color_data works also for implicit plots</code></td></tr></table>\n",
    "created_at": "2014-08-09T11:56:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131619",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:45"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c01c2bc6575aa6324233dd0a84949cdc9f6e0188"><code>c01c2bc</code></a></td><td><code>trac #12212 now color_data works also for implicit plots</code></td></tr></table>




---

archive/issue_comments_131620.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nI have managed (it was a bit painful) to make it work also for implicit surfaces. It needs to be doctested, but it works pretty well.",
    "created_at": "2014-08-09T11:58:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131620",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:46" align="right">comment:46</div>

I have managed (it was a bit painful) to make it work also for implicit surfaces. It needs to be doctested, but it works pretty well.



---

archive/issue_comments_131621.json:
```json
{
    "body": "Changed commit from **[`c01c2bc`](https://github.com/sagemath/sagetrac-mirror/commit/c01c2bc6575aa6324233dd0a84949cdc9f6e0188)** to **[`2b3b80c`](https://github.com/sagemath/sagetrac-mirror/commit/2b3b80cc17528bcdd60d6ee1344de808604ac437)**",
    "created_at": "2014-08-09T20:03:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131621",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c01c2bc`](https://github.com/sagemath/sagetrac-mirror/commit/c01c2bc6575aa6324233dd0a84949cdc9f6e0188)** to **[`2b3b80c`](https://github.com/sagemath/sagetrac-mirror/commit/2b3b80cc17528bcdd60d6ee1344de808604ac437)**



---

archive/issue_comments_131622.json:
```json
{
    "body": "<div id=\"comment:47\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/110abe600f1f0c306764db1b4aeda5299a009086\"><code>110abe6</code></a></td><td><code>Merge branch 'u/chapoton/12212' of ssh://trac.sagemath.org:22/sage into 12212</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2b3b80cc17528bcdd60d6ee1344de808604ac437\"><code>2b3b80c</code></a></td><td><code>trac #12212 preparing the ground for color in jmol</code></td></tr></table>\n",
    "created_at": "2014-08-09T20:03:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131622",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:47"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/110abe600f1f0c306764db1b4aeda5299a009086"><code>110abe6</code></a></td><td><code>Merge branch 'u/chapoton/12212' of ssh://trac.sagemath.org:22/sage into 12212</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2b3b80cc17528bcdd60d6ee1344de808604ac437"><code>2b3b80c</code></a></td><td><code>trac #12212 preparing the ground for color in jmol</code></td></tr></table>




---

archive/issue_comments_131623.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nI have contacted the Jmol team to know if they could write code to import some colored pmesh file. They have reacted positively. To be continued.",
    "created_at": "2014-08-09T20:05:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131623",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:48" align="right">comment:48</div>

I have contacted the Jmol team to know if they could write code to import some colored pmesh file. They have reacted positively. To be continued.



---

archive/issue_comments_131624.json:
```json
{
    "body": "Changed commit from **[`2b3b80c`](https://github.com/sagemath/sagetrac-mirror/commit/2b3b80cc17528bcdd60d6ee1344de808604ac437)** to **[`fc1f730`](https://github.com/sagemath/sagetrac-mirror/commit/fc1f730aa242792cd3748fb64a90692a56a4a6d9)**",
    "created_at": "2014-08-10T08:29:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131624",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2b3b80c`](https://github.com/sagemath/sagetrac-mirror/commit/2b3b80cc17528bcdd60d6ee1344de808604ac437)** to **[`fc1f730`](https://github.com/sagemath/sagetrac-mirror/commit/fc1f730aa242792cd3748fb64a90692a56a4a6d9)**



---

archive/issue_comments_131625.json:
```json
{
    "body": "<div id=\"comment:49\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fc1f730aa242792cd3748fb64a90692a56a4a6d9\"><code>fc1f730</code></a></td><td><code>trac #12212 final preparation for Jmol, plus cross links in doc</code></td></tr></table>\n",
    "created_at": "2014-08-10T08:29:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131625",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:49"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fc1f730aa242792cd3748fb64a90692a56a4a6d9"><code>fc1f730</code></a></td><td><code>trac #12212 final preparation for Jmol, plus cross links in doc</code></td></tr></table>




---

archive/issue_comments_131626.json:
```json
{
    "body": "Changed commit from **[`fc1f730`](https://github.com/sagemath/sagetrac-mirror/commit/fc1f730aa242792cd3748fb64a90692a56a4a6d9)** to **[`1f7fc20`](https://github.com/sagemath/sagetrac-mirror/commit/1f7fc206043fb1ba781b6355cff553276821edeb)**",
    "created_at": "2014-08-10T12:16:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131626",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fc1f730`](https://github.com/sagemath/sagetrac-mirror/commit/fc1f730aa242792cd3748fb64a90692a56a4a6d9)** to **[`1f7fc20`](https://github.com/sagemath/sagetrac-mirror/commit/1f7fc206043fb1ba781b6355cff553276821edeb)**



---

archive/issue_comments_131627.json:
```json
{
    "body": "<div id=\"comment:50\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1f7fc206043fb1ba781b6355cff553276821edeb\"><code>1f7fc20</code></a></td><td><code>trac #12212 trying to enhance doctest coverage</code></td></tr></table>\n",
    "created_at": "2014-08-10T12:16:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131627",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:50"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1f7fc206043fb1ba781b6355cff553276821edeb"><code>1f7fc20</code></a></td><td><code>trac #12212 trying to enhance doctest coverage</code></td></tr></table>




---

archive/issue_comments_131628.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nAttachment: **[nice_shell.png](https://github.com/sagemath/sage/files/ticket12212/nice_shell.png)**\n\nHere is what Jmol will be able to get from sage :\n![](https://github.com/sagemath/sage/files/ticket12212/nice_shell.png)",
    "created_at": "2014-08-10T15:39:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131628",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:51" align="right">comment:51</div>

Attachment: **[nice_shell.png](https://github.com/sagemath/sage/files/ticket12212/nice_shell.png)**

Here is what Jmol will be able to get from sage :
![](https://github.com/sagemath/sage/files/ticket12212/nice_shell.png)



---

archive/issue_events_164366.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12212#event-164366"
}
```



---

archive/issue_events_164367.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12212#event-164367"
}
```



---

archive/issue_comments_131629.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\n> I have contacted the Jmol team to know if they could write code to import some colored pmesh file. They have reacted positively. To be continued.\n\nCan you post a link to that discussion, if it is on a world-readable list?  Just in case it is, if you contacted privately of course there is no need to do so.",
    "created_at": "2014-08-11T03:05:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131629",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:53" align="right">comment:53</div>

> I have contacted the Jmol team to know if they could write code to import some colored pmesh file. They have reacted positively. To be continued.

Can you post a link to that discussion, if it is on a world-readable list?  Just in case it is, if you contacted privately of course there is no need to do so.



---

archive/issue_comments_131630.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nThis was a private mail exchange. The conclusion by Bob Hanson is\n\nLater this week it will appear in Jmol 14.2.5.\n\nSo it would be great to have #16003 and #16004 use this Jmol version.",
    "created_at": "2014-08-11T07:03:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131630",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:54" align="right">comment:54</div>

This was a private mail exchange. The conclusion by Bob Hanson is

Later this week it will appear in Jmol 14.2.5.

So it would be great to have #16003 and #16004 use this Jmol version.



---

archive/issue_comments_131631.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nWow, that is awesome!  I assume jsmol would use this as well...  Are you able to review those changes to at least some extent as well?  Jonathan does a very thorough job with them but they do still need review, and I always seem to have trouble really setting things up right - also review using Linux and its browsers would be helpful, as I only have Mac access.  Now that we are in the 6.4 cycle this is a perfect time.",
    "created_at": "2014-08-11T08:53:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131631",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:55" align="right">comment:55</div>

Wow, that is awesome!  I assume jsmol would use this as well...  Are you able to review those changes to at least some extent as well?  Jonathan does a very thorough job with them but they do still need review, and I always seem to have trouble really setting things up right - also review using Linux and its browsers would be helpful, as I only have Mac access.  Now that we are in the 6.4 cycle this is a perfect time.



---

archive/issue_comments_131632.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nReplying to [@fchapoton](#comment%3A46):\n> I have managed (it was a bit painful) to make it work also for implicit surfaces. It needs to be doctested, but it works pretty well.\n\nGreat!!  I think there is some codesmell here though, both in duplicated code and in the inconsistent interface.  Constant color is a special case of color maps, so there shouldn't be a need to treat the two cases separately -- in other words, the `global_texture` flag should be unnecessary.  In any kind of plot, one can give the `color` argument as a string, a tuple, a `Color` object, or perhaps other things -- it makes more sense that one should also be able to give the colormap data to that argument.  The type of colormap should be determined there (in the `Texture` class, or some other unified place) and then handed as a `Texture` subclass to `IndexFaceSet`.",
    "created_at": "2014-08-11T13:43:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131632",
    "user": "https://github.com/nilesjohnson"
}
```

<div id="comment:56" align="right">comment:56</div>

Replying to [@fchapoton](#comment%3A46):
> I have managed (it was a bit painful) to make it work also for implicit surfaces. It needs to be doctested, but it works pretty well.

Great!!  I think there is some codesmell here though, both in duplicated code and in the inconsistent interface.  Constant color is a special case of color maps, so there shouldn't be a need to treat the two cases separately -- in other words, the `global_texture` flag should be unnecessary.  In any kind of plot, one can give the `color` argument as a string, a tuple, a `Color` object, or perhaps other things -- it makes more sense that one should also be able to give the colormap data to that argument.  The type of colormap should be determined there (in the `Texture` class, or some other unified place) and then handed as a `Texture` subclass to `IndexFaceSet`.



---

archive/issue_comments_131633.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\n> > I have managed (it was a bit painful) to make it work also for implicit surfaces. It needs to be doctested, but it works pretty well.\n\n> \n> Great!!  I think there is some codesmell here though, both in duplicated code and in the inconsistent interface.  Constant color is a special case of color maps, so there shouldn't be a need to treat the two cases separately -- in other words, the `global_texture` flag should be unnecessary.  In any kind of plot, one can give the `color` argument as a string, a tuple, a `Color` object, or perhaps other things -- it makes more sense that one should also be able to give the colormap data to that argument.  The type of colormap should be determined there (in the `Texture` class, or some other unified place) and then handed as a `Texture` subclass to `IndexFaceSet`.\n\nNiles, is this easy for you to implement?  I don't want to have this held up unduly, though you are right that the interface should be consistent for colors.\n\nLet me see what I see as the status here:\n* Needs chapoton to verify what he has already positively reviewed.  (That is presumably everything he didn't write.)\n* Niles can mention if this is the only thing he is worried about, or whether other changes still need review (or doctests needed), etc.\n* I'm surprised that something like `float_to_integer` doesn't already exist, I recall we used some very similar hacks before.  Huh.\n* Leave jmol incorporation to another ticket, now that I see the commits that \"set up\" jmol don't actually require it - this will allow us to get this in without",
    "created_at": "2014-08-20T19:09:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131633",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:57" align="right">comment:57</div>

> > I have managed (it was a bit painful) to make it work also for implicit surfaces. It needs to be doctested, but it works pretty well.

> 
> Great!!  I think there is some codesmell here though, both in duplicated code and in the inconsistent interface.  Constant color is a special case of color maps, so there shouldn't be a need to treat the two cases separately -- in other words, the `global_texture` flag should be unnecessary.  In any kind of plot, one can give the `color` argument as a string, a tuple, a `Color` object, or perhaps other things -- it makes more sense that one should also be able to give the colormap data to that argument.  The type of colormap should be determined there (in the `Texture` class, or some other unified place) and then handed as a `Texture` subclass to `IndexFaceSet`.

Niles, is this easy for you to implement?  I don't want to have this held up unduly, though you are right that the interface should be consistent for colors.

Let me see what I see as the status here:
* Needs chapoton to verify what he has already positively reviewed.  (That is presumably everything he didn't write.)
* Niles can mention if this is the only thing he is worried about, or whether other changes still need review (or doctests needed), etc.
* I'm surprised that something like `float_to_integer` doesn't already exist, I recall we used some very similar hacks before.  Huh.
* Leave jmol incorporation to another ticket, now that I see the commits that "set up" jmol don't actually require it - this will allow us to get this in without



---

archive/issue_comments_131634.json:
```json
{
    "body": "Reviewer: **Fr\u00e9d\u00e9ric Chapoton, Niles Johnson**",
    "created_at": "2014-08-20T19:09:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131634",
    "user": "https://github.com/kcrisman"
}
```

Reviewer: **Frédéric Chapoton, Niles Johnson**



---

archive/issue_comments_131635.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nReplying to [@kcrisman](#comment%3A57):\n> > I think there is some codesmell here though, both in duplicated code and in the inconsistent interface.  \n\n> > The type of colormap should be determined there (in the `Texture` class, or some other unified place) and then handed as a `Texture` subclass to `IndexFaceSet`.\n\n\n> Niles, is this easy for you to implement?  I don't want to have this held up unduly, though you are right that the interface should be consistent for colors.\n\nUnfortunately, no, I don't think this will be easy.  This ticket has been open for 3 years, and there's been an **amazing** amount of progress in the last month, but I think we need to be patient and make sure that when we establish new functionality we do so in a way that is carefully-considered and well-polished.  Otherwise we'll be stuck maintaining a difficult system.  (Remember that standard deprecation time is one year, so a non-backwards-compatible improvement to the interface would be slow-going.)",
    "created_at": "2014-08-20T19:32:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131635",
    "user": "https://github.com/nilesjohnson"
}
```

<div id="comment:58" align="right">comment:58</div>

Replying to [@kcrisman](#comment%3A57):
> > I think there is some codesmell here though, both in duplicated code and in the inconsistent interface.  

> > The type of colormap should be determined there (in the `Texture` class, or some other unified place) and then handed as a `Texture` subclass to `IndexFaceSet`.


> Niles, is this easy for you to implement?  I don't want to have this held up unduly, though you are right that the interface should be consistent for colors.

Unfortunately, no, I don't think this will be easy.  This ticket has been open for 3 years, and there's been an **amazing** amount of progress in the last month, but I think we need to be patient and make sure that when we establish new functionality we do so in a way that is carefully-considered and well-polished.  Otherwise we'll be stuck maintaining a difficult system.  (Remember that standard deprecation time is one year, so a non-backwards-compatible improvement to the interface would be slow-going.)



---

archive/issue_comments_131636.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nThanks, Niles.  I didn't realize there was anything backwards-incompatible here, just additional keywords, but I take your point.\n\nUnrelated and very minor note: in parametric_plot3d.py there is a superfluous variable declaration\n\n```\n+           sage: u,v = var('u,v')\n```\nwhich should be removed.",
    "created_at": "2014-08-20T19:36:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131636",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:59" align="right">comment:59</div>

Thanks, Niles.  I didn't realize there was anything backwards-incompatible here, just additional keywords, but I take your point.

Unrelated and very minor note: in parametric_plot3d.py there is a superfluous variable declaration

```
+           sage: u,v = var('u,v')
```
which should be removed.



---

archive/issue_comments_131637.json:
```json
{
    "body": "Changed commit from **[`1f7fc20`](https://github.com/sagemath/sagetrac-mirror/commit/1f7fc206043fb1ba781b6355cff553276821edeb)** to **[`0ae10f5`](https://github.com/sagemath/sagetrac-mirror/commit/0ae10f534826c0addaf4d957bf7c0586ba0a88c4)**",
    "created_at": "2014-08-20T20:08:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131637",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1f7fc20`](https://github.com/sagemath/sagetrac-mirror/commit/1f7fc206043fb1ba781b6355cff553276821edeb)** to **[`0ae10f5`](https://github.com/sagemath/sagetrac-mirror/commit/0ae10f534826c0addaf4d957bf7c0586ba0a88c4)**



---

archive/issue_comments_131638.json:
```json
{
    "body": "<div id=\"comment:60\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/92d9e5bfffc7a8dc757abcc74779f0cd238bb3a9\"><code>92d9e5b</code></a></td><td><code>Merge branch 'u/chapoton/12212' of ssh://trac.sagemath.org:22/sage into 12212</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0ae10f534826c0addaf4d957bf7c0586ba0a88c4\"><code>0ae10f5</code></a></td><td><code>trac #12212 keeping the color keyword in json method</code></td></tr></table>\n",
    "created_at": "2014-08-20T20:08:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131638",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:60"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/92d9e5bfffc7a8dc757abcc74779f0cd238bb3a9"><code>92d9e5b</code></a></td><td><code>Merge branch 'u/chapoton/12212' of ssh://trac.sagemath.org:22/sage into 12212</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0ae10f534826c0addaf4d957bf7c0586ba0a88c4"><code>0ae10f5</code></a></td><td><code>trac #12212 keeping the color keyword in json method</code></td></tr></table>




---

archive/issue_comments_131639.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\n> Thanks, Niles.  I didn't realize there was anything backwards-incompatible here, just additional keywords, but I take your point.\n> \n\nNiles, was the color keyword in json what you were referring to, or something else?",
    "created_at": "2014-08-20T20:10:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131639",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:61" align="right">comment:61</div>

> Thanks, Niles.  I didn't realize there was anything backwards-incompatible here, just additional keywords, but I take your point.
> 

Niles, was the color keyword in json what you were referring to, or something else?



---

archive/issue_comments_131640.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nPlease note that the last change I made is not about a keyword in the python method json, but a change about a key in the dict that is passed to canvas3D.\n\nI understand that the interface needs to be polished. Nevertheless I am starting to get tired of that stuff, and I will get busy with lots of others things in the next months. So if you feel like improving things, please proceed.\n\nBy the way, there still remains the issue of what happens in sagemath cloud. I have just asked a question on sage-devel about that.",
    "created_at": "2014-08-20T20:53:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131640",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:62" align="right">comment:62</div>

Please note that the last change I made is not about a keyword in the python method json, but a change about a key in the dict that is passed to canvas3D.

I understand that the interface needs to be polished. Nevertheless I am starting to get tired of that stuff, and I will get busy with lots of others things in the next months. So if you feel like improving things, please proceed.

By the way, there still remains the issue of what happens in sagemath cloud. I have just asked a question on sage-devel about that.



---

archive/issue_comments_131641.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\n> Unrelated and very minor note: in parametric_plot3d.py there is a superfluous variable declaration\n> \n> ```\n> +           sage: u,v = var('u,v')\n> ```\n> which should be removed.\n\nAnd this comment of mine is apparently wrong too!  Huh.",
    "created_at": "2014-08-21T16:51:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131641",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:63" align="right">comment:63</div>

> Unrelated and very minor note: in parametric_plot3d.py there is a superfluous variable declaration
> 
> ```
> +           sage: u,v = var('u,v')
> ```
> which should be removed.

And this comment of mine is apparently wrong too!  Huh.



---

archive/issue_comments_131642.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nReplying to [@kcrisman](#comment%3A59):\n> Thanks, Niles.  I didn't realize there was anything backwards-incompatible here, just additional keywords, \n\nI think I was unclear -- sorry.  As I understand it, the code here isn't backward incompatible.  What I meant is that the uniform interface I envision probably isn't compatible with the current interface.  So the idea to release now, fix later (which I generally support!) would mean that we can't \"fix\" until after a year of deprecation.  \n\nAnd I think this is about more than interface -- I think the code may have to be reorganized, with some methods moved to different classes, and there would need to be deprecation for that as well.  \n\nI'm really frustrated about this too -- I'd hate to see this rot for another 3 years -- but I just can't convince myself it's good to release this as is.  Do you disagree?",
    "created_at": "2014-08-21T17:07:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131642",
    "user": "https://github.com/nilesjohnson"
}
```

<div id="comment:64" align="right">comment:64</div>

Replying to [@kcrisman](#comment%3A59):
> Thanks, Niles.  I didn't realize there was anything backwards-incompatible here, just additional keywords, 

I think I was unclear -- sorry.  As I understand it, the code here isn't backward incompatible.  What I meant is that the uniform interface I envision probably isn't compatible with the current interface.  So the idea to release now, fix later (which I generally support!) would mean that we can't "fix" until after a year of deprecation.  

And I think this is about more than interface -- I think the code may have to be reorganized, with some methods moved to different classes, and there would need to be deprecation for that as well.  

I'm really frustrated about this too -- I'd hate to see this rot for another 3 years -- but I just can't convince myself it's good to release this as is.  Do you disagree?



---

archive/issue_comments_131643.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\n> I think I was unclear -- sorry.  As I understand it, the code here isn't backward incompatible.  What I meant is that the uniform interface I envision probably isn't compatible with the current interface.  So the idea to release now, fix later (which I generally support!) would mean that we can't \"fix\" until after a year of deprecation.  \n> \n> And I think this is about more than interface -- I think the code may have to be reorganized, with some methods moved to different classes, and there would need to be deprecation for that as well.  \n> \n> I'm really frustrated about this too -- I'd hate to see this rot for another 3 years -- but I just can't convince myself it's good to release this as is.  Do you disagree?\n\nI guess I'm not clear about what would need to be deprecated.  Remember, it's only user-visible things that would need this.  If it's backend stuff... Maybe I just need more explicit detail about what your proposed reorganization would imply for the user interface.   texture_map.py seems okay, it's perhaps mainly the `colordata` tuple you are concerned with?  I haven't thought very deeply at all about this, I know your experience with Tachyon has given you a lot of chances to do so.",
    "created_at": "2014-08-21T17:13:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131643",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:65" align="right">comment:65</div>

> I think I was unclear -- sorry.  As I understand it, the code here isn't backward incompatible.  What I meant is that the uniform interface I envision probably isn't compatible with the current interface.  So the idea to release now, fix later (which I generally support!) would mean that we can't "fix" until after a year of deprecation.  
> 
> And I think this is about more than interface -- I think the code may have to be reorganized, with some methods moved to different classes, and there would need to be deprecation for that as well.  
> 
> I'm really frustrated about this too -- I'd hate to see this rot for another 3 years -- but I just can't convince myself it's good to release this as is.  Do you disagree?

I guess I'm not clear about what would need to be deprecated.  Remember, it's only user-visible things that would need this.  If it's backend stuff... Maybe I just need more explicit detail about what your proposed reorganization would imply for the user interface.   texture_map.py seems okay, it's perhaps mainly the `colordata` tuple you are concerned with?  I haven't thought very deeply at all about this, I know your experience with Tachyon has given you a lot of chances to do so.



---

archive/issue_comments_131644.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nYeah, mainly the `colordata` tuple, but I think it's a symptom of some deeper organization issues.\n\nBut maybe I'm just being squeamish because I haven't thought hard enough about this.   I propose one of the following:\n\n* You or Fr\u00e9d\u00e9ric convince me the interface can be made uniform without any difficult reorganization (hopefully by doing it :)\n* I figure it out for myself, after some hard thinking (probably slowly :(",
    "created_at": "2014-08-21T17:19:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131644",
    "user": "https://github.com/nilesjohnson"
}
```

<div id="comment:66" align="right">comment:66</div>

Yeah, mainly the `colordata` tuple, but I think it's a symptom of some deeper organization issues.

But maybe I'm just being squeamish because I haven't thought hard enough about this.   I propose one of the following:

* You or Frédéric convince me the interface can be made uniform without any difficult reorganization (hopefully by doing it :)
* I figure it out for myself, after some hard thinking (probably slowly :(



---

archive/issue_comments_131645.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\nI think I agree now that there is no real reason for the global texture thing, there should be a way to just use that color if it's available.\n> Yeah, mainly the `colordata` tuple, but I think it's a symptom of some deeper organization issues.\n\nI think I dug up another one of your qualms next.\n>  If I understand correctly, this is a fundamental limitation of this approach, because it applies colors only *after* the surface is constructed and therefore only has access to coordinates in 3-space, not the parametrization that was used to produce them.\n\nBut I don't know that these are insurmountable.  I mean, how else *could* one give not just a cmap/color, but also a way to actually allocate it?  I guess one could require using it post-hoc like in texture_map.py but I don't think that is necessary.\n\nAlso, I have now actually read through a lot more of the code as a whole.  I see three things.\n* Awesome added (needed) documentation and cleanup everywhere, very nice\n* Joris' original texture map file, which seems to be used nowhere else and allows one to apply such a transform *after* creating a graphics object\n* chapoton's impressive direct additions of this functionality to things *while* creating the object",
    "created_at": "2014-08-28T19:05:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131645",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:67" align="right">comment:67</div>

I think I agree now that there is no real reason for the global texture thing, there should be a way to just use that color if it's available.
> Yeah, mainly the `colordata` tuple, but I think it's a symptom of some deeper organization issues.

I think I dug up another one of your qualms next.
>  If I understand correctly, this is a fundamental limitation of this approach, because it applies colors only *after* the surface is constructed and therefore only has access to coordinates in 3-space, not the parametrization that was used to produce them.

But I don't know that these are insurmountable.  I mean, how else *could* one give not just a cmap/color, but also a way to actually allocate it?  I guess one could require using it post-hoc like in texture_map.py but I don't think that is necessary.

Also, I have now actually read through a lot more of the code as a whole.  I see three things.
* Awesome added (needed) documentation and cleanup everywhere, very nice
* Joris' original texture map file, which seems to be used nowhere else and allows one to apply such a transform *after* creating a graphics object
* chapoton's impressive direct additions of this functionality to things *while* creating the object



---

archive/issue_comments_131646.json:
```json
{
    "body": "Changed commit from **[`0ae10f5`](https://github.com/sagemath/sagetrac-mirror/commit/0ae10f534826c0addaf4d957bf7c0586ba0a88c4)** to **[`e28acd5`](https://github.com/sagemath/sagetrac-mirror/commit/e28acd51f446f4a47aa73a7019c59b9f6bd148d1)**",
    "created_at": "2014-09-20T07:56:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131646",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0ae10f5`](https://github.com/sagemath/sagetrac-mirror/commit/0ae10f534826c0addaf4d957bf7c0586ba0a88c4)** to **[`e28acd5`](https://github.com/sagemath/sagetrac-mirror/commit/e28acd51f446f4a47aa73a7019c59b9f6bd148d1)**



---

archive/issue_comments_131647.json:
```json
{
    "body": "<div id=\"comment:68\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e28acd51f446f4a47aa73a7019c59b9f6bd148d1\"><code>e28acd5</code></a></td><td><code>Merge branch with 6.4.beta3</code></td></tr></table>\n",
    "created_at": "2014-09-20T07:56:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131647",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:68"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e28acd51f446f4a47aa73a7019c59b9f6bd148d1"><code>e28acd5</code></a></td><td><code>Merge branch with 6.4.beta3</code></td></tr></table>




---

archive/issue_comments_131648.json:
```json
{
    "body": "<div id=\"comment:69\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/41fe504cbf6dc5244e22bfd6dd4b374fd7d1eb28\"><code>41fe504</code></a></td><td><code>Merge with 6.4.beta4</code></td></tr></table>\n",
    "created_at": "2014-09-28T07:19:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131648",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:69"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/41fe504cbf6dc5244e22bfd6dd4b374fd7d1eb28"><code>41fe504</code></a></td><td><code>Merge with 6.4.beta4</code></td></tr></table>




---

archive/issue_comments_131649.json:
```json
{
    "body": "Changed commit from **[`e28acd5`](https://github.com/sagemath/sagetrac-mirror/commit/e28acd51f446f4a47aa73a7019c59b9f6bd148d1)** to **[`41fe504`](https://github.com/sagemath/sagetrac-mirror/commit/41fe504cbf6dc5244e22bfd6dd4b374fd7d1eb28)**",
    "created_at": "2014-09-28T07:19:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131649",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e28acd5`](https://github.com/sagemath/sagetrac-mirror/commit/e28acd51f446f4a47aa73a7019c59b9f6bd148d1)** to **[`41fe504`](https://github.com/sagemath/sagetrac-mirror/commit/41fe504cbf6dc5244e22bfd6dd4b374fd7d1eb28)**



---

archive/issue_comments_131650.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">comment:70</div>\n\nSorry, but I really do not see what I could do to improve things here.\n\nThe Texture class is there to handle a single texture. It makes no sense to feed it with a colormap. So it is not possible to use the color keyword for a colormap, because the color keyword is handled by the Texture class.\n\nI really think that the `global_texture` dichotomy makes sense, as it is not at all the same thing to use a single Texture or one Texture for every vertex.\n\nMaybe one could make something like a class `TextureValuedFunction`, but this seems a bit heavy to me.\n\nI would like to put this ticket back to `needs review`.",
    "created_at": "2014-09-28T10:37:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131650",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:70" align="right">comment:70</div>

Sorry, but I really do not see what I could do to improve things here.

The Texture class is there to handle a single texture. It makes no sense to feed it with a colormap. So it is not possible to use the color keyword for a colormap, because the color keyword is handled by the Texture class.

I really think that the `global_texture` dichotomy makes sense, as it is not at all the same thing to use a single Texture or one Texture for every vertex.

Maybe one could make something like a class `TextureValuedFunction`, but this seems a bit heavy to me.

I would like to put this ticket back to `needs review`.



---

archive/issue_comments_131651.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nOkay, I've been trying to think about this, because I just don't think this is necessarily going to resolve itself easily.  What if instead of `color_data` being a named argument it became (yet another) keyword?  Then in principle that could (later) be overloaded with the ability to give color based on the parametrization, not the embedding in space, since that would probably need more than the one function.  One would have then the following (potential) options:\n* Take an existing 3d plot, and apply one of Joris' transformations to it as a function of `x,y,z`.\n* Have a colormap applied at the time of creation via one of Frederic's functions of `x,y,z`.\n* Have a colormap applied at the time of parametrization, which would then be a color based on a function of the parameters, perhaps with some check for variable names or whatnot.  (The previous options already cover based on implicit plots.)  Or it could just have a different form, I don't know.\nAnother option would be to have the color keyword take a colormap, but then raise an error if an optional keyword `color_function` was not supplied.",
    "created_at": "2014-10-22T02:05:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131651",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:71" align="right">comment:71</div>

Okay, I've been trying to think about this, because I just don't think this is necessarily going to resolve itself easily.  What if instead of `color_data` being a named argument it became (yet another) keyword?  Then in principle that could (later) be overloaded with the ability to give color based on the parametrization, not the embedding in space, since that would probably need more than the one function.  One would have then the following (potential) options:
* Take an existing 3d plot, and apply one of Joris' transformations to it as a function of `x,y,z`.
* Have a colormap applied at the time of creation via one of Frederic's functions of `x,y,z`.
* Have a colormap applied at the time of parametrization, which would then be a color based on a function of the parameters, perhaps with some check for variable names or whatnot.  (The previous options already cover based on implicit plots.)  Or it could just have a different form, I don't know.
Another option would be to have the color keyword take a colormap, but then raise an error if an optional keyword `color_function` was not supplied.



---

archive/issue_comments_131652.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">comment:72</div>\n\n> The `'canvas3d'` viewer (using `json` output with colors defined here and a patched `sagenb`) results look good, but there seems to be a little problem in the notebook. Here is one example\n> When one defines several parametric surfaces, say P1 and P2. Try P1.show(viewer='canvas3d') inside one cell. Then change **this cell** to P2.show(viewer='canvas3d'). It will still show P1 and will never change, whatever you do to P1. No such problem inside a new cell. Seems to be some caching problem.\n\nCorrect, this is #11275 which for some reason I didn't report upstream when I realized it a few days ago.",
    "created_at": "2014-11-05T16:55:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131652",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:72" align="right">comment:72</div>

> The `'canvas3d'` viewer (using `json` output with colors defined here and a patched `sagenb`) results look good, but there seems to be a little problem in the notebook. Here is one example
> When one defines several parametric surfaces, say P1 and P2. Try P1.show(viewer='canvas3d') inside one cell. Then change **this cell** to P2.show(viewer='canvas3d'). It will still show P1 and will never change, whatever you do to P1. No such problem inside a new cell. Seems to be some caching problem.

Correct, this is #11275 which for some reason I didn't report upstream when I realized it a few days ago.



---

archive/issue_comments_131653.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">comment:73</div>\n\nReplying to [@fchapoton](#comment%3A70):\n> Sorry, but I really do not see what I could do to improve things here.\n> \n> The Texture class is there to handle a single texture. \n\n...\n> I really think that the `global_texture` dichotomy makes sense, as it is not at all the same thing to use a single Texture or one Texture for every vertex.\n\nAh -- this must be one source of our miscommunication.  As I understand it, a texture is a color-valued function on a surface.  So I guess what you mean by a single texture is what I would call a *constant* texture.  And I don't think it would be heavy to make a class which treats textures in the more general sense.  The code for this is, as I recall, already existing in what you've written, but has been duplicated in various places because there isn't a single class for it.",
    "created_at": "2014-11-05T18:20:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131653",
    "user": "https://github.com/nilesjohnson"
}
```

<div id="comment:73" align="right">comment:73</div>

Replying to [@fchapoton](#comment%3A70):
> Sorry, but I really do not see what I could do to improve things here.
> 
> The Texture class is there to handle a single texture. 

...
> I really think that the `global_texture` dichotomy makes sense, as it is not at all the same thing to use a single Texture or one Texture for every vertex.

Ah -- this must be one source of our miscommunication.  As I understand it, a texture is a color-valued function on a surface.  So I guess what you mean by a single texture is what I would call a *constant* texture.  And I don't think it would be heavy to make a class which treats textures in the more general sense.  The code for this is, as I recall, already existing in what you've written, but has been duplicated in various places because there isn't a single class for it.



---

archive/issue_comments_131654.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">comment:74</div>\n\n> Ah -- this must be one source of our miscommunication.  As I understand it, a texture is a color-valued function on a surface.  So I guess what you mean by a single texture is what I would call a *constant* texture.  And I don't think it would be heavy to make a class which treats textures in the more general sense.  The code for this is, as I recall, already existing in what you've written, but has been duplicated in various places because there isn't a single class for it.\n\nNow *I'm* confused!  But I guess that's okay, if that helps resolve things.",
    "created_at": "2014-11-05T18:38:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131654",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:74" align="right">comment:74</div>

> Ah -- this must be one source of our miscommunication.  As I understand it, a texture is a color-valued function on a surface.  So I guess what you mean by a single texture is what I would call a *constant* texture.  And I don't think it would be heavy to make a class which treats textures in the more general sense.  The code for this is, as I recall, already existing in what you've written, but has been duplicated in various places because there isn't a single class for it.

Now *I'm* confused!  But I guess that's okay, if that helps resolve things.



---

archive/issue_comments_131655.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">comment:75</div>\n\nReplying to [@kcrisman](#comment%3A74):\n\n> Now *I'm* confused!  But I guess that's okay, if that helps resolve things.\n\nHa!  Well, I hope to get some time on this in the next few weeks.",
    "created_at": "2014-11-05T18:56:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131655",
    "user": "https://github.com/nilesjohnson"
}
```

<div id="comment:75" align="right">comment:75</div>

Replying to [@kcrisman](#comment%3A74):

> Now *I'm* confused!  But I guess that's okay, if that helps resolve things.

Ha!  Well, I hope to get some time on this in the next few weeks.



---

archive/issue_comments_131656.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">comment:76</div>\n\nHere's another weird thing - we have this whole plot3d_adaptive stuff.  Not necessarily needed to discuss here, but strange that it has fairly different arguments than the rest - including weird automatic color stuff.",
    "created_at": "2014-11-06T17:26:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131656",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:76" align="right">comment:76</div>

Here's another weird thing - we have this whole plot3d_adaptive stuff.  Not necessarily needed to discuss here, but strange that it has fairly different arguments than the rest - including weird automatic color stuff.



---

archive/issue_comments_131657.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">comment:77</div>\n\nI've thought more about this now.  First, here are some observations:\n\n\n\n* `plot3d_adaptive`, `TrianglePlot`, and the rest of tri_plot.py\n   - This code is disjoint from the rest of the plotting code and needs\n    to be integrated at some point in the future.\n   - Makes use of `IndexFaceSet.partition`, but that method isn't used\n     anywhere else, except now in `GradualTextureTransform`\n\n\n* Each face in an `IndexFaceSet` has a color attribute, but no other\n  texture attributes (namely opacity, but also ambient, diffuse,\n  specular)\n  - The color_data argument, as it currently stands, directly sets\n    this color attribute for each face as its constructed in\n    `ParametricSurface.triangulate` or `ImplicitSurface.triangulate`\n  - The two different triangulation methods differ substantially, and\n    therefore probably shouldn't be unified\n  - This approach (adding data to triangles) can only set color\n    values, not other texture values, unless `IndexFaceSet` is expanded\n  - I believe this is also connected to the problem of viewing with jmol, but I'm not completely sure.\n  - Surfaces constructed with `plot3d_adaptive` are triangulated with a different codebase (tri_plot.py) and then converted to `IndexFaceSet` objects.\n\n* `IndexFaceSet` is a subclass of `PrimitiveObject` (as in graphics\n  primitive), and hence has support for arbitrary texture information\n  via `PrimitiveObject.set_texture`.\n  - This sets the same texture information for *all* faces in a given\n    `IndexFaceSet` instance.\n  - The code in `plot3d_adaptive`, and hence also in\n    `GradualTextureTransform` which copies it, makes a different\n    instance of `IndexFaceSet` for each texture (e.g. color).  These are\n    combined in a `Graphics3dGroup`.\n  - Grouping triangles by texture makes some sense because often\n    there will be many triangles with the same texture.\n  - `plot3d_adaptive` and `GradualTextureTransform` use the method\n    `IndexFaceSet.partition` to partition triangles according to the\n    values of a scalar function.  In both cases this is done after a\n    single `IndexFaceSet` has been constructed.\n\n* The `color_data` approach (setting attributes of individual faces as\n  they're constructed) is faster than the `GradualTextureTransform`\n  approach by nearly a factor of 2 (or 1/2; see timings below).\n  - This makes sense, given that `GradualTextureTransform` has to\n    construct the triangulation first and then partition it.\n  - The `color_data` approach might be more memory-intensive, but I\n    don't know how to measure this.\n\n\n---\n\nIt could be possible to combine these two approaches:\n\n* Partition triangles according to texture and hence take advantage of\n  the more robust support for textures in the graphics classes.\n\n* Construct this partition during the triangulation process, rather\n  than after the fact.\n\nBefore I start working on this, please let me know if you have suggestions or concerns about this idea.\n\nThanks!",
    "created_at": "2014-12-31T21:15:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131657",
    "user": "https://github.com/nilesjohnson"
}
```

<div id="comment:77" align="right">comment:77</div>

I've thought more about this now.  First, here are some observations:



* `plot3d_adaptive`, `TrianglePlot`, and the rest of tri_plot.py
   - This code is disjoint from the rest of the plotting code and needs
    to be integrated at some point in the future.
   - Makes use of `IndexFaceSet.partition`, but that method isn't used
     anywhere else, except now in `GradualTextureTransform`


* Each face in an `IndexFaceSet` has a color attribute, but no other
  texture attributes (namely opacity, but also ambient, diffuse,
  specular)
  - The color_data argument, as it currently stands, directly sets
    this color attribute for each face as its constructed in
    `ParametricSurface.triangulate` or `ImplicitSurface.triangulate`
  - The two different triangulation methods differ substantially, and
    therefore probably shouldn't be unified
  - This approach (adding data to triangles) can only set color
    values, not other texture values, unless `IndexFaceSet` is expanded
  - I believe this is also connected to the problem of viewing with jmol, but I'm not completely sure.
  - Surfaces constructed with `plot3d_adaptive` are triangulated with a different codebase (tri_plot.py) and then converted to `IndexFaceSet` objects.

* `IndexFaceSet` is a subclass of `PrimitiveObject` (as in graphics
  primitive), and hence has support for arbitrary texture information
  via `PrimitiveObject.set_texture`.
  - This sets the same texture information for *all* faces in a given
    `IndexFaceSet` instance.
  - The code in `plot3d_adaptive`, and hence also in
    `GradualTextureTransform` which copies it, makes a different
    instance of `IndexFaceSet` for each texture (e.g. color).  These are
    combined in a `Graphics3dGroup`.
  - Grouping triangles by texture makes some sense because often
    there will be many triangles with the same texture.
  - `plot3d_adaptive` and `GradualTextureTransform` use the method
    `IndexFaceSet.partition` to partition triangles according to the
    values of a scalar function.  In both cases this is done after a
    single `IndexFaceSet` has been constructed.

* The `color_data` approach (setting attributes of individual faces as
  they're constructed) is faster than the `GradualTextureTransform`
  approach by nearly a factor of 2 (or 1/2; see timings below).
  - This makes sense, given that `GradualTextureTransform` has to
    construct the triangulation first and then partition it.
  - The `color_data` approach might be more memory-intensive, but I
    don't know how to measure this.


---

It could be possible to combine these two approaches:

* Partition triangles according to texture and hence take advantage of
  the more robust support for textures in the graphics classes.

* Construct this partition during the triangulation process, rather
  than after the fact.

Before I start working on this, please let me know if you have suggestions or concerns about this idea.

Thanks!



---

archive/issue_comments_131658.json:
```json
{
    "body": "<div id=\"comment:78\" align=\"right\">comment:78</div>\n\nOops, forgot the timing stuff.\n\nFirst, general setup:\n\n```\n# setup\nvar('r v')\ncmsel = [colormaps['autumn'](i) for i in sxrange(0,1,0.05)]\nf(r,v) = 0.2*(r**2 + v**2) + cos(2*r)*sin(2*v)\n\nfrom sage.plot.plot3d.texture_map import ColormapTransform\nCMT = ColormapTransform(colormaps.autumn, 'height_z')\n\nclebsch(x,y,z) = 81*(x^3+y^3+z^3)-189*(x^2*y+x^2*z+y^2*x+y^2*z+z^2*x+z^2*y) +54*x*y*z+126*(x*y+x*z+y*z)-9*(x^2+y^2+z^2)-9*(x+y+z)+1\ndef R(x,y,z): return z\n\n```\n\nNow compare no colormap, colormap with plot3d_adaptive, the color_data approach, and the `GradualTextureTransform` approach:\n\n```\nsage: # base\nsage: %time q = plot3d(f,(r,-2,2), (v,-2,2))\nCPU times: user 1.91 ms, sys: 75 \u00b5s, total: 1.98 ms\nWall time: 1.93 ms\n\nsage: # with adaptive\nsage: %time p = plot3d(f,(r,-2,2), (v,-2,2), adaptive=True, color=cmsel)\nCPU times: user 29.2 ms, sys: 6.52 ms, total: 35.7 ms\nWall time: 31 ms\n\nsage: # with color_data\nsage: % time s = parametric_plot3d((r,v,f),(r,-2,2), (v,-2,2), color_data=(cf,colormaps.PiYG))\nCPU times: user 1.89 ms, sys: 74 \u00b5s, total: 1.96 ms\nWall time: 1.92 ms\n\nsage: # with GTT\nsage: %time t = CMT.apply(parametric_plot3d((r,v,f),(r,-2,2), (v,-2,2)))\nCPU times: user 4.55 ms, sys: 911 \u00b5s, total: 5.46 ms\nWall time: 4.84 ms\n\nsage: %time t = CMT.apply(s)\nCPU times: user 2.29 ms, sys: 724 \u00b5s, total: 3.01 ms\nWall time: 2.67 ms\n\n```\n\n\nAn example that takes longer to plot, to see how adding colormap affects the time:\n\n```\n\nsage: %time k = implicit_plot3d(clebsch, (x,-2,2), (y,-2,2), (z,-2,2))\nCPU times: user 6.71 ms, sys: 292 \u00b5s, total: 7 ms\nWall time: 6.88 ms\n\nsage: %time m = implicit_plot3d(clebsch, (x,-2,2), (y,-2,2), (z,-2,2), color_data=(R,cm))\nCPU times: user 7.89 ms, sys: 371 \u00b5s, total: 8.26 ms\nWall time: 7.98 ms\n\nsage: %time j = CMT.apply(k)\nCPU times: user 12.5 ms, sys: 2.86 ms, total: 15.3 ms\nWall time: 13.2 ms\n```",
    "created_at": "2014-12-31T21:52:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131658",
    "user": "https://github.com/nilesjohnson"
}
```

<div id="comment:78" align="right">comment:78</div>

Oops, forgot the timing stuff.

First, general setup:

```
# setup
var('r v')
cmsel = [colormaps['autumn'](i) for i in sxrange(0,1,0.05)]
f(r,v) = 0.2*(r**2 + v**2) + cos(2*r)*sin(2*v)

from sage.plot.plot3d.texture_map import ColormapTransform
CMT = ColormapTransform(colormaps.autumn, 'height_z')

clebsch(x,y,z) = 81*(x^3+y^3+z^3)-189*(x^2*y+x^2*z+y^2*x+y^2*z+z^2*x+z^2*y) +54*x*y*z+126*(x*y+x*z+y*z)-9*(x^2+y^2+z^2)-9*(x+y+z)+1
def R(x,y,z): return z

```

Now compare no colormap, colormap with plot3d_adaptive, the color_data approach, and the `GradualTextureTransform` approach:

```
sage: # base
sage: %time q = plot3d(f,(r,-2,2), (v,-2,2))
CPU times: user 1.91 ms, sys: 75 µs, total: 1.98 ms
Wall time: 1.93 ms

sage: # with adaptive
sage: %time p = plot3d(f,(r,-2,2), (v,-2,2), adaptive=True, color=cmsel)
CPU times: user 29.2 ms, sys: 6.52 ms, total: 35.7 ms
Wall time: 31 ms

sage: # with color_data
sage: % time s = parametric_plot3d((r,v,f),(r,-2,2), (v,-2,2), color_data=(cf,colormaps.PiYG))
CPU times: user 1.89 ms, sys: 74 µs, total: 1.96 ms
Wall time: 1.92 ms

sage: # with GTT
sage: %time t = CMT.apply(parametric_plot3d((r,v,f),(r,-2,2), (v,-2,2)))
CPU times: user 4.55 ms, sys: 911 µs, total: 5.46 ms
Wall time: 4.84 ms

sage: %time t = CMT.apply(s)
CPU times: user 2.29 ms, sys: 724 µs, total: 3.01 ms
Wall time: 2.67 ms

```


An example that takes longer to plot, to see how adding colormap affects the time:

```

sage: %time k = implicit_plot3d(clebsch, (x,-2,2), (y,-2,2), (z,-2,2))
CPU times: user 6.71 ms, sys: 292 µs, total: 7 ms
Wall time: 6.88 ms

sage: %time m = implicit_plot3d(clebsch, (x,-2,2), (y,-2,2), (z,-2,2), color_data=(R,cm))
CPU times: user 7.89 ms, sys: 371 µs, total: 8.26 ms
Wall time: 7.98 ms

sage: %time j = CMT.apply(k)
CPU times: user 12.5 ms, sys: 2.86 ms, total: 15.3 ms
Wall time: 13.2 ms
```



---

archive/issue_comments_131659.json:
```json
{
    "body": "<div id=\"comment:79\" align=\"right\">comment:79</div>\n\nReplying to [@nilesjohnson](#comment%3A77):\n> \n> It could be possible to combine these two approaches:\n> \n> * Partition triangles according to texture and hence take advantage of\n>   the more robust support for textures in the graphics classes.\n> \n> * Construct this partition during the triangulation process, rather\n>   than after the fact.\n> \n> Before I start working on this, please let me know if you have suggestions or concerns about this idea.\n> \n\nWell, I've been thinking about this approach, and the fact that it would produce a different `IndexFaceSet` for every texture value.  If only one texture parameter were to vary (e.g. color), then maybe the number of different objects would be manageable (around 20 different colors looks ok and is fast).  But varying two or more attributes quickly puts the number of objects into the hundreds, and that's too many (too slow).  Moreover, partitioning in this way looses the global structure of the object (this is used, e.g. in the triangulation code for `ParametricSurface` to see whether the surface is enclosed or not).\n\nI also think it's worth noting the way tachyon handles textures, since presumably its author is more experienced than we are with these kinds of issues.  Tachyon has a list of textures, and each object has a pointer to the texture which should be applied to it.  I believe other rendering software works this way too  (see `Graphics3d.texture_set` and `Graphics3dGroup.texture_set`).  This is similar to the way `IndexFaceSet` handles faces (storing pointers to vertices, rather than the vertices themselves).\n\nSo maybe the ideal way forward would be to have each face of an `IndexFaceSet` have a pointer to a texture with the relevant color, opacity, etc.  But it would be wasteful to do this by adding a new texture for every single face.\n\n\nAnyway, now I've spent a nontrivial number of hours thinking about this, and I don't see an easy way forward.  I'm just generally unhappy with the way textures are handled in the 3d plotting code, and that's not an issue for this ticket.",
    "created_at": "2015-01-02T21:21:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131659",
    "user": "https://github.com/nilesjohnson"
}
```

<div id="comment:79" align="right">comment:79</div>

Replying to [@nilesjohnson](#comment%3A77):
> 
> It could be possible to combine these two approaches:
> 
> * Partition triangles according to texture and hence take advantage of
>   the more robust support for textures in the graphics classes.
> 
> * Construct this partition during the triangulation process, rather
>   than after the fact.
> 
> Before I start working on this, please let me know if you have suggestions or concerns about this idea.
> 

Well, I've been thinking about this approach, and the fact that it would produce a different `IndexFaceSet` for every texture value.  If only one texture parameter were to vary (e.g. color), then maybe the number of different objects would be manageable (around 20 different colors looks ok and is fast).  But varying two or more attributes quickly puts the number of objects into the hundreds, and that's too many (too slow).  Moreover, partitioning in this way looses the global structure of the object (this is used, e.g. in the triangulation code for `ParametricSurface` to see whether the surface is enclosed or not).

I also think it's worth noting the way tachyon handles textures, since presumably its author is more experienced than we are with these kinds of issues.  Tachyon has a list of textures, and each object has a pointer to the texture which should be applied to it.  I believe other rendering software works this way too  (see `Graphics3d.texture_set` and `Graphics3dGroup.texture_set`).  This is similar to the way `IndexFaceSet` handles faces (storing pointers to vertices, rather than the vertices themselves).

So maybe the ideal way forward would be to have each face of an `IndexFaceSet` have a pointer to a texture with the relevant color, opacity, etc.  But it would be wasteful to do this by adding a new texture for every single face.


Anyway, now I've spent a nontrivial number of hours thinking about this, and I don't see an easy way forward.  I'm just generally unhappy with the way textures are handled in the 3d plotting code, and that's not an issue for this ticket.



---

archive/issue_comments_131660.json:
```json
{
    "body": "<div id=\"comment:80\" align=\"right\">comment:80</div>\n\nOk, I've made some very minimal changes so that the `color` keyword is used instead of `color_data`.  I think my complaints are really related to larger issues in the plotting code, and I should stop getting in the way of this ticket.\n\nI also removed the stuff in `texture_map.py`, namely `GradualTextureTransform` and related classes.  I don't think it offers substantially different functionality from what's available in the rest of this patch (although it is slightly different, of course).  I just couldn't find a strong justification for keeping it even though I'd like to.  Please correct me if I'm wrong!\n\nMy changes are on the new branch `u/niles/ticket/12212`.",
    "created_at": "2015-01-02T21:36:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131660",
    "user": "https://github.com/nilesjohnson"
}
```

<div id="comment:80" align="right">comment:80</div>

Ok, I've made some very minimal changes so that the `color` keyword is used instead of `color_data`.  I think my complaints are really related to larger issues in the plotting code, and I should stop getting in the way of this ticket.

I also removed the stuff in `texture_map.py`, namely `GradualTextureTransform` and related classes.  I don't think it offers substantially different functionality from what's available in the rest of this patch (although it is slightly different, of course).  I just couldn't find a strong justification for keeping it even though I'd like to.  Please correct me if I'm wrong!

My changes are on the new branch `u/niles/ticket/12212`.



---

archive/issue_comments_131661.json:
```json
{
    "body": "Changed branch from **[u/chapoton/12212](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/12212)** to **[u/niles/12212](https://github.com/sagemath/sagetrac-mirror/tree/u/niles/12212)**",
    "created_at": "2015-01-02T21:36:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131661",
    "user": "https://github.com/nilesjohnson"
}
```

Changed branch from **[u/chapoton/12212](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/12212)** to **[u/niles/12212](https://github.com/sagemath/sagetrac-mirror/tree/u/niles/12212)**



---

archive/issue_comments_131662.json:
```json
{
    "body": "Changed commit from **[`41fe504`](https://github.com/sagemath/sagetrac-mirror/commit/41fe504cbf6dc5244e22bfd6dd4b374fd7d1eb28)** to none",
    "created_at": "2015-01-02T21:36:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131662",
    "user": "https://github.com/nilesjohnson"
}
```

Changed commit from **[`41fe504`](https://github.com/sagemath/sagetrac-mirror/commit/41fe504cbf6dc5244e22bfd6dd4b374fd7d1eb28)** to none



---

archive/issue_comments_131663.json:
```json
{
    "body": "Changed branch from **[u/niles/12212](https://github.com/sagemath/sagetrac-mirror/tree/u/niles/12212)** to **[u/niles/ticket/12212](https://github.com/sagemath/sagetrac-mirror/tree/u/niles/ticket/12212)**",
    "created_at": "2015-01-02T21:37:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131663",
    "user": "https://github.com/nilesjohnson"
}
```

Changed branch from **[u/niles/12212](https://github.com/sagemath/sagetrac-mirror/tree/u/niles/12212)** to **[u/niles/ticket/12212](https://github.com/sagemath/sagetrac-mirror/tree/u/niles/ticket/12212)**



---

archive/issue_comments_131664.json:
```json
{
    "body": "Commit: **[`26e78fa`](https://github.com/sagemath/sagetrac-mirror/commit/26e78fa0dec9dd6d20fb7e2b849cda0d44049709)**",
    "created_at": "2015-01-02T21:37:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131664",
    "user": "https://github.com/nilesjohnson"
}
```

Commit: **[`26e78fa`](https://github.com/sagemath/sagetrac-mirror/commit/26e78fa0dec9dd6d20fb7e2b849cda0d44049709)**



---

archive/issue_comments_131665.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">comment:81</div>\n\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1f7fc206043fb1ba781b6355cff553276821edeb\"><code>1f7fc20</code></a></td><td><code>trac #12212 trying to enhance doctest coverage</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/92d9e5bfffc7a8dc757abcc74779f0cd238bb3a9\"><code>92d9e5b</code></a></td><td><code>Merge branch 'u/chapoton/12212' of ssh://trac.sagemath.org:22/sage into 12212</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0ae10f534826c0addaf4d957bf7c0586ba0a88c4\"><code>0ae10f5</code></a></td><td><code>trac #12212 keeping the color keyword in json method</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e28acd51f446f4a47aa73a7019c59b9f6bd148d1\"><code>e28acd5</code></a></td><td><code>Merge branch with 6.4.beta3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/41fe504cbf6dc5244e22bfd6dd4b374fd7d1eb28\"><code>41fe504</code></a></td><td><code>Merge with 6.4.beta4</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ebb4fd534f6f22edc7f8104eee9fecfc536ff19b\"><code>ebb4fd5</code></a></td><td><code>Merge branch 'develop' into u/chapoton/12212</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/765a8c49cffb6617667001f8e996ec304e75fc66\"><code>765a8c4</code></a></td><td><code>Minor edit in texture.py and some fixes for GradualTextureTransform.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/91a1e45ba61e722cce22bef0458f9a9c216f3a55\"><code>91a1e45</code></a></td><td><code>remove color_data keyword and overload color instead</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6d891c14b42e75294d244cb8304c5b3b9ec305a7\"><code>6d891c1</code></a></td><td><code>various minor fixes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/26e78fa0dec9dd6d20fb7e2b849cda0d44049709\"><code>26e78fa</code></a></td><td><code>remove texture_map.py (GradualTextureTransform etc.)</code></td></tr></table>\n",
    "created_at": "2015-01-02T21:37:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131665",
    "user": "https://github.com/nilesjohnson"
}
```

<div id="comment:81" align="right">comment:81</div>

Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1f7fc206043fb1ba781b6355cff553276821edeb"><code>1f7fc20</code></a></td><td><code>trac #12212 trying to enhance doctest coverage</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/92d9e5bfffc7a8dc757abcc74779f0cd238bb3a9"><code>92d9e5b</code></a></td><td><code>Merge branch 'u/chapoton/12212' of ssh://trac.sagemath.org:22/sage into 12212</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0ae10f534826c0addaf4d957bf7c0586ba0a88c4"><code>0ae10f5</code></a></td><td><code>trac #12212 keeping the color keyword in json method</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e28acd51f446f4a47aa73a7019c59b9f6bd148d1"><code>e28acd5</code></a></td><td><code>Merge branch with 6.4.beta3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/41fe504cbf6dc5244e22bfd6dd4b374fd7d1eb28"><code>41fe504</code></a></td><td><code>Merge with 6.4.beta4</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ebb4fd534f6f22edc7f8104eee9fecfc536ff19b"><code>ebb4fd5</code></a></td><td><code>Merge branch 'develop' into u/chapoton/12212</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/765a8c49cffb6617667001f8e996ec304e75fc66"><code>765a8c4</code></a></td><td><code>Minor edit in texture.py and some fixes for GradualTextureTransform.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/91a1e45ba61e722cce22bef0458f9a9c216f3a55"><code>91a1e45</code></a></td><td><code>remove color_data keyword and overload color instead</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6d891c14b42e75294d244cb8304c5b3b9ec305a7"><code>6d891c1</code></a></td><td><code>various minor fixes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/26e78fa0dec9dd6d20fb7e2b849cda0d44049709"><code>26e78fa</code></a></td><td><code>remove texture_map.py (GradualTextureTransform etc.)</code></td></tr></table>




---

archive/issue_comments_131666.json:
```json
{
    "body": "<div id=\"comment:82\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1f5024d9dae78774a717218c791ef17111ba656c\"><code>1f5024d</code></a></td><td><code>remove texture_map from reference manual</code></td></tr></table>\n",
    "created_at": "2015-01-02T21:40:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131666",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:82"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1f5024d9dae78774a717218c791ef17111ba656c"><code>1f5024d</code></a></td><td><code>remove texture_map from reference manual</code></td></tr></table>




---

archive/issue_comments_131667.json:
```json
{
    "body": "Changed commit from **[`26e78fa`](https://github.com/sagemath/sagetrac-mirror/commit/26e78fa0dec9dd6d20fb7e2b849cda0d44049709)** to **[`1f5024d`](https://github.com/sagemath/sagetrac-mirror/commit/1f5024d9dae78774a717218c791ef17111ba656c)**",
    "created_at": "2015-01-02T21:40:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131667",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`26e78fa`](https://github.com/sagemath/sagetrac-mirror/commit/26e78fa0dec9dd6d20fb7e2b849cda0d44049709)** to **[`1f5024d`](https://github.com/sagemath/sagetrac-mirror/commit/1f5024d9dae78774a717218c791ef17111ba656c)**



---

archive/issue_comments_131668.json:
```json
{
    "body": "<div id=\"comment:83\" align=\"right\">comment:83</div>\n\n> Tachyon has a list of textures, and each object has a pointer to the texture which should be applied to it.\n\nWow, that is a lot smarter.  I don't know if we can do that in pure Python, though.\n> I also removed the stuff in texture_map.py\n\nI think we can keep that file in but remove it from the manual... I mean, as I see it (if I recall correctly), it does allow things to be applied after the fact, which could actually be useful (rather than starting a new plot from scratch).\n\nchapoton, what do you think about Niles' ideas?  I will be happy to check out the upstream sagenb ticket as well once I know that this solution is agreeable to both of you.",
    "created_at": "2015-01-04T01:35:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131668",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:83" align="right">comment:83</div>

> Tachyon has a list of textures, and each object has a pointer to the texture which should be applied to it.

Wow, that is a lot smarter.  I don't know if we can do that in pure Python, though.
> I also removed the stuff in texture_map.py

I think we can keep that file in but remove it from the manual... I mean, as I see it (if I recall correctly), it does allow things to be applied after the fact, which could actually be useful (rather than starting a new plot from scratch).

chapoton, what do you think about Niles' ideas?  I will be happy to check out the upstream sagenb ticket as well once I know that this solution is agreeable to both of you.



---

archive/issue_comments_131669.json:
```json
{
    "body": "Changed commit from **[`1f5024d`](https://github.com/sagemath/sagetrac-mirror/commit/1f5024d9dae78774a717218c791ef17111ba656c)** to **[`41fe504`](https://github.com/sagemath/sagetrac-mirror/commit/41fe504cbf6dc5244e22bfd6dd4b374fd7d1eb28)**",
    "created_at": "2015-01-04T14:44:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131669",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[`1f5024d`](https://github.com/sagemath/sagetrac-mirror/commit/1f5024d9dae78774a717218c791ef17111ba656c)** to **[`41fe504`](https://github.com/sagemath/sagetrac-mirror/commit/41fe504cbf6dc5244e22bfd6dd4b374fd7d1eb28)**



---

archive/issue_comments_131670.json:
```json
{
    "body": "<div id=\"comment:84\" align=\"right\">comment:84</div>\n\nI have corrected one failing doctest related to Mobius band.\n\nI am happy with the solution of using `color` instead of `color_data`.\n\nI do not have a strong opinion about keeping or not the `texture_map` file. Maybe I would prefer to keep it, as it is the only way to get a transparency effect so far. But this should not stop the progress here. So either way is ok for me.\n\nI think that we still do not ship a recent enough version of jmol that could accept the color information. Is this true ?\n\nIt would be good to have #7744 at our disposal in order to be able to save x3d files properly.",
    "created_at": "2015-01-04T14:44:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131670",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:84" align="right">comment:84</div>

I have corrected one failing doctest related to Mobius band.

I am happy with the solution of using `color` instead of `color_data`.

I do not have a strong opinion about keeping or not the `texture_map` file. Maybe I would prefer to keep it, as it is the only way to get a transparency effect so far. But this should not stop the progress here. So either way is ok for me.

I think that we still do not ship a recent enough version of jmol that could accept the color information. Is this true ?

It would be good to have #7744 at our disposal in order to be able to save x3d files properly.



---

archive/issue_comments_131671.json:
```json
{
    "body": "Changed branch from **[u/niles/ticket/12212](https://github.com/sagemath/sagetrac-mirror/tree/u/niles/ticket/12212)** to **[u/chapoton/12212](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/12212)**",
    "created_at": "2015-01-04T14:44:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131671",
    "user": "https://github.com/fchapoton"
}
```

Changed branch from **[u/niles/ticket/12212](https://github.com/sagemath/sagetrac-mirror/tree/u/niles/ticket/12212)** to **[u/chapoton/12212](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/12212)**



---

archive/issue_comments_131672.json:
```json
{
    "body": "<div id=\"comment:85\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ebb4fd534f6f22edc7f8104eee9fecfc536ff19b\"><code>ebb4fd5</code></a></td><td><code>Merge branch 'develop' into u/chapoton/12212</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/765a8c49cffb6617667001f8e996ec304e75fc66\"><code>765a8c4</code></a></td><td><code>Minor edit in texture.py and some fixes for GradualTextureTransform.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/91a1e45ba61e722cce22bef0458f9a9c216f3a55\"><code>91a1e45</code></a></td><td><code>remove color_data keyword and overload color instead</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6d891c14b42e75294d244cb8304c5b3b9ec305a7\"><code>6d891c1</code></a></td><td><code>various minor fixes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/26e78fa0dec9dd6d20fb7e2b849cda0d44049709\"><code>26e78fa</code></a></td><td><code>remove texture_map.py (GradualTextureTransform etc.)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1f5024d9dae78774a717218c791ef17111ba656c\"><code>1f5024d</code></a></td><td><code>remove texture_map from reference manual</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e685cbc3c8c86426e8715bf1104054621b8777d0\"><code>e685cbc</code></a></td><td><code>trac #12212 correct one failing doctest</code></td></tr></table>\n",
    "created_at": "2015-01-04T14:47:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131672",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:85"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ebb4fd534f6f22edc7f8104eee9fecfc536ff19b"><code>ebb4fd5</code></a></td><td><code>Merge branch 'develop' into u/chapoton/12212</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/765a8c49cffb6617667001f8e996ec304e75fc66"><code>765a8c4</code></a></td><td><code>Minor edit in texture.py and some fixes for GradualTextureTransform.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/91a1e45ba61e722cce22bef0458f9a9c216f3a55"><code>91a1e45</code></a></td><td><code>remove color_data keyword and overload color instead</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6d891c14b42e75294d244cb8304c5b3b9ec305a7"><code>6d891c1</code></a></td><td><code>various minor fixes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/26e78fa0dec9dd6d20fb7e2b849cda0d44049709"><code>26e78fa</code></a></td><td><code>remove texture_map.py (GradualTextureTransform etc.)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1f5024d9dae78774a717218c791ef17111ba656c"><code>1f5024d</code></a></td><td><code>remove texture_map from reference manual</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e685cbc3c8c86426e8715bf1104054621b8777d0"><code>e685cbc</code></a></td><td><code>trac #12212 correct one failing doctest</code></td></tr></table>




---

archive/issue_comments_131673.json:
```json
{
    "body": "Changed commit from **[`41fe504`](https://github.com/sagemath/sagetrac-mirror/commit/41fe504cbf6dc5244e22bfd6dd4b374fd7d1eb28)** to **[`e685cbc`](https://github.com/sagemath/sagetrac-mirror/commit/e685cbc3c8c86426e8715bf1104054621b8777d0)**",
    "created_at": "2015-01-04T14:47:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131673",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`41fe504`](https://github.com/sagemath/sagetrac-mirror/commit/41fe504cbf6dc5244e22bfd6dd4b374fd7d1eb28)** to **[`e685cbc`](https://github.com/sagemath/sagetrac-mirror/commit/e685cbc3c8c86426e8715bf1104054621b8777d0)**



---

archive/issue_comments_131674.json:
```json
{
    "body": "<div id=\"comment:86\" align=\"right\">comment:86</div>\n\n> I do not have a strong opinion about keeping or not the `texture_map` file. Maybe I would prefer to keep it, as it is the only way to get a transparency effect so far. But this should not stop the progress here. So either way is ok for me.\n\nAh, then I suppose we should keep it.\n> I think that we still do not ship a recent enough version of jmol that could accept the color information. Is this true ?\n\nI do not know, but I do know that you may want to check whether https://github.com/sagemath/sagenb/pull/212 is still the correct way to solve the canvas3d issue for these colormaps.",
    "created_at": "2015-01-05T14:25:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131674",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:86" align="right">comment:86</div>

> I do not have a strong opinion about keeping or not the `texture_map` file. Maybe I would prefer to keep it, as it is the only way to get a transparency effect so far. But this should not stop the progress here. So either way is ok for me.

Ah, then I suppose we should keep it.
> I think that we still do not ship a recent enough version of jmol that could accept the color information. Is this true ?

I do not know, but I do know that you may want to check whether https://github.com/sagemath/sagenb/pull/212 is still the correct way to solve the canvas3d issue for these colormaps.



---

archive/issue_comments_131675.json:
```json
{
    "body": "<div id=\"comment:87\" align=\"right\">comment:87</div>\n\n> > I think that we still do not ship a recent enough version of jmol that could accept the color information. Is this true ?\n\n> I do not know, \n\n(Because your communication was private with jmol and I could never figure out exactly what commit or version of jmol that ended up in; if you have that info it shouldn't be too bad to do an upgrade of jmol for this ticket.)",
    "created_at": "2015-01-05T14:26:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131675",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:87" align="right">comment:87</div>

> > I think that we still do not ship a recent enough version of jmol that could accept the color information. Is this true ?

> I do not know, 

(Because your communication was private with jmol and I could never figure out exactly what commit or version of jmol that ended up in; if you have that info it shouldn't be too bad to do an upgrade of jmol for this ticket.)



---

archive/issue_comments_131676.json:
```json
{
    "body": "<div id=\"comment:88\" align=\"right\">comment:88</div>\n\nReplying to [@kcrisman](#comment%3A86):\n> > I do not have a strong opinion about keeping or not the `texture_map` file. Maybe I would prefer to keep it, as it is the only way to get a transparency effect so far. But this should not stop the progress here. So either way is ok for me.\n\n> Ah, then I suppose we should keep it.\n\nDo you really think it's ready to be part of the Sage library?  Joris said he wasn't happy with the class layout, and it hasn't changed substantially.",
    "created_at": "2015-01-05T16:21:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131676",
    "user": "https://github.com/nilesjohnson"
}
```

<div id="comment:88" align="right">comment:88</div>

Replying to [@kcrisman](#comment%3A86):
> > I do not have a strong opinion about keeping or not the `texture_map` file. Maybe I would prefer to keep it, as it is the only way to get a transparency effect so far. But this should not stop the progress here. So either way is ok for me.

> Ah, then I suppose we should keep it.

Do you really think it's ready to be part of the Sage library?  Joris said he wasn't happy with the class layout, and it hasn't changed substantially.



---

archive/issue_comments_131677.json:
```json
{
    "body": "<div id=\"comment:89\" align=\"right\">comment:89</div>\n\nReplying to [@kcrisman](#comment%3A87):\n> I could never figure out exactly what commit or version of jmol that ended up in; if you have that info it shouldn't be too bad to do an upgrade of jmol for this ticket.\n\nIt was claimed that the functionality was in version 14.2.5 -- I don't know how to upgrade jmol though.",
    "created_at": "2015-01-05T16:57:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131677",
    "user": "https://github.com/nilesjohnson"
}
```

<div id="comment:89" align="right">comment:89</div>

Replying to [@kcrisman](#comment%3A87):
> I could never figure out exactly what commit or version of jmol that ended up in; if you have that info it shouldn't be too bad to do an upgrade of jmol for this ticket.

It was claimed that the functionality was in version 14.2.5 -- I don't know how to upgrade jmol though.



---

archive/issue_comments_131678.json:
```json
{
    "body": "<div id=\"comment:90\" align=\"right\">comment:90</div>\n\nI have got two different info versions:\n\nLater this week it will appear in Jmol 14.2.5. (10th of august)\n\nReleased as https://sourceforge.net/projects/jmol/files/Jmol-beta/Jmol%2014.3/Jmol%2014.3.6/\n\n(the 18th of august)\n\nI am not sure I understand their numbering system..\n\nBut this was probably just after the jmol we ship now (jmol-14.2.4_2014.08.03.tar.bz2)",
    "created_at": "2015-01-05T17:07:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131678",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:90" align="right">comment:90</div>

I have got two different info versions:

Later this week it will appear in Jmol 14.2.5. (10th of august)

Released as https://sourceforge.net/projects/jmol/files/Jmol-beta/Jmol%2014.3/Jmol%2014.3.6/

(the 18th of august)

I am not sure I understand their numbering system..

But this was probably just after the jmol we ship now (jmol-14.2.4_2014.08.03.tar.bz2)



---

archive/issue_comments_131679.json:
```json
{
    "body": "<div id=\"comment:91\" align=\"right\">comment:91</div>\n\nIn principle upgrading jmol in this minor version should be as simple as dumping a new tarball in the results of #17020.  Assuming there aren't any other changes affecting us between those.  It would be useful to know in which upstream commit that was fixed...",
    "created_at": "2015-01-05T17:15:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131679",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:91" align="right">comment:91</div>

In principle upgrading jmol in this minor version should be as simple as dumping a new tarball in the results of #17020.  Assuming there aren't any other changes affecting us between those.  It would be useful to know in which upstream commit that was fixed...



---

archive/issue_comments_131680.json:
```json
{
    "body": "<div id=\"comment:92\" align=\"right\">comment:92</div>\n\nReplying to [@kcrisman](#comment%3A91):\n> In principle upgrading jmol in this minor version should be as simple as dumping a new tarball in the results of #17020.  \n\nI'm afraid I don't understand . . . do we need to make a new ticket for upgrading jmol?",
    "created_at": "2015-01-05T18:20:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131680",
    "user": "https://github.com/nilesjohnson"
}
```

<div id="comment:92" align="right">comment:92</div>

Replying to [@kcrisman](#comment%3A91):
> In principle upgrading jmol in this minor version should be as simple as dumping a new tarball in the results of #17020.  

I'm afraid I don't understand . . . do we need to make a new ticket for upgrading jmol?



---

archive/issue_comments_131681.json:
```json
{
    "body": "<div id=\"comment:93\" align=\"right\">comment:93</div>\n\n> > In principle upgrading jmol in this minor version should be as simple as dumping a new tarball in the results of #17020.  \n\n> I'm afraid I don't understand . . . do we need to make a new ticket for upgrading jmol?\n\nNot necessarily, it could be done here, especially if no other changes are needed.  I mention #17020 because there was a slightly different naming convention or something.  Anyway, you should be able to drop the new source tarball into `upstream` and then fix the checksums (http://www.sagemath.org/doc/developer/packaging.html#checksums) and do `sage -f jmol` to see what happens.  Hopefully nothing bad!",
    "created_at": "2015-01-05T18:24:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131681",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:93" align="right">comment:93</div>

> > In principle upgrading jmol in this minor version should be as simple as dumping a new tarball in the results of #17020.  

> I'm afraid I don't understand . . . do we need to make a new ticket for upgrading jmol?

Not necessarily, it could be done here, especially if no other changes are needed.  I mention #17020 because there was a slightly different naming convention or something.  Anyway, you should be able to drop the new source tarball into `upstream` and then fix the checksums (http://www.sagemath.org/doc/developer/packaging.html#checksums) and do `sage -f jmol` to see what happens.  Hopefully nothing bad!



---

archive/issue_comments_131682.json:
```json
{
    "body": "<div id=\"comment:94\" align=\"right\">comment:94</div>\n\nNote that the jmol coloring must also be activated in sage by changing the lines\n\n```\n+        # put this into play when jmol will accept the colored pmesh\n+        if True:   # self.global_texture:\n```\n\ninside `index_face_set.pyx`",
    "created_at": "2015-01-05T19:17:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131682",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:94" align="right">comment:94</div>

Note that the jmol coloring must also be activated in sage by changing the lines

```
+        # put this into play when jmol will accept the colored pmesh
+        if True:   # self.global_texture:
```

inside `index_face_set.pyx`



---

archive/issue_comments_131683.json:
```json
{
    "body": "<div id=\"comment:95\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/46de317e9c4f9c2a7a47e87cabcc9849338f0737\"><code>46de317</code></a></td><td><code>trac #12212 activation of jmol coloring</code></td></tr></table>\n",
    "created_at": "2015-01-05T19:20:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131683",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:95"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/46de317e9c4f9c2a7a47e87cabcc9849338f0737"><code>46de317</code></a></td><td><code>trac #12212 activation of jmol coloring</code></td></tr></table>




---

archive/issue_comments_131684.json:
```json
{
    "body": "Changed commit from **[`e685cbc`](https://github.com/sagemath/sagetrac-mirror/commit/e685cbc3c8c86426e8715bf1104054621b8777d0)** to **[`46de317`](https://github.com/sagemath/sagetrac-mirror/commit/46de317e9c4f9c2a7a47e87cabcc9849338f0737)**",
    "created_at": "2015-01-05T19:20:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131684",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e685cbc`](https://github.com/sagemath/sagetrac-mirror/commit/e685cbc3c8c86426e8715bf1104054621b8777d0)** to **[`46de317`](https://github.com/sagemath/sagetrac-mirror/commit/46de317e9c4f9c2a7a47e87cabcc9849338f0737)**



---

archive/issue_comments_131685.json:
```json
{
    "body": "Changed branch from **[u/chapoton/12212](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/12212)** to **[u/niles/12212](https://github.com/sagemath/sagetrac-mirror/tree/u/niles/12212)**",
    "created_at": "2015-01-06T19:30:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131685",
    "user": "https://github.com/nilesjohnson"
}
```

Changed branch from **[u/chapoton/12212](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/12212)** to **[u/niles/12212](https://github.com/sagemath/sagetrac-mirror/tree/u/niles/12212)**



---

archive/issue_comments_131686.json:
```json
{
    "body": "<div id=\"comment:96\" align=\"right\">comment:96</div>\n\nReplying to [@kcrisman](#comment%3A93):\n> Anyway, you should be able to drop the new source tarball into `upstream` and then fix the checksums (http://www.sagemath.org/doc/developer/packaging.html#checksums) and do `sage -f jmol` to see what happens.  Hopefully nothing bad!\n\nI upgraded jmol successfully, but no colormaps.  However I did notice a serious problem with the try/except checks for the color keyword: `TypeError` is the error when something doesn't have `len()`.  I've fixed that now.\n\n---\n\np.s.  If someone else wants to try upgrading jmol, there's a little more to it than what Karl said, but not much.  You have to make the tarball in the right way, and this is described in `build/pkgs/jmol/SPKGS.txt`.  You also have to update the version number in `build/pkgs/jmol/package-version.txt`.",
    "created_at": "2015-01-06T19:30:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131686",
    "user": "https://github.com/nilesjohnson"
}
```

<div id="comment:96" align="right">comment:96</div>

Replying to [@kcrisman](#comment%3A93):
> Anyway, you should be able to drop the new source tarball into `upstream` and then fix the checksums (http://www.sagemath.org/doc/developer/packaging.html#checksums) and do `sage -f jmol` to see what happens.  Hopefully nothing bad!

I upgraded jmol successfully, but no colormaps.  However I did notice a serious problem with the try/except checks for the color keyword: `TypeError` is the error when something doesn't have `len()`.  I've fixed that now.

---

p.s.  If someone else wants to try upgrading jmol, there's a little more to it than what Karl said, but not much.  You have to make the tarball in the right way, and this is described in `build/pkgs/jmol/SPKGS.txt`.  You also have to update the version number in `build/pkgs/jmol/package-version.txt`.



---

archive/issue_comments_131687.json:
```json
{
    "body": "Changed commit from **[`46de317`](https://github.com/sagemath/sagetrac-mirror/commit/46de317e9c4f9c2a7a47e87cabcc9849338f0737)** to none",
    "created_at": "2015-01-06T19:30:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131687",
    "user": "https://github.com/nilesjohnson"
}
```

Changed commit from **[`46de317`](https://github.com/sagemath/sagetrac-mirror/commit/46de317e9c4f9c2a7a47e87cabcc9849338f0737)** to none



---

archive/issue_comments_131688.json:
```json
{
    "body": "<div id=\"comment:97\" align=\"right\">comment:97</div>\n\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/91a1e45ba61e722cce22bef0458f9a9c216f3a55\"><code>91a1e45</code></a></td><td><code>remove color_data keyword and overload color instead</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6d891c14b42e75294d244cb8304c5b3b9ec305a7\"><code>6d891c1</code></a></td><td><code>various minor fixes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/26e78fa0dec9dd6d20fb7e2b849cda0d44049709\"><code>26e78fa</code></a></td><td><code>remove texture_map.py (GradualTextureTransform etc.)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1f5024d9dae78774a717218c791ef17111ba656c\"><code>1f5024d</code></a></td><td><code>remove texture_map from reference manual</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e685cbc3c8c86426e8715bf1104054621b8777d0\"><code>e685cbc</code></a></td><td><code>trac #12212 correct one failing doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/46de317e9c4f9c2a7a47e87cabcc9849338f0737\"><code>46de317</code></a></td><td><code>trac #12212 activation of jmol coloring</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f7321b7ac35083f2c6ddf738b0a494fba2951eb0\"><code>f7321b7</code></a></td><td><code>Update to jmol 14.3.6_2014.08.17b</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/591921a059964fc37ca144f39a68cfbe43b47b49\"><code>591921a</code></a></td><td><code>Merge branch 'develop' into ticket/12212</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8313589656a6cce5f4e6b431384e4f9f41dffff8\"><code>8313589</code></a></td><td><code>Revert \"Update to jmol 14.3.6_2014.08.17b\"</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dabfdc4f85925fffe305c1f88d212031243ee8ef\"><code>dabfdc4</code></a></td><td><code>fix try/except for color keyword</code></td></tr></table>\n",
    "created_at": "2015-01-06T19:31:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131688",
    "user": "https://github.com/nilesjohnson"
}
```

<div id="comment:97" align="right">comment:97</div>

Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/91a1e45ba61e722cce22bef0458f9a9c216f3a55"><code>91a1e45</code></a></td><td><code>remove color_data keyword and overload color instead</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6d891c14b42e75294d244cb8304c5b3b9ec305a7"><code>6d891c1</code></a></td><td><code>various minor fixes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/26e78fa0dec9dd6d20fb7e2b849cda0d44049709"><code>26e78fa</code></a></td><td><code>remove texture_map.py (GradualTextureTransform etc.)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1f5024d9dae78774a717218c791ef17111ba656c"><code>1f5024d</code></a></td><td><code>remove texture_map from reference manual</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e685cbc3c8c86426e8715bf1104054621b8777d0"><code>e685cbc</code></a></td><td><code>trac #12212 correct one failing doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/46de317e9c4f9c2a7a47e87cabcc9849338f0737"><code>46de317</code></a></td><td><code>trac #12212 activation of jmol coloring</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f7321b7ac35083f2c6ddf738b0a494fba2951eb0"><code>f7321b7</code></a></td><td><code>Update to jmol 14.3.6_2014.08.17b</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/591921a059964fc37ca144f39a68cfbe43b47b49"><code>591921a</code></a></td><td><code>Merge branch 'develop' into ticket/12212</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8313589656a6cce5f4e6b431384e4f9f41dffff8"><code>8313589</code></a></td><td><code>Revert "Update to jmol 14.3.6_2014.08.17b"</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dabfdc4f85925fffe305c1f88d212031243ee8ef"><code>dabfdc4</code></a></td><td><code>fix try/except for color keyword</code></td></tr></table>




---

archive/issue_comments_131689.json:
```json
{
    "body": "Changed branch from **[u/niles/12212](https://github.com/sagemath/sagetrac-mirror/tree/u/niles/12212)** to **[u/niles/ticket/12212](https://github.com/sagemath/sagetrac-mirror/tree/u/niles/ticket/12212)**",
    "created_at": "2015-01-06T19:31:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131689",
    "user": "https://github.com/nilesjohnson"
}
```

Changed branch from **[u/niles/12212](https://github.com/sagemath/sagetrac-mirror/tree/u/niles/12212)** to **[u/niles/ticket/12212](https://github.com/sagemath/sagetrac-mirror/tree/u/niles/ticket/12212)**



---

archive/issue_comments_131690.json:
```json
{
    "body": "Commit: **[`dabfdc4`](https://github.com/sagemath/sagetrac-mirror/commit/dabfdc4f85925fffe305c1f88d212031243ee8ef)**",
    "created_at": "2015-01-06T19:31:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131690",
    "user": "https://github.com/nilesjohnson"
}
```

Commit: **[`dabfdc4`](https://github.com/sagemath/sagetrac-mirror/commit/dabfdc4f85925fffe305c1f88d212031243ee8ef)**



---

archive/issue_comments_131691.json:
```json
{
    "body": "<div id=\"comment:98\" align=\"right\">comment:98</div>\n\nCould you please provide a link to the tar ball you made ?",
    "created_at": "2015-01-06T19:50:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131691",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:98" align="right">comment:98</div>

Could you please provide a link to the tar ball you made ?



---

archive/issue_comments_131692.json:
```json
{
    "body": "<div id=\"comment:99\" align=\"right\">comment:99</div>\n\nReplying to [@fchapoton](#comment%3A98):\n> Could you please provide a link to the tar ball you made ?\n\nok, this should work for a while\n\nhttps://www.dropbox.com/s/lh4p5vx3rryzw2i/jmol-14.3.6_2014.08.17b.tar.bz2?dl=0",
    "created_at": "2015-01-06T19:55:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131692",
    "user": "https://github.com/nilesjohnson"
}
```

<div id="comment:99" align="right">comment:99</div>

Replying to [@fchapoton](#comment%3A98):
> Could you please provide a link to the tar ball you made ?

ok, this should work for a while

https://www.dropbox.com/s/lh4p5vx3rryzw2i/jmol-14.3.6_2014.08.17b.tar.bz2?dl=0



---

archive/issue_comments_131693.json:
```json
{
    "body": "<div id=\"comment:100\" align=\"right\">comment:100</div>\n\nReplying to [@nilesjohnson](#comment%3A99):\n \n> https://www.dropbox.com/s/lh4p5vx3rryzw2i/jmol-14.3.6_2014.08.17b.tar.bz2?dl=0\n\nJust a reminder that the odd decimal releases are the development branch not the stable branch.  This is OK for testing, but we will not roll another Jmol spkg that includes the changes in this until the 14.4 release.  If there are major bug fixes I may make another 14.2 spkg.",
    "created_at": "2015-01-06T22:29:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131693",
    "user": "https://github.com/gutow"
}
```

<div id="comment:100" align="right">comment:100</div>

Replying to [@nilesjohnson](#comment%3A99):
 
> https://www.dropbox.com/s/lh4p5vx3rryzw2i/jmol-14.3.6_2014.08.17b.tar.bz2?dl=0

Just a reminder that the odd decimal releases are the development branch not the stable branch.  This is OK for testing, but we will not roll another Jmol spkg that includes the changes in this until the 14.4 release.  If there are major bug fixes I may make another 14.2 spkg.



---

archive/issue_comments_131694.json:
```json
{
    "body": "<div id=\"comment:101\" align=\"right\">comment:101</div>\n\nUmm... would it be possible to cherry-pick the (presumably small?) commit that is needed for this functionality and add it as a patch in spkg-install?",
    "created_at": "2015-01-07T02:54:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131694",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:101" align="right">comment:101</div>

Umm... would it be possible to cherry-pick the (presumably small?) commit that is needed for this functionality and add it as a patch in spkg-install?



---

archive/issue_comments_131695.json:
```json
{
    "body": "<div id=\"comment:102\" align=\"right\">comment:102</div>\n\nReplying to [@kcrisman](#comment%3A101):\n> Umm... would it be possible to cherry-pick the (presumably small?) commit that is needed for this functionality and add it as a patch in spkg-install?\n\nIn principle, sure.  But we still don't know exactly which commit that was, and I'm not particularly interested in learning how to do spkg patches at the moment.  So instead I say we forget about jmol on this ticket.  As I understand it, this will just automatically start to work when/if jmol is upgraded -- is that right?  In the meantime, do we need to revert [46de317e9](https://github.com/sagemath/sagetrac-mirror/commit/46de317e9c4f9c2a7a47e87cabcc9849338f0737)?",
    "created_at": "2015-01-07T13:53:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131695",
    "user": "https://github.com/nilesjohnson"
}
```

<div id="comment:102" align="right">comment:102</div>

Replying to [@kcrisman](#comment%3A101):
> Umm... would it be possible to cherry-pick the (presumably small?) commit that is needed for this functionality and add it as a patch in spkg-install?

In principle, sure.  But we still don't know exactly which commit that was, and I'm not particularly interested in learning how to do spkg patches at the moment.  So instead I say we forget about jmol on this ticket.  As I understand it, this will just automatically start to work when/if jmol is upgraded -- is that right?  In the meantime, do we need to revert [46de317e9](https://github.com/sagemath/sagetrac-mirror/commit/46de317e9c4f9c2a7a47e87cabcc9849338f0737)?



---

archive/issue_comments_131696.json:
```json
{
    "body": "<div id=\"comment:103\" align=\"right\">comment:103</div>\n\nYes I think this commit has to be reverted, though I have not tested to see what happens if we do not revert it.",
    "created_at": "2015-01-07T14:34:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131696",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:103" align="right">comment:103</div>

Yes I think this commit has to be reverted, though I have not tested to see what happens if we do not revert it.



---

archive/issue_comments_131697.json:
```json
{
    "body": "<div id=\"comment:104\" align=\"right\">comment:104</div>\n\n> In principle, sure. But we still don't know exactly which commit that was, \n\nI was asking Jonathan and chapoton, of course, as that was my point too.  I'm sure chapoton or myself would be happy to turn that into a patch, we both have some experience with that.   But if it's not identifiable, then that sort of misses the point.\n\nFor the record, apparently [14.2.9](https://sourceforge.net/projects/jmol/files/latest/download?source=files) is the latest stable branch version.  Maybe someone can search [here](https://sourceforge.net/projects/jmol/files/Jmol/Version%2014.2/Version%2014.2.9/) for whether the feature we want is there.  Say, \n\n> new feature: pmesh files can contain triangle colors\n\nwhich should in fact already **be** in the version Niles made!  Maybe the interface is not as obvious?  At any rate, that should definitely be in 14.2.9, according to this.  It must be around commit r19940 (see the [browser](https://sourceforge.net/p/jmol/code/commit_browser)) but I can't find it.",
    "created_at": "2015-01-07T14:39:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131697",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:104" align="right">comment:104</div>

> In principle, sure. But we still don't know exactly which commit that was, 

I was asking Jonathan and chapoton, of course, as that was my point too.  I'm sure chapoton or myself would be happy to turn that into a patch, we both have some experience with that.   But if it's not identifiable, then that sort of misses the point.

For the record, apparently [14.2.9](https://sourceforge.net/projects/jmol/files/latest/download?source=files) is the latest stable branch version.  Maybe someone can search [here](https://sourceforge.net/projects/jmol/files/Jmol/Version%2014.2/Version%2014.2.9/) for whether the feature we want is there.  Say, 

> new feature: pmesh files can contain triangle colors

which should in fact already **be** in the version Niles made!  Maybe the interface is not as obvious?  At any rate, that should definitely be in 14.2.9, according to this.  It must be around commit r19940 (see the [browser](https://sourceforge.net/p/jmol/code/commit_browser)) but I can't find it.



---

archive/issue_comments_131698.json:
```json
{
    "body": "<div id=\"comment:105\" align=\"right\">comment:105</div>\n\nIf it is in the 14.2 release series we should just make a new spkg part of this.  The 14.2 series is stable enough for production.  It is very easy to make a new Jmol spkg.",
    "created_at": "2015-01-07T14:53:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131698",
    "user": "https://github.com/gutow"
}
```

<div id="comment:105" align="right">comment:105</div>

If it is in the 14.2 release series we should just make a new spkg part of this.  The 14.2 series is stable enough for production.  It is very easy to make a new Jmol spkg.



---

archive/issue_comments_131699.json:
```json
{
    "body": "<div id=\"comment:106\" align=\"right\">comment:106</div>\n\nIt would be useful to make a 14.2.9 spkg and then see whether this change (which certainly should be in it, though I couldn't find the commit for it, as it is in the release notes which seem to be auto-generated) actually does anything.  Then no one has to revert any commits.  But I think maybe there is more to allowing the triangles to be colored than this (on the Sage side), maybe?",
    "created_at": "2015-01-07T14:55:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131699",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:106" align="right">comment:106</div>

It would be useful to make a 14.2.9 spkg and then see whether this change (which certainly should be in it, though I couldn't find the commit for it, as it is in the release notes which seem to be auto-generated) actually does anything.  Then no one has to revert any commits.  But I think maybe there is more to allowing the triangles to be colored than this (on the Sage side), maybe?



---

archive/issue_comments_131700.json:
```json
{
    "body": "<div id=\"comment:107\" align=\"right\">comment:107</div>\n\nI have made an spkg here : \n\nhttps://chapoton.perso.math.cnrs.fr/public/jmol-14.2.9_2014.11.23.tar.bz2\n\nI hope I have followed correctly the instruction of the jmol SPKG.txt\n\nI have not changed the checksums.",
    "created_at": "2015-01-07T15:35:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131700",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:107" align="right">comment:107</div>

I have made an spkg here : 

https://chapoton.perso.math.cnrs.fr/public/jmol-14.2.9_2014.11.23.tar.bz2

I hope I have followed correctly the instruction of the jmol SPKG.txt

I have not changed the checksums.



---

archive/issue_comments_131701.json:
```json
{
    "body": "<div id=\"comment:108\" align=\"right\">comment:108</div>\n\n> https://chapoton.perso.math.cnrs.fr/public/jmol-14.2.9_2014.11.23.tar.bz2\n\nThis seems to require a login.",
    "created_at": "2015-01-07T15:54:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131701",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:108" align="right">comment:108</div>

> https://chapoton.perso.math.cnrs.fr/public/jmol-14.2.9_2014.11.23.tar.bz2

This seems to require a login.



---

archive/issue_comments_131702.json:
```json
{
    "body": "<div id=\"comment:109\" align=\"right\">comment:109</div>\n\na login ? it should not, let me investigate\n\nOk, the link is http://chapoton.perso.math.cnrs.fr/jmol-14.2.9_2014.11.23.tar.bz2\n\nHere is a new branch with checksums of jmol 14.2.9\n\nnot yet tested",
    "created_at": "2015-01-07T15:55:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131702",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:109" align="right">comment:109</div>

a login ? it should not, let me investigate

Ok, the link is http://chapoton.perso.math.cnrs.fr/jmol-14.2.9_2014.11.23.tar.bz2

Here is a new branch with checksums of jmol 14.2.9

not yet tested



---

archive/issue_comments_131703.json:
```json
{
    "body": "<div id=\"comment:110\" align=\"right\">comment:110</div>\n\nI can confirm that with this updated spkg that it works for Tachyon but only gives a blank jmol (this is in the command line).  So something must be wrong about how we are passing that information to jmol, I guess.  The interesting thing is that [comment:51](#comment%3A51) indicates that the change must have worked at some point...\n\n(By the way, I don't believe the branch here was updated to 14.2.9; I did that on my own, but presumably the outcome is the same.)",
    "created_at": "2015-01-07T18:37:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131703",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:110" align="right">comment:110</div>

I can confirm that with this updated spkg that it works for Tachyon but only gives a blank jmol (this is in the command line).  So something must be wrong about how we are passing that information to jmol, I guess.  The interesting thing is that [comment:51](#comment%3A51) indicates that the change must have worked at some point...

(By the way, I don't believe the branch here was updated to 14.2.9; I did that on my own, but presumably the outcome is the same.)



---

archive/issue_comments_131704.json:
```json
{
    "body": "Changed commit from **[`dabfdc4`](https://github.com/sagemath/sagetrac-mirror/commit/dabfdc4f85925fffe305c1f88d212031243ee8ef)** to **[`d6d60ed`](https://github.com/sagemath/sagetrac-mirror/commit/d6d60edfcd4524d882e14b5cd4f97b26a79e28d6)**",
    "created_at": "2015-01-07T18:54:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131704",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[`dabfdc4`](https://github.com/sagemath/sagetrac-mirror/commit/dabfdc4f85925fffe305c1f88d212031243ee8ef)** to **[`d6d60ed`](https://github.com/sagemath/sagetrac-mirror/commit/d6d60edfcd4524d882e14b5cd4f97b26a79e28d6)**



---

archive/issue_comments_131705.json:
```json
{
    "body": "<div id=\"comment:111\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d6d60edfcd4524d882e14b5cd4f97b26a79e28d6\"><code>d6d60ed</code></a></td><td><code>trac #12212 updating jmol package to 14.2.9</code></td></tr></table>\n",
    "created_at": "2015-01-07T18:54:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131705",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:111"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d6d60edfcd4524d882e14b5cd4f97b26a79e28d6"><code>d6d60ed</code></a></td><td><code>trac #12212 updating jmol package to 14.2.9</code></td></tr></table>




---

archive/issue_comments_131706.json:
```json
{
    "body": "Changed branch from **[u/niles/ticket/12212](https://github.com/sagemath/sagetrac-mirror/tree/u/niles/ticket/12212)** to **[u/chapoton/12212](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/12212)**",
    "created_at": "2015-01-07T18:54:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131706",
    "user": "https://github.com/fchapoton"
}
```

Changed branch from **[u/niles/ticket/12212](https://github.com/sagemath/sagetrac-mirror/tree/u/niles/ticket/12212)** to **[u/chapoton/12212](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/12212)**



---

archive/issue_comments_131707.json:
```json
{
    "body": "<div id=\"comment:112\" align=\"right\">comment:112</div>\n\nOk, bad news and good news..\n\nGood news, the canvas plotting works and the tachyon plotting works\n\nBad news, the jmol plotting does not recognize the colors (but it works and stays blue)\n\nI have pulled the latest sagenb from git, and it works very badly : I cannot evaluate cells..\n\nI must say that picture of [comment:51](#comment%3A51) was send to me by the man from jmol. I have never myself seen jmol running with this kind of color mesh.",
    "created_at": "2015-01-07T19:26:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131707",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:112" align="right">comment:112</div>

Ok, bad news and good news..

Good news, the canvas plotting works and the tachyon plotting works

Bad news, the jmol plotting does not recognize the colors (but it works and stays blue)

I have pulled the latest sagenb from git, and it works very badly : I cannot evaluate cells..

I must say that picture of [comment:51](#comment%3A51) was send to me by the man from jmol. I have never myself seen jmol running with this kind of color mesh.



---

archive/issue_comments_131708.json:
```json
{
    "body": "<div id=\"comment:113\" align=\"right\">comment:113</div>\n\n> Good news, the canvas plotting works and the tachyon plotting works\n\nYay!\n> Bad news, the jmol plotting does not recognize the colors (but it works and stays blue)\n\nHuh, what command did you use precisely?\n> I have pulled the latest sagenb from git, and it works very badly : I cannot evaluate cells..\n\nProbably you need to delete your cache; you may still not have the latest jQuery, that is usually what caused this various times for people using the develop stuff.\n> I must say that picture of [comment:51](#comment%3A51) was send to me by the man from jmol. I have never myself seen jmol running with this kind of color mesh.\n\nPerhaps another well-placed email to ask if there is anything else we need to know would not be amiss...",
    "created_at": "2015-01-07T19:35:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131708",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:113" align="right">comment:113</div>

> Good news, the canvas plotting works and the tachyon plotting works

Yay!
> Bad news, the jmol plotting does not recognize the colors (but it works and stays blue)

Huh, what command did you use precisely?
> I have pulled the latest sagenb from git, and it works very badly : I cannot evaluate cells..

Probably you need to delete your cache; you may still not have the latest jQuery, that is usually what caused this various times for people using the develop stuff.
> I must say that picture of [comment:51](#comment%3A51) was send to me by the man from jmol. I have never myself seen jmol running with this kind of color mesh.

Perhaps another well-placed email to ask if there is anything else we need to know would not be amiss...



---

archive/issue_comments_131709.json:
```json
{
    "body": "<div id=\"comment:114\" align=\"right\">comment:114</div>\n\nIt also occurs to me that if jmol ended up working, we would need to amend this branch anyway, because there are several references to how jmol does *not* work!  If we can resolve it within a week I say let's do so, otherwise I think it's better to have this in with the various warnings against using jmol BUT working hard at resolving that, since most people would be using that.",
    "created_at": "2015-01-07T20:03:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131709",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:114" align="right">comment:114</div>

It also occurs to me that if jmol ended up working, we would need to amend this branch anyway, because there are several references to how jmol does *not* work!  If we can resolve it within a week I say let's do so, otherwise I think it's better to have this in with the various warnings against using jmol BUT working hard at resolving that, since most people would be using that.



---

archive/issue_comments_131710.json:
```json
{
    "body": "<div id=\"comment:115\" align=\"right\">comment:115</div>\n\nOkay, jmol does indeed 'work' (though without the colormap) in command line and notebook, though the Tachyon pic is the static piece in the notebook, I think. \n\n```\nsage: from sage.plot.plot3d.parametric_surface import ParametricSurface\nsage: cm = colormaps.autumn\nsage: def c(x,y): return sin(x*y)**2\nsage: def g(x,y): return x, y, x**2 + y**2\nsage: P1 = ParametricSurface(g, (srange(-10,10,0.1), srange(-5,5.0,0.1)),color=(c,cm))\nsage: P1.show() \n```\nHowever,\n\n```\nsage: sage: var('x,y,z')\n(x, y, z)\nsage: t = (sin(2*y+3*z)**2).function(x,y,z)\nsage: cm = colormaps.gist_rainbow\nsage: sage: implicit_plot3d(x^2+y^2+z^2==4, (x, -3, 3), (y, -3,3), (z, -3,3), color=(t,cm))\n```\ndoesn't.  Given that this is supposed to work with Tachyon, it should presumably at least fail gracefully for Jmol.  Is this maybe a difference between parametric and implicit plotting?",
    "created_at": "2015-01-07T20:10:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131710",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:115" align="right">comment:115</div>

Okay, jmol does indeed 'work' (though without the colormap) in command line and notebook, though the Tachyon pic is the static piece in the notebook, I think. 

```
sage: from sage.plot.plot3d.parametric_surface import ParametricSurface
sage: cm = colormaps.autumn
sage: def c(x,y): return sin(x*y)**2
sage: def g(x,y): return x, y, x**2 + y**2
sage: P1 = ParametricSurface(g, (srange(-10,10,0.1), srange(-5,5.0,0.1)),color=(c,cm))
sage: P1.show() 
```
However,

```
sage: sage: var('x,y,z')
(x, y, z)
sage: t = (sin(2*y+3*z)**2).function(x,y,z)
sage: cm = colormaps.gist_rainbow
sage: sage: implicit_plot3d(x^2+y^2+z^2==4, (x, -3, 3), (y, -3,3), (z, -3,3), color=(t,cm))
```
doesn't.  Given that this is supposed to work with Tachyon, it should presumably at least fail gracefully for Jmol.  Is this maybe a difference between parametric and implicit plotting?



---

archive/issue_comments_131711.json:
```json
{
    "body": "Attachment: **[nice_shell-obj_1.pmesh.gz](https://github.com/sagemath/sage/files/ticket12212/nice_shell-obj_1.pmesh.gz)**\n\na jmol colored filed",
    "created_at": "2015-01-07T20:42:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131711",
    "user": "https://github.com/fchapoton"
}
```

Attachment: **[nice_shell-obj_1.pmesh.gz](https://github.com/sagemath/sage/files/ticket12212/nice_shell-obj_1.pmesh.gz)**

a jmol colored filed



---

archive/issue_comments_131712.json:
```json
{
    "body": "<div id=\"comment:116\" align=\"right\">comment:116</div>\n\nI have attached a pmesh file (in the format produced by sage) that is supposed to work. Trying using the console in jmol:\n\npmesh \"/home/chapoton/nice_shell-obj_1.pmesh\" fullylit\n\nthis seems to load, but does not show anything",
    "created_at": "2015-01-07T20:45:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131712",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:116" align="right">comment:116</div>

I have attached a pmesh file (in the format produced by sage) that is supposed to work. Trying using the console in jmol:

pmesh "/home/chapoton/nice_shell-obj_1.pmesh" fullylit

this seems to load, but does not show anything



---

archive/issue_comments_131713.json:
```json
{
    "body": "<div id=\"comment:117\" align=\"right\">comment:117</div>\n\nThe script file we send to jmol contains a suspect line\n\n```\ncolor pmesh  [102,102,255]\n```\nwhich probably turns everything blue..",
    "created_at": "2015-01-07T21:10:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131713",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:117" align="right">comment:117</div>

The script file we send to jmol contains a suspect line

```
color pmesh  [102,102,255]
```
which probably turns everything blue..



---

archive/issue_comments_131714.json:
```json
{
    "body": "<div id=\"comment:118\" align=\"right\">comment:118</div>\n\nI got essentially what is shown in comment 51 (it may be inside out) from `nice_shell-obj_1.pmesh`.  I just did a simple pmesh \"path_to_file\" command in the Jmol 14.2.7 console to get this. I verified that it also works with JSmol-14.2.7 inside of sage by uploading the pmesh as a data file and then issuing the command `pmesh \"/home/<user_name>/<worksheet_number>/data/nice_shell-obj_1.pmesh\"` in the console of a running JSmol.  I also had to issue a `pmesh fullylit` command after the load to get the outside of the shell bright.\n\nThus this should work right if the commands generated to load the pmesh are correct.  The issue is with the .jmol script file being generated.",
    "created_at": "2015-01-08T02:23:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131714",
    "user": "https://github.com/gutow"
}
```

<div id="comment:118" align="right">comment:118</div>

I got essentially what is shown in comment 51 (it may be inside out) from `nice_shell-obj_1.pmesh`.  I just did a simple pmesh "path_to_file" command in the Jmol 14.2.7 console to get this. I verified that it also works with JSmol-14.2.7 inside of sage by uploading the pmesh as a data file and then issuing the command `pmesh "/home/<user_name>/<worksheet_number>/data/nice_shell-obj_1.pmesh"` in the console of a running JSmol.  I also had to issue a `pmesh fullylit` command after the load to get the outside of the shell bright.

Thus this should work right if the commands generated to load the pmesh are correct.  The issue is with the .jmol script file being generated.



---

archive/issue_comments_131715.json:
```json
{
    "body": "<div id=\"comment:119\" align=\"right\">comment:119</div>\n\nNow you are all beyond my own expertise, but it sounds like things are on the right track, so I'll test this as an \"independent\" observer as soon as this is solved.\n\nBy the way, any ideas on why my implicit plot in [comment:115](#comment%3A115) doesn't work (in jmol, I mean)?",
    "created_at": "2015-01-08T02:29:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131715",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:119" align="right">comment:119</div>

Now you are all beyond my own expertise, but it sounds like things are on the right track, so I'll test this as an "independent" observer as soon as this is solved.

By the way, any ideas on why my implicit plot in [comment:115](#comment%3A115) doesn't work (in jmol, I mean)?



---

archive/issue_comments_131716.json:
```json
{
    "body": "<div id=\"comment:120\" align=\"right\">comment:120</div>\n\nI think the problem is that your path is wrong.  JSmol because it is inside the browser is limited to pmesh commands that request things through the server.  See my comment 118.  There is a load from local file feature in the popup menu, but that cannot identify the type of the text pmesh file.\nReplying to [@fchapoton](#comment%3A116):\n> I have attached a pmesh file (in the format produced by sage) that is supposed to work. Trying using the console in jmol:\n> \n> pmesh \"/home/chapoton/nice_shell-obj_1.pmesh\" fullylit\n> \n> this seems to load, but does not show anything",
    "created_at": "2015-01-08T02:51:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131716",
    "user": "https://github.com/gutow"
}
```

<div id="comment:120" align="right">comment:120</div>

I think the problem is that your path is wrong.  JSmol because it is inside the browser is limited to pmesh commands that request things through the server.  See my comment 118.  There is a load from local file feature in the popup menu, but that cannot identify the type of the text pmesh file.
Replying to [@fchapoton](#comment%3A116):
> I have attached a pmesh file (in the format produced by sage) that is supposed to work. Trying using the console in jmol:
> 
> pmesh "/home/chapoton/nice_shell-obj_1.pmesh" fullylit
> 
> this seems to load, but does not show anything



---

archive/issue_comments_131717.json:
```json
{
    "body": "<div id=\"comment:121\" align=\"right\">comment:121</div>\n\nReplying to [@kcrisman](#comment%3A119):\n> By the way, any ideas on why my implicit plot in [comment:115](#comment%3A115) doesn't work (in jmol, I mean)?\n\nIs it related to `^` vs. `**`?  In sage-6.4 I keep getting errors when I use the first form for exponentiation.",
    "created_at": "2015-01-08T03:46:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131717",
    "user": "https://github.com/gutow"
}
```

<div id="comment:121" align="right">comment:121</div>

Replying to [@kcrisman](#comment%3A119):
> By the way, any ideas on why my implicit plot in [comment:115](#comment%3A115) doesn't work (in jmol, I mean)?

Is it related to `^` vs. `**`?  In sage-6.4 I keep getting errors when I use the first form for exponentiation.



---

archive/issue_comments_131718.json:
```json
{
    "body": "<div id=\"comment:122\" align=\"right\">comment:122</div>\n\n> Is it related to `^` vs. `**`?  In sage-6.4 I keep getting errors when I use the first form for exponentiation.\n\n???  That would be a huge bug (and one that should in principle be caught hundreds of times in the test suite).  In any case, that example works with Tachyon and doesn't raise an error in jmol (just gives a blank white jmol), so that is not the issue.",
    "created_at": "2015-01-08T03:57:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131718",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:122" align="right">comment:122</div>

> Is it related to `^` vs. `**`?  In sage-6.4 I keep getting errors when I use the first form for exponentiation.

???  That would be a huge bug (and one that should in principle be caught hundreds of times in the test suite).  In any case, that example works with Tachyon and doesn't raise an error in jmol (just gives a blank white jmol), so that is not the issue.



---

archive/issue_comments_131719.json:
```json
{
    "body": "Changed commit from **[`d6d60ed`](https://github.com/sagemath/sagetrac-mirror/commit/d6d60edfcd4524d882e14b5cd4f97b26a79e28d6)** to **[`3ac721d`](https://github.com/sagemath/sagetrac-mirror/commit/3ac721d126fee2e7704b6db62e5152afbf49a19c)**",
    "created_at": "2015-01-08T07:11:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131719",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d6d60ed`](https://github.com/sagemath/sagetrac-mirror/commit/d6d60edfcd4524d882e14b5cd4f97b26a79e28d6)** to **[`3ac721d`](https://github.com/sagemath/sagetrac-mirror/commit/3ac721d126fee2e7704b6db62e5152afbf49a19c)**



---

archive/issue_comments_131720.json:
```json
{
    "body": "<div id=\"comment:123\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3ac721d126fee2e7704b6db62e5152afbf49a19c\"><code>3ac721d</code></a></td><td><code>trac #12212 let jmol show the colors at last</code></td></tr></table>\n",
    "created_at": "2015-01-08T07:11:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131720",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:123"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3ac721d126fee2e7704b6db62e5152afbf49a19c"><code>3ac721d</code></a></td><td><code>trac #12212 let jmol show the colors at last</code></td></tr></table>




---

archive/issue_comments_131721.json:
```json
{
    "body": "<div id=\"comment:124\" align=\"right\">comment:124</div>\n\nProgress: I have been able to see Jmol showing the color for a parametric plot.\n\nImplicit plot still not working (sigh).",
    "created_at": "2015-01-08T07:13:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131721",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:124" align="right">comment:124</div>

Progress: I have been able to see Jmol showing the color for a parametric plot.

Implicit plot still not working (sigh).



---

archive/issue_comments_131722.json:
```json
{
    "body": "<div id=\"comment:125\" align=\"right\">comment:125</div>\n\nI can confirm this works!  Almost there...",
    "created_at": "2015-01-08T13:35:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131722",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:125" align="right">comment:125</div>

I can confirm this works!  Almost there...



---

archive/issue_comments_131723.json:
```json
{
    "body": "<div id=\"comment:126\" align=\"right\">comment:126</div>\n\nDoes this one works for you in jmol ? It works for me !\n\n```\nsage: t = (1-sin(2*x*y+3*z)**2).function(x,y,z)\nsage: cm = colormaps.autumn\nsage: G = ImplicitSurface(x^2 + y^2 + z^2, (x,-2, 2), (y,-2, 2), (z,-2, 2), contour=4, color=(t,cm))\nsage: G.show()\n```\n\nBut fails with `cm = colormaps.terrain`\n\nAnd your example of [comment:115](#comment%3A115) works with `colormaps.YlOrBr`\n\nSo this could be a problem with color ranges.. Maybe for colors not fitting in int ?\n\nBut the \"bad\" colormaps work for parametric surfaces..",
    "created_at": "2015-01-08T20:08:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131723",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:126" align="right">comment:126</div>

Does this one works for you in jmol ? It works for me !

```
sage: t = (1-sin(2*x*y+3*z)**2).function(x,y,z)
sage: cm = colormaps.autumn
sage: G = ImplicitSurface(x^2 + y^2 + z^2, (x,-2, 2), (y,-2, 2), (z,-2, 2), contour=4, color=(t,cm))
sage: G.show()
```

But fails with `cm = colormaps.terrain`

And your example of [comment:115](#comment%3A115) works with `colormaps.YlOrBr`

So this could be a problem with color ranges.. Maybe for colors not fitting in int ?

But the "bad" colormaps work for parametric surfaces..



---

archive/issue_comments_131724.json:
```json
{
    "body": "<div id=\"comment:127\" align=\"right\">comment:127</div>\n\nNice.  Weird that some colormaps work and others don't.  I wonder if some categories in the [list of mpl colormaps](http://matplotlib.org/examples/color/colormaps_reference.html) work and others don't.  Anyway, that is very good news.",
    "created_at": "2015-01-08T20:17:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131724",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:127" align="right">comment:127</div>

Nice.  Weird that some colormaps work and others don't.  I wonder if some categories in the [list of mpl colormaps](http://matplotlib.org/examples/color/colormaps_reference.html) work and others don't.  Anyway, that is very good news.



---

archive/issue_comments_131725.json:
```json
{
    "body": "<div id=\"comment:128\" align=\"right\">comment:128</div>\n\n> Maybe for colors not fitting in int ?\n\nSure, or some other issue along those lines (float conversion, who knows what).",
    "created_at": "2015-01-08T20:18:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131725",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:128" align="right">comment:128</div>

> Maybe for colors not fitting in int ?

Sure, or some other issue along those lines (float conversion, who knows what).



---

archive/issue_comments_131726.json:
```json
{
    "body": "<div id=\"comment:129\" align=\"right\">comment:129</div>\n\nOr maybe it's your crazy `t` functions; after all, the colormaps can't color something that is too big/small, right?  What if one uses a different `t`...",
    "created_at": "2015-01-08T20:19:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131726",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:129" align="right">comment:129</div>

Or maybe it's your crazy `t` functions; after all, the colormaps can't color something that is too big/small, right?  What if one uses a different `t`...



---

archive/issue_comments_131727.json:
```json
{
    "body": "<div id=\"comment:130\" align=\"right\">comment:130</div>\n\n> Nice.  Weird that some colormaps work and others don't.  I wonder if some categories in the [list of mpl colormaps](http://matplotlib.org/examples/color/colormaps_reference.html) work and others don't.  Anyway, that is very good news.\n\nI bet it's just the 'Miscellaneous' ones.  The 'Sequential' ones are fine.",
    "created_at": "2015-01-08T20:22:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131727",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:130" align="right">comment:130</div>

> Nice.  Weird that some colormaps work and others don't.  I wonder if some categories in the [list of mpl colormaps](http://matplotlib.org/examples/color/colormaps_reference.html) work and others don't.  Anyway, that is very good news.

I bet it's just the 'Miscellaneous' ones.  The 'Sequential' ones are fine.



---

archive/issue_comments_131728.json:
```json
{
    "body": "<div id=\"comment:131\" align=\"right\">comment:131</div>\n\nIn fact, my semi-random testing indicates that even among those, only a few don't work.  The other categories seem fine. Rather than fix this here (which is likely some unusual function of `t`, implicit surface versus parametric, and who knows what else), I would instead do the following.\n* Amend the doc to remove suggestions jmol doesn't work\n* Add extra examples to show various viewers working (possibly not tested if they rely on the notebook like canvas3d)\n* Add an example warning of a colormap that does *not* work with jmol for whatever reason.\n\nI'll double-check all this works in the notebook next.",
    "created_at": "2015-01-08T20:31:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131728",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:131" align="right">comment:131</div>

In fact, my semi-random testing indicates that even among those, only a few don't work.  The other categories seem fine. Rather than fix this here (which is likely some unusual function of `t`, implicit surface versus parametric, and who knows what else), I would instead do the following.
* Amend the doc to remove suggestions jmol doesn't work
* Add extra examples to show various viewers working (possibly not tested if they rely on the notebook like canvas3d)
* Add an example warning of a colormap that does *not* work with jmol for whatever reason.

I'll double-check all this works in the notebook next.



---

archive/issue_comments_131729.json:
```json
{
    "body": "<div id=\"comment:132\" align=\"right\">comment:132</div>\n\nCompare\n\n```\n\n    cdef apply_color_func(self, color_c *pt, fn, cm, VertexInfo v):\n        t = fn(v.eval_pt.x, v.eval_pt.y, v.eval_pt.z)\n        pt[0].r, pt[0].g, pt[0].b, _ = cm(t)\n```\nand\n\n```\n                if self.color_function is not None:\n                    face.color.r, face.color.g, face.color.b, _ = self.colormap(self.color_function(urange[i], vrange[j]))\n\n\n```\nMaybe the different behaviour comes from here..",
    "created_at": "2015-01-08T20:36:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131729",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:132" align="right">comment:132</div>

Compare

```

    cdef apply_color_func(self, color_c *pt, fn, cm, VertexInfo v):
        t = fn(v.eval_pt.x, v.eval_pt.y, v.eval_pt.z)
        pt[0].r, pt[0].g, pt[0].b, _ = cm(t)
```
and

```
                if self.color_function is not None:
                    face.color.r, face.color.g, face.color.b, _ = self.colormap(self.color_function(urange[i], vrange[j]))


```
Maybe the different behaviour comes from here..



---

archive/issue_comments_131730.json:
```json
{
    "body": "<div id=\"comment:133\" align=\"right\">comment:133</div>\n\n> I'll double-check all this works in the notebook next.\n\nInterestingly, even the ones that give a 'blank' jmol from the command line give a more-or-less black object of the right shape in jsmol.  That is very interesting - one can test it by switching in the notebook from load 3d live or not.\n\nThough also in my testing some that worked in command line turned black in notebook... strange.",
    "created_at": "2015-01-08T20:38:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131730",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:133" align="right">comment:133</div>

> I'll double-check all this works in the notebook next.

Interestingly, even the ones that give a 'blank' jmol from the command line give a more-or-less black object of the right shape in jsmol.  That is very interesting - one can test it by switching in the notebook from load 3d live or not.

Though also in my testing some that worked in command line turned black in notebook... strange.



---

archive/issue_comments_131731.json:
```json
{
    "body": "<div id=\"comment:134\" align=\"right\">comment:134</div>\n\n> Maybe the different behaviour comes from here..\n\nThis confirms my thought that for some choices of colormaps and color evaluation functions the colormaps just don't work right with jmol (too large of values or too close to zero or whatever).   For instance,\n\n```\nvar('x,y,z')\nt = (x+y+z).function(x,y,z)\ncm = colormaps.terrain\nimplicit_plot3d(x^2+y^2+z^2==4, (x, -3, 3), (y, -3,3), (z, -3,3), color=(t,cm))\n```\nworks fine in jsmol and jmol, while with the sin functions you were using it does not.  I think the \"blank\" ones are ones where the values are too close to zero, or something like that.  Switch to\n\n```\ncm = colormaps.flag\n```\nand you will have a big surprise - Tachyon, jmol, and jsmol are all different!",
    "created_at": "2015-01-08T20:48:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131731",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:134" align="right">comment:134</div>

> Maybe the different behaviour comes from here..

This confirms my thought that for some choices of colormaps and color evaluation functions the colormaps just don't work right with jmol (too large of values or too close to zero or whatever).   For instance,

```
var('x,y,z')
t = (x+y+z).function(x,y,z)
cm = colormaps.terrain
implicit_plot3d(x^2+y^2+z^2==4, (x, -3, 3), (y, -3,3), (z, -3,3), color=(t,cm))
```
works fine in jsmol and jmol, while with the sin functions you were using it does not.  I think the "blank" ones are ones where the values are too close to zero, or something like that.  Switch to

```
cm = colormaps.flag
```
and you will have a big surprise - Tachyon, jmol, and jsmol are all different!



---

archive/issue_comments_131732.json:
```json
{
    "body": "<div id=\"comment:135\" align=\"right\">comment:135</div>\n\nNevertheless, as long as we warn against certain colormaps and so forth (see [comment:131](#comment%3A131)) I think this should be added.\n\nNiles, do you have any particular comments beyond this?  Thanks for helping us figure out where to go from here.",
    "created_at": "2015-01-08T21:31:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131732",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:135" align="right">comment:135</div>

Nevertheless, as long as we warn against certain colormaps and so forth (see [comment:131](#comment%3A131)) I think this should be added.

Niles, do you have any particular comments beyond this?  Thanks for helping us figure out where to go from here.



---

archive/issue_events_164368.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2015-01-08T21:31:51Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12212#event-164368"
}
```



---

archive/issue_events_164369.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2015-01-08T21:31:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "milestone_number": null,
    "milestone_title": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12212#event-164369"
}
```



---

archive/issue_comments_131733.json:
```json
{
    "body": "Changed reviewer from **Fr\u00e9d\u00e9ric Chapoton, Niles Johnson** to **Fr\u00e9d\u00e9ric Chapoton, Niles Johnson, Karl-Dieter Crisman, Jonathan Gutow**",
    "created_at": "2015-01-08T21:31:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131733",
    "user": "https://github.com/kcrisman"
}
```

Changed reviewer from **Frédéric Chapoton, Niles Johnson** to **Frédéric Chapoton, Niles Johnson, Karl-Dieter Crisman, Jonathan Gutow**



---

archive/issue_comments_131734.json:
```json
{
    "body": "Work Issues: **update documentation and examples**",
    "created_at": "2015-01-08T21:31:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131734",
    "user": "https://github.com/kcrisman"
}
```

Work Issues: **update documentation and examples**



---

archive/issue_comments_131735.json:
```json
{
    "body": "<div id=\"comment:136\" align=\"right\">comment:136</div>\n\nReplying to [@kcrisman](#comment%3A135):\n> Nevertheless, as long as we warn against certain colormaps and so forth (see [comment:131](#comment%3A131)) I think this should be added.\n> \n> Niles, do you have any particular comments beyond this?  Thanks for helping us figure out where to go from here.\n\nGlad to see the progress!  My window of time to work on this has closed.  In general I am nervous about putting something in that sometimes works and sometimes doesn't for reasons we don't understand.  If not done very carefully, this could make the plotting code look really unprofessional.  Hopefully you guys will sort out where the bugs are.",
    "created_at": "2015-01-09T16:01:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131735",
    "user": "https://github.com/nilesjohnson"
}
```

<div id="comment:136" align="right">comment:136</div>

Replying to [@kcrisman](#comment%3A135):
> Nevertheless, as long as we warn against certain colormaps and so forth (see [comment:131](#comment%3A131)) I think this should be added.
> 
> Niles, do you have any particular comments beyond this?  Thanks for helping us figure out where to go from here.

Glad to see the progress!  My window of time to work on this has closed.  In general I am nervous about putting something in that sometimes works and sometimes doesn't for reasons we don't understand.  If not done very carefully, this could make the plotting code look really unprofessional.  Hopefully you guys will sort out where the bugs are.



---

archive/issue_comments_131736.json:
```json
{
    "body": "<div id=\"comment:137\" align=\"right\">comment:137</div>\n\nLittle progress.\n\nThe problem appears using only the pmesh files and not the script. So the problem is in the pmesh files.\n\n1) it seems that Jmol does not like the color 0 at all. Replacing 0 by 1 enhances things a little bit. This is a symptomatic cure of only part of the problem.\n\n2) but the example of [comment:115](#comment%3A115) still does not work\n\nI suspect that there could be some problem inside Jmol about the treatment of colored pmesh. It may be difficult to investigate without close contact with the Jmol team.\n\nHere is a new simple testing case\n\n```\nvar('x,y,z')\nt = z.function(x,y,z)\ncm = colormaps.flag\nP = implicit_plot3d(z-x*x-y*y,(x,-2,2),(y,-2,2),(z,-1,4),color=(t,cm))\n```\nWas not working with Jmol\nNow works correctly with Jmol\nProduces spectacular unexpected special effects with Jsmol",
    "created_at": "2015-01-09T20:54:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131736",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:137" align="right">comment:137</div>

Little progress.

The problem appears using only the pmesh files and not the script. So the problem is in the pmesh files.

1) it seems that Jmol does not like the color 0 at all. Replacing 0 by 1 enhances things a little bit. This is a symptomatic cure of only part of the problem.

2) but the example of [comment:115](#comment%3A115) still does not work

I suspect that there could be some problem inside Jmol about the treatment of colored pmesh. It may be difficult to investigate without close contact with the Jmol team.

Here is a new simple testing case

```
var('x,y,z')
t = z.function(x,y,z)
cm = colormaps.flag
P = implicit_plot3d(z-x*x-y*y,(x,-2,2),(y,-2,2),(z,-1,4),color=(t,cm))
```
Was not working with Jmol
Now works correctly with Jmol
Produces spectacular unexpected special effects with Jsmol



---

archive/issue_comments_131737.json:
```json
{
    "body": "<div id=\"comment:138\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e88ee7823deecf234111cd60af98d1cc75f175b0\"><code>e88ee78</code></a></td><td><code>trac #12212 various things</code></td></tr></table>\n",
    "created_at": "2015-01-09T20:55:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131737",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:138"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e88ee7823deecf234111cd60af98d1cc75f175b0"><code>e88ee78</code></a></td><td><code>trac #12212 various things</code></td></tr></table>




---

archive/issue_comments_131738.json:
```json
{
    "body": "Changed commit from **[`3ac721d`](https://github.com/sagemath/sagetrac-mirror/commit/3ac721d126fee2e7704b6db62e5152afbf49a19c)** to **[`e88ee78`](https://github.com/sagemath/sagetrac-mirror/commit/e88ee7823deecf234111cd60af98d1cc75f175b0)**",
    "created_at": "2015-01-09T20:55:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131738",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3ac721d`](https://github.com/sagemath/sagetrac-mirror/commit/3ac721d126fee2e7704b6db62e5152afbf49a19c)** to **[`e88ee78`](https://github.com/sagemath/sagetrac-mirror/commit/e88ee7823deecf234111cd60af98d1cc75f175b0)**



---

archive/issue_comments_131739.json:
```json
{
    "body": "<div id=\"comment:139\" align=\"right\">comment:139</div>\n\nI suspect something bad happening when one of the color numbers coincide with a vertex number. Definitely not something inside sage..",
    "created_at": "2015-01-09T20:58:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131739",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:139" align="right">comment:139</div>

I suspect something bad happening when one of the color numbers coincide with a vertex number. Definitely not something inside sage..



---

archive/issue_comments_131740.json:
```json
{
    "body": "<div id=\"comment:140\" align=\"right\">comment:140</div>\n\nThanks for the progress!  \n* There should probably be one (working) example each without a viewer option.\n* Do we need the colormap warning info in the parametric plot, or just implicit?  Maybe we just have gotten lucky with the parametric ones so far because they didn't have a color close to zero.\n* Probably the warning thing should follow the warning block syntax [here](http://www.sagemath.org/doc/developer/coding_basics.html#docstring-markup-with-rest-and-sphinx).",
    "created_at": "2015-01-09T20:59:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131740",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:140" align="right">comment:140</div>

Thanks for the progress!  
* There should probably be one (working) example each without a viewer option.
* Do we need the colormap warning info in the parametric plot, or just implicit?  Maybe we just have gotten lucky with the parametric ones so far because they didn't have a color close to zero.
* Probably the warning thing should follow the warning block syntax [here](http://www.sagemath.org/doc/developer/coding_basics.html#docstring-markup-with-rest-and-sphinx).



---

archive/issue_comments_131741.json:
```json
{
    "body": "Changed commit from **[`e88ee78`](https://github.com/sagemath/sagetrac-mirror/commit/e88ee7823deecf234111cd60af98d1cc75f175b0)** to **[`669d270`](https://github.com/sagemath/sagetrac-mirror/commit/669d270b343da222aa68fcf40147c7cb6d0ad5c8)**",
    "created_at": "2015-01-09T21:48:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131741",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e88ee78`](https://github.com/sagemath/sagetrac-mirror/commit/e88ee7823deecf234111cd60af98d1cc75f175b0)** to **[`669d270`](https://github.com/sagemath/sagetrac-mirror/commit/669d270b343da222aa68fcf40147c7cb6d0ad5c8)**



---

archive/issue_comments_131742.json:
```json
{
    "body": "<div id=\"comment:141\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/669d270b343da222aa68fcf40147c7cb6d0ad5c8\"><code>669d270</code></a></td><td><code>trac #12212 doc changes, some examples with show</code></td></tr></table>\n",
    "created_at": "2015-01-09T21:48:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131742",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:141"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/669d270b343da222aa68fcf40147c7cb6d0ad5c8"><code>669d270</code></a></td><td><code>trac #12212 doc changes, some examples with show</code></td></tr></table>




---

archive/issue_comments_131743.json:
```json
{
    "body": "<div id=\"comment:142\" align=\"right\">comment:142</div>\n\n>  My window of time to work on this has closed.\n\nYes, mine really should have as well... thanks for the help!\n> In general I am nervous about putting something in that sometimes works and sometimes doesn't for reasons we don't understand. If not done very carefully, this could make the plotting code look really unprofessional. \n\nWell, I guess.  My feeling is that the warning and the fact that not too many colormaps are bad is okay.  Though I think it does need a bit more testing in the jsmol, which seems to be the most annoying.  If I'm lucky I can even make a list of \"bad\" colormaps.\n> Hopefully you guys will sort out where the bugs are.\n\nIt's pretty clear they are in jmol somewhere, since the other viewers work very nicely.",
    "created_at": "2015-01-09T22:08:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131743",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:142" align="right">comment:142</div>

>  My window of time to work on this has closed.

Yes, mine really should have as well... thanks for the help!
> In general I am nervous about putting something in that sometimes works and sometimes doesn't for reasons we don't understand. If not done very carefully, this could make the plotting code look really unprofessional. 

Well, I guess.  My feeling is that the warning and the fact that not too many colormaps are bad is okay.  Though I think it does need a bit more testing in the jsmol, which seems to be the most annoying.  If I'm lucky I can even make a list of "bad" colormaps.
> Hopefully you guys will sort out where the bugs are.

It's pretty clear they are in jmol somewhere, since the other viewers work very nicely.



---

archive/issue_comments_131744.json:
```json
{
    "body": "<div id=\"comment:143\" align=\"right\">comment:143</div>\n\nSorry, the warning needs to be in `parametric_surface.pyx` too, and changed since jmol is sort of working.\n\nIn that file, you say\n> Note that the coloring function should have values between 0 and 1. This value is passed to the chosen colormap.\n\nIs that maybe the problem we are having?  What happens with values outside that - is it done 'modulo 1' or something else?\n\nIn implicit_plot I would put the examples of this in the example section, maybe after the `smooth=True` example.\n\nIn parametric plot 3d the examples need to be dealt with anyway, and the indentation is not right when you view it.\n\n```\n    EXAMPLES: We demonstrate each of the four ways to call this\n    function.\n\n\n    #. A space curve defined by three functions of 1 variable:\n\n       ::\n\n           sage: parametric_plot3d( (sin, cos, lambda u: u/10), (0, 20))\n           Graphics3d Object\n\n       Note above the lambda function, which creates a callable Python\n       function that sends `u` to `u/10`.\n\n    #. Next we draw the same plot as above, but using symbolic\n       functions:\n\n       ::\n\n           sage: u = var('u')\n           sage: parametric_plot3d( (sin(u), cos(u), u/10), (u, 0, 20))\n           Graphics3d Object\n\n    #. We draw a parametric surface using 3 Python functions (defined\n       using lambda):\n\n       ::\n\n           sage: f = (lambda u,v: cos(u), lambda u,v: sin(u)+cos(v), lambda u,v: sin(v))\n           sage: parametric_plot3d(f, (0, 2*pi), (-pi, pi))\n           Graphics3d Object\n\n```\nup to here is fine, but \n\n```\n    #. The surface, but with a mesh:\n\n       ::\n\n           sage: u, v = var('u,v')\n           sage: parametric_plot3d((cos(u), sin(u) + cos(v), sin(v)), (u, 0, 2*pi), (v, -pi, pi), mesh=True)\n           Graphics3d Object\n```\nshould just be an example later.  This one is the true \"fourth way to call the function\".\n\n```\n\n    #. The same surface, but where the defining functions are\n       symbolic:\n\n       ::\n\n           sage: u, v = var('u,v')\n           sage: parametric_plot3d((cos(u), sin(u) + cos(v), sin(v)), (u, 0, 2*pi), (v, -pi, pi))\n           Graphics3d Object\n```\nEverything after that is indented too far, up until\n\n```\n    We call the space curve function but with polynomials instead of\n    symbolic variables.\n```\nincluding all the added examples.",
    "created_at": "2015-01-10T02:38:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131744",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:143" align="right">comment:143</div>

Sorry, the warning needs to be in `parametric_surface.pyx` too, and changed since jmol is sort of working.

In that file, you say
> Note that the coloring function should have values between 0 and 1. This value is passed to the chosen colormap.

Is that maybe the problem we are having?  What happens with values outside that - is it done 'modulo 1' or something else?

In implicit_plot I would put the examples of this in the example section, maybe after the `smooth=True` example.

In parametric plot 3d the examples need to be dealt with anyway, and the indentation is not right when you view it.

```
    EXAMPLES: We demonstrate each of the four ways to call this
    function.


    #. A space curve defined by three functions of 1 variable:

       ::

           sage: parametric_plot3d( (sin, cos, lambda u: u/10), (0, 20))
           Graphics3d Object

       Note above the lambda function, which creates a callable Python
       function that sends `u` to `u/10`.

    #. Next we draw the same plot as above, but using symbolic
       functions:

       ::

           sage: u = var('u')
           sage: parametric_plot3d( (sin(u), cos(u), u/10), (u, 0, 20))
           Graphics3d Object

    #. We draw a parametric surface using 3 Python functions (defined
       using lambda):

       ::

           sage: f = (lambda u,v: cos(u), lambda u,v: sin(u)+cos(v), lambda u,v: sin(v))
           sage: parametric_plot3d(f, (0, 2*pi), (-pi, pi))
           Graphics3d Object

```
up to here is fine, but 

```
    #. The surface, but with a mesh:

       ::

           sage: u, v = var('u,v')
           sage: parametric_plot3d((cos(u), sin(u) + cos(v), sin(v)), (u, 0, 2*pi), (v, -pi, pi), mesh=True)
           Graphics3d Object
```
should just be an example later.  This one is the true "fourth way to call the function".

```

    #. The same surface, but where the defining functions are
       symbolic:

       ::

           sage: u, v = var('u,v')
           sage: parametric_plot3d((cos(u), sin(u) + cos(v), sin(v)), (u, 0, 2*pi), (v, -pi, pi))
           Graphics3d Object
```
Everything after that is indented too far, up until

```
    We call the space curve function but with polynomials instead of
    symbolic variables.
```
including all the added examples.



---

archive/issue_comments_131745.json:
```json
{
    "body": "<div id=\"comment:144\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/be9d2a587dc3d7bfcb9c9e19689e8fa2feec104b\"><code>be9d2a5</code></a></td><td><code>trac #12212 twists in the doc</code></td></tr></table>\n",
    "created_at": "2015-01-10T09:19:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131745",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:144"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/be9d2a587dc3d7bfcb9c9e19689e8fa2feec104b"><code>be9d2a5</code></a></td><td><code>trac #12212 twists in the doc</code></td></tr></table>




---

archive/issue_comments_131746.json:
```json
{
    "body": "Changed commit from **[`669d270`](https://github.com/sagemath/sagetrac-mirror/commit/669d270b343da222aa68fcf40147c7cb6d0ad5c8)** to **[`be9d2a5`](https://github.com/sagemath/sagetrac-mirror/commit/be9d2a587dc3d7bfcb9c9e19689e8fa2feec104b)**",
    "created_at": "2015-01-10T09:19:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131746",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`669d270`](https://github.com/sagemath/sagetrac-mirror/commit/669d270b343da222aa68fcf40147c7cb6d0ad5c8)** to **[`be9d2a5`](https://github.com/sagemath/sagetrac-mirror/commit/be9d2a587dc3d7bfcb9c9e19689e8fa2feec104b)**



---

archive/issue_comments_131747.json:
```json
{
    "body": "<div id=\"comment:145\" align=\"right\">comment:145</div>\n\nI have done the following:\n\n- take a failing example of pmesh file\n\n- replace all the colors by a fixed one using a text editor\n\nand then it worked.\n\nI think that our color numbers are valid (between 0 and `2**24`)\n\nSo it seems that the import process of jmol is broken somewhere. I have contacted upstream on the subject.",
    "created_at": "2015-01-10T14:38:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131747",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:145" align="right">comment:145</div>

I have done the following:

- take a failing example of pmesh file

- replace all the colors by a fixed one using a text editor

and then it worked.

I think that our color numbers are valid (between 0 and `2**24`)

So it seems that the import process of jmol is broken somewhere. I have contacted upstream on the subject.



---

archive/issue_comments_131748.json:
```json
{
    "body": "<div id=\"comment:146\" align=\"right\">comment:146</div>\n\nTry this.\n\n```\nvar('x,y,z')\nt = sin(z).function(x,y,z)\n@interact\ndef _(cm = [colormaps[c] for c in colormaps],v = ['jmol','tachyon']):\n    show(implicit_plot3d(z-x*x-y*y,(x,-2,2),(y,-2,2),(z,-1,4),color=(t,cm),viewer=v))\n```\n(Could be slow.)\n\nI don't know if I like having a switch to 1, though, as most of the colormaps seem to mostly care about 0 to 1 or -1 to 1 as color values.   (Switch the function about to `z` instead of `sin(z)` to see this.)  That could be a somewhat bizarre change.  What if you switched it from 0 to 0.01 or something like that?\n\nFor instance,\n\n```\nvar('x,y,z')\nt = SR(0).function(x,y,z)\nimplicit_plot3d(z-x*x-y*y,(x,-2,2),(y,-2,2),(z,-1,4),color=(t,colormaps.terrain)) # or flag or whatever\n```\nthis seems to work fine.  Changing to `SR(1)` gives quite a different color!  So I would recommend not putting in that bit where you check for the `0` color - especially since the other viewers work fine!  No need to mess them up.\n\nAnyway, as far as I'm concerned the fault here clearly lies with jmol or jsmol, and is not so horrible as to keep us from putting this in.",
    "created_at": "2015-01-11T03:55:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131748",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:146" align="right">comment:146</div>

Try this.

```
var('x,y,z')
t = sin(z).function(x,y,z)
@interact
def _(cm = [colormaps[c] for c in colormaps],v = ['jmol','tachyon']):
    show(implicit_plot3d(z-x*x-y*y,(x,-2,2),(y,-2,2),(z,-1,4),color=(t,cm),viewer=v))
```
(Could be slow.)

I don't know if I like having a switch to 1, though, as most of the colormaps seem to mostly care about 0 to 1 or -1 to 1 as color values.   (Switch the function about to `z` instead of `sin(z)` to see this.)  That could be a somewhat bizarre change.  What if you switched it from 0 to 0.01 or something like that?

For instance,

```
var('x,y,z')
t = SR(0).function(x,y,z)
implicit_plot3d(z-x*x-y*y,(x,-2,2),(y,-2,2),(z,-1,4),color=(t,colormaps.terrain)) # or flag or whatever
```
this seems to work fine.  Changing to `SR(1)` gives quite a different color!  So I would recommend not putting in that bit where you check for the `0` color - especially since the other viewers work fine!  No need to mess them up.

Anyway, as far as I'm concerned the fault here clearly lies with jmol or jsmol, and is not so horrible as to keep us from putting this in.



---

archive/issue_comments_131749.json:
```json
{
    "body": "<div id=\"comment:147\" align=\"right\">comment:147</div>\n\nThanks for the interactive. Here is a slightly modified version, with canvas3D and colormap names\n\n```\nvar('x,y,z')\nt = sin(z).function(x,y,z)\n@interact\ndef _(cm=[colormaps[c].name for c in colormaps], v=['jmol', 'tachyon', 'canvas3d']):\n     show(implicit_plot3d(z-x*x-y*y,(x,-2,2),(y,-2,2),(z,-1,4),color=(t,colormaps[cm]),viewer=v))\n```\nOne can note the canvas3d does not have the same viewpoint. One can also not that the colors do not look quite the same between the viewers. Maybe a difference in global lighting ?\n\nConcerning setting the color 0 to 1 : it happens inside a jmol specific function, and after the color has been turned into an integer between `0` and `2**24`. So changing 0 to 1 here does not affect at all the other viewers, and should only change total black into almost total black, so should not have any visible effect on jmol output (except making it work slightly more often).\n\nI am also not quite satisfied with this buggy behaviour, but something is better than nothing. Nevertheless it could still be that the problem is in our dialog with jmol and not in jmol itself : are we coding the colors correctly ? I thought so, but maybe this needs to be checked. I have tried to navigate the jmol code, but did not manage to find something useful about color encoding.",
    "created_at": "2015-01-11T09:50:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131749",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:147" align="right">comment:147</div>

Thanks for the interactive. Here is a slightly modified version, with canvas3D and colormap names

```
var('x,y,z')
t = sin(z).function(x,y,z)
@interact
def _(cm=[colormaps[c].name for c in colormaps], v=['jmol', 'tachyon', 'canvas3d']):
     show(implicit_plot3d(z-x*x-y*y,(x,-2,2),(y,-2,2),(z,-1,4),color=(t,colormaps[cm]),viewer=v))
```
One can note the canvas3d does not have the same viewpoint. One can also not that the colors do not look quite the same between the viewers. Maybe a difference in global lighting ?

Concerning setting the color 0 to 1 : it happens inside a jmol specific function, and after the color has been turned into an integer between `0` and `2**24`. So changing 0 to 1 here does not affect at all the other viewers, and should only change total black into almost total black, so should not have any visible effect on jmol output (except making it work slightly more often).

I am also not quite satisfied with this buggy behaviour, but something is better than nothing. Nevertheless it could still be that the problem is in our dialog with jmol and not in jmol itself : are we coding the colors correctly ? I thought so, but maybe this needs to be checked. I have tried to navigate the jmol code, but did not manage to find something useful about color encoding.



---

archive/issue_comments_131750.json:
```json
{
    "body": "<div id=\"comment:148\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ccef191ffe9032f39ae95ffcf101045b924a5f16\"><code>ccef191</code></a></td><td><code>trac #12212 some doc details</code></td></tr></table>\n",
    "created_at": "2015-01-11T15:59:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131750",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:148"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ccef191ffe9032f39ae95ffcf101045b924a5f16"><code>ccef191</code></a></td><td><code>trac #12212 some doc details</code></td></tr></table>




---

archive/issue_comments_131751.json:
```json
{
    "body": "Changed commit from **[`be9d2a5`](https://github.com/sagemath/sagetrac-mirror/commit/be9d2a587dc3d7bfcb9c9e19689e8fa2feec104b)** to **[`ccef191`](https://github.com/sagemath/sagetrac-mirror/commit/ccef191ffe9032f39ae95ffcf101045b924a5f16)**",
    "created_at": "2015-01-11T15:59:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131751",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`be9d2a5`](https://github.com/sagemath/sagetrac-mirror/commit/be9d2a587dc3d7bfcb9c9e19689e8fa2feec104b)** to **[`ccef191`](https://github.com/sagemath/sagetrac-mirror/commit/ccef191ffe9032f39ae95ffcf101045b924a5f16)**



---

archive/issue_comments_131752.json:
```json
{
    "body": "<div id=\"comment:149\" align=\"right\">comment:149</div>\n\nI have got one answer from upstream. They are working on correcting jmol, which has problems when there are two many colors. If they succeed, it would mean that hopefully our issues will be solved in a new release of jmol.",
    "created_at": "2015-01-13T12:53:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131752",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:149" align="right">comment:149</div>

I have got one answer from upstream. They are working on correcting jmol, which has problems when there are two many colors. If they succeed, it would mean that hopefully our issues will be solved in a new release of jmol.



---

archive/issue_comments_131753.json:
```json
{
    "body": "Changed commit from **[`ccef191`](https://github.com/sagemath/sagetrac-mirror/commit/ccef191ffe9032f39ae95ffcf101045b924a5f16)** to **[`ffe6d0f`](https://github.com/sagemath/sagetrac-mirror/commit/ffe6d0f96b780bb4dc968f70b325635fad1d3388)**",
    "created_at": "2015-01-13T13:36:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131753",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ccef191`](https://github.com/sagemath/sagetrac-mirror/commit/ccef191ffe9032f39ae95ffcf101045b924a5f16)** to **[`ffe6d0f`](https://github.com/sagemath/sagetrac-mirror/commit/ffe6d0f96b780bb4dc968f70b325635fad1d3388)**



---

archive/issue_comments_131754.json:
```json
{
    "body": "<div id=\"comment:150\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ffe6d0f96b780bb4dc968f70b325635fad1d3388\"><code>ffe6d0f</code></a></td><td><code>trac #12212 more little doc and code details</code></td></tr></table>\n",
    "created_at": "2015-01-13T13:36:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131754",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:150"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ffe6d0f96b780bb4dc968f70b325635fad1d3388"><code>ffe6d0f</code></a></td><td><code>trac #12212 more little doc and code details</code></td></tr></table>




---

archive/issue_comments_131755.json:
```json
{
    "body": "<div id=\"comment:151\" align=\"right\">comment:151</div>\n\n> I have got one answer from upstream. They are working on correcting jmol, which has problems when there are two many colors. If they succeed, it would mean that hopefully our issues will be solved in a new release of jmol.\n\nI would say that's worth waiting for.",
    "created_at": "2015-01-13T14:08:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131755",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:151" align="right">comment:151</div>

> I have got one answer from upstream. They are working on correcting jmol, which has problems when there are two many colors. If they succeed, it would mean that hopefully our issues will be solved in a new release of jmol.

I would say that's worth waiting for.



---

archive/issue_comments_131756.json:
```json
{
    "body": "<div id=\"comment:152\" align=\"right\">comment:152</div>\n\nA corrected jmol is available here\n\n\u200bhttp://chapoton.perso.math.cnrs.fr/jmol-14.3.11_2015.01.14.tar.bz2\n\nA branch to use that version of jmol is available under the name `public/12212-experimental`\n\nIt seems inded to solve our problems. This probably needs more testing. Upstream is waiting for our feedback. One can hope that this will get into a stable release.",
    "created_at": "2015-01-18T20:52:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131756",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:152" align="right">comment:152</div>

A corrected jmol is available here

​http://chapoton.perso.math.cnrs.fr/jmol-14.3.11_2015.01.14.tar.bz2

A branch to use that version of jmol is available under the name `public/12212-experimental`

It seems inded to solve our problems. This probably needs more testing. Upstream is waiting for our feedback. One can hope that this will get into a stable release.



---

archive/issue_events_164370.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-01-21T13:28:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12212#event-164370"
}
```



---

archive/issue_events_164371.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-01-21T13:28:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12212#event-164371"
}
```



---

archive/issue_comments_131757.json:
```json
{
    "body": "<div id=\"comment:153\" align=\"right\">comment:153</div>\n\nA **stable jmol** is available here\n\n\u200b\u200bhttp://chapoton.perso.math.cnrs.fr/jmol-14.2.11_2015.01.20.tar.bz2\n\nAs far as I can tell, this works very well.\n\nThis seems to be ready to go ! I will now update the branch here.",
    "created_at": "2015-01-21T13:28:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131757",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:153" align="right">comment:153</div>

A **stable jmol** is available here

​​http://chapoton.perso.math.cnrs.fr/jmol-14.2.11_2015.01.20.tar.bz2

As far as I can tell, this works very well.

This seems to be ready to go ! I will now update the branch here.



---

archive/issue_comments_131758.json:
```json
{
    "body": "Changed commit from **[`ffe6d0f`](https://github.com/sagemath/sagetrac-mirror/commit/ffe6d0f96b780bb4dc968f70b325635fad1d3388)** to **[`f6251ae`](https://github.com/sagemath/sagetrac-mirror/commit/f6251ae9d3c710503d13e6f8ab554afe359103c7)**",
    "created_at": "2015-01-21T13:28:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131758",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ffe6d0f`](https://github.com/sagemath/sagetrac-mirror/commit/ffe6d0f96b780bb4dc968f70b325635fad1d3388)** to **[`f6251ae`](https://github.com/sagemath/sagetrac-mirror/commit/f6251ae9d3c710503d13e6f8ab554afe359103c7)**



---

archive/issue_comments_131759.json:
```json
{
    "body": "<div id=\"comment:154\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f6251ae9d3c710503d13e6f8ab554afe359103c7\"><code>f6251ae</code></a></td><td><code>trac #12212 now with a stable jmol release !</code></td></tr></table>\n",
    "created_at": "2015-01-21T13:28:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131759",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:154"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f6251ae9d3c710503d13e6f8ab554afe359103c7"><code>f6251ae</code></a></td><td><code>trac #12212 now with a stable jmol release !</code></td></tr></table>




---

archive/issue_comments_131760.json:
```json
{
    "body": "Changed work issues from **update documentation and examples** to none",
    "created_at": "2015-01-21T13:34:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131760",
    "user": "https://github.com/fchapoton"
}
```

Changed work issues from **update documentation and examples** to none



---

archive/issue_comments_131761.json:
```json
{
    "body": "<div id=\"comment:156\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/36e4d8cae0037fc8442fbd20594a8e36c5b46196\"><code>36e4d8c</code></a></td><td><code>trac #12212 removal of warnings</code></td></tr></table>\n",
    "created_at": "2015-01-21T16:50:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131761",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:156"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/36e4d8cae0037fc8442fbd20594a8e36c5b46196"><code>36e4d8c</code></a></td><td><code>trac #12212 removal of warnings</code></td></tr></table>




---

archive/issue_comments_131762.json:
```json
{
    "body": "Changed commit from **[`f6251ae`](https://github.com/sagemath/sagetrac-mirror/commit/f6251ae9d3c710503d13e6f8ab554afe359103c7)** to **[`36e4d8c`](https://github.com/sagemath/sagetrac-mirror/commit/36e4d8cae0037fc8442fbd20594a8e36c5b46196)**",
    "created_at": "2015-01-21T16:50:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131762",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f6251ae`](https://github.com/sagemath/sagetrac-mirror/commit/f6251ae9d3c710503d13e6f8ab554afe359103c7)** to **[`36e4d8c`](https://github.com/sagemath/sagetrac-mirror/commit/36e4d8cae0037fc8442fbd20594a8e36c5b46196)**



---

archive/issue_comments_131763.json:
```json
{
    "body": "<div id=\"comment:157\" align=\"right\">comment:157</div>\n\nAwesome!  I will try to deal with this tonight or tomorrow.",
    "created_at": "2015-01-21T18:27:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131763",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:157" align="right">comment:157</div>

Awesome!  I will try to deal with this tonight or tomorrow.



---

archive/issue_comments_131764.json:
```json
{
    "body": "<div id=\"comment:158\" align=\"right\">comment:158</div>\n\nIs this still needed?\n\n```\n+        # it seems that Jmol does not like the 0 color at all\n+        if color == 0:\n+            color = 1\n```",
    "created_at": "2015-01-22T02:37:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131764",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:158" align="right">comment:158</div>

Is this still needed?

```
+        # it seems that Jmol does not like the 0 color at all
+        if color == 0:
+            color = 1
```



---

archive/issue_comments_131765.json:
```json
{
    "body": "<div id=\"comment:159\" align=\"right\">comment:159</div>\n\nAnyway, it seems it doesn't matter for now.  I am very happy with how this turned out and shall also merge the upstream canvas3d patch (which will be in #17645).\n\nAssuming there is no further review required?  Fr\u00e9d\u00e9ric, did you positively review all Niles' changes?  I think your stuff is mostly doc and the upgrade in jmol (plus actually fixing the pmesh).",
    "created_at": "2015-01-22T03:12:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131765",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:159" align="right">comment:159</div>

Anyway, it seems it doesn't matter for now.  I am very happy with how this turned out and shall also merge the upstream canvas3d patch (which will be in #17645).

Assuming there is no further review required?  Frédéric, did you positively review all Niles' changes?  I think your stuff is mostly doc and the upgrade in jmol (plus actually fixing the pmesh).



---

archive/issue_comments_131766.json:
```json
{
    "body": "Dependencies: **#17645**",
    "created_at": "2015-01-22T03:26:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131766",
    "user": "https://github.com/kcrisman"
}
```

Dependencies: **#17645**



---

archive/issue_comments_131767.json:
```json
{
    "body": "<div id=\"comment:161\" align=\"right\">comment:161</div>\n\nAs far as I am concerned, I am happy with the current state of the branch.\n\nSo positive review for me. If you agree, please set this status.",
    "created_at": "2015-01-22T07:46:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131767",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:161" align="right">comment:161</div>

As far as I am concerned, I am happy with the current state of the branch.

So positive review for me. If you agree, please set this status.



---

archive/issue_events_164372.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-01-22T14:55:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12212#event-164372"
}
```



---

archive/issue_events_164373.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-01-22T14:55:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20blocker%20/%201",
    "label_color": "ff0000",
    "label_name": "p: blocker / 1",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12212#event-164373"
}
```



---

archive/issue_comments_131768.json:
```json
{
    "body": "<div id=\"comment:163\" align=\"right\">comment:163</div>\n\nInterestingly, looking at the very initial example,\n\n```\nsage: cmsel = [colormaps['autumn'](i) for i in sxrange(0,1,0.05)]\nsage: var('x,y,z')\nsage: implicit_plot3d(x^2+y^2+z^2==4, (x, -3, 3), (y, -3,3), (z, -3,3), color=cmsel)\nTypeError: 'NoneType' object is not iterable\n```\nstill happens, since we need a tuple or something.  But weirdly, this is the only way to get colormaps to work with `plot3d` itself!  (As opposed to doing a \"trivial\" parametric plot.)\n\nSo... are we saying that we now have colormaps, after a Herculean effort, for implicit and parametric plots, but not for \"regular\" plots?  There is nothing in http://sagemath.org/doc/reference/plot3d/sage/plot/plot3d/plot3d.html that would suggest we do.\n\nNeedless to say, I am *not* holding this up for that, but I have also to say that the complete lack of documentation (William's comment in [Niles original question speaks to this](http://ask.sagemath.org/question/7581/use-a-colormap-for-implicit_plot3d/)) for the `plot3d` side definitely requires another ticket, and hopefully even the same syntax could work, despite what I now agree with Niles is definitely messed-up internals on such things.\n\nSee #17660.",
    "created_at": "2015-01-22T15:31:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131768",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:163" align="right">comment:163</div>

Interestingly, looking at the very initial example,

```
sage: cmsel = [colormaps['autumn'](i) for i in sxrange(0,1,0.05)]
sage: var('x,y,z')
sage: implicit_plot3d(x^2+y^2+z^2==4, (x, -3, 3), (y, -3,3), (z, -3,3), color=cmsel)
TypeError: 'NoneType' object is not iterable
```
still happens, since we need a tuple or something.  But weirdly, this is the only way to get colormaps to work with `plot3d` itself!  (As opposed to doing a "trivial" parametric plot.)

So... are we saying that we now have colormaps, after a Herculean effort, for implicit and parametric plots, but not for "regular" plots?  There is nothing in http://sagemath.org/doc/reference/plot3d/sage/plot/plot3d/plot3d.html that would suggest we do.

Needless to say, I am *not* holding this up for that, but I have also to say that the complete lack of documentation (William's comment in [Niles original question speaks to this](http://ask.sagemath.org/question/7581/use-a-colormap-for-implicit_plot3d/)) for the `plot3d` side definitely requires another ticket, and hopefully even the same syntax could work, despite what I now agree with Niles is definitely messed-up internals on such things.

See #17660.



---

archive/issue_events_164374.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2015-01-22T15:31:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12212#event-164374"
}
```



---

archive/issue_events_164375.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2015-01-22T15:31:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12212#event-164375"
}
```



---

archive/issue_comments_131769.json:
```json
{
    "body": "Changed author from **Joris Vankerschaver, Fr\u00e9d\u00e9ric Chapoton** to **Joris Vankerschaver, Fr\u00e9d\u00e9ric Chapoton, Niles Johnson**",
    "created_at": "2015-01-25T02:00:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131769",
    "user": "https://github.com/kcrisman"
}
```

Changed author from **Joris Vankerschaver, Frédéric Chapoton** to **Joris Vankerschaver, Frédéric Chapoton, Niles Johnson**



---

archive/issue_comments_131770.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -27,3 +27,6 @@\n \n See details at this [Ask Sage question](http://ask.sagemath.org/question/17/use-a-colormap-for-implicit_plot3d).\n \n+New jmol package available here:\n+* [\u200bhttp://chapoton.perso.math.cnrs.fr/jmol-14.2.11_2015.01.20.tar.bz2]\n+\n``````\n",
    "created_at": "2015-01-31T02:34:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131770",
    "user": "https://github.com/kiwifb"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -27,3 +27,6 @@
 
 See details at this [Ask Sage question](http://ask.sagemath.org/question/17/use-a-colormap-for-implicit_plot3d).
 
+New jmol package available here:
+* [​http://chapoton.perso.math.cnrs.fr/jmol-14.2.11_2015.01.20.tar.bz2]
+
``````




---

archive/issue_comments_131771.json:
```json
{
    "body": "<div id=\"comment:165\" align=\"right\">comment:165</div>\n\nWhen you have a new version of a package, please put it in the ticket description so that it is easy to find.",
    "created_at": "2015-01-31T02:34:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131771",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:165" align="right">comment:165</div>

When you have a new version of a package, please put it in the ticket description so that it is easy to find.



---

archive/issue_comments_131772.json:
```json
{
    "body": "<div id=\"comment:166\" align=\"right\">comment:166</div>\n\nSorry, the discussion had been going so long here... but hopefully soon over!",
    "created_at": "2015-01-31T02:52:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131772",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:166" align="right">comment:166</div>

Sorry, the discussion had been going so long here... but hopefully soon over!



---

archive/issue_comments_131773.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -24,9 +24,7 @@\n TypeError: 'NoneType' object is not iterable\n ```\n \n-\n See details at this [Ask Sage question](http://ask.sagemath.org/question/17/use-a-colormap-for-implicit_plot3d).\n \n-New jmol package available here:\n-* [\u200bhttp://chapoton.perso.math.cnrs.fr/jmol-14.2.11_2015.01.20.tar.bz2]\n+**Upstream**: http://chapoton.perso.math.cnrs.fr/jmol-14.2.11_2015.01.20.tar.bz2\n \n``````\n",
    "created_at": "2015-01-31T13:06:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131773",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -24,9 +24,7 @@
 TypeError: 'NoneType' object is not iterable
 ```
 
-
 See details at this [Ask Sage question](http://ask.sagemath.org/question/17/use-a-colormap-for-implicit_plot3d).
 
-New jmol package available here:
-* [​http://chapoton.perso.math.cnrs.fr/jmol-14.2.11_2015.01.20.tar.bz2]
+**Upstream**: http://chapoton.perso.math.cnrs.fr/jmol-14.2.11_2015.01.20.tar.bz2
 
``````




---

archive/issue_comments_131774.json:
```json
{
    "body": "Changed branch from **[u/chapoton/12212](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/12212)** to **[`36e4d8c`](https://github.com/sagemath/sagetrac-mirror/commit/36e4d8cae0037fc8442fbd20594a8e36c5b46196)**",
    "created_at": "2015-02-08T15:26:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12212#issuecomment-131774",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/chapoton/12212](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/12212)** to **[`36e4d8c`](https://github.com/sagemath/sagetrac-mirror/commit/36e4d8cae0037fc8442fbd20594a8e36c5b46196)**



---

archive/issue_events_164376.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-02-08T15:26:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12212#event-164376"
}
```



---

archive/issue_events_164377.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "aca7045899e89d45871be044febd5fefd1035dd0",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-02-08T15:26:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/12212",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12212#event-164377"
}
```
