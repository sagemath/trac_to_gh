# Issue 12720: Add speed regression database to doctesting

archive/issues_012548.json:
```json
{
    "assignees": [],
    "body": "Currently there's no systematic way of detecting whether a change to the sage library drastically slows down some function (perhaps even the function that's being updated in a ticket).\n\nThis ticket aims to add features to the new doctesting code at #12415 that provide the option to run doctests in a mode where they add timing data to a database.\n\n**Apply** [attachment: 12720.patch](https://github.com/sagemath/sage/files/ticket12720/12720.patch.gz)\n\n**Apply** [attachment: 12720_script.patch](https://github.com/sagemath/sage/files/ticket12720/12720_script.patch.gz) to the script repo\n\nAssignee: **@roed314**\n\nCC:  @videlec @koffie @embray @roed314\n\n_Issue created by migration from https://trac.sagemath.org/ticket/12720_\n\n",
    "closed_at": "2018-04-30T05:01:01Z",
    "created_at": "2012-03-21T20:09:57Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20doctest%20framework",
        "https://github.com/sagemath/sage/labels/duplicate",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Add speed regression database to doctesting",
    "type": "issue",
    "updated_at": "2018-04-30T05:01:01Z",
    "url": "https://github.com/sagemath/sage/issues/12720",
    "user": "https://github.com/roed314"
}
```
Currently there's no systematic way of detecting whether a change to the sage library drastically slows down some function (perhaps even the function that's being updated in a ticket).

This ticket aims to add features to the new doctesting code at #12415 that provide the option to run doctests in a mode where they add timing data to a database.

**Apply** [attachment: 12720.patch](https://github.com/sagemath/sage/files/ticket12720/12720.patch.gz)

**Apply** [attachment: 12720_script.patch](https://github.com/sagemath/sage/files/ticket12720/12720_script.patch.gz) to the script repo

Assignee: **@roed314**

CC:  @videlec @koffie @embray @roed314

_Issue created by migration from https://trac.sagemath.org/ticket/12720_





---

archive/issue_events_160241.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2012-03-21T20:09:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12720",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12720#event-160241"
}
```



---

archive/issue_events_160242.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2012-03-21T20:09:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12720",
    "label": "https://github.com/sagemath/sage/labels/doctest%20coverage",
    "label_color": "696969",
    "label_name": "doctest coverage",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12720#event-160242"
}
```



---

archive/issue_events_160243.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2012-03-21T20:09:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12720",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12720#event-160243"
}
```



---

archive/issue_events_160244.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2012-03-21T20:09:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12720",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12720#event-160244"
}
```



---

archive/issue_comments_144659.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nCould monitoring Sage's startup time be incorporated into this?",
    "created_at": "2013-01-09T23:31:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12720#issuecomment-144659",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:1" align="right">Comment 1</div>

Could monitoring Sage's startup time be incorporated into this?



---

archive/issue_comments_144660.json:
```json
{
    "body": "Changed dependencies from **#12415** to **#13278**",
    "created_at": "2013-03-15T05:24:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12720#issuecomment-144660",
    "user": "https://github.com/roed314"
}
```

Changed dependencies from **#12415** to **#13278**



---

archive/issue_comments_144661.json:
```json
{
    "body": "Still very much in progress",
    "created_at": "2013-03-15T05:35:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12720#issuecomment-144661",
    "user": "https://github.com/roed314"
}
```

Still very much in progress



---

archive/issue_comments_144662.json:
```json
{
    "body": "Attachment: **[12720.patch.gz](https://github.com/sagemath/sage/files/ticket12720/12720.patch.gz)**",
    "created_at": "2013-03-15T05:35:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12720#issuecomment-144662",
    "user": "https://github.com/roed314"
}
```

Attachment: **[12720.patch.gz](https://github.com/sagemath/sage/files/ticket12720/12720.patch.gz)**



---

archive/issue_comments_144663.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nAttachment: **[12720_script.patch.gz](https://github.com/sagemath/sage/files/ticket12720/12720_script.patch.gz)**",
    "created_at": "2013-03-15T05:36:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12720#issuecomment-144663",
    "user": "https://github.com/roed314"
}
```

<div id="comment:3" align="right">Comment 3</div>

Attachment: **[12720_script.patch.gz](https://github.com/sagemath/sage/files/ticket12720/12720_script.patch.gz)**



---

archive/issue_comments_144664.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,7 @@\n Currently there's no systematic way of detecting whether a change to the sage library drastically slows down some function (perhaps even the function that's being updated in a ticket).\n \n This ticket aims to add features to the new doctesting code at #12415 that provide the option to run doctests in a mode where they add timing data to a database.\n+\n+**Apply** [attachment: 12720.patch](https://github.com/sagemath/sage/files/ticket12720/12720.patch.gz)\n+\n+**Apply** [attachment: 12720_script.patch](https://github.com/sagemath/sage/files/ticket12720/12720_script.patch.gz) to the script repo\n``````\n",
    "created_at": "2013-03-15T05:36:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12720#issuecomment-144664",
    "user": "https://github.com/roed314"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,7 @@
 Currently there's no systematic way of detecting whether a change to the sage library drastically slows down some function (perhaps even the function that's being updated in a ticket).
 
 This ticket aims to add features to the new doctesting code at #12415 that provide the option to run doctests in a mode where they add timing data to a database.
+
+**Apply** [attachment: 12720.patch](https://github.com/sagemath/sage/files/ticket12720/12720.patch.gz)
+
+**Apply** [attachment: 12720_script.patch](https://github.com/sagemath/sage/files/ticket12720/12720_script.patch.gz) to the script repo
``````




---

archive/issue_comments_144665.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nNow that #12415 is in Sage, I'll be working on this some.  It will probably be at least a few weeks though (I'm going to be working on p-adics and the git transition first).\n\nIn the mean time, I've updated the patches to apply against #12415 (actually, rebased against #13278).  There's still a lot to be done to make them work well.",
    "created_at": "2013-03-15T05:55:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12720#issuecomment-144665",
    "user": "https://github.com/roed314"
}
```

<div id="comment:4" align="right">Comment 4</div>

Now that #12415 is in Sage, I'll be working on this some.  It will probably be at least a few weeks though (I'm going to be working on p-adics and the git transition first).

In the mean time, I've updated the patches to apply against #12415 (actually, rebased against #13278).  There's still a lot to be done to make them work well.



---

archive/issue_events_160245.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2013-03-28T22:42:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12720",
    "label": "https://github.com/sagemath/sage/labels/doctest%20coverage",
    "label_color": "696969",
    "label_name": "doctest coverage",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12720#event-160245"
}
```



---

archive/issue_events_160246.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2013-03-28T22:42:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12720",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20doctest%20framework",
    "label_color": "000080",
    "label_name": "component: doctest framework",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12720#event-160246"
}
```



---

archive/issue_comments_144666.json:
```json
{
    "body": "Changed assignee from **@sagetrac-mvngu** to **@roed314**",
    "created_at": "2013-03-28T22:42:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12720#issuecomment-144666",
    "user": "https://github.com/roed314"
}
```

Changed assignee from **@sagetrac-mvngu** to **@roed314**



---

archive/issue_events_160247.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12720",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12720#event-160247"
}
```



---

archive/issue_events_160248.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12720",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12720#event-160248"
}
```



---

archive/issue_events_160249.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12720",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12720#event-160249"
}
```



---

archive/issue_events_160250.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12720",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12720#event-160250"
}
```



---

archive/issue_events_160251.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12720",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12720#event-160251"
}
```



---

archive/issue_events_160252.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12720",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12720#event-160252"
}
```



---

archive/issue_events_160253.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12720",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12720#event-160253"
}
```



---

archive/issue_events_160254.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12720",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12720#event-160254"
}
```



---

archive/issue_comments_144667.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nHello,\n\njust cc'ing me!",
    "created_at": "2015-04-13T07:06:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12720#issuecomment-144667",
    "user": "https://github.com/videlec"
}
```

<div id="comment:10" align="right">Comment 10</div>

Hello,

just cc'ing me!



---

archive/issue_events_160255.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-04-29T17:24:36Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12720",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12720#event-160255"
}
```



---

archive/issue_events_160256.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-04-29T17:24:36Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12720",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12720#event-160256"
}
```



---

archive/issue_comments_144668.json:
```json
{
    "body": "Changed dependencies from **#13278** to **#24655**",
    "created_at": "2018-04-29T17:24:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12720#issuecomment-144668",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#13278** to **#24655**



---

archive/issue_comments_144669.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nroed, I believe that this should probably be closed. The approach of rolling our own system for doing something that asv does very well is probably not appropriate anymore. What do you think?",
    "created_at": "2018-04-29T17:31:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12720#issuecomment-144669",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:13" align="right">Comment 13</div>

roed, I believe that this should probably be closed. The approach of rolling our own system for doing something that asv does very well is probably not appropriate anymore. What do you think?



---

archive/issue_events_160257.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-04-30T05:01:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12720",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12720#event-160257"
}
```



---

archive/issue_events_160258.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-04-30T05:01:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12720",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12720#event-160258"
}
```



---

archive/issue_events_160259.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-04-30T05:01:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12720",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12720#event-160259"
}
```



---

archive/issue_comments_144670.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nDuplicate of #25262",
    "created_at": "2018-04-30T05:01:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12720#issuecomment-144670",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:14" align="right">Comment 14</div>

Duplicate of #25262



---

archive/issue_events_160260.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-04-30T05:01:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12720",
    "label": "https://github.com/sagemath/sage/labels/duplicate",
    "label_color": "a6a6a6",
    "label_name": "duplicate",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12720#event-160260"
}
```



---

archive/issue_comments_144671.json:
```json
{
    "body": "Changed dependencies from **#24655** to none",
    "created_at": "2018-04-30T05:01:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12720#issuecomment-144671",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#24655** to none



---

archive/issue_events_160261.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-04-30T05:01:01Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/12720",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12720#event-160261"
}
```
