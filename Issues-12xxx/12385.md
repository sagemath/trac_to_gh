# Issue 12385: Questionable semantics of DiGraph().all_simple_paths

archive/issues_012213.json:
```json
{
    "body": "See [this sage-support thread](https://groups.google.com/d/topic/sage-support/zVmqCIv82zI/discussion).\n\nThe docstring of `DiGraph().all_simple_paths` starts with this paragraph:\n\n```\n       Returns a list of all the simple paths of self starting with one of\n       the given vertices. A path is simple if no vertex occurs twice in\n       it except possibly the starting and ending one. The paths are\n       enumerated in increasing length order.\n```\n\nIn short, the `DiGraph().all_simple_paths` function deems paths of the form `[a, b, c, b]` to be simple. This is not true according to the generally accepted definition of a simple path. I suspect the intent of the author was to allow paths of the form `[b, c, b]` (i.e. paths which are actually cycles), which seems reasonable.\n\nAnother possibility would be to use the definition found on Wikipedia, namely that a simple path must not have *any* repeated vertices, and that a \"simple cycle\" is a path whose first vertex is its last vertex but has no other vertex repetitions. In this case the function should exclude both paths of the form `[a, b, c, b]` and paths of the form `[b, c, b]`. But I don't see that this is very useful. The function allows you to specify sets of starting and ending points for the paths you want returned, and if you specify non-disjoint sets, you are likely asking for cycles to be included.\n\nIncidentally, a definition that matches what is given in the first paragraph above is this: a \"simple path\" in a directed graph is a sequence of arcs such that the head of each arc is the tail of the next arc in the sequence, and no two arcs share the same head or the same tail.\n\n---\n\nApply to `$SAGE_ROOT/devel/sage`:\n1. [attachment:trac_12385-all-simple-paths.patch]\n2. [attachment:trac_12385_review.2.patch]\n3. [attachment:trac_12385-all-simple-paths.2.patch]\n4. [attachment:trac_12385-all-simple-paths.3.patch]\n\nAssignee: @kini\n\nCC:  @nathanncohen abmasse\n\nKeywords: digraphs graphs all_simple_paths\n\nResolution: fixed\n\nAuthor: Keshav Kini\n\nReviewer: Nathann Cohen\n\nMerged: sage-5.0.beta4\n\nIssue created by migration from https://trac.sagemath.org/ticket/12385\n\n",
    "closed_at": "2012-02-14T14:22:49Z",
    "created_at": "2012-01-30T04:10:13Z",
    "labels": [
        "component: graph theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.0",
    "title": "Questionable semantics of DiGraph().all_simple_paths",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12385",
    "user": "https://github.com/kini"
}
```
See [this sage-support thread](https://groups.google.com/d/topic/sage-support/zVmqCIv82zI/discussion).

The docstring of `DiGraph().all_simple_paths` starts with this paragraph:

```
       Returns a list of all the simple paths of self starting with one of
       the given vertices. A path is simple if no vertex occurs twice in
       it except possibly the starting and ending one. The paths are
       enumerated in increasing length order.
```

In short, the `DiGraph().all_simple_paths` function deems paths of the form `[a, b, c, b]` to be simple. This is not true according to the generally accepted definition of a simple path. I suspect the intent of the author was to allow paths of the form `[b, c, b]` (i.e. paths which are actually cycles), which seems reasonable.

Another possibility would be to use the definition found on Wikipedia, namely that a simple path must not have *any* repeated vertices, and that a "simple cycle" is a path whose first vertex is its last vertex but has no other vertex repetitions. In this case the function should exclude both paths of the form `[a, b, c, b]` and paths of the form `[b, c, b]`. But I don't see that this is very useful. The function allows you to specify sets of starting and ending points for the paths you want returned, and if you specify non-disjoint sets, you are likely asking for cycles to be included.

Incidentally, a definition that matches what is given in the first paragraph above is this: a "simple path" in a directed graph is a sequence of arcs such that the head of each arc is the tail of the next arc in the sequence, and no two arcs share the same head or the same tail.

---

Apply to `$SAGE_ROOT/devel/sage`:
1. [attachment:trac_12385-all-simple-paths.patch]
2. [attachment:trac_12385_review.2.patch]
3. [attachment:trac_12385-all-simple-paths.2.patch]
4. [attachment:trac_12385-all-simple-paths.3.patch]

Assignee: @kini

CC:  @nathanncohen abmasse

Keywords: digraphs graphs all_simple_paths

Resolution: fixed

Author: Keshav Kini

Reviewer: Nathann Cohen

Merged: sage-5.0.beta4

Issue created by migration from https://trac.sagemath.org/ticket/12385





---

archive/issue_comments_175618.json:
```json
{
    "body": "Changing author from \"\" to \"Keshav Kini\"",
    "created_at": "2012-01-30T04:13:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12385",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12385#issuecomment-175618",
    "user": "https://github.com/kini"
}
```

Changing author from "" to "Keshav Kini"



---

archive/issue_comments_175619.json:
```json
{
    "body": "<a id='comment:1'></a>Here's a patch which implements the first suggestion in the ticket description. The original ticket seems to be #8273 so I'm CCing the author and reviewer of that ticket.\n\nDoing a `make ptestlong` on this patch now, though the file in question passes and `search_src()` tells me this function is not used by any other code, so I don't expect any doctest problems.",
    "created_at": "2012-01-30T04:13:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12385",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12385#issuecomment-175619",
    "user": "https://github.com/kini"
}
```

<a id='comment:1'></a>Here's a patch which implements the first suggestion in the ticket description. The original ticket seems to be #8273 so I'm CCing the author and reviewer of that ticket.

Doing a `make ptestlong` on this patch now, though the file in question passes and `search_src()` tells me this function is not used by any other code, so I don't expect any doctest problems.



---

archive/issue_comments_175620.json:
```json
{
    "body": "apply to $SAGE_ROOT/devel/sage",
    "created_at": "2012-01-30T04:15:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12385",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12385#issuecomment-175620",
    "user": "https://github.com/kini"
}
```

apply to $SAGE_ROOT/devel/sage



---

archive/issue_comments_175621.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n See [this sage-support thread](https://groups.google.com/d/topic/sage-support/zVmqCIv82zI/discussion).\n \n-The docstring of `Graph().all_simple_paths` starts with this paragraph:\n+The docstring of `DiGraph().all_simple_paths` starts with this paragraph:\n \n ```\n        Returns a list of all the simple paths of self starting with one of\n@@ -9,11 +9,9 @@\n        enumerated in increasing length order.\n ```\n \n-In short, the `Graph().all_simple_paths` function deems paths of the form `[a, b, c, b]` to be simple. This is not true according to the generally accepted definition of a simple path. I suspect the intent of the author was to allow paths of the form `[b, c, b]` (i.e. paths which are actually cycles), which seems reasonable.\n+In short, the `DiGraph().all_simple_paths` function deems paths of the form `[a, b, c, b]` to be simple. This is not true according to the generally accepted definition of a simple path. I suspect the intent of the author was to allow paths of the form `[b, c, b]` (i.e. paths which are actually cycles), which seems reasonable.\n \n Another possibility would be to use the definition found on Wikipedia, namely that a simple path must not have *any* repeated vertices, and that a \"simple cycle\" is a path whose first vertex is its last vertex but has no other vertex repetitions. In this case the function should exclude both paths of the form `[a, b, c, b]` and paths of the form `[b, c, b]`. But I don't see that this is very useful. The function allows you to specify sets of starting and ending points for the paths you want returned, and if you specify non-disjoint sets, you are likely asking for cycles to be included.\n-\n-Keywords: graphs all_simple_paths\n \n Comment: 1\n \n``````\n",
    "created_at": "2012-01-30T04:24:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12385",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12385#issuecomment-175621",
    "user": "https://github.com/kini"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 See [this sage-support thread](https://groups.google.com/d/topic/sage-support/zVmqCIv82zI/discussion).
 
-The docstring of `Graph().all_simple_paths` starts with this paragraph:
+The docstring of `DiGraph().all_simple_paths` starts with this paragraph:
 
 ```
        Returns a list of all the simple paths of self starting with one of
@@ -9,11 +9,9 @@
        enumerated in increasing length order.
 ```
 
-In short, the `Graph().all_simple_paths` function deems paths of the form `[a, b, c, b]` to be simple. This is not true according to the generally accepted definition of a simple path. I suspect the intent of the author was to allow paths of the form `[b, c, b]` (i.e. paths which are actually cycles), which seems reasonable.
+In short, the `DiGraph().all_simple_paths` function deems paths of the form `[a, b, c, b]` to be simple. This is not true according to the generally accepted definition of a simple path. I suspect the intent of the author was to allow paths of the form `[b, c, b]` (i.e. paths which are actually cycles), which seems reasonable.
 
 Another possibility would be to use the definition found on Wikipedia, namely that a simple path must not have *any* repeated vertices, and that a "simple cycle" is a path whose first vertex is its last vertex but has no other vertex repetitions. In this case the function should exclude both paths of the form `[a, b, c, b]` and paths of the form `[b, c, b]`. But I don't see that this is very useful. The function allows you to specify sets of starting and ending points for the paths you want returned, and if you specify non-disjoint sets, you are likely asking for cycles to be included.
-
-Keywords: graphs all_simple_paths
 
 Comment: 1
 
``````




---

archive/issue_comments_175622.json:
```json
{
    "body": "Changing keywords from \"graphs all_simple_paths\" to \"digraphs graphs all_simple_paths\".",
    "created_at": "2012-01-30T04:24:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12385",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12385#issuecomment-175622",
    "user": "https://github.com/kini"
}
```

Changing keywords from "graphs all_simple_paths" to "digraphs graphs all_simple_paths".



---

archive/issue_comments_175623.json:
```json
{
    "body": "<a id='comment:2'></a>Attachment [trac_12385-all-simple-paths.patch](tarball://root/attachments/some-uuid/ticket12385/trac_12385-all-simple-paths.patch) by @kini created at 2012-01-30 04:24:02\n\nWhoops, sorry, this is a digraph method, not a graph method. I mistitled the ticket.",
    "created_at": "2012-01-30T04:24:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12385",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12385#issuecomment-175623",
    "user": "https://github.com/kini"
}
```

<a id='comment:2'></a>Attachment [trac_12385-all-simple-paths.patch](tarball://root/attachments/some-uuid/ticket12385/trac_12385-all-simple-paths.patch) by @kini created at 2012-01-30 04:24:02

Whoops, sorry, this is a digraph method, not a graph method. I mistitled the ticket.



---

archive/issue_comments_175624.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-01-30T05:07:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12385",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12385#issuecomment-175624",
    "user": "https://github.com/kini"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_175625.json:
```json
{
    "body": "<a id='comment:3'></a>`make ptestlong` passes. Comments?",
    "created_at": "2012-01-30T05:07:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12385",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12385#issuecomment-175625",
    "user": "https://github.com/kini"
}
```

<a id='comment:3'></a>`make ptestlong` passes. Comments?



---

archive/issue_comments_175626.json:
```json
{
    "body": "<a id='comment:4'></a>First that what you are doing is totally right, then that I will try to review the ticket today `:-)`\n\nNathann",
    "created_at": "2012-01-30T10:31:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12385",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12385#issuecomment-175626",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:4'></a>First that what you are doing is totally right, then that I will try to review the ticket today `:-)`

Nathann



---

archive/issue_comments_175627.json:
```json
{
    "body": "<a id='comment:5'></a>Hellooooo !!!\n\nHmmm... I was a bit worried at your path.count(path[-1]) `^^;`\n\nWhat do you think of the alternative version I attach ? In this one I check whether the path is a cycle *before* adding it to the queue. This way a \"neighbor in path\" is sufficient.\n\nI also do not understand why you removed the \"if trivial\" from before the loop to put it inside. It would be a waste to \"test\" trivial at each loop, and also to test len(path) > 1 when we know it will always be true after some step, wouldn't it ?\n\nTell me what you think `:-)`\n\nNathann",
    "created_at": "2012-01-30T12:14:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12385",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12385#issuecomment-175627",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:5'></a>Hellooooo !!!

Hmmm... I was a bit worried at your path.count(path[-1]) `^^;`

What do you think of the alternative version I attach ? In this one I check whether the path is a cycle *before* adding it to the queue. This way a "neighbor in path" is sufficient.

I also do not understand why you removed the "if trivial" from before the loop to put it inside. It would be a waste to "test" trivial at each loop, and also to test len(path) > 1 when we know it will always be true after some step, wouldn't it ?

Tell me what you think `:-)`

Nathann



---

archive/issue_comments_175628.json:
```json
{
    "body": "Attachment [trac_12385_review.patch](tarball://root/attachments/some-uuid/ticket12385/trac_12385_review.patch) by @nathanncohen created at 2012-01-30 12:14:52",
    "created_at": "2012-01-30T12:14:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12385",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12385#issuecomment-175628",
    "user": "https://github.com/nathanncohen"
}
```

Attachment [trac_12385_review.patch](tarball://root/attachments/some-uuid/ticket12385/trac_12385_review.patch) by @nathanncohen created at 2012-01-30 12:14:52



---

archive/issue_comments_175629.json:
```json
{
    "body": "<a id='comment:6'></a>Hi, Keshav and Nathann,\n\nThank you, Keshav, for finding that bug, I'm sorry we missed it the first time.\n\nSince Nathann has already started the review, I'll let him finish it (I don't even have the last Sage version installed on my computer).\n\nBy the way, the title \"Questionable semantics of DiGraph().all_simple_paths\" could be replaced by \"Wrong semantics of DiGraph().all_simple_paths\" :-)\n\nAlexandre",
    "created_at": "2012-01-30T13:32:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12385",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12385#issuecomment-175629",
    "user": "https://trac.sagemath.org/admin/accounts/users/abmasse"
}
```

<a id='comment:6'></a>Hi, Keshav and Nathann,

Thank you, Keshav, for finding that bug, I'm sorry we missed it the first time.

Since Nathann has already started the review, I'll let him finish it (I don't even have the last Sage version installed on my computer).

By the way, the title "Questionable semantics of DiGraph().all_simple_paths" could be replaced by "Wrong semantics of DiGraph().all_simple_paths" :-)

Alexandre



---

archive/issue_comments_175630.json:
```json
{
    "body": "<a id='comment:7'></a>Replying to [comment:5 ncohen]:\n> Hmmm... I was a bit worried at your path.count(path[-1]) `^^;`\n\n\nCan you explain? I think the same expression was used in the old code.\n\n> What do you think of the alternative version I attach ? In this one I check whether the path is a cycle *before* adding it to the queue. This way a \"neighbor in path\" is sufficient.\n\n\nNice! It's definitely better. I don't know why I avoided touching that last loop. Of course that is the better place to do this logic.\n\n> I also do not understand why you removed the \"if trivial\" from before the loop to put it inside. It would be a waste to \"test\" trivial at each loop, and also to test len(path) > 1 when we know it will always be true after some step, wouldn't it ?\n\n\nWell, part of it was a mistake - I meant to put the check for `trivial` after the check for `len(path)`. Because of the lazy evaluation of boolean operators in Python (`a and b` skips checking `b` if `a` is false, etc.), this would still make `trivial` be evaluated only once, and would reduce the number of `yield` statements in the code, making it \"easier to read\", theoretically. Also I made it so that `len(path)` would only be checked for each path with a desired endpoint, not every single path.\n\nBut you're right, it's possible to make this better by moving the condition check in the `while` loop to somewhere in the middle of the body rather than at the top. Patch attached! (Or will be after I post this comment.) I made some other changes too, such as inverting the loop and if/else in your code to check `simple` on every good incomplete path rather than every candidate extension. It would be best if `simple` and `trivial` could be declared as constant so that Python could optimize away all these checks. Or maybe it already knows this, since we don't assign any values to those variables... how smart is Python, anyway? I think I am getting stuck in the premature optimization trap... :P",
    "created_at": "2012-01-31T05:03:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12385",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12385#issuecomment-175630",
    "user": "https://github.com/kini"
}
```

<a id='comment:7'></a>Replying to [comment:5 ncohen]:
> Hmmm... I was a bit worried at your path.count(path[-1]) `^^;`


Can you explain? I think the same expression was used in the old code.

> What do you think of the alternative version I attach ? In this one I check whether the path is a cycle *before* adding it to the queue. This way a "neighbor in path" is sufficient.


Nice! It's definitely better. I don't know why I avoided touching that last loop. Of course that is the better place to do this logic.

> I also do not understand why you removed the "if trivial" from before the loop to put it inside. It would be a waste to "test" trivial at each loop, and also to test len(path) > 1 when we know it will always be true after some step, wouldn't it ?


Well, part of it was a mistake - I meant to put the check for `trivial` after the check for `len(path)`. Because of the lazy evaluation of boolean operators in Python (`a and b` skips checking `b` if `a` is false, etc.), this would still make `trivial` be evaluated only once, and would reduce the number of `yield` statements in the code, making it "easier to read", theoretically. Also I made it so that `len(path)` would only be checked for each path with a desired endpoint, not every single path.

But you're right, it's possible to make this better by moving the condition check in the `while` loop to somewhere in the middle of the body rather than at the top. Patch attached! (Or will be after I post this comment.) I made some other changes too, such as inverting the loop and if/else in your code to check `simple` on every good incomplete path rather than every candidate extension. It would be best if `simple` and `trivial` could be declared as constant so that Python could optimize away all these checks. Or maybe it already knows this, since we don't assign any values to those variables... how smart is Python, anyway? I think I am getting stuck in the premature optimization trap... :P



---

archive/issue_comments_175631.json:
```json
{
    "body": "Attachment [trac_12385-all-simple-paths.2.patch](tarball://root/attachments/some-uuid/ticket12385/trac_12385-all-simple-paths.2.patch) by @kini created at 2012-01-31 05:04:02\n\napply to $SAGE_ROOT/devel/sage",
    "created_at": "2012-01-31T05:04:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12385",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12385#issuecomment-175631",
    "user": "https://github.com/kini"
}
```

Attachment [trac_12385-all-simple-paths.2.patch](tarball://root/attachments/some-uuid/ticket12385/trac_12385-all-simple-paths.2.patch) by @kini created at 2012-01-31 05:04:02

apply to $SAGE_ROOT/devel/sage



---

archive/issue_comments_175632.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,24 @@\n+See [this sage-support thread](https://groups.google.com/d/topic/sage-support/zVmqCIv82zI/discussion).\n \n+The docstring of `DiGraph().all_simple_paths` starts with this paragraph:\n+\n+```\n+       Returns a list of all the simple paths of self starting with one of\n+       the given vertices. A path is simple if no vertex occurs twice in\n+       it except possibly the starting and ending one. The paths are\n+       enumerated in increasing length order.\n+```\n+\n+In short, the `DiGraph().all_simple_paths` function deems paths of the form `[a, b, c, b]` to be simple. This is not true according to the generally accepted definition of a simple path. I suspect the intent of the author was to allow paths of the form `[b, c, b]` (i.e. paths which are actually cycles), which seems reasonable.\n+\n+Another possibility would be to use the definition found on Wikipedia, namely that a simple path must not have *any* repeated vertices, and that a \"simple cycle\" is a path whose first vertex is its last vertex but has no other vertex repetitions. In this case the function should exclude both paths of the form `[a, b, c, b]` and paths of the form `[b, c, b]`. But I don't see that this is very useful. The function allows you to specify sets of starting and ending points for the paths you want returned, and if you specify non-disjoint sets, you are likely asking for cycles to be included.\n+\n+---\n+\n+Apply to `$SAGE_ROOT/devel/sage`:\n+1. [attachment:trac_12385-all-simple-paths.patch]\n+2. [attachment:trac_12385_review.patch]\n+3. [attachment:trac_12385-all-simple-paths.2.patch]\n \n Comment: 1\n \n``````\n",
    "created_at": "2012-01-31T05:06:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12385",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12385#issuecomment-175632",
    "user": "https://github.com/kini"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,24 @@
+See [this sage-support thread](https://groups.google.com/d/topic/sage-support/zVmqCIv82zI/discussion).
 
+The docstring of `DiGraph().all_simple_paths` starts with this paragraph:
+
+```
+       Returns a list of all the simple paths of self starting with one of
+       the given vertices. A path is simple if no vertex occurs twice in
+       it except possibly the starting and ending one. The paths are
+       enumerated in increasing length order.
+```
+
+In short, the `DiGraph().all_simple_paths` function deems paths of the form `[a, b, c, b]` to be simple. This is not true according to the generally accepted definition of a simple path. I suspect the intent of the author was to allow paths of the form `[b, c, b]` (i.e. paths which are actually cycles), which seems reasonable.
+
+Another possibility would be to use the definition found on Wikipedia, namely that a simple path must not have *any* repeated vertices, and that a "simple cycle" is a path whose first vertex is its last vertex but has no other vertex repetitions. In this case the function should exclude both paths of the form `[a, b, c, b]` and paths of the form `[b, c, b]`. But I don't see that this is very useful. The function allows you to specify sets of starting and ending points for the paths you want returned, and if you specify non-disjoint sets, you are likely asking for cycles to be included.
+
+---
+
+Apply to `$SAGE_ROOT/devel/sage`:
+1. [attachment:trac_12385-all-simple-paths.patch]
+2. [attachment:trac_12385_review.patch]
+3. [attachment:trac_12385-all-simple-paths.2.patch]
 
 Comment: 1
 
``````




---

archive/issue_comments_175633.json:
```json
{
    "body": "Attachment [trac_12385_review.2.patch](tarball://root/attachments/some-uuid/ticket12385/trac_12385_review.2.patch) by @kini created at 2012-01-31 05:08:00\n\napply to $SAGE_ROOT/devel/sage",
    "created_at": "2012-01-31T05:08:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12385",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12385#issuecomment-175633",
    "user": "https://github.com/kini"
}
```

Attachment [trac_12385_review.2.patch](tarball://root/attachments/some-uuid/ticket12385/trac_12385_review.2.patch) by @kini created at 2012-01-31 05:08:00

apply to $SAGE_ROOT/devel/sage



---

archive/issue_comments_175634.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,24 @@\n+See [this sage-support thread](https://groups.google.com/d/topic/sage-support/zVmqCIv82zI/discussion).\n \n+The docstring of `DiGraph().all_simple_paths` starts with this paragraph:\n+\n+```\n+       Returns a list of all the simple paths of self starting with one of\n+       the given vertices. A path is simple if no vertex occurs twice in\n+       it except possibly the starting and ending one. The paths are\n+       enumerated in increasing length order.\n+```\n+\n+In short, the `DiGraph().all_simple_paths` function deems paths of the form `[a, b, c, b]` to be simple. This is not true according to the generally accepted definition of a simple path. I suspect the intent of the author was to allow paths of the form `[b, c, b]` (i.e. paths which are actually cycles), which seems reasonable.\n+\n+Another possibility would be to use the definition found on Wikipedia, namely that a simple path must not have *any* repeated vertices, and that a \"simple cycle\" is a path whose first vertex is its last vertex but has no other vertex repetitions. In this case the function should exclude both paths of the form `[a, b, c, b]` and paths of the form `[b, c, b]`. But I don't see that this is very useful. The function allows you to specify sets of starting and ending points for the paths you want returned, and if you specify non-disjoint sets, you are likely asking for cycles to be included.\n+\n+---\n+\n+Apply to `$SAGE_ROOT/devel/sage`:\n+1. [attachment:trac_12385-all-simple-paths.patch]\n+2. [attachment:trac_12385_review.2.patch]\n+3. [attachment:trac_12385-all-simple-paths.2.patch]\n \n Comment: 1\n \n``````\n",
    "created_at": "2012-01-31T05:08:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12385",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12385#issuecomment-175634",
    "user": "https://github.com/kini"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,24 @@
+See [this sage-support thread](https://groups.google.com/d/topic/sage-support/zVmqCIv82zI/discussion).
 
+The docstring of `DiGraph().all_simple_paths` starts with this paragraph:
+
+```
+       Returns a list of all the simple paths of self starting with one of
+       the given vertices. A path is simple if no vertex occurs twice in
+       it except possibly the starting and ending one. The paths are
+       enumerated in increasing length order.
+```
+
+In short, the `DiGraph().all_simple_paths` function deems paths of the form `[a, b, c, b]` to be simple. This is not true according to the generally accepted definition of a simple path. I suspect the intent of the author was to allow paths of the form `[b, c, b]` (i.e. paths which are actually cycles), which seems reasonable.
+
+Another possibility would be to use the definition found on Wikipedia, namely that a simple path must not have *any* repeated vertices, and that a "simple cycle" is a path whose first vertex is its last vertex but has no other vertex repetitions. In this case the function should exclude both paths of the form `[a, b, c, b]` and paths of the form `[b, c, b]`. But I don't see that this is very useful. The function allows you to specify sets of starting and ending points for the paths you want returned, and if you specify non-disjoint sets, you are likely asking for cycles to be included.
+
+---
+
+Apply to `$SAGE_ROOT/devel/sage`:
+1. [attachment:trac_12385-all-simple-paths.patch]
+2. [attachment:trac_12385_review.2.patch]
+3. [attachment:trac_12385-all-simple-paths.2.patch]
 
 Comment: 1
 
``````




---

archive/issue_comments_175635.json:
```json
{
    "body": "<a id='comment:9'></a>Your commit message was weird so I fixed it :)",
    "created_at": "2012-01-31T05:08:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12385",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12385#issuecomment-175635",
    "user": "https://github.com/kini"
}
```

<a id='comment:9'></a>Your commit message was weird so I fixed it :)



---

archive/issue_comments_175636.json:
```json
{
    "body": "<a id='comment:10'></a>BTW, thanks Alexandre for writing the code in the first place :)",
    "created_at": "2012-01-31T06:06:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12385",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12385#issuecomment-175636",
    "user": "https://github.com/kini"
}
```

<a id='comment:10'></a>BTW, thanks Alexandre for writing the code in the first place :)



---

archive/issue_comments_175637.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,26 @@\n+See [this sage-support thread](https://groups.google.com/d/topic/sage-support/zVmqCIv82zI/discussion).\n \n+The docstring of `DiGraph().all_simple_paths` starts with this paragraph:\n+\n+```\n+       Returns a list of all the simple paths of self starting with one of\n+       the given vertices. A path is simple if no vertex occurs twice in\n+       it except possibly the starting and ending one. The paths are\n+       enumerated in increasing length order.\n+```\n+\n+In short, the `DiGraph().all_simple_paths` function deems paths of the form `[a, b, c, b]` to be simple. This is not true according to the generally accepted definition of a simple path. I suspect the intent of the author was to allow paths of the form `[b, c, b]` (i.e. paths which are actually cycles), which seems reasonable.\n+\n+Another possibility would be to use the definition found on Wikipedia, namely that a simple path must not have *any* repeated vertices, and that a \"simple cycle\" is a path whose first vertex is its last vertex but has no other vertex repetitions. In this case the function should exclude both paths of the form `[a, b, c, b]` and paths of the form `[b, c, b]`. But I don't see that this is very useful. The function allows you to specify sets of starting and ending points for the paths you want returned, and if you specify non-disjoint sets, you are likely asking for cycles to be included.\n+\n+Incidentally, a definition that matches what is given in the first paragraph above is this: a \"simple path\" in a directed graph is a sequence of arcs such that the head of each arc is the tail of the next arc in the sequence, and no two arcs share the same head or the same tail.\n+\n+---\n+\n+Apply to `$SAGE_ROOT/devel/sage`:\n+1. [attachment:trac_12385-all-simple-paths.patch]\n+2. [attachment:trac_12385_review.2.patch]\n+3. [attachment:trac_12385-all-simple-paths.2.patch]\n \n Comment: 1\n \n``````\n",
    "created_at": "2012-01-31T06:12:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12385",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12385#issuecomment-175637",
    "user": "https://github.com/kini"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,26 @@
+See [this sage-support thread](https://groups.google.com/d/topic/sage-support/zVmqCIv82zI/discussion).
 
+The docstring of `DiGraph().all_simple_paths` starts with this paragraph:
+
+```
+       Returns a list of all the simple paths of self starting with one of
+       the given vertices. A path is simple if no vertex occurs twice in
+       it except possibly the starting and ending one. The paths are
+       enumerated in increasing length order.
+```
+
+In short, the `DiGraph().all_simple_paths` function deems paths of the form `[a, b, c, b]` to be simple. This is not true according to the generally accepted definition of a simple path. I suspect the intent of the author was to allow paths of the form `[b, c, b]` (i.e. paths which are actually cycles), which seems reasonable.
+
+Another possibility would be to use the definition found on Wikipedia, namely that a simple path must not have *any* repeated vertices, and that a "simple cycle" is a path whose first vertex is its last vertex but has no other vertex repetitions. In this case the function should exclude both paths of the form `[a, b, c, b]` and paths of the form `[b, c, b]`. But I don't see that this is very useful. The function allows you to specify sets of starting and ending points for the paths you want returned, and if you specify non-disjoint sets, you are likely asking for cycles to be included.
+
+Incidentally, a definition that matches what is given in the first paragraph above is this: a "simple path" in a directed graph is a sequence of arcs such that the head of each arc is the tail of the next arc in the sequence, and no two arcs share the same head or the same tail.
+
+---
+
+Apply to `$SAGE_ROOT/devel/sage`:
+1. [attachment:trac_12385-all-simple-paths.patch]
+2. [attachment:trac_12385_review.2.patch]
+3. [attachment:trac_12385-all-simple-paths.2.patch]
 
 Comment: 1
 
``````




---

archive/issue_comments_175638.json:
```json
{
    "body": "<a id='comment:12'></a>Here's a documentation patch which changes the stated definition of simple paths as well (to the one I added to the description). I also took the opportunity to enforce PEP 8 in the functions I touched, with the exception of doctest input lines (because of #10458 which I really need to get back to one of these days...). Patch below!",
    "created_at": "2012-01-31T12:59:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12385",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12385#issuecomment-175638",
    "user": "https://github.com/kini"
}
```

<a id='comment:12'></a>Here's a documentation patch which changes the stated definition of simple paths as well (to the one I added to the description). I also took the opportunity to enforce PEP 8 in the functions I touched, with the exception of doctest input lines (because of #10458 which I really need to get back to one of these days...). Patch below!



---

archive/issue_comments_175639.json:
```json
{
    "body": "Attachment [trac_12385-all-simple-paths.3.patch](tarball://root/attachments/some-uuid/ticket12385/trac_12385-all-simple-paths.3.patch) by @kini created at 2012-01-31 13:00:04\n\napply to $SAGE_ROOT/devel/sage",
    "created_at": "2012-01-31T13:00:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12385",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12385#issuecomment-175639",
    "user": "https://github.com/kini"
}
```

Attachment [trac_12385-all-simple-paths.3.patch](tarball://root/attachments/some-uuid/ticket12385/trac_12385-all-simple-paths.3.patch) by @kini created at 2012-01-31 13:00:04

apply to $SAGE_ROOT/devel/sage



---

archive/issue_comments_175640.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,27 @@\n+See [this sage-support thread](https://groups.google.com/d/topic/sage-support/zVmqCIv82zI/discussion).\n \n+The docstring of `DiGraph().all_simple_paths` starts with this paragraph:\n+\n+```\n+       Returns a list of all the simple paths of self starting with one of\n+       the given vertices. A path is simple if no vertex occurs twice in\n+       it except possibly the starting and ending one. The paths are\n+       enumerated in increasing length order.\n+```\n+\n+In short, the `DiGraph().all_simple_paths` function deems paths of the form `[a, b, c, b]` to be simple. This is not true according to the generally accepted definition of a simple path. I suspect the intent of the author was to allow paths of the form `[b, c, b]` (i.e. paths which are actually cycles), which seems reasonable.\n+\n+Another possibility would be to use the definition found on Wikipedia, namely that a simple path must not have *any* repeated vertices, and that a \"simple cycle\" is a path whose first vertex is its last vertex but has no other vertex repetitions. In this case the function should exclude both paths of the form `[a, b, c, b]` and paths of the form `[b, c, b]`. But I don't see that this is very useful. The function allows you to specify sets of starting and ending points for the paths you want returned, and if you specify non-disjoint sets, you are likely asking for cycles to be included.\n+\n+Incidentally, a definition that matches what is given in the first paragraph above is this: a \"simple path\" in a directed graph is a sequence of arcs such that the head of each arc is the tail of the next arc in the sequence, and no two arcs share the same head or the same tail.\n+\n+---\n+\n+Apply to `$SAGE_ROOT/devel/sage`:\n+1. [attachment:trac_12385-all-simple-paths.patch]\n+2. [attachment:trac_12385_review.2.patch]\n+3. [attachment:trac_12385-all-simple-paths.2.patch]\n+4. [attachment:trac_12385-all-simple-paths.3.patch]\n \n Comment: 1\n \n``````\n",
    "created_at": "2012-01-31T13:00:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12385",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12385#issuecomment-175640",
    "user": "https://github.com/kini"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,27 @@
+See [this sage-support thread](https://groups.google.com/d/topic/sage-support/zVmqCIv82zI/discussion).
 
+The docstring of `DiGraph().all_simple_paths` starts with this paragraph:
+
+```
+       Returns a list of all the simple paths of self starting with one of
+       the given vertices. A path is simple if no vertex occurs twice in
+       it except possibly the starting and ending one. The paths are
+       enumerated in increasing length order.
+```
+
+In short, the `DiGraph().all_simple_paths` function deems paths of the form `[a, b, c, b]` to be simple. This is not true according to the generally accepted definition of a simple path. I suspect the intent of the author was to allow paths of the form `[b, c, b]` (i.e. paths which are actually cycles), which seems reasonable.
+
+Another possibility would be to use the definition found on Wikipedia, namely that a simple path must not have *any* repeated vertices, and that a "simple cycle" is a path whose first vertex is its last vertex but has no other vertex repetitions. In this case the function should exclude both paths of the form `[a, b, c, b]` and paths of the form `[b, c, b]`. But I don't see that this is very useful. The function allows you to specify sets of starting and ending points for the paths you want returned, and if you specify non-disjoint sets, you are likely asking for cycles to be included.
+
+Incidentally, a definition that matches what is given in the first paragraph above is this: a "simple path" in a directed graph is a sequence of arcs such that the head of each arc is the tail of the next arc in the sequence, and no two arcs share the same head or the same tail.
+
+---
+
+Apply to `$SAGE_ROOT/devel/sage`:
+1. [attachment:trac_12385-all-simple-paths.patch]
+2. [attachment:trac_12385_review.2.patch]
+3. [attachment:trac_12385-all-simple-paths.2.patch]
+4. [attachment:trac_12385-all-simple-paths.3.patch]
 
 Comment: 1
 
``````




---

archive/issue_comments_175641.json:
```json
{
    "body": "<a id='comment:14'></a>Weird loop, but it works `:-)`\n\nIf you are are also ok with it, you can set the ticket to \"positive_review\" !\n\nNathann",
    "created_at": "2012-01-31T18:02:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12385",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12385#issuecomment-175641",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:14'></a>Weird loop, but it works `:-)`

If you are are also ok with it, you can set the ticket to "positive_review" !

Nathann



---

archive/issue_comments_175642.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Nathann Cohen\"",
    "created_at": "2012-01-31T18:44:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12385",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12385#issuecomment-175642",
    "user": "https://github.com/kini"
}
```

Changing reviewer from "" to "Nathann Cohen"



---

archive/issue_comments_175643.json:
```json
{
    "body": "<a id='comment:15'></a>I wrote it, so I guess I'm OK with it :) Thanks!",
    "created_at": "2012-01-31T18:44:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12385",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12385#issuecomment-175643",
    "user": "https://github.com/kini"
}
```

<a id='comment:15'></a>I wrote it, so I guess I'm OK with it :) Thanks!



---

archive/issue_comments_175644.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-01-31T18:44:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12385",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12385#issuecomment-175644",
    "user": "https://github.com/kini"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_175645.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-5.0.beta4\"",
    "created_at": "2012-02-14T14:22:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12385",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12385#issuecomment-175645",
    "user": "https://github.com/jdemeyer"
}
```

Changing merged from "" to "sage-5.0.beta4"



---

archive/issue_comments_175646.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-02-14T14:22:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12385",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12385#issuecomment-175646",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_033208.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-14T14:22:49Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12385",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12385#event-33208"
}
```
