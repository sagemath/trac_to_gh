# Issue 12579: Mechanism to skip self-tests (spkg-check) for certain packages

archive/issues_012407.json:
```json
{
    "assignees": [
        "https://github.com/sagetrac-GeorgSWeber"
    ],
    "body": "With the attached patch, if you set `SAGE_CHECK=yes` and `SAGE_CHECK_PACKAGES='!python,!cvxopt'` and then build Sage, it will run self-tests for all packages except python and cvxopt.  By default, `SAGE_CHECK_PACKAGES=!python`.\n\nThis sort of behavior can be useful with the current situation, in which python always fails self-tests (as far as I know), and a package like cvxopt fails them on OS X Lion.  So when I'm testing Sage with Lion, I could use `'!python,!cvxopt'` and easily run self-tests on all of the other packages. This should be viewed as merely a convenience \u2014 I hope that people straighten out Python's test suite in general and cvxopt on Lion \u2014 but it might be a useful option.\n\nApply\n\n- [attachment: trac_12579-sage-check.v3.patch](https://github.com/sagemath/sage/files/ticket12579/trac_12579-sage-check.v3.patch.gz) to the root repo.\n- [attachment: trac_12579-doc.v3.patch](https://github.com/sagemath/sage/files/ticket12579/trac_12579-doc.v3.patch.gz) to the Sage library\n\nDepends on #4949\nDepends on #12479\n\nReviewer: **Jeroen Demeyer**\n\nAuthor: **John Palmieri**\n\nMerged: **sage-5.0.beta7**\n\nComponent: **build**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/12579_\n\n",
    "closed_at": "2012-03-04T21:17:01Z",
    "created_at": "2012-02-24T06:34:18Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20build",
        "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Mechanism to skip self-tests (spkg-check) for certain packages",
    "type": "issue",
    "updated_at": "2012-03-25T21:08:24Z",
    "url": "https://github.com/sagemath/sage/issues/12579",
    "user": "https://github.com/jhpalmieri"
}
```
With the attached patch, if you set `SAGE_CHECK=yes` and `SAGE_CHECK_PACKAGES='!python,!cvxopt'` and then build Sage, it will run self-tests for all packages except python and cvxopt.  By default, `SAGE_CHECK_PACKAGES=!python`.

This sort of behavior can be useful with the current situation, in which python always fails self-tests (as far as I know), and a package like cvxopt fails them on OS X Lion.  So when I'm testing Sage with Lion, I could use `'!python,!cvxopt'` and easily run self-tests on all of the other packages. This should be viewed as merely a convenience — I hope that people straighten out Python's test suite in general and cvxopt on Lion — but it might be a useful option.

Apply

- [attachment: trac_12579-sage-check.v3.patch](https://github.com/sagemath/sage/files/ticket12579/trac_12579-sage-check.v3.patch.gz) to the root repo.
- [attachment: trac_12579-doc.v3.patch](https://github.com/sagemath/sage/files/ticket12579/trac_12579-doc.v3.patch.gz) to the Sage library

Depends on #4949
Depends on #12479

Reviewer: **Jeroen Demeyer**

Author: **John Palmieri**

Merged: **sage-5.0.beta7**

Component: **build**

_Issue created by migration from https://trac.sagemath.org/ticket/12579_





---

archive/issue_events_173316.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2012-02-24T06:34:18Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "milestone_number": null,
    "milestone_title": "sage-5.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12579#event-173316"
}
```



---

archive/issue_events_173317.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2012-02-24T06:34:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build",
    "label_color": "000080",
    "label_name": "c: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12579#event-173317"
}
```



---

archive/issue_events_173318.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2012-02-24T06:34:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12579#event-173318"
}
```



---

archive/issue_events_173319.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2012-02-24T06:34:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12579#event-173319"
}
```



---

archive/issue_events_173320.json:
```json
{
    "actor": "https://github.com/sagetrac-GeorgSWeber",
    "created_at": "2012-02-24T06:34:18Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "subject": "https://github.com/jhpalmieri",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12579#event-173320"
}
```



---

archive/issue_comments_139633.json:
```json
{
    "body": "root repo",
    "created_at": "2012-02-24T06:36:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12579#issuecomment-139633",
    "user": "https://github.com/jhpalmieri"
}
```

root repo



---

archive/issue_comments_139634.json:
```json
{
    "body": "Attachment: **[trac_12579-sage-check.patch.gz](https://github.com/sagemath/sage/files/ticket12579/trac_12579-sage-check.patch.gz)**\n\nSage library",
    "created_at": "2012-02-24T06:37:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12579#issuecomment-139634",
    "user": "https://github.com/jhpalmieri"
}
```

Attachment: **[trac_12579-sage-check.patch.gz](https://github.com/sagemath/sage/files/ticket12579/trac_12579-sage-check.patch.gz)**

Sage library



---

archive/issue_comments_139635.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nAttachment: **[trac_12579-doc.patch.gz](https://github.com/sagemath/sage/files/ticket12579/trac_12579-doc.patch.gz)**",
    "created_at": "2012-02-24T06:37:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12579#issuecomment-139635",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:1" align="right">comment:1</div>

Attachment: **[trac_12579-doc.patch.gz](https://github.com/sagemath/sage/files/ticket12579/trac_12579-doc.patch.gz)**



---

archive/issue_events_173321.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2012-02-24T06:37:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12579#event-173321"
}
```



---

archive/issue_comments_139636.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,6 @@\n With the attached patch, if you set `SAGE_CHECK='!python!cvxopt'` and then build Sage, it will run self-tests for all packages except python and cvxopt. This sort of behavior can be useful with the current situation, in which python always fails self-tests (as far as I know), and a package like cvxopt fails them on OS X Lion.  So when I'm testing Sage with Lion, I could use `'!python!cvxopt'` and easily run self-tests on all of the other packages. This should be viewed as merely a convenience \u2014 I hope that people straighten out Python's test suite in general and cvxopt on Lion \u2014 but it might be a useful option.\n+\n+Apply\n+\n+- [attachment: trac_12579-sage-check.patch](https://github.com/sagemath/sage/files/ticket12579/trac_12579-sage-check.patch.gz) to the root repo.\n+- [attachment: trac_12579-doc.patch](https://github.com/sagemath/sage/files/ticket12579/trac_12579-doc.patch.gz) to the Sage library\n``````\n",
    "created_at": "2012-02-24T06:37:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12579#issuecomment-139636",
    "user": "https://github.com/jhpalmieri"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,6 @@
 With the attached patch, if you set `SAGE_CHECK='!python!cvxopt'` and then build Sage, it will run self-tests for all packages except python and cvxopt. This sort of behavior can be useful with the current situation, in which python always fails self-tests (as far as I know), and a package like cvxopt fails them on OS X Lion.  So when I'm testing Sage with Lion, I could use `'!python!cvxopt'` and easily run self-tests on all of the other packages. This should be viewed as merely a convenience — I hope that people straighten out Python's test suite in general and cvxopt on Lion — but it might be a useful option.
+
+Apply
+
+- [attachment: trac_12579-sage-check.patch](https://github.com/sagemath/sage/files/ticket12579/trac_12579-sage-check.patch.gz) to the root repo.
+- [attachment: trac_12579-doc.patch](https://github.com/sagemath/sage/files/ticket12579/trac_12579-doc.patch.gz) to the Sage library
``````




---

archive/issue_comments_139637.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI'm not sure that I like the interface.  Personally, I would prefer two variables: one simply to determine whether or not to run tests (`SAGE_CHECK`) and another to actually determine which tests to run (which *by default* should be set to `!python`).",
    "created_at": "2012-02-26T09:29:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12579#issuecomment-139637",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:2" align="right">comment:2</div>

I'm not sure that I like the interface.  Personally, I would prefer two variables: one simply to determine whether or not to run tests (`SAGE_CHECK`) and another to actually determine which tests to run (which *by default* should be set to `!python`).



---

archive/issue_comments_139638.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nAs for implementation: the second variable (call it `SAGE_CHECK_PACKAGES` or something) should change the environment variable `SAGE_CHECK` accordingly, before running `spkg-install`.  The new GCC spkg uses `SAGE_CHECK` in its `spkg-install` and it makes sense to allow that.\n\nExample:\n\n```\nSAGE_CHECK_PACKAGES=\"!python,mpir,mpfr\"\n```\nwould **always** check mpir and mpfr, regardless of `SAGE_CHECK` but would **never** check python, regardless of `SAGE_CHECK`.\n\nThe default should be\n\n```\nSAGE_CHECK_PACKAGES=\"!python\"\n```",
    "created_at": "2012-02-26T09:37:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12579#issuecomment-139638",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:3" align="right">comment:3</div>

As for implementation: the second variable (call it `SAGE_CHECK_PACKAGES` or something) should change the environment variable `SAGE_CHECK` accordingly, before running `spkg-install`.  The new GCC spkg uses `SAGE_CHECK` in its `spkg-install` and it makes sense to allow that.

Example:

```
SAGE_CHECK_PACKAGES="!python,mpir,mpfr"
```
would **always** check mpir and mpfr, regardless of `SAGE_CHECK` but would **never** check python, regardless of `SAGE_CHECK`.

The default should be

```
SAGE_CHECK_PACKAGES="!python"
```



---

archive/issue_events_173322.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-26T09:37:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12579#event-173322"
}
```



---

archive/issue_events_173323.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-26T09:37:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12579#event-173323"
}
```



---

archive/issue_comments_139639.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nMy feeling was, why introduce a new environment variable when we can just use `SAGE_CHECK`? The whole approach might be better if we used autoconf:\n\n```\n./configure --self-tests=yes --skip-tests=python,cvxopt ...\n```\nor something like that. But I'll think about adding a second variable.",
    "created_at": "2012-02-26T19:20:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12579#issuecomment-139639",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:4" align="right">comment:4</div>

My feeling was, why introduce a new environment variable when we can just use `SAGE_CHECK`? The whole approach might be better if we used autoconf:

```
./configure --self-tests=yes --skip-tests=python,cvxopt ...
```
or something like that. But I'll think about adding a second variable.



---

archive/issue_comments_139640.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nMy main motivation was simply to exclude Python **by default**.",
    "created_at": "2012-02-26T22:29:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12579#issuecomment-139640",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:5" align="right">comment:5</div>

My main motivation was simply to exclude Python **by default**.



---

archive/issue_events_173324.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2012-02-27T05:01:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12579#event-173324"
}
```



---

archive/issue_events_173325.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2012-02-27T05:01:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12579#event-173325"
}
```



---

archive/issue_comments_139641.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nOkay, here's a new version.",
    "created_at": "2012-02-27T05:01:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12579#issuecomment-139641",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:6" align="right">comment:6</div>

Okay, here's a new version.



---

archive/issue_comments_139642.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,5 +2,5 @@\n \n Apply\n \n-- [attachment: trac_12579-sage-check.patch](https://github.com/sagemath/sage/files/ticket12579/trac_12579-sage-check.patch.gz) to the root repo.\n-- [attachment: trac_12579-doc.patch](https://github.com/sagemath/sage/files/ticket12579/trac_12579-doc.patch.gz) to the Sage library\n+- [attachment: trac_12579-sage-check.v2.patch](https://github.com/sagemath/sage/files/ticket12579/trac_12579-sage-check.v2.patch.gz) to the root repo.\n+- [attachment: trac_12579-doc.v2.patch](https://github.com/sagemath/sage/files/ticket12579/trac_12579-doc.v2.patch.gz) to the Sage library\n``````\n",
    "created_at": "2012-02-27T05:01:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12579#issuecomment-139642",
    "user": "https://github.com/jhpalmieri"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,5 +2,5 @@
 
 Apply
 
-- [attachment: trac_12579-sage-check.patch](https://github.com/sagemath/sage/files/ticket12579/trac_12579-sage-check.patch.gz) to the root repo.
-- [attachment: trac_12579-doc.patch](https://github.com/sagemath/sage/files/ticket12579/trac_12579-doc.patch.gz) to the Sage library
+- [attachment: trac_12579-sage-check.v2.patch](https://github.com/sagemath/sage/files/ticket12579/trac_12579-sage-check.v2.patch.gz) to the root repo.
+- [attachment: trac_12579-doc.v2.patch](https://github.com/sagemath/sage/files/ticket12579/trac_12579-doc.v2.patch.gz) to the Sage library
``````




---

archive/issue_events_173326.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-27T10:52:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12579#event-173326"
}
```



---

archive/issue_events_173327.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-27T10:52:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12579#event-173327"
}
```



---

archive/issue_comments_139643.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nYes, this is more or less what I had in mind.  Two small comments:\n\nThe lines\n\n```\nSAGE_CHECK=no\nexport SAGE_CHECK\n```\ncan be simplified to\n\n```\nexport SAGE_CHECK=no\n```\n\nI don't know about the portability of expr, I would use `grep` instead.  Also you don't want to match \"gdmodule\" when \"gd\" is in `$SAGE_CHECK_PACKAGES`.  Proposal:\n\n```\n# Allow spaces, commas or colons as separator (the documentation suggests commas)\nif echo \",$SAGE_CHECK_PACKAGES,\" | grep \"[ ,:]\\!$PKG_BASE[ ,:]\" >/dev/null; then\n    export SAGE_CHECK=no\nelif echo \",$SAGE_CHECK_PACKAGES,\" | grep \"[ ,:]$PKG_BASE[ ,:]\" >/dev/null; then\n    export SAGE_CHECK=yes\nfi\n```",
    "created_at": "2012-02-27T10:52:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12579#issuecomment-139643",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:7" align="right">comment:7</div>

Yes, this is more or less what I had in mind.  Two small comments:

The lines

```
SAGE_CHECK=no
export SAGE_CHECK
```
can be simplified to

```
export SAGE_CHECK=no
```

I don't know about the portability of expr, I would use `grep` instead.  Also you don't want to match "gdmodule" when "gd" is in `$SAGE_CHECK_PACKAGES`.  Proposal:

```
# Allow spaces, commas or colons as separator (the documentation suggests commas)
if echo ",$SAGE_CHECK_PACKAGES," | grep "[ ,:]\!$PKG_BASE[ ,:]" >/dev/null; then
    export SAGE_CHECK=no
elif echo ",$SAGE_CHECK_PACKAGES," | grep "[ ,:]$PKG_BASE[ ,:]" >/dev/null; then
    export SAGE_CHECK=yes
fi
```



---

archive/issue_comments_139644.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer**",
    "created_at": "2012-02-27T10:52:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12579#issuecomment-139644",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Jeroen Demeyer**



---

archive/issue_comments_139645.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nThe documentation should mention that `SAGE_CHECK_PACKAGES='!python'` by default.",
    "created_at": "2012-02-27T10:53:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12579#issuecomment-139645",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">comment:8</div>

The documentation should mention that `SAGE_CHECK_PACKAGES='!python'` by default.



---

archive/issue_comments_139646.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nInstead of using `tr` to handle lower/upper case, simply do a case-insensitive check with `grep -i`.",
    "created_at": "2012-02-27T11:01:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12579#issuecomment-139646",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:9" align="right">comment:9</div>

Instead of using `tr` to handle lower/upper case, simply do a case-insensitive check with `grep -i`.



---

archive/issue_events_173328.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2012-02-27T20:39:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12579#event-173328"
}
```



---

archive/issue_events_173329.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2012-02-27T20:39:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12579#event-173329"
}
```



---

archive/issue_comments_139647.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nOkay, new versions. (I tried `expr` on linux, OS X, and OpenSolaris, and it seemed to work on all of them, and it seems to be POSIX-standard, but I changed to grep anyway.)",
    "created_at": "2012-02-27T20:39:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12579#issuecomment-139647",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:10" align="right">comment:10</div>

Okay, new versions. (I tried `expr` on linux, OS X, and OpenSolaris, and it seemed to work on all of them, and it seems to be POSIX-standard, but I changed to grep anyway.)



---

archive/issue_comments_139648.json:
```json
{
    "body": "Attachment: **[trac_12579-sage-check.v2.patch.gz](https://github.com/sagemath/sage/files/ticket12579/trac_12579-sage-check.v2.patch.gz)**\n\nroot repo",
    "created_at": "2012-02-27T20:39:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12579#issuecomment-139648",
    "user": "https://github.com/jhpalmieri"
}
```

Attachment: **[trac_12579-sage-check.v2.patch.gz](https://github.com/sagemath/sage/files/ticket12579/trac_12579-sage-check.v2.patch.gz)**

root repo



---

archive/issue_comments_139649.json:
```json
{
    "body": "Attachment: **[trac_12579-doc.v2.patch.gz](https://github.com/sagemath/sage/files/ticket12579/trac_12579-doc.v2.patch.gz)**\n\nSage library",
    "created_at": "2012-02-27T20:39:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12579#issuecomment-139649",
    "user": "https://github.com/jhpalmieri"
}
```

Attachment: **[trac_12579-doc.v2.patch.gz](https://github.com/sagemath/sage/files/ticket12579/trac_12579-doc.v2.patch.gz)**

Sage library



---

archive/issue_comments_139650.json:
```json
{
    "body": "Dependencies: **#12479**",
    "created_at": "2012-02-28T07:59:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12579#issuecomment-139650",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#12479**



---

archive/issue_comments_139651.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,5 +2,5 @@\n \n Apply\n \n-- [attachment: trac_12579-sage-check.v2.patch](https://github.com/sagemath/sage/files/ticket12579/trac_12579-sage-check.v2.patch.gz) to the root repo.\n+- [attachment: trac_12579-sage-check.v3.patch](https://github.com/sagemath/sage/files/ticket12579/trac_12579-sage-check.v3.patch.gz) to the root repo.\n - [attachment: trac_12579-doc.v2.patch](https://github.com/sagemath/sage/files/ticket12579/trac_12579-doc.v2.patch.gz) to the Sage library\n``````\n",
    "created_at": "2012-02-28T07:59:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12579#issuecomment-139651",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,5 +2,5 @@
 
 Apply
 
-- [attachment: trac_12579-sage-check.v2.patch](https://github.com/sagemath/sage/files/ticket12579/trac_12579-sage-check.v2.patch.gz) to the root repo.
+- [attachment: trac_12579-sage-check.v3.patch](https://github.com/sagemath/sage/files/ticket12579/trac_12579-sage-check.v3.patch.gz) to the root repo.
 - [attachment: trac_12579-doc.v2.patch](https://github.com/sagemath/sage/files/ticket12579/trac_12579-doc.v2.patch.gz) to the Sage library
``````




---

archive/issue_comments_139652.json:
```json
{
    "body": "Changed dependencies from **#12479** to **#4949, #12479**",
    "created_at": "2012-02-28T12:23:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12579#issuecomment-139652",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#12479** to **#4949, #12479**



---

archive/issue_events_173330.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-28T12:23:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12579#event-173330"
}
```



---

archive/issue_events_173331.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-28T12:23:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12579#event-173331"
}
```



---

archive/issue_comments_139653.json:
```json
{
    "body": "Attachment: **[trac_12579-doc.v3.patch.gz](https://github.com/sagemath/sage/files/ticket12579/trac_12579-doc.v3.patch.gz)**\n\nRebased to #4949",
    "created_at": "2012-02-28T12:25:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12579#issuecomment-139653",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[trac_12579-doc.v3.patch.gz](https://github.com/sagemath/sage/files/ticket12579/trac_12579-doc.v3.patch.gz)**

Rebased to #4949



---

archive/issue_events_173332.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-28T12:25:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12579#event-173332"
}
```



---

archive/issue_events_173333.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-28T12:25:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12579#event-173333"
}
```



---

archive/issue_comments_139654.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,4 +3,4 @@\n Apply\n \n - [attachment: trac_12579-sage-check.v3.patch](https://github.com/sagemath/sage/files/ticket12579/trac_12579-sage-check.v3.patch.gz) to the root repo.\n-- [attachment: trac_12579-doc.v2.patch](https://github.com/sagemath/sage/files/ticket12579/trac_12579-doc.v2.patch.gz) to the Sage library\n+- [attachment: trac_12579-doc.v3.patch](https://github.com/sagemath/sage/files/ticket12579/trac_12579-doc.v3.patch.gz) to the Sage library\n``````\n",
    "created_at": "2012-02-28T12:25:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12579#issuecomment-139654",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,4 +3,4 @@
 Apply
 
 - [attachment: trac_12579-sage-check.v3.patch](https://github.com/sagemath/sage/files/ticket12579/trac_12579-sage-check.v3.patch.gz) to the root repo.
-- [attachment: trac_12579-doc.v2.patch](https://github.com/sagemath/sage/files/ticket12579/trac_12579-doc.v2.patch.gz) to the Sage library
+- [attachment: trac_12579-doc.v3.patch](https://github.com/sagemath/sage/files/ticket12579/trac_12579-doc.v3.patch.gz) to the Sage library
``````




---

archive/issue_comments_139655.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nThe rebasing here is fine with me; the new patch applies cleanly ater #12479.",
    "created_at": "2012-02-28T21:41:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12579#issuecomment-139655",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:14" align="right">comment:14</div>

The rebasing here is fine with me; the new patch applies cleanly ater #12479.



---

archive/issue_comments_139656.json:
```json
{
    "body": "Attachment: **[trac_12579-sage-check.v3.patch.gz](https://github.com/sagemath/sage/files/ticket12579/trac_12579-sage-check.v3.patch.gz)**\n\nRebased to #12479",
    "created_at": "2012-02-28T22:28:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12579#issuecomment-139656",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[trac_12579-sage-check.v3.patch.gz](https://github.com/sagemath/sage/files/ticket12579/trac_12579-sage-check.v3.patch.gz)**

Rebased to #12479



---

archive/issue_events_173334.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-29T11:41:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12579#event-173334"
}
```



---

archive/issue_events_173335.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-29T11:41:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12579#event-173335"
}
```



---

archive/issue_comments_139657.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nSeems to work well.  And Sage now builds with a simple\n\n```\nSAGE_CHECK=yes make\n```",
    "created_at": "2012-02-29T11:41:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12579#issuecomment-139657",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:15" align="right">comment:15</div>

Seems to work well.  And Sage now builds with a simple

```
SAGE_CHECK=yes make
```



---

archive/issue_comments_139658.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,6 @@\n-With the attached patch, if you set `SAGE_CHECK='!python!cvxopt'` and then build Sage, it will run self-tests for all packages except python and cvxopt. This sort of behavior can be useful with the current situation, in which python always fails self-tests (as far as I know), and a package like cvxopt fails them on OS X Lion.  So when I'm testing Sage with Lion, I could use `'!python!cvxopt'` and easily run self-tests on all of the other packages. This should be viewed as merely a convenience \u2014 I hope that people straighten out Python's test suite in general and cvxopt on Lion \u2014 but it might be a useful option.\n+With the attached patch, if you set `SAGE_CHECK=yes` and `SAGE_CHECK_PACKAGES='!python,!cvxopt'` and then build Sage, it will run self-tests for all packages except python and cvxopt.  By default, `SAGE_CHECK_PACKAGES=!python`.\n+\n+This sort of behavior can be useful with the current situation, in which python always fails self-tests (as far as I know), and a package like cvxopt fails them on OS X Lion.  So when I'm testing Sage with Lion, I could use `'!python,!cvxopt'` and easily run self-tests on all of the other packages. This should be viewed as merely a convenience \u2014 I hope that people straighten out Python's test suite in general and cvxopt on Lion \u2014 but it might be a useful option.\n \n Apply\n \n``````\n",
    "created_at": "2012-03-03T14:04:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12579#issuecomment-139658",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,6 @@
-With the attached patch, if you set `SAGE_CHECK='!python!cvxopt'` and then build Sage, it will run self-tests for all packages except python and cvxopt. This sort of behavior can be useful with the current situation, in which python always fails self-tests (as far as I know), and a package like cvxopt fails them on OS X Lion.  So when I'm testing Sage with Lion, I could use `'!python!cvxopt'` and easily run self-tests on all of the other packages. This should be viewed as merely a convenience — I hope that people straighten out Python's test suite in general and cvxopt on Lion — but it might be a useful option.
+With the attached patch, if you set `SAGE_CHECK=yes` and `SAGE_CHECK_PACKAGES='!python,!cvxopt'` and then build Sage, it will run self-tests for all packages except python and cvxopt.  By default, `SAGE_CHECK_PACKAGES=!python`.
+
+This sort of behavior can be useful with the current situation, in which python always fails self-tests (as far as I know), and a package like cvxopt fails them on OS X Lion.  So when I'm testing Sage with Lion, I could use `'!python,!cvxopt'` and easily run self-tests on all of the other packages. This should be viewed as merely a convenience — I hope that people straighten out Python's test suite in general and cvxopt on Lion — but it might be a useful option.
 
 Apply
 
``````




---

archive/issue_events_173336.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-03-04T21:17:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12579#event-173336"
}
```



---

archive/issue_events_173337.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-03-04T21:17:01Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12579#event-173337"
}
```



---

archive/issue_comments_139659.json:
```json
{
    "body": "Merged: **sage-5.0.beta7**",
    "created_at": "2012-03-04T21:17:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12579#issuecomment-139659",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.0.beta7**



---

archive/issue_events_173338.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-03-25T21:08:24Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/12579",
    "title_is": "Mechanism to skip self-tests (spkg-check) for certain packages",
    "title_was": "mechanism to skip self-tests for certain spkgs",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12579#event-173338"
}
```
