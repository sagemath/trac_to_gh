# Issue 12887: Optional args in Matrix_Mod submatrix method

archive/issues_012715.json:
```json
{
    "body": "\nWhen computing the smith form of a matrix (over a finite field) it promts an error\n\n```python\nsage: AA = matrix(Zmod(2), [[1,1],[1,0],[0,1]])\nsage: AA.smith_form()\n```\n\nIt promts\n\n```\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"_sage_input_100.py\", line 10, in <module>\n    exec compile(u'open(\"___code___.py\",\"w\").write(\"# -*- coding: utf-8 -*-\\\\n\" + _support_.preparse_worksheet_cell(base64.b64decode(\"QUEuc21pdGhfZm9ybSgp\"),globals())+\"\\\\n\"); execfile(os.path.abspath(\"___code___.py\"))\n  File \"\", line 1, in <module>\n   \n  File \"/tmp/tmpXWhShB/___code___.py\", line 2, in <module>\n    exec compile(u'AA.smith_form()\n  File \"\", line 1, in <module>\n   \n  File \"matrix2.pyx\", line 10512, in sage.matrix.matrix2.Matrix.smith_form (sage/matrix/matrix2.c:49285)\n  File \"matrix_mod2_dense.pyx\", line 1666, in sage.matrix.matrix_mod2_dense.Matrix_mod2_dense.submatrix (sage/matrix/matrix_mod2_dense.c:9696)\nTypeError: submatrix() takes exactly 4 positional arguments (2 given)\n```\n\nIt seems that the \"Matrix_mod\" submatrix method doesn't have \"ncols\" and \"nrows\" as optional parameters (like the base Matrix class).\n\nI used Sage 4.8.0 in an Ubuntu 12.04 (32 bits).\n\nsage-support discussion: [https://groups.google.com/forum/?fromgroups#!topic/sage-support/TssHVf3oUeM](https://groups.google.com/forum/?fromgroups#!topic/sage-support/TssHVf3oUeM)\n\nAssignee: jason, was\n\nKeywords: matrix, finite field, submatrix\n\nWork Issues: add examples to doctests\n\nReviewer: Martin Albrecht, Simon Brandhorst\n\nAuthor: David Sanchez Charles\n\nResolution: worksforme\n\nIssue created by migration from https://trac.sagemath.org/ticket/12887\n\n",
    "closed_at": "2018-11-08T16:12:46Z",
    "created_at": "2012-04-27T14:17:08Z",
    "labels": [
        "component: linear algebra",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Optional args in Matrix_Mod submatrix method",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12887",
    "user": "https://trac.sagemath.org/admin/accounts/users/dscharles"
}
```

When computing the smith form of a matrix (over a finite field) it promts an error

```python
sage: AA = matrix(Zmod(2), [[1,1],[1,0],[0,1]])
sage: AA.smith_form()
```

It promts

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "_sage_input_100.py", line 10, in <module>
    exec compile(u'open("___code___.py","w").write("# -*- coding: utf-8 -*-\\n" + _support_.preparse_worksheet_cell(base64.b64decode("QUEuc21pdGhfZm9ybSgp"),globals())+"\\n"); execfile(os.path.abspath("___code___.py"))
  File "", line 1, in <module>
   
  File "/tmp/tmpXWhShB/___code___.py", line 2, in <module>
    exec compile(u'AA.smith_form()
  File "", line 1, in <module>
   
  File "matrix2.pyx", line 10512, in sage.matrix.matrix2.Matrix.smith_form (sage/matrix/matrix2.c:49285)
  File "matrix_mod2_dense.pyx", line 1666, in sage.matrix.matrix_mod2_dense.Matrix_mod2_dense.submatrix (sage/matrix/matrix_mod2_dense.c:9696)
TypeError: submatrix() takes exactly 4 positional arguments (2 given)
```

It seems that the "Matrix_mod" submatrix method doesn't have "ncols" and "nrows" as optional parameters (like the base Matrix class).

I used Sage 4.8.0 in an Ubuntu 12.04 (32 bits).

sage-support discussion: [https://groups.google.com/forum/?fromgroups#!topic/sage-support/TssHVf3oUeM](https://groups.google.com/forum/?fromgroups#!topic/sage-support/TssHVf3oUeM)

Assignee: jason, was

Keywords: matrix, finite field, submatrix

Work Issues: add examples to doctests

Reviewer: Martin Albrecht, Simon Brandhorst

Author: David Sanchez Charles

Resolution: worksforme

Issue created by migration from https://trac.sagemath.org/ticket/12887





---

archive/issue_comments_185853.json:
```json
{
    "body": "Attachment [trac_12887_submatrix_over_finite_field.patch](tarball://root/attachments/some-uuid/ticket12887/trac_12887_submatrix_over_finite_field.patch) by dscharles created at 2012-04-27 14:23:23",
    "created_at": "2012-04-27T14:23:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12887#issuecomment-185853",
    "user": "https://trac.sagemath.org/admin/accounts/users/dscharles"
}
```

Attachment [trac_12887_submatrix_over_finite_field.patch](tarball://root/attachments/some-uuid/ticket12887/trac_12887_submatrix_over_finite_field.patch) by dscharles created at 2012-04-27 14:23:23



---

archive/issue_comments_185854.json:
```json
{
    "body": "<a id='comment:1'></a>\nI attached a patch. I hope it's well done (It's my first one...)",
    "created_at": "2012-04-27T14:24:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12887#issuecomment-185854",
    "user": "https://trac.sagemath.org/admin/accounts/users/dscharles"
}
```

<a id='comment:1'></a>
I attached a patch. I hope it's well done (It's my first one...)



---

archive/issue_comments_185855.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -24,7 +24,7 @@\n TypeError: submatrix() takes exactly 4 positional arguments (2 given)\n ```\n \n-It seems like the \"Matrix_mod\" submatrix method doesn't have \"ncols\" and \"nrows\" as optional parameters (like the base Matrix class).\n+It seems that the \"Matrix_mod\" submatrix method doesn't have \"ncols\" and \"nrows\" as optional parameters (like the base Matrix class).\n \n I used Sage 4.8.0 in an Ubuntu 12.04 (32 bits).\n \n``````\n",
    "created_at": "2012-04-27T14:28:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12887#issuecomment-185855",
    "user": "https://trac.sagemath.org/admin/accounts/users/dscharles"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -24,7 +24,7 @@
 TypeError: submatrix() takes exactly 4 positional arguments (2 given)
 ```
 
-It seems like the "Matrix_mod" submatrix method doesn't have "ncols" and "nrows" as optional parameters (like the base Matrix class).
+It seems that the "Matrix_mod" submatrix method doesn't have "ncols" and "nrows" as optional parameters (like the base Matrix class).
 
 I used Sage 4.8.0 in an Ubuntu 12.04 (32 bits).
 
``````




---

archive/issue_comments_185856.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-04-30T16:47:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12887#issuecomment-185856",
    "user": "https://github.com/malb"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_185857.json:
```json
{
    "body": "<a id='comment:3'></a>\nPatch looks good to me. \n\nPS: Can you add yourself to http://trac.sagemath.org/sage_trac/wiki please.",
    "created_at": "2012-04-30T16:47:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12887#issuecomment-185857",
    "user": "https://github.com/malb"
}
```

<a id='comment:3'></a>
Patch looks good to me. 

PS: Can you add yourself to http://trac.sagemath.org/sage_trac/wiki please.



---

archive/issue_comments_185858.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Martin Albrecht\"",
    "created_at": "2012-04-30T16:47:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12887#issuecomment-185858",
    "user": "https://github.com/malb"
}
```

Changing reviewer from "" to "Martin Albrecht"



---

archive/issue_comments_185859.json:
```json
{
    "body": "Changing author from \"\" to \"David Sanchez Charles\"",
    "created_at": "2012-04-30T16:47:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12887#issuecomment-185859",
    "user": "https://github.com/malb"
}
```

Changing author from "" to "David Sanchez Charles"



---

archive/issue_comments_185860.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-04-30T16:47:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12887#issuecomment-185860",
    "user": "https://github.com/malb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_185861.json:
```json
{
    "body": "It also required some output changes.",
    "created_at": "2012-04-30T17:40:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12887#issuecomment-185861",
    "user": "https://trac.sagemath.org/admin/accounts/users/dscharles"
}
```

It also required some output changes.



---

archive/issue_comments_185862.json:
```json
{
    "body": "<a id='comment:5'></a>\nAttachment [trac_12887_changed_output.patch](tarball://root/attachments/some-uuid/ticket12887/trac_12887_changed_output.patch) by dscharles created at 2012-04-30 17:49:20\n\nI'm sorry I didn't realized before, but it also was necessary to change the output in order to work properly.\n(Should I open another ticket?)\n\nBefore the last patch:\n\n```python\nsage: A = matrix([[1,1],[2,2],[3,3]])\nsage: B = matrix(Zmod(2), [[1,1],[2,2],[3,3]])\nsage: A.submatrix(2,2)\n[]\nsage: A.submatrix(2,2).ncols()\n0\nsage: A.submatrix(2,2).nrows()\n1\nsage: B\n[]\nsage: B.submatrix(2,2).ncols()\n0\nsage: B.submatrix(2,2).nrows()\n0\n```\n\nAfter the patch\n\n```python\nsage: B.submatrix(2,2)\n[]\nsage: B.submatrix(2,2).ncols()\n0\nsage: B.submatrix(2,2).nrows()\n1\n```\n\nWith that done, the smith_form method worked with some (easy) examples.",
    "created_at": "2012-04-30T17:49:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12887#issuecomment-185862",
    "user": "https://trac.sagemath.org/admin/accounts/users/dscharles"
}
```

<a id='comment:5'></a>
Attachment [trac_12887_changed_output.patch](tarball://root/attachments/some-uuid/ticket12887/trac_12887_changed_output.patch) by dscharles created at 2012-04-30 17:49:20

I'm sorry I didn't realized before, but it also was necessary to change the output in order to work properly.
(Should I open another ticket?)

Before the last patch:

```python
sage: A = matrix([[1,1],[2,2],[3,3]])
sage: B = matrix(Zmod(2), [[1,1],[2,2],[3,3]])
sage: A.submatrix(2,2)
[]
sage: A.submatrix(2,2).ncols()
0
sage: A.submatrix(2,2).nrows()
1
sage: B
[]
sage: B.submatrix(2,2).ncols()
0
sage: B.submatrix(2,2).nrows()
0
```

After the patch

```python
sage: B.submatrix(2,2)
[]
sage: B.submatrix(2,2).ncols()
0
sage: B.submatrix(2,2).nrows()
1
```

With that done, the smith_form method worked with some (easy) examples.



---

archive/issue_comments_185863.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-05-01T09:21:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12887#issuecomment-185863",
    "user": "https://github.com/malb"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_185864.json:
```json
{
    "body": "<a id='comment:6'></a>\nLooks good, can you merge the two patches? Also, if you change stuff like that you should switch from *positive review* to *needs review* below.",
    "created_at": "2012-05-01T09:21:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12887#issuecomment-185864",
    "user": "https://github.com/malb"
}
```

<a id='comment:6'></a>
Looks good, can you merge the two patches? Also, if you change stuff like that you should switch from *positive review* to *needs review* below.



---

archive/issue_comments_185865.json:
```json
{
    "body": "Attachment [trac_12887_Matrix_mod_submatrix_fix.patch](tarball://root/attachments/some-uuid/ticket12887/trac_12887_Matrix_mod_submatrix_fix.patch) by dscharles created at 2012-05-01 11:14:47\n\nMerged patch",
    "created_at": "2012-05-01T11:14:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12887#issuecomment-185865",
    "user": "https://trac.sagemath.org/admin/accounts/users/dscharles"
}
```

Attachment [trac_12887_Matrix_mod_submatrix_fix.patch](tarball://root/attachments/some-uuid/ticket12887/trac_12887_Matrix_mod_submatrix_fix.patch) by dscharles created at 2012-05-01 11:14:47

Merged patch



---

archive/issue_comments_185866.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-05-01T11:16:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12887#issuecomment-185866",
    "user": "https://trac.sagemath.org/admin/accounts/users/dscharles"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_185867.json:
```json
{
    "body": "<a id='comment:7'></a>\nMerged patch uploaded.",
    "created_at": "2012-05-01T11:16:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12887#issuecomment-185867",
    "user": "https://trac.sagemath.org/admin/accounts/users/dscharles"
}
```

<a id='comment:7'></a>
Merged patch uploaded.



---

archive/issue_comments_185868.json:
```json
{
    "body": "<a id='comment:8'></a>\nLooks good, but could you also add those examples from this ticket to the doctests to test that your code produces the desired outcome. Sorry for only mentioning that now!",
    "created_at": "2012-05-01T11:38:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12887#issuecomment-185868",
    "user": "https://github.com/malb"
}
```

<a id='comment:8'></a>
Looks good, but could you also add those examples from this ticket to the doctests to test that your code produces the desired outcome. Sorry for only mentioning that now!



---

archive/issue_events_048813.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12887",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12887#event-48813"
}
```



---

archive/issue_events_048814.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12887",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12887#event-48814"
}
```



---

archive/issue_events_048815.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12887",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12887#event-48815"
}
```



---

archive/issue_comments_185869.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-04-03T08:56:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12887#issuecomment-185869",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_185870.json:
```json
{
    "body": "Changing work_issues from \"\" to \"add examples to doctests\"",
    "created_at": "2014-04-03T08:56:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12887#issuecomment-185870",
    "user": "https://github.com/rwst"
}
```

Changing work_issues from "" to "add examples to doctests"



---

archive/issue_events_048816.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12887",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12887#event-48816"
}
```



---

archive/issue_events_048817.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12887",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12887#event-48817"
}
```



---

archive/issue_events_048818.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12887",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12887#event-48818"
}
```



---

archive/issue_events_048819.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12887",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12887#event-48819"
}
```



---

archive/issue_comments_185871.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-04-30T08:48:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12887#issuecomment-185871",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_events_048820.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-04-30T08:48:32Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12887",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12887#event-48820"
}
```



---

archive/issue_events_048821.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-04-30T08:48:32Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12887",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12887#event-48821"
}
```



---

archive/issue_comments_185872.json:
```json
{
    "body": "<a id='comment:14'></a>\nLet us close this old ticket. Works now:\n\n```\nsage: AA = matrix(Zmod(2), [[1,1],[1,0],[0,1]])\nsage: AA.smith_form()\n(\n[1 0]  [1 0 0]       \n[0 1]  [1 1 0]  [1 1]\n[0 0], [1 1 1], [0 1]\n)\n```",
    "created_at": "2018-04-30T08:48:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12887#issuecomment-185872",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:14'></a>
Let us close this old ticket. Works now:

```
sage: AA = matrix(Zmod(2), [[1,1],[1,0],[0,1]])
sage: AA.smith_form()
(
[1 0]  [1 0 0]       
[0 1]  [1 1 0]  [1 1]
[0 0], [1 1 1], [0 1]
)
```



---

archive/issue_comments_185873.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-06-02T11:26:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12887#issuecomment-185873",
    "user": "https://github.com/simonbrandhorst"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_185874.json:
```json
{
    "body": "Changing reviewer from \"Martin Albrecht\" to \"Martin Albrecht, Simon Brandhorst\"",
    "created_at": "2018-06-02T11:26:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12887#issuecomment-185874",
    "user": "https://github.com/simonbrandhorst"
}
```

Changing reviewer from "Martin Albrecht" to "Martin Albrecht, Simon Brandhorst"



---

archive/issue_events_048822.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-11-08T16:12:46Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12887",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12887#event-48822"
}
```



---

archive/issue_comments_185875.json:
```json
{
    "body": "Resolution: worksforme",
    "created_at": "2018-11-08T16:12:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12887#issuecomment-185875",
    "user": "https://github.com/embray"
}
```

Resolution: worksforme
