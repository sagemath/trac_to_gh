# Issue 12108: is_eulerian doesn't handle disconnected graphs properly

archive/issues_011936.json:
```json
{
    "body": "Consider following:\n\n```\nsage: g = DiGraph({0:[1], 1:[0], 2:[]}); g.is_eulerian()\nFalse\n```\n\nis_eulerian sees two components and refuses to label graph as an eulerian one. But the common definition (and the docstring) says that eulerian graph has all its edges coverable by one tour -- that permits disconnected graphs as long as every component but one don't contains any edges.\n\nApply:\n* [attachment:trac_12108_is_eulerian_fix2.patch]\n\nAssignee: jason, ncohen, rlm\n\nCC:  @nathanncohen\n\nResolution: fixed\n\nAuthor: Luk\u00e1\u0161 L\u00e1nsk\u00fd\n\nReviewer: Nathann Cohen\n\nMerged: sage-4.8.alpha5\n\nIssue created by migration from https://trac.sagemath.org/ticket/12108\n\n",
    "closed_at": "2011-12-14T22:28:45Z",
    "created_at": "2011-12-02T22:28:13Z",
    "labels": [
        "component: graph theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.8",
    "title": "is_eulerian doesn't handle disconnected graphs properly",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12108",
    "user": "https://trac.sagemath.org/admin/accounts/users/brunellus"
}
```
Consider following:

```
sage: g = DiGraph({0:[1], 1:[0], 2:[]}); g.is_eulerian()
False
```

is_eulerian sees two components and refuses to label graph as an eulerian one. But the common definition (and the docstring) says that eulerian graph has all its edges coverable by one tour -- that permits disconnected graphs as long as every component but one don't contains any edges.

Apply:
* [attachment:trac_12108_is_eulerian_fix2.patch]

Assignee: jason, ncohen, rlm

CC:  @nathanncohen

Resolution: fixed

Author: Lukáš Lánský

Reviewer: Nathann Cohen

Merged: sage-4.8.alpha5

Issue created by migration from https://trac.sagemath.org/ticket/12108





---

archive/issue_comments_144968.json:
```json
{
    "body": "<a id='comment:2'></a>Attachment [trac_12108_is_eulerian_fix.patch](tarball://root/attachments/some-uuid/ticket12108/trac_12108_is_eulerian_fix.patch) by brunellus created at 2011-12-03 18:24:11\n\nMy first patch. :-)",
    "created_at": "2011-12-03T18:24:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12108#issuecomment-144968",
    "user": "https://trac.sagemath.org/admin/accounts/users/brunellus"
}
```

<a id='comment:2'></a>Attachment [trac_12108_is_eulerian_fix.patch](tarball://root/attachments/some-uuid/ticket12108/trac_12108_is_eulerian_fix.patch) by brunellus created at 2011-12-03 18:24:11

My first patch. :-)



---

archive/issue_comments_144969.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-12-03T18:24:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12108#issuecomment-144969",
    "user": "https://trac.sagemath.org/admin/accounts/users/brunellus"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_144970.json:
```json
{
    "body": "<a id='comment:3'></a>Replying to [comment:2 brunellus]:\n> My first patch. :-)\n\n\nAnd a good one ! `:-)`\n\nJust one remark : the connected_components_number actually calls connected components. So instead of computing the number of CC and *then* go over all vertices, what would you think of something like that :\n\n```\nok = True\nfor cc in self.connected_components():\n    if len(cc) > 1:\n        if ok:\n           ok = False\n        else:\n           return False\n```\n\nI feel like it could be faster, but that's really about milliseconds `:-)`\n\nNathann",
    "created_at": "2011-12-03T21:01:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12108#issuecomment-144970",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:3'></a>Replying to [comment:2 brunellus]:
> My first patch. :-)


And a good one ! `:-)`

Just one remark : the connected_components_number actually calls connected components. So instead of computing the number of CC and *then* go over all vertices, what would you think of something like that :

```
ok = True
for cc in self.connected_components():
    if len(cc) > 1:
        if ok:
           ok = False
        else:
           return False
```

I feel like it could be faster, but that's really about milliseconds `:-)`

Nathann



---

archive/issue_comments_144971.json:
```json
{
    "body": "<a id='comment:4'></a>Thanks for pointing this out. I will send another patch (with a few more tests cases, also) -- is it prefered to create it on top of the first one, or is it better to be replacement?",
    "created_at": "2011-12-04T13:26:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12108#issuecomment-144971",
    "user": "https://trac.sagemath.org/admin/accounts/users/brunellus"
}
```

<a id='comment:4'></a>Thanks for pointing this out. I will send another patch (with a few more tests cases, also) -- is it prefered to create it on top of the first one, or is it better to be replacement?



---

archive/issue_comments_144972.json:
```json
{
    "body": "<a id='comment:5'></a>Oh, it is better to replace the patch (on bigger patches you can have a lot of modifications to make, soo...). It actually is not hard if you use mercurial queue\n\nhttp://wiki.sagemath.org/MercurialQueues\n\nAnd it will not be a waste if you intend to write other patches `;-)`\n\nNathann",
    "created_at": "2011-12-04T13:29:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12108#issuecomment-144972",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:5'></a>Oh, it is better to replace the patch (on bigger patches you can have a lot of modifications to make, soo...). It actually is not hard if you use mercurial queue

http://wiki.sagemath.org/MercurialQueues

And it will not be a waste if you intend to write other patches `;-)`

Nathann



---

archive/issue_comments_144973.json:
```json
{
    "body": "<a id='comment:6'></a>Attachment [trac_12108_is_eulerian_fix2.patch](tarball://root/attachments/some-uuid/ticket12108/trac_12108_is_eulerian_fix2.patch) by brunellus created at 2011-12-04 16:34:42\n\nThanks very much for the advices.\n\nGraph.eulerian_circuit() suffers from a similar error (it tries to take first vertex at hand and if it is an isolated one, it immidiately fails) -- but I am already rewriting it for #10135, keeping this in mind.",
    "created_at": "2011-12-04T16:34:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12108#issuecomment-144973",
    "user": "https://trac.sagemath.org/admin/accounts/users/brunellus"
}
```

<a id='comment:6'></a>Attachment [trac_12108_is_eulerian_fix2.patch](tarball://root/attachments/some-uuid/ticket12108/trac_12108_is_eulerian_fix2.patch) by brunellus created at 2011-12-04 16:34:42

Thanks very much for the advices.

Graph.eulerian_circuit() suffers from a similar error (it tries to take first vertex at hand and if it is an isolated one, it immidiately fails) -- but I am already rewriting it for #10135, keeping this in mind.



---

archive/issue_comments_144974.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-12-10T20:12:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12108#issuecomment-144974",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_144975.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -7,6 +7,9 @@\n \n is_eulerian sees two components and refuses to label graph as an eulerian one. But the common definition (and the docstring) says that eulerian graph has all its edges coverable by one tour -- that permits disconnected graphs as long as every component but one don't contains any edges.\n \n+Apply:\n+* [attachment:trac_12108_is_eulerian_fix2.patch]\n+\n Comment: 1\n \n Issue created by migration from https://trac.sagemath.org/ticket/12108\n```\n",
    "created_at": "2011-12-10T20:12:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12108#issuecomment-144975",
    "user": "https://github.com/nathanncohen"
}
```

Description changed:
```diff
--- 
+++ 
@@ -7,6 +7,9 @@
 
 is_eulerian sees two components and refuses to label graph as an eulerian one. But the common definition (and the docstring) says that eulerian graph has all its edges coverable by one tour -- that permits disconnected graphs as long as every component but one don't contains any edges.
 
+Apply:
+* [attachment:trac_12108_is_eulerian_fix2.patch]
+
 Comment: 1
 
 Issue created by migration from https://trac.sagemath.org/ticket/12108
```




---

archive/issue_comments_144976.json:
```json
{
    "body": "<a id='comment:7'></a>Oh ! I did not noticed you updated the patch...... It's good to go ! `:-)`\n\nNathann",
    "created_at": "2011-12-10T20:12:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12108#issuecomment-144976",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:7'></a>Oh ! I did not noticed you updated the patch...... It's good to go ! `:-)`

Nathann



---

archive/issue_comments_144977.json:
```json
{
    "body": "<a id='comment:8'></a>Thanks!",
    "created_at": "2011-12-11T15:44:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12108#issuecomment-144977",
    "user": "https://trac.sagemath.org/admin/accounts/users/brunellus"
}
```

<a id='comment:8'></a>Thanks!



---

archive/issue_events_032169.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-14T22:28:45Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12108",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12108#event-32169"
}
```



---

archive/issue_comments_144978.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-12-14T22:28:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12108#issuecomment-144978",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
