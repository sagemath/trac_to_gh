# Issue 12071: Call `__init__` of base classes

archive/issues_011899.json:
```json
{
    "body": "Base classes are useful, and they are used. They would be even more useful if one would call their `__init__` - but that's often not done in Sage.\n\nFor example, even though the class of continued fraction field inherits from the base class `sage.rings.ring.Field`, it used to only call `ParentWithGens.__init__`. That is very annoying, since by #9138 `Field.__init__` would automatically initialise the correct category.\n\nI fixed a couple of cases at #11900, so, I make this a dependency. Hoewever, according to search_src, there are still many cases left that needs to be looked at:\n\n```\ntensor/differential_forms.py:110:        ParentWithGens.__init__(self, SR, \\\ngroups/group.pyx:55:        sage.structure.parent_gens.ParentWithGens.__init__(self,\nrings/real_mpfi.pyx:451:        ParentWithGens.__init__(self, self, tuple([]), False, category = Fields())\nrings/multi_power_series_ring.py:305:        ParentWithGens.__init__(self, base_ring, name_list)\nrings/complex_field.py:185:        ParentWithGens.__init__(self, self._real_field(), ('I',), False, category = Fields())\nrings/integer_ring.pyx:236:        ParentWithGens.__init__(self, self, ('x',), normalize=False, category = EuclideanDomains())\nrings/complex_mpc.pyx:297:        ParentWithGens.__init__(self, self._real_field(), ('I',), False)\nrings/complex_double.pyx:158:        ParentWithGens.__init__(self, self, ('I',), normalize=False, category = Fields())\nrings/complex_interval_field.py:144:        ParentWithGens.__init__(self, self._real_field(), ('I',), False, category = Fields())\nrings/infinity.py:472:        ParentWithGens.__init__(self, self, names=('oo',), normalize=False)\nrings/infinity.py:783:        ParentWithGens.__init__(self, self, names=('oo',), normalize=False)\nrings/real_mpfr.pyx:308:        ParentWithGens.__init__(self, self, tuple([]), False, category = Fields())\nrings/rational_field.py:213:        ParentWithGens.__init__(self, self, category = QuotientFields())\nrings/number_field/number_field.py:1005:        ParentWithGens.__init__(self, QQ, name, category=category)\ncoding/linear_code.py:706:        ParentWithGens.__init__(self, base_ring)\n```\n\n\nAssignee: tbd\n\nCC:  @kini\n\nKeywords: base class __init__\n\nStatus: new\n\nDependencies: #11900\n\nIssue created by migration from https://trac.sagemath.org/ticket/12071\n\n",
    "created_at": "2011-11-22T08:05:56Z",
    "labels": [
        "component: performance"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Call `__init__` of base classes",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12071",
    "user": "https://github.com/simon-king-jena"
}
```
Base classes are useful, and they are used. They would be even more useful if one would call their `__init__` - but that's often not done in Sage.

For example, even though the class of continued fraction field inherits from the base class `sage.rings.ring.Field`, it used to only call `ParentWithGens.__init__`. That is very annoying, since by #9138 `Field.__init__` would automatically initialise the correct category.

I fixed a couple of cases at #11900, so, I make this a dependency. Hoewever, according to search_src, there are still many cases left that needs to be looked at:

```
tensor/differential_forms.py:110:        ParentWithGens.__init__(self, SR, \
groups/group.pyx:55:        sage.structure.parent_gens.ParentWithGens.__init__(self,
rings/real_mpfi.pyx:451:        ParentWithGens.__init__(self, self, tuple([]), False, category = Fields())
rings/multi_power_series_ring.py:305:        ParentWithGens.__init__(self, base_ring, name_list)
rings/complex_field.py:185:        ParentWithGens.__init__(self, self._real_field(), ('I',), False, category = Fields())
rings/integer_ring.pyx:236:        ParentWithGens.__init__(self, self, ('x',), normalize=False, category = EuclideanDomains())
rings/complex_mpc.pyx:297:        ParentWithGens.__init__(self, self._real_field(), ('I',), False)
rings/complex_double.pyx:158:        ParentWithGens.__init__(self, self, ('I',), normalize=False, category = Fields())
rings/complex_interval_field.py:144:        ParentWithGens.__init__(self, self._real_field(), ('I',), False, category = Fields())
rings/infinity.py:472:        ParentWithGens.__init__(self, self, names=('oo',), normalize=False)
rings/infinity.py:783:        ParentWithGens.__init__(self, self, names=('oo',), normalize=False)
rings/real_mpfr.pyx:308:        ParentWithGens.__init__(self, self, tuple([]), False, category = Fields())
rings/rational_field.py:213:        ParentWithGens.__init__(self, self, category = QuotientFields())
rings/number_field/number_field.py:1005:        ParentWithGens.__init__(self, QQ, name, category=category)
coding/linear_code.py:706:        ParentWithGens.__init__(self, base_ring)
```


Assignee: tbd

CC:  @kini

Keywords: base class __init__

Status: new

Dependencies: #11900

Issue created by migration from https://trac.sagemath.org/ticket/12071





---

archive/issue_comments_167354.json:
```json
{
    "body": "<a id='comment:2'></a>I guess the priority \"major\" is enough. After all, we are not talking about errors.",
    "created_at": "2011-11-22T09:47:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12071#issuecomment-167354",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:2'></a>I guess the priority "major" is enough. After all, we are not talking about errors.



---

archive/issue_comments_167355.json:
```json
{
    "body": "<a id='comment:3'></a>It was my understanding that this is done intentionally since these parents don't use the new coercion framework, so you get less errors if you circumvent some of the constructors. So really, you are saying rewrite everything for the newer framework :-)",
    "created_at": "2011-11-22T13:54:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12071#issuecomment-167355",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:3'></a>It was my understanding that this is done intentionally since these parents don't use the new coercion framework, so you get less errors if you circumvent some of the constructors. So really, you are saying rewrite everything for the newer framework :-)



---

archive/issue_comments_167356.json:
```json
{
    "body": "<a id='comment:4'></a>Shouldn't that be done anyway?",
    "created_at": "2011-11-22T14:02:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12071#issuecomment-167356",
    "user": "https://github.com/kini"
}
```

<a id='comment:4'></a>Shouldn't that be done anyway?



---

archive/issue_comments_167357.json:
```json
{
    "body": "<a id='comment:5'></a>Replying to [comment:3 vbraun]:\n> It was my understanding that this is done intentionally since these parents don't use the new coercion framework, so you get less errors if you circumvent some of the constructors. So really, you are saying rewrite everything for the newer framework :-)\n\n\nI don't think so. It rather seems to me that these are very old bits of code that predate the new coercion framework. Moreover, in the few cases that I fixed at #11900, it was really just \"replace `ParentWithGens.__init__` with the proper thing to do\", and then it worked, modulo some trivial doctest fixes.",
    "created_at": "2011-11-22T14:52:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12071",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12071#issuecomment-167357",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:5'></a>Replying to [comment:3 vbraun]:
> It was my understanding that this is done intentionally since these parents don't use the new coercion framework, so you get less errors if you circumvent some of the constructors. So really, you are saying rewrite everything for the newer framework :-)


I don't think so. It rather seems to me that these are very old bits of code that predate the new coercion framework. Moreover, in the few cases that I fixed at #11900, it was really just "replace `ParentWithGens.__init__` with the proper thing to do", and then it worked, modulo some trivial doctest fixes.



---

archive/issue_events_032058.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12071",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12071#event-32058"
}
```



---

archive/issue_events_032059.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12071",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12071#event-32059"
}
```



---

archive/issue_events_032060.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12071",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12071#event-32060"
}
```



---

archive/issue_events_032061.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12071",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12071#event-32061"
}
```



---

archive/issue_events_032062.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12071",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12071#event-32062"
}
```



---

archive/issue_events_032063.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12071",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12071#event-32063"
}
```



---

archive/issue_events_032064.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12071",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12071#event-32064"
}
```
