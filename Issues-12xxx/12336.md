# Issue 12336: The optional doctests in sage/databases/symbolic_data.py are misformatted so they are never run

archive/issues_012164.json:
```json
{
    "body": "Assignee: mvngu\n\nCC:  @orlitzky\n\nThe format for optional tests is:\n\n```\nsage:   the_test   # optional - package_or_other_name\n```\nBut in databases/symbolic_data.py, we find\n\n```\nsage: search_src('optional', 'database_symbo')\ndatabases/symbolic_data.py:33:    sage: sd = SymbolicData(); sd # optional requires database_symbolic_data\ndatabases/symbolic_data.py:36:    sage: sd.ZeroDim__example_1 # optional requires database_symbolic_data\ndatabases/symbolic_data.py:39:    sage: sd.Katsura_3 # optional requires database_symbolic_data\n...\n```\n\nUsing \"requires\" doesn't work, though you can optional put that after the dash.\n\n**apply** [attachment:trac_12336_symbolic_data.patch]\n\nIssue created by migration from https://trac.sagemath.org/ticket/12336\n\n",
    "closed_at": "2012-02-14T14:21:52Z",
    "created_at": "2012-01-21T21:01:24Z",
    "labels": [
        "component: doctest coverage",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.0",
    "title": "The optional doctests in sage/databases/symbolic_data.py are misformatted so they are never run",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12336",
    "user": "https://github.com/williamstein"
}
```
Assignee: mvngu

CC:  @orlitzky

The format for optional tests is:

```
sage:   the_test   # optional - package_or_other_name
```
But in databases/symbolic_data.py, we find

```
sage: search_src('optional', 'database_symbo')
databases/symbolic_data.py:33:    sage: sd = SymbolicData(); sd # optional requires database_symbolic_data
databases/symbolic_data.py:36:    sage: sd.ZeroDim__example_1 # optional requires database_symbolic_data
databases/symbolic_data.py:39:    sage: sd.Katsura_3 # optional requires database_symbolic_data
...
```

Using "requires" doesn't work, though you can optional put that after the dash.

**apply** [attachment:trac_12336_symbolic_data.patch]

Issue created by migration from https://trac.sagemath.org/ticket/12336





---

archive/issue_comments_141346.json:
```json
{
    "body": "Attachment [sage-trac_12336.patch](tarball://root/attachments/some-uuid/ticket12336/sage-trac_12336.patch) by @orlitzky created at 2012-01-24 00:22:12\n\nFix optional syntax in symbolic_data.py",
    "created_at": "2012-01-24T00:22:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12336#issuecomment-141346",
    "user": "https://github.com/orlitzky"
}
```

Attachment [sage-trac_12336.patch](tarball://root/attachments/some-uuid/ticket12336/sage-trac_12336.patch) by @orlitzky created at 2012-01-24 00:22:12

Fix optional syntax in symbolic_data.py



---

archive/issue_comments_141347.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-01-24T00:25:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12336#issuecomment-141347",
    "user": "https://github.com/orlitzky"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_141348.json:
```json
{
    "body": "All optional doctests in symbolic_data.py:\n\n```\n$ sage -t -verbose -only-optional symbolic_data.py\n...\n31 passed and 0 failed.\n```\n\nBefore the patch:\n\n\n```\n$ sage -t -verbose -only-optional=database_symbolic_data symbolic_data.py \nsage -t -verbose -only-optional=database_symbolic_data \"devel/sage-devel/sage/databases/symbolic_data.py\"\n\t [0.1 s]\n \n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 0.1 seconds\n```\n\nAnd after the patch,\n\n```\n$ sage -t -verbose -only-optional=database_symbolic_data symbolic_data.py\n...\n31 passed and 0 failed.\n```",
    "created_at": "2012-01-24T00:25:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12336#issuecomment-141348",
    "user": "https://github.com/orlitzky"
}
```

All optional doctests in symbolic_data.py:

```
$ sage -t -verbose -only-optional symbolic_data.py
...
31 passed and 0 failed.
```

Before the patch:


```
$ sage -t -verbose -only-optional=database_symbolic_data symbolic_data.py 
sage -t -verbose -only-optional=database_symbolic_data "devel/sage-devel/sage/databases/symbolic_data.py"
	 [0.1 s]
 
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 0.1 seconds
```

And after the patch,

```
$ sage -t -verbose -only-optional=database_symbolic_data symbolic_data.py
...
31 passed and 0 failed.
```



---

archive/issue_comments_141349.json:
```json
{
    "body": "Ah, crap. I completely missed that there was a patch up already, so I prepared my own. Sorry. But to sweeten the deal: I fixed the format of the docs so that they work with sphinx and added the docs to the reference manual.",
    "created_at": "2012-01-25T10:47:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12336#issuecomment-141349",
    "user": "https://github.com/malb"
}
```

Ah, crap. I completely missed that there was a patch up already, so I prepared my own. Sorry. But to sweeten the deal: I fixed the format of the docs so that they work with sphinx and added the docs to the reference manual.



---

archive/issue_comments_141350.json:
```json
{
    "body": "mjo: can you referee malb's patch?  (or conversely -- I'm confused.)",
    "created_at": "2012-02-03T20:42:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12336#issuecomment-141350",
    "user": "https://github.com/williamstein"
}
```

mjo: can you referee malb's patch?  (or conversely -- I'm confused.)



---

archive/issue_comments_141351.json:
```json
{
    "body": "Replying to [comment:3 was]:\n> mjo: can you referee malb's patch?  (or conversely -- I'm confused.)\n\n\nHis is the better patch.\n\nIt's annoying for me to review documentation from home thanks to #12276 (I have to rebuild a chunk of my system or the HTML looks like hell), but I can do it tonight. I've got to build beta2 anyway.",
    "created_at": "2012-02-03T22:44:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12336#issuecomment-141351",
    "user": "https://github.com/orlitzky"
}
```

Replying to [comment:3 was]:
> mjo: can you referee malb's patch?  (or conversely -- I'm confused.)


His is the better patch.

It's annoying for me to review documentation from home thanks to #12276 (I have to rebuild a chunk of my system or the HTML looks like hell), but I can do it tonight. I've got to build beta2 anyway.



---

archive/issue_comments_141352.json:
```json
{
    "body": "I know this is silly, but since the patch touches them all, can you change EXAMPLE to EXAMPLES? At least for the one with multiple examples (I prefer them to be consistent, but don't care all that much).\n\nOther than that, the patch is fine and the new docs look great.",
    "created_at": "2012-02-04T02:35:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12336#issuecomment-141352",
    "user": "https://github.com/orlitzky"
}
```

I know this is silly, but since the patch touches them all, can you change EXAMPLE to EXAMPLES? At least for the one with multiple examples (I prefer them to be consistent, but don't care all that much).

Other than that, the patch is fine and the new docs look great.



---

archive/issue_comments_141353.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-02-04T02:40:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12336#issuecomment-141353",
    "user": "https://github.com/orlitzky"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_141354.json:
```json
{
    "body": "Attachment [trac_12336_symbolic_data.patch](tarball://root/attachments/some-uuid/ticket12336/trac_12336_symbolic_data.patch) by @malb created at 2012-02-05 12:22:01",
    "created_at": "2012-02-05T12:22:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12336#issuecomment-141354",
    "user": "https://github.com/malb"
}
```

Attachment [trac_12336_symbolic_data.patch](tarball://root/attachments/some-uuid/ticket12336/trac_12336_symbolic_data.patch) by @malb created at 2012-02-05 12:22:01



---

archive/issue_comments_141355.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-02-05T12:23:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12336#issuecomment-141355",
    "user": "https://github.com/malb"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_141356.json:
```json
{
    "body": "done :)",
    "created_at": "2012-02-05T12:23:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12336#issuecomment-141356",
    "user": "https://github.com/malb"
}
```

done :)



---

archive/issue_comments_141357.json:
```json
{
    "body": "Today I learned that you can start a commit message with the comment delimiter. Thanks!",
    "created_at": "2012-02-06T02:47:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12336#issuecomment-141357",
    "user": "https://github.com/orlitzky"
}
```

Today I learned that you can start a commit message with the comment delimiter. Thanks!



---

archive/issue_comments_141358.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-02-06T02:47:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12336#issuecomment-141358",
    "user": "https://github.com/orlitzky"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_141359.json:
```json
{
    "body": "I guess...",
    "created_at": "2012-02-07T13:23:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12336#issuecomment-141359",
    "user": "https://github.com/jdemeyer"
}
```

I guess...



---

archive/issue_comments_141360.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-02-14T14:21:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12336#issuecomment-141360",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_033033.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-14T14:21:52Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12336",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12336#event-33033"
}
```
