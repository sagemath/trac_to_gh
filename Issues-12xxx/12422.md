# Issue 12422: CFBundle.h on OS X 10.6 uses __attribute__((format_arg)) improperly

archive/issues_012250.json:
```json
{
    "body": "From `/System/Library/Frameworks/CoreFoundation.framework/Headers/CFString.h` on `bsd` (and presumably other OS X systems):\n\n```\n#if defined(__GNUC__) && (__GNUC__*10+__GNUC_MINOR__ >= 42) && !defined(__INTEL_COMPILER) && (TARGET_OS_MAC || TARGET_OS_EMBEDDED)\n#define CF_FORMAT_FUNCTION(F,A) __attribute__((format(CFString, F, A)))\n#define CF_FORMAT_ARGUMENT(A) __attribute__((format_arg(A)))\n#else\n#define CF_FORMAT_FUNCTION(F,A)\n#define CF_FORMAT_ARGUMENT(A)\n#endif\n```\n\nLater on, Apple is using this in an improper way.  From `/System/Library/Frameworks/CoreFoundation.framework/Headers/CFBundle.h`:\n\n```\nCF_EXPORT\nCFStringRef CFBundleCopyLocalizedString(CFBundleRef bundle, CFStringRef key, CFStringRef value, CFStringRef tableName) CF_FORMAT_ARGUMENT(2);\n```\n\nThe problem here is that some versions of GCC do not recognize \"CFStringRef\" as a string type (IMHO GCC is right, this isn't a string type).  Disabling the \"format_arg()\" attribute with `'-Dformat_arg(x)='` works.\n\nThis causes failures for Python, R and Twisted.\n\n**spkg**:\n1. [http://boxen.math.washington.edu/home/jdemeyer/spkg/python-2.7.2.p3.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/python-2.7.2.p3.spkg) (based on #11967)\n2. [http://boxen.math.washington.edu/home/jdemeyer/spkg/r-2.14.0.p3.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/r-2.14.0.p3.spkg)\n3. For twisted, see #12425.\n\nAssignee: tbd\n\nResolution: wontfix\n\nReviewer: Jeroen Demeyer\n\nIssue created by migration from https://trac.sagemath.org/ticket/12422\n\n",
    "closed_at": "2012-02-09T08:00:27Z",
    "created_at": "2012-02-03T22:32:24Z",
    "labels": [
        "component: packages: standard",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "CFBundle.h on OS X 10.6 uses __attribute__((format_arg)) improperly",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12422",
    "user": "https://github.com/jdemeyer"
}
```
From `/System/Library/Frameworks/CoreFoundation.framework/Headers/CFString.h` on `bsd` (and presumably other OS X systems):

```
#if defined(__GNUC__) && (__GNUC__*10+__GNUC_MINOR__ >= 42) && !defined(__INTEL_COMPILER) && (TARGET_OS_MAC || TARGET_OS_EMBEDDED)
#define CF_FORMAT_FUNCTION(F,A) __attribute__((format(CFString, F, A)))
#define CF_FORMAT_ARGUMENT(A) __attribute__((format_arg(A)))
#else
#define CF_FORMAT_FUNCTION(F,A)
#define CF_FORMAT_ARGUMENT(A)
#endif
```

Later on, Apple is using this in an improper way.  From `/System/Library/Frameworks/CoreFoundation.framework/Headers/CFBundle.h`:

```
CF_EXPORT
CFStringRef CFBundleCopyLocalizedString(CFBundleRef bundle, CFStringRef key, CFStringRef value, CFStringRef tableName) CF_FORMAT_ARGUMENT(2);
```

The problem here is that some versions of GCC do not recognize "CFStringRef" as a string type (IMHO GCC is right, this isn't a string type).  Disabling the "format_arg()" attribute with `'-Dformat_arg(x)='` works.

This causes failures for Python, R and Twisted.

**spkg**:
1. [http://boxen.math.washington.edu/home/jdemeyer/spkg/python-2.7.2.p3.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/python-2.7.2.p3.spkg) (based on #11967)
2. [http://boxen.math.washington.edu/home/jdemeyer/spkg/r-2.14.0.p3.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/r-2.14.0.p3.spkg)
3. For twisted, see #12425.

Assignee: tbd

Resolution: wontfix

Reviewer: Jeroen Demeyer

Issue created by migration from https://trac.sagemath.org/ticket/12422





---

archive/issue_comments_143240.json:
```json
{
    "body": "<a id='comment:7'></a>Closing this as wontfix, since gcc-4.6.2 does not have this problem.",
    "created_at": "2012-02-09T08:00:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12422#issuecomment-143240",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'></a>Closing this as wontfix, since gcc-4.6.2 does not have this problem.



---

archive/issue_events_033366.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-09T08:00:27Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12422",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12422#event-33366"
}
```



---

archive/issue_events_033367.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-09T08:00:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12422",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12422#event-33367"
}
```



---

archive/issue_comments_143241.json:
```json
{
    "body": "Resolution: wontfix",
    "created_at": "2012-02-09T08:00:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12422#issuecomment-143241",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: wontfix
