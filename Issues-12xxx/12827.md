# Issue 12827: Expand Animation class to accept more graphics types

archive/issues_012655.json:
```json
{
    "assignees": [],
    "body": "Currently the `Animation` class only animates `Graphics` objects, and throws an error for `Graphics3d`, `GraphicsArray`, and `Tachyon` objects.  The behavior of this class should be improved to accept any Sage object whose `save` method produces an image.\n\nSee this [sage-devel](https://groups.google.com/forum/?fromgroups#!topic/sage-devel/9TzVOj70ADU) thread for the beginning of this discussion, including some discussion of possible solutions.\n\n\n\nAssignee: **@jasongrout, @williamstein**\n\nCC:  @gutow @nbruin @novoselt\n\nKeywords: **animate, graphics, 3D**\n\nBranch/Commit: **[u/jhpalmieri/animate](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/animate) @ [599e40a](https://github.com/sagemath/sagetrac-mirror/commit/599e40a73e4d355c3e31d18d61eb5d355964d39c)**\n\nWork Issues: **docstrings, testing, think about img protocol**\n\nReviewer: **John Palmieri**\n\nAuthor: **Niles Johnson**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/12827_\n\n",
    "closed_at": "2014-02-03T16:07:54Z",
    "created_at": "2012-04-10T19:05:41Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20graphics",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Expand Animation class to accept more graphics types",
    "type": "issue",
    "updated_at": "2014-10-07T16:20:48Z",
    "url": "https://github.com/sagemath/sage/issues/12827",
    "user": "https://github.com/nilesjohnson"
}
```
Currently the `Animation` class only animates `Graphics` objects, and throws an error for `Graphics3d`, `GraphicsArray`, and `Tachyon` objects.  The behavior of this class should be improved to accept any Sage object whose `save` method produces an image.

See this [sage-devel](https://groups.google.com/forum/?fromgroups#!topic/sage-devel/9TzVOj70ADU) thread for the beginning of this discussion, including some discussion of possible solutions.



Assignee: **@jasongrout, @williamstein**

CC:  @gutow @nbruin @novoselt

Keywords: **animate, graphics, 3D**

Branch/Commit: **[u/jhpalmieri/animate](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/animate) @ [599e40a](https://github.com/sagemath/sagetrac-mirror/commit/599e40a73e4d355c3e31d18d61eb5d355964d39c)**

Work Issues: **docstrings, testing, think about img protocol**

Reviewer: **John Palmieri**

Author: **Niles Johnson**

_Issue created by migration from https://trac.sagemath.org/ticket/12827_





---

archive/issue_events_161974.json:
```json
{
    "actor": "https://github.com/nilesjohnson",
    "created_at": "2012-04-10T19:05:41Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12827#event-161974"
}
```



---

archive/issue_events_161975.json:
```json
{
    "actor": "https://github.com/nilesjohnson",
    "created_at": "2012-04-10T19:05:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20graphics",
    "label_color": "0000ff",
    "label_name": "component: graphics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12827#event-161975"
}
```



---

archive/issue_events_161976.json:
```json
{
    "actor": "https://github.com/nilesjohnson",
    "created_at": "2012-04-10T19:05:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12827#event-161976"
}
```



---

archive/issue_events_161977.json:
```json
{
    "actor": "https://github.com/nilesjohnson",
    "created_at": "2012-04-10T19:05:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12827#event-161977"
}
```



---

archive/issue_comments_146607.json:
```json
{
    "body": "uses more robust type-checking for inputs",
    "created_at": "2012-04-10T21:06:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12827#issuecomment-146607",
    "user": "https://github.com/nilesjohnson"
}
```

uses more robust type-checking for inputs



---

archive/issue_comments_146608.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nAttachment: **[trac_12827_animate3d.patch.gz](https://github.com/sagemath/sage/files/ticket12827/trac_12827_animate3d.patch.gz)**\n\nA first patch is up now, which makes the type-checking of the Animate class more inclusive.  However I am now leaning toward a different idea:  adding an `img()` method to each of the major graphics classes defined as follows:\n\n```\ndef img(self, *args, **kwds):\n    return self.save(*args, **kwds)\n```\n\nThen for the Animation class, or other situations where an image representation of an object is required, one would call the `img()` method, and reject the object if it has no such method.  To handle new object types, one would implement an `img()` method for those types.  As I understand them, this is more closely aligned with the principles of object-oriented programming, and thus more appropriate for Sage library code.\n\nI would appreciate hearing further thoughts on the relative merits of the current patch v.s. the `img()` method idea, as well as thoughts on naming this method (other suggestions are `save_as_bitmap()` and `render_image()`).  Maybe the name should be prefixed or suffixed with an underscore too?",
    "created_at": "2012-04-10T21:18:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12827#issuecomment-146608",
    "user": "https://github.com/nilesjohnson"
}
```

<a id='comment:1'>Comment 1:</a>
Attachment: **[trac_12827_animate3d.patch.gz](https://github.com/sagemath/sage/files/ticket12827/trac_12827_animate3d.patch.gz)**

A first patch is up now, which makes the type-checking of the Animate class more inclusive.  However I am now leaning toward a different idea:  adding an `img()` method to each of the major graphics classes defined as follows:

```
def img(self, *args, **kwds):
    return self.save(*args, **kwds)
```

Then for the Animation class, or other situations where an image representation of an object is required, one would call the `img()` method, and reject the object if it has no such method.  To handle new object types, one would implement an `img()` method for those types.  As I understand them, this is more closely aligned with the principles of object-oriented programming, and thus more appropriate for Sage library code.

I would appreciate hearing further thoughts on the relative merits of the current patch v.s. the `img()` method idea, as well as thoughts on naming this method (other suggestions are `save_as_bitmap()` and `render_image()`).  Maybe the name should be prefixed or suffixed with an underscore too?



---

archive/issue_comments_146609.json:
```json
{
    "body": "add img method to the four major graphics classes",
    "created_at": "2012-04-13T21:03:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12827#issuecomment-146609",
    "user": "https://github.com/nilesjohnson"
}
```

add img method to the four major graphics classes



---

archive/issue_comments_146610.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nAttachment: **[trac_12827_animate3d_img_method.patch.gz](https://github.com/sagemath/sage/files/ticket12827/trac_12827_animate3d_img_method.patch.gz)**\n\nThe second patch is a replacement for the first, using the idea of an ``img()`` method instead of type-checking.  All tests pass, but I haven't finished writing docstrings.\n\n\nPatchbot: apply trac_12827_animate3d_img_method.patch",
    "created_at": "2012-04-13T21:08:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12827#issuecomment-146610",
    "user": "https://github.com/nilesjohnson"
}
```

<a id='comment:2'>Comment 2:</a>
Attachment: **[trac_12827_animate3d_img_method.patch.gz](https://github.com/sagemath/sage/files/ticket12827/trac_12827_animate3d_img_method.patch.gz)**

The second patch is a replacement for the first, using the idea of an ``img()`` method instead of type-checking.  All tests pass, but I haven't finished writing docstrings.


Patchbot: apply trac_12827_animate3d_img_method.patch



---

archive/issue_comments_146611.json:
```json
{
    "body": "Work Issues: **docstrings, testing, think about img protocol**",
    "created_at": "2012-04-13T21:08:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12827#issuecomment-146611",
    "user": "https://github.com/nilesjohnson"
}
```

Work Issues: **docstrings, testing, think about img protocol**



---

archive/issue_comments_146612.json:
```json
{
    "body": "Author: **Niles Johnson**",
    "created_at": "2012-04-13T21:08:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12827#issuecomment-146612",
    "user": "https://github.com/nilesjohnson"
}
```

Author: **Niles Johnson**



---

archive/issue_comments_146613.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nOK, I'm afraid the following if a bit of distraction of your core goal.\nWithout reading any documentation, I would expect G.img() to return an \"image object\", rather than the G.save_as_bitmap(\"filename\"). Of course save_as_bitmap still needs to be told in what format the bitmap should be saved.\n\nI'm not sure we have an appropriate \"image object\". We do have PIL in sage. Try `import Image`. Would it make sense to interface with their types for an \"img\" return value?\n\nObviously, having a \"convert to bitmap object\" protocol implemented for all graphics-type objects, together with a save-to-file option on the bitmap object, would give you the required infrastructure to produce animations. It may not be the most efficient (or even sufficiently efficient) way of doing it, though ...\n\nI can understand if you don't want to mess with bitmap objects (whatever they should be) and just settle for a way to dump a bitmap representation of objects into a file. However, you might not want to use \"img\" then, reserving that word for when someone does want to do that.",
    "created_at": "2012-04-13T22:43:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12827#issuecomment-146613",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:3'>Comment 3:</a>
OK, I'm afraid the following if a bit of distraction of your core goal.
Without reading any documentation, I would expect G.img() to return an "image object", rather than the G.save_as_bitmap("filename"). Of course save_as_bitmap still needs to be told in what format the bitmap should be saved.

I'm not sure we have an appropriate "image object". We do have PIL in sage. Try `import Image`. Would it make sense to interface with their types for an "img" return value?

Obviously, having a "convert to bitmap object" protocol implemented for all graphics-type objects, together with a save-to-file option on the bitmap object, would give you the required infrastructure to produce animations. It may not be the most efficient (or even sufficiently efficient) way of doing it, though ...

I can understand if you don't want to mess with bitmap objects (whatever they should be) and just settle for a way to dump a bitmap representation of objects into a file. However, you might not want to use "img" then, reserving that word for when someone does want to do that.



---

archive/issue_comments_146614.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nReplying to [@nbruin](#comment%3A3):\n> Without reading any documentation, I would expect G.img() to return an \"image object\"\n\nHmm, yes I see your point.  Thanks for the tip about PIL -- that package does seem to provide a pretty good `Image` object, which is created by reading an image.  So one might do something like the following:\n\n```\ndef img(self, filename, *args, **kwds):\n    self.save(filename=filename, *args, **kwds)\n    from PIL import Image\n    im = Image.open(filename)\n    return im\n```\n\nMaybe this is the wrong way to go about it though, since the `save()` and `show()` methods of the resulting `Image` object would re-save the image to a file, wasting a lot of time.  `Image` also has the capability to read an image from a stream or a buffer, but I don't know how to create such things from Sage's graphics objects.\n\nOn the other hand, the current `show()` method of Sage's graphics objects saves the image to a file before showing it, so this implementation would be following that precedent.\n\nA more rudimentary compromise might be to have a method which saves the image and returns the system path to the image:\n\n```\ndef img(self, filename, *args, **kwds):\n    self.save(filename=filename, *args, **kwds)\n    return filename\n```\n\n\nAt this stage, I've given three different possible `img` methods, and I can see now how each one establishes a different protocol.  Since this ticket is probably not the right place to try to establish a protocol, I think I'll try to use a different name.  I'm really having a hard time warming up to the term \"bitmap\" though.  Wikipedia explains to me that it is essentially correct, although the image types we would use by default, like JPG, PNG, TIFF, are *compressed* bitmap images.  What do you think of `save_image` instead?",
    "created_at": "2012-04-14T11:40:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12827#issuecomment-146614",
    "user": "https://github.com/nilesjohnson"
}
```

<a id='comment:4'>Comment 4:</a>
Replying to [@nbruin](#comment%3A3):
> Without reading any documentation, I would expect G.img() to return an "image object"

Hmm, yes I see your point.  Thanks for the tip about PIL -- that package does seem to provide a pretty good `Image` object, which is created by reading an image.  So one might do something like the following:

```
def img(self, filename, *args, **kwds):
    self.save(filename=filename, *args, **kwds)
    from PIL import Image
    im = Image.open(filename)
    return im
```

Maybe this is the wrong way to go about it though, since the `save()` and `show()` methods of the resulting `Image` object would re-save the image to a file, wasting a lot of time.  `Image` also has the capability to read an image from a stream or a buffer, but I don't know how to create such things from Sage's graphics objects.

On the other hand, the current `show()` method of Sage's graphics objects saves the image to a file before showing it, so this implementation would be following that precedent.

A more rudimentary compromise might be to have a method which saves the image and returns the system path to the image:

```
def img(self, filename, *args, **kwds):
    self.save(filename=filename, *args, **kwds)
    return filename
```


At this stage, I've given three different possible `img` methods, and I can see now how each one establishes a different protocol.  Since this ticket is probably not the right place to try to establish a protocol, I think I'll try to use a different name.  I'm really having a hard time warming up to the term "bitmap" though.  Wikipedia explains to me that it is essentially correct, although the image types we would use by default, like JPG, PNG, TIFF, are *compressed* bitmap images.  What do you think of `save_image` instead?



---

archive/issue_comments_146615.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nReplying to [@nilesjohnson](#comment%3A4):\n> ...\n> Maybe this is the wrong way to go about it though, since the `save()` and `show()` methods of the resulting `Image` object would re-save the image to a file, wasting a lot of time.  `Image` also has the capability to read an image from a stream or a buffer, but I don't know how to create such things from Sage's graphics objects.\n\nWell, in some cases this would be the best thing we have available. In the case of 3D, for instance, the rendering is done with the external program `tachyon`, which get a scene description in a file and saves a bitmap into another file. So in that case, going through an Image object for animate is very wasteful.\n\nGoogling shows that `matplotlib` can be used to produce the bitmap in-memory and directly feed into Image. Incidentally, if those files are written in `/tmp` (or any `tmpfs` filesystem), the files likely never hit disk. They'll just live in memory-based buffers.\n\n> A more rudimentary compromise might be to have a method which saves the image and returns the system path to the image:\n> \n> ```\n> def img(self, filename, *args, **kwds):\n>     self.save(filename=filename, *args, **kwds)\n>     return filename\n> ```\n\nI personally like the rule that routines used for their side-effect do not return a value. Especially when you have to specify the filename anyway, it doesn't really make sense to return it. A \"success\" return value could work, but raising an exception on failure is more pythonic.\n\n> At this stage, I've given three different possible `img` methods, and I can see now how each one establishes a different protocol.  Since this ticket is probably not the right place to try to establish a protocol, I think I'll try to use a different name.  I'm really having a hard time warming up to the term \"bitmap\" though.  Wikipedia explains to me that it is essentially correct, although the image types we would use by default, like JPG, PNG, TIFF, are *compressed* bitmap images.  What do you think of `save_image` instead?\n\nI think it's an improvement over \"save\", because to me \"save\" indicates a reversible operation (via \"load\"). In the case here, the bitmap is a different kind of object from which the original object cannot be reconstructed. I think save_as_image is even clearer, but it's also longer and has more underscores.\n\nIn general, people would differentiate \"bitmap\" and \"vector graphics\" formats inside \"image\" formats (i.e., jpg, png versus pdf, ps, svg, disregarding that the latter can also contain bitmap information). On the application side, GIMP versus Inkscape or Photoshop versus Acrobat/Illustrator.\n\nFor 3D scenes we currently have no way of creating vector graphics representations, although those would be quite useful for producing print-quality schematics. matplotlib can create excellent vector graphics as well as bitmaps.\n\nIf `save_as_image` supports a format specifier (and/or derives a default from inspecting the filename for known extensions) that also supports \"eps, svg, inkscape\" then I think it's a very good name. Not all object have to support all formats of course. If you are going to categorically restrict to bitmap formats (compressed or not), I think sage_as_bitmap is better.\n\nLook at how matplotlib solves this problem. Staying compatible with them",
    "created_at": "2012-04-14T17:58:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12827#issuecomment-146615",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:5'>Comment 5:</a>
Replying to [@nilesjohnson](#comment%3A4):
> ...
> Maybe this is the wrong way to go about it though, since the `save()` and `show()` methods of the resulting `Image` object would re-save the image to a file, wasting a lot of time.  `Image` also has the capability to read an image from a stream or a buffer, but I don't know how to create such things from Sage's graphics objects.

Well, in some cases this would be the best thing we have available. In the case of 3D, for instance, the rendering is done with the external program `tachyon`, which get a scene description in a file and saves a bitmap into another file. So in that case, going through an Image object for animate is very wasteful.

Googling shows that `matplotlib` can be used to produce the bitmap in-memory and directly feed into Image. Incidentally, if those files are written in `/tmp` (or any `tmpfs` filesystem), the files likely never hit disk. They'll just live in memory-based buffers.

> A more rudimentary compromise might be to have a method which saves the image and returns the system path to the image:
> 
> ```
> def img(self, filename, *args, **kwds):
>     self.save(filename=filename, *args, **kwds)
>     return filename
> ```

I personally like the rule that routines used for their side-effect do not return a value. Especially when you have to specify the filename anyway, it doesn't really make sense to return it. A "success" return value could work, but raising an exception on failure is more pythonic.

> At this stage, I've given three different possible `img` methods, and I can see now how each one establishes a different protocol.  Since this ticket is probably not the right place to try to establish a protocol, I think I'll try to use a different name.  I'm really having a hard time warming up to the term "bitmap" though.  Wikipedia explains to me that it is essentially correct, although the image types we would use by default, like JPG, PNG, TIFF, are *compressed* bitmap images.  What do you think of `save_image` instead?

I think it's an improvement over "save", because to me "save" indicates a reversible operation (via "load"). In the case here, the bitmap is a different kind of object from which the original object cannot be reconstructed. I think save_as_image is even clearer, but it's also longer and has more underscores.

In general, people would differentiate "bitmap" and "vector graphics" formats inside "image" formats (i.e., jpg, png versus pdf, ps, svg, disregarding that the latter can also contain bitmap information). On the application side, GIMP versus Inkscape or Photoshop versus Acrobat/Illustrator.

For 3D scenes we currently have no way of creating vector graphics representations, although those would be quite useful for producing print-quality schematics. matplotlib can create excellent vector graphics as well as bitmaps.

If `save_as_image` supports a format specifier (and/or derives a default from inspecting the filename for known extensions) that also supports "eps, svg, inkscape" then I think it's a very good name. Not all object have to support all formats of course. If you are going to categorically restrict to bitmap formats (compressed or not), I think sage_as_bitmap is better.

Look at how matplotlib solves this problem. Staying compatible with them



---

archive/issue_comments_146616.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nMy take on this is that G.image() should return an image object. \u00a0I haven't looked at PIL, but I would expect an image object to have a publicly accessible .type value that tells the image type and a .data or .imgdata that contains the binary representation of the image. \u00a0I would suggest that we want graphics objects to have two routines G.image(type =XXX, height=XXX, width=XXX, **kwds) and G.save_image(type=XXX, filename=XXX, height=XXX, width=XXX, **kwds). \u00a0I suppose the height and width could have default values. \u00a0G.save_image should return a success value, but raise an exception on failure.",
    "created_at": "2012-04-15T00:54:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12827#issuecomment-146616",
    "user": "https://github.com/gutow"
}
```

<a id='comment:6'>Comment 6:</a>
My take on this is that G.image() should return an image object.  I haven't looked at PIL, but I would expect an image object to have a publicly accessible .type value that tells the image type and a .data or .imgdata that contains the binary representation of the image.  I would suggest that we want graphics objects to have two routines G.image(type =XXX, height=XXX, width=XXX, **kwds) and G.save_image(type=XXX, filename=XXX, height=XXX, width=XXX, **kwds).  I suppose the height and width could have default values.  G.save_image should return a success value, but raise an exception on failure.



---

archive/issue_comments_146617.json:
```json
{
    "body": "Attachment: **[trac_12827_animate3d_save_image.patch.gz](https://github.com/sagemath/sage/files/ticket12827/trac_12827_animate3d_save_image.patch.gz)**\n\na rudimentary save_image method",
    "created_at": "2012-04-17T19:41:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12827#issuecomment-146617",
    "user": "https://github.com/nilesjohnson"
}
```

Attachment: **[trac_12827_animate3d_save_image.patch.gz](https://github.com/sagemath/sage/files/ticket12827/trac_12827_animate3d_save_image.patch.gz)**

a rudimentary save_image method



---

archive/issue_comments_146618.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nThanks for all the feedback.  Having thought through the issues here, I'd like to provide a minimal solution to the animation problem now which doesn't conflict with potential future improvements to the graphics objects.  I've opted for a `save_image` method which just passes its arguments to the `save` method.  This can save in bitmap or vector formats, depending on the capabilities of the `save` method, and sizing of the output image will depend on the `save` method too.\n\nAll tests pass in the affected files, and all of the documentation builds without warning; Nils or Jonathan, are either of you interested in reviewing this?\n\nPatchbot: apply trac_12827_animate3d_save_image.patch",
    "created_at": "2012-04-17T19:58:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12827#issuecomment-146618",
    "user": "https://github.com/nilesjohnson"
}
```

<a id='comment:7'>Comment 7:</a>
Thanks for all the feedback.  Having thought through the issues here, I'd like to provide a minimal solution to the animation problem now which doesn't conflict with potential future improvements to the graphics objects.  I've opted for a `save_image` method which just passes its arguments to the `save` method.  This can save in bitmap or vector formats, depending on the capabilities of the `save` method, and sizing of the output image will depend on the `save` method too.

All tests pass in the affected files, and all of the documentation builds without warning; Nils or Jonathan, are either of you interested in reviewing this?

Patchbot: apply trac_12827_animate3d_save_image.patch



---

archive/issue_comments_146619.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,3 +2,7 @@\n \n See this [sage-devel](https://groups.google.com/forum/?fromgroups#!topic/sage-devel/9TzVOj70ADU) thread for the beginning of this discussion, including some discussion of possible solutions.\n \n+\n+## Apply\n+\n+* [attachment: trac_12827_animate3d_save_image.patch.gz](https://github.com/sagemath/sage/files/ticket12827/trac_12827_animate3d_save_image.patch.gz)\n``````\n",
    "created_at": "2012-04-17T19:58:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12827#issuecomment-146619",
    "user": "https://github.com/nilesjohnson"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,3 +2,7 @@
 
 See this [sage-devel](https://groups.google.com/forum/?fromgroups#!topic/sage-devel/9TzVOj70ADU) thread for the beginning of this discussion, including some discussion of possible solutions.
 
+
+## Apply
+
+* [attachment: trac_12827_animate3d_save_image.patch.gz](https://github.com/sagemath/sage/files/ticket12827/trac_12827_animate3d_save_image.patch.gz)
``````




---

archive/issue_events_161978.json:
```json
{
    "actor": "https://github.com/nilesjohnson",
    "created_at": "2012-04-17T19:58:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12827#event-161978"
}
```



---

archive/issue_comments_146620.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nPerhaps one should even just accept graphics files like pngs?  Just a thought.",
    "created_at": "2012-05-17T17:50:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12827#issuecomment-146620",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:9'>Comment 9:</a>
Perhaps one should even just accept graphics files like pngs?  Just a thought.



---

archive/issue_events_161979.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-05-17T17:53:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12827#event-161979"
}
```



---

archive/issue_events_161980.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-05-17T17:53:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12827#event-161980"
}
```



---

archive/issue_comments_146621.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nSadly, this doesn't apply to Sage 5.0 - probably because of the refactoring of the graphics code to be largely in `sage/plot/graphics.py`.  **But** I really like this potential!  See for instance [this ask.sagemath.org question](http://ask.sagemath.org/question/1422/3d-animation-with-tachyon).",
    "created_at": "2012-05-17T17:53:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12827#issuecomment-146621",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:10'>Comment 10:</a>
Sadly, this doesn't apply to Sage 5.0 - probably because of the refactoring of the graphics code to be largely in `sage/plot/graphics.py`.  **But** I really like this potential!  See for instance [this ask.sagemath.org question](http://ask.sagemath.org/question/1422/3d-animation-with-tachyon).



---

archive/issue_events_161981.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12827#event-161981"
}
```



---

archive/issue_events_161982.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12827#event-161982"
}
```



---

archive/issue_comments_146622.json:
```json
{
    "body": "Branch: **[u/niles/ticket/12827](https://github.com/sagemath/sagetrac-mirror/tree/u/niles/ticket/12827)**",
    "created_at": "2013-12-05T12:49:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12827#issuecomment-146622",
    "user": "https://github.com/nilesjohnson"
}
```

Branch: **[u/niles/ticket/12827](https://github.com/sagemath/sagetrac-mirror/tree/u/niles/ticket/12827)**



---

archive/issue_comments_146623.json:
```json
{
    "body": "Commit: **[4bd6321](https://github.com/sagemath/sagetrac-mirror/commit/4bd63210b646fa15f908d41fd7500e7f881a6058)**",
    "created_at": "2013-12-05T18:50:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12827#issuecomment-146623",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[4bd6321](https://github.com/sagemath/sagetrac-mirror/commit/4bd63210b646fa15f908d41fd7500e7f881a6058)**



---

archive/issue_comments_146624.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td>[4bd6321](https://github.com/sagemath/sagetrac-mirror/commit/4bd6321)</td><td><code>terminology update</code></td></tr><tr><td>[9df0a83](https://github.com/sagemath/sagetrac-mirror/commit/9df0a83)</td><td><code>terminology update</code></td></tr><tr><td>[34405b9](https://github.com/sagemath/sagetrac-mirror/commit/34405b9)</td><td><code>remove commented code, move author info to top</code></td></tr></table>\n",
    "created_at": "2013-12-05T18:50:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12827#issuecomment-146624",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:13'>Comment 13:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td>[4bd6321](https://github.com/sagemath/sagetrac-mirror/commit/4bd6321)</td><td><code>terminology update</code></td></tr><tr><td>[9df0a83](https://github.com/sagemath/sagetrac-mirror/commit/9df0a83)</td><td><code>terminology update</code></td></tr><tr><td>[34405b9](https://github.com/sagemath/sagetrac-mirror/commit/34405b9)</td><td><code>remove commented code, move author info to top</code></td></tr></table>




---

archive/issue_events_161983.json:
```json
{
    "actor": "https://github.com/nilesjohnson",
    "created_at": "2013-12-05T19:07:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12827#event-161983"
}
```



---

archive/issue_events_161984.json:
```json
{
    "actor": "https://github.com/nilesjohnson",
    "created_at": "2013-12-05T19:07:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12827#event-161984"
}
```



---

archive/issue_comments_146625.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nThe new branch is ready for review!  It rebases the previous patch to sage 5.13.beta4.  It includes other minor improvements to documentation and internal methods.\n\nWith this patch, the `Animate` class can create an animation from any iterable of objects which have a `save_image` method.  Such a method is added to several of the base classes for different graphics types: `sage.plot.graphics.Graphics`, `sage.plot.graphics.GraphicsArray`, `sage.plot.plot3d.base.Graphics3d`, `sage.plot.plot3d.tachyon.Tachyon`.",
    "created_at": "2013-12-05T19:07:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12827#issuecomment-146625",
    "user": "https://github.com/nilesjohnson"
}
```

<a id='comment:14'>Comment 14:</a>
The new branch is ready for review!  It rebases the previous patch to sage 5.13.beta4.  It includes other minor improvements to documentation and internal methods.

With this patch, the `Animate` class can create an animation from any iterable of objects which have a `save_image` method.  Such a method is added to several of the base classes for different graphics types: `sage.plot.graphics.Graphics`, `sage.plot.graphics.GraphicsArray`, `sage.plot.plot3d.base.Graphics3d`, `sage.plot.plot3d.tachyon.Tachyon`.



---

archive/issue_comments_146626.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,6 +3,3 @@\n See this [sage-devel](https://groups.google.com/forum/?fromgroups#!topic/sage-devel/9TzVOj70ADU) thread for the beginning of this discussion, including some discussion of possible solutions.\n \n \n-## Apply\n-\n-* [attachment: trac_12827_animate3d_save_image.patch.gz](https://github.com/sagemath/sage/files/ticket12827/trac_12827_animate3d_save_image.patch.gz)\n``````\n",
    "created_at": "2013-12-05T19:07:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12827#issuecomment-146626",
    "user": "https://github.com/nilesjohnson"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,6 +3,3 @@
 See this [sage-devel](https://groups.google.com/forum/?fromgroups#!topic/sage-devel/9TzVOj70ADU) thread for the beginning of this discussion, including some discussion of possible solutions.
 
 
-## Apply
-
-* [attachment: trac_12827_animate3d_save_image.patch.gz](https://github.com/sagemath/sage/files/ticket12827/trac_12827_animate3d_save_image.patch.gz)
``````




---

archive/issue_comments_146627.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nbumping this ticket -- anyone available for review?",
    "created_at": "2013-12-19T17:58:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12827#issuecomment-146627",
    "user": "https://github.com/nilesjohnson"
}
```

<a id='comment:15'>Comment 15:</a>
bumping this ticket -- anyone available for review?



---

archive/issue_comments_146628.json:
```json
{
    "body": "Changed commit from **[4bd6321](https://github.com/sagemath/sagetrac-mirror/commit/4bd63210b646fa15f908d41fd7500e7f881a6058)** to **[4b7ba9e](https://github.com/sagemath/sagetrac-mirror/commit/4b7ba9e0012eb9868057c07ed8b4e37c27a48c94)**",
    "created_at": "2014-01-07T16:06:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12827#issuecomment-146628",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[4bd6321](https://github.com/sagemath/sagetrac-mirror/commit/4bd63210b646fa15f908d41fd7500e7f881a6058)** to **[4b7ba9e](https://github.com/sagemath/sagetrac-mirror/commit/4b7ba9e0012eb9868057c07ed8b4e37c27a48c94)**



---

archive/issue_comments_146629.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/411c4b246ebd9427ac968abd979e3d42e68b31ee\">411c4b2</a></td><td><code>Merge branch 'master' into ticket/12827</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aa34923b95cefdb97bde3aed909a79a8ca78a83d\">aa34923</a></td><td><code>first try to fix doctest continuation and trailing whitespace</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/008685f2e21ba5c88a71e5d7c0b6837c9e680bab\">008685f</a></td><td><code>another doctest continuation fix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4b7ba9e0012eb9868057c07ed8b4e37c27a48c94\">4b7ba9e</a></td><td><code>few more fixes to trailing whitespace and doctest continuation</code></td></tr></table>\n",
    "created_at": "2014-01-07T16:06:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12827#issuecomment-146629",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:16'>Comment 16:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/411c4b246ebd9427ac968abd979e3d42e68b31ee">411c4b2</a></td><td><code>Merge branch 'master' into ticket/12827</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aa34923b95cefdb97bde3aed909a79a8ca78a83d">aa34923</a></td><td><code>first try to fix doctest continuation and trailing whitespace</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/008685f2e21ba5c88a71e5d7c0b6837c9e680bab">008685f</a></td><td><code>another doctest continuation fix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4b7ba9e0012eb9868057c07ed8b4e37c27a48c94">4b7ba9e</a></td><td><code>few more fixes to trailing whitespace and doctest continuation</code></td></tr></table>




---

archive/issue_comments_146630.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/de5349040ebab566d5a0e35d99284e628ab21080\">de53490</a></td><td><code>minor tweak to intro and one example</code></td></tr></table>\n",
    "created_at": "2014-01-23T19:51:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12827#issuecomment-146630",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:17'>Comment 17:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/de5349040ebab566d5a0e35d99284e628ab21080">de53490</a></td><td><code>minor tweak to intro and one example</code></td></tr></table>




---

archive/issue_comments_146631.json:
```json
{
    "body": "Changed commit from **[4b7ba9e](https://github.com/sagemath/sagetrac-mirror/commit/4b7ba9e0012eb9868057c07ed8b4e37c27a48c94)** to **[de53490](https://github.com/sagemath/sagetrac-mirror/commit/de5349040ebab566d5a0e35d99284e628ab21080)**",
    "created_at": "2014-01-23T19:51:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12827#issuecomment-146631",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[4b7ba9e](https://github.com/sagemath/sagetrac-mirror/commit/4b7ba9e0012eb9868057c07ed8b4e37c27a48c94)** to **[de53490](https://github.com/sagemath/sagetrac-mirror/commit/de5349040ebab566d5a0e35d99284e628ab21080)**



---

archive/issue_comments_146632.json:
```json
{
    "body": "Attachment: **[accumulation.gif.gz](https://github.com/sagemath/sage/files/ticket12827/accumulation.gif.gz)**\n\nanimated graphics array",
    "created_at": "2014-01-23T19:53:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12827#issuecomment-146632",
    "user": "https://github.com/nilesjohnson"
}
```

Attachment: **[accumulation.gif.gz](https://github.com/sagemath/sage/files/ticket12827/accumulation.gif.gz)**

animated graphics array



---

archive/issue_comments_146633.json:
```json
{
    "body": "animated parametric curve",
    "created_at": "2014-01-23T19:53:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12827#issuecomment-146633",
    "user": "https://github.com/nilesjohnson"
}
```

animated parametric curve



---

archive/issue_comments_146634.json:
```json
{
    "body": "Attachment: **[torus_knot.gif.gz](https://github.com/sagemath/sage/files/ticket12827/torus_knot.gif.gz)**\n\nanimated tachyon scene",
    "created_at": "2014-01-23T19:53:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12827#issuecomment-146634",
    "user": "https://github.com/nilesjohnson"
}
```

Attachment: **[torus_knot.gif.gz](https://github.com/sagemath/sage/files/ticket12827/torus_knot.gif.gz)**

animated tachyon scene



---

archive/issue_comments_146635.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nAttachment: **[twisted_cubic.gif.gz](https://github.com/sagemath/sage/files/ticket12827/twisted_cubic.gif.gz)**\n\nAttached some animated gifs to show what the new patch can do.  Code is below.  It's also worth mentioning that this patch fixes some doctest errors in the `Animation.ffmpeg()` method.  These are caused by a change in the way `tmp_filename` works, and the way file extensions are handled ('.gif' v.s. 'gif') elsewhere in sage.  These bugs cause `animate` to break when `convert` is not available but `ffmpeg` is (e.g. on the sage cell servers).\n\nExamples that this patch makes possible:\n\nAnimate graphics arrays show accumulation of area under a curve.\n\n```\nf(x) = 8*(x-4)^2 - 25\nF(x) = f.integrate(x)\na,b = 0,7\nM = max((_.find_local_maximum(a,b)[0] for _ in (f,F)))\nm = min((_.find_local_minimum(a,b)[0] for _ in (f,F)))\nbounding_pts = point([(a,0),(b,0),(0,m),(0,M)],color='black')\n\ndef fplot(t):\n    return plot(f,a,a + t*(b-a),fill=True) + plot(f,a,b) + \\\n        line([(a + t*(b-a),0),(a + t*(b-a),f(a + t*(b-a)))],thickness=2) + bounding_pts\n\ndef Fplot(t):\n    return plot(F,a,a + t*(b-a),color='green') + \\\n        point((a + t*(b-a),F(a + t*(b-a))),color='green',size=15) + bounding_pts\n\naccumulation = animate((graphics_array([fplot(t),Fplot(t)]) for t in sxrange(.01,1,.05)))\naccumulation.show()\n```\n\nAnimate parametric surfaces and curves to draw a torus knot.\n\n```\nvar('u,v');\na,b = 2,1 # outer and inner radii\nx = (a + b*cos(u))*cos(v)\ny = (a + b*cos(u))*sin(v)\nz = b*sin(u)\nT = parametric_plot3d([x,y,z], (u,0,2*pi),(v,0,2*pi), opacity=.6,aspect_ratio=1) \n\nvar('t');\nc = (2*t,3*t)\ns = [_.subs(dict(zip((u,v),c))) for _ in (x,y,z)]\ncurve = lambda d: parametric_plot(s,(t,0,2*pi*d),color='red',thickness=2,plot_points=400)\n\nK = animate((T+curve(d) for d in sxrange(.01,1.1,.05)))\nK.show()\n```\n\nAnimate Tachyon scenes to show the twisted cubic.\n\n```\ndef tw_cubic(t):\n    q = Tachyon(camera_center=(-2,3,1),xres=500,yres=500)\n    q.light((1,1,11), 1,(1,0,1))\n    q.light((1,5,1), .5,(0,1,1))\n    q.texture('mirror', ambient=0.05, diffuse=0.05, specular=.9, opacity=0.9, color=(.8,.8,.8))\n    q.texture('w',color=(1,1,1))\n    q.plane((0,0,-2),(0,0,1),'w')\n    q.plane((0,-2,0),(0,1,0),'w')\n    for i in srange(-1,t,0.05):\n        q.sphere((i,i^2-0.5,i^3), 0.1, 'mirror')\n    return q\n\nW = animate([tw_cubic(t) for t in srange(-1,1.5,.1)])\nW.show()\n```",
    "created_at": "2014-01-23T20:11:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12827#issuecomment-146635",
    "user": "https://github.com/nilesjohnson"
}
```

<a id='comment:18'>Comment 18:</a>
Attachment: **[twisted_cubic.gif.gz](https://github.com/sagemath/sage/files/ticket12827/twisted_cubic.gif.gz)**

Attached some animated gifs to show what the new patch can do.  Code is below.  It's also worth mentioning that this patch fixes some doctest errors in the `Animation.ffmpeg()` method.  These are caused by a change in the way `tmp_filename` works, and the way file extensions are handled ('.gif' v.s. 'gif') elsewhere in sage.  These bugs cause `animate` to break when `convert` is not available but `ffmpeg` is (e.g. on the sage cell servers).

Examples that this patch makes possible:

Animate graphics arrays show accumulation of area under a curve.

```
f(x) = 8*(x-4)^2 - 25
F(x) = f.integrate(x)
a,b = 0,7
M = max((_.find_local_maximum(a,b)[0] for _ in (f,F)))
m = min((_.find_local_minimum(a,b)[0] for _ in (f,F)))
bounding_pts = point([(a,0),(b,0),(0,m),(0,M)],color='black')

def fplot(t):
    return plot(f,a,a + t*(b-a),fill=True) + plot(f,a,b) + \
        line([(a + t*(b-a),0),(a + t*(b-a),f(a + t*(b-a)))],thickness=2) + bounding_pts

def Fplot(t):
    return plot(F,a,a + t*(b-a),color='green') + \
        point((a + t*(b-a),F(a + t*(b-a))),color='green',size=15) + bounding_pts

accumulation = animate((graphics_array([fplot(t),Fplot(t)]) for t in sxrange(.01,1,.05)))
accumulation.show()
```

Animate parametric surfaces and curves to draw a torus knot.

```
var('u,v');
a,b = 2,1 # outer and inner radii
x = (a + b*cos(u))*cos(v)
y = (a + b*cos(u))*sin(v)
z = b*sin(u)
T = parametric_plot3d([x,y,z], (u,0,2*pi),(v,0,2*pi), opacity=.6,aspect_ratio=1) 

var('t');
c = (2*t,3*t)
s = [_.subs(dict(zip((u,v),c))) for _ in (x,y,z)]
curve = lambda d: parametric_plot(s,(t,0,2*pi*d),color='red',thickness=2,plot_points=400)

K = animate((T+curve(d) for d in sxrange(.01,1.1,.05)))
K.show()
```

Animate Tachyon scenes to show the twisted cubic.

```
def tw_cubic(t):
    q = Tachyon(camera_center=(-2,3,1),xres=500,yres=500)
    q.light((1,1,11), 1,(1,0,1))
    q.light((1,5,1), .5,(0,1,1))
    q.texture('mirror', ambient=0.05, diffuse=0.05, specular=.9, opacity=0.9, color=(.8,.8,.8))
    q.texture('w',color=(1,1,1))
    q.plane((0,0,-2),(0,0,1),'w')
    q.plane((0,-2,0),(0,1,0),'w')
    for i in srange(-1,t,0.05):
        q.sphere((i,i^2-0.5,i^3), 0.1, 'mirror')
    return q

W = animate([tw_cubic(t) for t in srange(-1,1.5,.1)])
W.show()
```



---

archive/issue_comments_146636.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nFirst, overall it looks pretty good to me.\n\nSecond, a typo: on the third line of `animate.py`, \"iteratable\" should be \"iterable\".\n\nThird, I'm having problems with ffmpeg; this is on OS X 10.9. To try to fix them, I installed the latest version (from the git repo) of ffmpeg, but the problems persist.\n\n- the `-loop_output` flag leads to the error `Unrecognized option 'loop_output'.` The man page says \n\n```\n       -loop_output number_of_times\n           Repeatedly loop output for formats that support looping such as\n           animated GIF (0 will loop the output infinitely).  This option is\n           deprecated, use -loop.\n```\n Of course, the man page doesn't say anything at all about `-loop` so I don't know exactly how to use it, but just changing `-loop_output` to `-loop` produces a valid animated file. (I also don't know how long the `-loop` option has been available, so if we switch to that, will we just be breaking old versions of ffmpeg, or will it affect fairly recent ones?)\n\n- the `-g 3` option leads to `Codec AVOption g (set the group of picture (GOP) size) specified for input file #0 (/Users/palmieri/.sage/temp/Macintosh-001b639d44a1.local/67838/dir_lolwRD/%08d.png) is not a decoding option.` Removing this option completely works. (I also can't find it in the man page, so I don't know what it's supposed to do. The man page is really not very good.)\n\n- the `-pix_fmt rgb24` option leads to `Incompatible pixel format 'rgb24' for codec 'gif', auto-selecting format 'pal8'`. I just deleted this option and it works. Should we do that, or use `-pix_fmt rgb8` (for example) instead? The available formats may depend on how ffmpeg was installed, so it might be better to omit it and allow users to specify it using the `ffmpeg_options` argument.\n\n- finally, the gif file produced by ffmpeg (for example using the `sines` animation) looks pretty bad: the axes and sine waves are multi-colored, and not in a good way. Using ffmpeg to produce a .mov file or .avi file works well.",
    "created_at": "2014-01-23T23:19:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12827#issuecomment-146636",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:19'>Comment 19:</a>
First, overall it looks pretty good to me.

Second, a typo: on the third line of `animate.py`, "iteratable" should be "iterable".

Third, I'm having problems with ffmpeg; this is on OS X 10.9. To try to fix them, I installed the latest version (from the git repo) of ffmpeg, but the problems persist.

- the `-loop_output` flag leads to the error `Unrecognized option 'loop_output'.` The man page says 

```
       -loop_output number_of_times
           Repeatedly loop output for formats that support looping such as
           animated GIF (0 will loop the output infinitely).  This option is
           deprecated, use -loop.
```
 Of course, the man page doesn't say anything at all about `-loop` so I don't know exactly how to use it, but just changing `-loop_output` to `-loop` produces a valid animated file. (I also don't know how long the `-loop` option has been available, so if we switch to that, will we just be breaking old versions of ffmpeg, or will it affect fairly recent ones?)

- the `-g 3` option leads to `Codec AVOption g (set the group of picture (GOP) size) specified for input file #0 (/Users/palmieri/.sage/temp/Macintosh-001b639d44a1.local/67838/dir_lolwRD/%08d.png) is not a decoding option.` Removing this option completely works. (I also can't find it in the man page, so I don't know what it's supposed to do. The man page is really not very good.)

- the `-pix_fmt rgb24` option leads to `Incompatible pixel format 'rgb24' for codec 'gif', auto-selecting format 'pal8'`. I just deleted this option and it works. Should we do that, or use `-pix_fmt rgb8` (for example) instead? The available formats may depend on how ffmpeg was installed, so it might be better to omit it and allow users to specify it using the `ffmpeg_options` argument.

- finally, the gif file produced by ffmpeg (for example using the `sines` animation) looks pretty bad: the axes and sine waves are multi-colored, and not in a good way. Using ffmpeg to produce a .mov file or .avi file works well.



---

archive/issue_comments_146637.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nThanks for taking a look!\n\nReplying to [@jhpalmieri](#comment%3A19):\n\n> Second, a typo: on the third line of `animate.py`, \"iteratable\" should be \"iterable\".\n\nouch.  Will fix.\n\n> \n> Third, I'm having problems with ffmpeg; this is on OS X 10.9. To try to fix them, I installed the latest version (from the git repo) of ffmpeg, but the problems persist.\n> \n\nhmmm, these are frustrating problems although it sounds like they exist independently of this patch.  I'll have to look into them tomorrow.\n\nPerhaps we could check the ffmpeg version and raise an error if it's too old.",
    "created_at": "2014-01-24T00:12:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12827#issuecomment-146637",
    "user": "https://github.com/nilesjohnson"
}
```

<a id='comment:20'>Comment 20:</a>
Thanks for taking a look!

Replying to [@jhpalmieri](#comment%3A19):

> Second, a typo: on the third line of `animate.py`, "iteratable" should be "iterable".

ouch.  Will fix.

> 
> Third, I'm having problems with ffmpeg; this is on OS X 10.9. To try to fix them, I installed the latest version (from the git repo) of ffmpeg, but the problems persist.
> 

hmmm, these are frustrating problems although it sounds like they exist independently of this patch.  I'll have to look into them tomorrow.

Perhaps we could check the ffmpeg version and raise an error if it's too old.



---

archive/issue_comments_146638.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3561ef7ea858e344a1ae25b071e1077f6f41927a\">3561ef7</a></td><td><code>fix typo, add pix_fmt option for ffmpeg, switch loop_output to loop</code></td></tr></table>\n",
    "created_at": "2014-01-24T14:53:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12827#issuecomment-146638",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:21'>Comment 21:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3561ef7ea858e344a1ae25b071e1077f6f41927a">3561ef7</a></td><td><code>fix typo, add pix_fmt option for ffmpeg, switch loop_output to loop</code></td></tr></table>




---

archive/issue_comments_146639.json:
```json
{
    "body": "Changed commit from **[de53490](https://github.com/sagemath/sagetrac-mirror/commit/de5349040ebab566d5a0e35d99284e628ab21080)** to **[3561ef7](https://github.com/sagemath/sagetrac-mirror/commit/3561ef7ea858e344a1ae25b071e1077f6f41927a)**",
    "created_at": "2014-01-24T14:53:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12827#issuecomment-146639",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[de53490](https://github.com/sagemath/sagetrac-mirror/commit/de5349040ebab566d5a0e35d99284e628ab21080)** to **[3561ef7](https://github.com/sagemath/sagetrac-mirror/commit/3561ef7ea858e344a1ae25b071e1077f6f41927a)**



---

archive/issue_comments_146640.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nI've tested this now on two (recent) versions of ffmpeg.  Here is the output of `ffmpeg -version`:\n\n(A) \n\n```\nffmpeg version 1.2.2\nbuilt on Jul 29 2013 08:29:33 with Apple clang version 4.1 (tags/Apple/clang-421.11.66) (based on LLVM 3.1svn)\n```\n\n(B)\n\n```\nffmpeg version git-2013-06-29-53fd1ab\nbuilt on Jun 28 2013 23:41:23 with gcc 4.4.7 (GCC) 20120313 (Red Hat 4.4.7-3)\n```\n\n\nReplying to [@jhpalmieri](#comment%3A19):\n\n> Second, a typo: on the third line of `animate.py`, \"iteratable\" should be \"iterable\".\n\nfixed now\n\n---\n\n> - the `-loop_output` flag \n\nIt seems that this change occurred in summer 2011, appearing in ffmpeg version 0.9 -- here's the [commit on github](https://github.com/FFmpeg/FFmpeg/commit/f5302e5dcf6572e9424d51d152bffc570cd75ce6).  I'm not sure of the best course, but the ffmpeg developers didn't make the change backward-compatible so I'm inclined to do the same and blame them.  Checking the ffmpeg version is annoying because it can be a number like `1.2.2` or a string like `git-2013-06-29-53fd1ab`.  Who knows if there are yet other ways that ffmpeg reports its version.  My current best idea is to just add a note about version 0.9 or higher in the documentation -- I'll do that in the next commit.\n\n---\n\n> - the `-g 3` option \n\nI get no error with or without this option on my ffmpeg version (A), but do get the error with this option on version (B).  After some googling, it seems that this option controls the number of frames between keyframes, which is useful to adjust for streaming video.  Seems like this is not important enough to include as a default setting in sage, so I've dropped it in the previous commit.\n\n---\n\n> - the `-pix_fmt rgb24` option \n\nNote that this option is applied by sage only for gifs.  For my version (A), I have no warning message at all.  For (B) I have a similar warning message to yours, but it says \"auto-selecting format 'rgb8'\".  The ffmpeg documentation (for what it's worth) says that ffmpeg will automatically choose a new value if the given one is not available (implying that it will not raise an error, only a warning).\n\nImportantly, my version (A), but not (B), raises an error if this value is not set.  It seemed like the best course of action would add this as an argument to `Animate.ffmpeg` so that it can have a reasonable default value but be easily adjusted depending on the installation.  I've done this in the previous commit.\n\n---\n\n> - the gif file produced by ffmpeg\n\nThe examples I produce with version (A) look pretty good to me, but the ones produced with (B) are bad as you describe (the rotating ellipses example is worse; parts of the ellipses change color and disappear as they rotate).  I don't know what to do about this though.  Increasing the thickness of the plotted curves helped substantially, but the output was still not great.  It's possible there are some ffmpeg options which could improve things, but I haven't been able to find them.",
    "created_at": "2014-01-24T16:20:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12827#issuecomment-146640",
    "user": "https://github.com/nilesjohnson"
}
```

<a id='comment:22'>Comment 22:</a>
I've tested this now on two (recent) versions of ffmpeg.  Here is the output of `ffmpeg -version`:

(A) 

```
ffmpeg version 1.2.2
built on Jul 29 2013 08:29:33 with Apple clang version 4.1 (tags/Apple/clang-421.11.66) (based on LLVM 3.1svn)
```

(B)

```
ffmpeg version git-2013-06-29-53fd1ab
built on Jun 28 2013 23:41:23 with gcc 4.4.7 (GCC) 20120313 (Red Hat 4.4.7-3)
```


Replying to [@jhpalmieri](#comment%3A19):

> Second, a typo: on the third line of `animate.py`, "iteratable" should be "iterable".

fixed now

---

> - the `-loop_output` flag 

It seems that this change occurred in summer 2011, appearing in ffmpeg version 0.9 -- here's the [commit on github](https://github.com/FFmpeg/FFmpeg/commit/f5302e5dcf6572e9424d51d152bffc570cd75ce6).  I'm not sure of the best course, but the ffmpeg developers didn't make the change backward-compatible so I'm inclined to do the same and blame them.  Checking the ffmpeg version is annoying because it can be a number like `1.2.2` or a string like `git-2013-06-29-53fd1ab`.  Who knows if there are yet other ways that ffmpeg reports its version.  My current best idea is to just add a note about version 0.9 or higher in the documentation -- I'll do that in the next commit.

---

> - the `-g 3` option 

I get no error with or without this option on my ffmpeg version (A), but do get the error with this option on version (B).  After some googling, it seems that this option controls the number of frames between keyframes, which is useful to adjust for streaming video.  Seems like this is not important enough to include as a default setting in sage, so I've dropped it in the previous commit.

---

> - the `-pix_fmt rgb24` option 

Note that this option is applied by sage only for gifs.  For my version (A), I have no warning message at all.  For (B) I have a similar warning message to yours, but it says "auto-selecting format 'rgb8'".  The ffmpeg documentation (for what it's worth) says that ffmpeg will automatically choose a new value if the given one is not available (implying that it will not raise an error, only a warning).

Importantly, my version (A), but not (B), raises an error if this value is not set.  It seemed like the best course of action would add this as an argument to `Animate.ffmpeg` so that it can have a reasonable default value but be easily adjusted depending on the installation.  I've done this in the previous commit.

---

> - the gif file produced by ffmpeg

The examples I produce with version (A) look pretty good to me, but the ones produced with (B) are bad as you describe (the rotating ellipses example is worse; parts of the ellipses change color and disappear as they rotate).  I don't know what to do about this though.  Increasing the thickness of the plotted curves helped substantially, but the output was still not great.  It's possible there are some ffmpeg options which could improve things, but I haven't been able to find them.



---

archive/issue_comments_146641.json:
```json
{
    "body": "Changed commit from **[3561ef7](https://github.com/sagemath/sagetrac-mirror/commit/3561ef7ea858e344a1ae25b071e1077f6f41927a)** to **[ce94d84](https://github.com/sagemath/sagetrac-mirror/commit/ce94d84d5557cfa43fd9c732f9d55a997bbc7569)**",
    "created_at": "2014-01-24T17:00:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12827#issuecomment-146641",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[3561ef7](https://github.com/sagemath/sagetrac-mirror/commit/3561ef7ea858e344a1ae25b071e1077f6f41927a)** to **[ce94d84](https://github.com/sagemath/sagetrac-mirror/commit/ce94d84d5557cfa43fd9c732f9d55a997bbc7569)**



---

archive/issue_comments_146642.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ce94d84d5557cfa43fd9c732f9d55a997bbc7569\">ce94d84</a></td><td><code>allow disabling of -loop and -pix_fmt options in Animation.ffmpeg</code></td></tr></table>\n",
    "created_at": "2014-01-24T17:00:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12827#issuecomment-146642",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:23'>Comment 23:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ce94d84d5557cfa43fd9c732f9d55a997bbc7569">ce94d84</a></td><td><code>allow disabling of -loop and -pix_fmt options in Animation.ffmpeg</code></td></tr></table>




---

archive/issue_comments_146643.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nReplying to [@nilesjohnson](#comment%3A22):\n\n> Replying to [@jhpalmieri](#comment%3A19):\n> > - the `-loop_output` flag \n\n> \n>   My current best idea is to just add a note about version 0.9 or higher in the documentation -- I'll do that in the next commit.\n\nI had a better idea while working on this:  the user can set `iterations=None` and/or `pix_fmt=None` to stop sage from doing anything at all with these options.  Then they can be set to whatever the user wants with `ffmpeg_options`.  In this way, we support recent (as of summer 2011) versions of ffmpeg by default, but allow motivated people to work with an older version.  If pix_fmt somehow causes trouble in a way I don't foresee, it can be disabled too.\n\nThe previous commit passes all (optional=sage,ffmpeg) tests in `animate.py` with both of my ffmpeg installations.",
    "created_at": "2014-01-24T17:13:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12827#issuecomment-146643",
    "user": "https://github.com/nilesjohnson"
}
```

<a id='comment:24'>Comment 24:</a>
Replying to [@nilesjohnson](#comment%3A22):

> Replying to [@jhpalmieri](#comment%3A19):
> > - the `-loop_output` flag 

> 
>   My current best idea is to just add a note about version 0.9 or higher in the documentation -- I'll do that in the next commit.

I had a better idea while working on this:  the user can set `iterations=None` and/or `pix_fmt=None` to stop sage from doing anything at all with these options.  Then they can be set to whatever the user wants with `ffmpeg_options`.  In this way, we support recent (as of summer 2011) versions of ffmpeg by default, but allow motivated people to work with an older version.  If pix_fmt somehow causes trouble in a way I don't foresee, it can be disabled too.

The previous commit passes all (optional=sage,ffmpeg) tests in `animate.py` with both of my ffmpeg installations.



---

archive/issue_comments_146644.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nOkay, I'm happy with your changes. Very nice. I've made a few very small modifications; if you're happy with them, we can switch this to \"positive review\".\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/599e40a73e4d355c3e31d18d61eb5d355964d39c\">599e40a</a></td><td><code>animate.py: minor fixes</code></td></tr></table>\n",
    "created_at": "2014-01-24T19:18:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12827#issuecomment-146644",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:25'>Comment 25:</a>
Okay, I'm happy with your changes. Very nice. I've made a few very small modifications; if you're happy with them, we can switch this to "positive review".

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/599e40a73e4d355c3e31d18d61eb5d355964d39c">599e40a</a></td><td><code>animate.py: minor fixes</code></td></tr></table>




---

archive/issue_comments_146645.json:
```json
{
    "body": "Changed commit from **[ce94d84](https://github.com/sagemath/sagetrac-mirror/commit/ce94d84d5557cfa43fd9c732f9d55a997bbc7569)** to **[599e40a](https://github.com/sagemath/sagetrac-mirror/commit/599e40a73e4d355c3e31d18d61eb5d355964d39c)**",
    "created_at": "2014-01-24T19:18:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12827#issuecomment-146645",
    "user": "https://github.com/jhpalmieri"
}
```

Changed commit from **[ce94d84](https://github.com/sagemath/sagetrac-mirror/commit/ce94d84d5557cfa43fd9c732f9d55a997bbc7569)** to **[599e40a](https://github.com/sagemath/sagetrac-mirror/commit/599e40a73e4d355c3e31d18d61eb5d355964d39c)**



---

archive/issue_comments_146646.json:
```json
{
    "body": "Reviewer: **John Palmieri**",
    "created_at": "2014-01-24T19:18:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12827#issuecomment-146646",
    "user": "https://github.com/jhpalmieri"
}
```

Reviewer: **John Palmieri**



---

archive/issue_comments_146647.json:
```json
{
    "body": "Changed branch from **[u/niles/ticket/12827](https://github.com/sagemath/sagetrac-mirror/tree/u/niles/ticket/12827)** to **[u/jhpalmieri/animate](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/animate)**",
    "created_at": "2014-01-24T19:18:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12827#issuecomment-146647",
    "user": "https://github.com/jhpalmieri"
}
```

Changed branch from **[u/niles/ticket/12827](https://github.com/sagemath/sagetrac-mirror/tree/u/niles/ticket/12827)** to **[u/jhpalmieri/animate](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/animate)**



---

archive/issue_comments_146648.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nYour minor fixes look good to me -- I didn't know about the `:trac:` syntax.   I'll let you flip the review switch.",
    "created_at": "2014-01-24T19:54:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12827#issuecomment-146648",
    "user": "https://github.com/nilesjohnson"
}
```

<a id='comment:26'>Comment 26:</a>
Your minor fixes look good to me -- I didn't know about the `:trac:` syntax.   I'll let you flip the review switch.



---

archive/issue_events_161985.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2014-01-24T19:59:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12827#event-161985"
}
```



---

archive/issue_events_161986.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2014-01-24T19:59:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12827#event-161986"
}
```



---

archive/issue_events_161987.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12827#event-161987"
}
```



---

archive/issue_events_161988.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12827#event-161988"
}
```



---

archive/issue_events_161989.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-02-03T16:07:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12827#event-161989"
}
```



---

archive/issue_events_161990.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "ff74c22272169319ebc4c134fe19147c7251f1d5",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-02-03T16:07:54Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12827#event-161990"
}
```



---

archive/issue_comments_146649.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\nNiles, is it possible you caused some problems here?  Check out #16533 and friends - do animations still appear in the notebook for you?",
    "created_at": "2014-06-30T13:57:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12827#issuecomment-146649",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:30'>Comment 30:</a>
Niles, is it possible you caused some problems here?  Check out #16533 and friends - do animations still appear in the notebook for you?



---

archive/issue_comments_146650.json:
```json
{
    "body": "<a id='comment:31'>Comment 31:</a>\nThe issues described in #16570 are caused by tese modifications here as well. The problem here ist that one of the examples from the test suite looks ugly, due to `xmin`and `xmax` no longer being passed to `plot.plot`. Nothing an automated test run would catch, but the manual review for this whole ticket here didn't work as well as it should have, imho.",
    "created_at": "2014-10-07T16:20:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12827",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12827#issuecomment-146650",
    "user": "https://github.com/gagern"
}
```

<a id='comment:31'>Comment 31:</a>
The issues described in #16570 are caused by tese modifications here as well. The problem here ist that one of the examples from the test suite looks ugly, due to `xmin`and `xmax` no longer being passed to `plot.plot`. Nothing an automated test run would catch, but the manual review for this whole ticket here didn't work as well as it should have, imho.
