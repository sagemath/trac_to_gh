# Issue 12096: Disable parallel "make install" in Python spkg

archive/issues_011924.json:
```json
{
    "body": "The python spkg should not use parallel \"make install\".  This is claimed to be fixed in the spkg, but it actually isn't done properly.  There are some comments in `spkg-install` about how to fix it.\n\nAlso, the python library should be installed with writable permission 0755, instead of 0555.\n\nApply [http://boxen.math.washington.edu/home/jdemeyer/spkg/python-2.6.4.p12.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/python-2.6.4.p12.spkg)\n\nAssignee: tbd\n\nKeywords: python spkg\n\nResolution: fixed\n\nAuthor: Jeroen Demeyer\n\nReviewer: Fran\u00e7ois Bissey\n\nMerged: sage-4.8.alpha4\n\nIssue created by migration from https://trac.sagemath.org/ticket/12096\n\n",
    "closed_at": "2011-12-05T16:06:16Z",
    "created_at": "2011-11-29T10:11:57Z",
    "labels": [
        "component: packages: standard",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.8",
    "title": "Disable parallel \"make install\" in Python spkg",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12096",
    "user": "https://github.com/jdemeyer"
}
```
The python spkg should not use parallel "make install".  This is claimed to be fixed in the spkg, but it actually isn't done properly.  There are some comments in `spkg-install` about how to fix it.

Also, the python library should be installed with writable permission 0755, instead of 0555.

Apply [http://boxen.math.washington.edu/home/jdemeyer/spkg/python-2.6.4.p12.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/python-2.6.4.p12.spkg)

Assignee: tbd

Keywords: python spkg

Resolution: fixed

Author: Jeroen Demeyer

Reviewer: Fran√ßois Bissey

Merged: sage-4.8.alpha4

Issue created by migration from https://trac.sagemath.org/ticket/12096





---

archive/issue_events_045543.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/12096",
    "rename": {
        "from": "FIx parallel \"make install\" in Python",
        "to": "Disable parallel \"make install\" in Python spkg"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12096#event-45543"
}
```



---

archive/issue_comments_165470.json:
```json
{
    "body": "Changing keywords from \"\" to \"python spkg\".",
    "created_at": "2011-11-29T10:12:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12096#issuecomment-165470",
    "user": "https://github.com/jdemeyer"
}
```

Changing keywords from "" to "python spkg".



---

archive/issue_comments_165471.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n-The python spkg should not use \"parallel install\".  This is **claimed** to be fixed in the spkg, but it actually isn't.\n+The python spkg should not use \"parallel install\".  This is claimed to be fixed in the spkg, but it actually isn't done properly.  There are some comments in `spkg-install` about how to fix it.\n+\n+Apply [http://boxen.math.washington.edu/home/jdemeyer/spkg/python-2.6.4.p12.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/python-2.6.4.p12.spkg)\n``````\n",
    "created_at": "2011-11-29T10:25:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12096#issuecomment-165471",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
-The python spkg should not use "parallel install".  This is **claimed** to be fixed in the spkg, but it actually isn't.
+The python spkg should not use "parallel install".  This is claimed to be fixed in the spkg, but it actually isn't done properly.  There are some comments in `spkg-install` about how to fix it.
+
+Apply [http://boxen.math.washington.edu/home/jdemeyer/spkg/python-2.6.4.p12.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/python-2.6.4.p12.spkg)
``````




---

archive/issue_comments_165472.json:
```json
{
    "body": "Changing author from \"\" to \"Jeroen Demeyer\"",
    "created_at": "2011-11-29T10:25:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12096#issuecomment-165472",
    "user": "https://github.com/jdemeyer"
}
```

Changing author from "" to "Jeroen Demeyer"



---

archive/issue_comments_165473.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n The python spkg should not use \"parallel install\".  This is claimed to be fixed in the spkg, but it actually isn't done properly.  There are some comments in `spkg-install` about how to fix it.\n \n+Also, the python library should be installed with writable permission 0755, instead of 0555.\n+\n Apply [http://boxen.math.washington.edu/home/jdemeyer/spkg/python-2.6.4.p12.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/python-2.6.4.p12.spkg)\n``````\n",
    "created_at": "2011-11-30T13:04:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12096#issuecomment-165473",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
 The python spkg should not use "parallel install".  This is claimed to be fixed in the spkg, but it actually isn't done properly.  There are some comments in `spkg-install` about how to fix it.
 
+Also, the python library should be installed with writable permission 0755, instead of 0555.
+
 Apply [http://boxen.math.washington.edu/home/jdemeyer/spkg/python-2.6.4.p12.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/python-2.6.4.p12.spkg)
``````




---

archive/issue_comments_165474.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-11-30T13:13:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12096#issuecomment-165474",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_165475.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-The python spkg should not use \"parallel install\".  This is claimed to be fixed in the spkg, but it actually isn't done properly.  There are some comments in `spkg-install` about how to fix it.\n+The python spkg should not use parallel \"make install\".  This is claimed to be fixed in the spkg, but it actually isn't done properly.  There are some comments in `spkg-install` about how to fix it.\n \n Also, the python library should be installed with writable permission 0755, instead of 0555.\n \n``````\n",
    "created_at": "2011-11-30T20:53:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12096#issuecomment-165475",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-The python spkg should not use "parallel install".  This is claimed to be fixed in the spkg, but it actually isn't done properly.  There are some comments in `spkg-install` about how to fix it.
+The python spkg should not use parallel "make install".  This is claimed to be fixed in the spkg, but it actually isn't done properly.  There are some comments in `spkg-install` about how to fix it.
 
 Also, the python library should be installed with writable permission 0755, instead of 0555.
 
``````




---

archive/issue_comments_165476.json:
```json
{
    "body": "<a id='comment:8'></a>\nI'd like to add a comment that writable permission 0755, instead of 0555, is important for Cygwin port, as it would permit (semi)automatic rebasing of Sage dlls without the need to fiddle with permissions.",
    "created_at": "2011-12-01T04:30:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12096#issuecomment-165476",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:8'></a>
I'd like to add a comment that writable permission 0755, instead of 0555, is important for Cygwin port, as it would permit (semi)automatic rebasing of Sage dlls without the need to fiddle with permissions.



---

archive/issue_comments_165477.json:
```json
{
    "body": "<a id='comment:9'></a>\nDarn I'll have to redo my python-2.7.2 spkg against this one. What is the purpose of the braces around the dpkg stuff?",
    "created_at": "2011-12-02T03:19:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12096#issuecomment-165477",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:9'></a>
Darn I'll have to redo my python-2.7.2 spkg against this one. What is the purpose of the braces around the dpkg stuff?



---

archive/issue_comments_165478.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [fbissey](#comment%3A9):\n> Darn I'll have to redo my python-2.7.2 spkg against this one.\n\nYeah, sorry for that...\n\n> What is the purpose of the braces around the dpkg stuff?\n\nTo make the redirection work properly.  The following are equivalent:\n\n```\nA >/dev/null && B >/dev/null\n```\n\n```\n{ A && B; } >/dev/null\n```\nBut are **not** equivalent to\n\n```\nA && B >/dev/null\n```",
    "created_at": "2011-12-02T08:19:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12096#issuecomment-165478",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'></a>
Replying to [fbissey](#comment%3A9):
> Darn I'll have to redo my python-2.7.2 spkg against this one.

Yeah, sorry for that...

> What is the purpose of the braces around the dpkg stuff?

To make the redirection work properly.  The following are equivalent:

```
A >/dev/null && B >/dev/null
```

```
{ A && B; } >/dev/null
```
But are **not** equivalent to

```
A && B >/dev/null
```



---

archive/issue_comments_165479.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Fran\u00e7ois Bissey\"",
    "created_at": "2011-12-03T11:16:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12096#issuecomment-165479",
    "user": "https://github.com/kiwifb"
}
```

Changing reviewer from "" to "Fran√ßois Bissey"



---

archive/issue_comments_165480.json:
```json
{
    "body": "<a id='comment:11'></a>\nI am looking at the spkg right now. It compiles fine and the patch look good. I have only one minor request about SPKG.txt before setting this to positive review.\nFrom the current SPKG.txt:\n\n```\n### Patches\n\n * cPickle.c.patch, pickle.py.patch: These add support for pickling\n   classes with a metaclass via copy_reg. These have been submitted\n   upstream: http://bugs.python.org/issue7689\n * locale.py: Work around import failures for locales\n * readline-spacebug.patch: Fix issue where a space is inserted\n   after tab completing at the command line. This is merged upstream\n   and can be removed as soon as a Python newer than 2.6.4 is used.\n * readline-Itanium-fix.patch: Fix Itanium specific readline\n   extension problem.\n * sdist.py.patch: Make sure that sdist copies over the .hg directory.\n * socket.py.patch: Work around an SSL issue.\n * Makefile.pre.in.patch:  Fixes http://bugs.python.org/issue1628484\n   This was merged upstream for Python 2.6.6 and 2.7.\n * socketmodule.c Makes sure some things are defined before trying to compile\n   them. This was to work around a failure of _socket to build on OpenSolaris.\n   see  http://bugs.python.org/issue8852 and Sage trac #9041 and #9022\n * setup.py.multiarch.patch: Library search dir is expanded on Debian\n   and derivatives with multiarch (see #11243, #11447).\n   This requires 'dpkg-architecture' to be installed on the affected systems.\n   (Since the patch origins from Python 2.7, it can certainly be removed\n   when we upgrade to that. But the patch then won't apply anymore anyway.)\n```\nThe section about Makefile.pre.in should mention your bit about installing things 0755.",
    "created_at": "2011-12-03T11:16:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12096#issuecomment-165480",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:11'></a>
I am looking at the spkg right now. It compiles fine and the patch look good. I have only one minor request about SPKG.txt before setting this to positive review.
From the current SPKG.txt:

```
### Patches

 * cPickle.c.patch, pickle.py.patch: These add support for pickling
   classes with a metaclass via copy_reg. These have been submitted
   upstream: http://bugs.python.org/issue7689
 * locale.py: Work around import failures for locales
 * readline-spacebug.patch: Fix issue where a space is inserted
   after tab completing at the command line. This is merged upstream
   and can be removed as soon as a Python newer than 2.6.4 is used.
 * readline-Itanium-fix.patch: Fix Itanium specific readline
   extension problem.
 * sdist.py.patch: Make sure that sdist copies over the .hg directory.
 * socket.py.patch: Work around an SSL issue.
 * Makefile.pre.in.patch:  Fixes http://bugs.python.org/issue1628484
   This was merged upstream for Python 2.6.6 and 2.7.
 * socketmodule.c Makes sure some things are defined before trying to compile
   them. This was to work around a failure of _socket to build on OpenSolaris.
   see  http://bugs.python.org/issue8852 and Sage trac #9041 and #9022
 * setup.py.multiarch.patch: Library search dir is expanded on Debian
   and derivatives with multiarch (see #11243, #11447).
   This requires 'dpkg-architecture' to be installed on the affected systems.
   (Since the patch origins from Python 2.7, it can certainly be removed
   when we upgrade to that. But the patch then won't apply anymore anyway.)
```
The section about Makefile.pre.in should mention your bit about installing things 0755.



---

archive/issue_comments_165481.json:
```json
{
    "body": "Diff for the new Python spkg, for review only",
    "created_at": "2011-12-03T12:14:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12096#issuecomment-165481",
    "user": "https://github.com/jdemeyer"
}
```

Diff for the new Python spkg, for review only



---

archive/issue_comments_165482.json:
```json
{
    "body": "<a id='comment:12'></a>\nAttachment [python-2.6.4.p11-p12.diff](tarball://root/attachments/some-uuid/ticket12096/python-2.6.4.p11-p12.diff) by @jdemeyer created at 2011-12-03 12:20:12\n\nReplying to [fbissey](#comment%3A11):\n> The section about Makefile.pre.in should mention your bit about installing things 0755.\n\n\nDone.  I know I haven't commited the changes, but will do that after positive_review.",
    "created_at": "2011-12-03T12:20:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12096#issuecomment-165482",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>
Attachment [python-2.6.4.p11-p12.diff](tarball://root/attachments/some-uuid/ticket12096/python-2.6.4.p11-p12.diff) by @jdemeyer created at 2011-12-03 12:20:12

Replying to [fbissey](#comment%3A11):
> The section about Makefile.pre.in should mention your bit about installing things 0755.


Done.  I know I haven't commited the changes, but will do that after positive_review.



---

archive/issue_comments_165483.json:
```json
{
    "body": "<a id='comment:13'></a>\nGood enough for me. It's all go.",
    "created_at": "2011-12-03T17:53:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12096#issuecomment-165483",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:13'></a>
Good enough for me. It's all go.



---

archive/issue_comments_165484.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-12-03T17:53:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12096#issuecomment-165484",
    "user": "https://github.com/kiwifb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_045544.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-05T16:06:16Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12096",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12096#event-45544"
}
```



---

archive/issue_comments_165485.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-12-05T16:06:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12096#issuecomment-165485",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_165486.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-4.8.alpha4\"",
    "created_at": "2011-12-05T16:06:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12096#issuecomment-165486",
    "user": "https://github.com/jdemeyer"
}
```

Changing merged from "" to "sage-4.8.alpha4"
