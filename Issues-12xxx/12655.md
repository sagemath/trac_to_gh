# Issue 12655: Update PolyBoRi to release 0.8.1

archive/issues_012483.json:
```json
{
    "body": "PolyBoRi's next minor release is out now.\nThere were no changes of the interface between PolyBoRi 0.8.0 and 0.8.1, so we just have to update the sources from here:\n\nhttps://sourceforge.net/projects/polybori/files/polybori/0.8.1\n\n### Current spkg\n* **Install** http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.1.p1.spkg\n\nThis also fixes building with GCC-4.7.0, see #12751 for the GCC-4.7.0 metaticket.\n\n**Assignee:** @alexanderdreyer\n\n**CC:**  polybori @malb @burcin\n\n**Upstream:** None of the above - read trac for reasoning.\n\n**Reviewer:** Martin Albrecht, Jeroen Demeyer, Leif Leonhardy\n\n**Author:** Alexander Dreyer\n\n**Merged:** sage-5.0.beta13\n\n**Dependencies:** #12656, #12750, #12799\n\nIssue created by migration from https://trac.sagemath.org/ticket/12655\n\n",
    "closed_at": "2012-04-08T00:37:29Z",
    "created_at": "2012-03-12T15:07:10Z",
    "labels": [
        "component: packages: standard",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.0",
    "title": "Update PolyBoRi to release 0.8.1",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12655",
    "user": "https://github.com/alexanderdreyer"
}
```
PolyBoRi's next minor release is out now.
There were no changes of the interface between PolyBoRi 0.8.0 and 0.8.1, so we just have to update the sources from here:

https://sourceforge.net/projects/polybori/files/polybori/0.8.1

### Current spkg
* **Install** http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.1.p1.spkg

This also fixes building with GCC-4.7.0, see #12751 for the GCC-4.7.0 metaticket.

**Assignee:** @alexanderdreyer

**CC:**  polybori @malb @burcin

**Upstream:** None of the above - read trac for reasoning.

**Reviewer:** Martin Albrecht, Jeroen Demeyer, Leif Leonhardy

**Author:** Alexander Dreyer

**Merged:** sage-5.0.beta13

**Dependencies:** #12656, #12750, #12799

Issue created by migration from https://trac.sagemath.org/ticket/12655





---

archive/issue_comments_176211.json:
```json
{
    "body": "<a id='comment:1'></a>\nThe first experiment is here http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.1rc3.p0.spkg",
    "created_at": "2012-03-12T15:17:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176211",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:1'></a>
The first experiment is here http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.1rc3.p0.spkg



---

archive/issue_comments_176212.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,3 +3,5 @@\n \n https://sourceforge.net/projects/polybori/files/polybori/0.8.1rc\n \n+### Current spkg\n+* **Install** http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.1rc3.p0.spkg\n``````\n",
    "created_at": "2012-03-12T15:17:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176212",
    "user": "https://github.com/alexanderdreyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,3 +3,5 @@
 
 https://sourceforge.net/projects/polybori/files/polybori/0.8.1rc
 
+### Current spkg
+* **Install** http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.1rc3.p0.spkg
``````




---

archive/issue_comments_176213.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2012-03-12T15:17:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176213",
    "user": "https://github.com/alexanderdreyer"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_176214.json:
```json
{
    "body": "<a id='comment:3'></a>\nEven though the spkg works without a patch to the sage library, I recommend to use the patch from #12656, also. It fixed inconsistencies between the original interface and Sage's Cython-bases reimplementation.",
    "created_at": "2012-03-12T15:52:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176214",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:3'></a>
Even though the spkg works without a patch to the sage library, I recommend to use the patch from #12656, also. It fixed inconsistencies between the original interface and Sage's Cython-bases reimplementation.



---

archive/issue_comments_176215.json:
```json
{
    "body": "**Dependencies:** #12656",
    "created_at": "2012-03-12T15:52:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176215",
    "user": "https://github.com/alexanderdreyer"
}
```

**Dependencies:** #12656



---

archive/issue_comments_176216.json:
```json
{
    "body": "<a id='comment:4'></a>\nFor sage-5.0.beta7 (with #12656) the spkg installs and tests well (`make ptestlong`) on a SuSE Enterprise 11 AMD64.",
    "created_at": "2012-03-12T15:57:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176216",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:4'></a>
For sage-5.0.beta7 (with #12656) the spkg installs and tests well (`make ptestlong`) on a SuSE Enterprise 11 AMD64.



---

archive/issue_comments_176217.json:
```json
{
    "body": "<a id='comment:5'></a>\nAlso works without #12656 (not recommended).",
    "created_at": "2012-03-12T22:10:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176217",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:5'></a>
Also works without #12656 (not recommended).



---

archive/issue_comments_176218.json:
```json
{
    "body": "<a id='comment:6'></a>\nI can confirm that doctests pass on geom.math with 5.0.beta8.",
    "created_at": "2012-03-13T23:43:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176218",
    "user": "https://github.com/malb"
}
```

<a id='comment:6'></a>
I can confirm that doctests pass on geom.math with 5.0.beta8.



---

archive/issue_comments_176219.json:
```json
{
    "body": "<a id='comment:7'></a>\nHere's an updates spkg.\nhttp://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.1rc5.p0.spkg\nNote: upstream PolyBoRi can detect and use Sage (if available), so we do not have to patch PyPolyBoRi.py every time again and again.",
    "created_at": "2012-03-14T14:10:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176219",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:7'></a>
Here's an updates spkg.
http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.1rc5.p0.spkg
Note: upstream PolyBoRi can detect and use Sage (if available), so we do not have to patch PyPolyBoRi.py every time again and again.



---

archive/issue_comments_176220.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,4 +4,4 @@\n https://sourceforge.net/projects/polybori/files/polybori/0.8.1rc\n \n ### Current spkg\n-* **Install** http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.1rc3.p0.spkg\n+* **Install** http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.1rc5.p0.spkg\n``````\n",
    "created_at": "2012-03-14T14:10:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176220",
    "user": "https://github.com/alexanderdreyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,4 +4,4 @@
 https://sourceforge.net/projects/polybori/files/polybori/0.8.1rc
 
 ### Current spkg
-* **Install** http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.1rc3.p0.spkg
+* **Install** http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.1rc5.p0.spkg
``````




---

archive/issue_comments_176221.json:
```json
{
    "body": "<a id='comment:8'></a>\nSince it's still an RC, do we aim for 'positive review' already?",
    "created_at": "2012-03-14T14:52:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176221",
    "user": "https://github.com/malb"
}
```

<a id='comment:8'></a>
Since it's still an RC, do we aim for 'positive review' already?



---

archive/issue_comments_176222.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [malb](#comment%3A8):\n> Since it's still an RC, do we aim for 'positive review' already?\n\nIt should be final now, but I'd like to wait for response from non-Linux people. Maybe you can give a conditional review for the case, the spkg doesn't change any more. (There's no rc5 marker inside the spkg, so we just have to rename it, if we are lucky.)",
    "created_at": "2012-03-14T15:18:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176222",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:9'></a>
Replying to [malb](#comment%3A8):
> Since it's still an RC, do we aim for 'positive review' already?

It should be final now, but I'd like to wait for response from non-Linux people. Maybe you can give a conditional review for the case, the spkg doesn't change any more. (There's no rc5 marker inside the spkg, so we just have to rename it, if we are lucky.)



---

archive/issue_comments_176223.json:
```json
{
    "body": "<a id='comment:10'></a>\nSounds like a plan. conditional positive review it is :)",
    "created_at": "2012-03-14T15:22:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176223",
    "user": "https://github.com/malb"
}
```

<a id='comment:10'></a>
Sounds like a plan. conditional positive review it is :)



---

archive/issue_comments_176224.json:
```json
{
    "body": "<a id='comment:11'></a>\nUnfortunately, I had to rebundle the spkg, because the directory name contained rc5 (D'Oh!).\nHere is the updated spkg: http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.1.p0.spkg\nAlso, there is one last-minute change in the source (not doctesting optional polybori.plot, if prerequsite `dot` is not available):\nhttps://bitbucket.org/brickenstein/polybori/changeset/b3a12752980c\n\nThe recent spkg installed on SuSE11 AMD64 and OS X 10.5 ppc. make ptestlong succeeded on SuSE (OS X still running.)",
    "created_at": "2012-03-15T23:52:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176224",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:11'></a>
Unfortunately, I had to rebundle the spkg, because the directory name contained rc5 (D'Oh!).
Here is the updated spkg: http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.1.p0.spkg
Also, there is one last-minute change in the source (not doctesting optional polybori.plot, if prerequsite `dot` is not available):
https://bitbucket.org/brickenstein/polybori/changeset/b3a12752980c

The recent spkg installed on SuSE11 AMD64 and OS X 10.5 ppc. make ptestlong succeeded on SuSE (OS X still running.)



---

archive/issue_comments_176225.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,4 +4,4 @@\n https://sourceforge.net/projects/polybori/files/polybori/0.8.1rc\n \n ### Current spkg\n-* **Install** http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.1rc5.p0.spkg\n+* **Install** http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.1.p0.spkg\n``````\n",
    "created_at": "2012-03-15T23:52:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176225",
    "user": "https://github.com/alexanderdreyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,4 +4,4 @@
 https://sourceforge.net/projects/polybori/files/polybori/0.8.1rc
 
 ### Current spkg
-* **Install** http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.1rc5.p0.spkg
+* **Install** http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.1.p0.spkg
``````




---

archive/issue_comments_176226.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2012-03-16T12:18:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176226",
    "user": "https://github.com/malb"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_176227.json:
```json
{
    "body": "<a id='comment:12'></a>\nHey, I checked the SPKG for obvious problems and it looks clean. I didn't install it again and ran tests, but those the buildbot can figure out. So: positive review.",
    "created_at": "2012-03-16T12:18:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176227",
    "user": "https://github.com/malb"
}
```

<a id='comment:12'></a>
Hey, I checked the SPKG for obvious problems and it looks clean. I didn't install it again and ran tests, but those the buildbot can figure out. So: positive review.



---

archive/issue_comments_176228.json:
```json
{
    "body": "**Reviewer:** Martin Albrecht",
    "created_at": "2012-03-16T12:18:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176228",
    "user": "https://github.com/malb"
}
```

**Reviewer:** Martin Albrecht



---

archive/issue_comments_176229.json:
```json
{
    "body": "<a id='comment:13'></a>\nFinally, the rc became release, indeed!",
    "created_at": "2012-03-16T22:36:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176229",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:13'></a>
Finally, the rc became release, indeed!



---

archive/issue_comments_176230.json:
```json
{
    "body": "<a id='comment:14'></a>\nIt is recommended to use `patch` for patching SPKGs, see [http://sagemath.org/doc/developer/patching_spkgs.html](http://sagemath.org/doc/developer/patching_spkgs.html).  If not, at least add a corresponding `.patch` file for `custom.py`.\n\nI'm not setting this ticket back to needs_work for this but it [SHOULD](http://www.ietf.org/rfc/rfc2119.txt) be fixed.",
    "created_at": "2012-03-20T16:12:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176230",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:14'></a>
It is recommended to use `patch` for patching SPKGs, see [http://sagemath.org/doc/developer/patching_spkgs.html](http://sagemath.org/doc/developer/patching_spkgs.html).  If not, at least add a corresponding `.patch` file for `custom.py`.

I'm not setting this ticket back to needs_work for this but it [SHOULD](http://www.ietf.org/rfc/rfc2119.txt) be fixed.



---

archive/issue_comments_176231.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [jdemeyer](#comment%3A14):\n> It is recommended to use `patch` for patching SPKGs, see [http://sagemath.org/doc/developer/patching_spkgs.html](http://sagemath.org/doc/developer/patching_spkgs.html).  If not, at least add a corresponding `.patch` file for `custom.py`.\n\nA patch might become part of upstream sources eventually.\nBut `custom.py` is a user configuration file, which will never be upstream itself (of course the mechanism already supported there). \nOf course, we can generate a patch against `/dev/null`. but does it really makes sense?",
    "created_at": "2012-03-20T21:14:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176231",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:15'></a>
Replying to [jdemeyer](#comment%3A14):
> It is recommended to use `patch` for patching SPKGs, see [http://sagemath.org/doc/developer/patching_spkgs.html](http://sagemath.org/doc/developer/patching_spkgs.html).  If not, at least add a corresponding `.patch` file for `custom.py`.

A patch might become part of upstream sources eventually.
But `custom.py` is a user configuration file, which will never be upstream itself (of course the mechanism already supported there). 
Of course, we can generate a patch against `/dev/null`. but does it really makes sense?



---

archive/issue_comments_176232.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [AlexanderDreyer](#comment%3A15):\n> Of course, we can generate a patch against `/dev/null`. but does it really makes sense?\n\nOk, answering myself: it's part of the directory `patch`, so of course one should consider it as a patch to upstream. There's no `config` directory mention here http://sagemath.org/doc/developer/producing_spkgs.html , so patching is the only option here.",
    "created_at": "2012-03-20T21:31:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176232",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:16'></a>
Replying to [AlexanderDreyer](#comment%3A15):
> Of course, we can generate a patch against `/dev/null`. but does it really makes sense?

Ok, answering myself: it's part of the directory `patch`, so of course one should consider it as a patch to upstream. There's no `config` directory mention here http://sagemath.org/doc/developer/producing_spkgs.html , so patching is the only option here.



---

archive/issue_comments_176233.json:
```json
{
    "body": "<a id='comment:17'></a>\nThe updated spkg is now here:\nhttp://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.1.p0.spkg\nAlso, I added two minor fixes from upstream. One fixes a preprocessor misconception (`#if` instead of `#ifdef`, and the other fixes a doctest prerequisites check, which prevented `ipbori`'s self test to check `polybori.plot`.\n\nSo, unfortunately we need a review again.",
    "created_at": "2012-03-20T22:38:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176233",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:17'></a>
The updated spkg is now here:
http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.1.p0.spkg
Also, I added two minor fixes from upstream. One fixes a preprocessor misconception (`#if` instead of `#ifdef`, and the other fixes a doctest prerequisites check, which prevented `ipbori`'s self test to check `polybori.plot`.

So, unfortunately we need a review again.



---

archive/issue_comments_176234.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,7 +1,7 @@\n PolyBoRi's next minor release will be out soon.\n There were no changes of the interface between PolyBoRi 0.8.0 and 0.8.1, so we just have to update the sources from here:\n \n-https://sourceforge.net/projects/polybori/files/polybori/0.8.1rc\n+https://sourceforge.net/projects/polybori/files/polybori/0.8.1\n \n ### Current spkg\n * **Install** http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.1.p0.spkg\n``````\n",
    "created_at": "2012-03-20T22:38:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176234",
    "user": "https://github.com/alexanderdreyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,7 +1,7 @@
 PolyBoRi's next minor release will be out soon.
 There were no changes of the interface between PolyBoRi 0.8.0 and 0.8.1, so we just have to update the sources from here:
 
-https://sourceforge.net/projects/polybori/files/polybori/0.8.1rc
+https://sourceforge.net/projects/polybori/files/polybori/0.8.1
 
 ### Current spkg
 * **Install** http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.1.p0.spkg
``````




---

archive/issue_comments_176235.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2012-03-20T22:38:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176235",
    "user": "https://github.com/alexanderdreyer"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_comments_176236.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2012-03-20T22:38:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176236",
    "user": "https://github.com/alexanderdreyer"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_176237.json:
```json
{
    "body": "<a id='comment:19'></a>\nI agree that \"custom.py\" is not a patch to upstream in any way. It is a custom configuration and there is nothing in it that couldn't be actually be shifted in spkg-install. Putting it in custom.py probably keep things cleaner. If you don't want to pollute the patch folder could we consider putting it in the spkg root directory?",
    "created_at": "2012-03-21T00:22:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176237",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:19'></a>
I agree that "custom.py" is not a patch to upstream in any way. It is a custom configuration and there is nothing in it that couldn't be actually be shifted in spkg-install. Putting it in custom.py probably keep things cleaner. If you don't want to pollute the patch folder could we consider putting it in the spkg root directory?



---

archive/issue_comments_176238.json:
```json
{
    "body": "<a id='comment:20'></a>\nReplying to [fbissey](#comment%3A19):\n> If you don't want to pollute the patch folder could we consider putting it in the spkg root directory?\n\nI agree with this.  I saw the file in `patches/` and assumed it was a patch to some existing PolyBoRi file.  If it's not a patch, it doesn't belong in `patches/`.",
    "created_at": "2012-03-21T07:29:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176238",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:20'></a>
Replying to [fbissey](#comment%3A19):
> If you don't want to pollute the patch folder could we consider putting it in the spkg root directory?

I agree with this.  I saw the file in `patches/` and assumed it was a patch to some existing PolyBoRi file.  If it's not a patch, it doesn't belong in `patches/`.



---

archive/issue_comments_176239.json:
```json
{
    "body": "<a id='comment:21'></a>\nOk,  I moved `custom.py` to the spkg root. The spkg-install is now more generic: it takes any `*.patch`es in `patches` and apply them to the sources. The updated spkg is at the ususal place.",
    "created_at": "2012-03-21T09:19:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176239",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:21'></a>
Ok,  I moved `custom.py` to the spkg root. The spkg-install is now more generic: it takes any `*.patch`es in `patches` and apply them to the sources. The updated spkg is at the ususal place.



---

archive/issue_comments_176240.json:
```json
{
    "body": "<a id='comment:22'></a>\nReplying to [jdemeyer](#comment%3A20):\n> Replying to [fbissey](#comment%3A19):\n> > If you don't want to pollute the patch folder could we consider putting it in the spkg root directory?\n\n> I agree with this.  I saw the file in `patches/` and assumed it was a patch to some existing PolyBoRi file.  If it's not a patch, it doesn't belong in `patches/`.\nI fixed that, so the package needs a new review.",
    "created_at": "2012-03-21T09:54:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176240",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:22'></a>
Replying to [jdemeyer](#comment%3A20):
> Replying to [fbissey](#comment%3A19):
> > If you don't want to pollute the patch folder could we consider putting it in the spkg root directory?

> I agree with this.  I saw the file in `patches/` and assumed it was a patch to some existing PolyBoRi file.  If it's not a patch, it doesn't belong in `patches/`.
I fixed that, so the package needs a new review.



---

archive/issue_comments_176241.json:
```json
{
    "body": "<a id='comment:23'></a>\nSorry to be a little bit annoying. Now that custom.py is in the root folder of the spkg could you add a \"special files\" section to SPKG.txt, list custom.py and explain what it is.",
    "created_at": "2012-03-21T21:06:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176241",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:23'></a>
Sorry to be a little bit annoying. Now that custom.py is in the root folder of the spkg could you add a "special files" section to SPKG.txt, list custom.py and explain what it is.



---

archive/issue_comments_176242.json:
```json
{
    "body": "<a id='comment:24'></a>\nReplying to [fbissey](#comment%3A23):\n> Sorry to be a little bit annoying. Now that custom.py is in the root folder of the spkg could you add a \"special files\" section to SPKG.txt, list custom.py and explain what it is.\n\nNo problem! You'll find an updated spkg at the usual place.",
    "created_at": "2012-03-21T21:47:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176242",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:24'></a>
Replying to [fbissey](#comment%3A23):
> Sorry to be a little bit annoying. Now that custom.py is in the root folder of the spkg could you add a "special files" section to SPKG.txt, list custom.py and explain what it is.

No problem! You'll find an updated spkg at the usual place.



---

archive/issue_comments_176243.json:
```json
{
    "body": "<a id='comment:25'></a>\nLooks good to me.",
    "created_at": "2012-03-22T09:29:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176243",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:25'></a>
Looks good to me.



---

archive/issue_comments_176244.json:
```json
{
    "body": "**Changing reviewer** from \"Martin Albrecht\" to \"Martin Albrecht, Jeroen Demeyer\".",
    "created_at": "2012-03-22T09:29:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176244",
    "user": "https://github.com/jdemeyer"
}
```

**Changing reviewer** from "Martin Albrecht" to "Martin Albrecht, Jeroen Demeyer".



---

archive/issue_comments_176245.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2012-03-22T09:29:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176245",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_176246.json:
```json
{
    "body": "<a id='comment:26'></a>\nWe found a bug and have a fix, see: \nhttp://sourceforge.net/mailarchive/forum.php?thread_name=4F6B130B.5060503%40itwm.fraunhofer.de&forum_name=polybori-discuss",
    "created_at": "2012-03-22T13:42:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176246",
    "user": "https://github.com/malb"
}
```

<a id='comment:26'></a>
We found a bug and have a fix, see: 
http://sourceforge.net/mailarchive/forum.php?thread_name=4F6B130B.5060503%40itwm.fraunhofer.de&forum_name=polybori-discuss



---

archive/issue_comments_176247.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2012-03-22T13:42:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176247",
    "user": "https://github.com/malb"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_comments_176248.json:
```json
{
    "body": "<a id='comment:27'></a>\nHi, \nI updated the spkg. Please have a look at it.",
    "created_at": "2012-03-22T16:31:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176248",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:27'></a>
Hi, 
I updated the spkg. Please have a look at it.



---

archive/issue_comments_176249.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2012-03-22T16:31:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176249",
    "user": "https://github.com/alexanderdreyer"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_176250.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2012-03-22T21:23:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176250",
    "user": "https://github.com/malb"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_176251.json:
```json
{
    "body": "<a id='comment:28'></a>\nBack to positive review. Thanks!",
    "created_at": "2012-03-22T21:23:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176251",
    "user": "https://github.com/malb"
}
```

<a id='comment:28'></a>
Back to positive review. Thanks!



---

archive/issue_comments_176252.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2012-03-27T19:19:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176252",
    "user": "https://github.com/jhpalmieri"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_comments_176253.json:
```json
{
    "body": "<a id='comment:29'></a>\nAt least in combination with #12369, this fails to build on OpenSolaris on x86 (David Kirkby's machine hawk): it gives me\n\n```\nscons: done reading SConscript files.\nscons: Building targets ...\nwriting config.h...\ngcc -o Cudd/cudd/cuddAPI.pic.o -c -std=c99 -O3 -Wno-long-long -Wreturn-type -g -fPIC -mmmx -msse -msse2 -msse3 -g -fPIC -Wall -pedantic -O2 -KPIC -DPBORI_NDEBUG -DSIZEOF_VOID_P=4 -DSIZEOF_INT=4 -DSIZEOF_LONG=4 -DPBORI_HAVE_GD -DPBORI_HAVE_TR1_UNORDERED_MAP -DPBORI_HAVE_M4RI -Ilibpolybori/include -Igroebner/include -I/export/home/palmieri/testing/GCC-no-check/sage-5.0.beta10-gcc/local/include -I/export/home/palmieri/testing/GCC-no-check/sage-5.0.beta10-gcc/local/include/python2.7 -ICudd Cudd/cudd/cuddAPI.c\ngcc: error: unrecognized option \u2018-KPIC\u2019\nscons: *** [Cudd/cudd/cuddAPI.pic.o] Error 1\n```\nIn contrast, the 0.8.0.p1 spkg builds fine.\n\nOn Solaris on sparc (mark2), in combination with #12369, I get this:\n\n```\nStarting build...\nRemoving old PolyBoRi install...\nDone removing old PolyBoRi install.\nRunning build_polybori...\nscons: Reading SConscript files ...\nPlatform:  sunos5\nVariable LIBSUFFIX not in default environment!\nPlatform:  sunos5\nDetecting type sizes... no\nCould not detect type sizes (maybe compile/link flags trouble)! Exiting.\n```",
    "created_at": "2012-03-27T19:19:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176253",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:29'></a>
At least in combination with #12369, this fails to build on OpenSolaris on x86 (David Kirkby's machine hawk): it gives me

```
scons: done reading SConscript files.
scons: Building targets ...
writing config.h...
gcc -o Cudd/cudd/cuddAPI.pic.o -c -std=c99 -O3 -Wno-long-long -Wreturn-type -g -fPIC -mmmx -msse -msse2 -msse3 -g -fPIC -Wall -pedantic -O2 -KPIC -DPBORI_NDEBUG -DSIZEOF_VOID_P=4 -DSIZEOF_INT=4 -DSIZEOF_LONG=4 -DPBORI_HAVE_GD -DPBORI_HAVE_TR1_UNORDERED_MAP -DPBORI_HAVE_M4RI -Ilibpolybori/include -Igroebner/include -I/export/home/palmieri/testing/GCC-no-check/sage-5.0.beta10-gcc/local/include -I/export/home/palmieri/testing/GCC-no-check/sage-5.0.beta10-gcc/local/include/python2.7 -ICudd Cudd/cudd/cuddAPI.c
gcc: error: unrecognized option ‘-KPIC’
scons: *** [Cudd/cudd/cuddAPI.pic.o] Error 1
```
In contrast, the 0.8.0.p1 spkg builds fine.

On Solaris on sparc (mark2), in combination with #12369, I get this:

```
Starting build...
Removing old PolyBoRi install...
Done removing old PolyBoRi install.
Running build_polybori...
scons: Reading SConscript files ...
Platform:  sunos5
Variable LIBSUFFIX not in default environment!
Platform:  sunos5
Detecting type sizes... no
Could not detect type sizes (maybe compile/link flags trouble)! Exiting.
```



---

archive/issue_comments_176254.json:
```json
{
    "body": "<a id='comment:30'></a>\nThanks, I think I found the issue. Please try out the following:\nhttp://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.1.p1.spkg\n\nNote: I updated the spkg from #12754 which already fixed other things (for instance gcc-4.7 compatibility.)",
    "created_at": "2012-03-27T22:26:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176254",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:30'></a>
Thanks, I think I found the issue. Please try out the following:
http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.1.p1.spkg

Note: I updated the spkg from #12754 which already fixed other things (for instance gcc-4.7 compatibility.)



---

archive/issue_comments_176255.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2012-03-27T22:26:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176255",
    "user": "https://github.com/alexanderdreyer"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_176256.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,4 +4,4 @@\n https://sourceforge.net/projects/polybori/files/polybori/0.8.1\n \n ### Current spkg\n-* **Install** http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.1.p0.spkg\n+* **Install** http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.1.p1.spkg\n``````\n",
    "created_at": "2012-03-27T22:26:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176256",
    "user": "https://github.com/alexanderdreyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,4 +4,4 @@
 https://sourceforge.net/projects/polybori/files/polybori/0.8.1
 
 ### Current spkg
-* **Install** http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.1.p0.spkg
+* **Install** http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.1.p1.spkg
``````




---

archive/issue_comments_176257.json:
```json
{
    "body": "<a id='comment:31'></a>\nWith this package, on both Solaris and OpenSolaris, I get this:\n\n```\nStarting build...\nRemoving old PolyBoRi install...\nDone removing old PolyBoRi install.\nRunning build_polybori...\nscons: Reading SConscript files ...\nNameError: name 'CCFLAGS' is not defined:\n  File \"/export/home/palmieri/testing/sage-5.0.beta7-gcc/spkg/build/polybori-0.8.1.p1/src/polybori-0.8.1/SConstruct\", line 241:\n    if is_gcc():\n  File \"/export/home/palmieri/testing/sage-5.0.beta7-gcc/spkg/build/polybori-0.8.1.p1/src/polybori-0.8.1/SConstruct\", line 239:\n    compilerenv = Environment(ENV = os.environ, options = opts)\n  File \"/export/home/palmieri/testing/sage-5.0.beta7-gcc/local/lib/scons-1.2.0/SCons/Environment.py\", line 975:\n    variables.Update(self)\n  File \"/export/home/palmieri/testing/sage-5.0.beta7-gcc/local/lib/scons-1.2.0/SCons/Variables/__init__.py\", line 169:\n    execfile(filename, {}, values)\n  File \"custom.py\", line 6:\n    CCFLAGS += [\"-Wno-long-long\", \"-Wreturn-type\"]\nError building PolyBoRi.\n```\nShould `CCFLAGS` be `CFLAGS`?  If I fix this, I get a similar error for `GD_LIBS`. I ended up applying the following patch:\n\n```diff\ndiff --git a/custom.py b/custom.py\n--- a/custom.py\n+++ b/custom.py\n@@ -1,13 +1,15 @@\n import os\n import sys\n \n-# FIXME: Do we really want to *overwrite* the flags (e.g. if set by the user)?\n-# Answer: Should be fixed now.\n-CCFLAGS += [\"-Wno-long-long\", \"-Wreturn-type\"]\n-\n # Note: PolyBoRi still appends DEFAULT_*FLAGS (overwrite those, if necessary)\n if 'CFLAGS' in os.environ:\n   CFLAGS = os.environ['CFLAGS'].split(' ')\n+else:\n+  CFLAGS = []\n+\n+# FIXME: Do we really want to *overwrite* the flags (e.g. if set by the user)?\n+# Answer: Should be fixed now.\n+CFLAGS += [\"-Wno-long-long\", \"-Wreturn-type\"]\n \n if 'CXXFLAGS' in os.environ:\n   CXXFLAGS = os.environ['CXXFLAGS'].split(' ')\n@@ -15,6 +17,11 @@\n if 'CPPFLAGS' in os.environ:\n   CCFLAGS = os.environ['CPPFLAGS'].split(' ')\n \n+if 'GD_LIBS' in os.environ:\n+  GD_LIBS = os.environ['GD_LIBS'].split(' ')\n+else:\n+  GD_LIBS = []\n+\n GD_LIBS+=[\"png12\",\"z\"]\n \n # FIXME: Should we include LDFLAGS here? (see above)\n```\nThe spkg-install file is odd, though: some places it refers to `CFLAGS`, others to `CCFLAGS`, so I'm not sure my changes are correct. In any case, it worked on OpenSolaris, but on Solaris I got the same error as before (\"Could not detect type sizes\"). This may be related to #12369.",
    "created_at": "2012-03-27T22:47:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176257",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:31'></a>
With this package, on both Solaris and OpenSolaris, I get this:

```
Starting build...
Removing old PolyBoRi install...
Done removing old PolyBoRi install.
Running build_polybori...
scons: Reading SConscript files ...
NameError: name 'CCFLAGS' is not defined:
  File "/export/home/palmieri/testing/sage-5.0.beta7-gcc/spkg/build/polybori-0.8.1.p1/src/polybori-0.8.1/SConstruct", line 241:
    if is_gcc():
  File "/export/home/palmieri/testing/sage-5.0.beta7-gcc/spkg/build/polybori-0.8.1.p1/src/polybori-0.8.1/SConstruct", line 239:
    compilerenv = Environment(ENV = os.environ, options = opts)
  File "/export/home/palmieri/testing/sage-5.0.beta7-gcc/local/lib/scons-1.2.0/SCons/Environment.py", line 975:
    variables.Update(self)
  File "/export/home/palmieri/testing/sage-5.0.beta7-gcc/local/lib/scons-1.2.0/SCons/Variables/__init__.py", line 169:
    execfile(filename, {}, values)
  File "custom.py", line 6:
    CCFLAGS += ["-Wno-long-long", "-Wreturn-type"]
Error building PolyBoRi.
```
Should `CCFLAGS` be `CFLAGS`?  If I fix this, I get a similar error for `GD_LIBS`. I ended up applying the following patch:

```diff
diff --git a/custom.py b/custom.py
--- a/custom.py
+++ b/custom.py
@@ -1,13 +1,15 @@
 import os
 import sys
 
-# FIXME: Do we really want to *overwrite* the flags (e.g. if set by the user)?
-# Answer: Should be fixed now.
-CCFLAGS += ["-Wno-long-long", "-Wreturn-type"]
-
 # Note: PolyBoRi still appends DEFAULT_*FLAGS (overwrite those, if necessary)
 if 'CFLAGS' in os.environ:
   CFLAGS = os.environ['CFLAGS'].split(' ')
+else:
+  CFLAGS = []
+
+# FIXME: Do we really want to *overwrite* the flags (e.g. if set by the user)?
+# Answer: Should be fixed now.
+CFLAGS += ["-Wno-long-long", "-Wreturn-type"]
 
 if 'CXXFLAGS' in os.environ:
   CXXFLAGS = os.environ['CXXFLAGS'].split(' ')
@@ -15,6 +17,11 @@
 if 'CPPFLAGS' in os.environ:
   CCFLAGS = os.environ['CPPFLAGS'].split(' ')
 
+if 'GD_LIBS' in os.environ:
+  GD_LIBS = os.environ['GD_LIBS'].split(' ')
+else:
+  GD_LIBS = []
+
 GD_LIBS+=["png12","z"]
 
 # FIXME: Should we include LDFLAGS here? (see above)
```
The spkg-install file is odd, though: some places it refers to `CFLAGS`, others to `CCFLAGS`, so I'm not sure my changes are correct. In any case, it worked on OpenSolaris, but on Solaris I got the same error as before ("Could not detect type sizes"). This may be related to #12369.



---

archive/issue_comments_176258.json:
```json
{
    "body": "<a id='comment:32'></a>\nReplying to [jhpalmieri](#comment%3A31):\n> With this package, on both Solaris and OpenSolaris, I get this:\n> Should `CCFLAGS` be `CFLAGS`?  If I fix this, I get a similar error for `GD_LIBS`. I ended up applying the following patch:\n\nSorry, I made a mistake. I did not have a recent Sage at hand on Solaris, so I tried that out without custom.py. (I need to fix that upstream again. Your patch is a good work around.)\n\n> The spkg-install file is odd, though: some places it refers to `CFLAGS`, others to `CCFLAGS`, so I'm not sure my changes are correct.\n\nCFLAGS are flags for pure C, CCFLAGS for C or C++.\n> In any case, it worked on OpenSolaris, but on Solaris I got the same error as before (\"Could not detect type sizes\"). This may be related to #12369.\n\nThere a file called config.log. Can you post it somewhere?",
    "created_at": "2012-03-27T23:07:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176258",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:32'></a>
Replying to [jhpalmieri](#comment%3A31):
> With this package, on both Solaris and OpenSolaris, I get this:
> Should `CCFLAGS` be `CFLAGS`?  If I fix this, I get a similar error for `GD_LIBS`. I ended up applying the following patch:

Sorry, I made a mistake. I did not have a recent Sage at hand on Solaris, so I tried that out without custom.py. (I need to fix that upstream again. Your patch is a good work around.)

> The spkg-install file is odd, though: some places it refers to `CFLAGS`, others to `CCFLAGS`, so I'm not sure my changes are correct.

CFLAGS are flags for pure C, CCFLAGS for C or C++.
> In any case, it worked on OpenSolaris, but on Solaris I got the same error as before ("Could not detect type sizes"). This may be related to #12369.

There a file called config.log. Can you post it somewhere?



---

archive/issue_comments_176259.json:
```json
{
    "body": "<a id='comment:33'></a>\n> Sorry, I made a mistake. I did not have a recent Sage at hand on Solaris, so I tried that out without custom.py. (I need to fix that upstream again. Your patch is a good work around.)\n\nBut the CCFLAGS should still be there, for instance:\n\nCCFLAGS = [\"-O3\", \"-Wno-long-long\", \"-Wreturn-type\"]",
    "created_at": "2012-03-27T23:10:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176259",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:33'></a>
> Sorry, I made a mistake. I did not have a recent Sage at hand on Solaris, so I tried that out without custom.py. (I need to fix that upstream again. Your patch is a good work around.)

But the CCFLAGS should still be there, for instance:

CCFLAGS = ["-O3", "-Wno-long-long", "-Wreturn-type"]



---

archive/issue_comments_176260.json:
```json
{
    "body": "<a id='comment:34'></a>\nIf I add a print statement at the top of custom.py (\"print CCFLAGS\"), then on OS X or sage.math, I see `['-O3']`. On OpenSolaris, I get a NameError saying that CCFLAGS is not defined.\n\nWith Solaris (skynet machine mark2), the entire contents of config.log:\n\n```\nfile /home/palmieri/mark2/GCC/sage-5.0.beta10-gcc/spkg/build/polybori-0.8.1.p1/src/polybori-0.8.1/SConstruct,line 653:\n        Configure(confdir = .sconf_temp)\nscons: Configure: Detecting type sizes... \n.sconf_temp/conftest_0.c <-\n  |\n  |        #include <stdio.h>\n  |        int main(int argc, char **argv) {\n  |          printf(\"SIZEOF_VOID_P=%u SIZEOF_INT=%u SIZEOF_LONG=%u\",\n  |            (unsigned)sizeof(void*), (unsigned)sizeof(int), (unsigned)sizeof(long));\n  |          return 0;\n  |        }\n  |        \ngcc -o .sconf_temp/conftest_0.o -c -Wno-long-long -Wreturn-type -std=c99 -O3 -DPBORI_NDEBUG -I/home/palmieri/mark2/GCC/sage-5.0.beta10-gcc/local/include .sconf_temp/conftest_0.c\ngcc -o .sconf_temp/conftest_0 -Wl,-rpath=\\$ORIGIN/../build/usr/local/lib -z origin .sconf_temp/conftest_0.o -L/home/palmieri/mark2/GCC/sage-5.0.beta10-gcc/local/lib\nld: fatal: option -dn and -P are incompatible\nld: fatal: Flags processing errors\ncollect2: ld returned 1 exit status\nscons: Configure: no\n```",
    "created_at": "2012-03-27T23:53:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176260",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:34'></a>
If I add a print statement at the top of custom.py ("print CCFLAGS"), then on OS X or sage.math, I see `['-O3']`. On OpenSolaris, I get a NameError saying that CCFLAGS is not defined.

With Solaris (skynet machine mark2), the entire contents of config.log:

```
file /home/palmieri/mark2/GCC/sage-5.0.beta10-gcc/spkg/build/polybori-0.8.1.p1/src/polybori-0.8.1/SConstruct,line 653:
        Configure(confdir = .sconf_temp)
scons: Configure: Detecting type sizes... 
.sconf_temp/conftest_0.c <-
  |
  |        #include <stdio.h>
  |        int main(int argc, char **argv) {
  |          printf("SIZEOF_VOID_P=%u SIZEOF_INT=%u SIZEOF_LONG=%u",
  |            (unsigned)sizeof(void*), (unsigned)sizeof(int), (unsigned)sizeof(long));
  |          return 0;
  |        }
  |        
gcc -o .sconf_temp/conftest_0.o -c -Wno-long-long -Wreturn-type -std=c99 -O3 -DPBORI_NDEBUG -I/home/palmieri/mark2/GCC/sage-5.0.beta10-gcc/local/include .sconf_temp/conftest_0.c
gcc -o .sconf_temp/conftest_0 -Wl,-rpath=\$ORIGIN/../build/usr/local/lib -z origin .sconf_temp/conftest_0.o -L/home/palmieri/mark2/GCC/sage-5.0.beta10-gcc/local/lib
ld: fatal: option -dn and -P are incompatible
ld: fatal: Flags processing errors
collect2: ld returned 1 exit status
scons: Configure: no
```



---

archive/issue_comments_176261.json:
```json
{
    "body": "<a id='comment:35'></a>\nReplying to [AlexanderDreyer](#comment%3A32):\n> CFLAGS are flags for pure C, CCFLAGS for C or C++.\n\nI don't think this is standard usage.  Normally, one uses CFLAGS for C and CXXFLAGS for C++.  Of course, you can additionally support CCFLAGS if you want.",
    "created_at": "2012-03-28T06:46:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176261",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:35'></a>
Replying to [AlexanderDreyer](#comment%3A32):
> CFLAGS are flags for pure C, CCFLAGS for C or C++.

I don't think this is standard usage.  Normally, one uses CFLAGS for C and CXXFLAGS for C++.  Of course, you can additionally support CCFLAGS if you want.



---

archive/issue_comments_176262.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -5,3 +5,5 @@\n \n ### Current spkg\n * **Install** http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.1.p1.spkg\n+\n+This might also fix building with GCC-4.7.0, see #12751 for the GCC-4.7.0 metaticket.\n``````\n",
    "created_at": "2012-03-28T06:53:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176262",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -5,3 +5,5 @@
 
 ### Current spkg
 * **Install** http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.1.p1.spkg
+
+This might also fix building with GCC-4.7.0, see #12751 for the GCC-4.7.0 metaticket.
``````




---

archive/issue_comments_176263.json:
```json
{
    "body": "<a id='comment:37'></a>\nReplying to [jdemeyer](#comment%3A35):\n> Replying to [AlexanderDreyer](#comment%3A32):\n> > CFLAGS are flags for pure C, CCFLAGS for C or C++.\n\n> I don't think this is standard usage.  Normally, one uses CFLAGS for C and CXXFLAGS for C++.  Of course, you can additionally support CCFLAGS if you want.\nWell, that's not my idea, that's `scons`' standard. But I use CCFLAGS only internally (for instance for storing `CPPFLAGS` from the environment.",
    "created_at": "2012-03-28T09:28:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176263",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:37'></a>
Replying to [jdemeyer](#comment%3A35):
> Replying to [AlexanderDreyer](#comment%3A32):
> > CFLAGS are flags for pure C, CCFLAGS for C or C++.

> I don't think this is standard usage.  Normally, one uses CFLAGS for C and CXXFLAGS for C++.  Of course, you can additionally support CCFLAGS if you want.
Well, that's not my idea, that's `scons`' standard. But I use CCFLAGS only internally (for instance for storing `CPPFLAGS` from the environment.



---

archive/issue_comments_176264.json:
```json
{
    "body": "<a id='comment:38'></a>\nReplying to [jhpalmieri](#comment%3A34):\n> If I add a print statement at the top of custom.py (\"print CCFLAGS\"), then on OS X or sage.math, I see `['-O3']`. On OpenSolaris, I get a NameError saying that CCFLAGS is not defined.\n> \n> With Solaris (skynet machine mark2), the entire contents of config.log:\n> \n> ```\n> ld: fatal: option -dn and -P are incompatible\n> ld: fatal: Flags processing errors\n> collect2: ld returned 1 exit status\n> scons: Configure: no\n> ```\n\nOk, that's arising from `-rpath`, As I understand it must be `-R` for the Solaris-linker. I'll provide a patch for that.",
    "created_at": "2012-03-28T09:33:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176264",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:38'></a>
Replying to [jhpalmieri](#comment%3A34):
> If I add a print statement at the top of custom.py ("print CCFLAGS"), then on OS X or sage.math, I see `['-O3']`. On OpenSolaris, I get a NameError saying that CCFLAGS is not defined.
> 
> With Solaris (skynet machine mark2), the entire contents of config.log:
> 
> ```
> ld: fatal: option -dn and -P are incompatible
> ld: fatal: Flags processing errors
> collect2: ld returned 1 exit status
> scons: Configure: no
> ```

Ok, that's arising from `-rpath`, As I understand it must be `-R` for the Solaris-linker. I'll provide a patch for that.



---

archive/issue_comments_176265.json:
```json
{
    "body": "<a id='comment:39'></a>\nReplying to [AlexanderDreyer](#comment%3A37):\n> Well, that's not my idea, that's `scons`' standard.\n\nNot the first strange idea from the SCons developers... (honestly, if I encounter a SCons developer on the street, I'd like to punch him in the face)",
    "created_at": "2012-03-28T09:35:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176265",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:39'></a>
Replying to [AlexanderDreyer](#comment%3A37):
> Well, that's not my idea, that's `scons`' standard.

Not the first strange idea from the SCons developers... (honestly, if I encounter a SCons developer on the street, I'd like to punch him in the face)



---

archive/issue_comments_176266.json:
```json
{
    "body": "<a id='comment:40'></a>\nThere's an updated spkg at the usual place: \nhttp://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.1.p1.spkg\n\nPlease have a look at it.",
    "created_at": "2012-03-28T22:33:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176266",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:40'></a>
There's an updated spkg at the usual place: 
http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.1.p1.spkg

Please have a look at it.



---

archive/issue_comments_176267.json:
```json
{
    "body": "<a id='comment:41'></a>\nOn OpenSolaris: it seems to build correctly. I haven't done any testing, though.\n\nOn Solaris:\n\n```\nRunning build_polybori...\nscons: Reading SConscript files ...\nPlatform:  sunos5\nPlatform:  sunos5\nValueError: list.remove(x): x not in list:\n  File \"/home/palmieri/mark2/GCC/sage-5.0.beta10-gcc/spkg/build/polybori-0.8.1.p1/src/polybori-0.8.1/SConstruct\", line 472:\n    tools.remove(arg)\n```",
    "created_at": "2012-03-28T22:51:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176267",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:41'></a>
On OpenSolaris: it seems to build correctly. I haven't done any testing, though.

On Solaris:

```
Running build_polybori...
scons: Reading SConscript files ...
Platform:  sunos5
Platform:  sunos5
ValueError: list.remove(x): x not in list:
  File "/home/palmieri/mark2/GCC/sage-5.0.beta10-gcc/spkg/build/polybori-0.8.1.p1/src/polybori-0.8.1/SConstruct", line 472:
    tools.remove(arg)
```



---

archive/issue_comments_176268.json:
```json
{
    "body": "<a id='comment:42'></a>\nReplying to [jhpalmieri](#comment%3A41):\n> On OpenSolaris: it seems to build correctly. I haven't done any testing, though.\n> \n> On Solaris:\n> \n> ```\n> ```\n> ValueError: list.remove(x): x not in list:\n>   File \"/home/palmieri/mark2/GCC/sage-5.0.beta10-gcc/spkg/build/polybori-0.8.1.p1/src/polybori-0.8.1/SConstruct\", line 472:\n>     tools.remove(arg)\n> }}}\n\nOk, a plain typo. Please try our gain.",
    "created_at": "2012-03-28T23:32:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176268",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:42'></a>
Replying to [jhpalmieri](#comment%3A41):
> On OpenSolaris: it seems to build correctly. I haven't done any testing, though.
> 
> On Solaris:
> 
> ```
> ```
> ValueError: list.remove(x): x not in list:
>   File "/home/palmieri/mark2/GCC/sage-5.0.beta10-gcc/spkg/build/polybori-0.8.1.p1/src/polybori-0.8.1/SConstruct", line 472:
>     tools.remove(arg)
> }}}

Ok, a plain typo. Please try our gain.



---

archive/issue_comments_176269.json:
```json
{
    "body": "<a id='comment:43'></a>\nOkay, this works now on Solaris.",
    "created_at": "2012-03-29T00:57:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176269",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:43'></a>
Okay, this works now on Solaris.



---

archive/issue_comments_176270.json:
```json
{
    "body": "<a id='comment:44'></a>\nSo back to positive review again? (I add a dependency on #12754, since I used the spkg from there, and ot formally still needs a positive review.)",
    "created_at": "2012-03-29T07:54:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176270",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:44'></a>
So back to positive review again? (I add a dependency on #12754, since I used the spkg from there, and ot formally still needs a positive review.)



---

archive/issue_comments_176271.json:
```json
{
    "body": "**Changing dependencies** from \"#12656\" to \"#12656 #12754\".",
    "created_at": "2012-03-29T07:54:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176271",
    "user": "https://github.com/alexanderdreyer"
}
```

**Changing dependencies** from "#12656" to "#12656 #12754".



---

archive/issue_comments_176272.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -6,4 +6,4 @@\n ### Current spkg\n * **Install** http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.1.p1.spkg\n \n-This might also fix building with GCC-4.7.0, see #12751 for the GCC-4.7.0 metaticket.\n+This also fixes building with GCC-4.7.0, see #12751 for the GCC-4.7.0 metaticket.\n``````\n",
    "created_at": "2012-03-29T08:11:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176272",
    "user": "https://github.com/alexanderdreyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -6,4 +6,4 @@
 ### Current spkg
 * **Install** http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.1.p1.spkg
 
-This might also fix building with GCC-4.7.0, see #12751 for the GCC-4.7.0 metaticket.
+This also fixes building with GCC-4.7.0, see #12751 for the GCC-4.7.0 metaticket.
``````




---

archive/issue_events_039721.json:
```json
{
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "label": "component: packages",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12655#event-39721"
}
```



---

archive/issue_comments_176273.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-PolyBoRi's next minor release will be out soon.\n+PolyBoRi's next minor release is out now.\n There were no changes of the interface between PolyBoRi 0.8.0 and 0.8.1, so we just have to update the sources from here:\n \n https://sourceforge.net/projects/polybori/files/polybori/0.8.1\n``````\n",
    "created_at": "2012-03-29T08:59:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176273",
    "user": "https://github.com/alexanderdreyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-PolyBoRi's next minor release will be out soon.
+PolyBoRi's next minor release is out now.
 There were no changes of the interface between PolyBoRi 0.8.0 and 0.8.1, so we just have to update the sources from here:
 
 https://sourceforge.net/projects/polybori/files/polybori/0.8.1
``````




---

archive/issue_comments_176274.json:
```json
{
    "body": "**Changing dependencies** from \"#12656 #12754\" to \"#12656, #12750, #12754\".",
    "created_at": "2012-03-29T14:55:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176274",
    "user": "https://github.com/jdemeyer"
}
```

**Changing dependencies** from "#12656 #12754" to "#12656, #12750, #12754".



---

archive/issue_comments_176275.json:
```json
{
    "body": "**Changing dependencies** from \"#12656, #12750, #12754\" to \"#12656, #12750\".",
    "created_at": "2012-04-02T07:29:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176275",
    "user": "https://github.com/jdemeyer"
}
```

**Changing dependencies** from "#12656, #12750, #12754" to "#12656, #12750".



---

archive/issue_comments_176276.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2012-04-02T07:37:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176276",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_176277.json:
```json
{
    "body": "<a id='comment:51'></a>\nI think SPKG.txt needs some work:\n1. The Changelog messages don't tell much.  If you add a patch, you should mention that fact in the Changelog.  You should add a ticket number in the Changelog messages.\n2. The patches should be documented.",
    "created_at": "2012-04-02T07:37:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176277",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:51'></a>
I think SPKG.txt needs some work:
1. The Changelog messages don't tell much.  If you add a patch, you should mention that fact in the Changelog.  You should add a ticket number in the Changelog messages.
2. The patches should be documented.



---

archive/issue_comments_176278.json:
```json
{
    "body": "<a id='comment:52'></a>\nReplying to [jdemeyer](#comment%3A51):\n> I think SPKG.txt needs some work:\n> 1. The Changelog messages don't tell much.  If you add a patch, you should mention that fact in the Changelog.  You should add a ticket number in the Changelog messages.\n> 2. The patches should be documented.\n\n\nNo problem, I'll add this:\n\n{{{ #!diff\ndiff -r f4822b70da5b SPKG.txt           \n--- a/SPKG.txt  Thu Mar 29 01:28:08 2012 +0200\n+++ b/SPKG.txt  Mon Apr 02 20:59:48 2012 +0200\n@@ -36,17 +36,35 @@                           \n* png/libpng12 (accomplished because Python and gd depend on it, too)\n* libz         (accomplished because e.g. libpng depends on it)      \n                                                                       \n+== Patches ==                                                         \n+                                                                      \n+ * Sage Trac #12655 (Upgrade ticket, fixing known issues):            \n+   - gbcore.py.patch -- Fixing list access to ideal, which might be represented\n+     as a set here                                                             \n+   - ipbori.patch -- Fixing prerequisites check for testing plot.py            \n+   - nf.h.patch -- Fixing preprocessor misconception                           \n+ * Sage Trac #12750:                                                           \n+   - base_lookup.patch -- Fixing explict name lookup in template base (gcc 4.7)\n+ * Sage Trac #12655, [comment:29](#comment%3A29):\n+   - SConstruct.patch -- Fixing gcc components on sun\n+\n+All patches were merged upstream.\n+\n+\n == Special Files ==\n+\n* custom.py - configuration file for PolyBoRi's build system,\n              sets local prefix and install paths to Sage directories\n\n+\n == Releases ==\n\n === polybori-0.8.1.p1 (Alexander Dreyer, March 26th, 2012) ===\n- * Rebased spkg on polybori-0.8.0.p2, work around broken scons on sun\n+ * Rebased spkg on polybori-0.8.0.p2 (Sage Trac #12750)\n+ * Working around broken scons on sun (Sage Trac #12655, [comment:29](#comment%3A29))\n\n === polybori-0.8.1.p0 (Alexander Dreyer, March 7th, 2012) ===\n- * Updating sources to PolyBoRi's release 0.8.1\n+ * Updating sources to PolyBoRi's release 0.8.1 (Sage Trac #12655)\n\n === polybori-0.8.0.p2 (Alexander Dreyer, March 26th, 2012) ===\n* Fix scoping/name look-up issue and support flags from the environment\n\n}}}",
    "created_at": "2012-04-02T19:02:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176278",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:52'></a>
Replying to [jdemeyer](#comment%3A51):
> I think SPKG.txt needs some work:
> 1. The Changelog messages don't tell much.  If you add a patch, you should mention that fact in the Changelog.  You should add a ticket number in the Changelog messages.
> 2. The patches should be documented.


No problem, I'll add this:

{{{ #!diff
diff -r f4822b70da5b SPKG.txt           
--- a/SPKG.txt  Thu Mar 29 01:28:08 2012 +0200
+++ b/SPKG.txt  Mon Apr 02 20:59:48 2012 +0200
@@ -36,17 +36,35 @@                           
* png/libpng12 (accomplished because Python and gd depend on it, too)
* libz         (accomplished because e.g. libpng depends on it)      
                                                                       
+== Patches ==                                                         
+                                                                      
+ * Sage Trac #12655 (Upgrade ticket, fixing known issues):            
+   - gbcore.py.patch -- Fixing list access to ideal, which might be represented
+     as a set here                                                             
+   - ipbori.patch -- Fixing prerequisites check for testing plot.py            
+   - nf.h.patch -- Fixing preprocessor misconception                           
+ * Sage Trac #12750:                                                           
+   - base_lookup.patch -- Fixing explict name lookup in template base (gcc 4.7)
+ * Sage Trac #12655, [comment:29](#comment%3A29):
+   - SConstruct.patch -- Fixing gcc components on sun
+
+All patches were merged upstream.
+
+
 == Special Files ==
+
* custom.py - configuration file for PolyBoRi's build system,
              sets local prefix and install paths to Sage directories

+
 == Releases ==

 === polybori-0.8.1.p1 (Alexander Dreyer, March 26th, 2012) ===
- * Rebased spkg on polybori-0.8.0.p2, work around broken scons on sun
+ * Rebased spkg on polybori-0.8.0.p2 (Sage Trac #12750)
+ * Working around broken scons on sun (Sage Trac #12655, [comment:29](#comment%3A29))

 === polybori-0.8.1.p0 (Alexander Dreyer, March 7th, 2012) ===
- * Updating sources to PolyBoRi's release 0.8.1
+ * Updating sources to PolyBoRi's release 0.8.1 (Sage Trac #12655)

 === polybori-0.8.0.p2 (Alexander Dreyer, March 26th, 2012) ===
* Fix scoping/name look-up issue and support flags from the environment

}}}



---

archive/issue_comments_176279.json:
```json
{
    "body": "<a id='comment:53'></a>\nNow, the new spkg is uploaded at the usual place: http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.1.p1.spkg .",
    "created_at": "2012-04-02T19:14:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176279",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:53'></a>
Now, the new spkg is uploaded at the usual place: http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.1.p1.spkg .



---

archive/issue_comments_176280.json:
```json
{
    "body": "**Work_Issues:** Fix dependencies in `module_list.py`.",
    "created_at": "2012-04-02T23:53:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176280",
    "user": "https://github.com/nexttime"
}
```

**Work_Issues:** Fix dependencies in `module_list.py`.



---

archive/issue_comments_176281.json:
```json
{
    "body": "<a id='comment:54'></a>\n`module_list.py` certainly needs work w.r.t. dependencies.\n\nAfter installing the new PolyBoRi spkg and running `env SAGE_UPGRADING=yes make build` (which reinstalls the Sage library as well as GAP and sagetex), I get dozens of import errors from Sphinx (since `ptestlong` depends on `doc` -- never understood why we have to build HTML documentation to run tests...).\n\nNote that `local/bin/sage-starts` seemed to have succeeded, but in fact it was `[ -f local/lib/sage-started.txt ]` that did; i.e., *of course* also Sage doesn't start up.\n\nThat's because a couple of Sage library extension modules didn't get rebuilt, still referring to the old, deleted PolyBoRi shared library.",
    "created_at": "2012-04-02T23:53:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176281",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:54'></a>
`module_list.py` certainly needs work w.r.t. dependencies.

After installing the new PolyBoRi spkg and running `env SAGE_UPGRADING=yes make build` (which reinstalls the Sage library as well as GAP and sagetex), I get dozens of import errors from Sphinx (since `ptestlong` depends on `doc` -- never understood why we have to build HTML documentation to run tests...).

Note that `local/bin/sage-starts` seemed to have succeeded, but in fact it was `[ -f local/lib/sage-started.txt ]` that did; i.e., *of course* also Sage doesn't start up.

That's because a couple of Sage library extension modules didn't get rebuilt, still referring to the old, deleted PolyBoRi shared library.



---

archive/issue_comments_176282.json:
```json
{
    "body": "**Changing reviewer** from \"Martin Albrecht, Jeroen Demeyer\" to \"Martin Albrecht, Jeroen Demeyer, Leif Leonhardy\".",
    "created_at": "2012-04-02T23:53:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176282",
    "user": "https://github.com/nexttime"
}
```

**Changing reviewer** from "Martin Albrecht, Jeroen Demeyer" to "Martin Albrecht, Jeroen Demeyer, Leif Leonhardy".



---

archive/issue_comments_176283.json:
```json
{
    "body": "<a id='comment:55'></a>\nI also noticed that (e.g.) `-O3` in `C/CPP/CXXFLAGS` gets overridden by `-O2`, but the latter apparently originates from M4RI's `m4ri_config.h`, i.e. `__M4RI_CFLAGS`.\n\nIs it intentional to use *all of them* in *all* compile commands?  (These are btw. also passed to `g++` when compiling C++ sources.)\n\n\n\n\nFurthermore, it's quite funny to use `g++ -std=c++98` while using `long long`; I get hundreds of warnings for that, since `-Wall` is also there, but not `-Wno-long-long`.  (`-Wall` comes from M4RI's `CFLAGS` as well.)",
    "created_at": "2012-04-03T00:33:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176283",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:55'></a>
I also noticed that (e.g.) `-O3` in `C/CPP/CXXFLAGS` gets overridden by `-O2`, but the latter apparently originates from M4RI's `m4ri_config.h`, i.e. `__M4RI_CFLAGS`.

Is it intentional to use *all of them* in *all* compile commands?  (These are btw. also passed to `g++` when compiling C++ sources.)




Furthermore, it's quite funny to use `g++ -std=c++98` while using `long long`; I get hundreds of warnings for that, since `-Wall` is also there, but not `-Wno-long-long`.  (`-Wall` comes from M4RI's `CFLAGS` as well.)



---

archive/issue_comments_176284.json:
```json
{
    "body": "<a id='comment:56'></a>\nAfter running `./sage -ba-force`, `make ptestlong` passes all tests (Sage 5.0.beta11, Ubuntu 12.04 beta x86_64, self-made GCC 4.6.3).",
    "created_at": "2012-04-03T00:49:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176284",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:56'></a>
After running `./sage -ba-force`, `make ptestlong` passes all tests (Sage 5.0.beta11, Ubuntu 12.04 beta x86_64, self-made GCC 4.6.3).



---

archive/issue_comments_176285.json:
```json
{
    "body": "<a id='comment:57'></a>\nReplying to [leif](#comment%3A54):\n> `module_list.py` certainly needs work w.r.t. dependencies.\n>  [...]\n> That's because a couple of Sage library extension modules didn't get rebuilt, still referring to the old, deleted PolyBoRi shared library.\n\n\nActually only the `pbori` module needs to get rebuilt; while `touch`ing `$SAGE_LOCAL/include/polybori.h` doesn't help, touching `$SAGE_LOCAL/include/polybori/*` does (afterwards running `./sage -b`).\n\n\n\n\nAlso builds with GCC 4.7.0 (Sage 5.0.beta10, Ubuntu 10.04.4 x86_64).\n\nI noticed that different flags get passed to `gcc`/`g++` depending on GCC's version, or probably the settings of `CC` and `CXX`.  Seems rather a side-effect than intended behaviour...\n\nW.r.t. M4RI's flags:  It should be sufficient to only pass / add the contents of `__M4RI_SIMD_CFLAGS`, and probably only when compiling *some* of the modules.",
    "created_at": "2012-04-03T06:04:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176285",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:57'></a>
Replying to [leif](#comment%3A54):
> `module_list.py` certainly needs work w.r.t. dependencies.
>  [...]
> That's because a couple of Sage library extension modules didn't get rebuilt, still referring to the old, deleted PolyBoRi shared library.


Actually only the `pbori` module needs to get rebuilt; while `touch`ing `$SAGE_LOCAL/include/polybori.h` doesn't help, touching `$SAGE_LOCAL/include/polybori/*` does (afterwards running `./sage -b`).




Also builds with GCC 4.7.0 (Sage 5.0.beta10, Ubuntu 10.04.4 x86_64).

I noticed that different flags get passed to `gcc`/`g++` depending on GCC's version, or probably the settings of `CC` and `CXX`.  Seems rather a side-effect than intended behaviour...

W.r.t. M4RI's flags:  It should be sufficient to only pass / add the contents of `__M4RI_SIMD_CFLAGS`, and probably only when compiling *some* of the modules.



---

archive/issue_comments_176286.json:
```json
{
    "body": "**Changing work_issues** from \"Fix dependencies in `module_list.py`.\" to \"Fix dependencies in `module_list.py` and/or touch some headers from `spkg-install`.\".",
    "created_at": "2012-04-03T06:05:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176286",
    "user": "https://github.com/nexttime"
}
```

**Changing work_issues** from "Fix dependencies in `module_list.py`." to "Fix dependencies in `module_list.py` and/or touch some headers from `spkg-install`.".



---

archive/issue_comments_176287.json:
```json
{
    "body": "<a id='comment:59'></a>\nReplying to [leif](#comment%3A55):\n> I also noticed that (e.g.) `-O3` in `C/CPP/CXXFLAGS` gets overridden by `-O2`, but the latter apparently originates from M4RI's `m4ri_config.h`, i.e. `__M4RI_CFLAGS`.\n> \n> Is it intentional to use *all of them* in *all* compile commands?  (These are btw. also passed to `g++` when compiling C++ sources.)\n\nOtherwise you might get inconsistencies.\n\n> \n\n\n> \n> Furthermore, it's quite funny to use `g++ -std=c++98` while using `long long`; I get hundreds of warnings for that, since `-Wall` is also there, but not `-Wno-long-long`.  (`-Wall` comes from M4RI's `CFLAGS` as well.)\n\n`long long` arises from M4RI, but M4RI assumes C99 which knows `long long`. But this is a known problem, I'll add `-Wno-long-long` back to the custom flags in the spkg. (I removed it, because `PolyBoRi` 0.8.1 was improved to be compatible wit c++98.)",
    "created_at": "2012-04-03T08:37:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176287",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:59'></a>
Replying to [leif](#comment%3A55):
> I also noticed that (e.g.) `-O3` in `C/CPP/CXXFLAGS` gets overridden by `-O2`, but the latter apparently originates from M4RI's `m4ri_config.h`, i.e. `__M4RI_CFLAGS`.
> 
> Is it intentional to use *all of them* in *all* compile commands?  (These are btw. also passed to `g++` when compiling C++ sources.)

Otherwise you might get inconsistencies.

> 


> 
> Furthermore, it's quite funny to use `g++ -std=c++98` while using `long long`; I get hundreds of warnings for that, since `-Wall` is also there, but not `-Wno-long-long`.  (`-Wall` comes from M4RI's `CFLAGS` as well.)

`long long` arises from M4RI, but M4RI assumes C99 which knows `long long`. But this is a known problem, I'll add `-Wno-long-long` back to the custom flags in the spkg. (I removed it, because `PolyBoRi` 0.8.1 was improved to be compatible wit c++98.)



---

archive/issue_comments_176288.json:
```json
{
    "body": "<a id='comment:60'></a>\nReplying to [leif](#comment%3A57):\n> Replying to [leif](#comment%3A54):\n> > `module_list.py` certainly needs work w.r.t. dependencies.\n> >  [...]\n> > That's because a couple of Sage library extension modules didn't get rebuilt, still referring to the old, deleted PolyBoRi shared library.\n\n> \n> Actually only the `pbori` module needs to get rebuilt; while `touch`ing `$SAGE_LOCAL/include/polybori.h` doesn't help, touching `$SAGE_LOCAL/include/polybori/*` does (afterwards running `./sage -b`).\n\nI'll add this to the spkg.\n\n> Also builds with GCC 4.7.0 (Sage 5.0.beta10, Ubuntu 10.04.4 x86_64).\n> \n> I noticed that different flags get passed to `gcc`/`g++` depending on GCC's version, or probably the settings of `CC` and `CXX`.  Seems rather a side-effect than intended behaviour...\n> \n> W.r.t. M4RI's flags:  It should be sufficient to only pass / add the contents of `__M4RI_SIMD_CFLAGS`, and probably only when compiling *some* of the modules.\n  \nThis is not related to the upgrade, so I'd prefer a new ticket on this.",
    "created_at": "2012-04-03T08:39:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176288",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:60'></a>
Replying to [leif](#comment%3A57):
> Replying to [leif](#comment%3A54):
> > `module_list.py` certainly needs work w.r.t. dependencies.
> >  [...]
> > That's because a couple of Sage library extension modules didn't get rebuilt, still referring to the old, deleted PolyBoRi shared library.

> 
> Actually only the `pbori` module needs to get rebuilt; while `touch`ing `$SAGE_LOCAL/include/polybori.h` doesn't help, touching `$SAGE_LOCAL/include/polybori/*` does (afterwards running `./sage -b`).

I'll add this to the spkg.

> Also builds with GCC 4.7.0 (Sage 5.0.beta10, Ubuntu 10.04.4 x86_64).
> 
> I noticed that different flags get passed to `gcc`/`g++` depending on GCC's version, or probably the settings of `CC` and `CXX`.  Seems rather a side-effect than intended behaviour...
> 
> W.r.t. M4RI's flags:  It should be sufficient to only pass / add the contents of `__M4RI_SIMD_CFLAGS`, and probably only when compiling *some* of the modules.
  
This is not related to the upgrade, so I'd prefer a new ticket on this.



---

archive/issue_comments_176289.json:
```json
{
    "body": "<a id='comment:61'></a>\nReplying to [leif](#comment%3A55):\n> Furthermore, it's quite funny to use `g++ -std=c++98` while using `long long`; I get hundreds of warnings for that, since `-Wall` is also there, but not `-Wno-long-long`.  (`-Wall` comes from M4RI's `CFLAGS` as well.)\n\nI double-checked that. Per default the spkg sets `-Wno-long-long`, It's probably overwritten by some C...FLAGS. Should I block `-Wno-long-long` such that it is never overwritten by the environment (like `-std=c++98`)?",
    "created_at": "2012-04-03T14:10:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176289",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:61'></a>
Replying to [leif](#comment%3A55):
> Furthermore, it's quite funny to use `g++ -std=c++98` while using `long long`; I get hundreds of warnings for that, since `-Wall` is also there, but not `-Wno-long-long`.  (`-Wall` comes from M4RI's `CFLAGS` as well.)

I double-checked that. Per default the spkg sets `-Wno-long-long`, It's probably overwritten by some C...FLAGS. Should I block `-Wno-long-long` such that it is never overwritten by the environment (like `-std=c++98`)?



---

archive/issue_comments_176290.json:
```json
{
    "body": "**Changing status** from needs_work to needs_info.",
    "created_at": "2012-04-03T14:17:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176290",
    "user": "https://github.com/alexanderdreyer"
}
```

**Changing status** from needs_work to needs_info.



---

archive/issue_comments_176291.json:
```json
{
    "body": "<a id='comment:62'></a>\nReplying to [leif](#comment%3A58):\nThis issue is now #12799.",
    "created_at": "2012-04-03T14:17:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176291",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:62'></a>
Replying to [leif](#comment%3A58):
This issue is now #12799.



---

archive/issue_comments_176292.json:
```json
{
    "body": "<a id='comment:63'></a>\nReplying to [AlexanderDreyer](#comment%3A60):\n> > Actually only the `pbori` module needs to get rebuilt; while `touch`ing `$SAGE_LOCAL/include/polybori.h` doesn't help, touching `$SAGE_LOCAL/include/polybori/*` does (afterwards running `./sage -b`).\n\n> I'll add this to the spkg.\nI think it's better to change `module_list.py` instead of the spkg.",
    "created_at": "2012-04-03T14:53:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176292",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:63'></a>
Replying to [AlexanderDreyer](#comment%3A60):
> > Actually only the `pbori` module needs to get rebuilt; while `touch`ing `$SAGE_LOCAL/include/polybori.h` doesn't help, touching `$SAGE_LOCAL/include/polybori/*` does (afterwards running `./sage -b`).

> I'll add this to the spkg.
I think it's better to change `module_list.py` instead of the spkg.



---

archive/issue_comments_176293.json:
```json
{
    "body": "**Changing dependencies** from \"#12656, #12750\" to \"#12656, #12750, #12799\".",
    "created_at": "2012-04-03T19:08:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176293",
    "user": "https://github.com/alexanderdreyer"
}
```

**Changing dependencies** from "#12656, #12750" to "#12656, #12750, #12799".



---

archive/issue_comments_176294.json:
```json
{
    "body": "**Changing work_issues** from \"Fix dependencies in `module_list.py` and/or touch some headers from `spkg-install`.\" to \"\".",
    "created_at": "2012-04-03T19:08:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176294",
    "user": "https://github.com/alexanderdreyer"
}
```

**Changing work_issues** from "Fix dependencies in `module_list.py` and/or touch some headers from `spkg-install`." to "".



---

archive/issue_comments_176295.json:
```json
{
    "body": "<a id='comment:64'></a>\nReplying to [jdemeyer](#comment%3A63):\n> I think it's better to change `module_list.py` instead of the spkg.\n\nThis part is now #12799, so I add this as dependency and remove the work issue.\n\nI also updated the spkg to use `-Wno-long-long` for C++ here: http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.1.p1.spkg",
    "created_at": "2012-04-03T19:08:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176295",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:64'></a>
Replying to [jdemeyer](#comment%3A63):
> I think it's better to change `module_list.py` instead of the spkg.

This part is now #12799, so I add this as dependency and remove the work issue.

I also updated the spkg to use `-Wno-long-long` for C++ here: http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.1.p1.spkg



---

archive/issue_comments_176296.json:
```json
{
    "body": "**Changing status** from needs_info to needs_review.",
    "created_at": "2012-04-03T19:08:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176296",
    "user": "https://github.com/alexanderdreyer"
}
```

**Changing status** from needs_info to needs_review.



---

archive/issue_comments_176297.json:
```json
{
    "body": "<a id='comment:65'></a>\nReplying to [leif](#comment%3A57): \n> W.r.t. M4RI's flags:  It should be sufficient to only pass / add the contents of `__M4RI_SIMD_CFLAGS`, and probably only when compiling *some* of the modules.\n  \n@malb What do you think: Would this be enough?",
    "created_at": "2012-04-03T19:26:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176297",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:65'></a>
Replying to [leif](#comment%3A57): 
> W.r.t. M4RI's flags:  It should be sufficient to only pass / add the contents of `__M4RI_SIMD_CFLAGS`, and probably only when compiling *some* of the modules.
  
@malb What do you think: Would this be enough?



---

archive/issue_comments_176298.json:
```json
{
    "body": "<a id='comment:66'></a>\nReplying to [jdemeyer](#comment%3A63):\n> Replying to [AlexanderDreyer](#comment%3A60):\n> > > Actually only the `pbori` module needs to get rebuilt; while `touch`ing `$SAGE_LOCAL/include/polybori.h` doesn't help, touching `$SAGE_LOCAL/include/polybori/*` does (afterwards running `./sage -b`).\n\n> > I'll add this to the spkg.\n> I think it's better to change `module_list.py` instead of the spkg.\n\n\nIIRC the problem isn't only *which* files the `pbori` module depends on, but also that the headers have their original file date from upstream, i.e., aren't generated during build nor (currently) `touch`ed from `spkg-install`, such that they'll usually be older than a present `pbori` module.\n\nIf one doesn't want to change the timestamps, one could make the `pbori` module just (or also) depend on the `.so` (without a version suffix), since the (target of the) latter will always have a fresh modification time.",
    "created_at": "2012-04-03T20:13:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176298",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:66'></a>
Replying to [jdemeyer](#comment%3A63):
> Replying to [AlexanderDreyer](#comment%3A60):
> > > Actually only the `pbori` module needs to get rebuilt; while `touch`ing `$SAGE_LOCAL/include/polybori.h` doesn't help, touching `$SAGE_LOCAL/include/polybori/*` does (afterwards running `./sage -b`).

> > I'll add this to the spkg.
> I think it's better to change `module_list.py` instead of the spkg.


IIRC the problem isn't only *which* files the `pbori` module depends on, but also that the headers have their original file date from upstream, i.e., aren't generated during build nor (currently) `touch`ed from `spkg-install`, such that they'll usually be older than a present `pbori` module.

If one doesn't want to change the timestamps, one could make the `pbori` module just (or also) depend on the `.so` (without a version suffix), since the (target of the) latter will always have a fresh modification time.



---

archive/issue_comments_176299.json:
```json
{
    "body": "<a id='comment:67'></a>\nReplying to [leif](#comment%3A66):\n> If one doesn't want to change the timestamps, one could make the `pbori` module just (or also) depend on the `.so` (without a version suffix), since the (target of the) latter will always have a fresh modification time.\n\nThe libraries are already listed as `libraries=['polybori', 'polybori_groebner', 'gd', 'png12', 'm4ri']`. Aren't they considered as dependencies anyway?\n\nBut the timestamp of `include/polybori/config.h` varies, so #12799 fixes the problem.",
    "created_at": "2012-04-03T20:29:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176299",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:67'></a>
Replying to [leif](#comment%3A66):
> If one doesn't want to change the timestamps, one could make the `pbori` module just (or also) depend on the `.so` (without a version suffix), since the (target of the) latter will always have a fresh modification time.

The libraries are already listed as `libraries=['polybori', 'polybori_groebner', 'gd', 'png12', 'm4ri']`. Aren't they considered as dependencies anyway?

But the timestamp of `include/polybori/config.h` varies, so #12799 fixes the problem.



---

archive/issue_comments_176300.json:
```json
{
    "body": "<a id='comment:68'></a>\nReplying to [AlexanderDreyer](#comment%3A67):\n> Replying to [leif](#comment%3A66):\n> > If one doesn't want to change the timestamps, one could make the `pbori` module just (or also) depend on the `.so` (without a version suffix), since the (target of the) latter will always have a fresh modification time.\n\n> The libraries are already listed as `libraries=['polybori', 'polybori_groebner', 'gd', 'png12', 'm4ri']`. Aren't they considered as dependencies anyway?\n\nOf course the libraries are listed, since they need to get linked to the module, but Cython doesn't automatically consider *their* timestamps for dependency checking, i.e., which modules need to get rebuilt.\n\n\n\n\n> But the timestamp of `include/polybori/config.h` varies, so #12799 fixes the problem.\n\n\nThen I'd add just that there.",
    "created_at": "2012-04-03T20:55:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176300",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:68'></a>
Replying to [AlexanderDreyer](#comment%3A67):
> Replying to [leif](#comment%3A66):
> > If one doesn't want to change the timestamps, one could make the `pbori` module just (or also) depend on the `.so` (without a version suffix), since the (target of the) latter will always have a fresh modification time.

> The libraries are already listed as `libraries=['polybori', 'polybori_groebner', 'gd', 'png12', 'm4ri']`. Aren't they considered as dependencies anyway?

Of course the libraries are listed, since they need to get linked to the module, but Cython doesn't automatically consider *their* timestamps for dependency checking, i.e., which modules need to get rebuilt.




> But the timestamp of `include/polybori/config.h` varies, so #12799 fixes the problem.


Then I'd add just that there.



---

archive/issue_comments_176301.json:
```json
{
    "body": "<a id='comment:69'></a>\nReplying to [leif](#comment%3A68):\n> Then I'd add just that there.\nDone. Is this ticket positively reviewed again?",
    "created_at": "2012-04-03T21:20:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176301",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:69'></a>
Replying to [leif](#comment%3A68):
> Then I'd add just that there.
Done. Is this ticket positively reviewed again?



---

archive/issue_comments_176302.json:
```json
{
    "body": "<a id='comment:70'></a>\nReplying to [AlexanderDreyer](#comment%3A69):\n> Replying to [leif](#comment%3A68):\n> > Then I'd add just that there.\n\n> Done. Is this ticket positively reviewed again?\n\nCan't tell.  Jeroen last set it from **needs_review** to needs_work, and the issues he mentioned seem to be fixed, as well as mine regarding the dependencies (now at #12799, which this ticket depends on).\n\nIf the rest of the spkg already had positive review, you could probably revert it to that, but the other reviewers can probably tell better.",
    "created_at": "2012-04-03T21:33:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176302",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:70'></a>
Replying to [AlexanderDreyer](#comment%3A69):
> Replying to [leif](#comment%3A68):
> > Then I'd add just that there.

> Done. Is this ticket positively reviewed again?

Can't tell.  Jeroen last set it from **needs_review** to needs_work, and the issues he mentioned seem to be fixed, as well as mine regarding the dependencies (now at #12799, which this ticket depends on).

If the rest of the spkg already had positive review, you could probably revert it to that, but the other reviewers can probably tell better.



---

archive/issue_comments_176303.json:
```json
{
    "body": "<a id='comment:71'></a>\nReplying to [jdemeyer](#comment%3A51):\n> I think SPKG.txt needs some work:\n> 1. The Changelog messages don't tell much.  If you add a patch, you should mention that fact in the Changelog.  You should add a ticket number in the Changelog messages.\n> 2. The patches should be documented.\n\nAlso done (see above). @jdemeyer Back to positive?",
    "created_at": "2012-04-03T21:55:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176303",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:71'></a>
Replying to [jdemeyer](#comment%3A51):
> I think SPKG.txt needs some work:
> 1. The Changelog messages don't tell much.  If you add a patch, you should mention that fact in the Changelog.  You should add a ticket number in the Changelog messages.
> 2. The patches should be documented.

Also done (see above). @jdemeyer Back to positive?



---

archive/issue_comments_176304.json:
```json
{
    "body": "<a id='comment:72'></a>\nReplying to [leif](#comment%3A70):\n> Replying to [AlexanderDreyer](#comment%3A69):\n> > Is this ticket positively reviewed again?\n\n> \n> [...] the issues he mentioned seem to be fixed, as well as mine regarding the dependencies (now at #12799, which this ticket depends on).\n\n\n... which now has positive review.",
    "created_at": "2012-04-03T22:49:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176304",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:72'></a>
Replying to [leif](#comment%3A70):
> Replying to [AlexanderDreyer](#comment%3A69):
> > Is this ticket positively reviewed again?

> 
> [...] the issues he mentioned seem to be fixed, as well as mine regarding the dependencies (now at #12799, which this ticket depends on).


... which now has positive review.



---

archive/issue_comments_176305.json:
```json
{
    "body": "<a id='comment:73'></a>\nPositive review then... provided it survives testing.",
    "created_at": "2012-04-04T13:19:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176305",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:73'></a>
Positive review then... provided it survives testing.



---

archive/issue_comments_176306.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2012-04-04T13:19:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176306",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_events_039722.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-04-08T00:37:29Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12655#event-39722"
}
```



---

archive/issue_comments_176307.json:
```json
{
    "body": "**Merged:** sage-5.0.beta13",
    "created_at": "2012-04-08T00:37:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12655#issuecomment-176307",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.0.beta13
