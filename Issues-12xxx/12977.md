# Issue 12977: Let singular_function expect "attributes" not as a dict

archive/issues_012805.json:
```json
{
    "assignees": [],
    "body": "Here is how attributes are passed to libsingular when calling a singular function:\n\n```\nsage: from sage.libs.singular import singular_function\nsage: P.<x,y>=QQ[]\nsage: J = P*[P.random_element() for _ in range(100)]\nsage: NF = singular_function('reduce')\nsage: _ = NF(J.groebner_basis(),J,attributes={J:{'isSB':1}})\n```\n\nHence, a dictionary is expected, where the keys are arguments to the function. Now, that's bad: The hash of ideals is broken and is slow (see #12976).\n\nMoreover, the attribute is supposed to be applied to a particular object, but *not* to an object that is only *equal* (but not identical).\n\n**__Suggestion__**\n\nMake it so that\n\n```\nsage: _ = NF(J.groebner_basis(),J,attributes=(None,{'isSB':1}))\n```\nworks: attributes is a tuple or list of things that are to be interpreted as attribute of the different arguments of the singular function, in the given order.\n\nApply\n\n* [attachment: trac12977_singular_function_attributes.patch](https://github.com/sagemath/sage/files/ticket12977/trac12977_singular_function_attributes.patch.gz)\n\nAssignee: **@malb**\n\nCC:  @malb @sagetrac-PolyBoRi @burcin\n\nKeywords: **sd40.5**\n\nReviewer: **Mike Hansen**\n\nAuthor: **Simon King**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/12977_\n\n",
    "created_at": "2012-05-19T13:31:17Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20commutative%20algebra",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/needs%20work"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Let singular_function expect \"attributes\" not as a dict",
    "type": "issue",
    "updated_at": "2023-01-14T14:25:07Z",
    "url": "https://github.com/sagemath/sage/issues/12977",
    "user": "https://github.com/simon-king-jena"
}
```
Here is how attributes are passed to libsingular when calling a singular function:

```
sage: from sage.libs.singular import singular_function
sage: P.<x,y>=QQ[]
sage: J = P*[P.random_element() for _ in range(100)]
sage: NF = singular_function('reduce')
sage: _ = NF(J.groebner_basis(),J,attributes={J:{'isSB':1}})
```

Hence, a dictionary is expected, where the keys are arguments to the function. Now, that's bad: The hash of ideals is broken and is slow (see #12976).

Moreover, the attribute is supposed to be applied to a particular object, but *not* to an object that is only *equal* (but not identical).

**__Suggestion__**

Make it so that

```
sage: _ = NF(J.groebner_basis(),J,attributes=(None,{'isSB':1}))
```
works: attributes is a tuple or list of things that are to be interpreted as attribute of the different arguments of the singular function, in the given order.

Apply

* [attachment: trac12977_singular_function_attributes.patch](https://github.com/sagemath/sage/files/ticket12977/trac12977_singular_function_attributes.patch.gz)

Assignee: **@malb**

CC:  @malb @sagetrac-PolyBoRi @burcin

Keywords: **sd40.5**

Reviewer: **Mike Hansen**

Author: **Simon King**

_Issue created by migration from https://trac.sagemath.org/ticket/12977_





---

archive/issue_events_164494.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2012-05-19T13:31:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12977#event-164494"
}
```



---

archive/issue_events_164495.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2012-05-19T13:31:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20commutative%20algebra",
    "label_color": "0000ff",
    "label_name": "component: commutative algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12977#event-164495"
}
```



---

archive/issue_events_164496.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2012-05-19T13:31:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12977#event-164496"
}
```



---

archive/issue_events_164497.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2012-05-19T13:31:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12977#event-164497"
}
```



---

archive/issue_comments_149721.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nI think the suggestion in the new ticket description is better than the old one.",
    "created_at": "2012-05-19T13:36:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12977#issuecomment-149721",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:1" align="right">Comment 1</div>

I think the suggestion in the new ticket description is better than the old one.



---

archive/issue_comments_149722.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -17,6 +17,6 @@\n Make it so that\n \n ```\n-sage: _ = NF(J.groebner_basis(),J,attributes=((J,{'isSB':1}),))\n+sage: _ = NF(J.groebner_basis(),J,attributes=({'isSB':1},))\n ```\n-works, where inside `NF.__call__` the items in the attributes tuple/list are compared by identity.\n+works: attributes is a tuple or list of things that are to be interpreted as attribute of the different arguments of the singular function, in the given order.\n``````\n",
    "created_at": "2012-05-19T13:36:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12977#issuecomment-149722",
    "user": "https://github.com/simon-king-jena"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -17,6 +17,6 @@
 Make it so that
 
 ```
-sage: _ = NF(J.groebner_basis(),J,attributes=((J,{'isSB':1}),))
+sage: _ = NF(J.groebner_basis(),J,attributes=({'isSB':1},))
 ```
-works, where inside `NF.__call__` the items in the attributes tuple/list are compared by identity.
+works: attributes is a tuple or list of things that are to be interpreted as attribute of the different arguments of the singular function, in the given order.
``````




---

archive/issue_comments_149723.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -17,6 +17,6 @@\n Make it so that\n \n ```\n-sage: _ = NF(J.groebner_basis(),J,attributes=({'isSB':1},))\n+sage: _ = NF(J.groebner_basis(),J,attributes=(None,{'isSB':1}))\n ```\n works: attributes is a tuple or list of things that are to be interpreted as attribute of the different arguments of the singular function, in the given order.\n``````\n",
    "created_at": "2012-05-19T13:45:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12977#issuecomment-149723",
    "user": "https://github.com/simon-king-jena"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -17,6 +17,6 @@
 Make it so that
 
 ```
-sage: _ = NF(J.groebner_basis(),J,attributes=({'isSB':1},))
+sage: _ = NF(J.groebner_basis(),J,attributes=(None,{'isSB':1}))
 ```
 works: attributes is a tuple or list of things that are to be interpreted as attribute of the different arguments of the singular function, in the given order.
``````




---

archive/issue_comments_149724.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nAlternative idea of Burcin:\n\n```\nsage: _ = NF(J.groebner_basis(),set_singular_attribute(J,isSB=1))\n```\n`set_singular_attribute` (or a shorter name) would create some auxiliary object that stores J and its attribute, so that the singular function can retrieve the necessary data from it.\n\nAlternative idea of Simon:\n\n```\nsage: _ = NF(J.groebner_basis(),J,attributes=((J,{'isSB':1})))\n```\nwhere the first part of the tuple items is compared by identity (not by equality, since that would involve GB computation.",
    "created_at": "2012-05-19T13:52:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12977#issuecomment-149724",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:4" align="right">Comment 4</div>

Alternative idea of Burcin:

```
sage: _ = NF(J.groebner_basis(),set_singular_attribute(J,isSB=1))
```
`set_singular_attribute` (or a shorter name) would create some auxiliary object that stores J and its attribute, so that the singular function can retrieve the necessary data from it.

Alternative idea of Simon:

```
sage: _ = NF(J.groebner_basis(),J,attributes=((J,{'isSB':1})))
```
where the first part of the tuple items is compared by identity (not by equality, since that would involve GB computation.



---

archive/issue_comments_149725.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nThe attached patch still supports the current way of providing the attributes to a singular_function, but also supports a new one that does not involve a GB computation but compares ideals by identity, and is thus faster. Example:\n\n```\nsage: P.<x,y> = QQ[]\nsage: J = P*[P.random_element(4,5)^2 for _ in range(4)]\nsage: J\nIdeal (x^4*y^4 + 2*x^2*y^5 + y^6 - 2/3*x^2*y^2 - 2/3*y^3 + 1/9, 9/16*y^6 - x^2*y^3 + 3/2*x*y^4 + 1/2*y^5 + 4/9*x^4 - 4/3*x^3*y + 5/9*x^2*y^2 + 2/3*x*y^3 + 1/9*y^4 + 12*y^3 - 32/3*x^2 + 16*x*y + 16/3*y^2 + 64, y^8 - 2/5*x^3*y^4 + 1/25*x^6 - 4/11*x*y^4 + 6*y^5 + 4/55*x^4 - 6/5*x^3*y + 10*y^4 - 2*x^3 + 4/121*x^2 - 12/11*x*y + 9*y^2 - 20/11*x + 30*y + 25, 1/400*x^4*y^4 - 1/5*x^5*y^2 - 1/20*x^4*y^3 + 4*x^6 + 2*x^5*y + 11/20*x^4*y^2 - 12*x^5 - 3*x^4*y + 9*x^4) of Multivariate Polynomial Ring in x, y over Rational Field\nsage: J2 = J.gens()*P\nsage: J.groebner_basis()\n[1]\n```\n\nSo, we consider here the trivial ideal. As it happens, the GB computation takes a noticeable time.\n\nLet us define a singular library function:\n\n```\nsage: isSB = {'isSB':1}\nsage: from sage.libs.singular import singular_function\nsage: NF = singular_function('reduce')\n```\n\nOld syntax:\n\n```\nsage: sage: %timeit q = NF(J,J, attributes={J:isSB})\n625 loops, best of 3: 1.42 ms per loop\nsage: %timeit q = NF(J2,J, attributes={J:isSB})\n125 loops, best of 3: 5.62 ms per loop\nsage: %timeit q = NF(J2,J2, attributes={J2:isSB})\n25 loops, best of 3: 14 ms per loop\n```\nAs you observe, the timings differ widely when one takes copies of the same ideal. I thought the reason is that the Gr\u00f6bner basis of J has been computed, but that of J2 has not. Thus, comparing J2 with another ideal involves computing the Gr\u00f6bner basis *of a copy of J2*. But I could be mistaken, see below.\n\nHere is the same with the new syntax:\n\n```\nsage: %timeit q = NF(J,J, attributes=((J,isSB),))\n625 loops, best of 3: 279 \u00b5s per loop\nsage: %timeit q = NF(J2,J, attributes=((J,isSB),))\n625 loops, best of 3: 654 \u00b5s per loop\nsage: %timeit q = NF(J2,J2, attributes=((J2,isSB),))\n125 loops, best of 3: 1.69 ms per loop\n```\n\nI am actually surprised that the timings differ. Anyway, the timings in the new syntax are a lot faster than with the old syntax.\n\nAnd here is why I think that my statement on computation of Gr\u00f6bner bases in the old syntax may be wrong. Namely, the timings for comparison are a long way slower:\n\n```\nsage: J2 = J.gens()*P\nsage: %timeit J==J2\n5 loops, best of 3: 645 ms per loop\nsage: J2.groebner_basis.is_in_cache()\nFalse\n```\nHence, even though J and J2 belong to the same ring, a Gr\u00f6bner basis of a copy of J2 is computed, which is thus not cached. That should be changed on a different ticket.\n\n__Conclusion__\n\nThe problem was different than I originally thought, but the new (optional) syntax provided by my patch makes things faster. Needs review, although I should change the text in the documentation (because apparently Gr\u00f6bner bases aren't involved).",
    "created_at": "2012-05-21T07:58:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12977#issuecomment-149725",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:5" align="right">Comment 5</div>

The attached patch still supports the current way of providing the attributes to a singular_function, but also supports a new one that does not involve a GB computation but compares ideals by identity, and is thus faster. Example:

```
sage: P.<x,y> = QQ[]
sage: J = P*[P.random_element(4,5)^2 for _ in range(4)]
sage: J
Ideal (x^4*y^4 + 2*x^2*y^5 + y^6 - 2/3*x^2*y^2 - 2/3*y^3 + 1/9, 9/16*y^6 - x^2*y^3 + 3/2*x*y^4 + 1/2*y^5 + 4/9*x^4 - 4/3*x^3*y + 5/9*x^2*y^2 + 2/3*x*y^3 + 1/9*y^4 + 12*y^3 - 32/3*x^2 + 16*x*y + 16/3*y^2 + 64, y^8 - 2/5*x^3*y^4 + 1/25*x^6 - 4/11*x*y^4 + 6*y^5 + 4/55*x^4 - 6/5*x^3*y + 10*y^4 - 2*x^3 + 4/121*x^2 - 12/11*x*y + 9*y^2 - 20/11*x + 30*y + 25, 1/400*x^4*y^4 - 1/5*x^5*y^2 - 1/20*x^4*y^3 + 4*x^6 + 2*x^5*y + 11/20*x^4*y^2 - 12*x^5 - 3*x^4*y + 9*x^4) of Multivariate Polynomial Ring in x, y over Rational Field
sage: J2 = J.gens()*P
sage: J.groebner_basis()
[1]
```

So, we consider here the trivial ideal. As it happens, the GB computation takes a noticeable time.

Let us define a singular library function:

```
sage: isSB = {'isSB':1}
sage: from sage.libs.singular import singular_function
sage: NF = singular_function('reduce')
```

Old syntax:

```
sage: sage: %timeit q = NF(J,J, attributes={J:isSB})
625 loops, best of 3: 1.42 ms per loop
sage: %timeit q = NF(J2,J, attributes={J:isSB})
125 loops, best of 3: 5.62 ms per loop
sage: %timeit q = NF(J2,J2, attributes={J2:isSB})
25 loops, best of 3: 14 ms per loop
```
As you observe, the timings differ widely when one takes copies of the same ideal. I thought the reason is that the Gröbner basis of J has been computed, but that of J2 has not. Thus, comparing J2 with another ideal involves computing the Gröbner basis *of a copy of J2*. But I could be mistaken, see below.

Here is the same with the new syntax:

```
sage: %timeit q = NF(J,J, attributes=((J,isSB),))
625 loops, best of 3: 279 µs per loop
sage: %timeit q = NF(J2,J, attributes=((J,isSB),))
625 loops, best of 3: 654 µs per loop
sage: %timeit q = NF(J2,J2, attributes=((J2,isSB),))
125 loops, best of 3: 1.69 ms per loop
```

I am actually surprised that the timings differ. Anyway, the timings in the new syntax are a lot faster than with the old syntax.

And here is why I think that my statement on computation of Gröbner bases in the old syntax may be wrong. Namely, the timings for comparison are a long way slower:

```
sage: J2 = J.gens()*P
sage: %timeit J==J2
5 loops, best of 3: 645 ms per loop
sage: J2.groebner_basis.is_in_cache()
False
```
Hence, even though J and J2 belong to the same ring, a Gröbner basis of a copy of J2 is computed, which is thus not cached. That should be changed on a different ticket.

__Conclusion__

The problem was different than I originally thought, but the new (optional) syntax provided by my patch makes things faster. Needs review, although I should change the text in the documentation (because apparently Gröbner bases aren't involved).



---

archive/issue_events_164498.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2012-05-21T07:58:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12977#event-164498"
}
```



---

archive/issue_comments_149726.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nThe problem of avoiding needless GB computations in comparison of ideals is now #12987.",
    "created_at": "2012-05-21T08:10:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12977#issuecomment-149726",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:6" align="right">Comment 6</div>

The problem of avoiding needless GB computations in comparison of ideals is now #12987.



---

archive/issue_comments_149727.json:
```json
{
    "body": "Author: **Simon King**",
    "created_at": "2012-05-28T23:36:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12977#issuecomment-149727",
    "user": "https://github.com/mwhansen"
}
```

Author: **Simon King**



---

archive/issue_comments_149728.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -20,3 +20,8 @@\n sage: _ = NF(J.groebner_basis(),J,attributes=(None,{'isSB':1}))\n ```\n works: attributes is a tuple or list of things that are to be interpreted as attribute of the different arguments of the singular function, in the given order.\n+\n+Apply\n+\n+* [attachment: trac12977_singular_function_attributes.patch](https://github.com/sagemath/sage/files/ticket12977/trac12977_singular_function_attributes.patch.gz)\n+* [attachment: trac_12977-fix_doctest.patch](https://github.com/sagemath/sage/files/ticket12977/trac_12977-fix_doctest.patch.gz)\n``````\n",
    "created_at": "2012-05-28T23:36:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12977#issuecomment-149728",
    "user": "https://github.com/mwhansen"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -20,3 +20,8 @@
 sage: _ = NF(J.groebner_basis(),J,attributes=(None,{'isSB':1}))
 ```
 works: attributes is a tuple or list of things that are to be interpreted as attribute of the different arguments of the singular function, in the given order.
+
+Apply
+
+* [attachment: trac12977_singular_function_attributes.patch](https://github.com/sagemath/sage/files/ticket12977/trac12977_singular_function_attributes.patch.gz)
+* [attachment: trac_12977-fix_doctest.patch](https://github.com/sagemath/sage/files/ticket12977/trac_12977-fix_doctest.patch.gz)
``````




---

archive/issue_comments_149729.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nAttachment: **[trac_12977-fix_doctest.patch.gz](https://github.com/sagemath/sage/files/ticket12977/trac_12977-fix_doctest.patch.gz)**\n\nSimon, your patch looks good, but I had to make a change to the doctest to get it to pass.  Are you okay with this change?  If so, you can mark this as positive review.\n\nFor the patchbot:\n\nApply trac12977_singular_function_attributes.patch and trac_12977-fix_doctest.patch",
    "created_at": "2012-05-28T23:36:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12977#issuecomment-149729",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:7" align="right">Comment 7</div>

Attachment: **[trac_12977-fix_doctest.patch.gz](https://github.com/sagemath/sage/files/ticket12977/trac_12977-fix_doctest.patch.gz)**

Simon, your patch looks good, but I had to make a change to the doctest to get it to pass.  Are you okay with this change?  If so, you can mark this as positive review.

For the patchbot:

Apply trac12977_singular_function_attributes.patch and trac_12977-fix_doctest.patch



---

archive/issue_comments_149730.json:
```json
{
    "body": "Reviewer: **Mike Hansen**",
    "created_at": "2012-05-28T23:36:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12977#issuecomment-149730",
    "user": "https://github.com/mwhansen"
}
```

Reviewer: **Mike Hansen**



---

archive/issue_comments_149731.json:
```json
{
    "body": "Changed keywords from none to **sd40.5**",
    "created_at": "2012-05-28T23:36:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12977#issuecomment-149731",
    "user": "https://github.com/mwhansen"
}
```

Changed keywords from none to **sd40.5**



---

archive/issue_events_164499.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2012-05-29T05:15:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12977#event-164499"
}
```



---

archive/issue_events_164500.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2012-05-29T05:15:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12977#event-164500"
}
```



---

archive/issue_comments_149732.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\na_attrib will be defined after any non-empty loop even if it doesn't break with a match\n\nI think that this interface is rather subtle, I'd rather have a compare_using_identiy=[True|False] keyword in the function (which will iterate over the dictionary rather than indexing into it). On that note, is indexing ever safe (do equal ideals always hash the same?)",
    "created_at": "2012-05-29T05:15:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12977#issuecomment-149732",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:9" align="right">Comment 9</div>

a_attrib will be defined after any non-empty loop even if it doesn't break with a match

I think that this interface is rather subtle, I'd rather have a compare_using_identiy=[True|False] keyword in the function (which will iterate over the dictionary rather than indexing into it). On that note, is indexing ever safe (do equal ideals always hash the same?)



---

archive/issue_comments_149733.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nReplying to [@robertwb](#comment%3A9):\n> a_attrib will be defined after any non-empty loop even if it doesn't break with a match\n\nI don't understand that comment. a_attrib is used only in the few lines that I changed. And what loop are you talking about? The outer loop `for a in args:` (line 559)? But a_attrib is set to None at each round of the outer loop: See the new line 630. \n\n> I think that this interface is rather subtle, I'd rather have a compare_using_identiy=[True|False] keyword in the function (which will iterate over the dictionary rather than indexing into it).\n\nOne could argue that by using the dictionary (i.e., the old syntax) you declare that you want comparison by equality rather than identity. And also note that in Singular you assign an attribute to an individual ideal; hence, I find it wrong that in Sage we assign the attributes to an equivalence class of ideal.\n\n> On that note, is indexing ever safe (do equal ideals always hash the same?)\n\nNo, as mentioned in the ticket description, the hash is totally broken (#12976). Two polynomial ideals are equal if they have the same reduced Gr\u00f6bner basis (computed in degrevlex order, if the GB for the \"real\" order ist not in the cache), but the hash relies on the given generators. That's why I support the old syntax only for backwards compatibility.",
    "created_at": "2012-05-29T05:31:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12977#issuecomment-149733",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:10" align="right">Comment 10</div>

Replying to [@robertwb](#comment%3A9):
> a_attrib will be defined after any non-empty loop even if it doesn't break with a match

I don't understand that comment. a_attrib is used only in the few lines that I changed. And what loop are you talking about? The outer loop `for a in args:` (line 559)? But a_attrib is set to None at each round of the outer loop: See the new line 630. 

> I think that this interface is rather subtle, I'd rather have a compare_using_identiy=[True|False] keyword in the function (which will iterate over the dictionary rather than indexing into it).

One could argue that by using the dictionary (i.e., the old syntax) you declare that you want comparison by equality rather than identity. And also note that in Singular you assign an attribute to an individual ideal; hence, I find it wrong that in Sage we assign the attributes to an equivalence class of ideal.

> On that note, is indexing ever safe (do equal ideals always hash the same?)

No, as mentioned in the ticket description, the hash is totally broken (#12976). Two polynomial ideals are equal if they have the same reduced Gröbner basis (computed in degrevlex order, if the GB for the "real" order ist not in the cache), but the hash relies on the given generators. That's why I support the old syntax only for backwards compatibility.



---

archive/issue_events_164501.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2012-05-29T19:36:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12977#event-164501"
}
```



---

archive/issue_events_164502.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2012-05-29T19:36:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12977#event-164502"
}
```



---

archive/issue_comments_149734.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nI am changing back to \"needs review\", as I think a_attrib is correctly used in the code, and I think I have addressed the other questions of Robert as well.",
    "created_at": "2012-05-29T19:36:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12977#issuecomment-149734",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:11" align="right">Comment 11</div>

I am changing back to "needs review", as I think a_attrib is correctly used in the code, and I think I have addressed the other questions of Robert as well.



---

archive/issue_comments_149735.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nReplying to [@simon-king-jena](#comment%3A10):\n> Replying to [@robertwb](#comment%3A9):\n> > a_attrib will be defined after any non-empty loop even if it doesn't break with a match\n\n> \n> I don't understand that comment. a_attrib is used only in the few lines that I changed. And what loop are you talking about? The outer loop `for a in args:` (line 559)? But a_attrib is set to None at each round of the outer loop: See the new line 630. \n\n```\n \t634\t                    for a_,a_attrib in attributes: \n \t635\t                        if a_ is a: \n \t636\t                            break \n```\n\nIf the `a_ is a` clause is never executed, the loop will run to completion and `a_attrib` will have the value `attributes[-1][1]` unless attributes happens to be empty.\n\n> > I think that this interface is rather subtle, I'd rather have a compare_using_identiy=[True|False] keyword in the function (which will iterate over the dictionary rather than indexing into it).\n\n> \n> One could argue that by using the dictionary (i.e., the old syntax) you declare that you want comparison by equality rather than identity. \n\nBut this is equivalently subtle, I'd never guess that in seeing the two versions. In any case it's certainly not \n\n```\nsage: import this\nThe Zen of Python, by Tim Peters\n...\nExplicit is better than implicit.\n```\n\nAre you against having an explicit flag? \n\n> And also note that in Singular you assign an attribute to an individual ideal; hence, I find it wrong that in Sage we assign the attributes to an equivalence class of ideal.\n\nI'm with you here, but that's orthogonal.",
    "created_at": "2012-05-29T21:24:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12977#issuecomment-149735",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:12" align="right">Comment 12</div>

Replying to [@simon-king-jena](#comment%3A10):
> Replying to [@robertwb](#comment%3A9):
> > a_attrib will be defined after any non-empty loop even if it doesn't break with a match

> 
> I don't understand that comment. a_attrib is used only in the few lines that I changed. And what loop are you talking about? The outer loop `for a in args:` (line 559)? But a_attrib is set to None at each round of the outer loop: See the new line 630. 

```
 	634	                    for a_,a_attrib in attributes: 
 	635	                        if a_ is a: 
 	636	                            break 
```

If the `a_ is a` clause is never executed, the loop will run to completion and `a_attrib` will have the value `attributes[-1][1]` unless attributes happens to be empty.

> > I think that this interface is rather subtle, I'd rather have a compare_using_identiy=[True|False] keyword in the function (which will iterate over the dictionary rather than indexing into it).

> 
> One could argue that by using the dictionary (i.e., the old syntax) you declare that you want comparison by equality rather than identity. 

But this is equivalently subtle, I'd never guess that in seeing the two versions. In any case it's certainly not 

```
sage: import this
The Zen of Python, by Tim Peters
...
Explicit is better than implicit.
```

Are you against having an explicit flag? 

> And also note that in Singular you assign an attribute to an individual ideal; hence, I find it wrong that in Sage we assign the attributes to an equivalence class of ideal.

I'm with you here, but that's orthogonal.



---

archive/issue_comments_149736.json:
```json
{
    "body": "Work Issues: **Do not set a_attrib accidentally. Provide a flag for \"comparison by equality\"**",
    "created_at": "2012-05-29T21:35:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12977#issuecomment-149736",
    "user": "https://github.com/simon-king-jena"
}
```

Work Issues: **Do not set a_attrib accidentally. Provide a flag for "comparison by equality"**



---

archive/issue_events_164503.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2012-05-29T21:35:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12977#event-164503"
}
```



---

archive/issue_events_164504.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2012-05-29T21:35:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12977#event-164504"
}
```



---

archive/issue_comments_149737.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nReplying to [@robertwb](#comment%3A12):\n> \n> ```\n>  \t634\t                    for a_,a_attrib in attributes: \n>  \t635\t                        if a_ is a: \n>  \t636\t                            break \n> ```\n> \n> If the `a_ is a` clause is never executed, the loop will run to completion and `a_attrib` will have the value `attributes[-1][1]` unless attributes happens to be empty.\n\nI see. Right, that has to be fixed.\n\n> Are you against having an explicit flag? \n\nI think the default should be \"comparison by identity\", because I am sure that this is how the attributes argument is intended to be used.\n\nI also think that (for backwards compatibility) one should still support the old syntax, for which \"comparison by Gr\u00f6bner basis computation and broken hash\" is implicit.\n\nAnd I think that there is no harm in providing an explicit flag if one wants the new syntax with a \"comparison by Gr\u00f6bner bass computation but without broken hash involved since there is a list and not a dictionary of ideal-attribute pairs\".",
    "created_at": "2012-05-29T21:35:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12977#issuecomment-149737",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:13" align="right">Comment 13</div>

Replying to [@robertwb](#comment%3A12):
> 
> ```
>  	634	                    for a_,a_attrib in attributes: 
>  	635	                        if a_ is a: 
>  	636	                            break 
> ```
> 
> If the `a_ is a` clause is never executed, the loop will run to completion and `a_attrib` will have the value `attributes[-1][1]` unless attributes happens to be empty.

I see. Right, that has to be fixed.

> Are you against having an explicit flag? 

I think the default should be "comparison by identity", because I am sure that this is how the attributes argument is intended to be used.

I also think that (for backwards compatibility) one should still support the old syntax, for which "comparison by Gröbner basis computation and broken hash" is implicit.

And I think that there is no harm in providing an explicit flag if one wants the new syntax with a "comparison by Gröbner bass computation but without broken hash involved since there is a list and not a dictionary of ideal-attribute pairs".



---

archive/issue_comments_149738.json:
```json
{
    "body": "An alternative way of passing attributes to singular_function that won't involve GB computations",
    "created_at": "2013-05-22T15:15:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12977#issuecomment-149738",
    "user": "https://github.com/simon-king-jena"
}
```

An alternative way of passing attributes to singular_function that won't involve GB computations



---

archive/issue_comments_149739.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nAttachment: **[trac12977_singular_function_attributes.patch.gz](https://github.com/sagemath/sage/files/ticket12977/trac12977_singular_function_attributes.patch.gz)**\n\nSorry for not finishing it earlier.\n\nI hope I did address the two complaints successfully. In particular, a_attrib will now only be non-none, if it actually applies to one of the arguments. And I provide an optional argument by which one can choose whether one wants comparison by identity or by equality.\n\nIf the attributes are passed as a dict, then there is no change w.r.t old behaviour: The broken hash will be used, and comparison by equality. In particular, this will not break things that were not broken before.\n\nIf the attributes are passed as a tuple or list, then the default is a comparison by identity---I can not imagine a use case in which one would like to compare by equality. But if one really wants equality, one can set an optional parameter accordingly.\n\nFurther changes: I tried to make the new syntax more visible in the docs. The second patch is not needed. Hence:\n\nApply trac12977_singular_function_attributes.patch",
    "created_at": "2013-05-22T15:16:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12977#issuecomment-149739",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:14" align="right">Comment 14</div>

Attachment: **[trac12977_singular_function_attributes.patch.gz](https://github.com/sagemath/sage/files/ticket12977/trac12977_singular_function_attributes.patch.gz)**

Sorry for not finishing it earlier.

I hope I did address the two complaints successfully. In particular, a_attrib will now only be non-none, if it actually applies to one of the arguments. And I provide an optional argument by which one can choose whether one wants comparison by identity or by equality.

If the attributes are passed as a dict, then there is no change w.r.t old behaviour: The broken hash will be used, and comparison by equality. In particular, this will not break things that were not broken before.

If the attributes are passed as a tuple or list, then the default is a comparison by identity---I can not imagine a use case in which one would like to compare by equality. But if one really wants equality, one can set an optional parameter accordingly.

Further changes: I tried to make the new syntax more visible in the docs. The second patch is not needed. Hence:

Apply trac12977_singular_function_attributes.patch



---

archive/issue_events_164505.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-05-22T15:16:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12977#event-164505"
}
```



---

archive/issue_events_164506.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2013-05-22T15:16:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12977#event-164506"
}
```



---

archive/issue_comments_149740.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -24,4 +24,3 @@\n Apply\n \n * [attachment: trac12977_singular_function_attributes.patch](https://github.com/sagemath/sage/files/ticket12977/trac12977_singular_function_attributes.patch.gz)\n-* [attachment: trac_12977-fix_doctest.patch](https://github.com/sagemath/sage/files/ticket12977/trac_12977-fix_doctest.patch.gz)\n``````\n",
    "created_at": "2013-05-22T15:16:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12977#issuecomment-149740",
    "user": "https://github.com/simon-king-jena"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -24,4 +24,3 @@
 Apply
 
 * [attachment: trac12977_singular_function_attributes.patch](https://github.com/sagemath/sage/files/ticket12977/trac12977_singular_function_attributes.patch.gz)
-* [attachment: trac_12977-fix_doctest.patch](https://github.com/sagemath/sage/files/ticket12977/trac_12977-fix_doctest.patch.gz)
``````




---

archive/issue_comments_149741.json:
```json
{
    "body": "Changed work issues from **Do not set a_attrib accidentally. Provide a flag for \"comparison by equality\"** to none",
    "created_at": "2013-05-22T15:16:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12977#issuecomment-149741",
    "user": "https://github.com/simon-king-jena"
}
```

Changed work issues from **Do not set a_attrib accidentally. Provide a flag for "comparison by equality"** to none



---

archive/issue_events_164507.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12977#event-164507"
}
```



---

archive/issue_events_164508.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12977#event-164508"
}
```



---

archive/issue_comments_149742.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nIs there any reviewer? I still think it is a good idea to not use multivariate polynomial ideals as dictionary keys, given the fact that their hash is broken (or used to be broken until recently) and comparison can be extremely slow due to Gr\u00f6bner basis computations.",
    "created_at": "2013-08-15T08:09:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12977#issuecomment-149742",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:16" align="right">Comment 16</div>

Is there any reviewer? I still think it is a good idea to not use multivariate polynomial ideals as dictionary keys, given the fact that their hash is broken (or used to be broken until recently) and comparison can be extremely slow due to Gröbner basis computations.



---

archive/issue_comments_149743.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nSorry for being late to the party. \n\nI am wondering, though, whether we every want to compare **not** by identit as we are talking about attributes of objects here. \n\nWe could keep the dict notation but write our own little loop (similar to your tuple loop) which compares keys. These dicts will be small, so the overhead is okay, I'd say.",
    "created_at": "2013-08-15T10:39:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12977#issuecomment-149743",
    "user": "https://github.com/malb"
}
```

<div id="comment:17" align="right">Comment 17</div>

Sorry for being late to the party. 

I am wondering, though, whether we every want to compare **not** by identit as we are talking about attributes of objects here. 

We could keep the dict notation but write our own little loop (similar to your tuple loop) which compares keys. These dicts will be small, so the overhead is okay, I'd say.



---

archive/issue_comments_149744.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nReplying to [@malb](#comment%3A17):\n> Sorry for being late to the party. \n> \n> I am wondering, though, whether we every want to compare **not** by identit as we are talking about attributes of objects here. \n\nI wonder as well. From my perspective, comparing by identity is fine.\n\n> We could keep the dict notation but write our own little loop (similar to your tuple loop) which compares keys. These dicts will be small, so the overhead is okay, I'd say.\n\nIs this really so easy? If the dictionary contains at least two ideals, then the *creation* of this dictionary might be problematic, due to broken hash and slow comparison.",
    "created_at": "2013-08-15T20:56:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12977#issuecomment-149744",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:18" align="right">Comment 18</div>

Replying to [@malb](#comment%3A17):
> Sorry for being late to the party. 
> 
> I am wondering, though, whether we every want to compare **not** by identit as we are talking about attributes of objects here. 

I wonder as well. From my perspective, comparing by identity is fine.

> We could keep the dict notation but write our own little loop (similar to your tuple loop) which compares keys. These dicts will be small, so the overhead is okay, I'd say.

Is this really so easy? If the dictionary contains at least two ideals, then the *creation* of this dictionary might be problematic, due to broken hash and slow comparison.



---

archive/issue_comments_149745.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nAh, crap, yes, you're right. We shouldn't create dictionaries. How about we deprecate dicts and use your tuple construction instead?",
    "created_at": "2013-08-15T22:11:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12977#issuecomment-149745",
    "user": "https://github.com/malb"
}
```

<div id="comment:19" align="right">Comment 19</div>

Ah, crap, yes, you're right. We shouldn't create dictionaries. How about we deprecate dicts and use your tuple construction instead?



---

archive/issue_events_164509.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12977#event-164509"
}
```



---

archive/issue_events_164510.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12977#event-164510"
}
```



---

archive/issue_events_164511.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-03-31T07:52:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12977#event-164511"
}
```



---

archive/issue_events_164512.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-03-31T07:52:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12977#event-164512"
}
```



---

archive/issue_events_164513.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12977#event-164513"
}
```



---

archive/issue_events_164514.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12977#event-164514"
}
```



---

archive/issue_events_164515.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12977#event-164515"
}
```



---

archive/issue_events_164516.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12977#event-164516"
}
```



---

archive/issue_comments_149746.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nReplying to [@malb](#comment%3A19):\n> Ah, crap, yes, you're right. We shouldn't create dictionaries. How about we deprecate dicts and use your tuple construction instead?\n\nWhy not?\n\nLet's get this fixed!",
    "created_at": "2015-07-23T14:48:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12977#issuecomment-149746",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:24" align="right">Comment 24</div>

Replying to [@malb](#comment%3A19):
> Ah, crap, yes, you're right. We shouldn't create dictionaries. How about we deprecate dicts and use your tuple construction instead?

Why not?

Let's get this fixed!



---

archive/issue_events_164517.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-29T01:28:25Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12977",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12977#event-164517"
}
```
