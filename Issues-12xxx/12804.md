# Issue 12804: infinite loop in find method of a finite word

archive/issues_012632.json:
```json
{
    "assignees": [
        "https://github.com/sagetrac-sage-combinat"
    ],
    "body": "\n```\nsage: w = Word(iter(\"a\"))\nsage: w.find(\"a\")\n... hanging ...\n```\n\nOriginal report (the bug appears in the last two lines):\n\n```\nSalut,\n\nUn participant \u00e0 un TP sage (\u00e0 l'EJCIM 2012) a d\u00e9cel\u00e9 un bug :\n\nsage: s = WordMorphism(\"a->a\")\nsage: w = Word(\"a\")\nsage: w2 = s(w)\nsage: w.find(\"a\")\n0\nsage: w2.find(Word(\"a\"))\n0\n\nPour l'instant tout va bien. Les deux probl\u00e8mes sont :\n\nsage: w2.find(\"a\",end=1)\n-1\nsage: w2.find(\"a\")\n--> \u00e7a boucle\n\n\u00c0 la prochaine,\nTimo\n\n```\n\nCC:  @sagetrac-tjolivet @seblabbe @sagetrac-tmonteil @staroste\n\nComponent: **combinatorics**\n\nAuthor: **Vincent Delecroix**\n\nBranch/Commit: **[`946d884`](https://github.com/sagemath/sagetrac-mirror/commit/946d884ecec663d2fd6ac58db845b8e9939b6674)**\n\nReviewer: **S\u00e9bastien Labb\u00e9**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/12804_\n\n",
    "closed_at": "2015-04-14T23:01:40Z",
    "created_at": "2012-04-03T20:53:48Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "infinite loop in find method of a finite word",
    "type": "issue",
    "updated_at": "2015-04-14T23:01:40Z",
    "url": "https://github.com/sagemath/sage/issues/12804",
    "user": "https://github.com/seblabbe"
}
```

```
sage: w = Word(iter("a"))
sage: w.find("a")
... hanging ...
```

Original report (the bug appears in the last two lines):

```
Salut,

Un participant à un TP sage (à l'EJCIM 2012) a décelé un bug :

sage: s = WordMorphism("a->a")
sage: w = Word("a")
sage: w2 = s(w)
sage: w.find("a")
0
sage: w2.find(Word("a"))
0

Pour l'instant tout va bien. Les deux problèmes sont :

sage: w2.find("a",end=1)
-1
sage: w2.find("a")
--> ça boucle

À la prochaine,
Timo

```

CC:  @sagetrac-tjolivet @seblabbe @sagetrac-tmonteil @staroste

Component: **combinatorics**

Author: **Vincent Delecroix**

Branch/Commit: **[`946d884`](https://github.com/sagemath/sagetrac-mirror/commit/946d884ecec663d2fd6ac58db845b8e9939b6674)**

Reviewer: **Sébastien Labbé**

_Issue created by migration from https://trac.sagemath.org/ticket/12804_





---

archive/issue_events_174744.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2012-04-03T20:53:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12804#event-174744"
}
```



---

archive/issue_events_174745.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2012-04-03T20:53:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12804#event-174745"
}
```



---

archive/issue_events_174746.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2012-04-03T20:53:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12804#event-174746"
}
```



---

archive/issue_events_174747.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2012-04-03T20:53:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12804#event-174747"
}
```



---

archive/issue_events_174748.json:
```json
{
    "actor": "https://github.com/sagetrac-sage-combinat",
    "created_at": "2012-04-03T20:53:48Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "subject": "https://github.com/seblabbe",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12804#event-174748"
}
```



---

archive/issue_events_174749.json:
```json
{
    "actor": "https://github.com/a-andre",
    "created_at": "2012-04-04T09:26:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12804#event-174749"
}
```



---

archive/issue_comments_143733.json:
```json
{
    "body": "Author: **Andr\u00e9 Apitzsch**",
    "created_at": "2012-04-04T09:26:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12804#issuecomment-143733",
    "user": "https://github.com/a-andre"
}
```

Author: **André Apitzsch**



---

archive/issue_events_174750.json:
```json
{
    "actor": "https://github.com/sagetrac-tjolivet",
    "created_at": "2012-04-04T12:46:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12804#event-174750"
}
```



---

archive/issue_events_174751.json:
```json
{
    "actor": "https://github.com/sagetrac-tjolivet",
    "created_at": "2012-04-04T12:46:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12804#event-174751"
}
```



---

archive/issue_comments_143734.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nHi,\n\nI also thought about using the python string methods to fix this, but the  `Word` class allows arbitrary alphabets so we cannot use the string method directly.\n\nThe problem arises for example with `u = Word([-1,-2,-3])`, where `str(u)` returns the string `'-1,-2,-3'`:\n\n```\nsage: u = Word([-1,-2,-3])\nsage: v = Word([-2])\nsage: u.find(v)\n1\nsage: str(u).find(str(v))\n3\n```",
    "created_at": "2012-04-04T12:46:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12804#issuecomment-143734",
    "user": "https://github.com/sagetrac-tjolivet"
}
```

<div id="comment:2" align="right">comment:2</div>

Hi,

I also thought about using the python string methods to fix this, but the  `Word` class allows arbitrary alphabets so we cannot use the string method directly.

The problem arises for example with `u = Word([-1,-2,-3])`, where `str(u)` returns the string `'-1,-2,-3'`:

```
sage: u = Word([-1,-2,-3])
sage: v = Word([-2])
sage: u.find(v)
1
sage: str(u).find(str(v))
3
```



---

archive/issue_comments_143735.json:
```json
{
    "body": "Attachment: **[trac_12804.patch.gz](https://github.com/sagemath/sage/files/ticket12804/trac_12804.patch.gz)**",
    "created_at": "2012-04-06T16:36:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12804#issuecomment-143735",
    "user": "https://github.com/a-andre"
}
```

Attachment: **[trac_12804.patch.gz](https://github.com/sagemath/sage/files/ticket12804/trac_12804.patch.gz)**



---

archive/issue_events_174752.json:
```json
{
    "actor": "https://github.com/a-andre",
    "created_at": "2012-04-06T17:00:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12804#event-174752"
}
```



---

archive/issue_events_174753.json:
```json
{
    "actor": "https://github.com/a-andre",
    "created_at": "2012-04-06T17:00:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12804#event-174753"
}
```



---

archive/issue_comments_143736.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nNow string method is only used if we search for a string instead of a word.",
    "created_at": "2012-04-06T17:00:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12804#issuecomment-143736",
    "user": "https://github.com/a-andre"
}
```

<div id="comment:3" align="right">comment:3</div>

Now string method is only used if we search for a string instead of a word.



---

archive/issue_events_174754.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2012-05-28T23:07:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12804#event-174754"
}
```



---

archive/issue_events_174755.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2012-05-28T23:07:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12804#event-174755"
}
```



---

archive/issue_comments_143737.json:
```json
{
    "body": "Reviewer: **Mike Hansen**",
    "created_at": "2012-05-28T23:07:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12804#issuecomment-143737",
    "user": "https://github.com/mwhansen"
}
```

Reviewer: **Mike Hansen**



---

archive/issue_comments_143738.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nDoesn't \n\n```\nWord([-1,-2,-3]).find(\"-2\")\n```\n\nstill return the wrong thing?  Wouldn't it be better to do something like `list(u).index(v)` ?",
    "created_at": "2012-05-28T23:07:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12804#issuecomment-143738",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:4" align="right">comment:4</div>

Doesn't 

```
Word([-1,-2,-3]).find("-2")
```

still return the wrong thing?  Wouldn't it be better to do something like `list(u).index(v)` ?



---

archive/issue_events_174756.json:
```json
{
    "actor": "https://github.com/a-andre",
    "created_at": "2012-06-06T20:38:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12804#event-174756"
}
```



---

archive/issue_events_174757.json:
```json
{
    "actor": "https://github.com/a-andre",
    "created_at": "2012-06-06T20:38:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12804#event-174757"
}
```



---

archive/issue_comments_143739.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\n\n```\nsage: u = Word([-1,-2,-3])\nsage: v = Word([-2]) \nsage: vv = Word(\"-2\")\nsage: v\nword: -2\nsage: vv\nword: -2\nsage: u.find(v) \n1\nsage: u.find(vv)          \n-1\n```\n\nIs this the behaviour we expect or should `u.find(vv)` return 1, too?\n\nNotice\n\n```\nsage: v == vv\nFalse\nsage: type(v)\n<class 'sage.combinat.words.word.FiniteWord_list'>\nsage: type(vv)\n<class 'sage.combinat.words.word.FiniteWord_str'>\n```",
    "created_at": "2012-06-06T20:38:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12804#issuecomment-143739",
    "user": "https://github.com/a-andre"
}
```

<div id="comment:5" align="right">comment:5</div>


```
sage: u = Word([-1,-2,-3])
sage: v = Word([-2]) 
sage: vv = Word("-2")
sage: v
word: -2
sage: vv
word: -2
sage: u.find(v) 
1
sage: u.find(vv)          
-1
```

Is this the behaviour we expect or should `u.find(vv)` return 1, too?

Notice

```
sage: v == vv
False
sage: type(v)
<class 'sage.combinat.words.word.FiniteWord_list'>
sage: type(vv)
<class 'sage.combinat.words.word.FiniteWord_str'>
```



---

archive/issue_events_174758.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12804#event-174758"
}
```



---

archive/issue_events_174759.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12804#event-174759"
}
```



---

archive/issue_events_174760.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12804#event-174760"
}
```



---

archive/issue_events_174761.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12804#event-174761"
}
```



---

archive/issue_events_174762.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12804#event-174762"
}
```



---

archive/issue_events_174763.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12804#event-174763"
}
```



---

archive/issue_events_174764.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12804#event-174764"
}
```



---

archive/issue_events_174765.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12804#event-174765"
}
```



---

archive/issue_comments_143740.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,11 @@\n-The bug appears in the last two lines :\n+\n+```\n+sage: w = Word(iter(\"a\"))\n+sage: w.find(\"a\")\n+... hanging ...\n+```\n+\n+Original report (the bug appears in the last two lines):\n \n ```\n Salut,\n``````\n",
    "created_at": "2015-04-08T22:30:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12804#issuecomment-143740",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,11 @@
-The bug appears in the last two lines :
+
+```
+sage: w = Word(iter("a"))
+sage: w.find("a")
+... hanging ...
+```
+
+Original report (the bug appears in the last two lines):
 
 ```
 Salut,
``````




---

archive/issue_events_174766.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-08T22:52:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12804#event-174766"
}
```



---

archive/issue_events_174767.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-08T22:52:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12804#event-174767"
}
```



---

archive/issue_comments_143741.json:
```json
{
    "body": "Branch: **[u/vdelecroix/12804](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/12804)**",
    "created_at": "2015-04-08T22:52:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12804#issuecomment-143741",
    "user": "https://github.com/videlec"
}
```

Branch: **[u/vdelecroix/12804](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/12804)**



---

archive/issue_comments_143742.json:
```json
{
    "body": "Changed reviewer from **Mike Hansen** to none",
    "created_at": "2015-04-08T22:52:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12804#issuecomment-143742",
    "user": "https://github.com/videlec"
}
```

Changed reviewer from **Mike Hansen** to none



---

archive/issue_comments_143743.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,9 +1,8 @@\n-\n-```\n+****{{{\n sage: w = Word(iter(\"a\"))\n sage: w.find(\"a\")\n ... hanging ...\n-```\n+}}}\n \n Original report (the bug appears in the last two lines):\n \n``````\n",
    "created_at": "2015-04-08T22:52:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12804#issuecomment-143743",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,9 +1,8 @@
-
-```
+****{{{
 sage: w = Word(iter("a"))
 sage: w.find("a")
 ... hanging ...
-```
+}}}
 
 Original report (the bug appears in the last two lines):
 
``````




---

archive/issue_comments_143744.json:
```json
{
    "body": "Changed author from **Andr\u00e9 Apitzsch** to **Vincent Delecroix**",
    "created_at": "2015-04-08T22:52:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12804#issuecomment-143744",
    "user": "https://github.com/videlec"
}
```

Changed author from **André Apitzsch** to **Vincent Delecroix**



---

archive/issue_comments_143745.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nLet us restart from scratch.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1b0cb8eaa64b8e11eafbb834682e1fa16b1e0f25\"><code>1b0cb8e</code></a></td><td><code>Trac 12804: fix find/rfind for words</code></td></tr></table>\n",
    "created_at": "2015-04-08T22:52:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12804#issuecomment-143745",
    "user": "https://github.com/videlec"
}
```

<div id="comment:11" align="right">comment:11</div>

Let us restart from scratch.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1b0cb8eaa64b8e11eafbb834682e1fa16b1e0f25"><code>1b0cb8e</code></a></td><td><code>Trac 12804: fix find/rfind for words</code></td></tr></table>




---

archive/issue_events_174768.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-08T22:52:00Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12804#event-174768"
}
```



---

archive/issue_events_174769.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-08T22:52:00Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "milestone_number": null,
    "milestone_title": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12804#event-174769"
}
```



---

archive/issue_comments_143746.json:
```json
{
    "body": "Commit: **[`1b0cb8e`](https://github.com/sagemath/sagetrac-mirror/commit/1b0cb8eaa64b8e11eafbb834682e1fa16b1e0f25)**",
    "created_at": "2015-04-08T22:52:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12804#issuecomment-143746",
    "user": "https://github.com/videlec"
}
```

Commit: **[`1b0cb8e`](https://github.com/sagemath/sagetrac-mirror/commit/1b0cb8eaa64b8e11eafbb834682e1fa16b1e0f25)**



---

archive/issue_comments_143747.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,9 @@\n-****{{{\n+\n+```\n sage: w = Word(iter(\"a\"))\n sage: w.find(\"a\")\n ... hanging ...\n-}}}\n+```\n \n Original report (the bug appears in the last two lines):\n \n``````\n",
    "created_at": "2015-04-08T22:54:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12804#issuecomment-143747",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,9 @@
-****{{{
+
+```
 sage: w = Word(iter("a"))
 sage: w.find("a")
 ... hanging ...
-}}}
+```
 
 Original report (the bug appears in the last two lines):
 
``````




---

archive/issue_events_174770.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-04-09T20:01:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12804#event-174770"
}
```



---

archive/issue_events_174771.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-04-09T20:01:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12804#event-174771"
}
```



---

archive/issue_comments_143748.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nI like the way the fix is done. But by coercing the sub into the parent, we may obtain a Value Error. Should we catch the Value Error and return -1 in this case?\n\n```\nsage: w = Words('ab')('babaabaaab')\nsage: w.find('abc')      # find is overwritten in WordDatatype_str\n-1\nsage: \nsage: w = Words('ab')(tuple('babaabaaab'))\nsage: w.find('abc')\nTraceback (most recent call last):\n...\nValueError: c not in alphabet!\n```",
    "created_at": "2015-04-09T20:01:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12804#issuecomment-143748",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:13" align="right">comment:13</div>

I like the way the fix is done. But by coercing the sub into the parent, we may obtain a Value Error. Should we catch the Value Error and return -1 in this case?

```
sage: w = Words('ab')('babaabaaab')
sage: w.find('abc')      # find is overwritten in WordDatatype_str
-1
sage: 
sage: w = Words('ab')(tuple('babaabaaab'))
sage: w.find('abc')
Traceback (most recent call last):
...
ValueError: c not in alphabet!
```



---

archive/issue_comments_143749.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2c45e2a880f267cb8df6b17fb54ec51123246041\"><code>2c45e2a</code></a></td><td><code>Trac 12804: return -1 when it fails as it is specified</code></td></tr></table>\n",
    "created_at": "2015-04-09T20:20:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12804#issuecomment-143749",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2c45e2a880f267cb8df6b17fb54ec51123246041"><code>2c45e2a</code></a></td><td><code>Trac 12804: return -1 when it fails as it is specified</code></td></tr></table>




---

archive/issue_comments_143750.json:
```json
{
    "body": "Changed commit from **[`1b0cb8e`](https://github.com/sagemath/sagetrac-mirror/commit/1b0cb8eaa64b8e11eafbb834682e1fa16b1e0f25)** to **[`2c45e2a`](https://github.com/sagemath/sagetrac-mirror/commit/2c45e2a880f267cb8df6b17fb54ec51123246041)**",
    "created_at": "2015-04-09T20:20:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12804#issuecomment-143750",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1b0cb8e`](https://github.com/sagemath/sagetrac-mirror/commit/1b0cb8eaa64b8e11eafbb834682e1fa16b1e0f25)** to **[`2c45e2a`](https://github.com/sagemath/sagetrac-mirror/commit/2c45e2a880f267cb8df6b17fb54ec51123246041)**



---

archive/issue_events_174772.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-09T20:21:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12804#event-174772"
}
```



---

archive/issue_events_174773.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-09T20:21:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12804#event-174773"
}
```



---

archive/issue_comments_143751.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nRight... done!\n\nVincent",
    "created_at": "2015-04-09T20:21:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12804#issuecomment-143751",
    "user": "https://github.com/videlec"
}
```

<div id="comment:15" align="right">comment:15</div>

Right... done!

Vincent



---

archive/issue_events_174774.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-04-10T08:55:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12804#event-174774"
}
```



---

archive/issue_events_174775.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-04-10T08:55:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12804#event-174775"
}
```



---

archive/issue_comments_143752.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nThe commit 2c45e2a is fine, but the new doctests do not test the good thing since they were already fine before 2c45e2a. The Value Error comes when the parent of w has a specified alphabet and when sub is outside of the language. At least one doctest should test that case.",
    "created_at": "2015-04-10T08:55:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12804#issuecomment-143752",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:16" align="right">comment:16</div>

The commit 2c45e2a is fine, but the new doctests do not test the good thing since they were already fine before 2c45e2a. The Value Error comes when the parent of w has a specified alphabet and when sub is outside of the language. At least one doctest should test that case.



---

archive/issue_comments_143753.json:
```json
{
    "body": "Reviewer: **S\u00e9bastien Labb\u00e9**",
    "created_at": "2015-04-13T09:46:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12804#issuecomment-143753",
    "user": "https://github.com/seblabbe"
}
```

Reviewer: **Sébastien Labbé**



---

archive/issue_comments_143754.json:
```json
{
    "body": "Changed commit from **[`2c45e2a`](https://github.com/sagemath/sagetrac-mirror/commit/2c45e2a880f267cb8df6b17fb54ec51123246041)** to **[`946d884`](https://github.com/sagemath/sagetrac-mirror/commit/946d884ecec663d2fd6ac58db845b8e9939b6674)**",
    "created_at": "2015-04-13T09:46:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12804#issuecomment-143754",
    "user": "https://github.com/seblabbe"
}
```

Changed commit from **[`2c45e2a`](https://github.com/sagemath/sagetrac-mirror/commit/2c45e2a880f267cb8df6b17fb54ec51123246041)** to **[`946d884`](https://github.com/sagemath/sagetrac-mirror/commit/946d884ecec663d2fd6ac58db845b8e9939b6674)**



---

archive/issue_events_174776.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-04-13T09:46:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12804#event-174776"
}
```



---

archive/issue_events_174777.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-04-13T09:46:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12804#event-174777"
}
```



---

archive/issue_comments_143755.json:
```json
{
    "body": "Changed branch from **[u/vdelecroix/12804](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/12804)** to **[public/12804](https://github.com/sagemath/sagetrac-mirror/tree/public/12804)**",
    "created_at": "2015-04-13T09:46:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12804#issuecomment-143755",
    "user": "https://github.com/seblabbe"
}
```

Changed branch from **[u/vdelecroix/12804](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/12804)** to **[public/12804](https://github.com/sagemath/sagetrac-mirror/tree/public/12804)**



---

archive/issue_comments_143756.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nI added the doctest that I wanted you to add. To me this is a positive review. I let you change the status for positive review if you agree with my commit.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/946d884ecec663d2fd6ac58db845b8e9939b6674\"><code>946d884</code></a></td><td><code>Trac #12804: added a doctest during review</code></td></tr></table>\n",
    "created_at": "2015-04-13T09:46:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12804#issuecomment-143756",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:17" align="right">comment:17</div>

I added the doctest that I wanted you to add. To me this is a positive review. I let you change the status for positive review if you agree with my commit.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/946d884ecec663d2fd6ac58db845b8e9939b6674"><code>946d884</code></a></td><td><code>Trac #12804: added a doctest during review</code></td></tr></table>




---

archive/issue_events_174778.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-13T09:51:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12804#event-174778"
}
```



---

archive/issue_events_174779.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-13T09:51:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12804#event-174779"
}
```



---

archive/issue_comments_143757.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nThanks!",
    "created_at": "2015-04-13T09:51:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12804#issuecomment-143757",
    "user": "https://github.com/videlec"
}
```

<div id="comment:18" align="right">comment:18</div>

Thanks!



---

archive/issue_events_174780.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-04-14T23:01:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12804#event-174780"
}
```



---

archive/issue_events_174781.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "5cdc0bea2415c2c04de2551345ce9c54e6c1f5be",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-04-14T23:01:40Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12804#event-174781"
}
```



---

archive/issue_comments_143758.json:
```json
{
    "body": "Changed branch from **[public/12804](https://github.com/sagemath/sagetrac-mirror/tree/public/12804)** to **[`946d884`](https://github.com/sagemath/sagetrac-mirror/commit/946d884ecec663d2fd6ac58db845b8e9939b6674)**",
    "created_at": "2015-04-14T23:01:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12804#issuecomment-143758",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/12804](https://github.com/sagemath/sagetrac-mirror/tree/public/12804)** to **[`946d884`](https://github.com/sagemath/sagetrac-mirror/commit/946d884ecec663d2fd6ac58db845b8e9939b6674)**
