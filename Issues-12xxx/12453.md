# Issue 12453: Refactor integer vectors using ClonableIntArray Cython data structure

archive/issues_012281.json:
```json
{
    "body": "Why that ? Because :\n\n* Integer Vectors have no element class\n* Integer Vectors elements must be immutable and hashable\n* Clean the old code with new specification\n* Add documentation\n* Deal with coeherence beetween extra arguments of the constructor\n* ...\n\n**Assignee:** nborie\n\n**CC:**  sage-combinat @fchapoton @darijgr\n\n**Keywords:** Integer, vectors, cython, clone, Cernay2012\n\n**Branch/Commit:** [4aaba4280940c4defae572c3e16fb213406bc613](https://github.com/sagemath/sagetrac-mirror/commit/4aaba4280940c4defae572c3e16fb213406bc613)\n\n**Reviewer:** Fr\u00e9d\u00e9ric Chapoton, Nathann Cohen\n\n**Author:** Travis Scrimshaw\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/12453\n\n",
    "closed_at": "2016-12-10T12:38:22Z",
    "created_at": "2012-02-06T15:59:44Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.4",
    "title": "Refactor integer vectors using ClonableIntArray Cython data structure",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12453",
    "user": "https://trac.sagemath.org/admin/accounts/users/nborie"
}
```
Why that ? Because :

* Integer Vectors have no element class
* Integer Vectors elements must be immutable and hashable
* Clean the old code with new specification
* Add documentation
* Deal with coeherence beetween extra arguments of the constructor
* ...

**Assignee:** nborie

**CC:**  sage-combinat @fchapoton @darijgr

**Keywords:** Integer, vectors, cython, clone, Cernay2012

**Branch/Commit:** [4aaba4280940c4defae572c3e16fb213406bc613](https://github.com/sagemath/sagetrac-mirror/commit/4aaba4280940c4defae572c3e16fb213406bc613)

**Reviewer:** Frédéric Chapoton, Nathann Cohen

**Author:** Travis Scrimshaw

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/12453





---

archive/issue_comments_183471.json:
```json
{
    "body": "<a id='comment:1'></a>\nInitial version.",
    "created_at": "2013-02-22T04:37:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183471",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:1'></a>
Initial version.



---

archive/issue_comments_183472.json:
```json
{
    "body": "**Author:** Travis Scrimshaw",
    "created_at": "2013-02-22T04:37:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183472",
    "user": "https://github.com/tscrim"
}
```

**Author:** Travis Scrimshaw



---

archive/issue_comments_183473.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2013-02-22T04:37:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183473",
    "user": "https://github.com/tscrim"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_183474.json:
```json
{
    "body": "**Dependencies:** #10193",
    "created_at": "2013-02-22T14:23:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183474",
    "user": "https://github.com/tscrim"
}
```

**Dependencies:** #10193



---

archive/issue_comments_183475.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2013-06-04T06:56:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183475",
    "user": "https://github.com/videlec"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_183476.json:
```json
{
    "body": "<a id='comment:3'></a>\nPlease update the patch as it does not apply on sage-5.10\n\n```\npatching file sage/combinat/integer_vector_weighted.py\nHunk #1 FAILED at 2\nHunk #3 FAILED at 64\nHunk #4 FAILED at 173\n```",
    "created_at": "2013-06-04T06:56:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183476",
    "user": "https://github.com/videlec"
}
```

<a id='comment:3'></a>
Please update the patch as it does not apply on sage-5.10

```
patching file sage/combinat/integer_vector_weighted.py
Hunk #1 FAILED at 2
Hunk #3 FAILED at 64
Hunk #4 FAILED at 173
```



---

archive/issue_comments_183477.json:
```json
{
    "body": "<a id='comment:4'></a>\nNew version (which can be commuted past #14101 and #14772 at minor cost due to doc[string] changes). Also part of #12913.",
    "created_at": "2013-07-08T16:49:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183477",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:4'></a>
New version (which can be commuted past #14101 and #14772 at minor cost due to doc[string] changes). Also part of #12913.



---

archive/issue_comments_183478.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2013-07-08T16:49:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183478",
    "user": "https://github.com/tscrim"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_183479.json:
```json
{
    "body": "**Changing dependencies** from \"#10193\" to \"#10193 #14101\".",
    "created_at": "2013-07-08T16:49:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183479",
    "user": "https://github.com/tscrim"
}
```

**Changing dependencies** from "#10193" to "#10193 #14101".



---

archive/issue_comments_183480.json:
```json
{
    "body": "Attachment [trac_12453-refactor_integer_vectors-ts.patch](tarball://root/attachments/some-uuid/ticket12453/trac_12453-refactor_integer_vectors-ts.patch) by @tscrim created at 2013-07-19 18:36:27",
    "created_at": "2013-07-19T18:36:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183480",
    "user": "https://github.com/tscrim"
}
```

Attachment [trac_12453-refactor_integer_vectors-ts.patch](tarball://root/attachments/some-uuid/ticket12453/trac_12453-refactor_integer_vectors-ts.patch) by @tscrim created at 2013-07-19 18:36:27



---

archive/issue_events_039366.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12453#event-39366"
}
```



---

archive/issue_comments_183481.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch version at public/refactor_integer_vectors-12453 but trac is responding with a 'unicode' object not callable error.",
    "created_at": "2013-12-20T02:53:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183481",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:7'></a>
Branch version at public/refactor_integer_vectors-12453 but trac is responding with a 'unicode' object not callable error.



---

archive/issue_comments_183482.json:
```json
{
    "body": "**Branch:** [public/refactor_integer_vectors-12453](https://github.com/sagemath/sagetrac-mirror/tree/public/refactor_integer_vectors-12453)",
    "created_at": "2013-12-21T15:41:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183482",
    "user": "https://github.com/tscrim"
}
```

**Branch:** [public/refactor_integer_vectors-12453](https://github.com/sagemath/sagetrac-mirror/tree/public/refactor_integer_vectors-12453)



---

archive/issue_comments_183483.json:
```json
{
    "body": "<a id='comment:8'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ef2ddce\">ef2ddce</a></td><td><code>#12453: Refactored IntegerVectors to use ClonableIntArray.</code></td></tr></table>\n",
    "created_at": "2013-12-21T15:41:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183483",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ef2ddce">ef2ddce</a></td><td><code>#12453: Refactored IntegerVectors to use ClonableIntArray.</code></td></tr></table>




---

archive/issue_comments_183484.json:
```json
{
    "body": "**Commit:** [ef2ddcec6d5a469b982d34af7ff09c7af9500809](https://github.com/sagemath/sagetrac-mirror/commit/ef2ddcec6d5a469b982d34af7ff09c7af9500809)",
    "created_at": "2013-12-21T15:41:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183484",
    "user": "https://github.com/tscrim"
}
```

**Commit:** [ef2ddcec6d5a469b982d34af7ff09c7af9500809](https://github.com/sagemath/sagetrac-mirror/commit/ef2ddcec6d5a469b982d34af7ff09c7af9500809)



---

archive/issue_comments_183485.json:
```json
{
    "body": "**Changing commit** from \"[ef2ddcec6d5a469b982d34af7ff09c7af9500809](https://github.com/sagemath/sagetrac-mirror/commit/ef2ddcec6d5a469b982d34af7ff09c7af9500809)\" to \"[b9f278e0d06b1ad38e231a2ac11381e62b6a2b76](https://github.com/sagemath/sagetrac-mirror/commit/b9f278e0d06b1ad38e231a2ac11381e62b6a2b76)\".",
    "created_at": "2014-01-25T18:58:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183485",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[ef2ddcec6d5a469b982d34af7ff09c7af9500809](https://github.com/sagemath/sagetrac-mirror/commit/ef2ddcec6d5a469b982d34af7ff09c7af9500809)" to "[b9f278e0d06b1ad38e231a2ac11381e62b6a2b76](https://github.com/sagemath/sagetrac-mirror/commit/b9f278e0d06b1ad38e231a2ac11381e62b6a2b76)".



---

archive/issue_comments_183486.json:
```json
{
    "body": "<a id='comment:9'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eb793ccad2c574e6657d4613365a3e0c5a45d891\">eb793cc</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b9f278e0d06b1ad38e231a2ac11381e62b6a2b76\">b9f278e</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr></table>\n",
    "created_at": "2014-01-25T18:58:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183486",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eb793ccad2c574e6657d4613365a3e0c5a45d891">eb793cc</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b9f278e0d06b1ad38e231a2ac11381e62b6a2b76">b9f278e</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr></table>




---

archive/issue_events_039367.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12453#event-39367"
}
```



---

archive/issue_events_039368.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12453#event-39368"
}
```



---

archive/issue_comments_183487.json:
```json
{
    "body": "<a id='comment:11'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/12bac19c3a9d720363788baa7e4304fa18f7821f\">12bac19</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr></table>\n",
    "created_at": "2014-02-08T17:57:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183487",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/12bac19c3a9d720363788baa7e4304fa18f7821f">12bac19</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr></table>




---

archive/issue_comments_183488.json:
```json
{
    "body": "**Changing commit** from \"[b9f278e0d06b1ad38e231a2ac11381e62b6a2b76](https://github.com/sagemath/sagetrac-mirror/commit/b9f278e0d06b1ad38e231a2ac11381e62b6a2b76)\" to \"[12bac19c3a9d720363788baa7e4304fa18f7821f](https://github.com/sagemath/sagetrac-mirror/commit/12bac19c3a9d720363788baa7e4304fa18f7821f)\".",
    "created_at": "2014-02-08T17:57:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183488",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[b9f278e0d06b1ad38e231a2ac11381e62b6a2b76](https://github.com/sagemath/sagetrac-mirror/commit/b9f278e0d06b1ad38e231a2ac11381e62b6a2b76)" to "[12bac19c3a9d720363788baa7e4304fa18f7821f](https://github.com/sagemath/sagetrac-mirror/commit/12bac19c3a9d720363788baa7e4304fa18f7821f)".



---

archive/issue_comments_183489.json:
```json
{
    "body": "**Changing commit** from \"[12bac19c3a9d720363788baa7e4304fa18f7821f](https://github.com/sagemath/sagetrac-mirror/commit/12bac19c3a9d720363788baa7e4304fa18f7821f)\" to \"[3008ee6a34c023370071bfe1fb324f2b479462ed](https://github.com/sagemath/sagetrac-mirror/commit/3008ee6a34c023370071bfe1fb324f2b479462ed)\".",
    "created_at": "2014-03-13T05:43:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183489",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[12bac19c3a9d720363788baa7e4304fa18f7821f](https://github.com/sagemath/sagetrac-mirror/commit/12bac19c3a9d720363788baa7e4304fa18f7821f)" to "[3008ee6a34c023370071bfe1fb324f2b479462ed](https://github.com/sagemath/sagetrac-mirror/commit/3008ee6a34c023370071bfe1fb324f2b479462ed)".



---

archive/issue_comments_183490.json:
```json
{
    "body": "<a id='comment:12'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/04c52398624ff2d397a705562af85f8e22b9eb4b\">04c5239</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7393d3aa31baa9f5b29e2eda9a713abd9c2150fa\">7393d3a</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3008ee6a34c023370071bfe1fb324f2b479462ed\">3008ee6</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr></table>\n",
    "created_at": "2014-03-13T05:43:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183490",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/04c52398624ff2d397a705562af85f8e22b9eb4b">04c5239</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7393d3aa31baa9f5b29e2eda9a713abd9c2150fa">7393d3a</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3008ee6a34c023370071bfe1fb324f2b479462ed">3008ee6</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr></table>




---

archive/issue_comments_183491.json:
```json
{
    "body": "<a id='comment:13'></a>\nBefore this branch\n\n```\nsage: %time _=list(IntegerVectors(5,22))\nCPU times: user 1.78 s, sys: 8 ms, total: 1.78 s\nWall time: 1.81 s\n```\n\nAfter the branch\n\n```\nsage: %time _=list(IntegerVectors(5,22))\nCPU times: user 19.3 s, sys: 60 ms, total: 19.4 s\nWall time: 19.6 s\n```\n\nWith a 5-lines code\n\n```\nfrom itertools import combinations\ndef integervectors(n,k):\n    L = n+k-1\n    for x in combinations(range(L),k-1):\n        l = [x[i] - x[i-1]-1 for i in range(1,k-1)]\n        l.insert(0,x[0])\n        l.append(L-x[-1]-1)\n        yield l\n\nsage: %time _=list(integervectors(5,22))\nCPU times: user 492 ms, sys: 16 ms, total: 508 ms\nWall time: 515 ms\n```\n\nI think this can be classified as a severe regression. Besides,  it is probably better to avoid this kind of stuff present in your branch:\n\n```\nfor c in IntegerVectors(self.size - k, i-1):\n    c = list(c)\n```\n\nIf you only want the data, don't generate complex objects in the first place.\n\nNathann",
    "created_at": "2014-04-04T16:59:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183491",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:13'></a>
Before this branch

```
sage: %time _=list(IntegerVectors(5,22))
CPU times: user 1.78 s, sys: 8 ms, total: 1.78 s
Wall time: 1.81 s
```

After the branch

```
sage: %time _=list(IntegerVectors(5,22))
CPU times: user 19.3 s, sys: 60 ms, total: 19.4 s
Wall time: 19.6 s
```

With a 5-lines code

```
from itertools import combinations
def integervectors(n,k):
    L = n+k-1
    for x in combinations(range(L),k-1):
        l = [x[i] - x[i-1]-1 for i in range(1,k-1)]
        l.insert(0,x[0])
        l.append(L-x[-1]-1)
        yield l

sage: %time _=list(integervectors(5,22))
CPU times: user 492 ms, sys: 16 ms, total: 508 ms
Wall time: 515 ms
```

I think this can be classified as a severe regression. Besides,  it is probably better to avoid this kind of stuff present in your branch:

```
for c in IntegerVectors(self.size - k, i-1):
    c = list(c)
```

If you only want the data, don't generate complex objects in the first place.

Nathann



---

archive/issue_comments_183492.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2014-04-04T16:59:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183492",
    "user": "https://github.com/nathanncohen"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_183493.json:
```json
{
    "body": "<a id='comment:15'></a>\nWhile this algorithm works (modulo corner cases), it doesn't return them in lex order (which is something we'd want to do). Can you give a variant of it which does yield in lex order?",
    "created_at": "2014-04-04T21:18:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183493",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:15'></a>
While this algorithm works (modulo corner cases), it doesn't return them in lex order (which is something we'd want to do). Can you give a variant of it which does yield in lex order?



---

archive/issue_comments_183494.json:
```json
{
    "body": "<a id='comment:16'></a>\nNevermind, I think I have one.",
    "created_at": "2014-04-04T21:28:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183494",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:16'></a>
Nevermind, I think I have one.



---

archive/issue_comments_183495.json:
```json
{
    "body": "<a id='comment:17'></a>\n?\n\nOn which instance doesn't it give a lexicographic  ordering ? `O_o`\n\nNathann",
    "created_at": "2014-04-04T21:36:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183495",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:17'></a>
?

On which instance doesn't it give a lexicographic  ordering ? `O_o`

Nathann



---

archive/issue_comments_183496.json:
```json
{
    "body": "<a id='comment:18'></a>\n(1,2) gives: `[0, 1] [1, 0]`. In fact, try `(3,3)` and it's not something easily tweaked.",
    "created_at": "2014-04-04T21:40:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183496",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:18'></a>
(1,2) gives: `[0, 1] [1, 0]`. In fact, try `(3,3)` and it's not something easily tweaked.



---

archive/issue_comments_183497.json:
```json
{
    "body": "<a id='comment:19'></a>\n`O_o`\n\n```\nsage: list(integervectors(1,2))\n[[0, 1], [1, 0]]\nsage: list(integervectors(3,3))\n[[0, 0, 3],\n [0, 1, 2],\n [0, 2, 1],\n [0, 3, 0],\n [1, 0, 2],\n [1, 1, 1],\n [1, 2, 0],\n [2, 0, 1],\n [2, 1, 0],\n [3, 0, 0]]\n```\n\nIsn't that the lexicographic ordering ? `O_o`\n\n```\nsage: list(integervectors(3,3)) == sorted(list(integervectors(3,3)))\nTrue\n```",
    "created_at": "2014-04-04T21:43:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183497",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:19'></a>
`O_o`

```
sage: list(integervectors(1,2))
[[0, 1], [1, 0]]
sage: list(integervectors(3,3))
[[0, 0, 3],
 [0, 1, 2],
 [0, 2, 1],
 [0, 3, 0],
 [1, 0, 2],
 [1, 1, 1],
 [1, 2, 0],
 [2, 0, 1],
 [2, 1, 0],
 [3, 0, 0]]
```

Isn't that the lexicographic ordering ? `O_o`

```
sage: list(integervectors(3,3)) == sorted(list(integervectors(3,3)))
True
```



---

archive/issue_comments_183498.json:
```json
{
    "body": "<a id='comment:20'></a>\nI meant revlex.",
    "created_at": "2014-04-04T21:45:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183498",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:20'></a>
I meant revlex.



---

archive/issue_comments_183499.json:
```json
{
    "body": "<a id='comment:21'></a>\n> By your convention, I mean revlex.\n\n\nMe and quite a lot of people (wikipedia, dictionaries, phone books, Python) seem to agree on what a lexicographic ordering is `:-P`\n\nIt looks like `IntegerVector` returns them in decreasing lexicographic order, so I guess that's what you call \"revlex\" (sorry I always mix colex and revlex).\n\nWhat about computing the complement of x ? In Python  it wastes a lot of time, but the algorithm works.... `:-P`\n\n```\ndef integervectors(n,k):\n    L = n+k-1\n    for x in combinations(range(L),L-(k-1)):\n        x_complement = []\n        j = 0\n        for i in range(L):\n            if x[j] == i:\n                if j < L-(k-1)-1:\n\t\t    j += 1\n\t\tcontinue\n            else:\n                x_complement.append(i)\n\tx = x_complement\n        l = [x[i] - x[i-1]-1 for i in range(1,k-1)]\n        l.insert(0,x[0])\n        l.append(L-x[-1]-1)\n        yield l\n\nsage: list(integervectors(5,5)) == [list(map(int,x)) for x in IntegerVectors(5,5)]\nTrue\n```",
    "created_at": "2014-04-04T22:05:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183499",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:21'></a>
> By your convention, I mean revlex.


Me and quite a lot of people (wikipedia, dictionaries, phone books, Python) seem to agree on what a lexicographic ordering is `:-P`

It looks like `IntegerVector` returns them in decreasing lexicographic order, so I guess that's what you call "revlex" (sorry I always mix colex and revlex).

What about computing the complement of x ? In Python  it wastes a lot of time, but the algorithm works.... `:-P`

```
def integervectors(n,k):
    L = n+k-1
    for x in combinations(range(L),L-(k-1)):
        x_complement = []
        j = 0
        for i in range(L):
            if x[j] == i:
                if j < L-(k-1)-1:
		    j += 1
		continue
            else:
                x_complement.append(i)
	x = x_complement
        l = [x[i] - x[i-1]-1 for i in range(1,k-1)]
        l.insert(0,x[0])
        l.append(L-x[-1]-1)
        yield l

sage: list(integervectors(5,5)) == [list(map(int,x)) for x in IntegerVectors(5,5)]
True
```



---

archive/issue_comments_183500.json:
```json
{
    "body": "<a id='comment:22'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5a888397775b52e3987a091bc5fa58387cbd3a55\">5a88839</a></td><td><code>Merge branch 'public/refactor_integer_vectors-12453' of trac.sagemath.org:sage into public/refactor_integer_vectors-12453</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ae5db31521d4b7672f65e79e474d32fad8428a64\">ae5db31</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/71858e198f18832b07176233438914f7d90bd35f\">71858e1</a></td><td><code>Fixes for integer vectors.</code></td></tr></table>\n",
    "created_at": "2014-04-04T22:47:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183500",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5a888397775b52e3987a091bc5fa58387cbd3a55">5a88839</a></td><td><code>Merge branch 'public/refactor_integer_vectors-12453' of trac.sagemath.org:sage into public/refactor_integer_vectors-12453</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ae5db31521d4b7672f65e79e474d32fad8428a64">ae5db31</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/71858e198f18832b07176233438914f7d90bd35f">71858e1</a></td><td><code>Fixes for integer vectors.</code></td></tr></table>




---

archive/issue_comments_183501.json:
```json
{
    "body": "**Changing commit** from \"[3008ee6a34c023370071bfe1fb324f2b479462ed](https://github.com/sagemath/sagetrac-mirror/commit/3008ee6a34c023370071bfe1fb324f2b479462ed)\" to \"[71858e198f18832b07176233438914f7d90bd35f](https://github.com/sagemath/sagetrac-mirror/commit/71858e198f18832b07176233438914f7d90bd35f)\".",
    "created_at": "2014-04-04T22:47:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183501",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[3008ee6a34c023370071bfe1fb324f2b479462ed](https://github.com/sagemath/sagetrac-mirror/commit/3008ee6a34c023370071bfe1fb324f2b479462ed)" to "[71858e198f18832b07176233438914f7d90bd35f](https://github.com/sagemath/sagetrac-mirror/commit/71858e198f18832b07176233438914f7d90bd35f)".



---

archive/issue_comments_183502.json:
```json
{
    "body": "<a id='comment:23'></a>\nI thought I had a method but it didn't work. Python's `itertool` forces it through lex ordering, so I just did a brute compute and reverse (which is far less than ideal). I'll look into your revised algorithm tonight.",
    "created_at": "2014-04-04T22:51:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183502",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:23'></a>
I thought I had a method but it didn't work. Python's `itertool` forces it through lex ordering, so I just did a brute compute and reverse (which is far less than ideal). I'll look into your revised algorithm tonight.



---

archive/issue_comments_183503.json:
```json
{
    "body": "**Changing commit** from \"[71858e198f18832b07176233438914f7d90bd35f](https://github.com/sagemath/sagetrac-mirror/commit/71858e198f18832b07176233438914f7d90bd35f)\" to \"[0addeb2f6a192c38ef64d733a6a8f9e9e35d4da7](https://github.com/sagemath/sagetrac-mirror/commit/0addeb2f6a192c38ef64d733a6a8f9e9e35d4da7)\".",
    "created_at": "2014-04-15T02:22:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183503",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[71858e198f18832b07176233438914f7d90bd35f](https://github.com/sagemath/sagetrac-mirror/commit/71858e198f18832b07176233438914f7d90bd35f)" to "[0addeb2f6a192c38ef64d733a6a8f9e9e35d4da7](https://github.com/sagemath/sagetrac-mirror/commit/0addeb2f6a192c38ef64d733a6a8f9e9e35d4da7)".



---

archive/issue_comments_183504.json:
```json
{
    "body": "<a id='comment:24'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5f18c77a7ecdeb7ee0c1a44f749a66d6cb942ae8\">5f18c77</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d904ede5f6ee5b836286a165fd305fc8507a7ded\">d904ede</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0fb27aba1fdb7d02f362efb4c8e54fee4a71f6c0\">0fb27ab</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/31402be0063d6cab7fdeb8932712ea31bc049276\">31402be</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0addeb2f6a192c38ef64d733a6a8f9e9e35d4da7\">0addeb2</a></td><td><code>Merge branch 'public/refactor_integer_vectors-12453' of trac.sagemath.org:sage into public/refactor_integer_vectors-12453</code></td></tr></table>\n",
    "created_at": "2014-04-15T02:22:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183504",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5f18c77a7ecdeb7ee0c1a44f749a66d6cb942ae8">5f18c77</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d904ede5f6ee5b836286a165fd305fc8507a7ded">d904ede</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0fb27aba1fdb7d02f362efb4c8e54fee4a71f6c0">0fb27ab</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/31402be0063d6cab7fdeb8932712ea31bc049276">31402be</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0addeb2f6a192c38ef64d733a6a8f9e9e35d4da7">0addeb2</a></td><td><code>Merge branch 'public/refactor_integer_vectors-12453' of trac.sagemath.org:sage into public/refactor_integer_vectors-12453</code></td></tr></table>




---

archive/issue_events_039369.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12453#event-39369"
}
```



---

archive/issue_events_039370.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12453#event-39370"
}
```



---

archive/issue_comments_183505.json:
```json
{
    "body": "<a id='comment:26'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1501865b74faf08676bf64cb18f4b9ce11a4d1ca\">1501865</a></td><td><code>Merge commit '71858e198f18832b07176233438914f7d90bd35f' into public/refactor_integer_vectors-12453</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/822e1cb12097cf96039bb3251b782690fac1a42e\">822e1cb</a></td><td><code>Merge branch 'public/refactor_integer_vectors-12453' of trac.sagemath.org:sage into public/refactor_integer_vectors-12453</code></td></tr></table>\n",
    "created_at": "2014-08-01T21:02:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183505",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1501865b74faf08676bf64cb18f4b9ce11a4d1ca">1501865</a></td><td><code>Merge commit '71858e198f18832b07176233438914f7d90bd35f' into public/refactor_integer_vectors-12453</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/822e1cb12097cf96039bb3251b782690fac1a42e">822e1cb</a></td><td><code>Merge branch 'public/refactor_integer_vectors-12453' of trac.sagemath.org:sage into public/refactor_integer_vectors-12453</code></td></tr></table>




---

archive/issue_comments_183506.json:
```json
{
    "body": "**Changing commit** from \"[0addeb2f6a192c38ef64d733a6a8f9e9e35d4da7](https://github.com/sagemath/sagetrac-mirror/commit/0addeb2f6a192c38ef64d733a6a8f9e9e35d4da7)\" to \"[822e1cb12097cf96039bb3251b782690fac1a42e](https://github.com/sagemath/sagetrac-mirror/commit/822e1cb12097cf96039bb3251b782690fac1a42e)\".",
    "created_at": "2014-08-01T21:02:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183506",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[0addeb2f6a192c38ef64d733a6a8f9e9e35d4da7](https://github.com/sagemath/sagetrac-mirror/commit/0addeb2f6a192c38ef64d733a6a8f9e9e35d4da7)" to "[822e1cb12097cf96039bb3251b782690fac1a42e](https://github.com/sagemath/sagetrac-mirror/commit/822e1cb12097cf96039bb3251b782690fac1a42e)".



---

archive/issue_comments_183507.json:
```json
{
    "body": "<a id='comment:27'></a>\nHey Nathann,\n\nI've implemented your algorithm and everything seems to work. Can you do the rest of the review for this?",
    "created_at": "2014-08-01T21:06:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183507",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:27'></a>
Hey Nathann,

I've implemented your algorithm and everything seems to work. Can you do the rest of the review for this?



---

archive/issue_comments_183508.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2014-08-01T21:06:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183508",
    "user": "https://github.com/tscrim"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_183509.json:
```json
{
    "body": "<a id='comment:28'></a>\nHello !\n\n> I've implemented your algorithm and everything seems to work. Can you do the rest of the review for this?\n\n\nNo, sorry. Your branch contains 14 commits, almost all of which are entitled \"Merge with develop\". Besides, I see some code in your branch in which you just change the indentation, and so it seems that I should not re-review all that code, but given how your branch is made I have no way to know what needs an actual review.\n\nBesides, I can spend time on the review of any \"local\" thing (like this enumeration algorithm) and I will do it gladly if you have anything specific in mind, but I hate parents, elements and almost anything that is immutable. I am the last person you want to review code like that.\n\nI would start to make unpleasant reviews like: \"It has been reported on Sage-devel that having a cached function return a UniqueRepresentation object resulted in a memory leak. Clearly those integer vectors will be used by cached function, so you are creating a new memory leak until this finally gets fixed\".\n\nhttps://groups.google.com/d/topic/sage-devel/q5uy_lI11jg/discussion\n\nSo I'm sorry but you probably want somebody else to review this ticket.\n\nNathann",
    "created_at": "2014-08-01T21:29:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183509",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:28'></a>
Hello !

> I've implemented your algorithm and everything seems to work. Can you do the rest of the review for this?


No, sorry. Your branch contains 14 commits, almost all of which are entitled "Merge with develop". Besides, I see some code in your branch in which you just change the indentation, and so it seems that I should not re-review all that code, but given how your branch is made I have no way to know what needs an actual review.

Besides, I can spend time on the review of any "local" thing (like this enumeration algorithm) and I will do it gladly if you have anything specific in mind, but I hate parents, elements and almost anything that is immutable. I am the last person you want to review code like that.

I would start to make unpleasant reviews like: "It has been reported on Sage-devel that having a cached function return a UniqueRepresentation object resulted in a memory leak. Clearly those integer vectors will be used by cached function, so you are creating a new memory leak until this finally gets fixed".

https://groups.google.com/d/topic/sage-devel/q5uy_lI11jg/discussion

So I'm sorry but you probably want somebody else to review this ticket.

Nathann



---

archive/issue_events_039371.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12453#event-39371"
}
```



---

archive/issue_events_039372.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12453#event-39372"
}
```



---

archive/issue_comments_183510.json:
```json
{
    "body": "<a id='comment:30'></a>\nneeds rebase, des not apply",
    "created_at": "2015-05-22T20:11:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183510",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:30'></a>
needs rebase, des not apply



---

archive/issue_comments_183511.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2015-05-22T20:11:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183511",
    "user": "https://github.com/fchapoton"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_183512.json:
```json
{
    "body": "**Changing commit** from \"[822e1cb12097cf96039bb3251b782690fac1a42e](https://github.com/sagemath/sagetrac-mirror/commit/822e1cb12097cf96039bb3251b782690fac1a42e)\" to \"[8bc466dd7c129af8eab37ca11e77c399d502b831](https://github.com/sagemath/sagetrac-mirror/commit/8bc466dd7c129af8eab37ca11e77c399d502b831)\".",
    "created_at": "2016-08-25T19:24:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183512",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[822e1cb12097cf96039bb3251b782690fac1a42e](https://github.com/sagemath/sagetrac-mirror/commit/822e1cb12097cf96039bb3251b782690fac1a42e)" to "[8bc466dd7c129af8eab37ca11e77c399d502b831](https://github.com/sagemath/sagetrac-mirror/commit/8bc466dd7c129af8eab37ca11e77c399d502b831)".



---

archive/issue_comments_183513.json:
```json
{
    "body": "<a id='comment:31'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8bc466dd7c129af8eab37ca11e77c399d502b831\">8bc466d</a></td><td><code>Merge branch 'public/refactor_integer_vectors-12453' of git://trac.sagemath.org/sage into public/refactor_integer_vectors-12453</code></td></tr></table>\n",
    "created_at": "2016-08-25T19:24:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183513",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:31'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8bc466dd7c129af8eab37ca11e77c399d502b831">8bc466d</a></td><td><code>Merge branch 'public/refactor_integer_vectors-12453' of git://trac.sagemath.org/sage into public/refactor_integer_vectors-12453</code></td></tr></table>




---

archive/issue_comments_183514.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2016-08-25T19:26:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183514",
    "user": "https://github.com/tscrim"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_events_039373.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-08-25T19:26:05Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12453#event-39373"
}
```



---

archive/issue_events_039374.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-08-25T19:26:05Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "milestone": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12453#event-39374"
}
```



---

archive/issue_comments_183515.json:
```json
{
    "body": "<a id='comment:33'></a>\ndoc does not build:\n\n+[dochtml] OSError: [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/integer_vector.py:docstring of sage.combinat.integer_vector.IntegerVectors_nnondescents:9: WARNING: Inline literal start-string without end-string.\n\nand one should no longer use `it.next()` bu instead use `next(it)`\n\n++            sage: [it.next() for x in range(10)]\n++            sage: [it.next() for x in range(10)]\n++            sage: [it.next() for x in range(10)]",
    "created_at": "2016-08-26T17:10:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183515",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:33'></a>
doc does not build:

+[dochtml] OSError: [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/integer_vector.py:docstring of sage.combinat.integer_vector.IntegerVectors_nnondescents:9: WARNING: Inline literal start-string without end-string.

and one should no longer use `it.next()` bu instead use `next(it)`

++            sage: [it.next() for x in range(10)]
++            sage: [it.next() for x in range(10)]
++            sage: [it.next() for x in range(10)]



---

archive/issue_comments_183516.json:
```json
{
    "body": "**Changing commit** from \"[8bc466dd7c129af8eab37ca11e77c399d502b831](https://github.com/sagemath/sagetrac-mirror/commit/8bc466dd7c129af8eab37ca11e77c399d502b831)\" to \"[17620969ef1be886cb39b70eae1c6a8a3bfeb9ff](https://github.com/sagemath/sagetrac-mirror/commit/17620969ef1be886cb39b70eae1c6a8a3bfeb9ff)\".",
    "created_at": "2016-08-26T18:02:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183516",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[8bc466dd7c129af8eab37ca11e77c399d502b831](https://github.com/sagemath/sagetrac-mirror/commit/8bc466dd7c129af8eab37ca11e77c399d502b831)" to "[17620969ef1be886cb39b70eae1c6a8a3bfeb9ff](https://github.com/sagemath/sagetrac-mirror/commit/17620969ef1be886cb39b70eae1c6a8a3bfeb9ff)".



---

archive/issue_comments_183517.json:
```json
{
    "body": "<a id='comment:34'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8a32e2714ee3b33226baef3f3259b1ab6129258e\">8a32e27</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/17620969ef1be886cb39b70eae1c6a8a3bfeb9ff\">1762096</a></td><td><code>Fixing docbuilding (hopefully) and Python3 compatibility.</code></td></tr></table>\n",
    "created_at": "2016-08-26T18:02:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183517",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8a32e2714ee3b33226baef3f3259b1ab6129258e">8a32e27</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/17620969ef1be886cb39b70eae1c6a8a3bfeb9ff">1762096</a></td><td><code>Fixing docbuilding (hopefully) and Python3 compatibility.</code></td></tr></table>




---

archive/issue_comments_183518.json:
```json
{
    "body": "<a id='comment:35'></a>\nThis should fix the doc (although I can't test right now because Sage is recompiling) and fixed the `next`.",
    "created_at": "2016-08-26T18:03:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183518",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:35'></a>
This should fix the doc (although I can't test right now because Sage is recompiling) and fixed the `next`.



---

archive/issue_comments_183519.json:
```json
{
    "body": "<a id='comment:36'></a>\nFollowup, doc built cleanly for me.",
    "created_at": "2016-08-26T19:50:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183519",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:36'></a>
Followup, doc built cleanly for me.



---

archive/issue_comments_183520.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2016-08-27T11:04:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183520",
    "user": "https://github.com/fchapoton"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_183521.json:
```json
{
    "body": "<a id='comment:37'></a>\ntriggers doctest failures in sandpiles",
    "created_at": "2016-08-27T11:04:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183521",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:37'></a>
triggers doctest failures in sandpiles



---

archive/issue_comments_183522.json:
```json
{
    "body": "<a id='comment:38'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bab162bcd00364ce8113ddf97d23b2b6d985d688\">bab162b</a></td><td><code>Fixing doctest failures in sandpile.py.</code></td></tr></table>\n",
    "created_at": "2016-08-27T17:11:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183522",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:38'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bab162bcd00364ce8113ddf97d23b2b6d985d688">bab162b</a></td><td><code>Fixing doctest failures in sandpile.py.</code></td></tr></table>




---

archive/issue_comments_183523.json:
```json
{
    "body": "**Changing commit** from \"[17620969ef1be886cb39b70eae1c6a8a3bfeb9ff](https://github.com/sagemath/sagetrac-mirror/commit/17620969ef1be886cb39b70eae1c6a8a3bfeb9ff)\" to \"[bab162bcd00364ce8113ddf97d23b2b6d985d688](https://github.com/sagemath/sagetrac-mirror/commit/bab162bcd00364ce8113ddf97d23b2b6d985d688)\".",
    "created_at": "2016-08-27T17:11:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183523",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[17620969ef1be886cb39b70eae1c6a8a3bfeb9ff](https://github.com/sagemath/sagetrac-mirror/commit/17620969ef1be886cb39b70eae1c6a8a3bfeb9ff)" to "[bab162bcd00364ce8113ddf97d23b2b6d985d688](https://github.com/sagemath/sagetrac-mirror/commit/bab162bcd00364ce8113ddf97d23b2b6d985d688)".



---

archive/issue_comments_183524.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2016-08-27T17:12:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183524",
    "user": "https://github.com/tscrim"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_183525.json:
```json
{
    "body": "<a id='comment:39'></a>\nFixed.",
    "created_at": "2016-08-27T17:12:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183525",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:39'></a>
Fixed.



---

archive/issue_comments_183526.json:
```json
{
    "body": "<a id='comment:40'></a>\nPatchbot is green.",
    "created_at": "2016-09-01T04:50:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183526",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:40'></a>
Patchbot is green.



---

archive/issue_comments_183527.json:
```json
{
    "body": "<a id='comment:41'></a>\nBefore\n\n```\nsage: %timeit list(IntegerVectors(5,22))\n1 loop, best of 3: 190 ms per loop\n```\nAfter\n\n```\nsage: %timeit list(IntegerVectors(5,22)) \n1 loop, best of 3: 3.86 s per loop\n```\nwhich looks really bad..",
    "created_at": "2016-09-01T07:20:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183527",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:41'></a>
Before

```
sage: %timeit list(IntegerVectors(5,22))
1 loop, best of 3: 190 ms per loop
```
After

```
sage: %timeit list(IntegerVectors(5,22)) 
1 loop, best of 3: 3.86 s per loop
```
which looks really bad..



---

archive/issue_comments_183528.json:
```json
{
    "body": "<a id='comment:42'></a>\nBasically all of the time is eaten up by `integer_vectors_nk_fast_iter`. I was hoping to line profile it, but that is broken since the IPython upgrade. I'm looking into this.",
    "created_at": "2016-09-01T14:08:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183528",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:42'></a>
Basically all of the time is eaten up by `integer_vectors_nk_fast_iter`. I was hoping to line profile it, but that is broken since the IPython upgrade. I'm looking into this.



---

archive/issue_comments_183529.json:
```json
{
    "body": "<a id='comment:43'></a>\nSo it seems Nathann's algorithm is just slower than the original version, so I'm just reverting it. I would like to `%lprun` it... *sigh*",
    "created_at": "2016-09-01T14:18:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183529",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:43'></a>
So it seems Nathann's algorithm is just slower than the original version, so I'm just reverting it. I would like to `%lprun` it... *sigh*



---

archive/issue_comments_183530.json:
```json
{
    "body": "**Changing commit** from \"[bab162bcd00364ce8113ddf97d23b2b6d985d688](https://github.com/sagemath/sagetrac-mirror/commit/bab162bcd00364ce8113ddf97d23b2b6d985d688)\" to \"[c8d2f6c1d22a85572072faacbb8d87bccdb234ed](https://github.com/sagemath/sagetrac-mirror/commit/c8d2f6c1d22a85572072faacbb8d87bccdb234ed)\".",
    "created_at": "2016-09-01T14:55:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183530",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[bab162bcd00364ce8113ddf97d23b2b6d985d688](https://github.com/sagemath/sagetrac-mirror/commit/bab162bcd00364ce8113ddf97d23b2b6d985d688)" to "[c8d2f6c1d22a85572072faacbb8d87bccdb234ed](https://github.com/sagemath/sagetrac-mirror/commit/c8d2f6c1d22a85572072faacbb8d87bccdb234ed)".



---

archive/issue_comments_183531.json:
```json
{
    "body": "<a id='comment:44'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c8d2f6c1d22a85572072faacbb8d87bccdb234ed\">c8d2f6c</a></td><td><code>Reverting to previous iterator.</code></td></tr></table>\n",
    "created_at": "2016-09-01T14:55:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183531",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:44'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c8d2f6c1d22a85572072faacbb8d87bccdb234ed">c8d2f6c</a></td><td><code>Reverting to previous iterator.</code></td></tr></table>




---

archive/issue_comments_183532.json:
```json
{
    "body": "**Changing commit** from \"[c8d2f6c1d22a85572072faacbb8d87bccdb234ed](https://github.com/sagemath/sagetrac-mirror/commit/c8d2f6c1d22a85572072faacbb8d87bccdb234ed)\" to \"[d312832813eaed3853df658a2321c57d9ddbb21a](https://github.com/sagemath/sagetrac-mirror/commit/d312832813eaed3853df658a2321c57d9ddbb21a)\".",
    "created_at": "2016-09-01T15:04:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183532",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[c8d2f6c1d22a85572072faacbb8d87bccdb234ed](https://github.com/sagemath/sagetrac-mirror/commit/c8d2f6c1d22a85572072faacbb8d87bccdb234ed)" to "[d312832813eaed3853df658a2321c57d9ddbb21a](https://github.com/sagemath/sagetrac-mirror/commit/d312832813eaed3853df658a2321c57d9ddbb21a)".



---

archive/issue_comments_183533.json:
```json
{
    "body": "<a id='comment:45'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d312832813eaed3853df658a2321c57d9ddbb21a\">d312832</a></td><td><code>Take advantage of the list-returning iterator.</code></td></tr></table>\n",
    "created_at": "2016-09-01T15:04:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183533",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:45'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d312832813eaed3853df658a2321c57d9ddbb21a">d312832</a></td><td><code>Take advantage of the list-returning iterator.</code></td></tr></table>




---

archive/issue_comments_183534.json:
```json
{
    "body": "<a id='comment:46'></a>\nNow I get about a 3x slowdown for the iterator over the parent, but considering that this is basically overhead from the parent/element stuff, we won't be able to get much else. Plus we are at such small time scales and if you're iterating over the parent, then this should not be the bottleneck.\n\nHowever, calling the iterator itself is now about 10% faster than before. So I also update those parts of the codebase which want a honest list back and had them call the iterator directly.",
    "created_at": "2016-09-01T15:05:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183534",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:46'></a>
Now I get about a 3x slowdown for the iterator over the parent, but considering that this is basically overhead from the parent/element stuff, we won't be able to get much else. Plus we are at such small time scales and if you're iterating over the parent, then this should not be the bottleneck.

However, calling the iterator itself is now about 10% faster than before. So I also update those parts of the codebase which want a honest list back and had them call the iterator directly.



---

archive/issue_comments_183535.json:
```json
{
    "body": "**Changing commit** from \"[d312832813eaed3853df658a2321c57d9ddbb21a](https://github.com/sagemath/sagetrac-mirror/commit/d312832813eaed3853df658a2321c57d9ddbb21a)\" to \"[92360bdd3e33074e9dd72d4078efcf25bc63c70e](https://github.com/sagemath/sagetrac-mirror/commit/92360bdd3e33074e9dd72d4078efcf25bc63c70e)\".",
    "created_at": "2016-09-04T19:50:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183535",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[d312832813eaed3853df658a2321c57d9ddbb21a](https://github.com/sagemath/sagetrac-mirror/commit/d312832813eaed3853df658a2321c57d9ddbb21a)" to "[92360bdd3e33074e9dd72d4078efcf25bc63c70e](https://github.com/sagemath/sagetrac-mirror/commit/92360bdd3e33074e9dd72d4078efcf25bc63c70e)".



---

archive/issue_comments_183536.json:
```json
{
    "body": "<a id='comment:47'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/60070a928409040a24d0d0fa9a9bfb2da9bf2883\">60070a9</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/92360bdd3e33074e9dd72d4078efcf25bc63c70e\">92360bd</a></td><td><code>Fixing doctests from experiments.</code></td></tr></table>\n",
    "created_at": "2016-09-04T19:50:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183536",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:47'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/60070a928409040a24d0d0fa9a9bfb2da9bf2883">60070a9</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/92360bdd3e33074e9dd72d4078efcf25bc63c70e">92360bd</a></td><td><code>Fixing doctests from experiments.</code></td></tr></table>




---

archive/issue_comments_183537.json:
```json
{
    "body": "**Changing commit** from \"[92360bdd3e33074e9dd72d4078efcf25bc63c70e](https://github.com/sagemath/sagetrac-mirror/commit/92360bdd3e33074e9dd72d4078efcf25bc63c70e)\" to \"[a4be99126f555986e774e0337735d72442eb6479](https://github.com/sagemath/sagetrac-mirror/commit/a4be99126f555986e774e0337735d72442eb6479)\".",
    "created_at": "2016-09-11T22:34:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183537",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[92360bdd3e33074e9dd72d4078efcf25bc63c70e](https://github.com/sagemath/sagetrac-mirror/commit/92360bdd3e33074e9dd72d4078efcf25bc63c70e)" to "[a4be99126f555986e774e0337735d72442eb6479](https://github.com/sagemath/sagetrac-mirror/commit/a4be99126f555986e774e0337735d72442eb6479)".



---

archive/issue_comments_183538.json:
```json
{
    "body": "<a id='comment:48'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a4be99126f555986e774e0337735d72442eb6479\">a4be991</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr></table>\n",
    "created_at": "2016-09-11T22:34:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183538",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:48'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a4be99126f555986e774e0337735d72442eb6479">a4be991</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr></table>




---

archive/issue_comments_183539.json:
```json
{
    "body": "<a id='comment:49'></a>\nPatchbot is green.",
    "created_at": "2016-09-12T14:14:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183539",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:49'></a>
Patchbot is green.



---

archive/issue_comments_183540.json:
```json
{
    "body": "<a id='comment:50'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a52b821dfe1fd9d3a7a26783f481a649b01ee5fa\">a52b821</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr></table>\n",
    "created_at": "2016-09-16T23:37:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183540",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:50'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a52b821dfe1fd9d3a7a26783f481a649b01ee5fa">a52b821</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr></table>




---

archive/issue_comments_183541.json:
```json
{
    "body": "**Changing commit** from \"[a4be99126f555986e774e0337735d72442eb6479](https://github.com/sagemath/sagetrac-mirror/commit/a4be99126f555986e774e0337735d72442eb6479)\" to \"[a52b821dfe1fd9d3a7a26783f481a649b01ee5fa](https://github.com/sagemath/sagetrac-mirror/commit/a52b821dfe1fd9d3a7a26783f481a649b01ee5fa)\".",
    "created_at": "2016-09-16T23:37:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183541",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[a4be99126f555986e774e0337735d72442eb6479](https://github.com/sagemath/sagetrac-mirror/commit/a4be99126f555986e774e0337735d72442eb6479)" to "[a52b821dfe1fd9d3a7a26783f481a649b01ee5fa](https://github.com/sagemath/sagetrac-mirror/commit/a52b821dfe1fd9d3a7a26783f481a649b01ee5fa)".



---

archive/issue_comments_183542.json:
```json
{
    "body": "**Changing commit** from \"[a52b821dfe1fd9d3a7a26783f481a649b01ee5fa](https://github.com/sagemath/sagetrac-mirror/commit/a52b821dfe1fd9d3a7a26783f481a649b01ee5fa)\" to \"[f4f8149bd62d1ed9a88052d1f5f7028bc3870f09](https://github.com/sagemath/sagetrac-mirror/commit/f4f8149bd62d1ed9a88052d1f5f7028bc3870f09)\".",
    "created_at": "2016-09-29T02:12:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183542",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[a52b821dfe1fd9d3a7a26783f481a649b01ee5fa](https://github.com/sagemath/sagetrac-mirror/commit/a52b821dfe1fd9d3a7a26783f481a649b01ee5fa)" to "[f4f8149bd62d1ed9a88052d1f5f7028bc3870f09](https://github.com/sagemath/sagetrac-mirror/commit/f4f8149bd62d1ed9a88052d1f5f7028bc3870f09)".



---

archive/issue_comments_183543.json:
```json
{
    "body": "<a id='comment:51'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f4f8149bd62d1ed9a88052d1f5f7028bc3870f09\">f4f8149</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr></table>\n",
    "created_at": "2016-09-29T02:12:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183543",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:51'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f4f8149bd62d1ed9a88052d1f5f7028bc3870f09">f4f8149</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr></table>




---

archive/issue_comments_183544.json:
```json
{
    "body": "<a id='comment:52'></a>\nRebased on 7.4.beta6.",
    "created_at": "2016-09-29T02:13:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183544",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:52'></a>
Rebased on 7.4.beta6.



---

archive/issue_comments_183545.json:
```json
{
    "body": "**Changing commit** from \"[f4f8149bd62d1ed9a88052d1f5f7028bc3870f09](https://github.com/sagemath/sagetrac-mirror/commit/f4f8149bd62d1ed9a88052d1f5f7028bc3870f09)\" to \"[282f39be1d459a0aa6ce15de5afc5a147dcf9376](https://github.com/sagemath/sagetrac-mirror/commit/282f39be1d459a0aa6ce15de5afc5a147dcf9376)\".",
    "created_at": "2016-09-29T14:45:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183545",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[f4f8149bd62d1ed9a88052d1f5f7028bc3870f09](https://github.com/sagemath/sagetrac-mirror/commit/f4f8149bd62d1ed9a88052d1f5f7028bc3870f09)" to "[282f39be1d459a0aa6ce15de5afc5a147dcf9376](https://github.com/sagemath/sagetrac-mirror/commit/282f39be1d459a0aa6ce15de5afc5a147dcf9376)".



---

archive/issue_comments_183546.json:
```json
{
    "body": "<a id='comment:53'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/282f39be1d459a0aa6ce15de5afc5a147dcf9376\">282f39b</a></td><td><code>We have stricter equality checks based upon the parent.</code></td></tr></table>\n",
    "created_at": "2016-09-29T14:45:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183546",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:53'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/282f39be1d459a0aa6ce15de5afc5a147dcf9376">282f39b</a></td><td><code>We have stricter equality checks based upon the parent.</code></td></tr></table>




---

archive/issue_comments_183547.json:
```json
{
    "body": "**Changing commit** from \"[282f39be1d459a0aa6ce15de5afc5a147dcf9376](https://github.com/sagemath/sagetrac-mirror/commit/282f39be1d459a0aa6ce15de5afc5a147dcf9376)\" to \"[ff49fdf26d4510af8d18b658a97c805e177006a5](https://github.com/sagemath/sagetrac-mirror/commit/ff49fdf26d4510af8d18b658a97c805e177006a5)\".",
    "created_at": "2016-11-10T16:05:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183547",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[282f39be1d459a0aa6ce15de5afc5a147dcf9376](https://github.com/sagemath/sagetrac-mirror/commit/282f39be1d459a0aa6ce15de5afc5a147dcf9376)" to "[ff49fdf26d4510af8d18b658a97c805e177006a5](https://github.com/sagemath/sagetrac-mirror/commit/ff49fdf26d4510af8d18b658a97c805e177006a5)".



---

archive/issue_comments_183548.json:
```json
{
    "body": "<a id='comment:54'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/074dc19167e089bdfd00d94095aa67111f7dbb64\">074dc19</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7401293e016d21488e784085052716d83d64f401\">7401293</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c6dd0874e457e29e8eb0d478ac97762bcb238cc2\">c6dd087</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/98ecbada1a69fb7b95d698a1211b98a30f2cd9ce\">98ecbad</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ddce440aef35bb8558a92d6a65ba9e84e6dab20d\">ddce440</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ff49fdf26d4510af8d18b658a97c805e177006a5\">ff49fdf</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr></table>\n",
    "created_at": "2016-11-10T16:05:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183548",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:54'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/074dc19167e089bdfd00d94095aa67111f7dbb64">074dc19</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7401293e016d21488e784085052716d83d64f401">7401293</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c6dd0874e457e29e8eb0d478ac97762bcb238cc2">c6dd087</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/98ecbada1a69fb7b95d698a1211b98a30f2cd9ce">98ecbad</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ddce440aef35bb8558a92d6a65ba9e84e6dab20d">ddce440</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ff49fdf26d4510af8d18b658a97c805e177006a5">ff49fdf</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr></table>




---

archive/issue_comments_183549.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2016-12-03T10:56:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183549",
    "user": "https://github.com/fchapoton"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_183550.json:
```json
{
    "body": "<a id='comment:55'></a>\ndoes not apply",
    "created_at": "2016-12-03T10:56:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183550",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:55'></a>
does not apply



---

archive/issue_comments_183551.json:
```json
{
    "body": "**Changing commit** from \"[ff49fdf26d4510af8d18b658a97c805e177006a5](https://github.com/sagemath/sagetrac-mirror/commit/ff49fdf26d4510af8d18b658a97c805e177006a5)\" to \"[707b5198255b05a67faeb209764b65ed0a1292db](https://github.com/sagemath/sagetrac-mirror/commit/707b5198255b05a67faeb209764b65ed0a1292db)\".",
    "created_at": "2016-12-05T01:14:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183551",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[ff49fdf26d4510af8d18b658a97c805e177006a5](https://github.com/sagemath/sagetrac-mirror/commit/ff49fdf26d4510af8d18b658a97c805e177006a5)" to "[707b5198255b05a67faeb209764b65ed0a1292db](https://github.com/sagemath/sagetrac-mirror/commit/707b5198255b05a67faeb209764b65ed0a1292db)".



---

archive/issue_comments_183552.json:
```json
{
    "body": "<a id='comment:56'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0feb74dfeb15283e50c4922c9c03fdf3343841b7\">0feb74d</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/707b5198255b05a67faeb209764b65ed0a1292db\">707b519</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr></table>\n",
    "created_at": "2016-12-05T01:14:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183552",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:56'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0feb74dfeb15283e50c4922c9c03fdf3343841b7">0feb74d</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/707b5198255b05a67faeb209764b65ed0a1292db">707b519</a></td><td><code>Merge branch 'develop' into public/refactor_integer_vectors-12453</code></td></tr></table>




---

archive/issue_comments_183553.json:
```json
{
    "body": "<a id='comment:57'></a>\nI would appreciate it if you could finish the review Fr\u00e9d\u00e9ric.",
    "created_at": "2016-12-05T01:16:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183553",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:57'></a>
I would appreciate it if you could finish the review Frédéric.



---

archive/issue_comments_183554.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2016-12-05T01:16:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183554",
    "user": "https://github.com/tscrim"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_183555.json:
```json
{
    "body": "**Changing commit** from \"[707b5198255b05a67faeb209764b65ed0a1292db](https://github.com/sagemath/sagetrac-mirror/commit/707b5198255b05a67faeb209764b65ed0a1292db)\" to \"[2c221cfebb99a7b3255c61bde71f652e49ed5aba](https://github.com/sagemath/sagetrac-mirror/commit/2c221cfebb99a7b3255c61bde71f652e49ed5aba)\".",
    "created_at": "2016-12-05T14:10:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183555",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[707b5198255b05a67faeb209764b65ed0a1292db](https://github.com/sagemath/sagetrac-mirror/commit/707b5198255b05a67faeb209764b65ed0a1292db)" to "[2c221cfebb99a7b3255c61bde71f652e49ed5aba](https://github.com/sagemath/sagetrac-mirror/commit/2c221cfebb99a7b3255c61bde71f652e49ed5aba)".



---

archive/issue_comments_183556.json:
```json
{
    "body": "<a id='comment:58'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2c221cfebb99a7b3255c61bde71f652e49ed5aba\">2c221cf</a></td><td><code>Fixing trivial doctest.</code></td></tr></table>\n",
    "created_at": "2016-12-05T14:10:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183556",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:58'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2c221cfebb99a7b3255c61bde71f652e49ed5aba">2c221cf</a></td><td><code>Fixing trivial doctest.</code></td></tr></table>




---

archive/issue_comments_183557.json:
```json
{
    "body": "<a id='comment:59'></a>\ntypo \"yeilds Python\"\n\nI am not sure I am able to do a review. This is rather large a ticket..\n\nWould you please provide some timings ? I am still a lot worried about that.\n\nAnd explain again what is gained, maybe at the loss of some speed ?",
    "created_at": "2016-12-05T19:48:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183557",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:59'></a>
typo "yeilds Python"

I am not sure I am able to do a review. This is rather large a ticket..

Would you please provide some timings ? I am still a lot worried about that.

And explain again what is gained, maybe at the loss of some speed ?



---

archive/issue_comments_183558.json:
```json
{
    "body": "<a id='comment:60'></a>\nbefore\n\n```\nsage: %timeit list(IntegerVectors(5,22))\n1 loop, best of 3: 193 ms per loop\n```\nafter\n\n```\nsage: %timeit list(IntegerVectors(5,22)) \n1 loop, best of 3: 622 ms per loop\n```\nso this is not so bad, but still a 3 times slowdown. What do we gain for this prize ?",
    "created_at": "2016-12-05T21:48:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183558",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:60'></a>
before

```
sage: %timeit list(IntegerVectors(5,22))
1 loop, best of 3: 193 ms per loop
```
after

```
sage: %timeit list(IntegerVectors(5,22)) 
1 loop, best of 3: 622 ms per loop
```
so this is not so bad, but still a 3 times slowdown. What do we gain for this prize ?



---

archive/issue_comments_183559.json:
```json
{
    "body": "<a id='comment:61'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0b7514784e9576de0db70f69df099138ebdffa5b\">0b75147</a></td><td><code>Fixing typo yeilds -> yields.</code></td></tr></table>\n",
    "created_at": "2016-12-05T22:37:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183559",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:61'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0b7514784e9576de0db70f69df099138ebdffa5b">0b75147</a></td><td><code>Fixing typo yeilds -> yields.</code></td></tr></table>




---

archive/issue_comments_183560.json:
```json
{
    "body": "**Changing commit** from \"[2c221cfebb99a7b3255c61bde71f652e49ed5aba](https://github.com/sagemath/sagetrac-mirror/commit/2c221cfebb99a7b3255c61bde71f652e49ed5aba)\" to \"[0b7514784e9576de0db70f69df099138ebdffa5b](https://github.com/sagemath/sagetrac-mirror/commit/0b7514784e9576de0db70f69df099138ebdffa5b)\".",
    "created_at": "2016-12-05T22:37:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183560",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[2c221cfebb99a7b3255c61bde71f652e49ed5aba](https://github.com/sagemath/sagetrac-mirror/commit/2c221cfebb99a7b3255c61bde71f652e49ed5aba)" to "[0b7514784e9576de0db70f69df099138ebdffa5b](https://github.com/sagemath/sagetrac-mirror/commit/0b7514784e9576de0db70f69df099138ebdffa5b)".



---

archive/issue_comments_183561.json:
```json
{
    "body": "<a id='comment:62'></a>\nThat is around what I am getting as well. The advantage is that this is now a proper parent class with elements and fits into the rest of Sage. If you want to have the speed but not the parent/element overhead, I provided an iterator for that:\n\n```\nsage: %timeit list(IntegerVectors(5,22))\n1 loop, best of 3: 238 ms per loop\nsage: from sage.combinat.integer_vector import integer_vectors_nk_fast_iter\nsage: %timeit list(integer_vectors_nk_fast_iter(5,22))\n10 loops, best of 3: 63.7 ms per loop\n```\nOld:\n\n```\nsage: %timeit list(IntegerVectors(5,22))\n10 loops, best of 3: 76.4 ms per loop\n```\n\nAlthough if you use `int` and Cython, you can get a *very* fast iterator. Although converting those back to `Integer`'s was actually slower than working directly with `Integer`'s.\n\nI now see the problem with why that was taking so long. The class I'm using actually stores the input data as `int`'s, not `Integer`'s. So I think I need to change the base class for the elements.",
    "created_at": "2016-12-05T22:47:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183561",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:62'></a>
That is around what I am getting as well. The advantage is that this is now a proper parent class with elements and fits into the rest of Sage. If you want to have the speed but not the parent/element overhead, I provided an iterator for that:

```
sage: %timeit list(IntegerVectors(5,22))
1 loop, best of 3: 238 ms per loop
sage: from sage.combinat.integer_vector import integer_vectors_nk_fast_iter
sage: %timeit list(integer_vectors_nk_fast_iter(5,22))
10 loops, best of 3: 63.7 ms per loop
```
Old:

```
sage: %timeit list(IntegerVectors(5,22))
10 loops, best of 3: 76.4 ms per loop
```

Although if you use `int` and Cython, you can get a *very* fast iterator. Although converting those back to `Integer`'s was actually slower than working directly with `Integer`'s.

I now see the problem with why that was taking so long. The class I'm using actually stores the input data as `int`'s, not `Integer`'s. So I think I need to change the base class for the elements.



---

archive/issue_comments_183562.json:
```json
{
    "body": "**Changing commit** from \"[0b7514784e9576de0db70f69df099138ebdffa5b](https://github.com/sagemath/sagetrac-mirror/commit/0b7514784e9576de0db70f69df099138ebdffa5b)\" to \"[fa63e8f867108571b8306dbdfaaa4d35fdffde9a](https://github.com/sagemath/sagetrac-mirror/commit/fa63e8f867108571b8306dbdfaaa4d35fdffde9a)\".",
    "created_at": "2016-12-05T22:50:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183562",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[0b7514784e9576de0db70f69df099138ebdffa5b](https://github.com/sagemath/sagetrac-mirror/commit/0b7514784e9576de0db70f69df099138ebdffa5b)" to "[fa63e8f867108571b8306dbdfaaa4d35fdffde9a](https://github.com/sagemath/sagetrac-mirror/commit/fa63e8f867108571b8306dbdfaaa4d35fdffde9a)".



---

archive/issue_comments_183563.json:
```json
{
    "body": "<a id='comment:63'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fa63e8f867108571b8306dbdfaaa4d35fdffde9a\">fa63e8f</a></td><td><code>Using ClonableArray instead of ClonableIntArray.</code></td></tr></table>\n",
    "created_at": "2016-12-05T22:50:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183563",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:63'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fa63e8f867108571b8306dbdfaaa4d35fdffde9a">fa63e8f</a></td><td><code>Using ClonableArray instead of ClonableIntArray.</code></td></tr></table>




---

archive/issue_comments_183564.json:
```json
{
    "body": "<a id='comment:64'></a>\nOkay, using `ClonableArray` makes things a little bit better:\n\n```\n%timeit list(IntegerVectors(5,22))\n1 loop, best of 3: 209 ms per loop\n```",
    "created_at": "2016-12-05T22:57:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183564",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:64'></a>
Okay, using `ClonableArray` makes things a little bit better:

```
%timeit list(IntegerVectors(5,22))
1 loop, best of 3: 209 ms per loop
```



---

archive/issue_comments_183565.json:
```json
{
    "body": "<a id='comment:65'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5553a1bd7f7f29215071bff42e500c3fbd63dfe4\">5553a1b</a></td><td><code>Squeezing some more speed out of the iterator.</code></td></tr></table>\n",
    "created_at": "2016-12-05T23:32:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183565",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:65'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5553a1bd7f7f29215071bff42e500c3fbd63dfe4">5553a1b</a></td><td><code>Squeezing some more speed out of the iterator.</code></td></tr></table>




---

archive/issue_comments_183566.json:
```json
{
    "body": "**Changing commit** from \"[fa63e8f867108571b8306dbdfaaa4d35fdffde9a](https://github.com/sagemath/sagetrac-mirror/commit/fa63e8f867108571b8306dbdfaaa4d35fdffde9a)\" to \"[5553a1bd7f7f29215071bff42e500c3fbd63dfe4](https://github.com/sagemath/sagetrac-mirror/commit/5553a1bd7f7f29215071bff42e500c3fbd63dfe4)\".",
    "created_at": "2016-12-05T23:32:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183566",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[fa63e8f867108571b8306dbdfaaa4d35fdffde9a](https://github.com/sagemath/sagetrac-mirror/commit/fa63e8f867108571b8306dbdfaaa4d35fdffde9a)" to "[5553a1bd7f7f29215071bff42e500c3fbd63dfe4](https://github.com/sagemath/sagetrac-mirror/commit/5553a1bd7f7f29215071bff42e500c3fbd63dfe4)".



---

archive/issue_comments_183567.json:
```json
{
    "body": "<a id='comment:66'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c37d077a26d9bc5893d3366a23df887530e2fc0a\">c37d077</a></td><td><code>Make sure every element in the list is a Sage Integer.</code></td></tr></table>\n",
    "created_at": "2016-12-05T23:49:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183567",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:66'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c37d077a26d9bc5893d3366a23df887530e2fc0a">c37d077</a></td><td><code>Make sure every element in the list is a Sage Integer.</code></td></tr></table>




---

archive/issue_comments_183568.json:
```json
{
    "body": "**Changing commit** from \"[5553a1bd7f7f29215071bff42e500c3fbd63dfe4](https://github.com/sagemath/sagetrac-mirror/commit/5553a1bd7f7f29215071bff42e500c3fbd63dfe4)\" to \"[c37d077a26d9bc5893d3366a23df887530e2fc0a](https://github.com/sagemath/sagetrac-mirror/commit/c37d077a26d9bc5893d3366a23df887530e2fc0a)\".",
    "created_at": "2016-12-05T23:49:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183568",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[5553a1bd7f7f29215071bff42e500c3fbd63dfe4](https://github.com/sagemath/sagetrac-mirror/commit/5553a1bd7f7f29215071bff42e500c3fbd63dfe4)" to "[c37d077a26d9bc5893d3366a23df887530e2fc0a](https://github.com/sagemath/sagetrac-mirror/commit/c37d077a26d9bc5893d3366a23df887530e2fc0a)".



---

archive/issue_comments_183569.json:
```json
{
    "body": "<a id='comment:67'></a>\nBy not popping and pushing the list (the iterator wants a fixed length) and some reworking, I got it to:\n\n```\nsage: %timeit list(IntegerVectors(5,22))\n1 loop, best of 3: 188 ms per loop\n```\nAlthough I did get some slowdown because `rem` was not an `Integer` for the entire loop. So I think this is probably as fast as I can get it.",
    "created_at": "2016-12-05T23:52:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183569",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:67'></a>
By not popping and pushing the list (the iterator wants a fixed length) and some reworking, I got it to:

```
sage: %timeit list(IntegerVectors(5,22))
1 loop, best of 3: 188 ms per loop
```
Although I did get some slowdown because `rem` was not an `Integer` for the entire loop. So I think this is probably as fast as I can get it.



---

archive/issue_comments_183570.json:
```json
{
    "body": "**Changing commit** from \"[c37d077a26d9bc5893d3366a23df887530e2fc0a](https://github.com/sagemath/sagetrac-mirror/commit/c37d077a26d9bc5893d3366a23df887530e2fc0a)\" to \"[4aaba4280940c4defae572c3e16fb213406bc613](https://github.com/sagemath/sagetrac-mirror/commit/4aaba4280940c4defae572c3e16fb213406bc613)\".",
    "created_at": "2016-12-06T12:27:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183570",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[c37d077a26d9bc5893d3366a23df887530e2fc0a](https://github.com/sagemath/sagetrac-mirror/commit/c37d077a26d9bc5893d3366a23df887530e2fc0a)" to "[4aaba4280940c4defae572c3e16fb213406bc613](https://github.com/sagemath/sagetrac-mirror/commit/4aaba4280940c4defae572c3e16fb213406bc613)".



---

archive/issue_comments_183571.json:
```json
{
    "body": "<a id='comment:68'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4aaba4280940c4defae572c3e16fb213406bc613\">4aaba42</a></td><td><code>trac 12453 reviewer's commit</code></td></tr></table>\n",
    "created_at": "2016-12-06T12:27:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183571",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:68'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4aaba4280940c4defae572c3e16fb213406bc613">4aaba42</a></td><td><code>trac 12453 reviewer's commit</code></td></tr></table>




---

archive/issue_comments_183572.json:
```json
{
    "body": "<a id='comment:69'></a>\nLooks better now indeed. I have made a reviewer's commit (cosmetic).\n\nOnce the bot is green, you can set a positive review.",
    "created_at": "2016-12-06T12:28:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183572",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:69'></a>
Looks better now indeed. I have made a reviewer's commit (cosmetic).

Once the bot is green, you can set a positive review.



---

archive/issue_comments_183573.json:
```json
{
    "body": "<a id='comment:70'></a>\nBot is essentially green, so positive review. Thank you.",
    "created_at": "2016-12-06T14:54:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183573",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:70'></a>
Bot is essentially green, so positive review. Thank you.



---

archive/issue_comments_183574.json:
```json
{
    "body": "**Reviewer:** Fr\u00e9d\u00e9ric Chapoton, Nathann Cohen",
    "created_at": "2016-12-06T14:54:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183574",
    "user": "https://github.com/tscrim"
}
```

**Reviewer:** Frédéric Chapoton, Nathann Cohen



---

archive/issue_comments_183575.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2016-12-06T14:54:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183575",
    "user": "https://github.com/tscrim"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_183576.json:
```json
{
    "body": "**Changing dependencies** from \"#10193 #14101\" to \"\".",
    "created_at": "2016-12-07T23:33:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183576",
    "user": "https://github.com/vbraun"
}
```

**Changing dependencies** from "#10193 #14101" to "".



---

archive/issue_comments_183577.json:
```json
{
    "body": "<a id='comment:72'></a>\nFYI I'm only merging tickets whose dependencies are merged git branches.",
    "created_at": "2016-12-07T23:33:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183577",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:72'></a>
FYI I'm only merging tickets whose dependencies are merged git branches.



---

archive/issue_events_039375.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-12-10T12:38:22Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12453#event-39375"
}
```



---

archive/issue_comments_183578.json:
```json
{
    "body": "**Changing branch** from \"[public/refactor_integer_vectors-12453](https://github.com/sagemath/sagetrac-mirror/tree/public/refactor_integer_vectors-12453)\" to \"[4aaba4280940c4defae572c3e16fb213406bc613](https://github.com/sagemath/sagetrac-mirror/commit/4aaba4280940c4defae572c3e16fb213406bc613)\".",
    "created_at": "2016-12-10T12:38:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183578",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/refactor_integer_vectors-12453](https://github.com/sagemath/sagetrac-mirror/tree/public/refactor_integer_vectors-12453)" to "[4aaba4280940c4defae572c3e16fb213406bc613](https://github.com/sagemath/sagetrac-mirror/commit/4aaba4280940c4defae572c3e16fb213406bc613)".



---

archive/issue_comments_183579.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2016-12-10T12:38:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12453",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12453#issuecomment-183579",
    "user": "https://github.com/vbraun"
}
```

**Resolution:** fixed
