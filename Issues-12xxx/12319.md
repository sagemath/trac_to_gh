# Issue 12319: Bring three more plot3d files to 100% coverage

archive/issues_012319.json:
```json
{
    "body": "Assignee: jason, was\n\n```\nplot3d/plot3d.py: 83% (15 of 18)\nplot3d/list_plot3d.py: 25% (1 of 4)\nplot3d/parametric_plot3d.py: 20% (1 of 5)\n\n$ ../../sage -coverage sage/plot/plot3d/list_plot3d.py \n----------------------------------------------------------------------\nsage/plot/plot3d/list_plot3d.py\nSCORE sage/plot/plot3d/list_plot3d.py: 25% (1 of 4)\n\nMissing documentation:\n * list_plot3d_matrix(m, texture, **kwds):\n * list_plot3d_array_of_arrays(v, interpolation_type,texture, **kwds):\n * list_plot3d_tuples(v,interpolation_type, texture, **kwds):\n\n\n$ ./sage -coverage devel/sage/sage/plot/plot3d/plot3d.py \n----------------------------------------------------------------------\ndevel/sage/sage/plot/plot3d/plot3d.py\nERROR: Please add a `TestSuite(s).run()` doctest.\nSCORE devel/sage/sage/plot/plot3d/plot3d.py: 83% (15 of 18)\n\nMissing documentation:\n * triangle(self, a, b, c, color = None):\n * smooth_triangle(self, a, b, c, da, db, dc, color = None):\n * axes(scale=1, radius=None, **kwds):\n\n\n$ ../../sage -coverage sage/plot/plot3d/parametric_plot3d.py \n----------------------------------------------------------------------\nsage/plot/plot3d/parametric_plot3d.py\nSCORE sage/plot/plot3d/parametric_plot3d.py: 20% (1 of 5)\n\nMissing doctests:\n * _parametric_plot3d_curve(f, urange, plot_points, **kwds):\n * _parametric_plot3d_surface(f, urange, vrange, plot_points, boundary_style, **kwds):\n * adapt_if_symbolic(f):\n * adapt_to_callable(f, nargs=None):\n```\n\nBase ticket: #12024 bringing docs to 90%.\n\nIssue created by migration from https://trac.sagemath.org/ticket/12491\n\n",
    "closed_at": "2012-03-21T22:08:31Z",
    "created_at": "2012-02-10T13:50:07Z",
    "labels": [
        "component: graphics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.0",
    "title": "Bring three more plot3d files to 100% coverage",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12319",
    "user": "https://github.com/kcrisman"
}
```
Assignee: jason, was

```
plot3d/plot3d.py: 83% (15 of 18)
plot3d/list_plot3d.py: 25% (1 of 4)
plot3d/parametric_plot3d.py: 20% (1 of 5)

$ ../../sage -coverage sage/plot/plot3d/list_plot3d.py 
----------------------------------------------------------------------
sage/plot/plot3d/list_plot3d.py
SCORE sage/plot/plot3d/list_plot3d.py: 25% (1 of 4)

Missing documentation:
 * list_plot3d_matrix(m, texture, **kwds):
 * list_plot3d_array_of_arrays(v, interpolation_type,texture, **kwds):
 * list_plot3d_tuples(v,interpolation_type, texture, **kwds):


$ ./sage -coverage devel/sage/sage/plot/plot3d/plot3d.py 
----------------------------------------------------------------------
devel/sage/sage/plot/plot3d/plot3d.py
ERROR: Please add a `TestSuite(s).run()` doctest.
SCORE devel/sage/sage/plot/plot3d/plot3d.py: 83% (15 of 18)

Missing documentation:
 * triangle(self, a, b, c, color = None):
 * smooth_triangle(self, a, b, c, da, db, dc, color = None):
 * axes(scale=1, radius=None, **kwds):


$ ../../sage -coverage sage/plot/plot3d/parametric_plot3d.py 
----------------------------------------------------------------------
sage/plot/plot3d/parametric_plot3d.py
SCORE sage/plot/plot3d/parametric_plot3d.py: 20% (1 of 5)

Missing doctests:
 * _parametric_plot3d_curve(f, urange, plot_points, **kwds):
 * _parametric_plot3d_surface(f, urange, vrange, plot_points, boundary_style, **kwds):
 * adapt_if_symbolic(f):
 * adapt_to_callable(f, nargs=None):
```

Base ticket: #12024 bringing docs to 90%.

Issue created by migration from https://trac.sagemath.org/ticket/12491





---

archive/issue_comments_144801.json:
```json
{
    "body": "Just some notes...\n* `axes` appears to be used nowhere else, but since it is in a doctest, I won't remove it on this ticket.  See also some of the other constructions in the various 3d plot directories which perform similar functions.\n* `adapt_to_callable` is deprecated, as is a piece in it where we use function-call syntax.  Given that this was deprecated in #7008 (and let me tell you, figuring that out was nontrivial!) and Sage-4.1.2, from October 2009, I am going to remove this.",
    "created_at": "2012-02-11T01:54:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12319#issuecomment-144801",
    "user": "https://github.com/kcrisman"
}
```

Just some notes...
* `axes` appears to be used nowhere else, but since it is in a doctest, I won't remove it on this ticket.  See also some of the other constructions in the various 3d plot directories which perform similar functions.
* `adapt_to_callable` is deprecated, as is a piece in it where we use function-call syntax.  Given that this was deprecated in #7008 (and let me tell you, figuring that out was nontrivial!) and Sage-4.1.2, from October 2009, I am going to remove this.



---

archive/issue_comments_144802.json:
```json
{
    "body": "In addition, `adapt_if_symbolic`, while not deprecated, has been stated to be for internal use since [changeset 8271](http://trac.sagemath.org/sage_trac/changeset?new=8271%3A89ae58cb0bd1%40sage%2Fplot%2Fplot3d%2Fparametric_plot3d.py&old=8268%3Aea1f2da82d0f%40sage%2Fplot%2Fplot3d%2Fparametric_plot3d.py) and has not been used anywhere in Sage since [changeset 8272](http://trac.sagemath.org/sage_trac/changeset?new=8272%3A03f8ccee86a8%40sage%2Fplot%2Fplot3d%2Fparametric_plot3d.py&old=8271%3A89ae58cb0bd1%40sage%2Fplot%2Fplot3d%2Fparametric_plot3d.py) - January, 2008, Sage 2.10.1.\n\nSo I'm going to remove it.",
    "created_at": "2012-02-11T02:26:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12319#issuecomment-144802",
    "user": "https://github.com/kcrisman"
}
```

In addition, `adapt_if_symbolic`, while not deprecated, has been stated to be for internal use since [changeset 8271](http://trac.sagemath.org/sage_trac/changeset?new=8271%3A89ae58cb0bd1%40sage%2Fplot%2Fplot3d%2Fparametric_plot3d.py&old=8268%3Aea1f2da82d0f%40sage%2Fplot%2Fplot3d%2Fparametric_plot3d.py) and has not been used anywhere in Sage since [changeset 8272](http://trac.sagemath.org/sage_trac/changeset?new=8272%3A03f8ccee86a8%40sage%2Fplot%2Fplot3d%2Fparametric_plot3d.py&old=8271%3A89ae58cb0bd1%40sage%2Fplot%2Fplot3d%2Fparametric_plot3d.py) - January, 2008, Sage 2.10.1.

So I'm going to remove it.



---

archive/issue_comments_144803.json:
```json
{
    "body": "Based on 5.0.beta3",
    "created_at": "2012-02-11T02:48:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12319#issuecomment-144803",
    "user": "https://github.com/kcrisman"
}
```

Based on 5.0.beta3



---

archive/issue_comments_144804.json:
```json
{
    "body": "Attachment [trac_12491.patch](tarball://root/attachments/some-uuid/ticket12491/trac_12491.patch) by @kcrisman created at 2012-02-11 02:49:46\n\nIt seems to pass all tests, and I looked at all the examples I added.  Coverage is good.  Needs review!",
    "created_at": "2012-02-11T02:49:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12319#issuecomment-144804",
    "user": "https://github.com/kcrisman"
}
```

Attachment [trac_12491.patch](tarball://root/attachments/some-uuid/ticket12491/trac_12491.patch) by @kcrisman created at 2012-02-11 02:49:46

It seems to pass all tests, and I looked at all the examples I added.  Coverage is good.  Needs review!



---

archive/issue_comments_144805.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-02-11T02:49:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12319#issuecomment-144805",
    "user": "https://github.com/kcrisman"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_144806.json:
```json
{
    "body": "Apply trac_12491.patch, trac_12491-review.patch\n\n(for the patchbot). This looks fine; I found no problems except a couple of minor typos and formatting fixes. Also I flagged some doctests with `#indirect doctest` where necessary. Karl: if you're happy with my changes you can give this a positive review.",
    "created_at": "2012-03-12T20:53:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12319#issuecomment-144806",
    "user": "https://github.com/loefflerd"
}
```

Apply trac_12491.patch, trac_12491-review.patch

(for the patchbot). This looks fine; I found no problems except a couple of minor typos and formatting fixes. Also I flagged some doctests with `#indirect doctest` where necessary. Karl: if you're happy with my changes you can give this a positive review.



---

archive/issue_comments_144807.json:
```json
{
    "body": "Attachment [trac_12491-review.patch](tarball://root/attachments/some-uuid/ticket12491/trac_12491-review.patch) by @loefflerd created at 2012-03-12 23:08:03\n\nApply over previous patch",
    "created_at": "2012-03-12T23:08:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12319#issuecomment-144807",
    "user": "https://github.com/loefflerd"
}
```

Attachment [trac_12491-review.patch](tarball://root/attachments/some-uuid/ticket12491/trac_12491-review.patch) by @loefflerd created at 2012-03-12 23:08:03

Apply over previous patch



---

archive/issue_comments_144808.json:
```json
{
    "body": "Apply trac_12491.patch, trac_12491-review.patch\n\n(for the patchbot, which spotted a trailing whitespace character in my previous patch)",
    "created_at": "2012-03-12T23:08:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12319#issuecomment-144808",
    "user": "https://github.com/loefflerd"
}
```

Apply trac_12491.patch, trac_12491-review.patch

(for the patchbot, which spotted a trailing whitespace character in my previous patch)



---

archive/issue_comments_144809.json:
```json
{
    "body": "I guess I try to do the most minor stuff possible.  I don't have time to look at this right now, but I'll try to do so soon.\n\nWhat's up with the indirect stuff?  I assume this is for `sage -coverage`?  I only check whether it *has* a doctest, not that stuff.  Thanks.",
    "created_at": "2012-03-13T15:07:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12319#issuecomment-144809",
    "user": "https://github.com/kcrisman"
}
```

I guess I try to do the most minor stuff possible.  I don't have time to look at this right now, but I'll try to do so soon.

What's up with the indirect stuff?  I assume this is for `sage -coverage`?  I only check whether it *has* a doctest, not that stuff.  Thanks.



---

archive/issue_comments_144810.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-03-13T18:36:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12319#issuecomment-144810",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_144811.json:
```json
{
    "body": "Replying to [comment:7 kcrisman]:\n> What's up with the indirect stuff?  I assume this is for `sage -coverage`?\n\n\nYes, exactly. The review patch looks good to me.\n\nBy the way, is it an issue that the instances of the `_Coordinates` class don't seem to be picklable?\n\n```\nsage/plot/plot3d/plot3d.py\nERROR: Please add a `TestSuite(s).run()` doctest.\nSCORE sage/plot/plot3d/plot3d.py: 100% (18 of 18)\n```\nBut if I add a `TestSuite` doctest, it fails: if I make this change:\n\n```diff\ndiff --git a/sage/plot/plot3d/plot3d.py b/sage/plot/plot3d/plot3d.py\n--- a/sage/plot/plot3d/plot3d.py\n+++ b/sage/plot/plot3d/plot3d.py\n@@ -108,8 +108,9 @@ class _Coordinates(object):\n \n             sage: from sage.plot.plot3d.plot3d import _ArbitraryCoordinates as \n             sage: x,y,z=var('x,y,z')\n-            sage: arb((x+z,y*z,z), z, (x,y))\n+            sage: c=arb((x+z,y*z,z), z, (x,y)); c\n             Arbitrary Coordinates coordinate transform (z in terms of x, y)\n+            sage: TestSuite(c).run()\n         \"\"\"\n         import inspect\n         all_vars=inspect.getargspec(self.transform).args[1:]\n```\nthen I get this failure:\n\n```\nsage -t  \"devel/sage-main/sage/plot/plot3d/plot3d.py\"       \n**********************************************************************\nFile \"/Users/palmieri/Desktop/Sage_stuff/sage_builds/sage-5.0.beta7-gcc/devel/sage-main/sage/plot/plot3d/plot3d.py\", line 113:\n    sage: TestSuite(c).run()\nExpected nothing\nGot:\n    Failure in _test_pickling:\n    Traceback (most recent call last):\n      File \"/Users/palmieri/Desktop/Sage_stuff/sage_builds/sage-5.0.beta7-gcc/local/lib/python/site-packages/sage/misc/sage_unittest.py\", line 275, in run\n        test_method(tester = tester)\n      File \"/Users/palmieri/Desktop/Sage_stuff/sage_builds/sage-5.0.beta7-gcc/local/lib/python/site-packages/sage/misc/sage_unittest.py\", line 499, in _test_pickling\n        tester.assertEqual(loads(dumps(self._instance)), self._instance)\n      File \"/Users/palmieri/Desktop/Sage_stuff/sage_builds/sage-5.0.beta7-gcc/local/lib/python2.7/unittest/case.py\", line 509, in assertEqual\n        assertion_func(first, second, msg=msg)\n      File \"/Users/palmieri/Desktop/Sage_stuff/sage_builds/sage-5.0.beta7-gcc/local/lib/python2.7/unittest/case.py\", line 502, in _baseAssertEqual\n        raise self.failureException(msg)\n    AssertionError: Arbitrary Coordinates coordinate transform (z in terms of x, y) != Arbitrary Coordinates coordinate transform (z in terms of x, y)\n    ------------------------------------------------------------\n    The following tests failed: _test_pickling\n```\nA doctest like `c == loads(dumps(c))` also fails. If this can be fixed, it probably should be, but on another ticket (unless it's trivial to do here).",
    "created_at": "2012-03-13T18:36:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12319#issuecomment-144811",
    "user": "https://github.com/jhpalmieri"
}
```

Replying to [comment:7 kcrisman]:
> What's up with the indirect stuff?  I assume this is for `sage -coverage`?


Yes, exactly. The review patch looks good to me.

By the way, is it an issue that the instances of the `_Coordinates` class don't seem to be picklable?

```
sage/plot/plot3d/plot3d.py
ERROR: Please add a `TestSuite(s).run()` doctest.
SCORE sage/plot/plot3d/plot3d.py: 100% (18 of 18)
```
But if I add a `TestSuite` doctest, it fails: if I make this change:

```diff
diff --git a/sage/plot/plot3d/plot3d.py b/sage/plot/plot3d/plot3d.py
--- a/sage/plot/plot3d/plot3d.py
+++ b/sage/plot/plot3d/plot3d.py
@@ -108,8 +108,9 @@ class _Coordinates(object):
 
             sage: from sage.plot.plot3d.plot3d import _ArbitraryCoordinates as 
             sage: x,y,z=var('x,y,z')
-            sage: arb((x+z,y*z,z), z, (x,y))
+            sage: c=arb((x+z,y*z,z), z, (x,y)); c
             Arbitrary Coordinates coordinate transform (z in terms of x, y)
+            sage: TestSuite(c).run()
         """
         import inspect
         all_vars=inspect.getargspec(self.transform).args[1:]
```
then I get this failure:

```
sage -t  "devel/sage-main/sage/plot/plot3d/plot3d.py"       
**********************************************************************
File "/Users/palmieri/Desktop/Sage_stuff/sage_builds/sage-5.0.beta7-gcc/devel/sage-main/sage/plot/plot3d/plot3d.py", line 113:
    sage: TestSuite(c).run()
Expected nothing
Got:
    Failure in _test_pickling:
    Traceback (most recent call last):
      File "/Users/palmieri/Desktop/Sage_stuff/sage_builds/sage-5.0.beta7-gcc/local/lib/python/site-packages/sage/misc/sage_unittest.py", line 275, in run
        test_method(tester = tester)
      File "/Users/palmieri/Desktop/Sage_stuff/sage_builds/sage-5.0.beta7-gcc/local/lib/python/site-packages/sage/misc/sage_unittest.py", line 499, in _test_pickling
        tester.assertEqual(loads(dumps(self._instance)), self._instance)
      File "/Users/palmieri/Desktop/Sage_stuff/sage_builds/sage-5.0.beta7-gcc/local/lib/python2.7/unittest/case.py", line 509, in assertEqual
        assertion_func(first, second, msg=msg)
      File "/Users/palmieri/Desktop/Sage_stuff/sage_builds/sage-5.0.beta7-gcc/local/lib/python2.7/unittest/case.py", line 502, in _baseAssertEqual
        raise self.failureException(msg)
    AssertionError: Arbitrary Coordinates coordinate transform (z in terms of x, y) != Arbitrary Coordinates coordinate transform (z in terms of x, y)
    ------------------------------------------------------------
    The following tests failed: _test_pickling
```
A doctest like `c == loads(dumps(c))` also fails. If this can be fixed, it probably should be, but on another ticket (unless it's trivial to do here).



---

archive/issue_comments_144812.json:
```json
{
    "body": "Thanks, John.  Definitely another ticket - this pickling stuff is always tricky.",
    "created_at": "2012-03-13T18:38:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12319#issuecomment-144812",
    "user": "https://github.com/kcrisman"
}
```

Thanks, John.  Definitely another ticket - this pickling stuff is always tricky.



---

archive/issue_events_033649.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-03-21T22:08:31Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12319",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12319#event-33649"
}
```



---

archive/issue_comments_144813.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-03-21T22:08:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12319#issuecomment-144813",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
