# Issue 12533: arbitrary precision LP solver backend

archive/issues_012361.json:
```json
{
    "assignees": [],
    "body": "There is currently no arbitrary precision LP solver backend available. It is sorely missed in some coding theory -related LP computations, see  #12418.\n\nOne option is to hook up [PPL](http://www.sagemath.org/doc/reference/sage/libs/ppl.html), another might be to hook up GLPK for this purpose. Both have the corresponding functionality, it's just not exposed (?) in P(C)ython for GLPK, and not hooked up as an LP backend in case of PPL.\n\nTo try this patch, **apply** [attachment: trac_12533_arbitrary_precision_LP_solver_backend_for_5.3_vb.patch.gz](https://github.com/sagemath/sage/files/ticket12533/trac_12533_arbitrary_precision_LP_solver_backend_for_5.3_vb.patch.gz)\n\nDepends on #13646\n\nAssignee: **@nathanncohen**\n\nCC:  jpang @kini @wdjoyner @nathanncohen @ppurka @vbraun @ptrrsn @dcoudert\n\nKeywords: **arbitrary precision, LP**\n\nReviewer: **David Coudert, Nathann Cohen, Dmitrii Pasechnik**\n\nAuthor: **Risan**\n\nMerged: **sage-5.5.beta2**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/12533_\n\n",
    "closed_at": "2012-11-13T08:20:35Z",
    "created_at": "2012-02-18T05:14:12Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20linear%20programming",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "arbitrary precision LP solver backend",
    "type": "issue",
    "updated_at": "2013-12-06T13:32:51Z",
    "url": "https://github.com/sagemath/sage/issues/12533",
    "user": "https://github.com/dimpase"
}
```
There is currently no arbitrary precision LP solver backend available. It is sorely missed in some coding theory -related LP computations, see  #12418.

One option is to hook up [PPL](http://www.sagemath.org/doc/reference/sage/libs/ppl.html), another might be to hook up GLPK for this purpose. Both have the corresponding functionality, it's just not exposed (?) in P(C)ython for GLPK, and not hooked up as an LP backend in case of PPL.

To try this patch, **apply** [attachment: trac_12533_arbitrary_precision_LP_solver_backend_for_5.3_vb.patch.gz](https://github.com/sagemath/sage/files/ticket12533/trac_12533_arbitrary_precision_LP_solver_backend_for_5.3_vb.patch.gz)

Depends on #13646

Assignee: **@nathanncohen**

CC:  jpang @kini @wdjoyner @nathanncohen @ppurka @vbraun @ptrrsn @dcoudert

Keywords: **arbitrary precision, LP**

Reviewer: **David Coudert, Nathann Cohen, Dmitrii Pasechnik**

Author: **Risan**

Merged: **sage-5.5.beta2**

_Issue created by migration from https://trac.sagemath.org/ticket/12533_





---

archive/issue_events_151622.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-02-18T05:14:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "milestone_number": null,
    "milestone_title": "sage-5.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151622"
}
```



---

archive/issue_events_151623.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-02-18T05:14:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20linear%20programming",
    "label_color": "0000ff",
    "label_name": "component: linear programming",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151623"
}
```



---

archive/issue_events_151624.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-02-18T05:14:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151624"
}
```



---

archive/issue_events_151625.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-02-18T05:14:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151625"
}
```



---

archive/issue_comments_140935.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nThe PPL Cython wrapper should be fully functional for LP solving, its just providing a different interface than the `MixedIntegerLinearProgram`. I always wanted to have this more integrated but I don't have to solve plain LP's often (at least not in that language).",
    "created_at": "2012-02-18T05:45:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140935",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:1'>Comment 1:</a>
The PPL Cython wrapper should be fully functional for LP solving, its just providing a different interface than the `MixedIntegerLinearProgram`. I always wanted to have this more integrated but I don't have to solve plain LP's often (at least not in that language).



---

archive/issue_comments_140936.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nThe file *[trac_12533_arbitrary_precision_LP_solver_backend.patch](https://github.com/sagemath/sage/files/ticket12533/trac_12533_arbitrary_precision_LP_solver_backend.patch.gz)* is a `PPL `backend for `MixedIntegerLinearProgram`. It works for all `MixedIntegerLinearProgram `functions related to general LP (excluding integer LP and binary LP) listed in http://www.sagemath.org/doc/reference/sage/numerical/mip.html, except for `set_binary`, `set_integer`, `set_real`, `write_lp`, `write_mps`.\n\nA new `MixedIntegerLinearProgram `with `PPL `as solver can be gotten by setting the `solver `parameter in `MixedIntegerLinearProgramming`'s constructor to `\"PPL\"`, e.g. `MixedIntegerLinearProgram(solver = \"PPL\")`\n\nThe additional feature of this backend is, it supports arbitrary precision calculations. We can get the exact optimal value by setting the `exact `parameter in `solve `method to `True`, i.e. `p.solve(exact = True)`. Similarly, we can get the exact optimal solution by setting the `exact `parameter in `get_values `to `True`, i.e. `p.get_values(exact = True, ...)`, which by default will return a `vector `over `QQ`. However, we can also opt for the usual format of the optimal solution, i.e. as a `dictionary `instead of a `vector `over `QQ`, by setting the `as_vector` parameter to `False`, e.g. `p.get_values(exact = True, as_vector = False).`",
    "created_at": "2012-02-26T13:05:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140936",
    "user": "https://github.com/ptrrsn"
}
```

<a id='comment:3'>Comment 3:</a>
The file *[trac_12533_arbitrary_precision_LP_solver_backend.patch](https://github.com/sagemath/sage/files/ticket12533/trac_12533_arbitrary_precision_LP_solver_backend.patch.gz)* is a `PPL `backend for `MixedIntegerLinearProgram`. It works for all `MixedIntegerLinearProgram `functions related to general LP (excluding integer LP and binary LP) listed in http://www.sagemath.org/doc/reference/sage/numerical/mip.html, except for `set_binary`, `set_integer`, `set_real`, `write_lp`, `write_mps`.

A new `MixedIntegerLinearProgram `with `PPL `as solver can be gotten by setting the `solver `parameter in `MixedIntegerLinearProgramming`'s constructor to `"PPL"`, e.g. `MixedIntegerLinearProgram(solver = "PPL")`

The additional feature of this backend is, it supports arbitrary precision calculations. We can get the exact optimal value by setting the `exact `parameter in `solve `method to `True`, i.e. `p.solve(exact = True)`. Similarly, we can get the exact optimal solution by setting the `exact `parameter in `get_values `to `True`, i.e. `p.get_values(exact = True, ...)`, which by default will return a `vector `over `QQ`. However, we can also opt for the usual format of the optimal solution, i.e. as a `dictionary `instead of a `vector `over `QQ`, by setting the `as_vector` parameter to `False`, e.g. `p.get_values(exact = True, as_vector = False).`



---

archive/issue_events_151626.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-02-26T13:26:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151626"
}
```



---

archive/issue_comments_140937.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nWow !!! Amazing patch !! `O_o`\n\nShould this ticket be in \"needs_review\" state now ?\n\nI have not looked deeply into your patch (well, your comment was posted 10 minutes ago `:-P`) and besides my 'Wow-Impressive Work\" comment I had a question to ask : is PPL an optional package ? Some parts of your code behave as if it were \n\n```\n \t865\t    elif solver == \"PPL\": \n \t866\t        try: \n \t867\t            from sage.numerical.backends.ppl_backend import PPLBackend \n \t868\t            default_solver = solver \n \t869\t        except ImportError: \n \t870\t            raise ValueError(\"PPL is not available. Please refer to the documentation to install it.\") \n```\nBut the line you added in module_list.py makes me think it is standard. Also, that line :\n\n```\nfor s in [\"CPLEX\", \"GUROBI\", \"Coin\", \"GLPK\", \"PPL\"]: \n```\nhas no meaning : Sage tries to find the first solver available on the machine, and GLPK is always available. Many of your methods need to be doctested and/or documented. The comments `# optional - Nonexistent_LP_solver` should also be replaced either by `#optional - PPL` if PPL is optional, and plainly removed otherwise.\n\nWow. Impressive work `:-)`\nI hope I will be able to expose the GLPK function too at some point so that we would have some way to compare the results... But Wow... `:-)`\n\nNathann",
    "created_at": "2012-02-26T13:26:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140937",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:4'>Comment 4:</a>
Wow !!! Amazing patch !! `O_o`

Should this ticket be in "needs_review" state now ?

I have not looked deeply into your patch (well, your comment was posted 10 minutes ago `:-P`) and besides my 'Wow-Impressive Work" comment I had a question to ask : is PPL an optional package ? Some parts of your code behave as if it were 

```
 	865	    elif solver == "PPL": 
 	866	        try: 
 	867	            from sage.numerical.backends.ppl_backend import PPLBackend 
 	868	            default_solver = solver 
 	869	        except ImportError: 
 	870	            raise ValueError("PPL is not available. Please refer to the documentation to install it.") 
```
But the line you added in module_list.py makes me think it is standard. Also, that line :

```
for s in ["CPLEX", "GUROBI", "Coin", "GLPK", "PPL"]: 
```
has no meaning : Sage tries to find the first solver available on the machine, and GLPK is always available. Many of your methods need to be doctested and/or documented. The comments `# optional - Nonexistent_LP_solver` should also be replaced either by `#optional - PPL` if PPL is optional, and plainly removed otherwise.

Wow. Impressive work `:-)`
I hope I will be able to expose the GLPK function too at some point so that we would have some way to compare the results... But Wow... `:-)`

Nathann



---

archive/issue_comments_140938.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nReplying to [@nathanncohen](#comment%3A4):\n\n>  \t865\t    elif solver == \"PPL\": \n\nindeed, PPL is a standard package now (I guess this check for its availability stems from some early code, when\nit wasn't standard). So this check should be removed.\n\nThen, it needs an example where one can see the benefit of the arbitrary precision (already an example with 2 variables\nshould do). The example I got from the author (Hi, Risan!). I modified the last line, as it was following an old design:\n\n```\np = MixedIntegerLinearProgram(solver = \"PPL\")\nx = p.new_variable()\nn = 100000000000000000000000000000000000000000000000000000000000000000000000000000000000000\np.set_objective(10 * n * x[1] + 50 * n * x[2])\np.add_constraint(10 * n * x[1] + 2 * n * x[2], max = 40 * n)\np.add_constraint(15 * n * x[1] + 30 * n * x[2], max = 40 * n)\nprint p.solve()\nprint p.solve(exact=True)\n```\nis probably good enough. \n\nLastly, the parameter `as_vector` should be set to `False` by default, not to `True`, to be consistent with the \nother LP interfaces.",
    "created_at": "2012-02-26T23:32:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140938",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:5'>Comment 5:</a>
Replying to [@nathanncohen](#comment%3A4):

>  	865	    elif solver == "PPL": 

indeed, PPL is a standard package now (I guess this check for its availability stems from some early code, when
it wasn't standard). So this check should be removed.

Then, it needs an example where one can see the benefit of the arbitrary precision (already an example with 2 variables
should do). The example I got from the author (Hi, Risan!). I modified the last line, as it was following an old design:

```
p = MixedIntegerLinearProgram(solver = "PPL")
x = p.new_variable()
n = 100000000000000000000000000000000000000000000000000000000000000000000000000000000000000
p.set_objective(10 * n * x[1] + 50 * n * x[2])
p.add_constraint(10 * n * x[1] + 2 * n * x[2], max = 40 * n)
p.add_constraint(15 * n * x[1] + 30 * n * x[2], max = 40 * n)
print p.solve()
print p.solve(exact=True)
```
is probably good enough. 

Lastly, the parameter `as_vector` should be set to `False` by default, not to `True`, to be consistent with the 
other LP interfaces.



---

archive/issue_events_151627.json:
```json
{
    "actor": "https://github.com/ptrrsn",
    "created_at": "2012-03-06T11:48:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151627"
}
```



---

archive/issue_events_151628.json:
```json
{
    "actor": "https://github.com/ptrrsn",
    "created_at": "2012-03-06T11:48:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151628"
}
```



---

archive/issue_comments_140939.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nHi Mr. Nathann and Prof. Dima,\n\nThank you!\n\nI have finished the documentation. In addition, I have removed the redundant codes and setting the as_vector to False by default (and also fixing some bugs). In the attachment is the latest version of it.\n\nNow, the status was changed to Need Review.\n\nThank you\n\nRisan",
    "created_at": "2012-03-06T11:48:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140939",
    "user": "https://github.com/ptrrsn"
}
```

<a id='comment:6'>Comment 6:</a>
Hi Mr. Nathann and Prof. Dima,

Thank you!

I have finished the documentation. In addition, I have removed the redundant codes and setting the as_vector to False by default (and also fixing some bugs). In the attachment is the latest version of it.

Now, the status was changed to Need Review.

Thank you

Risan



---

archive/issue_comments_140940.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nI like this patch !!!\n\nI add a brief look at the code, and I found some functions always returning True or always False in `ppl_backend.pyx`. I suppose it is because current version is still in devel phase (indeed it's a lot of work).\n\n```\n  cpdef bint is_variable_binary(self, int index): \n \t750\t        \"\"\" \n \t751\t        Test whether the given variable is of binary type. \n...\n \t768\t        \"\"\" \n \t769\t        return False \n \t770\t \n \t771\t    cpdef bint is_variable_integer(self, int index): \n \t772\t        \"\"\" \n \t773\t        Test whether the given variable is of integer type. \n...\n \t789\t        \"\"\" \n \t790\t        return False \n \t791\t \n \t792\t    cpdef bint is_variable_continuous(self, int index): \n \t793\t        \"\"\" \n \t794\t        Test whether the given variable is of continuous/real type. \n...\n \t811\t        \"\"\" \n \t812\t        return True \n \t813\n```\n\nAlso, you could mention somewhere that PPL does not provide access to dual variables (my understanding from the documentation).\n\nNice work.",
    "created_at": "2012-03-07T12:48:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140940",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:7'>Comment 7:</a>
I like this patch !!!

I add a brief look at the code, and I found some functions always returning True or always False in `ppl_backend.pyx`. I suppose it is because current version is still in devel phase (indeed it's a lot of work).

```
  cpdef bint is_variable_binary(self, int index): 
 	750	        """ 
 	751	        Test whether the given variable is of binary type. 
...
 	768	        """ 
 	769	        return False 
 	770	 
 	771	    cpdef bint is_variable_integer(self, int index): 
 	772	        """ 
 	773	        Test whether the given variable is of integer type. 
...
 	789	        """ 
 	790	        return False 
 	791	 
 	792	    cpdef bint is_variable_continuous(self, int index): 
 	793	        """ 
 	794	        Test whether the given variable is of continuous/real type. 
...
 	811	        """ 
 	812	        return True 
 	813
```

Also, you could mention somewhere that PPL does not provide access to dual variables (my understanding from the documentation).

Nice work.



---

archive/issue_comments_140941.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nDavid, it actually is because this solver does not support integer variables. It solves exactly, but only continuous problems. Hence these methods are actually no problem. I thought that p.new_variable(binary = True) should raise an exception, however. What this patch actually needs is a big and deep review, because it really is a very nice thing `:-)`",
    "created_at": "2012-03-07T12:51:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140941",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:8'>Comment 8:</a>
David, it actually is because this solver does not support integer variables. It solves exactly, but only continuous problems. Hence these methods are actually no problem. I thought that p.new_variable(binary = True) should raise an exception, however. What this patch actually needs is a big and deep review, because it really is a very nice thing `:-)`



---

archive/issue_events_151629.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2012-03-13T15:04:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151629"
}
```



---

archive/issue_events_151630.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2012-03-13T15:04:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151630"
}
```



---

archive/issue_comments_140942.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nA couple of doctests fail on the current beta (see patchbot)",
    "created_at": "2012-03-13T15:04:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140942",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:9'>Comment 9:</a>
A couple of doctests fail on the current beta (see patchbot)



---

archive/issue_comments_140943.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nReplying to [@loefflerd](#comment%3A9):\n> A couple of doctests fail on the current beta (see patchbot)\n\nI have no clue where to look. Could you please provide a link?",
    "created_at": "2012-03-13T15:46:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140943",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:10'>Comment 10:</a>
Replying to [@loefflerd](#comment%3A9):
> A couple of doctests fail on the current beta (see patchbot)

I have no clue where to look. Could you please provide a link?



---

archive/issue_comments_140944.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nDima - it's the big circular gray icon at the top of this page - i.e. http://patchbot.sagemath.org/ticket/12533/\n\nI can fix this once I get to Portland if you want, also fix up some formatting issues.",
    "created_at": "2012-03-13T15:56:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140944",
    "user": "https://github.com/kini"
}
```

<a id='comment:11'>Comment 11:</a>
Dima - it's the big circular gray icon at the top of this page - i.e. http://patchbot.sagemath.org/ticket/12533/

I can fix this once I get to Portland if you want, also fix up some formatting issues.



---

archive/issue_comments_140945.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nReplying to [@kini](#comment%3A11):\n> Dima - it's the big circular gray icon at the top of this page - i.e. http://patchbot.sagemath.org/ticket/12533/\n> \n> I can fix this once I get to Portland if you want, also fix up some formatting issues.\n\nyeah, OK, indeed, I forgot...\n\nBy the way, IMHO the following doctest (in ppl.pyx) won't fly:\n\n```\n \t535\t            sage: MIP_Problem(0) \n \t536\t            <sage.libs.ppl.MIP_Problem object at 0x7fae10fab5b8> \n```\nlooks very dodgy.",
    "created_at": "2012-03-13T16:12:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140945",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:12'>Comment 12:</a>
Replying to [@kini](#comment%3A11):
> Dima - it's the big circular gray icon at the top of this page - i.e. http://patchbot.sagemath.org/ticket/12533/
> 
> I can fix this once I get to Portland if you want, also fix up some formatting issues.

yeah, OK, indeed, I forgot...

By the way, IMHO the following doctest (in ppl.pyx) won't fly:

```
 	535	            sage: MIP_Problem(0) 
 	536	            <sage.libs.ppl.MIP_Problem object at 0x7fae10fab5b8> 
```
looks very dodgy.



---

archive/issue_comments_140946.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nYeah, the memory address should be elided, of course.",
    "created_at": "2012-03-13T16:21:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140946",
    "user": "https://github.com/kini"
}
```

<a id='comment:13'>Comment 13:</a>
Yeah, the memory address should be elided, of course.



---

archive/issue_events_151631.json:
```json
{
    "actor": "https://github.com/ptrrsn",
    "created_at": "2012-03-17T20:48:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151631"
}
```



---

archive/issue_events_151632.json:
```json
{
    "actor": "https://github.com/ptrrsn",
    "created_at": "2012-03-17T20:48:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151632"
}
```



---

archive/issue_comments_140947.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nThank you! I have fixed the doctesting errors.",
    "created_at": "2012-03-17T20:48:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140947",
    "user": "https://github.com/ptrrsn"
}
```

<a id='comment:14'>Comment 14:</a>
Thank you! I have fixed the doctesting errors.



---

archive/issue_events_151633.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2012-03-18T12:42:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151633"
}
```



---

archive/issue_events_151634.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2012-03-18T12:42:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151634"
}
```



---

archive/issue_comments_140948.json:
```json
{
    "body": "Reviewer: **David Coudert**",
    "created_at": "2012-03-18T12:42:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140948",
    "user": "https://github.com/dcoudert"
}
```

Reviewer: **David Coudert**



---

archive/issue_comments_140949.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nHello,\n\nI can install the patch on sage-5.0.beta8 and all long tests are OK (all involved files).\nThe documentation is build correctly and displayed properly.\n\nHowever, I did some test based on the example of the `optimizing_point` function and got a segfault... \n\n```\nsage: from sage.libs.ppl import Variable, Constraint_System, MIP_Problem \nsage: x = Variable(0) \nsage: y = Variable(1) \nsage: m = MIP_Problem() \nsage: m.add_space_dimensions_and_embed(2) \nsage: m.add_constraint(x >= 0) \nsage: m.add_constraint(y >= 0) \nsage: m.add_constraint(3 * x + 5 * y <= 10) \nsage: m.set_objective_function(x + y) \nsage: m.optimizing_point() \n[10/3, 0] \nsage: z = Variable(2)\nsage: m.add_constraint(z >= -3)\nterminate called after throwing an instance of 'std::invalid_argument'\n  what():  PPL::MIP_Problem::add_constraint(c):\nc.space_dimension() == 3 exceeds this->space_dimension == 2.\n...\n/path-to-sage/sage-5.0.beta8/spkg/bin/sage: line 308: 29045 Aborted                 (core dumped) sage-ipython \"$@\" -i\n```\n\nSome tests should be added somewhere.\n\nThis will be a great patch!",
    "created_at": "2012-03-18T12:42:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140949",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:15'>Comment 15:</a>
Hello,

I can install the patch on sage-5.0.beta8 and all long tests are OK (all involved files).
The documentation is build correctly and displayed properly.

However, I did some test based on the example of the `optimizing_point` function and got a segfault... 

```
sage: from sage.libs.ppl import Variable, Constraint_System, MIP_Problem 
sage: x = Variable(0) 
sage: y = Variable(1) 
sage: m = MIP_Problem() 
sage: m.add_space_dimensions_and_embed(2) 
sage: m.add_constraint(x >= 0) 
sage: m.add_constraint(y >= 0) 
sage: m.add_constraint(3 * x + 5 * y <= 10) 
sage: m.set_objective_function(x + y) 
sage: m.optimizing_point() 
[10/3, 0] 
sage: z = Variable(2)
sage: m.add_constraint(z >= -3)
terminate called after throwing an instance of 'std::invalid_argument'
  what():  PPL::MIP_Problem::add_constraint(c):
c.space_dimension() == 3 exceeds this->space_dimension == 2.
...
/path-to-sage/sage-5.0.beta8/spkg/bin/sage: line 308: 29045 Aborted                 (core dumped) sage-ipython "$@" -i
```

Some tests should be added somewhere.

This will be a great patch!



---

archive/issue_comments_140950.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nReplying to [@dcoudert](#comment%3A15):\n> Hello,\n> \n> I can install the patch on sage-5.0.beta8 and all long tests are OK (all involved files).\n> The documentation is build correctly and displayed properly.\n> \n> However, I did some test based on the example of the `optimizing_point` function and got a segfault... \n> \n> ```\n> sage: from sage.libs.ppl import Variable, Constraint_System, MIP_Problem \n> sage: x = Variable(0) \n> sage: y = Variable(1) \n> sage: m = MIP_Problem() \n> sage: m.add_space_dimensions_and_embed(2) \n> sage: m.add_constraint(x >= 0) \n> sage: m.add_constraint(y >= 0) \n> sage: m.add_constraint(3 * x + 5 * y <= 10) \n> sage: m.set_objective_function(x + y) \n> sage: m.optimizing_point() \n> [10/3, 0] \n> sage: z = Variable(2)\n> sage: m.add_constraint(z >= -3)\n> terminate called after throwing an instance of 'std::invalid_argument'\n>   what():  PPL::MIP_Problem::add_constraint(c):\n> c.space_dimension() == 3 exceeds this->space_dimension == 2.\n> ...\n> /path-to-sage/sage-5.0.beta8/spkg/bin/sage: line 308: 29045 Aborted                 (core dumped) sage-ipython \"$@\" -i\n> ```\n> \n> Some tests should be added somewhere.\n\nHi, thanks for your feedback!\n\nIt is actually not a bug. The statement \"m.add_space_dimensions_and_embed(2)\" increases the space dimension of the MIP_Problem from 0 (default) to 2. However, z is a variable in the third dimension (the number 2 in \"z = Variable(2)\" means the dimension of this variable is 2, which means it is in the third dimension since the numbering starts from zero). Since the dimension of the variable exceeds the space dimension of the MIP_Problem, it gives error.\n\nAn extra line should be added to make it works:\nsage: z = Variable(2)\nsage: m.add_space_dimensions_and_embed(1)\nsage: m.add_constraint(z >= -3)\n\n> This will be a great patch!\n\nThank you!",
    "created_at": "2012-03-18T16:24:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140950",
    "user": "https://github.com/ptrrsn"
}
```

<a id='comment:16'>Comment 16:</a>
Replying to [@dcoudert](#comment%3A15):
> Hello,
> 
> I can install the patch on sage-5.0.beta8 and all long tests are OK (all involved files).
> The documentation is build correctly and displayed properly.
> 
> However, I did some test based on the example of the `optimizing_point` function and got a segfault... 
> 
> ```
> sage: from sage.libs.ppl import Variable, Constraint_System, MIP_Problem 
> sage: x = Variable(0) 
> sage: y = Variable(1) 
> sage: m = MIP_Problem() 
> sage: m.add_space_dimensions_and_embed(2) 
> sage: m.add_constraint(x >= 0) 
> sage: m.add_constraint(y >= 0) 
> sage: m.add_constraint(3 * x + 5 * y <= 10) 
> sage: m.set_objective_function(x + y) 
> sage: m.optimizing_point() 
> [10/3, 0] 
> sage: z = Variable(2)
> sage: m.add_constraint(z >= -3)
> terminate called after throwing an instance of 'std::invalid_argument'
>   what():  PPL::MIP_Problem::add_constraint(c):
> c.space_dimension() == 3 exceeds this->space_dimension == 2.
> ...
> /path-to-sage/sage-5.0.beta8/spkg/bin/sage: line 308: 29045 Aborted                 (core dumped) sage-ipython "$@" -i
> ```
> 
> Some tests should be added somewhere.

Hi, thanks for your feedback!

It is actually not a bug. The statement "m.add_space_dimensions_and_embed(2)" increases the space dimension of the MIP_Problem from 0 (default) to 2. However, z is a variable in the third dimension (the number 2 in "z = Variable(2)" means the dimension of this variable is 2, which means it is in the third dimension since the numbering starts from zero). Since the dimension of the variable exceeds the space dimension of the MIP_Problem, it gives error.

An extra line should be added to make it works:
sage: z = Variable(2)
sage: m.add_space_dimensions_and_embed(1)
sage: m.add_constraint(z >= -3)

> This will be a great patch!

Thank you!



---

archive/issue_events_151635.json:
```json
{
    "actor": "https://github.com/ptrrsn",
    "created_at": "2012-03-18T16:24:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151635"
}
```



---

archive/issue_events_151636.json:
```json
{
    "actor": "https://github.com/ptrrsn",
    "created_at": "2012-03-18T16:24:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151636"
}
```



---

archive/issue_comments_140951.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nIt's not only giving an error, it crashed my sage session.\n\nWouldn't it be possible to add some test to prevent such behavior? I think it would be much smarter than a crash.",
    "created_at": "2012-03-18T16:34:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140951",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:17'>Comment 17:</a>
It's not only giving an error, it crashed my sage session.

Wouldn't it be possible to add some test to prevent such behavior? I think it would be much smarter than a crash.



---

archive/issue_events_151637.json:
```json
{
    "actor": "https://github.com/ptrrsn",
    "created_at": "2012-03-18T16:53:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151637"
}
```



---

archive/issue_events_151638.json:
```json
{
    "actor": "https://github.com/ptrrsn",
    "created_at": "2012-03-18T16:53:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151638"
}
```



---

archive/issue_comments_140952.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nReplying to [@dcoudert](#comment%3A17):\n\n> It's not only giving an error, it crashed my sage session. Wouldn't it be possible to add some test to prevent such behavior? I think it would be much smarter than a crash.\n\nI see. Yes, it is indeed troublesome. Now I realize that I also have not given enough exception handling in many other parts. I will fix them.\n\nThank you.",
    "created_at": "2012-03-18T16:53:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140952",
    "user": "https://github.com/ptrrsn"
}
```

<a id='comment:18'>Comment 18:</a>
Replying to [@dcoudert](#comment%3A17):

> It's not only giving an error, it crashed my sage session. Wouldn't it be possible to add some test to prevent such behavior? I think it would be much smarter than a crash.

I see. Yes, it is indeed troublesome. Now I realize that I also have not given enough exception handling in many other parts. I will fix them.

Thank you.



---

archive/issue_comments_140953.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nIts a bit tricky because the `PPL_Generator` C++ class has a private ctor and declaring Cython exceptions while returning a const reference has a bug. I'm pretty sure we need to copy the returned `PPL_Generator` in `optimize_point` and other functions.\n\nAlso, can we make `optimize_point` return a PPL point and not a list of gmp rationals? We needlessly deviate from the PPL api here.",
    "created_at": "2012-03-18T17:44:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140953",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:19'>Comment 19:</a>
Its a bit tricky because the `PPL_Generator` C++ class has a private ctor and declaring Cython exceptions while returning a const reference has a bug. I'm pretty sure we need to copy the returned `PPL_Generator` in `optimize_point` and other functions.

Also, can we make `optimize_point` return a PPL point and not a list of gmp rationals? We needlessly deviate from the PPL api here.



---

archive/issue_comments_140954.json:
```json
{
    "body": "Initial patch",
    "created_at": "2012-03-18T18:27:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140954",
    "user": "https://github.com/vbraun"
}
```

Initial patch



---

archive/issue_comments_140955.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nAttachment: **[trac_12533_catch_ppl_exception.patch.gz](https://github.com/sagemath/sage/files/ticket12533/trac_12533_catch_ppl_exception.patch.gz)**\n\nI've added a patch that catches the C++ exceptions and shows how to work around Cython/C++ issues in `optimizing_point()`.\n\nThings that need to be done:\n* `MIP_Problem` should derive from `_mutable_or_immutable` just like the polyhedron class. All mutating methods need to check that the `MIP_Problem` is mutable.\n* Doctests should be added for all caught C++ exceptions (see PPL documentation for which methods can raise exceptions)",
    "created_at": "2012-03-18T18:31:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140955",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:20'>Comment 20:</a>
Attachment: **[trac_12533_catch_ppl_exception.patch.gz](https://github.com/sagemath/sage/files/ticket12533/trac_12533_catch_ppl_exception.patch.gz)**

I've added a patch that catches the C++ exceptions and shows how to work around Cython/C++ issues in `optimizing_point()`.

Things that need to be done:
* `MIP_Problem` should derive from `_mutable_or_immutable` just like the polyhedron class. All mutating methods need to check that the `MIP_Problem` is mutable.
* Doctests should be added for all caught C++ exceptions (see PPL documentation for which methods can raise exceptions)



---

archive/issue_comments_140956.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nReplying to [@vbraun](#comment%3A20):\n\n> I've added a patch that catches the C++ exceptions and shows how to work around Cython/C++ issues in `optimizing_point()`.\n\nWow, that is a great help. Thank you!",
    "created_at": "2012-03-19T15:08:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140956",
    "user": "https://github.com/ptrrsn"
}
```

<a id='comment:21'>Comment 21:</a>
Replying to [@vbraun](#comment%3A20):

> I've added a patch that catches the C++ exceptions and shows how to work around Cython/C++ issues in `optimizing_point()`.

Wow, that is a great help. Thank you!



---

archive/issue_comments_140957.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nReplying to [@vbraun](#comment%3A20):\n> Doctests should be added for all caught C++ exceptions\n\nAbsolutely!",
    "created_at": "2012-03-27T10:31:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140957",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:22'>Comment 22:</a>
Replying to [@vbraun](#comment%3A20):
> Doctests should be added for all caught C++ exceptions

Absolutely!



---

archive/issue_events_151639.json:
```json
{
    "actor": "https://github.com/ptrrsn",
    "created_at": "2012-05-08T22:37:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151639"
}
```



---

archive/issue_events_151640.json:
```json
{
    "actor": "https://github.com/ptrrsn",
    "created_at": "2012-05-08T22:37:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151640"
}
```



---

archive/issue_comments_140958.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nHelloooooooo Risan !!!\n\nI just went over your patch, and some comments follow. Thank you very much for the work you put into that ! `:-)`\n\n**ppl.pyx**\n\n* MIP_Problem : PPL can only solve continuous Linear Programs, can't it ? In this case why \"MIP_*\", unless it means something different from \"Mixed Integer Program\" ?\n* MIP_Problem.optimization_mode() prints something but does not return anything\n* MIP_Problem returns dictionaries : in MixedIntegerLinearProgram we raise an exception for unbounded/infeasible problems, and return the objective's value otherwise. Just mentionning it in case you may like it, of course that's totally up to you ! I still think it wou   * ld be easier to return, for instance, a string (unbounded/infeasible) when the problem has no solution, and the result otherwise.\n* optimal_value does not only return the objective value, it also solves the problem ! I think the docstring should be updated --> if the users calls this function several times, are the computations made over and over ?\n* optimization_mode and set_optimization_mode : we often do both in a unique function, i.e. a method with optional arguments such that optimization_mode() returns the mode and optimization_mode(-1) defines it as a minimization problem. I just noticed that it was not the case at all for MixedIntegerLinearProgram methods, but I think we ought to change that :-)\n* is_satisfiable : does it also solve the problem ? I mean, if users type \"if p.is_satisfiable(): a = p.optimal_value()\" does it solve it twice ? The docstrings should say something about that.\n* what is the difference between optimal_value and evaluate_objective_function ? In particular the code seems to be pretty similar, so one function should probably call the other if two are necessary\n* OK : by looking at the docstring I have no idea what it does or what the invariants are, but of course it may also be that I am not part of the intended audience for this class\n\n**sage/libs/ppl_ files**\n\n* Are these files part of the ppl spkg ? If so they should not be modified by a patch, and the spkg itself should be updated.. That's really a lot of work for nothing, but that's how things are done here until we change it `:-/`\n\n**mip.pyx**\n\n* Why would you have to add anything to get_values and solve ? The flags you add would create problems instantly if the backend solver is not PPL !! I think nothing needs to be changed in that file --> if the backend is ppl then the values returned will be exact, otherwise they will just be the usual ones. But I do not see why these functions should be changed `O_o`\n\n**ppl_backend.pyx**\n\n* All functions should be documented/tested, even 'cutsom ones' like ``print_data``. Actually ``sage -coverage <filename>`` should never have to complain `:-)`\n* same thing with init_mip\n* add_variable[s] say that the variable are positive by default. Are they indeed ?\n* \"set_variable_type\" -- I think the best is for this method's code to be something like \"raise Exception('This backend does not handle integer variables ! Read the doc !')\"\n* why do you keep \"exact\" in the names of your get_values functions ? It would be easier to name then get_values, as anyway all the values given by the ppl interface are exact ?!\n\n**Others**\n\n* Is ppl.pyx part of the documentation ? At least ppl_backend is not, so you should add it to doc/en/reference/numerical.rst\n* Some \"advertisement\" should be added to the doc. In many places the solvers are listed (ok, perhaps we should only list them at *one* place), so that users can find out that *exact* answer are returned when the solver is ppl\n* Variables : are they automatically strictly positive ? This is the default in the MIP class (because it is the default of the API we interface), and if PPL acts any differently this would mean that results would be different according to whether PPL or GLPK is used as a backend !\n* The patch *does not apply* on 5.0-rc1, so I can not even check whether tests pass !\n\nThank you again `:-)`\n\nNathann",
    "created_at": "2012-05-11T09:34:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140958",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:24'>Comment 24:</a>
Helloooooooo Risan !!!

I just went over your patch, and some comments follow. Thank you very much for the work you put into that ! `:-)`

**ppl.pyx**

* MIP_Problem : PPL can only solve continuous Linear Programs, can't it ? In this case why "MIP_*", unless it means something different from "Mixed Integer Program" ?
* MIP_Problem.optimization_mode() prints something but does not return anything
* MIP_Problem returns dictionaries : in MixedIntegerLinearProgram we raise an exception for unbounded/infeasible problems, and return the objective's value otherwise. Just mentionning it in case you may like it, of course that's totally up to you ! I still think it wou   * ld be easier to return, for instance, a string (unbounded/infeasible) when the problem has no solution, and the result otherwise.
* optimal_value does not only return the objective value, it also solves the problem ! I think the docstring should be updated --> if the users calls this function several times, are the computations made over and over ?
* optimization_mode and set_optimization_mode : we often do both in a unique function, i.e. a method with optional arguments such that optimization_mode() returns the mode and optimization_mode(-1) defines it as a minimization problem. I just noticed that it was not the case at all for MixedIntegerLinearProgram methods, but I think we ought to change that :-)
* is_satisfiable : does it also solve the problem ? I mean, if users type "if p.is_satisfiable(): a = p.optimal_value()" does it solve it twice ? The docstrings should say something about that.
* what is the difference between optimal_value and evaluate_objective_function ? In particular the code seems to be pretty similar, so one function should probably call the other if two are necessary
* OK : by looking at the docstring I have no idea what it does or what the invariants are, but of course it may also be that I am not part of the intended audience for this class

**sage/libs/ppl_ files**

* Are these files part of the ppl spkg ? If so they should not be modified by a patch, and the spkg itself should be updated.. That's really a lot of work for nothing, but that's how things are done here until we change it `:-/`

**mip.pyx**

* Why would you have to add anything to get_values and solve ? The flags you add would create problems instantly if the backend solver is not PPL !! I think nothing needs to be changed in that file --> if the backend is ppl then the values returned will be exact, otherwise they will just be the usual ones. But I do not see why these functions should be changed `O_o`

**ppl_backend.pyx**

* All functions should be documented/tested, even 'cutsom ones' like ``print_data``. Actually ``sage -coverage <filename>`` should never have to complain `:-)`
* same thing with init_mip
* add_variable[s] say that the variable are positive by default. Are they indeed ?
* "set_variable_type" -- I think the best is for this method's code to be something like "raise Exception('This backend does not handle integer variables ! Read the doc !')"
* why do you keep "exact" in the names of your get_values functions ? It would be easier to name then get_values, as anyway all the values given by the ppl interface are exact ?!

**Others**

* Is ppl.pyx part of the documentation ? At least ppl_backend is not, so you should add it to doc/en/reference/numerical.rst
* Some "advertisement" should be added to the doc. In many places the solvers are listed (ok, perhaps we should only list them at *one* place), so that users can find out that *exact* answer are returned when the solver is ppl
* Variables : are they automatically strictly positive ? This is the default in the MIP class (because it is the default of the API we interface), and if PPL acts any differently this would mean that results would be different according to whether PPL or GLPK is used as a backend !
* The patch *does not apply* on 5.0-rc1, so I can not even check whether tests pass !

Thank you again `:-)`

Nathann



---

archive/issue_events_151641.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-05-11T09:34:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151641"
}
```



---

archive/issue_events_151642.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-05-11T09:34:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151642"
}
```



---

archive/issue_comments_140959.json:
```json
{
    "body": "apply to $SAGE_ROOT/devel/sage",
    "created_at": "2012-05-13T17:40:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140959",
    "user": "https://github.com/kini"
}
```

apply to $SAGE_ROOT/devel/sage



---

archive/issue_comments_140960.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nAttachment: **[trac_12533-rebased.patch.gz](https://github.com/sagemath/sage/files/ticket12533/trac_12533-rebased.patch.gz)**\n\nI rebased Risan's patch to 5.0.rc1. I also removed trailing whitespace from the patch.",
    "created_at": "2012-05-13T17:40:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140960",
    "user": "https://github.com/kini"
}
```

<a id='comment:25'>Comment 25:</a>
Attachment: **[trac_12533-rebased.patch.gz](https://github.com/sagemath/sage/files/ticket12533/trac_12533-rebased.patch.gz)**

I rebased Risan's patch to 5.0.rc1. I also removed trailing whitespace from the patch.



---

archive/issue_comments_140961.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nReplying to [@nathanncohen](#comment%3A24):\n\nHell([o]*10) Nathann [!]*5\n\n> **ppl.pyx**\n> \n> * MIP_Problem : PPL can only solve continuous Linear Programs, can't it ? In this case why \"MIP_*\", unless it means something different from \"Mixed Integer Program\" ?\n\nWe only have `MixedIntegerLinearProgram`, but no `LinearProgram`, right?\nWhile the latter might be a meaningful addition, it is certainly beyond the scope of this ticket, I think...\n\n[...]\n> * The patch *does not apply* on 5.0-rc1, so I can not even check whether tests pass !\n> \n\nnow it does, thanks to Keshav's rebasing.\n\nDima",
    "created_at": "2012-05-14T09:39:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140961",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:26'>Comment 26:</a>
Replying to [@nathanncohen](#comment%3A24):

Hell([o]*10) Nathann [!]*5

> **ppl.pyx**
> 
> * MIP_Problem : PPL can only solve continuous Linear Programs, can't it ? In this case why "MIP_*", unless it means something different from "Mixed Integer Program" ?

We only have `MixedIntegerLinearProgram`, but no `LinearProgram`, right?
While the latter might be a meaningful addition, it is certainly beyond the scope of this ticket, I think...

[...]
> * The patch *does not apply* on 5.0-rc1, so I can not even check whether tests pass !
> 

now it does, thanks to Keshav's rebasing.

Dima



---

archive/issue_comments_140962.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\n> We only have `MixedIntegerLinearProgram`, but no `LinearProgram`, right?\n\nIndeed, but the file ppl.pyx (both code and documentation) contains many occurrences of \"MIP\" that are just misleading.\n\nNathann",
    "created_at": "2012-05-14T10:23:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140962",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:27'>Comment 27:</a>
> We only have `MixedIntegerLinearProgram`, but no `LinearProgram`, right?

Indeed, but the file ppl.pyx (both code and documentation) contains many occurrences of "MIP" that are just misleading.

Nathann



---

archive/issue_comments_140963.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nReplying to [@nathanncohen](#comment%3A24):\n\n> Helloooooooo Risan !!!\n\nHi Mr. Nathann\n> I just went over your patch, and some comments follow. Thank you very much for the work you put into that ! `:-)`\n\nThank you for your review.\n> **ppl.pyx**\n> * MIP_Problem : PPL can only solve continuous Linear Programs, can't it ? In this case why \"MIP_*\", unless it means something different from \"Mixed Integer Program\" ?\n\nIt was named MIP_Problem simply because it is derived from MIP_Problem class in PPL. Since this functionality belongs to PPL, I left the name unchanged.\n> * MIP_Problem.optimization_mode() prints something but does not return anything\n\nFixed. Now it returns a string.\n> * MIP_Problem returns dictionaries : in MixedIntegerLinearProgram  we raise an exception for unbounded/infeasible problems, and return the objective's value otherwise. Just mentionning it in case you may like it, of course that's totally up to you ! I still think it would be easier to return, for instance, a string (unbounded/infeasible) when the problem has no solution, and the result otherwise.\n\nFixed. Now it raises an error (ValueError) when the problem has no solution. I think it is more consistent to the PPL MIP_Problem now.\n> * optimal_value does not only return the objective value, it also solves the problem ! I think the docstring should be updated --> if the users calls this function several times, are the computations made over and over ?\n\nFixed. It does not solve the problem now.\n> * optimization_mode and set_optimization_mode : we often do both in a unique function, i.e. a method with optional arguments such that optimization_mode() returns the mode and optimization_mode(-1) defines it as a minimization problem. I just noticed that it was not the case at all for MixedIntegerLinearProgram  methods, but I think we ought to change that :-)\n\nThis is made to be consistent with the implementation in PPL. In PPL, they used optimization_mode() and set_optimization_mode() instead of one function only :)\n> * is_satisfiable : does it also solve the problem ? I mean, if users type \"if p.is_satisfiable(): a = p.optimal_value()\" does it solve it twice ? The docstrings should say something about that.\n\nThe is_satisfiable in my wrapper wraps exactly the is_satisfiable of PPL. After looking at the PPL implementation of this function, I guess it does not solve the problem.\n> * what is the difference between optimal_value and evaluate_objective_function ? In particular the code seems to be pretty similar, so one function should probably call the other if two are necessary\n\nEvaluate objective function return the evaluation of objective function on a given point (the parameter of the function). The optimal_value return the evaluation of objective function on the optimal solution.\n> * OK : by looking at the docstring I have no idea what it does or what the invariants are, but of course it may also be that I am not part of the intended audience for this class\n\nI think it was used for debugging (I'm not really sure too).\n> **sage/libs/ppl_ files**\n> * Are these files part of the ppl spkg ? If so they should not be modified by a patch, and the spkg itself should be updated.. That's really a lot of work for nothing, but that's how things are done here until we change it `:-/`\n\nThe files pp_shim.cc and ppl_shim.hh are created by vbraun (cmiiw), I actually don't have any idea about them.\n> **mip.pyx**\n> * Why would you have to add anything to get_values and solve ? The flags you add would create problems instantly if the backend solver is not PPL !! I think nothing needs to be changed in that file --> if the backend is ppl then the values returned will be exact, otherwise they will just be the usual ones. But I do not see why these functions should be changed `O_o`\n\nThanks, I have changed this part. No additional flags needed anymore.\n> **ppl_backend.pyx**\n> * All functions should be documented/tested, even 'cutsom ones' like  print_data . Actually  sage -coverage <filename>  should never have to complain `:-)`\n\noops, print_data is debugging function. I forgot to delete it. Now I have deleted it.\n> * same thing with init_mip\n\nIt is documented now.\n> * add_variable[s] say that the variable are positive by default. Are they indeed ?\n\nYes. They are. The lower_bound is set to 0.0 by default.\n> * \"set_variable_type\" -- I think the best is for this method's code to be something like \"raise Exception('This backend does not handle integer variables ! Read the doc !')\"\n\nFixed.\n> * why do you keep \"exact\" in the names of your get_values functions ? It would be easier to name then get_values, as anyway all the values given by the ppl interface are exact ?!\n\nFixed.\n> **Others**\n> * Is ppl.pyx part of the documentation ? At least ppl_backend is not, so you should add it to doc/en/reference/numerical.rst\n> * Some \"advertisement\" should be added to the doc. In many places the solvers are listed (ok, perhaps we should only list them at *one* place), so that users can find out that *exact* answer are returned when the solver is ppl\n\nok. I'm still working on them and I will update it later.\n> * Variables : are they automatically strictly positive ? This is the default in the MIP class (because it is the default of the API we interface), and if PPL acts any differently this would mean that results would be different according to whether PPL or GLPK is used as a backend !\n\nThis is from GenericBackend (and PPL Backend inherits from it) class:\n\"cpdef int add_variable(self, lower_bound=0.0, ...\"\nI think the variables are non-negative by default.\n> * The patch *does not apply* on 5.0-rc1, so I can not even check whether tests pass !\n> Thank you again `:-)`\n> Nathann\n\nThanks a lot again, Mr. Nathann :)\n\nRisan",
    "created_at": "2012-05-27T15:18:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140963",
    "user": "https://github.com/ptrrsn"
}
```

<a id='comment:28'>Comment 28:</a>
Replying to [@nathanncohen](#comment%3A24):

> Helloooooooo Risan !!!

Hi Mr. Nathann
> I just went over your patch, and some comments follow. Thank you very much for the work you put into that ! `:-)`

Thank you for your review.
> **ppl.pyx**
> * MIP_Problem : PPL can only solve continuous Linear Programs, can't it ? In this case why "MIP_*", unless it means something different from "Mixed Integer Program" ?

It was named MIP_Problem simply because it is derived from MIP_Problem class in PPL. Since this functionality belongs to PPL, I left the name unchanged.
> * MIP_Problem.optimization_mode() prints something but does not return anything

Fixed. Now it returns a string.
> * MIP_Problem returns dictionaries : in MixedIntegerLinearProgram  we raise an exception for unbounded/infeasible problems, and return the objective's value otherwise. Just mentionning it in case you may like it, of course that's totally up to you ! I still think it would be easier to return, for instance, a string (unbounded/infeasible) when the problem has no solution, and the result otherwise.

Fixed. Now it raises an error (ValueError) when the problem has no solution. I think it is more consistent to the PPL MIP_Problem now.
> * optimal_value does not only return the objective value, it also solves the problem ! I think the docstring should be updated --> if the users calls this function several times, are the computations made over and over ?

Fixed. It does not solve the problem now.
> * optimization_mode and set_optimization_mode : we often do both in a unique function, i.e. a method with optional arguments such that optimization_mode() returns the mode and optimization_mode(-1) defines it as a minimization problem. I just noticed that it was not the case at all for MixedIntegerLinearProgram  methods, but I think we ought to change that :-)

This is made to be consistent with the implementation in PPL. In PPL, they used optimization_mode() and set_optimization_mode() instead of one function only :)
> * is_satisfiable : does it also solve the problem ? I mean, if users type "if p.is_satisfiable(): a = p.optimal_value()" does it solve it twice ? The docstrings should say something about that.

The is_satisfiable in my wrapper wraps exactly the is_satisfiable of PPL. After looking at the PPL implementation of this function, I guess it does not solve the problem.
> * what is the difference between optimal_value and evaluate_objective_function ? In particular the code seems to be pretty similar, so one function should probably call the other if two are necessary

Evaluate objective function return the evaluation of objective function on a given point (the parameter of the function). The optimal_value return the evaluation of objective function on the optimal solution.
> * OK : by looking at the docstring I have no idea what it does or what the invariants are, but of course it may also be that I am not part of the intended audience for this class

I think it was used for debugging (I'm not really sure too).
> **sage/libs/ppl_ files**
> * Are these files part of the ppl spkg ? If so they should not be modified by a patch, and the spkg itself should be updated.. That's really a lot of work for nothing, but that's how things are done here until we change it `:-/`

The files pp_shim.cc and ppl_shim.hh are created by vbraun (cmiiw), I actually don't have any idea about them.
> **mip.pyx**
> * Why would you have to add anything to get_values and solve ? The flags you add would create problems instantly if the backend solver is not PPL !! I think nothing needs to be changed in that file --> if the backend is ppl then the values returned will be exact, otherwise they will just be the usual ones. But I do not see why these functions should be changed `O_o`

Thanks, I have changed this part. No additional flags needed anymore.
> **ppl_backend.pyx**
> * All functions should be documented/tested, even 'cutsom ones' like  print_data . Actually  sage -coverage <filename>  should never have to complain `:-)`

oops, print_data is debugging function. I forgot to delete it. Now I have deleted it.
> * same thing with init_mip

It is documented now.
> * add_variable[s] say that the variable are positive by default. Are they indeed ?

Yes. They are. The lower_bound is set to 0.0 by default.
> * "set_variable_type" -- I think the best is for this method's code to be something like "raise Exception('This backend does not handle integer variables ! Read the doc !')"

Fixed.
> * why do you keep "exact" in the names of your get_values functions ? It would be easier to name then get_values, as anyway all the values given by the ppl interface are exact ?!

Fixed.
> **Others**
> * Is ppl.pyx part of the documentation ? At least ppl_backend is not, so you should add it to doc/en/reference/numerical.rst
> * Some "advertisement" should be added to the doc. In many places the solvers are listed (ok, perhaps we should only list them at *one* place), so that users can find out that *exact* answer are returned when the solver is ppl

ok. I'm still working on them and I will update it later.
> * Variables : are they automatically strictly positive ? This is the default in the MIP class (because it is the default of the API we interface), and if PPL acts any differently this would mean that results would be different according to whether PPL or GLPK is used as a backend !

This is from GenericBackend (and PPL Backend inherits from it) class:
"cpdef int add_variable(self, lower_bound=0.0, ..."
I think the variables are non-negative by default.
> * The patch *does not apply* on 5.0-rc1, so I can not even check whether tests pass !
> Thank you again `:-)`
> Nathann

Thanks a lot again, Mr. Nathann :)

Risan



---

archive/issue_events_151643.json:
```json
{
    "actor": "https://github.com/ptrrsn",
    "created_at": "2012-05-27T15:18:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151643"
}
```



---

archive/issue_events_151644.json:
```json
{
    "actor": "https://github.com/ptrrsn",
    "created_at": "2012-05-27T15:18:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151644"
}
```



---

archive/issue_comments_140964.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\nI'll rebase this later",
    "created_at": "2012-05-27T17:03:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140964",
    "user": "https://github.com/kini"
}
```

<a id='comment:30'>Comment 30:</a>
I'll rebase this later



---

archive/issue_comments_140965.json:
```json
{
    "body": "Work Issues: **rebase on 5.1.beta0**",
    "created_at": "2012-05-27T17:03:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140965",
    "user": "https://github.com/kini"
}
```

Work Issues: **rebase on 5.1.beta0**



---

archive/issue_events_151645.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2012-05-27T17:03:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151645"
}
```



---

archive/issue_events_151646.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2012-05-27T17:03:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151646"
}
```



---

archive/issue_comments_140966.json:
```json
{
    "body": "apply to $SAGE_ROOT/devel/sage",
    "created_at": "2012-05-28T07:03:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140966",
    "user": "https://github.com/kini"
}
```

apply to $SAGE_ROOT/devel/sage



---

archive/issue_events_151647.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2012-05-28T07:03:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151647"
}
```



---

archive/issue_events_151648.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2012-05-28T07:03:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151648"
}
```



---

archive/issue_comments_140967.json:
```json
{
    "body": "<a id='comment:31'>Comment 31:</a>\nAttachment: **[trac_12533-rebased.2.patch.gz](https://github.com/sagemath/sage/files/ticket12533/trac_12533-rebased.2.patch.gz)**\n\npatchbot: apply trac_12533-rebased.2.patch",
    "created_at": "2012-05-28T07:03:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140967",
    "user": "https://github.com/kini"
}
```

<a id='comment:31'>Comment 31:</a>
Attachment: **[trac_12533-rebased.2.patch.gz](https://github.com/sagemath/sage/files/ticket12533/trac_12533-rebased.2.patch.gz)**

patchbot: apply trac_12533-rebased.2.patch



---

archive/issue_comments_140968.json:
```json
{
    "body": "<a id='comment:32'>Comment 32:</a>\n(Does it fail to compile on beta1 or is it just me ? It applied fine though !)",
    "created_at": "2012-05-29T17:23:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140968",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:32'>Comment 32:</a>
(Does it fail to compile on beta1 or is it just me ? It applied fine though !)



---

archive/issue_events_151649.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-05-29T17:23:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151649"
}
```



---

archive/issue_events_151650.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-05-29T17:23:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151650"
}
```



---

archive/issue_comments_140969.json:
```json
{
    "body": "<a id='comment:34'>Comment 34:</a>\nReplying to [@nathanncohen](#comment%3A33):\nindeed, I also get\n\n```\n...\nError compiling Cython file:\n------------------------------------------------------------\n...\n        if coeff is not None:\n            self.objective_function[variable] = coeff;\n        else:\n            return self.objective_function[variable]\n\n    cpdef  set_objective(self, list coeff):\n          ^\n------------------------------------------------------------\n\nsage/numerical/backends/ppl_backend.pyx:273:11: Signature not compatible with previous declaration\n\nError compiling Cython file:\n------------------------------------------------------------\n...\n    cpdef int add_variable(self, lower_bound=*, upper_bound=*, binary=*, continuous=*, integer=*, obj=*, name=*) except -1\n    cpdef int add_variables(self, int, lower_bound=*, upper_bound=*, binary=*, continuous=*, integer=*, obj=*, names=*) except -1\n    cpdef set_variable_type(self, int variable, int vtype)\n    cpdef set_sense(self, int sense)\n    cpdef objective_coefficient(self, int variable, coeff=*)\n    cpdef set_objective(self, list coeff, double d=*)\n                       ^\n------------------------------------------------------------\n\nsage/numerical/backends/generic_backend.pxd:14:24: Previous declaration is here\nError running command, failed with status 256.\nError installing modified sage library code.\n```",
    "created_at": "2012-05-29T23:59:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140969",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:34'>Comment 34:</a>
Replying to [@nathanncohen](#comment%3A33):
indeed, I also get

```
...
Error compiling Cython file:
------------------------------------------------------------
...
        if coeff is not None:
            self.objective_function[variable] = coeff;
        else:
            return self.objective_function[variable]

    cpdef  set_objective(self, list coeff):
          ^
------------------------------------------------------------

sage/numerical/backends/ppl_backend.pyx:273:11: Signature not compatible with previous declaration

Error compiling Cython file:
------------------------------------------------------------
...
    cpdef int add_variable(self, lower_bound=*, upper_bound=*, binary=*, continuous=*, integer=*, obj=*, name=*) except -1
    cpdef int add_variables(self, int, lower_bound=*, upper_bound=*, binary=*, continuous=*, integer=*, obj=*, names=*) except -1
    cpdef set_variable_type(self, int variable, int vtype)
    cpdef set_sense(self, int sense)
    cpdef objective_coefficient(self, int variable, coeff=*)
    cpdef set_objective(self, list coeff, double d=*)
                       ^
------------------------------------------------------------

sage/numerical/backends/generic_backend.pxd:14:24: Previous declaration is here
Error running command, failed with status 256.
Error installing modified sage library code.
```



---

archive/issue_events_151651.json:
```json
{
    "actor": "https://github.com/ptrrsn",
    "created_at": "2012-06-01T08:49:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151651"
}
```



---

archive/issue_events_151652.json:
```json
{
    "actor": "https://github.com/ptrrsn",
    "created_at": "2012-06-01T08:49:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151652"
}
```



---

archive/issue_comments_140970.json:
```json
{
    "body": "<a id='comment:36'>Comment 36:</a>\nHi,\n\nI have fixed the compilation error and some other incompatibilities with sage 5.1. If you are using sage 5.1, please use \"trac_12533_arbitrary_precision_LP_solver_backend_for_5.1.patch\". If you are using sage 5.0, please use \"trac_12533_arbitrary_precision_LP_solver_backend.patch\".\n\nThank you!",
    "created_at": "2012-06-01T08:51:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140970",
    "user": "https://github.com/ptrrsn"
}
```

<a id='comment:36'>Comment 36:</a>
Hi,

I have fixed the compilation error and some other incompatibilities with sage 5.1. If you are using sage 5.1, please use "trac_12533_arbitrary_precision_LP_solver_backend_for_5.1.patch". If you are using sage 5.0, please use "trac_12533_arbitrary_precision_LP_solver_backend.patch".

Thank you!



---

archive/issue_comments_140971.json:
```json
{
    "body": "<a id='comment:37'>Comment 37:</a>\nReplying to [@kini](#comment%3A31):\n> patchbot: apply trac_12533-rebased.2.patch\n\nBtw, thanks for this! :)",
    "created_at": "2012-06-01T08:53:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140971",
    "user": "https://github.com/ptrrsn"
}
```

<a id='comment:37'>Comment 37:</a>
Replying to [@kini](#comment%3A31):
> patchbot: apply trac_12533-rebased.2.patch

Btw, thanks for this! :)



---

archive/issue_comments_140972.json:
```json
{
    "body": "<a id='comment:38'>Comment 38:</a>\nReplying to [@ptrrsn](#comment%3A36):\n> Hi,\n> \n> I have fixed the compilation error and some other incompatibilities with sage 5.1. If you are using sage 5.1, please use \"trac_12533_arbitrary_precision_LP_solver_backend_for_5.1.patch\". If you are using sage 5.0, please use \"trac_12533_arbitrary_precision_LP_solver_backend.patch\".\n> \n\nThanks, it works now with the latest Sage beta (on OSX 10.6.8).",
    "created_at": "2012-06-01T09:11:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140972",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:38'>Comment 38:</a>
Replying to [@ptrrsn](#comment%3A36):
> Hi,
> 
> I have fixed the compilation error and some other incompatibilities with sage 5.1. If you are using sage 5.1, please use "trac_12533_arbitrary_precision_LP_solver_backend_for_5.1.patch". If you are using sage 5.0, please use "trac_12533_arbitrary_precision_LP_solver_backend.patch".
> 

Thanks, it works now with the latest Sage beta (on OSX 10.6.8).



---

archive/issue_events_151653.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-06-03T16:33:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151653"
}
```



---

archive/issue_events_151654.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-06-03T16:33:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151654"
}
```



---

archive/issue_comments_140973.json:
```json
{
    "body": "<a id='comment:39'>Comment 39:</a>\n> Hi Mr. Nathann\n\nHello Mister Risan !!\n\n> > * MIP_Problem : PPL can only solve continuous Linear Programs, can't it ? In this case why \"MIP_*\", unless it means something different from \"Mixed Integer Program\" ?\n\n> It was named MIP_Problem simply because it is derived from MIP_Problem class in PPL. Since this functionality belongs to PPL, I left the name unchanged.\n\nOh. Then do you mean that PPL can solve integer programs too ? `O_o`\nIf its name is MIP_problem, I guess it can... Well, why don't we expose it then ???\n\n> > * is_satisfiable : does it also solve the problem ? I mean, if users type \"if p.is_satisfiable(): a = p.optimal_value()\" does it solve it twice ? The docstrings should say something about that.\n\n> The is_satisfiable in my wrapper wraps exactly the is_satisfiable of PPL. After looking at the PPL implementation of this function, I guess it does not solve the problem.\n\nHmmmm.. I would be surprised if it were easier to check that the problem is satisfiable than to actually solve it. `O_o`.\nBut then again, I am often surprised.\n\n> Evaluate objective function return the evaluation of objective function on a given point (the parameter of the function). The optimal_value return the evaluation of objective function on the optimal solution.\n\nRight. I do not know what I could do with evaluate_objective_function, but if you think that it is useful...\n\n> > * OK : by looking at the docstring I have no idea what it does or what the invariants are, but of course it may also be that I am not part of the intended audience for this class\n\n> I think it was used for debugging (I'm not really sure too).\n\nWell, then... What about removing it from the patch ?...\n\n> > **sage/libs/ppl_ files**\n\n> The files pp_shim.cc and ppl_shim.hh are created by vbraun (cmiiw), I actually don't have any idea about them.\n\nOk, they seem to be included in Sage's source code, so it is actually ok to modify them\n\n> > **mip.pyx**\n> > * Why would you have to add anything to get_values and solve ? The flags you add would create problems instantly if the backend solver is not PPL !! I think nothing needs to be changed in that file --> if the backend is ppl then the values returned will be exact, otherwise they will just be the usual ones. But I do not see why these functions should be changed `O_o`\n\n> Thanks, I have changed this part. No additional flags needed anymore.\n\nWell. I saw that you now have two functions doing exactly the same thing following each other in the file : get_variable_value and get_exact_variable_value. As they seem to do the same thing (tell me if I am wrong) it should only appear once. If you want to have both available, one can be made to be a shortcut toward the other by typing in the code \nget_exact_variable_value = get_variable_value\nBut why would you want to have both available ?\nIn particular, why do you still modify the file mip.pyx ? As the function get_variable_value exists, there is no need to test whether the ppl solver is being used, or to have an ``exact`` variable, or to add things like that to the code :\n\n```\nimport sys \nfrom sage.all import * \n```\n\n> > **ppl_backend.pyx**\n\nabout documentation : I just remembered that you should also add a mention of ppl in the file doc/en/thematic_tutorials/linear_programming.rst near the other solvers.\n\n> > * \"set_variable_type\" -- I think the best is for this method's code to be something like \"raise Exception('This backend does not handle integer variables ! Read the doc !')\"\n\n> Fixed.\n\nWell... But it the solver actually supports integer variables...\n\n> > **Others**\n> > * Is ppl.pyx part of the documentation ? At least ppl_backend is not, so you should add it to doc/en/reference/numerical.rst\n\nWell... This is not done in your new patch.\n\n> ok. I'm still working on them and I will update it later.\n\ndid you ?\n\nNathann",
    "created_at": "2012-06-03T16:33:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140973",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:39'>Comment 39:</a>
> Hi Mr. Nathann

Hello Mister Risan !!

> > * MIP_Problem : PPL can only solve continuous Linear Programs, can't it ? In this case why "MIP_*", unless it means something different from "Mixed Integer Program" ?

> It was named MIP_Problem simply because it is derived from MIP_Problem class in PPL. Since this functionality belongs to PPL, I left the name unchanged.

Oh. Then do you mean that PPL can solve integer programs too ? `O_o`
If its name is MIP_problem, I guess it can... Well, why don't we expose it then ???

> > * is_satisfiable : does it also solve the problem ? I mean, if users type "if p.is_satisfiable(): a = p.optimal_value()" does it solve it twice ? The docstrings should say something about that.

> The is_satisfiable in my wrapper wraps exactly the is_satisfiable of PPL. After looking at the PPL implementation of this function, I guess it does not solve the problem.

Hmmmm.. I would be surprised if it were easier to check that the problem is satisfiable than to actually solve it. `O_o`.
But then again, I am often surprised.

> Evaluate objective function return the evaluation of objective function on a given point (the parameter of the function). The optimal_value return the evaluation of objective function on the optimal solution.

Right. I do not know what I could do with evaluate_objective_function, but if you think that it is useful...

> > * OK : by looking at the docstring I have no idea what it does or what the invariants are, but of course it may also be that I am not part of the intended audience for this class

> I think it was used for debugging (I'm not really sure too).

Well, then... What about removing it from the patch ?...

> > **sage/libs/ppl_ files**

> The files pp_shim.cc and ppl_shim.hh are created by vbraun (cmiiw), I actually don't have any idea about them.

Ok, they seem to be included in Sage's source code, so it is actually ok to modify them

> > **mip.pyx**
> > * Why would you have to add anything to get_values and solve ? The flags you add would create problems instantly if the backend solver is not PPL !! I think nothing needs to be changed in that file --> if the backend is ppl then the values returned will be exact, otherwise they will just be the usual ones. But I do not see why these functions should be changed `O_o`

> Thanks, I have changed this part. No additional flags needed anymore.

Well. I saw that you now have two functions doing exactly the same thing following each other in the file : get_variable_value and get_exact_variable_value. As they seem to do the same thing (tell me if I am wrong) it should only appear once. If you want to have both available, one can be made to be a shortcut toward the other by typing in the code 
get_exact_variable_value = get_variable_value
But why would you want to have both available ?
In particular, why do you still modify the file mip.pyx ? As the function get_variable_value exists, there is no need to test whether the ppl solver is being used, or to have an ``exact`` variable, or to add things like that to the code :

```
import sys 
from sage.all import * 
```

> > **ppl_backend.pyx**

about documentation : I just remembered that you should also add a mention of ppl in the file doc/en/thematic_tutorials/linear_programming.rst near the other solvers.

> > * "set_variable_type" -- I think the best is for this method's code to be something like "raise Exception('This backend does not handle integer variables ! Read the doc !')"

> Fixed.

Well... But it the solver actually supports integer variables...

> > **Others**
> > * Is ppl.pyx part of the documentation ? At least ppl_backend is not, so you should add it to doc/en/reference/numerical.rst

Well... This is not done in your new patch.

> ok. I'm still working on them and I will update it later.

did you ?

Nathann



---

archive/issue_comments_140974.json:
```json
{
    "body": "<a id='comment:40'>Comment 40:</a>\nOh, and I forgot to add that all import from the PPL libraries should be done in a .pxd file (like for ppl_backend.pxd) instead `:-)`\n\nNathann",
    "created_at": "2012-06-03T16:54:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140974",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:40'>Comment 40:</a>
Oh, and I forgot to add that all import from the PPL libraries should be done in a .pxd file (like for ppl_backend.pxd) instead `:-)`

Nathann



---

archive/issue_comments_140975.json:
```json
{
    "body": "Changed work issues from **rebase on 5.1.beta0** to **see the latest comments**",
    "created_at": "2012-06-05T15:43:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140975",
    "user": "https://github.com/dimpase"
}
```

Changed work issues from **rebase on 5.1.beta0** to **see the latest comments**



---

archive/issue_comments_140976.json:
```json
{
    "body": "Attachment: **[trac_12533_arbitrary_precision_LP_solver_backend_for_5.1.patch.gz](https://github.com/sagemath/sage/files/ticket12533/trac_12533_arbitrary_precision_LP_solver_backend_for_5.1.patch.gz)**\n\nfor Sage 5.1.beta1",
    "created_at": "2012-06-11T09:44:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140976",
    "user": "https://github.com/ptrrsn"
}
```

Attachment: **[trac_12533_arbitrary_precision_LP_solver_backend_for_5.1.patch.gz](https://github.com/sagemath/sage/files/ticket12533/trac_12533_arbitrary_precision_LP_solver_backend_for_5.1.patch.gz)**

for Sage 5.1.beta1



---

archive/issue_comments_140977.json:
```json
{
    "body": "<a id='comment:42'>Comment 42:</a>\nReplying to [@nathanncohen](#comment%3A39):\n> > Hi Mr. Nathann\n\n> \n> Hello Mister Risan !!\n\nHi\n> \n> > > * MIP_Problem : PPL can only solve continuous Linear Programs, can't it ? In this case why \"MIP_*\", unless it means something different from \"Mixed Integer Program\" ?\n\n> > It was named MIP_Problem simply because it is derived from MIP_Problem class in PPL. Since this functionality belongs to PPL, I left the name unchanged.\n\n> Oh. Then do you mean that PPL can solve integer programs too ? `O_o`\n> If its name is MIP_problem, I guess it can... Well, why don't we expose it then ???\n\nBecause this patch is initially only intended to be an additional exact LP solver backend for general LP.\n> \n> > > * is_satisfiable : does it also solve the problem ? I mean, if users type \"if p.is_satisfiable(): a = p.optimal_value()\" does it solve it twice ? The docstrings should say something about that.\n\n> > The is_satisfiable in my wrapper wraps exactly the is_satisfiable of PPL. After looking at the PPL implementation of this function, I guess it does not solve the problem.\n\n> \n> Hmmmm.. I would be surprised if it were easier to check that the problem is satisfiable than to actually solve it. `O_o`.\n> But then again, I am often surprised.\n\nHmm, I am not really sure about it either. It was not mentioned in the PPL documentation.\n\n> \n> > Evaluate objective function return the evaluation of objective function on a given point (the parameter of the function). The optimal_value return the evaluation of objective function on the optimal solution.\n\n> \n> Right. I do not know what I could do with evaluate_objective_function, but if you think that it is useful...\n> \n> > > * OK : by looking at the docstring I have no idea what it does or what the invariants are, but of course it may also be that I am not part of the intended audience for this class\n\n> > I think it was used for debugging (I'm not really sure too).\n\n> \n> Well, then... What about removing it from the patch ?...\n\nHmm, after checking this again, I think it is not just for debugging purpose. For example: The MIP_Problem constructor will accept any kind of constraints (including strict inequalities which violate the invariants). However, there is no checking for this in the constructor, that is why the OK() can be used to check this.\n\n> \n> > > **sage/libs/ppl_ files**\n\n> > The files pp_shim.cc and ppl_shim.hh are created by vbraun (cmiiw), I actually don't have any idea about them.\n\n> \n> Ok, they seem to be included in Sage's source code, so it is actually ok to modify them\n> \n> > > **mip.pyx**\n> > > * Why would you have to add anything to get_values and solve ? The flags you add would create problems instantly if the backend solver is not PPL !! I think nothing needs to be changed in that file --> if the backend is ppl then the values returned will be exact, otherwise they will just be the usual ones. But I do not see why these functions should be changed `O_o`\n\n> > Thanks, I have changed this part. No additional flags needed anymore.\n\n> Well. I saw that you now have two functions doing exactly the same thing following each other in the file : get_variable_value and get_exact_variable_value. As they seem to do the same thing (tell me if I am wrong) it should only appear once. If you want to have both available, one can be made to be a shortcut toward the other by typing in the code \n> get_exact_variable_value = get_variable_value\n> But why would you want to have both available ?\n\nI have changed the get_variable_value to raise notimplementederror. The reason I made new functions (get_exact_*) is because in generic_backend, the return type of get_variable_value and get_objective_value are fixed to be double. Since PPLBackend inherits these methods from GenericBackend, the implementations of them inside PPLBackend should return doubles too... except if I modify the GenericBackend class (change cdef double get_... to cdef get_...). What do you think?\n\n> In particular, why do you still modify the file mip.pyx ? As the function get_variable_value exists, there is no need to test whether the ppl solver is being used, or to have an ``exact`` variable, or to add things like that to the code :\n> \n> ```\n> import sys \n> from sage.all import * \n> ```\n> \n> > > **ppl_backend.pyx**\n\n> \n> about documentation : I just remembered that you should also add a mention of ppl in the file doc/en/thematic_tutorials/linear_programming.rst near the other solvers.\n> \n> > > * \"set_variable_type\" -- I think the best is for this method's code to be something like \"raise Exception('This backend does not handle integer variables ! Read the doc !')\"\n\n> > Fixed.\n\n> \n> Well... But it the solver actually supports integer variables...\n> \n> > > **Others**\n> > > * Is ppl.pyx part of the documentation ? At least ppl_backend is not, so you should add it to doc/en/reference/numerical.rst\n\n> \n> Well... This is not done in your new patch.\n> \n> > ok. I'm still working on them and I will update it later.\n\n> did you ?\n\nOk, fixed.\n> \n> Nathann",
    "created_at": "2012-06-11T09:51:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140977",
    "user": "https://github.com/ptrrsn"
}
```

<a id='comment:42'>Comment 42:</a>
Replying to [@nathanncohen](#comment%3A39):
> > Hi Mr. Nathann

> 
> Hello Mister Risan !!

Hi
> 
> > > * MIP_Problem : PPL can only solve continuous Linear Programs, can't it ? In this case why "MIP_*", unless it means something different from "Mixed Integer Program" ?

> > It was named MIP_Problem simply because it is derived from MIP_Problem class in PPL. Since this functionality belongs to PPL, I left the name unchanged.

> Oh. Then do you mean that PPL can solve integer programs too ? `O_o`
> If its name is MIP_problem, I guess it can... Well, why don't we expose it then ???

Because this patch is initially only intended to be an additional exact LP solver backend for general LP.
> 
> > > * is_satisfiable : does it also solve the problem ? I mean, if users type "if p.is_satisfiable(): a = p.optimal_value()" does it solve it twice ? The docstrings should say something about that.

> > The is_satisfiable in my wrapper wraps exactly the is_satisfiable of PPL. After looking at the PPL implementation of this function, I guess it does not solve the problem.

> 
> Hmmmm.. I would be surprised if it were easier to check that the problem is satisfiable than to actually solve it. `O_o`.
> But then again, I am often surprised.

Hmm, I am not really sure about it either. It was not mentioned in the PPL documentation.

> 
> > Evaluate objective function return the evaluation of objective function on a given point (the parameter of the function). The optimal_value return the evaluation of objective function on the optimal solution.

> 
> Right. I do not know what I could do with evaluate_objective_function, but if you think that it is useful...
> 
> > > * OK : by looking at the docstring I have no idea what it does or what the invariants are, but of course it may also be that I am not part of the intended audience for this class

> > I think it was used for debugging (I'm not really sure too).

> 
> Well, then... What about removing it from the patch ?...

Hmm, after checking this again, I think it is not just for debugging purpose. For example: The MIP_Problem constructor will accept any kind of constraints (including strict inequalities which violate the invariants). However, there is no checking for this in the constructor, that is why the OK() can be used to check this.

> 
> > > **sage/libs/ppl_ files**

> > The files pp_shim.cc and ppl_shim.hh are created by vbraun (cmiiw), I actually don't have any idea about them.

> 
> Ok, they seem to be included in Sage's source code, so it is actually ok to modify them
> 
> > > **mip.pyx**
> > > * Why would you have to add anything to get_values and solve ? The flags you add would create problems instantly if the backend solver is not PPL !! I think nothing needs to be changed in that file --> if the backend is ppl then the values returned will be exact, otherwise they will just be the usual ones. But I do not see why these functions should be changed `O_o`

> > Thanks, I have changed this part. No additional flags needed anymore.

> Well. I saw that you now have two functions doing exactly the same thing following each other in the file : get_variable_value and get_exact_variable_value. As they seem to do the same thing (tell me if I am wrong) it should only appear once. If you want to have both available, one can be made to be a shortcut toward the other by typing in the code 
> get_exact_variable_value = get_variable_value
> But why would you want to have both available ?

I have changed the get_variable_value to raise notimplementederror. The reason I made new functions (get_exact_*) is because in generic_backend, the return type of get_variable_value and get_objective_value are fixed to be double. Since PPLBackend inherits these methods from GenericBackend, the implementations of them inside PPLBackend should return doubles too... except if I modify the GenericBackend class (change cdef double get_... to cdef get_...). What do you think?

> In particular, why do you still modify the file mip.pyx ? As the function get_variable_value exists, there is no need to test whether the ppl solver is being used, or to have an ``exact`` variable, or to add things like that to the code :
> 
> ```
> import sys 
> from sage.all import * 
> ```
> 
> > > **ppl_backend.pyx**

> 
> about documentation : I just remembered that you should also add a mention of ppl in the file doc/en/thematic_tutorials/linear_programming.rst near the other solvers.
> 
> > > * "set_variable_type" -- I think the best is for this method's code to be something like "raise Exception('This backend does not handle integer variables ! Read the doc !')"

> > Fixed.

> 
> Well... But it the solver actually supports integer variables...
> 
> > > **Others**
> > > * Is ppl.pyx part of the documentation ? At least ppl_backend is not, so you should add it to doc/en/reference/numerical.rst

> 
> Well... This is not done in your new patch.
> 
> > ok. I'm still working on them and I will update it later.

> did you ?

Ok, fixed.
> 
> Nathann



---

archive/issue_events_151655.json:
```json
{
    "actor": "https://github.com/ptrrsn",
    "created_at": "2012-06-12T01:40:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151655"
}
```



---

archive/issue_events_151656.json:
```json
{
    "actor": "https://github.com/ptrrsn",
    "created_at": "2012-06-12T01:40:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151656"
}
```



---

archive/issue_comments_140978.json:
```json
{
    "body": "Changed reviewer from **David Coudert** to **David Coudert, Nathann Cohen**",
    "created_at": "2012-06-15T12:30:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140978",
    "user": "https://github.com/dimpase"
}
```

Changed reviewer from **David Coudert** to **David Coudert, Nathann Cohen**



---

archive/issue_comments_140979.json:
```json
{
    "body": "<a id='comment:44'>Comment 44:</a>\nReplying to [@nathanncohen](#comment%3A39):\nthe name unchanged.\n> Oh. Then do you mean that PPL can solve integer programs too ? `O_o`\n> If its name is MIP_problem, I guess it can... Well, why don't we expose it then ???\n\nyes, this would be great, but this ought to be another ticket...",
    "created_at": "2012-06-15T12:30:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140979",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:44'>Comment 44:</a>
Replying to [@nathanncohen](#comment%3A39):
the name unchanged.
> Oh. Then do you mean that PPL can solve integer programs too ? `O_o`
> If its name is MIP_problem, I guess it can... Well, why don't we expose it then ???

yes, this would be great, but this ought to be another ticket...



---

archive/issue_comments_140980.json:
```json
{
    "body": "<a id='comment:45'>Comment 45:</a>\nTo the best of my knowledge PPL does not do integer programming. It technically works with integers (and an overall divisor) so that you can potentially use machine integers for speed. Though in Sage we only compile support for GMP/MPIR coefficients in. But you can't solve integer (or mixed integer) programs.\n\nAlso, Sage seems to have a `MixedIntegerLinearProgram` but no `IntegerLinearProgram` or just `LinearProgram`. Why is there no class hierarchy?",
    "created_at": "2012-06-15T12:52:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140980",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:45'>Comment 45:</a>
To the best of my knowledge PPL does not do integer programming. It technically works with integers (and an overall divisor) so that you can potentially use machine integers for speed. Though in Sage we only compile support for GMP/MPIR coefficients in. But you can't solve integer (or mixed integer) programs.

Also, Sage seems to have a `MixedIntegerLinearProgram` but no `IntegerLinearProgram` or just `LinearProgram`. Why is there no class hierarchy?



---

archive/issue_comments_140981.json:
```json
{
    "body": "<a id='comment:46'>Comment 46:</a>\nNever mind, I just looked up the PPL docs with respect to `MIP_Problem`.",
    "created_at": "2012-06-15T12:54:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140981",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:46'>Comment 46:</a>
Never mind, I just looked up the PPL docs with respect to `MIP_Problem`.



---

archive/issue_comments_140982.json:
```json
{
    "body": "<a id='comment:47'>Comment 47:</a>\nGenerally speaking, looks good! There are a few nitpicks:\n\nIn #12553, I modified the PPL classes to derive from `SageObject`. This'll make it play nicer with the rest of Sage. Correspondingly you should override `_repr_`, not `__repr__`. Also needs to dump the actual information of the `MIP_problem` or its useless in other doctests. Speaking of which, the method needs a doctest. Also, in English you'd say \"A MIP\" not \"An MIP\", but really the output should be more specific.\n\nAll expensive operations (that need to solve a LP, say) must be wrapped in `sig_on/sig_off` blocks. Be careful with exceptions thrown, use try/finally if necessary. Otherwise you'll get into expensive but untinterruptable computations...\n\nCan we have a few less empty lines? No need for an empty line before and after the \"\"\" closing the docstring.\n\nThe INPUT: section should be formatted like\n\n```\n  - ``number`` (integer) -- description.\n```\nYou often have only a single \"-\" between type and description.\n\nCoverage should be 100%:\n\n```\n[vbraun@volker-desktop hg]$ sage -coverage sage/numerical/backends/ppl_backend.pyx \n----------------------------------------------------------------------\nsage/numerical/backends/ppl_backend.pyx\nERROR: Please add a `TestSuite(s).run()` doctest.\nSCORE sage/numerical/backends/ppl_backend.pyx: 72% (24 of 33)\n\nMissing documentation:\n\t * int add_variable(self, lower_bound=0.0, upper_bound=None, binary=False, continuous=True, integer=False, obj=0.0, name=None) except -1: \"\"\" Add a variable. This amounts to adding a new column to the matrix. By default, the variable is both positive and real. It has not been implemented for selecting the variable type yet. INPUT: - ``lower_bound`` - the lower bound of the variable (default: 0) - ``upper_bound`` - the upper bound of the variable (default: ``None``) - ``binary`` - ``True`` if the variable is binary (default: ``False``). - ``continuous`` - ``True`` if the variable is binary (default: ``True``). - ``integer`` - ``True`` if the variable is binary (default: ``False``). - ``obj`` - (optional) coefficient of this variable in the objective function (default: 0.0) - ``name`` - an optional name for the newly added variable (default: ``None``). OUTPUT: The index of the newly created variable EXAMPLE:: sage: from sage.numerical.backends.generic_backend import get_solver sage: p = get_solver(solver = \"PPL\") sage: p.ncols() 0 sage: p.add_variable() 0 sage: p.ncols() 1 sage: p.add_variable(lower_bound=-2.0) 1 sage: p.add_variable(name='x',obj=1.0) 2 sage: p.col_name(2) 'x' sage: p.objective_coefficient(2) 1.00000000000000 \"\"\" for i in range(len(self.Matrix)):\n\t * int add_variables(self, int n, lower_bound=0.0, upper_bound=None, binary=False, continuous=True, integer=False, obj=0.0, names=None) except -1: \"\"\" Add ``n`` variables. This amounts to adding new columns to the matrix. By default, the variables are both positive and real. It has not been implemented for selecting the variable type yet. INPUT: - ``n`` - the number of new variables (must be > 0) - ``lower_bound`` - the lower bound of the variable (default: 0) - ``upper_bound`` - the upper bound of the variable (default: ``None``) - ``binary`` - ``True`` if the variable is binary (default: ``False``). - ``continuous`` - ``True`` if the variable is binary (default: ``True``). - ``integer`` - ``True`` if the variable is binary (default: ``False``). - ``obj`` - (optional) coefficient of all variables in the objective function (default: 0.0) - ``names`` - optional list of names (default: ``None``) OUTPUT: The index of the variable created last. EXAMPLE:: sage: from sage.numerical.backends.generic_backend import get_solver sage: p = get_solver(solver = \"PPL\") sage: p.ncols() 0 sage: p.add_variables(5) 4 sage: p.ncols() 5 sage: p.add_variables(2, lower_bound=-2.0, names=['a','b']) 6 \"\"\" for k in range(n):\n\t * int solve(self) except -1: \"\"\" Solve the problem. .. NOTE:: This method raises ``MIPSolverException`` exceptions when the solution can not be computed for any reason (none exists, or the LP solver was not able to find it, etc...) EXAMPLE:: sage: from sage.numerical.backends.generic_backend import get_solver sage: p = get_solver(solver = \"PPL\") sage: p.add_linear_constraints(5, 0, None) sage: p.add_col(range(5), range(5)) sage: p.solve() 0 sage: p.objective_coefficient(0,1) sage: p.solve() Traceback (most recent call last):\n\n\nMissing doctests:\n\t * set_variable_type(self, int variable, int vtype):\n\t * set_verbosity(self, int level):\n\t * double get_objective_value(self):\n\t * double get_variable_value(self, int variable):\n\t * write_lp(self, char * name):\n\t * write_mps(self, char * name, int modern):\n```\n\nFinally, the ticket description should say which patch to apply for the sanity of the release manager.\n\nAlso, `ptrrsn_1` should put his name on the trac author list (http://trac.sagemath.org) and populate the Author: field on the ticket.",
    "created_at": "2012-06-15T13:38:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140982",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:47'>Comment 47:</a>
Generally speaking, looks good! There are a few nitpicks:

In #12553, I modified the PPL classes to derive from `SageObject`. This'll make it play nicer with the rest of Sage. Correspondingly you should override `_repr_`, not `__repr__`. Also needs to dump the actual information of the `MIP_problem` or its useless in other doctests. Speaking of which, the method needs a doctest. Also, in English you'd say "A MIP" not "An MIP", but really the output should be more specific.

All expensive operations (that need to solve a LP, say) must be wrapped in `sig_on/sig_off` blocks. Be careful with exceptions thrown, use try/finally if necessary. Otherwise you'll get into expensive but untinterruptable computations...

Can we have a few less empty lines? No need for an empty line before and after the """ closing the docstring.

The INPUT: section should be formatted like

```
  - ``number`` (integer) -- description.
```
You often have only a single "-" between type and description.

Coverage should be 100%:

```
[vbraun@volker-desktop hg]$ sage -coverage sage/numerical/backends/ppl_backend.pyx 
----------------------------------------------------------------------
sage/numerical/backends/ppl_backend.pyx
ERROR: Please add a `TestSuite(s).run()` doctest.
SCORE sage/numerical/backends/ppl_backend.pyx: 72% (24 of 33)

Missing documentation:
	 * int add_variable(self, lower_bound=0.0, upper_bound=None, binary=False, continuous=True, integer=False, obj=0.0, name=None) except -1: """ Add a variable. This amounts to adding a new column to the matrix. By default, the variable is both positive and real. It has not been implemented for selecting the variable type yet. INPUT: - ``lower_bound`` - the lower bound of the variable (default: 0) - ``upper_bound`` - the upper bound of the variable (default: ``None``) - ``binary`` - ``True`` if the variable is binary (default: ``False``). - ``continuous`` - ``True`` if the variable is binary (default: ``True``). - ``integer`` - ``True`` if the variable is binary (default: ``False``). - ``obj`` - (optional) coefficient of this variable in the objective function (default: 0.0) - ``name`` - an optional name for the newly added variable (default: ``None``). OUTPUT: The index of the newly created variable EXAMPLE:: sage: from sage.numerical.backends.generic_backend import get_solver sage: p = get_solver(solver = "PPL") sage: p.ncols() 0 sage: p.add_variable() 0 sage: p.ncols() 1 sage: p.add_variable(lower_bound=-2.0) 1 sage: p.add_variable(name='x',obj=1.0) 2 sage: p.col_name(2) 'x' sage: p.objective_coefficient(2) 1.00000000000000 """ for i in range(len(self.Matrix)):
	 * int add_variables(self, int n, lower_bound=0.0, upper_bound=None, binary=False, continuous=True, integer=False, obj=0.0, names=None) except -1: """ Add ``n`` variables. This amounts to adding new columns to the matrix. By default, the variables are both positive and real. It has not been implemented for selecting the variable type yet. INPUT: - ``n`` - the number of new variables (must be > 0) - ``lower_bound`` - the lower bound of the variable (default: 0) - ``upper_bound`` - the upper bound of the variable (default: ``None``) - ``binary`` - ``True`` if the variable is binary (default: ``False``). - ``continuous`` - ``True`` if the variable is binary (default: ``True``). - ``integer`` - ``True`` if the variable is binary (default: ``False``). - ``obj`` - (optional) coefficient of all variables in the objective function (default: 0.0) - ``names`` - optional list of names (default: ``None``) OUTPUT: The index of the variable created last. EXAMPLE:: sage: from sage.numerical.backends.generic_backend import get_solver sage: p = get_solver(solver = "PPL") sage: p.ncols() 0 sage: p.add_variables(5) 4 sage: p.ncols() 5 sage: p.add_variables(2, lower_bound=-2.0, names=['a','b']) 6 """ for k in range(n):
	 * int solve(self) except -1: """ Solve the problem. .. NOTE:: This method raises ``MIPSolverException`` exceptions when the solution can not be computed for any reason (none exists, or the LP solver was not able to find it, etc...) EXAMPLE:: sage: from sage.numerical.backends.generic_backend import get_solver sage: p = get_solver(solver = "PPL") sage: p.add_linear_constraints(5, 0, None) sage: p.add_col(range(5), range(5)) sage: p.solve() 0 sage: p.objective_coefficient(0,1) sage: p.solve() Traceback (most recent call last):


Missing doctests:
	 * set_variable_type(self, int variable, int vtype):
	 * set_verbosity(self, int level):
	 * double get_objective_value(self):
	 * double get_variable_value(self, int variable):
	 * write_lp(self, char * name):
	 * write_mps(self, char * name, int modern):
```

Finally, the ticket description should say which patch to apply for the sanity of the release manager.

Also, `ptrrsn_1` should put his name on the trac author list (http://trac.sagemath.org) and populate the Author: field on the ticket.



---

archive/issue_events_151657.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-06-15T13:38:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151657"
}
```



---

archive/issue_events_151658.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-06-15T13:38:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151658"
}
```



---

archive/issue_comments_140983.json:
```json
{
    "body": "Dependencies: **12553**",
    "created_at": "2012-06-15T13:38:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140983",
    "user": "https://github.com/vbraun"
}
```

Dependencies: **12553**



---

archive/issue_comments_140984.json:
```json
{
    "body": "<a id='comment:48'>Comment 48:</a>\nPlease also see a related #13142, which points out to the fact that show() would eventually need more work to be perfect for arbitrary precision.",
    "created_at": "2012-06-20T12:56:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140984",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:48'>Comment 48:</a>
Please also see a related #13142, which points out to the fact that show() would eventually need more work to be perfect for arbitrary precision.



---

archive/issue_comments_140985.json:
```json
{
    "body": "<a id='comment:49'>Comment 49:</a>\nI do not understand a strange kludge with `get_exact_variable_value` vs `get_variable_value`. Why don't you implement `get_ariable_value` to return what `get_exact_variable_value` does?\n\nYes, something needs to be changed in the `GenericBackend` to accommodate this. Is it hard? It certainly needs a generic type then.",
    "created_at": "2012-06-21T13:59:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140985",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:49'>Comment 49:</a>
I do not understand a strange kludge with `get_exact_variable_value` vs `get_variable_value`. Why don't you implement `get_ariable_value` to return what `get_exact_variable_value` does?

Yes, something needs to be changed in the `GenericBackend` to accommodate this. Is it hard? It certainly needs a generic type then.



---

archive/issue_comments_140986.json:
```json
{
    "body": "<a id='comment:50'>Comment 50:</a>\nPPL must be listed among available backends in the INPUT section of `MixedIntegerLinearProgram` in `mip.pyx`.\n\nAlso, I noticed that `get_min` and `get_max` in `mip.pyx` currently return floats even for the PPL backend, which is plainly wrong, and needs to be fixed. This is actually very easy, see/apply the attached patch (which also fixes few similar things\nrelated to setting coefficients of the objective function).",
    "created_at": "2012-06-21T14:05:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140986",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:50'>Comment 50:</a>
PPL must be listed among available backends in the INPUT section of `MixedIntegerLinearProgram` in `mip.pyx`.

Also, I noticed that `get_min` and `get_max` in `mip.pyx` currently return floats even for the PPL backend, which is plainly wrong, and needs to be fixed. This is actually very easy, see/apply the attached patch (which also fixes few similar things
related to setting coefficients of the objective function).



---

archive/issue_comments_140987.json:
```json
{
    "body": "Attachment: **[12533-fix_min_max.gz](https://github.com/sagemath/sage/files/ticket12533/12533-fix_min_max.gz)**\n\nfixing the imprecision bug in setting min/max of variables",
    "created_at": "2012-06-21T21:29:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140987",
    "user": "https://github.com/dimpase"
}
```

Attachment: **[12533-fix_min_max.gz](https://github.com/sagemath/sage/files/ticket12533/12533-fix_min_max.gz)**

fixing the imprecision bug in setting min/max of variables



---

archive/issue_comments_140988.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n There is currently no arbitrary precision LP solver backend available. It is sorely missed in some coding theory -related LP computations, see  #12418.\n \n One option is to hook up [PPL](http://www.sagemath.org/doc/reference/sage/libs/ppl.html), another might be to hook up GLPK for this purpose. Both have the corresponding functionality, it's just not exposed (?) in P(C)ython for GLPK, and not hooked up as an LP backend in case of PPL.\n+\n+To try this patch, apply \"trac_12533_arbitrary_precision_LP_solver_backend.patch\" on Sage 5.1.\n``````\n",
    "created_at": "2012-07-09T08:42:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140988",
    "user": "https://github.com/ptrrsn"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
 There is currently no arbitrary precision LP solver backend available. It is sorely missed in some coding theory -related LP computations, see  #12418.
 
 One option is to hook up [PPL](http://www.sagemath.org/doc/reference/sage/libs/ppl.html), another might be to hook up GLPK for this purpose. Both have the corresponding functionality, it's just not exposed (?) in P(C)ython for GLPK, and not hooked up as an LP backend in case of PPL.
+
+To try this patch, apply "trac_12533_arbitrary_precision_LP_solver_backend.patch" on Sage 5.1.
``````




---

archive/issue_comments_140989.json:
```json
{
    "body": "<a id='comment:52'>Comment 52:</a>\nHi,\n\nReplying to [@vbraun](#comment%3A47):\n> Generally speaking, looks good! There are a few nitpicks:\n> \n> In #12553, I modified the PPL classes to derive from `SageObject`. This'll make it play nicer with the rest of Sage. Correspondingly you should override `_repr_`, not `__repr__`.\n\nCould you explain what is the difference between them? I could not find any information about _repr_.\n\n> Also needs to dump the actual information of the `MIP_problem` or its useless in other doctests. Speaking of which, the method needs a doctest. Also, in English you'd say \"A MIP\" not \"An MIP\", but really the output should be more specific.\n\nOk, I have changed it. However, it is still not very specific because I could not get the constraint system information from the actual PPL object. There is constraints_begin() and constraints_end() methods in the actual PPL's MIP_Problem. However, I am not sure how to use them (they are const_iterators).\n> \n> All expensive operations (that need to solve a LP, say) must be wrapped in `sig_on/sig_off` blocks. Be careful with exceptions thrown, use try/finally if necessary. Otherwise you'll get into expensive but untinterruptable computations...\n\nOk, I have fixed this.\n> \n> Can we have a few less empty lines? No need for an empty line before and after the \"\"\" closing the docstring.\n\nYes, I have fixed them.\n> \n> The INPUT: section should be formatted like\n> \n> ```\n>   - ``number`` (integer) -- description.\n> ```\n> You often have only a single \"-\" between type and description.\n\nOk, fixed.\n> \n> Coverage should be 100%:\n> \n> ```\n> [vbraun@volker-desktop hg]$ sage -coverage sage/numerical/backends/ppl_backend.pyx \n> ----------------------------------------------------------------------\n> sage/numerical/backends/ppl_backend.pyx\n> ERROR: Please add a `TestSuite(s).run()` doctest.\n> SCORE sage/numerical/backends/ppl_backend.pyx: 72% (24 of 33)\n> \n> Missing documentation:\n> \t * int add_variable(self, lower_bound=0.0, upper_bound=None, binary=False, continuous=True, integer=False, obj=0.0, name=None) except -1: \"\"\" Add a variable. This amounts to adding a new column to the matrix. By default, the variable is both positive and real. It has not been implemented for selecting the variable type yet. INPUT: - ``lower_bound`` - the lower bound of the variable (default: 0) - ``upper_bound`` - the upper bound of the variable (default: ``None``) - ``binary`` - ``True`` if the variable is binary (default: ``False``). - ``continuous`` - ``True`` if the variable is binary (default: ``True``). - ``integer`` - ``True`` if the variable is binary (default: ``False``). - ``obj`` - (optional) coefficient of this variable in the objective function (default: 0.0) - ``name`` - an optional name for the newly added variable (default: ``None``). OUTPUT: The index of the newly created variable EXAMPLE:: sage: from sage.numerical.backends.generic_backend import get_solver sage: p = get_solver(solver = \"PPL\") sage: p.ncols() 0 sage: p.add_variable() 0 sage: p.ncols() 1 sage: p.add_variable(lower_bound=-2.0) 1 sage: p.add_variable(name='x',obj=1.0) 2 sage: p.col_name(2) 'x' sage: p.objective_coefficient(2) 1.00000000000000 \"\"\" for i in range(len(self.Matrix)):\n> \t * int add_variables(self, int n, lower_bound=0.0, upper_bound=None, binary=False, continuous=True, integer=False, obj=0.0, names=None) except -1: \"\"\" Add ``n`` variables. This amounts to adding new columns to the matrix. By default, the variables are both positive and real. It has not been implemented for selecting the variable type yet. INPUT: - ``n`` - the number of new variables (must be > 0) - ``lower_bound`` - the lower bound of the variable (default: 0) - ``upper_bound`` - the upper bound of the variable (default: ``None``) - ``binary`` - ``True`` if the variable is binary (default: ``False``). - ``continuous`` - ``True`` if the variable is binary (default: ``True``). - ``integer`` - ``True`` if the variable is binary (default: ``False``). - ``obj`` - (optional) coefficient of all variables in the objective function (default: 0.0) - ``names`` - optional list of names (default: ``None``) OUTPUT: The index of the variable created last. EXAMPLE:: sage: from sage.numerical.backends.generic_backend import get_solver sage: p = get_solver(solver = \"PPL\") sage: p.ncols() 0 sage: p.add_variables(5) 4 sage: p.ncols() 5 sage: p.add_variables(2, lower_bound=-2.0, names=['a','b']) 6 \"\"\" for k in range(n):\n> \t * int solve(self) except -1: \"\"\" Solve the problem. .. NOTE:: This method raises ``MIPSolverException`` exceptions when the solution can not be computed for any reason (none exists, or the LP solver was not able to find it, etc...) EXAMPLE:: sage: from sage.numerical.backends.generic_backend import get_solver sage: p = get_solver(solver = \"PPL\") sage: p.add_linear_constraints(5, 0, None) sage: p.add_col(range(5), range(5)) sage: p.solve() 0 sage: p.objective_coefficient(0,1) sage: p.solve() Traceback (most recent call last):\n> \n> \n> Missing doctests:\n> \t * set_variable_type(self, int variable, int vtype):\n> \t * set_verbosity(self, int level):\n> \t * double get_objective_value(self):\n> \t * double get_variable_value(self, int variable):\n> \t * write_lp(self, char * name):\n> \t * write_mps(self, char * name, int modern):\n> ```\n\nI have fixed the missing doctests by adding some doctests. However, the missing documentation error (all 3 of them) cannot be fixed although I have added enough documentations. I think the documentation detection system in sage probably contains bug (I am not sure) because the same things also happen when we test coverage on GLPK and Gurobi backend. The missing documentation error would only disappear if we removed \"except -1\" from each functions.\n\n> \n> Finally, the ticket description should say which patch to apply for the sanity of the release manager.\n> \n> Also, `ptrrsn_1` should put his name on the trac author list (http://trac.sagemath.org) and populate the Author: field on the ticket.\n\nOk, done.\n\nThank you very much.",
    "created_at": "2012-07-09T08:55:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140989",
    "user": "https://github.com/ptrrsn"
}
```

<a id='comment:52'>Comment 52:</a>
Hi,

Replying to [@vbraun](#comment%3A47):
> Generally speaking, looks good! There are a few nitpicks:
> 
> In #12553, I modified the PPL classes to derive from `SageObject`. This'll make it play nicer with the rest of Sage. Correspondingly you should override `_repr_`, not `__repr__`.

Could you explain what is the difference between them? I could not find any information about _repr_.

> Also needs to dump the actual information of the `MIP_problem` or its useless in other doctests. Speaking of which, the method needs a doctest. Also, in English you'd say "A MIP" not "An MIP", but really the output should be more specific.

Ok, I have changed it. However, it is still not very specific because I could not get the constraint system information from the actual PPL object. There is constraints_begin() and constraints_end() methods in the actual PPL's MIP_Problem. However, I am not sure how to use them (they are const_iterators).
> 
> All expensive operations (that need to solve a LP, say) must be wrapped in `sig_on/sig_off` blocks. Be careful with exceptions thrown, use try/finally if necessary. Otherwise you'll get into expensive but untinterruptable computations...

Ok, I have fixed this.
> 
> Can we have a few less empty lines? No need for an empty line before and after the """ closing the docstring.

Yes, I have fixed them.
> 
> The INPUT: section should be formatted like
> 
> ```
>   - ``number`` (integer) -- description.
> ```
> You often have only a single "-" between type and description.

Ok, fixed.
> 
> Coverage should be 100%:
> 
> ```
> [vbraun@volker-desktop hg]$ sage -coverage sage/numerical/backends/ppl_backend.pyx 
> ----------------------------------------------------------------------
> sage/numerical/backends/ppl_backend.pyx
> ERROR: Please add a `TestSuite(s).run()` doctest.
> SCORE sage/numerical/backends/ppl_backend.pyx: 72% (24 of 33)
> 
> Missing documentation:
> 	 * int add_variable(self, lower_bound=0.0, upper_bound=None, binary=False, continuous=True, integer=False, obj=0.0, name=None) except -1: """ Add a variable. This amounts to adding a new column to the matrix. By default, the variable is both positive and real. It has not been implemented for selecting the variable type yet. INPUT: - ``lower_bound`` - the lower bound of the variable (default: 0) - ``upper_bound`` - the upper bound of the variable (default: ``None``) - ``binary`` - ``True`` if the variable is binary (default: ``False``). - ``continuous`` - ``True`` if the variable is binary (default: ``True``). - ``integer`` - ``True`` if the variable is binary (default: ``False``). - ``obj`` - (optional) coefficient of this variable in the objective function (default: 0.0) - ``name`` - an optional name for the newly added variable (default: ``None``). OUTPUT: The index of the newly created variable EXAMPLE:: sage: from sage.numerical.backends.generic_backend import get_solver sage: p = get_solver(solver = "PPL") sage: p.ncols() 0 sage: p.add_variable() 0 sage: p.ncols() 1 sage: p.add_variable(lower_bound=-2.0) 1 sage: p.add_variable(name='x',obj=1.0) 2 sage: p.col_name(2) 'x' sage: p.objective_coefficient(2) 1.00000000000000 """ for i in range(len(self.Matrix)):
> 	 * int add_variables(self, int n, lower_bound=0.0, upper_bound=None, binary=False, continuous=True, integer=False, obj=0.0, names=None) except -1: """ Add ``n`` variables. This amounts to adding new columns to the matrix. By default, the variables are both positive and real. It has not been implemented for selecting the variable type yet. INPUT: - ``n`` - the number of new variables (must be > 0) - ``lower_bound`` - the lower bound of the variable (default: 0) - ``upper_bound`` - the upper bound of the variable (default: ``None``) - ``binary`` - ``True`` if the variable is binary (default: ``False``). - ``continuous`` - ``True`` if the variable is binary (default: ``True``). - ``integer`` - ``True`` if the variable is binary (default: ``False``). - ``obj`` - (optional) coefficient of all variables in the objective function (default: 0.0) - ``names`` - optional list of names (default: ``None``) OUTPUT: The index of the variable created last. EXAMPLE:: sage: from sage.numerical.backends.generic_backend import get_solver sage: p = get_solver(solver = "PPL") sage: p.ncols() 0 sage: p.add_variables(5) 4 sage: p.ncols() 5 sage: p.add_variables(2, lower_bound=-2.0, names=['a','b']) 6 """ for k in range(n):
> 	 * int solve(self) except -1: """ Solve the problem. .. NOTE:: This method raises ``MIPSolverException`` exceptions when the solution can not be computed for any reason (none exists, or the LP solver was not able to find it, etc...) EXAMPLE:: sage: from sage.numerical.backends.generic_backend import get_solver sage: p = get_solver(solver = "PPL") sage: p.add_linear_constraints(5, 0, None) sage: p.add_col(range(5), range(5)) sage: p.solve() 0 sage: p.objective_coefficient(0,1) sage: p.solve() Traceback (most recent call last):
> 
> 
> Missing doctests:
> 	 * set_variable_type(self, int variable, int vtype):
> 	 * set_verbosity(self, int level):
> 	 * double get_objective_value(self):
> 	 * double get_variable_value(self, int variable):
> 	 * write_lp(self, char * name):
> 	 * write_mps(self, char * name, int modern):
> ```

I have fixed the missing doctests by adding some doctests. However, the missing documentation error (all 3 of them) cannot be fixed although I have added enough documentations. I think the documentation detection system in sage probably contains bug (I am not sure) because the same things also happen when we test coverage on GLPK and Gurobi backend. The missing documentation error would only disappear if we removed "except -1" from each functions.

> 
> Finally, the ticket description should say which patch to apply for the sanity of the release manager.
> 
> Also, `ptrrsn_1` should put his name on the trac author list (http://trac.sagemath.org) and populate the Author: field on the ticket.

Ok, done.

Thank you very much.



---

archive/issue_comments_140990.json:
```json
{
    "body": "<a id='comment:53'>Comment 53:</a>\nHi,\n\nReplying to [@dimpase](#comment%3A49):\n> I do not understand a strange kludge with `get_exact_variable_value` vs `get_variable_value`. Why don't you implement `get_ariable_value` to return what `get_exact_variable_value` does?\n> \n> Yes, something needs to be changed in the `GenericBackend` to accommodate this. Is it hard? It certainly needs a generic type then.\n> \n> \n\nOk, I have changed the GenericBackend and also GLPK Backend a bit to accomodate this. Now, we have only get_variable_value and get_objective_value.\n\nThank you.",
    "created_at": "2012-07-09T08:58:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140990",
    "user": "https://github.com/ptrrsn"
}
```

<a id='comment:53'>Comment 53:</a>
Hi,

Replying to [@dimpase](#comment%3A49):
> I do not understand a strange kludge with `get_exact_variable_value` vs `get_variable_value`. Why don't you implement `get_ariable_value` to return what `get_exact_variable_value` does?
> 
> Yes, something needs to be changed in the `GenericBackend` to accommodate this. Is it hard? It certainly needs a generic type then.
> 
> 

Ok, I have changed the GenericBackend and also GLPK Backend a bit to accomodate this. Now, we have only get_variable_value and get_objective_value.

Thank you.



---

archive/issue_events_151659.json:
```json
{
    "actor": "https://github.com/ptrrsn",
    "created_at": "2012-07-09T08:59:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151659"
}
```



---

archive/issue_events_151660.json:
```json
{
    "actor": "https://github.com/ptrrsn",
    "created_at": "2012-07-09T08:59:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151660"
}
```



---

archive/issue_comments_140991.json:
```json
{
    "body": "<a id='comment:55'>Comment 55:</a>\nReplying to [@ptrrsn](#comment%3A52):\n\n> Replying to [@vbraun](#comment%3A47):\n> > Generally speaking, looks good! There are a few nitpicks:\n> > \n> > In #12553, I modified the PPL classes to derive from `SageObject`. This'll make it play nicer with the rest of Sage. Correspondingly you should override `_repr_`, not `__repr__`.\n\n> Could you explain what is the difference between them? I could not find any information about _repr_.\n\nI think Volker's #12553 depends on a slew of tickets that won't make it into 5.1. I'd like this to be kept for a later ticket than for now.",
    "created_at": "2012-07-09T09:03:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140991",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:55'>Comment 55:</a>
Replying to [@ptrrsn](#comment%3A52):

> Replying to [@vbraun](#comment%3A47):
> > Generally speaking, looks good! There are a few nitpicks:
> > 
> > In #12553, I modified the PPL classes to derive from `SageObject`. This'll make it play nicer with the rest of Sage. Correspondingly you should override `_repr_`, not `__repr__`.

> Could you explain what is the difference between them? I could not find any information about _repr_.

I think Volker's #12553 depends on a slew of tickets that won't make it into 5.1. I'd like this to be kept for a later ticket than for now.



---

archive/issue_comments_140992.json:
```json
{
    "body": "<a id='comment:56'>Comment 56:</a>\nReplying to [@ptrrsn](#comment%3A53):\n> Hi,\n> \n> Replying to [@dimpase](#comment%3A49):\n> > I do not understand a strange kludge with `get_exact_variable_value` vs `get_variable_value`. Why don't you implement `get_ariable_value` to return what `get_exact_variable_value` does?\n> > \n> > Yes, something needs to be changed in the `GenericBackend` to accommodate this. Is it hard? It certainly needs a generic type then.\n> > \n> > \n\n> \n> Ok, I have changed the GenericBackend and also GLPK Backend a bit to accomodate this. Now, we have only get_variable_value and get_objective_value.\n\n\nThat's terrific! \nNathann, could you have a look into this?\n\nI understand that you also took care of 12533-fix_min_max.\n\n\n> \n> Thank you.",
    "created_at": "2012-07-09T09:06:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140992",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:56'>Comment 56:</a>
Replying to [@ptrrsn](#comment%3A53):
> Hi,
> 
> Replying to [@dimpase](#comment%3A49):
> > I do not understand a strange kludge with `get_exact_variable_value` vs `get_variable_value`. Why don't you implement `get_ariable_value` to return what `get_exact_variable_value` does?
> > 
> > Yes, something needs to be changed in the `GenericBackend` to accommodate this. Is it hard? It certainly needs a generic type then.
> > 
> > 

> 
> Ok, I have changed the GenericBackend and also GLPK Backend a bit to accomodate this. Now, we have only get_variable_value and get_objective_value.


That's terrific! 
Nathann, could you have a look into this?

I understand that you also took care of 12533-fix_min_max.


> 
> Thank you.



---

archive/issue_comments_140993.json:
```json
{
    "body": "<a id='comment:57'>Comment 57:</a>\nEverything in Sage should derive from `SageObject`. See http://www.sagemath.org/doc/developer/coding_in_python.html#print-representation for more about the use of `_repr_`. The `SageObject` defines the double underscore methods (`__repr__`, a Python special method) and will try to dispatch them to the single-underscore  \nversion (`_repr_`, a Sage convention).\n\n\nReplying to [@dimpase](#comment%3A55):\n> I think Volker's #12553 depends on a slew of tickets that won't make it into 5.1.\n\nThis ticket probably won't make it into 5.2. If progress is too slow for you then feel free to review my patches ;-)",
    "created_at": "2012-07-09T10:02:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140993",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:57'>Comment 57:</a>
Everything in Sage should derive from `SageObject`. See http://www.sagemath.org/doc/developer/coding_in_python.html#print-representation for more about the use of `_repr_`. The `SageObject` defines the double underscore methods (`__repr__`, a Python special method) and will try to dispatch them to the single-underscore  
version (`_repr_`, a Sage convention).


Replying to [@dimpase](#comment%3A55):
> I think Volker's #12553 depends on a slew of tickets that won't make it into 5.1.

This ticket probably won't make it into 5.2. If progress is too slow for you then feel free to review my patches ;-)



---

archive/issue_comments_140994.json:
```json
{
    "body": "<a id='comment:58'>Comment 58:</a>\nReplying to [@ptrrsn](#comment%3A52):\n> I think the documentation detection system in sage probably contains bug (I am not sure) because the same things also happen when we test coverage on GLPK and Gurobi backend. The missing documentation error would only disappear if we removed \"except -1\" from each functions.\n\nOh I didn't know that. Can you open a bug on trac so we don't forget about this issue?",
    "created_at": "2012-07-09T10:05:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140994",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:58'>Comment 58:</a>
Replying to [@ptrrsn](#comment%3A52):
> I think the documentation detection system in sage probably contains bug (I am not sure) because the same things also happen when we test coverage on GLPK and Gurobi backend. The missing documentation error would only disappear if we removed "except -1" from each functions.

Oh I didn't know that. Can you open a bug on trac so we don't forget about this issue?



---

archive/issue_comments_140995.json:
```json
{
    "body": "<a id='comment:59'>Comment 59:</a>\nReplying to [@vbraun](#comment%3A57):\n\n> Replying to [@dimpase](#comment%3A55):\n> > I think Volker's #12553 depends on a slew of tickets that won't make it into 5.1.\n\n> \n> This ticket probably won't make it into 5.2. If progress is too slow for you then feel free to review my patches ;-)\n> \n\nwell, #12553 depends on so many patches that I got lost applying all of them manually. There should be a better way of dealing with this, say, putting the whole thing on github or bitbucket. \nIt also depends upon a lot of patches that look too far from my areas of competence to have any say upon.\nIn particular, #12553 depends upon \n\n```\n#11310 - Monkey-patch catchall `except:`\n```\nwhich is ear-marked `sage-pending`. By asking this ticket to depend upon #12553, you are effectively relegating it to `sage-pending`, aren't you?",
    "created_at": "2012-07-09T13:25:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140995",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:59'>Comment 59:</a>
Replying to [@vbraun](#comment%3A57):

> Replying to [@dimpase](#comment%3A55):
> > I think Volker's #12553 depends on a slew of tickets that won't make it into 5.1.

> 
> This ticket probably won't make it into 5.2. If progress is too slow for you then feel free to review my patches ;-)
> 

well, #12553 depends on so many patches that I got lost applying all of them manually. There should be a better way of dealing with this, say, putting the whole thing on github or bitbucket. 
It also depends upon a lot of patches that look too far from my areas of competence to have any say upon.
In particular, #12553 depends upon 

```
#11310 - Monkey-patch catchall `except:`
```
which is ear-marked `sage-pending`. By asking this ticket to depend upon #12553, you are effectively relegating it to `sage-pending`, aren't you?



---

archive/issue_events_151661.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-07-20T15:42:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151661"
}
```



---

archive/issue_events_151662.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-07-20T15:42:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151662"
}
```



---

archive/issue_comments_140996.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,4 +2,4 @@\n \n One option is to hook up [PPL](http://www.sagemath.org/doc/reference/sage/libs/ppl.html), another might be to hook up GLPK for this purpose. Both have the corresponding functionality, it's just not exposed (?) in P(C)ython for GLPK, and not hooked up as an LP backend in case of PPL.\n \n-To try this patch, apply \"trac_12533_arbitrary_precision_LP_solver_backend.patch\" on Sage 5.1.\n+To try this patch, apply \"trac_12533_arbitrary_precision_LP_solver_backend.patch\" on Sage 5.1 (or 5.2.rc0)\n``````\n",
    "created_at": "2012-07-20T15:42:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140996",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,4 +2,4 @@
 
 One option is to hook up [PPL](http://www.sagemath.org/doc/reference/sage/libs/ppl.html), another might be to hook up GLPK for this purpose. Both have the corresponding functionality, it's just not exposed (?) in P(C)ython for GLPK, and not hooked up as an LP backend in case of PPL.
 
-To try this patch, apply "trac_12533_arbitrary_precision_LP_solver_backend.patch" on Sage 5.1.
+To try this patch, apply "trac_12533_arbitrary_precision_LP_solver_backend.patch" on Sage 5.1 (or 5.2.rc0)
``````




---

archive/issue_comments_140997.json:
```json
{
    "body": "<a id='comment:60'>Comment 60:</a>\nStill builds and works on `Sage 5.2.rc0`.",
    "created_at": "2012-07-20T15:42:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140997",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:60'>Comment 60:</a>
Still builds and works on `Sage 5.2.rc0`.



---

archive/issue_comments_140998.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,4 +2,4 @@\n \n One option is to hook up [PPL](http://www.sagemath.org/doc/reference/sage/libs/ppl.html), another might be to hook up GLPK for this purpose. Both have the corresponding functionality, it's just not exposed (?) in P(C)ython for GLPK, and not hooked up as an LP backend in case of PPL.\n \n-To try this patch, apply \"trac_12533_arbitrary_precision_LP_solver_backend.patch\" on Sage 5.1 (or 5.2.rc0)\n+To try this patch, apply [\"trac_12533_arbitrary_precision_LP_solver_backend.patch\"](https://github.com/sagemath/sage/files/ticket12533/trac_12533_arbitrary_precision_LP_solver_backend.patch.gz) on Sage 5.1 (or 5.2.rc0)\n``````\n",
    "created_at": "2012-07-21T07:31:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140998",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,4 +2,4 @@
 
 One option is to hook up [PPL](http://www.sagemath.org/doc/reference/sage/libs/ppl.html), another might be to hook up GLPK for this purpose. Both have the corresponding functionality, it's just not exposed (?) in P(C)ython for GLPK, and not hooked up as an LP backend in case of PPL.
 
-To try this patch, apply "trac_12533_arbitrary_precision_LP_solver_backend.patch" on Sage 5.1 (or 5.2.rc0)
+To try this patch, apply ["trac_12533_arbitrary_precision_LP_solver_backend.patch"](https://github.com/sagemath/sage/files/ticket12533/trac_12533_arbitrary_precision_LP_solver_backend.patch.gz) on Sage 5.1 (or 5.2.rc0)
``````




---

archive/issue_comments_140999.json:
```json
{
    "body": "<a id='comment:62'>Comment 62:</a>\nthe changes done to `sage/numerical/backends/glpk_backend.pyx` must also be done to the other affected LP backends.\n\nNathann (posted by Dima)\n\ne.g. for Coin one should do:\n\n```\ndiff --git a/sage/numerical/backends/coin_backend.pyx b/sage/numerical/backends/coin_backend.pyx\n--- a/sage/numerical/backends/coin_backend.pyx\n+++ b/sage/numerical/backends/coin_backend.pyx\n@@ -770,7 +770,7 @@\n         del self.model\n         self.model = model\n \n-    cpdef double get_objective_value(self):\n+    cpdef get_objective_value(self):\n         r\"\"\"\n         Returns the value of the objective function.\n \n@@ -797,7 +797,7 @@\n         \"\"\"\n         return self.model.solver().getObjValue() + self.obj_constant_term\n \n-    cpdef double get_variable_value(self, int variable):\n+    cpdef get_variable_value(self, int variable):\n         r\"\"\"\n         Returns the value of a variable given by the solver.\n```",
    "created_at": "2012-07-21T13:50:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-140999",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:62'>Comment 62:</a>
the changes done to `sage/numerical/backends/glpk_backend.pyx` must also be done to the other affected LP backends.

Nathann (posted by Dima)

e.g. for Coin one should do:

```
diff --git a/sage/numerical/backends/coin_backend.pyx b/sage/numerical/backends/coin_backend.pyx
--- a/sage/numerical/backends/coin_backend.pyx
+++ b/sage/numerical/backends/coin_backend.pyx
@@ -770,7 +770,7 @@
         del self.model
         self.model = model
 
-    cpdef double get_objective_value(self):
+    cpdef get_objective_value(self):
         r"""
         Returns the value of the objective function.
 
@@ -797,7 +797,7 @@
         """
         return self.model.solver().getObjValue() + self.obj_constant_term
 
-    cpdef double get_variable_value(self, int variable):
+    cpdef get_variable_value(self, int variable):
         r"""
         Returns the value of a variable given by the solver.
```



---

archive/issue_events_151663.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-07-21T13:50:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151663"
}
```



---

archive/issue_events_151664.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-07-21T13:50:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151664"
}
```



---

archive/issue_comments_141000.json:
```json
{
    "body": "<a id='comment:63'>Comment 63:</a>\nPlease see attached  double_trouble_fixing.patch for fixes related to hardcoded `double` and `0.0`. It also fixes several bugs in `ppl_backend`, namely \n absence of code dealing with `obj_constant_term` and\n \n a bug in  `variable_lower_bound()` and `variable_upper_bound()` preventing a possibility to set bounds to `None`.",
    "created_at": "2012-07-22T14:58:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-141000",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:63'>Comment 63:</a>
Please see attached  double_trouble_fixing.patch for fixes related to hardcoded `double` and `0.0`. It also fixes several bugs in `ppl_backend`, namely 
 absence of code dealing with `obj_constant_term` and
 
 a bug in  `variable_lower_bound()` and `variable_upper_bound()` preventing a possibility to set bounds to `None`.



---

archive/issue_comments_141001.json:
```json
{
    "body": "fixing hardcoded double and 0.0, etc",
    "created_at": "2012-07-22T15:01:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-141001",
    "user": "https://github.com/dimpase"
}
```

fixing hardcoded double and 0.0, etc



---

archive/issue_comments_141002.json:
```json
{
    "body": "Attachment: **[double_trouble_fixing.patch.gz](https://github.com/sagemath/sage/files/ticket12533/double_trouble_fixing.patch.gz)**",
    "created_at": "2012-09-11T03:34:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-141002",
    "user": "https://github.com/ptrrsn"
}
```

Attachment: **[double_trouble_fixing.patch.gz](https://github.com/sagemath/sage/files/ticket12533/double_trouble_fixing.patch.gz)**



---

archive/issue_events_151665.json:
```json
{
    "actor": "https://github.com/ptrrsn",
    "created_at": "2012-09-11T03:35:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151665"
}
```



---

archive/issue_events_151666.json:
```json
{
    "actor": "https://github.com/ptrrsn",
    "created_at": "2012-09-11T03:35:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151666"
}
```



---

archive/issue_comments_141003.json:
```json
{
    "body": "<a id='comment:64'>Comment 64:</a>\nAttachment: **[trac_12533_arbitrary_precision_LP_solver_backend.patch.gz](https://github.com/sagemath/sage/files/ticket12533/trac_12533_arbitrary_precision_LP_solver_backend.patch.gz)**",
    "created_at": "2012-09-11T03:35:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-141003",
    "user": "https://github.com/ptrrsn"
}
```

<a id='comment:64'>Comment 64:</a>
Attachment: **[trac_12533_arbitrary_precision_LP_solver_backend.patch.gz](https://github.com/sagemath/sage/files/ticket12533/trac_12533_arbitrary_precision_LP_solver_backend.patch.gz)**



---

archive/issue_comments_141004.json:
```json
{
    "body": "<a id='comment:65'>Comment 65:</a>\nReplying to [@ptrrsn](#comment%3A64):\nGreat, compiles on 5.4.beta0, thanks! By the way:\n\n```\npython `which cython` --cplus --old-style-globals --embed-positions --directive cdivision=True,autotestdict=False,fast_getattr=True -I/usr/local/src/sage/sage-5.4.beta0/devel/sage-main -o sage/libs/ppl.cpp sage/libs/ppl.pyx\nwarning: sage/libs/ppl.pyx:1925:97: local variable 'maximum' referenced before assignment\nwarning: sage/libs/ppl.pyx:1996:97: local variable 'minimum' referenced before assignment\n```\nHave you forgotten initialization there?",
    "created_at": "2012-09-13T07:18:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-141004",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:65'>Comment 65:</a>
Replying to [@ptrrsn](#comment%3A64):
Great, compiles on 5.4.beta0, thanks! By the way:

```
python `which cython` --cplus --old-style-globals --embed-positions --directive cdivision=True,autotestdict=False,fast_getattr=True -I/usr/local/src/sage/sage-5.4.beta0/devel/sage-main -o sage/libs/ppl.cpp sage/libs/ppl.pyx
warning: sage/libs/ppl.pyx:1925:97: local variable 'maximum' referenced before assignment
warning: sage/libs/ppl.pyx:1996:97: local variable 'minimum' referenced before assignment
```
Have you forgotten initialization there?



---

archive/issue_comments_141005.json:
```json
{
    "body": "<a id='comment:66'>Comment 66:</a>\nThe \"referenced before assignment\" warning is invalid, see http://trac.cython.org/cython_trac/ticket/714. Its a tricky case because the code in question involves C++ call by reference, but Python of course only knows call by value.",
    "created_at": "2012-10-02T14:59:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-141005",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:66'>Comment 66:</a>
The "referenced before assignment" warning is invalid, see http://trac.cython.org/cython_trac/ticket/714. Its a tricky case because the code in question involves C++ call by reference, but Python of course only knows call by value.



---

archive/issue_comments_141006.json:
```json
{
    "body": "<a id='comment:67'>Comment 67:</a>\npatchbot: apply trac_12533_arbitrary_precision_LP_solver_backend.patch",
    "created_at": "2012-10-02T15:04:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-141006",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:67'>Comment 67:</a>
patchbot: apply trac_12533_arbitrary_precision_LP_solver_backend.patch



---

archive/issue_comments_141007.json:
```json
{
    "body": "<a id='comment:68'>Comment 68:</a>\npatchbot: apply only trac_12533_arbitrary_precision_LP_solver_backend.patch",
    "created_at": "2012-10-02T17:34:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-141007",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:68'>Comment 68:</a>
patchbot: apply only trac_12533_arbitrary_precision_LP_solver_backend.patch



---

archive/issue_comments_141008.json:
```json
{
    "body": "Attachment: **[trac_12533_arbitrary_precision_LP_solver_backend_for_5.3.patch.gz](https://github.com/sagemath/sage/files/ticket12533/trac_12533_arbitrary_precision_LP_solver_backend_for_5.3.patch.gz)**\n\nfor sage 5.3",
    "created_at": "2012-10-11T21:51:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-141008",
    "user": "https://github.com/ptrrsn"
}
```

Attachment: **[trac_12533_arbitrary_precision_LP_solver_backend_for_5.3.patch.gz](https://github.com/sagemath/sage/files/ticket12533/trac_12533_arbitrary_precision_LP_solver_backend_for_5.3.patch.gz)**

for sage 5.3



---

archive/issue_comments_141009.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,4 +2,4 @@\n \n One option is to hook up [PPL](http://www.sagemath.org/doc/reference/sage/libs/ppl.html), another might be to hook up GLPK for this purpose. Both have the corresponding functionality, it's just not exposed (?) in P(C)ython for GLPK, and not hooked up as an LP backend in case of PPL.\n \n-To try this patch, apply [\"trac_12533_arbitrary_precision_LP_solver_backend.patch\"](https://github.com/sagemath/sage/files/ticket12533/trac_12533_arbitrary_precision_LP_solver_backend.patch.gz) on Sage 5.1 (or 5.2.rc0)\n+To try this patch, apply [\"trac_12533_arbitrary_precision_LP_solver_backend_for_5.3.patch\"](https://github.com/sagemath/sage/files/ticket12533/trac_12533_arbitrary_precision_LP_solver_backend_for_5.3.patch.gz) on Sage 5.3\n``````\n",
    "created_at": "2012-10-11T21:52:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-141009",
    "user": "https://github.com/ptrrsn"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,4 +2,4 @@
 
 One option is to hook up [PPL](http://www.sagemath.org/doc/reference/sage/libs/ppl.html), another might be to hook up GLPK for this purpose. Both have the corresponding functionality, it's just not exposed (?) in P(C)ython for GLPK, and not hooked up as an LP backend in case of PPL.
 
-To try this patch, apply ["trac_12533_arbitrary_precision_LP_solver_backend.patch"](https://github.com/sagemath/sage/files/ticket12533/trac_12533_arbitrary_precision_LP_solver_backend.patch.gz) on Sage 5.1 (or 5.2.rc0)
+To try this patch, apply ["trac_12533_arbitrary_precision_LP_solver_backend_for_5.3.patch"](https://github.com/sagemath/sage/files/ticket12533/trac_12533_arbitrary_precision_LP_solver_backend_for_5.3.patch.gz) on Sage 5.3
``````




---

archive/issue_comments_141010.json:
```json
{
    "body": "Description changed:\n``````diff\n\n``````\n",
    "created_at": "2012-10-11T21:53:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-141010",
    "user": "https://github.com/ptrrsn"
}
```

Description changed:
``````diff

``````




---

archive/issue_comments_141011.json:
```json
{
    "body": "Changed work issues from **see the latest comments** to none",
    "created_at": "2012-10-14T12:49:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-141011",
    "user": "https://github.com/dimpase"
}
```

Changed work issues from **see the latest comments** to none



---

archive/issue_comments_141012.json:
```json
{
    "body": "Author: **Risan**",
    "created_at": "2012-10-14T12:49:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-141012",
    "user": "https://github.com/dimpase"
}
```

Author: **Risan**



---

archive/issue_comments_141013.json:
```json
{
    "body": "Changed reviewer from **David Coudert, Nathann Cohen** to **David Coudert, Nathann Cohen, Dmitrii Pasechnik**",
    "created_at": "2012-10-14T12:49:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-141013",
    "user": "https://github.com/dimpase"
}
```

Changed reviewer from **David Coudert, Nathann Cohen** to **David Coudert, Nathann Cohen, Dmitrii Pasechnik**



---

archive/issue_events_151667.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-10-14T12:49:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151667"
}
```



---

archive/issue_events_151668.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-10-14T12:49:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151668"
}
```



---

archive/issue_comments_141014.json:
```json
{
    "body": "<a id='comment:71'>Comment 71:</a>\nWorks on `5.4.rc1`, Linux and OSX 10.6. Positive review!",
    "created_at": "2012-10-14T12:49:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-141014",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:71'>Comment 71:</a>
Works on `5.4.rc1`, Linux and OSX 10.6. Positive review!



---

archive/issue_comments_141015.json:
```json
{
    "body": "Changed dependencies from **12553** to **#12553**",
    "created_at": "2012-10-14T12:59:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-141015",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **12553** to **#12553**



---

archive/issue_events_151669.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-10-14T12:59:50Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "milestone_number": null,
    "milestone_title": "sage-5.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151669"
}
```



---

archive/issue_events_151670.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-10-14T12:59:50Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "milestone_number": null,
    "milestone_title": "sage-5.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151670"
}
```



---

archive/issue_events_151671.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-10-17T21:11:05Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "milestone_number": null,
    "milestone_title": "sage-5.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151671"
}
```



---

archive/issue_events_151672.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-10-17T21:11:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151672"
}
```



---

archive/issue_comments_141016.json:
```json
{
    "body": "Changed dependencies from **#12553** to **#12553, #13646**",
    "created_at": "2012-10-23T15:25:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-141016",
    "user": "https://github.com/vbraun"
}
```

Changed dependencies from **#12553** to **#12553, #13646**



---

archive/issue_comments_141017.json:
```json
{
    "body": "<a id='comment:74'>Comment 74:</a>\nRebased on top of #13646. No real changes were necessary.",
    "created_at": "2012-10-23T15:25:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-141017",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:74'>Comment 74:</a>
Rebased on top of #13646. No real changes were necessary.



---

archive/issue_comments_141018.json:
```json
{
    "body": "<a id='comment:75'>Comment 75:</a>\nReplying to [@vbraun](#comment%3A74):\n> Rebased on top of #13646. No real changes were necessary.\n\nBut how can it be so? This backend does not compute in RDF, whereas in #13646 linear forms are RDF-hardcored?",
    "created_at": "2012-10-23T17:18:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-141018",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:75'>Comment 75:</a>
Replying to [@vbraun](#comment%3A74):
> Rebased on top of #13646. No real changes were necessary.

But how can it be so? This backend does not compute in RDF, whereas in #13646 linear forms are RDF-hardcored?



---

archive/issue_comments_141019.json:
```json
{
    "body": "Updated patch",
    "created_at": "2012-10-23T17:27:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-141019",
    "user": "https://github.com/vbraun"
}
```

Updated patch



---

archive/issue_comments_141020.json:
```json
{
    "body": "<a id='comment:76'>Comment 76:</a>\nAttachment: **[trac_12533_arbitrary_precision_LP_solver_backend_for_5.3_vb.patch.gz](https://github.com/sagemath/sage/files/ticket12533/trac_12533_arbitrary_precision_LP_solver_backend_for_5.3_vb.patch.gz)**\n\nThe coefficients are currently only converted to the base ring if the coercion system is required. For example:\n\n```\nsage: p = MixedIntegerLinearProgram()\nsage: x = p.new_variable()\nsage: x[1] - x[0]    # no coercion addition and negation only\nx_0 -1 x_1\nsage: 2 * x[1]       # ZZ(2) is coerced into the coefficient ring\n2.0 x_0\n```\nIt would be more consistent if coefficients were always converted into the base ring, but that would definitely require cooperation from the backends.",
    "created_at": "2012-10-23T17:30:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-141020",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:76'>Comment 76:</a>
Attachment: **[trac_12533_arbitrary_precision_LP_solver_backend_for_5.3_vb.patch.gz](https://github.com/sagemath/sage/files/ticket12533/trac_12533_arbitrary_precision_LP_solver_backend_for_5.3_vb.patch.gz)**

The coefficients are currently only converted to the base ring if the coercion system is required. For example:

```
sage: p = MixedIntegerLinearProgram()
sage: x = p.new_variable()
sage: x[1] - x[0]    # no coercion addition and negation only
x_0 -1 x_1
sage: 2 * x[1]       # ZZ(2) is coerced into the coefficient ring
2.0 x_0
```
It would be more consistent if coefficients were always converted into the base ring, but that would definitely require cooperation from the backends.



---

archive/issue_comments_141021.json:
```json
{
    "body": "<a id='comment:77'>Comment 77:</a>\nReplying to [@vbraun](#comment%3A76):\n> The coefficients are currently only converted to the base ring if the coercion system is required. \n\nBut here RDF is the wrong ring to convert to. With your latest patch I get:\n\n```\nsage: p = MixedIntegerLinearProgram(solver='ppl')\nsage: x = p.new_variable()\nsage: 2 * x[1]\n2.0 x_0\nsage: \n```\nwhich breaks the ppl backend, as 2.0 is RDF. How one is supposed to enter the system without the (wrong) conversion?\n\nIt would help a lot if you at least outline the functionality you need in backends to make this work properly in some detail.",
    "created_at": "2012-10-24T03:34:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-141021",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:77'>Comment 77:</a>
Replying to [@vbraun](#comment%3A76):
> The coefficients are currently only converted to the base ring if the coercion system is required. 

But here RDF is the wrong ring to convert to. With your latest patch I get:

```
sage: p = MixedIntegerLinearProgram(solver='ppl')
sage: x = p.new_variable()
sage: 2 * x[1]
2.0 x_0
sage: 
```
which breaks the ppl backend, as 2.0 is RDF. How one is supposed to enter the system without the (wrong) conversion?

It would help a lot if you at least outline the functionality you need in backends to make this work properly in some detail.



---

archive/issue_comments_141022.json:
```json
{
    "body": "Changed dependencies from **#12553, #13646** to **#13646**",
    "created_at": "2012-10-24T09:46:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-141022",
    "user": "https://github.com/vbraun"
}
```

Changed dependencies from **#12553, #13646** to **#13646**



---

archive/issue_comments_141023.json:
```json
{
    "body": "<a id='comment:78'>Comment 78:</a>\nYou can always use the dictionary notation to avoid any coercions:\n\n```\nsage: p = MixedIntegerLinearProgram(solver='ppl')\nsage: p({1:2})\n2 x_1\n```\nOf course that is highly inconvenient. The backends just need a method `base_ring()`, say, that returns the base ring that the backend wants. But all backends need to be changed for that, obviously. Let's do this on another ticket, I've opened #13650 for this. How about you review #13646 and I'll write a patch in #13650 on top of this ticket.",
    "created_at": "2012-10-24T09:46:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-141023",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:78'>Comment 78:</a>
You can always use the dictionary notation to avoid any coercions:

```
sage: p = MixedIntegerLinearProgram(solver='ppl')
sage: p({1:2})
2 x_1
```
Of course that is highly inconvenient. The backends just need a method `base_ring()`, say, that returns the base ring that the backend wants. But all backends need to be changed for that, obviously. Let's do this on another ticket, I've opened #13650 for this. How about you review #13646 and I'll write a patch in #13650 on top of this ticket.



---

archive/issue_comments_141024.json:
```json
{
    "body": "<a id='comment:79'>Comment 79:</a>\nReplying to [@vbraun](#comment%3A78):\n> How about you review #13646 and I'll write a patch in #13650 on top of this ticket.\n\nSure, just let's figure out the best way to fix this. I just posted something on #13650 in this respect.",
    "created_at": "2012-10-24T12:08:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-141024",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:79'>Comment 79:</a>
Replying to [@vbraun](#comment%3A78):
> How about you review #13646 and I'll write a patch in #13650 on top of this ticket.

Sure, just let's figure out the best way to fix this. I just posted something on #13650 in this respect.



---

archive/issue_comments_141025.json:
```json
{
    "body": "Changed dependencies from **#13646** to **#13646, #13650**",
    "created_at": "2012-10-24T23:08:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-141025",
    "user": "https://github.com/dimpase"
}
```

Changed dependencies from **#13646** to **#13646, #13650**



---

archive/issue_comments_141026.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,4 +2,4 @@\n \n One option is to hook up [PPL](http://www.sagemath.org/doc/reference/sage/libs/ppl.html), another might be to hook up GLPK for this purpose. Both have the corresponding functionality, it's just not exposed (?) in P(C)ython for GLPK, and not hooked up as an LP backend in case of PPL.\n \n-To try this patch, apply [\"trac_12533_arbitrary_precision_LP_solver_backend_for_5.3.patch\"](https://github.com/sagemath/sage/files/ticket12533/trac_12533_arbitrary_precision_LP_solver_backend_for_5.3.patch.gz) on Sage 5.3\n+To try this patch, apply [\"trac_12533_arbitrary_precision_LP_solver_backend_for_5.3_vb.patch\"](https://github.com/sagemath/sage/files/ticket12533/trac_12533_arbitrary_precision_LP_solver_backend_for_5.3_vb.patch.gz) on Sage 5.3\n``````\n",
    "created_at": "2012-10-24T23:08:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-141026",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,4 +2,4 @@
 
 One option is to hook up [PPL](http://www.sagemath.org/doc/reference/sage/libs/ppl.html), another might be to hook up GLPK for this purpose. Both have the corresponding functionality, it's just not exposed (?) in P(C)ython for GLPK, and not hooked up as an LP backend in case of PPL.
 
-To try this patch, apply ["trac_12533_arbitrary_precision_LP_solver_backend_for_5.3.patch"](https://github.com/sagemath/sage/files/ticket12533/trac_12533_arbitrary_precision_LP_solver_backend_for_5.3.patch.gz) on Sage 5.3
+To try this patch, apply ["trac_12533_arbitrary_precision_LP_solver_backend_for_5.3_vb.patch"](https://github.com/sagemath/sage/files/ticket12533/trac_12533_arbitrary_precision_LP_solver_backend_for_5.3_vb.patch.gz) on Sage 5.3
``````




---

archive/issue_comments_141027.json:
```json
{
    "body": "Changed dependencies from **#13646, #13650** to **#13646**",
    "created_at": "2012-10-28T06:52:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-141027",
    "user": "https://github.com/dimpase"
}
```

Changed dependencies from **#13646, #13650** to **#13646**



---

archive/issue_comments_141028.json:
```json
{
    "body": "<a id='comment:81'>Comment 81:</a>\noops, #13650 is not a dependence, in the sense it must come come after this one.\n\nTo get the whole chain of patches right, apply #13646, then the current ticket (#12533), then #13650.\nEventually, #12091 (when it's ready).\n\nThis is all for Sage 5.4.rc2.",
    "created_at": "2012-10-28T06:52:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-141028",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:81'>Comment 81:</a>
oops, #13650 is not a dependence, in the sense it must come come after this one.

To get the whole chain of patches right, apply #13646, then the current ticket (#12533), then #13650.
Eventually, #12091 (when it's ready).

This is all for Sage 5.4.rc2.



---

archive/issue_events_151673.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-01T12:15:19Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "milestone_number": null,
    "milestone_title": "sage-5.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151673"
}
```



---

archive/issue_events_151674.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-01T12:15:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151674"
}
```



---

archive/issue_comments_141029.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,4 +2,4 @@\n \n One option is to hook up [PPL](http://www.sagemath.org/doc/reference/sage/libs/ppl.html), another might be to hook up GLPK for this purpose. Both have the corresponding functionality, it's just not exposed (?) in P(C)ython for GLPK, and not hooked up as an LP backend in case of PPL.\n \n-To try this patch, apply [\"trac_12533_arbitrary_precision_LP_solver_backend_for_5.3_vb.patch\"](https://github.com/sagemath/sage/files/ticket12533/trac_12533_arbitrary_precision_LP_solver_backend_for_5.3_vb.patch.gz) on Sage 5.3\n+To try this patch, **apply** [attachment: trac_12533_arbitrary_precision_LP_solver_backend_for_5.3_vb.patch.gz](https://github.com/sagemath/sage/files/ticket12533/trac_12533_arbitrary_precision_LP_solver_backend_for_5.3_vb.patch.gz)\n``````\n",
    "created_at": "2012-11-05T22:41:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-141029",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,4 +2,4 @@
 
 One option is to hook up [PPL](http://www.sagemath.org/doc/reference/sage/libs/ppl.html), another might be to hook up GLPK for this purpose. Both have the corresponding functionality, it's just not exposed (?) in P(C)ython for GLPK, and not hooked up as an LP backend in case of PPL.
 
-To try this patch, apply ["trac_12533_arbitrary_precision_LP_solver_backend_for_5.3_vb.patch"](https://github.com/sagemath/sage/files/ticket12533/trac_12533_arbitrary_precision_LP_solver_backend_for_5.3_vb.patch.gz) on Sage 5.3
+To try this patch, **apply** [attachment: trac_12533_arbitrary_precision_LP_solver_backend_for_5.3_vb.patch.gz](https://github.com/sagemath/sage/files/ticket12533/trac_12533_arbitrary_precision_LP_solver_backend_for_5.3_vb.patch.gz)
``````




---

archive/issue_comments_141030.json:
```json
{
    "body": "<a id='comment:84'>Comment 84:</a>\nin `numerical/mip.pyx` in `show()` there is (around line 701)\n\n```  \n     cdef double c\n```\nwhich results in coefficients of constraints being converted into `double` before printing. And this is wrong for PPL backend.\nSo one should just remove this declaration. \n\nVolker, could you fold this into your patch on this ticket? Or somewhere else, e.g. in #12091?",
    "created_at": "2012-11-06T16:55:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-141030",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:84'>Comment 84:</a>
in `numerical/mip.pyx` in `show()` there is (around line 701)

```  
     cdef double c
```
which results in coefficients of constraints being converted into `double` before printing. And this is wrong for PPL backend.
So one should just remove this declaration. 

Volker, could you fold this into your patch on this ticket? Or somewhere else, e.g. in #12091?



---

archive/issue_comments_141031.json:
```json
{
    "body": "<a id='comment:85'>Comment 85:</a>\nIt doesn't make sense here, you need the parents for constraints to keep the coefficients rational if `solver='PPL'`. I've added it to #12091.",
    "created_at": "2012-11-06T17:42:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-141031",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:85'>Comment 85:</a>
It doesn't make sense here, you need the parents for constraints to keep the coefficients rational if `solver='PPL'`. I've added it to #12091.



---

archive/issue_events_151675.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-13T08:20:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151675"
}
```



---

archive/issue_events_151676.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-13T08:20:35Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12533#event-151676"
}
```



---

archive/issue_comments_141032.json:
```json
{
    "body": "Merged: **sage-5.5.beta2**",
    "created_at": "2012-11-13T08:20:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-141032",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.5.beta2**



---

archive/issue_comments_141033.json:
```json
{
    "body": "<a id='comment:87'>Comment 87:</a>\nThis patch added a lot of\n\n```\nexcept ValueError, msg: \n    raise ValueError, msg \n```\nblocks, what's the purpose of those? I plan to remove those in #15488.",
    "created_at": "2013-12-06T10:42:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-141033",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:87'>Comment 87:</a>
This patch added a lot of

```
except ValueError, msg: 
    raise ValueError, msg 
```
blocks, what's the purpose of those? I plan to remove those in #15488.



---

archive/issue_comments_141034.json:
```json
{
    "body": "<a id='comment:88'>Comment 88:</a>\nReplying to [@jdemeyer](#comment%3A87):\n> This patch added a lot of\n> \n> ```\n> except ValueError, msg: \n>     raise ValueError, msg \n> ```\n> blocks, what's the purpose of those? I plan to remove those in #15488.\n\nthe author didn't have any prior cython experience, and this was overlooked by reviewers...",
    "created_at": "2013-12-06T13:32:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12533#issuecomment-141034",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:88'>Comment 88:</a>
Replying to [@jdemeyer](#comment%3A87):
> This patch added a lot of
> 
> ```
> except ValueError, msg: 
>     raise ValueError, msg 
> ```
> blocks, what's the purpose of those? I plan to remove those in #15488.

the author didn't have any prior cython experience, and this was overlooked by reviewers...
