# Issue 12731: Disable abs_integrate

archive/issues_012559.json:
```json
{
    "body": "Maxima's `abs_integrate` contributed package gives us lots of nice new integrals, but also really breaks a lot of stuff, apparently.  Add to this list as you see fit:\n* #13733 Incorrect integral in Maxima\n* #11590 Integrating the sgn() function can produce incorrect results\n* #14591 cosh integral incorrect because of abs_integrate\n* #16643 integrate() infinite loop\n* #17183 Yet another abs_integrate trig integral problem\n* #17468 Strange integration error/hang with log(abs(sin(x)))\n* #17511 Get integral of abs(sin(x)) and abs(cos(x)) right\n* #17910\n* #23271\n* #24117\n* This is also blocking update to maxima 5.42, #26625\n \n---\n\nOld:\n\nCan someone more knowledgeable about using maxima for integration determine what the right warning to show is and when to show it?  See #12691 for what a stopgap is.\n\n**Assignee:** @burcin\n\n**CC:**  @nbruin @orlitzky @kcrisman @pjbruin @rwst @paulmasson @mforets\n\n**Keywords:** abs_integrate\n\n**Branch:** [b5c9cc58cdda15c3d33e5a47ed953bd17989a6c2](https://github.com/sagemath/sagetrac-mirror/commit/b5c9cc58cdda15c3d33e5a47ed953bd17989a6c2)\n\n**Reviewer:** Dima Pasechnik\n\n**Author:** Ralf Stephan, Fr\u00e9d\u00e9ric Chapoton\n\nIssue created by migration from https://trac.sagemath.org/ticket/12731\n\n",
    "closed_at": "2019-05-24T18:29:59Z",
    "created_at": "2012-03-22T19:01:34Z",
    "labels": [
        "component: calculus",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.9",
    "title": "Disable abs_integrate",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/12731",
    "user": "https://github.com/roed314"
}
```
Maxima's `abs_integrate` contributed package gives us lots of nice new integrals, but also really breaks a lot of stuff, apparently.  Add to this list as you see fit:
* #13733 Incorrect integral in Maxima
* #11590 Integrating the sgn() function can produce incorrect results
* #14591 cosh integral incorrect because of abs_integrate
* #16643 integrate() infinite loop
* #17183 Yet another abs_integrate trig integral problem
* #17468 Strange integration error/hang with log(abs(sin(x)))
* #17511 Get integral of abs(sin(x)) and abs(cos(x)) right
* #17910
* #23271
* #24117
* This is also blocking update to maxima 5.42, #26625
 
---

Old:

Can someone more knowledgeable about using maxima for integration determine what the right warning to show is and when to show it?  See #12691 for what a stopgap is.

**Assignee:** @burcin

**CC:**  @nbruin @orlitzky @kcrisman @pjbruin @rwst @paulmasson @mforets

**Keywords:** abs_integrate

**Branch:** [b5c9cc58cdda15c3d33e5a47ed953bd17989a6c2](https://github.com/sagemath/sagetrac-mirror/commit/b5c9cc58cdda15c3d33e5a47ed953bd17989a6c2)

**Reviewer:** Dima Pasechnik

**Author:** Ralf Stephan, Frédéric Chapoton

Issue created by migration from https://trac.sagemath.org/ticket/12731





---

archive/issue_comments_144802.json:
```json
{
    "body": "<a id='comment:1'></a>\nI'm not really sure that this is appropriate for a stopgap.  I mean, unless we put in a catch for the *specific* form like `integrate(x * sgn(x^2 - 1/4), x, -1, 0)`, we would have to put in a stopgap for the entire integration, which is ridiculous.  \n\nUnless we checked for the signum function with nonlinear operands in it sometime... but that's more than I have time to parse now.",
    "created_at": "2012-03-23T01:02:28Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144802",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:1'></a>
I'm not really sure that this is appropriate for a stopgap.  I mean, unless we put in a catch for the *specific* form like `integrate(x * sgn(x^2 - 1/4), x, -1, 0)`, we would have to put in a stopgap for the entire integration, which is ridiculous.  

Unless we checked for the signum function with nonlinear operands in it sometime... but that's more than I have time to parse now.



---

archive/issue_events_105823.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-04-08T08:52:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "label": "blocker",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12731#event-105823"
}
```



---

archive/issue_events_105824.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "milestone": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12731#event-105824"
}
```



---

archive/issue_events_105825.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12731#event-105825"
}
```



---

archive/issue_events_105826.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "milestone": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12731#event-105826"
}
```



---

archive/issue_events_105827.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12731#event-105827"
}
```



---

archive/issue_events_105828.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12731#event-105828"
}
```



---

archive/issue_events_105829.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12731#event-105829"
}
```



---

archive/issue_events_105830.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12731#event-105830"
}
```



---

archive/issue_events_105831.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12731#event-105831"
}
```



---

archive/issue_comments_144803.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,13 @@\n+Maxima's `abs_integrate` contributed package gives us lots of nice new integrals, but also really breaks a lot of stuff, apparently.  Add to this list as you see fit:\n+* #13733 (fixed but note unwanted interactions)\n+* #11590 sgn() function (not reported upstream?)\n+* #14591 cosh integral incorrect because of abs_integrate\n+* #16643 integrate() infinite loop\n+* #17183 another abs_integrate error\n+* #17468 log(abs(sin())) problem\n+ \n+---\n+\n+Old:\n+\n Can someone more knowledgeable about using maxima for integration determine what the right warning to show is and when to show it?  See #12691 for what a stopgap is.\n``````\n",
    "created_at": "2014-12-08T15:00:04Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144803",
    "user": "https://github.com/kcrisman"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,13 @@
+Maxima's `abs_integrate` contributed package gives us lots of nice new integrals, but also really breaks a lot of stuff, apparently.  Add to this list as you see fit:
+* #13733 (fixed but note unwanted interactions)
+* #11590 sgn() function (not reported upstream?)
+* #14591 cosh integral incorrect because of abs_integrate
+* #16643 integrate() infinite loop
+* #17183 another abs_integrate error
+* #17468 log(abs(sin())) problem
+ 
+---
+
+Old:
+
 Can someone more knowledgeable about using maxima for integration determine what the right warning to show is and when to show it?  See #12691 for what a stopgap is.
``````




---

archive/issue_events_105832.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2014-12-08T15:00:04Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "rename": {
        "from": "Stopgap for #11590",
        "to": "Disable abs_integrate as default"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12731#event-105832"
}
```



---

archive/issue_events_105833.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2014-12-08T15:02:10Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "rename": {
        "from": "Disable abs_integrate as default",
        "to": "Disable or raise warning with abs_integrate as default"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12731#event-105833"
}
```



---

archive/issue_comments_144804.json:
```json
{
    "body": "<a id='comment:8'></a>\nNaturally, if it becomes unnecessary to do so, we can just close this as wontfix.  This is the best equivalent to a stopgap I can come up with - or possibly we can raise a warning every time `abs_integrate` is used, though this won't stop the hangs and other weird interactions it causes.",
    "created_at": "2014-12-08T15:02:10Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144804",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:8'></a>
Naturally, if it becomes unnecessary to do so, we can just close this as wontfix.  This is the best equivalent to a stopgap I can come up with - or possibly we can raise a warning every time `abs_integrate` is used, though this won't stop the hangs and other weird interactions it causes.



---

archive/issue_comments_144805.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -5,6 +5,7 @@\n * #16643 integrate() infinite loop\n * #17183 another abs_integrate error\n * #17468 log(abs(sin())) problem\n+* #17511 abs(sin(x)) and abs(cos(x)) are flat-out wrong\n  \n ---\n \n``````\n",
    "created_at": "2014-12-15T16:20:03Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144805",
    "user": "https://github.com/kcrisman"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -5,6 +5,7 @@
 * #16643 integrate() infinite loop
 * #17183 another abs_integrate error
 * #17468 log(abs(sin())) problem
+* #17511 abs(sin(x)) and abs(cos(x)) are flat-out wrong
  
 ---
 
``````




---

archive/issue_comments_144806.json:
```json
{
    "body": "<a id='comment:10'></a>\nUnfortunately, a lot of the most popular such integrals are not computed with sympy (yet?).  Not even `abs(x)`.\n\n```\nIn [1]: from sympy import *\n\nIn [2]: x=Symbol('x')\n\nIn [3]: integrate( abs(x), x)\nOut[3]: Integral(Abs(x), x)\n\nIn [4]: integrate( abs(x), (x, 0, 1))\nOut[4]: Integral(Abs(x), (x, 0, 1))\n```",
    "created_at": "2014-12-15T20:05:04Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144806",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:10'></a>
Unfortunately, a lot of the most popular such integrals are not computed with sympy (yet?).  Not even `abs(x)`.

```
In [1]: from sympy import *

In [2]: x=Symbol('x')

In [3]: integrate( abs(x), x)
Out[3]: Integral(Abs(x), x)

In [4]: integrate( abs(x), (x, 0, 1))
Out[4]: Integral(Abs(x), (x, 0, 1))
```



---

archive/issue_comments_144807.json:
```json
{
    "body": "<a id='comment:11'></a>\nUseful comment from author of `abs_integrate`:\n> The assignments extra_definite_integration_methods : [] and  extra_integration_methods  : [] should render abs_integrate inoperative.\n> Resorting these lists to their defaults will revive abs_integrate. A kill(all) will remove all traces of abs_integrate--a reload is needed.\n\n\nSo we could conceivably do this in the case that Maxima (or whomever) returns an unevaluated integral, sort of like what we do with solving.",
    "created_at": "2014-12-15T20:09:58Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144807",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:11'></a>
Useful comment from author of `abs_integrate`:
> The assignments extra_definite_integration_methods : [] and  extra_integration_methods  : [] should render abs_integrate inoperative.
> Resorting these lists to their defaults will revive abs_integrate. A kill(all) will remove all traces of abs_integrate--a reload is needed.


So we could conceivably do this in the case that Maxima (or whomever) returns an unevaluated integral, sort of like what we do with solving.



---

archive/issue_comments_144808.json:
```json
{
    "body": "<a id='comment:12'></a>\ncould all developers involved in this ticket eventually meditate on Williams comment:\n>And why are we using it (abs_integrate) if it is so broken -- it should\n>require an explicit flag to use at all.  Sage is supposed to **default**\n>to correct answers unless you otherwise explicitly request otherwise\n\n\nDoes that sound reasonable?",
    "created_at": "2015-02-10T00:50:05Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144808",
    "user": "https://trac.sagemath.org/admin/accounts/users/jakobkroeker"
}
```

<a id='comment:12'></a>
could all developers involved in this ticket eventually meditate on Williams comment:
>And why are we using it (abs_integrate) if it is so broken -- it should
>require an explicit flag to use at all.  Sage is supposed to **default**
>to correct answers unless you otherwise explicitly request otherwise


Does that sound reasonable?



---

archive/issue_events_105834.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-03-07T07:05:41Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12731#event-105834"
}
```



---

archive/issue_events_105835.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-03-07T07:05:41Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "milestone": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12731#event-105835"
}
```



---

archive/issue_events_105836.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-03-07T07:05:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "label": "critical",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12731#event-105836"
}
```



---

archive/issue_events_105837.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-03-07T10:01:21Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "rename": {
        "from": "Disable or raise warning with abs_integrate as default",
        "to": "Disable abs_integrate"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12731#event-105837"
}
```



---

archive/issue_comments_144809.json:
```json
{
    "body": "<a id='comment:14'></a>\nReplying to [jakobkroeker](#comment%3A12):\n> \n> could all developers involved in this ticket eventually meditate on Williams comment:\n> >And why are we using it (abs_integrate) if it is so broken -- it should\n> >require an explicit flag to use at all.  Sage is supposed to **default**\n> >to correct answers unless you otherwise explicitly request otherwise\n\n> \n> Does that sound reasonable?\n\nYes, and it's the only option because that package causes so much collateral damage, not only in `integrate`. Turning it off only triggers a few minor doctest failures, most of them (9) in `interfaces/maxima_lib.py`.",
    "created_at": "2015-03-07T10:01:21Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144809",
    "user": "https://github.com/rwst"
}
```

<a id='comment:14'></a>
Replying to [jakobkroeker](#comment%3A12):
> 
> could all developers involved in this ticket eventually meditate on Williams comment:
> >And why are we using it (abs_integrate) if it is so broken -- it should
> >require an explicit flag to use at all.  Sage is supposed to **default**
> >to correct answers unless you otherwise explicitly request otherwise

> 
> Does that sound reasonable?

Yes, and it's the only option because that package causes so much collateral damage, not only in `integrate`. Turning it off only triggers a few minor doctest failures, most of them (9) in `interfaces/maxima_lib.py`.



---

archive/issue_comments_144810.json:
```json
{
    "body": "**Branch:** [u/rws/disable_abs_integrate](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/disable_abs_integrate)",
    "created_at": "2015-03-07T15:58:20Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144810",
    "user": "https://github.com/rwst"
}
```

**Branch:** [u/rws/disable_abs_integrate](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/disable_abs_integrate)



---

archive/issue_comments_144811.json:
```json
{
    "body": "<a id='comment:16'></a>\nThis commit removes the package, fixes/moves doctests. I have put those doctests testing the `abs_integrate` package into the wishlist #17910.\n\nIf someone is not comfortable doing this \"silently\", using expression tree walking I could add checks for `abs` and `sgn` and output ... what? Note, some integrals are now solved by Maxima proper.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4790fc753098c35bbd5d2580b77f77ac511f3fdd\">4790fc7</a></td><td><code>12731: don't load abs_integrate; move/fix/remove doctests</code></td></tr></table>\n",
    "created_at": "2015-03-07T16:02:53Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144811",
    "user": "https://github.com/rwst"
}
```

<a id='comment:16'></a>
This commit removes the package, fixes/moves doctests. I have put those doctests testing the `abs_integrate` package into the wishlist #17910.

If someone is not comfortable doing this "silently", using expression tree walking I could add checks for `abs` and `sgn` and output ... what? Note, some integrals are now solved by Maxima proper.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4790fc753098c35bbd5d2580b77f77ac511f3fdd">4790fc7</a></td><td><code>12731: don't load abs_integrate; move/fix/remove doctests</code></td></tr></table>




---

archive/issue_comments_144812.json:
```json
{
    "body": "**Commit:** [4790fc753098c35bbd5d2580b77f77ac511f3fdd](https://github.com/sagemath/sagetrac-mirror/commit/4790fc753098c35bbd5d2580b77f77ac511f3fdd)",
    "created_at": "2015-03-07T16:02:53Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144812",
    "user": "https://github.com/rwst"
}
```

**Commit:** [4790fc753098c35bbd5d2580b77f77ac511f3fdd](https://github.com/sagemath/sagetrac-mirror/commit/4790fc753098c35bbd5d2580b77f77ac511f3fdd)



---

archive/issue_events_105838.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-03-07T16:03:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12731#event-105838"
}
```



---

archive/issue_comments_144813.json:
```json
{
    "body": "<a id='comment:18'></a>\nI think anybody using a computer algebra package for symbolic integration should be aware that results returned might not be correct (or require a different interpretation from what the user would have preferred). However, from the reports listed it seems abs_integrate has particularly numerous issues. It's just not ready for prime time yet. I'd be in favour of ditching it.\n\nIncidentally, all those abs_integrate doctests (and the loading of many of the packages) should probably be in calculus. It's got little to do with the interface. Plus, it used to be as simple as changing the assignment to the maxima interface in the calculus file to swap between the library and the expect interface.",
    "created_at": "2015-03-07T16:38:35Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144813",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:18'></a>
I think anybody using a computer algebra package for symbolic integration should be aware that results returned might not be correct (or require a different interpretation from what the user would have preferred). However, from the reports listed it seems abs_integrate has particularly numerous issues. It's just not ready for prime time yet. I'd be in favour of ditching it.

Incidentally, all those abs_integrate doctests (and the loading of many of the packages) should probably be in calculus. It's got little to do with the interface. Plus, it used to be as simple as changing the assignment to the maxima interface in the calculus file to swap between the library and the expect interface.



---

archive/issue_events_105839.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-03-07T17:27:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12731#event-105839"
}
```



---

archive/issue_events_105840.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-03-07T17:27:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12731#event-105840"
}
```



---

archive/issue_comments_144814.json:
```json
{
    "body": "<a id='comment:20'></a>\nI'm really concerned about removing this completely.  Even with all the errors, this also introduces a very useful tool, and it makes Sage look just as bad to be constantly changing what functionality it has.  This has been in long enough that some sort of deprecation seems necessary, though I'm not sure myself what either.\n\nSee [comment:11](#comment%3A11) for a tip on how to disable/enable it selectively.  I have essentially had no Sage development time, nor am likely to in the near future, so I am unable to implement this now.  But I think that it would be far better to add some kind of flag or algorithm argument (like with `solve()`) so that people who want it can still get it.  Especially if it still added a stopgap warning.\n\nPerhaps one could do a walk for relevant input, as you say in [comment:16](#comment%3A16), and suggest using the flag... *or* one could check for that input and then send the stopgap message?\n\nAgain, I'm really sorry I'm unable to help concretely with code at this time (hopefully a little testing).",
    "created_at": "2015-03-07T23:42:36Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144814",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:20'></a>
I'm really concerned about removing this completely.  Even with all the errors, this also introduces a very useful tool, and it makes Sage look just as bad to be constantly changing what functionality it has.  This has been in long enough that some sort of deprecation seems necessary, though I'm not sure myself what either.

See [comment:11](#comment%3A11) for a tip on how to disable/enable it selectively.  I have essentially had no Sage development time, nor am likely to in the near future, so I am unable to implement this now.  But I think that it would be far better to add some kind of flag or algorithm argument (like with `solve()`) so that people who want it can still get it.  Especially if it still added a stopgap warning.

Perhaps one could do a walk for relevant input, as you say in [comment:16](#comment%3A16), and suggest using the flag... *or* one could check for that input and then send the stopgap message?

Again, I'm really sorry I'm unable to help concretely with code at this time (hopefully a little testing).



---

archive/issue_comments_144815.json:
```json
{
    "body": "<a id='comment:21'></a>\nSo how do you address the fact that, once the package is used, it has destructive side effects on computations, even if you no longer use it and do completely different things. How will you know that an unrelated bug report is not caused by this? What language do you use to prepare the user that, from now on, there might be more problems ahead?",
    "created_at": "2015-03-08T06:47:46Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144815",
    "user": "https://github.com/rwst"
}
```

<a id='comment:21'></a>
So how do you address the fact that, once the package is used, it has destructive side effects on computations, even if you no longer use it and do completely different things. How will you know that an unrelated bug report is not caused by this? What language do you use to prepare the user that, from now on, there might be more problems ahead?



---

archive/issue_comments_144816.json:
```json
{
    "body": "<a id='comment:22'></a>\n> I'm really concerned about removing this completely.\n\n\nwhat is about a kind of  experimental mode in sage ?\nif enabled by the user, functions like above became available, otherwise they stay out.\n\nPersonally, I'm against accepting broken or half-baked functionality because as rws says, it is too destructive. I'm experiencing this everyday with Singular CAS. People start using new functionality (which is often only experimental ) and then  **almost everything** is broken and cannot be easily fixed. Tests? Ahahaha !! Mathematicians often consider a single  example or a couple of examples as as sufficient test...",
    "created_at": "2015-03-08T12:06:16Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144816",
    "user": "https://trac.sagemath.org/admin/accounts/users/jakobkroeker"
}
```

<a id='comment:22'></a>
> I'm really concerned about removing this completely.


what is about a kind of  experimental mode in sage ?
if enabled by the user, functions like above became available, otherwise they stay out.

Personally, I'm against accepting broken or half-baked functionality because as rws says, it is too destructive. I'm experiencing this everyday with Singular CAS. People start using new functionality (which is often only experimental ) and then  **almost everything** is broken and cannot be easily fixed. Tests? Ahahaha !! Mathematicians often consider a single  example or a couple of examples as as sufficient test...



---

archive/issue_comments_144817.json:
```json
{
    "body": "<a id='comment:23'></a>\nReplying to [rws](#comment%3A21):\n> So how do you address the fact that, once the package is used, it has destructive side effects on computations, even if you no longer use it and do completely different things. How will you know that an unrelated bug report is not caused by this? What language do you use to prepare the user that, from now on, there might be more problems ahead?\n\n\nI would rather disable this than have it give wrong answers, but it looks like it should be possible to emit a warning only when abs_integrate is actually used. According to the [Maxima documentation](http://maxima.sourceforge.net/docs/manual/de/maxima_31.html#SEC218), there is a list of extra integration methods that maxima will attempt if the standard `integrate` fails:\n\n```\nOption variable: extra_integration_methods\n\n    Default value: ['signum_int, 'abs_integrate_use_if]\n\n    The list extra_integration_methods is a list of functions for integration. When integrate is unable to find an antiderivative, Maxima uses the methods in extra_integration_methods to attempt to determine an antiderivative. \n```\n\nIf we set this variable to the empty list, then no additional integrations will be attempted by Maxima (by default). But, we can still try them ourselves. So we could,\n\n1. Try the standard Maxima `integrate`, and save the result.\n2. Try `signum_int`, and see if the result matches the first one. If it does, ignore it. Otherwise, emit a warning and return the answer.\n3. Try `abs_integrate_use_if`, and see if the result matches the first one. If it does, ignore it. Otherwise, emit a warning and return the answer.",
    "created_at": "2015-03-08T18:53:35Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144817",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:23'></a>
Replying to [rws](#comment%3A21):
> So how do you address the fact that, once the package is used, it has destructive side effects on computations, even if you no longer use it and do completely different things. How will you know that an unrelated bug report is not caused by this? What language do you use to prepare the user that, from now on, there might be more problems ahead?


I would rather disable this than have it give wrong answers, but it looks like it should be possible to emit a warning only when abs_integrate is actually used. According to the [Maxima documentation](http://maxima.sourceforge.net/docs/manual/de/maxima_31.html#SEC218), there is a list of extra integration methods that maxima will attempt if the standard `integrate` fails:

```
Option variable: extra_integration_methods

    Default value: ['signum_int, 'abs_integrate_use_if]

    The list extra_integration_methods is a list of functions for integration. When integrate is unable to find an antiderivative, Maxima uses the methods in extra_integration_methods to attempt to determine an antiderivative. 
```

If we set this variable to the empty list, then no additional integrations will be attempted by Maxima (by default). But, we can still try them ourselves. So we could,

1. Try the standard Maxima `integrate`, and save the result.
2. Try `signum_int`, and see if the result matches the first one. If it does, ignore it. Otherwise, emit a warning and return the answer.
3. Try `abs_integrate_use_if`, and see if the result matches the first one. If it does, ignore it. Otherwise, emit a warning and return the answer.



---

archive/issue_comments_144818.json:
```json
{
    "body": "<a id='comment:24'></a>\nReplying to [mjo](#comment%3A23): \n> 1. Try the standard Maxima `integrate`, and save the result.\n> 2. Try `signum_int`, and see if the result matches the first one. If it does, ignore it. Otherwise, emit a warning and return the answer.\n> 3. Try `abs_integrate_use_if`, and see if the result matches the first one. If it does, ignore it. Otherwise, emit a warning and return the answer.\n\n\n\nOh, and if `integrate` works, we can skip steps 2 and 3.",
    "created_at": "2015-03-08T19:09:07Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144818",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:24'></a>
Replying to [mjo](#comment%3A23): 
> 1. Try the standard Maxima `integrate`, and save the result.
> 2. Try `signum_int`, and see if the result matches the first one. If it does, ignore it. Otherwise, emit a warning and return the answer.
> 3. Try `abs_integrate_use_if`, and see if the result matches the first one. If it does, ignore it. Otherwise, emit a warning and return the answer.



Oh, and if `integrate` works, we can skip steps 2 and 3.



---

archive/issue_comments_144819.json:
```json
{
    "body": "<a id='comment:25'></a>\nReplying to [mjo](#comment%3A23):\n> If we set this variable to the empty list, then no additional integrations will be attempted by Maxima (by default). But, we can still try them ourselves. So we could,\n> \n> 1. Try the standard Maxima `integrate`, and save the result.\n> 2. Try `signum_int`, and see if the result matches the first one. If it does, ignore it. Otherwise, emit a warning and return the answer.\n> 3. Try `abs_integrate_use_if`, and see if the result matches the first one. If it does, ignore it. Otherwise, emit a warning and return the answer.\n\n\nThat's an excellent find and it allows us to have much finer grained control over what integration methods should be tried. However, I'm not so sure that \"printing a warning\" is the right solution. There's a problem with stopgap messages in general:\n- they just get printed. They can easily get lost if a lot of other output gets printed.\n- they only get printed once. We're dealing here with an issue that only applies to certain integrals. We assume you're OK as long as the message is printed. When you run into the message, then the result you're looking at at that moment is suspect. After that one, the message doesn't get printed anymore, so you should consider all subsequent results suspect. However, since the behaviour is much more similar to the pre-message situation, it's easy to think that fresh computations in the same session are NOT suspect.\n\nI think it is better to simply NOT try the suspect integration methods upon a normal integral invocation and only resort to them when a special command/flag is given, e.g.:\n\n```\nsage: integrate(abs(sin(x)),x,0,pi)\nintegrate(abs(sin(x)), x, 0, pi)\nsage: integrate(abs(sin(x)),x,0,pi, algorithm=\"spaced_out_maxima\")\n0\n```\nor whatever access method we want to use (and whatever result we get from that).\n\nIn any case, we also need to clear `extra_definite_integration_methods`.",
    "created_at": "2015-03-09T01:54:18Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144819",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:25'></a>
Replying to [mjo](#comment%3A23):
> If we set this variable to the empty list, then no additional integrations will be attempted by Maxima (by default). But, we can still try them ourselves. So we could,
> 
> 1. Try the standard Maxima `integrate`, and save the result.
> 2. Try `signum_int`, and see if the result matches the first one. If it does, ignore it. Otherwise, emit a warning and return the answer.
> 3. Try `abs_integrate_use_if`, and see if the result matches the first one. If it does, ignore it. Otherwise, emit a warning and return the answer.


That's an excellent find and it allows us to have much finer grained control over what integration methods should be tried. However, I'm not so sure that "printing a warning" is the right solution. There's a problem with stopgap messages in general:
- they just get printed. They can easily get lost if a lot of other output gets printed.
- they only get printed once. We're dealing here with an issue that only applies to certain integrals. We assume you're OK as long as the message is printed. When you run into the message, then the result you're looking at at that moment is suspect. After that one, the message doesn't get printed anymore, so you should consider all subsequent results suspect. However, since the behaviour is much more similar to the pre-message situation, it's easy to think that fresh computations in the same session are NOT suspect.

I think it is better to simply NOT try the suspect integration methods upon a normal integral invocation and only resort to them when a special command/flag is given, e.g.:

```
sage: integrate(abs(sin(x)),x,0,pi)
integrate(abs(sin(x)), x, 0, pi)
sage: integrate(abs(sin(x)),x,0,pi, algorithm="spaced_out_maxima")
0
```
or whatever access method we want to use (and whatever result we get from that).

In any case, we also need to clear `extra_definite_integration_methods`.



---

archive/issue_comments_144820.json:
```json
{
    "body": "<a id='comment:26'></a>\n> > If we set this variable to the empty list, then no additional integrations will be attempted by Maxima (by default). But, we can still try them ourselves. So we could,\n> > \n> > 1. Try the standard Maxima `integrate`, and save the result.\n> > 2. Try `signum_int`, and see if the result matches the first one. If it does, ignore it. Otherwise, emit a warning and return the answer.\n> > 3. Try `abs_integrate_use_if`, and see if the result matches the first one. If it does, ignore it. Otherwise, emit a warning and return the answer.\n  \n> \n> That's an excellent find and it allows us to have much finer grained control over what integration methods should be tried. However, I'm not so sure that \"printing a warning\" is the right solution. There's a problem with stopgap messages in general:\n> - they just get printed. They can easily get lost if a lot of other output gets printed.\n> - they only get printed once. We're dealing here with an issue that only applies to certain integrals. We assume you're OK as long as the message is printed. When you run into the message, then the result you're looking at at that moment is suspect. After that one, the message doesn't get printed anymore, so you should consider all subsequent results suspect. However, since the behaviour is much more similar to the pre-message situation, it's easy to think that fresh computations in the same session are NOT suspect.\n> \n> I think it is better to simply NOT try the suspect integration methods upon a normal integral invocation and only resort to them when a special command/flag is given, e.g.:\n> \n> ```\n> sage: integrate(abs(sin(x)),x,0,pi)\n> integrate(abs(sin(x)), x, 0, pi)\n> sage: integrate(abs(sin(x)),x,0,pi, algorithm=\"spaced_out_maxima\")\n> 0\n> ```\n> or whatever access method we want to use (and whatever result we get from that).\n\n\n+1",
    "created_at": "2015-03-09T23:19:20Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144820",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:26'></a>
> > If we set this variable to the empty list, then no additional integrations will be attempted by Maxima (by default). But, we can still try them ourselves. So we could,
> > 
> > 1. Try the standard Maxima `integrate`, and save the result.
> > 2. Try `signum_int`, and see if the result matches the first one. If it does, ignore it. Otherwise, emit a warning and return the answer.
> > 3. Try `abs_integrate_use_if`, and see if the result matches the first one. If it does, ignore it. Otherwise, emit a warning and return the answer.
  
> 
> That's an excellent find and it allows us to have much finer grained control over what integration methods should be tried. However, I'm not so sure that "printing a warning" is the right solution. There's a problem with stopgap messages in general:
> - they just get printed. They can easily get lost if a lot of other output gets printed.
> - they only get printed once. We're dealing here with an issue that only applies to certain integrals. We assume you're OK as long as the message is printed. When you run into the message, then the result you're looking at at that moment is suspect. After that one, the message doesn't get printed anymore, so you should consider all subsequent results suspect. However, since the behaviour is much more similar to the pre-message situation, it's easy to think that fresh computations in the same session are NOT suspect.
> 
> I think it is better to simply NOT try the suspect integration methods upon a normal integral invocation and only resort to them when a special command/flag is given, e.g.:
> 
> ```
> sage: integrate(abs(sin(x)),x,0,pi)
> integrate(abs(sin(x)), x, 0, pi)
> sage: integrate(abs(sin(x)),x,0,pi, algorithm="spaced_out_maxima")
> 0
> ```
> or whatever access method we want to use (and whatever result we get from that).


+1



---

archive/issue_comments_144821.json:
```json
{
    "body": "<a id='comment:27'></a>\nIs that ticket really needs_review ? The last comments point to a needs_work.\n\nAnd notice that a needs_review ticket with no author won't suit Volker :-P",
    "created_at": "2015-03-15T20:37:59Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144821",
    "user": "https://trac.sagemath.org/admin/accounts/users/Snark"
}
```

<a id='comment:27'></a>
Is that ticket really needs_review ? The last comments point to a needs_work.

And notice that a needs_review ticket with no author won't suit Volker :-P



---

archive/issue_comments_144822.json:
```json
{
    "body": "**Author:** Ralf Stephan",
    "created_at": "2015-03-16T07:39:24Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144822",
    "user": "https://github.com/rwst"
}
```

**Author:** Ralf Stephan



---

archive/issue_comments_144823.json:
```json
{
    "body": "<a id='comment:29'></a>\nOne failing doctest:\n\n```\nFile \"src/sage/functions/piecewise.py\", line 811, in sage.functions.piecewise.PiecewisePolynomial.integral\nFailed example:\n    f.integral()\nExpected:\n    Piecewise defined function with 1 parts, [[(-Infinity, +Infinity), x |--> -1/2*((sgn(x) - 1)*e^(2*x) - 2*e^x*sgn(x) + sgn(x) + 1)*e^(-x) - 1]]\nGot:\n    Piecewise defined function with 1 parts, [[(-Infinity, +Infinity), x |--> -integrate(e^(-abs(x)), x, x, +Infinity)]]\n```",
    "created_at": "2015-03-24T20:30:15Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144823",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:29'></a>
One failing doctest:

```
File "src/sage/functions/piecewise.py", line 811, in sage.functions.piecewise.PiecewisePolynomial.integral
Failed example:
    f.integral()
Expected:
    Piecewise defined function with 1 parts, [[(-Infinity, +Infinity), x |--> -1/2*((sgn(x) - 1)*e^(2*x) - 2*e^x*sgn(x) + sgn(x) + 1)*e^(-x) - 1]]
Got:
    Piecewise defined function with 1 parts, [[(-Infinity, +Infinity), x |--> -integrate(e^(-abs(x)), x, x, +Infinity)]]
```



---

archive/issue_events_105841.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-03-24T20:30:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12731#event-105841"
}
```



---

archive/issue_events_105842.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-03-24T20:30:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12731#event-105842"
}
```



---

archive/issue_comments_144824.json:
```json
{
    "body": "<a id='comment:30'></a>\nRelated?  [This question.](http://ask.sagemath.org/question/26516/wrong-answer-for-integral/)",
    "created_at": "2015-04-13T18:39:26Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144824",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:30'></a>
Related?  [This question.](http://ask.sagemath.org/question/26516/wrong-answer-for-integral/)



---

archive/issue_comments_144825.json:
```json
{
    "body": "**Changing commit** from \"[4790fc753098c35bbd5d2580b77f77ac511f3fdd](https://github.com/sagemath/sagetrac-mirror/commit/4790fc753098c35bbd5d2580b77f77ac511f3fdd)\" to \"[1993a28f9ea2dec2cfb255fddee6f01939f69372](https://github.com/sagemath/sagetrac-mirror/commit/1993a28f9ea2dec2cfb255fddee6f01939f69372)\".",
    "created_at": "2015-06-17T15:17:24Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144825",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[4790fc753098c35bbd5d2580b77f77ac511f3fdd](https://github.com/sagemath/sagetrac-mirror/commit/4790fc753098c35bbd5d2580b77f77ac511f3fdd)" to "[1993a28f9ea2dec2cfb255fddee6f01939f69372](https://github.com/sagemath/sagetrac-mirror/commit/1993a28f9ea2dec2cfb255fddee6f01939f69372)".



---

archive/issue_comments_144826.json:
```json
{
    "body": "<a id='comment:31'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2ea38b19d4aeeb31fa11b6d5cf6d4353e0b5def4\">2ea38b1</a></td><td><code>Merge branch 'develop' into t/12731/disable_abs_integrate</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1993a28f9ea2dec2cfb255fddee6f01939f69372\">1993a28</a></td><td><code>12731: remove doctest dependent on abs_integrate</code></td></tr></table>\n",
    "created_at": "2015-06-17T15:17:24Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144826",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:31'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2ea38b19d4aeeb31fa11b6d5cf6d4353e0b5def4">2ea38b1</a></td><td><code>Merge branch 'develop' into t/12731/disable_abs_integrate</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1993a28f9ea2dec2cfb255fddee6f01939f69372">1993a28</a></td><td><code>12731: remove doctest dependent on abs_integrate</code></td></tr></table>




---

archive/issue_events_105843.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-06-17T15:18:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12731#event-105843"
}
```



---

archive/issue_events_105844.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-06-17T15:18:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12731#event-105844"
}
```



---

archive/issue_events_105845.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-06-17T15:18:05Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "milestone": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12731#event-105845"
}
```



---

archive/issue_events_105846.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-06-17T15:18:05Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "milestone": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12731#event-105846"
}
```



---

archive/issue_comments_144827.json:
```json
{
    "body": "<a id='comment:33'></a>\nReplying to [kcrisman](#comment%3A26):\n> > > If we set this variable to the empty list, then no additional integrations will be attempted by Maxima (by default). But, we can still try them ourselves. So we could,\n> > > \n> > > 1. Try the standard Maxima `integrate`, and save the result.\n> > > 2. Try `signum_int`, and see if the result matches the first one. If it does, ignore it. Otherwise, emit a warning and return the answer.\n> > > 3. Try `abs_integrate_use_if`, and see if the result matches the first one. If it does, ignore it. Otherwise, emit a warning and return the answer.\n\n\nIt won't, because it will always return something like this:\n\n```\nsage: integrate(1/(1 + abs(x+1) + abs(x-1)),x)\nTypeError: unable to make sense of Maxima expression 'if(-(_SAGE_VAR_x+1)>0,-log(1-2*_SAGE_VAR_x)/2+log(3)-2/3,if(-(_SAGE_VAR_x-1)>0,_SAGE_VAR_x/3+log(3)/2-1/3,log(2*_SAGE_VAR_x+1)/2))' in Sage\n```\n\n> > I think it is better to simply NOT try the suspect integration methods upon a normal integral invocation and only resort to them when a special command/flag is given, e.g.:\n> > \n> > ```\n> > sage: integrate(abs(sin(x)),x,0,pi)\n> > integrate(abs(sin(x)), x, 0, pi)\n> > sage: integrate(abs(sin(x)),x,0,pi, algorithm=\"spaced_out_maxima\")\n> > 0\n> > ```\n> > or whatever access method we want to use (and whatever result we get from that).\n\n> \n> +1\n\n\nI would be in favor of this, and would give positive review to changes disabling by default but allowing this.  I think it would be pretty easy to implement, in fact.\n* Keep `abs_integrate` loading initially in `maxima_lib.py`.\n* Immediately set the two `methods` to `[]`, perhaps right with `init_code.append('nolabels : true')` a few lines later.\n* Then add an integrator in `src/sage/symbolic/integration/external.py`, something like\n\n```\ndef maxima_absint_integrator(expression, v, a=None, b=None):\n    from sage.calculus.calculus import maxima\n    maxima.eval(\"extra_definite_integration_methods=['abs_defint]\")\n    maxima.eval(\"extra_integration_methods=['signum_int]\") # NOT using the if variant\n    if not isinstance(expression, Expression):\n        expression = SR(expression)\n    if a is None:\n        result = maxima.sr_integral(expression,v)\n    else:\n        result = maxima.sr_integral(expression, v, a, b)\n    maxima.eval(\"extra_definite_integration_methods=[]\")\n    maxima.eval(\"extra_integration_methods=[]\") # NOT using the if variant\n    return result._sage_()\n```\n* Then in `src/sage/symbolic/integration/integral.py` just add\n\n```\nimport sage.symbolic.integration.external as external\navailable_integrators['maxima'] = external.maxima_integrator\navailable_integrators['maxima_absint'] = external.maxima_absint_integrator\navailable_integrators['sympy'] = external.sympy_integrator\navailable_integrators['mathematica_free'] = external.mma_free_integrator\navailable_integrators['fricas'] = external.fricas_integrator\n```\n  and port doctests, with a humongous warning not to use this unless you are willing to check answers numerically or something.\n\nThat could, in principle, be a separate ticket, but I would want them to depend upon each other.  Also, that wouldn't remove the necessity of #17910.\n\nBy the way, it's interesting that http://sourceforge.net/p/maxima/bugs/2242/#8ddc suggests that adding `'integrate` to the methods lists could actually do at least some of these integrals...",
    "created_at": "2015-06-17T15:48:06Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144827",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:33'></a>
Replying to [kcrisman](#comment%3A26):
> > > If we set this variable to the empty list, then no additional integrations will be attempted by Maxima (by default). But, we can still try them ourselves. So we could,
> > > 
> > > 1. Try the standard Maxima `integrate`, and save the result.
> > > 2. Try `signum_int`, and see if the result matches the first one. If it does, ignore it. Otherwise, emit a warning and return the answer.
> > > 3. Try `abs_integrate_use_if`, and see if the result matches the first one. If it does, ignore it. Otherwise, emit a warning and return the answer.


It won't, because it will always return something like this:

```
sage: integrate(1/(1 + abs(x+1) + abs(x-1)),x)
TypeError: unable to make sense of Maxima expression 'if(-(_SAGE_VAR_x+1)>0,-log(1-2*_SAGE_VAR_x)/2+log(3)-2/3,if(-(_SAGE_VAR_x-1)>0,_SAGE_VAR_x/3+log(3)/2-1/3,log(2*_SAGE_VAR_x+1)/2))' in Sage
```

> > I think it is better to simply NOT try the suspect integration methods upon a normal integral invocation and only resort to them when a special command/flag is given, e.g.:
> > 
> > ```
> > sage: integrate(abs(sin(x)),x,0,pi)
> > integrate(abs(sin(x)), x, 0, pi)
> > sage: integrate(abs(sin(x)),x,0,pi, algorithm="spaced_out_maxima")
> > 0
> > ```
> > or whatever access method we want to use (and whatever result we get from that).

> 
> +1


I would be in favor of this, and would give positive review to changes disabling by default but allowing this.  I think it would be pretty easy to implement, in fact.
* Keep `abs_integrate` loading initially in `maxima_lib.py`.
* Immediately set the two `methods` to `[]`, perhaps right with `init_code.append('nolabels : true')` a few lines later.
* Then add an integrator in `src/sage/symbolic/integration/external.py`, something like

```
def maxima_absint_integrator(expression, v, a=None, b=None):
    from sage.calculus.calculus import maxima
    maxima.eval("extra_definite_integration_methods=['abs_defint]")
    maxima.eval("extra_integration_methods=['signum_int]") # NOT using the if variant
    if not isinstance(expression, Expression):
        expression = SR(expression)
    if a is None:
        result = maxima.sr_integral(expression,v)
    else:
        result = maxima.sr_integral(expression, v, a, b)
    maxima.eval("extra_definite_integration_methods=[]")
    maxima.eval("extra_integration_methods=[]") # NOT using the if variant
    return result._sage_()
```
* Then in `src/sage/symbolic/integration/integral.py` just add

```
import sage.symbolic.integration.external as external
available_integrators['maxima'] = external.maxima_integrator
available_integrators['maxima_absint'] = external.maxima_absint_integrator
available_integrators['sympy'] = external.sympy_integrator
available_integrators['mathematica_free'] = external.mma_free_integrator
available_integrators['fricas'] = external.fricas_integrator
```
  and port doctests, with a humongous warning not to use this unless you are willing to check answers numerically or something.

That could, in principle, be a separate ticket, but I would want them to depend upon each other.  Also, that wouldn't remove the necessity of #17910.

By the way, it's interesting that http://sourceforge.net/p/maxima/bugs/2242/#8ddc suggests that adding `'integrate` to the methods lists could actually do at least some of these integrals...



---

archive/issue_comments_144828.json:
```json
{
    "body": "<a id='comment:34'></a>\nNever *remove* doctests, mark them as `# known bug (Trac #17910)`.",
    "created_at": "2015-06-17T16:57:45Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144828",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:34'></a>
Never *remove* doctests, mark them as `# known bug (Trac #17910)`.



---

archive/issue_events_105847.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-06-17T16:57:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12731#event-105847"
}
```



---

archive/issue_events_105848.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-06-17T16:57:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12731#event-105848"
}
```



---

archive/issue_comments_144829.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,11 +1,11 @@\n Maxima's `abs_integrate` contributed package gives us lots of nice new integrals, but also really breaks a lot of stuff, apparently.  Add to this list as you see fit:\n-* #13733 (fixed but note unwanted interactions)\n-* #11590 sgn() function (not reported upstream?)\n+* #13733 Incorrect integral in Maxima\n+* #11590 Integrating the sgn() function can produce incorrect results\n * #14591 cosh integral incorrect because of abs_integrate\n * #16643 integrate() infinite loop\n-* #17183 another abs_integrate error\n-* #17468 log(abs(sin())) problem\n-* #17511 abs(sin(x)) and abs(cos(x)) are flat-out wrong\n+* #17183 Yet another abs_integrate trig integral problem\n+* #17468 Strange integration error/hang with log(abs(sin(x)))\n+* #17511 Get integral of abs(sin(x)) and abs(cos(x)) right\n  \n ---\n \n``````\n",
    "created_at": "2015-10-29T07:57:17Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144829",
    "user": "https://github.com/slel"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,11 +1,11 @@
 Maxima's `abs_integrate` contributed package gives us lots of nice new integrals, but also really breaks a lot of stuff, apparently.  Add to this list as you see fit:
-* #13733 (fixed but note unwanted interactions)
-* #11590 sgn() function (not reported upstream?)
+* #13733 Incorrect integral in Maxima
+* #11590 Integrating the sgn() function can produce incorrect results
 * #14591 cosh integral incorrect because of abs_integrate
 * #16643 integrate() infinite loop
-* #17183 another abs_integrate error
-* #17468 log(abs(sin())) problem
-* #17511 abs(sin(x)) and abs(cos(x)) are flat-out wrong
+* #17183 Yet another abs_integrate trig integral problem
+* #17468 Strange integration error/hang with log(abs(sin(x)))
+* #17511 Get integral of abs(sin(x)) and abs(cos(x)) right
  
 ---
 
``````




---

archive/issue_comments_144830.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -6,6 +6,9 @@\n * #17183 Yet another abs_integrate trig integral problem\n * #17468 Strange integration error/hang with log(abs(sin(x)))\n * #17511 Get integral of abs(sin(x)) and abs(cos(x)) right\n+* #17910\n+* #23271\n+* #24117\n  \n ---\n \n``````\n",
    "created_at": "2017-11-26T07:16:44Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144830",
    "user": "https://github.com/rwst"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -6,6 +6,9 @@
 * #17183 Yet another abs_integrate trig integral problem
 * #17468 Strange integration error/hang with log(abs(sin(x)))
 * #17511 Get integral of abs(sin(x)) and abs(cos(x)) right
+* #17910
+* #23271
+* #24117
  
 ---
 
``````




---

archive/issue_comments_144831.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -9,6 +9,7 @@\n * #17910\n * #23271\n * #24117\n+* This is also blocking update to maxima 5.42, #26625\n  \n ---\n \n``````\n",
    "created_at": "2019-04-24T17:27:02Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144831",
    "user": "https://github.com/antonio-rojas"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -9,6 +9,7 @@
 * #17910
 * #23271
 * #24117
+* This is also blocking update to maxima 5.42, #26625
  
 ---
 
``````




---

archive/issue_comments_144832.json:
```json
{
    "body": "**Changing branch** from \"[u/rws/disable_abs_integrate](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/disable_abs_integrate)\" to \"[public/disable_abs_integrate](https://github.com/sagemath/sagetrac-mirror/tree/public/disable_abs_integrate)\".",
    "created_at": "2019-04-24T19:23:49Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144832",
    "user": "https://github.com/fchapoton"
}
```

**Changing branch** from "[u/rws/disable_abs_integrate](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/disable_abs_integrate)" to "[public/disable_abs_integrate](https://github.com/sagemath/sagetrac-mirror/tree/public/disable_abs_integrate)".



---

archive/issue_comments_144833.json:
```json
{
    "body": "<a id='comment:40'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/209b2c86c77c9069b38f436331d683720a2faeec\">209b2c8</a></td><td><code>Merge branch 'u/rws/disable_abs_integrate' in 8.8.b3</code></td></tr></table>\n",
    "created_at": "2019-04-24T19:23:49Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144833",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:40'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/209b2c86c77c9069b38f436331d683720a2faeec">209b2c8</a></td><td><code>Merge branch 'u/rws/disable_abs_integrate' in 8.8.b3</code></td></tr></table>




---

archive/issue_comments_144834.json:
```json
{
    "body": "**Changing commit** from \"[1993a28f9ea2dec2cfb255fddee6f01939f69372](https://github.com/sagemath/sagetrac-mirror/commit/1993a28f9ea2dec2cfb255fddee6f01939f69372)\" to \"[209b2c86c77c9069b38f436331d683720a2faeec](https://github.com/sagemath/sagetrac-mirror/commit/209b2c86c77c9069b38f436331d683720a2faeec)\".",
    "created_at": "2019-04-24T19:23:49Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144834",
    "user": "https://github.com/fchapoton"
}
```

**Changing commit** from "[1993a28f9ea2dec2cfb255fddee6f01939f69372](https://github.com/sagemath/sagetrac-mirror/commit/1993a28f9ea2dec2cfb255fddee6f01939f69372)" to "[209b2c86c77c9069b38f436331d683720a2faeec](https://github.com/sagemath/sagetrac-mirror/commit/209b2c86c77c9069b38f436331d683720a2faeec)".



---

archive/issue_comments_144835.json:
```json
{
    "body": "**Changing commit** from \"[209b2c86c77c9069b38f436331d683720a2faeec](https://github.com/sagemath/sagetrac-mirror/commit/209b2c86c77c9069b38f436331d683720a2faeec)\" to \"[1993a28f9ea2dec2cfb255fddee6f01939f69372](https://github.com/sagemath/sagetrac-mirror/commit/1993a28f9ea2dec2cfb255fddee6f01939f69372)\".",
    "created_at": "2019-04-24T19:32:42Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144835",
    "user": "https://github.com/fchapoton"
}
```

**Changing commit** from "[209b2c86c77c9069b38f436331d683720a2faeec](https://github.com/sagemath/sagetrac-mirror/commit/209b2c86c77c9069b38f436331d683720a2faeec)" to "[1993a28f9ea2dec2cfb255fddee6f01939f69372](https://github.com/sagemath/sagetrac-mirror/commit/1993a28f9ea2dec2cfb255fddee6f01939f69372)".



---

archive/issue_comments_144836.json:
```json
{
    "body": "<a id='comment:41'></a>\nmy merge was incorrect, so undone",
    "created_at": "2019-04-24T19:32:42Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144836",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:41'></a>
my merge was incorrect, so undone



---

archive/issue_comments_144837.json:
```json
{
    "body": "**Changing branch** from \"[public/disable_abs_integrate](https://github.com/sagemath/sagetrac-mirror/tree/public/disable_abs_integrate)\" to \"[u/rws/disable_abs_integrate](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/disable_abs_integrate)\".",
    "created_at": "2019-04-24T19:32:42Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144837",
    "user": "https://github.com/fchapoton"
}
```

**Changing branch** from "[public/disable_abs_integrate](https://github.com/sagemath/sagetrac-mirror/tree/public/disable_abs_integrate)" to "[u/rws/disable_abs_integrate](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/disable_abs_integrate)".



---

archive/issue_comments_144838.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"abs_integrate\".",
    "created_at": "2019-05-17T17:52:58Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144838",
    "user": "https://github.com/fchapoton"
}
```

**Changing keywords** from "" to "abs_integrate".



---

archive/issue_comments_144839.json:
```json
{
    "body": "**Changing commit** from \"[1993a28f9ea2dec2cfb255fddee6f01939f69372](https://github.com/sagemath/sagetrac-mirror/commit/1993a28f9ea2dec2cfb255fddee6f01939f69372)\" to \"[b5c9cc58cdda15c3d33e5a47ed953bd17989a6c2](https://github.com/sagemath/sagetrac-mirror/commit/b5c9cc58cdda15c3d33e5a47ed953bd17989a6c2)\".",
    "created_at": "2019-05-17T18:29:52Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144839",
    "user": "https://github.com/fchapoton"
}
```

**Changing commit** from "[1993a28f9ea2dec2cfb255fddee6f01939f69372](https://github.com/sagemath/sagetrac-mirror/commit/1993a28f9ea2dec2cfb255fddee6f01939f69372)" to "[b5c9cc58cdda15c3d33e5a47ed953bd17989a6c2](https://github.com/sagemath/sagetrac-mirror/commit/b5c9cc58cdda15c3d33e5a47ed953bd17989a6c2)".



---

archive/issue_comments_144840.json:
```json
{
    "body": "<a id='comment:43'></a>\nHere is a fresh new branch\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b5c9cc58cdda15c3d33e5a47ed953bd17989a6c2\">b5c9cc5</a></td><td><code>disable abs_integrate buggy module of maxima</code></td></tr></table>\n",
    "created_at": "2019-05-17T18:29:52Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144840",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:43'></a>
Here is a fresh new branch

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b5c9cc58cdda15c3d33e5a47ed953bd17989a6c2">b5c9cc5</a></td><td><code>disable abs_integrate buggy module of maxima</code></td></tr></table>




---

archive/issue_events_105849.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-05-17T18:29:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12731#event-105849"
}
```



---

archive/issue_events_105850.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-05-17T18:29:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12731#event-105850"
}
```



---

archive/issue_comments_144841.json:
```json
{
    "body": "**Changing branch** from \"[u/rws/disable_abs_integrate](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/disable_abs_integrate)\" to \"[u/chapoton/12731](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/12731)\".",
    "created_at": "2019-05-17T18:29:52Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144841",
    "user": "https://github.com/fchapoton"
}
```

**Changing branch** from "[u/rws/disable_abs_integrate](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/disable_abs_integrate)" to "[u/chapoton/12731](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/12731)".



---

archive/issue_events_105851.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-05-17T18:29:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "milestone": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12731#event-105851"
}
```



---

archive/issue_events_105852.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-05-17T18:29:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12731#event-105852"
}
```



---

archive/issue_comments_144842.json:
```json
{
    "body": "<a id='comment:44'></a>\nThanks - I wish there was a better fix than disabling.   Can you briefly comment on \n* The removal of the radexpand example\n* the `known bug` ones\nI'm sure they are quite logical but a quick glance fails to reveal it, as opposed to where you put the unevaluated integral in to replace the `abs_integrate` behavior.\n\nOr maybe this was already present behavior and you really did just refresh this, in which case no worries.  It seems like [comment:33](#comment%3A33) was the last substantive part of the discussion and memory fails.",
    "created_at": "2019-05-17T19:06:17Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144842",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:44'></a>
Thanks - I wish there was a better fix than disabling.   Can you briefly comment on 
* The removal of the radexpand example
* the `known bug` ones
I'm sure they are quite logical but a quick glance fails to reveal it, as opposed to where you put the unevaluated integral in to replace the `abs_integrate` behavior.

Or maybe this was already present behavior and you really did just refresh this, in which case no worries.  It seems like [comment:33](#comment%3A33) was the last substantive part of the discussion and memory fails.



---

archive/issue_comments_144843.json:
```json
{
    "body": "<a id='comment:45'></a>\nTagging by `known bug` allows to remember that one could hope for the answer displayed. I think Jeroen suggested to keep the doctest in this way, rather than remove them.\n\nAnd the `radexpand` example no longer works without `abs_integrate`, just returning unevaluated.",
    "created_at": "2019-05-17T19:50:25Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144843",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:45'></a>
Tagging by `known bug` allows to remember that one could hope for the answer displayed. I think Jeroen suggested to keep the doctest in this way, rather than remove them.

And the `radexpand` example no longer works without `abs_integrate`, just returning unevaluated.



---

archive/issue_comments_144844.json:
```json
{
    "body": "<a id='comment:46'></a>\nbot is morally green, please review",
    "created_at": "2019-05-18T13:39:42Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144844",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:46'></a>
bot is morally green, please review



---

archive/issue_events_105853.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-05-22T08:21:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12731#event-105853"
}
```



---

archive/issue_events_105854.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-05-22T08:21:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12731#event-105854"
}
```



---

archive/issue_comments_144845.json:
```json
{
    "body": "**Reviewer:** Dima Pasechnik",
    "created_at": "2019-05-22T08:21:57Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144845",
    "user": "https://github.com/dimpase"
}
```

**Reviewer:** Dima Pasechnik



---

archive/issue_comments_144846.json:
```json
{
    "body": "<a id='comment:47'></a>\nlooks good to me. Please add yourself as authors/reviewers...",
    "created_at": "2019-05-22T08:21:57Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144846",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:47'></a>
looks good to me. Please add yourself as authors/reviewers...



---

archive/issue_comments_144847.json:
```json
{
    "body": "**Changing author** from \"Ralf Stephan\" to \"Ralf Stephan, Fr\u00e9d\u00e9ric Chapoton\".",
    "created_at": "2019-05-22T08:22:57Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144847",
    "user": "https://github.com/fchapoton"
}
```

**Changing author** from "Ralf Stephan" to "Ralf Stephan, Frédéric Chapoton".



---

archive/issue_events_105855.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-05-24T18:29:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12731#event-105855"
}
```



---

archive/issue_events_105856.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "3241c1500e5cc95984f57ba3e24660b4aee7a18a",
    "created_at": "2019-05-24T18:29:59Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12731#event-105856"
}
```



---

archive/issue_comments_144848.json:
```json
{
    "body": "**Changing branch** from \"[u/chapoton/12731](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/12731)\" to \"[b5c9cc58cdda15c3d33e5a47ed953bd17989a6c2](https://github.com/sagemath/sagetrac-mirror/commit/b5c9cc58cdda15c3d33e5a47ed953bd17989a6c2)\".",
    "created_at": "2019-05-24T18:29:59Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144848",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/chapoton/12731](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/12731)" to "[b5c9cc58cdda15c3d33e5a47ed953bd17989a6c2](https://github.com/sagemath/sagetrac-mirror/commit/b5c9cc58cdda15c3d33e5a47ed953bd17989a6c2)".



---

archive/issue_comments_144849.json:
```json
{
    "body": "**Changing commit** from \"[b5c9cc58cdda15c3d33e5a47ed953bd17989a6c2](https://github.com/sagemath/sagetrac-mirror/commit/b5c9cc58cdda15c3d33e5a47ed953bd17989a6c2)\" to \"\".",
    "created_at": "2019-06-28T01:05:24Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144849",
    "user": "https://github.com/kcrisman"
}
```

**Changing commit** from "[b5c9cc58cdda15c3d33e5a47ed953bd17989a6c2](https://github.com/sagemath/sagetrac-mirror/commit/b5c9cc58cdda15c3d33e5a47ed953bd17989a6c2)" to "".



---

archive/issue_comments_144850.json:
```json
{
    "body": "<a id='comment:50'></a>\nAt least according to github, the following stuff in `sage/maxima_lib.py` was not removed (probably because it still passes doctests as Maxima proper improved in the meantime):\n\n```\n        Make sure the abs_integrate package is being used,\n        :trac:`11483`. The following are examples from the Maxima\n        abs_integrate documentation::\n            sage: integrate(abs(x), x)\n            1/2*x*abs(x)\n```",
    "created_at": "2019-06-28T01:05:24Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144850",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:50'></a>
At least according to github, the following stuff in `sage/maxima_lib.py` was not removed (probably because it still passes doctests as Maxima proper improved in the meantime):

```
        Make sure the abs_integrate package is being used,
        :trac:`11483`. The following are examples from the Maxima
        abs_integrate documentation::
            sage: integrate(abs(x), x)
            1/2*x*abs(x)
```



---

archive/issue_events_105857.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-07-03T11:34:48Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12731#event-105857"
}
```



---

archive/issue_events_105858.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-07-03T11:34:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "milestone": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12731#event-105858"
}
```



---

archive/issue_comments_144851.json:
```json
{
    "body": "<a id='comment:51'></a>\nNot in Sage 8.8.  Let's please to try keep tickets' milestones related to the release in which we actually intend to include them, and in particular the release in which they were *actually* included, especially when closing tickets.",
    "created_at": "2019-07-03T11:34:48Z",
    "issue": "https://github.com/sagemath/sage/issues/12731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12731#issuecomment-144851",
    "user": "https://github.com/embray"
}
```

<a id='comment:51'></a>
Not in Sage 8.8.  Let's please to try keep tickets' milestones related to the release in which we actually intend to include them, and in particular the release in which they were *actually* included, especially when closing tickets.
