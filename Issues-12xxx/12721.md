# Issue 12721: Make doctests pass when run in a random order

archive/issues_012549.json:
```json
{
    "body": "Assignee: @roed314\n\nCC:  @tscrim\n\nDoctests should succeed even if the tests in a given file are run in a different order, as long as the doctests in each block get run consecutively.  But there are various points in the Sage library where doctests depend on the order they're run in, often masking bugs.  It would be great if someone would systematically try to make doctests for all the files in Sage pass in this mode.  \n\nA good start would be to add a way to rerun doctests in a given order after a doctest fails.\n\nIssue created by migration from https://trac.sagemath.org/ticket/12721\n\n",
    "closed_at": "2017-01-21T18:03:11Z",
    "created_at": "2012-03-21T20:19:51Z",
    "labels": [
        "component: doctest framework",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Make doctests pass when run in a random order",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12721",
    "user": "https://github.com/roed314"
}
```
Assignee: @roed314

CC:  @tscrim

Doctests should succeed even if the tests in a given file are run in a different order, as long as the doctests in each block get run consecutively.  But there are various points in the Sage library where doctests depend on the order they're run in, often masking bugs.  It would be great if someone would systematically try to make doctests for all the files in Sage pass in this mode.  

A good start would be to add a way to rerun doctests in a given order after a doctest fails.

Issue created by migration from https://trac.sagemath.org/ticket/12721





---

archive/issue_comments_148859.json:
```json
{
    "body": "See #9461",
    "created_at": "2012-05-29T00:54:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12721",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12721#issuecomment-148859",
    "user": "https://github.com/roed314"
}
```

See #9461



---

archive/issue_comments_148860.json:
```json
{
    "body": "Would it be possible to make the doctester reset state between individual docstrings? That seems like the \"correct\" way to do it, but Python is such a stateful language that I'm not sure how possible that even is.",
    "created_at": "2012-06-16T06:03:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12721",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12721#issuecomment-148860",
    "user": "https://github.com/kini"
}
```

Would it be possible to make the doctester reset state between individual docstrings? That seems like the "correct" way to do it, but Python is such a stateful language that I'm not sure how possible that even is.



---

archive/issue_comments_148861.json:
```json
{
    "body": "Changing assignee from mvngu to @roed314.",
    "created_at": "2013-03-28T23:10:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12721",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12721#issuecomment-148861",
    "user": "https://github.com/roed314"
}
```

Changing assignee from mvngu to @roed314.



---

archive/issue_comments_148862.json:
```json
{
    "body": "Changing component from doctest to doctest framework.",
    "created_at": "2013-03-28T23:10:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12721",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12721#issuecomment-148862",
    "user": "https://github.com/roed314"
}
```

Changing component from doctest to doctest framework.



---

archive/issue_events_034535.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-03T08:44:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12721",
    "milestone": "sage-wishlist",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12721#event-34535"
}
```



---

archive/issue_comments_148863.json:
```json
{
    "body": "Moving to \"wishlist\" as I don't think it's realistic that it will be fixed.",
    "created_at": "2013-04-03T08:44:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12721",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12721#issuecomment-148863",
    "user": "https://github.com/jdemeyer"
}
```

Moving to "wishlist" as I don't think it's realistic that it will be fixed.



---

archive/issue_events_034536.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-08-30T04:48:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12721",
    "milestone": "sage-wishlist",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12721#event-34536"
}
```



---

archive/issue_events_034537.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-08-30T04:48:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12721",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12721#event-34537"
}
```



---

archive/issue_comments_148864.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-08-30T04:48:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12721",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12721#issuecomment-148864",
    "user": "https://github.com/jm58660"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_148865.json:
```json
{
    "body": "I think this is a duplicate of #9461. Travis, click to positive review if you agree.",
    "created_at": "2016-08-30T04:48:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12721",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12721#issuecomment-148865",
    "user": "https://github.com/jm58660"
}
```

I think this is a duplicate of #9461. Travis, click to positive review if you agree.



---

archive/issue_comments_148866.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-08-30T14:11:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12721",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12721#issuecomment-148866",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_148867.json:
```json
{
    "body": "Concur.",
    "created_at": "2016-08-30T14:11:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12721",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12721#issuecomment-148867",
    "user": "https://github.com/tscrim"
}
```

Concur.



---

archive/issue_events_034538.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-01-21T18:03:11Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12721",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12721#event-34538"
}
```



---

archive/issue_comments_148868.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2017-01-21T18:03:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12721",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12721#issuecomment-148868",
    "user": "https://github.com/vbraun"
}
```

Resolution: invalid
