# Issue 12721: Make doctests pass when run in a random order

archive/issues_012549.json:
```json
{
    "assignees": [],
    "body": "Doctests should succeed even if the tests in a given file are run in a different order, as long as the doctests in each block get run consecutively.  But there are various points in the Sage library where doctests depend on the order they're run in, often masking bugs.  It would be great if someone would systematically try to make doctests for all the files in Sage pass in this mode.  \n\nA good start would be to add a way to rerun doctests in a given order after a doctest fails.\n\nDepends on #12415\n\nAssignee: **@roed314**\n\nCC:  @tscrim\n\n_Issue created by migration from https://trac.sagemath.org/ticket/12721_\n\n",
    "closed_at": "2017-01-21T18:03:11Z",
    "created_at": "2012-03-21T20:19:51Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/component%3A%20doctest%20framework",
        "https://github.com/sagemath/sage/labels/invalid"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Make doctests pass when run in a random order",
    "type": "issue",
    "updated_at": "2017-01-21T18:03:11Z",
    "url": "https://github.com/sagemath/sage/issues/12721",
    "user": "https://github.com/roed314"
}
```
Doctests should succeed even if the tests in a given file are run in a different order, as long as the doctests in each block get run consecutively.  But there are various points in the Sage library where doctests depend on the order they're run in, often masking bugs.  It would be great if someone would systematically try to make doctests for all the files in Sage pass in this mode.  

A good start would be to add a way to rerun doctests in a given order after a doctest fails.

Depends on #12415

Assignee: **@roed314**

CC:  @tscrim

_Issue created by migration from https://trac.sagemath.org/ticket/12721_





---

archive/issue_events_160259.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2012-03-21T20:19:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12721",
    "milestone_number": null,
    "milestone_title": "sage-5.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12721#event-160259"
}
```



---

archive/issue_events_160260.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2012-03-21T20:19:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12721",
    "label": "https://github.com/sagemath/sage/labels/doctest%20coverage",
    "label_color": "696969",
    "label_name": "doctest coverage",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12721#event-160260"
}
```



---

archive/issue_events_160261.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2012-03-21T20:19:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12721",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12721#event-160261"
}
```



---

archive/issue_events_160262.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2012-03-21T20:19:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12721",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12721#event-160262"
}
```



---

archive/issue_comments_144674.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nSee #9461",
    "created_at": "2012-05-29T00:54:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12721",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12721#issuecomment-144674",
    "user": "https://github.com/roed314"
}
```

<a id='comment:1'>Comment 1:</a>
See #9461



---

archive/issue_comments_144675.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nWould it be possible to make the doctester reset state between individual docstrings? That seems like the \"correct\" way to do it, but Python is such a stateful language that I'm not sure how possible that even is.",
    "created_at": "2012-06-16T06:03:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12721",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12721#issuecomment-144675",
    "user": "https://github.com/kini"
}
```

<a id='comment:2'>Comment 2:</a>
Would it be possible to make the doctester reset state between individual docstrings? That seems like the "correct" way to do it, but Python is such a stateful language that I'm not sure how possible that even is.



---

archive/issue_events_160263.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2012-06-16T06:03:23Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/12721",
    "title_is": "Make doctests pass when run in a random order",
    "title_was": "Make doctetests pass when run in a random order",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12721#event-160263"
}
```



---

archive/issue_comments_144676.json:
```json
{
    "body": "Changed assignee from **mvngu** to **@roed314**",
    "created_at": "2013-03-28T23:10:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12721",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12721#issuecomment-144676",
    "user": "https://github.com/roed314"
}
```

Changed assignee from **mvngu** to **@roed314**



---

archive/issue_events_160264.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2013-03-28T23:10:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12721",
    "label": "https://github.com/sagemath/sage/labels/doctest%20coverage",
    "label_color": "696969",
    "label_name": "doctest coverage",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12721#event-160264"
}
```



---

archive/issue_events_160265.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2013-03-28T23:10:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12721",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20doctest%20framework",
    "label_color": "000080",
    "label_name": "component: doctest framework",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12721#event-160265"
}
```



---

archive/issue_events_160266.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-03T08:44:37Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12721",
    "milestone_number": null,
    "milestone_title": "sage-5.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12721#event-160266"
}
```



---

archive/issue_events_160267.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-03T08:44:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12721",
    "label": "https://github.com/sagemath/sage/labels/wishlist%20item",
    "label_color": "e81ff9",
    "label_name": "wishlist item",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12721#event-160267"
}
```



---

archive/issue_comments_144677.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nMoving to \"wishlist\" as I don't think it's realistic that it will be fixed.",
    "created_at": "2013-04-03T08:44:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12721",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12721#issuecomment-144677",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'>Comment 4:</a>
Moving to "wishlist" as I don't think it's realistic that it will be fixed.



---

archive/issue_events_160268.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-08-30T04:48:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12721",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12721#event-160268"
}
```



---

archive/issue_events_160269.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-08-30T04:48:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12721",
    "label": "https://github.com/sagemath/sage/labels/wishlist%20item",
    "label_color": "e81ff9",
    "label_name": "wishlist item",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12721#event-160269"
}
```



---

archive/issue_events_160270.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-08-30T04:48:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12721",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12721#event-160270"
}
```



---

archive/issue_events_160271.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-08-30T04:48:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12721",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12721#event-160271"
}
```



---

archive/issue_comments_144678.json:
```json
{
    "body": "Author: **tscrim**",
    "created_at": "2016-08-30T04:48:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12721",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12721#issuecomment-144678",
    "user": "https://github.com/jm58660"
}
```

Author: **tscrim**



---

archive/issue_comments_144679.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nI think this is a duplicate of #9461. Travis, click to positive review if you agree.",
    "created_at": "2016-08-30T04:48:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12721",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12721#issuecomment-144679",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:5'>Comment 5:</a>
I think this is a duplicate of #9461. Travis, click to positive review if you agree.



---

archive/issue_comments_144680.json:
```json
{
    "body": "Changed author from **tscrim** to none",
    "created_at": "2016-08-30T05:50:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12721",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12721#issuecomment-144680",
    "user": "https://github.com/jm58660"
}
```

Changed author from **tscrim** to none



---

archive/issue_events_160272.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-08-30T14:11:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12721",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12721#event-160272"
}
```



---

archive/issue_events_160273.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-08-30T14:11:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12721",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12721#event-160273"
}
```



---

archive/issue_comments_144681.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nConcur.",
    "created_at": "2016-08-30T14:11:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12721",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12721#issuecomment-144681",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:7'>Comment 7:</a>
Concur.



---

archive/issue_events_160274.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-01-21T18:03:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12721",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12721#event-160274"
}
```



---

archive/issue_events_160275.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-01-21T18:03:11Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/12721",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12721#event-160275"
}
```
