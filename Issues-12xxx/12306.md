# Issue 12306: Static sparse graphs for fast low-level computations

archive/issues_012134.json:
```json
{
    "assignees": [
        "https://github.com/jasongrout",
        "https://github.com/nathanncohen",
        "https://github.com/rlmill"
    ],
    "body": "Helloooooo !!\n\nThis extensively documented module implements a very basic data structure for graphs that is helpful for *EFFICIENT* implementations. It was actually used by Sage already in sage.graphs.distances_all_pairs, but it is better to have a proper documentation for such things.\n\nAnd of course, this does not solve the current lack of a Python-level static graph class, that would handle loops/multiedges and labels... It will come, though `:-)`\n\nNathann\n\nDepends on #12235\n\nCC:  @dcoudert\n\nKeywords: **Cernay2012**\n\nComponent: **graph theory**\n\nAuthor: **Nathann Cohen**\n\nReviewer: **David Coudert**\n\nMerged: **sage-5.0.beta5**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/12306_\n\n",
    "closed_at": "2012-02-22T10:45:42Z",
    "created_at": "2012-01-13T16:25:49Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Static sparse graphs for fast low-level computations",
    "type": "issue",
    "updated_at": "2012-02-22T10:45:42Z",
    "url": "https://github.com/sagemath/sage/issues/12306",
    "user": "https://github.com/nathanncohen"
}
```
Helloooooo !!

This extensively documented module implements a very basic data structure for graphs that is helpful for *EFFICIENT* implementations. It was actually used by Sage already in sage.graphs.distances_all_pairs, but it is better to have a proper documentation for such things.

And of course, this does not solve the current lack of a Python-level static graph class, that would handle loops/multiedges and labels... It will come, though `:-)`

Nathann

Depends on #12235

CC:  @dcoudert

Keywords: **Cernay2012**

Component: **graph theory**

Author: **Nathann Cohen**

Reviewer: **David Coudert**

Merged: **sage-5.0.beta5**

_Issue created by migration from https://trac.sagemath.org/ticket/12306_





---

archive/issue_events_167606.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-01-13T16:25:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12306",
    "milestone_number": null,
    "milestone_title": "sage-5.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12306#event-167606"
}
```



---

archive/issue_events_167607.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-01-13T16:25:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12306",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12306#event-167607"
}
```



---

archive/issue_events_167608.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-01-13T16:25:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12306",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12306#event-167608"
}
```



---

archive/issue_events_167609.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-01-13T16:25:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12306",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12306#event-167609"
}
```



---

archive/issue_events_167610.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2012-01-13T16:25:49Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/12306",
    "subject": "https://github.com/nathanncohen",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12306#event-167610"
}
```



---

archive/issue_events_167611.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-01-13T16:25:49Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/12306",
    "subject": "https://github.com/nathanncohen",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12306#event-167611"
}
```



---

archive/issue_events_167612.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2012-01-13T16:25:49Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/12306",
    "subject": "https://github.com/nathanncohen",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12306#event-167612"
}
```



---

archive/issue_events_167613.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-01-13T17:03:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12306",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12306#event-167613"
}
```



---

archive/issue_comments_133446.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI'm unable to install the patch on sage-5.0.beta1.\n\nFile `digraph.py.rej`:\n\n```\n--- digraph.py\n+++ digraph.py\n@@ -2565,18 +2574,24 @@\n \n         TESTS:\n \n-        Checking against NetworkX::\n-\n+        Checking against NetworkX, and another of Sage's implementations::\n+\n+            sage: from sage.graphs.base.static_sparse_graph import strongly_connected_components\n             sage: import networkx\n             sage: for i in range(100):                                     # long\n             ...        g = digraphs.RandomDirectedGNP(100,.05)             # long\n             ...        h = g.networkx_graph()                              # long\n             ...        scc1 = g.strongly_connected_components()            # long\n             ...        scc2 = networkx.strongly_connected_components(h)    # long\n+            ...        scc3 = strongly_connected_components(g)             # long\n             ...        s1 = Set(map(Set,scc1))                             # long\n             ...        s2 = Set(map(Set,scc2))                             # long\n+            ...        s3 = Set(map(Set,scc3))                             # long\n             ...        if s1 != s2:                                        # long\n             ...            print \"Ooch !\"                                  # long\n+            ...        if s1 != s3:                                        # long\n+            ...            print \"Oooooch !\"                               # long\n+\n         \"\"\"\n \n         try:\n\n```",
    "created_at": "2012-02-03T10:03:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12306#issuecomment-133446",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:2" align="right">comment:2</div>

I'm unable to install the patch on sage-5.0.beta1.

File `digraph.py.rej`:

```
--- digraph.py
+++ digraph.py
@@ -2565,18 +2574,24 @@
 
         TESTS:
 
-        Checking against NetworkX::
-
+        Checking against NetworkX, and another of Sage's implementations::
+
+            sage: from sage.graphs.base.static_sparse_graph import strongly_connected_components
             sage: import networkx
             sage: for i in range(100):                                     # long
             ...        g = digraphs.RandomDirectedGNP(100,.05)             # long
             ...        h = g.networkx_graph()                              # long
             ...        scc1 = g.strongly_connected_components()            # long
             ...        scc2 = networkx.strongly_connected_components(h)    # long
+            ...        scc3 = strongly_connected_components(g)             # long
             ...        s1 = Set(map(Set,scc1))                             # long
             ...        s2 = Set(map(Set,scc2))                             # long
+            ...        s3 = Set(map(Set,scc3))                             # long
             ...        if s1 != s2:                                        # long
             ...            print "Ooch !"                                  # long
+            ...        if s1 != s3:                                        # long
+            ...            print "Oooooch !"                               # long
+
         """
 
         try:

```



---

archive/issue_comments_133447.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nOopps.. This patch needs #12235 to be applied first, though it is now merged with beta2 `:-)`\n\nNathann",
    "created_at": "2012-02-06T11:39:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12306#issuecomment-133447",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:3" align="right">comment:3</div>

Oopps.. This patch needs #12235 to be applied first, though it is now merged with beta2 `:-)`

Nathann



---

archive/issue_comments_133448.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI can now install the patch with sage-5.0.beta2. \n\nNo compilation error. Generation of the documentation is OK.\n\nHowever, can you improve in section `What does it take as input?` the `n^2sizeof(...)` and the nsizeof(...). For instance you can add a \\cdot between `n` and `sizeof(...)`.\n\nFor functions returning a dictionnary of dictionnary, you should add an extra warning recalling that such structures are huge. I'm not sure most of us can use this for graphs with 10.000 nodes.\n\nBest, \n\nD.",
    "created_at": "2012-02-06T12:17:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12306#issuecomment-133448",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:4" align="right">comment:4</div>

I can now install the patch with sage-5.0.beta2. 

No compilation error. Generation of the documentation is OK.

However, can you improve in section `What does it take as input?` the `n^2sizeof(...)` and the nsizeof(...). For instance you can add a \cdot between `n` and `sizeof(...)`.

For functions returning a dictionnary of dictionnary, you should add an extra warning recalling that such structures are huge. I'm not sure most of us can use this for graphs with 10.000 nodes.

Best, 

D.



---

archive/issue_comments_133449.json:
```json
{
    "body": "Reviewer: **David Coudert**",
    "created_at": "2012-02-06T12:17:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12306#issuecomment-133449",
    "user": "https://github.com/dcoudert"
}
```

Reviewer: **David Coudert**



---

archive/issue_comments_133450.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nHere it is !!! `:-)`\n\nI also removed some trailing whitespaces, as I learned here that they were evil `:-P`\n\nNathann",
    "created_at": "2012-02-06T15:52:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12306#issuecomment-133450",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:5" align="right">comment:5</div>

Here it is !!! `:-)`

I also removed some trailing whitespaces, as I learned here that they were evil `:-P`

Nathann



---

archive/issue_comments_133451.json:
```json
{
    "body": "Changed keywords from none to **Cernay2012**",
    "created_at": "2012-02-06T15:52:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12306#issuecomment-133451",
    "user": "https://github.com/nathanncohen"
}
```

Changed keywords from none to **Cernay2012**



---

archive/issue_comments_133452.json:
```json
{
    "body": "Attachment: **[trac_12306_doc.patch.gz](https://github.com/sagemath/sage/files/ticket12306/trac_12306_doc.patch.gz)**",
    "created_at": "2012-02-06T15:53:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12306#issuecomment-133452",
    "user": "https://github.com/nathanncohen"
}
```

Attachment: **[trac_12306_doc.patch.gz](https://github.com/sagemath/sage/files/ticket12306/trac_12306_doc.patch.gz)**



---

archive/issue_comments_133453.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI can install both patch correctly and the documentation is now well presented and with enough details.\n\nGood work !\n\nD.\n\nPS: what's the relation between this patch and the Cernay 2012 Music Festival ? ;-)",
    "created_at": "2012-02-06T17:20:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12306#issuecomment-133453",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:6" align="right">comment:6</div>

I can install both patch correctly and the documentation is now well presented and with enough details.

Good work !

D.

PS: what's the relation between this patch and the Cernay 2012 Music Festival ? ;-)



---

archive/issue_events_167614.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2012-02-06T17:20:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12306",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12306#event-167614"
}
```



---

archive/issue_events_167615.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2012-02-06T17:20:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12306",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12306#event-167615"
}
```



---

archive/issue_comments_133454.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\n> PS: what's the relation between this patch and the Cernay 2012 Music Festival ? ;-)\n\nSome snow, and around 10 people in a tower coding Sage patches on their computers `:-)`\n\nhttp://wiki.sagemath.org/combinat/SageCombinatDaysCernay2012\n\nNathann",
    "created_at": "2012-02-06T17:25:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12306#issuecomment-133454",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:7" align="right">comment:7</div>

> PS: what's the relation between this patch and the Cernay 2012 Music Festival ? ;-)

Some snow, and around 10 people in a tower coding Sage patches on their computers `:-)`

http://wiki.sagemath.org/combinat/SageCombinatDaysCernay2012

Nathann



---

archive/issue_comments_133455.json:
```json
{
    "body": "Changed dependencies from **12235** to **#12235**",
    "created_at": "2012-02-06T21:35:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12306#issuecomment-133455",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **12235** to **#12235**



---

archive/issue_events_167616.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-15T10:03:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12306",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12306#event-167616"
}
```



---

archive/issue_events_167617.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-15T10:03:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12306",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12306#event-167617"
}
```



---

archive/issue_comments_133456.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nPlease fix the commit message of the first patch.",
    "created_at": "2012-02-15T10:03:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12306#issuecomment-133456",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:9" align="right">comment:9</div>

Please fix the commit message of the first patch.



---

archive/issue_comments_133457.json:
```json
{
    "body": "Attachment: **[trac_12306.patch.gz](https://github.com/sagemath/sage/files/ticket12306/trac_12306.patch.gz)**",
    "created_at": "2012-02-15T10:45:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12306#issuecomment-133457",
    "user": "https://github.com/nathanncohen"
}
```

Attachment: **[trac_12306.patch.gz](https://github.com/sagemath/sage/files/ticket12306/trac_12306.patch.gz)**



---

archive/issue_comments_133458.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nGloops... Done ! `^^;`\n\nNathann",
    "created_at": "2012-02-15T10:46:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12306#issuecomment-133458",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:10" align="right">comment:10</div>

Gloops... Done ! `^^;`

Nathann



---

archive/issue_events_167618.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-02-15T10:46:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12306",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12306#event-167618"
}
```



---

archive/issue_events_167619.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-02-15T10:46:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12306",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12306#event-167619"
}
```



---

archive/issue_comments_133459.json:
```json
{
    "body": "Merged: **sage-5.0.beta5**",
    "created_at": "2012-02-22T10:45:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12306#issuecomment-133459",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.0.beta5**



---

archive/issue_events_167620.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-22T10:45:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12306",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12306#event-167620"
}
```



---

archive/issue_events_167621.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-22T10:45:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/12306",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12306#event-167621"
}
```
