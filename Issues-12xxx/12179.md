# Issue 12179: Binomial of integer (mod n) returns integer

archive/issues_012007.json:
```json
{
    "assignees": [],
    "body": "\n```\nsage: R = Integers(6)\nsage: binomial(R(5), R(2))\n10\nsage: binomial(R(5), R(2)).parent()\nInteger Ring\n```\n\nBut `binomial(R(5), R(2))` is nonsense, both as an element of ZZ and as an element of R:\n\n```\nsage: binomial(5, 2)\n10\nsage: binomial(11, 2)\n55\nsage: binomial(5, 8)\n0\n```\n\nOn input `binomial(x, y)`, what Sage should do instead is the following:\n* If the parent of y is Zmod(n) rather than ZZ, a `TypeError` should be raised.\n* (This seems to be fixed by #17852) If factorial(y) is zero or a zero-divisor in the parent of x, a `ZeroDivisionError` should be raised. This is automatic if one computes binomial(x, y) simply as\n\n  ```\n  x.parent()(prod([x-k for k in range(y)]) / factorial(y))\n  ```\n   \n\nApply:\n\n* [attachment: 12179_new.patch.gz](https://github.com/sagemath/sage/files/ticket12179/12179_new.patch.gz)\n\nAssignee: **@aghitza**\n\nKeywords: **binomial coefficient modulo sd35**\n\nStopgaps: **todo**\n\nReviewer: **Colton Pauderis, Johan Bosman, Marco Streng**\n\nAuthor: **Sam Scott, Marco Streng**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/12179_\n\n",
    "created_at": "2011-12-18T15:34:57Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20basic%20arithmetic",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/needs%20work"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Binomial of integer (mod n) returns integer",
    "type": "issue",
    "updated_at": "2022-12-29T01:28:25Z",
    "url": "https://github.com/sagemath/sage/issues/12179",
    "user": "https://github.com/sagetrac-scotts"
}
```

```
sage: R = Integers(6)
sage: binomial(R(5), R(2))
10
sage: binomial(R(5), R(2)).parent()
Integer Ring
```

But `binomial(R(5), R(2))` is nonsense, both as an element of ZZ and as an element of R:

```
sage: binomial(5, 2)
10
sage: binomial(11, 2)
55
sage: binomial(5, 8)
0
```

On input `binomial(x, y)`, what Sage should do instead is the following:
* If the parent of y is Zmod(n) rather than ZZ, a `TypeError` should be raised.
* (This seems to be fixed by #17852) If factorial(y) is zero or a zero-divisor in the parent of x, a `ZeroDivisionError` should be raised. This is automatic if one computes binomial(x, y) simply as

  ```
  x.parent()(prod([x-k for k in range(y)]) / factorial(y))
  ```
   

Apply:

* [attachment: 12179_new.patch.gz](https://github.com/sagemath/sage/files/ticket12179/12179_new.patch.gz)

Assignee: **@aghitza**

Keywords: **binomial coefficient modulo sd35**

Stopgaps: **todo**

Reviewer: **Colton Pauderis, Johan Bosman, Marco Streng**

Author: **Sam Scott, Marco Streng**

_Issue created by migration from https://trac.sagemath.org/ticket/12179_





---

archive/issue_events_146104.json:
```json
{
    "actor": "https://github.com/sagetrac-scotts",
    "created_at": "2011-12-18T15:34:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20basic%20arithmetic",
    "label_color": "0000ff",
    "label_name": "component: basic arithmetic",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12179#event-146104"
}
```



---

archive/issue_events_146105.json:
```json
{
    "actor": "https://github.com/sagetrac-scotts",
    "created_at": "2011-12-18T15:34:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12179#event-146105"
}
```



---

archive/issue_events_146106.json:
```json
{
    "actor": "https://github.com/sagetrac-scotts",
    "created_at": "2011-12-18T15:34:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12179#event-146106"
}
```



---

archive/issue_comments_133363.json:
```json
{
    "body": "Attachment: **[12179.patch.gz](https://github.com/sagemath/sage/files/ticket12179/12179.patch.gz)**",
    "created_at": "2011-12-20T01:27:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12179#issuecomment-133363",
    "user": "https://github.com/sagetrac-scotts"
}
```

Attachment: **[12179.patch.gz](https://github.com/sagemath/sage/files/ticket12179/12179.patch.gz)**



---

archive/issue_comments_133364.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nAttached patch should add this functionality with no impact on speed of standard integer/float/etc binomial calculation.",
    "created_at": "2011-12-20T01:29:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12179#issuecomment-133364",
    "user": "https://github.com/sagetrac-scotts"
}
```

<a id='comment:1'>Comment 1:</a>
Attached patch should add this functionality with no impact on speed of standard integer/float/etc binomial calculation.



---

archive/issue_events_146107.json:
```json
{
    "actor": "https://github.com/sagetrac-scotts",
    "created_at": "2011-12-20T01:29:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12179#event-146107"
}
```



---

archive/issue_comments_133365.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nLooks good to me: positive review.",
    "created_at": "2011-12-20T10:15:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12179#issuecomment-133365",
    "user": "https://github.com/sagetrac-cpauderis"
}
```

<a id='comment:2'>Comment 2:</a>
Looks good to me: positive review.



---

archive/issue_events_146108.json:
```json
{
    "actor": "https://github.com/sagetrac-cpauderis",
    "created_at": "2011-12-20T10:15:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12179#event-146108"
}
```



---

archive/issue_events_146109.json:
```json
{
    "actor": "https://github.com/sagetrac-cpauderis",
    "created_at": "2011-12-20T10:15:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12179#event-146109"
}
```



---

archive/issue_comments_133366.json:
```json
{
    "body": "Author: **Sam Scott**",
    "created_at": "2011-12-20T13:25:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12179#issuecomment-133366",
    "user": "https://github.com/sagetrac-scotts"
}
```

Author: **Sam Scott**



---

archive/issue_comments_133367.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nAttachment: **[12179.2.patch.gz](https://github.com/sagemath/sage/files/ticket12179/12179.2.patch.gz)**\n\nPatch added to deal with the case where the input was a primitive python int.\n\nThanks to Colton (cpauderis) for catching that one.",
    "created_at": "2011-12-20T14:04:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12179#issuecomment-133367",
    "user": "https://github.com/sagetrac-scotts"
}
```

<a id='comment:4'>Comment 4:</a>
Attachment: **[12179.2.patch.gz](https://github.com/sagemath/sage/files/ticket12179/12179.2.patch.gz)**

Patch added to deal with the case where the input was a primitive python int.

Thanks to Colton (cpauderis) for catching that one.



---

archive/issue_events_146110.json:
```json
{
    "actor": "https://github.com/sagetrac-johanbosman",
    "created_at": "2011-12-21T15:08:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12179#event-146110"
}
```



---

archive/issue_events_146111.json:
```json
{
    "actor": "https://github.com/sagetrac-johanbosman",
    "created_at": "2011-12-21T15:08:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12179#event-146111"
}
```



---

archive/issue_comments_133368.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nThe line\n\n```\n Test of integers modulo n:\n}}{\nshould end in two colons (for docbuilding).  Furthermore, \n{{{\n return x.parent()(binomial(ZZ(x), m, **kwds)) \n}}}\nis inefficient when computing modulo a small number n: the binomial coefficient over ZZ may be huge, whereas its reduction modulo n will be small.  It is therefore better to to the entire calculation modulo n.",
    "created_at": "2011-12-21T15:08:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12179#issuecomment-133368",
    "user": "https://github.com/sagetrac-johanbosman"
}
```

<a id='comment:5'>Comment 5:</a>
The line

```
 Test of integers modulo n:
}}{
should end in two colons (for docbuilding).  Furthermore, 
{{{
 return x.parent()(binomial(ZZ(x), m, **kwds)) 
}}}
is inefficient when computing modulo a small number n: the binomial coefficient over ZZ may be huge, whereas its reduction modulo n will be small.  It is therefore better to to the entire calculation modulo n.



---

archive/issue_comments_133369.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nThe line\n\n```\n Test of integers modulo n:\n```\nshould end in two colons (for docbuilding).  Furthermore, \n\n```\n return x.parent()(binomial(ZZ(x), m, **kwds)) \n```\nis inefficient when computing modulo a small number n: the binomial coefficient over ZZ may be huge, whereas its reduction modulo n will be small.  It is therefore better to to the entire calculation modulo n.",
    "created_at": "2011-12-21T15:09:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12179#issuecomment-133369",
    "user": "https://github.com/sagetrac-johanbosman"
}
```

<a id='comment:6'>Comment 6:</a>
The line

```
 Test of integers modulo n:
```
should end in two colons (for docbuilding).  Furthermore, 

```
 return x.parent()(binomial(ZZ(x), m, **kwds)) 
```
is inefficient when computing modulo a small number n: the binomial coefficient over ZZ may be huge, whereas its reduction modulo n will be small.  It is therefore better to to the entire calculation modulo n.



---

archive/issue_comments_133370.json:
```json
{
    "body": "Changed keywords from **binomial coefficiant, modulo** to **binomial coefficiant, modulo sd35**",
    "created_at": "2011-12-21T15:14:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12179#issuecomment-133370",
    "user": "https://github.com/sagetrac-johanbosman"
}
```

Changed keywords from **binomial coefficiant, modulo** to **binomial coefficiant, modulo sd35**



---

archive/issue_comments_133371.json:
```json
{
    "body": "Work Issues: **rebase on top of #11417, reST formatting issue, improve efficiency**",
    "created_at": "2012-01-05T13:18:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12179#issuecomment-133371",
    "user": "https://github.com/mstreng"
}
```

Work Issues: **rebase on top of #11417, reST formatting issue, improve efficiency**



---

archive/issue_comments_133372.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nPatch is incompatible with #11417, which is already merged.",
    "created_at": "2012-01-05T13:18:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12179#issuecomment-133372",
    "user": "https://github.com/mstreng"
}
```

<a id='comment:8'>Comment 8:</a>
Patch is incompatible with #11417, which is already merged.



---

archive/issue_comments_133373.json:
```json
{
    "body": "Reviewer: **Colton Pauderis, Johan Bosman, Marco Streng**",
    "created_at": "2012-01-05T13:18:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12179#issuecomment-133373",
    "user": "https://github.com/mstreng"
}
```

Reviewer: **Colton Pauderis, Johan Bosman, Marco Streng**



---

archive/issue_comments_133374.json:
```json
{
    "body": "Dependencies: **#11417**",
    "created_at": "2012-01-05T13:18:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12179#issuecomment-133374",
    "user": "https://github.com/mstreng"
}
```

Dependencies: **#11417**



---

archive/issue_comments_133375.json:
```json
{
    "body": "Changed keywords from **binomial coefficiant, modulo sd35** to **binomial coefficient modulo sd35**",
    "created_at": "2012-01-05T13:18:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12179#issuecomment-133375",
    "user": "https://github.com/mstreng"
}
```

Changed keywords from **binomial coefficiant, modulo sd35** to **binomial coefficient modulo sd35**



---

archive/issue_comments_133376.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nReplying to [johanbosman](#comment%3A6):\n> Furthermore, \n> \n> ```\n>  return x.parent()(binomial(ZZ(x), m, **kwds)) \n> ```\n> is inefficient when computing modulo a small number n: the binomial coefficient over ZZ may be huge, whereas its reduction modulo n will be small.  It is therefore better to to the entire calculation modulo n.\n\nI definitely agree, the changes I was proposing were to simply try and return a more sensible type.\n\nSince I am new to sage, I was trying to keep as much of the existing algorithm intact, so that it wouldn't have any unexpected behaviour. For example, currently it seems that sage uses Peri to calculate the usual binomial coefficient. So I wasn't sure if the implementation for modulo n would belong here.",
    "created_at": "2012-01-08T23:55:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12179#issuecomment-133376",
    "user": "https://github.com/sagetrac-scotts"
}
```

<a id='comment:9'>Comment 9:</a>
Replying to [johanbosman](#comment%3A6):
> Furthermore, 
> 
> ```
>  return x.parent()(binomial(ZZ(x), m, **kwds)) 
> ```
> is inefficient when computing modulo a small number n: the binomial coefficient over ZZ may be huge, whereas its reduction modulo n will be small.  It is therefore better to to the entire calculation modulo n.

I definitely agree, the changes I was proposing were to simply try and return a more sensible type.

Since I am new to sage, I was trying to keep as much of the existing algorithm intact, so that it wouldn't have any unexpected behaviour. For example, currently it seems that sage uses Peri to calculate the usual binomial coefficient. So I wasn't sure if the implementation for modulo n would belong here.



---

archive/issue_comments_133377.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nThat should obviously be Pari, not Peri.",
    "created_at": "2012-01-09T00:02:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12179#issuecomment-133377",
    "user": "https://github.com/sagetrac-scotts"
}
```

<a id='comment:10'>Comment 10:</a>
That should obviously be Pari, not Peri.



---

archive/issue_comments_133378.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nReplying to [scotts](#comment%3A9):\n> I definitely agree, the changes I was proposing were to simply try and return a more sensible type.\n> \n> Since I am new to sage, I was trying to keep as much of the existing algorithm intact, so that it wouldn't have any unexpected behaviour. For example, currently it seems that sage uses Peri to calculate the usual binomial coefficient. So I wasn't sure if the implementation for modulo n would belong here. \n\nThat sounds sensible, this is a bugfix patch and the inefficiency is not introduced by your patch. So if you don't want to, you don't have to improve the speed. However, since you're editing anyway, you might as well. It's up to you. The other issues\n \n* documentation that does not build correctly\n* a conflicting patch has already been merged\n\ndo need to be resolved though.\n\nFor the first issue, after building Sage, use `sage -docbuild reference html` to rebuild the documentation and see if all the changed documentation looks good (in this case, replacing : by :: will probably be enough).\n\nAs for the second issue, you should not write two independent patches editing the same part of a file. They can't be applied after each other, because the second-to-be-applied can't find the piece of code that it should change. You should write your patch for #12179 on top of a copy of Sage that has #11417 applied.",
    "created_at": "2012-01-09T10:24:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12179#issuecomment-133378",
    "user": "https://github.com/mstreng"
}
```

<a id='comment:11'>Comment 11:</a>
Replying to [scotts](#comment%3A9):
> I definitely agree, the changes I was proposing were to simply try and return a more sensible type.
> 
> Since I am new to sage, I was trying to keep as much of the existing algorithm intact, so that it wouldn't have any unexpected behaviour. For example, currently it seems that sage uses Peri to calculate the usual binomial coefficient. So I wasn't sure if the implementation for modulo n would belong here. 

That sounds sensible, this is a bugfix patch and the inefficiency is not introduced by your patch. So if you don't want to, you don't have to improve the speed. However, since you're editing anyway, you might as well. It's up to you. The other issues
 
* documentation that does not build correctly
* a conflicting patch has already been merged

do need to be resolved though.

For the first issue, after building Sage, use `sage -docbuild reference html` to rebuild the documentation and see if all the changed documentation looks good (in this case, replacing : by :: will probably be enough).

As for the second issue, you should not write two independent patches editing the same part of a file. They can't be applied after each other, because the second-to-be-applied can't find the piece of code that it should change. You should write your patch for #12179 on top of a copy of Sage that has #11417 applied.



---

archive/issue_comments_133379.json:
```json
{
    "body": "Attachment: **[12179.3.patch.gz](https://github.com/sagemath/sage/files/ticket12179/12179.3.patch.gz)**",
    "created_at": "2012-12-16T17:27:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12179#issuecomment-133379",
    "user": "https://github.com/sagetrac-scotts"
}
```

Attachment: **[12179.3.patch.gz](https://github.com/sagemath/sage/files/ticket12179/12179.3.patch.gz)**



---

archive/issue_comments_133380.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nFinally got around to reinstalling sage after a hard-drive failure. Hoping to get back on track with contributing to sage. Sorry for the incredibly slow response.\n\nHopefully this should tie up this loose end.\n\nWhile I do agree that there is room for improving the speed of calculating binomial coefficients mod N, I don't feel like it's worth bloating the binomial function with multiple extra lines of code for something which doesn't seem to be used much.\n\nPerhaps it could be added as a feature at a later stage when the need is there.\n\nHowever, I feel that this patch adequately addresses the original issue: that elements are treated as integers and returned as such, with no attempt to return them to their original class. This could potentially help with other cases.\n\nThanks for the advice with regards to the other issues.",
    "created_at": "2012-12-16T17:38:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12179#issuecomment-133380",
    "user": "https://github.com/sagetrac-scotts"
}
```

<a id='comment:12'>Comment 12:</a>
Finally got around to reinstalling sage after a hard-drive failure. Hoping to get back on track with contributing to sage. Sorry for the incredibly slow response.

Hopefully this should tie up this loose end.

While I do agree that there is room for improving the speed of calculating binomial coefficients mod N, I don't feel like it's worth bloating the binomial function with multiple extra lines of code for something which doesn't seem to be used much.

Perhaps it could be added as a feature at a later stage when the need is there.

However, I feel that this patch adequately addresses the original issue: that elements are treated as integers and returned as such, with no attempt to return them to their original class. This could potentially help with other cases.

Thanks for the advice with regards to the other issues.



---

archive/issue_events_146112.json:
```json
{
    "actor": "https://github.com/sagetrac-scotts",
    "created_at": "2012-12-16T17:38:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12179#event-146112"
}
```



---

archive/issue_events_146113.json:
```json
{
    "actor": "https://github.com/sagetrac-scotts",
    "created_at": "2012-12-16T17:38:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12179#event-146113"
}
```



---

archive/issue_comments_133381.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,8 +7,21 @@\n Integer Ring\n ```\n \n-Wouldn't we expect the answer to be 4 and an element of R?\n+But `binomial(R(5), R(2))` is nonsense, both as an element of ZZ and as an element of R:\n \n+```\n+sage: binomial(5, 2)\n+10\n+sage: binomial(11, 2)\n+55\n+sage: binomial(5, 8)\n+0\n+```\n \n-The offending code is in the method binomial of [rings/arith.py](http://trac.sagemath.org/sage_trac/browser/sage/rings/arith.py)\n-The problem is that the code will immediately attempt to deal with the inputs as integers by x=ZZ(x) and makes no attempt to convert them back into the original ring.\n+On input `binomial(x, y)`, what Sage should do instead is the following:\n+* If the parent of y is Zmod(n) rather than ZZ, a `ValueError` should be raised.\n+* If factorial(y) is zero or a zero-divisor in the parent of x, a `ZeroDivisionError` should be raised. This is automatic if one computes binomial(x, y) simply as\n+\n+  ```\n+  x.parent(prod([x-k for k in range(y)]) / factorial(y))\n+  ```\n``````\n",
    "created_at": "2013-02-04T12:51:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12179#issuecomment-133381",
    "user": "https://github.com/mstreng"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,8 +7,21 @@
 Integer Ring
 ```
 
-Wouldn't we expect the answer to be 4 and an element of R?
+But `binomial(R(5), R(2))` is nonsense, both as an element of ZZ and as an element of R:
 
+```
+sage: binomial(5, 2)
+10
+sage: binomial(11, 2)
+55
+sage: binomial(5, 8)
+0
+```
 
-The offending code is in the method binomial of [rings/arith.py](http://trac.sagemath.org/sage_trac/browser/sage/rings/arith.py)
-The problem is that the code will immediately attempt to deal with the inputs as integers by x=ZZ(x) and makes no attempt to convert them back into the original ring.
+On input `binomial(x, y)`, what Sage should do instead is the following:
+* If the parent of y is Zmod(n) rather than ZZ, a `ValueError` should be raised.
+* If factorial(y) is zero or a zero-divisor in the parent of x, a `ZeroDivisionError` should be raised. This is automatic if one computes binomial(x, y) simply as
+
+  ```
+  x.parent(prod([x-k for k in range(y)]) / factorial(y))
+  ```
``````




---

archive/issue_comments_133382.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nOops, I never got around to looking at the mathematics while reviewing your rest-formatting before. The problem is that binomial(x, y) is in general not defined for x and y integers modulo n. I'll update the ticket description appropriately.\n\nAllowing y to be anything other than an integer makes no sense to me. What would the definition be? In any case, the output has to be in the ring containing x, and will definitely depend on the exact integer y, and not just on y modulo any n. For example:\n\n```\nsage: binomial(5,-2) # bionomial(5, Zmod(2)(0)) = ???\n0\nsage: binomial(5,0)\n1\nsage: binomial(5,2)\n10\nsage: binomial(5,4) \n5\nsage: binomial(5,6)\n0\n```\nSummary: if y is an element of Zmod(n), then surely a `ValueError` must be raised.\n\nThe situation when x is an element of Zmod(n) is more complicated, but cannot be always automatically allowed:\n\n```\nsage: binomial(1, 3) % 3 # binomial(Zmod(3)(1), 3) = ???\n0\nsage: binomial(4, 3) % 3\n1\nsage: binomial(7, 3) % 3\n2\n```\nSo the correct answer to `binomial(Zmod(3)(1), 3)` is \"any integer modulo 3\". Just returning Zmod(3)(0) is wrong. It would be ok to raise an error, I'd say `ZeroDivisionError`, because of the following completely general formula:\n\n```\nsage: binomial(x, 3)\n1/6*x^3 - 1/2*x^2 + 1/3*x\n```\n\nThere are of course some cases that we can still allow. Suppose the input is `binomial(Zmod(n)(x), y)`.\n\n* If n is coprime to factorial(y), then all divisions are allowed, so the output should again be a well-defined element of Zmod(n). This is what happens with the code `x.parent()(prod([x-k for k in range(y)]) / factorial(y))` from the ticket description.\n* In general, we could allow the output be an element of Zmod(n / gcd(factorial(y), n)) instead of Zmod(n). This would mean no `ZeroDivisionError`s are raised, but Zmod(1)(0) is returned instead. This makes sense in the theory and practice of p-adic power series and formal groups, but may not be what the user expects, so I left this out of the new ticket description.",
    "created_at": "2013-02-04T12:51:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12179#issuecomment-133382",
    "user": "https://github.com/mstreng"
}
```

<a id='comment:13'>Comment 13:</a>
Oops, I never got around to looking at the mathematics while reviewing your rest-formatting before. The problem is that binomial(x, y) is in general not defined for x and y integers modulo n. I'll update the ticket description appropriately.

Allowing y to be anything other than an integer makes no sense to me. What would the definition be? In any case, the output has to be in the ring containing x, and will definitely depend on the exact integer y, and not just on y modulo any n. For example:

```
sage: binomial(5,-2) # bionomial(5, Zmod(2)(0)) = ???
0
sage: binomial(5,0)
1
sage: binomial(5,2)
10
sage: binomial(5,4) 
5
sage: binomial(5,6)
0
```
Summary: if y is an element of Zmod(n), then surely a `ValueError` must be raised.

The situation when x is an element of Zmod(n) is more complicated, but cannot be always automatically allowed:

```
sage: binomial(1, 3) % 3 # binomial(Zmod(3)(1), 3) = ???
0
sage: binomial(4, 3) % 3
1
sage: binomial(7, 3) % 3
2
```
So the correct answer to `binomial(Zmod(3)(1), 3)` is "any integer modulo 3". Just returning Zmod(3)(0) is wrong. It would be ok to raise an error, I'd say `ZeroDivisionError`, because of the following completely general formula:

```
sage: binomial(x, 3)
1/6*x^3 - 1/2*x^2 + 1/3*x
```

There are of course some cases that we can still allow. Suppose the input is `binomial(Zmod(n)(x), y)`.

* If n is coprime to factorial(y), then all divisions are allowed, so the output should again be a well-defined element of Zmod(n). This is what happens with the code `x.parent()(prod([x-k for k in range(y)]) / factorial(y))` from the ticket description.
* In general, we could allow the output be an element of Zmod(n / gcd(factorial(y), n)) instead of Zmod(n). This would mean no `ZeroDivisionError`s are raised, but Zmod(1)(0) is returned instead. This makes sense in the theory and practice of p-adic power series and formal groups, but may not be what the user expects, so I left this out of the new ticket description.



---

archive/issue_events_146114.json:
```json
{
    "actor": "https://github.com/mstreng",
    "created_at": "2013-02-04T12:51:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12179#event-146114"
}
```



---

archive/issue_events_146115.json:
```json
{
    "actor": "https://github.com/mstreng",
    "created_at": "2013-02-04T12:51:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12179#event-146115"
}
```



---

archive/issue_comments_133383.json:
```json
{
    "body": "Changed work issues from **rebase on top of #11417, reST formatting issue, improve efficiency** to none",
    "created_at": "2013-02-04T12:51:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12179#issuecomment-133383",
    "user": "https://github.com/mstreng"
}
```

Changed work issues from **rebase on top of #11417, reST formatting issue, improve efficiency** to none



---

archive/issue_comments_133384.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nReplying to [@mstreng](#comment%3A13):\n> Summary: if y is an element of Zmod(n), then surely a `ValueError` must be raised.\n\nno, wait, I meant `TypeError`",
    "created_at": "2013-02-04T12:55:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12179#issuecomment-133384",
    "user": "https://github.com/mstreng"
}
```

<a id='comment:14'>Comment 14:</a>
Replying to [@mstreng](#comment%3A13):
> Summary: if y is an element of Zmod(n), then surely a `ValueError` must be raised.

no, wait, I meant `TypeError`



---

archive/issue_comments_133385.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -19,7 +19,7 @@\n ```\n \n On input `binomial(x, y)`, what Sage should do instead is the following:\n-* If the parent of y is Zmod(n) rather than ZZ, a `ValueError` should be raised.\n+* If the parent of y is Zmod(n) rather than ZZ, a `TypeError` should be raised.\n * If factorial(y) is zero or a zero-divisor in the parent of x, a `ZeroDivisionError` should be raised. This is automatic if one computes binomial(x, y) simply as\n \n   ```\n``````\n",
    "created_at": "2013-02-04T12:55:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12179#issuecomment-133385",
    "user": "https://github.com/mstreng"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -19,7 +19,7 @@
 ```
 
 On input `binomial(x, y)`, what Sage should do instead is the following:
-* If the parent of y is Zmod(n) rather than ZZ, a `ValueError` should be raised.
+* If the parent of y is Zmod(n) rather than ZZ, a `TypeError` should be raised.
 * If factorial(y) is zero or a zero-divisor in the parent of x, a `ZeroDivisionError` should be raised. This is automatic if one computes binomial(x, y) simply as
 
   ```
``````




---

archive/issue_comments_133386.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -23,5 +23,5 @@\n * If factorial(y) is zero or a zero-divisor in the parent of x, a `ZeroDivisionError` should be raised. This is automatic if one computes binomial(x, y) simply as\n \n   ```\n-  x.parent(prod([x-k for k in range(y)]) / factorial(y))\n+  x.parent()(prod([x-k for k in range(y)]) / factorial(y))\n   ```\n``````\n",
    "created_at": "2013-02-04T13:00:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12179#issuecomment-133386",
    "user": "https://github.com/mstreng"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -23,5 +23,5 @@
 * If factorial(y) is zero or a zero-divisor in the parent of x, a `ZeroDivisionError` should be raised. This is automatic if one computes binomial(x, y) simply as
 
   ```
-  x.parent(prod([x-k for k in range(y)]) / factorial(y))
+  x.parent()(prod([x-k for k in range(y)]) / factorial(y))
   ```
``````




---

archive/issue_comments_133387.json:
```json
{
    "body": "Changed dependencies from **#11417** to none",
    "created_at": "2013-07-25T14:34:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12179#issuecomment-133387",
    "user": "https://github.com/mstreng"
}
```

Changed dependencies from **#11417** to none



---

archive/issue_comments_133388.json:
```json
{
    "body": "Changed author from **Sam Scott** to **Sam Scott, Marco Streng**",
    "created_at": "2013-07-25T14:34:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12179#issuecomment-133388",
    "user": "https://github.com/mstreng"
}
```

Changed author from **Sam Scott** to **Sam Scott, Marco Streng**



---

archive/issue_comments_133389.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -25,3 +25,7 @@\n   ```\n   x.parent()(prod([x-k for k in range(y)]) / factorial(y))\n   ```\n+\n+Apply:\n+\n+* [attachment: 12179_new.patch.gz](https://github.com/sagemath/sage/files/ticket12179/12179_new.patch.gz)\n``````\n",
    "created_at": "2013-07-25T14:34:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12179#issuecomment-133389",
    "user": "https://github.com/mstreng"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -25,3 +25,7 @@
   ```
   x.parent()(prod([x-k for k in range(y)]) / factorial(y))
   ```
+
+Apply:
+
+* [attachment: 12179_new.patch.gz](https://github.com/sagemath/sage/files/ticket12179/12179_new.patch.gz)
``````




---

archive/issue_comments_133390.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\napply only 12179_new.patch",
    "created_at": "2013-07-25T14:34:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12179#issuecomment-133390",
    "user": "https://github.com/mstreng"
}
```

<a id='comment:16'>Comment 16:</a>
apply only 12179_new.patch



---

archive/issue_comments_133391.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nAttachment: **[12179_new.patch.gz](https://github.com/sagemath/sage/files/ticket12179/12179_new.patch.gz)**\n\nNew version, but it screws up lots of symbolic things. Perhaps a few special cases, like binomial(n, n) always returning 1, will fix this. I'm done with this for now.",
    "created_at": "2013-07-25T16:12:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12179#issuecomment-133391",
    "user": "https://github.com/mstreng"
}
```

<a id='comment:17'>Comment 17:</a>
Attachment: **[12179_new.patch.gz](https://github.com/sagemath/sage/files/ticket12179/12179_new.patch.gz)**

New version, but it screws up lots of symbolic things. Perhaps a few special cases, like binomial(n, n) always returning 1, will fix this. I'm done with this for now.



---

archive/issue_events_146116.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12179#event-146116"
}
```



---

archive/issue_events_146117.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12179#event-146117"
}
```



---

archive/issue_events_146118.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12179#event-146118"
}
```



---

archive/issue_events_146119.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12179#event-146119"
}
```



---

archive/issue_events_146120.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12179#event-146120"
}
```



---

archive/issue_events_146121.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12179#event-146121"
}
```



---

archive/issue_events_146122.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12179#event-146122"
}
```



---

archive/issue_events_146123.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12179#event-146123"
}
```



---

archive/issue_comments_133392.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nReplying to [@mstreng](#comment%3A13):\n> So the correct answer to `binomial(Zmod(3)(1), 3)` is \"any integer modulo 3\". Just returning Zmod(3)(0) is wrong. It would be ok to raise an error, I'd say `ZeroDivisionError`\n\nPari does this too.\n> There are of course some cases that we can still allow. Suppose the input is `binomial(Zmod(n)(x), y)`.\n\nExample with Pari:\n\n```\n? binomial(Mod(7,11),3)\n%3 = Mod(2, 11)\n```",
    "created_at": "2014-08-11T16:00:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12179#issuecomment-133392",
    "user": "https://github.com/rwst"
}
```

<a id='comment:22'>Comment 22:</a>
Replying to [@mstreng](#comment%3A13):
> So the correct answer to `binomial(Zmod(3)(1), 3)` is "any integer modulo 3". Just returning Zmod(3)(0) is wrong. It would be ok to raise an error, I'd say `ZeroDivisionError`

Pari does this too.
> There are of course some cases that we can still allow. Suppose the input is `binomial(Zmod(n)(x), y)`.

Example with Pari:

```
? binomial(Mod(7,11),3)
%3 = Mod(2, 11)
```



---

archive/issue_comments_133393.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nHello,\n\nI just discover this ticket. During a cleanup in `sage.rings.arith` (#17852) I took care of this case. I propose to close this one as duplicate. With the branch applied we got\n\n```\nsage: from sage.rings.arith import binomial\nsage: R = Integers(6)\nsage: binomial(R(5), R(2))\nTraceback (most recent call last):\n...\nZeroDivisionError: Inverse does not exist.\nsage: R = Integers(21)\nsage: binomial(R(5), R(2))\n10\nsage: binomial(R(5), R(2)).parent()\nRing of integers modulo 21\n```\n\nVincent",
    "created_at": "2015-03-15T13:51:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12179#issuecomment-133393",
    "user": "https://github.com/videlec"
}
```

<a id='comment:23'>Comment 23:</a>
Hello,

I just discover this ticket. During a cleanup in `sage.rings.arith` (#17852) I took care of this case. I propose to close this one as duplicate. With the branch applied we got

```
sage: from sage.rings.arith import binomial
sage: R = Integers(6)
sage: binomial(R(5), R(2))
Traceback (most recent call last):
...
ZeroDivisionError: Inverse does not exist.
sage: R = Integers(21)
sage: binomial(R(5), R(2))
10
sage: binomial(R(5), R(2)).parent()
Ring of integers modulo 21
```

Vincent



---

archive/issue_events_146124.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-03-15T13:51:26Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12179#event-146124"
}
```



---

archive/issue_events_146125.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-03-15T13:51:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12179#event-146125"
}
```



---

archive/issue_events_146126.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-03-15T13:51:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12179#event-146126"
}
```



---

archive/issue_events_146127.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-03-15T13:51:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12179#event-146127"
}
```



---

archive/issue_events_146128.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-03-15T13:51:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12179#event-146128"
}
```



---

archive/issue_events_146129.json:
```json
{
    "actor": "https://github.com/mstreng",
    "created_at": "2015-03-16T11:15:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12179#event-146129"
}
```



---

archive/issue_events_146130.json:
```json
{
    "actor": "https://github.com/mstreng",
    "created_at": "2015-03-16T11:15:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12179#event-146130"
}
```



---

archive/issue_comments_133394.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -20,11 +20,12 @@\n \n On input `binomial(x, y)`, what Sage should do instead is the following:\n * If the parent of y is Zmod(n) rather than ZZ, a `TypeError` should be raised.\n-* If factorial(y) is zero or a zero-divisor in the parent of x, a `ZeroDivisionError` should be raised. This is automatic if one computes binomial(x, y) simply as\n+* (This seems to be fixed by #17852) If factorial(y) is zero or a zero-divisor in the parent of x, a `ZeroDivisionError` should be raised. This is automatic if one computes binomial(x, y) simply as\n \n   ```\n   x.parent()(prod([x-k for k in range(y)]) / factorial(y))\n   ```\n+   \n \n Apply:\n \n``````\n",
    "created_at": "2015-03-16T11:15:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12179#issuecomment-133394",
    "user": "https://github.com/mstreng"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -20,11 +20,12 @@
 
 On input `binomial(x, y)`, what Sage should do instead is the following:
 * If the parent of y is Zmod(n) rather than ZZ, a `TypeError` should be raised.
-* If factorial(y) is zero or a zero-divisor in the parent of x, a `ZeroDivisionError` should be raised. This is automatic if one computes binomial(x, y) simply as
+* (This seems to be fixed by #17852) If factorial(y) is zero or a zero-divisor in the parent of x, a `ZeroDivisionError` should be raised. This is automatic if one computes binomial(x, y) simply as
 
   ```
   x.parent()(prod([x-k for k in range(y)]) / factorial(y))
   ```
+   
 
 Apply:
 
``````




---

archive/issue_events_146131.json:
```json
{
    "actor": "https://github.com/mstreng",
    "created_at": "2015-03-16T11:15:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12179#event-146131"
}
```



---

archive/issue_comments_133395.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nReplying to [@videlec](#comment%3A23):\n> sage: R = Integers(21)\n> sage: binomial(R(5), R(2))\n> 10\n\nThis should be `TypeError`, because `binomial(x,y)` makes no sense when y is an element of `R`. It only makes sense when y is an integer. For example, binomial(5, 2) = 10, but binomial(5, 2+21) = 0.\n\nSo of the two points in the ticket description, the work in #17852 fixes the second one, but the first one is still open.",
    "created_at": "2015-03-16T11:15:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12179#issuecomment-133395",
    "user": "https://github.com/mstreng"
}
```

<a id='comment:24'>Comment 24:</a>
Replying to [@videlec](#comment%3A23):
> sage: R = Integers(21)
> sage: binomial(R(5), R(2))
> 10

This should be `TypeError`, because `binomial(x,y)` makes no sense when y is an element of `R`. It only makes sense when y is an integer. For example, binomial(5, 2) = 10, but binomial(5, 2+21) = 0.

So of the two points in the ticket description, the work in #17852 fixes the second one, but the first one is still open.



---

archive/issue_comments_133396.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nReplying to [@mstreng](#comment%3A24):\n> Replying to [@videlec](#comment%3A23):\n> > sage: R = Integers(21)\n> > sage: binomial(R(5), R(2))\n> > 10\n\n> \n> This should be `TypeError`, because `binomial(x,y)` makes no sense when y is an element of `R`. It only makes sense when y is an integer. For example, binomial(5, 2) = 10, but binomial(5, 2+21) = 0.\n> \n> So of the two points in the ticket description, the work in #17852 fixes the second one, but the first one is still open.\n\nRight!",
    "created_at": "2015-03-16T12:35:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12179#issuecomment-133396",
    "user": "https://github.com/videlec"
}
```

<a id='comment:25'>Comment 25:</a>
Replying to [@mstreng](#comment%3A24):
> Replying to [@videlec](#comment%3A23):
> > sage: R = Integers(21)
> > sage: binomial(R(5), R(2))
> > 10

> 
> This should be `TypeError`, because `binomial(x,y)` makes no sense when y is an element of `R`. It only makes sense when y is an integer. For example, binomial(5, 2) = 10, but binomial(5, 2+21) = 0.
> 
> So of the two points in the ticket description, the work in #17852 fixes the second one, but the first one is still open.

Right!



---

archive/issue_comments_133397.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nHi,\n\nTicket #17852 is in pass to be positively reviewed. Let me summarize what will change when calling `rings.arith.binomial(x,y)`:\n- `y` must be an integer (actually, I only asked that `ZZ(y)` does work and the first lines of code do `y = ZZ(y)`)\n- the output type is always the type of `x`\n- if `factorial(y)` is not invertible a `ZeroDivisionError` is raised (I checked the behavior on many finite rings that I was able to think of)\n\nVincent",
    "created_at": "2015-03-21T23:21:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12179#issuecomment-133397",
    "user": "https://github.com/videlec"
}
```

<a id='comment:26'>Comment 26:</a>
Hi,

Ticket #17852 is in pass to be positively reviewed. Let me summarize what will change when calling `rings.arith.binomial(x,y)`:
- `y` must be an integer (actually, I only asked that `ZZ(y)` does work and the first lines of code do `y = ZZ(y)`)
- the output type is always the type of `x`
- if `factorial(y)` is not invertible a `ZeroDivisionError` is raised (I checked the behavior on many finite rings that I was able to think of)

Vincent



---

archive/issue_comments_133398.json:
```json
{
    "body": "Stopgaps: **todo**",
    "created_at": "2015-08-25T16:33:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12179#issuecomment-133398",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

Stopgaps: **todo**



---

archive/issue_events_146132.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-29T01:28:25Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12179",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12179#event-146132"
}
```
