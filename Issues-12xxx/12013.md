# Issue 12013: Fix entropy function in devel/sage/sage/coding

archive/issues_011841.json:
```json
{
    "body": "The entropy function doesn't take care of corner cases when it is evaluated at 0 and 1, and neither does it check whether the range is within 0 and 1.\n\nAttached patched passes all tests in devel/sage/sage/coding\n\nAssignee: @wdjoyner\n\nCC:  @wdjoyner @kini jpang\n\nKeywords: entropy coding theory\n\nResolution: fixed\n\nAuthor: Punarbasu Purkayastha\n\nReviewer: Daniel Krenn\n\nMerged: sage-5.0.beta7\n\nIssue created by migration from https://trac.sagemath.org/ticket/12013\n\n",
    "closed_at": "2012-03-04T21:19:17Z",
    "created_at": "2011-11-12T07:39:30Z",
    "labels": [
        "component: coding theory",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.0",
    "title": "Fix entropy function in devel/sage/sage/coding",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12013",
    "user": "https://github.com/ppurka"
}
```
The entropy function doesn't take care of corner cases when it is evaluated at 0 and 1, and neither does it check whether the range is within 0 and 1.

Attached patched passes all tests in devel/sage/sage/coding

Assignee: @wdjoyner

CC:  @wdjoyner @kini jpang

Keywords: entropy coding theory

Resolution: fixed

Author: Punarbasu Purkayastha

Reviewer: Daniel Krenn

Merged: sage-5.0.beta7

Issue created by migration from https://trac.sagemath.org/ticket/12013





---

archive/issue_comments_166144.json:
```json
{
    "body": "Changing priority from major to minor.",
    "created_at": "2011-11-12T07:44:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12013#issuecomment-166144",
    "user": "https://github.com/ppurka"
}
```

Changing priority from major to minor.



---

archive/issue_comments_166145.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-01-22T16:17:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12013#issuecomment-166145",
    "user": "https://github.com/ppurka"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_166146.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-02-28T18:09:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12013#issuecomment-166146",
    "user": "https://github.com/dkrenn"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_166147.json:
```json
{
    "body": "<a id='comment:5'></a>\nThere should be a doctest for the inputs `x=0` and `x=1`. \n\nMaybe the message of \n\n```\nraise ValueError(\"The entropy function is undefined for values not between 0 and 1\") \n```\nshould be more precise (since there is more than one input parameter), e.g. something like \n\n```\n\"The value x (x = %s) must be between 0 and 1.\" % x\n```\nCan you also improve the documentation by describing the input parameters `x` and `q` and add one or two examples?\n\nI'm not sure, whether it should also be checked that `q` is positive.",
    "created_at": "2012-02-28T18:09:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12013#issuecomment-166147",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:5'></a>
There should be a doctest for the inputs `x=0` and `x=1`. 

Maybe the message of 

```
raise ValueError("The entropy function is undefined for values not between 0 and 1") 
```
should be more precise (since there is more than one input parameter), e.g. something like 

```
"The value x (x = %s) must be between 0 and 1." % x
```
Can you also improve the documentation by describing the input parameters `x` and `q` and add one or two examples?

I'm not sure, whether it should also be checked that `q` is positive.



---

archive/issue_comments_166148.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Daniel Krenn\"",
    "created_at": "2012-02-28T18:10:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12013#issuecomment-166148",
    "user": "https://github.com/dkrenn"
}
```

Changing reviewer from "" to "Daniel Krenn"



---

archive/issue_comments_166149.json:
```json
{
    "body": "<a id='comment:7'></a>\nThanks for your comments. Updated the patch.",
    "created_at": "2012-02-29T13:51:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12013#issuecomment-166149",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:7'></a>
Thanks for your comments. Updated the patch.



---

archive/issue_comments_166150.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-02-29T13:51:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12013#issuecomment-166150",
    "user": "https://github.com/ppurka"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_166151.json:
```json
{
    "body": "<a id='comment:8'></a>\nLooks much better now. It would be nice to follow the [conventions](http://www.sagemath.org/doc/developer/conventions.html) (somewhere in the middle there is an example `def point...` (...template when documenting functions)). E.g. use ``` and ```` at the places where variables or formulas (interval) are.\n\nFurther I suggest to put `sage: entropy(1.1, 2)` and `sage: entropy(1, 1)` under a separate section `TESTS::`, since to me it seems more like a test than an example showing some functionality.\n\nMaybe you can also add the following example (change the values if you want others) to `EXAMPLES`:\n\n```\nsage: entropy(1/5,4)\n-1/5*log(1/5)/log(4) - 4/5*log(4/5)/log(4) + 1/5*log(3)/log(4)\n```\nso that we have an example (with values that are not a special case).",
    "created_at": "2012-03-02T09:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12013#issuecomment-166151",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:8'></a>
Looks much better now. It would be nice to follow the [conventions](http://www.sagemath.org/doc/developer/conventions.html) (somewhere in the middle there is an example `def point...` (...template when documenting functions)). E.g. use ``` and ```` at the places where variables or formulas (interval) are.

Further I suggest to put `sage: entropy(1.1, 2)` and `sage: entropy(1, 1)` under a separate section `TESTS::`, since to me it seems more like a test than an example showing some functionality.

Maybe you can also add the following example (change the values if you want others) to `EXAMPLES`:

```
sage: entropy(1/5,4)
-1/5*log(1/5)/log(4) - 4/5*log(4/5)/log(4) + 1/5*log(3)/log(4)
```
so that we have an example (with values that are not a special case).



---

archive/issue_comments_166152.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-03-02T09:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12013#issuecomment-166152",
    "user": "https://github.com/dkrenn"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_166153.json:
```json
{
    "body": "apply to devel/sage",
    "created_at": "2012-03-02T10:16:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12013#issuecomment-166153",
    "user": "https://github.com/ppurka"
}
```

apply to devel/sage



---

archive/issue_comments_166154.json:
```json
{
    "body": "<a id='comment:9'></a>\nAttachment [trac_12013-fix_entropy.patch](tarball://root/attachments/some-uuid/ticket12013/trac_12013-fix_entropy.patch) by @ppurka created at 2012-03-02 10:17:47\n\nUpdated it again! Didn't know that I was so inconsistent. :)",
    "created_at": "2012-03-02T10:17:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12013#issuecomment-166154",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:9'></a>
Attachment [trac_12013-fix_entropy.patch](tarball://root/attachments/some-uuid/ticket12013/trac_12013-fix_entropy.patch) by @ppurka created at 2012-03-02 10:17:47

Updated it again! Didn't know that I was so inconsistent. :)



---

archive/issue_comments_166155.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-03-02T10:17:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12013#issuecomment-166155",
    "user": "https://github.com/ppurka"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_166156.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-03-02T12:07:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12013#issuecomment-166156",
    "user": "https://github.com/dkrenn"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_166157.json:
```json
{
    "body": "Changing author from \"\" to \"Punarbasu Purkayastha\"",
    "created_at": "2012-03-02T12:07:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12013#issuecomment-166157",
    "user": "https://github.com/dkrenn"
}
```

Changing author from "" to "Punarbasu Purkayastha"



---

archive/issue_comments_166158.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-03-04T21:19:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12013#issuecomment-166158",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_166159.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-5.0.beta7\"",
    "created_at": "2012-03-04T21:19:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12013#issuecomment-166159",
    "user": "https://github.com/jdemeyer"
}
```

Changing merged from "" to "sage-5.0.beta7"



---

archive/issue_events_031860.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-03-04T21:19:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12013",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12013#event-31860"
}
```
