# Issue 12407: Add the set of PrimitiveGroups

archive/issues_012235.json:
```json
{
    "body": "This patch implements the finite enumerated set of primitive permutation groups of a given degree, and the infinite enumerated set of all primitive permutation groups. It is based on the work done in #8500 for transitive permutation groups.\n\nThis allows a user to do:\n\n```\nsage: PrimitiveGroups(4).cardinality()\n\nsage: for G in PrimitiveGroups(i):\n...       any_test(G)  # any test over all primitive groups of a given degree\n\nsage: for G in PrimitiveGroups():\n...       other_test(G) # test over all primitive groups\n```\nThis requires the optional database_gap which contains all the primitive permutation groups of degree <= 2499. Therefore, in practice, the enumeration stops with a NonImplementedError? \n\n**Apply** [attachment:trac_12407_primitive_permutation_groups.patch], [attachment:trac_12407_review.patch], [attachment:trac_12407_fix_testcases.patch]\n\nAssignee: joyner\n\nKeywords: primitive groups\n\nReviewer: Vincent Delecroix, Volker Braun\n\nAuthor: Thomas Rehn\n\nMerged: sage-5.6.beta1\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/12407\n\n",
    "closed_at": "2012-12-21T09:31:13Z",
    "created_at": "2012-02-01T10:28:25Z",
    "labels": [
        "component: group theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.6",
    "title": "Add the set of PrimitiveGroups",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12407",
    "user": "https://trac.sagemath.org/admin/accounts/users/trehn"
}
```
This patch implements the finite enumerated set of primitive permutation groups of a given degree, and the infinite enumerated set of all primitive permutation groups. It is based on the work done in #8500 for transitive permutation groups.

This allows a user to do:

```
sage: PrimitiveGroups(4).cardinality()

sage: for G in PrimitiveGroups(i):
...       any_test(G)  # any test over all primitive groups of a given degree

sage: for G in PrimitiveGroups():
...       other_test(G) # test over all primitive groups
```
This requires the optional database_gap which contains all the primitive permutation groups of degree <= 2499. Therefore, in practice, the enumeration stops with a NonImplementedError? 

**Apply** [attachment:trac_12407_primitive_permutation_groups.patch], [attachment:trac_12407_review.patch], [attachment:trac_12407_fix_testcases.patch]

Assignee: joyner

Keywords: primitive groups

Reviewer: Vincent Delecroix, Volker Braun

Author: Thomas Rehn

Merged: sage-5.6.beta1

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/12407





---

archive/issue_comments_176068.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-02-01T10:32:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12407#issuecomment-176068",
    "user": "https://trac.sagemath.org/admin/accounts/users/trehn"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_176069.json:
```json
{
    "body": "Changing reviewer from \"\" to \"vdelecroix\"",
    "created_at": "2012-03-24T00:50:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12407#issuecomment-176069",
    "user": "https://github.com/videlec"
}
```

Changing reviewer from "" to "vdelecroix"



---

archive/issue_comments_176070.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-03-24T00:50:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12407#issuecomment-176070",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_176071.json:
```json
{
    "body": "<a id='comment:2'></a>Hi,\n\nNice patch (I will need it ;-)).\n\n0) The primitive groups are up to isomorphism which is not mentioned in the documentation!\n\n1) Why do you use a specific class PrimitiveGroup? The simpler\n\n```\nsage: PermutationGroup(gap_group = gap.PrimitiveGroup(7,3))\nPermutation Group with generators [(2,4,6)(3,5,7), (1,2,4,3,6,7,5)]\n```\nseems more natural to me. The only modifications I see in your new class are the inheritance from UniqueRepresentation and the method _repr_ (see also remark 3 below) and the inheritance from UniqueRepresentation.\n\n2) To be complient with GAP you decide to start numerotation from 1 which, from my point of view, is better. However, there can be some confusion with Python convention of starting list from 0. In particular the following behavior may appear strange:\n\n```\nsage: P=PrimitiveGroups(4)\nsage: p=P[2]\nsage: p\nPrimitive group number 2 of degree 4\nsage: P.rank(p)\n1\nsage: P.unrank(1)     \nPrimitive group number 2 of degree 4\n```\nCould you make it explicit in the documentation?\n\n3) The names provided by GAP are by far more useful than \"Primitive group number x of degree y\":\n\n```\nsage: gap.PrimitiveGroup(3,2)\nS(3)\nsage: gap.PrimitiveGroup(5,2)\nD(2*5)\nsage: gap.PrimitiveGroup(10,3)\nPSL(2, 9)\n```\nWhat do you think?\n\n4) Moreover, GAP provides a very nice function to identify groups in the database\n\n```\nsage: P=PermutationGroup(('(4,5)(6,7)(8,9)(11,12)', '(1,2,3,4,6,8,10,5,7,11,9)'))\nsage: P\nPermutation Group with generators [(4,5)(6,7)(8,9)(11,12), (1,2,3,4,6,8,10,5,7,11,9)]\nsage: gap.PrimitiveIdentification(P)\n2\nsage: gap.PrimitiveGroup(12, 2)\nM(12)\n```\nCould you implement it as a method of PermutationGroup? For sure, if you decide to keep the class PrimitiveGroup the method should be overwritten. Notice that the method .group_id() and aliased as .id() of PermutationGroup returns the index of G in the database of all permutation groups. The method for primitive groups could hence be named group_id_primtive() aliased as .id_primitive().",
    "created_at": "2012-03-24T00:50:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12407#issuecomment-176071",
    "user": "https://github.com/videlec"
}
```

<a id='comment:2'></a>Hi,

Nice patch (I will need it ;-)).

0) The primitive groups are up to isomorphism which is not mentioned in the documentation!

1) Why do you use a specific class PrimitiveGroup? The simpler

```
sage: PermutationGroup(gap_group = gap.PrimitiveGroup(7,3))
Permutation Group with generators [(2,4,6)(3,5,7), (1,2,4,3,6,7,5)]
```
seems more natural to me. The only modifications I see in your new class are the inheritance from UniqueRepresentation and the method _repr_ (see also remark 3 below) and the inheritance from UniqueRepresentation.

2) To be complient with GAP you decide to start numerotation from 1 which, from my point of view, is better. However, there can be some confusion with Python convention of starting list from 0. In particular the following behavior may appear strange:

```
sage: P=PrimitiveGroups(4)
sage: p=P[2]
sage: p
Primitive group number 2 of degree 4
sage: P.rank(p)
1
sage: P.unrank(1)     
Primitive group number 2 of degree 4
```
Could you make it explicit in the documentation?

3) The names provided by GAP are by far more useful than "Primitive group number x of degree y":

```
sage: gap.PrimitiveGroup(3,2)
S(3)
sage: gap.PrimitiveGroup(5,2)
D(2*5)
sage: gap.PrimitiveGroup(10,3)
PSL(2, 9)
```
What do you think?

4) Moreover, GAP provides a very nice function to identify groups in the database

```
sage: P=PermutationGroup(('(4,5)(6,7)(8,9)(11,12)', '(1,2,3,4,6,8,10,5,7,11,9)'))
sage: P
Permutation Group with generators [(4,5)(6,7)(8,9)(11,12), (1,2,3,4,6,8,10,5,7,11,9)]
sage: gap.PrimitiveIdentification(P)
2
sage: gap.PrimitiveGroup(12, 2)
M(12)
```
Could you implement it as a method of PermutationGroup? For sure, if you decide to keep the class PrimitiveGroup the method should be overwritten. Notice that the method .group_id() and aliased as .id() of PermutationGroup returns the index of G in the database of all permutation groups. The method for primitive groups could hence be named group_id_primtive() aliased as .id_primitive().



---

archive/issue_comments_176072.json:
```json
{
    "body": "<a id='comment:3'></a>Thank you very much for your feedback. I think I can improve these issues.\n\nFor consistency I probably would also have to change the TransitiveGroups code, which I took as a basis for copy-and-paste.",
    "created_at": "2012-04-02T17:11:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12407#issuecomment-176072",
    "user": "https://trac.sagemath.org/admin/accounts/users/trehn"
}
```

<a id='comment:3'></a>Thank you very much for your feedback. I think I can improve these issues.

For consistency I probably would also have to change the TransitiveGroups code, which I took as a basis for copy-and-paste.



---

archive/issue_comments_176073.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-04-05T09:28:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12407#issuecomment-176073",
    "user": "https://trac.sagemath.org/admin/accounts/users/trehn"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_176074.json:
```json
{
    "body": "<a id='comment:4'></a>I decided to keep the PrimitiveGroup class because it is a convenient way to get a specific primitive group. Moreover, I updated the documentation and included the \"GAP name\" into _repr_. Now there also is a 'primitive_id()' method of PermutationGroup.",
    "created_at": "2012-04-05T09:28:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12407#issuecomment-176074",
    "user": "https://trac.sagemath.org/admin/accounts/users/trehn"
}
```

<a id='comment:4'></a>I decided to keep the PrimitiveGroup class because it is a convenient way to get a specific primitive group. Moreover, I updated the documentation and included the "GAP name" into _repr_. Now there also is a 'primitive_id()' method of PermutationGroup.



---

archive/issue_comments_176075.json:
```json
{
    "body": "<a id='comment:5'></a>Hello,\n\n0) There are trailing whitespaces in your file (spaces at the end of the lines) that should be removed. All EXAMPLES statements should end with '::' and a whiteline. Otherwise the examples are not well compiled in the documentation. You put only one ':' at two places (line 1288, 1296). At many places in the file permgroup_named this is the case... I asked a question about this on sage-devel (http://groups.google.com/group/sage-devel/browse_thread/thread/110e8595c86a62b)\n\n1) At the very begining of the file permgroup_named.py there is a list of all available groups. You should add yours.\n\n2) In my previous remark 4), I claim that you should remove the very long \"number x of degree y\" as its mathematical content is irrelevant. As you can see the following list is ugly\n\n```\nsage: PrimitiveGroups(5).list()\n[C(5), primitive group number 1 of degree 5, D(2*5), primitive group number 2 of degree 5, AGL(1, 5), primitive group number 3 of degree 5, A(5), primitive group number 4 of degree 5, S(5), primitive group number 5 of degree 5]\n```\nwhereas calling gap directly we get the nicer\n\n```\nsage: [gap.PrimitiveGroup(5,i) for i in xrange(1,6)]\n[C(5), D(2*5), AGL(1, 5), A(5), S(5)]\n```\n\n3) My previous remark 2) about naming convention is more dedicated for the documentation of PrimitiveGroups, PrimitiveGroupsAll and PrimitiveGroupsOfDegree than for PrimitiveGroup. As if a Sage user needs it, it would be *before* the group is created!\n\n4) In the examples of PrimitiveGroupsOfDegree, the actual example should be simplified in the following way\n\n```\nsage: S = PrimitiveGroups(5); S       # requires optional database_gap\nPrimitive Groups of degree 5\nsage: S.list()                          # requires optional database_gap\n[Primitive group number 1 of degree 5, Primitive group number 2 of degree 5,\nPrimitive group number 3 of degree 5, Primitive group number 4 of degree 5,\nPrimitive group number 5 of degree 5]\nsage: S.an_element() # requires optional database_gap\nPrimitive group number 1 of degree 5\n```\n\n5) In the method cardinality of PrimitiveGroups you used once ZZ and once Integer. I think that Integer is more dedicated. Could you remove ZZ from the import statement at the begining of the file and replace ZZ by Integer wherever it occurs (3 occurences counting yours).\n\n6) The line 1508 (_an_element_ = EnumeratedSets.ParentMethods._an_element_) makes no sense. The category framework makes automatic import of ParentMethods. You may simply erase it.\n\n7) Your example line 1259 is a bit irrelevant: the string that goes with the assertion error says \"AssertionError: n should be in {1,..,1}\".\n\n8) In relation with my previous remark 4). You write a method group_primitive_id, but in the EXAMPLES I get 2 instead of 4. Moreover, you should complete it as\n\n```\nEXAMPLES::\n\n    sage: G = PermutationGroup([[(1,2,3,4,5)], [(1,5),(2,4)]])\n    sage: G.group_primitive_id()    # optional - database_gap\n    2\n    sage: G.degree()\n    5\n\nFrom the information of the degree and the identification number, \nyou can recover the isomorphism class of your group in the GAP \ndatabase::\n\n    sage: H = PermutationGroup(5,2)  # optional - database_gap\n    sage: G == H                                  # optional - database_gap\n    False\n    sage: G.is_isomorphic(H)                 # optional - database_gap\n    True\n```\n\n9) Could you add a TODO in the documentation of PrimitiveGroups saying that there exists a command PrimitiveGroupsIterator in GAP which accept many arguments (nb. of moved points, size, transitivity, simple group, solvable, ...).\n\noo) Typo:\n- the INPUT documentation of the init method of PrimitiveGroup does not follow the good syntax (PrimitiveGroups.__init__ is OK). You can have a look at section 2.1.5 of the Developer Guide.\n- how did you choose to break or not break lines in the documentation ? It seems to be pretty random.\n- there are some non needed empty lines: at the end of PrimitiveGroups documentation and at the end of PrimitiveGroupsOfDegree documentation.\n- line 1310, you wrote d up to isomorphism twice.\n- Could you smartly write in all your classes that you wrap the GAP database (it is important for the user to see that Sage uses another software).",
    "created_at": "2012-04-29T15:01:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12407#issuecomment-176075",
    "user": "https://github.com/videlec"
}
```

<a id='comment:5'></a>Hello,

0) There are trailing whitespaces in your file (spaces at the end of the lines) that should be removed. All EXAMPLES statements should end with '::' and a whiteline. Otherwise the examples are not well compiled in the documentation. You put only one ':' at two places (line 1288, 1296). At many places in the file permgroup_named this is the case... I asked a question about this on sage-devel (http://groups.google.com/group/sage-devel/browse_thread/thread/110e8595c86a62b)

1) At the very begining of the file permgroup_named.py there is a list of all available groups. You should add yours.

2) In my previous remark 4), I claim that you should remove the very long "number x of degree y" as its mathematical content is irrelevant. As you can see the following list is ugly

```
sage: PrimitiveGroups(5).list()
[C(5), primitive group number 1 of degree 5, D(2*5), primitive group number 2 of degree 5, AGL(1, 5), primitive group number 3 of degree 5, A(5), primitive group number 4 of degree 5, S(5), primitive group number 5 of degree 5]
```
whereas calling gap directly we get the nicer

```
sage: [gap.PrimitiveGroup(5,i) for i in xrange(1,6)]
[C(5), D(2*5), AGL(1, 5), A(5), S(5)]
```

3) My previous remark 2) about naming convention is more dedicated for the documentation of PrimitiveGroups, PrimitiveGroupsAll and PrimitiveGroupsOfDegree than for PrimitiveGroup. As if a Sage user needs it, it would be *before* the group is created!

4) In the examples of PrimitiveGroupsOfDegree, the actual example should be simplified in the following way

```
sage: S = PrimitiveGroups(5); S       # requires optional database_gap
Primitive Groups of degree 5
sage: S.list()                          # requires optional database_gap
[Primitive group number 1 of degree 5, Primitive group number 2 of degree 5,
Primitive group number 3 of degree 5, Primitive group number 4 of degree 5,
Primitive group number 5 of degree 5]
sage: S.an_element() # requires optional database_gap
Primitive group number 1 of degree 5
```

5) In the method cardinality of PrimitiveGroups you used once ZZ and once Integer. I think that Integer is more dedicated. Could you remove ZZ from the import statement at the begining of the file and replace ZZ by Integer wherever it occurs (3 occurences counting yours).

6) The line 1508 (_an_element_ = EnumeratedSets.ParentMethods._an_element_) makes no sense. The category framework makes automatic import of ParentMethods. You may simply erase it.

7) Your example line 1259 is a bit irrelevant: the string that goes with the assertion error says "AssertionError: n should be in {1,..,1}".

8) In relation with my previous remark 4). You write a method group_primitive_id, but in the EXAMPLES I get 2 instead of 4. Moreover, you should complete it as

```
EXAMPLES::

    sage: G = PermutationGroup([[(1,2,3,4,5)], [(1,5),(2,4)]])
    sage: G.group_primitive_id()    # optional - database_gap
    2
    sage: G.degree()
    5

From the information of the degree and the identification number, 
you can recover the isomorphism class of your group in the GAP 
database::

    sage: H = PermutationGroup(5,2)  # optional - database_gap
    sage: G == H                                  # optional - database_gap
    False
    sage: G.is_isomorphic(H)                 # optional - database_gap
    True
```

9) Could you add a TODO in the documentation of PrimitiveGroups saying that there exists a command PrimitiveGroupsIterator in GAP which accept many arguments (nb. of moved points, size, transitivity, simple group, solvable, ...).

oo) Typo:
- the INPUT documentation of the init method of PrimitiveGroup does not follow the good syntax (PrimitiveGroups.__init__ is OK). You can have a look at section 2.1.5 of the Developer Guide.
- how did you choose to break or not break lines in the documentation ? It seems to be pretty random.
- there are some non needed empty lines: at the end of PrimitiveGroups documentation and at the end of PrimitiveGroupsOfDegree documentation.
- line 1310, you wrote d up to isomorphism twice.
- Could you smartly write in all your classes that you wrap the GAP database (it is important for the user to see that Sage uses another software).



---

archive/issue_comments_176076.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-04-29T15:01:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12407#issuecomment-176076",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_176077.json:
```json
{
    "body": "<a id='comment:6'></a>Finally I have found time again to work on your suggestions. I think I could adapt almost everything. \n\nOnly your remark 3) is a bit unclear to me. I think the only place where 1-based ids are confusing is in the constructor of PrimitiveGroup, but there this is explicitly stated in the documentation.\n\n*sage -t -optional permgroup.py* does not work, but the problems are not related to primitive groups.",
    "created_at": "2012-07-06T09:14:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12407#issuecomment-176077",
    "user": "https://trac.sagemath.org/admin/accounts/users/trehn"
}
```

<a id='comment:6'></a>Finally I have found time again to work on your suggestions. I think I could adapt almost everything. 

Only your remark 3) is a bit unclear to me. I think the only place where 1-based ids are confusing is in the constructor of PrimitiveGroup, but there this is explicitly stated in the documentation.

*sage -t -optional permgroup.py* does not work, but the problems are not related to primitive groups.



---

archive/issue_comments_176078.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-08-09T08:41:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12407#issuecomment-176078",
    "user": "https://trac.sagemath.org/admin/accounts/users/trehn"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_176079.json:
```json
{
    "body": "patch, updated for v5.3",
    "created_at": "2012-09-13T15:43:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12407#issuecomment-176079",
    "user": "https://trac.sagemath.org/admin/accounts/users/trehn"
}
```

patch, updated for v5.3



---

archive/issue_comments_176080.json:
```json
{
    "body": "Attachment [trac_12407_review.patch](tarball://root/attachments/some-uuid/ticket12407/trac_12407_review.patch) by @vbraun created at 2012-11-14 03:49:50\n\nInitial patch",
    "created_at": "2012-11-14T03:49:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12407#issuecomment-176080",
    "user": "https://github.com/vbraun"
}
```

Attachment [trac_12407_review.patch](tarball://root/attachments/some-uuid/ticket12407/trac_12407_review.patch) by @vbraun created at 2012-11-14 03:49:50

Initial patch



---

archive/issue_comments_176081.json:
```json
{
    "body": "Changing reviewer from \"vdelecroix\" to \"vdelecroix, Volker Braun\"",
    "created_at": "2012-11-14T03:54:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12407#issuecomment-176081",
    "user": "https://github.com/vbraun"
}
```

Changing reviewer from "vdelecroix" to "vdelecroix, Volker Braun"



---

archive/issue_comments_176082.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -11,7 +11,9 @@\n sage: for G in PrimitiveGroups():\n ...       other_test(G) # test over all primitive groups\n ```\n-This requires the optional database_gap which contains all the primitive permutation groups of degree <= 2499. Therefore, in practice, the enumeration stops with a NonImplementedError?\n+This requires the optional database_gap which contains all the primitive permutation groups of degree <= 2499. Therefore, in practice, the enumeration stops with a NonImplementedError? \n+\n+Apply trac_12407_primitive_permutation_groups.patch, trac_12407_review.patch\n \n Author: Thomas Rehn\n \n``````\n",
    "created_at": "2012-11-14T03:54:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12407#issuecomment-176082",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -11,7 +11,9 @@
 sage: for G in PrimitiveGroups():
 ...       other_test(G) # test over all primitive groups
 ```
-This requires the optional database_gap which contains all the primitive permutation groups of degree <= 2499. Therefore, in practice, the enumeration stops with a NonImplementedError?
+This requires the optional database_gap which contains all the primitive permutation groups of degree <= 2499. Therefore, in practice, the enumeration stops with a NonImplementedError? 
+
+Apply trac_12407_primitive_permutation_groups.patch, trac_12407_review.patch
 
 Author: Thomas Rehn
 
``````




---

archive/issue_comments_176083.json:
```json
{
    "body": "<a id='comment:8'></a>I've added some docstring fixes to follow Sage conventions more closely. E.g. imperative (\"Return\") instead of \"Returns\", indentation, keep line length finite, .... Also I don't think that we really need an alias `primitive_id`, just `group_primitive_id` is IMHO enough.\n\nPlease have a look at the reviewer patch. Positive review from me for everything else.",
    "created_at": "2012-11-14T03:54:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12407#issuecomment-176083",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:8'></a>I've added some docstring fixes to follow Sage conventions more closely. E.g. imperative ("Return") instead of "Returns", indentation, keep line length finite, .... Also I don't think that we really need an alias `primitive_id`, just `group_primitive_id` is IMHO enough.

Please have a look at the reviewer patch. Positive review from me for everything else.



---

archive/issue_comments_176084.json:
```json
{
    "body": "<a id='comment:9'></a>Thank you for the improvements, I am happy with them.",
    "created_at": "2012-11-14T08:31:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12407#issuecomment-176084",
    "user": "https://trac.sagemath.org/admin/accounts/users/trehn"
}
```

<a id='comment:9'></a>Thank you for the improvements, I am happy with them.



---

archive/issue_comments_176085.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-11-14T10:27:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12407#issuecomment-176085",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_176086.json:
```json
{
    "body": "Changing reviewer from \"vdelecroix, Volker Braun\" to \"Vincent Delecroix, Volker Braun\"",
    "created_at": "2012-11-14T16:35:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12407#issuecomment-176086",
    "user": "https://github.com/jdemeyer"
}
```

Changing reviewer from "vdelecroix, Volker Braun" to "Vincent Delecroix, Volker Braun"



---

archive/issue_events_033286.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-14T16:35:05Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12407",
    "milestone": "sage-5.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12407#event-33286"
}
```



---

archive/issue_comments_176087.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-11-15T08:17:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12407#issuecomment-176087",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_176088.json:
```json
{
    "body": "<a id='comment:12'></a>There are various doctest errors:\n\n```\nsage -t  -force_lib devel/sage/sage/groups/perm_gps/permgroup_named.py\n**********************************************************************\nFile \"/release/merger/sage-5.5.beta2/devel/sage-main/sage/groups/perm_gps/permgroup_named.py\", line 1515:\n    sage: PrimitiveGroup(6,5)\nExpected:\n    Traceback (most recent call last):\n    ...\n    AssertionError: n should be in {1,..,4}\nGot:\n    verbose 0 (1813: permgroup_named.py, cardinality) Warning: PrimitiveGroups requires the GAP database package. Please install it with `\n`sage -i database_gap``.\n    [...]\n**********************************************************************\nFile \"/release/merger/sage-5.5.beta2/devel/sage-main/sage/groups/perm_gps/permgroup_named.py\", line 1552:\n    sage: G = PrimitiveGroup(5,1); G\nException raised:\n    [...]\n    AssertionError: n should be in {1,..,None}\n**********************************************************************\nFile \"/release/merger/sage-5.5.beta2/devel/sage-main/sage/groups/perm_gps/permgroup_named.py\", line 1569:\n    sage: G = PrimitiveGroup(5,2); G.group_primitive_id()\nException raised:\n    [...]\n    AssertionError: n should be in {1,..,None}\n**********************************************************************\n```\n\nBesides that, you should not use `assert` for this.  Only use \"assert\" to check for actual bugs, not for bad user input. If there is any way at all to reproduce an `AssertionError` using documented public functions, that is by definition a bug.",
    "created_at": "2012-11-15T08:17:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12407#issuecomment-176088",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>There are various doctest errors:

```
sage -t  -force_lib devel/sage/sage/groups/perm_gps/permgroup_named.py
**********************************************************************
File "/release/merger/sage-5.5.beta2/devel/sage-main/sage/groups/perm_gps/permgroup_named.py", line 1515:
    sage: PrimitiveGroup(6,5)
Expected:
    Traceback (most recent call last):
    ...
    AssertionError: n should be in {1,..,4}
Got:
    verbose 0 (1813: permgroup_named.py, cardinality) Warning: PrimitiveGroups requires the GAP database package. Please install it with `
`sage -i database_gap``.
    [...]
**********************************************************************
File "/release/merger/sage-5.5.beta2/devel/sage-main/sage/groups/perm_gps/permgroup_named.py", line 1552:
    sage: G = PrimitiveGroup(5,1); G
Exception raised:
    [...]
    AssertionError: n should be in {1,..,None}
**********************************************************************
File "/release/merger/sage-5.5.beta2/devel/sage-main/sage/groups/perm_gps/permgroup_named.py", line 1569:
    sage: G = PrimitiveGroup(5,2); G.group_primitive_id()
Exception raised:
    [...]
    AssertionError: n should be in {1,..,None}
**********************************************************************
```

Besides that, you should not use `assert` for this.  Only use "assert" to check for actual bugs, not for bad user input. If there is any way at all to reproduce an `AssertionError` using documented public functions, that is by definition a bug.



---

archive/issue_comments_176089.json:
```json
{
    "body": "<a id='comment:13'></a>I think this happens only if database_gap is not installed. I will look at this.",
    "created_at": "2012-11-15T15:31:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12407#issuecomment-176089",
    "user": "https://trac.sagemath.org/admin/accounts/users/trehn"
}
```

<a id='comment:13'></a>I think this happens only if database_gap is not installed. I will look at this.



---

archive/issue_comments_176090.json:
```json
{
    "body": "<a id='comment:14'></a>Attachment [trac_12407_fix_testcases.patch](tarball://root/attachments/some-uuid/ticket12407/trac_12407_fix_testcases.patch) by trehn created at 2012-11-16 11:18:33\n\nWith the third patch on top the tests should work with and without 'database_gap'. I have also replaced all assertions in permgroup_named.py by ValueErrors.",
    "created_at": "2012-11-16T11:18:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12407#issuecomment-176090",
    "user": "https://trac.sagemath.org/admin/accounts/users/trehn"
}
```

<a id='comment:14'></a>Attachment [trac_12407_fix_testcases.patch](tarball://root/attachments/some-uuid/ticket12407/trac_12407_fix_testcases.patch) by trehn created at 2012-11-16 11:18:33

With the third patch on top the tests should work with and without 'database_gap'. I have also replaced all assertions in permgroup_named.py by ValueErrors.



---

archive/issue_comments_176091.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-11-16T11:18:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12407#issuecomment-176091",
    "user": "https://trac.sagemath.org/admin/accounts/users/trehn"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_176092.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,19 @@\n+This patch implements the finite enumerated set of primitive permutation groups of a given degree, and the infinite enumerated set of all primitive permutation groups. It is based on the work done in #8500 for transitive permutation groups.\n \n+This allows a user to do:\n+\n+```\n+sage: PrimitiveGroups(4).cardinality()\n+\n+sage: for G in PrimitiveGroups(i):\n+...       any_test(G)  # any test over all primitive groups of a given degree\n+\n+sage: for G in PrimitiveGroups():\n+...       other_test(G) # test over all primitive groups\n+```\n+This requires the optional database_gap which contains all the primitive permutation groups of degree <= 2499. Therefore, in practice, the enumeration stops with a NonImplementedError? \n+\n+Apply trac_12407_primitive_permutation_groups.patch, trac_12407_review.patch, trac_12407_fix_testcases.patch\n \n Author: Thomas Rehn\n \n``````\n",
    "created_at": "2012-11-16T11:18:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12407#issuecomment-176092",
    "user": "https://trac.sagemath.org/admin/accounts/users/trehn"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,19 @@
+This patch implements the finite enumerated set of primitive permutation groups of a given degree, and the infinite enumerated set of all primitive permutation groups. It is based on the work done in #8500 for transitive permutation groups.
 
+This allows a user to do:
+
+```
+sage: PrimitiveGroups(4).cardinality()
+
+sage: for G in PrimitiveGroups(i):
+...       any_test(G)  # any test over all primitive groups of a given degree
+
+sage: for G in PrimitiveGroups():
+...       other_test(G) # test over all primitive groups
+```
+This requires the optional database_gap which contains all the primitive permutation groups of degree <= 2499. Therefore, in practice, the enumeration stops with a NonImplementedError? 
+
+Apply trac_12407_primitive_permutation_groups.patch, trac_12407_review.patch, trac_12407_fix_testcases.patch
 
 Author: Thomas Rehn
 
``````




---

archive/issue_comments_176093.json:
```json
{
    "body": "<a id='comment:15'></a>I've double-checked that the doctests now work with and without the database_gap. Positive review.",
    "created_at": "2012-11-20T21:31:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12407#issuecomment-176093",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:15'></a>I've double-checked that the doctests now work with and without the database_gap. Positive review.



---

archive/issue_comments_176094.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-11-20T21:31:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12407#issuecomment-176094",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_033287.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-27T03:11:21Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12407",
    "milestone": "sage-5.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12407#event-33287"
}
```



---

archive/issue_events_033288.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-27T03:11:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12407",
    "milestone": "sage-5.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12407#event-33288"
}
```



---

archive/issue_comments_176095.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,19 @@\n+This patch implements the finite enumerated set of primitive permutation groups of a given degree, and the infinite enumerated set of all primitive permutation groups. It is based on the work done in #8500 for transitive permutation groups.\n \n+This allows a user to do:\n+\n+```\n+sage: PrimitiveGroups(4).cardinality()\n+\n+sage: for G in PrimitiveGroups(i):\n+...       any_test(G)  # any test over all primitive groups of a given degree\n+\n+sage: for G in PrimitiveGroups():\n+...       other_test(G) # test over all primitive groups\n+```\n+This requires the optional database_gap which contains all the primitive permutation groups of degree <= 2499. Therefore, in practice, the enumeration stops with a NonImplementedError? \n+\n+**Apply** [attachment:trac_12407_primitive_permutation_groups.patch], [attachment:trac_12407_review.patch], [attachment:trac_12407_fix_testcases.patch]\n \n Author: Thomas Rehn\n \n``````\n",
    "created_at": "2012-12-18T11:23:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12407#issuecomment-176095",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,19 @@
+This patch implements the finite enumerated set of primitive permutation groups of a given degree, and the infinite enumerated set of all primitive permutation groups. It is based on the work done in #8500 for transitive permutation groups.
 
+This allows a user to do:
+
+```
+sage: PrimitiveGroups(4).cardinality()
+
+sage: for G in PrimitiveGroups(i):
+...       any_test(G)  # any test over all primitive groups of a given degree
+
+sage: for G in PrimitiveGroups():
+...       other_test(G) # test over all primitive groups
+```
+This requires the optional database_gap which contains all the primitive permutation groups of degree <= 2499. Therefore, in practice, the enumeration stops with a NonImplementedError? 
+
+**Apply** [attachment:trac_12407_primitive_permutation_groups.patch], [attachment:trac_12407_review.patch], [attachment:trac_12407_fix_testcases.patch]
 
 Author: Thomas Rehn
 
``````




---

archive/issue_comments_176096.json:
```json
{
    "body": "<a id='comment:18'></a>This patch uses assertions in a bad way. As discussed some time ago on sage-devel, public functions should never use assertions to signal bad user input.  Any appearance of an `AssertionError` is by definition a bug.",
    "created_at": "2012-12-18T12:30:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12407#issuecomment-176096",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:18'></a>This patch uses assertions in a bad way. As discussed some time ago on sage-devel, public functions should never use assertions to signal bad user input.  Any appearance of an `AssertionError` is by definition a bug.



---

archive/issue_comments_176097.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-12-18T12:30:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12407#issuecomment-176097",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_176098.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-12-18T12:37:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12407#issuecomment-176098",
    "user": "https://trac.sagemath.org/admin/accounts/users/trehn"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_176099.json:
```json
{
    "body": "<a id='comment:19'></a>The last of the three patches should already remove all possible AssertionErrors in permgroup.py and permgroup_named.py that I introduced with my first patch or that had been there before.\n\nI didn't merge the three patches into one since I am not the author of all three.",
    "created_at": "2012-12-18T12:37:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12407#issuecomment-176099",
    "user": "https://trac.sagemath.org/admin/accounts/users/trehn"
}
```

<a id='comment:19'></a>The last of the three patches should already remove all possible AssertionErrors in permgroup.py and permgroup_named.py that I introduced with my first patch or that had been there before.

I didn't merge the three patches into one since I am not the author of all three.



---

archive/issue_comments_176100.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-12-18T12:39:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12407#issuecomment-176100",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_176101.json:
```json
{
    "body": "<a id='comment:21'></a>OK fine, I didn't realize that.",
    "created_at": "2012-12-18T12:47:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12407#issuecomment-176101",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:21'></a>OK fine, I didn't realize that.



---

archive/issue_comments_176102.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-5.6.beta1\"",
    "created_at": "2012-12-21T09:31:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12407#issuecomment-176102",
    "user": "https://github.com/jdemeyer"
}
```

Changing merged from "" to "sage-5.6.beta1"



---

archive/issue_comments_176103.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-12-21T09:31:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12407#issuecomment-176103",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_033289.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-12-21T09:31:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12407",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12407#event-33289"
}
```
