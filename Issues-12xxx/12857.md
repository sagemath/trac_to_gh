# Issue 12857: Split off Graphics class from plot.py

archive/issues_012685.json:
```json
{
    "body": "The file `sage/plot/plot.py` is getting huge.  One consequence is that doctesting this file (without `--long`) takes double the time of any other file.  **blocker** because it regularly causes doctest timeouts.\n\nThe following will be moved to a new file `graphics.py`:\n1. class `Graphics`\n2. class `GraphicsArray`\n3. def `show_default`\n4. def `is_Graphics`\n\nA few doctests consistently taking at least 2 seconds on `sage.math` have been marked `# long time`.\n\nBefore this patch on `sage.math`:\n\n```\nsage -t  \"devel/sage/sage/plot/plot.py\"\n         [133.6 s]\n```\n\nAfter this patch on `sage.math`:\n\n```\nsage -t  \"devel/sage/sage/plot/graphics.py\"\n         [51.5 s]\nsage -t  \"devel/sage/sage/plot/plot.py\"\n         [67.9 s]\n```\n\nThe patch was created by first *copying* `plot.py` to `graphics.py` and then\nremoving the duplicate code in either `plot.py` or `graphics.py`.\n\n\n**Apply :**\n\n- attachment:12857_split_graphics.patch\n- attachment:trac_12857-split_graphics_review-fh.patch\n\n\nAssignee: tbd\n\nCC:  @kcrisman\n\nReviewer: Benjamin Jones, Florent Hivert\n\nAuthor: Jeroen Demeyer\n\nMerged: sage-5.0.rc0\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/12857\n\n",
    "closed_at": "2012-04-30T09:50:59Z",
    "created_at": "2012-04-19T07:18:34Z",
    "labels": [
        "component: graphics",
        "blocker"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.0",
    "title": "Split off Graphics class from plot.py",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12857",
    "user": "https://github.com/jdemeyer"
}
```
The file `sage/plot/plot.py` is getting huge.  One consequence is that doctesting this file (without `--long`) takes double the time of any other file.  **blocker** because it regularly causes doctest timeouts.

The following will be moved to a new file `graphics.py`:
1. class `Graphics`
2. class `GraphicsArray`
3. def `show_default`
4. def `is_Graphics`

A few doctests consistently taking at least 2 seconds on `sage.math` have been marked `# long time`.

Before this patch on `sage.math`:

```
sage -t  "devel/sage/sage/plot/plot.py"
         [133.6 s]
```

After this patch on `sage.math`:

```
sage -t  "devel/sage/sage/plot/graphics.py"
         [51.5 s]
sage -t  "devel/sage/sage/plot/plot.py"
         [67.9 s]
```

The patch was created by first *copying* `plot.py` to `graphics.py` and then
removing the duplicate code in either `plot.py` or `graphics.py`.


**Apply :**

- attachment:12857_split_graphics.patch
- attachment:trac_12857-split_graphics_review-fh.patch


Assignee: tbd

CC:  @kcrisman

Reviewer: Benjamin Jones, Florent Hivert

Author: Jeroen Demeyer

Merged: sage-5.0.rc0

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/12857





---

archive/issue_comments_187610.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to plotting.",
    "created_at": "2012-04-19T07:18:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187610",
    "user": "https://github.com/jdemeyer"
}
```

Changing component from PLEASE CHANGE to plotting.



---

archive/issue_comments_187611.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,9 @@\n-The file `sage/plot/plot.py` is getting huge.  One consequence is that doctesting this file (without `--long`) takes double the time of any other file.  One obvious thing to do is to move the `Graphics` class to a new file.\n+The file `sage/plot/plot.py` is getting huge.  One consequence is that doctesting this file (without `--long`) takes double the time of any other file.\n+\n+The following will be moved to a new file `graphics.py`:\n+1. class `Graphics`\n+2. class `GraphicsArray`\n+\n \n Comment: 1\n \n``````\n",
    "created_at": "2012-04-19T07:28:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187611",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,9 @@
-The file `sage/plot/plot.py` is getting huge.  One consequence is that doctesting this file (without `--long`) takes double the time of any other file.  One obvious thing to do is to move the `Graphics` class to a new file.
+The file `sage/plot/plot.py` is getting huge.  One consequence is that doctesting this file (without `--long`) takes double the time of any other file.
+
+The following will be moved to a new file `graphics.py`:
+1. class `Graphics`
+2. class `GraphicsArray`
+
 
 Comment: 1
 
``````




---

archive/issue_comments_187612.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,10 @@\n+The file `sage/plot/plot.py` is getting huge.  One consequence is that doctesting this file (without `--long`) takes double the time of any other file.\n \n+The following will be moved to a new file `graphics.py`:\n+1. class `Graphics`\n+2. class `GraphicsArray`\n+3. def `show_default`\n+4. def `is_Graphics`\n \n Comment: 1\n \n``````\n",
    "created_at": "2012-04-19T07:42:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187612",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,10 @@
+The file `sage/plot/plot.py` is getting huge.  One consequence is that doctesting this file (without `--long`) takes double the time of any other file.
 
+The following will be moved to a new file `graphics.py`:
+1. class `Graphics`
+2. class `GraphicsArray`
+3. def `show_default`
+4. def `is_Graphics`
 
 Comment: 1
 
``````




---

archive/issue_comments_187613.json:
```json
{
    "body": "Changing priority from major to blocker.",
    "created_at": "2012-04-19T08:48:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187613",
    "user": "https://github.com/jdemeyer"
}
```

Changing priority from major to blocker.



---

archive/issue_comments_187614.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,10 @@\n+The file `sage/plot/plot.py` is getting huge.  One consequence is that doctesting this file (without `--long`) takes double the time of any other file.  **blocker** because it regularly causes doctest timeouts.\n \n+The following will be moved to a new file `graphics.py`:\n+1. class `Graphics`\n+2. class `GraphicsArray`\n+3. def `show_default`\n+4. def `is_Graphics`\n \n Comment: 1\n \n``````\n",
    "created_at": "2012-04-19T08:48:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187614",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,10 @@
+The file `sage/plot/plot.py` is getting huge.  One consequence is that doctesting this file (without `--long`) takes double the time of any other file.  **blocker** because it regularly causes doctest timeouts.
 
+The following will be moved to a new file `graphics.py`:
+1. class `Graphics`
+2. class `GraphicsArray`
+3. def `show_default`
+4. def `is_Graphics`
 
 Comment: 1
 
``````




---

archive/issue_comments_187615.json:
```json
{
    "body": "<a id='comment:6'></a>The attached patch is a rough approximation, but mostly does it.",
    "created_at": "2012-04-19T09:09:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187615",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'></a>The attached patch is a rough approximation, but mostly does it.



---

archive/issue_comments_187616.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-04-19T12:42:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187616",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_187617.json:
```json
{
    "body": "Changing author from \"\" to \"Jeroen Demeyer\"",
    "created_at": "2012-04-19T12:42:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187617",
    "user": "https://github.com/jdemeyer"
}
```

Changing author from "" to "Jeroen Demeyer"



---

archive/issue_comments_187618.json:
```json
{
    "body": "Changing component from plotting to graphics.",
    "created_at": "2012-04-19T12:42:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187618",
    "user": "https://github.com/jdemeyer"
}
```

Changing component from plotting to graphics.



---

archive/issue_comments_187619.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,28 @@\n+The file `sage/plot/plot.py` is getting huge.  One consequence is that doctesting this file (without `--long`) takes double the time of any other file.  **blocker** because it regularly causes doctest timeouts.\n \n+The following will be moved to a new file `graphics.py`:\n+1. class `Graphics`\n+2. class `GraphicsArray`\n+3. def `show_default`\n+4. def `is_Graphics`\n+\n+A few doctests consistently taking at least 2 seconds on `sage.math` have been marked `# long time`.\n+\n+Before this patch on `sage.math`:\n+\n+```\n+sage -t  \"devel/sage/sage/plot/plot.py\"\n+         [133.6 s]\n+```\n+\n+After this patch on `sage.math`:\n+\n+```\n+sage -t  \"devel/sage/sage/plot/graphics.py\"\n+         [51.5 s]\n+sage -t  \"devel/sage/sage/plot/plot.py\"\n+         [67.9 s]\n+```\n \n Comment: 1\n \n``````\n",
    "created_at": "2012-04-19T12:42:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187619",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,28 @@
+The file `sage/plot/plot.py` is getting huge.  One consequence is that doctesting this file (without `--long`) takes double the time of any other file.  **blocker** because it regularly causes doctest timeouts.
 
+The following will be moved to a new file `graphics.py`:
+1. class `Graphics`
+2. class `GraphicsArray`
+3. def `show_default`
+4. def `is_Graphics`
+
+A few doctests consistently taking at least 2 seconds on `sage.math` have been marked `# long time`.
+
+Before this patch on `sage.math`:
+
+```
+sage -t  "devel/sage/sage/plot/plot.py"
+         [133.6 s]
+```
+
+After this patch on `sage.math`:
+
+```
+sage -t  "devel/sage/sage/plot/graphics.py"
+         [51.5 s]
+sage -t  "devel/sage/sage/plot/plot.py"
+         [67.9 s]
+```
 
 Comment: 1
 
``````




---

archive/issue_comments_187620.json:
```json
{
    "body": "<a id='comment:8'></a>Quite the patch bomb!  I won't be able to look at this this weekend for sure.  But I would ask you whether you might try building the documentation with this patch; I have a suspicion that there are cross-links that won't work now (probably not too many, but some).\n\nThanks for cutting the rough draft on this.",
    "created_at": "2012-04-19T13:01:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187620",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:8'></a>Quite the patch bomb!  I won't be able to look at this this weekend for sure.  But I would ask you whether you might try building the documentation with this patch; I have a suspicion that there are cross-links that won't work now (probably not too many, but some).

Thanks for cutting the rough draft on this.



---

archive/issue_comments_187621.json:
```json
{
    "body": "<a id='comment:9'></a>Replying to [comment:8 kcrisman]:\n> Quite the patch bomb!  I won't be able to look at this this weekend for sure.  But I would ask you whether you might try building the documentation with this patch; I have a suspicion that there are cross-links that won't work now (probably not too many, but some).\n\nBuilding the documentation works.  Is there an automatic way to check for broken cross-links?",
    "created_at": "2012-04-19T13:15:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187621",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'></a>Replying to [comment:8 kcrisman]:
> Quite the patch bomb!  I won't be able to look at this this weekend for sure.  But I would ask you whether you might try building the documentation with this patch; I have a suspicion that there are cross-links that won't work now (probably not too many, but some).

Building the documentation works.  Is there an automatic way to check for broken cross-links?



---

archive/issue_comments_187622.json:
```json
{
    "body": "<a id='comment:10'></a>The \"patch bomb\" is not as bad as it looks: large parts of the patch simply remove duplicate code from `plot.py` xor `graphics.py`.  The rest is mostly obvious changing of imports.",
    "created_at": "2012-04-19T13:21:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187622",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'></a>The "patch bomb" is not as bad as it looks: large parts of the patch simply remove duplicate code from `plot.py` xor `graphics.py`.  The rest is mostly obvious changing of imports.



---

archive/issue_comments_187623.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,30 @@\n+The file `sage/plot/plot.py` is getting huge.  One consequence is that doctesting this file (without `--long`) takes double the time of any other file.  **blocker** because it regularly causes doctest timeouts.\n \n+The following will be moved to a new file `graphics.py`:\n+1. class `Graphics`\n+2. class `GraphicsArray`\n+3. def `show_default`\n+4. def `is_Graphics`\n+\n+A few doctests consistently taking at least 2 seconds on `sage.math` have been marked `# long time`.\n+\n+Before this patch on `sage.math`:\n+\n+```\n+sage -t  \"devel/sage/sage/plot/plot.py\"\n+         [133.6 s]\n+```\n+\n+After this patch on `sage.math`:\n+\n+```\n+sage -t  \"devel/sage/sage/plot/graphics.py\"\n+         [51.5 s]\n+sage -t  \"devel/sage/sage/plot/plot.py\"\n+         [67.9 s]\n+```\n+\n+The patch was created by first *copying* `plot.py` to `graphics.py` and then removing the duplicate code in either `plot.py` or `graphics.py`.\n \n Comment: 1\n \n``````\n",
    "created_at": "2012-04-19T13:21:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187623",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,30 @@
+The file `sage/plot/plot.py` is getting huge.  One consequence is that doctesting this file (without `--long`) takes double the time of any other file.  **blocker** because it regularly causes doctest timeouts.
 
+The following will be moved to a new file `graphics.py`:
+1. class `Graphics`
+2. class `GraphicsArray`
+3. def `show_default`
+4. def `is_Graphics`
+
+A few doctests consistently taking at least 2 seconds on `sage.math` have been marked `# long time`.
+
+Before this patch on `sage.math`:
+
+```
+sage -t  "devel/sage/sage/plot/plot.py"
+         [133.6 s]
+```
+
+After this patch on `sage.math`:
+
+```
+sage -t  "devel/sage/sage/plot/graphics.py"
+         [51.5 s]
+sage -t  "devel/sage/sage/plot/plot.py"
+         [67.9 s]
+```
+
+The patch was created by first *copying* `plot.py` to `graphics.py` and then removing the duplicate code in either `plot.py` or `graphics.py`.
 
 Comment: 1
 
``````




---

archive/issue_comments_187624.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Benjamin Jones\"",
    "created_at": "2012-04-19T16:28:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187624",
    "user": "https://github.com/benjaminfjones"
}
```

Changing reviewer from "" to "Benjamin Jones"



---

archive/issue_comments_187625.json:
```json
{
    "body": "<a id='comment:11'></a>The patch applies cleanly to 5.0.beta12 and all tests pass on `sage/plot/*.py`. I also looked through the live documentation in the 2d/3d graphics sections and everything looks good to me. I didn't look for broken links, though.",
    "created_at": "2012-04-19T16:28:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187625",
    "user": "https://github.com/benjaminfjones"
}
```

<a id='comment:11'></a>The patch applies cleanly to 5.0.beta12 and all tests pass on `sage/plot/*.py`. I also looked through the live documentation in the 2d/3d graphics sections and everything looks good to me. I didn't look for broken links, though.



---

archive/issue_comments_187626.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-04-19T20:51:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187626",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_187627.json:
```json
{
    "body": "<a id='comment:12'></a>Okay, I'll check the links.",
    "created_at": "2012-04-19T20:51:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187627",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>Okay, I'll check the links.



---

archive/issue_comments_187628.json:
```json
{
    "body": "<a id='comment:13'></a>Fixed some more links.  I think the documentation is okay now, except for one huge problem: the module `sage.combinat.e_one_star` is documented as `UNABLE TO IMPORT MODULE`, see my sage-devel post.",
    "created_at": "2012-04-20T11:18:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187628",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'></a>Fixed some more links.  I think the documentation is okay now, except for one huge problem: the module `sage.combinat.e_one_star` is documented as `UNABLE TO IMPORT MODULE`, see my sage-devel post.



---

archive/issue_comments_187629.json:
```json
{
    "body": "Changing work_issues from \"\" to \"sage.combinat.e_one_star documentation\"",
    "created_at": "2012-04-20T11:18:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187629",
    "user": "https://github.com/jdemeyer"
}
```

Changing work_issues from "" to "sage.combinat.e_one_star documentation"



---

archive/issue_comments_187630.json:
```json
{
    "body": "<a id='comment:14'></a>The UNABLE TO IMPORT MODULE seems like a Sphinx bug, or a bug in how Sage calls Sphinx.\n\nI did a diff of the old and new documentation and, as far as I could see, all links still work.  Needs review.",
    "created_at": "2012-04-20T14:55:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187630",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:14'></a>The UNABLE TO IMPORT MODULE seems like a Sphinx bug, or a bug in how Sage calls Sphinx.

I did a diff of the old and new documentation and, as far as I could see, all links still work.  Needs review.



---

archive/issue_comments_187631.json:
```json
{
    "body": "Changing work_issues from \"sage.combinat.e_one_star documentation\" to \"\"",
    "created_at": "2012-04-20T14:55:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187631",
    "user": "https://github.com/jdemeyer"
}
```

Changing work_issues from "sage.combinat.e_one_star documentation" to ""



---

archive/issue_comments_187632.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-04-20T14:55:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187632",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_187633.json:
```json
{
    "body": "Changing work_issues from \"\" to \"address deprecation concerns\"",
    "created_at": "2012-04-22T18:05:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187633",
    "user": "https://github.com/nilesjohnson"
}
```

Changing work_issues from "" to "address deprecation concerns"



---

archive/issue_comments_187634.json:
```json
{
    "body": "<a id='comment:15'></a>Replying to [comment:14 jdemeyer]:\n> The UNABLE TO IMPORT MODULE seems like a Sphinx bug, or a bug in how Sage calls Sphinx.\n> \n> I did a diff of the old and new documentation and, as far as I could see, all links still work.  Needs review.\n\n\nShouldn't it be necessary to issue a deprecation warning for at least a few Sage releases before we change the location of something?  If I understand correctly, this patch will break all uses of `sage.plot.plot.Graphics`.  To me, this seems like a bad idea for 5.0.  Doing `search_src('plot.Graphics')` brings up a few more places `Graphics` and `GraphicsArray` are used in this way, but not addressed by this patch.  For example, `graphs/graph_generators.py` and `shemes/elliptic_curves/ell_generic.py`.\n\nI'm switching this to \"needs info\", and someone can overrule me if there is good reason to skip the deprecation process for this ticket.",
    "created_at": "2012-04-22T18:05:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187634",
    "user": "https://github.com/nilesjohnson"
}
```

<a id='comment:15'></a>Replying to [comment:14 jdemeyer]:
> The UNABLE TO IMPORT MODULE seems like a Sphinx bug, or a bug in how Sage calls Sphinx.
> 
> I did a diff of the old and new documentation and, as far as I could see, all links still work.  Needs review.


Shouldn't it be necessary to issue a deprecation warning for at least a few Sage releases before we change the location of something?  If I understand correctly, this patch will break all uses of `sage.plot.plot.Graphics`.  To me, this seems like a bad idea for 5.0.  Doing `search_src('plot.Graphics')` brings up a few more places `Graphics` and `GraphicsArray` are used in this way, but not addressed by this patch.  For example, `graphs/graph_generators.py` and `shemes/elliptic_curves/ell_generic.py`.

I'm switching this to "needs info", and someone can overrule me if there is good reason to skip the deprecation process for this ticket.



---

archive/issue_comments_187635.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2012-04-22T18:05:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187635",
    "user": "https://github.com/nilesjohnson"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_187636.json:
```json
{
    "body": "<a id='comment:16'></a>Feel free to implement alternative solutions to the problem that `plot.py` takes too long to doctest.",
    "created_at": "2012-04-22T19:22:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187636",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:16'></a>Feel free to implement alternative solutions to the problem that `plot.py` takes too long to doctest.



---

archive/issue_comments_187637.json:
```json
{
    "body": "<a id='comment:17'></a>Actually, `sage.plot.plot.Graphics` and `sage.plot.plot.GraphicsArray` still work since `Graphics` and `GraphicsArray` are imported from `sage.plot.plot`.  So there isn't really a problem...",
    "created_at": "2012-04-22T19:27:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187637",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'></a>Actually, `sage.plot.plot.Graphics` and `sage.plot.plot.GraphicsArray` still work since `Graphics` and `GraphicsArray` are imported from `sage.plot.plot`.  So there isn't really a problem...



---

archive/issue_comments_187638.json:
```json
{
    "body": "<a id='comment:18'></a>Attachment [12857_split_graphics.patch](tarball://root/attachments/some-uuid/ticket12857/12857_split_graphics.patch) by @jdemeyer created at 2012-04-22 19:31:01\n\n`sage/schemes/elliptic_curves/*` is okay since it uses:\n\n```\nimport sage.plot.all as plot\n```",
    "created_at": "2012-04-22T19:31:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187638",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:18'></a>Attachment [12857_split_graphics.patch](tarball://root/attachments/some-uuid/ticket12857/12857_split_graphics.patch) by @jdemeyer created at 2012-04-22 19:31:01

`sage/schemes/elliptic_curves/*` is okay since it uses:

```
import sage.plot.all as plot
```



---

archive/issue_comments_187639.json:
```json
{
    "body": "Changing work_issues from \"address deprecation concerns\" to \"\"",
    "created_at": "2012-04-22T19:31:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187639",
    "user": "https://github.com/jdemeyer"
}
```

Changing work_issues from "address deprecation concerns" to ""



---

archive/issue_comments_187640.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2012-04-22T19:31:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187640",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_187641.json:
```json
{
    "body": "<a id='comment:20'></a>Replying to [comment:9 jdemeyer]:\n> Building the documentation works.  Is there an automatic way to check for broken cross-links?\n\n\nYes ! There is an option \"--warn-links\" to docbuild recently added by #9128.\n\nI didn't yet check the documentation but I've a small reviewer patch which silent `sage -coverage`.\n\nFlorent",
    "created_at": "2012-04-26T09:46:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187641",
    "user": "https://github.com/hivert"
}
```

<a id='comment:20'></a>Replying to [comment:9 jdemeyer]:
> Building the documentation works.  Is there an automatic way to check for broken cross-links?


Yes ! There is an option "--warn-links" to docbuild recently added by #9128.

I didn't yet check the documentation but I've a small reviewer patch which silent `sage -coverage`.

Florent



---

archive/issue_comments_187642.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,37 @@\n+The file `sage/plot/plot.py` is getting huge.  One consequence is that doctesting this file (without `--long`) takes double the time of any other file.  **blocker** because it regularly causes doctest timeouts.\n+\n+The following will be moved to a new file `graphics.py`:\n+1. class `Graphics`\n+2. class `GraphicsArray`\n+3. def `show_default`\n+4. def `is_Graphics`\n+\n+A few doctests consistently taking at least 2 seconds on `sage.math` have been marked `# long time`.\n+\n+Before this patch on `sage.math`:\n+\n+```\n+sage -t  \"devel/sage/sage/plot/plot.py\"\n+         [133.6 s]\n+```\n+\n+After this patch on `sage.math`:\n+\n+```\n+sage -t  \"devel/sage/sage/plot/graphics.py\"\n+         [51.5 s]\n+sage -t  \"devel/sage/sage/plot/plot.py\"\n+         [67.9 s]\n+```\n+\n+The patch was created by first *copying* `plot.py` to `graphics.py` and then\n+removing the duplicate code in either `plot.py` or `graphics.py`.\n+\n+\n+**Apply :**\n+\n+- attachment:12857_split_graphics.patch\n+- attachment:trac_12857-split_graphics_review-fh.patch\n \n \n Comment: 1\n``````\n",
    "created_at": "2012-04-26T09:55:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187642",
    "user": "https://github.com/hivert"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,37 @@
+The file `sage/plot/plot.py` is getting huge.  One consequence is that doctesting this file (without `--long`) takes double the time of any other file.  **blocker** because it regularly causes doctest timeouts.
+
+The following will be moved to a new file `graphics.py`:
+1. class `Graphics`
+2. class `GraphicsArray`
+3. def `show_default`
+4. def `is_Graphics`
+
+A few doctests consistently taking at least 2 seconds on `sage.math` have been marked `# long time`.
+
+Before this patch on `sage.math`:
+
+```
+sage -t  "devel/sage/sage/plot/plot.py"
+         [133.6 s]
+```
+
+After this patch on `sage.math`:
+
+```
+sage -t  "devel/sage/sage/plot/graphics.py"
+         [51.5 s]
+sage -t  "devel/sage/sage/plot/plot.py"
+         [67.9 s]
+```
+
+The patch was created by first *copying* `plot.py` to `graphics.py` and then
+removing the duplicate code in either `plot.py` or `graphics.py`.
+
+
+**Apply :**
+
+- attachment:12857_split_graphics.patch
+- attachment:trac_12857-split_graphics_review-fh.patch
 
 
 Comment: 1
``````




---

archive/issue_comments_187643.json:
```json
{
    "body": "Changing reviewer from \"Benjamin Jones\" to \"Benjamin Jones, Florent Hivert\"",
    "created_at": "2012-04-26T09:55:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187643",
    "user": "https://github.com/hivert"
}
```

Changing reviewer from "Benjamin Jones" to "Benjamin Jones, Florent Hivert"



---

archive/issue_comments_187644.json:
```json
{
    "body": "<a id='comment:21'></a>Good news ! No broken links were reported ! So upto doctesting the whole Sage lib, I'm positive review with the patch. Please review my review patch.",
    "created_at": "2012-04-26T09:55:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187644",
    "user": "https://github.com/hivert"
}
```

<a id='comment:21'></a>Good news ! No broken links were reported ! So upto doctesting the whole Sage lib, I'm positive review with the patch. Please review my review patch.



---

archive/issue_comments_187645.json:
```json
{
    "body": "<a id='comment:22'></a>A `ptestlong` reported\n\n```\nAll tests passed!\n```\nwith the two patch applied. So it just remains to review my reviewer patch which should be quite trivial.\n\nFlorent",
    "created_at": "2012-04-26T10:34:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187645",
    "user": "https://github.com/hivert"
}
```

<a id='comment:22'></a>A `ptestlong` reported

```
All tests passed!
```
with the two patch applied. So it just remains to review my reviewer patch which should be quite trivial.

Florent



---

archive/issue_comments_187646.json:
```json
{
    "body": "<a id='comment:23'></a>Your patch needs to have a useful commit message.  Also, after `sage: g2.show() ` you should have a blank, like\n\n```\n    sage: g2.show() \n\n::\n\n    sage: isinstance(g2, Graphics)\n```\nso that people can see the graphic.  In this case, an empty one with just axes, but it does work.\n\nOtherwise this reviewer patch seems ok, modulo that I haven't tested whether anything applies - taking your word for it.",
    "created_at": "2012-04-26T12:49:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187646",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:23'></a>Your patch needs to have a useful commit message.  Also, after `sage: g2.show() ` you should have a blank, like

```
    sage: g2.show() 

::

    sage: isinstance(g2, Graphics)
```
so that people can see the graphic.  In this case, an empty one with just axes, but it does work.

Otherwise this reviewer patch seems ok, modulo that I haven't tested whether anything applies - taking your word for it.



---

archive/issue_comments_187647.json:
```json
{
    "body": "<a id='comment:24'></a>Attachment [trac_12857-split_graphics_review-fh.patch](tarball://root/attachments/some-uuid/ticket12857/trac_12857-split_graphics_review-fh.patch) by @hivert created at 2012-04-26 13:16:28\n\nReplying to [comment:23 kcrisman]:\n> Your patch needs to have a useful commit message.  \n\n\nOups !\n\n> Also, after `sage: g2.show() ` you should have a blank, like\n> \n> \n> ```\n>     sage: g2.show() \n> \n> ::\n> \n>     sage: isinstance(g2, Graphics)\n> ```\n> so that people can see the graphic.  In this case, an empty one with just axes, but it does work.\n> \n> Otherwise this reviewer patch seems ok, modulo that I haven't tested whether anything applies - taking your word for it.\n\n\nThe new uploaded patch should adress you comments.",
    "created_at": "2012-04-26T13:16:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187647",
    "user": "https://github.com/hivert"
}
```

<a id='comment:24'></a>Attachment [trac_12857-split_graphics_review-fh.patch](tarball://root/attachments/some-uuid/ticket12857/trac_12857-split_graphics_review-fh.patch) by @hivert created at 2012-04-26 13:16:28

Replying to [comment:23 kcrisman]:
> Your patch needs to have a useful commit message.  


Oups !

> Also, after `sage: g2.show() ` you should have a blank, like
> 
> 
> ```
>     sage: g2.show() 
> 
> ::
> 
>     sage: isinstance(g2, Graphics)
> ```
> so that people can see the graphic.  In this case, an empty one with just axes, but it does work.
> 
> Otherwise this reviewer patch seems ok, modulo that I haven't tested whether anything applies - taking your word for it.


The new uploaded patch should adress you comments.



---

archive/issue_comments_187648.json:
```json
{
    "body": "<a id='comment:25'></a>The reviewer patch is now fine as far as it goes.\n\n---\n\nI'm still a little nervous about such a big change (I know it's not really big in that sense, but it does make a large change to where things are located) in an rc.  I bet some outside links to the Sage doc will break, and the biggest problem is that all those helpful `show` options, which are only documented there, are now not in the same place as `plot`.    Although in principle redistributing like this is good and we should aim to fix timeouts, it does seem that this ticket was created in response to a somewhat contrived problem (timeout on busy systems).  Presumably someone can always make a system busy enough that Sage doctests will time out.  I'm just not sure that the last release candidate is the place for something that should be used \"in practice\" at least a little while.\n\nI don't have time to come up with any other solutions, and if Ben checked things out and `DOCTEST_MODE` and `EMBEDDED_MODE` and so forth still work (and whatever other constants like DPI there are) without trouble in the same ways as before, then I guess that's okay.  But it does seems like (said the person who has never done a release, nor has the skills to do one) that we should have had a Sage 4.9 a few betas ago so this kind of thing wouldn't have happened...",
    "created_at": "2012-04-26T17:20:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187648",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:25'></a>The reviewer patch is now fine as far as it goes.

---

I'm still a little nervous about such a big change (I know it's not really big in that sense, but it does make a large change to where things are located) in an rc.  I bet some outside links to the Sage doc will break, and the biggest problem is that all those helpful `show` options, which are only documented there, are now not in the same place as `plot`.    Although in principle redistributing like this is good and we should aim to fix timeouts, it does seem that this ticket was created in response to a somewhat contrived problem (timeout on busy systems).  Presumably someone can always make a system busy enough that Sage doctests will time out.  I'm just not sure that the last release candidate is the place for something that should be used "in practice" at least a little while.

I don't have time to come up with any other solutions, and if Ben checked things out and `DOCTEST_MODE` and `EMBEDDED_MODE` and so forth still work (and whatever other constants like DPI there are) without trouble in the same ways as before, then I guess that's okay.  But it does seems like (said the person who has never done a release, nor has the skills to do one) that we should have had a Sage 4.9 a few betas ago so this kind of thing wouldn't have happened...



---

archive/issue_comments_187649.json:
```json
{
    "body": "<a id='comment:26'></a>It sounds to me as though we should give this a positive review so that it can go into a prerelease and get lots of testing, get lots of people looking at it. (I would suggest the same for #11616, to make it easy to test it on different platforms.)",
    "created_at": "2012-04-26T18:27:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187649",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:26'></a>It sounds to me as though we should give this a positive review so that it can go into a prerelease and get lots of testing, get lots of people looking at it. (I would suggest the same for #11616, to make it easy to test it on different platforms.)



---

archive/issue_comments_187650.json:
```json
{
    "body": "<a id='comment:27'></a>Replying to [comment:26 jhpalmieri]:\n> It sounds to me as though we should give this a positive review so that it can go into a prerelease and get lots of testing, get lots of people looking at it. (I would suggest the same for #11616, to make it easy to test it on different platforms.)\n\n\nI agree with `@`jhpalmieri. I've looked over the patch again and the reviewer patch. This gets a positive review from me. I'm running a patchbot to check the doctests again. It's pending.",
    "created_at": "2012-04-26T20:07:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187650",
    "user": "https://github.com/benjaminfjones"
}
```

<a id='comment:27'></a>Replying to [comment:26 jhpalmieri]:
> It sounds to me as though we should give this a positive review so that it can go into a prerelease and get lots of testing, get lots of people looking at it. (I would suggest the same for #11616, to make it easy to test it on different platforms.)


I agree with `@`jhpalmieri. I've looked over the patch again and the reviewer patch. This gets a positive review from me. I'm running a patchbot to check the doctests again. It's pending.



---

archive/issue_comments_187651.json:
```json
{
    "body": "<a id='comment:28'></a>All doctests pass when applied to 5.0.beta13.",
    "created_at": "2012-04-26T22:06:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187651",
    "user": "https://github.com/benjaminfjones"
}
```

<a id='comment:28'></a>All doctests pass when applied to 5.0.beta13.



---

archive/issue_comments_187652.json:
```json
{
    "body": "<a id='comment:29'></a>Replying to [comment:25 kcrisman]:\n> it does seem that this ticket was created in response to a somewhat contrived problem (timeout on busy systems\n\nIt is not a \"contrived problem\".  It is a real issue happening in practice.\n\nIf somebody comes up with a different solution to these timeouts, that's fine for me.  I just think that the timeouts should be fixed in sage-5.0 and splitting `plot.py` seemed a reasonable solution.",
    "created_at": "2012-04-26T22:13:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187652",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:29'></a>Replying to [comment:25 kcrisman]:
> it does seem that this ticket was created in response to a somewhat contrived problem (timeout on busy systems

It is not a "contrived problem".  It is a real issue happening in practice.

If somebody comes up with a different solution to these timeouts, that's fine for me.  I just think that the timeouts should be fixed in sage-5.0 and splitting `plot.py` seemed a reasonable solution.



---

archive/issue_comments_187653.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-04-27T16:42:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187653",
    "user": "https://github.com/hivert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_187654.json:
```json
{
    "body": "<a id='comment:30'></a>Despite kcrisman comments which are by the way quite sound, and seconded by jhpalmieri and benjaminfjones, I'm giving positive review. I trust Jeroen for knowing the risk we take by merging such a big change in and RC. He certainly known better that us the balance risks/advantages of merging this one.\n\nFlorent",
    "created_at": "2012-04-27T16:42:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187654",
    "user": "https://github.com/hivert"
}
```

<a id='comment:30'></a>Despite kcrisman comments which are by the way quite sound, and seconded by jhpalmieri and benjaminfjones, I'm giving positive review. I trust Jeroen for knowing the risk we take by merging such a big change in and RC. He certainly known better that us the balance risks/advantages of merging this one.

Florent



---

archive/issue_comments_187655.json:
```json
{
    "body": "<a id='comment:31'></a>Replying to [comment:30 hivert]:\n> Despite kcrisman comments which are by the way quite sound, and seconded by jhpalmieri and benjaminfjones, I'm giving positive review. I trust Jeroen for knowing the risk we take by merging such a big change in and RC. He certainly known better that us the balance risks/advantages of merging this one.\n\n>\nOkay, I'm just glad there was some good discussion on this, and with several more eyes this seems reasonable.  I'm not suggesting at all that there is anything wrong with the patch, just that we have been hit in the past by unintended moving of things.",
    "created_at": "2012-04-28T02:58:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187655",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:31'></a>Replying to [comment:30 hivert]:
> Despite kcrisman comments which are by the way quite sound, and seconded by jhpalmieri and benjaminfjones, I'm giving positive review. I trust Jeroen for knowing the risk we take by merging such a big change in and RC. He certainly known better that us the balance risks/advantages of merging this one.

>
Okay, I'm just glad there was some good discussion on this, and with several more eyes this seems reasonable.  I'm not suggesting at all that there is anything wrong with the patch, just that we have been hit in the past by unintended moving of things.



---

archive/issue_events_035025.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-04-30T09:50:59Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12857#event-35025"
}
```



---

archive/issue_comments_187656.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-5.0.rc0\"",
    "created_at": "2012-04-30T09:50:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187656",
    "user": "https://github.com/jdemeyer"
}
```

Changing merged from "" to "sage-5.0.rc0"



---

archive/issue_comments_187657.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-04-30T09:50:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12857#issuecomment-187657",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
