# Issue 12751: Allow building Sage with GCC-4.7.x

archive/issues_012579.json:
```json
{
    "assignees": [
        "https://github.com/sagetrac-GeorgSWeber"
    ],
    "body": "Sage fails to build using GCC 4.7.0 on various systems, for different reasons.\n\n* GFan: #12760\n* Givaro: #12761\n* LinBox: #12762\n* PolyBoRi: #12750, #12655\n* MPIR on ia64 (Itanium): #12765 (GCC bug) -- #11616 also provides an MPIR 2.**4.0**.p3 spkg working around this.\n* MPFR on ia64 (Itanium): #12837 (same GCC bug) -- Note that MPFR is also a prerequisite for building the GCC spkg.\n* GMP-ECM on ia64 (Itanium): Fixed by #12830 (same GCC bug)\n* zn_poly on ia64 (Itanium): Fixed by #12433 (same GCC bug)\n* FLINT, NTL and PARI (as well as the Sage library) all fail to build on ia64 due to the same bug,\n* R fails to build on ia64 during byte-compiling; seems to be a different issue, but same work-around works.  It also fails with `-O3` during byte-compiling on Solaris SPARC and Linux x86_64; on the former `-O2` works, on the latter somewhat surprisingly `-O3 -flto`.  (Cf. comments below.)\n* Two files (`compat` and `linear`) of PARI's test suite fail due to segfaults when compiling with `-O3`/`-O2`/`-O1`, at least on Linux x86 and x86_64.\n* zlib on Solaris: #12800\n* eclib on Solaris (See comments below; this is a Solaris header issue, fixed by a new spkg at #10993.)\n* FLINTQS on Solaris: #12855 (Also a subtle Solaris header issue.)\n* Support GCC version \"4.7\": #13118.\n\n**gcc-4.7.1 spkg** for testing purposes: #13150.\n\n---\n\nThe ia64 bug is fixed in GCC 4.7.1, so we should apply the work-around only on GCC 4.7**.0** and only for packages which are prerequisites of GCC (since we don't plan to support Sage on ia64 with GCC 4.7.0, there is no point in work-arounds for *some* packages):\n\n### mpir-2.4.0.p6 (Jeroen Demeyer, 28 May 2012)\n* Trac #12751: Apply the ia64 workaround for gcc-4.7.0 *only* on\n  gcc-4.7.0 and not on other gcc-4.7.x versions.\n\n### mpfr-3.1.0.p2 (Jeroen Demeyer, 28 May 2012)\n* Trac #12751: Apply the ia64 workaround for gcc-4.7.0 *only* on\n  gcc-4.7.0 and not on other gcc-4.7.x versions.\n* Remove pointless check for gmp.h.\n* Rename MPFR_EXTRA_OPTS to MPFR_CONFIGURE for consistency with MPIR.\n\n### zn_poly-0.9.p9 (Jeroen Demeyer, 28 May 2012)\n* Trac #12751: remove the gcc-4.7.0 workaround for ia64 since this bug\n  has been fixed in gcc-4.7.1 and we will not support building Sage\n  with gcc-4.7.0 on Itanium.\n* Don't override user-set CFLAGS and CXXFLAGS.\n\n### ecm-6.3.p8 (Jeroen Demeyer, 28 May 2012)\n* Trac #12751: remove the gcc-4.7.0 workaround for ia64 since this bug\n  has been fixed in gcc-4.7.1 and we will not support building Sage\n  with gcc-4.7.0 on Itanium.\n* Remove unused variable SAGE_CONF_OPTS.\n* Rename ECM_EXTRA_OPTS to ECM_CONFIGURE for consistency with MPIR.\n* Don't override user-set CFLAGS.\n\n---\n\n**Apply**:\n* [attachment: 12751_allow_gcc_4_7.patch](https://github.com/sagemath/sage/files/ticket12751/12751_allow_gcc_4_7.patch.gz) to `SAGE_ROOT`\n* mpir: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.4.0.p6.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.4.0.p6.spkg)\n* mpfr: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpfr-3.1.0.p2.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpfr-3.1.0.p2.spkg) (also various misc changes)\n* ecm: [http://boxen.math.washington.edu/home/jdemeyer/spkg/ecm-6.3.p8.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/ecm-6.3.p8.spkg) (also various misc changes)\n* zn_poly: [http://boxen.math.washington.edu/home/jdemeyer/spkg/zn_poly-0.9.p9.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/zn_poly-0.9.p9.spkg) (also fixes user-supplied `CFLAGS` and `CXXFLAGS` being overridden)\n\nCC:  @jdemeyer @nexttime\n\nKeywords: **GCC 4.7.0 C++11 -fpermissive compiler bugs sd40.5**\n\nReviewer: **Volker Braun**\n\nAuthor: **Jeroen Demeyer**\n\nMerged: **sage-5.2.beta1**\n\nComponent: **build**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/12751_\n\n",
    "closed_at": "2012-07-07T22:29:57Z",
    "created_at": "2012-03-26T19:48:57Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20build",
        "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Allow building Sage with GCC-4.7.x",
    "type": "issue",
    "updated_at": "2013-03-18T18:08:18Z",
    "url": "https://github.com/sagemath/sage/issues/12751",
    "user": "https://github.com/sagetrac-mariah"
}
```
Sage fails to build using GCC 4.7.0 on various systems, for different reasons.

* GFan: #12760
* Givaro: #12761
* LinBox: #12762
* PolyBoRi: #12750, #12655
* MPIR on ia64 (Itanium): #12765 (GCC bug) -- #11616 also provides an MPIR 2.**4.0**.p3 spkg working around this.
* MPFR on ia64 (Itanium): #12837 (same GCC bug) -- Note that MPFR is also a prerequisite for building the GCC spkg.
* GMP-ECM on ia64 (Itanium): Fixed by #12830 (same GCC bug)
* zn_poly on ia64 (Itanium): Fixed by #12433 (same GCC bug)
* FLINT, NTL and PARI (as well as the Sage library) all fail to build on ia64 due to the same bug,
* R fails to build on ia64 during byte-compiling; seems to be a different issue, but same work-around works.  It also fails with `-O3` during byte-compiling on Solaris SPARC and Linux x86_64; on the former `-O2` works, on the latter somewhat surprisingly `-O3 -flto`.  (Cf. comments below.)
* Two files (`compat` and `linear`) of PARI's test suite fail due to segfaults when compiling with `-O3`/`-O2`/`-O1`, at least on Linux x86 and x86_64.
* zlib on Solaris: #12800
* eclib on Solaris (See comments below; this is a Solaris header issue, fixed by a new spkg at #10993.)
* FLINTQS on Solaris: #12855 (Also a subtle Solaris header issue.)
* Support GCC version "4.7": #13118.

**gcc-4.7.1 spkg** for testing purposes: #13150.

---

The ia64 bug is fixed in GCC 4.7.1, so we should apply the work-around only on GCC 4.7**.0** and only for packages which are prerequisites of GCC (since we don't plan to support Sage on ia64 with GCC 4.7.0, there is no point in work-arounds for *some* packages):

### mpir-2.4.0.p6 (Jeroen Demeyer, 28 May 2012)
* Trac #12751: Apply the ia64 workaround for gcc-4.7.0 *only* on
  gcc-4.7.0 and not on other gcc-4.7.x versions.

### mpfr-3.1.0.p2 (Jeroen Demeyer, 28 May 2012)
* Trac #12751: Apply the ia64 workaround for gcc-4.7.0 *only* on
  gcc-4.7.0 and not on other gcc-4.7.x versions.
* Remove pointless check for gmp.h.
* Rename MPFR_EXTRA_OPTS to MPFR_CONFIGURE for consistency with MPIR.

### zn_poly-0.9.p9 (Jeroen Demeyer, 28 May 2012)
* Trac #12751: remove the gcc-4.7.0 workaround for ia64 since this bug
  has been fixed in gcc-4.7.1 and we will not support building Sage
  with gcc-4.7.0 on Itanium.
* Don't override user-set CFLAGS and CXXFLAGS.

### ecm-6.3.p8 (Jeroen Demeyer, 28 May 2012)
* Trac #12751: remove the gcc-4.7.0 workaround for ia64 since this bug
  has been fixed in gcc-4.7.1 and we will not support building Sage
  with gcc-4.7.0 on Itanium.
* Remove unused variable SAGE_CONF_OPTS.
* Rename ECM_EXTRA_OPTS to ECM_CONFIGURE for consistency with MPIR.
* Don't override user-set CFLAGS.

---

**Apply**:
* [attachment: 12751_allow_gcc_4_7.patch](https://github.com/sagemath/sage/files/ticket12751/12751_allow_gcc_4_7.patch.gz) to `SAGE_ROOT`
* mpir: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.4.0.p6.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.4.0.p6.spkg)
* mpfr: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpfr-3.1.0.p2.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpfr-3.1.0.p2.spkg) (also various misc changes)
* ecm: [http://boxen.math.washington.edu/home/jdemeyer/spkg/ecm-6.3.p8.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/ecm-6.3.p8.spkg) (also various misc changes)
* zn_poly: [http://boxen.math.washington.edu/home/jdemeyer/spkg/zn_poly-0.9.p9.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/zn_poly-0.9.p9.spkg) (also fixes user-supplied `CFLAGS` and `CXXFLAGS` being overridden)

CC:  @jdemeyer @nexttime

Keywords: **GCC 4.7.0 C++11 -fpermissive compiler bugs sd40.5**

Reviewer: **Volker Braun**

Author: **Jeroen Demeyer**

Merged: **sage-5.2.beta1**

Component: **build**

_Issue created by migration from https://trac.sagemath.org/ticket/12751_





---

archive/issue_events_175653.json:
```json
{
    "actor": "https://github.com/sagetrac-mariah",
    "created_at": "2012-03-26T19:48:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "milestone_number": null,
    "milestone_title": "sage-5.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12751#event-175653"
}
```



---

archive/issue_events_175654.json:
```json
{
    "actor": "https://github.com/sagetrac-mariah",
    "created_at": "2012-03-26T19:48:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build",
    "label_color": "000080",
    "label_name": "c: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12751#event-175654"
}
```



---

archive/issue_events_175655.json:
```json
{
    "actor": "https://github.com/sagetrac-mariah",
    "created_at": "2012-03-26T19:48:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12751#event-175655"
}
```



---

archive/issue_events_175656.json:
```json
{
    "actor": "https://github.com/sagetrac-mariah",
    "created_at": "2012-03-26T19:48:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12751#event-175656"
}
```



---

archive/issue_events_175657.json:
```json
{
    "actor": "https://github.com/sagetrac-GeorgSWeber",
    "created_at": "2012-03-26T19:48:57Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "subject": "https://github.com/sagetrac-mariah",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12751#event-175657"
}
```



---

archive/issue_comments_142899.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,13 +1,5 @@\n-sage-5.0.beta10 fails to build using gcc-4.7.0\n-on Skynet/eno.\n+sage-5.0.beta10 fails to build using gcc-4.7.0 on Skynet/eno.\n \n-First failure is at linbox-1.1.6.p7:\n-\n-```\n-../../linbox/matrix/matrix-domain.h:821:36: error: \u2018mulColDense\u2019 was not declared in this scope, and no declarations were found by argument-dependent lookup at the point of instantiation [-fpermissive]\n-../../linbox/matrix/matrix-domain.h:821:36: note: declarations in dependent base \u2018LinBox::MVProductDomain<LinBox::GivaroExtension<LinBox::Modular<unsigned int> > >\u2019 are not found by unqualified lookup\n-../../linbox/matrix/matrix-domain.h:821:36: note: use \u2018this->mulColDense\u2019 instead\n-make[4]: *** [linbox-sage.lo] Error 1\n-make[4]: Leaving directory `/home/mariah/sage/sage-5.0.beta10-x86_64-Linux-core2-fc-gcc-4.7.0/spkg/build/linbox-1.1.6.p7/src/interfaces/sage'\n-```\n-\n+* Linbox: #12762\n+* GFan: #12760\n+* Givaro: #12761\n``````\n",
    "created_at": "2012-03-28T06:49:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142899",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,13 +1,5 @@
-sage-5.0.beta10 fails to build using gcc-4.7.0
-on Skynet/eno.
+sage-5.0.beta10 fails to build using gcc-4.7.0 on Skynet/eno.
 
-First failure is at linbox-1.1.6.p7:
-
-```
-../../linbox/matrix/matrix-domain.h:821:36: error: ‘mulColDense’ was not declared in this scope, and no declarations were found by argument-dependent lookup at the point of instantiation [-fpermissive]
-../../linbox/matrix/matrix-domain.h:821:36: note: declarations in dependent base ‘LinBox::MVProductDomain<LinBox::GivaroExtension<LinBox::Modular<unsigned int> > >’ are not found by unqualified lookup
-../../linbox/matrix/matrix-domain.h:821:36: note: use ‘this->mulColDense’ instead
-make[4]: *** [linbox-sage.lo] Error 1
-make[4]: Leaving directory `/home/mariah/sage/sage-5.0.beta10-x86_64-Linux-core2-fc-gcc-4.7.0/spkg/build/linbox-1.1.6.p7/src/interfaces/sage'
-```
-
+* Linbox: #12762
+* GFan: #12760
+* Givaro: #12761
``````




---

archive/issue_events_175658.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-03-28T06:49:07Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "title_is": "Sage fails to build with GCC-4.7.0",
    "title_was": "make sage build with gcc-4.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12751#event-175658"
}
```



---

archive/issue_comments_142900.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,3 +3,4 @@\n * Linbox: #12762\n * GFan: #12760\n * Givaro: #12761\n+* PolyBoRi: #12655\n``````\n",
    "created_at": "2012-03-28T06:49:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142900",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,3 +3,4 @@
 * Linbox: #12762
 * GFan: #12760
 * Givaro: #12761
+* PolyBoRi: #12655
``````




---

archive/issue_comments_142901.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,3 +4,4 @@\n * GFan: #12760\n * Givaro: #12761\n * PolyBoRi: #12655\n+* MPIR: #12765\n``````\n",
    "created_at": "2012-03-28T06:58:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142901",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,3 +4,4 @@
 * GFan: #12760
 * Givaro: #12761
 * PolyBoRi: #12655
+* MPIR: #12765
``````




---

archive/issue_comments_142902.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,4 +4,4 @@\n * GFan: #12760\n * Givaro: #12761\n * PolyBoRi: #12655\n-* MPIR: #12765\n+* MPIR: #12765 (GCC bug)\n``````\n",
    "created_at": "2012-03-28T09:53:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142902",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,4 +4,4 @@
 * GFan: #12760
 * Givaro: #12761
 * PolyBoRi: #12655
-* MPIR: #12765
+* MPIR: #12765 (GCC bug)
``````




---

archive/issue_comments_142903.json:
```json
{
    "body": "Changed keywords from none to **GCC 4.7.0 C++11**",
    "created_at": "2012-03-28T12:37:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142903",
    "user": "https://github.com/nexttime"
}
```

Changed keywords from none to **GCC 4.7.0 C++11**



---

archive/issue_comments_142904.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,8 @@\n-sage-5.0.beta10 fails to build using gcc-4.7.0 on Skynet/eno.\n+sage-5.0.beta10 fails to build using gcc-4.7.0 on Skynet/eno and other Linux systems.\n \n-* Linbox: #12762\n+* LinBox: #12762\n * GFan: #12760\n * Givaro: #12761\n-* PolyBoRi: #12655\n-* MPIR: #12765 (GCC bug)\n+* PolyBoRi: #12750, #12655\n+* MPIR on ia64 (Itanium): #12765 (GCC bug)\n+\n``````\n",
    "created_at": "2012-03-28T12:37:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142904",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,8 @@
-sage-5.0.beta10 fails to build using gcc-4.7.0 on Skynet/eno.
+sage-5.0.beta10 fails to build using gcc-4.7.0 on Skynet/eno and other Linux systems.
 
-* Linbox: #12762
+* LinBox: #12762
 * GFan: #12760
 * Givaro: #12761
-* PolyBoRi: #12655
-* MPIR: #12765 (GCC bug)
+* PolyBoRi: #12750, #12655
+* MPIR on ia64 (Itanium): #12765 (GCC bug)
+
``````




---

archive/issue_comments_142905.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nAlso PARI 2.5.1's test suite fails due to segfaults in two test files, `compat` and `linear` (statically linked `gp` as well as the dynamically linked one).\n\nSciPy's test suite fails to build due to an internal compiler error.\n\nR now fails to build for me (when byte-compiling), interestingly only with *less* fancy GCC optimizations enabled.  (It did build with LTO and Graphite loop optimization enabled).\n\nThis is all on Ubuntu 10.04.4 LTS x86_64.",
    "created_at": "2012-03-28T12:37:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142905",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:5" align="right">comment:5</div>

Also PARI 2.5.1's test suite fails due to segfaults in two test files, `compat` and `linear` (statically linked `gp` as well as the dynamically linked one).

SciPy's test suite fails to build due to an internal compiler error.

R now fails to build for me (when byte-compiling), interestingly only with *less* fancy GCC optimizations enabled.  (It did build with LTO and Graphite loop optimization enabled).

This is all on Ubuntu 10.04.4 LTS x86_64.



---

archive/issue_comments_142906.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-sage-5.0.beta10 fails to build using gcc-4.7.0 on Skynet/eno and other Linux systems.\n+Sage 5.0.beta10 fails to build using GCC 4.7.0 on Skynet/eno and other Linux systems.\n \n * LinBox: #12762\n * GFan: #12760\n``````\n",
    "created_at": "2012-03-28T12:39:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142906",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-sage-5.0.beta10 fails to build using gcc-4.7.0 on Skynet/eno and other Linux systems.
+Sage 5.0.beta10 fails to build using GCC 4.7.0 on Skynet/eno and other Linux systems.
 
 * LinBox: #12762
 * GFan: #12760
``````




---

archive/issue_comments_142907.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@nexttime](#comment:5):\n> SciPy's test suite fails to build due to an internal compiler error.\n\nTurns out that this isn't reproducible.  Actually, in the first attempt (although with `SAGE_CHECK=yes`) *the build* failed, before the test suite got built or run.\n\nI've then successfully rebuilt SciPy without `SAGE_CHECK=yes`, and now also again with it.\n\nNevertheless, SciPy's `spkg-check` (for whatever reason a Python script) is suboptimal, and `spkg-install` **overwrites** `LDFLAGS`.  (It also unsets `CFLAGS` etc., but distutils take these from Python, so that's not as bad as it sounds, provided one doesn't want to rebuild [Python and] SciPy with different flags.)",
    "created_at": "2012-03-28T13:15:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142907",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@nexttime](#comment:5):
> SciPy's test suite fails to build due to an internal compiler error.

Turns out that this isn't reproducible.  Actually, in the first attempt (although with `SAGE_CHECK=yes`) *the build* failed, before the test suite got built or run.

I've then successfully rebuilt SciPy without `SAGE_CHECK=yes`, and now also again with it.

Nevertheless, SciPy's `spkg-check` (for whatever reason a Python script) is suboptimal, and `spkg-install` **overwrites** `LDFLAGS`.  (It also unsets `CFLAGS` etc., but distutils take these from Python, so that's not as bad as it sounds, provided one doesn't want to rebuild [Python and] SciPy with different flags.)



---

archive/issue_comments_142908.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@nexttime](#comment:5):\n> Also PARI 2.5.1's test suite fails due to segfaults in two test files, `compat` and `linear` (statically linked `gp` as well as the dynamically linked one).\n\nFWIW, I get the same test errors in the build with GCC 4.7.0 with LTO and Graphite loop optimization enabled.  Note that `ptestlong` passed for that build (with a couple of spkgs replaced, cf. sage-release thread for Sage 5.0.beta10).",
    "created_at": "2012-03-28T14:23:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142908",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@nexttime](#comment:5):
> Also PARI 2.5.1's test suite fails due to segfaults in two test files, `compat` and `linear` (statically linked `gp` as well as the dynamically linked one).

FWIW, I get the same test errors in the build with GCC 4.7.0 with LTO and Graphite loop optimization enabled.  Note that `ptestlong` passed for that build (with a couple of spkgs replaced, cf. sage-release thread for Sage 5.0.beta10).



---

archive/issue_comments_142909.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@nexttime](#comment:5):\n> R now fails to build for me (when byte-compiling), interestingly only with *less* fancy GCC optimizations enabled.  (It did build with LTO and Graphite loop optimization enabled).\n\nThis is *really* weird: R *does* build if I just in addition enable LTO... 8)\n\n(My second Sage 5.0.beta10 build with GCC 4.7.0, without LTO and Graphite loop optimization, just used `-march=native -O3 -g -fno-strict-aliasing`.)",
    "created_at": "2012-03-28T17:32:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142909",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@nexttime](#comment:5):
> R now fails to build for me (when byte-compiling), interestingly only with *less* fancy GCC optimizations enabled.  (It did build with LTO and Graphite loop optimization enabled).

This is *really* weird: R *does* build if I just in addition enable LTO... 8)

(My second Sage 5.0.beta10 build with GCC 4.7.0, without LTO and Graphite loop optimization, just used `-march=native -O3 -g -fno-strict-aliasing`.)



---

archive/issue_comments_142910.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@nexttime](#comment:9):\n> Replying to [@nexttime](#comment:5):\n> > R now fails to build for me (when byte-compiling), interestingly only with *less* fancy GCC optimizations enabled.  (It did build with LTO and Graphite loop optimization enabled).\n\n> \n> This is *really* weird: R *does* build if I just in addition enable LTO... 8)\n\n... and also passes its test suite with that.",
    "created_at": "2012-03-28T18:30:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142910",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@nexttime](#comment:9):
> Replying to [@nexttime](#comment:5):
> > R now fails to build for me (when byte-compiling), interestingly only with *less* fancy GCC optimizations enabled.  (It did build with LTO and Graphite loop optimization enabled).

> 
> This is *really* weird: R *does* build if I just in addition enable LTO... 8)

... and also passes its test suite with that.



---

archive/issue_events_175659.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-03-31T20:49:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12751#event-175659"
}
```



---

archive/issue_events_175660.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-03-31T20:49:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "label": "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p: 1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12751#event-175660"
}
```



---

archive/issue_comments_142911.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@jdemeyer](#comment:11):\n\nBtw., any timeline aimed at for the 5.0 release?",
    "created_at": "2012-03-31T20:53:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142911",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@jdemeyer](#comment:11):

Btw., any timeline aimed at for the 5.0 release?



---

archive/issue_comments_142912.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@nexttime](#comment:12):\n> Btw., any timeline aimed at for the 5.0 release?\n\nNo, but you should ask William Stein.",
    "created_at": "2012-04-01T15:13:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142912",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@nexttime](#comment:12):
> Btw., any timeline aimed at for the 5.0 release?

No, but you should ask William Stein.



---

archive/issue_comments_142913.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,4 +5,4 @@\n * Givaro: #12761\n * PolyBoRi: #12750, #12655\n * MPIR on ia64 (Itanium): #12765 (GCC bug)\n-\n+* zlib on Solaris: #12800\n``````\n",
    "created_at": "2012-04-03T16:13:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142913",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,4 +5,4 @@
 * Givaro: #12761
 * PolyBoRi: #12750, #12655
 * MPIR on ia64 (Itanium): #12765 (GCC bug)
-
+* zlib on Solaris: #12800
``````




---

archive/issue_comments_142914.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,5 +4,5 @@\n * GFan: #12760\n * Givaro: #12761\n * PolyBoRi: #12750, #12655\n-* MPIR on ia64 (Itanium): #12765 (GCC bug)\n+* MPIR on ia64 (Itanium): #12765 (GCC bug) -- #11616 also provides an MPIR 2.**4.0**.p2 spkg working around this.\n * zlib on Solaris: #12800\n``````\n",
    "created_at": "2012-04-05T17:14:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142914",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,5 +4,5 @@
 * GFan: #12760
 * Givaro: #12761
 * PolyBoRi: #12750, #12655
-* MPIR on ia64 (Itanium): #12765 (GCC bug)
+* MPIR on ia64 (Itanium): #12765 (GCC bug) -- #11616 also provides an MPIR 2.**4.0**.p2 spkg working around this.
 * zlib on Solaris: #12800
``````




---

archive/issue_comments_142915.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nFor the record: I've updated the LinBox spkg at #12762, now also adding an `spkg-check` script; the test suite wouldn't have built with GCC 4.7.0 (even with `-fpermissive`) [nor with 4.6.3], so I patched some upstream files in addition, and changed the \"disable commentator\" patch.",
    "created_at": "2012-04-08T01:11:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142915",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:16" align="right">comment:16</div>

For the record: I've updated the LinBox spkg at #12762, now also adding an `spkg-check` script; the test suite wouldn't have built with GCC 4.7.0 (even with `-fpermissive`) [nor with 4.6.3], so I patched some upstream files in addition, and changed the "disable commentator" patch.



---

archive/issue_comments_142916.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,4 +5,7 @@\n * Givaro: #12761\n * PolyBoRi: #12750, #12655\n * MPIR on ia64 (Itanium): #12765 (GCC bug) -- #11616 also provides an MPIR 2.**4.0**.p2 spkg working around this.\n+* MPFR on ia64 (Itanium) -- same GCC bug; work-around: compile with `-O0 [-finline-functions -fschedule-insns]` -- Note that MPFR is also a prerequisite for building the GCC spkg.\n+* GMP-ECM, FLINT, NTL, PARI and zn_poly all fail to build on ia64 due to the same bug,\n+* R fails to build on ia64 during byte-compiling; seems to be a different issue, but same work-around works.\n * zlib on Solaris: #12800\n``````\n",
    "created_at": "2012-04-11T20:32:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142916",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,4 +5,7 @@
 * Givaro: #12761
 * PolyBoRi: #12750, #12655
 * MPIR on ia64 (Itanium): #12765 (GCC bug) -- #11616 also provides an MPIR 2.**4.0**.p2 spkg working around this.
+* MPFR on ia64 (Itanium) -- same GCC bug; work-around: compile with `-O0 [-finline-functions -fschedule-insns]` -- Note that MPFR is also a prerequisite for building the GCC spkg.
+* GMP-ECM, FLINT, NTL, PARI and zn_poly all fail to build on ia64 due to the same bug,
+* R fails to build on ia64 during byte-compiling; seems to be a different issue, but same work-around works.
 * zlib on Solaris: #12800
``````




---

archive/issue_comments_142917.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,11 +1,13 @@\n-Sage 5.0.beta10 fails to build using GCC 4.7.0 on Skynet/eno and other Linux systems.\n+Sage 5.0.beta10 fails to build using GCC 4.7.0 on Skynet/eno and other Linux systems, for different reasons.\n \n-* LinBox: #12762\n * GFan: #12760\n * Givaro: #12761\n+* LinBox: #12762\n * PolyBoRi: #12750, #12655\n * MPIR on ia64 (Itanium): #12765 (GCC bug) -- #11616 also provides an MPIR 2.**4.0**.p2 spkg working around this.\n * MPFR on ia64 (Itanium) -- same GCC bug; work-around: compile with `-O0 [-finline-functions -fschedule-insns]` -- Note that MPFR is also a prerequisite for building the GCC spkg.\n * GMP-ECM, FLINT, NTL, PARI and zn_poly all fail to build on ia64 due to the same bug,\n * R fails to build on ia64 during byte-compiling; seems to be a different issue, but same work-around works.\n+* Two files (`compat` and `linear`) of PARI's test suite fail due to segfaults when compiling with `-O3`/`-O2`/`-O1`, at least on Linux x86_64.\n * zlib on Solaris: #12800\n+\n``````\n",
    "created_at": "2012-04-12T13:29:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142917",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,11 +1,13 @@
-Sage 5.0.beta10 fails to build using GCC 4.7.0 on Skynet/eno and other Linux systems.
+Sage 5.0.beta10 fails to build using GCC 4.7.0 on Skynet/eno and other Linux systems, for different reasons.
 
-* LinBox: #12762
 * GFan: #12760
 * Givaro: #12761
+* LinBox: #12762
 * PolyBoRi: #12750, #12655
 * MPIR on ia64 (Itanium): #12765 (GCC bug) -- #11616 also provides an MPIR 2.**4.0**.p2 spkg working around this.
 * MPFR on ia64 (Itanium) -- same GCC bug; work-around: compile with `-O0 [-finline-functions -fschedule-insns]` -- Note that MPFR is also a prerequisite for building the GCC spkg.
 * GMP-ECM, FLINT, NTL, PARI and zn_poly all fail to build on ia64 due to the same bug,
 * R fails to build on ia64 during byte-compiling; seems to be a different issue, but same work-around works.
+* Two files (`compat` and `linear`) of PARI's test suite fail due to segfaults when compiling with `-O3`/`-O2`/`-O1`, at least on Linux x86_64.
 * zlib on Solaris: #12800
+
``````




---

archive/issue_comments_142918.json:
```json
{
    "body": "Changed keywords from **GCC 4.7.0 C++11** to **GCC 4.7.0 C++11 -fpermissive compiler bugs**",
    "created_at": "2012-04-12T13:29:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142918",
    "user": "https://github.com/nexttime"
}
```

Changed keywords from **GCC 4.7.0 C++11** to **GCC 4.7.0 C++11 -fpermissive compiler bugs**



---

archive/issue_comments_142919.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,8 +4,8 @@\n * Givaro: #12761\n * LinBox: #12762\n * PolyBoRi: #12750, #12655\n-* MPIR on ia64 (Itanium): #12765 (GCC bug) -- #11616 also provides an MPIR 2.**4.0**.p2 spkg working around this.\n-* MPFR on ia64 (Itanium) -- same GCC bug; work-around: compile with `-O0 [-finline-functions -fschedule-insns]` -- Note that MPFR is also a prerequisite for building the GCC spkg.\n+* MPIR on ia64 (Itanium): #12765 (GCC bug) -- #11616 also provides an MPIR 2.**4.0**.p3 spkg working around this.\n+* MPFR on ia64 (Itanium): #12837 (same GCC bug) -- Note that MPFR is also a prerequisite for building the GCC spkg.\n * GMP-ECM, FLINT, NTL, PARI and zn_poly all fail to build on ia64 due to the same bug,\n * R fails to build on ia64 during byte-compiling; seems to be a different issue, but same work-around works.\n * Two files (`compat` and `linear`) of PARI's test suite fail due to segfaults when compiling with `-O3`/`-O2`/`-O1`, at least on Linux x86_64.\n``````\n",
    "created_at": "2012-04-13T08:33:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142919",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,8 +4,8 @@
 * Givaro: #12761
 * LinBox: #12762
 * PolyBoRi: #12750, #12655
-* MPIR on ia64 (Itanium): #12765 (GCC bug) -- #11616 also provides an MPIR 2.**4.0**.p2 spkg working around this.
-* MPFR on ia64 (Itanium) -- same GCC bug; work-around: compile with `-O0 [-finline-functions -fschedule-insns]` -- Note that MPFR is also a prerequisite for building the GCC spkg.
+* MPIR on ia64 (Itanium): #12765 (GCC bug) -- #11616 also provides an MPIR 2.**4.0**.p3 spkg working around this.
+* MPFR on ia64 (Itanium): #12837 (same GCC bug) -- Note that MPFR is also a prerequisite for building the GCC spkg.
 * GMP-ECM, FLINT, NTL, PARI and zn_poly all fail to build on ia64 due to the same bug,
 * R fails to build on ia64 during byte-compiling; seems to be a different issue, but same work-around works.
 * Two files (`compat` and `linear`) of PARI's test suite fail due to segfaults when compiling with `-O3`/`-O2`/`-O1`, at least on Linux x86_64.
``````




---

archive/issue_comments_142920.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,7 +6,7 @@\n * PolyBoRi: #12750, #12655\n * MPIR on ia64 (Itanium): #12765 (GCC bug) -- #11616 also provides an MPIR 2.**4.0**.p3 spkg working around this.\n * MPFR on ia64 (Itanium): #12837 (same GCC bug) -- Note that MPFR is also a prerequisite for building the GCC spkg.\n-* GMP-ECM, FLINT, NTL, PARI and zn_poly all fail to build on ia64 due to the same bug,\n+* GMP-ECM, FLINT, NTL, PARI and zn_poly (as well as the Sage library) all fail to build on ia64 due to the same bug,\n * R fails to build on ia64 during byte-compiling; seems to be a different issue, but same work-around works.\n * Two files (`compat` and `linear`) of PARI's test suite fail due to segfaults when compiling with `-O3`/`-O2`/`-O1`, at least on Linux x86_64.\n * zlib on Solaris: #12800\n``````\n",
    "created_at": "2012-04-13T16:15:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142920",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,7 +6,7 @@
 * PolyBoRi: #12750, #12655
 * MPIR on ia64 (Itanium): #12765 (GCC bug) -- #11616 also provides an MPIR 2.**4.0**.p3 spkg working around this.
 * MPFR on ia64 (Itanium): #12837 (same GCC bug) -- Note that MPFR is also a prerequisite for building the GCC spkg.
-* GMP-ECM, FLINT, NTL, PARI and zn_poly all fail to build on ia64 due to the same bug,
+* GMP-ECM, FLINT, NTL, PARI and zn_poly (as well as the Sage library) all fail to build on ia64 due to the same bug,
 * R fails to build on ia64 during byte-compiling; seems to be a different issue, but same work-around works.
 * Two files (`compat` and `linear`) of PARI's test suite fail due to segfaults when compiling with `-O3`/`-O2`/`-O1`, at least on Linux x86_64.
 * zlib on Solaris: #12800
``````




---

archive/issue_comments_142921.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nI get a build error for the (old) eclib spkg on **Solaris** [SPARC, 32-bit]:\n\n```\n...\ng++ -c -fPIC -g -O2 -DNEW_OP_ORDER -DUSE_PARI_FACTORING -DNTL_ALL -I/home/leif/Sage/release/build/mark2/sage-5.0.beta13-gcc-4.7.0/local/include -I/home/leif/Sage/release/build/mark2/sage-5.0.beta13-gcc-4.7.0/local/include arith.cc -o arith_n.o\nIn file included from arith.cc:24:0:\narith.h: In function 'int div(long int, long int)':\narith.h:182:39: error: 'int div(long int, long int)' conflicts with previous using declaration 'std::ldiv_t std::div(long int, long int)'\nmake[3]: *** [arith_n.o] Error 1\nmake[3]: Leaving directory `/home/leif/Sage/release/build/mark2/sage-5.0.beta13-gcc-4.7.0/spkg/build/eclib-20100711.p0/src/procs'\nmake[2]: *** [all] Error 2\nmake[2]: Leaving directory `/home/leif/Sage/release/build/mark2/sage-5.0.beta13-gcc-4.7.0/spkg/build/eclib-20100711.p0/src'\nError building eclib\n\nreal    0m9.843s\nuser    0m5.982s\nsys     0m0.474s\n************************************************************************\nError installing package eclib-20100711.p0\n************************************************************************\n```\n\nHaven't yet tried the new autotools-enabled upstream package; a new *spkg* should be posted soon on #10993, hopefully...",
    "created_at": "2012-04-15T11:05:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142921",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:21" align="right">comment:21</div>

I get a build error for the (old) eclib spkg on **Solaris** [SPARC, 32-bit]:

```
...
g++ -c -fPIC -g -O2 -DNEW_OP_ORDER -DUSE_PARI_FACTORING -DNTL_ALL -I/home/leif/Sage/release/build/mark2/sage-5.0.beta13-gcc-4.7.0/local/include -I/home/leif/Sage/release/build/mark2/sage-5.0.beta13-gcc-4.7.0/local/include arith.cc -o arith_n.o
In file included from arith.cc:24:0:
arith.h: In function 'int div(long int, long int)':
arith.h:182:39: error: 'int div(long int, long int)' conflicts with previous using declaration 'std::ldiv_t std::div(long int, long int)'
make[3]: *** [arith_n.o] Error 1
make[3]: Leaving directory `/home/leif/Sage/release/build/mark2/sage-5.0.beta13-gcc-4.7.0/spkg/build/eclib-20100711.p0/src/procs'
make[2]: *** [all] Error 2
make[2]: Leaving directory `/home/leif/Sage/release/build/mark2/sage-5.0.beta13-gcc-4.7.0/spkg/build/eclib-20100711.p0/src'
Error building eclib

real    0m9.843s
user    0m5.982s
sys     0m0.474s
************************************************************************
Error installing package eclib-20100711.p0
************************************************************************
```

Haven't yet tried the new autotools-enabled upstream package; a new *spkg* should be posted soon on #10993, hopefully...



---

archive/issue_comments_142922.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@nexttime](#comment:21):\n> I get a build error for the (old) eclib spkg on **Solaris** [SPARC, 32-bit]:\n> \n> ```\n> ...\n> arith.h:182:39: error: 'int div(long int, long int)' conflicts with previous using declaration 'std::ldiv_t std::div(long int, long int)'\n> ...\n> ```\n> \n> Haven't yet tried the new autotools-enabled upstream package; a new *spkg* should be posted soon on #10993, hopefully...\n\nIt fails in the same way; yet I have no idea why this only fails on Solaris, as AFAIK\n\n```C\nstd::ldiv_t std::div(long int, long int)\n```\n\nis pretty C++98.  Maybe on Solaris just some `using namespace std;` gets pulled in, which isn't present on other systems.",
    "created_at": "2012-04-15T12:37:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142922",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@nexttime](#comment:21):
> I get a build error for the (old) eclib spkg on **Solaris** [SPARC, 32-bit]:
> 
> ```
> ...
> arith.h:182:39: error: 'int div(long int, long int)' conflicts with previous using declaration 'std::ldiv_t std::div(long int, long int)'
> ...
> ```
> 
> Haven't yet tried the new autotools-enabled upstream package; a new *spkg* should be posted soon on #10993, hopefully...

It fails in the same way; yet I have no idea why this only fails on Solaris, as AFAIK

```C
std::ldiv_t std::div(long int, long int)
```

is pretty C++98.  Maybe on Solaris just some `using namespace std;` gets pulled in, which isn't present on other systems.



---

archive/issue_comments_142923.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@nexttime](#comment:22):\n> Replying to [@nexttime](#comment:21):\n> > I get a build error for the (old) eclib spkg on **Solaris** [SPARC, 32-bit]:\n> > \n> > ```\n> > ...\n> > arith.h:182:39: error: 'int div(long int, long int)' conflicts with previous using declaration 'std::ldiv_t std::div(long int, long int)'\n> > ...\n> > ```\n\n> [...] I have no idea why this only fails on Solaris, as AFAIK\n> \n> ```C\n> std::ldiv_t std::div(long int, long int)\n> ```\n> \n> is pretty C++98.  Maybe on Solaris just some `using namespace std;` gets pulled in, which isn't present on other systems.\n\nApparently Solaris' `/usr/include/stdlib.h` is the culprit:\n\n```c\n/*\n * Copyright 2004 Sun Microsystems, Inc.  All rights reserved.\n * Use is subject to license terms.\n */\n\n/*      Copyright (c) 1988 AT&T */\n/*        All Rights Reserved   */\n\n/*      THIS IS UNPUBLISHED PROPRIETARY SOURCE CODE OF AT&T     */\n/*      The copyright notice above does not evidence any        */\n/*      actual or intended publication of such source code.     */\n\n#ifndef _STDLIB_H\n#define _STDLIB_H\n\n#pragma ident   \"@(#)stdlib.h   1.51    04/06/30 SMI\"   /* SVr4.0 1.22  */\n\n#include <iso/stdlib_iso.h>\n#include <iso/stdlib_c99.h>\n\n#if defined(__EXTENSIONS__) || defined(_XPG4)\n#include <sys/wait.h>\n#endif\n\n/*\n * Allow global visibility for symbols defined in\n * C++ \"std\" namespace in <iso/stdlib_iso.h>.\n */\n#if __cplusplus >= 199711L\n...\nusing std::div;\n...\n```",
    "created_at": "2012-04-15T12:54:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142923",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@nexttime](#comment:22):
> Replying to [@nexttime](#comment:21):
> > I get a build error for the (old) eclib spkg on **Solaris** [SPARC, 32-bit]:
> > 
> > ```
> > ...
> > arith.h:182:39: error: 'int div(long int, long int)' conflicts with previous using declaration 'std::ldiv_t std::div(long int, long int)'
> > ...
> > ```

> [...] I have no idea why this only fails on Solaris, as AFAIK
> 
> ```C
> std::ldiv_t std::div(long int, long int)
> ```
> 
> is pretty C++98.  Maybe on Solaris just some `using namespace std;` gets pulled in, which isn't present on other systems.

Apparently Solaris' `/usr/include/stdlib.h` is the culprit:

```c
/*
 * Copyright 2004 Sun Microsystems, Inc.  All rights reserved.
 * Use is subject to license terms.
 */

/*      Copyright (c) 1988 AT&T */
/*        All Rights Reserved   */

/*      THIS IS UNPUBLISHED PROPRIETARY SOURCE CODE OF AT&T     */
/*      The copyright notice above does not evidence any        */
/*      actual or intended publication of such source code.     */

#ifndef _STDLIB_H
#define _STDLIB_H

#pragma ident   "@(#)stdlib.h   1.51    04/06/30 SMI"   /* SVr4.0 1.22  */

#include <iso/stdlib_iso.h>
#include <iso/stdlib_c99.h>

#if defined(__EXTENSIONS__) || defined(_XPG4)
#include <sys/wait.h>
#endif

/*
 * Allow global visibility for symbols defined in
 * C++ "std" namespace in <iso/stdlib_iso.h>.
 */
#if __cplusplus >= 199711L
...
using std::div;
...
```



---

archive/issue_comments_142924.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nMinimal example:\n\n```c\n// div.cc\n\n#include <cstdlib>\n\nint div(long a, long b)\n{\n  return 0;\n}\n```\nThis fails with GCC 4.7.0 on Solaris, while it doesn't on (e.g.) Linux.",
    "created_at": "2012-04-15T13:20:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142924",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:24" align="right">comment:24</div>

Minimal example:

```c
// div.cc

#include <cstdlib>

int div(long a, long b)
{
  return 0;
}
```
This fails with GCC 4.7.0 on Solaris, while it doesn't on (e.g.) Linux.



---

archive/issue_comments_142925.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,4 +10,5 @@\n * R fails to build on ia64 during byte-compiling; seems to be a different issue, but same work-around works.\n * Two files (`compat` and `linear`) of PARI's test suite fail due to segfaults when compiling with `-O3`/`-O2`/`-O1`, at least on Linux x86_64.\n * zlib on Solaris: #12800\n-\n+* eclib on Solaris (see comments below; this seems to be a Solaris header issue)\n+ \n``````\n",
    "created_at": "2012-04-15T13:22:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142925",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,4 +10,5 @@
 * R fails to build on ia64 during byte-compiling; seems to be a different issue, but same work-around works.
 * Two files (`compat` and `linear`) of PARI's test suite fail due to segfaults when compiling with `-O3`/`-O2`/`-O1`, at least on Linux x86_64.
 * zlib on Solaris: #12800
-
+* eclib on Solaris (see comments below; this seems to be a Solaris header issue)
+ 
``````




---

archive/issue_comments_142926.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,5 +10,5 @@\n * R fails to build on ia64 during byte-compiling; seems to be a different issue, but same work-around works.\n * Two files (`compat` and `linear`) of PARI's test suite fail due to segfaults when compiling with `-O3`/`-O2`/`-O1`, at least on Linux x86_64.\n * zlib on Solaris: #12800\n-* eclib on Solaris (see comments below; this seems to be a Solaris header issue)\n- \n+* eclib on Solaris (see comments below; this is a Solaris header issue, will be fixed in a new spkg at #10993)\n+\n``````\n",
    "created_at": "2012-04-15T16:57:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142926",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,5 +10,5 @@
 * R fails to build on ia64 during byte-compiling; seems to be a different issue, but same work-around works.
 * Two files (`compat` and `linear`) of PARI's test suite fail due to segfaults when compiling with `-O3`/`-O2`/`-O1`, at least on Linux x86_64.
 * zlib on Solaris: #12800
-* eclib on Solaris (see comments below; this seems to be a Solaris header issue)
- 
+* eclib on Solaris (see comments below; this is a Solaris header issue, will be fixed in a new spkg at #10993)
+
``````




---

archive/issue_comments_142927.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@nexttime](#comment:22):\n> Replying to [@nexttime](#comment:21):\n> > I get a build error for the (old) eclib spkg on **Solaris** [SPARC, 32-bit]:\n> > \n> > ```\n> > ...\n> > arith.h:182:39: error: 'int div(long int, long int)' conflicts with previous using declaration 'std::ldiv_t std::div(long int, long int)'\n> > ...\n> > ```\n> > \n> > Haven't yet tried the new autotools-enabled upstream package; a new *spkg* should be posted soon on #10993, hopefully...\n\n> \n> It fails in the same way; yet I have no idea why this only fails on Solaris, as AFAIK\n> \n> ```C\n> std::ldiv_t std::div(long int, long int)\n> ```\n> \n> is pretty C++98.  Maybe on Solaris just some `using namespace std;` gets pulled in, which isn't present on other systems.\n\nNow fixed in the new upstream tarball (eclib-2012-04-15.tar.gz), by renaming the function.  (See #10993.)",
    "created_at": "2012-04-15T16:57:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142927",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@nexttime](#comment:22):
> Replying to [@nexttime](#comment:21):
> > I get a build error for the (old) eclib spkg on **Solaris** [SPARC, 32-bit]:
> > 
> > ```
> > ...
> > arith.h:182:39: error: 'int div(long int, long int)' conflicts with previous using declaration 'std::ldiv_t std::div(long int, long int)'
> > ...
> > ```
> > 
> > Haven't yet tried the new autotools-enabled upstream package; a new *spkg* should be posted soon on #10993, hopefully...

> 
> It fails in the same way; yet I have no idea why this only fails on Solaris, as AFAIK
> 
> ```C
> std::ldiv_t std::div(long int, long int)
> ```
> 
> is pretty C++98.  Maybe on Solaris just some `using namespace std;` gets pulled in, which isn't present on other systems.

Now fixed in the new upstream tarball (eclib-2012-04-15.tar.gz), by renaming the function.  (See #10993.)



---

archive/issue_comments_142928.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,7 +8,7 @@\n * MPFR on ia64 (Itanium): #12837 (same GCC bug) -- Note that MPFR is also a prerequisite for building the GCC spkg.\n * GMP-ECM, FLINT, NTL, PARI and zn_poly (as well as the Sage library) all fail to build on ia64 due to the same bug,\n * R fails to build on ia64 during byte-compiling; seems to be a different issue, but same work-around works.\n-* Two files (`compat` and `linear`) of PARI's test suite fail due to segfaults when compiling with `-O3`/`-O2`/`-O1`, at least on Linux x86_64.\n+* Two files (`compat` and `linear`) of PARI's test suite fail due to segfaults when compiling with `-O3`/`-O2`/`-O1`, at least on Linux x86 and x86_64.\n * zlib on Solaris: #12800\n * eclib on Solaris (see comments below; this is a Solaris header issue, will be fixed in a new spkg at #10993)\n \n``````\n",
    "created_at": "2012-04-16T11:50:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142928",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,7 +8,7 @@
 * MPFR on ia64 (Itanium): #12837 (same GCC bug) -- Note that MPFR is also a prerequisite for building the GCC spkg.
 * GMP-ECM, FLINT, NTL, PARI and zn_poly (as well as the Sage library) all fail to build on ia64 due to the same bug,
 * R fails to build on ia64 during byte-compiling; seems to be a different issue, but same work-around works.
-* Two files (`compat` and `linear`) of PARI's test suite fail due to segfaults when compiling with `-O3`/`-O2`/`-O1`, at least on Linux x86_64.
+* Two files (`compat` and `linear`) of PARI's test suite fail due to segfaults when compiling with `-O3`/`-O2`/`-O1`, at least on Linux x86 and x86_64.
 * zlib on Solaris: #12800
 * eclib on Solaris (see comments below; this is a Solaris header issue, will be fixed in a new spkg at #10993)
 
``````




---

archive/issue_comments_142929.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nAdded a reference to the GMP-ECM spkg ticket working around the bug on ia64.",
    "created_at": "2012-04-16T23:05:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142929",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:28" align="right">comment:28</div>

Added a reference to the GMP-ECM spkg ticket working around the bug on ia64.



---

archive/issue_comments_142930.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,7 +6,8 @@\n * PolyBoRi: #12750, #12655\n * MPIR on ia64 (Itanium): #12765 (GCC bug) -- #11616 also provides an MPIR 2.**4.0**.p3 spkg working around this.\n * MPFR on ia64 (Itanium): #12837 (same GCC bug) -- Note that MPFR is also a prerequisite for building the GCC spkg.\n-* GMP-ECM, FLINT, NTL, PARI and zn_poly (as well as the Sage library) all fail to build on ia64 due to the same bug,\n+* GMP-ECM on ia64 (Itanium): #12830 (same GCC bug)\n+* FLINT, NTL, PARI and zn_poly (as well as the Sage library) all fail to build on ia64 due to the same bug,\n * R fails to build on ia64 during byte-compiling; seems to be a different issue, but same work-around works.\n * Two files (`compat` and `linear`) of PARI's test suite fail due to segfaults when compiling with `-O3`/`-O2`/`-O1`, at least on Linux x86 and x86_64.\n * zlib on Solaris: #12800\n``````\n",
    "created_at": "2012-04-16T23:05:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142930",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,7 +6,8 @@
 * PolyBoRi: #12750, #12655
 * MPIR on ia64 (Itanium): #12765 (GCC bug) -- #11616 also provides an MPIR 2.**4.0**.p3 spkg working around this.
 * MPFR on ia64 (Itanium): #12837 (same GCC bug) -- Note that MPFR is also a prerequisite for building the GCC spkg.
-* GMP-ECM, FLINT, NTL, PARI and zn_poly (as well as the Sage library) all fail to build on ia64 due to the same bug,
+* GMP-ECM on ia64 (Itanium): #12830 (same GCC bug)
+* FLINT, NTL, PARI and zn_poly (as well as the Sage library) all fail to build on ia64 due to the same bug,
 * R fails to build on ia64 during byte-compiling; seems to be a different issue, but same work-around works.
 * Two files (`compat` and `linear`) of PARI's test suite fail due to segfaults when compiling with `-O3`/`-O2`/`-O1`, at least on Linux x86 and x86_64.
 * zlib on Solaris: #12800
``````




---

archive/issue_comments_142931.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -12,4 +12,5 @@\n * Two files (`compat` and `linear`) of PARI's test suite fail due to segfaults when compiling with `-O3`/`-O2`/`-O1`, at least on Linux x86 and x86_64.\n * zlib on Solaris: #12800\n * eclib on Solaris (see comments below; this is a Solaris header issue, will be fixed in a new spkg at #10993)\n+* FLINTQS on Solaris: #12855 (Also a subtle Solaris header issue.)\n \n``````\n",
    "created_at": "2012-04-18T01:35:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142931",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -12,4 +12,5 @@
 * Two files (`compat` and `linear`) of PARI's test suite fail due to segfaults when compiling with `-O3`/`-O2`/`-O1`, at least on Linux x86 and x86_64.
 * zlib on Solaris: #12800
 * eclib on Solaris (see comments below; this is a Solaris header issue, will be fixed in a new spkg at #10993)
+* FLINTQS on Solaris: #12855 (Also a subtle Solaris header issue.)
 
``````




---

archive/issue_comments_142932.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -11,6 +11,6 @@\n * R fails to build on ia64 during byte-compiling; seems to be a different issue, but same work-around works.\n * Two files (`compat` and `linear`) of PARI's test suite fail due to segfaults when compiling with `-O3`/`-O2`/`-O1`, at least on Linux x86 and x86_64.\n * zlib on Solaris: #12800\n-* eclib on Solaris (see comments below; this is a Solaris header issue, will be fixed in a new spkg at #10993)\n+* eclib on Solaris (See comments below; this is a Solaris header issue, fixed by a new spkg at #10993.)\n * FLINTQS on Solaris: #12855 (Also a subtle Solaris header issue.)\n \n``````\n",
    "created_at": "2012-04-18T01:39:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142932",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -11,6 +11,6 @@
 * R fails to build on ia64 during byte-compiling; seems to be a different issue, but same work-around works.
 * Two files (`compat` and `linear`) of PARI's test suite fail due to segfaults when compiling with `-O3`/`-O2`/`-O1`, at least on Linux x86 and x86_64.
 * zlib on Solaris: #12800
-* eclib on Solaris (see comments below; this is a Solaris header issue, will be fixed in a new spkg at #10993)
+* eclib on Solaris (See comments below; this is a Solaris header issue, fixed by a new spkg at #10993.)
 * FLINTQS on Solaris: #12855 (Also a subtle Solaris header issue.)
 
``````




---

archive/issue_comments_142933.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nReplying to [@nexttime](#comment:23):\n> Replying to [@nexttime](#comment:22):\n> > Replying to [@nexttime](#comment:21):\n> > > I get a build error for the (old) eclib spkg on **Solaris** [SPARC, 32-bit]:\n> > > \n> > > ```\n> > > ...\n> > > arith.h:182:39: error: 'int div(long int, long int)' conflicts with previous using declaration 'std::ldiv_t std::div(long int, long int)'\n> > > ...\n> > > ```\n\n> > [...] I have no idea why this only fails on Solaris, as AFAIK\n> > \n> > ```C\n> > std::ldiv_t std::div(long int, long int)\n> > ```\n> > \n> > is pretty C++98.  Maybe on Solaris just some `using namespace std;` gets pulled in, which isn't present on other systems.\n\n> \n> Apparently Solaris' `/usr/include/stdlib.h` is the culprit [...]\n\nSee #12855 for a similar issue with the FLINTQS spkg, showing up as an ambiguous call of `log()` due to definitions from `math.h` (which puts all overloaded functions also into the *global* namespace).",
    "created_at": "2012-04-18T01:50:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142933",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:31" align="right">comment:31</div>

Replying to [@nexttime](#comment:23):
> Replying to [@nexttime](#comment:22):
> > Replying to [@nexttime](#comment:21):
> > > I get a build error for the (old) eclib spkg on **Solaris** [SPARC, 32-bit]:
> > > 
> > > ```
> > > ...
> > > arith.h:182:39: error: 'int div(long int, long int)' conflicts with previous using declaration 'std::ldiv_t std::div(long int, long int)'
> > > ...
> > > ```

> > [...] I have no idea why this only fails on Solaris, as AFAIK
> > 
> > ```C
> > std::ldiv_t std::div(long int, long int)
> > ```
> > 
> > is pretty C++98.  Maybe on Solaris just some `using namespace std;` gets pulled in, which isn't present on other systems.

> 
> Apparently Solaris' `/usr/include/stdlib.h` is the culprit [...]

See #12855 for a similar issue with the FLINTQS spkg, showing up as an ambiguous call of `log()` due to definitions from `math.h` (which puts all overloaded functions also into the *global* namespace).



---

archive/issue_comments_142934.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nPerhaps doesn't really belong to this ticket, but now also PPL fails to build -- more precisely *install* -- (with GCC 4.7.0) on Solaris (SPARC; mark2):\n\n```\nlibtool: install: strip --strip-debug /home/leif/Sage/release/build/mark2/sage-5.0.beta13-gcc-4.7.0/local/lib/libpwl.a\nBFD: /home/leif/Sage/release/build/mark2/sage-5.0.beta13-gcc-4.7.0/local/lib/libpwl.a(Watchdog.o): no group info for section .group%_ZN22Parma_Watchdog_Library7HandlerD5Ev\nBFD: /home/leif/Sage/release/build/mark2/sage-5.0.beta13-gcc-4.7.0/local/lib/libpwl.a(Watchdog.o): no group info for section .group%_ZNK22Parma_Watchdog_Library16Handler_Function3actEv\nBFD: /home/leif/Sage/release/build/mark2/sage-5.0.beta13-gcc-4.7.0/local/lib/libpwl.a(Watchdog.o): no group info for section .group%_ZN22Parma_Watchdog_Library16Handler_FunctionD1Ev\nBFD: /home/leif/Sage/release/build/mark2/sage-5.0.beta13-gcc-4.7.0/local/lib/libpwl.a(Watchdog.o): no group info for section .group%_ZN22Parma_Watchdog_Library16Handler_FunctionD0Ev\nBFD: /home/leif/Sage/release/build/mark2/sage-5.0.beta13-gcc-4.7.0/local/lib/libpwl.a(Watchdog.o): no group info for section .group%_ZN22Parma_Watchdog_Library7HandlerD0Ev\nBFD: /home/leif/Sage/release/build/mark2/sage-5.0.beta13-gcc-4.7.0/local/lib/libpwl.a(Watchdog.o): no group info for section .group%_ZStplIcSt11char_traitsIcESaIcEESbIT_T0_T1_ERKS6_PKS3_\nBFD: /home/leif/Sage/release/build/mark2/sage-5.0.beta13-gcc-4.7.0/local/lib/libpwl.a(Watchdog.o): no group info for section .group%_ZN22Parma_Watchdog_Library4InitC5Ev\nBFD: /home/leif/Sage/release/build/mark2/sage-5.0.beta13-gcc-4.7.0/local/lib/libpwl.a(Watchdog.o): no group info for section .group%_ZN22Parma_Watchdog_Library5EListINS_15Pending_ElementINS_4TimeEEEED5Ev\nBFD: /home/leif/Sage/release/build/mark2/sage-5.0.beta13-gcc-4.7.0/local/lib/libpwl.a(Watchdog.o): no group info for section .group%_ZTSN22Parma_Watchdog_Library7HandlerE\nBFD: /home/leif/Sage/release/build/mark2/sage-5.0.beta13-gcc-4.7.0/local/lib/libpwl.a(Watchdog.o): no group info for section .group%_ZTIN22Parma_Watchdog_Library7HandlerE\nBFD: /home/leif/Sage/release/build/mark2/sage-5.0.beta13-gcc-4.7.0/local/lib/libpwl.a(Watchdog.o): no group info for section .group%_ZTSN22Parma_Watchdog_Library16Handler_FunctionE\nBFD: /home/leif/Sage/release/build/mark2/sage-5.0.beta13-gcc-4.7.0/local/lib/libpwl.a(Watchdog.o): no group info for section .group%_ZTIN22Parma_Watchdog_Library16Handler_FunctionE\nBFD: /home/leif/Sage/release/build/mark2/sage-5.0.beta13-gcc-4.7.0/local/lib/libpwl.a(Watchdog.o): no group info for section .group%_ZTVN22Parma_Watchdog_Library7HandlerE\nBFD: /home/leif/Sage/release/build/mark2/sage-5.0.beta13-gcc-4.7.0/local/lib/libpwl.a(Watchdog.o): no group info for section .group%_ZTVN22Parma_Watchdog_Library16Handler_FunctionE\nBFD: BFD (GNU Binutils) 2.22 internal error, aborting at ../../binutils-2.22/bfd/elf.c line 2905 in bfd_elf_set_group_contents\n\nBFD: Please report this bug.\n```",
    "created_at": "2012-04-18T02:25:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142934",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:32" align="right">comment:32</div>

Perhaps doesn't really belong to this ticket, but now also PPL fails to build -- more precisely *install* -- (with GCC 4.7.0) on Solaris (SPARC; mark2):

```
libtool: install: strip --strip-debug /home/leif/Sage/release/build/mark2/sage-5.0.beta13-gcc-4.7.0/local/lib/libpwl.a
BFD: /home/leif/Sage/release/build/mark2/sage-5.0.beta13-gcc-4.7.0/local/lib/libpwl.a(Watchdog.o): no group info for section .group%_ZN22Parma_Watchdog_Library7HandlerD5Ev
BFD: /home/leif/Sage/release/build/mark2/sage-5.0.beta13-gcc-4.7.0/local/lib/libpwl.a(Watchdog.o): no group info for section .group%_ZNK22Parma_Watchdog_Library16Handler_Function3actEv
BFD: /home/leif/Sage/release/build/mark2/sage-5.0.beta13-gcc-4.7.0/local/lib/libpwl.a(Watchdog.o): no group info for section .group%_ZN22Parma_Watchdog_Library16Handler_FunctionD1Ev
BFD: /home/leif/Sage/release/build/mark2/sage-5.0.beta13-gcc-4.7.0/local/lib/libpwl.a(Watchdog.o): no group info for section .group%_ZN22Parma_Watchdog_Library16Handler_FunctionD0Ev
BFD: /home/leif/Sage/release/build/mark2/sage-5.0.beta13-gcc-4.7.0/local/lib/libpwl.a(Watchdog.o): no group info for section .group%_ZN22Parma_Watchdog_Library7HandlerD0Ev
BFD: /home/leif/Sage/release/build/mark2/sage-5.0.beta13-gcc-4.7.0/local/lib/libpwl.a(Watchdog.o): no group info for section .group%_ZStplIcSt11char_traitsIcESaIcEESbIT_T0_T1_ERKS6_PKS3_
BFD: /home/leif/Sage/release/build/mark2/sage-5.0.beta13-gcc-4.7.0/local/lib/libpwl.a(Watchdog.o): no group info for section .group%_ZN22Parma_Watchdog_Library4InitC5Ev
BFD: /home/leif/Sage/release/build/mark2/sage-5.0.beta13-gcc-4.7.0/local/lib/libpwl.a(Watchdog.o): no group info for section .group%_ZN22Parma_Watchdog_Library5EListINS_15Pending_ElementINS_4TimeEEEED5Ev
BFD: /home/leif/Sage/release/build/mark2/sage-5.0.beta13-gcc-4.7.0/local/lib/libpwl.a(Watchdog.o): no group info for section .group%_ZTSN22Parma_Watchdog_Library7HandlerE
BFD: /home/leif/Sage/release/build/mark2/sage-5.0.beta13-gcc-4.7.0/local/lib/libpwl.a(Watchdog.o): no group info for section .group%_ZTIN22Parma_Watchdog_Library7HandlerE
BFD: /home/leif/Sage/release/build/mark2/sage-5.0.beta13-gcc-4.7.0/local/lib/libpwl.a(Watchdog.o): no group info for section .group%_ZTSN22Parma_Watchdog_Library16Handler_FunctionE
BFD: /home/leif/Sage/release/build/mark2/sage-5.0.beta13-gcc-4.7.0/local/lib/libpwl.a(Watchdog.o): no group info for section .group%_ZTIN22Parma_Watchdog_Library16Handler_FunctionE
BFD: /home/leif/Sage/release/build/mark2/sage-5.0.beta13-gcc-4.7.0/local/lib/libpwl.a(Watchdog.o): no group info for section .group%_ZTVN22Parma_Watchdog_Library7HandlerE
BFD: /home/leif/Sage/release/build/mark2/sage-5.0.beta13-gcc-4.7.0/local/lib/libpwl.a(Watchdog.o): no group info for section .group%_ZTVN22Parma_Watchdog_Library16Handler_FunctionE
BFD: BFD (GNU Binutils) 2.22 internal error, aborting at ../../binutils-2.22/bfd/elf.c line 2905 in bfd_elf_set_group_contents

BFD: Please report this bug.
```



---

archive/issue_comments_142935.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@nexttime](#comment:10):\n> Replying to [@nexttime](#comment:9):\n> > Replying to [@nexttime](#comment:5):\n> > > R now fails to build for me (when byte-compiling), interestingly only with *less* fancy GCC optimizations enabled.  (It did build with LTO and Graphite loop optimization enabled).\n\n> > \n> > This is *really* weird: R *does* build if I just in addition enable LTO... 8)\n\n> \n> ... and also passes its test suite with that.\n\nOn 32-bit Solaris SPARC (skynet machine mark2), R segfaults during byte-compiling package \"base\" when compiled with `-O3`; using `-O2` instead apparently works.\n\n(The setup -- when just sourcing `/usr/local/skynet_bash_profile` -- on the Solaris machines is currently quite broken anyway.  In addition, R 2.14.0 messes up `LD_LIBRARY_PATH` such that the dynamic linker picks up an incompatible [and totally outdated] version of `libgcc_s.so.1`, so `R` cannot be run, which of course breaks the build as well.  A work-around is to create a symbolic link to the proper version in e.g. `$SAGE_LOCAL/lib/`.)",
    "created_at": "2012-04-18T21:22:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142935",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@nexttime](#comment:10):
> Replying to [@nexttime](#comment:9):
> > Replying to [@nexttime](#comment:5):
> > > R now fails to build for me (when byte-compiling), interestingly only with *less* fancy GCC optimizations enabled.  (It did build with LTO and Graphite loop optimization enabled).

> > 
> > This is *really* weird: R *does* build if I just in addition enable LTO... 8)

> 
> ... and also passes its test suite with that.

On 32-bit Solaris SPARC (skynet machine mark2), R segfaults during byte-compiling package "base" when compiled with `-O3`; using `-O2` instead apparently works.

(The setup -- when just sourcing `/usr/local/skynet_bash_profile` -- on the Solaris machines is currently quite broken anyway.  In addition, R 2.14.0 messes up `LD_LIBRARY_PATH` such that the dynamic linker picks up an incompatible [and totally outdated] version of `libgcc_s.so.1`, so `R` cannot be run, which of course breaks the build as well.  A work-around is to create a symbolic link to the proper version in e.g. `$SAGE_LOCAL/lib/`.)



---

archive/issue_comments_142936.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,7 +8,7 @@\n * MPFR on ia64 (Itanium): #12837 (same GCC bug) -- Note that MPFR is also a prerequisite for building the GCC spkg.\n * GMP-ECM on ia64 (Itanium): #12830 (same GCC bug)\n * FLINT, NTL, PARI and zn_poly (as well as the Sage library) all fail to build on ia64 due to the same bug,\n-* R fails to build on ia64 during byte-compiling; seems to be a different issue, but same work-around works.\n+* R fails to build on ia64 during byte-compiling; seems to be a different issue, but same work-around works.  It also fails with `-O3` during byte-compiling on Solaris SPARC and Linux x86_64; on the former `-O2` works, on the latter somewhat surprisingly `-O3 -flto`.  (Cf. comments below.)\n * Two files (`compat` and `linear`) of PARI's test suite fail due to segfaults when compiling with `-O3`/`-O2`/`-O1`, at least on Linux x86 and x86_64.\n * zlib on Solaris: #12800\n * eclib on Solaris (See comments below; this is a Solaris header issue, fixed by a new spkg at #10993.)\n``````\n",
    "created_at": "2012-04-18T21:26:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142936",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,7 +8,7 @@
 * MPFR on ia64 (Itanium): #12837 (same GCC bug) -- Note that MPFR is also a prerequisite for building the GCC spkg.
 * GMP-ECM on ia64 (Itanium): #12830 (same GCC bug)
 * FLINT, NTL, PARI and zn_poly (as well as the Sage library) all fail to build on ia64 due to the same bug,
-* R fails to build on ia64 during byte-compiling; seems to be a different issue, but same work-around works.
+* R fails to build on ia64 during byte-compiling; seems to be a different issue, but same work-around works.  It also fails with `-O3` during byte-compiling on Solaris SPARC and Linux x86_64; on the former `-O2` works, on the latter somewhat surprisingly `-O3 -flto`.  (Cf. comments below.)
 * Two files (`compat` and `linear`) of PARI's test suite fail due to segfaults when compiling with `-O3`/`-O2`/`-O1`, at least on Linux x86 and x86_64.
 * zlib on Solaris: #12800
 * eclib on Solaris (See comments below; this is a Solaris header issue, fixed by a new spkg at #10993.)
``````




---

archive/issue_comments_142937.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nSince the GCC spkg \"fixes\" all of these except for MPIR and MPFR, this won't be a blocker.",
    "created_at": "2012-04-19T08:46:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142937",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:35" align="right">comment:35</div>

Since the GCC spkg "fixes" all of these except for MPIR and MPFR, this won't be a blocker.



---

archive/issue_events_175661.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-04-19T08:46:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "label": "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p: 1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12751#event-175661"
}
```



---

archive/issue_events_175662.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-04-19T08:46:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12751#event-175662"
}
```



---

archive/issue_comments_142938.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,8 +6,9 @@\n * PolyBoRi: #12750, #12655\n * MPIR on ia64 (Itanium): #12765 (GCC bug) -- #11616 also provides an MPIR 2.**4.0**.p3 spkg working around this.\n * MPFR on ia64 (Itanium): #12837 (same GCC bug) -- Note that MPFR is also a prerequisite for building the GCC spkg.\n-* GMP-ECM on ia64 (Itanium): #12830 (same GCC bug)\n-* FLINT, NTL, PARI and zn_poly (as well as the Sage library) all fail to build on ia64 due to the same bug,\n+* GMP-ECM on ia64 (Itanium): Fixed by #12830 (same GCC bug)\n+* zn_poly on ia64 (Itanium): Fixed by #12433 (same GCC bug)\n+* FLINT, NTL and PARI (as well as the Sage library) all fail to build on ia64 due to the same bug,\n * R fails to build on ia64 during byte-compiling; seems to be a different issue, but same work-around works.  It also fails with `-O3` during byte-compiling on Solaris SPARC and Linux x86_64; on the former `-O2` works, on the latter somewhat surprisingly `-O3 -flto`.  (Cf. comments below.)\n * Two files (`compat` and `linear`) of PARI's test suite fail due to segfaults when compiling with `-O3`/`-O2`/`-O1`, at least on Linux x86 and x86_64.\n * zlib on Solaris: #12800\n``````\n",
    "created_at": "2012-04-20T04:01:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142938",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,8 +6,9 @@
 * PolyBoRi: #12750, #12655
 * MPIR on ia64 (Itanium): #12765 (GCC bug) -- #11616 also provides an MPIR 2.**4.0**.p3 spkg working around this.
 * MPFR on ia64 (Itanium): #12837 (same GCC bug) -- Note that MPFR is also a prerequisite for building the GCC spkg.
-* GMP-ECM on ia64 (Itanium): #12830 (same GCC bug)
-* FLINT, NTL, PARI and zn_poly (as well as the Sage library) all fail to build on ia64 due to the same bug,
+* GMP-ECM on ia64 (Itanium): Fixed by #12830 (same GCC bug)
+* zn_poly on ia64 (Itanium): Fixed by #12433 (same GCC bug)
+* FLINT, NTL and PARI (as well as the Sage library) all fail to build on ia64 due to the same bug,
 * R fails to build on ia64 during byte-compiling; seems to be a different issue, but same work-around works.  It also fails with `-O3` during byte-compiling on Solaris SPARC and Linux x86_64; on the former `-O2` works, on the latter somewhat surprisingly `-O3 -flto`.  (Cf. comments below.)
 * Two files (`compat` and `linear`) of PARI's test suite fail due to segfaults when compiling with `-O3`/`-O2`/`-O1`, at least on Linux x86 and x86_64.
 * zlib on Solaris: #12800
``````




---

archive/issue_comments_142939.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nThe zn_poly spkg from #12433 now also works around the GCC 4.7.0 bug on Itanium.",
    "created_at": "2012-04-20T04:01:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142939",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:36" align="right">comment:36</div>

The zn_poly spkg from #12433 now also works around the GCC 4.7.0 bug on Itanium.



---

archive/issue_comments_142940.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -15,3 +15,4 @@\n * eclib on Solaris (See comments below; this is a Solaris header issue, fixed by a new spkg at #10993.)\n * FLINTQS on Solaris: #12855 (Also a subtle Solaris header issue.)\n \n+**gcc-4.7.0 spkg** for testing purposes: [http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.0.spkg)\n``````\n",
    "created_at": "2012-05-25T20:39:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142940",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -15,3 +15,4 @@
 * eclib on Solaris (See comments below; this is a Solaris header issue, fixed by a new spkg at #10993.)
 * FLINTQS on Solaris: #12855 (Also a subtle Solaris header issue.)
 
+**gcc-4.7.0 spkg** for testing purposes: [http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.0.spkg)
``````




---

archive/issue_comments_142941.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -15,4 +15,5 @@\n * eclib on Solaris (See comments below; this is a Solaris header issue, fixed by a new spkg at #10993.)\n * FLINTQS on Solaris: #12855 (Also a subtle Solaris header issue.)\n \n-**gcc-4.7.0 spkg** for testing purposes: [http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.0.spkg)\n+1. **gcc-4.7.0 spkg** for testing purposes: [http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.0.spkg)\n+2. **gcc-4.7.1.svn spkg** for testing purposes: [http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.1.svn.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.1.svn.spkg)\n``````\n",
    "created_at": "2012-05-26T16:43:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142941",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -15,4 +15,5 @@
 * eclib on Solaris (See comments below; this is a Solaris header issue, fixed by a new spkg at #10993.)
 * FLINTQS on Solaris: #12855 (Also a subtle Solaris header issue.)
 
-**gcc-4.7.0 spkg** for testing purposes: [http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.0.spkg)
+1. **gcc-4.7.0 spkg** for testing purposes: [http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.0.spkg)
+2. **gcc-4.7.1.svn spkg** for testing purposes: [http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.1.svn.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.1.svn.spkg)
``````




---

archive/issue_comments_142942.json:
```json
{
    "body": "Changed keywords from **GCC 4.7.0 C++11 -fpermissive compiler bugs** to **GCC 4.7.0 C++11 -fpermissive compiler bugs sd40.5**",
    "created_at": "2012-05-26T16:55:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142942",
    "user": "https://github.com/jdemeyer"
}
```

Changed keywords from **GCC 4.7.0 C++11 -fpermissive compiler bugs** to **GCC 4.7.0 C++11 -fpermissive compiler bugs sd40.5**



---

archive/issue_comments_142943.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -17,3 +17,4 @@\n \n 1. **gcc-4.7.0 spkg** for testing purposes: [http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.0.spkg)\n 2. **gcc-4.7.1.svn spkg** for testing purposes: [http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.1.svn.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.1.svn.spkg)\n+3. **gcc-4.8.0.trunk spkg** for testing purposes: [http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.8.0.trunk.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.8.0.trunk.spkg)\n``````\n",
    "created_at": "2012-05-27T03:31:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142943",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -17,3 +17,4 @@
 
 1. **gcc-4.7.0 spkg** for testing purposes: [http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.0.spkg)
 2. **gcc-4.7.1.svn spkg** for testing purposes: [http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.1.svn.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.1.svn.spkg)
+3. **gcc-4.8.0.trunk spkg** for testing purposes: [http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.8.0.trunk.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.8.0.trunk.spkg)
``````




---

archive/issue_comments_142944.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nThe ia64 bug is fixed in SVN now, tested on Skynet `cleo` (build + ptestlong passed).",
    "created_at": "2012-05-27T21:04:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142944",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:41" align="right">comment:41</div>

The ia64 bug is fixed in SVN now, tested on Skynet `cleo` (build + ptestlong passed).



---

archive/issue_comments_142945.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -18,3 +18,7 @@\n 1. **gcc-4.7.0 spkg** for testing purposes: [http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.0.spkg)\n 2. **gcc-4.7.1.svn spkg** for testing purposes: [http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.1.svn.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.1.svn.spkg)\n 3. **gcc-4.8.0.trunk spkg** for testing purposes: [http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.8.0.trunk.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.8.0.trunk.spkg)\n+\n+---\n+\n+The ia64 bug is fixed in gcc-4.7.1.svn, so we should apply the work-around only on GCC-4.7.0 and only for packages which are prequisites of GCC (since we don't plan to support Sage on ia64 with GCC-4.7.0, there is no point in work-arounds for *some* packages).\n``````\n",
    "created_at": "2012-05-28T19:03:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142945",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -18,3 +18,7 @@
 1. **gcc-4.7.0 spkg** for testing purposes: [http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.0.spkg)
 2. **gcc-4.7.1.svn spkg** for testing purposes: [http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.1.svn.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.1.svn.spkg)
 3. **gcc-4.8.0.trunk spkg** for testing purposes: [http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.8.0.trunk.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.8.0.trunk.spkg)
+
+---
+
+The ia64 bug is fixed in gcc-4.7.1.svn, so we should apply the work-around only on GCC-4.7.0 and only for packages which are prequisites of GCC (since we don't plan to support Sage on ia64 with GCC-4.7.0, there is no point in work-arounds for *some* packages).
``````




---

archive/issue_comments_142946.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -21,4 +21,9 @@\n \n ---\n \n-The ia64 bug is fixed in gcc-4.7.1.svn, so we should apply the work-around only on GCC-4.7.0 and only for packages which are prequisites of GCC (since we don't plan to support Sage on ia64 with GCC-4.7.0, there is no point in work-arounds for *some* packages).\n+The ia64 bug is fixed in gcc-4.7.1.svn, so we should apply the work-around only on GCC-4.7.0 and only for packages which are prequisites of GCC (since we don't plan to support Sage on ia64 with GCC-4.7.0, there is no point in work-arounds for *some* packages):\n+\n+* **mpir**\n+* **mpfr**\n+* **ecm**\n+* **zn_poly**\n``````\n",
    "created_at": "2012-05-28T19:08:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142946",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -21,4 +21,9 @@
 
 ---
 
-The ia64 bug is fixed in gcc-4.7.1.svn, so we should apply the work-around only on GCC-4.7.0 and only for packages which are prequisites of GCC (since we don't plan to support Sage on ia64 with GCC-4.7.0, there is no point in work-arounds for *some* packages).
+The ia64 bug is fixed in gcc-4.7.1.svn, so we should apply the work-around only on GCC-4.7.0 and only for packages which are prequisites of GCC (since we don't plan to support Sage on ia64 with GCC-4.7.0, there is no point in work-arounds for *some* packages):
+
+* **mpir**
+* **mpfr**
+* **ecm**
+* **zn_poly**
``````




---

archive/issue_comments_142947.json:
```json
{
    "body": "Author: **Jeroen Demeyer**",
    "created_at": "2012-05-28T19:57:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142947",
    "user": "https://github.com/jdemeyer"
}
```

Author: **Jeroen Demeyer**



---

archive/issue_comments_142948.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -23,7 +23,7 @@\n \n The ia64 bug is fixed in gcc-4.7.1.svn, so we should apply the work-around only on GCC-4.7.0 and only for packages which are prequisites of GCC (since we don't plan to support Sage on ia64 with GCC-4.7.0, there is no point in work-arounds for *some* packages):\n \n-* **mpir**\n-* **mpfr**\n+* **mpir**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.4.0.p6.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.4.0.p6.spkg)\n+* **mpfr**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpfr-3.1.0.p2.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpfr-3.1.0.p2.spkg)\n * **ecm**\n * **zn_poly**\n``````\n",
    "created_at": "2012-05-28T19:57:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142948",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -23,7 +23,7 @@
 
 The ia64 bug is fixed in gcc-4.7.1.svn, so we should apply the work-around only on GCC-4.7.0 and only for packages which are prequisites of GCC (since we don't plan to support Sage on ia64 with GCC-4.7.0, there is no point in work-arounds for *some* packages):
 
-* **mpir**
-* **mpfr**
+* **mpir**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.4.0.p6.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.4.0.p6.spkg)
+* **mpfr**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpfr-3.1.0.p2.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpfr-3.1.0.p2.spkg)
 * **ecm**
 * **zn_poly**
``````




---

archive/issue_comments_142949.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -26,4 +26,4 @@\n * **mpir**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.4.0.p6.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.4.0.p6.spkg)\n * **mpfr**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpfr-3.1.0.p2.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpfr-3.1.0.p2.spkg)\n * **ecm**\n-* **zn_poly**\n+* **zn_poly**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/zn_poly-0.9.p9.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/zn_poly-0.9.p9.spkg) (also fixes user-supplied `CFLAGS` and `CXXFLAGS` being overridden)\n``````\n",
    "created_at": "2012-05-28T20:45:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142949",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -26,4 +26,4 @@
 * **mpir**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.4.0.p6.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.4.0.p6.spkg)
 * **mpfr**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpfr-3.1.0.p2.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpfr-3.1.0.p2.spkg)
 * **ecm**
-* **zn_poly**
+* **zn_poly**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/zn_poly-0.9.p9.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/zn_poly-0.9.p9.spkg) (also fixes user-supplied `CFLAGS` and `CXXFLAGS` being overridden)
``````




---

archive/issue_comments_142950.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -25,5 +25,5 @@\n \n * **mpir**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.4.0.p6.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.4.0.p6.spkg)\n * **mpfr**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpfr-3.1.0.p2.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpfr-3.1.0.p2.spkg)\n-* **ecm**\n+* **ecm**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/ecm-6.3.p8.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/ecm-6.3.p8.spkg)\n * **zn_poly**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/zn_poly-0.9.p9.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/zn_poly-0.9.p9.spkg) (also fixes user-supplied `CFLAGS` and `CXXFLAGS` being overridden)\n``````\n",
    "created_at": "2012-05-28T22:05:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142950",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -25,5 +25,5 @@
 
 * **mpir**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.4.0.p6.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.4.0.p6.spkg)
 * **mpfr**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpfr-3.1.0.p2.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpfr-3.1.0.p2.spkg)
-* **ecm**
+* **ecm**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/ecm-6.3.p8.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/ecm-6.3.p8.spkg)
 * **zn_poly**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/zn_poly-0.9.p9.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/zn_poly-0.9.p9.spkg) (also fixes user-supplied `CFLAGS` and `CXXFLAGS` being overridden)
``````




---

archive/issue_comments_142951.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -24,6 +24,6 @@\n The ia64 bug is fixed in gcc-4.7.1.svn, so we should apply the work-around only on GCC-4.7.0 and only for packages which are prequisites of GCC (since we don't plan to support Sage on ia64 with GCC-4.7.0, there is no point in work-arounds for *some* packages):\n \n * **mpir**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.4.0.p6.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.4.0.p6.spkg)\n-* **mpfr**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpfr-3.1.0.p2.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpfr-3.1.0.p2.spkg)\n-* **ecm**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/ecm-6.3.p8.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/ecm-6.3.p8.spkg)\n+* **mpfr**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpfr-3.1.0.p2.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpfr-3.1.0.p2.spkg) (also various misc changes)\n+* **ecm**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/ecm-6.3.p8.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/ecm-6.3.p8.spkg) (also various misc changes)\n * **zn_poly**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/zn_poly-0.9.p9.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/zn_poly-0.9.p9.spkg) (also fixes user-supplied `CFLAGS` and `CXXFLAGS` being overridden)\n``````\n",
    "created_at": "2012-05-28T22:29:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142951",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -24,6 +24,6 @@
 The ia64 bug is fixed in gcc-4.7.1.svn, so we should apply the work-around only on GCC-4.7.0 and only for packages which are prequisites of GCC (since we don't plan to support Sage on ia64 with GCC-4.7.0, there is no point in work-arounds for *some* packages):
 
 * **mpir**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.4.0.p6.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.4.0.p6.spkg)
-* **mpfr**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpfr-3.1.0.p2.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpfr-3.1.0.p2.spkg)
-* **ecm**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/ecm-6.3.p8.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/ecm-6.3.p8.spkg)
+* **mpfr**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpfr-3.1.0.p2.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpfr-3.1.0.p2.spkg) (also various misc changes)
+* **ecm**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/ecm-6.3.p8.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/ecm-6.3.p8.spkg) (also various misc changes)
 * **zn_poly**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/zn_poly-0.9.p9.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/zn_poly-0.9.p9.spkg) (also fixes user-supplied `CFLAGS` and `CXXFLAGS` being overridden)
``````




---

archive/issue_events_175663.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-05-28T23:05:54Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "milestone_number": null,
    "milestone_title": "sage-5.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12751#event-175663"
}
```



---

archive/issue_events_175664.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-05-28T23:05:54Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "milestone_number": null,
    "milestone_title": "sage-5.0.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12751#event-175664"
}
```



---

archive/issue_comments_142952.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -27,3 +27,27 @@\n * **mpfr**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpfr-3.1.0.p2.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpfr-3.1.0.p2.spkg) (also various misc changes)\n * **ecm**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/ecm-6.3.p8.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/ecm-6.3.p8.spkg) (also various misc changes)\n * **zn_poly**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/zn_poly-0.9.p9.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/zn_poly-0.9.p9.spkg) (also fixes user-supplied `CFLAGS` and `CXXFLAGS` being overridden)\n+\n+### mpir-2.4.0.p6 (Jeroen Demeyer, 28 May 2012)\n+* Trac #12751: Apply the ia64 workaround for gcc-4.7.0 *only* on\n+  gcc-4.7.0 and not on other gcc-4.7.x versions.\n+\n+### mpfr-3.1.0.p2 (Jeroen Demeyer, 28 May 2012)\n+* Trac #12751: Apply the ia64 workaround for gcc-4.7.0 *only* on\n+  gcc-4.7.0 and not on other gcc-4.7.x versions.\n+* Remove pointless check for gmp.h.\n+* Rename MPFR_EXTRA_OPTS to MPFR_CONFIGURE for consistency with MPIR.\n+\n+### zn_poly-0.9.p9 (Jeroen Demeyer, 28 May 2012)\n+* Trac #12751: remove the gcc-4.7.0 workaround for ia64 since this bug\n+  has been fixed in gcc-4.7.1 and we will not support building Sage\n+  with gcc-4.7.0 on Itanium.\n+* Don't override user-set CFLAGS and CXXFLAGS.\n+\n+### ecm-6.3.p8 (Jeroen Demeyer, 28 May 2012)\n+* Trac #12751: remove the gcc-4.7.0 workaround for ia64 since this bug\n+  has been fixed in gcc-4.7.1 and we will not support building Sage\n+  with gcc-4.7.0 on Itanium.\n+* Remove unused variable SAGE_CONF_OPTS.\n+* Rename ECM_EXTRA_OPTS to ECM_CONFIGURE for consistency with MPIR.\n+* Don't override user-set CFLAGS.\n``````\n",
    "created_at": "2012-05-29T02:13:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142952",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -27,3 +27,27 @@
 * **mpfr**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpfr-3.1.0.p2.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpfr-3.1.0.p2.spkg) (also various misc changes)
 * **ecm**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/ecm-6.3.p8.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/ecm-6.3.p8.spkg) (also various misc changes)
 * **zn_poly**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/zn_poly-0.9.p9.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/zn_poly-0.9.p9.spkg) (also fixes user-supplied `CFLAGS` and `CXXFLAGS` being overridden)
+
+### mpir-2.4.0.p6 (Jeroen Demeyer, 28 May 2012)
+* Trac #12751: Apply the ia64 workaround for gcc-4.7.0 *only* on
+  gcc-4.7.0 and not on other gcc-4.7.x versions.
+
+### mpfr-3.1.0.p2 (Jeroen Demeyer, 28 May 2012)
+* Trac #12751: Apply the ia64 workaround for gcc-4.7.0 *only* on
+  gcc-4.7.0 and not on other gcc-4.7.x versions.
+* Remove pointless check for gmp.h.
+* Rename MPFR_EXTRA_OPTS to MPFR_CONFIGURE for consistency with MPIR.
+
+### zn_poly-0.9.p9 (Jeroen Demeyer, 28 May 2012)
+* Trac #12751: remove the gcc-4.7.0 workaround for ia64 since this bug
+  has been fixed in gcc-4.7.1 and we will not support building Sage
+  with gcc-4.7.0 on Itanium.
+* Don't override user-set CFLAGS and CXXFLAGS.
+
+### ecm-6.3.p8 (Jeroen Demeyer, 28 May 2012)
+* Trac #12751: remove the gcc-4.7.0 workaround for ia64 since this bug
+  has been fixed in gcc-4.7.1 and we will not support building Sage
+  with gcc-4.7.0 on Itanium.
+* Remove unused variable SAGE_CONF_OPTS.
+* Rename ECM_EXTRA_OPTS to ECM_CONFIGURE for consistency with MPIR.
+* Don't override user-set CFLAGS.
``````




---

archive/issue_events_175665.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-05-29T02:13:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12751#event-175665"
}
```



---

archive/issue_comments_142953.json:
```json
{
    "body": "Attachment: **[ecm-6.3.p8.diff.gz](https://github.com/sagemath/sage/files/ticket12751/ecm-6.3.p8.diff.gz)**\n\nDiff for the ecm spkg. For reference / review only.",
    "created_at": "2012-05-29T02:21:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142953",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[ecm-6.3.p8.diff.gz](https://github.com/sagemath/sage/files/ticket12751/ecm-6.3.p8.diff.gz)**

Diff for the ecm spkg. For reference / review only.



---

archive/issue_comments_142954.json:
```json
{
    "body": "Diff for the mpfr spkg. For reference / review only.",
    "created_at": "2012-05-29T02:21:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142954",
    "user": "https://github.com/jdemeyer"
}
```

Diff for the mpfr spkg. For reference / review only.



---

archive/issue_comments_142955.json:
```json
{
    "body": "Attachment: **[mpfr-3.1.0.p2.diff.gz](https://github.com/sagemath/sage/files/ticket12751/mpfr-3.1.0.p2.diff.gz)**\n\nDiff for the mpir spkg. For reference / review only.",
    "created_at": "2012-05-29T02:22:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142955",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[mpfr-3.1.0.p2.diff.gz](https://github.com/sagemath/sage/files/ticket12751/mpfr-3.1.0.p2.diff.gz)**

Diff for the mpir spkg. For reference / review only.



---

archive/issue_comments_142956.json:
```json
{
    "body": "Attachment: **[mpir-2.4.0.p6.diff.gz](https://github.com/sagemath/sage/files/ticket12751/mpir-2.4.0.p6.diff.gz)**\n\nDiff for the zn_poly spkg. For reference / review only.",
    "created_at": "2012-05-29T02:22:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142956",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[mpir-2.4.0.p6.diff.gz](https://github.com/sagemath/sage/files/ticket12751/mpir-2.4.0.p6.diff.gz)**

Diff for the zn_poly spkg. For reference / review only.



---

archive/issue_comments_142957.json:
```json
{
    "body": "Attachment: **[zn_poly-0.9.p9.diff.gz](https://github.com/sagemath/sage/files/ticket12751/zn_poly-0.9.p9.diff.gz)**\n\nApply to SAGE_ROOT",
    "created_at": "2012-05-29T03:02:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142957",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[zn_poly-0.9.p9.diff.gz](https://github.com/sagemath/sage/files/ticket12751/zn_poly-0.9.p9.diff.gz)**

Apply to SAGE_ROOT



---

archive/issue_comments_142958.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nAttachment: **[12751_allow_gcc_4_7.patch.gz](https://github.com/sagemath/sage/files/ticket12751/12751_allow_gcc_4_7.patch.gz)**",
    "created_at": "2012-05-29T03:13:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142958",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:50" align="right">comment:50</div>

Attachment: **[12751_allow_gcc_4_7.patch.gz](https://github.com/sagemath/sage/files/ticket12751/12751_allow_gcc_4_7.patch.gz)**



---

archive/issue_comments_142959.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -23,11 +23,6 @@\n \n The ia64 bug is fixed in gcc-4.7.1.svn, so we should apply the work-around only on GCC-4.7.0 and only for packages which are prequisites of GCC (since we don't plan to support Sage on ia64 with GCC-4.7.0, there is no point in work-arounds for *some* packages):\n \n-* **mpir**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.4.0.p6.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.4.0.p6.spkg)\n-* **mpfr**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpfr-3.1.0.p2.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpfr-3.1.0.p2.spkg) (also various misc changes)\n-* **ecm**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/ecm-6.3.p8.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/ecm-6.3.p8.spkg) (also various misc changes)\n-* **zn_poly**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/zn_poly-0.9.p9.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/zn_poly-0.9.p9.spkg) (also fixes user-supplied `CFLAGS` and `CXXFLAGS` being overridden)\n-\n ### mpir-2.4.0.p6 (Jeroen Demeyer, 28 May 2012)\n * Trac #12751: Apply the ia64 workaround for gcc-4.7.0 *only* on\n   gcc-4.7.0 and not on other gcc-4.7.x versions.\n@@ -51,3 +46,12 @@\n * Remove unused variable SAGE_CONF_OPTS.\n * Rename ECM_EXTRA_OPTS to ECM_CONFIGURE for consistency with MPIR.\n * Don't override user-set CFLAGS.\n+\n+---\n+\n+**Apply**:\n+* [attachment: 12751_allow_gcc_4_7.patch](https://github.com/sagemath/sage/files/ticket12751/12751_allow_gcc_4_7.patch.gz) to `SAGE_ROOT`\n+* mpir: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.4.0.p6.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.4.0.p6.spkg)\n+* mpfr: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpfr-3.1.0.p2.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpfr-3.1.0.p2.spkg) (also various misc changes)\n+* ecm: [http://boxen.math.washington.edu/home/jdemeyer/spkg/ecm-6.3.p8.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/ecm-6.3.p8.spkg) (also various misc changes)\n+* zn_poly: [http://boxen.math.washington.edu/home/jdemeyer/spkg/zn_poly-0.9.p9.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/zn_poly-0.9.p9.spkg) (also fixes user-supplied `CFLAGS` and `CXXFLAGS` being overridden)\n``````\n",
    "created_at": "2012-05-29T03:13:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142959",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -23,11 +23,6 @@
 
 The ia64 bug is fixed in gcc-4.7.1.svn, so we should apply the work-around only on GCC-4.7.0 and only for packages which are prequisites of GCC (since we don't plan to support Sage on ia64 with GCC-4.7.0, there is no point in work-arounds for *some* packages):
 
-* **mpir**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.4.0.p6.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.4.0.p6.spkg)
-* **mpfr**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpfr-3.1.0.p2.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpfr-3.1.0.p2.spkg) (also various misc changes)
-* **ecm**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/ecm-6.3.p8.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/ecm-6.3.p8.spkg) (also various misc changes)
-* **zn_poly**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/zn_poly-0.9.p9.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/zn_poly-0.9.p9.spkg) (also fixes user-supplied `CFLAGS` and `CXXFLAGS` being overridden)
-
 ### mpir-2.4.0.p6 (Jeroen Demeyer, 28 May 2012)
 * Trac #12751: Apply the ia64 workaround for gcc-4.7.0 *only* on
   gcc-4.7.0 and not on other gcc-4.7.x versions.
@@ -51,3 +46,12 @@
 * Remove unused variable SAGE_CONF_OPTS.
 * Rename ECM_EXTRA_OPTS to ECM_CONFIGURE for consistency with MPIR.
 * Don't override user-set CFLAGS.
+
+---
+
+**Apply**:
+* [attachment: 12751_allow_gcc_4_7.patch](https://github.com/sagemath/sage/files/ticket12751/12751_allow_gcc_4_7.patch.gz) to `SAGE_ROOT`
+* mpir: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.4.0.p6.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpir-2.4.0.p6.spkg)
+* mpfr: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpfr-3.1.0.p2.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpfr-3.1.0.p2.spkg) (also various misc changes)
+* ecm: [http://boxen.math.washington.edu/home/jdemeyer/spkg/ecm-6.3.p8.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/ecm-6.3.p8.spkg) (also various misc changes)
+* zn_poly: [http://boxen.math.washington.edu/home/jdemeyer/spkg/zn_poly-0.9.p9.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/zn_poly-0.9.p9.spkg) (also fixes user-supplied `CFLAGS` and `CXXFLAGS` being overridden)
``````




---

archive/issue_comments_142960.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -14,6 +14,7 @@\n * zlib on Solaris: #12800\n * eclib on Solaris (See comments below; this is a Solaris header issue, fixed by a new spkg at #10993.)\n * FLINTQS on Solaris: #12855 (Also a subtle Solaris header issue.)\n+* Support GCC version \"4.7\": #13118.\n \n 1. **gcc-4.7.0 spkg** for testing purposes: [http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.0.spkg)\n 2. **gcc-4.7.1.svn spkg** for testing purposes: [http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.1.svn.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.1.svn.spkg)\n``````\n",
    "created_at": "2012-06-15T06:52:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142960",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -14,6 +14,7 @@
 * zlib on Solaris: #12800
 * eclib on Solaris (See comments below; this is a Solaris header issue, fixed by a new spkg at #10993.)
 * FLINTQS on Solaris: #12855 (Also a subtle Solaris header issue.)
+* Support GCC version "4.7": #13118.
 
 1. **gcc-4.7.0 spkg** for testing purposes: [http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.0.spkg)
 2. **gcc-4.7.1.svn spkg** for testing purposes: [http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.1.svn.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.1.svn.spkg)
``````




---

archive/issue_comments_142961.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -16,9 +16,7 @@\n * FLINTQS on Solaris: #12855 (Also a subtle Solaris header issue.)\n * Support GCC version \"4.7\": #13118.\n \n-1. **gcc-4.7.0 spkg** for testing purposes: [http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.0.spkg)\n-2. **gcc-4.7.1.svn spkg** for testing purposes: [http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.1.svn.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.1.svn.spkg)\n-3. **gcc-4.8.0.trunk spkg** for testing purposes: [http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.8.0.trunk.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.8.0.trunk.spkg)\n+**gcc-4.7.1 spkg** for testing purposes: #13150.\n \n ---\n \n``````\n",
    "created_at": "2012-06-22T09:35:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142961",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -16,9 +16,7 @@
 * FLINTQS on Solaris: #12855 (Also a subtle Solaris header issue.)
 * Support GCC version "4.7": #13118.
 
-1. **gcc-4.7.0 spkg** for testing purposes: [http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.0.spkg)
-2. **gcc-4.7.1.svn spkg** for testing purposes: [http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.1.svn.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.7.1.svn.spkg)
-3. **gcc-4.8.0.trunk spkg** for testing purposes: [http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.8.0.trunk.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/gcc-4.8.0.trunk.spkg)
+**gcc-4.7.1 spkg** for testing purposes: #13150.
 
 ---
 
``````




---

archive/issue_comments_142962.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nWell testing on skynet might be a bit difficult, but it works for me on Fedora 17 (which ships gcc 4.7.0). There are still vestiges of ia64/gcc checking in the spkgs, I still believe that this should just once and for all be dealt with by the compiler wrapper instead of littering checks for `$DYING_ARCH` everywhere. But thats for another day ;)",
    "created_at": "2012-07-03T09:28:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142962",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:53" align="right">comment:53</div>

Well testing on skynet might be a bit difficult, but it works for me on Fedora 17 (which ships gcc 4.7.0). There are still vestiges of ia64/gcc checking in the spkgs, I still believe that this should just once and for all be dealt with by the compiler wrapper instead of littering checks for `$DYING_ARCH` everywhere. But thats for another day ;)



---

archive/issue_comments_142963.json:
```json
{
    "body": "Reviewer: **Volker Braun**",
    "created_at": "2012-07-03T09:28:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142963",
    "user": "https://github.com/vbraun"
}
```

Reviewer: **Volker Braun**



---

archive/issue_events_175666.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-07-03T09:28:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12751#event-175666"
}
```



---

archive/issue_events_175667.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-07-03T09:28:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12751#event-175667"
}
```



---

archive/issue_comments_142964.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nReplying to [@vbraun](#comment:53):\n> There are still vestiges of ia64/gcc checking in the spkgs.\n\nThere should be in the MPIR and MPFR packages, because those are prerequisites for the Sage GCC spkg.",
    "created_at": "2012-07-03T09:48:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142964",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:54" align="right">comment:54</div>

Replying to [@vbraun](#comment:53):
> There are still vestiges of ia64/gcc checking in the spkgs.

There should be in the MPIR and MPFR packages, because those are prerequisites for the Sage GCC spkg.



---

archive/issue_comments_142965.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nTo clarify: we still want people with GCC-4.7.0 on ia64 to be able to build Sage, but only with the Sage-built GCC.",
    "created_at": "2012-07-03T09:51:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142965",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:55" align="right">comment:55</div>

To clarify: we still want people with GCC-4.7.0 on ia64 to be able to build Sage, but only with the Sage-built GCC.



---

archive/issue_events_175668.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-07-03T09:54:02Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "milestone_number": null,
    "milestone_title": "sage-5.0.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12751#event-175668"
}
```



---

archive/issue_events_175669.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-07-03T09:54:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "milestone_number": null,
    "milestone_title": "sage-5.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12751#event-175669"
}
```



---

archive/issue_events_175670.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-07-03T09:54:02Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "title_is": "Allow building Sage with GCC-4.7.x",
    "title_was": "Sage fails to build with GCC-4.7.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12751#event-175670"
}
```



---

archive/issue_comments_142966.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-Sage 5.0.beta10 fails to build using GCC 4.7.0 on Skynet/eno and other Linux systems, for different reasons.\n+Sage fails to build using GCC 4.7.0 on various systems, for different reasons.\n \n * GFan: #12760\n * Givaro: #12761\n``````\n",
    "created_at": "2012-07-03T09:54:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142966",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-Sage 5.0.beta10 fails to build using GCC 4.7.0 on Skynet/eno and other Linux systems, for different reasons.
+Sage fails to build using GCC 4.7.0 on various systems, for different reasons.
 
 * GFan: #12760
 * Givaro: #12761
``````




---

archive/issue_comments_142967.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -20,7 +20,7 @@\n \n ---\n \n-The ia64 bug is fixed in gcc-4.7.1.svn, so we should apply the work-around only on GCC-4.7.0 and only for packages which are prequisites of GCC (since we don't plan to support Sage on ia64 with GCC-4.7.0, there is no point in work-arounds for *some* packages):\n+The ia64 bug is fixed in GCC 4.7.1, so we should apply the work-around only on GCC 4.7**.0** and only for packages which are prerequisites of GCC (since we don't plan to support Sage on ia64 with GCC 4.7.0, there is no point in work-arounds for *some* packages):\n \n ### mpir-2.4.0.p6 (Jeroen Demeyer, 28 May 2012)\n * Trac #12751: Apply the ia64 workaround for gcc-4.7.0 *only* on\n``````\n",
    "created_at": "2012-07-03T10:17:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142967",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -20,7 +20,7 @@
 
 ---
 
-The ia64 bug is fixed in gcc-4.7.1.svn, so we should apply the work-around only on GCC-4.7.0 and only for packages which are prequisites of GCC (since we don't plan to support Sage on ia64 with GCC-4.7.0, there is no point in work-arounds for *some* packages):
+The ia64 bug is fixed in GCC 4.7.1, so we should apply the work-around only on GCC 4.7**.0** and only for packages which are prerequisites of GCC (since we don't plan to support Sage on ia64 with GCC 4.7.0, there is no point in work-arounds for *some* packages):
 
 ### mpir-2.4.0.p6 (Jeroen Demeyer, 28 May 2012)
 * Trac #12751: Apply the ia64 workaround for gcc-4.7.0 *only* on
``````




---

archive/issue_comments_142968.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nGCC 4.7.1 has been released on June 14th.",
    "created_at": "2012-07-03T10:17:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142968",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:57" align="right">comment:57</div>

GCC 4.7.1 has been released on June 14th.



---

archive/issue_comments_142969.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nReplying to [@vbraun](#comment:53):\n> There are still vestiges of ia64/gcc checking in the spkgs, I still believe that this should just once and for all be dealt with by the compiler wrapper instead of littering checks for `$DYING_ARCH` everywhere. But thats for another day ;)\n\nDepends...  The compiler wrapper (afaik) doesn't know what code or spkg it currently builds, and usually only few parts are affected (probably with different work-arounds).  E.g. disabling optimization for the whole build is poor and may not even work.\n\nIt's probably more tedious to put [specific] work-arounds into a couple of spkgs, but IMHO also preserves some kind of modularity.\n\nAs a brute alternative, we could just blacklist (almost) all somehow non-functional compiler/OS combinations (most probably ignoring compiler options) *in Sage's prerequisite check*, but that's not very user- (nor developer-) friendly, and isn't \"modular\" either.\n\n\n\n\n`$DYING_ARCH` does certainly have different values on different machines, or even depends on `$USER`... ;-)",
    "created_at": "2012-07-03T10:51:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142969",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:58" align="right">comment:58</div>

Replying to [@vbraun](#comment:53):
> There are still vestiges of ia64/gcc checking in the spkgs, I still believe that this should just once and for all be dealt with by the compiler wrapper instead of littering checks for `$DYING_ARCH` everywhere. But thats for another day ;)

Depends...  The compiler wrapper (afaik) doesn't know what code or spkg it currently builds, and usually only few parts are affected (probably with different work-arounds).  E.g. disabling optimization for the whole build is poor and may not even work.

It's probably more tedious to put [specific] work-arounds into a couple of spkgs, but IMHO also preserves some kind of modularity.

As a brute alternative, we could just blacklist (almost) all somehow non-functional compiler/OS combinations (most probably ignoring compiler options) *in Sage's prerequisite check*, but that's not very user- (nor developer-) friendly, and isn't "modular" either.




`$DYING_ARCH` does certainly have different values on different machines, or even depends on `$USER`... ;-)



---

archive/issue_comments_142970.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nReplying to [@nexttime](#comment:58):\n> Depends...  The compiler wrapper (afaik) doesn't know what code or spkg it currently builds, and usually only few parts are affected (probably with different work-arounds).  E.g. disabling optimization for the whole build is poor and may not even work.\n\nI disagree. Just because our testsuite didn't catch it doesn't mean that the code was compiled correctly. If the optimizer has a known bug then we must not use that particular optimization anywhere it if we want to trust the result.",
    "created_at": "2012-07-03T11:02:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142970",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:59" align="right">comment:59</div>

Replying to [@nexttime](#comment:58):
> Depends...  The compiler wrapper (afaik) doesn't know what code or spkg it currently builds, and usually only few parts are affected (probably with different work-arounds).  E.g. disabling optimization for the whole build is poor and may not even work.

I disagree. Just because our testsuite didn't catch it doesn't mean that the code was compiled correctly. If the optimizer has a known bug then we must not use that particular optimization anywhere it if we want to trust the result.



---

archive/issue_comments_142971.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nReplying to [@vbraun](#comment:59):\n> Replying to [@nexttime](#comment:58):\n> > Depends...  The compiler wrapper (afaik) doesn't know what code or spkg it currently builds, and usually only few parts are affected (probably with different work-arounds).  E.g. disabling optimization for the whole build is poor and may not even work.\n\n> \n> I disagree. Just because our testsuite didn't catch it doesn't mean that the code was compiled correctly. If the optimizer has a known bug then we must not use that particular optimization anywhere it if we want to trust the result.\n\n:-) Well, in the case I think you're referring to (ia64, \"impossible reload\"), the compiler bailed out, and it wasn't some \"particular optimization\", but the whole code generation (more precisely register allocation, in the presence of inline assemby) was broken, although only in some \"corner cases\".\n\nYou can almost never be sure all code will be compiled correctly [or otherwise raise an error] (under all circumstances), but testsuites are *supposed* to get at least some confidence.  In this case certainly **GCC's** testsuite was insufficient, and/or the release hadn't been thoroughly tested [on ia64].  If instead we'd discovered `-ffoo` produced wrong code, we'd most probably used `-fno-foo`, globally.  (But if the bug affected lots of code or situations, it certainly would have shown up earlier, upstream.)\n\nIn general, if you experience some function (or code, tool, whatever) gives wrong results on *some* inputs, you usually first try to narrow its domain, unless or until you can really fix it (and probably make sure it *does* work in all cases it was specified for).  Dropping it completely until some \"rare\" issue is solved is not always an option (while *documenting* the issue is), or simply too inconvenient.  Otherwise we'd never release any Sage version, since there are and always will be known \"bugs\" or limitations.",
    "created_at": "2012-07-03T12:53:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142971",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:60" align="right">comment:60</div>

Replying to [@vbraun](#comment:59):
> Replying to [@nexttime](#comment:58):
> > Depends...  The compiler wrapper (afaik) doesn't know what code or spkg it currently builds, and usually only few parts are affected (probably with different work-arounds).  E.g. disabling optimization for the whole build is poor and may not even work.

> 
> I disagree. Just because our testsuite didn't catch it doesn't mean that the code was compiled correctly. If the optimizer has a known bug then we must not use that particular optimization anywhere it if we want to trust the result.

:-) Well, in the case I think you're referring to (ia64, "impossible reload"), the compiler bailed out, and it wasn't some "particular optimization", but the whole code generation (more precisely register allocation, in the presence of inline assemby) was broken, although only in some "corner cases".

You can almost never be sure all code will be compiled correctly [or otherwise raise an error] (under all circumstances), but testsuites are *supposed* to get at least some confidence.  In this case certainly **GCC's** testsuite was insufficient, and/or the release hadn't been thoroughly tested [on ia64].  If instead we'd discovered `-ffoo` produced wrong code, we'd most probably used `-fno-foo`, globally.  (But if the bug affected lots of code or situations, it certainly would have shown up earlier, upstream.)

In general, if you experience some function (or code, tool, whatever) gives wrong results on *some* inputs, you usually first try to narrow its domain, unless or until you can really fix it (and probably make sure it *does* work in all cases it was specified for).  Dropping it completely until some "rare" issue is solved is not always an option (while *documenting* the issue is), or simply too inconvenient.  Otherwise we'd never release any Sage version, since there are and always will be known "bugs" or limitations.



---

archive/issue_comments_142972.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nIts nice for the 2 remaining users (down from 3 now that skynet is down) of `$DYING_ARCH`, but I don't think its maintainable for Sage in the long run. Either we deprecate ancient compiler workarounds or the spkg-installs will fill up with crud that nobody remembers why it is there or what Itanium was. \n\nI don't see a problem with disabling optimization on rare architectures where this can simply be fixed by updating the compiler from the point-oh release that you probably shouldn't have used anyways. And if your distribution backported a fix then you can still reenable optimizations.",
    "created_at": "2012-07-03T13:24:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142972",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:61" align="right">comment:61</div>

Its nice for the 2 remaining users (down from 3 now that skynet is down) of `$DYING_ARCH`, but I don't think its maintainable for Sage in the long run. Either we deprecate ancient compiler workarounds or the spkg-installs will fill up with crud that nobody remembers why it is there or what Itanium was. 

I don't see a problem with disabling optimization on rare architectures where this can simply be fixed by updating the compiler from the point-oh release that you probably shouldn't have used anyways. And if your distribution backported a fix then you can still reenable optimizations.



---

archive/issue_comments_142973.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nReplying to [@vbraun](#comment:61):\n> Its nice for the 2 remaining users (down from 3 now that skynet is down) of `$DYING_ARCH`, but I don't think its maintainable for Sage in the long run. Either we deprecate ancient compiler workarounds or the spkg-installs will fill up with crud that nobody remembers why it is there or what Itanium was.\n\nThe GCC spkg solves most of these issues.",
    "created_at": "2012-07-03T14:09:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142973",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:62" align="right">comment:62</div>

Replying to [@vbraun](#comment:61):
> Its nice for the 2 remaining users (down from 3 now that skynet is down) of `$DYING_ARCH`, but I don't think its maintainable for Sage in the long run. Either we deprecate ancient compiler workarounds or the spkg-installs will fill up with crud that nobody remembers why it is there or what Itanium was.

The GCC spkg solves most of these issues.



---

archive/issue_comments_142974.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nReplying to [@vbraun](#comment:61):\n> Its nice for the 2 remaining users (down from 3 now that skynet is down) of `$DYING_ARCH`, but I don't think its maintainable for Sage in the long run.\n\nWe can hardly officially support platforms we have no access to.\n\nIs skynet intentionally down?  Incidentally just tried to login...\n\n\n\n\n  \n> Either we deprecate ancient compiler workarounds or the spkg-installs will fill up with crud that nobody remembers why it is there or what Itanium was.\n\nWell, that's a matter of documentation (and wikipedia ;-) ).\n\nWe used to clean up \"obsolete\" work-arounds regularly, have our weird prerequisites check (besides checks in some spkgs' `configure` scripts), and we meanwhile have a GCC spkg anyway (although we still have to make sure bootstrapping works, as Jeroen mentioned).\n\nIMHO the bigger problem is some distros (or OSs) shipping immature compilers by default (some not even providing fixes later).  Always supporting the most recent GCC version on all skynet platforms may now be a requirement of the past; don't know.",
    "created_at": "2012-07-03T14:16:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142974",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:63" align="right">comment:63</div>

Replying to [@vbraun](#comment:61):
> Its nice for the 2 remaining users (down from 3 now that skynet is down) of `$DYING_ARCH`, but I don't think its maintainable for Sage in the long run.

We can hardly officially support platforms we have no access to.

Is skynet intentionally down?  Incidentally just tried to login...




  
> Either we deprecate ancient compiler workarounds or the spkg-installs will fill up with crud that nobody remembers why it is there or what Itanium was.

Well, that's a matter of documentation (and wikipedia ;-) ).

We used to clean up "obsolete" work-arounds regularly, have our weird prerequisites check (besides checks in some spkgs' `configure` scripts), and we meanwhile have a GCC spkg anyway (although we still have to make sure bootstrapping works, as Jeroen mentioned).

IMHO the bigger problem is some distros (or OSs) shipping immature compilers by default (some not even providing fixes later).  Always supporting the most recent GCC version on all skynet platforms may now be a requirement of the past; don't know.



---

archive/issue_events_175671.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-07-07T22:29:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12751#event-175671"
}
```



---

archive/issue_events_175672.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-07-07T22:29:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12751#event-175672"
}
```



---

archive/issue_comments_142975.json:
```json
{
    "body": "Merged: **sage-5.2.beta1**",
    "created_at": "2012-07-07T22:29:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142975",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.2.beta1**



---

archive/issue_comments_142976.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nThere are still issues with GCC 4.7.0 (presumably any GCC 4.7.x) on Solaris, e.g. with Singular, similar to those with FLINTQS (#12855).  (These are *not* related to compiler bugs!)",
    "created_at": "2013-03-14T12:15:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142976",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:65" align="right">comment:65</div>

There are still issues with GCC 4.7.0 (presumably any GCC 4.7.x) on Solaris, e.g. with Singular, similar to those with FLINTQS (#12855).  (These are *not* related to compiler bugs!)



---

archive/issue_comments_142977.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nReplying to [@nexttime](#comment:65):\n> There are still issues with GCC 4.7.0 (presumably any GCC 4.7.x) on Solaris, e.g. with Singular, similar to those with FLINTQS (#12855).  (These are *not* related to compiler bugs!)\n\nIt seems only Singular (3-1-5) meanwhile needs to get fixed; this is #14295.",
    "created_at": "2013-03-18T18:08:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12751#issuecomment-142977",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:66" align="right">comment:66</div>

Replying to [@nexttime](#comment:65):
> There are still issues with GCC 4.7.0 (presumably any GCC 4.7.x) on Solaris, e.g. with Singular, similar to those with FLINTQS (#12855).  (These are *not* related to compiler bugs!)

It seems only Singular (3-1-5) meanwhile needs to get fixed; this is #14295.
