# Issue 12115: New MPIR won't build on Cygwin

archive/issues_011943.json:
```json
{
    "body": "The recent MPIR versions can only be built shared OR static on Cygwin, not both.\nMoreover, MPIR configure scripts gets confused if Cygwin, which is only 32 bits, is ran on a 64 bits Windows.\n\nHence the following spkg sets ABI=32 (to tackle the second problem) and only builds a shared version of the library (to tackle the first one).\n\nhttp://boxen.math.washington.edu/home/jpflori/mpir-2.4.0.p7.spkg\n\nUpdated spkg based on this one at #13137.\nPlease use the one there.\n\n**CC:**  @nexttime @dimpase wbhart @jdemeyer\n\n**Keywords:** mpir cygwin spkg\n\n**Upstream:** None of the above - read trac for reasoning.\n\n**Reviewer:** Volker Braun, Karl-Dieter Crisman, Jean-Pierre Flori\n\nIssue created by migration from https://trac.sagemath.org/ticket/12115\n\n",
    "closed_at": "2013-01-17T10:43:21Z",
    "created_at": "2011-12-03T21:24:05Z",
    "labels": [
        "component: porting: cygwin",
        "bug",
        "duplicate"
    ],
    "title": "New MPIR won't build on Cygwin",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/12115",
    "user": "https://github.com/kcrisman"
}
```
The recent MPIR versions can only be built shared OR static on Cygwin, not both.
Moreover, MPIR configure scripts gets confused if Cygwin, which is only 32 bits, is ran on a 64 bits Windows.

Hence the following spkg sets ABI=32 (to tackle the second problem) and only builds a shared version of the library (to tackle the first one).

http://boxen.math.washington.edu/home/jpflori/mpir-2.4.0.p7.spkg

Updated spkg based on this one at #13137.
Please use the one there.

**CC:**  @nexttime @dimpase wbhart @jdemeyer

**Keywords:** mpir cygwin spkg

**Upstream:** None of the above - read trac for reasoning.

**Reviewer:** Volker Braun, Karl-Dieter Crisman, Jean-Pierre Flori

Issue created by migration from https://trac.sagemath.org/ticket/12115





---

archive/issue_events_098296.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2011-12-03T21:31:22Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "rename": {
        "from": "MPIR won't build on Cygwin due to building static library",
        "to": "New MPIR won't build on Cygwin"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12115#event-98296"
}
```



---

archive/issue_comments_131709.json:
```json
{
    "body": "<a id='comment:1'></a>\nI fixed this with a jury-rigged spkg [here](http://sage.math.washington.edu/home/kcrisman/mpir-2.1.3.p8.spkg).  Patch attached, just for reference.\n\nNext error:\n\n```\nMaking all in yasm\nmake[4]: Entering directory `/home/Administrator/sage-4.8.alpha3/spkg/build/mpir-2.1.3.p8/src/yasm'\ngcc -std=gnu99 -I.  -c -o genperf.o `test -f tools/genperf/genperf.c || echo './'`tools/genperf/genperf.c\ngcc -std=gnu99 -I.  -c -o gp-perfect.o `test -f tools/genperf/perfect.c || echo './'`tools/genperf/perfect.c\ngcc -std=gnu99 -I.  -c -o gp-phash.o `test -f libyasm/phash.c || echo './'`libyasm/phash.c\ngcc -std=gnu99 -I.  -c -o gp-xmalloc.o `test -f libyasm/xmalloc.c || echo './'`libyasm/xmalloc.c\ngcc -std=gnu99 -I.  -c -o gp-xstrdup.o `test -f libyasm/xstrdup.c || echo './'`libyasm/xstrdup.c\ngcc -std=gnu99 -o genperf.exe  genperf.o gp-perfect.o  gp-phash.o gp-xmalloc.o gp-xstrdup.o\n./genperf.exe x86insn_nasm.gperf x86insn_nasm.c\nfound distinct (A,B) on attempt 19\nbuilt perfect hash table of size 512\n./genperf.exe x86insn_gas.gperf x86insn_gas.c\nfound distinct (A,B) on attempt 1640\nbuilt perfect hash table of size 512\ngcc -std=gnu99 -I.  -c -o re2c-main.o `test -f tools/re2c/main.c || echo './'`tools/re2c/main.c\ngcc -std=gnu99 -I.  -c -o re2c-code.o `test -f tools/re2c/code.c || echo './'`tools/re2c/code.c\ngcc -std=gnu99 -I.  -c -o re2c-dfa.o `test -f tools/re2c/dfa.c || echo './'`tools/re2c/dfa.c\ngcc -std=gnu99 -I.  -c -o re2c-parser.o `test -f tools/re2c/parser.c || echo './'`tools/re2c/parser.c\nMakefile:3665: recipe for target `re2c-parser.o' failed\nmake[4]: *** [re2c-parser.o] Error 1\nmake[4]: Leaving directory `/home/Administrator/sage-4.8.alpha3/spkg/build/mpir-2.1.3.p8/src/yasm'\nMakefile:772: recipe for target `all-recursive' failed\nmake[3]: *** [all-recursive] Error 1\nmake[3]: Leaving directory `/home/Administrator/sage-4.8.alpha3/spkg/build/mpir-2.1.3.p8/src'\nMakefile:603: recipe for target `all' failed\nmake[2]: *** [all] Error 2\nmake[2]: Leaving directory `/home/Administrator/sage-4.8.alpha3/spkg/build/mpir-2.1.3.p8/src'\nError building MPIR.\n\nreal    17m31.973s\nuser    0m42.992s\nsys     1m0.848s\n************************************************************************\nError installing package mpir-2.1.3.p8\n************************************************************************\n```\nInterpreting this error is definitely beyond my pay grade.",
    "created_at": "2011-12-03T21:31:22Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131709",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:1'></a>
I fixed this with a jury-rigged spkg [here](http://sage.math.washington.edu/home/kcrisman/mpir-2.1.3.p8.spkg).  Patch attached, just for reference.

Next error:

```
Making all in yasm
make[4]: Entering directory `/home/Administrator/sage-4.8.alpha3/spkg/build/mpir-2.1.3.p8/src/yasm'
gcc -std=gnu99 -I.  -c -o genperf.o `test -f tools/genperf/genperf.c || echo './'`tools/genperf/genperf.c
gcc -std=gnu99 -I.  -c -o gp-perfect.o `test -f tools/genperf/perfect.c || echo './'`tools/genperf/perfect.c
gcc -std=gnu99 -I.  -c -o gp-phash.o `test -f libyasm/phash.c || echo './'`libyasm/phash.c
gcc -std=gnu99 -I.  -c -o gp-xmalloc.o `test -f libyasm/xmalloc.c || echo './'`libyasm/xmalloc.c
gcc -std=gnu99 -I.  -c -o gp-xstrdup.o `test -f libyasm/xstrdup.c || echo './'`libyasm/xstrdup.c
gcc -std=gnu99 -o genperf.exe  genperf.o gp-perfect.o  gp-phash.o gp-xmalloc.o gp-xstrdup.o
./genperf.exe x86insn_nasm.gperf x86insn_nasm.c
found distinct (A,B) on attempt 19
built perfect hash table of size 512
./genperf.exe x86insn_gas.gperf x86insn_gas.c
found distinct (A,B) on attempt 1640
built perfect hash table of size 512
gcc -std=gnu99 -I.  -c -o re2c-main.o `test -f tools/re2c/main.c || echo './'`tools/re2c/main.c
gcc -std=gnu99 -I.  -c -o re2c-code.o `test -f tools/re2c/code.c || echo './'`tools/re2c/code.c
gcc -std=gnu99 -I.  -c -o re2c-dfa.o `test -f tools/re2c/dfa.c || echo './'`tools/re2c/dfa.c
gcc -std=gnu99 -I.  -c -o re2c-parser.o `test -f tools/re2c/parser.c || echo './'`tools/re2c/parser.c
Makefile:3665: recipe for target `re2c-parser.o' failed
make[4]: *** [re2c-parser.o] Error 1
make[4]: Leaving directory `/home/Administrator/sage-4.8.alpha3/spkg/build/mpir-2.1.3.p8/src/yasm'
Makefile:772: recipe for target `all-recursive' failed
make[3]: *** [all-recursive] Error 1
make[3]: Leaving directory `/home/Administrator/sage-4.8.alpha3/spkg/build/mpir-2.1.3.p8/src'
Makefile:603: recipe for target `all' failed
make[2]: *** [all] Error 2
make[2]: Leaving directory `/home/Administrator/sage-4.8.alpha3/spkg/build/mpir-2.1.3.p8/src'
Error building MPIR.

real    17m31.973s
user    0m42.992s
sys     1m0.848s
************************************************************************
Error installing package mpir-2.1.3.p8
************************************************************************
```
Interpreting this error is definitely beyond my pay grade.



---

archive/issue_comments_131710.json:
```json
{
    "body": "For reference only - don't build static library",
    "created_at": "2011-12-03T21:32:03Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131710",
    "user": "https://github.com/kcrisman"
}
```

For reference only - don't build static library



---

archive/attachments_016705.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "draft-of-diff-mpir-2.1.3.p7-p8.diff",
    "asset_url": "tarball://root/attachments/ticket12115/draft-of-diff-mpir-2.1.3.p7-p8.diff",
    "created_at": "2011-12-04T03:00:18Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket12115/draft-of-diff-mpir-2.1.3.p7-p8.diff",
    "user": "https://github.com/kcrisman"
}
```



---

archive/issue_comments_131711.json:
```json
{
    "body": "<a id='comment:2'></a>\n**Attachment:** [draft-of-diff-mpir-2.1.3.p7-p8.diff](https://github.com/sagemath/sage/files/ticket12115/draft-of-diff-mpir-2.1.3.p7-p8.diff)\n\nThe original reported issue is explained best [at this post](http://groups.google.com/group/sage-devel/browse_thread/thread/cff8c36d6099f0f0/f78d8f753e332847?show_docid=f78d8f753e332847).  So apparently we can't build both, so what is the best solution?\n\n---\nApparently the ysam problem is a race condition; see [this post](http://groups.google.com/group/sage-devel/browse_thread/thread/cff8c36d6099f0f0/45bb67f6d784dd2e?show_docid=45bb67f6d784dd2e).  This would be fixed by mpir upgrading ysam, according to this.",
    "created_at": "2011-12-04T03:00:18Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131711",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:2'></a>
**Attachment:** [draft-of-diff-mpir-2.1.3.p7-p8.diff](https://github.com/sagemath/sage/files/ticket12115/draft-of-diff-mpir-2.1.3.p7-p8.diff)

The original reported issue is explained best [at this post](http://groups.google.com/group/sage-devel/browse_thread/thread/cff8c36d6099f0f0/f78d8f753e332847?show_docid=f78d8f753e332847).  So apparently we can't build both, so what is the best solution?

---
Apparently the ysam problem is a race condition; see [this post](http://groups.google.com/group/sage-devel/browse_thread/thread/cff8c36d6099f0f0/45bb67f6d784dd2e?show_docid=45bb67f6d784dd2e).  This would be fixed by mpir upgrading ysam, according to this.



---

archive/issue_comments_131712.json:
```json
{
    "body": "**Upstream:** None of the above - read trac for reasoning.",
    "created_at": "2011-12-04T03:00:18Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131712",
    "user": "https://github.com/kcrisman"
}
```

**Upstream:** None of the above - read trac for reasoning.



---

archive/issue_comments_131713.json:
```json
{
    "body": "<a id='comment:3'></a>\nMPIR has upgraded this in a release candidate.  See [this mpir-devel post](http://groups.google.com/group/mpir-devel/browse_thread/thread/f7642b31d07e94df) and [this mpir release](http://www.mpir.org/mpir-2.5.0-rc1.tar.bz2).\n\n---\n\nSo what should we do about the static library issue?   Will this break something if we revert that?",
    "created_at": "2011-12-07T03:31:22Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131713",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:3'></a>
MPIR has upgraded this in a release candidate.  See [this mpir-devel post](http://groups.google.com/group/mpir-devel/browse_thread/thread/f7642b31d07e94df) and [this mpir release](http://www.mpir.org/mpir-2.5.0-rc1.tar.bz2).

---

So what should we do about the static library issue?   Will this break something if we revert that?



---

archive/issue_comments_131714.json:
```json
{
    "body": "**Changing upstream** from \"None of the above - read trac for reasoning.\" to \"Fixed upstream, in a later stable release.\".",
    "created_at": "2011-12-07T03:31:22Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131714",
    "user": "https://github.com/kcrisman"
}
```

**Changing upstream** from "None of the above - read trac for reasoning." to "Fixed upstream, in a later stable release.".



---

archive/issue_comments_131715.json:
```json
{
    "body": "<a id='comment:4'></a>\nI get a different problem on Windows XP on the new MPIR.  \n\n```\n../yasm/yasm -I .. -f elf64 -D GSYM_PREFIX lshift.as -DDLL_EXPORT -D PIC -o .libs/lshift.o\n/bin/sh ../libtool --mode=compile --tag=CC ../mpn/m4-ccas --m4=\"m4\" gcc -std=gnu99 -c -DHAVE_CONFIG_H    -m32 -O2 -fomit-frame-pointer -mtune=k8 -march=k8   -D__GMP_WITHIN_GMP -I..  -DOPERATION_`echo rshift | sed 's/_$//'` -I. -I..  `test -f 'rshift.asm' || echo './'`rshift.asm\n ../mpn/m4-ccas --m4=m4 gcc -std=gnu99 -c -DHAVE_CONFIG_H -m32 -O2 -fomit-frame-pointer -mtune=k8 -march=k8 -D__GMP_WITHIN_GMP -I.. -DOPERATION_rshift -I. -I.. rshift.asm  -DDLL_EXPORT -DPIC -o .libs/rshift.o\nm4  -DHAVE_CONFIG_H -D__GMP_WITHIN_GMP -DOPERATION_rshift -DDLL_EXPORT -DPIC rshift.asm >tmp-rshift.s\n gcc -std=gnu99 -c -DHAVE_CONFIG_H -m32 -O2 -fomit-frame-pointer -mtune=k8 -march=k8 -D__GMP_WITHIN_GMP -I.. -DOPERATION_rshift -I. -I.. tmp-rshift.s -DDLL_EXPORT -DPIC -o .libs/rshift.o\ntmp-rshift.s: Assembler messages:\ntmp-rshift.s:53: Error: bad register name `%rcx'\ntmp-rshift.s:55: Error: bad register name `%rax'\ntmp-rshift.s:56: Error: bad register name `%rcx'\ntmp-rshift.s:59: Error: bad register name `%rax'\ntmp-rshift.s:61: Error: bad register name `%rcx'\ntmp-rshift.s:62: Error: bad register name `%rsi,%rdx,8)'\ntmp-rshift.s:63: Error: bad register name `%rdi,%rdx,8)'\ntmp-rshift.s:64: Error: bad register name `%rdx'\ntmp-rshift.s:65: Error: bad register name `%rsi,%rcx,8)'\ntmp-rshift.s:70: Error: bad register name `%rax'\ntmp-rshift.s:76: Error: bad register name `%rsi,%rcx,8)'\ntmp-rshift.s:80: Error: bad register name `%rdi,%rcx,8)'\ntmp-rshift.s:82: Error: bad register name `%rsi,%rcx,8)'\ntmp-rshift.s:86: Error: bad register name `%rdi,%rcx,8)'\ntmp-rshift.s:88: Error: bad register name `%rsi,%rcx,8)'\ntmp-rshift.s:92: Error: bad register name `%rsi,%rcx,8)'\ntmp-rshift.s:93: Error: bad register name `%rdi,%rcx,8)'\ntmp-rshift.s:98: Error: bad register name `%rdi,%rcx,8)'\ntmp-rshift.s:100: Error: bad register name `%rcx'\ntmp-rshift.s:103: Error: bad register name `%rcx'\ntmp-rshift.s:108: Error: bad register name `%rsi,%rcx,8)'\ntmp-rshift.s:112: Error: bad register name `%rdi,%rcx,8)'\ntmp-rshift.s:114: Error: bad register name `%rsi,%rcx,8)'\ntmp-rshift.s:118: Error: bad register name `%rdi,%rcx,8)'\ntmp-rshift.s:120: Error: bad register name `%rsi,%rcx,8)'\ntmp-rshift.s:124: Error: bad register name `%rdi,%rcx,8)'\ntmp-rshift.s:126: Error: bad register name `%rdi,%rcx,8)'\ntmp-rshift.s:131: Error: bad register name `%rsi,%rcx,8)'\ntmp-rshift.s:135: Error: bad register name `%rdi,%rcx,8)'\ntmp-rshift.s:137: Error: bad register name `%rsi,%rcx,8)'\ntmp-rshift.s:141: Error: bad register name `%rdi,%rcx,8)'\ntmp-rshift.s:143: Error: bad register name `%rdi,%rcx,8)'\ntmp-rshift.s:148: Error: bad register name `%rsi,%rcx,8)'\ntmp-rshift.s:152: Error: bad register name `%rdi,%rcx,8)'\ntmp-rshift.s:154: Error: bad register name `%rdi,%rcx,8)'\ntmp-rshift.s:159: Error: bad register name `%rdi,%rcx,8)'\nMakefile:605: recipe for target `rshift.lo' failed\nmake[4]: *** [rshift.lo] Error 1\nmake[4]: Leaving directory `/home/SageUser/sage-4.8.alpha3/spkg/build/mpir-2.1.3.p8/src/mpn'\nMakefile:772: recipe for target `all-recursive' failed\nmake[3]: *** [all-recursive] Error 1\nmake[3]: Leaving directory `/home/SageUser/sage-4.8.alpha3/spkg/build/mpir-2.1.3.p8/src'\nMakefile:603: recipe for target `all' failed\nmake[2]: *** [all] Error 2\nmake[2]: Leaving directory `/home/SageUser/sage-4.8.alpha3/spkg/build/mpir-2.1.3.p8/src'\nError building MPIR.\n\nreal    15m36.246s\nuser    12m36.996s\nsys     11m12.666s\n************************************************************************\nError installing package mpir-2.1.3.p8\n************************************************************************\n```\nHowever, given that this has something to do with yasm, perhaps the new yasm would fix it?  Or is this something that would be fixed by rebasing?  (I don't see anything about forking, but I don't know how to interpret assembler (!) messages.)",
    "created_at": "2011-12-10T20:00:19Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131715",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:4'></a>
I get a different problem on Windows XP on the new MPIR.  

```
../yasm/yasm -I .. -f elf64 -D GSYM_PREFIX lshift.as -DDLL_EXPORT -D PIC -o .libs/lshift.o
/bin/sh ../libtool --mode=compile --tag=CC ../mpn/m4-ccas --m4="m4" gcc -std=gnu99 -c -DHAVE_CONFIG_H    -m32 -O2 -fomit-frame-pointer -mtune=k8 -march=k8   -D__GMP_WITHIN_GMP -I..  -DOPERATION_`echo rshift | sed 's/_$//'` -I. -I..  `test -f 'rshift.asm' || echo './'`rshift.asm
 ../mpn/m4-ccas --m4=m4 gcc -std=gnu99 -c -DHAVE_CONFIG_H -m32 -O2 -fomit-frame-pointer -mtune=k8 -march=k8 -D__GMP_WITHIN_GMP -I.. -DOPERATION_rshift -I. -I.. rshift.asm  -DDLL_EXPORT -DPIC -o .libs/rshift.o
m4  -DHAVE_CONFIG_H -D__GMP_WITHIN_GMP -DOPERATION_rshift -DDLL_EXPORT -DPIC rshift.asm >tmp-rshift.s
 gcc -std=gnu99 -c -DHAVE_CONFIG_H -m32 -O2 -fomit-frame-pointer -mtune=k8 -march=k8 -D__GMP_WITHIN_GMP -I.. -DOPERATION_rshift -I. -I.. tmp-rshift.s -DDLL_EXPORT -DPIC -o .libs/rshift.o
tmp-rshift.s: Assembler messages:
tmp-rshift.s:53: Error: bad register name `%rcx'
tmp-rshift.s:55: Error: bad register name `%rax'
tmp-rshift.s:56: Error: bad register name `%rcx'
tmp-rshift.s:59: Error: bad register name `%rax'
tmp-rshift.s:61: Error: bad register name `%rcx'
tmp-rshift.s:62: Error: bad register name `%rsi,%rdx,8)'
tmp-rshift.s:63: Error: bad register name `%rdi,%rdx,8)'
tmp-rshift.s:64: Error: bad register name `%rdx'
tmp-rshift.s:65: Error: bad register name `%rsi,%rcx,8)'
tmp-rshift.s:70: Error: bad register name `%rax'
tmp-rshift.s:76: Error: bad register name `%rsi,%rcx,8)'
tmp-rshift.s:80: Error: bad register name `%rdi,%rcx,8)'
tmp-rshift.s:82: Error: bad register name `%rsi,%rcx,8)'
tmp-rshift.s:86: Error: bad register name `%rdi,%rcx,8)'
tmp-rshift.s:88: Error: bad register name `%rsi,%rcx,8)'
tmp-rshift.s:92: Error: bad register name `%rsi,%rcx,8)'
tmp-rshift.s:93: Error: bad register name `%rdi,%rcx,8)'
tmp-rshift.s:98: Error: bad register name `%rdi,%rcx,8)'
tmp-rshift.s:100: Error: bad register name `%rcx'
tmp-rshift.s:103: Error: bad register name `%rcx'
tmp-rshift.s:108: Error: bad register name `%rsi,%rcx,8)'
tmp-rshift.s:112: Error: bad register name `%rdi,%rcx,8)'
tmp-rshift.s:114: Error: bad register name `%rsi,%rcx,8)'
tmp-rshift.s:118: Error: bad register name `%rdi,%rcx,8)'
tmp-rshift.s:120: Error: bad register name `%rsi,%rcx,8)'
tmp-rshift.s:124: Error: bad register name `%rdi,%rcx,8)'
tmp-rshift.s:126: Error: bad register name `%rdi,%rcx,8)'
tmp-rshift.s:131: Error: bad register name `%rsi,%rcx,8)'
tmp-rshift.s:135: Error: bad register name `%rdi,%rcx,8)'
tmp-rshift.s:137: Error: bad register name `%rsi,%rcx,8)'
tmp-rshift.s:141: Error: bad register name `%rdi,%rcx,8)'
tmp-rshift.s:143: Error: bad register name `%rdi,%rcx,8)'
tmp-rshift.s:148: Error: bad register name `%rsi,%rcx,8)'
tmp-rshift.s:152: Error: bad register name `%rdi,%rcx,8)'
tmp-rshift.s:154: Error: bad register name `%rdi,%rcx,8)'
tmp-rshift.s:159: Error: bad register name `%rdi,%rcx,8)'
Makefile:605: recipe for target `rshift.lo' failed
make[4]: *** [rshift.lo] Error 1
make[4]: Leaving directory `/home/SageUser/sage-4.8.alpha3/spkg/build/mpir-2.1.3.p8/src/mpn'
Makefile:772: recipe for target `all-recursive' failed
make[3]: *** [all-recursive] Error 1
make[3]: Leaving directory `/home/SageUser/sage-4.8.alpha3/spkg/build/mpir-2.1.3.p8/src'
Makefile:603: recipe for target `all' failed
make[2]: *** [all] Error 2
make[2]: Leaving directory `/home/SageUser/sage-4.8.alpha3/spkg/build/mpir-2.1.3.p8/src'
Error building MPIR.

real    15m36.246s
user    12m36.996s
sys     11m12.666s
************************************************************************
Error installing package mpir-2.1.3.p8
************************************************************************
```
However, given that this has something to do with yasm, perhaps the new yasm would fix it?  Or is this something that would be fixed by rebasing?  (I don't see anything about forking, but I don't know how to interpret assembler (!) messages.)



---

archive/issue_comments_131716.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [kcrisman](#comment%3A4):\n> I get a different problem on Windows XP on the new MPIR.  \n\nthis is a typical assembler error (something to do with the misconfiguration/mismatch of commands for particular hardware).\nNothing to do with Cygwin per se. Hopefully can be fixed by yasm upgrade.",
    "created_at": "2011-12-11T02:42:52Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131716",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:5'></a>
Replying to [kcrisman](#comment%3A4):
> I get a different problem on Windows XP on the new MPIR.  

this is a typical assembler error (something to do with the misconfiguration/mismatch of commands for particular hardware).
Nothing to do with Cygwin per se. Hopefully can be fixed by yasm upgrade.



---

archive/issue_comments_131717.json:
```json
{
    "body": "<a id='comment:6'></a>\nAny fix here will have to be based on #12139, the new p8.",
    "created_at": "2011-12-15T02:18:22Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131717",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:6'></a>
Any fix here will have to be based on #12139, the new p8.



---

archive/issue_comments_131718.json:
```json
{
    "body": "<a id='comment:7'></a>\n> Any fix here will have to be based on #12139, the new p8.\n\nThere is now a p9 at #12131.",
    "created_at": "2011-12-16T21:54:18Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131718",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:7'></a>
> Any fix here will have to be based on #12139, the new p8.

There is now a p9 at #12131.



---

archive/issue_comments_131719.json:
```json
{
    "body": "<a id='comment:8'></a>\nIn the mean time, MPIR has been upgraded again to version 2.4.0, latest spkg is at #12751.",
    "created_at": "2012-05-28T21:39:16Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131719",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'></a>
In the mean time, MPIR has been upgraded again to version 2.4.0, latest spkg is at #12751.



---

archive/issue_comments_131720.json:
```json
{
    "body": "<a id='comment:9'></a>\nI get a similar \"bad register name\" failure with Cygwin 1.17... on Windows 7 64 bits with Sage 5.1.rc1.",
    "created_at": "2012-07-10T22:37:07Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131720",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:9'></a>
I get a similar "bad register name" failure with Cygwin 1.17... on Windows 7 64 bits with Sage 5.1.rc1.



---

archive/issue_comments_131721.json:
```json
{
    "body": "<a id='comment:10'></a>\nI've get similar errors with the tentative spkg of MPIR 2.5.1 of #13137 (by the way they occur in tmp_mul-1.s as with the standard 5.1.rc1 spkg).\nWhat's strange is that I have no problem compiling upstream MPIR 2.5.1...",
    "created_at": "2012-07-11T00:28:33Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131721",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:10'></a>
I've get similar errors with the tentative spkg of MPIR 2.5.1 of #13137 (by the way they occur in tmp_mul-1.s as with the standard 5.1.rc1 spkg).
What's strange is that I have no problem compiling upstream MPIR 2.5.1...



---

archive/issue_comments_131722.json:
```json
{
    "body": "<a id='comment:11'></a>\nLooking at #8664 gave some hints, and checking the log, I see some core2 in mtune and march.\nAlthough -m32 is set, maybe some 64 bits stuff...\nI'm trying again with ABI=32 set.",
    "created_at": "2012-07-11T00:34:55Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131722",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:11'></a>
Looking at #8664 gave some hints, and checking the log, I see some core2 in mtune and march.
Although -m32 is set, maybe some 64 bits stuff...
I'm trying again with ABI=32 set.



---

archive/issue_comments_131723.json:
```json
{
    "body": "<a id='comment:12'></a>\nSetting ABI=32 solves the problem.\nI guess the right solution is to define ABI=32 by default on Cygwin as it is only 32 bits for the moment.\nThe day it gets 64 bits, this can be changed.",
    "created_at": "2012-07-11T01:53:42Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131723",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:12'></a>
Setting ABI=32 solves the problem.
I guess the right solution is to define ABI=32 by default on Cygwin as it is only 32 bits for the moment.
The day it gets 64 bits, this can be changed.



---

archive/issue_comments_131724.json:
```json
{
    "body": "<a id='comment:13'></a>\nOh and that was with the MPIR 2.5.1 spkg, but I guess trying with the 2.4.0 would give the same result.",
    "created_at": "2012-07-11T01:54:27Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131724",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:13'></a>
Oh and that was with the MPIR 2.5.1 spkg, but I guess trying with the 2.4.0 would give the same result.



---

archive/issue_comments_131725.json:
```json
{
    "body": "<a id='comment:14'></a>\nThanks for trying things on Cygwin again!  I gave up a while ago, but if you can keep build instructions up-to-date at [CygwinPort](CygwinPort) and #6743, that would be wonderful.",
    "created_at": "2012-07-11T02:05:01Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131725",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:14'></a>
Thanks for trying things on Cygwin again!  I gave up a while ago, but if you can keep build instructions up-to-date at [CygwinPort](CygwinPort) and #6743, that would be wonderful.



---

archive/issue_comments_131726.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [jpflori](#comment%3A9):\n> I get a similar \"bad register name\" failure with Cygwin 1.17... on Windows 7 64 bits with Sage 5.1.rc1.\n\nCould you please post the mpir-2.4.0.p5.log file?",
    "created_at": "2012-07-11T08:05:16Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131726",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:15'></a>
Replying to [jpflori](#comment%3A9):
> I get a similar "bad register name" failure with Cygwin 1.17... on Windows 7 64 bits with Sage 5.1.rc1.

Could you please post the mpir-2.4.0.p5.log file?



---

archive/attachments_016706.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "mpir-2.4.0.p5.log",
    "asset_url": "tarball://root/attachments/ticket12115/mpir-2.4.0.p5.log",
    "created_at": "2012-07-11T08:25:19Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket12115/mpir-2.4.0.p5.log",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```



---

archive/issue_comments_131727.json:
```json
{
    "body": "**Attachment:** [mpir-2.4.0.p5.log](https://github.com/sagemath/sage/files/ticket12115/mpir-2.4.0.p5.log)",
    "created_at": "2012-07-11T08:25:19Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131727",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Attachment:** [mpir-2.4.0.p5.log](https://github.com/sagemath/sage/files/ticket12115/mpir-2.4.0.p5.log)



---

archive/attachments_016707.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "mpir-2.5.1.p1.log",
    "asset_url": "tarball://root/attachments/ticket12115/mpir-2.5.1.p1.log",
    "created_at": "2012-07-11T08:25:55Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket12115/mpir-2.5.1.p1.log",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```



---

archive/issue_comments_131728.json:
```json
{
    "body": "**Attachment:** [mpir-2.5.1.p1.log](https://github.com/sagemath/sage/files/ticket12115/mpir-2.5.1.p1.log)",
    "created_at": "2012-07-11T08:25:55Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131728",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Attachment:** [mpir-2.5.1.p1.log](https://github.com/sagemath/sage/files/ticket12115/mpir-2.5.1.p1.log)



---

archive/attachments_016708.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "mpir-2.4.0.p6.log",
    "asset_url": "tarball://root/attachments/ticket12115/mpir-2.4.0.p6.log",
    "created_at": "2012-07-11T08:30:40Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket12115/mpir-2.4.0.p6.log",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```



---

archive/issue_comments_131729.json:
```json
{
    "body": "<a id='comment:16'></a>\n**Attachment:** [mpir-2.4.0.p6.log](https://github.com/sagemath/sage/files/ticket12115/mpir-2.4.0.p6.log)\n\nHave a look at the 2.4.0.p6 log (the p5 fails because of the static AND shared problem).\nThe 2.5.1.p1 includes several logs (sorry its large) and the first ones should reveal a similar failure.\nThe last log in 2.5.1.p1 was generated with ABI=32 and succeeded.",
    "created_at": "2012-07-11T08:30:40Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131729",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:16'></a>
**Attachment:** [mpir-2.4.0.p6.log](https://github.com/sagemath/sage/files/ticket12115/mpir-2.4.0.p6.log)

Have a look at the 2.4.0.p6 log (the p5 fails because of the static AND shared problem).
The 2.5.1.p1 includes several logs (sorry its large) and the first ones should reveal a similar failure.
The last log in 2.5.1.p1 was generated with ABI=32 and succeeded.



---

archive/issue_comments_131730.json:
```json
{
    "body": "<a id='comment:17'></a>\nI understand the problem and it's trivial to fix.\nWhere did you get this mpir-2.4.0.p6 from?\nThere is an mpir-2.4.0.p6 merged in sage-5.2.beta1 (from #12751) but I doubt you're referring to that one.",
    "created_at": "2012-07-11T08:45:49Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131730",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'></a>
I understand the problem and it's trivial to fix.
Where did you get this mpir-2.4.0.p6 from?
There is an mpir-2.4.0.p6 merged in sage-5.2.beta1 (from #12751) but I doubt you're referring to that one.



---

archive/issue_comments_131731.json:
```json
{
    "body": "<a id='comment:18'></a>\nI bumped the version number for my experiments.",
    "created_at": "2012-07-11T15:15:11Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131731",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:18'></a>
I bumped the version number for my experiments.



---

archive/issue_comments_131732.json:
```json
{
    "body": "**Author:** Karl-Dieter Crisman, Jean-Pierre Flori",
    "created_at": "2012-08-01T12:53:52Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131732",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Author:** Karl-Dieter Crisman, Jean-Pierre Flori



---

archive/issue_comments_131733.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"mpir cygwin\".",
    "created_at": "2012-08-01T12:53:52Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131733",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Changing keywords** from "" to "mpir cygwin".



---

archive/issue_comments_131734.json:
```json
{
    "body": "**Changing upstream** from \"Fixed upstream, in a later stable release.\" to \"None of the above - read trac for reasoning.\".",
    "created_at": "2012-08-01T12:53:52Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131734",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Changing upstream** from "Fixed upstream, in a later stable release." to "None of the above - read trac for reasoning.".



---

archive/issue_comments_131735.json:
```json
{
    "body": "<a id='comment:19'></a>\nUpdated spkg based on mpir-2.4.0.p6 available at\nhttp://perso.telecom-paristech.fr/~flori/sage/mpir-2.4.0.p7.spkg\n\nThis chooses to build the shared library only and sets ABI=32 on Cygwin.",
    "created_at": "2012-08-01T12:53:52Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131735",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:19'></a>
Updated spkg based on mpir-2.4.0.p6 available at
http://perso.telecom-paristech.fr/~flori/sage/mpir-2.4.0.p7.spkg

This chooses to build the shared library only and sets ABI=32 on Cygwin.



---

archive/issue_events_098297.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2012-08-01T12:53:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12115#event-98297"
}
```



---

archive/issue_comments_131736.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,63 +1,6 @@\n-I have a repeatable failure.  This is presumably due to the MPIR \n-upgrade in 4.8.alpha0 at #8664.\n+The recent MPIR versions can only be built shared OR static on Cygwin, not both.\n+Moreover, MPIR configure scripts gets confused if Cygwin, which is only 32 bits, is ran on a 64 bits Windows.\n \n-```\n-/home/Administrator/sage-4.8.alpha3/spkg/pipestatus \"sage-spkg \n-${SAGE_SPKG_OPTS} mpir-2.1.3.p7 2>&1\" \"tee -a \n-/home/Administrator/sage-4.8.alpha3/spkg/logs/mpir-2.1.3.p7.log\" \n-mpir-2.1.3.p7 \n-Machine: \n-CYGWIN_NT-6.1-WOW64 CET03791 1.7.9(0.237/5/3) 2011-03-29 10:10 i686 \n-Cygwin \n-Deleting directories from past builds of previous/current versions of \n-mpir-2.1.3.p7 \n-Extracting package \n-/home/Administrator/sage-4.8.alpha3/spkg/standard/mpir-2.1.3.p7.spkg \n-... \n--rw-r--r-- 1 Administrator None 3760213 Oct 30 20:25 \n-/home/Administrator/sage-4.8.alpha3/spkg/standard/mpir-2.1.3.p7.spkg \n-Finished extraction \n-**************************************************** \n-Host system \n-uname -a: \n-CYGWIN_NT-6.1-WOW64 CET03791 1.7.9(0.237/5/3) 2011-03-29 10:10 i686 \n-Cygwin \n-**************************************************** \n-<snip>\n-checking for BSD-compatible nm... /usr/bin/nm -B \n-configure: error: cannot build both static and DLL, since mpir.h is \n-different for each. \n-Use \"--disable-static --enable-shared\" to build just a DLL. \n-Error configuring MPIR. (See above for the options passed to it.) \n-real    2m6.922s \n-user    0m9.886s \n-sys     0m13.056s \n-************************************************************************ \n-Error installing package mpir-2.1.3.p7 \n-************************************************************************ \n-Please email sage-devel (http://groups.google.com/group/sage-devel) \n-explaining the problem and including the relevant part of the log file \n- /home/Administrator/sage-4.8.alpha3/spkg/logs/mpir-2.1.3.p7.log \n-Describe your computer, operating system, etc. \n-If you want to try to fix the problem yourself, *don't* just cd to \n-/home/Administrator/sage-4.8.alpha3/spkg/build/mpir-2.1.3.p7 and type \n-'make' or whatever is appropriate. \n-Instead, the following commands setup all environment variables \n-correctly and load a subshell for you to debug the error: \n- (cd '/home/Administrator/sage-4.8.alpha3/spkg/build/mpir-2.1.3.p7' \n-&& '/home/Administrator/sage-4.8.alpha3/sage' -sh) \n-When you are done debugging, you can type \"exit\" to leave the \n-subshell. \n-************************************************************************ \n-standard/deps:208: recipe for target `installed/mpir-2.1.3.p7' failed \n-```\n-This is due to the change in mpir-2.1.3.p1 that enables the static library.\n+Hence the following spkg sets ABI=32 (to tackle the second problem) and only builds a shared version of the library (to tackle the first one).\n \n-```\n--    SAGE_CONF_OPTS=\"--enable-shared --disable-static\" \n-+   # Also build the static library to be used by e.g. ECM: \n-+   # SAGE_CONF_OPTS=\"--enable-shared --disable-static\" \n-+   SAGE_CONF_OPTS=\"--enable-shared --enable-static\" \n-+   # (Further options to 'configure' are added below.) \n-```\n-\n+http://perso.telecom-paristech.fr/~flori/sage/mpir-2.4.0.p7.spkg\n``````\n",
    "created_at": "2012-08-01T12:53:52Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131736",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,63 +1,6 @@
-I have a repeatable failure.  This is presumably due to the MPIR 
-upgrade in 4.8.alpha0 at #8664.
+The recent MPIR versions can only be built shared OR static on Cygwin, not both.
+Moreover, MPIR configure scripts gets confused if Cygwin, which is only 32 bits, is ran on a 64 bits Windows.
 
-```
-/home/Administrator/sage-4.8.alpha3/spkg/pipestatus "sage-spkg 
-${SAGE_SPKG_OPTS} mpir-2.1.3.p7 2>&1" "tee -a 
-/home/Administrator/sage-4.8.alpha3/spkg/logs/mpir-2.1.3.p7.log" 
-mpir-2.1.3.p7 
-Machine: 
-CYGWIN_NT-6.1-WOW64 CET03791 1.7.9(0.237/5/3) 2011-03-29 10:10 i686 
-Cygwin 
-Deleting directories from past builds of previous/current versions of 
-mpir-2.1.3.p7 
-Extracting package 
-/home/Administrator/sage-4.8.alpha3/spkg/standard/mpir-2.1.3.p7.spkg 
-... 
--rw-r--r-- 1 Administrator None 3760213 Oct 30 20:25 
-/home/Administrator/sage-4.8.alpha3/spkg/standard/mpir-2.1.3.p7.spkg 
-Finished extraction 
-**************************************************** 
-Host system 
-uname -a: 
-CYGWIN_NT-6.1-WOW64 CET03791 1.7.9(0.237/5/3) 2011-03-29 10:10 i686 
-Cygwin 
-**************************************************** 
-<snip>
-checking for BSD-compatible nm... /usr/bin/nm -B 
-configure: error: cannot build both static and DLL, since mpir.h is 
-different for each. 
-Use "--disable-static --enable-shared" to build just a DLL. 
-Error configuring MPIR. (See above for the options passed to it.) 
-real    2m6.922s 
-user    0m9.886s 
-sys     0m13.056s 
-************************************************************************ 
-Error installing package mpir-2.1.3.p7 
-************************************************************************ 
-Please email sage-devel (http://groups.google.com/group/sage-devel) 
-explaining the problem and including the relevant part of the log file 
- /home/Administrator/sage-4.8.alpha3/spkg/logs/mpir-2.1.3.p7.log 
-Describe your computer, operating system, etc. 
-If you want to try to fix the problem yourself, *don't* just cd to 
-/home/Administrator/sage-4.8.alpha3/spkg/build/mpir-2.1.3.p7 and type 
-'make' or whatever is appropriate. 
-Instead, the following commands setup all environment variables 
-correctly and load a subshell for you to debug the error: 
- (cd '/home/Administrator/sage-4.8.alpha3/spkg/build/mpir-2.1.3.p7' 
-&& '/home/Administrator/sage-4.8.alpha3/sage' -sh) 
-When you are done debugging, you can type "exit" to leave the 
-subshell. 
-************************************************************************ 
-standard/deps:208: recipe for target `installed/mpir-2.1.3.p7' failed 
-```
-This is due to the change in mpir-2.1.3.p1 that enables the static library.
+Hence the following spkg sets ABI=32 (to tackle the second problem) and only builds a shared version of the library (to tackle the first one).
 
-```
--    SAGE_CONF_OPTS="--enable-shared --disable-static" 
-+   # Also build the static library to be used by e.g. ECM: 
-+   # SAGE_CONF_OPTS="--enable-shared --disable-static" 
-+   SAGE_CONF_OPTS="--enable-shared --enable-static" 
-+   # (Further options to 'configure' are added below.) 
-```
-
+http://perso.telecom-paristech.fr/~flori/sage/mpir-2.4.0.p7.spkg
``````




---

archive/issue_comments_131737.json:
```json
{
    "body": "Spkg diff, for review only.",
    "created_at": "2012-08-01T12:56:04Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131737",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Spkg diff, for review only.



---

archive/issue_events_098298.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-08-02T03:24:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12115#event-98298"
}
```



---

archive/issue_events_098299.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-08-02T03:24:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12115#event-98299"
}
```



---

archive/attachments_016709.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "spkg.diff",
    "asset_url": "tarball://root/attachments/ticket12115/spkg.diff",
    "created_at": "2012-08-02T03:24:58Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket12115/spkg.diff",
    "user": "https://github.com/dimpase"
}
```



---

archive/issue_comments_131738.json:
```json
{
    "body": "<a id='comment:20'></a>\n**Attachment:** [spkg.diff](https://github.com/sagemath/sage/files/ticket12115/spkg.diff)\n\nOn my Cygwin, the new spkg hangs on \n\n```\nChecking what CFLAGS MPIR would use if they were empty...\n```\nThis might have to do with the fact that my 32-bit Win 7 is run in a VMWare VM, rather than being a \"real\" iron, but this is certainly \nnot good, one way or another.\n\nAny ideas what can be tried to see what's wrong? \n\nEDIT: perhaps I was not patient enough. I tried doing `../../sage -f mpir-2.4.0.p7.spkg` and it this part worked OK, although I waited 30 minutes or so.",
    "created_at": "2012-08-02T03:24:58Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131738",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:20'></a>
**Attachment:** [spkg.diff](https://github.com/sagemath/sage/files/ticket12115/spkg.diff)

On my Cygwin, the new spkg hangs on 

```
Checking what CFLAGS MPIR would use if they were empty...
```
This might have to do with the fact that my 32-bit Win 7 is run in a VMWare VM, rather than being a "real" iron, but this is certainly 
not good, one way or another.

Any ideas what can be tried to see what's wrong? 

EDIT: perhaps I was not patient enough. I tried doing `../../sage -f mpir-2.4.0.p7.spkg` and it this part worked OK, although I waited 30 minutes or so.



---

archive/issue_events_098300.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-08-02T04:08:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12115#event-98300"
}
```



---

archive/issue_events_098301.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-08-02T04:08:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12115#event-98301"
}
```



---

archive/issue_comments_131739.json:
```json
{
    "body": "<a id='comment:22'></a>\nYup, Cygwin is slow and MPIR configure is long.\nmoreover the spkg runs it a first time redirecting its output to some file to get the default flags...",
    "created_at": "2012-08-02T06:16:55Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131739",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:22'></a>
Yup, Cygwin is slow and MPIR configure is long.
moreover the spkg runs it a first time redirecting its output to some file to get the default flags...



---

archive/issue_comments_131740.json:
```json
{
    "body": "**Changing keywords** from \"mpir cygwin\" to \"mpir cygwin spkg\".",
    "created_at": "2012-08-02T15:49:40Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131740",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Changing keywords** from "mpir cygwin" to "mpir cygwin spkg".



---

archive/issue_comments_131741.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,3 +4,5 @@\n Hence the following spkg sets ABI=32 (to tackle the second problem) and only builds a shared version of the library (to tackle the first one).\n \n http://perso.telecom-paristech.fr/~flori/sage/mpir-2.4.0.p7.spkg\n+or\n+http://www.infres.enst.fr/~flori/sage/mpir-2.4.0.p7.spkg\n``````\n",
    "created_at": "2012-10-02T20:11:29Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131741",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,3 +4,5 @@
 Hence the following spkg sets ABI=32 (to tackle the second problem) and only builds a shared version of the library (to tackle the first one).
 
 http://perso.telecom-paristech.fr/~flori/sage/mpir-2.4.0.p7.spkg
+or
+http://www.infres.enst.fr/~flori/sage/mpir-2.4.0.p7.spkg
``````




---

archive/issue_comments_131742.json:
```json
{
    "body": "<a id='comment:25'></a>\nThis works on Cygwin on XP!",
    "created_at": "2012-10-05T14:38:57Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131742",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:25'></a>
This works on Cygwin on XP!



---

archive/issue_events_098302.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-11-23T15:17:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12115#event-98302"
}
```



---

archive/issue_events_098303.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-11-23T15:17:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12115#event-98303"
}
```



---

archive/issue_comments_131743.json:
```json
{
    "body": "<a id='comment:26'></a>\nI would be in favor of never building the static libraries on any system, though we don't have to do that in this ticket. Positive review.",
    "created_at": "2012-11-23T15:17:33Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131743",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:26'></a>
I would be in favor of never building the static libraries on any system, though we don't have to do that in this ticket. Positive review.



---

archive/issue_comments_131744.json:
```json
{
    "body": "**Reviewer:** Volker Braun",
    "created_at": "2012-11-23T15:17:33Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131744",
    "user": "https://github.com/vbraun"
}
```

**Reviewer:** Volker Braun



---

archive/issue_comments_131745.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,6 +3,4 @@\n \n Hence the following spkg sets ABI=32 (to tackle the second problem) and only builds a shared version of the library (to tackle the first one).\n \n-http://perso.telecom-paristech.fr/~flori/sage/mpir-2.4.0.p7.spkg\n-or\n-http://www.infres.enst.fr/~flori/sage/mpir-2.4.0.p7.spkg\n+http://boxen.math.washington.edu/home/jpflori/sage/mpir-2.4.0.p7.spkg\n``````\n",
    "created_at": "2012-11-24T22:37:53Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131745",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,6 +3,4 @@
 
 Hence the following spkg sets ABI=32 (to tackle the second problem) and only builds a shared version of the library (to tackle the first one).
 
-http://perso.telecom-paristech.fr/~flori/sage/mpir-2.4.0.p7.spkg
-or
-http://www.infres.enst.fr/~flori/sage/mpir-2.4.0.p7.spkg
+http://boxen.math.washington.edu/home/jpflori/sage/mpir-2.4.0.p7.spkg
``````




---

archive/issue_comments_131746.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,4 +3,4 @@\n \n Hence the following spkg sets ABI=32 (to tackle the second problem) and only builds a shared version of the library (to tackle the first one).\n \n-http://boxen.math.washington.edu/home/jpflori/sage/mpir-2.4.0.p7.spkg\n+http://boxen.math.washington.edu/home/jpflori/mpir-2.4.0.p7.spkg\n``````\n",
    "created_at": "2012-11-24T22:38:21Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131746",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,4 +3,4 @@
 
 Hence the following spkg sets ABI=32 (to tackle the second problem) and only builds a shared version of the library (to tackle the first one).
 
-http://boxen.math.washington.edu/home/jpflori/sage/mpir-2.4.0.p7.spkg
+http://boxen.math.washington.edu/home/jpflori/mpir-2.4.0.p7.spkg
``````




---

archive/issue_comments_131747.json:
```json
{
    "body": "<a id='comment:29'></a>\nThe spkg at #13137 is based on that one so this ticket should not be merger directly and closed when #13137 is merged.",
    "created_at": "2012-11-29T21:51:02Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131747",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:29'></a>
The spkg at #13137 is based on that one so this ticket should not be merger directly and closed when #13137 is merged.



---

archive/issue_comments_131748.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,3 +4,6 @@\n Hence the following spkg sets ABI=32 (to tackle the second problem) and only builds a shared version of the library (to tackle the first one).\n \n http://boxen.math.washington.edu/home/jpflori/mpir-2.4.0.p7.spkg\n+\n+Updated spkg based on this one at #13137.\n+Please use the one there.\n``````\n",
    "created_at": "2012-12-10T19:53:41Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131748",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,3 +4,6 @@
 Hence the following spkg sets ABI=32 (to tackle the second problem) and only builds a shared version of the library (to tackle the first one).
 
 http://boxen.math.washington.edu/home/jpflori/mpir-2.4.0.p7.spkg
+
+Updated spkg based on this one at #13137.
+Please use the one there.
``````




---

archive/issue_comments_131749.json:
```json
{
    "body": "**Changing reviewer** from \"Volker Braun\" to \"Volker Braun, Karl-Dieter Crisman, Jean-Pierre Flori\".",
    "created_at": "2012-12-17T22:11:13Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131749",
    "user": "https://github.com/jdemeyer"
}
```

**Changing reviewer** from "Volker Braun" to "Volker Braun, Karl-Dieter Crisman, Jean-Pierre Flori".



---

archive/issue_comments_131750.json:
```json
{
    "body": "**Changing author** from \"Karl-Dieter Crisman, Jean-Pierre Flori\" to \"\".",
    "created_at": "2012-12-17T22:11:13Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131750",
    "user": "https://github.com/jdemeyer"
}
```

**Changing author** from "Karl-Dieter Crisman, Jean-Pierre Flori" to "".



---

archive/issue_events_098304.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-12-17T22:11:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "milestone": "sage-5.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12115#event-98304"
}
```



---

archive/issue_comments_131751.json:
```json
{
    "body": "<a id='comment:32'></a>\nIn general, I think it is a bad idea not to merge a ticket just because another ticket is based on it. Imagine that some major problems arise with #13137, then this ticket here might get lost and forgetten. However, I don't know the specific situation here, so I'll let your decision stand.",
    "created_at": "2012-12-17T22:15:36Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131751",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:32'></a>
In general, I think it is a bad idea not to merge a ticket just because another ticket is based on it. Imagine that some major problems arise with #13137, then this ticket here might get lost and forgetten. However, I don't know the specific situation here, so I'll let your decision stand.



---

archive/issue_comments_131752.json:
```json
{
    "body": "**Dependencies:** #13137",
    "created_at": "2012-12-21T22:50:21Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131752",
    "user": "https://github.com/jdemeyer"
}
```

**Dependencies:** #13137



---

archive/issue_events_098305.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2013-01-11T09:01:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "milestone": "sage-5.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12115#event-98305"
}
```



---

archive/issue_comments_131753.json:
```json
{
    "body": "**Author:** Karl-Dieter Crisman, Jean-Pierre Flori",
    "created_at": "2013-01-11T09:01:27Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131753",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Author:** Karl-Dieter Crisman, Jean-Pierre Flori



---

archive/issue_comments_131754.json:
```json
{
    "body": "**Changing dependencies** from \"#13137\" to \"\".",
    "created_at": "2013-01-11T09:01:27Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131754",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Changing dependencies** from "#13137" to "".



---

archive/issue_comments_131755.json:
```json
{
    "body": "<a id='comment:34'></a>\nNow it seems that including #13137 will be painful I have to agree with you Jeroen and ask you if it's possible to include this easy fix in 5.6?\nSorry for taking the wrong decision in the beginning...",
    "created_at": "2013-01-11T09:01:27Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131755",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:34'></a>
Now it seems that including #13137 will be painful I have to agree with you Jeroen and ask you if it's possible to include this easy fix in 5.6?
Sorry for taking the wrong decision in the beginning...



---

archive/issue_events_098306.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-12T08:55:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "milestone": "sage-5.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12115#event-98306"
}
```



---

archive/issue_events_098307.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-12T08:55:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "milestone": "sage-5.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12115#event-98307"
}
```



---

archive/issue_events_098308.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-17T10:43:21Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "milestone": "sage-5.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12115#event-98308"
}
```



---

archive/issue_comments_131756.json:
```json
{
    "body": "**Changing author** from \"Karl-Dieter Crisman, Jean-Pierre Flori\" to \"\".",
    "created_at": "2013-01-17T10:43:21Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131756",
    "user": "https://github.com/jdemeyer"
}
```

**Changing author** from "Karl-Dieter Crisman, Jean-Pierre Flori" to "".



---

archive/issue_events_098309.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-17T10:43:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "label": "duplicate",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12115#event-98309"
}
```



---

archive/issue_comments_131757.json:
```json
{
    "body": "<a id='comment:37'></a>\nIt seems that #13137 is ready after all...",
    "created_at": "2013-01-17T10:43:21Z",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12115#issuecomment-131757",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:37'></a>
It seems that #13137 is ready after all...



---

archive/issue_events_098310.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-17T10:43:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12115#event-98310"
}
```



---

archive/issue_events_098311.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-17T10:43:21Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/12115",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12115#event-98311"
}
```
