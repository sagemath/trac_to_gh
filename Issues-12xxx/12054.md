# Issue 12054: crash in digraph.py

archive/issues_011882.json:
```json
{
    "body": "I compiled 4.7.2 on the Live CD and got this error:\n\nsage -t  -force_lib \"devel/sage/sage/graphs/digraph.py\" # Killed/\ncrashed\n\nI ran the test with -verbose\n\n```\nTrying:\n    cycle.size()###line 1338:_sage_    >>> cycle.size()\nExpecting:\n    5\n    # >>> dcycle.feedback_edge_set(value_only=True)\n    5.0\n**********************************************************************\nFile \"/mnt/sda6/COMPILE/sage-4.7.2/devel/sage/sage/graphs/digraph.py\",\nline 998, in __main__.example_22\nFailed example:\n    cycle.size()###line 1338:_sage_    >>> cycle.size()\nExpected:\n    5\n    # >>> dcycle.feedback_edge_set(value_only=True)\n    5.0\nGot:\n    5\n\nand then:\n\nTrying:\n    feedback = dg.feedback_edge_set()###line 1348:_sage_    >>>\nfeedback = dg.feedback_edge_set()\nExpecting nothing\nAssertion failed: orig->m > 0 && orig->n > 0\nError detected in file glpapi09.c at line 289\n/mnt/sda6/COMPILE/sage-4.7.2/local/lib/libcsage.so(print_backtrace\n+0x3b)[0xb71f231e]\n/mnt/sda6/COMPILE/sage-4.7.2/local/lib/libcsage.so(sigdie+0x17)\n[0xb71f235e]\n/mnt/sda6/COMPILE/sage-4.7.2/local/lib/libcsage.so(sage_signal_handler\n+0x1c4)[0xb71f1e97]\n[0xffffe400]\n/lib/libc.so.6(abort+0x182)[0xb7472ab2]\n/usr/local/lib/libglpk.so.0(+0x43b0e)[0xaea1eb0e]\n/usr/local/lib/libglpk.so.0(+0x439ff)[0xaea1e9ff]\n/usr/local/lib/libglpk.so.0(glp_intopt+0xae0)[0xae9e89b0]\n/mnt/sda6/COMPILE/sage-4.7.2/local/lib/python/site-packages/sage/\nnumerical/backends/glpk_backend.so(+0x5c47)[0xaea99c47]\n/mnt/sda6/COMPILE/sage-4.7.2/local/lib/python/site-packages/sage/\nnumerical/mip.so(+0x29036)[0xb0bcf036]\n/mnt/sda6/COMPILE/sage-4.7.2/local/lib/libpython2.6.so.\n1.0(PyCFunction_Call+0x128)[0xb7642c58]\n\n.lotsof that sort..\n\n/mnt/sda6/COMPILE/sage-4.7.2/local/lib/libpython2.6.so.1.0(Py_Main\n+0xc7d)[0xb76d0c5d]\npython(main+0x27)[0x8048667]\n/lib/libc.so.6(__libc_start_main+0xe6)[0xb745bbc6]\npython[0x80485a1]\n\n------------------------------------------------------------------------\nUnhandled SIGABRT: An abort() occurred in Sage.\nThis probably occurred because a *compiled* component of Sage has a\nbug\nin it and is not properly wrapped with sig_on(), sig_off(). You might\nwant to run Sage under gdb with 'sage -gdb' to debug this.\nSage will now terminate.\n------------------------------------------------------------------------\nThe doctested process was killed by signal 6\n         [5.7 s] \n\n```\n\ntread on sage-devel\n[http://groups.google.com/group/sage-devel/browse_thread/thread/e1886d5ba5ade945](http://groups.google.com/group/sage-devel/browse_thread/thread/e1886d5ba5ade945)\n\n**Assignee:** @jasongrout, @nathanncohen, @rlmill\n\n**CC:**  emil\n\n**Keywords:** digraph SIGABRT feedback_edge_set\n\n**Reviewer:** Nathann Cohen\n\nIssue created by migration from https://trac.sagemath.org/ticket/12054\n\n",
    "closed_at": "2013-04-28T12:48:53Z",
    "created_at": "2011-11-19T10:18:57Z",
    "labels": [
        "component: graph theory",
        "bug",
        "worksforme",
        "invalid"
    ],
    "title": "crash in digraph.py",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12054",
    "user": "https://trac.sagemath.org/admin/accounts/users/emil"
}
```
I compiled 4.7.2 on the Live CD and got this error:

sage -t  -force_lib "devel/sage/sage/graphs/digraph.py" # Killed/
crashed

I ran the test with -verbose

```
Trying:
    cycle.size()###line 1338:_sage_    >>> cycle.size()
Expecting:
    5
    # >>> dcycle.feedback_edge_set(value_only=True)
    5.0
**********************************************************************
File "/mnt/sda6/COMPILE/sage-4.7.2/devel/sage/sage/graphs/digraph.py",
line 998, in __main__.example_22
Failed example:
    cycle.size()###line 1338:_sage_    >>> cycle.size()
Expected:
    5
    # >>> dcycle.feedback_edge_set(value_only=True)
    5.0
Got:
    5

and then:

Trying:
    feedback = dg.feedback_edge_set()###line 1348:_sage_    >>>
feedback = dg.feedback_edge_set()
Expecting nothing
Assertion failed: orig->m > 0 && orig->n > 0
Error detected in file glpapi09.c at line 289
/mnt/sda6/COMPILE/sage-4.7.2/local/lib/libcsage.so(print_backtrace
+0x3b)[0xb71f231e]
/mnt/sda6/COMPILE/sage-4.7.2/local/lib/libcsage.so(sigdie+0x17)
[0xb71f235e]
/mnt/sda6/COMPILE/sage-4.7.2/local/lib/libcsage.so(sage_signal_handler
+0x1c4)[0xb71f1e97]
[0xffffe400]
/lib/libc.so.6(abort+0x182)[0xb7472ab2]
/usr/local/lib/libglpk.so.0(+0x43b0e)[0xaea1eb0e]
/usr/local/lib/libglpk.so.0(+0x439ff)[0xaea1e9ff]
/usr/local/lib/libglpk.so.0(glp_intopt+0xae0)[0xae9e89b0]
/mnt/sda6/COMPILE/sage-4.7.2/local/lib/python/site-packages/sage/
numerical/backends/glpk_backend.so(+0x5c47)[0xaea99c47]
/mnt/sda6/COMPILE/sage-4.7.2/local/lib/python/site-packages/sage/
numerical/mip.so(+0x29036)[0xb0bcf036]
/mnt/sda6/COMPILE/sage-4.7.2/local/lib/libpython2.6.so.
1.0(PyCFunction_Call+0x128)[0xb7642c58]

.lotsof that sort..

/mnt/sda6/COMPILE/sage-4.7.2/local/lib/libpython2.6.so.1.0(Py_Main
+0xc7d)[0xb76d0c5d]
python(main+0x27)[0x8048667]
/lib/libc.so.6(__libc_start_main+0xe6)[0xb745bbc6]
python[0x80485a1]

------------------------------------------------------------------------
Unhandled SIGABRT: An abort() occurred in Sage.
This probably occurred because a *compiled* component of Sage has a
bug
in it and is not properly wrapped with sig_on(), sig_off(). You might
want to run Sage under gdb with 'sage -gdb' to debug this.
Sage will now terminate.
------------------------------------------------------------------------
The doctested process was killed by signal 6
         [5.7 s] 

```

tread on sage-devel
[http://groups.google.com/group/sage-devel/browse_thread/thread/e1886d5ba5ade945](http://groups.google.com/group/sage-devel/browse_thread/thread/e1886d5ba5ade945)

**Assignee:** @jasongrout, @nathanncohen, @rlmill

**CC:**  emil

**Keywords:** digraph SIGABRT feedback_edge_set

**Reviewer:** Nathann Cohen

Issue created by migration from https://trac.sagemath.org/ticket/12054





---

archive/issue_events_099824.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/emil",
    "created_at": "2011-11-19T10:19:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/12054",
    "label": "component: graph theory",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12054#event-99824"
}
```



---

archive/issue_comments_132081.json:
```json
{
    "body": "**Assignee:** @jasongrout, @nathanncohen, @rlmill",
    "created_at": "2011-11-19T10:19:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12054#issuecomment-132081",
    "user": "https://trac.sagemath.org/admin/accounts/users/emil"
}
```

**Assignee:** @jasongrout, @nathanncohen, @rlmill



---

archive/issue_comments_132082.json:
```json
{
    "body": "**Changing keywords** from \"diagraph SIGABRT feedback_edge_set\" to \"digraph SIGABRT feedback_edge_set\".",
    "created_at": "2011-11-19T10:20:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12054#issuecomment-132082",
    "user": "https://trac.sagemath.org/admin/accounts/users/emil"
}
```

**Changing keywords** from "diagraph SIGABRT feedback_edge_set" to "digraph SIGABRT feedback_edge_set".



---

archive/issue_comments_132083.json:
```json
{
    "body": "<a id='comment:4'></a>\nI set Proiority to \"major\", because it is a crash. But if this is wrong please just correct that. I found no info about what is a minor or major bug yet.",
    "created_at": "2011-11-19T10:48:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12054#issuecomment-132083",
    "user": "https://trac.sagemath.org/admin/accounts/users/emil"
}
```

<a id='comment:4'></a>
I set Proiority to "major", because it is a crash. But if this is wrong please just correct that. I found no info about what is a minor or major bug yet.



---

archive/issue_events_099825.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-04-20T21:26:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/12054",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12054#event-99825"
}
```



---

archive/issue_comments_132084.json:
```json
{
    "body": "<a id='comment:5'></a>\nWell, this code has been tested for a while now, so it has probably been fixed by one of the many bugfixes in the LP code `^^;`\n\nNathann",
    "created_at": "2013-04-20T21:26:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12054#issuecomment-132084",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:5'></a>
Well, this code has been tested for a while now, so it has probably been fixed by one of the many bugfixes in the LP code `^^;`

Nathann



---

archive/issue_events_099826.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-04-20T21:27:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/12054",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12054#event-99826"
}
```



---

archive/issue_events_099827.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-04-20T21:27:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/12054",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12054#event-99827"
}
```



---

archive/issue_events_099828.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-04-20T21:27:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12054",
    "milestone": "sage-5.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12054#event-99828"
}
```



---

archive/issue_events_099829.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-04-20T21:27:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/12054",
    "label": "duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12054#event-99829"
}
```



---

archive/issue_events_099830.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-04-20T21:27:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/12054",
    "label": "bug",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12054#event-99830"
}
```



---

archive/issue_comments_132085.json:
```json
{
    "body": "**Reviewer:** Nathann Cohen",
    "created_at": "2013-04-20T21:27:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12054#issuecomment-132085",
    "user": "https://github.com/nathanncohen"
}
```

**Reviewer:** Nathann Cohen



---

archive/issue_events_099831.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-28T12:48:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/12054",
    "label": "worksforme",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12054#event-99831"
}
```



---

archive/issue_events_099832.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-28T12:48:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/12054",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12054#event-99832"
}
```



---

archive/issue_events_099833.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-28T12:48:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12054",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12054#event-99833"
}
```
