# Issue 12054: crash in digraph.py

archive/issues_011882.json:
```json
{
    "body": "I compiled 4.7.2 on the Live CD and got this error:\n\nsage -t  -force_lib \"devel/sage/sage/graphs/digraph.py\" # Killed/\ncrashed\n\nI ran the test with -verbose\n\n```\nTrying:\n    cycle.size()###line 1338:_sage_    >>> cycle.size()\nExpecting:\n    5\n    # >>> dcycle.feedback_edge_set(value_only=True)\n    5.0\n**********************************************************************\nFile \"/mnt/sda6/COMPILE/sage-4.7.2/devel/sage/sage/graphs/digraph.py\",\nline 998, in __main__.example_22\nFailed example:\n    cycle.size()###line 1338:_sage_    >>> cycle.size()\nExpected:\n    5\n    # >>> dcycle.feedback_edge_set(value_only=True)\n    5.0\nGot:\n    5\n\nand then:\n\nTrying:\n    feedback = dg.feedback_edge_set()###line 1348:_sage_    >>>\nfeedback = dg.feedback_edge_set()\nExpecting nothing\nAssertion failed: orig->m > 0 && orig->n > 0\nError detected in file glpapi09.c at line 289\n/mnt/sda6/COMPILE/sage-4.7.2/local/lib/libcsage.so(print_backtrace\n+0x3b)[0xb71f231e]\n/mnt/sda6/COMPILE/sage-4.7.2/local/lib/libcsage.so(sigdie+0x17)\n[0xb71f235e]\n/mnt/sda6/COMPILE/sage-4.7.2/local/lib/libcsage.so(sage_signal_handler\n+0x1c4)[0xb71f1e97]\n[0xffffe400]\n/lib/libc.so.6(abort+0x182)[0xb7472ab2]\n/usr/local/lib/libglpk.so.0(+0x43b0e)[0xaea1eb0e]\n/usr/local/lib/libglpk.so.0(+0x439ff)[0xaea1e9ff]\n/usr/local/lib/libglpk.so.0(glp_intopt+0xae0)[0xae9e89b0]\n/mnt/sda6/COMPILE/sage-4.7.2/local/lib/python/site-packages/sage/\nnumerical/backends/glpk_backend.so(+0x5c47)[0xaea99c47]\n/mnt/sda6/COMPILE/sage-4.7.2/local/lib/python/site-packages/sage/\nnumerical/mip.so(+0x29036)[0xb0bcf036]\n/mnt/sda6/COMPILE/sage-4.7.2/local/lib/libpython2.6.so.\n1.0(PyCFunction_Call+0x128)[0xb7642c58]\n\n.lotsof that sort..\n\n/mnt/sda6/COMPILE/sage-4.7.2/local/lib/libpython2.6.so.1.0(Py_Main\n+0xc7d)[0xb76d0c5d]\npython(main+0x27)[0x8048667]\n/lib/libc.so.6(__libc_start_main+0xe6)[0xb745bbc6]\npython[0x80485a1]\n\n------------------------------------------------------------------------\nUnhandled SIGABRT: An abort() occurred in Sage.\nThis probably occurred because a *compiled* component of Sage has a\nbug\nin it and is not properly wrapped with sig_on(), sig_off(). You might\nwant to run Sage under gdb with 'sage -gdb' to debug this.\nSage will now terminate.\n------------------------------------------------------------------------\nThe doctested process was killed by signal 6\n         [5.7 s] \n\n```\n\ntread on sage-devel\n[http://groups.google.com/group/sage-devel/browse_thread/thread/e1886d5ba5ade945](http://groups.google.com/group/sage-devel/browse_thread/thread/e1886d5ba5ade945)\n\nAssignee: jason, ncohen, rlm\n\nCC:  emil\n\nKeywords: digraph SIGABRT feedback_edge_set\n\nReviewer: Nathann Cohen\n\nResolution: worksforme\n\nIssue created by migration from https://trac.sagemath.org/ticket/12054\n\n",
    "closed_at": "2013-04-28T12:48:53Z",
    "created_at": "2011-11-19T10:18:57Z",
    "labels": [
        "component: graph theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "crash in digraph.py",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12054",
    "user": "https://trac.sagemath.org/admin/accounts/users/emil"
}
```
I compiled 4.7.2 on the Live CD and got this error:

sage -t  -force_lib "devel/sage/sage/graphs/digraph.py" # Killed/
crashed

I ran the test with -verbose

```
Trying:
    cycle.size()###line 1338:_sage_    >>> cycle.size()
Expecting:
    5
    # >>> dcycle.feedback_edge_set(value_only=True)
    5.0
**********************************************************************
File "/mnt/sda6/COMPILE/sage-4.7.2/devel/sage/sage/graphs/digraph.py",
line 998, in __main__.example_22
Failed example:
    cycle.size()###line 1338:_sage_    >>> cycle.size()
Expected:
    5
    # >>> dcycle.feedback_edge_set(value_only=True)
    5.0
Got:
    5

and then:

Trying:
    feedback = dg.feedback_edge_set()###line 1348:_sage_    >>>
feedback = dg.feedback_edge_set()
Expecting nothing
Assertion failed: orig->m > 0 && orig->n > 0
Error detected in file glpapi09.c at line 289
/mnt/sda6/COMPILE/sage-4.7.2/local/lib/libcsage.so(print_backtrace
+0x3b)[0xb71f231e]
/mnt/sda6/COMPILE/sage-4.7.2/local/lib/libcsage.so(sigdie+0x17)
[0xb71f235e]
/mnt/sda6/COMPILE/sage-4.7.2/local/lib/libcsage.so(sage_signal_handler
+0x1c4)[0xb71f1e97]
[0xffffe400]
/lib/libc.so.6(abort+0x182)[0xb7472ab2]
/usr/local/lib/libglpk.so.0(+0x43b0e)[0xaea1eb0e]
/usr/local/lib/libglpk.so.0(+0x439ff)[0xaea1e9ff]
/usr/local/lib/libglpk.so.0(glp_intopt+0xae0)[0xae9e89b0]
/mnt/sda6/COMPILE/sage-4.7.2/local/lib/python/site-packages/sage/
numerical/backends/glpk_backend.so(+0x5c47)[0xaea99c47]
/mnt/sda6/COMPILE/sage-4.7.2/local/lib/python/site-packages/sage/
numerical/mip.so(+0x29036)[0xb0bcf036]
/mnt/sda6/COMPILE/sage-4.7.2/local/lib/libpython2.6.so.
1.0(PyCFunction_Call+0x128)[0xb7642c58]

.lotsof that sort..

/mnt/sda6/COMPILE/sage-4.7.2/local/lib/libpython2.6.so.1.0(Py_Main
+0xc7d)[0xb76d0c5d]
python(main+0x27)[0x8048667]
/lib/libc.so.6(__libc_start_main+0xe6)[0xb745bbc6]
python[0x80485a1]

------------------------------------------------------------------------
Unhandled SIGABRT: An abort() occurred in Sage.
This probably occurred because a *compiled* component of Sage has a
bug
in it and is not properly wrapped with sig_on(), sig_off(). You might
want to run Sage under gdb with 'sage -gdb' to debug this.
Sage will now terminate.
------------------------------------------------------------------------
The doctested process was killed by signal 6
         [5.7 s] 

```

tread on sage-devel
[http://groups.google.com/group/sage-devel/browse_thread/thread/e1886d5ba5ade945](http://groups.google.com/group/sage-devel/browse_thread/thread/e1886d5ba5ade945)

Assignee: jason, ncohen, rlm

CC:  emil

Keywords: digraph SIGABRT feedback_edge_set

Reviewer: Nathann Cohen

Resolution: worksforme

Issue created by migration from https://trac.sagemath.org/ticket/12054





---

archive/issue_comments_166949.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to graph theory.",
    "created_at": "2011-11-19T10:19:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12054#issuecomment-166949",
    "user": "https://trac.sagemath.org/admin/accounts/users/emil"
}
```

Changing component from PLEASE CHANGE to graph theory.



---

archive/issue_comments_166950.json:
```json
{
    "body": "Changing assignee from tbd to jason, ncohen, rlm.",
    "created_at": "2011-11-19T10:19:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12054#issuecomment-166950",
    "user": "https://trac.sagemath.org/admin/accounts/users/emil"
}
```

Changing assignee from tbd to jason, ncohen, rlm.



---

archive/issue_comments_166951.json:
```json
{
    "body": "Changing keywords from \"diagraph SIGABRT feedback_edge_set\" to \"digraph SIGABRT feedback_edge_set\".",
    "created_at": "2011-11-19T10:20:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12054#issuecomment-166951",
    "user": "https://trac.sagemath.org/admin/accounts/users/emil"
}
```

Changing keywords from "diagraph SIGABRT feedback_edge_set" to "digraph SIGABRT feedback_edge_set".



---

archive/issue_comments_166952.json:
```json
{
    "body": "<a id='comment:4'></a>\nI set Proiority to \"major\", because it is a crash. But if this is wrong please just correct that. I found no info about what is a minor or major bug yet.",
    "created_at": "2011-11-19T10:48:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12054#issuecomment-166952",
    "user": "https://trac.sagemath.org/admin/accounts/users/emil"
}
```

<a id='comment:4'></a>
I set Proiority to "major", because it is a crash. But if this is wrong please just correct that. I found no info about what is a minor or major bug yet.



---

archive/issue_comments_166953.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-04-20T21:26:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12054#issuecomment-166953",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_166954.json:
```json
{
    "body": "<a id='comment:5'></a>\nWell, this code has been tested for a while now, so it has probably been fixed by one of the many bugfixes in the LP code `^^;`\n\nNathann",
    "created_at": "2013-04-20T21:26:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12054#issuecomment-166954",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:5'></a>
Well, this code has been tested for a while now, so it has probably been fixed by one of the many bugfixes in the LP code `^^;`

Nathann



---

archive/issue_comments_166955.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-04-20T21:27:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12054#issuecomment-166955",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_031999.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-04-20T21:27:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12054",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12054#event-31999"
}
```



---

archive/issue_comments_166956.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2013-04-20T21:27:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12054#issuecomment-166956",
    "user": "https://github.com/nathanncohen"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_166957.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Nathann Cohen\"",
    "created_at": "2013-04-20T21:27:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12054#issuecomment-166957",
    "user": "https://github.com/nathanncohen"
}
```

Changing reviewer from "" to "Nathann Cohen"



---

archive/issue_comments_166958.json:
```json
{
    "body": "Resolution: worksforme",
    "created_at": "2013-04-28T12:48:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12054#issuecomment-166958",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: worksforme



---

archive/issue_events_032000.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-28T12:48:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12054",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12054#event-32000"
}
```
