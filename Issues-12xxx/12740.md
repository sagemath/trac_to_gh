# Issue 12740: Revamp code for finding generators of modular forms spaces

archive/issues_012568.json:
```json
{
    "assignees": [],
    "body": "The module ` sage.modular.modform.find_generators ` contains code which calculates, for a given congruence subgroup, forms which generate the graded ring of modular forms of that level; and code which uses these generators to calculate bases of q-expansions for spaces of very large weight, where modular symbol computations are less efficient.\n\nThis code is old and has not been very actively maintained for some while. Motivated by #12043, which uses this code, I decided to rework it a bit. With the attached patch, the new code\n\n* uses a randomized algorithm in some cases, adapted from Alan Lauder's code at #12043\n* can work over arbitrary base rings (not just the rationals)\n* handles series precision a bit more cleverly, using Sturm's bound\n* can now calculate generators for the ideal of cuspidal forms, and thus bases of\n  q-expansions of large weight cuspidal submodules.\n\n\n\nAssignee: **@craigcitro**\n\nCC:  @aghitza\n\nReviewer: **Jan Vonk**\n\nAuthor: **David Loeffler**\n\nMerged: **sage-5.1.beta2**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/12740_\n\n",
    "closed_at": "2012-06-02T12:14:00Z",
    "created_at": "2012-03-24T09:57:52Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20modular%20forms",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Revamp code for finding generators of modular forms spaces",
    "type": "issue",
    "updated_at": "2012-06-02T12:14:00Z",
    "url": "https://github.com/sagemath/sage/issues/12740",
    "user": "https://github.com/loefflerd"
}
```
The module ` sage.modular.modform.find_generators ` contains code which calculates, for a given congruence subgroup, forms which generate the graded ring of modular forms of that level; and code which uses these generators to calculate bases of q-expansions for spaces of very large weight, where modular symbol computations are less efficient.

This code is old and has not been very actively maintained for some while. Motivated by #12043, which uses this code, I decided to rework it a bit. With the attached patch, the new code

* uses a randomized algorithm in some cases, adapted from Alan Lauder's code at #12043
* can work over arbitrary base rings (not just the rationals)
* handles series precision a bit more cleverly, using Sturm's bound
* can now calculate generators for the ideal of cuspidal forms, and thus bases of
  q-expansions of large weight cuspidal submodules.



Assignee: **@craigcitro**

CC:  @aghitza

Reviewer: **Jan Vonk**

Author: **David Loeffler**

Merged: **sage-5.1.beta2**

_Issue created by migration from https://trac.sagemath.org/ticket/12740_





---

archive/issue_events_160617.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2012-03-24T09:57:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12740",
    "milestone_number": null,
    "milestone_title": "sage-5.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12740#event-160617"
}
```



---

archive/issue_events_160618.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2012-03-24T09:57:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12740",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20modular%20forms",
    "label_color": "0000ff",
    "label_name": "component: modular forms",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12740#event-160618"
}
```



---

archive/issue_events_160619.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2012-03-24T09:57:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12740",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12740#event-160619"
}
```



---

archive/issue_events_160620.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2012-03-24T09:57:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12740",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12740#event-160620"
}
```



---

archive/issue_comments_145051.json:
```json
{
    "body": "Attachment: **[trac_12740.patch.gz](https://github.com/sagemath/sage/files/ticket12740/trac_12740.patch.gz)**\n\nPatch against 5.0.beta9",
    "created_at": "2012-03-24T10:05:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12740#issuecomment-145051",
    "user": "https://github.com/loefflerd"
}
```

Attachment: **[trac_12740.patch.gz](https://github.com/sagemath/sage/files/ticket12740/trac_12740.patch.gz)**

Patch against 5.0.beta9



---

archive/issue_events_160621.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2012-03-24T10:05:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12740",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12740#event-160621"
}
```



---

archive/issue_comments_145052.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nI just tested files and did long doctests with Sage 5.0 (on Lion!), went perfectly. \nDocumentation builds, and got a 100% doctest coverage. \n\nI have been playing around with some input and everything seems to be working well. \nNonetheless, someone with more insight as to where to go look for possible bad output might want to have a look just to be sure.\nIt seems to me though that this patch is impeccably written. I'll continue playing around for a bit and if nobody finds anything in the meanwhile I will review this positively.",
    "created_at": "2012-05-16T16:10:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12740#issuecomment-145052",
    "user": "https://github.com/sagetrac-janv"
}
```

<div id="comment:3" align="right">Comment 3</div>

I just tested files and did long doctests with Sage 5.0 (on Lion!), went perfectly. 
Documentation builds, and got a 100% doctest coverage. 

I have been playing around with some input and everything seems to be working well. 
Nonetheless, someone with more insight as to where to go look for possible bad output might want to have a look just to be sure.
It seems to me though that this patch is impeccably written. I'll continue playing around for a bit and if nobody finds anything in the meanwhile I will review this positively.



---

archive/issue_comments_145053.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nI have been playing around with this for a while, and everything really seems to run smoothly. Very nice code and every small test I did gave the predicted answers. Since nobody more experienced objected in the meanwhile, I'll give this a positive review.",
    "created_at": "2012-05-24T16:21:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12740#issuecomment-145053",
    "user": "https://github.com/sagetrac-janv"
}
```

<div id="comment:4" align="right">Comment 4</div>

I have been playing around with this for a while, and everything really seems to run smoothly. Very nice code and every small test I did gave the predicted answers. Since nobody more experienced objected in the meanwhile, I'll give this a positive review.



---

archive/issue_events_160622.json:
```json
{
    "actor": "https://github.com/sagetrac-janv",
    "created_at": "2012-05-24T16:21:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12740",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12740#event-160622"
}
```



---

archive/issue_events_160623.json:
```json
{
    "actor": "https://github.com/sagetrac-janv",
    "created_at": "2012-05-24T16:21:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12740",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12740#event-160623"
}
```



---

archive/issue_comments_145054.json:
```json
{
    "body": "Reviewer: **Jan Vonk**",
    "created_at": "2012-05-24T16:21:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12740#issuecomment-145054",
    "user": "https://github.com/sagetrac-janv"
}
```

Reviewer: **Jan Vonk**



---

archive/issue_events_160624.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-06-02T12:14:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12740",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12740#event-160624"
}
```



---

archive/issue_events_160625.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-06-02T12:14:00Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/12740",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12740#event-160625"
}
```



---

archive/issue_comments_145055.json:
```json
{
    "body": "Merged: **sage-5.1.beta2**",
    "created_at": "2012-06-02T12:14:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12740#issuecomment-145055",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.1.beta2**
