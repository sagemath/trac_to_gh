# Issue 12461: Replace some deprecated python functions in sage/algebras

archive/issues_012289.json:
```json
{
    "body": "We should prepare moving to Python3.\n\nExecute\n\n```\n2to3 -f has_key -f except -f idioms -f ne -f raise\n```\nfor each *.py in sage/algebras.\n\nSee http://docs.python.org/library/2to3.html#fixers for meaning of the parameters.\n\n---\n\nApply [attachment:trac_12461.patch] and [attachment:trac_12461_2b.patch] to the Sage library repository.\n\nAssignee: @jasongrout\n\nReviewer: David Loeffler\n\nAuthor: Andr\u00e9 Apitzsch\n\nMerged: sage-5.0.beta11\n\nDependencies: #12484\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/12461\n\n",
    "closed_at": "2012-03-28T10:05:05Z",
    "created_at": "2012-02-07T11:11:24Z",
    "labels": [
        "component: misc"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.0",
    "title": "Replace some deprecated python functions in sage/algebras",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12461",
    "user": "https://github.com/a-andre"
}
```
We should prepare moving to Python3.

Execute

```
2to3 -f has_key -f except -f idioms -f ne -f raise
```
for each *.py in sage/algebras.

See http://docs.python.org/library/2to3.html#fixers for meaning of the parameters.

---

Apply [attachment:trac_12461.patch] and [attachment:trac_12461_2b.patch] to the Sage library repository.

Assignee: @jasongrout

Reviewer: David Loeffler

Author: André Apitzsch

Merged: sage-5.0.beta11

Dependencies: #12484

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/12461





---

archive/issue_comments_153289.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-02-07T11:14:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12461#issuecomment-153289",
    "user": "https://github.com/a-andre"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_153290.json:
```json
{
    "body": "<a id='comment:2'></a>This conflicts with #12484 (merged in 5.0.beta5) -- can you rebase it?",
    "created_at": "2012-03-12T10:27:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12461#issuecomment-153290",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:2'></a>This conflicts with #12484 (merged in 5.0.beta5) -- can you rebase it?



---

archive/issue_comments_153291.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-03-12T10:27:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12461#issuecomment-153291",
    "user": "https://github.com/loefflerd"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_153292.json:
```json
{
    "body": "Attachment [trac_12461.patch](tarball://root/attachments/some-uuid/ticket12461/trac_12461.patch) by @a-andre created at 2012-03-12 12:33:52",
    "created_at": "2012-03-12T12:33:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12461#issuecomment-153292",
    "user": "https://github.com/a-andre"
}
```

Attachment [trac_12461.patch](tarball://root/attachments/some-uuid/ticket12461/trac_12461.patch) by @a-andre created at 2012-03-12 12:33:52



---

archive/issue_comments_153293.json:
```json
{
    "body": "<a id='comment:3'></a>Rebased.",
    "created_at": "2012-03-12T12:34:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12461#issuecomment-153293",
    "user": "https://github.com/a-andre"
}
```

<a id='comment:3'></a>Rebased.



---

archive/issue_comments_153294.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-03-12T12:34:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12461#issuecomment-153294",
    "user": "https://github.com/a-andre"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_153295.json:
```json
{
    "body": "<a id='comment:4'></a>I've added #12484 as a dependency (since there is a copy of the patchbot still running against 4.8)",
    "created_at": "2012-03-12T12:37:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12461#issuecomment-153295",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:4'></a>I've added #12484 as a dependency (since there is a copy of the patchbot still running against 4.8)



---

archive/issue_comments_153296.json:
```json
{
    "body": "<a id='comment:5'></a>I don't like the change at line 148 of `free_algebra_quotient`:\n\n```\n \t148\t        return isinstance(self, type(right)) and \\ \n149\t149\t               self.ngens() == right.ngens() and \\ \n150\t150\t               self.rank() == right.rank() and \\ \n151\t151\t               self.module() == right.module() and \\ \n```\n\nIf `type(right)` was some very generic base class like SageObject, then the first statement would be True, but the remaining ones would be completely meaningless, so you'd get weird errors being raised. It should probably be ` isinstance(other, FreeAlgebraQuotient)` or something like that.\n\nThat is my only disagreement with this patch, so if you can do a tiny fix for that I'll happily give it a positive review.",
    "created_at": "2012-03-12T21:11:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12461#issuecomment-153296",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:5'></a>I don't like the change at line 148 of `free_algebra_quotient`:

```
 	148	        return isinstance(self, type(right)) and \ 
149	149	               self.ngens() == right.ngens() and \ 
150	150	               self.rank() == right.rank() and \ 
151	151	               self.module() == right.module() and \ 
```

If `type(right)` was some very generic base class like SageObject, then the first statement would be True, but the remaining ones would be completely meaningless, so you'd get weird errors being raised. It should probably be ` isinstance(other, FreeAlgebraQuotient)` or something like that.

That is my only disagreement with this patch, so if you can do a tiny fix for that I'll happily give it a positive review.



---

archive/issue_comments_153297.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-03-12T21:11:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12461#issuecomment-153297",
    "user": "https://github.com/loefflerd"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_153298.json:
```json
{
    "body": "Attachment [trac_12461_2.patch](tarball://root/attachments/some-uuid/ticket12461/trac_12461_2.patch) by @a-andre created at 2012-03-12 22:57:30\n\nApply after trac_12461.patch",
    "created_at": "2012-03-12T22:57:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12461#issuecomment-153298",
    "user": "https://github.com/a-andre"
}
```

Attachment [trac_12461_2.patch](tarball://root/attachments/some-uuid/ticket12461/trac_12461_2.patch) by @a-andre created at 2012-03-12 22:57:30

Apply after trac_12461.patch



---

archive/issue_comments_153299.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-03-12T23:13:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12461#issuecomment-153299",
    "user": "https://github.com/a-andre"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_153300.json:
```json
{
    "body": "<a id='comment:6'></a>Replying to [comment:5 davidloeffler]:\n> If `type(right)` was some very generic base class like SageObject, then the first statement would be True, but the remaining ones would be completely meaningless, so you'd get weird errors being raised. It should probably be ` isinstance(other, FreeAlgebraQuotient)` or something like that.\n\n\nYou are right. I couldn't think of another possible type, so I used `FreeAlgebraQuotient`.",
    "created_at": "2012-03-12T23:13:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12461#issuecomment-153300",
    "user": "https://github.com/a-andre"
}
```

<a id='comment:6'></a>Replying to [comment:5 davidloeffler]:
> If `type(right)` was some very generic base class like SageObject, then the first statement would be True, but the remaining ones would be completely meaningless, so you'd get weird errors being raised. It should probably be ` isinstance(other, FreeAlgebraQuotient)` or something like that.


You are right. I couldn't think of another possible type, so I used `FreeAlgebraQuotient`.



---

archive/issue_comments_153301.json:
```json
{
    "body": "<a id='comment:7'></a>The double colon after EXAMPLES that your new patch adds shouldn't be there, and it causes an error in building the docs:\n\n```\n/storage/masiao/sage-5.0.beta7-patchbot/local/lib/python2.7/site-packages/sage/algebras/free_algebra_quotient.py:docstring of sage.algebras.free_algebra_quotient.FreeAlgebraQuotient:10: WARNING: Literal block expected; none found.\n```",
    "created_at": "2012-03-12T23:27:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12461#issuecomment-153301",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:7'></a>The double colon after EXAMPLES that your new patch adds shouldn't be there, and it causes an error in building the docs:

```
/storage/masiao/sage-5.0.beta7-patchbot/local/lib/python2.7/site-packages/sage/algebras/free_algebra_quotient.py:docstring of sage.algebras.free_algebra_quotient.FreeAlgebraQuotient:10: WARNING: Literal block expected; none found.
```



---

archive/issue_comments_153302.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-03-12T23:27:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12461#issuecomment-153302",
    "user": "https://github.com/loefflerd"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_153303.json:
```json
{
    "body": "apply over trac_12461.patch",
    "created_at": "2012-03-12T23:42:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12461#issuecomment-153303",
    "user": "https://github.com/loefflerd"
}
```

apply over trac_12461.patch



---

archive/issue_comments_153304.json:
```json
{
    "body": "<a id='comment:8'></a>Attachment [trac_12461_2b.patch](tarball://root/attachments/some-uuid/ticket12461/trac_12461_2b.patch) by @loefflerd created at 2012-03-12 23:45:38\n\nHere's a strict subset of your patch (literally obtained by deleting one of the two hunks from your patch in a text editor). If you're happy with that, you can set this to positive review.",
    "created_at": "2012-03-12T23:45:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12461#issuecomment-153304",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:8'></a>Attachment [trac_12461_2b.patch](tarball://root/attachments/some-uuid/ticket12461/trac_12461_2b.patch) by @loefflerd created at 2012-03-12 23:45:38

Here's a strict subset of your patch (literally obtained by deleting one of the two hunks from your patch in a text editor). If you're happy with that, you can set this to positive review.



---

archive/issue_comments_153305.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-03-12T23:45:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12461#issuecomment-153305",
    "user": "https://github.com/loefflerd"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_153306.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-03-12T23:49:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12461#issuecomment-153306",
    "user": "https://github.com/a-andre"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_153307.json:
```json
{
    "body": "<a id='comment:10'></a>Please clarify which patches have to be added.",
    "created_at": "2012-03-13T20:35:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12461#issuecomment-153307",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'></a>Please clarify which patches have to be added.



---

archive/issue_comments_153308.json:
```json
{
    "body": "<a id='comment:11'></a>Add\n1. trac_12461.patch\n2. trac_12461_2b.patch",
    "created_at": "2012-03-13T21:13:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12461#issuecomment-153308",
    "user": "https://github.com/a-andre"
}
```

<a id='comment:11'></a>Add
1. trac_12461.patch
2. trac_12461_2b.patch



---

archive/issue_comments_153309.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -9,6 +9,10 @@\n \n See http://docs.python.org/library/2to3.html#fixers for meaning of the parameters.\n \n+---\n+\n+Apply [attachment:trac_12461.patch] and [attachment:trac_12461_2b.patch] to the Sage library repository.\n+\n Author: Andr\u00e9 Apitzsch\n \n Comment: 1\n```\n",
    "created_at": "2012-03-13T21:57:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12461#issuecomment-153309",
    "user": "https://github.com/jhpalmieri"
}
```

Description changed:
```diff
--- 
+++ 
@@ -9,6 +9,10 @@
 
 See http://docs.python.org/library/2to3.html#fixers for meaning of the parameters.
 
+---
+
+Apply [attachment:trac_12461.patch] and [attachment:trac_12461_2b.patch] to the Sage library repository.
+
 Author: André Apitzsch
 
 Comment: 1
```




---

archive/issue_events_033581.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-03-28T10:05:05Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12461",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12461#event-33581"
}
```



---

archive/issue_comments_153310.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-03-28T10:05:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12461#issuecomment-153310",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
