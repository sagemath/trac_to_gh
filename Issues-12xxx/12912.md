# Issue 12912: Interface to Fokko Ducloux's Coxeter 3

archive/issues_012740.json:
```json
{
    "body": "[Coxeter3](http://math.univ-lyon1.fr/~ducloux/coxeter/coxeter3/english/coxeter3_e.html) is a C implementation of Coxeter groups. Beside computing with elements (using the combinatorics of reduced words) it contains super fast code for bruhat order, Kazdhan-Lusztig polynomials and the like.\n\nhttp://boxen.math.washington.edu/home/jpflori/coxeter3-1.1.spkg\n\n---\n\nApply [attachment:trac_12912-coxeter3-mh.patch]\n\nAdd coxeter-3-1.1.spkg as optional package.\n\nDepends on #8359\n\n**Assignee:** sage-combinat\n\n**CC:**  sage-combinat anne jpflori\n\n**Keywords:** coxeter, days45\n\n**Reviewer:** Anne Schilling, Nicolas M. Thi\u00e9ry, Jean-Pierre Flori\n\n**Author:** Mike Hansen\n\n**Merged:** sage-5.8.beta1\n\nIssue created by migration from https://trac.sagemath.org/ticket/12912\n\n",
    "closed_at": "2013-02-22T19:10:49Z",
    "created_at": "2012-05-06T15:42:55Z",
    "labels": [
        "component: packages: optional",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.8",
    "title": "Interface to Fokko Ducloux's Coxeter 3",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/12912",
    "user": "https://github.com/nthiery"
}
```
[Coxeter3](http://math.univ-lyon1.fr/~ducloux/coxeter/coxeter3/english/coxeter3_e.html) is a C implementation of Coxeter groups. Beside computing with elements (using the combinatorics of reduced words) it contains super fast code for bruhat order, Kazdhan-Lusztig polynomials and the like.

http://boxen.math.washington.edu/home/jpflori/coxeter3-1.1.spkg

---

Apply [attachment:trac_12912-coxeter3-mh.patch]

Add coxeter-3-1.1.spkg as optional package.

Depends on #8359

**Assignee:** sage-combinat

**CC:**  sage-combinat anne jpflori

**Keywords:** coxeter, days45

**Reviewer:** Anne Schilling, Nicolas M. Thi√©ry, Jean-Pierre Flori

**Author:** Mike Hansen

**Merged:** sage-5.8.beta1

Issue created by migration from https://trac.sagemath.org/ticket/12912





---

archive/issue_comments_148405.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,5 @@\n+[Coxeter3|http://math.univ-lyon1.fr/~ducloux/coxeter/coxeter3/english/coxeter3_e.html] is a C implementation of Coxeter groups. Beside computing with elements (using the combinatorics of reduced words) it contains super fast code for bruhat order, Kazdhan-Lusztig polynomials and the like.\n+\n+\n+\n Mike Hansen wrote a prototype on the sage-combinat patch queue. See http://combinat.sagemath.org/patches/file/tip/coxeter3-mh.patch and friends\n``````\n",
    "created_at": "2012-05-06T15:45:12Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148405",
    "user": "https://github.com/nthiery"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,5 @@
+[Coxeter3|http://math.univ-lyon1.fr/~ducloux/coxeter/coxeter3/english/coxeter3_e.html] is a C implementation of Coxeter groups. Beside computing with elements (using the combinatorics of reduced words) it contains super fast code for bruhat order, Kazdhan-Lusztig polynomials and the like.
+
+
+
 Mike Hansen wrote a prototype on the sage-combinat patch queue. See http://combinat.sagemath.org/patches/file/tip/coxeter3-mh.patch and friends
``````




---

archive/issue_events_108040.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2012-05-06T15:45:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12912#event-108040"
}
```



---

archive/issue_events_108041.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2012-05-16T14:07:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12912#event-108041"
}
```



---

archive/issue_events_108042.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2012-05-16T14:07:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12912#event-108042"
}
```



---

archive/issue_comments_148406.json:
```json
{
    "body": "<a id='comment:2'></a>\nPlease set this ticket back to needs_review when there is a finished patch posted on the ticket! (I'm cleaning up needs_review tickets with no patches attached.)",
    "created_at": "2012-05-16T14:07:32Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148406",
    "user": "https://github.com/kini"
}
```

<a id='comment:2'></a>
Please set this ticket back to needs_review when there is a finished patch posted on the ticket! (I'm cleaning up needs_review tickets with no patches attached.)



---

archive/issue_comments_148407.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"coxeter\".",
    "created_at": "2012-11-19T17:00:40Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148407",
    "user": "https://github.com/fchapoton"
}
```

**Changing keywords** from "" to "coxeter".



---

archive/issue_comments_148408.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,3 +3,5 @@\n \n \n Mike Hansen wrote a prototype on the sage-combinat patch queue. See http://combinat.sagemath.org/patches/file/tip/coxeter3-mh.patch and friends\n+\n+http://sage.math.washington.edu/home/mhansen/coxeter-3.0.beta3.spkg\n``````\n",
    "created_at": "2013-01-24T12:30:58Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148408",
    "user": "https://github.com/mwhansen"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,3 +3,5 @@
 
 
 Mike Hansen wrote a prototype on the sage-combinat patch queue. See http://combinat.sagemath.org/patches/file/tip/coxeter3-mh.patch and friends
+
+http://sage.math.washington.edu/home/mhansen/coxeter-3.0.beta3.spkg
``````




---

archive/issue_comments_148409.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,4 +4,4 @@\n \n Mike Hansen wrote a prototype on the sage-combinat patch queue. See http://combinat.sagemath.org/patches/file/tip/coxeter3-mh.patch and friends\n \n-http://sage.math.washington.edu/home/mhansen/coxeter-3.0.beta3.spkg\n+http://sage.math.washington.edu/home/mhansen/coxeter-3.0.spkg\n``````\n",
    "created_at": "2013-01-30T21:29:24Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148409",
    "user": "https://github.com/tscrim"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,4 +4,4 @@
 
 Mike Hansen wrote a prototype on the sage-combinat patch queue. See http://combinat.sagemath.org/patches/file/tip/coxeter3-mh.patch and friends
 
-http://sage.math.washington.edu/home/mhansen/coxeter-3.0.beta3.spkg
+http://sage.math.washington.edu/home/mhansen/coxeter-3.0.spkg
``````




---

archive/issue_comments_148410.json:
```json
{
    "body": "<a id='comment:6'></a>\nNicolas figured out that the following triggers the seg fault in /libs/coxeter/coxeter.pyx\n\n```\nsage: from sage.libs.coxeter.co\nsage.libs.coxeter.coxeter        sage.libs.coxeter.coxeter_group  \nsage: from sage.libs.coxeter.coxeter import get_CoxGroup as CoxGroup\nsage: W = CoxGroup(['A',1])\nsage: W.bruhat_interval([],[])\n[[]]\nsage: W = CoxGroup(['A',2])\n```",
    "created_at": "2013-01-30T21:47:37Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148410",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:6'></a>
Nicolas figured out that the following triggers the seg fault in /libs/coxeter/coxeter.pyx

```
sage: from sage.libs.coxeter.co
sage.libs.coxeter.coxeter        sage.libs.coxeter.coxeter_group  
sage: from sage.libs.coxeter.coxeter import get_CoxGroup as CoxGroup
sage: W = CoxGroup(['A',1])
sage: W.bruhat_interval([],[])
[[]]
sage: W = CoxGroup(['A',2])
```



---

archive/issue_comments_148411.json:
```json
{
    "body": "<a id='comment:7'></a>\nThe current patch does not handle the Coxeter group of type ['A',0] properly!",
    "created_at": "2013-01-30T21:48:13Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148411",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:7'></a>
The current patch does not handle the Coxeter group of type ['A',0] properly!



---

archive/issue_comments_148412.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [aschilling](#comment%3A6):\n> \n> ```\n> sage: from sage.libs.coxeter.co\n> sage.libs.coxeter.coxeter        sage.libs.coxeter.coxeter_group  \n> sage: from sage.libs.coxeter.coxeter import get_CoxGroup as CoxGroup\n> sage: W = CoxGroup(['A',1])\n> sage: W.bruhat_interval([],[])\n> [[]]\n> sage: W = CoxGroup(['A',2])\n> ```\n\n\nInvesting further,\nbruhat_interval explicitly destructs the C++ list which is defined\nearlier in this method and passed to Coxeter3's `interval` function.  Is\nit really needed? If we comment it out, there is no more segfault.  So\nthe destruction must somehow corrupt Coxeter3's internal state (though\nit's strange that the segfault occurs upon constructing a new group)\n\nSome evidence why it might not be needed:\n\n- It's a list, not a reference to a list; so c++ should destruct it at\n  the end of the function, right?\n\n- Assignment/copy operators seem to be appropriately defined in\n  Coxeter3 for CoxWord element to be put in a list and be destructed\n  properly.\n\n- The pointcare_polynomial does very similar things but does not call\n  this destructor at the end (so at least one of the two is wrong).\n\n- There does not seem to be a memory leak when one comments out the\n  destructor, at least not after the third call:\n\n  ```\n    sage: sage: from sage.libs.coxeter.coxeter import CoxGroup as CoxGroup\n    sage: W = CoxGroup(['A',7])\n    sage: w0 = WeylGroup(['A',7]).long_element().reduced_word()\n    sage: sage.misc.getusage.get_memory_usage(t=None)\n    sage: 911.23046875\n    sage: len(W.bruhat_interval([], W(w0)))\n    40320\n    sage: sage: sage.misc.getusage.get_memory_usage(t=None)\n    5972.0\n    sage: len(W.bruhat_interval([], W(w0)))\n    40320\n    sage: sage.misc.getusage.get_memory_usage(t=None)\n    5973.50390625\n    sage: len(W.bruhat_interval([], W(w0)))\n    40320\n    sage: sage.misc.getusage.get_memory_usage(t=None)\n    5973.50390625\n    sage: len(W.bruhat_interval([], W(w0)))\n    40320\n    sage: sage.misc.getusage.get_memory_usage(t=None)\n    5973.50390625\n  ```\n\n  This is confirmed by looking at the processus memory usage.\n\nAltogether, I guess I vote for commenting out the questionable\ndestructor call, and consider the issue as resolved for now. We will\nsee later if any issue arises once we put Coxeter 3 to heavy use.\n\nMike, what do you think?\n\nCheers,\n                       Nicolas",
    "created_at": "2013-01-30T23:17:45Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148412",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:8'></a>
Replying to [aschilling](#comment%3A6):
> 
> ```
> sage: from sage.libs.coxeter.co
> sage.libs.coxeter.coxeter        sage.libs.coxeter.coxeter_group  
> sage: from sage.libs.coxeter.coxeter import get_CoxGroup as CoxGroup
> sage: W = CoxGroup(['A',1])
> sage: W.bruhat_interval([],[])
> [[]]
> sage: W = CoxGroup(['A',2])
> ```


Investing further,
bruhat_interval explicitly destructs the C++ list which is defined
earlier in this method and passed to Coxeter3's `interval` function.  Is
it really needed? If we comment it out, there is no more segfault.  So
the destruction must somehow corrupt Coxeter3's internal state (though
it's strange that the segfault occurs upon constructing a new group)

Some evidence why it might not be needed:

- It's a list, not a reference to a list; so c++ should destruct it at
  the end of the function, right?

- Assignment/copy operators seem to be appropriately defined in
  Coxeter3 for CoxWord element to be put in a list and be destructed
  properly.

- The pointcare_polynomial does very similar things but does not call
  this destructor at the end (so at least one of the two is wrong).

- There does not seem to be a memory leak when one comments out the
  destructor, at least not after the third call:

  ```
    sage: sage: from sage.libs.coxeter.coxeter import CoxGroup as CoxGroup
    sage: W = CoxGroup(['A',7])
    sage: w0 = WeylGroup(['A',7]).long_element().reduced_word()
    sage: sage.misc.getusage.get_memory_usage(t=None)
    sage: 911.23046875
    sage: len(W.bruhat_interval([], W(w0)))
    40320
    sage: sage: sage.misc.getusage.get_memory_usage(t=None)
    5972.0
    sage: len(W.bruhat_interval([], W(w0)))
    40320
    sage: sage.misc.getusage.get_memory_usage(t=None)
    5973.50390625
    sage: len(W.bruhat_interval([], W(w0)))
    40320
    sage: sage.misc.getusage.get_memory_usage(t=None)
    5973.50390625
    sage: len(W.bruhat_interval([], W(w0)))
    40320
    sage: sage.misc.getusage.get_memory_usage(t=None)
    5973.50390625
  ```

  This is confirmed by looking at the processus memory usage.

Altogether, I guess I vote for commenting out the questionable
destructor call, and consider the issue as resolved for now. We will
see later if any issue arises once we put Coxeter 3 to heavy use.

Mike, what do you think?

Cheers,
                       Nicolas



---

archive/issue_comments_148413.json:
```json
{
    "body": "<a id='comment:9'></a>\nNicolas -- thanks for looking into this.  I've been busy with getting our housing situation taken care of (hopefully moving in on Friday).  I think commenting out the destructor call is right for now.  Do you want me to do it in the patch?",
    "created_at": "2013-01-30T23:29:22Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148413",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:9'></a>
Nicolas -- thanks for looking into this.  I've been busy with getting our housing situation taken care of (hopefully moving in on Friday).  I think commenting out the destructor call is right for now.  Do you want me to do it in the patch?



---

archive/issue_comments_148414.json:
```json
{
    "body": "<a id='comment:10'></a>\nI am working on it right now, and doing a couple other cleanup's (like working around Coxeter 3 segfaulting for the trivial Coxeter group :-)).\n\nI won't mind a double check on the result though!",
    "created_at": "2013-01-30T23:40:20Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148414",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:10'></a>
I am working on it right now, and doing a couple other cleanup's (like working around Coxeter 3 segfaulting for the trivial Coxeter group :-)).

I won't mind a double check on the result though!



---

archive/issue_comments_148415.json:
```json
{
    "body": "<a id='comment:11'></a>\nOk, done in the attached review patch. I am going to push it to the sage-combinat server too.\n\nThere remains a single issue: I replaced the loads/dumps tests by TestSuite call, and for all of them we dont get `A == loads(dumps(A))`. I am not sure how best to handle this? Shall we implement equality? Or, at least for the Coxeter groups themselves, fix the pickling to be done by construction so as to guarantee that unique representation is preserved?\n\nCheers,\n                          Nicolas",
    "created_at": "2013-01-31T00:02:05Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148415",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:11'></a>
Ok, done in the attached review patch. I am going to push it to the sage-combinat server too.

There remains a single issue: I replaced the loads/dumps tests by TestSuite call, and for all of them we dont get `A == loads(dumps(A))`. I am not sure how best to handle this? Shall we implement equality? Or, at least for the Coxeter groups themselves, fix the pickling to be done by construction so as to guarantee that unique representation is preserved?

Cheers,
                          Nicolas



---

archive/issue_comments_148416.json:
```json
{
    "body": "<a id='comment:12'></a>\nAfter discussions with Mike Hansen, we seemed to have fixed all remaining issues.\n\nApply: trac_12912-coxeter3-mh.patch\n\nNicolas, the patch is ready for its final review!\n\nAnne",
    "created_at": "2013-02-05T05:27:11Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148416",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:12'></a>
After discussions with Mike Hansen, we seemed to have fixed all remaining issues.

Apply: trac_12912-coxeter3-mh.patch

Nicolas, the patch is ready for its final review!

Anne



---

archive/issue_events_108043.json:
```json
{
    "actor": "https://github.com/anneschilling",
    "created_at": "2013-02-05T05:29:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12912#event-108043"
}
```



---

archive/issue_events_108044.json:
```json
{
    "actor": "https://github.com/anneschilling",
    "created_at": "2013-02-05T05:29:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12912#event-108044"
}
```



---

archive/issue_comments_148417.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,7 +1,3 @@\n [Coxeter3|http://math.univ-lyon1.fr/~ducloux/coxeter/coxeter3/english/coxeter3_e.html] is a C implementation of Coxeter groups. Beside computing with elements (using the combinatorics of reduced words) it contains super fast code for bruhat order, Kazdhan-Lusztig polynomials and the like.\n \n-\n-\n-Mike Hansen wrote a prototype on the sage-combinat patch queue. See http://combinat.sagemath.org/patches/file/tip/coxeter3-mh.patch and friends\n-\n http://sage.math.washington.edu/home/mhansen/coxeter-3.0.spkg\n``````\n",
    "created_at": "2013-02-05T05:29:12Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148417",
    "user": "https://github.com/anneschilling"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,7 +1,3 @@
 [Coxeter3|http://math.univ-lyon1.fr/~ducloux/coxeter/coxeter3/english/coxeter3_e.html] is a C implementation of Coxeter groups. Beside computing with elements (using the combinatorics of reduced words) it contains super fast code for bruhat order, Kazdhan-Lusztig polynomials and the like.
 
-
-
-Mike Hansen wrote a prototype on the sage-combinat patch queue. See http://combinat.sagemath.org/patches/file/tip/coxeter3-mh.patch and friends
-
 http://sage.math.washington.edu/home/mhansen/coxeter-3.0.spkg
``````




---

archive/issue_comments_148418.json:
```json
{
    "body": "**Reviewer:** Anne Schilling, Nicolas M. Thiery",
    "created_at": "2013-02-05T05:29:12Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148418",
    "user": "https://github.com/anneschilling"
}
```

**Reviewer:** Anne Schilling, Nicolas M. Thiery



---

archive/issue_comments_148419.json:
```json
{
    "body": "**Dependencies:** #8359",
    "created_at": "2013-02-05T11:47:34Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148419",
    "user": "https://github.com/anneschilling"
}
```

**Dependencies:** #8359



---

archive/issue_comments_148420.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,7 @@\n [Coxeter3|http://math.univ-lyon1.fr/~ducloux/coxeter/coxeter3/english/coxeter3_e.html] is a C implementation of Coxeter groups. Beside computing with elements (using the combinatorics of reduced words) it contains super fast code for bruhat order, Kazdhan-Lusztig polynomials and the like.\n \n http://sage.math.washington.edu/home/mhansen/coxeter-3.0.spkg\n+\n+---\n+\n+Apply [attachment:trac_12912-coxeter3-mh.patch]\n``````\n",
    "created_at": "2013-02-05T12:38:15Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148420",
    "user": "https://github.com/anneschilling"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,7 @@
 [Coxeter3|http://math.univ-lyon1.fr/~ducloux/coxeter/coxeter3/english/coxeter3_e.html] is a C implementation of Coxeter groups. Beside computing with elements (using the combinatorics of reduced words) it contains super fast code for bruhat order, Kazdhan-Lusztig polynomials and the like.
 
 http://sage.math.washington.edu/home/mhansen/coxeter-3.0.spkg
+
+---
+
+Apply [attachment:trac_12912-coxeter3-mh.patch]
``````




---

archive/issue_comments_148421.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -5,3 +5,5 @@\n ---\n \n Apply [attachment:trac_12912-coxeter3-mh.patch]\n+\n+Add coxeter-3.0.spkg as optional package.\n``````\n",
    "created_at": "2013-02-08T18:32:01Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148421",
    "user": "https://github.com/anneschilling"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -5,3 +5,5 @@
 ---
 
 Apply [attachment:trac_12912-coxeter3-mh.patch]
+
+Add coxeter-3.0.spkg as optional package.
``````




---

archive/issue_comments_148422.json:
```json
{
    "body": "<a id='comment:17'></a>\nHi Jeroen,\n\nDid get rid of the purple light by the patchbot, do you need to declare coxeter-3.0 as an optional package? I guess only you can do that, right?\n\nBest,\n\nAnne",
    "created_at": "2013-02-08T18:32:53Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148422",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:17'></a>
Hi Jeroen,

Did get rid of the purple light by the patchbot, do you need to declare coxeter-3.0 as an optional package? I guess only you can do that, right?

Best,

Anne



---

archive/issue_comments_148423.json:
```json
{
    "body": "<a id='comment:18'></a>\nI folded Nicolas' review patch and uploaded the final version. Positive review (up to the review of the spkg).\n\nAnne",
    "created_at": "2013-02-09T19:46:42Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148423",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:18'></a>
I folded Nicolas' review patch and uploaded the final version. Positive review (up to the review of the spkg).

Anne



---

archive/issue_comments_148424.json:
```json
{
    "body": "<a id='comment:19'></a>\nI have just been through the spkg, and added a SPKG.txt and a minimal testsuite. If someone can double check them, this is good to go I guess.\n\nJean-Pierre: would you be so kind as to try the spkg under cygwin to see how it goes? Not that we really need it now, but that could catch other platform issues. A second eye on the SPKG won't hurt as well.\n\nThanks!\n                                 Nicolas",
    "created_at": "2013-02-11T04:37:00Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148424",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:19'></a>
I have just been through the spkg, and added a SPKG.txt and a minimal testsuite. If someone can double check them, this is good to go I guess.

Jean-Pierre: would you be so kind as to try the spkg under cygwin to see how it goes? Not that we really need it now, but that could catch other platform issues. A second eye on the SPKG won't hurt as well.

Thanks!
                                 Nicolas



---

archive/issue_comments_148425.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,9 +1,9 @@\n [Coxeter3|http://math.univ-lyon1.fr/~ducloux/coxeter/coxeter3/english/coxeter3_e.html] is a C implementation of Coxeter groups. Beside computing with elements (using the combinatorics of reduced words) it contains super fast code for bruhat order, Kazdhan-Lusztig polynomials and the like.\n \n-http://sage.math.washington.edu/home/mhansen/coxeter-3.0.spkg\n+http://sage.math.washington.edu/home/nthiery/coxeter3-1.0.spkg\n \n ---\n \n Apply [attachment:trac_12912-coxeter3-mh.patch]\n \n-Add coxeter-3.0.spkg as optional package.\n+Add coxeter-3-1.0.spkg as optional package.\n``````\n",
    "created_at": "2013-02-11T04:37:00Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148425",
    "user": "https://github.com/nthiery"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,9 +1,9 @@
 [Coxeter3|http://math.univ-lyon1.fr/~ducloux/coxeter/coxeter3/english/coxeter3_e.html] is a C implementation of Coxeter groups. Beside computing with elements (using the combinatorics of reduced words) it contains super fast code for bruhat order, Kazdhan-Lusztig polynomials and the like.
 
-http://sage.math.washington.edu/home/mhansen/coxeter-3.0.spkg
+http://sage.math.washington.edu/home/nthiery/coxeter3-1.0.spkg
 
 ---
 
 Apply [attachment:trac_12912-coxeter3-mh.patch]
 
-Add coxeter-3.0.spkg as optional package.
+Add coxeter-3-1.0.spkg as optional package.
``````




---

archive/issue_comments_148426.json:
```json
{
    "body": "**Work_Issues:** category setting",
    "created_at": "2013-02-13T17:53:34Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148426",
    "user": "https://github.com/nthiery"
}
```

**Work_Issues:** category setting



---

archive/issue_comments_148427.json:
```json
{
    "body": "<a id='comment:20'></a>\nOops, the category is not set properly:\n\n```\nsage: CoxeterGroup([\"H\",3], implementation=\"coxeter3\").category()\nCategory of finite weyl groups\n```\nShould be finite Coxeter groups.",
    "created_at": "2013-02-13T17:53:34Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148427",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:20'></a>
Oops, the category is not set properly:

```
sage: CoxeterGroup(["H",3], implementation="coxeter3").category()
Category of finite weyl groups
```
Should be finite Coxeter groups.



---

archive/issue_events_108045.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2013-02-13T17:53:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12912#event-108045"
}
```



---

archive/issue_events_108046.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2013-02-13T17:53:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12912#event-108046"
}
```



---

archive/issue_comments_148428.json:
```json
{
    "body": "<a id='comment:21'></a>\nOn Mac OS Lion (10.7.5) the Coxeter3 spkg fails with the following. It works on Anne's 10.6.8 Mac.\n\nNote that g++ can't make sense of the -soname option. The question\nis why and is this needed.\n\nIf we remove the -soname option then it is broke on Anne's machine.\n\n```\n\n$ sage -f ~/patches/coxeter3-1.0.spkg\ncoxeter3-1.0\n====================================================\nExtracting package /Users/bump/patches/coxeter3-1.0.spkg\n-rw-r--r--@ 1 bump  staff  5462933 Feb 13 09:53 /Users/bump/patches/coxeter3-1.0.spkg\nFinished extraction\n****************************************************\nHost system:\nDarwin tracer 11.4.2 Darwin Kernel Version 11.4.2: Thu Aug 23 16:25:48 PDT 2012; root:xnu-1699.32.7~1/RELEASE_X86_64 x86_64\n****************************************************\nC compiler: gcc\nC compiler version:\nUsing built-in specs.\nCOLLECT_GCC=gcc\n\n[snip]\n\ng++ -c  -O2 -fPIC -g -DFAST -DALLTRUE sage.cpp\ng++ -c  -O2 -fPIC -g -DFAST -DALLTRUE special.cpp\nIn file included from special.cpp:10:0:\ndirectories.h:27:31: warning: deprecated conversion from string constant to 'char*' [-Wwrite-strings]\ndirectories.h:28:28: warning: deprecated conversion from string constant to 'char*' [-Wwrite-strings]\ndirectories.h:29:29: warning: deprecated conversion from string constant to 'char*' [-Wwrite-strings]\ng++ -shared -Wl,-soname,libcoxeter3.so -o libcoxeter3.so affine.o automata.o bits.o cells.o commands.o constants.o coxgroup.o coxtypes.o error.o fcoxgroup.o files.o general.o graph.o help.o interactive.o interface.o invkl.o io.o kl.o klsupport.o main.o memory.o minroots.o posets.o sage.o schubert.o special.o transducer.o type.o typeA.o uneqkl.o wgraph.o -lc\nld: unknown option: -soname\ncollect2: ld returned 1 exit status\nmake: *** [coxeter] Error 1\ncp: libcoxeter3.dylib: No such file or directory\n\nreal\t0m9.362s\nuser\t0m8.574s\nsys\t0m0.421s\nSuccessfully installed coxeter3-1.0\nDeleting temporary build directory\n/Users/bump/src/sage-5.7.beta4/spkg/build/coxeter3-1.0\nFinished installing coxeter3-1.0.spkg\nForcing sage-location, probably because a new package was installed.\nUpdating various hardcoded paths...\n(Please wait at most a few minutes.)\nDO NOT INTERRUPT THIS.\nDone updating paths.\n\n```",
    "created_at": "2013-02-13T22:40:58Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148428",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:21'></a>
On Mac OS Lion (10.7.5) the Coxeter3 spkg fails with the following. It works on Anne's 10.6.8 Mac.

Note that g++ can't make sense of the -soname option. The question
is why and is this needed.

If we remove the -soname option then it is broke on Anne's machine.

```

$ sage -f ~/patches/coxeter3-1.0.spkg
coxeter3-1.0
====================================================
Extracting package /Users/bump/patches/coxeter3-1.0.spkg
-rw-r--r--@ 1 bump  staff  5462933 Feb 13 09:53 /Users/bump/patches/coxeter3-1.0.spkg
Finished extraction
****************************************************
Host system:
Darwin tracer 11.4.2 Darwin Kernel Version 11.4.2: Thu Aug 23 16:25:48 PDT 2012; root:xnu-1699.32.7~1/RELEASE_X86_64 x86_64
****************************************************
C compiler: gcc
C compiler version:
Using built-in specs.
COLLECT_GCC=gcc

[snip]

g++ -c  -O2 -fPIC -g -DFAST -DALLTRUE sage.cpp
g++ -c  -O2 -fPIC -g -DFAST -DALLTRUE special.cpp
In file included from special.cpp:10:0:
directories.h:27:31: warning: deprecated conversion from string constant to 'char*' [-Wwrite-strings]
directories.h:28:28: warning: deprecated conversion from string constant to 'char*' [-Wwrite-strings]
directories.h:29:29: warning: deprecated conversion from string constant to 'char*' [-Wwrite-strings]
g++ -shared -Wl,-soname,libcoxeter3.so -o libcoxeter3.so affine.o automata.o bits.o cells.o commands.o constants.o coxgroup.o coxtypes.o error.o fcoxgroup.o files.o general.o graph.o help.o interactive.o interface.o invkl.o io.o kl.o klsupport.o main.o memory.o minroots.o posets.o sage.o schubert.o special.o transducer.o type.o typeA.o uneqkl.o wgraph.o -lc
ld: unknown option: -soname
collect2: ld returned 1 exit status
make: *** [coxeter] Error 1
cp: libcoxeter3.dylib: No such file or directory

real	0m9.362s
user	0m8.574s
sys	0m0.421s
Successfully installed coxeter3-1.0
Deleting temporary build directory
/Users/bump/src/sage-5.7.beta4/spkg/build/coxeter3-1.0
Finished installing coxeter3-1.0.spkg
Forcing sage-location, probably because a new package was installed.
Updating various hardcoded paths...
(Please wait at most a few minutes.)
DO NOT INTERRUPT THIS.
Done updating paths.

```



---

archive/issue_comments_148429.json:
```json
{
    "body": "<a id='comment:22'></a>\nThe updated patch fixes the WeylGroup versus CoxeterGroup issue that Nicolas mentioned. It also fixed a segfault caused by computing KL polynomial for elements that are not comparable in Bruhat order\n\n```\nsage: W = CoxeterGroup(['A', 3], implementation='coxeter3')\nsage: W.kazhdan_lusztig_polynomial([1],[3,2])\n------------------------------------------------------------------------\nUnhandled SIGSEGV: A segmentation fault occurred in Sage.\nThis probably occurred because a *compiled* component of Sage has a bug\nin it and is not properly wrapped with sig_on(), sig_off(). You might\nwant to run Sage under gdb with 'sage -gdb' to debug this.\nSage will now terminate.\n```\n\nThe implementation of the parabolic KL polynomials is changed so that it works with infinite Coxeter groups.\n\nAnne",
    "created_at": "2013-02-14T04:19:06Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148429",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:22'></a>
The updated patch fixes the WeylGroup versus CoxeterGroup issue that Nicolas mentioned. It also fixed a segfault caused by computing KL polynomial for elements that are not comparable in Bruhat order

```
sage: W = CoxeterGroup(['A', 3], implementation='coxeter3')
sage: W.kazhdan_lusztig_polynomial([1],[3,2])
------------------------------------------------------------------------
Unhandled SIGSEGV: A segmentation fault occurred in Sage.
This probably occurred because a *compiled* component of Sage has a bug
in it and is not properly wrapped with sig_on(), sig_off(). You might
want to run Sage under gdb with 'sage -gdb' to debug this.
Sage will now terminate.
```

The implementation of the parabolic KL polynomials is changed so that it works with infinite Coxeter groups.

Anne



---

archive/issue_events_108047.json:
```json
{
    "actor": "https://github.com/anneschilling",
    "created_at": "2013-02-14T04:19:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12912#event-108047"
}
```



---

archive/issue_events_108048.json:
```json
{
    "actor": "https://github.com/anneschilling",
    "created_at": "2013-02-14T04:19:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12912#event-108048"
}
```



---

archive/issue_comments_148430.json:
```json
{
    "body": "**Changing keywords** from \"coxeter\" to \"coxeter, days45\".",
    "created_at": "2013-02-14T04:22:19Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148430",
    "user": "https://github.com/anneschilling"
}
```

**Changing keywords** from "coxeter" to "coxeter, days45".



---

archive/issue_comments_148431.json:
```json
{
    "body": "<a id='comment:25'></a>\nIt seems like Dan's computer is not being picked up as a mac.  What does he get when doing just running \"uname\" on his 10.7 box.",
    "created_at": "2013-02-14T09:49:42Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148431",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:25'></a>
It seems like Dan's computer is not being picked up as a mac.  What does he get when doing just running "uname" on his 10.7 box.



---

archive/issue_comments_148432.json:
```json
{
    "body": "<a id='comment:26'></a>\nReplying to [mhansen](#comment%3A25):\n> It seems like Dan's computer is not being picked up as a mac.  What does he get when doing just running \"uname\" on his 10.7 box.\n\n\nIt is being picked up as a mac! \n\nIt's kind of the converse: the -soname option that is added by the Makefile under Darwin is not accepted by his compiler. My impression is that the compilation on Dan's machine (running Lion) is using Sage's own gcc (which like on Linux does not seem to need/want the soname option), whereas on Anne's machine one uses the system wide gcc by Apple (which seem to requires this option). I am wondering what's the standard way to handle this.\n\nCheers,",
    "created_at": "2013-02-14T13:00:19Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148432",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:26'></a>
Replying to [mhansen](#comment%3A25):
> It seems like Dan's computer is not being picked up as a mac.  What does he get when doing just running "uname" on his 10.7 box.


It is being picked up as a mac! 

It's kind of the converse: the -soname option that is added by the Makefile under Darwin is not accepted by his compiler. My impression is that the compilation on Dan's machine (running Lion) is using Sage's own gcc (which like on Linux does not seem to need/want the soname option), whereas on Anne's machine one uses the system wide gcc by Apple (which seem to requires this option). I am wondering what's the standard way to handle this.

Cheers,



---

archive/issue_comments_148433.json:
```json
{
    "body": "<a id='comment:27'></a>\nOn Cygwin I get:\n\n```\ng++ -shared -Wl,-soname,libcoxeter3.so -o libcoxeter3.so special.o memory.o schubert.o help.o transducer.o type.o affine.o invkl.o klsupport.o uneqkl.o coxtypes.o interface.o cells.o posets.o commands.o graph.o wgraph.o main.o coxgroup.o io.o kl.o constants.o interactive.o error.o files.o fcoxgroup.o bits.o general.o automata.o typeA.o sage.o minroots.o -lc\nmemory.o: file not recognized: File format not recognized\ncollect2: error: ld returned 1 exit status\n```",
    "created_at": "2013-02-14T15:36:32Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148433",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:27'></a>
On Cygwin I get:

```
g++ -shared -Wl,-soname,libcoxeter3.so -o libcoxeter3.so special.o memory.o schubert.o help.o transducer.o type.o affine.o invkl.o klsupport.o uneqkl.o coxtypes.o interface.o cells.o posets.o commands.o graph.o wgraph.o main.o coxgroup.o io.o kl.o constants.o interactive.o error.o files.o fcoxgroup.o bits.o general.o automata.o typeA.o sage.o minroots.o -lc
memory.o: file not recognized: File format not recognized
collect2: error: ld returned 1 exit status
```



---

archive/issue_comments_148434.json:
```json
{
    "body": "<a id='comment:28'></a>\nSome random remarks:\n* check youre actually in a Sage environment at the beginning of spkg-install\n* the way you patch is really strange, isn't it possible to use proper patches?\n* use $MAKE in spkg-install\n* check for errors in spkg-install\n\nThere are .o objects in the src dir, I guess that's why it fails on Cygwin and OS X, these are object files for Linux.",
    "created_at": "2013-02-14T15:40:57Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148434",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:28'></a>
Some random remarks:
* check youre actually in a Sage environment at the beginning of spkg-install
* the way you patch is really strange, isn't it possible to use proper patches?
* use $MAKE in spkg-install
* check for errors in spkg-install

There are .o objects in the src dir, I guess that's why it fails on Cygwin and OS X, these are object files for Linux.



---

archive/issue_comments_148435.json:
```json
{
    "body": "<a id='comment:29'></a>\nAnd you will obviously not copy the right library file on Cygwin.\n\nCould you create an install target in the makefile that would simplify installation?",
    "created_at": "2013-02-14T15:51:37Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148435",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:29'></a>
And you will obviously not copy the right library file on Cygwin.

Could you create an install target in the makefile that would simplify installation?



---

archive/issue_events_108049.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2013-02-14T15:54:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12912#event-108049"
}
```



---

archive/issue_events_108050.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2013-02-14T15:54:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12912#event-108050"
}
```



---

archive/issue_comments_148436.json:
```json
{
    "body": "<a id='comment:30'></a>\nIn fact you will copy the .so file, but I don't see why a .dylib file should be created when looking at the makefile... so you won't copy anything on mac os x.",
    "created_at": "2013-02-14T15:54:37Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148436",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:30'></a>
In fact you will copy the .so file, but I don't see why a .dylib file should be created when looking at the makefile... so you won't copy anything on mac os x.



---

archive/issue_comments_148437.json:
```json
{
    "body": "<a id='comment:31'></a>\nOnce correctly installed  it seems to work on Cygwin!\n\nI'm not convinced the coxeter_group.py in sage/libs do really belong there.",
    "created_at": "2013-02-14T16:02:13Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148437",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:31'></a>
Once correctly installed  it seems to work on Cygwin!

I'm not convinced the coxeter_group.py in sage/libs do really belong there.



---

archive/issue_comments_148438.json:
```json
{
    "body": "<a id='comment:32'></a>\nThanks much Jean-Pierre for your comments!\n\nCool that it works on cygwin!\n\nMike, Jean-Pierre: what's the best route from here? \n\nOne route is to fix the current manual handling of the different targets (macos, cygwin, ...). However that was written by Mike and I don't master the technical details, so I can't do it myself. The other option is to autoconfiscate the project, which I could do. What do you think?\n\nCheers,\n                           Nicolas",
    "created_at": "2013-02-14T16:02:55Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148438",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:32'></a>
Thanks much Jean-Pierre for your comments!

Cool that it works on cygwin!

Mike, Jean-Pierre: what's the best route from here? 

One route is to fix the current manual handling of the different targets (macos, cygwin, ...). However that was written by Mike and I don't master the technical details, so I can't do it myself. The other option is to autoconfiscate the project, which I could do. What do you think?

Cheers,
                           Nicolas



---

archive/issue_comments_148439.json:
```json
{
    "body": "<a id='comment:33'></a>\nOops, I read a if wrong, so maybe Mike's analysis is actually right. And I screwed up the Coxeter3 sources. Let me fix that now, and let's see how it goes.",
    "created_at": "2013-02-14T17:02:20Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148439",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:33'></a>
Oops, I read a if wrong, so maybe Mike's analysis is actually right. And I screwed up the Coxeter3 sources. Let me fix that now, and let's see how it goes.



---

archive/issue_comments_148440.json:
```json
{
    "body": "**Changing work_issues** from \"category setting\" to \"\".",
    "created_at": "2013-02-14T17:34:14Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148440",
    "user": "https://github.com/nthiery"
}
```

**Changing work_issues** from "category setting" to "".



---

archive/issue_comments_148441.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,9 +1,9 @@\n [Coxeter3|http://math.univ-lyon1.fr/~ducloux/coxeter/coxeter3/english/coxeter3_e.html] is a C implementation of Coxeter groups. Beside computing with elements (using the combinatorics of reduced words) it contains super fast code for bruhat order, Kazdhan-Lusztig polynomials and the like.\n \n-http://sage.math.washington.edu/home/nthiery/coxeter3-1.0.spkg\n+http://sage.math.washington.edu/home/nthiery/coxeter3-1.1.spkg\n \n ---\n \n Apply [attachment:trac_12912-coxeter3-mh.patch]\n \n-Add coxeter-3-1.0.spkg as optional package.\n+Add coxeter-3-1.1.spkg as optional package.\n``````\n",
    "created_at": "2013-02-14T17:34:14Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148441",
    "user": "https://github.com/nthiery"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,9 +1,9 @@
 [Coxeter3|http://math.univ-lyon1.fr/~ducloux/coxeter/coxeter3/english/coxeter3_e.html] is a C implementation of Coxeter groups. Beside computing with elements (using the combinatorics of reduced words) it contains super fast code for bruhat order, Kazdhan-Lusztig polynomials and the like.
 
-http://sage.math.washington.edu/home/nthiery/coxeter3-1.0.spkg
+http://sage.math.washington.edu/home/nthiery/coxeter3-1.1.spkg
 
 ---
 
 Apply [attachment:trac_12912-coxeter3-mh.patch]
 
-Add coxeter-3-1.0.spkg as optional package.
+Add coxeter-3-1.1.spkg as optional package.
``````




---

archive/issue_comments_148442.json:
```json
{
    "body": "<a id='comment:35'></a>\nHi Mike, Anne, Dan, Jean-Pierre,\n\nCould you try the new spkg advertised above and let me know how it works on your platform? In principle I adressed the issues raised by Jean-Pierre, and unscrewed what I had screwed up. With some luck, the spkg will actually work on MacOS now.\n\nCheers,\n                                    Nicolas",
    "created_at": "2013-02-14T17:35:59Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148442",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:35'></a>
Hi Mike, Anne, Dan, Jean-Pierre,

Could you try the new spkg advertised above and let me know how it works on your platform? In principle I adressed the issues raised by Jean-Pierre, and unscrewed what I had screwed up. With some luck, the spkg will actually work on MacOS now.

Cheers,
                                    Nicolas



---

archive/issue_comments_148443.json:
```json
{
    "body": "<a id='comment:36'></a>\nWait a minute; Brant found a typo ...",
    "created_at": "2013-02-14T17:39:52Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148443",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:36'></a>
Wait a minute; Brant found a typo ...



---

archive/issue_comments_148444.json:
```json
{
    "body": "<a id='comment:37'></a>\nJust tested and passed smoothly on:\n\n- MacOS X.8 (installation)\n- MacOS X.7 (installation + optional tests in sage.libs.coxeter)\n- Ubuntu 11.10 (installation + optional tests in sage.libs.coxeter)\n\nSo I indeed was the one to screw up the installation on MacOS in the first place ...\n\nFurther test reports welcome!",
    "created_at": "2013-02-14T17:53:35Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148444",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:37'></a>
Just tested and passed smoothly on:

- MacOS X.8 (installation)
- MacOS X.7 (installation + optional tests in sage.libs.coxeter)
- Ubuntu 11.10 (installation + optional tests in sage.libs.coxeter)

So I indeed was the one to screw up the installation on MacOS in the first place ...

Further test reports welcome!



---

archive/issue_comments_148445.json:
```json
{
    "body": "**Work_Issues:** coxeter_group.py in sage/libs ?",
    "created_at": "2013-02-14T17:56:08Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148445",
    "user": "https://github.com/nthiery"
}
```

**Work_Issues:** coxeter_group.py in sage/libs ?



---

archive/issue_comments_148446.json:
```json
{
    "body": "<a id='comment:39'></a>\nLast remarks for the moment:\n* could you redirect error message to stderr  (>&2)\n* could you add a similar treatment for Cygwin (\"$UNAME\" = \"CYGWIN\") as for Darwin?\n  You could then name the library cyg${module}.dll, put it in */bin (and potentially ask gcc to create an additional import library lib${module}.dll.a put in */lib, you can trigger its generation with -Wl,--out-implib=lib${module}.dll.a -Wl,--export-all-symbols, not sure the export all symbol thing is really necessary, i.e. if its default or not)\n* an exe extension for the executable would be nice as well on Cygwin!",
    "created_at": "2013-02-14T22:41:47Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148446",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:39'></a>
Last remarks for the moment:
* could you redirect error message to stderr  (>&2)
* could you add a similar treatment for Cygwin ("$UNAME" = "CYGWIN") as for Darwin?
  You could then name the library cyg${module}.dll, put it in */bin (and potentially ask gcc to create an additional import library lib${module}.dll.a put in */lib, you can trigger its generation with -Wl,--out-implib=lib${module}.dll.a -Wl,--export-all-symbols, not sure the export all symbol thing is really necessary, i.e. if its default or not)
* an exe extension for the executable would be nice as well on Cygwin!



---

archive/issue_comments_148447.json:
```json
{
    "body": "<a id='comment:40'></a>\nAnother one:\n* I see in the original makefile that cc is set to g++ and that cannot be overriden, maybe its worth changing that as well to use the default (and overridable) Sage C++ compiler.",
    "created_at": "2013-02-14T22:46:54Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148447",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:40'></a>
Another one:
* I see in the original makefile that cc is set to g++ and that cannot be overriden, maybe its worth changing that as well to use the default (and overridable) Sage C++ compiler.



---

archive/issue_comments_148448.json:
```json
{
    "body": "<a id='comment:41'></a>\nMike Hansen wrote:\n\n> It seems like Dan's computer is not being picked up as a mac. What does he get when doing just running \"uname\" on his 10.7 box.\n\n\n\n```\n$ uname -a\nDarwin tracer 11.4.2 Darwin Kernel Version 11.4.2: Thu Aug 23 16:25:48 PDT\n2012; root:xnu-1699.32.7~1/RELEASE_X86_64 x86_64\n```\n\nI'll try the revised spkg later tonight.",
    "created_at": "2013-02-15T01:11:35Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148448",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:41'></a>
Mike Hansen wrote:

> It seems like Dan's computer is not being picked up as a mac. What does he get when doing just running "uname" on his 10.7 box.



```
$ uname -a
Darwin tracer 11.4.2 Darwin Kernel Version 11.4.2: Thu Aug 23 16:25:48 PDT
2012; root:xnu-1699.32.7~1/RELEASE_X86_64 x86_64
```

I'll try the revised spkg later tonight.



---

archive/issue_comments_148449.json:
```json
{
    "body": "<a id='comment:42'></a>\nI've put a further modified spkg at:\nhttp://boxen.math.washington.edu/home/jpflori/coxeter-3.1.1.spkg\n\nWorks on Linux, testing now on Cygwin.",
    "created_at": "2013-02-15T11:16:53Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148449",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:42'></a>
I've put a further modified spkg at:
http://boxen.math.washington.edu/home/jpflori/coxeter-3.1.1.spkg

Works on Linux, testing now on Cygwin.



---

archive/issue_comments_148450.json:
```json
{
    "body": "<a id='comment:43'></a>\nAnd it does not work on Cygwin, some problem with UNAME, I guess it won't work on Darwin.\n\nSome concerns not addressed but less important I guess:\n* no way for the user to use his C[|PP|XX]FLAGS,\n* no handling of SAGE_DEBUG.",
    "created_at": "2013-02-15T11:23:02Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148450",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:43'></a>
And it does not work on Cygwin, some problem with UNAME, I guess it won't work on Darwin.

Some concerns not addressed but less important I guess:
* no way for the user to use his C[|PP|XX]FLAGS,
* no handling of SAGE_DEBUG.



---

archive/issue_comments_148451.json:
```json
{
    "body": "<a id='comment:44'></a>\nReplying to [jpflori](#comment%3A42):\n\n> I've put a further modified spkg at:\n> http://boxen.math.washington.edu/home/jpflori/coxeter-3.1.1.spkg\n> \n> Works on Linux, testing now on Cygwin.\n\n\nThe link is broke. The file exists in your directory but the spelling differs\nat the hyphen.",
    "created_at": "2013-02-15T12:05:33Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148451",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:44'></a>
Replying to [jpflori](#comment%3A42):

> I've put a further modified spkg at:
> http://boxen.math.washington.edu/home/jpflori/coxeter-3.1.1.spkg
> 
> Works on Linux, testing now on Cygwin.


The link is broke. The file exists in your directory but the spelling differs
at the hyphen.



---

archive/issue_comments_148452.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n [Coxeter3|http://math.univ-lyon1.fr/~ducloux/coxeter/coxeter3/english/coxeter3_e.html] is a C implementation of Coxeter groups. Beside computing with elements (using the combinatorics of reduced words) it contains super fast code for bruhat order, Kazdhan-Lusztig polynomials and the like.\n \n-http://sage.math.washington.edu/home/nthiery/coxeter3-1.1.spkg\n+http://boxen.math.washington.edu/home/jpflori/coxeter-3.1.1.spkg\n \n ---\n \n``````\n",
    "created_at": "2013-02-15T14:17:37Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148452",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 [Coxeter3|http://math.univ-lyon1.fr/~ducloux/coxeter/coxeter3/english/coxeter3_e.html] is a C implementation of Coxeter groups. Beside computing with elements (using the combinatorics of reduced words) it contains super fast code for bruhat order, Kazdhan-Lusztig polynomials and the like.
 
-http://sage.math.washington.edu/home/nthiery/coxeter3-1.1.spkg
+http://boxen.math.washington.edu/home/jpflori/coxeter-3.1.1.spkg
 
 ---
 
``````




---

archive/issue_comments_148453.json:
```json
{
    "body": "<a id='comment:45'></a>\nI've just reupped an spkg, at:\nhttp://boxen.math.washington.edu/home/jpflori/coxeter3-1.1.spkg\nthen.\nIt now works on cygwin.\nThe test I used was over quoted...\nAnd it needs $(CXX) to link on Cygwin, not sure why it works elsewher, surely because undefined symbols are allowed.",
    "created_at": "2013-02-15T14:17:37Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148453",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:45'></a>
I've just reupped an spkg, at:
http://boxen.math.washington.edu/home/jpflori/coxeter3-1.1.spkg
then.
It now works on cygwin.
The test I used was over quoted...
And it needs $(CXX) to link on Cygwin, not sure why it works elsewher, surely because undefined symbols are allowed.



---

archive/issue_comments_148454.json:
```json
{
    "body": "<a id='comment:46'></a>\nWith coxeter3-1.1.spkg and the posted patch, things now seem OK on my computer. (I haven't\ninvestigated the parabolic KL polynomials.)",
    "created_at": "2013-02-15T17:08:29Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148454",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:46'></a>
With coxeter3-1.1.spkg and the posted patch, things now seem OK on my computer. (I haven't
investigated the parabolic KL polynomials.)



---

archive/issue_comments_148455.json:
```json
{
    "body": "<a id='comment:47'></a>\nThe installation of the new spkg also works for me on MacOS 10.6.8.",
    "created_at": "2013-02-15T17:13:45Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148455",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:47'></a>
The installation of the new spkg also works for me on MacOS 10.6.8.



---

archive/issue_comments_148456.json:
```json
{
    "body": "<a id='comment:48'></a>\nAdded reference for parabolic KL polynomials.",
    "created_at": "2013-02-15T17:45:55Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148456",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:48'></a>
Added reference for parabolic KL polynomials.



---

archive/issue_comments_148457.json:
```json
{
    "body": "<a id='comment:49'></a>\nThe index set was computed incorrectly (for affine types). I fixed that. \n\nUnfortunately, going from sage-5.6 to sage-5.7.beta4 the following now fails:\n\n```\nsage: C = CoxeterGroup(['A',3,1],implementation='coxeter3')\nsage: s = C.gens()\nsage: s[0]*s[1]\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-3-059a6d605fdd> in <module>()\n----> 1 s[Integer(0)]*s[Integer(1)]\n\n/Applications/sage-5.7.beta4/local/lib/python2.7/site-packages/sage/categories/magmas.pyc in __mul__(self, right)\n    307             \"\"\"\n    308             if have_same_parent(self, right) and hasattr(self, \"_mul_\"):\n--> 309                 return self._mul_(right)\n    310             from sage.structure.element import get_coercion_model\n    311             import operator\n\n/Applications/sage-5.7.beta4/local/lib/python2.7/site-packages/sage/libs/coxeter/coxeter_group.pyc in _mul_(self, y)\n    450             \"\"\"\n    451             result = self.value * y.value\n--> 452             return self.parent()(result)\n    453 \n    454         def __eq__(self, y):\n\n/Applications/sage-5.7.beta4/local/lib/python2.7/site-packages/sage/structure/parent.so in sage.structure.parent.Parent.__call__ (sage/structure/parent.c:7474)()\n\nTypeError: No conversion defined from Coxeter group of type a and rank 4 to Coxeter group of type ['A', 3, 1] implemented by Coxeter3\n```\n\nAnne",
    "created_at": "2013-02-15T22:12:24Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148457",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:49'></a>
The index set was computed incorrectly (for affine types). I fixed that. 

Unfortunately, going from sage-5.6 to sage-5.7.beta4 the following now fails:

```
sage: C = CoxeterGroup(['A',3,1],implementation='coxeter3')
sage: s = C.gens()
sage: s[0]*s[1]
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-3-059a6d605fdd> in <module>()
----> 1 s[Integer(0)]*s[Integer(1)]

/Applications/sage-5.7.beta4/local/lib/python2.7/site-packages/sage/categories/magmas.pyc in __mul__(self, right)
    307             """
    308             if have_same_parent(self, right) and hasattr(self, "_mul_"):
--> 309                 return self._mul_(right)
    310             from sage.structure.element import get_coercion_model
    311             import operator

/Applications/sage-5.7.beta4/local/lib/python2.7/site-packages/sage/libs/coxeter/coxeter_group.pyc in _mul_(self, y)
    450             """
    451             result = self.value * y.value
--> 452             return self.parent()(result)
    453 
    454         def __eq__(self, y):

/Applications/sage-5.7.beta4/local/lib/python2.7/site-packages/sage/structure/parent.so in sage.structure.parent.Parent.__call__ (sage/structure/parent.c:7474)()

TypeError: No conversion defined from Coxeter group of type a and rank 4 to Coxeter group of type ['A', 3, 1] implemented by Coxeter3
```

Anne



---

archive/issue_comments_148458.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n [Coxeter3|http://math.univ-lyon1.fr/~ducloux/coxeter/coxeter3/english/coxeter3_e.html] is a C implementation of Coxeter groups. Beside computing with elements (using the combinatorics of reduced words) it contains super fast code for bruhat order, Kazdhan-Lusztig polynomials and the like.\n \n-http://boxen.math.washington.edu/home/jpflori/coxeter-3.1.1.spkg\n+http://boxen.math.washington.edu/home/jpflori/coxeter3-1.1.spkg\n \n ---\n \n``````\n",
    "created_at": "2013-02-19T02:38:36Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148458",
    "user": "https://github.com/nthiery"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 [Coxeter3|http://math.univ-lyon1.fr/~ducloux/coxeter/coxeter3/english/coxeter3_e.html] is a C implementation of Coxeter groups. Beside computing with elements (using the combinatorics of reduced words) it contains super fast code for bruhat order, Kazdhan-Lusztig polynomials and the like.
 
-http://boxen.math.washington.edu/home/jpflori/coxeter-3.1.1.spkg
+http://boxen.math.washington.edu/home/jpflori/coxeter3-1.1.spkg
 
 ---
 
``````




---

archive/issue_comments_148459.json:
```json
{
    "body": "<a id='comment:50'></a>\nFixed link to latest spkg by Jean-Pierre :-)",
    "created_at": "2013-02-19T02:38:36Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148459",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:50'></a>
Fixed link to latest spkg by Jean-Pierre :-)



---

archive/issue_comments_148460.json:
```json
{
    "body": "<a id='comment:51'></a>\nHi Jean-Pierre\n\nI just went through your changes to the spkg and they look good. Thanks much!\n\nSo this is a positive review on that aspect. I am now going to look at the above issues with beta4.",
    "created_at": "2013-02-19T02:51:54Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148460",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:51'></a>
Hi Jean-Pierre

I just went through your changes to the spkg and they look good. Thanks much!

So this is a positive review on that aspect. I am now going to look at the above issues with beta4.



---

archive/issue_comments_148461.json:
```json
{
    "body": "**Changing reviewer** from \"Anne Schilling, Nicolas M. Thiery\" to \"Anne Schilling, Nicolas M. Thi\u00e9ry, Jean-Pierre Flori\".",
    "created_at": "2013-02-19T03:47:17Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148461",
    "user": "https://github.com/nthiery"
}
```

**Changing reviewer** from "Anne Schilling, Nicolas M. Thiery" to "Anne Schilling, Nicolas M. Thi√©ry, Jean-Pierre Flori".



---

archive/issue_comments_148462.json:
```json
{
    "body": "**Changing work_issues** from \"coxeter_group.py in sage/libs ?\" to \"\".",
    "created_at": "2013-02-19T03:47:17Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148462",
    "user": "https://github.com/nthiery"
}
```

**Changing work_issues** from "coxeter_group.py in sage/libs ?" to "".



---

archive/issue_events_108051.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2013-02-19T03:47:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12912#event-108051"
}
```



---

archive/issue_events_108052.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2013-02-19T03:47:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12912#event-108052"
}
```



---

archive/issue_comments_148463.json:
```json
{
    "body": "<a id='comment:53'></a>\nIssue fixed in the updated patch, by having CoxGroup inherit from SageObject (since #13378, conversion can only be done from an object such that parent(x) is an instance of SageObject or a type.\n\nThe updated patch also improves the documentation for Kazhdan-Lusztig polynomials and renames the directory to sage.libs.coxeter3 for consistency with the package name. We cross-reviewed the changes with Anne.\n\nPositive review!",
    "created_at": "2013-02-19T03:51:38Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148463",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:53'></a>
Issue fixed in the updated patch, by having CoxGroup inherit from SageObject (since #13378, conversion can only be done from an object such that parent(x) is an instance of SageObject or a type.

The updated patch also improves the documentation for Kazhdan-Lusztig polynomials and renames the directory to sage.libs.coxeter3 for consistency with the package name. We cross-reviewed the changes with Anne.

Positive review!



---

archive/issue_comments_148464.json:
```json
{
    "body": "<a id='comment:54'></a>\nReplying to [jpflori](#comment%3A31):\n> Once correctly installed  it seems to work on Cygwin!\n> \n> I'm not convinced the coxeter_group.py in sage/libs do really belong there.\n\n\nI also wondered about it. At the end of the day, I find that it's really just a wrapper around the stuff implemented in coxeter.pyx, and is therefore best left there for code locality.",
    "created_at": "2013-02-19T03:55:09Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148464",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:54'></a>
Replying to [jpflori](#comment%3A31):
> Once correctly installed  it seems to work on Cygwin!
> 
> I'm not convinced the coxeter_group.py in sage/libs do really belong there.


I also wondered about it. At the end of the day, I find that it's really just a wrapper around the stuff implemented in coxeter.pyx, and is therefore best left there for code locality.



---

archive/issue_events_108053.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-02-19T10:19:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "label": "component: combinatorics",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12912#event-108053"
}
```



---

archive/issue_events_108054.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-02-19T10:19:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "label": "component: packages: optional",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12912#event-108054"
}
```



---

archive/issue_events_108055.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-02-19T10:19:22Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "milestone": "sage-5.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12912#event-108055"
}
```



---

archive/issue_events_108056.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-02-19T10:19:22Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "milestone": "sage-5.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12912#event-108056"
}
```



---

archive/issue_comments_148465.json:
```json
{
    "body": "<a id='comment:56'></a>\nEverything indeed looks good except for a few small changes Mark Shimozono and I want to make to parabolic KL polynomials. If this cannot be done quickly, we will separate those out as a separate patch.\n\nAnne",
    "created_at": "2013-02-19T15:36:37Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148465",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:56'></a>
Everything indeed looks good except for a few small changes Mark Shimozono and I want to make to parabolic KL polynomials. If this cannot be done quickly, we will separate those out as a separate patch.

Anne



---

archive/issue_events_108057.json:
```json
{
    "actor": "https://github.com/anneschilling",
    "created_at": "2013-02-19T15:37:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12912#event-108057"
}
```



---

archive/issue_events_108058.json:
```json
{
    "actor": "https://github.com/anneschilling",
    "created_at": "2013-02-19T15:37:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12912#event-108058"
}
```



---

archive/issue_comments_148466.json:
```json
{
    "body": "<a id='comment:58'></a>\nMark Shimozono and I added some more documentation and tests for parabolic KLs. We also implemented various conventions of the KLs.\n\nSo back to positive review!\n\nAnne",
    "created_at": "2013-02-19T20:49:01Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148466",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:58'></a>
Mark Shimozono and I added some more documentation and tests for parabolic KLs. We also implemented various conventions of the KLs.

So back to positive review!

Anne



---

archive/issue_events_108059.json:
```json
{
    "actor": "https://github.com/anneschilling",
    "created_at": "2013-02-19T20:49:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12912#event-108059"
}
```



---

archive/issue_events_108060.json:
```json
{
    "actor": "https://github.com/anneschilling",
    "created_at": "2013-02-19T20:49:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12912#event-108060"
}
```



---

archive/issue_events_108061.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-02-20T11:04:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12912#event-108061"
}
```



---

archive/issue_events_108062.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-02-20T11:04:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12912#event-108062"
}
```



---

archive/issue_comments_148467.json:
```json
{
    "body": "<a id='comment:60'></a>\n\n```\nsage -t  -force_lib devel/sage/sage/libs/coxeter3/coxeter_group.py\n**********************************************************************\nFile \"/release/merger/sage-5.8.beta1/devel/sage-main/sage/libs/coxeter3/coxeter_group.py\", line 304:\n    sage: W = CoxeterGroup(['A',3],implementation='coxeter3')\nException raised:\n    Traceback (most recent call last):\n      File \"/release/merger/sage-5.8.beta1/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/release/merger/sage-5.8.beta1/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/release/merger/sage-5.8.beta1/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_18[2]>\", line 1, in <module>\n        W = CoxeterGroup(['A',Integer(3)],implementation='coxeter3')###line 304:\n    sage: W = CoxeterGroup(['A',3],implementation='coxeter3')\n      File \"/release/merger/sage-5.8.beta1/local/lib/python/site-packages/sage/combinat/root_system/coxeter_group.py\", line 85, in Coxeter\nGroup\n        raise RuntimeError, \"coxeter3 must be installed\"\n    RuntimeError: coxeter3 must be installed\n**********************************************************************\n```\nand some more like this...",
    "created_at": "2013-02-20T11:04:36Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148467",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:60'></a>

```
sage -t  -force_lib devel/sage/sage/libs/coxeter3/coxeter_group.py
**********************************************************************
File "/release/merger/sage-5.8.beta1/devel/sage-main/sage/libs/coxeter3/coxeter_group.py", line 304:
    sage: W = CoxeterGroup(['A',3],implementation='coxeter3')
Exception raised:
    Traceback (most recent call last):
      File "/release/merger/sage-5.8.beta1/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/release/merger/sage-5.8.beta1/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/release/merger/sage-5.8.beta1/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_18[2]>", line 1, in <module>
        W = CoxeterGroup(['A',Integer(3)],implementation='coxeter3')###line 304:
    sage: W = CoxeterGroup(['A',3],implementation='coxeter3')
      File "/release/merger/sage-5.8.beta1/local/lib/python/site-packages/sage/combinat/root_system/coxeter_group.py", line 85, in Coxeter
Group
        raise RuntimeError, "coxeter3 must be installed"
    RuntimeError: coxeter3 must be installed
**********************************************************************
```
and some more like this...



---

archive/issue_comments_148468.json:
```json
{
    "body": "<a id='comment:61'></a>\nIt looks like a few more tests need to be marked optional.",
    "created_at": "2013-02-20T12:46:10Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148468",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:61'></a>
It looks like a few more tests need to be marked optional.



---

archive/issue_comments_148469.json:
```json
{
    "body": "<a id='comment:62'></a>\nI am on it ...",
    "created_at": "2013-02-20T13:25:46Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148469",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:62'></a>
I am on it ...



---

archive/issue_events_108063.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2013-02-20T15:52:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12912#event-108063"
}
```



---

archive/issue_events_108064.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2013-02-20T15:52:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12912#event-108064"
}
```



---

archive/attachments_017414.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_12912-coxeter3-mh.patch",
    "asset_url": "tarball://root/attachments/ticket12912/trac_12912-coxeter3-mh.patch",
    "created_at": "2013-02-20T15:52:25Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket12912/trac_12912-coxeter3-mh.patch",
    "user": "https://github.com/nthiery"
}
```



---

archive/issue_comments_148470.json:
```json
{
    "body": "<a id='comment:63'></a>\nAttachment [trac_12912-coxeter3-mh.patch](https://github.com/sagemath/sage/files/ticket12912/trac_12912-coxeter3-mh.patch) by @nthiery created at 2013-02-20 15:52:25",
    "created_at": "2013-02-20T15:52:25Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148470",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:63'></a>
Attachment [trac_12912-coxeter3-mh.patch](https://github.com/sagemath/sage/files/ticket12912/trac_12912-coxeter3-mh.patch) by @nthiery created at 2013-02-20 15:52:25



---

archive/issue_comments_148471.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-[Coxeter3|http://math.univ-lyon1.fr/~ducloux/coxeter/coxeter3/english/coxeter3_e.html] is a C implementation of Coxeter groups. Beside computing with elements (using the combinatorics of reduced words) it contains super fast code for bruhat order, Kazdhan-Lusztig polynomials and the like.\n+[This is the Trac macro *Coxeter3* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#Coxeter3-macro) is a C implementation of Coxeter groups. Beside computing with elements (using the combinatorics of reduced words) it contains super fast code for bruhat order, Kazdhan-Lusztig polynomials and the like.\n \n http://boxen.math.washington.edu/home/jpflori/coxeter3-1.1.spkg\n \n``````\n",
    "created_at": "2013-02-20T15:52:25Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148471",
    "user": "https://github.com/nthiery"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-[Coxeter3|http://math.univ-lyon1.fr/~ducloux/coxeter/coxeter3/english/coxeter3_e.html] is a C implementation of Coxeter groups. Beside computing with elements (using the combinatorics of reduced words) it contains super fast code for bruhat order, Kazdhan-Lusztig polynomials and the like.
+[This is the Trac macro *Coxeter3* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#Coxeter3-macro) is a C implementation of Coxeter groups. Beside computing with elements (using the combinatorics of reduced words) it contains super fast code for bruhat order, Kazdhan-Lusztig polynomials and the like.
 
 http://boxen.math.washington.edu/home/jpflori/coxeter3-1.1.spkg
 
``````




---

archive/issue_comments_148472.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-[This is the Trac macro *Coxeter3* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#Coxeter3-macro) is a C implementation of Coxeter groups. Beside computing with elements (using the combinatorics of reduced words) it contains super fast code for bruhat order, Kazdhan-Lusztig polynomials and the like.\n+[Coxeter3](http://math.univ-lyon1.fr/~ducloux/coxeter/coxeter3/english/coxeter3_e.html) is a C implementation of Coxeter groups. Beside computing with elements (using the combinatorics of reduced words) it contains super fast code for bruhat order, Kazdhan-Lusztig polynomials and the like.\n \n http://boxen.math.washington.edu/home/jpflori/coxeter3-1.1.spkg\n \n``````\n",
    "created_at": "2013-02-20T15:53:07Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148472",
    "user": "https://github.com/nthiery"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-[This is the Trac macro *Coxeter3* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#Coxeter3-macro) is a C implementation of Coxeter groups. Beside computing with elements (using the combinatorics of reduced words) it contains super fast code for bruhat order, Kazdhan-Lusztig polynomials and the like.
+[Coxeter3](http://math.univ-lyon1.fr/~ducloux/coxeter/coxeter3/english/coxeter3_e.html) is a C implementation of Coxeter groups. Beside computing with elements (using the combinatorics of reduced words) it contains super fast code for bruhat order, Kazdhan-Lusztig polynomials and the like.
 
 http://boxen.math.washington.edu/home/jpflori/coxeter3-1.1.spkg
 
``````




---

archive/issue_events_108065.json:
```json
{
    "actor": "https://github.com/anneschilling",
    "created_at": "2013-02-20T17:01:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12912#event-108065"
}
```



---

archive/issue_events_108066.json:
```json
{
    "actor": "https://github.com/anneschilling",
    "created_at": "2013-02-20T17:01:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12912#event-108066"
}
```



---

archive/issue_comments_148473.json:
```json
{
    "body": "<a id='comment:66'></a>\nspkg is on its way to the servers!",
    "created_at": "2013-02-22T13:35:40Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148473",
    "user": "https://github.com/haraldschilly"
}
```

<a id='comment:66'></a>
spkg is on its way to the servers!



---

archive/issue_events_108067.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-02-22T19:10:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12912#event-108067"
}
```



---

archive/issue_events_108068.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-02-22T19:10:49Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12912#event-108068"
}
```



---

archive/issue_comments_148474.json:
```json
{
    "body": "**Merged:** sage-5.8.beta1",
    "created_at": "2013-02-22T19:10:49Z",
    "issue": "https://github.com/sagemath/sage/issues/12912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12912#issuecomment-148474",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.8.beta1
