# Issue 12109: Function for faster evaluation of cyclotomic polynomials

archive/issues_011937.json:
```json
{
    "assignees": [
        "https://github.com/williamstein"
    ],
    "body": "I've implemented a function for evaluating cyclotomic polynomials without having to explicitly create the polynomial: this gives both memory and speed savings for large n.\n\nCC:  @jpflori\n\nReviewer: **Andr\u00e9 Apitzsch, Simon Spicer**\n\nAuthor: **David Roe**\n\nMerged: **sage-5.8.beta3**\n\nComponent: **number theory**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/12109_\n\n",
    "closed_at": "2013-03-04T07:35:41Z",
    "created_at": "2011-12-03T04:49:50Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20number%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Function for faster evaluation of cyclotomic polynomials",
    "type": "issue",
    "updated_at": "2013-03-04T07:35:41Z",
    "url": "https://github.com/sagemath/sage/issues/12109",
    "user": "https://github.com/roed314"
}
```
I've implemented a function for evaluating cyclotomic polynomials without having to explicitly create the polynomial: this gives both memory and speed savings for large n.

CC:  @jpflori

Reviewer: **André Apitzsch, Simon Spicer**

Author: **David Roe**

Merged: **sage-5.8.beta3**

Component: **number theory**

_Issue created by migration from https://trac.sagemath.org/ticket/12109_





---

archive/issue_events_164155.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2011-12-03T04:49:50Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "milestone_number": null,
    "milestone_title": "sage-5.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12109#event-164155"
}
```



---

archive/issue_events_164156.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2011-12-03T04:49:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20number%20theory",
    "label_color": "0000ff",
    "label_name": "c: number theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12109#event-164156"
}
```



---

archive/issue_events_164157.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2011-12-03T04:49:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12109#event-164157"
}
```



---

archive/issue_events_164158.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2011-12-03T04:49:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12109#event-164158"
}
```



---

archive/issue_events_164159.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2011-12-03T04:49:50Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "subject": "https://github.com/roed314",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12109#event-164159"
}
```



---

archive/issue_events_164160.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2011-12-03T04:52:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12109#event-164160"
}
```



---

archive/issue_events_164161.json:
```json
{
    "actor": "https://github.com/a-andre",
    "created_at": "2011-12-10T17:11:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12109#event-164161"
}
```



---

archive/issue_events_164162.json:
```json
{
    "actor": "https://github.com/a-andre",
    "created_at": "2011-12-10T17:11:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12109#event-164162"
}
```



---

archive/issue_comments_129411.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nSome lines are to long. Maximum line length should be 79 characters.\n\n<code>\\`n\\`th</code> creates a bad rendered reference manual (HTML), <code>\\`n\\`-th</code> should work.\n\n`\\divides` seems to be an unknown command. Reference manual (HTML) shows\n\n```\nSystem Message: WARNING/2 (\\Phi_n(x) = \\prod_{d \\divides n} (x^d - 1)^{\\mu(n / d)})\n```\nuse `\\mid` instead.\n\nThere is a double \"that\" in `parity_divisors()`.\n\nPlease add an example for `_x = Integer(x)` fails.\n\nNot necessary for positive review but could you also change\n\n```\nraise *Error, \"...\"\n```\nto\n\n```\nraise *Error(\"...\")\n```\nhttp://www.python.org/dev/peps/pep-3109/#compatibility-issues",
    "created_at": "2011-12-10T17:11:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12109#issuecomment-129411",
    "user": "https://github.com/a-andre"
}
```

<div id="comment:2" align="right">comment:2</div>

Some lines are to long. Maximum line length should be 79 characters.

<code>\`n\`th</code> creates a bad rendered reference manual (HTML), <code>\`n\`-th</code> should work.

`\divides` seems to be an unknown command. Reference manual (HTML) shows

```
System Message: WARNING/2 (\Phi_n(x) = \prod_{d \divides n} (x^d - 1)^{\mu(n / d)})
```
use `\mid` instead.

There is a double "that" in `parity_divisors()`.

Please add an example for `_x = Integer(x)` fails.

Not necessary for positive review but could you also change

```
raise *Error, "..."
```
to

```
raise *Error("...")
```
http://www.python.org/dev/peps/pep-3109/#compatibility-issues



---

archive/issue_events_164163.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2011-12-12T14:09:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12109#event-164163"
}
```



---

archive/issue_events_164164.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2011-12-12T14:09:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12109#event-164164"
}
```



---

archive/issue_comments_129412.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI changed comments and documentation to less than 79 characters, but left a couple of code snippets longer than that since they were less than 85 and I thought that introducing a line break would make it less clear.  Let me know if you want me to change it.\n\nApply 12109.2.patch only.",
    "created_at": "2011-12-12T14:09:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12109#issuecomment-129412",
    "user": "https://github.com/roed314"
}
```

<div id="comment:3" align="right">comment:3</div>

I changed comments and documentation to less than 79 characters, but left a couple of code snippets longer than that since they were less than 85 and I thought that introducing a line break would make it less clear.  Let me know if you want me to change it.

Apply 12109.2.patch only.



---

archive/issue_comments_129413.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI attached a patch to add a colon and to replace TAB characters.\nEverything else looks fine, so I give it a positive review.",
    "created_at": "2011-12-12T17:19:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12109#issuecomment-129413",
    "user": "https://github.com/a-andre"
}
```

<div id="comment:4" align="right">comment:4</div>

I attached a patch to add a colon and to replace TAB characters.
Everything else looks fine, so I give it a positive review.



---

archive/issue_events_164165.json:
```json
{
    "actor": "https://github.com/a-andre",
    "created_at": "2011-12-12T17:19:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12109#event-164165"
}
```



---

archive/issue_events_164166.json:
```json
{
    "actor": "https://github.com/a-andre",
    "created_at": "2011-12-12T17:19:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12109#event-164166"
}
```



---

archive/issue_comments_129414.json:
```json
{
    "body": "Reviewer: **Andr\u00e9 Apitzsch**",
    "created_at": "2011-12-12T17:19:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12109#issuecomment-129414",
    "user": "https://github.com/a-andre"
}
```

Reviewer: **André Apitzsch**



---

archive/issue_comments_129415.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nPlease state clearly which patches have to be applied.",
    "created_at": "2011-12-13T09:36:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12109#issuecomment-129415",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:5" align="right">comment:5</div>

Please state clearly which patches have to be applied.



---

archive/issue_comments_129416.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nApply\n1. [attachment: 12109.2.patch](https://github.com/sagemath/sage/files/ticket12109/12109.2.patch.gz)\n2. [attachment: trac_12109_reviewer.patch](https://github.com/sagemath/sage/files/ticket12109/trac_12109_reviewer.patch.gz).",
    "created_at": "2011-12-13T10:23:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12109#issuecomment-129416",
    "user": "https://github.com/a-andre"
}
```

<div id="comment:6" align="right">comment:6</div>

Apply
1. [attachment: 12109.2.patch](https://github.com/sagemath/sage/files/ticket12109/12109.2.patch.gz)
2. [attachment: trac_12109_reviewer.patch](https://github.com/sagemath/sage/files/ticket12109/trac_12109_reviewer.patch.gz).



---

archive/issue_comments_129417.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nYou really should add more tests: real numbers, complex numbers, finite field elements, number field elements...",
    "created_at": "2011-12-15T22:46:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12109#issuecomment-129417",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:7" align="right">comment:7</div>

You really should add more tests: real numbers, complex numbers, finite field elements, number field elements...



---

archive/issue_events_164167.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-15T22:46:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12109#event-164167"
}
```



---

archive/issue_events_164168.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-15T22:46:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12109#event-164168"
}
```



---

archive/issue_comments_129418.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nThis is obviously wrong:\n\n```\nsage: cyclotomic_value(11, GF(5)(2))\n2047\n```",
    "created_at": "2011-12-15T22:50:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12109#issuecomment-129418",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">comment:8</div>

This is obviously wrong:

```
sage: cyclotomic_value(11, GF(5)(2))
2047
```



---

archive/issue_comments_129419.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nYou have a big Cython loop without any interrupt checks, you should implement [http://sagemath.org/doc/developer/coding_in_cython.html#interrupt-and-signal-handling](http://sagemath.org/doc/developer/coding_in_cython.html#interrupt-and-signal-handling) (and add a test for it for good measure).",
    "created_at": "2011-12-15T22:53:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12109#issuecomment-129419",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:9" align="right">comment:9</div>

You have a big Cython loop without any interrupt checks, you should implement [http://sagemath.org/doc/developer/coding_in_cython.html#interrupt-and-signal-handling](http://sagemath.org/doc/developer/coding_in_cython.html#interrupt-and-signal-handling) (and add a test for it for good measure).



---

archive/issue_comments_129420.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nInstead of doing many divisions, it would be more efficient to simply compute numerator and denominator and divide once.",
    "created_at": "2011-12-15T23:03:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12109#issuecomment-129420",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:10" align="right">comment:10</div>

Instead of doing many divisions, it would be more efficient to simply compute numerator and denominator and divide once.



---

archive/issue_comments_129421.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nThis new code is actually quite a bit slower than PARI:\n\n```\nsage: timeit(\"cyclotomic_value(2*3*5*7*11*13*17, 10)\")\n5 loops, best of 3: 740 ms per loop\nsage: timeit(\"pari('polcyclo(2*3*5*7*11*13*17, 10)')\")\n5 loops, best of 3: 199 ms per loop\n```",
    "created_at": "2011-12-15T23:07:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12109#issuecomment-129421",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:11" align="right">comment:11</div>

This new code is actually quite a bit slower than PARI:

```
sage: timeit("cyclotomic_value(2*3*5*7*11*13*17, 10)")
5 loops, best of 3: 740 ms per loop
sage: timeit("pari('polcyclo(2*3*5*7*11*13*17, 10)')")
5 loops, best of 3: 199 ms per loop
```



---

archive/issue_events_164169.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2012-01-03T13:55:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12109#event-164169"
}
```



---

archive/issue_events_164170.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2012-01-03T13:55:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12109#event-164170"
}
```



---

archive/issue_comments_129422.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nThanks for catching those.  I couldn't beat Pari, so the new patch uses pari for integers, rationals, and pari elements.  I also incorporated the code for roots of unity and the tests from http://permalink.gmane.org/gmane.comp.mathematics.pari.devel/2930\n\nApply only 12109.3.patch.",
    "created_at": "2012-01-03T13:55:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12109#issuecomment-129422",
    "user": "https://github.com/roed314"
}
```

<div id="comment:12" align="right">comment:12</div>

Thanks for catching those.  I couldn't beat Pari, so the new patch uses pari for integers, rationals, and pari elements.  I also incorporated the code for roots of unity and the tests from http://permalink.gmane.org/gmane.comp.mathematics.pari.devel/2930

Apply only 12109.3.patch.



---

archive/issue_comments_129423.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nApply 12109.3.patch\n\n(for patchbot)",
    "created_at": "2012-03-12T11:11:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12109#issuecomment-129423",
    "user": "https://github.com/loefflerd"
}
```

<div id="comment:13" align="right">comment:13</div>

Apply 12109.3.patch

(for patchbot)



---

archive/issue_events_164171.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2012-03-12T12:34:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12109#event-164171"
}
```



---

archive/issue_events_164172.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2012-03-12T12:34:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12109#event-164172"
}
```



---

archive/issue_comments_129424.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nThis patch seems to cause an infinite loop: both recent patchbot runs ended in timeout errors, including one with the timeout set to 1 hour:\n\n```\nsage -t  -force_lib devel/sage-12109/sage/rings/polynomial/cyclotomic.pyx\n*** *** Error: TIMED OUT! PROCESS KILLED! *** ***\n\n         [3600.2 s]\n```",
    "created_at": "2012-03-12T12:34:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12109#issuecomment-129424",
    "user": "https://github.com/loefflerd"
}
```

<div id="comment:14" align="right">comment:14</div>

This patch seems to cause an infinite loop: both recent patchbot runs ended in timeout errors, including one with the timeout set to 1 hour:

```
sage -t  -force_lib devel/sage-12109/sage/rings/polynomial/cyclotomic.pyx
*** *** Error: TIMED OUT! PROCESS KILLED! *** ***

         [3600.2 s]
```



---

archive/issue_comments_129425.json:
```json
{
    "body": "Work Issues: **infinite loop**",
    "created_at": "2012-03-12T12:34:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12109#issuecomment-129425",
    "user": "https://github.com/loefflerd"
}
```

Work Issues: **infinite loop**



---

archive/issue_comments_129426.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nProbably this whole patch would better be replaced anyway by a call to PARI.",
    "created_at": "2012-03-12T12:54:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12109#issuecomment-129426",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:15" align="right">comment:15</div>

Probably this whole patch would better be replaced anyway by a call to PARI.



---

archive/issue_events_164173.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2013-02-27T10:40:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12109#event-164173"
}
```



---

archive/issue_events_164174.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2013-02-27T10:40:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12109#event-164174"
}
```



---

archive/issue_comments_129427.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@jdemeyer](#comment:15):\n> Probably this whole patch would better be replaced anyway by a call to PARI.\n\nI've changed it so that it tries to just call PARI (and fixed the timeout problem).  But that won't always work, since not every ring in Sage can convert to PARI.\n\nI don't strongly object to just falling back on `cyclotomic_polynomial` in this case, but the current code will provide a speedup in some cases.  Of course those cases are probably rarely of interest....",
    "created_at": "2013-02-27T10:40:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12109#issuecomment-129427",
    "user": "https://github.com/roed314"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@jdemeyer](#comment:15):
> Probably this whole patch would better be replaced anyway by a call to PARI.

I've changed it so that it tries to just call PARI (and fixed the timeout problem).  But that won't always work, since not every ring in Sage can convert to PARI.

I don't strongly object to just falling back on `cyclotomic_polynomial` in this case, but the current code will provide a speedup in some cases.  Of course those cases are probably rarely of interest....



---

archive/issue_comments_129428.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@roed314](#comment:17):\n> Replying to [@jdemeyer](#comment:15):\n> > Probably this whole patch would better be replaced anyway by a call to PARI.\n\n> \n> I've changed it so that it tries to just call PARI (and fixed the timeout problem).  But that won't always work, since not every ring in Sage can convert to PARI.\n> \n> I don't strongly object to just falling back on `cyclotomic_polynomial` in this case, but the current code will provide a speedup in some cases.  Of course those cases are probably rarely of interest....\n\nI'd prefer to keep your generic code in if it really handles some corner cases better than going through `cyclotomic_polynomial`.\nCould provide an example of a ring where this additional code would be of interest?",
    "created_at": "2013-02-27T10:43:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12109#issuecomment-129428",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@roed314](#comment:17):
> Replying to [@jdemeyer](#comment:15):
> > Probably this whole patch would better be replaced anyway by a call to PARI.

> 
> I've changed it so that it tries to just call PARI (and fixed the timeout problem).  But that won't always work, since not every ring in Sage can convert to PARI.
> 
> I don't strongly object to just falling back on `cyclotomic_polynomial` in this case, but the current code will provide a speedup in some cases.  Of course those cases are probably rarely of interest....

I'd prefer to keep your generic code in if it really handles some corner cases better than going through `cyclotomic_polynomial`.
Could provide an example of a ring where this additional code would be of interest?



---

archive/issue_comments_129429.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nHum, I just saw you did not remove your additional code, so disregard my previous comment.",
    "created_at": "2013-02-27T10:49:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12109#issuecomment-129429",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:19" align="right">comment:19</div>

Hum, I just saw you did not remove your additional code, so disregard my previous comment.



---

archive/issue_comments_129430.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@jpflori](#comment:19):\n> Hum, I just saw you did not remove your additional code, so disregard my previous comment.\n\nIt's still interesting to figure out when it's being used.  Adding a print statement in the `except StandardError` clause, I'm finding that most of the examples in the `TESTS` block are using my implementation.  I'm not sure why PARI is failing in these cases though.",
    "created_at": "2013-02-27T10:54:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12109#issuecomment-129430",
    "user": "https://github.com/roed314"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@jpflori](#comment:19):
> Hum, I just saw you did not remove your additional code, so disregard my previous comment.

It's still interesting to figure out when it's being used.  Adding a print statement in the `except StandardError` clause, I'm finding that most of the examples in the `TESTS` block are using my implementation.  I'm not sure why PARI is failing in these cases though.



---

archive/issue_comments_129431.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nJust fixed a small problem in the TESTS (used `x` as the variable in the for loop).",
    "created_at": "2013-02-27T10:57:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12109#issuecomment-129431",
    "user": "https://github.com/roed314"
}
```

<div id="comment:21" align="right">comment:21</div>

Just fixed a small problem in the TESTS (used `x` as the variable in the for loop).



---

archive/issue_comments_129432.json:
```json
{
    "body": "Minor documentation fixes in cyclotomic_value()",
    "created_at": "2013-03-02T03:18:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12109#issuecomment-129432",
    "user": "https://github.com/haikona"
}
```

Minor documentation fixes in cyclotomic_value()



---

archive/issue_comments_129433.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nAttachment: **[12109.4.patch.gz](https://github.com/sagemath/sage/files/ticket12109/12109.4.patch.gz)**\n\nCan't see any issues. Patch applies, tests work, code checks out with changes mentioned above added, values agree with evaluation of ``cyclotomic_polynomial()`` for every test case I tried.\n\nFixed minor formatting errors in the documentation for ``cyclotomic_value()``. Added one or two lines too for further clarification of the algorithm.",
    "created_at": "2013-03-02T03:19:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12109#issuecomment-129433",
    "user": "https://github.com/haikona"
}
```

<div id="comment:22" align="right">comment:22</div>

Attachment: **[12109.4.patch.gz](https://github.com/sagemath/sage/files/ticket12109/12109.4.patch.gz)**

Can't see any issues. Patch applies, tests work, code checks out with changes mentioned above added, values agree with evaluation of ``cyclotomic_polynomial()`` for every test case I tried.

Fixed minor formatting errors in the documentation for ``cyclotomic_value()``. Added one or two lines too for further clarification of the algorithm.



---

archive/issue_events_164175.json:
```json
{
    "actor": "https://github.com/haikona",
    "created_at": "2013-03-02T03:19:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12109#event-164175"
}
```



---

archive/issue_events_164176.json:
```json
{
    "actor": "https://github.com/haikona",
    "created_at": "2013-03-02T03:19:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12109#event-164176"
}
```



---

archive/issue_comments_129434.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nApply 12109.4.patch\n\n(for patchbot)",
    "created_at": "2013-03-02T03:21:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12109#issuecomment-129434",
    "user": "https://github.com/haikona"
}
```

<div id="comment:23" align="right">comment:23</div>

Apply 12109.4.patch

(for patchbot)



---

archive/issue_comments_129435.json:
```json
{
    "body": "Changed reviewer from **Andr\u00e9 Apitzsch** to **Andr\u00e9 Apitzsch, Simon Spicer**",
    "created_at": "2013-03-02T03:26:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12109#issuecomment-129435",
    "user": "https://github.com/haikona"
}
```

Changed reviewer from **André Apitzsch** to **André Apitzsch, Simon Spicer**



---

archive/issue_comments_129436.json:
```json
{
    "body": "Changed work issues from **infinite loop** to none",
    "created_at": "2013-03-03T13:20:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12109#issuecomment-129436",
    "user": "https://github.com/jdemeyer"
}
```

Changed work issues from **infinite loop** to none



---

archive/issue_comments_129437.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nI assume the \"work issue\" is no longer relevant?...",
    "created_at": "2013-03-03T13:20:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12109#issuecomment-129437",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:25" align="right">comment:25</div>

I assume the "work issue" is no longer relevant?...



---

archive/issue_comments_129438.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nYeah, that's correct.",
    "created_at": "2013-03-03T20:43:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12109#issuecomment-129438",
    "user": "https://github.com/roed314"
}
```

<div id="comment:26" align="right">comment:26</div>

Yeah, that's correct.



---

archive/issue_events_164177.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-03-04T07:35:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12109#event-164177"
}
```



---

archive/issue_events_164178.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-03-04T07:35:41Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/12109#event-164178"
}
```



---

archive/issue_comments_129439.json:
```json
{
    "body": "Merged: **sage-5.8.beta3**",
    "created_at": "2013-03-04T07:35:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/12109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/12109#issuecomment-129439",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.8.beta3**
