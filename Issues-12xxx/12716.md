# Issue 12716: MILP formulation and test functions for vertex separation

archive/issues_012544.json:
```json
{
    "body": "Assignee: jason, ncohen, rlm\n\nCC:  @nathanncohen\n\nKeywords: graph, decomposition, linear ordering, pathwidth\n\nThis patch implements a MILP formulation for the vertex separation and some test functions for evaluating the width of linear vertex orderings.\n\n\nAPPLY:\n* [attachment:trac_12716-combined.patch]\n\nIssue created by migration from https://trac.sagemath.org/ticket/12716\n\n",
    "closed_at": "2012-05-06T12:15:38Z",
    "created_at": "2012-03-21T14:41:31Z",
    "labels": [
        "component: graph theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.1",
    "title": "MILP formulation and test functions for vertex separation",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12716",
    "user": "https://github.com/dcoudert"
}
```
Assignee: jason, ncohen, rlm

CC:  @nathanncohen

Keywords: graph, decomposition, linear ordering, pathwidth

This patch implements a MILP formulation for the vertex separation and some test functions for evaluating the width of linear vertex orderings.


APPLY:
* [attachment:trac_12716-combined.patch]

Issue created by migration from https://trac.sagemath.org/ticket/12716





---

archive/issue_comments_148472.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-03-21T14:45:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12716#issuecomment-148472",
    "user": "https://github.com/dcoudert"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_148473.json:
```json
{
    "body": "Some functions are not yet implemented. I should may be create them and raise an eror message like 'not yet implemented. Please feel free to contribute'.",
    "created_at": "2012-03-21T14:45:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12716#issuecomment-148473",
    "user": "https://github.com/dcoudert"
}
```

Some functions are not yet implemented. I should may be create them and raise an eror message like 'not yet implemented. Please feel free to contribute'.



---

archive/issue_comments_148474.json:
```json
{
    "body": "Attachment [trac_12716_MILP.patch](tarball://root/attachments/some-uuid/ticket12716/trac_12716_MILP.patch) by @dcoudert created at 2012-04-08 23:09:04",
    "created_at": "2012-04-08T23:09:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12716#issuecomment-148474",
    "user": "https://github.com/dcoudert"
}
```

Attachment [trac_12716_MILP.patch](tarball://root/attachments/some-uuid/ticket12716/trac_12716_MILP.patch) by @dcoudert created at 2012-04-08 23:09:04



---

archive/issue_comments_148475.json:
```json
{
    "body": "Correction of doctests since the ordering given by the MILP depends on the system/solver (but the answer is correct).\n\nI have also removed lots of white spaces in both files (although one of them is clearly useless) so that patchbot can pass tests successfully.",
    "created_at": "2012-04-08T23:13:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12716#issuecomment-148475",
    "user": "https://github.com/dcoudert"
}
```

Correction of doctests since the ordering given by the MILP depends on the system/solver (but the answer is correct).

I have also removed lots of white spaces in both files (although one of them is clearly useless) so that patchbot can pass tests successfully.



---

archive/issue_comments_148476.json:
```json
{
    "body": "Attachment [trac_12716_linear_ordering.patch](tarball://root/attachments/some-uuid/ticket12716/trac_12716_linear_ordering.patch) by @dcoudert created at 2012-04-09 10:52:45",
    "created_at": "2012-04-09T10:52:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12716#issuecomment-148476",
    "user": "https://github.com/dcoudert"
}
```

Attachment [trac_12716_linear_ordering.patch](tarball://root/attachments/some-uuid/ticket12716/trac_12716_linear_ordering.patch) by @dcoudert created at 2012-04-09 10:52:45



---

archive/issue_comments_148477.json:
```json
{
    "body": "Attachment [trac_12716-review.patch](tarball://root/attachments/some-uuid/ticket12716/trac_12716-review.patch) by @nathanncohen created at 2012-04-10 15:48:57",
    "created_at": "2012-04-10T15:48:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12716#issuecomment-148477",
    "user": "https://github.com/nathanncohen"
}
```

Attachment [trac_12716-review.patch](tarball://root/attachments/some-uuid/ticket12716/trac_12716-review.patch) by @nathanncohen created at 2012-04-10 15:48:57



---

archive/issue_comments_148478.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-04-10T15:57:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12716#issuecomment-148478",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_148479.json:
```json
{
    "body": "Helloooooooooo David !!!\n\nHere is a small patch to apply on top of yours.. Here is what it does :\n\n* One or two typoes\n* Simplifies the definition of the LP variables... Could you give it a look, just to check I got nothing wrong ? `:-)`\n* Replaces some lists operation by set operations. Well, it looked like all you wanted to do was more a set thing than a list thing.\n* Replaces some integer = True by binary = True. The solvers (well, except Coin as usual) have specific types for binary variables, so if we know that they are binary we may as well say it.\n* I also moved several lines of code outside of the try/catch, as list operations usually do not throw MIPSolverExceptions\n\nI also have several questions :\n* Could you say in the doc which variables are relaxed when integrality=False, and if it has any specific meaning ? Or is it just a lower bound that you use because it is faster ?\n* Is the integrality variable really intended to be False **by default** ? `O_o;;;`\n* About constraints 5, 6, and 7 : why aren't they all set by \"sum of all y[v][t] for all v is equal to t\" ? Or rather to t+1 ? I do not get why you do not say so immediately to the solver `O_o`\n* To me ``u[v][t] >= x[v][t]-y[v][t]`` is rather ``x[v][t] == u[v][t] + y[v][t]``, which is the same constraint but in a way I find easier to read.. That's one of the remarks I added to the definition of the variables, though `:-)`\n\nWell, I think that's all I had to say !\n\nNathann",
    "created_at": "2012-04-10T15:57:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12716#issuecomment-148479",
    "user": "https://github.com/nathanncohen"
}
```

Helloooooooooo David !!!

Here is a small patch to apply on top of yours.. Here is what it does :

* One or two typoes
* Simplifies the definition of the LP variables... Could you give it a look, just to check I got nothing wrong ? `:-)`
* Replaces some lists operation by set operations. Well, it looked like all you wanted to do was more a set thing than a list thing.
* Replaces some integer = True by binary = True. The solvers (well, except Coin as usual) have specific types for binary variables, so if we know that they are binary we may as well say it.
* I also moved several lines of code outside of the try/catch, as list operations usually do not throw MIPSolverExceptions

I also have several questions :
* Could you say in the doc which variables are relaxed when integrality=False, and if it has any specific meaning ? Or is it just a lower bound that you use because it is faster ?
* Is the integrality variable really intended to be False **by default** ? `O_o;;;`
* About constraints 5, 6, and 7 : why aren't they all set by "sum of all y[v][t] for all v is equal to t" ? Or rather to t+1 ? I do not get why you do not say so immediately to the solver `O_o`
* To me ``u[v][t] >= x[v][t]-y[v][t]`` is rather ``x[v][t] == u[v][t] + y[v][t]``, which is the same constraint but in a way I find easier to read.. That's one of the remarks I added to the definition of the variables, though `:-)`

Well, I think that's all I had to say !

Nathann



---

archive/issue_comments_148480.json:
```json
{
    "body": "Thanks Nathann for the review. \n \n> I also have several questions :\n> * Could you say in the doc which variables are relaxed when integrality=False, and if it has any specific meaning ? Or is it just a lower bound that you use because it is faster ?\n\n\nBoth are optimal. However, in some cases the integral version is faster than the relaxed one. I don't know why.\n\n>     * Is the integrality variable really intended to be False **by default** ? `O_o;;;`\n\n\nYes, because it is in general faster.\n\n>     * About constraints 5, 6, and 7 : why aren't they all set by \"sum of all y[v][t] for all v is equal to t\" ? Or rather to t+1 ? I do not get why you do not say so immediately to the solver `O_o`\n\n\nYou are right. Changed.\n\n>     * To me ``u[v][t] >= x[v][t]-y[v][t]`` is rather ``x[v][t] == u[v][t] + y[v][t]``, which is the same constraint but in a way I find easier to read.. That's one of the remarks I added to the definition of the variables, though `:-)`\n\n\nThis is certainly easier to read for you, but this is not the standard way to write linear programs. In general, it is better to provide inequalities rather than equalities to solvers for a better description of the polytopes. So I prefer to let this inequality as it is.\n\nI have merge the patchs (MILP, review + additional modifications) into a combined patch. I have changed the top table in accordance with those of patch #12816. \n\nHope it is better now.",
    "created_at": "2012-04-10T19:12:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12716#issuecomment-148480",
    "user": "https://github.com/dcoudert"
}
```

Thanks Nathann for the review. 
 
> I also have several questions :
> * Could you say in the doc which variables are relaxed when integrality=False, and if it has any specific meaning ? Or is it just a lower bound that you use because it is faster ?


Both are optimal. However, in some cases the integral version is faster than the relaxed one. I don't know why.

>     * Is the integrality variable really intended to be False **by default** ? `O_o;;;`


Yes, because it is in general faster.

>     * About constraints 5, 6, and 7 : why aren't they all set by "sum of all y[v][t] for all v is equal to t" ? Or rather to t+1 ? I do not get why you do not say so immediately to the solver `O_o`


You are right. Changed.

>     * To me ``u[v][t] >= x[v][t]-y[v][t]`` is rather ``x[v][t] == u[v][t] + y[v][t]``, which is the same constraint but in a way I find easier to read.. That's one of the remarks I added to the definition of the variables, though `:-)`


This is certainly easier to read for you, but this is not the standard way to write linear programs. In general, it is better to provide inequalities rather than equalities to solvers for a better description of the polytopes. So I prefer to let this inequality as it is.

I have merge the patchs (MILP, review + additional modifications) into a combined patch. I have changed the top table in accordance with those of patch #12816. 

Hope it is better now.



---

archive/issue_comments_148481.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-04-10T19:14:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12716#issuecomment-148481",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_148482.json:
```json
{
    "body": "Hellooooooooo !!\n\nWell, everything looks nice, doc and code.... But you still mention in the code constraint number 12, which does not exist in the LaTeX formula anymore, and the comment of constraint 9 (in the code) is wrong.... `^^;`\n\nNathann",
    "created_at": "2012-04-10T23:20:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12716#issuecomment-148482",
    "user": "https://github.com/nathanncohen"
}
```

Hellooooooooo !!

Well, everything looks nice, doc and code.... But you still mention in the code constraint number 12, which does not exist in the LaTeX formula anymore, and the comment of constraint 9 (in the code) is wrong.... `^^;`

Nathann



---

archive/issue_comments_148483.json:
```json
{
    "body": "Attachment [trac_12716-combined.patch](tarball://root/attachments/some-uuid/ticket12716/trac_12716-combined.patch) by @dcoudert created at 2012-04-11 07:48:31\n\nCorrected.",
    "created_at": "2012-04-11T07:48:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12716#issuecomment-148483",
    "user": "https://github.com/dcoudert"
}
```

Attachment [trac_12716-combined.patch](tarball://root/attachments/some-uuid/ticket12716/trac_12716-combined.patch) by @dcoudert created at 2012-04-11 07:48:31

Corrected.



---

archive/issue_comments_148484.json:
```json
{
    "body": "Well, then .... `:-)`\n\nNathann",
    "created_at": "2012-04-11T07:59:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12716#issuecomment-148484",
    "user": "https://github.com/nathanncohen"
}
```

Well, then .... `:-)`

Nathann



---

archive/issue_comments_148485.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-04-11T07:59:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12716#issuecomment-148485",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_148486.json:
```json
{
    "body": "Thank you !",
    "created_at": "2012-04-11T08:44:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12716#issuecomment-148486",
    "user": "https://github.com/dcoudert"
}
```

Thank you !



---

archive/issue_events_034502.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-04-19T09:45:07Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12716",
    "milestone": "sage-5.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12716#event-34502"
}
```



---

archive/issue_events_034503.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-05-06T12:15:38Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12716",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12716#event-34503"
}
```



---

archive/issue_comments_148487.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-05-06T12:15:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12716#issuecomment-148487",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
