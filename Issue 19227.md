# Issue 19227: ExpressionTreeWalker fails on some functions

Issue created by migration from Trac.

Original creator: rws

Original creation time: 2015-10-24 07:55:56

In some tickets (eg #15024) this doctest from `symbolic/expression_conversions.py` 

```
            sage: foo = random_expr(20, nvars=2)
            sage: foo
            sage: s = ExpressionTreeWalker(foo)
            sage: bool(s() == foo)
```

fails because the set of functions returned by `random_expr` contains one of `floor`/`ceil` which currently don't accept the `hold` keyword:

```
sage: floor(x,hold=True)
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-8-fc5809e0a430> in <module>()
----> 1 floor(x,hold=True)

TypeError: __call__() got an unexpected keyword argument 'hold'
```

This would affect any use of the walker or its subclasses on `floor` expressions.


---

Comment by rws created at 2016-04-03 13:40:56

The changes make `floor`/`ceil` accept the `hold` keyword and hand it over to the superclasses. It has no visible effect except fixing the bug, at the moment.
----
New commits:


---

Comment by rws created at 2016-04-03 13:40:56

Changing status from new to needs_review.


---

Comment by git created at 2016-04-03 14:32:49

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2016-04-10 15:34:16

There is an incompatibility with #12121 which also fixes the issue. The ticket completely removes the handmade `__call__` for both `floor` and `ceil`.


---

Comment by rws created at 2016-04-11 06:40:02

OK, duplicate.


---

Comment by rws created at 2016-04-11 06:40:02

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-06-12 12:02:30

Resolution: fixed
