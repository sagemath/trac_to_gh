# Issue 17746: Refactor/cleanup tableaux

archive/issues_017746.json:
```json
{
    "body": "CC:  @darijgr jkeitel mariamonks @opechenik\n\nKeywords: tableaux, days64, cleanup, refactoring\n\n`Tableau`, `SemistandardTableau`, `StandardTableau`, `SkewTableau` and related classes need lots of clean-up and refactoring. Specific examples:\n\n(Warning: this list is very much in flux and will probably change lots during days64.)\n\n* `Tableau.standardization` should be moved to `SemistandardTableau`; `SkewTableau.bender_knuth_involution` should likewise be moved to `SemistandardSkewTableau`.\n* `Tableau` distinguishes between `[]` and `[[]]`, or `[This is the Trac macro *1* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#1-macro)` and `[[1], []]`, which is very odd. Along the same lines, perhaps make `t` optional in `Tableau.__classcall_private__` to allow for `Tableau()` yielding the empty tableau. \n* `Tableau.k_weight` needs descriptive documentation.\n* `Tableau.schensted_insert`, `Tableau.bump`, and `SkewTableux.slide` duplicate functionality.\n* `Tableau` should probably inherit from `SkewTableau` with lots of refactoring/removal of duplicate methods like `conjugate`. Perhaps `Tableau` should be renamed `StraightTableau`, though it might not be worth it. Similarly with `SemistandardTableau` and `SemistandardSkewTableau`.\n* All tableau should probably inherit from some abstract base class. Possible generic functionality: reading words; iteration over rows and columns; descent sets (either definition--oh, add the one that doesn't already exist); shape; size; weight; cells; cells_containing.\n  * What is a tableau? Roughly, perhaps a mapping of (subsets of?) the product of two indexing sets to an arbitrary set?\n* `SkewTableau.rectify` should insert the reading word rather than repeatedly jdt slide--more efficient\n* Several related tickets could/should be handled at the same time.\n  * #8322: ancient; not a bug; should be closed.\n  * #17780: domino tableau and RSK generalization; recent; would require lots of refactoring and documentation changes to fit existing tableau and Sage style; probably wait to poke Connor until abstract class is finalized.\n  * #15598: two straightforward features\n  * #4355: MuPAD ascii_art; ancient; not sure how relevant this still is; should be reviewed\n  * #15031: confusingly, `Tableau.column_stabilizer` has incompatible output when used as input for `Tableau.symmetric_group_action_on_entries`. Maybe add some type casting to the latter?\n  * #15862: make tableaux immutable during cleanup? discussion fell off a year ago. Not convinced either way yet.\n\n(This is my first ticket. Apologies for whatever conventions I may have broken!)\n\nIssue created by migration from https://trac.sagemath.org/ticket/17983\n\n",
    "created_at": "2015-03-18T07:22:19Z",
    "labels": [
        "combinatorics",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.6",
    "title": "Refactor/cleanup tableaux",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17746",
    "user": "jpswanson"
}
```
CC:  @darijgr jkeitel mariamonks @opechenik

Keywords: tableaux, days64, cleanup, refactoring

`Tableau`, `SemistandardTableau`, `StandardTableau`, `SkewTableau` and related classes need lots of clean-up and refactoring. Specific examples:

(Warning: this list is very much in flux and will probably change lots during days64.)

* `Tableau.standardization` should be moved to `SemistandardTableau`; `SkewTableau.bender_knuth_involution` should likewise be moved to `SemistandardSkewTableau`.
* `Tableau` distinguishes between `[]` and `[[]]`, or `[This is the Trac macro *1* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#1-macro)` and `[[1], []]`, which is very odd. Along the same lines, perhaps make `t` optional in `Tableau.__classcall_private__` to allow for `Tableau()` yielding the empty tableau. 
* `Tableau.k_weight` needs descriptive documentation.
* `Tableau.schensted_insert`, `Tableau.bump`, and `SkewTableux.slide` duplicate functionality.
* `Tableau` should probably inherit from `SkewTableau` with lots of refactoring/removal of duplicate methods like `conjugate`. Perhaps `Tableau` should be renamed `StraightTableau`, though it might not be worth it. Similarly with `SemistandardTableau` and `SemistandardSkewTableau`.
* All tableau should probably inherit from some abstract base class. Possible generic functionality: reading words; iteration over rows and columns; descent sets (either definition--oh, add the one that doesn't already exist); shape; size; weight; cells; cells_containing.
  * What is a tableau? Roughly, perhaps a mapping of (subsets of?) the product of two indexing sets to an arbitrary set?
* `SkewTableau.rectify` should insert the reading word rather than repeatedly jdt slide--more efficient
* Several related tickets could/should be handled at the same time.
  * #8322: ancient; not a bug; should be closed.
  * #17780: domino tableau and RSK generalization; recent; would require lots of refactoring and documentation changes to fit existing tableau and Sage style; probably wait to poke Connor until abstract class is finalized.
  * #15598: two straightforward features
  * #4355: MuPAD ascii_art; ancient; not sure how relevant this still is; should be reviewed
  * #15031: confusingly, `Tableau.column_stabilizer` has incompatible output when used as input for `Tableau.symmetric_group_action_on_entries`. Maybe add some type casting to the latter?
  * #15862: make tableaux immutable during cleanup? discussion fell off a year ago. Not convinced either way yet.

(This is my first ticket. Apologies for whatever conventions I may have broken!)

Issue created by migration from https://trac.sagemath.org/ticket/17983





---

archive/issue_comments_237731.json:
```json
{
    "body": "Replying to [ticket:17983 jpswanson]:\n> (This is my first ticket. Apologies for whatever conventions I may have broken!)\nCertainly don't try to implement everything at the same time. This ticket should probably be considered as a \"meta-ticket\" with links to various other tickets, each fixing just one issue.\n\nIt might be a bit more work to develop things in various small tickets, but it's much easier for reviewers. It also helps development to move on: if one ticket gets stuck because of some discussion or because it was harder than initially thought, work can still continue on the other tickets.\n----\nNew commits:",
    "created_at": "2015-03-18T07:43:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17746",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17746#issuecomment-237731",
    "user": "@jdemeyer"
}
```

Replying to [ticket:17983 jpswanson]:
> (This is my first ticket. Apologies for whatever conventions I may have broken!)
Certainly don't try to implement everything at the same time. This ticket should probably be considered as a "meta-ticket" with links to various other tickets, each fixing just one issue.

It might be a bit more work to develop things in various small tickets, but it's much easier for reviewers. It also helps development to move on: if one ticket gets stuck because of some discussion or because it was harder than initially thought, work can still continue on the other tickets.
----
New commits:



---

archive/issue_comments_237732.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-03-18T21:44:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17746",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17746#issuecomment-237732",
    "user": "@darijgr"
}
```

New commits:



---

archive/issue_comments_237733.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-18T21:45:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17746",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17746#issuecomment-237733",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_237734.json:
```json
{
    "body": "Here is a bunch of speed tests I am using in order to see whether some changes slow things down:\n\nhttps://www.dropbox.com/s/xp9dqzifbx8e685/diagnostic.py?dl=0",
    "created_at": "2015-03-21T00:41:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17746",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17746#issuecomment-237734",
    "user": "@darijgr"
}
```

Here is a bunch of speed tests I am using in order to see whether some changes slow things down:

https://www.dropbox.com/s/xp9dqzifbx8e685/diagnostic.py?dl=0
