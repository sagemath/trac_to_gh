# Issue 15040: CartanMatrix to DynkinDiagram adds edges with zeros

Issue created by migration from https://trac.sagemath.org/ticket/15277

Original creator: tscrim

Original creation time: 2013-10-14 02:23:56

Assignee: sage-combinat

CC:  sage-combinat aschilling nthiery

Keywords: Cartan matrix Dynkin diagram

Currently we have:

```
sage: CM = CartanMatrix([[2,-1,0,0],[-3,2,-2,-2],[0,-1,2,-1],[0,-1,-1,2]])
sage: CM
[ 2 -1  0  0]
[-3  2 -2 -2]
[ 0 -1  2 -1]
[ 0 -1 -1  2]
sage: CM.dynkin_diagram().edges()
[(0, 1, 3),
 (0, 2, 0),
 (0, 3, 0),
 (1, 0, 1),
 (1, 2, 1),
 (1, 3, 1),
 (2, 0, 0),
 (2, 1, 2),
 (2, 3, 1),
 (3, 0, 0),
 (3, 1, 2),
 (3, 2, 1)]
```



---

Comment by tscrim created at 2013-10-14 02:26:32

Changing status from new to needs_review.


---

Comment by nthiery created at 2013-10-14 07:34:00

Sounds good!

While we are at it, what about using the following idiom:

```
    for (i,j) in M.nonzero_positions():
        ...
```


Granted, exploiting sparseness here is essentially an eye candy:
we are not really likely to compute the dynkin diagrams of many large sparse cartan matrices where this would actually do a difference timewise. But still an eye candy :-)


---

Attachment

Done.


---

Attachment

Hello,

Looks good to me. I have added a small review patch.

1) removing an unused import of sgn

2) computing the value of ct, where it was needed

3) removing the variable n

If you agree with these details (found with pyflakes), you can set positive review


---

Comment by tscrim created at 2013-10-14 18:48:58

I'm happy with it. Nicolas?


---

Comment by nthiery created at 2013-10-14 19:35:03

The changes to please pyflakes are not directly related with this ticket; but if there is no ongoing ticket which conflicts with this one, this occasion is as good as another. Thanks Travis and Frederic.


---

Comment by tscrim created at 2013-10-14 19:49:58

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2013-10-14 19:49:58

This is the only ticket I know of that is changing `dynkin_diagram.py`, so I'm going to set this to positive review. Thanks Nicolas and Frederic.


---

Comment by jdemeyer created at 2013-10-19 09:21:22

Resolution: fixed
