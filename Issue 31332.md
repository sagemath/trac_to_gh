# Issue 31332: sage-spkg DESTDIR staging fails for Python packages when SAGE_LOCAL is not a physical pathname

Issue created by migration from https://trac.sagemath.org/ticket/31569

Original creator: mkoeppe

Original creation time: 2021-03-27 07:16:06

CC:  dimpase

For example, on macOS, there is the symlink `/var -> /private/var`, and so if `SAGE_LOCAL=/var/tmp/xyz`, the Python package when installing to the staging dir may resolve SAGE_LOCAL to the absolute physical pathname; but `sage-spkg` only copies from $(SAGE_DESTDIR)$(SAGE_LOCAL) and will miss the entire installation.



---

Comment by mkoeppe created at 2021-08-02 00:08:10

Changing priority from critical to minor.


---

Comment by mkoeppe created at 2021-08-02 00:08:10

After #29585 (Remove DESTDIR staging for Python packages), this general defect no longer affects Python packages; but the issue may reappear if the build system of some other (non-Python) package decides to resolve pathnames to physical.
