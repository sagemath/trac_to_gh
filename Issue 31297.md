# Issue 31297: tox.ini: In -maximal environments, use IGNORE_MISSING_SYSTEM_PACKAGES=yes for all non-current distributions

archive/issues_031297.json:
```json
{
    "body": "CC:  @slel @kliem @dimpase\n\nBy definition, the `-maximal` environments install all system packages of standard and optional packages - whether they have `spkg-configure.m4` or not.\n\nAs we add more and more system packages, this can lead to failures on non-current distributions: For example `ubuntu-focal` as can be seen in https://github.com/mkoeppe/sage/runs/2156547051:\n\n```\nE: Unable to locate package libgap-dev\n```\n\n\nIn this ticket, we fix this by setting `IGNORE_MISSING_SYSTEM_PACKAGES=yes` for all `-maximal` environments (but override it for the cutting edge versions of the distributions). \nIn this way, there is still error checking (which will catch typos in the system package information).\n\n\nTo test: `tox -e docker-ubuntu-focal-maximal -- config.status`\n\nIssue created by migration from https://trac.sagemath.org/ticket/31534\n\n",
    "created_at": "2021-03-21T19:23:16Z",
    "labels": [
        "component: porting",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.4",
    "title": "tox.ini: In -maximal environments, use IGNORE_MISSING_SYSTEM_PACKAGES=yes for all non-current distributions",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31297",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @slel @kliem @dimpase

By definition, the `-maximal` environments install all system packages of standard and optional packages - whether they have `spkg-configure.m4` or not.

As we add more and more system packages, this can lead to failures on non-current distributions: For example `ubuntu-focal` as can be seen in https://github.com/mkoeppe/sage/runs/2156547051:

```
E: Unable to locate package libgap-dev
```


In this ticket, we fix this by setting `IGNORE_MISSING_SYSTEM_PACKAGES=yes` for all `-maximal` environments (but override it for the cutting edge versions of the distributions). 
In this way, there is still error checking (which will catch typos in the system package information).


To test: `tox -e docker-ubuntu-focal-maximal -- config.status`

Issue created by migration from https://trac.sagemath.org/ticket/31534





---

archive/issue_comments_446894.json:
```json
{
    "body": "Last 10 new commits:",
    "created_at": "2021-03-21T20:42:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31297#issuecomment-446894",
    "user": "https://github.com/mkoeppe"
}
```

Last 10 new commits:



---

archive/issue_comments_446895.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-03-21T20:42:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31297#issuecomment-446895",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_446896.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2021-03-26T21:33:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31297#issuecomment-446896",
    "user": "https://github.com/mkoeppe"
}
```

Changing priority from major to critical.



---

archive/issue_comments_446897.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2021-04-10T18:59:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31297#issuecomment-446897",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_446898.json:
```json
{
    "body": "Rebased away from #31505, needs review",
    "created_at": "2021-04-10T19:00:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31297#issuecomment-446898",
    "user": "https://github.com/mkoeppe"
}
```

Rebased away from #31505, needs review



---

archive/issue_comments_446899.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-26T06:19:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31297#issuecomment-446899",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_446900.json:
```json
{
    "body": "Let's get this in please",
    "created_at": "2021-05-27T22:20:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31297#issuecomment-446900",
    "user": "https://github.com/mkoeppe"
}
```

Let's get this in please



---

archive/issue_comments_446901.json:
```json
{
    "body": "lgtm",
    "created_at": "2021-06-02T09:59:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31297#issuecomment-446901",
    "user": "https://github.com/dimpase"
}
```

lgtm



---

archive/issue_comments_446902.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-06-02T09:59:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31297#issuecomment-446902",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_446903.json:
```json
{
    "body": "Thanks!",
    "created_at": "2021-06-02T16:19:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31297#issuecomment-446903",
    "user": "https://github.com/mkoeppe"
}
```

Thanks!



---

archive/issue_events_028627.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-06-07T21:40:35Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/31297",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31297#event-28627"
}
```



---

archive/issue_comments_446904.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-06-07T21:40:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31297#issuecomment-446904",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
