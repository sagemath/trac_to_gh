# Issue 31297: tox.ini: In -maximal environments, use IGNORE_MISSING_SYSTEM_PACKAGES=yes for all non-current distributions

Issue created by migration from https://trac.sagemath.org/ticket/31534

Original creator: mkoeppe

Original creation time: 2021-03-21 19:23:16

CC:  slelievre @kliem dimpase

By definition, the `-maximal` environments install all system packages of standard and optional packages - whether they have `spkg-configure.m4` or not.

As we add more and more system packages, this can lead to failures on non-current distributions: For example `ubuntu-focal` as can be seen in https://github.com/mkoeppe/sage/runs/2156547051:

```
E: Unable to locate package libgap-dev
```


In this ticket, we fix this by setting `IGNORE_MISSING_SYSTEM_PACKAGES=yes` for all `-maximal` environments (but override it for the cutting edge versions of the distributions). 
In this way, there is still error checking (which will catch typos in the system package information).


To test: `tox -e docker-ubuntu-focal-maximal -- config.status`


---

Comment by mkoeppe created at 2021-03-21 20:42:59

Last 10 new commits:


---

Comment by mkoeppe created at 2021-03-21 20:42:59

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2021-03-26 21:33:51

Changing priority from major to critical.


---

Comment by git created at 2021-04-10 18:59:12

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by mkoeppe created at 2021-04-10 19:00:14

Rebased away from #31505, needs review


---

Comment by git created at 2021-05-26 06:19:31

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2021-05-27 22:20:12

Let's get this in please


---

Comment by dimpase created at 2021-06-02 09:59:16

lgtm


---

Comment by dimpase created at 2021-06-02 09:59:16

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2021-06-02 16:19:43

Thanks!


---

Comment by vbraun created at 2021-06-07 21:40:35

Resolution: fixed
