# Issue 31673: min_symbolic, max_symbolic: Remove py2-ish special casing of None

Issue created by migration from https://trac.sagemath.org/ticket/31910

Original creator: mkoeppe

Original creation time: 2021-06-05 03:45:34

CC:  slelievre charpent




---

Comment by mkoeppe created at 2021-06-05 04:00:02

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2021-06-05 04:00:02

New commits:


---

Comment by slelievre created at 2021-06-05 12:00:00

These changes might make pyflakes and pycodestyle happy.


```diff
-        if res is not None: symb_args.append(res)
+        if res is not None:
+            symb_args.append(res)
```



```diff
         if len(args) == 1:
             try:
                 args = (SR._force_pyobject(iter(args[0])),)
-            except TypeError as e:
-                raise e
+            except TypeError:
+                raise
```



```diff
         try:
             return BuiltinFunction.__call__(self, *args, **kwds)
-        except ValueError as e:
+        except ValueError:
             pass
```


Only the last one is directly related to the changes in this ticket.


---

Comment by mkoeppe created at 2021-06-05 16:10:03

I agree with these changes -- can you push them to the ticket please?


---

Comment by slelievre created at 2021-06-05 18:31:21

Done, with a little bit of extra pep8.


---

Comment by slelievre created at 2021-06-05 18:32:06

New commits:


---

Comment by mkoeppe created at 2021-06-05 18:56:47

Thank you, your changes LGTM.


---

Comment by slelievre created at 2021-06-06 23:58:32

Running `make testlong` gives this error:


```
sage -t --long --random-seed=0 src/sage/plot/plot3d/implicit_plot3d.py
**********************************************************************
File "src/sage/plot/plot3d/implicit_plot3d.py", line 599, in sage.plot.plot3d.implicit_plot3d.implicit_plot3d
Failed example:
    implicit_plot3d(max_symbolic(x, y^2) - z, (x,-2,2), (y,-2,2), (z,-2,2), plot_points=6)
Expected:
    Graphics3d Object
Got:
    doctest:warning
      File ".../src/bin/sage-runtests", line 144, in <module>
        err = DC.run()
      File ".../local/lib/python3.7/site-packages/sage/doctest/control.py", line 1207, in run
        self.run_doctests()
      File ".../local/lib/python3.7/site-packages/sage/doctest/control.py", line 909, in run_doctests
        self.dispatcher.dispatch()
      File ".../local/lib/python3.7/site-packages/sage/doctest/forker.py", line 2040, in dispatch
        self.parallel_dispatch()
      File ".../local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1935, in parallel_dispatch
        w.start()  # This might take some time
      File ".../local/lib/python3.7/site-packages/sage/doctest/forker.py", line 2207, in start
        super(DocTestWorker, self).start()
      File "/usr/lib/python3.7/multiprocessing/process.py", line 112, in start
        self._popen = self._Popen(self)
      File "/usr/lib/python3.7/multiprocessing/context.py", line 223, in _Popen
        return _default_context.get_context().Process._Popen(process_obj)
      File "/usr/lib/python3.7/multiprocessing/context.py", line 277, in _Popen
        return Popen(process_obj)
      File "/usr/lib/python3.7/multiprocessing/popen_fork.py", line 20, in __init__
        self._launch(process_obj)
      File "/usr/lib/python3.7/multiprocessing/popen_fork.py", line 74, in _launch
        code = process_obj._bootstrap()
      File "/usr/lib/python3.7/multiprocessing/process.py", line 297, in _bootstrap
        self.run()
      File ".../local/lib/python3.7/site-packages/sage/doctest/forker.py", line 2179, in run
        task(self.options, self.outtmpfile, msgpipe, self.result_queue)
      File ".../local/lib/python3.7/site-packages/sage/doctest/forker.py", line 2508, in __call__
        doctests, extras = self._run(runner, options, results)
      File ".../local/lib/python3.7/site-packages/sage/doctest/forker.py", line 2555, in _run
        result = runner.run(test)
      File ".../local/lib/python3.7/site-packages/sage/doctest/forker.py", line 906, in run
        return self._run(test, compileflags, out)
      File ".../local/lib/python3.7/site-packages/sage/doctest/forker.py", line 714, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File ".../local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1133, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.plot.plot3d.implicit_plot3d.implicit_plot3d[90]>", line 1, in <module>
        implicit_plot3d(max_symbolic(x, y**Integer(2)) - z, (x,-Integer(2),Integer(2)), (y,-Integer(2),Integer(2)), (z,-Integer(2),Integer(2)), plot_points=Integer(6))
      File ".../local/lib/python3.7/site-packages/sage/repl/rich_output/display_manager.py", line 814, in displayhook
        plain_text, rich_output = self._rich_output_formatter(obj, dict())
      File ".../local/lib/python3.7/site-packages/sage/repl/rich_output/display_manager.py", line 629, in _rich_output_formatter
        rich_output = self._call_rich_repr(obj, rich_repr_kwds)
      File ".../local/lib/python3.7/site-packages/sage/repl/rich_output/display_manager.py", line 596, in _call_rich_repr
        RichReprWarning,
      File "/usr/lib/python3.7/warnings.py", line 110, in _showwarnmsg
        msg.file, msg.line)
    :
    sage.repl.rich_output.display_manager.RichReprWarning: Exception in _rich_repr_ while displaying object: '>' not supported between instances of 'float' and 'NoneType'
    Graphics3d Object
**********************************************************************
```



---

Comment by slelievre created at 2021-06-06 23:58:32

Changing status from needs_review to needs_work.


---

Comment by git created at 2021-06-07 03:09:12

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2021-06-07 03:10:26

Changing status from needs_work to needs_review.


---

Comment by slelievre created at 2021-06-07 12:07:46

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2021-06-07 17:06:32

Thanks!


---

Comment by vbraun created at 2021-06-29 17:40:36

Resolution: fixed
