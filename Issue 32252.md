# Issue 32252: Move load_ipython_extension from sage.__init__ to sage.repl.__init__

Issue created by migration from https://trac.sagemath.org/ticket/32489

Original creator: mkoeppe

Original creation time: 2021-09-07 23:21:18

CC:  tscrim slabbe chapoton jhpalmieri kcrisman

As part of #31420 (Meta-ticket: Review/remove monkey patching in `src/sage/__init__.py`), we move the definition of `load_ipython_extension` (introduced in #18726) to sage.repl.__init__

This function was defined in module `sage` so that `%load_ext sage` works (see http://www.slabbe.org/blogue/categorie/ipython/). After the move, this would have to be `%load_ext sage.repl`; but we patch it into the module `sage` upon import of `sage.repl` to keep `%load_ext sage` as well (at least after `import sage.all` or `import sage.repl`).

We also define the corresponding function that will make `%unload_ext sage` work


---

Comment by mkoeppe created at 2021-09-13 19:55:18

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2021-09-13 19:55:18

New commits:


---

Comment by jhpalmieri created at 2021-09-25 23:49:28

I think this should be rebased on top of #32479.


---

Comment by git created at 2021-09-26 00:03:29

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:


---

Comment by mkoeppe created at 2021-09-26 00:04:05

Good idea, done


---

Comment by jhpalmieri created at 2021-09-29 03:54:41

It's not backward compatible, but I hope this won't affect very many people.


---

Comment by jhpalmieri created at 2021-09-29 03:55:53

I might change the comment "we removed the `__init__.py` file" to "we are removing the ...". This isn't the last step in the removal, right?


---

Comment by git created at 2021-09-29 04:04:30

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jhpalmieri created at 2021-09-29 16:25:54

Thank you, let's merge it!


---

Comment by jhpalmieri created at 2021-09-29 16:25:54

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2021-09-29 16:31:35

Thanks!


---

Comment by vbraun created at 2021-10-10 10:16:54

Resolution: fixed
