# Issue 11255: optional spkg database_gap-4.4.12.p0.spkg fails test on sage-4.7.1.alpha1

archive/issues_011255.json:
```json
{
    "body": "Assignee: tbd\n\nCC:  @mwhansen @nthiery\n\nThe optional spkg database_gap-4.4.12.p0.spkg installed in sage-4.7.1.alpha1 causes the following test to fail:\n\n\n```\neno% ./sage -t -long -force_lib \"devel/sage/sage/groups/perm_gps/permgroup.py\"\nsage -t -long -force_lib \"devel/sage/sage/groups/perm_gps/permgroup.py\"\n**********************************************************************\nFile \"/home/mariah/sage/sage-4.7.1.alpha1-x86_64-Linux-core2-fc/devel/sage/sage/groups/perm_gps/permgroup.py\", line 2350:\n    sage: G.isomorphism_to(H)\nExpected:\n    Permutation group morphism:\n      From: Permutation Group with generators [(2,3), (1,2,3)]\n      To:   Permutation Group with generators [(1,2,4), (1,4)]\n      Defn: [(2,3), (1,2,3)] -> [(2,4), (1,2,4)]\nGot:\n    Permutation group morphism:\n      From: Permutation Group with generators [(2,3), (1,2,3)]\n      To:   Permutation Group with generators [(1,2,4), (1,4)]\n      Defn: [(2,3), (1,2,3)] -> [(2,4), (1,4,2)]\n**********************************************************************\n1 items had failures:\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/11427\n\n",
    "created_at": "2011-06-03T19:08:17Z",
    "labels": [
        "component: packages: optional",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "optional spkg database_gap-4.4.12.p0.spkg fails test on sage-4.7.1.alpha1",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11255",
    "user": "https://trac.sagemath.org/admin/accounts/users/mariah"
}
```
Assignee: tbd

CC:  @mwhansen @nthiery

The optional spkg database_gap-4.4.12.p0.spkg installed in sage-4.7.1.alpha1 causes the following test to fail:


```
eno% ./sage -t -long -force_lib "devel/sage/sage/groups/perm_gps/permgroup.py"
sage -t -long -force_lib "devel/sage/sage/groups/perm_gps/permgroup.py"
**********************************************************************
File "/home/mariah/sage/sage-4.7.1.alpha1-x86_64-Linux-core2-fc/devel/sage/sage/groups/perm_gps/permgroup.py", line 2350:
    sage: G.isomorphism_to(H)
Expected:
    Permutation group morphism:
      From: Permutation Group with generators [(2,3), (1,2,3)]
      To:   Permutation Group with generators [(1,2,4), (1,4)]
      Defn: [(2,3), (1,2,3)] -> [(2,4), (1,2,4)]
Got:
    Permutation group morphism:
      From: Permutation Group with generators [(2,3), (1,2,3)]
      To:   Permutation Group with generators [(1,2,4), (1,4)]
      Defn: [(2,3), (1,2,3)] -> [(2,4), (1,4,2)]
**********************************************************************
1 items had failures:
```


Issue created by migration from https://trac.sagemath.org/ticket/11427





---

archive/issue_comments_123774.json:
```json
{
    "body": "Do you mean installing the spkg leads to the failure? We have observed that exact same test failure since #10334 was introduced for the first time in the 4.7 release cycle in sage-on-gentoo https://github.com/cschwan/sage-on-gentoo/issues/50\n\nAs far as we can see gap just seem to be very fussy in its behavior.",
    "created_at": "2011-06-05T19:53:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11255",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11255#issuecomment-123774",
    "user": "https://github.com/kiwifb"
}
```

Do you mean installing the spkg leads to the failure? We have observed that exact same test failure since #10334 was introduced for the first time in the 4.7 release cycle in sage-on-gentoo https://github.com/cschwan/sage-on-gentoo/issues/50

As far as we can see gap just seem to be very fussy in its behavior.



---

archive/issue_comments_123775.json:
```json
{
    "body": "After examination of that spkg I think that's definitely the cause of the problem in sage-on-gentoo. The content of this spkg is in the default gap tarball but sage stripe it to save space, it seems that the rest is put in this spkg. In gentoo we install gap in full.\n\nIt could be interesting to find out exactly which dataset cause the failure and why. But if the test is that sensitive it should be changed. I'll copy Mike Hansen and Nicolas Thi\u00e9ry who did most of the work on #10334.",
    "created_at": "2011-06-05T21:01:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11255",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11255#issuecomment-123775",
    "user": "https://github.com/kiwifb"
}
```

After examination of that spkg I think that's definitely the cause of the problem in sage-on-gentoo. The content of this spkg is in the default gap tarball but sage stripe it to save space, it seems that the rest is put in this spkg. In gentoo we install gap in full.

It could be interesting to find out exactly which dataset cause the failure and why. But if the test is that sensitive it should be changed. I'll copy Mike Hansen and Nicolas ThiÃ©ry who did most of the work on #10334.



---

archive/issue_comments_123776.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2011-06-05T21:01:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11255",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11255#issuecomment-123776",
    "user": "https://github.com/kiwifb"
}
```

Changing status from new to needs_info.



---

archive/issue_comments_123777.json:
```json
{
    "body": "On the buildbot machine [RHEL 5.5-64 bin (rosemary)](http://build.sagemath.org/sage/builders/RHEL%205.5-64%20bin%20%28rosemary%29) the following error is observed:\n\n```\nsage -t -long  -force_lib devel/sage/sage/groups/perm_gps/permgroup.py\n**********************************************************************\nFile \"/home/buildbot/build/sage/rosemary-1/rosemary_binary/build/sage-4.7.1.rc0/devel/sage-main/sage/groups/perm_gps/permgroup.py\", line 2350:\n    sage: G.isomorphism_to(H)\nExpected:\n    Permutation group morphism:\n      From: Permutation Group with generators [(2,3), (1,2,3)]\n      To:   Permutation Group with generators [(1,2,4), (1,4)]\n      Defn: [(2,3), (1,2,3)] -> [(2,4), (1,2,4)]\nGot:\n    Permutation group morphism:\n      From: Permutation Group with generators [(2,3), (1,2,3)]\n      To:   Permutation Group with generators [(1,2,4), (1,4)]\n      Defn: [(2,3), (1,2,3)] -> [(1,2), (1,2,4)]\n**********************************************************************\n```\n",
    "created_at": "2011-07-08T07:34:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11255",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11255#issuecomment-123777",
    "user": "https://github.com/jdemeyer"
}
```

On the buildbot machine [RHEL 5.5-64 bin (rosemary)](http://build.sagemath.org/sage/builders/RHEL%205.5-64%20bin%20%28rosemary%29) the following error is observed:

```
sage -t -long  -force_lib devel/sage/sage/groups/perm_gps/permgroup.py
**********************************************************************
File "/home/buildbot/build/sage/rosemary-1/rosemary_binary/build/sage-4.7.1.rc0/devel/sage-main/sage/groups/perm_gps/permgroup.py", line 2350:
    sage: G.isomorphism_to(H)
Expected:
    Permutation group morphism:
      From: Permutation Group with generators [(2,3), (1,2,3)]
      To:   Permutation Group with generators [(1,2,4), (1,4)]
      Defn: [(2,3), (1,2,3)] -> [(2,4), (1,2,4)]
Got:
    Permutation group morphism:
      From: Permutation Group with generators [(2,3), (1,2,3)]
      To:   Permutation Group with generators [(1,2,4), (1,4)]
      Defn: [(2,3), (1,2,3)] -> [(1,2), (1,2,4)]
**********************************************************************
```




---

archive/issue_comments_123778.json:
```json
{
    "body": "See #11582 for partially disabling this doctest.",
    "created_at": "2011-07-08T07:45:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11255",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11255#issuecomment-123778",
    "user": "https://github.com/jdemeyer"
}
```

See #11582 for partially disabling this doctest.



---

archive/issue_comments_123779.json:
```json
{
    "body": "I also tested that with the optional spkg installed the doctest now works.\n\n```\n\nwstein@sage:/scratch/wstein/sd32/sage-4.7.2.alpha2$ ./sage -t -long -force_lib \"devel/sage/sage/groups/perm_gps/permgroup.py\"\nsage -t -long -force_lib \"devel/sage/sage/groups/perm_gps/permgroup.py\"\n         [15.0 s]\n \n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 15.1 seconds\n\n```\n",
    "created_at": "2011-08-23T08:40:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11255",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11255#issuecomment-123779",
    "user": "https://github.com/williamstein"
}
```

I also tested that with the optional spkg installed the doctest now works.

```

wstein@sage:/scratch/wstein/sd32/sage-4.7.2.alpha2$ ./sage -t -long -force_lib "devel/sage/sage/groups/perm_gps/permgroup.py"
sage -t -long -force_lib "devel/sage/sage/groups/perm_gps/permgroup.py"
         [15.0 s]
 
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 15.1 seconds

```




---

archive/issue_comments_123780.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-08-23T08:41:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11255",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11255#issuecomment-123780",
    "user": "https://github.com/williamstein"
}
```

Resolution: fixed



---

archive/issue_events_011349.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2011-08-23T08:41:11Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/11255",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11255#event-11349"
}
```



---

archive/issue_comments_123781.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd32\".",
    "created_at": "2011-08-24T23:42:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11255",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11255#issuecomment-123781",
    "user": "https://github.com/williamstein"
}
```

Changing keywords from "" to "sd32".



---

archive/issue_comments_123782.json:
```json
{
    "body": "Resolution changed from fixed to duplicate",
    "created_at": "2011-09-15T05:49:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11255",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11255#issuecomment-123782",
    "user": "https://github.com/nexttime"
}
```

Resolution changed from fixed to duplicate
