# Issue 11255: optional spkg database_gap-4.4.12.p0.spkg fails test on sage-4.7.1.alpha1

Issue created by migration from https://trac.sagemath.org/ticket/11427

Original creator: mariah

Original creation time: 2011-06-03 19:08:17

Assignee: tbd

CC:  mhansen nthiery

The optional spkg database_gap-4.4.12.p0.spkg installed in sage-4.7.1.alpha1 causes the following test to fail:


```
eno% ./sage -t -long -force_lib "devel/sage/sage/groups/perm_gps/permgroup.py"
sage -t -long -force_lib "devel/sage/sage/groups/perm_gps/permgroup.py"
**********************************************************************
File "/home/mariah/sage/sage-4.7.1.alpha1-x86_64-Linux-core2-fc/devel/sage/sage/groups/perm_gps/permgroup.py", line 2350:
    sage: G.isomorphism_to(H)
Expected:
    Permutation group morphism:
      From: Permutation Group with generators [(2,3), (1,2,3)]
      To:   Permutation Group with generators [(1,2,4), (1,4)]
      Defn: [(2,3), (1,2,3)] -> [(2,4), (1,2,4)]
Got:
    Permutation group morphism:
      From: Permutation Group with generators [(2,3), (1,2,3)]
      To:   Permutation Group with generators [(1,2,4), (1,4)]
      Defn: [(2,3), (1,2,3)] -> [(2,4), (1,4,2)]
**********************************************************************
1 items had failures:
```



---

Comment by fbissey created at 2011-06-05 19:53:30

Do you mean installing the spkg leads to the failure? We have observed that exact same test failure since #10334 was introduced for the first time in the 4.7 release cycle in sage-on-gentoo https://github.com/cschwan/sage-on-gentoo/issues/50

As far as we can see gap just seem to be very fussy in its behavior.


---

Comment by fbissey created at 2011-06-05 21:01:58

After examination of that spkg I think that's definitely the cause of the problem in sage-on-gentoo. The content of this spkg is in the default gap tarball but sage stripe it to save space, it seems that the rest is put in this spkg. In gentoo we install gap in full.

It could be interesting to find out exactly which dataset cause the failure and why. But if the test is that sensitive it should be changed. I'll copy Mike Hansen and Nicolas ThiÃ©ry who did most of the work on #10334.


---

Comment by fbissey created at 2011-06-05 21:01:58

Changing status from new to needs_info.


---

Comment by jdemeyer created at 2011-07-08 07:34:15

On the buildbot machine [RHEL 5.5-64 bin (rosemary)](http://build.sagemath.org/sage/builders/RHEL%205.5-64%20bin%20%28rosemary%29) the following error is observed:

```
sage -t -long  -force_lib devel/sage/sage/groups/perm_gps/permgroup.py
**********************************************************************
File "/home/buildbot/build/sage/rosemary-1/rosemary_binary/build/sage-4.7.1.rc0/devel/sage-main/sage/groups/perm_gps/permgroup.py", line 2350:
    sage: G.isomorphism_to(H)
Expected:
    Permutation group morphism:
      From: Permutation Group with generators [(2,3), (1,2,3)]
      To:   Permutation Group with generators [(1,2,4), (1,4)]
      Defn: [(2,3), (1,2,3)] -> [(2,4), (1,2,4)]
Got:
    Permutation group morphism:
      From: Permutation Group with generators [(2,3), (1,2,3)]
      To:   Permutation Group with generators [(1,2,4), (1,4)]
      Defn: [(2,3), (1,2,3)] -> [(1,2), (1,2,4)]
**********************************************************************
```



---

Comment by jdemeyer created at 2011-07-08 07:45:01

See #11582 for partially disabling this doctest.


---

Comment by was created at 2011-08-23 08:40:05

I also tested that with the optional spkg installed the doctest now works.

```

wstein@sage:/scratch/wstein/sd32/sage-4.7.2.alpha2$ ./sage -t -long -force_lib "devel/sage/sage/groups/perm_gps/permgroup.py"
sage -t -long -force_lib "devel/sage/sage/groups/perm_gps/permgroup.py"
         [15.0 s]
 
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 15.1 seconds

```



---

Comment by was created at 2011-08-23 08:41:11

Resolution: fixed


---

Comment by was created at 2011-08-24 23:42:03

Changing keywords from "" to "sd32".


---

Comment by leif created at 2011-09-15 05:49:21

Resolution changed from fixed to duplicate
