# Issue 22672: Indexed SR variables

Issue created by migration from https://trac.sagemath.org/ticket/22909

Original creator: mforets

Original creation time: 2017-04-30 10:36:09

CC:  nbruin kcrisman rws

Keywords: symbolic ring

Provide a keyword argument to construct a tuple of symbolic variables:


```
sage: SR.var('x', 4)
(x0, x1, x2, x3)
```



---

Comment by mforets created at 2017-04-30 10:38:27

Related to: #22813, #22809, and #11576.
----
New commits:


---

Comment by mforets created at 2017-04-30 10:38:27

Changing status from new to needs_review.


---

Comment by tscrim created at 2017-04-30 14:12:46

This change is backwards incompatible with `var('x','y')`, where the second argument is treated as the latex name. We should also handle the latex name too.

The argument name of `index` is misleading. Perhaps `n`, `index_set`, `indicies`, or `number`?

Little thing, but the error messages should start with a lowercase letter (at least all new messages).


---

Comment by mforets created at 2017-04-30 19:19:46

> Replying to [comment:2 tscrim]:

as usual, thanks for your prompt feedback!!

> This change is backwards incompatible with `var('x','y')`, where the second argument is treated as the latex name. We should also handle the latex name too.

yes. with the current commit one has:

```
sage: SR.var('x', 'y')
...
AttributeError: 'str' object has no attribute 'is_integer'
```


instead of:


```
sage: SR.var('x', latex_name='y')
x
sage: latex(x)
{y}
```


should i do this with some type checking to handle (integer/string), or just ordering the arguments in a different way and expect user to always type `index=...`? 

IMO, it is better if `SR.var('x', 4)` is understood by the program.

> 
> The argument name of `index` is misleading. Perhaps `n`, `index_set`, `indicies`, or `number`?

i used `index` because one speaks of "indexed variables". for those you suggest let me upvote (in order of preference): `n` and `indices`. in addition to those, let me add as options: `len`, `length` or `size`. what do others think?

> 
> Little thing, but the error messages should start with a lowercase letter (at least all new messages).

ok, and full stop yes or no? 

the question is if an exception should be a complete sentence or not.


---

Comment by tscrim created at 2017-04-30 23:02:34

Replying to [comment:3 mforets]:
> > Replying to [comment:2 tscrim]:
> > This change is backwards incompatible with `var('x','y')`, where the second argument is treated as the latex name. We should also handle the latex name too.
> 
> yes. with the current commit one has:
> {{{
> sage: SR.var('x', 'y')
> ...
> AttributeError: 'str' object has no attribute 'is_integer'
> }}}
> 
> instead of:
> 
> {{{
> sage: SR.var('x', latex_name='y')
> x
> sage: latex(x)
> {y}
> }}}
> 
> should i do this with some type checking to handle (integer/string), or just ordering the arguments in a different way and expect user to always type `index=...`? 

As you surmised, you can do one of two things. The first is to put the `n` (`index`) as a later argument (I feel that `domain` is less used except as a keyword argument, so I'm more willing to let that be backwards incompatible). The second, and more preferable, is to check the input type and redirect as necessary. (This is one of the biggest shortcomings of weakly type languages.)

> IMO, it is better if `SR.var('x', 4)` is understood by the program.

I agree. It just means some more complicated code to parse the inputs, but it has better useability.

> > The argument name of `index` is misleading. Perhaps `n`, `index_set`, `indicies`, or `number`?
> 
> i used `index` because one speaks of "indexed variables". for those you suggest let me upvote (in order of preference): `n` and `indices`. in addition to those, let me add as options: `len`, `length` or `size`. what do others think?

I think `n` is generic but clear enough for something like this. I don't have too much of a preference (but not `index`).

> > Little thing, but the error messages should start with a lowercase letter (at least all new messages).
> 
> ok, and full stop yes or no? 
> 
> the question is if an exception should be a complete sentence or not.

They are generally not, at least by Python's standard. So no full stop nor uppercase letter.


---

Comment by git created at 2017-05-02 21:07:15

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2017-05-03 03:16:03

I'm cc-ing Nils, Karl-Dieter, and Ralf to see if they have any comments before setting this to a positive review.


---

Comment by kcrisman created at 2017-05-03 04:18:04

I'm unsure if I have a preference, but keep in mind the injection issue discussed elsewhere - I don't know whether these should be injected automatically into the global namespace or not.  Not that I have a preference on that either :-) but just be sure to see, I didn't follow that discussion carefully.


---

Comment by tscrim created at 2017-05-03 04:44:12

FYI, this does not inject any variables. It does add it to `SR.symbols` however, but I think that is less of an issue.


---

Comment by mforets created at 2017-05-03 06:02:07

also as you can see there is no "INPUT" block in this function. if you want that can be added, together with a list of possible `domains` that one could use.


---

Comment by nbruin created at 2017-05-03 07:48:28

Don't use a bare `except`. Put as narrow an exception class there as possible. Unintentionally catching exceptions makes debugging a lot harder.


---

Comment by git created at 2017-05-03 09:36:00

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2017-05-04 06:54:48

See also the related #18390


---

Comment by mforets created at 2017-05-07 08:59:22

Changing status from needs_review to needs_work.


---

Comment by mforets created at 2017-05-07 08:59:22

(i'd like to add a proper docstring to this function) [reference page of SR](http://doc.sagemath.org/html/en/reference/calculus/sage/symbolic/ring.html)


---

Comment by git created at 2017-05-21 22:32:23

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-05-22 05:37:11

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mforets created at 2017-05-22 05:37:32

Changing status from needs_work to needs_review.


---

Comment by tscrim created at 2017-05-22 21:26:22

Last little thing from me: this could be done

```diff
-'`0`'.format(latex_name) + '_`0`'.format(str(i))
+'``_``'.format(latex_name, str(i))
```



---

Comment by git created at 2017-05-24 11:03:10

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mforets created at 2017-05-24 11:08:56

Replying to [comment:17 tscrim]:
> Last little thing from me: this could be done
> {{{#!diff
> -'`0`'.format(latex_name) + '_`0`'.format(str(i))
> +'``_``'.format(latex_name, str(i))
> }}}
done.


---

Comment by tscrim created at 2017-05-24 21:17:07

If there are any objections, then set this back from positive review.


---

Comment by tscrim created at 2017-05-24 21:17:07

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-05-26 21:28:01

Resolution: fixed
