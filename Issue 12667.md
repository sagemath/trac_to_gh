# Issue 12667: reduced Groebner basis not unique

Issue created by migration from https://trac.sagemath.org/ticket/12839

Original creator: mariah

Original creation time: 2012-04-13 18:51:28

Assignee: malb

Using sage-4.8


```
sage: R.<x,y> = PolynomialRing(ZZ)
sage: I = R*[x^2-y, 2*y]
sage: J = R*[x^2+y, 2*y]
```


`I` and `J` are visibly the same ideal, but Sage finds different reduced Groebner bases:


```
sage: I.groebner_basis()
[x^2 - y, 2*y]
sage: J.groebner_basis()
[x^2 + y, 2*y]
sage: I == J   // should say True
False
```



---

Comment by john_perry created at 2012-05-25 19:06:30

Correct me if I am wrong, but you cannot have a reduced Groebner basis over a ring that is not a field. Besides, the ideals are _not_ the same, even if their varieties are.

Singular seems to feel this way:

  * Singular is computing the basis.
  * According to Remark 1.6.14 in _A *Singular* Introduction to Commutative Algebra_, if you want to compute a _standard basis over a ring_ which is merely Noetherian (not necessarily a field, as in Definition 1.6.1), you need to have agreement of leading _terms_ (which includes coefficients), not leading _monomials_.
  * See this answer in [the Singular forums](http://www.singular.uni-kl.de/forum/viewtopic.php?f=10&t=1750&p=2349&hilit=std+integer#p2349).

Macaulay also feels this way:

  * I installed Macaulay2, computed groebner bases for both I and J, and got the same thing singular computes.
  * Macaulay2's [webpage](http://www.math.uiuc.edu/Macaulay2/doc/Macaulay2-1.4/share/doc/Macaulay2/Macaulay2Doc/html/_simple_sp__Groebner_spbasis_spcomputations_spover_spvarious_springs.html) implies the same.

Unless I'm wrong, this is not a bug.

_Edit:_ I had ring and field switched in the first sentence.


---

Comment by john_perry created at 2012-05-25 19:18:39

Replying to [comment:1 john_perry]:
> Besides, the ideals are _not_ the same, even if their varieties are.

This was a dumb thing to say, & I had doubts almost immediately after hitting the Submit button. In fact, Macaulay2 recognizes I==J, even though it computes different gb's. Singular does not recognize this.


---

Comment by john_perry created at 2012-05-25 19:48:07

I think I see a way to get this to work.

The first thing that can be tried is whether the groebner bases are equal, which is what we are doing now. If that succeeds, then great.

Otherwise, we can compare by reducing the elements of one groebner basis over the other's groebner basis. If all reductions give us 0, then we return true. Otherwise, we return false.

I think this is related to #12802, and this trick should fix both of them: `__lt__` can test if the first is contained in the second, `__gt__` can check if the second is contained in the first, and `__eq__` checks if both are satisfied.

This would be easy to implement, but is the algorithm I'm outlining correct?


---

Comment by john_perry created at 2012-05-25 23:25:41

Changing status from new to needs_info.


---

Comment by john_perry created at 2012-05-25 23:25:41

Hello

I'm still of the opinion that what I wrote about reduced Groebner bases in integer rings is correct, given the behavior of Singular and Macaulay2.

That said, the incorrect conclusion that `I != J` is easily fixed, using the algorithm I outlined. I have uploaded a patch to #12802 that does precisely this.

Assuming that what I've done there is correct, is there a way to mark this patch as a duplicate, or something similar?


---

Comment by john_perry created at 2012-05-25 23:25:56

Changing keywords from "" to "sd40.5, groebner bases, ideals".


---

Comment by was created at 2012-05-26 02:29:57

john_perry: to mark this as a dup:

  1. Set yourself to reviewer
  2. give it positive review
  3. change the milestone to sage-duplicate

William


---

Comment by john_perry created at 2012-05-26 05:39:10

Replying to [comment:6 was]:
> john_perry: to mark this as a dup:

Thx. Since testing equality of ideals is equivalent to testing containment both ways, that's what I'll do.


---

Comment by john_perry created at 2012-05-26 05:39:29

Changing status from needs_info to needs_review.


---

Comment by john_perry created at 2012-05-26 05:39:52

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2012-06-19 13:27:57

Resolution: fixed


---

Comment by jdemeyer created at 2012-06-19 13:28:04

Resolution changed from fixed to duplicate
