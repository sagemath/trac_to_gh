# Issue 15865: Including code to compute Lyapunov exponents for translation surfaces.

archive/issues_015865.json:
```json
{
    "body": "CC:  fougeroc @videlec\n\nKeywords: lyapunov_exponents, translation_surfaces, geometry, sagedays57\n\nCode for studying lyapunov exponents of translation surfaces and their covers.\n\nTODO:\n* See compatibility with other existing code for interval echanges and strata\n* It seems to work in most of the examples, \n  there is a bug for zero lyapunov exponents when decomposing in isotropic components :\n\n\n```\nsage: R = intex.cyclic_cover_iet(4, [1, 1, 1, 1])\nsage: R.lyapunov_exponents_H_plus()\n[0.9996553085103, 0.0007776980910571506, 0.00022201024035355403]\nsage: R.lyapunov_exponents_H_plus_isotopic()\n[[], [1.0002381322489762], [-0.09753642448496574], [-0.09750440918016302]]\n\n```\n\nIssue created by migration from https://trac.sagemath.org/ticket/16102\n\n",
    "created_at": "2014-04-08T16:41:19Z",
    "labels": [
        "component: geometry"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Including code to compute Lyapunov exponents for translation surfaces.",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15865",
    "user": "https://trac.sagemath.org/admin/accounts/users/Fougeroc"
}
```
CC:  fougeroc @videlec

Keywords: lyapunov_exponents, translation_surfaces, geometry, sagedays57

Code for studying lyapunov exponents of translation surfaces and their covers.

TODO:
* See compatibility with other existing code for interval echanges and strata
* It seems to work in most of the examples, 
  there is a bug for zero lyapunov exponents when decomposing in isotropic components :


```
sage: R = intex.cyclic_cover_iet(4, [1, 1, 1, 1])
sage: R.lyapunov_exponents_H_plus()
[0.9996553085103, 0.0007776980910571506, 0.00022201024035355403]
sage: R.lyapunov_exponents_H_plus_isotopic()
[[], [1.0002381322489762], [-0.09753642448496574], [-0.09750440918016302]]

```

Issue created by migration from https://trac.sagemath.org/ticket/16102





---

archive/issue_comments_205684.json:
```json
{
    "body": "Hi Charles,\n\nHere are some remarks.\n\nAbout syntax:\n\n- remove trailing whitespaces\n- documentation lines should be at most 80 characters long\n- all functions and methods must have an EXAMPLES block. In order \n  to see how much work you have to do, you can use \n  `sage -coverage MY_FILE`.\n- The block RETURN should be OUTPUT\n\nGeneral design:\n\n- It would be more coherent to have an object \"covering of stratum\".\n  In a concrete way it would be a permutation of interval exchange\n  (that may be considered as a marking) together with a covering data.\n  We do not care that much about a concrete interval exchange in your code.\n- avoid using import from `sage.all`, to know from which module you need\n  to import an object you can use `import_statements(MY_OBJECT)`. For more\n  info look at `import_statements?`.\n  \n\nAbout code:\n\n- there are already several things in Sage for interval exchange\n  transformations and strata. It would be simpler to use them.\n- you must put a comment about `precision = 128` and\n  `diff_sum_seuil = 2**(-precision+20)`. Even better, remove them.\n- in order to fit nicely with other components of Sage, you should\n  separate the code (like your class `IntExchange`) and the examples\n  (like the functions `EKZ_example`).",
    "created_at": "2014-04-08T17:37:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15865#issuecomment-205684",
    "user": "https://github.com/videlec"
}
```

Hi Charles,

Here are some remarks.

About syntax:

- remove trailing whitespaces
- documentation lines should be at most 80 characters long
- all functions and methods must have an EXAMPLES block. In order 
  to see how much work you have to do, you can use 
  `sage -coverage MY_FILE`.
- The block RETURN should be OUTPUT

General design:

- It would be more coherent to have an object "covering of stratum".
  In a concrete way it would be a permutation of interval exchange
  (that may be considered as a marking) together with a covering data.
  We do not care that much about a concrete interval exchange in your code.
- avoid using import from `sage.all`, to know from which module you need
  to import an object you can use `import_statements(MY_OBJECT)`. For more
  info look at `import_statements?`.
  

About code:

- there are already several things in Sage for interval exchange
  transformations and strata. It would be simpler to use them.
- you must put a comment about `precision = 128` and
  `diff_sum_seuil = 2**(-precision+20)`. Even better, remove them.
- in order to fit nicely with other components of Sage, you should
  separate the code (like your class `IntExchange`) and the examples
  (like the functions `EKZ_example`).



---

archive/issue_events_047427.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15865",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15865#event-47427"
}
```



---

archive/issue_comments_205685.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2014-06-20T16:35:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15865#issuecomment-205685",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_205686.json:
```json
{
    "body": "Attachment [compare1_100_.png](tarball://root/attachments/some-uuid/ticket16102/compare1_100_.png) by Fougeroc created at 2014-06-20 17:01:01\n\nCompare computation of lyapunov exponents wrt number of iteration",
    "created_at": "2014-06-20T17:01:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15865#issuecomment-205686",
    "user": "https://trac.sagemath.org/admin/accounts/users/Fougeroc"
}
```

Attachment [compare1_100_.png](tarball://root/attachments/some-uuid/ticket16102/compare1_100_.png) by Fougeroc created at 2014-06-20 17:01:01

Compare computation of lyapunov exponents wrt number of iteration



---

archive/issue_comments_205687.json:
```json
{
    "body": "Compare computation of lyapunov exponents wrt number of iteration (zoom)",
    "created_at": "2014-06-20T17:01:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15865#issuecomment-205687",
    "user": "https://trac.sagemath.org/admin/accounts/users/Fougeroc"
}
```

Compare computation of lyapunov exponents wrt number of iteration (zoom)



---

archive/issue_comments_205688.json:
```json
{
    "body": "Attachment [compare_speed.png](tarball://root/attachments/some-uuid/ticket16102/compare_speed.png) by Fougeroc created at 2014-06-20 17:03:45\n\nCompare log(T)/nb_iterations for diffrent genus and nb_iterations",
    "created_at": "2014-06-20T17:03:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15865#issuecomment-205688",
    "user": "https://trac.sagemath.org/admin/accounts/users/Fougeroc"
}
```

Attachment [compare_speed.png](tarball://root/attachments/some-uuid/ticket16102/compare_speed.png) by Fougeroc created at 2014-06-20 17:03:45

Compare log(T)/nb_iterations for diffrent genus and nb_iterations



---

archive/issue_comments_205689.json:
```json
{
    "body": "I updated the code which integrate the computation of lyapunov exponents for quadratic strata.\nYou can now use the function :\n\n```\nstratum_component = QuadraticStratum([1]*8 + [-1]*4).components()[0]\nstratum_component.orientable_cover().lyapunov_exponents_H_plus()\n```\n\n\nI noticed a strange behaviour while doing some computeur simulations for asymptotic of lyapunov exponents. When genus is getting bigger (and consequently the number of intervals), the speed is decreasing. While increasing the number of iteration, log(t)/n is also increasing. A surprising behaviour (possibly due to float approximation) is that the there is a limit value for this function for a large value of genus.  \n\n![](compare_speed.png)\n\nThis behaviour seems to be responsible for a wrong approximation of lyapunov exponents asymptotically:\n\n![](compare1_100_.png)\n\n![](compare40_100_.png)",
    "created_at": "2014-06-22T19:15:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15865#issuecomment-205689",
    "user": "https://trac.sagemath.org/admin/accounts/users/Fougeroc"
}
```

I updated the code which integrate the computation of lyapunov exponents for quadratic strata.
You can now use the function :

```
stratum_component = QuadraticStratum([1]*8 + [-1]*4).components()[0]
stratum_component.orientable_cover().lyapunov_exponents_H_plus()
```


I noticed a strange behaviour while doing some computeur simulations for asymptotic of lyapunov exponents. When genus is getting bigger (and consequently the number of intervals), the speed is decreasing. While increasing the number of iteration, log(t)/n is also increasing. A surprising behaviour (possibly due to float approximation) is that the there is a limit value for this function for a large value of genus.  

![](compare_speed.png)

This behaviour seems to be responsible for a wrong approximation of lyapunov exponents asymptotically:

![](compare1_100_.png)

![](compare40_100_.png)



---

archive/issue_events_047428.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15865",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15865#event-47428"
}
```



---

archive/issue_events_047429.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15865",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15865#event-47429"
}
```



---

archive/issue_comments_205690.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-24T18:07:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15865#issuecomment-205690",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_205691.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-11-05T17:58:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15865#issuecomment-205691",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_205692.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-12-01T10:22:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15865#issuecomment-205692",
    "user": "https://trac.sagemath.org/admin/accounts/users/Fougeroc"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_205693.json:
```json
{
    "body": "does not apply, needs rebase",
    "created_at": "2015-05-22T19:42:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15865#issuecomment-205693",
    "user": "https://github.com/fchapoton"
}
```

does not apply, needs rebase



---

archive/issue_comments_205694.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-05-22T19:42:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15865#issuecomment-205694",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_205695.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-05-03T02:03:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15865#issuecomment-205695",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_205696.json:
```json
{
    "body": "I guess that we should close this ticket with mileston \"wontfix\" as I did with the other tickets #14683, #16159, #16170, #16169. This means that the ticket would be closed without integrating the branch into Sage.",
    "created_at": "2016-05-27T17:35:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15865#issuecomment-205696",
    "user": "https://github.com/videlec"
}
```

I guess that we should close this ticket with mileston "wontfix" as I did with the other tickets #14683, #16159, #16170, #16169. This means that the ticket would be closed without integrating the branch into Sage.



---

archive/issue_comments_205697.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-07-11T12:11:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15865#issuecomment-205697",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_205698.json:
```json
{
    "body": "Vincent, do you confirm this should be closed as invalid ?",
    "created_at": "2016-07-11T12:11:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15865#issuecomment-205698",
    "user": "https://github.com/fchapoton"
}
```

Vincent, do you confirm this should be closed as invalid ?



---

archive/issue_events_047430.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-07-11T12:11:10Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15865",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15865#event-47430"
}
```



---

archive/issue_events_047431.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-07-11T12:11:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/15865",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15865#event-47431"
}
```



---

archive/issue_comments_205699.json:
```json
{
    "body": "Yes! Charles' code is now part of the package `surface_dynamics` (see #20695).",
    "created_at": "2016-07-11T16:03:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15865#issuecomment-205699",
    "user": "https://github.com/videlec"
}
```

Yes! Charles' code is now part of the package `surface_dynamics` (see #20695).



---

archive/issue_comments_205700.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-07-11T18:17:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15865#issuecomment-205700",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_205701.json:
```json
{
    "body": "Determined to be invalid/duplicate/wontfix (closing as \"wontfix\" as a catch-all resolution).",
    "created_at": "2016-08-30T13:32:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15865#issuecomment-205701",
    "user": "https://github.com/embray"
}
```

Determined to be invalid/duplicate/wontfix (closing as "wontfix" as a catch-all resolution).



---

archive/issue_events_047432.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-08-30T13:32:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15865",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15865#event-47432"
}
```



---

archive/issue_comments_205702.json:
```json
{
    "body": "Resolution: wontfix",
    "created_at": "2016-08-30T13:32:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15865#issuecomment-205702",
    "user": "https://github.com/embray"
}
```

Resolution: wontfix
