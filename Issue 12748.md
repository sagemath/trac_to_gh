# Issue 12748: Decorators for sharing code between is_bar and _test_bar methods.

Issue created by migration from Trac.

Original creator: nthiery

Original creation time: 2012-05-07 18:43:51

Assignee: mvngu

CC:  sage-combinat




---

Comment by nthiery created at 2012-05-07 18:46:24

Changing status from new to needs_review.


---

Comment by nthiery created at 2012-05-07 18:52:02

Changing keywords from "" to "days38".


---

Attachment


---

Comment by roed created at 2013-03-28 23:09:54

Changing component from doctest to doctest framework.


---

Comment by vdelecroix created at 2013-07-09 07:44:01

Changing status from needs_review to needs_work.


---

Comment by vdelecroix created at 2013-07-09 07:44:01

Needs to rebase on 5-11.beta3 (reject on unittest.py).

The patch may definitely be useful. There are two things that I dislike.

1) When you add the decorator the code does not correspond anymore to a is_X method (it does not return a boolean but raise an error or return a refined category). In other words, it is unreadable. Moreover, when you want to access the documentation (reusing your example)

```
sage: F = FiniteUnion([GF(2), GF(3)])
sage: F.is_finite?
```

you get something that you do not want to see here.

2) the speed

```
sage: %timeit F.is_finite()
10000 loops, best of 3: 27.2 us per loop
```

just to compare

```
sage: class P:
....:     def is_finite(self):
....:         return True
sage: p = P()
sage: %timeit p.is_finite()
1000000 loops, best of 3: 218 ns per loop
```

which is how `is_finite` should be implemented for a finite set.


---

Comment by jdemeyer created at 2017-01-24 09:31:33

Changing component from doctest framework to misc.
