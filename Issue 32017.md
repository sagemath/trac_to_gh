# Issue 32017: Obtain singular.hlp location via libsingular_resources

Issue created by migration from https://trac.sagemath.org/ticket/32254

Original creator: mkoeppe

Original creation time: 2021-07-20 17:24:07

CC:  fbissey mjo arojas dimpase

We expose one additional `libsingular` function in `sage.libs.singular.singular`:

```
sage: from sage.libs.singular.singular import get_resource                                                              
sage: get_resource('i')                                                                                                 
'/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/bin/../share/info/singular.hlp'
```




---

Comment by mkoeppe created at 2021-07-20 17:31:29

New commits:


---

Comment by arojas created at 2021-07-20 18:08:44

This segfaults if you query for an invalid resource


---

Comment by mkoeppe created at 2021-07-20 18:11:39

Thanks for testing, I should probably check for NULL result


---

Comment by git created at 2021-07-20 18:32:06

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-07-20 18:37:40

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2021-07-20 18:39:04

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2021-07-20 18:42:01

Changing status from new to needs_review.


---

Comment by mjo created at 2021-07-20 18:42:50

`SINGULARPATH` is unused at this point and can be deleted.

This line is also now too naive:


```
new_node = re.compile(r"File: singular\.hlp,  Node: ([^,]*),.*")
```



---

Comment by mkoeppe created at 2021-07-20 18:46:13

Replying to [comment:9 mjo]:
> `SINGULARPATH` is unused at this point and can be deleted.

Thanks, already done in the latest commit. Or do you mean remove from `sage.env`?


---

Comment by mjo created at 2021-07-20 18:49:07

Replying to [comment:10 mkoeppe]:
> Replying to [comment:9 mjo]:
> > `SINGULARPATH` is unused at this point and can be deleted.
> 
> Thanks, already done in the latest commit. Or do you mean remove from `sage.env`?

AFAIK it can be deleted from both `src/bin/sage-env` and `src/sage/env.py`. `git grep SINGULARPATH` shows only those two instances of it, aside from a qepcad patch.


---

Comment by git created at 2021-07-20 18:49:34

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2021-07-20 18:51:20

Let's leave the removal from `src/bin/sage-env` to #31275.


---

Comment by git created at 2021-07-20 18:52:48

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mjo created at 2021-07-20 19:00:43


```python
new_node = re.compile(r"File: singular\.[a-z]*,  Node: ([^,]*),.*")
```


You just went to all that trouble to find the name of the help file...


---

Comment by mkoeppe created at 2021-07-20 20:20:09

The Singular build system uses this file name, so it appears in this form in the info file. In anticipation of your PR https://github.com/Singular/Singular/pull/1108 I have relaxed the pattern, but more generality is really not necessary.


---

Comment by arojas created at 2021-07-21 06:28:49

Changing status from needs_review to positive_review.


---

Comment by arojas created at 2021-07-21 06:28:49

works for me


---

Comment by mkoeppe created at 2021-07-21 06:41:37

Thanks!


---

Comment by vbraun created at 2021-07-25 13:25:59

Resolution: fixed
