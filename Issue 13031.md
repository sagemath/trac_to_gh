# Issue 13031: Promotion on Tableaux should force its argument to be an Integer.

Issue created by migration from https://trac.sagemath.org/ticket/13203

Original creator: nthiery

Original creation time: 2012-07-05 04:54:04

Assignee: sage-combinat

CC:  sage-combinat schilling

Keywords: tableaux, promotion

The entries of a tableau are Integers::

```
    sage: T = Tableau([[1]])
    sage: type(T[0][0])
    <type 'sage.rings.integer.Integer'>
```


This invariant should be preserved by inverse promotion::

```
    sage: type(T.promotion_inverse(2)[0][0])
    <type 'sage.rings.integer.Integer'>
```


But this is currently not if the input is a plain int::

```
    sage: type(T.promotion_inverse(int(2))[0][0])
    <type 'int'>
```




---

Comment by nthiery created at 2012-07-05 04:54:43

Changing type from PLEASE CHANGE to defect.


---

Comment by chapoton created at 2012-07-13 12:26:51

Changing status from new to needs_review.


---

Comment by chapoton created at 2012-07-22 19:55:10

Could somebody please review this patch ?


---

Comment by mhansen created at 2012-07-22 20:12:42

Could you add 


```
    sage: type(T.promotion_inverse(int(2))[0][0])
    <type 'sage.rings.integer.Integer'>
```


as a doctest?


---

Comment by chapoton created at 2012-07-23 12:30:22

Here is a new ticket, with a doctest added.


---

Comment by chapoton created at 2012-08-25 16:01:49

rebased on 5.2


---

Comment by nthiery created at 2012-09-19 11:51:55

I just had a look, and this sounds good. For consistency, can you put spaces on both sides of the `=` sign, and move this line just after the is_rectangular test (putting together all the argument checks/preprocessing).

Once done, you can set a positive review on my behalf (where is the patchbot?)

Ah: it depends syntactically on #13074. I just moved your patch right after it in the queue; please run the tests with them applied.


Thanks!

Cheers,
                                   Nicolas


---

Attachment

I have made the changes, and the tests pass. I do not understand whether I should add the dependency to #13074 or not.


---

Comment by nthiery created at 2012-09-19 13:41:49

Changing status from needs_review to positive_review.


---

Comment by nthiery created at 2012-09-19 13:41:49

Unless you commute this patch past #13074, yes it should be a dependency (done)


---

Comment by jdemeyer created at 2013-01-07 20:56:13

Resolution: fixed
