# Issue 11086: Add documentation for plotting max and min functions

Issue created by migration from https://trac.sagemath.org/ticket/11258

Original creator: kcrisman

Original creation time: 2011-04-26 15:45:36

Assignee: jason, was

CC:  burcin

Keywords: beginner

To do this, you need `min_symbolic` and `max_symbolic`, as in #6949.  But I don't think this is in the documentation for plotting anywhere.


```
M = matrix([[1,-1],[-1,1]])
f1(p) = (M[1,0] - M[0,0])*p+M[0,0]
f2(p) = (M[1,1] - M[0,1])*p+M[0,1]
P = plot([f1,f2],(p,0,1),linestyle='--')
P += plot(min_symbolic(f1(p),f2(p)),(p,0,1),color='red')
show(P,axes_labels=['$p$','Exp.'])
```

Notice that 

```
P += plot(min_symbolic(f1,f2),(p,0,1),color='red')
```

and 

```
P += plot(min(f1(p),f2(p)),(p,0,1),color='red')
```

don't work properly.  I could even consider the first one a bug...

Putting in component 'graphics' because it's more likely these people will write documentation for this than symbolics or doc people!


---

Comment by jason created at 2011-04-27 15:40:47

Can we just write a very lightweight wrapper around the python min() function which behaves symbolically if given symbolic input, but otherwise is just like the python function?  Similar to how we have a lightweight wrapper around the sum function?


---

Comment by kcrisman created at 2011-04-27 16:40:47

That would also solve this, though I would still insist on having at least one nice example of this in the plot docs. 

I just didn't know if that was possible; maybe sum was a special case.    I guess if it's hard, we should do this first, then open a different ticket for that (which then corrects the plot doc, naturally).  If it's easy, then go ahead and wrap!


---

Comment by kcrisman created at 2011-04-28 03:41:50

Here's another example of what can go wrong, though it's not related to plotting.

```
@interact
def _(M = matrix(RR,[[1,-1],[-1,1]]),auto_update=False):
    f1(p) = (M[1,0] - M[0,0])*p+M[0,0]
    f2(p) = (M[1,1] - M[0,1])*p+M[0,1]
#    sol1 = find_maximum_on_interval(lambda y: min_symbolic(f1(y),f2(y)),0,1)[0]
```

This is commented out because it does the wrong thing.  The minimum it finds is the comparison of f1 and f2 as Python objects or whatever.


---

Comment by vdelecroix created at 2014-06-14 13:06:52

Hi there,

I rewrote a bit the description (please check that you agree). Involving the matrix in the example was quite confusing. I might use it for an introduction to Sage development on june 25th 2014.

Vincent


---

Comment by kcrisman created at 2014-06-14 14:07:43

Seems okay, though I haven't tested this in three years, as you can see :)


---

Comment by asutosh7hota created at 2017-02-24 14:06:03

There is a fundamental difference between the min_sybolic()  and max_symbolic() from the built-in python functions min() and max() function.The Python built-in max() and min() functions donâ€™t work as expected when symbolic expressions are given as arguments. This function delays evaluation until all symbolic arguments are substituted with values.However,when the built-in functions are used to plot the minimum and maximum of functions in a domain, the first parameter inside the min() or max() function gets plotted irrespective of the actual values.Let's consider the following example:



```
f1(x)=sin(x)
f2(x)=cos(x)
f3(x)=x
p=plot([f1,f2,f3],(x,0,2*pi),linestyle='--')
p+=plot(min(f1(x),f2(x),f3(x)),(x,0,2*pi),color='red') # f1(x) is plotted through out the domain even though its not                min at every point in the x-axis.
p+=plot(max(f2(x),f1(x),f3(x)),(x,0,2*pi),color='green')#f2(x) is plotted through out the domain even though its not                max at every point in the x-axis.
p.show()
```


Considering some polynomial functions:

```
f1(x)=x*x + 4*x + 2
f2(x)=x^2
f3(x)=x
p=plot([f1,f2,f3],(x,0,2*pi),linestyle='--')
p+=plot(min(f3(x),f1(x),f2(x)),(x,0,2*pi),color='red') #always the first parameter in the min function gets plotted. 
p+=plot(max(f2(x),f3(x),f2(x)),(x,0,2*pi),color='green')#always the first parameter in the max function gets plotted.
p.show()
```


However, min_symbolic() and max_symbolic() are able to deal with variables as well as can be plotted with more than 2 parameters (functions) efficiently. Below are the examples of the same functions that were plotted by built-in min() and max() earlier.



```
f1(x)=sin(x)
f2(x)=cos(x)
f3(x)=x
p=plot([f1,f2,f3],(x,0,2*pi),linestyle='--')
p+=plot(min_symbolic(f1(x),f2(x),f3(x)),(x,0,2*pi),color='red') # f1(x) is plotted through out the domain even though its not                min at every point in the x-axis.
p+=plot(max_symbolic(f2(x),f1(x),f3(x)),(x,0,2*pi),color='green')#f2(x) is plotted through out the domain even though its not                max at every point in the x-axis.
p.show()
```




```
f1(x)=x*x + 4*x + 2
f2(x)=x^2
f3(x)=x
p=plot([f1,f2,f3],(x,0,2*pi),linestyle='--')
p+=plot(min_symbolic(f3(x),f1(x),f2(x)),(x,0,2*pi),color='red') #always the first parameter in the min function gets plotted. 
p+=plot(max_symbolic(f2(x),f3(x),f1(x)),(x,0,2*pi),color='green')#always the first parameter in the max function gets plotted.
p.show()
```



---

Comment by asutosh7hota created at 2017-02-24 14:06:03

Changing assignee from jason, was to asutosh7hota.


---

Comment by git created at 2017-03-03 10:05:02

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by asutosh7hota created at 2017-03-13 06:34:19

Changing status from new to needs_review.


---

Comment by saraedum created at 2017-03-14 21:17:09

Changing status from needs_review to needs_work.


---

Comment by saraedum created at 2017-03-14 21:17:09

panda314, I can't find your handle on the wiki homepage.


---

Comment by asutosh7hota created at 2017-03-15 05:12:41

Replying to [comment:11 saraedum]:
> panda314, I can't find your handle on the wiki homepage.

I have added my handle on the wiki page,i.e., asutosh7hota .


---

Comment by kcrisman created at 2017-03-15 13:18:16

The point is that we still need an actual "real author" name to put on this, sorry for the confusion.


---

Comment by asutosh7hota created at 2017-03-15 15:20:32

Replying to [comment:13 kcrisman]:
> The point is that we still need an actual "real author" name to put on this, sorry for the confusion.
Should I add panda314 in the authors or give my handle name asutosh7hota? I am new to the community and apologize for being unaware about the conventions.


---

Comment by saraedum created at 2017-03-15 15:35:56

Sorry for causing this confusion. It is customary to put the real names of all the authors in that field, not just the handles. It would also be nice if you could add the handles and real names to the list of names on the wiki homepage.


---

Comment by asutosh7hota created at 2017-03-15 15:39:14

Replying to [comment:16 saraedum]:
> Sorry for causing this confusion. It is customary to put the real names of all the authors in that field, not just the handles. It would also be nice if you could add the handles and real names to the list of names on the wiki homepage.

I have added my handle, i.e., asutosh7hota and real name asutosh hota in the wiki page. In this ticket I should give my real name in author right?


---

Comment by saraedum created at 2017-03-15 15:44:00

Exactly.


---

Comment by asutosh7hota created at 2017-03-15 15:52:29

Replying to [comment:18 saraedum]:
> Exactly.
Thanks for letting me know this convention. Should I change the ticket to "needs review"? I would also request you to suggest some changes.


---

Comment by saraedum created at 2017-03-15 16:08:21

Changing status from needs_work to needs_review.


---

Comment by saraedum created at 2017-03-15 16:09:32

Changing status from needs_review to needs_work.


---

Comment by saraedum created at 2017-03-15 16:09:32

Yes, you could set it back to needs review. However, your changes now contain some merge markers `<<<<< HEAD`. I guess that someone you did not fully resolve merge conflicts.


---

Comment by git created at 2017-03-15 18:37:09

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by asutosh7hota created at 2017-03-22 13:32:07

Changing status from needs_work to needs_review.


---

Comment by mforets created at 2017-04-11 18:12:48

`@`asutosh7hota:

- please note there are minor typos with punctuation in the first paragraph (missing white spaces as in "function.The" instead of "function. The"), 

- in the comment `f1(x) is plotted through out the domain even though its not min at every point in the x-axis` it should be `throughout` i think. moreover, what do you think about: `f1(x) is displayed, although it is not the local minimum for every x`, and similarly for the other comments. also i find those comments a bit too long for display, maybe you can transform these into proper sentences before each command, for example:


```
In this example, `f1(x)` is displayed, although it is not the local minimum for every `x`::

    sage: p += plot(min(f1(x),f2(x),f3(x)),(x,0,2*pi),color='red') 
```



---

Comment by git created at 2017-04-12 16:26:13

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by asutosh7hota created at 2017-04-12 16:28:40

Replying to [comment:25 mforets]:
> `@`asutosh7hota:
> 
> - please note there are minor typos with punctuation in the first paragraph (missing white spaces as in "function.The" instead of "function. The"), 
> 
Thanks for the review. I have removed the typos as such and re-written the doc.

> - in the comment `f1(x) is plotted through out the domain even though its not min at every point in the x-axis` it should be `throughout` i think. moreover, what do you think about: `f1(x) is displayed, although it is not the local minimum for every x`, and similarly for the other comments. also i find those comments a bit too long for display, maybe you can transform these into proper sentences before each command, for example:
> 
That's actually a very good suggestion and I have worked it the way you advised. Now it looks better than before.
> {{{
> In this example, `f1(x)` is displayed, although it is not the local minimum for every `x`::
> 
>     sage: p += plot(min(f1(x),f2(x),f3(x)),(x,0,2*pi),color='red') 
> }}}


---

Comment by mforets created at 2017-04-17 18:02:47

if i click on the branch (`u/asutosh7hota/add_documentation_for_plotting_max_and_min_functions`), it displays like a huge number of deletions in `plot.py`. why? doesn't look correct, right?


---

Comment by mforets created at 2017-04-17 18:12:06

also there is a plot block (`.. PLOT::`) which allows to display plots in the doc ([example](http://doc.sagemath.org/html/en/reference/plotting/sage/plot/plot.html)). perhaps this shall be used too in your new examples at `min_max.py`??


---

Comment by mforets created at 2017-04-17 22:35:30

Replying to [comment:28 mforets]:
> if i click on the branch (`u/asutosh7hota/add_documentation_for_plotting_max_and_min_functions`), it displays like a huge number of deletions in `plot.py`. why? doesn't look correct, right?

probably solved with a merge, as explained [here](http://doc.sagemath.org/html/en/developer/manual_git.html#merging-and-rebasing)


---

Comment by mforets created at 2017-04-22 10:20:20

in my machine, this branch is not compiling at all. `@`asutosh7hota, have you been able to compile and build the html doc? 

i suppose we can fix this by merging to development branch. if you agree i shall try to update to the latest development version and push the changes.

for the rest, by comparing with other files (eg. `plot.py`) i still have the impression that one would like to have sphinx plots in the context of this ticket, too.


---

Comment by mforets created at 2017-04-22 13:31:56

one naive question: is there a context where Python's built-in function is used for 1 or more symbolic arguments? i mean, the 1st example in the class doc refers to: `max(x, x^2) = x`. is it a bug or a feature?


---

Comment by mforets created at 2017-04-23 21:53:47

Replying to [comment:32 mforets]:
> one naive question: is there a context where Python's built-in function is used for 1 or more symbolic arguments? i mean, the 1st example in the class doc refers to: `max(x, x^2) = x`. is it a bug or a feature? 

ok it is behaving as expected, as discussed [sort:date/sage-devel/4DUsgt670MA/Woa60kKcpXsJ in this thread](https://groups.google.com/forum/#!searchin/sage-devel/vdelecroix) and possibly in other places. also related #17700

let me suggest that we put some words about this, that could be added in the class docstring (replacing or extending the 'what the user expects' sentence..)


---

Comment by asutosh7hota created at 2017-04-25 18:55:00

Replying to [comment:31 mforets]:
> in my machine, this branch is not compiling at all. `@`asutosh7hota, have you been able to compile and build the html doc? 
> 
> i suppose we can fix this by merging to development branch. if you agree i shall try to update to the latest development version and push the changes.

Yes That would be really great to update the latest development
> 
> for the rest, by comparing with other files (eg. `plot.py`) i still have the impression that one would like to have sphinx plots in the context of this ticket, too.

I would add the sphinx documentation where needed. Thanks for the suggestion.


---

Comment by mforets created at 2017-04-26 11:18:54

Hi Asutosh,

i've pushed a new branch (*) with one sphinx example (see the `plot.py` example). could you see if you like the updates + add the missing `.. PLOT::` blocks for the `min_max.py`? 

one lesson: it was tricky to use with sphinx, because it only accepts a subset of the commands that you would normally use in sage. to see examples of this, just have a look at the code examples in `plot.py`. for instance, it is not possible to assign to function calls, but there are other subtle things.

(*) i first tried to git pull the current branch, merge + compile but i miserably failed, three times. that's why your previous commits are not in the branch i pushed. you can try yourself if you want (`make doc-clean && make`) in your current branch; i gave up and started afresh. 

pd: if you need help to work with git other than what is explained in the user's guide let us know! 
----
New commits:


---

Comment by mforets created at 2017-04-26 11:18:54

Changing status from needs_review to needs_work.


---

Comment by @DaveWitteMorris created at 2020-05-27 03:00:02

Changing keywords from "beginner" to "".


---

Comment by @DaveWitteMorris created at 2020-05-27 03:00:02

Removing the "beginner" tag from old tickets. Some could be returned to beginner-friendly status by adding a comment about what needs to be done. Some others might be easy for an experienced developer to finish.
