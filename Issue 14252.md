# Issue 14252: New methods for alternating sign matrices

archive/issues_014252.json:
```json
{
    "body": "Assignee: sage-combinat\n\nCC:  @tscrim stumpc5\n\nKeywords: asm\n\ntba\n\nIssue created by migration from https://trac.sagemath.org/ticket/14456\n\n",
    "created_at": "2013-04-15T20:20:29Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.11",
    "title": "New methods for alternating sign matrices",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14252",
    "user": "https://github.com/jessicapalencia"
}
```
Assignee: sage-combinat

CC:  @tscrim stumpc5

Keywords: asm

tba

Issue created by migration from https://trac.sagemath.org/ticket/14456





---

archive/issue_comments_179072.json:
```json
{
    "body": "I added inclusion maps from DyckWords to AlternatingSignMatrices and from Permutations to AlternatingSignMatrices. There's also a map from AlternatingSignMatrices to the DyckWord determined by the largest northwest to southeast diagonal of the monotone triangle. I plan to put in a map from ASMs to Permutations which successively removes the -1's until you're left with a permutation matrix.\n\nAlso, I'm getting a whitespace error in the examples in the doctests, and I don't know why.",
    "created_at": "2013-04-18T03:05:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14252#issuecomment-179072",
    "user": "https://github.com/jessicapalencia"
}
```

I added inclusion maps from DyckWords to AlternatingSignMatrices and from Permutations to AlternatingSignMatrices. There's also a map from AlternatingSignMatrices to the DyckWord determined by the largest northwest to southeast diagonal of the monotone triangle. I plan to put in a map from ASMs to Permutations which successively removes the -1's until you're left with a permutation matrix.

Also, I'm getting a whitespace error in the examples in the doctests, and I don't know why.



---

archive/issue_comments_179073.json:
```json
{
    "body": "Hi Jessica,\n\nwhen you do the doctests, you should see several errors:\n\n```\n***Test Failed*** 4 failures.\nFor whitespace errors, see the file /home/stumpc5/.sage//tmp/alternating_sign_matrix_4355.py\n```\n\nThis doesn't mean that the 4 failures are actuall whitespace errors. When looking further above in the output, you see\n\n```\nFile \"/home/stumpc5/progs/sage-5.8/devel/sage-main/sage/combinat/alternating_sign_matrix.py\", line 223:\n...\n        if number_negative_ones(self)==0:\n    NameError: global name 'number_negative_ones' is not defined\n```\n\nSo in line 223 of the file, you do `number_negative_ones(self)` rather than `self.number_negative_ones()`. The second failure is the same, while the 3rd and 4th are different. There, you use `NonDecreasingParkingFunction` in the code. Whenever you want to use a function that is not defined in the present file, you have to import it into the source code using\n\n```\nfrom sage.combinat.non_decreasing_parking_function import NonDecreasingParkingFunction\n```\n\n(see other examples at the beginning of the file). If you do not know how to import something, you can write\n\n```\nsage: import_statements(NonDecreasingParkingFunction)\n```\n\nfrom within sage to get the import statement.\n\nFinally, some coding remarks:\n- you can use ` return self.number_negative_ones()==0 `\n- explaining variable names are easier to read than a, aa, b, bb, ..., like\n  {{{\n  PF = ParkingFunction(data)\n  D = DyckWord(data)\n  ...\n  }}}\n- if you only use a variable ones, you often do not really need it, like in\n  {{{\n  cc=NonDecreasingParkingFunction(c) \n  d=cc.to_dyck_word() \n  dd=d.reverse() \n  return dd\n  }}}\n  which becomes\n  {{{\n  return NonDecreasingParkingFunction(c).to_dyck_word().reverse()\n  }}}\n\nLet me know if anything is unclear!\n\nCheers, Christian",
    "created_at": "2013-04-18T09:13:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14252#issuecomment-179073",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Hi Jessica,

when you do the doctests, you should see several errors:

```
***Test Failed*** 4 failures.
For whitespace errors, see the file /home/stumpc5/.sage//tmp/alternating_sign_matrix_4355.py
```

This doesn't mean that the 4 failures are actuall whitespace errors. When looking further above in the output, you see

```
File "/home/stumpc5/progs/sage-5.8/devel/sage-main/sage/combinat/alternating_sign_matrix.py", line 223:
...
        if number_negative_ones(self)==0:
    NameError: global name 'number_negative_ones' is not defined
```

So in line 223 of the file, you do `number_negative_ones(self)` rather than `self.number_negative_ones()`. The second failure is the same, while the 3rd and 4th are different. There, you use `NonDecreasingParkingFunction` in the code. Whenever you want to use a function that is not defined in the present file, you have to import it into the source code using

```
from sage.combinat.non_decreasing_parking_function import NonDecreasingParkingFunction
```

(see other examples at the beginning of the file). If you do not know how to import something, you can write

```
sage: import_statements(NonDecreasingParkingFunction)
```

from within sage to get the import statement.

Finally, some coding remarks:
- you can use ` return self.number_negative_ones()==0 `
- explaining variable names are easier to read than a, aa, b, bb, ..., like
  {{{
  PF = ParkingFunction(data)
  D = DyckWord(data)
  ...
  }}}
- if you only use a variable ones, you often do not really need it, like in
  {{{
  cc=NonDecreasingParkingFunction(c) 
  d=cc.to_dyck_word() 
  dd=d.reverse() 
  return dd
  }}}
  which becomes
  {{{
  return NonDecreasingParkingFunction(c).to_dyck_word().reverse()
  }}}

Let me know if anything is unclear!

Cheers, Christian



---

archive/issue_comments_179074.json:
```json
{
    "body": "Attachment [trac_14456-new_methods_asm-js.patch](tarball://root/attachments/some-uuid/ticket14456/trac_14456-new_methods_asm-js.patch) by @jessicapalencia created at 2013-04-23 00:30:28\n\nThanks for the help, Christian. I took care of most of the problems and cleaned up the code a bit, but when I put the import statement in the permutation.py file and build sage, it crashes my sage. But it works to put the same statement in the dyck_word.py file, so I don't know what the problem is.",
    "created_at": "2013-04-23T00:30:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14252#issuecomment-179074",
    "user": "https://github.com/jessicapalencia"
}
```

Attachment [trac_14456-new_methods_asm-js.patch](tarball://root/attachments/some-uuid/ticket14456/trac_14456-new_methods_asm-js.patch) by @jessicapalencia created at 2013-04-23 00:30:28

Thanks for the help, Christian. I took care of most of the problems and cleaned up the code a bit, but when I put the import statement in the permutation.py file and build sage, it crashes my sage. But it works to put the same statement in the dyck_word.py file, so I don't know what the problem is.



---

archive/issue_comments_179075.json:
```json
{
    "body": "Hey Jessica,\n\nReplying to [comment:4 jessicapalencia]:\n> Thanks for the help, Christian. I took care of most of the problems and cleaned up the code a bit, but when I put the import statement in the permutation.py file and build sage, it crashes my sage. But it works to put the same statement in the dyck_word.py file, so I don't know what the problem is. \n\nThat sounds like it's leading to a circular import. That is `A -> B -> C -> A` where `A -> B` is an import of module `B` in module `A` (of anything in the module).\n\nA few notes on the code:\n\n* It looks like you are also defining a map from a monotone triangle to a non-decreasing parking function. It might be a good idea to separate this out into a method in `MonotoneTriangle`.\n* These maps should also have the ``@`combinatorial_map` decorator so we can use these (more) effectively in FindStat (correct Christan?).\n* `to_DyckWord()` is not a standard python name for a method, it should be `to_dyck_word()` (you can lobby for `to_Dyck_word()`, and I'll look around for other maps which capitalize names, but I don't think there are many).\n* The documentation is not latex, so things like ```self''` are not outputted as \"self\". Instead these should be formatted as code using the double backticks: ```self```\n* You can use latex in the documentation with single backticks, so for example, line 2631 in Dyck word could be:\n\n```\nThis is an inclusion map from Dyck Words of length `2n` to certain `n \\times n` alternating sign matrices.\n```\n\n* I can handle some docstring formatting in a review patch too.\n* Your doctest for `to_alternating_sign_matrix()` in permutation does not test that they are in fact ASM's. A good check would be to print their `parent()`. (Doing things like this will make it easier to spot errors in the future.)\n* You'll need to export your patch with a good commit message.\n\nI'm sorry that seems more like a laundry list, but I'd need to see those changes before I could let this have a positive review. Feel free to ask me any questions.\n\n----\n\nWhat follows is somewhat of a rant (you've been warned).\n\nA note on coding style, I find it very hard to read things like\n\n```\nPF2=[len(PF)+1-PF[i] for i in range(len(PF))]\n```\n\nA few spaces around (especial on either sides of assignment `=` equals) makes it easier to follow IMO. This is a personal preference and its on the reviewer to deal with whatever style you choose (up to standards of course), so don't feel that you need to change it.\n\nI should also state that it is a good idea to try and keep line lengths to 80 characters in the documentation parts (code is not so important, but try not to let them grow too long lines). This makes it display better for those who have thinner terminal windows (80 has historical reasons as being a \"maximal\" line length). Again, not a need to change, but I've seen a few files which goes double this and beyond.\n\n----\n\nThanks,\n\nTravis",
    "created_at": "2013-04-23T01:28:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14252#issuecomment-179075",
    "user": "https://github.com/tscrim"
}
```

Hey Jessica,

Replying to [comment:4 jessicapalencia]:
> Thanks for the help, Christian. I took care of most of the problems and cleaned up the code a bit, but when I put the import statement in the permutation.py file and build sage, it crashes my sage. But it works to put the same statement in the dyck_word.py file, so I don't know what the problem is. 

That sounds like it's leading to a circular import. That is `A -> B -> C -> A` where `A -> B` is an import of module `B` in module `A` (of anything in the module).

A few notes on the code:

* It looks like you are also defining a map from a monotone triangle to a non-decreasing parking function. It might be a good idea to separate this out into a method in `MonotoneTriangle`.
* These maps should also have the ``@`combinatorial_map` decorator so we can use these (more) effectively in FindStat (correct Christan?).
* `to_DyckWord()` is not a standard python name for a method, it should be `to_dyck_word()` (you can lobby for `to_Dyck_word()`, and I'll look around for other maps which capitalize names, but I don't think there are many).
* The documentation is not latex, so things like ```self''` are not outputted as "self". Instead these should be formatted as code using the double backticks: ```self```
* You can use latex in the documentation with single backticks, so for example, line 2631 in Dyck word could be:

```
This is an inclusion map from Dyck Words of length `2n` to certain `n \times n` alternating sign matrices.
```

* I can handle some docstring formatting in a review patch too.
* Your doctest for `to_alternating_sign_matrix()` in permutation does not test that they are in fact ASM's. A good check would be to print their `parent()`. (Doing things like this will make it easier to spot errors in the future.)
* You'll need to export your patch with a good commit message.

I'm sorry that seems more like a laundry list, but I'd need to see those changes before I could let this have a positive review. Feel free to ask me any questions.

----

What follows is somewhat of a rant (you've been warned).

A note on coding style, I find it very hard to read things like

```
PF2=[len(PF)+1-PF[i] for i in range(len(PF))]
```

A few spaces around (especial on either sides of assignment `=` equals) makes it easier to follow IMO. This is a personal preference and its on the reviewer to deal with whatever style you choose (up to standards of course), so don't feel that you need to change it.

I should also state that it is a good idea to try and keep line lengths to 80 characters in the documentation parts (code is not so important, but try not to let them grow too long lines). This makes it display better for those who have thinner terminal windows (80 has historical reasons as being a "maximal" line length). Again, not a need to change, but I've seen a few files which goes double this and beyond.

----

Thanks,

Travis



---

archive/issue_comments_179076.json:
```json
{
    "body": "Replying to [comment:5 tscrim]:\n> That sounds like it's leading to a circular import. That is `A -> B -> C -> A` where `A -> B` is an import of module `B` in module `A` (of anything in the module).\n\nYou can as well import modules from within a method though this takes a little bit of time when calling the method. This usually solves the import loop problem.\n\n> * These maps should also have the ``@`combinatorial_map` decorator so we can use these (more) effectively in FindStat (correct Christan?).\n\nWe can currently only use a method within FindStat if the ```@`combinatorial_map`` decorator is used.",
    "created_at": "2013-04-23T06:53:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14252#issuecomment-179076",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Replying to [comment:5 tscrim]:
> That sounds like it's leading to a circular import. That is `A -> B -> C -> A` where `A -> B` is an import of module `B` in module `A` (of anything in the module).

You can as well import modules from within a method though this takes a little bit of time when calling the method. This usually solves the import loop problem.

> * These maps should also have the ``@`combinatorial_map` decorator so we can use these (more) effectively in FindStat (correct Christan?).

We can currently only use a method within FindStat if the ```@`combinatorial_map`` decorator is used.



---

archive/issue_comments_179077.json:
```json
{
    "body": "Also as a heads-up. Gelfand-Tsetlin patterns are now sequences of partitions (i.e. the rows are reversed to how they were before), and subsequently the same holds true for monotone triangles.\n\nJessica, you might want to take a look at #14301 and make sure the bijection is still agrees with what you expect on a more complicated example and probably add that as a doctest (either here or there). I can still go bijectively between ASM's and monotone triangles, and I didn't have to change any doctests (as I alluded to before, they are symmetric permutation matrices which I don't think are the best examples).\n\nBest,\n\nTravis",
    "created_at": "2013-04-24T14:21:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14252#issuecomment-179077",
    "user": "https://github.com/tscrim"
}
```

Also as a heads-up. Gelfand-Tsetlin patterns are now sequences of partitions (i.e. the rows are reversed to how they were before), and subsequently the same holds true for monotone triangles.

Jessica, you might want to take a look at #14301 and make sure the bijection is still agrees with what you expect on a more complicated example and probably add that as a doctest (either here or there). I can still go bijectively between ASM's and monotone triangles, and I didn't have to change any doctests (as I alluded to before, they are symmetric permutation matrices which I don't think are the best examples).

Best,

Travis



---

archive/issue_comments_179078.json:
```json
{
    "body": "updated patch",
    "created_at": "2013-05-29T20:19:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14252#issuecomment-179078",
    "user": "https://github.com/jessicapalencia"
}
```

updated patch



---

archive/issue_comments_179079.json:
```json
{
    "body": "Attachment [trac_14456-new_methods_asm-js.2.patch](tarball://root/attachments/some-uuid/ticket14456/trac_14456-new_methods_asm-js.2.patch) by @jessicapalencia created at 2013-05-29 20:36:25\n\nI fixed the previous patch. (I should have replaced the previous one, but I uploaded it as a separate file and now I don't see how to delete the old one.) It includes the same maps as before, but I checked to be sure it worked with the new convention for Gelfand-Tsetlin patterns. I tested it on Sage 5.9 with #14301 applied (along with the patches it depended on). I think I addressed all of Travis' comments, except I did not put in the maps on MonotoneTriangles directly. Please let me know if I used the `@`combinatorial_map decorator correctly. Thanks!",
    "created_at": "2013-05-29T20:36:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14252#issuecomment-179079",
    "user": "https://github.com/jessicapalencia"
}
```

Attachment [trac_14456-new_methods_asm-js.2.patch](tarball://root/attachments/some-uuid/ticket14456/trac_14456-new_methods_asm-js.2.patch) by @jessicapalencia created at 2013-05-29 20:36:25

I fixed the previous patch. (I should have replaced the previous one, but I uploaded it as a separate file and now I don't see how to delete the old one.) It includes the same maps as before, but I checked to be sure it worked with the new convention for Gelfand-Tsetlin patterns. I tested it on Sage 5.9 with #14301 applied (along with the patches it depended on). I think I addressed all of Travis' comments, except I did not put in the maps on MonotoneTriangles directly. Please let me know if I used the `@`combinatorial_map decorator correctly. Thanks!



---

archive/issue_comments_179080.json:
```json
{
    "body": "Oh, I see that #14427 defines the key of a tableau. I should be able to use this to make a map from each ASM to a permutation (called the key of the ASM). I'll work on that today, so you can wait to look at my patch until that's done, if you'd like.",
    "created_at": "2013-05-30T16:36:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14252#issuecomment-179080",
    "user": "https://github.com/jessicapalencia"
}
```

Oh, I see that #14427 defines the key of a tableau. I should be able to use this to make a map from each ASM to a permutation (called the key of the ASM). I'll work on that today, so you can wait to look at my patch until that's done, if you'd like.



---

archive/issue_comments_179081.json:
```json
{
    "body": "Replying to [comment:8 jessicapalencia]:\n> I fixed the previous patch. (I should have replaced the previous one, but I uploaded it as a separate file and now I don't see how to delete the old one.)\n\nDo you want me to delete both files, so you can upload it again? You cannot do it because it is not revertible.\n\nCheers, Christian",
    "created_at": "2013-05-30T18:22:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14252#issuecomment-179081",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Replying to [comment:8 jessicapalencia]:
> I fixed the previous patch. (I should have replaced the previous one, but I uploaded it as a separate file and now I don't see how to delete the old one.)

Do you want me to delete both files, so you can upload it again? You cannot do it because it is not revertible.

Cheers, Christian



---

archive/issue_comments_179082.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-05-30T21:14:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14252#issuecomment-179082",
    "user": "https://github.com/jessicapalencia"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_179083.json:
```json
{
    "body": "Attachment [trac_14456-new_methods_asm-js.3.patch](tarball://root/attachments/some-uuid/ticket14456/trac_14456-new_methods_asm-js.3.patch) by @jessicapalencia created at 2013-05-30 21:14:28\n\nThe most recent patch contains combinatorial maps between ASMs and Dyck words as well as between ASMs and Permutations. If you'd like to delete the previous files, that would be fine, as the newest patch file is all that's needed. Thanks!",
    "created_at": "2013-05-30T21:14:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14252#issuecomment-179083",
    "user": "https://github.com/jessicapalencia"
}
```

Attachment [trac_14456-new_methods_asm-js.3.patch](tarball://root/attachments/some-uuid/ticket14456/trac_14456-new_methods_asm-js.3.patch) by @jessicapalencia created at 2013-05-30 21:14:28

The most recent patch contains combinatorial maps between ASMs and Dyck words as well as between ASMs and Permutations. If you'd like to delete the previous files, that would be fine, as the newest patch file is all that's needed. Thanks!



---

archive/issue_comments_179084.json:
```json
{
    "body": "Hey Jessica,\n\nUnfortunately the average trac user cannot delete patches one uploaded (although I typically \"replace previous upload\", there's a checkbox to do so). Here's a review patch which makes some tweaks. If you're happy with my changes, you can set this to positive review.\n\nBest,\n\nTravis\n\nFor patchbot:\n\nApply: trac_14456-new_methods_asm-js.3.patch trac_14456-review-ts.patch",
    "created_at": "2013-05-31T02:06:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14252#issuecomment-179084",
    "user": "https://github.com/tscrim"
}
```

Hey Jessica,

Unfortunately the average trac user cannot delete patches one uploaded (although I typically "replace previous upload", there's a checkbox to do so). Here's a review patch which makes some tweaks. If you're happy with my changes, you can set this to positive review.

Best,

Travis

For patchbot:

Apply: trac_14456-new_methods_asm-js.3.patch trac_14456-review-ts.patch



---

archive/issue_comments_179085.json:
```json
{
    "body": "Attachment [trac_14456-review-ts.patch](tarball://root/attachments/some-uuid/ticket14456/trac_14456-review-ts.patch) by @tscrim created at 2013-06-01 15:48:06",
    "created_at": "2013-06-01T15:48:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14252#issuecomment-179085",
    "user": "https://github.com/tscrim"
}
```

Attachment [trac_14456-review-ts.patch](tarball://root/attachments/some-uuid/ticket14456/trac_14456-review-ts.patch) by @tscrim created at 2013-06-01 15:48:06



---

archive/issue_comments_179086.json:
```json
{
    "body": "Hey Jessica,\n\nHere's the tweaked version of the review patch.\n\nBest,\n\nTravis\n\nFor patchbot:\n\nApply: trac_14456-new_methods_asm-js.3.patch trac_14456-review-ts.patch",
    "created_at": "2013-06-01T15:48:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14252#issuecomment-179086",
    "user": "https://github.com/tscrim"
}
```

Hey Jessica,

Here's the tweaked version of the review patch.

Best,

Travis

For patchbot:

Apply: trac_14456-new_methods_asm-js.3.patch trac_14456-review-ts.patch



---

archive/issue_comments_179087.json:
```json
{
    "body": "Looks great. Thanks, Travis.",
    "created_at": "2013-06-01T20:40:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14252#issuecomment-179087",
    "user": "https://github.com/jessicapalencia"
}
```

Looks great. Thanks, Travis.



---

archive/issue_comments_179088.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-06-01T20:40:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14252#issuecomment-179088",
    "user": "https://github.com/jessicapalencia"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_179089.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-06-06T12:32:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14252#issuecomment-179089",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
