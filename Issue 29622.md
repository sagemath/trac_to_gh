# Issue 29622: Update palp to 2.11 (for GCC 10 compatibility)

archive/issues_029622.json:
```json
{
    "body": "CC:  @timokau @kiwifb @slel @dimpase @orlitzky @isuruf snark\n\n(from #29456)\n\nIssue created by migration from https://trac.sagemath.org/ticket/29859\n\n",
    "created_at": "2020-06-14T19:20:49Z",
    "labels": [
        "component: porting",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "Update palp to 2.11 (for GCC 10 compatibility)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29622",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @timokau @kiwifb @slel @dimpase @orlitzky @isuruf snark

(from #29456)

Issue created by migration from https://trac.sagemath.org/ticket/29859





---

archive/issue_comments_420209.json:
```json
{
    "body": "Tests run at https://github.com/mkoeppe/sage/actions/runs/140062141\n----\nNew commits:",
    "created_at": "2020-06-18T19:42:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29622#issuecomment-420209",
    "user": "https://github.com/mkoeppe"
}
```

Tests run at https://github.com/mkoeppe/sage/actions/runs/140062141
----
New commits:



---

archive/issue_comments_420210.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-06-18T19:44:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29622#issuecomment-420210",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_420211.json:
```json
{
    "body": "I have not checked whether all of the workarounds in `spkg-install` are still necessary with the newer version. \n\nBuilds and tests OK on macOS; further tests are running on GH Actions (see above)",
    "created_at": "2020-06-18T19:44:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29622#issuecomment-420211",
    "user": "https://github.com/mkoeppe"
}
```

I have not checked whether all of the workarounds in `spkg-install` are still necessary with the newer version. 

Builds and tests OK on macOS; further tests are running on GH Actions (see above)



---

archive/issue_comments_420212.json:
```json
{
    "body": "Builds OK on `cygwin-minimal` (https://github.com/mkoeppe/sage/runs/786324031), `cygwin-standard` (https://github.com/mkoeppe/sage/runs/786066082), and builds OK on various Linux/Mac platforms (https://github.com/mkoeppe/sage/actions/runs/140062141).\n\nOn `homebrew-macos-python3_xcode-nokegonly-minimal`, a timeout that I'm not sure I have seen before, probably unrelated (https://github.com/mkoeppe/sage/runs/785733377), \n\n```\nsage -t src/sage/geometry/cone.py  # Timed out\n```\n",
    "created_at": "2020-06-19T17:57:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29622#issuecomment-420212",
    "user": "https://github.com/mkoeppe"
}
```

Builds OK on `cygwin-minimal` (https://github.com/mkoeppe/sage/runs/786324031), `cygwin-standard` (https://github.com/mkoeppe/sage/runs/786066082), and builds OK on various Linux/Mac platforms (https://github.com/mkoeppe/sage/actions/runs/140062141).

On `homebrew-macos-python3_xcode-nokegonly-minimal`, a timeout that I'm not sure I have seen before, probably unrelated (https://github.com/mkoeppe/sage/runs/785733377), 

```
sage -t src/sage/geometry/cone.py  # Timed out
```




---

archive/issue_comments_420213.json:
```json
{
    "body": "Ready for review",
    "created_at": "2020-06-19T17:57:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29622#issuecomment-420213",
    "user": "https://github.com/mkoeppe"
}
```

Ready for review



---

archive/issue_comments_420214.json:
```json
{
    "body": "Is there any way to check the maximum dimension one the palp command is supposed to take? I think I may have bungled my gentoo ebuild by trying to be smarter with it. I have doctest failures that on further scrutiny probably shouldn't be there\n\n```\nsage -t --long --warn-long 109.6 /usr/lib/python3.7/site-packages/sage/geometry/lattice_polytope.py\n**********************************************************************\nFile \"/usr/lib/python3.7/site-packages/sage/geometry/lattice_polytope.py\", line 3832, in sage.geometry.lattice_polytope.LatticePolytopeClass.poly_x\nFailed example:\n    BIG.poly_x(\"e\")      # possibly different output depending on your system\nExpected:\n    Traceback (most recent call last):\n    ...\n    ValueError: Error executing 'poly.x -fe' for the given polytope!\n    Output:\n    Please increase POLY_Dmax to at least 7\nGot:\n    '128 7  Vertices of P-dual <-> Equations of P\\n  -1  -1  -1  -1  -1  -1   1\\n   1  -1  -1  -1  -1  -1   1\\n  -1  -1  -1  -1  -1   1   1\\n   1  -1  -1  -1  -1   1   1\\n  -1  -1  -1  -1   1  -1   1\\n   1  -1  -1  -1   1  -1   1\\n  -1  -1  -1  -1   1   1   1\\n   1  -1  -1  -1   1   1   1\\n  -1  -1  -1   1  -1  -1   1\\n   1  -1  -1   1  -1  -1   1\\n  -1  -1  -1   1  -1   1   1\\n   1  -1  -1   1  -1   1   1\\n  -1  -1  -1   1   1  -1   1\\n   1  -1  -1   1   1  -1   1\\n  -1  -1  -1   1   1   1   1\\n   1  -1  -1   1   1   1   1\\n  -1  -1   1  -1  -1  -1   1\\n   1  -1   1  -1  -1  -1   1\\n  -1  -1   1  -1  -1   1   1\\n   1  -1   1  -1  -1   1   1\\n  -1  -1   1  -1   1  -1   1\\n   1  -1   1  -1   1  -1   1\\n  -1  -1   1  -1   1   1   1\\n   1  -1   1  -1   1   1   1\\n  -1  -1   1   1  -1  -1   1\\n   1  -1   1   1  -1  -1   1\\n  -1  -1   1   1  -1   1   1\\n   1  -1   1   1  -1   1   1\\n  -1  -1   1   1   1  -1   1\\n   1  -1   1   1   1  -1   1\\n  -1  -1   1   1   1   1   1\\n   1  -1   1   1   1   1   1\\n  -1   1  -1  -1  -1  -1   1\\n   1   1  -1  -1  -1  -1   1\\n  -1   1  -1  -1  -1   1   1\\n   1   1  -1  -1  -1   1   1\\n  -1   1  -1  -1   1  -1   1\\n   1   1  -1  -1   1  -1   1\\n  -1   1  -1  -1   1   1   1\\n   1   1  -1  -1   1   1   1\\n  -1   1  -1   1  -1  -1   1\\n   1   1  -1   1  -1  -1   1\\n  -1   1  -1   1  -1   1   1\\n   1   1  -1   1  -1   1   1\\n  -1   1  -1   1   1  -1   1\\n   1   1  -1   1   1  -1   1\\n  -1   1  -1   1   1   1   1\\n   1   1  -1   1   1   1   1\\n  -1   1   1  -1  -1  -1   1\\n   1   1   1  -1  -1  -1   1\\n  -1   1   1  -1  -1   1   1\\n   1   1   1  -1  -1   1   1\\n  -1   1   1  -1   1  -1   1\\n   1   1   1  -1   1  -1   1\\n  -1   1   1  -1   1   1   1\\n   1   1   1  -1   1   1   1\\n  -1   1   1   1  -1  -1   1\\n   1   1   1   1  -1  -1   1\\n  -1   1   1   1  -1   1   1\\n   1   1   1   1  -1   1   1\\n  -1   1   1   1   1  -1   1\\n   1   1   1   1   1  -1   1\\n  -1   1   1   1   1   1   1\\n   1   1   1   1   1   1   1\\n  -1  -1  -1  -1  -1  -1  -1\\n   1  -1  -1  -1  -1  -1  -1\\n  -1  -1  -1  -1  -1   1  -1\\n   1  -1  -1  -1  -1   1  -1\\n  -1  -1  -1  -1   1  -1  -1\\n   1  -1  -1  -1   1  -1  -1\\n  -1  -1  -1  -1   1   1  -1\\n   1  -1  -1  -1   1   1  -1\\n  -1  -1  -1   1  -1  -1  -1\\n   1  -1  -1   1  -1  -1  -1\\n  -1  -1  -1   1  -1   1  -1\\n   1  -1  -1   1  -1   1  -1\\n  -1  -1  -1   1   1  -1  -1\\n   1  -1  -1   1   1  -1  -1\\n  -1  -1  -1   1   1   1  -1\\n   1  -1  -1   1   1   1  -1\\n  -1  -1   1  -1  -1  -1  -1\\n   1  -1   1  -1  -1  -1  -1\\n  -1  -1   1  -1  -1   1  -1\\n   1  -1   1  -1  -1   1  -1\\n  -1  -1   1  -1   1  -1  -1\\n   1  -1   1  -1   1  -1  -1\\n  -1  -1   1  -1   1   1  -1\\n   1  -1   1  -1   1   1  -1\\n  -1  -1   1   1  -1  -1  -1\\n   1  -1   1   1  -1  -1  -1\\n  -1  -1   1   1  -1   1  -1\\n   1  -1   1   1  -1   1  -1\\n  -1  -1   1   1   1  -1  -1\\n   1  -1   1   1   1  -1  -1\\n  -1  -1   1   1   1   1  -1\\n   1  -1   1   1   1   1  -1\\n  -1   1  -1  -1  -1  -1  -1\\n   1   1  -1  -1  -1  -1  -1\\n  -1   1  -1  -1  -1   1  -1\\n   1   1  -1  -1  -1   1  -1\\n  -1   1  -1  -1   1  -1  -1\\n   1   1  -1  -1   1  -1  -1\\n  -1   1  -1  -1   1   1  -1\\n   1   1  -1  -1   1   1  -1\\n  -1   1  -1   1  -1  -1  -1\\n   1   1  -1   1  -1  -1  -1\\n  -1   1  -1   1  -1   1  -1\\n   1   1  -1   1  -1   1  -1\\n  -1   1  -1   1   1  -1  -1\\n   1   1  -1   1   1  -1  -1\\n  -1   1  -1   1   1   1  -1\\n   1   1  -1   1   1   1  -1\\n  -1   1   1  -1  -1  -1  -1\\n   1   1   1  -1  -1  -1  -1\\n  -1   1   1  -1  -1   1  -1\\n   1   1   1  -1  -1   1  -1\\n  -1   1   1  -1   1  -1  -1\\n   1   1   1  -1   1  -1  -1\\n  -1   1   1  -1   1   1  -1\\n   1   1   1  -1   1   1  -1\\n  -1   1   1   1  -1  -1  -1\\n   1   1   1   1  -1  -1  -1\\n  -1   1   1   1  -1   1  -1\\n   1   1   1   1  -1   1  -1\\n  -1   1   1   1   1  -1  -1\\n   1   1   1   1   1  -1  -1\\n  -1   1   1   1   1   1  -1\\n   1   1   1   1   1   1  -1\\n'\n**********************************************************************\nFile \"/usr/lib/python3.7/site-packages/sage/geometry/lattice_polytope.py\", line 5759, in sage.geometry.lattice_polytope.set_palp_dimension\nFailed example:\n    p._palp(\"poly.x -fv\")\nExpected:\n    Traceback (most recent call last):\n    ...\n    ValueError: Error executing 'poly.x -fv' for the given polytope!\n    Output:\n    Please increase POLY_Dmax to at least 7\nGot:\n    '7 14  Vertices of P\\n    1    0    0    0    0    0    0   -1    0    0    0    0    0    0\\n    0    1    0    0    0    0    0    0   -1    0    0    0    0    0\\n    0    0    1    0    0    0    0    0    0   -1    0    0    0    0\\n    0    0    0    1    0    0    0    0    0    0   -1    0    0    0\\n    0    0    0    0    1    0    0    0    0    0    0   -1    0    0\\n    0    0    0    0    0    1    0    0    0    0    0    0   -1    0\\n    0    0    0    0    0    0    1    0    0    0    0    0    0   -1\\n'\n**********************************************************************\n```\n\nby default `POLY_Dmax` should be 6, but it looks like I got something higher.",
    "created_at": "2020-06-19T20:30:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29622#issuecomment-420214",
    "user": "https://github.com/kiwifb"
}
```

Is there any way to check the maximum dimension one the palp command is supposed to take? I think I may have bungled my gentoo ebuild by trying to be smarter with it. I have doctest failures that on further scrutiny probably shouldn't be there

```
sage -t --long --warn-long 109.6 /usr/lib/python3.7/site-packages/sage/geometry/lattice_polytope.py
**********************************************************************
File "/usr/lib/python3.7/site-packages/sage/geometry/lattice_polytope.py", line 3832, in sage.geometry.lattice_polytope.LatticePolytopeClass.poly_x
Failed example:
    BIG.poly_x("e")      # possibly different output depending on your system
Expected:
    Traceback (most recent call last):
    ...
    ValueError: Error executing 'poly.x -fe' for the given polytope!
    Output:
    Please increase POLY_Dmax to at least 7
Got:
    '128 7  Vertices of P-dual <-> Equations of P\n  -1  -1  -1  -1  -1  -1   1\n   1  -1  -1  -1  -1  -1   1\n  -1  -1  -1  -1  -1   1   1\n   1  -1  -1  -1  -1   1   1\n  -1  -1  -1  -1   1  -1   1\n   1  -1  -1  -1   1  -1   1\n  -1  -1  -1  -1   1   1   1\n   1  -1  -1  -1   1   1   1\n  -1  -1  -1   1  -1  -1   1\n   1  -1  -1   1  -1  -1   1\n  -1  -1  -1   1  -1   1   1\n   1  -1  -1   1  -1   1   1\n  -1  -1  -1   1   1  -1   1\n   1  -1  -1   1   1  -1   1\n  -1  -1  -1   1   1   1   1\n   1  -1  -1   1   1   1   1\n  -1  -1   1  -1  -1  -1   1\n   1  -1   1  -1  -1  -1   1\n  -1  -1   1  -1  -1   1   1\n   1  -1   1  -1  -1   1   1\n  -1  -1   1  -1   1  -1   1\n   1  -1   1  -1   1  -1   1\n  -1  -1   1  -1   1   1   1\n   1  -1   1  -1   1   1   1\n  -1  -1   1   1  -1  -1   1\n   1  -1   1   1  -1  -1   1\n  -1  -1   1   1  -1   1   1\n   1  -1   1   1  -1   1   1\n  -1  -1   1   1   1  -1   1\n   1  -1   1   1   1  -1   1\n  -1  -1   1   1   1   1   1\n   1  -1   1   1   1   1   1\n  -1   1  -1  -1  -1  -1   1\n   1   1  -1  -1  -1  -1   1\n  -1   1  -1  -1  -1   1   1\n   1   1  -1  -1  -1   1   1\n  -1   1  -1  -1   1  -1   1\n   1   1  -1  -1   1  -1   1\n  -1   1  -1  -1   1   1   1\n   1   1  -1  -1   1   1   1\n  -1   1  -1   1  -1  -1   1\n   1   1  -1   1  -1  -1   1\n  -1   1  -1   1  -1   1   1\n   1   1  -1   1  -1   1   1\n  -1   1  -1   1   1  -1   1\n   1   1  -1   1   1  -1   1\n  -1   1  -1   1   1   1   1\n   1   1  -1   1   1   1   1\n  -1   1   1  -1  -1  -1   1\n   1   1   1  -1  -1  -1   1\n  -1   1   1  -1  -1   1   1\n   1   1   1  -1  -1   1   1\n  -1   1   1  -1   1  -1   1\n   1   1   1  -1   1  -1   1\n  -1   1   1  -1   1   1   1\n   1   1   1  -1   1   1   1\n  -1   1   1   1  -1  -1   1\n   1   1   1   1  -1  -1   1\n  -1   1   1   1  -1   1   1\n   1   1   1   1  -1   1   1\n  -1   1   1   1   1  -1   1\n   1   1   1   1   1  -1   1\n  -1   1   1   1   1   1   1\n   1   1   1   1   1   1   1\n  -1  -1  -1  -1  -1  -1  -1\n   1  -1  -1  -1  -1  -1  -1\n  -1  -1  -1  -1  -1   1  -1\n   1  -1  -1  -1  -1   1  -1\n  -1  -1  -1  -1   1  -1  -1\n   1  -1  -1  -1   1  -1  -1\n  -1  -1  -1  -1   1   1  -1\n   1  -1  -1  -1   1   1  -1\n  -1  -1  -1   1  -1  -1  -1\n   1  -1  -1   1  -1  -1  -1\n  -1  -1  -1   1  -1   1  -1\n   1  -1  -1   1  -1   1  -1\n  -1  -1  -1   1   1  -1  -1\n   1  -1  -1   1   1  -1  -1\n  -1  -1  -1   1   1   1  -1\n   1  -1  -1   1   1   1  -1\n  -1  -1   1  -1  -1  -1  -1\n   1  -1   1  -1  -1  -1  -1\n  -1  -1   1  -1  -1   1  -1\n   1  -1   1  -1  -1   1  -1\n  -1  -1   1  -1   1  -1  -1\n   1  -1   1  -1   1  -1  -1\n  -1  -1   1  -1   1   1  -1\n   1  -1   1  -1   1   1  -1\n  -1  -1   1   1  -1  -1  -1\n   1  -1   1   1  -1  -1  -1\n  -1  -1   1   1  -1   1  -1\n   1  -1   1   1  -1   1  -1\n  -1  -1   1   1   1  -1  -1\n   1  -1   1   1   1  -1  -1\n  -1  -1   1   1   1   1  -1\n   1  -1   1   1   1   1  -1\n  -1   1  -1  -1  -1  -1  -1\n   1   1  -1  -1  -1  -1  -1\n  -1   1  -1  -1  -1   1  -1\n   1   1  -1  -1  -1   1  -1\n  -1   1  -1  -1   1  -1  -1\n   1   1  -1  -1   1  -1  -1\n  -1   1  -1  -1   1   1  -1\n   1   1  -1  -1   1   1  -1\n  -1   1  -1   1  -1  -1  -1\n   1   1  -1   1  -1  -1  -1\n  -1   1  -1   1  -1   1  -1\n   1   1  -1   1  -1   1  -1\n  -1   1  -1   1   1  -1  -1\n   1   1  -1   1   1  -1  -1\n  -1   1  -1   1   1   1  -1\n   1   1  -1   1   1   1  -1\n  -1   1   1  -1  -1  -1  -1\n   1   1   1  -1  -1  -1  -1\n  -1   1   1  -1  -1   1  -1\n   1   1   1  -1  -1   1  -1\n  -1   1   1  -1   1  -1  -1\n   1   1   1  -1   1  -1  -1\n  -1   1   1  -1   1   1  -1\n   1   1   1  -1   1   1  -1\n  -1   1   1   1  -1  -1  -1\n   1   1   1   1  -1  -1  -1\n  -1   1   1   1  -1   1  -1\n   1   1   1   1  -1   1  -1\n  -1   1   1   1   1  -1  -1\n   1   1   1   1   1  -1  -1\n  -1   1   1   1   1   1  -1\n   1   1   1   1   1   1  -1\n'
**********************************************************************
File "/usr/lib/python3.7/site-packages/sage/geometry/lattice_polytope.py", line 5759, in sage.geometry.lattice_polytope.set_palp_dimension
Failed example:
    p._palp("poly.x -fv")
Expected:
    Traceback (most recent call last):
    ...
    ValueError: Error executing 'poly.x -fv' for the given polytope!
    Output:
    Please increase POLY_Dmax to at least 7
Got:
    '7 14  Vertices of P\n    1    0    0    0    0    0    0   -1    0    0    0    0    0    0\n    0    1    0    0    0    0    0    0   -1    0    0    0    0    0\n    0    0    1    0    0    0    0    0    0   -1    0    0    0    0\n    0    0    0    1    0    0    0    0    0    0   -1    0    0    0\n    0    0    0    0    1    0    0    0    0    0    0   -1    0    0\n    0    0    0    0    0    1    0    0    0    0    0    0   -1    0\n    0    0    0    0    0    0    1    0    0    0    0    0    0   -1\n'
**********************************************************************
```

by default `POLY_Dmax` should be 6, but it looks like I got something higher.



---

archive/issue_comments_420215.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-06-19T21:08:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29622#issuecomment-420215",
    "user": "https://github.com/kiwifb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_420216.json:
```json
{
    "body": "Figured my issue. First time I was using a particular tool to repeat a build several times with small variation in gentoo - instead of my own homebrewed solution from years ago. And there was a couple of things the documentation wasn't clear about. Plus, there was probably a couple of changes in palp itself that were thwarting the way I was varying `POLY_Dmax`. I have things under control and much tighter now.\n\nLooks good to me.",
    "created_at": "2020-06-19T21:08:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29622#issuecomment-420216",
    "user": "https://github.com/kiwifb"
}
```

Figured my issue. First time I was using a particular tool to repeat a build several times with small variation in gentoo - instead of my own homebrewed solution from years ago. And there was a couple of things the documentation wasn't clear about. Plus, there was probably a couple of changes in palp itself that were thwarting the way I was varying `POLY_Dmax`. I have things under control and much tighter now.

Looks good to me.



---

archive/issue_comments_420217.json:
```json
{
    "body": "Thanks!",
    "created_at": "2020-06-19T21:14:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29622#issuecomment-420217",
    "user": "https://github.com/mkoeppe"
}
```

Thanks!



---

archive/issue_events_076488.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-06-23T22:17:45Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29622#event-76488"
}
```



---

archive/issue_comments_420218.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-06-23T22:17:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29622#issuecomment-420218",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
