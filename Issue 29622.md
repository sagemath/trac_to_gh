# Issue 29622: Update palp to 2.11 (for GCC 10 compatibility)

Issue created by migration from https://trac.sagemath.org/ticket/29859

Original creator: mkoeppe

Original creation time: 2020-06-14 19:20:49

CC:  @timokau fbissey slelievre dimpase mjo isuruf â€‹snark

(from #29456)


---

Comment by mkoeppe created at 2020-06-18 19:42:40

Tests run at https://github.com/mkoeppe/sage/actions/runs/140062141
----
New commits:


---

Comment by mkoeppe created at 2020-06-18 19:44:36

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2020-06-18 19:44:36

I have not checked whether all of the workarounds in `spkg-install` are still necessary with the newer version. 

Builds and tests OK on macOS; further tests are running on GH Actions (see above)


---

Comment by mkoeppe created at 2020-06-19 17:57:38

Builds OK on `cygwin-minimal` (https://github.com/mkoeppe/sage/runs/786324031), `cygwin-standard` (https://github.com/mkoeppe/sage/runs/786066082), and builds OK on various Linux/Mac platforms (https://github.com/mkoeppe/sage/actions/runs/140062141).

On `homebrew-macos-python3_xcode-nokegonly-minimal`, a timeout that I'm not sure I have seen before, probably unrelated (https://github.com/mkoeppe/sage/runs/785733377), 

```
sage -t src/sage/geometry/cone.py  # Timed out
```



---

Comment by mkoeppe created at 2020-06-19 17:57:52

Ready for review


---

Comment by fbissey created at 2020-06-19 20:30:09

Is there any way to check the maximum dimension one the palp command is supposed to take? I think I may have bungled my gentoo ebuild by trying to be smarter with it. I have doctest failures that on further scrutiny probably shouldn't be there

```
sage -t --long --warn-long 109.6 /usr/lib/python3.7/site-packages/sage/geometry/lattice_polytope.py
**********************************************************************
File "/usr/lib/python3.7/site-packages/sage/geometry/lattice_polytope.py", line 3832, in sage.geometry.lattice_polytope.LatticePolytopeClass.poly_x
Failed example:
    BIG.poly_x("e")      # possibly different output depending on your system
Expected:
    Traceback (most recent call last):
    ...
    ValueError: Error executing 'poly.x -fe' for the given polytope!
    Output:
    Please increase POLY_Dmax to at least 7
Got:
    '128 7  Vertices of P-dual <-> Equations of P\n  -1  -1  -1  -1  -1  -1   1\n   1  -1  -1  -1  -1  -1   1\n  -1  -1  -1  -1  -1   1   1\n   1  -1  -1  -1  -1   1   1\n  -1  -1  -1  -1   1  -1   1\n   1  -1  -1  -1   1  -1   1\n  -1  -1  -1  -1   1   1   1\n   1  -1  -1  -1   1   1   1\n  -1  -1  -1   1  -1  -1   1\n   1  -1  -1   1  -1  -1   1\n  -1  -1  -1   1  -1   1   1\n   1  -1  -1   1  -1   1   1\n  -1  -1  -1   1   1  -1   1\n   1  -1  -1   1   1  -1   1\n  -1  -1  -1   1   1   1   1\n   1  -1  -1   1   1   1   1\n  -1  -1   1  -1  -1  -1   1\n   1  -1   1  -1  -1  -1   1\n  -1  -1   1  -1  -1   1   1\n   1  -1   1  -1  -1   1   1\n  -1  -1   1  -1   1  -1   1\n   1  -1   1  -1   1  -1   1\n  -1  -1   1  -1   1   1   1\n   1  -1   1  -1   1   1   1\n  -1  -1   1   1  -1  -1   1\n   1  -1   1   1  -1  -1   1\n  -1  -1   1   1  -1   1   1\n   1  -1   1   1  -1   1   1\n  -1  -1   1   1   1  -1   1\n   1  -1   1   1   1  -1   1\n  -1  -1   1   1   1   1   1\n   1  -1   1   1   1   1   1\n  -1   1  -1  -1  -1  -1   1\n   1   1  -1  -1  -1  -1   1\n  -1   1  -1  -1  -1   1   1\n   1   1  -1  -1  -1   1   1\n  -1   1  -1  -1   1  -1   1\n   1   1  -1  -1   1  -1   1\n  -1   1  -1  -1   1   1   1\n   1   1  -1  -1   1   1   1\n  -1   1  -1   1  -1  -1   1\n   1   1  -1   1  -1  -1   1\n  -1   1  -1   1  -1   1   1\n   1   1  -1   1  -1   1   1\n  -1   1  -1   1   1  -1   1\n   1   1  -1   1   1  -1   1\n  -1   1  -1   1   1   1   1\n   1   1  -1   1   1   1   1\n  -1   1   1  -1  -1  -1   1\n   1   1   1  -1  -1  -1   1\n  -1   1   1  -1  -1   1   1\n   1   1   1  -1  -1   1   1\n  -1   1   1  -1   1  -1   1\n   1   1   1  -1   1  -1   1\n  -1   1   1  -1   1   1   1\n   1   1   1  -1   1   1   1\n  -1   1   1   1  -1  -1   1\n   1   1   1   1  -1  -1   1\n  -1   1   1   1  -1   1   1\n   1   1   1   1  -1   1   1\n  -1   1   1   1   1  -1   1\n   1   1   1   1   1  -1   1\n  -1   1   1   1   1   1   1\n   1   1   1   1   1   1   1\n  -1  -1  -1  -1  -1  -1  -1\n   1  -1  -1  -1  -1  -1  -1\n  -1  -1  -1  -1  -1   1  -1\n   1  -1  -1  -1  -1   1  -1\n  -1  -1  -1  -1   1  -1  -1\n   1  -1  -1  -1   1  -1  -1\n  -1  -1  -1  -1   1   1  -1\n   1  -1  -1  -1   1   1  -1\n  -1  -1  -1   1  -1  -1  -1\n   1  -1  -1   1  -1  -1  -1\n  -1  -1  -1   1  -1   1  -1\n   1  -1  -1   1  -1   1  -1\n  -1  -1  -1   1   1  -1  -1\n   1  -1  -1   1   1  -1  -1\n  -1  -1  -1   1   1   1  -1\n   1  -1  -1   1   1   1  -1\n  -1  -1   1  -1  -1  -1  -1\n   1  -1   1  -1  -1  -1  -1\n  -1  -1   1  -1  -1   1  -1\n   1  -1   1  -1  -1   1  -1\n  -1  -1   1  -1   1  -1  -1\n   1  -1   1  -1   1  -1  -1\n  -1  -1   1  -1   1   1  -1\n   1  -1   1  -1   1   1  -1\n  -1  -1   1   1  -1  -1  -1\n   1  -1   1   1  -1  -1  -1\n  -1  -1   1   1  -1   1  -1\n   1  -1   1   1  -1   1  -1\n  -1  -1   1   1   1  -1  -1\n   1  -1   1   1   1  -1  -1\n  -1  -1   1   1   1   1  -1\n   1  -1   1   1   1   1  -1\n  -1   1  -1  -1  -1  -1  -1\n   1   1  -1  -1  -1  -1  -1\n  -1   1  -1  -1  -1   1  -1\n   1   1  -1  -1  -1   1  -1\n  -1   1  -1  -1   1  -1  -1\n   1   1  -1  -1   1  -1  -1\n  -1   1  -1  -1   1   1  -1\n   1   1  -1  -1   1   1  -1\n  -1   1  -1   1  -1  -1  -1\n   1   1  -1   1  -1  -1  -1\n  -1   1  -1   1  -1   1  -1\n   1   1  -1   1  -1   1  -1\n  -1   1  -1   1   1  -1  -1\n   1   1  -1   1   1  -1  -1\n  -1   1  -1   1   1   1  -1\n   1   1  -1   1   1   1  -1\n  -1   1   1  -1  -1  -1  -1\n   1   1   1  -1  -1  -1  -1\n  -1   1   1  -1  -1   1  -1\n   1   1   1  -1  -1   1  -1\n  -1   1   1  -1   1  -1  -1\n   1   1   1  -1   1  -1  -1\n  -1   1   1  -1   1   1  -1\n   1   1   1  -1   1   1  -1\n  -1   1   1   1  -1  -1  -1\n   1   1   1   1  -1  -1  -1\n  -1   1   1   1  -1   1  -1\n   1   1   1   1  -1   1  -1\n  -1   1   1   1   1  -1  -1\n   1   1   1   1   1  -1  -1\n  -1   1   1   1   1   1  -1\n   1   1   1   1   1   1  -1\n'
**********************************************************************
File "/usr/lib/python3.7/site-packages/sage/geometry/lattice_polytope.py", line 5759, in sage.geometry.lattice_polytope.set_palp_dimension
Failed example:
    p._palp("poly.x -fv")
Expected:
    Traceback (most recent call last):
    ...
    ValueError: Error executing 'poly.x -fv' for the given polytope!
    Output:
    Please increase POLY_Dmax to at least 7
Got:
    '7 14  Vertices of P\n    1    0    0    0    0    0    0   -1    0    0    0    0    0    0\n    0    1    0    0    0    0    0    0   -1    0    0    0    0    0\n    0    0    1    0    0    0    0    0    0   -1    0    0    0    0\n    0    0    0    1    0    0    0    0    0    0   -1    0    0    0\n    0    0    0    0    1    0    0    0    0    0    0   -1    0    0\n    0    0    0    0    0    1    0    0    0    0    0    0   -1    0\n    0    0    0    0    0    0    1    0    0    0    0    0    0   -1\n'
**********************************************************************
```

by default `POLY_Dmax` should be 6, but it looks like I got something higher.


---

Comment by fbissey created at 2020-06-19 21:08:59

Changing status from needs_review to positive_review.


---

Comment by fbissey created at 2020-06-19 21:08:59

Figured my issue. First time I was using a particular tool to repeat a build several times with small variation in gentoo - instead of my own homebrewed solution from years ago. And there was a couple of things the documentation wasn't clear about. Plus, there was probably a couple of changes in palp itself that were thwarting the way I was varying `POLY_Dmax`. I have things under control and much tighter now.

Looks good to me.


---

Comment by mkoeppe created at 2020-06-19 21:14:59

Thanks!


---

Comment by vbraun created at 2020-06-23 22:17:45

Resolution: fixed
