# Issue 12189: Fix normalization in cohomology ring of orbifold toric varieties

Issue created by migration from https://trac.sagemath.org/ticket/12361

Original creator: vbraun

Original creation time: 2012-01-26 03:51:15

Assignee: AlexGhitza

CC:  novoselt davideklund

For simplicial toric varieties, the rational cohomology ring and the ratironal Chow group are isomorphic. So if all normalizations are correct, then one should be able to do intersection computations in the cohomology ring. This patch fixes the `volume_class()` and the constructor of cohomology cycles from cones to make everything work.


---

Attachment

Initial patch


---

Comment by vbraun created at 2012-01-26 04:01:51

Changing status from new to needs_review.


---

Comment by novoselt created at 2012-03-23 15:28:26

The patchbot complains about added whitespace! Looking at the actual code...


---

Comment by novoselt created at 2012-03-23 16:28:23

That's a really great expansion of the documentation!

I think I caught some typos:
 * In `toric_variety` line 213 should be "many quantities of interest" without "s" on the end.
 * On line 1977 "It gets tricky none of the maximal cones is smooth." does not sound right, some words or punctuation sighs are missing.


---

Comment by novoselt created at 2012-03-23 21:33:14

Changing status from needs_review to needs_work.


---

Comment by novoselt created at 2012-03-23 21:33:14

OK, other than the above looks good!


---

Comment by davideklund created at 2012-03-28 20:03:30

Hi. I looked at this and I agree that it looks good.

One thing:

On line 215 of toric_variety.py it says "For toric varieties with at most orbifold singularities, the rational cohomology ring `H(X,\QQ)` and the rational Chow ring `H(X,\QQ)` are isomorphic."

It's a bit confusing that they are both denoted by H(X,\QQ). Maybe A(X,\QQ) could be used for the Chow ring. Or `H^*(X,\QQ)` for cohomology and `H_*(X,\QQ)` for the Chow ring (if intersection homology and the Chow ring were already identified somehow).


---

Comment by vbraun created at 2012-03-28 20:34:18

Oh yes good catch I meant to write `A(X,\QQ)` of course.


---

Comment by vbraun created at 2012-03-29 19:59:51

Changing status from needs_work to needs_review.


---

Comment by vbraun created at 2012-03-29 19:59:51

Fixed!


---

Comment by novoselt created at 2012-03-29 21:31:23

Comments 2&3 are still applicable and the patchbot complains ;-)


---

Comment by novoselt created at 2012-03-29 21:31:23

Changing status from needs_review to needs_work.


---

Attachment

Updated patch


---

Comment by vbraun created at 2012-03-30 10:20:10

I've improved the docstrings.

As for the whitespace, I think this is a non-issue. There was some discussion on sage-devel and the consensus seems to be that its not worth the effort. Its a button press away (either with emacs or with the mercurial checkfiles plugin) to strip all trailing whitespace, but that would just break every patch we currently have. Mercurial tells me that there are 170 places in toric_varieties.py with superfluous spaces, so a few more or less doesn't matter. I'd rather not spend an hour fixing all patches that I currently have just to make the whitespace plugin happy.


---

Comment by vbraun created at 2012-03-30 10:20:18

Changing status from needs_work to needs_review.


---

Comment by novoselt created at 2012-03-30 15:30:29

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2012-05-06 12:14:21

Resolution: fixed
