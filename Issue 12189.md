# Issue 12189: Fix normalization in cohomology ring of orbifold toric varieties

archive/issues_012189.json:
```json
{
    "body": "Assignee: AlexGhitza\n\nCC:  novoselt davideklund\n\nFor simplicial toric varieties, the rational cohomology ring and the ratironal Chow group are isomorphic. So if all normalizations are correct, then one should be able to do intersection computations in the cohomology ring. This patch fixes the `volume_class()` and the constructor of cohomology cycles from cones to make everything work.\n\nIssue created by migration from https://trac.sagemath.org/ticket/12361\n\n",
    "created_at": "2012-01-26T03:51:15Z",
    "labels": [
        "algebraic geometry",
        "major",
        "bug"
    ],
    "title": "Fix normalization in cohomology ring of orbifold toric varieties",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12189",
    "user": "vbraun"
}
```
Assignee: AlexGhitza

CC:  novoselt davideklund

For simplicial toric varieties, the rational cohomology ring and the ratironal Chow group are isomorphic. So if all normalizations are correct, then one should be able to do intersection computations in the cohomology ring. This patch fixes the `volume_class()` and the constructor of cohomology cycles from cones to make everything work.

Issue created by migration from https://trac.sagemath.org/ticket/12361





---

archive/issue_comments_141992.json:
```json
{
    "body": "Attachment\n\nInitial patch",
    "created_at": "2012-01-26T03:59:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12189#issuecomment-141992",
    "user": "vbraun"
}
```

Attachment

Initial patch



---

archive/issue_comments_141993.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-01-26T04:01:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12189#issuecomment-141993",
    "user": "vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_141994.json:
```json
{
    "body": "The patchbot complains about added whitespace! Looking at the actual code...",
    "created_at": "2012-03-23T15:28:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12189#issuecomment-141994",
    "user": "novoselt"
}
```

The patchbot complains about added whitespace! Looking at the actual code...



---

archive/issue_comments_141995.json:
```json
{
    "body": "That's a really great expansion of the documentation!\n\nI think I caught some typos:\n* In `toric_variety` line 213 should be \"many quantities of interest\" without \"s\" on the end.\n* On line 1977 \"It gets tricky none of the maximal cones is smooth.\" does not sound right, some words or punctuation sighs are missing.",
    "created_at": "2012-03-23T16:28:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12189#issuecomment-141995",
    "user": "novoselt"
}
```

That's a really great expansion of the documentation!

I think I caught some typos:
* In `toric_variety` line 213 should be "many quantities of interest" without "s" on the end.
* On line 1977 "It gets tricky none of the maximal cones is smooth." does not sound right, some words or punctuation sighs are missing.



---

archive/issue_comments_141996.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-03-23T21:33:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12189#issuecomment-141996",
    "user": "novoselt"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_141997.json:
```json
{
    "body": "OK, other than the above looks good!",
    "created_at": "2012-03-23T21:33:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12189#issuecomment-141997",
    "user": "novoselt"
}
```

OK, other than the above looks good!



---

archive/issue_comments_141998.json:
```json
{
    "body": "Hi. I looked at this and I agree that it looks good.\n\nOne thing:\n\nOn line 215 of toric_variety.py it says \"For toric varieties with at most orbifold singularities, the rational cohomology ring `H(X,\\QQ)` and the rational Chow ring `H(X,\\QQ)` are isomorphic.\"\n\nIt's a bit confusing that they are both denoted by H(X,\\QQ). Maybe A(X,\\QQ) could be used for the Chow ring. Or `H^*(X,\\QQ)` for cohomology and `H_*(X,\\QQ)` for the Chow ring (if intersection homology and the Chow ring were already identified somehow).",
    "created_at": "2012-03-28T20:03:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12189#issuecomment-141998",
    "user": "davideklund"
}
```

Hi. I looked at this and I agree that it looks good.

One thing:

On line 215 of toric_variety.py it says "For toric varieties with at most orbifold singularities, the rational cohomology ring `H(X,\QQ)` and the rational Chow ring `H(X,\QQ)` are isomorphic."

It's a bit confusing that they are both denoted by H(X,\QQ). Maybe A(X,\QQ) could be used for the Chow ring. Or `H^*(X,\QQ)` for cohomology and `H_*(X,\QQ)` for the Chow ring (if intersection homology and the Chow ring were already identified somehow).



---

archive/issue_comments_141999.json:
```json
{
    "body": "Oh yes good catch I meant to write `A(X,\\QQ)` of course.",
    "created_at": "2012-03-28T20:34:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12189#issuecomment-141999",
    "user": "vbraun"
}
```

Oh yes good catch I meant to write `A(X,\QQ)` of course.



---

archive/issue_comments_142000.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-03-29T19:59:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12189#issuecomment-142000",
    "user": "vbraun"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_142001.json:
```json
{
    "body": "Fixed!",
    "created_at": "2012-03-29T19:59:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12189#issuecomment-142001",
    "user": "vbraun"
}
```

Fixed!



---

archive/issue_comments_142002.json:
```json
{
    "body": "Comments 2&3 are still applicable and the patchbot complains ;-)",
    "created_at": "2012-03-29T21:31:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12189#issuecomment-142002",
    "user": "novoselt"
}
```

Comments 2&3 are still applicable and the patchbot complains ;-)



---

archive/issue_comments_142003.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-03-29T21:31:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12189#issuecomment-142003",
    "user": "novoselt"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_142004.json:
```json
{
    "body": "Attachment\n\nUpdated patch",
    "created_at": "2012-03-30T10:15:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12189#issuecomment-142004",
    "user": "vbraun"
}
```

Attachment

Updated patch



---

archive/issue_comments_142005.json:
```json
{
    "body": "I've improved the docstrings.\n\nAs for the whitespace, I think this is a non-issue. There was some discussion on sage-devel and the consensus seems to be that its not worth the effort. Its a button press away (either with emacs or with the mercurial checkfiles plugin) to strip all trailing whitespace, but that would just break every patch we currently have. Mercurial tells me that there are 170 places in toric_varieties.py with superfluous spaces, so a few more or less doesn't matter. I'd rather not spend an hour fixing all patches that I currently have just to make the whitespace plugin happy.",
    "created_at": "2012-03-30T10:20:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12189#issuecomment-142005",
    "user": "vbraun"
}
```

I've improved the docstrings.

As for the whitespace, I think this is a non-issue. There was some discussion on sage-devel and the consensus seems to be that its not worth the effort. Its a button press away (either with emacs or with the mercurial checkfiles plugin) to strip all trailing whitespace, but that would just break every patch we currently have. Mercurial tells me that there are 170 places in toric_varieties.py with superfluous spaces, so a few more or less doesn't matter. I'd rather not spend an hour fixing all patches that I currently have just to make the whitespace plugin happy.



---

archive/issue_comments_142006.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-03-30T10:20:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12189#issuecomment-142006",
    "user": "vbraun"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_142007.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-03-30T15:30:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12189#issuecomment-142007",
    "user": "novoselt"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_142008.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-05-06T12:14:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12189",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12189#issuecomment-142008",
    "user": "jdemeyer"
}
```

Resolution: fixed
