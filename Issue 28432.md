# Issue 28432: Unnecessary coordinate check while initializing an integrated curve

archive/issues_028432.json:
```json
{
    "body": "CC:  karimvanaelst\n\nKeywords: integrated_curve, geodesic\n\nIn Sage 8.9, we have:\n\n```\nsage: E.<r,phi> = EuclideanSpace(coordinates='polar')\nsage: p = E((1, 0))  # the initial point\nsage: v = E.tangent_space(p)((2, 1))  # the initial vector\nsage: t = var('t')\nsage: c = E.integrated_geodesic(E.metric(), (t, 0, 10), v)\n...\nValueError: initial point should be in the domain of the chart\n```\n\nNow, the initial point `p` does lie in the domain of the chart:\n\n```\nsage: E.default_chart()(p)\n(1, 0)\n```\n\nIndeed, `0` is a perfectly valid value for the polar coordinate `phi`:\n\n```\nsage: E.default_chart().coord_range()\nr: (0, +oo); phi: [0, 2*pi] (periodic)\n```\n\nThe above error turns out to result from a too strict and unnecessary coordinate check performed in `IntegratedCurve.__init__()`. This check is removed here. \n\nIssue created by migration from https://trac.sagemath.org/ticket/28669\n\n",
    "created_at": "2019-10-29T15:05:33Z",
    "labels": [
        "geometry",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.0",
    "title": "Unnecessary coordinate check while initializing an integrated curve",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28432",
    "user": "egourgoulhon"
}
```
CC:  karimvanaelst

Keywords: integrated_curve, geodesic

In Sage 8.9, we have:

```
sage: E.<r,phi> = EuclideanSpace(coordinates='polar')
sage: p = E((1, 0))  # the initial point
sage: v = E.tangent_space(p)((2, 1))  # the initial vector
sage: t = var('t')
sage: c = E.integrated_geodesic(E.metric(), (t, 0, 10), v)
...
ValueError: initial point should be in the domain of the chart
```

Now, the initial point `p` does lie in the domain of the chart:

```
sage: E.default_chart()(p)
(1, 0)
```

Indeed, `0` is a perfectly valid value for the polar coordinate `phi`:

```
sage: E.default_chart().coord_range()
r: (0, +oo); phi: [0, 2*pi] (periodic)
```

The above error turns out to result from a too strict and unnecessary coordinate check performed in `IntegratedCurve.__init__()`. This check is removed here. 

Issue created by migration from https://trac.sagemath.org/ticket/28669





---

archive/issue_comments_401640.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-10-29T15:07:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28432",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28432#issuecomment-401640",
    "user": "egourgoulhon"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_401641.json:
```json
{
    "body": "New commits:",
    "created_at": "2019-10-29T15:07:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28432",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28432#issuecomment-401641",
    "user": "egourgoulhon"
}
```

New commits:



---

archive/issue_comments_401642.json:
```json
{
    "body": "please add a doctest",
    "created_at": "2019-10-29T16:32:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28432",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28432#issuecomment-401642",
    "user": "chapoton"
}
```

please add a doctest



---

archive/issue_comments_401643.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-10-29T17:51:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28432",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28432#issuecomment-401643",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_401644.json:
```json
{
    "body": "Replying to [comment:2 chapoton]:\n> please add a doctest\nDone in the above commit.",
    "created_at": "2019-10-29T17:52:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28432",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28432#issuecomment-401644",
    "user": "egourgoulhon"
}
```

Replying to [comment:2 chapoton]:
> please add a doctest
Done in the above commit.



---

archive/issue_comments_401645.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-11-05T10:43:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28432",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28432#issuecomment-401645",
    "user": "karimvanaelst"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_401646.json:
```json
{
    "body": "Replying to [comment:4 egourgoulhon]:\n> Replying to [comment:2 chapoton]:\n> > please add a doctest\n> Done in the above commit.\n\nTicket seems ready to be closed.",
    "created_at": "2019-11-05T10:43:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28432",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28432#issuecomment-401646",
    "user": "karimvanaelst"
}
```

Replying to [comment:4 egourgoulhon]:
> Replying to [comment:2 chapoton]:
> > please add a doctest
> Done in the above commit.

Ticket seems ready to be closed.



---

archive/issue_comments_401647.json:
```json
{
    "body": "Thanks for the review!",
    "created_at": "2019-11-05T12:27:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28432",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28432#issuecomment-401647",
    "user": "egourgoulhon"
}
```

Thanks for the review!



---

archive/issue_comments_401648.json:
```json
{
    "body": "Reviewer name is missing",
    "created_at": "2019-11-05T22:49:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28432",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28432#issuecomment-401648",
    "user": "vbraun"
}
```

Reviewer name is missing



---

archive/issue_comments_401649.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2019-11-05T22:49:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28432",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28432#issuecomment-401649",
    "user": "vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_401650.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2019-11-06T08:31:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28432",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28432#issuecomment-401650",
    "user": "karimvanaelst"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_401651.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-11-08T20:31:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28432",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28432#issuecomment-401651",
    "user": "vbraun"
}
```

Resolution: fixed
