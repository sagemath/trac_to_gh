# Issue 28432: Unnecessary coordinate check while initializing an integrated curve

Issue created by migration from https://trac.sagemath.org/ticket/28669

Original creator: egourgoulhon

Original creation time: 2019-10-29 15:05:33

CC:  karimvanaelst

Keywords: integrated_curve, geodesic

In Sage 8.9, we have:

```
sage: E.<r,phi> = EuclideanSpace(coordinates='polar')
sage: p = E((1, 0))  # the initial point
sage: v = E.tangent_space(p)((2, 1))  # the initial vector
sage: t = var('t')
sage: c = E.integrated_geodesic(E.metric(), (t, 0, 10), v)
...
ValueError: initial point should be in the domain of the chart
```

Now, the initial point `p` does lie in the domain of the chart:

```
sage: E.default_chart()(p)
(1, 0)
```

Indeed, `0` is a perfectly valid value for the polar coordinate `phi`:

```
sage: E.default_chart().coord_range()
r: (0, +oo); phi: [0, 2*pi] (periodic)
```

The above error turns out to result from a too strict and unnecessary coordinate check performed in `IntegratedCurve.__init__()`. This check is removed here. 


---

Comment by egourgoulhon created at 2019-10-29 15:07:16

Changing status from new to needs_review.


---

Comment by egourgoulhon created at 2019-10-29 15:07:16

New commits:


---

Comment by chapoton created at 2019-10-29 16:32:17

please add a doctest


---

Comment by git created at 2019-10-29 17:51:36

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by egourgoulhon created at 2019-10-29 17:52:17

Replying to [comment:2 chapoton]:
> please add a doctest
Done in the above commit.


---

Comment by karimvanaelst created at 2019-11-05 10:43:17

Changing status from needs_review to positive_review.


---

Comment by karimvanaelst created at 2019-11-05 10:43:17

Replying to [comment:4 egourgoulhon]:
> Replying to [comment:2 chapoton]:
> > please add a doctest
> Done in the above commit.

Ticket seems ready to be closed.


---

Comment by egourgoulhon created at 2019-11-05 12:27:24

Thanks for the review!


---

Comment by vbraun created at 2019-11-05 22:49:48

Reviewer name is missing


---

Comment by vbraun created at 2019-11-05 22:49:48

Changing status from positive_review to needs_work.


---

Comment by karimvanaelst created at 2019-11-06 08:31:21

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2019-11-08 20:31:46

Resolution: fixed
