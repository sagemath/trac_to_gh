# Issue 33429: Mutable polyhedron saves incorrect Vrepresentation

Issue created by migration from https://trac.sagemath.org/ticket/33666

Original creator: @kliem

Original creation time: 2022-04-10 08:15:59

CC:  mkoeppe


```
sage: P = polytopes.cube()
sage: Q = 1/2*P
sage: parent = P.parent()
sage: R = parent._element_constructor_(Q, mutable=True)
sage: R
/home/jonathan/Applications/sage/local/lib/python3.8/site-packages/sage/repl/rich_output/display_manager.py:608: RichReprWarning: Exception in _rich_repr_ while displaying object: no conversion of this rational to integer
  warnings.warn(
The empty polyhedron in ZZ^3
sage: R.Hrepresentation()
(An inequality (0, 0, -2) x + 1 >= 0,
 An inequality (0, -2, 0) x + 1 >= 0,
 An inequality (-2, 0, 0) x + 1 >= 0,
 An inequality (2, 0, 0) x + 1 >= 0,
 An inequality (0, 0, 2) x + 1 >= 0,
 An inequality (0, 2, 0) x + 1 >= 0)
sage: R.Vrepresentation()
[]
```


While obtaining the Vrepresentation from the backend, a `TypeError` is not handled properly. We end up with a broken object, which isn't communitaced well to the user.


---

Comment by @kliem created at 2022-04-10 09:33:53

Changing status from new to needs_review.


---

Comment by @kliem created at 2022-04-10 09:34:44

New commits:


---

Comment by mkoeppe created at 2022-04-10 16:56:00

Changing status from needs_review to needs_work.


---

Comment by mkoeppe created at 2022-04-10 16:56:00

Patchbot says

```
sage -t --long --random-seed=33333237385512314714344203620105943909 src/sage/geometry/polyhedron/constructor.py
**********************************************************************
File "src/sage/geometry/polyhedron/constructor.py", line 522, in sage.geometry.polyhedron.constructor.?
Failed example:
    Q = Polyhedron(vertices=[(1, 2, 3), (1, 3, 2), (2, 1, 3),
                             (2, 3, 1), (3, 1, 2), (3, 2, 1)],
                   rays=[[1, 1, 1]], lines=[[1, 2, 3]], backend='ppl',
                   base_ring=ZZ)
```



---

Comment by git created at 2022-04-11 06:10:55

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @kliem created at 2022-04-11 06:32:44

Changing status from needs_work to needs_review.


---

Comment by git created at 2022-04-11 08:55:09

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by mkoeppe created at 2022-04-11 16:37:17

Changing status from needs_review to positive_review.


---

Comment by @kliem created at 2022-04-11 16:51:49

Thank you.


---

Comment by mkoeppe created at 2022-04-11 16:59:58

Changing priority from major to critical.


---

Comment by mkoeppe created at 2022-04-19 21:07:57

Changing priority from critical to blocker.


---

Comment by vbraun created at 2022-04-21 21:07:18

Resolution: fixed
