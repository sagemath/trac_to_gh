# Issue 20413: Add is_polynomial and make_look_poly to projective morphism

Issue created by migration from Trac.

Original creator: rlmiller

Original creation time: 2016-05-21 21:37:55

Assignee: Rebecca Lauren Miller

CC:  bhutz

Added function to determine whether an equation is a polynomial or not by checking if it has a totally ramified fixed point. (is_polynomial)

Then used this function to create make_look_poly, which puts polynomials in the form     "x**n + a*x**(n-2) +...+c", where a and c are constants.

Needs more examples, specifically for errors.


---

Comment by rlmiller created at 2016-05-21 21:40:09

Changing assignee from Rebecca Lauren Miller to rlmiller.


---

Comment by rlmiller created at 2016-05-21 21:40:09

New commits:


---

Comment by rlmiller created at 2016-05-21 21:40:09

Changing priority from major to minor.


---

Comment by rlmiller created at 2016-05-21 21:40:25

Changing status from new to needs_review.


---

Comment by bhutz created at 2016-05-22 20:04:20

Changing status from needs_review to needs_work.


---

Comment by bhutz created at 2016-05-22 20:04:20

- The documentation does not build


```
[schemes  ] /home/ben/sage/sage-test/local/lib/python2.7/site-packages/sage/schemes/projective/projective_morphism.py:docstring of sage.schemes.projective.projective_morphism.SchemeMorphism_polynomial_projective_space_finite_field.make_look_poly:13: ERROR: Unexpected indentation.
Error building the documentation.
```


- Totally Rmified Fixed Point does not need initial caps.

- "x**n + a*x**(n-2) +...+c" should not be "

- the examples sage:: should only have one :.

- the doc tests pass, but only because the examples with :: are not being run.

- formatting of the code needs some attention, such as spaces around =

- these two functions were added to the finite field section of polynomial morphism. Should they work over other rings/fields as well?

- make_look_poly could use a better name. How about 'normal_form'? Since it has only one keyword, you should use the keyword instead of the dict kwds


---

Comment by git created at 2016-05-27 02:16:37

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by rlmiller created at 2016-05-27 02:18:11

Changing status from needs_work to needs_review.


---

Comment by bhutz created at 2016-05-27 14:59:29

Changing status from needs_review to needs_work.


---

Comment by bhutz created at 2016-05-27 14:59:29

I did some code clean-up. No functionality was changed except that instead of having to compute the inverses of the conjugation it now just computes the right one to start with.

There are still a few functionality issues: Other base rings that should work do not such as QQ


```
P.<x,y>=ProjectiveSpace(QQ,1)
H=End(P)
f=H([x^2+y^2,y^2])
f.is_polynomial()
```


I think it likely these will work for finite fields as well


```
P.<x,y>=ProjectiveSpace(GF(13),1)
H=End(P)
f=H([x^2+y^2,y^2])
f.is_polynomial()
```


Function field base rings are not going to work, but this error isn't very informative

```
R.<c>=PolynomialRing(QQ)
P.<x,y>=ProjectiveSpace(FractionField(R),1)
H=End(P)
f=H([x^2+c*y^2,y^2])
f.is_polynomial()
```



```
R.<c>=FunctionField(QQ)
P.<x,y>=ProjectiveSpace(R,1)
H=End(P)
f=H([x^2+c*y^2,y^2])
f.is_polynomial()
```


The single rational preimage check is not sufficient

```
K.<w>=QuadraticField(4/27)
P.<x,y>=ProjectiveSpace(K,1)
H=End(P)
S=P.coordinate_ring()
f=H([x^3+w*y^3,x*y^2])
f.is_polynomial()
```

----
New commits:


---

Comment by bhutz created at 2016-05-27 15:03:47

One more thing: in dimension > 1 it should return a NotImplmentedError


---

Comment by rlmiller created at 2016-05-27 22:59:06

Changing status from needs_work to needs_review.


---

Comment by rlmiller created at 2016-05-27 22:59:06

New commits:


---

Comment by bhutz created at 2016-06-01 17:12:07

Changing component from algebra to algebraic geometry.


---

Comment by bhutz created at 2016-06-01 17:12:07

Going all the way to the splitting field was causing some slow performance, so I've reworked it to manage the fields directly. This includes special casing finite fields and managing the embeddings as well.

it should be noted that a simple error in projective_morphism.conjugation() was corrected in this ticket as well as a simple error in affine_morphism.homogenize()

The new version is ready for review now.
----
New commits:


---

Comment by rlmiller created at 2016-06-07 22:27:38

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-06-08 12:29:47

Resolution: fixed
