# Issue 27552: Fix typos and formatting in map_reduce

archive/issues_027552.json:
```json
{
    "body": "CC:  @slel\n\nKeywords: map_reduce\n\nFix typos and formatting, plus minor rewording, in map_reduce.\n\nIssue created by migration from https://trac.sagemath.org/ticket/27789\n\n",
    "created_at": "2019-05-06T23:37:17Z",
    "labels": [
        "component: combinatorics",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.8",
    "title": "Fix typos and formatting in map_reduce",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27552",
    "user": "https://github.com/slel"
}
```
CC:  @slel

Keywords: map_reduce

Fix typos and formatting, plus minor rewording, in map_reduce.

Issue created by migration from https://trac.sagemath.org/ticket/27789





---

archive/issue_comments_388292.json:
```json
{
    "body": "In preparation for other tasks around `map_reduce`:\n\n- https://trac.sagemath.org/query?order=id&desc=1&summary=~map_reduce&or&summary=~mapreduce\n \n---\nNew commits:",
    "created_at": "2019-05-06T23:39:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27552#issuecomment-388292",
    "user": "https://github.com/slel"
}
```

In preparation for other tasks around `map_reduce`:

- https://trac.sagemath.org/query?order=id&desc=1&summary=~map_reduce&or&summary=~mapreduce
 
---
New commits:



---

archive/issue_comments_388293.json:
```json
{
    "body": "Checked the built documentation and tested, here are my comments:\n\n* There are some lambda functions early on that don't have the semicolon in the right spot.\n\n* In \"For this, take a Map function that associates...\" - why is \"Map\" capitalized?\n\n* I think most conventions for sigma notation leave out the \"i=\" in the superscript. Only comes up in one changed line, but appears a few other places.\n\n* The \"x-factorial\" isn't standard terminology, it's always \"q-factorial\". I'd suggest either changing the variable to `q`, or saying that this is the q-factorial (in the variable `x`). You can even link to `sage.combinat.q_analogues.q_factorial`.\n\n* The associated test also fails. Since `x` is previously defined as the generator of a polynomial ring, Sage will take an expression like `(1-x^i)/(1-x)` and create it in an associated fraction field. Here, the method you would use is `reduce()`. Except this is a method that just updates the internal representation of the fraction field element and won't return anything, so you'd need to do\n\n  `sage: A = (prod((1-x**i)/(1-x) for i in range(1, 6))).reduce(); A`\n\n  The alternative is to do something to clear `x` and have it return to being a formal parameter, and then `(1-x^i)/(1-x)` will be treated as a more generic rational expression where `simplify_rational()` will work.\n\n* Broken doclinks: `profile.profile`, `sage.parallel.map_reduce.logger`, a bunch of things that look similar to `:meth:`master._shutdown``\n\n* I don't think \"Active Tasks\" should be capitalized in the `ActiveTaskCounterDarwin` class docstring.\n\n* The last part of this line\n\n  `during normal usage. Most of the time one should leave it to ``True``,`\n\n  I think should be `leave it as ``True```, or a little more awkwardly, `leave it set to ``True''`.\n\n* Pretty sure that unpaired right parenthesis should be a comma in\n\n  `During normal time, that is when all workers are active) a worker ``W`` is`\n\n* `post_process` and `map_function` should have their input as single element list (or something matching the rest of the conventions chosen).\n\n* `random_worker` docstring has a period at the end.",
    "created_at": "2019-05-08T03:37:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27552#issuecomment-388293",
    "user": "https://github.com/kevindilks"
}
```

Checked the built documentation and tested, here are my comments:

* There are some lambda functions early on that don't have the semicolon in the right spot.

* In "For this, take a Map function that associates..." - why is "Map" capitalized?

* I think most conventions for sigma notation leave out the "i=" in the superscript. Only comes up in one changed line, but appears a few other places.

* The "x-factorial" isn't standard terminology, it's always "q-factorial". I'd suggest either changing the variable to `q`, or saying that this is the q-factorial (in the variable `x`). You can even link to `sage.combinat.q_analogues.q_factorial`.

* The associated test also fails. Since `x` is previously defined as the generator of a polynomial ring, Sage will take an expression like `(1-x^i)/(1-x)` and create it in an associated fraction field. Here, the method you would use is `reduce()`. Except this is a method that just updates the internal representation of the fraction field element and won't return anything, so you'd need to do

  `sage: A = (prod((1-x**i)/(1-x) for i in range(1, 6))).reduce(); A`

  The alternative is to do something to clear `x` and have it return to being a formal parameter, and then `(1-x^i)/(1-x)` will be treated as a more generic rational expression where `simplify_rational()` will work.

* Broken doclinks: `profile.profile`, `sage.parallel.map_reduce.logger`, a bunch of things that look similar to `:meth:`master._shutdown``

* I don't think "Active Tasks" should be capitalized in the `ActiveTaskCounterDarwin` class docstring.

* The last part of this line

  `during normal usage. Most of the time one should leave it to ``True``,`

  I think should be `leave it as ``True```, or a little more awkwardly, `leave it set to ``True''`.

* Pretty sure that unpaired right parenthesis should be a comma in

  `During normal time, that is when all workers are active) a worker ``W`` is`

* `post_process` and `map_function` should have their input as single element list (or something matching the rest of the conventions chosen).

* `random_worker` docstring has a period at the end.



---

archive/issue_comments_388294.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-20T10:01:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27552#issuecomment-388294",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_388295.json:
```json
{
    "body": "Thanks for the thorough review. I tried to address all your comments, please check.",
    "created_at": "2019-05-20T10:04:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27552#issuecomment-388295",
    "user": "https://github.com/slel"
}
```

Thanks for the thorough review. I tried to address all your comments, please check.



---

archive/issue_comments_388296.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-05-20T10:05:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27552#issuecomment-388296",
    "user": "https://github.com/slel"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_388297.json:
```json
{
    "body": "Please also add your full name to the \"Reviewers\" field.",
    "created_at": "2019-05-20T10:05:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27552#issuecomment-388297",
    "user": "https://github.com/slel"
}
```

Please also add your full name to the "Reviewers" field.



---

archive/issue_comments_388298.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-05-20T10:14:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27552#issuecomment-388298",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_388299.json:
```json
{
    "body": "Sorry, I had left out one of the reviewer comments, I did a force push, hope that's okay.",
    "created_at": "2019-05-20T10:16:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27552#issuecomment-388299",
    "user": "https://github.com/slel"
}
```

Sorry, I had left out one of the reviewer comments, I did a force push, hope that's okay.



---

archive/issue_comments_388300.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-05-21T16:57:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27552#issuecomment-388300",
    "user": "https://github.com/kevindilks"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_068928.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-05-24T18:29:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27552",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27552#event-68928"
}
```



---

archive/issue_comments_388301.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-05-24T18:29:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27552#issuecomment-388301",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
