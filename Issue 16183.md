# Issue 16183: Addition to algebraic combinatorics tutorial on RSK

Issue created by migration from https://trac.sagemath.org/ticket/16420

Original creator: aschilling

Original creation time: 2014-06-01 00:08:46

CC:  tscrim sage-combinat

Keywords: algebraic combinatorics, RSK

This patch adds a new chapter to the algebraic combinatorics thematic tutorial on RSK.


---

Comment by aschilling created at 2014-06-01 02:19:42

Changing status from new to needs_review.


---

Comment by aschilling created at 2014-06-01 02:19:42

New commits:


---

Comment by tscrim created at 2014-06-02 15:09:11

I've made a few tweaks and expanded the exposition slightly. If you're happy with my changes, then you can set this to positive review.
----
New commits:


---

Comment by nthiery created at 2014-06-02 21:02:37

Proofreading this now. I may have a couple changes, so please hold on :-)


---

Comment by git created at 2014-06-02 21:14:37

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by nthiery created at 2014-06-02 21:17:04

Done; please review. You may further consider renaming `up_operator` to `U`, `up_operator_on_partition` to `U_on_basis` and similarly for down. Other than this, this looks good! Thanks!
----
New commits:


---

Comment by aschilling created at 2014-06-02 21:31:18

Replying to [comment:5 nthiery]:
> Done; please review. You may further consider renaming `up_operator` to `U`, `up_operator_on_partition` to `U_on_basis` and similarly for down. Other than this, this looks good! Thanks!

Hmm, thanks, but did you run the tests on your changes? They seem to have broken everything!


---

Comment by aschilling created at 2014-06-02 21:51:30

Well, with Nicolas' changes I get the following error messages:

```

sage -t rsk.rst
**********************************************************************
File "rsk.rst", line 57, in doc.en.thematic_tutorials.algebraic_combinatorics.rsk
Failed example:
    U = QQY.module_morphism(U_on_basis)
Exception raised:
    Traceback (most recent call last):
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.execute(example, compiled, test.globs)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 839, in execute
        exec compiled in globs
      File "<doctest doc.en.thematic_tutorials.algebraic_combinatorics.rsk[11]>", line 1, in <module>
        U = QQY.module_morphism(U_on_basis)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/categories/modules_with_basis.py", line 406, in module_morphism
        return ModuleMorphismByLinearity(on_basis = on_basis, domain = self, **keywords)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/categories/modules_with_basis.py", line 1317, in __init__
        raise ValueError("codomain(=%s) needs to have a base_ring attribute"%(codomain))
    ValueError: codomain(=None) needs to have a base_ring attribute
**********************************************************************
File "rsk.rst", line 58, in doc.en.thematic_tutorials.algebraic_combinatorics.rsk
Failed example:
    D = QQY.module_morphism(D_on_basis)
Exception raised:
    Traceback (most recent call last):
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.execute(example, compiled, test.globs)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 839, in execute
        exec compiled in globs
      File "<doctest doc.en.thematic_tutorials.algebraic_combinatorics.rsk[12]>", line 1, in <module>
        D = QQY.module_morphism(D_on_basis)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/categories/modules_with_basis.py", line 406, in module_morphism
        return ModuleMorphismByLinearity(on_basis = on_basis, domain = self, **keywords)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/categories/modules_with_basis.py", line 1317, in __init__
        raise ValueError("codomain(=%s) needs to have a base_ring attribute"%(codomain))
    ValueError: codomain(=None) needs to have a base_ring attribute
**********************************************************************
File "rsk.rst", line 63, in doc.en.thematic_tutorials.algebraic_combinatorics.rsk
Failed example:
    for p in Partitions(3):
        b = QQY(p)
        assert D(U(b)) - U(D(b)) == b
Exception raised:
    Traceback (most recent call last):
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.execute(example, compiled, test.globs)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 839, in execute
        exec compiled in globs
      File "<doctest doc.en.thematic_tutorials.algebraic_combinatorics.rsk[13]>", line 3, in <module>
        assert D(U(b)) - U(D(b)) == b
    NameError: name 'D' is not defined
**********************************************************************
File "rsk.rst", line 72, in doc.en.thematic_tutorials.algebraic_combinatorics.rsk
Failed example:
    for i in range(4):
        u = U(u)
Exception raised:
    Traceback (most recent call last):
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.execute(example, compiled, test.globs)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 839, in execute
        exec compiled in globs
      File "<doctest doc.en.thematic_tutorials.algebraic_combinatorics.rsk[15]>", line 2, in <module>
        u = U(u)
    NameError: name 'U' is not defined
**********************************************************************
File "rsk.rst", line 74, in doc.en.thematic_tutorials.algebraic_combinatorics.rsk
Failed example:
    u
Expected:
    B[[1, 1, 1, 1]] + 3*B[[2, 1, 1]] + 2*B[[2, 2]] + 3*B[[3, 1]] + B[[4]]
Got:
    B[[]]
**********************************************************************
1 item had failures:
   5 of  30 in doc.en.thematic_tutorials.algebraic_combinatorics.rsk
    [29 tests, 5 failures, 0.75 s]
----------------------------------------------------------------------
sage -t rsk.rst  # 5 doctests failed
----------------------------------------------------------------------
Total time for all tests: 0.9 seconds
    cpu time: 0.6 seconds
    cumulative wall time: 0.7 seconds
```

If I change the morphism line to

```
    sage: U = QQY.module_morphism(U_on_basis, codomain = QQY)
    sage: D = QQY.module_morphism(D_on_basis, codomain = QQY)
```

all tests pass. But that is weird since

```

sage: U_on_basis.codomain()
Free module generated by {[], [1], [2], [1, 1], [3], [2, 1], [1, 1, 1], [4], [3, 1], [2, 2], [2, 1, 1], [1, 1, 1, 1], [5], [4, 1], [3, 2], [3, 1, 1], [2, 2, 1], [2, 1, 1, 1], [1, 1, 1, 1, 1]} over Rational Field
sage: QQY
Free module generated by {[], [1], [2], [1, 1], [3], [2, 1], [1, 1, 1], [4], [3, 1], [2, 2], [2, 1, 1], [1, 1, 1, 1], [5], [4, 1], [3, 2], [3, 1, 1], [2, 2, 1], [2, 1, 1, 1], [1, 1, 1, 1, 1]} over Rational Field
```

to which it is supposed to default.


---

Comment by git created at 2014-06-02 21:56:06

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by aschilling created at 2014-06-02 21:57:31

Ok, I figured out what the issue was. There was a :: missing in from of the definition of the operators on the basis, so it did not know what the codomain was. So now everything looks good! Thanks for the review.


---

Comment by aschilling created at 2014-06-02 21:57:57

Changing status from needs_review to positive_review.


---

Comment by nthiery created at 2014-06-02 22:09:56

Oops, I had checked the changed examples in Sage but indeed not run the test. Thanks for fixing!

Cheers,


---

Comment by vbraun created at 2014-06-04 14:48:12

Resolution: fixed
