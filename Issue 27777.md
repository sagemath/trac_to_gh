# Issue 27777: MR16: Avoid creating files with name length > 255

Issue created by migration from https://trac.sagemath.org/ticket/28014

Original creator: galois

Original creation time: 2019-06-19 06:56:09

CC:  vdelecroix

Isuru Fernando ([`@`isuruf](https://gitlab.com/isuruf)) opened a merge request at https://gitlab.com/sagemath/sage/merge_requests/16:
----









---

Comment by isuruf created at 2019-06-19 06:57:01

Changing component from PLEASE CHANGE to pickling.


---

Comment by isuruf created at 2019-06-19 06:57:01

Changing type from PLEASE CHANGE to defect.


---

Comment by vdelecroix created at 2019-06-19 07:04:36

(porting a comment written in gitlab)

Why not hashing in all situations? If so there is no need to replace separator with underscores
```
    mangled = hashlib.sha256(os.path.realpath(SAGE_LIB).encode('utf-8')).hexdigest()
```


---

Comment by isuruf created at 2019-06-19 07:07:26

I think it was because I do `.encode('utf-8')` and was not sure if it works everywhere


---

Comment by vdelecroix created at 2019-06-19 07:10:31

Your version is less intrusive but also less tested. If it works for you it is good enough for me :-)


---

Comment by vdelecroix created at 2019-06-19 07:10:31

Changing status from needs_review to positive_review.


---

Comment by galois created at 2019-06-19 13:22:04

New commits added to merge request.  I updated the commit SHA-1.  New commits:


---

Comment by isuruf created at 2019-06-19 13:23:36

Some file systems (like the file system on cocalc) has a limit of 128. So, I've used your suggestion of hashing everywhere instead of checking for a limit


---

Comment by isuruf created at 2019-06-19 13:23:36

Changing status from positive_review to needs_review.


---

Comment by vdelecroix created at 2019-06-19 13:24:33

Changing status from needs_review to positive_review.


---

Comment by vdelecroix created at 2019-06-19 21:58:35

Changing keywords from "" to "days101".


---

Comment by vbraun created at 2019-06-28 04:29:47

Resolution: fixed
