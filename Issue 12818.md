# Issue 12818: typo in connecting conversion maps

archive/issues_012818.json:
```json
{
    "body": "Assignee: robertwb\n\nCC:  simonking\n\nWe currently have this error\n\n\n```\nK = NumberField([x^2-2, x^2-3], 'a,b')\nM = K.absolute_field('c')\nM_to_K, K_to_M = M.structure()\nM.register_coercion(K_to_M)\nK.register_coercion(M_to_K)\nM.coerce_map_from(QQ)\n...\nUnboundLocalError: local variable 'connecting' referenced before assignment\n```\n\n\nThis error was not present in 4.7.x series\n\nIssue created by migration from https://trac.sagemath.org/ticket/12990\n\n",
    "created_at": "2012-05-22T16:58:46Z",
    "labels": [
        "coercion",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.3",
    "title": "typo in connecting conversion maps",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12818",
    "user": "lftabera"
}
```
Assignee: robertwb

CC:  simonking

We currently have this error


```
K = NumberField([x^2-2, x^2-3], 'a,b')
M = K.absolute_field('c')
M_to_K, K_to_M = M.structure()
M.register_coercion(K_to_M)
K.register_coercion(M_to_K)
M.coerce_map_from(QQ)
...
UnboundLocalError: local variable 'connecting' referenced before assignment
```


This error was not present in 4.7.x series

Issue created by migration from https://trac.sagemath.org/ticket/12990





---

archive/issue_comments_153999.json:
```json
{
    "body": "The solution was found by Simon King discussing #12269",
    "created_at": "2012-05-22T18:04:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12818#issuecomment-153999",
    "user": "lftabera"
}
```

The solution was found by Simon King discussing #12269



---

archive/issue_comments_154000.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-05-22T18:05:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12818#issuecomment-154000",
    "user": "lftabera"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_154001.json:
```json
{
    "body": "OK, nevermind [attachment:trac_12990.patch]. Overlapping time windows! Just go with the first patch. The typo was introduced in #7420, which was merged in 4.3. Apparently changes after 4.7.1 made it so that the example in the ticket activates this code path.",
    "created_at": "2012-05-22T18:12:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12818#issuecomment-154001",
    "user": "nbruin"
}
```

OK, nevermind [attachment:trac_12990.patch]. Overlapping time windows! Just go with the first patch. The typo was introduced in #7420, which was merged in 4.3. Apparently changes after 4.7.1 made it so that the example in the ticket activates this code path.



---

archive/issue_comments_154002.json:
```json
{
    "body": "patchbot: apply connecting.patch",
    "created_at": "2012-05-22T19:54:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12818#issuecomment-154002",
    "user": "kini"
}
```

patchbot: apply connecting.patch



---

archive/issue_comments_154003.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-05-22T20:38:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12818#issuecomment-154003",
    "user": "kini"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_154004.json:
```json
{
    "body": "Looks good to go.",
    "created_at": "2012-05-22T20:38:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12818#issuecomment-154004",
    "user": "kini"
}
```

Looks good to go.



---

archive/issue_comments_154005.json:
```json
{
    "body": "Looks like like a duplicate of #12919.",
    "created_at": "2012-05-26T17:43:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12818#issuecomment-154005",
    "user": "jdemeyer"
}
```

Looks like like a duplicate of #12919.



---

archive/issue_comments_154006.json:
```json
{
    "body": "Changing status from positive_review to needs_info.",
    "created_at": "2012-05-26T17:43:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12818#issuecomment-154006",
    "user": "jdemeyer"
}
```

Changing status from positive_review to needs_info.



---

archive/issue_comments_154007.json:
```json
{
    "body": "Well would you look at that... hmm. Maybe we can keep the doctest from this patch. I've posted a comment on #12919.",
    "created_at": "2012-05-26T17:52:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12818#issuecomment-154007",
    "user": "kini"
}
```

Well would you look at that... hmm. Maybe we can keep the doctest from this patch. I've posted a comment on #12919.



---

archive/issue_comments_154008.json:
```json
{
    "body": "Yes, whis is a clear duplicate of #12919, however, I would like to keep also the doctest of this patch, 12919 doctest is a an ad-hoc class for testing the bug. In this patch is a \"real-life\" situation where the bug is triggered.\n\nShould I clear the patch to keep only the doctest and possibli be merged?",
    "created_at": "2012-05-31T07:24:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12818#issuecomment-154008",
    "user": "lftabera"
}
```

Yes, whis is a clear duplicate of #12919, however, I would like to keep also the doctest of this patch, 12919 doctest is a an ad-hoc class for testing the bug. In this patch is a "real-life" situation where the bug is triggered.

Should I clear the patch to keep only the doctest and possibli be merged?



---

archive/issue_comments_154009.json:
```json
{
    "body": "Sounds good to me.",
    "created_at": "2012-05-31T07:35:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12818#issuecomment-154009",
    "user": "kini"
}
```

Sounds good to me.



---

archive/issue_comments_154010.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2012-06-22T17:08:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12818#issuecomment-154010",
    "user": "lftabera"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_154011.json:
```json
{
    "body": "Attachment [connecting.patch](tarball://root/attachments/some-uuid/ticket12990/connecting.patch) by mstreng created at 2012-08-06 13:55:11",
    "created_at": "2012-08-06T13:55:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12818#issuecomment-154011",
    "user": "mstreng"
}
```

Attachment [connecting.patch](tarball://root/attachments/some-uuid/ticket12990/connecting.patch) by mstreng created at 2012-08-06 13:55:11



---

archive/issue_comments_154012.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-08-06T13:55:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12818#issuecomment-154012",
    "user": "mstreng"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_154013.json:
```json
{
    "body": "Whoops, forgot about this ticket. Thanks for the positive review, mstreng.",
    "created_at": "2012-08-06T13:58:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12818#issuecomment-154013",
    "user": "kini"
}
```

Whoops, forgot about this ticket. Thanks for the positive review, mstreng.



---

archive/issue_comments_154014.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-08-14T07:03:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12818#issuecomment-154014",
    "user": "jdemeyer"
}
```

Resolution: fixed
