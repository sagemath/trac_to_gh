# Issue 19021: Speedup tensor products of cyclotomic matrices

Issue created by migration from https://trac.sagemath.org/ticket/19258

Original creator: tscrim

Original creation time: 2015-09-20 16:32:34

Assignee: tscrim

CC:  was jdemeyer

Currently taking the tensor product of dense cyclotomic matrices takes forever:

```
sage: R = CyclotomicField(2)
sage: M = matrix.random(R, 40,40)
sage: N = matrix.random(R, 3, 3)
sage: %time K = N.tensor_product(M)
CPU times: user 337 ms, sys: 20.6 ms, total: 358 ms
Wall time: 335 ms
sage: %time K = M.tensor_product(N)
CPU times: user 3.99 s, sys: 32.5 ms, total: 4.02 s
Wall time: 3.97 s
```

The tensor product code looses a lot of time in converting between its internal representation and the cyclotomic field entries. This ticket implements a custom `tensor_product` along with doing some other speedups with the internal workings.


---

Comment by tscrim created at 2015-09-20 16:37:51

Changing status from new to needs_review.


---

Comment by tscrim created at 2015-09-20 16:37:51

With the branch:

```
sage: C = CyclotomicField(12)
sage: M = matrix.random(C, 3,3)
sage: N = matrix.random(C, 50, 50)
sage: %timeit M.tensor_product(N)
10 loops, best of 3: 88.8 ms per loop
sage: %timeit N.tensor_product(M)
1 loops, best of 3: 347 ms per loop
```

----
New commits:


---

Comment by git created at 2015-09-20 16:45:13

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2016-04-09 20:10:18

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-04-11 22:47:14

Resolution: fixed
