# Issue 24926: Implement symmetric functions in super space

Issue created by migration from Trac.

Original creator: zabrocki

Original creation time: 2018-04-13 14:47:20

CC:  alauve darij zabrocki tscrim

Keywords: CHAs, sf, super partitions, IMA coding sprint

Symmetric functions in superspace is the Hopf algebra of super partitions (ticket #25132).  It has the symmetric functions as a sub-algebra.

* [DLM06] P. Desrosiers, L. Lapointe, P. Mathieu, Classical symmetric functions in superspace, J. Algebr Comb. (2006) 24:209--238, :arXiv:`0509408`

* [JL16] M. Jones, L. Lapointe, Pieri rules for Schur functions in superspace, :arXiv:`1608.08577`



---

Comment by zabrocki created at 2018-05-08 00:36:51

Changing type from PLEASE CHANGE to enhancement.


---

Comment by zabrocki created at 2018-05-08 00:36:51

A first implementation.  I merged #25133 so that the CHAS directory is there.
----
Last 10 new commits:


---

Comment by git created at 2018-05-09 22:16:43

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-05-09 23:59:26

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2018-05-10 00:00:03

Just did a trivial rebase over the trivial conflict in #25133.


---

Comment by git created at 2018-05-10 14:17:13

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-05-13 11:03:12

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-05-13 13:53:53

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by zabrocki created at 2018-05-13 14:00:00

Changing status from new to needs_review.


---

Comment by zabrocki created at 2018-05-13 14:00:00

I think that this is ready to go.


---

Comment by darij created at 2018-05-13 14:08:15

Some bikeshedding on the module-level doc:


```
Let `P_{\Theta_n, X_n}` be the polynomial ring in two sets of variables
`\Theta_n = \theta_1, \theta_2, \ldots, \theta_n` and
`X_n = x_1, x_2, \ldots, x_n`
```

The "n" here clashes with the "n" in the later definitions of p_{n;} et al; maybe use a capital N instead? Or work with infinitely many variables right away, if this is possible?


```
where the first set of variables anti-commute
```

If this includes squaring to 0, then please say so.


```
The symmetric group
acts diagonally on this polynomial ring and the symmetric functions in
superspace are isomorphic to the invariants in this polynomial ring.
```

I'd put a comma before the "and" so it's not misread as "on this polynomial ring and the symmetric functions".


```
    p_{(;i)} p_{(;j)} = p_{(;j)} p_{(;i)} \qquad
    p_{(i;)} p_{(;j)} = p_{(;j)} p_{(i;)} \qquad
    p_{(i;)} p_{(j;)} = - p_{(j;)} p_{(i;)}
```

And `p_{(i;)}^2 = 0`, I assume.


```
    p_{(; n)} = p_n \quad e_{(; n)} = e_n \quad h_{(; n)} = h_n
```

Please use `, \quad`, not just `\quad`.


```
from `Theta_n`
```

Don't forget the backslash. (And again, that's an "N", not an "n".)


```
bosnic degree
```

The adjective is "Bosnian".


```
    h_{(n; )} = \sum_{\Lambda \in SPar(n|1)} m_\Lambda \qquad
```

Again, use a comma before the \qquad.


```
`\left<\left< p_\Lambda, p_\Gamma \right>\right> = \delta_{\Lambda\Gamma} z_{\Lambda^s}`
where `z_{\Lambda^s}` is the usual constant `z_\lambda` which is the size of
```

What is `\Lambda^s`?


```
in pairs.  For all `\Lambda, \Gamma in SPar(n|m)` ,
```

`in` -> `\in`


```
As with the space of symmetric functions, there is an involution `\omega`
that for all super partitions `\Lambda`, `\omega(h_\Lambda) = e_\Lambda`.
```

add "satisfies".


```
Hopf algebra and the coproduct is defined bby declaring that the power sum
```

"by".

I don't quite get: How is `e_\Lambda` defined for a strict partition \Lambda? Just by multiplying `e_{n;}` over all fermionic entries `n` and `e_{;n}` over all bosonic entries `n`? In what order?


---

Comment by git created at 2018-05-13 14:42:01

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-05-13 14:48:43

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-05-13 15:07:01

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-05-13 23:58:05

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-05-14 00:15:22

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-06-03 12:43:56

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @darijgr created at 2018-06-03 13:12:05


```
+    class Schur_sb(CombinatorialFreeModule, BindableClass):
+        r"""
+        The Schur basis arising from `q=t=0` specialization of Macdonald.
```



```
+    class Schur_s(CombinatorialFreeModule, BindableClass):
+        r"""
+        The Schur-star basis arising from `q=t=0` specialization of Macdonald.
```



```
+    class Schur_b(CombinatorialFreeModule, BindableClass):
+        r"""
+        The Schur-bar basis as the `q=t=\infty` specialization of Macdonald.
```



```
+    class Schur(CombinatorialFreeModule, BindableClass):
+        r"""
+        The Schur-bar basis as the `q=t=\infty` specialization of Macdonald.
```


Can it be that these descriptions are messed up? Why is the "Schur" doc claiming to be Schur-bar? Shouldn't Schur be from q=t=0, not from q=t=\infty?

Also, is there no simpler way to define these bases than by Macdonald specialization? I'd expect some Berezinian analogue of the Jacobi-Trudi formulas?


---

Comment by git created at 2018-06-03 15:17:57

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by zabrocki created at 2018-06-03 15:21:49

You are right the descriptions were confused there.  The Schur-star and Schur-star-bar are related to these by duality and I looked in the paper and noticed that they are not listed as a specialization so I cut that description.

> Also, is there no simpler way to define these bases than by Macdonald specialization? I'd expect some Berezinian analogue of the Jacobi-Trudi formulas?

That would be welcome.  Here they are implemented by Pieri rules which are given in [JL2016].


---

Comment by git created at 2018-06-04 11:01:27

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-06-04 11:12:20

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-06-08 17:13:29

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @darijgr created at 2018-06-17 18:15:37

More random comments:


```
+            The product of monomial basis elements is calculated for a
+            fixed fermionic partition.
```

What does that mean?

What is a BindableClass (no, I don't get the doc at https://doc.sagemath.org/html/en/reference/misc/sage/misc/bindable_class.html ) and why is it being used here?


```
+where `\Lambda` is a super partition with femionic sector `m`.
```

feRmionic

Is this a Hopf algebra or a super-Hopf algebra? I.e., is there a twist involved in the bialgebra axiom? My suspicion is that it is, because otherwise the square-zero relations `p_{(i;)}^2 = 0` would contradict the primitivity of the `p_{(i;)}` wrt the coproduct. But do you ever tell this to Sage? If you don't, I doubt that it's correctly computing coproducts of non-generators! Also, of course, this should be said in the doc. (Is the Hopf structure anywhere in the literature?)


```
+                Test if super partitions an element all have the same bi-degree.
```

Probably should be "if the super-partitions in the support of ``self`` have the same bi-degree".

Maybe decide between "symmetric generators" and "bosonic generators" -- currently you seem to be using both languages (or do they mean different things?).


---

Comment by git created at 2018-06-18 20:14:44

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by zabrocki created at 2018-06-18 20:37:07

I used `BindableClass` because that seems to be what all bases of chas need to inherit (see `WQSymBasis_abstract` in `wqsym.py`, `FSymBasis_abstract` in `fsym.py` and bases in `ncsf.py` and `qsym.py`).  I tried deleting the `BindableClass` and the command `h = self.Complete()` raised a `TypeError: __init__() takes exactly 2 arguments (1 given)`.  And, no, I do not understand that documentation either.

About the Hopf algebra structure:
> My suspicion is that it is, because otherwise the square-zero relations `p_{(i;)}^2 = 0` would contradict the primitivity of the `p_{(i;)}` wrt the coproduct.
As far as I can tell this is a Hopf algebra and not a super-Hopf algebra.  There is no posted paper that I can point to, but I do have a non-posted preprint.  However I will continue to check this carefully because I am reviewing the paper.  Can you explain your suspicion more carefully?  Perhaps there is an error in the paper.


---

Comment by @darijgr created at 2018-06-18 20:39:31

In characteristic 0, any nilpotent primitive element of a (non-super) Hopf algebra must be 0. More strongly: If `a` is a primitive element of a Hopf algebra in characteristic 0, then the powers of `a` are linearly independent.


---

Comment by zabrocki created at 2018-06-18 21:06:55

Well then.  Something is not right with the universe.  No test I've performed has identified a problem with the Hopf structure.  I'll need to check it against the proof.  Can you provide me a reference?


---

Comment by alauve created at 2018-06-18 21:15:07

How about Appendix A here: https://arxiv.org/pdf/1105.5572.pdf


---

Comment by @darijgr created at 2018-06-18 21:26:09

You are probably not testing enough. The error should materialize when you take the coproduct of a product of p_{n;}s. Basically, the coproduct of p_{n;}p_{m;} should switch signs if you swap n with m; but if I compute it naively in a Hopf algebra, I get

p_{n;} p_{m;} \otimes 1 + p_{n;} \otimes p_{m;} + p_{m;} \otimes p_{n;} + 1 \otimes p_{n;} p_{m;},

which does not swap signs.

Further typos: "Summetric", "fermonionic".


---

Comment by git created at 2018-06-18 21:32:48

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by zabrocki created at 2018-06-18 21:38:51

What do you mean by swap signs?  The sign does arise in the product.  Does this seem like it is not correct?

```
sage: p[-4,-2].coproduct()
p[; ] # p[4, 2; ] + p[2; ] # p[4; ] + p[4; ] # p[2; ] + p[4, 2; ] # p[; ]
sage: (p[-2]*p[-4]).coproduct()
-p[; ] # p[4, 2; ] - p[2; ] # p[4; ] - p[4; ] # p[2; ] - p[4, 2; ] # p[; ]
```


Aaron, looking at Proposition 36, "Let K denote the associated graded Hopf algebra with respect to the coradical filtration of H."  In order to compare to that proof, do I need to know what the coradical filtration of symmetric functions in super space is?


---

Comment by @darijgr created at 2018-06-18 22:10:47


```
sage: (p[-2]*p[-4]).coproduct()
-p[; ] # p[4, 2; ] - p[2; ] # p[4; ] - p[4; ] # p[2; ] - p[4, 2; ] # p[; ]
```

I'm fairly sure you don't want this to be the result. The general version of this formula would be

```
sage: (p[-i]*p[-j]).coproduct()
-p[; ] # p[j, i; ] - p[i; ] # p[j; ] - p[j; ] # p[i; ] - p[j, i; ] # p[; ]
```

but this doesn't survive swapping i with j.

The fact that I'm cited is incomplete, by the way (sorry): It should require `a` to be nonzero, and the base ring to be a field.


---

Comment by alauve created at 2018-06-19 03:58:28

Replying to [comment:30 zabrocki]:
> 
> Aaron, looking at Proposition 36, "Let K denote the associated graded Hopf algebra with respect to the coradical filtration of H."  In order to compare to that proof, do I need to know what the coradical filtration of symmetric functions in super space is?

Probably not. The braiding (by -1) enters during use of twist maps. So axioms for coalgebra will be unchanged, I believe. This means it's the same as the coradical filtration for ordinary symmetric functions? (I have not looked at the coproduct defined...) This means the kth level would have basis `p[lam;mu]` where the sum of the lengths of lam and mu is less-or-equal to k. See Sec. 2.3 http://pi.math.cornell.edu/~maguiar/a.pdf for more on q-Hopf algebras, though they do not address coradical filtration.

I expect the associated graded q-Hopf algebra will be embeddable in a q-shuffle Hopf algebra, which is also a domain.


---

Comment by zabrocki created at 2018-06-19 13:25:09

Changing status from needs_review to needs_work.


---

Comment by zabrocki created at 2018-06-19 13:25:09

Thank you.  You spotted a very subtle and potentially fatal mistake on my part.  I missed the line that says `(f_1 \otimes g_1) (f_2 \otimes g_2) = (-1)^{ab} f_1 f_2 \otimes g_1 g_2` where `a` and `b` are the fermionic degrees of `g_1` and `f_2`.  If I am not mistaken then, this is a super-Hopf algebra and I need to use the super algebra category: see #18044 and the discussion in #18675 .

Is this still a CHA?


---

Comment by zabrocki created at 2018-06-19 14:47:13

If I am not mistaken, the coproduct for a super-coalgebra is not implemented.  Is this worth doing first on a separate ticket?


---

Comment by tscrim created at 2018-06-19 23:50:56

Likely relevant: #25603.


---

Comment by @darijgr created at 2018-06-20 10:15:05

Maybe also move the coproduct out of this ticket for the time being -- this ticket is already too large for comfortable reviewing...


---

Comment by zabrocki created at 2018-06-25 16:32:06

I'm debating taking the coproduct out an moving it to another ticket.  I want to see what happens with #25603 because I would like to know what needs to be done in order to implement it.

Identifying this mistake helped me locate an error in the paper.  I pulled in #25603 and tried to verify that this was a Hopf-super-algebra (or super-Hopf-algebra, whatever).  The formula for the antipode in the paper used the fact that `S(f*g) == S(g)*S(f)` to derive the antipode on the power-sum basis and this was leading to doc-test failures on `_test_antipode`.  I don't know why, but `_test_antipode` passed on other bases even though the antipode is computed by coercion.


---

Comment by vdelecroix created at 2018-08-03 19:20:18

update milestone 8.3 -> 8.4
