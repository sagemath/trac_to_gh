# Issue 22327: Chromatic index

Issue created by migration from Trac.

Original creator: pelegm

Original creation time: 2017-03-10 09:55:20

CC:  pelegm kdilks chapoton

Keywords: chromatic_index, graph_coloring

We probably want to have `.chromatic_index` as a graph method.
We already have `.fractional_chromatic_index` as a graph method (see #10044), and `.chromatic_number` as a graph method. It only makes sense to have `.chromatic_index` as a graph method as well, instead of doing something like


```python
graph_coloring.edge_coloring(g, value_only=True)
```



---

Comment by dcoudert created at 2017-03-10 15:19:15

* I don't understand why `graph_coloring` is in the global namespace. It should be access either as `Graph` methods or using an import.
* we already have `G.coloring()`. We could certainly add an alias for the chromatic number, but it is essentially the same
* observe that the chromatic index is usually for coloring vertices, not edges as in your example.


---

Comment by pelegm created at 2017-03-10 15:26:52

I think you are confusing the **chromatic number** of a graph (minimum number of colours in a proper _vertex_ colouring of the graph) and the **chromatic index** of a graph (minimum number of colours in a proper _edge_ colouring of the graph).

The chromatic index is sometimes called the **edge chromatic number**.


---

Comment by dcoudert created at 2017-03-10 15:30:27

You are right.


---

Comment by dcoudert created at 2017-05-07 12:19:30

Changing status from new to needs_review.


---

Comment by dcoudert created at 2017-05-07 12:19:30

I added method `chromatic_index` to graph, and I have also improve the `edge_coloring` method to handle non connected graphs.
----
New commits:


---

Comment by pelegm created at 2017-05-12 10:51:14

Trying to review your branch, I checked out into your branch, but then trying to run sage I get:


```
Error: You must set either the SAGE_LOCAL or SAGE_SCRIPTS_DIR environment variable to run this
Error setting environment variables by sourcing '/home/peleg/sage/src/bin/sage-env';
possibly contact sage-devel (see http://groups.google.com/group/sage-devel).
```


Any idea what might cause this?


---

Comment by dcoudert created at 2017-05-12 11:47:15

No, unfortunately :(

on my computer, these variables are not set. You should may be post on sage-devel.


---

Comment by git created at 2017-06-04 09:00:28

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dcoudert created at 2017-07-07 03:50:37

any help to review this patch is more than welcome ;)


---

Comment by kdilks created at 2017-07-12 19:42:22

I've looked over things a little bit, still need to look over the code more carefully and try to break things.

In terms of the docstrings, for `chromatic_index()`:
- I think that mentioning that the method is a front-end and the `See also:` should be placed after `INPUT:`, but before `EXAMPLES:`.

- I don't think there's much of a point to doing `n=randint(3,6)`, because I believe Sage always uses the same initial seed for random number generation in tests. Which means it won't succeed in finding errors like...

- Chromatic index of a complete graph K_n is equal to n if n is odd, and n-1 if n is even. It is not always equal to n as stated. Presumably doctests are always "randomly" picking n to be 3 or 5, since they never pick this up.

- I think instead of having two examples with the path graph, it might be better to do one example with the path graph, and one or two examples with more 'exotic' graphs (Maybe petersen graph and some graph that isn't regular?).

For `edge_coloring()`:

- There needs to be some examples in the documentation showing/testing what happens when `value_only=False` and an edge partition is returned.

- It's also not entirely clear from the documentation what is supposed to happen when `hex_colors=False`.


---

Comment by kdilks created at 2017-07-12 19:44:05

Just realized that the `edge_coloring()` was already in Sage and not really part of this ticket...so I guess only do that if you're feeling particularly expeditious :) .


---

Comment by git created at 2017-07-13 00:12:33

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dcoudert created at 2017-07-13 00:15:10

I addressed all your comments. It's true that the `edge_coloring` method was lacking of examples.
On my side it passes all tests and I can build/display properly the doc. Hope it's the same for you.

Don't forget to add your real name as a reviewer. Thanks.


---

Comment by git created at 2017-07-16 14:35:47

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dcoudert created at 2017-07-16 14:37:34

The solution of `edge_coloring` depends on the ILP solver. My default solver is cplex, which is not the case of the patchbot. I'm now forcing `GLPK` in the examples.


---

Comment by kdilks created at 2017-07-18 00:05:04

Only last thing I see that needs to be addressed is that Patchbot is not happy with something about the `.. SEE ALSO:` blocks, but I'm not sure exactly what. My best guess would be that `See also:` is reserved for things that link within the software/documentation, and links to external references like Wikipedia should be in a `References` section.


---

Comment by dcoudert created at 2017-07-18 00:47:14

As far as I know, the use of the `.. SEEALSO::` block is correct, so I don't understand why the patchbot is complaining :(


---

Comment by tscrim created at 2017-07-18 11:54:53

The patchbot plugin is likely not quite smart enough for the `.. SEEALSO::` blocks (could just be a missed case in the implementation; maybe ask Frédéric). It is okay to ignore the patchbot output as it is mostly a guidepost rather than a hard rule (provided the doc builds of course).


---

Comment by dcoudert created at 2017-07-19 09:10:31

Hi Frédéric,

if you have any idea what's going on here, please let us know. 
I tried to follow all rules for the formatting of blocks, but the patchbot is complaining. On my side, I can successfully build the documentation and it displays well.

Thanks,
David.


---

Comment by chapoton created at 2017-07-19 09:12:08

This was an issue in patchbot 2.6.9, fixed in patchbot 2.7.0. Just forget about it, as Travis told you already.


---

Comment by dcoudert created at 2017-07-19 09:19:11

ok, Thanks.


---

Comment by kdilks created at 2017-07-19 17:55:51

Changing status from needs_review to positive_review.


---

Comment by dcoudert created at 2017-07-19 19:39:38

Thanks for the review.


---

Comment by vbraun created at 2017-07-26 22:13:27

Resolution: fixed
