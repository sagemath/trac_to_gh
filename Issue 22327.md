# Issue 22327: Chromatic index

archive/issues_022327.json:
```json
{
    "body": "CC:  @pelegm @kevindilks @fchapoton\n\nKeywords: chromatic_index, graph_coloring\n\nWe probably want to have `.chromatic_index` as a graph method.\nWe already have `.fractional_chromatic_index` as a graph method (see #10044), and `.chromatic_number` as a graph method. It only makes sense to have `.chromatic_index` as a graph method as well, instead of doing something like\n\n\n```python\ngraph_coloring.edge_coloring(g, value_only=True)\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/22564\n\n",
    "created_at": "2017-03-10T09:55:20Z",
    "labels": [
        "component: graph theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "Chromatic index",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22327",
    "user": "https://github.com/pelegm"
}
```
CC:  @pelegm @kevindilks @fchapoton

Keywords: chromatic_index, graph_coloring

We probably want to have `.chromatic_index` as a graph method.
We already have `.fractional_chromatic_index` as a graph method (see #10044), and `.chromatic_number` as a graph method. It only makes sense to have `.chromatic_index` as a graph method as well, instead of doing something like


```python
graph_coloring.edge_coloring(g, value_only=True)
```


Issue created by migration from https://trac.sagemath.org/ticket/22564





---

archive/issue_comments_310011.json:
```json
{
    "body": "* I don't understand why `graph_coloring` is in the global namespace. It should be access either as `Graph` methods or using an import.\n* we already have `G.coloring()`. We could certainly add an alias for the chromatic number, but it is essentially the same\n* observe that the chromatic index is usually for coloring vertices, not edges as in your example.",
    "created_at": "2017-03-10T15:19:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22327#issuecomment-310011",
    "user": "https://github.com/dcoudert"
}
```

* I don't understand why `graph_coloring` is in the global namespace. It should be access either as `Graph` methods or using an import.
* we already have `G.coloring()`. We could certainly add an alias for the chromatic number, but it is essentially the same
* observe that the chromatic index is usually for coloring vertices, not edges as in your example.



---

archive/issue_comments_310012.json:
```json
{
    "body": "I think you are confusing the **chromatic number** of a graph (minimum number of colours in a proper *vertex* colouring of the graph) and the **chromatic index** of a graph (minimum number of colours in a proper *edge* colouring of the graph).\n\nThe chromatic index is sometimes called the **edge chromatic number**.",
    "created_at": "2017-03-10T15:26:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22327#issuecomment-310012",
    "user": "https://github.com/pelegm"
}
```

I think you are confusing the **chromatic number** of a graph (minimum number of colours in a proper *vertex* colouring of the graph) and the **chromatic index** of a graph (minimum number of colours in a proper *edge* colouring of the graph).

The chromatic index is sometimes called the **edge chromatic number**.



---

archive/issue_comments_310013.json:
```json
{
    "body": "You are right.",
    "created_at": "2017-03-10T15:30:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22327#issuecomment-310013",
    "user": "https://github.com/dcoudert"
}
```

You are right.



---

archive/issue_comments_310014.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-05-07T12:19:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22327#issuecomment-310014",
    "user": "https://github.com/dcoudert"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_310015.json:
```json
{
    "body": "I added method `chromatic_index` to graph, and I have also improve the `edge_coloring` method to handle non connected graphs.\n----\nNew commits:",
    "created_at": "2017-05-07T12:19:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22327#issuecomment-310015",
    "user": "https://github.com/dcoudert"
}
```

I added method `chromatic_index` to graph, and I have also improve the `edge_coloring` method to handle non connected graphs.
----
New commits:



---

archive/issue_comments_310016.json:
```json
{
    "body": "Trying to review your branch, I checked out into your branch, but then trying to run sage I get:\n\n\n```\nError: You must set either the SAGE_LOCAL or SAGE_SCRIPTS_DIR environment variable to run this\nError setting environment variables by sourcing '/home/peleg/sage/src/bin/sage-env';\npossibly contact sage-devel (see http://groups.google.com/group/sage-devel).\n```\n\n\nAny idea what might cause this?",
    "created_at": "2017-05-12T10:51:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22327#issuecomment-310016",
    "user": "https://github.com/pelegm"
}
```

Trying to review your branch, I checked out into your branch, but then trying to run sage I get:


```
Error: You must set either the SAGE_LOCAL or SAGE_SCRIPTS_DIR environment variable to run this
Error setting environment variables by sourcing '/home/peleg/sage/src/bin/sage-env';
possibly contact sage-devel (see http://groups.google.com/group/sage-devel).
```


Any idea what might cause this?



---

archive/issue_comments_310017.json:
```json
{
    "body": "No, unfortunately :(\n\non my computer, these variables are not set. You should may be post on sage-devel.",
    "created_at": "2017-05-12T11:47:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22327#issuecomment-310017",
    "user": "https://github.com/dcoudert"
}
```

No, unfortunately :(

on my computer, these variables are not set. You should may be post on sage-devel.



---

archive/issue_comments_310018.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-06-04T09:00:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22327#issuecomment-310018",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_310019.json:
```json
{
    "body": "any help to review this patch is more than welcome ;)",
    "created_at": "2017-07-07T03:50:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22327#issuecomment-310019",
    "user": "https://github.com/dcoudert"
}
```

any help to review this patch is more than welcome ;)



---

archive/issue_comments_310020.json:
```json
{
    "body": "I've looked over things a little bit, still need to look over the code more carefully and try to break things.\n\nIn terms of the docstrings, for `chromatic_index()`:\n- I think that mentioning that the method is a front-end and the `See also:` should be placed after `INPUT:`, but before `EXAMPLES:`.\n\n- I don't think there's much of a point to doing `n=randint(3,6)`, because I believe Sage always uses the same initial seed for random number generation in tests. Which means it won't succeed in finding errors like...\n\n- Chromatic index of a complete graph K_n is equal to n if n is odd, and n-1 if n is even. It is not always equal to n as stated. Presumably doctests are always \"randomly\" picking n to be 3 or 5, since they never pick this up.\n\n- I think instead of having two examples with the path graph, it might be better to do one example with the path graph, and one or two examples with more 'exotic' graphs (Maybe petersen graph and some graph that isn't regular?).\n\nFor `edge_coloring()`:\n\n- There needs to be some examples in the documentation showing/testing what happens when `value_only=False` and an edge partition is returned.\n\n- It's also not entirely clear from the documentation what is supposed to happen when `hex_colors=False`.",
    "created_at": "2017-07-12T19:42:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22327#issuecomment-310020",
    "user": "https://github.com/kevindilks"
}
```

I've looked over things a little bit, still need to look over the code more carefully and try to break things.

In terms of the docstrings, for `chromatic_index()`:
- I think that mentioning that the method is a front-end and the `See also:` should be placed after `INPUT:`, but before `EXAMPLES:`.

- I don't think there's much of a point to doing `n=randint(3,6)`, because I believe Sage always uses the same initial seed for random number generation in tests. Which means it won't succeed in finding errors like...

- Chromatic index of a complete graph K_n is equal to n if n is odd, and n-1 if n is even. It is not always equal to n as stated. Presumably doctests are always "randomly" picking n to be 3 or 5, since they never pick this up.

- I think instead of having two examples with the path graph, it might be better to do one example with the path graph, and one or two examples with more 'exotic' graphs (Maybe petersen graph and some graph that isn't regular?).

For `edge_coloring()`:

- There needs to be some examples in the documentation showing/testing what happens when `value_only=False` and an edge partition is returned.

- It's also not entirely clear from the documentation what is supposed to happen when `hex_colors=False`.



---

archive/issue_comments_310021.json:
```json
{
    "body": "Just realized that the `edge_coloring()` was already in Sage and not really part of this ticket...so I guess only do that if you're feeling particularly expeditious :) .",
    "created_at": "2017-07-12T19:44:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22327#issuecomment-310021",
    "user": "https://github.com/kevindilks"
}
```

Just realized that the `edge_coloring()` was already in Sage and not really part of this ticket...so I guess only do that if you're feeling particularly expeditious :) .



---

archive/issue_comments_310022.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-07-13T00:12:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22327#issuecomment-310022",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_310023.json:
```json
{
    "body": "I addressed all your comments. It's true that the `edge_coloring` method was lacking of examples.\nOn my side it passes all tests and I can build/display properly the doc. Hope it's the same for you.\n\nDon't forget to add your real name as a reviewer. Thanks.",
    "created_at": "2017-07-13T00:15:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22327#issuecomment-310023",
    "user": "https://github.com/dcoudert"
}
```

I addressed all your comments. It's true that the `edge_coloring` method was lacking of examples.
On my side it passes all tests and I can build/display properly the doc. Hope it's the same for you.

Don't forget to add your real name as a reviewer. Thanks.



---

archive/issue_comments_310024.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-07-16T14:35:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22327#issuecomment-310024",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_310025.json:
```json
{
    "body": "The solution of `edge_coloring` depends on the ILP solver. My default solver is cplex, which is not the case of the patchbot. I'm now forcing `GLPK` in the examples.",
    "created_at": "2017-07-16T14:37:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22327#issuecomment-310025",
    "user": "https://github.com/dcoudert"
}
```

The solution of `edge_coloring` depends on the ILP solver. My default solver is cplex, which is not the case of the patchbot. I'm now forcing `GLPK` in the examples.



---

archive/issue_comments_310026.json:
```json
{
    "body": "Only last thing I see that needs to be addressed is that Patchbot is not happy with something about the `.. SEE ALSO:` blocks, but I'm not sure exactly what. My best guess would be that `See also:` is reserved for things that link within the software/documentation, and links to external references like Wikipedia should be in a `References` section.",
    "created_at": "2017-07-18T00:05:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22327#issuecomment-310026",
    "user": "https://github.com/kevindilks"
}
```

Only last thing I see that needs to be addressed is that Patchbot is not happy with something about the `.. SEE ALSO:` blocks, but I'm not sure exactly what. My best guess would be that `See also:` is reserved for things that link within the software/documentation, and links to external references like Wikipedia should be in a `References` section.



---

archive/issue_comments_310027.json:
```json
{
    "body": "As far as I know, the use of the `.. SEEALSO::` block is correct, so I don't understand why the patchbot is complaining :(",
    "created_at": "2017-07-18T00:47:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22327#issuecomment-310027",
    "user": "https://github.com/dcoudert"
}
```

As far as I know, the use of the `.. SEEALSO::` block is correct, so I don't understand why the patchbot is complaining :(



---

archive/issue_comments_310028.json:
```json
{
    "body": "The patchbot plugin is likely not quite smart enough for the `.. SEEALSO::` blocks (could just be a missed case in the implementation; maybe ask Fr\u00e9d\u00e9ric). It is okay to ignore the patchbot output as it is mostly a guidepost rather than a hard rule (provided the doc builds of course).",
    "created_at": "2017-07-18T11:54:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22327#issuecomment-310028",
    "user": "https://github.com/tscrim"
}
```

The patchbot plugin is likely not quite smart enough for the `.. SEEALSO::` blocks (could just be a missed case in the implementation; maybe ask Frédéric). It is okay to ignore the patchbot output as it is mostly a guidepost rather than a hard rule (provided the doc builds of course).



---

archive/issue_comments_310029.json:
```json
{
    "body": "Hi Fr\u00e9d\u00e9ric,\n\nif you have any idea what's going on here, please let us know. \nI tried to follow all rules for the formatting of blocks, but the patchbot is complaining. On my side, I can successfully build the documentation and it displays well.\n\nThanks,\nDavid.",
    "created_at": "2017-07-19T09:10:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22327#issuecomment-310029",
    "user": "https://github.com/dcoudert"
}
```

Hi Frédéric,

if you have any idea what's going on here, please let us know. 
I tried to follow all rules for the formatting of blocks, but the patchbot is complaining. On my side, I can successfully build the documentation and it displays well.

Thanks,
David.



---

archive/issue_comments_310030.json:
```json
{
    "body": "This was an issue in patchbot 2.6.9, fixed in patchbot 2.7.0. Just forget about it, as Travis told you already.",
    "created_at": "2017-07-19T09:12:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22327#issuecomment-310030",
    "user": "https://github.com/fchapoton"
}
```

This was an issue in patchbot 2.6.9, fixed in patchbot 2.7.0. Just forget about it, as Travis told you already.



---

archive/issue_comments_310031.json:
```json
{
    "body": "ok, Thanks.",
    "created_at": "2017-07-19T09:19:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22327#issuecomment-310031",
    "user": "https://github.com/dcoudert"
}
```

ok, Thanks.



---

archive/issue_comments_310032.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-07-19T17:55:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22327#issuecomment-310032",
    "user": "https://github.com/kevindilks"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_310033.json:
```json
{
    "body": "Thanks for the review.",
    "created_at": "2017-07-19T19:39:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22327#issuecomment-310033",
    "user": "https://github.com/dcoudert"
}
```

Thanks for the review.



---

archive/issue_comments_310034.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-07-26T22:13:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22327#issuecomment-310034",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
