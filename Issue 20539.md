# Issue 20539: The new full boost package doesn't install on Gentoo if boost-build is installed

Issue created by migration from https://trac.sagemath.org/ticket/20776

Original creator: fbissey

Original creation time: 2016-06-04 05:14:30

CC:  jhpalmieri tscrim

And it will always be installed if you install boost. The boost-build bit is packaged with the rest of boost and are the build system bit of boost. `b2` and the associated `bjam` build system. Very few things apart from boost uses `bjam`.

In a standard install you only care about the libraries and headers but if the boost build system is installed in a standard location, i.e. you have the file `/usr/share/boost-build/site-config.jam` in that precise location the spkg will fail to build like so

```
boost-1_61_0
====================================================
Setting up build directory for boost-1_61_0
Finished set up
****************************************************
Host system:
Linux QCD-nzi3 4.1.12-gentoo #1 SMP Fri Dec 18 16:06:42 NZDT 2015 x86_64 Intel(R) Core(TM) i7 CPU 970 @ 3.20GHz GenuineIntel GNU/Linux
****************************************************
C compiler: gcc
C compiler version:
Using built-in specs.
COLLECT_GCC=/usr/x86_64-pc-linux-gnu/gcc-bin/5.3.0/gcc
COLLECT_LTO_WRAPPER=/usr/libexec/gcc/x86_64-pc-linux-gnu/5.3.0/lto-wrapper
Target: x86_64-pc-linux-gnu
Configured with: /scratch2/portage/sys-devel/gcc-5.3.0/work/gcc-5.3.0/configure --host=x86_64-pc-linux-gnu --build=x86_64-pc-linux-gnu --prefix=/usr --bindir=/usr/x86_64-pc-linux-gnu/gcc-bin/5.3.0 --includedir=/usr/lib/gcc/x86_64-pc-linux-gnu/5.3.0/include --datadir=/usr/share/gcc-data/x86_64-pc-linux-gnu/5.3.0 --mandir=/usr/share/gcc-data/x86_64-pc-linux-gnu/5.3.0/man --infodir=/usr/share/gcc-data/x86_64-pc-linux-gnu/5.3.0/info --with-gxx-include-dir=/usr/lib/gcc/x86_64-pc-linux-gnu/5.3.0/include/g++-v5 --with-python-dir=/share/gcc-data/x86_64-pc-linux-gnu/5.3.0/python --enable-languages=c,c++,fortran --enable-obsolete --enable-secureplt --disable-werror --with-system-zlib --enable-nls --without-included-gettext --enable-checking=release --with-bugurl=https://bugs.gentoo.org/ --with-pkgversion='Gentoo 5.3.0 p1.1, pie-0.6.5' --enable-libstdcxx-time --enable-shared --enable-threads=posix --enable-__cxa_atexit --enable-clocale=gnu --enable-multilib --with-multilib-list=m32,m64 --disable-altivec --disable-fixed-point --enable-targets=all --disable-libgcj --enable-libgomp --disable-libmudflap --disable-libssp --enable-libcilkrts --disable-libmpx --enable-vtable-verify --enable-libvtv --enable-lto --with-isl --disable-isl-version-check --enable-libsanitizer
Thread model: posix
gcc version 5.3.0 (Gentoo 5.3.0 p1.1, pie-0.6.5)
****************************************************
Running boost bootstrap
Building Boost.Build engine with toolset gcc... tools/build/src/engine/bin.linuxx86_64/b2
Detecting Python version... 2.7
Detecting Python root... /home/fbissey/sandbox/git-fork/sage/local
Unicode/ICU support for Boost.Regex?... /usr
Generating Boost.Build configuration in project-config.jam...

Bootstrapping is done. To build, run:

./b2

To adjust configuration, edit 'project-config.jam'.
Further information:

- Command line help:
./b2 --help

- Getting started guide:
http://www.boost.org/more/getting_started/unix-variants.html

- Boost.Build documentation:
http://www.boost.org/build/doc/html/index.html

Building boost
/home/fbissey/sandbox/git-fork/sage/local/var/tmp/sage/build/boost-1_61_0/src/tools/build/src/build/feature.jam:494: in feature.validate-value-string from module feature
error: "none" is not a known value of feature <optimization>
error: legal values: "off" "speed" "space"
/home/fbissey/sandbox/git-fork/sage/local/var/tmp/sage/build/boost-1_61_0/src/tools/build/src/build/property.jam:276: in validate1 from module property
/home/fbissey/sandbox/git-fork/sage/local/var/tmp/sage/build/boost-1_61_0/src/tools/build/src/build/property.jam:302: in property.validate from module property
/home/fbissey/sandbox/git-fork/sage/local/var/tmp/sage/build/boost-1_61_0/src/tools/build/src/tools/builtin.jam:381: in variant from module builtin
/usr/share/boost-build/site-config.jam:9: in modules.load from module site-config
/home/fbissey/sandbox/git-fork/sage/local/var/tmp/sage/build/boost-1_61_0/src/tools/build/src/build-system.jam:249: in load-config from module build-system
/home/fbissey/sandbox/git-fork/sage/local/var/tmp/sage/build/boost-1_61_0/src/tools/build/src/build-system.jam:351: in load-configuration-files from module build-system
/home/fbissey/sandbox/git-fork/sage/local/var/tmp/sage/build/boost-1_61_0/src/tools/build/src/build-system.jam:524: in load from module build-system
/home/fbissey/sandbox/git-fork/sage/local/var/tmp/sage/build/boost-1_61_0/src/tools/build/src/kernel/modules.jam:295: in import from module modules
/home/fbissey/sandbox/git-fork/sage/local/var/tmp/sage/build/boost-1_61_0/src/tools/build/src/kernel/bootstrap.jam:139: in boost-build from module
/home/fbissey/sandbox/git-fork/sage/local/var/tmp/sage/build/boost-1_61_0/src/boost-build.jam:17: in module scope from module

Failed to build boost.

real	0m10.184s
user	0m9.091s
sys	0m0.755s
************************************************************************
Error installing package boost-1_61_0
************************************************************************
```




---

Comment by fbissey created at 2016-06-05 04:46:19

For review.
----
New commits:


---

Comment by fbissey created at 2016-06-05 04:46:19

Changing status from new to needs_review.


---

Comment by vbraun created at 2016-07-03 10:26:47

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-07-03 14:59:05

Resolution: fixed
