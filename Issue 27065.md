# Issue 27065: Cubic Braid Groups

Issue created by migration from https://trac.sagemath.org/ticket/27302

Original creator: soehms

Original creation time: 2019-02-16 08:26:09

CC:  tscrim

Keywords: braid groups, complex reflection groups

This ticket implements a new class to work with factor groups of the Artin braid groups having order three on the braid generators.



---

Comment by soehms created at 2019-02-16 08:31:27

New commits:


---

Comment by soehms created at 2019-02-16 08:31:27

Changing status from new to needs_review.


---

Comment by git created at 2019-03-09 17:24:34

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by embray created at 2019-03-25 10:56:15

Ticket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)


---

Comment by git created at 2019-03-29 23:43:01

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by soehms created at 2019-03-29 23:45:46

Fixed merge conflict!


---

Comment by git created at 2019-03-30 07:31:00

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2019-03-30 17:03:35

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2019-04-01 18:05:50

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2019-04-01 18:26:09

Some random remarks:

typo "refelection"

typo "Vancover"

burau >>> Burau

typo "availlable"

typo "as_permutatopn_group"

Use "Construct" and "Return" in the first lines of doc, not "Constructs" and "Returns"

"len(root_list) == 0" could be "not(root_list)" which is faster


```
+    TESTS:
+
+        sage: C3 = CubicBraidGroup(3)
```

is missing a double `::`

range(0, n-3) >>> range(n - 3)

In

```
+            if m % 2  == 0:
+                mhalf = m/2
+            else:
+                mhalf = (m-1)/2
```

rather use exact division `//`


---

Comment by git created at 2019-04-02 19:03:32

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by soehms created at 2019-04-02 19:05:18

Replying to [comment:10 chapoton]:
> 
> 
> 
> Some random remarks:
> ...
Thanks for having a look at this!


---

Comment by chapoton created at 2019-04-02 19:08:54

two more:

typo: hermitain

typo: performace


---

Comment by git created at 2019-04-04 20:33:51

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by soehms created at 2019-04-04 20:34:50

Replying to [comment:13 chapoton]:
> two more:
> 
> typo: hermitain
> 
> typo: performace
Thanks again!


---

Comment by tscrim created at 2019-04-07 02:15:35

From my first look-through, the code looks to be quite good. I have a lot of little comments that are going to be better handled as a push from me, but mostly they revolve around docstring formatting, not using `<>`, PEP8, and `if len(foo) == 0:` -> `if not foo:` (if you want to hunt them down and take care of them). Some more substantial comments are:

- A number of methods do not have doctests.
- I am tempted to get rid of the `Enum`, but at least I don't think it should be accessible from the top-level, which means it should not be a parameter of `CubicBraidGroup`.
- I am inclined to put `CubicBraidGroup` as the class with a `__classcall_private__` construction, which in some ways would contradict the previous comment. I might have to think more about this.


---

Comment by soehms created at 2019-04-08 07:20:08

Replying to [comment:16 tscrim]:
> From my first look-through, the code looks to be quite good. I have a lot of little comments that are going to be better handled as a push from me, but mostly they revolve around docstring formatting, not using `<>`, PEP8, and `if len(foo) == 0:` -> `if not foo:` (if you want to hunt them down and take care of them). Some more substantial comments are:
> 
> - A number of methods do not have doctests.

It seems that you didn't look at the most recent commit. I did some corrections
last week after inspecting the patchbot results more carefully and following Frédéric
Chapoton's hints. So, I think your comments above should be fixed, already.


> - I am tempted to get rid of the `Enum`, but at least I don't think it should be accessible from the top-level, which means it should not be a parameter of `CubicBraidGroup`.

In my first version (under Sage 6.9, the one I pushed to CoCalc) I didn't use `Enum`
since it was not accessible at that time. I'm used to avoid creating
code that depends on literals. Maybe this is an old fashioned, C-driven opinion,
but I'm still convinced that such code is not really save. So I changed this
since `Enum` is available, right now. By the functions `AssionGroupU/S` there
is no need for the user to have the `Enum` externally.

On the other hand I realized that it is still unusual to use `Enum` in Sage (there is
just one module (`modular_decomposition.py`) doing that). Therefore, I'm open to change this again.


> - I am inclined to put `CubicBraidGroup` as the class with a `__classcall_private__` construction, which in some ways would contradict the previous comment. I might have to think more about this.

As far as I understand that construction, this would replace the three functions to create an instance of the class, right? I implemented the construction of instances according to the `braid.py` module. What is the advantage to use `__classcall_private__` instead? I would appreciate to learn more about that!


---

Comment by tscrim created at 2019-04-08 22:16:32

Replying to [comment:17 soehms]:
> Replying to [comment:16 tscrim]:
> > From my first look-through, the code looks to be quite good. I have a lot of little comments that are going to be better handled as a push from me, but mostly they revolve around docstring formatting, not using `<>`, PEP8, and `if len(foo) == 0:` -> `if not foo:` (if you want to hunt them down and take care of them). Some more substantial comments are:
> > 
> > - A number of methods do not have doctests.
> 
> It seems that you didn't look at the most recent commit. I did some corrections
> last week after inspecting the patchbot results more carefully and following Frédéric
> Chapoton's hints. So, I think your comments above should be fixed, already.

I was pretty sure I was looking at the most recent commit because I clicked on the branch name. Although with beta1 released, there appears to be another (certainly trivial) merge conflict.

> > - I am tempted to get rid of the `Enum`, but at least I don't think it should be accessible from the top-level, which means it should not be a parameter of `CubicBraidGroup`.
> 
> In my first version (under Sage 6.9, the one I pushed to CoCalc) I didn't use `Enum`
> since it was not accessible at that time. I'm used to avoid creating
> code that depends on literals. Maybe this is an old fashioned, C-driven opinion,
> but I'm still convinced that such code is not really save. So I changed this
> since `Enum` is available, right now. By the functions `AssionGroupU/S` there
> is no need for the user to have the `Enum` externally.

I go back-and-forth on the `Enum`. If this was C/C++, I would say definitely use it (and I do like the paradigm overall). The problem is in Python, it means we have to explicitly import it, and we have to put it into the global namespace if we want it to be top-level accessible to the user. As you said, with `AssionGroupU/S` (which does serve a role in the global namespace) we can avoid this. So maybe this is not a problem as long as we hide it completely from the (standard) user.

> > - I am inclined to put `CubicBraidGroup` as the class with a `__classcall_private__` construction, which in some ways would contradict the previous comment. I might have to think more about this.
> 
> As far as I understand that construction, this would replace the three functions to create an instance of the class, right? I implemented the construction of instances according to the `braid.py` module. What is the advantage to use `__classcall_private__` instead? I would appreciate to learn more about that!

`__classcall_private__` essentially allows you to do extra processing on the inputs before getting to the `__init__` method. Thus we can actually return other parents/instances/objects/etc. if we deem the inputs worthy. Thus we can simply replace the `CubicBraidGroup` function with `CubicBraidGroup_class` (renamed to `CubicBraidGroup`), making it easier maintenance-wise as the top-level object is the class itself.

Although maybe we don't even need such a heavy tool as the `CubicBraidGroup_class.__init__` does the job, and we just have the default being the `Enum` for the standard cubic braid group. I think this might actually be sufficient.


---

Comment by git created at 2019-04-12 10:05:37

Branch pushed to git repo; I updated commit sha1. New commits:


---

Attachment


---

Comment by soehms created at 2019-04-12 10:12:40

Thanks for your explanations, Travis! Indeed, I had no good feeling to include the `Enum`
in the global namespace. So, I encoded the type into the names of the construction-functions.
But, this would not be an option for longer list of types (and is structurally not really nice).

Therefore, I now try the following solution:

1. I move the `Enum` into the class as a member, so that it is implicitly in the global namespace (via the name of the class).
2. I make the function `CubicBraidGroup` be the `__classcall_private__` method and rename the class accordingly as you suggested.

I keep the functions `AssionGroupS/U` for convenience even though there aren't necessary
any more (in order to capsule the import of the `Enum`). The remaining purpose of them is
to reduce key-strokes needed to create the corresponding instances. But, in principle they
could be removed.

Compared to the use of literals the advantage of the `Enum` is not only the paradigm, but
also the possibility for the user to select the type from the list:

![](CubicBraidGroupType.png)


---

Comment by chapoton created at 2019-05-27 07:04:31

Changing status from needs_review to needs_work.


---

Comment by chapoton created at 2019-05-27 07:04:31

red branch => needs work


---

Comment by git created at 2019-05-30 08:13:15

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2019-05-30 08:14:26

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by soehms created at 2019-05-30 08:17:09

Changing status from needs_work to needs_review.


---

Comment by soehms created at 2019-05-30 08:17:09

I set needs_review again, even though the optional gap3 doctests fail under python3. But this seems to be another problem:


```
sage: from sage.interfaces.gap3 import gap3
sage: gap3._start()
sage: gap3.load_package("chevie")
Traceback (most recent call last):
...
RuntimeError: startswith first arg must be bytes or a tuple of bytes, not str
```


Is this a known issue?


---

Comment by embray created at 2019-07-03 11:37:56

Moving tickets from the Sage 8.8 milestone that have been actively worked on in the last six months to the next release milestone (optimistically).


---

Comment by git created at 2019-08-11 08:46:15

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by soehms created at 2019-08-11 08:51:03

While developing a class for cubic _Hecke_ algebras I observed that comparison for cubic braids on more than 5 strands didn't terminate (since the implementation from the finitely presented groups was used). So, I replaced that comparison for the groups on more than 5 strands by comparison of the corresponding braids resp. the _Burau_-matrix of the cubic braid.

The default setting for the characteristic of the _Burau_-matrix was implemented in the `as_matrix_group` method, which is not the right place. I fixed that, as well.


---

Comment by chapoton created at 2019-08-24 19:33:00

patchbot's pyflakes-plugin reports an unused import


---

Comment by git created at 2019-09-17 18:58:17

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2019-09-17 18:59:48

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by soehms created at 2019-09-17 19:02:52

I do the following:
* fix pyflakes
*  add method `__hash__` to the element class, since the inherited version is not well defined
*  add method `_matrix_` to the element class as an alternative to the default of `burau_matrix` with better performance properties.
* add method `__init__` to the element class to perform a reduction on the Tietze-tuple.


---

Comment by git created at 2019-10-19 07:52:17

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2019-11-08 08:06:10

now the branch is red


---

Comment by chapoton created at 2019-11-08 08:06:10

Changing status from needs_review to needs_work.


---

Comment by git created at 2019-11-09 08:32:35

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by soehms created at 2019-11-09 08:37:05

Changing status from needs_work to needs_review.


---

Comment by soehms created at 2019-11-09 08:37:05

Merge error in references index.rst fixed


---

Comment by chapoton created at 2019-11-13 08:06:12

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2019-11-13 08:06:12

ok, let it be. One can keep further enhancement for later tickets.


---

Comment by soehms created at 2019-11-13 20:39:02

Thanks!


---

Comment by vbraun created at 2019-11-16 20:15:50

Resolution: fixed
