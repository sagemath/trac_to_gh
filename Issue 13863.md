# Issue 13863: generic_graph_pyx.pyx invalid free() with MALLOC_CHECK_=3

archive/issues_013863.json:
```json
{
    "body": "Assignee: rlm\n\nCC:  jpflori simonking\n\n\n```\n$ env MALLOC_CHECK_=3 ./sage -t devel/sage/sage/graphs/generic_graph_pyx.pyx\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/14067\n\n",
    "created_at": "2013-02-06T09:52:08Z",
    "labels": [
        "memleak",
        "blocker",
        "bug"
    ],
    "title": "generic_graph_pyx.pyx invalid free() with MALLOC_CHECK_=3",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13863",
    "user": "jdemeyer"
}
```
Assignee: rlm

CC:  jpflori simonking


```
$ env MALLOC_CHECK_=3 ./sage -t devel/sage/sage/graphs/generic_graph_pyx.pyx
```


Issue created by migration from https://trac.sagemath.org/ticket/14067





---

archive/issue_comments_172615.json:
```json
{
    "body": "Attachment",
    "created_at": "2013-02-06T10:03:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13863#issuecomment-172615",
    "user": "jdemeyer"
}
```

Attachment



---

archive/issue_comments_172616.json:
```json
{
    "body": "The problem occurs when deallocating self.stack.",
    "created_at": "2013-02-06T10:12:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13863#issuecomment-172616",
    "user": "jpflori"
}
```

The problem occurs when deallocating self.stack.



---

archive/issue_comments_172617.json:
```json
{
    "body": "Got it, we are assigning `self.stack[1]` even if `self.stack` is an array with just one element.",
    "created_at": "2013-02-06T10:16:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13863#issuecomment-172617",
    "user": "jdemeyer"
}
```

Got it, we are assigning `self.stack[1]` even if `self.stack` is an array with just one element.



---

archive/issue_comments_172618.json:
```json
{
    "body": "Attachment",
    "created_at": "2013-02-06T10:32:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13863#issuecomment-172618",
    "user": "jdemeyer"
}
```

Attachment



---

archive/issue_comments_172619.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-02-06T10:32:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13863#issuecomment-172619",
    "user": "jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_172620.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-02-06T10:45:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13863#issuecomment-172620",
    "user": "jpflori"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_172621.json:
```json
{
    "body": "Works well.",
    "created_at": "2013-02-06T10:45:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13863#issuecomment-172621",
    "user": "jpflori"
}
```

Works well.



---

archive/issue_comments_172622.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-02-09T12:16:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13863",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13863#issuecomment-172622",
    "user": "jdemeyer"
}
```

Resolution: fixed
