# Issue 13863: generic_graph_pyx.pyx invalid free() with MALLOC_CHECK_=3

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2013-02-06 09:52:08

Assignee: rlm

CC:  jpflori simonking


```
$ env MALLOC_CHECK_=3 ./sage -t devel/sage/sage/graphs/generic_graph_pyx.pyx
```



---

Attachment


---

Comment by jpflori created at 2013-02-06 10:12:22

The problem occurs when deallocating self.stack.


---

Comment by jdemeyer created at 2013-02-06 10:16:19

Got it, we are assigning `self.stack[1]` even if `self.stack` is an array with just one element.


---

Attachment


---

Comment by jdemeyer created at 2013-02-06 10:32:42

Changing status from new to needs_review.


---

Comment by jpflori created at 2013-02-06 10:45:11

Changing status from needs_review to positive_review.


---

Comment by jpflori created at 2013-02-06 10:45:11

Works well.


---

Comment by jdemeyer created at 2013-02-09 12:16:15

Resolution: fixed
