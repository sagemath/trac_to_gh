# Issue 12851: Move toric varieties to a dedicated folder

Issue created by migration from Trac.

Original creator: novoselt

Original creation time: 2012-05-26 16:09:30

Assignee: AlexGhitza

CC:  vbraun

Currently all files related to toric varieties are in `schemes/generic`, yet there are many of them and it would be more convenient to have a separate folder rather than `toric_` prefix on all of them.


---

Comment by novoselt created at 2012-05-26 16:09:44

Changing type from PLEASE CHANGE to enhancement.


---

Attachment

Automatic adjustment of imports


---

Attachment

Manual adjustment of imports


---

Comment by novoselt created at 2012-05-26 19:25:28

Changing status from new to needs_review.


---

Comment by novoselt created at 2012-05-26 19:36:55

Changing keywords from "" to "toric, sd40.5".


---

Comment by novoselt created at 2012-05-27 16:51:19

Script for rebasing other patches on top of this ticket


---

Attachment

The script may be not too elegant, but it worked for rebasing #12892 on top of this ticket.

For the patchbot:

Apply trac_13023_move_toric_files.patch trac_13023_adjust_toric_imports.patch trac_13023_fix_circular_imports.patch


---

Comment by was created at 2012-05-27 19:53:41

This looks good.


---

Comment by was created at 2012-05-27 19:53:41

Changing status from needs_review to positive_review.


---

Comment by was created at 2012-05-27 20:14:11

The patchbot fails due to:

```
trac_13023_fix_circular_imports.patch
Trailing whitespace inserted on 5 non-empty lines.
Traceback (most recent call last):
  File "/opt/patchbot-5.1.beta0/local/bin/patchbot/patchbot.py", line 276, in test_a_ticket
    plugin(ticket, **kwds)
  File "/opt/patchbot-5.1.beta0/local/bin/patchbot/plugins.py", line 49, in trailing_whitespace
    raise ValueError(msg)
ValueError: Trailing whitespace inserted on 5 non-empty lines.
plugins.trailing_whitespace -- 0 seconds
```


but when I manually did "sage -br", everything did work fine, hence the positive review.


---

Comment by jdemeyer created at 2012-05-29 14:56:23

Changing status from positive_review to needs_work.


---

Comment by jdemeyer created at 2012-05-29 14:56:23

The documentation needs work:

```
dochtml.log:/padic/scratch/jdemeyer/merger/sage-5.1.beta2/devel/sage/doc/en/reference/sage/schemes/toric/variety_library.rst:11: WARNING: autodoc can't import/find module 'sage.schemes.toric.variety_library', it reported error: "No module named variety_library", please check your spelling and sys.path
dochtml.log:None:27: WARNING: citation not found: FultonP65
dochtml.log:None:70: WARNING: citation not found: FS
```



---

Attachment

Actual move with minimal changes


---

Comment by novoselt created at 2012-05-29 16:35:49

Changing status from needs_work to positive_review.


---

Comment by novoselt created at 2012-05-29 16:35:49

I'll take the liberty of switching back to positive review - in the rst file "variety_library" had to be just "library".


---

Comment by novoselt created at 2012-05-29 16:36:58

Apply trac_13023_move_toric_files.patch trac_13023_adjust_toric_imports.patch trac_13023_fix_circular_imports.patch


---

Comment by novoselt created at 2012-05-29 17:33:49

With new patches and after completely wiping out the doc output:

```
sphinx-build -b html -d /home/novoselt/sage-5.1.beta0/devel/sage/doc/output/doctrees/en/reference    /home/novoselt/sage-5.1.beta0/devel/sage/doc/en/reference /home/novoselt/sage-5.1.beta0/devel/sage/doc/output/html/en/reference
Running Sphinx v1.1.2
loading pickled environment... not yet created
loading intersphinx inventory from /home/novoselt/sage-5.1.beta0/devel/sage/doc/common/python.inv...
building [html]: targets for 1026 source files that are out of date
updating environment: 1026 added, 0 changed, 0 removed
reading sources... [100%] todolist                                                                                                                           
looking for now-outdated files... none found
pickling environment... done
checking consistency... done
preparing documents... done
writing output... [100%] todolist                                                                                                                            
writing additional files... genindex py-modindex search
copying images... [100%] sage/homology/../../media/homology/torus_labelled.png                                                                               
copying static files... done
dumping search index... done
dumping object inventory... done
build succeeded.
Build finished.  The built documents can be found in /home/novoselt/sage-5.1.beta0/devel/sage/doc/output/html/en/reference
```

so all seems to be well now.


---

Comment by jdemeyer created at 2012-06-14 06:43:38

Resolution: fixed
