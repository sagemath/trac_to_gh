# Issue 12347: cvxopt should only add -lcblas when that library exists

archive/issues_012347.json:
```json
{
    "body": "Assignee: tbd\n\nThe following is Sage-specific code in cvxopt's `setup.py`:\n\n```\nif os.popen('sage_fortran --version').read()[:3]=='G95':\n    libraries = ['m','lapack','gsl','gslcblas','blas','f95']\n    GCC_LIB_DIR=SAGE_LIB\n    if os.path.exists(GCC_LIB_DIR + \"/gcc-lib\"):\n       GCC_LIB_DIR += \"/gcc-lib/\"\n       GCC_LIB_DIR += os.listdir(GCC_LIB_DIR)[0] + \"/\"\n       GCC_LIB_DIR += os.listdir(GCC_LIB_DIR)[0] + \"/\"\n    libdirs = [ATLAS_LIB_DIR,GCC_LIB_DIR]\nelif os.environ['UNAME'] == 'CYGWIN':\n    libraries = ['lapack','gsl','gslcblas','blas', 'gfortran']\nelse:\n    libraries = ['m','lapack','gsl','blas','gslcblas','cblas','gfortran','atlas']\n```\n\n\nAt the end, `cblas` is added, even though this isn't installed on Darwin.  This gives problem on OS X 10.4 with #12369 (without #12369, the first \"if\" evaluates to True).\n\nIssue created by migration from https://trac.sagemath.org/ticket/12519\n\n",
    "created_at": "2012-02-16T10:15:22Z",
    "labels": [
        "component: packages: standard",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.0",
    "title": "cvxopt should only add -lcblas when that library exists",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12347",
    "user": "https://github.com/jdemeyer"
}
```
Assignee: tbd

The following is Sage-specific code in cvxopt's `setup.py`:

```
if os.popen('sage_fortran --version').read()[:3]=='G95':
    libraries = ['m','lapack','gsl','gslcblas','blas','f95']
    GCC_LIB_DIR=SAGE_LIB
    if os.path.exists(GCC_LIB_DIR + "/gcc-lib"):
       GCC_LIB_DIR += "/gcc-lib/"
       GCC_LIB_DIR += os.listdir(GCC_LIB_DIR)[0] + "/"
       GCC_LIB_DIR += os.listdir(GCC_LIB_DIR)[0] + "/"
    libdirs = [ATLAS_LIB_DIR,GCC_LIB_DIR]
elif os.environ['UNAME'] == 'CYGWIN':
    libraries = ['lapack','gsl','gslcblas','blas', 'gfortran']
else:
    libraries = ['m','lapack','gsl','blas','gslcblas','cblas','gfortran','atlas']
```


At the end, `cblas` is added, even though this isn't installed on Darwin.  This gives problem on OS X 10.4 with #12369 (without #12369, the first "if" evaluates to True).

Issue created by migration from https://trac.sagemath.org/ticket/12519





---

archive/issue_comments_145222.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-02-23T22:07:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12347#issuecomment-145222",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_145223.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-02-24T20:38:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12347#issuecomment-145223",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_145224.json:
```json
{
    "body": "In spkg-install, these lines should be removed:\n\n```\n# Solaris-specific and other patches\ncp -p patches/cvxopt.h src/src/C/\n\n# patch to use always use GSL's random\ncp -p patches/__init__.py src/src/python/\n\n# setting Sage-specific libraries locations, etc.\ncp -p patches/setup.py src/src/\n```\n\nsince they are taken care of by patch.",
    "created_at": "2012-02-24T20:38:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12347#issuecomment-145224",
    "user": "https://github.com/jhpalmieri"
}
```

In spkg-install, these lines should be removed:

```
# Solaris-specific and other patches
cp -p patches/cvxopt.h src/src/C/

# patch to use always use GSL's random
cp -p patches/__init__.py src/src/python/

# setting Sage-specific libraries locations, etc.
cp -p patches/setup.py src/src/
```

since they are taken care of by patch.



---

archive/issue_comments_145225.json:
```json
{
    "body": "Replying to [comment:4 jdemeyer]:\n\nAm I correct in saying that this was caused by Darwin being determined by the presence of G95, which is no longer the right way to do this (or perhaps it never was --- mea culpa then...) ?\n\nRegarding the failures of tests on OSX 10.7 (see #12011): it would be great if the exact Sage version (gcc/clang?) /Xcode version/hardware state (32 vs 64 bits) on these are reported. As it looks at the moment, that there is a bug in Apple-supplied\nlapack/blas, and this might force us to build Atlas on OSX 10.7 and use it.",
    "created_at": "2012-02-24T23:22:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12347#issuecomment-145225",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:4 jdemeyer]:

Am I correct in saying that this was caused by Darwin being determined by the presence of G95, which is no longer the right way to do this (or perhaps it never was --- mea culpa then...) ?

Regarding the failures of tests on OSX 10.7 (see #12011): it would be great if the exact Sage version (gcc/clang?) /Xcode version/hardware state (32 vs 64 bits) on these are reported. As it looks at the moment, that there is a bug in Apple-supplied
lapack/blas, and this might force us to build Atlas on OSX 10.7 and use it.



---

archive/issue_comments_145226.json:
```json
{
    "body": "Replying to [comment:6 dimpase]:\n> Regarding the failures of tests on OSX 10.7 (see #12011): it would be great if the exact Sage version (gcc/clang?) /Xcode version/hardware state (32 vs 64 bits) on these are reported. \n\nIn my experience, the tests fail on every OS X 10.7 machine I've tried, with Xcode 4.1, 4.2, 4.3, with both gcc and clang.\n\n> As it looks at the moment, that there is a bug in Apple-supplied\n> lapack/blas, and this might force us to build Atlas on OSX 10.7 and use it.\n\nThat would be unfortunate. I also wonder why we don't see doctest failures elsewhere in Sage if there are bugs in these libraries.",
    "created_at": "2012-02-25T16:55:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12347#issuecomment-145226",
    "user": "https://github.com/jhpalmieri"
}
```

Replying to [comment:6 dimpase]:
> Regarding the failures of tests on OSX 10.7 (see #12011): it would be great if the exact Sage version (gcc/clang?) /Xcode version/hardware state (32 vs 64 bits) on these are reported. 

In my experience, the tests fail on every OS X 10.7 machine I've tried, with Xcode 4.1, 4.2, 4.3, with both gcc and clang.

> As it looks at the moment, that there is a bug in Apple-supplied
> lapack/blas, and this might force us to build Atlas on OSX 10.7 and use it.

That would be unfortunate. I also wonder why we don't see doctest failures elsewhere in Sage if there are bugs in these libraries.



---

archive/issue_comments_145227.json:
```json
{
    "body": "Attachment [cvxopt-1.1.3.p1.diff](tarball://root/attachments/some-uuid/ticket12519/cvxopt-1.1.3.p1.diff) by @jdemeyer created at 2012-02-27 15:46:12\n\nDiff for the cvxopt spkg, for review only",
    "created_at": "2012-02-27T15:46:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12347#issuecomment-145227",
    "user": "https://github.com/jdemeyer"
}
```

Attachment [cvxopt-1.1.3.p1.diff](tarball://root/attachments/some-uuid/ticket12519/cvxopt-1.1.3.p1.diff) by @jdemeyer created at 2012-02-27 15:46:12

Diff for the cvxopt spkg, for review only



---

archive/issue_comments_145228.json:
```json
{
    "body": "Fixed, needs review.",
    "created_at": "2012-02-27T15:47:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12347#issuecomment-145228",
    "user": "https://github.com/jdemeyer"
}
```

Fixed, needs review.



---

archive/issue_comments_145229.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-02-27T15:47:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12347#issuecomment-145229",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_145230.json:
```json
{
    "body": "Replying to [comment:7 jhpalmieri]:\n> That would be unfortunate. I also wonder why we don't see doctest failures elsewhere in Sage if there are bugs in these libraries.\n\nBecause the cvxopt test suite itself is more complete than Sage?  Maybe it just fails on some corner case which isn't in the doctests.  I agree it would be a good idea to add a doctest to catch the OS X 10.7 failures.",
    "created_at": "2012-02-27T15:49:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12347#issuecomment-145230",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:7 jhpalmieri]:
> That would be unfortunate. I also wonder why we don't see doctest failures elsewhere in Sage if there are bugs in these libraries.

Because the cvxopt test suite itself is more complete than Sage?  Maybe it just fails on some corner case which isn't in the doctests.  I agree it would be a good idea to add a doctest to catch the OS X 10.7 failures.



---

archive/issue_comments_145231.json:
```json
{
    "body": "Replying to [comment:7 jhpalmieri]:\n> > As it looks at the moment, that there is a bug in Apple-supplied\n> > lapack/blas, and this might force us to build Atlas on OSX 10.7 and use it.\n> \n> That would be unfortunate. I also wonder why we don't see doctest failures elsewhere in Sage if there are bugs in these libraries.\n\nI asked upstream for examples demonstrating lapack/blas bug(s) on OSX 10.7. They are looking into it.",
    "created_at": "2012-02-27T22:32:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12347#issuecomment-145231",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:7 jhpalmieri]:
> > As it looks at the moment, that there is a bug in Apple-supplied
> > lapack/blas, and this might force us to build Atlas on OSX 10.7 and use it.
> 
> That would be unfortunate. I also wonder why we don't see doctest failures elsewhere in Sage if there are bugs in these libraries.

I asked upstream for examples demonstrating lapack/blas bug(s) on OSX 10.7. They are looking into it.



---

archive/issue_comments_145232.json:
```json
{
    "body": "Replying to [comment:7 jhpalmieri]:\n\n> In my experience, the tests fail on every OS X 10.7 machine I've tried, with Xcode 4.1, 4.2, 4.3, with both gcc and clang.\n\nhere is a beautiful OSX 10.7-specific bug (got it on sqrt5 with Sage 5.0.beta6):\n(the syntax const-M, for M a matrix, is supposed to replace each M_ij with const-M_ij)\n\n\n```\nfrom cvxopt import matrix\nb=matrix([ 1.00e+00, 1.63e-01, 2.83e-01, 9.47e-01, 2.32e-01, 4.85e-01,\n9.57e-01, 7.44e-01])\nc=1.-b\nprint \"b :\\n\", b\nprint \"1-b:\\n\", c\n\n\nb :\n[ 1.00e+00]\n[ 1.63e-01]\n[ 2.83e-01]\n[ 9.47e-01]\n[ 2.32e-01]\n[ 4.85e-01]\n[ 9.57e-01]\n[ 7.44e-01]\n\n1-b:\n[-1.00e+00]\n[-1.63e-01]\n[-2.83e-01]\n[-9.47e-01]\n[-2.32e-01]\n[-4.85e-01]\n[-9.57e-01]\n[-7.44e-01]\n```\n\n\nInterestingly, a shorter vector b works OK...\n\nDo you have any idea what goes wrong here?\n(this is actually the bug responsible for failure of \"acent\" test in [here](http://sage.math.washington.edu/home/palmieri/misc/cvxopt-1.1.3.log))",
    "created_at": "2012-03-05T13:18:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12347#issuecomment-145232",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:7 jhpalmieri]:

> In my experience, the tests fail on every OS X 10.7 machine I've tried, with Xcode 4.1, 4.2, 4.3, with both gcc and clang.

here is a beautiful OSX 10.7-specific bug (got it on sqrt5 with Sage 5.0.beta6):
(the syntax const-M, for M a matrix, is supposed to replace each M_ij with const-M_ij)


```
from cvxopt import matrix
b=matrix([ 1.00e+00, 1.63e-01, 2.83e-01, 9.47e-01, 2.32e-01, 4.85e-01,
9.57e-01, 7.44e-01])
c=1.-b
print "b :\n", b
print "1-b:\n", c


b :
[ 1.00e+00]
[ 1.63e-01]
[ 2.83e-01]
[ 9.47e-01]
[ 2.32e-01]
[ 4.85e-01]
[ 9.57e-01]
[ 7.44e-01]

1-b:
[-1.00e+00]
[-1.63e-01]
[-2.83e-01]
[-9.47e-01]
[-2.32e-01]
[-4.85e-01]
[-9.57e-01]
[-7.44e-01]
```


Interestingly, a shorter vector b works OK...

Do you have any idea what goes wrong here?
(this is actually the bug responsible for failure of "acent" test in [here](http://sage.math.washington.edu/home/palmieri/misc/cvxopt-1.1.3.log))



---

archive/issue_comments_145233.json:
```json
{
    "body": "Replying to [comment:11 dimpase]:\n> Do you have any idea what goes wrong here?\nProbably Apple shipping a broken BLAS.  See #12011.",
    "created_at": "2012-03-05T13:21:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12347#issuecomment-145233",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:11 dimpase]:
> Do you have any idea what goes wrong here?
Probably Apple shipping a broken BLAS.  See #12011.



---

archive/issue_comments_145234.json:
```json
{
    "body": "Replying to [comment:12 jdemeyer]:\n> Replying to [comment:11 dimpase]:\n> > Do you have any idea what goes wrong here?\n> Probably Apple shipping a broken BLAS.  See #12011.\nthat's what one of CVXOPT people says (as I reported :)), but it would be good to know for sure.\nI've reported this example upstream (to CVXOPT), too. \n\nI forgot to mention that this is a plain Python example. To run it in Sage proper, one needs to do first\n\n```\nsage: preparser(on=False)\n```\n",
    "created_at": "2012-03-05T13:50:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12347#issuecomment-145234",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:12 jdemeyer]:
> Replying to [comment:11 dimpase]:
> > Do you have any idea what goes wrong here?
> Probably Apple shipping a broken BLAS.  See #12011.
that's what one of CVXOPT people says (as I reported :)), but it would be good to know for sure.
I've reported this example upstream (to CVXOPT), too. 

I forgot to mention that this is a plain Python example. To run it in Sage proper, one needs to do first

```
sage: preparser(on=False)
```




---

archive/issue_comments_145235.json:
```json
{
    "body": "Replying to [comment:13 dimpase]:\n> > Probably Apple shipping a broken BLAS.  See #12011.\n\nconfirmed! see the following sage-devel [thread](https://groups.google.com/d/topic/sage-devel/f1XvpcK0KxE/discussion)",
    "created_at": "2012-03-06T10:34:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12347#issuecomment-145235",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:13 dimpase]:
> > Probably Apple shipping a broken BLAS.  See #12011.

confirmed! see the following sage-devel [thread](https://groups.google.com/d/topic/sage-devel/f1XvpcK0KxE/discussion)



---

archive/issue_comments_145236.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-03-06T13:21:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12347#issuecomment-145236",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_145237.json:
```json
{
    "body": "This needs to be coordinated with #12011.",
    "created_at": "2012-03-06T13:21:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12347#issuecomment-145237",
    "user": "https://github.com/jdemeyer"
}
```

This needs to be coordinated with #12011.



---

archive/issue_comments_145238.json:
```json
{
    "body": "Attachment [test_blas.c](tarball://root/attachments/some-uuid/ticket12519/test_blas.c) by @kcrisman created at 2012-03-06 14:45:11\n\nFor reproducing the failure on Lion",
    "created_at": "2012-03-06T14:45:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12347#issuecomment-145238",
    "user": "https://github.com/kcrisman"
}
```

Attachment [test_blas.c](tarball://root/attachments/some-uuid/ticket12519/test_blas.c) by @kcrisman created at 2012-03-06 14:45:11

For reproducing the failure on Lion



---

archive/issue_comments_145239.json:
```json
{
    "body": "Attachment [test_cblas.c](tarball://root/attachments/some-uuid/ticket12519/test_cblas.c) by @kcrisman created at 2012-03-06 14:45:21\n\nFor reproducing the failure on Lion",
    "created_at": "2012-03-06T14:45:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12347#issuecomment-145239",
    "user": "https://github.com/kcrisman"
}
```

Attachment [test_cblas.c](tarball://root/attachments/some-uuid/ticket12519/test_cblas.c) by @kcrisman created at 2012-03-06 14:45:21

For reproducing the failure on Lion



---

archive/issue_comments_145240.json:
```json
{
    "body": "For reproducing the failure on Lion",
    "created_at": "2012-03-06T14:45:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12347#issuecomment-145240",
    "user": "https://github.com/kcrisman"
}
```

For reproducing the failure on Lion



---

archive/issue_comments_145241.json:
```json
{
    "body": "Attachment [Makefile](tarball://root/attachments/some-uuid/ticket12519/Makefile) by @dimpase created at 2012-03-09 00:53:29\n\nReplying to [comment:14 dimpase]:\n> Replying to [comment:13 dimpase]:\n> > > Probably Apple shipping a broken BLAS.  See #12011.\n> \n> confirmed! see the following sage-devel [thread](https://groups.google.com/d/topic/sage-devel/f1XvpcK0KxE/discussion)\n\nIn fact, it turns out to be a CVXOPT bug. Please see this\n[message](https://groups.google.com/d/msg/sage-devel/f1XvpcK0KxE/oSFsKrA7MfkJ) and this [discussion](https://discussions.apple.com/message/17795537))\n\nSo we do not need Atlas on OSX 10.7, after all (or at least not yet).",
    "created_at": "2012-03-09T00:53:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12347#issuecomment-145241",
    "user": "https://github.com/dimpase"
}
```

Attachment [Makefile](tarball://root/attachments/some-uuid/ticket12519/Makefile) by @dimpase created at 2012-03-09 00:53:29

Replying to [comment:14 dimpase]:
> Replying to [comment:13 dimpase]:
> > > Probably Apple shipping a broken BLAS.  See #12011.
> 
> confirmed! see the following sage-devel [thread](https://groups.google.com/d/topic/sage-devel/f1XvpcK0KxE/discussion)

In fact, it turns out to be a CVXOPT bug. Please see this
[message](https://groups.google.com/d/msg/sage-devel/f1XvpcK0KxE/oSFsKrA7MfkJ) and this [discussion](https://discussions.apple.com/message/17795537))

So we do not need Atlas on OSX 10.7, after all (or at least not yet).



---

archive/issue_comments_145242.json:
```json
{
    "body": "Replying to [comment:16 dimpase]:\n> Replying to [comment:14 dimpase]:\n> > Replying to [comment:13 dimpase]:\n> > > > Probably Apple shipping a broken BLAS.  See #12011.\n> > \n> > confirmed! see the following sage-devel [thread](https://groups.google.com/d/topic/sage-devel/f1XvpcK0KxE/discussion)\n> \n> In fact, it turns out to be a CVXOPT bug. Please see this\n> [message](https://groups.google.com/d/msg/sage-devel/f1XvpcK0KxE/oSFsKrA7MfkJ) and this [discussion](https://discussions.apple.com/message/17795537))\n> \n> So we do not need Atlas on OSX 10.7, after all (or at least not yet).\n\nHopefully CVXOPT people can fix this quickly: the affected BLAS calls are used quite a bit in their code, so I'd prefer to wait for them to have it fixed rather than going at it myself (it looks straightforward, but quite a bit of code...)",
    "created_at": "2012-03-09T01:19:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12347#issuecomment-145242",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:16 dimpase]:
> Replying to [comment:14 dimpase]:
> > Replying to [comment:13 dimpase]:
> > > > Probably Apple shipping a broken BLAS.  See #12011.
> > 
> > confirmed! see the following sage-devel [thread](https://groups.google.com/d/topic/sage-devel/f1XvpcK0KxE/discussion)
> 
> In fact, it turns out to be a CVXOPT bug. Please see this
> [message](https://groups.google.com/d/msg/sage-devel/f1XvpcK0KxE/oSFsKrA7MfkJ) and this [discussion](https://discussions.apple.com/message/17795537))
> 
> So we do not need Atlas on OSX 10.7, after all (or at least not yet).

Hopefully CVXOPT people can fix this quickly: the affected BLAS calls are used quite a bit in their code, so I'd prefer to wait for them to have it fixed rather than going at it myself (it looks straightforward, but quite a bit of code...)



---

archive/issue_comments_145243.json:
```json
{
    "body": "Changing status from needs_work to needs_info.",
    "created_at": "2012-03-09T01:19:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12347#issuecomment-145243",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to needs_info.



---

archive/issue_comments_145244.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2012-03-09T01:21:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12347#issuecomment-145244",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_145245.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-03-09T01:22:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12347#issuecomment-145245",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_145246.json:
```json
{
    "body": "Please revert to using Apple's blas, not GSL's ones.",
    "created_at": "2012-03-09T01:22:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12347#issuecomment-145246",
    "user": "https://github.com/dimpase"
}
```

Please revert to using Apple's blas, not GSL's ones.



---

archive/issue_comments_145247.json:
```json
{
    "body": "Replying to [comment:19 dimpase]:\n> Please revert to using Apple's blas, not GSL's ones.\n\nPlease clarify...",
    "created_at": "2012-03-09T07:40:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12347#issuecomment-145247",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:19 dimpase]:
> Please revert to using Apple's blas, not GSL's ones.

Please clarify...



---

archive/issue_comments_145248.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-03-09T07:40:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12347#issuecomment-145248",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_145249.json:
```json
{
    "body": "Replying to [comment:20 jdemeyer]:\n> Replying to [comment:19 dimpase]:\n> > Please revert to using Apple's blas, not GSL's ones.\n> \n> Please clarify...\n\nCan we link cvxopt against Apple's cblas (aka \"-framework Accelerate\") on MacOSX?\nI suppose inclusion of gslcblas in the list of libaries means we use this very slow beast...",
    "created_at": "2012-03-09T07:59:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12347#issuecomment-145249",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:20 jdemeyer]:
> Replying to [comment:19 dimpase]:
> > Please revert to using Apple's blas, not GSL's ones.
> 
> Please clarify...

Can we link cvxopt against Apple's cblas (aka "-framework Accelerate") on MacOSX?
I suppose inclusion of gslcblas in the list of libaries means we use this very slow beast...



---

archive/issue_comments_145250.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2012-03-09T07:59:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12347#issuecomment-145250",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_145251.json:
```json
{
    "body": "Replying to [comment:21 dimpase]:\n> I suppose inclusion of gslcblas in the list of libaries means we use this very slow beast...\n\nAre you sure?  If we're not using Apple's BLAS, how do you explain that cvxopt fails its self-tests only on OS X 10.7?\n\nAnyway: let me also clarify that I'm simply restoring the old behaviour, such that `cvxopt` builds with GCC 4.6.2.  So if there really is something to be done, I prefer to get this ticket reviewed as-is and continue on a different ticket.",
    "created_at": "2012-03-09T08:39:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12347#issuecomment-145251",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:21 dimpase]:
> I suppose inclusion of gslcblas in the list of libaries means we use this very slow beast...

Are you sure?  If we're not using Apple's BLAS, how do you explain that cvxopt fails its self-tests only on OS X 10.7?

Anyway: let me also clarify that I'm simply restoring the old behaviour, such that `cvxopt` builds with GCC 4.6.2.  So if there really is something to be done, I prefer to get this ticket reviewed as-is and continue on a different ticket.



---

archive/issue_comments_145252.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2012-03-09T08:39:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12347#issuecomment-145252",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_145253.json:
```json
{
    "body": "Replying to [comment:22 jdemeyer]:\n> Replying to [comment:21 dimpase]:\n> > I suppose inclusion of gslcblas in the list of libaries means we use this very slow beast...\n> \n> Are you sure?  If we're not using Apple's BLAS, how do you explain that cvxopt fails its self-tests only on OS X 10.7?\n\n`-lblas` links against Apple's \"classical\" BLAS (which you call with Fortran conventions), and use names ending with '_'. And \nthat's how CVXOPT makes these fateful calls to daxpy(). \n\nActually, it occurs to me now that it's GSL extension of CVXOPT that needs its GSLCBLAS, nothing else.\nSorry for noise. Please disregard my request on this. \n \n> \n> Anyway: let me also clarify that I'm simply restoring the old behaviour, such that `cvxopt` builds with GCC 4.6.2.  So if there really is something to be done, I prefer to get this ticket reviewed as-is and continue on a different ticket.\n\nOK, I'll look into it ASAP.",
    "created_at": "2012-03-09T08:49:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12347#issuecomment-145253",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:22 jdemeyer]:
> Replying to [comment:21 dimpase]:
> > I suppose inclusion of gslcblas in the list of libaries means we use this very slow beast...
> 
> Are you sure?  If we're not using Apple's BLAS, how do you explain that cvxopt fails its self-tests only on OS X 10.7?

`-lblas` links against Apple's "classical" BLAS (which you call with Fortran conventions), and use names ending with '_'. And 
that's how CVXOPT makes these fateful calls to daxpy(). 

Actually, it occurs to me now that it's GSL extension of CVXOPT that needs its GSLCBLAS, nothing else.
Sorry for noise. Please disregard my request on this. 
 
> 
> Anyway: let me also clarify that I'm simply restoring the old behaviour, such that `cvxopt` builds with GCC 4.6.2.  So if there really is something to be done, I prefer to get this ticket reviewed as-is and continue on a different ticket.

OK, I'll look into it ASAP.



---

archive/issue_comments_145254.json:
```json
{
    "body": "Replying to [comment:22 jdemeyer]:\n> Replying to [comment:21 dimpase]:\n> > I suppose inclusion of gslcblas in the list of libaries means we use this very slow beast...\n> \n> Are you sure?  If we're not using Apple's BLAS, how do you explain that cvxopt fails its self-tests only on OS X 10.7?\n> \n> Anyway: let me also clarify that I'm simply restoring the old behaviour, such that `cvxopt` builds with GCC 4.6.2.  So if there really is something to be done, I prefer to get this ticket reviewed as-is and continue on a different ticket.\n\nlooks OK on OSX 10.6.8, and on 10.5.8 PPC (installs with SAGE_CHECK=yes). I presume you have tested on OSX 10.4.\nPositive review. \nI'd like to coordinate the upgrade to (now available) cvxopt 1.1.4 with them fixing the OSX 10.7-specific bug.",
    "created_at": "2012-03-10T08:11:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12347#issuecomment-145254",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:22 jdemeyer]:
> Replying to [comment:21 dimpase]:
> > I suppose inclusion of gslcblas in the list of libaries means we use this very slow beast...
> 
> Are you sure?  If we're not using Apple's BLAS, how do you explain that cvxopt fails its self-tests only on OS X 10.7?
> 
> Anyway: let me also clarify that I'm simply restoring the old behaviour, such that `cvxopt` builds with GCC 4.6.2.  So if there really is something to be done, I prefer to get this ticket reviewed as-is and continue on a different ticket.

looks OK on OSX 10.6.8, and on 10.5.8 PPC (installs with SAGE_CHECK=yes). I presume you have tested on OSX 10.4.
Positive review. 
I'd like to coordinate the upgrade to (now available) cvxopt 1.1.4 with them fixing the OSX 10.7-specific bug.



---

archive/issue_comments_145255.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-03-10T08:11:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12347#issuecomment-145255",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_145256.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-03-13T08:24:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12347#issuecomment-145256",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
