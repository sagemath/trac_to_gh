# Issue 11382: Fix for denominator_ideal function

archive/issues_011382.json:
```json
{
    "body": "Assignee: davidloeffler\n\nCC:  wstein\n\nKeywords: denominator, ideal, number field\n\nThe denominator_ideal of 0 should return the ideal (1), but it currently returns a ValueError.\n\nIssue created by migration from https://trac.sagemath.org/ticket/11554\n\n",
    "created_at": "2011-06-29T01:09:54Z",
    "labels": [
        "number fields",
        "major",
        "bug"
    ],
    "title": "Fix for denominator_ideal function",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11382",
    "user": "bleveque"
}
```
Assignee: davidloeffler

CC:  wstein

Keywords: denominator, ideal, number field

The denominator_ideal of 0 should return the ideal (1), but it currently returns a ValueError.

Issue created by migration from https://trac.sagemath.org/ticket/11554





---

archive/issue_comments_126295.json:
```json
{
    "body": "fixes denominator_ideal for input 0",
    "created_at": "2011-06-29T01:17:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11382#issuecomment-126295",
    "user": "bleveque"
}
```

fixes denominator_ideal for input 0



---

archive/issue_comments_126296.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-06-29T01:19:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11382#issuecomment-126296",
    "user": "bleveque"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_126297.json:
```json
{
    "body": "Attachment",
    "created_at": "2011-06-29T01:19:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11382#issuecomment-126297",
    "user": "bleveque"
}
```

Attachment



---

archive/issue_comments_126298.json:
```json
{
    "body": "The problem really is that Sage only supports the zero ideal and fractional ideals of number fields.  Sage simply does not know about the ideal `(1)` in a number field.\n\nSo proposing to close this as \"wontfix\".",
    "created_at": "2011-10-31T11:55:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11382#issuecomment-126298",
    "user": "jdemeyer"
}
```

The problem really is that Sage only supports the zero ideal and fractional ideals of number fields.  Sage simply does not know about the ideal `(1)` in a number field.

So proposing to close this as "wontfix".



---

archive/issue_comments_126299.json:
```json
{
    "body": "I'm with Jeroen on this. I think ValueError is the right behaviour here. Positive review to the proposal to close as wontfix.",
    "created_at": "2011-11-03T09:40:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11382#issuecomment-126299",
    "user": "davidloeffler"
}
```

I'm with Jeroen on this. I think ValueError is the right behaviour here. Positive review to the proposal to close as wontfix.



---

archive/issue_comments_126300.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-11-03T09:40:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11382#issuecomment-126300",
    "user": "davidloeffler"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_126301.json:
```json
{
    "body": "Resolution: wontfix",
    "created_at": "2011-11-15T09:19:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11382#issuecomment-126301",
    "user": "jdemeyer"
}
```

Resolution: wontfix



---

archive/issue_comments_126302.json:
```json
{
    "body": "Huh?  Obviously, the denominator ideal of 0 should be the unit ideal, just at the denominator if 0 is 1:\n\n```\nsage: K.<a> = NumberField(x^2 + 1)\nsage: K(0).denominator()\n1\n```\n\n\nThe statement \"Sage only supports the zero ideal and fractional ideals of number fields. Sage simply does not know about the ideal (1) in a number field.\" sounds like nonsense to me.   The ideal generated by 1 is a perfectly good fractional ideal.  That's why people say \"the *group* of fractional ideals\" -- groups have an identity element. \n\n```\nsage: K.maximal_order().ideal(1)\nFractional ideal (1)\n```\n",
    "created_at": "2011-11-15T22:40:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11382#issuecomment-126302",
    "user": "was"
}
```

Huh?  Obviously, the denominator ideal of 0 should be the unit ideal, just at the denominator if 0 is 1:

```
sage: K.<a> = NumberField(x^2 + 1)
sage: K(0).denominator()
1
```


The statement "Sage only supports the zero ideal and fractional ideals of number fields. Sage simply does not know about the ideal (1) in a number field." sounds like nonsense to me.   The ideal generated by 1 is a perfectly good fractional ideal.  That's why people say "the *group* of fractional ideals" -- groups have an identity element. 

```
sage: K.maximal_order().ideal(1)
Fractional ideal (1)
```




---

archive/issue_comments_126303.json:
```json
{
    "body": "Resolution changed from wontfix to ",
    "created_at": "2011-11-15T22:40:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11382#issuecomment-126303",
    "user": "was"
}
```

Resolution changed from wontfix to 



---

archive/issue_comments_126304.json:
```json
{
    "body": "Changing status from closed to new.",
    "created_at": "2011-11-15T22:40:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11382#issuecomment-126304",
    "user": "was"
}
```

Changing status from closed to new.



---

archive/issue_comments_126305.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-11-16T02:52:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11382#issuecomment-126305",
    "user": "was"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_126306.json:
```json
{
    "body": "Also, I give this patch a positive review.",
    "created_at": "2011-11-16T02:52:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11382#issuecomment-126306",
    "user": "was"
}
```

Also, I give this patch a positive review.



---

archive/issue_comments_126307.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-11-16T02:53:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11382#issuecomment-126307",
    "user": "was"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_126308.json:
```json
{
    "body": "Changing priority from major to minor.",
    "created_at": "2011-11-16T08:28:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11382#issuecomment-126308",
    "user": "davidloeffler"
}
```

Changing priority from major to minor.



---

archive/issue_comments_126309.json:
```json
{
    "body": "> Sage simply does not know about the ideal (1) in a number field.\" sounds like nonsense to me. \n> The ideal generated by 1 is a perfectly good fractional ideal.\n\nWhat I believe Jeroen meant here is not the OK-submodule OK of K, but the K-submodule K of K -- the unit ideal of K in the purely ring-theoretic sense. This is indeed an object Sage genuinely doesn't know about -- we special-case the zero ideal, but not the whole-of-K ideal.\n\nThis is just FYI; I'm not trying to dispute your decision to give the patch a positive review. Frankly I'm not convinced that the denominator of 0 is worth losing much sleep over.",
    "created_at": "2011-11-16T08:28:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11382#issuecomment-126309",
    "user": "davidloeffler"
}
```

> Sage simply does not know about the ideal (1) in a number field." sounds like nonsense to me. 
> The ideal generated by 1 is a perfectly good fractional ideal.

What I believe Jeroen meant here is not the OK-submodule OK of K, but the K-submodule K of K -- the unit ideal of K in the purely ring-theoretic sense. This is indeed an object Sage genuinely doesn't know about -- we special-case the zero ideal, but not the whole-of-K ideal.

This is just FYI; I'm not trying to dispute your decision to give the patch a positive review. Frankly I'm not convinced that the denominator of 0 is worth losing much sleep over.



---

archive/issue_comments_126310.json:
```json
{
    "body": "Please **DO NOT** reopen tickets!\n\nIf you disagree with me closing the ticket, that's fine, just state it in the comments.\n\nBut **DO NOT** reopen tickets!\n\nYou can totally disagree with me about closing a ticket.  I am a reasonable person and will very likely listen.  But it's very annoying if my idea of which tickets are open/closed does not correspond to reality.\n\nSo, **DO NOT** reopen tickets!",
    "created_at": "2011-11-16T14:07:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11382#issuecomment-126310",
    "user": "jdemeyer"
}
```

Please **DO NOT** reopen tickets!

If you disagree with me closing the ticket, that's fine, just state it in the comments.

But **DO NOT** reopen tickets!

You can totally disagree with me about closing a ticket.  I am a reasonable person and will very likely listen.  But it's very annoying if my idea of which tickets are open/closed does not correspond to reality.

So, **DO NOT** reopen tickets!



---

archive/issue_comments_126311.json:
```json
{
    "body": "Replying to [comment:9 davidloeffler]:\n> What I believe Jeroen meant here is not the OK-submodule OK of K, but the K-submodule K of K -- the unit ideal of K in the purely ring-theoretic sense. This is indeed an object Sage genuinely doesn't know about -- we special-case the zero ideal, but not the whole-of-K ideal.\n\nThis is what I meant, yes.  But it is indeed mostly matter of definition.\n\nI don't understand why the patch changes the documentation of the function.  I think the old documentation is more clear and I think it also justifies better the choice that the numerator of (0) is the fractional ideal (1).\n\nHowever, if you want to define the `denominator_ideal` of zero to be the fractional ideal (1), then certainly the `numerator_ideal` of zero should be (0).  So this still needs work.",
    "created_at": "2011-11-16T14:14:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11382#issuecomment-126311",
    "user": "jdemeyer"
}
```

Replying to [comment:9 davidloeffler]:
> What I believe Jeroen meant here is not the OK-submodule OK of K, but the K-submodule K of K -- the unit ideal of K in the purely ring-theoretic sense. This is indeed an object Sage genuinely doesn't know about -- we special-case the zero ideal, but not the whole-of-K ideal.

This is what I meant, yes.  But it is indeed mostly matter of definition.

I don't understand why the patch changes the documentation of the function.  I think the old documentation is more clear and I think it also justifies better the choice that the numerator of (0) is the fractional ideal (1).

However, if you want to define the `denominator_ideal` of zero to be the fractional ideal (1), then certainly the `numerator_ideal` of zero should be (0).  So this still needs work.



---

archive/issue_comments_126312.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2011-11-16T14:14:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11382#issuecomment-126312",
    "user": "jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_126313.json:
```json
{
    "body": "Hello,\n\nIn response to Jeroen's comment, I opened a new ticket -- [http://trac.sagemath.org/sage_trac/ticket/12046](http://trac.sagemath.org/sage_trac/ticket/12046) -- with a proposed change to the numerator_ideal function. Sorry if it's confusing having two tickets dealing with a similar issue.\n\n-Ben",
    "created_at": "2011-11-17T05:40:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11382#issuecomment-126313",
    "user": "bleveque"
}
```

Hello,

In response to Jeroen's comment, I opened a new ticket -- [http://trac.sagemath.org/sage_trac/ticket/12046](http://trac.sagemath.org/sage_trac/ticket/12046) -- with a proposed change to the numerator_ideal function. Sorry if it's confusing having two tickets dealing with a similar issue.

-Ben



---

archive/issue_comments_126314.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2014-09-04T19:52:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11382#issuecomment-126314",
    "user": "jdemeyer"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_126315.json:
```json
{
    "body": "Fixed by #12046.",
    "created_at": "2014-09-04T19:52:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11382#issuecomment-126315",
    "user": "jdemeyer"
}
```

Fixed by #12046.



---

archive/issue_comments_126316.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-09-09T14:54:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11382",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11382#issuecomment-126316",
    "user": "vbraun"
}
```

Resolution: fixed
