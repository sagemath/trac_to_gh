# Issue 11382: Fix for denominator_ideal function

Issue created by migration from Trac.

Original creator: bleveque

Original creation time: 2011-06-29 01:09:54

Assignee: davidloeffler

CC:  wstein

Keywords: denominator, ideal, number field

The denominator_ideal of 0 should return the ideal (1), but it currently returns a ValueError.


---

Comment by bleveque created at 2011-06-29 01:17:47

fixes denominator_ideal for input 0


---

Comment by bleveque created at 2011-06-29 01:19:04

Changing status from new to needs_review.


---

Attachment


---

Comment by jdemeyer created at 2011-10-31 11:55:04

The problem really is that Sage only supports the zero ideal and fractional ideals of number fields.  Sage simply does not know about the ideal `(1)` in a number field.

So proposing to close this as "wontfix".


---

Comment by davidloeffler created at 2011-11-03 09:40:36

I'm with Jeroen on this. I think ValueError is the right behaviour here. Positive review to the proposal to close as wontfix.


---

Comment by davidloeffler created at 2011-11-03 09:40:36

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2011-11-15 09:19:48

Resolution: wontfix


---

Comment by was created at 2011-11-15 22:40:26

Huh?  Obviously, the denominator ideal of 0 should be the unit ideal, just at the denominator if 0 is 1:

```
sage: K.<a> = NumberField(x^2 + 1)
sage: K(0).denominator()
1
```


The statement "Sage only supports the zero ideal and fractional ideals of number fields. Sage simply does not know about the ideal (1) in a number field." sounds like nonsense to me.   The ideal generated by 1 is a perfectly good fractional ideal.  That's why people say "the *group* of fractional ideals" -- groups have an identity element. 

```
sage: K.maximal_order().ideal(1)
Fractional ideal (1)
```



---

Comment by was created at 2011-11-15 22:40:26

Resolution changed from wontfix to 


---

Comment by was created at 2011-11-15 22:40:26

Changing status from closed to new.


---

Comment by was created at 2011-11-16 02:52:55

Changing status from new to needs_review.


---

Comment by was created at 2011-11-16 02:52:55

Also, I give this patch a positive review.


---

Comment by was created at 2011-11-16 02:53:04

Changing status from needs_review to positive_review.


---

Comment by davidloeffler created at 2011-11-16 08:28:09

Changing priority from major to minor.


---

Comment by davidloeffler created at 2011-11-16 08:28:09

> Sage simply does not know about the ideal (1) in a number field." sounds like nonsense to me. 
> The ideal generated by 1 is a perfectly good fractional ideal.

What I believe Jeroen meant here is not the OK-submodule OK of K, but the K-submodule K of K -- the unit ideal of K in the purely ring-theoretic sense. This is indeed an object Sage genuinely doesn't know about -- we special-case the zero ideal, but not the whole-of-K ideal.

This is just FYI; I'm not trying to dispute your decision to give the patch a positive review. Frankly I'm not convinced that the denominator of 0 is worth losing much sleep over.


---

Comment by jdemeyer created at 2011-11-16 14:07:06

Please *DO NOT* reopen tickets!

If you disagree with me closing the ticket, that's fine, just state it in the comments.

But *DO NOT* reopen tickets!

You can totally disagree with me about closing a ticket.  I am a reasonable person and will very likely listen.  But it's very annoying if my idea of which tickets are open/closed does not correspond to reality.

So, *DO NOT* reopen tickets!


---

Comment by jdemeyer created at 2011-11-16 14:14:00

Replying to [comment:9 davidloeffler]:
> What I believe Jeroen meant here is not the OK-submodule OK of K, but the K-submodule K of K -- the unit ideal of K in the purely ring-theoretic sense. This is indeed an object Sage genuinely doesn't know about -- we special-case the zero ideal, but not the whole-of-K ideal.

This is what I meant, yes.  But it is indeed mostly matter of definition.

I don't understand why the patch changes the documentation of the function.  I think the old documentation is more clear and I think it also justifies better the choice that the numerator of (0) is the fractional ideal (1).

However, if you want to define the `denominator_ideal` of zero to be the fractional ideal (1), then certainly the `numerator_ideal` of zero should be (0).  So this still needs work.


---

Comment by jdemeyer created at 2011-11-16 14:14:00

Changing status from positive_review to needs_work.


---

Comment by bleveque created at 2011-11-17 05:40:01

Hello,

In response to Jeroen's comment, I opened a new ticket -- [http://trac.sagemath.org/sage_trac/ticket/12046](http://trac.sagemath.org/sage_trac/ticket/12046) -- with a proposed change to the numerator_ideal function. Sorry if it's confusing having two tickets dealing with a similar issue.

-Ben


---

Comment by jdemeyer created at 2014-09-04 19:52:44

Changing status from needs_work to positive_review.


---

Comment by jdemeyer created at 2014-09-04 19:52:44

Fixed by #12046.


---

Comment by vbraun created at 2014-09-09 14:54:07

Resolution: fixed
