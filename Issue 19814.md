# Issue 19814: Singularity analysis: speed up singularity analysis (log-type) without renormalization

archive/issues_019814.json:
```json
{
    "body": "CC:  @dkrenn @behackl\n\nKeywords: singularity analysis\n\n#20020 introduced `asymptotic_expansions._SingularityAnalysis_non_normalized_`. Its performance is poor as it relies on substitution. Speed up is possible by introducing a flag to `asymptotic_expansions.SingularityAnalysis` to ignore the normalization factor.\n\nSee #17601 for the asymptotic expansions meta ticket.\n\nIssue created by migration from https://trac.sagemath.org/ticket/20051\n\n",
    "created_at": "2016-02-14T14:41:30Z",
    "labels": [
        "component: asymptotic expansions",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.1",
    "title": "Singularity analysis: speed up singularity analysis (log-type) without renormalization",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19814",
    "user": "https://github.com/cheuberg"
}
```
CC:  @dkrenn @behackl

Keywords: singularity analysis

#20020 introduced `asymptotic_expansions._SingularityAnalysis_non_normalized_`. Its performance is poor as it relies on substitution. Speed up is possible by introducing a flag to `asymptotic_expansions.SingularityAnalysis` to ignore the normalization factor.

See #17601 for the asymptotic expansions meta ticket.

Issue created by migration from https://trac.sagemath.org/ticket/20051





---

archive/issue_comments_272025.json:
```json
{
    "body": "Changing type from enhancement to defect.",
    "created_at": "2016-02-17T16:46:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19814#issuecomment-272025",
    "user": "https://github.com/cheuberg"
}
```

Changing type from enhancement to defect.



---

archive/issue_comments_272026.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-02-17T17:24:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19814#issuecomment-272026",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_272027.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-02-17T17:27:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19814#issuecomment-272027",
    "user": "https://github.com/cheuberg"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_272028.json:
```json
{
    "body": "Hello! I've reviewed your changes, they look good to me in general. I only have some minor comments:\n\n- I'm not sure whether so much math should occur in the `INPUT`-block in the description of the `normalized`-parameter. What about writing something like \"determines, whether the normalization factor `z^-(\\beta + \\delta)` is taken into account\"? The detailed description could either go into a `NOTE`-block or just be in the extended method description (before `INPUT`).\n- I see that you introduced a doctest which checks for the (currently) erroneous output in [b336046](http://git.sagemath.org/sage.git/commit/?id=b336046c20b400eb5ecdde199f35e1eec2793a47). Was there no such doctest before, or have I missed something?",
    "created_at": "2016-02-17T22:04:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19814#issuecomment-272028",
    "user": "https://github.com/behackl"
}
```

Hello! I've reviewed your changes, they look good to me in general. I only have some minor comments:

- I'm not sure whether so much math should occur in the `INPUT`-block in the description of the `normalized`-parameter. What about writing something like "determines, whether the normalization factor `z^-(\beta + \delta)` is taken into account"? The detailed description could either go into a `NOTE`-block or just be in the extended method description (before `INPUT`).
- I see that you introduced a doctest which checks for the (currently) erroneous output in [b336046](http://git.sagemath.org/sage.git/commit/?id=b336046c20b400eb5ecdde199f35e1eec2793a47). Was there no such doctest before, or have I missed something?



---

archive/issue_comments_272029.json:
```json
{
    "body": "Replying to [comment:6 behackl]:\n> Hello! I've reviewed your changes, they look good to me in general. I only have some minor comments:\n> \n> - I'm not sure whether so much math should occur in the `INPUT`-block in the description of the `normalized`-parameter. What about writing something like \"determines, whether the normalization factor `z^-(\\beta + \\delta)` is taken into account\"? The detailed description could either go into a `NOTE`-block or just be in the extended method description (before `INPUT`).\n\nI do not like a description like \"whether the normalization factor ... is taken into account\" because this is not a very clear description. I prefer to clearly state the fact, so that no ambiguities can arise.\n\nIf you want me to move this second variant to the top, say \"the n-th coefficient of ... (if `normalize=True`, the default) or  of ... (if `normalize=False`), I can do that.\n\n> - I see that you introduced a doctest which checks for the (currently) erroneous output in [b336046](http://git.sagemath.org/sage.git/commit/?id=b336046c20b400eb5ecdde199f35e1eec2793a47). Was there no such doctest before, or have I missed something?\n\nThere was one incorrect doctest in the growth group `log(x)^2` where the incorrect result was stated (apparently, nobody checked whether the result there is correct). In any case, I wanted to have a doctest checking the correct behaviour right at the source of the problem.\n\n> \n> \n>",
    "created_at": "2016-02-18T07:56:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19814#issuecomment-272029",
    "user": "https://github.com/cheuberg"
}
```

Replying to [comment:6 behackl]:
> Hello! I've reviewed your changes, they look good to me in general. I only have some minor comments:
> 
> - I'm not sure whether so much math should occur in the `INPUT`-block in the description of the `normalized`-parameter. What about writing something like "determines, whether the normalization factor `z^-(\beta + \delta)` is taken into account"? The detailed description could either go into a `NOTE`-block or just be in the extended method description (before `INPUT`).

I do not like a description like "whether the normalization factor ... is taken into account" because this is not a very clear description. I prefer to clearly state the fact, so that no ambiguities can arise.

If you want me to move this second variant to the top, say "the n-th coefficient of ... (if `normalize=True`, the default) or  of ... (if `normalize=False`), I can do that.

> - I see that you introduced a doctest which checks for the (currently) erroneous output in [b336046](http://git.sagemath.org/sage.git/commit/?id=b336046c20b400eb5ecdde199f35e1eec2793a47). Was there no such doctest before, or have I missed something?

There was one incorrect doctest in the growth group `log(x)^2` where the incorrect result was stated (apparently, nobody checked whether the result there is correct). In any case, I wanted to have a doctest checking the correct behaviour right at the source of the problem.

> 
> 
>



---

archive/issue_comments_272030.json:
```json
{
    "body": "Replying to [comment:7 cheuberg]:\n> Replying to [comment:6 behackl]:\n> > Hello! I've reviewed your changes, they look good to me in general. I only have some minor comments:\n> > \n> > - I'm not sure whether so much math should occur in the `INPUT`-block in the description of the `normalized`-parameter. What about writing something like \"determines, whether the normalization factor `z^-(\\beta + \\delta)` is taken into account\"? The detailed description could either go into a `NOTE`-block or just be in the extended method description (before `INPUT`).\n> \n> I do not like a description like \"whether the normalization factor ... is taken into account\" because this is not a very clear description. I prefer to clearly state the fact, so that no ambiguities can arise.\n> \n\nI agree that unabiguity is more important than brevity in this case.\n\n> If you want me to move this second variant to the top, say \"the n-th coefficient of ... (if `normalize=True`, the default) or  of ... (if `normalize=False`), I can do that.\n> \n\nYes, I think that mentioning the parameter in the extended function description too would be a good idea. Could you add such a statement?\n\n\n> > - I see that you introduced a doctest which checks for the (currently) erroneous output in [b336046](http://git.sagemath.org/sage.git/commit/?id=b336046c20b400eb5ecdde199f35e1eec2793a47). Was there no such doctest before, or have I missed something?\n> \n> There was one incorrect doctest in the growth group `log(x)^2` where the incorrect result was stated (apparently, nobody checked whether the result there is correct). In any case, I wanted to have a doctest checking the correct behaviour right at the source of the problem.\n\nI see, I've missed these lines when comparing diffs. The output of the doctest is now mathematically correct.",
    "created_at": "2016-02-18T08:04:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19814#issuecomment-272030",
    "user": "https://github.com/behackl"
}
```

Replying to [comment:7 cheuberg]:
> Replying to [comment:6 behackl]:
> > Hello! I've reviewed your changes, they look good to me in general. I only have some minor comments:
> > 
> > - I'm not sure whether so much math should occur in the `INPUT`-block in the description of the `normalized`-parameter. What about writing something like "determines, whether the normalization factor `z^-(\beta + \delta)` is taken into account"? The detailed description could either go into a `NOTE`-block or just be in the extended method description (before `INPUT`).
> 
> I do not like a description like "whether the normalization factor ... is taken into account" because this is not a very clear description. I prefer to clearly state the fact, so that no ambiguities can arise.
> 

I agree that unabiguity is more important than brevity in this case.

> If you want me to move this second variant to the top, say "the n-th coefficient of ... (if `normalize=True`, the default) or  of ... (if `normalize=False`), I can do that.
> 

Yes, I think that mentioning the parameter in the extended function description too would be a good idea. Could you add such a statement?


> > - I see that you introduced a doctest which checks for the (currently) erroneous output in [b336046](http://git.sagemath.org/sage.git/commit/?id=b336046c20b400eb5ecdde199f35e1eec2793a47). Was there no such doctest before, or have I missed something?
> 
> There was one incorrect doctest in the growth group `log(x)^2` where the incorrect result was stated (apparently, nobody checked whether the result there is correct). In any case, I wanted to have a doctest checking the correct behaviour right at the source of the problem.

I see, I've missed these lines when comparing diffs. The output of the doctest is now mathematically correct.



---

archive/issue_comments_272031.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-02-18T08:37:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19814#issuecomment-272031",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_272032.json:
```json
{
    "body": "Thanks!\n\nDocumentation builds and looks fine, doctests pass. => `positive_review`.",
    "created_at": "2016-02-18T08:45:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19814#issuecomment-272032",
    "user": "https://github.com/behackl"
}
```

Thanks!

Documentation builds and looks fine, doctests pass. => `positive_review`.



---

archive/issue_comments_272033.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-02-18T08:45:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19814#issuecomment-272033",
    "user": "https://github.com/behackl"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_272034.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2016-02-18T09:05:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19814#issuecomment-272034",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_272035.json:
```json
{
    "body": "merge conflict",
    "created_at": "2016-02-18T09:05:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19814#issuecomment-272035",
    "user": "https://github.com/vbraun"
}
```

merge conflict



---

archive/issue_comments_272036.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-02-18T09:14:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19814#issuecomment-272036",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_272037.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-02-18T09:15:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19814#issuecomment-272037",
    "user": "https://github.com/cheuberg"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_272038.json:
```json
{
    "body": "Replying to [comment:11 vbraun]:\n> merge conflict\nsorry, fixed now.",
    "created_at": "2016-02-18T09:15:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19814#issuecomment-272038",
    "user": "https://github.com/cheuberg"
}
```

Replying to [comment:11 vbraun]:
> merge conflict
sorry, fixed now.



---

archive/issue_comments_272039.json:
```json
{
    "body": "Changes LGTM, merging with all other of our closed tickets also works now.",
    "created_at": "2016-02-18T09:23:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19814#issuecomment-272039",
    "user": "https://github.com/behackl"
}
```

Changes LGTM, merging with all other of our closed tickets also works now.



---

archive/issue_comments_272040.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-02-18T09:23:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19814#issuecomment-272040",
    "user": "https://github.com/behackl"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_272041.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-02-18T19:51:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19814#issuecomment-272041",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_054635.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-02-18T19:51:08Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19814",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19814#event-54635"
}
```
