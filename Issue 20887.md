# Issue 20887: (RR element).str(): allow specifying number of digits

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2016-07-29 08:40:24

Implement a way to explicitly choose the number of digits for printing a real number.


---

Comment by leif created at 2016-07-29 10:46:23

Do I have to look into the doctesting framework or will this ticket just fix #21121 as a by-product?


---

Comment by jdemeyer created at 2016-07-29 11:05:43

It will not fix #21121 as by-product, but #21121 will be trivial to fix using #21124.


---

Comment by jdemeyer created at 2016-07-29 14:45:25

New commits:


---

Comment by jdemeyer created at 2016-07-29 14:45:25

Changing status from new to needs_review.


---

Comment by leif created at 2016-07-29 16:00:27


```
--- a/src/sage/rings/complex_mpc.pyx
+++ b/src/sage/rings/complex_mpc.pyx
`@``@` -1026,32 +1026,32 `@``@` cdef class MPComplexNumber(sage.structure.element.FieldElement):
- ``base`` -- base for output
- - ``truncate`` -- if ``True``, round off the last digits in printing
- to lessen confusing base-2 roundoff issues.
+ - ``**kwds`` -- other arguments to pass the the ``str()``
+ method of the real numbers in the real and imaginary parts.
EXAMPLES::
```

s/the the/to the/


```
--- a/src/sage/rings/complex_number.pyx
+++ b/src/sage/rings/complex_number.pyx
`@``@` -465,17 +465,19 `@``@` cdef class ComplexNumber(sage.structure.element.FieldElement):
- ``base`` -- (Default: 10) The base to use for printing
- - ``truncate`` -- (Default: ``True``) Whether to print fewer
- digits than are available, to mask errors in the last bits.
-
- ``istr`` -- (Default: ``I``) String representation of the complex unit
+ - ``**kwds`` -- other arguments to pass the the ``str()``
+ method of the real numbers in the real and imaginary parts.
+
EXAMPLES::
```

s/the the/to the/

I.e., `sed -i 's/ the the / to the /' src/sage/rings/complex_{mpc,number}.pyx`

\\

There's some inconsistency in giving the defaults of arguments:

`(Default: 10)`  vs. `(default:10)` or even just mentioning it
in the text (e.g. for `no_sci`, where the default is `None`),
or in _some_ cases also for `truncate`, where the default now is
`False`, but the description says (just) "if `True`, ...".

(But that's a minor thing, as you'd presumably have to touch
more regions to normalize all instances.)


P.S.:  I looked at your previous commit, and just briefly scanned the new one.


---

Comment by git created at 2016-08-01 11:01:01

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2017-03-21 12:04:31

Changing status from needs_review to needs_work.


---

Comment by git created at 2017-03-21 16:21:06

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jdemeyer created at 2017-03-21 16:22:38

Changing status from needs_work to needs_review.


---

Comment by jdemeyer created at 2017-03-21 16:22:38

Rebased to 7.6.rc2


---

Comment by git created at 2017-03-22 09:07:06

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by tscrim created at 2017-08-10 00:49:47

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2017-08-10 00:49:47

LGTM.


---

Comment by vbraun created at 2017-08-13 09:45:07

Resolution: fixed
