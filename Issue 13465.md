# Issue 13465: sage -gdb ImportError

Issue created by migration from Trac.

Original creator: vbraun

Original creation time: 2012-10-30 12:56:35

Assignee: leif

CC:  jdemeyer




---

Comment by vbraun created at 2012-10-30 13:00:33

Initial patch


---

Comment by vbraun created at 2012-10-30 13:04:06

Changing status from new to needs_review.


---

Attachment

The patch rewires `sage -gdb` to use `local/bin/sage-ipython`, so the behavior will match the standard sage behavior more closely.


---

Comment by r.gaia.cs created at 2012-10-30 16:19:02

The Patch Buildbot can't apply the patchs:

```
hg qimport http://trac.sagemath.org/sage_trac/raw-attachment/ticket/13669/trac_13669_fix_sage_gdb.patch
adding trac_13669_fix_sage_gdb.patch to series file
hg qpush
applying trac_13669_fix_sage_gdb.patch
unable to find 'spkg/bin/sage' for patching
1 out of 1 hunks FAILED -- saving rejects to file spkg/bin/sage.rej
```


As say in http://wiki.sagemath.org/buildbot,

    Only the devel repository has branches, so the buildbot is unable to apply and try out patches to extcode/scripts/etc.


---

Comment by SimonKing created at 2012-12-23 22:35:58

What should be done to review the patches?

From looking at them, they seem good to me, but I am no expert for gdb. And I can confirm that "sage -gdb" now starts without error, in the sense of "I was able to do some non-trivial computation in an interactive session and quit Sage without gdb complaining".

But is that enough to constitute a positive review?


---

Comment by vbraun created at 2012-12-23 22:40:31

I don't think there is anything to review, nor does this have anything to do with gdb really. Its just about starting up Python in the same way with or without gdb. The old sage-gdb script was very hackish.


---

Comment by SimonKing created at 2012-12-23 22:43:35

`./sage -t -gdb devel/sage/sage/rings/polynomial/multi_polynomial_ideal.py` works as well.

Slight complaint: `./sage -gdb -t devel/sage/sage/rings/polynomial/multi_polynomial_ideal.py` does not work.

Would it be possible to make the options -gdb and -t commute?


---

Comment by vbraun created at 2012-12-23 22:50:22

The option parsing in general should be overhauled and probably based on the argparse Python module. Right now its a pain to extend the way options work.


---

Comment by ppurka created at 2012-12-24 07:20:45

See #21


---

Comment by SimonKing created at 2012-12-24 09:15:30

So, here's your chance to fix a two-digit ticket...


---

Comment by vbraun created at 2012-12-24 12:40:25

Q: How many Sage contributors does it take to change a light bulb? 

A: While looking at the broken light bulb we noticed some paint peeling on the wall, so we should probably re-do the foundation of the house first.


---

Comment by SimonKing created at 2012-12-28 19:40:20

The patches, when chosing to the right repositories, cleanly apply, and sage -gdb does start fine.

I'd say this is enough for a positive review.


---

Comment by SimonKing created at 2012-12-28 19:40:42

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2012-12-29 19:48:08

Changing status from positive_review to needs_work.


---

Comment by jdemeyer created at 2012-12-29 19:48:08

Please use proper quoting:

```
gdb -x "$SAGE_ROOT/local/bin/sage-gdb-commands" -args python "$SAGE_ROOT/local/bin/sage-ipython" "$`@`" -i
```



---

Comment by vbraun created at 2012-12-29 20:12:02

Updated patch


---

Attachment

Done


---

Comment by vbraun created at 2012-12-29 20:12:24

Changing status from needs_work to positive_review.


---

Comment by jdemeyer created at 2013-01-01 11:37:49

Resolution: fixed
