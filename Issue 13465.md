# Issue 13465: sage -gdb ImportError

archive/issues_013465.json:
```json
{
    "body": "Assignee: leif\n\nCC:  jdemeyer\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/13669\n\n",
    "created_at": "2012-10-30T12:56:35Z",
    "labels": [
        "scripts",
        "major",
        "bug"
    ],
    "title": "sage -gdb ImportError",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13465",
    "user": "vbraun"
}
```
Assignee: leif

CC:  jdemeyer



Issue created by migration from https://trac.sagemath.org/ticket/13669





---

archive/issue_comments_166021.json:
```json
{
    "body": "Initial patch",
    "created_at": "2012-10-30T13:00:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13465#issuecomment-166021",
    "user": "vbraun"
}
```

Initial patch



---

archive/issue_comments_166022.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-10-30T13:04:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13465#issuecomment-166022",
    "user": "vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_166023.json:
```json
{
    "body": "Attachment\n\nThe patch rewires `sage -gdb` to use `local/bin/sage-ipython`, so the behavior will match the standard sage behavior more closely.",
    "created_at": "2012-10-30T13:04:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13465#issuecomment-166023",
    "user": "vbraun"
}
```

Attachment

The patch rewires `sage -gdb` to use `local/bin/sage-ipython`, so the behavior will match the standard sage behavior more closely.



---

archive/issue_comments_166024.json:
```json
{
    "body": "The Patch Buildbot can't apply the patchs:\n\n```\nhg qimport http://trac.sagemath.org/sage_trac/raw-attachment/ticket/13669/trac_13669_fix_sage_gdb.patch\nadding trac_13669_fix_sage_gdb.patch to series file\nhg qpush\napplying trac_13669_fix_sage_gdb.patch\nunable to find 'spkg/bin/sage' for patching\n1 out of 1 hunks FAILED -- saving rejects to file spkg/bin/sage.rej\n```\n\n\nAs say in http://wiki.sagemath.org/buildbot,\n\n    Only the devel repository has branches, so the buildbot is unable to apply and try out patches to extcode/scripts/etc.",
    "created_at": "2012-10-30T16:19:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13465#issuecomment-166024",
    "user": "r.gaia.cs"
}
```

The Patch Buildbot can't apply the patchs:

```
hg qimport http://trac.sagemath.org/sage_trac/raw-attachment/ticket/13669/trac_13669_fix_sage_gdb.patch
adding trac_13669_fix_sage_gdb.patch to series file
hg qpush
applying trac_13669_fix_sage_gdb.patch
unable to find 'spkg/bin/sage' for patching
1 out of 1 hunks FAILED -- saving rejects to file spkg/bin/sage.rej
```


As say in http://wiki.sagemath.org/buildbot,

    Only the devel repository has branches, so the buildbot is unable to apply and try out patches to extcode/scripts/etc.



---

archive/issue_comments_166025.json:
```json
{
    "body": "What should be done to review the patches?\n\nFrom looking at them, they seem good to me, but I am no expert for gdb. And I can confirm that \"sage -gdb\" now starts without error, in the sense of \"I was able to do some non-trivial computation in an interactive session and quit Sage without gdb complaining\".\n\nBut is that enough to constitute a positive review?",
    "created_at": "2012-12-23T22:35:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13465#issuecomment-166025",
    "user": "SimonKing"
}
```

What should be done to review the patches?

From looking at them, they seem good to me, but I am no expert for gdb. And I can confirm that "sage -gdb" now starts without error, in the sense of "I was able to do some non-trivial computation in an interactive session and quit Sage without gdb complaining".

But is that enough to constitute a positive review?



---

archive/issue_comments_166026.json:
```json
{
    "body": "I don't think there is anything to review, nor does this have anything to do with gdb really. Its just about starting up Python in the same way with or without gdb. The old sage-gdb script was very hackish.",
    "created_at": "2012-12-23T22:40:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13465#issuecomment-166026",
    "user": "vbraun"
}
```

I don't think there is anything to review, nor does this have anything to do with gdb really. Its just about starting up Python in the same way with or without gdb. The old sage-gdb script was very hackish.



---

archive/issue_comments_166027.json:
```json
{
    "body": "`./sage -t -gdb devel/sage/sage/rings/polynomial/multi_polynomial_ideal.py` works as well.\n\nSlight complaint: `./sage -gdb -t devel/sage/sage/rings/polynomial/multi_polynomial_ideal.py` does not work.\n\nWould it be possible to make the options -gdb and -t commute?",
    "created_at": "2012-12-23T22:43:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13465#issuecomment-166027",
    "user": "SimonKing"
}
```

`./sage -t -gdb devel/sage/sage/rings/polynomial/multi_polynomial_ideal.py` works as well.

Slight complaint: `./sage -gdb -t devel/sage/sage/rings/polynomial/multi_polynomial_ideal.py` does not work.

Would it be possible to make the options -gdb and -t commute?



---

archive/issue_comments_166028.json:
```json
{
    "body": "The option parsing in general should be overhauled and probably based on the argparse Python module. Right now its a pain to extend the way options work.",
    "created_at": "2012-12-23T22:50:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13465#issuecomment-166028",
    "user": "vbraun"
}
```

The option parsing in general should be overhauled and probably based on the argparse Python module. Right now its a pain to extend the way options work.



---

archive/issue_comments_166029.json:
```json
{
    "body": "See #21",
    "created_at": "2012-12-24T07:20:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13465#issuecomment-166029",
    "user": "ppurka"
}
```

See #21



---

archive/issue_comments_166030.json:
```json
{
    "body": "So, here's your chance to fix a two-digit ticket...",
    "created_at": "2012-12-24T09:15:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13465#issuecomment-166030",
    "user": "SimonKing"
}
```

So, here's your chance to fix a two-digit ticket...



---

archive/issue_comments_166031.json:
```json
{
    "body": "Q: How many Sage contributors does it take to change a light bulb? \n\nA: While looking at the broken light bulb we noticed some paint peeling on the wall, so we should probably re-do the foundation of the house first.",
    "created_at": "2012-12-24T12:40:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13465#issuecomment-166031",
    "user": "vbraun"
}
```

Q: How many Sage contributors does it take to change a light bulb? 

A: While looking at the broken light bulb we noticed some paint peeling on the wall, so we should probably re-do the foundation of the house first.



---

archive/issue_comments_166032.json:
```json
{
    "body": "The patches, when chosing to the right repositories, cleanly apply, and sage -gdb does start fine.\n\nI'd say this is enough for a positive review.",
    "created_at": "2012-12-28T19:40:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13465#issuecomment-166032",
    "user": "SimonKing"
}
```

The patches, when chosing to the right repositories, cleanly apply, and sage -gdb does start fine.

I'd say this is enough for a positive review.



---

archive/issue_comments_166033.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-12-28T19:40:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13465#issuecomment-166033",
    "user": "SimonKing"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_166034.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-12-29T19:48:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13465#issuecomment-166034",
    "user": "jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_166035.json:
```json
{
    "body": "Please use proper quoting:\n\n```\ngdb -x \"$SAGE_ROOT/local/bin/sage-gdb-commands\" -args python \"$SAGE_ROOT/local/bin/sage-ipython\" \"$@\" -i\n```\n",
    "created_at": "2012-12-29T19:48:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13465#issuecomment-166035",
    "user": "jdemeyer"
}
```

Please use proper quoting:

```
gdb -x "$SAGE_ROOT/local/bin/sage-gdb-commands" -args python "$SAGE_ROOT/local/bin/sage-ipython" "$@" -i
```




---

archive/issue_comments_166036.json:
```json
{
    "body": "Updated patch",
    "created_at": "2012-12-29T20:12:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13465#issuecomment-166036",
    "user": "vbraun"
}
```

Updated patch



---

archive/issue_comments_166037.json:
```json
{
    "body": "Attachment\n\nDone",
    "created_at": "2012-12-29T20:12:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13465#issuecomment-166037",
    "user": "vbraun"
}
```

Attachment

Done



---

archive/issue_comments_166038.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2012-12-29T20:12:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13465#issuecomment-166038",
    "user": "vbraun"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_166039.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-01-01T11:37:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13465",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13465#issuecomment-166039",
    "user": "jdemeyer"
}
```

Resolution: fixed
