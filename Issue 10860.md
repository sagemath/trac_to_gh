# Issue 10860: Relabel a graph according to a function

Issue created by migration from https://trac.sagemath.org/ticket/10939

Original creator: nthiery

Original creation time: 2011-03-15 10:22:01

Assignee: jason, ncohen, rlm

CC:  ncohen

From the doc:

```
    sage: G.edges()
    [(0, 1, {}), (1, 2, {})]
    sage: H = G.relabel(lambda i: i+10, inplace=False)
    sage: H.vertices()
    [10, 11, 12]
    sage: H.edges()
    [(10, 11, {}), (11, 12, {})]
```




---

Comment by dsm created at 2011-03-15 12:17:45

This question is slightly orthogonal to the patch, but was the first thing I thought to try.  `:-)`  Should we require an explicit parameter to relabel a graph into loopiness/multiedgeness if it isn't already?  It seems far more likely to be an accident than to be intended, and currently can get a graph into weird states:


```
sage: G = graphs.CubeGraph(3)
sage: G.relabel()
sage: G.vertices(), G.edges()
([0, 1, 2, 3, 4, 5, 6, 7], [(0, 1, None), (0, 2, None), (0, 4, None), (1, 3, None), (1, 5, None), (2, 3, None), (2, 6, None), (3, 7, None), (4, 5, None), (4, 6, None), (5, 7, None), (6, 7, None)])
sage: G.relabel(lambda x: 0)
sage: G
3-Cube: Graph on 8 vertices
sage: G.vertices()
[0]
sage: G.edges()
[(0, 0, None), (0, 0, None), (0, 0, None)]
sage: G.allows_multiple_edges()
False
sage: G.multiple_edges()
[(0, 0, None), (0, 0, None), (0, 0, None)]
sage: G.allows_loops()
False
sage: G.loops()
[(0, 0, None), (0, 0, None), (0, 0, None)]
sage: G.loop_vertices()
[]
```



---

Comment by nthiery created at 2011-03-15 13:26:03

Changing status from new to needs_work.


---

Comment by nthiery created at 2011-03-15 13:26:03

Hi!

At this point, the intent is only to handle bijective relabelling (I just updated the title accordingly). Doing more could certainly be useful, but as you point out would require more algorithmic and possibly more information from the user. So that would be for a later patch.

So for this patch it would indeed make sense to add a sanity check that all new labels are distinct. I'll try to get around to do this, unless you beat me to it :-)


---

Comment by nthiery created at 2011-03-16 17:21:03

Changing status from needs_work to needs_review.


---

Comment by ncohen created at 2011-03-17 17:57:01

I'd gladly give a positive review to that one if I didn't expect the release manager to mention its commit string... `:-)`

Nathann


---

Comment by nthiery created at 2011-03-18 09:08:41

Replying to [comment:4 ncohen]:
> I'd gladly give a positive review to that one if I didn't expect the release manager to mention its commit string... `:-)`

Oops; done!


---

Comment by ncohen created at 2011-03-18 09:30:04

> Oops; done!

My turn now : I'm sorry for not having seen it earlier, but you are adding a new way to relabel a graph through a function and the docstring does not mention it. So it's quite unlikely anybody else would notice `:-)`

Could you add some mention of it in the doc ?

After that, I promise I will write a patch for anything else I wouldn't have noticed :-D`

Nathann


---

Comment by nthiery created at 2011-03-18 10:18:57

Replying to [comment:6 ncohen]:
> My turn now : I'm sorry for not having seen it earlier, but you are adding a new way to relabel a graph through a function and the docstring does not mention it. So it's quite unlikely anybody else would notice `:-)`
> 
> Could you add some mention of it in the doc ?

Done. And since we should always go the extra mile, I reworked a bit the rest of the doc. Since I haven't changed the code, test pass on this file, and the documentation compiles and looks reasonable, I assume the buildbot will stay green.

> After that, I promise I will write a patch for anything else I wouldn't have noticed :-D`

:-)


---

Comment by ncohen created at 2011-03-18 10:27:10

Changing status from needs_review to positive_review.


---

Comment by ncohen created at 2011-03-18 10:27:10

Great !! Thanks ! `:-)`

Nathann


---

Comment by nthiery created at 2011-03-21 15:56:39

Ah, I just noticed a missing feature which is so closely related that I am going to add it to this patch (namely to accept a tuple as well as a list as input).


---

Comment by nthiery created at 2011-03-21 15:56:39

Changing status from positive_review to needs_work.


---

Attachment

Final version, with mercurial header


---

Comment by nthiery created at 2011-03-21 16:16:15

Changing status from needs_work to needs_review.


---

Comment by nthiery created at 2011-03-21 16:16:15

Done, with a bug fix by the way (``return_map`` was incompatible with ``perm``) and a bit more tests.

Sorry Nathann for the rereviewing ...


---

Comment by ncohen created at 2011-03-23 12:05:09

Positively re-reviewed !

Nathann


---

Comment by ncohen created at 2011-03-23 12:05:09

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2011-04-13 07:44:13

Resolution: fixed
