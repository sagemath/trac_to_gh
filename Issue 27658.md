# Issue 27658: Add custom bounding box for matrix_plot

Issue created by migration from https://trac.sagemath.org/ticket/27895

Original creator: @mwageringel

Original creation time: 2019-05-30 10:46:18

This ticket implements a new option `extent` for `matrix_plot` which allows to specify the rectangle in which to draw the matrix.

For example the following can be used to draw the matrix in [0,1]×[0,1] instead of the default [-0.5,4.5]×[-0.5,4.5].

```
sage: matrix_plot(identity_matrix(5), extent=(0, 1, 0, 1))
```


The name and format of the keyword `extent` is the same as in `matplotlib.pyplot.imshow`. The only difference is that our users do not need to handle the case where e.g. `ymin > ymax`. This is automatically handled by the implementation based on `flip_x`/`flip_y` implemented in #27891.

There is a very old ticket #2189 attempting to implement the same, among other things. There, keywords named `xrange`/`yrange` are used instead. I prefer `extent` as used in Matplotlib, as it rarely makes sense to specify only one of `xrange`/`yrange`, but I am open for suggestions.


---

Comment by @mwageringel created at 2019-05-30 10:56:46

Changing status from new to needs_review.


---

Comment by @mwageringel created at 2019-05-30 10:56:46

I have also added a Sphinx plot to have at least one picture for `matrix_plot` in the documentation.
----
New commits:


---

Comment by @mwageringel created at 2019-05-30 10:59:21

The first commit is from #27891 which this ticket is based on.


---

Comment by embray created at 2019-07-03 11:37:56

Moving tickets from the Sage 8.8 milestone that have been actively worked on in the last six months to the next release milestone (optimistically).


---

Comment by git created at 2019-07-29 08:48:47

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2019-07-29 09:07:34

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by @mwageringel created at 2019-07-29 09:12:45

I renamed the `extent` option to `xrange`/`yrange` because this is more consistent with the existing API such as in `density_plot` and `contour_plot`.

As graphics arrays now work correctly since #27865 got merged, testing this became considerably easier. For example, you can check that the various combinations of options work as intended using:

```
m = identity_matrix(5); m[1,0] = 2
arr = [matrix_plot(matrix(m, sparse=s), xrange=x, yrange=y, flip_y=f)
       for s in [False, True]
       for f in [True, False]
       for x in [(-2,1), None]
       for y in [(-pi,-1), None]]
graphics_array(arr, ncols=4).show(figsize=10)
```

Be sure to merge one of the latest betas for that.

There is a slight change in behavior for the graphics primitive `MatrixPlot`. The parameters `xrange`/`yrange` now behave like those of `matrix_plot`, defining the bounding box in which to draw a matrix. Previously, they could be used to obtain a subimage of a matrix plot (with an offset of 0.5), although this was not really documented well. Being a graphics primitive, `MatrixPlot` seems to be intended for internal use only, so I think this change is fine and arguably more useful. The old behavior can still be obtained by using the keywords `xmin`, `xmax`, `ymin`, `ymax`.


---

Comment by embray created at 2019-12-30 14:48:17

Ticket retargeted after milestone closed


---

Comment by mkoeppe created at 2020-04-14 19:41:51

Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.


---

Comment by git created at 2020-05-29 20:19:57

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2020-08-02 13:46:58

Changing status from needs_review to positive_review.


---

Comment by @mwageringel created at 2020-08-02 14:10:20

Thank you.


---

Comment by vbraun created at 2020-08-07 19:05:38

Resolution: fixed
