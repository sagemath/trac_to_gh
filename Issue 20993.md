# Issue 20993: py3 some removed members of types module

archive/issues_020993.json:
```json
{
    "body": "doing another easy part of the ticket #15994\n\nIssue created by migration from https://trac.sagemath.org/ticket/21230\n\n",
    "created_at": "2016-08-12T09:58:49Z",
    "labels": [
        "python3",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.4",
    "title": "py3 some removed members of types module",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20993",
    "user": "@fchapoton"
}
```
doing another easy part of the ticket #15994

Issue created by migration from https://trac.sagemath.org/ticket/21230





---

archive/issue_comments_290667.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-08-12T09:59:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20993",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20993#issuecomment-290667",
    "user": "@fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_290668.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-08-12T09:59:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20993",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20993#issuecomment-290668",
    "user": "@fchapoton"
}
```

New commits:



---

archive/issue_comments_290669.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-08-12T11:30:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20993",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20993#issuecomment-290669",
    "user": "@jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_290670.json:
```json
{
    "body": "Change\n\n```\nfrom six import class_types as ClassType\n```\n\nto\n\n```\nfrom six import class_types\n```\n\nand fix the code accordingly: don't use `isinstance(x, (type, ClassType))` but use `isinstance(x, class_types)`.",
    "created_at": "2016-08-12T11:30:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20993",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20993#issuecomment-290670",
    "user": "@jdemeyer"
}
```

Change

```
from six import class_types as ClassType
```

to

```
from six import class_types
```

and fix the code accordingly: don't use `isinstance(x, (type, ClassType))` but use `isinstance(x, class_types)`.



---

archive/issue_comments_290671.json:
```json
{
    "body": "In `src/sage/combinat/designs/ext_rep.py`, I think you can remove `from types import *` (and you could also remove the duplicate `import sys`).",
    "created_at": "2016-08-12T11:30:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20993",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20993#issuecomment-290671",
    "user": "@jdemeyer"
}
```

In `src/sage/combinat/designs/ext_rep.py`, I think you can remove `from types import *` (and you could also remove the duplicate `import sys`).



---

archive/issue_comments_290672.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-12T12:34:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20993",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20993#issuecomment-290672",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_290673.json:
```json
{
    "body": "done. I have also changed the other similar \"import X as Y\".",
    "created_at": "2016-08-12T12:36:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20993",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20993#issuecomment-290673",
    "user": "@fchapoton"
}
```

done. I have also changed the other similar "import X as Y".



---

archive/issue_comments_290674.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-08-12T12:36:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20993",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20993#issuecomment-290674",
    "user": "@fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_290675.json:
```json
{
    "body": "Replying to [comment:2 jdemeyer]:\n> fix the code accordingly: don't use `isinstance(x, (type, ClassType))` but use `isinstance(x, class_types)`.",
    "created_at": "2016-08-12T12:52:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20993",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20993#issuecomment-290675",
    "user": "@jdemeyer"
}
```

Replying to [comment:2 jdemeyer]:
> fix the code accordingly: don't use `isinstance(x, (type, ClassType))` but use `isinstance(x, class_types)`.



---

archive/issue_comments_290676.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-08-12T12:52:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20993",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20993#issuecomment-290676",
    "user": "@jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_290677.json:
```json
{
    "body": "More seriously: `nested_class.pyx` needs `from __future__ import abolute_import` for this to work otherwise Sage doesn't even start.",
    "created_at": "2016-08-12T12:53:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20993",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20993#issuecomment-290677",
    "user": "@jdemeyer"
}
```

More seriously: `nested_class.pyx` needs `from __future__ import abolute_import` for this to work otherwise Sage doesn't even start.



---

archive/issue_comments_290678.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-12T12:58:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20993",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20993#issuecomment-290678",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_290679.json:
```json
{
    "body": "ok, done.\n\nConcerning the future import: once again, we are hurt by the existence of a module named \"six\" inside misc. I wonder if it is used anywhere.",
    "created_at": "2016-08-12T12:59:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20993",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20993#issuecomment-290679",
    "user": "@fchapoton"
}
```

ok, done.

Concerning the future import: once again, we are hurt by the existence of a module named "six" inside misc. I wonder if it is used anywhere.



---

archive/issue_comments_290680.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-08-12T12:59:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20993",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20993#issuecomment-290680",
    "user": "@fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_290681.json:
```json
{
    "body": "Replying to [comment:9 chapoton]:\n> once again, we are hurt by the existence of a module named \"six\" inside misc.\n\nGuess who caused this:\n\n```diff\ncommit 55939be60650094fc3d119fab649a70148a29fd9\nAuthor: Fr\u00e9d\u00e9ric Chapoton <chapoton@math.univ-lyon1.fr>\nDate:   Sun Jul 10 11:57:02 2016 +0200\n\n    py3 imports in misc folder\n\ndiff --git a/src/sage/misc/six.py b/src/sage/misc/six.py\nindex 15eee19..ffb431c 100644\n--- a/src/sage/misc/six.py\n+++ b/src/sage/misc/six.py\n@@ -1,8 +1,9 @@\n \"\"\"\n Python 2 and 3 Compatibility\n \"\"\"\n+from __future__ import absolute_import\n \n-from six import *\n+from .six import *\n \n def with_metaclass(meta, *bases):\n     \"\"\"\n```\n",
    "created_at": "2016-08-12T13:00:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20993",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20993#issuecomment-290681",
    "user": "@jdemeyer"
}
```

Replying to [comment:9 chapoton]:
> once again, we are hurt by the existence of a module named "six" inside misc.

Guess who caused this:

```diff
commit 55939be60650094fc3d119fab649a70148a29fd9
Author: Frédéric Chapoton <chapoton@math.univ-lyon1.fr>
Date:   Sun Jul 10 11:57:02 2016 +0200

    py3 imports in misc folder

diff --git a/src/sage/misc/six.py b/src/sage/misc/six.py
index 15eee19..ffb431c 100644
--- a/src/sage/misc/six.py
+++ b/src/sage/misc/six.py
@@ -1,8 +1,9 @@
 """
 Python 2 and 3 Compatibility
 """
+from __future__ import absolute_import
 
-from six import *
+from .six import *
 
 def with_metaclass(meta, *bases):
     """
```




---

archive/issue_comments_290682.json:
```json
{
    "body": "Since a `NestedClassMetaclass` is also a `type`, you can replace\n\n```\nif isinstance(v, (class_types, NestedClassMetaclass))\n```\n\nby\n\n```\nif isinstance(v, class_types)\n```\n",
    "created_at": "2016-08-12T13:03:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20993",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20993#issuecomment-290682",
    "user": "@jdemeyer"
}
```

Since a `NestedClassMetaclass` is also a `type`, you can replace

```
if isinstance(v, (class_types, NestedClassMetaclass))
```

by

```
if isinstance(v, class_types)
```




---

archive/issue_comments_290683.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-08-12T13:04:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20993",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20993#issuecomment-290683",
    "user": "@jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_290684.json:
```json
{
    "body": "There is still `type, class_types` in `src/sage/combinat/root_system/cartan_type.py`",
    "created_at": "2016-08-12T13:04:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20993",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20993#issuecomment-290684",
    "user": "@jdemeyer"
}
```

There is still `type, class_types` in `src/sage/combinat/root_system/cartan_type.py`



---

archive/issue_comments_290685.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-12T13:04:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20993",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20993#issuecomment-290685",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_290686.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-12T13:06:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20993",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20993#issuecomment-290686",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_290687.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-08-12T15:56:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20993",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20993#issuecomment-290687",
    "user": "@fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_290688.json:
```json
{
    "body": "done",
    "created_at": "2016-08-12T15:56:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20993",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20993#issuecomment-290688",
    "user": "@fchapoton"
}
```

done



---

archive/issue_comments_290689.json:
```json
{
    "body": "\n```\nsage -t --long src/sage/misc/sageinspect.py\n**********************************************************************\nFile \"src/sage/misc/sageinspect.py\", line 252, in sage.misc.sageinspect._extract_embedded_signature\nFailed example:\n    print(_extract_embedded_signature(MainClass.NestedClass.NestedSubClass.dummy.__doc__, 'dummy')[0])\nExpected:\n    File: sage/misc/nested_class.pyx (starting at line 315)\n    ...\nGot:\n    File: sage/misc/nested_class.pyx (starting at line 314)\n    <BLANKLINE>\n                    A dummy method to demonstrate the embedding of\n                    method signature for nested classes.\n    <BLANKLINE>\n                    TESTS::\n    <BLANKLINE>\n                        sage: from sage.misc.nested_class import MainClass\n                        sage: print(MainClass.NestedClass.NestedSubClass.dummy.__doc__)\n                        NestedSubClass.dummy(self, x, *args, r=(1, 2, 3.4), **kwds)\n                        File: sage/misc/nested_class.pyx (starting at line 315)\n                        <BLANKLINE>\n                                        A dummy method to demonstrate the embedding of\n                                        method signature for nested classes.\n                        ...\n    <BLANKLINE>\n    <BLANKLINE>\n**********************************************************************\n1 item had failures:\n   1 of   6 in sage.misc.sageinspect._extract_embedded_signature\n    [288 tests, 1 failure, 16.06 s]\nsage -t --long src/sage/misc/nested_class.pyx\n**********************************************************************\nFile \"src/sage/misc/nested_class.pyx\", line 322, in sage.misc.nested_class.MainClass.NestedClass.NestedSubClass.dummy\nFailed example:\n    print(MainClass.NestedClass.NestedSubClass.dummy.__doc__)\nExpected:\n    NestedSubClass.dummy(self, x, *args, r=(1, 2, 3.4), **kwds)\n    File: sage/misc/nested_class.pyx (starting at line 315)\n    <BLANKLINE>\n                    A dummy method to demonstrate the embedding of\n                    method signature for nested classes.\n    ...\nGot:\n    NestedSubClass.dummy(self, x, *args, r=(1, 2, 3.4), **kwds)\n    File: sage/misc/nested_class.pyx (starting at line 314)\n    <BLANKLINE>\n                    A dummy method to demonstrate the embedding of\n                    method signature for nested classes.\n    <BLANKLINE>\n                    TESTS::\n    <BLANKLINE>\n                        sage: from sage.misc.nested_class import MainClass\n                        sage: print(MainClass.NestedClass.NestedSubClass.dummy.__doc__)\n                        NestedSubClass.dummy(self, x, *args, r=(1, 2, 3.4), **kwds)\n                        File: sage/misc/nested_class.pyx (starting at line 315)\n                        <BLANKLINE>\n                                        A dummy method to demonstrate the embedding of\n                                        method signature for nested classes.\n                        ...\n    <BLANKLINE>\n    <BLANKLINE>\n**********************************************************************\n1 item had failures:\n   1 of   3 in sage.misc.nested_class.MainClass.NestedClass.NestedSubClass.dummy\n    [68 tests, 1 failure, 1.82 s]\n```\n",
    "created_at": "2016-08-12T19:12:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20993",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20993#issuecomment-290689",
    "user": "@jdemeyer"
}
```


```
sage -t --long src/sage/misc/sageinspect.py
**********************************************************************
File "src/sage/misc/sageinspect.py", line 252, in sage.misc.sageinspect._extract_embedded_signature
Failed example:
    print(_extract_embedded_signature(MainClass.NestedClass.NestedSubClass.dummy.__doc__, 'dummy')[0])
Expected:
    File: sage/misc/nested_class.pyx (starting at line 315)
    ...
Got:
    File: sage/misc/nested_class.pyx (starting at line 314)
    <BLANKLINE>
                    A dummy method to demonstrate the embedding of
                    method signature for nested classes.
    <BLANKLINE>
                    TESTS::
    <BLANKLINE>
                        sage: from sage.misc.nested_class import MainClass
                        sage: print(MainClass.NestedClass.NestedSubClass.dummy.__doc__)
                        NestedSubClass.dummy(self, x, *args, r=(1, 2, 3.4), **kwds)
                        File: sage/misc/nested_class.pyx (starting at line 315)
                        <BLANKLINE>
                                        A dummy method to demonstrate the embedding of
                                        method signature for nested classes.
                        ...
    <BLANKLINE>
    <BLANKLINE>
**********************************************************************
1 item had failures:
   1 of   6 in sage.misc.sageinspect._extract_embedded_signature
    [288 tests, 1 failure, 16.06 s]
sage -t --long src/sage/misc/nested_class.pyx
**********************************************************************
File "src/sage/misc/nested_class.pyx", line 322, in sage.misc.nested_class.MainClass.NestedClass.NestedSubClass.dummy
Failed example:
    print(MainClass.NestedClass.NestedSubClass.dummy.__doc__)
Expected:
    NestedSubClass.dummy(self, x, *args, r=(1, 2, 3.4), **kwds)
    File: sage/misc/nested_class.pyx (starting at line 315)
    <BLANKLINE>
                    A dummy method to demonstrate the embedding of
                    method signature for nested classes.
    ...
Got:
    NestedSubClass.dummy(self, x, *args, r=(1, 2, 3.4), **kwds)
    File: sage/misc/nested_class.pyx (starting at line 314)
    <BLANKLINE>
                    A dummy method to demonstrate the embedding of
                    method signature for nested classes.
    <BLANKLINE>
                    TESTS::
    <BLANKLINE>
                        sage: from sage.misc.nested_class import MainClass
                        sage: print(MainClass.NestedClass.NestedSubClass.dummy.__doc__)
                        NestedSubClass.dummy(self, x, *args, r=(1, 2, 3.4), **kwds)
                        File: sage/misc/nested_class.pyx (starting at line 315)
                        <BLANKLINE>
                                        A dummy method to demonstrate the embedding of
                                        method signature for nested classes.
                        ...
    <BLANKLINE>
    <BLANKLINE>
**********************************************************************
1 item had failures:
   1 of   3 in sage.misc.nested_class.MainClass.NestedClass.NestedSubClass.dummy
    [68 tests, 1 failure, 1.82 s]
```




---

archive/issue_comments_290690.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-08-12T19:12:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20993",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20993#issuecomment-290690",
    "user": "@jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_290691.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-12T19:19:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20993",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20993#issuecomment-290691",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_290692.json:
```json
{
    "body": "done",
    "created_at": "2016-08-12T19:26:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20993",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20993#issuecomment-290692",
    "user": "@fchapoton"
}
```

done



---

archive/issue_comments_290693.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-08-12T19:26:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20993",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20993#issuecomment-290693",
    "user": "@fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_290694.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-08-12T20:37:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20993",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20993#issuecomment-290694",
    "user": "@jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_290695.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-08-14T19:05:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20993",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20993#issuecomment-290695",
    "user": "@vbraun"
}
```

Resolution: fixed
