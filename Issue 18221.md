# Issue 18221: Upgrade latte_int (LattE integrale) package to version 1.7.3 for improved error reporting

archive/issues_018221.json:
```json
{
    "body": "CC:  @fchapoton bedutra @vbraun @nathanncohen @videlec @dimpase\n\nAs I promised in the discussion of #18211,\nwe have made a new release of LattE, which gives an nonzero exit code on errors (this was a regression).\n\nThe package should be upgraded (https://www.math.ucdavis.edu/~latte/software.php),\nand I suppose the code of sage.geometry.polyhedron.Polyhedron_ZZ::ehrhart_polynomial which worked around this could now be cleaned up.\n\nIssue created by migration from https://trac.sagemath.org/ticket/18458\n\n",
    "created_at": "2015-05-19T22:31:46Z",
    "labels": [
        "geometry",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.8",
    "title": "Upgrade latte_int (LattE integrale) package to version 1.7.3 for improved error reporting",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18221",
    "user": "@mkoeppe"
}
```
CC:  @fchapoton bedutra @vbraun @nathanncohen @videlec @dimpase

As I promised in the discussion of #18211,
we have made a new release of LattE, which gives an nonzero exit code on errors (this was a regression).

The package should be upgraded (https://www.math.ucdavis.edu/~latte/software.php),
and I suppose the code of sage.geometry.polyhedron.Polyhedron_ZZ::ehrhart_polynomial which worked around this could now be cleaned up.

Issue created by migration from https://trac.sagemath.org/ticket/18458





---

archive/issue_comments_246134.json:
```json
{
    "body": "I also note that the spkg-check of the current latte_int spkg fails. \n\nI think this is because the latte_int package, whose upstream tarball is called latte-int-VERSION.tar.gz unpacks to a directory called latte-int-VERSION; but sage-spkg seems to expect the source in latte_int-VERSION.",
    "created_at": "2015-05-20T00:43:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18221#issuecomment-246134",
    "user": "@mkoeppe"
}
```

I also note that the spkg-check of the current latte_int spkg fails. 

I think this is because the latte_int package, whose upstream tarball is called latte-int-VERSION.tar.gz unpacks to a directory called latte-int-VERSION; but sage-spkg seems to expect the source in latte_int-VERSION.



---

archive/issue_comments_246135.json:
```json
{
    "body": "Changing keywords from \"\" to \"latte\".",
    "created_at": "2015-05-22T12:12:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18221#issuecomment-246135",
    "user": "@fchapoton"
}
```

Changing keywords from "" to "latte".



---

archive/issue_comments_246136.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-05-22T12:12:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18221#issuecomment-246136",
    "user": "@fchapoton"
}
```

New commits:



---

archive/issue_comments_246137.json:
```json
{
    "body": "Replying to [comment:2 chapoton]:\n> New commits:\n> ||[a6c54a2](http://git.sagemath.org/sage.git/commit/?id=a6c54a25fec95e917b2ce2f94236e5047daea0b3)||`trac #18458 updating latte_int spkg`||\n\nYour change to cd into directory latte-integrale suggests that you grabbed the wrong package. You need the package latte-int-1.7.3.tar.gz from https://www.math.ucdavis.edu/~latte/software/packages/latte_current/",
    "created_at": "2015-05-22T13:20:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18221#issuecomment-246137",
    "user": "@mkoeppe"
}
```

Replying to [comment:2 chapoton]:
> New commits:
> ||[a6c54a2](http://git.sagemath.org/sage.git/commit/?id=a6c54a25fec95e917b2ce2f94236e5047daea0b3)||`trac #18458 updating latte_int spkg`||

Your change to cd into directory latte-integrale suggests that you grabbed the wrong package. You need the package latte-int-1.7.3.tar.gz from https://www.math.ucdavis.edu/~latte/software/packages/latte_current/



---

archive/issue_comments_246138.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-22T14:37:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18221#issuecomment-246138",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_246139.json:
```json
{
    "body": "Ok, I redid the job for the correct spkg. I am now checking if it builds.",
    "created_at": "2015-05-22T14:39:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18221#issuecomment-246139",
    "user": "@fchapoton"
}
```

Ok, I redid the job for the correct spkg. I am now checking if it builds.



---

archive/issue_comments_246140.json:
```json
{
    "body": "It seems that using the bad spkg has broken my sage..",
    "created_at": "2015-05-22T14:47:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18221#issuecomment-246140",
    "user": "@fchapoton"
}
```

It seems that using the bad spkg has broken my sage..



---

archive/issue_comments_246141.json:
```json
{
    "body": "Replying to [comment:6 chapoton]:\n> It seems that using the bad spkg has broken my sage..\n\nthat's cause the full tarball packages some stuff that is also in sage...",
    "created_at": "2015-05-22T14:58:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18221#issuecomment-246141",
    "user": "@dimpase"
}
```

Replying to [comment:6 chapoton]:
> It seems that using the bad spkg has broken my sage..

that's cause the full tarball packages some stuff that is also in sage...



---

archive/issue_comments_246142.json:
```json
{
    "body": "Too bad. I am therefore not able to test now if the skpg works..",
    "created_at": "2015-05-22T15:01:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18221#issuecomment-246142",
    "user": "@fchapoton"
}
```

Too bad. I am therefore not able to test now if the skpg works..



---

archive/issue_comments_246143.json:
```json
{
    "body": "it builds, but `spkg-check` fails, i.e, running\n\n```\n$ SAGE_CHECK=yes ./sage -f latte_int\n```\n\ngives\n\n\n```\n...\nmake[2]: Leaving directory `/home/scratch/dimpase/sage/sage6.7/local/var/tmp/sage/build/latte_int-1.7.3/latte-int-1.7.3'\nmake[1]: Leaving directory `/home/scratch/dimpase/sage/sage6.7/local/var/tmp/sage/build/latte_int-1.7.3/latte-int-1.7.3'\n\nreal    0m10.385s\nuser    0m5.929s\nsys     0m5.269s\nSuccessfully installed latte_int-1.7.3\nRunning the test suite for latte_int-1.7.3...\nTesting in /home/scratch/dimpase/sage/sage6.7/local/var/tmp/sage/build/latte_int-1.7.3/src\n./spkg-check: line 21: cd: /home/scratch/dimpase/sage/sage6.7/local/var/tmp/sage/build/latte_int-1.7.3/src: No such file or directory\nmake: *** No rule to make target `check'.  Stop.\nError: tests failed\n```\n\nThe working directory is not  `local/var/tmp/sage/build/latte_int-1.7.3/src`, but \n`local/var/tmp/sage/build/latte_int-1.7.3/latte-int-1.7.3`, which is probably due to that `latte-int` vs `latte_int` thing... \n\nThe fix is on its way.",
    "created_at": "2015-05-22T15:14:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18221#issuecomment-246143",
    "user": "@dimpase"
}
```

it builds, but `spkg-check` fails, i.e, running

```
$ SAGE_CHECK=yes ./sage -f latte_int
```

gives


```
...
make[2]: Leaving directory `/home/scratch/dimpase/sage/sage6.7/local/var/tmp/sage/build/latte_int-1.7.3/latte-int-1.7.3'
make[1]: Leaving directory `/home/scratch/dimpase/sage/sage6.7/local/var/tmp/sage/build/latte_int-1.7.3/latte-int-1.7.3'

real    0m10.385s
user    0m5.929s
sys     0m5.269s
Successfully installed latte_int-1.7.3
Running the test suite for latte_int-1.7.3...
Testing in /home/scratch/dimpase/sage/sage6.7/local/var/tmp/sage/build/latte_int-1.7.3/src
./spkg-check: line 21: cd: /home/scratch/dimpase/sage/sage6.7/local/var/tmp/sage/build/latte_int-1.7.3/src: No such file or directory
make: *** No rule to make target `check'.  Stop.
Error: tests failed
```

The working directory is not  `local/var/tmp/sage/build/latte_int-1.7.3/src`, but 
`local/var/tmp/sage/build/latte_int-1.7.3/latte-int-1.7.3`, which is probably due to that `latte-int` vs `latte_int` thing... 

The fix is on its way.



---

archive/issue_comments_246144.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-22T15:15:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18221#issuecomment-246144",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_246145.json:
```json
{
    "body": "please feel free to set it to positive review if you're OK with my change in the last commit.",
    "created_at": "2015-05-22T15:17:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18221#issuecomment-246145",
    "user": "@dimpase"
}
```

please feel free to set it to positive review if you're OK with my change in the last commit.



---

archive/issue_comments_246146.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-05-22T17:42:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18221#issuecomment-246146",
    "user": "@mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_246147.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-05-22T17:42:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18221#issuecomment-246147",
    "user": "@mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_246148.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-05-23T19:53:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18221#issuecomment-246148",
    "user": "@vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_246149.json:
```json
{
    "body": "FYI: doctests don't pass, so the package was moved to experimental.",
    "created_at": "2015-06-06T09:26:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18221#issuecomment-246149",
    "user": "@jdemeyer"
}
```

FYI: doctests don't pass, so the package was moved to experimental.
