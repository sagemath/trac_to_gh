# Issue 13618: bezier_path modifies its argument

Issue created by migration from https://trac.sagemath.org/ticket/13822

Original creator: mjo

Original creation time: 2012-12-11 17:04:26

Assignee: jason, was

CC:  kcrisman madrosity

The `bezier_path` function will mangle the list that you give it, leading to unexpected behavior:


```
sage: bp = [[(1,1),(2,3),(3,3)], [(4,4),(5,5)]]
sage: bezier_path(bp)

sage: bp
[[(1, 1), (2, 3), (3, 3), (4, 4), (5, 5)], [(4, 4), (5, 5)]]
```


Probable fix: `copy()` the list that is passed in.



---

Attachment


---

Comment by mjo created at 2013-06-09 18:57:33

Changing status from new to needs_review.


---

Comment by ncohen created at 2013-06-30 08:49:17

Changing status from needs_review to needs_info.


---

Comment by ncohen created at 2013-06-30 08:49:17

Hellooooooooooo !!

Wouldn't a simple "copy" do the job ? Would it be wrong to just replace `self.path = path` by `self.path = list(path)` ?

Nathann


---

Comment by mjo created at 2013-06-30 14:23:35

Unless I messed up my testing, a plain `copy()` doesn't work. The `path` parameter is a list of lists, so if you do a simple copy, you get a brand new list containing all the old pointers to lists.

Even though `self.path` is a new list, this,


```
vertices = self.path[0]
```


sets `vertices` to the first element of that new list, which is one of the lists that the user passed in. Then this,


```
vertices += curve
```


modifies his list.


---

Comment by ncohen created at 2013-06-30 15:12:47

Changing status from needs_info to needs_review.


---

Comment by ncohen created at 2013-06-30 15:12:47

Oh. I see. Well, then ... `:-)`

Thank you for this patch !

Nathann


---

Comment by ncohen created at 2013-06-30 15:12:53

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2013-07-31 12:53:48

Resolution: fixed
