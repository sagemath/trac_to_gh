# Issue 32129: Implementation of the q-bracket

Issue created by migration from https://trac.sagemath.org/ticket/32366

Original creator: @DavidAyotte

Original creation time: 2021-08-11 13:41:33

CC:  vdelecroix slelievre

This ticket's goal is to implement the q-bracket and related functions in order to verify the Block-Okounkov theorem. A reference about the subject is the paper by Zagier: 

_Partitions, quasimodular forms and the Bloch-Okounkov theorem_, 
https://people.mpim-bonn.mpg.de/zagier/files/doi/10.1007/s11139-015-9730-8/bloch-okounkov.pdf

This ticket is part of the GSoC 2021 project about quasimodular forms, see the task ticket #31560.

This code will be marked as _experimental_, but a more formal, non-experimental, implementation shall be done in the future (using shifted symmetric polynomials).

The code of this ticket is located in the following new directory:

`sage/combinat/shifted_symmetric_functions/`


---

Comment by @DavidAyotte created at 2021-08-11 13:42:56

Set assignee to @DavidAyotte.


---

Comment by @DavidAyotte created at 2021-08-11 13:42:56

Changing keywords from "" to "quasi modular forms block okounkov".


---

Comment by @DavidAyotte created at 2021-08-11 13:42:56

Changing component from PLEASE CHANGE to combinatorics.


---

Comment by slelievre created at 2021-08-14 18:18:15

Careful, it's Spencer Bloch, not Block.

- http://www.math.uchicago.edu/~bloch/
----
Last 10 new commits:


---

Comment by slelievre created at 2021-08-14 18:18:15

Changing keywords from "quasi modular forms block okounkov" to "quasimodular forms, Bloch-Okounkov".


---

Comment by git created at 2021-09-16 20:44:51

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by @DavidAyotte created at 2021-09-16 21:07:02

To make the commit history clear, I must mention that I added the `q_bracket` function in this commit:

[https://git.sagemath.org/sage.git/commit/?h=1763120e9a3c4df5225f4de54d8bdd2cc2765d24&id=cb29e98053fca6818e365a36a4c22fa46f7f1e3c](https://git.sagemath.org/sage.git/commit/?h=1763120e9a3c4df5225f4de54d8bdd2cc2765d24&id=cb29e98053fca6818e365a36a4c22fa46f7f1e3c)

(Everything outside `sage/combinat/shifted_symmetric_functions/` does not belong to this ticket).

Unfortunately, I don't think the code is correct because the output seems wrong when I test it for a shifted symmetric polynomial different than a generator of the ring of shifted symmetric polynomial.

For examples, this is correct:


```
sage: from sage.combinat.shifted_symmetric_functions.q_bracket import *
sage: P.<Q1, Q2, Q3, Q4> = QQ[]
sage: q_bracket(Q2)
-1/24*P
sage: q_bracket(Q4)
1/1152*P^2 + 1/2880*Q
```

(by correct, I mean that the computations are the same as the ones given in the Appendix of the paper by Zagier)

However, this is not correct:

```
sage: q_bracket(Q2^2)
1/576*P^2 + 1/1440*Q
```

By the table of Zagier, it should be equal to `-1/576*P^2 + 1/288*Q`. I would be really grateful if someone could help me figure out why my code return the wrong answer! Thanks!


---

Comment by git created at 2021-09-27 15:24:35

Branch pushed to git repo; I updated commit sha1. New commits:
