# Issue 24253: Revert #22120

archive/issues_024253.json:
```json
{
    "body": "CC:  @cheuberg @dkrenn\n\nPowering a `QQbar` number by a `QQbar` number makes no sense mathematically. It goes against the philosophy of the coercion model. `QQbar` should only support powering by `QQ`.\n\nThis ticket is meant to revert #22120 which allows `QQbar(1)^QQbar(anything)`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/24490\n\n",
    "created_at": "2018-01-08T11:24:46Z",
    "labels": [
        "component: basic arithmetic",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "Revert #22120",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24253",
    "user": "https://github.com/jdemeyer"
}
```
CC:  @cheuberg @dkrenn

Powering a `QQbar` number by a `QQbar` number makes no sense mathematically. It goes against the philosophy of the coercion model. `QQbar` should only support powering by `QQ`.

This ticket is meant to revert #22120 which allows `QQbar(1)^QQbar(anything)`.

Issue created by migration from https://trac.sagemath.org/ticket/24490





---

archive/issue_comments_339229.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-01-08T11:45:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24253#issuecomment-339229",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_339230.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-01-08T11:58:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24253#issuecomment-339230",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_339231.json:
```json
{
    "body": "And what about\n\n```\nsage: 2^(1/2)\nsqrt(2)\n```\n\nShould integers/rationals only be powered by respectively positive integers/relative integers?",
    "created_at": "2018-01-08T14:10:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24253#issuecomment-339231",
    "user": "https://github.com/videlec"
}
```

And what about

```
sage: 2^(1/2)
sqrt(2)
```

Should integers/rationals only be powered by respectively positive integers/relative integers?



---

archive/issue_comments_339232.json:
```json
{
    "body": "Replying to [comment:7 vdelecroix]:\n> And what about\n> {{{\n> sage: 2^(1/2)\n> sqrt(2)\n> }}}\n> Should integers/rationals only be powered by respectively positive integers/relative integers?\n\nThat is not relevant to this ticket. There are many issues with powering for specific parents, but we should not mix up unrelated things. In any case, if you want to change `2^(1/2)`, that will certainly require a discussion on sage-devel.",
    "created_at": "2018-01-08T14:15:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24253#issuecomment-339232",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:7 vdelecroix]:
> And what about
> {{{
> sage: 2^(1/2)
> sqrt(2)
> }}}
> Should integers/rationals only be powered by respectively positive integers/relative integers?

That is not relevant to this ticket. There are many issues with powering for specific parents, but we should not mix up unrelated things. In any case, if you want to change `2^(1/2)`, that will certainly require a discussion on sage-devel.



---

archive/issue_comments_339233.json:
```json
{
    "body": "You **can** define `a^b` for `a` nonzero complex and `b` complex to be `exp(b log(a))` where `log(a)` is the principal determination of the logarithm. This is very natural *and* it breaks the coercion model in the very same way as `ZZ^QQ` from comment:7 does. Don't you think that the discussion about powering and coercion should be going on with a global viewpoint on sage-devel?",
    "created_at": "2018-01-08T14:30:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24253#issuecomment-339233",
    "user": "https://github.com/videlec"
}
```

You **can** define `a^b` for `a` nonzero complex and `b` complex to be `exp(b log(a))` where `log(a)` is the principal determination of the logarithm. This is very natural *and* it breaks the coercion model in the very same way as `ZZ^QQ` from comment:7 does. Don't you think that the discussion about powering and coercion should be going on with a global viewpoint on sage-devel?



---

archive/issue_comments_339234.json:
```json
{
    "body": "Replying to [comment:9 vdelecroix]:\n> it breaks the coercion model in the very same way as `ZZ^QQ` from comment:7 does.\n\nThe fact that X is broken should never be used as an excuse to break Y too.",
    "created_at": "2018-01-08T14:32:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24253#issuecomment-339234",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:9 vdelecroix]:
> it breaks the coercion model in the very same way as `ZZ^QQ` from comment:7 does.

The fact that X is broken should never be used as an excuse to break Y too.



---

archive/issue_comments_339235.json:
```json
{
    "body": "Replying to [comment:9 vdelecroix]:\n> You **can** define `a^b` for `a` nonzero complex and `b` complex to be `exp(b log(a))` where `log(a)` is the principal determination of the logarithm. This is very natural\n\nIt does indeed make mathematical sense for all subrings of `CC`. However, if you do that, the answer should lie in `SR` and not in `QQbar`. However, I don't think it would be very useful since `SR` doesn't really understand elements of `QQbar`:\n\n```\nsage: a = QQbar(1); b = QQbar(2).sqrt(); exp(b * log(a))\ne^(1.414213562373095?*log(1))\n```\n",
    "created_at": "2018-01-08T14:37:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24253#issuecomment-339235",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:9 vdelecroix]:
> You **can** define `a^b` for `a` nonzero complex and `b` complex to be `exp(b log(a))` where `log(a)` is the principal determination of the logarithm. This is very natural

It does indeed make mathematical sense for all subrings of `CC`. However, if you do that, the answer should lie in `SR` and not in `QQbar`. However, I don't think it would be very useful since `SR` doesn't really understand elements of `QQbar`:

```
sage: a = QQbar(1); b = QQbar(2).sqrt(); exp(b * log(a))
e^(1.414213562373095?*log(1))
```




---

archive/issue_comments_339236.json:
```json
{
    "body": "From a pragmatic point of view, the main issue is that defining `QQbar(1) ^ x` (and only that) is pointless. I cannot think of any natural scenario where `QQbar ^ QQbar` powering would come up where the base is always `QQbar(1)`. This is shown by the fact that the only doctests which break are the ones specifically added by #22120. That ticket also gives no motivation at all for why `QQbar(1) ^ x` should be allowed.",
    "created_at": "2018-01-08T14:42:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24253#issuecomment-339236",
    "user": "https://github.com/jdemeyer"
}
```

From a pragmatic point of view, the main issue is that defining `QQbar(1) ^ x` (and only that) is pointless. I cannot think of any natural scenario where `QQbar ^ QQbar` powering would come up where the base is always `QQbar(1)`. This is shown by the fact that the only doctests which break are the ones specifically added by #22120. That ticket also gives no motivation at all for why `QQbar(1) ^ x` should be allowed.



---

archive/issue_comments_339237.json:
```json
{
    "body": "Note: as an alternative to this ticket, I could live with allowing `QQbar \u00d7 QQbar \u2192 SR` powering in general. But I'm not convinced that this would be useful.",
    "created_at": "2018-01-08T14:44:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24253#issuecomment-339237",
    "user": "https://github.com/jdemeyer"
}
```

Note: as an alternative to this ticket, I could live with allowing `QQbar × QQbar → SR` powering in general. But I'm not convinced that this would be useful.



---

archive/issue_comments_339238.json:
```json
{
    "body": "It would also make sense with `QQbar x QQbar \u2192 CLF`... but that is broken (somehow another story #24492).",
    "created_at": "2018-01-08T15:05:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24253#issuecomment-339238",
    "user": "https://github.com/videlec"
}
```

It would also make sense with `QQbar x QQbar → CLF`... but that is broken (somehow another story #24492).



---

archive/issue_comments_339239.json:
```json
{
    "body": "IIRC, the change in #22120 was motivated by the necessity of performing the operation in the asymptotic ring documented in that doctest there.\n\nSo if you want to revert this operation in QQbar, a deprecation is required IMHO and the asymptotic ring must be fixed to have the special case of a coefficient 1 such that the doctest there still works.\n\nSome code accompanying a paper relying on that behaviour will be broken otherwise.",
    "created_at": "2018-01-08T20:42:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24253#issuecomment-339239",
    "user": "https://github.com/cheuberg"
}
```

IIRC, the change in #22120 was motivated by the necessity of performing the operation in the asymptotic ring documented in that doctest there.

So if you want to revert this operation in QQbar, a deprecation is required IMHO and the asymptotic ring must be fixed to have the special case of a coefficient 1 such that the doctest there still works.

Some code accompanying a paper relying on that behaviour will be broken otherwise.



---

archive/issue_comments_339240.json:
```json
{
    "body": "Allright, let's fix this by implementing `QQbar \u00d7 QQbar \u2192 SR` powering in general, which is at least a sensible thing to do (as opposed to only allowing powers of `1`).",
    "created_at": "2018-01-09T09:35:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24253#issuecomment-339240",
    "user": "https://github.com/jdemeyer"
}
```

Allright, let's fix this by implementing `QQbar × QQbar → SR` powering in general, which is at least a sensible thing to do (as opposed to only allowing powers of `1`).



---

archive/issue_comments_339241.json:
```json
{
    "body": "Resolution: duplicate",
    "created_at": "2018-01-09T09:35:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24253#issuecomment-339241",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: duplicate



---

archive/issue_comments_339242.json:
```json
{
    "body": "Changing status from closed to new.",
    "created_at": "2018-01-09T10:43:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24253#issuecomment-339242",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from closed to new.



---

archive/issue_comments_339243.json:
```json
{
    "body": "Resolution changed from duplicate to ",
    "created_at": "2018-01-09T10:43:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24253#issuecomment-339243",
    "user": "https://github.com/jdemeyer"
}
```

Resolution changed from duplicate to 



---

archive/issue_comments_339244.json:
```json
{
    "body": "Hmm, both powering to `SR` and `CLF` have issues, it's not as easy as I thought. So I'm just going to stay away from this.\n\nBut I'll leave this ticket open because I still think that there is an issue to be fixed here.",
    "created_at": "2018-01-09T10:43:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24253#issuecomment-339244",
    "user": "https://github.com/jdemeyer"
}
```

Hmm, both powering to `SR` and `CLF` have issues, it's not as easy as I thought. So I'm just going to stay away from this.

But I'll leave this ticket open because I still think that there is an issue to be fixed here.
