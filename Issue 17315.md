# Issue 17315: SPKG for bliss

archive/issues_017315.json:
```json
{
    "body": "CC:  @nathanncohen\n\nHello!\n\nHopefully this ticket will push through a SPKG for bliss.\n\nIssue created by migration from https://trac.sagemath.org/ticket/17552\n\n",
    "created_at": "2014-12-26T19:01:28Z",
    "labels": [
        "component: please change"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.5",
    "title": "SPKG for bliss",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17315",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```
CC:  @nathanncohen

Hello!

Hopefully this ticket will push through a SPKG for bliss.

Issue created by migration from https://trac.sagemath.org/ticket/17552





---

archive/issue_comments_230358.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-12-26T19:02:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17315#issuecomment-230358",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_230359.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-12-26T19:02:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17315#issuecomment-230359",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

New commits:



---

archive/issue_comments_230360.json:
```json
{
    "body": "Let me instantly mention that I have no idea how to test if this thing actually works. How is this usually done?",
    "created_at": "2014-12-26T19:02:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17315#issuecomment-230360",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Let me instantly mention that I have no idea how to test if this thing actually works. How is this usually done?



---

archive/issue_comments_230361.json:
```json
{
    "body": "Yooooooooooooo !\n\nI fixed a couple of things, like long lines and the changelog (we shouldn't have a changelog anymore in those files. It was only useful in the Mercurial era).\n\nSome other modifications later, the branch seems to work:\n\n1) Checkout the branch (which I rebased on the latest beta)\n2) Download the bliss archive in your \"upsream/\" folder\n3) Run \"sage -i bliss\"\n\nhttp://www.steinertriples.fr/ncohen/tmp/bliss-0.72.tar.bz2\n\nNow that you have a working example, perhaps it will be easier to understand. Also, perhaps you can link your bliss patch without any problem once this is installed `;-)`\n\nNathann\n----\nNew commits:",
    "created_at": "2014-12-27T02:50:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17315#issuecomment-230361",
    "user": "https://github.com/nathanncohen"
}
```

Yooooooooooooo !

I fixed a couple of things, like long lines and the changelog (we shouldn't have a changelog anymore in those files. It was only useful in the Mercurial era).

Some other modifications later, the branch seems to work:

1) Checkout the branch (which I rebased on the latest beta)
2) Download the bliss archive in your "upsream/" folder
3) Run "sage -i bliss"

http://www.steinertriples.fr/ncohen/tmp/bliss-0.72.tar.bz2

Now that you have a working example, perhaps it will be easier to understand. Also, perhaps you can link your bliss patch without any problem once this is installed `;-)`

Nathann
----
New commits:



---

archive/issue_comments_230362.json:
```json
{
    "body": "Use `$MAKE` instead of `make`.",
    "created_at": "2014-12-27T08:55:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17315#issuecomment-230362",
    "user": "https://github.com/jdemeyer"
}
```

Use `$MAKE` instead of `make`.



---

archive/issue_comments_230363.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to packages: optional.",
    "created_at": "2014-12-27T08:55:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17315#issuecomment-230363",
    "user": "https://github.com/jdemeyer"
}
```

Changing component from PLEASE CHANGE to packages: optional.



---

archive/issue_comments_230364.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-12-27T08:55:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17315#issuecomment-230364",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_230365.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2014-12-27T08:55:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17315#issuecomment-230365",
    "user": "https://github.com/jdemeyer"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_230366.json:
```json
{
    "body": "And quote `$SAGE_LOCAL`:\n\n```\nmv libbliss.a \"$SAGE_LOCAL/lib\"\n```\n\n(funny that you quote `\"src\"` where it is not needed)",
    "created_at": "2014-12-27T08:56:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17315#issuecomment-230366",
    "user": "https://github.com/jdemeyer"
}
```

And quote `$SAGE_LOCAL`:

```
mv libbliss.a "$SAGE_LOCAL/lib"
```

(funny that you quote `"src"` where it is not needed)



---

archive/issue_comments_230367.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-12-27T09:22:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17315#issuecomment-230367",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_230368.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-12-27T09:22:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17315#issuecomment-230368",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_230369.json:
```json
{
    "body": "It seems that bliss supports gmp but this is not compiled in. Any reason?",
    "created_at": "2014-12-27T11:13:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17315#issuecomment-230369",
    "user": "https://github.com/jdemeyer"
}
```

It seems that bliss supports gmp but this is not compiled in. Any reason?



---

archive/issue_comments_230370.json:
```json
{
    "body": "Yes, if this option is enabled then bliss can compute the order of the automorphism group. By default this option is not enabled in bliss.\n\nAs far as I am concerned I don't think we need this feature since the performance crucial part is to get the generators of the group and once we have them PermuationGroup.order does a pretty good job.",
    "created_at": "2014-12-27T11:31:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17315#issuecomment-230370",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Yes, if this option is enabled then bliss can compute the order of the automorphism group. By default this option is not enabled in bliss.

As far as I am concerned I don't think we need this feature since the performance crucial part is to get the generators of the group and once we have them PermuationGroup.order does a pretty good job.



---

archive/issue_comments_230371.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-12-27T11:31:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17315#issuecomment-230371",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_230372.json:
```json
{
    "body": "I am not a SPKG expert but as far as I've checked (making sure the spkg is installed and all the components are available to sage) this branch looks OK to me.\n\nI've just added a final line to make sure the headers are copied as well and as far as I am concerned that does it for this ticket.",
    "created_at": "2014-12-27T11:33:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17315#issuecomment-230372",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

I am not a SPKG expert but as far as I've checked (making sure the spkg is installed and all the components are available to sage) this branch looks OK to me.

I've just added a final line to make sure the headers are copied as well and as far as I am concerned that does it for this ticket.



---

archive/issue_comments_230373.json:
```json
{
    "body": "Yoooooooo !\n\nWell, I don't see anything wrong with it either. Jeroen, is that okay for you too ? Then we can get this in and Jernej will be able to continue the \"real\" patch, i.e. the one that uses the spkg.\n\nNathann",
    "created_at": "2014-12-27T11:34:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17315#issuecomment-230373",
    "user": "https://github.com/nathanncohen"
}
```

Yoooooooo !

Well, I don't see anything wrong with it either. Jeroen, is that okay for you too ? Then we can get this in and Jernej will be able to continue the "real" patch, i.e. the one that uses the spkg.

Nathann



---

archive/issue_comments_230374.json:
```json
{
    "body": "Replying to [comment:9 azi]:\n> I don't think we need this feature\nI find that a very weak reason to disable GMP support. Perhaps somebody else really cares about that feature. If it doesn't break anything, why not enable it?",
    "created_at": "2014-12-27T11:47:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17315#issuecomment-230374",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:9 azi]:
> I don't think we need this feature
I find that a very weak reason to disable GMP support. Perhaps somebody else really cares about that feature. If it doesn't break anything, why not enable it?



---

archive/issue_comments_230375.json:
```json
{
    "body": "> I find that a very weak reason to disable GMP support. Perhaps somebody else really cares about that feature. If it doesn't break anything, why not enable it?\n\nI do not know how to do that if it means using the GMP that is installed by Sage, and declaring GMP as a dependency of bliss. Could you add a commit if you are interested by this feature ?\n\nNathann",
    "created_at": "2014-12-27T11:52:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17315#issuecomment-230375",
    "user": "https://github.com/nathanncohen"
}
```

> I find that a very weak reason to disable GMP support. Perhaps somebody else really cares about that feature. If it doesn't break anything, why not enable it?

I do not know how to do that if it means using the GMP that is installed by Sage, and declaring GMP as a dependency of bliss. Could you add a commit if you are interested by this feature ?

Nathann



---

archive/issue_comments_230376.json:
```json
{
    "body": "Well the motivation for this patch is the work that I am doing in which I've found that computing the automorphism group of a graph in Sage is quite inefficient. The order itself is never a big computational problem.\n\nThat said I'd like this to be as efficient as possible and hence avoid computing the order of the group and just return the generators as quickly as possible. \n\nHence I would suggest we leave this as is for now and if someone starts to struggle computing orders of the automorphism group of a graph we can easily include it at that point.\n\nMy comment \"i don't think we need this feature\" is based on the fact that I work with graphs in Sage on a daily basis and I honestly think this is not useful at this point.",
    "created_at": "2014-12-27T11:53:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17315#issuecomment-230376",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Well the motivation for this patch is the work that I am doing in which I've found that computing the automorphism group of a graph in Sage is quite inefficient. The order itself is never a big computational problem.

That said I'd like this to be as efficient as possible and hence avoid computing the order of the group and just return the generators as quickly as possible. 

Hence I would suggest we leave this as is for now and if someone starts to struggle computing orders of the automorphism group of a graph we can easily include it at that point.

My comment "i don't think we need this feature" is based on the fact that I work with graphs in Sage on a daily basis and I honestly think this is not useful at this point.



---

archive/issue_comments_230377.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-12-28T09:17:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17315#issuecomment-230377",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_230378.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-12-28T11:04:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17315#issuecomment-230378",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_230379.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-12-28T11:08:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17315#issuecomment-230379",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_230380.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2014-12-29T13:07:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17315#issuecomment-230380",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_230381.json:
```json
{
    "body": "You are not checking the result of `$MAKE`:\n\n```\ncd \"src\" &&\n$MAKE &&\nmv libbliss.a \"$SAGE_LOCAL/lib\"\n# (missing check here)\n```\n",
    "created_at": "2014-12-29T13:07:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17315#issuecomment-230381",
    "user": "https://github.com/jdemeyer"
}
```

You are not checking the result of `$MAKE`:

```
cd "src" &&
$MAKE &&
mv libbliss.a "$SAGE_LOCAL/lib"
# (missing check here)
```




---

archive/issue_comments_230382.json:
```json
{
    "body": "Replying to [comment:15 azi]:\n> My comment \"i don't think we need this feature\" is based on the fact that I work with graphs in Sage on a daily basis and I honestly think this is not useful at this point.\nI get your point but ---like I already said--- I don't think that's a good reason to disable GMP support.\n\nNote: for me, this isn't a \"needs_work\" issue, I'm just commenting...",
    "created_at": "2014-12-29T13:09:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17315#issuecomment-230382",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:15 azi]:
> My comment "i don't think we need this feature" is based on the fact that I work with graphs in Sage on a daily basis and I honestly think this is not useful at this point.
I get your point but ---like I already said--- I don't think that's a good reason to disable GMP support.

Note: for me, this isn't a "needs_work" issue, I'm just commenting...



---

archive/issue_comments_230383.json:
```json
{
    "body": "Alternatively to adding manual checks, you could also use `set -e`.",
    "created_at": "2014-12-29T16:46:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17315#issuecomment-230383",
    "user": "https://github.com/jdemeyer"
}
```

Alternatively to adding manual checks, you could also use `set -e`.



---

archive/issue_comments_230384.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-12-30T13:05:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17315#issuecomment-230384",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_230385.json:
```json
{
    "body": "I have added a patch to this SPKG fixing a newly found bug in bliss. \n\nAs for the error check. Is it actually necessary given that && is used to glue the statements together?",
    "created_at": "2014-12-30T13:06:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17315#issuecomment-230385",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

I have added a patch to this SPKG fixing a newly found bug in bliss. 

As for the error check. Is it actually necessary given that && is used to glue the statements together?



---

archive/issue_comments_230386.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-12-30T13:06:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17315#issuecomment-230386",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_230387.json:
```json
{
    "body": "Replying to [comment:23 azi]:\n> Is it actually necessary given that && is used to glue the statements together?\nWhen you do\n\n```\nA && B && C\n\nD\n```\n\na check is needed between `A && B && C` and `D`.",
    "created_at": "2014-12-30T13:19:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17315#issuecomment-230387",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:23 azi]:
> Is it actually necessary given that && is used to glue the statements together?
When you do

```
A && B && C

D
```

a check is needed between `A && B && C` and `D`.



---

archive/issue_comments_230388.json:
```json
{
    "body": "The checking is fine now, I'll let Nathann judge the patch.",
    "created_at": "2014-12-30T13:20:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17315#issuecomment-230388",
    "user": "https://github.com/jdemeyer"
}
```

The checking is fine now, I'll let Nathann judge the patch.



---

archive/issue_comments_230389.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-12-30T13:26:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17315#issuecomment-230389",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_230390.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-12-30T13:31:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17315#issuecomment-230390",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_230391.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-12-30T13:43:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17315#issuecomment-230391",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_230392.json:
```json
{
    "body": "> The checking is fine now, I'll let Nathann judge the patch.\n\nA commit was added then removed in the meantime, and as a result I have nothing new to mention. Seems to do the job (well, we'll see that in #17464 `:-P`) and all 'formalities' have been fulfilled as far as I can tell... I switch it to `positive_review`.\n\nNathann",
    "created_at": "2014-12-30T13:43:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17315#issuecomment-230392",
    "user": "https://github.com/nathanncohen"
}
```

> The checking is fine now, I'll let Nathann judge the patch.

A commit was added then removed in the meantime, and as a result I have nothing new to mention. Seems to do the job (well, we'll see that in #17464 `:-P`) and all 'formalities' have been fulfilled as far as I can tell... I switch it to `positive_review`.

Nathann



---

archive/issue_comments_230393.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-01-02T22:12:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17315#issuecomment-230393",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
