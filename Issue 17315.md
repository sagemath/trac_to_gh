# Issue 17315: SPKG for bliss

Issue created by migration from Trac.

Original creator: azi

Original creation time: 2014-12-26 19:01:28

CC:  ncohen

Hello!

Hopefully this ticket will push through a SPKG for bliss.


---

Comment by azi created at 2014-12-26 19:02:19

Changing status from new to needs_review.


---

Comment by azi created at 2014-12-26 19:02:19

New commits:


---

Comment by azi created at 2014-12-26 19:02:44

Let me instantly mention that I have no idea how to test if this thing actually works. How is this usually done?


---

Comment by ncohen created at 2014-12-27 02:50:46

Yooooooooooooo !

I fixed a couple of things, like long lines and the changelog (we shouldn't have a changelog anymore in those files. It was only useful in the Mercurial era).

Some other modifications later, the branch seems to work:

1) Checkout the branch (which I rebased on the latest beta)
2) Download the bliss archive in your "upsream/" folder
3) Run "sage -i bliss"

http://www.steinertriples.fr/ncohen/tmp/bliss-0.72.tar.bz2

Now that you have a working example, perhaps it will be easier to understand. Also, perhaps you can link your bliss patch without any problem once this is installed `;-)`

Nathann
----
New commits:


---

Comment by jdemeyer created at 2014-12-27 08:55:44

Use `$MAKE` instead of `make`.


---

Comment by jdemeyer created at 2014-12-27 08:55:44

Changing component from PLEASE CHANGE to packages: optional.


---

Comment by jdemeyer created at 2014-12-27 08:55:44

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2014-12-27 08:55:44

Changing type from PLEASE CHANGE to enhancement.


---

Comment by jdemeyer created at 2014-12-27 08:56:42

And quote `$SAGE_LOCAL`:

```
mv libbliss.a "$SAGE_LOCAL/lib"
```

(funny that you quote `"src"` where it is not needed)


---

Comment by git created at 2014-12-27 09:22:14

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by ncohen created at 2014-12-27 09:22:31

Changing status from needs_work to needs_review.


---

Comment by jdemeyer created at 2014-12-27 11:13:02

It seems that bliss supports gmp but this is not compiled in. Any reason?


---

Comment by azi created at 2014-12-27 11:31:19

Yes, if this option is enabled then bliss can compute the order of the automorphism group. By default this option is not enabled in bliss.

As far as I am concerned I don't think we need this feature since the performance crucial part is to get the generators of the group and once we have them PermuationGroup.order does a pretty good job.


---

Comment by git created at 2014-12-27 11:31:35

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by azi created at 2014-12-27 11:33:23

I am not a SPKG expert but as far as I've checked (making sure the spkg is installed and all the components are available to sage) this branch looks OK to me.

I've just added a final line to make sure the headers are copied as well and as far as I am concerned that does it for this ticket.


---

Comment by ncohen created at 2014-12-27 11:34:47

Yoooooooo !

Well, I don't see anything wrong with it either. Jeroen, is that okay for you too ? Then we can get this in and Jernej will be able to continue the "real" patch, i.e. the one that uses the spkg.

Nathann


---

Comment by jdemeyer created at 2014-12-27 11:47:25

Replying to [comment:9 azi]:
> I don't think we need this feature
I find that a very weak reason to disable GMP support. Perhaps somebody else really cares about that feature. If it doesn't break anything, why not enable it?


---

Comment by ncohen created at 2014-12-27 11:52:41

> I find that a very weak reason to disable GMP support. Perhaps somebody else really cares about that feature. If it doesn't break anything, why not enable it?

I do not know how to do that if it means using the GMP that is installed by Sage, and declaring GMP as a dependency of bliss. Could you add a commit if you are interested by this feature ?

Nathann


---

Comment by azi created at 2014-12-27 11:53:34

Well the motivation for this patch is the work that I am doing in which I've found that computing the automorphism group of a graph in Sage is quite inefficient. The order itself is never a big computational problem.

That said I'd like this to be as efficient as possible and hence avoid computing the order of the group and just return the generators as quickly as possible. 

Hence I would suggest we leave this as is for now and if someone starts to struggle computing orders of the automorphism group of a graph we can easily include it at that point.

My comment "i don't think we need this feature" is based on the fact that I work with graphs in Sage on a daily basis and I honestly think this is not useful at this point.


---

Comment by git created at 2014-12-28 09:17:33

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-12-28 11:04:15

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by ncohen created at 2014-12-28 11:08:27

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2014-12-29 13:07:25

Changing status from positive_review to needs_work.


---

Comment by jdemeyer created at 2014-12-29 13:07:25

You are not checking the result of `$MAKE`:

```
cd "src" &&
$MAKE &&
mv libbliss.a "$SAGE_LOCAL/lib"
# (missing check here)
```



---

Comment by jdemeyer created at 2014-12-29 13:09:39

Replying to [comment:15 azi]:
> My comment "i don't think we need this feature" is based on the fact that I work with graphs in Sage on a daily basis and I honestly think this is not useful at this point.
I get your point but ---like I already said--- I don't think that's a good reason to disable GMP support.

Note: for me, this isn't a "needs_work" issue, I'm just commenting...


---

Comment by jdemeyer created at 2014-12-29 16:46:49

Alternatively to adding manual checks, you could also use `set -e`.


---

Comment by git created at 2014-12-30 13:05:08

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by azi created at 2014-12-30 13:06:08

I have added a patch to this SPKG fixing a newly found bug in bliss. 

As for the error check. Is it actually necessary given that && is used to glue the statements together?


---

Comment by azi created at 2014-12-30 13:06:23

Changing status from needs_work to needs_review.


---

Comment by jdemeyer created at 2014-12-30 13:19:20

Replying to [comment:23 azi]:
> Is it actually necessary given that && is used to glue the statements together?
When you do

```
A && B && C

D
```

a check is needed between `A && B && C` and `D`.


---

Comment by jdemeyer created at 2014-12-30 13:20:39

The checking is fine now, I'll let Nathann judge the patch.


---

Comment by git created at 2014-12-30 13:26:41

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-12-30 13:31:37

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by ncohen created at 2014-12-30 13:43:21

Changing status from needs_review to positive_review.


---

Comment by ncohen created at 2014-12-30 13:43:21

> The checking is fine now, I'll let Nathann judge the patch.

A commit was added then removed in the meantime, and as a result I have nothing new to mention. Seems to do the job (well, we'll see that in #17464 `:-P`) and all 'formalities' have been fulfilled as far as I can tell... I switch it to `positive_review`.

Nathann


---

Comment by vbraun created at 2015-01-02 22:12:36

Resolution: fixed
