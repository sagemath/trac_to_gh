# Issue 17835: Base extension for Dirichlet groups and characters via maps

Issue created by migration from Trac.

Original creator: pbruin

Original creation time: 2015-03-27 16:12:46

Keywords: Dirichlet group base extension

This ticket implements the following improvement to `change_ring` for Dirichlet groups and characters:

```
sage: K.<i> = QuadraticField(-1)
sage: chi = DirichletGroup(5, K)[1]
sage: chi(2)
i
sage: f = K.complex_embeddings()[0]
sage: psi = chi.change_ring(f)
sage: psi(2)
-1.00000000000000*I
```



---

Comment by pbruin created at 2015-03-27 23:10:45

Changing status from new to needs_review.


---

Comment by jpflori created at 2015-05-18 20:04:46

The diff Looks good to me.
Just one question: Couldn't we extend such a contruction to be more general in the sense it could work for the change_ring method of all (or most) objects?
We can still do that in another ticket.

Note I don't have access to anything to check it passes tests, but the patchbot should take care of it.


---

Comment by jpflori created at 2015-05-18 20:04:46

Changing status from needs_review to positive_review.


---

Comment by pbruin created at 2015-05-19 11:20:02

Replying to [comment:2 jpflori]:
> Just one question: Couldn't we extend such a contruction to be more general in the sense it could work for the change_ring method of all (or most) objects?
> We can still do that in another ticket.
Yes, I hope this can be done more generally at some point.  Ideally, if `A` is a parent with base ring `R` and `f` is a ring homomorphism from `R` to `S`, we should be able to do something like

```
g = A.base_extend(f, map=True)
```

which should return the canonical map from `A` to the base extension `A_S` of `A` to `S` via `f`.  We could then do `g(a)` for elements `a` of `A` to get the image of `a` in `A_S`.

Furthermore, we could allow

```
g = A.base_extend(S, map=True)
```

which should do the same as above, taking for `f` a coercion map from `R` to `S`, if it exists.

With this approach, `base_extend()` only has to be implemented for parents; there could be a default method for `Element` looking like

```python
class Element(...):
    ...
    def base_extend(self, S):
        # S can be a parent or a map
        g = self.parent().base_extend(S, map=True)
        return g(self)
```

(All of the above would be valid both for `base_extend()` and `change_ring()`; the only difference is whether conversion maps are allowed instead of coercion maps if `S` is given as a parent.)

> Note I don't have access to anything to check it passes tests, but the patchbot should take care of it.
Thanks for the review!


---

Comment by vbraun created at 2015-05-19 22:07:33

Resolution: fixed
