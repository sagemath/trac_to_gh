# Issue 17835: Base extension for Dirichlet groups and characters via maps

archive/issues_017835.json:
```json
{
    "body": "Keywords: Dirichlet group base extension\n\nThis ticket implements the following improvement to `change_ring` for Dirichlet groups and characters:\n\n```\nsage: K.<i> = QuadraticField(-1)\nsage: chi = DirichletGroup(5, K)[1]\nsage: chi(2)\ni\nsage: f = K.complex_embeddings()[0]\nsage: psi = chi.change_ring(f)\nsage: psi(2)\n-1.00000000000000*I\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/18072\n\n",
    "created_at": "2015-03-27T16:12:46Z",
    "labels": [
        "modular forms",
        "minor",
        "enhancement"
    ],
    "title": "Base extension for Dirichlet groups and characters via maps",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17835",
    "user": "pbruin"
}
```
Keywords: Dirichlet group base extension

This ticket implements the following improvement to `change_ring` for Dirichlet groups and characters:

```
sage: K.<i> = QuadraticField(-1)
sage: chi = DirichletGroup(5, K)[1]
sage: chi(2)
i
sage: f = K.complex_embeddings()[0]
sage: psi = chi.change_ring(f)
sage: psi(2)
-1.00000000000000*I
```


Issue created by migration from https://trac.sagemath.org/ticket/18072





---

archive/issue_comments_239124.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-03-27T23:10:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17835",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17835#issuecomment-239124",
    "user": "pbruin"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_239125.json:
```json
{
    "body": "The diff Looks good to me.\nJust one question: Couldn't we extend such a contruction to be more general in the sense it could work for the change_ring method of all (or most) objects?\nWe can still do that in another ticket.\n\nNote I don't have access to anything to check it passes tests, but the patchbot should take care of it.",
    "created_at": "2015-05-18T20:04:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17835",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17835#issuecomment-239125",
    "user": "jpflori"
}
```

The diff Looks good to me.
Just one question: Couldn't we extend such a contruction to be more general in the sense it could work for the change_ring method of all (or most) objects?
We can still do that in another ticket.

Note I don't have access to anything to check it passes tests, but the patchbot should take care of it.



---

archive/issue_comments_239126.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-05-18T20:04:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17835",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17835#issuecomment-239126",
    "user": "jpflori"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_239127.json:
```json
{
    "body": "Replying to [comment:2 jpflori]:\n> Just one question: Couldn't we extend such a contruction to be more general in the sense it could work for the change_ring method of all (or most) objects?\n> We can still do that in another ticket.\nYes, I hope this can be done more generally at some point.  Ideally, if `A` is a parent with base ring `R` and `f` is a ring homomorphism from `R` to `S`, we should be able to do something like\n\n```\ng = A.base_extend(f, map=True)\n```\n\nwhich should return the canonical map from `A` to the base extension `A_S` of `A` to `S` via `f`.  We could then do `g(a)` for elements `a` of `A` to get the image of `a` in `A_S`.\n\nFurthermore, we could allow\n\n```\ng = A.base_extend(S, map=True)\n```\n\nwhich should do the same as above, taking for `f` a coercion map from `R` to `S`, if it exists.\n\nWith this approach, `base_extend()` only has to be implemented for parents; there could be a default method for `Element` looking like\n\n```python\nclass Element(...):\n    ...\n    def base_extend(self, S):\n        # S can be a parent or a map\n        g = self.parent().base_extend(S, map=True)\n        return g(self)\n```\n\n(All of the above would be valid both for `base_extend()` and `change_ring()`; the only difference is whether conversion maps are allowed instead of coercion maps if `S` is given as a parent.)\n\n> Note I don't have access to anything to check it passes tests, but the patchbot should take care of it.\nThanks for the review!",
    "created_at": "2015-05-19T11:20:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17835",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17835#issuecomment-239127",
    "user": "pbruin"
}
```

Replying to [comment:2 jpflori]:
> Just one question: Couldn't we extend such a contruction to be more general in the sense it could work for the change_ring method of all (or most) objects?
> We can still do that in another ticket.
Yes, I hope this can be done more generally at some point.  Ideally, if `A` is a parent with base ring `R` and `f` is a ring homomorphism from `R` to `S`, we should be able to do something like

```
g = A.base_extend(f, map=True)
```

which should return the canonical map from `A` to the base extension `A_S` of `A` to `S` via `f`.  We could then do `g(a)` for elements `a` of `A` to get the image of `a` in `A_S`.

Furthermore, we could allow

```
g = A.base_extend(S, map=True)
```

which should do the same as above, taking for `f` a coercion map from `R` to `S`, if it exists.

With this approach, `base_extend()` only has to be implemented for parents; there could be a default method for `Element` looking like

```python
class Element(...):
    ...
    def base_extend(self, S):
        # S can be a parent or a map
        g = self.parent().base_extend(S, map=True)
        return g(self)
```

(All of the above would be valid both for `base_extend()` and `change_ring()`; the only difference is whether conversion maps are allowed instead of coercion maps if `S` is given as a parent.)

> Note I don't have access to anything to check it passes tests, but the patchbot should take care of it.
Thanks for the review!



---

archive/issue_comments_239128.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-05-19T22:07:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17835",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17835#issuecomment-239128",
    "user": "vbraun"
}
```

Resolution: fixed
