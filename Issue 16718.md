# Issue 16718: Give safer names to preparsed files

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2014-09-10 09:23:28

CC:  jhpalmieri

If you run `sage new.sage` on a script `new.sage`, it creates a preparsed file `new.py`.  Then when a file in the twisted package tries to import the `new` Python module, it ends up importing this preparsed file instead, which leads to problems which can be hard to track down.

I can think of several solutions:

 1. hope that users will know not to use names like `new.sage`.  This is the current state of affairs, and it seems overly optimistic to me.
 2. give a warning, or fail outright with an error, if the name of the file is the same as that of a Python module.
 3. name the preparsed file something which is less likely to cause a clash, for example, turn `file.sage` into `file.sage.py`.
 4. don't save the preparsed file at all: use a pipe to transfer the preparsed file to Python (see #11821).

The goal of this ticket is to implement 3.


---

Comment by jdemeyer created at 2014-09-10 10:21:15

Changing status from new to needs_review.


---

Comment by jhpalmieri created at 2014-09-10 18:30:30

This looks good to me. To the extent that I'm allowed to review it, positive review.
----
New commits:


---

Comment by jdemeyer created at 2014-09-10 21:03:39

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-09-10 21:56:51

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2014-09-10 21:56:51

Conflicts with #16066


---

Comment by git created at 2014-09-11 12:05:53

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2014-09-11 12:07:20

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2014-09-11 23:17:41

Resolution: fixed
