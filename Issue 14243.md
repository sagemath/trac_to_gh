# Issue 14243: Add Cygwin as supported platform

archive/issues_014243.json:
```json
{
    "body": "Assignee: tbd\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/14447\n\n",
    "created_at": "2013-04-12T06:08:47Z",
    "labels": [
        "component: porting: cygwin",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.9",
    "title": "Add Cygwin as supported platform",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14243",
    "user": "https://github.com/jdemeyer"
}
```
Assignee: tbd



Issue created by migration from https://trac.sagemath.org/ticket/14447





---

archive/issue_comments_178964.json:
```json
{
    "body": "Changing keywords from \"\" to \"cygwin\".",
    "created_at": "2013-04-12T08:34:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14243",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14243#issuecomment-178964",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing keywords from "" to "cygwin".



---

archive/issue_comments_178965.json:
```json
{
    "body": "uname solution",
    "created_at": "2013-04-12T12:01:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14243",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14243#issuecomment-178965",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

uname solution



---

archive/issue_comments_178966.json:
```json
{
    "body": "Attachment [trac_14447-echo.patch](tarball://root/attachments/some-uuid/ticket14447/trac_14447-echo.patch) by jpflori created at 2013-04-12 12:03:23\n\necho solution",
    "created_at": "2013-04-12T12:03:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14243",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14243#issuecomment-178966",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Attachment [trac_14447-echo.patch](tarball://root/attachments/some-uuid/ticket14447/trac_14447-echo.patch) by jpflori created at 2013-04-12 12:03:23

echo solution



---

archive/issue_comments_178967.json:
```json
{
    "body": "sed solution",
    "created_at": "2013-04-12T12:05:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14243",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14243#issuecomment-178967",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

sed solution



---

archive/issue_comments_178968.json:
```json
{
    "body": "Attachment [trac_14447-sed.patch](tarball://root/attachments/some-uuid/ticket14447/trac_14447-sed.patch) by jpflori created at 2013-04-12 12:07:00\n\ncase solution",
    "created_at": "2013-04-12T12:07:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14243",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14243#issuecomment-178968",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Attachment [trac_14447-sed.patch](tarball://root/attachments/some-uuid/ticket14447/trac_14447-sed.patch) by jpflori created at 2013-04-12 12:07:00

case solution



---

archive/issue_comments_178969.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-04-12T12:30:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14243",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14243#issuecomment-178969",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_178970.json:
```json
{
    "body": "Attachment [trac_14447-case.patch](tarball://root/attachments/some-uuid/ticket14447/trac_14447-case.patch) by jpflori created at 2013-04-12 12:30:15\n\nOk, I've put up four different patches which should achieve the same goal :\n* the uname, echo and sed version make minimal changes by modifying UNAME on Cygwin only using the corresponding command to detect we are on Cygwin (uname was suggested by Jeroen on #14406, echo avoid recalling uname, sed is what is used in sage/bin/sage-env to modify UNAME on Cygwin)\n* the case version does not modify UNAME but replace the if/elif/elif/.../else construction used to filter OSes by a case statement.\n\nThis last one is my preferred one, but I'll let Jeroen decide.\n\nI tested it on Linux, Cygwin and Solaris this time, so the patches should be fine.",
    "created_at": "2013-04-12T12:30:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14243",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14243#issuecomment-178970",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Attachment [trac_14447-case.patch](tarball://root/attachments/some-uuid/ticket14447/trac_14447-case.patch) by jpflori created at 2013-04-12 12:30:15

Ok, I've put up four different patches which should achieve the same goal :
* the uname, echo and sed version make minimal changes by modifying UNAME on Cygwin only using the corresponding command to detect we are on Cygwin (uname was suggested by Jeroen on #14406, echo avoid recalling uname, sed is what is used in sage/bin/sage-env to modify UNAME on Cygwin)
* the case version does not modify UNAME but replace the if/elif/elif/.../else construction used to filter OSes by a case statement.

This last one is my preferred one, but I'll let Jeroen decide.

I tested it on Linux, Cygwin and Solaris this time, so the patches should be fine.



---

archive/issue_comments_178971.json:
```json
{
    "body": "Attachment [trac_14447-case-v2.patch](tarball://root/attachments/some-uuid/ticket14447/trac_14447-case-v2.patch) by @jdemeyer created at 2013-04-12 13:49:50",
    "created_at": "2013-04-12T13:49:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14243",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14243#issuecomment-178971",
    "user": "https://github.com/jdemeyer"
}
```

Attachment [trac_14447-case-v2.patch](tarball://root/attachments/some-uuid/ticket14447/trac_14447-case-v2.patch) by @jdemeyer created at 2013-04-12 13:49:50



---

archive/issue_comments_178972.json:
```json
{
    "body": "I made a new patch based on yours, needs review. I also simplified the CYGWIN handling in `sage-env`.",
    "created_at": "2013-04-12T13:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14243",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14243#issuecomment-178972",
    "user": "https://github.com/jdemeyer"
}
```

I made a new patch based on yours, needs review. I also simplified the CYGWIN handling in `sage-env`.



---

archive/issue_comments_178973.json:
```json
{
    "body": "Changing keywords from \"cygwin\" to \"cygwin prereq\".",
    "created_at": "2013-04-12T13:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14243",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14243#issuecomment-178973",
    "user": "https://github.com/jdemeyer"
}
```

Changing keywords from "cygwin" to "cygwin prereq".



---

archive/issue_comments_178974.json:
```json
{
    "body": "It is obviously vital that this actually tested on Cygwin.",
    "created_at": "2013-04-12T13:51:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14243",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14243#issuecomment-178974",
    "user": "https://github.com/jdemeyer"
}
```

It is obviously vital that this actually tested on Cygwin.



---

archive/issue_comments_178975.json:
```json
{
    "body": "This still works fine on Linux and Cygwin.\n\nJust a remark about SunOS release filtering.\nAccording to Wikipedia, there are 4.1.x releases and a 5.5.1 whence the filtering I used, i.e. only keep 5.1[0-9]* thinking that would be enough for the next decade unless Oracle decides to go for 6.x.\nBut I guess nobody will ever try to build Sage on 4.1.x or 5.5.1 so it's not that problematic.\nNot even sure more than a couple of people actually build it for actual usage on 5.10 and 5.11...\n\nAnd I guess there is a spurious space at the end of\n\n```\nexport UNAME=`uname | sed 's/CYGWIN.*/CYGWIN/' ` \n```\n",
    "created_at": "2013-04-12T14:11:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14243",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14243#issuecomment-178975",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

This still works fine on Linux and Cygwin.

Just a remark about SunOS release filtering.
According to Wikipedia, there are 4.1.x releases and a 5.5.1 whence the filtering I used, i.e. only keep 5.1[0-9]* thinking that would be enough for the next decade unless Oracle decides to go for 6.x.
But I guess nobody will ever try to build Sage on 4.1.x or 5.5.1 so it's not that problematic.
Not even sure more than a couple of people actually build it for actual usage on 5.10 and 5.11...

And I guess there is a spurious space at the end of

```
export UNAME=`uname | sed 's/CYGWIN.*/CYGWIN/' ` 
```




---

archive/issue_comments_178976.json:
```json
{
    "body": "And obviously there are even older version of SunOS before the distribution was rebranded as Solaris 1.x :)",
    "created_at": "2013-04-12T14:14:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14243",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14243#issuecomment-178976",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

And obviously there are even older version of SunOS before the distribution was rebranded as Solaris 1.x :)



---

archive/issue_comments_178977.json:
```json
{
    "body": "Replying to [comment:6 jpflori]:\n> And I guess there is a spurious space\nThat's intentional for better readability.",
    "created_at": "2013-04-12T14:27:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14243",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14243#issuecomment-178977",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:6 jpflori]:
> And I guess there is a spurious space
That's intentional for better readability.



---

archive/issue_comments_178978.json:
```json
{
    "body": "Replying to [comment:6 jpflori]:\n> According to Wikipedia, there are 4.1.x releases and a 5.5.1 whence the filtering I used, i.e. only keep 5.1[0-9]* thinking that would be enough for the next decade unless Oracle decides to go for 6.x.\n> But I guess nobody will ever try to build Sage on 4.1.x or 5.5.1 so it's not that problematic.\n> Not even sure more than a couple of people actually build it for actual usage on 5.10 and 5.11...\nExactly, I wouldn't worry about SunOS/Solaris versions too much. I think it's more important that future versions correctly, than that we catch older non-working versions.",
    "created_at": "2013-04-12T14:29:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14243",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14243#issuecomment-178978",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:6 jpflori]:
> According to Wikipedia, there are 4.1.x releases and a 5.5.1 whence the filtering I used, i.e. only keep 5.1[0-9]* thinking that would be enough for the next decade unless Oracle decides to go for 6.x.
> But I guess nobody will ever try to build Sage on 4.1.x or 5.5.1 so it's not that problematic.
> Not even sure more than a couple of people actually build it for actual usage on 5.10 and 5.11...
Exactly, I wouldn't worry about SunOS/Solaris versions too much. I think it's more important that future versions correctly, than that we catch older non-working versions.



---

archive/issue_comments_178979.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-04-12T14:36:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14243",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14243#issuecomment-178979",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_178980.json:
```json
{
    "body": "Thanks for your answers.\nBoth make sense, so positive review.",
    "created_at": "2013-04-12T14:36:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14243",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14243#issuecomment-178980",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Thanks for your answers.
Both make sense, so positive review.



---

archive/issue_comments_178981.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-04-13T13:43:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14243",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14243#issuecomment-178981",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_014036.json:
```json
{
    "actor": "@jdemeyer",
    "created_at": "2013-04-13T13:43:12Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14243",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14243#event-14036"
}
```



---

archive/issue_comments_178982.json:
```json
{
    "body": "Thanks for this!  I had to give my faster Windows box back so hadn't actually seen this.",
    "created_at": "2013-04-25T16:00:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14243",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14243#issuecomment-178982",
    "user": "https://github.com/kcrisman"
}
```

Thanks for this!  I had to give my faster Windows box back so hadn't actually seen this.
