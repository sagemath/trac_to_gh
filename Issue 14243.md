# Issue 14243: Add Cygwin as supported platform

Issue created by migration from https://trac.sagemath.org/ticket/14447

Original creator: jdemeyer

Original creation time: 2013-04-12 06:08:47

Assignee: tbd




---

Comment by jpflori created at 2013-04-12 08:34:17

Changing keywords from "" to "cygwin".


---

Comment by jpflori created at 2013-04-12 12:01:58

uname solution


---

Attachment

echo solution


---

Comment by jpflori created at 2013-04-12 12:05:36

sed solution


---

Attachment

case solution


---

Comment by jpflori created at 2013-04-12 12:30:15

Changing status from new to needs_review.


---

Attachment

Ok, I've put up four different patches which should achieve the same goal :
* the uname, echo and sed version make minimal changes by modifying UNAME on Cygwin only using the corresponding command to detect we are on Cygwin (uname was suggested by Jeroen on #14406, echo avoid recalling uname, sed is what is used in sage/bin/sage-env to modify UNAME on Cygwin)
* the case version does not modify UNAME but replace the if/elif/elif/.../else construction used to filter OSes by a case statement.

This last one is my preferred one, but I'll let Jeroen decide.

I tested it on Linux, Cygwin and Solaris this time, so the patches should be fine.


---

Attachment


---

Comment by jdemeyer created at 2013-04-12 13:51:01

I made a new patch based on yours, needs review. I also simplified the CYGWIN handling in `sage-env`.


---

Comment by jdemeyer created at 2013-04-12 13:51:01

Changing keywords from "cygwin" to "cygwin prereq".


---

Comment by jdemeyer created at 2013-04-12 13:51:34

It is obviously vital that this actually tested on Cygwin.


---

Comment by jpflori created at 2013-04-12 14:11:43

This still works fine on Linux and Cygwin.

Just a remark about SunOS release filtering.
According to Wikipedia, there are 4.1.x releases and a 5.5.1 whence the filtering I used, i.e. only keep 5.1[0-9]* thinking that would be enough for the next decade unless Oracle decides to go for 6.x.
But I guess nobody will ever try to build Sage on 4.1.x or 5.5.1 so it's not that problematic.
Not even sure more than a couple of people actually build it for actual usage on 5.10 and 5.11...

And I guess there is a spurious space at the end of

```
export UNAME=`uname | sed 's/CYGWIN.*/CYGWIN/' ` 
```



---

Comment by jpflori created at 2013-04-12 14:14:46

And obviously there are even older version of SunOS before the distribution was rebranded as Solaris 1.x :)


---

Comment by jdemeyer created at 2013-04-12 14:27:26

Replying to [comment:6 jpflori]:
> And I guess there is a spurious space
That's intentional for better readability.


---

Comment by jdemeyer created at 2013-04-12 14:29:10

Replying to [comment:6 jpflori]:
> According to Wikipedia, there are 4.1.x releases and a 5.5.1 whence the filtering I used, i.e. only keep 5.1[0-9]* thinking that would be enough for the next decade unless Oracle decides to go for 6.x.
> But I guess nobody will ever try to build Sage on 4.1.x or 5.5.1 so it's not that problematic.
> Not even sure more than a couple of people actually build it for actual usage on 5.10 and 5.11...
Exactly, I wouldn't worry about SunOS/Solaris versions too much. I think it's more important that future versions correctly, than that we catch older non-working versions.


---

Comment by jpflori created at 2013-04-12 14:36:01

Changing status from needs_review to positive_review.


---

Comment by jpflori created at 2013-04-12 14:36:01

Thanks for your answers.
Both make sense, so positive review.


---

Comment by jdemeyer created at 2013-04-13 13:43:12

Resolution: fixed


---

Comment by kcrisman created at 2013-04-25 16:00:55

Thanks for this!  I had to give my faster Windows box back so hadn't actually seen this.
