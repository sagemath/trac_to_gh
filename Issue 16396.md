# Issue 16396: indefinite factorization changes an immutable matrix

Issue created by migration from https://trac.sagemath.org/ticket/16633

Original creator: tscrim

Original creation time: 2014-07-09 05:36:46

Assignee: tscrim

Keywords: matrix mutation

In 6.3.beta5 we have

```
sage: A = matrix(QQ, [[ 4, -2,  4,  2],
....:                 [-2, 10, -2, -7],
....:                 [ 4, -2,  8,  4],
....:                 [ 2, -7,  4,  7]])
sage: A.indefinite_factorization()
(
[   1    0    0    0]              
[-1/2    1    0    0]              
[   1    0    1    0]              
[ 1/2 -2/3  1/2    1], (4, 9, 4, 1)
)
sage: A
[ 4 -2  4  2]
[-2 10 -2 -7]
[ 4 -2  8  4]
[ 2 -7  4  7]

sage: B = matrix(QQ, [[ 4, -2,  4,  2],
....:                 [-2, 10, -2, -7],
....:                 [ 4, -2,  8,  4],
....:                 [ 2, -7,  4,  7]])
sage: B.set_immutable()
sage: B.indefinite_factorization()
(
[   1    0    0    0]              
[-1/2    1    0    0]              
[   1    0    1    0]              
[ 1/2 -2/3  1/2    1], (4, 9, 4, 1)
)
sage: B
[   1    0    0    0]
[-1/2    1    0    0]
[   1    0    1    0]
[ 1/2 -2/3  1/2    1]
```


Actually the problem stems from the output of `change_ring()`:

```
sage: A.change_ring(QQ) is A
False
sage: B.change_ring(QQ) is B
True
```



---

Comment by tscrim created at 2014-07-09 05:49:36

New commits:


---

Comment by tscrim created at 2014-07-09 05:49:36

Changing status from new to needs_review.


---

Comment by jkeitel created at 2014-07-10 08:17:24

Hi Travis, the patch looks good to me, so I'm putting it to positive review.


---

Comment by jkeitel created at 2014-07-10 08:17:24

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-07-11 04:19:37

Resolution: fixed
