# Issue 25234: OEIS update (database format change, new entries, incorrect warning handling)

archive/issues_025234.json:
```json
{
    "body": "Keywords: days94\n\nThis ticket fixes the 34 doctest failures that happen when internet is enabled, see [this sage-release thread](https://groups.google.com/d/msg/sage-release/l635YEuT7Hs/WkHCnmWhAQAJ).\n\nThere are 3 kinds or errors:\n\n- the oeis database gets updated with new data (this is a normal update),\n- the oeis database changed its internal format, and does not make difference between signed and unsigned sequences anymore (in particular, for signed sequences, the `V,W,X` fields disapear, and are replaced with the `S,T,U` fields),\n- the warnings triggered when a dead sequence is met were not correctly doctested.\n\nThe 3 commits corresponds to these 3 kind of errors\n\nTo test the branch:\n\n```\nsage -t --optional=sage,internet src/sage/databases/oeis.py \n```\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/25471\n\n",
    "closed_at": "2018-07-08T13:05:25Z",
    "created_at": "2018-05-30T20:41:49Z",
    "labels": [
        "component: combinatorics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.3",
    "title": "OEIS update (database format change, new entries, incorrect warning handling)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25234",
    "user": "https://github.com/seblabbe"
}
```
Keywords: days94

This ticket fixes the 34 doctest failures that happen when internet is enabled, see [this sage-release thread](https://groups.google.com/d/msg/sage-release/l635YEuT7Hs/WkHCnmWhAQAJ).

There are 3 kinds or errors:

- the oeis database gets updated with new data (this is a normal update),
- the oeis database changed its internal format, and does not make difference between signed and unsigned sequences anymore (in particular, for signed sequences, the `V,W,X` fields disapear, and are replaced with the `S,T,U` fields),
- the warnings triggered when a dead sequence is met were not correctly doctested.

The 3 commits corresponds to these 3 kind of errors

To test the branch:

```
sage -t --optional=sage,internet src/sage/databases/oeis.py 
```



Issue created by migration from https://trac.sagemath.org/ticket/25471





---

archive/issue_comments_355080.json:
```json
{
    "body": "shorter title",
    "created_at": "2018-05-30T21:02:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25234#issuecomment-355080",
    "user": "https://github.com/seblabbe"
}
```

shorter title



---

archive/issue_comments_355081.json:
```json
{
    "body": "Hi,\n\ni will be on this (some might be tricky, e.g. related to dead sequences).\n\nYou write:\n\n> Note that, as Sloane writes this week on the \u200barxiv, the oeis is a now a Wiki which means that Sage doctests should depend as few as possible on the many modifications done on the OEIS database... \n\n\nAre you suggesting to parse the wiki ???\n\nNote that the issue of the database changing was discussed in previous tickets. Still, we should show part of the answers for having meaningful examples (not only for testing purpose, but also for the user).",
    "created_at": "2018-06-03T12:29:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25234#issuecomment-355081",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Hi,

i will be on this (some might be tricky, e.g. related to dead sequences).

You write:

> Note that, as Sloane writes this week on the â€‹arxiv, the oeis is a now a Wiki which means that Sage doctests should depend as few as possible on the many modifications done on the OEIS database... 


Are you suggesting to parse the wiki ???

Note that the issue of the database changing was discussed in previous tickets. Still, we should show part of the answers for having meaningful examples (not only for testing purpose, but also for the user).



---

archive/issue_comments_355082.json:
```json
{
    "body": "By the way, several of us predicted this sort of situation (lots of broken doctests related to OEIS) in #16252.",
    "created_at": "2018-06-03T15:44:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25234#issuecomment-355082",
    "user": "https://github.com/jhpalmieri"
}
```

By the way, several of us predicted this sort of situation (lots of broken doctests related to OEIS) in #16252.



---

archive/issue_comments_355083.json:
```json
{
    "body": "Changing keywords from \"\" to \"days94\".",
    "created_at": "2018-06-15T10:43:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25234#issuecomment-355083",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Changing keywords from "" to "days94".



---

archive/issue_comments_355084.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-07-01T17:57:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25234#issuecomment-355084",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_355085.json:
```json
{
    "body": "New commits:",
    "created_at": "2018-07-01T22:15:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25234#issuecomment-355085",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

New commits:



---

archive/issue_comments_355086.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-07-01T22:15:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25234#issuecomment-355086",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_355087.json:
```json
{
    "body": "ok (but this will need to be done again and again...)",
    "created_at": "2018-07-02T18:17:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25234#issuecomment-355087",
    "user": "https://github.com/fchapoton"
}
```

ok (but this will need to be done again and again...)



---

archive/issue_comments_355088.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-07-02T18:17:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25234#issuecomment-355088",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_355089.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-07-08T13:05:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25234#issuecomment-355089",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_063905.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-07-08T13:05:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/25234",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25234#event-63905"
}
```
