# Issue 19608: Random failure in libGAP on ppc64le

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2016-01-08 09:15:05

CC:  vbraun

Sometimes a "bad exit 2" happens on ppc64le due to this:

```c
/* src/saveload.c:127 */
libGAP_UInt1 libGAP_LOAD_BYTE_BUF( void )
{
  libGAP_Int ret;
  ret = read(libGAP_syBuf[libGAP_LoadFile].fp, libGAP_LoadBuffer, 100000);
  if (ret <= 0)
    { 
      libGAP_Pr(libGAP_LoadByteErrorMessage, 0L, 0L );
      libGAP_SyExit(2);  /* <------------------------- EXIT HERE */
    }
  libGAP_LBEnd = libGAP_LoadBuffer + ret;
  libGAP_LBPointer = libGAP_LoadBuffer;
  return *libGAP_LBPointer++;
}
```

(I know it's this call to `libGAP_SyExit()` because I changed the exit codes to debug this)

This happens for example like this:

```
sage -t --long --warn-long 92.8 src/sage/homology/simplicial_complex.py
    Bad exit: 2
**********************************************************************
Tests run before process (pid=88791) failed:
sage: SimplicialComplex([[1], [3, 7]]) ## line 76 ##
[...]
sage: SimplicialComplex([[]]).connected_component() ## line 3119 ##
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 3123 ##
0
sage: S1 = simplicial_complexes.Sphere(1) ## line 3162 ##
sage: S1.fundamental_group() ## line 3163 ##

**********************************************************************
```



---

Comment by jdemeyer created at 2016-01-08 09:18:50

Now running again under `strace`...


---

Comment by leif created at 2016-10-02 13:42:54

I regularly get `Bad exit: 2` (in different GAP-related doctests) on Intel Haswells as well when running `ptestlong`; they pass when rerun.  And, not too surprising, by the way independent of the GCC version (4.8.5, 4.9.4, 5.4.0, 6.2.0).


---

Comment by leif created at 2016-10-02 13:44:04

Changing keywords from "" to "random_fail".


---

Comment by mderickx created at 2017-09-25 22:50:57

Is this still an issue considering the last few comments of #19701


---

Comment by jdemeyer created at 2017-09-26 11:03:51

With random failures, it is always hard to tell...


---

Comment by mkoeppe created at 2021-12-02 01:34:34

outdated, should close


---

Comment by mkoeppe created at 2021-12-02 01:34:34

Changing status from new to needs_review.


---

Comment by dimpase created at 2021-12-02 23:32:17

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2021-12-03 18:41:01

Resolution: invalid
