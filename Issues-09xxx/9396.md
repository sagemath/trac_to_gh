# Issue 9396: statistical package r fails to run, missing libicuuc

archive/issues_009396.json:
```json
{
    "assignees": [],
    "body": "The statistical package r fails to run if the \nlibicuuc library (frequently in /usr/lib) is not\npresent.\n\nlibicuuc is from the International Components for Unicode\nproject (http://site.icu-project.org/).\n\n**Assignee:** Mariah Lenox\n\n**CC:**  david.kirkby@onetel.net\n\n**Author:** Mariah Lenox, David Kirkby\n\n**Reviewer:** David Kirkby, Robert Miller\n\n**Merged:** sage-4.5.3.alpha0\n\nIssue created by migration from https://trac.sagemath.org/ticket/9396\n\n",
    "closed_at": "2010-08-09T09:38:26Z",
    "created_at": "2010-06-30T15:34:57Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.5.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "statistical package r fails to run, missing libicuuc",
    "type": "issue",
    "updated_at": "2010-08-09T09:38:26Z",
    "url": "https://github.com/sagemath/sage/issues/9396",
    "user": "https://github.com/sagetrac-mariah"
}
```
The statistical package r fails to run if the 
libicuuc library (frequently in /usr/lib) is not
present.

libicuuc is from the International Components for Unicode
project (http://site.icu-project.org/).

**Assignee:** Mariah Lenox

**CC:**  david.kirkby@onetel.net

**Author:** Mariah Lenox, David Kirkby

**Reviewer:** David Kirkby, Robert Miller

**Merged:** sage-4.5.3.alpha0

Issue created by migration from https://trac.sagemath.org/ticket/9396





---

archive/issue_events_100999.json:
```json
{
    "actor": "https://github.com/sagetrac-mariah",
    "created_at": "2010-06-30T15:34:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/9396",
    "milestone_number": null,
    "milestone_title": "sage-4.5.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9396#event-100999"
}
```



---

archive/issue_events_101000.json:
```json
{
    "actor": "https://github.com/sagetrac-mariah",
    "created_at": "2010-06-30T15:34:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9396",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
    "label_color": "08517b",
    "label_name": "component: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9396#event-101000"
}
```



---

archive/issue_events_101001.json:
```json
{
    "actor": "https://github.com/sagetrac-mariah",
    "created_at": "2010-06-30T15:34:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9396",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "008080",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9396#event-101001"
}
```



---

archive/issue_comments_082130.json:
```json
{
    "body": "**Attachment:** [r.20100630.ICU.patch.gz](https://github.com/sagemath/sage/files/ticket9396/r.20100630.ICU.patch.gz)",
    "created_at": "2010-06-30T17:53:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9396#issuecomment-82130",
    "user": "https://github.com/sagetrac-mariah"
}
```

**Attachment:** [r.20100630.ICU.patch.gz](https://github.com/sagemath/sage/files/ticket9396/r.20100630.ICU.patch.gz)



---

archive/issue_comments_082131.json:
```json
{
    "body": "<a id='comment:1'>**Comment 1:**</a>\nFurther investigation revealed that the problem only\noccurs when SAGE_FAT_BINARY is used, libicuuc exists\non the build computer, but not on the computer where\nsage executes.\n\nA solution is to add \"--with-ICU=no\" to the configure\nline in spkg-INSTALL.  A mercurial patch is attached\nwhich does this.\n\nThe same solution `_may_` work for Solaris (I have not\ntested) which currently uses \"--without-ICU\".",
    "created_at": "2010-06-30T17:58:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9396#issuecomment-82131",
    "user": "https://github.com/sagetrac-mariah"
}
```

<a id='comment:1'>**Comment 1:**</a>
Further investigation revealed that the problem only
occurs when SAGE_FAT_BINARY is used, libicuuc exists
on the build computer, but not on the computer where
sage executes.

A solution is to add "--with-ICU=no" to the configure
line in spkg-INSTALL.  A mercurial patch is attached
which does this.

The same solution `_may_` work for Solaris (I have not
tested) which currently uses "--without-ICU".



---

archive/issue_events_101002.json:
```json
{
    "actor": "https://github.com/sagetrac-mariah",
    "created_at": "2010-06-30T17:58:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9396",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9396#event-101002"
}
```



---

archive/issue_comments_082132.json:
```json
{
    "body": "<a id='comment:4'>**Comment 4:**</a>\nIn addition to providing a patch as you have done, it's normal Sage practice to put on the trac tickets a link to complete .spkg file. That allows a reviewer to quickly test the revised .spkg file without making it. It also allows the reviewer to check that the repository in the package is correct (i.e. 'hg status' shows no output). However, do not attach the .spkg file - only provide a link. \n\nAccording to the GNU autoconf manual:\n\nhttp://www.gnu.org/software/autoconf/manual/autoconf.html#External-Software\n\n\"--without-package is equivalent to --with-package=no\" \n\nI don't know anything about the SAGE_FAT_BINARY, but when I asked William if it was important, he said very so. \n\n\nI don't know whether just disabling this library is best or not. Your patch could disable it for some people that might make use of it. With Solaris, it was clear R would never build without this library, but either the library is supplied with almost all Linux distributions, or R builds without it on some systems. \n\nI'll raise this on sage-devel. \n\nDave",
    "created_at": "2010-07-02T20:50:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9396#issuecomment-82132",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<a id='comment:4'>**Comment 4:**</a>
In addition to providing a patch as you have done, it's normal Sage practice to put on the trac tickets a link to complete .spkg file. That allows a reviewer to quickly test the revised .spkg file without making it. It also allows the reviewer to check that the repository in the package is correct (i.e. 'hg status' shows no output). However, do not attach the .spkg file - only provide a link. 

According to the GNU autoconf manual:

http://www.gnu.org/software/autoconf/manual/autoconf.html#External-Software

"--without-package is equivalent to --with-package=no" 

I don't know anything about the SAGE_FAT_BINARY, but when I asked William if it was important, he said very so. 


I don't know whether just disabling this library is best or not. Your patch could disable it for some people that might make use of it. With Solaris, it was clear R would never build without this library, but either the library is supplied with almost all Linux distributions, or R builds without it on some systems. 

I'll raise this on sage-devel. 

Dave



---

archive/issue_events_101003.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-07-02T20:50:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9396",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9396#event-101003"
}
```



---

archive/issue_events_101004.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-07-02T20:50:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9396",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "008080",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9396#event-101004"
}
```



---

archive/issue_comments_082133.json:
```json
{
    "body": "<a id='comment:5'>**Comment 5:**</a>\nReplying to [mariah](#comment%3A1):\n> Further investigation revealed that the problem only\n> occurs when SAGE_FAT_BINARY is used, libicuuc exists\n> on the build computer, but not on the computer where\n> sage executes.\n\nGiven $SAGE_ROOT/README.txt says\n\n```\n3. Fat Binaries: To make a binary that will run on the widest range of\n   target machines, set the SAGE_FAT_BINARY environment variable to\n   \"yes\" before building Sage:\n\n       export SAGE_FAT_BINARY=\"yes\"\n       make\n       ./sage -bdist x.y.z-fat\n```\n\nthen it seems perfectly reasonable that if one wants Sage to run on the widest range of platforms, that this library is disabled. \n\nIf you can provide a link to a .spkg which has all the changes, then I will no doubt give this positive review. \n\nDave",
    "created_at": "2010-07-03T14:56:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9396#issuecomment-82133",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<a id='comment:5'>**Comment 5:**</a>
Replying to [mariah](#comment%3A1):
> Further investigation revealed that the problem only
> occurs when SAGE_FAT_BINARY is used, libicuuc exists
> on the build computer, but not on the computer where
> sage executes.

Given $SAGE_ROOT/README.txt says

```
3. Fat Binaries: To make a binary that will run on the widest range of
   target machines, set the SAGE_FAT_BINARY environment variable to
   "yes" before building Sage:

       export SAGE_FAT_BINARY="yes"
       make
       ./sage -bdist x.y.z-fat
```

then it seems perfectly reasonable that if one wants Sage to run on the widest range of platforms, that this library is disabled. 

If you can provide a link to a .spkg which has all the changes, then I will no doubt give this positive review. 

Dave



---

archive/issue_comments_082134.json:
```json
{
    "body": "**Reviewer:** David Kirkby",
    "created_at": "2010-07-03T14:56:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9396#issuecomment-82134",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

**Reviewer:** David Kirkby



---

archive/issue_comments_082135.json:
```json
{
    "body": "<a id='comment:6'>**Comment 6:**</a>\nReplying to [drkirkby](#comment%3A5):\n> If you can provide a link to a .spkg which has all the changes, then I will no doubt give this positive review. \n\nhttp://sage.math.washington.edu/home/rlmill/r-2.10.1.p3.spkg",
    "created_at": "2010-07-09T09:43:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9396#issuecomment-82135",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:6'>**Comment 6:**</a>
Replying to [drkirkby](#comment%3A5):
> If you can provide a link to a .spkg which has all the changes, then I will no doubt give this positive review. 

http://sage.math.washington.edu/home/rlmill/r-2.10.1.p3.spkg



---

archive/issue_events_101005.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-07-09T09:43:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9396",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "008080",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9396#event-101005"
}
```



---

archive/issue_events_101006.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-07-09T09:43:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9396",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9396#event-101006"
}
```



---

archive/issue_comments_082136.json:
```json
{
    "body": "<a id='comment:7'>**Comment 7:**</a>\nSPKG.txt is wrong, due undoubtably due to the fact #9186 was recently merged, and took the patch level 2 number. \n\n```\n=== r-2.10.1.p2 (Mitesh Patel, June 8th 2010) ===\n * #9186: Set an empty MAKEFLAGS variable before \"make install\".  On\n   OS X, at least, this fixes building multiple spkgs in parallel (cf.\n   #8306).\n\n=== r-2.10.1.p2 (Mariah Lenox, 30 Jun 2010) ===\n * added \"--with-ICU=no\" to configure line of spkg-install (#9396)\n\n=== r-2.10.1.p1 (Karl-Dieter Crisman, April 12th 2010) ===\n * Re-enable Aqua support on OSX\n```\n\nThe entry for Mariah's code should now be r-2.10.1.p3, not r-2.10.1.p2. \n\nI've just started a build on sage.math with this package and SAGE_FAT_BINARY=yes and will look over it. I can't see any reason this should fail, but I am going to check it. I should be back in an hour or two with a definitive decision. \n\nBTW, I know William has offered Mariah an account, which she has accepted, so soon she should have an account and be able to put packages on sage.math herself. \n\nDave",
    "created_at": "2010-07-09T11:40:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9396#issuecomment-82136",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<a id='comment:7'>**Comment 7:**</a>
SPKG.txt is wrong, due undoubtably due to the fact #9186 was recently merged, and took the patch level 2 number. 

```
=== r-2.10.1.p2 (Mitesh Patel, June 8th 2010) ===
 * #9186: Set an empty MAKEFLAGS variable before "make install".  On
   OS X, at least, this fixes building multiple spkgs in parallel (cf.
   #8306).

=== r-2.10.1.p2 (Mariah Lenox, 30 Jun 2010) ===
 * added "--with-ICU=no" to configure line of spkg-install (#9396)

=== r-2.10.1.p1 (Karl-Dieter Crisman, April 12th 2010) ===
 * Re-enable Aqua support on OSX
```

The entry for Mariah's code should now be r-2.10.1.p3, not r-2.10.1.p2. 

I've just started a build on sage.math with this package and SAGE_FAT_BINARY=yes and will look over it. I can't see any reason this should fail, but I am going to check it. I should be back in an hour or two with a definitive decision. 

BTW, I know William has offered Mariah an account, which she has accepted, so soon she should have an account and be able to put packages on sage.math herself. 

Dave



---

archive/issue_comments_082137.json:
```json
{
    "body": "**Changing author** from \"Mariah Lenox\" to \"Mariah Lenox, Robert Miller\".",
    "created_at": "2010-07-09T11:40:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9396#issuecomment-82137",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

**Changing author** from "Mariah Lenox" to "Mariah Lenox, Robert Miller".



---

archive/issue_events_101007.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-07-09T11:40:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9396",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9396#event-101007"
}
```



---

archive/issue_events_101008.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-07-09T11:40:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9396",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9396#event-101008"
}
```



---

archive/issue_events_101009.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-07-09T12:10:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9396",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9396#event-101009"
}
```



---

archive/issue_events_101010.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-07-09T12:10:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9396",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9396#event-101010"
}
```



---

archive/issue_comments_082138.json:
```json
{
    "body": "<a id='comment:8'>**Comment 8:**</a>\n**Attachment:** [trac_9396-spkg_txt_edit.patch.gz](https://github.com/sagemath/sage/files/ticket9396/trac_9396-spkg_txt_edit.patch.gz)\n\nspkg updated",
    "created_at": "2010-07-09T12:10:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9396#issuecomment-82138",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:8'>**Comment 8:**</a>
**Attachment:** [trac_9396-spkg_txt_edit.patch.gz](https://github.com/sagemath/sage/files/ticket9396/trac_9396-spkg_txt_edit.patch.gz)

spkg updated



---

archive/issue_events_101011.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-07-09T12:43:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9396",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9396#event-101011"
}
```



---

archive/issue_events_101012.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-07-09T12:43:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9396",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9396#event-101012"
}
```



---

archive/issue_comments_082139.json:
```json
{
    "body": "<a id='comment:9'>**Comment 9:**</a>\nEm, I thought this one was a formality, but glad I checked, since R fails to build on sage.math with SAGE_FAT_BINARY=yes (I've not tried with that unset). \n\n```\nr-2.10.1.p3/.hg/branch.cache\nr-2.10.1.p3/SPKG.txt\nFinished extraction\n****************************************************\nHost system\nuname -a:\nLinux sage.math.washington.edu 2.6.24-26-server #1 SMP Tue Dec 1 18:26:43 UTC 2009 x86_64 GNU/Linux\n****************************************************\n****************************************************\nCC Version\ngcc -v\nUsing built-in specs.\nTarget: x86_64-linux-gnu\nConfigured with: ../src/configure -v --enable-languages=c,c++,fortran,objc,obj-c++,treelang --prefix=/usr --enable-shared --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --enable-nls --with-gxx-include-dir=/usr/include/c++/4.2 --program-suffix=-4.2 --enable-clocale=gnu --enable-libstdcxx-debug --enable-objc-gc --enable-mpfr --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu\nThread model: posix\ngcc version 4.2.4 (Ubuntu 4.2.4-1ubuntu4)\n****************************************************\n./spkg-install: line 114: syntax error near unexpected token `else'\n./spkg-install: line 114: `     else'\n\nreal\t0m0.028s\nuser\t0m0.000s\nsys\t0m0.000s\nsage: An error occurred while installing r-2.10.1.p3\n```\n\n\nDave",
    "created_at": "2010-07-09T12:43:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9396#issuecomment-82139",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<a id='comment:9'>**Comment 9:**</a>
Em, I thought this one was a formality, but glad I checked, since R fails to build on sage.math with SAGE_FAT_BINARY=yes (I've not tried with that unset). 

```
r-2.10.1.p3/.hg/branch.cache
r-2.10.1.p3/SPKG.txt
Finished extraction
****************************************************
Host system
uname -a:
Linux sage.math.washington.edu 2.6.24-26-server #1 SMP Tue Dec 1 18:26:43 UTC 2009 x86_64 GNU/Linux
****************************************************
****************************************************
CC Version
gcc -v
Using built-in specs.
Target: x86_64-linux-gnu
Configured with: ../src/configure -v --enable-languages=c,c++,fortran,objc,obj-c++,treelang --prefix=/usr --enable-shared --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --enable-nls --with-gxx-include-dir=/usr/include/c++/4.2 --program-suffix=-4.2 --enable-clocale=gnu --enable-libstdcxx-debug --enable-objc-gc --enable-mpfr --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu
Thread model: posix
gcc version 4.2.4 (Ubuntu 4.2.4-1ubuntu4)
****************************************************
./spkg-install: line 114: syntax error near unexpected token `else'
./spkg-install: line 114: `     else'

real	0m0.028s
user	0m0.000s
sys	0m0.000s
sage: An error occurred while installing r-2.10.1.p3
```


Dave



---

archive/issue_comments_082140.json:
```json
{
    "body": "<a id='comment:10'>**Comment 10:**</a>\nI think the problem is:\n\n```\n     if [ \"$SAGE_FAT_BINARY\" = \"yes\" ];\n```\n\nshould be:\n\n```\n     if [ \"$SAGE_FAT_BINARY\" = \"yes\" ]; then\n```\n\nI've just made that change, and it at least starts to compile now. However, I don't have time to do any more on this for a few hours, since I have a chess game scheduled in a few minutes. \n\nThere is another ticket I've just created for R (#9464), since R has Fortran code, but a Fortran dependency is not listed. I'll test these later today. \n\nDave",
    "created_at": "2010-07-09T12:54:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9396#issuecomment-82140",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<a id='comment:10'>**Comment 10:**</a>
I think the problem is:

```
     if [ "$SAGE_FAT_BINARY" = "yes" ];
```

should be:

```
     if [ "$SAGE_FAT_BINARY" = "yes" ]; then
```

I've just made that change, and it at least starts to compile now. However, I don't have time to do any more on this for a few hours, since I have a chess game scheduled in a few minutes. 

There is another ticket I've just created for R (#9464), since R has Fortran code, but a Fortran dependency is not listed. I'll test these later today. 

Dave



---

archive/issue_comments_082141.json:
```json
{
    "body": "<a id='comment:11'>**Comment 11:**</a>\nOK, here's a patch which corrects the syntax error. With this addition, R builds without the library. config.log shows R building with the option --with-icu=no. \n\n```\nThis file contains any messages produced by compilers while\nrunning configure, to aid debugging if configure makes a mistake.\n\nIt was created by R configure 2.10.1, which was\ngenerated by GNU Autoconf 2.61.  Invocation command line was\n\n  $ ./configure --prefix=/home/kirkby/sage-4.5.alpha4/local --enable-R-shlib --with-x=yes --with-readline=/home/kirkby/sage-4.5.alpha4/local --with-blas=-L/home/kirkby/sage-4.5.alpha4/local/lib -lf77blas -latlas --with-lapack=-L/home/kirkby/sage-4.5.alpha4/local/lib -llapack -lcblas --with-ICU=no\n\n## --------- ##\n## Platform. ##\n## --------- ##\n\nhostname = sage.math.washington.edu\n```\n\nA revised .spkg may be found at \n\nhttp://boxen.math.washington.edu/home/kirkby/patches/r-2.10.1.p3.spkg\n\nDave",
    "created_at": "2010-07-09T15:14:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9396#issuecomment-82141",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<a id='comment:11'>**Comment 11:**</a>
OK, here's a patch which corrects the syntax error. With this addition, R builds without the library. config.log shows R building with the option --with-icu=no. 

```
This file contains any messages produced by compilers while
running configure, to aid debugging if configure makes a mistake.

It was created by R configure 2.10.1, which was
generated by GNU Autoconf 2.61.  Invocation command line was

  $ ./configure --prefix=/home/kirkby/sage-4.5.alpha4/local --enable-R-shlib --with-x=yes --with-readline=/home/kirkby/sage-4.5.alpha4/local --with-blas=-L/home/kirkby/sage-4.5.alpha4/local/lib -lf77blas -latlas --with-lapack=-L/home/kirkby/sage-4.5.alpha4/local/lib -llapack -lcblas --with-ICU=no

## --------- ##
## Platform. ##
## --------- ##

hostname = sage.math.washington.edu
```

A revised .spkg may be found at 

http://boxen.math.washington.edu/home/kirkby/patches/r-2.10.1.p3.spkg

Dave



---

archive/issue_events_101013.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-07-09T15:14:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9396",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9396#event-101013"
}
```



---

archive/issue_events_101014.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-07-09T15:14:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9396",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9396#event-101014"
}
```



---

archive/issue_comments_082142.json:
```json
{
    "body": "**Changing author** from \"Mariah Lenox, Robert Miller\" to \"Mariah Lenox, Robert Miller, David Kirkby\".",
    "created_at": "2010-07-09T15:14:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9396#issuecomment-82142",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

**Changing author** from "Mariah Lenox, Robert Miller" to "Mariah Lenox, Robert Miller, David Kirkby".



---

archive/issue_comments_082143.json:
```json
{
    "body": "Corrects syntax error in spkg-install",
    "created_at": "2010-07-09T15:15:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9396#issuecomment-82143",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

Corrects syntax error in spkg-install



---

archive/issue_events_101015.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-07-18T10:37:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9396",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9396#event-101015"
}
```



---

archive/issue_events_101016.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-07-18T10:37:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9396",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9396#event-101016"
}
```



---

archive/issue_comments_082144.json:
```json
{
    "body": "**Changing author** from \"Mariah Lenox, Robert Miller, David Kirkby\" to \"Mariah Lenox, David Kirkby\".",
    "created_at": "2010-07-18T10:37:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9396#issuecomment-82144",
    "user": "https://github.com/rlmill"
}
```

**Changing author** from "Mariah Lenox, Robert Miller, David Kirkby" to "Mariah Lenox, David Kirkby".



---

archive/issue_comments_082145.json:
```json
{
    "body": "<a id='comment:12'>**Comment 12:**</a>\n**Attachment:** [9396-syntax-error-correction.patch.gz](https://github.com/sagemath/sage/files/ticket9396/9396-syntax-error-correction.patch.gz)\n\nI'm setting this to positive review, since it builds on Solaris and off.\n\nI'm also removing myself from the author block, since I did virtually nothing.",
    "created_at": "2010-07-18T10:37:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9396#issuecomment-82145",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:12'>**Comment 12:**</a>
**Attachment:** [9396-syntax-error-correction.patch.gz](https://github.com/sagemath/sage/files/ticket9396/9396-syntax-error-correction.patch.gz)

I'm setting this to positive review, since it builds on Solaris and off.

I'm also removing myself from the author block, since I did virtually nothing.



---

archive/issue_comments_082146.json:
```json
{
    "body": "**Changing reviewer** from \"David Kirkby\" to \"David Kirkby, Robert Miller\".",
    "created_at": "2010-07-18T10:37:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9396#issuecomment-82146",
    "user": "https://github.com/rlmill"
}
```

**Changing reviewer** from "David Kirkby" to "David Kirkby, Robert Miller".



---

archive/issue_comments_082147.json:
```json
{
    "body": "<a id='comment:13'>**Comment 13:**</a>\nWith a fresh sage build, sage can't even start:\n\n```\nTraceback (most recent call last):\n File \"/mnt/usb1/scratch/wstein/build/sage-4.5.1/local/bin/sage-eval\",\nline 4, in <module>\n   from sage.all import *\n File \"/mnt/usb1/scratch/wstein/build/sage-4.5.1/local/lib/python2.6/site-packages/sage/all.py\",\nline 73, in <module>\n   from sage.matrix.all     import *\n File \"/mnt/usb1/scratch/wstein/build/sage-4.5.1/local/lib/python2.6/site-packages/sage/matrix/all.py\",\nline 1, in <module>\n   from matrix_space import MatrixSpace, is_MatrixSpace\n File \"/mnt/usb1/scratch/wstein/build/sage-4.5.1/local/lib/python2.6/site-packages/sage/matrix/matrix_space.py\",\nline 40, in <module>\n   import matrix_mod2_dense\nImportError: /mnt/usb1/scratch/wstein/build/sage-4.5.1/local/lib/python2.6/site-packages/sage/matrix/matrix_mod2_dense.so:\nundefined symbol: mzd_lqup\nSage failed to startup.\n```",
    "created_at": "2010-07-18T20:02:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9396#issuecomment-82147",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:13'>**Comment 13:**</a>
With a fresh sage build, sage can't even start:

```
Traceback (most recent call last):
 File "/mnt/usb1/scratch/wstein/build/sage-4.5.1/local/bin/sage-eval",
line 4, in <module>
   from sage.all import *
 File "/mnt/usb1/scratch/wstein/build/sage-4.5.1/local/lib/python2.6/site-packages/sage/all.py",
line 73, in <module>
   from sage.matrix.all     import *
 File "/mnt/usb1/scratch/wstein/build/sage-4.5.1/local/lib/python2.6/site-packages/sage/matrix/all.py",
line 1, in <module>
   from matrix_space import MatrixSpace, is_MatrixSpace
 File "/mnt/usb1/scratch/wstein/build/sage-4.5.1/local/lib/python2.6/site-packages/sage/matrix/matrix_space.py",
line 40, in <module>
   import matrix_mod2_dense
ImportError: /mnt/usb1/scratch/wstein/build/sage-4.5.1/local/lib/python2.6/site-packages/sage/matrix/matrix_mod2_dense.so:
undefined symbol: mzd_lqup
Sage failed to startup.
```



---

archive/issue_events_101017.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-07-18T20:02:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9396",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9396#event-101017"
}
```



---

archive/issue_events_101018.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-07-18T20:02:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9396",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9396#event-101018"
}
```



---

archive/issue_events_101019.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-07-18T20:05:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9396",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9396#event-101019"
}
```



---

archive/issue_events_101020.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-07-18T20:05:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9396",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9396#event-101020"
}
```



---

archive/issue_comments_082148.json:
```json
{
    "body": "<a id='comment:14'>**Comment 14:**</a>\nSorry, totally wrong ticket.",
    "created_at": "2010-07-18T20:05:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9396#issuecomment-82148",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:14'>**Comment 14:**</a>
Sorry, totally wrong ticket.



---

archive/issue_comments_082149.json:
```json
{
    "body": "<a id='comment:15'>**Comment 15:**</a>\nReplying to [@rlmill](#comment%3A14):\n> Sorry, totally wrong ticket.\n\nI was just about to ask what the connection was! When I Gooogled the error you showed, it looked more like an M4RI issue. Anyway, I'm glad it's not this ticket. \n\nDave",
    "created_at": "2010-07-18T20:16:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9396#issuecomment-82149",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<a id='comment:15'>**Comment 15:**</a>
Replying to [@rlmill](#comment%3A14):
> Sorry, totally wrong ticket.

I was just about to ask what the connection was! When I Gooogled the error you showed, it looked more like an M4RI issue. Anyway, I'm glad it's not this ticket. 

Dave



---

archive/issue_comments_082150.json:
```json
{
    "body": "<a id='comment:16'>**Comment 16:**</a>\nHopefully this gets in the next release - it could be related to some other support requests we've had.    As expected, works fine on Mac.\n\nOne question: is it okay that SUN_FLAGS is not determined for non-Sun systems?  Is it possible that the shell would still have SUN_FLAGS set to something else (bad) from earlier in the Sage build process that could cause problems?  I assume not, since I'm a shell ignoramus, but just wanted to make sure this is the case.",
    "created_at": "2010-08-05T15:36:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9396#issuecomment-82150",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:16'>**Comment 16:**</a>
Hopefully this gets in the next release - it could be related to some other support requests we've had.    As expected, works fine on Mac.

One question: is it okay that SUN_FLAGS is not determined for non-Sun systems?  Is it possible that the shell would still have SUN_FLAGS set to something else (bad) from earlier in the Sage build process that could cause problems?  I assume not, since I'm a shell ignoramus, but just wanted to make sure this is the case.



---

archive/issue_comments_082151.json:
```json
{
    "body": "**Merged:** sage-4.5.3.alpha0",
    "created_at": "2010-08-09T09:38:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9396#issuecomment-82151",
    "user": "https://github.com/qed777"
}
```

**Merged:** sage-4.5.3.alpha0



---

archive/issue_events_101021.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2010-08-09T09:38:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9396",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9396#event-101021"
}
```



---

archive/issue_events_101022.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2010-08-09T09:38:26Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/9396",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9396#event-101022"
}
```
