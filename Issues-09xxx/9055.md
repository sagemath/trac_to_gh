# Issue 9055: Moving/cleaning enumeration functions for points on schemes

archive/issues_009055.json:
```json
{
    "body": "I think it would be sensible to move the functions\n\n\nenum_projective_rational_field\n\n\nenum_projective_finite_field\n\n\nenum_affine_rational_field\n\n\nenum_affine_finite field\n\n\n\nfrom their current position at the top of sage.schemes.generic.homset, and to clean up their code to make it easier to read whilst (I believe) keeping the timing about the same.\n\nI have started work on a patch that does this, putting them into a new file sage.schemes.generic.rational_point and using the cartesian_product_iterator function to make the code much more readable.\n\nThis is a preamble to putting other (more efficient) functions that find rational points in specific cases into the same file - I am currently working on this, and will make a separate ticket for it.\n\nAssignee: @aghitza\n\nCC:  @JohnCremona @wdjoyner\n\nKeywords: rational points enumeration\n\nResolution: fixed\n\nAuthor: Charlie Turner, David Joyner, Robert Miller, Andrey Novoseltsev\n\nReviewer: Robert Miller, Andrey Novoseltsev\n\nMerged: sage-4.6.2.alpha0\n\nIssue created by migration from https://trac.sagemath.org/ticket/9055\n\n",
    "closed_at": "2011-01-12T06:32:17Z",
    "created_at": "2010-05-26T11:34:42Z",
    "labels": [
        "component: algebraic geometry",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.6.2",
    "title": "Moving/cleaning enumeration functions for points on schemes",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/9055",
    "user": "https://trac.sagemath.org/admin/accounts/users/cturner"
}
```
I think it would be sensible to move the functions


enum_projective_rational_field


enum_projective_finite_field


enum_affine_rational_field


enum_affine_finite field



from their current position at the top of sage.schemes.generic.homset, and to clean up their code to make it easier to read whilst (I believe) keeping the timing about the same.

I have started work on a patch that does this, putting them into a new file sage.schemes.generic.rational_point and using the cartesian_product_iterator function to make the code much more readable.

This is a preamble to putting other (more efficient) functions that find rational points in specific cases into the same file - I am currently working on this, and will make a separate ticket for it.

Assignee: @aghitza

CC:  @JohnCremona @wdjoyner

Keywords: rational points enumeration

Resolution: fixed

Author: Charlie Turner, David Joyner, Robert Miller, Andrey Novoseltsev

Reviewer: Robert Miller, Andrey Novoseltsev

Merged: sage-4.6.2.alpha0

Issue created by migration from https://trac.sagemath.org/ticket/9055





---

archive/issue_comments_106219.json:
```json
{
    "body": "Changing author from \"Charlie Turner\" to \"\"",
    "created_at": "2010-05-26T11:35:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9055",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9055#issuecomment-106219",
    "user": "https://trac.sagemath.org/admin/accounts/users/cturner"
}
```

Changing author from "Charlie Turner" to ""



---

archive/issue_comments_106220.json:
```json
{
    "body": "Changing status from new to needs_work.",
    "created_at": "2010-05-26T11:35:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9055",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9055#issuecomment-106220",
    "user": "https://trac.sagemath.org/admin/accounts/users/cturner"
}
```

Changing status from new to needs_work.



---

archive/issue_comments_106221.json:
```json
{
    "body": "<a id='comment:2'></a>\nI support the idea of moving these functions - I was a bit surprised to see them when I was going over homset file. And of course nobody should be against making them more readable ;-)",
    "created_at": "2010-05-26T15:17:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9055",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9055#issuecomment-106221",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:2'></a>
I support the idea of moving these functions - I was a bit surprised to see them when I was going over homset file. And of course nobody should be against making them more readable ;-)



---

archive/issue_comments_106222.json:
```json
{
    "body": "<a id='comment:3'></a>\nI have uploaded a patch. It does the following:\n\n1. Moves the functions mentioned to a new file, rational_point\n2. Changed enum_projective_rational_field, enum_projective_finite_field, enum_affine_finite_field to be, I hope, more readable, but to run no faster. I have also added a sort at the end.\nI did not change enum_affine_rational_field in the end because I couldn't see a simpler way to do it.\n3. Added docstrings for these four functions.\n4. Changed some doctests for the rational_points function (which use these functions) in the algebraic_scheme file. This is because the old functions returned an unsorted list and the new ones sort before returning, so the ordering has changed but the set of points has not.",
    "created_at": "2010-06-08T09:14:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9055",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9055#issuecomment-106222",
    "user": "https://trac.sagemath.org/admin/accounts/users/cturner"
}
```

<a id='comment:3'></a>
I have uploaded a patch. It does the following:

1. Moves the functions mentioned to a new file, rational_point
2. Changed enum_projective_rational_field, enum_projective_finite_field, enum_affine_finite_field to be, I hope, more readable, but to run no faster. I have also added a sort at the end.
I did not change enum_affine_rational_field in the end because I couldn't see a simpler way to do it.
3. Added docstrings for these four functions.
4. Changed some doctests for the rational_points function (which use these functions) in the algebraic_scheme file. This is because the old functions returned an unsorted list and the new ones sort before returning, so the ordering has changed but the set of points has not.



---

archive/issue_comments_106223.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2010-06-08T09:14:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9055",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9055#issuecomment-106223",
    "user": "https://trac.sagemath.org/admin/accounts/users/cturner"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_106224.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2010-06-08T15:05:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9055",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9055#issuecomment-106224",
    "user": "https://github.com/novoselt"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_106225.json:
```json
{
    "body": "<a id='comment:4'></a>\nI just glanced at the patch, but I have the following comments:\n\n1) \"Set of homomorphisms between two schemes\" should stay in the original file, it is the docstring of the module describing what does it do.\n\n2) There should be a new description (hopefully, more informative) in the new module. The first line is how this module will be listed in the documentation, the rest can be any text. Also, there should be the copyright/license notice and AUTHORS field in the module docline (stating who has written these functions initially and that you have improved and documented them).\n\n3) There are some doctests with very long output strings. This leads to not very good looking formatting of the documentation. You can insert line breaks in the output and doctests still will run fine. I would suggest doing it to keep line length under 80 (or even 60, excluding leading spaces,) characters.\n\n4) Did you try to compile a documentation with this module? I didn't, but it seems to me that there are quite a few problems with indentations and \"::\"s. Also, now that you have actually added the docstrings to these functions, it would make sense to include this module into the auto-generated documentation tree.\n\n5) Is there any specific reason for importing these functions in the homset module right before their use? It is my strong belief that all imports should be in the beginning of the file to avoid repetitions and to make it clear what is used by this module.\n\nI think that 1), 2), and 4) are mandatory, while 3) and 5) may reflect my personal taste (although I tried to explain why do I think that they make sense).",
    "created_at": "2010-06-08T15:05:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9055",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9055#issuecomment-106225",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:4'></a>
I just glanced at the patch, but I have the following comments:

1) "Set of homomorphisms between two schemes" should stay in the original file, it is the docstring of the module describing what does it do.

2) There should be a new description (hopefully, more informative) in the new module. The first line is how this module will be listed in the documentation, the rest can be any text. Also, there should be the copyright/license notice and AUTHORS field in the module docline (stating who has written these functions initially and that you have improved and documented them).

3) There are some doctests with very long output strings. This leads to not very good looking formatting of the documentation. You can insert line breaks in the output and doctests still will run fine. I would suggest doing it to keep line length under 80 (or even 60, excluding leading spaces,) characters.

4) Did you try to compile a documentation with this module? I didn't, but it seems to me that there are quite a few problems with indentations and "::"s. Also, now that you have actually added the docstrings to these functions, it would make sense to include this module into the auto-generated documentation tree.

5) Is there any specific reason for importing these functions in the homset module right before their use? It is my strong belief that all imports should be in the beginning of the file to avoid repetitions and to make it clear what is used by this module.

I think that 1), 2), and 4) are mandatory, while 3) and 5) may reflect my personal taste (although I tried to explain why do I think that they make sense).



---

archive/issue_comments_106226.json:
```json
{
    "body": "<a id='comment:5'></a>\n1) I (believe I have) fixed the issues flagged by novoselt. Thank you novoselt for your help in pointing them out.\n\n2) I have improved the code so that it can take either a scheme or an abstract set of rational points of a scheme as input.\n\nTHERE IS A KNOWN DOCTEST FAIL with this patch;\n\nThe following tests failed:\n\nsage/coding/code_constructions.py\nsage/coding/linear_code.py \nsage/coding/decoder.py\ndoc/en/constructions/linear_codes.rst\n\nI think this is because the coding modules use the enum_projective_finite_field function. This causes the same problem as point 4. of my previous comment (circa 8th June). The new versions of each of these functions sort points but the old ones did not. I suspect that the coding functions depend on the order of the output of enum_projective_finite_field and so fail now that that order has changed. I am not proficient with codes and do not feel able to fix this issue. I wonder if someone who does understand coding could help and fix this? I CC David Joyner, who originally wrote these modules. Perhaps it is simply a matter of adapting the doctests to take into account the new ordering. I believe that this is the right way round; that the ordering of the output of the \"enum\" functions should not depend on the algorithm used.\n\nBecause of this, I suggest that the patch be reviewed ignoring these problems with coding modules, and in the meantime a coding person might be able to help solve the problems.",
    "created_at": "2010-06-11T20:15:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9055",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9055#issuecomment-106226",
    "user": "https://trac.sagemath.org/admin/accounts/users/cturner"
}
```

<a id='comment:5'></a>
1) I (believe I have) fixed the issues flagged by novoselt. Thank you novoselt for your help in pointing them out.

2) I have improved the code so that it can take either a scheme or an abstract set of rational points of a scheme as input.

THERE IS A KNOWN DOCTEST FAIL with this patch;

The following tests failed:

sage/coding/code_constructions.py
sage/coding/linear_code.py 
sage/coding/decoder.py
doc/en/constructions/linear_codes.rst

I think this is because the coding modules use the enum_projective_finite_field function. This causes the same problem as point 4. of my previous comment (circa 8th June). The new versions of each of these functions sort points but the old ones did not. I suspect that the coding functions depend on the order of the output of enum_projective_finite_field and so fail now that that order has changed. I am not proficient with codes and do not feel able to fix this issue. I wonder if someone who does understand coding could help and fix this? I CC David Joyner, who originally wrote these modules. Perhaps it is simply a matter of adapting the doctests to take into account the new ordering. I believe that this is the right way round; that the ordering of the output of the "enum" functions should not depend on the algorithm used.

Because of this, I suggest that the patch be reviewed ignoring these problems with coding modules, and in the meantime a coding person might be able to help solve the problems.



---

archive/issue_comments_106227.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2010-06-11T20:15:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9055",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9055#issuecomment-106227",
    "user": "https://trac.sagemath.org/admin/accounts/users/cturner"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_106228.json:
```json
{
    "body": "<a id='comment:6'></a>\nBoth patches (so far!) are based on sage 4.4.3",
    "created_at": "2010-06-15T12:33:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9055",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9055#issuecomment-106228",
    "user": "https://trac.sagemath.org/admin/accounts/users/cturner"
}
```

<a id='comment:6'></a>
Both patches (so far!) are based on sage 4.4.3



---

archive/issue_comments_106229.json:
```json
{
    "body": "<a id='comment:7'></a>\nWe (John Cremona, David Joyner and myself) believe we have identified what needs to be done to fix the issues with the coding modules and we will return to it after sage days 22!",
    "created_at": "2010-06-16T15:53:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9055",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9055#issuecomment-106229",
    "user": "https://trac.sagemath.org/admin/accounts/users/cturner"
}
```

<a id='comment:7'></a>
We (John Cremona, David Joyner and myself) believe we have identified what needs to be done to fix the issues with the coding modules and we will return to it after sage days 22!



---

archive/issue_comments_106230.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2010-06-16T15:53:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9055",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9055#issuecomment-106230",
    "user": "https://trac.sagemath.org/admin/accounts/users/cturner"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_106231.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [cturner](#comment%3A7):\n> We (John Cremona, David Joyner and myself) believe we have identified what \n> needs to be done to fix the issues with the coding modules and we will \n> return to it after sage days 22!\n\n\nThe new attachment (to be applied on top of the previous one) \nseems to fix the problems in the coding thry docstrings.",
    "created_at": "2010-07-26T23:18:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9055",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9055#issuecomment-106231",
    "user": "https://github.com/wdjoyner"
}
```

<a id='comment:8'></a>
Replying to [cturner](#comment%3A7):
> We (John Cremona, David Joyner and myself) believe we have identified what 
> needs to be done to fix the issues with the coding modules and we will 
> return to it after sage days 22!


The new attachment (to be applied on top of the previous one) 
seems to fix the problems in the coding thry docstrings.



---

archive/issue_comments_106232.json:
```json
{
    "body": "Work_Issues: second patch has to be rebased",
    "created_at": "2010-11-01T02:04:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9055",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9055#issuecomment-106232",
    "user": "https://github.com/novoselt"
}
```

Work_Issues: second patch has to be rebased



---

archive/issue_comments_106233.json:
```json
{
    "body": "<a id='comment:9'></a>\nThe second patch does not apply cleanly anymore, on sage-4.6.rc0 I am getting\n\n```\napplying trac-9055-coding-thry-docstring-fixes.patch\npatching file sage/coding/linear_code.py\nHunk #13 FAILED at 2028\n```",
    "created_at": "2010-11-01T02:04:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9055",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9055#issuecomment-106233",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:9'></a>
The second patch does not apply cleanly anymore, on sage-4.6.rc0 I am getting

```
applying trac-9055-coding-thry-docstring-fixes.patch
patching file sage/coding/linear_code.py
Hunk #13 FAILED at 2028
```



---

archive/issue_comments_106234.json:
```json
{
    "body": "Author: Charlie Turner, David Joyner",
    "created_at": "2010-11-01T02:35:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9055",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9055#issuecomment-106234",
    "user": "https://github.com/novoselt"
}
```

Author: Charlie Turner, David Joyner



---

archive/issue_comments_106235.json:
```json
{
    "body": "<a id='comment:10'></a>\nWhat exactly has happened to the broken doctests? It does not seem to me that the new output is merely a permutation of the old one. \n\nThere are (sometimes) extra spaces in front of the output.\n\nThere are some notes/warnings in the documentation and it would be nice if they were formatted according to http://sagemath.org/doc/developer/conventions.html#documentation-strings",
    "created_at": "2010-11-01T02:35:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9055",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9055#issuecomment-106235",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:10'></a>
What exactly has happened to the broken doctests? It does not seem to me that the new output is merely a permutation of the old one. 

There are (sometimes) extra spaces in front of the output.

There are some notes/warnings in the documentation and it would be nice if they were formatted according to http://sagemath.org/doc/developer/conventions.html#documentation-strings



---

archive/issue_events_027265.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2010-11-01T02:35:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9055",
    "milestone": "sage-4.6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9055#event-27265"
}
```



---

archive/issue_comments_106236.json:
```json
{
    "body": "Changing work_issues from \"second patch has to be rebased\" to \"\"",
    "created_at": "2010-12-01T13:07:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9055",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9055#issuecomment-106236",
    "user": "https://github.com/rlmill"
}
```

Changing work_issues from "second patch has to be rebased" to ""



---

archive/issue_comments_106237.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [novoselt](#comment%3A10):\n> What exactly has happened to the broken doctests? It does not seem to me that the new output is merely a permutation of the old one. \n\n\nThe ordering of vector spaces over finite fields is used all over the place. In constructing the Hamming codes, etc. I think there is a echelon form involved afterward as well, so it is easy enough to seem like this isn't just a problem with order changing...\n\nThe new patch includes all previous ones, and fixes a docstring fix which needed to be rebased.",
    "created_at": "2010-12-01T13:07:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9055",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9055#issuecomment-106237",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:11'></a>
Replying to [novoselt](#comment%3A10):
> What exactly has happened to the broken doctests? It does not seem to me that the new output is merely a permutation of the old one. 


The ordering of vector spaces over finite fields is used all over the place. In constructing the Hamming codes, etc. I think there is a echelon form involved afterward as well, so it is easy enough to seem like this isn't just a problem with order changing...

The new patch includes all previous ones, and fixes a docstring fix which needed to be rebased.



---

archive/issue_comments_106238.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2010-12-01T13:07:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9055",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9055#issuecomment-106238",
    "user": "https://github.com/rlmill"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_106239.json:
```json
{
    "body": "<a id='comment:12'></a>\nI will simply mention for the record that things like\n\n```\n        G = self.gen_mat()\n        F = self.base_ring()\n        q = F.order()\n        q0 = F0.order()\n        a = log(q,q0)  # test if F/F0 is a field extension\n        if not isinstance(a, Integer):\n            raise ValueError,\"Base field must be an extension of given field %s\"%F0\n        n = len(G.columns())\n        k = len(G.rows())\n        G0 = [[x**q0 for x in g.list()] for g in G.rows()]\n        G1 = [[x for x in g.list()] for g in G.rows()]\n        G2 = G0+G1\n        MS = MatrixSpace(F,2*k,n)\n        G3 = MS(G2)\n        r = G3.rank()\n        MS = MatrixSpace(F,r,n)\n        Grref = G3.echelon_form()\n        G = MS([Grref.row(i) for i in range(r)])\n        return LinearCode(G)\n```\n(`galois_closure` in `linear_code.py`) can be vastly simplified, and probably sped up in the process.\n\nProgramming no-nos:\n1. Using logarithms to test whether one finite field is contained in another (why not just check whether the characteristics are the same and if one degree divides the other?).\n2. `G1 = [[x for x in g.list()] for g in G.rows()]` ... Why not `G1 = G.rows()` or at least `G1 = [g.list() for g in G.rows()]` etc.? This is a big waste of time (remember that Python is slow anyway...)\n3. This is also bad:\n\n```\n        MS = MatrixSpace(F,2*k,n)\n        G3 = MS(G2)\n        r = G3.rank()\n        MS = MatrixSpace(F,r,n)\n        Grref = G3.echelon_form()\n        G = MS([Grref.row(i) for i in range(r)])\n```\n... why not just `G3 = Matrix(F, 2*k, n, G2); G = G3.row_space().basis_matrix()` or the equivalent? It's easier to follow and might be more efficient, too. \n\n(Not criticisms of code in this ticket at all, for the skimmer -- just an indication that `linear_code.py` needs more work...)",
    "created_at": "2010-12-01T13:17:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9055",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9055#issuecomment-106239",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:12'></a>
I will simply mention for the record that things like

```
        G = self.gen_mat()
        F = self.base_ring()
        q = F.order()
        q0 = F0.order()
        a = log(q,q0)  # test if F/F0 is a field extension
        if not isinstance(a, Integer):
            raise ValueError,"Base field must be an extension of given field %s"%F0
        n = len(G.columns())
        k = len(G.rows())
        G0 = [[x**q0 for x in g.list()] for g in G.rows()]
        G1 = [[x for x in g.list()] for g in G.rows()]
        G2 = G0+G1
        MS = MatrixSpace(F,2*k,n)
        G3 = MS(G2)
        r = G3.rank()
        MS = MatrixSpace(F,r,n)
        Grref = G3.echelon_form()
        G = MS([Grref.row(i) for i in range(r)])
        return LinearCode(G)
```
(`galois_closure` in `linear_code.py`) can be vastly simplified, and probably sped up in the process.

Programming no-nos:
1. Using logarithms to test whether one finite field is contained in another (why not just check whether the characteristics are the same and if one degree divides the other?).
2. `G1 = [[x for x in g.list()] for g in G.rows()]` ... Why not `G1 = G.rows()` or at least `G1 = [g.list() for g in G.rows()]` etc.? This is a big waste of time (remember that Python is slow anyway...)
3. This is also bad:

```
        MS = MatrixSpace(F,2*k,n)
        G3 = MS(G2)
        r = G3.rank()
        MS = MatrixSpace(F,r,n)
        Grref = G3.echelon_form()
        G = MS([Grref.row(i) for i in range(r)])
```
... why not just `G3 = Matrix(F, 2*k, n, G2); G = G3.row_space().basis_matrix()` or the equivalent? It's easier to follow and might be more efficient, too. 

(Not criticisms of code in this ticket at all, for the skimmer -- just an indication that `linear_code.py` needs more work...)



---

archive/issue_comments_106240.json:
```json
{
    "body": "Attachment [trac_9055_reviewer.patch](tarball://root/attachments/some-uuid/ticket9055/trac_9055_reviewer.patch) by @novoselt created at 2010-12-01 17:34:12\n\nApply last",
    "created_at": "2010-12-01T17:34:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9055",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9055#issuecomment-106240",
    "user": "https://github.com/novoselt"
}
```

Attachment [trac_9055_reviewer.patch](tarball://root/attachments/some-uuid/ticket9055/trac_9055_reviewer.patch) by @novoselt created at 2010-12-01 17:34:12

Apply last



---

archive/issue_comments_106241.json:
```json
{
    "body": "Reviewer: Robert Miller, Andrey Novoseltsev",
    "created_at": "2010-12-01T17:50:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9055",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9055#issuecomment-106241",
    "user": "https://github.com/novoselt"
}
```

Reviewer: Robert Miller, Andrey Novoseltsev



---

archive/issue_comments_106242.json:
```json
{
    "body": "Changing author from \"Charlie Turner, David Joyner\" to \"Charlie Turner, David Joyner, Robert Miller, Andrey Novoseltsev\"",
    "created_at": "2010-12-01T17:50:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9055",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9055#issuecomment-106242",
    "user": "https://github.com/novoselt"
}
```

Changing author from "Charlie Turner, David Joyner" to "Charlie Turner, David Joyner, Robert Miller, Andrey Novoseltsev"



---

archive/issue_comments_106243.json:
```json
{
    "body": "<a id='comment:13'></a>\nI've prettified documentation of the new module and improved exception handling, since there were several blocks like\n\n```\ntry:\n   ...\nexcept:\n   pass\n```\nwhich potentially can cause strange errors or results. In particular, such a code may be hard to interrupt if it is taking too long.\n\nIf someone can go over my patch and approve it, please switch this ticket to positive review. Tests pass.",
    "created_at": "2010-12-01T17:50:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9055",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9055#issuecomment-106243",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:13'></a>
I've prettified documentation of the new module and improved exception handling, since there were several blocks like

```
try:
   ...
except:
   pass
```
which potentially can cause strange errors or results. In particular, such a code may be hard to interrupt if it is taking too long.

If someone can go over my patch and approve it, please switch this ticket to positive review. Tests pass.



---

archive/issue_comments_106244.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2010-12-01T20:48:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9055",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9055#issuecomment-106244",
    "user": "https://github.com/rlmill"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_027266.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-12-02T13:08:59Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9055",
    "milestone": "sage-4.6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9055#event-27266"
}
```



---

archive/issue_events_027267.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-12-02T13:08:59Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9055",
    "milestone": "sage-4.6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9055#event-27267"
}
```



---

archive/issue_comments_106245.json:
```json
{
    "body": "<a id='comment:16'></a>\nThis will likely need to be rebased when sage-4.6.1.alpha3 will be released.",
    "created_at": "2010-12-04T22:50:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9055",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9055#issuecomment-106245",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:16'></a>
This will likely need to be rebased when sage-4.6.1.alpha3 will be released.



---

archive/issue_comments_106246.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2010-12-04T22:54:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9055",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9055#issuecomment-106246",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_106247.json:
```json
{
    "body": "Work_Issues: Rebase to #6094",
    "created_at": "2010-12-04T22:54:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9055",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9055#issuecomment-106247",
    "user": "https://github.com/jdemeyer"
}
```

Work_Issues: Rebase to #6094



---

archive/issue_comments_106248.json:
```json
{
    "body": "Attachment [trac_9055-rebased.patch](tarball://root/attachments/some-uuid/ticket9055/trac_9055-rebased.patch) by @rlmill created at 2010-12-05 10:40:29\n\nrebased on sage-4.6.1.alpha2 + #6094",
    "created_at": "2010-12-05T10:40:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9055",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9055#issuecomment-106248",
    "user": "https://github.com/rlmill"
}
```

Attachment [trac_9055-rebased.patch](tarball://root/attachments/some-uuid/ticket9055/trac_9055-rebased.patch) by @rlmill created at 2010-12-05 10:40:29

rebased on sage-4.6.1.alpha2 + #6094



---

archive/issue_comments_106249.json:
```json
{
    "body": "Changing work_issues from \"Rebase to #6094\" to \"\"",
    "created_at": "2010-12-05T10:41:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9055",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9055#issuecomment-106249",
    "user": "https://github.com/rlmill"
}
```

Changing work_issues from "Rebase to #6094" to ""



---

archive/issue_comments_106250.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2010-12-05T10:41:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9055",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9055#issuecomment-106250",
    "user": "https://github.com/rlmill"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_events_027268.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-01-12T06:32:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/9055",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9055#event-27268"
}
```



---

archive/issue_comments_106251.json:
```json
{
    "body": "Merged: sage-4.6.2.alpha0",
    "created_at": "2011-01-12T06:32:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9055",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9055#issuecomment-106251",
    "user": "https://github.com/jdemeyer"
}
```

Merged: sage-4.6.2.alpha0



---

archive/issue_comments_106252.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-01-12T06:32:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9055",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9055#issuecomment-106252",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_106253.json:
```json
{
    "body": "<a id='comment:20'></a>\nDepends on #9055",
    "created_at": "2011-01-19T22:04:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9055",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9055#issuecomment-106253",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:20'></a>
Depends on #9055



---

archive/issue_comments_106254.json:
```json
{
    "body": "<a id='comment:21'></a>\nSorry wrong ticket, my bad :(",
    "created_at": "2011-01-19T22:04:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9055",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9055#issuecomment-106254",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:21'></a>
Sorry wrong ticket, my bad :(



---

archive/issue_comments_106255.json:
```json
{
    "body": "<a id='comment:22'></a>\nReplying to [vbraun](#comment%3A20):\n> Depends on #9055\n\n\nInteresting, a recursive ticket :-)  Do you want to denial-of-service the patchbot?",
    "created_at": "2011-01-19T22:15:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9055",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9055#issuecomment-106255",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:22'></a>
Replying to [vbraun](#comment%3A20):
> Depends on #9055


Interesting, a recursive ticket :-)  Do you want to denial-of-service the patchbot?
