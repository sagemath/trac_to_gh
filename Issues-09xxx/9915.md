# Issue 9915: fixes for NZMATH/Sage interoperation

archive/issues_009914.json:
```json
{
    "body": "NZMATH uses a subtype of Python's \"long\" for its bignum type.  This works fine with plain mpmath, but when mpmath runs under Sage it uses Cython code that's incompatible with NZMATH.  This patch fixes mpmath-under-sage to fix some incompatibilities with NZMATH.  (It also modifies ZZ to allow initialization from a subclass of int/long/float.)\n\n\nAssignee: @aghitza\n\nKeywords: NZMATH\n\nResolution: fixed\n\nAuthor: Carl Witty\n\nReviewer: Leif Leonhardy\n\nMerged: sage-4.6.alpha2\n\nIssue created by migration from https://trac.sagemath.org/ticket/9915\n\n",
    "closed_at": "2010-09-29T10:48:06Z",
    "created_at": "2010-09-16T08:48:13Z",
    "labels": [
        "component: basic arithmetic",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.6",
    "title": "fixes for NZMATH/Sage interoperation",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/9915",
    "user": "https://trac.sagemath.org/admin/accounts/users/cwitty"
}
```
NZMATH uses a subtype of Python's "long" for its bignum type.  This works fine with plain mpmath, but when mpmath runs under Sage it uses Cython code that's incompatible with NZMATH.  This patch fixes mpmath-under-sage to fix some incompatibilities with NZMATH.  (It also modifies ZZ to allow initialization from a subclass of int/long/float.)


Assignee: @aghitza

Keywords: NZMATH

Resolution: fixed

Author: Carl Witty

Reviewer: Leif Leonhardy

Merged: sage-4.6.alpha2

Issue created by migration from https://trac.sagemath.org/ticket/9915





---

archive/issue_comments_118231.json:
```json
{
    "body": "Attachment [trac9915_nzmath-mpmath-fixes.patch](tarball://root/attachments/some-uuid/ticket9915/trac9915_nzmath-mpmath-fixes.patch) by cwitty created at 2010-09-16 08:51:45",
    "created_at": "2010-09-16T08:51:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9915#issuecomment-118231",
    "user": "https://trac.sagemath.org/admin/accounts/users/cwitty"
}
```

Attachment [trac9915_nzmath-mpmath-fixes.patch](tarball://root/attachments/some-uuid/ticket9915/trac9915_nzmath-mpmath-fixes.patch) by cwitty created at 2010-09-16 08:51:45



---

archive/issue_comments_118232.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2010-09-16T08:52:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9915#issuecomment-118232",
    "user": "https://trac.sagemath.org/admin/accounts/users/cwitty"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_118233.json:
```json
{
    "body": "<a id='comment:2'></a>Any additional (`--[only-]optional[=...]`) tests to run with NZMATH installed?",
    "created_at": "2010-09-16T11:32:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9915#issuecomment-118233",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:2'></a>Any additional (`--[only-]optional[=...]`) tests to run with NZMATH installed?



---

archive/issue_comments_118234.json:
```json
{
    "body": "<a id='comment:3'></a>Patch looks reasonable, and doesn't cause additional doctest failures when running `ptestlong` on (not yet released) Sage 4.6.alpha1 (with NZMATH 1.0.0 installed; Ubuntu 10.04 x86_64).\n\nPositive review so far, still looking for optional NZMATH doctests... ;-)",
    "created_at": "2010-09-16T13:02:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9915#issuecomment-118234",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:3'></a>Patch looks reasonable, and doesn't cause additional doctest failures when running `ptestlong` on (not yet released) Sage 4.6.alpha1 (with NZMATH 1.0.0 installed; Ubuntu 10.04 x86_64).

Positive review so far, still looking for optional NZMATH doctests... ;-)



---

archive/issue_comments_118235.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Leif Leonhardy\"",
    "created_at": "2010-09-16T13:02:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9915#issuecomment-118235",
    "user": "https://github.com/nexttime"
}
```

Changing reviewer from "" to "Leif Leonhardy"



---

archive/issue_comments_118236.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2010-09-16T13:02:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9915#issuecomment-118236",
    "user": "https://github.com/nexttime"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_118237.json:
```json
{
    "body": "<a id='comment:4'></a>Replying to [comment:3 leif]:\n> ... still looking for optional NZMATH doctests... ;-)\n\n\nCouldn't find any; also, NZMATH doesn't have an `spkg-check` file.",
    "created_at": "2010-09-16T13:54:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9915#issuecomment-118237",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:4'></a>Replying to [comment:3 leif]:
> ... still looking for optional NZMATH doctests... ;-)


Couldn't find any; also, NZMATH doesn't have an `spkg-check` file.



---

archive/issue_comments_118238.json:
```json
{
    "body": "<a id='comment:5'></a>Is\n\n```\nsage: from nzmath import *\n```\nsupposed to work? (Gives deprecation warnings and an attribute error.)\n\nBut the following works:\n\n```\nsage: import nzmath.rational\nsage: r = nzmath.rational.Rational(113r, 355r)\nsage: print r\n113/355\nsage: \n```\nThat's of course not much of a test. ;-)",
    "created_at": "2010-09-16T14:30:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9915#issuecomment-118238",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:5'></a>Is

```
sage: from nzmath import *
```
supposed to work? (Gives deprecation warnings and an attribute error.)

But the following works:

```
sage: import nzmath.rational
sage: r = nzmath.rational.Rational(113r, 355r)
sage: print r
113/355
sage: 
```
That's of course not much of a test. ;-)



---

archive/issue_comments_118239.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-4.6.alpha2\"",
    "created_at": "2010-09-29T10:48:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9915#issuecomment-118239",
    "user": "https://github.com/qed777"
}
```

Changing merged from "" to "sage-4.6.alpha2"



---

archive/issue_comments_118240.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2010-09-29T10:48:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9915#issuecomment-118240",
    "user": "https://github.com/qed777"
}
```

Resolution: fixed



---

archive/issue_events_025006.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2010-09-29T10:48:06Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/9915",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9915#event-25006"
}
```
