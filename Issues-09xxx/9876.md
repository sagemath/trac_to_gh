# Issue 9876: Building PARI/GP with SAGE_CHECK=yes fails on 32-bit big endian machines

archive/issues_009875.json:
```json
{
    "body": "**This is an upstream problem with PARI/GP**\n\nUpstream report: [http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1099](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1099)\n\nThe \"rnfkummer\" test in PARI's `make test-all` fails on the following systems:\n* PPC OS X 10.4\n* Linux PPC 32-bit\n* Solaris SPARC\n\nFor example, on a PPC Mac OS X 10.4:\n\n```\nGP/PARI CALCULATOR Version 2.4.3 (development svn-12594)\nPowerPC running darwin (PPC/GMP-5.0.1 kernel) 32-bit version\ncompiled: Sep  8 2010, gcc-4.5.1 (GCC)\n(readline v5.0 enabled, extended help enabled)\n```\n\nI get a failure in rnfkummer (both sta and dyn), I am attaching the dif and the output of Configure.\n\n* **New pari spkg:** [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p7.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p7.spkg) (see also `pari.p7.patch` below)\n* **sagelib patch:** `9876_doctest.patch`\n\n**CC:**  drkirkby @qed777 georgsweber\n\n**Author:** Jeroen Demeyer\n\n**Reviewer:** John Palmieri, Leif Leonhardy\n\n**Upstream:** Completely fixed; Fix reported upstream\n\n**Merged:** sage-4.6.alpha2\n\nIssue created by migration from https://trac.sagemath.org/ticket/9876\n\n",
    "closed_at": "2010-09-29T08:40:07Z",
    "created_at": "2010-09-08T18:58:52Z",
    "labels": [
        "component: packages: standard",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.6",
    "title": "Building PARI/GP with SAGE_CHECK=yes fails on 32-bit big endian machines",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/9876",
    "user": "https://github.com/jdemeyer"
}
```
**This is an upstream problem with PARI/GP**

Upstream report: [http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1099](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1099)

The "rnfkummer" test in PARI's `make test-all` fails on the following systems:
* PPC OS X 10.4
* Linux PPC 32-bit
* Solaris SPARC

For example, on a PPC Mac OS X 10.4:

```
GP/PARI CALCULATOR Version 2.4.3 (development svn-12594)
PowerPC running darwin (PPC/GMP-5.0.1 kernel) 32-bit version
compiled: Sep  8 2010, gcc-4.5.1 (GCC)
(readline v5.0 enabled, extended help enabled)
```

I get a failure in rnfkummer (both sta and dyn), I am attaching the dif and the output of Configure.

* **New pari spkg:** [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p7.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p7.spkg) (see also `pari.p7.patch` below)
* **sagelib patch:** `9876_doctest.patch`

**CC:**  drkirkby @qed777 georgsweber

**Author:** Jeroen Demeyer

**Reviewer:** John Palmieri, Leif Leonhardy

**Upstream:** Completely fixed; Fix reported upstream

**Merged:** sage-4.6.alpha2

Issue created by migration from https://trac.sagemath.org/ticket/9876





---

archive/issue_comments_113909.json:
```json
{
    "body": "output of Configure",
    "created_at": "2010-09-08T18:59:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113909",
    "user": "https://github.com/jdemeyer"
}
```

output of Configure



---

archive/attachments_012770.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "rnfkummer-sta.dif",
    "asset_url": "tarball://root/attachments/some-uuid/ticket9876/rnfkummer-sta.dif",
    "created_at": "2010-09-08T18:59:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.dif",
    "user": "https://github.com/jdemeyer"
}
```



---

archive/issue_comments_113910.json:
```json
{
    "body": "diff from `make test-all`",
    "created_at": "2010-09-08T18:59:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113910",
    "user": "https://github.com/jdemeyer"
}
```

diff from `make test-all`



---

archive/issue_comments_113911.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-**This is an upstream problem with PARI/GP**\n+**This is an upstream problem with PARI/GP** (or possibly a bug in `gcc`)\n \n On one PPC Mac OS X 10.4 machine, the \"rnfkummer\" test in PARI's `make test-all` always fails.\n \n``````\n",
    "created_at": "2010-09-08T19:12:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113911",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-**This is an upstream problem with PARI/GP**
+**This is an upstream problem with PARI/GP** (or possibly a bug in `gcc`)
 
 On one PPC Mac OS X 10.4 machine, the "rnfkummer" test in PARI's `make test-all` always fails.
 
``````




---

archive/issue_comments_113912.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,6 @@\n **This is an upstream problem with PARI/GP** (or possibly a bug in `gcc`)\n+\n+Upstream report: [http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1099](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1099)\n \n On one PPC Mac OS X 10.4 machine, the \"rnfkummer\" test in PARI's `make test-all` always fails.\n \n``````\n",
    "created_at": "2010-09-08T19:17:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113912",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,6 @@
 **This is an upstream problem with PARI/GP** (or possibly a bug in `gcc`)
+
+Upstream report: [http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1099](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1099)
 
 On one PPC Mac OS X 10.4 machine, the "rnfkummer" test in PARI's `make test-all` always fails.
 
``````




---

archive/issue_comments_113913.json:
```json
{
    "body": "<a id='comment:3'></a>\nI get the same error on t2.math.washington.edu (Solaris on sparc).",
    "created_at": "2010-09-08T19:52:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113913",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:3'></a>
I get the same error on t2.math.washington.edu (Solaris on sparc).



---

archive/issue_comments_113914.json:
```json
{
    "body": "<a id='comment:4'></a>\nSo what does a Solaris sparc have in common with a PPC OS X which other systems do not have???",
    "created_at": "2010-09-08T19:57:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113914",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'></a>
So what does a Solaris sparc have in common with a PPC OS X which other systems do not have???



---

archive/issue_comments_113915.json:
```json
{
    "body": "<a id='comment:5'></a>\nI've put the build directory from t2 at `/home/palmieri/t2/pari-2.4.3.svn-12577.p5` in case any of the files there are helpful.  (Note that the /home directories are the same on t2 as on sage.math, so you can access this directory from sage.math.)",
    "created_at": "2010-09-08T20:00:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113915",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:5'></a>
I've put the build directory from t2 at `/home/palmieri/t2/pari-2.4.3.svn-12577.p5` in case any of the files there are helpful.  (Note that the /home directories are the same on t2 as on sage.math, so you can access this directory from sage.math.)



---

archive/issue_comments_113916.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [jhpalmieri](#comment%3A5):\n> I've put the build directory from t2 at `/home/palmieri/t2/pari-2.4.3.svn-12577.p5` in case any of the files there are helpful.  (Note that the /home directories are the same on t2 as on sage.math, so you can access this directory from sage.math.)\n\n\nPlease do `chmod 755 /home/palmieri/t2/pari-2.4.3.svn-12577.p5` and then I can actually access it.",
    "created_at": "2010-09-08T20:06:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113916",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'></a>
Replying to [jhpalmieri](#comment%3A5):
> I've put the build directory from t2 at `/home/palmieri/t2/pari-2.4.3.svn-12577.p5` in case any of the files there are helpful.  (Note that the /home directories are the same on t2 as on sage.math, so you can access this directory from sage.math.)


Please do `chmod 755 /home/palmieri/t2/pari-2.4.3.svn-12577.p5` and then I can actually access it.



---

archive/issue_comments_113917.json:
```json
{
    "body": "<a id='comment:7'></a>\nThanks!  For reference, the PARI/GP build directory on t2 (a Solaris sparc) can be found on:\n[http://sage.math.washington.edu/home/palmieri/t2/pari-2.4.3.svn-12577.p5/src/](http://sage.math.washington.edu/home/palmieri/t2/pari-2.4.3.svn-12577.p5/src/)",
    "created_at": "2010-09-08T20:37:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113917",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'></a>
Thanks!  For reference, the PARI/GP build directory on t2 (a Solaris sparc) can be found on:
[http://sage.math.washington.edu/home/palmieri/t2/pari-2.4.3.svn-12577.p5/src/](http://sage.math.washington.edu/home/palmieri/t2/pari-2.4.3.svn-12577.p5/src/)



---

archive/issue_comments_113918.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [jdemeyer](#comment%3A4):\n> So what does a Solaris sparc have in common with a PPC OS X which other systems do not have???\n\n\n32-bit big endian machines?",
    "created_at": "2010-09-08T20:45:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113918",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'></a>
Replying to [jdemeyer](#comment%3A4):
> So what does a Solaris sparc have in common with a PPC OS X which other systems do not have???


32-bit big endian machines?



---

archive/issue_comments_113919.json:
```json
{
    "body": "<a id='comment:9'></a>\nI also get the same error on the skynet machine mark (a *very* slow sparc machine running solaris).  I didn't the problem with fulvia (x86 running solaris).",
    "created_at": "2010-09-09T04:47:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113919",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:9'></a>
I also get the same error on the skynet machine mark (a *very* slow sparc machine running solaris).  I didn't the problem with fulvia (x86 running solaris).



---

archive/issue_comments_113920.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,10 +1,13 @@\n-**This is an upstream problem with PARI/GP** (or possibly a bug in `gcc`)\n+**This is an upstream problem with PARI/GP**\n \n Upstream report: [http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1099](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1099)\n \n-On one PPC Mac OS X 10.4 machine, the \"rnfkummer\" test in PARI's `make test-all` always fails.\n+The \"rnfkummer\" test in PARI's `make test-all` fails on the following systems:\n+* PPC OS X 10.4\n+* Linux PPC 32-bit\n+* Solaris sparc\n \n-For example, with this version:\n+For example, on a PPC Mac OS X 10.4:\n \n ```\n GP/PARI CALCULATOR Version 2.4.3 (development svn-12594)\n``````\n",
    "created_at": "2010-09-09T08:15:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113920",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,10 +1,13 @@
-**This is an upstream problem with PARI/GP** (or possibly a bug in `gcc`)
+**This is an upstream problem with PARI/GP**
 
 Upstream report: [http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1099](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1099)
 
-On one PPC Mac OS X 10.4 machine, the "rnfkummer" test in PARI's `make test-all` always fails.
+The "rnfkummer" test in PARI's `make test-all` fails on the following systems:
+* PPC OS X 10.4
+* Linux PPC 32-bit
+* Solaris sparc
 
-For example, with this version:
+For example, on a PPC Mac OS X 10.4:
 
 ```
 GP/PARI CALCULATOR Version 2.4.3 (development svn-12594)
``````




---

archive/issue_events_029663.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "rename": {
        "from": "Building PARI/GP with SAGE_CHECK=yes fails on rnfkummer on a PPC Mac OS X 10.4",
        "to": "Building PARI/GP with SAGE_CHECK=yes fails on 32-bit big endian machines"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9876#event-29663"
}
```



---

archive/issue_comments_113921.json:
```json
{
    "body": "**Changing upstream** from \"Reported upstream. Little or no feedback.\" to \"Reported upstream. Developers acknowledge bug.\".",
    "created_at": "2010-09-09T08:15:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113921",
    "user": "https://github.com/jdemeyer"
}
```

**Changing upstream** from "Reported upstream. Little or no feedback." to "Reported upstream. Developers acknowledge bug.".



---

archive/issue_comments_113922.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [jdemeyer](#comment%3A8):\n> Replying to [jdemeyer](#comment%3A4):\n> > So what does a Solaris sparc have in common with a PPC OS X which other systems do not have???\n\n> \n> 32-bit big endian machines?\n\n\nAll modern SPARC systems are 64-bit. The Sun Ultra 1, which was the first 64-bit machine from Sun, was bought out in 1995 - i.e. 15 years ago, well before any Intel or AMD chip was 64-bit. \n\nHowever, to maintain backward compatibility, and to increase performance, Sun chose to retain the default builds as 32-bit. So are in fact building Sage 32-bit on Solaris, though a 64-bit build is possible. \n\nThe fact John said the tests fail on 'mark' but pass on 'fulvia' does indicate it's very likely to be a big-endian issue. I have a machine running HP-UX which uses a PA-RISC processor. That is big-endian. I could try building Pari on there, though I'm not sure if it will work or not. I'd not be surprised if it failed to build on there. \n\nDave",
    "created_at": "2010-09-09T09:47:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113922",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:11'></a>
Replying to [jdemeyer](#comment%3A8):
> Replying to [jdemeyer](#comment%3A4):
> > So what does a Solaris sparc have in common with a PPC OS X which other systems do not have???

> 
> 32-bit big endian machines?


All modern SPARC systems are 64-bit. The Sun Ultra 1, which was the first 64-bit machine from Sun, was bought out in 1995 - i.e. 15 years ago, well before any Intel or AMD chip was 64-bit. 

However, to maintain backward compatibility, and to increase performance, Sun chose to retain the default builds as 32-bit. So are in fact building Sage 32-bit on Solaris, though a 64-bit build is possible. 

The fact John said the tests fail on 'mark' but pass on 'fulvia' does indicate it's very likely to be a big-endian issue. I have a machine running HP-UX which uses a PA-RISC processor. That is big-endian. I could try building Pari on there, though I'm not sure if it will work or not. I'd not be surprised if it failed to build on there. 

Dave



---

archive/issue_comments_113923.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [drkirkby](#comment%3A11):\n> All modern SPARC systems are 64-bit. The Sun Ultra 1, which was the first 64-bit machine from Sun, was bought out in 1995 - i.e. 15 years ago, well before any Intel or AMD chip was 64-bit.\n\n\ni860? That were the days of SPARC V7... ;-)",
    "created_at": "2010-09-09T15:15:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113923",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:12'></a>
Replying to [drkirkby](#comment%3A11):
> All modern SPARC systems are 64-bit. The Sun Ultra 1, which was the first 64-bit machine from Sun, was bought out in 1995 - i.e. 15 years ago, well before any Intel or AMD chip was 64-bit.


i860? That were the days of SPARC V7... ;-)



---

archive/issue_comments_113924.json:
```json
{
    "body": "**Changing upstream** from \"Reported upstream. Developers acknowledge bug.\" to \"Fixed upstream, but not in a stable release.\".",
    "created_at": "2010-09-10T08:41:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113924",
    "user": "https://github.com/jdemeyer"
}
```

**Changing upstream** from "Reported upstream. Developers acknowledge bug." to "Fixed upstream, but not in a stable release.".



---

archive/attachments_012771.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "9876_doctest.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket9876/9876_doctest.patch",
    "created_at": "2010-09-10T19:11:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/jdemeyer"
}
```



---

archive/issue_comments_113925.json:
```json
{
    "body": "Adds doctest to catch this error in the future",
    "created_at": "2010-09-10T19:11:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113925",
    "user": "https://github.com/jdemeyer"
}
```

Adds doctest to catch this error in the future



---

archive/issue_comments_113926.json:
```json
{
    "body": "**Author:** Jeroen Demeyer",
    "created_at": "2010-09-11T06:40:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113926",
    "user": "https://github.com/jdemeyer"
}
```

**Author:** Jeroen Demeyer



---

archive/issue_comments_113927.json:
```json
{
    "body": "**Changing upstream** from \"Fixed upstream, but not in a stable release.\" to \"Completely fixed; Fix reported upstream\".",
    "created_at": "2010-09-11T06:40:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113927",
    "user": "https://github.com/jdemeyer"
}
```

**Changing upstream** from "Fixed upstream, but not in a stable release." to "Completely fixed; Fix reported upstream".



---

archive/issue_comments_113928.json:
```json
{
    "body": "<a id='comment:14'></a>\nFix (spkg + doctest) tested on\n* 64-bit Intel Linux\n* 32-bit Intel Linux\n* 32-bit PPC OS X",
    "created_at": "2010-09-11T06:40:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113928",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:14'></a>
Fix (spkg + doctest) tested on
* 64-bit Intel Linux
* 32-bit Intel Linux
* 32-bit PPC OS X



---

archive/issue_comments_113929.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -17,3 +17,6 @@\n ```\n \n I get a failure in rnfkummer (both sta and dyn), I am attaching the dif and the output of Configure.\n+\n+* **New pari spkg:** [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p6.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p6.spkg) (see also `pari.p6.patch` below)\n+* **sagelib patch:** `9876_doctest.patch`\n``````\n",
    "created_at": "2010-09-11T06:40:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113929",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -17,3 +17,6 @@
 ```
 
 I get a failure in rnfkummer (both sta and dyn), I am attaching the dif and the output of Configure.
+
+* **New pari spkg:** [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p6.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p6.spkg) (see also `pari.p6.patch` below)
+* **sagelib patch:** `9876_doctest.patch`
``````




---

archive/issue_comments_113930.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2010-09-11T06:40:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113930",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_113931.json:
```json
{
    "body": "<a id='comment:15'></a>\nAssuming Mitesh is ok with that.",
    "created_at": "2010-09-11T07:24:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113931",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:15'></a>
Assuming Mitesh is ok with that.



---

archive/issue_comments_113932.json:
```json
{
    "body": "<a id='comment:16'></a>\nP.S.: Tell Mercurial some patches have been removed...",
    "created_at": "2010-09-11T07:37:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113932",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:16'></a>
P.S.: Tell Mercurial some patches have been removed...



---

archive/issue_comments_113933.json:
```json
{
    "body": "<a id='comment:17'></a>\nCan someone test the new spkg on MacOS X 10.**4** **Intel**? (The upstream fix only adds `-fno-common` on PPCs, not *Tiger* in general, which is afaik wrong.)",
    "created_at": "2010-09-11T08:12:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113933",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:17'></a>
Can someone test the new spkg on MacOS X 10.**4** **Intel**? (The upstream fix only adds `-fno-common` on PPCs, not *Tiger* in general, which is afaik wrong.)



---

archive/issue_comments_113934.json:
```json
{
    "body": "<a id='comment:18'></a>\nLast comment refers to\n\n```\n### pari-2.4.3.svn-12577.p6 (Jeroen Demeyer, September 10th, 2010)\n * Add upstream fix for config/get_dlcflags and remove the patch\n```\nwhich is\n\n```diff\n$ diff -Nau pari-2.4.3.svn-12577.p5/src/config/get_dlcflags pari-2.4.3.svn-12577.p6/src/config/get_dlcflags \n--- pari-2.4.3.svn-12577.p5/src/config/get_dlcflags\t2010-09-06 21:26:42.000000000 +0200\n+++ pari-2.4.3.svn-12577.p6/src/config/get_dlcflags\t2010-09-10 23:29:12.000000000 +0200\n@@ -2,6 +2,10 @@\n if test -n \"$__gnuc__\"; then\n   case $osname in\n     cygwin|mingw) DLCFLAGS=;;\n+    darwin) DLCFLAGS=-fPIC\n+      case $arch in\n+        ppc|ppc64) DLCFLAGS=\"$DLCFLAGS -fno-common\"\n+      esac;;\n     *) DLCFLAGS=-fPIC;;\n   esac\n else #assume native compiler\n```",
    "created_at": "2010-09-11T08:21:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113934",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:18'></a>
Last comment refers to

```
### pari-2.4.3.svn-12577.p6 (Jeroen Demeyer, September 10th, 2010)
 * Add upstream fix for config/get_dlcflags and remove the patch
```
which is

```diff
$ diff -Nau pari-2.4.3.svn-12577.p5/src/config/get_dlcflags pari-2.4.3.svn-12577.p6/src/config/get_dlcflags 
--- pari-2.4.3.svn-12577.p5/src/config/get_dlcflags	2010-09-06 21:26:42.000000000 +0200
+++ pari-2.4.3.svn-12577.p6/src/config/get_dlcflags	2010-09-10 23:29:12.000000000 +0200
@@ -2,6 +2,10 @@
 if test -n "$__gnuc__"; then
   case $osname in
     cygwin|mingw) DLCFLAGS=;;
+    darwin) DLCFLAGS=-fPIC
+      case $arch in
+        ppc|ppc64) DLCFLAGS="$DLCFLAGS -fno-common"
+      esac;;
     *) DLCFLAGS=-fPIC;;
   esac
 else #assume native compiler
```



---

archive/issue_comments_113935.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -5,7 +5,7 @@\n The \"rnfkummer\" test in PARI's `make test-all` fails on the following systems:\n * PPC OS X 10.4\n * Linux PPC 32-bit\n-* Solaris sparc\n+* Solaris SPARC\n \n For example, on a PPC Mac OS X 10.4:\n \n``````\n",
    "created_at": "2010-09-11T10:53:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113935",
    "user": "https://github.com/nexttime"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -5,7 +5,7 @@
 The "rnfkummer" test in PARI's `make test-all` fails on the following systems:
 * PPC OS X 10.4
 * Linux PPC 32-bit
-* Solaris sparc
+* Solaris SPARC
 
 For example, on a PPC Mac OS X 10.4:
 
``````




---

archive/issue_comments_113936.json:
```json
{
    "body": "<a id='comment:19'></a>\nJeroen, could you also extend the message printed when `SAGE_TUNE_PARI=yes` to strongly recommend running PARI's test suite after tuning? (We could in principle do that automatically from `spkg-install` as well, but that's IMHO not a good idea since it then might get run twice, and also doing so wouldn't fit Sage's build/test process.)\n\nAs mentioned somewhere else (#9343?), one of PARI's self-tests fails *after \"successful\" tuning* on a Pentium 4 Prescott running Ubuntu 9.04 (gcc 4.3.3). I've yet only put a comment on the wiki page; will open a ticket for that later.\n\n---\n\nI'd prefer prepending `./` to `Configure`, since this will give an *appropriate* error message in any case where `src/Configure` does (for whatever reason) not exist. (Otherwise `bash` would then attempt to find it in `$PATH`, which might cause weird behavoir.)\n\n---\n\nWhile adding `-fno-common` on MacOS X 10.5 and 10.6, too, is perhaps a bit odd, it doesn't hurt; otherwise one should look for *Darwin 8* (10.4) with `uname ...`. (I currently don't know the exact string; the relevant part should be the same on PPC 10.4.).",
    "created_at": "2010-09-11T10:53:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113936",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:19'></a>
Jeroen, could you also extend the message printed when `SAGE_TUNE_PARI=yes` to strongly recommend running PARI's test suite after tuning? (We could in principle do that automatically from `spkg-install` as well, but that's IMHO not a good idea since it then might get run twice, and also doing so wouldn't fit Sage's build/test process.)

As mentioned somewhere else (#9343?), one of PARI's self-tests fails *after "successful" tuning* on a Pentium 4 Prescott running Ubuntu 9.04 (gcc 4.3.3). I've yet only put a comment on the wiki page; will open a ticket for that later.

---

I'd prefer prepending `./` to `Configure`, since this will give an *appropriate* error message in any case where `src/Configure` does (for whatever reason) not exist. (Otherwise `bash` would then attempt to find it in `$PATH`, which might cause weird behavoir.)

---

While adding `-fno-common` on MacOS X 10.5 and 10.6, too, is perhaps a bit odd, it doesn't hurt; otherwise one should look for *Darwin 8* (10.4) with `uname ...`. (I currently don't know the exact string; the relevant part should be the same on PPC 10.4.).



---

archive/issue_comments_113937.json:
```json
{
    "body": "<a id='comment:20'></a>\nReplying to [leif](#comment%3A19):\n> [...] otherwise one should look for *Darwin 8* (10.4) with `uname ...`. (I currently don't know the exact string; the relevant part should be the same on PPC 10.4.).\n\n\n<code>\\`uname -r\\`</code> should start with `8` for MacOS X 10.4 / Tiger / Darwin 8.",
    "created_at": "2010-09-11T12:17:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113937",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:20'></a>
Replying to [leif](#comment%3A19):
> [...] otherwise one should look for *Darwin 8* (10.4) with `uname ...`. (I currently don't know the exact string; the relevant part should be the same on PPC 10.4.).


<code>\`uname -r\`</code> should start with `8` for MacOS X 10.4 / Tiger / Darwin 8.



---

archive/issue_comments_113938.json:
```json
{
    "body": "<a id='comment:21'></a>\nReplying to [leif](#comment%3A17):\n> Can someone test the new spkg on MacOS X 10.**4** **Intel**? (The upstream fix only adds `-fno-common` on PPCs, not *Tiger* in general, which is afaik wrong.)\n\n\nI agree this certainly needs to be tested.",
    "created_at": "2010-09-11T12:55:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113938",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:21'></a>
Replying to [leif](#comment%3A17):
> Can someone test the new spkg on MacOS X 10.**4** **Intel**? (The upstream fix only adds `-fno-common` on PPCs, not *Tiger* in general, which is afaik wrong.)


I agree this certainly needs to be tested.



---

archive/issue_comments_113939.json:
```json
{
    "body": "patch for the PARI spkg with upstream fix and some cleanup",
    "created_at": "2010-09-11T13:10:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113939",
    "user": "https://github.com/jdemeyer"
}
```

patch for the PARI spkg with upstream fix and some cleanup



---

archive/attachments_012772.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "pari.p6.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket9876/pari.p6.patch",
    "created_at": "2010-09-11T13:11:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/jdemeyer"
}
```



---

archive/issue_comments_113940.json:
```json
{
    "body": "<a id='comment:22'></a>\nReplying to [leif](#comment%3A19):\n> Jeroen, could you also extend the message printed when `SAGE_TUNE_PARI=yes` to strongly recommend running PARI's test suite after tuning?\n> \n> \n> ---\n> \n> I'd prefer prepending `./` to `Configure`, since this will give an *appropriate* error message in any case where `src/Configure` does (for whatever reason) not exist.\n\n\nDone. New spkg, same place: [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p6.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p6.spkg)",
    "created_at": "2010-09-11T13:11:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113940",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:22'></a>
Replying to [leif](#comment%3A19):
> Jeroen, could you also extend the message printed when `SAGE_TUNE_PARI=yes` to strongly recommend running PARI's test suite after tuning?
> 
> 
> ---
> 
> I'd prefer prepending `./` to `Configure`, since this will give an *appropriate* error message in any case where `src/Configure` does (for whatever reason) not exist.


Done. New spkg, same place: [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p6.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p6.spkg)



---

archive/issue_comments_113941.json:
```json
{
    "body": "<a id='comment:23'></a>\nReplying to [jdemeyer](#comment%3A21):\n> Replying to [leif](#comment%3A17):\n> > Can someone test the new spkg on MacOS X 10.**4** **Intel**? (The upstream fix only adds `-fno-common` on PPCs, not *Tiger* in general, which is afaik wrong.)\n\n> \n> I agree this certainly needs to be tested.\n\n\nWell, the incapability of 10.4's linker / loader to handle common symbols in conjunction with dynamic libraries is completely unrelated to the processor architecture; I doubt the one used on Intel processors in 10.4 will differ much from the one on PowerPCs. (PPC may imply Darwin 8, but not the other way around.)\n\nSo I'd prefer keeping *our* patch (which is already well-tested), or modify it to add a distinction on the Darwin release (<code>\\`uname -r\\`</code>, see above).",
    "created_at": "2010-09-11T14:20:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113941",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:23'></a>
Replying to [jdemeyer](#comment%3A21):
> Replying to [leif](#comment%3A17):
> > Can someone test the new spkg on MacOS X 10.**4** **Intel**? (The upstream fix only adds `-fno-common` on PPCs, not *Tiger* in general, which is afaik wrong.)

> 
> I agree this certainly needs to be tested.


Well, the incapability of 10.4's linker / loader to handle common symbols in conjunction with dynamic libraries is completely unrelated to the processor architecture; I doubt the one used on Intel processors in 10.4 will differ much from the one on PowerPCs. (PPC may imply Darwin 8, but not the other way around.)

So I'd prefer keeping *our* patch (which is already well-tested), or modify it to add a distinction on the Darwin release (<code>\`uname -r\`</code>, see above).



---

archive/issue_comments_113942.json:
```json
{
    "body": "<a id='comment:24'></a>\nThe new spkg works (with SAGE_CHECK=yes) on t2.math.",
    "created_at": "2010-09-11T17:15:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113942",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:24'></a>
The new spkg works (with SAGE_CHECK=yes) on t2.math.



---

archive/issue_comments_113943.json:
```json
{
    "body": "<a id='comment:25'></a>\nReplying to [leif](#comment%3A23):\n> Well, the incapability of 10.4's linker / loader to handle common symbols in conjunction with dynamic libraries is completely unrelated to the processor architecture; I doubt the one used on Intel processors in 10.4 will differ much from the one on PowerPCs. (PPC may imply Darwin 8, but not the other way around.)\n\n\nI sent an email to the PARI people about this, let's see what they say.",
    "created_at": "2010-09-12T08:16:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113943",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:25'></a>
Replying to [leif](#comment%3A23):
> Well, the incapability of 10.4's linker / loader to handle common symbols in conjunction with dynamic libraries is completely unrelated to the processor architecture; I doubt the one used on Intel processors in 10.4 will differ much from the one on PowerPCs. (PPC may imply Darwin 8, but not the other way around.)


I sent an email to the PARI people about this, let's see what they say.



---

archive/issue_comments_113944.json:
```json
{
    "body": "<a id='comment:26'></a>\nReplying to [jdemeyer](#comment%3A21):\n> Replying to [leif](#comment%3A17):\n> > Can someone test the new spkg on MacOS X 10.**4** **Intel**? (The upstream fix only adds `-fno-common` on PPCs, not *Tiger* in general, which is afaik wrong.)\n\n> \n> I agree this certainly needs to be tested.\n\n\nGeorg, perhaps you could confirm that `-fno-common` is also needed on MacOS X 10.4 **Intel** machines? (Or the opposite, but to me that's unlikely.)\n\nIt should be sufficient to just try\n\n```sh\n$ cd .../pari-2.4.3.svn-12577.p6/src\n$ ./Configure --graphic=none\n$ make gp\n```\n(with http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p6.spkg)",
    "created_at": "2010-09-17T15:55:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113944",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:26'></a>
Replying to [jdemeyer](#comment%3A21):
> Replying to [leif](#comment%3A17):
> > Can someone test the new spkg on MacOS X 10.**4** **Intel**? (The upstream fix only adds `-fno-common` on PPCs, not *Tiger* in general, which is afaik wrong.)

> 
> I agree this certainly needs to be tested.


Georg, perhaps you could confirm that `-fno-common` is also needed on MacOS X 10.4 **Intel** machines? (Or the opposite, but to me that's unlikely.)

It should be sufficient to just try

```sh
$ cd .../pari-2.4.3.svn-12577.p6/src
$ ./Configure --graphic=none
$ make gp
```
(with http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p6.spkg)



---

archive/issue_comments_113945.json:
```json
{
    "body": "<a id='comment:27'></a>\nThe error we previously got on MacOS X 10.4 **PPC** looked like this:\n\n```\n/usr/bin/gcc  -o \"/Users/jdemeyer/pari-2.4.3.svn-12577/src/Odarwin-ppc\"/libpari-2.4.dylib -dynamiclib  -O3 -Wall -fno-strict-aliasing -fomit-frame-pointer    -fPIC -Wl,-flat_namespace,-undefined,suppress  mp.o mpinl.o F2x.o FF.o Flx.o FpE.o FpV.o FpX.o Qfb.o RgV.o RgX.o ZV.o ZX.o alglin1.o alglin2.o arith1.o arith2.o base1.o base2.o base3.o base4.o base5.o bb_group.o bibli1.o bibli2.o bit.o buch1.o buch2.o buch3.o buch4.o concat.o ellanal.o elliptic.o galconj.o gen1.o gen2.o gen3.o hnf_snf.o ifactor1.o lll.o perm.o polarit1.o polarit2.o polarit3.o prime.o random.o rootpol.o subcyclo.o subgroup.o trans1.o trans2.o trans3.o anal.o compat.o compile.o default.o errmsg.o es.o eval.o hash.o init.o intnum.o members.o pariinl.o parse.o sumiter.o DedekZeta.o Hensel.o QX_factor.o aprcl.o elldata.o ellsea.o galois.o galpol.o groupid.o krasner.o kummer.o mpqs.o nffactor.o part.o stark.o subfield.o thue.o darwin.o\nld: common symbols not allowed with MH_DYLIB output format with the -multi_module option\ninit.o definition of common _DEBUGMEM (size 4)\ninit.o definition of common _avma (size 4)\ninit.o definition of common _bot (size 4)\n[...]\nes.o definition of common _pariErr (size 4)\nes.o definition of common _pariOut (size 4)\ninit.o definition of common _pari_errfile (size 4)\ninit.o definition of common _pari_infile (size 4)\ninit.o definition of common _pari_outfile (size 4)\ninit.o definition of common _cb_pari_err_recover (size 4)\ninit.o definition of common _foreignFuncFree (size 4)\ninit.o definition of common _cb_pari_handle_exception (size 4)\ninit.o definition of common _cb_pari_sigint (size 4)\ninit.o definition of common _cb_pari_whatnow (size 4)\ninit.o definition of common _foreignExprHandler (size 4)\ninit.o definition of common _foreignHandler (size 4)\ninit.o definition of common _memused (size 4)\n/usr/bin/libtool: internal link edit command failed\nmake[1]: *** [libpari-2.4.dylib] Error 1\nmake: *** [gp] Error 2\n```",
    "created_at": "2010-09-17T16:14:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113945",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:27'></a>
The error we previously got on MacOS X 10.4 **PPC** looked like this:

```
/usr/bin/gcc  -o "/Users/jdemeyer/pari-2.4.3.svn-12577/src/Odarwin-ppc"/libpari-2.4.dylib -dynamiclib  -O3 -Wall -fno-strict-aliasing -fomit-frame-pointer    -fPIC -Wl,-flat_namespace,-undefined,suppress  mp.o mpinl.o F2x.o FF.o Flx.o FpE.o FpV.o FpX.o Qfb.o RgV.o RgX.o ZV.o ZX.o alglin1.o alglin2.o arith1.o arith2.o base1.o base2.o base3.o base4.o base5.o bb_group.o bibli1.o bibli2.o bit.o buch1.o buch2.o buch3.o buch4.o concat.o ellanal.o elliptic.o galconj.o gen1.o gen2.o gen3.o hnf_snf.o ifactor1.o lll.o perm.o polarit1.o polarit2.o polarit3.o prime.o random.o rootpol.o subcyclo.o subgroup.o trans1.o trans2.o trans3.o anal.o compat.o compile.o default.o errmsg.o es.o eval.o hash.o init.o intnum.o members.o pariinl.o parse.o sumiter.o DedekZeta.o Hensel.o QX_factor.o aprcl.o elldata.o ellsea.o galois.o galpol.o groupid.o krasner.o kummer.o mpqs.o nffactor.o part.o stark.o subfield.o thue.o darwin.o
ld: common symbols not allowed with MH_DYLIB output format with the -multi_module option
init.o definition of common _DEBUGMEM (size 4)
init.o definition of common _avma (size 4)
init.o definition of common _bot (size 4)
[...]
es.o definition of common _pariErr (size 4)
es.o definition of common _pariOut (size 4)
init.o definition of common _pari_errfile (size 4)
init.o definition of common _pari_infile (size 4)
init.o definition of common _pari_outfile (size 4)
init.o definition of common _cb_pari_err_recover (size 4)
init.o definition of common _foreignFuncFree (size 4)
init.o definition of common _cb_pari_handle_exception (size 4)
init.o definition of common _cb_pari_sigint (size 4)
init.o definition of common _cb_pari_whatnow (size 4)
init.o definition of common _foreignExprHandler (size 4)
init.o definition of common _foreignHandler (size 4)
init.o definition of common _memused (size 4)
/usr/bin/libtool: internal link edit command failed
make[1]: *** [libpari-2.4.dylib] Error 1
make: *** [gp] Error 2
```



---

archive/issue_comments_113946.json:
```json
{
    "body": "<a id='comment:28'></a>\nReplying to [jdemeyer](#comment%3A25):\n> I sent an email to the PARI people about this, let's see what they say.\n\n\nI haven't had much luck, see [http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1088](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1088):\n\nBill Allombert wrote:\n> Jeroen Demeyer wrote:\n> > In that case, I strongly recommend you to apply the patch to ALL darwin\n> > architectures, not just ppc/ppc64.\n\n> Why ? Is there any documentation that recommend that ? gcc documentation certainly does not.\n\nI do agree with leif though, I will prepare a .p7 with the fix.",
    "created_at": "2010-09-17T20:10:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113946",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:28'></a>
Replying to [jdemeyer](#comment%3A25):
> I sent an email to the PARI people about this, let's see what they say.


I haven't had much luck, see [http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1088](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1088):

Bill Allombert wrote:
> Jeroen Demeyer wrote:
> > In that case, I strongly recommend you to apply the patch to ALL darwin
> > architectures, not just ppc/ppc64.

> Why ? Is there any documentation that recommend that ? gcc documentation certainly does not.

I do agree with leif though, I will prepare a .p7 with the fix.



---

archive/issue_comments_113947.json:
```json
{
    "body": "<a id='comment:29'></a>\nReplying to [jdemeyer](#comment%3A28):\n> I do agree with leif though, I will prepare a .p7 with the fix.\n\n\nNew spkg: [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p7.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p7.spkg)",
    "created_at": "2010-09-19T08:46:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113947",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:29'></a>
Replying to [jdemeyer](#comment%3A28):
> I do agree with leif though, I will prepare a .p7 with the fix.


New spkg: [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p7.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p7.spkg)



---

archive/issue_comments_113948.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -18,5 +18,5 @@\n \n I get a failure in rnfkummer (both sta and dyn), I am attaching the dif and the output of Configure.\n \n-* **New pari spkg:** [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p6.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p6.spkg) (see also `pari.p6.patch` below)\n+* **New pari spkg:** [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p7.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p7.spkg) (see also `pari.p7.patch` below)\n * **sagelib patch:** `9876_doctest.patch`\n``````\n",
    "created_at": "2010-09-19T08:46:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113948",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -18,5 +18,5 @@
 
 I get a failure in rnfkummer (both sta and dyn), I am attaching the dif and the output of Configure.
 
-* **New pari spkg:** [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p6.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p6.spkg) (see also `pari.p6.patch` below)
+* **New pari spkg:** [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p7.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p7.spkg) (see also `pari.p7.patch` below)
 * **sagelib patch:** `9876_doctest.patch`
``````




---

archive/attachments_012773.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "pari.p7.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket9876/pari.p7.patch",
    "created_at": "2010-09-19T08:47:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/jdemeyer"
}
```



---

archive/issue_comments_113949.json:
```json
{
    "body": "Patch for the PARI spkg .p6 to .p7",
    "created_at": "2010-09-19T08:47:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113949",
    "user": "https://github.com/jdemeyer"
}
```

Patch for the PARI spkg .p6 to .p7



---

archive/issue_comments_113950.json:
```json
{
    "body": "<a id='comment:30'></a>\nI think this is ready for review now.  The original issue seems to be fixed and the `get_dlcflags` change has been reverted.",
    "created_at": "2010-09-19T16:52:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113950",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:30'></a>
I think this is ready for review now.  The original issue seems to be fixed and the `get_dlcflags` change has been reverted.



---

archive/issue_comments_113951.json:
```json
{
    "body": "<a id='comment:31'></a>\nI've again tested the latest p7 (which includes only minor* changes w.r.t. the p6) and the new Sage library patch (additional regression doctest) on Ubuntu 10.04 x86_64 (`ptestlong` run twice, the second time with #9898 applied and the lcalc p5 spkg from #9845). (Also, the new spkg is \"sane\".)\n\nSince Jeroen has already successfully tested it on a PPC Mac (big-endian), and John on t2.math (I assume in 32-bit big-endian mode), and the patch to `get_dlcflags` has been reverted to what we already tested (which definitely works on MacOS X 10.**4** **Intel**, too), I set this to \"positive review\".\n\n---\n*Although I must admit I haven't yet verified that the newly updated upstream source files claiming to fix [PARI bug #1079](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1079) achieve the same as the previously applied Sage patches (\"segmentation fault in `rnfequation(,,1)` over Q\").",
    "created_at": "2010-09-19T23:24:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113951",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:31'></a>
I've again tested the latest p7 (which includes only minor* changes w.r.t. the p6) and the new Sage library patch (additional regression doctest) on Ubuntu 10.04 x86_64 (`ptestlong` run twice, the second time with #9898 applied and the lcalc p5 spkg from #9845). (Also, the new spkg is "sane".)

Since Jeroen has already successfully tested it on a PPC Mac (big-endian), and John on t2.math (I assume in 32-bit big-endian mode), and the patch to `get_dlcflags` has been reverted to what we already tested (which definitely works on MacOS X 10.**4** **Intel**, too), I set this to "positive review".

---
*Although I must admit I haven't yet verified that the newly updated upstream source files claiming to fix [PARI bug #1079](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1079) achieve the same as the previously applied Sage patches ("segmentation fault in `rnfequation(,,1)` over Q").



---

archive/issue_comments_113952.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2010-09-19T23:24:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113952",
    "user": "https://github.com/nexttime"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_113953.json:
```json
{
    "body": "**Reviewer:** John Palmieri, Leif Leonhardy",
    "created_at": "2010-09-19T23:24:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113953",
    "user": "https://github.com/nexttime"
}
```

**Reviewer:** John Palmieri, Leif Leonhardy



---

archive/issue_comments_113954.json:
```json
{
    "body": "<a id='comment:32'></a>\nReplying to [leif](#comment%3A31):\n> I haven't yet verified that the newly updated upstream source files claiming to fix [PARI bug #1079](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1079) achieve the same as the previously applied Sage patches [...]\n\n\nAs far as I can tell they do. (And do not introduce other changes.)",
    "created_at": "2010-09-20T00:44:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113954",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:32'></a>
Replying to [leif](#comment%3A31):
> I haven't yet verified that the newly updated upstream source files claiming to fix [PARI bug #1079](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1079) achieve the same as the previously applied Sage patches [...]


As far as I can tell they do. (And do not introduce other changes.)



---

archive/issue_comments_113955.json:
```json
{
    "body": "<a id='comment:33'></a>\nI also tested this again on t2 (32-bit) and also an a 10.6 OS X Intel Mac, just to make sure the new Darwin-only changes didn't mess that up.  No problems in either case.",
    "created_at": "2010-09-20T01:49:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113955",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:33'></a>
I also tested this again on t2 (32-bit) and also an a 10.6 OS X Intel Mac, just to make sure the new Darwin-only changes didn't mess that up.  No problems in either case.



---

archive/issue_comments_113956.json:
```json
{
    "body": "**Merged:** sage-4.6.alpha2",
    "created_at": "2010-09-29T08:40:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9876#issuecomment-113956",
    "user": "https://github.com/qed777"
}
```

**Merged:** sage-4.6.alpha2



---

archive/issue_events_029664.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2010-09-29T08:40:07Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/9876",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9876#event-29664"
}
```
