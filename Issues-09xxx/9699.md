# Issue 9699: Barycentric embedding for planar graphs.

archive/issues_009699.json:
```json
{
    "assignees": [
        "https://github.com/jasongrout",
        "https://github.com/nathanncohen",
        "https://github.com/rlmill"
    ],
    "body": "<div id=\"comment:0\"></div>\n\nPositions of vertices returned by planar_layout can be set to have the vertices of an equilateral triangle as exterior vertices.\n\nApply only [attachment: trac_9699_4.patch](https://github.com/sagemath/sage/files/ticket9699/trac_9699_4.patch.gz)\n\nCC:  @rlmill @boothby\n\nComponent: **graph theory**\n\nAuthor: **Fidel Barrera-Cruz**\n\nReviewer: **Nathann Cohen, Robert Miller**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/9699_\n\n",
    "created_at": "2010-08-06T19:24:42Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/needs%20work"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Barycentric embedding for planar graphs.",
    "type": "issue",
    "updated_at": "2022-12-29T01:28:25Z",
    "url": "https://github.com/sagemath/sage/issues/9699",
    "user": "https://github.com/sagetrac-fidelbarrera"
}
```
<div id="comment:0"></div>

Positions of vertices returned by planar_layout can be set to have the vertices of an equilateral triangle as exterior vertices.

Apply only [attachment: trac_9699_4.patch](https://github.com/sagemath/sage/files/ticket9699/trac_9699_4.patch.gz)

CC:  @rlmill @boothby

Component: **graph theory**

Author: **Fidel Barrera-Cruz**

Reviewer: **Nathann Cohen, Robert Miller**

_Issue created by migration from https://trac.sagemath.org/ticket/9699_





---

archive/issue_events_124142.json:
```json
{
    "actor": "https://github.com/sagetrac-fidelbarrera",
    "created_at": "2010-08-06T19:24:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "milestone_number": null,
    "milestone_title": "sage-4.6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9699#event-124142"
}
```



---

archive/issue_events_124143.json:
```json
{
    "actor": "https://github.com/sagetrac-fidelbarrera",
    "created_at": "2010-08-06T19:24:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9699#event-124143"
}
```



---

archive/issue_events_124144.json:
```json
{
    "actor": "https://github.com/sagetrac-fidelbarrera",
    "created_at": "2010-08-06T19:24:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9699#event-124144"
}
```



---

archive/issue_events_124145.json:
```json
{
    "actor": "https://github.com/sagetrac-fidelbarrera",
    "created_at": "2010-08-06T19:24:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9699#event-124145"
}
```



---

archive/issue_events_124146.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2010-08-06T19:24:42Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "subject": "https://github.com/sagetrac-fidelbarrera",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9699#event-124146"
}
```



---

archive/issue_events_124147.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2010-08-06T19:24:42Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "subject": "https://github.com/sagetrac-fidelbarrera",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9699#event-124147"
}
```



---

archive/issue_events_124148.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-08-06T19:24:42Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "subject": "https://github.com/sagetrac-fidelbarrera",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9699#event-124148"
}
```



---

archive/issue_events_124149.json:
```json
{
    "actor": "https://github.com/sagetrac-fidelbarrera",
    "created_at": "2010-08-06T19:26:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9699#event-124149"
}
```



---

archive/issue_comments_085097.json:
```json
{
    "body": "Attachment: **[trac_9699.patch.gz](https://github.com/sagemath/sage/files/ticket9699/trac_9699.patch.gz)**\n\nUpdated patch, it includes an example.",
    "created_at": "2010-08-07T00:20:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9699#issuecomment-85097",
    "user": "https://github.com/sagetrac-fidelbarrera"
}
```

Attachment: **[trac_9699.patch.gz](https://github.com/sagemath/sage/files/ticket9699/trac_9699.patch.gz)**

Updated patch, it includes an example.



---

archive/issue_comments_085098.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI wonder if the default for `barycentric` shouldn't be True instead of False. It looks a bit nicer that way, so why not make it the default?",
    "created_at": "2010-08-07T12:00:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9699#issuecomment-85098",
    "user": "https://github.com/rlmill"
}
```

<div id="comment:3" align="right">comment:3</div>

I wonder if the default for `barycentric` shouldn't be True instead of False. It looks a bit nicer that way, so why not make it the default?



---

archive/issue_comments_085099.json:
```json
{
    "body": "Attachment: **[trac_9699_2.patch.gz](https://github.com/sagemath/sage/files/ticket9699/trac_9699_2.patch.gz)**\n\nPlease apply instead of trac_9699.patch.",
    "created_at": "2010-08-08T01:59:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9699#issuecomment-85099",
    "user": "https://github.com/sagetrac-fidelbarrera"
}
```

Attachment: **[trac_9699_2.patch.gz](https://github.com/sagemath/sage/files/ticket9699/trac_9699_2.patch.gz)**

Please apply instead of trac_9699.patch.



---

archive/issue_comments_085100.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nReplying to [@rlmill](#comment%3A3):\n> I wonder if the default for `barycentric` shouldn't be True instead of False. It looks a bit nicer that way, so why not make it the default?\n\nThe option `barycentric` is now set to True by default.",
    "created_at": "2010-08-08T02:02:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9699#issuecomment-85100",
    "user": "https://github.com/sagetrac-fidelbarrera"
}
```

<div id="comment:4" align="right">comment:4</div>

Replying to [@rlmill](#comment%3A3):
> I wonder if the default for `barycentric` shouldn't be True instead of False. It looks a bit nicer that way, so why not make it the default?

The option `barycentric` is now set to True by default.



---

archive/issue_comments_085101.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@rlmill](#comment%3A3):\n> I wonder if the default for `barycentric` shouldn't be True instead of False. It looks a bit nicer that way, so why not make it the default?\n\nSorry, I forgot to be more specific. Please apply trac_9699_2.patch instead of trac_9699.patch.\n\n\nIn trac_9699_2.patch the option `barycentric` is now set to be True by default.",
    "created_at": "2010-08-08T02:06:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9699#issuecomment-85101",
    "user": "https://github.com/sagetrac-fidelbarrera"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@rlmill](#comment%3A3):
> I wonder if the default for `barycentric` shouldn't be True instead of False. It looks a bit nicer that way, so why not make it the default?

Sorry, I forgot to be more specific. Please apply trac_9699_2.patch instead of trac_9699.patch.


In trac_9699_2.patch the option `barycentric` is now set to be True by default.



---

archive/issue_events_124150.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2010-09-05T07:49:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9699#event-124150"
}
```



---

archive/issue_events_124151.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2010-09-05T07:49:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9699#event-124151"
}
```



---

archive/issue_comments_085102.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nWell, if such an option is the default, shouldn't we just replace the actual code with it ? As these barycentric coordinates are as valid as the previous ones in the general case, I except the code used by barycentric = False never to be used again... `:-p`\n\nWhat about just replacing the current code to compute barycentric coordinates, and add this information as notes in the documentation ?\n\nNathann",
    "created_at": "2010-09-05T07:49:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9699#issuecomment-85102",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:6" align="right">comment:6</div>

Well, if such an option is the default, shouldn't we just replace the actual code with it ? As these barycentric coordinates are as valid as the previous ones in the general case, I except the code used by barycentric = False never to be used again... `:-p`

What about just replacing the current code to compute barycentric coordinates, and add this information as notes in the documentation ?

Nathann



---

archive/issue_comments_085103.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@nathanncohen](#comment%3A6):\n\n> Well, if such an option is the default, shouldn't we just replace the actual code with it ?\n\nI think the previous implementation features interesting properties. It provided a straightline embedding in an O(n) by O(n) grid, so in particular all the coordinates are integers. Would you still suggest to replace the code completely?\n\nFidel",
    "created_at": "2010-09-13T01:45:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9699#issuecomment-85103",
    "user": "https://github.com/sagetrac-fidelbarrera"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@nathanncohen](#comment%3A6):

> Well, if such an option is the default, shouldn't we just replace the actual code with it ?

I think the previous implementation features interesting properties. It provided a straightline embedding in an O(n) by O(n) grid, so in particular all the coordinates are integers. Would you still suggest to replace the code completely?

Fidel



---

archive/issue_events_124152.json:
```json
{
    "actor": "https://github.com/sagetrac-fidelbarrera",
    "created_at": "2010-09-13T01:45:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9699#event-124152"
}
```



---

archive/issue_events_124153.json:
```json
{
    "actor": "https://github.com/sagetrac-fidelbarrera",
    "created_at": "2010-09-13T01:45:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9699#event-124153"
}
```



---

archive/issue_comments_085104.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\n> I think the previous implementation features interesting properties. It provided a straightline embedding in an O(n) by O(n) grid, so in particular all the coordinates are integers. Would you still suggest to replace the code completely?\n\nNo, not anymore... But now I would suggest to mention these properties in the docstring. Sorry for asking it this late, but I am concerned about avoiding to have in Sage at the same time two pieces of code doing the same thing in different ways, and writing it in such a way that one of them is never used.. That's why I wondered whether it would be better to completely replace the current implementation with yours instead of having two version. If the current version has properties that yours do not have, then you are right : it should remain available, but this is not very useful if nobody knows these properties exists.... Hence, where you documented the keyword ``barycentric`` \n\n```\n- ``barycentric`` - whether or not to use barycentric coordinates. \n```\n\nit would be nice to also mention that setting it to ``None`` means having an embedding in a O(n)*O(n) grid with integer coordinates, as you just taught me.. Otherwise it's very unlikely people would disable a feature with no computation time to earn...nothing `:-)`\n\nNathann",
    "created_at": "2010-09-13T07:08:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9699#issuecomment-85104",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:8" align="right">comment:8</div>

> I think the previous implementation features interesting properties. It provided a straightline embedding in an O(n) by O(n) grid, so in particular all the coordinates are integers. Would you still suggest to replace the code completely?

No, not anymore... But now I would suggest to mention these properties in the docstring. Sorry for asking it this late, but I am concerned about avoiding to have in Sage at the same time two pieces of code doing the same thing in different ways, and writing it in such a way that one of them is never used.. That's why I wondered whether it would be better to completely replace the current implementation with yours instead of having two version. If the current version has properties that yours do not have, then you are right : it should remain available, but this is not very useful if nobody knows these properties exists.... Hence, where you documented the keyword ``barycentric`` 

```
- ``barycentric`` - whether or not to use barycentric coordinates. 
```

it would be nice to also mention that setting it to ``None`` means having an embedding in a O(n)*O(n) grid with integer coordinates, as you just taught me.. Otherwise it's very unlikely people would disable a feature with no computation time to earn...nothing `:-)`

Nathann



---

archive/issue_comments_085105.json:
```json
{
    "body": "Please apply instead of previous patches.",
    "created_at": "2010-09-22T04:06:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9699#issuecomment-85105",
    "user": "https://github.com/sagetrac-fidelbarrera"
}
```

Please apply instead of previous patches.



---

archive/issue_comments_085106.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nAttachment: **[trac_9699_3.patch.gz](https://github.com/sagemath/sage/files/ticket9699/trac_9699_3.patch.gz)**\n\nReplying to [@nathanncohen](#comment%3A8):\n\n> But now I would suggest to mention these properties in the docstring.\n\nThese properties are now mentioned in the docstring :)\n\nFidel",
    "created_at": "2010-09-22T04:09:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9699#issuecomment-85106",
    "user": "https://github.com/sagetrac-fidelbarrera"
}
```

<div id="comment:9" align="right">comment:9</div>

Attachment: **[trac_9699_3.patch.gz](https://github.com/sagemath/sage/files/ticket9699/trac_9699_3.patch.gz)**

Replying to [@nathanncohen](#comment%3A8):

> But now I would suggest to mention these properties in the docstring.

These properties are now mentioned in the docstring :)

Fidel



---

archive/issue_comments_085107.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nHello !!\n\nI noticed a typo in your patch \n\n```\nthen coordinates will bi in the grid. \n```\n\nSo I first wrote a small one to fix it, then ended up fixing one or two other docstrings, or adding to them the information you had put in the first description or ``barycentric``.. Well, if somebody can test my patch, he can set this ticket to \"positive review\", as yours is good to go !\n\nThanksssssssssssssss ! :-)\n\nNathann",
    "created_at": "2010-09-22T08:14:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9699#issuecomment-85107",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:10" align="right">comment:10</div>

Hello !!

I noticed a typo in your patch 

```
then coordinates will bi in the grid. 
```

So I first wrote a small one to fix it, then ended up fixing one or two other docstrings, or adding to them the information you had put in the first description or ``barycentric``.. Well, if somebody can test my patch, he can set this ticket to "positive review", as yours is good to go !

Thanksssssssssssssss ! :-)

Nathann



---

archive/issue_comments_085108.json:
```json
{
    "body": "Attachment: **[trac_9699 - docstring fixes.patch.gz](https://github.com/sagemath/sage/files/ticket9699/2f4645b666efaf2320a8166032ae0008.gz)**",
    "created_at": "2010-09-22T08:15:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9699#issuecomment-85108",
    "user": "https://github.com/nathanncohen"
}
```

Attachment: **[trac_9699 - docstring fixes.patch.gz](https://github.com/sagemath/sage/files/ticket9699/2f4645b666efaf2320a8166032ae0008.gz)**



---

archive/issue_comments_085109.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nDoctest fail:\n\n```\nsage -t -long ./sage/graphs/generic_graph.py\n**********************************************************************\nFile \"/home/rlmill/sage-4.6/devel/sage-main/sage/graphs/generic_graph.py\", line 2620:\n    sage: g.layout(layout = \"planar\", save_pos = True)\nExpected:\n    {0: [1, 1], 1: [2, 2], 2: [3, 2], 3: [1, 4], 4: [5, 1], 5: [0, 5], 6: [1, 0]}\nGot:\n    {0: (-0.433012701892, -0.25), 1: (1.11022302463e-16, -7.40148683083e-17), 2: (0.144337567297, 0.25), 3: (0.433012701892, -0.25), 4: [0.0, 1.0], 5: [0.866025403784, -0.5], 6: [-0.866025403784, -0.5]}\n**********************************************************************\n```\n\nAlso, all of the positions should be the same format: here some are tuples and others are lists.",
    "created_at": "2010-11-11T13:15:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9699#issuecomment-85109",
    "user": "https://github.com/rlmill"
}
```

<div id="comment:11" align="right">comment:11</div>

Doctest fail:

```
sage -t -long ./sage/graphs/generic_graph.py
**********************************************************************
File "/home/rlmill/sage-4.6/devel/sage-main/sage/graphs/generic_graph.py", line 2620:
    sage: g.layout(layout = "planar", save_pos = True)
Expected:
    {0: [1, 1], 1: [2, 2], 2: [3, 2], 3: [1, 4], 4: [5, 1], 5: [0, 5], 6: [1, 0]}
Got:
    {0: (-0.433012701892, -0.25), 1: (1.11022302463e-16, -7.40148683083e-17), 2: (0.144337567297, 0.25), 3: (0.433012701892, -0.25), 4: [0.0, 1.0], 5: [0.866025403784, -0.5], 6: [-0.866025403784, -0.5]}
**********************************************************************
```

Also, all of the positions should be the same format: here some are tuples and others are lists.



---

archive/issue_comments_085110.json:
```json
{
    "body": "Reviewer: **Nathann Cohen, Robert Miller**",
    "created_at": "2010-11-11T13:15:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9699#issuecomment-85110",
    "user": "https://github.com/rlmill"
}
```

Reviewer: **Nathann Cohen, Robert Miller**



---

archive/issue_events_124154.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-11-11T13:15:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9699#event-124154"
}
```



---

archive/issue_events_124155.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-11-11T13:15:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9699#event-124155"
}
```



---

archive/issue_comments_085111.json:
```json
{
    "body": "Attachment: **[trac_9699_4.patch.gz](https://github.com/sagemath/sage/files/ticket9699/trac_9699_4.patch.gz)**\n\nPlease apply instead of previous patches.",
    "created_at": "2010-11-21T04:01:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9699#issuecomment-85111",
    "user": "https://github.com/sagetrac-fidelbarrera"
}
```

Attachment: **[trac_9699_4.patch.gz](https://github.com/sagemath/sage/files/ticket9699/trac_9699_4.patch.gz)**

Please apply instead of previous patches.



---

archive/issue_events_124156.json:
```json
{
    "actor": "https://github.com/sagetrac-fidelbarrera",
    "created_at": "2010-11-21T04:04:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9699#event-124156"
}
```



---

archive/issue_events_124157.json:
```json
{
    "actor": "https://github.com/sagetrac-fidelbarrera",
    "created_at": "2010-11-21T04:04:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9699#event-124157"
}
```



---

archive/issue_comments_085112.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nHello,\n\nThe patch file trac_9699_4.patch includes a fix to the doctest fail. It also includes a fix to the problem having tuples and lists for the positions. Now, all of the positions are lists.\n\nFidel",
    "created_at": "2010-11-21T04:04:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9699#issuecomment-85112",
    "user": "https://github.com/sagetrac-fidelbarrera"
}
```

<div id="comment:12" align="right">comment:12</div>

Hello,

The patch file trac_9699_4.patch includes a fix to the doctest fail. It also includes a fix to the problem having tuples and lists for the positions. Now, all of the positions are lists.

Fidel



---

archive/issue_events_124158.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-11-26T16:23:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9699#event-124158"
}
```



---

archive/issue_events_124159.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-11-26T16:23:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9699#event-124159"
}
```



---

archive/issue_comments_085113.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n Positions of vertices returned by planar_layout can be set to have the vertices of an equilateral triangle as exterior vertices.\n+\n+Apply only [attachment: trac_9699_4.patch](https://github.com/sagemath/sage/files/ticket9699/trac_9699_4.patch.gz)\n``````\n",
    "created_at": "2010-11-26T16:23:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9699#issuecomment-85113",
    "user": "https://github.com/rlmill"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 Positions of vertices returned by planar_layout can be set to have the vertices of an equilateral triangle as exterior vertices.
+
+Apply only [attachment: trac_9699_4.patch](https://github.com/sagemath/sage/files/ticket9699/trac_9699_4.patch.gz)
``````




---

archive/issue_events_124160.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-11-26T22:22:36Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "milestone_number": null,
    "milestone_title": "sage-4.6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9699#event-124160"
}
```



---

archive/issue_events_124161.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-11-26T22:22:36Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "milestone_number": null,
    "milestone_title": "sage-4.6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9699#event-124161"
}
```



---

archive/issue_comments_085114.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nHas this been tested on various systems?  The kind of output like\n\n```\n{0: [0.0, 1.0], 1: [0.866025403784, -0.5], 2: [-0.866025403784, -0.5], 3: [0.433012701892, -0.25], 4: [-0.288675134595, -1.85037170771e-16], 5: [0.288675134595, 3.70074341542e-17], 6: [0.144337567297, 0.25]}\n```\nhas a tendency of being quite system-dependent because of precision issues.\n\nIn any case, if all you did was add an option, why did the output change?",
    "created_at": "2010-11-26T22:25:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9699#issuecomment-85114",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:15" align="right">comment:15</div>

Has this been tested on various systems?  The kind of output like

```
{0: [0.0, 1.0], 1: [0.866025403784, -0.5], 2: [-0.866025403784, -0.5], 3: [0.433012701892, -0.25], 4: [-0.288675134595, -1.85037170771e-16], 5: [0.288675134595, 3.70074341542e-17], 6: [0.144337567297, 0.25]}
```
has a tendency of being quite system-dependent because of precision issues.

In any case, if all you did was add an option, why did the output change?



---

archive/issue_events_124162.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-11-26T22:25:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9699#event-124162"
}
```



---

archive/issue_events_124163.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-11-26T22:25:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9699#event-124163"
}
```



---

archive/issue_comments_085115.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@jdemeyer](#comment%3A15):\n> Has this been tested on various systems?  \n\nI have not tested it on various systems.\n\n> In any case, if all you did was add an option, why did the output change?\n\nThe option barycentric was no just added, it was made the default option, as suggested by rlm in \n\n[https://github.com/sagemath/sage/issues/9699?replyto=15#comment:3](https://github.com/sagemath/sage/issues/9699?replyto=15#comment:3)",
    "created_at": "2010-11-26T23:16:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9699#issuecomment-85115",
    "user": "https://github.com/sagetrac-fidelbarrera"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@jdemeyer](#comment%3A15):
> Has this been tested on various systems?  

I have not tested it on various systems.

> In any case, if all you did was add an option, why did the output change?

The option barycentric was no just added, it was made the default option, as suggested by rlm in 

[https://github.com/sagemath/sage/issues/9699?replyto=15#comment:3](https://github.com/sagemath/sage/issues/9699?replyto=15#comment:3)



---

archive/issue_events_124164.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-11-26T23:39:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9699#event-124164"
}
```



---

archive/issue_events_124165.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-11-26T23:39:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9699#event-124165"
}
```



---

archive/issue_comments_085116.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@jdemeyer](#comment%3A15):\n> \n> ```\n> {0: [0.0, 1.0], 1: [0.866025403784, -0.5], 2: [-0.866025403784, -0.5], 3: [0.433012701892, -0.25], 4: [-0.288675134595, -1.85037170771e-16], 5: [0.288675134595, 3.70074341542e-17], 6: [0.144337567297, 0.25]}\n> ```\n\nJeroen is right. You should replace things like `0.866025403784` with `0.86...` so that numerical issues don't crop up.",
    "created_at": "2010-11-26T23:39:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9699#issuecomment-85116",
    "user": "https://github.com/rlmill"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@jdemeyer](#comment%3A15):
> 
> ```
> {0: [0.0, 1.0], 1: [0.866025403784, -0.5], 2: [-0.866025403784, -0.5], 3: [0.433012701892, -0.25], 4: [-0.288675134595, -1.85037170771e-16], 5: [0.288675134595, 3.70074341542e-17], 6: [0.144337567297, 0.25]}
> ```

Jeroen is right. You should replace things like `0.866025403784` with `0.86...` so that numerical issues don't crop up.



---

archive/issue_comments_085117.json:
```json
{
    "body": "Attachment: **[trac_9699_5.patch.gz](https://github.com/sagemath/sage/files/ticket9699/trac_9699_5.patch.gz)**\n\nPlease apply instead of previous patches.",
    "created_at": "2010-11-27T04:31:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9699#issuecomment-85117",
    "user": "https://github.com/sagetrac-fidelbarrera"
}
```

Attachment: **[trac_9699_5.patch.gz](https://github.com/sagemath/sage/files/ticket9699/trac_9699_5.patch.gz)**

Please apply instead of previous patches.



---

archive/issue_events_124166.json:
```json
{
    "actor": "https://github.com/sagetrac-fidelbarrera",
    "created_at": "2010-11-27T04:33:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9699#event-124166"
}
```



---

archive/issue_events_124167.json:
```json
{
    "actor": "https://github.com/sagetrac-fidelbarrera",
    "created_at": "2010-11-27T04:33:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9699#event-124167"
}
```



---

archive/issue_comments_085118.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@rlmill](#comment%3A17): \n> Jeroen is right. You should replace things like `0.866025403784` with `0.86...` so that numerical issues don't crop up. \n\nReplaced things like `0.866025403784` with `0.86...`.\n\nPlease see trac_9699_5.patch instead of previous versions.",
    "created_at": "2010-11-27T04:33:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9699#issuecomment-85118",
    "user": "https://github.com/sagetrac-fidelbarrera"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@rlmill](#comment%3A17): 
> Jeroen is right. You should replace things like `0.866025403784` with `0.86...` so that numerical issues don't crop up. 

Replaced things like `0.866025403784` with `0.86...`.

Please see trac_9699_5.patch instead of previous versions.



---

archive/issue_comments_085119.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nOkay, I tested all long doctests on a 64 bit Linux machine, and all passed. I also tested long doctests in `sage/graphs` on a 32 bit Linux machine, and again all tests pass. Things look good.",
    "created_at": "2010-11-28T16:32:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9699#issuecomment-85119",
    "user": "https://github.com/rlmill"
}
```

<div id="comment:19" align="right">comment:19</div>

Okay, I tested all long doctests on a 64 bit Linux machine, and all passed. I also tested long doctests in `sage/graphs` on a 32 bit Linux machine, and again all tests pass. Things look good.



---

archive/issue_events_124168.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-11-28T16:32:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9699#event-124168"
}
```



---

archive/issue_events_124169.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-11-28T16:32:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9699#event-124169"
}
```



---

archive/issue_events_124170.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-11-28T16:59:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9699#event-124170"
}
```



---

archive/issue_events_124171.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-11-28T16:59:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9699#event-124171"
}
```



---

archive/issue_comments_085120.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nIt seems I pressed submit too soon. Indeed all tests pass on the 64 bit system.\n\nHowever on the 32-bit system, things seem to freeze at the following test:\n\n```\nTrying:\n    g = graphs.BalancedTree(Integer(3),Integer(4))###line 2658:_sage_    >>> g = graphs.BalancedTree(3,4)\nExpecting nothing\nok\nTrying:\n    g.set_planar_positions(test=True)###line 2659:_sage_    >>> g.set_planar_positions(test=True)\nExpecting:\n    True\n```",
    "created_at": "2010-11-28T16:59:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9699#issuecomment-85120",
    "user": "https://github.com/rlmill"
}
```

<div id="comment:20" align="right">comment:20</div>

It seems I pressed submit too soon. Indeed all tests pass on the 64 bit system.

However on the 32-bit system, things seem to freeze at the following test:

```
Trying:
    g = graphs.BalancedTree(Integer(3),Integer(4))###line 2658:_sage_    >>> g = graphs.BalancedTree(3,4)
Expecting nothing
ok
Trying:
    g.set_planar_positions(test=True)###line 2659:_sage_    >>> g.set_planar_positions(test=True)
Expecting:
    True
```



---

archive/issue_comments_085121.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nUgh. Once again I spoke too soon.\n\nThe real problem is just that the doctests take *much* longer after the patch than before.\n\nOn the 32 bit system it went from 243.2 s for `generic_graph.py` up to 623.8 s after the patch.\n\nOn the (much faster) 64 bit system it was 130.4 s before and 441.2 s after.\n\nThis definitely counts as a regression, and I can't let things through with so much of a slowdown.",
    "created_at": "2010-11-28T17:12:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9699#issuecomment-85121",
    "user": "https://github.com/rlmill"
}
```

<div id="comment:21" align="right">comment:21</div>

Ugh. Once again I spoke too soon.

The real problem is just that the doctests take *much* longer after the patch than before.

On the 32 bit system it went from 243.2 s for `generic_graph.py` up to 623.8 s after the patch.

On the (much faster) 64 bit system it was 130.4 s before and 441.2 s after.

This definitely counts as a regression, and I can't let things through with so much of a slowdown.



---

archive/issue_events_124172.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9699#event-124172"
}
```



---

archive/issue_events_124173.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9699#event-124173"
}
```



---

archive/issue_events_124174.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9699#event-124174"
}
```



---

archive/issue_events_124175.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9699#event-124175"
}
```



---

archive/issue_events_124176.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9699#event-124176"
}
```



---

archive/issue_events_124177.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9699#event-124177"
}
```



---

archive/issue_events_124178.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9699#event-124178"
}
```



---

archive/issue_events_124179.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9699#event-124179"
}
```



---

archive/issue_events_124180.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-29T01:28:25Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/9699",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9699#event-124180"
}
```
