# Issue 9943: ECL is linking to libintl.so but does not need to (at least on OpenSolaris anyway)

archive/issues_009942.json:
```json
{
    "body": "http://blogs.sun.com/rie/entry/tt_dependencies_tt_define_what\n\nshows a way of finding out any libraries that executables link to, where there are no references to what's in the library. \n\nECL would appear to have 3 in the current version of Sage, though it is reduced to 1 in the latest `git` snapshot of ECL I downloaded yesterday:\n\n```\ndrkirkby@hawk:~/ecl$ ldd -r -u build/bin/ecl\nlibecl.so =>build/libecl.so\nlibdl.so.1 => /lib/libdl.so.1\nlibm.so.2 => /lib/libm.so.2\nlibsocket.so.1 => /lib/libsocket.so.1\nlibnsl.so.1 => /lib/libnsl.so.1\nlibintl.so.1 => /lib/libintl.so.1\nlibc.so.1 => /lib/libc.so.1\nlibgmp.so.10 => /usr/local/gcc-4.5.0/lib/libgmp.so.10\nlibmp.so.2 => /lib/libmp.so.2\nlibmd.so.1 => /lib/libmd.so.1\nlibscf.so.1 => /lib/libscf.so.1\nlibgcc_s.so.1 => /usr/local/gcc-4.5.0/lib/libgcc_s.so.1\nlibuutil.so.1 => /lib/libuutil.so.1\nlibgen.so.1 => /lib/libgen.so.1\nlibsmbios.so.1 => /usr/lib/libsmbios.so.1\n\n   unused object=/lib/libintl.so.1\n```\n\nNote the unused library\n\n```\nunused object=/lib/libintl.so.1\n```\n\nECL should only link to these libraries if it needs them, which I expect it does with some options. There were no options given to configure here. \n\nDave \n\nAssignee: GeorgSWeber\n\nCC:  @dimpase\n\nUpstream: Reported upstream. No feedback yet.\n\nResolution: invalid\n\nIssue created by migration from https://trac.sagemath.org/ticket/9943\n\n",
    "closed_at": "2020-10-03T07:29:22Z",
    "created_at": "2010-09-18T20:39:23Z",
    "labels": [
        "component: build",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "ECL is linking to libintl.so but does not need to (at least on OpenSolaris anyway)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/9943",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```
http://blogs.sun.com/rie/entry/tt_dependencies_tt_define_what

shows a way of finding out any libraries that executables link to, where there are no references to what's in the library. 

ECL would appear to have 3 in the current version of Sage, though it is reduced to 1 in the latest `git` snapshot of ECL I downloaded yesterday:

```
drkirkby@hawk:~/ecl$ ldd -r -u build/bin/ecl
libecl.so =>build/libecl.so
libdl.so.1 => /lib/libdl.so.1
libm.so.2 => /lib/libm.so.2
libsocket.so.1 => /lib/libsocket.so.1
libnsl.so.1 => /lib/libnsl.so.1
libintl.so.1 => /lib/libintl.so.1
libc.so.1 => /lib/libc.so.1
libgmp.so.10 => /usr/local/gcc-4.5.0/lib/libgmp.so.10
libmp.so.2 => /lib/libmp.so.2
libmd.so.1 => /lib/libmd.so.1
libscf.so.1 => /lib/libscf.so.1
libgcc_s.so.1 => /usr/local/gcc-4.5.0/lib/libgcc_s.so.1
libuutil.so.1 => /lib/libuutil.so.1
libgen.so.1 => /lib/libgen.so.1
libsmbios.so.1 => /usr/lib/libsmbios.so.1

   unused object=/lib/libintl.so.1
```

Note the unused library

```
unused object=/lib/libintl.so.1
```

ECL should only link to these libraries if it needs them, which I expect it does with some options. There were no options given to configure here. 

Dave 

Assignee: GeorgSWeber

CC:  @dimpase

Upstream: Reported upstream. No feedback yet.

Resolution: invalid

Issue created by migration from https://trac.sagemath.org/ticket/9943





---

archive/issue_comments_103325.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -5,46 +5,36 @@\n ECL would appear to have 3 in the current version of Sage, though it is reduced to 2 in the latest \\`git\\` snapshot of ECL I downloaded yesterday:\n \n \\`\\`\\`\n-drkirkby@hawk:~/ecl$ ldd -u -r ./build/bin/ecl\n-\tlibecl.so =>\t (file not found)\n+drkirkby@hawk:~/ecl$ ldd -r -u build/bin/ecl\n+\tlibecl.so =>\t build/libecl.so\n \tlibdl.so.1 =>\t /lib/libdl.so.1\n \tlibm.so.2 =>\t /lib/libm.so.2\n \tlibsocket.so.1 =>\t /lib/libsocket.so.1\n \tlibnsl.so.1 =>\t /lib/libnsl.so.1\n \tlibintl.so.1 =>\t /lib/libintl.so.1\n \tlibc.so.1 =>\t /lib/libc.so.1\n+\tlibgmp.so.10 =>\t /usr/local/gcc-4.5.0/lib/libgmp.so.10\n \tlibmp.so.2 =>\t /lib/libmp.so.2\n \tlibmd.so.1 =>\t /lib/libmd.so.1\n \tlibscf.so.1 =>\t /lib/libscf.so.1\n+\tlibgcc_s.so.1 =>\t /usr/local/gcc-4.5.0/lib/libgcc_s.so.1\n \tlibuutil.so.1 =>\t /lib/libuutil.so.1\n \tlibgen.so.1 =>\t /lib/libgen.so.1\n \tlibsmbios.so.1 =>\t /usr/lib/libsmbios.so.1\n-\tsymbol not found: cl_env_p\t\t(build/bin/ecl)\n-\tsymbol not found: cl_symbols\t\t(build/bin/ecl)\n-\tsymbol not found: cl_boot\t\t(build/bin/ecl)\n-\tsymbol not found: _ecl_frs_push\t\t(build/bin/ecl)\n-\tsymbol not found: read_VV\t\t(build/bin/ecl)\n-\tsymbol not found: make_simple_base_string\t\t(build/bin/ecl)\n-\tsymbol not found: si_select_package\t\t(build/bin/ecl)\n-\tsymbol not found: si_string_to_object\t\t(build/bin/ecl)\n-\tsymbol not found: si_safe_eval\t\t(build/bin/ecl)\n-\tsymbol not found: si_exit\t\t(build/bin/ecl)\n \n-   unused object=/lib/libsocket.so.1\n    unused object=/lib/libintl.so.1\n-drkirkby@hawk:~/ecl$ \n+\n \\`\\`\\`\n \n-Note there are two unused libraries:\n+Note the unused library\n \n \\`\\`\\`\n-   unused object=/lib/libsocket.so.1\n    unused object=/lib/libintl.so.1\n \\`\\`\\`\n \n ECL should only link to these libraries if it needs them, which I expect it does with some options. There were no options given to configure here. \n \n-Dave\n+Dave \n \n Comment: 1\n \n```\n",
    "created_at": "2010-09-18T20:45:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9943#issuecomment-103325",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

Description changed:
```diff
--- 
+++ 
@@ -5,46 +5,36 @@
 ECL would appear to have 3 in the current version of Sage, though it is reduced to 2 in the latest \`git\` snapshot of ECL I downloaded yesterday:
 
 \`\`\`
-drkirkby@hawk:~/ecl$ ldd -u -r ./build/bin/ecl
-	libecl.so =>	 (file not found)
+drkirkby@hawk:~/ecl$ ldd -r -u build/bin/ecl
+	libecl.so =>	 build/libecl.so
 	libdl.so.1 =>	 /lib/libdl.so.1
 	libm.so.2 =>	 /lib/libm.so.2
 	libsocket.so.1 =>	 /lib/libsocket.so.1
 	libnsl.so.1 =>	 /lib/libnsl.so.1
 	libintl.so.1 =>	 /lib/libintl.so.1
 	libc.so.1 =>	 /lib/libc.so.1
+	libgmp.so.10 =>	 /usr/local/gcc-4.5.0/lib/libgmp.so.10
 	libmp.so.2 =>	 /lib/libmp.so.2
 	libmd.so.1 =>	 /lib/libmd.so.1
 	libscf.so.1 =>	 /lib/libscf.so.1
+	libgcc_s.so.1 =>	 /usr/local/gcc-4.5.0/lib/libgcc_s.so.1
 	libuutil.so.1 =>	 /lib/libuutil.so.1
 	libgen.so.1 =>	 /lib/libgen.so.1
 	libsmbios.so.1 =>	 /usr/lib/libsmbios.so.1
-	symbol not found: cl_env_p		(build/bin/ecl)
-	symbol not found: cl_symbols		(build/bin/ecl)
-	symbol not found: cl_boot		(build/bin/ecl)
-	symbol not found: _ecl_frs_push		(build/bin/ecl)
-	symbol not found: read_VV		(build/bin/ecl)
-	symbol not found: make_simple_base_string		(build/bin/ecl)
-	symbol not found: si_select_package		(build/bin/ecl)
-	symbol not found: si_string_to_object		(build/bin/ecl)
-	symbol not found: si_safe_eval		(build/bin/ecl)
-	symbol not found: si_exit		(build/bin/ecl)
 
-   unused object=/lib/libsocket.so.1
    unused object=/lib/libintl.so.1
-drkirkby@hawk:~/ecl$ 
+
 \`\`\`
 
-Note there are two unused libraries:
+Note the unused library
 
 \`\`\`
-   unused object=/lib/libsocket.so.1
    unused object=/lib/libintl.so.1
 \`\`\`
 
 ECL should only link to these libraries if it needs them, which I expect it does with some options. There were no options given to configure here. 
 
-Dave
+Dave 
 
 Comment: 1
 
```




---

archive/issue_comments_103326.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,40 @@\n+http://blogs.sun.com/rie/entry/tt_dependencies_tt_define_what\n \n+shows a way of finding out any libraries that executables link to, where there are no references to what's in the library. \n+\n+ECL would appear to have 3 in the current version of Sage, though it is reduced to 1 in the latest \\`git\\` snapshot of ECL I downloaded yesterday:\n+\n+\\`\\`\\`\n+drkirkby@hawk:~/ecl$ ldd -r -u build/bin/ecl\n+\tlibecl.so =>\t build/libecl.so\n+\tlibdl.so.1 =>\t /lib/libdl.so.1\n+\tlibm.so.2 =>\t /lib/libm.so.2\n+\tlibsocket.so.1 =>\t /lib/libsocket.so.1\n+\tlibnsl.so.1 =>\t /lib/libnsl.so.1\n+\tlibintl.so.1 =>\t /lib/libintl.so.1\n+\tlibc.so.1 =>\t /lib/libc.so.1\n+\tlibgmp.so.10 =>\t /usr/local/gcc-4.5.0/lib/libgmp.so.10\n+\tlibmp.so.2 =>\t /lib/libmp.so.2\n+\tlibmd.so.1 =>\t /lib/libmd.so.1\n+\tlibscf.so.1 =>\t /lib/libscf.so.1\n+\tlibgcc_s.so.1 =>\t /usr/local/gcc-4.5.0/lib/libgcc_s.so.1\n+\tlibuutil.so.1 =>\t /lib/libuutil.so.1\n+\tlibgen.so.1 =>\t /lib/libgen.so.1\n+\tlibsmbios.so.1 =>\t /usr/lib/libsmbios.so.1\n+\n+   unused object=/lib/libintl.so.1\n+\n+\\`\\`\\`\n+\n+Note the unused library\n+\n+\\`\\`\\`\n+   unused object=/lib/libintl.so.1\n+\\`\\`\\`\n+\n+ECL should only link to these libraries if it needs them, which I expect it does with some options. There were no options given to configure here. \n+\n+Dave \n \n Comment: 1\n \n```\n",
    "created_at": "2010-09-18T20:46:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9943#issuecomment-103326",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,40 @@
+http://blogs.sun.com/rie/entry/tt_dependencies_tt_define_what
 
+shows a way of finding out any libraries that executables link to, where there are no references to what's in the library. 
+
+ECL would appear to have 3 in the current version of Sage, though it is reduced to 1 in the latest \`git\` snapshot of ECL I downloaded yesterday:
+
+\`\`\`
+drkirkby@hawk:~/ecl$ ldd -r -u build/bin/ecl
+	libecl.so =>	 build/libecl.so
+	libdl.so.1 =>	 /lib/libdl.so.1
+	libm.so.2 =>	 /lib/libm.so.2
+	libsocket.so.1 =>	 /lib/libsocket.so.1
+	libnsl.so.1 =>	 /lib/libnsl.so.1
+	libintl.so.1 =>	 /lib/libintl.so.1
+	libc.so.1 =>	 /lib/libc.so.1
+	libgmp.so.10 =>	 /usr/local/gcc-4.5.0/lib/libgmp.so.10
+	libmp.so.2 =>	 /lib/libmp.so.2
+	libmd.so.1 =>	 /lib/libmd.so.1
+	libscf.so.1 =>	 /lib/libscf.so.1
+	libgcc_s.so.1 =>	 /usr/local/gcc-4.5.0/lib/libgcc_s.so.1
+	libuutil.so.1 =>	 /lib/libuutil.so.1
+	libgen.so.1 =>	 /lib/libgen.so.1
+	libsmbios.so.1 =>	 /usr/lib/libsmbios.so.1
+
+   unused object=/lib/libintl.so.1
+
+\`\`\`
+
+Note the unused library
+
+\`\`\`
+   unused object=/lib/libintl.so.1
+\`\`\`
+
+ECL should only link to these libraries if it needs them, which I expect it does with some options. There were no options given to configure here. 
+
+Dave 
 
 Comment: 1
 
```




---

archive/issue_events_025077.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9943",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9943#event-25077"
}
```



---

archive/issue_events_025078.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9943",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9943#event-25078"
}
```



---

archive/issue_events_025079.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9943",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9943#event-25079"
}
```



---

archive/issue_events_025080.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9943",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9943#event-25080"
}
```



---

archive/issue_events_025081.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9943",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9943#event-25081"
}
```



---

archive/issue_events_025082.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9943",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9943#event-25082"
}
```



---

archive/issue_events_025083.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9943",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9943#event-25083"
}
```



---

archive/issue_comments_103327.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,39 @@\n+http://blogs.sun.com/rie/entry/tt_dependencies_tt_define_what\n \n+shows a way of finding out any libraries that executables link to, where there are no references to what's in the library. \n+\n+ECL would appear to have 3 in the current version of Sage, though it is reduced to 1 in the latest \\`git\\` snapshot of ECL I downloaded yesterday:\n+\n+\\`\\`\\`\n+drkirkby@hawk:~/ecl$ ldd -r -u build/bin/ecl\n+libecl.so =>build/libecl.so\n+libdl.so.1 => /lib/libdl.so.1\n+libm.so.2 => /lib/libm.so.2\n+libsocket.so.1 => /lib/libsocket.so.1\n+libnsl.so.1 => /lib/libnsl.so.1\n+libintl.so.1 => /lib/libintl.so.1\n+libc.so.1 => /lib/libc.so.1\n+libgmp.so.10 => /usr/local/gcc-4.5.0/lib/libgmp.so.10\n+libmp.so.2 => /lib/libmp.so.2\n+libmd.so.1 => /lib/libmd.so.1\n+libscf.so.1 => /lib/libscf.so.1\n+libgcc_s.so.1 => /usr/local/gcc-4.5.0/lib/libgcc_s.so.1\n+libuutil.so.1 => /lib/libuutil.so.1\n+libgen.so.1 => /lib/libgen.so.1\n+libsmbios.so.1 => /usr/lib/libsmbios.so.1\n+\n+   unused object=/lib/libintl.so.1\n+\\`\\`\\`\n+\n+Note the unused library\n+\n+\\`\\`\\`\n+unused object=/lib/libintl.so.1\n+\\`\\`\\`\n+\n+ECL should only link to these libraries if it needs them, which I expect it does with some options. There were no options given to configure here. \n+\n+Dave \n \n Comment: 1\n \n```\n",
    "created_at": "2015-09-06T17:20:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9943#issuecomment-103327",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,39 @@
+http://blogs.sun.com/rie/entry/tt_dependencies_tt_define_what
 
+shows a way of finding out any libraries that executables link to, where there are no references to what's in the library. 
+
+ECL would appear to have 3 in the current version of Sage, though it is reduced to 1 in the latest \`git\` snapshot of ECL I downloaded yesterday:
+
+\`\`\`
+drkirkby@hawk:~/ecl$ ldd -r -u build/bin/ecl
+libecl.so =>build/libecl.so
+libdl.so.1 => /lib/libdl.so.1
+libm.so.2 => /lib/libm.so.2
+libsocket.so.1 => /lib/libsocket.so.1
+libnsl.so.1 => /lib/libnsl.so.1
+libintl.so.1 => /lib/libintl.so.1
+libc.so.1 => /lib/libc.so.1
+libgmp.so.10 => /usr/local/gcc-4.5.0/lib/libgmp.so.10
+libmp.so.2 => /lib/libmp.so.2
+libmd.so.1 => /lib/libmd.so.1
+libscf.so.1 => /lib/libscf.so.1
+libgcc_s.so.1 => /usr/local/gcc-4.5.0/lib/libgcc_s.so.1
+libuutil.so.1 => /lib/libuutil.so.1
+libgen.so.1 => /lib/libgen.so.1
+libsmbios.so.1 => /usr/lib/libsmbios.so.1
+
+   unused object=/lib/libintl.so.1
+\`\`\`
+
+Note the unused library
+
+\`\`\`
+unused object=/lib/libintl.so.1
+\`\`\`
+
+ECL should only link to these libraries if it needs them, which I expect it does with some options. There were no options given to configure here. 
+
+Dave 
 
 Comment: 1
 
```




---

archive/issue_events_025084.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-17T16:38:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9943",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9943#event-25084"
}
```



---

archive/issue_events_025085.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-17T16:38:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9943",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9943#event-25085"
}
```



---

archive/issue_comments_103328.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-08-17T16:38:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9943#issuecomment-103328",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_103329.json:
```json
{
    "body": "<a id='comment:10'></a>Outdated spkg or build system ticket, should be closed",
    "created_at": "2020-08-17T16:38:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9943#issuecomment-103329",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'></a>Outdated spkg or build system ticket, should be closed



---

archive/issue_events_025086.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-10-03T07:29:22Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/9943",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9943#event-25086"
}
```



---

archive/issue_comments_103330.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2020-10-03T07:29:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9943#issuecomment-103330",
    "user": "https://github.com/fchapoton"
}
```

Resolution: invalid
