# Issue 9167: Resolve ecl.dll conflict on Cygwin

archive/issues_009167.json:
```json
{
    "assignees": [],
    "body": "Though the C-library interface to ECL builds on Cygwin, it does not work at all.  All tests fail:\n\n```\nsage: import sage.libs.ecl\n---------------------------------------------------------------------------\nImportError                               Traceback (most recent call last)\n\n/home/wstein/sage-4.4.3/<ipython console> in <module>()\n\nImportError: No such process\nsage: \n```\n\nThe reason of this is a name clash: there are two different libraries called `ecl.dll`.\nOne in `SAGE_LOCAL/lib/` and one in `SAGE_LOCAL/lib/python/site-packages/sage/libs/`.\nIt is the second one whose importing fails because it should be linked to the first one, but `cygcheck` shows that this dependency is resolved to itself!\nThis is of course dysfunctional, whence the import failure.\n\nThe easiest solution would be to rename `sage/libs/ecl.pyx` to something else, thus avoiding a name clash.\nThe solution proposed here is different and more indirect:\nPatch ECL build system so that it follows the name convention proposed by Cygwin.\nThe shared library itself is now in `SAGE_LOCAL/bin/cygecl.dll`.\nIn addition, an import file is created in `SAGE_LOCAL/lib/libecl.dll.a`.\n\nAn updated spkg, based on the one in #13324, is available at\n[http://boxen.math.washington.edu/home/jpflori/ecl-12.12.1.p1.spkg](http://boxen.math.washington.edu/home/jpflori/ecl-12.12.1.p1.spkg)\n\n**Reported upstream**: \u200bhttps://gitlab.com/embeddable-common-lisp/ecl/issues/235\n\nDepends on #13324\nDepends on #13860\n\nCC:  @mwhansen @dimpase @jpflori @jdemeyer\n\nKeywords: **cygwin spkg ecl**\n\nUpstream: **Reported upstream. No feedback yet.**\n\nReviewer: **Karl-Dieter Crisman, Jeroen Demeyer**\n\nAuthor: **Jean-Pierre Flori**\n\nMerged: **sage-5.7.beta1**\n\nComponent: **porting: Cygwin**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/9167_\n\n",
    "closed_at": "2013-01-26T09:52:37Z",
    "created_at": "2010-06-07T04:25:41Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20porting%3A%20cygwin",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/c%3A%20porting%3A%20cygwin"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Resolve ecl.dll conflict on Cygwin",
    "type": "issue",
    "updated_at": "2016-03-21T13:08:58Z",
    "url": "https://github.com/sagemath/sage/issues/9167",
    "user": "https://github.com/williamstein"
}
```
Though the C-library interface to ECL builds on Cygwin, it does not work at all.  All tests fail:

```
sage: import sage.libs.ecl
---------------------------------------------------------------------------
ImportError                               Traceback (most recent call last)

/home/wstein/sage-4.4.3/<ipython console> in <module>()

ImportError: No such process
sage: 
```

The reason of this is a name clash: there are two different libraries called `ecl.dll`.
One in `SAGE_LOCAL/lib/` and one in `SAGE_LOCAL/lib/python/site-packages/sage/libs/`.
It is the second one whose importing fails because it should be linked to the first one, but `cygcheck` shows that this dependency is resolved to itself!
This is of course dysfunctional, whence the import failure.

The easiest solution would be to rename `sage/libs/ecl.pyx` to something else, thus avoiding a name clash.
The solution proposed here is different and more indirect:
Patch ECL build system so that it follows the name convention proposed by Cygwin.
The shared library itself is now in `SAGE_LOCAL/bin/cygecl.dll`.
In addition, an import file is created in `SAGE_LOCAL/lib/libecl.dll.a`.

An updated spkg, based on the one in #13324, is available at
[http://boxen.math.washington.edu/home/jpflori/ecl-12.12.1.p1.spkg](http://boxen.math.washington.edu/home/jpflori/ecl-12.12.1.p1.spkg)

**Reported upstream**: â€‹https://gitlab.com/embeddable-common-lisp/ecl/issues/235

Depends on #13324
Depends on #13860

CC:  @mwhansen @dimpase @jpflori @jdemeyer

Keywords: **cygwin spkg ecl**

Upstream: **Reported upstream. No feedback yet.**

Reviewer: **Karl-Dieter Crisman, Jeroen Demeyer**

Author: **Jean-Pierre Flori**

Merged: **sage-5.7.beta1**

Component: **porting: Cygwin**

_Issue created by migration from https://trac.sagemath.org/ticket/9167_





---

archive/issue_events_117551.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-06-07T04:25:41Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "milestone_number": null,
    "milestone_title": "sage-5.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9167#event-117551"
}
```



---

archive/issue_events_117552.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-06-07T04:25:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20porting%3A%20cygwin",
    "label_color": "000080",
    "label_name": "c: porting: cygwin",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9167#event-117552"
}
```



---

archive/issue_events_117553.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-06-07T04:25:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9167#event-117553"
}
```



---

archive/issue_events_117554.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-06-07T04:25:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9167#event-117554"
}
```



---

archive/issue_comments_076430.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nI don't know if it's related, but gcc reports are couple of rather serious looking warning messages with ecl. \n\n```\n/export/home/drkirkby/sage-4.5.1/spkg/build/ecl-10.2.1.p1/src/src/c/dpp.c:678: warning: too few arguments for format\n/export/home/drkirkby/sage-4.5.1/spkg/build/ecl-10.2.1.p1/src/src/c/dpp.c:680: warning: too many arguments for format\n```\n\nI'm surprised that gcc does not reject such code and refuse to compile it. \n\nDave",
    "created_at": "2010-08-02T04:07:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76430",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:1" align="right">comment:1</div>

I don't know if it's related, but gcc reports are couple of rather serious looking warning messages with ecl. 

```
/export/home/drkirkby/sage-4.5.1/spkg/build/ecl-10.2.1.p1/src/src/c/dpp.c:678: warning: too few arguments for format
/export/home/drkirkby/sage-4.5.1/spkg/build/ecl-10.2.1.p1/src/src/c/dpp.c:680: warning: too many arguments for format
```

I'm surprised that gcc does not reject such code and refuse to compile it. 

Dave



---

archive/issue_comments_076431.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI can confirm this on the most recent versions of everything at [the port wiki page](../wiki/CygwinPort).    \n\nThat is bad, because now the default Maxima (and hence ECL) for calculus **is** the library one.",
    "created_at": "2011-08-01T16:01:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76431",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:2" align="right">comment:2</div>

I can confirm this on the most recent versions of everything at [the port wiki page](../wiki/CygwinPort).    

That is bad, because now the default Maxima (and hence ECL) for calculus **is** the library one.



---

archive/issue_comments_076432.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nTwo possibly irrelevant data points:\n* Tab-completion on `from sage.libs.[tab]` gives `sage.libs.ecl` on Mac, not on Cygwin (it also doesn't give `.libecm` or `.ratpoints`, though at least ratpoints works).\n* The directory `$SAGE_LOCAL/lib/python/site-packages/sage/libs/` DOES include `ecl.pyx` and `ecl.dll`, so the library seems to be there, if that is where such imports actually come from (which I'm not sure about).",
    "created_at": "2011-08-08T14:57:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76432",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:3" align="right">comment:3</div>

Two possibly irrelevant data points:
* Tab-completion on `from sage.libs.[tab]` gives `sage.libs.ecl` on Mac, not on Cygwin (it also doesn't give `.libecm` or `.ratpoints`, though at least ratpoints works).
* The directory `$SAGE_LOCAL/lib/python/site-packages/sage/libs/` DOES include `ecl.pyx` and `ecl.dll`, so the library seems to be there, if that is where such imports actually come from (which I'm not sure about).



---

archive/issue_comments_076433.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nA possibly useful explanation of something similar from the [Cygwin list](http://www.mail-archive.com/cygwin@cygwin.com/msg115538.html):\n\n```\nNow that they are in the cygwin dll, libgfortran doesn't need\n> to provide them anymore but this has the unfortunate side-effect of breaking\n> old executables, since on Windows an imported function reference in an\n> executable has to specify not just the function name but also the particular\n> DLL from which the import comes.\n>\n>  I imagine that on ELF platforms where the executable just has a list of\n> undefined functions and a list of shared libs to load and the dynamic linker\n> just satisfies an undefined symbol from whichever lib it first comes across a\n> definition of it, this probably works without anything needing changing.  But\n> we're stuck I'm afraid when exports move around like this.\n```",
    "created_at": "2011-08-08T15:42:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76433",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:4" align="right">comment:4</div>

A possibly useful explanation of something similar from the [Cygwin list](http://www.mail-archive.com/cygwin@cygwin.com/msg115538.html):

```
Now that they are in the cygwin dll, libgfortran doesn't need
> to provide them anymore but this has the unfortunate side-effect of breaking
> old executables, since on Windows an imported function reference in an
> executable has to specify not just the function name but also the particular
> DLL from which the import comes.
>
>  I imagine that on ELF platforms where the executable just has a list of
> undefined functions and a list of shared libs to load and the dynamic linker
> just satisfies an undefined symbol from whichever lib it first comes across a
> definition of it, this probably works without anything needing changing.  But
> we're stuck I'm afraid when exports move around like this.
```



---

archive/issue_comments_076434.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\n[This stackoverflow question](http://stackoverflow.com/questions/2879246/psycopg2-on-cygwin-no-such-process) also might have a useful piece of information.  I don't know how to open/read dlls, though, nor exactly how to trace why it is that it's not finding things.",
    "created_at": "2011-08-08T15:46:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76434",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:5" align="right">comment:5</div>

[This stackoverflow question](http://stackoverflow.com/questions/2879246/psycopg2-on-cygwin-no-such-process) also might have a useful piece of information.  I don't know how to open/read dlls, though, nor exactly how to trace why it is that it's not finding things.



---

archive/issue_comments_076435.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\n[Cygwin's cygcheck information](http://www.cygwin.com/cygwin-ug-net/using-utils.html) was much more helpful, and I find two things.\n* When looking at `$SAGE_LOCAL/libs/ecl.dll`, \n\n```\ncygcheck: track_down:  could not find cyggc-1.dll\n```\n   shows up a lot.   I have `cyggcc_s-1.dll`, `cyggcj-*`, `cyggcr-0.dll` and some others, but not this, in `/bin/`.\n* When looking at `devel/sage/build/lib.cygwin.../sage/libs/ecl.dll`, I find\n\n```\ncygcheck: track_down:  could not find csage.dll\n```\n   This file is in `devel/sage/c_lib` and `local/lib`, but maybe that's not enough?",
    "created_at": "2011-08-08T16:02:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76435",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:6" align="right">comment:6</div>

[Cygwin's cygcheck information](http://www.cygwin.com/cygwin-ug-net/using-utils.html) was much more helpful, and I find two things.
* When looking at `$SAGE_LOCAL/libs/ecl.dll`, 

```
cygcheck: track_down:  could not find cyggc-1.dll
```
   shows up a lot.   I have `cyggcc_s-1.dll`, `cyggcj-*`, `cyggcr-0.dll` and some others, but not this, in `/bin/`.
* When looking at `devel/sage/build/lib.cygwin.../sage/libs/ecl.dll`, I find

```
cygcheck: track_down:  could not find csage.dll
```
   This file is in `devel/sage/c_lib` and `local/lib`, but maybe that's not enough?



---

archive/issue_comments_076436.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@kcrisman](#comment:6):\n> [Cygwin's cygcheck information](http://www.cygwin.com/cygwin-ug-net/using-utils.html) was much more helpful, and I find two things.\n> * When looking at `$SAGE_LOCAL/libs/ecl.dll`, \n> \n> ```\n> cygcheck: track_down:  could not find cyggc-1.dll\n> ```\n>    shows up a lot.   I have `cyggcc_s-1.dll`, `cyggcj-*`, `cyggcr-0.dll` and some others, but not this, in `/bin/`.\n\nMine, at least, does NOT have `cyggc-1.dll` anywhere.  Apparently it does have libgc (this is a garbage collector) which I've seen connected to `cyggc-1.dll` on [the Cygwin list](http://www.mail-archive.com/cygwin-apps@cygwin.com/msg06654.html).  But I don't see how I could have `libgc` without `cyggc-1.dll` if that were the case... I guess the only thing to try is upgrading my libgc and adding libgc-devel, though I'm a little scared!",
    "created_at": "2011-08-08T16:29:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76436",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@kcrisman](#comment:6):
> [Cygwin's cygcheck information](http://www.cygwin.com/cygwin-ug-net/using-utils.html) was much more helpful, and I find two things.
> * When looking at `$SAGE_LOCAL/libs/ecl.dll`, 
> 
> ```
> cygcheck: track_down:  could not find cyggc-1.dll
> ```
>    shows up a lot.   I have `cyggcc_s-1.dll`, `cyggcj-*`, `cyggcr-0.dll` and some others, but not this, in `/bin/`.

Mine, at least, does NOT have `cyggc-1.dll` anywhere.  Apparently it does have libgc (this is a garbage collector) which I've seen connected to `cyggc-1.dll` on [the Cygwin list](http://www.mail-archive.com/cygwin-apps@cygwin.com/msg06654.html).  But I don't see how I could have `libgc` without `cyggc-1.dll` if that were the case... I guess the only thing to try is upgrading my libgc and adding libgc-devel, though I'm a little scared!



---

archive/issue_comments_076437.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI can't even figure out where this is created!  Unless \n\n```\ncygwin* | mingw* | pw32*)\n  version_type=windows\n  need_version=no\n  need_lib_prefix=no\n  case $GCC,$host_os in\n  yes,cygwin*)\n    library_names_spec='$libname.dll.a'\n    soname_spec='`echo ${libname} | sed -e 's/^lib/cyg/'``echo ${release} | sed -e 's/[.]/-/g'`${versuffix}.dll'\n    postinstall_cmds='dlpath=`bash 2>&1 -c '\\''. $dir/${file}i;echo \\$dlname'\\''`~\n      dldir=$destdir/`dirname \\$dlpath`~\n      test -d \\$dldir || mkdir -p \\$dldir~\n      $install_prog .libs/$dlname \\$dldir/$dlname'\n    postuninstall_cmds='dldll=`bash 2>&1 -c '\\''. $file; echo \\$dlname'\\''`~\n      dlpath=$dir/\\$dldll~\n       $rm \\$dlpath'\n```\nand a few similar things in the configure and aclocal files.  I can't quite parse those sed things, though I am pretty sure this wouldn't produce that - but I'm not sure what `${release}` would be in this context.",
    "created_at": "2011-08-08T16:57:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76437",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:8" align="right">comment:8</div>

I can't even figure out where this is created!  Unless 

```
cygwin* | mingw* | pw32*)
  version_type=windows
  need_version=no
  need_lib_prefix=no
  case $GCC,$host_os in
  yes,cygwin*)
    library_names_spec='$libname.dll.a'
    soname_spec='`echo ${libname} | sed -e 's/^lib/cyg/'``echo ${release} | sed -e 's/[.]/-/g'`${versuffix}.dll'
    postinstall_cmds='dlpath=`bash 2>&1 -c '\''. $dir/${file}i;echo \$dlname'\''`~
      dldir=$destdir/`dirname \$dlpath`~
      test -d \$dldir || mkdir -p \$dldir~
      $install_prog .libs/$dlname \$dldir/$dlname'
    postuninstall_cmds='dldll=`bash 2>&1 -c '\''. $file; echo \$dlname'\''`~
      dlpath=$dir/\$dldll~
       $rm \$dlpath'
```
and a few similar things in the configure and aclocal files.  I can't quite parse those sed things, though I am pretty sure this wouldn't produce that - but I'm not sure what `${release}` would be in this context.



---

archive/issue_comments_076438.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@kcrisman](#comment:8):\n>\n\n```\n...\n    soname_spec='`echo ${libname} | sed -e 's/^lib/cyg/'``echo ${release} | sed -e 's/[.]/-/g'`${versuffix}.dll'\n...\n```\n> and a few similar things in the configure and aclocal files.\n\nWhere does this come from? ECL?\n\nThis *might* be the cause of the problem, since the `sed` command also replaces the `lib` prefix by `cyg`.",
    "created_at": "2011-08-08T18:56:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76438",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@kcrisman](#comment:8):
>

```
...
    soname_spec='`echo ${libname} | sed -e 's/^lib/cyg/'``echo ${release} | sed -e 's/[.]/-/g'`${versuffix}.dll'
...
```
> and a few similar things in the configure and aclocal files.

Where does this come from? ECL?

This *might* be the cause of the problem, since the `sed` command also replaces the `lib` prefix by `cyg`.



---

archive/issue_comments_076439.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nP.S.:\n\nThe `nm` and `objdump` utilities from the GNU `binutils` package might be helpful to inspect libraries etc.\n\nI vaguely remember there was also `dlltool` (perhaps from the MinGW project though).",
    "created_at": "2011-08-08T19:02:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76439",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:10" align="right">comment:10</div>

P.S.:

The `nm` and `objdump` utilities from the GNU `binutils` package might be helpful to inspect libraries etc.

I vaguely remember there was also `dlltool` (perhaps from the MinGW project though).



---

archive/issue_comments_076440.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@nexttime](#comment:9):\n> Replying to [@kcrisman](#comment:8):\n> >\n\n> ```\n> ...\n>     soname_spec='`echo ${libname} | sed -e 's/^lib/cyg/'``echo ${release} | sed -e 's/[.]/-/g'`${versuffix}.dll'\n> ...\n> ```\n> > and a few similar things in the configure and aclocal files.\n\n> \n> Where does this come from? ECL?\n\nNo!  This is from the configure file for libgc-6.4.1 or so - the Boehm GC, ported to Cygwin.  I have libgc, just not cyggc.\n\n> This *might* be the cause of the problem, since the `sed` command also replaces the `lib` prefix by `cyg`.\n\nRight, that is why I pointed to it.  But it doesn't seem to replace the `-6.4.1` (or `-7.1.1`, now) with `-1`, as far as I could tell.  And I didn't have anything like `cyggc-*` on it.  \n\nI'm almost done upgrading and adding `libgc-devel` on my Cygwin - which meant upgrading basically every single Cygwin package, because this Cygwin hadn't been changed in a year or more.  Hopefully won't break anything else, but probably will :(\n\nAs to the tools, I think that cygcheck helped a lot, so for now I'm going to stick with that because I actually sort of understand it :)",
    "created_at": "2011-08-08T19:09:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76440",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@nexttime](#comment:9):
> Replying to [@kcrisman](#comment:8):
> >

> ```
> ...
>     soname_spec='`echo ${libname} | sed -e 's/^lib/cyg/'``echo ${release} | sed -e 's/[.]/-/g'`${versuffix}.dll'
> ...
> ```
> > and a few similar things in the configure and aclocal files.

> 
> Where does this come from? ECL?

No!  This is from the configure file for libgc-6.4.1 or so - the Boehm GC, ported to Cygwin.  I have libgc, just not cyggc.

> This *might* be the cause of the problem, since the `sed` command also replaces the `lib` prefix by `cyg`.

Right, that is why I pointed to it.  But it doesn't seem to replace the `-6.4.1` (or `-7.1.1`, now) with `-1`, as far as I could tell.  And I didn't have anything like `cyggc-*` on it.  

I'm almost done upgrading and adding `libgc-devel` on my Cygwin - which meant upgrading basically every single Cygwin package, because this Cygwin hadn't been changed in a year or more.  Hopefully won't break anything else, but probably will :(

As to the tools, I think that cygcheck helped a lot, so for now I'm going to stick with that because I actually sort of understand it :)



---

archive/issue_comments_076441.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\n> Right, that is why I pointed to it.  But it doesn't seem to replace the `-6.4.1` (or `-7.1.1`, now) with `-1`, as far as I could tell.  And I didn't have anything like `cyggc-*` on it.  \n> \n> I'm almost done upgrading and adding `libgc-devel` on my Cygwin - which meant upgrading basically every single Cygwin package, because this Cygwin hadn't been changed in a year or more.  Hopefully won't break anything else, but probably will :(\n\nI think that libgc-devel was what it took to get this file.  However, the upgrade upgraded too much - see [this Cygwin list thread](http://cygwin.com/ml/cygwin/2011-03/msg00750.html) - so I had to downgrade libgfortran as described there, and gcc, and ....  Not for the last time, I have to say that Cygwin definitely is a moving target.",
    "created_at": "2011-08-08T20:21:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76441",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:12" align="right">comment:12</div>

> Right, that is why I pointed to it.  But it doesn't seem to replace the `-6.4.1` (or `-7.1.1`, now) with `-1`, as far as I could tell.  And I didn't have anything like `cyggc-*` on it.  
> 
> I'm almost done upgrading and adding `libgc-devel` on my Cygwin - which meant upgrading basically every single Cygwin package, because this Cygwin hadn't been changed in a year or more.  Hopefully won't break anything else, but probably will :(

I think that libgc-devel was what it took to get this file.  However, the upgrade upgraded too much - see [this Cygwin list thread](http://cygwin.com/ml/cygwin/2011-03/msg00750.html) - so I had to downgrade libgfortran as described there, and gcc, and ....  Not for the last time, I have to say that Cygwin definitely is a moving target.



---

archive/issue_comments_076442.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@kcrisman](#comment:12):\n> \n> > Right, that is why I pointed to it.  But it doesn't seem to replace the `-6.4.1` (or `-7.1.1`, now) with `-1`, as far as I could tell.  And I didn't have anything like `cyggc-*` on it.  \n> > \n> > I'm almost done upgrading and adding `libgc-devel` on my Cygwin - which meant upgrading basically every single Cygwin package, because this Cygwin hadn't been changed in a year or more.  Hopefully won't break anything else, but probably will :(\n\n> \n> I think that libgc-devel was what it took to get this file.  However, the upgrade upgraded too much - see [this Cygwin list thread](http://cygwin.com/ml/cygwin/2011-03/msg00750.html) - so I had to downgrade libgfortran as described there, and gcc, and ...\n\n...and I managed to toast my Cygwin lapack.  As far as I can tell I downgraded everything necessary to the right version, rebuilt lapack, rebooted, but still no go.  \n\n```\n$ python\n>>> import numpy\nImportError <snip>\n```\nNuts.  Note that fixing this for the Cygwin Python should fix it for Sage, I think, since we use the same Fortran stuff and even lapack (?), certainly BLAS/ATLAS.",
    "created_at": "2011-08-08T21:31:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76442",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@kcrisman](#comment:12):
> 
> > Right, that is why I pointed to it.  But it doesn't seem to replace the `-6.4.1` (or `-7.1.1`, now) with `-1`, as far as I could tell.  And I didn't have anything like `cyggc-*` on it.  
> > 
> > I'm almost done upgrading and adding `libgc-devel` on my Cygwin - which meant upgrading basically every single Cygwin package, because this Cygwin hadn't been changed in a year or more.  Hopefully won't break anything else, but probably will :(

> 
> I think that libgc-devel was what it took to get this file.  However, the upgrade upgraded too much - see [this Cygwin list thread](http://cygwin.com/ml/cygwin/2011-03/msg00750.html) - so I had to downgrade libgfortran as described there, and gcc, and ...

...and I managed to toast my Cygwin lapack.  As far as I can tell I downgraded everything necessary to the right version, rebuilt lapack, rebooted, but still no go.  

```
$ python
>>> import numpy
ImportError <snip>
```
Nuts.  Note that fixing this for the Cygwin Python should fix it for Sage, I think, since we use the same Fortran stuff and even lapack (?), certainly BLAS/ATLAS.



---

archive/issue_comments_076443.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nAfter a **lot** of trouble managing to get Cygwin shell to find lapack again, I definitely have the right files now.    We definitely need as at least part of the fix to add `libgc-devel` as a dependency.\n\nHowever, there is also still a problem that `cygcheck` finds all the needed dlls for the `ecl.dll` in `local/lib` and `local/bin`, but not for the ones in `devel/sage/build/sage/libs/`.  It cannot find `ecl.dll` or `csage.dll`.  Which seems weird, since those files certainly exist.  \n\nThis might be a `PATH` problem, judging by some similar issues elsewhere.  Unfortunately, `./sage -gdb` is no help here, nor is `./sage -ipython`.",
    "created_at": "2011-08-09T01:54:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76443",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:14" align="right">comment:14</div>

After a **lot** of trouble managing to get Cygwin shell to find lapack again, I definitely have the right files now.    We definitely need as at least part of the fix to add `libgc-devel` as a dependency.

However, there is also still a problem that `cygcheck` finds all the needed dlls for the `ecl.dll` in `local/lib` and `local/bin`, but not for the ones in `devel/sage/build/sage/libs/`.  It cannot find `ecl.dll` or `csage.dll`.  Which seems weird, since those files certainly exist.  

This might be a `PATH` problem, judging by some similar issues elsewhere.  Unfortunately, `./sage -gdb` is no help here, nor is `./sage -ipython`.



---

archive/issue_comments_076444.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\n> However, there is also still a problem that `cygcheck` finds all the needed dlls for the `ecl.dll` in `local/lib` and `local/bin`, but not for the ones in `devel/sage/build/sage/libs/`.  It cannot find `ecl.dll` or `csage.dll`.  Which seems weird, since those files certainly exist.  \n\nYeah, after a `./sage -br` it still looks like `csage.dll` is not being found for some reason.  Must be a path issue, I think.  Where do we set the Sage path?  It certainly doesn't include `local/lib`, but I don't know if that's really the problem.",
    "created_at": "2011-08-09T02:54:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76444",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:15" align="right">comment:15</div>

> However, there is also still a problem that `cygcheck` finds all the needed dlls for the `ecl.dll` in `local/lib` and `local/bin`, but not for the ones in `devel/sage/build/sage/libs/`.  It cannot find `ecl.dll` or `csage.dll`.  Which seems weird, since those files certainly exist.  

Yeah, after a `./sage -br` it still looks like `csage.dll` is not being found for some reason.  Must be a path issue, I think.  Where do we set the Sage path?  It certainly doesn't include `local/lib`, but I don't know if that's really the problem.



---

archive/issue_comments_076445.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@kcrisman](#comment:15):\n> > However, there is also still a problem that `cygcheck` finds all the needed dlls for the `ecl.dll` in `local/lib` and `local/bin`, but not for the ones in `devel/sage/build/sage/libs/`.  It cannot find `ecl.dll` or `csage.dll`.  Which seems weird, since those files certainly exist.  \n\n> \n> Yeah, after a `./sage -br` it still looks like `csage.dll` is not being found for some reason.  Must be a path issue, I think.  Where do we set the Sage path?\n\nIn `local/bin/sage-env`. You could special-case Cygwin there and add all directories that contain DLLs, as Windows treats them as executables.\n\n> It certainly doesn't include `local/lib`, but I don't know if that's really the problem.\n\nWell, before editing `sage-env`, you could just try modifying your `PATH` from the shell accordingly.",
    "created_at": "2011-08-09T03:36:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76445",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@kcrisman](#comment:15):
> > However, there is also still a problem that `cygcheck` finds all the needed dlls for the `ecl.dll` in `local/lib` and `local/bin`, but not for the ones in `devel/sage/build/sage/libs/`.  It cannot find `ecl.dll` or `csage.dll`.  Which seems weird, since those files certainly exist.  

> 
> Yeah, after a `./sage -br` it still looks like `csage.dll` is not being found for some reason.  Must be a path issue, I think.  Where do we set the Sage path?

In `local/bin/sage-env`. You could special-case Cygwin there and add all directories that contain DLLs, as Windows treats them as executables.

> It certainly doesn't include `local/lib`, but I don't know if that's really the problem.

Well, before editing `sage-env`, you could just try modifying your `PATH` from the shell accordingly.



---

archive/issue_comments_076446.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\n> > Yeah, after a `./sage -br` it still looks like `csage.dll` is not being found for some reason.  Must be a path issue, I think.  Where do we set the Sage path?\n\n> \n> In `local/bin/sage-env`. You could special-case Cygwin there and add all directories that contain DLLs, as Windows treats them as executables.\n> \n> > It certainly doesn't include `local/lib`, but I don't know if that's really the problem.\n\nWell, I have good news and bad news.  \n> Well, before editing `sage-env`, you could just try modifying your `PATH` from the shell accordingly.\n\n* Good news: editing `PATH` from the shell to include `local/lib` made cygcheck pass for these files.\n* News: `sage-env` includes\n\n```\nif [ \"$UNAME\" = \"CYGWIN\" ]; then\n    PATH=\"$PATH:$SAGE_LOCAL/lib\" && export PATH\nfi\n```\n* Bad news: even with this added to `PATH` *and* this being in the `sage-env`, I still have this problem.  I'm still pretty sure it's a path issue, but maybe they are in the wrong order or something?   I have no idea how complex this could get...",
    "created_at": "2011-08-09T13:10:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76446",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:17" align="right">comment:17</div>

> > Yeah, after a `./sage -br` it still looks like `csage.dll` is not being found for some reason.  Must be a path issue, I think.  Where do we set the Sage path?

> 
> In `local/bin/sage-env`. You could special-case Cygwin there and add all directories that contain DLLs, as Windows treats them as executables.
> 
> > It certainly doesn't include `local/lib`, but I don't know if that's really the problem.

Well, I have good news and bad news.  
> Well, before editing `sage-env`, you could just try modifying your `PATH` from the shell accordingly.

* Good news: editing `PATH` from the shell to include `local/lib` made cygcheck pass for these files.
* News: `sage-env` includes

```
if [ "$UNAME" = "CYGWIN" ]; then
    PATH="$PATH:$SAGE_LOCAL/lib" && export PATH
fi
```
* Bad news: even with this added to `PATH` *and* this being in the `sage-env`, I still have this problem.  I'm still pretty sure it's a path issue, but maybe they are in the wrong order or something?   I have no idea how complex this could get...



---

archive/issue_comments_076447.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\n> * News: `sage-env` includes\n\n\n```\nif [ \"$UNAME\" = \"CYGWIN\" ]; then\n    PATH=\"$PATH:$SAGE_LOCAL/lib\" && export PATH\nfi\n```\n> * Bad news: even with this added to `PATH` *and* this being in the `sage-env`, I still have this problem.  I'm still pretty sure \n\nFor some reason this is not actually in Sage's path, gotten by `sys.path` in the Sage session.  And adding it to `sys.path` didn't help, either.  What the heck is going on?",
    "created_at": "2011-08-09T15:05:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76447",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:18" align="right">comment:18</div>

> * News: `sage-env` includes


```
if [ "$UNAME" = "CYGWIN" ]; then
    PATH="$PATH:$SAGE_LOCAL/lib" && export PATH
fi
```
> * Bad news: even with this added to `PATH` *and* this being in the `sage-env`, I still have this problem.  I'm still pretty sure 

For some reason this is not actually in Sage's path, gotten by `sys.path` in the Sage session.  And adding it to `sys.path` didn't help, either.  What the heck is going on?



---

archive/issue_comments_076448.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nAnother possibility, suggested by [this thread](http://old.nabble.com/Re%3A-installing-pygtk-on-cygwin-td19560334.html#a20513293), is that there could be two of some file making things hard.  Interestingly, there are several ecl.dll's floating around (everywhere a libecl.{dylib,so} would live, I guess) and cygcheck gives different dependencies for each.",
    "created_at": "2011-08-09T15:52:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76448",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:19" align="right">comment:19</div>

Another possibility, suggested by [this thread](http://old.nabble.com/Re%3A-installing-pygtk-on-cygwin-td19560334.html#a20513293), is that there could be two of some file making things hard.  Interestingly, there are several ecl.dll's floating around (everywhere a libecl.{dylib,so} would live, I guess) and cygcheck gives different dependencies for each.



---

archive/issue_comments_076449.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@kcrisman](#comment:18):\n> > * News: `sage-env` includes\n\n\n```sh\nif [ \"$UNAME\" = \"CYGWIN\" ]; then\n    PATH=\"$PATH:$SAGE_LOCAL/lib\" && export PATH\nfi\n```\n\nYep, but this should IMHO be moved up in the file (including the definition of `UNAME`), in any case above\n\n```sh\nif [ \"$1\" = \"-short\" ]; then\n    return 0\nfi\n```\nand `$SAGE_LOCAL/lib` should be **pre**pended to pick up Sage's versions *first*.\n\n> For some reason this is not actually in Sage's path, gotten by `sys.path` in the Sage session.  And adding it to `sys.path` didn't help, either.  What the heck is going on?\n\nNo idea. What does `os.environ.get(\"PATH\")` give?\n\nI also don't know if we have to add some more or different things to `PYTHONPATH` on Cygwin.\n\nNote that e.g. `$SAGE_LOCAL/lib/python` (which is added to `PYTHONPATH` [if it is a directory] in `sage-env`) is a **symbolic link** on Linux etc. (pointing to `$SAGE_LOCAL/lib/python2.6`); I don't know if it is the real directory on Cygwin instead.",
    "created_at": "2011-08-09T17:36:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76449",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@kcrisman](#comment:18):
> > * News: `sage-env` includes


```sh
if [ "$UNAME" = "CYGWIN" ]; then
    PATH="$PATH:$SAGE_LOCAL/lib" && export PATH
fi
```

Yep, but this should IMHO be moved up in the file (including the definition of `UNAME`), in any case above

```sh
if [ "$1" = "-short" ]; then
    return 0
fi
```
and `$SAGE_LOCAL/lib` should be **pre**pended to pick up Sage's versions *first*.

> For some reason this is not actually in Sage's path, gotten by `sys.path` in the Sage session.  And adding it to `sys.path` didn't help, either.  What the heck is going on?

No idea. What does `os.environ.get("PATH")` give?

I also don't know if we have to add some more or different things to `PYTHONPATH` on Cygwin.

Note that e.g. `$SAGE_LOCAL/lib/python` (which is added to `PYTHONPATH` [if it is a directory] in `sage-env`) is a **symbolic link** on Linux etc. (pointing to `$SAGE_LOCAL/lib/python2.6`); I don't know if it is the real directory on Cygwin instead.



---

archive/issue_comments_076450.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\n> and `$SAGE_LOCAL/lib` should be **pre**pended to pick up Sage's versions *first*.\n\nThat sounds like a good idea.  But should it be before `$SAGE_ROOT` and `$SAGE_LOCAL/bin`?\n> > For some reason this is not actually in Sage's path, gotten by `sys.path` in the Sage session.  And adding it to `sys.path` didn't help, either.  What the heck is going on?\n\n> \n> No idea. What does `os.environ.get(\"PATH\")` give?\n\nThis gives what I would expect - Sage root, Sage local bin, usr/bin, some Cygwin stuff, a Lapack thing I had to add due to my carelessness, and then Sage local lib.\n> I also don't know if we have to add some more or different things to `PYTHONPATH` on Cygwin.\n\nThis is very sparse.  It is just the directory below.\n> Note that e.g. `$SAGE_LOCAL/lib/python` (which is added to `PYTHONPATH` [if it is a directory] in `sage-env`) is a **symbolic link** on Linux etc. (pointing to `$SAGE_LOCAL/lib/python2.6`); I don't know if it is the real directory on Cygwin instead.\n\nIt looks like it's the same on Cygwin.\n\nAnother interesting thing is that there are libntl.dll files in /local/bin and /local/lib.  Moving just one doesn't seem to do much - note that the bin one is the one imported usually, as in your comment above.  Furthermore, apparently only the ecl.dll in devel/sage/build/sage/libs needs libntl.dll and cyggmp, while the one in local/{bin,lib} just wants cyggmp-3.dll.\n\nAnyway, I guess I can move files around all day but I'm not getting any nearer.",
    "created_at": "2011-08-09T20:13:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76450",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:21" align="right">comment:21</div>

> and `$SAGE_LOCAL/lib` should be **pre**pended to pick up Sage's versions *first*.

That sounds like a good idea.  But should it be before `$SAGE_ROOT` and `$SAGE_LOCAL/bin`?
> > For some reason this is not actually in Sage's path, gotten by `sys.path` in the Sage session.  And adding it to `sys.path` didn't help, either.  What the heck is going on?

> 
> No idea. What does `os.environ.get("PATH")` give?

This gives what I would expect - Sage root, Sage local bin, usr/bin, some Cygwin stuff, a Lapack thing I had to add due to my carelessness, and then Sage local lib.
> I also don't know if we have to add some more or different things to `PYTHONPATH` on Cygwin.

This is very sparse.  It is just the directory below.
> Note that e.g. `$SAGE_LOCAL/lib/python` (which is added to `PYTHONPATH` [if it is a directory] in `sage-env`) is a **symbolic link** on Linux etc. (pointing to `$SAGE_LOCAL/lib/python2.6`); I don't know if it is the real directory on Cygwin instead.

It looks like it's the same on Cygwin.

Another interesting thing is that there are libntl.dll files in /local/bin and /local/lib.  Moving just one doesn't seem to do much - note that the bin one is the one imported usually, as in your comment above.  Furthermore, apparently only the ecl.dll in devel/sage/build/sage/libs needs libntl.dll and cyggmp, while the one in local/{bin,lib} just wants cyggmp-3.dll.

Anyway, I guess I can move files around all day but I'm not getting any nearer.



---

archive/issue_comments_076451.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nQuestion for Dima or others; is it possible that we have *too many* copies of the dlls?  Either that the ecl.dll files are in too many places - local/lib and local/bin - or that the extra libntl.dll files also are causing problems?  See #11635 for where this started - perhaps this is the cause of all the trouble?",
    "created_at": "2011-12-07T15:54:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76451",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:22" align="right">comment:22</div>

Question for Dima or others; is it possible that we have *too many* copies of the dlls?  Either that the ecl.dll files are in too many places - local/lib and local/bin - or that the extra libntl.dll files also are causing problems?  See #11635 for where this started - perhaps this is the cause of all the trouble?



---

archive/issue_comments_076452.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@kcrisman](#comment:22):\n> Question for Dima or others; is it possible that we have *too many* copies of the dlls?  Either that the ecl.dll files are in too many places - local/lib and local/bin - or that the extra libntl.dll files also are causing problems?  See #11635 for where this started - perhaps this is the cause of all the trouble?  \n\n\nfor the record, 2 different copies of ecl.dll in SAGE_ROOT/local/ are created; one in local/lib (and/or local/bin), created from ecl spkg, the other in local/lib/python2.6/site-packages/sage/libs/, which contains Sage/Python interface to ecl (I don't know details about how and when it is built).",
    "created_at": "2011-12-14T02:45:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76452",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@kcrisman](#comment:22):
> Question for Dima or others; is it possible that we have *too many* copies of the dlls?  Either that the ecl.dll files are in too many places - local/lib and local/bin - or that the extra libntl.dll files also are causing problems?  See #11635 for where this started - perhaps this is the cause of all the trouble?  


for the record, 2 different copies of ecl.dll in SAGE_ROOT/local/ are created; one in local/lib (and/or local/bin), created from ecl spkg, the other in local/lib/python2.6/site-packages/sage/libs/, which contains Sage/Python interface to ecl (I don't know details about how and when it is built).



---

archive/issue_comments_076453.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\n> for the record, 2 different copies of ecl.dll in SAGE_ROOT/local/ are created; one in local/lib (and/or local/bin), created from ecl spkg, the other in local/lib/python2.6/site-packages/sage/libs/, which contains Sage/Python interface to ecl (I don't know details about how and when it is built).\n\nRight, and the third one is the one which which yields \"No such process\".  \n\nAlthough just by chance I tried (in `./sage -ipython`) \n\n```\nfrom sage.matrix import matrix_integer_dense_hnf\nNameError: ZZ\n```\nfrom the import from `sage.libs.ntl.ntl_ZZ` even though\n\n```\nfrom sage.libs.ntl import *\nntl_ZZ\n```\nworks fine.  Still going to take a while to track all this down, sigh...\n\nWhat do you think about the possibility that it's just a path problem suggested above?  I just don't know enough about how all this works to be sure.",
    "created_at": "2011-12-14T02:50:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76453",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:24" align="right">comment:24</div>

> for the record, 2 different copies of ecl.dll in SAGE_ROOT/local/ are created; one in local/lib (and/or local/bin), created from ecl spkg, the other in local/lib/python2.6/site-packages/sage/libs/, which contains Sage/Python interface to ecl (I don't know details about how and when it is built).

Right, and the third one is the one which which yields "No such process".  

Although just by chance I tried (in `./sage -ipython`) 

```
from sage.matrix import matrix_integer_dense_hnf
NameError: ZZ
```
from the import from `sage.libs.ntl.ntl_ZZ` even though

```
from sage.libs.ntl import *
ntl_ZZ
```
works fine.  Still going to take a while to track all this down, sigh...

What do you think about the possibility that it's just a path problem suggested above?  I just don't know enough about how all this works to be sure.



---

archive/issue_comments_076454.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nHere's something interesting.\n\n```\nUser 1@GC02635 /home/SageUser/sage-4.7.2\n$ cygcheck local/bin/ecl.dll\nC:\\cygwin\\home\\SageUser\\sage-4.7.2\\local\\bin\\ecl.dll\n  C:\\cygwin\\bin\\cyggc-1.dll\n    C:\\cygwin\\bin\\cygwin1.dll\n      C:\\WINDOWS\\system32\\ADVAPI32.DLL\n        C:\\WINDOWS\\system32\\KERNEL32.dll\n          C:\\WINDOWS\\system32\\ntdll.dll\n        C:\\WINDOWS\\system32\\RPCRT4.dll\n          C:\\WINDOWS\\system32\\Secur32.dll\n    C:\\cygwin\\bin\\cyggcc_s-1.dll\n  C:\\cygwin\\bin\\cyggmp-3.dll\n  C:\\cygwin\\bin\\cygffi-4.dll\n\nUser 1@GC02635 /home/SageUser/sage-4.7.2\n$ cygcheck local/bin/ecl.exe\nC:\\cygwin\\home\\SageUser\\sage-4.7.2\\local\\bin\\ecl.exe\n  C:\\cygwin\\bin\\cygwin1.dll\n    C:\\WINDOWS\\system32\\ADVAPI32.DLL\n      C:\\WINDOWS\\system32\\KERNEL32.dll\n        C:\\WINDOWS\\system32\\ntdll.dll\n      C:\\WINDOWS\\system32\\RPCRT4.dll\n        C:\\WINDOWS\\system32\\Secur32.dll\ncygcheck: track_down: could not find ecl.dll\n\n```\nOr maybe it's boring.  At any rate, I find this weird.\n\nAnd here is the cygcheck for the offending dll.\n\n```\nUser 1@GC02635 /home/SageUser/sage-4.7.2/local/lib/python2.6/site-packages/sage/libs\n$ cygcheck ./ecl.dll\nC:\\cygwin\\home\\SageUser\\sage-4.7.2\\devel\\sage-main\\build\\sage\\libs\\ecl.dll\n  C:\\cygwin\\bin\\cygwin1.dll\n    C:\\WINDOWS\\system32\\ADVAPI32.DLL\n      C:\\WINDOWS\\system32\\KERNEL32.dll\n        C:\\WINDOWS\\system32\\ntdll.dll\n      C:\\WINDOWS\\system32\\RPCRT4.dll\n        C:\\WINDOWS\\system32\\Secur32.dll\n  C:\\cygwin\\home\\SageUser\\sage-4.7.2\\devel\\sage-main\\build\\sage\\libs\\ecl.dll\ncygcheck: track_down: could not find libpython2.6.dll\n\ncygcheck: track_down: could not find libpython2.6.dll\n\ncygcheck: track_down: could not find csage.dll\n\ncygcheck: track_down: could not find csage.dll\n\n```\nThat's a lot of things not to find.",
    "created_at": "2011-12-14T02:59:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76454",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:25" align="right">comment:25</div>

Here's something interesting.

```
User 1@GC02635 /home/SageUser/sage-4.7.2
$ cygcheck local/bin/ecl.dll
C:\cygwin\home\SageUser\sage-4.7.2\local\bin\ecl.dll
  C:\cygwin\bin\cyggc-1.dll
    C:\cygwin\bin\cygwin1.dll
      C:\WINDOWS\system32\ADVAPI32.DLL
        C:\WINDOWS\system32\KERNEL32.dll
          C:\WINDOWS\system32\ntdll.dll
        C:\WINDOWS\system32\RPCRT4.dll
          C:\WINDOWS\system32\Secur32.dll
    C:\cygwin\bin\cyggcc_s-1.dll
  C:\cygwin\bin\cyggmp-3.dll
  C:\cygwin\bin\cygffi-4.dll

User 1@GC02635 /home/SageUser/sage-4.7.2
$ cygcheck local/bin/ecl.exe
C:\cygwin\home\SageUser\sage-4.7.2\local\bin\ecl.exe
  C:\cygwin\bin\cygwin1.dll
    C:\WINDOWS\system32\ADVAPI32.DLL
      C:\WINDOWS\system32\KERNEL32.dll
        C:\WINDOWS\system32\ntdll.dll
      C:\WINDOWS\system32\RPCRT4.dll
        C:\WINDOWS\system32\Secur32.dll
cygcheck: track_down: could not find ecl.dll

```
Or maybe it's boring.  At any rate, I find this weird.

And here is the cygcheck for the offending dll.

```
User 1@GC02635 /home/SageUser/sage-4.7.2/local/lib/python2.6/site-packages/sage/libs
$ cygcheck ./ecl.dll
C:\cygwin\home\SageUser\sage-4.7.2\devel\sage-main\build\sage\libs\ecl.dll
  C:\cygwin\bin\cygwin1.dll
    C:\WINDOWS\system32\ADVAPI32.DLL
      C:\WINDOWS\system32\KERNEL32.dll
        C:\WINDOWS\system32\ntdll.dll
      C:\WINDOWS\system32\RPCRT4.dll
        C:\WINDOWS\system32\Secur32.dll
  C:\cygwin\home\SageUser\sage-4.7.2\devel\sage-main\build\sage\libs\ecl.dll
cygcheck: track_down: could not find libpython2.6.dll

cygcheck: track_down: could not find libpython2.6.dll

cygcheck: track_down: could not find csage.dll

cygcheck: track_down: could not find csage.dll

```
That's a lot of things not to find.



---

archive/issue_comments_076455.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nScratch that - in private comm. Dima points out that we should be in the subshell.\n\n```\nSAGE_ROOT=/home/SageUser/sage-4.7.2\n(sage subshell) GC02635:sage-4.7.2 User 1$ cd local/lib/python2.6/site-packages/sage/libs/\nSAGE_ROOT=/home/SageUser/sage-4.7.2\n(sage subshell) GC02635:libs User 1$ cygcheck ./ecl.dll\nC:\\cygwin\\home\\SageUser\\sage-4.7.2\\devel\\sage-main\\build\\sage\\libs\\ecl.dll\n  C:\\cygwin\\home\\SageUser\\sage-4.7.2\\local\\bin\\libpython2.6.dll\n    C:\\cygwin\\bin\\cygwin1.dll\n      C:\\WINDOWS\\system32\\ADVAPI32.DLL\n        C:\\WINDOWS\\system32\\KERNEL32.dll\n          C:\\WINDOWS\\system32\\ntdll.dll\n        C:\\WINDOWS\\system32\\RPCRT4.dll\n          C:\\WINDOWS\\system32\\Secur32.dll\n  C:\\cygwin\\home\\SageUser\\sage-4.7.2\\devel\\sage-main\\build\\sage\\libs\\ecl.dll\n    C:\\cygwin\\home\\SageUser\\sage-4.7.2\\local\\lib\\csage.dll\n      C:\\cygwin\\home\\SageUser\\sage-4.7.2\\local\\bin\\cyggmp-3.dll\n      C:\\cygwin\\bin\\cyggcc_s-1.dll\n      C:\\cygwin\\bin\\cygstdc++-6.dll\n      C:\\cygwin\\home\\SageUser\\sage-4.7.2\\local\\lib\\libntl.dll\nSAGE_ROOT=/home/SageUser/sage-4.7.2\n```\nBut doing it outside its own directory yields the same \"could not find\" message as before.  It only finds it if I'm already in site-packages/sage/.",
    "created_at": "2011-12-14T03:30:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76455",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:26" align="right">comment:26</div>

Scratch that - in private comm. Dima points out that we should be in the subshell.

```
SAGE_ROOT=/home/SageUser/sage-4.7.2
(sage subshell) GC02635:sage-4.7.2 User 1$ cd local/lib/python2.6/site-packages/sage/libs/
SAGE_ROOT=/home/SageUser/sage-4.7.2
(sage subshell) GC02635:libs User 1$ cygcheck ./ecl.dll
C:\cygwin\home\SageUser\sage-4.7.2\devel\sage-main\build\sage\libs\ecl.dll
  C:\cygwin\home\SageUser\sage-4.7.2\local\bin\libpython2.6.dll
    C:\cygwin\bin\cygwin1.dll
      C:\WINDOWS\system32\ADVAPI32.DLL
        C:\WINDOWS\system32\KERNEL32.dll
          C:\WINDOWS\system32\ntdll.dll
        C:\WINDOWS\system32\RPCRT4.dll
          C:\WINDOWS\system32\Secur32.dll
  C:\cygwin\home\SageUser\sage-4.7.2\devel\sage-main\build\sage\libs\ecl.dll
    C:\cygwin\home\SageUser\sage-4.7.2\local\lib\csage.dll
      C:\cygwin\home\SageUser\sage-4.7.2\local\bin\cyggmp-3.dll
      C:\cygwin\bin\cyggcc_s-1.dll
      C:\cygwin\bin\cygstdc++-6.dll
      C:\cygwin\home\SageUser\sage-4.7.2\local\lib\libntl.dll
SAGE_ROOT=/home/SageUser/sage-4.7.2
```
But doing it outside its own directory yields the same "could not find" message as before.  It only finds it if I'm already in site-packages/sage/.



---

archive/issue_comments_076456.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@kcrisman](#comment:26):\n> Scratch that - in private comm. Dima points out that we should be in the subshell.\n\nstill, we need to know details of Sage/Python extension implementation on Cygwin to solve this. It could be just an artefact of broken Python/Cython (fork() failures when running sage -b are a pain...)",
    "created_at": "2011-12-14T04:00:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76456",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@kcrisman](#comment:26):
> Scratch that - in private comm. Dima points out that we should be in the subshell.

still, we need to know details of Sage/Python extension implementation on Cygwin to solve this. It could be just an artefact of broken Python/Cython (fork() failures when running sage -b are a pain...)



---

archive/issue_comments_076457.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nJust for info, on my Cygwin 1.7.16/Sage 5.2 install cygchecking all the ecl.* things shows no problem.\nSo the problem looks more subtle...",
    "created_at": "2012-08-05T13:57:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76457",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:29" align="right">comment:29</div>

Just for info, on my Cygwin 1.7.16/Sage 5.2 install cygchecking all the ecl.* things shows no problem.
So the problem looks more subtle...



---

archive/issue_comments_076458.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nI found it quite strange that the problematic ecl.dll links to itself.\nMaybe it's wanting the other ecl.dll, but gets itself because of the name clash.\n\nI'll try to rename ecl.pyx to ecl_blah.pyx, regenerate it and import it to see what happens.",
    "created_at": "2012-08-07T13:15:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76458",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:30" align="right">comment:30</div>

I found it quite strange that the problematic ecl.dll links to itself.
Maybe it's wanting the other ecl.dll, but gets itself because of the name clash.

I'll try to rename ecl.pyx to ecl_blah.pyx, regenerate it and import it to see what happens.



---

archive/issue_comments_076459.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nNo problem importing ecl_blah (after removing the former ecl.dll in the same directory sage/libs/)!",
    "created_at": "2012-08-07T13:22:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76459",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:31" align="right">comment:31</div>

No problem importing ecl_blah (after removing the former ecl.dll in the same directory sage/libs/)!



---

archive/issue_comments_076460.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nAnd the question is now, why do we get ecl.dll in local/lib/ rather than libecl.dll.",
    "created_at": "2012-08-07T13:35:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76460",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:32" align="right">comment:32</div>

And the question is now, why do we get ecl.dll in local/lib/ rather than libecl.dll.



---

archive/issue_comments_076461.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@jpflori](#comment:32):\n> And the question is now, why do we get ecl.dll in local/lib/ rather than libecl.dll.\n\nthe following [Cygwin doc](http://cygwin.com/cygwin-ug-net/dll.html#dll-build) seems to imply that  `lib` prefix is merely a matter of convenience; it recommends that there should be no `libecl.dll`; it should rather be `cygecl.dll` and `libecl.dll.a`.",
    "created_at": "2012-08-07T14:04:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76461",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@jpflori](#comment:32):
> And the question is now, why do we get ecl.dll in local/lib/ rather than libecl.dll.

the following [Cygwin doc](http://cygwin.com/cygwin-ug-net/dll.html#dll-build) seems to imply that  `lib` prefix is merely a matter of convenience; it recommends that there should be no `libecl.dll`; it should rather be `cygecl.dll` and `libecl.dll.a`.



---

archive/issue_comments_076462.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nOk, that's because in ecl build system, the shared library is named\n${SHAREDPREFIX}ecl.${SHAREDEXT}\nand these two variables are set to '' and 'dll' by configure on Cygwin.",
    "created_at": "2012-08-07T14:07:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76462",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:34" align="right">comment:34</div>

Ok, that's because in ecl build system, the shared library is named
${SHAREDPREFIX}ecl.${SHAREDEXT}
and these two variables are set to '' and 'dll' by configure on Cygwin.



---

archive/issue_comments_076463.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@dimpase](#comment:33):\n> Replying to [@jpflori](#comment:32):\n> > And the question is now, why do we get ecl.dll in local/lib/ rather than libecl.dll.\n\n> the following [Cygwin doc](http://cygwin.com/cygwin-ug-net/dll.html#dll-build) seems to imply that  `lib` prefix is merely a matter of convenience; it recommends that there should be no `libecl.dll`; it should rather be `cygecl.dll` and `libecl.dll.a`.\n\nI agree with you.\nThe question is now if it's trivial enough to modify the build of the shared library on Cygwin.\nUnfortunately, ecl does not use libtool.",
    "created_at": "2012-08-07T14:08:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76463",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@dimpase](#comment:33):
> Replying to [@jpflori](#comment:32):
> > And the question is now, why do we get ecl.dll in local/lib/ rather than libecl.dll.

> the following [Cygwin doc](http://cygwin.com/cygwin-ug-net/dll.html#dll-build) seems to imply that  `lib` prefix is merely a matter of convenience; it recommends that there should be no `libecl.dll`; it should rather be `cygecl.dll` and `libecl.dll.a`.

I agree with you.
The question is now if it's trivial enough to modify the build of the shared library on Cygwin.
Unfortunately, ecl does not use libtool.



---

archive/issue_comments_076464.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nI think the changes could be quite easy, I'll give it a try.",
    "created_at": "2012-08-07T14:12:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76464",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:36" align="right">comment:36</div>

I think the changes could be quite easy, I'll give it a try.



---

archive/issue_comments_076465.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nI based my patch on the two following naming schemes:\nhttp://www.mingw.org/wiki/sampleDLL for MinGW\nand:\nhttp://cygwin.com/cygwin-ug-net/dll.html#dll-build for CYGWIN\nI'll report that upstream.\n\nAs I had to run autoconf which modified a lot of data in config*, the patch included and the hg history will be quite big, so it would be better to update to an upstream release including such modifications (if upstream thinks its a good idea of course).\nUnfortunately, we are quite behind, and I'm not really ready to do both an update and having this fix at the same time.\nAnother solution would be to included a patched src directory in the spkg, but I can already hear people ranting.\nOr directly patch configure in a minimal way, but I'm not so inclined to doing so.",
    "created_at": "2012-08-07T15:52:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76465",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:37" align="right">comment:37</div>

I based my patch on the two following naming schemes:
http://www.mingw.org/wiki/sampleDLL for MinGW
and:
http://cygwin.com/cygwin-ug-net/dll.html#dll-build for CYGWIN
I'll report that upstream.

As I had to run autoconf which modified a lot of data in config*, the patch included and the hg history will be quite big, so it would be better to update to an upstream release including such modifications (if upstream thinks its a good idea of course).
Unfortunately, we are quite behind, and I'm not really ready to do both an update and having this fix at the same time.
Another solution would be to included a patched src directory in the spkg, but I can already hear people ranting.
Or directly patch configure in a minimal way, but I'm not so inclined to doing so.



---

archive/issue_comments_076466.json:
```json
{
    "body": "Upstream: **Not yet reported upstream; Will do shortly.**",
    "created_at": "2012-08-07T16:59:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76466",
    "user": "https://github.com/jpflori"
}
```

Upstream: **Not yet reported upstream; Will do shortly.**



---

archive/issue_comments_076467.json:
```json
{
    "body": "Changed keywords from none to **cygwin spkg ecl**",
    "created_at": "2012-08-07T16:59:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76467",
    "user": "https://github.com/jpflori"
}
```

Changed keywords from none to **cygwin spkg ecl**



---

archive/issue_comments_076468.json:
```json
{
    "body": "Author: **Jean-Pierre Flori**",
    "created_at": "2012-08-07T16:59:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76468",
    "user": "https://github.com/jpflori"
}
```

Author: **Jean-Pierre Flori**



---

archive/issue_comments_076469.json:
```json
{
    "body": "Dependencies: **#13324**",
    "created_at": "2012-08-07T16:59:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76469",
    "user": "https://github.com/jpflori"
}
```

Dependencies: **#13324**



---

archive/issue_comments_076470.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,3 +10,18 @@\n ImportError: No such process\n sage: \n ```\n+\n+The reason of this is a name clash: there are two different libraries called ecl.dll.\n+One in SAGE_LOCAL/lib/ and one in SAGE_LOCAL/lib/python/site-packages/sage/libs/\n+It is the second one whose importing fails because it should be linked to the first one, but cygcheck shows that this dependency is resolved to itself!\n+This is of course dysfunctional, whence the import failure.\n+\n+The easiest solution would be to rename sage/libs/ecl.pyx to something else,thus avoiding a name clash.\n+The solution proposed here is different and more indirect:\n+patch ECL build system so that it follows the name convention proposed by Cygwin.\n+The shared library itself is now in SAGE_LOCAL/bin/cygecl.dll.\n+In addition, an import file is created in SAGE_LOCAL/lib/libecl.dll.a.\n+\n+An updated spkg, based on the one in #13324, is available at\n+http://perso.telecom-paristech.fr/~flori/sage/ecl-11.1.2.cvs20111120.p3.spkg\n+\n``````\n",
    "created_at": "2012-08-07T16:59:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76470",
    "user": "https://github.com/jpflori"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,3 +10,18 @@
 ImportError: No such process
 sage: 
 ```
+
+The reason of this is a name clash: there are two different libraries called ecl.dll.
+One in SAGE_LOCAL/lib/ and one in SAGE_LOCAL/lib/python/site-packages/sage/libs/
+It is the second one whose importing fails because it should be linked to the first one, but cygcheck shows that this dependency is resolved to itself!
+This is of course dysfunctional, whence the import failure.
+
+The easiest solution would be to rename sage/libs/ecl.pyx to something else,thus avoiding a name clash.
+The solution proposed here is different and more indirect:
+patch ECL build system so that it follows the name convention proposed by Cygwin.
+The shared library itself is now in SAGE_LOCAL/bin/cygecl.dll.
+In addition, an import file is created in SAGE_LOCAL/lib/libecl.dll.a.
+
+An updated spkg, based on the one in #13324, is available at
+http://perso.telecom-paristech.fr/~flori/sage/ecl-11.1.2.cvs20111120.p3.spkg
+
``````




---

archive/issue_comments_076471.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nProposed spkg at http://perso.telecom-paristech.fr/~flori/sage/ecl-11.1.2.cvs20111120.p3.spkg",
    "created_at": "2012-08-07T16:59:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76471",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:38" align="right">comment:38</div>

Proposed spkg at http://perso.telecom-paristech.fr/~flori/sage/ecl-11.1.2.cvs20111120.p3.spkg



---

archive/issue_events_117555.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2012-08-07T16:59:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9167#event-117555"
}
```



---

archive/issue_comments_076472.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nReplying to [@jpflori](#comment:37):\n> As I had to run autoconf which modified a lot of data in config*, the patch included and the hg history will be quite big ...\n\nYou may try to use the exact same versions of `automake` and `autoconf`... ;-)\n\n> Another solution would be to included a patched src directory in the spkg, but I can already hear people ranting.\n\nWell, I'm personally ok with just \"autoreconfing\" `src/`, but such disturbes the move to git.\n\n> Or directly patch configure in a minimal way, but I'm not so inclined to doing so.\n\nIf the patch isn't that large, that's perhaps the best solution until upstream includes a fix.  If they quickly include it into some devel version, we could try to upgrade to that.",
    "created_at": "2012-08-07T17:22:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76472",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:39" align="right">comment:39</div>

Replying to [@jpflori](#comment:37):
> As I had to run autoconf which modified a lot of data in config*, the patch included and the hg history will be quite big ...

You may try to use the exact same versions of `automake` and `autoconf`... ;-)

> Another solution would be to included a patched src directory in the spkg, but I can already hear people ranting.

Well, I'm personally ok with just "autoreconfing" `src/`, but such disturbes the move to git.

> Or directly patch configure in a minimal way, but I'm not so inclined to doing so.

If the patch isn't that large, that's perhaps the best solution until upstream includes a fix.  If they quickly include it into some devel version, we could try to upgrade to that.



---

archive/issue_comments_076473.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nReplying to [@nexttime](#comment:39):\n> If the patch isn't that large, that's perhaps the best solution until upstream includes a fix.  If they quickly include it into some devel version, we could try to upgrade to that.\n> \n\nI agree with both these ideas, see also https://groups.google.com/d/topic/sage-devel/Ikwfh6PXJnQ/discussion .\n\nThe problem with patching configure directly is that it needs more dirty work and I'm lazy to do it.",
    "created_at": "2012-08-07T17:25:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76473",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:40" align="right">comment:40</div>

Replying to [@nexttime](#comment:39):
> If the patch isn't that large, that's perhaps the best solution until upstream includes a fix.  If they quickly include it into some devel version, we could try to upgrade to that.
> 

I agree with both these ideas, see also https://groups.google.com/d/topic/sage-devel/Ikwfh6PXJnQ/discussion .

The problem with patching configure directly is that it needs more dirty work and I'm lazy to do it.



---

archive/issue_comments_076474.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nAnd the problem with the upstream solution is that upstream is quite far away from our version and that would also need much more work (if things break, which can be expected).",
    "created_at": "2012-08-07T17:26:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76474",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:41" align="right">comment:41</div>

And the problem with the upstream solution is that upstream is quite far away from our version and that would also need much more work (if things break, which can be expected).



---

archive/issue_comments_076475.json:
```json
{
    "body": "Changed upstream from **Not yet reported upstream; Will do shortly.** to **Reported upstream. No feedback yet.**",
    "created_at": "2012-08-07T17:47:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76475",
    "user": "https://github.com/jpflori"
}
```

Changed upstream from **Not yet reported upstream; Will do shortly.** to **Reported upstream. No feedback yet.**



---

archive/issue_events_117556.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-08-08T04:29:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9167#event-117556"
}
```



---

archive/issue_events_117557.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-08-08T04:29:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9167#event-117557"
}
```



---

archive/issue_comments_076476.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nthe new spkg installs OK, but gives the following linking error during the build of various Sage dlls:\n \n\n```\n...\ngcc -I/usr/include/ncurses -fno-strict-aliasing -fwrapv -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -I/usr/local/src/sage/sage-5.2/local/include/ecl/ -I/usr/local/src/sage/sage-5.2/local/include -I/usr/local/src/sage/sage-5.2/local/include/csage -I/usr/local/src/sage/sage-5.2/devel/sage/sage/ext -I/usr/local/src/sage/sage-5.2/local/include/python2.7 -c sage/libs/ecl.c -o build/temp.cygwin-1.7.16-i686-2.7/sage/libs/ecl.o -w\ngcc -shared -Wl,--enable-auto-image-base -L/usr/local/src/sage/sage-5.2/local/lib build/temp.cygwin-1.7.16-i686-2.7/sage/libs/ecl.o -L/usr/local/src/sage/sage-5.2/local/lib -L/usr/local/src/sage/sage-5.2/local/lib/python2.7/config -lcsage -lecl -lgmp -lstdc++ -lntl -lpython2.7 -o build/lib.cygwin-1.7.16-i686-2.7/sage/libs/ecl.dll\nbuild/temp.cygwin-1.7.16-i686-2.7/sage/libs/ecl.o: In function `__pyx_pf_4sage_4libs_3ecl_4shutdown_ecl':\n/usr/local/src/sage/sage-5.2/devel/sage/sage/libs/ecl.c:3134: undefined reference to `_cl_shutdown'\nbuild/temp.cygwin-1.7.16-i686-2.7/sage/libs/ecl.o: In function `__pyx_pf_4sage_4libs_3ecl_9EclObject_12__hash__':\n/usr/local/src/sage/sage-5.2/devel/sage/sage/libs/ecl.c:4906: undefined reference to `_cl_sxhash'\n.....and lots of siimilar errors...........\n```",
    "created_at": "2012-08-08T04:29:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76476",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:43" align="right">comment:43</div>

the new spkg installs OK, but gives the following linking error during the build of various Sage dlls:
 

```
...
gcc -I/usr/include/ncurses -fno-strict-aliasing -fwrapv -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -I/usr/local/src/sage/sage-5.2/local/include/ecl/ -I/usr/local/src/sage/sage-5.2/local/include -I/usr/local/src/sage/sage-5.2/local/include/csage -I/usr/local/src/sage/sage-5.2/devel/sage/sage/ext -I/usr/local/src/sage/sage-5.2/local/include/python2.7 -c sage/libs/ecl.c -o build/temp.cygwin-1.7.16-i686-2.7/sage/libs/ecl.o -w
gcc -shared -Wl,--enable-auto-image-base -L/usr/local/src/sage/sage-5.2/local/lib build/temp.cygwin-1.7.16-i686-2.7/sage/libs/ecl.o -L/usr/local/src/sage/sage-5.2/local/lib -L/usr/local/src/sage/sage-5.2/local/lib/python2.7/config -lcsage -lecl -lgmp -lstdc++ -lntl -lpython2.7 -o build/lib.cygwin-1.7.16-i686-2.7/sage/libs/ecl.dll
build/temp.cygwin-1.7.16-i686-2.7/sage/libs/ecl.o: In function `__pyx_pf_4sage_4libs_3ecl_4shutdown_ecl':
/usr/local/src/sage/sage-5.2/devel/sage/sage/libs/ecl.c:3134: undefined reference to `_cl_shutdown'
build/temp.cygwin-1.7.16-i686-2.7/sage/libs/ecl.o: In function `__pyx_pf_4sage_4libs_3ecl_9EclObject_12__hash__':
/usr/local/src/sage/sage-5.2/devel/sage/sage/libs/ecl.c:4906: undefined reference to `_cl_sxhash'
.....and lots of siimilar errors...........
```



---

archive/issue_comments_076477.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nReplying to [@dimpase](#comment:43):\n> the new spkg installs OK, but gives the following linking error during the build of various Sage dlls:\n\nplease aslo see [Redhat's docs](http://docs.redhat.com/docs/en-US/Red_Hat_Enterprise_Linux/4/html/Using_ld_the_GNU_Linker/win32.html) for more details on linking on Cygwin. It seems that we might misunderstand the need for and the purpose of `libecl.dll.a`",
    "created_at": "2012-08-08T05:40:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76477",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:44" align="right">comment:44</div>

Replying to [@dimpase](#comment:43):
> the new spkg installs OK, but gives the following linking error during the build of various Sage dlls:

please aslo see [Redhat's docs](http://docs.redhat.com/docs/en-US/Red_Hat_Enterprise_Linux/4/html/Using_ld_the_GNU_Linker/win32.html) for more details on linking on Cygwin. It seems that we might misunderstand the need for and the purpose of `libecl.dll.a`



---

archive/issue_comments_076478.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nThe purpose of libecl.dll.a is to be able to link to Cygwin dlls from outside of the Cygwin world, with the Windows linker for example.\nSo for Sage on Cygwin, this is not needed.\n\nThe point here was to use a more generic installation for ECL, which would also work for linking from outside Cygwin, and which would as a side effect solves the name clash problem of this ticket.\n\nThe link problem is myabe something with that we do not -L$SAGE_LOCAL/bin when building/linking?\nLibraries generated with libtool do not have this problem because libtool also creates a .la file, which is just a text file containing some info, and in particular where to look for the real shared library file, which is usually in ../cyg<libname>-<version info>.dll",
    "created_at": "2012-08-08T07:26:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76478",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:45" align="right">comment:45</div>

The purpose of libecl.dll.a is to be able to link to Cygwin dlls from outside of the Cygwin world, with the Windows linker for example.
So for Sage on Cygwin, this is not needed.

The point here was to use a more generic installation for ECL, which would also work for linking from outside Cygwin, and which would as a side effect solves the name clash problem of this ticket.

The link problem is myabe something with that we do not -L$SAGE_LOCAL/bin when building/linking?
Libraries generated with libtool do not have this problem because libtool also creates a .la file, which is just a text file containing some info, and in particular where to look for the real shared library file, which is usually in ../cyg<libname>-<version info>.dll



---

archive/issue_comments_076479.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nWhat's strange is that copying back bin/cygecl.dll to lib/[lib]ecl.dll does not solve the problem.\nAnd that bin/ecl.exe which links to cygecl.dll works fine.\n\nI may have broken something while tweaking the Makefile...",
    "created_at": "2012-08-08T08:36:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76479",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:46" align="right">comment:46</div>

What's strange is that copying back bin/cygecl.dll to lib/[lib]ecl.dll does not solve the problem.
And that bin/ecl.exe which links to cygecl.dll works fine.

I may have broken something while tweaking the Makefile...



---

archive/issue_comments_076480.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nRunning nm on both libraries from this spkg and the previous one shows the same symbols exactly, but with a different address base.",
    "created_at": "2012-08-08T09:06:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76480",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:47" align="right">comment:47</div>

Running nm on both libraries from this spkg and the previous one shows the same symbols exactly, but with a different address base.



---

archive/issue_comments_076481.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nReplying to [@jpflori](#comment:47):\n> Running nm on both libraries from this spkg and the previous one shows the same symbols exactly, but with a different address base.\n\nthe culprit is the new libecl.dll.a, which gets picked up by the linker first, what which is not what is needed (as this is for other purposes).\nAnd this makes perfect sense, that's exactly what happens according to the Redhat docs cited above.\n\nI have overcome this by moving libecl.dll.a out of SAGELOCAL/lib, and creating there a symbolic link named cygecl.dll \nto ../bin/cygecl.dll\n\nHopefully will get Sage that can at least start up some time soon...",
    "created_at": "2012-08-08T10:12:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76481",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:48" align="right">comment:48</div>

Replying to [@jpflori](#comment:47):
> Running nm on both libraries from this spkg and the previous one shows the same symbols exactly, but with a different address base.

the culprit is the new libecl.dll.a, which gets picked up by the linker first, what which is not what is needed (as this is for other purposes).
And this makes perfect sense, that's exactly what happens according to the Redhat docs cited above.

I have overcome this by moving libecl.dll.a out of SAGELOCAL/lib, and creating there a symbolic link named cygecl.dll 
to ../bin/cygecl.dll

Hopefully will get Sage that can at least start up some time soon...



---

archive/issue_comments_076482.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nI don't agree with the point that libecl.dll.a cshould not be picked up by the linker.\nIt is not necessary and you can directly link to cygecl.dll, that I agree with, but it should be possible to go through libecl.dll.a as well.\nOf course, there might be a problem with the produced libecl.dll.a, but using import files should not be impossible.\n\nOr then I don't understand how any piece of Sage can link with MPIR, MPFR and any other library which uses libtool and which generates as well import files and put them into SAGE_LOCAL/lib/ where they get picked up before anything else.\nAnd I don't think we have any piece of code which makes sure these dll.a files are not used.",
    "created_at": "2012-08-08T10:22:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76482",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:49" align="right">comment:49</div>

I don't agree with the point that libecl.dll.a cshould not be picked up by the linker.
It is not necessary and you can directly link to cygecl.dll, that I agree with, but it should be possible to go through libecl.dll.a as well.
Of course, there might be a problem with the produced libecl.dll.a, but using import files should not be impossible.

Or then I don't understand how any piece of Sage can link with MPIR, MPFR and any other library which uses libtool and which generates as well import files and put them into SAGE_LOCAL/lib/ where they get picked up before anything else.
And I don't think we have any piece of code which makes sure these dll.a files are not used.



---

archive/issue_comments_076483.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nReplying to [@jpflori](#comment:49):\n> I don't agree with the point that libecl.dll.a cshould not be picked up by the linker.\n> It is not necessary and you can directly link to cygecl.dll, that I agree with, but it should be possible to go through libecl.dll.a as well.\n\nRedhat docs recommend direct linking over the import library linking, as more efficient.\nFurther than that, no Idea. I don't have much (positive :-)) experience with Win32 dlls.\n\n> Of course, there might be a problem with the produced libecl.dll.a, \n> \n\nthis could well be the case, e.g. `__declspec(dllexport)` declarations missing in the source when compiling.\n(and there are arcane rules about using -export-all-symbols and the above declarations at the same time)\n Or some options to the linker are wrong/missing?\n\n> but using import files should not be impossible.\n> Or then I don't understand how any piece of Sage can link with MPIR, MPFR and any other library which uses libtool and which generates as well import files and put them into SAGE_LOCAL/lib/ where they get picked up before anything else.\n\nnote that there are also these .la files produced along the way in the case the libtool is used.\n\n\n> And I don't think we have any piece of code which makes sure these dll.a files are not used.",
    "created_at": "2012-08-08T10:41:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76483",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:50" align="right">comment:50</div>

Replying to [@jpflori](#comment:49):
> I don't agree with the point that libecl.dll.a cshould not be picked up by the linker.
> It is not necessary and you can directly link to cygecl.dll, that I agree with, but it should be possible to go through libecl.dll.a as well.

Redhat docs recommend direct linking over the import library linking, as more efficient.
Further than that, no Idea. I don't have much (positive :-)) experience with Win32 dlls.

> Of course, there might be a problem with the produced libecl.dll.a, 
> 

this could well be the case, e.g. `__declspec(dllexport)` declarations missing in the source when compiling.
(and there are arcane rules about using -export-all-symbols and the above declarations at the same time)
 Or some options to the linker are wrong/missing?

> but using import files should not be impossible.
> Or then I don't understand how any piece of Sage can link with MPIR, MPFR and any other library which uses libtool and which generates as well import files and put them into SAGE_LOCAL/lib/ where they get picked up before anything else.

note that there are also these .la files produced along the way in the case the libtool is used.


> And I don't think we have any piece of code which makes sure these dll.a files are not used.



---

archive/issue_comments_076484.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nI don't think the .la files are used by ld at all, but I might be wrong.\n\nThe dllexport thing might be the problem, I'll check that.",
    "created_at": "2012-08-08T10:44:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76484",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:51" align="right">comment:51</div>

I don't think the .la files are used by ld at all, but I might be wrong.

The dllexport thing might be the problem, I'll check that.



---

archive/issue_comments_076485.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nThe dll.a file is indeed broken.\nRunning nm on it should return much more symbols.\n\nMaybe the dll[import|export] magic is broken.\n\nFor the dllimport this is sure.\nIn config.h, the dllimport maic is turned on if cygwin is defined, whereas gcc on cygwin defines _ _ CYGWIN _ _.\n\nFor the dllexport magic, I'm not sure.\nDuring the build process there is indeed a cygwin variable defined which triggers the use of dllexport (or seems to do).",
    "created_at": "2012-08-08T12:03:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76485",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:52" align="right">comment:52</div>

The dll.a file is indeed broken.
Running nm on it should return much more symbols.

Maybe the dll[import|export] magic is broken.

For the dllimport this is sure.
In config.h, the dllimport maic is turned on if cygwin is defined, whereas gcc on cygwin defines _ _ CYGWIN _ _.

For the dllexport magic, I'm not sure.
During the build process there is indeed a cygwin variable defined which triggers the use of dllexport (or seems to do).



---

archive/issue_comments_076486.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nAnd I'm able to generate a correct dll.a file using nm and dlltool.\nSo the linking command which generates the dll.a file must be problematic.",
    "created_at": "2012-08-08T12:19:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76486",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:53" align="right">comment:53</div>

And I'm able to generate a correct dll.a file using nm and dlltool.
So the linking command which generates the dll.a file must be problematic.



---

archive/issue_comments_076487.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nOk, think I got it.\n\nI've put the implid stuff into LDFLAGS which are used several times, so libecl.dll.a keeps being regenerated which various stuff in it.",
    "created_at": "2012-08-08T13:08:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76487",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:54" align="right">comment:54</div>

Ok, think I got it.

I've put the implid stuff into LDFLAGS which are used several times, so libecl.dll.a keeps being regenerated which various stuff in it.



---

archive/issue_events_117558.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2012-08-08T15:15:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9167#event-117558"
}
```



---

archive/issue_events_117559.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2012-08-08T15:15:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9167#event-117559"
}
```



---

archive/issue_comments_076488.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nThe spkg should be fixed now.\n\nNothing is committed yet, but please give it a try!",
    "created_at": "2012-08-08T15:15:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76488",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:55" align="right">comment:55</div>

The spkg should be fixed now.

Nothing is committed yet, but please give it a try!



---

archive/issue_comments_076489.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nwell, I have finished the previous build, but then Sage was refusing to start, throwing the usual fork() problems, even after repeated rebasealls and reboots. I've decided to update Cygwin and uninstall as much as possible of unneeded parts of Cygwin, in hope that it will help. But I am not optimistic.",
    "created_at": "2012-08-08T15:36:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76489",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:56" align="right">comment:56</div>

well, I have finished the previous build, but then Sage was refusing to start, throwing the usual fork() problems, even after repeated rebasealls and reboots. I've decided to update Cygwin and uninstall as much as possible of unneeded parts of Cygwin, in hope that it will help. But I am not optimistic.



---

archive/issue_events_117560.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2012-08-09T08:55:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9167#event-117560"
}
```



---

archive/issue_events_117561.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2012-08-09T08:55:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9167#event-117561"
}
```



---

archive/issue_comments_076490.json:
```json
{
    "body": "Work Issues: **configure regeneration history issue**",
    "created_at": "2012-08-09T08:55:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76490",
    "user": "https://github.com/jpflori"
}
```

Work Issues: **configure regeneration history issue**



---

archive/issue_comments_076491.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nSee discussion at https://groups.google.com/d/topic/sage-devel/Ikwfh6PXJnQ/discussion for autotools regeneration issue.",
    "created_at": "2012-08-09T09:00:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76491",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:58" align="right">comment:58</div>

See discussion at https://groups.google.com/d/topic/sage-devel/Ikwfh6PXJnQ/discussion for autotools regeneration issue.



---

archive/issue_comments_076492.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nReplying to [@dimpase](#comment:56):\n> well, I have finished the previous build, but then Sage was refusing to start, throwing the usual fork() problems, even after repeated rebasealls and reboots. I've decided to update Cygwin and uninstall as much as possible of unneeded parts of Cygwin, in hope that it will help. But I am not optimistic. \n\nno, still no luck. I start to suspect that 2GB of RAM are not enough on 32-bit Windows 7 to run Sage. When I examine the location of Sage dlls which produce these fork() failures, I see that \n  their preferred base addresses (set up by rebaseall) have nothing to do with the actual places they are allocated;\n\n  these actual places may be already used by Win32 system dlls.\n\nIt could also be that it's just the 32-bit system is to blame, not the relatively low by modern standards amount of RAM. It's pathetic that on Linux 0.5GB of RAM are enough to have a well-running Sage, while here 2GB are not enough.",
    "created_at": "2012-08-10T04:06:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76492",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:59" align="right">comment:59</div>

Replying to [@dimpase](#comment:56):
> well, I have finished the previous build, but then Sage was refusing to start, throwing the usual fork() problems, even after repeated rebasealls and reboots. I've decided to update Cygwin and uninstall as much as possible of unneeded parts of Cygwin, in hope that it will help. But I am not optimistic. 

no, still no luck. I start to suspect that 2GB of RAM are not enough on 32-bit Windows 7 to run Sage. When I examine the location of Sage dlls which produce these fork() failures, I see that 
  their preferred base addresses (set up by rebaseall) have nothing to do with the actual places they are allocated;

  these actual places may be already used by Win32 system dlls.

It could also be that it's just the 32-bit system is to blame, not the relatively low by modern standards amount of RAM. It's pathetic that on Linux 0.5GB of RAM are enough to have a well-running Sage, while here 2GB are not enough.



---

archive/issue_comments_076493.json:
```json
{
    "body": "Changed work issues from **configure regeneration history issue** to none",
    "created_at": "2012-08-20T15:12:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76493",
    "user": "https://github.com/jpflori"
}
```

Changed work issues from **configure regeneration history issue** to none



---

archive/issue_comments_076494.json:
```json
{
    "body": "Changed upstream from **Reported upstream. No feedback yet.** to **None of the above - read trac for reasoning.**",
    "created_at": "2012-08-20T15:12:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76494",
    "user": "https://github.com/jpflori"
}
```

Changed upstream from **Reported upstream. No feedback yet.** to **None of the above - read trac for reasoning.**



---

archive/issue_comments_076495.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nI've upped an upgraded spkg based on 12.7.1.p0 spkg from #13324 at\nhttp://perso.telecom-paristech.fr/~flori/sage/ecl-12.7.1.p1.spkg\nusing the autotools stuff from #13357.\n\nNothing committed or tagged yet, nor retested on Cygwin.\n\nUpstream is ready to include a similar patch if it does not break anything on any Windows port... which will need some more thorough testing before I can submit such a patch.\nAs far as Sage on Cygwin is concerned, everything seems fine (as much as possible...) so far.",
    "created_at": "2012-08-20T15:12:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76495",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:60" align="right">comment:60</div>

I've upped an upgraded spkg based on 12.7.1.p0 spkg from #13324 at
http://perso.telecom-paristech.fr/~flori/sage/ecl-12.7.1.p1.spkg
using the autotools stuff from #13357.

Nothing committed or tagged yet, nor retested on Cygwin.

Upstream is ready to include a similar patch if it does not break anything on any Windows port... which will need some more thorough testing before I can submit such a patch.
As far as Sage on Cygwin is concerned, everything seems fine (as much as possible...) so far.



---

archive/issue_events_117562.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2012-08-20T15:12:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9167#event-117562"
}
```



---

archive/issue_events_117563.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2012-08-20T15:12:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9167#event-117563"
}
```



---

archive/issue_comments_076496.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -23,5 +23,5 @@\n In addition, an import file is created in SAGE_LOCAL/lib/libecl.dll.a.\n \n An updated spkg, based on the one in #13324, is available at\n-http://perso.telecom-paristech.fr/~flori/sage/ecl-11.1.2.cvs20111120.p3.spkg\n+http://perso.telecom-paristech.fr/~flori/sage/ecl-12.7.1.p1.spkg\n \n``````\n",
    "created_at": "2012-08-20T15:12:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76496",
    "user": "https://github.com/jpflori"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -23,5 +23,5 @@
 In addition, an import file is created in SAGE_LOCAL/lib/libecl.dll.a.
 
 An updated spkg, based on the one in #13324, is available at
-http://perso.telecom-paristech.fr/~flori/sage/ecl-11.1.2.cvs20111120.p3.spkg
+http://perso.telecom-paristech.fr/~flori/sage/ecl-12.7.1.p1.spkg
 
``````




---

archive/issue_comments_076497.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nI lost part of my changes during the update to 12.7.1...",
    "created_at": "2012-08-20T16:14:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76497",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:62" align="right">comment:62</div>

I lost part of my changes during the update to 12.7.1...



---

archive/issue_events_117564.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2012-08-20T16:14:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9167#event-117564"
}
```



---

archive/issue_events_117565.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2012-08-20T16:14:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9167#event-117565"
}
```



---

archive/issue_comments_076498.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nShould be fixed now, patched aclocal.m4 is back and patches are correctly tracked.",
    "created_at": "2012-08-20T16:26:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76498",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:63" align="right">comment:63</div>

Should be fixed now, patched aclocal.m4 is back and patches are correctly tracked.



---

archive/issue_events_117566.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2012-08-20T16:26:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9167#event-117566"
}
```



---

archive/issue_events_117567.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2012-08-20T16:26:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9167#event-117567"
}
```



---

archive/issue_comments_076499.json:
```json
{
    "body": "Spkg diff, for review only. Not committed in spkg.",
    "created_at": "2012-08-20T16:53:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76499",
    "user": "https://github.com/jpflori"
}
```

Spkg diff, for review only. Not committed in spkg.



---

archive/issue_comments_076500.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nAttachment: **[spkg.diff.gz](https://github.com/sagemath/sage/files/ticket9167/spkg.diff.gz)**",
    "created_at": "2012-10-02T20:15:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76500",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:64" align="right">comment:64</div>

Attachment: **[spkg.diff.gz](https://github.com/sagemath/sage/files/ticket9167/spkg.diff.gz)**



---

archive/issue_comments_076501.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -24,4 +24,6 @@\n \n An updated spkg, based on the one in #13324, is available at\n http://perso.telecom-paristech.fr/~flori/sage/ecl-12.7.1.p1.spkg\n+or\n+http://www.infres.enst.fr/~flori/sage/ecl-12.7.1.p1.spkg\n \n``````\n",
    "created_at": "2012-10-02T20:15:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76501",
    "user": "https://github.com/jpflori"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -24,4 +24,6 @@
 
 An updated spkg, based on the one in #13324, is available at
 http://perso.telecom-paristech.fr/~flori/sage/ecl-12.7.1.p1.spkg
+or
+http://www.infres.enst.fr/~flori/sage/ecl-12.7.1.p1.spkg
 
``````




---

archive/issue_comments_076502.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nI asked our sysadmins to get me a 64-bit Win7 system (VM), so that I have a chance to get a working Sage on Cygwin. It will take few days to get it up and properly running.",
    "created_at": "2012-10-03T17:39:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76502",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:65" align="right">comment:65</div>

I asked our sysadmins to get me a 64-bit Win7 system (VM), so that I have a chance to get a working Sage on Cygwin. It will take few days to get it up and properly running.



---

archive/issue_comments_076503.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nThis works on Cygwin on XP!  Great solution - I was just not quite knowledgeable about this stuff to help, though I spent far too long on it.\n\nI won't have time to look at the spkg itself until Monday, but definitely positive review from actual practice!",
    "created_at": "2012-10-05T16:41:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76503",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:66" align="right">comment:66</div>

This works on Cygwin on XP!  Great solution - I was just not quite knowledgeable about this stuff to help, though I spent far too long on it.

I won't have time to look at the spkg itself until Monday, but definitely positive review from actual practice!



---

archive/issue_comments_076504.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\nThanx for testing this, but anyway I don't think the package here should get merge, let's just wait for upstream to include something similar (which means action from my side, but should happen in a finite amount of time, we first have to deal with other strange things happening with ECL last stable version potentially ignoring signals).\n\nThe spkg here is nonetheless useful to get a somehow more useful build on Cygwin!",
    "created_at": "2012-10-05T23:36:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76504",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:67" align="right">comment:67</div>

Thanx for testing this, but anyway I don't think the package here should get merge, let's just wait for upstream to include something similar (which means action from my side, but should happen in a finite amount of time, we first have to deal with other strange things happening with ECL last stable version potentially ignoring signals).

The spkg here is nonetheless useful to get a somehow more useful build on Cygwin!



---

archive/issue_comments_076505.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\nThe issue is now discussed upstream at http://sourceforge.net/p/ecls/feature-requests/15/ (after some exchanges on the ecl-devel list).\n\nThe spkg here are outdated (although functional) and should be rebased on top of #13324.\n\nThe bug mentioned reported here:\nhttp://sourceforge.net/p/ecls/bugs/222/\nshould as well be integrated here or at #13324.",
    "created_at": "2012-12-03T22:35:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76505",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:68" align="right">comment:68</div>

The issue is now discussed upstream at http://sourceforge.net/p/ecls/feature-requests/15/ (after some exchanges on the ecl-devel list).

The spkg here are outdated (although functional) and should be rebased on top of #13324.

The bug mentioned reported here:
http://sourceforge.net/p/ecls/bugs/222/
should as well be integrated here or at #13324.



---

archive/issue_comments_076506.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\nThis is only a little bit off from being based on #13324, cosmetic stuff mostly.",
    "created_at": "2012-12-06T16:39:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76506",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:69" align="right">comment:69</div>

This is only a little bit off from being based on #13324, cosmetic stuff mostly.



---

archive/issue_comments_076507.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">comment:70</div>\n\nNot quite ready for prime-time, but [this spkg](http://sage.math.washington.edu/home/kcrisman/ecl-12.7.1.p1.spkg) with the above diff.  This is just naively porting JP's diff.  Somehow I mixed up something, and also there is the problem with the weird tarring... but an attempt, anyway.",
    "created_at": "2012-12-06T16:51:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76507",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:70" align="right">comment:70</div>

Not quite ready for prime-time, but [this spkg](http://sage.math.washington.edu/home/kcrisman/ecl-12.7.1.p1.spkg) with the above diff.  This is just naively porting JP's diff.  Somehow I mixed up something, and also there is the problem with the weird tarring... but an attempt, anyway.



---

archive/issue_comments_076508.json:
```json
{
    "body": "For review only - based on JP's spkg",
    "created_at": "2012-12-06T17:01:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76508",
    "user": "https://github.com/kcrisman"
}
```

For review only - based on JP's spkg



---

archive/issue_comments_076509.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nAttachment: **[spkg-take2.diff.gz](https://github.com/sagemath/sage/files/ticket9167/spkg-take2.diff.gz)**\n\n> Not quite ready for prime-time, but [this spkg](http://sage.math.washington.edu/home/kcrisman/ecl-12.7.1.p1.spkg) with the above diff.  This is just naively porting JP's diff.  Somehow I mixed up something, and also there is the problem with the weird tarring... but an attempt, anyway.\n\nOkay, I see what I did wrong.  I still have the weird unknown extended keyword thing while untarring, but at least the patches apply now!  Waiting on the build, hopefully all will be well on Cygwin.",
    "created_at": "2012-12-06T17:03:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76509",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:71" align="right">comment:71</div>

Attachment: **[spkg-take2.diff.gz](https://github.com/sagemath/sage/files/ticket9167/spkg-take2.diff.gz)**

> Not quite ready for prime-time, but [this spkg](http://sage.math.washington.edu/home/kcrisman/ecl-12.7.1.p1.spkg) with the above diff.  This is just naively porting JP's diff.  Somehow I mixed up something, and also there is the problem with the weird tarring... but an attempt, anyway.

Okay, I see what I did wrong.  I still have the weird unknown extended keyword thing while untarring, but at least the patches apply now!  Waiting on the build, hopefully all will be well on Cygwin.



---

archive/issue_events_117568.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-12-06T17:30:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9167#event-117568"
}
```



---

archive/issue_events_117569.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-12-06T17:30:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9167#event-117569"
}
```



---

archive/issue_comments_076510.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">comment:72</div>\n\nAfter rebuilding the Maxima package, I get weird things on Mac.  They pretty much all look like this.\n\n```\nFile \"/Users/.../sage-5.4.rc2/devel/sage-main/sage/functions/piecewise.py\", line 396:\n    sage: f.integral(definite=True)\nException raised:\n<snip>\n        ecl_eval(\"(require 'maxima)\")\n      File \"ecl.pyx\", line 1236, in sage.libs.ecl.ecl_eval (sage/libs/ecl.c:6990)\n      File \"ecl.pyx\", line 1251, in sage.libs.ecl.ecl_eval (sage/libs/ecl.c:6927)\n      File \"ecl.pyx\", line 257, in sage.libs.ecl.ecl_safe_eval (sage/libs/ecl.c:2805)\n    RuntimeError: ECL says: Detected access to an invalid or protected memory address.\n```\nSo definitely not ready.  JP, did I miss something obvious?",
    "created_at": "2012-12-06T17:30:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76510",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:72" align="right">comment:72</div>

After rebuilding the Maxima package, I get weird things on Mac.  They pretty much all look like this.

```
File "/Users/.../sage-5.4.rc2/devel/sage-main/sage/functions/piecewise.py", line 396:
    sage: f.integral(definite=True)
Exception raised:
<snip>
        ecl_eval("(require 'maxima)")
      File "ecl.pyx", line 1236, in sage.libs.ecl.ecl_eval (sage/libs/ecl.c:6990)
      File "ecl.pyx", line 1251, in sage.libs.ecl.ecl_eval (sage/libs/ecl.c:6927)
      File "ecl.pyx", line 257, in sage.libs.ecl.ecl_safe_eval (sage/libs/ecl.c:2805)
    RuntimeError: ECL says: Detected access to an invalid or protected memory address.
```
So definitely not ready.  JP, did I miss something obvious?



---

archive/issue_comments_076511.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">comment:73</div>\n\nEh, and it didn't even work on Cygwin for some reason (that is, same import errors).  I'm going to try JP's again.",
    "created_at": "2012-12-06T17:46:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76511",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:73" align="right">comment:73</div>

Eh, and it didn't even work on Cygwin for some reason (that is, same import errors).  I'm going to try JP's again.



---

archive/issue_comments_076512.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">comment:74</div>\n\n> Eh, and it didn't even work on Cygwin for some reason (that is, same import errors).  I'm going to try JP's again.\n\nAnd now I get the same bad behavior (Mac and Cygwin).  I have a feeling that previous ECL stuff isn't properly destroyed when one does `sage -f ecl-x.y.z.spkg`.  But whatever.",
    "created_at": "2012-12-06T18:14:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76512",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:74" align="right">comment:74</div>

> Eh, and it didn't even work on Cygwin for some reason (that is, same import errors).  I'm going to try JP's again.

And now I get the same bad behavior (Mac and Cygwin).  I have a feeling that previous ECL stuff isn't properly destroyed when one does `sage -f ecl-x.y.z.spkg`.  But whatever.



---

archive/issue_comments_076513.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">comment:75</div>\n\nThat's strange, I guess you've rebuilt Maxima as well.",
    "created_at": "2012-12-10T13:05:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76513",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:75" align="right">comment:75</div>

That's strange, I guess you've rebuilt Maxima as well.



---

archive/issue_comments_076514.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">comment:76</div>\n\n> That's strange, I guess you've rebuilt Maxima as well.\n\nYes.  I think there were just leftover pieces around, I don't know how.  I think it's due to my own bad creation of the spkg.\n\nSo if you can provide an update to this spkg based on #13324, incorporating the same essential changes in the Cygwin-only case - no need to do anything fancy, just the same stuff - I would love to get that in.  The spkg you provided here earlier does still work on Cygwin, just checked a brand-new 5.5.rc0 build.",
    "created_at": "2012-12-10T17:42:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76514",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:76" align="right">comment:76</div>

> That's strange, I guess you've rebuilt Maxima as well.

Yes.  I think there were just leftover pieces around, I don't know how.  I think it's due to my own bad creation of the spkg.

So if you can provide an update to this spkg based on #13324, incorporating the same essential changes in the Cygwin-only case - no need to do anything fancy, just the same stuff - I would love to get that in.  The spkg you provided here earlier does still work on Cygwin, just checked a brand-new 5.5.rc0 build.



---

archive/issue_events_117570.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2012-12-18T17:13:52Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "title_is": "Resolve ecl.dll conflict on Cygwin",
    "title_was": "cygwin: importing sage.libs.ecl yields a \"no such process\" error",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9167#event-117570"
}
```



---

archive/issue_comments_076515.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -23,7 +23,4 @@\n In addition, an import file is created in SAGE_LOCAL/lib/libecl.dll.a.\n \n An updated spkg, based on the one in #13324, is available at\n-http://perso.telecom-paristech.fr/~flori/sage/ecl-12.7.1.p1.spkg\n-or\n-http://www.infres.enst.fr/~flori/sage/ecl-12.7.1.p1.spkg\n-\n+http://boxen.math.washington.edu/home/jpflori/ecl-12.12.1.p1.spkg\n``````\n",
    "created_at": "2012-12-18T17:13:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76515",
    "user": "https://github.com/jpflori"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -23,7 +23,4 @@
 In addition, an import file is created in SAGE_LOCAL/lib/libecl.dll.a.
 
 An updated spkg, based on the one in #13324, is available at
-http://perso.telecom-paristech.fr/~flori/sage/ecl-12.7.1.p1.spkg
-or
-http://www.infres.enst.fr/~flori/sage/ecl-12.7.1.p1.spkg
-
+http://boxen.math.washington.edu/home/jpflori/ecl-12.12.1.p1.spkg
``````




---

archive/issue_events_117571.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2012-12-18T17:13:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9167#event-117571"
}
```



---

archive/issue_events_117572.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2012-12-18T17:13:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9167#event-117572"
}
```



---

archive/issue_comments_076516.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">comment:77</div>\n\nNew spkg at\nhttp://boxen.math.washington.edu/home/jpflori/ecl-12.12.1.p1.spkg\n\nThe upstream feature request is\nhttp://sourceforge.net/p/ecls/feature-requests/15/",
    "created_at": "2012-12-18T17:13:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76516",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:77" align="right">comment:77</div>

New spkg at
http://boxen.math.washington.edu/home/jpflori/ecl-12.12.1.p1.spkg

The upstream feature request is
http://sourceforge.net/p/ecls/feature-requests/15/



---

archive/issue_comments_076517.json:
```json
{
    "body": "Patch to upstream build system.",
    "created_at": "2012-12-18T17:14:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76517",
    "user": "https://github.com/jpflori"
}
```

Patch to upstream build system.



---

archive/issue_comments_076518.json:
```json
{
    "body": "<div id=\"comment:78\" align=\"right\">comment:78</div>\n\nAttachment: **[implib.patch.gz](https://github.com/sagemath/sage/files/ticket9167/implib.patch.gz)**\n\nI guess I should have used a matching version of autoconf to generate a smaller diff.",
    "created_at": "2012-12-18T17:16:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76518",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:78" align="right">comment:78</div>

Attachment: **[implib.patch.gz](https://github.com/sagemath/sage/files/ticket9167/implib.patch.gz)**

I guess I should have used a matching version of autoconf to generate a smaller diff.



---

archive/issue_comments_076519.json:
```json
{
    "body": "Work Issues: **use matching autoconf**",
    "created_at": "2012-12-18T17:16:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76519",
    "user": "https://github.com/jpflori"
}
```

Work Issues: **use matching autoconf**



---

archive/issue_events_117573.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2012-12-18T17:16:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9167#event-117573"
}
```



---

archive/issue_events_117574.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2012-12-18T17:16:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9167#event-117574"
}
```



---

archive/issue_comments_076520.json:
```json
{
    "body": "<div id=\"comment:79\" align=\"right\">comment:79</div>\n\nXP report:\n\nI almost forgot to `./sage -b`!  But it **does** fix the problem, based off of the p0 spkg.  Yes!\n\nAnd before rebuilding Maxima I get the usual \"don't know how to require Maxima\" problem, but afterward, with the spkg from #13364, all is well.  Yay!  So all is well as far as I'm concerned.",
    "created_at": "2012-12-18T20:40:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76520",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:79" align="right">comment:79</div>

XP report:

I almost forgot to `./sage -b`!  But it **does** fix the problem, based off of the p0 spkg.  Yes!

And before rebuilding Maxima I get the usual "don't know how to require Maxima" problem, but afterward, with the spkg from #13364, all is well.  Yay!  So all is well as far as I'm concerned.



---

archive/issue_comments_076521.json:
```json
{
    "body": "<div id=\"comment:80\" align=\"right\">comment:80</div>\n\nBy the way, could this be upgraded irrespective of upgrading Maxima?  (I mean for Sage proper.)  If all we need is to change the location of the Maxima library, maybe we could avoid having to track down the doctest issues in #13364 right now, by providing a minimal Maxima spkg change here.",
    "created_at": "2012-12-19T14:45:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76521",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:80" align="right">comment:80</div>

By the way, could this be upgraded irrespective of upgrading Maxima?  (I mean for Sage proper.)  If all we need is to change the location of the Maxima library, maybe we could avoid having to track down the doctest issues in #13364 right now, by providing a minimal Maxima spkg change here.



---

archive/issue_comments_076522.json:
```json
{
    "body": "Reviewer: **Karl-Dieter Crisman**",
    "created_at": "2012-12-19T14:45:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76522",
    "user": "https://github.com/kcrisman"
}
```

Reviewer: **Karl-Dieter Crisman**



---

archive/issue_comments_076523.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">comment:81</div>\n\nReplying to [@kcrisman](#comment:80):\n> By the way, could this be upgraded irrespective of upgrading Maxima?  (I mean for Sage proper.)  If all we need is to change the location of the Maxima library, maybe we could avoid having to track down the doctest issues in #13364 right now, by providing a minimal Maxima spkg change here.\n\nTo ease things, I'd then not hard-code the (new) name, but test whether `maxima.system.fasb` is present, and if so, copy that, otherwise (try to) copy `maxima.fasb`, or bail out if none of these is present.\n\n(Something we should probably do at #13364 as well.)",
    "created_at": "2012-12-19T15:53:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76523",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:81" align="right">comment:81</div>

Replying to [@kcrisman](#comment:80):
> By the way, could this be upgraded irrespective of upgrading Maxima?  (I mean for Sage proper.)  If all we need is to change the location of the Maxima library, maybe we could avoid having to track down the doctest issues in #13364 right now, by providing a minimal Maxima spkg change here.

To ease things, I'd then not hard-code the (new) name, but test whether `maxima.system.fasb` is present, and if so, copy that, otherwise (try to) copy `maxima.fasb`, or bail out if none of these is present.

(Something we should probably do at #13364 as well.)



---

archive/issue_comments_076524.json:
```json
{
    "body": "<div id=\"comment:82\" align=\"right\">comment:82</div>\n\nReplying to [@nexttime](#comment:81):\n> Replying to [@kcrisman](#comment:80):\n> > By the way, could this be upgraded irrespective of upgrading Maxima?  (I mean for Sage proper.)  If all we need is to change the location of the Maxima library, maybe we could avoid having to track down the doctest issues in #13364 right now, by providing a minimal Maxima spkg change here.\n\nindeed, this can and should be done.\n\n> \n> To ease things, I'd then not hard-code the (new) name, but test whether `maxima.system.fasb` is present, and if so, copy that, otherwise (try to) copy `maxima.fasb`, or bail out if none of these is present.\n\ngood idea!\n\n> \n> (Something we should probably do at #13364 as well.)\n\n>",
    "created_at": "2012-12-19T16:33:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76524",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:82" align="right">comment:82</div>

Replying to [@nexttime](#comment:81):
> Replying to [@kcrisman](#comment:80):
> > By the way, could this be upgraded irrespective of upgrading Maxima?  (I mean for Sage proper.)  If all we need is to change the location of the Maxima library, maybe we could avoid having to track down the doctest issues in #13364 right now, by providing a minimal Maxima spkg change here.

indeed, this can and should be done.

> 
> To ease things, I'd then not hard-code the (new) name, but test whether `maxima.system.fasb` is present, and if so, copy that, otherwise (try to) copy `maxima.fasb`, or bail out if none of these is present.

good idea!

> 
> (Something we should probably do at #13364 as well.)

>



---

archive/issue_comments_076525.json:
```json
{
    "body": "<div id=\"comment:83\" align=\"right\">comment:83</div>\n\nFeel free to do so in another ticket, change dependencies here, update #13364 to be based on this new ticket, and remove dependency on this ECL ticket form #13364.",
    "created_at": "2012-12-19T16:51:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76525",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:83" align="right">comment:83</div>

Feel free to do so in another ticket, change dependencies here, update #13364 to be based on this new ticket, and remove dependency on this ECL ticket form #13364.



---

archive/issue_comments_076526.json:
```json
{
    "body": "<div id=\"comment:84\" align=\"right\">comment:84</div>\n\nReplying to [@jpflori](#comment:83):\n> Feel free to do so in another ticket, change dependencies here, update #13364 to be based on this new ticket, and remove dependency on this ECL ticket form #13364.\n\nI'd rather see this ticket brought to completion. I imagine it's just a small autoconf fix, right?\nI'm adding to the ticket description a link to updated maxima 5.26 spkg.\n\nCan one close #13324 as a duplicate?",
    "created_at": "2012-12-19T17:32:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76526",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:84" align="right">comment:84</div>

Replying to [@jpflori](#comment:83):
> Feel free to do so in another ticket, change dependencies here, update #13364 to be based on this new ticket, and remove dependency on this ECL ticket form #13364.

I'd rather see this ticket brought to completion. I imagine it's just a small autoconf fix, right?
I'm adding to the ticket description a link to updated maxima 5.26 spkg.

Can one close #13324 as a duplicate?



---

archive/issue_events_117575.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-12-19T17:32:12Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "title_is": "Update ECL and resolve ecl.dll conflict on Cygwin",
    "title_was": "Resolve ecl.dll conflict on Cygwin",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9167#event-117575"
}
```



---

archive/issue_events_117576.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-12-19T17:32:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9167#event-117576"
}
```



---

archive/issue_events_117577.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-12-19T17:32:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9167#event-117577"
}
```



---

archive/issue_comments_076527.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -24,3 +24,7 @@\n \n An updated spkg, based on the one in #13324, is available at\n http://boxen.math.washington.edu/home/jpflori/ecl-12.12.1.p1.spkg\n+\n+As ECL also comes with a new ASDF, one needs a small change in spkg-install. It is done in\n+http://boxen.math.washington.edu/home/dima/packages/maxima-5.26.0.p1.spkg\n+\n``````\n",
    "created_at": "2012-12-19T17:32:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76527",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -24,3 +24,7 @@
 
 An updated spkg, based on the one in #13324, is available at
 http://boxen.math.washington.edu/home/jpflori/ecl-12.12.1.p1.spkg
+
+As ECL also comes with a new ASDF, one needs a small change in spkg-install. It is done in
+http://boxen.math.washington.edu/home/dima/packages/maxima-5.26.0.p1.spkg
+
``````




---

archive/issue_events_117578.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-12-19T17:32:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9167#event-117578"
}
```



---

archive/issue_events_117579.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-12-19T17:32:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9167#event-117579"
}
```



---

archive/issue_comments_076528.json:
```json
{
    "body": "<div id=\"comment:86\" align=\"right\">comment:86</div>\n\nI think that #13324 still needs_review and potential firther changes (no feedback from upstream yet on the uncaught segfault issue).\n\nClosing #13324 would be similar to what I wanted to do for #12115 and #13137 except for the fact that #12115 was kind of trivial and got merged into #13137, whereas here we would merge a big (almost functional?) ticket into a simpler (but potentially more controversial) one.\n\nFurthermore, as this one is only needed on Cygwin, I'm even more inclined to think it might be better to wait for #13324 to be properly merged, and then go with this one.\nIf you really want to use it, just download it and do so.\n\nAnd I still think the change to Maxima spkg-install script should be done in an independent (and quite trivial) ticket called something like \"let Maxima spkg properly install with different version of ECL\", it would be merged really quicly, and then rebase #13364 to update Maxima on top of that new ticket.\n\nWith this approach people could just drop in different versions of ECl and ply with them.\n\nGenerally I feel that keeping issues, or even \"independent\" changes, into separated tickets is a good idea.",
    "created_at": "2012-12-19T17:43:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76528",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:86" align="right">comment:86</div>

I think that #13324 still needs_review and potential firther changes (no feedback from upstream yet on the uncaught segfault issue).

Closing #13324 would be similar to what I wanted to do for #12115 and #13137 except for the fact that #12115 was kind of trivial and got merged into #13137, whereas here we would merge a big (almost functional?) ticket into a simpler (but potentially more controversial) one.

Furthermore, as this one is only needed on Cygwin, I'm even more inclined to think it might be better to wait for #13324 to be properly merged, and then go with this one.
If you really want to use it, just download it and do so.

And I still think the change to Maxima spkg-install script should be done in an independent (and quite trivial) ticket called something like "let Maxima spkg properly install with different version of ECL", it would be merged really quicly, and then rebase #13364 to update Maxima on top of that new ticket.

With this approach people could just drop in different versions of ECl and ply with them.

Generally I feel that keeping issues, or even "independent" changes, into separated tickets is a good idea.



---

archive/issue_comments_076529.json:
```json
{
    "body": "<div id=\"comment:87\" align=\"right\">comment:87</div>\n\nYeah, and Jeroen ranted when I asked to close #12115 and merge it within #13137 and I understand his point :)",
    "created_at": "2012-12-19T17:44:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76529",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:87" align="right">comment:87</div>

Yeah, and Jeroen ranted when I asked to close #12115 and merge it within #13137 and I understand his point :)



---

archive/issue_comments_076530.json:
```json
{
    "body": "<div id=\"comment:88\" align=\"right\">comment:88</div>\n\nReplying to [@jpflori](#comment:86):\n> I think that #13324 still needs_review and potential firther changes (no feedback from upstream yet on the uncaught segfault issue).\n> \n> Closing #13324 would be similar to what I wanted to do for #12115 and #13137 except for the fact that #12115 was kind of trivial and got merged into #13137, whereas here we would merge a big (almost functional?) ticket into a simpler (but potentially more controversial) one.\n\n#13324 is partially duplicating #13364. The segfault one sees with Maxima is due to an infinite recursion in some Maxima code, as\nis acknowledged on [maxima bug tracker, bug 2520](https://sourceforge.net/p/maxima/bugs/2520/). I am not sure ECL can be blamed for crashing on this.",
    "created_at": "2012-12-19T17:57:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76530",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:88" align="right">comment:88</div>

Replying to [@jpflori](#comment:86):
> I think that #13324 still needs_review and potential firther changes (no feedback from upstream yet on the uncaught segfault issue).
> 
> Closing #13324 would be similar to what I wanted to do for #12115 and #13137 except for the fact that #12115 was kind of trivial and got merged into #13137, whereas here we would merge a big (almost functional?) ticket into a simpler (but potentially more controversial) one.

#13324 is partially duplicating #13364. The segfault one sees with Maxima is due to an infinite recursion in some Maxima code, as
is acknowledged on [maxima bug tracker, bug 2520](https://sourceforge.net/p/maxima/bugs/2520/). I am not sure ECL can be blamed for crashing on this.



---

archive/issue_comments_076531.json:
```json
{
    "body": "<div id=\"comment:89\" align=\"right\">comment:89</div>\n\nAs was demonstrated, other Lisp interpreters catch the error more gracefully.\nI must say I don't really care, especially that when Maxima is fixed, there should be nothing to catch anymore, but if a fix is possible and is devised, we could include it in #13324 or a further ECL update where it belongs.",
    "created_at": "2012-12-19T18:01:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76531",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:89" align="right">comment:89</div>

As was demonstrated, other Lisp interpreters catch the error more gracefully.
I must say I don't really care, especially that when Maxima is fixed, there should be nothing to catch anymore, but if a fix is possible and is devised, we could include it in #13324 or a further ECL update where it belongs.



---

archive/issue_comments_076532.json:
```json
{
    "body": "<div id=\"comment:90\" align=\"right\">comment:90</div>\n\nReplying to [@jpflori](#comment:86):\n> And I still think the change to Maxima spkg-install script should be done in an independent (and quite trivial) ticket called something like \"let Maxima spkg properly install with different version of ECL\", it would be merged really quicly, and then rebase #13364 to update Maxima on top of that new ticket.\n\nYep, that's what I was thinking of as well.  (Unless the Maxima guys [and probably we, too] are super-quick and fix all issues within the next few days...)\n\n\n> With this approach people could just drop in different versions of ECl and ply with them.\n\nAlthough I occasionally hear the contrary (e.g. \"Why let LCalc build with different versions of PARI?\"), we shouldn't establish unnecessary dependencies, so yes.\n\n\n\n\n> Generally I feel that keeping issues, or even \"independent\" changes, into separated tickets is a good idea.\n\n*Generally.*  Unfortunately often N developers touch the \"same\" code (or spkgs) such that at least N-1 developers have to rebase their changes M<sub>N</sub> times, or the fixes just rotten and never get merged.",
    "created_at": "2012-12-19T20:21:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76532",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:90" align="right">comment:90</div>

Replying to [@jpflori](#comment:86):
> And I still think the change to Maxima spkg-install script should be done in an independent (and quite trivial) ticket called something like "let Maxima spkg properly install with different version of ECL", it would be merged really quicly, and then rebase #13364 to update Maxima on top of that new ticket.

Yep, that's what I was thinking of as well.  (Unless the Maxima guys [and probably we, too] are super-quick and fix all issues within the next few days...)


> With this approach people could just drop in different versions of ECl and ply with them.

Although I occasionally hear the contrary (e.g. "Why let LCalc build with different versions of PARI?"), we shouldn't establish unnecessary dependencies, so yes.




> Generally I feel that keeping issues, or even "independent" changes, into separated tickets is a good idea.

*Generally.*  Unfortunately often N developers touch the "same" code (or spkgs) such that at least N-1 developers have to rebase their changes M<sub>N</sub> times, or the fixes just rotten and never get merged.



---

archive/issue_comments_076533.json:
```json
{
    "body": "<div id=\"comment:91\" align=\"right\">comment:91</div>\n\nReplying to [@nexttime](#comment:81):\n> Replying to [@kcrisman](#comment:80):\n> > By the way, could this be upgraded irrespective of upgrading Maxima?  (I mean for Sage proper.)  If all we need is to change the location of the Maxima library, maybe we could avoid having to track down the doctest issues in #13364 right now, by providing a minimal Maxima spkg change here.\n\n> \n> To ease things, I'd then not hard-code the (new) name, but test whether `maxima.system.fasb` is present, and if so, copy that, otherwise (try to) copy `maxima.fasb`, or bail out if none of these is present.\n\nOK, this is now #13860\n\nPlease review!",
    "created_at": "2012-12-23T08:31:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76533",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:91" align="right">comment:91</div>

Replying to [@nexttime](#comment:81):
> Replying to [@kcrisman](#comment:80):
> > By the way, could this be upgraded irrespective of upgrading Maxima?  (I mean for Sage proper.)  If all we need is to change the location of the Maxima library, maybe we could avoid having to track down the doctest issues in #13364 right now, by providing a minimal Maxima spkg change here.

> 
> To ease things, I'd then not hard-code the (new) name, but test whether `maxima.system.fasb` is present, and if so, copy that, otherwise (try to) copy `maxima.fasb`, or bail out if none of these is present.

OK, this is now #13860

Please review!



---

archive/issue_comments_076534.json:
```json
{
    "body": "Changed dependencies from **#13324** to **#13324 #13860**",
    "created_at": "2012-12-24T17:05:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76534",
    "user": "https://github.com/nexttime"
}
```

Changed dependencies from **#13324** to **#13324 #13860**



---

archive/issue_comments_076535.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-Though the C-library interface to ecl builds on cygwin, it does not work at all.  All tests fail:\n+Though the C-library interface to ECL builds on Cygwin, it does not work at all.  All tests fail:\n \n ```\n sage: import sage.libs.ecl\n@@ -11,20 +11,20 @@\n sage: \n ```\n \n-The reason of this is a name clash: there are two different libraries called ecl.dll.\n-One in SAGE_LOCAL/lib/ and one in SAGE_LOCAL/lib/python/site-packages/sage/libs/\n-It is the second one whose importing fails because it should be linked to the first one, but cygcheck shows that this dependency is resolved to itself!\n+The reason of this is a name clash: there are two different libraries called `ecl.dll`.\n+One in `SAGE_LOCAL/lib/` and one in `SAGE_LOCAL/lib/python/site-packages/sage/libs/`.\n+It is the second one whose importing fails because it should be linked to the first one, but `cygcheck` shows that this dependency is resolved to itself!\n This is of course dysfunctional, whence the import failure.\n \n-The easiest solution would be to rename sage/libs/ecl.pyx to something else,thus avoiding a name clash.\n+The easiest solution would be to rename `sage/libs/ecl.pyx` to something else, thus avoiding a name clash.\n The solution proposed here is different and more indirect:\n-patch ECL build system so that it follows the name convention proposed by Cygwin.\n-The shared library itself is now in SAGE_LOCAL/bin/cygecl.dll.\n-In addition, an import file is created in SAGE_LOCAL/lib/libecl.dll.a.\n+Patch ECL build system so that it follows the name convention proposed by Cygwin.\n+The shared library itself is now in `SAGE_LOCAL/bin/cygecl.dll`.\n+In addition, an import file is created in `SAGE_LOCAL/lib/libecl.dll.a`.\n \n An updated spkg, based on the one in #13324, is available at\n http://boxen.math.washington.edu/home/jpflori/ecl-12.12.1.p1.spkg\n \n-As ECL also comes with a new ASDF, one needs a small change in spkg-install. It is done in\n-http://boxen.math.washington.edu/home/dima/packages/maxima-5.26.0.p1.spkg\n+As ECL also comes with a new ASDF, one needs a small change in Maxima's `spkg-install`. It is done in\n+http://boxen.math.washington.edu/home/dima/packages/maxima-5.26.0.p1.spkg (#13860).\n \n``````\n",
    "created_at": "2012-12-24T17:05:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76535",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-Though the C-library interface to ecl builds on cygwin, it does not work at all.  All tests fail:
+Though the C-library interface to ECL builds on Cygwin, it does not work at all.  All tests fail:
 
 ```
 sage: import sage.libs.ecl
@@ -11,20 +11,20 @@
 sage: 
 ```
 
-The reason of this is a name clash: there are two different libraries called ecl.dll.
-One in SAGE_LOCAL/lib/ and one in SAGE_LOCAL/lib/python/site-packages/sage/libs/
-It is the second one whose importing fails because it should be linked to the first one, but cygcheck shows that this dependency is resolved to itself!
+The reason of this is a name clash: there are two different libraries called `ecl.dll`.
+One in `SAGE_LOCAL/lib/` and one in `SAGE_LOCAL/lib/python/site-packages/sage/libs/`.
+It is the second one whose importing fails because it should be linked to the first one, but `cygcheck` shows that this dependency is resolved to itself!
 This is of course dysfunctional, whence the import failure.
 
-The easiest solution would be to rename sage/libs/ecl.pyx to something else,thus avoiding a name clash.
+The easiest solution would be to rename `sage/libs/ecl.pyx` to something else, thus avoiding a name clash.
 The solution proposed here is different and more indirect:
-patch ECL build system so that it follows the name convention proposed by Cygwin.
-The shared library itself is now in SAGE_LOCAL/bin/cygecl.dll.
-In addition, an import file is created in SAGE_LOCAL/lib/libecl.dll.a.
+Patch ECL build system so that it follows the name convention proposed by Cygwin.
+The shared library itself is now in `SAGE_LOCAL/bin/cygecl.dll`.
+In addition, an import file is created in `SAGE_LOCAL/lib/libecl.dll.a`.
 
 An updated spkg, based on the one in #13324, is available at
 http://boxen.math.washington.edu/home/jpflori/ecl-12.12.1.p1.spkg
 
-As ECL also comes with a new ASDF, one needs a small change in spkg-install. It is done in
-http://boxen.math.washington.edu/home/dima/packages/maxima-5.26.0.p1.spkg
+As ECL also comes with a new ASDF, one needs a small change in Maxima's `spkg-install`. It is done in
+http://boxen.math.washington.edu/home/dima/packages/maxima-5.26.0.p1.spkg (#13860).
 
``````




---

archive/issue_comments_076536.json:
```json
{
    "body": "<div id=\"comment:93\" align=\"right\">comment:93</div>\n\n> OK, this is now #13860\n> \n> Please review!\n\nApparently that has positive review now.  JP, do we really need to generate a smaller patch with \"use matching autoconf\", or is that unnecessary?  This ticket is currently \"needs info\" but it isn't clear to me what info is needed.  Is it really sage-pending on #13324, or is there something else we're trying to get feedback on?  Thanks.",
    "created_at": "2012-12-29T03:54:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76536",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:93" align="right">comment:93</div>

> OK, this is now #13860
> 
> Please review!

Apparently that has positive review now.  JP, do we really need to generate a smaller patch with "use matching autoconf", or is that unnecessary?  This ticket is currently "needs info" but it isn't clear to me what info is needed.  Is it really sage-pending on #13324, or is there something else we're trying to get feedback on?  Thanks.



---

archive/issue_comments_076537.json:
```json
{
    "body": "<div id=\"comment:94\" align=\"right\">comment:94</div>\n\nReplying to [@kcrisman](#comment:93):\n> > OK, this is now #13860\n> > \n> > Please review!\n\n> \n> Apparently that has positive review now.  JP, do we really need to generate a smaller patch with \"use matching autoconf\", or is that unnecessary?  This ticket is currently \"needs info\" but it isn't clear to me what info is needed.  Is it really sage-pending on #13324, or is there something else we're trying to get feedback on?  Thanks.\n\nI'd like to get upstream feedback on the import library changes and include an official patch rather mine.\nI guess we'll have to wait for the end of the holidays for that :)",
    "created_at": "2013-01-04T10:53:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76537",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:94" align="right">comment:94</div>

Replying to [@kcrisman](#comment:93):
> > OK, this is now #13860
> > 
> > Please review!

> 
> Apparently that has positive review now.  JP, do we really need to generate a smaller patch with "use matching autoconf", or is that unnecessary?  This ticket is currently "needs info" but it isn't clear to me what info is needed.  Is it really sage-pending on #13324, or is there something else we're trying to get feedback on?  Thanks.

I'd like to get upstream feedback on the import library changes and include an official patch rather mine.
I guess we'll have to wait for the end of the holidays for that :)



---

archive/issue_comments_076538.json:
```json
{
    "body": "<div id=\"comment:95\" align=\"right\">comment:95</div>\n\nAnd inbetween we can already get #13324 merged...",
    "created_at": "2013-01-04T10:54:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76538",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:95" align="right">comment:95</div>

And inbetween we can already get #13324 merged...



---

archive/issue_comments_076539.json:
```json
{
    "body": "<div id=\"comment:96\" align=\"right\">comment:96</div>\n\n> And inbetween we can already get #13324 merged...\n\nAnd maybe even #13364...",
    "created_at": "2013-01-04T14:31:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76539",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:96" align="right">comment:96</div>

> And inbetween we can already get #13324 merged...

And maybe even #13364...



---

archive/issue_events_117580.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2013-01-04T14:34:12Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "title_is": "Resolve ecl.dll conflict on Cygwin",
    "title_was": "Update ECL and resolve ecl.dll conflict on Cygwin",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9167#event-117580"
}
```



---

archive/issue_comments_076540.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -26,5 +26,4 @@\n http://boxen.math.washington.edu/home/jpflori/ecl-12.12.1.p1.spkg\n \n As ECL also comes with a new ASDF, one needs a small change in Maxima's `spkg-install`. It is done in\n-http://boxen.math.washington.edu/home/dima/packages/maxima-5.26.0.p1.spkg (#13860).\n-\n+http://boxen.math.washington.edu/home/dima/packages/maxima-5.26.0.p1.spkg (#13860); Sage 5.6.beta2 and forward include this fix.\n``````\n",
    "created_at": "2013-01-04T15:25:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76540",
    "user": "https://github.com/kcrisman"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -26,5 +26,4 @@
 http://boxen.math.washington.edu/home/jpflori/ecl-12.12.1.p1.spkg
 
 As ECL also comes with a new ASDF, one needs a small change in Maxima's `spkg-install`. It is done in
-http://boxen.math.washington.edu/home/dima/packages/maxima-5.26.0.p1.spkg (#13860).
-
+http://boxen.math.washington.edu/home/dima/packages/maxima-5.26.0.p1.spkg (#13860); Sage 5.6.beta2 and forward include this fix.
``````




---

archive/issue_comments_076541.json:
```json
{
    "body": "<div id=\"comment:99\" align=\"right\">comment:99</div>\n\n> I'd like to get upstream feedback on the import library changes and include an official patch rather mine.\n> I guess we'll have to wait for the end of the holidays for that :)\n\nMy holidays are done :)  And it does look like there has been some activity on the ECL list again.  But I think that's not important and we can all take a break, because...\n\nReally I think there is no reason to wait on upstream; Sage does contribute upstream, but we still take care of our own.  Is there anything *else* you would want to change here?  even the whole \"generate smaller patch\" thing seems less significant.  As far as I'm concerned, the current spkg is fine especially since the \"dependencies\" in Maxima and ECL are in/positive review.",
    "created_at": "2013-01-14T17:08:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76541",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:99" align="right">comment:99</div>

> I'd like to get upstream feedback on the import library changes and include an official patch rather mine.
> I guess we'll have to wait for the end of the holidays for that :)

My holidays are done :)  And it does look like there has been some activity on the ECL list again.  But I think that's not important and we can all take a break, because...

Really I think there is no reason to wait on upstream; Sage does contribute upstream, but we still take care of our own.  Is there anything *else* you would want to change here?  even the whole "generate smaller patch" thing seems less significant.  As far as I'm concerned, the current spkg is fine especially since the "dependencies" in Maxima and ECL are in/positive review.



---

archive/issue_events_117581.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2013-01-14T17:08:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9167#event-117581"
}
```



---

archive/issue_events_117582.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2013-01-14T17:08:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9167#event-117582"
}
```



---

archive/issue_comments_076542.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nThat's fair, I'll check the spkg is clean cause I don't really remember right now and report back here so someone motivated can put this as positive review (I guess you could as this is really only Cygwin (and MinGW) related and should have no effect on any other system).",
    "created_at": "2013-01-15T08:24:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76542",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:0" align="right">comment:0</div>

That's fair, I'll check the spkg is clean cause I don't really remember right now and report back here so someone motivated can put this as positive review (I guess you could as this is really only Cygwin (and MinGW) related and should have no effect on any other system).



---

archive/issue_comments_076543.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nJust a reminder for me, I should add a simple hack to take care of http://sourceforge.net/p/ecls/bugs/222/ in order to produce cleaner libs as well.",
    "created_at": "2013-01-15T08:35:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76543",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:1" align="right">comment:1</div>

Just a reminder for me, I should add a simple hack to take care of http://sourceforge.net/p/ecls/bugs/222/ in order to produce cleaner libs as well.



---

archive/issue_comments_076544.json:
```json
{
    "body": "<div id=\"comment:102\" align=\"right\">comment:102</div>\n\n> Just a reminder for me, I should add a simple hack to take care of http://sourceforge.net/p/ecls/bugs/222/ in order to produce cleaner libs as well.\n\nMaybe that *can* wait for upstream; I don't think it's necessary here and I don't know if I'll have the chance to test things as much now.",
    "created_at": "2013-01-15T14:29:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76544",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:102" align="right">comment:102</div>

> Just a reminder for me, I should add a simple hack to take care of http://sourceforge.net/p/ecls/bugs/222/ in order to produce cleaner libs as well.

Maybe that *can* wait for upstream; I don't think it's necessary here and I don't know if I'll have the chance to test things as much now.



---

archive/issue_comments_076545.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nOk, I've looked back at the spkg and it looks clean in fact.\nAs you suggested I won't include additional (and not absolutely necessary) fixes.\n\nSo if you feel inclined, please put this as positive review.\nThe main points I guess are to:\n* check it works as expected on Cygwin (and makes something somehow sensible),\n* look at the patch to make sure it does not do anything on other platforms,\n* check the spkg is clean.\n\nIf #13324 goes in in a previous release, I guess we'll have to properly rebase it because of hg history and tags?\nBut I feel it is not necessary if this ticket and #13324 get merged at once in 5.7, is that right?\nWhat would be your strategy Jeroen?",
    "created_at": "2013-01-18T09:02:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76545",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:3" align="right">comment:3</div>

Ok, I've looked back at the spkg and it looks clean in fact.
As you suggested I won't include additional (and not absolutely necessary) fixes.

So if you feel inclined, please put this as positive review.
The main points I guess are to:
* check it works as expected on Cygwin (and makes something somehow sensible),
* look at the patch to make sure it does not do anything on other platforms,
* check the spkg is clean.

If #13324 goes in in a previous release, I guess we'll have to properly rebase it because of hg history and tags?
But I feel it is not necessary if this ticket and #13324 get merged at once in 5.7, is that right?
What would be your strategy Jeroen?



---

archive/issue_comments_076546.json:
```json
{
    "body": "<div id=\"comment:104\" align=\"right\">comment:104</div>\n\nReplying to [@jpflori](#comment:103):\n> What would be your strategy Jeroen?\n\nThe plan is certainly to merge #13324 in sage-5.7.beta0.  Of course, unexpected problems can always appear, but so far the new ECL has passed all buildbot tests.\n\nI don't quite understand how this ticket relates to #13324, as that is also about Cygwin...",
    "created_at": "2013-01-18T09:16:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76546",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:104" align="right">comment:104</div>

Replying to [@jpflori](#comment:103):
> What would be your strategy Jeroen?

The plan is certainly to merge #13324 in sage-5.7.beta0.  Of course, unexpected problems can always appear, but so far the new ECL has passed all buildbot tests.

I don't quite understand how this ticket relates to #13324, as that is also about Cygwin...



---

archive/issue_comments_076547.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\n#13324 was only about building ecl on Cygwin.\nThis ticket is about resolving a conflict between the main ecl library being called ecl.dll and the one for the ecl interface in Sage having the same name.\nIndeed Windows cannot deal will that: the latter one should link to the former one but at runtime it resolves this dependency by linking back to itself because of the name collision...",
    "created_at": "2013-01-18T09:49:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76547",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:5" align="right">comment:5</div>

#13324 was only about building ecl on Cygwin.
This ticket is about resolving a conflict between the main ecl library being called ecl.dll and the one for the ecl interface in Sage having the same name.
Indeed Windows cannot deal will that: the latter one should link to the former one but at runtime it resolves this dependency by linking back to itself because of the name collision...



---

archive/issue_comments_076548.json:
```json
{
    "body": "Changed dependencies from **#13324 #13860** to **#13324, #13860**",
    "created_at": "2013-01-18T10:21:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76548",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#13324 #13860** to **#13324, #13860**



---

archive/issue_comments_076549.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -23,7 +23,4 @@\n In addition, an import file is created in `SAGE_LOCAL/lib/libecl.dll.a`.\n \n An updated spkg, based on the one in #13324, is available at\n-http://boxen.math.washington.edu/home/jpflori/ecl-12.12.1.p1.spkg\n-\n-As ECL also comes with a new ASDF, one needs a small change in Maxima's `spkg-install`. It is done in\n-http://boxen.math.washington.edu/home/dima/packages/maxima-5.26.0.p1.spkg (#13860); Sage 5.6.beta2 and forward include this fix.\n+[http://boxen.math.washington.edu/home/jpflori/ecl-12.12.1.p1.spkg](http://boxen.math.washington.edu/home/jpflori/ecl-12.12.1.p1.spkg)\n``````\n",
    "created_at": "2013-01-18T10:21:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76549",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -23,7 +23,4 @@
 In addition, an import file is created in `SAGE_LOCAL/lib/libecl.dll.a`.
 
 An updated spkg, based on the one in #13324, is available at
-http://boxen.math.washington.edu/home/jpflori/ecl-12.12.1.p1.spkg
-
-As ECL also comes with a new ASDF, one needs a small change in Maxima's `spkg-install`. It is done in
-http://boxen.math.washington.edu/home/dima/packages/maxima-5.26.0.p1.spkg (#13860); Sage 5.6.beta2 and forward include this fix.
+[http://boxen.math.washington.edu/home/jpflori/ecl-12.12.1.p1.spkg](http://boxen.math.washington.edu/home/jpflori/ecl-12.12.1.p1.spkg)
``````




---

archive/issue_comments_076550.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nIdeally, the `hg` history would be preserved so I prefer a proper rebase to #13324.  But let's wait until sage-5.7.beta0 is released.\n\nIn any case, this ticket still needs to be reviewed (without worrying about rebasing for now).",
    "created_at": "2013-01-18T10:24:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76550",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:7" align="right">comment:7</div>

Ideally, the `hg` history would be preserved so I prefer a proper rebase to #13324.  But let's wait until sage-5.7.beta0 is released.

In any case, this ticket still needs to be reviewed (without worrying about rebasing for now).



---

archive/issue_comments_076551.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nConcerning \"autoconf\": the autotools optional package should solve that problem.  Install that package in some Sage version (this doesn't have to be Cygwin), run a Sage shell and then run autoconf/automake/autowhatever from within that Sage shell.",
    "created_at": "2013-01-18T10:28:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76551",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">comment:8</div>

Concerning "autoconf": the autotools optional package should solve that problem.  Install that package in some Sage version (this doesn't have to be Cygwin), run a Sage shell and then run autoconf/automake/autowhatever from within that Sage shell.



---

archive/issue_events_117583.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2013-01-18T10:31:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9167#event-117583"
}
```



---

archive/issue_events_117584.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2013-01-18T10:31:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9167#event-117584"
}
```



---

archive/issue_comments_076552.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nYeah I'm aware of that... and you just made me realize that's what I originally intended to do and forgot to do this morning although it's written evreywhere in this ticket.",
    "created_at": "2013-01-18T10:31:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76552",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:9" align="right">comment:9</div>

Yeah I'm aware of that... and you just made me realize that's what I originally intended to do and forgot to do this morning although it's written evreywhere in this ticket.



---

archive/issue_comments_076553.json:
```json
{
    "body": "Changed work issues from **use matching autoconf** to none",
    "created_at": "2013-01-18T10:40:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76553",
    "user": "https://github.com/jpflori"
}
```

Changed work issues from **use matching autoconf** to none



---

archive/issue_events_117585.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2013-01-18T10:40:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9167#event-117585"
}
```



---

archive/issue_events_117586.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2013-01-18T10:40:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9167#event-117586"
}
```



---

archive/issue_comments_076554.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nDone (I'm aware about the not changed date in SPKG.txt but whatever).",
    "created_at": "2013-01-18T10:40:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76554",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:0" align="right">comment:0</div>

Done (I'm aware about the not changed date in SPKG.txt but whatever).



---

archive/issue_comments_076555.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nBeware with timestamps when patching `configure`!\n\nYou must ensure that the timestamp of `configure` is more recent than that of the various `.in` files, otherwise `make` might want to rerun `autoconf`, leading to potential failures.\n\nOne solution is to edit the patch file such that `configure` comes last, as `patch` processes files in order.  Or manually `touch configure` afterwards.",
    "created_at": "2013-01-18T10:45:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76555",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:1" align="right">comment:1</div>

Beware with timestamps when patching `configure`!

You must ensure that the timestamp of `configure` is more recent than that of the various `.in` files, otherwise `make` might want to rerun `autoconf`, leading to potential failures.

One solution is to edit the patch file such that `configure` comes last, as `patch` processes files in order.  Or manually `touch configure` afterwards.



---

archive/issue_comments_076556.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nTrue indeed, doing that now, sorry for being that lame on this one.",
    "created_at": "2013-01-18T10:49:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76556",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:2" align="right">comment:2</div>

True indeed, doing that now, sorry for being that lame on this one.



---

archive/issue_comments_076557.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nShould be ok now (I've even taken the time to actually try to build it (on Linux)).",
    "created_at": "2013-01-18T10:53:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76557",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:3" align="right">comment:3</div>

Should be ok now (I've even taken the time to actually try to build it (on Linux)).



---

archive/issue_comments_076558.json:
```json
{
    "body": "Attachment: **[ecl-12.12.1.p1.diff.gz](https://github.com/sagemath/sage/files/ticket9167/ecl-12.12.1.p1.diff.gz)**\n\nSpkg diff, for review only.",
    "created_at": "2013-01-18T10:54:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76558",
    "user": "https://github.com/jpflori"
}
```

Attachment: **[ecl-12.12.1.p1.diff.gz](https://github.com/sagemath/sage/files/ticket9167/ecl-12.12.1.p1.diff.gz)**

Spkg diff, for review only.



---

archive/issue_comments_076559.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nGrmph, the train's wifi cut me off...\n\nShort version: is there anything actually different from the previous spkg that did work?  I also can't see any configure changes in the patch, maybe that's a good thing.",
    "created_at": "2013-01-18T13:21:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76559",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:4" align="right">comment:4</div>

Grmph, the train's wifi cut me off...

Short version: is there anything actually different from the previous spkg that did work?  I also can't see any configure changes in the patch, maybe that's a good thing.



---

archive/issue_comments_076560.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nOkay, all relevant tests pass with this (and a rebuilt Maxima) on Mac.  I say positive review, assuming JP clarifies my dumb comment about configure and he confirms that he fixed the timestamp issue (I think he is saying that he did in [comment:112](#comment:112)).",
    "created_at": "2013-01-22T16:49:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76560",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:5" align="right">comment:5</div>

Okay, all relevant tests pass with this (and a rebuilt Maxima) on Mac.  I say positive review, assuming JP clarifies my dumb comment about configure and he confirms that he fixed the timestamp issue (I think he is saying that he did in [comment:112](#comment:112)).



---

archive/issue_comments_076561.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nThe implib.patch I posted here only touches the autotools file (you then need to somehow regenerate the build system, let's say autoreconf -i).\n\nI've done this for the spkg, so the one included in the spkg (and in the diff posted here) is the same plus the changes to the build system (after runing autoreconf -i using matching versions of autotools).\n\nAnd I've indeed reordered the spkg's patch hunks so that autotools files are patched before the build system one to ensure that autotools does not decide to regenerate everything on the fly.",
    "created_at": "2013-01-23T09:54:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76561",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:6" align="right">comment:6</div>

The implib.patch I posted here only touches the autotools file (you then need to somehow regenerate the build system, let's say autoreconf -i).

I've done this for the spkg, so the one included in the spkg (and in the diff posted here) is the same plus the changes to the build system (after runing autoreconf -i using matching versions of autotools).

And I've indeed reordered the spkg's patch hunks so that autotools files are patched before the build system one to ensure that autotools does not decide to regenerate everything on the fly.



---

archive/issue_comments_076562.json:
```json
{
    "body": "Changed reviewer from **Karl-Dieter Crisman** to **Karl-Dieter Crisman, Jeroen Demeyer**",
    "created_at": "2013-01-24T19:27:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76562",
    "user": "https://github.com/kcrisman"
}
```

Changed reviewer from **Karl-Dieter Crisman** to **Karl-Dieter Crisman, Jeroen Demeyer**



---

archive/issue_events_117587.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2013-01-24T19:27:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9167#event-117587"
}
```



---

archive/issue_events_117588.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2013-01-24T19:27:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9167#event-117588"
}
```



---

archive/issue_comments_076563.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI can no longer check this due to horrible BLODA issues but my [comment:115](#comment:115) stands, and if Jeroen agrees that these are stamped in the correct order, then let's get this in, since it does work.",
    "created_at": "2013-01-24T19:27:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76563",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:7" align="right">comment:7</div>

I can no longer check this due to horrible BLODA issues but my [comment:115](#comment:115) stands, and if Jeroen agrees that these are stamped in the correct order, then let's get this in, since it does work.



---

archive/issue_comments_076564.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nIs it possible one might get a doctest error on this?  I did a weird upgrade where I already had this ticket, from 5.6.rc0 to 5.6, and then got this.\n\n```\nFile \"/Users/karl.crisman/Downloads/sage-5.6/devel/sage/sage/libs/ecl.pyx\", line 247:\n    sage: inf_loop()\nExpected:\n    Traceback (most recent call last):\n    ...\n    RuntimeError: ECL says: Console interrupt\nGot:\n    Traceback (most recent call last):\n      File \"/Users/karl.crisman/Downloads/sage-5.6/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/Users/karl.crisman/Downloads/sage-5.6/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/Users/karl.crisman/Downloads/sage-5.6/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_6[7]>\", line 1, in <module>\n        inf_loop()###line 247:\n    sage: inf_loop()\n      File \"ecl.pyx\", line 704, in sage.libs.ecl.EclObject.__call__ (sage/libs/ecl.c:5038)\n      File \"ecl.pyx\", line 280, in sage.libs.ecl.ecl_safe_apply (sage/libs/ecl.c:3049)\n    RuntimeError: ECL says: Console interrupt.\n```\nNote the one-character difference (on Mac, anyway).  Can someone check this?  I think it might be due to my having done the upgrade and thus not important.",
    "created_at": "2013-01-24T21:07:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76564",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:8" align="right">comment:8</div>

Is it possible one might get a doctest error on this?  I did a weird upgrade where I already had this ticket, from 5.6.rc0 to 5.6, and then got this.

```
File "/Users/karl.crisman/Downloads/sage-5.6/devel/sage/sage/libs/ecl.pyx", line 247:
    sage: inf_loop()
Expected:
    Traceback (most recent call last):
    ...
    RuntimeError: ECL says: Console interrupt
Got:
    Traceback (most recent call last):
      File "/Users/karl.crisman/Downloads/sage-5.6/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/Users/karl.crisman/Downloads/sage-5.6/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/Users/karl.crisman/Downloads/sage-5.6/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_6[7]>", line 1, in <module>
        inf_loop()###line 247:
    sage: inf_loop()
      File "ecl.pyx", line 704, in sage.libs.ecl.EclObject.__call__ (sage/libs/ecl.c:5038)
      File "ecl.pyx", line 280, in sage.libs.ecl.ecl_safe_apply (sage/libs/ecl.c:3049)
    RuntimeError: ECL says: Console interrupt.
```
Note the one-character difference (on Mac, anyway).  Can someone check this?  I think it might be due to my having done the upgrade and thus not important.



---

archive/issue_comments_076565.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThat's expected, the first patch from https://github.com/sagemath/sage/issues/13324 should fix that.",
    "created_at": "2013-01-24T23:32:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76565",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:9" align="right">comment:9</div>

That's expected, the first patch from https://github.com/sagemath/sage/issues/13324 should fix that.



---

archive/issue_comments_076566.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nHmm, that sounds familiar.  Great.",
    "created_at": "2013-01-25T01:20:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76566",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:0" align="right">comment:0</div>

Hmm, that sounds familiar.  Great.



---

archive/issue_comments_076567.json:
```json
{
    "body": "Merged: **sage-5.7.beta1**",
    "created_at": "2013-01-26T09:52:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76567",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.7.beta1**



---

archive/issue_events_117589.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-26T09:52:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9167#event-117589"
}
```



---

archive/issue_events_117590.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-26T09:52:37Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9167#event-117590"
}
```



---

archive/issue_comments_076568.json:
```json
{
    "body": "Changed upstream from **None of the above - read trac for reasoning.** to **Reported upstream. No feedback yet.**",
    "created_at": "2016-03-21T10:36:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76568",
    "user": "https://github.com/jdemeyer"
}
```

Changed upstream from **None of the above - read trac for reasoning.** to **Reported upstream. No feedback yet.**



---

archive/issue_comments_076569.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nHow did you report this?\nit ought to be reported here: https://gitlab.com/embeddable-common-lisp/ecl/issues",
    "created_at": "2016-03-21T12:03:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76569",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:3" align="right">comment:3</div>

How did you report this?
it ought to be reported here: https://gitlab.com/embeddable-common-lisp/ecl/issues



---

archive/issue_comments_076570.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nIIRC this was reported on sourceforge.net where ECL used to be hosted.",
    "created_at": "2016-03-21T12:06:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76570",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:4" align="right">comment:4</div>

IIRC this was reported on sourceforge.net where ECL used to be hosted.



---

archive/issue_comments_076571.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nwell, yes, but it seems to be lost...",
    "created_at": "2016-03-21T12:18:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76571",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:5" align="right">comment:5</div>

well, yes, but it seems to be lost...



---

archive/issue_comments_076572.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nAt least there is a copy of the discussion on the former ECL list here:\n* https://www.mail-archive.com/ecls-list@lists.sourceforge.net/msg01978.html\n(and one in my mailbox...)",
    "created_at": "2016-03-21T12:27:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76572",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:6" align="right">comment:6</div>

At least there is a copy of the discussion on the former ECL list here:
* https://www.mail-archive.com/ecls-list@lists.sourceforge.net/msg01978.html
(and one in my mailbox...)



---

archive/issue_comments_076573.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nCould you repost that bug report to upstream?",
    "created_at": "2016-03-21T12:48:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76573",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:7" align="right">comment:7</div>

Could you repost that bug report to upstream?



---

archive/issue_comments_076574.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nDone:\n* https://gitlab.com/embeddable-common-lisp/ecl/issues/235",
    "created_at": "2016-03-21T13:01:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76574",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:8" align="right">comment:8</div>

Done:
* https://gitlab.com/embeddable-common-lisp/ecl/issues/235



---

archive/issue_comments_076575.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -24,3 +24,5 @@\n \n An updated spkg, based on the one in #13324, is available at\n [http://boxen.math.washington.edu/home/jpflori/ecl-12.12.1.p1.spkg](http://boxen.math.washington.edu/home/jpflori/ecl-12.12.1.p1.spkg)\n+\n+**Reported upstream**: \u200bhttps://gitlab.com/embeddable-common-lisp/ecl/issues/235\n``````\n",
    "created_at": "2016-03-21T13:08:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9167#issuecomment-76575",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -24,3 +24,5 @@
 
 An updated spkg, based on the one in #13324, is available at
 [http://boxen.math.washington.edu/home/jpflori/ecl-12.12.1.p1.spkg](http://boxen.math.washington.edu/home/jpflori/ecl-12.12.1.p1.spkg)
+
+**Reported upstream**: â€‹https://gitlab.com/embeddable-common-lisp/ecl/issues/235
``````

