# Issue 9418: Add GNU patch 2.5.9 as a standard package.

archive/issues_009418.json:
```json
{
    "assignees": [],
    "body": "As discussed here:\n\nhttp://groups.google.co.uk/group/sage-devel/browse_thread/thread/c566520374106df3\n\n[GNU patch](http://www.gnu.org/software/patch/) is to be added as a standard package to Sage, to allow the use of 'patch' to be used to make patches, rather than to us 'cp' as now. \n\nA new package may be found here\n\nhttp://sage.math.washington.edu/home/jdemeyer/spkg/patch-2.5.9.spkg\n\nIn order to test this spkg, you could also try installing a new Sphinx spkg using *patch*: [http://sage.math.washington.edu/home/jdemeyer/spkg/sphinx-1.0.4.p3.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/sphinx-1.0.4.p3.spkg) (there is a corresponding .p1 using *cp*, see #10118 for the Sphinx upgrade).\n\nOnce this is done, the [Sage Developers Guide](http://www.sagemath.org/doc/developer/) will need to be updated to reflect a new method to create patches. A separate ticket #9419 has been opened for that.\n\n**Assignee:** GeorgSWeber\n\n**CC:**  @nexttime\n\n**Keywords:** patch spkg\n\n**Author:** David Kirkby, Jeroen Demeyer\n\n**Reviewer:** David Kirkby, Jeroen Demeyer,  John Cremona\n\n**Merged:** sage-4.6.1.alpha2\n\nIssue created by migration from https://trac.sagemath.org/ticket/9418\n\n",
    "closed_at": "2010-11-19T07:54:07Z",
    "created_at": "2010-07-03T08:29:24Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20build",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.6.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Add GNU patch 2.5.9 as a standard package.",
    "type": "issue",
    "updated_at": "2010-11-22T20:34:51Z",
    "url": "https://github.com/sagemath/sage/issues/9418",
    "user": "https://github.com/sagetrac-drkirkby"
}
```
As discussed here:

http://groups.google.co.uk/group/sage-devel/browse_thread/thread/c566520374106df3

[GNU patch](http://www.gnu.org/software/patch/) is to be added as a standard package to Sage, to allow the use of 'patch' to be used to make patches, rather than to us 'cp' as now. 

A new package may be found here

http://sage.math.washington.edu/home/jdemeyer/spkg/patch-2.5.9.spkg

In order to test this spkg, you could also try installing a new Sphinx spkg using *patch*: [http://sage.math.washington.edu/home/jdemeyer/spkg/sphinx-1.0.4.p3.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/sphinx-1.0.4.p3.spkg) (there is a corresponding .p1 using *cp*, see #10118 for the Sphinx upgrade).

Once this is done, the [Sage Developers Guide](http://www.sagemath.org/doc/developer/) will need to be updated to reflect a new method to create patches. A separate ticket #9419 has been opened for that.

**Assignee:** GeorgSWeber

**CC:**  @nexttime

**Keywords:** patch spkg

**Author:** David Kirkby, Jeroen Demeyer

**Reviewer:** David Kirkby, Jeroen Demeyer,  John Cremona

**Merged:** sage-4.6.1.alpha2

Issue created by migration from https://trac.sagemath.org/ticket/9418





---

archive/issue_events_101293.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-07-03T08:29:24Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "milestone_number": null,
    "milestone_title": "sage-4.6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9418#event-101293"
}
```



---

archive/issue_events_101294.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-07-03T08:29:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20build",
    "label_color": "08517b",
    "label_name": "component: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9418#event-101294"
}
```



---

archive/issue_events_101295.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-07-03T08:29:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "008080",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9418#event-101295"
}
```



---

archive/issue_events_101296.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-11-13T18:20:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9418#event-101296"
}
```



---

archive/issue_events_101297.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-11-13T23:04:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9418#event-101297"
}
```



---

archive/issue_events_101298.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-11-13T23:04:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9418#event-101298"
}
```



---

archive/issue_comments_082408.json:
```json
{
    "body": "<a id='comment:3'>**Comment 3:**</a>\nWould you care to provide a `spkg/deps` patch so we can test that too?",
    "created_at": "2010-11-13T23:04:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82408",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:3'>**Comment 3:**</a>
Would you care to provide a `spkg/deps` patch so we can test that too?



---

archive/issue_comments_082409.json:
```json
{
    "body": "**Work Issues:** deps.patch",
    "created_at": "2010-11-13T23:04:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82409",
    "user": "https://github.com/jdemeyer"
}
```

**Work Issues:** deps.patch



---

archive/issue_comments_082410.json:
```json
{
    "body": "**Author:** David Kirkby",
    "created_at": "2010-11-13T23:05:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82410",
    "user": "https://github.com/jdemeyer"
}
```

**Author:** David Kirkby



---

archive/issue_comments_082411.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"patch spkg\".",
    "created_at": "2010-11-13T23:05:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82411",
    "user": "https://github.com/jdemeyer"
}
```

**Changing keywords** from "" to "patch spkg".



---

archive/issue_comments_082412.json:
```json
{
    "body": "**Attachment:** [install.patch.gz](https://github.com/sagemath/sage/files/ticket9418/install.patch.gz)\n\nPatch for the install file in the sage_scripts-4.6.1.alpha1 package.",
    "created_at": "2010-11-13T23:48:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82412",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

**Attachment:** [install.patch.gz](https://github.com/sagemath/sage/files/ticket9418/install.patch.gz)

Patch for the install file in the sage_scripts-4.6.1.alpha1 package.



---

archive/issue_comments_082413.json:
```json
{
    "body": "**Attachment:** [install.gz](https://github.com/sagemath/sage/files/ticket9418/install.gz)\n\nReplacement 'install' file",
    "created_at": "2010-11-13T23:51:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82413",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

**Attachment:** [install.gz](https://github.com/sagemath/sage/files/ticket9418/install.gz)

Replacement 'install' file



---

archive/issue_events_101299.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-11-13T23:59:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9418#event-101299"
}
```



---

archive/issue_events_101300.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-11-13T23:59:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9418#event-101300"
}
```



---

archive/issue_comments_082414.json:
```json
{
    "body": "<a id='comment:5'>**Comment 5:**</a>\nI'm somewhat puzzled. There seems to be two copies of the install file - one in `$SAGE_ROOT/spkg/install`, and another in the sage-scripts package. \n\nI think its only necessary to update the one in spkg, which makes me wonder whats the point of the one in the sage_scripts package. That has a repository, but there are uncommitted changes. \n\nDave",
    "created_at": "2010-11-13T23:59:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82414",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<a id='comment:5'>**Comment 5:**</a>
I'm somewhat puzzled. There seems to be two copies of the install file - one in `$SAGE_ROOT/spkg/install`, and another in the sage-scripts package. 

I think its only necessary to update the one in spkg, which makes me wonder whats the point of the one in the sage_scripts package. That has a repository, but there are uncommitted changes. 

Dave



---

archive/issue_comments_082415.json:
```json
{
    "body": "<a id='comment:6'>**Comment 6:**</a>\nI just realised, I ommitted to add PATCH as a dependancy of GAP. It's implied anyway, due to the fact readline, sage and termcap all depend on patch, and gap depends on all them. But I will correct it to make it clearer. \n\nIMHO, it would be a lot nice if this file was sorted alphabetically a bit better, but I wont do that now.",
    "created_at": "2010-11-14T00:06:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82415",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<a id='comment:6'>**Comment 6:**</a>
I just realised, I ommitted to add PATCH as a dependancy of GAP. It's implied anyway, due to the fact readline, sage and termcap all depend on patch, and gap depends on all them. But I will correct it to make it clearer. 

IMHO, it would be a lot nice if this file was sorted alphabetically a bit better, but I wont do that now.



---

archive/issue_events_101301.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-11-14T00:06:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9418#event-101301"
}
```



---

archive/issue_events_101302.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-11-14T00:06:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9418#event-101302"
}
```



---

archive/issue_events_101303.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-11-14T00:15:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9418#event-101303"
}
```



---

archive/issue_events_101304.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-11-14T00:15:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9418#event-101304"
}
```



---

archive/issue_events_101305.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-11-14T00:16:44Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "milestone_number": null,
    "milestone_title": "sage-5.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9418#event-101305"
}
```



---

archive/issue_events_101306.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-11-14T00:16:44Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "milestone_number": null,
    "milestone_title": "sage-4.6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9418#event-101306"
}
```



---

archive/issue_comments_082416.json:
```json
{
    "body": "**Changing work issues** from \"deps.patch\" to \"\".",
    "created_at": "2010-11-14T00:16:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82416",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

**Changing work issues** from "deps.patch" to "".



---

archive/issue_comments_082417.json:
```json
{
    "body": "SPKG.txt",
    "created_at": "2010-11-14T00:36:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82417",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

SPKG.txt



---

archive/issue_comments_082418.json:
```json
{
    "body": "**Attachment:** [SPKG.txt](https://github.com/sagemath/sage/files/ticket9418/SPKG.txt)\n\nspkg-check",
    "created_at": "2010-11-14T00:36:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82418",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

**Attachment:** [SPKG.txt](https://github.com/sagemath/sage/files/ticket9418/SPKG.txt)

spkg-check



---

archive/issue_comments_082419.json:
```json
{
    "body": "**Attachment:** [spkg-check.gz](https://github.com/sagemath/sage/files/ticket9418/spkg-check.gz)\n\n**Attachment:** [spkg-install.gz](https://github.com/sagemath/sage/files/ticket9418/spkg-install.gz)\n\nspkg-install",
    "created_at": "2010-11-14T00:36:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82419",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

**Attachment:** [spkg-check.gz](https://github.com/sagemath/sage/files/ticket9418/spkg-check.gz)

**Attachment:** [spkg-install.gz](https://github.com/sagemath/sage/files/ticket9418/spkg-install.gz)

spkg-install



---

archive/issue_comments_082420.json:
```json
{
    "body": "<a id='comment:9'>**Comment 9:**</a>\nI realised I had not stuck a Mercurial repository in the package - I guess I was expecting people to want to make changes. But I've added one now. I don't know if its normal to add the SPKG.txt, spkg-install and spkg-check files to a new package, but I've them here anyway. No doubt Leif will find something wrong!\n\nDave",
    "created_at": "2010-11-14T00:38:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82420",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<a id='comment:9'>**Comment 9:**</a>
I realised I had not stuck a Mercurial repository in the package - I guess I was expecting people to want to make changes. But I've added one now. I don't know if its normal to add the SPKG.txt, spkg-install and spkg-check files to a new package, but I've them here anyway. No doubt Leif will find something wrong!

Dave



---

archive/issue_comments_082421.json:
```json
{
    "body": "<a id='comment:10'>**Comment 10:**</a>\nWhat I meant to say was, I don't know if its normal to attach those 3 files to the ticket. But it can't do any harm I guess.",
    "created_at": "2010-11-14T00:43:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82421",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<a id='comment:10'>**Comment 10:**</a>
What I meant to say was, I don't know if its normal to attach those 3 files to the ticket. But it can't do any harm I guess.



---

archive/issue_comments_082422.json:
```json
{
    "body": "<a id='comment:11'>**Comment 11:**</a>\nReplying to [drkirkby](#comment%3A5):\n> I think its only necessary to update the one in spkg, which makes me wonder whats the point of the one in the sage_scripts package.\n\nAt some point during the installation (or during sdist maybe?), the `install` from the `sage_scripts` package gets copied to `spkg/install`.  Also, `sage-spkg`, `sage-env`, `sage-make_relative` are copied to `spkg/base`.  Don't ask me why, but that's the way it is.",
    "created_at": "2010-11-14T09:47:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82422",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:11'>**Comment 11:**</a>
Replying to [drkirkby](#comment%3A5):
> I think its only necessary to update the one in spkg, which makes me wonder whats the point of the one in the sage_scripts package.

At some point during the installation (or during sdist maybe?), the `install` from the `sage_scripts` package gets copied to `spkg/install`.  Also, `sage-spkg`, `sage-env`, `sage-make_relative` are copied to `spkg/base`.  Don't ask me why, but that's the way it is.



---

archive/issue_comments_082423.json:
```json
{
    "body": "<a id='comment:12'>**Comment 12:**</a>\nDavid: instead of adding $(INST)/$(PATCH) as a dependency for every package, would it not be better to do it on a \"as-needed\" basis?  I mean that, whenever a spkg gets upgraded to use `patch`, we add `PATCH` as a dependency?",
    "created_at": "2010-11-14T09:56:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82423",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'>**Comment 12:**</a>
David: instead of adding $(INST)/$(PATCH) as a dependency for every package, would it not be better to do it on a "as-needed" basis?  I mean that, whenever a spkg gets upgraded to use `patch`, we add `PATCH` as a dependency?



---

archive/issue_comments_082424.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,19 +2,12 @@\n \n http://groups.google.co.uk/group/sage-devel/browse_thread/thread/c566520374106df3\n \n-GNU patch\n+[GNU patch](http://www.gnu.org/software/patch/) is to be added as a standard package to Sage, to allow the use of 'patch' to be used to make patches, rather than to us 'cp' as now. \n \n-http://www.gnu.org/software/patch/\n-\n-is to be added as a standard package to Sage, to allow the use of 'patch' to be used to make patches, rather than to us 'cp' as now. \n-\n-A new package may be found here \n+A new package may be found here\n \n http://boxen.math.washington.edu/home/kirkby/patches/patch-2.6.1.spkg\n \n-but the file `spkg/standard/deps will need to be updated` too. There are several tickets currently open (#9274, #9351 and #9412) for making updates to 'deps' so these need to be coordinated. \n-\n Once this is done, the [Sage Developers Guide](http://www.sagemath.org/doc/developer/) will need to be updated to reflect a new method to create patches. A separate ticket will be opened for that. \n \n-Dave \n-\n+**NOTE to developers: do not yet create spkg's using patch, because there is absolutely no guarantee that this spkg will be in the next version of Sage (even if it has been merged in an alpha version).**  Since this is a new `spkg`, we need to test it a lot more thouroughly than a simple library patch.\n``````\n",
    "created_at": "2010-11-14T10:00:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82424",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,19 +2,12 @@
 
 http://groups.google.co.uk/group/sage-devel/browse_thread/thread/c566520374106df3
 
-GNU patch
+[GNU patch](http://www.gnu.org/software/patch/) is to be added as a standard package to Sage, to allow the use of 'patch' to be used to make patches, rather than to us 'cp' as now. 
 
-http://www.gnu.org/software/patch/
-
-is to be added as a standard package to Sage, to allow the use of 'patch' to be used to make patches, rather than to us 'cp' as now. 
-
-A new package may be found here 
+A new package may be found here
 
 http://boxen.math.washington.edu/home/kirkby/patches/patch-2.6.1.spkg
 
-but the file `spkg/standard/deps will need to be updated` too. There are several tickets currently open (#9274, #9351 and #9412) for making updates to 'deps' so these need to be coordinated. 
-
 Once this is done, the [Sage Developers Guide](http://www.sagemath.org/doc/developer/) will need to be updated to reflect a new method to create patches. A separate ticket will be opened for that. 
 
-Dave 
-
+**NOTE to developers: do not yet create spkg's using patch, because there is absolutely no guarantee that this spkg will be in the next version of Sage (even if it has been merged in an alpha version).**  Since this is a new `spkg`, we need to test it a lot more thouroughly than a simple library patch.
``````




---

archive/issue_comments_082425.json:
```json
{
    "body": "<a id='comment:14'>**Comment 14:**</a>\nProof-of-concept spkg using patch: [http://sage.math.washington.edu/home/jdemeyer/spkg/sphinx-1.0.4.p2.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/sphinx-1.0.4.p2.spkg)",
    "created_at": "2010-11-14T10:13:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82425",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:14'>**Comment 14:**</a>
Proof-of-concept spkg using patch: [http://sage.math.washington.edu/home/jdemeyer/spkg/sphinx-1.0.4.p2.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/sphinx-1.0.4.p2.spkg)



---

archive/issue_comments_082426.json:
```json
{
    "body": "<a id='comment:15'>**Comment 15:**</a>\nReplying to [@jdemeyer](#comment%3A12):\n> David: instead of adding $(INST)/$(PATCH) as a dependency for every package, would it not be better to do it on a \"as-needed\" basis?  I mean that, whenever a spkg gets upgraded to use `patch`, we add `PATCH` as a dependency?\n\nI do not think that would be a good idea. Every time someone wants to add a patch, they would need to create one for 'deps' too. A lot of people don't know how to use that file. Note even my initial comments I noted there were several tickets touching 'deps' and these would need to be coordinated. To make matters even more complicated, the 'deps' file is not under revision control, which make s updating that file more problematic. \n\nIf the `patch` package took a long time to build, then I could see it would slow the build of Sage, as it introduces a sometimes unnecessary dependency. But for a package which takes less than 4 seconds to build **and** run all the self tests, I think it is better to add it to 'deps' now, so every package could use it now. \n\nIt also avoids the very real risk someone will create a patch, which will work on their system since either\n* patch has already benn built.\n* There's a suitable version of patch on their system.\n\nThe patch would fail to install on another computer, because patch is not built at that point in time. Since the order of building packages is not fixed. \n\nIMHO, `patch` should be built early, so it can be used with the minimum amount of effort.\n\n\nDave",
    "created_at": "2010-11-14T10:35:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82426",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<a id='comment:15'>**Comment 15:**</a>
Replying to [@jdemeyer](#comment%3A12):
> David: instead of adding $(INST)/$(PATCH) as a dependency for every package, would it not be better to do it on a "as-needed" basis?  I mean that, whenever a spkg gets upgraded to use `patch`, we add `PATCH` as a dependency?

I do not think that would be a good idea. Every time someone wants to add a patch, they would need to create one for 'deps' too. A lot of people don't know how to use that file. Note even my initial comments I noted there were several tickets touching 'deps' and these would need to be coordinated. To make matters even more complicated, the 'deps' file is not under revision control, which make s updating that file more problematic. 

If the `patch` package took a long time to build, then I could see it would slow the build of Sage, as it introduces a sometimes unnecessary dependency. But for a package which takes less than 4 seconds to build **and** run all the self tests, I think it is better to add it to 'deps' now, so every package could use it now. 

It also avoids the very real risk someone will create a patch, which will work on their system since either
* patch has already benn built.
* There's a suitable version of patch on their system.

The patch would fail to install on another computer, because patch is not built at that point in time. Since the order of building packages is not fixed. 

IMHO, `patch` should be built early, so it can be used with the minimum amount of effort.


Dave



---

archive/issue_comments_082427.json:
```json
{
    "body": "**Attachment:** [9418_install.patch.gz](https://github.com/sagemath/sage/files/ticket9418/9418_install.patch.gz)\n\nAdded ticket number to file name",
    "created_at": "2010-11-14T11:07:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82427",
    "user": "https://github.com/jdemeyer"
}
```

**Attachment:** [9418_install.patch.gz](https://github.com/sagemath/sage/files/ticket9418/9418_install.patch.gz)

Added ticket number to file name



---

archive/issue_comments_082428.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -8,6 +8,6 @@\n \n http://boxen.math.washington.edu/home/kirkby/patches/patch-2.6.1.spkg\n \n-Once this is done, the [Sage Developers Guide](http://www.sagemath.org/doc/developer/) will need to be updated to reflect a new method to create patches. A separate ticket will be opened for that. \n+Once this is done, the [Sage Developers Guide](http://www.sagemath.org/doc/developer/) will need to be updated to reflect a new method to create patches. A separate ticket #9419 has been opened for that. \n \n-**NOTE to developers: do not yet create spkg's using patch, because there is absolutely no guarantee that this spkg will be in the next version of Sage (even if it has been merged in an alpha version).**  Since this is a new `spkg`, we need to test it a lot more thouroughly than a simple library patch.\n+**NOTE to developers: do not yet create spkg's using patch, because there is absolutely no guarantee that this spkg will be in the next version of Sage (even if it has been merged in an alpha version).**  Since this is a new `spkg`, we need to test it a lot more thoroughly than a simple library patch.\n``````\n",
    "created_at": "2010-11-14T11:25:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82428",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -8,6 +8,6 @@
 
 http://boxen.math.washington.edu/home/kirkby/patches/patch-2.6.1.spkg
 
-Once this is done, the [Sage Developers Guide](http://www.sagemath.org/doc/developer/) will need to be updated to reflect a new method to create patches. A separate ticket will be opened for that. 
+Once this is done, the [Sage Developers Guide](http://www.sagemath.org/doc/developer/) will need to be updated to reflect a new method to create patches. A separate ticket #9419 has been opened for that. 
 
-**NOTE to developers: do not yet create spkg's using patch, because there is absolutely no guarantee that this spkg will be in the next version of Sage (even if it has been merged in an alpha version).**  Since this is a new `spkg`, we need to test it a lot more thouroughly than a simple library patch.
+**NOTE to developers: do not yet create spkg's using patch, because there is absolutely no guarantee that this spkg will be in the next version of Sage (even if it has been merged in an alpha version).**  Since this is a new `spkg`, we need to test it a lot more thoroughly than a simple library patch.
``````




---

archive/issue_comments_082429.json:
```json
{
    "body": "<a id='comment:17'>**Comment 17:**</a>\nI suggest a small \"sanity check\" at the end of `spkg-install` to check that the `patch` in the PATH is the right one.  Something like\n\n```\nif ! patch --version | grep >/dev/null 'patch 2.6.1'; then\n    echo \"Cannot to find the patch program we just installed\"\n    exit 1\nfi\n```\n\nI know you like `grep >/dev/null`  ;-)",
    "created_at": "2010-11-14T23:46:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82429",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'>**Comment 17:**</a>
I suggest a small "sanity check" at the end of `spkg-install` to check that the `patch` in the PATH is the right one.  Something like

```
if ! patch --version | grep >/dev/null 'patch 2.6.1'; then
    echo "Cannot to find the patch program we just installed"
    exit 1
fi
```

I know you like `grep >/dev/null`  ;-)



---

archive/issue_comments_082430.json:
```json
{
    "body": "<a id='comment:18'>**Comment 18:**</a>\nAlso: do we really *need* all the 64-bit checking stuff?",
    "created_at": "2010-11-14T23:48:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82430",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:18'>**Comment 18:**</a>
Also: do we really *need* all the 64-bit checking stuff?



---

archive/issue_comments_082431.json:
```json
{
    "body": "<a id='comment:19'>**Comment 19:**</a>\nRegarding `deps`: is there a reason that SQLALCHEMY doesn't have PATCH as dependency?\n\nAlso, some packages are their own \"upstream\", so should never include patches.  These are genus2reduction, extcode, examples, sagenb (and possibly more).",
    "created_at": "2010-11-15T00:02:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82431",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:19'>**Comment 19:**</a>
Regarding `deps`: is there a reason that SQLALCHEMY doesn't have PATCH as dependency?

Also, some packages are their own "upstream", so should never include patches.  These are genus2reduction, extcode, examples, sagenb (and possibly more).



---

archive/issue_comments_082432.json:
```json
{
    "body": "<a id='comment:20'>**Comment 20:**</a>\nYes, I feel we do need the 64-bit things. Sure, a 32-bit version of patch would probably do all we want, but the same is true of some other commands like 'rubiks'. But building them all 64-bit makes it much easier to detect if there are any 32-bit code by mistake. Knowing that every single library and ever single binary should be 64-bit makes finding any 32-bit objects very easy. \n\nHaving the option to specify another another 64-bit flag could be useful in a port. Having spent ages sorting out the mess someone created by assuming only 64-bit OS X would be supported, and the option would be `-m64`, I'm reluctant to inflict such a stupid thing on someone else. \n\nSQLALCHEMY is an oversight. That does need correcting. \n\nI don't think it's safe to assume that just because a package is it's own upstream, that it will not necessarily ever be patched by someone other than the developer. Consider genus2reduction. That is currently at patch level 8, There are no patches, but many times people have changed spkg-install. What gives you confidence that someone might not need to change a file in this package? 64-bit support as added to genus2reduction, but on the Pari package, adding 64-bit supported needed updating of makefiles. How can you be so confident that a change in genus2reduction would not need a patch? \n\nTo me, removing dependencies will not speed up the build of Sage, but could potentially lead to problems. Being able to say \"you can use patch for **any** package not in the BASE group (`prereq`, `bzip2 etc`, `dir` and `sage_scripts`), is much easier than documenting you can use patch on most package, not not A, B, C, D, E ...etc. \n\nI fail to see what is gained by removing what may be a technically unnecessary dependency, but in practice will have no harmful effect, and can stop difficult problems occurring. \n\nWith few exceptions, where we know there has been issues (like readline), we normally trust the result of `make install` and don't actually check the packages work. But I see nothing wrong with your suggestion. So I'm find on adding that. \n\nBut it's 0037 AM here, and I'm not going to be making any changes for 8 hours at least. \n\nDave",
    "created_at": "2010-11-15T00:38:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82432",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<a id='comment:20'>**Comment 20:**</a>
Yes, I feel we do need the 64-bit things. Sure, a 32-bit version of patch would probably do all we want, but the same is true of some other commands like 'rubiks'. But building them all 64-bit makes it much easier to detect if there are any 32-bit code by mistake. Knowing that every single library and ever single binary should be 64-bit makes finding any 32-bit objects very easy. 

Having the option to specify another another 64-bit flag could be useful in a port. Having spent ages sorting out the mess someone created by assuming only 64-bit OS X would be supported, and the option would be `-m64`, I'm reluctant to inflict such a stupid thing on someone else. 

SQLALCHEMY is an oversight. That does need correcting. 

I don't think it's safe to assume that just because a package is it's own upstream, that it will not necessarily ever be patched by someone other than the developer. Consider genus2reduction. That is currently at patch level 8, There are no patches, but many times people have changed spkg-install. What gives you confidence that someone might not need to change a file in this package? 64-bit support as added to genus2reduction, but on the Pari package, adding 64-bit supported needed updating of makefiles. How can you be so confident that a change in genus2reduction would not need a patch? 

To me, removing dependencies will not speed up the build of Sage, but could potentially lead to problems. Being able to say "you can use patch for **any** package not in the BASE group (`prereq`, `bzip2 etc`, `dir` and `sage_scripts`), is much easier than documenting you can use patch on most package, not not A, B, C, D, E ...etc. 

I fail to see what is gained by removing what may be a technically unnecessary dependency, but in practice will have no harmful effect, and can stop difficult problems occurring. 

With few exceptions, where we know there has been issues (like readline), we normally trust the result of `make install` and don't actually check the packages work. But I see nothing wrong with your suggestion. So I'm find on adding that. 

But it's 0037 AM here, and I'm not going to be making any changes for 8 hours at least. 

Dave



---

archive/issue_comments_082433.json:
```json
{
    "body": "<a id='comment:21'>**Comment 21:**</a>\nDave, I agree with all of your post above.",
    "created_at": "2010-11-15T09:10:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82433",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:21'>**Comment 21:**</a>
Dave, I agree with all of your post above.



---

archive/issue_comments_082434.json:
```json
{
    "body": "<a id='comment:22'>**Comment 22:**</a>\nReplying to [drkirkby](#comment%3A20):\n> With few exceptions, where we know there has been issues (like readline), we normally trust the result of `make install` and don't actually check the packages work. But I see nothing wrong with your suggestion. So I'm find on adding that. \n\nYou can also consider it to be a sanity check that SAGE_LOCAL and PATH have sensible values.",
    "created_at": "2010-11-15T09:11:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82434",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:22'>**Comment 22:**</a>
Replying to [drkirkby](#comment%3A20):
> With few exceptions, where we know there has been issues (like readline), we normally trust the result of `make install` and don't actually check the packages work. But I see nothing wrong with your suggestion. So I'm find on adding that. 

You can also consider it to be a sanity check that SAGE_LOCAL and PATH have sensible values.



---

archive/issue_comments_082435.json:
```json
{
    "body": "<a id='comment:23'>**Comment 23:**</a>\n\n```\nSAGE_CHECK='yes' sage -f http://boxen.math.washington.edu/home/kirkby/patches/patch-2.6.1.spkg\n```\nworked fine on 64-bit ubuntu and 32-bit Suse, with 4.6.1.alpha1 and 4.6.1.alpha0 respectively.\n\nFor a positive review is it enough that this spkg builds fine on all supported systems, or do we also need to have at least one other spkg converted to use it and build ok?",
    "created_at": "2010-11-15T11:35:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82435",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:23'>**Comment 23:**</a>

```
SAGE_CHECK='yes' sage -f http://boxen.math.washington.edu/home/kirkby/patches/patch-2.6.1.spkg
```
worked fine on 64-bit ubuntu and 32-bit Suse, with 4.6.1.alpha1 and 4.6.1.alpha0 respectively.

For a positive review is it enough that this spkg builds fine on all supported systems, or do we also need to have at least one other spkg converted to use it and build ok?



---

archive/issue_comments_082436.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -8,6 +8,8 @@\n \n http://boxen.math.washington.edu/home/kirkby/patches/patch-2.6.1.spkg\n \n+In order to test this spkg, you could also try installing a new Sphinx spkg using *patch*: [http://sage.math.washington.edu/home/jdemeyer/spkg/sphinx-1.0.4.p2.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/sphinx-1.0.4.p2.spkg) (there is a corresponding .p1 using *cp*, see #10118 for the Sphinx upgrade).\n+\n Once this is done, the [Sage Developers Guide](http://www.sagemath.org/doc/developer/) will need to be updated to reflect a new method to create patches. A separate ticket #9419 has been opened for that. \n \n **NOTE to developers: do not yet create spkg's using patch, because there is absolutely no guarantee that this spkg will be in the next version of Sage (even if it has been merged in an alpha version).**  Since this is a new `spkg`, we need to test it a lot more thoroughly than a simple library patch.\n``````\n",
    "created_at": "2010-11-15T11:42:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82436",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -8,6 +8,8 @@
 
 http://boxen.math.washington.edu/home/kirkby/patches/patch-2.6.1.spkg
 
+In order to test this spkg, you could also try installing a new Sphinx spkg using *patch*: [http://sage.math.washington.edu/home/jdemeyer/spkg/sphinx-1.0.4.p2.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/sphinx-1.0.4.p2.spkg) (there is a corresponding .p1 using *cp*, see #10118 for the Sphinx upgrade).
+
 Once this is done, the [Sage Developers Guide](http://www.sagemath.org/doc/developer/) will need to be updated to reflect a new method to create patches. A separate ticket #9419 has been opened for that. 
 
 **NOTE to developers: do not yet create spkg's using patch, because there is absolutely no guarantee that this spkg will be in the next version of Sage (even if it has been merged in an alpha version).**  Since this is a new `spkg`, we need to test it a lot more thoroughly than a simple library patch.
``````




---

archive/issue_comments_082437.json:
```json
{
    "body": "<a id='comment:25'>**Comment 25:**</a>\nThere are a couple of issues to be fixed\n* SQLALCHEMY is not listed as depending on patch, when it should be. \n* Jeroen felt testin that patch actually reported the right version would be sensible. \n* I think it would be sensible the self-tests of the package are run on every system, not just with SAGE_CHECK=yes. Since\n  * They take less than half a second on my machine (3.33 GHz Xeon). \n  * A bad version of patch could create all sorts of problems. \n\nI will address these today, but I have to do some other things. I'll put it to needs work for now, until I get chance to do this. \n\nDave",
    "created_at": "2010-11-15T11:48:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82437",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<a id='comment:25'>**Comment 25:**</a>
There are a couple of issues to be fixed
* SQLALCHEMY is not listed as depending on patch, when it should be. 
* Jeroen felt testin that patch actually reported the right version would be sensible. 
* I think it would be sensible the self-tests of the package are run on every system, not just with SAGE_CHECK=yes. Since
  * They take less than half a second on my machine (3.33 GHz Xeon). 
  * A bad version of patch could create all sorts of problems. 

I will address these today, but I have to do some other things. I'll put it to needs work for now, until I get chance to do this. 

Dave



---

archive/issue_events_101307.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-11-15T11:48:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9418#event-101307"
}
```



---

archive/issue_events_101308.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-11-15T11:48:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9418#event-101308"
}
```



---

archive/issue_comments_082438.json:
```json
{
    "body": "<a id='comment:26'>**Comment 26:**</a>\nOn the 64-bit ubuntu system, I installed the new version of the Sphinx package (with -f) and did a full test.  All OK except this:\n\n```\nsage -t -long ./sage/misc/sagedoc.py\n**********************************************************************\nFile \"/home/jec/sage-4.6.1.alpha1/devel/sage-main/sage/misc/sagedoc.py\", line 891:\n    sage: len(search_doc('tree', interact=False).splitlines()) > 2000\nExpected:\n    True\nGot:\n    Warning, the following Sage documentation hasn't been built,\n    so documentation search results may be incomplete:\n    <BLANKLINE>\n    /home/jec/sage-current/devel/sage/doc/output/html/en/website\n    /home/jec/sage-current/devel/sage/doc/output/html/en/developer\n    /home/jec/sage-current/devel/sage/doc/output/html/en/installation\n    /home/jec/sage-current/devel/sage/doc/output/html/en/constructions\n    /home/jec/sage-current/devel/sage/doc/output/html/en/a_tour_of_sage\n    /home/jec/sage-current/devel/sage/doc/output/html/en/numerical_sage\n    /home/jec/sage-current/devel/sage/doc/output/html/en/faq\n    /home/jec/sage-current/devel/sage/doc/output/html/en/thematic_tutorials\n    /home/jec/sage-current/devel/sage/doc/output/html/en/reference\n    /home/jec/sage-current/devel/sage/doc/output/html/en/bordeaux_2008\n    /home/jec/sage-current/devel/sage/doc/output/html/fr/a_tour_of_sage\n    /home/jec/sage-current/devel/sage/doc/output/html/fr/tutorial\n    <BLANKLINE>\n    You can build these with 'sage -docbuild DOCUMENT html',\n    where DOCUMENT is one of 'website', 'developer', 'installation', 'constructions', 'a_tour_of_sage', 'numerical_sage', 'faq', 'thematic_tutorials', 'reference', 'bordeaux_2008', 'a_tour_of_sage', 'tutorial', \n    or you can use 'sage -docbuild all html' to build all of the missing documentation.\n    False\n**********************************************************************\nFile \"/home/jec/sage-4.6.1.alpha1/devel/sage-main/sage/misc/sagedoc.py\", line 893:\n    sage: len(search_doc('tree', whole_word=True, interact=False).splitlines()) < 200\nExpected:\n    True\nGot:\n    Warning, the following Sage documentation hasn't been built,\n    so documentation search results may be incomplete:\n    <BLANKLINE>\n    /home/jec/sage-current/devel/sage/doc/output/html/en/website\n    /home/jec/sage-current/devel/sage/doc/output/html/en/developer\n    /home/jec/sage-current/devel/sage/doc/output/html/en/installation\n    /home/jec/sage-current/devel/sage/doc/output/html/en/constructions\n    /home/jec/sage-current/devel/sage/doc/output/html/en/a_tour_of_sage\n    /home/jec/sage-current/devel/sage/doc/output/html/en/numerical_sage\n    /home/jec/sage-current/devel/sage/doc/output/html/en/faq\n    /home/jec/sage-current/devel/sage/doc/output/html/en/thematic_tutorials\n    /home/jec/sage-current/devel/sage/doc/output/html/en/reference\n    /home/jec/sage-current/devel/sage/doc/output/html/en/bordeaux_2008\n    /home/jec/sage-current/devel/sage/doc/output/html/fr/a_tour_of_sage\n    /home/jec/sage-current/devel/sage/doc/output/html/fr/tutorial\n    <BLANKLINE>\n    You can build these with 'sage -docbuild DOCUMENT html',\n    where DOCUMENT is one of 'website', 'developer', 'installation', 'constructions', 'a_tour_of_sage', 'numerical_sage', 'faq', 'thematic_tutorials', 'reference', 'bordeaux_2008', 'a_tour_of_sage', 'tutorial', \n    or you can use 'sage -docbuild all html' to build all of the missing documentation.\n    True\n**********************************************************************\nFile \"/home/jec/sage-4.6.1.alpha1/devel/sage-main/sage/misc/sagedoc.py\", line 496:\n    sage: 'abvar/homology' in _search_src_or_doc('doc', 'homology', 'variety', interact=False)\nExpected:\n    True\nGot:\n    Warning, the following Sage documentation hasn't been built,\n    so documentation search results may be incomplete:\n    <BLANKLINE>\n    /home/jec/sage-current/devel/sage/doc/output/html/en/website\n    /home/jec/sage-current/devel/sage/doc/output/html/en/developer\n    /home/jec/sage-current/devel/sage/doc/output/html/en/installation\n    /home/jec/sage-current/devel/sage/doc/output/html/en/constructions\n    /home/jec/sage-current/devel/sage/doc/output/html/en/a_tour_of_sage\n    /home/jec/sage-current/devel/sage/doc/output/html/en/numerical_sage\n    /home/jec/sage-current/devel/sage/doc/output/html/en/faq\n    /home/jec/sage-current/devel/sage/doc/output/html/en/thematic_tutorials\n    /home/jec/sage-current/devel/sage/doc/output/html/en/reference\n    /home/jec/sage-current/devel/sage/doc/output/html/en/bordeaux_2008\n    /home/jec/sage-current/devel/sage/doc/output/html/fr/a_tour_of_sage\n    /home/jec/sage-current/devel/sage/doc/output/html/fr/tutorial\n    <BLANKLINE>\n    You can build these with 'sage -docbuild DOCUMENT html',\n    where DOCUMENT is one of 'website', 'developer', 'installation', 'constructions', 'a_tour_of_sage', 'numerical_sage', 'faq', 'thematic_tutorials', 'reference', 'bordeaux_2008', 'a_tour_of_sage', 'tutorial', \n    or you can use 'sage -docbuild all html' to build all of the missing documentation.\n    False\n**********************************************************************\n```\nBefore installing the patch spkg and sphinx I had built the docs, but I had not rebuilt them, so perhaps this is harmless?",
    "created_at": "2010-11-15T12:26:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82438",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:26'>**Comment 26:**</a>
On the 64-bit ubuntu system, I installed the new version of the Sphinx package (with -f) and did a full test.  All OK except this:

```
sage -t -long ./sage/misc/sagedoc.py
**********************************************************************
File "/home/jec/sage-4.6.1.alpha1/devel/sage-main/sage/misc/sagedoc.py", line 891:
    sage: len(search_doc('tree', interact=False).splitlines()) > 2000
Expected:
    True
Got:
    Warning, the following Sage documentation hasn't been built,
    so documentation search results may be incomplete:
    <BLANKLINE>
    /home/jec/sage-current/devel/sage/doc/output/html/en/website
    /home/jec/sage-current/devel/sage/doc/output/html/en/developer
    /home/jec/sage-current/devel/sage/doc/output/html/en/installation
    /home/jec/sage-current/devel/sage/doc/output/html/en/constructions
    /home/jec/sage-current/devel/sage/doc/output/html/en/a_tour_of_sage
    /home/jec/sage-current/devel/sage/doc/output/html/en/numerical_sage
    /home/jec/sage-current/devel/sage/doc/output/html/en/faq
    /home/jec/sage-current/devel/sage/doc/output/html/en/thematic_tutorials
    /home/jec/sage-current/devel/sage/doc/output/html/en/reference
    /home/jec/sage-current/devel/sage/doc/output/html/en/bordeaux_2008
    /home/jec/sage-current/devel/sage/doc/output/html/fr/a_tour_of_sage
    /home/jec/sage-current/devel/sage/doc/output/html/fr/tutorial
    <BLANKLINE>
    You can build these with 'sage -docbuild DOCUMENT html',
    where DOCUMENT is one of 'website', 'developer', 'installation', 'constructions', 'a_tour_of_sage', 'numerical_sage', 'faq', 'thematic_tutorials', 'reference', 'bordeaux_2008', 'a_tour_of_sage', 'tutorial', 
    or you can use 'sage -docbuild all html' to build all of the missing documentation.
    False
**********************************************************************
File "/home/jec/sage-4.6.1.alpha1/devel/sage-main/sage/misc/sagedoc.py", line 893:
    sage: len(search_doc('tree', whole_word=True, interact=False).splitlines()) < 200
Expected:
    True
Got:
    Warning, the following Sage documentation hasn't been built,
    so documentation search results may be incomplete:
    <BLANKLINE>
    /home/jec/sage-current/devel/sage/doc/output/html/en/website
    /home/jec/sage-current/devel/sage/doc/output/html/en/developer
    /home/jec/sage-current/devel/sage/doc/output/html/en/installation
    /home/jec/sage-current/devel/sage/doc/output/html/en/constructions
    /home/jec/sage-current/devel/sage/doc/output/html/en/a_tour_of_sage
    /home/jec/sage-current/devel/sage/doc/output/html/en/numerical_sage
    /home/jec/sage-current/devel/sage/doc/output/html/en/faq
    /home/jec/sage-current/devel/sage/doc/output/html/en/thematic_tutorials
    /home/jec/sage-current/devel/sage/doc/output/html/en/reference
    /home/jec/sage-current/devel/sage/doc/output/html/en/bordeaux_2008
    /home/jec/sage-current/devel/sage/doc/output/html/fr/a_tour_of_sage
    /home/jec/sage-current/devel/sage/doc/output/html/fr/tutorial
    <BLANKLINE>
    You can build these with 'sage -docbuild DOCUMENT html',
    where DOCUMENT is one of 'website', 'developer', 'installation', 'constructions', 'a_tour_of_sage', 'numerical_sage', 'faq', 'thematic_tutorials', 'reference', 'bordeaux_2008', 'a_tour_of_sage', 'tutorial', 
    or you can use 'sage -docbuild all html' to build all of the missing documentation.
    True
**********************************************************************
File "/home/jec/sage-4.6.1.alpha1/devel/sage-main/sage/misc/sagedoc.py", line 496:
    sage: 'abvar/homology' in _search_src_or_doc('doc', 'homology', 'variety', interact=False)
Expected:
    True
Got:
    Warning, the following Sage documentation hasn't been built,
    so documentation search results may be incomplete:
    <BLANKLINE>
    /home/jec/sage-current/devel/sage/doc/output/html/en/website
    /home/jec/sage-current/devel/sage/doc/output/html/en/developer
    /home/jec/sage-current/devel/sage/doc/output/html/en/installation
    /home/jec/sage-current/devel/sage/doc/output/html/en/constructions
    /home/jec/sage-current/devel/sage/doc/output/html/en/a_tour_of_sage
    /home/jec/sage-current/devel/sage/doc/output/html/en/numerical_sage
    /home/jec/sage-current/devel/sage/doc/output/html/en/faq
    /home/jec/sage-current/devel/sage/doc/output/html/en/thematic_tutorials
    /home/jec/sage-current/devel/sage/doc/output/html/en/reference
    /home/jec/sage-current/devel/sage/doc/output/html/en/bordeaux_2008
    /home/jec/sage-current/devel/sage/doc/output/html/fr/a_tour_of_sage
    /home/jec/sage-current/devel/sage/doc/output/html/fr/tutorial
    <BLANKLINE>
    You can build these with 'sage -docbuild DOCUMENT html',
    where DOCUMENT is one of 'website', 'developer', 'installation', 'constructions', 'a_tour_of_sage', 'numerical_sage', 'faq', 'thematic_tutorials', 'reference', 'bordeaux_2008', 'a_tour_of_sage', 'tutorial', 
    or you can use 'sage -docbuild all html' to build all of the missing documentation.
    False
**********************************************************************
```
Before installing the patch spkg and sphinx I had built the docs, but I had not rebuilt them, so perhaps this is harmless?



---

archive/issue_comments_082439.json:
```json
{
    "body": "**Attachment:** [deps.gz](https://github.com/sagemath/sage/files/ticket9418/deps.gz)\n\nCorectted 'deps' file, with SQLALCHEMY taken care of",
    "created_at": "2010-11-15T12:34:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82439",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

**Attachment:** [deps.gz](https://github.com/sagemath/sage/files/ticket9418/deps.gz)

Corectted 'deps' file, with SQLALCHEMY taken care of



---

archive/issue_comments_082440.json:
```json
{
    "body": "Updated deps patch, with ticket name and with the SQLALCHEMY resolved",
    "created_at": "2010-11-15T12:41:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82440",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

Updated deps patch, with ticket name and with the SQLALCHEMY resolved



---

archive/issue_comments_082441.json:
```json
{
    "body": "<a id='comment:27'>**Comment 27:**</a>\n**Attachment:** [9418_deps.patch.gz](https://github.com/sagemath/sage/files/ticket9418/9418_deps.patch.gz)\n\nI've updated deps and the patch for it. The package will have to wait though, as I need to do some painting. \n\nIt would be useful to get this tested in its current state, as changes will be minimal\n\ndave",
    "created_at": "2010-11-15T13:11:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82441",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<a id='comment:27'>**Comment 27:**</a>
**Attachment:** [9418_deps.patch.gz](https://github.com/sagemath/sage/files/ticket9418/9418_deps.patch.gz)

I've updated deps and the patch for it. The package will have to wait though, as I need to do some painting. 

It would be useful to get this tested in its current state, as changes will be minimal

dave



---

archive/issue_comments_082442.json:
```json
{
    "body": "<a id='comment:28'>**Comment 28:**</a>\nReplying to [@JohnCremona](#comment%3A26):\n> Before installing the patch spkg and sphinx I had built the docs, but I had not rebuilt them, so perhaps this is harmless?\n\nIn any case, I doubt this is an issue regarding *patch*.  The main point was to test whether the spkg installed.",
    "created_at": "2010-11-15T13:20:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82442",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:28'>**Comment 28:**</a>
Replying to [@JohnCremona](#comment%3A26):
> Before installing the patch spkg and sphinx I had built the docs, but I had not rebuilt them, so perhaps this is harmless?

In any case, I doubt this is an issue regarding *patch*.  The main point was to test whether the spkg installed.



---

archive/issue_comments_082443.json:
```json
{
    "body": "<a id='comment:29'>**Comment 29:**</a>\nReplying to [drkirkby](#comment%3A27):\n> I've updated deps and the patch for it. The package will have to wait though, as I need to do some painting. \n\nThat would be a colour patch, I presume?",
    "created_at": "2010-11-15T14:20:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82443",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:29'>**Comment 29:**</a>
Replying to [drkirkby](#comment%3A27):
> I've updated deps and the patch for it. The package will have to wait though, as I need to do some painting. 

That would be a colour patch, I presume?



---

archive/issue_comments_082444.json:
```json
{
    "body": "<a id='comment:30'>**Comment 30:**</a>\nReplying to [@JohnCremona](#comment%3A29):\n> Replying to [drkirkby](#comment%3A27):\n> > I've updated deps and the patch for it. The package will have to wait though, as I need to do some painting. \n\n> \n> That would be a colour patch, I presume?\n> \n\nI think it will be showed as red and green in the browser, though the paint was white!\n\ndave",
    "created_at": "2010-11-15T15:01:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82444",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<a id='comment:30'>**Comment 30:**</a>
Replying to [@JohnCremona](#comment%3A29):
> Replying to [drkirkby](#comment%3A27):
> > I've updated deps and the patch for it. The package will have to wait though, as I need to do some painting. 

> 
> That would be a colour patch, I presume?
> 

I think it will be showed as red and green in the browser, though the paint was white!

dave



---

archive/issue_events_101309.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-11-16T15:39:30Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "rename": {
        "from": "Add GNU patch as a standard package.",
        "to": "Add GNU patch 2.5.9 as a standard package."
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9418#event-101309"
}
```



---

archive/issue_comments_082445.json:
```json
{
    "body": "<a id='comment:31'>**Comment 31:**</a>\nPatch >= 2.6 seems to be broken on OS X 10.4 (and supposedly also Solaris).  I have tested upstream patch 2.5.9 and that works fine.\n\nSo I propose to use [http://ftp.gnu.org/gnu/patch/patch-2.5.9.tar.gz](http://ftp.gnu.org/gnu/patch/patch-2.5.9.tar.gz)",
    "created_at": "2010-11-16T15:39:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82445",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:31'>**Comment 31:**</a>
Patch >= 2.6 seems to be broken on OS X 10.4 (and supposedly also Solaris).  I have tested upstream patch 2.5.9 and that works fine.

So I propose to use [http://ftp.gnu.org/gnu/patch/patch-2.5.9.tar.gz](http://ftp.gnu.org/gnu/patch/patch-2.5.9.tar.gz)



---

archive/issue_comments_082446.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -6,7 +6,7 @@\n \n A new package may be found here\n \n-http://boxen.math.washington.edu/home/kirkby/patches/patch-2.6.1.spkg\n+http://boxen.math.washington.edu/home/jdemeyer/spkg/patch-2.5.9.spkg\n \n In order to test this spkg, you could also try installing a new Sphinx spkg using *patch*: [http://sage.math.washington.edu/home/jdemeyer/spkg/sphinx-1.0.4.p2.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/sphinx-1.0.4.p2.spkg) (there is a corresponding .p1 using *cp*, see #10118 for the Sphinx upgrade).\n \n``````\n",
    "created_at": "2010-11-16T15:58:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82446",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -6,7 +6,7 @@
 
 A new package may be found here
 
-http://boxen.math.washington.edu/home/kirkby/patches/patch-2.6.1.spkg
+http://boxen.math.washington.edu/home/jdemeyer/spkg/patch-2.5.9.spkg
 
 In order to test this spkg, you could also try installing a new Sphinx spkg using *patch*: [http://sage.math.washington.edu/home/jdemeyer/spkg/sphinx-1.0.4.p2.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/sphinx-1.0.4.p2.spkg) (there is a corresponding .p1 using *cp*, see #10118 for the Sphinx upgrade).
 
``````




---

archive/issue_comments_082447.json:
```json
{
    "body": "<a id='comment:33'>**Comment 33:**</a>\nI created a spkg with patch 2.5.9 which works on OS X 10.4: [http://boxen.math.washington.edu/home/jdemeyer/spkg/patch-2.5.9.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/patch-2.5.9.spkg)\n\nI also added the sanity check that I mentioned, not yet the `make check`.",
    "created_at": "2010-11-16T16:07:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82447",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:33'>**Comment 33:**</a>
I created a spkg with patch 2.5.9 which works on OS X 10.4: [http://boxen.math.washington.edu/home/jdemeyer/spkg/patch-2.5.9.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/patch-2.5.9.spkg)

I also added the sanity check that I mentioned, not yet the `make check`.



---

archive/issue_comments_082448.json:
```json
{
    "body": "<a id='comment:34'>**Comment 34:**</a>\nReplying to [@jdemeyer](#comment%3A33):\n> I created a spkg with patch 2.5.9 which works on OS X 10.4: [http://boxen.math.washington.edu/home/jdemeyer/spkg/patch-2.5.9.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/patch-2.5.9.spkg)\n> \n> I also added the sanity check that I mentioned, not yet the `make check`.\n\nI built it on OpenSolaris OK. There's a `make check` which I had created. \n\nHowever, the version you have now used has no test facility, so `make-check` should simply be removed. The developers must have added the facility to test on more recent versions only. \n\nI've created a version at \n\nhttp://boxen.math.washington.edu/home/kirkby/older/patch-2.5.9.spkg\n\nwhich has the spkg-check file removed, and so notes to say not to update to 2.6 or 2.6.1. I will add a Mecurial patch in a minute. \n\n\nDave",
    "created_at": "2010-11-16T16:50:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82448",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<a id='comment:34'>**Comment 34:**</a>
Replying to [@jdemeyer](#comment%3A33):
> I created a spkg with patch 2.5.9 which works on OS X 10.4: [http://boxen.math.washington.edu/home/jdemeyer/spkg/patch-2.5.9.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/patch-2.5.9.spkg)
> 
> I also added the sanity check that I mentioned, not yet the `make check`.

I built it on OpenSolaris OK. There's a `make check` which I had created. 

However, the version you have now used has no test facility, so `make-check` should simply be removed. The developers must have added the facility to test on more recent versions only. 

I've created a version at 

http://boxen.math.washington.edu/home/kirkby/older/patch-2.5.9.spkg

which has the spkg-check file removed, and so notes to say not to update to 2.6 or 2.6.1. I will add a Mecurial patch in a minute. 


Dave



---

archive/issue_comments_082449.json:
```json
{
    "body": "Remove the spkg-check file, as this version of patch has no self-tests that can be run.",
    "created_at": "2010-11-16T16:55:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82449",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

Remove the spkg-check file, as this version of patch has no self-tests that can be run.



---

archive/issue_comments_082450.json:
```json
{
    "body": "<a id='comment:35'>**Comment 35:**</a>\n**Attachment:** [9418-remove-spkg-check-file.patch.gz](https://github.com/sagemath/sage/files/ticket9418/9418-remove-spkg-check-file.patch.gz)\n\nI've checked the version at \n\nhttp://boxen.math.washington.edu/home/kirkby/older/patch-2.5.9.spkg\n\ninstalls OK on \n\n* OpenSolaris 06/2009 (my machine hawk).\n* Solaris 10 SPARC (t2.math)\n* Solaris 10 x86 (fulvia on skynet)\n* Linux (sage.math)  \n* OS X 10.6 (bsd.math)\n \nI can confirm that 2.6.1 did fail to install on Solaris 10 on SPARC (t2.math)\n\nDave",
    "created_at": "2010-11-16T17:13:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82450",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<a id='comment:35'>**Comment 35:**</a>
**Attachment:** [9418-remove-spkg-check-file.patch.gz](https://github.com/sagemath/sage/files/ticket9418/9418-remove-spkg-check-file.patch.gz)

I've checked the version at 

http://boxen.math.washington.edu/home/kirkby/older/patch-2.5.9.spkg

installs OK on 

* OpenSolaris 06/2009 (my machine hawk).
* Solaris 10 SPARC (t2.math)
* Solaris 10 x86 (fulvia on skynet)
* Linux (sage.math)  
* OS X 10.6 (bsd.math)
 
I can confirm that 2.6.1 did fail to install on Solaris 10 on SPARC (t2.math)

Dave



---

archive/issue_comments_082451.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -6,7 +6,7 @@\n \n A new package may be found here\n \n-http://boxen.math.washington.edu/home/jdemeyer/spkg/patch-2.5.9.spkg\n+http://boxen.math.washington.edu/home/kirkby/older/patch-2.5.9.spkg\n \n In order to test this spkg, you could also try installing a new Sphinx spkg using *patch*: [http://sage.math.washington.edu/home/jdemeyer/spkg/sphinx-1.0.4.p2.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/sphinx-1.0.4.p2.spkg) (there is a corresponding .p1 using *cp*, see #10118 for the Sphinx upgrade).\n \n``````\n",
    "created_at": "2010-11-16T17:13:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82451",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -6,7 +6,7 @@
 
 A new package may be found here
 
-http://boxen.math.washington.edu/home/jdemeyer/spkg/patch-2.5.9.spkg
+http://boxen.math.washington.edu/home/kirkby/older/patch-2.5.9.spkg
 
 In order to test this spkg, you could also try installing a new Sphinx spkg using *patch*: [http://sage.math.washington.edu/home/jdemeyer/spkg/sphinx-1.0.4.p2.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/sphinx-1.0.4.p2.spkg) (there is a corresponding .p1 using *cp*, see #10118 for the Sphinx upgrade).
 
``````




---

archive/issue_comments_082452.json:
```json
{
    "body": "<a id='comment:36'>**Comment 36:**</a>\nWe need info about if this builds OK on other operating systems. \n\nI've changed from Needs Work -> Needs Info, as I think this **should** need no further changes. \n\nCan someone confirm it works on OS X 10.4? If so, I think this will be ready for review. \n\nDave",
    "created_at": "2010-11-16T17:33:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82452",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<a id='comment:36'>**Comment 36:**</a>
We need info about if this builds OK on other operating systems. 

I've changed from Needs Work -> Needs Info, as I think this **should** need no further changes. 

Can someone confirm it works on OS X 10.4? If so, I think this will be ready for review. 

Dave



---

archive/issue_comments_082453.json:
```json
{
    "body": "**Reviewer:** David Kirkby, Jeroen Demeyer,  John Cremona",
    "created_at": "2010-11-16T17:33:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82453",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

**Reviewer:** David Kirkby, Jeroen Demeyer,  John Cremona



---

archive/issue_comments_082454.json:
```json
{
    "body": "**Changing author** from \"David Kirkby\" to \"David Kirkby, Jeroen Demeyer\".",
    "created_at": "2010-11-16T17:33:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82454",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

**Changing author** from "David Kirkby" to "David Kirkby, Jeroen Demeyer".



---

archive/issue_events_101310.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-11-16T17:33:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9418#event-101310"
}
```



---

archive/issue_events_101311.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-11-16T17:33:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "008080",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9418#event-101311"
}
```



---

archive/issue_comments_082455.json:
```json
{
    "body": "**Work Issues:** Check on OS X 10.4",
    "created_at": "2010-11-16T17:34:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82455",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

**Work Issues:** Check on OS X 10.4



---

archive/issue_comments_082456.json:
```json
{
    "body": "<a id='comment:38'>**Comment 38:**</a>\nDavid's spkg works on OS X 10.4 (as expected)",
    "created_at": "2010-11-16T18:18:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82456",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:38'>**Comment 38:**</a>
David's spkg works on OS X 10.4 (as expected)



---

archive/issue_comments_082457.json:
```json
{
    "body": "**Changing work issues** from \"Check on OS X 10.4\" to \"\".",
    "created_at": "2010-11-16T18:18:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82457",
    "user": "https://github.com/jdemeyer"
}
```

**Changing work issues** from "Check on OS X 10.4" to "".



---

archive/issue_events_101312.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-11-16T18:56:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "008080",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9418#event-101312"
}
```



---

archive/issue_events_101313.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-11-16T18:56:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9418#event-101313"
}
```



---

archive/issue_comments_082458.json:
```json
{
    "body": "<a id='comment:39'>**Comment 39:**</a>\nWith this now checked on \n\n* Linux (sage.math)\n* OpenSolaris 06/2009 (my machine hawk).\n* Solaris 10 SPARC (t2.math)\n* Solaris 10 x86 (fulvia on skynet)   \n* OS X 10.6 (bsd.math) \n* OS X 10.4 \n\nI think this is enough for a positive review. I've set to needs review. If someone else feels likewise, we might as well set this to positive. \n\nIf there are any issues on fully supported platforms, the buildbot should find them.\n\nWill the sphinx package that has been used as a test be in the next alpha? If so, that will test not only the build, but also the functionality. \n\nDave",
    "created_at": "2010-11-16T18:56:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82458",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<a id='comment:39'>**Comment 39:**</a>
With this now checked on 

* Linux (sage.math)
* OpenSolaris 06/2009 (my machine hawk).
* Solaris 10 SPARC (t2.math)
* Solaris 10 x86 (fulvia on skynet)   
* OS X 10.6 (bsd.math) 
* OS X 10.4 

I think this is enough for a positive review. I've set to needs review. If someone else feels likewise, we might as well set this to positive. 

If there are any issues on fully supported platforms, the buildbot should find them.

Will the sphinx package that has been used as a test be in the next alpha? If so, that will test not only the build, but also the functionality. 

Dave



---

archive/issue_comments_082459.json:
```json
{
    "body": "<a id='comment:40'>**Comment 40:**</a>\nReplying to [drkirkby](#comment%3A39):\n> Will the sphinx package that has been used as a test be in the next alpha? If so, that will test not only the build, but also the functionality. \n\nYes, it will be in the next alpha (unless there is major breakage on my own testing systems), but it still needs_review (#10118).",
    "created_at": "2010-11-16T19:00:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82459",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:40'>**Comment 40:**</a>
Replying to [drkirkby](#comment%3A39):
> Will the sphinx package that has been used as a test be in the next alpha? If so, that will test not only the build, but also the functionality. 

Yes, it will be in the next alpha (unless there is major breakage on my own testing systems), but it still needs_review (#10118).



---

archive/issue_comments_082460.json:
```json
{
    "body": "<a id='comment:41'>**Comment 41:**</a>\nPS, it would be useful to attach a build log of the failure to build on OS X 10.4 with patch 2.6.1, along with the config.log for OS X. Just log building the upstream source, outside of Sage. I'll do likewise for Solaris 10 on SPARC.\n\nThen I can report the bug with patch 2.6.1 upstream, and provide links to the failed logs. Having provided links to failed builds on two platforms, the developers should be in a good position to fix the bug. \n\nDave",
    "created_at": "2010-11-16T19:06:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82460",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<a id='comment:41'>**Comment 41:**</a>
PS, it would be useful to attach a build log of the failure to build on OS X 10.4 with patch 2.6.1, along with the config.log for OS X. Just log building the upstream source, outside of Sage. I'll do likewise for Solaris 10 on SPARC.

Then I can report the bug with patch 2.6.1 upstream, and provide links to the failed logs. Having provided links to failed builds on two platforms, the developers should be in a good position to fix the bug. 

Dave



---

archive/issue_comments_082461.json:
```json
{
    "body": "<a id='comment:42'>**Comment 42:**</a>\nFixed a trivial typo (`cannot to find...` -> `cannot find`) in `spkg-install`.\n\nNew spkg: [http://sage.math.washington.edu/home/jdemeyer/spkg/patch-2.5.9.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/patch-2.5.9.spkg)",
    "created_at": "2010-11-18T09:36:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82461",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:42'>**Comment 42:**</a>
Fixed a trivial typo (`cannot to find...` -> `cannot find`) in `spkg-install`.

New spkg: [http://sage.math.washington.edu/home/jdemeyer/spkg/patch-2.5.9.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/patch-2.5.9.spkg)



---

archive/issue_comments_082462.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -6,9 +6,9 @@\n \n A new package may be found here\n \n-http://boxen.math.washington.edu/home/kirkby/older/patch-2.5.9.spkg\n+http://sage.math.washington.edu/home/jdemeyer/spkg/patch-2.5.9.spkg\n \n-In order to test this spkg, you could also try installing a new Sphinx spkg using *patch*: [http://sage.math.washington.edu/home/jdemeyer/spkg/sphinx-1.0.4.p2.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/sphinx-1.0.4.p2.spkg) (there is a corresponding .p1 using *cp*, see #10118 for the Sphinx upgrade).\n+In order to test this spkg, you could also try installing a new Sphinx spkg using *patch*: [http://sage.math.washington.edu/home/jdemeyer/spkg/sphinx-1.0.4.p3.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/sphinx-1.0.4.p3.spkg) (there is a corresponding .p1 using *cp*, see #10118 for the Sphinx upgrade).\n \n Once this is done, the [Sage Developers Guide](http://www.sagemath.org/doc/developer/) will need to be updated to reflect a new method to create patches. A separate ticket #9419 has been opened for that. \n \n``````\n",
    "created_at": "2010-11-18T09:36:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82462",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -6,9 +6,9 @@
 
 A new package may be found here
 
-http://boxen.math.washington.edu/home/kirkby/older/patch-2.5.9.spkg
+http://sage.math.washington.edu/home/jdemeyer/spkg/patch-2.5.9.spkg
 
-In order to test this spkg, you could also try installing a new Sphinx spkg using *patch*: [http://sage.math.washington.edu/home/jdemeyer/spkg/sphinx-1.0.4.p2.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/sphinx-1.0.4.p2.spkg) (there is a corresponding .p1 using *cp*, see #10118 for the Sphinx upgrade).
+In order to test this spkg, you could also try installing a new Sphinx spkg using *patch*: [http://sage.math.washington.edu/home/jdemeyer/spkg/sphinx-1.0.4.p3.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/sphinx-1.0.4.p3.spkg) (there is a corresponding .p1 using *cp*, see #10118 for the Sphinx upgrade).
 
 Once this is done, the [Sage Developers Guide](http://www.sagemath.org/doc/developer/) will need to be updated to reflect a new method to create patches. A separate ticket #9419 has been opened for that. 
 
``````




---

archive/issue_events_101314.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-11-18T09:36:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9418#event-101314"
}
```



---

archive/issue_events_101315.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-11-18T09:36:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9418#event-101315"
}
```



---

archive/issue_comments_082463.json:
```json
{
    "body": "**Merged:** sage-4.6.1.alpha2",
    "created_at": "2010-11-19T07:54:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82463",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-4.6.1.alpha2



---

archive/issue_events_101316.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-11-19T07:54:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9418#event-101316"
}
```



---

archive/issue_events_101317.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-11-19T07:54:07Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9418#event-101317"
}
```



---

archive/issue_comments_082464.json:
```json
{
    "body": "<a id='comment:44'>**Comment 44:**</a>\nSee #10299 for a follow-up.",
    "created_at": "2010-11-20T19:42:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82464",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:44'>**Comment 44:**</a>
See #10299 for a follow-up.



---

archive/issue_comments_082465.json:
```json
{
    "body": "<a id='comment:45'>**Comment 45:**</a>\nReplying to [drkirkby](#comment%3A30):\n> Replying to [@JohnCremona](#comment%3A29):\n> > Replying to [drkirkby](#comment%3A27):\n> > > I've updated deps and the patch for it. The package will have to wait though, as I need to do some painting. \n\n> > \n> > That would be a colour patch, I presume?\n> > \n\n> I think it will be showed as red and green in the browser, though the paint was white!\n\nShould we ask Microsoft if we can make `paint` a standard spkg as well?\n\n---\n\nStop environmental pollution...\n\nWe already have nice environment variables like \"`R`\" and \"`PYTHON`\"; can we rename it to e.g. `GNU_PATCH` in `spkg/install` and `spkg/standard/deps`?\n\n---\n\nP.S.: Why not add the `patch` spkg to `$(BASE)` (and make it depend on the previous three `$(BASE)` packages)?\n\nAs is, **all** standard spkgs will get rebuilt on an upgrade (to a version of Sage with `patch` \"newly\" included) anyway. (Therefore I would actually prefer adding `patch` as a dependency selectively. `spkg/standard/deps` will be under revision control soon...)",
    "created_at": "2010-11-21T22:42:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82465",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:45'>**Comment 45:**</a>
Replying to [drkirkby](#comment%3A30):
> Replying to [@JohnCremona](#comment%3A29):
> > Replying to [drkirkby](#comment%3A27):
> > > I've updated deps and the patch for it. The package will have to wait though, as I need to do some painting. 

> > 
> > That would be a colour patch, I presume?
> > 

> I think it will be showed as red and green in the browser, though the paint was white!

Should we ask Microsoft if we can make `paint` a standard spkg as well?

---

Stop environmental pollution...

We already have nice environment variables like "`R`" and "`PYTHON`"; can we rename it to e.g. `GNU_PATCH` in `spkg/install` and `spkg/standard/deps`?

---

P.S.: Why not add the `patch` spkg to `$(BASE)` (and make it depend on the previous three `$(BASE)` packages)?

As is, **all** standard spkgs will get rebuilt on an upgrade (to a version of Sage with `patch` "newly" included) anyway. (Therefore I would actually prefer adding `patch` as a dependency selectively. `spkg/standard/deps` will be under revision control soon...)



---

archive/issue_comments_082466.json:
```json
{
    "body": "<a id='comment:46'>**Comment 46:**</a>\nLeif: I don't have any particular feelings either in favour of or against your suggestions.  Feel free to open a new ticket for these issues.\n\nAbout `$(BASE)`: I never quite understood the difference between `spkg/base` and `spkg/standard`.  What is the difference?",
    "created_at": "2010-11-22T08:05:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82466",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:46'>**Comment 46:**</a>
Leif: I don't have any particular feelings either in favour of or against your suggestions.  Feel free to open a new ticket for these issues.

About `$(BASE)`: I never quite understood the difference between `spkg/base` and `spkg/standard`.  What is the difference?



---

archive/issue_comments_082467.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -10,6 +10,4 @@\n \n In order to test this spkg, you could also try installing a new Sphinx spkg using *patch*: [http://sage.math.washington.edu/home/jdemeyer/spkg/sphinx-1.0.4.p3.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/sphinx-1.0.4.p3.spkg) (there is a corresponding .p1 using *cp*, see #10118 for the Sphinx upgrade).\n \n-Once this is done, the [Sage Developers Guide](http://www.sagemath.org/doc/developer/) will need to be updated to reflect a new method to create patches. A separate ticket #9419 has been opened for that. \n-\n-**NOTE to developers: do not yet create spkg's using patch, because there is absolutely no guarantee that this spkg will be in the next version of Sage (even if it has been merged in an alpha version).**  Since this is a new `spkg`, we need to test it a lot more thoroughly than a simple library patch.\n+Once this is done, the [Sage Developers Guide](http://www.sagemath.org/doc/developer/) will need to be updated to reflect a new method to create patches. A separate ticket #9419 has been opened for that.\n``````\n",
    "created_at": "2010-11-22T20:34:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9418",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9418#issuecomment-82467",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -10,6 +10,4 @@
 
 In order to test this spkg, you could also try installing a new Sphinx spkg using *patch*: [http://sage.math.washington.edu/home/jdemeyer/spkg/sphinx-1.0.4.p3.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/sphinx-1.0.4.p3.spkg) (there is a corresponding .p1 using *cp*, see #10118 for the Sphinx upgrade).
 
-Once this is done, the [Sage Developers Guide](http://www.sagemath.org/doc/developer/) will need to be updated to reflect a new method to create patches. A separate ticket #9419 has been opened for that. 
-
-**NOTE to developers: do not yet create spkg's using patch, because there is absolutely no guarantee that this spkg will be in the next version of Sage (even if it has been merged in an alpha version).**  Since this is a new `spkg`, we need to test it a lot more thoroughly than a simple library patch.
+Once this is done, the [Sage Developers Guide](http://www.sagemath.org/doc/developer/) will need to be updated to reflect a new method to create patches. A separate ticket #9419 has been opened for that.
``````

