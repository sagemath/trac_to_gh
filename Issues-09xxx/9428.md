# Issue 9428: Internationalize the Sage Notebook

archive/issues_009428.json:
```json
{
    "body": "This patch internationalizes the Sage Notebook and adds a localization to Brazilian Portuguese and Czech. Blocks #8754.\n\n**Assignee:** @jasongrout, @williamstein\n\n**CC:**  @dandrake aquino.luizclaudio@gmail.com @robert-marik\n\n**Reviewer:** Keshav Kini, Luiz Aquino, Dan Drake, Tim Dumol\n\nIssue created by migration from https://trac.sagemath.org/ticket/9428\n\n",
    "closed_at": "2012-09-05T07:15:38Z",
    "created_at": "2010-07-05T09:37:24Z",
    "labels": [
        "component: notebook",
        "enhancement",
        "duplicate"
    ],
    "title": "Internationalize the Sage Notebook",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/9428",
    "user": "https://github.com/TimDumol"
}
```
This patch internationalizes the Sage Notebook and adds a localization to Brazilian Portuguese and Czech. Blocks #8754.

**Assignee:** @jasongrout, @williamstein

**CC:**  @dandrake aquino.luizclaudio@gmail.com @robert-marik

**Reviewer:** Keshav Kini, Luiz Aquino, Dan Drake, Tim Dumol

Issue created by migration from https://trac.sagemath.org/ticket/9428





---

archive/issue_events_070899.json:
```json
{
    "actor": "https://github.com/TimDumol",
    "created_at": "2010-07-05T09:39:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "label": "bug",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9428#event-70899"
}
```



---

archive/issue_events_070900.json:
```json
{
    "actor": "https://github.com/TimDumol",
    "created_at": "2010-07-05T09:39:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "label": "enhancement",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9428#event-70900"
}
```



---

archive/issue_comments_084200.json:
```json
{
    "body": "i18n the notebook and adds a l20n to pt_BR",
    "created_at": "2010-07-05T09:45:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84200",
    "user": "https://github.com/TimDumol"
}
```

i18n the notebook and adds a l20n to pt_BR



---

archive/issue_events_070901.json:
```json
{
    "actor": "https://github.com/TimDumol",
    "created_at": "2010-07-05T09:46:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9428#event-70901"
}
```



---

archive/attachments_011998.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_9428-sagenb-i18n.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket9428/trac_9428-sagenb-i18n.patch",
    "created_at": "2010-07-05T09:46:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/TimDumol"
}
```



---

archive/issue_comments_084201.json:
```json
{
    "body": "<a id='comment:2'></a>\n",
    "created_at": "2010-07-05T09:46:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84201",
    "user": "https://github.com/TimDumol"
}
```

<a id='comment:2'></a>




---

archive/attachments_011999.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_9428-sagenb-0.8.1-rebase.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket9428/trac_9428-sagenb-0.8.1-rebase.patch",
    "created_at": "2010-07-05T12:43:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/TimDumol"
}
```



---

archive/issue_comments_084202.json:
```json
{
    "body": "Rebase on SageNB 0.8.1. Replaces previous patch.",
    "created_at": "2010-07-05T12:43:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84202",
    "user": "https://github.com/TimDumol"
}
```

Rebase on SageNB 0.8.1. Replaces previous patch.



---

archive/issue_comments_084203.json:
```json
{
    "body": "<a id='comment:3'></a>\nGood idea. I will make the loading lazy, although the languages loaded will stay in memory, since there are multiple users using the notebook, who may each require a different language.",
    "created_at": "2010-07-05T14:31:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84203",
    "user": "https://github.com/TimDumol"
}
```

<a id='comment:3'></a>
Good idea. I will make the loading lazy, although the languages loaded will stay in memory, since there are multiple users using the notebook, who may each require a different language.



---

archive/issue_comments_084204.json:
```json
{
    "body": "Defers language loading until requested.",
    "created_at": "2010-07-05T14:54:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84204",
    "user": "https://github.com/TimDumol"
}
```

Defers language loading until requested.



---

archive/attachments_012000.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_9428-sagenb-0.8.1-rebase.2.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket9428/trac_9428-sagenb-0.8.1-rebase.2.patch",
    "created_at": "2010-07-05T15:24:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/TimDumol"
}
```



---

archive/issue_comments_084205.json:
```json
{
    "body": "<a id='comment:4'></a>\nA package with this patch (tentatively SageNB 0.9) based on SageNB 0.8.1 is avaialable at http://sage.math.washington.edu/home/timdumol/sagenb-0.9.spkg",
    "created_at": "2010-07-05T15:24:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84205",
    "user": "https://github.com/TimDumol"
}
```

<a id='comment:4'></a>
A package with this patch (tentatively SageNB 0.9) based on SageNB 0.8.1 is avaialable at http://sage.math.washington.edu/home/timdumol/sagenb-0.9.spkg



---

archive/issue_comments_084206.json:
```json
{
    "body": "<a id='comment:5'></a>\nSince the package is based on SageNB 0.8.1 (#9430), you'll need to apply the main sage library patch to at #7379 (run hg_sage.apply('http://trac.sagemath.org/sage_trac/raw-attachment/ticket/7379/trac-7379-decorator-defaults.patch'), then restart sage with sage -br).\n\nI have moved the translation of the description strings and group strings to the html generation function so as to be able to dynamically change the language.\n\nThe new package (at the same url) removes conf_lcma.py.",
    "created_at": "2010-07-06T09:34:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84206",
    "user": "https://github.com/TimDumol"
}
```

<a id='comment:5'></a>
Since the package is based on SageNB 0.8.1 (#9430), you'll need to apply the main sage library patch to at #7379 (run hg_sage.apply('http://trac.sagemath.org/sage_trac/raw-attachment/ticket/7379/trac-7379-decorator-defaults.patch'), then restart sage with sage -br).

I have moved the translation of the description strings and group strings to the html generation function so as to be able to dynamically change the language.

The new package (at the same url) removes conf_lcma.py.



---

archive/issue_comments_084207.json:
```json
{
    "body": "Replaces all others. Adds a few more strings to translation, and implements dummy _() functions, as described in comments.",
    "created_at": "2010-08-17T16:55:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84207",
    "user": "https://github.com/TimDumol"
}
```

Replaces all others. Adds a few more strings to translation, and implements dummy _() functions, as described in comments.



---

archive/attachments_012001.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_9428-sagenb-i18n.3.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket9428/trac_9428-sagenb-i18n.3.patch",
    "created_at": "2010-08-19T11:24:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/TimDumol"
}
```



---

archive/issue_comments_084208.json:
```json
{
    "body": "Added a couple more strings to translation. Replaces all others.",
    "created_at": "2010-08-19T11:24:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84208",
    "user": "https://github.com/TimDumol"
}
```

Added a couple more strings to translation. Replaces all others.



---

archive/issue_comments_084209.json:
```json
{
    "body": "<a id='comment:6'></a>\nNew test package at http://sage.math.washington.edu/home/timdumol/sagenb-0.8.2-dev-i18n.spkg fixing all noted issues.",
    "created_at": "2010-08-19T14:39:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84209",
    "user": "https://github.com/TimDumol"
}
```

<a id='comment:6'></a>
New test package at http://sage.math.washington.edu/home/timdumol/sagenb-0.8.2-dev-i18n.spkg fixing all noted issues.



---

archive/issue_comments_084210.json:
```json
{
    "body": "<a id='comment:8'></a>\nHi, thank you for this great work. I have several comments:\n\nI installed sagenb-0.8.2-dev-i18n.spkg and started Sage. I got error caused by empty locale directory. However, this has been fixed after installing portugese and czech translations. Is this behavior intented?\n\nI have seen that some strings have been changed from the version announced in [sage-notebook mailing list](http://groups.google.cz/group/sage-notebook/browse_thread/thread/9b7b6aee9e331962), but I was not able to find the sagenb.pot with strings for translations.\n\nIf anyone is interested, I have one feature request related to the strings \"XX minutes ago\". It is [requested](http://groups.google.cz/group/sage-notebook/msg/1eae0947a08c16a5?) in the sage-notebook in the thread linked above. Could this be fixed? Many thanks.\n\nbtw: How to review this trac? I have seen [devel comments](http://nb.sagemath.org/dev.html). Is it reasonable to run doctests for sagenb tickets?",
    "created_at": "2010-08-24T07:19:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84210",
    "user": "https://github.com/robert-marik"
}
```

<a id='comment:8'></a>
Hi, thank you for this great work. I have several comments:

I installed sagenb-0.8.2-dev-i18n.spkg and started Sage. I got error caused by empty locale directory. However, this has been fixed after installing portugese and czech translations. Is this behavior intented?

I have seen that some strings have been changed from the version announced in [sage-notebook mailing list](http://groups.google.cz/group/sage-notebook/browse_thread/thread/9b7b6aee9e331962), but I was not able to find the sagenb.pot with strings for translations.

If anyone is interested, I have one feature request related to the strings "XX minutes ago". It is [requested](http://groups.google.cz/group/sage-notebook/msg/1eae0947a08c16a5?) in the sage-notebook in the thread linked above. Could this be fixed? Many thanks.

btw: How to review this trac? I have seen [devel comments](http://nb.sagemath.org/dev.html). Is it reasonable to run doctests for sagenb tickets?



---

archive/attachments_012002.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_9428-sagenb-i18n.4.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket9428/trac_9428-sagenb-i18n.4.patch",
    "created_at": "2010-08-26T09:23:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/TimDumol"
}
```



---

archive/issue_comments_084211.json:
```json
{
    "body": "Replaces previous patches. Added the requested \"XX <time> ago\" fix. Updated the sagenb.po file with the latest strings to be translated. Added sagenb/locale to the package data list.",
    "created_at": "2010-08-26T09:23:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84211",
    "user": "https://github.com/TimDumol"
}
```

Replaces previous patches. Added the requested "XX <time> ago" fix. Updated the sagenb.po file with the latest strings to be translated. Added sagenb/locale to the package data list.



---

archive/issue_comments_084212.json:
```json
{
    "body": "<a id='comment:9'></a>\nHi,\n\nThere is a new package version at the same url: http://sage.math.washington.edu/home/timdumol/sagenb-0.8.2-dev-i18n.spkg\n\nThe error regarding the missing locale directory was a bug. The new patch fixes this, and addresses your issue regarding \"XX <time units> ago\".\n\nThe new translations are found in `sagenb.po`.",
    "created_at": "2010-08-26T11:52:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84212",
    "user": "https://github.com/TimDumol"
}
```

<a id='comment:9'></a>
Hi,

There is a new package version at the same url: http://sage.math.washington.edu/home/timdumol/sagenb-0.8.2-dev-i18n.spkg

The error regarding the missing locale directory was a bug. The new patch fixes this, and addresses your issue regarding "XX <time units> ago".

The new translations are found in `sagenb.po`.



---

archive/issue_comments_084213.json:
```json
{
    "body": "<a id='comment:10'></a>\nHi, thank you for the patch\n\n1. Installs fine, works as expected\n\n2. sage -t -sagenb passed\n\n3. I was not able to configure selenium tests, got errors like \"unable to start browser\". Do I need to run these tests to give a positive review to this ticket?\n\n4. It seems that the issue \"XX <time units> ago\" has not been resolved. The workseet.py still contains\n\n```\n    def _saved_by_info(self, x, username=None):\n        try:\n            u = self.__saved_by_info[x]\n            return ' '+_('ago by %s', username)%u\n        except (KeyError,AttributeError):\n            return ' '+_('ago', username)\n```\nand I do not have possibility to put internationalized text on the front of the number, like \n\"pred 10 sekundami\". But no matter, can be resolved later on a ticket which adds Czech translation which is also finished.",
    "created_at": "2010-08-27T21:32:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84213",
    "user": "https://github.com/robert-marik"
}
```

<a id='comment:10'></a>
Hi, thank you for the patch

1. Installs fine, works as expected

2. sage -t -sagenb passed

3. I was not able to configure selenium tests, got errors like "unable to start browser". Do I need to run these tests to give a positive review to this ticket?

4. It seems that the issue "XX <time units> ago" has not been resolved. The workseet.py still contains

```
    def _saved_by_info(self, x, username=None):
        try:
            u = self.__saved_by_info[x]
            return ' '+_('ago by %s', username)%u
        except (KeyError,AttributeError):
            return ' '+_('ago', username)
```
and I do not have possibility to put internationalized text on the front of the number, like 
"pred 10 sekundami". But no matter, can be resolved later on a ticket which adds Czech translation which is also finished.



---

archive/issue_comments_084214.json:
```json
{
    "body": "<a id='comment:11'></a>\nI observed that if I click in worksheet to Undo button, the Last Edited field does not contain the name of the author, but the word \"ago\". Switching languages does not change the string in the field Last Edited. The string is always in the notebook default language.\n\nDo you have the same behavior? Do you know how to fix this? I think that there should be no strings for translation in the function _saved_by_info, since the whole phrase is translated in the function snapshot_data. Is this right?\n\nIf you prepare new version, could you add the directory cs_CZ and the file from \nhttp://user.mendelu.cz/marik/sage/sagenb.po ?\n\nI tested extensivelly the last version of the sagenb package and everything works fine, with one exception in Last Edited field described above.\n\nIt seems that the welcome page and registration process must be in the default language of the notebook right now. Could this be improved in some later versions?\n\nStill trying to make selenium tests work in order to finish review of this ticket... \n\nMany thanks for working on i18n!",
    "created_at": "2010-08-28T18:49:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84214",
    "user": "https://github.com/robert-marik"
}
```

<a id='comment:11'></a>
I observed that if I click in worksheet to Undo button, the Last Edited field does not contain the name of the author, but the word "ago". Switching languages does not change the string in the field Last Edited. The string is always in the notebook default language.

Do you have the same behavior? Do you know how to fix this? I think that there should be no strings for translation in the function _saved_by_info, since the whole phrase is translated in the function snapshot_data. Is this right?

If you prepare new version, could you add the directory cs_CZ and the file from 
http://user.mendelu.cz/marik/sage/sagenb.po ?

I tested extensivelly the last version of the sagenb package and everything works fine, with one exception in Last Edited field described above.

It seems that the welcome page and registration process must be in the default language of the notebook right now. Could this be improved in some later versions?

Still trying to make selenium tests work in order to finish review of this ticket... 

Many thanks for working on i18n!



---

archive/issue_events_070902.json:
```json
{
    "actor": "https://github.com/robert-marik",
    "created_at": "2010-09-08T08:58:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9428#event-70902"
}
```



---

archive/issue_events_070903.json:
```json
{
    "actor": "https://github.com/robert-marik",
    "created_at": "2010-09-08T08:58:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9428#event-70903"
}
```



---

archive/issue_comments_084215.json:
```json
{
    "body": "<a id='comment:12'></a>\nThe \"last edited\" field in the \"Undo\" part of the notebook is always in the default notebook language and does not change when changing account settings.\n\nThe other things work. Excellent! Is is easy to fix this last issue? Many thanks.",
    "created_at": "2010-09-08T08:58:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84215",
    "user": "https://github.com/robert-marik"
}
```

<a id='comment:12'></a>
The "last edited" field in the "Undo" part of the notebook is always in the default notebook language and does not change when changing account settings.

The other things work. Excellent! Is is easy to fix this last issue? Many thanks.



---

archive/issue_comments_084216.json:
```json
{
    "body": "<a id='comment:13'></a>\nThe last part shouldn't be too difficult to fix. I've added your localization.",
    "created_at": "2010-09-10T02:23:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84216",
    "user": "https://github.com/TimDumol"
}
```

<a id='comment:13'></a>
The last part shouldn't be too difficult to fix. I've added your localization.



---

archive/attachments_012003.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_9428-sagenb-i18n.5.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket9428/trac_9428-sagenb-i18n.5.patch",
    "created_at": "2010-09-10T03:55:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/TimDumol"
}
```



---

archive/issue_comments_084217.json:
```json
{
    "body": "Replaces all previous. Really fixed the undo problem.",
    "created_at": "2010-09-10T03:55:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84217",
    "user": "https://github.com/TimDumol"
}
```

Replaces all previous. Really fixed the undo problem.



---

archive/issue_events_070904.json:
```json
{
    "actor": "https://github.com/TimDumol",
    "created_at": "2010-09-10T04:07:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9428#event-70904"
}
```



---

archive/issue_events_070905.json:
```json
{
    "actor": "https://github.com/TimDumol",
    "created_at": "2010-09-10T04:07:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9428#event-70905"
}
```



---

archive/issue_comments_084218.json:
```json
{
    "body": "<a id='comment:14'></a>\nThe latest version of the pkg is up at http://sage.math.washington.edu/home/timdumol/sagenb-0.8.2-dev-i18n.spkg. I've included your sagenb.po, and the above patch. Please be advised that there is a new string to be translated (\"%s ago\").",
    "created_at": "2010-09-10T04:07:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84218",
    "user": "https://github.com/TimDumol"
}
```

<a id='comment:14'></a>
The latest version of the pkg is up at http://sage.math.washington.edu/home/timdumol/sagenb-0.8.2-dev-i18n.spkg. I've included your sagenb.po, and the above patch. Please be advised that there is a new string to be translated ("%s ago").



---

archive/issue_comments_084219.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-This patch internationalizes the Sage Notebook and adds a localization to Brazilian Portuguese.\n+This patch internationalizes the Sage Notebook and adds a localization to Brazilian Portuguese and Czech. Blocks #8754.\n``````\n",
    "created_at": "2010-09-10T04:09:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84219",
    "user": "https://github.com/TimDumol"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1 @@
-This patch internationalizes the Sage Notebook and adds a localization to Brazilian Portuguese.
+This patch internationalizes the Sage Notebook and adds a localization to Brazilian Portuguese and Czech. Blocks #8754.
``````




---

archive/issue_comments_084220.json:
```json
{
    "body": "Replaces all others. Fixed a bug in the fix.",
    "created_at": "2010-09-11T02:54:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84220",
    "user": "https://github.com/TimDumol"
}
```

Replaces all others. Fixed a bug in the fix.



---

archive/attachments_012004.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_9428-sagenb-i18n.6.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket9428/trac_9428-sagenb-i18n.6.patch",
    "created_at": "2010-09-11T05:27:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/TimDumol"
}
```



---

archive/issue_comments_084221.json:
```json
{
    "body": "<a id='comment:16'></a>\nNew package version here: http://sage.math.washington.edu/home/timdumol/sagenb-0.8.2-dev-i18n.spkg fixing the bug in Undo.",
    "created_at": "2010-09-11T05:27:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84221",
    "user": "https://github.com/TimDumol"
}
```

<a id='comment:16'></a>
New package version here: http://sage.math.washington.edu/home/timdumol/sagenb-0.8.2-dev-i18n.spkg fixing the bug in Undo.



---

archive/issue_comments_084222.json:
```json
{
    "body": "<a id='comment:17'></a>\nAnother package version at the same url fixing a minor doctest error.",
    "created_at": "2010-09-11T14:53:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84222",
    "user": "https://github.com/TimDumol"
}
```

<a id='comment:17'></a>
Another package version at the same url fixing a minor doctest error.



---

archive/issue_comments_084223.json:
```json
{
    "body": "Fixed a failing doctest.",
    "created_at": "2010-09-11T14:56:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84223",
    "user": "https://github.com/TimDumol"
}
```

Fixed a failing doctest.



---

archive/issue_events_070906.json:
```json
{
    "actor": "https://github.com/robert-marik",
    "created_at": "2010-09-11T18:38:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9428#event-70906"
}
```



---

archive/issue_events_070907.json:
```json
{
    "actor": "https://github.com/robert-marik",
    "created_at": "2010-09-11T18:38:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9428#event-70907"
}
```



---

archive/attachments_012005.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_9428-sagenb-i18n.7.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket9428/trac_9428-sagenb-i18n.7.patch",
    "created_at": "2010-09-11T18:38:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/robert-marik"
}
```



---

archive/issue_comments_084224.json:
```json
{
    "body": "<a id='comment:18'></a>\nLooks fine for me, instals fine, works fine, no problems found when using it for a longer time and for many various things.\n\nAll doctests (sage -t -sagenb) passed. \n\nVery very important patch, thank you.\n\nI am not able to check the Brazilian Portugese, but despite this fact I give a positive review! \n\nMany thanks for this work.",
    "created_at": "2010-09-11T18:38:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84224",
    "user": "https://github.com/robert-marik"
}
```

<a id='comment:18'></a>
Looks fine for me, instals fine, works fine, no problems found when using it for a longer time and for many various things.

All doctests (sage -t -sagenb) passed. 

Very very important patch, thank you.

I am not able to check the Brazilian Portugese, but despite this fact I give a positive review! 

Many thanks for this work.



---

archive/issue_comments_084225.json:
```json
{
    "body": "**Changing author** from \"Luiz Aquino, Dan Drake\" to \"Luiz Aquino, Dan Drake, Tim Dumol\".",
    "created_at": "2010-09-14T19:14:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84225",
    "user": "https://trac.sagemath.org/admin/accounts/users/LuizAquino"
}
```

**Changing author** from "Luiz Aquino, Dan Drake" to "Luiz Aquino, Dan Drake, Tim Dumol".



---

archive/issue_events_070908.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/LuizAquino",
    "created_at": "2010-09-14T19:14:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9428#event-70908"
}
```



---

archive/issue_events_070909.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/LuizAquino",
    "created_at": "2010-09-14T19:14:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9428#event-70909"
}
```



---

archive/issue_comments_084226.json:
```json
{
    "body": "<a id='comment:19'></a>\nI observed the follow issues:\n\n- When we create a new user the language for them is the default one (as\nwe expected). But when we go to the page \"Settings > Account Setting\" of\nthis user we see \"en_US\" as the user language and not the default one,\nbeside the pages are actually in the default one.\n\n- The language for the JavaScript code is in the default one and not in\nthe user one. For example, if the default language is \"en_US\" and the\nuser language is \"pt_BR\", then when we click on the link \"Esvaziar\nLixeira\" (Empty Trash) at the page \"Lixeira\" (Trash) the message appears\nin English and not in Portuguese.\n\n- When we change the default language the language for the JavaScript\ncode is still the old one. We need to restart the Notebook to update the\nlanguage for the JavaScript code. By the way, I think that the language\nfor the JavaScript should be the same as the user.\n\n- When we set a \"simple\" challenge for account registration the question\nin the registration process is in the default language as we expected,\nbut we have to give the answer in English. For example, if the default\nlanguage is \"pt_BR\" and we answer the question \"Quanto \u00e9 2 mais\n3?\" (What is 2 plus 3?) with \"cinco\" (five) we get an error. But, if we\nanswer that question with \"five\", we don't get an error. So, the\nquestion is in Portuguese but we have to give the answer in English.\n\n- The messages in the \"Last Edited\" column at the pages \"Home\" and\n\"Published\" are wrong. Each message is in two languages: the first half\nis in the default language and the second half is in the user language.\n\nI updated the pt_br locale files. I made some corrections and I translated the new strings. Please, add this to the next sagenb package:\n\nhttp://sites.google.com/site/lcmaquino/sage/sagenb_pt_BR.tar.gz?attredirects=0&d=1",
    "created_at": "2010-09-14T19:14:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84226",
    "user": "https://trac.sagemath.org/admin/accounts/users/LuizAquino"
}
```

<a id='comment:19'></a>
I observed the follow issues:

- When we create a new user the language for them is the default one (as
we expected). But when we go to the page "Settings > Account Setting" of
this user we see "en_US" as the user language and not the default one,
beside the pages are actually in the default one.

- The language for the JavaScript code is in the default one and not in
the user one. For example, if the default language is "en_US" and the
user language is "pt_BR", then when we click on the link "Esvaziar
Lixeira" (Empty Trash) at the page "Lixeira" (Trash) the message appears
in English and not in Portuguese.

- When we change the default language the language for the JavaScript
code is still the old one. We need to restart the Notebook to update the
language for the JavaScript code. By the way, I think that the language
for the JavaScript should be the same as the user.

- When we set a "simple" challenge for account registration the question
in the registration process is in the default language as we expected,
but we have to give the answer in English. For example, if the default
language is "pt_BR" and we answer the question "Quanto é 2 mais
3?" (What is 2 plus 3?) with "cinco" (five) we get an error. But, if we
answer that question with "five", we don't get an error. So, the
question is in Portuguese but we have to give the answer in English.

- The messages in the "Last Edited" column at the pages "Home" and
"Published" are wrong. Each message is in two languages: the first half
is in the default language and the second half is in the user language.

I updated the pt_br locale files. I made some corrections and I translated the new strings. Please, add this to the next sagenb package:

http://sites.google.com/site/lcmaquino/sage/sagenb_pt_BR.tar.gz?attredirects=0&d=1



---

archive/attachments_012006.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_9428-sagenb-i18n.8.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket9428/trac_9428-sagenb-i18n.8.patch",
    "created_at": "2010-09-15T16:19:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/TimDumol"
}
```



---

archive/issue_comments_084227.json:
```json
{
    "body": "Fixes the issues pointed out by LuizAquino. Updates pt_BR.",
    "created_at": "2010-09-15T16:19:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84227",
    "user": "https://github.com/TimDumol"
}
```

Fixes the issues pointed out by LuizAquino. Updates pt_BR.



---

archive/issue_comments_084228.json:
```json
{
    "body": "<a id='comment:20'></a>\nThank you for pointing out these issues. I have posted a new patch, and a new package at the same url (http://sage.math.washington.edu/home/timdumol/sagenb-0.8.2-dev-i18n.spkg) addressing these issues.\n\nrobert.marik, it seems that some strings re: the notebook settings are left untranslated (Doc pool size, Type of challenge, etc.) in the cs_CZ locale.",
    "created_at": "2010-09-15T16:27:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84228",
    "user": "https://github.com/TimDumol"
}
```

<a id='comment:20'></a>
Thank you for pointing out these issues. I have posted a new patch, and a new package at the same url (http://sage.math.washington.edu/home/timdumol/sagenb-0.8.2-dev-i18n.spkg) addressing these issues.

robert.marik, it seems that some strings re: the notebook settings are left untranslated (Doc pool size, Type of challenge, etc.) in the cs_CZ locale.



---

archive/issue_comments_084229.json:
```json
{
    "body": "<a id='comment:21'></a>\nReplying to [timdumol](#comment%3A20):\n\n> robert.marik, it seems that some strings re: the notebook settings are left untranslated (Doc pool size, Type of challenge, etc.) in the cs_CZ locale.\n\n\nYes, I think that only admin (skilled person) can see these strings and he (she) is more familiar with the English terminology than the localized names. This should avoid some uncertainties. Do you accept this point of view?\n\nIs the new package ready for review?",
    "created_at": "2010-09-15T16:56:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84229",
    "user": "https://github.com/robert-marik"
}
```

<a id='comment:21'></a>
Replying to [timdumol](#comment%3A20):

> robert.marik, it seems that some strings re: the notebook settings are left untranslated (Doc pool size, Type of challenge, etc.) in the cs_CZ locale.


Yes, I think that only admin (skilled person) can see these strings and he (she) is more familiar with the English terminology than the localized names. This should avoid some uncertainties. Do you accept this point of view?

Is the new package ready for review?



---

archive/issue_comments_084230.json:
```json
{
    "body": "<a id='comment:22'></a>\nReplying to [timdumol](#comment%3A20):\n> Thank you for pointing out these issues. I have posted a new patch, and a new package at the same url (http://sage.math.washington.edu/home/timdumol/sagenb-0.8.2-dev-i18n.spkg) addressing these issues.\n> \n\n\nThank you for solve those issues!\n\nBut, it seems we have another new ones:\n\n- When we click on the link \"New Worksheet\" at the \"Home\" page, the\nnew worksheet is created with a title in the default language and not in the user one. So, if the default language is \"en_US\" and the user one is \"pt_BR\", then when we click on \"Nova Planilha\" (New Worksheet) the worksheet will have the title \"Untitled\" and not \"Sem t\u00edtulo\".\n\n- When we plot a surface (using the function plot3d), the text \"Get Image\" (at the side of the plot window) and \"To save this image (...)\" (that appears when we click on \"Get Image\") are in English no matter what is the user language or default language.",
    "created_at": "2010-09-15T19:06:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84230",
    "user": "https://trac.sagemath.org/admin/accounts/users/LuizAquino"
}
```

<a id='comment:22'></a>
Replying to [timdumol](#comment%3A20):
> Thank you for pointing out these issues. I have posted a new patch, and a new package at the same url (http://sage.math.washington.edu/home/timdumol/sagenb-0.8.2-dev-i18n.spkg) addressing these issues.
> 


Thank you for solve those issues!

But, it seems we have another new ones:

- When we click on the link "New Worksheet" at the "Home" page, the
new worksheet is created with a title in the default language and not in the user one. So, if the default language is "en_US" and the user one is "pt_BR", then when we click on "Nova Planilha" (New Worksheet) the worksheet will have the title "Untitled" and not "Sem título".

- When we plot a surface (using the function plot3d), the text "Get Image" (at the side of the plot window) and "To save this image (...)" (that appears when we click on "Get Image") are in English no matter what is the user language or default language.



---

archive/issue_comments_084231.json:
```json
{
    "body": "<a id='comment:23'></a>\nReplying to [robert.marik](#comment%3A21):\n\n> Yes, I think that only admin (skilled person) can see these strings and he (she) is more familiar with the English terminology than the localized names.\n\n\nEven for a \"skilled person\", I think is more comfortable to use a software in your native language.\n\nAnd you're assuming that a \"skilled person\" is someone that knows English, but it isn't necessarily true.",
    "created_at": "2010-09-15T19:26:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84231",
    "user": "https://trac.sagemath.org/admin/accounts/users/LuizAquino"
}
```

<a id='comment:23'></a>
Replying to [robert.marik](#comment%3A21):

> Yes, I think that only admin (skilled person) can see these strings and he (she) is more familiar with the English terminology than the localized names.


Even for a "skilled person", I think is more comfortable to use a software in your native language.

And you're assuming that a "skilled person" is someone that knows English, but it isn't necessarily true.



---

archive/attachments_012007.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_9428-sagenb-i18n.9.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket9428/trac_9428-sagenb-i18n.9.patch",
    "created_at": "2010-09-16T11:10:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/TimDumol"
}
```



---

archive/issue_comments_084232.json:
```json
{
    "body": "Fixes more issues pointed out by LuizAquino.",
    "created_at": "2010-09-16T11:10:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84232",
    "user": "https://github.com/TimDumol"
}
```

Fixes more issues pointed out by LuizAquino.



---

archive/issue_comments_084233.json:
```json
{
    "body": "<a id='comment:24'></a>\nI have attache a new patch, and uploaded a new package at once again the same url (http://sage.math.washington.edu/home/timdumol/sagenb-0.8.2-dev-i18n.spkg) solving the new issues. Sorry for all the bugs! I did not notice the other gettext instances.\n\nI personally prefer using software in English, but I happen to be somewhat weak in my native language (Filipino). Also, translating the particular phrases left untranslated by Robert would be incredibly verbose in my native language, but this may not be the case in Czech.",
    "created_at": "2010-09-16T11:33:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84233",
    "user": "https://github.com/TimDumol"
}
```

<a id='comment:24'></a>
I have attache a new patch, and uploaded a new package at once again the same url (http://sage.math.washington.edu/home/timdumol/sagenb-0.8.2-dev-i18n.spkg) solving the new issues. Sorry for all the bugs! I did not notice the other gettext instances.

I personally prefer using software in English, but I happen to be somewhat weak in my native language (Filipino). Also, translating the particular phrases left untranslated by Robert would be incredibly verbose in my native language, but this may not be the case in Czech.



---

archive/issue_comments_084234.json:
```json
{
    "body": "<a id='comment:25'></a>\nReplying to [timdumol](#comment%3A24):\n> I have attache a new patch, and uploaded a new package at once again the same url (http://sage.math.washington.edu/home/timdumol/sagenb-0.8.2-dev-i18n.spkg) solving the new issues. Sorry for all the bugs! I did not notice the other gettext instances.\n\n>\n\nYou're making a great job, Tim Dumol! All the last issues are solved.\n\nBut, unfortunately I realize more three (minor) issues:\n\n- The text \"evaluate\" below the first cell in a worksheet is in the default language and not in the user one.\n\n- We have two more strings to translate:\n\n* data/sage/html/notebook/base.html, line 71: \"Click to rename this worksheet\"\n\n* data/sage/html/notebook/base.html, line 112 -> \"Select an attached file\"\n\nWe are not using the function gettext() in these strings.\n\n- It's not a big deal, but the date below the title of a worksheet (at the worksheet page) is in English.\n\nI updated the pt_BR localization files. Please add this to the next package:\n\nhttp://sites.google.com/site/lcmaquino/sage/sagenb_pt_BR.tar.gz?attredirects=0&d=1\n\nRobert Marik, could you update the cs_CZ localization files to translate the new strings?\n\nI think that after solve these issues we are ready to ask for another localization files! I hope that sage will be available in a lot of languages very soon!",
    "created_at": "2010-09-16T14:24:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84234",
    "user": "https://trac.sagemath.org/admin/accounts/users/LuizAquino"
}
```

<a id='comment:25'></a>
Replying to [timdumol](#comment%3A24):
> I have attache a new patch, and uploaded a new package at once again the same url (http://sage.math.washington.edu/home/timdumol/sagenb-0.8.2-dev-i18n.spkg) solving the new issues. Sorry for all the bugs! I did not notice the other gettext instances.

>

You're making a great job, Tim Dumol! All the last issues are solved.

But, unfortunately I realize more three (minor) issues:

- The text "evaluate" below the first cell in a worksheet is in the default language and not in the user one.

- We have two more strings to translate:

* data/sage/html/notebook/base.html, line 71: "Click to rename this worksheet"

* data/sage/html/notebook/base.html, line 112 -> "Select an attached file"

We are not using the function gettext() in these strings.

- It's not a big deal, but the date below the title of a worksheet (at the worksheet page) is in English.

I updated the pt_BR localization files. Please add this to the next package:

http://sites.google.com/site/lcmaquino/sage/sagenb_pt_BR.tar.gz?attredirects=0&d=1

Robert Marik, could you update the cs_CZ localization files to translate the new strings?

I think that after solve these issues we are ready to ask for another localization files! I hope that sage will be available in a lot of languages very soon!



---

archive/issue_comments_084235.json:
```json
{
    "body": "<a id='comment:26'></a>\nReplying to [LuizAquino](#comment%3A25):\n> \n> Robert Marik, could you update the cs_CZ localization files to translate the new strings?\n\n\nI merged my po file with the pot file from the last sagenb spg and translated untranslated string. Added also translations for \"Click to rename this worksheet\"  and \"Select an attached file\". The file with Czech translations is at http://user.mendelu.cz/marik/sage/sagenb.po \n\nI think that the pot file distributed in spkg package is not up-to-date but running pybabel gives error on my installation (Debian Lenny)\n\n```\nmarik@um-bc107:/opt/sage/spkg/build/sagenb-0.8.2-dev-i18n/src/sagenb/sagenb$ pybabel extract -F ./babel.cfg . -o output.pot\nextracting messages from data/sage/html/base.html (encoding=\"utf-8\")\nTraceback (most recent call last):\n  File \"/usr/bin/pybabel\", line 8, in <module>\n    load_entry_point('Babel==0.9.1', 'console_scripts', 'pybabel')()\n  File \"/var/lib/python-support/python2.5/babel/messages/frontend.py\", line 1072, in main\n    return CommandLineInterface().run(sys.argv)\n  File \"/var/lib/python-support/python2.5/babel/messages/frontend.py\", line 645, in run\n    return getattr(self, cmdname)(args[1:])\n  File \"/var/lib/python-support/python2.5/babel/messages/frontend.py\", line 879, in extract\n    for filename, lineno, message, comments in extracted:\n  File \"/var/lib/python-support/python2.5/babel/messages/extract.py\", line 153, in extract_from_dir\n    options=options):\n  File \"/var/lib/python-support/python2.5/babel/messages/extract.py\", line 179, in extract_from_file\n    return list(extract(method, fileobj, keywords, comment_tags, options))\n  File \"/var/lib/python-support/python2.5/babel/messages/extract.py\", line 238, in extract\n    if func is None:\nUnboundLocalError: local variable 'func' referenced before assignment\n\n\n```",
    "created_at": "2010-09-16T18:35:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84235",
    "user": "https://github.com/robert-marik"
}
```

<a id='comment:26'></a>
Replying to [LuizAquino](#comment%3A25):
> 
> Robert Marik, could you update the cs_CZ localization files to translate the new strings?


I merged my po file with the pot file from the last sagenb spg and translated untranslated string. Added also translations for "Click to rename this worksheet"  and "Select an attached file". The file with Czech translations is at http://user.mendelu.cz/marik/sage/sagenb.po 

I think that the pot file distributed in spkg package is not up-to-date but running pybabel gives error on my installation (Debian Lenny)

```
marik@um-bc107:/opt/sage/spkg/build/sagenb-0.8.2-dev-i18n/src/sagenb/sagenb$ pybabel extract -F ./babel.cfg . -o output.pot
extracting messages from data/sage/html/base.html (encoding="utf-8")
Traceback (most recent call last):
  File "/usr/bin/pybabel", line 8, in <module>
    load_entry_point('Babel==0.9.1', 'console_scripts', 'pybabel')()
  File "/var/lib/python-support/python2.5/babel/messages/frontend.py", line 1072, in main
    return CommandLineInterface().run(sys.argv)
  File "/var/lib/python-support/python2.5/babel/messages/frontend.py", line 645, in run
    return getattr(self, cmdname)(args[1:])
  File "/var/lib/python-support/python2.5/babel/messages/frontend.py", line 879, in extract
    for filename, lineno, message, comments in extracted:
  File "/var/lib/python-support/python2.5/babel/messages/extract.py", line 153, in extract_from_dir
    options=options):
  File "/var/lib/python-support/python2.5/babel/messages/extract.py", line 179, in extract_from_file
    return list(extract(method, fileobj, keywords, comment_tags, options))
  File "/var/lib/python-support/python2.5/babel/messages/extract.py", line 238, in extract
    if func is None:
UnboundLocalError: local variable 'func' referenced before assignment


```



---

archive/issue_comments_084236.json:
```json
{
    "body": "<a id='comment:27'></a>\nHere is an updated .pot file:\n\nhttps://sites.google.com/site/lcmaquino/sage/sagenb.pot?attredirects=0&d=1\n\nI can generate it running pybabel on Ubuntu 10.04 without problem.\n\nBut, we have to take care about the .js files. In the new version of the package we are translating the .js files using the dictionary \"translations\" (defined in \"data/sage/js/localization.js\"), so we can't extract these strings using pybabel because it looks for \"gettext()\", \"ngetttext()\" and \"_()\" functions. Maybe we can implement a dummy \"_()\" function, as we did before.",
    "created_at": "2010-09-16T19:25:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84236",
    "user": "https://trac.sagemath.org/admin/accounts/users/LuizAquino"
}
```

<a id='comment:27'></a>
Here is an updated .pot file:

https://sites.google.com/site/lcmaquino/sage/sagenb.pot?attredirects=0&d=1

I can generate it running pybabel on Ubuntu 10.04 without problem.

But, we have to take care about the .js files. In the new version of the package we are translating the .js files using the dictionary "translations" (defined in "data/sage/js/localization.js"), so we can't extract these strings using pybabel because it looks for "gettext()", "ngetttext()" and "_()" functions. Maybe we can implement a dummy "_()" function, as we did before.



---

archive/issue_comments_084237.json:
```json
{
    "body": "<a id='comment:28'></a>\nHi Tim,\n\nIt seems you updated the package. I tried to install it and I got some errors. To solve them, I changed the files:\n\n#sagenb/notebook/template.py, line 142\n\nFrom: \n\n```\nenv.filters['_'] = lambda x: return x\n```\nTo:\n\n```\nenv.filters['_'] = lambda x: x\n``` \n\n#sagenb/data/sage/js/localization.js, line 5\n\nThere is a open comment tag \"{#\", but there isn't a close comment tag \"#}\". So, I typed \"#}\" in the line 7.\n\nI notice that you forgot to put the strings \"Problem inserting new input cell before current input cell.\" and \"Problem inserting new text cell before current input cell.\" in the files localization.js and translated-messages.js.\n\nAfter install, I notice that the date below the title of a worksheet (at the worksheet page) appears as \"None\". To solve it, I changed the file:\n\n#sagenb/notebook/worksheet.js\n\nline 4166: I commented this line.\n\nline 4168 (solve an 'exceptions.UnicodeEncodeError' in Czech and the text \"None\" below the title of a worksheet):\n\nFrom:\n\n```\ntime.strftime(month+' %d, %Y %I:%M %p', time.localtime(float(t)))\n```\nTo:\n\n```\nreturn month + time.strftime(' %d, %Y %I:%M %p', time.localtime(float(t)))\n```\n\nAfter all, it seems that the issues pointed in above comment 26 are solved! :)\n\nI updated the pt_BR localization files (translating the name of months) and the .pot file. Please add this to the next package:\n\nhttp://sites.google.com/site/lcmaquino/sage/sagenb_pt_BR.tar.gz?attredirects=0&d=1\n\nhttps://sites.google.com/site/lcmaquino/sage/sagenb.pot?attredirects=0&d=1\n\nBy the way, please remove the file \"sagenb/notebook/conf_lcma.py\" (as you did before).\n\nI think we're ready to ask for another localization files! What do you think?",
    "created_at": "2010-09-30T17:53:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84237",
    "user": "https://trac.sagemath.org/admin/accounts/users/LuizAquino"
}
```

<a id='comment:28'></a>
Hi Tim,

It seems you updated the package. I tried to install it and I got some errors. To solve them, I changed the files:

#sagenb/notebook/template.py, line 142

From: 

```
env.filters['_'] = lambda x: return x
```
To:

```
env.filters['_'] = lambda x: x
``` 

#sagenb/data/sage/js/localization.js, line 5

There is a open comment tag "{#", but there isn't a close comment tag "#}". So, I typed "#}" in the line 7.

I notice that you forgot to put the strings "Problem inserting new input cell before current input cell." and "Problem inserting new text cell before current input cell." in the files localization.js and translated-messages.js.

After install, I notice that the date below the title of a worksheet (at the worksheet page) appears as "None". To solve it, I changed the file:

#sagenb/notebook/worksheet.js

line 4166: I commented this line.

line 4168 (solve an 'exceptions.UnicodeEncodeError' in Czech and the text "None" below the title of a worksheet):

From:

```
time.strftime(month+' %d, %Y %I:%M %p', time.localtime(float(t)))
```
To:

```
return month + time.strftime(' %d, %Y %I:%M %p', time.localtime(float(t)))
```

After all, it seems that the issues pointed in above comment 26 are solved! :)

I updated the pt_BR localization files (translating the name of months) and the .pot file. Please add this to the next package:

http://sites.google.com/site/lcmaquino/sage/sagenb_pt_BR.tar.gz?attredirects=0&d=1

https://sites.google.com/site/lcmaquino/sage/sagenb.pot?attredirects=0&d=1

By the way, please remove the file "sagenb/notebook/conf_lcma.py" (as you did before).

I think we're ready to ask for another localization files! What do you think?



---

archive/issue_comments_084238.json:
```json
{
    "body": "Adds Luiz Aquino's fixes and .m/po/t files.",
    "created_at": "2010-10-01T22:46:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84238",
    "user": "https://github.com/TimDumol"
}
```

Adds Luiz Aquino's fixes and .m/po/t files.



---

archive/issue_events_070910.json:
```json
{
    "actor": "https://github.com/TimDumol",
    "created_at": "2010-10-02T00:36:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9428#event-70910"
}
```



---

archive/issue_events_070911.json:
```json
{
    "actor": "https://github.com/TimDumol",
    "created_at": "2010-10-02T00:36:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9428#event-70911"
}
```



---

archive/attachments_012008.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_9428-sagenb-i18n.10.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket9428/trac_9428-sagenb-i18n.10.patch",
    "created_at": "2010-10-02T00:36:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/TimDumol"
}
```



---

archive/issue_comments_084239.json:
```json
{
    "body": "<a id='comment:29'></a>\nSorry, I forgot to post here that I had updated the spkg. Here's a new spkg (http://sage.math.washington.edu/home/timdumol/sagenb-0.8.2-dev-i18n.spkg) and patch implementing your changes.\n\nSince you approve of my changes, and your changes count as a reviewer patch, shall we mark this positive review?",
    "created_at": "2010-10-02T00:36:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84239",
    "user": "https://github.com/TimDumol"
}
```

<a id='comment:29'></a>
Sorry, I forgot to post here that I had updated the spkg. Here's a new spkg (http://sage.math.washington.edu/home/timdumol/sagenb-0.8.2-dev-i18n.spkg) and patch implementing your changes.

Since you approve of my changes, and your changes count as a reviewer patch, shall we mark this positive review?



---

archive/issue_comments_084240.json:
```json
{
    "body": "<a id='comment:30'></a>\nIt installed ok. But, you didn't comment (or remove) the line 4166 in \"sagenb/notebook/worksheet.js\". Without this change, I got an error when I tried to save a new worksheet. The last messages about this error were:\n\n```\n\t  File \"/home/lcaquino/Instaladores/sage/sage/local/lib/python2.6/site-packages/sagenb-0.8.2_dev_i18n-py2.6.egg/sagenb/notebook/twist.py\", line 864, in render\n\t    self.worksheet.save_snapshot(self.username)\n\t  File \"/home/lcaquino/Instaladores/sage/sage/local/lib/python2.6/site-packages/sagenb-0.8.2_dev_i18n-py2.6.egg/sagenb/notebook/worksheet.py\", line 1964, in save_snapshot\n\t    self.limit_snapshots()\n\t  File \"/home/lcaquino/Instaladores/sage/sage/local/lib/python2.6/site-packages/sagenb-0.8.2_dev_i18n-py2.6.egg/sagenb/notebook/worksheet.py\", line 2060, in limit_snapshots\n\t    amnesty = int(calendar.timegm(time.strptime(\"01 May 2009\", \"%d %b %Y\")))\n\t  File \"/home/lcaquino/Instaladores/sage/sage/local/lib/python/_strptime.py\", line 454, in _strptime_time\n\t    return _strptime(data_string, format)[0]\n\t  File \"/home/lcaquino/Instaladores/sage/sage/local/lib/python/_strptime.py\", line 325, in _strptime\n\t    (data_string, format))\n\texceptions.ValueError: time data '01 May 2009' does not match format '%d %b %Y'\n```\n\nBy the way, you forgot to put the strings in the files \"localization.js\" and \"translated-messages.js\" as pointed above.\n\nWhen we finish the work with this package, how do you think to instruct another user to add new localization files? Do you think to ask them to send to you the localization files and then you add it to the package?",
    "created_at": "2010-10-02T13:53:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84240",
    "user": "https://trac.sagemath.org/admin/accounts/users/LuizAquino"
}
```

<a id='comment:30'></a>
It installed ok. But, you didn't comment (or remove) the line 4166 in "sagenb/notebook/worksheet.js". Without this change, I got an error when I tried to save a new worksheet. The last messages about this error were:

```
	  File "/home/lcaquino/Instaladores/sage/sage/local/lib/python2.6/site-packages/sagenb-0.8.2_dev_i18n-py2.6.egg/sagenb/notebook/twist.py", line 864, in render
	    self.worksheet.save_snapshot(self.username)
	  File "/home/lcaquino/Instaladores/sage/sage/local/lib/python2.6/site-packages/sagenb-0.8.2_dev_i18n-py2.6.egg/sagenb/notebook/worksheet.py", line 1964, in save_snapshot
	    self.limit_snapshots()
	  File "/home/lcaquino/Instaladores/sage/sage/local/lib/python2.6/site-packages/sagenb-0.8.2_dev_i18n-py2.6.egg/sagenb/notebook/worksheet.py", line 2060, in limit_snapshots
	    amnesty = int(calendar.timegm(time.strptime("01 May 2009", "%d %b %Y")))
	  File "/home/lcaquino/Instaladores/sage/sage/local/lib/python/_strptime.py", line 454, in _strptime_time
	    return _strptime(data_string, format)[0]
	  File "/home/lcaquino/Instaladores/sage/sage/local/lib/python/_strptime.py", line 325, in _strptime
	    (data_string, format))
	exceptions.ValueError: time data '01 May 2009' does not match format '%d %b %Y'
```

By the way, you forgot to put the strings in the files "localization.js" and "translated-messages.js" as pointed above.

When we finish the work with this package, how do you think to instruct another user to add new localization files? Do you think to ask them to send to you the localization files and then you add it to the package?



---

archive/issue_comments_084241.json:
```json
{
    "body": "<a id='comment:31'></a>\nBy the way, please add the .pot file to the next package. I think it should be in \"sagenb-0.8.2_dev_i18n-py2.6.egg/sagenb/locale\" directory.",
    "created_at": "2010-10-02T13:58:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84241",
    "user": "https://trac.sagemath.org/admin/accounts/users/LuizAquino"
}
```

<a id='comment:31'></a>
By the way, please add the .pot file to the next package. I think it should be in "sagenb-0.8.2_dev_i18n-py2.6.egg/sagenb/locale" directory.



---

archive/issue_comments_084242.json:
```json
{
    "body": "<a id='comment:32'></a>\n> Since you approve of my changes, and your changes count as a reviewer patch, shall we mark this positive review?\n\n\nUnfortunately we can't mark this as \"positive review\" yet. But we're very close to do so! :)",
    "created_at": "2010-10-02T14:02:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84242",
    "user": "https://trac.sagemath.org/admin/accounts/users/LuizAquino"
}
```

<a id='comment:32'></a>
> Since you approve of my changes, and your changes count as a reviewer patch, shall we mark this positive review?


Unfortunately we can't mark this as "positive review" yet. But we're very close to do so! :)



---

archive/issue_comments_084243.json:
```json
{
    "body": "<a id='comment:33'></a>\nReplying to [LuizAquino](#comment%3A32):\n> Unfortunately we can't mark this as \"positive review\" yet. But we're very close to do so! :)\n\n\nWhere is the problem? Can I help to finish this useful ticket?",
    "created_at": "2010-11-07T05:54:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84243",
    "user": "https://github.com/robert-marik"
}
```

<a id='comment:33'></a>
Replying to [LuizAquino](#comment%3A32):
> Unfortunately we can't mark this as "positive review" yet. But we're very close to do so! :)


Where is the problem? Can I help to finish this useful ticket?



---

archive/issue_comments_084244.json:
```json
{
    "body": "<a id='comment:34'></a>\nReplying to [robert.marik](#comment%3A33):\n> \n> Where is the problem? Can I help to finish this useful ticket?\n> \n\n\nWe should implement the solutions pointed in comments 28 and 30 and update the package. But, where you read \"sagenb/notebook/worksheet.js\", please understand \"sagenb/notebook/worksheet.py\".",
    "created_at": "2010-11-07T20:16:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84244",
    "user": "https://trac.sagemath.org/admin/accounts/users/LuizAquino"
}
```

<a id='comment:34'></a>
Replying to [robert.marik](#comment%3A33):
> 
> Where is the problem? Can I help to finish this useful ticket?
> 


We should implement the solutions pointed in comments 28 and 30 and update the package. But, where you read "sagenb/notebook/worksheet.js", please understand "sagenb/notebook/worksheet.py".



---

archive/issue_events_070912.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2012-06-23T09:09:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9428#event-70912"
}
```



---

archive/issue_events_070913.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2012-06-23T09:09:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9428#event-70913"
}
```



---

archive/issue_comments_084245.json:
```json
{
    "body": "<a id='comment:35'></a>\nThis ticket has been superseded by #11471.",
    "created_at": "2012-06-23T09:09:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84245",
    "user": "https://github.com/kini"
}
```

<a id='comment:35'></a>
This ticket has been superseded by #11471.



---

archive/issue_comments_084246.json:
```json
{
    "body": "**Reviewer:** Keshav Kini",
    "created_at": "2012-06-23T09:09:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84246",
    "user": "https://github.com/kini"
}
```

**Reviewer:** Keshav Kini



---

archive/issue_events_070914.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2012-06-23T09:09:30Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "milestone": "sage-5.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9428#event-70914"
}
```



---

archive/issue_events_070915.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2012-06-23T09:09:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "label": "duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9428#event-70915"
}
```



---

archive/issue_comments_084247.json:
```json
{
    "body": "**Changing reviewer** from \"Keshav Kini\" to \"Keshav Kini, Luiz Aquino, Dan Drake, Tim Dumol\".",
    "created_at": "2012-09-05T07:15:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84247",
    "user": "https://github.com/jdemeyer"
}
```

**Changing reviewer** from "Keshav Kini" to "Keshav Kini, Luiz Aquino, Dan Drake, Tim Dumol".



---

archive/issue_comments_084248.json:
```json
{
    "body": "**Changing author** from \"Luiz Aquino, Dan Drake, Tim Dumol\" to \"\".",
    "created_at": "2012-09-05T07:15:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9428#issuecomment-84248",
    "user": "https://github.com/jdemeyer"
}
```

**Changing author** from "Luiz Aquino, Dan Drake, Tim Dumol" to "".



---

archive/issue_events_070916.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-09-05T07:15:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "label": "duplicate",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9428#event-70916"
}
```



---

archive/issue_events_070917.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-09-05T07:15:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9428#event-70917"
}
```



---

archive/issue_events_070918.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-09-05T07:15:38Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/9428",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9428#event-70918"
}
```
