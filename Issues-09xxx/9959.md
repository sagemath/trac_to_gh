# Issue 9959: Get PARI/GP to stop starting automatically

archive/issues_009958.json:
```json
{
    "assignees": [],
    "body": "I still am getting the known behavior below when exiting Sage.\n\n```\nExiting Sage (CPU time 0m0.74s, Wall time 11m11.95s). \nExiting spawned GP/PARI interpreter process. \n```\nIt's not exactly a bug, but it's also annoying and potentially \nconfusing.  We should stop it.\n\nApply **9959_combined.patch** below and install the **new spkg**: [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p9.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p9.spkg) (note that this spkg is *not* based on the earlier p8)\n\nCC:  @qed777 @jdemeyer @nexttime\n\nComponent: **packages: standard**\n\nAuthor: **Jeroen Demeyer**\n\nReviewer: **John Cremona**\n\nMerged: **sage-4.6.rc0**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/9959_\n\n",
    "closed_at": "2010-10-21T08:18:58Z",
    "created_at": "2010-09-21T13:36:14Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%20blocker%20/%201",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Get PARI/GP to stop starting automatically",
    "type": "issue",
    "updated_at": "2010-10-21T08:18:58Z",
    "url": "https://github.com/sagemath/sage/issues/9959",
    "user": "https://github.com/kcrisman"
}
```
I still am getting the known behavior below when exiting Sage.

```
Exiting Sage (CPU time 0m0.74s, Wall time 11m11.95s). 
Exiting spawned GP/PARI interpreter process. 
```
It's not exactly a bug, but it's also annoying and potentially 
confusing.  We should stop it.

Apply **9959_combined.patch** below and install the **new spkg**: [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p9.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p9.spkg) (note that this spkg is *not* based on the earlier p8)

CC:  @qed777 @jdemeyer @nexttime

Component: **packages: standard**

Author: **Jeroen Demeyer**

Reviewer: **John Cremona**

Merged: **sage-4.6.rc0**

_Issue created by migration from https://trac.sagemath.org/ticket/9959_





---

archive/issue_events_128355.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2010-09-21T13:36:14Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "milestone_number": null,
    "milestone_title": "sage-4.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9959#event-128355"
}
```



---

archive/issue_events_128356.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2010-09-21T13:36:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "0000b0",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9959#event-128356"
}
```



---

archive/issue_events_128357.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2010-09-21T13:36:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9959#event-128357"
}
```



---

archive/issue_events_128358.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2010-09-21T13:36:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9959#event-128358"
}
```



---

archive/issue_comments_090500.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nOh, I thought you just meant \"GP/PARI\" should read \"PARI/GP\"...",
    "created_at": "2010-09-21T14:14:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90500",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:1" align="right">comment:1</div>

Oh, I thought you just meant "GP/PARI" should read "PARI/GP"...



---

archive/issue_comments_090501.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nSo how do we manage this?\n\nRewrite the class `sage.interfaces.gp.Gp` to lazily start the interpreter, or initialize `sage.interfaces.gp.gp` to `None` and explicitly do `gp = Gp()` everywhere it is used unless `gp != None`?",
    "created_at": "2010-09-21T14:50:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90501",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:2" align="right">comment:2</div>

So how do we manage this?

Rewrite the class `sage.interfaces.gp.Gp` to lazily start the interpreter, or initialize `sage.interfaces.gp.gp` to `None` and explicitly do `gp = Gp()` everywhere it is used unless `gp != None`?



---

archive/issue_comments_090502.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI believe this in `Gp.__init__` is the culprit:\n\n```\n# gp starts up with this set to 1, which makes pexpect hang: \nself.set_default('breakloop',0)\n```\n\nIf this is the case, an easy solution is to add a patch to the pari spkg to set breakloop to 0 by default.",
    "created_at": "2010-09-21T20:05:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90502",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:3" align="right">comment:3</div>

I believe this in `Gp.__init__` is the culprit:

```
# gp starts up with this set to 1, which makes pexpect hang: 
self.set_default('breakloop',0)
```

If this is the case, an easy solution is to add a patch to the pari spkg to set breakloop to 0 by default.



---

archive/issue_comments_090503.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nReplying to [@nexttime](#comment:1):\n> Oh, I thought you just meant \"GP/PARI\" should read \"PARI/GP\"...\n\nThis should also be changed.",
    "created_at": "2010-09-21T20:06:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90503",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:4" align="right">comment:4</div>

Replying to [@nexttime](#comment:1):
> Oh, I thought you just meant "GP/PARI" should read "PARI/GP"...

This should also be changed.



---

archive/issue_comments_090504.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@jdemeyer](#comment:3):\n> I believe this in `Gp.__init__` is the culprit:\n\n\n```\n# gp starts up with this set to 1, which makes pexpect hang: \nself.set_default('breakloop',0)\n```\n\nGood catch. I read this a dozen times without noticing that this actually calls `gp`... 8/\n\n> If this is the case, an easy solution is to add a patch to the pari spkg to set breakloop to 0 by default.\n\nTry it...",
    "created_at": "2010-09-21T20:21:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90504",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@jdemeyer](#comment:3):
> I believe this in `Gp.__init__` is the culprit:


```
# gp starts up with this set to 1, which makes pexpect hang: 
self.set_default('breakloop',0)
```

Good catch. I read this a dozen times without noticing that this actually calls `gp`... 8/

> If this is the case, an easy solution is to add a patch to the pari spkg to set breakloop to 0 by default.

Try it...



---

archive/issue_comments_090505.json:
```json
{
    "body": "Attachment: **[9959_rename_pari_gp.patch.gz](https://github.com/sagemath/sage/files/ticket9959/9959_rename_pari_gp.patch.gz)**\n\nRenames \"GP/PARI\" to \"PARI/GP\"",
    "created_at": "2010-09-21T21:27:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90505",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[9959_rename_pari_gp.patch.gz](https://github.com/sagemath/sage/files/ticket9959/9959_rename_pari_gp.patch.gz)**

Renames "GP/PARI" to "PARI/GP"



---

archive/issue_comments_090506.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nNew spkg for testing: [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p8.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p8.spkg)",
    "created_at": "2010-09-21T21:51:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90506",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:6" align="right">comment:6</div>

New spkg for testing: [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p8.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p8.spkg)



---

archive/issue_events_128359.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-09-21T22:15:28Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "title_is": "Get PARI/GP to stop starting automatically",
    "title_was": "Get Pari to stop starting automatically",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9959#event-128359"
}
```



---

archive/issue_events_128360.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-09-21T22:15:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9959#event-128360"
}
```



---

archive/issue_comments_090507.json:
```json
{
    "body": "Author: **Jeroen Demeyer**",
    "created_at": "2010-09-21T22:15:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90507",
    "user": "https://github.com/jdemeyer"
}
```

Author: **Jeroen Demeyer**



---

archive/issue_comments_090508.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,6 +5,6 @@\n Exiting spawned GP/PARI interpreter process. \n ```\n It's not exactly a bug, but it's also annoying and potentially \n-confusing to a non-Pari user.  We should stop it.\n+confusing.  We should stop it.\n \n-This is with 4.6.alpha1.  \n+Apply all **3 patches** below and the **new spkg**: [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p8.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p8.spkg)\n``````\n",
    "created_at": "2010-09-21T22:15:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90508",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,6 +5,6 @@
 Exiting spawned GP/PARI interpreter process. 
 ```
 It's not exactly a bug, but it's also annoying and potentially 
-confusing to a non-Pari user.  We should stop it.
+confusing.  We should stop it.
 
-This is with 4.6.alpha1.  
+Apply all **3 patches** below and the **new spkg**: [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p8.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p8.spkg)
``````




---

archive/issue_events_128361.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-09-21T22:15:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9959#event-128361"
}
```



---

archive/issue_events_128362.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-09-21T22:15:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9959#event-128362"
}
```



---

archive/issue_comments_090509.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nWow, *a lot* of places where \"GP/PARI\" had to be changed... (well done)\n\nWe have two similar instances in the scripts repo:\n\n```\nlocal/bin/sage-sage:    echo \"  -gp <..>      -- run Sage's GP (Pari) with given arguments\"\nlocal/bin/sage-sage.py:                     help=\"run Sage's GP (Pari), passing it all remaining arguments\")\n```\nBut I think we don't need to change these on this ticket.\n\nPatches look fine, will test them later (with the new spkg of course).",
    "created_at": "2010-09-21T22:50:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90509",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:8" align="right">comment:8</div>

Wow, *a lot* of places where "GP/PARI" had to be changed... (well done)

We have two similar instances in the scripts repo:

```
local/bin/sage-sage:    echo "  -gp <..>      -- run Sage's GP (Pari) with given arguments"
local/bin/sage-sage.py:                     help="run Sage's GP (Pari), passing it all remaining arguments")
```
But I think we don't need to change these on this ticket.

Patches look fine, will test them later (with the new spkg of course).



---

archive/issue_comments_090510.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThe spkg's changelog entry (and `patches/README.txt`) could describe the reason for patching `default.c` a bit more. (The ticket number is only in the commit message.)",
    "created_at": "2010-09-22T17:28:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90510",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:9" align="right">comment:9</div>

The spkg's changelog entry (and `patches/README.txt`) could describe the reason for patching `default.c` a bit more. (The ticket number is only in the commit message.)



---

archive/issue_comments_090511.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\ns|and|and/or|",
    "created_at": "2010-09-22T17:30:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90511",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:10" align="right">comment:10</div>

s|and|and/or|



---

archive/issue_comments_090512.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nOK, so I was the one who put in those two breakloop calls, which I only did since otherwise things did not work properly -- but in the testing I just did I found it only necessary to delete the brealoop call in `__init__`, while keeping the one in `_start`.  Are you both sure that it is safe to delete the one in `_start` as well?  Does that not cause gp to enter the breakloop on encountering an error, which is not what you want?\n\nIf you are right (and I assumed that you did test this!) then I am wondering what else has changed, since when we started the pari upgrade it was definitely necessary to deal with this.\n\nAnd by the way, the *only* reason I created a `_start` function for Gp different from the default one in PExpect was to add this line in `_start`;  so if that line is not needed, you can probably delete the while `_start` function for class Gp.",
    "created_at": "2010-09-22T20:47:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90512",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:11" align="right">comment:11</div>

OK, so I was the one who put in those two breakloop calls, which I only did since otherwise things did not work properly -- but in the testing I just did I found it only necessary to delete the brealoop call in `__init__`, while keeping the one in `_start`.  Are you both sure that it is safe to delete the one in `_start` as well?  Does that not cause gp to enter the breakloop on encountering an error, which is not what you want?

If you are right (and I assumed that you did test this!) then I am wondering what else has changed, since when we started the pari upgrade it was definitely necessary to deal with this.

And by the way, the *only* reason I created a `_start` function for Gp different from the default one in PExpect was to add this line in `_start`;  so if that line is not needed, you can probably delete the while `_start` function for class Gp.



---

archive/issue_comments_090513.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI haven't come to testing yet... (including a closer look at the relevant PARI sources).\n\nIt should at least not hurt to keep the second `set_default('breakloop',0)` in `Gp._start()`.",
    "created_at": "2010-09-22T21:24:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90513",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:12" align="right">comment:12</div>

I haven't come to testing yet... (including a closer look at the relevant PARI sources).

It should at least not hurt to keep the second `set_default('breakloop',0)` in `Gp._start()`.



---

archive/issue_comments_090514.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@nexttime](#comment:12):\n> It should at least not hurt to keep the second `set_default('breakloop',0)` in `Gp._start()`.\n\nAs far as I can see, we don't need it there, since `gp` will of course (re)start with the hard-coded defaults whenever `_start()` is called.\n\n(This is different to setting it \"manually\" from the Expect interface each time `gp` is [re]started.) \n\nSo we can IMHO drop `Gp._start()` completely, as John noted.",
    "created_at": "2010-09-22T22:20:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90514",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@nexttime](#comment:12):
> It should at least not hurt to keep the second `set_default('breakloop',0)` in `Gp._start()`.

As far as I can see, we don't need it there, since `gp` will of course (re)start with the hard-coded defaults whenever `_start()` is called.

(This is different to setting it "manually" from the Expect interface each time `gp` is [re]started.) 

So we can IMHO drop `Gp._start()` completely, as John noted.



---

archive/issue_comments_090515.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@JohnCremona](#comment:11):\n> Are you both sure that it is safe to delete the one in `_start` as well?  Does that not cause gp to enter the breakloop on encountering an error, which is not what you want?\n\nThe new spkg patches the `gp` source code to disable the breakloop by default, so we can remove all references to `breakloop` from Sage.  Note also that the patch [attachment: 9959_gp_error_doctest.patch](https://github.com/sagemath/sage/files/ticket9959/9959_gp_error_doctest.patch.gz) actually acts a doctest to check this.",
    "created_at": "2010-09-23T07:45:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90515",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@JohnCremona](#comment:11):
> Are you both sure that it is safe to delete the one in `_start` as well?  Does that not cause gp to enter the breakloop on encountering an error, which is not what you want?

The new spkg patches the `gp` source code to disable the breakloop by default, so we can remove all references to `breakloop` from Sage.  Note also that the patch [attachment: 9959_gp_error_doctest.patch](https://github.com/sagemath/sage/files/ticket9959/9959_gp_error_doctest.patch.gz) actually acts a doctest to check this.



---

archive/issue_comments_090516.json:
```json
{
    "body": "Don't set the 'breakloop' default in Sage",
    "created_at": "2010-09-23T07:47:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90516",
    "user": "https://github.com/jdemeyer"
}
```

Don't set the 'breakloop' default in Sage



---

archive/issue_comments_090517.json:
```json
{
    "body": "Attachment: **[9959_remove_breakloop.patch.gz](https://github.com/sagemath/sage/files/ticket9959/9959_remove_breakloop.patch.gz)**\n\nAttachment: **[9959_gp_error_doctest.patch.gz](https://github.com/sagemath/sage/files/ticket9959/9959_gp_error_doctest.patch.gz)**\n\nAdd doctest for error recovery",
    "created_at": "2010-09-23T07:47:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90517",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[9959_remove_breakloop.patch.gz](https://github.com/sagemath/sage/files/ticket9959/9959_remove_breakloop.patch.gz)**

Attachment: **[9959_gp_error_doctest.patch.gz](https://github.com/sagemath/sage/files/ticket9959/9959_gp_error_doctest.patch.gz)**

Add doctest for error recovery



---

archive/issue_comments_090518.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@JohnCremona](#comment:11):\n> And by the way, the *only* reason I created a `_start` function for Gp different from the default one in PExpect was to add this line in `_start`;  so if that line is not needed, you can probably delete the while `_start` function for class Gp.\n\nDone",
    "created_at": "2010-09-23T07:48:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90518",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@JohnCremona](#comment:11):
> And by the way, the *only* reason I created a `_start` function for Gp different from the default one in PExpect was to add this line in `_start`;  so if that line is not needed, you can probably delete the while `_start` function for class Gp.

Done



---

archive/issue_comments_090519.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nIt's a pity that we had to patch the gp source code -- clearly that was an option right from the start, and what I did was to avoid that.  Best (in my opinion) would be if gp had a command-line option to turn off the breakloop default, since Sage could easily use that.  It might be worth suggesting that possibility upstream.",
    "created_at": "2010-09-23T08:27:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90519",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:16" align="right">comment:16</div>

It's a pity that we had to patch the gp source code -- clearly that was an option right from the start, and what I did was to avoid that.  Best (in my opinion) would be if gp had a command-line option to turn off the breakloop default, since Sage could easily use that.  It might be worth suggesting that possibility upstream.



---

archive/issue_comments_090520.json:
```json
{
    "body": "Attachment: **[pari.p8.patch.gz](https://github.com/sagemath/sage/files/ticket9959/pari.p8.patch.gz)**\n\nPatch for the PARI spkg .p7 to .p8 (for review)",
    "created_at": "2010-09-23T08:31:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90520",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[pari.p8.patch.gz](https://github.com/sagemath/sage/files/ticket9959/pari.p8.patch.gz)**

Patch for the PARI spkg .p7 to .p8 (for review)



---

archive/issue_comments_090521.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@JohnCremona](#comment:16):\n> It's a pity that we had to patch the gp source code -- clearly that was an option right from the start, and what I did was to avoid that.  Best (in my opinion) would be if gp had a command-line option to turn off the breakloop default, since Sage could easily use that.  It might be worth suggesting that possibility upstream.\n\nIf one would add an option to `gp`, add an option for non-interactive (script) use which would also disable `breakloop` by default.  I remember I proposed this (a long time ago) to the PARI/GP developers without much success.",
    "created_at": "2010-09-23T08:49:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90521",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@JohnCremona](#comment:16):
> It's a pity that we had to patch the gp source code -- clearly that was an option right from the start, and what I did was to avoid that.  Best (in my opinion) would be if gp had a command-line option to turn off the breakloop default, since Sage could easily use that.  It might be worth suggesting that possibility upstream.

If one would add an option to `gp`, add an option for non-interactive (script) use which would also disable `breakloop` by default.  I remember I proposed this (a long time ago) to the PARI/GP developers without much success.



---

archive/issue_comments_090522.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@jdemeyer](#comment:17):\n> Replying to [@JohnCremona](#comment:16):\n> > It's a pity that we had to patch the gp source code -- clearly that was an option right from the start, and what I did was to avoid that.  Best (in my opinion) would be if gp had a command-line option to turn off the breakloop default, since Sage could easily use that.  It might be worth suggesting that possibility upstream.\n\n> \n> If one would add an option to `gp`, add an option for non-interactive (script) use which would also disable `breakloop` by default.  I remember I proposed this (a long time ago) to the PARI/GP developers without much success.\n\nI suppose that from their point of view it makes no sense to use gp non-interactively, since gp is the interactive interface to the pari library!",
    "created_at": "2010-09-23T08:58:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90522",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@jdemeyer](#comment:17):
> Replying to [@JohnCremona](#comment:16):
> > It's a pity that we had to patch the gp source code -- clearly that was an option right from the start, and what I did was to avoid that.  Best (in my opinion) would be if gp had a command-line option to turn off the breakloop default, since Sage could easily use that.  It might be worth suggesting that possibility upstream.

> 
> If one would add an option to `gp`, add an option for non-interactive (script) use which would also disable `breakloop` by default.  I remember I proposed this (a long time ago) to the PARI/GP developers without much success.

I suppose that from their point of view it makes no sense to use gp non-interactively, since gp is the interactive interface to the pari library!



---

archive/issue_comments_090523.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\n**Alternative solution**:\n\nWhen `gp` starts, it reads a configuration file (by default, `$HOME/.gprc`).  If the environment variable `$GPRC` is set, it uses that as a filename for the `.gprc` file.  We could create a file `$HOME/.sage/gp/gprc` similarly to `$HOME/.sage/ipyhton/ipythonrc` and have Sage set `$GPRC` to that location.\n\nThen, the file `$HOME/.sage/gp/gprc` should contain a line:\n\n```\nbreakloop =  0\n```",
    "created_at": "2010-09-23T09:01:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90523",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:19" align="right">comment:19</div>

**Alternative solution**:

When `gp` starts, it reads a configuration file (by default, `$HOME/.gprc`).  If the environment variable `$GPRC` is set, it uses that as a filename for the `.gprc` file.  We could create a file `$HOME/.sage/gp/gprc` similarly to `$HOME/.sage/ipyhton/ipythonrc` and have Sage set `$GPRC` to that location.

Then, the file `$HOME/.sage/gp/gprc` should contain a line:

```
breakloop =  0
```



---

archive/issue_comments_090524.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@JohnCremona](#comment:18):\n> I suppose that from their point of view it makes no sense to use gp non-interactively, since gp is the interactive interface to the pari library!\n\nGood point :-)",
    "created_at": "2010-09-23T09:01:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90524",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@JohnCremona](#comment:18):
> I suppose that from their point of view it makes no sense to use gp non-interactively, since gp is the interactive interface to the pari library!

Good point :-)



---

archive/issue_comments_090525.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@jdemeyer](#comment:19):\n> **Alternative solution**:\n> \n> When `gp` starts, it reads a configuration file (by default, `$HOME/.gprc`).  If the environment variable `$GPRC` is set, it uses that as a filename for the `.gprc` file.  We could create a file `$HOME/.sage/gp/gprc` similarly to `$HOME/.sage/ipyhton/ipythonrc` and have Sage set `$GPRC` to that location.\n> \n> Then, the file `$HOME/.sage/gp/gprc` should contain a line:\n\n\n```\nbreakloop =  0\n```\n\nI was just going to suggest that, too.\n\nNote that we should have two of them, one for the interactive `gp` provided by Sage, and one for the `pexpect` interface.",
    "created_at": "2010-09-23T09:07:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90525",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@jdemeyer](#comment:19):
> **Alternative solution**:
> 
> When `gp` starts, it reads a configuration file (by default, `$HOME/.gprc`).  If the environment variable `$GPRC` is set, it uses that as a filename for the `.gprc` file.  We could create a file `$HOME/.sage/gp/gprc` similarly to `$HOME/.sage/ipyhton/ipythonrc` and have Sage set `$GPRC` to that location.
> 
> Then, the file `$HOME/.sage/gp/gprc` should contain a line:


```
breakloop =  0
```

I was just going to suggest that, too.

Note that we should have two of them, one for the interactive `gp` provided by Sage, and one for the `pexpect` interface.



---

archive/issue_events_128363.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-09-23T09:11:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9959#event-128363"
}
```



---

archive/issue_events_128364.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-09-23T09:11:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9959#event-128364"
}
```



---

archive/issue_comments_090526.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@nexttime](#comment:21):\n> Note that we should have two of them, one for the interactive `gp` provided by Sage, and one for the `pexpect` interface.\n\nI think we need only one, for the pexpect interface.  I would prefer `sage -gp` to use my `$HOME/.gprc`.\n\nSetting this to needs_work to implement the alternative solution.",
    "created_at": "2010-09-23T09:11:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90526",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@nexttime](#comment:21):
> Note that we should have two of them, one for the interactive `gp` provided by Sage, and one for the `pexpect` interface.

I think we need only one, for the pexpect interface.  I would prefer `sage -gp` to use my `$HOME/.gprc`.

Setting this to needs_work to implement the alternative solution.



---

archive/issue_comments_090527.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@jdemeyer](#comment:17):\n> If one would add an option to `gp`, add an option for non-interactive (script) use which would also disable `breakloop` by default.  I remember I proposed this (a long time ago) to the PARI/GP developers without much success.\n\nPerhaps they meanwhile chnaged their minds.. ;-)\n\nThere's some stuff in it for using `gp` from Emacs or TeXmacs, but only as a *compile time* option IIRC. Also some kind of \"non-interactive\" `gp` use.",
    "created_at": "2010-09-23T09:12:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90527",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@jdemeyer](#comment:17):
> If one would add an option to `gp`, add an option for non-interactive (script) use which would also disable `breakloop` by default.  I remember I proposed this (a long time ago) to the PARI/GP developers without much success.

Perhaps they meanwhile chnaged their minds.. ;-)

There's some stuff in it for using `gp` from Emacs or TeXmacs, but only as a *compile time* option IIRC. Also some kind of "non-interactive" `gp` use.



---

archive/issue_comments_090528.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@jdemeyer](#comment:22):\n> Replying to [@nexttime](#comment:21):\n> > Note that we should have two of them, one for the interactive `gp` provided by Sage, and one for the `pexpect` interface.\n\n> \n> I think we need only one, for the pexpect interface.  I would prefer `sage -gp` to use my `$HOME/.gprc`.\n\nRight, but we should take care not to use the other one (i.e. by setting `GPRC` and therefore overriding `$HOME/.gprc`) if we start the interactive `gp`.",
    "created_at": "2010-09-23T09:18:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90528",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@jdemeyer](#comment:22):
> Replying to [@nexttime](#comment:21):
> > Note that we should have two of them, one for the interactive `gp` provided by Sage, and one for the `pexpect` interface.

> 
> I think we need only one, for the pexpect interface.  I would prefer `sage -gp` to use my `$HOME/.gprc`.

Right, but we should take care not to use the other one (i.e. by setting `GPRC` and therefore overriding `$HOME/.gprc`) if we start the interactive `gp`.



---

archive/issue_comments_090529.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nAnybody happens to know where is the code to deal with `$DOT_SAGE`, to populate it with files?",
    "created_at": "2010-09-23T10:36:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90529",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:25" align="right">comment:25</div>

Anybody happens to know where is the code to deal with `$DOT_SAGE`, to populate it with files?



---

archive/issue_comments_090530.json:
```json
{
    "body": "Use $SAGE_ROOT/local/etc/gprc.expect as .gprc file",
    "created_at": "2010-09-24T13:57:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90530",
    "user": "https://github.com/jdemeyer"
}
```

Use $SAGE_ROOT/local/etc/gprc.expect as .gprc file



---

archive/issue_comments_090531.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nAttachment: **[9959_gprc.patch.gz](https://github.com/sagemath/sage/files/ticket9959/9959_gprc.patch.gz)**\n\nNew spkg: [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p9.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p9.spkg).  This is based on **p7** (not p8) and adds the `gprc.expect` file.  So installing the new spkg and applying all 4 patches should do it.",
    "created_at": "2010-09-24T14:40:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90531",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:26" align="right">comment:26</div>

Attachment: **[9959_gprc.patch.gz](https://github.com/sagemath/sage/files/ticket9959/9959_gprc.patch.gz)**

New spkg: [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p9.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p9.spkg).  This is based on **p7** (not p8) and adds the `gprc.expect` file.  So installing the new spkg and applying all 4 patches should do it.



---

archive/issue_comments_090532.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,4 +7,4 @@\n It's not exactly a bug, but it's also annoying and potentially \n confusing.  We should stop it.\n \n-Apply all **3 patches** below and the **new spkg**: [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p8.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p8.spkg)\n+Apply all **4 patches** below and install the **new spkg**: [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p9.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p9.spkg) (note that this spkg is *not* based on the earlier p8)\n``````\n",
    "created_at": "2010-09-24T14:40:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90532",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,4 +7,4 @@
 It's not exactly a bug, but it's also annoying and potentially 
 confusing.  We should stop it.
 
-Apply all **3 patches** below and the **new spkg**: [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p8.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p8.spkg)
+Apply all **4 patches** below and install the **new spkg**: [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p9.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p9.spkg) (note that this spkg is *not* based on the earlier p8)
``````




---

archive/issue_events_128365.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2010-09-24T14:44:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9959#event-128365"
}
```



---

archive/issue_events_128366.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2010-09-24T14:44:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9959#event-128366"
}
```



---

archive/issue_events_128367.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-09-24T14:46:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9959#event-128367"
}
```



---

archive/issue_events_128368.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-09-24T14:46:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9959#event-128368"
}
```



---

archive/issue_comments_090533.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nDoesn't work yet, stupid mistake.",
    "created_at": "2010-09-24T14:46:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90533",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:28" align="right">comment:28</div>

Doesn't work yet, stupid mistake.



---

archive/issue_comments_090534.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\n`sage.math.washington.edu` seems much slower than usual today...",
    "created_at": "2010-09-24T14:47:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90534",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:29" align="right">comment:29</div>

`sage.math.washington.edu` seems much slower than usual today...



---

archive/issue_comments_090535.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nDoes `gp` expand `$SAGE_ROOT` in the `gprc.expect` file, or does Sage do that before it starts `gp`?",
    "created_at": "2010-09-24T14:52:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90535",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:30" align="right">comment:30</div>

Does `gp` expand `$SAGE_ROOT` in the `gprc.expect` file, or does Sage do that before it starts `gp`?



---

archive/issue_comments_090536.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nReplying to [@nexttime](#comment:30):\n> Does `gp` expand `$SAGE_ROOT` in the `gprc.expect` file, or does Sage do that before it starts `gp`?\n\n`gp` does that.",
    "created_at": "2010-09-24T14:57:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90536",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:31" align="right">comment:31</div>

Replying to [@nexttime](#comment:30):
> Does `gp` expand `$SAGE_ROOT` in the `gprc.expect` file, or does Sage do that before it starts `gp`?

`gp` does that.



---

archive/issue_comments_090537.json:
```json
{
    "body": ".gprc file for the Gp() interface",
    "created_at": "2010-09-24T15:43:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90537",
    "user": "https://github.com/jdemeyer"
}
```

.gprc file for the Gp() interface



---

archive/issue_comments_090538.json:
```json
{
    "body": "Attachment: **[gprc.expect.gz](https://github.com/sagemath/sage/files/ticket9959/gprc.expect.gz)**\n\nAttachment: **[pari.p9.patch.gz](https://github.com/sagemath/sage/files/ticket9959/pari.p9.patch.gz)**\n\nPatch for the PARI spkg .p7 to .p9 (for review)",
    "created_at": "2010-09-24T17:07:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90538",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[gprc.expect.gz](https://github.com/sagemath/sage/files/ticket9959/gprc.expect.gz)**

Attachment: **[pari.p9.patch.gz](https://github.com/sagemath/sage/files/ticket9959/pari.p9.patch.gz)**

Patch for the PARI spkg .p7 to .p9 (for review)



---

archive/issue_comments_090539.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nFixed spkg: [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p9.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p9.spkg)",
    "created_at": "2010-09-24T17:09:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90539",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:32" align="right">comment:32</div>

Fixed spkg: [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p9.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p9.spkg)



---

archive/issue_events_128369.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-09-24T17:09:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9959#event-128369"
}
```



---

archive/issue_events_128370.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-09-24T17:09:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9959#event-128370"
}
```



---

archive/issue_comments_090540.json:
```json
{
    "body": "Attachment: **[9959_combined.patch.gz](https://github.com/sagemath/sage/files/ticket9959/9959_combined.patch.gz)**\n\nAll 4 sagelib patches combined",
    "created_at": "2010-09-26T17:35:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90540",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[9959_combined.patch.gz](https://github.com/sagemath/sage/files/ticket9959/9959_combined.patch.gz)**

All 4 sagelib patches combined



---

archive/issue_comments_090541.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,4 +7,4 @@\n It's not exactly a bug, but it's also annoying and potentially \n confusing.  We should stop it.\n \n-Apply all **4 patches** below and install the **new spkg**: [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p9.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p9.spkg) (note that this spkg is *not* based on the earlier p8)\n+Apply **9959_combined.patch** below and install the **new spkg**: [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p9.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p9.spkg) (note that this spkg is *not* based on the earlier p8)\n``````\n",
    "created_at": "2010-09-26T17:38:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90541",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,4 +7,4 @@
 It's not exactly a bug, but it's also annoying and potentially 
 confusing.  We should stop it.
 
-Apply all **4 patches** below and install the **new spkg**: [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p9.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p9.spkg) (note that this spkg is *not* based on the earlier p8)
+Apply **9959_combined.patch** below and install the **new spkg**: [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p9.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p9.spkg) (note that this spkg is *not* based on the earlier p8)
``````




---

archive/issue_events_128371.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2010-10-09T14:47:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9959#event-128371"
}
```



---

archive/issue_events_128372.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2010-10-09T14:47:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20blocker%20/%201",
    "label_color": "ff0000",
    "label_name": "p: blocker / 1",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9959#event-128372"
}
```



---

archive/issue_comments_090542.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nThe sagelib patch looks good to me.\n\nFor review, please could you give instructions for the simple-minded as to how to apply the patch which converts .p7 to .p9?  And then how to rebuild?  Thanks.\n\nOf course, someone else who knows how to do this reliably is welcome to get in first with a review.",
    "created_at": "2010-10-09T17:35:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90542",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:35" align="right">comment:35</div>

The sagelib patch looks good to me.

For review, please could you give instructions for the simple-minded as to how to apply the patch which converts .p7 to .p9?  And then how to rebuild?  Thanks.

Of course, someone else who knows how to do this reliably is welcome to get in first with a review.



---

archive/issue_comments_090543.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nReplying to [@JohnCremona](#comment:35):\n> The sagelib patch looks good to me.\n> \n> For review, please could you give instructions for the simple-minded as to how to apply the patch which converts .p7 to .p9?\n\nWell, the easiest is to install the new spkg:\n\n```\nsage -i http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p9.spkg\n```\n\n> And then how to rebuild?\n\nI personally do not know the most reliable way to rebuild a complete Sage installation.  One thing which works for sure is the following:\n* download sage-4.6.alpha3.tar and extract it so we have a clean, uncompiled sage-4.6.alpha3.\n* rm spkg/standard/pari-*.spkg\n* download [ttp://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p9.spkg] and and put it in spkg/standard\n* now `make` Sage as usual",
    "created_at": "2010-10-09T18:39:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90543",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:36" align="right">comment:36</div>

Replying to [@JohnCremona](#comment:35):
> The sagelib patch looks good to me.
> 
> For review, please could you give instructions for the simple-minded as to how to apply the patch which converts .p7 to .p9?

Well, the easiest is to install the new spkg:

```
sage -i http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p9.spkg
```

> And then how to rebuild?

I personally do not know the most reliable way to rebuild a complete Sage installation.  One thing which works for sure is the following:
* download sage-4.6.alpha3.tar and extract it so we have a clean, uncompiled sage-4.6.alpha3.
* rm spkg/standard/pari-*.spkg
* download [ttp://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p9.spkg] and and put it in spkg/standard
* now `make` Sage as usual



---

archive/issue_comments_090544.json:
```json
{
    "body": "Reviewer: **John Cremona**",
    "created_at": "2010-10-09T18:39:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90544",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **John Cremona**



---

archive/issue_comments_090545.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nTHanks -- I am doing that, will do a complete new build (with the sagelib patch too of course) and report back.",
    "created_at": "2010-10-09T19:12:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90545",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:37" align="right">comment:37</div>

THanks -- I am doing that, will do a complete new build (with the sagelib patch too of course) and report back.



---

archive/issue_events_128373.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2010-10-09T20:15:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9959#event-128373"
}
```



---

archive/issue_events_128374.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2010-10-09T20:15:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9959#event-128374"
}
```



---

archive/issue_comments_090546.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nI made a freshly unpacked 4.6.alpha3, and replaced its pari spkg with the p9 version;  then built all Sage;  then applied the sagelib patch on this ticket;  then tested the whole library.\n\nAll passed, so here's a positive review.",
    "created_at": "2010-10-09T20:15:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90546",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:38" align="right">comment:38</div>

I made a freshly unpacked 4.6.alpha3, and replaced its pari spkg with the p9 version;  then built all Sage;  then applied the sagelib patch on this ticket;  then tested the whole library.

All passed, so here's a positive review.



---

archive/issue_comments_090547.json:
```json
{
    "body": "Merged: **sage-4.6.rc0**",
    "created_at": "2010-10-21T08:18:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9959#issuecomment-90547",
    "user": "https://github.com/qed777"
}
```

Merged: **sage-4.6.rc0**



---

archive/issue_events_128375.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2010-10-21T08:18:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9959#event-128375"
}
```



---

archive/issue_events_128376.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2010-10-21T08:18:58Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/9959",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9959#event-128376"
}
```
