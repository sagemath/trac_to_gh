# Issue 9907: Move generally usable decorators to misc.decorators

archive/issues_009906.json:
```json
{
    "assignees": [
        "https://github.com/johanrosenkilde"
    ],
    "body": "The decorators in sage.misc.misc should be moved to sage.misc.decorators.\n\nIn plot.misc there are also some generally usable decorators for various nice stuff. These should be moved to a general library so other modules can use them without illogically depending on plot. Simultaneously, they should be patched to use sage_wraps instead of the Python \"wraps\" to accommodate for Sage-specific things; e.g. the fix of Trac #9917.\n\nCC:  @jasongrout @mwhansen\n\nKeywords: **generality, decorators**\n\nComponent: **relocation**\n\nAuthor: **Johan Sebastian Rosenkilde Nielsen**\n\nReviewer: **Robert Miller**\n\nMerged: **sage-4.6.1.alpha2**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/9907_\n\n",
    "closed_at": "2010-11-16T08:20:15Z",
    "created_at": "2010-09-14T06:28:56Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20relocation",
        "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.6.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Move generally usable decorators to misc.decorators",
    "type": "issue",
    "updated_at": "2010-11-16T08:20:15Z",
    "url": "https://github.com/sagemath/sage/issues/9907",
    "user": "https://github.com/johanrosenkilde"
}
```
The decorators in sage.misc.misc should be moved to sage.misc.decorators.

In plot.misc there are also some generally usable decorators for various nice stuff. These should be moved to a general library so other modules can use them without illogically depending on plot. Simultaneously, they should be patched to use sage_wraps instead of the Python "wraps" to accommodate for Sage-specific things; e.g. the fix of Trac #9917.

CC:  @jasongrout @mwhansen

Keywords: **generality, decorators**

Component: **relocation**

Author: **Johan Sebastian Rosenkilde Nielsen**

Reviewer: **Robert Miller**

Merged: **sage-4.6.1.alpha2**

_Issue created by migration from https://trac.sagemath.org/ticket/9907_





---

archive/issue_events_128800.json:
```json
{
    "actor": "https://github.com/johanrosenkilde",
    "created_at": "2010-09-14T06:28:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9907",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20relocation",
    "label_color": "000080",
    "label_name": "c: relocation",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9907#event-128800"
}
```



---

archive/issue_events_128801.json:
```json
{
    "actor": "https://github.com/johanrosenkilde",
    "created_at": "2010-09-14T06:28:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9907",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9907#event-128801"
}
```



---

archive/issue_events_128802.json:
```json
{
    "actor": "https://github.com/johanrosenkilde",
    "created_at": "2010-09-14T06:28:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9907",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9907#event-128802"
}
```



---

archive/issue_events_128803.json:
```json
{
    "actor": "https://github.com/johanrosenkilde",
    "created_at": "2010-09-14T18:48:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9907",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9907#event-128803"
}
```



---

archive/issue_comments_089401.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nWhile trying to use this patch in Trac #6094, I found out that the `@`wraps decorator used internally in all three decorators moved to sage.misc only works for functions in Python versions older than 3.2. It was fixed as Python bug issue 3445. Until Sage upgrades to such a new version of Python, I have written a small work-around, which essentially emulates the patched behaviour of wraps. This is in the newest patch.",
    "created_at": "2010-09-15T13:12:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9907#issuecomment-89401",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:2" align="right">comment:2</div>

While trying to use this patch in Trac #6094, I found out that the `@`wraps decorator used internally in all three decorators moved to sage.misc only works for functions in Python versions older than 3.2. It was fixed as Python bug issue 3445. Until Sage upgrades to such a new version of Python, I have written a small work-around, which essentially emulates the patched behaviour of wraps. This is in the newest patch.



---

archive/issue_comments_089402.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI'm not qualified to check out the \"work-around\" for classes.  But I've cc'ed Mike Hansen and Jason Grout, who I think were in on these in the first place back at #4201.\n\nI am running this through full tests as part of #6094 and a report will go there once concluded.\n\nCommit message on the ticket itself should probably change - there is no \"as before\" here to compare with, and in the final log it really won't make any sense.",
    "created_at": "2010-09-16T04:46:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9907#issuecomment-89402",
    "user": "https://github.com/rbeezer"
}
```

<div id="comment:3" align="right">comment:3</div>

I'm not qualified to check out the "work-around" for classes.  But I've cc'ed Mike Hansen and Jason Grout, who I think were in on these in the first place back at #4201.

I am running this through full tests as part of #6094 and a report will go there once concluded.

Commit message on the ticket itself should probably change - there is no "as before" here to compare with, and in the final log it really won't make any sense.



---

archive/issue_comments_089403.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nReplying to [@johanrosenkilde](#comment:2):\n> While trying to use this patch in Trac #6094, I found out that the `@`wraps decorator used internally in all three decorators moved to sage.misc only works for functions in Python versions older than 3.2. It was fixed as Python bug issue 3445. Until Sage upgrades to such a new version of Python, I have written a small work-around, which essentially emulates the patched behaviour of wraps. This is in the newest patch.\n\nDo you think you could just add the work-around to the sage_wraps decorator (sage.misc.misc.sage_wraps) and convert the decorators to use it?  There are other functions that use sage_wraps, and it would be nice to have all of that work-around code in one place.",
    "created_at": "2010-09-16T09:11:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9907#issuecomment-89403",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:4" align="right">comment:4</div>

Replying to [@johanrosenkilde](#comment:2):
> While trying to use this patch in Trac #6094, I found out that the `@`wraps decorator used internally in all three decorators moved to sage.misc only works for functions in Python versions older than 3.2. It was fixed as Python bug issue 3445. Until Sage upgrades to such a new version of Python, I have written a small work-around, which essentially emulates the patched behaviour of wraps. This is in the newest patch.

Do you think you could just add the work-around to the sage_wraps decorator (sage.misc.misc.sage_wraps) and convert the decorators to use it?  There are other functions that use sage_wraps, and it would be nice to have all of that work-around code in one place.



---

archive/issue_comments_089404.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@jasongrout](#comment:4):\n> Replying to [@johanrosenkilde](#comment:2):\n> > While trying to use this patch in Trac #6094, I found out that the `@`wraps decorator used internally in all three decorators moved to sage.misc only works for functions in Python versions older than 3.2. It was fixed as Python bug issue 3445. Until Sage upgrades to such a new version of Python, I have written a small work-around, which essentially emulates the patched behaviour of wraps. This is in the newest patch.\n\n> \n> Do you think you could just add the work-around to the sage_wraps decorator (sage.misc.misc.sage_wraps) and convert the decorators to use it?  There are other functions that use sage_wraps, and it would be nice to have all of that work-around code in one place.\n\nThat should be no problem, I guess; I wasn't aware of sage_wraps. However, that might affect a lot of places outside the original scope of this ticket; should it be a new ticket then? What's the precedence here?",
    "created_at": "2010-09-16T11:28:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9907#issuecomment-89404",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@jasongrout](#comment:4):
> Replying to [@johanrosenkilde](#comment:2):
> > While trying to use this patch in Trac #6094, I found out that the `@`wraps decorator used internally in all three decorators moved to sage.misc only works for functions in Python versions older than 3.2. It was fixed as Python bug issue 3445. Until Sage upgrades to such a new version of Python, I have written a small work-around, which essentially emulates the patched behaviour of wraps. This is in the newest patch.

> 
> Do you think you could just add the work-around to the sage_wraps decorator (sage.misc.misc.sage_wraps) and convert the decorators to use it?  There are other functions that use sage_wraps, and it would be nice to have all of that work-around code in one place.

That should be no problem, I guess; I wasn't aware of sage_wraps. However, that might affect a lot of places outside the original scope of this ticket; should it be a new ticket then? What's the precedence here?



---

archive/issue_comments_089405.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@johanrosenkilde](#comment:5):\n> Replying to [@jasongrout](#comment:4):\n> > Replying to [@johanrosenkilde](#comment:2):\n> > > While trying to use this patch in Trac #6094, I found out that the `@`wraps decorator used internally in all three decorators moved to sage.misc only works for functions in Python versions older than 3.2. It was fixed as Python bug issue 3445. Until Sage upgrades to such a new version of Python, I have written a small work-around, which essentially emulates the patched behaviour of wraps. This is in the newest patch.\n\n> > \n> > Do you think you could just add the work-around to the sage_wraps decorator (sage.misc.misc.sage_wraps) and convert the decorators to use it?  There are other functions that use sage_wraps, and it would be nice to have all of that work-around code in one place.\n\n> \n> That should be no problem, I guess; I wasn't aware of sage_wraps. However, that might affect a lot of places outside the original scope of this ticket; should it be a new ticket then? What's the precedence here?\n\nI started Trac #9919 for doing this patch in sage_wraps. I'm also thinking that, when the problems with this patch are identified, we might move sage_wraps and other decorators in sage.misc.misc into sage.misc.decorators as well.",
    "created_at": "2010-09-16T14:28:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9907#issuecomment-89405",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@johanrosenkilde](#comment:5):
> Replying to [@jasongrout](#comment:4):
> > Replying to [@johanrosenkilde](#comment:2):
> > > While trying to use this patch in Trac #6094, I found out that the `@`wraps decorator used internally in all three decorators moved to sage.misc only works for functions in Python versions older than 3.2. It was fixed as Python bug issue 3445. Until Sage upgrades to such a new version of Python, I have written a small work-around, which essentially emulates the patched behaviour of wraps. This is in the newest patch.

> > 
> > Do you think you could just add the work-around to the sage_wraps decorator (sage.misc.misc.sage_wraps) and convert the decorators to use it?  There are other functions that use sage_wraps, and it would be nice to have all of that work-around code in one place.

> 
> That should be no problem, I guess; I wasn't aware of sage_wraps. However, that might affect a lot of places outside the original scope of this ticket; should it be a new ticket then? What's the precedence here?

I started Trac #9919 for doing this patch in sage_wraps. I'm also thinking that, when the problems with this patch are identified, we might move sage_wraps and other decorators in sage.misc.misc into sage.misc.decorators as well.



---

archive/issue_comments_089406.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nStarting another ticket sounds good.",
    "created_at": "2010-09-16T15:54:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9907#issuecomment-89406",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:7" align="right">comment:7</div>

Starting another ticket sounds good.



---

archive/issue_events_128804.json:
```json
{
    "actor": "https://github.com/johanrosenkilde",
    "created_at": "2010-09-17T08:19:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9907",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9907#event-128804"
}
```



---

archive/issue_events_128805.json:
```json
{
    "actor": "https://github.com/johanrosenkilde",
    "created_at": "2010-09-17T08:19:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9907",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9907#event-128805"
}
```



---

archive/issue_comments_089407.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nRob Beezer posted the following problem with the current patch for Trac #6094, but that is actually a problem with the current patch for this trac. When testing the unpickle-function in sage.structure.sage_object, the relocation of the decorators yield problems:\n\n```\nrob@wave:/sage/dev$ ./sage -t  devel/sage/sage/structure/sage_object.pyx\nsage -t  \"devel/sage/sage/structure/sage_object.pyx\"        \n**********************************************************************\nFile \"/sage/dev/devel/sage/sage/structure/sage_object.pyx\", line 1001:\n    sage: print \"x\"; sage.structure.sage_object.unpickle_all(std)\nExpected:\n    x...\n    Successfully unpickled ... objects.\n    Failed to unpickle 0 objects.\nGot:\n    x\n    doctest:1: DeprecationWarning: Your word object is saved in an old file format since FiniteWord_over_OrderedAlphabet is deprecated and will be deleted in a future version of Sage (you can use FiniteWord_list instead). You can re-save your word by typing \"word.save(filename)\" to ensure that it will load in future versions of Sage.\n    doctest:1: DeprecationWarning: Your word object is saved in an old file format since AbstractWord is deprecated and will be deleted in a future version of Sage (you can use FiniteWord_list instead). You can re-save your word by typing \"word.save(filename)\" to ensure that it will load in future versions of Sage.\n    doctest:1: DeprecationWarning: Your word object is saved in an old file format since Word_over_Alphabet is deprecated and will be deleted in a future version of Sage (you can use FiniteWord_list instead). You can re-save your word by typing \"word.save(filename)\" to ensure that it will load in future versions of Sage.\n    doctest:1: DeprecationWarning: Your word object is saved in an old file format since Word_over_OrderedAlphabet is deprecated and will be deleted in a future version of Sage (you can use FiniteWord_list instead). You can re-save your word by typing \"word.save(filename)\" to ensure that it will load in future versions of Sage.\n    doctest:1: DeprecationWarning: ChristoffelWord_Lower is deprecated, use LowerChristoffelWord instead\n    ** failed:  _class__sage_plot_misc_options__.sobj\n    ** failed:  _class__sage_plot_misc_rename_keyword__.sobj\n    Failed:\n    _class__sage_plot_misc_options__.sobj\n    _class__sage_plot_misc_rename_keyword__.sobj\n    Successfully unpickled 584 objects.\n    Failed to unpickle 2 objects.\n**********************************************************************\n1 items had failures:\n   1 of   7 in __main__.example_23\n***Test Failed*** 1 failures.\nFor whitespace errors, see the file /home/rob/.sage//tmp/.doctest_sage_object.py\n         [5.2 s]\n \n----------------------------------------------------------------------\nThe following tests failed:\n\n\n        sage -t  \"devel/sage/sage/structure/sage_object.pyx\"\n```\n\nThe deprecation-warnings are just garbage from words.py, so the important thing to note is the \"** failed\"-lines. The problem, as far as I can see, is simply that there is a standard pickle jar which has a pickle for all the functions etc. shipped with sage. This needs to be updated when applying this patch. Does anyone know how this is done and possibly included in the patch?\n\nCheers, Johan",
    "created_at": "2010-09-17T08:19:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9907#issuecomment-89407",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:8" align="right">comment:8</div>

Rob Beezer posted the following problem with the current patch for Trac #6094, but that is actually a problem with the current patch for this trac. When testing the unpickle-function in sage.structure.sage_object, the relocation of the decorators yield problems:

```
rob@wave:/sage/dev$ ./sage -t  devel/sage/sage/structure/sage_object.pyx
sage -t  "devel/sage/sage/structure/sage_object.pyx"        
**********************************************************************
File "/sage/dev/devel/sage/sage/structure/sage_object.pyx", line 1001:
    sage: print "x"; sage.structure.sage_object.unpickle_all(std)
Expected:
    x...
    Successfully unpickled ... objects.
    Failed to unpickle 0 objects.
Got:
    x
    doctest:1: DeprecationWarning: Your word object is saved in an old file format since FiniteWord_over_OrderedAlphabet is deprecated and will be deleted in a future version of Sage (you can use FiniteWord_list instead). You can re-save your word by typing "word.save(filename)" to ensure that it will load in future versions of Sage.
    doctest:1: DeprecationWarning: Your word object is saved in an old file format since AbstractWord is deprecated and will be deleted in a future version of Sage (you can use FiniteWord_list instead). You can re-save your word by typing "word.save(filename)" to ensure that it will load in future versions of Sage.
    doctest:1: DeprecationWarning: Your word object is saved in an old file format since Word_over_Alphabet is deprecated and will be deleted in a future version of Sage (you can use FiniteWord_list instead). You can re-save your word by typing "word.save(filename)" to ensure that it will load in future versions of Sage.
    doctest:1: DeprecationWarning: Your word object is saved in an old file format since Word_over_OrderedAlphabet is deprecated and will be deleted in a future version of Sage (you can use FiniteWord_list instead). You can re-save your word by typing "word.save(filename)" to ensure that it will load in future versions of Sage.
    doctest:1: DeprecationWarning: ChristoffelWord_Lower is deprecated, use LowerChristoffelWord instead
    ** failed:  _class__sage_plot_misc_options__.sobj
    ** failed:  _class__sage_plot_misc_rename_keyword__.sobj
    Failed:
    _class__sage_plot_misc_options__.sobj
    _class__sage_plot_misc_rename_keyword__.sobj
    Successfully unpickled 584 objects.
    Failed to unpickle 2 objects.
**********************************************************************
1 items had failures:
   1 of   7 in __main__.example_23
***Test Failed*** 1 failures.
For whitespace errors, see the file /home/rob/.sage//tmp/.doctest_sage_object.py
         [5.2 s]
 
----------------------------------------------------------------------
The following tests failed:


        sage -t  "devel/sage/sage/structure/sage_object.pyx"
```

The deprecation-warnings are just garbage from words.py, so the important thing to note is the "** failed"-lines. The problem, as far as I can see, is simply that there is a standard pickle jar which has a pickle for all the functions etc. shipped with sage. This needs to be updated when applying this patch. Does anyone know how this is done and possibly included in the patch?

Cheers, Johan



---

archive/issue_comments_089408.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThe pickle jar contains old pickles of objects that we want to ensure work in the future. For example, if you made the changes at\u00a0[9907](https://github.com/sagemath/sage/issues/9907)\u00a0as the are, then possibly many pickles out in the wild would break. Instead of trying to update the pickle jar, the appropriate thing to do would be to add the following to\u00a0sage/plot/misc.py\n\n```\n#For backward compatibility -- see #9907.\nfrom sage.misc.decorators import options, suboptions, rename_keyword\n\n```\nThat way, the old pickles will still work as they will still be able to find the decorators in\u00a0sage.plot.misc.",
    "created_at": "2010-09-19T20:44:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9907#issuecomment-89408",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:9" align="right">comment:9</div>

The pickle jar contains old pickles of objects that we want to ensure work in the future. For example, if you made the changes at [9907](https://github.com/sagemath/sage/issues/9907) as the are, then possibly many pickles out in the wild would break. Instead of trying to update the pickle jar, the appropriate thing to do would be to add the following to sage/plot/misc.py

```
#For backward compatibility -- see #9907.
from sage.misc.decorators import options, suboptions, rename_keyword

```
That way, the old pickles will still work as they will still be able to find the decorators in sage.plot.misc.



---

archive/issue_comments_089409.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@mwhansen](#comment:9):\n> The pickle jar contains old pickles of objects that we want to ensure work in the future. For example, if you made the changes at\u00a0[9907](https://github.com/sagemath/sage/issues/9907)\u00a0as the are, then possibly many pickles out in the wild would break. Instead of trying to update the pickle jar, the appropriate thing to do would be to add the following to\u00a0sage/plot/misc.py\n> \n> ```\n> #For backward compatibility -- see #9907.\n> from sage.misc.decorators import options, suboptions, rename_keyword\n> \n> ```\n> That way, the old pickles will still work as they will still be able to find the decorators in\u00a0sage.plot.misc.\n\nOk, thanks -- I will update the patch for #9907. I was actually wondering a bit about backward compatibility, so good to know this is the system. Does the above fix then have a one-year lifetime like for keyword-deprecation? If so, should it be flagged somehow (e.g. with the comment containing the term \"backward compatibility\") so it can be found and removed one year from now?",
    "created_at": "2010-09-20T06:40:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9907#issuecomment-89409",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@mwhansen](#comment:9):
> The pickle jar contains old pickles of objects that we want to ensure work in the future. For example, if you made the changes at [9907](https://github.com/sagemath/sage/issues/9907) as the are, then possibly many pickles out in the wild would break. Instead of trying to update the pickle jar, the appropriate thing to do would be to add the following to sage/plot/misc.py
> 
> ```
> #For backward compatibility -- see #9907.
> from sage.misc.decorators import options, suboptions, rename_keyword
> 
> ```
> That way, the old pickles will still work as they will still be able to find the decorators in sage.plot.misc.

Ok, thanks -- I will update the patch for #9907. I was actually wondering a bit about backward compatibility, so good to know this is the system. Does the above fix then have a one-year lifetime like for keyword-deprecation? If so, should it be flagged somehow (e.g. with the comment containing the term "backward compatibility") so it can be found and removed one year from now?



---

archive/issue_comments_089410.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n-In plot.misc there are some generally usable decorators for various nice stuff. These should be moved to a general library so other modules can use them without illogically depending on plot.\n+The decorators in sage.misc.misc should be moved to sage.decorators.\n+\n+In plot.misc there are also some generally usable decorators for various nice stuff. These should be moved to a general library so other modules can use them without illogically depending on plot. Simultaneously, they should be patched to use sage_wraps instead of the Python \"wraps\" to accommodate for Sage-specific things; e.g. the fix of Trac #9917.\n``````\n",
    "created_at": "2010-09-22T19:20:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9907#issuecomment-89410",
    "user": "https://github.com/johanrosenkilde"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
-In plot.misc there are some generally usable decorators for various nice stuff. These should be moved to a general library so other modules can use them without illogically depending on plot.
+The decorators in sage.misc.misc should be moved to sage.decorators.
+
+In plot.misc there are also some generally usable decorators for various nice stuff. These should be moved to a general library so other modules can use them without illogically depending on plot. Simultaneously, they should be patched to use sage_wraps instead of the Python "wraps" to accommodate for Sage-specific things; e.g. the fix of Trac #9917.
``````




---

archive/issue_events_128806.json:
```json
{
    "actor": "https://github.com/johanrosenkilde",
    "created_at": "2010-09-22T19:20:30Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/9907",
    "title_is": "Move generally usable decorators to misc.decorators",
    "title_was": "Move generally usable decorators from plot.misc to misc.decorators",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9907#event-128806"
}
```



---

archive/issue_comments_089411.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-The decorators in sage.misc.misc should be moved to sage.decorators.\n+The decorators in sage.misc.misc should be moved to sage.misc.decorators.\n \n In plot.misc there are also some generally usable decorators for various nice stuff. These should be moved to a general library so other modules can use them without illogically depending on plot. Simultaneously, they should be patched to use sage_wraps instead of the Python \"wraps\" to accommodate for Sage-specific things; e.g. the fix of Trac #9917.\n``````\n",
    "created_at": "2010-09-22T19:20:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9907#issuecomment-89411",
    "user": "https://github.com/johanrosenkilde"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-The decorators in sage.misc.misc should be moved to sage.decorators.
+The decorators in sage.misc.misc should be moved to sage.misc.decorators.
 
 In plot.misc there are also some generally usable decorators for various nice stuff. These should be moved to a general library so other modules can use them without illogically depending on plot. Simultaneously, they should be patched to use sage_wraps instead of the Python "wraps" to accommodate for Sage-specific things; e.g. the fix of Trac #9917.
``````




---

archive/issue_events_128807.json:
```json
{
    "actor": "https://github.com/johanrosenkilde",
    "created_at": "2010-09-23T12:02:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9907",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9907#event-128807"
}
```



---

archive/issue_events_128808.json:
```json
{
    "actor": "https://github.com/johanrosenkilde",
    "created_at": "2010-09-23T12:02:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9907",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9907#event-128808"
}
```



---

archive/issue_events_128809.json:
```json
{
    "actor": "https://github.com/johanrosenkilde",
    "created_at": "2010-09-23T12:04:46Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/9907",
    "subject": "https://github.com/johanrosenkilde",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9907#event-128809"
}
```



---

archive/issue_comments_089412.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nNote that the added patch assumes the patch for Trac #9919.",
    "created_at": "2010-09-23T12:04:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9907#issuecomment-89412",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:14" align="right">comment:14</div>

Note that the added patch assumes the patch for Trac #9919.



---

archive/issue_comments_089413.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nAdded a comment about when then bug in #9919 was fixed in Python. Accidentally uploaded two.",
    "created_at": "2010-09-24T06:51:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9907#issuecomment-89413",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:15" align="right">comment:15</div>

Added a comment about when then bug in #9919 was fixed in Python. Accidentally uploaded two.



---

archive/issue_comments_089414.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nOk, uploaded a new one, as it seems you can't manually change the patch-files because of some hashes in the top of the file. So this one was done the right way. Remember to use the newest and \n*NOT* the one called \".2.patch\".",
    "created_at": "2010-09-24T07:05:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9907#issuecomment-89414",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:16" align="right">comment:16</div>

Ok, uploaded a new one, as it seems you can't manually change the patch-files because of some hashes in the top of the file. So this one was done the right way. Remember to use the newest and 
*NOT* the one called ".2.patch".



---

archive/issue_comments_089415.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nCan I delete the .2.patch file, then?",
    "created_at": "2010-10-02T04:33:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9907#issuecomment-89415",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:17" align="right">comment:17</div>

Can I delete the .2.patch file, then?



---

archive/issue_comments_089416.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nI've opened up #10057 to address an import change that needs to be made in sagenb after this is merged.",
    "created_at": "2010-10-02T19:44:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9907#issuecomment-89416",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:18" align="right">comment:18</div>

I've opened up #10057 to address an import change that needs to be made in sagenb after this is merged.



---

archive/issue_comments_089417.json:
```json
{
    "body": "apply only this patch; rebased to 4.6.alpha1+some patches",
    "created_at": "2010-10-02T19:50:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9907#issuecomment-89417",
    "user": "https://github.com/jasongrout"
}
```

apply only this patch; rebased to 4.6.alpha1+some patches



---

archive/issue_comments_089418.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nAttachment: **[trac_9907_move_decorators.patch.gz](https://github.com/sagemath/sage/files/ticket9907/trac_9907_move_decorators.patch.gz)**\n\nReplying to [@jasongrout](#comment:17):\n> Can I delete the .2.patch file, then?\n\nSure; I just don't have the privileges to do that myself.",
    "created_at": "2010-10-05T09:39:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9907#issuecomment-89418",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:19" align="right">comment:19</div>

Attachment: **[trac_9907_move_decorators.patch.gz](https://github.com/sagemath/sage/files/ticket9907/trac_9907_move_decorators.patch.gz)**

Replying to [@jasongrout](#comment:17):
> Can I delete the .2.patch file, then?

Sure; I just don't have the privileges to do that myself.



---

archive/issue_comments_089419.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nThis needs to be coordinated with #10107.",
    "created_at": "2010-10-09T20:07:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9907#issuecomment-89419",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:20" align="right">comment:20</div>

This needs to be coordinated with #10107.



---

archive/issue_comments_089420.json:
```json
{
    "body": "Attachment: **[trac_9907_move_decorators.2.patch.gz](https://github.com/sagemath/sage/files/ticket9907/trac_9907_move_decorators.2.patch.gz)**\n\nRebased to 4.6. Still requires first applying patch for Trac #9919",
    "created_at": "2010-11-02T13:58:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9907#issuecomment-89420",
    "user": "https://github.com/johanrosenkilde"
}
```

Attachment: **[trac_9907_move_decorators.2.patch.gz](https://github.com/sagemath/sage/files/ticket9907/trac_9907_move_decorators.2.patch.gz)**

Rebased to 4.6. Still requires first applying patch for Trac #9919



---

archive/issue_comments_089421.json:
```json
{
    "body": "Reviewer: **Robert Miller**",
    "created_at": "2010-11-09T20:21:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9907#issuecomment-89421",
    "user": "https://github.com/rlmill"
}
```

Reviewer: **Robert Miller**



---

archive/issue_events_128810.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-11-09T20:21:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9907",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9907#event-128810"
}
```



---

archive/issue_events_128811.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-11-09T20:21:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9907",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9907#event-128811"
}
```



---

archive/issue_comments_089422.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nIf I apply #6094, #9907, #9919, and #10107 together on top of sage-4.6, all long tests pass. The code looks good.",
    "created_at": "2010-11-09T20:21:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9907#issuecomment-89422",
    "user": "https://github.com/rlmill"
}
```

<div id="comment:21" align="right">comment:21</div>

If I apply #6094, #9907, #9919, and #10107 together on top of sage-4.6, all long tests pass. The code looks good.



---

archive/issue_comments_089423.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nShould this be merged in Sage 4.6.1? (if yes, please set the Milestone)",
    "created_at": "2010-11-11T16:46:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9907#issuecomment-89423",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:22" align="right">comment:22</div>

Should this be merged in Sage 4.6.1? (if yes, please set the Milestone)



---

archive/issue_events_128812.json:
```json
{
    "actor": "https://github.com/johanrosenkilde",
    "created_at": "2010-11-12T13:45:59Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/9907",
    "milestone_number": null,
    "milestone_title": "sage-4.6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9907#event-128812"
}
```



---

archive/issue_comments_089424.json:
```json
{
    "body": "Changed author from **jsrn** to **Johan Sebastian Rosenkilde Nielsen**",
    "created_at": "2010-11-15T12:53:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9907#issuecomment-89424",
    "user": "https://github.com/jdemeyer"
}
```

Changed author from **jsrn** to **Johan Sebastian Rosenkilde Nielsen**



---

archive/issue_comments_089425.json:
```json
{
    "body": "Merged: **sage-4.6.1.alpha2**",
    "created_at": "2010-11-16T08:20:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9907#issuecomment-89425",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-4.6.1.alpha2**



---

archive/issue_events_128813.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-11-16T08:20:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9907",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9907#event-128813"
}
```



---

archive/issue_events_128814.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-11-16T08:20:15Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/9907",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9907#event-128814"
}
```
