# Issue 9730: A simple RC4 cipher implementation for Sage

archive/issues_009730.json:
```json
{
    "body": "This is a standard RC4 implementation in the Cryptography directory for Sage. We do not consider advanced criteria to initialize the state bytearray, and hence this system may be prone to attacks (refer to relevant literature).\n\nThough this is not fully secure (upto industry standard), this is a full-version implementation of the cipher, and can be used for educational purpose as well as for small-scale encryptions.\n\nApply:\n* [attachment:rc4_mod1.patch]\n* [attachment:trac_9730_addon.patch]\n\nAssignee: mvngu\n\nKeywords: RC4, Cryptosystem, Cipher\n\nWork Issues: coverage\n\nAuthor: Sourav Sen Gupta\n\nBranch: u/chapoton/9730\n\nStatus: needs_work\n\nCommit: f196bb47cbd11a0ec22d2b015583d07dccfbaa93\n\nIssue created by migration from https://trac.sagemath.org/ticket/9730\n\n",
    "created_at": "2010-08-11T21:55:35Z",
    "labels": [
        "component: cryptography",
        "minor"
    ],
    "title": "A simple RC4 cipher implementation for Sage",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/9730",
    "user": "https://trac.sagemath.org/admin/accounts/users/sg.sourav"
}
```
This is a standard RC4 implementation in the Cryptography directory for Sage. We do not consider advanced criteria to initialize the state bytearray, and hence this system may be prone to attacks (refer to relevant literature).

Though this is not fully secure (upto industry standard), this is a full-version implementation of the cipher, and can be used for educational purpose as well as for small-scale encryptions.

Apply:
* [attachment:rc4_mod1.patch]
* [attachment:trac_9730_addon.patch]

Assignee: mvngu

Keywords: RC4, Cryptosystem, Cipher

Work Issues: coverage

Author: Sourav Sen Gupta

Branch: u/chapoton/9730

Status: needs_work

Commit: f196bb47cbd11a0ec22d2b015583d07dccfbaa93

Issue created by migration from https://trac.sagemath.org/ticket/9730





---

archive/issue_comments_113832.json:
```json
{
    "body": "A patch to incorporate an implementation of RC4 in Sage",
    "created_at": "2010-08-11T21:56:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9730#issuecomment-113832",
    "user": "https://trac.sagemath.org/admin/accounts/users/sg.sourav"
}
```

A patch to incorporate an implementation of RC4 in Sage



---

archive/issue_comments_113833.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2010-08-12T19:12:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9730#issuecomment-113833",
    "user": "https://trac.sagemath.org/admin/accounts/users/sg.sourav"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_113834.json:
```json
{
    "body": "<a id='comment:1'></a>\nAttachment [rc4.patch](tarball://root/attachments/some-uuid/ticket9730/rc4.patch) by sg.sourav created at 2010-08-12 19:12:08",
    "created_at": "2010-08-12T19:12:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9730#issuecomment-113834",
    "user": "https://trac.sagemath.org/admin/accounts/users/sg.sourav"
}
```

<a id='comment:1'></a>
Attachment [rc4.patch](tarball://root/attachments/some-uuid/ticket9730/rc4.patch) by sg.sourav created at 2010-08-12 19:12:08



---

archive/issue_comments_113835.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2010-08-14T12:08:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9730#issuecomment-113835",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_113836.json:
```json
{
    "body": "<a id='comment:2'></a>\nRunning doctests over `rc4.py` fails with message:\n\n```sh\n[mvngu@sage sage-4.5.3.alpha0]$ ./sage -t -long devel/sage-main/sage/crypto/rc4.py \nsage -t -long \"devel/sage-main/sage/crypto/rc4.py\"          \n**********************************************************************\nError: TAB character found.\n\n\t [1.9 s]\n \n----------------------------------------------------------------------\nThe following tests failed:\n\n\n\tsage -t -long \"devel/sage-main/sage/crypto/rc4.py\"\nTotal time for all tests: 1.9 seconds\n```\nThis patch needs a lot of work.",
    "created_at": "2010-08-14T12:08:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9730#issuecomment-113836",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

<a id='comment:2'></a>
Running doctests over `rc4.py` fails with message:

```sh
[mvngu@sage sage-4.5.3.alpha0]$ ./sage -t -long devel/sage-main/sage/crypto/rc4.py 
sage -t -long "devel/sage-main/sage/crypto/rc4.py"          
**********************************************************************
Error: TAB character found.

	 [1.9 s]
 
----------------------------------------------------------------------
The following tests failed:


	sage -t -long "devel/sage-main/sage/crypto/rc4.py"
Total time for all tests: 1.9 seconds
```
This patch needs a lot of work.



---

archive/issue_comments_113837.json:
```json
{
    "body": "<a id='comment:3'></a>\nAttaching a modified patch which passed all doctests successfully. Also added some sanity checks for types of inputs. \n\nApply rc4_mod1.patch directly (not over rc4.patch).\n\n\n```\nsourav@ssg:~/sage4.5$ ./sage -t -long devel/sage-main/sage/crypto/rc4.py\nsage -t -long \"devel/sage-main/sage/crypto/rc4.py\"          \n\t [6.7 s]\n \n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 6.7 seconds\nsourav@ssg:~/sage4.5$ ./sage -t -long devel/sage-main/sage/crypto/rc4.py\nsage -t -long \"devel/sage-main/sage/crypto/rc4.py\"          \n\t [6.7 s]\n \n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 6.7 seconds\n```",
    "created_at": "2010-08-16T08:22:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9730#issuecomment-113837",
    "user": "https://trac.sagemath.org/admin/accounts/users/sg.sourav"
}
```

<a id='comment:3'></a>
Attaching a modified patch which passed all doctests successfully. Also added some sanity checks for types of inputs. 

Apply rc4_mod1.patch directly (not over rc4.patch).


```
sourav@ssg:~/sage4.5$ ./sage -t -long devel/sage-main/sage/crypto/rc4.py
sage -t -long "devel/sage-main/sage/crypto/rc4.py"          
	 [6.7 s]
 
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 6.7 seconds
sourav@ssg:~/sage4.5$ ./sage -t -long devel/sage-main/sage/crypto/rc4.py
sage -t -long "devel/sage-main/sage/crypto/rc4.py"          
	 [6.7 s]
 
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 6.7 seconds
```



---

archive/issue_comments_113838.json:
```json
{
    "body": "Modified version of rc4.patch including sanity checks (passed doctests)",
    "created_at": "2010-08-16T08:23:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9730#issuecomment-113838",
    "user": "https://trac.sagemath.org/admin/accounts/users/sg.sourav"
}
```

Modified version of rc4.patch including sanity checks (passed doctests)



---

archive/issue_comments_113839.json:
```json
{
    "body": "<a id='comment:4'></a>\nAttachment [rc4_mod1.patch](tarball://root/attachments/some-uuid/ticket9730/rc4_mod1.patch) by @fchapoton created at 2013-08-22 17:17:55\n\napply rc4_mod1.patch",
    "created_at": "2013-08-22T17:17:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9730#issuecomment-113839",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:4'></a>
Attachment [rc4_mod1.patch](tarball://root/attachments/some-uuid/ticket9730/rc4_mod1.patch) by @fchapoton created at 2013-08-22 17:17:55

apply rc4_mod1.patch



---

archive/issue_comments_113840.json:
```json
{
    "body": "<a id='comment:5'></a>\napply only rc4_mod1.patch",
    "created_at": "2013-08-22T17:20:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9730#issuecomment-113840",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:5'></a>
apply only rc4_mod1.patch



---

archive/issue_comments_113841.json:
```json
{
    "body": "Attachment [trac_9730_addon.patch](tarball://root/attachments/some-uuid/ticket9730/trac_9730_addon.patch) by @fchapoton created at 2013-08-22 17:31:12",
    "created_at": "2013-08-22T17:31:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9730#issuecomment-113841",
    "user": "https://github.com/fchapoton"
}
```

Attachment [trac_9730_addon.patch](tarball://root/attachments/some-uuid/ticket9730/trac_9730_addon.patch) by @fchapoton created at 2013-08-22 17:31:12



---

archive/issue_comments_113842.json:
```json
{
    "body": "Changing work_issues from \"\" to \"coverage\"",
    "created_at": "2013-08-22T17:32:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9730#issuecomment-113842",
    "user": "https://github.com/fchapoton"
}
```

Changing work_issues from "" to "coverage"



---

archive/issue_comments_113843.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,7 @@\n This is a standard RC4 implementation in the Cryptography directory for Sage. We do not consider advanced criteria to initialize the state bytearray, and hence this system may be prone to attacks (refer to relevant literature).\n \n Though this is not fully secure (upto industry standard), this is a full-version implementation of the cipher, and can be used for educational purpose as well as for small-scale encryptions.\n+\n+Apply:\n+* [attachment:rc4_mod1.patch]\n+* [attachment:trac_9730_addon.patch]\n``````\n",
    "created_at": "2013-08-22T17:32:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9730#issuecomment-113843",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,7 @@
 This is a standard RC4 implementation in the Cryptography directory for Sage. We do not consider advanced criteria to initialize the state bytearray, and hence this system may be prone to attacks (refer to relevant literature).
 
 Though this is not fully secure (upto industry standard), this is a full-version implementation of the cipher, and can be used for educational purpose as well as for small-scale encryptions.
+
+Apply:
+* [attachment:rc4_mod1.patch]
+* [attachment:trac_9730_addon.patch]
``````




---

archive/issue_comments_113844.json:
```json
{
    "body": "<a id='comment:7'></a>\nNew commits:\n|                                                                                                                                          |                              |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------|\n|[f880b2f](http://git.sagemath.org/sage.git/commit/?id=f880b2f5b1fc099616e1fd6c34a57c3f7556eab1)|`No Subject. Modified: rc4.py`|\n|[f196bb4](http://git.sagemath.org/sage.git/commit/?id=f196bb47cbd11a0ec22d2b015583d07dccfbaa93)|`trac 9730 first cleanup`|",
    "created_at": "2014-01-06T20:03:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9730#issuecomment-113844",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:7'></a>
New commits:
|                                                                                                                                          |                              |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------|
|[f880b2f](http://git.sagemath.org/sage.git/commit/?id=f880b2f5b1fc099616e1fd6c34a57c3f7556eab1)|`No Subject. Modified: rc4.py`|
|[f196bb4](http://git.sagemath.org/sage.git/commit/?id=f196bb47cbd11a0ec22d2b015583d07dccfbaa93)|`trac 9730 first cleanup`|



---

archive/issue_comments_113845.json:
```json
{
    "body": "Changing commit from \"\" to \"f196bb47cbd11a0ec22d2b015583d07dccfbaa93\"",
    "created_at": "2014-01-06T20:03:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9730#issuecomment-113845",
    "user": "https://github.com/fchapoton"
}
```

Changing commit from "" to "f196bb47cbd11a0ec22d2b015583d07dccfbaa93"



---

archive/issue_comments_113846.json:
```json
{
    "body": "Changing branch from \"\" to \"u/chapoton/9730\"",
    "created_at": "2014-01-06T20:03:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9730",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9730#issuecomment-113846",
    "user": "https://github.com/fchapoton"
}
```

Changing branch from "" to "u/chapoton/9730"
