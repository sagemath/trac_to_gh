# Issue 9312: Make GLPK spkg standard

archive/issues_009312.json:
```json
{
    "body": "(((\nThis includes a fix for the issue mentioned here:\n\nhttp://groups.google.com/group/sage-devel/browse_thread/thread/b9429bcb929cda7\n)))\n\nThe spkg is here:\n\nhttp://sage.math.washington.edu/home/ncohen/glpk-4.44.spkg\n\nThis ticket must be merged together with #9351 and #9392.\n\nAssignee: drkirkby\n\nCC:  @nathanncohen @qed777\n\nResolution: fixed\n\nAuthor: David Kirkby, Nathann Cohen\n\nReviewer: Robert Miller\n\nMerged: sage-4.5.alpha3\n\nIssue created by migration from https://trac.sagemath.org/ticket/9312\n\n",
    "closed_at": "2010-07-05T22:35:30Z",
    "created_at": "2010-06-22T15:39:15Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.5",
    "title": "Make GLPK spkg standard",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/9312",
    "user": "https://github.com/rlmill"
}
```
(((
This includes a fix for the issue mentioned here:

http://groups.google.com/group/sage-devel/browse_thread/thread/b9429bcb929cda7
)))

The spkg is here:

http://sage.math.washington.edu/home/ncohen/glpk-4.44.spkg

This ticket must be merged together with #9351 and #9392.

Assignee: drkirkby

CC:  @nathanncohen @qed777

Resolution: fixed

Author: David Kirkby, Nathann Cohen

Reviewer: Robert Miller

Merged: sage-4.5.alpha3

Issue created by migration from https://trac.sagemath.org/ticket/9312





---

archive/issue_comments_110908.json:
```json
{
    "body": "<a id='comment:1'></a>\nIs there any way to test this package? There's no spkg-check. \n\nWhoever put this package together has their own unique style, with each line ending in '&&'. \n\nI'll try to sort out the SAGE64 stuff. \n\nDave",
    "created_at": "2010-06-22T16:50:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110908",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:1'></a>
Is there any way to test this package? There's no spkg-check. 

Whoever put this package together has their own unique style, with each line ending in '&&'. 

I'll try to sort out the SAGE64 stuff. 

Dave



---

archive/issue_comments_110909.json:
```json
{
    "body": "<a id='comment:2'></a>\nI'm not in a position to check this quickly, as I need to go out soon. It needs a bit of work. But the spkg-install makes little sense to me. \n\n* There's no spkg-check to we are once again trusting things work. \n* I've no idea what all this 'make prefix' is about. \n* I've no idea why so many lines end in &&\n* Since MV, CP, etc are not universally used, it would seem better to just unset these, rather than try to add -f to them. It just seems to be overly complicating things. \n \nIt would be better if the person that put it together looked over some other spkg-install files and the Sage Developers Guide. \n\n```\nif [ \"$SAGE_LOCAL\" = \"\" ]; then\n   echo \"SAGE_LOCAL undefined ... exiting\";\n   echo \"Maybe run 'sage -sh'?\"\n   exit 1\nfi\n\n# The version of libtool in this glpk package requires that\n# RM/MV/CP if they are set include the -f option\n# See for example the discussion at:\n# http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=523750\n\n: ${CP=cp}; CP=\"$CP -f\"; export CP\n: ${MV=mv}; MV=\"$MV -f\"; export MV\n: ${RM=rm}; RM=\"$RM -f\"; export RM\n\ncd src &&\nLIBS=-ldl ./configure --prefix=$SAGE_LOCAL &&\nmake prefix=$SAGE_LOCAL &&\nmake install && \ncd .. && \npython setup.py install &&\necho \"********************************************************************************\" && \necho \"\" &&\necho \"    ATTENTION: YOU HAVE TO REBUILD THE SAGE LIBRARY TO GET THIS TO WORK\" &&\necho \"    exit any running sage instances and call \\\"sage -b\\\"\" &&\necho \"\" &&\necho \"********************************************************************************\"\n```",
    "created_at": "2010-06-22T17:18:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110909",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:2'></a>
I'm not in a position to check this quickly, as I need to go out soon. It needs a bit of work. But the spkg-install makes little sense to me. 

* There's no spkg-check to we are once again trusting things work. 
* I've no idea what all this 'make prefix' is about. 
* I've no idea why so many lines end in &&
* Since MV, CP, etc are not universally used, it would seem better to just unset these, rather than try to add -f to them. It just seems to be overly complicating things. 
 
It would be better if the person that put it together looked over some other spkg-install files and the Sage Developers Guide. 

```
if [ "$SAGE_LOCAL" = "" ]; then
   echo "SAGE_LOCAL undefined ... exiting";
   echo "Maybe run 'sage -sh'?"
   exit 1
fi

# The version of libtool in this glpk package requires that
# RM/MV/CP if they are set include the -f option
# See for example the discussion at:
# http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=523750

: ${CP=cp}; CP="$CP -f"; export CP
: ${MV=mv}; MV="$MV -f"; export MV
: ${RM=rm}; RM="$RM -f"; export RM

cd src &&
LIBS=-ldl ./configure --prefix=$SAGE_LOCAL &&
make prefix=$SAGE_LOCAL &&
make install && 
cd .. && 
python setup.py install &&
echo "********************************************************************************" && 
echo "" &&
echo "    ATTENTION: YOU HAVE TO REBUILD THE SAGE LIBRARY TO GET THIS TO WORK" &&
echo "    exit any running sage instances and call \"sage -b\"" &&
echo "" &&
echo "********************************************************************************"
```



---

archive/issue_comments_110910.json:
```json
{
    "body": "<a id='comment:3'></a>\nIs there any good reason to use version 4.42, when the latest is 4.44? \n\nWould it be more sensible if I created a completely fresh package, then some others test that? \n\nI feel it would be simpler to start this from scratch. \n\nI'll be travelling later, and will not have access to any SPARC systems, but I can get somewhere with this on my OpenSolaris laptop. \n\nDave",
    "created_at": "2010-06-22T18:02:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110910",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:3'></a>
Is there any good reason to use version 4.42, when the latest is 4.44? 

Would it be more sensible if I created a completely fresh package, then some others test that? 

I feel it would be simpler to start this from scratch. 

I'll be travelling later, and will not have access to any SPARC systems, but I can get somewhere with this on my OpenSolaris laptop. 

Dave



---

archive/issue_comments_110911.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2010-06-22T18:02:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110911",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

Changing status from new to needs_info.



---

archive/issue_comments_110912.json:
```json
{
    "body": "<a id='comment:4'></a>\nBe aware this is GPL version 3. I was under the impression GPL 3 code was not permitted as standard - only optional or experimental. \n\nDave",
    "created_at": "2010-06-23T01:35:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110912",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:4'></a>
Be aware this is GPL version 3. I was under the impression GPL 3 code was not permitted as standard - only optional or experimental. 

Dave



---

archive/issue_comments_110913.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [drkirkby](#comment%3A4):\n> Be aware this is GPL version 3. I was under the impression GPL 3 code was not permitted as standard - only optional or experimental. \n> \n> Dave \n\n\nI was under the same impression, but apparently that has changed. I don't think this is relevant here, since this ticket isn't even about making GLPK standard anyway! I'd mention this on sage-devel instead.",
    "created_at": "2010-06-23T03:00:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110913",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:5'></a>
Replying to [drkirkby](#comment%3A4):
> Be aware this is GPL version 3. I was under the impression GPL 3 code was not permitted as standard - only optional or experimental. 
> 
> Dave 


I was under the same impression, but apparently that has changed. I don't think this is relevant here, since this ticket isn't even about making GLPK standard anyway! I'd mention this on sage-devel instead.



---

archive/issue_comments_110914.json:
```json
{
    "body": "<a id='comment:6'></a>\nHeres a patch. Will post a new package after dinner - wife calling!",
    "created_at": "2010-06-23T18:30:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110914",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:6'></a>
Heres a patch. Will post a new package after dinner - wife calling!



---

archive/issue_comments_110915.json:
```json
{
    "body": "Attachment [9312.patch](tarball://root/attachments/some-uuid/ticket9312/9312.patch) by drkirkby created at 2010-06-23 19:24:00\n\nMercurial patch which fixes the SAGE64 issue and tons more beside",
    "created_at": "2010-06-23T19:24:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110915",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

Attachment [9312.patch](tarball://root/attachments/some-uuid/ticket9312/9312.patch) by drkirkby created at 2010-06-23 19:24:00

Mercurial patch which fixes the SAGE64 issue and tons more beside



---

archive/issue_comments_110916.json:
```json
{
    "body": "Author: David Kirkby",
    "created_at": "2010-06-23T19:49:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110916",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

Author: David Kirkby



---

archive/issue_comments_110917.json:
```json
{
    "body": "Work_Issues: Needs extensive testing - I've done very little",
    "created_at": "2010-06-23T19:49:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110917",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

Work_Issues: Needs extensive testing - I've done very little



---

archive/issue_comments_110918.json:
```json
{
    "body": "<a id='comment:7'></a>\nI've updated this package somewhat\n\nhttp://boxen.math.washington.edu/home/kirkby/patches/glpk-4.44.spkg\n\nto fix what were quite a number of problems with how the package was put together. I've not tested this as a library. Someone more knowledgeable can test this properly. I've only tested it on Solaris and OpenSolaris to see that it builds ok and passes the self-tests in the source code.\n\nI've not changed any of the python stuff, so it should be unchanged. The major change was to disable building of the static libraries, which I doubt Python needs. \n\n## Changes made\n\n* Updated to the latest upstream code, version 4.44.\n* Added code to allow a 64-bit build on any platform.\n  If SAGE64 is set to \"yes\", the compiler flag -m64 is added\n  by default. That flag works with GCC and SunStudio, but not\n  all compilers - IBM's compiler for AIX and HP's for HP-UX\n  both use different flags to create a 64-bit build.\n  If the compiler does not use -m64 for 64-bit builds, then\n  the environment variable CFLAG64 can be set to indicate what\n  flag gets added.\n* Added a file spkg-check so the self-test code is built.\n  This includes code which will add the appropriate flag\n  for 64-bit builds if the test procedures need code to be\n  compiled. (Sometimes running 'make test' actually needs\n  the compiler flags set properly, so I do it just in case.\n  It appears to be unnecessary with this version of GLPK,\n  but might with later releases.\n* Added the configure option --with-gmp which will speed up\n  processing of large integers (see src/INSTALL)\n* Added the configure option --disable-static since there is\n  no need to build static libraries. (see src/INSTALL)\n* Added the configure option --with-zlib. Adding this allows\n  GLPK API routines and the stand-alone solver to read and\n  write compressed data files performing compression and\n  decompression \"on the fly\" (see src/INSTALL)\n* Removed linking of the 'ld' library in spkg-install, as the\n  reason for it being added was not clear.\n* Corrected SPKG.txt to indicate this code is GPL 3.\n  (see src/COPYING)\n* Added the ChangeLog section to the SPKG.txt file\n* Added zlib, python and mpir as dependencies in SPKG.txt\n* Checked that the configure script actually does configure\n  properly, if not exits.\n* Checked that 'make' does build the code properly, if not exits.\n* Checked that 'make install' does actually install the library\n* Checked that running 'python setup.py install' does actually work.\n  If this is not done, code can appear to install properly as it\n  passes 'configure', 'make' and 'make install'. So unusually there\n  are 4 cases where spkg-install can fail.\n\n == Desirable changes not made ==\n* There is a \"patch\" directory which I did not remove, as there is one file referenced there. It should be called \"patches\" and I believe from discussions on sage-devel it can perhaps be removed. \n* setup.py has no comments. \n* setup.py has lots of ../../../.. in directory entires and does not refer to $SAGE_ROOT or $SAGE_LOCAL. Since I'm not a good Python programmer, I've not attempted to fix this. \nAs you can see, if SAGE_CHECK is set to \"yes\", this passes the one self test that there is (pretty dismal IMHO)\n\n## Test system #1 (others MUST test on other hardware and test properly)\n* Sun Blade 1000\n* 2 x 900 MHz UltraSPARC III+ CPUs\n* 2 GB RAM\n* Solaris 10 03/2005 (first release of Solaris 10)\n* gcc 4.4.3 (uses Sun linker and assembler)\n* SEAGATE-ST3146807FC 2 Gbit/s 15,000 rpm fiber channel disk (FCAL)\n* UFS (not ZFS) local file system.\n* Sage 4.4.4.alpha1\n* GLPK 4.44 source code integrated. \n\n```\nRemoving /export/home/drkirkby/sage-4.4.4.alpha1/local/lib/python2.6/site-packages/UNKNOWN-0.0.0-py2.6.egg-info\nWriting /export/home/drkirkby/sage-4.4.4.alpha1/local/lib/python2.6/site-packages/UNKNOWN-0.0.0-py2.6.egg-info\n\nreal\t3m13.451s\nuser\t2m41.607s\nsys\t0m28.154s\nSuccessfully installed glpk-4.44\nRunning the test suite.\nGLPK will now be tested\nMaking check in include\nmake[1]: Entering directory `/export/home/drkirkby/sage-4.4.4.alpha1/spkg/build/glpk-4.44/src/include'\nmake[1]: Nothing to be done for `check'.\nmake[1]: Leaving directory `/export/home/drkirkby/sage-4.4.4.alpha1/spkg/build/glpk-4.44/src/include'\nMaking check in src\nmake[1]: Entering directory `/export/home/drkirkby/sage-4.4.4.alpha1/spkg/build/glpk-4.44/src/src'\nmake[1]: Nothing to be done for `check'.\nmake[1]: Leaving directory `/export/home/drkirkby/sage-4.4.4.alpha1/spkg/build/glpk-4.44/src/src'\nMaking check in examples\nmake[1]: Entering directory `/export/home/drkirkby/sage-4.4.4.alpha1/spkg/build/glpk-4.44/src/examples'\n./glpsol --version\nGLPSOL: GLPK LP/MIP Solver, v4.44\n\nCopyright (C) 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008,\n2009, 2010 Andrew Makhorin, Department for Applied Informatics, Moscow\nAviation Institute, Moscow, Russia. All rights reserved.\n\nThis program has ABSOLUTELY NO WARRANTY.\n\nThis program is free software; you may re-distribute it under the terms\nof the GNU General Public License version 3 or later.\n./glpsol --mps ./plan.mps\nGLPSOL: GLPK LP/MIP Solver, v4.44\nParameter(s) specified in the command line:\n --mps ./plan.mps\nReading problem data from `./plan.mps'...\nProblem: PLAN\nObjective: VALUE\n8 rows, 7 columns, 48 non-zeros\n54 records were read\nGLPK Simplex Optimizer, v4.44\n8 rows, 7 columns, 48 non-zeros\nPreprocessing...\n7 rows, 7 columns, 41 non-zeros\nScaling...\n A: min|aij| =  1.000e-02  max|aij| =  1.000e+00  ratio =  1.000e+02\nGM: min|aij| =  2.534e-01  max|aij| =  3.946e+00  ratio =  1.557e+01\nEQ: min|aij| =  6.422e-02  max|aij| =  1.000e+00  ratio =  1.557e+01\nConstructing initial basis...\nSize of triangular part = 7\n      0: obj =   6.500000000e+02  infeas =  3.788e+03 (0)\n*     2: obj =   4.376770833e+02  infeas =  0.000e+00 (0)\n*    10: obj =   2.962166065e+02  infeas =  0.000e+00 (0)\nOPTIMAL SOLUTION FOUND\nTime used:   0.0 secs\nMemory used: 0.0 Mb (51150 bytes)\nmake[1]: Leaving directory `/export/home/drkirkby/sage-4.4.4.alpha1/spkg/build/glpk-4.44/src/examples'\nmake[1]: Entering directory `/export/home/drkirkby/sage-4.4.4.alpha1/spkg/build/glpk-4.44/src'\nmake[1]: Leaving directory `/export/home/drkirkby/sage-4.4.4.alpha1/spkg/build/glpk-4.44/src'\nNow cleaning up tmp files.\nrm: Cannot remove any directory in the path of the current working directory\n/export/home/drkirkby/sage-4.4.4.alpha1/spkg/build/glpk-4.44\nMaking Sage/Python scripts relocatable...\nMaking script relocatable\nFinished installing glpk-4.44.spkg\n```",
    "created_at": "2010-06-23T19:49:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110918",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:7'></a>
I've updated this package somewhat

http://boxen.math.washington.edu/home/kirkby/patches/glpk-4.44.spkg

to fix what were quite a number of problems with how the package was put together. I've not tested this as a library. Someone more knowledgeable can test this properly. I've only tested it on Solaris and OpenSolaris to see that it builds ok and passes the self-tests in the source code.

I've not changed any of the python stuff, so it should be unchanged. The major change was to disable building of the static libraries, which I doubt Python needs. 

## Changes made

* Updated to the latest upstream code, version 4.44.
* Added code to allow a 64-bit build on any platform.
  If SAGE64 is set to "yes", the compiler flag -m64 is added
  by default. That flag works with GCC and SunStudio, but not
  all compilers - IBM's compiler for AIX and HP's for HP-UX
  both use different flags to create a 64-bit build.
  If the compiler does not use -m64 for 64-bit builds, then
  the environment variable CFLAG64 can be set to indicate what
  flag gets added.
* Added a file spkg-check so the self-test code is built.
  This includes code which will add the appropriate flag
  for 64-bit builds if the test procedures need code to be
  compiled. (Sometimes running 'make test' actually needs
  the compiler flags set properly, so I do it just in case.
  It appears to be unnecessary with this version of GLPK,
  but might with later releases.
* Added the configure option --with-gmp which will speed up
  processing of large integers (see src/INSTALL)
* Added the configure option --disable-static since there is
  no need to build static libraries. (see src/INSTALL)
* Added the configure option --with-zlib. Adding this allows
  GLPK API routines and the stand-alone solver to read and
  write compressed data files performing compression and
  decompression "on the fly" (see src/INSTALL)
* Removed linking of the 'ld' library in spkg-install, as the
  reason for it being added was not clear.
* Corrected SPKG.txt to indicate this code is GPL 3.
  (see src/COPYING)
* Added the ChangeLog section to the SPKG.txt file
* Added zlib, python and mpir as dependencies in SPKG.txt
* Checked that the configure script actually does configure
  properly, if not exits.
* Checked that 'make' does build the code properly, if not exits.
* Checked that 'make install' does actually install the library
* Checked that running 'python setup.py install' does actually work.
  If this is not done, code can appear to install properly as it
  passes 'configure', 'make' and 'make install'. So unusually there
  are 4 cases where spkg-install can fail.

 == Desirable changes not made ==
* There is a "patch" directory which I did not remove, as there is one file referenced there. It should be called "patches" and I believe from discussions on sage-devel it can perhaps be removed. 
* setup.py has no comments. 
* setup.py has lots of ../../../.. in directory entires and does not refer to $SAGE_ROOT or $SAGE_LOCAL. Since I'm not a good Python programmer, I've not attempted to fix this. 
As you can see, if SAGE_CHECK is set to "yes", this passes the one self test that there is (pretty dismal IMHO)

## Test system #1 (others MUST test on other hardware and test properly)
* Sun Blade 1000
* 2 x 900 MHz UltraSPARC III+ CPUs
* 2 GB RAM
* Solaris 10 03/2005 (first release of Solaris 10)
* gcc 4.4.3 (uses Sun linker and assembler)
* SEAGATE-ST3146807FC 2 Gbit/s 15,000 rpm fiber channel disk (FCAL)
* UFS (not ZFS) local file system.
* Sage 4.4.4.alpha1
* GLPK 4.44 source code integrated. 

```
Removing /export/home/drkirkby/sage-4.4.4.alpha1/local/lib/python2.6/site-packages/UNKNOWN-0.0.0-py2.6.egg-info
Writing /export/home/drkirkby/sage-4.4.4.alpha1/local/lib/python2.6/site-packages/UNKNOWN-0.0.0-py2.6.egg-info

real	3m13.451s
user	2m41.607s
sys	0m28.154s
Successfully installed glpk-4.44
Running the test suite.
GLPK will now be tested
Making check in include
make[1]: Entering directory `/export/home/drkirkby/sage-4.4.4.alpha1/spkg/build/glpk-4.44/src/include'
make[1]: Nothing to be done for `check'.
make[1]: Leaving directory `/export/home/drkirkby/sage-4.4.4.alpha1/spkg/build/glpk-4.44/src/include'
Making check in src
make[1]: Entering directory `/export/home/drkirkby/sage-4.4.4.alpha1/spkg/build/glpk-4.44/src/src'
make[1]: Nothing to be done for `check'.
make[1]: Leaving directory `/export/home/drkirkby/sage-4.4.4.alpha1/spkg/build/glpk-4.44/src/src'
Making check in examples
make[1]: Entering directory `/export/home/drkirkby/sage-4.4.4.alpha1/spkg/build/glpk-4.44/src/examples'
./glpsol --version
GLPSOL: GLPK LP/MIP Solver, v4.44

Copyright (C) 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008,
2009, 2010 Andrew Makhorin, Department for Applied Informatics, Moscow
Aviation Institute, Moscow, Russia. All rights reserved.

This program has ABSOLUTELY NO WARRANTY.

This program is free software; you may re-distribute it under the terms
of the GNU General Public License version 3 or later.
./glpsol --mps ./plan.mps
GLPSOL: GLPK LP/MIP Solver, v4.44
Parameter(s) specified in the command line:
 --mps ./plan.mps
Reading problem data from `./plan.mps'...
Problem: PLAN
Objective: VALUE
8 rows, 7 columns, 48 non-zeros
54 records were read
GLPK Simplex Optimizer, v4.44
8 rows, 7 columns, 48 non-zeros
Preprocessing...
7 rows, 7 columns, 41 non-zeros
Scaling...
 A: min|aij| =  1.000e-02  max|aij| =  1.000e+00  ratio =  1.000e+02
GM: min|aij| =  2.534e-01  max|aij| =  3.946e+00  ratio =  1.557e+01
EQ: min|aij| =  6.422e-02  max|aij| =  1.000e+00  ratio =  1.557e+01
Constructing initial basis...
Size of triangular part = 7
      0: obj =   6.500000000e+02  infeas =  3.788e+03 (0)
*     2: obj =   4.376770833e+02  infeas =  0.000e+00 (0)
*    10: obj =   2.962166065e+02  infeas =  0.000e+00 (0)
OPTIMAL SOLUTION FOUND
Time used:   0.0 secs
Memory used: 0.0 Mb (51150 bytes)
make[1]: Leaving directory `/export/home/drkirkby/sage-4.4.4.alpha1/spkg/build/glpk-4.44/src/examples'
make[1]: Entering directory `/export/home/drkirkby/sage-4.4.4.alpha1/spkg/build/glpk-4.44/src'
make[1]: Leaving directory `/export/home/drkirkby/sage-4.4.4.alpha1/spkg/build/glpk-4.44/src'
Now cleaning up tmp files.
rm: Cannot remove any directory in the path of the current working directory
/export/home/drkirkby/sage-4.4.4.alpha1/spkg/build/glpk-4.44
Making Sage/Python scripts relocatable...
Making script relocatable
Finished installing glpk-4.44.spkg
```



---

archive/issue_comments_110919.json:
```json
{
    "body": "<a id='comment:8'></a>\nNothing wrong to report on my laptop (debian).\n\nNathann",
    "created_at": "2010-06-23T20:09:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110919",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:8'></a>
Nothing wrong to report on my laptop (debian).

Nathann



---

archive/issue_comments_110920.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [ncohen](#comment%3A8):\n> Nothing wrong to report on my laptop (debian).\n> \n> Nathann\n\nYou should put more information than just \"Debian laptop\". Things like version of Debian, processor, RAM, gcc version etc can all be useful. Note what I put above about my SPARC system. The only really unnecessary info was the disks and file systems, as I'd cut-n-pasted that from a ticket where it was relevant, and forgot to remove it. \n\nDave",
    "created_at": "2010-06-23T20:21:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110920",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:9'></a>
Replying to [ncohen](#comment%3A8):
> Nothing wrong to report on my laptop (debian).
> 
> Nathann

You should put more information than just "Debian laptop". Things like version of Debian, processor, RAM, gcc version etc can all be useful. Note what I put above about my SPARC system. The only really unnecessary info was the disks and file systems, as I'd cut-n-pasted that from a ticket where it was relevant, and forgot to remove it. 

Dave



---

archive/issue_comments_110921.json:
```json
{
    "body": "<a id='comment:10'></a>\nHmmmm... Do you know how I could get these informations ? :-)\n\nNathann",
    "created_at": "2010-06-23T20:24:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110921",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:10'></a>
Hmmmm... Do you know how I could get these informations ? :-)

Nathann



---

archive/issue_comments_110922.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [ncohen](#comment%3A10):\n> Hmmmm... Do you know how I could get these informations ? :-)\n> \n> Nathann\n\n\nGoogle should come to your rescue.",
    "created_at": "2010-06-23T20:38:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110922",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:11'></a>
Replying to [ncohen](#comment%3A10):
> Hmmmm... Do you know how I could get these informations ? :-)
> 
> Nathann


Google should come to your rescue.



---

archive/issue_comments_110923.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [drkirkby](#comment%3A7):\n\n## Test system #2\n* MacBook\n* 2.4 GHz Intel Core 2 Duo\n* 2 GB 667 MHz DDR2 SDRAM\n* OS X 10.6.3\n* Sage 4.4.4.alpha1\n\nBuild succeeded and all tests pass.",
    "created_at": "2010-06-24T17:20:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110923",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:12'></a>
Replying to [drkirkby](#comment%3A7):

## Test system #2
* MacBook
* 2.4 GHz Intel Core 2 Duo
* 2 GB 667 MHz DDR2 SDRAM
* OS X 10.6.3
* Sage 4.4.4.alpha1

Build succeeded and all tests pass.



---

archive/issue_comments_110924.json:
```json
{
    "body": "<a id='comment:13'></a>\nI'm attaching an **very briefly tested** `spkg/standard/deps` file. It is based on the deps file at #9351, so if this is merged, #9351 can be closed too. \n\nI've not tried building Sage from scratch using this deps file - just tried that\n\n```\ndrkirkby@hawk:~/SAGE-4.5.alpha1$ ./sage -f glpk-4.44\nForce installing glpk-4.44\nCalling sage-spkg on glpk-4.44\nWarning: Attempted to overwrite SAGE_ROOT environment variable\nBuilding Sage on Solaris in 64-bit mode\nCreating SAGE_LOCAL/lib/sage-64.txt since it does not exist\nDetected SAGE64 flag\nBuilding Sage on Solaris in 64-bit mode\nglpk-4.44\nMachine:\nSunOS hawk 5.11 snv_134 i86pc i386 i86pc\nDeleting directories from past builds of previous/current versions of glpk-4.44\nExtracting package /export/home/drkirkby/SAGE-4.5.alpha1/spkg/standard/glpk-4.44.spkg ...\n-rw-r--r--   1 drkirkby staff    2937482 Jun 23 20:24 /export/home/drkirkby/SAGE-4.5.alpha1/spkg/standard/glpk-4.44.spkg\nglpk-4.44/\nglpk-4.44/patch/\n\n<SNIP>\n\npatch/mipGlpk.cpp:857: warning: dereferencing pointer '__pyx_t_3' does break strict-aliasing rules\npatch/mipGlpk.cpp:857: warning: dereferencing pointer '__pyx_t_3' does break strict-aliasing rules\npatch/mipGlpk.cpp:853: note: initialized from here\ncreating build/lib.solaris-2.11-i86pc-2.6\ncreating build/lib.solaris-2.11-i86pc-2.6/sage\ncreating build/lib.solaris-2.11-i86pc-2.6/sage/numerical\ng++ -m64 -shared -L/export/home/drkirkby/SAGE-4.5.alpha1/local/lib -m64 -m64 -I /export/home/drkirkby/SAGE-4.5.alpha1/local/include -m64 build/temp.solaris-2.11-i86pc-2.6/patch/mipGlpk.o -L/export/home/drkirkby/SAGE-4.5.alpha1/local/lib -lcsage -lstdc++ -lglpk -lpython2.6 -o build/lib.solaris-2.11-i86pc-2.6/sage/numerical/mipGlpk.so\nrunning install_lib\ncopying build/lib.solaris-2.11-i86pc-2.6/sage/numerical/mipGlpk.so -> /export/home/drkirkby/SAGE-4.5.alpha1/local/lib/python2.6/site-packages/sage/numerical\nrunning install_egg_info\nRemoving /export/home/drkirkby/SAGE-4.5.alpha1/local/lib/python2.6/site-packages/UNKNOWN-0.0.0-py2.6.egg-info\nWriting /export/home/drkirkby/SAGE-4.5.alpha1/local/lib/python2.6/site-packages/UNKNOWN-0.0.0-py2.6.egg-info\n\nreal\t0m13.830s\nuser\t0m9.231s\nsys\t0m3.341s\nSuccessfully installed glpk-4.44\nNow cleaning up tmp files.\nrm: Cannot remove any directory in the path of the current working directory\n/export/home/drkirkby/SAGE-4.5.alpha1/spkg/build/glpk-4.44\nMaking Sage/Python scripts relocatable...\nMaking script relocatable\nFinished installing glpk-4.44.spkg\n```\n\nworked. \n\nI've not attached a diff. Not sure if that should be a mercurial one or not. I'll sort that out after I've had some sleep. \n\nDave",
    "created_at": "2010-07-03T23:29:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110924",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:13'></a>
I'm attaching an **very briefly tested** `spkg/standard/deps` file. It is based on the deps file at #9351, so if this is merged, #9351 can be closed too. 

I've not tried building Sage from scratch using this deps file - just tried that

```
drkirkby@hawk:~/SAGE-4.5.alpha1$ ./sage -f glpk-4.44
Force installing glpk-4.44
Calling sage-spkg on glpk-4.44
Warning: Attempted to overwrite SAGE_ROOT environment variable
Building Sage on Solaris in 64-bit mode
Creating SAGE_LOCAL/lib/sage-64.txt since it does not exist
Detected SAGE64 flag
Building Sage on Solaris in 64-bit mode
glpk-4.44
Machine:
SunOS hawk 5.11 snv_134 i86pc i386 i86pc
Deleting directories from past builds of previous/current versions of glpk-4.44
Extracting package /export/home/drkirkby/SAGE-4.5.alpha1/spkg/standard/glpk-4.44.spkg ...
-rw-r--r--   1 drkirkby staff    2937482 Jun 23 20:24 /export/home/drkirkby/SAGE-4.5.alpha1/spkg/standard/glpk-4.44.spkg
glpk-4.44/
glpk-4.44/patch/

<SNIP>

patch/mipGlpk.cpp:857: warning: dereferencing pointer '__pyx_t_3' does break strict-aliasing rules
patch/mipGlpk.cpp:857: warning: dereferencing pointer '__pyx_t_3' does break strict-aliasing rules
patch/mipGlpk.cpp:853: note: initialized from here
creating build/lib.solaris-2.11-i86pc-2.6
creating build/lib.solaris-2.11-i86pc-2.6/sage
creating build/lib.solaris-2.11-i86pc-2.6/sage/numerical
g++ -m64 -shared -L/export/home/drkirkby/SAGE-4.5.alpha1/local/lib -m64 -m64 -I /export/home/drkirkby/SAGE-4.5.alpha1/local/include -m64 build/temp.solaris-2.11-i86pc-2.6/patch/mipGlpk.o -L/export/home/drkirkby/SAGE-4.5.alpha1/local/lib -lcsage -lstdc++ -lglpk -lpython2.6 -o build/lib.solaris-2.11-i86pc-2.6/sage/numerical/mipGlpk.so
running install_lib
copying build/lib.solaris-2.11-i86pc-2.6/sage/numerical/mipGlpk.so -> /export/home/drkirkby/SAGE-4.5.alpha1/local/lib/python2.6/site-packages/sage/numerical
running install_egg_info
Removing /export/home/drkirkby/SAGE-4.5.alpha1/local/lib/python2.6/site-packages/UNKNOWN-0.0.0-py2.6.egg-info
Writing /export/home/drkirkby/SAGE-4.5.alpha1/local/lib/python2.6/site-packages/UNKNOWN-0.0.0-py2.6.egg-info

real	0m13.830s
user	0m9.231s
sys	0m3.341s
Successfully installed glpk-4.44
Now cleaning up tmp files.
rm: Cannot remove any directory in the path of the current working directory
/export/home/drkirkby/SAGE-4.5.alpha1/spkg/build/glpk-4.44
Making Sage/Python scripts relocatable...
Making script relocatable
Finished installing glpk-4.44.spkg
```

worked. 

I've not attached a diff. Not sure if that should be a mercurial one or not. I'll sort that out after I've had some sleep. 

Dave



---

archive/issue_comments_110925.json:
```json
{
    "body": "<a id='comment:14'></a>\nI've attached a new spkg/standard/deps file (MD5 checksum a49d9c910e8b10148f7aaf025e05cc69), which ensures that \n* GLPK builds\n* GLPB builds before Sage\n\nI've also attached a unified diff between this and the deps file on #9351. \n\nHowever, I am aware of ticket #9274, which rightly points out that the deps file is broken for parallel builds. In particular, almost everything actually depends on 'BASE', but very little is shown to depend on BASE. I have made 'GLPK' depend on 'BASE' here, but really the whole file is broken. \n\nUnfortunately, #9274 does not have positive review, and I'm unable to give it positive review, so don't feel I should add the dependencies, even though I believe they should be added. (I don't want to over complicate this ticket). Robert may or may not feel differently. I'm happy to go along with either. In fact, I'd rather add BASE as a dependency to everything where I believe it should be. \n\nDave",
    "created_at": "2010-07-04T14:46:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110925",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:14'></a>
I've attached a new spkg/standard/deps file (MD5 checksum a49d9c910e8b10148f7aaf025e05cc69), which ensures that 
* GLPK builds
* GLPB builds before Sage

I've also attached a unified diff between this and the deps file on #9351. 

However, I am aware of ticket #9274, which rightly points out that the deps file is broken for parallel builds. In particular, almost everything actually depends on 'BASE', but very little is shown to depend on BASE. I have made 'GLPK' depend on 'BASE' here, but really the whole file is broken. 

Unfortunately, #9274 does not have positive review, and I'm unable to give it positive review, so don't feel I should add the dependencies, even though I believe they should be added. (I don't want to over complicate this ticket). Robert may or may not feel differently. I'm happy to go along with either. In fact, I'd rather add BASE as a dependency to everything where I believe it should be. 

Dave



---

archive/issue_comments_110926.json:
```json
{
    "body": "Attachment [install](tarball://root/attachments/some-uuid/ticket9312/install) by drkirkby created at 2010-07-04 14:54:11\n\nUntested $SAGE_ROOT/spkg/install file, which adds GLPK",
    "created_at": "2010-07-04T14:54:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110926",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

Attachment [install](tarball://root/attachments/some-uuid/ticket9312/install) by drkirkby created at 2010-07-04 14:54:11

Untested $SAGE_ROOT/spkg/install file, which adds GLPK



---

archive/issue_comments_110927.json:
```json
{
    "body": "Attachment [install.diff](tarball://root/attachments/some-uuid/ticket9312/install.diff) by drkirkby created at 2010-07-04 14:58:31\n\nUntested $SAGE_ROOT/spkg/install file diff file. Relative to to 'install' in sage-4.5.alpha1",
    "created_at": "2010-07-04T14:58:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110927",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

Attachment [install.diff](tarball://root/attachments/some-uuid/ticket9312/install.diff) by drkirkby created at 2010-07-04 14:58:31

Untested $SAGE_ROOT/spkg/install file diff file. Relative to to 'install' in sage-4.5.alpha1



---

archive/issue_comments_110928.json:
```json
{
    "body": "<a id='comment:15'></a>\nI'm going to upload revised versions of 'deps' and 'deps.diff'. This removes the dependency of GLPK on Python, so GLPK can be built before Python, or in parallel with Python - it does not need to wait for Python. \n\nThis should improve the parallel build process. I made it a dependency on Python before, since there was a call to python in spkg-install, but since Nathann has removed that, so the dependency can be removed. \n\nHere's the MD5 checksums of the two files. I'm just going to overwrite these on the ticket. \n\n```\ndrkirkby@hawk:~$ digest -a md5 deps deps.diff\n(deps) = 8ddc6b0fcc9445ba566fa647451d871c\n(deps.diff) = 5e9a409b2ec49f00039802b20a28d7cd\n```",
    "created_at": "2010-07-05T17:22:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110928",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:15'></a>
I'm going to upload revised versions of 'deps' and 'deps.diff'. This removes the dependency of GLPK on Python, so GLPK can be built before Python, or in parallel with Python - it does not need to wait for Python. 

This should improve the parallel build process. I made it a dependency on Python before, since there was a call to python in spkg-install, but since Nathann has removed that, so the dependency can be removed. 

Here's the MD5 checksums of the two files. I'm just going to overwrite these on the ticket. 

```
drkirkby@hawk:~$ digest -a md5 deps deps.diff
(deps) = 8ddc6b0fcc9445ba566fa647451d871c
(deps.diff) = 5e9a409b2ec49f00039802b20a28d7cd
```



---

archive/issue_comments_110929.json:
```json
{
    "body": "Attachment [deps](tarball://root/attachments/some-uuid/ticket9312/deps) by drkirkby created at 2010-07-05 17:23:08\n\n$SAGE_ROOT/spkg/standard/deps",
    "created_at": "2010-07-05T17:23:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110929",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

Attachment [deps](tarball://root/attachments/some-uuid/ticket9312/deps) by drkirkby created at 2010-07-05 17:23:08

$SAGE_ROOT/spkg/standard/deps



---

archive/issue_comments_110930.json:
```json
{
    "body": "Attachment [deps.diff](tarball://root/attachments/some-uuid/ticket9312/deps.diff) by drkirkby created at 2010-07-05 17:24:06\n\nDiff file for $SAGE_ROOT/spkg/standard/deps",
    "created_at": "2010-07-05T17:24:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110930",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

Attachment [deps.diff](tarball://root/attachments/some-uuid/ticket9312/deps.diff) by drkirkby created at 2010-07-05 17:24:06

Diff file for $SAGE_ROOT/spkg/standard/deps



---

archive/issue_comments_110931.json:
```json
{
    "body": "Reviewer: Robert Miller",
    "created_at": "2010-07-05T20:37:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110931",
    "user": "https://github.com/rlmill"
}
```

Reviewer: Robert Miller



---

archive/issue_comments_110932.json:
```json
{
    "body": "Changing work_issues from \"Needs extensive testing - I've done very little\" to \"\"",
    "created_at": "2010-07-05T20:37:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110932",
    "user": "https://github.com/rlmill"
}
```

Changing work_issues from "Needs extensive testing - I've done very little" to ""



---

archive/issue_comments_110933.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,11 @@\n-From the discussion at\n+(((\n+This includes a fix for the issue mentioned here:\n \n http://groups.google.com/group/sage-devel/browse_thread/thread/b9429bcb929cda7\n+)))\n \n-The GLPK spkg ignores the SAGE64 variable.\n+The spkg is here:\n+\n+http://sage.math.washington.edu/home/ncohen/glpk-4.44.spkg\n+\n+This ticket must be merged together with #9351 and #9392.\n``````\n",
    "created_at": "2010-07-05T20:37:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110933",
    "user": "https://github.com/rlmill"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,11 @@
-From the discussion at
+(((
+This includes a fix for the issue mentioned here:
 
 http://groups.google.com/group/sage-devel/browse_thread/thread/b9429bcb929cda7
+)))
 
-The GLPK spkg ignores the SAGE64 variable.
+The spkg is here:
+
+http://sage.math.washington.edu/home/ncohen/glpk-4.44.spkg
+
+This ticket must be merged together with #9351 and #9392.
``````




---

archive/issue_comments_110934.json:
```json
{
    "body": "Changing author from \"David Kirkby\" to \"David Kirkby, Nathann Cohen\"",
    "created_at": "2010-07-05T20:37:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110934",
    "user": "https://github.com/rlmill"
}
```

Changing author from "David Kirkby" to "David Kirkby, Nathann Cohen"



---

archive/issue_events_028053.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "rename": {
        "from": "Fix GLPK spkg for SAGE64",
        "to": "Make GLPK spkg standard"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9312#event-28053"
}
```



---

archive/issue_comments_110935.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2010-07-05T20:37:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110935",
    "user": "https://github.com/rlmill"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_events_028054.json:
```json
{
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "label": "component: packages",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9312#event-28054"
}
```



---

archive/issue_comments_110936.json:
```json
{
    "body": "Changing author from \"David Kirkby, Nathann Cohen\" to \"David Kirkby, Nathann Cohen,\"",
    "created_at": "2010-07-05T20:52:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110936",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

Changing author from "David Kirkby, Nathann Cohen" to "David Kirkby, Nathann Cohen,"



---

archive/issue_comments_110937.json:
```json
{
    "body": "<a id='comment:17'></a>\nI'm attaching a deps.better, which you may or may not prefer to merge. The difference is that it makes everything depend on the 4 base packages. That means building in parallel is more relieable, as no standard packages will get built before the base packages do. \n\nRobert can decide whether he merges it or not. \n\nI've also attached a diff from the deps in this package - you can see the changes are minor. \n\nI've cc'ed Mitesh Patel as the making everything depend on BASE is his idea. I've put him as an author too, but Robert can remove that if he would rather use the less changed deps file\n\nDave",
    "created_at": "2010-07-05T20:52:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110937",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:17'></a>
I'm attaching a deps.better, which you may or may not prefer to merge. The difference is that it makes everything depend on the 4 base packages. That means building in parallel is more relieable, as no standard packages will get built before the base packages do. 

Robert can decide whether he merges it or not. 

I've also attached a diff from the deps in this package - you can see the changes are minor. 

I've cc'ed Mitesh Patel as the making everything depend on BASE is his idea. I've put him as an author too, but Robert can remove that if he would rather use the less changed deps file

Dave



---

archive/issue_comments_110938.json:
```json
{
    "body": "A better version of deps, which ensures things depend on the 4 base packages - better for parallel building.",
    "created_at": "2010-07-05T20:53:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110938",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

A better version of deps, which ensures things depend on the 4 base packages - better for parallel building.



---

archive/issue_comments_110939.json:
```json
{
    "body": "Attachment [deps.better](tarball://root/attachments/some-uuid/ticket9312/deps.better) by drkirkby created at 2010-07-05 20:54:11\n\nChanges between the deps file here, and what I think is a better version - more relieable",
    "created_at": "2010-07-05T20:54:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110939",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

Attachment [deps.better](tarball://root/attachments/some-uuid/ticket9312/deps.better) by drkirkby created at 2010-07-05 20:54:11

Changes between the deps file here, and what I think is a better version - more relieable



---

archive/issue_comments_110940.json:
```json
{
    "body": "Attachment [deps.better.diff](tarball://root/attachments/some-uuid/ticket9312/deps.better.diff) by drkirkby created at 2010-07-05 21:12:30\n\nsame file, but with a .txt extension, as I could not see it in my browser. Hopefully .txt should be easy for comparision of the two files",
    "created_at": "2010-07-05T21:12:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110940",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

Attachment [deps.better.diff](tarball://root/attachments/some-uuid/ticket9312/deps.better.diff) by drkirkby created at 2010-07-05 21:12:30

same file, but with a .txt extension, as I could not see it in my browser. Hopefully .txt should be easy for comparision of the two files



---

archive/issue_comments_110941.json:
```json
{
    "body": "Changing author from \"David Kirkby, Nathann Cohen,\" to \"David Kirkby, Nathann Cohen, Mitesh Patel\"",
    "created_at": "2010-07-05T21:13:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110941",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

Changing author from "David Kirkby, Nathann Cohen," to "David Kirkby, Nathann Cohen, Mitesh Patel"



---

archive/issue_comments_110942.json:
```json
{
    "body": "<a id='comment:18'></a>\nAttachment [deps.better.diff.txt](tarball://root/attachments/some-uuid/ticket9312/deps.better.diff.txt) by drkirkby created at 2010-07-05 21:13:55",
    "created_at": "2010-07-05T21:13:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110942",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:18'></a>
Attachment [deps.better.diff.txt](tarball://root/attachments/some-uuid/ticket9312/deps.better.diff.txt) by drkirkby created at 2010-07-05 21:13:55



---

archive/issue_comments_110943.json:
```json
{
    "body": "Changing assignee from tbd to drkirkby.",
    "created_at": "2010-07-05T21:13:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110943",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

Changing assignee from tbd to drkirkby.



---

archive/issue_comments_110944.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [drkirkby](#comment%3A17):\n> Robert can decide whether he merges it or not. \n\n\nNope. This is part of #9274, and belongs there.",
    "created_at": "2010-07-05T21:20:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110944",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:19'></a>
Replying to [drkirkby](#comment%3A17):
> Robert can decide whether he merges it or not. 


Nope. This is part of #9274, and belongs there.



---

archive/issue_comments_110945.json:
```json
{
    "body": "Changing author from \"David Kirkby, Nathann Cohen, Mitesh Patel\" to \"David Kirkby, Nathann Cohen\"",
    "created_at": "2010-07-05T21:20:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110945",
    "user": "https://github.com/rlmill"
}
```

Changing author from "David Kirkby, Nathann Cohen, Mitesh Patel" to "David Kirkby, Nathann Cohen"



---

archive/issue_comments_110946.json:
```json
{
    "body": "<a id='comment:20'></a>\nAttachment [trac_9312-optional.patch](tarball://root/attachments/some-uuid/ticket9312/trac_9312-optional.patch) by @nathanncohen created at 2010-07-05 22:01:56\n\nA new patch to remove the #optional GLPK from Sage's code.\n\nI know 2 or 3 are still missing in other files, which I will remove later in another patch to simplify - now useless - code. I leave them here for the moment as touching it would conflict with other patches already written.\n\nNathann",
    "created_at": "2010-07-05T22:01:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110946",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:20'></a>
Attachment [trac_9312-optional.patch](tarball://root/attachments/some-uuid/ticket9312/trac_9312-optional.patch) by @nathanncohen created at 2010-07-05 22:01:56

A new patch to remove the #optional GLPK from Sage's code.

I know 2 or 3 are still missing in other files, which I will remove later in another patch to simplify - now useless - code. I leave them here for the moment as touching it would conflict with other patches already written.

Nathann



---

archive/issue_comments_110947.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2010-07-05T22:32:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110947",
    "user": "https://github.com/rlmill"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_110948.json:
```json
{
    "body": "<a id='comment:21'></a>\nFINALLY!",
    "created_at": "2010-07-05T22:32:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110948",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:21'></a>
FINALLY!



---

archive/issue_comments_110949.json:
```json
{
    "body": "<a id='comment:22'></a>\nYeahhhhhhhhhhhhhhhhhhhhhhhhhhhhhh !! :-D\n\nNathann",
    "created_at": "2010-07-05T22:33:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110949",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:22'></a>
Yeahhhhhhhhhhhhhhhhhhhhhhhhhhhhhh !! :-D

Nathann



---

archive/issue_comments_110950.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2010-07-05T22:35:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110950",
    "user": "https://github.com/rlmill"
}
```

Resolution: fixed



---

archive/issue_events_028055.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-07-05T22:35:30Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9312#event-28055"
}
```



---

archive/issue_comments_110951.json:
```json
{
    "body": "Merged: sage-4.5.alpha3",
    "created_at": "2010-07-05T22:35:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110951",
    "user": "https://github.com/rlmill"
}
```

Merged: sage-4.5.alpha3



---

archive/issue_comments_110952.json:
```json
{
    "body": "<a id='comment:24'></a>\nIt looks to me as though cython should be a prerequisite for glpk in spkg/standard/deps.  From setup.py:\n\n```\nfrom Cython.Distutils import build_ext\n```\nWhen I tried to build Sage on sage.math (using parallel spkg building), it bombed when it got to glpk because of this issue.",
    "created_at": "2010-07-06T00:06:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110952",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:24'></a>
It looks to me as though cython should be a prerequisite for glpk in spkg/standard/deps.  From setup.py:

```
from Cython.Distutils import build_ext
```
When I tried to build Sage on sage.math (using parallel spkg building), it bombed when it got to glpk because of this issue.



---

archive/issue_comments_110953.json:
```json
{
    "body": "<a id='comment:25'></a>\nIf I'm right about deps, can we deal with it in #9274?",
    "created_at": "2010-07-06T00:08:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110953",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:25'></a>
If I'm right about deps, can we deal with it in #9274?



---

archive/issue_comments_110954.json:
```json
{
    "body": "<a id='comment:26'></a>\nReplying to [jhpalmieri](#comment%3A25):\n> If I'm right about deps, can we deal with it in #9274?\n\n\nYes, and sage-4.5.alpha4 will be a very short release, so that people can actually test GLPK.",
    "created_at": "2010-07-06T00:10:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110954",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:26'></a>
Replying to [jhpalmieri](#comment%3A25):
> If I'm right about deps, can we deal with it in #9274?


Yes, and sage-4.5.alpha4 will be a very short release, so that people can actually test GLPK.



---

archive/issue_comments_110955.json:
```json
{
    "body": "<a id='comment:27'></a>\nO_o\n\nThere should not be any setup.py file anymore in the GLPK spkg O_o\n\nNathann",
    "created_at": "2010-07-06T06:19:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110955",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:27'></a>
O_o

There should not be any setup.py file anymore in the GLPK spkg O_o

Nathann



---

archive/issue_comments_110956.json:
```json
{
    "body": "<a id='comment:28'></a>\nReplying to [ncohen](#comment%3A27):\n> O_o\n> \n> There should not be any setup.py file anymore in the GLPK spkg O_o\n\n\nNathann,\n\nWhat are you talking about? I don't see one anywhere in the GLPK spkg that was merged into sage-4.5.alpha3.",
    "created_at": "2010-07-06T07:04:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110956",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:28'></a>
Replying to [ncohen](#comment%3A27):
> O_o
> 
> There should not be any setup.py file anymore in the GLPK spkg O_o


Nathann,

What are you talking about? I don't see one anywhere in the GLPK spkg that was merged into sage-4.5.alpha3.



---

archive/issue_comments_110957.json:
```json
{
    "body": "<a id='comment:29'></a>\n> What are you talking about? I don't see one anywhere in the GLPK spkg that was merged into sage-4.5.alpha3.\n\n\nThat's what I mean ! There is no setup.py in the glpk SPKG embedded in alpha 3, and so no reason at all to make it dependent on Cython !\n\nNathann",
    "created_at": "2010-07-06T07:18:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110957",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:29'></a>
> What are you talking about? I don't see one anywhere in the GLPK spkg that was merged into sage-4.5.alpha3.


That's what I mean ! There is no setup.py in the glpk SPKG embedded in alpha 3, and so no reason at all to make it dependent on Cython !

Nathann



---

archive/issue_comments_110958.json:
```json
{
    "body": "<a id='comment:30'></a>\nNathann is saying there is no setup.py, so there should be no need for Cython. I agree with this. \n\nAs Robert knows, I did a quick hack of a 'deps' file to \n\n* Add Cython as a dependency of GLPK\n* Sort out the parallel building stuff. \n\nwhich I posted a link to (much to Roberts dislike). Sage built ok with that. \n\nHaving seen Nathann's comments, I hacked this file again and removed the Cython dependency, so now the GLPK entry says:\n\n```\n$(INST)/$(GLPK): $(BASE) $(INST)/$(MPIR) $(INST)/$(ZLIB)\n        $(INSTALL) \"$(SAGE_SPKG) $(GLPK) 2>&1\" \"tee -a $(SAGE_LOGS)/$(GLPK).log\"\n```\n\ni.e. it was back to what I had before. Sage still built ok. So I agree with Nathann, there seems no need for Cython to be a dependency of GLPK. Whatever the reasons for the failed build by someone, it was not a lack of Cython. \n\nI think until a release is made with all the parallel issues resolved, building will be unrelieable in parallel, and may throw up some 'red herrings'. What appears to be due to X, might in fact be due to Y. \n\nDave",
    "created_at": "2010-07-06T09:57:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9312#issuecomment-110958",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:30'></a>
Nathann is saying there is no setup.py, so there should be no need for Cython. I agree with this. 

As Robert knows, I did a quick hack of a 'deps' file to 

* Add Cython as a dependency of GLPK
* Sort out the parallel building stuff. 

which I posted a link to (much to Roberts dislike). Sage built ok with that. 

Having seen Nathann's comments, I hacked this file again and removed the Cython dependency, so now the GLPK entry says:

```
$(INST)/$(GLPK): $(BASE) $(INST)/$(MPIR) $(INST)/$(ZLIB)
        $(INSTALL) "$(SAGE_SPKG) $(GLPK) 2>&1" "tee -a $(SAGE_LOGS)/$(GLPK).log"
```

i.e. it was back to what I had before. Sage still built ok. So I agree with Nathann, there seems no need for Cython to be a dependency of GLPK. Whatever the reasons for the failed build by someone, it was not a lack of Cython. 

I think until a release is made with all the parallel issues resolved, building will be unrelieable in parallel, and may throw up some 'red herrings'. What appears to be due to X, might in fact be due to Y. 

Dave
