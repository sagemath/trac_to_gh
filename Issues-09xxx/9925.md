# Issue 9925: Doctest error in sage/graphs/graph.py

archive/issues_009924.json:
```json
{
    "assignees": [],
    "body": "I've seen this doctest error with a trial 4.6.alpha1 on sage.math and the Skynet machine cicero (x86-Linux-pentium4-fc):\n\n```python\nsage -t -long  devel/sage/sage/graphs/graph.py\n**********************************************************************\nFile \"/mnt/usb1/scratch/mpatel/tmp/sage-4.6.alpha1/devel/sage-main/sage/graphs/graph.py\", line 1347:\n    sage: cycle.order() % 2 == 0\nException raised:\n    Traceback (most recent call last):\n      File \"/mnt/usb1/scratch/mpatel/tmp/sage-4.6.alpha1/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/mnt/usb1/scratch/mpatel/tmp/sage-4.6.alpha1/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/mnt/usb1/scratch/mpatel/tmp/sage-4.6.alpha1/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_6[9]>\", line 1, in <module>\n        cycle.order() % Integer(2) == Integer(0)###line 1347:\n    sage: cycle.order() % 2 == 0\n    AttributeError: 'bool' object has no attribute 'order'\n**********************************************************************\nFile \"/mnt/usb1/scratch/mpatel/tmp/sage-4.6.alpha1/devel/sage-main/sage/graphs/graph.py\", line 1349:\n    sage: cycle.is_isomorphic(graphs.CycleGraph(cycle.order()))\nException raised:\n    Traceback (most recent call last):\n      File \"/mnt/usb1/scratch/mpatel/tmp/sage-4.6.alpha1/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/mnt/usb1/scratch/mpatel/tmp/sage-4.6.alpha1/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/mnt/usb1/scratch/mpatel/tmp/sage-4.6.alpha1/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_6[10]>\", line 1, in <module>\n        cycle.is_isomorphic(graphs.CycleGraph(cycle.order()))###line 1349:\n    sage: cycle.is_isomorphic(graphs.CycleGraph(cycle.order()))\n    AttributeError: 'bool' object has no attribute 'is_isomorphic'\n**********************************************************************\n```\n\nAssignee: **@sagetrac-mvngu**\n\nCC:  @dimpase @sagetrac-edward-scheinerman @jasongrout @kcrisman @sagetrac-mvngu @nathanncohen\n\nAuthor: **Nathann Cohen**\n\nReviewer: **Dmitrii Pasechnik**\n\nMerged: **sage-4.6.alpha2**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/9925_\n\n",
    "closed_at": "2010-09-29T08:39:23Z",
    "created_at": "2010-09-16T23:56:40Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/doctest%20coverage",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Doctest error in sage/graphs/graph.py",
    "type": "issue",
    "updated_at": "2010-10-06T12:25:52Z",
    "url": "https://github.com/sagemath/sage/issues/9925",
    "user": "https://github.com/qed777"
}
```
I've seen this doctest error with a trial 4.6.alpha1 on sage.math and the Skynet machine cicero (x86-Linux-pentium4-fc):

```python
sage -t -long  devel/sage/sage/graphs/graph.py
**********************************************************************
File "/mnt/usb1/scratch/mpatel/tmp/sage-4.6.alpha1/devel/sage-main/sage/graphs/graph.py", line 1347:
    sage: cycle.order() % 2 == 0
Exception raised:
    Traceback (most recent call last):
      File "/mnt/usb1/scratch/mpatel/tmp/sage-4.6.alpha1/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/mnt/usb1/scratch/mpatel/tmp/sage-4.6.alpha1/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/mnt/usb1/scratch/mpatel/tmp/sage-4.6.alpha1/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_6[9]>", line 1, in <module>
        cycle.order() % Integer(2) == Integer(0)###line 1347:
    sage: cycle.order() % 2 == 0
    AttributeError: 'bool' object has no attribute 'order'
**********************************************************************
File "/mnt/usb1/scratch/mpatel/tmp/sage-4.6.alpha1/devel/sage-main/sage/graphs/graph.py", line 1349:
    sage: cycle.is_isomorphic(graphs.CycleGraph(cycle.order()))
Exception raised:
    Traceback (most recent call last):
      File "/mnt/usb1/scratch/mpatel/tmp/sage-4.6.alpha1/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/mnt/usb1/scratch/mpatel/tmp/sage-4.6.alpha1/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/mnt/usb1/scratch/mpatel/tmp/sage-4.6.alpha1/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_6[10]>", line 1, in <module>
        cycle.is_isomorphic(graphs.CycleGraph(cycle.order()))###line 1349:
    sage: cycle.is_isomorphic(graphs.CycleGraph(cycle.order()))
    AttributeError: 'bool' object has no attribute 'is_isomorphic'
**********************************************************************
```

Assignee: **@sagetrac-mvngu**

CC:  @dimpase @sagetrac-edward-scheinerman @jasongrout @kcrisman @sagetrac-mvngu @nathanncohen

Author: **Nathann Cohen**

Reviewer: **Dmitrii Pasechnik**

Merged: **sage-4.6.alpha2**

_Issue created by migration from https://trac.sagemath.org/ticket/9925_





---

archive/issue_events_117671.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2010-09-16T23:56:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "milestone_number": null,
    "milestone_title": "sage-4.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9925#event-117671"
}
```



---

archive/issue_events_117672.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2010-09-16T23:56:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "label": "https://github.com/sagemath/sage/labels/doctest%20coverage",
    "label_color": "696969",
    "label_name": "doctest coverage",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9925#event-117672"
}
```



---

archive/issue_events_117673.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2010-09-16T23:56:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "label": "https://github.com/sagemath/sage/labels/p1%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9925#event-117673"
}
```



---

archive/issue_events_117674.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2010-09-16T23:56:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9925#event-117674"
}
```



---

archive/issue_comments_091608.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nIf it's feasible to create a patch now, I can merge it into 4.6.alpha1, while I wait for a response to a build error at #4000. \n\nEdward, could you add yourself to the [account name-real name map](http://trac.sagemath.org/sage_trac/wiki/WikiStart#AccountNamesmappedtoRealNames)?",
    "created_at": "2010-09-16T23:58:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9925#issuecomment-91608",
    "user": "https://github.com/qed777"
}
```

<div id="comment:1" align="right">Comment 1</div>

If it's feasible to create a patch now, I can merge it into 4.6.alpha1, while I wait for a response to a build error at #4000. 

Edward, could you add yourself to the [account name-real name map](http://trac.sagemath.org/sage_trac/wiki/WikiStart#AccountNamesmappedtoRealNames)?



---

archive/issue_comments_091609.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nIs this repeatable?  I think I've seen this before, but it's always passed on the second try.",
    "created_at": "2010-09-17T00:12:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9925#issuecomment-91609",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:2" align="right">Comment 2</div>

Is this repeatable?  I think I've seen this before, but it's always passed on the second try.



---

archive/issue_comments_091610.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-I get this doctest error with a trial 4.6.alpha1 on sage.math and many other Sage cluster and Skynet machines:\n+I've seen this doctest error with a trial 4.6.alpha1 on sage.math and the Skynet machine cicero (x86-Linux-pentium4-fc):\n \n ```python\n sage -t -long  devel/sage/sage/graphs/graph.py\n``````\n",
    "created_at": "2010-09-17T00:36:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9925#issuecomment-91610",
    "user": "https://github.com/qed777"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-I get this doctest error with a trial 4.6.alpha1 on sage.math and many other Sage cluster and Skynet machines:
+I've seen this doctest error with a trial 4.6.alpha1 on sage.math and the Skynet machine cicero (x86-Linux-pentium4-fc):
 
 ```python
 sage -t -long  devel/sage/sage/graphs/graph.py
``````




---

archive/issue_comments_091611.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nOops.  You're right.  I confused this with a different error.  I got error above only on sage.math and cicero.skynet (x86-Linux-pentium4-fc) and it's not reproducible.\n\nI apologize for the noise.  Does anyone know why this test might be \"flaky\"?",
    "created_at": "2010-09-17T00:36:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9925#issuecomment-91611",
    "user": "https://github.com/qed777"
}
```

<div id="comment:3" align="right">Comment 3</div>

Oops.  You're right.  I confused this with a different error.  I got error above only on sage.math and cicero.skynet (x86-Linux-pentium4-fc) and it's not reproducible.

I apologize for the noise.  Does anyone know why this test might be "flaky"?



---

archive/issue_events_117675.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2010-09-17T00:37:03Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9925#event-117675"
}
```



---

archive/issue_events_117676.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2010-09-17T00:37:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "label": "https://github.com/sagemath/sage/labels/p1%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9925#event-117676"
}
```



---

archive/issue_events_117677.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2010-09-17T00:37:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "label": "https://github.com/sagemath/sage/labels/worksforme",
    "label_color": "a6a6a6",
    "label_name": "worksforme",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9925#event-117677"
}
```



---

archive/issue_comments_091612.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nHmmm..... If ``cycle`` is a boolean, it means it is equal to True (the method called returns \"True\", or a certificate that it is not true otherwise -- a graph object). I have already seen this method to return wrong answers (and this is fixed in #9420), but the code *IS* deterministic and in this case I do not understand why you would not get an error at the previous docstring :\n\n```\n            sage: g.is_even_hole_free()      \n            True\n```\n\nwhich uses the same graph. Of course, this doctest is another one of the kind I'm trying to get rid off these days : it theoretically fails with a probability of 1/9999999999999999.... which means that it \"can happen\"... But once again, this would mean an error at the previous docstring too `O_o`\n\nif you are finding yourself on one of the machines on which you have seen it failing, could you give this a try ?\n\n```\n    sage: all( isinstance(graphs.RandomBipartite(10, 10, .5).is_even_hole_free(certificate = True), \"Graph\") for i in range(10000) )\n```\n\nNathann",
    "created_at": "2010-09-17T05:58:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9925#issuecomment-91612",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:5" align="right">Comment 5</div>

Hmmm..... If ``cycle`` is a boolean, it means it is equal to True (the method called returns "True", or a certificate that it is not true otherwise -- a graph object). I have already seen this method to return wrong answers (and this is fixed in #9420), but the code *IS* deterministic and in this case I do not understand why you would not get an error at the previous docstring :

```
            sage: g.is_even_hole_free()      
            True
```

which uses the same graph. Of course, this doctest is another one of the kind I'm trying to get rid off these days : it theoretically fails with a probability of 1/9999999999999999.... which means that it "can happen"... But once again, this would mean an error at the previous docstring too `O_o`

if you are finding yourself on one of the machines on which you have seen it failing, could you give this a try ?

```
    sage: all( isinstance(graphs.RandomBipartite(10, 10, .5).is_even_hole_free(certificate = True), "Graph") for i in range(10000) )
```

Nathann



---

archive/issue_comments_091613.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nHmmm.... It looks like it's not --so-- rare O_o\n\n```\nsage: sum( not isinstance(graphs.RandomBipartite(10, 10, .5).is_even_hole_free(certificate = True), Graph) for i in range(10000) )\n96\n```\n\nsomething like 1%...`:-/`\n\nAnd with this :\n\n```\nsage: t = lambda x: Graph(x).is_forest() or isinstance(x.is_even_hole_free(certificate = True), Graph)\nsage: sum( not t(graphs.RandomBipartite(10, 10, .5)) for i in range(10000) )\n111\n```\n\nWhich means it comes from .... the bug in the method subgraph_search, and not from the theoretical probability `:-/`\n\nWith the patch applied :\n\n```\nsage: sage: t = lambda x: Graph(x).is_forest() or isinstance(x.is_even_hole_free(certificate = True), Graph)\nsage: sage: sum( not t(graphs.RandomBipartite(10, 10, .5)) for i in range(10000) )\n0\n```\n\nWhich **relieved** me. I should post a patch to add this is_forest condition anyway. Can I put it on this ticket ?\n\nNathann",
    "created_at": "2010-09-17T06:12:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9925#issuecomment-91613",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:6" align="right">Comment 6</div>

Hmmm.... It looks like it's not --so-- rare O_o

```
sage: sum( not isinstance(graphs.RandomBipartite(10, 10, .5).is_even_hole_free(certificate = True), Graph) for i in range(10000) )
96
```

something like 1%...`:-/`

And with this :

```
sage: t = lambda x: Graph(x).is_forest() or isinstance(x.is_even_hole_free(certificate = True), Graph)
sage: sum( not t(graphs.RandomBipartite(10, 10, .5)) for i in range(10000) )
111
```

Which means it comes from .... the bug in the method subgraph_search, and not from the theoretical probability `:-/`

With the patch applied :

```
sage: sage: t = lambda x: Graph(x).is_forest() or isinstance(x.is_even_hole_free(certificate = True), Graph)
sage: sage: sum( not t(graphs.RandomBipartite(10, 10, .5)) for i in range(10000) )
0
```

Which **relieved** me. I should post a patch to add this is_forest condition anyway. Can I put it on this ticket ?

Nathann



---

archive/issue_events_117678.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2010-09-17T06:19:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9925#event-117678"
}
```



---

archive/issue_comments_091614.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\ngo ahead, Nathann, add the patch...",
    "created_at": "2010-09-17T06:19:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9925#issuecomment-91614",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:7" align="right">Comment 7</div>

go ahead, Nathann, add the patch...



---

archive/issue_comments_091615.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nNathann, could you also add a doctest that does *boom* to the unpatched code?",
    "created_at": "2010-09-17T06:21:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9925#issuecomment-91615",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:8" align="right">Comment 8</div>

Nathann, could you also add a doctest that does *boom* to the unpatched code?



---

archive/issue_comments_091616.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nI can do that, but this patch will require #9925 to be applied first... Here is the explanation : for the moment, the docstring works by generating a random bipartite graph, and looking for a cycle inside it. With a (very small) probability, this graph can be a forest, which means there is no cycle --> the doctest fails. This is not checked right now, and means that even though veeeery unlikely, it may fail because the generated graph is a forest. I can write a patch for this, and it will be available here in a second. The problem now, is that even if the graph is not a forest, a bug in subgraph_search may appear during the doctests (and does, with a probability of 1%). Even when the patch checking whether the graph is a forest will be applied, these errors will *STILL* appear until #9420 is applied.\n\nI will then add a patch right now to test for forests, just in case, and another patch based upon #9420, to check this never appears again :-)\n\nNathann",
    "created_at": "2010-09-17T07:48:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9925#issuecomment-91616",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:9" align="right">Comment 9</div>

I can do that, but this patch will require #9925 to be applied first... Here is the explanation : for the moment, the docstring works by generating a random bipartite graph, and looking for a cycle inside it. With a (very small) probability, this graph can be a forest, which means there is no cycle --> the doctest fails. This is not checked right now, and means that even though veeeery unlikely, it may fail because the generated graph is a forest. I can write a patch for this, and it will be available here in a second. The problem now, is that even if the graph is not a forest, a bug in subgraph_search may appear during the doctests (and does, with a probability of 1%). Even when the patch checking whether the graph is a forest will be applied, these errors will *STILL* appear until #9420 is applied.

I will then add a patch right now to test for forests, just in case, and another patch based upon #9420, to check this never appears again :-)

Nathann



---

archive/issue_comments_091617.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nAttachment: **[trac_9925.patch.gz](https://github.com/sagemath/sage/files/ticket9925/trac_9925.patch.gz)**\n\nThere is now one ticket to be reviewed here, and the patch Dima requested is also waiting for review at #9930 (though it depends on #9420 too)..\n\nSorry for all that !!! `^^;`\n\nNathann",
    "created_at": "2010-09-17T08:17:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9925#issuecomment-91617",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:10" align="right">Comment 10</div>

Attachment: **[trac_9925.patch.gz](https://github.com/sagemath/sage/files/ticket9925/trac_9925.patch.gz)**

There is now one ticket to be reviewed here, and the patch Dima requested is also waiting for review at #9930 (though it depends on #9420 too)..

Sorry for all that !!! `^^;`

Nathann



---

archive/issue_events_117679.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2010-09-17T08:17:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9925#event-117679"
}
```



---

archive/issue_events_117680.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2010-09-17T08:17:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9925#event-117680"
}
```



---

archive/issue_comments_091618.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nI don't get how these lines in the doctest test anything.\n\n```\n... \n \t1354\t            sage: print \"Everything is Fine !\" \n \t1355\t            Everything is Fine ! \n```\nUnless I am mistaken, they only indicate that the coder was in a jolly good mood while writing them :-)",
    "created_at": "2010-09-19T08:03:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9925#issuecomment-91618",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:12" align="right">Comment 12</div>

I don't get how these lines in the doctest test anything.

```
... 
 	1354	            sage: print "Everything is Fine !" 
 	1355	            Everything is Fine ! 
```
Unless I am mistaken, they only indicate that the coder was in a jolly good mood while writing them :-)



---

archive/issue_events_117681.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2010-09-19T08:03:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9925#event-117681"
}
```



---

archive/issue_events_117682.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2010-09-19T08:03:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9925#event-117682"
}
```



---

archive/issue_comments_091619.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nFirst, you are right, then it was also to avoid having a docstring returning nothing on success, and returning \"Error\" on failure... It is just meant to say \"this section has been run\", and check that it was not bypassed for some reason.. Do you prefer it without this part ?\n\nIf so, tell me and I update it.\n\nBut I consider it a very pertinent information that Sage developpers have fun writing docstring, and the user may like to know it `:-D`\n\nNathann",
    "created_at": "2010-09-19T08:34:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9925#issuecomment-91619",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:13" align="right">Comment 13</div>

First, you are right, then it was also to avoid having a docstring returning nothing on success, and returning "Error" on failure... It is just meant to say "this section has been run", and check that it was not bypassed for some reason.. Do you prefer it without this part ?

If so, tell me and I update it.

But I consider it a very pertinent information that Sage developpers have fun writing docstring, and the user may like to know it `:-D`

Nathann



---

archive/issue_comments_091620.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nNathan, you do not *return* error, you just *print* \"Error\"!\nAll that print stuff gets lost when running \"sage -t\", imho...",
    "created_at": "2010-09-19T08:59:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9925#issuecomment-91620",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:14" align="right">Comment 14</div>

Nathan, you do not *return* error, you just *print* "Error"!
All that print stuff gets lost when running "sage -t", imho...



---

archive/issue_comments_091621.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\n> Nathan, you do not *return* error, you just *print* \"Error\"!\n> All that print stuff gets lost when running \"sage -t\", imho...\n\nYes, but if the message \"Error\" is printed and the docstring doesn't expect it, an error will reported, won't it ? `O_o`\n\nIn case of failure, this piece of code will print :\n\nError !\nEverything is fine !\n\nWhile the code only expects to find \"Everything is fine !\".\n\nNathann",
    "created_at": "2010-09-19T09:03:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9925#issuecomment-91621",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:15" align="right">Comment 15</div>

> Nathan, you do not *return* error, you just *print* "Error"!
> All that print stuff gets lost when running "sage -t", imho...

Yes, but if the message "Error" is printed and the docstring doesn't expect it, an error will reported, won't it ? `O_o`

In case of failure, this piece of code will print :

Error !
Everything is fine !

While the code only expects to find "Everything is fine !".

Nathann



---

archive/issue_comments_091622.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nOK, my bad...",
    "created_at": "2010-09-19T09:04:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9925#issuecomment-91622",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:16" align="right">Comment 16</div>

OK, my bad...



---

archive/issue_events_117683.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2010-09-19T09:04:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9925#event-117683"
}
```



---

archive/issue_events_117684.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2010-09-19T09:04:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9925#event-117684"
}
```



---

archive/issue_comments_091623.json:
```json
{
    "body": "Reviewer: **Dimitrii Pasechnik**",
    "created_at": "2010-09-27T09:43:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9925#issuecomment-91623",
    "user": "https://github.com/loefflerd"
}
```

Reviewer: **Dimitrii Pasechnik**



---

archive/issue_comments_091624.json:
```json
{
    "body": "Author: **Nathann Cohen**",
    "created_at": "2010-09-27T09:43:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9925#issuecomment-91624",
    "user": "https://github.com/loefflerd"
}
```

Author: **Nathann Cohen**



---

archive/issue_comments_091625.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nTypo, my apologies.",
    "created_at": "2010-09-27T09:44:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9925#issuecomment-91625",
    "user": "https://github.com/loefflerd"
}
```

<div id="comment:18" align="right">Comment 18</div>

Typo, my apologies.



---

archive/issue_comments_091626.json:
```json
{
    "body": "Changed reviewer from **Dimitrii Pasechnik** to **Dmitrii Pasechnik**",
    "created_at": "2010-09-27T09:44:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9925#issuecomment-91626",
    "user": "https://github.com/loefflerd"
}
```

Changed reviewer from **Dimitrii Pasechnik** to **Dmitrii Pasechnik**



---

archive/issue_events_117685.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2010-09-29T08:39:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "label": "https://github.com/sagemath/sage/labels/worksforme",
    "label_color": "a6a6a6",
    "label_name": "worksforme",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9925#event-117685"
}
```



---

archive/issue_comments_091627.json:
```json
{
    "body": "Merged: **sage-4.6.alpha2**",
    "created_at": "2010-09-29T08:39:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9925#issuecomment-91627",
    "user": "https://github.com/qed777"
}
```

Merged: **sage-4.6.alpha2**



---

archive/issue_events_117686.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2010-09-29T08:39:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9925#event-117686"
}
```



---

archive/issue_events_117687.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2010-09-29T08:39:23Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9925#event-117687"
}
```



---

archive/issue_comments_091628.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nKarl-Dieter Crisman reported this error on [sage-release](http://groups.google.com/group/sage-release/browse_thread/thread/6bb037c1f4a1ace9/baa93cd5c1dc489f#baa93cd5c1dc489f):\n\n```python\nOn OS X 10.4 PPC, I get a variant on #10042 (I put this on the ticket)\nand the toric divisor one, and a known Maxima timeout due to tab-\ncompletion.  I also got the following non-repeating failure:\n\nFile \"/Users/student/Desktop/sage-4.6.alpha2/devel/sage/sage/graphs/graph.py\", line 1346:\n    sage: if not g.is_forest():\n         cycle = g.is_even_hole_free(certificate = True)\n         if cycle.order() % Integer(2) == Integer(1):\n             print \"Error !\"\n         if not cycle.is_isomorphic(\n                graphs.CycleGraph(cycle.order())):\n             print \"Error !\"\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/student/Desktop/sage-4.6.alpha2/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/Users/student/Desktop/sage-4.6.alpha2/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/Users/student/Desktop/sage-4.6.alpha2/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_6[8]>\", line 1, in <module>\n        if not g.is_forest():###line 1346:\n    sage: if not g.is_forest():\n      File \"/Users/student/Desktop/sage-4.6.alpha2/local/lib/python/site-packages/sage/graphs/generic_graph.py\", line 1823, in is_forest\n        for g in self.connected_components_subgraphs():\n      File \"/Users/student/Desktop/sage-4.6.alpha2/local/lib/python/site-packages/sage/graphs/generic_graph.py\", line 3136, in connected_components_subgraphs\n        list.append(self.subgraph(c, inplace=False))\n      File \"/Users/student/Desktop/sage-4.6.alpha2/local/lib/python/site-packages/sage/graphs/generic_graph.py\", line 8170, in subgraph\n        edge_property=edge_property)\n      File \"/Users/student/Desktop/sage-4.6.alpha2/local/lib/python/site-packages/sage/graphs/generic_graph.py\", line 8279, in _subgraph_by_adding\n        G.add_vertices(vertices)\n      File \"/Users/student/Desktop/sage-4.6.alpha2/local/lib/python/site-packages/sage/graphs/bipartite_graph.py\", line 534, in add_vertices\n        raise RuntimeError(\"Partition must be specified (e.g. left=True).\")\n    RuntimeError: Partition must be specified (e.g. left=True).\n```\nDima and Nathann, could you look into this?  If it's a new problem, please open a new 4.6 blocker with this in the description.",
    "created_at": "2010-10-04T21:40:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9925#issuecomment-91628",
    "user": "https://github.com/qed777"
}
```

<div id="comment:20" align="right">Comment 20</div>

Karl-Dieter Crisman reported this error on [sage-release](http://groups.google.com/group/sage-release/browse_thread/thread/6bb037c1f4a1ace9/baa93cd5c1dc489f#baa93cd5c1dc489f):

```python
On OS X 10.4 PPC, I get a variant on #10042 (I put this on the ticket)
and the toric divisor one, and a known Maxima timeout due to tab-
completion.  I also got the following non-repeating failure:

File "/Users/student/Desktop/sage-4.6.alpha2/devel/sage/sage/graphs/graph.py", line 1346:
    sage: if not g.is_forest():
         cycle = g.is_even_hole_free(certificate = True)
         if cycle.order() % Integer(2) == Integer(1):
             print "Error !"
         if not cycle.is_isomorphic(
                graphs.CycleGraph(cycle.order())):
             print "Error !"
Exception raised:
    Traceback (most recent call last):
      File "/Users/student/Desktop/sage-4.6.alpha2/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/Users/student/Desktop/sage-4.6.alpha2/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/Users/student/Desktop/sage-4.6.alpha2/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_6[8]>", line 1, in <module>
        if not g.is_forest():###line 1346:
    sage: if not g.is_forest():
      File "/Users/student/Desktop/sage-4.6.alpha2/local/lib/python/site-packages/sage/graphs/generic_graph.py", line 1823, in is_forest
        for g in self.connected_components_subgraphs():
      File "/Users/student/Desktop/sage-4.6.alpha2/local/lib/python/site-packages/sage/graphs/generic_graph.py", line 3136, in connected_components_subgraphs
        list.append(self.subgraph(c, inplace=False))
      File "/Users/student/Desktop/sage-4.6.alpha2/local/lib/python/site-packages/sage/graphs/generic_graph.py", line 8170, in subgraph
        edge_property=edge_property)
      File "/Users/student/Desktop/sage-4.6.alpha2/local/lib/python/site-packages/sage/graphs/generic_graph.py", line 8279, in _subgraph_by_adding
        G.add_vertices(vertices)
      File "/Users/student/Desktop/sage-4.6.alpha2/local/lib/python/site-packages/sage/graphs/bipartite_graph.py", line 534, in add_vertices
        raise RuntimeError("Partition must be specified (e.g. left=True).")
    RuntimeError: Partition must be specified (e.g. left=True).
```
Dima and Nathann, could you look into this?  If it's a new problem, please open a new 4.6 blocker with this in the description.



---

archive/issue_comments_091629.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nIt's another of this SERGHLIGHLWIEUGH BipartiteGraph-related errors --> they overload methods like add-edge to stay compatible. Usually wrapping the graph inside Graph(g) to cast it toward a regular graph is enough, but I'll give it a look only tomorrow. I have far too much of this wonderful red wine in the brain at the moment. You'll have a patch tomorrow -- sorry for that !\n\nNathann",
    "created_at": "2010-10-04T21:46:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9925#issuecomment-91629",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:21" align="right">Comment 21</div>

It's another of this SERGHLIGHLWIEUGH BipartiteGraph-related errors --> they overload methods like add-edge to stay compatible. Usually wrapping the graph inside Graph(g) to cast it toward a regular graph is enough, but I'll give it a look only tomorrow. I have far too much of this wonderful red wine in the brain at the moment. You'll have a patch tomorrow -- sorry for that !

Nathann



---

archive/issue_comments_091630.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nReplying to [@qed777](#comment%3A20):\n> Karl-Dieter Crisman reported this error on [sage-release](http://groups.google.com/group/sage-release/browse_thread/thread/6bb037c1f4a1ace9/baa93cd5c1dc489f#baa93cd5c1dc489f):\n\nI saw the same non-repeating error on Skynet's fulvia (x86_64-SunOS-core2).  The full log is [here](http://build.sagemath.org/sage/builders/fulvia%20full/builds/1/steps/shell_5/logs/stdio).",
    "created_at": "2010-10-05T03:43:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9925#issuecomment-91630",
    "user": "https://github.com/qed777"
}
```

<div id="comment:22" align="right">Comment 22</div>

Replying to [@qed777](#comment%3A20):
> Karl-Dieter Crisman reported this error on [sage-release](http://groups.google.com/group/sage-release/browse_thread/thread/6bb037c1f4a1ace9/baa93cd5c1dc489f#baa93cd5c1dc489f):

I saw the same non-repeating error on Skynet's fulvia (x86_64-SunOS-core2).  The full log is [here](http://build.sagemath.org/sage/builders/fulvia%20full/builds/1/steps/shell_5/logs/stdio).



---

archive/issue_comments_091631.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nThis is fixed by both #10067 and #9422",
    "created_at": "2010-10-05T08:15:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9925#issuecomment-91631",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:23" align="right">Comment 23</div>

This is fixed by both #10067 and #9422



---

archive/issue_comments_091632.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nReplying to [@nathanncohen](#comment%3A23):\n> This is fixed by both #10067 and #9422\n\nCould you give before-after example(s) here analogous to those in [comment 6](#comment%3A6), that show statistically, at least, that the new patches fix the problem?  Is it practical to use one of these examples as a long doctest?",
    "created_at": "2010-10-05T08:55:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9925#issuecomment-91632",
    "user": "https://github.com/qed777"
}
```

<div id="comment:24" align="right">Comment 24</div>

Replying to [@nathanncohen](#comment%3A23):
> This is fixed by both #10067 and #9422

Could you give before-after example(s) here analogous to those in [comment 6](#comment%3A6), that show statistically, at least, that the new patches fix the problem?  Is it practical to use one of these examples as a long doctest?



---

archive/issue_comments_091633.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nTo be honest I have no idea at all of the probability in this case. I just followed the path of the code, and saw where it can only have happened. With patch #9422, the method is_forest does not call connected_components_subgraphs anymore, which clearly avoids the bug (caused by the subgraph method. adding edges in a BipartiteGraph can lead to such exceptions). With #10067, the BipartiteGraph class is not used anymore, which means that these checks when adding edges (creating the failure) are not done anymore.\n\nMy previous checks were all about being sure there was no mistake in subgraph_search, which is some not-so-trivial Cython code. In this case, the cause of the error is crystal clear `:-)`\n\nNathann",
    "created_at": "2010-10-05T09:20:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9925#issuecomment-91633",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:25" align="right">Comment 25</div>

To be honest I have no idea at all of the probability in this case. I just followed the path of the code, and saw where it can only have happened. With patch #9422, the method is_forest does not call connected_components_subgraphs anymore, which clearly avoids the bug (caused by the subgraph method. adding edges in a BipartiteGraph can lead to such exceptions). With #10067, the BipartiteGraph class is not used anymore, which means that these checks when adding edges (creating the failure) are not done anymore.

My previous checks were all about being sure there was no mistake in subgraph_search, which is some not-so-trivial Cython code. In this case, the cause of the error is crystal clear `:-)`

Nathann



---

archive/issue_comments_091634.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nI don't have time to apply the patches, but without them, the code:\n\n```python\ndef example(verbose=False):\n    try:\n        g = graphs.RandomBipartite(10, 10, .5)\n        g.is_even_hole_free() and not g.is_forest()\n        if not g.is_forest():\n            cycle = g.is_even_hole_free(certificate = True)\n            if cycle.order() % 2 == 1:\n                print \"Error !\"\n            if not cycle.is_isomorphic(graphs.CycleGraph(cycle.order())):\n                print \"Error !\"\n        error = False\n    except RuntimeError as exc:\n        error = True\n        if verbose:\n            print exc\n    return error\n\ndef runner(n=1000):\n    fail = 0\n    for i in xrange(n):\n        fail += example()\n    return fail\n\nrunner()\n```\ngives 20 or so failures.  Could you check your patches against this or a similar statistical diagnostic?",
    "created_at": "2010-10-05T21:49:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9925#issuecomment-91634",
    "user": "https://github.com/qed777"
}
```

<div id="comment:26" align="right">Comment 26</div>

I don't have time to apply the patches, but without them, the code:

```python
def example(verbose=False):
    try:
        g = graphs.RandomBipartite(10, 10, .5)
        g.is_even_hole_free() and not g.is_forest()
        if not g.is_forest():
            cycle = g.is_even_hole_free(certificate = True)
            if cycle.order() % 2 == 1:
                print "Error !"
            if not cycle.is_isomorphic(graphs.CycleGraph(cycle.order())):
                print "Error !"
        error = False
    except RuntimeError as exc:
        error = True
        if verbose:
            print exc
    return error

def runner(n=1000):
    fail = 0
    for i in xrange(n):
        fail += example()
    return fail

runner()
```
gives 20 or so failures.  Could you check your patches against this or a similar statistical diagnostic?



---

archive/issue_comments_091635.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\nYou could also try, e.g.,\n\n```sh\nenv SAGE_TEST_ITER=100 ./sage -tp -long devel/sage/sage/graphs/graph.py \n```\non various files.  I believe this will \"break\" on the first failure in a file.  There's also `SAGE_TEST_GLOBAL_ITER`.  For this, I recommend capturing the output in a file and checking later for failures.  Note: `sage -tp` uses these variables, but `sage -t` does not.",
    "created_at": "2010-10-05T22:08:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9925#issuecomment-91635",
    "user": "https://github.com/qed777"
}
```

<div id="comment:27" align="right">Comment 27</div>

You could also try, e.g.,

```sh
env SAGE_TEST_ITER=100 ./sage -tp -long devel/sage/sage/graphs/graph.py 
```
on various files.  I believe this will "break" on the first failure in a file.  There's also `SAGE_TEST_GLOBAL_ITER`.  For this, I recommend capturing the output in a file and checking later for failures.  Note: `sage -tp` uses these variables, but `sage -t` does not.



---

archive/issue_comments_091636.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nI've opened #10081 as a 4.6 blocker for the problem in [comment 20](#comment%3A20).",
    "created_at": "2010-10-06T04:28:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9925#issuecomment-91636",
    "user": "https://github.com/qed777"
}
```

<div id="comment:28" align="right">Comment 28</div>

I've opened #10081 as a 4.6 blocker for the problem in [comment 20](#comment%3A20).



---

archive/issue_comments_091637.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nWell, as you had taken the time to write this testing function, I tested it against the patches (with n = 10 000, as I was working on a sheet of paper at the same time and did not mind forgetting it for several minutes `:-D`) :\n\nWith #9422 applied :\n\n```python\nsage: runner(10000)\n0\n```\n\nWith no patch applied, but with \n\n```python\ng = graphs.RandomBipartite(10, 10, .5)\n```\nreplaced by \n\n```python\ng = Graph(graphs.RandomBipartite(10, 10, .5))\n```\n\nin your code (which is exactly what the docstring in #10067 does) :\n\n```python\nsage: runner(10000)\n0\n```\n\nBe sure that this is not just a statistical proof : #9422 \"disconnects\" the call to the ``is_subgraph`` command, so there is really no path left leading to this exception from BipartiteGraph !\n\nNathann\n\nP.S. : Thank you for this ``#!python`` trick ! Very nice `;-)`",
    "created_at": "2010-10-06T12:25:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9925",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9925#issuecomment-91637",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:29" align="right">Comment 29</div>

Well, as you had taken the time to write this testing function, I tested it against the patches (with n = 10 000, as I was working on a sheet of paper at the same time and did not mind forgetting it for several minutes `:-D`) :

With #9422 applied :

```python
sage: runner(10000)
0
```

With no patch applied, but with 

```python
g = graphs.RandomBipartite(10, 10, .5)
```
replaced by 

```python
g = Graph(graphs.RandomBipartite(10, 10, .5))
```

in your code (which is exactly what the docstring in #10067 does) :

```python
sage: runner(10000)
0
```

Be sure that this is not just a statistical proof : #9422 "disconnects" the call to the ``is_subgraph`` command, so there is really no path left leading to this exception from BipartiteGraph !

Nathann

P.S. : Thank you for this ``#!python`` trick ! Very nice `;-)`
