# Issue 9908: maxima sum returns hypergeometric function

archive/issues_009907.json:
```json
{
    "assignees": [
        "https://github.com/burcin"
    ],
    "body": "The parsing of Maxima's output is not good enough to handle this:\n\n```\nvar('n')\nsum(((2*I)^n/(n^3+1)*(1/4)^n), n, 0, infinity)\n```\ngives an exception\n\n```\nTypeError: unable to make sense of Maxima expression 'f[4,3]([1,1,-(sqrt(3)*I+1)/2,(sqrt(3)*I-1)/2],[2,-(sqrt(3)*I-1)/2,(sqrt(3)*I+1)/2],I/2)' in Sage\n```\nwhich is - i think - a f_43 hypergeometric function.\n\nCC:  @eviatarbach\n\nKeywords: **hypergeometric**\n\nReviewer: **Karl-Dieter Crisman, Ralf Stephan**\n\nComponent: **symbolics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/9908_\n\n",
    "closed_at": "2014-07-08T22:53:22Z",
    "created_at": "2010-09-14T10:31:28Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
        "https://github.com/sagemath/sage/labels/duplicate"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "maxima sum returns hypergeometric function",
    "type": "issue",
    "updated_at": "2014-07-08T22:53:22Z",
    "url": "https://github.com/sagemath/sage/issues/9908",
    "user": "https://github.com/haraldschilly"
}
```
The parsing of Maxima's output is not good enough to handle this:

```
var('n')
sum(((2*I)^n/(n^3+1)*(1/4)^n), n, 0, infinity)
```
gives an exception

```
TypeError: unable to make sense of Maxima expression 'f[4,3]([1,1,-(sqrt(3)*I+1)/2,(sqrt(3)*I-1)/2],[2,-(sqrt(3)*I-1)/2,(sqrt(3)*I+1)/2],I/2)' in Sage
```
which is - i think - a f_43 hypergeometric function.

CC:  @eviatarbach

Keywords: **hypergeometric**

Reviewer: **Karl-Dieter Crisman, Ralf Stephan**

Component: **symbolics**

_Issue created by migration from https://trac.sagemath.org/ticket/9908_





---

archive/issue_events_128815.json:
```json
{
    "actor": "https://github.com/haraldschilly",
    "created_at": "2010-09-14T10:31:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/9908",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9908#event-128815"
}
```



---

archive/issue_events_128816.json:
```json
{
    "actor": "https://github.com/haraldschilly",
    "created_at": "2010-09-14T10:31:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9908",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
    "label_color": "0000ff",
    "label_name": "c: symbolics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9908#event-128816"
}
```



---

archive/issue_events_128817.json:
```json
{
    "actor": "https://github.com/haraldschilly",
    "created_at": "2010-09-14T10:31:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9908",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9908#event-128817"
}
```



---

archive/issue_events_128818.json:
```json
{
    "actor": "https://github.com/haraldschilly",
    "created_at": "2010-09-14T10:31:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9908",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9908#event-128818"
}
```



---

archive/issue_events_128819.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2010-09-14T10:31:28Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/9908",
    "subject": "https://github.com/haraldschilly",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9908#event-128819"
}
```



---

archive/issue_comments_089426.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\none additional example by omologos on irc:\n\n```\nvar('x n')\nf=(-1)^n/((2*n+1)*factorial(2n+1))\nsum(f,n,0,oo)\n```\nbut i get this error:\n\n```\nTypeError: unable to make sense of Maxima expression 'f[1,2]([1/2],[3/2,3/2],-1/4)' in Sage\n```",
    "created_at": "2010-09-18T11:47:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9908#issuecomment-89426",
    "user": "https://github.com/haraldschilly"
}
```

<div id="comment:1" align="right">comment:1</div>

one additional example by omologos on irc:

```
var('x n')
f=(-1)^n/((2*n+1)*factorial(2n+1))
sum(f,n,0,oo)
```
but i get this error:

```
TypeError: unable to make sense of Maxima expression 'f[1,2]([1/2],[3/2,3/2],-1/4)' in Sage
```



---

archive/issue_comments_089427.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nThis should be \n\n```\nvar('x n')\nf=(-1)^n/((2*n+1)*factorial(2*n+1))\nsum(f,n,0,oo)\n```\nIf I'm not mistaken, this might be related to #2516, in the sense that we should be parsing hypergeometric functions correctly and that would be part of that ticket.",
    "created_at": "2011-02-17T01:51:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9908#issuecomment-89427",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:2" align="right">comment:2</div>

This should be 

```
var('x n')
f=(-1)^n/((2*n+1)*factorial(2*n+1))
sum(f,n,0,oo)
```
If I'm not mistaken, this might be related to #2516, in the sense that we should be parsing hypergeometric functions correctly and that would be part of that ticket.



---

archive/issue_comments_089428.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nThis also causes a similar problem in #4102:\n\n```\nsage: f = bessel_J(2, x)\nsage: f.integrate(x)\nTraceback (most recent call last):\n...\nTypeError: cannot coerce arguments: no canonical coercion from <type 'list'> to Symbolic Ring\n```\n\nIn that case, Maxima is returning `hypergeometric([3/2],[5/2,3],-x^2/4)`.",
    "created_at": "2013-06-17T21:01:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9908#issuecomment-89428",
    "user": "https://github.com/eviatarbach"
}
```

<div id="comment:4" align="right">comment:4</div>

This also causes a similar problem in #4102:

```
sage: f = bessel_J(2, x)
sage: f.integrate(x)
Traceback (most recent call last):
...
TypeError: cannot coerce arguments: no canonical coercion from <type 'list'> to Symbolic Ring
```

In that case, Maxima is returning `hypergeometric([3/2],[5/2,3],-x^2/4)`.



---

archive/issue_events_128820.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/9908",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9908#event-128820"
}
```



---

archive/issue_events_128821.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/9908",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9908#event-128821"
}
```



---

archive/issue_comments_089429.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nSee also http://ask.sagemath.org/question/3091 for another example.",
    "created_at": "2013-10-17T01:01:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9908#issuecomment-89429",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:6" align="right">comment:6</div>

See also http://ask.sagemath.org/question/3091 for another example.



---

archive/issue_events_128822.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/9908",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9908#event-128822"
}
```



---

archive/issue_events_128823.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/9908",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9908#event-128823"
}
```



---

archive/issue_comments_089430.json:
```json
{
    "body": "Changed keywords from none to **hypergeometric**",
    "created_at": "2014-03-06T17:07:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9908#issuecomment-89430",
    "user": "https://github.com/fchapoton"
}
```

Changed keywords from none to **hypergeometric**



---

archive/issue_comments_089431.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nAnd see [this sage-support thread](https://groups.google.com/forum/#!topic/sage-support/IgC78rcdO7c) for possibly another example.",
    "created_at": "2014-04-24T01:15:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9908#issuecomment-89431",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:9" align="right">comment:9</div>

And see [this sage-support thread](https://groups.google.com/forum/#!topic/sage-support/IgC78rcdO7c) for possibly another example.



---

archive/issue_events_128824.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/9908",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9908#event-128824"
}
```



---

archive/issue_events_128825.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/9908",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9908#event-128825"
}
```



---

archive/issue_comments_089432.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\n#2516 has all the examples above in it, with the exception of the ones mentioned in the comments.\n* One would want to be able to do\n\n```\nb=var('b')\nintegral(1/(x^b+1),x)\n```\n  without using W|A; apparently `1/(a^b+1)` would yield `2F1(1,1/a,1+1/a,-a^x)`.\n* Apparently \n\n```\nsum(x^(3*k)/factorial(2*k),k,0,oo)\n```\n  would also be doable with hypergeometrics.",
    "created_at": "2014-07-08T15:21:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9908#issuecomment-89432",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:11" align="right">comment:11</div>

#2516 has all the examples above in it, with the exception of the ones mentioned in the comments.
* One would want to be able to do

```
b=var('b')
integral(1/(x^b+1),x)
```
  without using W|A; apparently `1/(a^b+1)` would yield `2F1(1,1/a,1+1/a,-a^x)`.
* Apparently 

```
sum(x^(3*k)/factorial(2*k),k,0,oo)
```
  would also be doable with hypergeometrics.



---

archive/issue_comments_089433.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@kcrisman](#comment:11):\n> #2516 has all the examples above in it, with the exception of the ones mentioned in the comments.\n\nWhat I get with #2516 is\n\n```\nsage: integral(1/(x^b+1),x)\nintegrate(1/(x^b + 1), x)\nsage: sum(x^(3*k)/factorial(2*k),k,0,oo)\nsqrt(pi)*x^(3/4)*sqrt(1/(pi*x^(3/2)))*cosh(x^(3/2))\n```",
    "created_at": "2014-07-08T15:54:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9908#issuecomment-89433",
    "user": "https://github.com/rwst"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@kcrisman](#comment:11):
> #2516 has all the examples above in it, with the exception of the ones mentioned in the comments.

What I get with #2516 is

```
sage: integral(1/(x^b+1),x)
integrate(1/(x^b + 1), x)
sage: sum(x^(3*k)/factorial(2*k),k,0,oo)
sqrt(pi)*x^(3/4)*sqrt(1/(pi*x^(3/2)))*cosh(x^(3/2))
```



---

archive/issue_comments_089434.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\n> What I get with #2516 is\n> \n> ```\n> sage: integral(1/(x^b+1),x)\n> integrate(1/(x^b + 1), x)\n> ```\n\nNot really worth keeping open, as even Maxima does this.\n> \n> ```\n> sage: sum(x^(3*k)/factorial(2*k),k,0,oo)\n> sqrt(pi)*x^(3/4)*sqrt(1/(pi*x^(3/2)))*cosh(x^(3/2))\n> ```\n\nInterestingly, this works in vanilla Sage as well.  Maybe there weren't any hg functions to begin with there.  I assume it was fixed with #16224 - earlier it gave yet another (wrong) answer.\n\nSo I nominate to close this ticket.",
    "created_at": "2014-07-08T16:09:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9908#issuecomment-89434",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:13" align="right">comment:13</div>

> What I get with #2516 is
> 
> ```
> sage: integral(1/(x^b+1),x)
> integrate(1/(x^b + 1), x)
> ```

Not really worth keeping open, as even Maxima does this.
> 
> ```
> sage: sum(x^(3*k)/factorial(2*k),k,0,oo)
> sqrt(pi)*x^(3/4)*sqrt(1/(pi*x^(3/2)))*cosh(x^(3/2))
> ```

Interestingly, this works in vanilla Sage as well.  Maybe there weren't any hg functions to begin with there.  I assume it was fixed with #16224 - earlier it gave yet another (wrong) answer.

So I nominate to close this ticket.



---

archive/issue_comments_089435.json:
```json
{
    "body": "Reviewer: **Karl-Dieter Crisman, Ralf Stephan**",
    "created_at": "2014-07-08T16:09:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9908#issuecomment-89435",
    "user": "https://github.com/kcrisman"
}
```

Reviewer: **Karl-Dieter Crisman, Ralf Stephan**



---

archive/issue_events_128826.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2014-07-08T16:09:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9908",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9908#event-128826"
}
```



---

archive/issue_events_128827.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2014-07-08T16:13:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9908",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9908#event-128827"
}
```



---

archive/issue_events_128828.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2014-07-08T16:13:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9908",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9908#event-128828"
}
```



---

archive/issue_comments_089436.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\n> > \n> > ```\n> > sage: sum(x^(3*k)/factorial(2*k),k,0,oo)\n> > sqrt(pi)*x^(3/4)*sqrt(1/(pi*x^(3/2)))*cosh(x^(3/2))\n> > ```\n\n> Interestingly, this works in vanilla Sage as well.  Maybe there weren't any hg functions to begin with there.  I assume it was fixed with #16224 - earlier it gave yet another (wrong) answer.\n\nEven more interestingly, this is not as simple as just `cosh(x^(3/2))` (which is correct) but I'm not going to repurpose this one for that.",
    "created_at": "2014-07-08T16:13:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9908#issuecomment-89436",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:14" align="right">comment:14</div>

> > 
> > ```
> > sage: sum(x^(3*k)/factorial(2*k),k,0,oo)
> > sqrt(pi)*x^(3/4)*sqrt(1/(pi*x^(3/2)))*cosh(x^(3/2))
> > ```

> Interestingly, this works in vanilla Sage as well.  Maybe there weren't any hg functions to begin with there.  I assume it was fixed with #16224 - earlier it gave yet another (wrong) answer.

Even more interestingly, this is not as simple as just `cosh(x^(3/2))` (which is correct) but I'm not going to repurpose this one for that.



---

archive/issue_comments_089437.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nPractically a duplicate of #2516",
    "created_at": "2014-07-08T16:15:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9908#issuecomment-89437",
    "user": "https://github.com/rwst"
}
```

<div id="comment:15" align="right">comment:15</div>

Practically a duplicate of #2516



---

archive/issue_events_128829.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-07-08T16:15:42Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/9908",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9908#event-128829"
}
```



---

archive/issue_events_128830.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-07-08T16:15:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9908",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9908#event-128830"
}
```



---

archive/issue_events_128831.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-07-08T16:15:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9908",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9908#event-128831"
}
```



---

archive/issue_events_128832.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-08T22:53:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9908",
    "label": "https://github.com/sagemath/sage/labels/duplicate",
    "label_color": "a6a6a6",
    "label_name": "duplicate",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9908#event-128832"
}
```



---

archive/issue_events_128833.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-08T22:53:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9908",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9908#event-128833"
}
```



---

archive/issue_events_128834.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-08T22:53:22Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/9908",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9908#event-128834"
}
```
