# Issue 9594: Spring layout for graphs is currently random across platforms: mark the doctest accordingly

archive/issues_009594.json:
```json
{
    "body": "On 32-bit systems, we get the following doctest error in Sage 4.5.2.alpha0:\n\n```sh\n$ ./sage -t devel/sage/sage/graphs/generic_graph.py\n...\n    sage: G.get_pos()\nExpected:\n    {0: [1.17..., -0.855...],\n     1: [1.81..., -0.0990...],\n     2: [1.35..., 0.184...],\n     3: [1.51..., 0.644...],\n     4: [2.00..., -0.507...],\n     5: [0.597..., -0.236...],\n     6: [2.04..., 0.687...],\n     7: [1.46..., -0.473...],\n     8: [0.902..., 0.773...],\n     9: [2.48..., -0.119...]}\nGot:\n    {0: [1.1644236010005358, -0.83686858657215979], 1: [1.7943839700815074, -0.066920666682206337], 2: [1.2689961125613971,\n0.14359096356381118], 3: [1.511860539628787, 0.59162048325984706], 4:\n[1.9941403734258905, -0.53845815492480542], 5: [0.59110867097474395,\n-0.2204272806589378], 6: [2.0144421480067041, 0.70158250822163282], 7:\n[1.4603696336476519, -0.46717593533332896], 8: [0.90427280509063312,\n0.79073173670301911], 9: [2.4603584159299983, -0.097675067576871527]}\n...\n```\n\n(See #9593 for making spring layout reproducible.)\n\nAssignee: jason, ncohen, rlm\n\nCC:  @dandrake @qed777 @rbeezer @haraldschilly @JohnCremona\n\nResolution: fixed\n\nAuthor: Leif Leonhardy\n\nReviewer: John Palmieri\n\nMerged: sage-4.5.2.alpha1\n\nIssue created by migration from https://trac.sagemath.org/ticket/9594\n\n",
    "closed_at": "2010-07-26T01:21:49Z",
    "created_at": "2010-07-24T23:12:42Z",
    "labels": [
        "component: graph theory",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.5.2",
    "title": "Spring layout for graphs is currently random across platforms: mark the doctest accordingly",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/9594",
    "user": "https://github.com/nexttime"
}
```
On 32-bit systems, we get the following doctest error in Sage 4.5.2.alpha0:

```sh
$ ./sage -t devel/sage/sage/graphs/generic_graph.py
...
    sage: G.get_pos()
Expected:
    {0: [1.17..., -0.855...],
     1: [1.81..., -0.0990...],
     2: [1.35..., 0.184...],
     3: [1.51..., 0.644...],
     4: [2.00..., -0.507...],
     5: [0.597..., -0.236...],
     6: [2.04..., 0.687...],
     7: [1.46..., -0.473...],
     8: [0.902..., 0.773...],
     9: [2.48..., -0.119...]}
Got:
    {0: [1.1644236010005358, -0.83686858657215979], 1: [1.7943839700815074, -0.066920666682206337], 2: [1.2689961125613971,
0.14359096356381118], 3: [1.511860539628787, 0.59162048325984706], 4:
[1.9941403734258905, -0.53845815492480542], 5: [0.59110867097474395,
-0.2204272806589378], 6: [2.0144421480067041, 0.70158250822163282], 7:
[1.4603696336476519, -0.46717593533332896], 8: [0.90427280509063312,
0.79073173670301911], 9: [2.4603584159299983, -0.097675067576871527]}
...
```

(See #9593 for making spring layout reproducible.)

Assignee: jason, ncohen, rlm

CC:  @dandrake @qed777 @rbeezer @haraldschilly @JohnCremona

Resolution: fixed

Author: Leif Leonhardy

Reviewer: John Palmieri

Merged: sage-4.5.2.alpha1

Issue created by migration from https://trac.sagemath.org/ticket/9594





---

archive/issue_comments_096611.json:
```json
{
    "body": "<a id='comment:1'></a>See also [this comment at #9584](http://trac.sagemath.org/sage_trac/ticket/9584#comment:1); the doctest error reported there is now split off into this ticket.",
    "created_at": "2010-07-24T23:16:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9594#issuecomment-96611",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:1'></a>See also [this comment at #9584](http://trac.sagemath.org/sage_trac/ticket/9584#comment:1); the doctest error reported there is now split off into this ticket.



---

archive/issue_comments_096612.json:
```json
{
    "body": "Just adds a random tag to the failing doctest.",
    "created_at": "2010-07-25T08:31:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9594#issuecomment-96612",
    "user": "https://github.com/nexttime"
}
```

Just adds a random tag to the failing doctest.



---

archive/issue_comments_096613.json:
```json
{
    "body": "<a id='comment:2'></a>Attachment [trac_9594-mark_spring_layout_doctest_random.patch](tarball://root/attachments/some-uuid/ticket9594/trac_9594-mark_spring_layout_doctest_random.patch) by @nexttime created at 2010-07-25 08:39:12\n\nI cannot *really* test this myself, because `generic_graph.py` does still not terminate on my 32-bit system, and on 64-bit it wasn't an issue...\n\n(At least the patch doesn't introduce new failures. ;-) )\n\nPlease review s.t. this can be merged into 4.5.2.alpha1.",
    "created_at": "2010-07-25T08:39:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9594#issuecomment-96613",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:2'></a>Attachment [trac_9594-mark_spring_layout_doctest_random.patch](tarball://root/attachments/some-uuid/ticket9594/trac_9594-mark_spring_layout_doctest_random.patch) by @nexttime created at 2010-07-25 08:39:12

I cannot *really* test this myself, because `generic_graph.py` does still not terminate on my 32-bit system, and on 64-bit it wasn't an issue...

(At least the patch doesn't introduce new failures. ;-) )

Please review s.t. this can be merged into 4.5.2.alpha1.



---

archive/issue_comments_096614.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2010-07-25T08:39:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9594#issuecomment-96614",
    "user": "https://github.com/nexttime"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_096615.json:
```json
{
    "body": "<a id='comment:3'></a>are these the positions of the petersen graph? the odd thing is this is tested [at line 1565 much more unspecific](http://sagemath.org/doc/reference/sage/graphs/generic_graph.html#sage.graphs.generic_graph.GenericGraph.get_pos).\n\nI would also suggest to introduce some [iterations=some max val ](http://sagemath.org/doc/reference/sage/graphs/generic_graph.html#sage.graphs.generic_graph.GenericGraph.plot) at those plots that do not stop when doing layout.",
    "created_at": "2010-07-25T09:16:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9594#issuecomment-96615",
    "user": "https://github.com/haraldschilly"
}
```

<a id='comment:3'></a>are these the positions of the petersen graph? the odd thing is this is tested [at line 1565 much more unspecific](http://sagemath.org/doc/reference/sage/graphs/generic_graph.html#sage.graphs.generic_graph.GenericGraph.get_pos).

I would also suggest to introduce some [iterations=some max val ](http://sagemath.org/doc/reference/sage/graphs/generic_graph.html#sage.graphs.generic_graph.GenericGraph.plot) at those plots that do not stop when doing layout.



---

archive/issue_comments_096616.json:
```json
{
    "body": "<a id='comment:4'></a>Replying to [comment:2 leif]:\n> I cannot *really* test this myself, because `generic_graph.py` does still not terminate on my 32-bit system, and on 64-bit it wasn't an issue...\n\n\nI've reduced the problem size of the previously not terminating doctest and with the patch here applied now all doctests pass on the 32-bit system, too.",
    "created_at": "2010-07-25T09:58:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9594#issuecomment-96616",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:4'></a>Replying to [comment:2 leif]:
> I cannot *really* test this myself, because `generic_graph.py` does still not terminate on my 32-bit system, and on 64-bit it wasn't an issue...


I've reduced the problem size of the previously not terminating doctest and with the patch here applied now all doctests pass on the 32-bit system, too.



---

archive/issue_comments_096617.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2010-07-25T15:27:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9594#issuecomment-96617",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_096618.json:
```json
{
    "body": "<a id='comment:5'></a>With the possible patch at #9584 so that doctests actually terminate, this passes on the skynet machines cleo and iras.  Should the comment also mention this ticket (both #9583 and #9584)?  If you think so, replace the current patch, no need for another review.\n\nPositive review, in any case.",
    "created_at": "2010-07-25T15:27:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9594#issuecomment-96618",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:5'></a>With the possible patch at #9584 so that doctests actually terminate, this passes on the skynet machines cleo and iras.  Should the comment also mention this ticket (both #9583 and #9584)?  If you think so, replace the current patch, no need for another review.

Positive review, in any case.



---

archive/issue_comments_096619.json:
```json
{
    "body": "<a id='comment:6'></a>> (both #9583 and #9584)\n\n\nSorry, I meant \"both #9593 and #9594\".",
    "created_at": "2010-07-25T19:54:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9594#issuecomment-96619",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:6'></a>> (both #9583 and #9584)


Sorry, I meant "both #9593 and #9594".



---

archive/issue_comments_096620.json:
```json
{
    "body": "<a id='comment:7'></a>Replying to [comment:6 jhpalmieri]:\n> > (both #9583 and #9584)\n\n> \n> Sorry, I meant \"both #9593 and #9594\".\n\n\nObviously... ;-)\n\nI simply forgot to add the \"backlink\" at #9593, which should fix the problem in the long run (so I mentioned only that ticket in the patch's comment; with both, the line had gotten to long).",
    "created_at": "2010-07-25T20:02:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9594#issuecomment-96620",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:7'></a>Replying to [comment:6 jhpalmieri]:
> > (both #9583 and #9584)

> 
> Sorry, I meant "both #9593 and #9594".


Obviously... ;-)

I simply forgot to add the "backlink" at #9593, which should fix the problem in the long run (so I mentioned only that ticket in the patch's comment; with both, the line had gotten to long).



---

archive/issue_events_023895.json:
```json
{
    "actor": "https://github.com/dandrake",
    "created_at": "2010-07-26T01:21:49Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/9594",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9594#event-23895"
}
```



---

archive/issue_comments_096621.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2010-07-26T01:21:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9594#issuecomment-96621",
    "user": "https://github.com/dandrake"
}
```

Resolution: fixed
