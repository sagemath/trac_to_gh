# Issue 9437: special linear group over finite rings

archive/issues_009437.json:
```json
{
    "body": "Sage is not able to work with special linear group over finite rings (for example iterate over its element). As in the following example, the constructor accept the argument Zmod(4). But the object is not able to do anything due to call to finite field in gap. Curiously, list(G) and G.list() does not raise the same error (but both of them do).\n\n```\nsage: G = SL(2, Zmod(4))\nsage: print G\nsage: list(G)\nTypeError                                 Traceback (most recent call last)\n...\nTypeError: variable names have not yet been set using self._assign_names(...)\nerror coercing to finite field\nsage: G.list()\nNameError                                 Traceback (most recent call last)\nNameError: name 'ZmodnZObj' is not defined\n```\n\n**Assignee:** @aghitza\n\n**CC:**  @videlec\n\n**Keywords:** group, matrix, special linear\n\n**Author:** David Loeffler\n\n**Reviewer:** John Cremona\n\n**Merged:** sage-4.6.2.alpha3\n\nIssue created by migration from https://trac.sagemath.org/ticket/9437\n\n",
    "closed_at": "2011-01-28T08:48:31Z",
    "created_at": "2010-07-06T15:24:59Z",
    "labels": [
        "component: algebra",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.6.2",
    "title": "special linear group over finite rings",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/9437",
    "user": "https://github.com/videlec"
}
```
Sage is not able to work with special linear group over finite rings (for example iterate over its element). As in the following example, the constructor accept the argument Zmod(4). But the object is not able to do anything due to call to finite field in gap. Curiously, list(G) and G.list() does not raise the same error (but both of them do).

```
sage: G = SL(2, Zmod(4))
sage: print G
sage: list(G)
TypeError                                 Traceback (most recent call last)
...
TypeError: variable names have not yet been set using self._assign_names(...)
error coercing to finite field
sage: G.list()
NameError                                 Traceback (most recent call last)
NameError: name 'ZmodnZObj' is not defined
```

**Assignee:** @aghitza

**CC:**  @videlec

**Keywords:** group, matrix, special linear

**Author:** David Loeffler

**Reviewer:** John Cremona

**Merged:** sage-4.6.2.alpha3

Issue created by migration from https://trac.sagemath.org/ticket/9437





---

archive/attachments_012051.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_9437_matrix_group_finite_ring.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket9437/trac_9437_matrix_group_finite_ring.patch",
    "created_at": "2010-09-23T13:28:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9437",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/loefflerd"
}
```



---

archive/issue_comments_084577.json:
```json
{
    "body": "patch against 4.6.alpha1",
    "created_at": "2010-09-23T13:28:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9437#issuecomment-84577",
    "user": "https://github.com/loefflerd"
}
```

patch against 4.6.alpha1



---

archive/issue_comments_084578.json:
```json
{
    "body": "**Author:** David Loeffler",
    "created_at": "2010-09-23T13:46:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9437#issuecomment-84578",
    "user": "https://github.com/loefflerd"
}
```

**Author:** David Loeffler



---

archive/issue_comments_084579.json:
```json
{
    "body": "<a id='comment:1'></a>\nFor a matrix group G, the two commands `list(G)` and `G.list()` are totally different implementations; the former uses Gap to calculate the generators of G, and does the rest in Sage, while the latter just asks Gap for the list. The former works since #8970. The patch above fixes the latter, and adds doctests to prove that they both work.\n\nIt is, of course, really dumb that we have two independent implementations, but that's a job for another ticket.",
    "created_at": "2010-09-23T13:46:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9437#issuecomment-84579",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:1'></a>
For a matrix group G, the two commands `list(G)` and `G.list()` are totally different implementations; the former uses Gap to calculate the generators of G, and does the rest in Sage, while the latter just asks Gap for the list. The former works since #8970. The patch above fixes the latter, and adds doctests to prove that they both work.

It is, of course, really dumb that we have two independent implementations, but that's a job for another ticket.



---

archive/issue_events_071054.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2010-09-23T13:46:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9437",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9437#event-71054"
}
```



---

archive/issue_events_071055.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2010-09-23T13:46:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9437",
    "milestone": "sage-4.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9437#event-71055"
}
```



---

archive/issue_comments_084580.json:
```json
{
    "body": "<a id='comment:2'></a>\nWith 4.6.rc0 the patch applies and works fine.  But look at these timings:\n\n```\nsage: G = SL(2, Zmod(4))\nsage: time a = list(G)  \nCPU times: user 0.05 s, sys: 0.01 s, total: 0.06 s\nWall time: 1.69 s\nsage: time b = G.list() \nCPU times: user 0.07 s, sys: 0.00 s, total: 0.07 s\nWall time: 20.60 s\n```\n\nI'm not letting that stop me giving the patch a positive review, but it suggest that the list() method should be calling whatever the other one uses!\n\nTesting the directory matrix_gps, the file which this patch changes now takes a very long time:\n\n```\nsage -t  \"sage/groups/matrix_gps/matrix_group.py\"           \n\t [263.9 s]\n```\nwhereas without the patch:\n\n```\n[240.1s]\n```\nIs the extra time just the time of the new doctest (if so, mark it #long time), or are some other doctests now slower?",
    "created_at": "2010-10-28T19:42:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9437#issuecomment-84580",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:2'></a>
With 4.6.rc0 the patch applies and works fine.  But look at these timings:

```
sage: G = SL(2, Zmod(4))
sage: time a = list(G)  
CPU times: user 0.05 s, sys: 0.01 s, total: 0.06 s
Wall time: 1.69 s
sage: time b = G.list() 
CPU times: user 0.07 s, sys: 0.00 s, total: 0.07 s
Wall time: 20.60 s
```

I'm not letting that stop me giving the patch a positive review, but it suggest that the list() method should be calling whatever the other one uses!

Testing the directory matrix_gps, the file which this patch changes now takes a very long time:

```
sage -t  "sage/groups/matrix_gps/matrix_group.py"           
	 [263.9 s]
```
whereas without the patch:

```
[240.1s]
```
Is the extra time just the time of the new doctest (if so, mark it #long time), or are some other doctests now slower?



---

archive/issue_events_071056.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2010-10-28T19:42:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9437",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9437#event-71056"
}
```



---

archive/issue_events_071057.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2010-10-28T19:42:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9437",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9437#event-71057"
}
```



---

archive/issue_comments_084581.json:
```json
{
    "body": "**Reviewer:** John Cremona",
    "created_at": "2010-10-28T19:42:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9437#issuecomment-84581",
    "user": "https://github.com/JohnCremona"
}
```

**Reviewer:** John Cremona



---

archive/issue_comments_084582.json:
```json
{
    "body": "<a id='comment:3'></a>\nI just remembered this ticket, which I'd forgotten about completely...\n\nCan I propose that we have another ticket for dealing with the discrepancy between the two \"list\" methods? It's somewhat independent of the problem with non-finite-field base rings -- even if `G = SL(3, 17)` then `G.list()` and `list(G)` are using completely independent implementations -- so it's a preexisting problem. Hence I'm putting this back to \"needs review\".",
    "created_at": "2011-01-23T10:36:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9437#issuecomment-84582",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:3'></a>
I just remembered this ticket, which I'd forgotten about completely...

Can I propose that we have another ticket for dealing with the discrepancy between the two "list" methods? It's somewhat independent of the problem with non-finite-field base rings -- even if `G = SL(3, 17)` then `G.list()` and `list(G)` are using completely independent implementations -- so it's a preexisting problem. Hence I'm putting this back to "needs review".



---

archive/issue_events_071058.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2011-01-23T10:36:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9437",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9437#event-71058"
}
```



---

archive/issue_events_071059.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2011-01-23T10:36:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9437",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9437#event-71059"
}
```



---

archive/issue_comments_084583.json:
```json
{
    "body": "<a id='comment:4'></a>\nIn fact there is already a ticket for the discrepancy of the \"list\" methods: #8588.",
    "created_at": "2011-01-24T09:27:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9437#issuecomment-84583",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:4'></a>
In fact there is already a ticket for the discrepancy of the "list" methods: #8588.



---

archive/issue_comments_084584.json:
```json
{
    "body": "<a id='comment:5'></a>\nI've done a test and the before/after timings for testing `matrix_group.py` (on selmer.warwick.ac.uk using 4.6.2.alpha1) are 25.9 s and 27.0 s. I think that's acceptable without flagging anything as #long.",
    "created_at": "2011-01-24T09:52:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9437#issuecomment-84584",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:5'></a>
I've done a test and the before/after timings for testing `matrix_group.py` (on selmer.warwick.ac.uk using 4.6.2.alpha1) are 25.9 s and 27.0 s. I think that's acceptable without flagging anything as #long.



---

archive/issue_events_071060.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2011-01-24T14:22:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9437",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9437#event-71060"
}
```



---

archive/issue_events_071061.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2011-01-24T14:22:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9437",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9437#event-71061"
}
```



---

archive/issue_comments_084585.json:
```json
{
    "body": "<a id='comment:6'></a>\nOK, and I checked that it still works fine with 4.6.2.alpha1.",
    "created_at": "2011-01-24T14:22:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9437#issuecomment-84585",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:6'></a>
OK, and I checked that it still works fine with 4.6.2.alpha1.



---

archive/issue_events_071062.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-01-27T14:34:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9437",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9437#event-71062"
}
```



---

archive/issue_events_071063.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-01-27T14:34:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9437",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9437#event-71063"
}
```



---

archive/issue_comments_084586.json:
```json
{
    "body": "<a id='comment:7'></a>\nThis patch conflicts with #10515.  So could you please rebase this patch so that it applies on top of #10515?",
    "created_at": "2011-01-27T14:34:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9437#issuecomment-84586",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'></a>
This patch conflicts with #10515.  So could you please rebase this patch so that it applies on top of #10515?



---

archive/issue_comments_084587.json:
```json
{
    "body": "rebased version",
    "created_at": "2011-01-27T15:23:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9437#issuecomment-84587",
    "user": "https://github.com/loefflerd"
}
```

rebased version



---

archive/attachments_012052.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_9437_matrix_group_finite_ring-rebase.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket9437/trac_9437_matrix_group_finite_ring-rebase.patch",
    "created_at": "2011-01-27T15:24:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9437",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/loefflerd"
}
```



---

archive/issue_comments_084588.json:
```json
{
    "body": "<a id='comment:8'></a>\nDone. There's no change in the actual code of the patch, just variable names and diff context, so I'm reinstating the positive review.",
    "created_at": "2011-01-27T15:24:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9437#issuecomment-84588",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:8'></a>
Done. There's no change in the actual code of the patch, just variable names and diff context, so I'm reinstating the positive review.



---

archive/issue_events_071064.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2011-01-27T15:24:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9437",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9437#event-71064"
}
```



---

archive/issue_events_071065.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2011-01-27T15:24:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9437",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9437#event-71065"
}
```



---

archive/issue_comments_084589.json:
```json
{
    "body": "**Merged:** sage-4.6.2.alpha3",
    "created_at": "2011-01-28T08:48:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9437#issuecomment-84589",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-4.6.2.alpha3



---

archive/issue_events_071066.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-01-28T08:48:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9437",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9437#event-71066"
}
```



---

archive/issue_events_071067.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-01-28T08:48:31Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/9437",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9437#event-71067"
}
```
