# Issue 9322: long time in simon_two_descent for elliptic curves

archive/issues_009322.json:
```json
{
    "body": "[See #15608 for a list of open simon_two_descent tickets]\n\n[NB This is a different problem from the one on #5153]\n\nChris Wuthrich reports:\n\n```\nsage: K.<w> = NumberField(x^2-x-232)\nsage: E = EllipticCurve([2-w,18+3*w,209+9*w,2581+175*w,852-55*w])\nsage: E.local_data()\n[]\nsage: E.simon_two_descent(verbose=2)\n```\nThis takes about 2.5 minutes with Sage 4.7.1 on a 1.6Ghz Core 2 Duo.\n\nThe same example runs fine in gp using the same version of the script ell.gp that Sage has (in version 4.4.4) and the same version of gp.\n\nDepends on #11005\n\nDepends on #15483\n\nDepends on #16009\n\nDepends on #16011\n\n**Assignee:** @aghitza\n\n**CC:**  @categorie jeremywest\n\n**Keywords:** simon_two_descent ecc2011\n\n**Branch/Commit:** [ecd28b4f5ba2bff231807a512170a6e02e2a32aa](https://github.com/sagemath/sagetrac-mirror/commit/ecd28b4f5ba2bff231807a512170a6e02e2a32aa)\n\n**Reviewer:** Peter Bruin\n\n**Author:** Marc Masdeu\n\nIssue created by migration from https://trac.sagemath.org/ticket/9322\n\n",
    "closed_at": "2014-03-31T14:57:12Z",
    "created_at": "2010-06-24T03:00:39Z",
    "labels": [
        "component: elliptic curves",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.2",
    "title": "long time in simon_two_descent for elliptic curves",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/9322",
    "user": "https://github.com/JohnCremona"
}
```
[See #15608 for a list of open simon_two_descent tickets]

[NB This is a different problem from the one on #5153]

Chris Wuthrich reports:

```
sage: K.<w> = NumberField(x^2-x-232)
sage: E = EllipticCurve([2-w,18+3*w,209+9*w,2581+175*w,852-55*w])
sage: E.local_data()
[]
sage: E.simon_two_descent(verbose=2)
```
This takes about 2.5 minutes with Sage 4.7.1 on a 1.6Ghz Core 2 Duo.

The same example runs fine in gp using the same version of the script ell.gp that Sage has (in version 4.4.4) and the same version of gp.

Depends on #11005

Depends on #15483

Depends on #16009

Depends on #16011

**Assignee:** @aghitza

**CC:**  @categorie jeremywest

**Keywords:** simon_two_descent ecc2011

**Branch/Commit:** [ecd28b4f5ba2bff231807a512170a6e02e2a32aa](https://github.com/sagemath/sagetrac-mirror/commit/ecd28b4f5ba2bff231807a512170a6e02e2a32aa)

**Reviewer:** Peter Bruin

**Author:** Marc Masdeu

Issue created by migration from https://trac.sagemath.org/ticket/9322





---

archive/issue_comments_080578.json:
```json
{
    "body": "<a id='comment:1'></a>\n\n```\n\njohn@ubuntu%sage -gp\n                  GP/PARI CALCULATOR Version 2.3.5 (released)\n...\n\n? bnf=bnfinit(y^2-y-232);\n? w=Mod(y,y^2-y-232)\n%8 = Mod(y, y^2 - y - 232)\n? e=ellinit([2-w,18+3*w,209+9*w,2581+175*w,852-55*w]);\n? bnfellrank(bnf,e)\ncourbe elliptique : Y^2 = x^3 + Mod(9*y + 308, y^2 - y - 232)*x^2 + Mod(1200*y + 27936, y^2 - y - 232)*x + Mod(57968*y + 1054096, y^2 - y - 232)\npoints triviaux sur la courbe = [[1, 1, 0]]\n#S(E/K)[2]    = 4\n#E(K)/2E(K)  >= 1\n#III(E/K)[2] <= 4\nrang(E/K)    >= 0\nlistpointsmwr = []\n%10 = [0, 2, []]\n```",
    "created_at": "2010-06-24T03:02:59Z",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9322#issuecomment-80578",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:1'></a>

```

john@ubuntu%sage -gp
                  GP/PARI CALCULATOR Version 2.3.5 (released)
...

? bnf=bnfinit(y^2-y-232);
? w=Mod(y,y^2-y-232)
%8 = Mod(y, y^2 - y - 232)
? e=ellinit([2-w,18+3*w,209+9*w,2581+175*w,852-55*w]);
? bnfellrank(bnf,e)
courbe elliptique : Y^2 = x^3 + Mod(9*y + 308, y^2 - y - 232)*x^2 + Mod(1200*y + 27936, y^2 - y - 232)*x + Mod(57968*y + 1054096, y^2 - y - 232)
points triviaux sur la courbe = [[1, 1, 0]]
#S(E/K)[2]    = 4
#E(K)/2E(K)  >= 1
#III(E/K)[2] <= 4
rang(E/K)    >= 0
listpointsmwr = []
%10 = [0, 2, []]
```



---

archive/issue_events_068132.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jeremywest",
    "created_at": "2010-07-01T06:32:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9322#event-68132"
}
```



---

archive/issue_comments_080579.json:
```json
{
    "body": "<a id='comment:2'></a>\nI also noticed this same problem, although it seems to be nearly ubiquitous for number fields. I found it for several quadratic and cubic extensions as well as for a degree seven extension. For one I got an index out of bounds error which I believe originates because gp does not hand back the results expected by the sage script. For the rest I found that the sage script was attempting to coerce a point from one curve to another and it reports that the point does not lie on the curve.\n\nUnfortunately, I don't currently have access to sage so I am unable to report line numbers. The problem occurs in sage/schemes/elliptic_curves/gp_simon.py near the bottom of the only function defined.",
    "created_at": "2010-07-01T06:32:20Z",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9322#issuecomment-80579",
    "user": "https://trac.sagemath.org/admin/accounts/users/jeremywest"
}
```

<a id='comment:2'></a>
I also noticed this same problem, although it seems to be nearly ubiquitous for number fields. I found it for several quadratic and cubic extensions as well as for a degree seven extension. For one I got an index out of bounds error which I believe originates because gp does not hand back the results expected by the sage script. For the rest I found that the sage script was attempting to coerce a point from one curve to another and it reports that the point does not lie on the curve.

Unfortunately, I don't currently have access to sage so I am unable to report line numbers. The problem occurs in sage/schemes/elliptic_curves/gp_simon.py near the bottom of the only function defined.



---

archive/issue_events_068133.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jeremywest",
    "created_at": "2010-07-01T06:32:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "milestone": "sage-4.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9322#event-68133"
}
```



---

archive/issue_events_068134.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jeremywest",
    "created_at": "2010-07-01T06:32:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "label": "component: algebra",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9322#event-68134"
}
```



---

archive/issue_events_068135.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jeremywest",
    "created_at": "2010-07-01T06:32:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "label": "component: elliptic curves",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9322#event-68135"
}
```



---

archive/issue_comments_080580.json:
```json
{
    "body": "**Upstream:** Not yet reported upstream; Will do shortly.",
    "created_at": "2011-03-25T04:47:29Z",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9322#issuecomment-80580",
    "user": "https://github.com/JohnCremona"
}
```

**Upstream:** Not yet reported upstream; Will do shortly.



---

archive/issue_comments_080581.json:
```json
{
    "body": "<a id='comment:3'></a>\nWith 4.7.alpha1 this works fine:\n\n```\nsage: K.<w> = NumberField(x^2-x-232)                                   \nsage: E = EllipticCurve([2-w,18+3*w,209+9*w,2581+175*w,852-55*w])      \nsage: E.local_data()                                                   \n[]\nsage: E.simon_two_descent()                                      \n(0, 2, [])\n```\nbut after #11005 (which updates to a newer version of Simon's GP scripts) we run into an infinite loop:\n\n```\n **** Warning: doubling the real precision in nfsign_s **** 76\n **** Warning: doubling the real precision in nfsign_s **** 152\n **** Warning: doubling the real precision in nfsign_s **** 76\n **** Warning: doubling the real precision in nfsign_s **** 152\n **** Warning: doubling the real precision in nfsign_s **** 76\n```\nwhich I will test on a stand-alone gp and report upstream.",
    "created_at": "2011-03-25T04:47:29Z",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9322#issuecomment-80581",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:3'></a>
With 4.7.alpha1 this works fine:

```
sage: K.<w> = NumberField(x^2-x-232)                                   
sage: E = EllipticCurve([2-w,18+3*w,209+9*w,2581+175*w,852-55*w])      
sage: E.local_data()                                                   
[]
sage: E.simon_two_descent()                                      
(0, 2, [])
```
but after #11005 (which updates to a newer version of Simon's GP scripts) we run into an infinite loop:

```
 **** Warning: doubling the real precision in nfsign_s **** 76
 **** Warning: doubling the real precision in nfsign_s **** 152
 **** Warning: doubling the real precision in nfsign_s **** 76
 **** Warning: doubling the real precision in nfsign_s **** 152
 **** Warning: doubling the real precision in nfsign_s **** 76
```
which I will test on a stand-alone gp and report upstream.



---

archive/issue_comments_080582.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"Simon\".",
    "created_at": "2011-03-25T04:47:29Z",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9322#issuecomment-80582",
    "user": "https://github.com/JohnCremona"
}
```

**Changing keywords** from "" to "Simon".



---

archive/issue_events_068136.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2011-03-25T04:47:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9322#event-68136"
}
```



---

archive/issue_events_068137.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2011-03-25T04:47:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9322#event-68137"
}
```



---

archive/issue_events_068138.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2011-03-25T04:54:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9322#event-68138"
}
```



---

archive/issue_events_068139.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2011-03-25T04:54:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9322#event-68139"
}
```



---

archive/issue_comments_080583.json:
```json
{
    "body": "<a id='comment:4'></a>\nRunning under gp directly:\n\n```\n? K = bnfinit(y^2 - y - 232);\n? a = Mod(y,K.pol);\n? bnfellrank(K, [-a + 2,3*a + 18,9*a + 209,175*a + 2581,-55*a + 852])\ncourbe elliptique : Y^2 = x^3 + Mod(9*y + 308, y^2 - y - 232)*x^2 + Mod(1200*y + 27936, y^2 - y - 232)*x + Mod(57968*y + 1054096, y^2 - y - 232)\npoints triviaux sur la courbe = [[1, 1, 0]]\n#S(E/K)[2]    = 4\n#E(K)/2E(K)  >= 2\n#III(E/K)[2] <= 2\nrang(E/K)    >= 1\n III devrait etre un carre, donc \n#E(K)/2E(K)  = 4\n#III(E/K)[2] = 1\nrang(E/K)    = 2\nlistpointsmwr = [[Mod(-35/4*y - 186, y^2 - y - 232), Mod(-21/8*y - 37, y^2 - y - 232)]]\n%71 = [2, 2, [[Mod(-35/16*y - 93/2, y^2 - y - 232), Mod(-1727/64*y - 2531/8, y^2 - y - 232)]]]\n```\nwe get instant success.  Also with the gp2c-compiled version.  So it is *not* an upstream problem,and one which should be solvable within Sage.",
    "created_at": "2011-03-25T04:54:02Z",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9322#issuecomment-80583",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:4'></a>
Running under gp directly:

```
? K = bnfinit(y^2 - y - 232);
? a = Mod(y,K.pol);
? bnfellrank(K, [-a + 2,3*a + 18,9*a + 209,175*a + 2581,-55*a + 852])
courbe elliptique : Y^2 = x^3 + Mod(9*y + 308, y^2 - y - 232)*x^2 + Mod(1200*y + 27936, y^2 - y - 232)*x + Mod(57968*y + 1054096, y^2 - y - 232)
points triviaux sur la courbe = [[1, 1, 0]]
#S(E/K)[2]    = 4
#E(K)/2E(K)  >= 2
#III(E/K)[2] <= 2
rang(E/K)    >= 1
 III devrait etre un carre, donc 
#E(K)/2E(K)  = 4
#III(E/K)[2] = 1
rang(E/K)    = 2
listpointsmwr = [[Mod(-35/4*y - 186, y^2 - y - 232), Mod(-21/8*y - 37, y^2 - y - 232)]]
%71 = [2, 2, [[Mod(-35/16*y - 93/2, y^2 - y - 232), Mod(-1727/64*y - 2531/8, y^2 - y - 232)]]]
```
we get instant success.  Also with the gp2c-compiled version.  So it is *not* an upstream problem,and one which should be solvable within Sage.



---

archive/issue_comments_080584.json:
```json
{
    "body": "**Changing upstream** from \"Not yet reported upstream; Will do shortly.\" to \"\".",
    "created_at": "2011-03-25T04:54:02Z",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9322#issuecomment-80584",
    "user": "https://github.com/JohnCremona"
}
```

**Changing upstream** from "Not yet reported upstream; Will do shortly." to "".



---

archive/issue_comments_080585.json:
```json
{
    "body": "<a id='comment:5'></a>\nI've been struggling with that bug for a few hours, and have made only little progress.\nWith Sage 4.7.1 and Pari 2.4.3 (development), I've noticed that Pari 2.4.3 and the version of Pari within Sage differ at `bbnf = bnfinit(rnfeq[1],1)` in `ell.gp`, where\n`rnfep[1] = x^6 + 625*x^5 + 135916*x^4 + 14984560*x^3 + 914453072*x^2 + 29502178560*x + 392635160576`.\n\nPari 2.4.3 returns `bbnf: [Mat(2), Mat([0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, ...` whereas\nPari within Sage returns `bbnf: [Mat(2), Mat([0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, ...`\n\nHowever I don't know if `bnfinit` should be deterministic...\n\nPaul",
    "created_at": "2011-09-14T15:59:09Z",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9322#issuecomment-80585",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:5'></a>
I've been struggling with that bug for a few hours, and have made only little progress.
With Sage 4.7.1 and Pari 2.4.3 (development), I've noticed that Pari 2.4.3 and the version of Pari within Sage differ at `bbnf = bnfinit(rnfeq[1],1)` in `ell.gp`, where
`rnfep[1] = x^6 + 625*x^5 + 135916*x^4 + 14984560*x^3 + 914453072*x^2 + 29502178560*x + 392635160576`.

Pari 2.4.3 returns `bbnf: [Mat(2), Mat([0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, ...` whereas
Pari within Sage returns `bbnf: [Mat(2), Mat([0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, ...`

However I don't know if `bnfinit` should be deterministic...

Paul



---

archive/issue_comments_080586.json:
```json
{
    "body": "<a id='comment:6'></a>\nis there a way to get the output of the print commands from the ell.gp script\nwhen it is called from within Sage? Even with a large value of DEBUGLEVEL_ell, the output\nof those print statements does not appear in the Sage session, thus it is difficult to debug.\n\nPaul",
    "created_at": "2011-09-15T15:25:59Z",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9322#issuecomment-80586",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:6'></a>
is there a way to get the output of the print commands from the ell.gp script
when it is called from within Sage? Even with a large value of DEBUGLEVEL_ell, the output
of those print statements does not appear in the Sage session, thus it is difficult to debug.

Paul



---

archive/issue_comments_080587.json:
```json
{
    "body": "<a id='comment:7'></a>\nReplying to [zimmerma](#comment%3A6):\n> is there a way to get the output of the print commands from the ell.gp script\n> when it is called from within Sage? Even with a large value of DEBUGLEVEL_ell, the output\n> of those print statements does not appear in the Sage session, thus it is difficult to debug.\n> \n> Paul\n\nYou can get a whole gp session logged to a file by setting gp=Gp(logfile=foobar.txt').  But the code in gp-simon.py creates its own gp instance without using the logfile option.  In the short term, edit line 38 of sage/sage/schemes/elliptic_curves/gp-simon.py to add the logfile option.  A better long-term solution would be to have a logfile parameter to the two-descent function itself and pass that on.\n\nBy the way, there are new version of Simon's scripts which in Sage Days in March (6 months ago!) I got working in a better way, using gp2c to convert to C code.  There was some reason which I now cannot remember why there was a delay in getting this merged, and after 6 months I fear that the patches we made then would no longer work.  Damn.  Anyway, I strongly suggest if you have problem cases that you run the curves directly through ell.gp (outside Sage) using the newest version of ell.gp from Simon's web page, since you may be seeing a problem which has already been fixed.",
    "created_at": "2011-09-15T15:50:57Z",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9322#issuecomment-80587",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:7'></a>
Replying to [zimmerma](#comment%3A6):
> is there a way to get the output of the print commands from the ell.gp script
> when it is called from within Sage? Even with a large value of DEBUGLEVEL_ell, the output
> of those print statements does not appear in the Sage session, thus it is difficult to debug.
> 
> Paul

You can get a whole gp session logged to a file by setting gp=Gp(logfile=foobar.txt').  But the code in gp-simon.py creates its own gp instance without using the logfile option.  In the short term, edit line 38 of sage/sage/schemes/elliptic_curves/gp-simon.py to add the logfile option.  A better long-term solution would be to have a logfile parameter to the two-descent function itself and pass that on.

By the way, there are new version of Simon's scripts which in Sage Days in March (6 months ago!) I got working in a better way, using gp2c to convert to C code.  There was some reason which I now cannot remember why there was a delay in getting this merged, and after 6 months I fear that the patches we made then would no longer work.  Damn.  Anyway, I strongly suggest if you have problem cases that you run the curves directly through ell.gp (outside Sage) using the newest version of ell.gp from Simon's web page, since you may be seeing a problem which has already been fixed.



---

archive/issue_comments_080588.json:
```json
{
    "body": "<a id='comment:8'></a>\nthank you John for your advice. After trying it, I figured out that with Sage 4.7.1 on my laptop\nin fact the example in the description actually works, but takes about 2.5 minutes, during which\ntop reports that the gp process takes 100% of the cpu time, while evaluating the command\n\n```\nans=bnfellrank(K, [-a + 2,3*a + 18,9*a + 209,175*a + 2581,-55*a + 852]);;\n```\nCan someone else confirm? Maybe a problem in the Sage-gp interface?\nWhat should we do with that ticket?\n\nPaul",
    "created_at": "2011-09-16T10:18:42Z",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9322#issuecomment-80588",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:8'></a>
thank you John for your advice. After trying it, I figured out that with Sage 4.7.1 on my laptop
in fact the example in the description actually works, but takes about 2.5 minutes, during which
top reports that the gp process takes 100% of the cpu time, while evaluating the command

```
ans=bnfellrank(K, [-a + 2,3*a + 18,9*a + 209,175*a + 2581,-55*a + 852]);;
```
Can someone else confirm? Maybe a problem in the Sage-gp interface?
What should we do with that ticket?

Paul



---

archive/issue_events_068140.json:
```json
{
    "actor": "https://github.com/zimmermann6",
    "created_at": "2011-09-16T10:18:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9322#event-68140"
}
```



---

archive/issue_events_068141.json:
```json
{
    "actor": "https://github.com/zimmermann6",
    "created_at": "2011-09-16T10:18:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9322#event-68141"
}
```



---

archive/issue_events_068142.json:
```json
{
    "actor": "https://github.com/zimmermann6",
    "created_at": "2011-09-16T10:18:42Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "rename": {
        "from": "bug in simon_two_descent for elliptic curves",
        "to": "long time in simon_two_descent for elliptic curves"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9322#event-68142"
}
```



---

archive/issue_comments_080589.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-[NB This is a different bug from the one on #5153]\n+[NB This is a different problem from the one on #5153]\n \n Chris Wuthrich reports:\n \n@@ -8,7 +8,7 @@\n sage: E.local_data()\n []\n sage: E.simon_two_descent(verbose=2)\n-booom.\n ```\n+This takes about 2.5 minutes with Sage 4.7.1 on a 1.6Ghz Core 2 Duo.\n \n The same example runs fine in gp using the same version of the script ell.gp that Sage has (in version 4.4.4) and the same version of gp.\n``````\n",
    "created_at": "2011-09-16T10:18:42Z",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9322#issuecomment-80589",
    "user": "https://github.com/zimmermann6"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-[NB This is a different bug from the one on #5153]
+[NB This is a different problem from the one on #5153]
 
 Chris Wuthrich reports:
 
@@ -8,7 +8,7 @@
 sage: E.local_data()
 []
 sage: E.simon_two_descent(verbose=2)
-booom.
 ```
+This takes about 2.5 minutes with Sage 4.7.1 on a 1.6Ghz Core 2 Duo.
 
 The same example runs fine in gp using the same version of the script ell.gp that Sage has (in version 4.4.4) and the same version of gp.
``````




---

archive/issue_comments_080590.json:
```json
{
    "body": "**Changing keywords** from \"Simon\" to \"Simon ecc2011\".",
    "created_at": "2011-09-16T14:56:50Z",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9322#issuecomment-80590",
    "user": "https://github.com/zimmermann6"
}
```

**Changing keywords** from "Simon" to "Simon ecc2011".



---

archive/issue_comments_080591.json:
```json
{
    "body": "<a id='comment:9'></a>\nok, I found where the problem comes from. In the file `ellQ.gp` which is also loaded by the\n`gp_simon.py` file, the global constants `LIM1, LIM3, LIMTRIV` have different values than\nin `ell.gp`, respectively 5, 50, 50 instead of 2, 4, 2.\n\nThe slow behaviour can be reproduced with `sage -gp` if one reads both `ell.gp`\n*and* `ellQ.gp`. If one only reads `ell.gp`, it is fast. Apparently `ellQ.gp` is not\nneeded for this computation.\n\nMoreover the default values in Sage are again different: 5, 50, 10.\n\nWith 5, 5, 10 it takes only 1.45s (wall clock time) on my laptop.\nWith 5, 10, 10 it takes 2.19s.\nWith 5, 20, 10 it takes 11.63s.\n\nNote that those values should be modified both in `ell_number_field.py` and in\n`gp_simon.py` (the former function is critical in this example).\n\nOne should also share the default values for `lim1, lim3, limtriv` between the\n`simon_two_descent` functions in `ell_number_field.py` and `gp_simon.py`.\n\nPaul",
    "created_at": "2011-09-16T14:56:50Z",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9322#issuecomment-80591",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:9'></a>
ok, I found where the problem comes from. In the file `ellQ.gp` which is also loaded by the
`gp_simon.py` file, the global constants `LIM1, LIM3, LIMTRIV` have different values than
in `ell.gp`, respectively 5, 50, 50 instead of 2, 4, 2.

The slow behaviour can be reproduced with `sage -gp` if one reads both `ell.gp`
*and* `ellQ.gp`. If one only reads `ell.gp`, it is fast. Apparently `ellQ.gp` is not
needed for this computation.

Moreover the default values in Sage are again different: 5, 50, 10.

With 5, 5, 10 it takes only 1.45s (wall clock time) on my laptop.
With 5, 10, 10 it takes 2.19s.
With 5, 20, 10 it takes 11.63s.

Note that those values should be modified both in `ell_number_field.py` and in
`gp_simon.py` (the former function is critical in this example).

One should also share the default values for `lim1, lim3, limtriv` between the
`simon_two_descent` functions in `ell_number_field.py` and `gp_simon.py`.

Paul



---

archive/issue_comments_080592.json:
```json
{
    "body": "<a id='comment:10'></a>\nIn the other ticket on this we changed Simon's scripts so that the use of these \"environment variables\" for passing configuration parameters was replaced by actual parameters to the functions (with default values).  So this problem should go away then.  We also persuaded Simon not to have the same function name for different functions in his various script files (he even had the same name for two different an incompatible versions of functions to do the same thing!).",
    "created_at": "2011-09-26T09:14:10Z",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9322#issuecomment-80592",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:10'></a>
In the other ticket on this we changed Simon's scripts so that the use of these "environment variables" for passing configuration parameters was replaced by actual parameters to the functions (with default values).  So this problem should go away then.  We also persuaded Simon not to have the same function name for different functions in his various script files (he even had the same name for two different an incompatible versions of functions to do the same thing!).



---

archive/issue_events_068143.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "milestone": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9322#event-68143"
}
```



---

archive/issue_events_068144.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9322#event-68144"
}
```



---

archive/issue_comments_080593.json:
```json
{
    "body": "**Changing keywords** from \"Simon ecc2011\" to \"simon_two_descent ecc2011\".",
    "created_at": "2013-09-21T12:28:36Z",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9322#issuecomment-80593",
    "user": "https://github.com/fchapoton"
}
```

**Changing keywords** from "Simon ecc2011" to "simon_two_descent ecc2011".



---

archive/issue_comments_080594.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n+[See #15608 for a list of open simon_two_descent tickets]\n+\n [NB This is a different problem from the one on #5153]\n \n Chris Wuthrich reports:\n``````\n",
    "created_at": "2013-12-30T16:03:53Z",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9322#issuecomment-80594",
    "user": "https://github.com/JohnCremona"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
+[See #15608 for a list of open simon_two_descent tickets]
+
 [NB This is a different problem from the one on #5153]
 
 Chris Wuthrich reports:
``````




---

archive/issue_events_068145.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "milestone": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9322#event-68145"
}
```



---

archive/issue_events_068146.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9322#event-68146"
}
```



---

archive/issue_comments_080595.json:
```json
{
    "body": "**Dependencies:** #11005, #15483",
    "created_at": "2014-02-11T20:00:49Z",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9322#issuecomment-80595",
    "user": "https://github.com/pjbruin"
}
```

**Dependencies:** #11005, #15483



---

archive/issue_comments_080596.json:
```json
{
    "body": "<a id='comment:15'></a>\nAfter applying #11005 (upgrade Simon's script to the latest version), rather than running for a long time, this example now gives an error similar to #15483:\n\n```\nsage: K.<w> = NumberField(x^2-x-232)\nsage: E = EllipticCurve([2-w,18+3*w,209+9*w,2581+175*w,852-55*w])\nsage: E.local_data()\n[]\nsage: E.simon_two_descent()\nTraceback (most recent call last):\n...\nRuntimeError: \n  ***   at top-level: ans=bnfellrank(K,[-a+2,3\n  ***                     ^--------------------\n  ***   in function bnfellrank: ...eqtheta,rnfeq,bbnf];rang=\n  ***   bnfell2descent_gen(b\n  ***   ^--------------------\n  ***   in function bnfell2descent_gen: ...und,r=nfsqrt(nf,norm(zc))\n  ***   [1];if(DEBUGLEVEL_el\n  ***   ^--------------------\n  ***   array index (1) out of allowed range [none].\nAn error occurred while running Simon's 2-descent program\n```\nWith the fix I just made at #15483, it again gives the correct result, but after a long time.",
    "created_at": "2014-02-11T20:00:49Z",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9322#issuecomment-80596",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:15'></a>
After applying #11005 (upgrade Simon's script to the latest version), rather than running for a long time, this example now gives an error similar to #15483:

```
sage: K.<w> = NumberField(x^2-x-232)
sage: E = EllipticCurve([2-w,18+3*w,209+9*w,2581+175*w,852-55*w])
sage: E.local_data()
[]
sage: E.simon_two_descent()
Traceback (most recent call last):
...
RuntimeError: 
  ***   at top-level: ans=bnfellrank(K,[-a+2,3
  ***                     ^--------------------
  ***   in function bnfellrank: ...eqtheta,rnfeq,bbnf];rang=
  ***   bnfell2descent_gen(b
  ***   ^--------------------
  ***   in function bnfell2descent_gen: ...und,r=nfsqrt(nf,norm(zc))
  ***   [1];if(DEBUGLEVEL_el
  ***   ^--------------------
  ***   array index (1) out of allowed range [none].
An error occurred while running Simon's 2-descent program
```
With the fix I just made at #15483, it again gives the correct result, but after a long time.



---

archive/issue_comments_080597.json:
```json
{
    "body": "<a id='comment:16'></a>\nIn principle it is not a bug if Sage uses different default values than Simon's script for the various parameters (`lim1`, `lim3`, `limtriv` and the more technical `maxprob` and `limbigprime`).  The defaults should be sensible, of course.  I guess we should find out if there is a good reason to use different defaults, and if so, what settings would be reasonable.",
    "created_at": "2014-02-12T16:55:29Z",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9322#issuecomment-80597",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:16'></a>
In principle it is not a bug if Sage uses different default values than Simon's script for the various parameters (`lim1`, `lim3`, `limtriv` and the more technical `maxprob` and `limbigprime`).  The defaults should be sensible, of course.  I guess we should find out if there is a good reason to use different defaults, and if so, what settings would be reasonable.



---

archive/issue_comments_080598.json:
```json
{
    "body": "<a id='comment:17'></a>\nIs there a good reason to not use the default values that pari is using? What is troubling is that an example that runs fast in pari does take forever in Sage. So I would put the defaults to None, and then pass different defaults when the curve is over QQ or over a number field (according to DS's scripts).\n\nOne exception to this: the parameter `limbigprime` should be set to 0, to avoid the use of probabilistic (and thus not provably true) prime testing.",
    "created_at": "2014-03-25T18:14:59Z",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9322#issuecomment-80598",
    "user": "https://github.com/mmasdeu"
}
```

<a id='comment:17'></a>
Is there a good reason to not use the default values that pari is using? What is troubling is that an example that runs fast in pari does take forever in Sage. So I would put the defaults to None, and then pass different defaults when the curve is over QQ or over a number field (according to DS's scripts).

One exception to this: the parameter `limbigprime` should be set to 0, to avoid the use of probabilistic (and thus not provably true) prime testing.



---

archive/issue_comments_080599.json:
```json
{
    "body": "<a id='comment:18'></a>\nReplying to [mmasdeu](#comment%3A17):\n> So I would put the defaults to None, and then pass different defaults when the curve is over QQ or over a number field (according to DS's scripts).\n> \n> One exception to this: the parameter `limbigprime` should be set to 0, to avoid the use of probabilistic (and thus not provably true) prime testing.\n\nAgree with all of this.",
    "created_at": "2014-03-25T19:41:15Z",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9322#issuecomment-80599",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:18'></a>
Replying to [mmasdeu](#comment%3A17):
> So I would put the defaults to None, and then pass different defaults when the curve is over QQ or over a number field (according to DS's scripts).
> 
> One exception to this: the parameter `limbigprime` should be set to 0, to avoid the use of probabilistic (and thus not provably true) prime testing.

Agree with all of this.



---

archive/issue_comments_080600.json:
```json
{
    "body": "**Commit:** [b2b66c54b8fd220e976c9d5ddcaeb6eec8ba7ff8](https://github.com/sagemath/sagetrac-mirror/commit/b2b66c54b8fd220e976c9d5ddcaeb6eec8ba7ff8)",
    "created_at": "2014-03-26T13:35:53Z",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9322#issuecomment-80600",
    "user": "https://github.com/mmasdeu"
}
```

**Commit:** [b2b66c54b8fd220e976c9d5ddcaeb6eec8ba7ff8](https://github.com/sagemath/sagetrac-mirror/commit/b2b66c54b8fd220e976c9d5ddcaeb6eec8ba7ff8)



---

archive/issue_comments_080601.json:
```json
{
    "body": "<a id='comment:19'></a>\nI have implemented the above suggestions. However, it seems that the using limbigprime=0 raises errors (I found them when using gp directly) and so I have currently set it to 30 (DS's default).\n\nWhen simon_two_descent() is called with default arguments, the infinite-order points change (this is expected). I have checked that the answer is still correct (in particular, the rank bounds are the same), and changed the doctests (which affected four files in total).\n\nNow the doctests pass for everything in the schemes/elliptic_curves folder, but I haven't run all the others.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1dcdf8d4bccae3f38dac98381f7d36d77ebcf3ba\">1dcdf8d</a></td><td><code>Allow for relative number fields to be passed to two_descent function.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/78bb89440da1703040facaa58b8995010b3f804e\">78bb894</a></td><td><code>Fixed a doctest.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2085e0c096a1a18a15d8dbcdde06627749b90542\">2085e0c</a></td><td><code>Added some comments.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6a54aa459703a03350952ae22cedd8d3f190ce73\">6a54aa4</a></td><td><code>Fixed indentation problem in doctest.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/522aa2f9b87a59d22acc1cb8a2ab66dec808fab5\">522aa2f</a></td><td><code>Found an example for the doctest that takes much less to terminate (about 4s).</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b2b66c54b8fd220e976c9d5ddcaeb6eec8ba7ff8\">b2b66c5</a></td><td><code>Fixed calls to simon's two descent to use his own defaults (by default).</code></td></tr></table>\n",
    "created_at": "2014-03-26T13:35:53Z",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9322#issuecomment-80601",
    "user": "https://github.com/mmasdeu"
}
```

<a id='comment:19'></a>
I have implemented the above suggestions. However, it seems that the using limbigprime=0 raises errors (I found them when using gp directly) and so I have currently set it to 30 (DS's default).

When simon_two_descent() is called with default arguments, the infinite-order points change (this is expected). I have checked that the answer is still correct (in particular, the rank bounds are the same), and changed the doctests (which affected four files in total).

Now the doctests pass for everything in the schemes/elliptic_curves folder, but I haven't run all the others.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1dcdf8d4bccae3f38dac98381f7d36d77ebcf3ba">1dcdf8d</a></td><td><code>Allow for relative number fields to be passed to two_descent function.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/78bb89440da1703040facaa58b8995010b3f804e">78bb894</a></td><td><code>Fixed a doctest.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2085e0c096a1a18a15d8dbcdde06627749b90542">2085e0c</a></td><td><code>Added some comments.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6a54aa459703a03350952ae22cedd8d3f190ce73">6a54aa4</a></td><td><code>Fixed indentation problem in doctest.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/522aa2f9b87a59d22acc1cb8a2ab66dec808fab5">522aa2f</a></td><td><code>Found an example for the doctest that takes much less to terminate (about 4s).</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b2b66c54b8fd220e976c9d5ddcaeb6eec8ba7ff8">b2b66c5</a></td><td><code>Fixed calls to simon's two descent to use his own defaults (by default).</code></td></tr></table>




---

archive/issue_comments_080602.json:
```json
{
    "body": "**Branch:** [u/mmasdeu/9322-defaults-for-two-descent](https://github.com/sagemath/sagetrac-mirror/tree/u/mmasdeu/9322-defaults-for-two-descent)",
    "created_at": "2014-03-26T13:35:53Z",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9322#issuecomment-80602",
    "user": "https://github.com/mmasdeu"
}
```

**Branch:** [u/mmasdeu/9322-defaults-for-two-descent](https://github.com/sagemath/sagetrac-mirror/tree/u/mmasdeu/9322-defaults-for-two-descent)



---

archive/issue_events_068147.json:
```json
{
    "actor": "https://github.com/mmasdeu",
    "created_at": "2014-03-26T13:35:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9322#event-68147"
}
```



---

archive/issue_events_068148.json:
```json
{
    "actor": "https://github.com/mmasdeu",
    "created_at": "2014-03-26T13:35:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9322#event-68148"
}
```



---

archive/issue_events_068149.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-03-26T14:15:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9322#event-68149"
}
```



---

archive/issue_events_068150.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-03-26T14:15:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9322#event-68150"
}
```



---

archive/issue_comments_080603.json:
```json
{
    "body": "**Changing branch** from \"[u/mmasdeu/9322-defaults-for-two-descent](https://github.com/sagemath/sagetrac-mirror/tree/u/mmasdeu/9322-defaults-for-two-descent)\" to \"[u/pbruin/9322-simon_two_descent_defaults](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/9322-simon_two_descent_defaults)\".",
    "created_at": "2014-03-26T14:15:29Z",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9322#issuecomment-80603",
    "user": "https://github.com/pjbruin"
}
```

**Changing branch** from "[u/mmasdeu/9322-defaults-for-two-descent](https://github.com/sagemath/sagetrac-mirror/tree/u/mmasdeu/9322-defaults-for-two-descent)" to "[u/pbruin/9322-simon_two_descent_defaults](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/9322-simon_two_descent_defaults)".



---

archive/issue_comments_080604.json:
```json
{
    "body": "<a id='comment:20'></a>\nMerged with development branch.  There are some doctest failures, one of which seems to be non-trivial (reported rank changing from 1 to 0).",
    "created_at": "2014-03-26T14:15:29Z",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9322#issuecomment-80604",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:20'></a>
Merged with development branch.  There are some doctest failures, one of which seems to be non-trivial (reported rank changing from 1 to 0).



---

archive/issue_comments_080605.json:
```json
{
    "body": "**Changing commit** from \"[b2b66c54b8fd220e976c9d5ddcaeb6eec8ba7ff8](https://github.com/sagemath/sagetrac-mirror/commit/b2b66c54b8fd220e976c9d5ddcaeb6eec8ba7ff8)\" to \"[594de7b4cabd1359de0c33748e17dc9209f4b61b](https://github.com/sagemath/sagetrac-mirror/commit/594de7b4cabd1359de0c33748e17dc9209f4b61b)\".",
    "created_at": "2014-03-26T14:15:29Z",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9322#issuecomment-80605",
    "user": "https://github.com/pjbruin"
}
```

**Changing commit** from "[b2b66c54b8fd220e976c9d5ddcaeb6eec8ba7ff8](https://github.com/sagemath/sagetrac-mirror/commit/b2b66c54b8fd220e976c9d5ddcaeb6eec8ba7ff8)" to "[594de7b4cabd1359de0c33748e17dc9209f4b61b](https://github.com/sagemath/sagetrac-mirror/commit/594de7b4cabd1359de0c33748e17dc9209f4b61b)".



---

archive/issue_comments_080606.json:
```json
{
    "body": "**Changing dependencies** from \"#11005, #15483\" to \"#11005, #15483, #16009, #16011\".",
    "created_at": "2014-03-26T14:15:29Z",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9322#issuecomment-80606",
    "user": "https://github.com/pjbruin"
}
```

**Changing dependencies** from "#11005, #15483" to "#11005, #15483, #16009, #16011".



---

archive/issue_comments_080607.json:
```json
{
    "body": "<a id='comment:21'></a>\nThe failing example is the new doctest from #16009 in `gp_simon.py`; it now returns `(0, 0, [])`.\n\n```\nsage: F.<a> = QuadraticField(29)\nsage: x = QQ['x'].gen()\nsage: K.<b> = F.extension(x^2-1/2*a+1/2)\nsage: E = EllipticCurve(K,[1, 0, 5/2*a + 27/2, 0, 0])\nsage: E.simon_two_descent(lim1=2, limtriv=3)\n(1, 1, [((-369/50*a - 1987/50)*b + 539/50*a + 2897/50 : (-27193/250*a - 146439/250)*b + 39683/250*a + 213709/250 : 1)])\n```\nThis is reproducible inside `gp` (2.5.x) with the current version of Simon's script (as included in Sage since #11005):\n\n```\nK = bnfinit(y^4 + y^2 - 7);\na = Mod(y, K.pol);\nE = [1, 0, 5*a^2 + 16, 0, 0];\nLIM1 = 2;\nLIMTRIV = 3;\nbnfellrank(K, E)\n```\nThis returns `[0, 0, []]`.",
    "created_at": "2014-03-26T14:20:43Z",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9322#issuecomment-80607",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:21'></a>
The failing example is the new doctest from #16009 in `gp_simon.py`; it now returns `(0, 0, [])`.

```
sage: F.<a> = QuadraticField(29)
sage: x = QQ['x'].gen()
sage: K.<b> = F.extension(x^2-1/2*a+1/2)
sage: E = EllipticCurve(K,[1, 0, 5/2*a + 27/2, 0, 0])
sage: E.simon_two_descent(lim1=2, limtriv=3)
(1, 1, [((-369/50*a - 1987/50)*b + 539/50*a + 2897/50 : (-27193/250*a - 146439/250)*b + 39683/250*a + 213709/250 : 1)])
```
This is reproducible inside `gp` (2.5.x) with the current version of Simon's script (as included in Sage since #11005):

```
K = bnfinit(y^4 + y^2 - 7);
a = Mod(y, K.pol);
E = [1, 0, 5*a^2 + 16, 0, 0];
LIM1 = 2;
LIMTRIV = 3;
bnfellrank(K, E)
```
This returns `[0, 0, []]`.



---

archive/issue_comments_080608.json:
```json
{
    "body": "**Changing commit** from \"[594de7b4cabd1359de0c33748e17dc9209f4b61b](https://github.com/sagemath/sagetrac-mirror/commit/594de7b4cabd1359de0c33748e17dc9209f4b61b)\" to \"[4bdb5389e8b1a41ebfcf00a5c2561f0841113854](https://github.com/sagemath/sagetrac-mirror/commit/4bdb5389e8b1a41ebfcf00a5c2561f0841113854)\".",
    "created_at": "2014-03-27T14:19:20Z",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9322#issuecomment-80608",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[594de7b4cabd1359de0c33748e17dc9209f4b61b](https://github.com/sagemath/sagetrac-mirror/commit/594de7b4cabd1359de0c33748e17dc9209f4b61b)" to "[4bdb5389e8b1a41ebfcf00a5c2561f0841113854](https://github.com/sagemath/sagetrac-mirror/commit/4bdb5389e8b1a41ebfcf00a5c2561f0841113854)".



---

archive/issue_comments_080609.json:
```json
{
    "body": "<a id='comment:22'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/db790353ddf534dc32fced15afdadb54f96cce94\">db79035</a></td><td><code>Merge branch 'develop' into gp_simon_relative</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a92a80eb918e5f6de14269f04317a1b95b3a4b4b\">a92a80e</a></td><td><code>Changed the doctest to make it independent of variable output.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/275e4bef0c5027517163a50248cf417308d6bde7\">275e4be</a></td><td><code>fix a bug in Denis Simon's 2-descent program</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8bceb36e55fe51e86815f8432eec201d401595ea\">8bceb36</a></td><td><code>Merge branch 'u/pbruin/16022-simon_two_descent_bug' of trac.sagemath.org:sage into gp_simon_relative</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/962d338206fb9d7ace6b1367b24f12d97e53601a\">962d338</a></td><td><code>Merge branch 'ticket/16009-gp_simon_relative' into ticket/9322-simon_two_descent_defaults</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4bdb5389e8b1a41ebfcf00a5c2561f0841113854\">4bdb538</a></td><td><code>fix doctests in ell_number_field.py</code></td></tr></table>\n",
    "created_at": "2014-03-27T14:19:20Z",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9322#issuecomment-80609",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/db790353ddf534dc32fced15afdadb54f96cce94">db79035</a></td><td><code>Merge branch 'develop' into gp_simon_relative</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a92a80eb918e5f6de14269f04317a1b95b3a4b4b">a92a80e</a></td><td><code>Changed the doctest to make it independent of variable output.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/275e4bef0c5027517163a50248cf417308d6bde7">275e4be</a></td><td><code>fix a bug in Denis Simon's 2-descent program</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8bceb36e55fe51e86815f8432eec201d401595ea">8bceb36</a></td><td><code>Merge branch 'u/pbruin/16022-simon_two_descent_bug' of trac.sagemath.org:sage into gp_simon_relative</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/962d338206fb9d7ace6b1367b24f12d97e53601a">962d338</a></td><td><code>Merge branch 'ticket/16009-gp_simon_relative' into ticket/9322-simon_two_descent_defaults</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4bdb5389e8b1a41ebfcf00a5c2561f0841113854">4bdb538</a></td><td><code>fix doctests in ell_number_field.py</code></td></tr></table>




---

archive/issue_comments_080610.json:
```json
{
    "body": "<a id='comment:23'></a>\nMerged #16009 and indirectly #16022, and fixed the two remaining doctest failures.  No other unexpected things, so I think this can safely be regarded as a reviewer patch.",
    "created_at": "2014-03-27T14:22:36Z",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9322#issuecomment-80610",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:23'></a>
Merged #16009 and indirectly #16022, and fixed the two remaining doctest failures.  No other unexpected things, so I think this can safely be regarded as a reviewer patch.



---

archive/issue_comments_080611.json:
```json
{
    "body": "**Reviewer:** Peter Bruin",
    "created_at": "2014-03-27T14:22:36Z",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9322#issuecomment-80611",
    "user": "https://github.com/pjbruin"
}
```

**Reviewer:** Peter Bruin



---

archive/issue_events_068151.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-03-27T14:22:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9322#event-68151"
}
```



---

archive/issue_events_068152.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-03-27T14:22:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9322#event-68152"
}
```



---

archive/issue_comments_080612.json:
```json
{
    "body": "**Author:** Marc Masdeu",
    "created_at": "2014-03-27T14:28:46Z",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9322#issuecomment-80612",
    "user": "https://github.com/pjbruin"
}
```

**Author:** Marc Masdeu



---

archive/issue_comments_080613.json:
```json
{
    "body": "**Changing commit** from \"[4bdb5389e8b1a41ebfcf00a5c2561f0841113854](https://github.com/sagemath/sagetrac-mirror/commit/4bdb5389e8b1a41ebfcf00a5c2561f0841113854)\" to \"[41cbcdf3dddb39aa3093812faaea3062b2da9752](https://github.com/sagemath/sagetrac-mirror/commit/41cbcdf3dddb39aa3093812faaea3062b2da9752)\".",
    "created_at": "2014-03-28T18:43:18Z",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9322#issuecomment-80613",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[4bdb5389e8b1a41ebfcf00a5c2561f0841113854](https://github.com/sagemath/sagetrac-mirror/commit/4bdb5389e8b1a41ebfcf00a5c2561f0841113854)" to "[41cbcdf3dddb39aa3093812faaea3062b2da9752](https://github.com/sagemath/sagetrac-mirror/commit/41cbcdf3dddb39aa3093812faaea3062b2da9752)".



---

archive/issue_events_068153.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/git",
    "created_at": "2014-03-28T18:43:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9322#event-68153"
}
```



---

archive/issue_events_068154.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/git",
    "created_at": "2014-03-28T18:43:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9322#event-68154"
}
```



---

archive/issue_comments_080614.json:
```json
{
    "body": "<a id='comment:25'></a>\n**Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/41cbcdf3dddb39aa3093812faaea3062b2da9752\">41cbcdf</a></td><td><code>use default limtriv=3 for simon_two_descent over Q</code></td></tr></table>\n",
    "created_at": "2014-03-28T18:43:18Z",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9322#issuecomment-80614",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>
**Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/41cbcdf3dddb39aa3093812faaea3062b2da9752">41cbcdf</a></td><td><code>use default limtriv=3 for simon_two_descent over Q</code></td></tr></table>




---

archive/issue_comments_080615.json:
```json
{
    "body": "<a id='comment:26'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ecd28b4f5ba2bff231807a512170a6e02e2a32aa\">ecd28b4</a></td><td><code>use default limtriv=3 for simon_two_descent over Q</code></td></tr></table>\n",
    "created_at": "2014-03-28T18:49:36Z",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9322#issuecomment-80615",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ecd28b4f5ba2bff231807a512170a6e02e2a32aa">ecd28b4</a></td><td><code>use default limtriv=3 for simon_two_descent over Q</code></td></tr></table>




---

archive/issue_comments_080616.json:
```json
{
    "body": "**Changing commit** from \"[41cbcdf3dddb39aa3093812faaea3062b2da9752](https://github.com/sagemath/sagetrac-mirror/commit/41cbcdf3dddb39aa3093812faaea3062b2da9752)\" to \"[ecd28b4f5ba2bff231807a512170a6e02e2a32aa](https://github.com/sagemath/sagetrac-mirror/commit/ecd28b4f5ba2bff231807a512170a6e02e2a32aa)\".",
    "created_at": "2014-03-28T18:49:36Z",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9322#issuecomment-80616",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[41cbcdf3dddb39aa3093812faaea3062b2da9752](https://github.com/sagemath/sagetrac-mirror/commit/41cbcdf3dddb39aa3093812faaea3062b2da9752)" to "[ecd28b4f5ba2bff231807a512170a6e02e2a32aa](https://github.com/sagemath/sagetrac-mirror/commit/ecd28b4f5ba2bff231807a512170a6e02e2a32aa)".



---

archive/issue_comments_080617.json:
```json
{
    "body": "<a id='comment:27'></a>\nWhile looking at #10745 I noticed that the default `limtriv` over **Q** in Simon's script `ellQ.gp` changed from 50 to 3 in the latest version, so I changed the default setting in `ell_rational_field.py` and `gp_simon.py` accordingly.  Still qualifies as a reviewer patch, I guess.",
    "created_at": "2014-03-28T18:53:27Z",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9322#issuecomment-80617",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:27'></a>
While looking at #10745 I noticed that the default `limtriv` over **Q** in Simon's script `ellQ.gp` changed from 50 to 3 in the latest version, so I changed the default setting in `ell_rational_field.py` and `gp_simon.py` accordingly.  Still qualifies as a reviewer patch, I guess.



---

archive/issue_events_068155.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-03-28T18:53:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9322#event-68155"
}
```



---

archive/issue_events_068156.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-03-28T18:53:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9322#event-68156"
}
```



---

archive/issue_events_068157.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-03-31T14:57:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9322#event-68157"
}
```



---

archive/issue_events_068158.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "f663334c8939bfff17100acccadb1839d154c915",
    "created_at": "2014-03-31T14:57:12Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9322#event-68158"
}
```



---

archive/issue_comments_080618.json:
```json
{
    "body": "**Changing branch** from \"[u/pbruin/9322-simon_two_descent_defaults](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/9322-simon_two_descent_defaults)\" to \"[ecd28b4f5ba2bff231807a512170a6e02e2a32aa](https://github.com/sagemath/sagetrac-mirror/commit/ecd28b4f5ba2bff231807a512170a6e02e2a32aa)\".",
    "created_at": "2014-03-31T14:57:12Z",
    "issue": "https://github.com/sagemath/sage/issues/9322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9322#issuecomment-80618",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/pbruin/9322-simon_two_descent_defaults](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/9322-simon_two_descent_defaults)" to "[ecd28b4f5ba2bff231807a512170a6e02e2a32aa](https://github.com/sagemath/sagetrac-mirror/commit/ecd28b4f5ba2bff231807a512170a6e02e2a32aa)".
