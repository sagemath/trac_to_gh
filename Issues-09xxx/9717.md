# Issue 9717: fix variable substitution in PolyBoRi + finding M4RI

archive/issues_009717.json:
```json
{
    "body": "For some inputs our [This is the Trac macro *PolyBoRi* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#PolyBoRi-macro) wrapper throws an error while upstream computes the example just fine. The reason we fail is that some rings don't match and thus coercion goes wrong. The problem was reported by Joan Daemen who also provided an example via private communication.\n\n---\n\n## Note to the release managers\n\nWhen merging the [new PolyBoRi 0.6.4.p4 spkg](http://sage.math.washington.edu/home/malb/spkgs/polybori-0.6.4.p4.spkg), **apply**\n[the attached patch](http://trac.sagemath.org/sage_trac/raw-attachment/ticket/9717/polybori-0.6.4.p2.patch) **to the Sage library**.\n\n**Assignee:** @malb\n\n**CC:**  polybori alexanderdreyer @nexttime @qed777\n\n**Resolution:** fixed\n\n**Author:** Alexander Dreyer, Martin Albrecht, Michael Brickenstein\n\n**Reviewer:** Martin Albrecht, Alexander Dreyer, Leif Leonhardy\n\n**Upstream:** Fixed upstream, in a later stable release.\n\n**Merged:** sage-4.5.3.alpha1\n\nIssue created by migration from https://trac.sagemath.org/ticket/9717\n\n",
    "closed_at": "2010-08-15T08:03:29Z",
    "created_at": "2010-08-10T12:43:40Z",
    "labels": [
        "component: commutative algebra",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.5.3",
    "title": "fix variable substitution in PolyBoRi + finding M4RI",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/9717",
    "user": "https://github.com/malb"
}
```
For some inputs our [This is the Trac macro *PolyBoRi* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#PolyBoRi-macro) wrapper throws an error while upstream computes the example just fine. The reason we fail is that some rings don't match and thus coercion goes wrong. The problem was reported by Joan Daemen who also provided an example via private communication.

---

## Note to the release managers

When merging the [new PolyBoRi 0.6.4.p4 spkg](http://sage.math.washington.edu/home/malb/spkgs/polybori-0.6.4.p4.spkg), **apply**
[the attached patch](http://trac.sagemath.org/sage_trac/raw-attachment/ticket/9717/polybori-0.6.4.p2.patch) **to the Sage library**.

**Assignee:** @malb

**CC:**  polybori alexanderdreyer @nexttime @qed777

**Resolution:** fixed

**Author:** Alexander Dreyer, Martin Albrecht, Michael Brickenstein

**Reviewer:** Martin Albrecht, Alexander Dreyer, Leif Leonhardy

**Upstream:** Fixed upstream, in a later stable release.

**Merged:** sage-4.5.3.alpha1

Issue created by migration from https://trac.sagemath.org/ticket/9717





---

archive/issue_comments_119713.json:
```json
{
    "body": "<a id='comment:1'></a>\nAlexander Dreyer provided a fix for the issue. I've packaged this fix into an SPKG\n\n\u00a0http://sage.math.washington.edu/home/malb/spkgs/polybori-0.6.4.p2.spkg\n\nI've also packaged his patch for Sage into a proper mercurial patch which I'll attach in a sec.",
    "created_at": "2010-08-10T12:45:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119713",
    "user": "https://github.com/malb"
}
```

<a id='comment:1'></a>
Alexander Dreyer provided a fix for the issue. I've packaged this fix into an SPKG

 http://sage.math.washington.edu/home/malb/spkgs/polybori-0.6.4.p2.spkg

I've also packaged his patch for Sage into a proper mercurial patch which I'll attach in a sec.



---

archive/issue_comments_119714.json:
```json
{
    "body": "**Changing status** from new to needs_work.",
    "created_at": "2010-08-10T12:45:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119714",
    "user": "https://github.com/malb"
}
```

**Changing status** from new to needs_work.



---

archive/issue_comments_119715.json:
```json
{
    "body": "<a id='comment:2'></a>\nThe attached patch + SPKG fix the original problem, however I'm getting segfaults now:\n\n```\nProgram received signal SIGSEGV, Segmentation fault.\nlinalg_step_modified (polys=<value optimized out>, terms=<value optimized out>, \n    leads_from_strat=<value optimized out>, log=<value optimized out>, \n    optDrawMatrices=<value optimized out>, matrixPrefix=<value optimized out>)\n    at groebner/src/nf.cc:2270\n2270    groebner/src/nf.cc: No such file or directory.\n        in groebner/src/nf.cc\nCurrent language:  auto\nThe current source language is \"auto; currently c++\".\n(gdb) bt\n#0  linalg_step_modified (polys=<value optimized out>, terms=<value optimized out>, \n    leads_from_strat=<value optimized out>, log=<value optimized out>, \n    optDrawMatrices=<value optimized out>, matrixPrefix=<value optimized out>)\n    at groebner/src/nf.cc:2270\n#1  0x00007fffcf4f6c56 in polybori::groebner::GroebnerStrategy::faugereStepDense (\n    this=<value optimized out>, orig_system=<value optimized out>) at groebner/src/nf.cc:2386\n#2  0x00007fffcf3e2a0d in __pyx_pf_4sage_5rings_10polynomial_5pbori_16GroebnerStrategy_faugere_step_dense (__pyx_v_self=0x5997520, __pyx_v_v=0x12bf3500) at sage/rings/polynomial/pbori.cpp:31846\n#3  0x00007ffff7b11316 in call_function (f=0x418a900, throwflag=<value optimized out>)\n    at Python/ceval.c:3694\n\n```",
    "created_at": "2010-08-10T12:49:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119715",
    "user": "https://github.com/malb"
}
```

<a id='comment:2'></a>
The attached patch + SPKG fix the original problem, however I'm getting segfaults now:

```
Program received signal SIGSEGV, Segmentation fault.
linalg_step_modified (polys=<value optimized out>, terms=<value optimized out>, 
    leads_from_strat=<value optimized out>, log=<value optimized out>, 
    optDrawMatrices=<value optimized out>, matrixPrefix=<value optimized out>)
    at groebner/src/nf.cc:2270
2270    groebner/src/nf.cc: No such file or directory.
        in groebner/src/nf.cc
Current language:  auto
The current source language is "auto; currently c++".
(gdb) bt
#0  linalg_step_modified (polys=<value optimized out>, terms=<value optimized out>, 
    leads_from_strat=<value optimized out>, log=<value optimized out>, 
    optDrawMatrices=<value optimized out>, matrixPrefix=<value optimized out>)
    at groebner/src/nf.cc:2270
#1  0x00007fffcf4f6c56 in polybori::groebner::GroebnerStrategy::faugereStepDense (
    this=<value optimized out>, orig_system=<value optimized out>) at groebner/src/nf.cc:2386
#2  0x00007fffcf3e2a0d in __pyx_pf_4sage_5rings_10polynomial_5pbori_16GroebnerStrategy_faugere_step_dense (__pyx_v_self=0x5997520, __pyx_v_v=0x12bf3500) at sage/rings/polynomial/pbori.cpp:31846
#3  0x00007ffff7b11316 in call_function (f=0x418a900, throwflag=<value optimized out>)
    at Python/ceval.c:3694

```



---

archive/issue_comments_119716.json:
```json
{
    "body": "<a id='comment:3'></a>\nIgnore the SIGSEGV above, it is unrelated to this ticket but is caused by #9562.\u00a0\n\nAlexander, can you review my SPKG + patch, i.e. that it does what you intended? I give your changes a positive review so all that's needed is some check whether I produced the SPKG correctly etc.",
    "created_at": "2010-08-10T13:30:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119716",
    "user": "https://github.com/malb"
}
```

<a id='comment:3'></a>
Ignore the SIGSEGV above, it is unrelated to this ticket but is caused by #9562. 

Alexander, can you review my SPKG + patch, i.e. that it does what you intended? I give your changes a positive review so all that's needed is some check whether I produced the SPKG correctly etc.



---

archive/issue_comments_119717.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2010-08-10T13:30:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119717",
    "user": "https://github.com/malb"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_119718.json:
```json
{
    "body": "<a id='comment:4'></a>\nUse this SPKG instead (it is based on the latest PolyBoRi SPKG which the previous SPKG wasn't)\u00a0\n\n\u00a0http://sage.math.washington.edu/home/malb/spkgs/polybori-0.6.4.p3.spkg",
    "created_at": "2010-08-10T15:08:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119718",
    "user": "https://github.com/malb"
}
```

<a id='comment:4'></a>
Use this SPKG instead (it is based on the latest PolyBoRi SPKG which the previous SPKG wasn't) 

 http://sage.math.washington.edu/home/malb/spkgs/polybori-0.6.4.p3.spkg



---

archive/issue_comments_119719.json:
```json
{
    "body": "<a id='comment:5'></a>\nThere was some unrelated issue with the previous spkg (libm4ri was not found, because Sage's lib directory was not given to PolyBoRi)\nI updated the spkg accordingly:\nhttp://sage.math.washington.edu/home/dreyer/pb/polybori-0.6.4.p4.spkg",
    "created_at": "2010-08-10T21:16:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119719",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:5'></a>
There was some unrelated issue with the previous spkg (libm4ri was not found, because Sage's lib directory was not given to PolyBoRi)
I updated the spkg accordingly:
http://sage.math.washington.edu/home/dreyer/pb/polybori-0.6.4.p4.spkg



---

archive/issue_comments_119720.json:
```json
{
    "body": "**Work_Issues:** Update SPKG.txt",
    "created_at": "2010-08-11T12:50:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119720",
    "user": "https://github.com/nexttime"
}
```

**Work_Issues:** Update SPKG.txt



---

archive/issue_comments_119721.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2010-08-11T12:50:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119721",
    "user": "https://github.com/nexttime"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_119722.json:
```json
{
    "body": "<a id='comment:8'></a>\n`SPKG.txt` has to be updated for p4.\n\nAlexander's patch looks reasonable, though libm4ri (and the GD library) were previously found (in the second attempt)... (The only issue I'm aware of is with updating from 4.5.2 on MacOS X 10.6, which Mitesh Patel couldn't reproduce either; see #9721.)\n\n(The change to p4 is of course unrelated to the original intent of this ticket; perhaps adapt its title, too.)",
    "created_at": "2010-08-11T12:50:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119722",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:8'></a>
`SPKG.txt` has to be updated for p4.

Alexander's patch looks reasonable, though libm4ri (and the GD library) were previously found (in the second attempt)... (The only issue I'm aware of is with updating from 4.5.2 on MacOS X 10.6, which Mitesh Patel couldn't reproduce either; see #9721.)

(The change to p4 is of course unrelated to the original intent of this ticket; perhaps adapt its title, too.)



---

archive/issue_comments_119723.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [leif](#comment%3A8):\n\n> `SPKG.txt` has to be updated for p4.\n\n\nI have a new SPKG which does exactly that. I'll upload it later.\n\n> Alexander's patch looks reasonable, though libm4ri (and the GD library) were previously found (in the second attempt)... (The only issue I'm aware of is with updating from 4.5.2 on MacOS X 10.6, which Mitesh Patel couldn't reproduce either; see #9721.) (The change to p4 is of course unrelated to the original intent of this ticket; perhaps adapt its title, too.)\n",
    "created_at": "2010-08-11T13:12:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119723",
    "user": "https://github.com/malb"
}
```

<a id='comment:9'></a>
Replying to [leif](#comment%3A8):

> `SPKG.txt` has to be updated for p4.


I have a new SPKG which does exactly that. I'll upload it later.

> Alexander's patch looks reasonable, though libm4ri (and the GD library) were previously found (in the second attempt)... (The only issue I'm aware of is with updating from 4.5.2 on MacOS X 10.6, which Mitesh Patel couldn't reproduce either; see #9721.) (The change to p4 is of course unrelated to the original intent of this ticket; perhaps adapt its title, too.)




---

archive/issue_events_029503.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "rename": {
        "from": "fix variable substitution in PolyBoRi",
        "to": "fix variable substitution in PolyBoRi + finding M4RI"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9717#event-29503"
}
```



---

archive/issue_comments_119724.json:
```json
{
    "body": "<a id='comment:10'></a>\nThe new SPKG is here\n\n\u00a0http://sage.math.washington.edu/home/malb/spkgs/polybori-0.6.4.p4.spkg\n\nI just added an entry to SPKG.txt",
    "created_at": "2010-08-11T13:30:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119724",
    "user": "https://github.com/malb"
}
```

<a id='comment:10'></a>
The new SPKG is here

 http://sage.math.washington.edu/home/malb/spkgs/polybori-0.6.4.p4.spkg

I just added an entry to SPKG.txt



---

archive/issue_comments_119725.json:
```json
{
    "body": "<a id='comment:11'></a>\nPolyBoRi makes assumptions about M4RI which are not met with the newest upstream release (#9475). Thus, we should fix this here asap since the new M4RI is about to go in.",
    "created_at": "2010-08-11T18:03:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119725",
    "user": "https://github.com/malb"
}
```

<a id='comment:11'></a>
PolyBoRi makes assumptions about M4RI which are not met with the newest upstream release (#9475). Thus, we should fix this here asap since the new M4RI is about to go in.



---

archive/issue_comments_119726.json:
```json
{
    "body": "<a id='comment:12'></a>\nI've replaced the SPKG here\u00a0\n\n\u00a0 \u00a0http://sage.math.washington.edu/home/malb/spkgs/polybori-0.6.4.p4.spkg\n\nand the new SPKG fixes the SIGSEGV and all doctests pass.\n\nThese fixes are:\n\n\u00a0http://bitbucket.org/brickenstein/polybori/changeset/6ef7402d935b\n\n\u00a0http://bitbucket.org/brickenstein/polybori/changeset/b692c8181e94",
    "created_at": "2010-08-12T18:48:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119726",
    "user": "https://github.com/malb"
}
```

<a id='comment:12'></a>
I've replaced the SPKG here 

   http://sage.math.washington.edu/home/malb/spkgs/polybori-0.6.4.p4.spkg

and the new SPKG fixes the SIGSEGV and all doctests pass.

These fixes are:

 http://bitbucket.org/brickenstein/polybori/changeset/6ef7402d935b

 http://bitbucket.org/brickenstein/polybori/changeset/b692c8181e94



---

archive/issue_comments_119727.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2010-08-12T18:48:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119727",
    "user": "https://github.com/malb"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_119728.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2010-08-13T02:30:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119728",
    "user": "https://github.com/nexttime"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_119729.json:
```json
{
    "body": "<a id='comment:14'></a>\n`Work issues` field ( = *\"Update `SPKG.txt`\"*) still (or again) valid... ;-)\n\n(Perhaps also add this ticket number, and mention the PolyBoRi upstream fixes there.)",
    "created_at": "2010-08-13T02:30:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119729",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:14'></a>
`Work issues` field ( = *"Update `SPKG.txt`"*) still (or again) valid... ;-)

(Perhaps also add this ticket number, and mention the PolyBoRi upstream fixes there.)



---

archive/issue_comments_119730.json:
```json
{
    "body": "<a id='comment:15'></a>\nUpdated accordingly.",
    "created_at": "2010-08-13T08:50:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119730",
    "user": "https://github.com/malb"
}
```

<a id='comment:15'></a>
Updated accordingly.



---

archive/issue_comments_119731.json:
```json
{
    "body": "**Changing work_issues** from \"Update SPKG.txt\" to \"\".",
    "created_at": "2010-08-13T08:50:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119731",
    "user": "https://github.com/malb"
}
```

**Changing work_issues** from "Update SPKG.txt" to "".



---

archive/issue_comments_119732.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2010-08-13T08:50:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119732",
    "user": "https://github.com/malb"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_119733.json:
```json
{
    "body": "<a id='comment:16'></a>\nMeanwhile, I took a look at the surrounding code also. (Just to ensure, that the patches also do the right thing in other contexts.) It's a good patch and it may fix even more issues. So I give a positive review from the mathematical point of view. (If I'm allowed to do so.) For the technical viewpoint: I'm waiting now for `sage -testall` to finish.",
    "created_at": "2010-08-13T09:02:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119733",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:16'></a>
Meanwhile, I took a look at the surrounding code also. (Just to ensure, that the patches also do the right thing in other contexts.) It's a good patch and it may fix even more issues. So I give a positive review from the mathematical point of view. (If I'm allowed to do so.) For the technical viewpoint: I'm waiting now for `sage -testall` to finish.



---

archive/issue_comments_119734.json:
```json
{
    "body": "<a id='comment:17'></a>\nPassed `ptestlong` with Sage 4.5.3.alpha0 and `libm4ri-20100701.p1` from #9475 on Fedora 13 x86 (Pentium 4 Prescott, gcc 4.4.4).\n\nSo I can give \"positive review\" from the technical side. ;-)",
    "created_at": "2010-08-13T09:55:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119734",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:17'></a>
Passed `ptestlong` with Sage 4.5.3.alpha0 and `libm4ri-20100701.p1` from #9475 on Fedora 13 x86 (Pentium 4 Prescott, gcc 4.4.4).

So I can give "positive review" from the technical side. ;-)



---

archive/issue_comments_119735.json:
```json
{
    "body": "<a id='comment:18'></a>\nThe updated `SPKG.txt` is ok, too. (And the upstream fixes also look reasonable btw.)",
    "created_at": "2010-08-13T10:05:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119735",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:18'></a>
The updated `SPKG.txt` is ok, too. (And the upstream fixes also look reasonable btw.)



---

archive/issue_comments_119736.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [leif](#comment%3A18):\n> The updated `SPKG.txt` is ok, too.\n\n\n... except for the date(s), but I'll assume the intention was to avoid naming Friday 13th and accept it. ;-)",
    "created_at": "2010-08-13T10:14:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119736",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:19'></a>
Replying to [leif](#comment%3A18):
> The updated `SPKG.txt` is ok, too.


... except for the date(s), but I'll assume the intention was to avoid naming Friday 13th and accept it. ;-)



---

archive/issue_comments_119737.json:
```json
{
    "body": "<a id='comment:20'></a>\nSo we have a positive review then?",
    "created_at": "2010-08-13T11:59:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119737",
    "user": "https://github.com/malb"
}
```

<a id='comment:20'></a>
So we have a positive review then?



---

archive/issue_comments_119738.json:
```json
{
    "body": "<a id='comment:21'></a>\nReplying to [malb](#comment%3A20):\n> So we have a positive review then?\n\n\nOnce Alexander's `testall` has finished, I think yes. :)\n\nI'll perhaps test later on a 64-bit platform, although I don't expect any issues.",
    "created_at": "2010-08-13T12:21:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119738",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:21'></a>
Replying to [malb](#comment%3A20):
> So we have a positive review then?


Once Alexander's `testall` has finished, I think yes. :)

I'll perhaps test later on a 64-bit platform, although I don't expect any issues.



---

archive/issue_comments_119739.json:
```json
{
    "body": "<a id='comment:22'></a>\nReplying to [leif](#comment%3A21):\n> I'll perhaps test later on a 64-bit platform, although I don't expect any issues.\n\n\nPassed all long tests in `sage/matrix`; currently running `make testlong`, but this will take some time since the system is already fully loaded... (Ubuntu 9.04 x86_64, Core2, gcc 4.3.3)",
    "created_at": "2010-08-13T12:55:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119739",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:22'></a>
Replying to [leif](#comment%3A21):
> I'll perhaps test later on a 64-bit platform, although I don't expect any issues.


Passed all long tests in `sage/matrix`; currently running `make testlong`, but this will take some time since the system is already fully loaded... (Ubuntu 9.04 x86_64, Core2, gcc 4.3.3)



---

archive/issue_comments_119740.json:
```json
{
    "body": "<a id='comment:23'></a>\n> Once Alexander's `testall` has finished, I think yes. :)\n\nThey have successfully finished (SuSE 11.1 64 Bits). So we have the positive review now",
    "created_at": "2010-08-13T14:13:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119740",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:23'></a>
> Once Alexander's `testall` has finished, I think yes. :)

They have successfully finished (SuSE 11.1 64 Bits). So we have the positive review now



---

archive/issue_comments_119741.json:
```json
{
    "body": "**Author:** malb,PolyBoRi",
    "created_at": "2010-08-13T14:13:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119741",
    "user": "https://github.com/alexanderdreyer"
}
```

**Author:** malb,PolyBoRi



---

archive/issue_comments_119742.json:
```json
{
    "body": "**Changing upstream** from \"N/A\" to \"Fixed upstream, in a later stable release.\".",
    "created_at": "2010-08-13T14:13:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119742",
    "user": "https://github.com/alexanderdreyer"
}
```

**Changing upstream** from "N/A" to "Fixed upstream, in a later stable release.".



---

archive/issue_comments_119743.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2010-08-13T14:13:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119743",
    "user": "https://github.com/alexanderdreyer"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_119744.json:
```json
{
    "body": "**Reviewer:** leif,AlexanderDreyer",
    "created_at": "2010-08-13T14:13:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119744",
    "user": "https://github.com/alexanderdreyer"
}
```

**Reviewer:** leif,AlexanderDreyer



---

archive/issue_comments_119745.json:
```json
{
    "body": "<a id='comment:24'></a>\n## Note to the release managers\n\nI think this should (only) be merged together with #9475, but I'm not *that* sure.",
    "created_at": "2010-08-13T14:25:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119745",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:24'></a>
## Note to the release managers

I think this should (only) be merged together with #9475, but I'm not *that* sure.



---

archive/issue_comments_119746.json:
```json
{
    "body": "**Changing reviewer** from \"leif,AlexanderDreyer\" to \"Martin Albrecht, Alexander Dreyer, Leif Leonhardy\".",
    "created_at": "2010-08-13T14:25:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119746",
    "user": "https://github.com/nexttime"
}
```

**Changing reviewer** from "leif,AlexanderDreyer" to "Martin Albrecht, Alexander Dreyer, Leif Leonhardy".



---

archive/issue_comments_119747.json:
```json
{
    "body": "**Changing author** from \"malb,PolyBoRi\" to \"Alexander Dreyer, Martin Albrecht, Michael Brickenstein\".",
    "created_at": "2010-08-13T14:25:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119747",
    "user": "https://github.com/nexttime"
}
```

**Changing author** from "malb,PolyBoRi" to "Alexander Dreyer, Martin Albrecht, Michael Brickenstein".



---

archive/issue_comments_119748.json:
```json
{
    "body": "<a id='comment:25'></a>\nAs expected, also passed `testlong` with Sage 4.5.3.alpha0 and #9475 on Ubuntu 9.04 x86_64 (Core2, gcc 4.3.3, native code, O2).",
    "created_at": "2010-08-13T16:39:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119748",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:25'></a>
As expected, also passed `testlong` with Sage 4.5.3.alpha0 and #9475 on Ubuntu 9.04 x86_64 (Core2, gcc 4.3.3, native code, O2).



---

archive/issue_comments_119749.json:
```json
{
    "body": "<a id='comment:26'></a>\nOoops, I just noticed the [attached patch](http://trac.sagemath.org/sage_trac/attachment/ticket/9717/polybori-0.6.4.p2.patch) is to the *Sage library* (I assumed it is an *spkg* patch). So I did **not** apply that patch in any of the tests I made, which despite that all passed...\n\nMartin, is that patch now obsolete or do we just not test an example which would fail without it? Or is it platform-specific?\n\n(Btw, the patch's commit message lacks a ticket number; also, a back-reference/comment in the code wouldn't be bad.)\n\nPerhaps you could add Joan Daemen's example to the ticket.",
    "created_at": "2010-08-13T17:12:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119749",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:26'></a>
Ooops, I just noticed the [attached patch](http://trac.sagemath.org/sage_trac/attachment/ticket/9717/polybori-0.6.4.p2.patch) is to the *Sage library* (I assumed it is an *spkg* patch). So I did **not** apply that patch in any of the tests I made, which despite that all passed...

Martin, is that patch now obsolete or do we just not test an example which would fail without it? Or is it platform-specific?

(Btw, the patch's commit message lacks a ticket number; also, a back-reference/comment in the code wouldn't be bad.)

Perhaps you could add Joan Daemen's example to the ticket.



---

archive/issue_comments_119750.json:
```json
{
    "body": "<a id='comment:27'></a>\nReplying to [leif](#comment%3A26):\n\n> Ooops, I just noticed the [attached patch](http://trac.sagemath.org/sage_trac/attachment/ticket/9717/polybori-0.6.4.p2.patch) is to the *Sage library* (I assumed it is an *spkg* patch). So I did **not** apply that patch in any of the tests I made, which despite that all passed... Martin, is that patch now obsolete or do we just not test an example which would fail without it?\n\n\nThe patch is necessary, Sage will SIGSEGV in some cases otherwise. I'll try to update the patch with an example.\n\n> Or is it platform-specific? (Btw, the patch's commit message lacks a ticket number; also, a back-reference/comment in the code wouldn't be bad.)\n\n\nI'll add the ticket number.\n\n> Perhaps you could add Joan Daemen's example to the ticket.\n\n\nThe problem is a bit bigger and I have no permission to publish it, sorry.",
    "created_at": "2010-08-14T12:10:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119750",
    "user": "https://github.com/malb"
}
```

<a id='comment:27'></a>
Replying to [leif](#comment%3A26):

> Ooops, I just noticed the [attached patch](http://trac.sagemath.org/sage_trac/attachment/ticket/9717/polybori-0.6.4.p2.patch) is to the *Sage library* (I assumed it is an *spkg* patch). So I did **not** apply that patch in any of the tests I made, which despite that all passed... Martin, is that patch now obsolete or do we just not test an example which would fail without it?


The patch is necessary, Sage will SIGSEGV in some cases otherwise. I'll try to update the patch with an example.

> Or is it platform-specific? (Btw, the patch's commit message lacks a ticket number; also, a back-reference/comment in the code wouldn't be bad.)


I'll add the ticket number.

> Perhaps you could add Joan Daemen's example to the ticket.


The problem is a bit bigger and I have no permission to publish it, sorry.



---

archive/issue_comments_119751.json:
```json
{
    "body": "<a id='comment:28'></a>\nI've updated the patch with an example and this ticket's number.",
    "created_at": "2010-08-14T12:19:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119751",
    "user": "https://github.com/malb"
}
```

<a id='comment:28'></a>
I've updated the patch with an example and this ticket's number.



---

archive/issue_comments_119752.json:
```json
{
    "body": "<a id='comment:29'></a>\nReplying to [malb](#comment%3A28):\n> I've updated the patch with an example and this ticket's number.\n\n\nOk, I'll rerun some of the tests later. Currently all machines busy with new PARI testing... ;-)\n\n(I don't see the ticket number in the patched code though.)",
    "created_at": "2010-08-14T12:47:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119752",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:29'></a>
Replying to [malb](#comment%3A28):
> I've updated the patch with an example and this ticket's number.


Ok, I'll rerun some of the tests later. Currently all machines busy with new PARI testing... ;-)

(I don't see the ticket number in the patched code though.)



---

archive/issue_comments_119753.json:
```json
{
    "body": "<a id='comment:30'></a>\n\n```\n#9717 fixing parent ring in substitute_variable() (fix due to Alexander Dreyer)\n```\nThat's the commit message, is that alright?",
    "created_at": "2010-08-14T12:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119753",
    "user": "https://github.com/malb"
}
```

<a id='comment:30'></a>

```
#9717 fixing parent ring in substitute_variable() (fix due to Alexander Dreyer)
```
That's the commit message, is that alright?



---

archive/issue_comments_119754.json:
```json
{
    "body": "<a id='comment:31'></a>\nAnd an attachment comment would be nice... (\"Sage library patch - ...\")\n\nI HATE TRAC! [concurrent \"editing\" grrrrr...]\n\n---\n\nI meant putting the ticket number also into a comment **in the code**; you don't see the commit messages when looking just at source files. E.g.\n\n```\n        ... # fixes #9717\n```\nor in the `TESTS::` section:\n\n```\n    Substitution is (now) also allowed with different rings (cf. #9717)::\n```\nSomething like that.",
    "created_at": "2010-08-14T13:02:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119754",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:31'></a>
And an attachment comment would be nice... ("Sage library patch - ...")

I HATE TRAC! [concurrent "editing" grrrrr...]

---

I meant putting the ticket number also into a comment **in the code**; you don't see the commit messages when looking just at source files. E.g.

```
        ... # fixes #9717
```
or in the `TESTS::` section:

```
    Substitution is (now) also allowed with different rings (cf. #9717)::
```
Something like that.



---

archive/issue_comments_119755.json:
```json
{
    "body": "<a id='comment:32'></a>\nI'm not too convinced by that. This was a serious bug which just wasn't reported to far. I don't want to clutter the code with track ticket numbers. When reading the code it is relatively simple to see (I'd say) that the new code is correct, thus I'd say it doesn't need a ticket to explain why it is there. Also, the new example isn't just a test, it shows a real use case.",
    "created_at": "2010-08-14T13:17:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119755",
    "user": "https://github.com/malb"
}
```

<a id='comment:32'></a>
I'm not too convinced by that. This was a serious bug which just wasn't reported to far. I don't want to clutter the code with track ticket numbers. When reading the code it is relatively simple to see (I'd say) that the new code is correct, thus I'd say it doesn't need a ticket to explain why it is there. Also, the new example isn't just a test, it shows a real use case.



---

archive/issue_comments_119756.json:
```json
{
    "body": "Sage library patch fixing an issue with substitute_variable()",
    "created_at": "2010-08-14T13:17:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119756",
    "user": "https://github.com/malb"
}
```

Sage library patch fixing an issue with substitute_variable()



---

archive/issue_comments_119757.json:
```json
{
    "body": "<a id='comment:33'></a>\nAttachment [polybori-0.6.4.p2.patch](tarball://root/attachments/some-uuid/ticket9717/polybori-0.6.4.p2.patch) by @nexttime created at 2010-08-14 14:48:44",
    "created_at": "2010-08-14T14:48:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119757",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:33'></a>
Attachment [polybori-0.6.4.p2.patch](tarball://root/attachments/some-uuid/ticket9717/polybori-0.6.4.p2.patch) by @nexttime created at 2010-08-14 14:48:44



---

archive/issue_comments_119758.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,8 @@\n-For some inputs our[This is the Trac macro *PolyBoRi* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#PolyBoRi-macro) wrapper throws an error while upstream computes the example just fine. The reason we fail is that some rings don't match and thus coercion goes wrong. The problem was reported by Joan Daemen who also provided an example via private communication.\u00a0\n+For some inputs our [This is the Trac macro *PolyBoRi* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#PolyBoRi-macro) wrapper throws an error while upstream computes the example just fine. The reason we fail is that some rings don't match and thus coercion goes wrong. The problem was reported by Joan Daemen who also provided an example via private communication.\n+\n+---\n+\n+## Note to the release managers\n+\n+When merging the [new PolyBoRi 0.6.4.p4 spkg](http://sage.math.washington.edu/home/malb/spkgs/polybori-0.6.4.p4.spkg), **apply**\n+[the attached patch](http://trac.sagemath.org/sage_trac/raw-attachment/ticket/9717/polybori-0.6.4.p2.patch) **to the Sage library**.\n``````\n",
    "created_at": "2010-08-14T14:48:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119758",
    "user": "https://github.com/nexttime"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,8 @@
-For some inputs our[This is the Trac macro *PolyBoRi* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#PolyBoRi-macro) wrapper throws an error while upstream computes the example just fine. The reason we fail is that some rings don't match and thus coercion goes wrong. The problem was reported by Joan Daemen who also provided an example via private communication. 
+For some inputs our [This is the Trac macro *PolyBoRi* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#PolyBoRi-macro) wrapper throws an error while upstream computes the example just fine. The reason we fail is that some rings don't match and thus coercion goes wrong. The problem was reported by Joan Daemen who also provided an example via private communication.
+
+---
+
+## Note to the release managers
+
+When merging the [new PolyBoRi 0.6.4.p4 spkg](http://sage.math.washington.edu/home/malb/spkgs/polybori-0.6.4.p4.spkg), **apply**
+[the attached patch](http://trac.sagemath.org/sage_trac/raw-attachment/ticket/9717/polybori-0.6.4.p2.patch) **to the Sage library**.
``````




---

archive/issue_comments_119759.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2010-08-15T08:03:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119759",
    "user": "https://github.com/qed777"
}
```

**Resolution:** fixed



---

archive/issue_events_029504.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2010-08-15T08:03:29Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9717#event-29504"
}
```



---

archive/issue_comments_119760.json:
```json
{
    "body": "**Merged:** sage-4.5.3.alpha0",
    "created_at": "2010-08-15T08:03:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119760",
    "user": "https://github.com/qed777"
}
```

**Merged:** sage-4.5.3.alpha0



---

archive/issue_comments_119761.json:
```json
{
    "body": "**Changing merged** from \"sage-4.5.3.alpha0\" to \"sage-4.5.3.alpha1\".",
    "created_at": "2010-08-15T08:27:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119761",
    "user": "https://github.com/qed777"
}
```

**Changing merged** from "sage-4.5.3.alpha0" to "sage-4.5.3.alpha1".



---

archive/issue_comments_119762.json:
```json
{
    "body": "<a id='comment:36'></a>\nHow does one run PolyBoRi's test suite?  I'm curious about whether we can add an `spkg-check` file (at a new ticket).",
    "created_at": "2010-08-17T07:10:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119762",
    "user": "https://github.com/qed777"
}
```

<a id='comment:36'></a>
How does one run PolyBoRi's test suite?  I'm curious about whether we can add an `spkg-check` file (at a new ticket).



---

archive/issue_comments_119763.json:
```json
{
    "body": "<a id='comment:37'></a>\nThe testsuite, which is included in PolyBoRi is not up to date, we use another suite for developing internally. On the one hand, it is lange, on the other, some examples are not freely available. We'll try to deliver a suitable subset of the examples in the future.",
    "created_at": "2010-08-17T08:27:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9717#issuecomment-119763",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:37'></a>
The testsuite, which is included in PolyBoRi is not up to date, we use another suite for developing internally. On the one hand, it is lange, on the other, some examples are not freely available. We'll try to deliver a suitable subset of the examples in the future.
