# Issue 9870: Clean up Cliquer's spkg-install

archive/issues_009869.json:
```json
{
    "body": "The `spkg-install` file for Cliquer could do with a lot of cleaning up. Some examples of the problems are:\n\n* There are flags set for the C++ and Fortran compilers, though the code is only C. \n* There's code to check for a mix of Sun and GNU compilers, which is pointless since there is only 1 compiler used.\n* Lots of unnecessary environment variables are set.\n* Use `make` instead of `$MAKE`.\n* Runs tests in `spkg-install` instead of `spkg-check`.\n\n**None of these issues are currently causing any problems, but should be resolved at some point**\n\nAssignee: @nexttime\n\nCC:  @nathanncohen mvngu\n\nReviewer: Jean-Pierre Flori\n\nAuthor: Jeroen Demeyer\n\nBranch: 2ffeeb72890fc52b937b259f0f4ca6792a2d5b1d\n\nDependencies: #14349\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/9870\n\n",
    "closed_at": "2014-02-22T06:45:28Z",
    "created_at": "2010-09-07T21:20:38Z",
    "labels": [
        "component: packages: standard",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.2",
    "title": "Clean up Cliquer's spkg-install",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/9870",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```
The `spkg-install` file for Cliquer could do with a lot of cleaning up. Some examples of the problems are:

* There are flags set for the C++ and Fortran compilers, though the code is only C. 
* There's code to check for a mix of Sun and GNU compilers, which is pointless since there is only 1 compiler used.
* Lots of unnecessary environment variables are set.
* Use `make` instead of `$MAKE`.
* Runs tests in `spkg-install` instead of `spkg-check`.

**None of these issues are currently causing any problems, but should be resolved at some point**

Assignee: @nexttime

CC:  @nathanncohen mvngu

Reviewer: Jean-Pierre Flori

Author: Jeroen Demeyer

Branch: 2ffeeb72890fc52b937b259f0f4ca6792a2d5b1d

Dependencies: #14349

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/9870





---

archive/issue_comments_101685.json:
```json
{
    "body": "Changing assignee from GeorgSWeber to @nexttime.",
    "created_at": "2010-09-09T02:24:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9870#issuecomment-101685",
    "user": "https://github.com/nexttime"
}
```

Changing assignee from GeorgSWeber to @nexttime.



---

archive/issue_comments_101686.json:
```json
{
    "body": "<a id='comment:1'></a>To tranquilize Dave :-)\n\nI've made several comments at tickets related to Cliquer, e.g. #9833 and #9871.\n\nI think this should then be a follow-up of #9871, despite the numbers.",
    "created_at": "2010-09-09T02:24:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9870#issuecomment-101686",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:1'></a>To tranquilize Dave :-)

I've made several comments at tickets related to Cliquer, e.g. #9833 and #9871.

I think this should then be a follow-up of #9871, despite the numbers.



---

archive/issue_comments_101687.json:
```json
{
    "body": "Changing component from build to linear programming.",
    "created_at": "2010-09-15T09:54:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9870#issuecomment-101687",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

Changing component from build to linear programming.



---

archive/issue_comments_101688.json:
```json
{
    "body": "<a id='comment:3'></a>Hello !\n\n> There is one technical question you can however answer. Do we need the binary file \"cl\" so it can be executed from the command line, or is the library libcliquer.so sufficient?\n\n\nNo, the cl file is not used, and this is precisely what the Sage code included in cliquer is useful for : directly calling the library's functions with a Graph object using the Graph structure it expects to find, without having to create an ugly temporary file to call the executable on it `:-)`\n\nNathann",
    "created_at": "2010-09-15T11:11:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9870#issuecomment-101688",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:3'></a>Hello !

> There is one technical question you can however answer. Do we need the binary file "cl" so it can be executed from the command line, or is the library libcliquer.so sufficient?


No, the cl file is not used, and this is precisely what the Sage code included in cliquer is useful for : directly calling the library's functions with a Graph object using the Graph structure it expects to find, without having to create an ugly temporary file to call the executable on it `:-)`

Nathann



---

archive/issue_comments_101689.json:
```json
{
    "body": "<a id='comment:5'></a>Leif, you were keen to take ownership of this. Has anything happened with it? \n\nDave",
    "created_at": "2010-11-07T00:19:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9870#issuecomment-101689",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:5'></a>Leif, you were keen to take ownership of this. Has anything happened with it? 

Dave



---

archive/issue_comments_101690.json:
```json
{
    "body": "<a id='comment:6'></a>I ask once again. Any chance of you sorting this out Leif, since you wanted to take ownership of it. \n\nDave",
    "created_at": "2011-03-23T15:09:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9870#issuecomment-101690",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:6'></a>I ask once again. Any chance of you sorting this out Leif, since you wanted to take ownership of it. 

Dave



---

archive/issue_comments_101691.json:
```json
{
    "body": "<a id='comment:7'></a>See #11227 for another issue with cliquer, unrelated to this ticket.",
    "created_at": "2011-04-25T17:15:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9870#issuecomment-101691",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'></a>See #11227 for another issue with cliquer, unrelated to this ticket.



---

archive/issue_events_024861.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9870",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9870#event-24861"
}
```



---

archive/issue_comments_101692.json:
```json
{
    "body": "Changing component from linear programming to packages: standard.",
    "created_at": "2014-01-16T13:34:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9870#issuecomment-101692",
    "user": "https://github.com/jdemeyer"
}
```

Changing component from linear programming to packages: standard.



---

archive/issue_comments_101693.json:
```json
{
    "body": "<a id='comment:9'></a>I'll tackle this.",
    "created_at": "2014-01-16T13:34:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9870#issuecomment-101693",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'></a>I'll tackle this.



---

archive/issue_comments_101694.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,13 +1,12 @@\n-The `Makefile` and `spkg-install` for Cliquer could do with a lot of cleaning up. Some examples of the problems are:\n+The `spkg-install` file for Cliquer could do with a lot of cleaning up. Some examples of the problems are:\n \n * There are flags set for the C++ and Fortran compilers, though the code is only C. \n-* There's code to check for a mix of Sun and GNU compilers, when better tests now exists as `$SAGE_LOCAL/bin/testcc.sh`\n-* Lots of unnecessary environment variables are set. \n-* Many, many other problems. \n+* There's code to check for a mix of Sun and GNU compilers, which is pointless since there is only 1 compiler used.\n+* Lots of unnecessary environment variables are set.\n+* Use `make` instead of `$MAKE`.\n+* Runs tests in `spkg-install` instead of `spkg-check`.\n \n **None of these issues are currently causing any problems, but should be resolved at some point**\n-\n-Assignee: GeorgSWeber\n \n Comment: 1\n \n```\n",
    "created_at": "2014-01-16T13:34:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9870#issuecomment-101694",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,13 +1,12 @@
-The `Makefile` and `spkg-install` for Cliquer could do with a lot of cleaning up. Some examples of the problems are:
+The `spkg-install` file for Cliquer could do with a lot of cleaning up. Some examples of the problems are:
 
 * There are flags set for the C++ and Fortran compilers, though the code is only C. 
-* There's code to check for a mix of Sun and GNU compilers, when better tests now exists as `$SAGE_LOCAL/bin/testcc.sh`
-* Lots of unnecessary environment variables are set. 
-* Many, many other problems. 
+* There's code to check for a mix of Sun and GNU compilers, which is pointless since there is only 1 compiler used.
+* Lots of unnecessary environment variables are set.
+* Use `make` instead of `$MAKE`.
+* Runs tests in `spkg-install` instead of `spkg-check`.
 
 **None of these issues are currently causing any problems, but should be resolved at some point**
-
-Assignee: GeorgSWeber
 
 Comment: 1
 
```




---

archive/issue_comments_101695.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-01-16T14:41:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9870#issuecomment-101695",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_101696.json:
```json
{
    "body": "<a id='comment:11'></a>New commits:",
    "created_at": "2014-01-16T14:41:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9870#issuecomment-101696",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:11'></a>New commits:



---

archive/issue_events_024862.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9870",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9870#event-24862"
}
```



---

archive/issue_events_024863.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9870",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9870#event-24863"
}
```



---

archive/issue_comments_101697.json:
```json
{
    "body": "<a id='comment:14'></a>Don't know why trac was not able to merge the branch as I encountered no conflicts when merging it.\n\nI've made a few changes to make the script more like the \"new\" scripts as described in the dev guide, you may not be happy with them and are very welcome to change them back.\nOtherwise let's positively review this ticket.\n\nAnyway, I'm going to autotoolify cliquer, post it in a follow-up ticket and suggest it upstream.\nThe Makefile is just too awful right now.\n\n---\nNew commits:",
    "created_at": "2014-02-20T16:13:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9870#issuecomment-101697",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:14'></a>Don't know why trac was not able to merge the branch as I encountered no conflicts when merging it.

I've made a few changes to make the script more like the "new" scripts as described in the dev guide, you may not be happy with them and are very welcome to change them back.
Otherwise let's positively review this ticket.

Anyway, I'm going to autotoolify cliquer, post it in a follow-up ticket and suggest it upstream.
The Makefile is just too awful right now.

---
New commits:



---

archive/issue_comments_101698.json:
```json
{
    "body": "<a id='comment:15'></a>I've sent an email upstream about the possibility of releasing an official version including some of the Debian's patches (http://anonscm.debian.org/gitweb/?p=debian-science/packages/cliquer.git;a=tree;f=debian/patches;hb=HEAD) and an autotoolified build system.",
    "created_at": "2014-02-20T16:28:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9870#issuecomment-101698",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:15'></a>I've sent an email upstream about the possibility of releasing an official version including some of the Debian's patches (http://anonscm.debian.org/gitweb/?p=debian-science/packages/cliquer.git;a=tree;f=debian/patches;hb=HEAD) and an autotoolified build system.



---

archive/issue_comments_101699.json:
```json
{
    "body": "<a id='comment:16'></a>I think `set -e` is a good thing and should be used more. So I reverted that change.",
    "created_at": "2014-02-21T06:03:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9870#issuecomment-101699",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:16'></a>I think `set -e` is a good thing and should be used more. So I reverted that change.



---

archive/issue_comments_101700.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-02-21T06:03:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9870#issuecomment-101700",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_024864.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-02-22T06:45:28Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/9870",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9870#event-24864"
}
```



---

archive/issue_comments_101701.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-02-22T06:45:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9870#issuecomment-101701",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_101702.json:
```json
{
    "body": "<a id='comment:19'></a>FYI, upstream has nicely answered my questions.\nThey don't really mind cliquer being distributed in different forms in various places and don't plan on releasing any new upstream version \"in the next ten years or so (or ever?)\".",
    "created_at": "2014-02-24T13:30:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9870#issuecomment-101702",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:19'></a>FYI, upstream has nicely answered my questions.
They don't really mind cliquer being distributed in different forms in various places and don't plan on releasing any new upstream version "in the next ten years or so (or ever?)".
