# Issue 9264: Apply ALL relevent fixes to ECL 10.4.1

archive/issues_009264.json:
```json
{
    "body": "There are a number of tickets active at the minute with patches to ECL\n\n* #8808\n* #9187\n* #8951\n* #8089\n\nnone have been merged, but the patches are not consistent across all or them. \n\n* The option --with-dffi=no  from #8089 has not been been missed which is very important. \n* Some other less important changes (such as removing an inaccurate, but innocuous mention of building a 32-bit version) are removed. \n* There is a 10.4.1.p0 package, despite no 10.4.1 has actually been merged. \n\nThe aim of this ticket is to update to the 10.4.1 source code, whilst ensuring all the relevant patches are applied. \n\n## Important\n\nOn #8951 Jason says \"As a reminder here, this (i.e. #8951) should *only* be merged simultaneously with the new maxima at #8731.\"\n\nAssuming Jason is correct, that gives us a problem. \n\nThe Maxima update seems to have stalled (there are no updates on the ticket for 3 weeks). If updating Maxima to 5.21.1 and ECL 10.4.1 need to be done together, it will probably be best to create a ecl-10.2.1.p0, which has all the small changes, and actually leave updating to the latest ECL code until it can be better coordinated with the Maxima update. \n\nAt the moment, it seems several small but important changes to the ECL installation are being held up for a non-trivial set of changes needed if Mamima is updated. \n\nDave \n\nAssignee: tbd\n\nCC:  @williamstein @jhpalmieri @qed777 @nexttime @jaapspies @jasongrout @vbraun @jdemeyer\n\nResolution: duplicate\n\nReviewer: Volker Braun\n\nIssue created by migration from https://trac.sagemath.org/ticket/9264\n\n",
    "closed_at": "2011-07-05T10:08:25Z",
    "created_at": "2010-06-18T12:16:14Z",
    "labels": [
        "component: packages: standard",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Apply ALL relevent fixes to ECL 10.4.1",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/9264",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```
There are a number of tickets active at the minute with patches to ECL

* #8808
* #9187
* #8951
* #8089

none have been merged, but the patches are not consistent across all or them. 

* The option --with-dffi=no  from #8089 has not been been missed which is very important. 
* Some other less important changes (such as removing an inaccurate, but innocuous mention of building a 32-bit version) are removed. 
* There is a 10.4.1.p0 package, despite no 10.4.1 has actually been merged. 

The aim of this ticket is to update to the 10.4.1 source code, whilst ensuring all the relevant patches are applied. 

## Important

On #8951 Jason says "As a reminder here, this (i.e. #8951) should *only* be merged simultaneously with the new maxima at #8731."

Assuming Jason is correct, that gives us a problem. 

The Maxima update seems to have stalled (there are no updates on the ticket for 3 weeks). If updating Maxima to 5.21.1 and ECL 10.4.1 need to be done together, it will probably be best to create a ecl-10.2.1.p0, which has all the small changes, and actually leave updating to the latest ECL code until it can be better coordinated with the Maxima update. 

At the moment, it seems several small but important changes to the ECL installation are being held up for a non-trivial set of changes needed if Mamima is updated. 

Dave 

Assignee: tbd

CC:  @williamstein @jhpalmieri @qed777 @nexttime @jaapspies @jasongrout @vbraun @jdemeyer

Resolution: duplicate

Reviewer: Volker Braun

Issue created by migration from https://trac.sagemath.org/ticket/9264





---

archive/issue_comments_102101.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -13,4 +13,14 @@\n \n The aim of this ticket is to update to the 10.4.1 source code, whilst ensuring all the relevant patches are applied. \n \n+## Important\n+\n+On #8951 Jason says \"As a reminder here, this (i.e. #8951) should *only* be merged simultaneously with the new maxima at #8731.\"\n+\n+Assuming Jason is correct, that gives us a problem. \n+\n+The Maxima update seems to have stalled (there are no updates on the ticket for 3 weeks). If updating Maxima to 5.21.1 and ECL 10.4.1 need to be done together, it will probably be best to create a ecl-10.2.1.p0, which has all the small changes, and actually leave updating to the latest ECL code until it can be better coordinated with the Maxima update. \n+\n+At the moment, it seems several small but important changes to the ECL installation are being held up for a non-trivial set of changes needed if Mamima is updated. \n+\n Dave \n``````\n",
    "created_at": "2010-06-18T14:00:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9264#issuecomment-102101",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -13,4 +13,14 @@
 
 The aim of this ticket is to update to the 10.4.1 source code, whilst ensuring all the relevant patches are applied. 
 
+## Important
+
+On #8951 Jason says "As a reminder here, this (i.e. #8951) should *only* be merged simultaneously with the new maxima at #8731."
+
+Assuming Jason is correct, that gives us a problem. 
+
+The Maxima update seems to have stalled (there are no updates on the ticket for 3 weeks). If updating Maxima to 5.21.1 and ECL 10.4.1 need to be done together, it will probably be best to create a ecl-10.2.1.p0, which has all the small changes, and actually leave updating to the latest ECL code until it can be better coordinated with the Maxima update. 
+
+At the moment, it seems several small but important changes to the ECL installation are being held up for a non-trivial set of changes needed if Mamima is updated. 
+
 Dave 
``````




---

archive/issue_comments_102102.json:
```json
{
    "body": "<a id='comment:2'></a>\nYour best chance is to see if you can give a positive review to\n#8645. The maxima spkg there:\n\n```\nhttp://sage.math.washington.edu/home/nbruin/maxima-5.20.1.p1.spkg\n```\nis the same maxima that is in sage now, with minimal changes applied to let maxima build under ECL 10.4.1.\n\nIf maxima.5.20.1.p1 on ecl.10.4.1 needs work, we might as well wait until maxima.5.21 is ready to be merged, because then the problem is ecl.10.4.1.\n\nWhen I tried, I couldn't get maxima to build properly under ecl.10.2 (its \"ASDF\" is too buggy)",
    "created_at": "2010-06-18T16:03:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9264#issuecomment-102102",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:2'></a>
Your best chance is to see if you can give a positive review to
#8645. The maxima spkg there:

```
http://sage.math.washington.edu/home/nbruin/maxima-5.20.1.p1.spkg
```
is the same maxima that is in sage now, with minimal changes applied to let maxima build under ECL 10.4.1.

If maxima.5.20.1.p1 on ecl.10.4.1 needs work, we might as well wait until maxima.5.21 is ready to be merged, because then the problem is ecl.10.4.1.

When I tried, I couldn't get maxima to build properly under ecl.10.2 (its "ASDF" is too buggy)



---

archive/issue_comments_102103.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2010-06-19T19:23:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9264#issuecomment-102103",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_102104.json:
```json
{
    "body": "<a id='comment:3'></a>\nI've created a new ECL package\n\nhttp://boxen.math.washington.edu/home/kirkby/revised-patches/ecl-10.4.1.spkg\n\nwhich has the following fixes applied:\n\n* Updates ECL to the latest upstream, 10.4.1\n* Applies a fix to stop ECL building in parallel, which is ticket #9187. This already has positive review. \n* Applies the fix from #8089 to disable the dynamic foreign function interface as advised by the ECL developer. This disables the use of assembly code on OpenSolaris x64, but no other platform.\n* Removes files from /tmp/ECL* as soon as they are no longer needed, as failure to do so can present problems on multi-user systems. \n\nAll changes have been checked with #8645, which has a change to Maxima which allows Maxima to build with the latest ECL. The patch on #8645 does **not** update Maxima to the latest version, as that creates problems which are non-trivial to solve. It does however fix a problem with Maxima not installing the library properly, and allows Maxima to build with the latest ECL>\n\nAs such, the attached ticket:\n \n* Allows Maxima to build the library properly whilst still working with the latest ECL. \n* Remove unwanted ECL tmp files. \n* Allows spkgs to build in parallel\n* Allow ECL to build on OpenSolaris x64. \n\nHere are the test results:\n\n == Testing on Solaris 10 SPARC in 32-bit mode. ==\n* Sun Blade 1000\n* 2 x 900 MHz UltraSPARC III+ CPUs\n* 2 GB RAM\n* Solaris 10 03/2005 (first release of Solaris 10)\n* gcc 4.4.3 (uses Sun linker and assembler) \n* Sage 4.4.4.alpha1\n\n```\n\tdone\nfor i in Copyright LGPL; do \\\n\t  /usr/bin/ginstall -c -m 644 /export/home/drkirkby/sage-4.4.4.alpha1/spkg/build/ecl-10.4.1/src/src/../$i /export/home/drkirkby/sage-4.4.4.alpha1/local/lib/; \\\n\tdone\n/bin/sh /export/home/drkirkby/sage-4.4.4.alpha1/spkg/build/ecl-10.4.1/src/src/gc/mkinstalldirs /export/home/drkirkby/sage-4.4.4.alpha1/local/share/man/man1\nfor i in doc/ecl.man doc/ecl-config.man; do \\\n\t    /usr/bin/ginstall -c -m 644 $i /export/home/drkirkby/sage-4.4.4.alpha1/local/share/man/man1/ecl.1; \\\n\tdone\nmake[1]: Leaving directory `/export/home/drkirkby/sage-4.4.4.alpha1/spkg/build/ecl-10.4.1/src/build'\n\nreal\t1m26.075s\nuser\t1m17.655s\nsys\t0m7.531s\nSuccessfully installed ecl-10.4.1\n``` \n\nHere is the Maxima 5.20.1.p1 installation from #8645\n\n```\ninstalling Maxima library as /export/home/drkirkby/sage-4.4.4.alpha1/local/lib/ecl//maxima.fas\n\nreal    22m32.432s\nuser    19m9.372s\nsys     2m51.674s\nSuccessfully installed maxima-5.20.1.p1\nNow cleaning up tmp files.\nrm: Cannot remove any directory in the path of the current working directory\n/export/home/drkirkby/sage-4.4.4.alpha1/spkg/build/maxima-5.20.1.p1\nMaking Sage/Python scripts relocatable...\nMaking script relocatable\nFinished installing maxima-5.20.1.p1.spkg\ndrkirkby@redstart:~/sage-4.4.4.alpha1$ \n```\n\n == Testing on OpenSolaris x64 06/2009 64-bit mode. ==\n* Sun Ultra 27\n* 2 x 3.33 GHz quad core Intel Xeon MHz\n* 12 GB RAM\n* OpenSolaris 06/2009 (Last release of OpenSolaris, updated to build 134)\n* gcc 4.4.4 (uses Sun linker and GNU assembler) \n* Sage 4.4.4.alpha1\n\n```\n/bin/sh /export/home/drkirkby/sage-4.4.4.alpha1/spkg/build/ecl-10.4.1/src/src/gc/mkinstalldirs /export/home/drkirkby/sage-4.4.4.alpha1/local/share/man/man1\nfor i in doc/ecl.man doc/ecl-config.man; do \\\n\t    /usr/bin/ginstall -c -m 644 $i /export/home/drkirkby/sage-4.4.4.alpha1/local/share/man/man1/ecl.1; \\\n\tdone\nmake[1]: Leaving directory `/export/home/drkirkby/sage-4.4.4.alpha1/spkg/build/ecl-10.4.1/src/build'\n\nreal\t1m26.075s\nuser\t1m17.655s\nsys\t0m7.531s\nSuccessfully installed ecl-10.4.1\n```\n\nMaxima 5.20.1.p1 will **not** build on this platform, but such a problem is not related to this ticket, and appears it might be an incorrect flag given in the source (-Wl,-G instead of -shared). This is documented at #9099\n\n## Testing on sage.math (Linux), 64-bit.\n\n```\nn/man1/ecl.1; \\\n\tdone\nmake[1]: Leaving directory `/home/kirkby/sage-4.4.3/spkg/build/ecl-10.4.1/src/build'\n\nreal\t2m16.904s\nuser\t1m44.990s\nsys\t0m14.980s\nSuccessfully installed ecl-10.4.1\nNow cleaning up tmp files.\nMaking Sage/Python scripts relocatable...\nMaking script relocatable\nFinished installing ecl-10.4.1.spkg\n```\n\nWe can also see Maxima, and the library are ok now. \n\n```\n;;; \ninstalling Maxima library as /home/kirkby/sage-4.4.3/local/lib/ecl//maxima.fas\n\nreal\t4m41.594s\nuser\t3m14.160s\nsys\t0m46.000s\nSuccessfully installed maxima-5.20.1.p1\nNow cleaning up tmp files.\nMaking Sage/Python scripts relocatable...\nMaking script relocatable\nFinished installing maxima-5.20.1.p1.spkg\n```\n\n## Note to Release manager\nThere are many tickets active at the minute for updates to Maxima and ECL. Once positively, this should be integrated with Maxima at #8645. At the time of writing, the use of the latest Maxima will cause problems with doctest failures, as Maxima's output is changed from the current version.",
    "created_at": "2010-06-19T19:23:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9264#issuecomment-102104",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:3'></a>
I've created a new ECL package

http://boxen.math.washington.edu/home/kirkby/revised-patches/ecl-10.4.1.spkg

which has the following fixes applied:

* Updates ECL to the latest upstream, 10.4.1
* Applies a fix to stop ECL building in parallel, which is ticket #9187. This already has positive review. 
* Applies the fix from #8089 to disable the dynamic foreign function interface as advised by the ECL developer. This disables the use of assembly code on OpenSolaris x64, but no other platform.
* Removes files from /tmp/ECL* as soon as they are no longer needed, as failure to do so can present problems on multi-user systems. 

All changes have been checked with #8645, which has a change to Maxima which allows Maxima to build with the latest ECL. The patch on #8645 does **not** update Maxima to the latest version, as that creates problems which are non-trivial to solve. It does however fix a problem with Maxima not installing the library properly, and allows Maxima to build with the latest ECL>

As such, the attached ticket:
 
* Allows Maxima to build the library properly whilst still working with the latest ECL. 
* Remove unwanted ECL tmp files. 
* Allows spkgs to build in parallel
* Allow ECL to build on OpenSolaris x64. 

Here are the test results:

 == Testing on Solaris 10 SPARC in 32-bit mode. ==
* Sun Blade 1000
* 2 x 900 MHz UltraSPARC III+ CPUs
* 2 GB RAM
* Solaris 10 03/2005 (first release of Solaris 10)
* gcc 4.4.3 (uses Sun linker and assembler) 
* Sage 4.4.4.alpha1

```
	done
for i in Copyright LGPL; do \
	  /usr/bin/ginstall -c -m 644 /export/home/drkirkby/sage-4.4.4.alpha1/spkg/build/ecl-10.4.1/src/src/../$i /export/home/drkirkby/sage-4.4.4.alpha1/local/lib/; \
	done
/bin/sh /export/home/drkirkby/sage-4.4.4.alpha1/spkg/build/ecl-10.4.1/src/src/gc/mkinstalldirs /export/home/drkirkby/sage-4.4.4.alpha1/local/share/man/man1
for i in doc/ecl.man doc/ecl-config.man; do \
	    /usr/bin/ginstall -c -m 644 $i /export/home/drkirkby/sage-4.4.4.alpha1/local/share/man/man1/ecl.1; \
	done
make[1]: Leaving directory `/export/home/drkirkby/sage-4.4.4.alpha1/spkg/build/ecl-10.4.1/src/build'

real	1m26.075s
user	1m17.655s
sys	0m7.531s
Successfully installed ecl-10.4.1
``` 

Here is the Maxima 5.20.1.p1 installation from #8645

```
installing Maxima library as /export/home/drkirkby/sage-4.4.4.alpha1/local/lib/ecl//maxima.fas

real    22m32.432s
user    19m9.372s
sys     2m51.674s
Successfully installed maxima-5.20.1.p1
Now cleaning up tmp files.
rm: Cannot remove any directory in the path of the current working directory
/export/home/drkirkby/sage-4.4.4.alpha1/spkg/build/maxima-5.20.1.p1
Making Sage/Python scripts relocatable...
Making script relocatable
Finished installing maxima-5.20.1.p1.spkg
drkirkby@redstart:~/sage-4.4.4.alpha1$ 
```

 == Testing on OpenSolaris x64 06/2009 64-bit mode. ==
* Sun Ultra 27
* 2 x 3.33 GHz quad core Intel Xeon MHz
* 12 GB RAM
* OpenSolaris 06/2009 (Last release of OpenSolaris, updated to build 134)
* gcc 4.4.4 (uses Sun linker and GNU assembler) 
* Sage 4.4.4.alpha1

```
/bin/sh /export/home/drkirkby/sage-4.4.4.alpha1/spkg/build/ecl-10.4.1/src/src/gc/mkinstalldirs /export/home/drkirkby/sage-4.4.4.alpha1/local/share/man/man1
for i in doc/ecl.man doc/ecl-config.man; do \
	    /usr/bin/ginstall -c -m 644 $i /export/home/drkirkby/sage-4.4.4.alpha1/local/share/man/man1/ecl.1; \
	done
make[1]: Leaving directory `/export/home/drkirkby/sage-4.4.4.alpha1/spkg/build/ecl-10.4.1/src/build'

real	1m26.075s
user	1m17.655s
sys	0m7.531s
Successfully installed ecl-10.4.1
```

Maxima 5.20.1.p1 will **not** build on this platform, but such a problem is not related to this ticket, and appears it might be an incorrect flag given in the source (-Wl,-G instead of -shared). This is documented at #9099

## Testing on sage.math (Linux), 64-bit.

```
n/man1/ecl.1; \
	done
make[1]: Leaving directory `/home/kirkby/sage-4.4.3/spkg/build/ecl-10.4.1/src/build'

real	2m16.904s
user	1m44.990s
sys	0m14.980s
Successfully installed ecl-10.4.1
Now cleaning up tmp files.
Making Sage/Python scripts relocatable...
Making script relocatable
Finished installing ecl-10.4.1.spkg
```

We can also see Maxima, and the library are ok now. 

```
;;; 
installing Maxima library as /home/kirkby/sage-4.4.3/local/lib/ecl//maxima.fas

real	4m41.594s
user	3m14.160s
sys	0m46.000s
Successfully installed maxima-5.20.1.p1
Now cleaning up tmp files.
Making Sage/Python scripts relocatable...
Making script relocatable
Finished installing maxima-5.20.1.p1.spkg
```

## Note to Release manager
There are many tickets active at the minute for updates to Maxima and ECL. Once positively, this should be integrated with Maxima at #8645. At the time of writing, the use of the latest Maxima will cause problems with doctest failures, as Maxima's output is changed from the current version.



---

archive/issue_comments_102105.json:
```json
{
    "body": "<a id='comment:4'></a>\nI have tested this ticket by building sage 4.4.3 with the following spkgs substituted:\nhttp://boxen.math.washington.edu/home/kirkby/revised-patches/ecl-10.4.1.spkg\nhttp://sage.math.washington.edu/home/nbruin/maxima-5.20.1.p1.spkg\nAll doctests pass on `sage.math.washington.edu`. Furthermore, the ecl-10.4.1 package looks like it does what it's supposed to. When I diff it with http://sage.math.washington.edu/home/nbruin/ecl-10.4.1.spkg there are some unexpected files and differences in binary files in the `.hg` subdir, but otherwise the packages agree.\n\nMerging this ticket should be a good stepping stone towards #8731 (assuming the issues there haven't been resolved by the time the next release merges are made). Merging this ticket would also resolve #8645, as well as all ECL related ticket referred to.",
    "created_at": "2010-06-21T06:02:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9264#issuecomment-102105",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:4'></a>
I have tested this ticket by building sage 4.4.3 with the following spkgs substituted:
http://boxen.math.washington.edu/home/kirkby/revised-patches/ecl-10.4.1.spkg
http://sage.math.washington.edu/home/nbruin/maxima-5.20.1.p1.spkg
All doctests pass on `sage.math.washington.edu`. Furthermore, the ecl-10.4.1 package looks like it does what it's supposed to. When I diff it with http://sage.math.washington.edu/home/nbruin/ecl-10.4.1.spkg there are some unexpected files and differences in binary files in the `.hg` subdir, but otherwise the packages agree.

Merging this ticket should be a good stepping stone towards #8731 (assuming the issues there haven't been resolved by the time the next release merges are made). Merging this ticket would also resolve #8645, as well as all ECL related ticket referred to.



---

archive/issue_comments_102106.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Nils Bruin\"",
    "created_at": "2010-06-21T06:02:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9264#issuecomment-102106",
    "user": "https://github.com/nbruin"
}
```

Changing reviewer from "" to "Nils Bruin"



---

archive/issue_comments_102107.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2010-06-21T06:02:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9264#issuecomment-102107",
    "user": "https://github.com/nbruin"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_102108.json:
```json
{
    "body": "<a id='comment:5'></a>\nI just noticed a small inaccuracy in the description of the hardware used to test this on OpenSolaris. It does not affect the validity of the ticket, but it is sensible to correct the error. \n\nThe section marked *Testing on OpenSolaris x64 06/2009 64-bit mode.* states the processors are:\n\n* 2 x 3.33 GHz quad core Intel Xeon MHz \n\nwhich is incorrect. Unfortunately, the Sun Ultra 27 does not support more than one CPU. A more accurate description of the hardware/software used to test this ECL package on OpenSolaris is:\n\n## Testing on OpenSolaris x64 06/2009 64-bit mode.\n* [Sun Ultra 27 workstation](http://www.sun.com/desktop/workstation/ultra27/)\n* 1 x 3.33 GHz 64-bit [Intel Xeon W3580](http://ark.intel.com/Product.aspx?id=39723) CPU (4 cores, 8 threads, 8 MB cache). \n* 12 GB RAM\n* [OpenSolaris](http://www.opensolaris.com/) 06/2009 (Last release of OpenSolaris, updated to build 134)\n* [gcc 4.4.4](http://gcc.gnu.org/gcc-4.4/changes.html) (uses Sun linker and GNU assembler)\n* Sage 4.4.4.alpha1 \n\nDave",
    "created_at": "2010-06-25T12:39:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9264#issuecomment-102108",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:5'></a>
I just noticed a small inaccuracy in the description of the hardware used to test this on OpenSolaris. It does not affect the validity of the ticket, but it is sensible to correct the error. 

The section marked *Testing on OpenSolaris x64 06/2009 64-bit mode.* states the processors are:

* 2 x 3.33 GHz quad core Intel Xeon MHz 

which is incorrect. Unfortunately, the Sun Ultra 27 does not support more than one CPU. A more accurate description of the hardware/software used to test this ECL package on OpenSolaris is:

## Testing on OpenSolaris x64 06/2009 64-bit mode.
* [Sun Ultra 27 workstation](http://www.sun.com/desktop/workstation/ultra27/)
* 1 x 3.33 GHz 64-bit [Intel Xeon W3580](http://ark.intel.com/Product.aspx?id=39723) CPU (4 cores, 8 threads, 8 MB cache). 
* 12 GB RAM
* [OpenSolaris](http://www.opensolaris.com/) 06/2009 (Last release of OpenSolaris, updated to build 134)
* [gcc 4.4.4](http://gcc.gnu.org/gcc-4.4/changes.html) (uses Sun linker and GNU assembler)
* Sage 4.4.4.alpha1 

Dave



---

archive/issue_comments_102109.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2010-06-25T15:45:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9264#issuecomment-102109",
    "user": "https://github.com/rlmill"
}
```

Resolution: fixed



---

archive/issue_events_035489.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-06-25T15:45:15Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/9264",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9264#event-35489"
}
```



---

archive/issue_comments_102110.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-4.5.alpha0\"",
    "created_at": "2010-06-25T15:45:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9264#issuecomment-102110",
    "user": "https://github.com/rlmill"
}
```

Changing merged from "" to "sage-4.5.alpha0"



---

archive/issue_comments_102111.json:
```json
{
    "body": "<a id='comment:7'></a>\nApplied http://boxen.math.washington.edu/home/kirkby/revised-patches/ecl-10.4.1.spkg",
    "created_at": "2010-06-25T15:45:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9264#issuecomment-102111",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:7'></a>
Applied http://boxen.math.washington.edu/home/kirkby/revised-patches/ecl-10.4.1.spkg



---

archive/issue_comments_102112.json:
```json
{
    "body": "Changing status from closed to new.",
    "created_at": "2010-07-11T19:16:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9264#issuecomment-102112",
    "user": "https://github.com/rlmill"
}
```

Changing status from closed to new.



---

archive/issue_events_035490.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-07-11T19:16:40Z",
    "event": "reopened",
    "issue": "https://github.com/sagemath/sagetest/issues/9264",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9264#event-35490"
}
```



---

archive/issue_comments_102113.json:
```json
{
    "body": "Resolution changed from fixed to ",
    "created_at": "2010-07-11T19:16:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9264#issuecomment-102113",
    "user": "https://github.com/rlmill"
}
```

Resolution changed from fixed to 



---

archive/issue_comments_102114.json:
```json
{
    "body": "Changing merged from \"sage-4.5.alpha0\" to \"\"",
    "created_at": "2010-07-11T19:16:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9264#issuecomment-102114",
    "user": "https://github.com/rlmill"
}
```

Changing merged from "sage-4.5.alpha0" to ""



---

archive/issue_comments_102115.json:
```json
{
    "body": "<a id='comment:9'></a>\necl-10.2.1.p3 does not compile on Fedora 14:\n\n```\nlibeclmin.a(sequence.o): In function `cl_sublis':\n/home/vbraun/Code/ecl/src/c/sequence.d:106: multiple definition of `cl_sublis'\nlibeclmin.a(list.o):/home/vbraun/Code/ecl/src/c/list.d:778: first defined here\nc/all_symbols.o:(.data.rel+0x9b20): undefined reference to `cl_subseq'\nlibeclmin.a(string.o): In function `string_trim0':\n/home/vbraun/Code/ecl/src/c/string.d:756: undefined reference to `cl_subseq'\nlibeclmin.a(sequence.o): In function `cl_copy_seq':\ntmp.c:(.text+0x4c0): undefined reference to `cl_subseq'\nlibeclmin.a(pathname.o): In function `make_one':\n/home/vbraun/Code/ecl/src/c/pathname.d:234: undefined reference to `cl_subseq'\n/home/vbraun/Code/ecl/src/c/pathname.d:234: undefined reference to `cl_subseq'\ncollect2: ld returned 1 exit status\nmake[1]: *** [ecl_min] Error 1\n```\nThe current ecl-10.4.1 compiles fine. Given that Fedora 14 is scheduled to be released next Monday, is there any chance we can update ecl? Ideally in the next Sage (4.6.1) release...",
    "created_at": "2010-10-29T01:20:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9264#issuecomment-102115",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:9'></a>
ecl-10.2.1.p3 does not compile on Fedora 14:

```
libeclmin.a(sequence.o): In function `cl_sublis':
/home/vbraun/Code/ecl/src/c/sequence.d:106: multiple definition of `cl_sublis'
libeclmin.a(list.o):/home/vbraun/Code/ecl/src/c/list.d:778: first defined here
c/all_symbols.o:(.data.rel+0x9b20): undefined reference to `cl_subseq'
libeclmin.a(string.o): In function `string_trim0':
/home/vbraun/Code/ecl/src/c/string.d:756: undefined reference to `cl_subseq'
libeclmin.a(sequence.o): In function `cl_copy_seq':
tmp.c:(.text+0x4c0): undefined reference to `cl_subseq'
libeclmin.a(pathname.o): In function `make_one':
/home/vbraun/Code/ecl/src/c/pathname.d:234: undefined reference to `cl_subseq'
/home/vbraun/Code/ecl/src/c/pathname.d:234: undefined reference to `cl_subseq'
collect2: ld returned 1 exit status
make[1]: *** [ecl_min] Error 1
```
The current ecl-10.4.1 compiles fine. Given that Fedora 14 is scheduled to be released next Monday, is there any chance we can update ecl? Ideally in the next Sage (4.6.1) release...



---

archive/issue_comments_102116.json:
```json
{
    "body": "<a id='comment:10'></a>\nYou should open a new trac ticket for this. \n\nDave",
    "created_at": "2010-10-29T02:47:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9264#issuecomment-102116",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:10'></a>
You should open a new trac ticket for this. 

Dave



---

archive/issue_comments_102117.json:
```json
{
    "body": "<a id='comment:11'></a>\nI've created a new trac ticket for you - see #10185.",
    "created_at": "2010-10-29T03:40:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9264#issuecomment-102117",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:11'></a>
I've created a new trac ticket for you - see #10185.



---

archive/issue_comments_102118.json:
```json
{
    "body": "<a id='comment:12'></a>\nI realise this ticket was still open, but I still think the Fedora issue should go on a ticket of its own. The package I made for this ticket is not the latest ECL, so if we do update ECL, we will probably end up using a later version of it. The version here does not have some fixes which are in the current ECL in Sage. In particular, #9917 has fixes which are not in my package referenced here.",
    "created_at": "2010-10-29T03:56:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9264#issuecomment-102118",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:12'></a>
I realise this ticket was still open, but I still think the Fedora issue should go on a ticket of its own. The package I made for this ticket is not the latest ECL, so if we do update ECL, we will probably end up using a later version of it. The version here does not have some fixes which are in the current ECL in Sage. In particular, #9917 has fixes which are not in my package referenced here.



---

archive/issue_comments_102119.json:
```json
{
    "body": "<a id='comment:13'></a>\nI went through `./src/src/c/dpp.c` in your ecl-10.4.1 spkg (http://boxen.math.washington.edu/home/kirkby/revised-patches/ecl-10.4.1.spkg) and checked that all `fprint()`s have the right number of arguments. So upstream fixed #9917 and we don't have to patch it any more.\n\nI removed the included gmp as discussed in #9493.\n\nAre there any other outstanding patches? I've looked through trac and there seem to be many overlapping discussions. But I could not find any outstanding bugs.\n\nThe new ecl requires also a new maxima (5.22.1 is newest upstream release), so we have to update both at the same time. I've created #10187 for a simultaneous ecl+maxima update.",
    "created_at": "2010-10-29T13:59:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9264#issuecomment-102119",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:13'></a>
I went through `./src/src/c/dpp.c` in your ecl-10.4.1 spkg (http://boxen.math.washington.edu/home/kirkby/revised-patches/ecl-10.4.1.spkg) and checked that all `fprint()`s have the right number of arguments. So upstream fixed #9917 and we don't have to patch it any more.

I removed the included gmp as discussed in #9493.

Are there any other outstanding patches? I've looked through trac and there seem to be many overlapping discussions. But I could not find any outstanding bugs.

The new ecl requires also a new maxima (5.22.1 is newest upstream release), so we have to update both at the same time. I've created #10187 for a simultaneous ecl+maxima update.



---

archive/issue_comments_102120.json:
```json
{
    "body": "<a id='comment:14'></a>\nThis ticket can be closed as we did update to ecl-10.4.1 a while ago.",
    "created_at": "2011-02-19T13:37:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9264#issuecomment-102120",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:14'></a>
This ticket can be closed as we did update to ecl-10.4.1 a while ago.



---

archive/issue_comments_102121.json:
```json
{
    "body": "<a id='comment:15'></a>\nIn fact, now ECL is at version 11.1.1 in Sage.  #9493 is still open for the GMP removal, otherwise this ticket can be closed.",
    "created_at": "2011-06-28T16:07:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9264#issuecomment-102121",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:15'></a>
In fact, now ECL is at version 11.1.1 in Sage.  #9493 is still open for the GMP removal, otherwise this ticket can be closed.



---

archive/issue_comments_102122.json:
```json
{
    "body": "Changing author from \"David Kirkby\" to \"\"",
    "created_at": "2011-06-28T16:07:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9264#issuecomment-102122",
    "user": "https://github.com/kcrisman"
}
```

Changing author from "David Kirkby" to ""



---

archive/issue_comments_102123.json:
```json
{
    "body": "Changing reviewer from \"Nils Bruin\" to \"Volker Braun\"",
    "created_at": "2011-06-28T16:07:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9264#issuecomment-102123",
    "user": "https://github.com/kcrisman"
}
```

Changing reviewer from "Nils Bruin" to "Volker Braun"



---

archive/issue_comments_102124.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-06-28T16:07:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9264#issuecomment-102124",
    "user": "https://github.com/kcrisman"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_102125.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-06-28T16:09:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9264#issuecomment-102125",
    "user": "https://github.com/kcrisman"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_102126.json:
```json
{
    "body": "<a id='comment:17'></a>\nReplying to [kcrisman](#comment%3A15):\n> In fact, now ECL is at version 11.1.1 in Sage.  #9493 is still open for the GMP removal, otherwise this ticket can be closed.\n\n\nI wonder if at least my *Special Update / Build Instructions* from there went into the ECL spkg... 8)",
    "created_at": "2011-06-28T16:15:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9264#issuecomment-102126",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:17'></a>
Replying to [kcrisman](#comment%3A15):
> In fact, now ECL is at version 11.1.1 in Sage.  #9493 is still open for the GMP removal, otherwise this ticket can be closed.


I wonder if at least my *Special Update / Build Instructions* from there went into the ECL spkg... 8)



---

archive/issue_comments_102127.json:
```json
{
    "body": "<a id='comment:18'></a>\nWell, unpack ecl-11.1.1.p1.spkg and find out.  At any rate, that is on the ticket description at #9493 still, so this ticket should be closed.",
    "created_at": "2011-06-28T16:19:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9264#issuecomment-102127",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:18'></a>
Well, unpack ecl-11.1.1.p1.spkg and find out.  At any rate, that is on the ticket description at #9493 still, so this ticket should be closed.



---

archive/issue_comments_102128.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [kcrisman](#comment%3A18):\n> Well, unpack ecl-11.1.1.p1.spkg and find out.  At any rate, that is on the ticket description at #9493 still, so this ticket should be closed.\n\nNo offense intended, by the way - it just seems more relevant to discuss this at that ticket.",
    "created_at": "2011-06-28T16:20:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9264#issuecomment-102128",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:19'></a>
Replying to [kcrisman](#comment%3A18):
> Well, unpack ecl-11.1.1.p1.spkg and find out.  At any rate, that is on the ticket description at #9493 still, so this ticket should be closed.

No offense intended, by the way - it just seems more relevant to discuss this at that ticket.



---

archive/issue_comments_102129.json:
```json
{
    "body": "<a id='comment:20'></a>\nReplying to [kcrisman](#comment%3A18):\n> Well, unpack ecl-11.1.1.p1.spkg and find out.  At any rate, that is on the ticket description at #9493 still, so this ticket should be closed.\n\n\nCould be the first time I ever use `sage -info ...` (which ought to dump `SPKG.txt` to the screen, but unfortunately currently doesn't: #11021). :D",
    "created_at": "2011-06-28T16:29:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9264#issuecomment-102129",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:20'></a>
Replying to [kcrisman](#comment%3A18):
> Well, unpack ecl-11.1.1.p1.spkg and find out.  At any rate, that is on the ticket description at #9493 still, so this ticket should be closed.


Could be the first time I ever use `sage -info ...` (which ought to dump `SPKG.txt` to the screen, but unfortunately currently doesn't: #11021). :D



---

archive/issue_events_035491.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-06-28T20:40:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9264",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9264#event-35491"
}
```



---

archive/issue_events_035492.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-07-05T10:08:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/9264",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9264#event-35492"
}
```



---

archive/issue_comments_102130.json:
```json
{
    "body": "Resolution: duplicate",
    "created_at": "2011-07-05T10:08:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9264#issuecomment-102130",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: duplicate
