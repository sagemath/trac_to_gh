# Issue 9005: Derangements

archive/issues_009005.json:
```json
{
    "assignees": [],
    "body": "The current implementation in Sage for derangements is a wrapper for the GAP \"derangements\" and \"number_of_derangements\" which is very restrictive.  For example, it doesn't allow derangements of arbitrary lists or strings.  The documentation observes \n\n\"Warning - Wraps GAP - hence mset must be a list of objects that have string representations that can be interpreted by the GAP interpreter. If mset consists of at all complicated Sage objects, this function does not do what you expect. A proper function should be written! (TODO!)\" \n\nThis file is an attempt to provide that.\n\nAssignee: **sage-combinat**\n\nCC:  @nathanncohen @ppurka\n\nKeywords: **derangements**\n\nReviewer: **Ben Salisbury**\n\nAuthor: **Alasdair McAndrew, Travis Scrimshaw**\n\nMerged: **sage-5.10.beta1**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/9005_\n\n",
    "closed_at": "2013-04-28T10:32:09Z",
    "created_at": "2010-05-21T10:20:57Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.10",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Derangements",
    "type": "issue",
    "updated_at": "2013-04-28T10:32:09Z",
    "url": "https://github.com/sagemath/sage/issues/9005",
    "user": "https://github.com/sagetrac-amca01"
}
```
The current implementation in Sage for derangements is a wrapper for the GAP "derangements" and "number_of_derangements" which is very restrictive.  For example, it doesn't allow derangements of arbitrary lists or strings.  The documentation observes 

"Warning - Wraps GAP - hence mset must be a list of objects that have string representations that can be interpreted by the GAP interpreter. If mset consists of at all complicated Sage objects, this function does not do what you expect. A proper function should be written! (TODO!)" 

This file is an attempt to provide that.

Assignee: **sage-combinat**

CC:  @nathanncohen @ppurka

Keywords: **derangements**

Reviewer: **Ben Salisbury**

Author: **Alasdair McAndrew, Travis Scrimshaw**

Merged: **sage-5.10.beta1**

_Issue created by migration from https://trac.sagemath.org/ticket/9005_





---

archive/issue_events_101026.json:
```json
{
    "actor": "https://github.com/sagetrac-amca01",
    "created_at": "2010-05-21T10:20:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/9005",
    "milestone_number": null,
    "milestone_title": "sage-5.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9005#event-101026"
}
```



---

archive/issue_events_101027.json:
```json
{
    "actor": "https://github.com/sagetrac-amca01",
    "created_at": "2010-05-21T10:20:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9005",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "component: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9005#event-101027"
}
```



---

archive/issue_events_101028.json:
```json
{
    "actor": "https://github.com/sagetrac-amca01",
    "created_at": "2010-05-21T10:20:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9005",
    "label": "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9005#event-101028"
}
```



---

archive/issue_events_101029.json:
```json
{
    "actor": "https://github.com/sagetrac-amca01",
    "created_at": "2010-05-21T10:20:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9005",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9005#event-101029"
}
```



---

archive/issue_comments_076031.json:
```json
{
    "body": "Work Issues: **It does not yet pass all doctests**",
    "created_at": "2010-05-21T10:21:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9005",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9005#issuecomment-76031",
    "user": "https://github.com/sagetrac-amca01"
}
```

Work Issues: **It does not yet pass all doctests**



---

archive/issue_comments_076032.json:
```json
{
    "body": "Attachment: **[derangements.sage.gz](https://github.com/sagemath/sage/files/ticket9005/derangements.sage.gz)**",
    "created_at": "2010-05-29T06:00:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9005",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9005#issuecomment-76032",
    "user": "https://github.com/sagetrac-amca01"
}
```

Attachment: **[derangements.sage.gz](https://github.com/sagemath/sage/files/ticket9005/derangements.sage.gz)**



---

archive/issue_comments_076033.json:
```json
{
    "body": "Changed work issues from **It does not yet pass all doctests** to none",
    "created_at": "2013-04-01T19:40:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9005",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9005#issuecomment-76033",
    "user": "https://github.com/tscrim"
}
```

Changed work issues from **It does not yet pass all doctests** to none



---

archive/issue_events_101030.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2013-04-01T19:40:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9005",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9005#event-101030"
}
```



---

archive/issue_events_101031.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2013-04-01T19:40:04Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/9005",
    "milestone_number": null,
    "milestone_title": "sage-5.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9005#event-101031"
}
```



---

archive/issue_comments_076034.json:
```json
{
    "body": "Changed author from **Alasdair McAndrew** to **Alasdair McAndrew, Travis Scrimshaw**",
    "created_at": "2013-04-01T19:40:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9005",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9005#issuecomment-76034",
    "user": "https://github.com/tscrim"
}
```

Changed author from **Alasdair McAndrew** to **Alasdair McAndrew, Travis Scrimshaw**



---

archive/issue_comments_076035.json:
```json
{
    "body": "Changed upstream from **Not yet reported upstream; Will do shortly.** to none",
    "created_at": "2013-04-01T19:40:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9005",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9005#issuecomment-76035",
    "user": "https://github.com/tscrim"
}
```

Changed upstream from **Not yet reported upstream; Will do shortly.** to none



---

archive/issue_comments_076036.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nConverted the sage file into a patch and brought it up to our current standards. Ready for review.",
    "created_at": "2013-04-01T19:40:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9005",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9005#issuecomment-76036",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:4'>Comment 4:</a>
Converted the sage file into a patch and brought it up to our current standards. Ready for review.



---

archive/issue_events_101032.json:
```json
{
    "actor": "https://github.com/bsalisbury1",
    "created_at": "2013-04-18T17:36:06Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/9005",
    "milestone_number": null,
    "milestone_title": "sage-5.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9005#event-101032"
}
```



---

archive/issue_events_101033.json:
```json
{
    "actor": "https://github.com/bsalisbury1",
    "created_at": "2013-04-18T17:36:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/9005",
    "milestone_number": null,
    "milestone_title": "sage-5.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9005#event-101033"
}
```



---

archive/issue_events_101034.json:
```json
{
    "actor": "https://github.com/bsalisbury1",
    "created_at": "2013-04-18T17:36:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9005",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9005#event-101034"
}
```



---

archive/issue_events_101035.json:
```json
{
    "actor": "https://github.com/bsalisbury1",
    "created_at": "2013-04-18T17:36:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9005",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9005#event-101035"
}
```



---

archive/issue_comments_076037.json:
```json
{
    "body": "Reviewer: **Ben Salisbury**",
    "created_at": "2013-04-18T17:36:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9005",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9005#issuecomment-76037",
    "user": "https://github.com/bsalisbury1"
}
```

Reviewer: **Ben Salisbury**



---

archive/issue_comments_076038.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nThe patch is not a proper patch file, patches should be generated using `hg export tip`.",
    "created_at": "2013-04-23T13:18:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9005",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9005#issuecomment-76038",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'>Comment 6:</a>
The patch is not a proper patch file, patches should be generated using `hg export tip`.



---

archive/issue_events_101036.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-23T13:18:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9005",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9005#event-101036"
}
```



---

archive/issue_events_101037.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-23T13:18:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9005",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9005#event-101037"
}
```



---

archive/issue_events_101038.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2013-04-23T15:16:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9005",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9005#event-101038"
}
```



---

archive/issue_events_101039.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2013-04-23T15:16:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9005",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9005#event-101039"
}
```



---

archive/issue_comments_076039.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nAttachment: **[trac_9005-derangements-ts.patch.gz](https://github.com/sagemath/sage/files/ticket9005/trac_9005-derangements-ts.patch.gz)**\n\nSorry about that. Fixed.",
    "created_at": "2013-04-23T15:16:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9005",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9005#issuecomment-76039",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:7'>Comment 7:</a>
Attachment: **[trac_9005-derangements-ts.patch.gz](https://github.com/sagemath/sage/files/ticket9005/trac_9005-derangements-ts.patch.gz)**

Sorry about that. Fixed.



---

archive/issue_comments_076040.json:
```json
{
    "body": "Merged: **sage-5.10.beta1**",
    "created_at": "2013-04-28T10:32:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9005",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9005#issuecomment-76040",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.10.beta1**



---

archive/issue_events_101040.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-28T10:32:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9005",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9005#event-101040"
}
```



---

archive/issue_events_101041.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-28T10:32:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/9005",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9005#event-101041"
}
```
