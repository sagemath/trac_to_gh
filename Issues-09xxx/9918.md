# Issue 9918: triangulate point configurations

archive/issues_009917.json:
```json
{
    "body": "The attached patch implements triangulations of point configurations in arbitrary dimensions in Sage/Cython/C++ without relying on TOPCOM. \n\n```\nsage: points = PointConfiguration([[0,0],[0,1],[1,0],[1,1],[-1,-1]]);\nsage: points\nA point configuration in QQ^2 consisting of 5 points. The \ntriangulations of this point configuration are assumed to \nbe connected, not necessarily fine, not necessarily regular.\nsage: triang = points.triangulate()   # find one triangulation       \nsage: triang\n(<0,1,2>, <0,1,4>, <0,2,4>, <1,2,3>)\nsage: triang[0]\n(0, 1, 2)\nsage: list( points.triangulations() )\n[(<0,1,2>, <0,1,4>, <0,2,4>, <1,2,3>), \n (<0,1,3>, <0,1,4>, <0,2,3>, <0,2,4>), \n (<1,2,3>, <1,2,4>), \n (<1,3,4>, <2,3,4>)]\nsage: triang.plot(axes=False)                                        \n```\nThe internal implementation covers finding a single triangulation as well as enumerating all triangulations connected to it by bistellar flips. TOPCOM is required to test for regularity and/or to find non-connected triangulations.\n\nWhile not quite as fast, my limited testing shows the performance to be in the same order of magnitude as TOPCOM:\n\n```\nsage: U=matrix([\n...      [ 0, 0, 0, 0, 0, 2, 4,-1, 1, 1, 0, 0, 1, 0],\n...      [ 0, 0, 0, 1, 0, 0,-1, 0, 0, 0, 0, 0, 0, 0],\n...      [ 0, 2, 0, 0, 0, 0,-1, 0, 1, 0, 1, 0, 0, 1],\n...      [ 0, 1, 1, 0, 0, 1, 0,-2, 1, 0, 0,-1, 1, 1],\n...      [ 0, 0, 0, 0, 1, 0,-1, 0, 0, 0, 0, 0, 0, 0]\n...   ])\nsage: pc = PointConfiguration(U.columns())\nsage: pc.set_engine('internal')\nsage: time len(pc.triangulations_list())\nCPU times: user 23.26 s, sys: 0.02 s, total: 23.29 s\nWall time: 23.32 s\n9623\nsage: pc.set_engine('TOPCOM')\nsage: time len(pc.triangulations_list())\nCPU times: user 7.80 s, sys: 0.13 s, total: 7.93 s\nWall time: 8.37 s\n9623\n```\nSee also #8169: include TOPCOM, where an optional spkg is being worked on.\n\nAssignee: mhampton\n\nCC:  mhampton @novoselt\n\nResolution: fixed\n\nAuthor: Volker Braun\n\nReviewer: Marshall Hampton\n\nMerged: sage-4.6.2.alpha3\n\nIssue created by migration from https://trac.sagemath.org/ticket/9918\n\n",
    "closed_at": "2011-01-27T13:14:51Z",
    "created_at": "2010-09-16T11:22:09Z",
    "labels": [
        "component: geometry"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.6.2",
    "title": "triangulate point configurations",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/9918",
    "user": "https://github.com/vbraun"
}
```
The attached patch implements triangulations of point configurations in arbitrary dimensions in Sage/Cython/C++ without relying on TOPCOM. 

```
sage: points = PointConfiguration([[0,0],[0,1],[1,0],[1,1],[-1,-1]]);
sage: points
A point configuration in QQ^2 consisting of 5 points. The 
triangulations of this point configuration are assumed to 
be connected, not necessarily fine, not necessarily regular.
sage: triang = points.triangulate()   # find one triangulation       
sage: triang
(<0,1,2>, <0,1,4>, <0,2,4>, <1,2,3>)
sage: triang[0]
(0, 1, 2)
sage: list( points.triangulations() )
[(<0,1,2>, <0,1,4>, <0,2,4>, <1,2,3>), 
 (<0,1,3>, <0,1,4>, <0,2,3>, <0,2,4>), 
 (<1,2,3>, <1,2,4>), 
 (<1,3,4>, <2,3,4>)]
sage: triang.plot(axes=False)                                        
```
The internal implementation covers finding a single triangulation as well as enumerating all triangulations connected to it by bistellar flips. TOPCOM is required to test for regularity and/or to find non-connected triangulations.

While not quite as fast, my limited testing shows the performance to be in the same order of magnitude as TOPCOM:

```
sage: U=matrix([
...      [ 0, 0, 0, 0, 0, 2, 4,-1, 1, 1, 0, 0, 1, 0],
...      [ 0, 0, 0, 1, 0, 0,-1, 0, 0, 0, 0, 0, 0, 0],
...      [ 0, 2, 0, 0, 0, 0,-1, 0, 1, 0, 1, 0, 0, 1],
...      [ 0, 1, 1, 0, 0, 1, 0,-2, 1, 0, 0,-1, 1, 1],
...      [ 0, 0, 0, 0, 1, 0,-1, 0, 0, 0, 0, 0, 0, 0]
...   ])
sage: pc = PointConfiguration(U.columns())
sage: pc.set_engine('internal')
sage: time len(pc.triangulations_list())
CPU times: user 23.26 s, sys: 0.02 s, total: 23.29 s
Wall time: 23.32 s
9623
sage: pc.set_engine('TOPCOM')
sage: time len(pc.triangulations_list())
CPU times: user 7.80 s, sys: 0.13 s, total: 7.93 s
Wall time: 8.37 s
9623
```
See also #8169: include TOPCOM, where an optional spkg is being worked on.

Assignee: mhampton

CC:  mhampton @novoselt

Resolution: fixed

Author: Volker Braun

Reviewer: Marshall Hampton

Merged: sage-4.6.2.alpha3

Issue created by migration from https://trac.sagemath.org/ticket/9918





---

archive/issue_comments_124462.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2010-09-16T11:24:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9918#issuecomment-124462",
    "user": "https://github.com/vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_124463.json:
```json
{
    "body": "<a id='comment:2'></a>\nPasses tests, coverage, documentation looks good.  Nice work!  I haven't tested with TOPCOM but I don't think that's necessary since everything works without it.",
    "created_at": "2011-01-13T01:47:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9918#issuecomment-124463",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

<a id='comment:2'></a>
Passes tests, coverage, documentation looks good.  Nice work!  I haven't tested with TOPCOM but I don't think that's necessary since everything works without it.



---

archive/issue_comments_124464.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-01-13T01:47:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9918#issuecomment-124464",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_124465.json:
```json
{
    "body": "Reviewer: Marshall Hampton",
    "created_at": "2011-01-13T01:47:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9918#issuecomment-124465",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

Reviewer: Marshall Hampton



---

archive/issue_events_030269.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-01-13T04:59:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9918",
    "milestone": "sage-4.6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9918#event-30269"
}
```



---

archive/issue_comments_124466.json:
```json
{
    "body": "<a id='comment:4'></a>\nFor the record:\n\n```\n/disk/scratch/novoselt/sage/devel/sage/doc/en/reference/sage/geometry/triangulation/point_configuration.rst:638: WARNING: duplicate citation BSS, other instance in /disk/scratch/novoselt/sage/devel/sage/doc/en/reference/sage/geometry/polyhedra.rst\n```\nI am not sure what we are supposed to do with this (personally, I like to have references in the file where they are referenced), but the documentation does not build without warnings...",
    "created_at": "2011-01-22T21:15:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9918#issuecomment-124466",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:4'></a>
For the record:

```
/disk/scratch/novoselt/sage/devel/sage/doc/en/reference/sage/geometry/triangulation/point_configuration.rst:638: WARNING: duplicate citation BSS, other instance in /disk/scratch/novoselt/sage/devel/sage/doc/en/reference/sage/geometry/polyhedra.rst
```
I am not sure what we are supposed to do with this (personally, I like to have references in the file where they are referenced), but the documentation does not build without warnings...



---

archive/issue_comments_124467.json:
```json
{
    "body": "<a id='comment:5'></a>\nSee also:\n\nhttps://groups.google.com/d/topic/sage-devel/26YSkYOztus/discussion\n\nUntil there is a proper way of dealing with duplicate references, I think it is best to keep the warning around. The alternatives all suck...",
    "created_at": "2011-01-23T05:12:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9918#issuecomment-124467",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:5'></a>
See also:

https://groups.google.com/d/topic/sage-devel/26YSkYOztus/discussion

Until there is a proper way of dealing with duplicate references, I think it is best to keep the warning around. The alternatives all suck...



---

archive/issue_comments_124468.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2011-01-26T17:04:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9918#issuecomment-124468",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_124469.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [novoselt](#comment%3A4):\n> For the record:\n> \n> ```\n> /disk/scratch/novoselt/sage/devel/sage/doc/en/reference/sage/geometry/triangulation/point_configuration.rst:638: WARNING: duplicate citation BSS, other instance in /disk/scratch/novoselt/sage/devel/sage/doc/en/reference/sage/geometry/polyhedra.rst\n> ```\n> I am not sure what we are supposed to do with this (personally, I like to have references in the file where they are referenced), but the documentation does not build without warnings...\n\n\nI'm afraid a Sphinx warning is sufficient reason for needs_work...",
    "created_at": "2011-01-26T17:04:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9918#issuecomment-124469",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'></a>
Replying to [novoselt](#comment%3A4):
> For the record:
> 
> ```
> /disk/scratch/novoselt/sage/devel/sage/doc/en/reference/sage/geometry/triangulation/point_configuration.rst:638: WARNING: duplicate citation BSS, other instance in /disk/scratch/novoselt/sage/devel/sage/doc/en/reference/sage/geometry/polyhedra.rst
> ```
> I am not sure what we are supposed to do with this (personally, I like to have references in the file where they are referenced), but the documentation does not build without warnings...


I'm afraid a Sphinx warning is sufficient reason for needs_work...



---

archive/issue_comments_124470.json:
```json
{
    "body": "Attachment [trac_9918_triangulate_point_configurations.patch](tarball://root/attachments/some-uuid/ticket9918/trac_9918_triangulate_point_configurations.patch) by @vbraun created at 2011-01-26 22:44:17\n\nUpdated patch",
    "created_at": "2011-01-26T22:44:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9918#issuecomment-124470",
    "user": "https://github.com/vbraun"
}
```

Attachment [trac_9918_triangulate_point_configurations.patch](tarball://root/attachments/some-uuid/ticket9918/trac_9918_triangulate_point_configurations.patch) by @vbraun created at 2011-01-26 22:44:17

Updated patch



---

archive/issue_comments_124471.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2011-01-26T22:46:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9918#issuecomment-124471",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_124472.json:
```json
{
    "body": "<a id='comment:7'></a>\nFine, if lack of warnings is more important than usefulness of the documentation. I removed the text of the citation, leaving only the link to the same citation a different module. Now Sphinx doesn't complain any more.",
    "created_at": "2011-01-26T22:46:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9918#issuecomment-124472",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:7'></a>
Fine, if lack of warnings is more important than usefulness of the documentation. I removed the text of the citation, leaving only the link to the same citation a different module. Now Sphinx doesn't complain any more.



---

archive/issue_comments_124473.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-01-27T13:14:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9918#issuecomment-124473",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_030270.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-01-27T13:14:51Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/9918",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9918#event-30270"
}
```



---

archive/issue_comments_124474.json:
```json
{
    "body": "Merged: sage-4.6.2.alpha3",
    "created_at": "2011-01-27T13:14:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9918#issuecomment-124474",
    "user": "https://github.com/jdemeyer"
}
```

Merged: sage-4.6.2.alpha3
