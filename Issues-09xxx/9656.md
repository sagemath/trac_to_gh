# Issue 9656: Code blocks in the notebook's interactive help get code overlaping itself

archive/issues_009656.json:
```json
{
    "body": "This was reported some time ago in sage-support. As the reporter said, a picture is worth a thousand words, so here's a screenshot.\n\nThis is easily corrected (in firefox) by increasing and decreasiing the resolution using Ctrl++ and Ctrl+- .\n\n**Assignee:** olazo\n\n**CC:**  acleone @williamstein @qed777 @jasongrout\n\n**Author:** Tim Dumol\n\nIssue created by migration from https://trac.sagemath.org/ticket/9656\n\n",
    "closed_at": "2018-08-10T09:46:06Z",
    "created_at": "2010-08-01T02:32:38Z",
    "labels": [
        "component: notebook",
        "bug",
        "worksforme"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Code blocks in the notebook's interactive help get code overlaping itself",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/9656",
    "user": "https://trac.sagemath.org/admin/accounts/users/olazo"
}
```
This was reported some time ago in sage-support. As the reporter said, a picture is worth a thousand words, so here's a screenshot.

This is easily corrected (in firefox) by increasing and decreasiing the resolution using Ctrl++ and Ctrl+- .

**Assignee:** olazo

**CC:**  acleone @williamstein @qed777 @jasongrout

**Author:** Tim Dumol

Issue created by migration from https://trac.sagemath.org/ticket/9656





---

archive/attachments_012371.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "ugly_help.png",
    "asset_url": "tarball://root/attachments/some-uuid/ticket9656/ugly_help.png",
    "created_at": "2010-08-01T02:33:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9656",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.png",
    "user": "https://trac.sagemath.org/admin/accounts/users/olazo"
}
```



---

archive/issue_comments_109279.json:
```json
{
    "body": "",
    "created_at": "2010-08-01T02:33:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9656#issuecomment-109279",
    "user": "https://trac.sagemath.org/admin/accounts/users/olazo"
}
```





---

archive/issue_comments_109280.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n This was reported some time ago in sage-support. As the reporter said, a picture is worth a thousand words, so here's a screenshot.\n+\n+This is easily corrected (in firefox) by increasing and decreasiing the resolution using Ctrl++ and Ctrl+- .\n``````\n",
    "created_at": "2010-08-01T02:34:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9656#issuecomment-109280",
    "user": "https://trac.sagemath.org/admin/accounts/users/olazo"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 This was reported some time ago in sage-support. As the reporter said, a picture is worth a thousand words, so here's a screenshot.
+
+This is easily corrected (in firefox) by increasing and decreasiing the resolution using Ctrl++ and Ctrl+- .
``````




---

archive/issue_events_028795.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/9656",
    "rename": {
        "from": "Code blocks in the notebook's interactive help get code overlaping it'self",
        "to": "Code blocks in the notebook's interactive help get code overlaping itself"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9656#event-28795"
}
```



---

archive/attachments_012372.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_9556-code-blocks-kerning.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket9656/trac_9556-code-blocks-kerning.patch",
    "created_at": "2010-08-19T12:56:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9656",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/TimDumol"
}
```



---

archive/issue_comments_109281.json:
```json
{
    "body": "Forces Firefox to recompute span width after jsMath text processing.",
    "created_at": "2010-08-19T12:56:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9656#issuecomment-109281",
    "user": "https://github.com/TimDumol"
}
```

Forces Firefox to recompute span width after jsMath text processing.



---

archive/issue_comments_109282.json:
```json
{
    "body": "**Author:** Tim Dumol",
    "created_at": "2010-08-19T12:58:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9656#issuecomment-109282",
    "user": "https://github.com/TimDumol"
}
```

**Author:** Tim Dumol



---

archive/issue_comments_109283.json:
```json
{
    "body": "<a id='comment:3'></a>\nThe problem was caused by jsMath's text processing altering the widths of the spans in the code blocks, without Firefox repositioning and recomputing the widths. This should fix the problem.",
    "created_at": "2010-08-19T12:58:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9656#issuecomment-109283",
    "user": "https://github.com/TimDumol"
}
```

<a id='comment:3'></a>
The problem was caused by jsMath's text processing altering the widths of the spans in the code blocks, without Firefox repositioning and recomputing the widths. This should fix the problem.



---

archive/issue_comments_109284.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2010-08-19T12:58:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9656#issuecomment-109284",
    "user": "https://github.com/TimDumol"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_109285.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2010-09-17T11:30:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9656#issuecomment-109285",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_109286.json:
```json
{
    "body": "<a id='comment:5'></a>\nThis fixes the kerning issue but degrades the appearance of code blocks.  Now code examples do not have a white background but do have a little bit of white at the ends of each line, which I think definitely looks worse.  I am not well enough versed in html and css to figure out how to fix this.\n\nI am attaching some screenshots to make this clearer.",
    "created_at": "2010-09-17T11:30:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9656#issuecomment-109286",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

<a id='comment:5'></a>
This fixes the kerning issue but degrades the appearance of code blocks.  Now code examples do not have a white background but do have a little bit of white at the ends of each line, which I think definitely looks worse.  I am not well enough versed in html and css to figure out how to fix this.

I am attaching some screenshots to make this clearer.



---

archive/issue_comments_109287.json:
```json
{
    "body": "Note white background example code blocks",
    "created_at": "2010-09-17T11:32:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9656#issuecomment-109287",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

Note white background example code blocks



---

archive/attachments_012373.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "afterpatch.png",
    "asset_url": "tarball://root/attachments/some-uuid/ticket9656/afterpatch.png",
    "created_at": "2010-09-17T11:32:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9656",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.png",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```



---

archive/issue_comments_109288.json:
```json
{
    "body": "Now only a trailing white background piece within code block.",
    "created_at": "2010-09-17T11:32:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9656#issuecomment-109288",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

Now only a trailing white background piece within code block.



---

archive/issue_comments_109289.json:
```json
{
    "body": "Simplified changes into a one-line patch. Replaces previous.",
    "created_at": "2010-09-18T02:43:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9656#issuecomment-109289",
    "user": "https://github.com/TimDumol"
}
```

Simplified changes into a one-line patch. Replaces previous.



---

archive/issue_comments_109290.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2010-09-18T02:44:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9656#issuecomment-109290",
    "user": "https://github.com/TimDumol"
}
```

**Changing status** from needs_work to needs_review.



---

archive/attachments_012374.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_9556-code-blocks-kerning.2.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket9656/trac_9556-code-blocks-kerning.2.patch",
    "created_at": "2010-09-18T02:44:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9656",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/TimDumol"
}
```



---

archive/issue_comments_109291.json:
```json
{
    "body": "<a id='comment:6'></a>\nThanks for noting that. I didn't notice. Here's another, simpler, patch.",
    "created_at": "2010-09-18T02:44:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9656#issuecomment-109291",
    "user": "https://github.com/TimDumol"
}
```

<a id='comment:6'></a>
Thanks for noting that. I didn't notice. Here's another, simpler, patch.



---

archive/issue_comments_109292.json:
```json
{
    "body": "<a id='comment:7'></a>\nThe trac_9556-code-blocks-kerning.2.patch  patch doesn't seem to work for me at all - by that I mean it doesn't fix the kerning issue.  I made a modified sagenb package, did \"sage -f sagenb-0.8.2.spkg\", and rebuilt everything.",
    "created_at": "2010-09-19T21:48:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9656#issuecomment-109292",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

<a id='comment:7'></a>
The trac_9556-code-blocks-kerning.2.patch  patch doesn't seem to work for me at all - by that I mean it doesn't fix the kerning issue.  I made a modified sagenb package, did "sage -f sagenb-0.8.2.spkg", and rebuilt everything.



---

archive/issue_comments_109293.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2010-09-19T21:49:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9656#issuecomment-109293",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_events_028796.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9656",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9656#event-28796"
}
```



---

archive/issue_events_028797.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9656",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9656#event-28797"
}
```



---

archive/issue_events_028798.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9656",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9656#event-28798"
}
```



---

archive/issue_events_028799.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9656",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9656#event-28799"
}
```



---

archive/issue_events_028800.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9656",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9656#event-28800"
}
```



---

archive/issue_events_028801.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9656",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9656#event-28801"
}
```



---

archive/issue_events_028802.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9656",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9656#event-28802"
}
```



---

archive/issue_comments_109294.json:
```json
{
    "body": "<a id='comment:13'></a>\nI haven't seen this in a while, but I'm not sure if it could still happen with MathJax.\n\nCurrent code, however in roughly the same place and same file\n\n```\n // Call MathJax on the final output.\nif (status === 'd' ) {\ntry {\nMathJax.Hub.Queue([\"Typeset\",MathJax.Hub,cell_output]);\n} catch (e) {\ncell_output.innerHTML = 'Error typesetting mathematics' + cell_output.innerHTML;\ncell_output_nowrap.innerHTML = 'Error typesetting mathematics' +\ncell_output_nowrap.innerHTML;\n}\n}\n```",
    "created_at": "2014-12-19T04:14:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9656#issuecomment-109294",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:13'></a>
I haven't seen this in a while, but I'm not sure if it could still happen with MathJax.

Current code, however in roughly the same place and same file

```
 // Call MathJax on the final output.
if (status === 'd' ) {
try {
MathJax.Hub.Queue(["Typeset",MathJax.Hub,cell_output]);
} catch (e) {
cell_output.innerHTML = 'Error typesetting mathematics' + cell_output.innerHTML;
cell_output_nowrap.innerHTML = 'Error typesetting mathematics' +
cell_output_nowrap.innerHTML;
}
}
```



---

archive/issue_events_028803.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-08-10T09:46:06Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/9656",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9656#event-28803"
}
```



---

archive/issue_events_028804.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-08-10T09:46:06Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9656",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9656#event-28804"
}
```



---

archive/issue_events_028805.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-08-10T09:46:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9656",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9656#event-28805"
}
```



---

archive/issue_comments_109295.json:
```json
{
    "body": "<a id='comment:14'></a>\nThis appears to be fixed, at least for the examples mentioned in this ticket.  Since SageNB has its own codebase now it's possible it was fixed there without being mentioned back here.  Any future issues against SageNB should be opened at https://github.com/sagemath/sagenb preferably.",
    "created_at": "2018-08-10T09:46:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9656#issuecomment-109295",
    "user": "https://github.com/embray"
}
```

<a id='comment:14'></a>
This appears to be fixed, at least for the examples mentioned in this ticket.  Since SageNB has its own codebase now it's possible it was fixed there without being mentioned back here.  Any future issues against SageNB should be opened at https://github.com/sagemath/sagenb preferably.



---

archive/issue_comments_109296.json:
```json
{
    "body": "<a id='comment:15'></a>\nJust for reference, many of the sagenb tickets on Trac were mentioned upstream as cross-links; apparently this one (?) was missed.  The rationale was that for any other upstream project (e.g. Maxima), we'd want a ticket on Trac to confirm it.",
    "created_at": "2018-08-10T13:11:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9656#issuecomment-109296",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:15'></a>
Just for reference, many of the sagenb tickets on Trac were mentioned upstream as cross-links; apparently this one (?) was missed.  The rationale was that for any other upstream project (e.g. Maxima), we'd want a ticket on Trac to confirm it.



---

archive/issue_comments_109297.json:
```json
{
    "body": "<a id='comment:16'></a>\nYes, that makes sense.  Often the issue is caught as a \"sage bug\" first, and an \"upstream bug\" second.",
    "created_at": "2018-08-10T13:29:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9656#issuecomment-109297",
    "user": "https://github.com/embray"
}
```

<a id='comment:16'></a>
Yes, that makes sense.  Often the issue is caught as a "sage bug" first, and an "upstream bug" second.
