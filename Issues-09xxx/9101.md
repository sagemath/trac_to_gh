# Issue 9101: linbox reports "ERROR: BLAS not found!" on Solaris 10 SPARC (64-bit build).

archive/issues_009101.json:
```json
{
    "body": "## Hardware & associated software\n\n* Sun Blade 1000\n* 2 x 900 MHz UltraSPARC III+ CPUs\n* 2 GB RAM\n* Solaris 10 03/2005 (first release of Solaris 10)\n* gcc 4.4.3 (uses Sun linker and assembler)\n\n## How gcc was configured\n\n```\ndrkirkby@redstart:~$ gcc -v\nUsing built-in specs.\nTarget: sparc-sun-solaris2.10\nConfigured with: ../gcc-4.4.3/configure --prefix=/usr/local/gcc-4.4.3 --with-mpfr=/usr/local/gcc-4.4.3 --with-build-time-tools=/usr/ccs/bin --with-gmp=/usr/local/gcc-4.4.3 --enable-languages=c,c++,fortran\nThread model: posix\ngcc version 4.4.3 (GCC) \n```\n\n == Sage build process ==\nThis used Sage 4.4.3.alpha0, but with numerous patches to allow a 64-bit build. At that point, only the zlib and fortran packages had changes for 64-bit and were built. SAGE64 exported to \"yes\", so it was a 64-bit build. \n\nThis is the first time I've **seriously** tried a 64-bit build on Solaris 10 SPARC. \n\n## The problem\nI get an error with linbox:\n\n```\nchecking whether GMP is 4.0 or greater... yes\nchecking whether GMP was compiled with --enable-cxx... yes\nchecking for NTL >= 5.0... found\nchecking for GIVARO >= 3.2.10... found\nchecking whether to compile the sage interface... yes\nchecking for C interface to BLAS... not found\nchecking for others BLAS... not found\n\n*******************************************************************************\n ERROR: BLAS not found!\n\n BLAS routines are required for this library to compile. Please\n make sure BLAS are installed and specify its location with the option\n --with-blas=<lib> when running configure.\n*******************************************************************************\nError configuring linbox\n\nreal    0m32.070s\nuser    0m15.156s\nsys     0m12.915s\nsage: An error occurred while installing linbox-1.1.6.p3\n```\n\nNo such error occurs when building linbox on OpenSolaris in 64-bit mode. \n\nThis looks to me like it might be an error in spkg/standard/deps, as there is nothing there as far as I can see \n\n```\n$(INST)/$(LINBOX): $(BASE) $(INST)/$(MPIR) $(INST)/$(NTL) $(INST)/$(GIVARO) $(INST)/$(GSL) $(INST)/$(ATLAS)\n        $(SAGE_SPKG) $(LINBOX) 2>&1\n\n```\n\nto make linbox dependent on BLAS. The BLAS library is not failing to install - it does not try to install. \n\n\n\n\nAssignee: drkirkby\n\nCC:  mvngu @jaapspies @jhpalmieri\n\nResolution: invalid\n\nIssue created by migration from https://trac.sagemath.org/ticket/9101\n\n",
    "closed_at": "2010-09-01T00:05:35Z",
    "created_at": "2010-05-31T03:12:01Z",
    "labels": [
        "component: porting: solaris",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "linbox reports \"ERROR: BLAS not found!\" on Solaris 10 SPARC (64-bit build).",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/9101",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```
## Hardware & associated software

* Sun Blade 1000
* 2 x 900 MHz UltraSPARC III+ CPUs
* 2 GB RAM
* Solaris 10 03/2005 (first release of Solaris 10)
* gcc 4.4.3 (uses Sun linker and assembler)

## How gcc was configured

```
drkirkby@redstart:~$ gcc -v
Using built-in specs.
Target: sparc-sun-solaris2.10
Configured with: ../gcc-4.4.3/configure --prefix=/usr/local/gcc-4.4.3 --with-mpfr=/usr/local/gcc-4.4.3 --with-build-time-tools=/usr/ccs/bin --with-gmp=/usr/local/gcc-4.4.3 --enable-languages=c,c++,fortran
Thread model: posix
gcc version 4.4.3 (GCC) 
```

 == Sage build process ==
This used Sage 4.4.3.alpha0, but with numerous patches to allow a 64-bit build. At that point, only the zlib and fortran packages had changes for 64-bit and were built. SAGE64 exported to "yes", so it was a 64-bit build. 

This is the first time I've **seriously** tried a 64-bit build on Solaris 10 SPARC. 

## The problem
I get an error with linbox:

```
checking whether GMP is 4.0 or greater... yes
checking whether GMP was compiled with --enable-cxx... yes
checking for NTL >= 5.0... found
checking for GIVARO >= 3.2.10... found
checking whether to compile the sage interface... yes
checking for C interface to BLAS... not found
checking for others BLAS... not found

*******************************************************************************
 ERROR: BLAS not found!

 BLAS routines are required for this library to compile. Please
 make sure BLAS are installed and specify its location with the option
 --with-blas=<lib> when running configure.
*******************************************************************************
Error configuring linbox

real    0m32.070s
user    0m15.156s
sys     0m12.915s
sage: An error occurred while installing linbox-1.1.6.p3
```

No such error occurs when building linbox on OpenSolaris in 64-bit mode. 

This looks to me like it might be an error in spkg/standard/deps, as there is nothing there as far as I can see 

```
$(INST)/$(LINBOX): $(BASE) $(INST)/$(MPIR) $(INST)/$(NTL) $(INST)/$(GIVARO) $(INST)/$(GSL) $(INST)/$(ATLAS)
        $(SAGE_SPKG) $(LINBOX) 2>&1

```

to make linbox dependent on BLAS. The BLAS library is not failing to install - it does not try to install. 




Assignee: drkirkby

CC:  mvngu @jaapspies @jhpalmieri

Resolution: invalid

Issue created by migration from https://trac.sagemath.org/ticket/9101





---

archive/issue_comments_087832.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,29 @@\n-Trying to compile Sage as 64-bit on SPARC, I get an error with linbox:\n+## Hardware & associated software\n+\n+* Sun Blade 1000\n+* 2 x 900 MHz UltraSPARC III+ CPUs\n+* 2 GB RAM\n+* Solaris 10 03/2005 (first release of Solaris 10)\n+* gcc 4.4.3 (uses Sun linker and assembler)\n+\n+## How gcc was configured\n+\n+\\`\\`\\`\n+drkirkby@redstart:~$ gcc -v\n+Using built-in specs.\n+Target: sparc-sun-solaris2.10\n+Configured with: ../gcc-4.4.3/configure --prefix=/usr/local/gcc-4.4.3 --with-mpfr=/usr/local/gcc-4.4.3 --with-build-time-tools=/usr/ccs/bin --with-gmp=/usr/local/gcc-4.4.3 --enable-languages=c,c++,fortran\n+Thread model: posix\n+gcc version 4.4.3 (GCC) \n+\\`\\`\\`\n+\n+ == Sage build process ==\n+This used Sage 4.4.3.alpha0, but with numerous patches to allow a 64-bit build. At that point, only the zlib and fortran packages had changes for 64-bit and were built. SAGE64 exported to \"yes\", so it was a 64-bit build. \n+\n+This is the first time I've **seriously** tried a 64-bit build on Solaris 10 SPARC. \n+\n+## The problem\n+I get an error with linbox:\n \n \\`\\`\\`\n checking whether GMP is 4.0 or greater... yes\n@@ -34,7 +59,10 @@\n \n \\`\\`\\`\n \n-to make linbox dependent on BLAS. The BLAS library is not failing to install - it does not try to install.\n+to make linbox dependent on BLAS. The BLAS library is not failing to install - it does not try to install. \n+\n+\n+\n \n Upstream: None of the above - read trac for reasoning.\n \n```\n",
    "created_at": "2010-05-31T03:48:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9101",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9101#issuecomment-87832",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,29 @@
-Trying to compile Sage as 64-bit on SPARC, I get an error with linbox:
+## Hardware & associated software
+
+* Sun Blade 1000
+* 2 x 900 MHz UltraSPARC III+ CPUs
+* 2 GB RAM
+* Solaris 10 03/2005 (first release of Solaris 10)
+* gcc 4.4.3 (uses Sun linker and assembler)
+
+## How gcc was configured
+
+\`\`\`
+drkirkby@redstart:~$ gcc -v
+Using built-in specs.
+Target: sparc-sun-solaris2.10
+Configured with: ../gcc-4.4.3/configure --prefix=/usr/local/gcc-4.4.3 --with-mpfr=/usr/local/gcc-4.4.3 --with-build-time-tools=/usr/ccs/bin --with-gmp=/usr/local/gcc-4.4.3 --enable-languages=c,c++,fortran
+Thread model: posix
+gcc version 4.4.3 (GCC) 
+\`\`\`
+
+ == Sage build process ==
+This used Sage 4.4.3.alpha0, but with numerous patches to allow a 64-bit build. At that point, only the zlib and fortran packages had changes for 64-bit and were built. SAGE64 exported to "yes", so it was a 64-bit build. 
+
+This is the first time I've **seriously** tried a 64-bit build on Solaris 10 SPARC. 
+
+## The problem
+I get an error with linbox:
 
 \`\`\`
 checking whether GMP is 4.0 or greater... yes
@@ -34,7 +59,10 @@
 
 \`\`\`
 
-to make linbox dependent on BLAS. The BLAS library is not failing to install - it does not try to install.
+to make linbox dependent on BLAS. The BLAS library is not failing to install - it does not try to install. 
+
+
+
 
 Upstream: None of the above - read trac for reasoning.
 
```




---

archive/issue_comments_087833.json:
```json
{
    "body": "<a id='comment:2'></a>I've since been told ATLAS is a blas library, so this should find ATLAS",
    "created_at": "2010-06-12T12:46:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9101",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9101#issuecomment-87833",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:2'></a>I've since been told ATLAS is a blas library, so this should find ATLAS



---

archive/issue_comments_087834.json:
```json
{
    "body": "<a id='comment:3'></a>Sure ATLAS is a BLAS, and LinBox should be able to find it. Was ATLAS correctly installed before LinBox? If so, could you post the spkg/build/linbox-1.1.6p3/src/config.log file in order to inverstigate for which reason did the configure test fail to compile.",
    "created_at": "2010-06-28T12:57:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9101",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9101#issuecomment-87834",
    "user": "https://github.com/ClementPernet"
}
```

<a id='comment:3'></a>Sure ATLAS is a BLAS, and LinBox should be able to find it. Was ATLAS correctly installed before LinBox? If so, could you post the spkg/build/linbox-1.1.6p3/src/config.log file in order to inverstigate for which reason did the configure test fail to compile.



---

archive/issue_comments_087835.json:
```json
{
    "body": "<a id='comment:4'></a>On closer inspection of the linbox log file, I can see what is wrong. ATLAS has built 32-bit libraries, not 64-bit ones. This is a problem with ATLAS rather than linbox. \n\nThank you very much. I'm quite surprised I did not notice this. I think I've spent more time recently on my Xeon machine making sure the objects were all 64-bit, and overlooked the SPARC. \n\nDave",
    "created_at": "2010-06-28T13:45:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9101",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9101#issuecomment-87835",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:4'></a>On closer inspection of the linbox log file, I can see what is wrong. ATLAS has built 32-bit libraries, not 64-bit ones. This is a problem with ATLAS rather than linbox. 

Thank you very much. I'm quite surprised I did not notice this. I think I've spent more time recently on my Xeon machine making sure the objects were all 64-bit, and overlooked the SPARC. 

Dave



---

archive/issue_comments_087836.json:
```json
{
    "body": "<a id='comment:5'></a>This is invalid, as the problem was ATLAS, not linbox.",
    "created_at": "2010-07-14T08:08:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9101",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9101#issuecomment-87836",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:5'></a>This is invalid, as the problem was ATLAS, not linbox.



---

archive/issue_comments_087837.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2010-07-14T08:08:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9101",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9101#issuecomment-87837",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

Resolution: invalid



---

archive/issue_events_022329.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/drkirkby",
    "created_at": "2010-07-14T08:08:19Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/9101",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9101#event-22329"
}
```



---

archive/issue_events_022330.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mvngu",
    "created_at": "2010-07-14T11:58:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9101",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9101#event-22330"
}
```



---

archive/issue_events_022331.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/drkirkby",
    "created_at": "2010-07-15T14:24:11Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9101",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9101#event-22331"
}
```



---

archive/issue_events_022332.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/drkirkby",
    "created_at": "2010-07-15T14:24:11Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9101",
    "milestone": "sage-4.5.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9101#event-22332"
}
```



---

archive/issue_comments_087838.json:
```json
{
    "body": "<a id='comment:7'></a>I'm reopening this, as it does indicate a problem in Sage. Although Linbox is not at fault, the issue still exists, and causes Linbox to fail to build. \n\nI've created #9508 to try to sort out the way the ATLAS libraries are built on Solaris, as they are handled completely differently to other platforms like Linux, OS X and FreeBSD. \n\nDave",
    "created_at": "2010-07-15T14:24:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9101",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9101#issuecomment-87838",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:7'></a>I'm reopening this, as it does indicate a problem in Sage. Although Linbox is not at fault, the issue still exists, and causes Linbox to fail to build. 

I've created #9508 to try to sort out the way the ATLAS libraries are built on Solaris, as they are handled completely differently to other platforms like Linux, OS X and FreeBSD. 

Dave



---

archive/issue_comments_087839.json:
```json
{
    "body": "Resolution changed from invalid to ",
    "created_at": "2010-07-15T14:24:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9101",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9101#issuecomment-87839",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

Resolution changed from invalid to 



---

archive/issue_comments_087840.json:
```json
{
    "body": "Changing status from closed to new.",
    "created_at": "2010-07-15T14:24:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9101",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9101#issuecomment-87840",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

Changing status from closed to new.



---

archive/issue_events_022333.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/drkirkby",
    "created_at": "2010-07-15T14:24:11Z",
    "event": "reopened",
    "issue": "https://github.com/sagemath/sagetest/issues/9101",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9101#event-22333"
}
```



---

archive/issue_comments_087841.json:
```json
{
    "body": "<a id='comment:9'></a>Won't this be fixed by #9508?  If so, do we need both tickets open?",
    "created_at": "2010-07-15T22:45:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9101",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9101#issuecomment-87841",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:9'></a>Won't this be fixed by #9508?  If so, do we need both tickets open?



---

archive/issue_comments_087842.json:
```json
{
    "body": "<a id='comment:10'></a>Replying to [comment:9 jhpalmieri]:\n> Won't this be fixed by #9508?  If so, do we need both tickets open?\n\n\nI would agree this will be fixed by #9508, but I'm not sure if this should be closed until #9508 is closed. My belief is the bug reported is still valid at this point in time. \n\nDave",
    "created_at": "2010-07-15T23:05:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9101",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9101#issuecomment-87842",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:10'></a>Replying to [comment:9 jhpalmieri]:
> Won't this be fixed by #9508?  If so, do we need both tickets open?


I would agree this will be fixed by #9508, but I'm not sure if this should be closed until #9508 is closed. My belief is the bug reported is still valid at this point in time. 

Dave



---

archive/issue_events_022334.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2010-09-01T00:05:35Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9101",
    "milestone": "sage-4.5.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9101#event-22334"
}
```



---

archive/issue_events_022335.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2010-09-01T00:05:35Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9101",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9101#event-22335"
}
```



---

archive/issue_comments_087843.json:
```json
{
    "body": "<a id='comment:11'></a>I'm closing this since #9508 was closed.",
    "created_at": "2010-09-01T00:05:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9101",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9101#issuecomment-87843",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:11'></a>I'm closing this since #9508 was closed.



---

archive/issue_events_022336.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2010-09-01T00:05:35Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/9101",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9101#event-22336"
}
```



---

archive/issue_comments_087844.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2010-09-01T00:05:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9101",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9101#issuecomment-87844",
    "user": "https://github.com/mwhansen"
}
```

Resolution: invalid
