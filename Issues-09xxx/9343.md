# Issue 9343: Upgrade PARI to svn snapshot 12577 - a pre-release of PARI 2.4.3.

archive/issues_009343.json:
```json
{
    "assignees": [
        "https://github.com/jdemeyer"
    ],
    "body": "<div id=\"comment:0\"></div>\n\nSee #7736 (a bug this will fix), #8453 (last pari upgrade).\n\nSee [http://wiki.sagemath.org/NewPARI](http://wiki.sagemath.org/NewPARI) for more information and links.\n\nCC:  @robertwb @loefflerd @JohnCremona @jdemeyer\n\nComponent: **packages: standard**\n\nAuthor: **Robert Bradshaw, John Cremona, Jeroen Demeyer, William Stein, David Kirkby**\n\nReviewer: **Robert Bradshaw, John Cremona, Jeroen Demeyer, William Stein, David Kirkby, Fran\u00e7ois Bissey, Leif Leonhardy**\n\nMerged: **sage-4.6.alpha0**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/9343_\n\n",
    "closed_at": "2010-09-10T10:38:49Z",
    "created_at": "2010-06-26T05:52:42Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%20blocker%20/%201",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Upgrade PARI to svn snapshot 12577 - a pre-release of PARI 2.4.3.",
    "type": "issue",
    "updated_at": "2010-09-25T01:39:06Z",
    "url": "https://github.com/sagemath/sage/issues/9343",
    "user": "https://github.com/williamstein"
}
```
<div id="comment:0"></div>

See #7736 (a bug this will fix), #8453 (last pari upgrade).

See [http://wiki.sagemath.org/NewPARI](http://wiki.sagemath.org/NewPARI) for more information and links.

CC:  @robertwb @loefflerd @JohnCremona @jdemeyer

Component: **packages: standard**

Author: **Robert Bradshaw, John Cremona, Jeroen Demeyer, William Stein, David Kirkby**

Reviewer: **Robert Bradshaw, John Cremona, Jeroen Demeyer, William Stein, David Kirkby, François Bissey, Leif Leonhardy**

Merged: **sage-4.6.alpha0**

_Issue created by migration from https://trac.sagemath.org/ticket/9343_





---

archive/issue_events_118506.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-06-26T05:52:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "milestone_number": null,
    "milestone_title": "sage-4.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9343#event-118506"
}
```



---

archive/issue_events_118507.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-06-26T05:52:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "0000b0",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9343#event-118507"
}
```



---

archive/issue_events_118508.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-06-26T05:52:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9343#event-118508"
}
```



---

archive/issue_events_118509.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-06-26T05:52:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9343#event-118509"
}
```



---

archive/issue_comments_079102.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nNOTE: According to http://pari.math.u-bordeaux.fr/packages.html, there are now two seadata tarballs; we'll have to make one standard, and one optional.",
    "created_at": "2010-06-26T05:53:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79102",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:1" align="right">comment:1</div>

NOTE: According to http://pari.math.u-bordeaux.fr/packages.html, there are now two seadata tarballs; we'll have to make one standard, and one optional.



---

archive/issue_comments_079103.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nThe new ellap (which replaces the sea.gp script in sage) is seriously buggy, evidently.  Sometimes it works, but the first example I tried fails miserably.  \n\n```\n\n? ellap(ellinit([1,2,7,4,3]),nextprime(10^20))\n%1 = -4070602678\n? ellap(ellinit([1,2,3,4,5]),nextprime(10^20))\n  ***   at top-level: ellap(ellinit([1,2,3\n  ***                 ^--------------------\n  *** ellap: bug in PARI/GP (Segmentation Fault), please report\n  ***   Break loop: type 'break' to go back to GP\nbreak> \n\n? ellap(ellinit([1,2,3,4,5]),nextprime(10^25))\n%2 = 1231939791654\n? ellap(ellinit([1,2,3,4,5]),nextprime(10^30))\n%3 = 1790178944607137\n? ellap(ellinit([1,2,3,4,5]),nextprime(10^35))\n  ***   at top-level: ellap(ellinit([1,2,3\n  ***                 ^--------------------\n  *** ellap: bug in PARI/GP (Segmentation Fault), please report\n  ***   Break loop: type 'break' to go back to GP\nbreak> \n```\n\nNOTE: To use ellap for big p, you *must* put the extracted data from seadata.tgz/data/*  in local/share/pari, as explained here: http://pari.math.u-bordeaux.fr/packages.html\n\nI'm reporting this bug upstream now.",
    "created_at": "2010-06-26T06:48:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79103",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:3" align="right">comment:3</div>

The new ellap (which replaces the sea.gp script in sage) is seriously buggy, evidently.  Sometimes it works, but the first example I tried fails miserably.  

```

? ellap(ellinit([1,2,7,4,3]),nextprime(10^20))
%1 = -4070602678
? ellap(ellinit([1,2,3,4,5]),nextprime(10^20))
  ***   at top-level: ellap(ellinit([1,2,3
  ***                 ^--------------------
  *** ellap: bug in PARI/GP (Segmentation Fault), please report
  ***   Break loop: type 'break' to go back to GP
break> 

? ellap(ellinit([1,2,3,4,5]),nextprime(10^25))
%2 = 1231939791654
? ellap(ellinit([1,2,3,4,5]),nextprime(10^30))
%3 = 1790178944607137
? ellap(ellinit([1,2,3,4,5]),nextprime(10^35))
  ***   at top-level: ellap(ellinit([1,2,3
  ***                 ^--------------------
  *** ellap: bug in PARI/GP (Segmentation Fault), please report
  ***   Break loop: type 'break' to go back to GP
break> 
```

NOTE: To use ellap for big p, you *must* put the extracted data from seadata.tgz/data/*  in local/share/pari, as explained here: http://pari.math.u-bordeaux.fr/packages.html

I'm reporting this bug upstream now.



---

archive/issue_comments_079104.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nThis could hopefully fix the SEA segfault in Cygwin.",
    "created_at": "2010-06-26T17:47:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79104",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:4" align="right">comment:4</div>

This could hopefully fix the SEA segfault in Cygwin.



---

archive/issue_comments_079105.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\n`pari.listcreate` no longer pre-allocates the entire list, so can't be used in the _pari_trap (out of memory) tests.",
    "created_at": "2010-06-26T19:42:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79105",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:5" align="right">comment:5</div>

`pari.listcreate` no longer pre-allocates the entire list, so can't be used in the _pari_trap (out of memory) tests.



---

archive/issue_comments_079106.json:
```json
{
    "body": "Attachment: **[9343-part1-builds.patch.gz](https://github.com/sagemath/sage/files/ticket9343/9343-part1-builds.patch.gz)**",
    "created_at": "2010-06-26T19:49:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79106",
    "user": "https://github.com/robertwb"
}
```

Attachment: **[9343-part1-builds.patch.gz](https://github.com/sagemath/sage/files/ticket9343/9343-part1-builds.patch.gz)**



---

archive/issue_comments_079107.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nMy spkg is here:\n\n    http://sage.math.washington.edu/home/wstein/build/sd22/pari/sage-4.5.alpha0/pari-2.4.3.svn.spkg",
    "created_at": "2010-06-26T19:54:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79107",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:6" align="right">comment:6</div>

My spkg is here:

    http://sage.math.washington.edu/home/wstein/build/sd22/pari/sage-4.5.alpha0/pari-2.4.3.svn.spkg



---

archive/issue_comments_079108.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nAttachment: **[trac_9343-part2.patch.gz](https://github.com/sagemath/sage/files/ticket9343/trac_9343-part2.patch.gz)**",
    "created_at": "2010-06-26T20:23:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79108",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:7" align="right">comment:7</div>

Attachment: **[trac_9343-part2.patch.gz](https://github.com/sagemath/sage/files/ticket9343/trac_9343-part2.patch.gz)**



---

archive/issue_comments_079109.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,4 +2,4 @@\n \n After doing this, we also need to remove sea.gp, since it is included in pari now.\n \n-\n+Running todo list: http://sage.math.washington.edu/home/wstein/build/sd22/pari/pari.txt\n``````\n",
    "created_at": "2010-06-26T20:23:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79109",
    "user": "https://github.com/williamstein"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,4 +2,4 @@
 
 After doing this, we also need to remove sea.gp, since it is included in pari now.
 
-
+Running todo list: http://sage.math.washington.edu/home/wstein/build/sd22/pari/pari.txt
``````




---

archive/issue_comments_079110.json:
```json
{
    "body": "Attachment: **[trac_9343-part4.patch.gz](https://github.com/sagemath/sage/files/ticket9343/trac_9343-part4.patch.gz)**\n\nAttachment: **[9343-part3-algdep.patch.gz](https://github.com/sagemath/sage/files/ticket9343/9343-part3-algdep.patch.gz)**",
    "created_at": "2010-06-26T21:12:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79110",
    "user": "https://github.com/robertwb"
}
```

Attachment: **[trac_9343-part4.patch.gz](https://github.com/sagemath/sage/files/ticket9343/trac_9343-part4.patch.gz)**

Attachment: **[9343-part3-algdep.patch.gz](https://github.com/sagemath/sage/files/ticket9343/9343-part3-algdep.patch.gz)**



---

archive/issue_comments_079111.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nHere is a list of functions from decl.pxi that show up nowhere in the pari sources (using grep): http://sage.math.washington.edu/home/robertwb/scratch/robertwb/sage-4.4.4/missing_functions.txt",
    "created_at": "2010-06-26T21:37:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79111",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:8" align="right">comment:8</div>

Here is a list of functions from decl.pxi that show up nowhere in the pari sources (using grep): http://sage.math.washington.edu/home/robertwb/scratch/robertwb/sage-4.4.4/missing_functions.txt



---

archive/issue_comments_079112.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nJust as a practicality could we put a date in the spkg's name?\nIt is a svn snapshot so we really want to know when it has been taken.",
    "created_at": "2010-06-26T22:33:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79112",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:9" align="right">comment:9</div>

Just as a practicality could we put a date in the spkg's name?
It is a svn snapshot so we really want to know when it has been taken.



---

archive/issue_comments_079113.json:
```json
{
    "body": "Attachment: **[trac_9343-part5.patch.gz](https://github.com/sagemath/sage/files/ticket9343/trac_9343-part5.patch.gz)**",
    "created_at": "2010-06-26T23:18:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79113",
    "user": "https://github.com/robertwb"
}
```

Attachment: **[trac_9343-part5.patch.gz](https://github.com/sagemath/sage/files/ticket9343/trac_9343-part5.patch.gz)**



---

archive/issue_comments_079114.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nAttachment: **[9343-part6-symbols.patch.gz](https://github.com/sagemath/sage/files/ticket9343/9343-part6-symbols.patch.gz)**\n\nNew spkg location:\n\n   http://sage.math.washington.edu/home/wstein/build/sd22/pari/pari-2.4.3.svn.spkg",
    "created_at": "2010-06-27T00:16:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79114",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:10" align="right">comment:10</div>

Attachment: **[9343-part6-symbols.patch.gz](https://github.com/sagemath/sage/files/ticket9343/9343-part6-symbols.patch.gz)**

New spkg location:

   http://sage.math.washington.edu/home/wstein/build/sd22/pari/pari-2.4.3.svn.spkg



---

archive/issue_comments_079115.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nNew spkg at http://sage.math.washington.edu/home/robertwb/pari-2.4.3.svn.p1.spkg (updated patch files).",
    "created_at": "2010-06-27T01:56:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79115",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:11" align="right">comment:11</div>

New spkg at http://sage.math.washington.edu/home/robertwb/pari-2.4.3.svn.p1.spkg (updated patch files).



---

archive/issue_comments_079116.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nAttachment: **[trac_9343-part7-fix_signals.patch.gz](https://github.com/sagemath/sage/files/ticket9343/trac_9343-part7-fix_signals.patch.gz)**\n\nSuspiciousness when installing pari-2.4.3.svn.p1.spkg:\n\n```\n\n0 --with-gxx-include-dir=/include/c++/4.2.1\nThread model: posix\ngcc version 4.2.1 (Apple Inc. build 5659)\n****************************************************\n./spkg-install: line 1: B1: command not found\n./spkg-install: line 1: 2000: command not found\n./spkg-install: line 1: 0c#!/bin/sh: No such file or directory\nConfiguring pari-2.4.3 (DEVELOPMENT VERSION) \nChecking echo to see how to suppress newlines...\n...using \\c\nLooking for some tools first ...\n```",
    "created_at": "2010-06-27T02:56:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79116",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:12" align="right">comment:12</div>

Attachment: **[trac_9343-part7-fix_signals.patch.gz](https://github.com/sagemath/sage/files/ticket9343/trac_9343-part7-fix_signals.patch.gz)**

Suspiciousness when installing pari-2.4.3.svn.p1.spkg:

```

0 --with-gxx-include-dir=/include/c++/4.2.1
Thread model: posix
gcc version 4.2.1 (Apple Inc. build 5659)
****************************************************
./spkg-install: line 1: B1: command not found
./spkg-install: line 1: 2000: command not found
./spkg-install: line 1: 0c#!/bin/sh: No such file or directory
Configuring pari-2.4.3 (DEVELOPMENT VERSION) 
Checking echo to see how to suppress newlines...
...using \c
Looking for some tools first ...
```



---

archive/issue_comments_079117.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nPolynomial factorization over number fields is broken:\n\n```\n?  nffactor(nfinit(y^2-5), x^5 - x^4 - 7*x^3 + x^2 + 7*x - 3)\n%6 = \n[x - 3 1]\n\n[x + Mod(-1/2*y + 1/2, y^2 - 5) 4]\n\n[x + Mod(1/2*y + 1/2, y^2 - 5) 0]\n\n? factor                 \nfactor        factorcantor  factorial     factormod     factorpadic   \nfactorback    factorff      factorint     factornf      \n? factornf(x^5 - x^4 - 7*x^3 + x^2 + 7*x - 3, y^2-5)\n%7 = \n[x - 3 1]\n\n[x + Mod(-1/2*y + 1/2, y^2 - 5) 0]\n\n[x + Mod(1/2*y + 1/2, y^2 - 5) 4]\n\n```\n\nHere's what used to happen:\n\n```\n? nffactor(nfinit(y^2-5), x^5 - x^4 - 7*x^3 + x^2 + 7*x - 3)\n%7 = \n[x - 3 1]\n[x + Mod(-1/2*y + 1/2, y^2 - 5) 2]\n[x + Mod(1/2*y + 1/2, y^2 - 5) 2]\n```",
    "created_at": "2010-06-27T03:06:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79117",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:13" align="right">comment:13</div>

Polynomial factorization over number fields is broken:

```
?  nffactor(nfinit(y^2-5), x^5 - x^4 - 7*x^3 + x^2 + 7*x - 3)
%6 = 
[x - 3 1]

[x + Mod(-1/2*y + 1/2, y^2 - 5) 4]

[x + Mod(1/2*y + 1/2, y^2 - 5) 0]

? factor                 
factor        factorcantor  factorial     factormod     factorpadic   
factorback    factorff      factorint     factornf      
? factornf(x^5 - x^4 - 7*x^3 + x^2 + 7*x - 3, y^2-5)
%7 = 
[x - 3 1]

[x + Mod(-1/2*y + 1/2, y^2 - 5) 0]

[x + Mod(1/2*y + 1/2, y^2 - 5) 4]

```

Here's what used to happen:

```
? nffactor(nfinit(y^2-5), x^5 - x^4 - 7*x^3 + x^2 + 7*x - 3)
%7 = 
[x - 3 1]
[x + Mod(-1/2*y + 1/2, y^2 - 5) 2]
[x + Mod(1/2*y + 1/2, y^2 - 5) 2]
```



---

archive/issue_comments_079118.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nAbove \"Polynomial factorization over number fields is broken\" has now been reported upstream by me to submit@pari.math.u-bordeaux.fr",
    "created_at": "2010-06-27T03:11:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79118",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:14" align="right">comment:14</div>

Above "Polynomial factorization over number fields is broken" has now been reported upstream by me to submit@pari.math.u-bordeaux.fr



---

archive/issue_comments_079119.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nHere's a link to the doctest failures: http://sage.math.washington.edu/home/robertwb/scratch/robertwb/sage-4.4.4/doctests.log",
    "created_at": "2010-06-27T05:25:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79119",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:15" align="right">comment:15</div>

Here's a link to the doctest failures: http://sage.math.washington.edu/home/robertwb/scratch/robertwb/sage-4.4.4/doctests.log



---

archive/issue_comments_079120.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nNew spkg:\n\n     http://sage.math.washington.edu/home/wstein/patches/pari-2.4.3.svn.p2.spkg",
    "created_at": "2010-06-27T05:28:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79120",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:16" align="right">comment:16</div>

New spkg:

     http://sage.math.washington.edu/home/wstein/patches/pari-2.4.3.svn.p2.spkg



---

archive/issue_comments_079121.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nNew version\n\n    http://sage.math.washington.edu/home/wstein/patches/pari-2.4.3.svn.p3.spkg",
    "created_at": "2010-06-27T06:07:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79121",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:17" align="right">comment:17</div>

New version

    http://sage.math.washington.edu/home/wstein/patches/pari-2.4.3.svn.p3.spkg



---

archive/issue_comments_079122.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nNOTE: pari-2.4.3.svn.p3.spkg fixes the polynomial factorization bug mentioned above.",
    "created_at": "2010-06-27T06:10:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79122",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:18" align="right">comment:18</div>

NOTE: pari-2.4.3.svn.p3.spkg fixes the polynomial factorization bug mentioned above.



---

archive/issue_comments_079123.json:
```json
{
    "body": "Attachment: **[9343-part8.patch.gz](https://github.com/sagemath/sage/files/ticket9343/9343-part8.patch.gz)**",
    "created_at": "2010-06-27T06:38:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79123",
    "user": "https://github.com/robertwb"
}
```

Attachment: **[9343-part8.patch.gz](https://github.com/sagemath/sage/files/ticket9343/9343-part8.patch.gz)**



---

archive/issue_comments_079124.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nI've updated http://sage.math.washington.edu/home/robertwb/scratch/robertwb/sage-4.4.4/doctests.log",
    "created_at": "2010-06-27T06:38:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79124",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:19" align="right">comment:19</div>

I've updated http://sage.math.washington.edu/home/robertwb/scratch/robertwb/sage-4.4.4/doctests.log



---

archive/issue_comments_079125.json:
```json
{
    "body": "Attachment: **[trac_9343-extcode-buzzard_slopes.patch.gz](https://github.com/sagemath/sage/files/ticket9343/trac_9343-extcode-buzzard_slopes.patch.gz)**\n\nAttachment: **[trac_9343-extcode-delete_sea_directory.patch.gz](https://github.com/sagemath/sage/files/ticket9343/trac_9343-extcode-delete_sea_directory.patch.gz)**",
    "created_at": "2010-06-27T07:33:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79125",
    "user": "https://github.com/williamstein"
}
```

Attachment: **[trac_9343-extcode-buzzard_slopes.patch.gz](https://github.com/sagemath/sage/files/ticket9343/trac_9343-extcode-buzzard_slopes.patch.gz)**

Attachment: **[trac_9343-extcode-delete_sea_directory.patch.gz](https://github.com/sagemath/sage/files/ticket9343/trac_9343-extcode-delete_sea_directory.patch.gz)**



---

archive/issue_comments_079126.json:
```json
{
    "body": "Attachment: **[trac_9343-part9-get_rid_of_sea.patch.gz](https://github.com/sagemath/sage/files/ticket9343/trac_9343-part9-get_rid_of_sea.patch.gz)**",
    "created_at": "2010-06-27T07:36:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79126",
    "user": "https://github.com/williamstein"
}
```

Attachment: **[trac_9343-part9-get_rid_of_sea.patch.gz](https://github.com/sagemath/sage/files/ticket9343/trac_9343-part9-get_rid_of_sea.patch.gz)**



---

archive/issue_comments_079127.json:
```json
{
    "body": "Attachment: **[9343-part10.patch.gz](https://github.com/sagemath/sage/files/ticket9343/9343-part10.patch.gz)**\n\na couple more doctest fixes",
    "created_at": "2010-06-27T08:29:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79127",
    "user": "https://github.com/robertwb"
}
```

Attachment: **[9343-part10.patch.gz](https://github.com/sagemath/sage/files/ticket9343/9343-part10.patch.gz)**

a couple more doctest fixes



---

archive/issue_comments_079128.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@JohnCremona](#comment%3A21):\n\nI nearly finished sorting out extcode/pari/cremona and elliptic_curves/gp_cremona.py and will finish that today (Sunday) and post a patch for it.",
    "created_at": "2010-06-27T16:36:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79128",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@JohnCremona](#comment%3A21):

I nearly finished sorting out extcode/pari/cremona and elliptic_curves/gp_cremona.py and will finish that today (Sunday) and post a patch for it.



---

archive/issue_comments_079129.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@JohnCremona](#comment%3A22):\n> Replying to [@JohnCremona](#comment%3A21):\n> \n> I nearly finished sorting out extcode/pari/cremona and elliptic_curves/gp_cremona.py and will finish that today (Sunday) and post a patch for it.\n\nI had to make one chenge to extcode/pari/simon/ell.gp (removing one comma!) and have reported it upstream.",
    "created_at": "2010-06-27T19:36:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79129",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@JohnCremona](#comment%3A22):
> Replying to [@JohnCremona](#comment%3A21):
> 
> I nearly finished sorting out extcode/pari/cremona and elliptic_curves/gp_cremona.py and will finish that today (Sunday) and post a patch for it.

I had to make one chenge to extcode/pari/simon/ell.gp (removing one comma!) and have reported it upstream.



---

archive/issue_comments_079130.json:
```json
{
    "body": "Attachment: **[trac_9343-part11-fixing_misc_tests.patch.gz](https://github.com/sagemath/sage/files/ticket9343/trac_9343-part11-fixing_misc_tests.patch.gz)**",
    "created_at": "2010-06-28T21:45:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79130",
    "user": "https://github.com/williamstein"
}
```

Attachment: **[trac_9343-part11-fixing_misc_tests.patch.gz](https://github.com/sagemath/sage/files/ticket9343/trac_9343-part11-fixing_misc_tests.patch.gz)**



---

archive/issue_comments_079131.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nAs of right now, you can install this into 4.4.4 by doing:\n\n1.\n\n```\n  ./sage -f -m http://sage.math.washington.edu/home/wstein/patches/pari-2.4.3.svn.p3.spkg\n```\n\n2. import the patch called sagelib_9343.patch to the main Sage repo.\n\n3. import the patch extcode_9343.patch into the SAGE_ROOT/data extcode.",
    "created_at": "2010-06-28T21:53:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79131",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:24" align="right">comment:24</div>

As of right now, you can install this into 4.4.4 by doing:

1.

```
  ./sage -f -m http://sage.math.washington.edu/home/wstein/patches/pari-2.4.3.svn.p3.spkg
```

2. import the patch called sagelib_9343.patch to the main Sage repo.

3. import the patch extcode_9343.patch into the SAGE_ROOT/data extcode.



---

archive/issue_comments_079132.json:
```json
{
    "body": "Attachment: **[trac_9343-extcode-delete-cremona.patch.gz](https://github.com/sagemath/sage/files/ticket9343/trac_9343-extcode-delete-cremona.patch.gz)**",
    "created_at": "2010-06-28T22:03:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79132",
    "user": "https://github.com/JohnCremona"
}
```

Attachment: **[trac_9343-extcode-delete-cremona.patch.gz](https://github.com/sagemath/sage/files/ticket9343/trac_9343-extcode-delete-cremona.patch.gz)**



---

archive/issue_comments_079133.json:
```json
{
    "body": "Attachment: **[trac_9343-gp-cremona.patch.gz](https://github.com/sagemath/sage/files/ticket9343/trac_9343-gp-cremona.patch.gz)**\n\nAttachment: **[extcode_9343.patch.gz](https://github.com/sagemath/sage/files/ticket9343/extcode_9343.patch.gz)**\n\nthis flattens all extcode patches above",
    "created_at": "2010-06-28T22:16:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79133",
    "user": "https://github.com/williamstein"
}
```

Attachment: **[trac_9343-gp-cremona.patch.gz](https://github.com/sagemath/sage/files/ticket9343/trac_9343-gp-cremona.patch.gz)**

Attachment: **[extcode_9343.patch.gz](https://github.com/sagemath/sage/files/ticket9343/extcode_9343.patch.gz)**

this flattens all extcode patches above



---

archive/issue_comments_079134.json:
```json
{
    "body": "flattening of *all* sagelib patches above.",
    "created_at": "2010-06-28T22:17:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79134",
    "user": "https://github.com/williamstein"
}
```

flattening of *all* sagelib patches above.



---

archive/issue_comments_079135.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nAttachment: **[sagelib_9343.patch.gz](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343.patch.gz)**\n\nThanks!",
    "created_at": "2010-06-29T01:30:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79135",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:25" align="right">comment:25</div>

Attachment: **[sagelib_9343.patch.gz](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343.patch.gz)**

Thanks!



---

archive/issue_comments_079136.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nAre there any separate entry for patching problems with:\neclib\nlcalc\ngenus2reduction\nOr has no one tried to to see if these were broken by this version\nof pari?",
    "created_at": "2010-07-03T22:14:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79136",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:26" align="right">comment:26</div>

Are there any separate entry for patching problems with:
eclib
lcalc
genus2reduction
Or has no one tried to to see if these were broken by this version
of pari?



---

archive/issue_comments_079137.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nI will compile eclib with pari 2.4.3;  if any changes are needed, I will change the source at source, so patches will not be needed.",
    "created_at": "2010-07-04T13:38:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79137",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:27" align="right">comment:27</div>

I will compile eclib with pari 2.4.3;  if any changes are needed, I will change the source at source, so patches will not be needed.



---

archive/issue_comments_079138.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@JohnCremona](#comment%3A27):\n> I will compile eclib with pari 2.4.3;  if any changes are needed, I will change the source at source, so patches will not be needed.\n\neclib compiles and runs fine with 2.4.3.  It even now compiles with -ansi (which was not true before) and almost with -pedantic (just 4 extraneous semicolons need deleting;  not worth a new spkg version).",
    "created_at": "2010-07-04T14:12:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79138",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@JohnCremona](#comment%3A27):
> I will compile eclib with pari 2.4.3;  if any changes are needed, I will change the source at source, so patches will not be needed.

eclib compiles and runs fine with 2.4.3.  It even now compiles with -ansi (which was not true before) and almost with -pedantic (just 4 extraneous semicolons need deleting;  not worth a new spkg version).



---

archive/issue_comments_079139.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nlcalc has some problems with pari-2.4. I am not sure yet if they are minor\nor major.\n\n```\nLcommandline_elliptic.cc: In function \u2018void data_E(char*, char*, char*, char*, char*, int, Double*)\u2019:\nLcommandline_elliptic.cc:124: error: \u2018lgeti\u2019 was not declared in this scope\nmake[1]: *** [Lcommandline_elliptic.o] Error 1\n```\nI'll be checking genus2reduction next.",
    "created_at": "2010-07-06T10:05:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79139",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:29" align="right">comment:29</div>

lcalc has some problems with pari-2.4. I am not sure yet if they are minor
or major.

```
Lcommandline_elliptic.cc: In function ‘void data_E(char*, char*, char*, char*, char*, int, Double*)’:
Lcommandline_elliptic.cc:124: error: ‘lgeti’ was not declared in this scope
make[1]: *** [Lcommandline_elliptic.o] Error 1
```
I'll be checking genus2reduction next.



---

archive/issue_comments_079140.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nlcalc problem is minor. Not sure why pariold.h is not properly included\nwhen it should be sourced from pari.h (in pari-2.3 it was sourced from paricom.h\nitself included from pari.h).\nAnyway replacing lgeti by (long)cgeti as would be done by pariold.h works\nlike a charm.",
    "created_at": "2010-07-06T11:03:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79140",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:30" align="right">comment:30</div>

lcalc problem is minor. Not sure why pariold.h is not properly included
when it should be sourced from pari.h (in pari-2.3 it was sourced from paricom.h
itself included from pari.h).
Anyway replacing lgeti by (long)cgeti as would be done by pariold.h works
like a charm.



---

archive/issue_comments_079141.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\ngenus2reduction suffer the same kind of problems. But it is more serious:\n\n```\ngenus2reduction.c: In function \u2018main\u2019:\ngenus2reduction.c:476: error: \u2018polun\u2019 undeclared (first use in this function)\ngenus2reduction.c:476: error: (Each undeclared identifier is reported only once\ngenus2reduction.c:476: error: for each function it appears in.)\ngenus2reduction.c:600: error: \u2018polx\u2019 undeclared (first use in this function)\ngenus2reduction.c:96: warning: ignoring return value of \u2018scanf\u2019, declared with attribute warn_unused_result\ngenus2reduction.c:98: warning: ignoring return value of \u2018scanf\u2019, declared with attribute warn_unused_result\ngenus2reduction.c: In function \u2018factorpadicnonun\u2019:\ngenus2reduction.c:1676: error: \u2018polx\u2019 undeclared (first use in this function)\ngenus2reduction.c: In function \u2018polymini\u2019:\ngenus2reduction.c:1701: error: \u2018polx\u2019 undeclared (first use in this function)\ngenus2reduction.c:1712: error: \u2018zero\u2019 undeclared (first use in this function)\ngenus2reduction.c:1731: error: \u2018un\u2019 undeclared (first use in this function)\ngenus2reduction.c: In function \u2018discpart\u2019:\ngenus2reduction.c:1818: error: \u2018polun\u2019 undeclared (first use in this function)\ngenus2reduction.c: In function \u2018polyminizi\u2019:\ngenus2reduction.c:1856: error: \u2018gi\u2019 undeclared (first use in this function)\ngenus2reduction.c:1859: error: \u2018polx\u2019 undeclared (first use in this function)\ngenus2reduction.c: In function \u2018polyminizi2\u2019:\ngenus2reduction.c:1939: error: \u2018polx\u2019 undeclared (first use in this function)\ngenus2reduction.c:1942: error: \u2018gi\u2019 undeclared (first use in this function)\ngenus2reduction.c: In function \u2018zi2mod\u2019:\ngenus2reduction.c:2001: error: \u2018gi\u2019 undeclared (first use in this function)\n```\npolun, polx, zero and un were all defined in pariold.h but are not anywhere\nanymore in pari-2.4. I cannot track the definition of gi in anything from \npari-2.3, anyone knows where that come from and what it should be replaced with?\nThere is a line in pari-2.3 headers mentioning it but not a definition of it \nas far as I can see:\n\n```\n#define is_universal_constant(x) ((GEN)(x) >= gen_0 && (GEN)(x) <= gi)\n```\nthis is in paristio.h form pari-2.3.5.",
    "created_at": "2010-07-07T04:35:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79141",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:31" align="right">comment:31</div>

genus2reduction suffer the same kind of problems. But it is more serious:

```
genus2reduction.c: In function ‘main’:
genus2reduction.c:476: error: ‘polun’ undeclared (first use in this function)
genus2reduction.c:476: error: (Each undeclared identifier is reported only once
genus2reduction.c:476: error: for each function it appears in.)
genus2reduction.c:600: error: ‘polx’ undeclared (first use in this function)
genus2reduction.c:96: warning: ignoring return value of ‘scanf’, declared with attribute warn_unused_result
genus2reduction.c:98: warning: ignoring return value of ‘scanf’, declared with attribute warn_unused_result
genus2reduction.c: In function ‘factorpadicnonun’:
genus2reduction.c:1676: error: ‘polx’ undeclared (first use in this function)
genus2reduction.c: In function ‘polymini’:
genus2reduction.c:1701: error: ‘polx’ undeclared (first use in this function)
genus2reduction.c:1712: error: ‘zero’ undeclared (first use in this function)
genus2reduction.c:1731: error: ‘un’ undeclared (first use in this function)
genus2reduction.c: In function ‘discpart’:
genus2reduction.c:1818: error: ‘polun’ undeclared (first use in this function)
genus2reduction.c: In function ‘polyminizi’:
genus2reduction.c:1856: error: ‘gi’ undeclared (first use in this function)
genus2reduction.c:1859: error: ‘polx’ undeclared (first use in this function)
genus2reduction.c: In function ‘polyminizi2’:
genus2reduction.c:1939: error: ‘polx’ undeclared (first use in this function)
genus2reduction.c:1942: error: ‘gi’ undeclared (first use in this function)
genus2reduction.c: In function ‘zi2mod’:
genus2reduction.c:2001: error: ‘gi’ undeclared (first use in this function)
```
polun, polx, zero and un were all defined in pariold.h but are not anywhere
anymore in pari-2.4. I cannot track the definition of gi in anything from 
pari-2.3, anyone knows where that come from and what it should be replaced with?
There is a line in pari-2.3 headers mentioning it but not a definition of it 
as far as I can see:

```
#define is_universal_constant(x) ((GEN)(x) >= gen_0 && (GEN)(x) <= gi)
```
this is in paristio.h form pari-2.3.5.



---

archive/issue_comments_079142.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nI just noticed that the .p3.spkg compiles pari with flag -O1.  Surely this is not a sensible choice?",
    "created_at": "2010-07-09T11:48:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79142",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:33" align="right">comment:33</div>

I just noticed that the .p3.spkg compiles pari with flag -O1.  Surely this is not a sensible choice?



---

archive/issue_comments_079143.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nI have fixed a bug in Simon's extcode and am currently fixing doctest failures in sage/schemes/elliptic_curves -- so no-one else should work on thar dir without contacting me first!  John C",
    "created_at": "2010-07-09T11:53:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79143",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:34" align="right">comment:34</div>

I have fixed a bug in Simon's extcode and am currently fixing doctest failures in sage/schemes/elliptic_curves -- so no-one else should work on thar dir without contacting me first!  John C



---

archive/issue_comments_079144.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@JohnCremona](#comment%3A33):\n> I just noticed that the .p3.spkg compiles pari with flag -O1.  Surely this is not a sensible choice?\n\nSurely it was done on purpose, because with a bigger optimization flag PARI must have exhibited some bugs.  The question is how/why/if this is still needed.",
    "created_at": "2010-07-09T11:56:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79144",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@JohnCremona](#comment%3A33):
> I just noticed that the .p3.spkg compiles pari with flag -O1.  Surely this is not a sensible choice?

Surely it was done on purpose, because with a bigger optimization flag PARI must have exhibited some bugs.  The question is how/why/if this is still needed.



---

archive/issue_comments_079145.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nCan somebody please have a look at this:\n\n```\nRR(gp(exp(1)))\n```\n\nThis just hangs sage, in a way which can not even be interrupted.",
    "created_at": "2010-07-09T13:47:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79145",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:36" align="right">comment:36</div>

Can somebody please have a look at this:

```
RR(gp(exp(1)))
```

This just hangs sage, in a way which can not even be interrupted.



---

archive/issue_comments_079146.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nReplying to [@williamstein](#comment%3A35):\n> Replying to [@JohnCremona](#comment%3A33):\n> > I just noticed that the .p3.spkg compiles pari with flag -O1.  Surely this is not a sensible choice?\n> \n> \n> Surely it was done on purpose, because with a bigger optimization flag PARI must have exhibited some bugs.  The question is how/why/if this is still needed. \n\nI always compile my own copy of PARI/GP with -O3 -fomit-frame-pointer -march=core2 using the latest gcc and that seems to work fine.",
    "created_at": "2010-07-10T11:24:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79146",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:37" align="right">comment:37</div>

Replying to [@williamstein](#comment%3A35):
> Replying to [@JohnCremona](#comment%3A33):
> > I just noticed that the .p3.spkg compiles pari with flag -O1.  Surely this is not a sensible choice?
> 
> 
> Surely it was done on purpose, because with a bigger optimization flag PARI must have exhibited some bugs.  The question is how/why/if this is still needed. 

I always compile my own copy of PARI/GP with -O3 -fomit-frame-pointer -march=core2 using the latest gcc and that seems to work fine.



---

archive/issue_comments_079147.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nI found a bug in PARI's nfbasis() command: [PARI bug 1072](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1072).  Now that it has been fixed, maybe somebody should make a new spkg with the latest pari?",
    "created_at": "2010-07-10T11:30:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79147",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:38" align="right">comment:38</div>

I found a bug in PARI's nfbasis() command: [PARI bug 1072](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1072).  Now that it has been fixed, maybe somebody should make a new spkg with the latest pari?



---

archive/issue_comments_079148.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nReplying to [@jdemeyer](#comment%3A37):\n> Replying to [@williamstein](#comment%3A35):\n> > Replying to [@JohnCremona](#comment%3A33):\n> > > I just noticed that the .p3.spkg compiles pari with flag -O1.  Surely this is not a sensible choice?\n> > \n> > \n> > Surely it was done on purpose, because with a bigger optimization flag PARI must have exhibited some bugs.  The question is how/why/if this is still needed. \n> \n> \n> I always compile my own copy of PARI/GP with -O3 -fomit-frame-pointer -march=core2 using the latest gcc and that seems to work fine.\n\n\"Seems to\"?   The Sage test suite is a much better test suite for PARI than pari's own, IMHO.",
    "created_at": "2010-07-10T11:56:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79148",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:39" align="right">comment:39</div>

Replying to [@jdemeyer](#comment%3A37):
> Replying to [@williamstein](#comment%3A35):
> > Replying to [@JohnCremona](#comment%3A33):
> > > I just noticed that the .p3.spkg compiles pari with flag -O1.  Surely this is not a sensible choice?
> > 
> > 
> > Surely it was done on purpose, because with a bigger optimization flag PARI must have exhibited some bugs.  The question is how/why/if this is still needed. 
> 
> 
> I always compile my own copy of PARI/GP with -O3 -fomit-frame-pointer -march=core2 using the latest gcc and that seems to work fine.

"Seems to"?   The Sage test suite is a much better test suite for PARI than pari's own, IMHO.



---

archive/issue_comments_079149.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nReplying to [@jdemeyer](#comment%3A38):\n> I found a bug in PARI's nfbasis() command: [PARI bug 1072](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1072).  Now that it has been fixed, maybe somebody should make a new spkg with the latest pari?\n\nYes, definitely. It is nontrivial to make a new spkg though -- see spkg-dist...",
    "created_at": "2010-07-10T11:56:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79149",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:40" align="right">comment:40</div>

Replying to [@jdemeyer](#comment%3A38):
> I found a bug in PARI's nfbasis() command: [PARI bug 1072](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1072).  Now that it has been fixed, maybe somebody should make a new spkg with the latest pari?

Yes, definitely. It is nontrivial to make a new spkg though -- see spkg-dist...



---

archive/issue_comments_079150.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nI am working on the number field code in sage/rings/number_field/*\nLots of doctests simply fail because ideals have different generators:\n\"Fractional Ideal (a)\" is the same ideal as \"Fractional Ideal (-a)\" but of course this makes doctests fail.",
    "created_at": "2010-07-10T12:03:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79150",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:41" align="right">comment:41</div>

I am working on the number field code in sage/rings/number_field/*
Lots of doctests simply fail because ideals have different generators:
"Fractional Ideal (a)" is the same ideal as "Fractional Ideal (-a)" but of course this makes doctests fail.



---

archive/issue_comments_079151.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nI just reported another bug in nffactor to pari's bug-tracker:\n\n```\nsage -gp\n...\nf = polcyclo(21,y)\nnf = nfinit(f);\nb = Mod(y^7,f)\nnffactor(nf, x^2-b)\n```\ngives\n\n```\n\n  ***   at top-level: nffactor(nf,x^2-b)\n  ***                 ^------------------\n  *** nffactor: not enough precomputed primes\n  ***   Break loop: type 'break' to go back to GP\n```\nThis breaks a doctest in ell_generic.py",
    "created_at": "2010-07-10T20:06:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79151",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:42" align="right">comment:42</div>

I just reported another bug in nffactor to pari's bug-tracker:

```
sage -gp
...
f = polcyclo(21,y)
nf = nfinit(f);
b = Mod(y^7,f)
nffactor(nf, x^2-b)
```
gives

```

  ***   at top-level: nffactor(nf,x^2-b)
  ***                 ^------------------
  *** nffactor: not enough precomputed primes
  ***   Break loop: type 'break' to go back to GP
```
This breaks a doctest in ell_generic.py



---

archive/issue_comments_079152.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nIt's at http://pari.math.u-bordeaux.fr/cgi-bin/pkgreport.cgi?pkg=pari (#1075)",
    "created_at": "2010-07-10T20:09:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79152",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:43" align="right">comment:43</div>

It's at http://pari.math.u-bordeaux.fr/cgi-bin/pkgreport.cgi?pkg=pari (#1075)



---

archive/issue_events_118510.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2010-07-11T09:18:55Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "milestone_number": null,
    "milestone_title": "sage-4.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9343#event-118510"
}
```



---

archive/issue_events_118511.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2010-07-11T09:18:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "milestone_number": null,
    "milestone_title": "sage-5.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9343#event-118511"
}
```



---

archive/issue_comments_079153.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nReplying to [@JohnCremona](#comment%3A43):\n> It's at http://pari.math.u-bordeaux.fr/cgi-bin/pkgreport.cgi?pkg=pari (#1075)\n\nKarim Belabas writes:\n\n```\nSimpler symptom:\n nffactor(polcyclo(21,y), x^2-y^7);\n\nThis is actually unrelated to #1070. It was due to an nf being replaced\nby nf.pol --- because we use Trager's trick in that range instead of a\ndirect relative factorization, and don't need the nf data ---.\nUnfortunately, a branch of the code later tried to acces nf.index, thus\naccessing a random coefficient of the defining t_POL instead of the\nrelevant nf data.\n\nFixed in svn.\n\nCheers,\n\n   K.B.\n```\nso we now have another reason for upgrading the source in the spkg.",
    "created_at": "2010-07-11T09:18:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79153",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:44" align="right">comment:44</div>

Replying to [@JohnCremona](#comment%3A43):
> It's at http://pari.math.u-bordeaux.fr/cgi-bin/pkgreport.cgi?pkg=pari (#1075)

Karim Belabas writes:

```
Simpler symptom:
 nffactor(polcyclo(21,y), x^2-y^7);

This is actually unrelated to #1070. It was due to an nf being replaced
by nf.pol --- because we use Trager's trick in that range instead of a
direct relative factorization, and don't need the nf data ---.
Unfortunately, a branch of the code later tried to acces nf.index, thus
accessing a random coefficient of the defining t_POL instead of the
relevant nf data.

Fixed in svn.

Cheers,

   K.B.
```
so we now have another reason for upgrading the source in the spkg.



---

archive/issue_comments_079154.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nPlease don't move stuff to sage-5.0.     There will be a sage between sage-4.5 and sage-5.0, and *that* is what you should move the ticket to. Otherwise it could much more easily get lost....  I'll make such a roadmap entry now.",
    "created_at": "2010-07-11T09:29:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79154",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:45" align="right">comment:45</div>

Please don't move stuff to sage-5.0.     There will be a sage between sage-4.5 and sage-5.0, and *that* is what you should move the ticket to. Otherwise it could much more easily get lost....  I'll make such a roadmap entry now.



---

archive/issue_events_118512.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-07-11T09:30:40Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "milestone_number": null,
    "milestone_title": "sage-5.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9343#event-118512"
}
```



---

archive/issue_events_118513.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-07-11T09:30:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "milestone_number": null,
    "milestone_title": "sage-4.5.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9343#event-118513"
}
```



---

archive/issue_comments_079155.json:
```json
{
    "body": "Attachment: **[9343_discrete_log.patch.gz](https://github.com/sagemath/sage/files/ticket9343/9343_discrete_log.patch.gz)**",
    "created_at": "2010-07-11T10:26:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79155",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[9343_discrete_log.patch.gz](https://github.com/sagemath/sage/files/ticket9343/9343_discrete_log.patch.gz)**



---

archive/issue_comments_079156.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nI attached a small patch for integer discrete logarithms.  Note that the result in the doctest has always been wrong, but will now be corrected (so this is really a bug in the current version of Sage).",
    "created_at": "2010-07-11T10:27:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79156",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:47" align="right">comment:47</div>

I attached a small patch for integer discrete logarithms.  Note that the result in the doctest has always been wrong, but will now be corrected (so this is really a bug in the current version of Sage).



---

archive/issue_comments_079157.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nReplying to [@jdemeyer](#comment%3A47):\n> I attached a small patch for integer discrete logarithms.  Note that the result in the doctest has \n> always been wrong, but will now be corrected (so this is really a bug in the current version of Sage).\n\nGreat work!  I'm really glad we taught you Sage development last week!!!!",
    "created_at": "2010-07-11T10:32:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79157",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:48" align="right">comment:48</div>

Replying to [@jdemeyer](#comment%3A47):
> I attached a small patch for integer discrete logarithms.  Note that the result in the doctest has 
> always been wrong, but will now be corrected (so this is really a bug in the current version of Sage).

Great work!  I'm really glad we taught you Sage development last week!!!!



---

archive/issue_comments_079158.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nSorry to disrupt this little love-in here, but that bug has already been found (#9205) and fixed, and the patch has a positive review, and will probably be merged in the next alpha. \n\nThere are about a hundred patches with positive review waiting on trac, many of which have something to do with number fields (as a consequence of the big number theory Sage days at MSRI). I'm disappointed to realise that you folks haven't taken this into account, which will most likely mean that your work getting the number theory code to pass doctests with the new Pari version will be reduced to complete junk when all your patches fail to apply to the next alpha.",
    "created_at": "2010-07-11T10:43:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79158",
    "user": "https://github.com/loefflerd"
}
```

<div id="comment:49" align="right">comment:49</div>

Sorry to disrupt this little love-in here, but that bug has already been found (#9205) and fixed, and the patch has a positive review, and will probably be merged in the next alpha. 

There are about a hundred patches with positive review waiting on trac, many of which have something to do with number fields (as a consequence of the big number theory Sage days at MSRI). I'm disappointed to realise that you folks haven't taken this into account, which will most likely mean that your work getting the number theory code to pass doctests with the new Pari version will be reduced to complete junk when all your patches fail to apply to the next alpha.



---

archive/issue_comments_079159.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nNo need to be quite so negative.  Jeroen, I'm not sure why you thought that this ticket was the right place to add your patch anyway -- what does it have to do with the pari upgrade?",
    "created_at": "2010-07-11T11:16:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79159",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:50" align="right">comment:50</div>

No need to be quite so negative.  Jeroen, I'm not sure why you thought that this ticket was the right place to add your patch anyway -- what does it have to do with the pari upgrade?



---

archive/issue_comments_079160.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nReplying to [@JohnCremona](#comment%3A50):\n> No need to be quite so negative.  Jeroen, I'm not sure why you thought that this ticket was the right place to add your patch anyway -- what does it have to do with the pari upgrade?\n\nIt is related to the PARI upgrade because the new version of PARI fixes discrete logs (so, it fixes also #9205).  Doing the upgrade of PARI made a doctest fail, because the \"expected\" result from the doctest was wrong.",
    "created_at": "2010-07-11T11:43:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79160",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:51" align="right">comment:51</div>

Replying to [@JohnCremona](#comment%3A50):
> No need to be quite so negative.  Jeroen, I'm not sure why you thought that this ticket was the right place to add your patch anyway -- what does it have to do with the pari upgrade?

It is related to the PARI upgrade because the new version of PARI fixes discrete logs (so, it fixes also #9205).  Doing the upgrade of PARI made a doctest fail, because the "expected" result from the doctest was wrong.



---

archive/issue_comments_079161.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nRegarding the issue of\n\n```\nRR(gp(exp(1)))\n```\nor\n\n```\nZZ(gp(1))\n```\n\nThis makes Sage hang but without using CPU time.  So it does not go into an infinite loop, it literally does nothing.",
    "created_at": "2010-07-11T11:46:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79161",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:52" align="right">comment:52</div>

Regarding the issue of

```
RR(gp(exp(1)))
```
or

```
ZZ(gp(1))
```

This makes Sage hang but without using CPU time.  So it does not go into an infinite loop, it literally does nothing.



---

archive/issue_comments_079162.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nReplying to [@loefflerd](#comment%3A49):\n> Sorry to disrupt this little love-in here, but that bug has already been found (#9205) and fixed, and\n> the patch has a positive review, and will probably be merged in the next alpha. \n\nWe *really* need to release sage-4.5, so that somebody can get started with the next alpha (4.5.1). \n\n> There are about a hundred patches with positive review waiting on trac, many of which have something \n> to do with number fields (as a consequence of the big number theory Sage days at MSRI). I'm disappointed \n> to realise that you folks haven't taken this into account, which will most likely mean that your work\n> getting the number theory code to pass doctests with the new Pari version will be reduced to \n> complete junk when all your patches fail to apply to the next alpha.\n\nThat's pretty harsh.   Anyway, the pari upgrade is higher priority, so in fact it will be the other way around. \n\nWilliam",
    "created_at": "2010-07-11T12:12:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79162",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:53" align="right">comment:53</div>

Replying to [@loefflerd](#comment%3A49):
> Sorry to disrupt this little love-in here, but that bug has already been found (#9205) and fixed, and
> the patch has a positive review, and will probably be merged in the next alpha. 

We *really* need to release sage-4.5, so that somebody can get started with the next alpha (4.5.1). 

> There are about a hundred patches with positive review waiting on trac, many of which have something 
> to do with number fields (as a consequence of the big number theory Sage days at MSRI). I'm disappointed 
> to realise that you folks haven't taken this into account, which will most likely mean that your work
> getting the number theory code to pass doctests with the new Pari version will be reduced to 
> complete junk when all your patches fail to apply to the next alpha.

That's pretty harsh.   Anyway, the pari upgrade is higher priority, so in fact it will be the other way around. 

William



---

archive/issue_comments_079163.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nReplying to [@jdemeyer](#comment%3A52):\n> Regarding the issue of\n> \n> ```\n> RR(gp(exp(1)))\n> ```\n> or\n> \n> ```\n> ZZ(gp(1))\n> ```\n> \n\nWhen you use `gp` it is running the command in a subprocess.  Thus you'll never see any (nontrivial) CPU time.  \n> This makes Sage hang but without using CPU time.  So it does not go into an infinite loop, it literally does nothing.",
    "created_at": "2010-07-11T12:13:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79163",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:54" align="right">comment:54</div>

Replying to [@jdemeyer](#comment%3A52):
> Regarding the issue of
> 
> ```
> RR(gp(exp(1)))
> ```
> or
> 
> ```
> ZZ(gp(1))
> ```
> 

When you use `gp` it is running the command in a subprocess.  Thus you'll never see any (nontrivial) CPU time.  
> This makes Sage hang but without using CPU time.  So it does not go into an infinite loop, it literally does nothing.



---

archive/issue_comments_079164.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nI think I just had a small break-through:\n\nThe gp command now has the so-called \"breakloop\" on by default.  This means the following: if Sage executes a command through the gp interface which gives errors, the following will be displayed in the pseudo-tty (invisible to the Sage user):\n\n```\n? 1/0\n  ***   at top-level: 1/0\n  ***                  ^--\n  *** _/_: division by zero\n  ***   Break loop: type 'break' to go back to GP\nbreak>\n```\n\nNow gp just waits for user input.  Since that input will never come, it just sits there forever.\n\nI have a temporary workaround for this:\nin the directory SAGE_ROOT/local/bin, move \"gp\" to \"gp-real\".  Then create the following shell script called \"gp\":\n\n```\n!/bin/bash\n\nmkdir -p $HOME/sage_debug\nexport HOME=$HOME/sage_debug\necho \"breakloop = 0\" >$HOME/.gprc\n\n# Remove --fast option\nexec $SAGE_ROOT/local/bin/gp-real --emacs --quiet --stacksize 100000000\n```\n\nThis changes $HOME and makes a .gprc file in it which disables the break loop.  It then runs gp without --fast, so that the .gprc file is read.",
    "created_at": "2010-07-11T13:46:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79164",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:55" align="right">comment:55</div>

I think I just had a small break-through:

The gp command now has the so-called "breakloop" on by default.  This means the following: if Sage executes a command through the gp interface which gives errors, the following will be displayed in the pseudo-tty (invisible to the Sage user):

```
? 1/0
  ***   at top-level: 1/0
  ***                  ^--
  *** _/_: division by zero
  ***   Break loop: type 'break' to go back to GP
break>
```

Now gp just waits for user input.  Since that input will never come, it just sits there forever.

I have a temporary workaround for this:
in the directory SAGE_ROOT/local/bin, move "gp" to "gp-real".  Then create the following shell script called "gp":

```
!/bin/bash

mkdir -p $HOME/sage_debug
export HOME=$HOME/sage_debug
echo "breakloop = 0" >$HOME/.gprc

# Remove --fast option
exec $SAGE_ROOT/local/bin/gp-real --emacs --quiet --stacksize 100000000
```

This changes $HOME and makes a .gprc file in it which disables the break loop.  It then runs gp without --fast, so that the .gprc file is read.



---

archive/issue_comments_079165.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nAttachment: **[9343_extcode_dokchitser.patch.gz](https://github.com/sagemath/sage/files/ticket9343/9343_extcode_dokchitser.patch.gz)**\n\nJeroen:  I was surprised to see your dokchitser patch since I thought I was working on that -- and I have been in correspondence with Tim D all morning trying to sort out the use of global variables.  So, does you patch sort out all those issues (as well as the easy defult() ones)?  If so, I clearly have wasted a lot of time today.  This example makes it clear how extremely important it is that people say clearly what tey are working on.  And I DID say clearly that I was working on everythin the elliptic_curves directory, which includes all the code which calls the Dokchiter script.\n\nOn your other point, well spotted.  But would it not be simpler to send to the gp process on initialization the command gp._eval_line('breakloop=0;') ?\n\nNow I will go out and enjoy my Sunday, since my efforts seem to be not needed.",
    "created_at": "2010-07-11T14:13:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79165",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:56" align="right">comment:56</div>

Attachment: **[9343_extcode_dokchitser.patch.gz](https://github.com/sagemath/sage/files/ticket9343/9343_extcode_dokchitser.patch.gz)**

Jeroen:  I was surprised to see your dokchitser patch since I thought I was working on that -- and I have been in correspondence with Tim D all morning trying to sort out the use of global variables.  So, does you patch sort out all those issues (as well as the easy defult() ones)?  If so, I clearly have wasted a lot of time today.  This example makes it clear how extremely important it is that people say clearly what tey are working on.  And I DID say clearly that I was working on everythin the elliptic_curves directory, which includes all the code which calls the Dokchiter script.

On your other point, well spotted.  But would it not be simpler to send to the gp process on initialization the command gp._eval_line('breakloop=0;') ?

Now I will go out and enjoy my Sunday, since my efforts seem to be not needed.



---

archive/issue_comments_079166.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nReplying to [@JohnCremona](#comment%3A56):\n> Jeroen:  I was surprised to see your dokchitser patch since I thought I was working on that -- and I have been in correspondence with Tim D all morning trying to sort out the use of global variables.  So, does you patch sort out all those issues (as well as the easy defult() ones)?  If so, I clearly have wasted a lot of time today.  This example makes it clear how extremely important it is that people say clearly what tey are working on.  And I DID say clearly that I was working on everythin the elliptic_curves directory, which includes all the code which calls the Dokchiter script.\n> Now I will go out and enjoy my Sunday, since my efforts seem to be not needed.\n\nWell, I fixed the dokchitser script so it would pass some doctests in number_field.py.  But my fixes are very trivial (it took me no more than 5 minutes), so maybe you are making more serious changes to the file.  In that case, you can safely ignore my patch.",
    "created_at": "2010-07-11T14:42:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79166",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:57" align="right">comment:57</div>

Replying to [@JohnCremona](#comment%3A56):
> Jeroen:  I was surprised to see your dokchitser patch since I thought I was working on that -- and I have been in correspondence with Tim D all morning trying to sort out the use of global variables.  So, does you patch sort out all those issues (as well as the easy defult() ones)?  If so, I clearly have wasted a lot of time today.  This example makes it clear how extremely important it is that people say clearly what tey are working on.  And I DID say clearly that I was working on everythin the elliptic_curves directory, which includes all the code which calls the Dokchiter script.
> Now I will go out and enjoy my Sunday, since my efforts seem to be not needed.

Well, I fixed the dokchitser script so it would pass some doctests in number_field.py.  But my fixes are very trivial (it took me no more than 5 minutes), so maybe you are making more serious changes to the file.  In that case, you can safely ignore my patch.



---

archive/issue_comments_079167.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nReplying to [@JohnCremona](#comment%3A56):\n> On your other point, well spotted.  But would it not be simpler to send to the gp process on initialization the command gp._eval_line('breakloop=0;') ?\n\nCertainly, yes.  That's why I called my solution a \"work-around\".  What you want to do is every time a gp process gets started, the first line should be\n\n```\ndefault(breakloop,0);\n```\n\nBut I don't know how to do this.",
    "created_at": "2010-07-11T14:47:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79167",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:58" align="right">comment:58</div>

Replying to [@JohnCremona](#comment%3A56):
> On your other point, well spotted.  But would it not be simpler to send to the gp process on initialization the command gp._eval_line('breakloop=0;') ?

Certainly, yes.  That's why I called my solution a "work-around".  What you want to do is every time a gp process gets started, the first line should be

```
default(breakloop,0);
```

But I don't know how to do this.



---

archive/issue_comments_079168.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\n> But I don't know how to do this.\n\nLook in interfaces/gp.py and/or expect.py.",
    "created_at": "2010-07-11T14:53:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79168",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:59" align="right">comment:59</div>

> But I don't know how to do this.

Look in interfaces/gp.py and/or expect.py.



---

archive/issue_comments_079169.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nI will stop working on this for now (at least for the coming week), so I uploaded what I have done so far.  There are still many things to be done, though.\n\nOne thing which I looked at but did not manage to fix was factorization of polynomials over number fields in sage/rings/polynomial/polynomial_element.pyx",
    "created_at": "2010-07-11T16:28:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79169",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:60" align="right">comment:60</div>

I will stop working on this for now (at least for the coming week), so I uploaded what I have done so far.  There are still many things to be done, though.

One thing which I looked at but did not manage to fix was factorization of polynomials over number fields in sage/rings/polynomial/polynomial_element.pyx



---

archive/issue_comments_079170.json:
```json
{
    "body": "Attachment: **[9343_number_field_part1.patch.gz](https://github.com/sagemath/sage/files/ticket9343/9343_number_field_part1.patch.gz)**",
    "created_at": "2010-07-11T16:33:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79170",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[9343_number_field_part1.patch.gz](https://github.com/sagemath/sage/files/ticket9343/9343_number_field_part1.patch.gz)**



---

archive/issue_comments_079171.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nAnother PARI/GP bug found thanks to Sage: [PARI bug 1076](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1076)",
    "created_at": "2010-07-11T16:44:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79171",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:61" align="right">comment:61</div>

Another PARI/GP bug found thanks to Sage: [PARI bug 1076](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1076)



---

archive/issue_comments_079172.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nTODO: add more doctests for factoring polynomials over number fields.  Various cases:\n* non-monic polynomials\n* number fields defined by a non-monic polynomial\n* relative number fields: given a polynomial with coefficients in K, factor it over L",
    "created_at": "2010-07-12T06:09:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79172",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:62" align="right">comment:62</div>

TODO: add more doctests for factoring polynomials over number fields.  Various cases:
* non-monic polynomials
* number fields defined by a non-monic polynomial
* relative number fields: given a polynomial with coefficients in K, factor it over L



---

archive/issue_comments_079173.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nReplying to [@williamstein](#comment%3A59):\n> > But I don't know how to do this.\n> \n> \n> Look in interfaces/gp.py and/or expect.py.  \n\nSorted,  I added one line (line 170) in sage/interfaces/gp.py which says\n\n```\n        self._eval_line('default(breakloop,0);')\n```\nto get the command run everytime a new gp instance is created.  Now we get\n\n```\nsage: gp.eval('1/0')\n'  ***   at top-level: 1/0\\n  ***                  ^--\\n  *** _/_: division by zero'\n```\n(followed by a new sage: prompt) and also\n\n```\nRR(gp(exp(1)))\n2.71828182845905\nsage: \n```\nwith no problems.",
    "created_at": "2010-07-12T09:44:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79173",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:63" align="right">comment:63</div>

Replying to [@williamstein](#comment%3A59):
> > But I don't know how to do this.
> 
> 
> Look in interfaces/gp.py and/or expect.py.  

Sorted,  I added one line (line 170) in sage/interfaces/gp.py which says

```
        self._eval_line('default(breakloop,0);')
```
to get the command run everytime a new gp instance is created.  Now we get

```
sage: gp.eval('1/0')
'  ***   at top-level: 1/0\n  ***                  ^--\n  *** _/_: division by zero'
```
(followed by a new sage: prompt) and also

```
RR(gp(exp(1)))
2.71828182845905
sage: 
```
with no problems.



---

archive/issue_comments_079174.json:
```json
{
    "body": "apply instead of previous extcode-dokchitser patch",
    "created_at": "2010-07-12T09:56:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79174",
    "user": "https://github.com/JohnCremona"
}
```

apply instead of previous extcode-dokchitser patch



---

archive/issue_comments_079175.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nAttachment: **[9343_extcode_dokchitser-1.patch.gz](https://github.com/sagemath/sage/files/ticket9343/9343_extcode_dokchitser-1.patch.gz)**\n\nI replaced Jeroen's 9343_extcode-dokchitser.patch with a new one which also fixes the test scripts in extcode/pari/dokchitser;  and fixes one line in extcode/pari/simon/ellQ.gp which is all that is required for that set of scripts.",
    "created_at": "2010-07-12T09:58:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79175",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:64" align="right">comment:64</div>

Attachment: **[9343_extcode_dokchitser-1.patch.gz](https://github.com/sagemath/sage/files/ticket9343/9343_extcode_dokchitser-1.patch.gz)**

I replaced Jeroen's 9343_extcode-dokchitser.patch with a new one which also fixes the test scripts in extcode/pari/dokchitser;  and fixes one line in extcode/pari/simon/ellQ.gp which is all that is required for that set of scripts.



---

archive/issue_comments_079176.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nReplying to [@JohnCremona](#comment%3A56):\n> Jeroen:  I was surprised to see your dokchitser patch since I thought I was working on that -- and I have been in correspondence with Tim D all morning trying to sort out the use of global variables.  So, does you patch sort out all those issues (as well as the easy defult() ones)?  If so, I clearly have wasted a lot of time today.  This example makes it clear how extremely important it is that people say clearly what tey are working on.  And I DID say clearly that I was working on everythin the elliptic_curves directory, which includes all the code which calls the Dokchiter script.\n\nApologies for this outburst.  I did waste time, but only because of my inferior gp-script debugging skills.  Thanks to Jeroen there is a much simpler fix for what was troubling me!\n\n> \n> On your other point, well spotted.  But would it not be simpler to send to the gp process on initialization the command gp._eval_line('breakloop=0;') ?\n> \n> Now I will go out and enjoy my Sunday, since my efforts seem to be not needed.",
    "created_at": "2010-07-12T09:59:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79176",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:65" align="right">comment:65</div>

Replying to [@JohnCremona](#comment%3A56):
> Jeroen:  I was surprised to see your dokchitser patch since I thought I was working on that -- and I have been in correspondence with Tim D all morning trying to sort out the use of global variables.  So, does you patch sort out all those issues (as well as the easy defult() ones)?  If so, I clearly have wasted a lot of time today.  This example makes it clear how extremely important it is that people say clearly what tey are working on.  And I DID say clearly that I was working on everythin the elliptic_curves directory, which includes all the code which calls the Dokchiter script.

Apologies for this outburst.  I did waste time, but only because of my inferior gp-script debugging skills.  Thanks to Jeroen there is a much simpler fix for what was troubling me!

> 
> On your other point, well spotted.  But would it not be simpler to send to the gp process on initialization the command gp._eval_line('breakloop=0;') ?
> 
> Now I will go out and enjoy my Sunday, since my efforts seem to be not needed.



---

archive/issue_comments_079177.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nReplying to [@jdemeyer](#comment%3A37):\n> Replying to [@williamstein](#comment%3A35):\n> > Replying to [@JohnCremona](#comment%3A33):\n> > > I just noticed that the .p3.spkg compiles pari with flag -O1.  Surely this is not a sensible choice?\n> > \n> > \n> > Surely it was done on purpose, because with a bigger optimization flag PARI must have exhibited some bugs.  The question is how/why/if this is still needed. \n> \n> \n> I always compile my own copy of PARI/GP with -O3 -fomit-frame-pointer -march=core2 using the latest gcc and that seems to work fine.\n\nThe answer is at #7092:  because of a failure to build pari with gcc-4.4.1 as distributed by Fedora 11, on ALL Linux systems the OPTFLAG is set to -O1 instead of -O3.  Is there not a way to detect that particular compiler-distro combination?  Otherwise all Linux users suffer!",
    "created_at": "2010-07-13T13:18:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79177",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:66" align="right">comment:66</div>

Replying to [@jdemeyer](#comment%3A37):
> Replying to [@williamstein](#comment%3A35):
> > Replying to [@JohnCremona](#comment%3A33):
> > > I just noticed that the .p3.spkg compiles pari with flag -O1.  Surely this is not a sensible choice?
> > 
> > 
> > Surely it was done on purpose, because with a bigger optimization flag PARI must have exhibited some bugs.  The question is how/why/if this is still needed. 
> 
> 
> I always compile my own copy of PARI/GP with -O3 -fomit-frame-pointer -march=core2 using the latest gcc and that seems to work fine.

The answer is at #7092:  because of a failure to build pari with gcc-4.4.1 as distributed by Fedora 11, on ALL Linux systems the OPTFLAG is set to -O1 instead of -O3.  Is there not a way to detect that particular compiler-distro combination?  Otherwise all Linux users suffer!



---

archive/issue_comments_079178.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\n>  Is there not a way to detect that particular compiler-distro combination? Otherwise all Linux users suffer!\n\nIt was a big mistake that #7092 got a positive review (from Jaap), and another mistake that the release manager (me) didn't reject that review.  Anyway, thanks for tracking this down -- we should definitely make that -O1 hack only Fedora 11.\n\n -- William",
    "created_at": "2010-07-13T21:31:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79178",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:67" align="right">comment:67</div>

>  Is there not a way to detect that particular compiler-distro combination? Otherwise all Linux users suffer!

It was a big mistake that #7092 got a positive review (from Jaap), and another mistake that the release manager (me) didn't reject that review.  Anyway, thanks for tracking this down -- we should definitely make that -O1 hack only Fedora 11.

 -- William



---

archive/issue_comments_079179.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\nAlso, we don't have to support fedora 11 -- it's like 2 versions out of date, and we only claim to support the latest Linux versions, out of the box.",
    "created_at": "2010-07-13T21:31:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79179",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:68" align="right">comment:68</div>

Also, we don't have to support fedora 11 -- it's like 2 versions out of date, and we only claim to support the latest Linux versions, out of the box.



---

archive/issue_comments_079180.json:
```json
{
    "body": "fixes most doctests in elliptic_curves and interfaces/gp",
    "created_at": "2010-07-16T16:20:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79180",
    "user": "https://github.com/JohnCremona"
}
```

fixes most doctests in elliptic_curves and interfaces/gp



---

archive/issue_comments_079181.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\nAttachment: **[trac_9343-elliptic-curve.patch.gz](https://github.com/sagemath/sage/files/ticket9343/trac_9343-elliptic-curve.patch.gz)**\n\ntrac_9343-elliptic-curve.patch + http://www.warwick.ac.uk/staff/J.E.Cremona/pari-2.4.3.svn.p4.spkg  (which upgrades to svn 12533)   do the following:\n\n1. All doctests in schemes/elliptic_curves pass except heegner.py\n2. All doctests in interfaces/* pass except for two issues in gp.py marked not tested\" for now\n3. All in libs/ pass except some remaining issues in gen.pyx, mostly just fuzz but including one SIGSEGV\n\n I thought this worth posting despite there still being issues in some of the files it touches.",
    "created_at": "2010-07-16T16:29:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79181",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:69" align="right">comment:69</div>

Attachment: **[trac_9343-elliptic-curve.patch.gz](https://github.com/sagemath/sage/files/ticket9343/trac_9343-elliptic-curve.patch.gz)**

trac_9343-elliptic-curve.patch + http://www.warwick.ac.uk/staff/J.E.Cremona/pari-2.4.3.svn.p4.spkg  (which upgrades to svn 12533)   do the following:

1. All doctests in schemes/elliptic_curves pass except heegner.py
2. All doctests in interfaces/* pass except for two issues in gp.py marked not tested" for now
3. All in libs/ pass except some remaining issues in gen.pyx, mostly just fuzz but including one SIGSEGV

 I thought this worth posting despite there still being issues in some of the files it touches.



---

archive/issue_comments_079182.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">comment:70</div>\n\nI'm attaching a `spkg-check` file. I originally created #9518 to add the `spkg-check`, but John said to leave it, and let the changes be made as part of this ticket. When this ticket gets closed, so can #9518\n\nNote there is an error in spkg-install on the first line, which displays as:\n\n`B1;2000;0c#!/bin/sh` \n\nIn fact, I'm surprised that works at all. \n\nDave",
    "created_at": "2010-07-16T18:08:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79182",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:70" align="right">comment:70</div>

I'm attaching a `spkg-check` file. I originally created #9518 to add the `spkg-check`, but John said to leave it, and let the changes be made as part of this ticket. When this ticket gets closed, so can #9518

Note there is an error in spkg-install on the first line, which displays as:

`B1;2000;0c#!/bin/sh` 

In fact, I'm surprised that works at all. 

Dave



---

archive/issue_comments_079183.json:
```json
{
    "body": "Attachment: **[spkg-check.gz](https://github.com/sagemath/sage/files/ticket9343/spkg-check.gz)**\n\nspkg-check for Pari",
    "created_at": "2010-07-16T18:09:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79183",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

Attachment: **[spkg-check.gz](https://github.com/sagemath/sage/files/ticket9343/spkg-check.gz)**

spkg-check for Pari



---

archive/issue_comments_079184.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nReplying to [@JohnCremona](#comment%3A69):\n> trac_9343-elliptic-curve.patch + http://www.warwick.ac.uk/staff/J.E.Cremona/pari-2.4.3.svn.p4.spkg  \n\nThis will not install for me.\n\n## Build environment\n* Sun Ultra 27 3.33 GHz Intel W3580 Xeon. Quad core. 8 threads. \n* 12 GB RAM\n* OpenSolaris 2009.06 snv_134 X86\n* Sage 4.5\n* gcc 4.4.4\n\nOne likely cause of a problem is the `Dynamic Lib linker` does not include the -m64 flag (it should be included if SAGE64 is \"yes\"). \n\n```\npari-2.4.3.svn.p4/.hgignore\npari-2.4.3.svn.p4/spkg-install\nFinished extraction\n****************************************************\nHost system\nuname -a:\nSunOS hawk 5.11 snv_134 i86pc i386 i86pc\n****************************************************\n****************************************************\nCC Version\ngcc -v\nUsing built-in specs.\nTarget: i386-pc-solaris2.11\nConfigured with: /export/home/drkirkby/gcc-4.4.4/configure --prefix=/usr/local/gcc-4.4.4-multilib --enable-languages=c,c++,fortran --with-gmp=/usr/local/gcc-4.4.4-multilib --with-mpfr=/usr/local/gcc-4.4.4-multilib --disable-nls --enable-checking=release --enable-werror=no --enable-multilib --with-system-zlib --enable-bootstrap --with-gnu-as --with-as=/usr/local/binutils-2.20/bin/as --without-gnu-ld --with-ld=/usr/ccs/bin/ld\nThread model: posix\ngcc version 4.4.4 (GCC) \n****************************************************\n./spkg-install: line 1: B1: command not found\n./spkg-install: line 1: 2000: command not found\n./spkg-install: line 1: 0c#!/bin/sh: No such file or directory\nConfiguring pari-2.4.3 (DEVELOPMENT VERSION) \nChecking echo to see how to suppress newlines...\n...using \\c\nLooking for some tools first ...\n...ld is /usr/bin/ld\n...zcat is /usr/bin/zcat\n...gzip is /usr/bin/gzip\n...ranlib is /usr/bin/ranlib\n...perl is /usr/bin/perl\nGNU compiler version 4.4.4 (GCC)\nGiven the previous choices, sizeof(long) is 8 chars.\nThe internal word representation of a double is not needed (64bit).\n==========================================================================\nBuilding for: ix86 running solaris (x86-64/GMP kernel) 64-bit version\n==========================================================================\nC compiler is          gcc -O3 -Wall -fno-strict-aliasing -fomit-frame-pointer -fPIC  -g -m64   \nExecutable linker is   gcc  -O3 -Wall -fno-strict-aliasing -fomit-frame-pointer -fPIC  -g -m64   \nDynamic Lib linker is  gcc  -shared  $(CFLAGS) $(DLCFLAGS) -Wl,-G,-h,$(LIBPARI_SONAME) \nLooking in C lib for some symbols...\n...Found exp2.\n...Found log2.\n...Found strftime.\n...Found getrusage.\n...Found sigaction.\n...Found TIOCGWINSZ.\n...Found getrlimit.\n...Found stat.\n...Found vsnprintf.\n...Found waitpid.\n...Found setsid.\n...Found getenv.\n...Found isatty.\n...Found alarm.\n...Found dlopen.\nChecking for optional libraries and headers...\n...Found libgmp in /export/home/drkirkby/sage-4.5/local/lib\n...Found gmp header in /export/home/drkirkby/sage-4.5/local/include\nld.so.1: solaris-ix86-rlv23868: fatal: libgmp.so.10: open failed: No such file or directory\n./Configure[79]: .: line 38: 24072: Killed\n### Your version of GMP is too old for PARI. Please upgrade\n### Building without GNU MP support\nHi-Res Graphics: none\n...Found libreadline in /export/home/drkirkby/sage-4.5/local/lib\n...Found readline header in /export/home/drkirkby/sage-4.5/local/include/readline\n...Found history header in /export/home/drkirkby/sage-4.5/local/include/readline\n...Found libtermcap in /export/home/drkirkby/sage-4.5/local/lib/\n...Library termcap needed by readline\n###\n### Readline library detected, but does not seem to work\n###\n### Building without GNU readline support\nInstallation prefix ? [/export/home/drkirkby/sage-4.5/local]\n...for architecture-independent files (share-prefix) ? [/export/home/drkirkby/sage-4.5/local/share]\nInstallation directories for:\n...executables (gp, gphelp) ? [/export/home/drkirkby/sage-4.5/local/bin]\n...libraries (libpari) ? [/export/home/drkirkby/sage-4.5/local/lib]\n...include files ? [/export/home/drkirkby/sage-4.5/local/include]\n...manual pages ? [/export/home/drkirkby/sage-4.5/local/share/man/man1]\n...other system-dependent data ? [/export/home/drkirkby/sage-4.5/local/lib/pari]\n...other system-independent data ? [/export/home/drkirkby/sage-4.5/local/share/pari]\nDefault is dynamic executable and shared library\n==========================================================================\nExtracting examples/Makefile.solaris-ix86\nExtracting Osolaris-ix86/Makefile\nExtracting Makefile\nExtracting Osolaris-ix86/paricfg.h\nExtracting Osolaris-ix86/../Odos/paricfg.h\nExtracting scripts and macros\n...in doc\n...in misc\n==========================================================================\nShall we try to build pari 2.4.3 (development) now (y/n)? [n]\nOk. Type \"make install\" when you are ready\nBye !\nBuilding and install PARI\nMaking gp in Osolaris-ix86\nmake[1]: Entering directory `/export/home/drkirkby/sage-4.5/spkg/build/pari-2.4.3.svn.p4/src/Osolaris-ix86'\nmake[1]: warning: -jN forced in submake: disabling jobserver mode.\n../config/genkernel ../src/kernel/x86_64/asm0.h > parilvl0.h\nif test -r ./tune.h; then d=.; else d=../src/kernel/none; fi;          cat $d/tune.h ../src/kernel/none/int.h ../src/kernel/none/level1.h > parilvl1.h\ncd ../src/desc && /usr/bin/perl whatnow > whatnow-solaris-ix86-23868.tmp\ncat ../src/kernel/none/mp.c ../src/kernel/none/cmp.c ../src/kernel/none/gcdll.c ../src/kernel/none/ratlift.c  ../src/kernel/none/invmod.c ../src/kernel/none/gcd.c ../src/kernel/none/gcdext.c ../src/kernel/none/mp_indep.c ../src/kernel/none/add.c > mp.c\nbison -d ../src/language/parse.y -o ../src/language/parse.c\nmake[1]: bison: Command not found\nmake[1]: *** [../src/language/parse.h] Error 127\nmake[1]: *** Waiting for unfinished jobs....\nmv ../src/desc/whatnow-solaris-ix86-23868.tmp ../src/gp/whatnow.h\nmake[1]: Leaving directory `/export/home/drkirkby/sage-4.5/spkg/build/pari-2.4.3.svn.p4/src/Osolaris-ix86'\nmake: *** [gp] Error 2\nError building GP\n\nreal\t0m1.203s\nuser\t0m0.551s\nsys\t0m0.640s\nsage: An error occurred while installing pari-2.4.3.svn.p4\n```",
    "created_at": "2010-07-18T14:04:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79184",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:71" align="right">comment:71</div>

Replying to [@JohnCremona](#comment%3A69):
> trac_9343-elliptic-curve.patch + http://www.warwick.ac.uk/staff/J.E.Cremona/pari-2.4.3.svn.p4.spkg  

This will not install for me.

## Build environment
* Sun Ultra 27 3.33 GHz Intel W3580 Xeon. Quad core. 8 threads. 
* 12 GB RAM
* OpenSolaris 2009.06 snv_134 X86
* Sage 4.5
* gcc 4.4.4

One likely cause of a problem is the `Dynamic Lib linker` does not include the -m64 flag (it should be included if SAGE64 is "yes"). 

```
pari-2.4.3.svn.p4/.hgignore
pari-2.4.3.svn.p4/spkg-install
Finished extraction
****************************************************
Host system
uname -a:
SunOS hawk 5.11 snv_134 i86pc i386 i86pc
****************************************************
****************************************************
CC Version
gcc -v
Using built-in specs.
Target: i386-pc-solaris2.11
Configured with: /export/home/drkirkby/gcc-4.4.4/configure --prefix=/usr/local/gcc-4.4.4-multilib --enable-languages=c,c++,fortran --with-gmp=/usr/local/gcc-4.4.4-multilib --with-mpfr=/usr/local/gcc-4.4.4-multilib --disable-nls --enable-checking=release --enable-werror=no --enable-multilib --with-system-zlib --enable-bootstrap --with-gnu-as --with-as=/usr/local/binutils-2.20/bin/as --without-gnu-ld --with-ld=/usr/ccs/bin/ld
Thread model: posix
gcc version 4.4.4 (GCC) 
****************************************************
./spkg-install: line 1: B1: command not found
./spkg-install: line 1: 2000: command not found
./spkg-install: line 1: 0c#!/bin/sh: No such file or directory
Configuring pari-2.4.3 (DEVELOPMENT VERSION) 
Checking echo to see how to suppress newlines...
...using \c
Looking for some tools first ...
...ld is /usr/bin/ld
...zcat is /usr/bin/zcat
...gzip is /usr/bin/gzip
...ranlib is /usr/bin/ranlib
...perl is /usr/bin/perl
GNU compiler version 4.4.4 (GCC)
Given the previous choices, sizeof(long) is 8 chars.
The internal word representation of a double is not needed (64bit).
==========================================================================
Building for: ix86 running solaris (x86-64/GMP kernel) 64-bit version
==========================================================================
C compiler is          gcc -O3 -Wall -fno-strict-aliasing -fomit-frame-pointer -fPIC  -g -m64   
Executable linker is   gcc  -O3 -Wall -fno-strict-aliasing -fomit-frame-pointer -fPIC  -g -m64   
Dynamic Lib linker is  gcc  -shared  $(CFLAGS) $(DLCFLAGS) -Wl,-G,-h,$(LIBPARI_SONAME) 
Looking in C lib for some symbols...
...Found exp2.
...Found log2.
...Found strftime.
...Found getrusage.
...Found sigaction.
...Found TIOCGWINSZ.
...Found getrlimit.
...Found stat.
...Found vsnprintf.
...Found waitpid.
...Found setsid.
...Found getenv.
...Found isatty.
...Found alarm.
...Found dlopen.
Checking for optional libraries and headers...
...Found libgmp in /export/home/drkirkby/sage-4.5/local/lib
...Found gmp header in /export/home/drkirkby/sage-4.5/local/include
ld.so.1: solaris-ix86-rlv23868: fatal: libgmp.so.10: open failed: No such file or directory
./Configure[79]: .: line 38: 24072: Killed
### Your version of GMP is too old for PARI. Please upgrade
### Building without GNU MP support
Hi-Res Graphics: none
...Found libreadline in /export/home/drkirkby/sage-4.5/local/lib
...Found readline header in /export/home/drkirkby/sage-4.5/local/include/readline
...Found history header in /export/home/drkirkby/sage-4.5/local/include/readline
...Found libtermcap in /export/home/drkirkby/sage-4.5/local/lib/
...Library termcap needed by readline
###
### Readline library detected, but does not seem to work
###
### Building without GNU readline support
Installation prefix ? [/export/home/drkirkby/sage-4.5/local]
...for architecture-independent files (share-prefix) ? [/export/home/drkirkby/sage-4.5/local/share]
Installation directories for:
...executables (gp, gphelp) ? [/export/home/drkirkby/sage-4.5/local/bin]
...libraries (libpari) ? [/export/home/drkirkby/sage-4.5/local/lib]
...include files ? [/export/home/drkirkby/sage-4.5/local/include]
...manual pages ? [/export/home/drkirkby/sage-4.5/local/share/man/man1]
...other system-dependent data ? [/export/home/drkirkby/sage-4.5/local/lib/pari]
...other system-independent data ? [/export/home/drkirkby/sage-4.5/local/share/pari]
Default is dynamic executable and shared library
==========================================================================
Extracting examples/Makefile.solaris-ix86
Extracting Osolaris-ix86/Makefile
Extracting Makefile
Extracting Osolaris-ix86/paricfg.h
Extracting Osolaris-ix86/../Odos/paricfg.h
Extracting scripts and macros
...in doc
...in misc
==========================================================================
Shall we try to build pari 2.4.3 (development) now (y/n)? [n]
Ok. Type "make install" when you are ready
Bye !
Building and install PARI
Making gp in Osolaris-ix86
make[1]: Entering directory `/export/home/drkirkby/sage-4.5/spkg/build/pari-2.4.3.svn.p4/src/Osolaris-ix86'
make[1]: warning: -jN forced in submake: disabling jobserver mode.
../config/genkernel ../src/kernel/x86_64/asm0.h > parilvl0.h
if test -r ./tune.h; then d=.; else d=../src/kernel/none; fi;          cat $d/tune.h ../src/kernel/none/int.h ../src/kernel/none/level1.h > parilvl1.h
cd ../src/desc && /usr/bin/perl whatnow > whatnow-solaris-ix86-23868.tmp
cat ../src/kernel/none/mp.c ../src/kernel/none/cmp.c ../src/kernel/none/gcdll.c ../src/kernel/none/ratlift.c  ../src/kernel/none/invmod.c ../src/kernel/none/gcd.c ../src/kernel/none/gcdext.c ../src/kernel/none/mp_indep.c ../src/kernel/none/add.c > mp.c
bison -d ../src/language/parse.y -o ../src/language/parse.c
make[1]: bison: Command not found
make[1]: *** [../src/language/parse.h] Error 127
make[1]: *** Waiting for unfinished jobs....
mv ../src/desc/whatnow-solaris-ix86-23868.tmp ../src/gp/whatnow.h
make[1]: Leaving directory `/export/home/drkirkby/sage-4.5/spkg/build/pari-2.4.3.svn.p4/src/Osolaris-ix86'
make: *** [gp] Error 2
Error building GP

real	0m1.203s
user	0m0.551s
sys	0m0.640s
sage: An error occurred while installing pari-2.4.3.svn.p4
```



---

archive/issue_comments_079185.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">comment:72</div>\n\nIs this something wrong with pari's Configure script -- in which case should be reported upstream?  Or something which could be fixed by a change in the spkg-install script?",
    "created_at": "2010-07-18T15:11:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79185",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:72" align="right">comment:72</div>

Is this something wrong with pari's Configure script -- in which case should be reported upstream?  Or something which could be fixed by a change in the spkg-install script?



---

archive/issue_comments_079186.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">comment:73</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A70):\n> I'm attaching a `spkg-check` file. I originally created #9518 to add the `spkg-check`, but John said to leave it, and let the changes be made as part of this ticket. When this ticket gets closed, so can #9518\n\nI found out how to exclude a test from being run with test-all (there's a list in src/config/get_test) and the next version of the spkg will patch that file appropriately.\n\n> \n> Note there is an error in spkg-install on the first line, which displays as:\n> \n> `B1;2000;0c#!/bin/sh` \n> \n\nFixed.  Probably a finger-blunder by me.\n\n> In fact, I'm surprised that works at all. \n> \n> Dave",
    "created_at": "2010-07-18T15:21:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79186",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:73" align="right">comment:73</div>

Replying to [@sagetrac-drkirkby](#comment%3A70):
> I'm attaching a `spkg-check` file. I originally created #9518 to add the `spkg-check`, but John said to leave it, and let the changes be made as part of this ticket. When this ticket gets closed, so can #9518

I found out how to exclude a test from being run with test-all (there's a list in src/config/get_test) and the next version of the spkg will patch that file appropriately.

> 
> Note there is an error in spkg-install on the first line, which displays as:
> 
> `B1;2000;0c#!/bin/sh` 
> 

Fixed.  Probably a finger-blunder by me.

> In fact, I'm surprised that works at all. 
> 
> Dave



---

archive/issue_comments_079187.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">comment:74</div>\n\nReplying to [@JohnCremona](#comment%3A72):\n> Is this something wrong with pari's Configure script -- in which case should be reported upstream?  Or something which could be fixed by a change in the spkg-install script?\n\nThe type at the start of spkg-install is in the current version of pari. I'm puzzled it works at all, but it seems to. \n\nI was mistaken on the LINKER FLAGS, as that include CFLAGS, so the -m64 will get there from that. \n\nHowever, this still thinks gmp is broken. The version of Pari in Sage at the moment reports:\n\n```\nChecking for optional libraries and headers...\n...Found libgmp in /rootpool2/local/kirkby/sage-4.5-hacked-for-64-bit-solaris/local/lib\n...Found gmp header in /rootpool2/local/kirkby/sage-4.5-hacked-for-64-bit-solaris/local/include\nUsing GNU MP, version 4.3.1\n...Found libX11 in /usr/openwin/lib\n...Found X11 header files in /usr/openwin/include/X11\n```\n\ncompared to this version, where I see: \n\n```\nChecking for optional libraries and headers...\n...Found libgmp in /export/home/drkirkby/sage-4.5/local/lib\n...Found gmp header in /export/home/drkirkby/sage-4.5/local/include\nld.so.1: solaris-ix86-rlv23868: fatal: libgmp.so.10: open failed: No such file or directory\n./Configure[79]: .: line 38: 24072: Killed\n### Your version of GMP is too old for PARI. Please upgrade\n### Building without GNU MP support\nHi-Res Graphics: none\n...Found libreadline in /export/home/drkirkby/sage-4.5/local/lib\n```\n\nSo something has changed for the worst. \n\nThis version from svn wants bison too, so you will have to generate the files, since bison is not a prerequisite for Sage, and is not included in Sage. \n\nDave",
    "created_at": "2010-07-19T00:01:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79187",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:74" align="right">comment:74</div>

Replying to [@JohnCremona](#comment%3A72):
> Is this something wrong with pari's Configure script -- in which case should be reported upstream?  Or something which could be fixed by a change in the spkg-install script?

The type at the start of spkg-install is in the current version of pari. I'm puzzled it works at all, but it seems to. 

I was mistaken on the LINKER FLAGS, as that include CFLAGS, so the -m64 will get there from that. 

However, this still thinks gmp is broken. The version of Pari in Sage at the moment reports:

```
Checking for optional libraries and headers...
...Found libgmp in /rootpool2/local/kirkby/sage-4.5-hacked-for-64-bit-solaris/local/lib
...Found gmp header in /rootpool2/local/kirkby/sage-4.5-hacked-for-64-bit-solaris/local/include
Using GNU MP, version 4.3.1
...Found libX11 in /usr/openwin/lib
...Found X11 header files in /usr/openwin/include/X11
```

compared to this version, where I see: 

```
Checking for optional libraries and headers...
...Found libgmp in /export/home/drkirkby/sage-4.5/local/lib
...Found gmp header in /export/home/drkirkby/sage-4.5/local/include
ld.so.1: solaris-ix86-rlv23868: fatal: libgmp.so.10: open failed: No such file or directory
./Configure[79]: .: line 38: 24072: Killed
### Your version of GMP is too old for PARI. Please upgrade
### Building without GNU MP support
Hi-Res Graphics: none
...Found libreadline in /export/home/drkirkby/sage-4.5/local/lib
```

So something has changed for the worst. 

This version from svn wants bison too, so you will have to generate the files, since bison is not a prerequisite for Sage, and is not included in Sage. 

Dave



---

archive/issue_comments_079188.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">comment:75</div>\n\nReplying to [@JohnCremona](#comment%3A69):\n> trac_9343-elliptic-curve.patch + http://www.warwick.ac.uk/staff/J.E.Cremona/pari-2.4.3.svn.p4.spkg  (which upgrades to svn 12533)   do the following:\n> \n> 1. All doctests in schemes/elliptic_curves pass except heegner.py\n> 2. All doctests in interfaces/* pass except for two issues in gp.py marked not tested\" for now\n> 3. All in libs/ pass except some remaining issues in gen.pyx, mostly just fuzz but including one SIGSEGV\n> \n>  I thought this worth posting despite there still being issues in some of the files it touches.\n\nNice work John!  Please let me know what you're working on, since I also plan to continue working on this ticket.",
    "created_at": "2010-07-19T21:45:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79188",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:75" align="right">comment:75</div>

Replying to [@JohnCremona](#comment%3A69):
> trac_9343-elliptic-curve.patch + http://www.warwick.ac.uk/staff/J.E.Cremona/pari-2.4.3.svn.p4.spkg  (which upgrades to svn 12533)   do the following:
> 
> 1. All doctests in schemes/elliptic_curves pass except heegner.py
> 2. All doctests in interfaces/* pass except for two issues in gp.py marked not tested" for now
> 3. All in libs/ pass except some remaining issues in gen.pyx, mostly just fuzz but including one SIGSEGV
> 
>  I thought this worth posting despite there still being issues in some of the files it touches.

Nice work John!  Please let me know what you're working on, since I also plan to continue working on this ticket.



---

archive/issue_comments_079189.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">comment:76</div>\n\nHi, \nJohn or someone else can perhaps convey this to the Pari developers. Would it be possible for them to add the -fPIC option on at least all Solaris systems. (Both SPARC and x86). If code goes into a shared library, it should be compiled position independent. It is unreliable if this is not done. There's some relevant information about this here. \n\nhttp://gcc.gnu.org/onlinedocs/gcc-4.5.0/gcc/Code-Gen-Options.html#Code-Gen-Options\nhttp://gcc.gnu.org/onlinedocs/gcc-4.5.0/gcc/Link-Options.html#Link-Options\n\nI believe it would be more reliable to build with -fPIC when the code is going into a shared library - irrespective of the platform. What one should ensure though is there is not a mixture of PIC and non-PIC code, as that can be unreliable too. \n\nI've not had a chance to look at the other issues, but as far as I can see, this update completely breaks a 64-bit build on Solaris or OpenSolaris. \n\nI've also noticed that Pari reports that *readline* is not working on Solaris systems. Yet the *readline* is definitely working in my Sage builds on Solaris. Several parts of Sage link against readline (Pari, gap, Singular, ECL, Python ...). None of them believe that *readline* is broken, but Pari does. \n\nDave",
    "created_at": "2010-07-20T02:13:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79189",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:76" align="right">comment:76</div>

Hi, 
John or someone else can perhaps convey this to the Pari developers. Would it be possible for them to add the -fPIC option on at least all Solaris systems. (Both SPARC and x86). If code goes into a shared library, it should be compiled position independent. It is unreliable if this is not done. There's some relevant information about this here. 

http://gcc.gnu.org/onlinedocs/gcc-4.5.0/gcc/Code-Gen-Options.html#Code-Gen-Options
http://gcc.gnu.org/onlinedocs/gcc-4.5.0/gcc/Link-Options.html#Link-Options

I believe it would be more reliable to build with -fPIC when the code is going into a shared library - irrespective of the platform. What one should ensure though is there is not a mixture of PIC and non-PIC code, as that can be unreliable too. 

I've not had a chance to look at the other issues, but as far as I can see, this update completely breaks a 64-bit build on Solaris or OpenSolaris. 

I've also noticed that Pari reports that *readline* is not working on Solaris systems. Yet the *readline* is definitely working in my Sage builds on Solaris. Several parts of Sage link against readline (Pari, gap, Singular, ECL, Python ...). None of them believe that *readline* is broken, but Pari does. 

Dave



---

archive/issue_comments_079190.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">comment:77</div>\n\nLooking at the error message above:\n\n```\nld.so.1: solaris-ix86-rlv23868: fatal: libgmp.so.10: open failed: No such file or directory\n./Configure[79]: .: line 38: 24072: Killed\n```\n\nand comparing it to the GMP libraries that were installed, the version numbers do not match. Pari is looking for `libgmp.so.10` but I have the following GMP related files:\n\n```\ndrkirkby@hawk:~/sage-4.5/local/lib$ ls -ld libgmp*\n-rwxr-xr-x+  1 drkirkby staff        803 Jul 16 13:10 libgmp.la\nlrwxrwxrwx   1 drkirkby staff         15 Jul 16 13:10 libgmp.so -> libgmp.so.3.4.6\nlrwxrwxrwx   1 drkirkby staff         15 Jul 16 13:10 libgmp.so.3 -> libgmp.so.3.4.6\n-rwxr-xr-x+  1 drkirkby staff     549536 Jul 16 13:10 libgmp.so.3.4.6\n-rwxr-xr-x+  1 drkirkby staff        919 Jul 16 13:10 libgmpxx.la\nlrwxrwxrwx   1 drkirkby staff         17 Jul 16 13:10 libgmpxx.so -> libgmpxx.so.3.1.6\nlrwxrwxrwx   1 drkirkby staff         17 Jul 16 13:10 libgmpxx.so.3 -> libgmpxx.so.3.1.6\n-rwxr-xr-x+  1 drkirkby staff      26712 Jul 16 13:10 libgmpxx.so.3.1.6\n```\n\ni.e. there is nothing like a version 10. The installed libraries have a 3.x in them, but Pari is looking for a .10. \n\nI've installed bison on the system, so the error message about a missing bison is not appearing any more, but that has not resolve either \n* The *readline* issue, which I've had for ages. OR\n* The *gmp* library issue, which is unique to this update, and does not show up in the version in Sage. \n\nDave",
    "created_at": "2010-07-20T02:30:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79190",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:77" align="right">comment:77</div>

Looking at the error message above:

```
ld.so.1: solaris-ix86-rlv23868: fatal: libgmp.so.10: open failed: No such file or directory
./Configure[79]: .: line 38: 24072: Killed
```

and comparing it to the GMP libraries that were installed, the version numbers do not match. Pari is looking for `libgmp.so.10` but I have the following GMP related files:

```
drkirkby@hawk:~/sage-4.5/local/lib$ ls -ld libgmp*
-rwxr-xr-x+  1 drkirkby staff        803 Jul 16 13:10 libgmp.la
lrwxrwxrwx   1 drkirkby staff         15 Jul 16 13:10 libgmp.so -> libgmp.so.3.4.6
lrwxrwxrwx   1 drkirkby staff         15 Jul 16 13:10 libgmp.so.3 -> libgmp.so.3.4.6
-rwxr-xr-x+  1 drkirkby staff     549536 Jul 16 13:10 libgmp.so.3.4.6
-rwxr-xr-x+  1 drkirkby staff        919 Jul 16 13:10 libgmpxx.la
lrwxrwxrwx   1 drkirkby staff         17 Jul 16 13:10 libgmpxx.so -> libgmpxx.so.3.1.6
lrwxrwxrwx   1 drkirkby staff         17 Jul 16 13:10 libgmpxx.so.3 -> libgmpxx.so.3.1.6
-rwxr-xr-x+  1 drkirkby staff      26712 Jul 16 13:10 libgmpxx.so.3.1.6
```

i.e. there is nothing like a version 10. The installed libraries have a 3.x in them, but Pari is looking for a .10. 

I've installed bison on the system, so the error message about a missing bison is not appearing any more, but that has not resolve either 
* The *readline* issue, which I've had for ages. OR
* The *gmp* library issue, which is unique to this update, and does not show up in the version in Sage. 

Dave



---

archive/issue_comments_079191.json:
```json
{
    "body": "<div id=\"comment:78\" align=\"right\">comment:78</div>\n\n> \n> Nice work John!  Please let me know what you're working on, since I also plan to continue working on this ticket.\n\nThanks.  I finished fixing the interfaces/gp and very nearly finished libs/pari/ .  The serious issues are gone now.  I fear that the flood of newly merged tickets for 4.5.2 will require some rebasing, so as soon as I have tidied up I will post the revised patches and a new spkg (p5).  I have not touched anything in number_fields since you did, but it still might be a good idea to wait until I have posted what I have done.",
    "created_at": "2010-07-20T08:28:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79191",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:78" align="right">comment:78</div>

> 
> Nice work John!  Please let me know what you're working on, since I also plan to continue working on this ticket.

Thanks.  I finished fixing the interfaces/gp and very nearly finished libs/pari/ .  The serious issues are gone now.  I fear that the flood of newly merged tickets for 4.5.2 will require some rebasing, so as soon as I have tidied up I will post the revised patches and a new spkg (p5).  I have not touched anything in number_fields since you did, but it still might be a good idea to wait until I have posted what I have done.



---

archive/issue_comments_079192.json:
```json
{
    "body": "<div id=\"comment:79\" align=\"right\">comment:79</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A76):\n> Hi, \n> John or someone else can perhaps convey this to the Pari developers. Would it be possible for them to add the -fPIC option on at least all Solaris systems. (Both SPARC and x86). If code goes into a shared library, it should be compiled position independent. It is unreliable if this is not done. There's some relevant information about this here. \n> \n> http://gcc.gnu.org/onlinedocs/gcc-4.5.0/gcc/Code-Gen-Options.html#Code-Gen-Options\n> http://gcc.gnu.org/onlinedocs/gcc-4.5.0/gcc/Link-Options.html#Link-Options\n> \n> I believe it would be more reliable to build with -fPIC when the code is going into a shared library - irrespective of the platform. What one should ensure though is there is not a mixture of PIC and non-PIC code, as that can be unreliable too. \n> \n> I've not had a chance to look at the other issues, but as far as I can see, this update completely breaks a 64-bit build on Solaris or OpenSolaris. \n> \n> I've also noticed that Pari reports that *readline* is not working on Solaris systems. Yet the *readline* is definitely working in my Sage builds on Solaris. Several parts of Sage link against readline (Pari, gap, Singular, ECL, Python ...). None of them believe that *readline* is broken, but Pari does. \n> \n> Dave \n\n\nI was planning to do this (report upstream).  On the positive side, they just put in a patch which obviates the need for 2/3 of our patch to the header files paripriv/paridecl.h.\n\nI think we will have a better chance of a positive reaction if we could report to pari a failure to build of pari as such and not pari-in-Sage, since they would reasonably reposond that as we patch some files they cannot be responsible.  For this, just copy the src directory of the most recent spkg (or wait until I put up p5 later today) and try it directly, after ./Configure <whatever-params> and make whatever.",
    "created_at": "2010-07-20T08:35:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79192",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:79" align="right">comment:79</div>

Replying to [@sagetrac-drkirkby](#comment%3A76):
> Hi, 
> John or someone else can perhaps convey this to the Pari developers. Would it be possible for them to add the -fPIC option on at least all Solaris systems. (Both SPARC and x86). If code goes into a shared library, it should be compiled position independent. It is unreliable if this is not done. There's some relevant information about this here. 
> 
> http://gcc.gnu.org/onlinedocs/gcc-4.5.0/gcc/Code-Gen-Options.html#Code-Gen-Options
> http://gcc.gnu.org/onlinedocs/gcc-4.5.0/gcc/Link-Options.html#Link-Options
> 
> I believe it would be more reliable to build with -fPIC when the code is going into a shared library - irrespective of the platform. What one should ensure though is there is not a mixture of PIC and non-PIC code, as that can be unreliable too. 
> 
> I've not had a chance to look at the other issues, but as far as I can see, this update completely breaks a 64-bit build on Solaris or OpenSolaris. 
> 
> I've also noticed that Pari reports that *readline* is not working on Solaris systems. Yet the *readline* is definitely working in my Sage builds on Solaris. Several parts of Sage link against readline (Pari, gap, Singular, ECL, Python ...). None of them believe that *readline* is broken, but Pari does. 
> 
> Dave 


I was planning to do this (report upstream).  On the positive side, they just put in a patch which obviates the need for 2/3 of our patch to the header files paripriv/paridecl.h.

I think we will have a better chance of a positive reaction if we could report to pari a failure to build of pari as such and not pari-in-Sage, since they would reasonably reposond that as we patch some files they cannot be responsible.  For this, just copy the src directory of the most recent spkg (or wait until I put up p5 later today) and try it directly, after ./Configure <whatever-params> and make whatever.



---

archive/issue_comments_079193.json:
```json
{
    "body": "<div id=\"comment:80\" align=\"right\">comment:80</div>\n\nAm I the only one seeing problems with lcalc and genus2reduction?",
    "created_at": "2010-07-20T09:18:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79193",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:80" align="right">comment:80</div>

Am I the only one seeing problems with lcalc and genus2reduction?



---

archive/issue_comments_079194.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">comment:81</div>\n\nReplying to [@kiwifb](#comment%3A80):\n> Am I the only one seeing problems with lcalc and genus2reduction?\n\nI don't think you are.  I have been sorting out other things!  I have just finished with the (rather important) sage/libs/pari and sage/intergaces/gp, with everything working except (bizarrely) the hyperbolic tangent function.",
    "created_at": "2010-07-20T09:32:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79194",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:81" align="right">comment:81</div>

Replying to [@kiwifb](#comment%3A80):
> Am I the only one seeing problems with lcalc and genus2reduction?

I don't think you are.  I have been sorting out other things!  I have just finished with the (rather important) sage/libs/pari and sage/intergaces/gp, with everything working except (bizarrely) the hyperbolic tangent function.



---

archive/issue_comments_079195.json:
```json
{
    "body": "<div id=\"comment:82\" align=\"right\">comment:82</div>\n\nReplying to [@JohnCremona](#comment%3A81):\n> Replying to [@kiwifb](#comment%3A80):\n> > Am I the only one seeing problems with lcalc and genus2reduction?\n> \n> \n> I don't think you are.  I have been sorting out other things!  I have just finished with the (rather important) sage/libs/pari and sage/intergaces/gp, with everything working except (bizarrely) the hyperbolic tangent function.\n\nOK. I can attach some fixes for lcalc later, but I am stuck for genus2reduction.",
    "created_at": "2010-07-20T10:00:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79195",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:82" align="right">comment:82</div>

Replying to [@JohnCremona](#comment%3A81):
> Replying to [@kiwifb](#comment%3A80):
> > Am I the only one seeing problems with lcalc and genus2reduction?
> 
> 
> I don't think you are.  I have been sorting out other things!  I have just finished with the (rather important) sage/libs/pari and sage/intergaces/gp, with everything working except (bizarrely) the hyperbolic tangent function.

OK. I can attach some fixes for lcalc later, but I am stuck for genus2reduction.



---

archive/issue_comments_079196.json:
```json
{
    "body": "<div id=\"comment:83\" align=\"right\">comment:83</div>\n\nReplying to [@JohnCremona](#comment%3A79):\n\n> I think we will have a better chance of a positive reaction if we could report to pari a failure to build of pari as such and not pari-in-Sage, since they would reasonably reposond that as we patch some files they cannot be responsible.  For this, just copy the src directory of the most recent spkg (or wait until I put up p5 later today) and try it directly, after ./Configure <whatever-params> and make whatever.\n> \n\nJohn,\n \nI'm going to attach to the ticket a failure observed with the Pari source code directly - outside of Sage. No compiler flags were set. \n\nThe hack of mine in Sage (adding `-fPIC`) resolves this, but it would be better if it could be fixed upstream. The file was actually 5.1 MB in size, as there are over 95,000 error messages. I've reduce the filed to 23 KB, but removing tons of very similar looking messages. See the file:\n\n`Pari-trunk-failure-on-OpenSolaris_x64.log.txt`\n\nThere are similar issues on Solaris 10 SPARC. I can attach a log if needed, or someone can just try to build on 't2' outside of Pari. You will see very similar. \n\nI believe this should be applied on all platforms, as it will be more reliable. The code should be position independent if you are building shared libraries. \n\nDave \n\nDave",
    "created_at": "2010-07-20T10:15:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79196",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:83" align="right">comment:83</div>

Replying to [@JohnCremona](#comment%3A79):

> I think we will have a better chance of a positive reaction if we could report to pari a failure to build of pari as such and not pari-in-Sage, since they would reasonably reposond that as we patch some files they cannot be responsible.  For this, just copy the src directory of the most recent spkg (or wait until I put up p5 later today) and try it directly, after ./Configure <whatever-params> and make whatever.
> 

John,
 
I'm going to attach to the ticket a failure observed with the Pari source code directly - outside of Sage. No compiler flags were set. 

The hack of mine in Sage (adding `-fPIC`) resolves this, but it would be better if it could be fixed upstream. The file was actually 5.1 MB in size, as there are over 95,000 error messages. I've reduce the filed to 23 KB, but removing tons of very similar looking messages. See the file:

`Pari-trunk-failure-on-OpenSolaris_x64.log.txt`

There are similar issues on Solaris 10 SPARC. I can attach a log if needed, or someone can just try to build on 't2' outside of Pari. You will see very similar. 

I believe this should be applied on all platforms, as it will be more reliable. The code should be position independent if you are building shared libraries. 

Dave 

Dave



---

archive/issue_comments_079197.json:
```json
{
    "body": "Failure of Pari source code to build outside of Sage on an OpenSolaris machine",
    "created_at": "2010-07-20T10:22:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79197",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

Failure of Pari source code to build outside of Sage on an OpenSolaris machine



---

archive/issue_comments_079198.json:
```json
{
    "body": "<div id=\"comment:84\" align=\"right\">comment:84</div>\n\nAttachment: **[Pari-trunk-failure-on-OpenSolaris_x64.log.txt](https://github.com/sagemath/sage/files/ticket9343/Pari-trunk-failure-on-OpenSolaris_x64.log.txt)**\n\nReplying to [@sagetrac-drkirkby](#comment%3A83):\n\n> There are similar issues on Solaris 10 SPARC. I can attach a log if needed, or someone can just try to build on 't2' outside of Pari. You will see very similar. \n> \n> I believe this should be applied on all platforms, as it will be more reliable. The code should be position independent if you are building shared libraries. \n> \n> Dave \n\nI mean someone could try this on 't2.math.washington.edu' without using Sage. I'm sure William would set up an account for a Pari developer. They only need the Pari source - no Sage code to reproduce this error. \n\nDave",
    "created_at": "2010-07-20T10:31:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79198",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:84" align="right">comment:84</div>

Attachment: **[Pari-trunk-failure-on-OpenSolaris_x64.log.txt](https://github.com/sagemath/sage/files/ticket9343/Pari-trunk-failure-on-OpenSolaris_x64.log.txt)**

Replying to [@sagetrac-drkirkby](#comment%3A83):

> There are similar issues on Solaris 10 SPARC. I can attach a log if needed, or someone can just try to build on 't2' outside of Pari. You will see very similar. 
> 
> I believe this should be applied on all platforms, as it will be more reliable. The code should be position independent if you are building shared libraries. 
> 
> Dave 

I mean someone could try this on 't2.math.washington.edu' without using Sage. I'm sure William would set up an account for a Pari developer. They only need the Pari source - no Sage code to reproduce this error. 

Dave



---

archive/issue_comments_079199.json:
```json
{
    "body": "<div id=\"comment:85\" align=\"right\">comment:85</div>\n\nI have sent a bug report to the PARI people about Solaris: [http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1078](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1078)",
    "created_at": "2010-07-20T11:05:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79199",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:85" align="right">comment:85</div>

I have sent a bug report to the PARI people about Solaris: [http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1078](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1078)



---

archive/issue_comments_079200.json:
```json
{
    "body": "<div id=\"comment:86\" align=\"right\">comment:86</div>\n\nReplying to [@kiwifb](#comment%3A82):\n> Replying to [@JohnCremona](#comment%3A81):\n> > Replying to [@kiwifb](#comment%3A80):\n> > > Am I the only one seeing problems with lcalc and genus2reduction?\n> > \n> > \n> > I don't think you are.  I have been sorting out other things!  I have just finished with the (rather important) sage/libs/pari and sage/intergaces/gp, with everything working except (bizarrely) the hyperbolic tangent function.\n> \n> \n> OK. I can attach some fixes for lcalc later, but I am stuck for genus2reduction.\n\nIn my current setup, sage/interfaces/genus2reduction passes, as does sage/lfunctions/lcalc. \n\nI did not need to make any changes to lcalc!",
    "created_at": "2010-07-20T11:20:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79200",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:86" align="right">comment:86</div>

Replying to [@kiwifb](#comment%3A82):
> Replying to [@JohnCremona](#comment%3A81):
> > Replying to [@kiwifb](#comment%3A80):
> > > Am I the only one seeing problems with lcalc and genus2reduction?
> > 
> > 
> > I don't think you are.  I have been sorting out other things!  I have just finished with the (rather important) sage/libs/pari and sage/intergaces/gp, with everything working except (bizarrely) the hyperbolic tangent function.
> 
> 
> OK. I can attach some fixes for lcalc later, but I am stuck for genus2reduction.

In my current setup, sage/interfaces/genus2reduction passes, as does sage/lfunctions/lcalc. 

I did not need to make any changes to lcalc!



---

archive/issue_comments_079201.json:
```json
{
    "body": "<div id=\"comment:87\" align=\"right\">comment:87</div>\n\nI am not talking about any tests. I didn't check that.\nI was talking about building them.\nAnd from what I am just digging, the failure for genus2reduction\nis not just my set up.",
    "created_at": "2010-07-20T11:29:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79201",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:87" align="right">comment:87</div>

I am not talking about any tests. I didn't check that.
I was talking about building them.
And from what I am just digging, the failure for genus2reduction
is not just my set up.



---

archive/issue_comments_079202.json:
```json
{
    "body": "<div id=\"comment:88\" align=\"right\">comment:88</div>\n\nReplying to [@kiwifb](#comment%3A87):\n> I am not talking about any tests. I didn't check that.\n> I was talking about building them.\n> And from what I am just digging, the failure for genus2reduction\n> is not just my set up.\n\nOK, I misunderstood.  I am working on sage-4.5 + the p4 spkg + all patches on this ticket (to both sage lib and extcode) + what I have done since then.  While you are working on building spkgs which use pari, right? That's an entirely different set of problems to solve.  Have you tried asking the authors of those spkgs (or rather, of the packages themselves) to help out?",
    "created_at": "2010-07-20T11:41:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79202",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:88" align="right">comment:88</div>

Replying to [@kiwifb](#comment%3A87):
> I am not talking about any tests. I didn't check that.
> I was talking about building them.
> And from what I am just digging, the failure for genus2reduction
> is not just my set up.

OK, I misunderstood.  I am working on sage-4.5 + the p4 spkg + all patches on this ticket (to both sage lib and extcode) + what I have done since then.  While you are working on building spkgs which use pari, right? That's an entirely different set of problems to solve.  Have you tried asking the authors of those spkgs (or rather, of the packages themselves) to help out?



---

archive/issue_comments_079203.json:
```json
{
    "body": "<div id=\"comment:89\" align=\"right\">comment:89</div>\n\nReplying to [@JohnCremona](#comment%3A88):\n> Replying to [@kiwifb](#comment%3A87):\n> > I am not talking about any tests. I didn't check that.\n> > I was talking about building them.\n> > And from what I am just digging, the failure for genus2reduction\n> > is not just my set up.\n> \n> \n> OK, I misunderstood.  I am working on sage-4.5 + the p4 spkg + all patches on this ticket (to both sage lib and extcode) + what I have done since then.  While you are working on building spkgs which use pari, right? That's an entirely different set of problems to solve.  Have you tried asking the authors of those spkgs (or rather, of the packages themselves) to help out?\n\nNot yet. I think William is upstream for genus2reduction. \n\n\nI thought it should be attached to that ticket. I haven't seen any other\nticket about converting those spkg to pari-2.4.\n\n\nyou are probably right that they should have separate ticket but they should\nblock this one then. No use upgrading pari if it breaks other spkgs.\n\n\neclib builds fine. OK now I should go what was Dave acronym,\nMWWKM (my wife will kill me or something :) ).",
    "created_at": "2010-07-20T11:50:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79203",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:89" align="right">comment:89</div>

Replying to [@JohnCremona](#comment%3A88):
> Replying to [@kiwifb](#comment%3A87):
> > I am not talking about any tests. I didn't check that.
> > I was talking about building them.
> > And from what I am just digging, the failure for genus2reduction
> > is not just my set up.
> 
> 
> OK, I misunderstood.  I am working on sage-4.5 + the p4 spkg + all patches on this ticket (to both sage lib and extcode) + what I have done since then.  While you are working on building spkgs which use pari, right? That's an entirely different set of problems to solve.  Have you tried asking the authors of those spkgs (or rather, of the packages themselves) to help out?

Not yet. I think William is upstream for genus2reduction. 


I thought it should be attached to that ticket. I haven't seen any other
ticket about converting those spkg to pari-2.4.


you are probably right that they should have separate ticket but they should
block this one then. No use upgrading pari if it breaks other spkgs.


eclib builds fine. OK now I should go what was Dave acronym,
MWWKM (my wife will kill me or something :) ).



---

archive/issue_comments_079204.json:
```json
{
    "body": "<div id=\"comment:90\" align=\"right\">comment:90</div>\n\nThis trac is finding a continuous stream of PARI bugs.  Another one: [http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1079](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1079)",
    "created_at": "2010-07-20T13:07:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79204",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:90" align="right">comment:90</div>

This trac is finding a continuous stream of PARI bugs.  Another one: [http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1079](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1079)



---

archive/issue_comments_079205.json:
```json
{
    "body": "<div id=\"comment:91\" align=\"right\">comment:91</div>\n\nReplying to [@kiwifb](#comment%3A89):\n> Replying to [@JohnCremona](#comment%3A88):\n> > Replying to [@kiwifb](#comment%3A87):\n> > > I am not talking about any tests. I didn't check that.\n> > > I was talking about building them.\n> > > And from what I am just digging, the failure for genus2reduction\n> > > is not just my set up.\n> > \n> > \n> > OK, I misunderstood.  I am working on sage-4.5 + the p4 spkg + all patches on this ticket (to both sage lib and extcode) + what I have done since then.  While you are working on building spkgs which use pari, right? That's an entirely different set of problems to solve.  Have you tried asking the authors of those spkgs (or rather, of the packages themselves) to help out?\n> \n> \n> Not yet. I think William is upstream for genus2reduction. \n\n\nGood.\n\n> \n> I thought it should be attached to that ticket. I haven't seen any other\n> ticket about converting those spkg to pari-2.4.\n\n> \n> you are probably right that they should have separate ticket but they should\n> block this one then. No use upgrading pari if it breaks other spkgs.\n\n> \n\nI agree -- if other spkgs need their source fixing they should on other tickets, one each, and we should have a list here.\n\n> eclib builds fine.\n\nOf course it does!\n\n OK now I should go what was Dave acronym,\n> MWWKM (my wife will kill me or something :) ).",
    "created_at": "2010-07-20T13:36:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79205",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:91" align="right">comment:91</div>

Replying to [@kiwifb](#comment%3A89):
> Replying to [@JohnCremona](#comment%3A88):
> > Replying to [@kiwifb](#comment%3A87):
> > > I am not talking about any tests. I didn't check that.
> > > I was talking about building them.
> > > And from what I am just digging, the failure for genus2reduction
> > > is not just my set up.
> > 
> > 
> > OK, I misunderstood.  I am working on sage-4.5 + the p4 spkg + all patches on this ticket (to both sage lib and extcode) + what I have done since then.  While you are working on building spkgs which use pari, right? That's an entirely different set of problems to solve.  Have you tried asking the authors of those spkgs (or rather, of the packages themselves) to help out?
> 
> 
> Not yet. I think William is upstream for genus2reduction. 


Good.

> 
> I thought it should be attached to that ticket. I haven't seen any other
> ticket about converting those spkg to pari-2.4.

> 
> you are probably right that they should have separate ticket but they should
> block this one then. No use upgrading pari if it breaks other spkgs.

> 

I agree -- if other spkgs need their source fixing they should on other tickets, one each, and we should have a list here.

> eclib builds fine.

Of course it does!

 OK now I should go what was Dave acronym,
> MWWKM (my wife will kill me or something :) ).



---

archive/issue_comments_079206.json:
```json
{
    "body": "<div id=\"comment:92\" align=\"right\">comment:92</div>\n\nReplying to [@jdemeyer](#comment%3A90):\n> This trac is finding a continuous stream of PARI bugs.  Another one: [http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1079](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1079)\n\nGood work!  I am down to 10 files (only!) in sage library with failing doctests, including 7 in rings.number_fields which I am leaving to you.  I will try to fix the other three before quitting for a bit (after uploading a patch of course -- currently 1768 lines since the ones posted here, and counting).",
    "created_at": "2010-07-20T13:38:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79206",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:92" align="right">comment:92</div>

Replying to [@jdemeyer](#comment%3A90):
> This trac is finding a continuous stream of PARI bugs.  Another one: [http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1079](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1079)

Good work!  I am down to 10 files (only!) in sage library with failing doctests, including 7 in rings.number_fields which I am leaving to you.  I will try to fix the other three before quitting for a bit (after uploading a patch of course -- currently 1768 lines since the ones posted here, and counting).



---

archive/issue_comments_079207.json:
```json
{
    "body": "Attachment: **[sagelib_9343-combined-new.patch.gz](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343-combined-new.patch.gz)**\n\nApply to 4.5: replaces ALL previous sagelib patches",
    "created_at": "2010-07-20T14:44:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79207",
    "user": "https://github.com/JohnCremona"
}
```

Attachment: **[sagelib_9343-combined-new.patch.gz](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343-combined-new.patch.gz)**

Apply to 4.5: replaces ALL previous sagelib patches



---

archive/issue_comments_079208.json:
```json
{
    "body": "<div id=\"comment:93\" align=\"right\">comment:93</div>\n\nsagelib_9343-combined-new.patch replaces all previous sagelib patches.  With this and the *two* extcode patches (extcode_9343.patch and 9343_extcode_dokchitser-1.patch) I get only the following doctest failures:\n\n6 in number_fields:\n\n```\n\tsage -t  devel/sage-main/sage/rings/number_field/maps.py # 34 doctests failed\n\tsage -t  devel/sage-main/sage/rings/number_field/number_field_ideal_rel.py # 17 doctests failed\n\tsage -t  devel/sage-main/sage/rings/number_field/number_field_ideal.py # 17 doctests failed\n\tsage -t  devel/sage-main/sage/rings/number_field/number_field_rel.py # 20 doctests failed\n\tsage -t  devel/sage-main/sage/rings/number_field/number_field_element.pyx # 2 doctests failed\n\tsage -t  devel/sage-main/sage/rings/number_field/number_field.py # 47 doctests failed\n```\nwhich I think Jeroen is looking after, and  1 in elliptic_curves (rlm informed and passed buck to was):\n\n```\n\tsage -t  devel/sage-main/sage/schemes/elliptic_curves/heegner.py # 6 doctests failed\n```\nThere is also a failing doctest for tanh in libs/pari/gen.pyx which I disabled temporarily.  And there may be some doctests needing different 32-bit output;  but I have done enough for now.\n\nIndependently of this I have upgraded the spkg to the latest svn,  made the relavant changes to the patches in it, and added a spkg-test (with help from David Kirkby).  I will put up a link to that when I have succeeded in spkg-ing it.",
    "created_at": "2010-07-20T14:49:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79208",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:93" align="right">comment:93</div>

sagelib_9343-combined-new.patch replaces all previous sagelib patches.  With this and the *two* extcode patches (extcode_9343.patch and 9343_extcode_dokchitser-1.patch) I get only the following doctest failures:

6 in number_fields:

```
	sage -t  devel/sage-main/sage/rings/number_field/maps.py # 34 doctests failed
	sage -t  devel/sage-main/sage/rings/number_field/number_field_ideal_rel.py # 17 doctests failed
	sage -t  devel/sage-main/sage/rings/number_field/number_field_ideal.py # 17 doctests failed
	sage -t  devel/sage-main/sage/rings/number_field/number_field_rel.py # 20 doctests failed
	sage -t  devel/sage-main/sage/rings/number_field/number_field_element.pyx # 2 doctests failed
	sage -t  devel/sage-main/sage/rings/number_field/number_field.py # 47 doctests failed
```
which I think Jeroen is looking after, and  1 in elliptic_curves (rlm informed and passed buck to was):

```
	sage -t  devel/sage-main/sage/schemes/elliptic_curves/heegner.py # 6 doctests failed
```
There is also a failing doctest for tanh in libs/pari/gen.pyx which I disabled temporarily.  And there may be some doctests needing different 32-bit output;  but I have done enough for now.

Independently of this I have upgraded the spkg to the latest svn,  made the relavant changes to the patches in it, and added a spkg-test (with help from David Kirkby).  I will put up a link to that when I have succeeded in spkg-ing it.



---

archive/issue_comments_079209.json:
```json
{
    "body": "<div id=\"comment:94\" align=\"right\">comment:94</div>\n\nAmazing discovery -- the script spkg-install is VERY broken, even the one currently distributed with sage 4.5!\n\nThere are several lines like \n\n```\n# pjeremy: fix for FreeBSD: #7825\ncp \"$TOP\"/patches/get_kernel config/\n```\nwhich should say\n\n```\n# pjeremy: fix for FreeBSD: #7825\ncp \"$TOP\"/patches/get_kernel src/config/\n```\n(note the missing \"src\").\n\nIf I am right, how come anything works?  I mean, if these patches are supposedly essential, but are in effect not being applied, maybe they are not so essential after all?\n\nI can change these to be \"correct\";  but am more tempted to delete them and see what happens...thoughts?",
    "created_at": "2010-07-20T16:04:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79209",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:94" align="right">comment:94</div>

Amazing discovery -- the script spkg-install is VERY broken, even the one currently distributed with sage 4.5!

There are several lines like 

```
# pjeremy: fix for FreeBSD: #7825
cp "$TOP"/patches/get_kernel config/
```
which should say

```
# pjeremy: fix for FreeBSD: #7825
cp "$TOP"/patches/get_kernel src/config/
```
(note the missing "src").

If I am right, how come anything works?  I mean, if these patches are supposedly essential, but are in effect not being applied, maybe they are not so essential after all?

I can change these to be "correct";  but am more tempted to delete them and see what happens...thoughts?



---

archive/issue_comments_079210.json:
```json
{
    "body": "<div id=\"comment:95\" align=\"right\">comment:95</div>\n\nThere is a new version of the spkg here: http://www.warwick.ac.uk/staff/J.E.Cremona/pari-2.4.3.svn.p5.spkg\n\nIt includes the spkg-check which now works (i.e. it runs iff SAGE_CHECK is 'yes', and the tests pass.  On my machine at least).",
    "created_at": "2010-07-20T16:45:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79210",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:95" align="right">comment:95</div>

There is a new version of the spkg here: http://www.warwick.ac.uk/staff/J.E.Cremona/pari-2.4.3.svn.p5.spkg

It includes the spkg-check which now works (i.e. it runs iff SAGE_CHECK is 'yes', and the tests pass.  On my machine at least).



---

archive/issue_comments_079211.json:
```json
{
    "body": "<div id=\"comment:96\" align=\"right\">comment:96</div>\n\nI get the following error in Cygwin:\n\n```\n\ngcc  -c -O3 -Wall -fno-strict-aliasing -fomit-frame-pointer    -I. -I../src/headers  -o trans3.o ../src/basemath/trans3.c\nbison -d ../src/language/parse.y -o ../src/language/parse.c\nmake[1]: bison: Command not found\nmake[1]: *** [../src/language/parse.h] Error 127\nmake[1]: Leaving directory `/home/mhansen/sage-4.3.5/spkg/build/pari-2.4.3.svn.p5/src/Ocygwin-i686'\nmake: *** [gp] Error 2\n```\n\nI don't believe that we require bison to be installed.",
    "created_at": "2010-07-20T17:16:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79211",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:96" align="right">comment:96</div>

I get the following error in Cygwin:

```

gcc  -c -O3 -Wall -fno-strict-aliasing -fomit-frame-pointer    -I. -I../src/headers  -o trans3.o ../src/basemath/trans3.c
bison -d ../src/language/parse.y -o ../src/language/parse.c
make[1]: bison: Command not found
make[1]: *** [../src/language/parse.h] Error 127
make[1]: Leaving directory `/home/mhansen/sage-4.3.5/spkg/build/pari-2.4.3.svn.p5/src/Ocygwin-i686'
make: *** [gp] Error 2
```

I don't believe that we require bison to be installed.



---

archive/issue_comments_079212.json:
```json
{
    "body": "<div id=\"comment:97\" align=\"right\">comment:97</div>\n\nReplying to [@JohnCremona](#comment%3A94):\n> Amazing discovery -- the script spkg-install is VERY broken, even the one currently distributed with sage 4.5!\n> \n> There are several lines like \n> \n> ```\n> # pjeremy: fix for FreeBSD: #7825\n> cp \"$TOP\"/patches/get_kernel config/\n> ```\n> which should say\n> \n> ```\n> # pjeremy: fix for FreeBSD: #7825\n> cp \"$TOP\"/patches/get_kernel src/config/\n> ```\n> (note the missing \"src\").\n> \n> If I am right, how come anything works?  I mean, if these patches are supposedly essential, but are in effect not being applied, maybe they are not so essential after all?\n> \n> I can change these to be \"correct\";  but am more tempted to delete them and see what happens...thoughts?\n\nI think you are mistaken John. Further up the script is \n\n```\ncd src\n```\n\nso another `src` would be an error. \n\nI do sometimes think it is better to perhaps consider deleting all patches. I have just updated 'GSL' (#9533). GSL is a much simpler package I admit. I removed all patches. The new GSL package has built and passed all self-tests on Cygwin, Linux, HP-UX, OpenSolaris, OS X and Solaris. (Sage does not build fully on HP-UX, but enough of it builds to prove that GSL passes all tests). \n\nI hope at some point you are going to test on 't2'. I simply do not have the time to test everyones updates on 't2'. \n\nDave",
    "created_at": "2010-07-20T17:27:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79212",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:97" align="right">comment:97</div>

Replying to [@JohnCremona](#comment%3A94):
> Amazing discovery -- the script spkg-install is VERY broken, even the one currently distributed with sage 4.5!
> 
> There are several lines like 
> 
> ```
> # pjeremy: fix for FreeBSD: #7825
> cp "$TOP"/patches/get_kernel config/
> ```
> which should say
> 
> ```
> # pjeremy: fix for FreeBSD: #7825
> cp "$TOP"/patches/get_kernel src/config/
> ```
> (note the missing "src").
> 
> If I am right, how come anything works?  I mean, if these patches are supposedly essential, but are in effect not being applied, maybe they are not so essential after all?
> 
> I can change these to be "correct";  but am more tempted to delete them and see what happens...thoughts?

I think you are mistaken John. Further up the script is 

```
cd src
```

so another `src` would be an error. 

I do sometimes think it is better to perhaps consider deleting all patches. I have just updated 'GSL' (#9533). GSL is a much simpler package I admit. I removed all patches. The new GSL package has built and passed all self-tests on Cygwin, Linux, HP-UX, OpenSolaris, OS X and Solaris. (Sage does not build fully on HP-UX, but enough of it builds to prove that GSL passes all tests). 

I hope at some point you are going to test on 't2'. I simply do not have the time to test everyones updates on 't2'. 

Dave



---

archive/issue_comments_079213.json:
```json
{
    "body": "<div id=\"comment:98\" align=\"right\">comment:98</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A97):\n>\n> I think you are mistaken John. Further up the script is \n> \n>\n> ```\n> cd src\n> ```\n> \n> so another `src` would be an error. \n> \n\nYou are right -- I cross-poseted to sage-devel where this was pointed out to me.\n\n> I do sometimes think it is better to perhaps consider deleting all patches. I have just updated 'GSL' (#9533). GSL is a much simpler package I admit. I removed all patches. The new GSL package has built and passed all self-tests on Cygwin, Linux, HP-UX, OpenSolaris, OS X and Solaris. (Sage does not build fully on HP-UX, but enough of it builds to prove that GSL passes all tests). \n> \n> I hope at some point you are going to test on 't2'. I simply do not have the time to test everyones updates on 't2'. \n> \n\nWell I hope someone is, but I'm busy with other things for the next 2 days and then away for 3 weeks without opportunity to do Sage stuff.\n\n> Dave",
    "created_at": "2010-07-20T17:37:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79213",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:98" align="right">comment:98</div>

Replying to [@sagetrac-drkirkby](#comment%3A97):
>
> I think you are mistaken John. Further up the script is 
> 
>
> ```
> cd src
> ```
> 
> so another `src` would be an error. 
> 

You are right -- I cross-poseted to sage-devel where this was pointed out to me.

> I do sometimes think it is better to perhaps consider deleting all patches. I have just updated 'GSL' (#9533). GSL is a much simpler package I admit. I removed all patches. The new GSL package has built and passed all self-tests on Cygwin, Linux, HP-UX, OpenSolaris, OS X and Solaris. (Sage does not build fully on HP-UX, but enough of it builds to prove that GSL passes all tests). 
> 
> I hope at some point you are going to test on 't2'. I simply do not have the time to test everyones updates on 't2'. 
> 

Well I hope someone is, but I'm busy with other things for the next 2 days and then away for 3 weeks without opportunity to do Sage stuff.

> Dave



---

archive/issue_comments_079214.json:
```json
{
    "body": "Attachment: **[9343_number_field_part2.patch.gz](https://github.com/sagemath/sage/files/ticket9343/9343_number_field_part2.patch.gz)**\n\nSome fixes in sage/rings/number_fields and doctest changes in sage/rings/polynomial/polynomial_element.pyx",
    "created_at": "2010-07-21T00:34:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79214",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[9343_number_field_part2.patch.gz](https://github.com/sagemath/sage/files/ticket9343/9343_number_field_part2.patch.gz)**

Some fixes in sage/rings/number_fields and doctest changes in sage/rings/polynomial/polynomial_element.pyx



---

archive/issue_comments_079215.json:
```json
{
    "body": "<div id=\"comment:99\" align=\"right\">comment:99</div>\n\nI did a complete from scratch build of sage-4.5.1 with the new patches and did a long doctest.  I got some more errors than John:\n\n```\n        sage -t -long devel/sage-test/sage/schemes/elliptic_curves/heegner.py # 7 doctests failed\n        sage -t -long devel/sage-test/sage/rings/number_field/number_field.py # 18 doctests failed\n        sage -t -long devel/sage-test/sage/schemes/elliptic_curves/ell_point.py # 2 doctests failed\n        sage -t -long devel/sage-test/sage/schemes/elliptic_curves/ell_generic.py # 1 doctests failed\n        sage -t -long devel/sage-test/sage/rings/number_field/number_field_rel.py # 3 doctests failed\n        sage -t -long devel/sage-test/sage/rings/number_field/number_field_element.pyx # 2 doctests failed\n        sage -t -long devel/sage-test/sage/rings/number_field/number_field_ideal.py # 17 doctests failed\n        sage -t -long devel/sage-test/sage/rings/number_field/number_field_ideal_rel.py # 3 doctests failed\n        sage -t -long devel/sage-test/doc/en/constructions/algebraic_geometry.rst # 2 doctests failed\n        sage -t -long devel/sage-test/sage/interfaces/gp.py # 2 doctests failed\n        sage -t -long devel/sage-test/sage/schemes/elliptic_curves/ell_rational_field.py # 1 doctests failed\n```\n\nSome are probably because John did not do \"long\" doctests, but also in some cases I get PariError: not enough memory.  For example:\n\n```\nFile \"/usr/local/src/sage-newpari-4.5.1/devel/sage-test/sage/schemes/elliptic_curves/ell_generic.py\", line 2646:\n    sage: [t[1] for t in EllipticCurve(GF(10^60+3201),[0,a,0,b,0])._p_primary_torsion_basis(2)]\nException raised:\n[...]\n    PariError: not enough memory (28)\n```\n\nI will have a look at these errors and see what I can fix.",
    "created_at": "2010-07-21T13:00:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79215",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:99" align="right">comment:99</div>

I did a complete from scratch build of sage-4.5.1 with the new patches and did a long doctest.  I got some more errors than John:

```
        sage -t -long devel/sage-test/sage/schemes/elliptic_curves/heegner.py # 7 doctests failed
        sage -t -long devel/sage-test/sage/rings/number_field/number_field.py # 18 doctests failed
        sage -t -long devel/sage-test/sage/schemes/elliptic_curves/ell_point.py # 2 doctests failed
        sage -t -long devel/sage-test/sage/schemes/elliptic_curves/ell_generic.py # 1 doctests failed
        sage -t -long devel/sage-test/sage/rings/number_field/number_field_rel.py # 3 doctests failed
        sage -t -long devel/sage-test/sage/rings/number_field/number_field_element.pyx # 2 doctests failed
        sage -t -long devel/sage-test/sage/rings/number_field/number_field_ideal.py # 17 doctests failed
        sage -t -long devel/sage-test/sage/rings/number_field/number_field_ideal_rel.py # 3 doctests failed
        sage -t -long devel/sage-test/doc/en/constructions/algebraic_geometry.rst # 2 doctests failed
        sage -t -long devel/sage-test/sage/interfaces/gp.py # 2 doctests failed
        sage -t -long devel/sage-test/sage/schemes/elliptic_curves/ell_rational_field.py # 1 doctests failed
```

Some are probably because John did not do "long" doctests, but also in some cases I get PariError: not enough memory.  For example:

```
File "/usr/local/src/sage-newpari-4.5.1/devel/sage-test/sage/schemes/elliptic_curves/ell_generic.py", line 2646:
    sage: [t[1] for t in EllipticCurve(GF(10^60+3201),[0,a,0,b,0])._p_primary_torsion_basis(2)]
Exception raised:
[...]
    PariError: not enough memory (28)
```

I will have a look at these errors and see what I can fix.



---

archive/issue_comments_079216.json:
```json
{
    "body": "Fixes all doctests in sage/rings/number_fields (except for PARI bug 1079)",
    "created_at": "2010-07-21T15:15:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79216",
    "user": "https://github.com/jdemeyer"
}
```

Fixes all doctests in sage/rings/number_fields (except for PARI bug 1079)



---

archive/issue_comments_079217.json:
```json
{
    "body": "<div id=\"comment:100\" align=\"right\">comment:100</div>\n\nAttachment: **[9343_number_field_part3.patch.gz](https://github.com/sagemath/sage/files/ticket9343/9343_number_field_part3.patch.gz)**\n\nAll doctests are now fixed, except for some which hit [PARI bug 1079](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1079) and some in sage/schemes/elliptic_curves.  Apparently, the PARI update increased the memory requirements of some of the doctests, making them fail on my machine with 3GB RAM.  However, these doctests already take a lot of memory with the vanilla sage 4.5.1, see also [my post at sage-devel](http://groups.google.com/group/sage-devel/browse_thread/thread/4d4b9a8203b13f22).",
    "created_at": "2010-07-21T15:21:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79217",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:100" align="right">comment:100</div>

Attachment: **[9343_number_field_part3.patch.gz](https://github.com/sagemath/sage/files/ticket9343/9343_number_field_part3.patch.gz)**

All doctests are now fixed, except for some which hit [PARI bug 1079](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1079) and some in sage/schemes/elliptic_curves.  Apparently, the PARI update increased the memory requirements of some of the doctests, making them fail on my machine with 3GB RAM.  However, these doctests already take a lot of memory with the vanilla sage 4.5.1, see also [my post at sage-devel](http://groups.google.com/group/sage-devel/browse_thread/thread/4d4b9a8203b13f22).



---

archive/issue_comments_079218.json:
```json
{
    "body": "Author: **Robert Bradshaw, John Cremona, Jeroen Demeyer, William Stein**",
    "created_at": "2010-07-21T15:39:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79218",
    "user": "https://github.com/jdemeyer"
}
```

Author: **Robert Bradshaw, John Cremona, Jeroen Demeyer, William Stein**



---

archive/issue_comments_079219.json:
```json
{
    "body": "<div id=\"comment:102\" align=\"right\">comment:102</div>\n\nFor more on the bison issue see the pari-dev thread here: http://pari.math.u-bordeaux.fr/archives/pari-dev-1007/msg00011.html\n\nIt seems that we should not use an svn source grad in our distribution but a \"proper PARI tarball\".  An explanation of how to create such a thing is I hope forthcoming on that thread.\n\nSecondly, the thread http://pari.math.u-bordeaux.fr/archives/pari-dev-1007/msg00015.html makes some releavnt comments (and asks a question) on Dave's other points.",
    "created_at": "2010-07-21T15:54:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79219",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:102" align="right">comment:102</div>

For more on the bison issue see the pari-dev thread here: http://pari.math.u-bordeaux.fr/archives/pari-dev-1007/msg00011.html

It seems that we should not use an svn source grad in our distribution but a "proper PARI tarball".  An explanation of how to create such a thing is I hope forthcoming on that thread.

Secondly, the thread http://pari.math.u-bordeaux.fr/archives/pari-dev-1007/msg00015.html makes some releavnt comments (and asks a question) on Dave's other points.



---

archive/issue_comments_079220.json:
```json
{
    "body": "<div id=\"comment:103\" align=\"right\">comment:103</div>\n\nReplying to [@JohnCremona](#comment%3A102):\n> For more on the bison issue see the pari-dev thread here: http://pari.math.u-bordeaux.fr/archives/pari-dev-1007/msg00011.html\n> \n> It seems that we should not use an svn source grad in our distribution but a \"proper PARI tarball\".  An explanation of how to create such a thing is I hope forthcoming on that thread.\n> \n> Secondly, the thread http://pari.math.u-bordeaux.fr/archives/pari-dev-1007/msg00015.html makes some releavnt comments (and asks a question) on Dave's other points.\n\nBison, like autoconf and automake should not be necessary for end-users. Often developer additions don't have a 'configure' script - they rely on other developers making that from configure.ac. It is the same with bison - some files only need to be geneated and passed to the end users. As long as the timestamp on the files generated by bison is more recent than the files they were generated from, bison should not be necessary. \n\nWith regard to my own Solaris issue with -fPCI, shared libraries and Pari, I'm not sure how to observe what is happening, or where I can follow the Pari bug numbers referenced. Essentially one of the Pari developers disagreed with me, and said it is not necessary to use -fPIC when compiling 32-bit shared libraries on Solaris - only 64-bit ones. I responded that this is not so, and provided a link to something written by Casper Dik (a very knowledge Sun employee), that -fPIC is necessary. I gather that was passed on, but I don't see any record of it. \n\nThere's also the point I made that Pari is looking for a different version of GMP to what is in Sage when building a 64-bit version of Pari. The Pari developer believes it is finding another version before that one in Sage. **IF** that is so, that needs fixing in Sage. Somehow we need to ensure Pari first looks for the libraries in $SAGE_LOCAL/lib, and not in /usr/lib, /usr/local, or wherever else Pari may chose to look. The whole point of shipping a bunch of standard libraries with Sage is we know what ones are are used by Sage. \n\nDave",
    "created_at": "2010-07-21T16:31:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79220",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:103" align="right">comment:103</div>

Replying to [@JohnCremona](#comment%3A102):
> For more on the bison issue see the pari-dev thread here: http://pari.math.u-bordeaux.fr/archives/pari-dev-1007/msg00011.html
> 
> It seems that we should not use an svn source grad in our distribution but a "proper PARI tarball".  An explanation of how to create such a thing is I hope forthcoming on that thread.
> 
> Secondly, the thread http://pari.math.u-bordeaux.fr/archives/pari-dev-1007/msg00015.html makes some releavnt comments (and asks a question) on Dave's other points.

Bison, like autoconf and automake should not be necessary for end-users. Often developer additions don't have a 'configure' script - they rely on other developers making that from configure.ac. It is the same with bison - some files only need to be geneated and passed to the end users. As long as the timestamp on the files generated by bison is more recent than the files they were generated from, bison should not be necessary. 

With regard to my own Solaris issue with -fPCI, shared libraries and Pari, I'm not sure how to observe what is happening, or where I can follow the Pari bug numbers referenced. Essentially one of the Pari developers disagreed with me, and said it is not necessary to use -fPIC when compiling 32-bit shared libraries on Solaris - only 64-bit ones. I responded that this is not so, and provided a link to something written by Casper Dik (a very knowledge Sun employee), that -fPIC is necessary. I gather that was passed on, but I don't see any record of it. 

There's also the point I made that Pari is looking for a different version of GMP to what is in Sage when building a 64-bit version of Pari. The Pari developer believes it is finding another version before that one in Sage. **IF** that is so, that needs fixing in Sage. Somehow we need to ensure Pari first looks for the libraries in $SAGE_LOCAL/lib, and not in /usr/lib, /usr/local, or wherever else Pari may chose to look. The whole point of shipping a bunch of standard libraries with Sage is we know what ones are are used by Sage. 

Dave



---

archive/issue_comments_079221.json:
```json
{
    "body": "<div id=\"comment:104\" align=\"right\">comment:104</div>\n\nNote that there are two relevant threads since I posted to pari-dev (a mailing list linked to a couple of comments above this) but Jeroen posted directly to the PARI bug tracking system.  I suggested on pari-dev that the discussion should take place on the tracking system.",
    "created_at": "2010-07-21T17:01:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79221",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:104" align="right">comment:104</div>

Note that there are two relevant threads since I posted to pari-dev (a mailing list linked to a couple of comments above this) but Jeroen posted directly to the PARI bug tracking system.  I suggested on pari-dev that the discussion should take place on the tracking system.



---

archive/issue_comments_079222.json:
```json
{
    "body": "<div id=\"comment:105\" align=\"right\">comment:105</div>\n\nI have made a new version of the spkg:\n[http://cage.ugent.be/~jdemeyer/pari-2.4.3.svn.p6.spkg](http://cage.ugent.be/~jdemeyer/pari-2.4.3.svn.p6.spkg)\n\nIt contains a patch for PARI bug 1079, fixing all doctest failures in sage/rings/number_fields.\n\nI also added a script \"spkg-make\" which automates the process of building the spkg (it downloads the svn sources and so on).  It *should* also fix the bison issue.  This spkg-make is highly experimental, but it works for me.  By all means, go ahead and tell me what you think of it.",
    "created_at": "2010-07-22T16:57:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79222",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:105" align="right">comment:105</div>

I have made a new version of the spkg:
[http://cage.ugent.be/~jdemeyer/pari-2.4.3.svn.p6.spkg](http://cage.ugent.be/~jdemeyer/pari-2.4.3.svn.p6.spkg)

It contains a patch for PARI bug 1079, fixing all doctest failures in sage/rings/number_fields.

I also added a script "spkg-make" which automates the process of building the spkg (it downloads the svn sources and so on).  It *should* also fix the bison issue.  This spkg-make is highly experimental, but it works for me.  By all means, go ahead and tell me what you think of it.



---

archive/issue_comments_079223.json:
```json
{
    "body": "<div id=\"comment:106\" align=\"right\">comment:106</div>\n\nReplying to [@jdemeyer](#comment%3A105):\n> I have made a new version of the spkg:\n> [http://cage.ugent.be/~jdemeyer/pari-2.4.3.svn.p6.spkg](http://cage.ugent.be/~jdemeyer/pari-2.4.3.svn.p6.spkg)\n> \n> It contains a patch for PARI bug 1079, fixing all doctest failures in sage/rings/number_fields.\n> \n> I also added a script \"spkg-make\" which automates the process of building the spkg (it downloads the svn sources and so on).  It *should* also fix the bison issue.  This spkg-make is highly experimental, but it works for me.  By all means, go ahead and tell me what you think of it.\n\nI'll try it if I get a chance over the next couple of days.\n\nAs I see it there are now two main issues:\n\n1. Make sure that the other spkgs which use the pari library still work.  I think someone said that genus2reduction and lcalc have problems.\n2. Rebase to 4.5.2.",
    "created_at": "2010-07-22T17:39:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79223",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:106" align="right">comment:106</div>

Replying to [@jdemeyer](#comment%3A105):
> I have made a new version of the spkg:
> [http://cage.ugent.be/~jdemeyer/pari-2.4.3.svn.p6.spkg](http://cage.ugent.be/~jdemeyer/pari-2.4.3.svn.p6.spkg)
> 
> It contains a patch for PARI bug 1079, fixing all doctest failures in sage/rings/number_fields.
> 
> I also added a script "spkg-make" which automates the process of building the spkg (it downloads the svn sources and so on).  It *should* also fix the bison issue.  This spkg-make is highly experimental, but it works for me.  By all means, go ahead and tell me what you think of it.

I'll try it if I get a chance over the next couple of days.

As I see it there are now two main issues:

1. Make sure that the other spkgs which use the pari library still work.  I think someone said that genus2reduction and lcalc have problems.
2. Rebase to 4.5.2.



---

archive/issue_comments_079224.json:
```json
{
    "body": "<div id=\"comment:107\" align=\"right\">comment:107</div>\n\nI just got an email from Karim Belabas, a Pari developer, that they are going to change Pari so it compiles with -fPIC on all platforms. (This is Pari bug 1078)\n\nI've no idea how long it will take them to integrate that patch, but hopefully not too long. Once integrated, the patches for Linux PPC and Solaris in Sage that add -fPIC can be removed. \n\nDave",
    "created_at": "2010-07-22T18:50:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79224",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:107" align="right">comment:107</div>

I just got an email from Karim Belabas, a Pari developer, that they are going to change Pari so it compiles with -fPIC on all platforms. (This is Pari bug 1078)

I've no idea how long it will take them to integrate that patch, but hopefully not too long. Once integrated, the patches for Linux PPC and Solaris in Sage that add -fPIC can be removed. 

Dave



---

archive/issue_comments_079225.json:
```json
{
    "body": "<div id=\"comment:108\" align=\"right\">comment:108</div>\n\nReplying to [@jdemeyer](#comment%3A105):\n> I have made a new version of the spkg:\n> [http://cage.ugent.be/~jdemeyer/pari-2.4.3.svn.p6.spkg](http://cage.ugent.be/~jdemeyer/pari-2.4.3.svn.p6.spkg)\n> \n> It contains a patch for PARI bug 1079, fixing all doctest failures in sage/rings/number_fields.\n> \n> I also added a script \"spkg-make\" which automates the process of building the spkg (it downloads the svn sources and so on).  It *should* also fix the bison issue.  This spkg-make is highly experimental, but it works for me.  By all means, go ahead and tell me what you think of it.\n\nI tried it on OpenSolaris. There are a few error messages:\n\n\nHere's the first\n\n```\nChecking for optional libraries and headers...\n...Found libgmp in /export/home/drkirkby/sage-4.5/local/lib\n...Found gmp header in /export/home/drkirkby/sage-4.5/local/include\nld.so.1: solaris-ix86-rlv10703: fatal: libgmp.so.10: open failed: No such file or directory\n./Configure[79]: .: line 38: 10904: Killed\n### Your version of GMP is too old for PARI. Please upgrade\n### Building without GNU MP support\n```\n\n**This is a new bug first seen in Pari 2.4.3 and does not appear in Pari 2.3.5**\n\nAnd another. \n\n```\nChecking for optional libraries and headers...\n...Found libgmp in /export/home/drkirkby/sage-4.5/local/lib\n...Found gmp header in /export/home/drkirkby/sage-4.5/local/include\nld.so.1: solaris-ix86-rlv10703: fatal: libgmp.so.10: open failed: No such file or directory\n./Configure[79]: .: line 38: 10904: Killed\n### Your version of GMP is too old for PARI. Please upgrade\n### Building without GNU MP support\n```\n\nI've seen this before, but it is very odd, as other packages in Sage use the readline, and clearly readline is used when Sage runs - i.e. I have edit the command line, recall previous commands etc. \n\nAnd another problem with that package. \n\n```\n../src/test/dotest[30]: cat: /../patches/status: cannot open [No such file or directory]\n```\n\n** This is new to pari-2.4.3.svn.p6.log and does not appear in earlier pari 2.4.3 packages which have been posted on this ticket**\n\n\nIMHO, it would be good if the package number included the snv snapshot - in this case 12541. \n\nDave",
    "created_at": "2010-07-22T19:13:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79225",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:108" align="right">comment:108</div>

Replying to [@jdemeyer](#comment%3A105):
> I have made a new version of the spkg:
> [http://cage.ugent.be/~jdemeyer/pari-2.4.3.svn.p6.spkg](http://cage.ugent.be/~jdemeyer/pari-2.4.3.svn.p6.spkg)
> 
> It contains a patch for PARI bug 1079, fixing all doctest failures in sage/rings/number_fields.
> 
> I also added a script "spkg-make" which automates the process of building the spkg (it downloads the svn sources and so on).  It *should* also fix the bison issue.  This spkg-make is highly experimental, but it works for me.  By all means, go ahead and tell me what you think of it.

I tried it on OpenSolaris. There are a few error messages:


Here's the first

```
Checking for optional libraries and headers...
...Found libgmp in /export/home/drkirkby/sage-4.5/local/lib
...Found gmp header in /export/home/drkirkby/sage-4.5/local/include
ld.so.1: solaris-ix86-rlv10703: fatal: libgmp.so.10: open failed: No such file or directory
./Configure[79]: .: line 38: 10904: Killed
### Your version of GMP is too old for PARI. Please upgrade
### Building without GNU MP support
```

**This is a new bug first seen in Pari 2.4.3 and does not appear in Pari 2.3.5**

And another. 

```
Checking for optional libraries and headers...
...Found libgmp in /export/home/drkirkby/sage-4.5/local/lib
...Found gmp header in /export/home/drkirkby/sage-4.5/local/include
ld.so.1: solaris-ix86-rlv10703: fatal: libgmp.so.10: open failed: No such file or directory
./Configure[79]: .: line 38: 10904: Killed
### Your version of GMP is too old for PARI. Please upgrade
### Building without GNU MP support
```

I've seen this before, but it is very odd, as other packages in Sage use the readline, and clearly readline is used when Sage runs - i.e. I have edit the command line, recall previous commands etc. 

And another problem with that package. 

```
../src/test/dotest[30]: cat: /../patches/status: cannot open [No such file or directory]
```

** This is new to pari-2.4.3.svn.p6.log and does not appear in earlier pari 2.4.3 packages which have been posted on this ticket**


IMHO, it would be good if the package number included the snv snapshot - in this case 12541. 

Dave



---

archive/issue_comments_079226.json:
```json
{
    "body": "<div id=\"comment:109\" align=\"right\">comment:109</div>\n\nI wrote the same bug twice there. Here's the second bug:\n\n```\nHi-Res Graphics: none\n...Found libreadline in /export/home/drkirkby/sage-4.5/local/lib\n...Found readline header in /export/home/drkirkby/sage-4.5/local/include/readline\n...Found history header in /export/home/drkirkby/sage-4.5/local/include/readline\n...Found libtermcap in /export/home/drkirkby/sage-4.5/local/lib/\n...Library termcap needed by readline\n###\n### Readline library detected, but does not seem to work\n###\n### Building without GNU readline support\n```\n\nI've seen this before, but it is very odd, as other packages in Sage use the readline, and clearly readline is used when Sage runs - i.e. I have edit the command line, recall previous commands etc.\n\nDave",
    "created_at": "2010-07-22T19:15:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79226",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:109" align="right">comment:109</div>

I wrote the same bug twice there. Here's the second bug:

```
Hi-Res Graphics: none
...Found libreadline in /export/home/drkirkby/sage-4.5/local/lib
...Found readline header in /export/home/drkirkby/sage-4.5/local/include/readline
...Found history header in /export/home/drkirkby/sage-4.5/local/include/readline
...Found libtermcap in /export/home/drkirkby/sage-4.5/local/lib/
...Library termcap needed by readline
###
### Readline library detected, but does not seem to work
###
### Building without GNU readline support
```

I've seen this before, but it is very odd, as other packages in Sage use the readline, and clearly readline is used when Sage runs - i.e. I have edit the command line, recall previous commands etc.

Dave



---

archive/issue_comments_079227.json:
```json
{
    "body": "<div id=\"comment:110\" align=\"right\">comment:110</div>\n\nHave the other issues that are circumvented by hacks to spkg-install been reported upstream? Such as:\n\n```\n# These two are needed so that Sage can catch pari's error signals. \ncp \"$PATCHED/init.c\"  src/language/init.c\ncp \"$PATCHED/mp.c\"    src/kernel/gmp/mp.c \n```\n\nThen's these this not very clearly documented patch\n\n```\ncp \"$PATCHED/get_dlld\" config/\n```\n\nAnd another, this time a bit better documented, though no trac number. \n\n```\n# mabshoff: This patch is to get around problem in PPC 32-bit Linux build\n# (but it is ok on any other machine)\ncp \"$PATCHED/get_dlcflags\" config/\n```\n(That is probably the -fPIC issue which will soon be able to be removed)\n\n```\n# pjeremy: fix for FreeBSD: #7825\ncp \"$PATCHED/get_kernel\" config/\n```\n\nThen this. \n\n```\n# cwitty: disable -rpath\ncp \"$PATCHED/get_ld\" config/\n```\n\nAnd another. \n\n```\n# This is needed or there are weird locale problems involving rpath\n# with building Sage.\nLC_ALL=C\nexport LC_ALL\nLANG=C\nexport LANG\n```\n\nAnd another\n\n```\n    if [ \"$UNAME\" = \"CYGWIN\" ]; then\n        # There are weird bugs in PARI's build process on Windows XP\n        # under Cygwin.\n        # Passing in this extra flag gets around the bug.\n        $MAKE GMPINCLUDE=-I$SAGE_LOCAL/include EXTRADLLDFLAGS=-lgmp gp\n    else\n        $MAKE gp\n    fi\n```\n\nAnd another\n\n\n```\n        # Also another patch since paripriv.h won't compile right on OS X\n        # when used by client Sage code.  So we replace it by a slightly\n        # modified version.\n        cp -pf \"$PATCHED/paripriv.h\" \"$SAGE_LOCAL/include/pari/paripriv.h\"\n```\n\nThat's a lot of patches to one program. How many of these issues have been raised? Personally, I would be very tempted to remove these, and find what fails. Otherwise maintenance of the package is going to be very difficult. \n\nDave",
    "created_at": "2010-07-22T19:32:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79227",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:110" align="right">comment:110</div>

Have the other issues that are circumvented by hacks to spkg-install been reported upstream? Such as:

```
# These two are needed so that Sage can catch pari's error signals. 
cp "$PATCHED/init.c"  src/language/init.c
cp "$PATCHED/mp.c"    src/kernel/gmp/mp.c 
```

Then's these this not very clearly documented patch

```
cp "$PATCHED/get_dlld" config/
```

And another, this time a bit better documented, though no trac number. 

```
# mabshoff: This patch is to get around problem in PPC 32-bit Linux build
# (but it is ok on any other machine)
cp "$PATCHED/get_dlcflags" config/
```
(That is probably the -fPIC issue which will soon be able to be removed)

```
# pjeremy: fix for FreeBSD: #7825
cp "$PATCHED/get_kernel" config/
```

Then this. 

```
# cwitty: disable -rpath
cp "$PATCHED/get_ld" config/
```

And another. 

```
# This is needed or there are weird locale problems involving rpath
# with building Sage.
LC_ALL=C
export LC_ALL
LANG=C
export LANG
```

And another

```
    if [ "$UNAME" = "CYGWIN" ]; then
        # There are weird bugs in PARI's build process on Windows XP
        # under Cygwin.
        # Passing in this extra flag gets around the bug.
        $MAKE GMPINCLUDE=-I$SAGE_LOCAL/include EXTRADLLDFLAGS=-lgmp gp
    else
        $MAKE gp
    fi
```

And another


```
        # Also another patch since paripriv.h won't compile right on OS X
        # when used by client Sage code.  So we replace it by a slightly
        # modified version.
        cp -pf "$PATCHED/paripriv.h" "$SAGE_LOCAL/include/pari/paripriv.h"
```

That's a lot of patches to one program. How many of these issues have been raised? Personally, I would be very tempted to remove these, and find what fails. Otherwise maintenance of the package is going to be very difficult. 

Dave



---

archive/issue_comments_079228.json:
```json
{
    "body": "<div id=\"comment:111\" align=\"right\">comment:111</div>\n\nHi Dave we have some of these patch as well in Gentoo (and I mean in the distro\nitself not just sage-on-gentoo). So I can fill in some gaps.\n\n\nget_dlld: we have this\n\n```\n\t# propagate ldflags\n\tsed -i \\\n\t\t-e 's/-shared $extra/-shared $extra \\\\$(LDFLAGS)/' \\\n\t\tconfig/get_dlld || die \"Failed to fix LDFLAGS\"\n```\nWe add -fpic on all platforms when building the library but not gp or static libraries. \n\nBut we have a patch I think originating from Debian to add support \nfor linux ppc 32 bits.\n\nget_ld: when gp is compiled it uses libpari and is compiled -rpath to hardcode the libray location. I am not sure this is strictly necessary.\n\n\n\nNot sure about the CYGWIN and OS X stuff.",
    "created_at": "2010-07-22T20:30:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79228",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:111" align="right">comment:111</div>

Hi Dave we have some of these patch as well in Gentoo (and I mean in the distro
itself not just sage-on-gentoo). So I can fill in some gaps.


get_dlld: we have this

```
	# propagate ldflags
	sed -i \
		-e 's/-shared $extra/-shared $extra \\$(LDFLAGS)/' \
		config/get_dlld || die "Failed to fix LDFLAGS"
```
We add -fpic on all platforms when building the library but not gp or static libraries. 

But we have a patch I think originating from Debian to add support 
for linux ppc 32 bits.

get_ld: when gp is compiled it uses libpari and is compiled -rpath to hardcode the libray location. I am not sure this is strictly necessary.



Not sure about the CYGWIN and OS X stuff.



---

archive/issue_comments_079229.json:
```json
{
    "body": "<div id=\"comment:112\" align=\"right\">comment:112</div>\n\nIt's worth remembering too that Bill Alombert is (or was) a debian developer so should know a lot of these issues.",
    "created_at": "2010-07-22T20:33:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79229",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:112" align="right">comment:112</div>

It's worth remembering too that Bill Alombert is (or was) a debian developer so should know a lot of these issues.



---

archive/issue_comments_079230.json:
```json
{
    "body": "<div id=\"comment:113\" align=\"right\">comment:113</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A110):\n> Have the other issues that are circumvented by hacks to spkg-install been reported upstream?\n\n> That's a lot of patches to one program. How many of these issues have been raised? Personally, I would be very tempted to remove these, and find what fails. Otherwise maintenance of the package is going to be very difficult. \n\nI agree that all the patches in config/* dealing with compiling PARI/GP really are upstream issues and should be fixed there.  Also, now that we upgrade PARI to 2.4.3, it is not at all clear whether these patches are still needed.",
    "created_at": "2010-07-22T21:02:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79230",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:113" align="right">comment:113</div>

Replying to [@sagetrac-drkirkby](#comment%3A110):
> Have the other issues that are circumvented by hacks to spkg-install been reported upstream?

> That's a lot of patches to one program. How many of these issues have been raised? Personally, I would be very tempted to remove these, and find what fails. Otherwise maintenance of the package is going to be very difficult. 

I agree that all the patches in config/* dealing with compiling PARI/GP really are upstream issues and should be fixed there.  Also, now that we upgrade PARI to 2.4.3, it is not at all clear whether these patches are still needed.



---

archive/issue_comments_079231.json:
```json
{
    "body": "<div id=\"comment:114\" align=\"right\">comment:114</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A108):\n> And another problem with that package. \n> \n> ```\n> ../src/test/dotest[30]: cat: /../patches/status: cannot open [No such file or directory]\n> ```\n\nMy fault.  I uploaded a new [http://cage.ugent.be/~jdemeyer/pari-2.4.3.svn.p6.spkg](http://cage.ugent.be/~jdemeyer/pari-2.4.3.svn.p6.spkg) which should fix this.  (This is a small hack I added such that the SVN version is saved in patches/status such that it can appear in gp.version() for example).",
    "created_at": "2010-07-22T21:05:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79231",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:114" align="right">comment:114</div>

Replying to [@sagetrac-drkirkby](#comment%3A108):
> And another problem with that package. 
> 
> ```
> ../src/test/dotest[30]: cat: /../patches/status: cannot open [No such file or directory]
> ```

My fault.  I uploaded a new [http://cage.ugent.be/~jdemeyer/pari-2.4.3.svn.p6.spkg](http://cage.ugent.be/~jdemeyer/pari-2.4.3.svn.p6.spkg) which should fix this.  (This is a small hack I added such that the SVN version is saved in patches/status such that it can appear in gp.version() for example).



---

archive/issue_comments_079232.json:
```json
{
    "body": "<div id=\"comment:115\" align=\"right\">comment:115</div>\n\nReplying to [@jdemeyer](#comment%3A113):\n> Replying to [@sagetrac-drkirkby](#comment%3A110):\n> > Have the other issues that are circumvented by hacks to spkg-install been reported upstream?\n> \n> \n> > That's a lot of patches to one program. How many of these issues have been raised? Personally, I would be very tempted to remove these, and find what fails. Otherwise maintenance of the package is going to be very difficult. \n> \n> \n> I agree that all the patches in config/* dealing with compiling PARI/GP really are upstream issues and should be fixed there.  Also, now that we upgrade PARI to 2.4.3, it is not at all clear whether these patches are still needed.\n\nI got this email  from Bill Allombert on the `Bug#1078: Pari, -fPIC and Solaris` thread:\n\n```\nOn 07/22/10 09:46 PM, Bill Allombert wrote:\n> On Thu, Jul 22, 2010 at 07:33:45PM +0100, Dr. David Kirkby wrote:\n>> The Sage developers will look forward to a snapshot were we can\n>> disable the patches for Solaris and PPC.\n> \n> Well, the Sage PPC fix is wrong and the correct fix is in PARI 2.3.5 which was released\n> in February, so I do not see why sage still carry it.\n> \n> Cheers,\n> Bill.\n> \n```\n\nSo it seems we should remove the -fPIC patch for PPC Linux, and the -fPIC patch for Solaris will be able to be removed later, but not yet. \n\nIMHO, it would be better to remove all the patch (or just comment them out for now), and put them back as and when they are needed, taking care (where possible), to check if the bugs they are supposed to fix reoccur. This is one of the more messy spkg-install files I've seen - though the ATLAS one is pretty messy too!\n\nDave",
    "created_at": "2010-07-22T21:20:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79232",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:115" align="right">comment:115</div>

Replying to [@jdemeyer](#comment%3A113):
> Replying to [@sagetrac-drkirkby](#comment%3A110):
> > Have the other issues that are circumvented by hacks to spkg-install been reported upstream?
> 
> 
> > That's a lot of patches to one program. How many of these issues have been raised? Personally, I would be very tempted to remove these, and find what fails. Otherwise maintenance of the package is going to be very difficult. 
> 
> 
> I agree that all the patches in config/* dealing with compiling PARI/GP really are upstream issues and should be fixed there.  Also, now that we upgrade PARI to 2.4.3, it is not at all clear whether these patches are still needed.

I got this email  from Bill Allombert on the `Bug#1078: Pari, -fPIC and Solaris` thread:

```
On 07/22/10 09:46 PM, Bill Allombert wrote:
> On Thu, Jul 22, 2010 at 07:33:45PM +0100, Dr. David Kirkby wrote:
>> The Sage developers will look forward to a snapshot were we can
>> disable the patches for Solaris and PPC.
> 
> Well, the Sage PPC fix is wrong and the correct fix is in PARI 2.3.5 which was released
> in February, so I do not see why sage still carry it.
> 
> Cheers,
> Bill.
> 
```

So it seems we should remove the -fPIC patch for PPC Linux, and the -fPIC patch for Solaris will be able to be removed later, but not yet. 

IMHO, it would be better to remove all the patch (or just comment them out for now), and put them back as and when they are needed, taking care (where possible), to check if the bugs they are supposed to fix reoccur. This is one of the more messy spkg-install files I've seen - though the ATLAS one is pretty messy too!

Dave



---

archive/issue_comments_079233.json:
```json
{
    "body": "Attachment: **[sagelib_9343_combined3.patch.gz](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343_combined3.patch.gz)**\n\nCombined sagelib patch against sage-4.5.2.alpha0, removes discrete log patch",
    "created_at": "2010-07-23T08:28:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79233",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[sagelib_9343_combined3.patch.gz](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343_combined3.patch.gz)**

Combined sagelib patch against sage-4.5.2.alpha0, removes discrete log patch



---

archive/issue_comments_079234.json:
```json
{
    "body": "<div id=\"comment:116\" align=\"right\">comment:116</div>\n\nI'm told by Bill Allombert, a Pari developer, that they have now enabled -fPIC on all platforms in build 12542. So all hacks in Sage to add -fPIC on Linux PPC and Solaris can be removed if that build or later is used. \n\nDave",
    "created_at": "2010-07-23T11:02:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79234",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:116" align="right">comment:116</div>

I'm told by Bill Allombert, a Pari developer, that they have now enabled -fPIC on all platforms in build 12542. So all hacks in Sage to add -fPIC on Linux PPC and Solaris can be removed if that build or later is used. 

Dave



---

archive/issue_comments_079235.json:
```json
{
    "body": "<div id=\"comment:117\" align=\"right\">comment:117</div>\n\nNew spkg version: [http://cage.ugent.be/~jdemeyer/pari-2.4.3.svn.p7.spkg](http://cage.ugent.be/~jdemeyer/pari-2.4.3.svn.p7.spkg), PARI build 12543.  The only changes are in the build process.  I also removed several patches, \nsince the fixes should be upstream now.\n\nBut we need to test building this spkg on many different machines!\n\nThere are some new doctest failures with sage-4.5.2.alpha0, nothing very troublesome though.  I can probably fix them (except for elliptic_curves, which I will leave to John).",
    "created_at": "2010-07-23T13:08:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79235",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:117" align="right">comment:117</div>

New spkg version: [http://cage.ugent.be/~jdemeyer/pari-2.4.3.svn.p7.spkg](http://cage.ugent.be/~jdemeyer/pari-2.4.3.svn.p7.spkg), PARI build 12543.  The only changes are in the build process.  I also removed several patches, 
since the fixes should be upstream now.

But we need to test building this spkg on many different machines!

There are some new doctest failures with sage-4.5.2.alpha0, nothing very troublesome though.  I can probably fix them (except for elliptic_curves, which I will leave to John).



---

archive/issue_comments_079236.json:
```json
{
    "body": "<div id=\"comment:118\" align=\"right\">comment:118</div>\n\nPerhaps spkg-check should do one of \"make dyntest-all\" or \"make statest-all\" instead of \"make test-all\" (which does both and takes twice as long)?  Since we are only installing one copy of the binary gp (which is what is run in the tests) there's no need to make and test the other.",
    "created_at": "2010-07-23T17:19:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79236",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:118" align="right">comment:118</div>

Perhaps spkg-check should do one of "make dyntest-all" or "make statest-all" instead of "make test-all" (which does both and takes twice as long)?  Since we are only installing one copy of the binary gp (which is what is run in the tests) there's no need to make and test the other.



---

archive/issue_comments_079237.json:
```json
{
    "body": "<div id=\"comment:119\" align=\"right\">comment:119</div>\n\nReplying to [@jdemeyer](#comment%3A117):\n> New spkg version: [http://cage.ugent.be/~jdemeyer/pari-2.4.3.svn.p7.spkg](http://cage.ugent.be/~jdemeyer/pari-2.4.3.svn.p7.spkg), PARI build 12543.  The only changes are in the build process.  I also removed several patches, \n> since the fixes should be upstream now.\n> \n> But we need to test building this spkg on many different machines!\n> \n> There are some new doctest failures with sage-4.5.2.alpha0, nothing very troublesome though.  I can probably fix them (except for elliptic_curves, which I will leave to John).\n\nI applied the p7 spkg fine to 4.5.2.alpha0, and the (two) extcode patches above, and the new sagelib_9343_combined3.patch .\n\nVery impressed that the latter applied without any merge problems -- thanks, Jeroen.  I will test and fix what I find in elliptic_curves (except perhaps the failures in heegner.py).",
    "created_at": "2010-07-23T17:46:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79237",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:119" align="right">comment:119</div>

Replying to [@jdemeyer](#comment%3A117):
> New spkg version: [http://cage.ugent.be/~jdemeyer/pari-2.4.3.svn.p7.spkg](http://cage.ugent.be/~jdemeyer/pari-2.4.3.svn.p7.spkg), PARI build 12543.  The only changes are in the build process.  I also removed several patches, 
> since the fixes should be upstream now.
> 
> But we need to test building this spkg on many different machines!
> 
> There are some new doctest failures with sage-4.5.2.alpha0, nothing very troublesome though.  I can probably fix them (except for elliptic_curves, which I will leave to John).

I applied the p7 spkg fine to 4.5.2.alpha0, and the (two) extcode patches above, and the new sagelib_9343_combined3.patch .

Very impressed that the latter applied without any merge problems -- thanks, Jeroen.  I will test and fix what I find in elliptic_curves (except perhaps the failures in heegner.py).



---

archive/issue_comments_079238.json:
```json
{
    "body": "<div id=\"comment:120\" align=\"right\">comment:120</div>\n\nReplying to [@jdemeyer](#comment%3A117):\n> New spkg version: [http://cage.ugent.be/~jdemeyer/pari-2.4.3.svn.p7.spkg](http://cage.ugent.be/~jdemeyer/pari-2.4.3.svn.p7.spkg),\n\nWhy do you chose that name? The .p7 should only be integrated into Sage where there are 7 previous versions of 2.4.3. Since the software says \n\n```\nShall we try to build pari 2.4.3 (development svn-12543) now (y/n)? [n]\n```\n\nI think a better name would be\n\n```\npari-2.4.3.svn-12543\n```\n\nas that is the version of Pari that it is based upon. Then, assuming this version was merged, subsequent updates in Sage would be called pari-2.4.3.svn-12543.p0, pari-2.4.3.svn-12543.p1, pari-2.4.3.svn-12543.p2 etc. \n\nCertainly, the first revision put into Sage should not have a patch level of 7. \n\nhttp://www.sagemath.org/doc/developer/patching_spkgs.html\n\nsays *If the upstream package is taken from some revision other than a stable version, you need to append the date at which the revision is made, e.g. the Singular package singular-3-1-0-4-20090818.p3.spkg is made with the revision as of 2009-08-18. *\n\nHowever, I think in this case, the fact the upstream does have a version number (in this case 2.4.3.svn-12543), that should be used rather than a date. \n\nDave \nDave",
    "created_at": "2010-07-23T20:33:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79238",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:120" align="right">comment:120</div>

Replying to [@jdemeyer](#comment%3A117):
> New spkg version: [http://cage.ugent.be/~jdemeyer/pari-2.4.3.svn.p7.spkg](http://cage.ugent.be/~jdemeyer/pari-2.4.3.svn.p7.spkg),

Why do you chose that name? The .p7 should only be integrated into Sage where there are 7 previous versions of 2.4.3. Since the software says 

```
Shall we try to build pari 2.4.3 (development svn-12543) now (y/n)? [n]
```

I think a better name would be

```
pari-2.4.3.svn-12543
```

as that is the version of Pari that it is based upon. Then, assuming this version was merged, subsequent updates in Sage would be called pari-2.4.3.svn-12543.p0, pari-2.4.3.svn-12543.p1, pari-2.4.3.svn-12543.p2 etc. 

Certainly, the first revision put into Sage should not have a patch level of 7. 

http://www.sagemath.org/doc/developer/patching_spkgs.html

says *If the upstream package is taken from some revision other than a stable version, you need to append the date at which the revision is made, e.g. the Singular package singular-3-1-0-4-20090818.p3.spkg is made with the revision as of 2009-08-18. *

However, I think in this case, the fact the upstream does have a version number (in this case 2.4.3.svn-12543), that should be used rather than a date. 

Dave 
Dave



---

archive/issue_comments_079239.json:
```json
{
    "body": "<div id=\"comment:121\" align=\"right\">comment:121</div>\n\nReplying to [@JohnCremona](#comment%3A119):\n> Replying to [@jdemeyer](#comment%3A117):\n> > New spkg version: [http://cage.ugent.be/~jdemeyer/pari-2.4.3.svn.p7.spkg](http://cage.ugent.be/~jdemeyer/pari-2.4.3.svn.p7.spkg), PARI build 12543.  The only changes are in the build process.  I also removed several patches, \n> > since the fixes should be upstream now.\n> > \n> > But we need to test building this spkg on many different machines!\n> > \n> > There are some new doctest failures with sage-4.5.2.alpha0, nothing very troublesome though.  I can probably fix them (except for elliptic_curves, which I will leave to John).\n> \n> \n> I applied the p7 spkg fine to 4.5.2.alpha0, and the (two) extcode patches above, and the new sagelib_9343_combined3.patch .\n> \n> Very impressed that the latter applied without any merge problems -- thanks, Jeroen.  I will test and fix what I find in elliptic_curves (except perhaps the failures in heegner.py).\n\nThere's one test failure in ell_rational_field (extraneous warning output from eclib) which will go away if the patches from #9247 are applied, so I think there is no need to do anything about this at present.\n\n>",
    "created_at": "2010-07-23T21:04:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79239",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:121" align="right">comment:121</div>

Replying to [@JohnCremona](#comment%3A119):
> Replying to [@jdemeyer](#comment%3A117):
> > New spkg version: [http://cage.ugent.be/~jdemeyer/pari-2.4.3.svn.p7.spkg](http://cage.ugent.be/~jdemeyer/pari-2.4.3.svn.p7.spkg), PARI build 12543.  The only changes are in the build process.  I also removed several patches, 
> > since the fixes should be upstream now.
> > 
> > But we need to test building this spkg on many different machines!
> > 
> > There are some new doctest failures with sage-4.5.2.alpha0, nothing very troublesome though.  I can probably fix them (except for elliptic_curves, which I will leave to John).
> 
> 
> I applied the p7 spkg fine to 4.5.2.alpha0, and the (two) extcode patches above, and the new sagelib_9343_combined3.patch .
> 
> Very impressed that the latter applied without any merge problems -- thanks, Jeroen.  I will test and fix what I find in elliptic_curves (except perhaps the failures in heegner.py).

There's one test failure in ell_rational_field (extraneous warning output from eclib) which will go away if the patches from #9247 are applied, so I think there is no need to do anything about this at present.

>



---

archive/issue_comments_079240.json:
```json
{
    "body": "Attachment: **[trac_9343-enf-doctest.patch.gz](https://github.com/sagemath/sage/files/ticket9343/trac_9343-enf-doctest.patch.gz)**\n\nfixes doctests in elliptic_curves/ell_number_field",
    "created_at": "2010-07-24T08:59:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79240",
    "user": "https://github.com/JohnCremona"
}
```

Attachment: **[trac_9343-enf-doctest.patch.gz](https://github.com/sagemath/sage/files/ticket9343/trac_9343-enf-doctest.patch.gz)**

fixes doctests in elliptic_curves/ell_number_field



---

archive/issue_comments_079241.json:
```json
{
    "body": "<div id=\"comment:122\" align=\"right\">comment:122</div>\n\nReplying to [@JohnCremona](#comment%3A119):\n> Very impressed that the latter applied without any merge problems -- thanks, Jeroen. \n\nI wish I could say I was as impressed with the installation on OpenSolaris:\n\n```\nChecking for optional libraries and headers...\n...Found libgmp in /export/home/drkirkby/sage-4.5.2.alpha0/local/lib\n...Found gmp header in /export/home/drkirkby/sage-4.5.2.alpha0/local/include\nld.so.1: solaris-ix86-rlv7589: fatal: libgmp.so.10: open failed: No such file or directory\n./Configure[79]: .: line 38: 8207: Killed\n### Your version of GMP is too old for PARI. Please upgrade\n### Building without GNU MP support\n```\n\nThe version currently in Sage works fine - this is broken. \n\nThis does not seem an upstream problem, as it builds fine outside of the Sage environment. \n\nDave",
    "created_at": "2010-07-24T11:55:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79241",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:122" align="right">comment:122</div>

Replying to [@JohnCremona](#comment%3A119):
> Very impressed that the latter applied without any merge problems -- thanks, Jeroen. 

I wish I could say I was as impressed with the installation on OpenSolaris:

```
Checking for optional libraries and headers...
...Found libgmp in /export/home/drkirkby/sage-4.5.2.alpha0/local/lib
...Found gmp header in /export/home/drkirkby/sage-4.5.2.alpha0/local/include
ld.so.1: solaris-ix86-rlv7589: fatal: libgmp.so.10: open failed: No such file or directory
./Configure[79]: .: line 38: 8207: Killed
### Your version of GMP is too old for PARI. Please upgrade
### Building without GNU MP support
```

The version currently in Sage works fine - this is broken. 

This does not seem an upstream problem, as it builds fine outside of the Sage environment. 

Dave



---

archive/issue_comments_079242.json:
```json
{
    "body": "<div id=\"comment:123\" align=\"right\">comment:123</div>\n\nI created tickets for genus2reduction (#9591) and lcalc (#9592).",
    "created_at": "2010-07-24T11:58:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79242",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:123" align="right">comment:123</div>

I created tickets for genus2reduction (#9591) and lcalc (#9592).



---

archive/issue_comments_079243.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,4 +2,4 @@\n \n After doing this, we also need to remove sea.gp, since it is included in pari now.\n \n-Running todo list: http://sage.math.washington.edu/home/wstein/build/sd22/pari/pari.txt\n+See also #9591 and #9592 (other packages depending on PARI).\n``````\n",
    "created_at": "2010-07-24T12:00:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79243",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,4 +2,4 @@
 
 After doing this, we also need to remove sea.gp, since it is included in pari now.
 
-Running todo list: http://sage.math.washington.edu/home/wstein/build/sd22/pari/pari.txt
+See also #9591 and #9592 (other packages depending on PARI).
``````




---

archive/issue_comments_079244.json:
```json
{
    "body": "<div id=\"comment:125\" align=\"right\">comment:125</div>\n\ngenus2reduction (#9591) is fixed, download from [http://cage.ugent.be/~jdemeyer/sage/genus2reduction-0.3.p7.spkg](http://cage.ugent.be/~jdemeyer/sage/genus2reduction-0.3.p7.spkg)",
    "created_at": "2010-07-24T12:19:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79244",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:125" align="right">comment:125</div>

genus2reduction (#9591) is fixed, download from [http://cage.ugent.be/~jdemeyer/sage/genus2reduction-0.3.p7.spkg](http://cage.ugent.be/~jdemeyer/sage/genus2reduction-0.3.p7.spkg)



---

archive/issue_comments_079245.json:
```json
{
    "body": "<div id=\"comment:126\" align=\"right\">comment:126</div>\n\nCurrently in Sage with Pari 2.3.5 there is \n\n* `patches/paripriv-osx.h` which gets copied on only OS X \n* `patches/paripriv-Solaris.h` which gets copied on both Solaris and Cygwin. \n\n\nThe new version has just patches/files/paripriv.h which gets copied on all 3 operating systems. IIRC, the changes needed on Solaris (and I guess Cygwin, as it uses the Solaris patch) were quite small. The changes needed on OS X were much more significant. Was this an oversight to remove the OS X patch, or a deliberate decision?",
    "created_at": "2010-07-24T12:20:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79245",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:126" align="right">comment:126</div>

Currently in Sage with Pari 2.3.5 there is 

* `patches/paripriv-osx.h` which gets copied on only OS X 
* `patches/paripriv-Solaris.h` which gets copied on both Solaris and Cygwin. 


The new version has just patches/files/paripriv.h which gets copied on all 3 operating systems. IIRC, the changes needed on Solaris (and I guess Cygwin, as it uses the Solaris patch) were quite small. The changes needed on OS X were much more significant. Was this an oversight to remove the OS X patch, or a deliberate decision?



---

archive/issue_comments_079246.json:
```json
{
    "body": "<div id=\"comment:127\" align=\"right\">comment:127</div>\n\nlcalc (#9592) is fixed, download from [http://cage.ugent.be/~jdemeyer/sage/lcalc-20100428-1.23.p1.spkg](http://cage.ugent.be/~jdemeyer/sage/lcalc-20100428-1.23.p1.spkg)",
    "created_at": "2010-07-24T13:12:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79246",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:127" align="right">comment:127</div>

lcalc (#9592) is fixed, download from [http://cage.ugent.be/~jdemeyer/sage/lcalc-20100428-1.23.p1.spkg](http://cage.ugent.be/~jdemeyer/sage/lcalc-20100428-1.23.p1.spkg)



---

archive/issue_comments_079247.json:
```json
{
    "body": "<div id=\"comment:128\" align=\"right\">comment:128</div>\n\nReplying to [@jdemeyer](#comment%3A125):\n> genus2reduction (#9591) is fixed, download from [http://cage.ugent.be/~jdemeyer/sage/genus2reduction-0.3.p7.spkg](http://cage.ugent.be/~jdemeyer/sage/genus2reduction-0.3.p7.spkg)\n\n\nThe bit still in the description about removing sea.gp is redundant since it is already removed in one of the extcode patches. I see that in my patched extcode directory, pari/SEA is still there with empty directories doc and test. Funny, I thought mercurial automatically removed empty directories.\n\nI successfully installed the new genus2reduction spkg and the tests in sage/interfaces/genus2reduction pass. BUT in the spkg directory the changes to SPKG.txt and the src file are not checked in -- better do that!",
    "created_at": "2010-07-24T13:16:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79247",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:128" align="right">comment:128</div>

Replying to [@jdemeyer](#comment%3A125):
> genus2reduction (#9591) is fixed, download from [http://cage.ugent.be/~jdemeyer/sage/genus2reduction-0.3.p7.spkg](http://cage.ugent.be/~jdemeyer/sage/genus2reduction-0.3.p7.spkg)


The bit still in the description about removing sea.gp is redundant since it is already removed in one of the extcode patches. I see that in my patched extcode directory, pari/SEA is still there with empty directories doc and test. Funny, I thought mercurial automatically removed empty directories.

I successfully installed the new genus2reduction spkg and the tests in sage/interfaces/genus2reduction pass. BUT in the spkg directory the changes to SPKG.txt and the src file are not checked in -- better do that!



---

archive/issue_comments_079248.json:
```json
{
    "body": "<div id=\"comment:129\" align=\"right\">comment:129</div>\n\nReplying to [@jdemeyer](#comment%3A127):\n> lcalc (#9592) is fixed, download from [http://cage.ugent.be/~jdemeyer/sage/lcalc-20100428-1.23.p1.spkg](http://cage.ugent.be/~jdemeyer/sage/lcalc-20100428-1.23.p1.spkg)\n\nDid you forget to update SPKG.txt?  This installed OK for me (but there are so many warnings!).  Also, rishi should be kept up-to-date on this, since there are several outstanding lcalc-related tickets (#8621, #8623, #5396, ...)",
    "created_at": "2010-07-24T13:23:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79248",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:129" align="right">comment:129</div>

Replying to [@jdemeyer](#comment%3A127):
> lcalc (#9592) is fixed, download from [http://cage.ugent.be/~jdemeyer/sage/lcalc-20100428-1.23.p1.spkg](http://cage.ugent.be/~jdemeyer/sage/lcalc-20100428-1.23.p1.spkg)

Did you forget to update SPKG.txt?  This installed OK for me (but there are so many warnings!).  Also, rishi should be kept up-to-date on this, since there are several outstanding lcalc-related tickets (#8621, #8623, #5396, ...)



---

archive/issue_comments_079249.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,3 @@\n See #7736 (a bug this will fix), #8453 (last pari upgrade).\n \n-After doing this, we also need to remove sea.gp, since it is included in pari now.\n-\n See also #9591 and #9592 (other packages depending on PARI).\n``````\n",
    "created_at": "2010-07-24T13:23:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79249",
    "user": "https://github.com/JohnCremona"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,3 @@
 See #7736 (a bug this will fix), #8453 (last pari upgrade).
 
-After doing this, we also need to remove sea.gp, since it is included in pari now.
-
 See also #9591 and #9592 (other packages depending on PARI).
``````




---

archive/issue_comments_079250.json:
```json
{
    "body": "<div id=\"comment:130\" align=\"right\">comment:130</div>\n\n> I successfully installed the new genus2reduction spkg and the tests in sage/interfaces/genus2reduction pass. BUT in the spkg directory the changes to SPKG.txt and the src file are not checked in -- better do that!\n\n> Did you forget to update SPKG.txt?\n\nAllright, maybe I was a bit too quick by the excitement of having fixed these!  I just uploaded new versions (with the same filenames).\n\nNow I am doing a complete from-scratch build of Sage with the new spkg's.  This will be a build without any trace of an old version of PARI.  Let's wait and see...",
    "created_at": "2010-07-24T13:29:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79250",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:130" align="right">comment:130</div>

> I successfully installed the new genus2reduction spkg and the tests in sage/interfaces/genus2reduction pass. BUT in the spkg directory the changes to SPKG.txt and the src file are not checked in -- better do that!

> Did you forget to update SPKG.txt?

Allright, maybe I was a bit too quick by the excitement of having fixed these!  I just uploaded new versions (with the same filenames).

Now I am doing a complete from-scratch build of Sage with the new spkg's.  This will be a build without any trace of an old version of PARI.  Let's wait and see...



---

archive/issue_comments_079251.json:
```json
{
    "body": "<div id=\"comment:131\" align=\"right\">comment:131</div>\n\nI've found what the problem with the GMP and Readline are on Solaris. Setting CFLAGS to include -m64 flag is not sufficient, but setting \n\nCC=\"$CC -m64\"\n\nworks. \n\nI also made a few other improvements to spkg-install. \n* Allow one to set SAGE_DEBUG=yes to set no optimisation. Primarily for debugging purposes, but would also be useful if people (like on Fedora once) found gcc mis-compiled Pari. \n* Check SAGE_ROOT actually exists as is required in the Sage Developers guide\n* Allow the setting SAGE_TUNE_pari=yes to get increased performance, at a cost of letting Pari do the tuning. \n\nI changed the filename to show the actual svn version - you can see this reported when you run configure. \n\nNew package at \n\nhttp://boxen.math.washington.edu/home/kirkby/patches/pari-2.4.3svn-12543.spkg\n\nThat now does build properly on OpenSolaris. \n\nDave",
    "created_at": "2010-07-24T13:49:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79251",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:131" align="right">comment:131</div>

I've found what the problem with the GMP and Readline are on Solaris. Setting CFLAGS to include -m64 flag is not sufficient, but setting 

CC="$CC -m64"

works. 

I also made a few other improvements to spkg-install. 
* Allow one to set SAGE_DEBUG=yes to set no optimisation. Primarily for debugging purposes, but would also be useful if people (like on Fedora once) found gcc mis-compiled Pari. 
* Check SAGE_ROOT actually exists as is required in the Sage Developers guide
* Allow the setting SAGE_TUNE_pari=yes to get increased performance, at a cost of letting Pari do the tuning. 

I changed the filename to show the actual svn version - you can see this reported when you run configure. 

New package at 

http://boxen.math.washington.edu/home/kirkby/patches/pari-2.4.3svn-12543.spkg

That now does build properly on OpenSolaris. 

Dave



---

archive/issue_comments_079252.json:
```json
{
    "body": "Allows GMP and Readline to be found on 64-bit OpenSolaris. Also allows one to tune Pari (using SAGE_TUNE_pari=yes) and compile without optimisation (with SAGE_DEBUG=yes)",
    "created_at": "2010-07-24T13:51:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79252",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

Allows GMP and Readline to be found on 64-bit OpenSolaris. Also allows one to tune Pari (using SAGE_TUNE_pari=yes) and compile without optimisation (with SAGE_DEBUG=yes)



---

archive/issue_comments_079253.json:
```json
{
    "body": "Changed author from **Robert Bradshaw, John Cremona, Jeroen Demeyer, William Stein** to **Robert Bradshaw, John Cremona, Jeroen Demeyer, William Stein, David Kirkby**",
    "created_at": "2010-07-24T13:51:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79253",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

Changed author from **Robert Bradshaw, John Cremona, Jeroen Demeyer, William Stein** to **Robert Bradshaw, John Cremona, Jeroen Demeyer, William Stein, David Kirkby**



---

archive/issue_comments_079254.json:
```json
{
    "body": "<div id=\"comment:132\" align=\"right\">comment:132</div>\n\nAttachment: **[9343-improved-64-bit-support-on-Solaris.patch.gz](https://github.com/sagemath/sage/files/ticket9343/9343-improved-64-bit-support-on-Solaris.patch.gz)**",
    "created_at": "2010-07-24T13:51:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79254",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:132" align="right">comment:132</div>

Attachment: **[9343-improved-64-bit-support-on-Solaris.patch.gz](https://github.com/sagemath/sage/files/ticket9343/9343-improved-64-bit-support-on-Solaris.patch.gz)**



---

archive/issue_comments_079255.json:
```json
{
    "body": "<div id=\"comment:133\" align=\"right\">comment:133</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A131):\n>\n> \n> I changed the filename to show the actual svn version - you can see this reported when you run configure. \n> \n> New package at \n> \n> http://boxen.math.washington.edu/home/kirkby/patches/pari-2.4.3svn-12543.spkg\n> \n\nWhat I had been planning to say about the spkg's name is:  All the various pari-2.4.3.svn.p?.spkg on this ticket up to now have been alpha things which were never intended for anyone other than those working on this ticket;  and we should give the spkg a proper name (to which further patch levels could be applied later, after this becomes the Sage standard spkg) once we reached something like a beta level, or even after the authors on this ticket were all happy with it.\n\nThe latest version may or may not be the final one!  But it gets better every time.\n\n[I may have a little time later today but then I'll be travelling.  In any case, it will soon be time to mark the ticket \"needs review\" and prod likely suspects to thoroughly test it!]",
    "created_at": "2010-07-24T14:40:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79255",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:133" align="right">comment:133</div>

Replying to [@sagetrac-drkirkby](#comment%3A131):
>
> 
> I changed the filename to show the actual svn version - you can see this reported when you run configure. 
> 
> New package at 
> 
> http://boxen.math.washington.edu/home/kirkby/patches/pari-2.4.3svn-12543.spkg
> 

What I had been planning to say about the spkg's name is:  All the various pari-2.4.3.svn.p?.spkg on this ticket up to now have been alpha things which were never intended for anyone other than those working on this ticket;  and we should give the spkg a proper name (to which further patch levels could be applied later, after this becomes the Sage standard spkg) once we reached something like a beta level, or even after the authors on this ticket were all happy with it.

The latest version may or may not be the final one!  But it gets better every time.

[I may have a little time later today but then I'll be travelling.  In any case, it will soon be time to mark the ticket "needs review" and prod likely suspects to thoroughly test it!]



---

archive/issue_comments_079256.json:
```json
{
    "body": "<div id=\"comment:134\" align=\"right\">comment:134</div>\n\nReplying to [@JohnCremona](#comment%3A133):\n> What I had been planning to say about the spkg's name is:  \n\nI would think it worth keeping the svn snapshot number in there at all times. Even for alpha releases, as it's obvious then if its based on a different version of the upstream source code. Those editing this ticket will be in no doubt if the source has changed or not. \n\nFor actual packages in Sage, the Developers Guide says to have the date on SVN snapshots, but since we can get an actual number, that seems more sensible to me. Also, I've found if one puts a date, what often happens is someone updates the package and instead of putting .p0, then just change the date. At that point, the date bears no resemblance to what's in the upstream code on that date. \n\nAnyway, http://boxen.math.washington.edu/home/kirkby/patches/pari-2.4.3svn-12543.spkg \n\nwill build properly on OpenSolaris. \n\nI managed to get a core dump when tuning it, but that's less of an issue. I will report that upstream. I've found Bill very helpful. I've just reported the CC/CFLAGS bug upstream, though have got no feedback yet. \n\nI can see tuning Pari is slow. I can build Pari in 33 seconds on this machine, but it was 24 minutes until I got a core dump when tuning. So I don't know how long tuning would take. But it seems sensible to give the user that option if they are blessed with lots of computer power or lots of patience. Looking at some of the timing data, it looked like the differences in algorithms was significant, and so worth optimising if you want to make a lot of use of Pari. \n\nBTW, the source code in that package is the same as created by jdemeyer, and is not the latest upstream code as I write. But I chose not to change the source code - just spkg-install, so it will work properly on OpenSolaris. \n\nDave \nDave",
    "created_at": "2010-07-24T15:00:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79256",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:134" align="right">comment:134</div>

Replying to [@JohnCremona](#comment%3A133):
> What I had been planning to say about the spkg's name is:  

I would think it worth keeping the svn snapshot number in there at all times. Even for alpha releases, as it's obvious then if its based on a different version of the upstream source code. Those editing this ticket will be in no doubt if the source has changed or not. 

For actual packages in Sage, the Developers Guide says to have the date on SVN snapshots, but since we can get an actual number, that seems more sensible to me. Also, I've found if one puts a date, what often happens is someone updates the package and instead of putting .p0, then just change the date. At that point, the date bears no resemblance to what's in the upstream code on that date. 

Anyway, http://boxen.math.washington.edu/home/kirkby/patches/pari-2.4.3svn-12543.spkg 

will build properly on OpenSolaris. 

I managed to get a core dump when tuning it, but that's less of an issue. I will report that upstream. I've found Bill very helpful. I've just reported the CC/CFLAGS bug upstream, though have got no feedback yet. 

I can see tuning Pari is slow. I can build Pari in 33 seconds on this machine, but it was 24 minutes until I got a core dump when tuning. So I don't know how long tuning would take. But it seems sensible to give the user that option if they are blessed with lots of computer power or lots of patience. Looking at some of the timing data, it looked like the differences in algorithms was significant, and so worth optimising if you want to make a lot of use of Pari. 

BTW, the source code in that package is the same as created by jdemeyer, and is not the latest upstream code as I write. But I chose not to change the source code - just spkg-install, so it will work properly on OpenSolaris. 

Dave 
Dave



---

archive/issue_comments_079257.json:
```json
{
    "body": "<div id=\"comment:135\" align=\"right\">comment:135</div>\n\nI just noticed this error in spkg-install:\n\n```\ncp: cannot access /export/home/drkirkby/sage-4.5.2.alpha0/spkg/build/pari-2.4.3svn-12543/patches/files/get_dlld\n```\n\nThat's nothing I've touched - it appears in the previous version too. Seems like a patch that one tries to apply does not actually exist. \n\nDave",
    "created_at": "2010-07-24T15:09:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79257",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:135" align="right">comment:135</div>

I just noticed this error in spkg-install:

```
cp: cannot access /export/home/drkirkby/sage-4.5.2.alpha0/spkg/build/pari-2.4.3svn-12543/patches/files/get_dlld
```

That's nothing I've touched - it appears in the previous version too. Seems like a patch that one tries to apply does not actually exist. 

Dave



---

archive/issue_comments_079258.json:
```json
{
    "body": "Attachment: **[9343-improved-spkg-check-and-SPKG.txt](https://github.com/sagemath/sage/files/ticket9343/9343-improved-spkg-check-and-SPKG.txt)**\n\nMinor improvements to spkg-check. Correct list of dependancies in SPKG.txt - they are MPIR, readline and termcap.",
    "created_at": "2010-07-24T21:55:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79258",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

Attachment: **[9343-improved-spkg-check-and-SPKG.txt](https://github.com/sagemath/sage/files/ticket9343/9343-improved-spkg-check-and-SPKG.txt)**

Minor improvements to spkg-check. Correct list of dependancies in SPKG.txt - they are MPIR, readline and termcap.



---

archive/issue_comments_079259.json:
```json
{
    "body": "<div id=\"comment:136\" align=\"right\">comment:136</div>\n\nAs noted, I improved spkg-check a bit. I just overwrote the package here\n\nhttp://boxen.math.washington.edu/home/kirkby/patches/pari-2.4.3svn-12543.spkg\n\nSPKG.txt needs to have all the changes made put into the file. It previously said the dependancy was GMP, but in fact it depends on MPIR, termcap and readline. Luckily `spkg/standard/deps` does have the dependencies correctly listed.",
    "created_at": "2010-07-24T21:58:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79259",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:136" align="right">comment:136</div>

As noted, I improved spkg-check a bit. I just overwrote the package here

http://boxen.math.washington.edu/home/kirkby/patches/pari-2.4.3svn-12543.spkg

SPKG.txt needs to have all the changes made put into the file. It previously said the dependancy was GMP, but in fact it depends on MPIR, termcap and readline. Luckily `spkg/standard/deps` does have the dependencies correctly listed.



---

archive/issue_comments_079260.json:
```json
{
    "body": "Flattening of all extcode patches against sage-4.5.2.alpha0",
    "created_at": "2010-07-24T21:59:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79260",
    "user": "https://github.com/jdemeyer"
}
```

Flattening of all extcode patches against sage-4.5.2.alpha0



---

archive/issue_comments_079261.json:
```json
{
    "body": "<div id=\"comment:137\" align=\"right\">comment:137</div>\n\nAttachment: **[extcode_9343_combined3.patch.gz](https://github.com/sagemath/sage/files/ticket9343/extcode_9343_combined3.patch.gz)**\n\ndrkirkby: is there a reason you always put the \"-g\" flag with CFLAGS?  I assume it is a mistake, but I'm asking just in case it isn't.",
    "created_at": "2010-07-24T22:04:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79261",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:137" align="right">comment:137</div>

Attachment: **[extcode_9343_combined3.patch.gz](https://github.com/sagemath/sage/files/ticket9343/extcode_9343_combined3.patch.gz)**

drkirkby: is there a reason you always put the "-g" flag with CFLAGS?  I assume it is a mistake, but I'm asking just in case it isn't.



---

archive/issue_comments_079262.json:
```json
{
    "body": "<div id=\"comment:138\" align=\"right\">comment:138</div>\n\nReplying to [@jdemeyer](#comment%3A137):\n> drkirkby: is there a reason you always put the \"-g\" flag with CFLAGS?  I assume it is a mistake, but I'm asking just in case it isn't.\n\nIt was agreed long ago on sage-devel that packages would be built with debugging information by default, since it makes finding bugs a lot easier. I initially thought that was a bad idea, as it increases the size of the objects. But it is negligible, and it makes no difference to run-time, so I concede it is sensible. That's the reason for the -g\n\nSome software packages add -g anyway, in which case it could be removed, though I'm not sure its a good idea, since if the software changes that behaviour, we have lost the ability to easily debug problems. \n\nDave",
    "created_at": "2010-07-24T22:13:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79262",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:138" align="right">comment:138</div>

Replying to [@jdemeyer](#comment%3A137):
> drkirkby: is there a reason you always put the "-g" flag with CFLAGS?  I assume it is a mistake, but I'm asking just in case it isn't.

It was agreed long ago on sage-devel that packages would be built with debugging information by default, since it makes finding bugs a lot easier. I initially thought that was a bad idea, as it increases the size of the objects. But it is negligible, and it makes no difference to run-time, so I concede it is sensible. That's the reason for the -g

Some software packages add -g anyway, in which case it could be removed, though I'm not sure its a good idea, since if the software changes that behaviour, we have lost the ability to easily debug problems. 

Dave



---

archive/issue_comments_079263.json:
```json
{
    "body": "<div id=\"comment:139\" align=\"right\">comment:139</div>\n\nNew version of the PARI spkg: [http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3svn-12549.spkg](http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3svn-12549.spkg).\n\nRemoved the non-existent get_dlld patching.\nCleaned up patches/README.txt",
    "created_at": "2010-07-24T23:11:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79263",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:139" align="right">comment:139</div>

New version of the PARI spkg: [http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3svn-12549.spkg](http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3svn-12549.spkg).

Removed the non-existent get_dlld patching.
Cleaned up patches/README.txt



---

archive/issue_comments_079264.json:
```json
{
    "body": "<div id=\"comment:140\" align=\"right\">comment:140</div>\n\nBreaking news: I have succesfully built Sage 4.5.2.alpha0 from scratch with all the updates so far (without any trace of the old PARI package).  This means that no other spkg's have to be fixed.\n\nSo I think the TODO list reduces to:\n1. Fixing the remaining doctest failures.\n2. Testing on as many platforms as possible.\n3. Reviewing everything and cleaning up.\n\nI can help with the first and third of these, but not really the second.",
    "created_at": "2010-07-24T23:18:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79264",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:140" align="right">comment:140</div>

Breaking news: I have succesfully built Sage 4.5.2.alpha0 from scratch with all the updates so far (without any trace of the old PARI package).  This means that no other spkg's have to be fixed.

So I think the TODO list reduces to:
1. Fixing the remaining doctest failures.
2. Testing on as many platforms as possible.
3. Reviewing everything and cleaning up.

I can help with the first and third of these, but not really the second.



---

archive/issue_comments_079265.json:
```json
{
    "body": "<div id=\"comment:141\" align=\"right\">comment:141</div>\n\nReplying to [@jdemeyer](#comment%3A139):\n> New version of the PARI spkg: [http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3svn-12549.spkg](http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3svn-12549.spkg).\n> \n> Removed the non-existent get_dlld patching.\n> Cleaned up patches/README.txt\n\nI assumed you updated the source code, since the svn number is incremented. This unfortunately fails for me now\n\n```\n* Testing zn \tfor gp-sta..TIME=2\tfor gp-dyn..TIME=3\n+++ [BUG] Total bench for gp-sta is 164083\n+++ [BUG] Total bench for gp-dyn is 171336\n\nPROBLEMS WERE NOTED. The following files list them in diff format: \nDirectory: /export/home/drkirkby/sage-4.5.2.alpha0/spkg/build/pari-2.4.3svn-12549/src/Osolaris-ix86\n\tcompat-sta.dif\n\ttrans-sta.dif\n\tcompat-dyn.dif\n\ttrans-dyn.dif\nmake[1]: *** [test-all] Error 1\nmake[1]: Leaving directory `/export/home/drkirkby/sage-4.5.2.alpha0/spkg/build/pari-2.4.3svn-12549/src/Osolaris-ix86'\nmake: *** [test-all] Error 2\nPari failed the self-tests when running 'make test-all'\n*************************************\nError testing package ** pari-2.4.3svn-12549 **\n*************************************\n```\nThat is on a Sun Ultra 27 running OpenSolaris. Pari builds fine, but fails the self-tests. \n\nhttp://boxen.math.washington.edu/home/kirkby/patches/pari-2.4.3svn-12543.spkg passes all tests. Could the issue be that John's patches which stop a couple of the tests running, are no longer integrated? (I believe he added them as there is no database here, so some tests will fail). \n\nDave",
    "created_at": "2010-07-24T23:31:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79265",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:141" align="right">comment:141</div>

Replying to [@jdemeyer](#comment%3A139):
> New version of the PARI spkg: [http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3svn-12549.spkg](http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3svn-12549.spkg).
> 
> Removed the non-existent get_dlld patching.
> Cleaned up patches/README.txt

I assumed you updated the source code, since the svn number is incremented. This unfortunately fails for me now

```
* Testing zn 	for gp-sta..TIME=2	for gp-dyn..TIME=3
+++ [BUG] Total bench for gp-sta is 164083
+++ [BUG] Total bench for gp-dyn is 171336

PROBLEMS WERE NOTED. The following files list them in diff format: 
Directory: /export/home/drkirkby/sage-4.5.2.alpha0/spkg/build/pari-2.4.3svn-12549/src/Osolaris-ix86
	compat-sta.dif
	trans-sta.dif
	compat-dyn.dif
	trans-dyn.dif
make[1]: *** [test-all] Error 1
make[1]: Leaving directory `/export/home/drkirkby/sage-4.5.2.alpha0/spkg/build/pari-2.4.3svn-12549/src/Osolaris-ix86'
make: *** [test-all] Error 2
Pari failed the self-tests when running 'make test-all'
*************************************
Error testing package ** pari-2.4.3svn-12549 **
*************************************
```
That is on a Sun Ultra 27 running OpenSolaris. Pari builds fine, but fails the self-tests. 

http://boxen.math.washington.edu/home/kirkby/patches/pari-2.4.3svn-12543.spkg passes all tests. Could the issue be that John's patches which stop a couple of the tests running, are no longer integrated? (I believe he added them as there is no database here, so some tests will fail). 

Dave



---

archive/issue_comments_079266.json:
```json
{
    "body": "<div id=\"comment:142\" align=\"right\">comment:142</div>\n\n> http://boxen.math.washington.edu/home/kirkby/patches/pari-2.4.3svn-12543.spkg passes all tests. Could the issue be that John's patches which stop a couple of the tests running, are no longer integrated? (I believe he added them as there is no database here, so some tests will fail). \n\nNo, the problem is upstream.  Building PARI from SVN (outside of Sage, that is) now fails make test-all.  I am reverting to 12546, that seems to work.",
    "created_at": "2010-07-25T08:40:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79266",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:142" align="right">comment:142</div>

> http://boxen.math.washington.edu/home/kirkby/patches/pari-2.4.3svn-12543.spkg passes all tests. Could the issue be that John's patches which stop a couple of the tests running, are no longer integrated? (I believe he added them as there is no database here, so some tests will fail). 

No, the problem is upstream.  Building PARI from SVN (outside of Sage, that is) now fails make test-all.  I am reverting to 12546, that seems to work.



---

archive/issue_comments_079267.json:
```json
{
    "body": "<div id=\"comment:143\" align=\"right\">comment:143</div>\n\nReplying to [@jdemeyer](#comment%3A142):\n\n> No, the problem is upstream.  Building PARI from SVN (outside of Sage, that is) now fails make test-all.  I am reverting to 12546, that seems to work.\n\n`make test-all`\n\nwill always fail with just the upstream source unless some of the tests are disabled, since they rely on one or more databased that are not in Sage unless optional components are installed. \n\nDave",
    "created_at": "2010-07-25T08:56:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79267",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:143" align="right">comment:143</div>

Replying to [@jdemeyer](#comment%3A142):

> No, the problem is upstream.  Building PARI from SVN (outside of Sage, that is) now fails make test-all.  I am reverting to 12546, that seems to work.

`make test-all`

will always fail with just the upstream source unless some of the tests are disabled, since they rely on one or more databased that are not in Sage unless optional components are installed. 

Dave



---

archive/issue_comments_079268.json:
```json
{
    "body": "<div id=\"comment:144\" align=\"right\">comment:144</div>\n\nWorking version: [http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3.svn-12546.spkg](http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3.svn-12546.spkg).  The failures really are upstream, since PARI svn-12546 built outside of Sage passes all tests (note that I have installed the optional PARI databases).",
    "created_at": "2010-07-25T10:17:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79268",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:144" align="right">comment:144</div>

Working version: [http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3.svn-12546.spkg](http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3.svn-12546.spkg).  The failures really are upstream, since PARI svn-12546 built outside of Sage passes all tests (note that I have installed the optional PARI databases).



---

archive/issue_comments_079269.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n See #7736 (a bug this will fix), #8453 (last pari upgrade).\n \n See also #9591 and #9592 (other packages depending on PARI).\n+\n+See also #9595 (needed to fix doctests in qqbar.py)\n``````\n",
    "created_at": "2010-07-25T13:37:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79269",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
 See #7736 (a bug this will fix), #8453 (last pari upgrade).
 
 See also #9591 and #9592 (other packages depending on PARI).
+
+See also #9595 (needed to fix doctests in qqbar.py)
``````




---

archive/issue_comments_079270.json:
```json
{
    "body": "Fix RR(0.0), clean up",
    "created_at": "2010-07-26T17:54:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79270",
    "user": "https://github.com/jdemeyer"
}
```

Fix RR(0.0), clean up



---

archive/issue_comments_079271.json:
```json
{
    "body": "<div id=\"comment:146\" align=\"right\">comment:146</div>\n\nAttachment: **[9343_various1.patch.gz](https://github.com/sagemath/sage/files/ticket9343/9343_various1.patch.gz)**\n\nThe last patch fixes the tanh() issue, it was caused by RR(0.0)._pari_() creating an invalid GEN (it took me a very long time to figure this out).\n\nI added a debug() function to gen objects calling dbgGEN() from the pari library, example:\n\n```\nsage: pari('[1/2, 1.0*I]').debug()  # random addresses\n[&=0000000004c5f010] VEC(lg=3):2200000000000003 0000000004c5eff8 0000000004c5efb0\n  1st component = [&=0000000004c5eff8] FRAC(lg=3):0800000000000003 0000000004c5efe0 0000000004c5efc8\n    num = [&=0000000004c5efe0] INT(lg=3):0200000000000003 (+,lgefint=3):4000000000000003 0000000000000001\n    den = [&=0000000004c5efc8] INT(lg=3):0200000000000003 (+,lgefint=3):4000000000000003 0000000000000002\n  2nd component = [&=0000000004c5efb0] COMPLEX(lg=3):0c00000000000003 00007fae8a2eb840 0000000004c5ef90\n    real = gen_0\n    imag = [&=0000000004c5ef90] REAL(lg=4):0400000000000004 (+,expo=0):6000000000000000 8000000000000000 0000000000000000\n```\n\nApart from that, a lot of cleanups, and some more doctests.\n\nAs far as I can tell, everything works now on my system, apart from some doctest failures in elliptic_curves (again, I do not plan to look at this).",
    "created_at": "2010-07-26T18:00:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79271",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:146" align="right">comment:146</div>

Attachment: **[9343_various1.patch.gz](https://github.com/sagemath/sage/files/ticket9343/9343_various1.patch.gz)**

The last patch fixes the tanh() issue, it was caused by RR(0.0)._pari_() creating an invalid GEN (it took me a very long time to figure this out).

I added a debug() function to gen objects calling dbgGEN() from the pari library, example:

```
sage: pari('[1/2, 1.0*I]').debug()  # random addresses
[&=0000000004c5f010] VEC(lg=3):2200000000000003 0000000004c5eff8 0000000004c5efb0
  1st component = [&=0000000004c5eff8] FRAC(lg=3):0800000000000003 0000000004c5efe0 0000000004c5efc8
    num = [&=0000000004c5efe0] INT(lg=3):0200000000000003 (+,lgefint=3):4000000000000003 0000000000000001
    den = [&=0000000004c5efc8] INT(lg=3):0200000000000003 (+,lgefint=3):4000000000000003 0000000000000002
  2nd component = [&=0000000004c5efb0] COMPLEX(lg=3):0c00000000000003 00007fae8a2eb840 0000000004c5ef90
    real = gen_0
    imag = [&=0000000004c5ef90] REAL(lg=4):0400000000000004 (+,expo=0):6000000000000000 8000000000000000 0000000000000000
```

Apart from that, a lot of cleanups, and some more doctests.

As far as I can tell, everything works now on my system, apart from some doctest failures in elliptic_curves (again, I do not plan to look at this).



---

archive/issue_comments_079272.json:
```json
{
    "body": "Attachment: **[9343_remove_ell_doctests.patch.gz](https://github.com/sagemath/sage/files/ticket9343/9343_remove_ell_doctests.patch.gz)**\n\nDisables failing doctests in elliptic_curves",
    "created_at": "2010-07-26T21:09:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79272",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[9343_remove_ell_doctests.patch.gz](https://github.com/sagemath/sage/files/ticket9343/9343_remove_ell_doctests.patch.gz)**

Disables failing doctests in elliptic_curves



---

archive/issue_comments_079273.json:
```json
{
    "body": "<div id=\"comment:147\" align=\"right\">comment:147</div>\n\nI believe now we are ready to test this enormous patch.  Since there are 5 spkg's involved (sage, extcode, pari, genus2reduction, lcalc), the only sensible way to test this is to do a complete build from scratch.  To make that process easier, I have uploaded a full Sage distribution with the patches applied to [http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.alpha0-9343.tar](http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.alpha0-9343.tar).  Just doing `make` should be enough to build it.\n\nThe following tickets are included:\n* #9343\n* #9591\n* #9592\n* #9595\n\nI invite you all to test it!",
    "created_at": "2010-07-26T21:32:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79273",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:147" align="right">comment:147</div>

I believe now we are ready to test this enormous patch.  Since there are 5 spkg's involved (sage, extcode, pari, genus2reduction, lcalc), the only sensible way to test this is to do a complete build from scratch.  To make that process easier, I have uploaded a full Sage distribution with the patches applied to [http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.alpha0-9343.tar](http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.alpha0-9343.tar).  Just doing `make` should be enough to build it.

The following tickets are included:
* #9343
* #9591
* #9592
* #9595

I invite you all to test it!



---

archive/issue_comments_079274.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,7 @@\n See #7736 (a bug this will fix), #8453 (last pari upgrade).\n \n-See also #9591 and #9592 (other packages depending on PARI).\n+See also #9591 (genus2reduction) and #9592 (lcalc), other packages fixed to work with PARI 2.4.3.\n \n-See also #9595 (needed to fix doctests in qqbar.py)\n+See also #9595, that patch is needed to fix doctests in qqbar.py.\n+\n+Download a complete Sage distribution with all the patches applied from [http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.alpha0-9343.tar](http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.alpha0-9343.tar)\n``````\n",
    "created_at": "2010-07-26T21:36:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79274",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,7 @@
 See #7736 (a bug this will fix), #8453 (last pari upgrade).
 
-See also #9591 and #9592 (other packages depending on PARI).
+See also #9591 (genus2reduction) and #9592 (lcalc), other packages fixed to work with PARI 2.4.3.
 
-See also #9595 (needed to fix doctests in qqbar.py)
+See also #9595, that patch is needed to fix doctests in qqbar.py.
+
+Download a complete Sage distribution with all the patches applied from [http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.alpha0-9343.tar](http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.alpha0-9343.tar)
``````




---

archive/issue_events_118514.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-07-26T21:36:09Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "subject": "https://github.com/jdemeyer",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9343#event-118514"
}
```



---

archive/issue_comments_079275.json:
```json
{
    "body": "Fix pari(...).sizebyte(), add pari(...).sizeword()",
    "created_at": "2010-07-27T07:47:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79275",
    "user": "https://github.com/jdemeyer"
}
```

Fix pari(...).sizebyte(), add pari(...).sizeword()



---

archive/issue_comments_079276.json:
```json
{
    "body": "Attachment: **[9343_gsize.patch.gz](https://github.com/sagemath/sage/files/ticket9343/9343_gsize.patch.gz)**\n\nAttachment: **[sagelib_9343_combined4.patch.gz](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343_combined4.patch.gz)**\n\nFlattening of all the above sagelib patches",
    "created_at": "2010-07-27T07:58:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79276",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[9343_gsize.patch.gz](https://github.com/sagemath/sage/files/ticket9343/9343_gsize.patch.gz)**

Attachment: **[sagelib_9343_combined4.patch.gz](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343_combined4.patch.gz)**

Flattening of all the above sagelib patches



---

archive/issue_comments_079277.json:
```json
{
    "body": "<div id=\"comment:149\" align=\"right\">comment:149</div>\n\nReplying to [@jdemeyer](#comment%3A147):\n> I believe now we are ready to test this enormous patch.  Since there are 5 spkg's involved (sage, extcode, pari, genus2reduction, lcalc), the only sensible way to test this is to do a complete build from scratch.  To make that process easier, I have uploaded a full Sage distribution with the patches applied to [http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.alpha0-9343.tar](http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.alpha0-9343.tar).  Just doing `make` should be enough to build it.\n\nThis built OK on Solaris 10 (SPARC) using t2.math. A quick check showed Sage functioned - i.e. did not do something stupid like segfault. I am running ` make ptestlong`\n\nDave",
    "created_at": "2010-07-27T11:57:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79277",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:149" align="right">comment:149</div>

Replying to [@jdemeyer](#comment%3A147):
> I believe now we are ready to test this enormous patch.  Since there are 5 spkg's involved (sage, extcode, pari, genus2reduction, lcalc), the only sensible way to test this is to do a complete build from scratch.  To make that process easier, I have uploaded a full Sage distribution with the patches applied to [http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.alpha0-9343.tar](http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.alpha0-9343.tar).  Just doing `make` should be enough to build it.

This built OK on Solaris 10 (SPARC) using t2.math. A quick check showed Sage functioned - i.e. did not do something stupid like segfault. I am running ` make ptestlong`

Dave



---

archive/issue_comments_079278.json:
```json
{
    "body": "<div id=\"comment:150\" align=\"right\">comment:150</div>\n\nI am testing on a 32-bit Linux system.  The build went fine, there seem to be a few doctest errors though: we might need to special-case 32 vs. 64 bits in some places.\n\nNow that sage-4.5.2alpha1 is released, I will check whether the patches still apply properly.",
    "created_at": "2010-07-27T12:36:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79278",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:150" align="right">comment:150</div>

I am testing on a 32-bit Linux system.  The build went fine, there seem to be a few doctest errors though: we might need to special-case 32 vs. 64 bits in some places.

Now that sage-4.5.2alpha1 is released, I will check whether the patches still apply properly.



---

archive/issue_comments_079279.json:
```json
{
    "body": "<div id=\"comment:151\" align=\"right\">comment:151</div>\n\nGreat work Jeroen.  I am testing on a 64-bit Linux system and will report back (but not very soon, I am in a hotel inNew Jersey and will not be back till late this evening Eastern Time).\n\nShall we suggest via sage-release that after 4,5,2 is out, a whole release is devoted to this upgrade?  It makes sense to me.  If you agree, do it.",
    "created_at": "2010-07-27T12:44:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79279",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:151" align="right">comment:151</div>

Great work Jeroen.  I am testing on a 64-bit Linux system and will report back (but not very soon, I am in a hotel inNew Jersey and will not be back till late this evening Eastern Time).

Shall we suggest via sage-release that after 4,5,2 is out, a whole release is devoted to this upgrade?  It makes sense to me.  If you agree, do it.



---

archive/issue_comments_079280.json:
```json
{
    "body": "<div id=\"comment:152\" align=\"right\">comment:152</div>\n\nReplying to [@JohnCremona](#comment%3A151):\n> Shall we suggest via sage-release that after 4,5,2 is out, a whole release is devoted to this upgrade?  It makes sense to me.  If you agree, do it.\n\nExcellent idea.  I especially like it because there are so many things depending on PARI.  I expect for example several doctest failures in the 4.5.2alpha0 -> 4.5.2alpha1 upgrade.",
    "created_at": "2010-07-27T12:51:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79280",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:152" align="right">comment:152</div>

Replying to [@JohnCremona](#comment%3A151):
> Shall we suggest via sage-release that after 4,5,2 is out, a whole release is devoted to this upgrade?  It makes sense to me.  If you agree, do it.

Excellent idea.  I especially like it because there are so many things depending on PARI.  I expect for example several doctest failures in the 4.5.2alpha0 -> 4.5.2alpha1 upgrade.



---

archive/issue_comments_079281.json:
```json
{
    "body": "<div id=\"comment:153\" align=\"right\">comment:153</div>\n\nThere were several failures on  t2.math.washington.edu. I've put details of the hardware here, since over time hardware changes, so anyone looking back in a couple of years will be able to know the exact conditions. \n\n## Hardware and software configuration of t2.math.washington.edu\n* [Sun SPARC Enterprise T5240 Server](http://www.oracle.com/us/products/servers-storage/servers/sparc-enterprise/t-series/031584.htm) \n* 2 x 1167 MHz [UltraSPARC T2 PLUS](http://www.oracle.com/us/products/servers-storage/microelectronics/031459.htm) processors. (16 cores and 128 hardware threads in total). \n* 32 GB RAM\n* No swap devices configured. \n* Solaris 10 update 7 (5/09)\n* gcc 4.4.1 configured to use the Sun linker and Sun assembler. \n* Sage was built in on a local ZFS file system as a 32-bit application.\n\nSee the file Solaris-10-SPARC-ptestlong-failures.log\n\n```\nThe following tests failed:\n\n        sage -t  -long local/lib/python2.6/site-packages/sagenb-0.8.1-py2.6.egg/sagenb/misc/sageinspect.py # 1 doctests failed\n        sage -t  -long devel/sage/sage/lfunctions/dokchitser.py # 4 doctests failed\n        sage -t  -long devel/sage/sage/symbolic/expression.pyx # 1 doctests failed\n        sage -t  -long devel/sage/sage/geometry/toric_lattice_element.pyx # 1 doctests failed\n        sage -t  -long devel/sage/sage/geometry/cone.py # 1 doctests failed\n        sage -t  -long devel/sage/sage/misc/randstate.pyx # 15 doctests failed\n        sage -t  -long devel/sage/sage/libs/pari/gen.pyx # 11 doctests failed\n        sage -t  -long devel/sage/sage/schemes/elliptic_curves/ell_number_field.py # 1 doctests failed\n        sage -t  -long devel/sage/sage/rings/residue_field.pyx # 1 doctests failed\n        sage -t  -long devel/sage/sage/rings/number_field/class_group.py # 2 doctests failed\n        sage -t  -long devel/sage/sage/rings/polynomial/multi_polynomial_element.py # 1 doctests failed\n        sage -t  -long devel/sage/sage/rings/polynomial/polynomial_quotient_ring.py # 2 doctests failed\n        sage -t  -long devel/sage/sage/rings/qqbar.py # 1 doctests failed\n        sage -t  -long devel/sage/sage/rings/number_field/number_field.py # 2 doctests failed\n----------------------------------------------------------------------\nTotal time for all tests: 6622.9 seconds\n```",
    "created_at": "2010-07-27T15:25:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79281",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:153" align="right">comment:153</div>

There were several failures on  t2.math.washington.edu. I've put details of the hardware here, since over time hardware changes, so anyone looking back in a couple of years will be able to know the exact conditions. 

## Hardware and software configuration of t2.math.washington.edu
* [Sun SPARC Enterprise T5240 Server](http://www.oracle.com/us/products/servers-storage/servers/sparc-enterprise/t-series/031584.htm) 
* 2 x 1167 MHz [UltraSPARC T2 PLUS](http://www.oracle.com/us/products/servers-storage/microelectronics/031459.htm) processors. (16 cores and 128 hardware threads in total). 
* 32 GB RAM
* No swap devices configured. 
* Solaris 10 update 7 (5/09)
* gcc 4.4.1 configured to use the Sun linker and Sun assembler. 
* Sage was built in on a local ZFS file system as a 32-bit application.

See the file Solaris-10-SPARC-ptestlong-failures.log

```
The following tests failed:

        sage -t  -long local/lib/python2.6/site-packages/sagenb-0.8.1-py2.6.egg/sagenb/misc/sageinspect.py # 1 doctests failed
        sage -t  -long devel/sage/sage/lfunctions/dokchitser.py # 4 doctests failed
        sage -t  -long devel/sage/sage/symbolic/expression.pyx # 1 doctests failed
        sage -t  -long devel/sage/sage/geometry/toric_lattice_element.pyx # 1 doctests failed
        sage -t  -long devel/sage/sage/geometry/cone.py # 1 doctests failed
        sage -t  -long devel/sage/sage/misc/randstate.pyx # 15 doctests failed
        sage -t  -long devel/sage/sage/libs/pari/gen.pyx # 11 doctests failed
        sage -t  -long devel/sage/sage/schemes/elliptic_curves/ell_number_field.py # 1 doctests failed
        sage -t  -long devel/sage/sage/rings/residue_field.pyx # 1 doctests failed
        sage -t  -long devel/sage/sage/rings/number_field/class_group.py # 2 doctests failed
        sage -t  -long devel/sage/sage/rings/polynomial/multi_polynomial_element.py # 1 doctests failed
        sage -t  -long devel/sage/sage/rings/polynomial/polynomial_quotient_ring.py # 2 doctests failed
        sage -t  -long devel/sage/sage/rings/qqbar.py # 1 doctests failed
        sage -t  -long devel/sage/sage/rings/number_field/number_field.py # 2 doctests failed
----------------------------------------------------------------------
Total time for all tests: 6622.9 seconds
```



---

archive/issue_comments_079282.json:
```json
{
    "body": "Attachment: **[Solaris-10-SPARC-ptestlong-failures.log](https://github.com/sagemath/sage/files/ticket9343/Solaris-10-SPARC-ptestlong-failures.log)**\n\nFailures observed on a Sun T5240 (SPARC processors) running Solaris 10 update 7.",
    "created_at": "2010-07-27T15:28:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79282",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

Attachment: **[Solaris-10-SPARC-ptestlong-failures.log](https://github.com/sagemath/sage/files/ticket9343/Solaris-10-SPARC-ptestlong-failures.log)**

Failures observed on a Sun T5240 (SPARC processors) running Solaris 10 update 7.



---

archive/issue_comments_079283.json:
```json
{
    "body": "<div id=\"comment:154\" align=\"right\">comment:154</div>\n\nThanks for the test.  I will now upgrade to sage-4.5.2alpha1, do some tests on my own system and in the mean time fix the SPARC failures.  Note that some are simply bugs in sage-4.5.2alpha0 (see the sage-release mailing list).\n\nFor the moment, we don't really need more tests until I have put up sage-4.5.2alpha1-9343.",
    "created_at": "2010-07-27T19:43:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79283",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:154" align="right">comment:154</div>

Thanks for the test.  I will now upgrade to sage-4.5.2alpha1, do some tests on my own system and in the mean time fix the SPARC failures.  Note that some are simply bugs in sage-4.5.2alpha0 (see the sage-release mailing list).

For the moment, we don't really need more tests until I have put up sage-4.5.2alpha1-9343.



---

archive/issue_comments_079284.json:
```json
{
    "body": "<div id=\"comment:155\" align=\"right\">comment:155</div>\n\nReplying to [@jdemeyer](#comment%3A154):\n> Thanks for the test.  I will now upgrade to sage-4.5.2alpha1, do some tests on my own system and in the mean time fix the SPARC failures.  Note that some are simply bugs in sage-4.5.2alpha0 (see the sage-release mailing list).\n> \n> For the moment, we don't really need more tests until I have put up sage-4.5.2alpha1-9343.\n\nFair enough, but I may as well report that all was good on 64-bit ubuntu except \n\n```\n\n        sage -t  -long local/lib/python2.6/site-packages/sagenb-0.8.1-py2.6.egg/sagenb/misc/sageinspect.py # 1 doctests failed\n```\nwhich seems irrelevant.",
    "created_at": "2010-07-27T22:06:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79284",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:155" align="right">comment:155</div>

Replying to [@jdemeyer](#comment%3A154):
> Thanks for the test.  I will now upgrade to sage-4.5.2alpha1, do some tests on my own system and in the mean time fix the SPARC failures.  Note that some are simply bugs in sage-4.5.2alpha0 (see the sage-release mailing list).
> 
> For the moment, we don't really need more tests until I have put up sage-4.5.2alpha1-9343.

Fair enough, but I may as well report that all was good on 64-bit ubuntu except 

```

        sage -t  -long local/lib/python2.6/site-packages/sagenb-0.8.1-py2.6.egg/sagenb/misc/sageinspect.py # 1 doctests failed
```
which seems irrelevant.



---

archive/issue_comments_079285.json:
```json
{
    "body": "<div id=\"comment:156\" align=\"right\">comment:156</div>\n\nReplying to [@JohnCremona](#comment%3A155):\n> Replying to [@jdemeyer](#comment%3A154):\n> > For the moment, we don't really need more tests until I have put up sage-4.5.2alpha1-9343.\n> \n> \n> Fair enough, but I may as well report that all was good on 64-bit ubuntu except \n\n\n```\n\n        sage -t  -long local/lib/python2.6/site-packages/sagenb-0.8.1-py2.6.egg/sagenb/misc/sageinspect.py # 1 doctests failed\n```\n> which seems irrelevant.\n\nThis is also a 4.5.2.alpha0 bug and fixed in alpha1 (SageNB 0.8.2).",
    "created_at": "2010-07-28T20:05:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79285",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:156" align="right">comment:156</div>

Replying to [@JohnCremona](#comment%3A155):
> Replying to [@jdemeyer](#comment%3A154):
> > For the moment, we don't really need more tests until I have put up sage-4.5.2alpha1-9343.
> 
> 
> Fair enough, but I may as well report that all was good on 64-bit ubuntu except 


```

        sage -t  -long local/lib/python2.6/site-packages/sagenb-0.8.1-py2.6.egg/sagenb/misc/sageinspect.py # 1 doctests failed
```
> which seems irrelevant.

This is also a 4.5.2.alpha0 bug and fixed in alpha1 (SageNB 0.8.2).



---

archive/issue_comments_079286.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,4 +4,4 @@\n \n See also #9595, that patch is needed to fix doctests in qqbar.py.\n \n-Download a complete Sage distribution with all the patches applied from [http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.alpha0-9343.tar](http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.alpha0-9343.tar)\n+Download a complete Sage distribution with all the patches applied from [http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.alpha1-9343.tar](http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.alpha1-9343.tar)\n``````\n",
    "created_at": "2010-07-29T08:28:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79286",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,4 +4,4 @@
 
 See also #9595, that patch is needed to fix doctests in qqbar.py.
 
-Download a complete Sage distribution with all the patches applied from [http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.alpha0-9343.tar](http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.alpha0-9343.tar)
+Download a complete Sage distribution with all the patches applied from [http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.alpha1-9343.tar](http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.alpha1-9343.tar)
``````




---

archive/issue_comments_079287.json:
```json
{
    "body": "<div id=\"comment:157\" align=\"right\">comment:157</div>\n\nNew version to be tested: [http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.alpha1-9343.tar](http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.alpha1-9343.tar).  I am testing it on 32-bit Linux, 64-bit Linux and 64-bit OS X.",
    "created_at": "2010-07-29T08:28:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79287",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:157" align="right">comment:157</div>

New version to be tested: [http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.alpha1-9343.tar](http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.alpha1-9343.tar).  I am testing it on 32-bit Linux, 64-bit Linux and 64-bit OS X.



---

archive/issue_events_118515.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-07-29T14:45:50Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "milestone_number": null,
    "milestone_title": "sage-4.5.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9343#event-118515"
}
```



---

archive/issue_events_118516.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-07-29T14:45:50Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "milestone_number": null,
    "milestone_title": "sage-4.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9343#event-118516"
}
```



---

archive/issue_comments_079288.json:
```json
{
    "body": "Attachment: **[9343_fix32bit.patch.gz](https://github.com/sagemath/sage/files/ticket9343/9343_fix32bit.patch.gz)**\n\nFixes doctest failures on 32-bit machines",
    "created_at": "2010-07-29T21:39:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79288",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[9343_fix32bit.patch.gz](https://github.com/sagemath/sage/files/ticket9343/9343_fix32bit.patch.gz)**

Fixes doctest failures on 32-bit machines



---

archive/issue_comments_079289.json:
```json
{
    "body": "<div id=\"comment:159\" align=\"right\">comment:159</div>\n\nWill [part of] the PARI upgrade fix #9659?  I'm wondering whether to keep #9659 as a blocker for 4.5.2.",
    "created_at": "2010-08-01T22:50:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79289",
    "user": "https://github.com/qed777"
}
```

<div id="comment:159" align="right">comment:159</div>

Will [part of] the PARI upgrade fix #9659?  I'm wondering whether to keep #9659 as a blocker for 4.5.2.



---

archive/issue_comments_079290.json:
```json
{
    "body": "<div id=\"comment:160\" align=\"right\">comment:160</div>\n\nReplying to [@qed777](#comment%3A159):\n> Will [part of] the PARI upgrade fix #9659?\n\nI don't know but probably not.  So I would keep #9659 seperate from this.",
    "created_at": "2010-08-02T07:21:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79290",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:160" align="right">comment:160</div>

Replying to [@qed777](#comment%3A159):
> Will [part of] the PARI upgrade fix #9659?

I don't know but probably not.  So I would keep #9659 seperate from this.



---

archive/issue_comments_079291.json:
```json
{
    "body": "<div id=\"comment:161\" align=\"right\">comment:161</div>\n\nI consider this ticket to be essentially finished.  There are just a few elliptic curve doctests marked with \"9343 not tested\" which should be fixed (John?).  Other than that, I would not make any further changes to this ticket.",
    "created_at": "2010-08-02T09:56:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79291",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:161" align="right">comment:161</div>

I consider this ticket to be essentially finished.  There are just a few elliptic curve doctests marked with "9343 not tested" which should be fixed (John?).  Other than that, I would not make any further changes to this ticket.



---

archive/issue_comments_079292.json:
```json
{
    "body": "<div id=\"comment:162\" align=\"right\">comment:162</div>\n\nReplying to [@jdemeyer](#comment%3A161):\n> I consider this ticket to be essentially finished.  There are just a few elliptic curve doctests marked with \"9343 not tested\" which should be fixed (John?).  Other than that, I would not make any further changes to this ticket.\n\nCan you make a list of these?  Last time I looked the only ones were in heegner.py, and I do not know what the problem is with those.",
    "created_at": "2010-08-02T11:53:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79292",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:162" align="right">comment:162</div>

Replying to [@jdemeyer](#comment%3A161):
> I consider this ticket to be essentially finished.  There are just a few elliptic curve doctests marked with "9343 not tested" which should be fixed (John?).  Other than that, I would not make any further changes to this ticket.

Can you make a list of these?  Last time I looked the only ones were in heegner.py, and I do not know what the problem is with those.



---

archive/issue_comments_079293.json:
```json
{
    "body": "<div id=\"comment:163\" align=\"right\">comment:163</div>\n\nReplying to [@JohnCremona](#comment%3A162):\n> Can you make a list of these?  Last time I looked the only ones were in heegner.py, and I do not know what the problem is with those.\n\nLook at this patch: [https://github.com/sagemath/sage/files/ticket9343/9343_remove_ell_doctests.patch.gz](https://github.com/sagemath/sage/files/ticket9343/9343_remove_ell_doctests.patch.gz).  Just invert that patch: in a shell, in $SAGE_ROOT/devel/sage, do:\n\n```\npatch -p1 --reverse <9343_remove_ell_doctests.patch\n```",
    "created_at": "2010-08-02T12:06:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79293",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:163" align="right">comment:163</div>

Replying to [@JohnCremona](#comment%3A162):
> Can you make a list of these?  Last time I looked the only ones were in heegner.py, and I do not know what the problem is with those.

Look at this patch: [https://github.com/sagemath/sage/files/ticket9343/9343_remove_ell_doctests.patch.gz](https://github.com/sagemath/sage/files/ticket9343/9343_remove_ell_doctests.patch.gz).  Just invert that patch: in a shell, in $SAGE_ROOT/devel/sage, do:

```
patch -p1 --reverse <9343_remove_ell_doctests.patch
```



---

archive/issue_comments_079294.json:
```json
{
    "body": "<div id=\"comment:164\" align=\"right\">comment:164</div>\n\nOK, so apart from heegner.py there's just one other thing.  A different LLL reduced basis would give different points in that example, that would be harmless. No time now...",
    "created_at": "2010-08-02T12:39:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79294",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:164" align="right">comment:164</div>

OK, so apart from heegner.py there's just one other thing.  A different LLL reduced basis would give different points in that example, that would be harmless. No time now...



---

archive/issue_comments_079295.json:
```json
{
    "body": "Attachment: **[sagelib_9343_combined5.patch.gz](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343_combined5.patch.gz)**\n\nCombined patch against sage-4.5.2.rc1",
    "created_at": "2010-08-05T20:23:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79295",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[sagelib_9343_combined5.patch.gz](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343_combined5.patch.gz)**

Combined patch against sage-4.5.2.rc1



---

archive/issue_comments_079296.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,11 @@\n See #7736 (a bug this will fix), #8453 (last pari upgrade).\n \n-See also #9591 (genus2reduction) and #9592 (lcalc), other packages fixed to work with PARI 2.4.3.\n+* Download the new pari spkg from [http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3.svn-12577.spkg](http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3.svn-12577.spkg)\n+* For the genus2reduction spkg, see #9591\n+* For the lcalc spkg, see #9592\n+* There is a small dependency: #9595 is needed to fix all doctests.\n+* Download a complete sage distribution with patches #9343, #9591, #9592, #9595 applied from [http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.rc1.newpari.v0.tar](http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.rc1.newpari.v0.tar)\n \n-See also #9595, that patch is needed to fix doctests in qqbar.py.\n-\n-Download a complete Sage distribution with all the patches applied from [http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.alpha1-9343.tar](http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.alpha1-9343.tar)\n+TODO:\n+* Fix doctests marked with \"9343 not tested\" in elliptic_curves/heegner.py and elliptic_curves/ell_rational_field.py\n+* Get somebody to review this :-)\n``````\n",
    "created_at": "2010-08-05T21:13:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79296",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,11 @@
 See #7736 (a bug this will fix), #8453 (last pari upgrade).
 
-See also #9591 (genus2reduction) and #9592 (lcalc), other packages fixed to work with PARI 2.4.3.
+* Download the new pari spkg from [http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3.svn-12577.spkg](http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3.svn-12577.spkg)
+* For the genus2reduction spkg, see #9591
+* For the lcalc spkg, see #9592
+* There is a small dependency: #9595 is needed to fix all doctests.
+* Download a complete sage distribution with patches #9343, #9591, #9592, #9595 applied from [http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.rc1.newpari.v0.tar](http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.rc1.newpari.v0.tar)
 
-See also #9595, that patch is needed to fix doctests in qqbar.py.
-
-Download a complete Sage distribution with all the patches applied from [http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.alpha1-9343.tar](http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.alpha1-9343.tar)
+TODO:
+* Fix doctests marked with "9343 not tested" in elliptic_curves/heegner.py and elliptic_curves/ell_rational_field.py
+* Get somebody to review this :-)
``````




---

archive/issue_comments_079297.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,7 +4,13 @@\n * For the genus2reduction spkg, see #9591\n * For the lcalc spkg, see #9592\n * There is a small dependency: #9595 is needed to fix all doctests.\n-* Download a complete sage distribution with patches #9343, #9591, #9592, #9595 applied from [http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.rc1.newpari.v0.tar](http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.rc1.newpari.v0.tar)\n+\n+You can download a complete patched sage distribution from [http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.rc1.newpari.v0.tar](http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.rc1.newpari.v0.tar)\n+This contains:\n+* the new pari, genus2reduction, lcalc spkg's\n+* all extcode patches from #9343\n+* patch #9595\n+* sagelib patch [sagelib_9343_combined5.patch](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343_combined5.patch.gz)\n \n TODO:\n * Fix doctests marked with \"9343 not tested\" in elliptic_curves/heegner.py and elliptic_curves/ell_rational_field.py\n``````\n",
    "created_at": "2010-08-06T09:10:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79297",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,7 +4,13 @@
 * For the genus2reduction spkg, see #9591
 * For the lcalc spkg, see #9592
 * There is a small dependency: #9595 is needed to fix all doctests.
-* Download a complete sage distribution with patches #9343, #9591, #9592, #9595 applied from [http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.rc1.newpari.v0.tar](http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.rc1.newpari.v0.tar)
+
+You can download a complete patched sage distribution from [http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.rc1.newpari.v0.tar](http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.rc1.newpari.v0.tar)
+This contains:
+* the new pari, genus2reduction, lcalc spkg's
+* all extcode patches from #9343
+* patch #9595
+* sagelib patch [sagelib_9343_combined5.patch](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343_combined5.patch.gz)
 
 TODO:
 * Fix doctests marked with "9343 not tested" in elliptic_curves/heegner.py and elliptic_curves/ell_rational_field.py
``````




---

archive/issue_comments_079298.json:
```json
{
    "body": "<div id=\"comment:167\" align=\"right\">comment:167</div>\n\nI updated to PARI svn 12577 (some more bugs have been fixed), did a long doctest on a 32-bit and a 64-bit Intel Linux system.  There were a few failures appearing, I will add a patch soon (this patch is not included in the sage distribution [http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.rc1.newpari.v0.tar](http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.rc1.newpari.v0.tar))",
    "created_at": "2010-08-06T09:14:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79298",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:167" align="right">comment:167</div>

I updated to PARI svn 12577 (some more bugs have been fixed), did a long doctest on a 32-bit and a 64-bit Intel Linux system.  There were a few failures appearing, I will add a patch soon (this patch is not included in the sage distribution [http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.rc1.newpari.v0.tar](http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.rc1.newpari.v0.tar))



---

archive/issue_comments_079299.json:
```json
{
    "body": "Needed to fix doctests appearing because of PARI svn-12577",
    "created_at": "2010-08-06T09:15:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79299",
    "user": "https://github.com/jdemeyer"
}
```

Needed to fix doctests appearing because of PARI svn-12577



---

archive/issue_comments_079300.json:
```json
{
    "body": "<div id=\"comment:168\" align=\"right\">comment:168</div>\n\nAttachment: **[9343_weber.patch.gz](https://github.com/sagemath/sage/files/ticket9343/9343_weber.patch.gz)**\n\nReplying to [@jdemeyer](#comment%3A167):\n> I updated to PARI svn 12577 (some more bugs have been fixed), did a long doctest on a 32-bit and a 64-bit Intel Linux system.  There were a few failures appearing, I will add a patch soon (this patch is not included in the sage distribution [http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.rc1.newpari.v0.tar](http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.rc1.newpari.v0.tar))\n\nWith the [Weber patch](https://github.com/sagemath/sage/files/ticket9343/9343_weber.patch.gz) applied, all long tests pass on Ubuntu 9.04 x86 (Pentium 4 Prescott, gcc 4.3.3, native code; parallel build from scratch; no explicit/extra optimization specified).\n\n(Note that trac does *not* send notifications for file uploads.)",
    "created_at": "2010-08-06T12:24:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79300",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:168" align="right">comment:168</div>

Attachment: **[9343_weber.patch.gz](https://github.com/sagemath/sage/files/ticket9343/9343_weber.patch.gz)**

Replying to [@jdemeyer](#comment%3A167):
> I updated to PARI svn 12577 (some more bugs have been fixed), did a long doctest on a 32-bit and a 64-bit Intel Linux system.  There were a few failures appearing, I will add a patch soon (this patch is not included in the sage distribution [http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.rc1.newpari.v0.tar](http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.rc1.newpari.v0.tar))

With the [Weber patch](https://github.com/sagemath/sage/files/ticket9343/9343_weber.patch.gz) applied, all long tests pass on Ubuntu 9.04 x86 (Pentium 4 Prescott, gcc 4.3.3, native code; parallel build from scratch; no explicit/extra optimization specified).

(Note that trac does *not* send notifications for file uploads.)



---

archive/issue_comments_079301.json:
```json
{
    "body": "<div id=\"comment:169\" align=\"right\">comment:169</div>\n\nReplying to [@jdemeyer](#comment%3A167):\n> I updated to PARI svn 12577 (some more bugs have been fixed), did a long doctest on a 32-bit and a 64-bit Intel Linux system.  There were a few failures appearing, I will add a patch soon (this patch is not included in the sage distribution [http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.rc1.newpari.v0.tar](http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.rc1.newpari.v0.tar))\n\nWhat concerns me, is all this updating of svn. Sure some bugs might be fixed, but others are getting introduced. It would be nice if there was a stable version. Every time you update, so the testing needs to be done again. There was an earlier case I evaluated which it was ok, then someone updated and it was broken. \n\nThere's no point keep testing the code, if the source gets updated. \n\nPersonally, I'd revert to the svn which underwent a fair amount of testing.",
    "created_at": "2010-08-07T11:52:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79301",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:169" align="right">comment:169</div>

Replying to [@jdemeyer](#comment%3A167):
> I updated to PARI svn 12577 (some more bugs have been fixed), did a long doctest on a 32-bit and a 64-bit Intel Linux system.  There were a few failures appearing, I will add a patch soon (this patch is not included in the sage distribution [http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.rc1.newpari.v0.tar](http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.rc1.newpari.v0.tar))

What concerns me, is all this updating of svn. Sure some bugs might be fixed, but others are getting introduced. It would be nice if there was a stable version. Every time you update, so the testing needs to be done again. There was an earlier case I evaluated which it was ok, then someone updated and it was broken. 

There's no point keep testing the code, if the source gets updated. 

Personally, I'd revert to the svn which underwent a fair amount of testing.



---

archive/issue_comments_079302.json:
```json
{
    "body": "<div id=\"comment:170\" align=\"right\">comment:170</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A169):\n> Replying to [@jdemeyer](#comment%3A167):\n> > I updated to PARI svn 12577 (some more bugs have been fixed), did a long doctest on a 32-bit and a 64-bit Intel Linux system.  There were a few failures appearing, I will add a patch soon (this patch is not included in the sage distribution [http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.rc1.newpari.v0.tar](http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.rc1.newpari.v0.tar))\n> \n> \n> What concerns me, is all this updating of svn. Sure some bugs might be fixed, but others are getting introduced. It would be nice if there was a stable version. Every time you update, so the testing needs to be done again. There was an earlier case I evaluated which it was ok, then someone updated and it was broken. \n> \n> There's no point keep testing the code, if the source gets updated. \n> \n> Personally, I'd revert to the svn which underwent a fair amount of testing. \n\nTo be more precise, 12543 was ok, 12549 failed all tests. What bugs has 12577 introduced? \n\nIs there any chance of convincing the Pari developers to actually make a well-tested stable release? The Pari developers can make commits to svn more rapidly than Sage developers can test the code. That's 34 different source versions in 13 days. Would anyone like to try to convince me these are well tested? \n\nDave",
    "created_at": "2010-08-07T12:30:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79302",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:170" align="right">comment:170</div>

Replying to [@sagetrac-drkirkby](#comment%3A169):
> Replying to [@jdemeyer](#comment%3A167):
> > I updated to PARI svn 12577 (some more bugs have been fixed), did a long doctest on a 32-bit and a 64-bit Intel Linux system.  There were a few failures appearing, I will add a patch soon (this patch is not included in the sage distribution [http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.rc1.newpari.v0.tar](http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.rc1.newpari.v0.tar))
> 
> 
> What concerns me, is all this updating of svn. Sure some bugs might be fixed, but others are getting introduced. It would be nice if there was a stable version. Every time you update, so the testing needs to be done again. There was an earlier case I evaluated which it was ok, then someone updated and it was broken. 
> 
> There's no point keep testing the code, if the source gets updated. 
> 
> Personally, I'd revert to the svn which underwent a fair amount of testing. 

To be more precise, 12543 was ok, 12549 failed all tests. What bugs has 12577 introduced? 

Is there any chance of convincing the Pari developers to actually make a well-tested stable release? The Pari developers can make commits to svn more rapidly than Sage developers can test the code. That's 34 different source versions in 13 days. Would anyone like to try to convince me these are well tested? 

Dave



---

archive/issue_comments_079303.json:
```json
{
    "body": "<div id=\"comment:171\" align=\"right\">comment:171</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A169):\n> What concerns me, is all this updating of svn. Sure some bugs might be fixed, but others are getting introduced.\n\nTrue. <ignore> But why then update at all...? </ignore>\n\n(*\"Release often, release early.\"*)\n\n> It would be nice if there was a stable version. Every time you update, so the testing needs to be done again. There was an earlier case I evaluated which it was ok, then someone updated and it was broken. \n> \n> There's no point keep testing the code, if the source gets updated.\n\nWe might discover bugs in PARI itself as well, which hopefully would get fixed upstream (quickly in the svn, but probably not immediately in a [new] stable version). I though would prefer to base the new spkg on an \"official\", i.e. stable version, too.\n\n> Personally, I'd revert to the svn which underwent a fair amount of testing. \n\nI think since it seems a whole release will be dedicated to updating PARI, there will be enough testing anyway. But of course we'll have to freeze our snapshot at some point, when the appointed Sage release date/cycle comes close(r).",
    "created_at": "2010-08-07T12:39:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79303",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:171" align="right">comment:171</div>

Replying to [@sagetrac-drkirkby](#comment%3A169):
> What concerns me, is all this updating of svn. Sure some bugs might be fixed, but others are getting introduced.

True. <ignore> But why then update at all...? </ignore>

(*"Release often, release early."*)

> It would be nice if there was a stable version. Every time you update, so the testing needs to be done again. There was an earlier case I evaluated which it was ok, then someone updated and it was broken. 
> 
> There's no point keep testing the code, if the source gets updated.

We might discover bugs in PARI itself as well, which hopefully would get fixed upstream (quickly in the svn, but probably not immediately in a [new] stable version). I though would prefer to base the new spkg on an "official", i.e. stable version, too.

> Personally, I'd revert to the svn which underwent a fair amount of testing. 

I think since it seems a whole release will be dedicated to updating PARI, there will be enough testing anyway. But of course we'll have to freeze our snapshot at some point, when the appointed Sage release date/cycle comes close(r).



---

archive/issue_comments_079304.json:
```json
{
    "body": "<div id=\"comment:172\" align=\"right\">comment:172</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A169):\n> What concerns me, is all this updating of svn. Sure some bugs might be fixed, but others are getting introduced. It would be nice if there was a stable version. Every time you update, so the testing needs to be done again. There was an earlier case I evaluated which it was ok, then someone updated and it was broken. \n> \n> There's no point keep testing the code, if the source gets updated.\n\nWell, I agree that we shouldn't upgrade the source all too often.  But if the PARI developers fix a bug that we found, that is a good reason to update (and that is also why I updated to 12577).",
    "created_at": "2010-08-09T21:00:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79304",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:172" align="right">comment:172</div>

Replying to [@sagetrac-drkirkby](#comment%3A169):
> What concerns me, is all this updating of svn. Sure some bugs might be fixed, but others are getting introduced. It would be nice if there was a stable version. Every time you update, so the testing needs to be done again. There was an earlier case I evaluated which it was ok, then someone updated and it was broken. 
> 
> There's no point keep testing the code, if the source gets updated.

Well, I agree that we shouldn't upgrade the source all too often.  But if the PARI developers fix a bug that we found, that is a good reason to update (and that is also why I updated to 12577).



---

archive/issue_comments_079305.json:
```json
{
    "body": "<div id=\"comment:173\" align=\"right\">comment:173</div>\n\nReplying to [@jdemeyer](#comment%3A172):\n> Replying to [@sagetrac-drkirkby](#comment%3A169):\n> > There's no point keep testing the code, if the source gets updated.\n> \n> Well, I agree that we shouldn't upgrade the source all too often.  But if the PARI developers fix a bug that we found, that is a good reason to update (and that is also why I updated to 12577).\n\nI've changed the title to reflect more accurately what the ticket is. It's **not** an update to version 2.4.3 of Pari. Version 2.4.2 has not even been released - only an alpha of that is available\n\nhttp://pari.math.u-bordeaux.fr/pub/pari/testing/pari-2.4.2.alpha.tar.gz\n\nThis is an svn snapshot, but the ticket title implied something quite different. \n\nNote the developers guide says the date the snapshot was downloaded should be in the package name. However, that seems to cause confusion to me, as when people update the package, they keep changing the date, rather than adding .p0, .p1, .p2 etc. In any case, different snapshots can exist on the same day. Putting the actual snapshot number seems more sensible to me. So I think it would be better if this was called pari-svn12577.spkg, to reflect that fact it is a snapshot, and not a stable release as the package name would imply. Otherwise follow the developers guide. IMHO, this should not be called pari-2.4.3. \n\nWhen 2.4.3 is released, it would seem sensible Pari is updated to a stable release. But that's less likely to happen if people see from the package name that we already have the latest release. \n\nOf course, if the snapshot that's used gets updated, then that should be reflected in the ticket title! \n\nBTW, before thinking about updating the snapshot once again, take a read of of the book [The Mythical Man-Month](http://en.wikipedia.org/wiki/The_Mythical_Man-Month) in particular one of the authors points [that in a suitably complex system there is a certain irreducible number of errors. Any attempt to fix observed errors tends to result in the introduction of other errors.](http://en.wikipedia.org/wiki/The_Mythical_Man-Month#The_tendency_towards_irreducible_number_of_errors) I've certainly experienced this before many times - including a previous snapshot on this very ticket. \n\nDave",
    "created_at": "2010-08-10T13:15:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79305",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:173" align="right">comment:173</div>

Replying to [@jdemeyer](#comment%3A172):
> Replying to [@sagetrac-drkirkby](#comment%3A169):
> > There's no point keep testing the code, if the source gets updated.
> 
> Well, I agree that we shouldn't upgrade the source all too often.  But if the PARI developers fix a bug that we found, that is a good reason to update (and that is also why I updated to 12577).

I've changed the title to reflect more accurately what the ticket is. It's **not** an update to version 2.4.3 of Pari. Version 2.4.2 has not even been released - only an alpha of that is available

http://pari.math.u-bordeaux.fr/pub/pari/testing/pari-2.4.2.alpha.tar.gz

This is an svn snapshot, but the ticket title implied something quite different. 

Note the developers guide says the date the snapshot was downloaded should be in the package name. However, that seems to cause confusion to me, as when people update the package, they keep changing the date, rather than adding .p0, .p1, .p2 etc. In any case, different snapshots can exist on the same day. Putting the actual snapshot number seems more sensible to me. So I think it would be better if this was called pari-svn12577.spkg, to reflect that fact it is a snapshot, and not a stable release as the package name would imply. Otherwise follow the developers guide. IMHO, this should not be called pari-2.4.3. 

When 2.4.3 is released, it would seem sensible Pari is updated to a stable release. But that's less likely to happen if people see from the package name that we already have the latest release. 

Of course, if the snapshot that's used gets updated, then that should be reflected in the ticket title! 

BTW, before thinking about updating the snapshot once again, take a read of of the book [The Mythical Man-Month](http://en.wikipedia.org/wiki/The_Mythical_Man-Month) in particular one of the authors points [that in a suitably complex system there is a certain irreducible number of errors. Any attempt to fix observed errors tends to result in the introduction of other errors.](http://en.wikipedia.org/wiki/The_Mythical_Man-Month#The_tendency_towards_irreducible_number_of_errors) I've certainly experienced this before many times - including a previous snapshot on this very ticket. 

Dave



---

archive/issue_events_118517.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-08-10T13:15:14Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "title_is": "upgrade Pari to svn snapshot 12577 - a pre-release of Pari 2.4.3.",
    "title_was": "upgrade pari to version 2.4.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9343#event-118517"
}
```



---

archive/issue_comments_079306.json:
```json
{
    "body": "<div id=\"comment:174\" align=\"right\">comment:174</div>\n\nI suggest that when we are close to having a version of all this which we want to release (as 4.6.alpha0 or whatever), which is soon now, we (William or me probably) let the two lead Pari developers know that this is happening, and tell them which svn version we are considering going with.  It may be that they recommend waiting for some bugs they know about and have nearly fixed.  (But we cannot wait for ever, of course.)   \n\nIt is also possible that they may be  pleased that a certain Pari version has had extensive testing through being part of a Sage release (and they may even say so, though that is slightly less likely).  In any case, when the new spkg and all the related patches are in Sage then it will be very easy to upgrade to to a new Pari svn for new bug fixes.",
    "created_at": "2010-08-11T16:07:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79306",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:174" align="right">comment:174</div>

I suggest that when we are close to having a version of all this which we want to release (as 4.6.alpha0 or whatever), which is soon now, we (William or me probably) let the two lead Pari developers know that this is happening, and tell them which svn version we are considering going with.  It may be that they recommend waiting for some bugs they know about and have nearly fixed.  (But we cannot wait for ever, of course.)   

It is also possible that they may be  pleased that a certain Pari version has had extensive testing through being part of a Sage release (and they may even say so, though that is slightly less likely).  In any case, when the new spkg and all the related patches are in Sage then it will be very easy to upgrade to to a new Pari svn for new bug fixes.



---

archive/issue_comments_079307.json:
```json
{
    "body": "<div id=\"comment:175\" align=\"right\">comment:175</div>\n\nWe have a new(?) issue with PARI 2.3.5(.p2) on Fedora 13 if libfltk-dev (or even libfltk, i.e. just the library, without the necessary headers) is installed: #9722\n\nDoes anyone know if this is already fixed here? (Otherwise I'd try to provide a simple patch at the other ticket.)",
    "created_at": "2010-08-11T16:26:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79307",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:175" align="right">comment:175</div>

We have a new(?) issue with PARI 2.3.5(.p2) on Fedora 13 if libfltk-dev (or even libfltk, i.e. just the library, without the necessary headers) is installed: #9722

Does anyone know if this is already fixed here? (Otherwise I'd try to provide a simple patch at the other ticket.)



---

archive/issue_comments_079308.json:
```json
{
    "body": "<div id=\"comment:176\" align=\"right\">comment:176</div>\n\nCould someone who is up to date on this post a list of which patches now need applying, and a link to the latest spkg?  The list at the top is just too long, and I don't have a recent working version of this.  Also, does what we have so far apply to 4.5.2?  or 4.5.3.alpha0?  If not, it should...",
    "created_at": "2010-08-12T19:38:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79308",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:176" align="right">comment:176</div>

Could someone who is up to date on this post a list of which patches now need applying, and a link to the latest spkg?  The list at the top is just too long, and I don't have a recent working version of this.  Also, does what we have so far apply to 4.5.2?  or 4.5.3.alpha0?  If not, it should...



---

archive/issue_comments_079309.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,16 +1,11 @@\n See #7736 (a bug this will fix), #8453 (last pari upgrade).\n \n-* Download the new pari spkg from [http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3.svn-12577.spkg](http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3.svn-12577.spkg)\n-* For the genus2reduction spkg, see #9591\n-* For the lcalc spkg, see #9592\n-* There is a small dependency: #9595 is needed to fix all doctests.\n-\n-You can download a complete patched sage distribution from [http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.rc1.newpari.v0.tar](http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.rc1.newpari.v0.tar)\n-This contains:\n-* the new pari, genus2reduction, lcalc spkg's\n-* all extcode patches from #9343\n-* patch #9595\n-* sagelib patch [sagelib_9343_combined5.patch](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343_combined5.patch.gz)\n+How to apply the patches to sage-4.5.3.alpha0:\n+* Install the new pari spkg: [http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3.svn-12577.spkg](http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3.svn-12577.spkg)\n+* Install the new genus2reduction spkg: [http://cage.ugent.be/~jdemeyer/sage/genus2reduction-0.3.p7.spkg](http://cage.ugent.be/~jdemeyer/sage/genus2reduction-0.3.p7.spkg) (see #9591)\n+* Install the new lcalc spkg: [http://cage.ugent.be/~jdemeyer/sage/lcalc-20100428-1.23.p1.spkg](http://cage.ugent.be/~jdemeyer/sage/lcalc-20100428-1.23.p1.spkg) (see #9592)\n+* Apply the [sagelib_9343_combined6.patch](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343_combined6.patch.gz) to `devel/sage`\n+* Apply the [extcode_9343_combined3](https://github.com/sagemath/sage/files/ticket9343/extcode_9343_combined3.patch.gz) patch to `data/extcode`\n \n TODO:\n * Fix doctests marked with \"9343 not tested\" in elliptic_curves/heegner.py and elliptic_curves/ell_rational_field.py\n``````\n",
    "created_at": "2010-08-12T21:34:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79309",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,16 +1,11 @@
 See #7736 (a bug this will fix), #8453 (last pari upgrade).
 
-* Download the new pari spkg from [http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3.svn-12577.spkg](http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3.svn-12577.spkg)
-* For the genus2reduction spkg, see #9591
-* For the lcalc spkg, see #9592
-* There is a small dependency: #9595 is needed to fix all doctests.
-
-You can download a complete patched sage distribution from [http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.rc1.newpari.v0.tar](http://cage.ugent.be/~jdemeyer/sage/sage-4.5.2.rc1.newpari.v0.tar)
-This contains:
-* the new pari, genus2reduction, lcalc spkg's
-* all extcode patches from #9343
-* patch #9595
-* sagelib patch [sagelib_9343_combined5.patch](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343_combined5.patch.gz)
+How to apply the patches to sage-4.5.3.alpha0:
+* Install the new pari spkg: [http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3.svn-12577.spkg](http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3.svn-12577.spkg)
+* Install the new genus2reduction spkg: [http://cage.ugent.be/~jdemeyer/sage/genus2reduction-0.3.p7.spkg](http://cage.ugent.be/~jdemeyer/sage/genus2reduction-0.3.p7.spkg) (see #9591)
+* Install the new lcalc spkg: [http://cage.ugent.be/~jdemeyer/sage/lcalc-20100428-1.23.p1.spkg](http://cage.ugent.be/~jdemeyer/sage/lcalc-20100428-1.23.p1.spkg) (see #9592)
+* Apply the [sagelib_9343_combined6.patch](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343_combined6.patch.gz) to `devel/sage`
+* Apply the [extcode_9343_combined3](https://github.com/sagemath/sage/files/ticket9343/extcode_9343_combined3.patch.gz) patch to `data/extcode`
 
 TODO:
 * Fix doctests marked with "9343 not tested" in elliptic_curves/heegner.py and elliptic_curves/ell_rational_field.py
``````




---

archive/issue_comments_079310.json:
```json
{
    "body": "Flattening of the above sagelib patches against sage-4.5.3.alpha0",
    "created_at": "2010-08-12T21:36:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79310",
    "user": "https://github.com/jdemeyer"
}
```

Flattening of the above sagelib patches against sage-4.5.3.alpha0



---

archive/issue_comments_079311.json:
```json
{
    "body": "<div id=\"comment:178\" align=\"right\">comment:178</div>\n\nAttachment: **[sagelib_9343_combined6.patch.gz](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343_combined6.patch.gz)**\n\nReplying to [@JohnCremona](#comment%3A176):\n> Could someone who is up to date on this post a list of which patches now need applying, and a link to the latest spkg?  The list at the top is just too long, and I don't have a recent working version of this.  Also, does what we have so far apply to 4.5.2?  or 4.5.3.alpha0?  If not, it should...\n\nI rebased the patch to sage-4.5.3.alpha0, but I did not yet have time to test it.  I also tried to clarify the instructions in the ticket description, hope it clears things up...",
    "created_at": "2010-08-12T21:38:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79311",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:178" align="right">comment:178</div>

Attachment: **[sagelib_9343_combined6.patch.gz](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343_combined6.patch.gz)**

Replying to [@JohnCremona](#comment%3A176):
> Could someone who is up to date on this post a list of which patches now need applying, and a link to the latest spkg?  The list at the top is just too long, and I don't have a recent working version of this.  Also, does what we have so far apply to 4.5.2?  or 4.5.3.alpha0?  If not, it should...

I rebased the patch to sage-4.5.3.alpha0, but I did not yet have time to test it.  I also tried to clarify the instructions in the ticket description, hope it clears things up...



---

archive/issue_comments_079312.json:
```json
{
    "body": "<div id=\"comment:179\" align=\"right\">comment:179</div>\n\nReplying to [@jdemeyer](#comment%3A178):\n> Replying to [@JohnCremona](#comment%3A176):\n> > Could someone who is up to date on this post a list of which patches now need applying, and a link to the latest spkg?  The list at the top is just too long, and I don't have a recent working version of this.  Also, does what we have so far apply to 4.5.2?  or 4.5.3.alpha0?  If not, it should...\n> \n> \n> I rebased the patch to sage-4.5.3.alpha0, but I did not yet have time to test it.  I also tried to clarify the instructions in the ticket description, hope it clears things up...\n\nThanks -- I'll spend some time on this on Friday.",
    "created_at": "2010-08-12T22:06:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79312",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:179" align="right">comment:179</div>

Replying to [@jdemeyer](#comment%3A178):
> Replying to [@JohnCremona](#comment%3A176):
> > Could someone who is up to date on this post a list of which patches now need applying, and a link to the latest spkg?  The list at the top is just too long, and I don't have a recent working version of this.  Also, does what we have so far apply to 4.5.2?  or 4.5.3.alpha0?  If not, it should...
> 
> 
> I rebased the patch to sage-4.5.3.alpha0, but I did not yet have time to test it.  I also tried to clarify the instructions in the ticket description, hope it clears things up...

Thanks -- I'll spend some time on this on Friday.



---

archive/issue_comments_079313.json:
```json
{
    "body": "<div id=\"comment:180\" align=\"right\">comment:180</div>\n\nFollowing the detailed instructions in the ticket description, starting with a  fresh build of 4.5.3.alpha0, I successfully installed the three spkgs (with SAGE_CHECK='yes') and both patches (sagelib and extcode) with no issues -- except that when I tried to install the lcalc spkg, it said \"already installed\", which I do not really understand.  Jeroen?\n\nThen, sage -tp 10 -long passed everything!  So the rebase to 4.5.3.alpha0 is fine.\n\nelliptic_curves/ell_rational_field.py:  I checked that the new output from the doctest is as valid as the old one (there is just a slightly different LLL-reduced basis, which is a reasonable side-effect of changes to the pari library which does the LLL reduction).\n\nI am uploading an extra little patch fixing that.  Which just leaves heegner,py.",
    "created_at": "2010-08-13T10:47:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79313",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:180" align="right">comment:180</div>

Following the detailed instructions in the ticket description, starting with a  fresh build of 4.5.3.alpha0, I successfully installed the three spkgs (with SAGE_CHECK='yes') and both patches (sagelib and extcode) with no issues -- except that when I tried to install the lcalc spkg, it said "already installed", which I do not really understand.  Jeroen?

Then, sage -tp 10 -long passed everything!  So the rebase to 4.5.3.alpha0 is fine.

elliptic_curves/ell_rational_field.py:  I checked that the new output from the doctest is as valid as the old one (there is just a slightly different LLL-reduced basis, which is a reasonable side-effect of changes to the pari library which does the LLL reduction).

I am uploading an extra little patch fixing that.  Which just leaves heegner,py.



---

archive/issue_comments_079314.json:
```json
{
    "body": "apply to sagelib after sagelib_9343_combined6.patch",
    "created_at": "2010-08-13T10:50:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79314",
    "user": "https://github.com/JohnCremona"
}
```

apply to sagelib after sagelib_9343_combined6.patch



---

archive/issue_comments_079315.json:
```json
{
    "body": "<div id=\"comment:181\" align=\"right\">comment:181</div>\n\nAttachment: **[trac_9343-review.patch.gz](https://github.com/sagemath/sage/files/ticket9343/trac_9343-review.patch.gz)**\n\nPS to review just above: I also tested with \"make ptestlong\" and there were no problems.",
    "created_at": "2010-08-13T11:25:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79315",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:181" align="right">comment:181</div>

Attachment: **[trac_9343-review.patch.gz](https://github.com/sagemath/sage/files/ticket9343/trac_9343-review.patch.gz)**

PS to review just above: I also tested with "make ptestlong" and there were no problems.



---

archive/issue_comments_079316.json:
```json
{
    "body": "<div id=\"comment:182\" align=\"right\">comment:182</div>\n\nReplying to [@JohnCremona](#comment%3A180):\n> ... except that when I tried to install the lcalc spkg, it said \"already installed\", which I do not really understand.\n\nThis is because the package at #9592 has the wrong name (it should be rebased on #9665 which is p1, and renamed to p2.)",
    "created_at": "2010-08-13T11:50:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79316",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:182" align="right">comment:182</div>

Replying to [@JohnCremona](#comment%3A180):
> ... except that when I tried to install the lcalc spkg, it said "already installed", which I do not really understand.

This is because the package at #9592 has the wrong name (it should be rebased on #9665 which is p1, and renamed to p2.)



---

archive/issue_comments_079317.json:
```json
{
    "body": "<div id=\"comment:183\" align=\"right\">comment:183</div>\n\nReplying to [@nexttime](#comment%3A182):\n> Replying to [@JohnCremona](#comment%3A180):\n> > ... except that when I tried to install the lcalc spkg, it said \"already installed\", which I do not really understand.\n> \n> \n> This is because the package at #9592 has the wrong name (it should be rebased on #9665 which is p1, and renamed to p2.)\n> \n\nAhah!  Well, as I said, everything worked and passed, so perhaps this means that no upgrade of lcalc is required after all?",
    "created_at": "2010-08-13T11:59:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79317",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:183" align="right">comment:183</div>

Replying to [@nexttime](#comment%3A182):
> Replying to [@JohnCremona](#comment%3A180):
> > ... except that when I tried to install the lcalc spkg, it said "already installed", which I do not really understand.
> 
> 
> This is because the package at #9592 has the wrong name (it should be rebased on #9665 which is p1, and renamed to p2.)
> 

Ahah!  Well, as I said, everything worked and passed, so perhaps this means that no upgrade of lcalc is required after all?



---

archive/issue_comments_079318.json:
```json
{
    "body": "<div id=\"comment:184\" align=\"right\">comment:184</div>\n\nReplying to [@JohnCremona](#comment%3A183):\n> Replying to [@nexttime](#comment%3A182):\n> > Replying to [@JohnCremona](#comment%3A180):\n> > > ... except that when I tried to install the lcalc spkg, it said \"already installed\", which I do not really understand.\n> > \n> > \n> > This is because the package at #9592 has the wrong name (it should be rebased on #9665 which is p1, and renamed to p2.)\n> > \n> \n> Ahah!  Well, as I said, everything worked and passed, so perhaps this means that no upgrade of lcalc is required after all?\n\nJohn, could you try reinstalling the \"old\" lcalc p1 package (by `./sage -f ...`)?\n\nPerhaps this would show the error #9592 (Jeroen's new lcalc spkg) is intended to fix.",
    "created_at": "2010-08-13T15:13:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79318",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:184" align="right">comment:184</div>

Replying to [@JohnCremona](#comment%3A183):
> Replying to [@nexttime](#comment%3A182):
> > Replying to [@JohnCremona](#comment%3A180):
> > > ... except that when I tried to install the lcalc spkg, it said "already installed", which I do not really understand.
> > 
> > 
> > This is because the package at #9592 has the wrong name (it should be rebased on #9665 which is p1, and renamed to p2.)
> > 
> 
> Ahah!  Well, as I said, everything worked and passed, so perhaps this means that no upgrade of lcalc is required after all?

John, could you try reinstalling the "old" lcalc p1 package (by `./sage -f ...`)?

Perhaps this would show the error #9592 (Jeroen's new lcalc spkg) is intended to fix.



---

archive/issue_comments_079319.json:
```json
{
    "body": "<div id=\"comment:185\" align=\"right\">comment:185</div>\n\nReplying to [@nexttime](#comment%3A184):\n> Replying to [@JohnCremona](#comment%3A183):\n> > Replying to [@nexttime](#comment%3A182):\n> > > Replying to [@JohnCremona](#comment%3A180):\n> > > > ... except that when I tried to install the lcalc spkg, it said \"already installed\", which I do not really understand.\n> > > \n> > > \n> > > This is because the package at #9592 has the wrong name (it should be rebased on #9665 which is p1, and renamed to p2.)\n> > > \n> > \n> > Ahah!  Well, as I said, everything worked and passed, so perhaps this means that no upgrade of lcalc is required after all?\n> \n> \n> John, could you try reinstalling the \"old\" lcalc p1 package (by `./sage -f ...`)?\n> \n> Perhaps this would show the error #9592 (Jeroen's new lcalc spkg) is intended to fix.\n\nI did that and it does not show the error.  Note that Jeroen's patch at #9592 just changes one source file (src/Lcommand_line_elliptic.cc) and in that file changes \n\n```\n    F[1] = lgeti(BIGDEFAULTPREC);\n```\nto\n\n```\n    F[1] = (long)cgeti(BIGDEFAULTPREC);\n```\nand 4 similar lines.  It is possible that during our work on this ticket some change in Pari means that old version works again.  So I think that we can cancel #9592 and remove the new spkg from the instruction on this ticket.  I will try that and report back.",
    "created_at": "2010-08-13T15:31:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79319",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:185" align="right">comment:185</div>

Replying to [@nexttime](#comment%3A184):
> Replying to [@JohnCremona](#comment%3A183):
> > Replying to [@nexttime](#comment%3A182):
> > > Replying to [@JohnCremona](#comment%3A180):
> > > > ... except that when I tried to install the lcalc spkg, it said "already installed", which I do not really understand.
> > > 
> > > 
> > > This is because the package at #9592 has the wrong name (it should be rebased on #9665 which is p1, and renamed to p2.)
> > > 
> > 
> > Ahah!  Well, as I said, everything worked and passed, so perhaps this means that no upgrade of lcalc is required after all?
> 
> 
> John, could you try reinstalling the "old" lcalc p1 package (by `./sage -f ...`)?
> 
> Perhaps this would show the error #9592 (Jeroen's new lcalc spkg) is intended to fix.

I did that and it does not show the error.  Note that Jeroen's patch at #9592 just changes one source file (src/Lcommand_line_elliptic.cc) and in that file changes 

```
    F[1] = lgeti(BIGDEFAULTPREC);
```
to

```
    F[1] = (long)cgeti(BIGDEFAULTPREC);
```
and 4 similar lines.  It is possible that during our work on this ticket some change in Pari means that old version works again.  So I think that we can cancel #9592 and remove the new spkg from the instruction on this ticket.  I will try that and report back.



---

archive/issue_comments_079320.json:
```json
{
    "body": "<div id=\"comment:186\" align=\"right\">comment:186</div>\n\nOK, I see what is happening now.  Applying JD's version of the lcalc patch does not work since there is a different p1 version of that which is now in the standard distribution (for 4.5.3.alpha0) so it does nothing when you try to install it since the name is the same.\n\nI will take the real p1 from #9685 and add JD's extra patch to Lcommandline_elliptic.cc (being careful, since there's already a patch for that file) and make a p2 from it, then post a link to that here.",
    "created_at": "2010-08-13T15:57:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79320",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:186" align="right">comment:186</div>

OK, I see what is happening now.  Applying JD's version of the lcalc patch does not work since there is a different p1 version of that which is now in the standard distribution (for 4.5.3.alpha0) so it does nothing when you try to install it since the name is the same.

I will take the real p1 from #9685 and add JD's extra patch to Lcommandline_elliptic.cc (being careful, since there's already a patch for that file) and make a p2 from it, then post a link to that here.



---

archive/issue_comments_079321.json:
```json
{
    "body": "<div id=\"comment:187\" align=\"right\">comment:187</div>\n\nReplying to [@JohnCremona](#comment%3A186):\n\n> \n> I will take the real p1 from #9685 and add JD's extra patch to Lcommandline_elliptic.cc (being careful, since there's already a patch for that file) and make a p2 from it, then post a link to that here.\n\nThat should have said #9665;  and in fact I can take it from SAGE_ROOT/spkg/standard from 4.5.3.alpha0.",
    "created_at": "2010-08-13T16:06:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79321",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:187" align="right">comment:187</div>

Replying to [@JohnCremona](#comment%3A186):

> 
> I will take the real p1 from #9685 and add JD's extra patch to Lcommandline_elliptic.cc (being careful, since there's already a patch for that file) and make a p2 from it, then post a link to that here.

That should have said #9665;  and in fact I can take it from SAGE_ROOT/spkg/standard from 4.5.3.alpha0.



---

archive/issue_comments_079322.json:
```json
{
    "body": "<div id=\"comment:188\" align=\"right\">comment:188</div>\n\nSee related discussions at #9665.  The new lcalc spkg should be replaced by the one there.[Jeroen's p1 has been superceded by the p1 at #9665 which has now been merged.  There's a suitable p2 at that ticket which can be linked to here after testing.]\n\nI checked that the lcalc p2 spkg from #9665 builds fine (and really does build!), and am re-testing everything.",
    "created_at": "2010-08-13T16:42:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79322",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:188" align="right">comment:188</div>

See related discussions at #9665.  The new lcalc spkg should be replaced by the one there.[Jeroen's p1 has been superceded by the p1 at #9665 which has now been merged.  There's a suitable p2 at that ticket which can be linked to here after testing.]

I checked that the lcalc p2 spkg from #9665 builds fine (and really does build!), and am re-testing everything.



---

archive/issue_comments_079323.json:
```json
{
    "body": "<div id=\"comment:189\" align=\"right\">comment:189</div>\n\nReplying to [@JohnCremona](#comment%3A188):\n> See related discussions at #9665.  The new lcalc spkg should be replaced by the one there.[Jeroen's p1 has been superceded by the p1 at #9665 which has now been merged.  There's a suitable p2 at that ticket which can be linked to here after testing.]\n> \n> I checked that the lcalc p2 spkg from #9665 builds fine (and really does build!), and am re-testing everything.\n\nThe first and third references should be to #9592, sorry.",
    "created_at": "2010-08-13T16:43:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79323",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:189" align="right">comment:189</div>

Replying to [@JohnCremona](#comment%3A188):
> See related discussions at #9665.  The new lcalc spkg should be replaced by the one there.[Jeroen's p1 has been superceded by the p1 at #9665 which has now been merged.  There's a suitable p2 at that ticket which can be linked to here after testing.]
> 
> I checked that the lcalc p2 spkg from #9665 builds fine (and really does build!), and am re-testing everything.

The first and third references should be to #9592, sorry.



---

archive/issue_comments_079324.json:
```json
{
    "body": "<div id=\"comment:190\" align=\"right\">comment:190</div>\n\nAll tests passed.  (This is with my extra patch  trac_9343-review.patch).\n\nSo now the confusion over the lcalc spkg has been sorted, we are back on track....",
    "created_at": "2010-08-13T16:59:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79324",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:190" align="right">comment:190</div>

All tests passed.  (This is with my extra patch  trac_9343-review.patch).

So now the confusion over the lcalc spkg has been sorted, we are back on track....



---

archive/issue_comments_079325.json:
```json
{
    "body": "<div id=\"comment:191\" align=\"right\">comment:191</div>\n\nReplying to [@JohnCremona](#comment%3A190):\n> All tests passed.  (This is with my extra patch  trac_9343-review.patch).\n\nYes, passed (without the new lcalc spkg) `ptestlong` with Sage 4.5.3.alpha0 + #9475 + #9717 on Fedora 13 x86 (Pentium 4 Prescott, gcc 4.4.4, native code, O2; I just installed the new spkgs and applied the two patches, i.e. did not build from scratch).\n\nAfter that, I applied John's reviewer patch, and all (long) tests in `sage/schemes/elliptic_curves/ell_rational_field.py` also passed.\n\n> So now the confusion over the lcalc spkg has been sorted, we are back on track....\n\nYes. I could reproduce the build error of the old lcalc spkg with new PARI; John's new one (p2) at #9592 (Jeroen's p1 rebased on Sage's current one) builds.\n\nThe number (and type) of warnings I get by doing so (building lcalc) though is IMHO a shame. Besides other annoying warnings, there are twelve deprecation warnings (with gcc 4.4.4). (Of course many warnings have the same origin, but that makes fixing them even easier. This isn't meant as an offense, but rather a suggestion.)",
    "created_at": "2010-08-13T20:43:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79325",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:191" align="right">comment:191</div>

Replying to [@JohnCremona](#comment%3A190):
> All tests passed.  (This is with my extra patch  trac_9343-review.patch).

Yes, passed (without the new lcalc spkg) `ptestlong` with Sage 4.5.3.alpha0 + #9475 + #9717 on Fedora 13 x86 (Pentium 4 Prescott, gcc 4.4.4, native code, O2; I just installed the new spkgs and applied the two patches, i.e. did not build from scratch).

After that, I applied John's reviewer patch, and all (long) tests in `sage/schemes/elliptic_curves/ell_rational_field.py` also passed.

> So now the confusion over the lcalc spkg has been sorted, we are back on track....

Yes. I could reproduce the build error of the old lcalc spkg with new PARI; John's new one (p2) at #9592 (Jeroen's p1 rebased on Sage's current one) builds.

The number (and type) of warnings I get by doing so (building lcalc) though is IMHO a shame. Besides other annoying warnings, there are twelve deprecation warnings (with gcc 4.4.4). (Of course many warnings have the same origin, but that makes fixing them even easier. This isn't meant as an offense, but rather a suggestion.)



---

archive/issue_comments_079326.json:
```json
{
    "body": "<div id=\"comment:192\" align=\"right\">comment:192</div>\n\nReplying to [@nexttime](#comment%3A191):\n> Replying to [@JohnCremona](#comment%3A190):\n> > All tests passed.  (This is with my extra patch  trac_9343-review.patch).\n> \n> \n> Yes, passed (without the new lcalc spkg) `ptestlong` with Sage 4.5.3.alpha0 + #9475 + #9717 on Fedora 13 x86 (Pentium 4 Prescott, gcc 4.4.4, native code, O2; I just installed the new spkgs and applied the two patches, i.e. did not build from scratch).\n> \n> After that, I applied John's reviewer patch, and all (long) tests in `sage/schemes/elliptic_curves/ell_rational_field.py` also passed.\n\nExactly the same on Ubuntu 9.04 x86_64 (Core2, gcc 4.3.3, native code, O2), except that I did run `testlong` instead of `ptestlong` because the machine was already heavily loaded.\n\n(The lcalc build warnings are the same, too, btw.)",
    "created_at": "2010-08-13T21:14:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79326",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:192" align="right">comment:192</div>

Replying to [@nexttime](#comment%3A191):
> Replying to [@JohnCremona](#comment%3A190):
> > All tests passed.  (This is with my extra patch  trac_9343-review.patch).
> 
> 
> Yes, passed (without the new lcalc spkg) `ptestlong` with Sage 4.5.3.alpha0 + #9475 + #9717 on Fedora 13 x86 (Pentium 4 Prescott, gcc 4.4.4, native code, O2; I just installed the new spkgs and applied the two patches, i.e. did not build from scratch).
> 
> After that, I applied John's reviewer patch, and all (long) tests in `sage/schemes/elliptic_curves/ell_rational_field.py` also passed.

Exactly the same on Ubuntu 9.04 x86_64 (Core2, gcc 4.3.3, native code, O2), except that I did run `testlong` instead of `ptestlong` because the machine was already heavily loaded.

(The lcalc build warnings are the same, too, btw.)



---

archive/issue_comments_079327.json:
```json
{
    "body": "<div id=\"comment:193\" align=\"right\">comment:193</div>\n\nMy guess is that if one of us were to fix the warnings in compiling lcalc and give Mike R the result, he would gratefully accept it, if he does not have time to do it himself.\nBut that's not for this ticket.",
    "created_at": "2010-08-13T21:41:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79327",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:193" align="right">comment:193</div>

My guess is that if one of us were to fix the warnings in compiling lcalc and give Mike R the result, he would gratefully accept it, if he does not have time to do it himself.
But that's not for this ticket.



---

archive/issue_comments_079328.json:
```json
{
    "body": "<div id=\"comment:194\" align=\"right\">comment:194</div>\n\nReplying to [@JohnCremona](#comment%3A193):\n> My guess is that if one of us were to fix the warnings in compiling lcalc and give Mike R the result, he would gratefully accept it, if he does not have time to do it himself.\n> But that's not for this ticket.\n\nPerhaps for #9592. If only all (severe) warnings originated from upstream...\n\n\nP.S. to the build and test reports:\n\nI do get a Sphinx warning:\n\n```\ndocstring of sage.libs.pari.gen.PariInstance.read:8: (WARNING/2) Literal block expected; none found.\n```",
    "created_at": "2010-08-13T21:57:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79328",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:194" align="right">comment:194</div>

Replying to [@JohnCremona](#comment%3A193):
> My guess is that if one of us were to fix the warnings in compiling lcalc and give Mike R the result, he would gratefully accept it, if he does not have time to do it himself.
> But that's not for this ticket.

Perhaps for #9592. If only all (severe) warnings originated from upstream...


P.S. to the build and test reports:

I do get a Sphinx warning:

```
docstring of sage.libs.pari.gen.PariInstance.read:8: (WARNING/2) Literal block expected; none found.
```



---

archive/issue_comments_079329.json:
```json
{
    "body": "<div id=\"comment:195\" align=\"right\">comment:195</div>\n\nReplying to [@nexttime](#comment%3A191):\n> ... passed (without the new lcalc spkg) `ptestlong` with Sage 4.5.3.alpha0 + #9475 + #9717 on Fedora 13 x86 (Pentium 4 Prescott, gcc 4.4.4, native code, O2; I just installed the new spkgs and applied the two patches, i.e. did not build from scratch).\n\nAlso passed `ptestlong` with John's rebased lcalc p2 (from #9592).",
    "created_at": "2010-08-14T03:35:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79329",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:195" align="right">comment:195</div>

Replying to [@nexttime](#comment%3A191):
> ... passed (without the new lcalc spkg) `ptestlong` with Sage 4.5.3.alpha0 + #9475 + #9717 on Fedora 13 x86 (Pentium 4 Prescott, gcc 4.4.4, native code, O2; I just installed the new spkgs and applied the two patches, i.e. did not build from scratch).

Also passed `ptestlong` with John's rebased lcalc p2 (from #9592).



---

archive/issue_comments_079330.json:
```json
{
    "body": "<div id=\"comment:196\" align=\"right\">comment:196</div>\n\nI looked into the failures in heegner.py in extreme detail, and the problem is entirely because of the following.  \n\n```\nCURRENT SAGE:\n\nsage: Q = QuadraticForm(QQ,3,[ 8657345368, 12759737420, 29300965980,4701524895, 21592798720, 24792432640 ])\nsage: n = 11767\nsage: time Q.representation_vector_list(n+1)[-1]\nCPU times: user 1.96 s, sys: 0.00 s, total: 1.97 s\nWall time: 1.97 s\n[(5207, -2829, -1845), (-5207, 2829, 1845)]\n\nNEW SAGE (with NEW PARI):\n\nsage: Q = QuadraticForm(QQ,3,[ 8657345368, 12759737420, 29300965980,4701524895, 21592798720, 24792432640 ])\nsage: n = 11767\nsage: time Q.representation_vector_list(n+1)[-1]\nCPU times: user 1.85 s, sys: 0.00 s, total: 1.85 s\nWall time: 1.85 s\n[(-5207, 2829, 1845), (5207, -2829, -1845)]\n\n```\n\n---\nThe difference is just that the vectors with given norm output by pari are now in a different order.  This causes some output to be slightly different in Sage, but is not a bug.   So it is 100% safe to change the output in heegner.py to match what gets output now. \n\n---\n\nRegarding the error in ell_rational_field.py -- the *only* remaining issue -- this is a doctest that John Cremona introduced for trac 4525: https://github.com/sagemath/sage/issues/4525\n\nThe difference is that \"a\" LLL reduced basis is now slightly different.  This seems extremely plausible, since PARI's LLL code was completely changed in this new version (I recall Bill A. telling me they incorporated a version of fplll into PARI).  So very likely that doctest is fine too.  John C is the one who should sign off on it though, not Robert B (you're in the clear).\n\nI've taken the liberty of posting a patch that fixes the heegner.py tests, and also the one LLL test in ell_rational_field.py (though I'd like to hear from John C. about that).",
    "created_at": "2010-08-14T03:36:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79330",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:196" align="right">comment:196</div>

I looked into the failures in heegner.py in extreme detail, and the problem is entirely because of the following.  

```
CURRENT SAGE:

sage: Q = QuadraticForm(QQ,3,[ 8657345368, 12759737420, 29300965980,4701524895, 21592798720, 24792432640 ])
sage: n = 11767
sage: time Q.representation_vector_list(n+1)[-1]
CPU times: user 1.96 s, sys: 0.00 s, total: 1.97 s
Wall time: 1.97 s
[(5207, -2829, -1845), (-5207, 2829, 1845)]

NEW SAGE (with NEW PARI):

sage: Q = QuadraticForm(QQ,3,[ 8657345368, 12759737420, 29300965980,4701524895, 21592798720, 24792432640 ])
sage: n = 11767
sage: time Q.representation_vector_list(n+1)[-1]
CPU times: user 1.85 s, sys: 0.00 s, total: 1.85 s
Wall time: 1.85 s
[(-5207, 2829, 1845), (5207, -2829, -1845)]

```

---
The difference is just that the vectors with given norm output by pari are now in a different order.  This causes some output to be slightly different in Sage, but is not a bug.   So it is 100% safe to change the output in heegner.py to match what gets output now. 

---

Regarding the error in ell_rational_field.py -- the *only* remaining issue -- this is a doctest that John Cremona introduced for trac 4525: https://github.com/sagemath/sage/issues/4525

The difference is that "a" LLL reduced basis is now slightly different.  This seems extremely plausible, since PARI's LLL code was completely changed in this new version (I recall Bill A. telling me they incorporated a version of fplll into PARI).  So very likely that doctest is fine too.  John C is the one who should sign off on it though, not Robert B (you're in the clear).

I've taken the liberty of posting a patch that fixes the heegner.py tests, and also the one LLL test in ell_rational_field.py (though I'd like to hear from John C. about that).



---

archive/issue_comments_079331.json:
```json
{
    "body": "Attachment: **[sagelib_9343-heegner_ell_ratioanal.patch.gz](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343-heegner_ell_ratioanal.patch.gz)**\n\nthis fixes the issues with heegner.py and ell_rational_field.py, which were the last remaining after sagelib_9343_combined6.patch",
    "created_at": "2010-08-14T03:39:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79331",
    "user": "https://github.com/williamstein"
}
```

Attachment: **[sagelib_9343-heegner_ell_ratioanal.patch.gz](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343-heegner_ell_ratioanal.patch.gz)**

this fixes the issues with heegner.py and ell_rational_field.py, which were the last remaining after sagelib_9343_combined6.patch



---

archive/issue_comments_079332.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,6 +6,7 @@\n * Install the new lcalc spkg: [http://cage.ugent.be/~jdemeyer/sage/lcalc-20100428-1.23.p1.spkg](http://cage.ugent.be/~jdemeyer/sage/lcalc-20100428-1.23.p1.spkg) (see #9592)\n * Apply the [sagelib_9343_combined6.patch](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343_combined6.patch.gz) to `devel/sage`\n * Apply the [extcode_9343_combined3](https://github.com/sagemath/sage/files/ticket9343/extcode_9343_combined3.patch.gz) patch to `data/extcode`\n+* Apply the [sagelib_9343-heegner_ell_ratioanal.patch](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343-heegner_ell_ratioanal.patch.gz) patch to `devel/sage`\n \n TODO:\n * Fix doctests marked with \"9343 not tested\" in elliptic_curves/heegner.py and elliptic_curves/ell_rational_field.py\n``````\n",
    "created_at": "2010-08-14T03:41:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79332",
    "user": "https://github.com/williamstein"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,6 +6,7 @@
 * Install the new lcalc spkg: [http://cage.ugent.be/~jdemeyer/sage/lcalc-20100428-1.23.p1.spkg](http://cage.ugent.be/~jdemeyer/sage/lcalc-20100428-1.23.p1.spkg) (see #9592)
 * Apply the [sagelib_9343_combined6.patch](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343_combined6.patch.gz) to `devel/sage`
 * Apply the [extcode_9343_combined3](https://github.com/sagemath/sage/files/ticket9343/extcode_9343_combined3.patch.gz) patch to `data/extcode`
+* Apply the [sagelib_9343-heegner_ell_ratioanal.patch](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343-heegner_ell_ratioanal.patch.gz) patch to `devel/sage`
 
 TODO:
 * Fix doctests marked with "9343 not tested" in elliptic_curves/heegner.py and elliptic_curves/ell_rational_field.py
``````




---

archive/issue_comments_079333.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,5 +9,4 @@\n * Apply the [sagelib_9343-heegner_ell_ratioanal.patch](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343-heegner_ell_ratioanal.patch.gz) patch to `devel/sage`\n \n TODO:\n-* Fix doctests marked with \"9343 not tested\" in elliptic_curves/heegner.py and elliptic_curves/ell_rational_field.py\n * Get somebody to review this :-)\n``````\n",
    "created_at": "2010-08-14T03:48:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79333",
    "user": "https://github.com/williamstein"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,5 +9,4 @@
 * Apply the [sagelib_9343-heegner_ell_ratioanal.patch](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343-heegner_ell_ratioanal.patch.gz) patch to `devel/sage`
 
 TODO:
-* Fix doctests marked with "9343 not tested" in elliptic_curves/heegner.py and elliptic_curves/ell_rational_field.py
 * Get somebody to review this :-)
``````




---

archive/issue_comments_079334.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,9 +3,9 @@\n How to apply the patches to sage-4.5.3.alpha0:\n * Install the new pari spkg: [http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3.svn-12577.spkg](http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3.svn-12577.spkg)\n * Install the new genus2reduction spkg: [http://cage.ugent.be/~jdemeyer/sage/genus2reduction-0.3.p7.spkg](http://cage.ugent.be/~jdemeyer/sage/genus2reduction-0.3.p7.spkg) (see #9591)\n-* Install the new lcalc spkg: [http://cage.ugent.be/~jdemeyer/sage/lcalc-20100428-1.23.p1.spkg](http://cage.ugent.be/~jdemeyer/sage/lcalc-20100428-1.23.p1.spkg) (see #9592)\n+* Install the new lcalc spkg: [http://cage.ugent.be/~jdemeyer/sage/lcalc-20100428-1.23.p2.spkg](http://cage.ugent.be/~jdemeyer/sage/lcalc-20100428-1.23.p2.spkg) (see #9592)\n * Apply the [sagelib_9343_combined6.patch](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343_combined6.patch.gz) to `devel/sage`\n-* Apply the [extcode_9343_combined3](https://github.com/sagemath/sage/files/ticket9343/extcode_9343_combined3.patch.gz) patch to `data/extcode`\n+* Apply the [extcode_9343_combined3.patch](https://github.com/sagemath/sage/files/ticket9343/extcode_9343_combined3.patch.gz) patch to `data/extcode`\n * Apply the [sagelib_9343-heegner_ell_ratioanal.patch](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343-heegner_ell_ratioanal.patch.gz) patch to `devel/sage`\n \n TODO:\n``````\n",
    "created_at": "2010-08-14T10:05:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79334",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,9 +3,9 @@
 How to apply the patches to sage-4.5.3.alpha0:
 * Install the new pari spkg: [http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3.svn-12577.spkg](http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3.svn-12577.spkg)
 * Install the new genus2reduction spkg: [http://cage.ugent.be/~jdemeyer/sage/genus2reduction-0.3.p7.spkg](http://cage.ugent.be/~jdemeyer/sage/genus2reduction-0.3.p7.spkg) (see #9591)
-* Install the new lcalc spkg: [http://cage.ugent.be/~jdemeyer/sage/lcalc-20100428-1.23.p1.spkg](http://cage.ugent.be/~jdemeyer/sage/lcalc-20100428-1.23.p1.spkg) (see #9592)
+* Install the new lcalc spkg: [http://cage.ugent.be/~jdemeyer/sage/lcalc-20100428-1.23.p2.spkg](http://cage.ugent.be/~jdemeyer/sage/lcalc-20100428-1.23.p2.spkg) (see #9592)
 * Apply the [sagelib_9343_combined6.patch](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343_combined6.patch.gz) to `devel/sage`
-* Apply the [extcode_9343_combined3](https://github.com/sagemath/sage/files/ticket9343/extcode_9343_combined3.patch.gz) patch to `data/extcode`
+* Apply the [extcode_9343_combined3.patch](https://github.com/sagemath/sage/files/ticket9343/extcode_9343_combined3.patch.gz) patch to `data/extcode`
 * Apply the [sagelib_9343-heegner_ell_ratioanal.patch](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343-heegner_ell_ratioanal.patch.gz) patch to `devel/sage`
 
 TODO:
``````




---

archive/issue_comments_079335.json:
```json
{
    "body": "<div id=\"comment:200\" align=\"right\">comment:200</div>\n\nAfter this is merged, we should have a closer look at pickling of PARI and GP elements, see #9745.",
    "created_at": "2010-08-14T11:10:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79335",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:200" align="right">comment:200</div>

After this is merged, we should have a closer look at pickling of PARI and GP elements, see #9745.



---

archive/issue_comments_079336.json:
```json
{
    "body": "<div id=\"comment:201\" align=\"right\">comment:201</div>\n\nWilliam, I had already posted a patch for the LLL-reduced basis thing (see a few comments up) but you can be forgiven for not noticing it in this crowded ticket!  Yours does the same as mine and also fixes the heegner stuff, so mine could be deleted.  [Your diagnosis is 100% correct]\n\nPerhaps we need a manager for this ticket to get it all ready for the release manager?",
    "created_at": "2010-08-14T11:43:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79336",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:201" align="right">comment:201</div>

William, I had already posted a patch for the LLL-reduced basis thing (see a few comments up) but you can be forgiven for not noticing it in this crowded ticket!  Yours does the same as mine and also fixes the heegner stuff, so mine could be deleted.  [Your diagnosis is 100% correct]

Perhaps we need a manager for this ticket to get it all ready for the release manager?



---

archive/issue_comments_079337.json:
```json
{
    "body": "<div id=\"comment:202\" align=\"right\">comment:202</div>\n\n#9591 (genus2reduction) still needs to be resolved I believe. That's not even marked for review. \n\nI wish I knew why people keep putting tickets related to this being due to a upgrade to pari 2.4.3, when not even 2.4.2 has ever been released. \n\nDave",
    "created_at": "2010-08-14T13:02:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79337",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:202" align="right">comment:202</div>

#9591 (genus2reduction) still needs to be resolved I believe. That's not even marked for review. 

I wish I knew why people keep putting tickets related to this being due to a upgrade to pari 2.4.3, when not even 2.4.2 has ever been released. 

Dave



---

archive/issue_comments_079338.json:
```json
{
    "body": "<div id=\"comment:203\" align=\"right\">comment:203</div>\n\nI made some more changes, including removing gp_cremona.py.  I have not yet tested this completely, hang on...",
    "created_at": "2010-08-14T15:40:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79338",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:203" align="right">comment:203</div>

I made some more changes, including removing gp_cremona.py.  I have not yet tested this completely, hang on...



---

archive/issue_comments_079339.json:
```json
{
    "body": "<div id=\"comment:204\" align=\"right\">comment:204</div>\n\nReplying to [@jdemeyer](#comment%3A203):\n> I made some more changes, including removing gp_cremona.py.  I have not yet tested this completely, hang on...\n\nI do... ;-)\n\nCan you also fix the Sphinx warning?\n\nIn case this ticket gets merged soon, we should also address #9722 (Fedora 13 FLTK issue, at least the linker error) *here*. (Though I haven't yet checked if it is still present in our current svn snapshot; will do that later.)\n\n\nWilliam, Dave said on sage-release you want this merged into 4.5.3 (rather than 4.6, which is the current milestone)?",
    "created_at": "2010-08-14T17:01:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79339",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:204" align="right">comment:204</div>

Replying to [@jdemeyer](#comment%3A203):
> I made some more changes, including removing gp_cremona.py.  I have not yet tested this completely, hang on...

I do... ;-)

Can you also fix the Sphinx warning?

In case this ticket gets merged soon, we should also address #9722 (Fedora 13 FLTK issue, at least the linker error) *here*. (Though I haven't yet checked if it is still present in our current svn snapshot; will do that later.)


William, Dave said on sage-release you want this merged into 4.5.3 (rather than 4.6, which is the current milestone)?



---

archive/issue_comments_079340.json:
```json
{
    "body": "<div id=\"comment:205\" align=\"right\">comment:205</div>\n\nReplying to [@jdemeyer](#comment%3A203):\n> I made some more changes ...\n\n`s/optinal/optional/`\n\nThere are some back-ticks (and double back-ticks, e.g around `True`) missing in docstrings.\n\nNormalizing \"PARI\"/\"Pari\"/\"pari\" (and e.g. <code>\\`L\\`-function</code> vs. `L-function`) would be nice, too... :)",
    "created_at": "2010-08-14T17:27:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79340",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:205" align="right">comment:205</div>

Replying to [@jdemeyer](#comment%3A203):
> I made some more changes ...

`s/optinal/optional/`

There are some back-ticks (and double back-ticks, e.g around `True`) missing in docstrings.

Normalizing "PARI"/"Pari"/"pari" (and e.g. <code>\`L\`-function</code> vs. `L-function`) would be nice, too... :)



---

archive/issue_comments_079341.json:
```json
{
    "body": "<div id=\"comment:206\" align=\"right\">comment:206</div>\n\nReplying to [@nexttime](#comment%3A205):\n> Normalizing \"PARI\"/\"Pari\"/\"pari\" would be nice, too... :)\n\nThe official name seems to be \"PARI\" but \"Pari\" and \"pari\" are all over the place in Sage.  It wouldn't be too hard to do a search-and-replace-all if you want...",
    "created_at": "2010-08-14T19:07:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79341",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:206" align="right">comment:206</div>

Replying to [@nexttime](#comment%3A205):
> Normalizing "PARI"/"Pari"/"pari" would be nice, too... :)

The official name seems to be "PARI" but "Pari" and "pari" are all over the place in Sage.  It wouldn't be too hard to do a search-and-replace-all if you want...



---

archive/issue_comments_079342.json:
```json
{
    "body": "<div id=\"comment:207\" align=\"right\">comment:207</div>\n\nReplying to [@jdemeyer](#comment%3A206):\n> Replying to [@nexttime](#comment%3A205):\n> > Normalizing \"PARI\"/\"Pari\"/\"pari\" would be nice, too... :)\n> \n> \n> The official name seems to be \"PARI\" but \"Pari\" and \"pari\" are all over the place in Sage.  It wouldn't be too hard to do a search-and-replace-all if you want...\n\nYes: from http://pari.math.u-bordeaux.fr/ we see:\n\n```\n    * PARI is a C library, allowing fast computations.\n    * gp is an easy-to-use interactive shell giving access to the PARI functions.\n    * GP is the name of gp's scripting language.\n```",
    "created_at": "2010-08-14T19:43:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79342",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:207" align="right">comment:207</div>

Replying to [@jdemeyer](#comment%3A206):
> Replying to [@nexttime](#comment%3A205):
> > Normalizing "PARI"/"Pari"/"pari" would be nice, too... :)
> 
> 
> The official name seems to be "PARI" but "Pari" and "pari" are all over the place in Sage.  It wouldn't be too hard to do a search-and-replace-all if you want...

Yes: from http://pari.math.u-bordeaux.fr/ we see:

```
    * PARI is a C library, allowing fast computations.
    * gp is an easy-to-use interactive shell giving access to the PARI functions.
    * GP is the name of gp's scripting language.
```



---

archive/issue_comments_079343.json:
```json
{
    "body": "<div id=\"comment:208\" align=\"right\">comment:208</div>\n\nReplying to [@jdemeyer](#comment%3A206):\n> Replying to [@nexttime](#comment%3A205):\n> > Normalizing \"PARI\"/\"Pari\"/\"pari\" would be nice, too... :)\n> \n> \n> The official name seems to be \"PARI\" but \"Pari\" and \"pari\" are all over the place in Sage.  It wouldn't be too hard to do a search-and-replace-all if you want...\n\nThe official name of MATLAB is MATLAB, but still the Sage has:\n\n*Mission: Creating a viable free open source alternative to Magma, Maple, Mathematica and Matlab.*\n\nI've tried suggesting we call MATLAB by its official name, but that fell on deaf ears. \n\nIn general, I'd rather call programs by their official name, though in same cases, the programs themselves are not consistent!",
    "created_at": "2010-08-14T20:23:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79343",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:208" align="right">comment:208</div>

Replying to [@jdemeyer](#comment%3A206):
> Replying to [@nexttime](#comment%3A205):
> > Normalizing "PARI"/"Pari"/"pari" would be nice, too... :)
> 
> 
> The official name seems to be "PARI" but "Pari" and "pari" are all over the place in Sage.  It wouldn't be too hard to do a search-and-replace-all if you want...

The official name of MATLAB is MATLAB, but still the Sage has:

*Mission: Creating a viable free open source alternative to Magma, Maple, Mathematica and Matlab.*

I've tried suggesting we call MATLAB by its official name, but that fell on deaf ears. 

In general, I'd rather call programs by their official name, though in same cases, the programs themselves are not consistent!



---

archive/issue_comments_079344.json:
```json
{
    "body": "<div id=\"comment:209\" align=\"right\">comment:209</div>\n\nReplying to [@williamstein](#comment%3A196):\n> I've taken the liberty of posting a patch that fixes the heegner.py tests, and also the one LLL test in ell_rational_field.py (though I'd like to hear from John C. about that).   \n\nAlso passed `ptestlong` on Fedora 13 x86 (Pentium 4 Prescott), with and without optimization (i.e. `O2` in \"global\" `CFLAGS`), native code.\n\nThe version prior to this, i.e. without William's patches (but John's reviewer patch), passed all long tests on Ubuntu 7.10 x86 (Pentium 4, gcc 4.2.1, native code, O2), too.",
    "created_at": "2010-08-14T20:36:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79344",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:209" align="right">comment:209</div>

Replying to [@williamstein](#comment%3A196):
> I've taken the liberty of posting a patch that fixes the heegner.py tests, and also the one LLL test in ell_rational_field.py (though I'd like to hear from John C. about that).   

Also passed `ptestlong` on Fedora 13 x86 (Pentium 4 Prescott), with and without optimization (i.e. `O2` in "global" `CFLAGS`), native code.

The version prior to this, i.e. without William's patches (but John's reviewer patch), passed all long tests on Ubuntu 7.10 x86 (Pentium 4, gcc 4.2.1, native code, O2), too.



---

archive/issue_comments_079345.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,12 +1,10 @@\n See #7736 (a bug this will fix), #8453 (last pari upgrade).\n \n-How to apply the patches to sage-4.5.3.alpha0:\n+How to apply the patches to [sage-4.5.3.alpha0](http://sage.math.washington.edu/home/release/sage-4.5.3.alpha0/sage-4.5.3.alpha0.tar):\n * Install the new pari spkg: [http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3.svn-12577.spkg](http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3.svn-12577.spkg)\n-* Install the new genus2reduction spkg: [http://cage.ugent.be/~jdemeyer/sage/genus2reduction-0.3.p7.spkg](http://cage.ugent.be/~jdemeyer/sage/genus2reduction-0.3.p7.spkg) (see #9591)\n+* Install the new genus2reduction spkg: [http://cage.ugent.be/~jdemeyer/sage/genus2reduction-0.3.p8.spkg](http://cage.ugent.be/~jdemeyer/sage/genus2reduction-0.3.p8.spkg) (see #9591)\n * Install the new lcalc spkg: [http://cage.ugent.be/~jdemeyer/sage/lcalc-20100428-1.23.p2.spkg](http://cage.ugent.be/~jdemeyer/sage/lcalc-20100428-1.23.p2.spkg) (see #9592)\n+* Apply the [extcode_9343_combined3.patch](https://github.com/sagemath/sage/files/ticket9343/extcode_9343_combined3.patch.gz) patch to `data/extcode`\n * Apply the [sagelib_9343_combined6.patch](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343_combined6.patch.gz) to `devel/sage`\n-* Apply the [extcode_9343_combined3.patch](https://github.com/sagemath/sage/files/ticket9343/extcode_9343_combined3.patch.gz) patch to `data/extcode`\n * Apply the [sagelib_9343-heegner_ell_ratioanal.patch](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343-heegner_ell_ratioanal.patch.gz) patch to `devel/sage`\n-\n-TODO:\n-* Get somebody to review this :-)\n+* Apply the [9343_jd_review.patch](https://github.com/sagemath/sage/files/ticket9343/9343_jd_review.patch.gz) patch to `devel/sage`\n``````\n",
    "created_at": "2010-08-14T20:38:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79345",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,12 +1,10 @@
 See #7736 (a bug this will fix), #8453 (last pari upgrade).
 
-How to apply the patches to sage-4.5.3.alpha0:
+How to apply the patches to [sage-4.5.3.alpha0](http://sage.math.washington.edu/home/release/sage-4.5.3.alpha0/sage-4.5.3.alpha0.tar):
 * Install the new pari spkg: [http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3.svn-12577.spkg](http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3.svn-12577.spkg)
-* Install the new genus2reduction spkg: [http://cage.ugent.be/~jdemeyer/sage/genus2reduction-0.3.p7.spkg](http://cage.ugent.be/~jdemeyer/sage/genus2reduction-0.3.p7.spkg) (see #9591)
+* Install the new genus2reduction spkg: [http://cage.ugent.be/~jdemeyer/sage/genus2reduction-0.3.p8.spkg](http://cage.ugent.be/~jdemeyer/sage/genus2reduction-0.3.p8.spkg) (see #9591)
 * Install the new lcalc spkg: [http://cage.ugent.be/~jdemeyer/sage/lcalc-20100428-1.23.p2.spkg](http://cage.ugent.be/~jdemeyer/sage/lcalc-20100428-1.23.p2.spkg) (see #9592)
+* Apply the [extcode_9343_combined3.patch](https://github.com/sagemath/sage/files/ticket9343/extcode_9343_combined3.patch.gz) patch to `data/extcode`
 * Apply the [sagelib_9343_combined6.patch](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343_combined6.patch.gz) to `devel/sage`
-* Apply the [extcode_9343_combined3.patch](https://github.com/sagemath/sage/files/ticket9343/extcode_9343_combined3.patch.gz) patch to `data/extcode`
 * Apply the [sagelib_9343-heegner_ell_ratioanal.patch](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343-heegner_ell_ratioanal.patch.gz) patch to `devel/sage`
-
-TODO:
-* Get somebody to review this :-)
+* Apply the [9343_jd_review.patch](https://github.com/sagemath/sage/files/ticket9343/9343_jd_review.patch.gz) patch to `devel/sage`
``````




---

archive/issue_events_118518.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-08-14T20:38:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9343#event-118518"
}
```



---

archive/issue_comments_079346.json:
```json
{
    "body": "<div id=\"comment:211\" align=\"right\">comment:211</div>\n\nReplying to [@nexttime](#comment%3A209):\n> The version prior to this, i.e. without William's patches (but John's reviewer patch), passed all long tests on Ubuntu 7.10 x86 (Pentium 4, gcc 4.2.1, native code, O2), too.\n\n... and just passed `ptestlong` *with* these, too. :)",
    "created_at": "2010-08-14T20:43:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79346",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:211" align="right">comment:211</div>

Replying to [@nexttime](#comment%3A209):
> The version prior to this, i.e. without William's patches (but John's reviewer patch), passed all long tests on Ubuntu 7.10 x86 (Pentium 4, gcc 4.2.1, native code, O2), too.

... and just passed `ptestlong` *with* these, too. :)



---

archive/issue_comments_079347.json:
```json
{
    "body": "<div id=\"comment:212\" align=\"right\">comment:212</div>\n\nReplying to [@jdemeyer](#comment%3A210):\n\nIn case somebody missed it, we have a new genus2reduction spkg (p8 instead of p7).",
    "created_at": "2010-08-14T21:16:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79347",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:212" align="right">comment:212</div>

Replying to [@jdemeyer](#comment%3A210):

In case somebody missed it, we have a new genus2reduction spkg (p8 instead of p7).



---

archive/issue_comments_079348.json:
```json
{
    "body": "<div id=\"comment:213\" align=\"right\">comment:213</div>\n\nGood work on 9343_jd_review.patch:  you completed the job I left unfinished (using the pari library for analytic ranks, making gp_cremona.py finally completely redundant), and I also see that you wrapped some other useful pari library functions.\n\nI am now doing a fresh test of everything and will report back on Sunday.",
    "created_at": "2010-08-14T21:30:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79348",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:213" align="right">comment:213</div>

Good work on 9343_jd_review.patch:  you completed the job I left unfinished (using the pari library for analytic ranks, making gp_cremona.py finally completely redundant), and I also see that you wrapped some other useful pari library functions.

I am now doing a fresh test of everything and will report back on Sunday.



---

archive/issue_comments_079349.json:
```json
{
    "body": "Attachment: **[9343_jd_review.patch.gz](https://github.com/sagemath/sage/files/ticket9343/9343_jd_review.patch.gz)**\n\nVarious fixes, remove gp_cremona.py",
    "created_at": "2010-08-14T22:25:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79349",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[9343_jd_review.patch.gz](https://github.com/sagemath/sage/files/ticket9343/9343_jd_review.patch.gz)**

Various fixes, remove gp_cremona.py



---

archive/issue_comments_079350.json:
```json
{
    "body": "<div id=\"comment:214\" align=\"right\">comment:214</div>\n\nI updated my last patch to fix the analytic_rank doctests on 32-bit.",
    "created_at": "2010-08-14T22:27:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79350",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:214" align="right">comment:214</div>

I updated my last patch to fix the analytic_rank doctests on 32-bit.



---

archive/issue_comments_079351.json:
```json
{
    "body": "<div id=\"comment:215\" align=\"right\">comment:215</div>\n\nReplying to [@nexttime](#comment%3A204):\n> In case this ticket gets merged soon, we should also address #9722 (Fedora 13 FLTK issue, at least the linker error) *here*. (Though I haven't yet checked if it is still present in our current svn snapshot; will do that later.)\n\n#9722 seems to be a non-issue with our PARI snapshot. (At least I cannot reproduce it on 32-bit Fedora 13.)",
    "created_at": "2010-08-14T22:41:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79351",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:215" align="right">comment:215</div>

Replying to [@nexttime](#comment%3A204):
> In case this ticket gets merged soon, we should also address #9722 (Fedora 13 FLTK issue, at least the linker error) *here*. (Though I haven't yet checked if it is still present in our current svn snapshot; will do that later.)

#9722 seems to be a non-issue with our PARI snapshot. (At least I cannot reproduce it on 32-bit Fedora 13.)



---

archive/issue_comments_079352.json:
```json
{
    "body": "<div id=\"comment:216\" align=\"right\">comment:216</div>\n\nI just tried the steps outlined at the top. \n\n* Pari installed ok\n* genus2reduction installed ok\n* lcalc installed ok. \n* extcode_9343_combined3.patch patch to data/extcode installed ok. \n \nThen when I tried to apply the library patches, I was less than successful. I'm not sure though if the \n\n```\nhg qpush -a\n```\nwas the right thing to do after `hg qimport` of the library patches. So I could have made a mistake, but this is what I did, and this is what results I got. (This is an OpenSolaris system, which apart from some numerical noise issues, and a totally busted `sympow` otherwise passes all the doc tests.)\n\n```\ndrkirkby@hawk:~/32/sage-4.5.3.alpha0/devel/sage$ hg status\ndrkirkby@hawk:~/32/sage-4.5.3.alpha0/devel/sage$ hg qimport https://github.com/sagemath/sage/files/ticket9343/sagelib_9343_combined6.patch.gz\nadding sagelib_9343_combined6.patch to series file\ndrkirkby@hawk:~/32/sage-4.5.3.alpha0/devel/sage$ hg qimport https://github.com/sagemath/sage/files/ticket9343/sagelib_9343-heegner_ell_ratioanal.patch.gz\nadding sagelib_9343-heegner_ell_ratioanal.patch to series file\ndrkirkby@hawk:~/32/sage-4.5.3.alpha0/devel/sage$ hg qimport https://github.com/sagemath/sage/files/ticket9343/9343_jd_review.patch.gz\nadding 9343_jd_review.patch to series file\ndrkirkby@hawk:~/32/sage-4.5.3.alpha0/devel/sage$ hg qpush -a\napplying 9343_jd_review.patch\npatching file sage/interfaces/gp.py\nHunk #1 FAILED at 599\nHunk #2 FAILED at 613\nHunk #3 FAILED at 889\nHunk #4 FAILED at 990\nHunk #5 FAILED at 1003\n5 out of 5 hunks FAILED -- saving rejects to file sage/interfaces/gp.py.rej\npatching file sage/libs/pari/decl.pxi\nHunk #1 FAILED at 35\nHunk #2 FAILED at 94\nHunk #3 FAILED at 279\nHunk #4 FAILED at 298\nHunk #5 FAILED at 313\nHunk #6 FAILED at 325\nHunk #7 FAILED at 372\nHunk #8 succeeded at 871 with fuzz 2 (offset 198 lines).\nHunk #9 succeeded at 945 with fuzz 2 (offset 217 lines).\nHunk #10 succeeded at 968 with fuzz 1 (offset 218 lines).\nHunk #11 FAILED at 1041\n8 out of 11 hunks FAILED -- saving rejects to file sage/libs/pari/decl.pxi.rej\npatching file sage/rings/number_field/number_field.py\nHunk #2 FAILED at 7533\n1 out of 2 hunks FAILED -- saving rejects to file sage/rings/number_field/number_field.py.rej\npatching file sage/rings/real_mpfr.pyx\nHunk #2 FAILED at 2588\nHunk #3 FAILED at 2607\nHunk #4 succeeded at 2618 with fuzz 1 (offset -8 lines).\nHunk #5 FAILED at 2631\n3 out of 5 hunks FAILED -- saving rejects to file sage/rings/real_mpfr.pyx.rej\npatching file sage/schemes/elliptic_curves/ell_finite_field.py\nHunk #1 FAILED at 36\n1 out of 1 hunks FAILED -- saving rejects to file sage/schemes/elliptic_curves/ell_finite_field.py.rej\npatching file sage/schemes/elliptic_curves/ell_rational_field.py\nHunk #2 FAILED at 1271\nHunk #4 FAILED at 1347\n2 out of 4 hunks FAILED -- saving rejects to file sage/schemes/elliptic_curves/ell_rational_field.py.rej\npatching file sage/schemes/elliptic_curves/gp_cremona.py\nHunk #1 FAILED at 0\n1 out of 1 hunks FAILED -- saving rejects to file sage/schemes/elliptic_curves/gp_cremona.py.rej\npatch failed, unable to continue (try -v)\npatch failed, rejects left in working dir\nerrors during apply, please fix and refresh 9343_jd_review.patch\ndrkirkby@hawk:~/32/sage-4.5.3.alpha0/devel/sage$ hg status\n```\n\nDave",
    "created_at": "2010-08-15T02:07:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79352",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:216" align="right">comment:216</div>

I just tried the steps outlined at the top. 

* Pari installed ok
* genus2reduction installed ok
* lcalc installed ok. 
* extcode_9343_combined3.patch patch to data/extcode installed ok. 
 
Then when I tried to apply the library patches, I was less than successful. I'm not sure though if the 

```
hg qpush -a
```
was the right thing to do after `hg qimport` of the library patches. So I could have made a mistake, but this is what I did, and this is what results I got. (This is an OpenSolaris system, which apart from some numerical noise issues, and a totally busted `sympow` otherwise passes all the doc tests.)

```
drkirkby@hawk:~/32/sage-4.5.3.alpha0/devel/sage$ hg status
drkirkby@hawk:~/32/sage-4.5.3.alpha0/devel/sage$ hg qimport https://github.com/sagemath/sage/files/ticket9343/sagelib_9343_combined6.patch.gz
adding sagelib_9343_combined6.patch to series file
drkirkby@hawk:~/32/sage-4.5.3.alpha0/devel/sage$ hg qimport https://github.com/sagemath/sage/files/ticket9343/sagelib_9343-heegner_ell_ratioanal.patch.gz
adding sagelib_9343-heegner_ell_ratioanal.patch to series file
drkirkby@hawk:~/32/sage-4.5.3.alpha0/devel/sage$ hg qimport https://github.com/sagemath/sage/files/ticket9343/9343_jd_review.patch.gz
adding 9343_jd_review.patch to series file
drkirkby@hawk:~/32/sage-4.5.3.alpha0/devel/sage$ hg qpush -a
applying 9343_jd_review.patch
patching file sage/interfaces/gp.py
Hunk #1 FAILED at 599
Hunk #2 FAILED at 613
Hunk #3 FAILED at 889
Hunk #4 FAILED at 990
Hunk #5 FAILED at 1003
5 out of 5 hunks FAILED -- saving rejects to file sage/interfaces/gp.py.rej
patching file sage/libs/pari/decl.pxi
Hunk #1 FAILED at 35
Hunk #2 FAILED at 94
Hunk #3 FAILED at 279
Hunk #4 FAILED at 298
Hunk #5 FAILED at 313
Hunk #6 FAILED at 325
Hunk #7 FAILED at 372
Hunk #8 succeeded at 871 with fuzz 2 (offset 198 lines).
Hunk #9 succeeded at 945 with fuzz 2 (offset 217 lines).
Hunk #10 succeeded at 968 with fuzz 1 (offset 218 lines).
Hunk #11 FAILED at 1041
8 out of 11 hunks FAILED -- saving rejects to file sage/libs/pari/decl.pxi.rej
patching file sage/rings/number_field/number_field.py
Hunk #2 FAILED at 7533
1 out of 2 hunks FAILED -- saving rejects to file sage/rings/number_field/number_field.py.rej
patching file sage/rings/real_mpfr.pyx
Hunk #2 FAILED at 2588
Hunk #3 FAILED at 2607
Hunk #4 succeeded at 2618 with fuzz 1 (offset -8 lines).
Hunk #5 FAILED at 2631
3 out of 5 hunks FAILED -- saving rejects to file sage/rings/real_mpfr.pyx.rej
patching file sage/schemes/elliptic_curves/ell_finite_field.py
Hunk #1 FAILED at 36
1 out of 1 hunks FAILED -- saving rejects to file sage/schemes/elliptic_curves/ell_finite_field.py.rej
patching file sage/schemes/elliptic_curves/ell_rational_field.py
Hunk #2 FAILED at 1271
Hunk #4 FAILED at 1347
2 out of 4 hunks FAILED -- saving rejects to file sage/schemes/elliptic_curves/ell_rational_field.py.rej
patching file sage/schemes/elliptic_curves/gp_cremona.py
Hunk #1 FAILED at 0
1 out of 1 hunks FAILED -- saving rejects to file sage/schemes/elliptic_curves/gp_cremona.py.rej
patch failed, unable to continue (try -v)
patch failed, rejects left in working dir
errors during apply, please fix and refresh 9343_jd_review.patch
drkirkby@hawk:~/32/sage-4.5.3.alpha0/devel/sage$ hg status
```

Dave



---

archive/issue_comments_079353.json:
```json
{
    "body": "<div id=\"comment:217\" align=\"right\">comment:217</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A216):\n> \n> ```\n> drkirkby@hawk:~/32/sage-4.5.3.alpha0/devel/sage$ hg status\n> drkirkby@hawk:~/32/sage-4.5.3.alpha0/devel/sage$ hg qimport https://github.com/sagemath/sage/files/ticket9343/sagelib_9343_combined6.patch.gz\n> adding sagelib_9343_combined6.patch to series file\n> drkirkby@hawk:~/32/sage-4.5.3.alpha0/devel/sage$ hg qimport https://github.com/sagemath/sage/files/ticket9343/sagelib_9343-heegner_ell_ratioanal.patch.gz\n> adding sagelib_9343-heegner_ell_ratioanal.patch to series file\n> drkirkby@hawk:~/32/sage-4.5.3.alpha0/devel/sage$ hg qimport https://github.com/sagemath/sage/files/ticket9343/9343_jd_review.patch.gz\n> adding 9343_jd_review.patch to series file\n> drkirkby@hawk:~/32/sage-4.5.3.alpha0/devel/sage$ hg qpush -a\n> applying 9343_jd_review.patch\n> ```\n\nYou're applying the patches in the wrong order.  I usually do\n\n```\n$ hg qimport <patch>\n$ hg qpush\n$ hg qimport <patch>\n$ hg qpush\n...\n```\n\nwhich should work fine.  Maybe there is a better way, I don't know much about Mercurial.",
    "created_at": "2010-08-15T06:51:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79353",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:217" align="right">comment:217</div>

Replying to [@sagetrac-drkirkby](#comment%3A216):
> 
> ```
> drkirkby@hawk:~/32/sage-4.5.3.alpha0/devel/sage$ hg status
> drkirkby@hawk:~/32/sage-4.5.3.alpha0/devel/sage$ hg qimport https://github.com/sagemath/sage/files/ticket9343/sagelib_9343_combined6.patch.gz
> adding sagelib_9343_combined6.patch to series file
> drkirkby@hawk:~/32/sage-4.5.3.alpha0/devel/sage$ hg qimport https://github.com/sagemath/sage/files/ticket9343/sagelib_9343-heegner_ell_ratioanal.patch.gz
> adding sagelib_9343-heegner_ell_ratioanal.patch to series file
> drkirkby@hawk:~/32/sage-4.5.3.alpha0/devel/sage$ hg qimport https://github.com/sagemath/sage/files/ticket9343/9343_jd_review.patch.gz
> adding 9343_jd_review.patch to series file
> drkirkby@hawk:~/32/sage-4.5.3.alpha0/devel/sage$ hg qpush -a
> applying 9343_jd_review.patch
> ```

You're applying the patches in the wrong order.  I usually do

```
$ hg qimport <patch>
$ hg qpush
$ hg qimport <patch>
$ hg qpush
...
```

which should work fine.  Maybe there is a better way, I don't know much about Mercurial.



---

archive/issue_comments_079354.json:
```json
{
    "body": "<div id=\"comment:218\" align=\"right\">comment:218</div>\n\nI agree with David that Mercurial is counter-intuitive -- you have to push one at a time since push means \"push the last patch imported\".\n\nMy complete new spkg and patch install and test on a 32-bit Ubuntu (Intel, gcc 4.2.4) went smoothly, with only the 32/64 issues with the new analytic rank as Jeroen found.  So I popped the last patch and pushed the replacement, and now that works fine.\n\nNow testing the rebuilding od documentation...",
    "created_at": "2010-08-15T11:37:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79354",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:218" align="right">comment:218</div>

I agree with David that Mercurial is counter-intuitive -- you have to push one at a time since push means "push the last patch imported".

My complete new spkg and patch install and test on a 32-bit Ubuntu (Intel, gcc 4.2.4) went smoothly, with only the 32/64 issues with the new analytic rank as Jeroen found.  So I popped the last patch and pushed the replacement, and now that works fine.

Now testing the rebuilding od documentation...



---

archive/issue_comments_079355.json:
```json
{
    "body": "<div id=\"comment:219\" align=\"right\">comment:219</div>\n\nI have made a new sage distribution with this ticket, based on 4.5.3.alpha0. It also includes the Singular update (#8059). Download it from http://cage.ugent.be/~jdemeyer/sage/sage-4.6.prealpha0.tar",
    "created_at": "2010-08-15T11:39:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79355",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:219" align="right">comment:219</div>

I have made a new sage distribution with this ticket, based on 4.5.3.alpha0. It also includes the Singular update (#8059). Download it from http://cage.ugent.be/~jdemeyer/sage/sage-4.6.prealpha0.tar



---

archive/issue_comments_079356.json:
```json
{
    "body": "<div id=\"comment:220\" align=\"right\">comment:220</div>\n\nReplying to [@JohnCremona](#comment%3A218):\n\n> Now testing the rebuilding od documentation...\n\nhtml docs rebuilt with no errors/warnings.",
    "created_at": "2010-08-15T11:42:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79356",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:220" align="right">comment:220</div>

Replying to [@JohnCremona](#comment%3A218):

> Now testing the rebuilding od documentation...

html docs rebuilt with no errors/warnings.



---

archive/issue_comments_079357.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,3 +8,6 @@\n * Apply the [sagelib_9343_combined6.patch](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343_combined6.patch.gz) to `devel/sage`\n * Apply the [sagelib_9343-heegner_ell_ratioanal.patch](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343-heegner_ell_ratioanal.patch.gz) patch to `devel/sage`\n * Apply the [9343_jd_review.patch](https://github.com/sagemath/sage/files/ticket9343/9343_jd_review.patch.gz) patch to `devel/sage`\n+\n+Alternatively, you can download a complete Sage distribution with all these patches (and also the new Singular spkg, see #8059) from\n+* http://cage.ugent.be/~jdemeyer/sage/sage-4.6.prealpha0.tar\n``````\n",
    "created_at": "2010-08-15T11:43:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79357",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,3 +8,6 @@
 * Apply the [sagelib_9343_combined6.patch](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343_combined6.patch.gz) to `devel/sage`
 * Apply the [sagelib_9343-heegner_ell_ratioanal.patch](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343-heegner_ell_ratioanal.patch.gz) patch to `devel/sage`
 * Apply the [9343_jd_review.patch](https://github.com/sagemath/sage/files/ticket9343/9343_jd_review.patch.gz) patch to `devel/sage`
+
+Alternatively, you can download a complete Sage distribution with all these patches (and also the new Singular spkg, see #8059) from
+* http://cage.ugent.be/~jdemeyer/sage/sage-4.6.prealpha0.tar
``````




---

archive/issue_comments_079358.json:
```json
{
    "body": "<div id=\"comment:222\" align=\"right\">comment:222</div>\n\nReplying to [@jdemeyer](#comment%3A219):\n> I have made a new sage distribution with this ticket, based on 4.5.3.alpha0. It also includes the Singular update (#8059). Download it from http://cage.ugent.be/~jdemeyer/sage/sage-4.6.prealpha0.tar\n\nOK, got that -- will do 32- and 64-bit builds and report back.",
    "created_at": "2010-08-15T11:46:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79358",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:222" align="right">comment:222</div>

Replying to [@jdemeyer](#comment%3A219):
> I have made a new sage distribution with this ticket, based on 4.5.3.alpha0. It also includes the Singular update (#8059). Download it from http://cage.ugent.be/~jdemeyer/sage/sage-4.6.prealpha0.tar

OK, got that -- will do 32- and 64-bit builds and report back.



---

archive/issue_comments_079359.json:
```json
{
    "body": "<div id=\"comment:223\" align=\"right\">comment:223</div>\n\nReplying to [@jdemeyer](#comment%3A219):\n> I have made a new sage distribution with this ticket, based on 4.5.3.alpha0. It also includes the Singular update (#8059). Download it from http://cage.ugent.be/~jdemeyer/sage/sage-4.6.prealpha0.tar\n\nAnnounce on sage-release? ;-)\n\nBtw, Mitesh is currently compiling [Sage 4.5.3.alpha1](http://trac.sagemath.org/sage_trac/query?group=component&order=priority&col=id&col=summary&col=status&col=owner&col=type&col=priority&col=milestone&merged=~4.5.3.alpha1) (which includes the new Singular, a new libm4ri and an updated PolyBoRi package, and some bug fixes).",
    "created_at": "2010-08-15T14:56:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79359",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:223" align="right">comment:223</div>

Replying to [@jdemeyer](#comment%3A219):
> I have made a new sage distribution with this ticket, based on 4.5.3.alpha0. It also includes the Singular update (#8059). Download it from http://cage.ugent.be/~jdemeyer/sage/sage-4.6.prealpha0.tar

Announce on sage-release? ;-)

Btw, Mitesh is currently compiling [Sage 4.5.3.alpha1](http://trac.sagemath.org/sage_trac/query?group=component&order=priority&col=id&col=summary&col=status&col=owner&col=type&col=priority&col=milestone&merged=~4.5.3.alpha1) (which includes the new Singular, a new libm4ri and an updated PolyBoRi package, and some bug fixes).



---

archive/issue_events_118519.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2010-08-15T14:56:38Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "title_is": "Upgrade PARI to svn snapshot 12577 - a pre-release of PARI 2.4.3.",
    "title_was": "upgrade Pari to svn snapshot 12577 - a pre-release of Pari 2.4.3.",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9343#event-118519"
}
```



---

archive/issue_comments_079360.json:
```json
{
    "body": "<div id=\"comment:224\" align=\"right\">comment:224</div>\n\nReplying to [@JohnCremona](#comment%3A222):\n> Replying to [@jdemeyer](#comment%3A219):\n> > I have made a new sage distribution with this ticket, based on 4.5.3.alpha0. It also includes the Singular update (#8059). Download it from http://cage.ugent.be/~jdemeyer/sage/sage-4.6.prealpha0.tar\n> \n> \n> OK, got that -- will do 32- and 64-bit builds and report back.\n\nBuilt fine and all tests pass on 32-bit ubuntu (Intel, gcc 4.2.4) and 64-bit ubuntu (AMD, 4.3.3).",
    "created_at": "2010-08-15T16:12:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79360",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:224" align="right">comment:224</div>

Replying to [@JohnCremona](#comment%3A222):
> Replying to [@jdemeyer](#comment%3A219):
> > I have made a new sage distribution with this ticket, based on 4.5.3.alpha0. It also includes the Singular update (#8059). Download it from http://cage.ugent.be/~jdemeyer/sage/sage-4.6.prealpha0.tar
> 
> 
> OK, got that -- will do 32- and 64-bit builds and report back.

Built fine and all tests pass on 32-bit ubuntu (Intel, gcc 4.2.4) and 64-bit ubuntu (AMD, 4.3.3).



---

archive/issue_comments_079361.json:
```json
{
    "body": "<div id=\"comment:225\" align=\"right\">comment:225</div>\n\nReplying to [@JohnCremona](#comment%3A224):\n> Replying to [@JohnCremona](#comment%3A222):\n> > Replying to [@jdemeyer](#comment%3A219):\n> > > I have made a new sage distribution with this ticket, based on 4.5.3.alpha0. It also includes the Singular update (#8059). Download it from http://cage.ugent.be/~jdemeyer/sage/sage-4.6.prealpha0.tar\n> > \n> > \n> > OK, got that -- will do 32- and 64-bit builds and report back.\n> \n> \n> Built fine and all tests pass on 32-bit ubuntu (Intel, gcc 4.2.4) and 64-bit ubuntu (AMD, 4.3.3).\n> \n\nHowever, this needs cleaning up:\n\n```\njec@selmer%pwd\n/storage/jec/sage-4.6.prealpha0/devel/sage\njec@selmer%hg status\n! sage/schemes/elliptic_curves/gp_cremona.py\n```\n-- I think \"hg remove\" & then commit will do it.",
    "created_at": "2010-08-15T16:18:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79361",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:225" align="right">comment:225</div>

Replying to [@JohnCremona](#comment%3A224):
> Replying to [@JohnCremona](#comment%3A222):
> > Replying to [@jdemeyer](#comment%3A219):
> > > I have made a new sage distribution with this ticket, based on 4.5.3.alpha0. It also includes the Singular update (#8059). Download it from http://cage.ugent.be/~jdemeyer/sage/sage-4.6.prealpha0.tar
> > 
> > 
> > OK, got that -- will do 32- and 64-bit builds and report back.
> 
> 
> Built fine and all tests pass on 32-bit ubuntu (Intel, gcc 4.2.4) and 64-bit ubuntu (AMD, 4.3.3).
> 

However, this needs cleaning up:

```
jec@selmer%pwd
/storage/jec/sage-4.6.prealpha0/devel/sage
jec@selmer%hg status
! sage/schemes/elliptic_curves/gp_cremona.py
```
-- I think "hg remove" & then commit will do it.



---

archive/issue_comments_079362.json:
```json
{
    "body": "<div id=\"comment:226\" align=\"right\">comment:226</div>\n\nReplying to [@JohnCremona](#comment%3A225):\n> However, this needs cleaning up:\n\n\n```\njec@selmer%pwd\n/storage/jec/sage-4.6.prealpha0/devel/sage\njec@selmer%hg status\n! sage/schemes/elliptic_curves/gp_cremona.py\n```\n> -- I think \"hg remove\" & then commit will do it.\n\nYes, and there are some more. Try\n\n```sh\nfind $SAGE_ROOT -name .hg -exec sh -c \"cd {}; hg status\" \\;\n```\nand you'll see them all.",
    "created_at": "2010-08-15T16:36:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79362",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:226" align="right">comment:226</div>

Replying to [@JohnCremona](#comment%3A225):
> However, this needs cleaning up:


```
jec@selmer%pwd
/storage/jec/sage-4.6.prealpha0/devel/sage
jec@selmer%hg status
! sage/schemes/elliptic_curves/gp_cremona.py
```
> -- I think "hg remove" & then commit will do it.

Yes, and there are some more. Try

```sh
find $SAGE_ROOT -name .hg -exec sh -c "cd {}; hg status" \;
```
and you'll see them all.



---

archive/issue_comments_079363.json:
```json
{
    "body": "<div id=\"comment:227\" align=\"right\">comment:227</div>\n\nReplying to [@JohnCremona](#comment%3A218):\n> I agree with David that Mercurial is counter-intuitive -- you have to push one at a time since push means \"push the last patch imported\".\n\nBut I did not type \n\n`hg qpush`\n\nbut instead \n\n{{{hg qpush -a}}\n\nLooking for help on that:\n\n```\ndrkirkby@hawk:~$ hg qpush -h\nhg qpush [-f] [-l] [-a] [-m] [-n NAME] [PATCH | INDEX]\n\npush the next patch onto the stack\n\n    When -f/--force is applied, all local changes in patched files\n    will be lost.\n\noptions:\n\n -f --force  apply if the patch has rejects\n -l --list   list patch name in commit text\n -a --all    apply all patches\n -m --merge  merge from another queue\n -n --name   merge queue name\n\nuse \"hg -v help qpush\" to show global options\n```\n\nI interpret that is meaning all of them would be applied. \n\nDave",
    "created_at": "2010-08-15T19:03:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79363",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:227" align="right">comment:227</div>

Replying to [@JohnCremona](#comment%3A218):
> I agree with David that Mercurial is counter-intuitive -- you have to push one at a time since push means "push the last patch imported".

But I did not type 

`hg qpush`

but instead 

{{{hg qpush -a}}

Looking for help on that:

```
drkirkby@hawk:~$ hg qpush -h
hg qpush [-f] [-l] [-a] [-m] [-n NAME] [PATCH | INDEX]

push the next patch onto the stack

    When -f/--force is applied, all local changes in patched files
    will be lost.

options:

 -f --force  apply if the patch has rejects
 -l --list   list patch name in commit text
 -a --all    apply all patches
 -m --merge  merge from another queue
 -n --name   merge queue name

use "hg -v help qpush" to show global options
```

I interpret that is meaning all of them would be applied. 

Dave



---

archive/issue_comments_079364.json:
```json
{
    "body": "<div id=\"comment:228\" align=\"right\">comment:228</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A227):\n> Replying to [@JohnCremona](#comment%3A218):\n> > I agree with David that Mercurial is counter-intuitive -- you have to push one at a time since push means \"push the last patch imported\".\n> \n> \n> But I did not type \n> \n> `hg qpush`\n> \n> but instead \n> \n> {{{hg qpush -a}}\n> \n> Looking for help on that:\n> \n> ```\n> drkirkby@hawk:~$ hg qpush -h\n> hg qpush [-f] [-l] [-a] [-m] [-n NAME] [PATCH | INDEX]\n> \n> push the next patch onto the stack\n> \n>     When -f/--force is applied, all local changes in patched files\n>     will be lost.\n> \n> options:\n> \n>  -f --force  apply if the patch has rejects\n>  -l --list   list patch name in commit text\n>  -a --all    apply all patches\n>  -m --merge  merge from another queue\n>  -n --name   merge queue name\n> \n> use \"hg -v help qpush\" to show global options\n> ```\n> \n> I interpret that is meaning all of them would be applied. \n> \n> Dave \n\nSure -- what is (possibly) counter intuitive is the *order* in which they are applied, which is the reverse of the order they were imported.  For this reason I find \"hg qpush -a\" rarely useful.",
    "created_at": "2010-08-15T19:21:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79364",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:228" align="right">comment:228</div>

Replying to [@sagetrac-drkirkby](#comment%3A227):
> Replying to [@JohnCremona](#comment%3A218):
> > I agree with David that Mercurial is counter-intuitive -- you have to push one at a time since push means "push the last patch imported".
> 
> 
> But I did not type 
> 
> `hg qpush`
> 
> but instead 
> 
> {{{hg qpush -a}}
> 
> Looking for help on that:
> 
> ```
> drkirkby@hawk:~$ hg qpush -h
> hg qpush [-f] [-l] [-a] [-m] [-n NAME] [PATCH | INDEX]
> 
> push the next patch onto the stack
> 
>     When -f/--force is applied, all local changes in patched files
>     will be lost.
> 
> options:
> 
>  -f --force  apply if the patch has rejects
>  -l --list   list patch name in commit text
>  -a --all    apply all patches
>  -m --merge  merge from another queue
>  -n --name   merge queue name
> 
> use "hg -v help qpush" to show global options
> ```
> 
> I interpret that is meaning all of them would be applied. 
> 
> Dave 

Sure -- what is (possibly) counter intuitive is the *order* in which they are applied, which is the reverse of the order they were imported.  For this reason I find "hg qpush -a" rarely useful.



---

archive/issue_comments_079365.json:
```json
{
    "body": "<div id=\"comment:229\" align=\"right\">comment:229</div>\n\nReplying to [@JohnCremona](#comment%3A225):\n> -- I think \"hg remove\" & then commit will do it.\n\nI see.  Simply removing the file is not good enough...",
    "created_at": "2010-08-15T19:48:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79365",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:229" align="right">comment:229</div>

Replying to [@JohnCremona](#comment%3A225):
> -- I think "hg remove" & then commit will do it.

I see.  Simply removing the file is not good enough...



---

archive/issue_comments_079366.json:
```json
{
    "body": "Attachment: **[trac_9343-sagelib-fix_sphinx_warning-reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket9343/trac_9343-sagelib-fix_sphinx_warning-reviewer.patch.gz)**\n\nFixes Sphinx warning from PariInstance.read() docstring. Apply to Sage library.",
    "created_at": "2010-08-15T22:33:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79366",
    "user": "https://github.com/nexttime"
}
```

Attachment: **[trac_9343-sagelib-fix_sphinx_warning-reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket9343/trac_9343-sagelib-fix_sphinx_warning-reviewer.patch.gz)**

Fixes Sphinx warning from PariInstance.read() docstring. Apply to Sage library.



---

archive/issue_comments_079367.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,6 +8,8 @@\n * Apply the [sagelib_9343_combined6.patch](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343_combined6.patch.gz) to `devel/sage`\n * Apply the [sagelib_9343-heegner_ell_ratioanal.patch](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343-heegner_ell_ratioanal.patch.gz) patch to `devel/sage`\n * Apply the [9343_jd_review.patch](https://github.com/sagemath/sage/files/ticket9343/9343_jd_review.patch.gz) patch to `devel/sage`\n+* Apply the [trac_9343-sagelib-fix_sphinx_warning-reviewer.patch](https://github.com/sagemath/sage/files/ticket9343/trac_9343-sagelib-fix_sphinx_warning-reviewer.patch.gz) patch to `devel/sage`\n \n Alternatively, you can download a complete Sage distribution with all these patches (and also the new Singular spkg, see #8059) from\n * http://cage.ugent.be/~jdemeyer/sage/sage-4.6.prealpha0.tar\n+* The Sphinx warning fix is not yet included.\n``````\n",
    "created_at": "2010-08-15T22:40:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79367",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,6 +8,8 @@
 * Apply the [sagelib_9343_combined6.patch](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343_combined6.patch.gz) to `devel/sage`
 * Apply the [sagelib_9343-heegner_ell_ratioanal.patch](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343-heegner_ell_ratioanal.patch.gz) patch to `devel/sage`
 * Apply the [9343_jd_review.patch](https://github.com/sagemath/sage/files/ticket9343/9343_jd_review.patch.gz) patch to `devel/sage`
+* Apply the [trac_9343-sagelib-fix_sphinx_warning-reviewer.patch](https://github.com/sagemath/sage/files/ticket9343/trac_9343-sagelib-fix_sphinx_warning-reviewer.patch.gz) patch to `devel/sage`
 
 Alternatively, you can download a complete Sage distribution with all these patches (and also the new Singular spkg, see #8059) from
 * http://cage.ugent.be/~jdemeyer/sage/sage-4.6.prealpha0.tar
+* The Sphinx warning fix is not yet included.
``````




---

archive/issue_comments_079368.json:
```json
{
    "body": "<div id=\"comment:230\" align=\"right\">comment:230</div>\n\nI've attached a [single-character patch](https://github.com/sagemath/sage/files/ticket9343/trac_9343-sagelib-fix_sphinx_warning-reviewer.patch.gz) to fix the Sphinx warning.",
    "created_at": "2010-08-15T22:40:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79368",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:230" align="right">comment:230</div>

I've attached a [single-character patch](https://github.com/sagemath/sage/files/ticket9343/trac_9343-sagelib-fix_sphinx_warning-reviewer.patch.gz) to fix the Sphinx warning.



---

archive/issue_comments_079369.json:
```json
{
    "body": "<div id=\"comment:231\" align=\"right\">comment:231</div>\n\nReplying to [@JohnCremona](#comment%3A224):\n> Replying to [@JohnCremona](#comment%3A222):\n> > Replying to [@jdemeyer](#comment%3A219):\n> > > I have made a new sage distribution with this ticket, based on 4.5.3.alpha0. It also includes the Singular update (#8059). Download it from http://cage.ugent.be/~jdemeyer/sage/sage-4.6.prealpha0.tar\n> > \n> > \n> > OK, got that -- will do 32- and 64-bit builds and report back.\n> \n> \n> Built fine and all tests pass on 32-bit ubuntu (Intel, gcc 4.2.4) and 64-bit ubuntu (AMD, 4.3.3).\n> \n\nAlso passed `ptestlong` on Fedora 13 x86 (Pentium 4 Prescott, gcc 4.4.4, native code, with `O2`).",
    "created_at": "2010-08-15T22:50:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79369",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:231" align="right">comment:231</div>

Replying to [@JohnCremona](#comment%3A224):
> Replying to [@JohnCremona](#comment%3A222):
> > Replying to [@jdemeyer](#comment%3A219):
> > > I have made a new sage distribution with this ticket, based on 4.5.3.alpha0. It also includes the Singular update (#8059). Download it from http://cage.ugent.be/~jdemeyer/sage/sage-4.6.prealpha0.tar
> > 
> > 
> > OK, got that -- will do 32- and 64-bit builds and report back.
> 
> 
> Built fine and all tests pass on 32-bit ubuntu (Intel, gcc 4.2.4) and 64-bit ubuntu (AMD, 4.3.3).
> 

Also passed `ptestlong` on Fedora 13 x86 (Pentium 4 Prescott, gcc 4.4.4, native code, with `O2`).



---

archive/issue_comments_079370.json:
```json
{
    "body": "<div id=\"comment:232\" align=\"right\">comment:232</div>\n\nI decided to test the http://cage.ugent.be/~jdemeyer/sage/sage-4.6.prealpha0.tar on my OpenSolaris machine. Sage has never passed all the doc tests on OpenSolaris, so I did not expect it to. I'll list the failures and what I think they are due to. There's one unexecpted failure. \n\nA better test would be on 't2', but that takes forever to build Sage. This is an order of magnitude quicker. \n\n```\nThe following tests failed:\n\n\tsage -t  -long devel/sage/sage/lfunctions/sympow.py # 13 doctests failed\n\tsage -t  -long devel/sage/sage/rings/polynomial/polynomial_quotient_ring.py # 1 doctests failed\n\tsage -t  -long devel/sage/sage/modular/abvar/abvar.py # 1 doctests failed\n\tsage -t  -long devel/sage/sage/modular/hecke/submodule.py # 1 doctests failed\n\tsage -t  -long devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py # 17 doctests failed\n\tsage -t  -long devel/sage/sage/stats/hmm/chmm.pyx # 3 doctests failed\n\tsage -t  -long devel/sage/sage/symbolic/expression.pyx # 2 doctests failed\n----------------------------------------------------------------------\nTotal time for all tests: 1913.9 seconds\n```\n\n1) `devel/sage/sage/lfunctions/sympow.py` SYMPOW is the worst code I've ever seen in Sage and is broken on Solaris x86 (#9703), Cygwin (#9166) and reportedly ArchLinux too. The examples at http://www.sagemath.org/doc/reference/sage/lfunctions/sympow.html do not work if you try them on sage.math, so I we can ignore this failure. The code in SYMPOW is so bad, I can't really be bothered to try to fix it. \n\n2) `devel/sage/sage/rings/polynomial/polynomial_quotient_ring.py` **An unexpected failure.** \n\n3) `devel/sage/sage/modular/abvar/abvar.py` Caused by SYMPOW. So we can ignore that. \n\n4) `devel/sage/sage/modular/hecke/submodule.py` Again, caused by SYMPOW, so we can ignore that. \n \n5) `devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py` Again, caused by SYMPOW, so we can ignore that. \n\n6) `devel/sage/sage/stats/hmm/chmm.pyx` This is numerical noise, #9735, which will hopefully be merged soon. \n\n7) ` devel/sage/sage/symbolic/expression.pyx` Again numerical noise (#9689  & #9693). \n\nSo the unexpected failure I see was this one:\n\n```\nsage -t  -long devel/sage/sage/rings/polynomial/polynomial_quotient_ring.py\n**********************************************************************\nFile \"/export/home/drkirkby/sage-4.6.prealpha0/devel/sage-main/sage/rings/polynomial/polynomial_quotient_ring.py\", line 1280:\n    sage: [phi(k.0^2) for phi in v]\nExpected:\n    [2.9757207403766761469671194565 - 1.2983430720865060515202099613e-47*I, -2.4088994371613850098316292196 + 1.9025410530350528612407363802*I, -2.4088994371613850098316292196 - 1.9025410530350528612407363802*I, 0.92103906697304693634806949137 - 3.0755331188457794473265418086*I, 0.92103906697304693634806949137 + 3.0755331188457794473265418086*I]\nGot:\n    [2.9757207403766761469671194565, -2.4088994371613850098316292196 + 1.9025410530350528612407363802*I, -2.4088994371613850098316292196 - 1.9025410530350528612407363802*I, 0.92103906697304693634806949137 - 3.0755331188457794473265418086*I, 0.92103906697304693634806949137 + 3.0755331188457794473265418086*I]\n**********************************************************************\n```\n\nCould that be due to Pari? If not, and you know where I should look for the cause, let me know. \n\nDave",
    "created_at": "2010-08-16T00:01:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79370",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:232" align="right">comment:232</div>

I decided to test the http://cage.ugent.be/~jdemeyer/sage/sage-4.6.prealpha0.tar on my OpenSolaris machine. Sage has never passed all the doc tests on OpenSolaris, so I did not expect it to. I'll list the failures and what I think they are due to. There's one unexecpted failure. 

A better test would be on 't2', but that takes forever to build Sage. This is an order of magnitude quicker. 

```
The following tests failed:

	sage -t  -long devel/sage/sage/lfunctions/sympow.py # 13 doctests failed
	sage -t  -long devel/sage/sage/rings/polynomial/polynomial_quotient_ring.py # 1 doctests failed
	sage -t  -long devel/sage/sage/modular/abvar/abvar.py # 1 doctests failed
	sage -t  -long devel/sage/sage/modular/hecke/submodule.py # 1 doctests failed
	sage -t  -long devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py # 17 doctests failed
	sage -t  -long devel/sage/sage/stats/hmm/chmm.pyx # 3 doctests failed
	sage -t  -long devel/sage/sage/symbolic/expression.pyx # 2 doctests failed
----------------------------------------------------------------------
Total time for all tests: 1913.9 seconds
```

1) `devel/sage/sage/lfunctions/sympow.py` SYMPOW is the worst code I've ever seen in Sage and is broken on Solaris x86 (#9703), Cygwin (#9166) and reportedly ArchLinux too. The examples at http://www.sagemath.org/doc/reference/sage/lfunctions/sympow.html do not work if you try them on sage.math, so I we can ignore this failure. The code in SYMPOW is so bad, I can't really be bothered to try to fix it. 

2) `devel/sage/sage/rings/polynomial/polynomial_quotient_ring.py` **An unexpected failure.** 

3) `devel/sage/sage/modular/abvar/abvar.py` Caused by SYMPOW. So we can ignore that. 

4) `devel/sage/sage/modular/hecke/submodule.py` Again, caused by SYMPOW, so we can ignore that. 
 
5) `devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py` Again, caused by SYMPOW, so we can ignore that. 

6) `devel/sage/sage/stats/hmm/chmm.pyx` This is numerical noise, #9735, which will hopefully be merged soon. 

7) ` devel/sage/sage/symbolic/expression.pyx` Again numerical noise (#9689  & #9693). 

So the unexpected failure I see was this one:

```
sage -t  -long devel/sage/sage/rings/polynomial/polynomial_quotient_ring.py
**********************************************************************
File "/export/home/drkirkby/sage-4.6.prealpha0/devel/sage-main/sage/rings/polynomial/polynomial_quotient_ring.py", line 1280:
    sage: [phi(k.0^2) for phi in v]
Expected:
    [2.9757207403766761469671194565 - 1.2983430720865060515202099613e-47*I, -2.4088994371613850098316292196 + 1.9025410530350528612407363802*I, -2.4088994371613850098316292196 - 1.9025410530350528612407363802*I, 0.92103906697304693634806949137 - 3.0755331188457794473265418086*I, 0.92103906697304693634806949137 + 3.0755331188457794473265418086*I]
Got:
    [2.9757207403766761469671194565, -2.4088994371613850098316292196 + 1.9025410530350528612407363802*I, -2.4088994371613850098316292196 - 1.9025410530350528612407363802*I, 0.92103906697304693634806949137 - 3.0755331188457794473265418086*I, 0.92103906697304693634806949137 + 3.0755331188457794473265418086*I]
**********************************************************************
```

Could that be due to Pari? If not, and you know where I should look for the cause, let me know. 

Dave



---

archive/issue_comments_079371.json:
```json
{
    "body": "<div id=\"comment:233\" align=\"right\">comment:233</div>\n\nReplying to [@nexttime](#comment%3A231):\n> Replying to [@JohnCremona](#comment%3A224):\n> > Replying to [@JohnCremona](#comment%3A222):\n> > > Replying to [@jdemeyer](#comment%3A219):\n> > > > I have made a new sage distribution with this ticket, based on 4.5.3.alpha0. It also includes the Singular update (#8059). Download it from http://cage.ugent.be/~jdemeyer/sage/sage-4.6.prealpha0.tar\n> > > \n> > > \n> > > OK, got that -- will do 32- and 64-bit builds and report back.\n> > \n> > \n> > Built fine and all tests pass on 32-bit ubuntu (Intel, gcc 4.2.4) and 64-bit ubuntu (AMD, 4.3.3).\n> > \n> \n> \n> Also passed `ptestlong` on Fedora 13 x86 (Pentium 4 Prescott, gcc 4.4.4, native code, with `O2`).\n\nPassed `testlong` on Ubuntu 9.04 x86_64 (Core2, gcc 4.3.3, native code, with `O2`), too.",
    "created_at": "2010-08-16T01:26:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79371",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:233" align="right">comment:233</div>

Replying to [@nexttime](#comment%3A231):
> Replying to [@JohnCremona](#comment%3A224):
> > Replying to [@JohnCremona](#comment%3A222):
> > > Replying to [@jdemeyer](#comment%3A219):
> > > > I have made a new sage distribution with this ticket, based on 4.5.3.alpha0. It also includes the Singular update (#8059). Download it from http://cage.ugent.be/~jdemeyer/sage/sage-4.6.prealpha0.tar
> > > 
> > > 
> > > OK, got that -- will do 32- and 64-bit builds and report back.
> > 
> > 
> > Built fine and all tests pass on 32-bit ubuntu (Intel, gcc 4.2.4) and 64-bit ubuntu (AMD, 4.3.3).
> > 
> 
> 
> Also passed `ptestlong` on Fedora 13 x86 (Pentium 4 Prescott, gcc 4.4.4, native code, with `O2`).

Passed `testlong` on Ubuntu 9.04 x86_64 (Core2, gcc 4.3.3, native code, with `O2`), too.



---

archive/issue_comments_079372.json:
```json
{
    "body": "<div id=\"comment:234\" align=\"right\">comment:234</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A232):\n> So the unexpected failure I see was this one:\n\n```\nsage -t  -long devel/sage/sage/rings/polynomial/polynomial_quotient_ring.py\n**********************************************************************\nFile \"/export/home/drkirkby/sage-4.6.prealpha0/devel/sage-main/sage/rings/polynomial/polynomial_quotient_ring.py\", line 1280:\n    sage: [phi(k.0^2) for phi in v]\nExpected:\n    [2.9757207403766761469671194565 - 1.2983430720865060515202099613e-47*I, -2.4088994371613850098316292196 + 1.9025410530350528612407363802*I, -2.4088994371613850098316292196 - 1.9025410530350528612407363802*I, 0.92103906697304693634806949137 - 3.0755331188457794473265418086*I, 0.92103906697304693634806949137 + 3.0755331188457794473265418086*I]\nGot:\n    [2.9757207403766761469671194565, -2.4088994371613850098316292196 + 1.9025410530350528612407363802*I, -2.4088994371613850098316292196 - 1.9025410530350528612407363802*I, 0.92103906697304693634806949137 - 3.0755331188457794473265418086*I, 0.92103906697304693634806949137 + 3.0755331188457794473265418086*I]\n**********************************************************************\n```\n\nThis particular doctest was changed by this patch.  Interestingly, it is a test which is documented to give a different result on 32-bit and 64-bit systems and your result is precisely the correct result for a 64-bit machine.  This can probably be solved with \"...\"",
    "created_at": "2010-08-16T05:28:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79372",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:234" align="right">comment:234</div>

Replying to [@sagetrac-drkirkby](#comment%3A232):
> So the unexpected failure I see was this one:

```
sage -t  -long devel/sage/sage/rings/polynomial/polynomial_quotient_ring.py
**********************************************************************
File "/export/home/drkirkby/sage-4.6.prealpha0/devel/sage-main/sage/rings/polynomial/polynomial_quotient_ring.py", line 1280:
    sage: [phi(k.0^2) for phi in v]
Expected:
    [2.9757207403766761469671194565 - 1.2983430720865060515202099613e-47*I, -2.4088994371613850098316292196 + 1.9025410530350528612407363802*I, -2.4088994371613850098316292196 - 1.9025410530350528612407363802*I, 0.92103906697304693634806949137 - 3.0755331188457794473265418086*I, 0.92103906697304693634806949137 + 3.0755331188457794473265418086*I]
Got:
    [2.9757207403766761469671194565, -2.4088994371613850098316292196 + 1.9025410530350528612407363802*I, -2.4088994371613850098316292196 - 1.9025410530350528612407363802*I, 0.92103906697304693634806949137 - 3.0755331188457794473265418086*I, 0.92103906697304693634806949137 + 3.0755331188457794473265418086*I]
**********************************************************************
```

This particular doctest was changed by this patch.  Interestingly, it is a test which is documented to give a different result on 32-bit and 64-bit systems and your result is precisely the correct result for a 64-bit machine.  This can probably be solved with "..."



---

archive/issue_comments_079373.json:
```json
{
    "body": "<div id=\"comment:235\" align=\"right\">comment:235</div>\n\nReplying to [@jdemeyer](#comment%3A234):\n\n> This particular doctest was changed by this patch.  Interestingly, it is a test which is documented to give a different result on 32-bit and 64-bit systems and your result is precisely the correct result for a 64-bit machine.  This can probably be solved with \"...\"\n\nNote the machine I used is 64-bit (it has a quad core 3.33 GHz Intel Xeon W3580 CPU), but the build was performed 32-bit. Both Solaris and OpenSolaris build 32-bit applications by default - for 64-bit, you need to add the `-m64` compiler switch when building. The 64-bit builds of Sage are not very successful yet. \n\nDoes anyone know what the result should be? For the first result, I get the **real number** `2.9757207403766761469671194565` but the expected value is the **complex number** `2.9757207403766761469671194565 - 1.2983430720865060515202099613e-47*I` So for the real part I get **exactly** the same number, but I get no imaginary part whatsoever. \n\nI assume someone here must know the maths behind this, and know whether the result is supposed to be real or complex. If it should really be real (so the number I got is actually the more accurate of the two), then putting dots would be **very** dangerous. Then a result of `2.9757207403766761469671194565 + 1e300*I` would still pass! That's almost entirely imaginary, with a very small real part in comparison to the massive imaginary component. \n\nDave",
    "created_at": "2010-08-16T09:02:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79373",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:235" align="right">comment:235</div>

Replying to [@jdemeyer](#comment%3A234):

> This particular doctest was changed by this patch.  Interestingly, it is a test which is documented to give a different result on 32-bit and 64-bit systems and your result is precisely the correct result for a 64-bit machine.  This can probably be solved with "..."

Note the machine I used is 64-bit (it has a quad core 3.33 GHz Intel Xeon W3580 CPU), but the build was performed 32-bit. Both Solaris and OpenSolaris build 32-bit applications by default - for 64-bit, you need to add the `-m64` compiler switch when building. The 64-bit builds of Sage are not very successful yet. 

Does anyone know what the result should be? For the first result, I get the **real number** `2.9757207403766761469671194565` but the expected value is the **complex number** `2.9757207403766761469671194565 - 1.2983430720865060515202099613e-47*I` So for the real part I get **exactly** the same number, but I get no imaginary part whatsoever. 

I assume someone here must know the maths behind this, and know whether the result is supposed to be real or complex. If it should really be real (so the number I got is actually the more accurate of the two), then putting dots would be **very** dangerous. Then a result of `2.9757207403766761469671194565 + 1e300*I` would still pass! That's almost entirely imaginary, with a very small real part in comparison to the massive imaginary component. 

Dave



---

archive/issue_comments_079374.json:
```json
{
    "body": "<div id=\"comment:236\" align=\"right\">comment:236</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A235):\n\n> Does anyone know what the result should be? For the first result, I get the **real number** `2.9757207403766761469671194565` but the expected value is the **complex number** `2.9757207403766761469671194565 - 1.2983430720865060515202099613e-47*I` So for the real part I get **exactly** the same number, but I get no imaginary part whatsoever. \n> \n> I assume someone here must know the maths behind this, and know whether the result is supposed to be real or complex. If it should really be real (so the number I got is actually the more accurate of the two), then putting dots would be **very** dangerous. Then a result of `2.9757207403766761469671194565 + 1e300*I` would still pass! That's almost entirely imaginary, with a very small real part in comparison to the massive imaginary component. \n\nMaybe rather than directly testing the answer, one could do something like this:\n\n```\nsage: x = [calculation]; abs(x - 2.975975720740376676146967119) < 10^(-27)\nTrue\n```\nThat would be less dangerous, while still allowing the necessary flexibility.",
    "created_at": "2010-08-16T09:17:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79374",
    "user": "https://github.com/loefflerd"
}
```

<div id="comment:236" align="right">comment:236</div>

Replying to [@sagetrac-drkirkby](#comment%3A235):

> Does anyone know what the result should be? For the first result, I get the **real number** `2.9757207403766761469671194565` but the expected value is the **complex number** `2.9757207403766761469671194565 - 1.2983430720865060515202099613e-47*I` So for the real part I get **exactly** the same number, but I get no imaginary part whatsoever. 
> 
> I assume someone here must know the maths behind this, and know whether the result is supposed to be real or complex. If it should really be real (so the number I got is actually the more accurate of the two), then putting dots would be **very** dangerous. Then a result of `2.9757207403766761469671194565 + 1e300*I` would still pass! That's almost entirely imaginary, with a very small real part in comparison to the massive imaginary component. 

Maybe rather than directly testing the answer, one could do something like this:

```
sage: x = [calculation]; abs(x - 2.975975720740376676146967119) < 10^(-27)
True
```
That would be less dangerous, while still allowing the necessary flexibility.



---

archive/issue_events_118520.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-08-16T09:43:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9343#event-118520"
}
```



---

archive/issue_events_118521.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-08-16T09:43:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9343#event-118521"
}
```



---

archive/issue_comments_079375.json:
```json
{
    "body": "<div id=\"comment:237\" align=\"right\">comment:237</div>\n\nReplying to [@loefflerd](#comment%3A236):\n\n> Maybe rather than directly testing the answer, one could do something like this:\n> \n> ```\n> sage: x = [calculation]; abs(x - 2.975975720740376676146967119) < 10^(-27)\n> True\n> ```\n> That would be less dangerous, while still allowing the necessary flexibility. \n\nThe first question I personally need answering is should the number be real or complex? \n\nI might guess the small imaginary component should not be there at all, but would my guess be right? I'm not a mathematician. \n\nOnly when I know the answer to that question do I feel able to comment on a test. \n\nGiven the number of digits that are printed (> 16), this would suggest to me that arbitrary precision maths is being used, and not just a floating point processor. If so, the answer should be the same irrespective of whether the machine is 32-bit or 64-bit. Rounding errors occur in floating point processors - they do not on integer arithmetic if done properly. \n\nIf this is being done with just an FPU, then printing these number of digits is a bit pointless. \n\nDave",
    "created_at": "2010-08-16T09:43:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79375",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:237" align="right">comment:237</div>

Replying to [@loefflerd](#comment%3A236):

> Maybe rather than directly testing the answer, one could do something like this:
> 
> ```
> sage: x = [calculation]; abs(x - 2.975975720740376676146967119) < 10^(-27)
> True
> ```
> That would be less dangerous, while still allowing the necessary flexibility. 

The first question I personally need answering is should the number be real or complex? 

I might guess the small imaginary component should not be there at all, but would my guess be right? I'm not a mathematician. 

Only when I know the answer to that question do I feel able to comment on a test. 

Given the number of digits that are printed (> 16), this would suggest to me that arbitrary precision maths is being used, and not just a floating point processor. If so, the answer should be the same irrespective of whether the machine is 32-bit or 64-bit. Rounding errors occur in floating point processors - they do not on integer arithmetic if done properly. 

If this is being done with just an FPU, then printing these number of digits is a bit pointless. 

Dave



---

archive/issue_comments_079376.json:
```json
{
    "body": "<div id=\"comment:238\" align=\"right\">comment:238</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A237):\n> Replying to [@loefflerd](#comment%3A236):\n> \n> > Maybe rather than directly testing the answer, one could do something like this:\n> > \n> > ```\n> > sage: x = [calculation]; abs(x - 2.975975720740376676146967119) < 10^(-27)\n> > True\n> > ```\n> > That would be less dangerous, while still allowing the necessary flexibility. \n> \n> \n> The first question I personally need answering is should the number be real or complex? \n\nIt is real.  The list is the list of values of `z^2` as z runs over the roots of `f = x^5 + x + 17`, which has exactly one real root, listed first.  Apart from precision the output should be the same as \n\n```\nsage: [z[0]^2 for z in f.roots(CC)]\n[2.97572074037668, -2.40889943716139 + 1.90254105303505*I, -2.40889943716139 - 1.90254105303505*I, 0.921039066973047 - 3.07553311884578*I, 0.921039066973047 + 3.07553311884578*I]\n```\nThe function being tested is rather general, so one could not expect the function's code to test for this special case (I think).  Still, it is disappointing that the imaginary part is not a better approximation to zero than it is.\n\n\n> \n> I might guess the small imaginary component should not be there at all, but would my guess be right? I'm not a mathematician. \n> \n> Only when I know the answer to that question do I feel able to comment on a test. \n> \n> Given the number of digits that are printed (> 16), this would suggest to me that arbitrary precision maths is being used, and not just a floating point processor. If so, the answer should be the same irrespective of whether the machine is 32-bit or 64-bit. Rounding errors occur in floating point processors - they do not on integer arithmetic if done properly. \n> \n> If this is being done with just an FPU, then printing these number of digits is a bit pointless. \n> \n> Dave",
    "created_at": "2010-08-16T10:33:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79376",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:238" align="right">comment:238</div>

Replying to [@sagetrac-drkirkby](#comment%3A237):
> Replying to [@loefflerd](#comment%3A236):
> 
> > Maybe rather than directly testing the answer, one could do something like this:
> > 
> > ```
> > sage: x = [calculation]; abs(x - 2.975975720740376676146967119) < 10^(-27)
> > True
> > ```
> > That would be less dangerous, while still allowing the necessary flexibility. 
> 
> 
> The first question I personally need answering is should the number be real or complex? 

It is real.  The list is the list of values of `z^2` as z runs over the roots of `f = x^5 + x + 17`, which has exactly one real root, listed first.  Apart from precision the output should be the same as 

```
sage: [z[0]^2 for z in f.roots(CC)]
[2.97572074037668, -2.40889943716139 + 1.90254105303505*I, -2.40889943716139 - 1.90254105303505*I, 0.921039066973047 - 3.07553311884578*I, 0.921039066973047 + 3.07553311884578*I]
```
The function being tested is rather general, so one could not expect the function's code to test for this special case (I think).  Still, it is disappointing that the imaginary part is not a better approximation to zero than it is.


> 
> I might guess the small imaginary component should not be there at all, but would my guess be right? I'm not a mathematician. 
> 
> Only when I know the answer to that question do I feel able to comment on a test. 
> 
> Given the number of digits that are printed (> 16), this would suggest to me that arbitrary precision maths is being used, and not just a floating point processor. If so, the answer should be the same irrespective of whether the machine is 32-bit or 64-bit. Rounding errors occur in floating point processors - they do not on integer arithmetic if done properly. 
> 
> If this is being done with just an FPU, then printing these number of digits is a bit pointless. 
> 
> Dave



---

archive/issue_comments_079377.json:
```json
{
    "body": "<div id=\"comment:239\" align=\"right\">comment:239</div>\n\nReplying to [@JohnCremona](#comment%3A238):\n> Replying to [@sagetrac-drkirkby](#comment%3A237):\n> > Replying to [@loefflerd](#comment%3A236):\n> > \n> > > Maybe rather than directly testing the answer, one could do something like this:\n> > > \n> > > ```\n> > > sage: x = [calculation]; abs(x - 2.975975720740376676146967119) < 10^(-27)\n> > > True\n> > > ```\n\n> It is real.  The list is the list of values of `z^2` as z runs over the roots of `f = x^5 + x + 17`, which has exactly one real root, listed first.  Apart from precision the output should be the same as \n> \n> ```\n> sage: [z[0]^2 for z in f.roots(CC)]\n> [2.97572074037668, -2.40889943716139 + 1.90254105303505*I, -2.40889943716139 - 1.90254105303505*I, 0.921039066973047 - 3.07553311884578*I, 0.921039066973047 + 3.07553311884578*I]\n> ```\n> The function being tested is rather general, so one could not expect the function's code to test for this special case (I think).  Still, it is disappointing that the imaginary part is not a better approximation to zero than it is.\n> \n\nIt is a complex embedding, so the output is a [ComplexNumber](../wiki/ComplexNumber), ideally with real part zero. The precision is 100 bit. This indeed makes 10^{-27} a bit disappoint.\n\n> \n> > \n> > I might guess the small imaginary component should not be there at all, but would my guess be right? I'm not a mathematician. \n> > \n> > Only when I know the answer to that question do I feel able to comment on a test. \n> > \n> > Given the number of digits that are printed (> 16), this would suggest to me that arbitrary precision maths is being used, and not just a floating point processor. If so, the answer should be the same irrespective of whether the machine is 32-bit or 64-bit. Rounding errors occur in floating point processors - they do not on integer arithmetic if done properly. \n> > \n> > If this is being done with just an FPU, then printing these number of digits is a bit pointless. \n> > \n> > Dave",
    "created_at": "2010-08-16T10:55:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79377",
    "user": "https://github.com/rishikesha"
}
```

<div id="comment:239" align="right">comment:239</div>

Replying to [@JohnCremona](#comment%3A238):
> Replying to [@sagetrac-drkirkby](#comment%3A237):
> > Replying to [@loefflerd](#comment%3A236):
> > 
> > > Maybe rather than directly testing the answer, one could do something like this:
> > > 
> > > ```
> > > sage: x = [calculation]; abs(x - 2.975975720740376676146967119) < 10^(-27)
> > > True
> > > ```

> It is real.  The list is the list of values of `z^2` as z runs over the roots of `f = x^5 + x + 17`, which has exactly one real root, listed first.  Apart from precision the output should be the same as 
> 
> ```
> sage: [z[0]^2 for z in f.roots(CC)]
> [2.97572074037668, -2.40889943716139 + 1.90254105303505*I, -2.40889943716139 - 1.90254105303505*I, 0.921039066973047 - 3.07553311884578*I, 0.921039066973047 + 3.07553311884578*I]
> ```
> The function being tested is rather general, so one could not expect the function's code to test for this special case (I think).  Still, it is disappointing that the imaginary part is not a better approximation to zero than it is.
> 

It is a complex embedding, so the output is a [ComplexNumber](../wiki/ComplexNumber), ideally with real part zero. The precision is 100 bit. This indeed makes 10^{-27} a bit disappoint.

> 
> > 
> > I might guess the small imaginary component should not be there at all, but would my guess be right? I'm not a mathematician. 
> > 
> > Only when I know the answer to that question do I feel able to comment on a test. 
> > 
> > Given the number of digits that are printed (> 16), this would suggest to me that arbitrary precision maths is being used, and not just a floating point processor. If so, the answer should be the same irrespective of whether the machine is 32-bit or 64-bit. Rounding errors occur in floating point processors - they do not on integer arithmetic if done properly. 
> > 
> > If this is being done with just an FPU, then printing these number of digits is a bit pointless. 
> > 
> > Dave



---

archive/issue_comments_079378.json:
```json
{
    "body": "<div id=\"comment:240\" align=\"right\">comment:240</div>\n\n> It is a complex embedding, so the output is a [ComplexNumber](../wiki/ComplexNumber), ideally with real part zero. The precision is 100 bit. This indeed makes 10^-27 a bit disappointing.\n\nI meant to say imaginary part zero.",
    "created_at": "2010-08-16T11:03:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79378",
    "user": "https://github.com/rishikesha"
}
```

<div id="comment:240" align="right">comment:240</div>

> It is a complex embedding, so the output is a [ComplexNumber](../wiki/ComplexNumber), ideally with real part zero. The precision is 100 bit. This indeed makes 10^-27 a bit disappointing.

I meant to say imaginary part zero.



---

archive/issue_comments_079379.json:
```json
{
    "body": "Attachment: **[9343_complex_embeddings.patch.gz](https://github.com/sagemath/sage/files/ticket9343/9343_complex_embeddings.patch.gz)**\n\nHopefully fixes problem with polynomial_quotient_ring.py",
    "created_at": "2010-08-16T13:06:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79379",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[9343_complex_embeddings.patch.gz](https://github.com/sagemath/sage/files/ticket9343/9343_complex_embeddings.patch.gz)**

Hopefully fixes problem with polynomial_quotient_ring.py



---

archive/issue_comments_079380.json:
```json
{
    "body": "<div id=\"comment:241\" align=\"right\">comment:241</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A232):\n> 2) `devel/sage/sage/rings/polynomial/polynomial_quotient_ring.py` **An unexpected failure.** \n\nCan you try the patch I just uploaded to see if it fixes the problem? I have tested this patch on a 32bit and 64bit Intel Linux system and `polynomial_quotient_ring.py` passed the tests. I haven't tested it yet against the whole sage library.",
    "created_at": "2010-08-16T13:10:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79380",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:241" align="right">comment:241</div>

Replying to [@sagetrac-drkirkby](#comment%3A232):
> 2) `devel/sage/sage/rings/polynomial/polynomial_quotient_ring.py` **An unexpected failure.** 

Can you try the patch I just uploaded to see if it fixes the problem? I have tested this patch on a 32bit and 64bit Intel Linux system and `polynomial_quotient_ring.py` passed the tests. I haven't tested it yet against the whole sage library.



---

archive/issue_comments_079381.json:
```json
{
    "body": "Flattening of the above sagelib patches against sage-4.5.3.alpha1",
    "created_at": "2010-08-16T13:46:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79381",
    "user": "https://github.com/jdemeyer"
}
```

Flattening of the above sagelib patches against sage-4.5.3.alpha1



---

archive/issue_comments_079382.json:
```json
{
    "body": "<div id=\"comment:242\" align=\"right\">comment:242</div>\n\nAttachment: **[sagelib_9343_combined7.patch.gz](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343_combined7.patch.gz)**",
    "created_at": "2010-08-16T13:50:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79382",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:242" align="right">comment:242</div>

Attachment: **[sagelib_9343_combined7.patch.gz](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343_combined7.patch.gz)**



---

archive/issue_comments_079383.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,11 +5,7 @@\n * Install the new genus2reduction spkg: [http://cage.ugent.be/~jdemeyer/sage/genus2reduction-0.3.p8.spkg](http://cage.ugent.be/~jdemeyer/sage/genus2reduction-0.3.p8.spkg) (see #9591)\n * Install the new lcalc spkg: [http://cage.ugent.be/~jdemeyer/sage/lcalc-20100428-1.23.p2.spkg](http://cage.ugent.be/~jdemeyer/sage/lcalc-20100428-1.23.p2.spkg) (see #9592)\n * Apply the [extcode_9343_combined3.patch](https://github.com/sagemath/sage/files/ticket9343/extcode_9343_combined3.patch.gz) patch to `data/extcode`\n-* Apply the [sagelib_9343_combined6.patch](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343_combined6.patch.gz) to `devel/sage`\n-* Apply the [sagelib_9343-heegner_ell_ratioanal.patch](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343-heegner_ell_ratioanal.patch.gz) patch to `devel/sage`\n-* Apply the [9343_jd_review.patch](https://github.com/sagemath/sage/files/ticket9343/9343_jd_review.patch.gz) patch to `devel/sage`\n-* Apply the [trac_9343-sagelib-fix_sphinx_warning-reviewer.patch](https://github.com/sagemath/sage/files/ticket9343/trac_9343-sagelib-fix_sphinx_warning-reviewer.patch.gz) patch to `devel/sage`\n+* Apply the [sagelib_9343_combined7.patch](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343_combined7.patch.gz) to `devel/sage`\n \n-Alternatively, you can download a complete Sage distribution with all these patches (and also the new Singular spkg, see #8059) from\n+Alternatively, you can download a complete Sage distribution based on sage-4.5.3.alpha0 with all patches up to 9343_jd_review.patch (and also the new Singular spkg, see #8059) from\n * http://cage.ugent.be/~jdemeyer/sage/sage-4.6.prealpha0.tar\n-* The Sphinx warning fix is not yet included.\n``````\n",
    "created_at": "2010-08-16T13:50:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79383",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,11 +5,7 @@
 * Install the new genus2reduction spkg: [http://cage.ugent.be/~jdemeyer/sage/genus2reduction-0.3.p8.spkg](http://cage.ugent.be/~jdemeyer/sage/genus2reduction-0.3.p8.spkg) (see #9591)
 * Install the new lcalc spkg: [http://cage.ugent.be/~jdemeyer/sage/lcalc-20100428-1.23.p2.spkg](http://cage.ugent.be/~jdemeyer/sage/lcalc-20100428-1.23.p2.spkg) (see #9592)
 * Apply the [extcode_9343_combined3.patch](https://github.com/sagemath/sage/files/ticket9343/extcode_9343_combined3.patch.gz) patch to `data/extcode`
-* Apply the [sagelib_9343_combined6.patch](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343_combined6.patch.gz) to `devel/sage`
-* Apply the [sagelib_9343-heegner_ell_ratioanal.patch](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343-heegner_ell_ratioanal.patch.gz) patch to `devel/sage`
-* Apply the [9343_jd_review.patch](https://github.com/sagemath/sage/files/ticket9343/9343_jd_review.patch.gz) patch to `devel/sage`
-* Apply the [trac_9343-sagelib-fix_sphinx_warning-reviewer.patch](https://github.com/sagemath/sage/files/ticket9343/trac_9343-sagelib-fix_sphinx_warning-reviewer.patch.gz) patch to `devel/sage`
+* Apply the [sagelib_9343_combined7.patch](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343_combined7.patch.gz) to `devel/sage`
 
-Alternatively, you can download a complete Sage distribution with all these patches (and also the new Singular spkg, see #8059) from
+Alternatively, you can download a complete Sage distribution based on sage-4.5.3.alpha0 with all patches up to 9343_jd_review.patch (and also the new Singular spkg, see #8059) from
 * http://cage.ugent.be/~jdemeyer/sage/sage-4.6.prealpha0.tar
-* The Sphinx warning fix is not yet included.
``````




---

archive/issue_comments_079384.json:
```json
{
    "body": "<div id=\"comment:243\" align=\"right\">comment:243</div>\n\nWhilst the doctest can be changed to make this pass, is a real bug being covered up? \n\nCan anyone explain why a calculation performed with integers should differ depending on whether the program is compiled 32-bit or 64-bit? Since to me, of the arbitrary precision maths is implemented correctly, they should give the same result. I never get any issues like this with the MPFR tests. \n\nDave",
    "created_at": "2010-08-16T15:49:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79384",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:243" align="right">comment:243</div>

Whilst the doctest can be changed to make this pass, is a real bug being covered up? 

Can anyone explain why a calculation performed with integers should differ depending on whether the program is compiled 32-bit or 64-bit? Since to me, of the arbitrary precision maths is implemented correctly, they should give the same result. I never get any issues like this with the MPFR tests. 

Dave



---

archive/issue_comments_079385.json:
```json
{
    "body": "<div id=\"comment:244\" align=\"right\">comment:244</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A243):\n> Whilst the doctest can be changed to make this pass, is a real bug being covered up? \n\nI would rather say on the contrary.  The problem was that we were computing the roots of a polynomial with complex non-exact roots.  I.e.: instead of computing the roots of x^5+x-17, we were computing the roots of (1.0 + 0.0*I)*x^5 + ...  I changed that in my patch.\n\n> Can anyone explain why a calculation performed with integers should differ depending on whether the program is compiled 32-bit or 64-bit? Since to me, of the arbitrary precision maths is implemented correctly, they should give the same result.\n\nThis is not always true because the precisions might be different.  In PARI, the precision is always a multiple of the machine word size.  If you try to compute with 90 bits of precision, you will get 96 bits of precision on a 32-bit machine but you will get 128 bits of precision on a 64-bit machine.\n\nIf might be possible to change this such that PARI always uses a multiple of 64 bits of precision (I have been thinking about this), but it's not so easy.",
    "created_at": "2010-08-16T15:59:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79385",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:244" align="right">comment:244</div>

Replying to [@sagetrac-drkirkby](#comment%3A243):
> Whilst the doctest can be changed to make this pass, is a real bug being covered up? 

I would rather say on the contrary.  The problem was that we were computing the roots of a polynomial with complex non-exact roots.  I.e.: instead of computing the roots of x^5+x-17, we were computing the roots of (1.0 + 0.0*I)*x^5 + ...  I changed that in my patch.

> Can anyone explain why a calculation performed with integers should differ depending on whether the program is compiled 32-bit or 64-bit? Since to me, of the arbitrary precision maths is implemented correctly, they should give the same result.

This is not always true because the precisions might be different.  In PARI, the precision is always a multiple of the machine word size.  If you try to compute with 90 bits of precision, you will get 96 bits of precision on a 32-bit machine but you will get 128 bits of precision on a 64-bit machine.

If might be possible to change this such that PARI always uses a multiple of 64 bits of precision (I have been thinking about this), but it's not so easy.



---

archive/issue_events_118522.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-08-16T15:59:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9343#event-118522"
}
```



---

archive/issue_events_118523.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-08-16T15:59:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9343#event-118523"
}
```



---

archive/issue_comments_079386.json:
```json
{
    "body": "<div id=\"comment:245\" align=\"right\">comment:245</div>\n\nJeroen is right.  Almost all (and maybe all) the doctests in Sage which are tagged 32/64 bit are a result of this feature of pari's way of handling multi-precision floating point arithmetic.",
    "created_at": "2010-08-16T16:22:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79386",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:245" align="right">comment:245</div>

Jeroen is right.  Almost all (and maybe all) the doctests in Sage which are tagged 32/64 bit are a result of this feature of pari's way of handling multi-precision floating point arithmetic.



---

archive/issue_comments_079387.json:
```json
{
    "body": "Reviewer: **Robert Bradshaw, John Cremona, Jeroen Demeyer, William Stein, David Kirkby, Fran\u00e7ois Bisse, Leif Leonhardy**",
    "created_at": "2010-08-16T17:05:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79387",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

Reviewer: **Robert Bradshaw, John Cremona, Jeroen Demeyer, William Stein, David Kirkby, François Bisse, Leif Leonhardy**



---

archive/issue_events_118524.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-08-16T17:05:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9343#event-118524"
}
```



---

archive/issue_events_118525.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-08-16T17:05:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9343#event-118525"
}
```



---

archive/issue_comments_079388.json:
```json
{
    "body": "<div id=\"comment:246\" align=\"right\">comment:246</div>\n\nReplying to [@JohnCremona](#comment%3A245):\n> Jeroen is right.  Almost all (and maybe all) the doctests in Sage which are tagged 32/64 bit are a result of this feature of pari's way of handling multi-precision floating point arithmetic.\n\nOK, fair point. Now I understand. I was under the impression 100 bits were being used. \n\nAfter applying Jeroen's patch\n\n```\ndrkirkby@hawk:~/sage-4.6.prealpha0$ ./sage -t  -long devel/sage/sage/rings/polynomial/polynomial_quotient_ring.py\nsage -t -long \"devel/sage/sage/rings/polynomial/polynomial_quotient_ring.py\"\n\t [30.1 s]\n \n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 30.2 seconds\n```\n\nI've set this to positive review. \n\nI copied all the authors to reviewers, as I think everyone that has wrote part of it has reviewed part of it. I also added Leif and Fran\u00e7ois as reviewers, as they have contributed too. But I've not done an extensive search to see who should be on the reviewer and the author list. I suspect there are some missing. \n\nDave",
    "created_at": "2010-08-16T17:05:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79388",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:246" align="right">comment:246</div>

Replying to [@JohnCremona](#comment%3A245):
> Jeroen is right.  Almost all (and maybe all) the doctests in Sage which are tagged 32/64 bit are a result of this feature of pari's way of handling multi-precision floating point arithmetic.

OK, fair point. Now I understand. I was under the impression 100 bits were being used. 

After applying Jeroen's patch

```
drkirkby@hawk:~/sage-4.6.prealpha0$ ./sage -t  -long devel/sage/sage/rings/polynomial/polynomial_quotient_ring.py
sage -t -long "devel/sage/sage/rings/polynomial/polynomial_quotient_ring.py"
	 [30.1 s]
 
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 30.2 seconds
```

I've set this to positive review. 

I copied all the authors to reviewers, as I think everyone that has wrote part of it has reviewed part of it. I also added Leif and François as reviewers, as they have contributed too. But I've not done an extensive search to see who should be on the reviewer and the author list. I suspect there are some missing. 

Dave



---

archive/issue_comments_079389.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,5 +7,5 @@\n * Apply the [extcode_9343_combined3.patch](https://github.com/sagemath/sage/files/ticket9343/extcode_9343_combined3.patch.gz) patch to `data/extcode`\n * Apply the [sagelib_9343_combined7.patch](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343_combined7.patch.gz) to `devel/sage`\n \n-Alternatively, you can download a complete Sage distribution based on sage-4.5.3.alpha0 with all patches up to 9343_jd_review.patch (and also the new Singular spkg, see #8059) from\n-* http://cage.ugent.be/~jdemeyer/sage/sage-4.6.prealpha0.tar\n+Alternatively, you can download a complete Sage distribution based on sage-4.5.3.alpha1 with all these patches (and also #9750) from\n+* [http://cage.ugent.be/~jdemeyer/sage/sage-4.6.prealpha1.tar](http://cage.ugent.be/~jdemeyer/sage/sage-4.6.prealpha1.tar)\n``````\n",
    "created_at": "2010-08-16T17:12:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79389",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,5 +7,5 @@
 * Apply the [extcode_9343_combined3.patch](https://github.com/sagemath/sage/files/ticket9343/extcode_9343_combined3.patch.gz) patch to `data/extcode`
 * Apply the [sagelib_9343_combined7.patch](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343_combined7.patch.gz) to `devel/sage`
 
-Alternatively, you can download a complete Sage distribution based on sage-4.5.3.alpha0 with all patches up to 9343_jd_review.patch (and also the new Singular spkg, see #8059) from
-* http://cage.ugent.be/~jdemeyer/sage/sage-4.6.prealpha0.tar
+Alternatively, you can download a complete Sage distribution based on sage-4.5.3.alpha1 with all these patches (and also #9750) from
+* [http://cage.ugent.be/~jdemeyer/sage/sage-4.6.prealpha1.tar](http://cage.ugent.be/~jdemeyer/sage/sage-4.6.prealpha1.tar)
``````




---

archive/issue_comments_079390.json:
```json
{
    "body": "<div id=\"comment:247\" align=\"right\">comment:247</div>\n\nNew distribution with all patches: [http://cage.ugent.be/~jdemeyer/sage/sage-4.6.prealpha1.tar](http://cage.ugent.be/~jdemeyer/sage/sage-4.6.prealpha1.tar)",
    "created_at": "2010-08-16T17:12:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79390",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:247" align="right">comment:247</div>

New distribution with all patches: [http://cage.ugent.be/~jdemeyer/sage/sage-4.6.prealpha1.tar](http://cage.ugent.be/~jdemeyer/sage/sage-4.6.prealpha1.tar)



---

archive/issue_comments_079391.json:
```json
{
    "body": "Changed reviewer from **Robert Bradshaw, John Cremona, Jeroen Demeyer, William Stein, David Kirkby, Fran\u00e7ois Bisse, Leif Leonhardy** to **Robert Bradshaw, John Cremona, Jeroen Demeyer, William Stein, David Kirkby, Fran\u00e7ois Bissey, Leif Leonhardy**",
    "created_at": "2010-08-16T17:22:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79391",
    "user": "https://github.com/nexttime"
}
```

Changed reviewer from **Robert Bradshaw, John Cremona, Jeroen Demeyer, William Stein, David Kirkby, François Bisse, Leif Leonhardy** to **Robert Bradshaw, John Cremona, Jeroen Demeyer, William Stein, David Kirkby, François Bissey, Leif Leonhardy**



---

archive/issue_comments_079392.json:
```json
{
    "body": "<div id=\"comment:248\" align=\"right\">comment:248</div>\n\nReplying to [@JohnCremona](#comment%3A245):\n> Jeroen is right.  Almost all (and maybe all) the doctests in Sage which are tagged 32/64 bit are a result of this feature of pari's way of handling multi-precision floating point arithmetic.\n\nOthers are due to the different width of Python's `int` type (and perhaps some due to pointer width).",
    "created_at": "2010-08-16T17:22:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79392",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:248" align="right">comment:248</div>

Replying to [@JohnCremona](#comment%3A245):
> Jeroen is right.  Almost all (and maybe all) the doctests in Sage which are tagged 32/64 bit are a result of this feature of pari's way of handling multi-precision floating point arithmetic.

Others are due to the different width of Python's `int` type (and perhaps some due to pointer width).



---

archive/issue_comments_079393.json:
```json
{
    "body": "<div id=\"comment:249\" align=\"right\">comment:249</div>\n\nJust for the record: I noticed some empty `EXAMPLES` sections (in `sage/libs/pari/gen.pyx`), some functions do not have docstrings at all.\n\nBut perhaps something for a follow-up ticket, cleaning up other docstrings as well.",
    "created_at": "2010-08-16T17:47:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79393",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:249" align="right">comment:249</div>

Just for the record: I noticed some empty `EXAMPLES` sections (in `sage/libs/pari/gen.pyx`), some functions do not have docstrings at all.

But perhaps something for a follow-up ticket, cleaning up other docstrings as well.



---

archive/issue_comments_079394.json:
```json
{
    "body": "Attachment: **[pari-gen.pyx-coverage.txt](https://github.com/sagemath/sage/files/ticket9343/pari-gen.pyx-coverage.txt)**\n\nDoctest coverage of sage/libs/pari/gen.pyx (Sage 4.6.prealpha0)",
    "created_at": "2010-08-16T19:51:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79394",
    "user": "https://github.com/nexttime"
}
```

Attachment: **[pari-gen.pyx-coverage.txt](https://github.com/sagemath/sage/files/ticket9343/pari-gen.pyx-coverage.txt)**

Doctest coverage of sage/libs/pari/gen.pyx (Sage 4.6.prealpha0)



---

archive/issue_comments_079395.json:
```json
{
    "body": "<div id=\"comment:250\" align=\"right\">comment:250</div>\n\nReplying to [@nexttime](#comment%3A249):\n> Just for the record: I noticed some empty `EXAMPLES` sections (in `sage/libs/pari/gen.pyx`), some functions do not have docstrings at all.\n> \n> But perhaps something for a follow-up ticket, cleaning up other docstrings as well.\n\nI've attached the current [coverage report for gen.pyx](https://github.com/sagemath/sage/files/ticket9343/pari-gen.pyx-coverage.txt) (Sage 4.6.prealpha0):\n\n```\nSCORE devel/sage/sage/libs/pari/gen.pyx: 55% (215 of 387)\n```",
    "created_at": "2010-08-16T19:57:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79395",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:250" align="right">comment:250</div>

Replying to [@nexttime](#comment%3A249):
> Just for the record: I noticed some empty `EXAMPLES` sections (in `sage/libs/pari/gen.pyx`), some functions do not have docstrings at all.
> 
> But perhaps something for a follow-up ticket, cleaning up other docstrings as well.

I've attached the current [coverage report for gen.pyx](https://github.com/sagemath/sage/files/ticket9343/pari-gen.pyx-coverage.txt) (Sage 4.6.prealpha0):

```
SCORE devel/sage/sage/libs/pari/gen.pyx: 55% (215 of 387)
```



---

archive/issue_comments_079396.json:
```json
{
    "body": "<div id=\"comment:251\" align=\"right\">comment:251</div>\n\nI have tried to compile sage-4.6.alpha1 on an old PPC Mac OS X 10.4 and it **failed** compiling PARI.  Since this is supposed to be an officially supported platform, this should be addressed.  I also tried to compile PARI/GP stand-alone and it also failed, so the problem is upstream.  The error is the following:\n\n```\n/usr/bin/gcc  -o \"/Users/jdemeyer/pari-2.4.3.svn-12577/src/Odarwin-ppc\"/libpari-2.4.dylib -dynamiclib  -O3 -Wall -fno-strict-aliasing -fom\nit-frame-pointer    -fPIC -Wl,-flat_namespace,-undefined,suppress  mp.o mpinl.o F2x.o FF.o Flx.o FpE.o FpV.o FpX.o Qfb.o RgV.o RgX.o ZV.o\nZX.o alglin1.o alglin2.o arith1.o arith2.o base1.o base2.o base3.o base4.o base5.o bb_group.o bibli1.o bibli2.o bit.o buch1.o buch2.o buch\n3.o buch4.o concat.o ellanal.o elliptic.o galconj.o gen1.o gen2.o gen3.o hnf_snf.o ifactor1.o lll.o perm.o polarit1.o polarit2.o polarit3.\no prime.o random.o rootpol.o subcyclo.o subgroup.o trans1.o trans2.o trans3.o anal.o compat.o compile.o default.o errmsg.o es.o eval.o has\nh.o init.o intnum.o members.o pariinl.o parse.o sumiter.o DedekZeta.o Hensel.o QX_factor.o aprcl.o elldata.o ellsea.o galois.o galpol.o gr\noupid.o krasner.o kummer.o mpqs.o nffactor.o part.o stark.o subfield.o thue.o darwin.o\nld: common symbols not allowed with MH_DYLIB output format with the -multi_module option\ninit.o definition of common _DEBUGMEM (size 4)\ninit.o definition of common _avma (size 4)\ninit.o definition of common _bot (size 4)\n[...]\nes.o definition of common _pariErr (size 4)\nes.o definition of common _pariOut (size 4)\ninit.o definition of common _pari_errfile (size 4)\ninit.o definition of common _pari_infile (size 4)\ninit.o definition of common _pari_outfile (size 4)\ninit.o definition of common _cb_pari_err_recover (size 4)\ninit.o definition of common _foreignFuncFree (size 4)\ninit.o definition of common _cb_pari_handle_exception (size 4)\ninit.o definition of common _cb_pari_sigint (size 4)\ninit.o definition of common _cb_pari_whatnow (size 4)\ninit.o definition of common _foreignExprHandler (size 4)\ninit.o definition of common _foreignHandler (size 4)\ninit.o definition of common _memused (size 4)\n/usr/bin/libtool: internal link edit command failed\nmake[1]: *** [libpari-2.4.dylib] Error 1\nmake: *** [gp] Error 2\n```\n\nVersion of gcc (I believe this is the most recent version from Apple which exists for that machine):\n\n```\npowerpc-apple-darwin8-gcc-4.0.1 (GCC) 4.0.1 (Apple Computer, Inc. build 5367)\nCopyright (C) 2005 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n```\n\nIs somebody else able to test this architecture?  Just in case the problem is with the machine and not with PARI (I know essentially nothing about Darwin, I just asked a collegue to test it on his machine).",
    "created_at": "2010-08-17T10:20:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79396",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:251" align="right">comment:251</div>

I have tried to compile sage-4.6.alpha1 on an old PPC Mac OS X 10.4 and it **failed** compiling PARI.  Since this is supposed to be an officially supported platform, this should be addressed.  I also tried to compile PARI/GP stand-alone and it also failed, so the problem is upstream.  The error is the following:

```
/usr/bin/gcc  -o "/Users/jdemeyer/pari-2.4.3.svn-12577/src/Odarwin-ppc"/libpari-2.4.dylib -dynamiclib  -O3 -Wall -fno-strict-aliasing -fom
it-frame-pointer    -fPIC -Wl,-flat_namespace,-undefined,suppress  mp.o mpinl.o F2x.o FF.o Flx.o FpE.o FpV.o FpX.o Qfb.o RgV.o RgX.o ZV.o
ZX.o alglin1.o alglin2.o arith1.o arith2.o base1.o base2.o base3.o base4.o base5.o bb_group.o bibli1.o bibli2.o bit.o buch1.o buch2.o buch
3.o buch4.o concat.o ellanal.o elliptic.o galconj.o gen1.o gen2.o gen3.o hnf_snf.o ifactor1.o lll.o perm.o polarit1.o polarit2.o polarit3.
o prime.o random.o rootpol.o subcyclo.o subgroup.o trans1.o trans2.o trans3.o anal.o compat.o compile.o default.o errmsg.o es.o eval.o has
h.o init.o intnum.o members.o pariinl.o parse.o sumiter.o DedekZeta.o Hensel.o QX_factor.o aprcl.o elldata.o ellsea.o galois.o galpol.o gr
oupid.o krasner.o kummer.o mpqs.o nffactor.o part.o stark.o subfield.o thue.o darwin.o
ld: common symbols not allowed with MH_DYLIB output format with the -multi_module option
init.o definition of common _DEBUGMEM (size 4)
init.o definition of common _avma (size 4)
init.o definition of common _bot (size 4)
[...]
es.o definition of common _pariErr (size 4)
es.o definition of common _pariOut (size 4)
init.o definition of common _pari_errfile (size 4)
init.o definition of common _pari_infile (size 4)
init.o definition of common _pari_outfile (size 4)
init.o definition of common _cb_pari_err_recover (size 4)
init.o definition of common _foreignFuncFree (size 4)
init.o definition of common _cb_pari_handle_exception (size 4)
init.o definition of common _cb_pari_sigint (size 4)
init.o definition of common _cb_pari_whatnow (size 4)
init.o definition of common _foreignExprHandler (size 4)
init.o definition of common _foreignHandler (size 4)
init.o definition of common _memused (size 4)
/usr/bin/libtool: internal link edit command failed
make[1]: *** [libpari-2.4.dylib] Error 1
make: *** [gp] Error 2
```

Version of gcc (I believe this is the most recent version from Apple which exists for that machine):

```
powerpc-apple-darwin8-gcc-4.0.1 (GCC) 4.0.1 (Apple Computer, Inc. build 5367)
Copyright (C) 2005 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
```

Is somebody else able to test this architecture?  Just in case the problem is with the machine and not with PARI (I know essentially nothing about Darwin, I just asked a collegue to test it on his machine).



---

archive/issue_comments_079397.json:
```json
{
    "body": "<div id=\"comment:252\" align=\"right\">comment:252</div>\n\nReplying to [@jdemeyer](#comment%3A251):\n> I have tried to compile sage-4.6.alpha1 on an old PPC Mac OS X 10.4 and it **failed** compiling PARI.  Since this is supposed to be an officially supported platform, this should be addressed.  I also tried to compile PARI/GP stand-alone and it also failed, so the problem is upstream.  [...]\n> Is somebody else able to test this architecture?  Just in case the problem is with the machine and not with PARI (I know essentially nothing about Darwin, I just asked a collegue to test it on his machine).\n\nKarl-Dieter (kcrisman) has access to such a box.",
    "created_at": "2010-08-17T11:31:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79397",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:252" align="right">comment:252</div>

Replying to [@jdemeyer](#comment%3A251):
> I have tried to compile sage-4.6.alpha1 on an old PPC Mac OS X 10.4 and it **failed** compiling PARI.  Since this is supposed to be an officially supported platform, this should be addressed.  I also tried to compile PARI/GP stand-alone and it also failed, so the problem is upstream.  [...]
> Is somebody else able to test this architecture?  Just in case the problem is with the machine and not with PARI (I know essentially nothing about Darwin, I just asked a collegue to test it on his machine).

Karl-Dieter (kcrisman) has access to such a box.



---

archive/issue_comments_079398.json:
```json
{
    "body": "<div id=\"comment:253\" align=\"right\">comment:253</div>\n\nReplying to [@jdemeyer](#comment%3A251):\n> I have tried to compile sage-4.6.alpha1 on an old PPC Mac OS X 10.4 and it **failed** compiling PARI.  Since this is supposed to be an officially supported platform, this should be addressed.  I also tried to compile PARI/GP stand-alone and it also failed, so the problem is upstream.  The error is the following:\n> \n\n```\n/usr/bin/gcc  -o \"/Users/jdemeyer/pari-2.4.3.svn-12577/src/Odarwin-ppc\"/libpari-2.4.dylib -dynamiclib  -O3 -Wall -fno-strict-aliasing -fomit-frame-pointer    -fPIC -Wl,-flat_namespace,-undefined,suppress  mp.o mpinl.o F2x.o FF.o Flx.o FpE.o FpV.o FpX.o Qfb.o RgV.o RgX.o ZV.o ZX.o alglin1.o alglin2.o arith1.o arith2.o base1.o base2.o base3.o base4.o base5.o bb_group.o bibli1.o bibli2.o bit.o buch1.o buch2.o buch3.o buch4.o concat.o ellanal.o elliptic.o galconj.o gen1.o gen2.o gen3.o hnf_snf.o ifactor1.o lll.o perm.o polarit1.o polarit2.o polarit3.o prime.o random.o rootpol.o subcyclo.o subgroup.o trans1.o trans2.o trans3.o anal.o compat.o compile.o default.o errmsg.o es.o eval.o hash.o init.o intnum.o members.o pariinl.o parse.o sumiter.o DedekZeta.o Hensel.o QX_factor.o aprcl.o elldata.o ellsea.o galois.o galpol.o groupid.o krasner.o kummer.o mpqs.o nffactor.o part.o stark.o subfield.o thue.o darwin.o\nld: common symbols not allowed with MH_DYLIB output format with the -multi_module option\ninit.o definition of common _DEBUGMEM (size 4)\ninit.o definition of common _avma (size 4)\ninit.o definition of common _bot (size 4)\n[...]\nes.o definition of common _pariErr (size 4)\nes.o definition of common _pariOut (size 4)\ninit.o definition of common _pari_errfile (size 4)\ninit.o definition of common _pari_infile (size 4)\ninit.o definition of common _pari_outfile (size 4)\ninit.o definition of common _cb_pari_err_recover (size 4)\ninit.o definition of common _foreignFuncFree (size 4)\ninit.o definition of common _cb_pari_handle_exception (size 4)\ninit.o definition of common _cb_pari_sigint (size 4)\ninit.o definition of common _cb_pari_whatnow (size 4)\ninit.o definition of common _foreignExprHandler (size 4)\ninit.o definition of common _foreignHandler (size 4)\ninit.o definition of common _memused (size 4)\n/usr/bin/libtool: internal link edit command failed\nmake[1]: *** [libpari-2.4.dylib] Error 1\nmake: *** [gp] Error 2\n```\n\nPerhaps add `-fno-common` to `DLCFLAGS` in `config/get_dlcflags` if `$osname` is `darwin`.\n\nJust a guess, I don't play with apples.",
    "created_at": "2010-08-17T14:24:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79398",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:253" align="right">comment:253</div>

Replying to [@jdemeyer](#comment%3A251):
> I have tried to compile sage-4.6.alpha1 on an old PPC Mac OS X 10.4 and it **failed** compiling PARI.  Since this is supposed to be an officially supported platform, this should be addressed.  I also tried to compile PARI/GP stand-alone and it also failed, so the problem is upstream.  The error is the following:
> 

```
/usr/bin/gcc  -o "/Users/jdemeyer/pari-2.4.3.svn-12577/src/Odarwin-ppc"/libpari-2.4.dylib -dynamiclib  -O3 -Wall -fno-strict-aliasing -fomit-frame-pointer    -fPIC -Wl,-flat_namespace,-undefined,suppress  mp.o mpinl.o F2x.o FF.o Flx.o FpE.o FpV.o FpX.o Qfb.o RgV.o RgX.o ZV.o ZX.o alglin1.o alglin2.o arith1.o arith2.o base1.o base2.o base3.o base4.o base5.o bb_group.o bibli1.o bibli2.o bit.o buch1.o buch2.o buch3.o buch4.o concat.o ellanal.o elliptic.o galconj.o gen1.o gen2.o gen3.o hnf_snf.o ifactor1.o lll.o perm.o polarit1.o polarit2.o polarit3.o prime.o random.o rootpol.o subcyclo.o subgroup.o trans1.o trans2.o trans3.o anal.o compat.o compile.o default.o errmsg.o es.o eval.o hash.o init.o intnum.o members.o pariinl.o parse.o sumiter.o DedekZeta.o Hensel.o QX_factor.o aprcl.o elldata.o ellsea.o galois.o galpol.o groupid.o krasner.o kummer.o mpqs.o nffactor.o part.o stark.o subfield.o thue.o darwin.o
ld: common symbols not allowed with MH_DYLIB output format with the -multi_module option
init.o definition of common _DEBUGMEM (size 4)
init.o definition of common _avma (size 4)
init.o definition of common _bot (size 4)
[...]
es.o definition of common _pariErr (size 4)
es.o definition of common _pariOut (size 4)
init.o definition of common _pari_errfile (size 4)
init.o definition of common _pari_infile (size 4)
init.o definition of common _pari_outfile (size 4)
init.o definition of common _cb_pari_err_recover (size 4)
init.o definition of common _foreignFuncFree (size 4)
init.o definition of common _cb_pari_handle_exception (size 4)
init.o definition of common _cb_pari_sigint (size 4)
init.o definition of common _cb_pari_whatnow (size 4)
init.o definition of common _foreignExprHandler (size 4)
init.o definition of common _foreignHandler (size 4)
init.o definition of common _memused (size 4)
/usr/bin/libtool: internal link edit command failed
make[1]: *** [libpari-2.4.dylib] Error 1
make: *** [gp] Error 2
```

Perhaps add `-fno-common` to `DLCFLAGS` in `config/get_dlcflags` if `$osname` is `darwin`.

Just a guess, I don't play with apples.



---

archive/issue_comments_079399.json:
```json
{
    "body": "<div id=\"comment:254\" align=\"right\">comment:254</div>\n\nReplying to [@nexttime](#comment%3A253):\n> Perhaps add `-fno-common` to `DLCFLAGS` in `config/get_dlcflags` if `$osname` is `darwin`.\n> \n> Just a guess, I don't play with apples.\n\nI'm pretty sure this will fix it. In PARI 2.3.x, we patched `get_dlcflags`:\n\n```sh\n_dl_list=\"DLCFLAGS\"\nif test -n \"$__gnuc__\"; then\n  # Some architectures need -fPIC for building dynamic lib\n  # *-i?86|*-sparc*|*-powerpc|*-s390|*-mips) DLCFLAGS=\n  case \"$osname-$arch\" in\n    *-hppa|*-ia64|*-alpha|*-arm|*-m68k|*linux-ppc) DLCFLAGS=-fPIC ;;\n    *-x86_64|*-sparc*|*-amd64) case \"$sizeof_long\" in\n              8) DLCFLAGS=-fPIC;;\n              esac;;\n    darwin-*) DLCFLAGS=-fno-common;;\n  esac\nelse\n  case \"$osname-$arch\" in\n    hpux-*) DLCFLAGS=+z;;\n    solaris-sparc*) case \"$sizeof_long\" in\n              8) DLCFLAGS=-KPIC;; # assume sun cc\n              esac;;\n  esac\nfi\n\necho \"C compiler is          $CC $CFLAGS $DLCFLAGS\"\n```\n\n(Note the `darwin-*`. A number of other changes has been dropped...)",
    "created_at": "2010-08-17T14:46:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79399",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:254" align="right">comment:254</div>

Replying to [@nexttime](#comment%3A253):
> Perhaps add `-fno-common` to `DLCFLAGS` in `config/get_dlcflags` if `$osname` is `darwin`.
> 
> Just a guess, I don't play with apples.

I'm pretty sure this will fix it. In PARI 2.3.x, we patched `get_dlcflags`:

```sh
_dl_list="DLCFLAGS"
if test -n "$__gnuc__"; then
  # Some architectures need -fPIC for building dynamic lib
  # *-i?86|*-sparc*|*-powerpc|*-s390|*-mips) DLCFLAGS=
  case "$osname-$arch" in
    *-hppa|*-ia64|*-alpha|*-arm|*-m68k|*linux-ppc) DLCFLAGS=-fPIC ;;
    *-x86_64|*-sparc*|*-amd64) case "$sizeof_long" in
              8) DLCFLAGS=-fPIC;;
              esac;;
    darwin-*) DLCFLAGS=-fno-common;;
  esac
else
  case "$osname-$arch" in
    hpux-*) DLCFLAGS=+z;;
    solaris-sparc*) case "$sizeof_long" in
              8) DLCFLAGS=-KPIC;; # assume sun cc
              esac;;
  esac
fi

echo "C compiler is          $CC $CFLAGS $DLCFLAGS"
```

(Note the `darwin-*`. A number of other changes has been dropped...)



---

archive/issue_comments_079400.json:
```json
{
    "body": "<div id=\"comment:255\" align=\"right\">comment:255</div>\n\nDave, could you check if we still need (some of) the dropped changes for Solaris and HP-UX?\n\n(I suspect except for the `-fPIC`, we'll need these, too.)",
    "created_at": "2010-08-17T14:59:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79400",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:255" align="right">comment:255</div>

Dave, could you check if we still need (some of) the dropped changes for Solaris and HP-UX?

(I suspect except for the `-fPIC`, we'll need these, too.)



---

archive/issue_comments_079401.json:
```json
{
    "body": "<div id=\"comment:256\" align=\"right\">comment:256</div>\n\nI think `spkg-install` needs some work anyway:\n\n* Shouldn't `SAGE_TUNE_pari` be `SAGE_TUNE_PARI`?\n* I don't understand why we *unconditionally* add `--graphic=none` to `./Configure`. (This is already added if `$PARI_EXTRA_OPTS` are empty.)\n* The test of `$?` at the bottom is redundant/superfluous, or even wrong; we should simply `exit 1` there, or change the whole `if-then` logic, e.g. using `elif`. (Shouldn't it be a build error if `$SAGE_LOCAL/lib/libpari.so` is not present on any system except Darwin? A test for Cygwin's DLL is completely missing there, so we'd have to add that, too.)",
    "created_at": "2010-08-17T15:35:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79401",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:256" align="right">comment:256</div>

I think `spkg-install` needs some work anyway:

* Shouldn't `SAGE_TUNE_pari` be `SAGE_TUNE_PARI`?
* I don't understand why we *unconditionally* add `--graphic=none` to `./Configure`. (This is already added if `$PARI_EXTRA_OPTS` are empty.)
* The test of `$?` at the bottom is redundant/superfluous, or even wrong; we should simply `exit 1` there, or change the whole `if-then` logic, e.g. using `elif`. (Shouldn't it be a build error if `$SAGE_LOCAL/lib/libpari.so` is not present on any system except Darwin? A test for Cygwin's DLL is completely missing there, so we'd have to add that, too.)



---

archive/issue_comments_079402.json:
```json
{
    "body": "<div id=\"comment:257\" align=\"right\">comment:257</div>\n\nReplying to [@nexttime](#comment%3A256):\n> I think `spkg-install` needs some work anyway:\n> \n> * Shouldn't `SAGE_TUNE_pari` be `SAGE_TUNE_PARI`?\n\nI forget who it was, but someone proposed something like this SAGE_THREADS_$packagename where the '$packagename' would be lower case. I think that's quite a reasonable idea. It potentially allows the name to be automatically generated. \n\nIf you want to clean it up, it would be better to open another ticket for that.",
    "created_at": "2010-08-17T15:52:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79402",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:257" align="right">comment:257</div>

Replying to [@nexttime](#comment%3A256):
> I think `spkg-install` needs some work anyway:
> 
> * Shouldn't `SAGE_TUNE_pari` be `SAGE_TUNE_PARI`?

I forget who it was, but someone proposed something like this SAGE_THREADS_$packagename where the '$packagename' would be lower case. I think that's quite a reasonable idea. It potentially allows the name to be automatically generated. 

If you want to clean it up, it would be better to open another ticket for that.



---

archive/issue_comments_079403.json:
```json
{
    "body": "<div id=\"comment:258\" align=\"right\">comment:258</div>\n\nReplying to [@nexttime](#comment%3A253):\n> Perhaps add `-fno-common` to `DLCFLAGS` in `config/get_dlcflags` if `$osname` is `darwin`.\n\nGreat!  This fixes the problem indeed (at least on this particular machine).  I have reported this upstream.",
    "created_at": "2010-08-17T16:13:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79403",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:258" align="right">comment:258</div>

Replying to [@nexttime](#comment%3A253):
> Perhaps add `-fno-common` to `DLCFLAGS` in `config/get_dlcflags` if `$osname` is `darwin`.

Great!  This fixes the problem indeed (at least on this particular machine).  I have reported this upstream.



---

archive/issue_comments_079404.json:
```json
{
    "body": "<div id=\"comment:259\" align=\"right\">comment:259</div>\n\nAnybody with access to a Darwin machine: please test\n\n```\nsage -i http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3.svn-12577.p2.spkg\n```\n\nstarting from either a vanilla Sage or an already-9343-patched Sage. The main thing is to see whether this *compiles* properly.",
    "created_at": "2010-08-17T16:37:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79404",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:259" align="right">comment:259</div>

Anybody with access to a Darwin machine: please test

```
sage -i http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3.svn-12577.p2.spkg
```

starting from either a vanilla Sage or an already-9343-patched Sage. The main thing is to see whether this *compiles* properly.



---

archive/issue_comments_079405.json:
```json
{
    "body": "<div id=\"comment:260\" align=\"right\">comment:260</div>\n\nReplying to [@nexttime](#comment%3A255):\n> Dave, could you check if we still need (some of) the dropped changes for Solaris and HP-UX?\n> \n> (I suspect except for the `-fPIC`, we'll need these, too.)\n\nOk, `+z` is used on HP-UX and `-KPIC` on Solaris if the compiler is not gcc, you in addition tested for SPARC and 64-bit on Solaris though...",
    "created_at": "2010-08-17T16:40:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79405",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:260" align="right">comment:260</div>

Replying to [@nexttime](#comment%3A255):
> Dave, could you check if we still need (some of) the dropped changes for Solaris and HP-UX?
> 
> (I suspect except for the `-fPIC`, we'll need these, too.)

Ok, `+z` is used on HP-UX and `-KPIC` on Solaris if the compiler is not gcc, you in addition tested for SPARC and 64-bit on Solaris though...



---

archive/issue_comments_079406.json:
```json
{
    "body": "<div id=\"comment:261\" align=\"right\">comment:261</div>\n\nI notice this message when pari is being installed:\n\n```\nTo sage build time, Pari will not be tuned for your systems\nIf you want higher performance, at the expense of a slower build\nset the environment variable SAGE_TUNE_pari=yes by typing the following\nbefore building Sage (or at least before building Pari)\n```\nAside from the lack of punctuation (a very minor point), I think there is a word missing in the first line: should it say \"To *minimize* sage build time\" or something like that?\n\nAlso, if you're introducing the environment variable `SAGE_TUNE_pari`, you should also document it in the Sage installation guide -- see the section on environment variables in SAGE_ROOT/devel/sage/doc/en/installation/source.rst.",
    "created_at": "2010-08-17T17:17:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79406",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:261" align="right">comment:261</div>

I notice this message when pari is being installed:

```
To sage build time, Pari will not be tuned for your systems
If you want higher performance, at the expense of a slower build
set the environment variable SAGE_TUNE_pari=yes by typing the following
before building Sage (or at least before building Pari)
```
Aside from the lack of punctuation (a very minor point), I think there is a word missing in the first line: should it say "To *minimize* sage build time" or something like that?

Also, if you're introducing the environment variable `SAGE_TUNE_pari`, you should also document it in the Sage installation guide -- see the section on environment variables in SAGE_ROOT/devel/sage/doc/en/installation/source.rst.



---

archive/issue_comments_079407.json:
```json
{
    "body": "<div id=\"comment:262\" align=\"right\">comment:262</div>\n\nReplying to [@nexttime](#comment%3A260):\n> Replying to [@nexttime](#comment%3A255):\n> > Dave, could you check if we still need (some of) the dropped changes for Solaris and HP-UX?\n> > \n> > (I suspect except for the `-fPIC`, we'll need these, too.)\n> \n> \n> Ok, `+z` is used on HP-UX and `-KPIC` on Solaris if the compiler is not gcc, you in addition tested for SPARC and 64-bit on Solaris though...\n\nWhen were these dropped - since I tested this on OpenSolaris, or are these other changes? I can't keep up with the changes on this ticket! \n\nWithout trying to build in HP-UX I don't know for sure what will be needed, and I don't have time to try that now. \n\nDave",
    "created_at": "2010-08-17T17:30:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79407",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:262" align="right">comment:262</div>

Replying to [@nexttime](#comment%3A260):
> Replying to [@nexttime](#comment%3A255):
> > Dave, could you check if we still need (some of) the dropped changes for Solaris and HP-UX?
> > 
> > (I suspect except for the `-fPIC`, we'll need these, too.)
> 
> 
> Ok, `+z` is used on HP-UX and `-KPIC` on Solaris if the compiler is not gcc, you in addition tested for SPARC and 64-bit on Solaris though...

When were these dropped - since I tested this on OpenSolaris, or are these other changes? I can't keep up with the changes on this ticket! 

Without trying to build in HP-UX I don't know for sure what will be needed, and I don't have time to try that now. 

Dave



---

archive/issue_comments_079408.json:
```json
{
    "body": "<div id=\"comment:263\" align=\"right\">comment:263</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A262):\n> When were these dropped - since I tested this on OpenSolaris, or are these other changes? I can't keep up with the changes on this ticket! \n\nBy looking at `hg log`: 22 July 2010 (or possibly before)",
    "created_at": "2010-08-17T17:38:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79408",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:263" align="right">comment:263</div>

Replying to [@sagetrac-drkirkby](#comment%3A262):
> When were these dropped - since I tested this on OpenSolaris, or are these other changes? I can't keep up with the changes on this ticket! 

By looking at `hg log`: 22 July 2010 (or possibly before)



---

archive/issue_comments_079409.json:
```json
{
    "body": "<div id=\"comment:264\" align=\"right\">comment:264</div>\n\nReplying to [@jhpalmieri](#comment%3A261):\n> I notice this message when pari is being installed:\n> \n> ```\n> To sage build time, Pari will not be tuned for your systems\n> If you want higher performance, at the expense of a slower build\n> set the environment variable SAGE_TUNE_pari=yes by typing the following\n> before building Sage (or at least before building Pari)\n> ```\n> Aside from the lack of punctuation (a very minor point), I think there is a word missing in the first line: should it say \"To *minimize* sage build time\" or something like that?\n\nYes agreed. I'll create a patch and attach it to the ticket. \n\n> Also, if you're introducing the environment variable `SAGE_TUNE_pari`, you should also document it in the Sage installation guide -- see the section on environment variables in SAGE_ROOT/devel/sage/doc/en/installation/source.rst.\n\nThat is now #9756",
    "created_at": "2010-08-17T17:41:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79409",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:264" align="right">comment:264</div>

Replying to [@jhpalmieri](#comment%3A261):
> I notice this message when pari is being installed:
> 
> ```
> To sage build time, Pari will not be tuned for your systems
> If you want higher performance, at the expense of a slower build
> set the environment variable SAGE_TUNE_pari=yes by typing the following
> before building Sage (or at least before building Pari)
> ```
> Aside from the lack of punctuation (a very minor point), I think there is a word missing in the first line: should it say "To *minimize* sage build time" or something like that?

Yes agreed. I'll create a patch and attach it to the ticket. 

> Also, if you're introducing the environment variable `SAGE_TUNE_pari`, you should also document it in the Sage installation guide -- see the section on environment variables in SAGE_ROOT/devel/sage/doc/en/installation/source.rst.

That is now #9756



---

archive/issue_comments_079410.json:
```json
{
    "body": "<div id=\"comment:265\" align=\"right\">comment:265</div>\n\nReplying to [@jdemeyer](#comment%3A263):\n> Replying to [@sagetrac-drkirkby](#comment%3A262):\n> > When were these dropped - since I tested this on OpenSolaris, or are these other changes? I can't keep up with the changes on this ticket! \n> \n> By looking at `hg log`: 22 July 2010 (or possibly before)\n\nIn that case, it's pointless worrying about them now. Sage will not build with SunStudio and does not build on HP-UX. These are two things I'd like to fix (especially the former), but they are not critical to this ticket. Any issues like that can go on another ticket. \n\nDave",
    "created_at": "2010-08-17T17:44:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79410",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:265" align="right">comment:265</div>

Replying to [@jdemeyer](#comment%3A263):
> Replying to [@sagetrac-drkirkby](#comment%3A262):
> > When were these dropped - since I tested this on OpenSolaris, or are these other changes? I can't keep up with the changes on this ticket! 
> 
> By looking at `hg log`: 22 July 2010 (or possibly before)

In that case, it's pointless worrying about them now. Sage will not build with SunStudio and does not build on HP-UX. These are two things I'd like to fix (especially the former), but they are not critical to this ticket. Any issues like that can go on another ticket. 

Dave



---

archive/issue_comments_079411.json:
```json
{
    "body": "<div id=\"comment:266\" align=\"right\">comment:266</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A264):\n> Yes agreed. I'll create a patch and attach it to the ticket.\n\nThanks, but I already did it.  New spkg (same name): [http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3.svn-12577.p2.spkg](http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3.svn-12577.p2.spkg)",
    "created_at": "2010-08-17T17:45:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79411",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:266" align="right">comment:266</div>

Replying to [@sagetrac-drkirkby](#comment%3A264):
> Yes agreed. I'll create a patch and attach it to the ticket.

Thanks, but I already did it.  New spkg (same name): [http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3.svn-12577.p2.spkg](http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3.svn-12577.p2.spkg)



---

archive/issue_comments_079412.json:
```json
{
    "body": "<div id=\"comment:267\" align=\"right\">comment:267</div>\n\nTwo more comments:\n\n- I can't get this to build on t2.  I get an error message\n\n```\nExtracting examples/Makefile.solaris-sparcv9\nExtracting Osolaris-sparcv9/Makefile\n./Configure: test: argument expected\nERROR - configure PARI with readline and gmp failed.\n```\nI've put the full log here: [http://sage.math.washington.edu/home/palmieri/misc/pari-2.4.3.svn-12577.log](http://sage.math.washington.edu/home/palmieri/misc/pari-2.4.3.svn-12577.log).\n\n- on a Mac OS X 10.6 machine (intel), the spkg included in sage-4.6.prealpha1.tar seems to build fine, although I haven't finished building the rest of Sage or doing doctests.  But if I do `export SAGE_TUNE_pari=yes`, then it doesn't build.  Here's an excerpt from the log:\n\n```\nIn file included from ../src/test/tune.c:21:\n../src/headers/pari.h:59:21: error: mpinl.h: No such file or directory\n../src/test/tune.c: In function 'speed_redc':\n../src/test/tune.c:213: warning: implicit declaration of function 'int_LSW'\n../src/test/tune.c:213: error: invalid type argument of 'unary *'\n../src/test/tune.c: In function 'speed_modii':\n../src/test/tune.c:216: error: invalid type argument of 'unary *'\n../src/test/tune.c: In function 'speed_remiimul':\n../src/test/tune.c:220: error: invalid type argument of 'unary *'\nmake[2]: *** [tune.o] Error 1\n./Configure: line 168: tune: command not found\n```\nIf I use the new spkg [http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3.svn-12577.p2.spkg](http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3.svn-12577.p2.spkg), then it gets past this error.  It's not done building yet, though...",
    "created_at": "2010-08-17T17:49:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79412",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:267" align="right">comment:267</div>

Two more comments:

- I can't get this to build on t2.  I get an error message

```
Extracting examples/Makefile.solaris-sparcv9
Extracting Osolaris-sparcv9/Makefile
./Configure: test: argument expected
ERROR - configure PARI with readline and gmp failed.
```
I've put the full log here: [http://sage.math.washington.edu/home/palmieri/misc/pari-2.4.3.svn-12577.log](http://sage.math.washington.edu/home/palmieri/misc/pari-2.4.3.svn-12577.log).

- on a Mac OS X 10.6 machine (intel), the spkg included in sage-4.6.prealpha1.tar seems to build fine, although I haven't finished building the rest of Sage or doing doctests.  But if I do `export SAGE_TUNE_pari=yes`, then it doesn't build.  Here's an excerpt from the log:

```
In file included from ../src/test/tune.c:21:
../src/headers/pari.h:59:21: error: mpinl.h: No such file or directory
../src/test/tune.c: In function 'speed_redc':
../src/test/tune.c:213: warning: implicit declaration of function 'int_LSW'
../src/test/tune.c:213: error: invalid type argument of 'unary *'
../src/test/tune.c: In function 'speed_modii':
../src/test/tune.c:216: error: invalid type argument of 'unary *'
../src/test/tune.c: In function 'speed_remiimul':
../src/test/tune.c:220: error: invalid type argument of 'unary *'
make[2]: *** [tune.o] Error 1
./Configure: line 168: tune: command not found
```
If I use the new spkg [http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3.svn-12577.p2.spkg](http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3.svn-12577.p2.spkg), then it gets past this error.  It's not done building yet, though...



---

archive/issue_comments_079413.json:
```json
{
    "body": "<div id=\"comment:268\" align=\"right\">comment:268</div>\n\nBy the way, \"hg status\" reports\n\n```\n? patches/files/base2.c\n? patches/files/get_dlcflags\n? patches/files/get_ld\n? patches/files/get_tests\n? patches/files/gphelp.in\n? patches/files/init.c\n? patches/files/mp.c\n? patches/files/paripriv.h\n? patches/files/polarit3.c\n```",
    "created_at": "2010-08-17T17:58:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79413",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:268" align="right">comment:268</div>

By the way, "hg status" reports

```
? patches/files/base2.c
? patches/files/get_dlcflags
? patches/files/get_ld
? patches/files/get_tests
? patches/files/gphelp.in
? patches/files/init.c
? patches/files/mp.c
? patches/files/paripriv.h
? patches/files/polarit3.c
```



---

archive/issue_comments_079414.json:
```json
{
    "body": "<div id=\"comment:269\" align=\"right\">comment:269</div>\n\nReplying to [@jhpalmieri](#comment%3A268):\n> By the way, \"hg status\" reports\n> \n> ```\n> ? patches/files/base2.c\n> ? patches/files/get_dlcflags\n> ? patches/files/get_ld\n> ? patches/files/get_tests\n> ? patches/files/gphelp.in\n> ? patches/files/init.c\n> ? patches/files/mp.c\n> ? patches/files/paripriv.h\n> ? patches/files/polarit3.c\n> ```\n\nI'm not sure what the question mark means, but these files are not supposed to be under revision control.  They are generated by my `spkg-make` script from the corresponding patches/*.patch files.",
    "created_at": "2010-08-17T18:07:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79414",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:269" align="right">comment:269</div>

Replying to [@jhpalmieri](#comment%3A268):
> By the way, "hg status" reports
> 
> ```
> ? patches/files/base2.c
> ? patches/files/get_dlcflags
> ? patches/files/get_ld
> ? patches/files/get_tests
> ? patches/files/gphelp.in
> ? patches/files/init.c
> ? patches/files/mp.c
> ? patches/files/paripriv.h
> ? patches/files/polarit3.c
> ```

I'm not sure what the question mark means, but these files are not supposed to be under revision control.  They are generated by my `spkg-make` script from the corresponding patches/*.patch files.



---

archive/issue_comments_079415.json:
```json
{
    "body": "<div id=\"comment:270\" align=\"right\">comment:270</div>\n\nThis needs work now. \n\n* It's not building on 't2'\n* SPKG.txt needs updating\n* If the files in {{{patches/files}} directory are not supposed to be under revision control, then the directory should be added to .hgignore. But it's hard to understand why the files should be present, but not under revision control.",
    "created_at": "2010-08-17T18:11:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79415",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:270" align="right">comment:270</div>

This needs work now. 

* It's not building on 't2'
* SPKG.txt needs updating
* If the files in {{{patches/files}} directory are not supposed to be under revision control, then the directory should be added to .hgignore. But it's hard to understand why the files should be present, but not under revision control.



---

archive/issue_events_118526.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-08-17T18:11:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9343#event-118526"
}
```



---

archive/issue_events_118527.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-08-17T18:11:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9343#event-118527"
}
```



---

archive/issue_comments_079416.json:
```json
{
    "body": "<div id=\"comment:271\" align=\"right\">comment:271</div>\n\nReplying to [@jdemeyer](#comment%3A269):\n> Replying to [@jhpalmieri](#comment%3A268):\n> > By the way, \"hg status\" reports\n\n\n```\n? patches/files/base2.c\n? patches/files/get_dlcflags\n? patches/files/get_ld\n? patches/files/get_tests\n? patches/files/gphelp.in\n? patches/files/init.c\n? patches/files/mp.c\n? patches/files/paripriv.h\n? patches/files/polarit3.c\n```\n> \n> I'm not sure what the question mark means, but these files are not supposed to be under revision control.  They are generated by my `spkg-make` script from the corresponding patches/*.patch files.\n\nIn that case, you'd have to add them to `.hgignore`.",
    "created_at": "2010-08-17T18:14:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79416",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:271" align="right">comment:271</div>

Replying to [@jdemeyer](#comment%3A269):
> Replying to [@jhpalmieri](#comment%3A268):
> > By the way, "hg status" reports


```
? patches/files/base2.c
? patches/files/get_dlcflags
? patches/files/get_ld
? patches/files/get_tests
? patches/files/gphelp.in
? patches/files/init.c
? patches/files/mp.c
? patches/files/paripriv.h
? patches/files/polarit3.c
```
> 
> I'm not sure what the question mark means, but these files are not supposed to be under revision control.  They are generated by my `spkg-make` script from the corresponding patches/*.patch files.

In that case, you'd have to add them to `.hgignore`.



---

archive/issue_comments_079417.json:
```json
{
    "body": "<div id=\"comment:272\" align=\"right\">comment:272</div>\n\nI'm having problems with tuning.  If I do `export SAGE_TUNE_pari=yes`, then on both sage.math and on my Intel Mac OS X 10.6, the build fails.  Logs are here:\n\n- http://sage.math.washington.edu/home/palmieri/misc/tuning.sage-math.pari-2.4.3.svn-12577.log\n- http://sage.math.washington.edu/home/palmieri/misc/tuning.mac.pari-2.4.3.svn-12577.p2.log\n\nOn sage.math at least, if I don't tell it to tune, then everything builds and all tests pass.  On the mac, everything builds, but it hasn't finished testing.",
    "created_at": "2010-08-17T18:16:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79417",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:272" align="right">comment:272</div>

I'm having problems with tuning.  If I do `export SAGE_TUNE_pari=yes`, then on both sage.math and on my Intel Mac OS X 10.6, the build fails.  Logs are here:

- http://sage.math.washington.edu/home/palmieri/misc/tuning.sage-math.pari-2.4.3.svn-12577.log
- http://sage.math.washington.edu/home/palmieri/misc/tuning.mac.pari-2.4.3.svn-12577.p2.log

On sage.math at least, if I don't tell it to tune, then everything builds and all tests pass.  On the mac, everything builds, but it hasn't finished testing.



---

archive/issue_comments_079418.json:
```json
{
    "body": "<div id=\"comment:273\" align=\"right\">comment:273</div>\n\nReplying to [@jhpalmieri](#comment%3A272):\n> I'm having problems with tuning.  If I do `export SAGE_TUNE_pari=yes`, then on both sage.math and on my Intel Mac OS X 10.6, the build fails.  Logs are here:\n> \n> - http://sage.math.washington.edu/home/palmieri/misc/tuning.sage-math.pari-2.4.3.svn-12577.log\n> - http://sage.math.washington.edu/home/palmieri/misc/tuning.mac.pari-2.4.3.svn-12577.p2.log\n> \n> On sage.math at least, if I don't tell it to tune, then everything builds and all tests pass.  On the mac, everything builds, but it hasn't finished testing.\n\nReinstalling the package with `SAGE_TUNE_pari=yes` hangs for me on Fedora 13 x86 (Pentium 4 Prescott); I doubt it will take more than an hour to tune a single function:\n\n```\n...\nSetting INVNEWTON_LIMIT... (default 803)\n              algorithm-A  algorithm-B   ratio  possible\n               (seconds)    (seconds)    diff    thresh\nsize =  66     0.00001332   0.00001739   0.2340    66\nsize =  67     0.00001441   0.00001736   0.1700    67\nsize =  69     0.00001627   0.00001851   0.1208    69\nsize =  71     0.00001636   0.00001891   0.1345    71\nsize =  73     0.00001632   0.00002036   0.1983    73\nsize =  75     0.00001836   0.00002218   0.1721    75\nsize =  77     0.00001818   0.00002236   0.1869    77\nsize =  79     0.00002042   0.00002363   0.1358    79\nsize =  81     0.00002082   0.00002545   0.1821    81\nsize =  83     0.00002345   0.00002527   0.0718    83\nsize =  85     0.00002345   0.00002586   0.0931    85\nsize =  87     0.00002234   0.00002745   0.1863    87\nsize =  89     0.00002545   0.00002897   0.1217    89\nsize =  91     0.00002672   0.00002891   0.0756    91\nsize =  93     0.00002709   0.00003054   0.1132    93\nsize =  95     0.00002799   0.00002972   0.0582    95\nsize =  97     0.00002927   0.00003105   0.0575    97\n\n```",
    "created_at": "2010-08-17T18:21:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79418",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:273" align="right">comment:273</div>

Replying to [@jhpalmieri](#comment%3A272):
> I'm having problems with tuning.  If I do `export SAGE_TUNE_pari=yes`, then on both sage.math and on my Intel Mac OS X 10.6, the build fails.  Logs are here:
> 
> - http://sage.math.washington.edu/home/palmieri/misc/tuning.sage-math.pari-2.4.3.svn-12577.log
> - http://sage.math.washington.edu/home/palmieri/misc/tuning.mac.pari-2.4.3.svn-12577.p2.log
> 
> On sage.math at least, if I don't tell it to tune, then everything builds and all tests pass.  On the mac, everything builds, but it hasn't finished testing.

Reinstalling the package with `SAGE_TUNE_pari=yes` hangs for me on Fedora 13 x86 (Pentium 4 Prescott); I doubt it will take more than an hour to tune a single function:

```
...
Setting INVNEWTON_LIMIT... (default 803)
              algorithm-A  algorithm-B   ratio  possible
               (seconds)    (seconds)    diff    thresh
size =  66     0.00001332   0.00001739   0.2340    66
size =  67     0.00001441   0.00001736   0.1700    67
size =  69     0.00001627   0.00001851   0.1208    69
size =  71     0.00001636   0.00001891   0.1345    71
size =  73     0.00001632   0.00002036   0.1983    73
size =  75     0.00001836   0.00002218   0.1721    75
size =  77     0.00001818   0.00002236   0.1869    77
size =  79     0.00002042   0.00002363   0.1358    79
size =  81     0.00002082   0.00002545   0.1821    81
size =  83     0.00002345   0.00002527   0.0718    83
size =  85     0.00002345   0.00002586   0.0931    85
size =  87     0.00002234   0.00002745   0.1863    87
size =  89     0.00002545   0.00002897   0.1217    89
size =  91     0.00002672   0.00002891   0.0756    91
size =  93     0.00002709   0.00003054   0.1132    93
size =  95     0.00002799   0.00002972   0.0582    95
size =  97     0.00002927   0.00003105   0.0575    97

```



---

archive/issue_comments_079419.json:
```json
{
    "body": "<div id=\"comment:274\" align=\"right\">comment:274</div>\n\n(Oh, the last blank line was unintentionally added by me.)",
    "created_at": "2010-08-17T18:25:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79419",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:274" align="right">comment:274</div>

(Oh, the last blank line was unintentionally added by me.)



---

archive/issue_comments_079420.json:
```json
{
    "body": "<div id=\"comment:275\" align=\"right\">comment:275</div>\n\nI suggest if the tuning is not reliable, we do not prevent it being used, but issue a warning not to use it. Then we can get people to test the tuning, and report where it works and where it does not. It certainly built OK on OpenSolaris. \n\nDave",
    "created_at": "2010-08-17T19:39:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79420",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:275" align="right">comment:275</div>

I suggest if the tuning is not reliable, we do not prevent it being used, but issue a warning not to use it. Then we can get people to test the tuning, and report where it works and where it does not. It certainly built OK on OpenSolaris. 

Dave



---

archive/issue_comments_079421.json:
```json
{
    "body": "<div id=\"comment:276\" align=\"right\">comment:276</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A275):\n> I suggest if the tuning is not reliable, we do not prevent it being used, but issue a warning not to use it. Then we can get people to test the tuning, and report where it works and where it does not. It certainly built OK on OpenSolaris. \n\nHmmm, I reproducably get (PARI-catched) segfaults (everytime at the same point) on Ubuntu 9.04 x86_64 (Core2, gcc 4.5.0)...\n\nOne the Fedora machine, `tune -t` is meanwhile at 3h 12m CPU time (without further output), so I'll assume it will run forever and terminate it.",
    "created_at": "2010-08-17T20:16:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79421",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:276" align="right">comment:276</div>

Replying to [@sagetrac-drkirkby](#comment%3A275):
> I suggest if the tuning is not reliable, we do not prevent it being used, but issue a warning not to use it. Then we can get people to test the tuning, and report where it works and where it does not. It certainly built OK on OpenSolaris. 

Hmmm, I reproducably get (PARI-catched) segfaults (everytime at the same point) on Ubuntu 9.04 x86_64 (Core2, gcc 4.5.0)...

One the Fedora machine, `tune -t` is meanwhile at 3h 12m CPU time (without further output), so I'll assume it will run forever and terminate it.



---

archive/issue_comments_079422.json:
```json
{
    "body": "<div id=\"comment:277\" align=\"right\">comment:277</div>\n\nReplying to [@jhpalmieri](#comment%3A267):\n> Two more comments:\n> \n> - I can't get this to build on t2.  I get an error message\n> \n> ```\n> Extracting examples/Makefile.solaris-sparcv9\n> Extracting Osolaris-sparcv9/Makefile\n> ./Configure: test: argument expected\n> ERROR - configure PARI with readline and gmp failed.\n> ```\n\nPlease try compiling PARI by itself to check whether this is an upstream problem:\n\n```\n$ tar xjf pari-2.4.3.svn-12577.p2.spkg\n$ cd pari-2.4.3.svn-12577.p2/src\n$ ./Configure\n$ make gp\n```",
    "created_at": "2010-08-17T20:39:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79422",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:277" align="right">comment:277</div>

Replying to [@jhpalmieri](#comment%3A267):
> Two more comments:
> 
> - I can't get this to build on t2.  I get an error message
> 
> ```
> Extracting examples/Makefile.solaris-sparcv9
> Extracting Osolaris-sparcv9/Makefile
> ./Configure: test: argument expected
> ERROR - configure PARI with readline and gmp failed.
> ```

Please try compiling PARI by itself to check whether this is an upstream problem:

```
$ tar xjf pari-2.4.3.svn-12577.p2.spkg
$ cd pari-2.4.3.svn-12577.p2/src
$ ./Configure
$ make gp
```



---

archive/issue_comments_079423.json:
```json
{
    "body": "<div id=\"comment:278\" align=\"right\">comment:278</div>\n\nReplying to [@jdemeyer](#comment%3A277):\n\n> Please try compiling PARI by itself to check whether this is an upstream problem:\n\nI get the same error after typing `./Configure`:\n\n```\n==========================================================================\nExtracting examples/Makefile.solaris-sparcv9\nExtracting Osolaris-sparcv9/Makefile\n./Configure: test: argument expected\n```\nUnfortunately skynet is down, so I don't have access to any other Solaris machines right now to test on.",
    "created_at": "2010-08-17T20:48:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79423",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:278" align="right">comment:278</div>

Replying to [@jdemeyer](#comment%3A277):

> Please try compiling PARI by itself to check whether this is an upstream problem:

I get the same error after typing `./Configure`:

```
==========================================================================
Extracting examples/Makefile.solaris-sparcv9
Extracting Osolaris-sparcv9/Makefile
./Configure: test: argument expected
```
Unfortunately skynet is down, so I don't have access to any other Solaris machines right now to test on.



---

archive/issue_comments_079424.json:
```json
{
    "body": "<div id=\"comment:279\" align=\"right\">comment:279</div>\n\nReplying to [@jhpalmieri](#comment%3A278):\n> Replying to [@jdemeyer](#comment%3A277):\n> \n> > Please try compiling PARI by itself to check whether this is an upstream problem:\n> \n> \n> I get the same error after typing `./Configure`:\n> \n> ```\n> ==========================================================================\n> Extracting examples/Makefile.solaris-sparcv9\n> Extracting Osolaris-sparcv9/Makefile\n> ./Configure: test: argument expected\n> ```\n> Unfortunately skynet is down, so I don't have access to any other Solaris machines right now to test on.\n\n\nI've powered up my Sun Blade 1000. I will report back later once I've copied the necessary files to it and started a build. \n\nDave",
    "created_at": "2010-08-17T20:56:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79424",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:279" align="right">comment:279</div>

Replying to [@jhpalmieri](#comment%3A278):
> Replying to [@jdemeyer](#comment%3A277):
> 
> > Please try compiling PARI by itself to check whether this is an upstream problem:
> 
> 
> I get the same error after typing `./Configure`:
> 
> ```
> ==========================================================================
> Extracting examples/Makefile.solaris-sparcv9
> Extracting Osolaris-sparcv9/Makefile
> ./Configure: test: argument expected
> ```
> Unfortunately skynet is down, so I don't have access to any other Solaris machines right now to test on.


I've powered up my Sun Blade 1000. I will report back later once I've copied the necessary files to it and started a build. 

Dave



---

archive/issue_comments_079425.json:
```json
{
    "body": "<div id=\"comment:280\" align=\"right\">comment:280</div>\n\nI'm attaching a patch which reports:\n\n```\nPari will be tuned for your system since you set SAGE_TUNE_pari=\"yes\". This can take a long time.\nWARNING: Tuning Pari is VERY unreliable. You may find your build\nof Pari fails, or Pari does not work properly once built.\n```\n\nor \n\n```\nTo minimize Sage build time and to ensure the best relieability,\nPari will not be tuned for your system. Experience shows tuning\nis unreliable - see\nhttps://github.com/sagemath/sage/issues/9343\nIf you wish to test the tuning code, set the environment\nvariable SAGE_TUNE_pari=yes by typing the following\nbefore building Sage (or at least before building Pari):\nSAGE_TUNE_pari=yes\nexport SAGE_TUNE_pari\n```\n\ndepending on whether `SAGE_TUNE_pari` i set to \"yes\" or not. \n\nDave",
    "created_at": "2010-08-17T20:59:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79425",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:280" align="right">comment:280</div>

I'm attaching a patch which reports:

```
Pari will be tuned for your system since you set SAGE_TUNE_pari="yes". This can take a long time.
WARNING: Tuning Pari is VERY unreliable. You may find your build
of Pari fails, or Pari does not work properly once built.
```

or 

```
To minimize Sage build time and to ensure the best relieability,
Pari will not be tuned for your system. Experience shows tuning
is unreliable - see
https://github.com/sagemath/sage/issues/9343
If you wish to test the tuning code, set the environment
variable SAGE_TUNE_pari=yes by typing the following
before building Sage (or at least before building Pari):
SAGE_TUNE_pari=yes
export SAGE_TUNE_pari
```

depending on whether `SAGE_TUNE_pari` i set to "yes" or not. 

Dave



---

archive/issue_comments_079426.json:
```json
{
    "body": "Attachment: **[9343-Issues-warnings-about-SAGE_TUNE_pari.patch.gz](https://github.com/sagemath/sage/files/ticket9343/9343-Issues-warnings-about-SAGE_TUNE_pari.patch.gz)**\n\nPrint information about how to use SAGE_TUNE_pari and the risks it has.",
    "created_at": "2010-08-17T21:01:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79426",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

Attachment: **[9343-Issues-warnings-about-SAGE_TUNE_pari.patch.gz](https://github.com/sagemath/sage/files/ticket9343/9343-Issues-warnings-about-SAGE_TUNE_pari.patch.gz)**

Print information about how to use SAGE_TUNE_pari and the risks it has.



---

archive/issue_comments_079427.json:
```json
{
    "body": "<div id=\"comment:281\" align=\"right\">comment:281</div>\n\nI can confirm what John found on 't2.math' - this package is now broken on Solaris 10 SPARC in at least 32-it mode. \n\nThis is on my own personal machine, a Sun Blade 1000 with a pair of 900 MHz UltraSPARC III+ CPUs. It runs the very first release of Solaris 10 (March 2005), whereas t2.math runs a quite recent version. \n\nI think we are seeing the problems of working with unstable snapshots. An updated Pari was working on 't2' a few weeks ago - I posted the list of test failures above. Since then, the snapshot has been updated, which no doubt fixes one problem, but creates another. Last I noticed, the upstream snapshot was being updated three times per day on average. Clearly the snapshots are not well tested, yet we are using them, and doing the tests ourselves.\n\nI suggest that we report this, and try to get a fix. But rather than download the latest snapshot, we just apply the fix we actually need. Otherwise we have to go thought a lengthly test cycle again. I'm sure it will be tempting to update to the latest snapshot to get even more bugs fixed, but how many will be added? \n\nWorth reading is a book by Fred Brooks called The Mythical Man-Month. \n\nOf particular note here is is point that [that in a suitably complex system there is a certain irreducible number of errors. Any attempt to fix observed errors tends to result in the introduction of other errors.](http://en.wikipedia.org/wiki/The_Mythical_Man-Month#The_tendency_towards_irreducible_number_of_errors) \n\n```\n32 drkirkby@redstart:[~/src] $ uname -a\nSunOS redstart 5.10 Generic sun4u sparc SUNW,Sun-Blade-1000\n32 drkirkby@redstart:[~/src] $ cat /etc/release\n                         Solaris 10 3/05 s10_74L2a SPARC\n           Copyright 2005 Sun Microsystems, Inc.  All Rights Reserved.\n                        Use is subject to license terms.\n                            Assembled 22 January 2005\n32 drkirkby@redstart:[~/src] $ ./Configure\nConfiguring pari-2.4.3 (DEVELOPMENT VERSION) [ development svn-12577 ]\nChecking echo to see how to suppress newlines...\n...using \\c\nLooking for some tools first ...\n...ld is /usr/ccs/bin/ld\n...zcat is /usr/bin/zcat\n...gzip is /usr/bin/gzip\n...ranlib is /usr/ccs/bin/ranlib\n...perl is /usr/bin/perl\nLooking for the compilers ...\n...cc is /usr/ucb/cc\n...gcc is /usr/local/gcc-4.5.0/bin/gcc\nGNU compiler version 4.5.0 (GCC gmp-5.0.1 mpfr-3.0.0 mpc-0.8.2)\nGiven the previous choices, sizeof(long) is 4 chars.\nThe internal word representation of a double is l[0], l[1].\n==========================================================================\nBuilding for: UltraSparc running solaris (MicroSparc/GMP kernel) 32-bit version\n==========================================================================\nC compiler is          /usr/local/gcc-4.5.0/bin/gcc -O3 -Wall -fno-strict-aliasing -fomit-frame-pointer    -fPIC\nExecutable linker is   /usr/local/gcc-4.5.0/bin/gcc  -O3 -Wall -fno-strict-aliasing -fomit-frame-pointer    \nDynamic Lib linker is  /usr/local/gcc-4.5.0/bin/gcc  -shared -mimpure-text $(CFLAGS) $(DLCFLAGS) -Wl,-G,-h,$(LIBPARI_SONAME) \nLooking in C lib for some symbols...\n...Found exp2.\n...Found log2.\n...Found strftime.\n...Found getrusage.\n...Found sigaction.\n...Found TIOCGWINSZ.\n...Found getrlimit.\n...Found stat.\n...Found vsnprintf.\n...Found waitpid.\n...Found setsid.\n...Found getenv.\n...Found isatty.\n...Found alarm.\n...Found dlopen.\nChecking for optional libraries and headers...\n### Building without GNU MP support\n...Found libX11 in /usr/openwin/lib\n...Found X11 header files in /usr/openwin/include/X11\n...Extra Libraries are -lsocket -lnsl\nHi-Res Graphics: X11\n### Building without GNU readline support\nInstallation prefix ? [/usr/local]\n...for architecture-independent files (share-prefix) ? [/usr/local/share]\nInstallation directories for:\n...executables (gp, gphelp) ? [/usr/local/bin]\n...libraries (libpari) ? [/usr/local/lib]\n...include files ? [/usr/local/include]\n...manual pages ? [/usr/local/share/man/man1]\n...other system-dependent data ? [/usr/local/lib/pari]\n...other system-independent data ? [/usr/local/share/pari]\nDefault is dynamic executable and shared library\n==========================================================================\nExtracting examples/Makefile.solaris-sparcv9\nExtracting Osolaris-sparcv9/Makefile\n./Configure: test: argument expected\n32 drkirkby@redstart:[~/src] $ \n```",
    "created_at": "2010-08-17T21:26:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79427",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:281" align="right">comment:281</div>

I can confirm what John found on 't2.math' - this package is now broken on Solaris 10 SPARC in at least 32-it mode. 

This is on my own personal machine, a Sun Blade 1000 with a pair of 900 MHz UltraSPARC III+ CPUs. It runs the very first release of Solaris 10 (March 2005), whereas t2.math runs a quite recent version. 

I think we are seeing the problems of working with unstable snapshots. An updated Pari was working on 't2' a few weeks ago - I posted the list of test failures above. Since then, the snapshot has been updated, which no doubt fixes one problem, but creates another. Last I noticed, the upstream snapshot was being updated three times per day on average. Clearly the snapshots are not well tested, yet we are using them, and doing the tests ourselves.

I suggest that we report this, and try to get a fix. But rather than download the latest snapshot, we just apply the fix we actually need. Otherwise we have to go thought a lengthly test cycle again. I'm sure it will be tempting to update to the latest snapshot to get even more bugs fixed, but how many will be added? 

Worth reading is a book by Fred Brooks called The Mythical Man-Month. 

Of particular note here is is point that [that in a suitably complex system there is a certain irreducible number of errors. Any attempt to fix observed errors tends to result in the introduction of other errors.](http://en.wikipedia.org/wiki/The_Mythical_Man-Month#The_tendency_towards_irreducible_number_of_errors) 

```
32 drkirkby@redstart:[~/src] $ uname -a
SunOS redstart 5.10 Generic sun4u sparc SUNW,Sun-Blade-1000
32 drkirkby@redstart:[~/src] $ cat /etc/release
                         Solaris 10 3/05 s10_74L2a SPARC
           Copyright 2005 Sun Microsystems, Inc.  All Rights Reserved.
                        Use is subject to license terms.
                            Assembled 22 January 2005
32 drkirkby@redstart:[~/src] $ ./Configure
Configuring pari-2.4.3 (DEVELOPMENT VERSION) [ development svn-12577 ]
Checking echo to see how to suppress newlines...
...using \c
Looking for some tools first ...
...ld is /usr/ccs/bin/ld
...zcat is /usr/bin/zcat
...gzip is /usr/bin/gzip
...ranlib is /usr/ccs/bin/ranlib
...perl is /usr/bin/perl
Looking for the compilers ...
...cc is /usr/ucb/cc
...gcc is /usr/local/gcc-4.5.0/bin/gcc
GNU compiler version 4.5.0 (GCC gmp-5.0.1 mpfr-3.0.0 mpc-0.8.2)
Given the previous choices, sizeof(long) is 4 chars.
The internal word representation of a double is l[0], l[1].
==========================================================================
Building for: UltraSparc running solaris (MicroSparc/GMP kernel) 32-bit version
==========================================================================
C compiler is          /usr/local/gcc-4.5.0/bin/gcc -O3 -Wall -fno-strict-aliasing -fomit-frame-pointer    -fPIC
Executable linker is   /usr/local/gcc-4.5.0/bin/gcc  -O3 -Wall -fno-strict-aliasing -fomit-frame-pointer    
Dynamic Lib linker is  /usr/local/gcc-4.5.0/bin/gcc  -shared -mimpure-text $(CFLAGS) $(DLCFLAGS) -Wl,-G,-h,$(LIBPARI_SONAME) 
Looking in C lib for some symbols...
...Found exp2.
...Found log2.
...Found strftime.
...Found getrusage.
...Found sigaction.
...Found TIOCGWINSZ.
...Found getrlimit.
...Found stat.
...Found vsnprintf.
...Found waitpid.
...Found setsid.
...Found getenv.
...Found isatty.
...Found alarm.
...Found dlopen.
Checking for optional libraries and headers...
### Building without GNU MP support
...Found libX11 in /usr/openwin/lib
...Found X11 header files in /usr/openwin/include/X11
...Extra Libraries are -lsocket -lnsl
Hi-Res Graphics: X11
### Building without GNU readline support
Installation prefix ? [/usr/local]
...for architecture-independent files (share-prefix) ? [/usr/local/share]
Installation directories for:
...executables (gp, gphelp) ? [/usr/local/bin]
...libraries (libpari) ? [/usr/local/lib]
...include files ? [/usr/local/include]
...manual pages ? [/usr/local/share/man/man1]
...other system-dependent data ? [/usr/local/lib/pari]
...other system-independent data ? [/usr/local/share/pari]
Default is dynamic executable and shared library
==========================================================================
Extracting examples/Makefile.solaris-sparcv9
Extracting Osolaris-sparcv9/Makefile
./Configure: test: argument expected
32 drkirkby@redstart:[~/src] $ 
```



---

archive/issue_comments_079428.json:
```json
{
    "body": "<div id=\"comment:282\" align=\"right\">comment:282</div>\n\nReplying to [@nexttime](#comment%3A276):\n> Hmmm, I reproducably get (PARI-catched) segfaults (everytime at the same point) on Ubuntu 9.04 x86_64 (Core2, gcc 4.5.0)...\n\nSame here, Gentoo Linux, x86_64 Intel Core2, 64bit, gcc 4.6.0.\n\nSo tuning is **completely broken**.",
    "created_at": "2010-08-17T21:29:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79428",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:282" align="right">comment:282</div>

Replying to [@nexttime](#comment%3A276):
> Hmmm, I reproducably get (PARI-catched) segfaults (everytime at the same point) on Ubuntu 9.04 x86_64 (Core2, gcc 4.5.0)...

Same here, Gentoo Linux, x86_64 Intel Core2, 64bit, gcc 4.6.0.

So tuning is **completely broken**.



---

archive/issue_comments_079429.json:
```json
{
    "body": "<div id=\"comment:283\" align=\"right\">comment:283</div>\n\nReplying to [@jdemeyer](#comment%3A282):\n> Replying to [@nexttime](#comment%3A276):\n> > Hmmm, I reproducably get (PARI-catched) segfaults (everytime at the same point) on Ubuntu 9.04 x86_64 (Core2, gcc 4.5.0)...\n> \n> \n> Same here, Gentoo Linux, x86_64 Intel Core2, 64bit, gcc 4.6.0.\n> \n> So tuning is **completely broken**.\n\nIt works on OpenSolaris - or at least it did do when I tested it before. \n\nDave",
    "created_at": "2010-08-17T21:34:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79429",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:283" align="right">comment:283</div>

Replying to [@jdemeyer](#comment%3A282):
> Replying to [@nexttime](#comment%3A276):
> > Hmmm, I reproducably get (PARI-catched) segfaults (everytime at the same point) on Ubuntu 9.04 x86_64 (Core2, gcc 4.5.0)...
> 
> 
> Same here, Gentoo Linux, x86_64 Intel Core2, 64bit, gcc 4.6.0.
> 
> So tuning is **completely broken**.

It works on OpenSolaris - or at least it did do when I tested it before. 

Dave



---

archive/issue_comments_079430.json:
```json
{
    "body": "<div id=\"comment:284\" align=\"right\">comment:284</div>\n\nReplying to [@jhpalmieri](#comment%3A278):\n> I get the same error after typing `./Configure`:\n> \n> ```\n> ==========================================================================\n> Extracting examples/Makefile.solaris-sparcv9\n> Extracting Osolaris-sparcv9/Makefile\n> ./Configure: test: argument expected\n> ```\n\nPlease try\n\n```\n/bin/sh -c \"test -d\"\n```\nin a shell and see what happens.",
    "created_at": "2010-08-17T21:41:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79430",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:284" align="right">comment:284</div>

Replying to [@jhpalmieri](#comment%3A278):
> I get the same error after typing `./Configure`:
> 
> ```
> ==========================================================================
> Extracting examples/Makefile.solaris-sparcv9
> Extracting Osolaris-sparcv9/Makefile
> ./Configure: test: argument expected
> ```

Please try

```
/bin/sh -c "test -d"
```
in a shell and see what happens.



---

archive/issue_comments_079431.json:
```json
{
    "body": "<div id=\"comment:285\" align=\"right\">comment:285</div>\n\nReplying to [@jdemeyer](#comment%3A284):\n> Please try\n\n\n```\n/bin/sh -c \"test -d\"\n```\n> in a shell and see what happens.\n\n```\n$ /bin/sh -c \"test -d\"\n/bin/sh: test: argument expected\n```",
    "created_at": "2010-08-17T21:48:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79431",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:285" align="right">comment:285</div>

Replying to [@jdemeyer](#comment%3A284):
> Please try


```
/bin/sh -c "test -d"
```
> in a shell and see what happens.

```
$ /bin/sh -c "test -d"
/bin/sh: test: argument expected
```



---

archive/issue_comments_079432.json:
```json
{
    "body": "<div id=\"comment:286\" align=\"right\">comment:286</div>\n\nMaybe the solaris problem is due to `config/Makefile.SH`, but it's hard to debug without access to a Solaris box.  There are several unquoted `test` statements in that file, probably one of them is the culprit.  Also, that file has changed recently.",
    "created_at": "2010-08-17T21:56:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79432",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:286" align="right">comment:286</div>

Maybe the solaris problem is due to `config/Makefile.SH`, but it's hard to debug without access to a Solaris box.  There are several unquoted `test` statements in that file, probably one of them is the culprit.  Also, that file has changed recently.



---

archive/issue_comments_079433.json:
```json
{
    "body": "<div id=\"comment:287\" align=\"right\">comment:287</div>\n\nReplying to [@jdemeyer](#comment%3A286):\n> Maybe the solaris problem is due to `config/Makefile.SH`, but it's hard to debug without access to a Solaris box.  There are several unquoted `test` statements in that file, probably one of them is the culprit.  Also, that file has changed recently.\n\nWilliam (Stein) should be able to make an account for you on the Sage cluster, which includes the Solaris 10 SPARC machine t2.math.washington.edu.  Just send him an email.",
    "created_at": "2010-08-17T22:18:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79433",
    "user": "https://github.com/qed777"
}
```

<div id="comment:287" align="right">comment:287</div>

Replying to [@jdemeyer](#comment%3A286):
> Maybe the solaris problem is due to `config/Makefile.SH`, but it's hard to debug without access to a Solaris box.  There are several unquoted `test` statements in that file, probably one of them is the culprit.  Also, that file has changed recently.

William (Stein) should be able to make an account for you on the Sage cluster, which includes the Solaris 10 SPARC machine t2.math.washington.edu.  Just send him an email.



---

archive/issue_comments_079434.json:
```json
{
    "body": "<div id=\"comment:288\" align=\"right\">comment:288</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A283):\n> Replying to [@jdemeyer](#comment%3A282):\n> > Replying to [@nexttime](#comment%3A276):\n> > > Hmmm, I reproducably get (PARI-catched) segfaults (everytime at the same point) on Ubuntu 9.04 x86_64 (Core2, gcc 4.5.0)...\n> > \n> > \n> > Same here, Gentoo Linux, x86_64 Intel Core2, 64bit, gcc 4.6.0.\n> > \n> > So tuning is **completely broken**.\n> \n> \n> It works on OpenSolaris - or at least it did do when I tested it before. \n> \n> Dave \n\nIt's now busted on OpenSolaris too!",
    "created_at": "2010-08-17T22:35:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79434",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:288" align="right">comment:288</div>

Replying to [@sagetrac-drkirkby](#comment%3A283):
> Replying to [@jdemeyer](#comment%3A282):
> > Replying to [@nexttime](#comment%3A276):
> > > Hmmm, I reproducably get (PARI-catched) segfaults (everytime at the same point) on Ubuntu 9.04 x86_64 (Core2, gcc 4.5.0)...
> > 
> > 
> > Same here, Gentoo Linux, x86_64 Intel Core2, 64bit, gcc 4.6.0.
> > 
> > So tuning is **completely broken**.
> 
> 
> It works on OpenSolaris - or at least it did do when I tested it before. 
> 
> Dave 

It's now busted on OpenSolaris too!



---

archive/issue_comments_079435.json:
```json
{
    "body": "<div id=\"comment:289\" align=\"right\">comment:289</div>\n\nTo report something *positive*, I've successfully - **without** PARI tuning - built and tested (`ptestlong`) the prealpha1 on:\n* Fedora 13 x86 (P4 Prescott, gcc 4.4.4, native code with `O2`, parallel build with 6 jobs)\n* Ubuntu 9.04 x86_64 (Core2, gcc 4.3.3, native code with `O3`, parallel build with 32 jobs)\n* Ubuntu 9.04 x86_64 (Core2, gcc 4.5.0, native code with `O3`, parallel build with 16 jobs)\n\nBtw, FLTK-devel was installed (and almost all X11 developer packages); PARI correctly did **not** attempt to build with this (since we configure with `--graphic=none`).",
    "created_at": "2010-08-17T23:05:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79435",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:289" align="right">comment:289</div>

To report something *positive*, I've successfully - **without** PARI tuning - built and tested (`ptestlong`) the prealpha1 on:
* Fedora 13 x86 (P4 Prescott, gcc 4.4.4, native code with `O2`, parallel build with 6 jobs)
* Ubuntu 9.04 x86_64 (Core2, gcc 4.3.3, native code with `O3`, parallel build with 32 jobs)
* Ubuntu 9.04 x86_64 (Core2, gcc 4.5.0, native code with `O3`, parallel build with 16 jobs)

Btw, FLTK-devel was installed (and almost all X11 developer packages); PARI correctly did **not** attempt to build with this (since we configure with `--graphic=none`).



---

archive/issue_comments_079436.json:
```json
{
    "body": "<div id=\"comment:290\" align=\"right\">comment:290</div>\n\nTuning errors reported to PARI/GP development: [http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1089](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1089)",
    "created_at": "2010-08-18T19:06:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79436",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:290" align="right">comment:290</div>

Tuning errors reported to PARI/GP development: [http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1089](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1089)



---

archive/issue_events_118528.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2010-08-19T11:13:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9343#event-118528"
}
```



---

archive/issue_events_118529.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2010-08-19T11:13:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20blocker%20/%201",
    "label_color": "ff0000",
    "label_name": "p: blocker / 1",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9343#event-118529"
}
```



---

archive/issue_comments_079437.json:
```json
{
    "body": "<div id=\"comment:292\" align=\"right\">comment:292</div>\n\nReplying to [@nexttime](#comment%3A289):\n> To report something *positive*, I've successfully - **without** PARI tuning - built and tested (`ptestlong`) the prealpha1 on:\n\n* Fedora 13 x86 (P4 Prescott, gcc 4.4.4, native code with `O2`, parallel build with 6 jobs)\n* Ubuntu 9.04 x86_64 (Core2, gcc 4.3.3, native code with `O3`, parallel build with 32 jobs)\n* Ubuntu 9.04 x86_64 (Core2, gcc 4.5.0, native code with `O3`, parallel build with 16 jobs)\n\nAlso:\n* Ubuntu 9.04 x86 (P4 Prescott, gcc 4.3.3, native code without opt., parallel build with 6 jobs)\n\n> Btw, FLTK-devel was installed (and almost all X11 developer packages); PARI correctly did **not** attempt to build with this (since we configure with `--graphic=none`).\n\nI think I've found the culprit of #9722 (PARI attempting to use FLTK for no reason):\n**Lots** of \"local\" variables used in the PARI scripts aren't reset/initialized.\n\nTry, e.g.:\n\n```sh\n$ export with_fltk=yes\n$ ./Configure --graphic=none\n```\nin the PARI source directory, or\n\n```sh\n$ export with_fltk=yes\n$ unset PARI_EXTRA_OPTS\n$ ./sage -f pari-2.3.5.p2 # or the appropriate PARI version, e.g. 2.4.3.svn-12577.p2\n```\nin `$SAGE_ROOT`.",
    "created_at": "2010-08-19T11:26:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79437",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:292" align="right">comment:292</div>

Replying to [@nexttime](#comment%3A289):
> To report something *positive*, I've successfully - **without** PARI tuning - built and tested (`ptestlong`) the prealpha1 on:

* Fedora 13 x86 (P4 Prescott, gcc 4.4.4, native code with `O2`, parallel build with 6 jobs)
* Ubuntu 9.04 x86_64 (Core2, gcc 4.3.3, native code with `O3`, parallel build with 32 jobs)
* Ubuntu 9.04 x86_64 (Core2, gcc 4.5.0, native code with `O3`, parallel build with 16 jobs)

Also:
* Ubuntu 9.04 x86 (P4 Prescott, gcc 4.3.3, native code without opt., parallel build with 6 jobs)

> Btw, FLTK-devel was installed (and almost all X11 developer packages); PARI correctly did **not** attempt to build with this (since we configure with `--graphic=none`).

I think I've found the culprit of #9722 (PARI attempting to use FLTK for no reason):
**Lots** of "local" variables used in the PARI scripts aren't reset/initialized.

Try, e.g.:

```sh
$ export with_fltk=yes
$ ./Configure --graphic=none
```
in the PARI source directory, or

```sh
$ export with_fltk=yes
$ unset PARI_EXTRA_OPTS
$ ./sage -f pari-2.3.5.p2 # or the appropriate PARI version, e.g. 2.4.3.svn-12577.p2
```
in `$SAGE_ROOT`.



---

archive/issue_comments_079438.json:
```json
{
    "body": "<div id=\"comment:293\" align=\"right\">comment:293</div>\n\n(The above doesn't *fail* in all cases, but PARI *attempts* to use X11 or FLTK despite `--graphic=none` given. On Ubuntu, I had to create a symbolic link from `/usr/lib/libfltk.so` to `/usr/lib/libfltk.so.1.1` to produce the *compilation* error reported at #9722, *with* X11 developer packages, and with just FLTK, not FLTK-devel installed.)",
    "created_at": "2010-08-19T12:02:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79438",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:293" align="right">comment:293</div>

(The above doesn't *fail* in all cases, but PARI *attempts* to use X11 or FLTK despite `--graphic=none` given. On Ubuntu, I had to create a symbolic link from `/usr/lib/libfltk.so` to `/usr/lib/libfltk.so.1.1` to produce the *compilation* error reported at #9722, *with* X11 developer packages, and with just FLTK, not FLTK-devel installed.)



---

archive/issue_comments_079439.json:
```json
{
    "body": "<div id=\"comment:294\" align=\"right\">comment:294</div>\n\nTo the people who cannot compile PARI/GP because of #9722:\n\nPlease check whether the following works:\n* Download [http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3.svn-12577.p2.spkg](http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3.svn-12577.p2.spkg)\nIn a shell, type:\n\n```\ntar xjf pari-2.4.3.svn-12577.p2.spkg\ncd pari-2.4.3.svn-12577.p2/src\n./Configure --graphic=none\nmake gp\n```\n\nOn my system (Gentoo Linux), this correctly disables graphics.",
    "created_at": "2010-08-21T11:01:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79439",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:294" align="right">comment:294</div>

To the people who cannot compile PARI/GP because of #9722:

Please check whether the following works:
* Download [http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3.svn-12577.p2.spkg](http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3.svn-12577.p2.spkg)
In a shell, type:

```
tar xjf pari-2.4.3.svn-12577.p2.spkg
cd pari-2.4.3.svn-12577.p2/src
./Configure --graphic=none
make gp
```

On my system (Gentoo Linux), this correctly disables graphics.



---

archive/issue_comments_079440.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,11 +1,3 @@\n See #7736 (a bug this will fix), #8453 (last pari upgrade).\n \n-How to apply the patches to [sage-4.5.3.alpha0](http://sage.math.washington.edu/home/release/sage-4.5.3.alpha0/sage-4.5.3.alpha0.tar):\n-* Install the new pari spkg: [http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3.svn-12577.spkg](http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3.svn-12577.spkg)\n-* Install the new genus2reduction spkg: [http://cage.ugent.be/~jdemeyer/sage/genus2reduction-0.3.p8.spkg](http://cage.ugent.be/~jdemeyer/sage/genus2reduction-0.3.p8.spkg) (see #9591)\n-* Install the new lcalc spkg: [http://cage.ugent.be/~jdemeyer/sage/lcalc-20100428-1.23.p2.spkg](http://cage.ugent.be/~jdemeyer/sage/lcalc-20100428-1.23.p2.spkg) (see #9592)\n-* Apply the [extcode_9343_combined3.patch](https://github.com/sagemath/sage/files/ticket9343/extcode_9343_combined3.patch.gz) patch to `data/extcode`\n-* Apply the [sagelib_9343_combined7.patch](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343_combined7.patch.gz) to `devel/sage`\n-\n-Alternatively, you can download a complete Sage distribution based on sage-4.5.3.alpha1 with all these patches (and also #9750) from\n-* [http://cage.ugent.be/~jdemeyer/sage/sage-4.6.prealpha1.tar](http://cage.ugent.be/~jdemeyer/sage/sage-4.6.prealpha1.tar)\n+See [http://wiki.sagemath.org/NewPARI](http://wiki.sagemath.org/NewPARI) for more information and links.\n``````\n",
    "created_at": "2010-08-21T12:48:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79440",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,11 +1,3 @@
 See #7736 (a bug this will fix), #8453 (last pari upgrade).
 
-How to apply the patches to [sage-4.5.3.alpha0](http://sage.math.washington.edu/home/release/sage-4.5.3.alpha0/sage-4.5.3.alpha0.tar):
-* Install the new pari spkg: [http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3.svn-12577.spkg](http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3.svn-12577.spkg)
-* Install the new genus2reduction spkg: [http://cage.ugent.be/~jdemeyer/sage/genus2reduction-0.3.p8.spkg](http://cage.ugent.be/~jdemeyer/sage/genus2reduction-0.3.p8.spkg) (see #9591)
-* Install the new lcalc spkg: [http://cage.ugent.be/~jdemeyer/sage/lcalc-20100428-1.23.p2.spkg](http://cage.ugent.be/~jdemeyer/sage/lcalc-20100428-1.23.p2.spkg) (see #9592)
-* Apply the [extcode_9343_combined3.patch](https://github.com/sagemath/sage/files/ticket9343/extcode_9343_combined3.patch.gz) patch to `data/extcode`
-* Apply the [sagelib_9343_combined7.patch](https://github.com/sagemath/sage/files/ticket9343/sagelib_9343_combined7.patch.gz) to `devel/sage`
-
-Alternatively, you can download a complete Sage distribution based on sage-4.5.3.alpha1 with all these patches (and also #9750) from
-* [http://cage.ugent.be/~jdemeyer/sage/sage-4.6.prealpha1.tar](http://cage.ugent.be/~jdemeyer/sage/sage-4.6.prealpha1.tar)
+See [http://wiki.sagemath.org/NewPARI](http://wiki.sagemath.org/NewPARI) for more information and links.
``````




---

archive/issue_comments_079441.json:
```json
{
    "body": "<div id=\"comment:296\" align=\"right\">comment:296</div>\n\nJeroen, the last changes to p3 (`SPKG.txt`, `patches/README.txt`) aren't yet committed.\n\nThanks for setting up the Wiki page.\n\nI'm working on #9722 btw, still hoping that it will make it into 4.5.3, since I don't believe 4.6 will be ready in time, and/or don't expect people to install a brand new major release (despite the \".0\" missing) right before a new semester starts.\n\nI'll take a closer look at p3 later; I don't think `PARI_EXTRA_OPTS` is yet documented though.",
    "created_at": "2010-08-21T13:58:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79441",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:296" align="right">comment:296</div>

Jeroen, the last changes to p3 (`SPKG.txt`, `patches/README.txt`) aren't yet committed.

Thanks for setting up the Wiki page.

I'm working on #9722 btw, still hoping that it will make it into 4.5.3, since I don't believe 4.6 will be ready in time, and/or don't expect people to install a brand new major release (despite the ".0" missing) right before a new semester starts.

I'll take a closer look at p3 later; I don't think `PARI_EXTRA_OPTS` is yet documented though.



---

archive/issue_comments_079442.json:
```json
{
    "body": "<div id=\"comment:297\" align=\"right\">comment:297</div>\n\nJeroen, IIRC 4.6.prealpha1 is based on 4.5.3.alpha**0**, and doesn't contain all of the latest (#9343) changes, so perhaps update/correct the Wiki page s.t. people will test the lastest PARI(-related) spkgs and patches, not the old one(s) contained in the complete Sage distribution.\n\nPlease excuse if I'm wrong here...\n\n(In case you prepare a new one, I think it should be prealpha2 to avoid confusion with the previous one.)",
    "created_at": "2010-08-21T14:53:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79442",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:297" align="right">comment:297</div>

Jeroen, IIRC 4.6.prealpha1 is based on 4.5.3.alpha**0**, and doesn't contain all of the latest (#9343) changes, so perhaps update/correct the Wiki page s.t. people will test the lastest PARI(-related) spkgs and patches, not the old one(s) contained in the complete Sage distribution.

Please excuse if I'm wrong here...

(In case you prepare a new one, I think it should be prealpha2 to avoid confusion with the previous one.)



---

archive/issue_comments_079443.json:
```json
{
    "body": "<div id=\"comment:298\" align=\"right\">comment:298</div>\n\nReplying to [@nexttime](#comment%3A296):\n> Jeroen, the last changes to p3 (`SPKG.txt`, `patches/README.txt`) aren't yet committed.\n\nDone, spkg changed with same name.",
    "created_at": "2010-08-21T15:12:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79443",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:298" align="right">comment:298</div>

Replying to [@nexttime](#comment%3A296):
> Jeroen, the last changes to p3 (`SPKG.txt`, `patches/README.txt`) aren't yet committed.

Done, spkg changed with same name.



---

archive/issue_comments_079444.json:
```json
{
    "body": "<div id=\"comment:299\" align=\"right\">comment:299</div>\n\nReplying to [@nexttime](#comment%3A297):\n> (In case you prepare a new one, I think it should be prealpha2 to avoid confusion with the previous one.)\n\nI will post a prealpha2 later today which will also include #9400.",
    "created_at": "2010-08-21T15:46:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79444",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:299" align="right">comment:299</div>

Replying to [@nexttime](#comment%3A297):
> (In case you prepare a new one, I think it should be prealpha2 to avoid confusion with the previous one.)

I will post a prealpha2 later today which will also include #9400.



---

archive/issue_comments_079445.json:
```json
{
    "body": "<div id=\"comment:300\" align=\"right\">comment:300</div>\n\nNew distribution: [http://sage.math.washington.edu/home/jdemeyer/dist/sage-4.6.prealpha2.tar](http://sage.math.washington.edu/home/jdemeyer/dist/sage-4.6.prealpha2.tar)\nFor more info, see [http://wiki.sagemath.org/NewPARI](http://wiki.sagemath.org/NewPARI)",
    "created_at": "2010-08-21T22:22:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79445",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:300" align="right">comment:300</div>

New distribution: [http://sage.math.washington.edu/home/jdemeyer/dist/sage-4.6.prealpha2.tar](http://sage.math.washington.edu/home/jdemeyer/dist/sage-4.6.prealpha2.tar)
For more info, see [http://wiki.sagemath.org/NewPARI](http://wiki.sagemath.org/NewPARI)



---

archive/issue_comments_079446.json:
```json
{
    "body": "<div id=\"comment:301\" align=\"right\">comment:301</div>\n\nReplying to [@jdemeyer](#comment%3A300):\n> New distribution: [http://sage.math.washington.edu/home/jdemeyer/dist/sage-4.6.prealpha2.tar](http://sage.math.washington.edu/home/jdemeyer/dist/sage-4.6.prealpha2.tar)\n> For more info, see [http://wiki.sagemath.org/NewPARI](http://wiki.sagemath.org/NewPARI)\n\nThis distro is still broken on **any** form of Solaris - both SPARC and x86. \n\n```\nExtracting examples/Makefile.solaris-sparcv9\nExtracting Osolaris-sparcv9/Makefile\n./Configure: test: argument expected\nERROR - configure PARI with readline and gmp failed.\n\nreal\t0m12.936s\nuser\t0m3.857s\nsys\t0m5.748s\nsage: An error occurred while installing pari-2.4.3.svn-12577.p3\n```\n\nOne of your earlier releases, based on a snapshot prior to 12577 was OK, so this is a very recently introduced bug. \n\nDave",
    "created_at": "2010-08-22T09:18:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79446",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:301" align="right">comment:301</div>

Replying to [@jdemeyer](#comment%3A300):
> New distribution: [http://sage.math.washington.edu/home/jdemeyer/dist/sage-4.6.prealpha2.tar](http://sage.math.washington.edu/home/jdemeyer/dist/sage-4.6.prealpha2.tar)
> For more info, see [http://wiki.sagemath.org/NewPARI](http://wiki.sagemath.org/NewPARI)

This distro is still broken on **any** form of Solaris - both SPARC and x86. 

```
Extracting examples/Makefile.solaris-sparcv9
Extracting Osolaris-sparcv9/Makefile
./Configure: test: argument expected
ERROR - configure PARI with readline and gmp failed.

real	0m12.936s
user	0m3.857s
sys	0m5.748s
sage: An error occurred while installing pari-2.4.3.svn-12577.p3
```

One of your earlier releases, based on a snapshot prior to 12577 was OK, so this is a very recently introduced bug. 

Dave



---

archive/issue_comments_079447.json:
```json
{
    "body": "<div id=\"comment:302\" align=\"right\">comment:302</div>\n\nI found out what prevents PARI/GP from compiling on Solaris.  The problem is that `/bin/sh` from Solaris doesn't know about `test -e <filename>`.\nSo there are two solutions:\n\n**Solution 1**: In `Configure`, replace\n\n```\n#! /bin/sh\n```\nby\n\n```\n#!/usr/bin/env bash\n```\n\n**Solution 2**: In `config/Makefile.SH`, replace all occurances of\n\n```\ntest -e\n```\nby\n\n```\ntest -f\n```\n\nUsing either of these solutions makes PARI/GP compile.\n\nSince Sage assumes the existence of `bash`, we might as well apply the first solution anyway.  I will report this upstream.",
    "created_at": "2010-08-22T14:41:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79447",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:302" align="right">comment:302</div>

I found out what prevents PARI/GP from compiling on Solaris.  The problem is that `/bin/sh` from Solaris doesn't know about `test -e <filename>`.
So there are two solutions:

**Solution 1**: In `Configure`, replace

```
#! /bin/sh
```
by

```
#!/usr/bin/env bash
```

**Solution 2**: In `config/Makefile.SH`, replace all occurances of

```
test -e
```
by

```
test -f
```

Using either of these solutions makes PARI/GP compile.

Since Sage assumes the existence of `bash`, we might as well apply the first solution anyway.  I will report this upstream.



---

archive/issue_comments_079448.json:
```json
{
    "body": "Attachment: **[pari_spkg.patch.gz](https://github.com/sagemath/sage/files/ticket9343/pari_spkg.patch.gz)**\n\nComplete spkg patch (for reference)",
    "created_at": "2010-08-22T19:31:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79448",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[pari_spkg.patch.gz](https://github.com/sagemath/sage/files/ticket9343/pari_spkg.patch.gz)**

Complete spkg patch (for reference)



---

archive/issue_comments_079449.json:
```json
{
    "body": "<div id=\"comment:303\" align=\"right\">comment:303</div>\n\n* PARI/GP bug report about Solaris: [http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1091](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1091)\n  * New PARI spkg: [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p4.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p4.spkg)\n  * New distribution: [http://sage.math.washington.edu/home/jdemeyer/dist/sage-4.6.prealpha3.tar](http://sage.math.washington.edu/home/jdemeyer/dist/sage-4.6.prealpha3.tar)",
    "created_at": "2010-08-22T20:03:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79449",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:303" align="right">comment:303</div>

* PARI/GP bug report about Solaris: [http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1091](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1091)
  * New PARI spkg: [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p4.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p4.spkg)
  * New distribution: [http://sage.math.washington.edu/home/jdemeyer/dist/sage-4.6.prealpha3.tar](http://sage.math.washington.edu/home/jdemeyer/dist/sage-4.6.prealpha3.tar)



---

archive/issue_comments_079450.json:
```json
{
    "body": "<div id=\"comment:304\" align=\"right\">comment:304</div>\n\nReplying to [@jdemeyer](#comment%3A303):\n> * PARI/GP bug report about Solaris: [http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1091](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1091)\n> * New PARI spkg: [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p4.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p4.spkg)\n> * New distribution: [http://sage.math.washington.edu/home/jdemeyer/dist/sage-4.6.prealpha3.tar](http://sage.math.washington.edu/home/jdemeyer/dist/sage-4.6.prealpha3.tar)\n\nAny changes in p4 / prealpha3 other than the Solaris fix?",
    "created_at": "2010-08-22T20:28:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79450",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:304" align="right">comment:304</div>

Replying to [@jdemeyer](#comment%3A303):
> * PARI/GP bug report about Solaris: [http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1091](http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1091)
> * New PARI spkg: [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p4.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p4.spkg)
> * New distribution: [http://sage.math.washington.edu/home/jdemeyer/dist/sage-4.6.prealpha3.tar](http://sage.math.washington.edu/home/jdemeyer/dist/sage-4.6.prealpha3.tar)

Any changes in p4 / prealpha3 other than the Solaris fix?



---

archive/issue_comments_079451.json:
```json
{
    "body": "<div id=\"comment:305\" align=\"right\">comment:305</div>\n\nReplying to [@nexttime](#comment%3A304):\n> Any changes in p4 / prealpha3 other than the Solaris fix?\n\nIn sage-4.6.prealpha3, I merged #9703 and #9735 which hopefully makes Sage pass all tests on Solaris.",
    "created_at": "2010-08-23T10:34:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79451",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:305" align="right">comment:305</div>

Replying to [@nexttime](#comment%3A304):
> Any changes in p4 / prealpha3 other than the Solaris fix?

In sage-4.6.prealpha3, I merged #9703 and #9735 which hopefully makes Sage pass all tests on Solaris.



---

archive/issue_comments_079452.json:
```json
{
    "body": "<div id=\"comment:306\" align=\"right\">comment:306</div>\n\nReplying to [@jdemeyer](#comment%3A305):\n> Replying to [@nexttime](#comment%3A304):\n> > Any changes in p4 / prealpha3 other than the Solaris fix?\n> \n> \n> In sage-4.6.prealpha3, I merged #9703 and #9735 which hopefully makes Sage pass all tests on Solaris.\n\nIt was not necessary to include #9703 and #9735 for Sage to pass all doc tests on Solaris 10 (SPARC), which is the only currently supported version of Solaris on Sage. Both of those tickets only affect x86 versions. They will not do any harm, but they were unnecessary. \n\nHowever, since #9703 has been merged, I would request that anyone that builds sage-4.6.prealpha3.tar, that they report on ticket #9703 of the success or failure of these three tests:\n\n```\n\tsage -t  -long devel/sage/sage/modular/abvar/abvar.py # \n\tsage -t  -long devel/sage/sage/lfunctions/sympow.py # \n\tsage -t  -long devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py \n```\n\n#9703 still awaits positive review, so clearly evidence it is working on many systems will add to the confidence that the ticket is valid. Just adding a quick comment like \"The three tests passed on <your system>\" would be useful. \n\nNeither are those two tickets sufficient to cause all doc tests on Solaris 10 on x86 or OpenSolaris on x86, though they will reduce the number of failures. A couple more tickets need to be merged to get all doc tests to pass on Solaris 10 x86 - these are #9689 and #9693. However, that's outside the scope of the Pari upgrade, so I'm not expecting you to merge them, though if you did create a later alpha, I would not object if you did merge them!\n\nDave",
    "created_at": "2010-08-23T11:17:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79452",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:306" align="right">comment:306</div>

Replying to [@jdemeyer](#comment%3A305):
> Replying to [@nexttime](#comment%3A304):
> > Any changes in p4 / prealpha3 other than the Solaris fix?
> 
> 
> In sage-4.6.prealpha3, I merged #9703 and #9735 which hopefully makes Sage pass all tests on Solaris.

It was not necessary to include #9703 and #9735 for Sage to pass all doc tests on Solaris 10 (SPARC), which is the only currently supported version of Solaris on Sage. Both of those tickets only affect x86 versions. They will not do any harm, but they were unnecessary. 

However, since #9703 has been merged, I would request that anyone that builds sage-4.6.prealpha3.tar, that they report on ticket #9703 of the success or failure of these three tests:

```
	sage -t  -long devel/sage/sage/modular/abvar/abvar.py # 
	sage -t  -long devel/sage/sage/lfunctions/sympow.py # 
	sage -t  -long devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py 
```

#9703 still awaits positive review, so clearly evidence it is working on many systems will add to the confidence that the ticket is valid. Just adding a quick comment like "The three tests passed on <your system>" would be useful. 

Neither are those two tickets sufficient to cause all doc tests on Solaris 10 on x86 or OpenSolaris on x86, though they will reduce the number of failures. A couple more tickets need to be merged to get all doc tests to pass on Solaris 10 x86 - these are #9689 and #9693. However, that's outside the scope of the Pari upgrade, so I'm not expecting you to merge them, though if you did create a later alpha, I would not object if you did merge them!

Dave



---

archive/issue_comments_079453.json:
```json
{
    "body": "<div id=\"comment:307\" align=\"right\">comment:307</div>\n\nReplying to [@jdemeyer](#comment%3A294):\n> To the people who cannot compile PARI/GP because of #9722:\n> \n> Please check whether the following works:\n> * Download [http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3.svn-12577.p2.spkg](http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3.svn-12577.p2.spkg)\n> In a shell, type:\n> \n> ```\n> tar xjf pari-2.4.3.svn-12577.p2.spkg\n> cd pari-2.4.3.svn-12577.p2/src\n> ./Configure --graphic=none\n> make gp\n> ```\n\nworked fine on Fedora 13, \n\nGeorg\n> }}}\n> \n> On my system (Gentoo Linux), this correctly disables graphics.",
    "created_at": "2010-08-23T13:41:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79453",
    "user": "https://github.com/sagetrac-ggrafendorfer"
}
```

<div id="comment:307" align="right">comment:307</div>

Replying to [@jdemeyer](#comment%3A294):
> To the people who cannot compile PARI/GP because of #9722:
> 
> Please check whether the following works:
> * Download [http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3.svn-12577.p2.spkg](http://cage.ugent.be/~jdemeyer/sage/pari-2.4.3.svn-12577.p2.spkg)
> In a shell, type:
> 
> ```
> tar xjf pari-2.4.3.svn-12577.p2.spkg
> cd pari-2.4.3.svn-12577.p2/src
> ./Configure --graphic=none
> make gp
> ```

worked fine on Fedora 13, 

Georg
> }}}
> 
> On my system (Gentoo Linux), this correctly disables graphics.



---

archive/issue_comments_079454.json:
```json
{
    "body": "<div id=\"comment:308\" align=\"right\">comment:308</div>\n\nReplying to [@jdemeyer](#comment%3A303):\n> * New distribution: [http://sage.math.washington.edu/home/jdemeyer/dist/sage-4.6.prealpha3.tar](http://sage.math.washington.edu/home/jdemeyer/dist/sage-4.6.prealpha3.tar)\n\nPassed `ptestlong` on Fedora 13 x86_64 (Core2, gcc 4.4.4, native code, `O3`), parallel build with 32 jobs, test with 4 threads.\n\nUbuntu 9.04 x86 in progress.\n\nDave, a bit more happy now?",
    "created_at": "2010-08-23T14:38:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79454",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:308" align="right">comment:308</div>

Replying to [@jdemeyer](#comment%3A303):
> * New distribution: [http://sage.math.washington.edu/home/jdemeyer/dist/sage-4.6.prealpha3.tar](http://sage.math.washington.edu/home/jdemeyer/dist/sage-4.6.prealpha3.tar)

Passed `ptestlong` on Fedora 13 x86_64 (Core2, gcc 4.4.4, native code, `O3`), parallel build with 32 jobs, test with 4 threads.

Ubuntu 9.04 x86 in progress.

Dave, a bit more happy now?



---

archive/issue_comments_079455.json:
```json
{
    "body": "<div id=\"comment:309\" align=\"right\">comment:309</div>\n\nSage 4.6.prealpha3, which includes this ticket, passed all tests (ptestlong) on a Sun UltraSPARC with Solaris 10.",
    "created_at": "2010-08-23T15:14:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79455",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:309" align="right">comment:309</div>

Sage 4.6.prealpha3, which includes this ticket, passed all tests (ptestlong) on a Sun UltraSPARC with Solaris 10.



---

archive/issue_comments_079456.json:
```json
{
    "body": "<div id=\"comment:310\" align=\"right\">comment:310</div>\n\nReplying to [@jdemeyer](#comment%3A309):\n> Sage 4.6.prealpha3, which includes this ticket, passed all tests (ptestlong) on a Sun UltraSPARC with Solaris 10.\n\n4.6.prealpha3 built fine and passed all tests (ptestlong) on 64-bit ubuntu.  Also built on 32-bit Suse, tests still running.",
    "created_at": "2010-08-23T15:28:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79456",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:310" align="right">comment:310</div>

Replying to [@jdemeyer](#comment%3A309):
> Sage 4.6.prealpha3, which includes this ticket, passed all tests (ptestlong) on a Sun UltraSPARC with Solaris 10.

4.6.prealpha3 built fine and passed all tests (ptestlong) on 64-bit ubuntu.  Also built on 32-bit Suse, tests still running.



---

archive/issue_comments_079457.json:
```json
{
    "body": "<div id=\"comment:311\" align=\"right\">comment:311</div>\n\nNow that sgae-4.5.3.alpha2 is released, I plan to make a new 4.6.prealpha4 based on that. I will do my best to port #9722. Any other tickets which should be included (which are not in sage-4.5.3.alpha2)?",
    "created_at": "2010-08-24T10:17:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79457",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:311" align="right">comment:311</div>

Now that sgae-4.5.3.alpha2 is released, I plan to make a new 4.6.prealpha4 based on that. I will do my best to port #9722. Any other tickets which should be included (which are not in sage-4.5.3.alpha2)?



---

archive/issue_comments_079458.json:
```json
{
    "body": "<div id=\"comment:312\" align=\"right\">comment:312</div>\n\nReplying to [@jdemeyer](#comment%3A311):\n> Now that sgae-4.5.3.alpha2 is released, I plan to make a new 4.6.prealpha4 based on that. I will do my best to port #9722. Any other tickets which should be included (which are not in sage-4.5.3.alpha2)?\n\nI would just keep my eye on the list of blockers for 4.5.3. There is a way of getting that list, but I don't know the link.",
    "created_at": "2010-08-24T10:41:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79458",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:312" align="right">comment:312</div>

Replying to [@jdemeyer](#comment%3A311):
> Now that sgae-4.5.3.alpha2 is released, I plan to make a new 4.6.prealpha4 based on that. I will do my best to port #9722. Any other tickets which should be included (which are not in sage-4.5.3.alpha2)?

I would just keep my eye on the list of blockers for 4.5.3. There is a way of getting that list, but I don't know the link.



---

archive/issue_comments_079459.json:
```json
{
    "body": "<div id=\"comment:313\" align=\"right\">comment:313</div>\n\nReplying to [@jdemeyer](#comment%3A311):\n> Now that sgae-4.5.3.alpha2 is released, I plan to make a new 4.6.prealpha4 based on that. I will do my best to port #9722.\n\nIf you have little patience, I'll backport the changes from #9722 to #9343, perhaps a little bit cleaner regarding the messages/graphics detection when no graphics support was requested (I'd like to keep that, i.e. not completely disabling it). In addition, we should catch illegal parameters to `--graphic=`.\n\nI don't know if you plan to make further changes to the PARI spkg.",
    "created_at": "2010-08-24T10:56:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79459",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:313" align="right">comment:313</div>

Replying to [@jdemeyer](#comment%3A311):
> Now that sgae-4.5.3.alpha2 is released, I plan to make a new 4.6.prealpha4 based on that. I will do my best to port #9722.

If you have little patience, I'll backport the changes from #9722 to #9343, perhaps a little bit cleaner regarding the messages/graphics detection when no graphics support was requested (I'd like to keep that, i.e. not completely disabling it). In addition, we should catch illegal parameters to `--graphic=`.

I don't know if you plan to make further changes to the PARI spkg.



---

archive/issue_comments_079460.json:
```json
{
    "body": "<div id=\"comment:314\" align=\"right\">comment:314</div>\n\nFrom a first glance, the graphics detection in svn-12577 is cleaner, so the changes regarding that will be, too.\n\nIt's still not robust, and needs the same fixes as PARI 2.3.5, e.g.\n* add `libstdc++` for `plotfltk`,\n* handle libraries in `.../lib64` directories,\n* make sure FLTK include directory really exists,\n* less annoying/clarified messages.\n\nI haven't yet dealt with graphics support using Qt, which can break the build, too. I.e., the detection should be improved to either give an error earlier or disable Qt in case not all required components are available.\n\nMost of the other changes (`spkg-install`) still apply. In addition, there are superfluous tests of `$?` at the end which I had not removed in 2.3.5.p4 (but added comments to remove them).",
    "created_at": "2010-08-24T11:56:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79460",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:314" align="right">comment:314</div>

From a first glance, the graphics detection in svn-12577 is cleaner, so the changes regarding that will be, too.

It's still not robust, and needs the same fixes as PARI 2.3.5, e.g.
* add `libstdc++` for `plotfltk`,
* handle libraries in `.../lib64` directories,
* make sure FLTK include directory really exists,
* less annoying/clarified messages.

I haven't yet dealt with graphics support using Qt, which can break the build, too. I.e., the detection should be improved to either give an error earlier or disable Qt in case not all required components are available.

Most of the other changes (`spkg-install`) still apply. In addition, there are superfluous tests of `$?` at the end which I had not removed in 2.3.5.p4 (but added comments to remove them).



---

archive/issue_comments_079461.json:
```json
{
    "body": "<div id=\"comment:315\" align=\"right\">comment:315</div>\n\nReplying to [@nexttime](#comment%3A308):\n> Replying to [@jdemeyer](#comment%3A303):\n> > * New distribution: [http://sage.math.washington.edu/home/jdemeyer/dist/sage-4.6.prealpha3.tar](http://sage.math.washington.edu/home/jdemeyer/dist/sage-4.6.prealpha3.tar)\n> \n> \n> Passed `ptestlong` on Fedora 13 x86_64 (Core2, gcc 4.4.4, native code, `O3`), parallel build with 32 jobs, test with 4 threads.\n> \n> Ubuntu 9.04 x86 in progress.\n\nPassed `ptestlong`, too (Pentium 4 Prescott, gcc 4.3.3, native code, `O3`), parallel build with 6 jobs, test with 2 threads.",
    "created_at": "2010-08-24T12:11:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79461",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:315" align="right">comment:315</div>

Replying to [@nexttime](#comment%3A308):
> Replying to [@jdemeyer](#comment%3A303):
> > * New distribution: [http://sage.math.washington.edu/home/jdemeyer/dist/sage-4.6.prealpha3.tar](http://sage.math.washington.edu/home/jdemeyer/dist/sage-4.6.prealpha3.tar)
> 
> 
> Passed `ptestlong` on Fedora 13 x86_64 (Core2, gcc 4.4.4, native code, `O3`), parallel build with 32 jobs, test with 4 threads.
> 
> Ubuntu 9.04 x86 in progress.

Passed `ptestlong`, too (Pentium 4 Prescott, gcc 4.3.3, native code, `O3`), parallel build with 6 jobs, test with 2 threads.



---

archive/issue_comments_079462.json:
```json
{
    "body": "<div id=\"comment:316\" align=\"right\">comment:316</div>\n\nReplying to [@nexttime](#comment%3A313):\n> If you have little patience, I'll backport the changes from #9722 to #9343, perhaps a little bit cleaner regarding the messages/graphics detection when no graphics support was requested (I'd like to keep that, i.e. not completely disabling it). In addition, we should catch illegal parameters to `--graphic=`.\n> \n> I don't know if you plan to make further changes to the PARI spkg.\n\nNo, I don't.  As far as I can tell, #9722 is the only remaining issue.\n\nIf you would like to port #9722 to #9343, go ahead and do it.  Otherwise, I can also do it (for me it's the same).",
    "created_at": "2010-08-24T19:26:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79462",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:316" align="right">comment:316</div>

Replying to [@nexttime](#comment%3A313):
> If you have little patience, I'll backport the changes from #9722 to #9343, perhaps a little bit cleaner regarding the messages/graphics detection when no graphics support was requested (I'd like to keep that, i.e. not completely disabling it). In addition, we should catch illegal parameters to `--graphic=`.
> 
> I don't know if you plan to make further changes to the PARI spkg.

No, I don't.  As far as I can tell, #9722 is the only remaining issue.

If you would like to port #9722 to #9343, go ahead and do it.  Otherwise, I can also do it (for me it's the same).



---

archive/issue_comments_079463.json:
```json
{
    "body": "<div id=\"comment:317\" align=\"right\">comment:317</div>\n\nReplying to [@jdemeyer](#comment%3A316):\n> Replying to [@nexttime](#comment%3A313):\n> > If you have little patience, I'll backport the changes from #9722 to #9343, perhaps a little bit cleaner regarding the messages/graphics detection when no graphics support was requested (I'd like to keep that, i.e. not completely disabling it). In addition, we should catch illegal parameters to `--graphic=`.\n> > \n> > I don't know if you plan to make further changes to the PARI spkg.\n> \n> No, I don't.  As far as I can tell, #9722 is the only remaining issue.\n> \n> If you would like to port #9722 to #9343, go ahead and do it.\n\nOk, I'll create a 2.4.3.svn-12577.p5, but not today, perhaps tomorrow.\n\nDid anybody test the latest on Cygwin?",
    "created_at": "2010-08-24T19:56:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79463",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:317" align="right">comment:317</div>

Replying to [@jdemeyer](#comment%3A316):
> Replying to [@nexttime](#comment%3A313):
> > If you have little patience, I'll backport the changes from #9722 to #9343, perhaps a little bit cleaner regarding the messages/graphics detection when no graphics support was requested (I'd like to keep that, i.e. not completely disabling it). In addition, we should catch illegal parameters to `--graphic=`.
> > 
> > I don't know if you plan to make further changes to the PARI spkg.
> 
> No, I don't.  As far as I can tell, #9722 is the only remaining issue.
> 
> If you would like to port #9722 to #9343, go ahead and do it.

Ok, I'll create a 2.4.3.svn-12577.p5, but not today, perhaps tomorrow.

Did anybody test the latest on Cygwin?



---

archive/issue_comments_079464.json:
```json
{
    "body": "<div id=\"comment:318\" align=\"right\">comment:318</div>\n\nReplying to [@nexttime](#comment%3A314):\n> From a first glance, the graphics detection in svn-12577 is cleaner, so the changes regarding that will be, too. \n\n> It's still not robust, and needs the same fixes as PARI 2.3.5, e.g.\n\n> [...]\n\nWould upstream be receptive to Leif's changes?",
    "created_at": "2010-08-24T21:38:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79464",
    "user": "https://github.com/qed777"
}
```

<div id="comment:318" align="right">comment:318</div>

Replying to [@nexttime](#comment%3A314):
> From a first glance, the graphics detection in svn-12577 is cleaner, so the changes regarding that will be, too. 

> It's still not robust, and needs the same fixes as PARI 2.3.5, e.g.

> [...]

Would upstream be receptive to Leif's changes?



---

archive/issue_comments_079465.json:
```json
{
    "body": "<div id=\"comment:319\" align=\"right\">comment:319</div>\n\nReplying to [@qed777](#comment%3A318):\n> Replying to [@nexttime](#comment%3A314):\n> > From a first glance, the graphics detection in svn-12577 is cleaner, so the changes regarding that will be, too. \n> \n> \n> > It's still not robust, and needs the same fixes as PARI 2.3.5, e.g.\n> \n> \n> > [...]\n> \n> \n> Would upstream be receptive to Leif's changes?\n\nI'd say we should report the changes when we've included them in our svn snapshot.",
    "created_at": "2010-08-24T21:46:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79465",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:319" align="right">comment:319</div>

Replying to [@qed777](#comment%3A318):
> Replying to [@nexttime](#comment%3A314):
> > From a first glance, the graphics detection in svn-12577 is cleaner, so the changes regarding that will be, too. 
> 
> 
> > It's still not robust, and needs the same fixes as PARI 2.3.5, e.g.
> 
> 
> > [...]
> 
> 
> Would upstream be receptive to Leif's changes?

I'd say we should report the changes when we've included them in our svn snapshot.



---

archive/issue_comments_079466.json:
```json
{
    "body": "<div id=\"comment:320\" align=\"right\">comment:320</div>\n\n4.6.prealpha3 (with `PARI_EXTRA_OPTS` *not* set) also passed `ptestlong` on 32-bit Fedora 13.\n\nOn 64-bit Ubuntu 10.04 LTS the build failed in the first place (MPIR and Tachyon); simply rerunning `make` the build succeeded, and all long tests passed.\n\nPerhaps another missing dependency that only rarely comes into play in parallel builds. (This never happened before, and 4.5.3.alpha2 built fine with the same settings). I'll have to inspect that further.\n\nI though get three new Sphinx warnings:\n\n```\ndocstring of sage.libs.pari.gen:136: (WARNING/2) Literal block expected; none found.\ndocstring of sage.libs.pari.gen.gen.nfbasis:8: (WARNING/2) Definition list ends without a blank line; unexpected unindent.\ndocstring of sage.libs.pari.gen.gen.nfinit:19: (WARNING/2) Literal block expected; none found.\nbuild succeeded, 3 warnings.\n```",
    "created_at": "2010-08-26T09:46:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79466",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:320" align="right">comment:320</div>

4.6.prealpha3 (with `PARI_EXTRA_OPTS` *not* set) also passed `ptestlong` on 32-bit Fedora 13.

On 64-bit Ubuntu 10.04 LTS the build failed in the first place (MPIR and Tachyon); simply rerunning `make` the build succeeded, and all long tests passed.

Perhaps another missing dependency that only rarely comes into play in parallel builds. (This never happened before, and 4.5.3.alpha2 built fine with the same settings). I'll have to inspect that further.

I though get three new Sphinx warnings:

```
docstring of sage.libs.pari.gen:136: (WARNING/2) Literal block expected; none found.
docstring of sage.libs.pari.gen.gen.nfbasis:8: (WARNING/2) Definition list ends without a blank line; unexpected unindent.
docstring of sage.libs.pari.gen.gen.nfinit:19: (WARNING/2) Literal block expected; none found.
build succeeded, 3 warnings.
```



---

archive/issue_comments_079467.json:
```json
{
    "body": "<div id=\"comment:321\" align=\"right\">comment:321</div>\n\nReplying to [@nexttime](#comment%3A320):\n> I though get three new Sphinx warnings:\n> \n> ```\n> docstring of sage.libs.pari.gen:136: (WARNING/2) Literal block expected; none found.\n> docstring of sage.libs.pari.gen.gen.nfbasis:8: (WARNING/2) Definition list ends without a blank line; unexpected unindent.\n> docstring of sage.libs.pari.gen.gen.nfinit:19: (WARNING/2) Literal block expected; none found.\n> build succeeded, 3 warnings.\n> ```\n\nThose are probably my fault.  Can you tell me *how* you get those warnings, i.e. what is the command that I should type to see those warnings?",
    "created_at": "2010-08-26T09:56:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79467",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:321" align="right">comment:321</div>

Replying to [@nexttime](#comment%3A320):
> I though get three new Sphinx warnings:
> 
> ```
> docstring of sage.libs.pari.gen:136: (WARNING/2) Literal block expected; none found.
> docstring of sage.libs.pari.gen.gen.nfbasis:8: (WARNING/2) Definition list ends without a blank line; unexpected unindent.
> docstring of sage.libs.pari.gen.gen.nfinit:19: (WARNING/2) Literal block expected; none found.
> build succeeded, 3 warnings.
> ```

Those are probably my fault.  Can you tell me *how* you get those warnings, i.e. what is the command that I should type to see those warnings?



---

archive/issue_comments_079468.json:
```json
{
    "body": "<div id=\"comment:322\" align=\"right\">comment:322</div>\n\nReplying to [@jdemeyer](#comment%3A321):\n> Replying to [@nexttime](#comment%3A320):\n> > I though get three new Sphinx warnings:\n> > \n> > ```\n> > docstring of sage.libs.pari.gen:136: (WARNING/2) Literal block expected; none found.\n> > docstring of sage.libs.pari.gen.gen.nfbasis:8: (WARNING/2) Definition list ends without a blank line; unexpected unindent.\n> > docstring of sage.libs.pari.gen.gen.nfinit:19: (WARNING/2) Literal block expected; none found.\n> > build succeeded, 3 warnings.\n> > ```\n> \n> Those are probably my fault.  Can you tell me *how* you get those warnings, i.e. what is the command that I should type to see those warnings?\n\nTry sage -docbuild reference html.  Or look in the build log?  I think that \"make\" does not build the docs (I may be wrong on that) but \"make testlong\" does, so it might be in the test log.  Anyway, if you touch the offending files and do docbuild reference html it will presumable process them again.",
    "created_at": "2010-08-26T11:24:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79468",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:322" align="right">comment:322</div>

Replying to [@jdemeyer](#comment%3A321):
> Replying to [@nexttime](#comment%3A320):
> > I though get three new Sphinx warnings:
> > 
> > ```
> > docstring of sage.libs.pari.gen:136: (WARNING/2) Literal block expected; none found.
> > docstring of sage.libs.pari.gen.gen.nfbasis:8: (WARNING/2) Definition list ends without a blank line; unexpected unindent.
> > docstring of sage.libs.pari.gen.gen.nfinit:19: (WARNING/2) Literal block expected; none found.
> > build succeeded, 3 warnings.
> > ```
> 
> Those are probably my fault.  Can you tell me *how* you get those warnings, i.e. what is the command that I should type to see those warnings?

Try sage -docbuild reference html.  Or look in the build log?  I think that "make" does not build the docs (I may be wrong on that) but "make testlong" does, so it might be in the test log.  Anyway, if you touch the offending files and do docbuild reference html it will presumable process them again.



---

archive/issue_comments_079469.json:
```json
{
    "body": "<div id=\"comment:323\" align=\"right\">comment:323</div>\n\nReplying to [@JohnCremona](#comment%3A322):\n> Replying to [@jdemeyer](#comment%3A321):\n> > Can you tell me *how* you get those warnings, i.e. what is the command that I should type to see those warnings?\n> \n> \n> Try sage -docbuild reference html.  Or look in the build log?  I think that \"make\" does not build the docs (I may be wrong on that) but \"make testlong\" does, so it might be in the test log.  Anyway, if you touch the offending files and do docbuild reference html it will presumable process them again.\n\nYes, they usually drown in the flood of Sphinx messages. (And even worse, Sphinx **errors**, too.)\n\nI normally do e.g. `grep -i warn dochtml.log`; grepping for \"error\" gives also lines with *filenames* containing it... ;-)\n\nIn case you've deleted the log, you have to touch the sources before doing `make doc`, e.g. by `./sage -ba-force`, but that would cause a rebuild of *all* Cython files, and Sphinx would rebuild the whole reference manual from scratch. So better just touch the files mentioned in the warning messages, and do `./sage -b`, then `make doc`, and carefully watch what rushes down the screen... ;-)",
    "created_at": "2010-08-26T12:33:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79469",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:323" align="right">comment:323</div>

Replying to [@JohnCremona](#comment%3A322):
> Replying to [@jdemeyer](#comment%3A321):
> > Can you tell me *how* you get those warnings, i.e. what is the command that I should type to see those warnings?
> 
> 
> Try sage -docbuild reference html.  Or look in the build log?  I think that "make" does not build the docs (I may be wrong on that) but "make testlong" does, so it might be in the test log.  Anyway, if you touch the offending files and do docbuild reference html it will presumable process them again.

Yes, they usually drown in the flood of Sphinx messages. (And even worse, Sphinx **errors**, too.)

I normally do e.g. `grep -i warn dochtml.log`; grepping for "error" gives also lines with *filenames* containing it... ;-)

In case you've deleted the log, you have to touch the sources before doing `make doc`, e.g. by `./sage -ba-force`, but that would cause a rebuild of *all* Cython files, and Sphinx would rebuild the whole reference manual from scratch. So better just touch the files mentioned in the warning messages, and do `./sage -b`, then `make doc`, and carefully watch what rushes down the screen... ;-)



---

archive/issue_comments_079470.json:
```json
{
    "body": "<div id=\"comment:324\" align=\"right\">comment:324</div>\n\nReplying to [@nexttime](#comment%3A320):\n> On 64-bit Ubuntu 10.04 LTS the build failed in the first place (MPIR and Tachyon); simply rerunning `make` the build succeeded, and all long tests passed.\n> \n> Perhaps another missing dependency that only rarely comes into play in parallel builds. (This never happened before, and 4.5.3.alpha2 built fine with the same settings). I'll have to inspect that further.\n\nWell, installing Tachyon actually did *not* fail; I hadn't looked at the whole log.\n\nIt first tries a 32-bit build (prepending `-m32` to `CFLAGS`), which indeed fails with a `make` error. But this is catched by some Tachyon script I think, followed by an attempt to do a 64-bit build, which then succeeds. Quite odd, though the whole process of installing the Tachyon spkg takes less than four seconds for me (on that machine)...\n\nThe MPIR failure seems to be due to a race condition:\n\n```\n...\nmake[4]: Entering directory `/home/leif/Sage/sage-4.6.prealpha3/spkg/build/mpir-1.2.2.p1/src'\nmake[4]: warning: -jN forced in submake: disabling jobserver mode.\nmake[5]: Entering directory `/home/leif/Sage/sage-4.6.prealpha3/spkg/build/mpir-1.2.2.p1/src'\nmake[5]: warning: -jN forced in submake: disabling jobserver mode.\ntest -z \"/home/leif/Sage/sage-4.6.prealpha3/local/lib\" || mkdir -p -- \"/home/leif/Sage/sage-4.6.prealpha3/local/lib\"\ntest -z \"/home/leif/Sage/sage-4.6.prealpha3/local/include\" || mkdir -p -- \"/home/leif/Sage/sage-4.6.prealpha3/local/include\"\ntest -z \"/home/leif/Sage/sage-4.6.prealpha3/local/include\" || mkdir -p -- \"/home/leif/Sage/sage-4.6.prealpha3/local/include\"\n /bin/bash ./libtool --mode=install /usr/bin/install -c  'libmpir.la' '/home/leif/Sage/sage-4.6.prealpha3/local/lib/libmpir.la'\n /usr/bin/install -c -m 644 'mpirxx.h' '/home/leif/Sage/sage-4.6.prealpha3/local/include/mpirxx.h'\n /usr/bin/install -c -m 644 'mpir.h' '/home/leif/Sage/sage-4.6.prealpha3/local/include/mpir.h'\nmake -j32  install-data-hook\nmake[6]: Entering directory `/home/leif/Sage/sage-4.6.prealpha3/spkg/build/mpir-1.2.2.p1/src'\nmake[6]: warning: -jN forced in submake: disabling jobserver mode.\n(cd /home/leif/Sage/sage-4.6.prealpha3/local/include  && rm -f gmp.h   && cp mpir.h   gmp.h)\ncp: cannot stat `mpir.h': No such file or directory\nmake[6]: *** [install-data-hook] Error 1\nmake[6]: Leaving directory `/home/leif/Sage/sage-4.6.prealpha3/spkg/build/mpir-1.2.2.p1/src'\nmake[5]: *** [install-data-am] Error 2\nmake[5]: *** Waiting for unfinished jobs....\n...\n```\nI haven't looked at MPIR's Makefile(s); perhaps some dependency is missing there.",
    "created_at": "2010-08-26T13:57:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79470",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:324" align="right">comment:324</div>

Replying to [@nexttime](#comment%3A320):
> On 64-bit Ubuntu 10.04 LTS the build failed in the first place (MPIR and Tachyon); simply rerunning `make` the build succeeded, and all long tests passed.
> 
> Perhaps another missing dependency that only rarely comes into play in parallel builds. (This never happened before, and 4.5.3.alpha2 built fine with the same settings). I'll have to inspect that further.

Well, installing Tachyon actually did *not* fail; I hadn't looked at the whole log.

It first tries a 32-bit build (prepending `-m32` to `CFLAGS`), which indeed fails with a `make` error. But this is catched by some Tachyon script I think, followed by an attempt to do a 64-bit build, which then succeeds. Quite odd, though the whole process of installing the Tachyon spkg takes less than four seconds for me (on that machine)...

The MPIR failure seems to be due to a race condition:

```
...
make[4]: Entering directory `/home/leif/Sage/sage-4.6.prealpha3/spkg/build/mpir-1.2.2.p1/src'
make[4]: warning: -jN forced in submake: disabling jobserver mode.
make[5]: Entering directory `/home/leif/Sage/sage-4.6.prealpha3/spkg/build/mpir-1.2.2.p1/src'
make[5]: warning: -jN forced in submake: disabling jobserver mode.
test -z "/home/leif/Sage/sage-4.6.prealpha3/local/lib" || mkdir -p -- "/home/leif/Sage/sage-4.6.prealpha3/local/lib"
test -z "/home/leif/Sage/sage-4.6.prealpha3/local/include" || mkdir -p -- "/home/leif/Sage/sage-4.6.prealpha3/local/include"
test -z "/home/leif/Sage/sage-4.6.prealpha3/local/include" || mkdir -p -- "/home/leif/Sage/sage-4.6.prealpha3/local/include"
 /bin/bash ./libtool --mode=install /usr/bin/install -c  'libmpir.la' '/home/leif/Sage/sage-4.6.prealpha3/local/lib/libmpir.la'
 /usr/bin/install -c -m 644 'mpirxx.h' '/home/leif/Sage/sage-4.6.prealpha3/local/include/mpirxx.h'
 /usr/bin/install -c -m 644 'mpir.h' '/home/leif/Sage/sage-4.6.prealpha3/local/include/mpir.h'
make -j32  install-data-hook
make[6]: Entering directory `/home/leif/Sage/sage-4.6.prealpha3/spkg/build/mpir-1.2.2.p1/src'
make[6]: warning: -jN forced in submake: disabling jobserver mode.
(cd /home/leif/Sage/sage-4.6.prealpha3/local/include  && rm -f gmp.h   && cp mpir.h   gmp.h)
cp: cannot stat `mpir.h': No such file or directory
make[6]: *** [install-data-hook] Error 1
make[6]: Leaving directory `/home/leif/Sage/sage-4.6.prealpha3/spkg/build/mpir-1.2.2.p1/src'
make[5]: *** [install-data-am] Error 2
make[5]: *** Waiting for unfinished jobs....
...
```
I haven't looked at MPIR's Makefile(s); perhaps some dependency is missing there.



---

archive/issue_comments_079471.json:
```json
{
    "body": "<div id=\"comment:325\" align=\"right\">comment:325</div>\n\nReplying to [@nexttime](#comment%3A324):\n> Well, installing Tachyon actually did *not* fail; I hadn't looked at the whole log.\n> \n> It first tries a 32-bit build (prepending `-m32` to `CFLAGS`), which indeed fails with a `make` error. But this is catched by some Tachyon script I think, followed by an attempt to do a 64-bit build, which then succeeds. Quite odd, though the whole process of installing the Tachyon spkg takes less than four seconds for me (on that machine)...\n\nJust for the record: This is actually a completely weird **Sage \"feature\"** (on Linux), i.e. `spkg-install` does this. I think I'll open a ticket for that, since Sage's beta(!) version of Tachyon is also out of date since at least 19 month and the spkg really needs work...\n\nSorry for this rather off-topic comment.",
    "created_at": "2010-08-26T18:51:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79471",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:325" align="right">comment:325</div>

Replying to [@nexttime](#comment%3A324):
> Well, installing Tachyon actually did *not* fail; I hadn't looked at the whole log.
> 
> It first tries a 32-bit build (prepending `-m32` to `CFLAGS`), which indeed fails with a `make` error. But this is catched by some Tachyon script I think, followed by an attempt to do a 64-bit build, which then succeeds. Quite odd, though the whole process of installing the Tachyon spkg takes less than four seconds for me (on that machine)...

Just for the record: This is actually a completely weird **Sage "feature"** (on Linux), i.e. `spkg-install` does this. I think I'll open a ticket for that, since Sage's beta(!) version of Tachyon is also out of date since at least 19 month and the spkg really needs work...

Sorry for this rather off-topic comment.



---

archive/issue_comments_079472.json:
```json
{
    "body": "<div id=\"comment:326\" align=\"right\">comment:326</div>\n\nReplying to [@nexttime](#comment%3A325):\n> Replying to [@nexttime](#comment%3A324):\n> > Well, installing Tachyon actually did *not* fail; I hadn't looked at the whole log.\n> > \n> > It first tries a 32-bit build (prepending `-m32` to `CFLAGS`), which indeed fails with a `make` error. But this is catched by some Tachyon script I think, followed by an attempt to do a 64-bit build, which then succeeds. Quite odd, though the whole process of installing the Tachyon spkg takes less than four seconds for me (on that machine)...\n> \n> \n> Just for the record: This is actually a completely weird **Sage \"feature\"** (on Linux), i.e. `spkg-install` does this. I think I'll open a ticket for that, since Sage's beta(!) version of Tachyon is also out of date since at least 19 month and the spkg really needs work...\n> \n> Sorry for this rather off-topic comment.\n\nLeif, \n\nyou should open a ticket for this Tachyon problem. Put what info you have and *cc* me. I'd like to know of anything that adds `-m32` as that sort of thing could screw up on any system, but particularly might screw up on systems were we add `-m64` as we do on 64-bit Solaris builds. As you say, it's well off topic for this ticket, which is already very very long. \n\nDave",
    "created_at": "2010-08-26T20:16:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79472",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:326" align="right">comment:326</div>

Replying to [@nexttime](#comment%3A325):
> Replying to [@nexttime](#comment%3A324):
> > Well, installing Tachyon actually did *not* fail; I hadn't looked at the whole log.
> > 
> > It first tries a 32-bit build (prepending `-m32` to `CFLAGS`), which indeed fails with a `make` error. But this is catched by some Tachyon script I think, followed by an attempt to do a 64-bit build, which then succeeds. Quite odd, though the whole process of installing the Tachyon spkg takes less than four seconds for me (on that machine)...
> 
> 
> Just for the record: This is actually a completely weird **Sage "feature"** (on Linux), i.e. `spkg-install` does this. I think I'll open a ticket for that, since Sage's beta(!) version of Tachyon is also out of date since at least 19 month and the spkg really needs work...
> 
> Sorry for this rather off-topic comment.

Leif, 

you should open a ticket for this Tachyon problem. Put what info you have and *cc* me. I'd like to know of anything that adds `-m32` as that sort of thing could screw up on any system, but particularly might screw up on systems were we add `-m64` as we do on 64-bit Solaris builds. As you say, it's well off topic for this ticket, which is already very very long. 

Dave



---

archive/issue_comments_079473.json:
```json
{
    "body": "<div id=\"comment:327\" align=\"right\">comment:327</div>\n\nShould we open a new ticket for issues with MPIR 2.1.1 (#8664) and ECM 6.3 (#5847)?\n\n(Both currently need review, work for me with 4.5.3.alpha2, but not fully with 4.6.prealpha3 [segfault in `sage/schemes/elliptic_curves/ell_point.py`].)",
    "created_at": "2010-08-27T14:06:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79473",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:327" align="right">comment:327</div>

Should we open a new ticket for issues with MPIR 2.1.1 (#8664) and ECM 6.3 (#5847)?

(Both currently need review, work for me with 4.5.3.alpha2, but not fully with 4.6.prealpha3 [segfault in `sage/schemes/elliptic_curves/ell_point.py`].)



---

archive/issue_comments_079474.json:
```json
{
    "body": "<div id=\"comment:328\" align=\"right\">comment:328</div>\n\nReplying to [@nexttime](#comment%3A327):\n> Should we open a new ticket for issues with MPIR 2.1.1 (#8664) and ECM 6.3 (#5847)?\n> \n> (Both currently need review, work for me with 4.5.3.alpha2, but not fully with 4.6.prealpha3 [segfault in `sage/schemes/elliptic_curves/ell_point.py`].)\n\nAny idea which patch from 4.6.prealpha3 could cause this?  I don't think MPIR or ECM depends on PARI/GP.",
    "created_at": "2010-08-27T15:37:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79474",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:328" align="right">comment:328</div>

Replying to [@nexttime](#comment%3A327):
> Should we open a new ticket for issues with MPIR 2.1.1 (#8664) and ECM 6.3 (#5847)?
> 
> (Both currently need review, work for me with 4.5.3.alpha2, but not fully with 4.6.prealpha3 [segfault in `sage/schemes/elliptic_curves/ell_point.py`].)

Any idea which patch from 4.6.prealpha3 could cause this?  I don't think MPIR or ECM depends on PARI/GP.



---

archive/issue_comments_079475.json:
```json
{
    "body": "<div id=\"comment:329\" align=\"right\">comment:329</div>\n\nReplying to [@jdemeyer](#comment%3A328):\n> Replying to [@nexttime](#comment%3A327):\n> > Should we open a new ticket for issues with MPIR 2.1.1 (#8664) and ECM 6.3 (#5847)?\n> > \n> > (Both currently need review, work for me with 4.5.3.alpha2, but not fully with 4.6.prealpha3 [segfault in `sage/schemes/elliptic_curves/ell_point.py`].)\n> \n> \n> Any idea which patch from 4.6.prealpha3 could cause this? \n\nNope. I'm not competent to track this down. But since the file containing the failing example also has a 9343-patched doctest (different *result* only), the code obviously (indirectly) uses PARI.\n\n> I don't think MPIR or ECM depends on PARI/GP.\n\nNo, but the code depends on them.\n\nI guess John C. will know. I just wonder *where* we should address such issues; #8664 (with #5847 mandatory) is likely to go into the 4.6 series. (Though perhaps not 4.6.0, I'm not the release manager.)",
    "created_at": "2010-08-27T16:17:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79475",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:329" align="right">comment:329</div>

Replying to [@jdemeyer](#comment%3A328):
> Replying to [@nexttime](#comment%3A327):
> > Should we open a new ticket for issues with MPIR 2.1.1 (#8664) and ECM 6.3 (#5847)?
> > 
> > (Both currently need review, work for me with 4.5.3.alpha2, but not fully with 4.6.prealpha3 [segfault in `sage/schemes/elliptic_curves/ell_point.py`].)
> 
> 
> Any idea which patch from 4.6.prealpha3 could cause this? 

Nope. I'm not competent to track this down. But since the file containing the failing example also has a 9343-patched doctest (different *result* only), the code obviously (indirectly) uses PARI.

> I don't think MPIR or ECM depends on PARI/GP.

No, but the code depends on them.

I guess John C. will know. I just wonder *where* we should address such issues; #8664 (with #5847 mandatory) is likely to go into the 4.6 series. (Though perhaps not 4.6.0, I'm not the release manager.)



---

archive/issue_comments_079476.json:
```json
{
    "body": "<div id=\"comment:330\" align=\"right\">comment:330</div>\n\nP.S.: Perhaps \"just\" some rare incompatibility of PARI to the new GMP/MPIR.",
    "created_at": "2010-08-27T16:28:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79476",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:330" align="right">comment:330</div>

P.S.: Perhaps "just" some rare incompatibility of PARI to the new GMP/MPIR.



---

archive/issue_comments_079477.json:
```json
{
    "body": "<div id=\"comment:331\" align=\"right\">comment:331</div>\n\nReplying to [@nexttime](#comment%3A329):\n> Replying to [@jdemeyer](#comment%3A328):\n> > Replying to [@nexttime](#comment%3A327):\n> > > Should we open a new ticket for issues with MPIR 2.1.1 (#8664) and ECM 6.3 (#5847)?\n> > > \n> > > (Both currently need review, work for me with 4.5.3.alpha2, but not fully with 4.6.prealpha3 [segfault in `sage/schemes/elliptic_curves/ell_point.py`].)\n> > \n> > \n> > Any idea which patch from 4.6.prealpha3 could cause this? \n> \n> \n> Nope. I'm not competent to track this down. But since the file containing the failing example also has a 9343-patched doctest (different *result* only), the code obviously (indirectly) uses PARI.\n> \n> > I don't think MPIR or ECM depends on PARI/GP.\n> \n> \n> No, but the code depends on them.\n> \n> I guess John C. will know. I just wonder *where* we should address such issues; #8664 (with #5847 mandatory) is likely to go into the 4.6 series. (Though perhaps not 4.6.0, I'm not the release manager.)\n\nWhat exactly might I know?",
    "created_at": "2010-08-27T16:34:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79477",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:331" align="right">comment:331</div>

Replying to [@nexttime](#comment%3A329):
> Replying to [@jdemeyer](#comment%3A328):
> > Replying to [@nexttime](#comment%3A327):
> > > Should we open a new ticket for issues with MPIR 2.1.1 (#8664) and ECM 6.3 (#5847)?
> > > 
> > > (Both currently need review, work for me with 4.5.3.alpha2, but not fully with 4.6.prealpha3 [segfault in `sage/schemes/elliptic_curves/ell_point.py`].)
> > 
> > 
> > Any idea which patch from 4.6.prealpha3 could cause this? 
> 
> 
> Nope. I'm not competent to track this down. But since the file containing the failing example also has a 9343-patched doctest (different *result* only), the code obviously (indirectly) uses PARI.
> 
> > I don't think MPIR or ECM depends on PARI/GP.
> 
> 
> No, but the code depends on them.
> 
> I guess John C. will know. I just wonder *where* we should address such issues; #8664 (with #5847 mandatory) is likely to go into the 4.6 series. (Though perhaps not 4.6.0, I'm not the release manager.)

What exactly might I know?



---

archive/issue_comments_079478.json:
```json
{
    "body": "<div id=\"comment:332\" align=\"right\">comment:332</div>\n\nReplying to [@nexttime](#comment%3A330):\n> P.S.: Perhaps \"just\" some rare incompatibility of PARI to the new GMP/MPIR.\n\nAt least PARI 2.4.3.svn-12577.p4 passes its test suite with MPIR 2.1.1.",
    "created_at": "2010-08-27T16:46:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79478",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:332" align="right">comment:332</div>

Replying to [@nexttime](#comment%3A330):
> P.S.: Perhaps "just" some rare incompatibility of PARI to the new GMP/MPIR.

At least PARI 2.4.3.svn-12577.p4 passes its test suite with MPIR 2.1.1.



---

archive/issue_comments_079479.json:
```json
{
    "body": "<div id=\"comment:333\" align=\"right\">comment:333</div>\n\nReplying to [@JohnCremona](#comment%3A331):\n> What exactly might I know?\n\nSorry, John, I have not even posted the failing doctest, because I'm not sure if we should discuss it on *this* already large ticket... (and also hesitated to open a ticket \"not-yet-positively-reviewed fails on/with not-yet-released 4.6.prealpha3\")\n\nBut you're one of the authors of `sage/schemes/elliptic_curves/ell_point.py`.",
    "created_at": "2010-08-27T16:56:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79479",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:333" align="right">comment:333</div>

Replying to [@JohnCremona](#comment%3A331):
> What exactly might I know?

Sorry, John, I have not even posted the failing doctest, because I'm not sure if we should discuss it on *this* already large ticket... (and also hesitated to open a ticket "not-yet-positively-reviewed fails on/with not-yet-released 4.6.prealpha3")

But you're one of the authors of `sage/schemes/elliptic_curves/ell_point.py`.



---

archive/issue_comments_079480.json:
```json
{
    "body": "<div id=\"comment:334\" align=\"right\">comment:334</div>\n\nReplying to [@nexttime](#comment%3A333):\n> Replying to [@JohnCremona](#comment%3A331):\n> > What exactly might I know?\n> \n> \n> Sorry, John, I have not even posted the failing doctest, because I'm not sure if we should discuss it on *this* already large ticket...\n\nI think my guess (that you would know the code) was right. :-)\n\nIt's exactly the two **long** doctests you added at #8319 (as part of a regression doctest) that individually both segfault with MPIR 2.1.1 and ECM 6.3, in `EllipticCurvePoint_number_field.height()`. Tagging these two doctests `# not tested`, `ptestlong` passes all tests on 64-bit Ubuntu 10.04; still waiting for the results on another, 32-bit Fedora 13 machine.",
    "created_at": "2010-08-27T19:39:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79480",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:334" align="right">comment:334</div>

Replying to [@nexttime](#comment%3A333):
> Replying to [@JohnCremona](#comment%3A331):
> > What exactly might I know?
> 
> 
> Sorry, John, I have not even posted the failing doctest, because I'm not sure if we should discuss it on *this* already large ticket...

I think my guess (that you would know the code) was right. :-)

It's exactly the two **long** doctests you added at #8319 (as part of a regression doctest) that individually both segfault with MPIR 2.1.1 and ECM 6.3, in `EllipticCurvePoint_number_field.height()`. Tagging these two doctests `# not tested`, `ptestlong` passes all tests on 64-bit Ubuntu 10.04; still waiting for the results on another, 32-bit Fedora 13 machine.



---

archive/issue_comments_079481.json:
```json
{
    "body": "<div id=\"comment:335\" align=\"right\">comment:335</div>\n\nReplying to [@nexttime](#comment%3A334):\n> It's exactly the two **long** doctests you added at #8319 (as part of a regression doctest) that individually both segfault with MPIR 2.1.1 and ECM 6.3 [...]\n\n... and of course **only** in combination with the **new** PARI, i.e. all tests pass with 4.5.3.alpha2 and MPIR 2.1.1 and ECM 6.3.",
    "created_at": "2010-08-27T19:50:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79481",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:335" align="right">comment:335</div>

Replying to [@nexttime](#comment%3A334):
> It's exactly the two **long** doctests you added at #8319 (as part of a regression doctest) that individually both segfault with MPIR 2.1.1 and ECM 6.3 [...]

... and of course **only** in combination with the **new** PARI, i.e. all tests pass with 4.5.3.alpha2 and MPIR 2.1.1 and ECM 6.3.



---

archive/issue_comments_079482.json:
```json
{
    "body": "<div id=\"comment:336\" align=\"right\">comment:336</div>\n\nReplying to [@nexttime](#comment%3A335):\n> Replying to [@nexttime](#comment%3A334):\n> > It's exactly the two **long** doctests you added at #8319 (as part of a regression doctest) that individually both segfault with MPIR 2.1.1 and ECM 6.3 [...]\n> \n> \n> ... and of course **only** in combination with the **new** PARI, i.e. all tests pass with 4.5.3.alpha2 and MPIR 2.1.1 and ECM 6.3.\n>  \n\nOK, here's one way of testing this (perhaps).  I made an input file for gp which computes that same example:  http://www.warwick.ac.uk/staff/J.E.Cremona/pari-test.gp\n\nTo test this save the file and run it using `sage -gp pari-test.gp`.  If nothing goes wrong it should output some stuff ending with \n\n```\n%11 = 2.386623822 E-29\n```",
    "created_at": "2010-08-27T20:30:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79482",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:336" align="right">comment:336</div>

Replying to [@nexttime](#comment%3A335):
> Replying to [@nexttime](#comment%3A334):
> > It's exactly the two **long** doctests you added at #8319 (as part of a regression doctest) that individually both segfault with MPIR 2.1.1 and ECM 6.3 [...]
> 
> 
> ... and of course **only** in combination with the **new** PARI, i.e. all tests pass with 4.5.3.alpha2 and MPIR 2.1.1 and ECM 6.3.
>  

OK, here's one way of testing this (perhaps).  I made an input file for gp which computes that same example:  http://www.warwick.ac.uk/staff/J.E.Cremona/pari-test.gp

To test this save the file and run it using `sage -gp pari-test.gp`.  If nothing goes wrong it should output some stuff ending with 

```
%11 = 2.386623822 E-29
```



---

archive/issue_comments_079483.json:
```json
{
    "body": "<div id=\"comment:337\" align=\"right\">comment:337</div>\n\nReplying to [@JohnCremona](#comment%3A336):\n> To test this save the file and run it using `sage -gp pari-test.gp`.  If nothing goes wrong it should output some stuff ending with \n\n\n```\n%11 = 2.386623822 E-29\n```\n\n```\nleif@quadriga:~/Sage/sage-4.6.prealpha3-with-mpir-2.1.1$ ./sage -gp\n                      GP/PARI CALCULATOR Version 2.4.3 (development svn-12577)\n                    amd64 running linux (x86-64/GMP-5.0.1 kernel) 64-bit version\n                     compiled: Aug 27 2010, gcc-4.4.3 (Ubuntu 4.4.3-4ubuntu5) \n                           (readline v6.0 enabled, extended help enabled)\n\n                               Copyright (C) 2000-2008 The PARI Group\n\nPARI/GP is free software, covered by the GNU General Public License, and comes WITHOUT ANY WARRANTY \nWHATSOEVER.\n\nType ? for help, \\q to quit.\nType ?12 for how to get moral (and possibly technical) support.\n\nparisize = 8000000, primelimit = 500509\n? read(\"pari-test-cremona.gp\")\n%1 = -8.968227546699448805 E-38\n? quit\nGoodbye!\n```\nI'm not that sure I made it right, but except for the number following \"%\", the output looks ok to me.\n\nThe segfaults when doctesting happen in `libgmp.so`, `mpn_submul_1()`, which is (indirectly) called by `__gmpn_divexact()` (gdb stack), but the origin/cause seems to be `sage/libs/pari/gen.pyx`, `gen.__setitem__()`, or its caller `EllipticCurvePoint_field.__getitem__()`... I don't recall when I last used debuggers... ;-)\n\nThe last output from running the doctest example (copied to a `.sage` file, activating `pdb` right before `Q.height()`) in gdb is:\n\n```\n> /home/leif/Sage/sage-4.6.prealpha3-with-mpir-2.1.1/local/lib/python2.6/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py(657)pari_curve()->[0, 0, 0...854 E-19]\n-> return self._pari_curve[L[-1]]\n(Pdb) \n--Call--\n> /home/leif/Sage/sage-4.6.prealpha3-with-mpir-2.1.1/local/lib/python2.6/site-packages/sage/schemes/elliptic_curves/ell_point.py(334)__getitem__()\n-> def __getitem__(self, n):\n(Pdb) \n> /home/leif/Sage/sage-4.6.prealpha3-with-mpir-2.1.1/local/lib/python2.6/site-packages/sage/schemes/elliptic_curves/ell_point.py(345)__getitem__()\n-> return self._coords[n]\n(Pdb) \n--Return--\n> /home/leif/Sage/sage-4.6.prealpha3-with-mpir-2.1.1/local/lib/python2.6/site-packages/sage/schemes/elliptic_curves/ell_point.py(345)__getitem__()->21043516...115795849\n-> return self._coords[n]\n(Pdb) \n--Call--\n> /home/leif/Sage/sage-4.6.prealpha3-with-mpir-2.1.1/local/lib/python2.6/site-packages/sage/schemes/elliptic_curves/ell_point.py(334)__getitem__()\n-> def __getitem__(self, n):\n(Pdb) \n> /home/leif/Sage/sage-4.6.prealpha3-with-mpir-2.1.1/local/lib/python2.6/site-packages/sage/schemes/elliptic_curves/ell_point.py(345)__getitem__()\n-> return self._coords[n]\n(Pdb) \n--Return--\n> /home/leif/Sage/sage-4.6.prealpha3-with-mpir-2.1.1/local/lib/python2.6/site-packages/sage/schemes/elliptic_curves/ell_point.py(345)__getitem__()->30508178...767198757\n-> return self._coords[n]\n(Pdb) \n\nProgram received signal SIGSEGV, Segmentation fault.\n0x00007ffff29c08fd in mpn_submul_1 ()\n   from /home/leif/Sage/sage-4.6.prealpha3-with-mpir-2.1.1/local/lib/libgmp.so.8\n(gdb) c\nContinuing.\n\nProgram received signal SIGSEGV, Segmentation fault.\n0x00007fffeca17fee in __pyx_pf_4sage_4libs_4pari_3gen_3gen___setitem__ (\n    __pyx_v_self=<value optimized out>, __pyx_v_n=<value optimized out>, \n    __pyx_v_y=<value optimized out>) at sage/libs/pari/gen.c:7018\n7018\t}\n(gdb) \n```",
    "created_at": "2010-08-27T22:52:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79483",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:337" align="right">comment:337</div>

Replying to [@JohnCremona](#comment%3A336):
> To test this save the file and run it using `sage -gp pari-test.gp`.  If nothing goes wrong it should output some stuff ending with 


```
%11 = 2.386623822 E-29
```

```
leif@quadriga:~/Sage/sage-4.6.prealpha3-with-mpir-2.1.1$ ./sage -gp
                      GP/PARI CALCULATOR Version 2.4.3 (development svn-12577)
                    amd64 running linux (x86-64/GMP-5.0.1 kernel) 64-bit version
                     compiled: Aug 27 2010, gcc-4.4.3 (Ubuntu 4.4.3-4ubuntu5) 
                           (readline v6.0 enabled, extended help enabled)

                               Copyright (C) 2000-2008 The PARI Group

PARI/GP is free software, covered by the GNU General Public License, and comes WITHOUT ANY WARRANTY 
WHATSOEVER.

Type ? for help, \q to quit.
Type ?12 for how to get moral (and possibly technical) support.

parisize = 8000000, primelimit = 500509
? read("pari-test-cremona.gp")
%1 = -8.968227546699448805 E-38
? quit
Goodbye!
```
I'm not that sure I made it right, but except for the number following "%", the output looks ok to me.

The segfaults when doctesting happen in `libgmp.so`, `mpn_submul_1()`, which is (indirectly) called by `__gmpn_divexact()` (gdb stack), but the origin/cause seems to be `sage/libs/pari/gen.pyx`, `gen.__setitem__()`, or its caller `EllipticCurvePoint_field.__getitem__()`... I don't recall when I last used debuggers... ;-)

The last output from running the doctest example (copied to a `.sage` file, activating `pdb` right before `Q.height()`) in gdb is:

```
> /home/leif/Sage/sage-4.6.prealpha3-with-mpir-2.1.1/local/lib/python2.6/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py(657)pari_curve()->[0, 0, 0...854 E-19]
-> return self._pari_curve[L[-1]]
(Pdb) 
--Call--
> /home/leif/Sage/sage-4.6.prealpha3-with-mpir-2.1.1/local/lib/python2.6/site-packages/sage/schemes/elliptic_curves/ell_point.py(334)__getitem__()
-> def __getitem__(self, n):
(Pdb) 
> /home/leif/Sage/sage-4.6.prealpha3-with-mpir-2.1.1/local/lib/python2.6/site-packages/sage/schemes/elliptic_curves/ell_point.py(345)__getitem__()
-> return self._coords[n]
(Pdb) 
--Return--
> /home/leif/Sage/sage-4.6.prealpha3-with-mpir-2.1.1/local/lib/python2.6/site-packages/sage/schemes/elliptic_curves/ell_point.py(345)__getitem__()->21043516...115795849
-> return self._coords[n]
(Pdb) 
--Call--
> /home/leif/Sage/sage-4.6.prealpha3-with-mpir-2.1.1/local/lib/python2.6/site-packages/sage/schemes/elliptic_curves/ell_point.py(334)__getitem__()
-> def __getitem__(self, n):
(Pdb) 
> /home/leif/Sage/sage-4.6.prealpha3-with-mpir-2.1.1/local/lib/python2.6/site-packages/sage/schemes/elliptic_curves/ell_point.py(345)__getitem__()
-> return self._coords[n]
(Pdb) 
--Return--
> /home/leif/Sage/sage-4.6.prealpha3-with-mpir-2.1.1/local/lib/python2.6/site-packages/sage/schemes/elliptic_curves/ell_point.py(345)__getitem__()->30508178...767198757
-> return self._coords[n]
(Pdb) 

Program received signal SIGSEGV, Segmentation fault.
0x00007ffff29c08fd in mpn_submul_1 ()
   from /home/leif/Sage/sage-4.6.prealpha3-with-mpir-2.1.1/local/lib/libgmp.so.8
(gdb) c
Continuing.

Program received signal SIGSEGV, Segmentation fault.
0x00007fffeca17fee in __pyx_pf_4sage_4libs_4pari_3gen_3gen___setitem__ (
    __pyx_v_self=<value optimized out>, __pyx_v_n=<value optimized out>, 
    __pyx_v_y=<value optimized out>) at sage/libs/pari/gen.c:7018
7018	}
(gdb) 
```



---

archive/issue_comments_079484.json:
```json
{
    "body": "<div id=\"comment:338\" align=\"right\">comment:338</div>\n\nReplying to [@nexttime](#comment%3A329):\n> I guess John C. will know. I just wonder *where* we should address such issues; #8664 (with #5847 mandatory) is likely to go into the 4.6 series. (Though perhaps not 4.6.0, I'm not the release manager.)\n\nAlthough #8664 and #5847 are not prerequisites for the PARI upgrade --- please correct me if I'm wrong --- I think is OK to add comments about \"NewPARI.\"  Just be sure to prefix the comments with, e.g.,\n\n **This is about #9343's PARI upgrade.  See [NewPARI](http://wiki.sagemath.org/NewPARI) for more information and links.**",
    "created_at": "2010-08-27T23:12:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79484",
    "user": "https://github.com/qed777"
}
```

<div id="comment:338" align="right">comment:338</div>

Replying to [@nexttime](#comment%3A329):
> I guess John C. will know. I just wonder *where* we should address such issues; #8664 (with #5847 mandatory) is likely to go into the 4.6 series. (Though perhaps not 4.6.0, I'm not the release manager.)

Although #8664 and #5847 are not prerequisites for the PARI upgrade --- please correct me if I'm wrong --- I think is OK to add comments about "NewPARI."  Just be sure to prefix the comments with, e.g.,

 **This is about #9343's PARI upgrade.  See [NewPARI](http://wiki.sagemath.org/NewPARI) for more information and links.**



---

archive/issue_comments_079485.json:
```json
{
    "body": "<div id=\"comment:339\" align=\"right\">comment:339</div>\n\nReplying to [@nexttime](#comment%3A337):\n>\n\n```\n...\n%1 = -8.968227546699448805 E-38\n```\n\nI get the same result with \"vanilla\" 4.6.prealpha3 (MPIR 1.2.2.p1/GMP-4.2.1 kernel).\n\n---\n\nThe 32-bit Fedora machine segfaults at `Q.height()`, too; in addition, a segfault occurs in `ell_rational_field.py`. (Again 4.6.prealpha3 **with** MPIR 2.1.1 and ECM 6.3.)",
    "created_at": "2010-08-27T23:20:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79485",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:339" align="right">comment:339</div>

Replying to [@nexttime](#comment%3A337):
>

```
...
%1 = -8.968227546699448805 E-38
```

I get the same result with "vanilla" 4.6.prealpha3 (MPIR 1.2.2.p1/GMP-4.2.1 kernel).

---

The 32-bit Fedora machine segfaults at `Q.height()`, too; in addition, a segfault occurs in `ell_rational_field.py`. (Again 4.6.prealpha3 **with** MPIR 2.1.1 and ECM 6.3.)



---

archive/issue_comments_079486.json:
```json
{
    "body": "<div id=\"comment:340\" align=\"right\">comment:340</div>\n\n\n```\n? read(\"../pari-test-cremona.gp\")\n%1 = 2.386623822 E-29\n```\nExactly John's result on the *32-bit* machine with 4.6.prealpha3 and MPIR 2.1.1/GMP-5.0.1 kernel.",
    "created_at": "2010-08-27T23:50:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79486",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:340" align="right">comment:340</div>


```
? read("../pari-test-cremona.gp")
%1 = 2.386623822 E-29
```
Exactly John's result on the *32-bit* machine with 4.6.prealpha3 and MPIR 2.1.1/GMP-5.0.1 kernel.



---

archive/issue_comments_079487.json:
```json
{
    "body": "<div id=\"comment:341\" align=\"right\">comment:341</div>\n\nReplying to [@nexttime](#comment%3A340):\n> \n> ```\n> ? read(\"../pari-test-cremona.gp\")\n> %1 = 2.386623822 E-29\n> ```\n> Exactly John's result on the *32-bit* machine with 4.6.prealpha3 and MPIR 2.1.1/GMP-5.0.1 kernel.\n\nThose are the expected results on 32 and 64 bit machines.\n\nSorry, I'm not able to look at this at all today (Saturday).",
    "created_at": "2010-08-28T08:54:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79487",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:341" align="right">comment:341</div>

Replying to [@nexttime](#comment%3A340):
> 
> ```
> ? read("../pari-test-cremona.gp")
> %1 = 2.386623822 E-29
> ```
> Exactly John's result on the *32-bit* machine with 4.6.prealpha3 and MPIR 2.1.1/GMP-5.0.1 kernel.

Those are the expected results on 32 and 64 bit machines.

Sorry, I'm not able to look at this at all today (Saturday).



---

archive/issue_comments_079488.json:
```json
{
    "body": "<div id=\"comment:342\" align=\"right\">comment:342</div>\n\nReplying to [@JohnCremona](#comment%3A341):\n> Sorry, I'm not able to look at this at all today (Saturday).\n\nIt's an upstream problem (PARI/GP 2.4.3.svn-12577 with MPIR 2.1.1). :)\n\nMore to come...",
    "created_at": "2010-08-28T18:56:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79488",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:342" align="right">comment:342</div>

Replying to [@JohnCremona](#comment%3A341):
> Sorry, I'm not able to look at this at all today (Saturday).

It's an upstream problem (PARI/GP 2.4.3.svn-12577 with MPIR 2.1.1). :)

More to come...



---

archive/issue_comments_079489.json:
```json
{
    "body": "<div id=\"comment:343\" align=\"right\">comment:343</div>\n\nReplying to [@nexttime](#comment%3A342):\n> Replying to [@JohnCremona](#comment%3A341):\n> > Sorry, I'm not able to look at this at all today (Saturday).\n> \n> \n> It's an upstream problem (PARI/GP 2.4.3.svn-12577 with MPIR 2.1.1). :)\n\nI thought it might be, which is why I provided a test gp script which Pari developers would like more than some Sage code.\n\n> \n> More to come...",
    "created_at": "2010-08-28T20:07:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79489",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:343" align="right">comment:343</div>

Replying to [@nexttime](#comment%3A342):
> Replying to [@JohnCremona](#comment%3A341):
> > Sorry, I'm not able to look at this at all today (Saturday).
> 
> 
> It's an upstream problem (PARI/GP 2.4.3.svn-12577 with MPIR 2.1.1). :)

I thought it might be, which is why I provided a test gp script which Pari developers would like more than some Sage code.

> 
> More to come...



---

archive/issue_comments_079490.json:
```json
{
    "body": "<div id=\"comment:344\" align=\"right\">comment:344</div>\n\nReplying to [@JohnCremona](#comment%3A343):\n> Replying to [@nexttime](#comment%3A342):\n> > It's an upstream problem (PARI/GP 2.4.3.svn-12577 with MPIR 2.1.1). :)\n> \n> \n> I thought it might be, which is why I provided a test gp script which Pari developers would like more than some Sage code.\n\nI was actually thinking (fearing) it was a Sage/Cython bug, but can meanwhile reproduce the segfault with a GP script; going to sort out if it's PARI's or MPIR's fault.",
    "created_at": "2010-08-28T20:35:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79490",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:344" align="right">comment:344</div>

Replying to [@JohnCremona](#comment%3A343):
> Replying to [@nexttime](#comment%3A342):
> > It's an upstream problem (PARI/GP 2.4.3.svn-12577 with MPIR 2.1.1). :)
> 
> 
> I thought it might be, which is why I provided a test gp script which Pari developers would like more than some Sage code.

I was actually thinking (fearing) it was a Sage/Cython bug, but can meanwhile reproduce the segfault with a GP script; going to sort out if it's PARI's or MPIR's fault.



---

archive/issue_comments_079491.json:
```json
{
    "body": "<div id=\"comment:345\" align=\"right\">comment:345</div>\n\nReplying to [@nexttime](#comment%3A342):\n> Replying to [@JohnCremona](#comment%3A341):\n> > Sorry, I'm not able to look at this at all today (Saturday).\n> \n> \n> It's an upstream problem (PARI/GP 2.4.3.svn-12577 with MPIR 2.1.1). :)\n\nI'm **not** able to reproduce this problem.  I'm using vanilla MPIR 2.1.1, vanilla PARI svn-12577 and using PARI's --with-gmp feature and setting LD_LIBRARY_PATH to use my newly compiled MPIR.  This is using gcc (GCC) 4.6.0 20100705 (experimental) on a Gentoo Linux x86_64 system.  I run the gp script provided by John and it just works.",
    "created_at": "2010-08-29T09:51:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79491",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:345" align="right">comment:345</div>

Replying to [@nexttime](#comment%3A342):
> Replying to [@JohnCremona](#comment%3A341):
> > Sorry, I'm not able to look at this at all today (Saturday).
> 
> 
> It's an upstream problem (PARI/GP 2.4.3.svn-12577 with MPIR 2.1.1). :)

I'm **not** able to reproduce this problem.  I'm using vanilla MPIR 2.1.1, vanilla PARI svn-12577 and using PARI's --with-gmp feature and setting LD_LIBRARY_PATH to use my newly compiled MPIR.  This is using gcc (GCC) 4.6.0 20100705 (experimental) on a Gentoo Linux x86_64 system.  I run the gp script provided by John and it just works.



---

archive/issue_comments_079492.json:
```json
{
    "body": "<div id=\"comment:346\" align=\"right\">comment:346</div>\n\nReplying to [@jdemeyer](#comment%3A345):\n> Replying to [@nexttime](#comment%3A342):\n> > It's an upstream problem (PARI/GP 2.4.3.svn-12577 with MPIR 2.1.1). :)\n> \n> \n> I'm **not** able to reproduce this problem.  I'm using vanilla MPIR 2.1.1, vanilla PARI svn-12577 [...]\n\n> I run the gp script provided by John and it just works.\n\nWell, I wrote *\"**a** GP script\"*; John's doesn't resemble what Sage actually does.\n\nTry `ellorder(E,Q)`...\n\nWith true [GMP](http://gmplib.org/) 5.0.1 (and ECM 6.3), Sage 4.6.prealpha3 passes all tests for me; I'll try later on further machines. \n\nI've put a remark on the [NewPARI Wiki page](http://wiki.sagemath.org/NewPARI), and will revert #8664 to \"needs work\".",
    "created_at": "2010-08-29T13:04:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79492",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:346" align="right">comment:346</div>

Replying to [@jdemeyer](#comment%3A345):
> Replying to [@nexttime](#comment%3A342):
> > It's an upstream problem (PARI/GP 2.4.3.svn-12577 with MPIR 2.1.1). :)
> 
> 
> I'm **not** able to reproduce this problem.  I'm using vanilla MPIR 2.1.1, vanilla PARI svn-12577 [...]

> I run the gp script provided by John and it just works.

Well, I wrote *"**a** GP script"*; John's doesn't resemble what Sage actually does.

Try `ellorder(E,Q)`...

With true [GMP](http://gmplib.org/) 5.0.1 (and ECM 6.3), Sage 4.6.prealpha3 passes all tests for me; I'll try later on further machines. 

I've put a remark on the [NewPARI Wiki page](http://wiki.sagemath.org/NewPARI), and will revert #8664 to "needs work".



---

archive/issue_comments_079493.json:
```json
{
    "body": "<div id=\"comment:347\" align=\"right\">comment:347</div>\n\nReplying to [@nexttime](#comment%3A346):\n> Replying to [@jdemeyer](#comment%3A345):\n> > Replying to [@nexttime](#comment%3A342):\n> > > It's an upstream problem (PARI/GP 2.4.3.svn-12577 with MPIR 2.1.1). :)\n> > \n> > \n> > I'm **not** able to reproduce this problem.  I'm using vanilla MPIR 2.1.1, vanilla PARI svn-12577 [...]\n> \n> \n> > I run the gp script provided by John and it just works.\n> \n> \n> Well, I wrote *\"**a** GP script\"*; John's doesn't resemble what Sage actually does.\n\nMy script was intended to make the pari library do exactly what is does in that Sage example, i.e. it calls ellheight with the same point and curve.\n\n> \n> Try `ellorder(E,Q)`...\n\nMeaning?  That returns 0, which is correct (it means infinite order).\n\n> \n> With true [GMP](http://gmplib.org/) 5.0.1 (and ECM 6.3), Sage 4.6.prealpha3 passes all tests for me; I'll try later on further machines. \n> \n> I've put a remark on the [NewPARI Wiki page](http://wiki.sagemath.org/NewPARI), and will revert #8664 to \"needs work\".",
    "created_at": "2010-08-29T13:19:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79493",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:347" align="right">comment:347</div>

Replying to [@nexttime](#comment%3A346):
> Replying to [@jdemeyer](#comment%3A345):
> > Replying to [@nexttime](#comment%3A342):
> > > It's an upstream problem (PARI/GP 2.4.3.svn-12577 with MPIR 2.1.1). :)
> > 
> > 
> > I'm **not** able to reproduce this problem.  I'm using vanilla MPIR 2.1.1, vanilla PARI svn-12577 [...]
> 
> 
> > I run the gp script provided by John and it just works.
> 
> 
> Well, I wrote *"**a** GP script"*; John's doesn't resemble what Sage actually does.

My script was intended to make the pari library do exactly what is does in that Sage example, i.e. it calls ellheight with the same point and curve.

> 
> Try `ellorder(E,Q)`...

Meaning?  That returns 0, which is correct (it means infinite order).

> 
> With true [GMP](http://gmplib.org/) 5.0.1 (and ECM 6.3), Sage 4.6.prealpha3 passes all tests for me; I'll try later on further machines. 
> 
> I've put a remark on the [NewPARI Wiki page](http://wiki.sagemath.org/NewPARI), and will revert #8664 to "needs work".



---

archive/issue_comments_079494.json:
```json
{
    "body": "<div id=\"comment:348\" align=\"right\">comment:348</div>\n\nReplying to [@nexttime](#comment%3A346):\n> Try `ellorder(E,Q)`...\n\nAllright, bug confirmed!",
    "created_at": "2010-08-29T13:40:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79494",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:348" align="right">comment:348</div>

Replying to [@nexttime](#comment%3A346):
> Try `ellorder(E,Q)`...

Allright, bug confirmed!



---

archive/issue_comments_079495.json:
```json
{
    "body": "<div id=\"comment:349\" align=\"right\">comment:349</div>\n\nReplying to [@jdemeyer](#comment%3A348):\n> Replying to [@nexttime](#comment%3A346):\n> > Try `ellorder(E,Q)`...\n> \n> Allright, bug confirmed!\n\nInterestingly, the *statically compiled* `gp-sta` version of gp works.",
    "created_at": "2010-08-29T13:53:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79495",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:349" align="right">comment:349</div>

Replying to [@jdemeyer](#comment%3A348):
> Replying to [@nexttime](#comment%3A346):
> > Try `ellorder(E,Q)`...
> 
> Allright, bug confirmed!

Interestingly, the *statically compiled* `gp-sta` version of gp works.



---

archive/issue_comments_079496.json:
```json
{
    "body": "<div id=\"comment:350\" align=\"right\">comment:350</div>\n\nIf I understand correctly, this is a probably a Pari bug, which the Pari developers will hopefully fix. (It might not be of course - I'm not saying it is a Pari bug). \n\nI would suggest that it would suggest it might be wiser to just add the bug fix to the Sage package, and not use the very latest svn checkout. That should reduce the chance of you getting any new bugs that might have been created. Since these are only svn snapshots, they can't be expected to be as stable as a well tested release. \n\nOf course, it would be wise to ask the Pari developers too, but my general feeling is that it would be wise to make major changes now. \n\nDave",
    "created_at": "2010-08-29T13:56:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79496",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:350" align="right">comment:350</div>

If I understand correctly, this is a probably a Pari bug, which the Pari developers will hopefully fix. (It might not be of course - I'm not saying it is a Pari bug). 

I would suggest that it would suggest it might be wiser to just add the bug fix to the Sage package, and not use the very latest svn checkout. That should reduce the chance of you getting any new bugs that might have been created. Since these are only svn snapshots, they can't be expected to be as stable as a well tested release. 

Of course, it would be wise to ask the Pari developers too, but my general feeling is that it would be wise to make major changes now. 

Dave



---

archive/issue_comments_079497.json:
```json
{
    "body": "<div id=\"comment:351\" align=\"right\">comment:351</div>\n\nReplying to [@JohnCremona](#comment%3A347):\n> Replying to [@nexttime](#comment%3A346):\n> > Well, I wrote *\"**a** GP script\"*; John's doesn't resemble what Sage actually does.\n> \n> \n> My script was intended to make the pari library do exactly what is does in that Sage example, i.e. it calls ellheight with the same point and curve.\n\nThis wasn't meant as an offense; perhaps I should have written *\"... does not **fully** resemble what Sage does\"*.\n\n> > Try `ellorder(E,Q)`...\n> \n> \n> Meaning?  That returns 0, which is correct (it means infinite order).\n\nYes, and **that**'s what crashes with MPIR 2.1.1.\n\nSage's `EllipticCurvePoint_number_field.height()` first calls `self.has_finite_order()`, which in turn calls `self.order()`, which uses PARI's `orderell()` (deprecated, `ellorder()` in the GP interpreter).",
    "created_at": "2010-08-29T14:00:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79497",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:351" align="right">comment:351</div>

Replying to [@JohnCremona](#comment%3A347):
> Replying to [@nexttime](#comment%3A346):
> > Well, I wrote *"**a** GP script"*; John's doesn't resemble what Sage actually does.
> 
> 
> My script was intended to make the pari library do exactly what is does in that Sage example, i.e. it calls ellheight with the same point and curve.

This wasn't meant as an offense; perhaps I should have written *"... does not **fully** resemble what Sage does"*.

> > Try `ellorder(E,Q)`...
> 
> 
> Meaning?  That returns 0, which is correct (it means infinite order).

Yes, and **that**'s what crashes with MPIR 2.1.1.

Sage's `EllipticCurvePoint_number_field.height()` first calls `self.has_finite_order()`, which in turn calls `self.order()`, which uses PARI's `orderell()` (deprecated, `ellorder()` in the GP interpreter).



---

archive/issue_comments_079498.json:
```json
{
    "body": "<div id=\"comment:352\" align=\"right\">comment:352</div>\n\nIn order not to flood this ticket any further, I opened a ticket for this new PARI + new MPIR issue: #9837",
    "created_at": "2010-08-29T14:02:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79498",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:352" align="right">comment:352</div>

In order not to flood this ticket any further, I opened a ticket for this new PARI + new MPIR issue: #9837



---

archive/issue_comments_079499.json:
```json
{
    "body": "<div id=\"comment:353\" align=\"right\">comment:353</div>\n\nHow close are the essential PARI upgrade tickets #9343, #9591, and #9592 (any others?) to being positively reviewed?",
    "created_at": "2010-08-30T01:33:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79499",
    "user": "https://github.com/qed777"
}
```

<div id="comment:353" align="right">comment:353</div>

How close are the essential PARI upgrade tickets #9343, #9591, and #9592 (any others?) to being positively reviewed?



---

archive/issue_comments_079500.json:
```json
{
    "body": "<div id=\"comment:354\" align=\"right\">comment:354</div>\n\nReplying to [@qed777](#comment%3A353):\n> How close are the essential PARI upgrade tickets #9343, #9591, and #9592 (any others?) to being positively reviewed?\n\nIf the Pari upgrade is stalled over some issues, it might be worth considering putting the upgrade off for the a release. That would not slow the Pari upgrade, if the tickets merged had an almost zero probability of conflicting with the upgrade. \n\n* #9766 is for example a ticket I reviewed, which is an update to an SPKG.txt file only. \nThat's an extreme example, but there must be other tickets which have a very small probability of affecting the Pari upgrade. \n\nThat said, I'm glad the 4.5.3.alpha2 has become available, and people are having time to test that without 4.5.3 being rushed out.",
    "created_at": "2010-08-30T08:57:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79500",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:354" align="right">comment:354</div>

Replying to [@qed777](#comment%3A353):
> How close are the essential PARI upgrade tickets #9343, #9591, and #9592 (any others?) to being positively reviewed?

If the Pari upgrade is stalled over some issues, it might be worth considering putting the upgrade off for the a release. That would not slow the Pari upgrade, if the tickets merged had an almost zero probability of conflicting with the upgrade. 

* #9766 is for example a ticket I reviewed, which is an update to an SPKG.txt file only. 
That's an extreme example, but there must be other tickets which have a very small probability of affecting the Pari upgrade. 

That said, I'm glad the 4.5.3.alpha2 has become available, and people are having time to test that without 4.5.3 being rushed out.



---

archive/issue_comments_079501.json:
```json
{
    "body": "<div id=\"comment:355\" align=\"right\">comment:355</div>\n\nReplying to [@qed777](#comment%3A353):\n> How close are the essential PARI upgrade tickets #9343, #9591, and #9592 (any others?) to being positively reviewed?\n\nI lost track of who is doing what, so I don't know what (or who) we are waiting for.  Or who will be the one to actually give it a positive review.  Presumably what we want is that as soon as 4.5.3 is released the current prealpha of 4.6 is released as an alpha?  What is to stop that happening now?",
    "created_at": "2010-08-30T11:49:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79501",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:355" align="right">comment:355</div>

Replying to [@qed777](#comment%3A353):
> How close are the essential PARI upgrade tickets #9343, #9591, and #9592 (any others?) to being positively reviewed?

I lost track of who is doing what, so I don't know what (or who) we are waiting for.  Or who will be the one to actually give it a positive review.  Presumably what we want is that as soon as 4.5.3 is released the current prealpha of 4.6 is released as an alpha?  What is to stop that happening now?



---

archive/issue_comments_079502.json:
```json
{
    "body": "<div id=\"comment:356\" align=\"right\">comment:356</div>\n\nAs far as I know, the only remaining issue is to port #9722 to #9343.  I believe leif is working on that (If leif is unable to do it, I'm also willing to take care of that).\n\nThe large number of doctests without errors for sage-4.6.prealpha3 seem to indicate that the patches are fine.\n\nI also would very much like somebody to have a look at #9400, because it also touches a lot of PARI code (the patch for #9400 has been included in 4.6.prealpha2 and 4.6.prealpha3).",
    "created_at": "2010-08-30T14:50:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79502",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:356" align="right">comment:356</div>

As far as I know, the only remaining issue is to port #9722 to #9343.  I believe leif is working on that (If leif is unable to do it, I'm also willing to take care of that).

The large number of doctests without errors for sage-4.6.prealpha3 seem to indicate that the patches are fine.

I also would very much like somebody to have a look at #9400, because it also touches a lot of PARI code (the patch for #9400 has been included in 4.6.prealpha2 and 4.6.prealpha3).



---

archive/issue_comments_079503.json:
```json
{
    "body": "<div id=\"comment:357\" align=\"right\">comment:357</div>\n\nReplying to [@JohnCremona](#comment%3A355):\n> I lost track of who is doing what, so I don't know what (or who) we are waiting for.  Or who will be the one to actually give it a positive review.\n\nMe, too. Also, it looks as if there was a lack of (other, \"independent\") reviewers, or at least people testing this. I still don't know if this has been tested on Cygwin, and, if there were any issues, if we should address them *here*. (Mike has provided a \"follow-up\" Lcalc to make it work on Cygwin; I'm not sure if that's the only required change w.r.t. prealpha3.) \n \n> Presumably what we want is that as soon as 4.5.3 is released the current prealpha of 4.6 is released as an alpha?\n\nI actually expected a 4.5.3 release candidate rather than an alpha2, and 4.5.3 released earlier. 4.6.prealpha3 is still based on 4.5.3.alpha1, but as far as I know the only changes in 4.5.3.alpha2 are fixing numerical noise in doctests, and #9722, which I am porting to the new PARI; Mitesh will know better.\n\n> What is to stop that happening now?\n\nRegarding this ticket, the only things I'm aware of are:\n* preparing a PARI 2.4.3.svn-12577.p5 spkg, with the fixes from #9722, and in addition disabling the use of GMP internals by PARI by default (with an *option* to make PARI use them)\n* fixing Sphinx warnings\n* adding more documentation (strings) and doctests to (at least) `sage/libs/pari/gen.pyx` (cf. [this comment](https://github.com/sagemath/sage/issues/9343#comment:250) and the [corresponding attachment](https://github.com/sagemath/sage/files/ticket9343/pari-gen.pyx-coverage.txt)).\n\nI don't know if further (new?) PARI functions should be wrapped; I only came across the deprecated `orderell()`.\n\nIMHO other things (e.g. Lcalc spkg improvements; I've commented on Mike's follow-up #9775) should be addressed during the normal 4.6 release cycle.\n\nI guess an official 4.6.alpha would be tested by far more people, on a broader variety of systems. Same for 4.5.3 (final). If any problems arise with the latter, they should be fixed during the preparation of 4.6 alphas, not in our inofficial prealphas.\n\nReplying to [@jdemeyer](#comment%3A356):\n> [...] port #9722 to #9343. I believe leif is working on that.\n\nYes. Unfortunately the MPIR 2.1.1 issue took too much of my time and resources; I now consider it (more or less) \"resolved\", and continue the work on the PARI 2.4.3.svn-12577.p5 spkg.\n    \n> The large number of doctests without errors for sage-4.6.prealpha3 seem to indicate that the patches are fine.\n\nHopefully. It might also indicate a lack of (appropriate) doctests... ;-)\n\n(E.g., despite the obvious bug in MPIR 2.1.1, Sage 4.5.3.alpha2 and 4.6.prealpha3 - with PARI *not* using GMP internals - both passed all long tests on two systems with it. There have been similar cases in the past.)",
    "created_at": "2010-08-30T18:30:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79503",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:357" align="right">comment:357</div>

Replying to [@JohnCremona](#comment%3A355):
> I lost track of who is doing what, so I don't know what (or who) we are waiting for.  Or who will be the one to actually give it a positive review.

Me, too. Also, it looks as if there was a lack of (other, "independent") reviewers, or at least people testing this. I still don't know if this has been tested on Cygwin, and, if there were any issues, if we should address them *here*. (Mike has provided a "follow-up" Lcalc to make it work on Cygwin; I'm not sure if that's the only required change w.r.t. prealpha3.) 
 
> Presumably what we want is that as soon as 4.5.3 is released the current prealpha of 4.6 is released as an alpha?

I actually expected a 4.5.3 release candidate rather than an alpha2, and 4.5.3 released earlier. 4.6.prealpha3 is still based on 4.5.3.alpha1, but as far as I know the only changes in 4.5.3.alpha2 are fixing numerical noise in doctests, and #9722, which I am porting to the new PARI; Mitesh will know better.

> What is to stop that happening now?

Regarding this ticket, the only things I'm aware of are:
* preparing a PARI 2.4.3.svn-12577.p5 spkg, with the fixes from #9722, and in addition disabling the use of GMP internals by PARI by default (with an *option* to make PARI use them)
* fixing Sphinx warnings
* adding more documentation (strings) and doctests to (at least) `sage/libs/pari/gen.pyx` (cf. [this comment](https://github.com/sagemath/sage/issues/9343#comment:250) and the [corresponding attachment](https://github.com/sagemath/sage/files/ticket9343/pari-gen.pyx-coverage.txt)).

I don't know if further (new?) PARI functions should be wrapped; I only came across the deprecated `orderell()`.

IMHO other things (e.g. Lcalc spkg improvements; I've commented on Mike's follow-up #9775) should be addressed during the normal 4.6 release cycle.

I guess an official 4.6.alpha would be tested by far more people, on a broader variety of systems. Same for 4.5.3 (final). If any problems arise with the latter, they should be fixed during the preparation of 4.6 alphas, not in our inofficial prealphas.

Replying to [@jdemeyer](#comment%3A356):
> [...] port #9722 to #9343. I believe leif is working on that.

Yes. Unfortunately the MPIR 2.1.1 issue took too much of my time and resources; I now consider it (more or less) "resolved", and continue the work on the PARI 2.4.3.svn-12577.p5 spkg.
    
> The large number of doctests without errors for sage-4.6.prealpha3 seem to indicate that the patches are fine.

Hopefully. It might also indicate a lack of (appropriate) doctests... ;-)

(E.g., despite the obvious bug in MPIR 2.1.1, Sage 4.5.3.alpha2 and 4.6.prealpha3 - with PARI *not* using GMP internals - both passed all long tests on two systems with it. There have been similar cases in the past.)



---

archive/issue_comments_079504.json:
```json
{
    "body": "<div id=\"comment:358\" align=\"right\">comment:358</div>\n\nP.S.: In prealpha3, the \"coverage\" slightly rised (by 1 percent):\n\n```\nSCORE devel/sage/sage/libs/pari/gen.pyx: 56% (220 of 389)\n```",
    "created_at": "2010-08-30T18:36:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79504",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:358" align="right">comment:358</div>

P.S.: In prealpha3, the "coverage" slightly rised (by 1 percent):

```
SCORE devel/sage/sage/libs/pari/gen.pyx: 56% (220 of 389)
```



---

archive/issue_comments_079505.json:
```json
{
    "body": "<div id=\"comment:359\" align=\"right\">comment:359</div>\n\nReplying to [@nexttime](#comment%3A357):\n> * preparing a PARI 2.4.3.svn-12577.p5 spkg, with the fixes from #9722, and in addition disabling the use of GMP internals by PARI by default (with an *option* to make PARI use them)\n\nI'm assuming you refer to the \"GMP internals\" mentioned in #9837?  Note that these are actually **documented** GMP internals, so it's not as bad as it sounds.  So I would prefer not to touch that code and leave PARI using documented GMP/MPIR internals as it is.\n\nAlso, on the who-is-doing-what part: I am not doing anything with this for the moment (I do plan to release a prealpha4 when leif's done with p5).",
    "created_at": "2010-08-30T21:28:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79505",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:359" align="right">comment:359</div>

Replying to [@nexttime](#comment%3A357):
> * preparing a PARI 2.4.3.svn-12577.p5 spkg, with the fixes from #9722, and in addition disabling the use of GMP internals by PARI by default (with an *option* to make PARI use them)

I'm assuming you refer to the "GMP internals" mentioned in #9837?  Note that these are actually **documented** GMP internals, so it's not as bad as it sounds.  So I would prefer not to touch that code and leave PARI using documented GMP/MPIR internals as it is.

Also, on the who-is-doing-what part: I am not doing anything with this for the moment (I do plan to release a prealpha4 when leif's done with p5).



---

archive/issue_comments_079506.json:
```json
{
    "body": "<div id=\"comment:360\" align=\"right\">comment:360</div>\n\nI'll release a 4.5.3.rc0 later today (or possibly, tomorrow) which, if there are no new blockers, will become Sage 4.5.3 a week later.  Soon after that, I'll start merging positively-reviewed (PR) tickets (listed at reports {11} and {32}) into 4.6.alpha0.\n\nIf the essential PARI upgrade tickets are \n\n* PR at that time, I'll merge them (and perhaps other PR PARI-related tickets) into 4.6.alpha0 and leave the other PR tickets for 4.6.alpha1 (or later).\n\n* Not PR at that time, I'll merge other PR tickets into 4.6.alpha0 and leave the PARI tickets for 4.6.alpha1 (or later).\n\nEither way, I don't plan to release Sage 4.6 (== 4.6.0) until it's sufficiently stable.",
    "created_at": "2010-08-30T22:35:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79506",
    "user": "https://github.com/qed777"
}
```

<div id="comment:360" align="right">comment:360</div>

I'll release a 4.5.3.rc0 later today (or possibly, tomorrow) which, if there are no new blockers, will become Sage 4.5.3 a week later.  Soon after that, I'll start merging positively-reviewed (PR) tickets (listed at reports {11} and {32}) into 4.6.alpha0.

If the essential PARI upgrade tickets are 

* PR at that time, I'll merge them (and perhaps other PR PARI-related tickets) into 4.6.alpha0 and leave the other PR tickets for 4.6.alpha1 (or later).

* Not PR at that time, I'll merge other PR tickets into 4.6.alpha0 and leave the PARI tickets for 4.6.alpha1 (or later).

Either way, I don't plan to release Sage 4.6 (== 4.6.0) until it's sufficiently stable.



---

archive/issue_comments_079507.json:
```json
{
    "body": "<div id=\"comment:361\" align=\"right\">comment:361</div>\n\nThe PARI have been starting to fix some bugs that we reported (as I said, they usually do it, albeit slowly).  Two patches which are in pari-2.4.3.svn-12577.p4.spkg are now fixed upstream in svn 12588:\n* http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1089\n* http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1091\n\nPersonally, I think we should upgrade our spkg from svn 12577 to 12588. This might be a controversial proposal, so what do you think of it?\n\nLeif, how is the progress on p5?",
    "created_at": "2010-09-05T13:22:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79507",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:361" align="right">comment:361</div>

The PARI have been starting to fix some bugs that we reported (as I said, they usually do it, albeit slowly).  Two patches which are in pari-2.4.3.svn-12577.p4.spkg are now fixed upstream in svn 12588:
* http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1089
* http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1091

Personally, I think we should upgrade our spkg from svn 12577 to 12588. This might be a controversial proposal, so what do you think of it?

Leif, how is the progress on p5?



---

archive/issue_comments_079508.json:
```json
{
    "body": "<div id=\"comment:362\" align=\"right\">comment:362</div>\n\nReplying to [@jdemeyer](#comment%3A361):\n> Personally, I think we should upgrade our spkg from svn 12577 to 12588. This might be a controversial proposal, so what do you think of it?\n\nNo idea what else they changed. Without further knowledge, I'd prefer staying with \"our already well-tested\" 12577, but don't insist on that. I'll leave the decision to the others.\n\nBtw, as Mitesh mentioned, we need a (formal) positive review to get this into Sage 4.6.\n\n\n> Leif, how is the progress on p5?\n\nOngoing... ;-)\n\nI currently have some hardware issues I cannot solve until tomorrow, but will post a p5 either later today or latest by tomorrow evening.",
    "created_at": "2010-09-05T16:35:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79508",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:362" align="right">comment:362</div>

Replying to [@jdemeyer](#comment%3A361):
> Personally, I think we should upgrade our spkg from svn 12577 to 12588. This might be a controversial proposal, so what do you think of it?

No idea what else they changed. Without further knowledge, I'd prefer staying with "our already well-tested" 12577, but don't insist on that. I'll leave the decision to the others.

Btw, as Mitesh mentioned, we need a (formal) positive review to get this into Sage 4.6.


> Leif, how is the progress on p5?

Ongoing... ;-)

I currently have some hardware issues I cannot solve until tomorrow, but will post a p5 either later today or latest by tomorrow evening.



---

archive/issue_comments_079509.json:
```json
{
    "body": "<div id=\"comment:363\" align=\"right\">comment:363</div>\n\nReplying to [@jdemeyer](#comment%3A361):\n> The PARI have been starting to fix some bugs that we reported (as I said, they usually do it, albeit slowly).  Two patches which are in pari-2.4.3.svn-12577.p4.spkg are now fixed upstream in svn 12588:\n> * http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1089\n> * http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1091\n> \n> Personally, I think we should upgrade our spkg from svn 12577 to 12588. This might be a controversial proposal, so what do you think of it?\n\nI think that would be a bad idea. It's difficult to say for sure without knowing what was changed in all 11 different svn snapshots, but given these are only snapshots with little testing, I think you have a reasonable probability of hitting another bug. \n\nNot only that, but people have spent a lot of time testing this. Their appetite for testing might diminish. \n\nWhere do you stop? \n\nDave",
    "created_at": "2010-09-05T19:27:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79509",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:363" align="right">comment:363</div>

Replying to [@jdemeyer](#comment%3A361):
> The PARI have been starting to fix some bugs that we reported (as I said, they usually do it, albeit slowly).  Two patches which are in pari-2.4.3.svn-12577.p4.spkg are now fixed upstream in svn 12588:
> * http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1089
> * http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1091
> 
> Personally, I think we should upgrade our spkg from svn 12577 to 12588. This might be a controversial proposal, so what do you think of it?

I think that would be a bad idea. It's difficult to say for sure without knowing what was changed in all 11 different svn snapshots, but given these are only snapshots with little testing, I think you have a reasonable probability of hitting another bug. 

Not only that, but people have spent a lot of time testing this. Their appetite for testing might diminish. 

Where do you stop? 

Dave



---

archive/issue_comments_079510.json:
```json
{
    "body": "<div id=\"comment:364\" align=\"right\">comment:364</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A363):\n> I think that would be a bad idea. It's difficult to say for sure without knowing what was changed in all 11 different svn snapshots, but given these are only snapshots with little testing, I think you have a reasonable probability of hitting another bug. \n\nSo the PARI/GP people are fixing bugs that we reported, but we're not going to apply those bugfixes? That also sounds stupid.",
    "created_at": "2010-09-06T10:09:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79510",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:364" align="right">comment:364</div>

Replying to [@sagetrac-drkirkby](#comment%3A363):
> I think that would be a bad idea. It's difficult to say for sure without knowing what was changed in all 11 different svn snapshots, but given these are only snapshots with little testing, I think you have a reasonable probability of hitting another bug. 

So the PARI/GP people are fixing bugs that we reported, but we're not going to apply those bugfixes? That also sounds stupid.



---

archive/issue_comments_079511.json:
```json
{
    "body": "<div id=\"comment:365\" align=\"right\">comment:365</div>\n\nReplying to [@jdemeyer](#comment%3A364):\n> So the PARI/GP people are fixing bugs that we reported, but we're not going to apply those bugfixes? [...]\n\n*\"In a later, stable release...\"* ;-)\n\nI think we should really get into 4.6 what we have by now, or this ticket will never end.",
    "created_at": "2010-09-06T10:17:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79511",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:365" align="right">comment:365</div>

Replying to [@jdemeyer](#comment%3A364):
> So the PARI/GP people are fixing bugs that we reported, but we're not going to apply those bugfixes? [...]

*"In a later, stable release..."* ;-)

I think we should really get into 4.6 what we have by now, or this ticket will never end.



---

archive/issue_comments_079512.json:
```json
{
    "body": "<div id=\"comment:366\" align=\"right\">comment:366</div>\n\nReplying to [@jdemeyer](#comment%3A364):\n> Replying to [@sagetrac-drkirkby](#comment%3A363):\n> > I think that would be a bad idea. It's difficult to say for sure without knowing what was changed in all 11 different svn snapshots, but given these are only snapshots with little testing, I think you have a reasonable probability of hitting another bug. \n> \n> \n> So the PARI/GP people are fixing bugs that we reported, but we're not going to apply those bugfixes? That also sounds stupid.\n\nI think you didn't get Dave's point. He wants the fixes and only the fixes. If we \ntake another snapshot we get the fixes and who knows what else.\n\nI second leif this needs merging soon or it will never happen. \nWe just have to be ready to pick up the pieces in 4.6.1.",
    "created_at": "2010-09-06T10:23:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79512",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:366" align="right">comment:366</div>

Replying to [@jdemeyer](#comment%3A364):
> Replying to [@sagetrac-drkirkby](#comment%3A363):
> > I think that would be a bad idea. It's difficult to say for sure without knowing what was changed in all 11 different svn snapshots, but given these are only snapshots with little testing, I think you have a reasonable probability of hitting another bug. 
> 
> 
> So the PARI/GP people are fixing bugs that we reported, but we're not going to apply those bugfixes? That also sounds stupid.

I think you didn't get Dave's point. He wants the fixes and only the fixes. If we 
take another snapshot we get the fixes and who knows what else.

I second leif this needs merging soon or it will never happen. 
We just have to be ready to pick up the pieces in 4.6.1.



---

archive/issue_comments_079513.json:
```json
{
    "body": "<div id=\"comment:367\" align=\"right\">comment:367</div>\n\nReplying to [@kiwifb](#comment%3A366):\n> Replying to [@jdemeyer](#comment%3A364):\n> > Replying to [@sagetrac-drkirkby](#comment%3A363):\n> > > I think that would be a bad idea. It's difficult to say for sure without knowing what was changed in all 11 different svn snapshots, but given these are only snapshots with little testing, I think you have a reasonable probability of hitting another bug. \n> > \n> > \n> > So the PARI/GP people are fixing bugs that we reported, but we're not going to apply those bugfixes? That also sounds stupid.\n> \n> \n> I think you didn't get Dave's point. He wants the fixes and only the fixes. If we \n> take another snapshot we get the fixes and who knows what else.\n\nThat is **exactly** what I meant. \n\n> I second leif this needs merging soon or it will never happen. \n> We just have to be ready to pick up the pieces in 4.6.1.\n\nMe too.",
    "created_at": "2010-09-06T11:53:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79513",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:367" align="right">comment:367</div>

Replying to [@kiwifb](#comment%3A366):
> Replying to [@jdemeyer](#comment%3A364):
> > Replying to [@sagetrac-drkirkby](#comment%3A363):
> > > I think that would be a bad idea. It's difficult to say for sure without knowing what was changed in all 11 different svn snapshots, but given these are only snapshots with little testing, I think you have a reasonable probability of hitting another bug. 
> > 
> > 
> > So the PARI/GP people are fixing bugs that we reported, but we're not going to apply those bugfixes? That also sounds stupid.
> 
> 
> I think you didn't get Dave's point. He wants the fixes and only the fixes. If we 
> take another snapshot we get the fixes and who knows what else.

That is **exactly** what I meant. 

> I second leif this needs merging soon or it will never happen. 
> We just have to be ready to pick up the pieces in 4.6.1.

Me too.



---

archive/issue_comments_079514.json:
```json
{
    "body": "<div id=\"comment:368\" align=\"right\">comment:368</div>\n\nI've put the diffs of and a link to the [new PARI 2.4.3.svn-12577.p5 spkg](http://spkg-upload.googlecode.com/files/pari-2.4.3.svn-12577.p5.spkg) onto #9860. **Needs review...**",
    "created_at": "2010-09-06T12:50:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79514",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:368" align="right">comment:368</div>

I've put the diffs of and a link to the [new PARI 2.4.3.svn-12577.p5 spkg](http://spkg-upload.googlecode.com/files/pari-2.4.3.svn-12577.p5.spkg) onto #9860. **Needs review...**



---

archive/issue_comments_079515.json:
```json
{
    "body": "<div id=\"comment:369\" align=\"right\">comment:369</div>\n\nDave, you changed the status from \"positive review\" to \"needs work\" about three weeks ago.\n\nAre there still known issues not yet fixed?\n\nOtherwise we should at least put it back to \"needs review\".",
    "created_at": "2010-09-06T13:41:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79515",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:369" align="right">comment:369</div>

Dave, you changed the status from "positive review" to "needs work" about three weeks ago.

Are there still known issues not yet fixed?

Otherwise we should at least put it back to "needs review".



---

archive/issue_events_118530.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-09-06T13:45:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9343#event-118530"
}
```



---

archive/issue_events_118531.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-09-06T13:45:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9343#event-118531"
}
```



---

archive/issue_comments_079516.json:
```json
{
    "body": "<div id=\"comment:371\" align=\"right\">comment:371</div>\n\nI will add some small changes to your spkg:\n* config/Makefile.SH: now fixed upstream.\n* src/tune/tune.c: tuning fixed upstream.\n\nI will update just these two files from upstream and remove our patch for config/Makefile.SH (no other changes, I promise!)",
    "created_at": "2010-09-06T14:00:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79516",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:371" align="right">comment:371</div>

I will add some small changes to your spkg:
* config/Makefile.SH: now fixed upstream.
* src/tune/tune.c: tuning fixed upstream.

I will update just these two files from upstream and remove our patch for config/Makefile.SH (no other changes, I promise!)



---

archive/issue_comments_079517.json:
```json
{
    "body": "<div id=\"comment:372\" align=\"right\">comment:372</div>\n\nI have made a few small changes to the pari spkg and put the result at [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p5.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p5.spkg) (I kept the p5 version number).",
    "created_at": "2010-09-06T16:10:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79517",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:372" align="right">comment:372</div>

I have made a few small changes to the pari spkg and put the result at [http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p5.spkg](http://sage.math.washington.edu/home/jdemeyer/spkg/pari-2.4.3.svn-12577.p5.spkg) (I kept the p5 version number).



---

archive/issue_comments_079518.json:
```json
{
    "body": "<div id=\"comment:373\" align=\"right\">comment:373</div>\n\nI will now make a new 4.6-prealpha4 based on 4.5.3-rc0 with the new spkgs (I will also update genus2reduction, see #9591 and lcalc, see #9845).",
    "created_at": "2010-09-06T16:30:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79518",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:373" align="right">comment:373</div>

I will now make a new 4.6-prealpha4 based on 4.5.3-rc0 with the new spkgs (I will also update genus2reduction, see #9591 and lcalc, see #9845).



---

archive/issue_events_118532.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-09-07T10:00:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9343#event-118532"
}
```



---

archive/issue_events_118533.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-09-07T10:00:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9343#event-118533"
}
```



---

archive/issue_comments_079519.json:
```json
{
    "body": "<div id=\"comment:374\" align=\"right\">comment:374</div>\n\nNew prealpha4: [http://sage.math.washington.edu/home/jdemeyer/dist/sage-4.6.prealpha4.tar](http://sage.math.washington.edu/home/jdemeyer/dist/sage-4.6.prealpha4.tar)\n\nTested successfully on `sage.math.washington.edu`, more testing underway.  Also tuning and spkg-check worked:\n\n```\nenv SAGE_CHECK=yes SAGE_TUNE_pari=yes ./sage -f pari-2.4.3.svn-12577.p5.spkg\n```\n\nAs far as I know, there are no remaining issues, so I will be bold and set this back to positive review.",
    "created_at": "2010-09-07T10:00:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79519",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:374" align="right">comment:374</div>

New prealpha4: [http://sage.math.washington.edu/home/jdemeyer/dist/sage-4.6.prealpha4.tar](http://sage.math.washington.edu/home/jdemeyer/dist/sage-4.6.prealpha4.tar)

Tested successfully on `sage.math.washington.edu`, more testing underway.  Also tuning and spkg-check worked:

```
env SAGE_CHECK=yes SAGE_TUNE_pari=yes ./sage -f pari-2.4.3.svn-12577.p5.spkg
```

As far as I know, there are no remaining issues, so I will be bold and set this back to positive review.



---

archive/issue_comments_079520.json:
```json
{
    "body": "<div id=\"comment:375\" align=\"right\">comment:375</div>\n\nThe prealpha4 passed `ptestlong` on Ubuntu 10.04 x86_64 (Core2) and Fedora 13 x86 (Pentium 4 Prescott), too. Installing the package with `SAGE_CHECK=yes` also works.\n\nTuning now doesn't give an error on the former, but still hangs on the latter (see previous posts).\n\nThe patch to `tune.c` from svn 12588 is a one-liner btw.",
    "created_at": "2010-09-07T10:13:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79520",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:375" align="right">comment:375</div>

The prealpha4 passed `ptestlong` on Ubuntu 10.04 x86_64 (Core2) and Fedora 13 x86 (Pentium 4 Prescott), too. Installing the package with `SAGE_CHECK=yes` also works.

Tuning now doesn't give an error on the former, but still hangs on the latter (see previous posts).

The patch to `tune.c` from svn 12588 is a one-liner btw.



---

archive/issue_comments_079521.json:
```json
{
    "body": "<div id=\"comment:376\" align=\"right\">comment:376</div>\n\nReplying to [@jdemeyer](#comment%3A374):\n> New prealpha4: [http://sage.math.washington.edu/home/jdemeyer/dist/sage-4.6.prealpha4.tar](http://sage.math.washington.edu/home/jdemeyer/dist/sage-4.6.prealpha4.tar)\n> \n> Tested successfully on `sage.math.washington.edu`, more testing underway.  Also tuning and spkg-check worked:\n> \n> ```\n> env SAGE_CHECK=yes SAGE_TUNE_pari=yes ./sage -f pari-2.4.3.svn-12577.p5.spkg\n> ```\n> \n> As far as I know, there are no remaining issues, so I will be bold and set this back to positive review.\n\nHaving produced a tar file for people to test, it would have been wise to get some more feedback before setting it to positive review. \n\nI'm going to build it now on OpenSolaris. Nice thing about that is that's it's very quick. Downloading the tarball is less so!\n\nDave",
    "created_at": "2010-09-07T11:04:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79521",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:376" align="right">comment:376</div>

Replying to [@jdemeyer](#comment%3A374):
> New prealpha4: [http://sage.math.washington.edu/home/jdemeyer/dist/sage-4.6.prealpha4.tar](http://sage.math.washington.edu/home/jdemeyer/dist/sage-4.6.prealpha4.tar)
> 
> Tested successfully on `sage.math.washington.edu`, more testing underway.  Also tuning and spkg-check worked:
> 
> ```
> env SAGE_CHECK=yes SAGE_TUNE_pari=yes ./sage -f pari-2.4.3.svn-12577.p5.spkg
> ```
> 
> As far as I know, there are no remaining issues, so I will be bold and set this back to positive review.

Having produced a tar file for people to test, it would have been wise to get some more feedback before setting it to positive review. 

I'm going to build it now on OpenSolaris. Nice thing about that is that's it's very quick. Downloading the tarball is less so!

Dave



---

archive/issue_comments_079522.json:
```json
{
    "body": "<div id=\"comment:377\" align=\"right\">comment:377</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A376):\n> I'm going to build it now on OpenSolaris. Nice thing about that is that's it's very quick.\n\nIf so, you could try reinstalling the PARI package with `PARI_EXTRA_OPTS=\"--graphic=auto\"` or e.g. `X11`; best once with X11 development files present, and once in addition without (a functional) `xmkmf`. (I don't know what X11 [development] packages OpenSolaris provides.) :-)\n\n> Downloading the tarball is less so!\n\nTook more than three times longer than usual for me yesterday...",
    "created_at": "2010-09-07T11:33:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79522",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:377" align="right">comment:377</div>

Replying to [@sagetrac-drkirkby](#comment%3A376):
> I'm going to build it now on OpenSolaris. Nice thing about that is that's it's very quick.

If so, you could try reinstalling the PARI package with `PARI_EXTRA_OPTS="--graphic=auto"` or e.g. `X11`; best once with X11 development files present, and once in addition without (a functional) `xmkmf`. (I don't know what X11 [development] packages OpenSolaris provides.) :-)

> Downloading the tarball is less so!

Took more than three times longer than usual for me yesterday...



---

archive/issue_comments_079523.json:
```json
{
    "body": "<div id=\"comment:378\" align=\"right\">comment:378</div>\n\nReplying to [@nexttime](#comment%3A377):\n> Replying to [@sagetrac-drkirkby](#comment%3A376):\n> > I'm going to build it now on OpenSolaris. Nice thing about that is that's it's very quick.\n> \n> \n> If so, you could try reinstalling the PARI package with `PARI_EXTRA_OPTS=\"--graphic=auto\"` or e.g. `X11`; best once with X11 development files present, and once in addition without (a functional) `xmkmf`. (I don't know what X11 [development] packages OpenSolaris provides.) :-)\n> \n> > Downloading the tarball is less so!\n> \n> \n> Took more than three times longer than usual for me yesterday...\n\n\nIs the \n\n`PARI_EXTRA_OPTS=\"--graphic=auto\"` \n\njust an environment variable I should set? If so, that will be trivial. I'm actually building two copies of Sage at the minute on this machine, so its under a heavy load, but I'll try this later\n\nI see your point elsewhere about Qt. I have some Qt libraries on here, which come as part of Mathematica. Not sure if I should set LD_LIBRARY_PATH to include them. Let me know. \n\nDave",
    "created_at": "2010-09-07T12:18:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79523",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:378" align="right">comment:378</div>

Replying to [@nexttime](#comment%3A377):
> Replying to [@sagetrac-drkirkby](#comment%3A376):
> > I'm going to build it now on OpenSolaris. Nice thing about that is that's it's very quick.
> 
> 
> If so, you could try reinstalling the PARI package with `PARI_EXTRA_OPTS="--graphic=auto"` or e.g. `X11`; best once with X11 development files present, and once in addition without (a functional) `xmkmf`. (I don't know what X11 [development] packages OpenSolaris provides.) :-)
> 
> > Downloading the tarball is less so!
> 
> 
> Took more than three times longer than usual for me yesterday...


Is the 

`PARI_EXTRA_OPTS="--graphic=auto"` 

just an environment variable I should set? If so, that will be trivial. I'm actually building two copies of Sage at the minute on this machine, so its under a heavy load, but I'll try this later

I see your point elsewhere about Qt. I have some Qt libraries on here, which come as part of Mathematica. Not sure if I should set LD_LIBRARY_PATH to include them. Let me know. 

Dave



---

archive/issue_comments_079524.json:
```json
{
    "body": "<div id=\"comment:379\" align=\"right\">comment:379</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A378):\n> Replying to [@nexttime](#comment%3A377):\n> > Replying to [@sagetrac-drkirkby](#comment%3A376):\n> > > I'm going to build it now on OpenSolaris. Nice thing about that is that's it's very quick.\n> > \n> > \n> > If so, you could try reinstalling the PARI package with `PARI_EXTRA_OPTS=\"--graphic=auto\"` or e.g. `X11`; best once with X11 development files present, and once in addition without (a functional) `xmkmf`. (I don't know what X11 [development] packages OpenSolaris provides.) :-)\n> \n> Is the \n> \n> `PARI_EXTRA_OPTS=\"--graphic=auto\"` \n> \n> just an environment variable I should set?\n\nYes, that's passed (verbatim) to PARI's `Configure` by Sage, so do\n\n```sh\nexport PARI_EXTRA_OPTS=\"--graphic=X11\"\n```\n(`--graphic=auto` will pick X11 if it's found, otherwise try FLTK and Qt.)\n \n> I'm actually building two copies of Sage at the minute on this machine, so its under a heavy load, but I'll try this later\n\nThat would be nice.\n\n> I see your point elsewhere about Qt. I have some Qt libraries on here, which come as part of Mathematica. Not sure if I should set LD_LIBRARY_PATH to include them. Let me know.\n\nI don't think Mathematica ships with Qt *development* files... (But there should be such OpenSolaris packages. If you choose X11, PARI will just use \"plain\" X11.)\n\nW.r.t. #9603, my main machine is still headless... :/",
    "created_at": "2010-09-07T12:47:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79524",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:379" align="right">comment:379</div>

Replying to [@sagetrac-drkirkby](#comment%3A378):
> Replying to [@nexttime](#comment%3A377):
> > Replying to [@sagetrac-drkirkby](#comment%3A376):
> > > I'm going to build it now on OpenSolaris. Nice thing about that is that's it's very quick.
> > 
> > 
> > If so, you could try reinstalling the PARI package with `PARI_EXTRA_OPTS="--graphic=auto"` or e.g. `X11`; best once with X11 development files present, and once in addition without (a functional) `xmkmf`. (I don't know what X11 [development] packages OpenSolaris provides.) :-)
> 
> Is the 
> 
> `PARI_EXTRA_OPTS="--graphic=auto"` 
> 
> just an environment variable I should set?

Yes, that's passed (verbatim) to PARI's `Configure` by Sage, so do

```sh
export PARI_EXTRA_OPTS="--graphic=X11"
```
(`--graphic=auto` will pick X11 if it's found, otherwise try FLTK and Qt.)
 
> I'm actually building two copies of Sage at the minute on this machine, so its under a heavy load, but I'll try this later

That would be nice.

> I see your point elsewhere about Qt. I have some Qt libraries on here, which come as part of Mathematica. Not sure if I should set LD_LIBRARY_PATH to include them. Let me know.

I don't think Mathematica ships with Qt *development* files... (But there should be such OpenSolaris packages. If you choose X11, PARI will just use "plain" X11.)

W.r.t. #9603, my main machine is still headless... :/



---

archive/issue_comments_079525.json:
```json
{
    "body": "<div id=\"comment:380\" align=\"right\">comment:380</div>\n\nReplying to [@nexttime](#comment%3A375):\n> The prealpha4 passed `ptestlong` on Ubuntu 10.04 x86_64 (Core2) and Fedora 13 x86 (Pentium 4 Prescott), too. Installing the package with `SAGE_CHECK=yes` also works.\n> \n> Tuning now doesn't give an error on the former, but still hangs on the latter (see previous posts).\n\nIt also hangs with `CFLAGS=-O0`, and also if I do\n\n```\n.../pari-2.4.3.svn-12577.p5/src$ ./Configure --graphic=none --kernel=gmp --tune\n```\n(which uses the system's GMP, which is version 4.3.1), regardless of `CFLAGS` settings. (gcc is version 4.4.4.)\n\nIt doesn't always hang at *exactly* the same point (of output), but this might simply be due to unflushed buffers; the point where it \"stops\" only differs by some lines (different size / threshold for the same function, when attempting to tune `REMIIMUL_LIMIT` if I understand correctly). When I interrupt the tuning from within a Sage build with Control-C, I get cores dumped. Plain PARI seems to catch the signal (properly) and exits with\n\n```\n^C  ***   user interrupt.\n  ***   Error in the PARI system. End of program.\n```\nbut continues compilation (which of course fails).",
    "created_at": "2010-09-07T13:19:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79525",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:380" align="right">comment:380</div>

Replying to [@nexttime](#comment%3A375):
> The prealpha4 passed `ptestlong` on Ubuntu 10.04 x86_64 (Core2) and Fedora 13 x86 (Pentium 4 Prescott), too. Installing the package with `SAGE_CHECK=yes` also works.
> 
> Tuning now doesn't give an error on the former, but still hangs on the latter (see previous posts).

It also hangs with `CFLAGS=-O0`, and also if I do

```
.../pari-2.4.3.svn-12577.p5/src$ ./Configure --graphic=none --kernel=gmp --tune
```
(which uses the system's GMP, which is version 4.3.1), regardless of `CFLAGS` settings. (gcc is version 4.4.4.)

It doesn't always hang at *exactly* the same point (of output), but this might simply be due to unflushed buffers; the point where it "stops" only differs by some lines (different size / threshold for the same function, when attempting to tune `REMIIMUL_LIMIT` if I understand correctly). When I interrupt the tuning from within a Sage build with Control-C, I get cores dumped. Plain PARI seems to catch the signal (properly) and exits with

```
^C  ***   user interrupt.
  ***   Error in the PARI system. End of program.
```
but continues compilation (which of course fails).



---

archive/issue_comments_079526.json:
```json
{
    "body": "<div id=\"comment:381\" align=\"right\">comment:381</div>\n\nOn a Pentium 4 (Northwood), PARI self-tuning works, and `make test-all` apparently passes all tests except those few that require extra data files, though the self-test also ends with\n\n```\n+++ [BUG] Total bench for gp-sta is 585030\n+++ [BUG] Total bench for gp-dyn is 592375\n\n...\n```\nI'm not sure what that's intended to mean.\n\nThis is with gcc 4.2.1 and GMP 4.3.2 though.",
    "created_at": "2010-09-07T15:48:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79526",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:381" align="right">comment:381</div>

On a Pentium 4 (Northwood), PARI self-tuning works, and `make test-all` apparently passes all tests except those few that require extra data files, though the self-test also ends with

```
+++ [BUG] Total bench for gp-sta is 585030
+++ [BUG] Total bench for gp-dyn is 592375

...
```
I'm not sure what that's intended to mean.

This is with gcc 4.2.1 and GMP 4.3.2 though.



---

archive/issue_comments_079527.json:
```json
{
    "body": "<div id=\"comment:382\" align=\"right\">comment:382</div>\n\nReplying to [@nexttime](#comment%3A381):\n> On a Pentium 4 (Northwood), PARI self-tuning works, and `make test-all` apparently passes all tests except those few that require extra data files, though the self-test also ends with\n> \n> ```\n> +++ [BUG] Total bench for gp-sta is 585030\n> +++ [BUG] Total bench for gp-dyn is 592375\n> \n> ...\n> ```\n\nThis means that some self-tests failed.  Normally you can see which tests failed by looking at the last lines of the output of `make test-all`.",
    "created_at": "2010-09-07T16:39:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79527",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:382" align="right">comment:382</div>

Replying to [@nexttime](#comment%3A381):
> On a Pentium 4 (Northwood), PARI self-tuning works, and `make test-all` apparently passes all tests except those few that require extra data files, though the self-test also ends with
> 
> ```
> +++ [BUG] Total bench for gp-sta is 585030
> +++ [BUG] Total bench for gp-dyn is 592375
> 
> ...
> ```

This means that some self-tests failed.  Normally you can see which tests failed by looking at the last lines of the output of `make test-all`.



---

archive/issue_comments_079528.json:
```json
{
    "body": "<div id=\"comment:383\" align=\"right\">comment:383</div>\n\nReplying to [@jdemeyer](#comment%3A382):\n> Replying to [@nexttime](#comment%3A381):\n\n\n```\n+++ [BUG] Total bench for gp-sta is 585030\n+++ [BUG] Total bench for gp-dyn is 592375\n\n...\n```\n> \n> This means that some self-tests failed.  Normally you can see which tests failed by looking at the last lines of the output of `make test-all`.\n\nYes, and these are exactly the six (IIRC) tests that need extra data; I verified that by looking at the diffs. I don't know what *\"total bench\"* and the numbers express. (It's near to, but **not** the seconds the tests took... ;-) )",
    "created_at": "2010-09-07T16:55:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79528",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:383" align="right">comment:383</div>

Replying to [@jdemeyer](#comment%3A382):
> Replying to [@nexttime](#comment%3A381):


```
+++ [BUG] Total bench for gp-sta is 585030
+++ [BUG] Total bench for gp-dyn is 592375

...
```
> 
> This means that some self-tests failed.  Normally you can see which tests failed by looking at the last lines of the output of `make test-all`.

Yes, and these are exactly the six (IIRC) tests that need extra data; I verified that by looking at the diffs. I don't know what *"total bench"* and the numbers express. (It's near to, but **not** the seconds the tests took... ;-) )



---

archive/issue_comments_079529.json:
```json
{
    "body": "<div id=\"comment:384\" align=\"right\">comment:384</div>\n\nOh, it *might* be the (CPU) time in ms the test(s) took (sum about 20 minutes), but the *\"[BUG]\"* next to it is quite irritating.\n\nBtw, tuning also works on the Pentium 4 **Prescott** with GMP **4.2.4** and gcc **4.3.3**, so perhaps there's a bug in GMP; a bug in gcc (4.4.4) is IMHO rather unlikely.",
    "created_at": "2010-09-07T17:23:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79529",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:384" align="right">comment:384</div>

Oh, it *might* be the (CPU) time in ms the test(s) took (sum about 20 minutes), but the *"[BUG]"* next to it is quite irritating.

Btw, tuning also works on the Pentium 4 **Prescott** with GMP **4.2.4** and gcc **4.3.3**, so perhaps there's a bug in GMP; a bug in gcc (4.4.4) is IMHO rather unlikely.



---

archive/issue_comments_079530.json:
```json
{
    "body": "<div id=\"comment:385\" align=\"right\">comment:385</div>\n\nReplying to [@nexttime](#comment%3A384):\n> Btw, tuning also works on the Pentium 4 **Prescott** with GMP **4.2.4** and gcc **4.3.3**, so perhaps there's a bug in GMP; a bug in gcc (4.4.4) is IMHO rather unlikely.\n\nBut there another test fails (in `linear-{sta,dyn`}) which is not due to missing data files; perhaps numerical noise... (Both diffs are identical.)",
    "created_at": "2010-09-07T17:37:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79530",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:385" align="right">comment:385</div>

Replying to [@nexttime](#comment%3A384):
> Btw, tuning also works on the Pentium 4 **Prescott** with GMP **4.2.4** and gcc **4.3.3**, so perhaps there's a bug in GMP; a bug in gcc (4.4.4) is IMHO rather unlikely.

But there another test fails (in `linear-{sta,dyn`}) which is not due to missing data files; perhaps numerical noise... (Both diffs are identical.)



---

archive/issue_comments_079531.json:
```json
{
    "body": "<div id=\"comment:386\" align=\"right\">comment:386</div>\n\nReplying to [@nexttime](#comment%3A385):\n> But there another test fails (in `linear-{sta,dyn`}) which is not due to missing data files; perhaps numerical noise... (Both diffs are identical.) \n\nThis shouldn't happen, can you make a new ticket and post the the `linear-sta.dif`?",
    "created_at": "2010-09-07T20:50:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79531",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:386" align="right">comment:386</div>

Replying to [@nexttime](#comment%3A385):
> But there another test fails (in `linear-{sta,dyn`}) which is not due to missing data files; perhaps numerical noise... (Both diffs are identical.) 

This shouldn't happen, can you make a new ticket and post the the `linear-sta.dif`?



---

archive/issue_comments_079532.json:
```json
{
    "body": "<div id=\"comment:387\" align=\"right\">comment:387</div>\n\nFinal post *here* (I'll open a new ticket shortly):\n\nReplying to [@nexttime](#comment%3A380):\n> Replying to [@nexttime](#comment%3A375):\n> > The prealpha4 passed `ptestlong` on Ubuntu 10.04 x86_64 (Core2) and Fedora 13 x86 (Pentium 4 Prescott), too. Installing the package with `SAGE_CHECK=yes` also works.\n> > \n> > Tuning now doesn't give an error on the former, but still hangs on the latter (see previous posts).\n> \n> \n> It also hangs with `CFLAGS=-O0`, and also if I do\n\n\n```\n.../pari-2.4.3.svn-12577.p5/src$ ./Configure --graphic=none --kernel=gmp --tune\n```\n> (which uses the system's GMP, which is version 4.3.1), regardless of `CFLAGS` settings. (gcc is version 4.4.4.)\n\nIt also hangs with GMP 5.0.1 (\"plain\" PARI, gcc 4.4.4 as before, in tuning `REMIIMUL_LIMIT`).\n \n> It doesn't always hang at *exactly* the same point (of output), but this might simply be due to unflushed buffers; the point where it \"stops\" only differs by some lines (different size / threshold for the same function, when attempting to tune `REMIIMUL_LIMIT` if I understand correctly).",
    "created_at": "2010-09-07T22:50:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79532",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:387" align="right">comment:387</div>

Final post *here* (I'll open a new ticket shortly):

Replying to [@nexttime](#comment%3A380):
> Replying to [@nexttime](#comment%3A375):
> > The prealpha4 passed `ptestlong` on Ubuntu 10.04 x86_64 (Core2) and Fedora 13 x86 (Pentium 4 Prescott), too. Installing the package with `SAGE_CHECK=yes` also works.
> > 
> > Tuning now doesn't give an error on the former, but still hangs on the latter (see previous posts).
> 
> 
> It also hangs with `CFLAGS=-O0`, and also if I do


```
.../pari-2.4.3.svn-12577.p5/src$ ./Configure --graphic=none --kernel=gmp --tune
```
> (which uses the system's GMP, which is version 4.3.1), regardless of `CFLAGS` settings. (gcc is version 4.4.4.)

It also hangs with GMP 5.0.1 ("plain" PARI, gcc 4.4.4 as before, in tuning `REMIIMUL_LIMIT`).
 
> It doesn't always hang at *exactly* the same point (of output), but this might simply be due to unflushed buffers; the point where it "stops" only differs by some lines (different size / threshold for the same function, when attempting to tune `REMIIMUL_LIMIT` if I understand correctly).



---

archive/issue_comments_079533.json:
```json
{
    "body": "<div id=\"comment:388\" align=\"right\">comment:388</div>\n\nprealpha4 worked fine for me on 32-bit and 64-bit linux.\n\nNow that 4.5.3 has been released it would be great of we could get this as the beginning of an actual 4.6.0 series.",
    "created_at": "2010-09-08T21:11:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79533",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:388" align="right">comment:388</div>

prealpha4 worked fine for me on 32-bit and 64-bit linux.

Now that 4.5.3 has been released it would be great of we could get this as the beginning of an actual 4.6.0 series.



---

archive/issue_comments_079534.json:
```json
{
    "body": "<div id=\"comment:389\" align=\"right\">comment:389</div>\n\nReplying to [@JohnCremona](#comment%3A388):\n> Now that 4.5.3 has been released it would be great of we could get this as the beginning of an actual 4.6.0 series.\n\nMitesh Patel wrote on sage-release (\"4.6 sketch\" thread):\n> On 09/07/2010 05:38 PM, Jason Grout wrote:\n> > What do you see as the window for merging changes into 4.6?  I'd like to\n> > finish some significant changes to fast_callable, but don't think they\n> > should be introduced in a point-point release.  4.6 sounds like a good\n> > release for the changes.\n> \n> Up to three weeks.  I think there will be three alphas for the 4.6\n> cycle, since I'll focus on the PARI upgrade (#9343 and related tickets)\n> for 4.6.alpha0.  For alpha1 and alpha2, I plan to merge most of the\n> other positively reviewed tickets waiting at reports 11 and 32:\n> \n> http://trac.sagemath.org/sage_trac/report/11\n> http://trac.sagemath.org/sage_trac/report/32\n> \n> Of course, how it really goes will depend significantly on build and\n> test reports.\n> [...]\n\n:)\n\n(For unknown reason I do not see this thread on Google's page.)",
    "created_at": "2010-09-08T21:27:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79534",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:389" align="right">comment:389</div>

Replying to [@JohnCremona](#comment%3A388):
> Now that 4.5.3 has been released it would be great of we could get this as the beginning of an actual 4.6.0 series.

Mitesh Patel wrote on sage-release ("4.6 sketch" thread):
> On 09/07/2010 05:38 PM, Jason Grout wrote:
> > What do you see as the window for merging changes into 4.6?  I'd like to
> > finish some significant changes to fast_callable, but don't think they
> > should be introduced in a point-point release.  4.6 sounds like a good
> > release for the changes.
> 
> Up to three weeks.  I think there will be three alphas for the 4.6
> cycle, since I'll focus on the PARI upgrade (#9343 and related tickets)
> for 4.6.alpha0.  For alpha1 and alpha2, I plan to merge most of the
> other positively reviewed tickets waiting at reports 11 and 32:
> 
> http://trac.sagemath.org/sage_trac/report/11
> http://trac.sagemath.org/sage_trac/report/32
> 
> Of course, how it really goes will depend significantly on build and
> test reports.
> [...]

:)

(For unknown reason I do not see this thread on Google's page.)



---

archive/issue_comments_079535.json:
```json
{
    "body": "Attachment: **[extcode_9343_combined4.patch.gz](https://github.com/sagemath/sage/files/ticket9343/extcode_9343_combined4.patch.gz)**\n\nUpdate commit string for combined extcode patch.",
    "created_at": "2010-09-10T06:30:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79535",
    "user": "https://github.com/qed777"
}
```

Attachment: **[extcode_9343_combined4.patch.gz](https://github.com/sagemath/sage/files/ticket9343/extcode_9343_combined4.patch.gz)**

Update commit string for combined extcode patch.



---

archive/issue_comments_079536.json:
```json
{
    "body": "<div id=\"comment:390\" align=\"right\">comment:390</div>\n\nI've updated the commit string for the extcode patch and updated [NewPARI](http://wiki.sagemath.org/NewPARI).",
    "created_at": "2010-09-10T06:34:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79536",
    "user": "https://github.com/qed777"
}
```

<div id="comment:390" align="right">comment:390</div>

I've updated the commit string for the extcode patch and updated [NewPARI](http://wiki.sagemath.org/NewPARI).



---

archive/issue_events_118534.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2010-09-10T10:38:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9343#event-118534"
}
```



---

archive/issue_events_118535.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2010-09-10T10:38:49Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9343#event-118535"
}
```



---

archive/issue_comments_079537.json:
```json
{
    "body": "Merged: **sage-4.6.alpha0**",
    "created_at": "2010-09-10T10:38:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79537",
    "user": "https://github.com/qed777"
}
```

Merged: **sage-4.6.alpha0**



---

archive/issue_comments_079538.json:
```json
{
    "body": "<div id=\"comment:392\" align=\"right\">comment:392</div>\n\nReplying to [@jdemeyer](#comment%3A302):\n> I found out what prevents PARI/GP from compiling on Solaris.  The problem is that `/bin/sh` from Solaris doesn't know about `test -e <filename>`.\n\nIt should, since `test -e ...` is POSIX (2004).\n\nDave, what shell is `/bin/sh` there?",
    "created_at": "2010-09-24T19:23:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79538",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:392" align="right">comment:392</div>

Replying to [@jdemeyer](#comment%3A302):
> I found out what prevents PARI/GP from compiling on Solaris.  The problem is that `/bin/sh` from Solaris doesn't know about `test -e <filename>`.

It should, since `test -e ...` is POSIX (2004).

Dave, what shell is `/bin/sh` there?



---

archive/issue_comments_079539.json:
```json
{
    "body": "<div id=\"comment:393\" align=\"right\">comment:393</div>\n\nReplying to [@nexttime](#comment%3A392):\n> Replying to [@jdemeyer](#comment%3A302):\n> > I found out what prevents PARI/GP from compiling on Solaris.  The problem is that `/bin/sh` from Solaris doesn't know about `test -e <filename>`.\n> \n> \n> It should, since `test -e ...` is POSIX (2004).\n> \n> Dave, what shell is `/bin/sh` there?\n\n`/bin/sh` is a borne shell, but it is **not** POSIX compatible, since to make it POSIX compatible would break backwards compatibility in Solaris. \n\nThere are however other shells, such as `/usr/xpg4/bin/sh` which are POSIX compatible. Hence there is a need to work around the Solaris shell `/bin/sh`, and do not assume that it is POSIX compatible, since it is not. \n\nDave",
    "created_at": "2010-09-25T01:39:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9343",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9343#issuecomment-79539",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:393" align="right">comment:393</div>

Replying to [@nexttime](#comment%3A392):
> Replying to [@jdemeyer](#comment%3A302):
> > I found out what prevents PARI/GP from compiling on Solaris.  The problem is that `/bin/sh` from Solaris doesn't know about `test -e <filename>`.
> 
> 
> It should, since `test -e ...` is POSIX (2004).
> 
> Dave, what shell is `/bin/sh` there?

`/bin/sh` is a borne shell, but it is **not** POSIX compatible, since to make it POSIX compatible would break backwards compatibility in Solaris. 

There are however other shells, such as `/usr/xpg4/bin/sh` which are POSIX compatible. Hence there is a need to work around the Solaris shell `/bin/sh`, and do not assume that it is POSIX compatible, since it is not. 

Dave
