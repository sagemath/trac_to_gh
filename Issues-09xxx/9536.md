# Issue 9536: python setup.py picks prefix from ~/.pydistutils.cfg

archive/issues_009536.json:
```json
{
    "assignees": [],
    "body": "Hi,\nseveral packages do use `python setup.py`. This picks up the customized settings from ~/.pydistutils.cfg. This is bad, because it overrides the prefix setting. \n\nFor sage-main, I'll attach a patch: `setup.cfg` in the corresponding directory overrides the usere settings. Maybe there's a global solution.\n\nRegards,\n  Alexander Dreyer\n\n......\n\nUpdate for Sage 7.5. The problem reported on this ancient ticket is still present and affects\n- sagelib, \n- packages that are installed directly using `setup.py`\n- packages that are installed using pip.\n\nIt can be tested by creating the following `~/.pydistutils.cfg`:\n\n```\n[install]\nroot=/does-not-exist\n```\n\nThe patch on the ticket uses \n- `pip --isolated` and \n- `setup.py --no-user-cfg`\n\nNote there appear to be some issues regarding these option with early versions of Python 3.x: https://github.com/pypa/pip/issues/3509\n\n\nAssignee: **@alexanderdreyer**\n\nCC:  @jdemeyer @embray @nexttime @kiwifb @vbraun\n\nBranch/Commit: **[375faba](https://github.com/sagemath/sagetrac-mirror/commit/375faba4699c44e2be0ecceddfbca29de2770f85)**\n\nUpstream: **Reported upstream. Developers deny it's a bug.**\n\nReviewer: **Erik Bray**\n\nAuthor: **Matthias Koeppe**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/9536_\n\n",
    "closed_at": "2017-01-21T16:35:21Z",
    "created_at": "2010-07-18T14:07:14Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20build",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "python setup.py picks prefix from ~/.pydistutils.cfg",
    "type": "issue",
    "updated_at": "2017-01-21T16:35:21Z",
    "url": "https://github.com/sagemath/sage/issues/9536",
    "user": "https://github.com/alexanderdreyer"
}
```
Hi,
several packages do use `python setup.py`. This picks up the customized settings from ~/.pydistutils.cfg. This is bad, because it overrides the prefix setting. 

For sage-main, I'll attach a patch: `setup.cfg` in the corresponding directory overrides the usere settings. Maybe there's a global solution.

Regards,
  Alexander Dreyer

......

Update for Sage 7.5. The problem reported on this ancient ticket is still present and affects
- sagelib, 
- packages that are installed directly using `setup.py`
- packages that are installed using pip.

It can be tested by creating the following `~/.pydistutils.cfg`:

```
[install]
root=/does-not-exist
```

The patch on the ticket uses 
- `pip --isolated` and 
- `setup.py --no-user-cfg`

Note there appear to be some issues regarding these option with early versions of Python 3.x: https://github.com/pypa/pip/issues/3509


Assignee: **@alexanderdreyer**

CC:  @jdemeyer @embray @nexttime @kiwifb @vbraun

Branch/Commit: **[375faba](https://github.com/sagemath/sagetrac-mirror/commit/375faba4699c44e2be0ecceddfbca29de2770f85)**

Upstream: **Reported upstream. Developers deny it's a bug.**

Reviewer: **Erik Bray**

Author: **Matthias Koeppe**

_Issue created by migration from https://trac.sagemath.org/ticket/9536_





---

archive/issue_events_111968.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2010-07-18T14:07:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20algebra",
    "label_color": "0000ff",
    "label_name": "component: algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9536#event-111968"
}
```



---

archive/issue_events_111969.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2010-07-18T14:07:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9536#event-111969"
}
```



---

archive/issue_events_111970.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2010-07-18T14:07:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9536#event-111970"
}
```



---

archive/issue_comments_084514.json:
```json
{
    "body": "Patch for sage-main",
    "created_at": "2010-07-18T14:09:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84514",
    "user": "https://github.com/alexanderdreyer"
}
```

Patch for sage-main



---

archive/issue_comments_084515.json:
```json
{
    "body": "Changed assignee from **@aghitza** to **@alexanderdreyer**",
    "created_at": "2010-07-18T14:46:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84515",
    "user": "https://github.com/alexanderdreyer"
}
```

Changed assignee from **@aghitza** to **@alexanderdreyer**



---

archive/issue_comments_084516.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nAttachment: **[setup_py_issue.patch.gz](https://github.com/sagemath/sage/files/ticket9536/setup_py_issue.patch.gz)**",
    "created_at": "2010-07-18T14:46:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84516",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:1" align="right">Comment 1</div>

Attachment: **[setup_py_issue.patch.gz](https://github.com/sagemath/sage/files/ticket9536/setup_py_issue.patch.gz)**



---

archive/issue_comments_084517.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nThe following packages from the distribution use setup.py and may be affected:\n\n```\nzodb3-3.7.0.p4\nscipy_sandbox-20071020.p5\npexpect-2.0.p4\nsqlalchemy-0.5.8\nglpk-4.44\nmpmath-0.15\npil-1.1.6.p2\nmercurial-1.3.1.p2\npycrypto-2.0.1.p5\nmpir-1.2.2.p1\nweave-0.4.9.p0\nsympy-0.6.4.p0\nscons-1.2.0\nnumpy-1.3.0.p3\ngdmodule-0.56.p7\nsagetex-2.2.5\nsage-4.5\nmatplotlib-0.99.3\nsage_scripts-4.5\nsetuptools-0.6c9.p0\npython-2.6.4.p9\npython_gnutls-1.1.4.p7\nsagenb-0.8.1\nnetworkx-1.0.1\njinja-1.2.p0\ncython-0.12.1\npygments-0.11.1.p0\nscipy-0.7.p5\ncvxopt-0.9.p8\njinja2-2.1.1.p0\nsphinx-0.6.3.p4\ndocutils-0.5.p0\ntwisted-9.0.p2\nipython-0.9.1.p0\nmoin-1.9.1.p1\n```\n\nThe following already have setup.cfg, but it may not have the prefix definition:\n\n```\nzodb3-3.7.0.p4\nsqlalchemy-0.5.8\nscons-1.2.0\nmatplotlib-0.99.3\nsetuptools-0.6c9.p0\nsagenb-0.8.1\nnetworkx-1.0.1\njinja-1.2.p0\npygments-0.11.1.p0\njinja2-2.1.1.p0\nsphinx-0.6.3.p4\ntwisted-9.0.p2\nmoin-1.9.1.p1\n```",
    "created_at": "2010-07-18T15:08:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84517",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:2" align="right">Comment 2</div>

The following packages from the distribution use setup.py and may be affected:

```
zodb3-3.7.0.p4
scipy_sandbox-20071020.p5
pexpect-2.0.p4
sqlalchemy-0.5.8
glpk-4.44
mpmath-0.15
pil-1.1.6.p2
mercurial-1.3.1.p2
pycrypto-2.0.1.p5
mpir-1.2.2.p1
weave-0.4.9.p0
sympy-0.6.4.p0
scons-1.2.0
numpy-1.3.0.p3
gdmodule-0.56.p7
sagetex-2.2.5
sage-4.5
matplotlib-0.99.3
sage_scripts-4.5
setuptools-0.6c9.p0
python-2.6.4.p9
python_gnutls-1.1.4.p7
sagenb-0.8.1
networkx-1.0.1
jinja-1.2.p0
cython-0.12.1
pygments-0.11.1.p0
scipy-0.7.p5
cvxopt-0.9.p8
jinja2-2.1.1.p0
sphinx-0.6.3.p4
docutils-0.5.p0
twisted-9.0.p2
ipython-0.9.1.p0
moin-1.9.1.p1
```

The following already have setup.cfg, but it may not have the prefix definition:

```
zodb3-3.7.0.p4
sqlalchemy-0.5.8
scons-1.2.0
matplotlib-0.99.3
setuptools-0.6c9.p0
sagenb-0.8.1
networkx-1.0.1
jinja-1.2.p0
pygments-0.11.1.p0
jinja2-2.1.1.p0
sphinx-0.6.3.p4
twisted-9.0.p2
moin-1.9.1.p1
```



---

archive/issue_comments_084518.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nHi!\nI am not an export for that for that, but did you read\nhttp://docs.python.org/install/#location-and-names-of-config-files\nThere seems to be some options:\n\u2013no-user-cfg\n\nCheers,\nMichael",
    "created_at": "2010-07-19T10:07:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84518",
    "user": "https://github.com/sagetrac-PolyBoRi"
}
```

<div id="comment:3" align="right">Comment 3</div>

Hi!
I am not an export for that for that, but did you read
http://docs.python.org/install/#location-and-names-of-config-files
There seems to be some options:
â€“no-user-cfg

Cheers,
Michael



---

archive/issue_comments_084519.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nHi Michael,\nindeed, that's a better solution. But both have the problem, that 30+ packages would have to be fixed, and it might be forgotten in the future. (Maybe there some monkey patch for distutils, that all of it can be overwritten by the environment.)\n\nBest regards,\n  Alexander",
    "created_at": "2010-07-19T10:13:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84519",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:4" align="right">Comment 4</div>

Hi Michael,
indeed, that's a better solution. But both have the problem, that 30+ packages would have to be fixed, and it might be forgotten in the future. (Maybe there some monkey patch for distutils, that all of it can be overwritten by the environment.)

Best regards,
  Alexander



---

archive/issue_comments_084520.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nmaybe, I did not try (just read the docs):\nhttp://docs.python.org/install/#inst-config-files\n\ncreate system distutils.cfg\n\n```\n[global]\nno-user-cfg=1\n```",
    "created_at": "2010-07-19T10:23:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84520",
    "user": "https://github.com/sagetrac-PolyBoRi"
}
```

<div id="comment:5" align="right">Comment 5</div>

maybe, I did not try (just read the docs):
http://docs.python.org/install/#inst-config-files

create system distutils.cfg

```
[global]
no-user-cfg=1
```



---

archive/issue_comments_084521.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nHi,\nunfortunately, this is a Python 2.7 feature and it does not support no-user-cfg in distutils.cfg :-(\n\nRegards,\n  Alexander",
    "created_at": "2010-07-19T15:11:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84521",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:6" align="right">Comment 6</div>

Hi,
unfortunately, this is a Python 2.7 feature and it does not support no-user-cfg in distutils.cfg :-(

Regards,
  Alexander



---

archive/issue_comments_084522.json:
```json
{
    "body": "patch for sage/spkg/base/sage-env sage/local/bin/sage-env (needs python 2.6.4.p10)",
    "created_at": "2010-07-19T20:46:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84522",
    "user": "https://github.com/alexanderdreyer"
}
```

patch for sage/spkg/base/sage-env sage/local/bin/sage-env (needs python 2.6.4.p10)



---

archive/issue_comments_084523.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nAttachment: **[sage-env.patch.gz](https://github.com/sagemath/sage/files/ticket9536/sage-env.patch.gz)**\n\nHi,\nI backported the handling of setup.py --no-user-cfg from  Python 2.7 to Python 2.6.4 and also added the handling of the environment variable `DISTUTILS_NO_USER_CFG` to python's distutils. \n\nThe new spkg can be found here: \nhttp://sage.math.washington.edu/home/dreyer/suse101/python-2.6.4.p10.spkg\n\nThe last patch adds this variable to `sage-env`.\n\nRegards,\n  Alexander",
    "created_at": "2010-07-19T20:50:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84523",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:7" align="right">Comment 7</div>

Attachment: **[sage-env.patch.gz](https://github.com/sagemath/sage/files/ticket9536/sage-env.patch.gz)**

Hi,
I backported the handling of setup.py --no-user-cfg from  Python 2.7 to Python 2.6.4 and also added the handling of the environment variable `DISTUTILS_NO_USER_CFG` to python's distutils. 

The new spkg can be found here: 
http://sage.math.washington.edu/home/dreyer/suse101/python-2.6.4.p10.spkg

The last patch adds this variable to `sage-env`.

Regards,
  Alexander



---

archive/issue_events_111971.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2010-07-19T20:50:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9536#event-111971"
}
```



---

archive/issue_events_111972.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2010-07-19T20:50:41Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "milestone_number": null,
    "milestone_title": "sage-4.5.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9536#event-111972"
}
```



---

archive/issue_comments_084524.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nReported upstream:\nhttp://bugs.python.org/issue9309",
    "created_at": "2010-07-19T21:16:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84524",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:8" align="right">Comment 8</div>

Reported upstream:
http://bugs.python.org/issue9309



---

archive/issue_comments_084525.json:
```json
{
    "body": "Changed upstream from **Not yet reported upstream; Will do shortly.** to **Reported upstream. Little or no feedback.**",
    "created_at": "2010-07-19T21:16:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84525",
    "user": "https://github.com/alexanderdreyer"
}
```

Changed upstream from **Not yet reported upstream; Will do shortly.** to **Reported upstream. Little or no feedback.**



---

archive/issue_comments_084526.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nMinor update: http://sage.math.washington.edu/home/dreyer/suse101/python-2.6.4.p10.spkg (useful, if the `sage-env` patch is not used)",
    "created_at": "2010-07-20T09:41:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84526",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:9" align="right">Comment 9</div>

Minor update: http://sage.math.washington.edu/home/dreyer/suse101/python-2.6.4.p10.spkg (useful, if the `sage-env` patch is not used)



---

archive/issue_comments_084527.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nReplying to [@alexanderdreyer](#comment%3A9):\n> Minor update: http://sage.math.washington.edu/home/dreyer/suse101/python-2.6.4.p10.spkg (useful, if the `sage-env` patch is not used)\n\nYou should also create patches/ACKS.txt.diff as a unified diff file. Although its fairly obvious you can recreate that now, that will not be the case if Python source code is updated. \n\nWould a simpler solution not be for sage-env to set this variable and export it? I don't know much about python, so can't review this myself. \n\nDave",
    "created_at": "2010-07-21T11:49:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84527",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:10" align="right">Comment 10</div>

Replying to [@alexanderdreyer](#comment%3A9):
> Minor update: http://sage.math.washington.edu/home/dreyer/suse101/python-2.6.4.p10.spkg (useful, if the `sage-env` patch is not used)

You should also create patches/ACKS.txt.diff as a unified diff file. Although its fairly obvious you can recreate that now, that will not be the case if Python source code is updated. 

Would a simpler solution not be for sage-env to set this variable and export it? I don't know much about python, so can't review this myself. 

Dave



---

archive/issue_comments_084528.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nMaybe a misunderstanding: the patch of python is necessary  to fix that issue anyway. (This first variant didn't work, if the environment variable was *not* set.)",
    "created_at": "2010-07-21T15:45:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84528",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:11" align="right">Comment 11</div>

Maybe a misunderstanding: the patch of python is necessary  to fix that issue anyway. (This first variant didn't work, if the environment variable was *not* set.)



---

archive/issue_comments_084529.json:
```json
{
    "body": "Attachment: **[python-2.6.4.p10.patch.gz](https://github.com/sagemath/sage/files/ticket9536/python-2.6.4.p10.patch.gz)**\n\nAdding handling of environment variable DISTUTILS_NO_USER_CFG to python's distutils",
    "created_at": "2010-07-21T15:58:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84529",
    "user": "https://github.com/alexanderdreyer"
}
```

Attachment: **[python-2.6.4.p10.patch.gz](https://github.com/sagemath/sage/files/ticket9536/python-2.6.4.p10.patch.gz)**

Adding handling of environment variable DISTUTILS_NO_USER_CFG to python's distutils



---

archive/issue_comments_084530.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nI've added ACKS.txt.patch to the spkg.",
    "created_at": "2010-07-21T16:03:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84530",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:12" align="right">Comment 12</div>

I've added ACKS.txt.patch to the spkg.



---

archive/issue_events_111973.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2010-07-29T14:02:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20algebra",
    "label_color": "0000ff",
    "label_name": "component: algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9536#event-111973"
}
```



---

archive/issue_events_111974.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2010-07-29T14:02:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20build",
    "label_color": "000080",
    "label_name": "component: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9536#event-111974"
}
```



---

archive/issue_comments_084531.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nThe python community does not like the idea of adding an environment variable, see:\nhttp://bugs.python.org/issue9309",
    "created_at": "2010-09-30T07:23:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84531",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:14" align="right">Comment 14</div>

The python community does not like the idea of adding an environment variable, see:
http://bugs.python.org/issue9309



---

archive/issue_comments_084532.json:
```json
{
    "body": "Changed upstream from **Reported upstream. Little or no feedback.** to **Reported upstream. Developers deny it's a bug.**",
    "created_at": "2010-09-30T08:12:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84532",
    "user": "https://github.com/alexanderdreyer"
}
```

Changed upstream from **Reported upstream. Little or no feedback.** to **Reported upstream. Developers deny it's a bug.**



---

archive/issue_comments_084533.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nPlease fill in your real name as Author.",
    "created_at": "2012-07-27T20:42:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84533",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:16" align="right">Comment 16</div>

Please fill in your real name as Author.



---

archive/issue_events_111975.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9536#event-111975"
}
```



---

archive/issue_events_111976.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9536#event-111976"
}
```



---

archive/issue_events_111977.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9536#event-111977"
}
```



---

archive/issue_events_111978.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9536#event-111978"
}
```



---

archive/issue_events_111979.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9536#event-111979"
}
```



---

archive/issue_events_111980.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9536#event-111980"
}
```



---

archive/issue_events_111981.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9536#event-111981"
}
```



---

archive/issue_events_111982.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9536#event-111982"
}
```



---

archive/issue_events_111983.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2015-05-29T02:20:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9536#event-111983"
}
```



---

archive/issue_events_111984.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2015-05-29T02:20:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9536#event-111984"
}
```



---

archive/issue_comments_084534.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nNeeds a branch.  And we have updated Python.  And probably other reasons it isn't ready yet.  (Or conceivably has been solved in the meantime?)",
    "created_at": "2015-05-29T02:20:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84534",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:21" align="right">Comment 21</div>

Needs a branch.  And we have updated Python.  And probably other reasons it isn't ready yet.  (Or conceivably has been solved in the meantime?)



---

archive/issue_events_111985.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-10-31T05:38:11Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9536#event-111985"
}
```



---

archive/issue_events_111986.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-10-31T05:38:11Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9536#event-111986"
}
```



---

archive/issue_comments_084535.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,3 +5,20 @@\n \n Regards,\n   Alexander Dreyer\n+\n+......\n+\n+Update for Sage 7.5. The problem reported on this ancient ticket is still present and affects\n+- sagelib, \n+- packages that are installed directly using `setup.py`\n+- packages that are installed using pip.\n+\n+It can be tested by creating the following `~/.pydistutils.cfg`:\n+\n+```\n+[install]\n+root=/does-not-exist\n+```\n+\n+\n+\n``````\n",
    "created_at": "2016-10-31T05:38:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84535",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,3 +5,20 @@
 
 Regards,
   Alexander Dreyer
+
+......
+
+Update for Sage 7.5. The problem reported on this ancient ticket is still present and affects
+- sagelib, 
+- packages that are installed directly using `setup.py`
+- packages that are installed using pip.
+
+It can be tested by creating the following `~/.pydistutils.cfg`:
+
+```
+[install]
+root=/does-not-exist
+```
+
+
+
``````




---

archive/issue_comments_084536.json:
```json
{
    "body": "Branch: **[u/mkoeppe/python_setup_py_picks_prefix_from____pydistutils_cfg](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/python_setup_py_picks_prefix_from____pydistutils_cfg)**",
    "created_at": "2016-10-31T06:23:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84536",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/python_setup_py_picks_prefix_from____pydistutils_cfg](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/python_setup_py_picks_prefix_from____pydistutils_cfg)**



---

archive/issue_comments_084537.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6dcaebb5f95abdc78cce729bcced7dc96ee5cb1f\">6dcaebb</a></td><td><code>Use 'pip --isolated' and 'setup.py --no-user-cfg'</code></td></tr></table>\n",
    "created_at": "2016-10-31T06:33:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84537",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:24" align="right">Comment 24</div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6dcaebb5f95abdc78cce729bcced7dc96ee5cb1f">6dcaebb</a></td><td><code>Use 'pip --isolated' and 'setup.py --no-user-cfg'</code></td></tr></table>




---

archive/issue_comments_084538.json:
```json
{
    "body": "Commit: **[6dcaebb](https://github.com/sagemath/sagetrac-mirror/commit/6dcaebb5f95abdc78cce729bcced7dc96ee5cb1f)**",
    "created_at": "2016-10-31T06:33:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84538",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[6dcaebb](https://github.com/sagemath/sagetrac-mirror/commit/6dcaebb5f95abdc78cce729bcced7dc96ee5cb1f)**



---

archive/issue_events_111987.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-10-31T06:33:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9536#event-111987"
}
```



---

archive/issue_events_111988.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-10-31T06:33:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9536#event-111988"
}
```



---

archive/issue_comments_084539.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2016-10-31T06:33:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84539",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_comments_084540.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -20,5 +20,9 @@\n root=/does-not-exist\n ```\n \n+The patch on the ticket uses \n+- `pip --isolated` and \n+- `setup.py --no-user-cfg`\n \n+Note there appear to be some issues regarding these option with early versions of Python 3.x: https://github.com/pypa/pip/issues/3509\n \n``````\n",
    "created_at": "2016-10-31T06:33:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84540",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -20,5 +20,9 @@
 root=/does-not-exist
 ```
 
+The patch on the ticket uses 
+- `pip --isolated` and 
+- `setup.py --no-user-cfg`
 
+Note there appear to be some issues regarding these option with early versions of Python 3.x: https://github.com/pypa/pip/issues/3509
 
``````




---

archive/issue_events_111989.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-11-07T13:29:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9536#event-111989"
}
```



---

archive/issue_events_111990.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-11-07T13:29:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9536#event-111990"
}
```



---

archive/issue_comments_084541.json:
```json
{
    "body": "Reviewer: **Erik Bray**",
    "created_at": "2016-11-07T13:29:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84541",
    "user": "https://github.com/embray"
}
```

Reviewer: **Erik Bray**



---

archive/issue_comments_084542.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nThis looks like the right approach, thanks.",
    "created_at": "2016-11-07T13:29:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84542",
    "user": "https://github.com/embray"
}
```

<div id="comment:25" align="right">Comment 25</div>

This looks like the right approach, thanks.



---

archive/issue_events_111991.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-11-08T23:42:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9536#event-111991"
}
```



---

archive/issue_events_111992.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-11-08T23:42:27Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9536#event-111992"
}
```



---

archive/issue_comments_084543.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/python_setup_py_picks_prefix_from____pydistutils_cfg](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/python_setup_py_picks_prefix_from____pydistutils_cfg)** to **[6dcaebb](https://github.com/sagemath/sagetrac-mirror/commit/6dcaebb5f95abdc78cce729bcced7dc96ee5cb1f)**",
    "created_at": "2016-11-08T23:42:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84543",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/python_setup_py_picks_prefix_from____pydistutils_cfg](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/python_setup_py_picks_prefix_from____pydistutils_cfg)** to **[6dcaebb](https://github.com/sagemath/sagetrac-mirror/commit/6dcaebb5f95abdc78cce729bcced7dc96ee5cb1f)**



---

archive/issue_comments_084544.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\nPrevents pyzmq from building...",
    "created_at": "2016-11-09T20:47:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84544",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:27" align="right">Comment 27</div>

Prevents pyzmq from building...



---

archive/issue_comments_084545.json:
```json
{
    "body": "Changed commit from **[6dcaebb](https://github.com/sagemath/sagetrac-mirror/commit/6dcaebb5f95abdc78cce729bcced7dc96ee5cb1f)** to none",
    "created_at": "2016-11-09T20:47:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84545",
    "user": "https://github.com/vbraun"
}
```

Changed commit from **[6dcaebb](https://github.com/sagemath/sagetrac-mirror/commit/6dcaebb5f95abdc78cce729bcced7dc96ee5cb1f)** to none



---

archive/issue_comments_084546.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\n\n```\n  Source in /tmp/pip-mTg5Xg-build has version 16.0.0, which satisfies requirement pyzmq==16.0.0 from file:///mnt/disk/home/release/Sage/local/var/tmp/sage/build/pyzmq-16.0.0/src\nInstalling collected packages: pyzmq\n  Running setup.py install for pyzmq: started\n    Running command /mnt/disk/home/release/Sage/local/bin/python -u -c \"import setuptools, tokenize;__file__='/tmp/pip-mTg5Xg-build/setup.py';exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('\\r\\n', '\\n'), __file__, 'exec'))\" configure --zmq=/mnt/disk/home/release/Sage/local --no-user-cfg install --record /tmp/pip-o79sR3-record/install-record.txt --single-version-externally-managed --compile\n    running configure\n    error: error in command line: command 'Configure' has no such option 'no_user_cfg'\n    Running setup.py install for pyzmq: finished with status 'error'\nCleaning up...\n  Removing source in /tmp/pip-mTg5Xg-build\nCommand \"/mnt/disk/home/release/Sage/local/bin/python -u -c \"import setuptools, tokenize;__file__='/tmp/pip-mTg5Xg-build/setup.py';exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('\\r\\n', '\\n'), __file__, 'exec'))\" configure --zmq=/mnt/disk/home/release/Sage/local --no-user-cfg install --record /tmp/pip-o79sR3-record/install-record.txt --single-version-externally-managed --compile\" failed with error code 1 in /tmp/pip-mTg5Xg-build/\nException information:\nTraceback (most recent call last):\n  File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pip/basecommand.py\", line 215, in main\n    status = self.run(options, args)\n  File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pip/commands/install.py\", line 317, in run\n    prefix=options.prefix_path,\n  File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pip/req/req_set.py\", line 742, in install\n    **kwargs\n  File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pip/req/req_install.py\", line 880, in install\n    spinner=spinner,\n  File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pip/utils/__init__.py\", line 718, in call_subprocess\n    % (command_desc, proc.returncode, cwd))\nInstallationError: Command \"/mnt/disk/home/release/Sage/local/bin/python -u -c \"import setuptools, tokenize;__file__='/tmp/pip-mTg5Xg-build/setup.py';exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('\\r\\n', '\\n'), __file__, 'exec'))\" configure --zmq=/mnt/disk/home/release/Sage/local --no-user-cfg install --record /tmp/pip-o79sR3-record/install-record.txt --single-version-externally-managed --compile\" failed with error code 1 in /tmp/pip-mTg5Xg-build/\n```",
    "created_at": "2016-11-09T20:48:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84546",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:28" align="right">Comment 28</div>


```
  Source in /tmp/pip-mTg5Xg-build has version 16.0.0, which satisfies requirement pyzmq==16.0.0 from file:///mnt/disk/home/release/Sage/local/var/tmp/sage/build/pyzmq-16.0.0/src
Installing collected packages: pyzmq
  Running setup.py install for pyzmq: started
    Running command /mnt/disk/home/release/Sage/local/bin/python -u -c "import setuptools, tokenize;__file__='/tmp/pip-mTg5Xg-build/setup.py';exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" configure --zmq=/mnt/disk/home/release/Sage/local --no-user-cfg install --record /tmp/pip-o79sR3-record/install-record.txt --single-version-externally-managed --compile
    running configure
    error: error in command line: command 'Configure' has no such option 'no_user_cfg'
    Running setup.py install for pyzmq: finished with status 'error'
Cleaning up...
  Removing source in /tmp/pip-mTg5Xg-build
Command "/mnt/disk/home/release/Sage/local/bin/python -u -c "import setuptools, tokenize;__file__='/tmp/pip-mTg5Xg-build/setup.py';exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" configure --zmq=/mnt/disk/home/release/Sage/local --no-user-cfg install --record /tmp/pip-o79sR3-record/install-record.txt --single-version-externally-managed --compile" failed with error code 1 in /tmp/pip-mTg5Xg-build/
Exception information:
Traceback (most recent call last):
  File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pip/basecommand.py", line 215, in main
    status = self.run(options, args)
  File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pip/commands/install.py", line 317, in run
    prefix=options.prefix_path,
  File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pip/req/req_set.py", line 742, in install
    **kwargs
  File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pip/req/req_install.py", line 880, in install
    spinner=spinner,
  File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pip/utils/__init__.py", line 718, in call_subprocess
    % (command_desc, proc.returncode, cwd))
InstallationError: Command "/mnt/disk/home/release/Sage/local/bin/python -u -c "import setuptools, tokenize;__file__='/tmp/pip-mTg5Xg-build/setup.py';exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" configure --zmq=/mnt/disk/home/release/Sage/local --no-user-cfg install --record /tmp/pip-o79sR3-record/install-record.txt --single-version-externally-managed --compile" failed with error code 1 in /tmp/pip-mTg5Xg-build/
```



---

archive/issue_comments_084547.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nI've created an upstream issue for this:\n https://github.com/zeromq/pyzmq/issues/937",
    "created_at": "2016-11-09T21:55:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84547",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:29" align="right">Comment 29</div>

I've created an upstream issue for this:
 https://github.com/zeromq/pyzmq/issues/937



---

archive/issue_comments_084548.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\nThat's annoying.  For now we should probably remove pip install from pyzmq.",
    "created_at": "2016-11-10T11:42:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84548",
    "user": "https://github.com/embray"
}
```

<div id="comment:30" align="right">Comment 30</div>

That's annoying.  For now we should probably remove pip install from pyzmq.



---

archive/issue_comments_084549.json:
```json
{
    "body": "Dependencies: **#21835**",
    "created_at": "2016-11-10T18:11:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84549",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#21835**



---

archive/issue_comments_084550.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nUpstream pyzmq reports that it works with pip 9.0.1, setuptools 28.8.0.\n\nLet's try with upgrading these packages. #21835 does the upgrade of pip to 9.0.0...",
    "created_at": "2016-11-10T18:11:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84550",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:31" align="right">Comment 31</div>

Upstream pyzmq reports that it works with pip 9.0.1, setuptools 28.8.0.

Let's try with upgrading these packages. #21835 does the upgrade of pip to 9.0.0...



---

archive/issue_comments_084551.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\nUpgrading setuptools to 28.8.0 does not fix the pyzmq install.\n\nI'll wait for the pip upgrade.",
    "created_at": "2016-11-10T18:56:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84551",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:32" align="right">Comment 32</div>

Upgrading setuptools to 28.8.0 does not fix the pyzmq install.

I'll wait for the pip upgrade.



---

archive/issue_comments_084552.json:
```json
{
    "body": "Changed branch from **[6dcaebb](https://github.com/sagemath/sagetrac-mirror/commit/6dcaebb5f95abdc78cce729bcced7dc96ee5cb1f)** to **[u/mkoeppe/6dcaebb5f95abdc78cce729bcced7dc96ee5cb1f](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/6dcaebb5f95abdc78cce729bcced7dc96ee5cb1f)**",
    "created_at": "2016-11-10T22:03:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84552",
    "user": "https://github.com/mkoeppe"
}
```

Changed branch from **[6dcaebb](https://github.com/sagemath/sagetrac-mirror/commit/6dcaebb5f95abdc78cce729bcced7dc96ee5cb1f)** to **[u/mkoeppe/6dcaebb5f95abdc78cce729bcced7dc96ee5cb1f](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/6dcaebb5f95abdc78cce729bcced7dc96ee5cb1f)**



---

archive/issue_comments_084553.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">Comment 34</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bf1b13041905472da8dc3fd25426ea2f64c2129a\">bf1b130</a></td><td><code>Use 'pip --isolated' and 'setup.py --no-user-cfg'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c21829914692175177a5a66775c015719fd450fd\">c218299</a></td><td><code>pyzmq: Fix pip install command line</code></td></tr></table>\n",
    "created_at": "2016-11-10T22:04:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84553",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:34" align="right">Comment 34</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bf1b13041905472da8dc3fd25426ea2f64c2129a">bf1b130</a></td><td><code>Use 'pip --isolated' and 'setup.py --no-user-cfg'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c21829914692175177a5a66775c015719fd450fd">c218299</a></td><td><code>pyzmq: Fix pip install command line</code></td></tr></table>




---

archive/issue_comments_084554.json:
```json
{
    "body": "Commit: **[c218299](https://github.com/sagemath/sagetrac-mirror/commit/c21829914692175177a5a66775c015719fd450fd)**",
    "created_at": "2016-11-10T22:04:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84554",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[c218299](https://github.com/sagemath/sagetrac-mirror/commit/c21829914692175177a5a66775c015719fd450fd)**



---

archive/issue_comments_084555.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">Comment 35</div>\n\nHere's a fix for our `pyzmq` `spkg-install`, with help from upstream.",
    "created_at": "2016-11-11T03:06:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84555",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:35" align="right">Comment 35</div>

Here's a fix for our `pyzmq` `spkg-install`, with help from upstream.



---

archive/issue_events_111993.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-11-11T03:06:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9536#event-111993"
}
```



---

archive/issue_comments_084556.json:
```json
{
    "body": "Changed dependencies from **#21835** to none",
    "created_at": "2016-11-11T03:12:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84556",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#21835** to none



---

archive/issue_comments_084557.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">Comment 37</div>\n\nJust a comment: it would make sense to use `$PIP_INSTALL` for a few more packages where no extra options are needed: `fpylll`, `gambit`, `sagenb`, `sagetex`.",
    "created_at": "2016-11-11T16:39:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84557",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:37" align="right">Comment 37</div>

Just a comment: it would make sense to use `$PIP_INSTALL` for a few more packages where no extra options are needed: `fpylll`, `gambit`, `sagenb`, `sagetex`.



---

archive/issue_comments_084558.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">Comment 38</div>\n\nI agree, but that should be on a different ticket. I've created #21864 for this.",
    "created_at": "2016-11-11T19:53:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84558",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:38" align="right">Comment 38</div>

I agree, but that should be on a different ticket. I've created #21864 for this.



---

archive/issue_comments_084559.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">Comment 39</div>\n\nNeeds review.",
    "created_at": "2016-11-15T01:54:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84559",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:39" align="right">Comment 39</div>

Needs review.



---

archive/issue_comments_084560.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">Comment 40</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1ea8221f665cf3e3815b7cff7f9971aba8c9bf9c\">1ea8221</a></td><td><code>Use 'pip --isolated' and 'setup.py --no-user-cfg'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/375faba4699c44e2be0ecceddfbca29de2770f85\">375faba</a></td><td><code>pyzmq: Fix pip install command line</code></td></tr></table>\n",
    "created_at": "2016-12-29T01:07:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84560",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:40" align="right">Comment 40</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1ea8221f665cf3e3815b7cff7f9971aba8c9bf9c">1ea8221</a></td><td><code>Use 'pip --isolated' and 'setup.py --no-user-cfg'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/375faba4699c44e2be0ecceddfbca29de2770f85">375faba</a></td><td><code>pyzmq: Fix pip install command line</code></td></tr></table>




---

archive/issue_comments_084561.json:
```json
{
    "body": "Changed commit from **[c218299](https://github.com/sagemath/sagetrac-mirror/commit/c21829914692175177a5a66775c015719fd450fd)** to **[375faba](https://github.com/sagemath/sagetrac-mirror/commit/375faba4699c44e2be0ecceddfbca29de2770f85)**",
    "created_at": "2016-12-29T01:07:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84561",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c218299](https://github.com/sagemath/sagetrac-mirror/commit/c21829914692175177a5a66775c015719fd450fd)** to **[375faba](https://github.com/sagemath/sagetrac-mirror/commit/375faba4699c44e2be0ecceddfbca29de2770f85)**



---

archive/issue_events_111994.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-12-29T01:08:30Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9536#event-111994"
}
```



---

archive/issue_events_111995.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-12-29T01:08:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "milestone_number": null,
    "milestone_title": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9536#event-111995"
}
```



---

archive/issue_comments_084562.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">Comment 41</div>\n\nRebased, needs review.",
    "created_at": "2016-12-29T01:08:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84562",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:41" align="right">Comment 41</div>

Rebased, needs review.



---

archive/issue_comments_084563.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">Comment 42</div>\n\nping?",
    "created_at": "2017-01-16T18:35:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84563",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:42" align="right">Comment 42</div>

ping?



---

archive/issue_comments_084564.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">Comment 43</div>\n\nThe issue with `--global-option` and `--no-user-cfg` still seems odd to me. I think that should be considered a bug in pip.  But I guess there's nothing to be done for now.",
    "created_at": "2017-01-17T12:06:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84564",
    "user": "https://github.com/embray"
}
```

<div id="comment:43" align="right">Comment 43</div>

The issue with `--global-option` and `--no-user-cfg` still seems odd to me. I think that should be considered a bug in pip.  But I guess there's nothing to be done for now.



---

archive/issue_events_111996.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-01-17T12:06:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9536#event-111996"
}
```



---

archive/issue_events_111997.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-01-17T12:06:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9536#event-111997"
}
```



---

archive/issue_events_111998.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-01-21T16:35:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9536#event-111998"
}
```



---

archive/issue_events_111999.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "abe62353012af942708c5b4338c011fa6c8f5782",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-01-21T16:35:21Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9536#event-111999"
}
```



---

archive/issue_comments_084565.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/6dcaebb5f95abdc78cce729bcced7dc96ee5cb1f](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/6dcaebb5f95abdc78cce729bcced7dc96ee5cb1f)** to **[375faba](https://github.com/sagemath/sagetrac-mirror/commit/375faba4699c44e2be0ecceddfbca29de2770f85)**",
    "created_at": "2017-01-21T16:35:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9536#issuecomment-84565",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/6dcaebb5f95abdc78cce729bcced7dc96ee5cb1f](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/6dcaebb5f95abdc78cce729bcced7dc96ee5cb1f)** to **[375faba](https://github.com/sagemath/sagetrac-mirror/commit/375faba4699c44e2be0ecceddfbca29de2770f85)**
