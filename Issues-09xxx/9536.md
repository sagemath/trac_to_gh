# Issue 9536: python setup.py picks prefix from ~/.pydistutils.cfg

archive/issues_009536.json:
```json
{
    "body": "Hi,\nseveral packages do use `python setup.py`. This picks up the customized settings from ~/.pydistutils.cfg. This is bad, because it overrides the prefix setting. \n\nFor sage-main, I'll attach a patch: `setup.cfg` in the corresponding directory overrides the usere settings. Maybe there's a global solution.\n\nRegards,\n  Alexander Dreyer\n\n......\n\nUpdate for Sage 7.5. The problem reported on this ancient ticket is still present and affects\n- sagelib, \n- packages that are installed directly using `setup.py`\n- packages that are installed using pip.\n\nIt can be tested by creating the following `~/.pydistutils.cfg`:\n\n```\n[install]\nroot=/does-not-exist\n```\n\nThe patch on the ticket uses \n- `pip --isolated` and \n- `setup.py --no-user-cfg`\n\nNote there appear to be some issues regarding these option with early versions of Python 3.x: https://github.com/pypa/pip/issues/3509\n\n\n**Assignee:** @alexanderdreyer\n\n**CC:**  @jdemeyer @embray @nexttime @kiwifb @vbraun\n\n**Branch/Commit:** [375faba4699c44e2be0ecceddfbca29de2770f85](https://github.com/sagemath/sagetrac-mirror/commit/375faba4699c44e2be0ecceddfbca29de2770f85)\n\n**Upstream:** Reported upstream. Developers deny it's a bug.\n\n**Reviewer:** Erik Bray\n\n**Author:** Matthias Koeppe\n\nIssue created by migration from https://trac.sagemath.org/ticket/9536\n\n",
    "closed_at": "2017-01-21T16:35:21Z",
    "created_at": "2010-07-18T14:07:14Z",
    "labels": [
        "component: build",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.6",
    "title": "python setup.py picks prefix from ~/.pydistutils.cfg",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/9536",
    "user": "https://github.com/alexanderdreyer"
}
```
Hi,
several packages do use `python setup.py`. This picks up the customized settings from ~/.pydistutils.cfg. This is bad, because it overrides the prefix setting. 

For sage-main, I'll attach a patch: `setup.cfg` in the corresponding directory overrides the usere settings. Maybe there's a global solution.

Regards,
  Alexander Dreyer

......

Update for Sage 7.5. The problem reported on this ancient ticket is still present and affects
- sagelib, 
- packages that are installed directly using `setup.py`
- packages that are installed using pip.

It can be tested by creating the following `~/.pydistutils.cfg`:

```
[install]
root=/does-not-exist
```

The patch on the ticket uses 
- `pip --isolated` and 
- `setup.py --no-user-cfg`

Note there appear to be some issues regarding these option with early versions of Python 3.x: https://github.com/pypa/pip/issues/3509


**Assignee:** @alexanderdreyer

**CC:**  @jdemeyer @embray @nexttime @kiwifb @vbraun

**Branch/Commit:** [375faba4699c44e2be0ecceddfbca29de2770f85](https://github.com/sagemath/sagetrac-mirror/commit/375faba4699c44e2be0ecceddfbca29de2770f85)

**Upstream:** Reported upstream. Developers deny it's a bug.

**Reviewer:** Erik Bray

**Author:** Matthias Koeppe

Issue created by migration from https://trac.sagemath.org/ticket/9536





---

archive/issue_comments_086089.json:
```json
{
    "body": "Patch for sage-main",
    "created_at": "2010-07-18T14:09:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86089",
    "user": "https://github.com/alexanderdreyer"
}
```

Patch for sage-main



---

archive/issue_comments_086090.json:
```json
{
    "body": "**Changing assignee** from @aghitza to @alexanderdreyer.",
    "created_at": "2010-07-18T14:46:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86090",
    "user": "https://github.com/alexanderdreyer"
}
```

**Changing assignee** from @aghitza to @alexanderdreyer.



---

archive/attachments_012199.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "setup_py_issue.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket9536/setup_py_issue.patch",
    "created_at": "2010-07-18T14:46:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/alexanderdreyer"
}
```



---

archive/issue_comments_086091.json:
```json
{
    "body": "<a id='comment:1'></a>\n",
    "created_at": "2010-07-18T14:46:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86091",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:1'></a>




---

archive/issue_comments_086092.json:
```json
{
    "body": "<a id='comment:2'></a>\nThe following packages from the distribution use setup.py and may be affected:\n\n```\nzodb3-3.7.0.p4\nscipy_sandbox-20071020.p5\npexpect-2.0.p4\nsqlalchemy-0.5.8\nglpk-4.44\nmpmath-0.15\npil-1.1.6.p2\nmercurial-1.3.1.p2\npycrypto-2.0.1.p5\nmpir-1.2.2.p1\nweave-0.4.9.p0\nsympy-0.6.4.p0\nscons-1.2.0\nnumpy-1.3.0.p3\ngdmodule-0.56.p7\nsagetex-2.2.5\nsage-4.5\nmatplotlib-0.99.3\nsage_scripts-4.5\nsetuptools-0.6c9.p0\npython-2.6.4.p9\npython_gnutls-1.1.4.p7\nsagenb-0.8.1\nnetworkx-1.0.1\njinja-1.2.p0\ncython-0.12.1\npygments-0.11.1.p0\nscipy-0.7.p5\ncvxopt-0.9.p8\njinja2-2.1.1.p0\nsphinx-0.6.3.p4\ndocutils-0.5.p0\ntwisted-9.0.p2\nipython-0.9.1.p0\nmoin-1.9.1.p1\n```\n\nThe following already have setup.cfg, but it may not have the prefix definition:\n\n```\nzodb3-3.7.0.p4\nsqlalchemy-0.5.8\nscons-1.2.0\nmatplotlib-0.99.3\nsetuptools-0.6c9.p0\nsagenb-0.8.1\nnetworkx-1.0.1\njinja-1.2.p0\npygments-0.11.1.p0\njinja2-2.1.1.p0\nsphinx-0.6.3.p4\ntwisted-9.0.p2\nmoin-1.9.1.p1\n```",
    "created_at": "2010-07-18T15:08:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86092",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:2'></a>
The following packages from the distribution use setup.py and may be affected:

```
zodb3-3.7.0.p4
scipy_sandbox-20071020.p5
pexpect-2.0.p4
sqlalchemy-0.5.8
glpk-4.44
mpmath-0.15
pil-1.1.6.p2
mercurial-1.3.1.p2
pycrypto-2.0.1.p5
mpir-1.2.2.p1
weave-0.4.9.p0
sympy-0.6.4.p0
scons-1.2.0
numpy-1.3.0.p3
gdmodule-0.56.p7
sagetex-2.2.5
sage-4.5
matplotlib-0.99.3
sage_scripts-4.5
setuptools-0.6c9.p0
python-2.6.4.p9
python_gnutls-1.1.4.p7
sagenb-0.8.1
networkx-1.0.1
jinja-1.2.p0
cython-0.12.1
pygments-0.11.1.p0
scipy-0.7.p5
cvxopt-0.9.p8
jinja2-2.1.1.p0
sphinx-0.6.3.p4
docutils-0.5.p0
twisted-9.0.p2
ipython-0.9.1.p0
moin-1.9.1.p1
```

The following already have setup.cfg, but it may not have the prefix definition:

```
zodb3-3.7.0.p4
sqlalchemy-0.5.8
scons-1.2.0
matplotlib-0.99.3
setuptools-0.6c9.p0
sagenb-0.8.1
networkx-1.0.1
jinja-1.2.p0
pygments-0.11.1.p0
jinja2-2.1.1.p0
sphinx-0.6.3.p4
twisted-9.0.p2
moin-1.9.1.p1
```



---

archive/issue_comments_086093.json:
```json
{
    "body": "<a id='comment:3'></a>\nHi!\nI am not an export for that for that, but did you read\nhttp://docs.python.org/install/#location-and-names-of-config-files\nThere seems to be some options:\n\u2013no-user-cfg\n\nCheers,\nMichael",
    "created_at": "2010-07-19T10:07:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86093",
    "user": "https://trac.sagemath.org/admin/accounts/users/PolyBoRi"
}
```

<a id='comment:3'></a>
Hi!
I am not an export for that for that, but did you read
http://docs.python.org/install/#location-and-names-of-config-files
There seems to be some options:
â€“no-user-cfg

Cheers,
Michael



---

archive/issue_comments_086094.json:
```json
{
    "body": "<a id='comment:4'></a>\nHi Michael,\nindeed, that's a better solution. But both have the problem, that 30+ packages would have to be fixed, and it might be forgotten in the future. (Maybe there some monkey patch for distutils, that all of it can be overwritten by the environment.)\n\nBest regards,\n  Alexander",
    "created_at": "2010-07-19T10:13:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86094",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:4'></a>
Hi Michael,
indeed, that's a better solution. But both have the problem, that 30+ packages would have to be fixed, and it might be forgotten in the future. (Maybe there some monkey patch for distutils, that all of it can be overwritten by the environment.)

Best regards,
  Alexander



---

archive/issue_comments_086095.json:
```json
{
    "body": "<a id='comment:5'></a>\nmaybe, I did not try (just read the docs):\nhttp://docs.python.org/install/#inst-config-files\n\ncreate system distutils.cfg\n\n```\n[global]\nno-user-cfg=1\n```",
    "created_at": "2010-07-19T10:23:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86095",
    "user": "https://trac.sagemath.org/admin/accounts/users/PolyBoRi"
}
```

<a id='comment:5'></a>
maybe, I did not try (just read the docs):
http://docs.python.org/install/#inst-config-files

create system distutils.cfg

```
[global]
no-user-cfg=1
```



---

archive/issue_comments_086096.json:
```json
{
    "body": "<a id='comment:6'></a>\nHi,\nunfortunately, this is a Python 2.7 feature and it does not support no-user-cfg in distutils.cfg :-(\n\nRegards,\n  Alexander",
    "created_at": "2010-07-19T15:11:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86096",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:6'></a>
Hi,
unfortunately, this is a Python 2.7 feature and it does not support no-user-cfg in distutils.cfg :-(

Regards,
  Alexander



---

archive/issue_comments_086097.json:
```json
{
    "body": "patch for sage/spkg/base/sage-env sage/local/bin/sage-env (needs python 2.6.4.p10)",
    "created_at": "2010-07-19T20:46:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86097",
    "user": "https://github.com/alexanderdreyer"
}
```

patch for sage/spkg/base/sage-env sage/local/bin/sage-env (needs python 2.6.4.p10)



---

archive/attachments_012200.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "sage-env.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket9536/sage-env.patch",
    "created_at": "2010-07-19T20:50:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/alexanderdreyer"
}
```



---

archive/issue_comments_086098.json:
```json
{
    "body": "<a id='comment:7'></a>\nHi,\nI backported the handling of setup.py --no-user-cfg from  Python 2.7 to Python 2.6.4 and also added the handling of the environment variable `DISTUTILS_NO_USER_CFG` to python's distutils. \n\nThe new spkg can be found here: \nhttp://sage.math.washington.edu/home/dreyer/suse101/python-2.6.4.p10.spkg\n\nThe last patch adds this variable to `sage-env`.\n\nRegards,\n  Alexander",
    "created_at": "2010-07-19T20:50:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86098",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:7'></a>
Hi,
I backported the handling of setup.py --no-user-cfg from  Python 2.7 to Python 2.6.4 and also added the handling of the environment variable `DISTUTILS_NO_USER_CFG` to python's distutils. 

The new spkg can be found here: 
http://sage.math.washington.edu/home/dreyer/suse101/python-2.6.4.p10.spkg

The last patch adds this variable to `sage-env`.

Regards,
  Alexander



---

archive/issue_events_072108.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2010-07-19T20:50:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9536#event-72108"
}
```



---

archive/issue_events_072109.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2010-07-19T20:50:41Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "milestone": "sage-4.5.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9536#event-72109"
}
```



---

archive/issue_comments_086099.json:
```json
{
    "body": "<a id='comment:8'></a>\nReported upstream:\nhttp://bugs.python.org/issue9309",
    "created_at": "2010-07-19T21:16:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86099",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:8'></a>
Reported upstream:
http://bugs.python.org/issue9309



---

archive/issue_comments_086100.json:
```json
{
    "body": "**Changing upstream** from \"Not yet reported upstream; Will do shortly.\" to \"Reported upstream. Little or no feedback.\".",
    "created_at": "2010-07-19T21:16:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86100",
    "user": "https://github.com/alexanderdreyer"
}
```

**Changing upstream** from "Not yet reported upstream; Will do shortly." to "Reported upstream. Little or no feedback.".



---

archive/issue_comments_086101.json:
```json
{
    "body": "<a id='comment:9'></a>\nMinor update: http://sage.math.washington.edu/home/dreyer/suse101/python-2.6.4.p10.spkg (useful, if the `sage-env` patch is not used)",
    "created_at": "2010-07-20T09:41:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86101",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:9'></a>
Minor update: http://sage.math.washington.edu/home/dreyer/suse101/python-2.6.4.p10.spkg (useful, if the `sage-env` patch is not used)



---

archive/issue_comments_086102.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [AlexanderDreyer](#comment%3A9):\n> Minor update: http://sage.math.washington.edu/home/dreyer/suse101/python-2.6.4.p10.spkg (useful, if the `sage-env` patch is not used)\n\nYou should also create patches/ACKS.txt.diff as a unified diff file. Although its fairly obvious you can recreate that now, that will not be the case if Python source code is updated. \n\nWould a simpler solution not be for sage-env to set this variable and export it? I don't know much about python, so can't review this myself. \n\nDave",
    "created_at": "2010-07-21T11:49:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86102",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:10'></a>
Replying to [AlexanderDreyer](#comment%3A9):
> Minor update: http://sage.math.washington.edu/home/dreyer/suse101/python-2.6.4.p10.spkg (useful, if the `sage-env` patch is not used)

You should also create patches/ACKS.txt.diff as a unified diff file. Although its fairly obvious you can recreate that now, that will not be the case if Python source code is updated. 

Would a simpler solution not be for sage-env to set this variable and export it? I don't know much about python, so can't review this myself. 

Dave



---

archive/issue_comments_086103.json:
```json
{
    "body": "<a id='comment:11'></a>\nMaybe a misunderstanding: the patch of python is necessary  to fix that issue anyway. (This first variant didn't work, if the environment variable was *not* set.)",
    "created_at": "2010-07-21T15:45:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86103",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:11'></a>
Maybe a misunderstanding: the patch of python is necessary  to fix that issue anyway. (This first variant didn't work, if the environment variable was *not* set.)



---

archive/attachments_012201.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "python-2.6.4.p10.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket9536/python-2.6.4.p10.patch",
    "created_at": "2010-07-21T15:58:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/alexanderdreyer"
}
```



---

archive/issue_comments_086104.json:
```json
{
    "body": "Adding handling of environment variable DISTUTILS_NO_USER_CFG to python's distutils",
    "created_at": "2010-07-21T15:58:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86104",
    "user": "https://github.com/alexanderdreyer"
}
```

Adding handling of environment variable DISTUTILS_NO_USER_CFG to python's distutils



---

archive/issue_comments_086105.json:
```json
{
    "body": "<a id='comment:12'></a>\nI've added ACKS.txt.patch to the spkg.",
    "created_at": "2010-07-21T16:03:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86105",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:12'></a>
I've added ACKS.txt.patch to the spkg.



---

archive/issue_events_072110.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2010-07-29T14:02:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "label": "component: algebra",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9536#event-72110"
}
```



---

archive/issue_events_072111.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2010-07-29T14:02:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "label": "component: build",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9536#event-72111"
}
```



---

archive/issue_comments_086106.json:
```json
{
    "body": "<a id='comment:14'></a>\nThe python community does not like the idea of adding an environment variable, see:\nhttp://bugs.python.org/issue9309",
    "created_at": "2010-09-30T07:23:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86106",
    "user": "https://github.com/alexanderdreyer"
}
```

<a id='comment:14'></a>
The python community does not like the idea of adding an environment variable, see:
http://bugs.python.org/issue9309



---

archive/issue_comments_086107.json:
```json
{
    "body": "**Changing upstream** from \"Reported upstream. Little or no feedback.\" to \"Reported upstream. Developers deny it's a bug.\".",
    "created_at": "2010-09-30T08:12:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86107",
    "user": "https://github.com/alexanderdreyer"
}
```

**Changing upstream** from "Reported upstream. Little or no feedback." to "Reported upstream. Developers deny it's a bug.".



---

archive/issue_comments_086108.json:
```json
{
    "body": "<a id='comment:16'></a>\nPlease fill in your real name as Author.",
    "created_at": "2012-07-27T20:42:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86108",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:16'></a>
Please fill in your real name as Author.



---

archive/issue_events_072112.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "milestone": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9536#event-72112"
}
```



---

archive/issue_events_072113.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9536#event-72113"
}
```



---

archive/issue_events_072114.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "milestone": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9536#event-72114"
}
```



---

archive/issue_events_072115.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9536#event-72115"
}
```



---

archive/issue_events_072116.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9536#event-72116"
}
```



---

archive/issue_events_072117.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9536#event-72117"
}
```



---

archive/issue_events_072118.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9536#event-72118"
}
```



---

archive/issue_events_072119.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9536#event-72119"
}
```



---

archive/issue_events_072120.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2015-05-29T02:20:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9536#event-72120"
}
```



---

archive/issue_events_072121.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2015-05-29T02:20:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9536#event-72121"
}
```



---

archive/issue_comments_086109.json:
```json
{
    "body": "<a id='comment:21'></a>\nNeeds a branch.  And we have updated Python.  And probably other reasons it isn't ready yet.  (Or conceivably has been solved in the meantime?)",
    "created_at": "2015-05-29T02:20:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86109",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:21'></a>
Needs a branch.  And we have updated Python.  And probably other reasons it isn't ready yet.  (Or conceivably has been solved in the meantime?)



---

archive/issue_events_072122.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-10-31T05:38:11Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9536#event-72122"
}
```



---

archive/issue_events_072123.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-10-31T05:38:11Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "milestone": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9536#event-72123"
}
```



---

archive/issue_comments_086110.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -5,3 +5,20 @@\n \n Regards,\n   Alexander Dreyer\n+\n+......\n+\n+Update for Sage 7.5. The problem reported on this ancient ticket is still present and affects\n+- sagelib, \n+- packages that are installed directly using `setup.py`\n+- packages that are installed using pip.\n+\n+It can be tested by creating the following `~/.pydistutils.cfg`:\n+\n+```\n+[install]\n+root=/does-not-exist\n+```\n+\n+\n+\n``````\n",
    "created_at": "2016-10-31T05:38:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86110",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -5,3 +5,20 @@
 
 Regards,
   Alexander Dreyer
+
+......
+
+Update for Sage 7.5. The problem reported on this ancient ticket is still present and affects
+- sagelib, 
+- packages that are installed directly using `setup.py`
+- packages that are installed using pip.
+
+It can be tested by creating the following `~/.pydistutils.cfg`:
+
+```
+[install]
+root=/does-not-exist
+```
+
+
+
``````




---

archive/issue_comments_086111.json:
```json
{
    "body": "**Branch:** [u/mkoeppe/python_setup_py_picks_prefix_from____pydistutils_cfg](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/python_setup_py_picks_prefix_from____pydistutils_cfg)",
    "created_at": "2016-10-31T06:23:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86111",
    "user": "https://github.com/mkoeppe"
}
```

**Branch:** [u/mkoeppe/python_setup_py_picks_prefix_from____pydistutils_cfg](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/python_setup_py_picks_prefix_from____pydistutils_cfg)



---

archive/issue_comments_086112.json:
```json
{
    "body": "<a id='comment:24'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6dcaebb5f95abdc78cce729bcced7dc96ee5cb1f\">6dcaebb</a></td><td><code>Use 'pip --isolated' and 'setup.py --no-user-cfg'</code></td></tr></table>\n",
    "created_at": "2016-10-31T06:33:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86112",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:24'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6dcaebb5f95abdc78cce729bcced7dc96ee5cb1f">6dcaebb</a></td><td><code>Use 'pip --isolated' and 'setup.py --no-user-cfg'</code></td></tr></table>




---

archive/issue_comments_086113.json:
```json
{
    "body": "**Commit:** [6dcaebb5f95abdc78cce729bcced7dc96ee5cb1f](https://github.com/sagemath/sagetrac-mirror/commit/6dcaebb5f95abdc78cce729bcced7dc96ee5cb1f)",
    "created_at": "2016-10-31T06:33:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86113",
    "user": "https://github.com/mkoeppe"
}
```

**Commit:** [6dcaebb5f95abdc78cce729bcced7dc96ee5cb1f](https://github.com/sagemath/sagetrac-mirror/commit/6dcaebb5f95abdc78cce729bcced7dc96ee5cb1f)



---

archive/issue_events_072124.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-10-31T06:33:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9536#event-72124"
}
```



---

archive/issue_events_072125.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-10-31T06:33:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9536#event-72125"
}
```



---

archive/issue_comments_086114.json:
```json
{
    "body": "**Author:** Matthias Koeppe",
    "created_at": "2016-10-31T06:33:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86114",
    "user": "https://github.com/mkoeppe"
}
```

**Author:** Matthias Koeppe



---

archive/issue_comments_086115.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -20,5 +20,9 @@\n root=/does-not-exist\n ```\n \n+The patch on the ticket uses \n+- `pip --isolated` and \n+- `setup.py --no-user-cfg`\n \n+Note there appear to be some issues regarding these option with early versions of Python 3.x: https://github.com/pypa/pip/issues/3509\n \n``````\n",
    "created_at": "2016-10-31T06:33:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86115",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -20,5 +20,9 @@
 root=/does-not-exist
 ```
 
+The patch on the ticket uses 
+- `pip --isolated` and 
+- `setup.py --no-user-cfg`
 
+Note there appear to be some issues regarding these option with early versions of Python 3.x: https://github.com/pypa/pip/issues/3509
 
``````




---

archive/issue_events_072126.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-11-07T13:29:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9536#event-72126"
}
```



---

archive/issue_events_072127.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-11-07T13:29:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9536#event-72127"
}
```



---

archive/issue_comments_086116.json:
```json
{
    "body": "**Reviewer:** Erik Bray",
    "created_at": "2016-11-07T13:29:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86116",
    "user": "https://github.com/embray"
}
```

**Reviewer:** Erik Bray



---

archive/issue_comments_086117.json:
```json
{
    "body": "<a id='comment:25'></a>\nThis looks like the right approach, thanks.",
    "created_at": "2016-11-07T13:29:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86117",
    "user": "https://github.com/embray"
}
```

<a id='comment:25'></a>
This looks like the right approach, thanks.



---

archive/issue_events_072128.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-11-08T23:42:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9536#event-72128"
}
```



---

archive/issue_events_072129.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-11-08T23:42:27Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9536#event-72129"
}
```



---

archive/issue_comments_086118.json:
```json
{
    "body": "**Changing branch** from \"[u/mkoeppe/python_setup_py_picks_prefix_from____pydistutils_cfg](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/python_setup_py_picks_prefix_from____pydistutils_cfg)\" to \"[6dcaebb5f95abdc78cce729bcced7dc96ee5cb1f](https://github.com/sagemath/sagetrac-mirror/commit/6dcaebb5f95abdc78cce729bcced7dc96ee5cb1f)\".",
    "created_at": "2016-11-08T23:42:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86118",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/mkoeppe/python_setup_py_picks_prefix_from____pydistutils_cfg](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/python_setup_py_picks_prefix_from____pydistutils_cfg)" to "[6dcaebb5f95abdc78cce729bcced7dc96ee5cb1f](https://github.com/sagemath/sagetrac-mirror/commit/6dcaebb5f95abdc78cce729bcced7dc96ee5cb1f)".



---

archive/issue_comments_086119.json:
```json
{
    "body": "<a id='comment:27'></a>\nPrevents pyzmq from building...",
    "created_at": "2016-11-09T20:47:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86119",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:27'></a>
Prevents pyzmq from building...



---

archive/issue_comments_086120.json:
```json
{
    "body": "**Changing commit** from \"[6dcaebb5f95abdc78cce729bcced7dc96ee5cb1f](https://github.com/sagemath/sagetrac-mirror/commit/6dcaebb5f95abdc78cce729bcced7dc96ee5cb1f)\" to \"\".",
    "created_at": "2016-11-09T20:47:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86120",
    "user": "https://github.com/vbraun"
}
```

**Changing commit** from "[6dcaebb5f95abdc78cce729bcced7dc96ee5cb1f](https://github.com/sagemath/sagetrac-mirror/commit/6dcaebb5f95abdc78cce729bcced7dc96ee5cb1f)" to "".



---

archive/issue_comments_086121.json:
```json
{
    "body": "<a id='comment:28'></a>\n\n```\n  Source in /tmp/pip-mTg5Xg-build has version 16.0.0, which satisfies requirement pyzmq==16.0.0 from file:///mnt/disk/home/release/Sage/local/var/tmp/sage/build/pyzmq-16.0.0/src\nInstalling collected packages: pyzmq\n  Running setup.py install for pyzmq: started\n    Running command /mnt/disk/home/release/Sage/local/bin/python -u -c \"import setuptools, tokenize;__file__='/tmp/pip-mTg5Xg-build/setup.py';exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('\\r\\n', '\\n'), __file__, 'exec'))\" configure --zmq=/mnt/disk/home/release/Sage/local --no-user-cfg install --record /tmp/pip-o79sR3-record/install-record.txt --single-version-externally-managed --compile\n    running configure\n    error: error in command line: command 'Configure' has no such option 'no_user_cfg'\n    Running setup.py install for pyzmq: finished with status 'error'\nCleaning up...\n  Removing source in /tmp/pip-mTg5Xg-build\nCommand \"/mnt/disk/home/release/Sage/local/bin/python -u -c \"import setuptools, tokenize;__file__='/tmp/pip-mTg5Xg-build/setup.py';exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('\\r\\n', '\\n'), __file__, 'exec'))\" configure --zmq=/mnt/disk/home/release/Sage/local --no-user-cfg install --record /tmp/pip-o79sR3-record/install-record.txt --single-version-externally-managed --compile\" failed with error code 1 in /tmp/pip-mTg5Xg-build/\nException information:\nTraceback (most recent call last):\n  File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pip/basecommand.py\", line 215, in main\n    status = self.run(options, args)\n  File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pip/commands/install.py\", line 317, in run\n    prefix=options.prefix_path,\n  File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pip/req/req_set.py\", line 742, in install\n    **kwargs\n  File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pip/req/req_install.py\", line 880, in install\n    spinner=spinner,\n  File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pip/utils/__init__.py\", line 718, in call_subprocess\n    % (command_desc, proc.returncode, cwd))\nInstallationError: Command \"/mnt/disk/home/release/Sage/local/bin/python -u -c \"import setuptools, tokenize;__file__='/tmp/pip-mTg5Xg-build/setup.py';exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('\\r\\n', '\\n'), __file__, 'exec'))\" configure --zmq=/mnt/disk/home/release/Sage/local --no-user-cfg install --record /tmp/pip-o79sR3-record/install-record.txt --single-version-externally-managed --compile\" failed with error code 1 in /tmp/pip-mTg5Xg-build/\n```",
    "created_at": "2016-11-09T20:48:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86121",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:28'></a>

```
  Source in /tmp/pip-mTg5Xg-build has version 16.0.0, which satisfies requirement pyzmq==16.0.0 from file:///mnt/disk/home/release/Sage/local/var/tmp/sage/build/pyzmq-16.0.0/src
Installing collected packages: pyzmq
  Running setup.py install for pyzmq: started
    Running command /mnt/disk/home/release/Sage/local/bin/python -u -c "import setuptools, tokenize;__file__='/tmp/pip-mTg5Xg-build/setup.py';exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" configure --zmq=/mnt/disk/home/release/Sage/local --no-user-cfg install --record /tmp/pip-o79sR3-record/install-record.txt --single-version-externally-managed --compile
    running configure
    error: error in command line: command 'Configure' has no such option 'no_user_cfg'
    Running setup.py install for pyzmq: finished with status 'error'
Cleaning up...
  Removing source in /tmp/pip-mTg5Xg-build
Command "/mnt/disk/home/release/Sage/local/bin/python -u -c "import setuptools, tokenize;__file__='/tmp/pip-mTg5Xg-build/setup.py';exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" configure --zmq=/mnt/disk/home/release/Sage/local --no-user-cfg install --record /tmp/pip-o79sR3-record/install-record.txt --single-version-externally-managed --compile" failed with error code 1 in /tmp/pip-mTg5Xg-build/
Exception information:
Traceback (most recent call last):
  File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pip/basecommand.py", line 215, in main
    status = self.run(options, args)
  File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pip/commands/install.py", line 317, in run
    prefix=options.prefix_path,
  File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pip/req/req_set.py", line 742, in install
    **kwargs
  File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pip/req/req_install.py", line 880, in install
    spinner=spinner,
  File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pip/utils/__init__.py", line 718, in call_subprocess
    % (command_desc, proc.returncode, cwd))
InstallationError: Command "/mnt/disk/home/release/Sage/local/bin/python -u -c "import setuptools, tokenize;__file__='/tmp/pip-mTg5Xg-build/setup.py';exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" configure --zmq=/mnt/disk/home/release/Sage/local --no-user-cfg install --record /tmp/pip-o79sR3-record/install-record.txt --single-version-externally-managed --compile" failed with error code 1 in /tmp/pip-mTg5Xg-build/
```



---

archive/issue_comments_086122.json:
```json
{
    "body": "<a id='comment:29'></a>\nI've created an upstream issue for this:\n https://github.com/zeromq/pyzmq/issues/937",
    "created_at": "2016-11-09T21:55:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86122",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:29'></a>
I've created an upstream issue for this:
 https://github.com/zeromq/pyzmq/issues/937



---

archive/issue_comments_086123.json:
```json
{
    "body": "<a id='comment:30'></a>\nThat's annoying.  For now we should probably remove pip install from pyzmq.",
    "created_at": "2016-11-10T11:42:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86123",
    "user": "https://github.com/embray"
}
```

<a id='comment:30'></a>
That's annoying.  For now we should probably remove pip install from pyzmq.



---

archive/issue_comments_086124.json:
```json
{
    "body": "**Dependencies:** #21835",
    "created_at": "2016-11-10T18:11:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86124",
    "user": "https://github.com/mkoeppe"
}
```

**Dependencies:** #21835



---

archive/issue_comments_086125.json:
```json
{
    "body": "<a id='comment:31'></a>\nUpstream pyzmq reports that it works with pip 9.0.1, setuptools 28.8.0.\n\nLet's try with upgrading these packages. #21835 does the upgrade of pip to 9.0.0...",
    "created_at": "2016-11-10T18:11:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86125",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:31'></a>
Upstream pyzmq reports that it works with pip 9.0.1, setuptools 28.8.0.

Let's try with upgrading these packages. #21835 does the upgrade of pip to 9.0.0...



---

archive/issue_comments_086126.json:
```json
{
    "body": "<a id='comment:32'></a>\nUpgrading setuptools to 28.8.0 does not fix the pyzmq install.\n\nI'll wait for the pip upgrade.",
    "created_at": "2016-11-10T18:56:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86126",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:32'></a>
Upgrading setuptools to 28.8.0 does not fix the pyzmq install.

I'll wait for the pip upgrade.



---

archive/issue_comments_086127.json:
```json
{
    "body": "**Changing branch** from \"[6dcaebb5f95abdc78cce729bcced7dc96ee5cb1f](https://github.com/sagemath/sagetrac-mirror/commit/6dcaebb5f95abdc78cce729bcced7dc96ee5cb1f)\" to \"[u/mkoeppe/6dcaebb5f95abdc78cce729bcced7dc96ee5cb1f](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/6dcaebb5f95abdc78cce729bcced7dc96ee5cb1f)\".",
    "created_at": "2016-11-10T22:03:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86127",
    "user": "https://github.com/mkoeppe"
}
```

**Changing branch** from "[6dcaebb5f95abdc78cce729bcced7dc96ee5cb1f](https://github.com/sagemath/sagetrac-mirror/commit/6dcaebb5f95abdc78cce729bcced7dc96ee5cb1f)" to "[u/mkoeppe/6dcaebb5f95abdc78cce729bcced7dc96ee5cb1f](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/6dcaebb5f95abdc78cce729bcced7dc96ee5cb1f)".



---

archive/issue_comments_086128.json:
```json
{
    "body": "<a id='comment:34'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bf1b13041905472da8dc3fd25426ea2f64c2129a\">bf1b130</a></td><td><code>Use 'pip --isolated' and 'setup.py --no-user-cfg'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c21829914692175177a5a66775c015719fd450fd\">c218299</a></td><td><code>pyzmq: Fix pip install command line</code></td></tr></table>\n",
    "created_at": "2016-11-10T22:04:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86128",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bf1b13041905472da8dc3fd25426ea2f64c2129a">bf1b130</a></td><td><code>Use 'pip --isolated' and 'setup.py --no-user-cfg'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c21829914692175177a5a66775c015719fd450fd">c218299</a></td><td><code>pyzmq: Fix pip install command line</code></td></tr></table>




---

archive/issue_comments_086129.json:
```json
{
    "body": "**Commit:** [c21829914692175177a5a66775c015719fd450fd](https://github.com/sagemath/sagetrac-mirror/commit/c21829914692175177a5a66775c015719fd450fd)",
    "created_at": "2016-11-10T22:04:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86129",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Commit:** [c21829914692175177a5a66775c015719fd450fd](https://github.com/sagemath/sagetrac-mirror/commit/c21829914692175177a5a66775c015719fd450fd)



---

archive/issue_comments_086130.json:
```json
{
    "body": "<a id='comment:35'></a>\nHere's a fix for our `pyzmq` `spkg-install`, with help from upstream.",
    "created_at": "2016-11-11T03:06:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86130",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:35'></a>
Here's a fix for our `pyzmq` `spkg-install`, with help from upstream.



---

archive/issue_events_072130.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-11-11T03:06:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9536#event-72130"
}
```



---

archive/issue_comments_086131.json:
```json
{
    "body": "**Changing dependencies** from \"#21835\" to \"\".",
    "created_at": "2016-11-11T03:12:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86131",
    "user": "https://github.com/mkoeppe"
}
```

**Changing dependencies** from "#21835" to "".



---

archive/issue_comments_086132.json:
```json
{
    "body": "<a id='comment:37'></a>\nJust a comment: it would make sense to use `$PIP_INSTALL` for a few more packages where no extra options are needed: `fpylll`, `gambit`, `sagenb`, `sagetex`.",
    "created_at": "2016-11-11T16:39:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86132",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:37'></a>
Just a comment: it would make sense to use `$PIP_INSTALL` for a few more packages where no extra options are needed: `fpylll`, `gambit`, `sagenb`, `sagetex`.



---

archive/issue_comments_086133.json:
```json
{
    "body": "<a id='comment:38'></a>\nI agree, but that should be on a different ticket. I've created #21864 for this.",
    "created_at": "2016-11-11T19:53:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86133",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:38'></a>
I agree, but that should be on a different ticket. I've created #21864 for this.



---

archive/issue_comments_086134.json:
```json
{
    "body": "<a id='comment:39'></a>\nNeeds review.",
    "created_at": "2016-11-15T01:54:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86134",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:39'></a>
Needs review.



---

archive/issue_comments_086135.json:
```json
{
    "body": "<a id='comment:40'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1ea8221f665cf3e3815b7cff7f9971aba8c9bf9c\">1ea8221</a></td><td><code>Use 'pip --isolated' and 'setup.py --no-user-cfg'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/375faba4699c44e2be0ecceddfbca29de2770f85\">375faba</a></td><td><code>pyzmq: Fix pip install command line</code></td></tr></table>\n",
    "created_at": "2016-12-29T01:07:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86135",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:40'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1ea8221f665cf3e3815b7cff7f9971aba8c9bf9c">1ea8221</a></td><td><code>Use 'pip --isolated' and 'setup.py --no-user-cfg'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/375faba4699c44e2be0ecceddfbca29de2770f85">375faba</a></td><td><code>pyzmq: Fix pip install command line</code></td></tr></table>




---

archive/issue_comments_086136.json:
```json
{
    "body": "**Changing commit** from \"[c21829914692175177a5a66775c015719fd450fd](https://github.com/sagemath/sagetrac-mirror/commit/c21829914692175177a5a66775c015719fd450fd)\" to \"[375faba4699c44e2be0ecceddfbca29de2770f85](https://github.com/sagemath/sagetrac-mirror/commit/375faba4699c44e2be0ecceddfbca29de2770f85)\".",
    "created_at": "2016-12-29T01:07:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86136",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[c21829914692175177a5a66775c015719fd450fd](https://github.com/sagemath/sagetrac-mirror/commit/c21829914692175177a5a66775c015719fd450fd)" to "[375faba4699c44e2be0ecceddfbca29de2770f85](https://github.com/sagemath/sagetrac-mirror/commit/375faba4699c44e2be0ecceddfbca29de2770f85)".



---

archive/issue_events_072131.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-12-29T01:08:30Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "milestone": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9536#event-72131"
}
```



---

archive/issue_events_072132.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-12-29T01:08:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "milestone": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9536#event-72132"
}
```



---

archive/issue_comments_086137.json:
```json
{
    "body": "<a id='comment:41'></a>\nRebased, needs review.",
    "created_at": "2016-12-29T01:08:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86137",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:41'></a>
Rebased, needs review.



---

archive/issue_comments_086138.json:
```json
{
    "body": "<a id='comment:42'></a>\nping?",
    "created_at": "2017-01-16T18:35:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86138",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:42'></a>
ping?



---

archive/issue_comments_086139.json:
```json
{
    "body": "<a id='comment:43'></a>\nThe issue with `--global-option` and `--no-user-cfg` still seems odd to me. I think that should be considered a bug in pip.  But I guess there's nothing to be done for now.",
    "created_at": "2017-01-17T12:06:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86139",
    "user": "https://github.com/embray"
}
```

<a id='comment:43'></a>
The issue with `--global-option` and `--no-user-cfg` still seems odd to me. I think that should be considered a bug in pip.  But I guess there's nothing to be done for now.



---

archive/issue_events_072133.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-01-17T12:06:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9536#event-72133"
}
```



---

archive/issue_events_072134.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-01-17T12:06:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9536#event-72134"
}
```



---

archive/issue_events_072135.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-01-21T16:35:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9536#event-72135"
}
```



---

archive/issue_events_072136.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-01-21T16:35:21Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9536#event-72136"
}
```



---

archive/issue_comments_086140.json:
```json
{
    "body": "**Changing branch** from \"[u/mkoeppe/6dcaebb5f95abdc78cce729bcced7dc96ee5cb1f](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/6dcaebb5f95abdc78cce729bcced7dc96ee5cb1f)\" to \"[375faba4699c44e2be0ecceddfbca29de2770f85](https://github.com/sagemath/sagetrac-mirror/commit/375faba4699c44e2be0ecceddfbca29de2770f85)\".",
    "created_at": "2017-01-21T16:35:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9536#issuecomment-86140",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/mkoeppe/6dcaebb5f95abdc78cce729bcced7dc96ee5cb1f](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/6dcaebb5f95abdc78cce729bcced7dc96ee5cb1f)" to "[375faba4699c44e2be0ecceddfbca29de2770f85](https://github.com/sagemath/sagetrac-mirror/commit/375faba4699c44e2be0ecceddfbca29de2770f85)".
