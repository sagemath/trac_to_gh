# Issue 9232: jmol on commandline broken

archive/issues_009232.json:
```json
{
    "body": "I can't see Graphics3d objects on the command line. For example, \n\n```\nsage: sphere()\nsage: \n```\nThe command returns without starting jmol or producing any other graphical output.\n\nStrangely enough, I can start jmol from the sage command line:\n\n```\n----------------------------------------------------------------------\n| Sage Version 4.4.3, Release Date: 2010-06-04                       |\n| Type notebook() for the GUI, and license() for information.        |\n----------------------------------------------------------------------\nsage: !jmol\nsplash_image=jar:file:/home/vbraun/opt/sage-hg/local/lib/python2.6/site-packages/sagenb-0.8-py2.6.egg/sagenb/data/jmol/Jmol.jar!/org/openscience/jmol/images/Jmol_splash.jpg\nhistory file is /home/vbraun/.jmol/history\nusing Smarter Model Adapter\n(C) 2008 Jmol Development\nJmol Version 11.6.16  2008-11-24 13:39\njava.vendor:Sun Microsystems Inc.\njava.version:1.6.0_18\nos.name:Linux\nmemory:9.8/21.1\nuseCommandThread: false\nUser macros dir: /home/vbraun/.jmol/macros\n       exists: false\n  isDirectory: false\n```\n\nThe following also works and shows a tachyon-generated plot:\n\n```\nsphere(viewer='tachyon')\n```\n\nMore verbosity:\n\n```\nsage: sphere(verbosity=99)\nTraceback (most recent call last):\n  File \"/home/vbraun/Sage/sage/local/bin/sage-pypkg-location\", line 3, in <module>\n    from pkg_resources import Requirement, working_set\nzipimport.ZipImportError: can't decompress data; zlib not available\nJmol.jar not found\n```\n\nFor the record, I'm running Fedora 13 x86_64\n\n---\n\nApply [attachment:trac_9232_call_jmol_correctly.patch] and [attachment:trac_9232-lighting.patch].\n\n**Assignee:** @gutow\n\n**CC:**  @kcrisman @jasongrout @jdemeyer\n\n**Resolution:** fixed\n\n**Author:** Jonathan Gutow, Volker Braun\n\n**Reviewer:** Jason Grout, Karl-Dieter Crisman, Volker Braun\n\n**Merged:** sage-4.7.alpha4\n\nIssue created by migration from https://trac.sagemath.org/ticket/9232\n\n",
    "closed_at": "2011-04-07T13:48:29Z",
    "created_at": "2010-06-13T20:57:16Z",
    "labels": [
        "component: graphics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.7",
    "title": "jmol on commandline broken",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/9232",
    "user": "https://github.com/vbraun"
}
```
I can't see Graphics3d objects on the command line. For example, 

```
sage: sphere()
sage: 
```
The command returns without starting jmol or producing any other graphical output.

Strangely enough, I can start jmol from the sage command line:

```
----------------------------------------------------------------------
| Sage Version 4.4.3, Release Date: 2010-06-04                       |
| Type notebook() for the GUI, and license() for information.        |
----------------------------------------------------------------------
sage: !jmol
splash_image=jar:file:/home/vbraun/opt/sage-hg/local/lib/python2.6/site-packages/sagenb-0.8-py2.6.egg/sagenb/data/jmol/Jmol.jar!/org/openscience/jmol/images/Jmol_splash.jpg
history file is /home/vbraun/.jmol/history
using Smarter Model Adapter
(C) 2008 Jmol Development
Jmol Version 11.6.16  2008-11-24 13:39
java.vendor:Sun Microsystems Inc.
java.version:1.6.0_18
os.name:Linux
memory:9.8/21.1
useCommandThread: false
User macros dir: /home/vbraun/.jmol/macros
       exists: false
  isDirectory: false
```

The following also works and shows a tachyon-generated plot:

```
sphere(viewer='tachyon')
```

More verbosity:

```
sage: sphere(verbosity=99)
Traceback (most recent call last):
  File "/home/vbraun/Sage/sage/local/bin/sage-pypkg-location", line 3, in <module>
    from pkg_resources import Requirement, working_set
zipimport.ZipImportError: can't decompress data; zlib not available
Jmol.jar not found
```

For the record, I'm running Fedora 13 x86_64

---

Apply [attachment:trac_9232_call_jmol_correctly.patch] and [attachment:trac_9232-lighting.patch].

**Assignee:** @gutow

**CC:**  @kcrisman @jasongrout @jdemeyer

**Resolution:** fixed

**Author:** Jonathan Gutow, Volker Braun

**Reviewer:** Jason Grout, Karl-Dieter Crisman, Volker Braun

**Merged:** sage-4.7.alpha4

Issue created by migration from https://trac.sagemath.org/ticket/9232





---

archive/issue_comments_109526.json:
```json
{
    "body": "<a id='comment:1'></a>\nDoes it work if you install the new version of Jmol?  See trac # 9238.  I think this broke when the notebook was put inside an egg.  I took that into account with the new version of Jmol.",
    "created_at": "2010-07-14T22:15:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109526",
    "user": "https://github.com/gutow"
}
```

<a id='comment:1'></a>
Does it work if you install the new version of Jmol?  See trac # 9238.  I think this broke when the notebook was put inside an egg.  I took that into account with the new version of Jmol.



---

archive/issue_comments_109527.json:
```json
{
    "body": "<a id='comment:2'></a>\nI installed http://www.uwosh.edu/faculty_staff/gutow/Jmol_for_SageNoteBook-1.1.spkg (#9238) but it did not change anything. The verbose output above indicates that Jmol.jar is never opened, so it is not particularly surprising that an updated Jmol spkg has no effect.",
    "created_at": "2010-07-14T23:25:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109527",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:2'></a>
I installed http://www.uwosh.edu/faculty_staff/gutow/Jmol_for_SageNoteBook-1.1.spkg (#9238) but it did not change anything. The verbose output above indicates that Jmol.jar is never opened, so it is not particularly surprising that an updated Jmol spkg has no effect.



---

archive/issue_comments_109528.json:
```json
{
    "body": "<a id='comment:3'></a>\nIt was worth a try as that still could have been a hidden Jmol.jar file not found error.  This is different than the problem I addressed.  Sorry.  I would guess it is a problem with the \"sphere\" command.  Does it work with a simple plot3d command?  I've tested the 1.1 version on MacOS and Ubuntu and it seems to work for me.\nReplying to [vbraun](#comment%3A2):\n> I installed http://www.uwosh.edu/faculty_staff/gutow/Jmol_for_SageNoteBook-1.1.spkg (#9238) but it did not change anything. The verbose output above indicates that Jmol.jar is never opened, so it is not particularly surprising that an updated Jmol spkg has no effect.\n",
    "created_at": "2010-07-15T00:08:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109528",
    "user": "https://github.com/gutow"
}
```

<a id='comment:3'></a>
It was worth a try as that still could have been a hidden Jmol.jar file not found error.  This is different than the problem I addressed.  Sorry.  I would guess it is a problem with the "sphere" command.  Does it work with a simple plot3d command?  I've tested the 1.1 version on MacOS and Ubuntu and it seems to work for me.
Replying to [vbraun](#comment%3A2):
> I installed http://www.uwosh.edu/faculty_staff/gutow/Jmol_for_SageNoteBook-1.1.spkg (#9238) but it did not change anything. The verbose output above indicates that Jmol.jar is never opened, so it is not particularly surprising that an updated Jmol spkg has no effect.




---

archive/issue_comments_109529.json:
```json
{
    "body": "<a id='comment:4'></a>\nI only used the `sphere()` command because it is the fastest way to generate 3d graphics. Other 3d plotting commands fail in the same way:\n\n```\nsage: plot3d(lambda x, y: x^2 + y^2, (-2,2), (-2,2))  # note: no output\nsage: plot3d(lambda x, y: x^2 + y^2, (-2,2), (-2,2), verbosity=99)\nTraceback (most recent call last):\n  File \"/home/vbraun/Sage/sage/local/bin/sage-pypkg-location\", line 3, in <module>\n    from pkg_resources import Requirement, working_set\nzipimport.ZipImportError: can't decompress data; zlib not available\nJmol.jar not found\n```",
    "created_at": "2010-07-15T00:54:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109529",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:4'></a>
I only used the `sphere()` command because it is the fastest way to generate 3d graphics. Other 3d plotting commands fail in the same way:

```
sage: plot3d(lambda x, y: x^2 + y^2, (-2,2), (-2,2))  # note: no output
sage: plot3d(lambda x, y: x^2 + y^2, (-2,2), (-2,2), verbosity=99)
Traceback (most recent call last):
  File "/home/vbraun/Sage/sage/local/bin/sage-pypkg-location", line 3, in <module>
    from pkg_resources import Requirement, working_set
zipimport.ZipImportError: can't decompress data; zlib not available
Jmol.jar not found
```



---

archive/issue_comments_109530.json:
```json
{
    "body": "<a id='comment:5'></a>\nTry installing the Jmol for notebook again.  It looks like the file on my server got corrupted and was missing the Jmol.jar application file as well as some others..Not sure what happened but we've had some power outages and the server may have been rebuilt from backups.  I've uploaded a new copy.\n\nBecause the name hasn't changed you will probably have to do some surgery to get it to download and do an install.  You will need to delete any copies of the .spkg (or its uncompressed directory) that you find in any of these subdirectories of your sage install before trying an install.  If you don't get a message about downloading the file you missed something:\nspkg/build\nspkg/installed\nspkg/optional\n\nLet us know if this fixes it.  Sorry for the inconvenience.\nJonathan\nReplying to [vbraun](#comment%3A4):\n> I only used the `sphere()` command because it is the fastest way to generate 3d graphics. Other 3d plotting commands fail in the same way:\n> \n> ```\n> sage: plot3d(lambda x, y: x^2 + y^2, (-2,2), (-2,2))  # note: no output\n> sage: plot3d(lambda x, y: x^2 + y^2, (-2,2), (-2,2), verbosity=99)\n> Traceback (most recent call last):\n>   File \"/home/vbraun/Sage/sage/local/bin/sage-pypkg-location\", line 3, in <module>\n>     from pkg_resources import Requirement, working_set\n> zipimport.ZipImportError: can't decompress data; zlib not available\n> Jmol.jar not found\n> ```\n",
    "created_at": "2010-07-15T03:57:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109530",
    "user": "https://github.com/gutow"
}
```

<a id='comment:5'></a>
Try installing the Jmol for notebook again.  It looks like the file on my server got corrupted and was missing the Jmol.jar application file as well as some others..Not sure what happened but we've had some power outages and the server may have been rebuilt from backups.  I've uploaded a new copy.

Because the name hasn't changed you will probably have to do some surgery to get it to download and do an install.  You will need to delete any copies of the .spkg (or its uncompressed directory) that you find in any of these subdirectories of your sage install before trying an install.  If you don't get a message about downloading the file you missed something:
spkg/build
spkg/installed
spkg/optional

Let us know if this fixes it.  Sorry for the inconvenience.
Jonathan
Replying to [vbraun](#comment%3A4):
> I only used the `sphere()` command because it is the fastest way to generate 3d graphics. Other 3d plotting commands fail in the same way:
> 
> ```
> sage: plot3d(lambda x, y: x^2 + y^2, (-2,2), (-2,2))  # note: no output
> sage: plot3d(lambda x, y: x^2 + y^2, (-2,2), (-2,2), verbosity=99)
> Traceback (most recent call last):
>   File "/home/vbraun/Sage/sage/local/bin/sage-pypkg-location", line 3, in <module>
>     from pkg_resources import Requirement, working_set
> zipimport.ZipImportError: can't decompress data; zlib not available
> Jmol.jar not found
> ```




---

archive/issue_comments_109531.json:
```json
{
    "body": "<a id='comment:6'></a>\nI did a\n\n```\n[vbraun@localhost sage]$ rm ./spkg/optional/Jmol_for_SageNoteBook-1.1.spkg\n[vbraun@localhost sage]$ ./sage -f http://www.uwosh.edu/faculty_staff/gutow/Jmol_for_SageNoteBook-1.1.spkg\n```\nand it re-downloaded the Jmol spkg. Still fails with the same error message.",
    "created_at": "2010-07-15T04:59:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109531",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:6'></a>
I did a

```
[vbraun@localhost sage]$ rm ./spkg/optional/Jmol_for_SageNoteBook-1.1.spkg
[vbraun@localhost sage]$ ./sage -f http://www.uwosh.edu/faculty_staff/gutow/Jmol_for_SageNoteBook-1.1.spkg
```
and it re-downloaded the Jmol spkg. Still fails with the same error message.



---

archive/issue_comments_109532.json:
```json
{
    "body": "<a id='comment:7'></a>\nThere is something special about your system...I've just retested that things work for Sage 4.4.3 on MacOS and Ubuntu Linux.  Let's see if everything actually got installed:\nCan you please post the directory listing (ls -l please) for the following two directories:\n<sage directory>/local/lib/python2.6/site-packages/sagenb-0.8-py2.6.egg/sagenb/data/jmol\nand\n<sage directory>/local/lib/python2.6/site-packages/sagenb-0.8-py2.6.egg/sagenb/data/jmol/appletweb\n\nIf everything is there, I'm mystified.  If everything is not, then something is wrong with the install for your system and the .spkg needs to be fixed.\n\nJonathan\nReplying to [vbraun](#comment%3A6):\n> I did a\n> \n> ```\n> [vbraun@localhost sage]$ rm ./spkg/optional/Jmol_for_SageNoteBook-1.1.spkg\n> [vbraun@localhost sage]$ ./sage -f http://www.uwosh.edu/faculty_staff/gutow/Jmol_for_SageNoteBook-1.1.spkg\n> ```\n> and it re-downloaded the Jmol spkg. Still fails with the same error message.\n\n>",
    "created_at": "2010-07-15T12:42:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109532",
    "user": "https://github.com/gutow"
}
```

<a id='comment:7'></a>
There is something special about your system...I've just retested that things work for Sage 4.4.3 on MacOS and Ubuntu Linux.  Let's see if everything actually got installed:
Can you please post the directory listing (ls -l please) for the following two directories:
<sage directory>/local/lib/python2.6/site-packages/sagenb-0.8-py2.6.egg/sagenb/data/jmol
and
<sage directory>/local/lib/python2.6/site-packages/sagenb-0.8-py2.6.egg/sagenb/data/jmol/appletweb

If everything is there, I'm mystified.  If everything is not, then something is wrong with the install for your system and the .spkg needs to be fixed.

Jonathan
Replying to [vbraun](#comment%3A6):
> I did a
> 
> ```
> [vbraun@localhost sage]$ rm ./spkg/optional/Jmol_for_SageNoteBook-1.1.spkg
> [vbraun@localhost sage]$ ./sage -f http://www.uwosh.edu/faculty_staff/gutow/Jmol_for_SageNoteBook-1.1.spkg
> ```
> and it re-downloaded the Jmol spkg. Still fails with the same error message.

>



---

archive/issue_comments_109533.json:
```json
{
    "body": "<a id='comment:8'></a>\nI saved the `sys.path` within `sage-pypkg-location`, and it reads:\n\n```\n/home/vbraun/opt/sage-4.5.alpha1/local/bin\n/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/setuptools-0.6c9-py2.6.egg\n/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/Twisted-9.0.0-py2.6-linux-x86_64.egg\n/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/ZODB3-3.7.0-py2.6-linux-x86_64.egg\n/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/zdaemon-2.0.0-py2.6.egg\n/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/ZConfig-2.5-py2.6.egg\n/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/zope.testing-3.5.0-py2.6.egg\n/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/zope.proxy-3.4.0-py2.6-linux-x86_64.egg\n/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/Pygments-0.11.1-py2.6.egg\n/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/Jinja-1.2-py2.6-linux-x86_64.egg\n/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/Jinja2-2.1.1-py2.6-linux-x86_64.egg\n/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/Sphinx-0.6.3-py2.6.egg\n/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/SQLAlchemy-0.5.8-py2.6.egg\n/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/pytz-2010h-py2.6.egg\n/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/zope.i18nmessageid-3.5.2-py2.6-linux-x86_64.egg\n/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/zope.event-3.5.0_1-py2.6.egg\n/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/ClientForm-0.2.10-py2.6.egg\n/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/mechanize-0.1.11-py2.6.egg\n/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/zope.interface-3.6.1-py2.6-linux-x86_64.egg\n/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/zope.schema-3.6.3-py2.6.egg\n/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/zope.testbrowser-3.8.1-py2.6.egg\n/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/sagenb-0.8-py2.6.egg\n/home/vbraun/opt/sage-4.5.alpha1\n/home/vbraun/Sage/sage/local/lib/python\n/home/vbraun/Sage/sage/local/lib64/python26.zip\n/home/vbraun/Sage/sage/local/lib64/python2.6\n/home/vbraun/Sage/sage/local/lib64/python2.6/plat-linux2\n/home/vbraun/Sage/sage/local/lib64/python2.6/lib-tk\n/home/vbraun/Sage/sage/local/lib64/python2.6/lib-old\n/home/vbraun/Sage/sage/local/lib64/python2.6/lib-dynload\n/home/vbraun/Sage/sage/local/lib/python2.6/site-packages\n/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/PIL\n```\nBut sage install zlib in\n\n```\n[vbraun@volker-two sage-4.5.alpha1]$ find | grep zlib.so\n./local/lib/python2.6/lib-dynload/zlib.so\n```\nNote: `/lib/`, not `/lib64/`. This explains why zlib cannot be imported. For the record, all libraries are 64-bit on my system.\n\nFrom within Sage, on the other hand, `sys.path` is set appropriately:\n\n```\nsage: '/home/vbraun/Sage/sage/local/lib/python2.6/lib-dynload' in sys.path\nTrue\n```",
    "created_at": "2010-07-15T14:54:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109533",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:8'></a>
I saved the `sys.path` within `sage-pypkg-location`, and it reads:

```
/home/vbraun/opt/sage-4.5.alpha1/local/bin
/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/setuptools-0.6c9-py2.6.egg
/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/Twisted-9.0.0-py2.6-linux-x86_64.egg
/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/ZODB3-3.7.0-py2.6-linux-x86_64.egg
/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/zdaemon-2.0.0-py2.6.egg
/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/ZConfig-2.5-py2.6.egg
/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/zope.testing-3.5.0-py2.6.egg
/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/zope.proxy-3.4.0-py2.6-linux-x86_64.egg
/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/Pygments-0.11.1-py2.6.egg
/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/Jinja-1.2-py2.6-linux-x86_64.egg
/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/Jinja2-2.1.1-py2.6-linux-x86_64.egg
/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/Sphinx-0.6.3-py2.6.egg
/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/SQLAlchemy-0.5.8-py2.6.egg
/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/pytz-2010h-py2.6.egg
/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/zope.i18nmessageid-3.5.2-py2.6-linux-x86_64.egg
/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/zope.event-3.5.0_1-py2.6.egg
/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/ClientForm-0.2.10-py2.6.egg
/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/mechanize-0.1.11-py2.6.egg
/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/zope.interface-3.6.1-py2.6-linux-x86_64.egg
/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/zope.schema-3.6.3-py2.6.egg
/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/zope.testbrowser-3.8.1-py2.6.egg
/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/sagenb-0.8-py2.6.egg
/home/vbraun/opt/sage-4.5.alpha1
/home/vbraun/Sage/sage/local/lib/python
/home/vbraun/Sage/sage/local/lib64/python26.zip
/home/vbraun/Sage/sage/local/lib64/python2.6
/home/vbraun/Sage/sage/local/lib64/python2.6/plat-linux2
/home/vbraun/Sage/sage/local/lib64/python2.6/lib-tk
/home/vbraun/Sage/sage/local/lib64/python2.6/lib-old
/home/vbraun/Sage/sage/local/lib64/python2.6/lib-dynload
/home/vbraun/Sage/sage/local/lib/python2.6/site-packages
/home/vbraun/Sage/sage/local/lib/python2.6/site-packages/PIL
```
But sage install zlib in

```
[vbraun@volker-two sage-4.5.alpha1]$ find | grep zlib.so
./local/lib/python2.6/lib-dynload/zlib.so
```
Note: `/lib/`, not `/lib64/`. This explains why zlib cannot be imported. For the record, all libraries are 64-bit on my system.

From within Sage, on the other hand, `sys.path` is set appropriately:

```
sage: '/home/vbraun/Sage/sage/local/lib/python2.6/lib-dynload' in sys.path
True
```



---

archive/issue_comments_109534.json:
```json
{
    "body": "<a id='comment:9'></a>\nFor the record, creating a symlink $SAGE_ROOT/local/lib64 pointing to $SAGE_ROOT/local/lib works. Another workaround is adding LIBRARY_PATH to DYLD_LIBRARY_PATH in sage-native-execute (from logix/#sage-devel).\n\nI still don't understand the underlying cause, where does python get the incorrect path from?",
    "created_at": "2010-08-05T16:39:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109534",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:9'></a>
For the record, creating a symlink $SAGE_ROOT/local/lib64 pointing to $SAGE_ROOT/local/lib works. Another workaround is adding LIBRARY_PATH to DYLD_LIBRARY_PATH in sage-native-execute (from logix/#sage-devel).

I still don't understand the underlying cause, where does python get the incorrect path from?



---

archive/issue_comments_109535.json:
```json
{
    "body": "<a id='comment:10'></a>\n#10286 is a follow-up which hopefully fixes this, such that this ticket can be closed as a duplicate when #10286 got merged.",
    "created_at": "2010-12-13T15:59:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109535",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:10'></a>
#10286 is a follow-up which hopefully fixes this, such that this ticket can be closed as a duplicate when #10286 got merged.



---

archive/issue_comments_109536.json:
```json
{
    "body": "**Changing assignee** from @jasongrout, @williamstein to @gutow.",
    "created_at": "2011-03-21T13:49:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109536",
    "user": "https://github.com/gutow"
}
```

**Changing assignee** from @jasongrout, @williamstein to @gutow.



---

archive/issue_comments_109537.json:
```json
{
    "body": "**Changing status** from new to needs_work.",
    "created_at": "2011-03-21T13:50:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109537",
    "user": "https://github.com/gutow"
}
```

**Changing status** from new to needs_work.



---

archive/issue_comments_109538.json:
```json
{
    "body": "Attachment [trac_9232_plot3d_base_pyx.patch](tarball://root/attachments/some-uuid/ticket9232/trac_9232_plot3d_base_pyx.patch) by @gutow created at 2011-03-22 14:49:28\n\nplot3d/base.pyx fixes to launch Jmol from cmd line",
    "created_at": "2011-03-22T14:49:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109538",
    "user": "https://github.com/gutow"
}
```

Attachment [trac_9232_plot3d_base_pyx.patch](tarball://root/attachments/some-uuid/ticket9232/trac_9232_plot3d_base_pyx.patch) by @gutow created at 2011-03-22 14:49:28

plot3d/base.pyx fixes to launch Jmol from cmd line



---

archive/issue_comments_109539.json:
```json
{
    "body": "Notebook fixes for launch Jmol from cmd line",
    "created_at": "2011-03-22T14:50:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109539",
    "user": "https://github.com/gutow"
}
```

Notebook fixes for launch Jmol from cmd line



---

archive/issue_comments_109540.json:
```json
{
    "body": "**Reviewer:** Jason Grout, Karl-Dieter Crisman",
    "created_at": "2011-03-22T15:09:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109540",
    "user": "https://github.com/gutow"
}
```

**Reviewer:** Jason Grout, Karl-Dieter Crisman



---

archive/issue_events_027823.json:
```json
{
    "actor": "https://github.com/gutow",
    "created_at": "2011-03-22T15:09:44Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "milestone": "sage-4.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9232#event-27823"
}
```



---

archive/issue_comments_109541.json:
```json
{
    "body": "<a id='comment:13'></a>\nAttachment [trac_9232_notebook_fixes.patch](tarball://root/attachments/some-uuid/ticket9232/trac_9232_notebook_fixes.patch) by @gutow created at 2011-03-22 15:09:44\n\nThe above patches combined with installation of a newer version of Jmol fix this problem for Sage 4.6.2.  To install the new Jmol\n\n```\n./sage -f \"http://www.uwosh.edu/faculty_staff/gutow/Jmol_for_SageNoteBook-1.1.5.spkg\"\n```\n\nNote that my linux and MacOS versions of sage seemed to have slightly different mercurial tracking.  On MacOS you get a warning about the SageMenu.mnu file, when you apply the notebook_fixes patch.  That is OK, the other untracked files are properly added.",
    "created_at": "2011-03-22T15:09:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109541",
    "user": "https://github.com/gutow"
}
```

<a id='comment:13'></a>
Attachment [trac_9232_notebook_fixes.patch](tarball://root/attachments/some-uuid/ticket9232/trac_9232_notebook_fixes.patch) by @gutow created at 2011-03-22 15:09:44

The above patches combined with installation of a newer version of Jmol fix this problem for Sage 4.6.2.  To install the new Jmol

```
./sage -f "http://www.uwosh.edu/faculty_staff/gutow/Jmol_for_SageNoteBook-1.1.5.spkg"
```

Note that my linux and MacOS versions of sage seemed to have slightly different mercurial tracking.  On MacOS you get a warning about the SageMenu.mnu file, when you apply the notebook_fixes patch.  That is OK, the other untracked files are properly added.



---

archive/issue_comments_109542.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2011-03-22T15:09:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109542",
    "user": "https://github.com/gutow"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_109543.json:
```json
{
    "body": "**Author:** Jonathan Gutwo",
    "created_at": "2011-03-22T15:09:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109543",
    "user": "https://github.com/gutow"
}
```

**Author:** Jonathan Gutwo



---

archive/issue_comments_109544.json:
```json
{
    "body": "<a id='comment:14'></a>\nThis will have to be part of a new SageNB package before it can be merged.  See also #9238.",
    "created_at": "2011-03-22T16:10:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109544",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:14'></a>
This will have to be part of a new SageNB package before it can be merged.  See also #9238.



---

archive/issue_comments_109545.json:
```json
{
    "body": "**Changing author** from \"Jonathan Gutwo\" to \"Jonathan Gutow\".",
    "created_at": "2011-03-22T16:10:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109545",
    "user": "https://github.com/kcrisman"
}
```

**Changing author** from "Jonathan Gutwo" to "Jonathan Gutow".



---

archive/issue_comments_109546.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [kcrisman](#comment%3A14):\n> This will have to be part of a new SageNB package before it can be merged.  See also #9238.\n\n\nOK, so what does that involve? Does this mean make a complete .spkg of the sageNB?  Then where do things have to go?  Also don't we need positive reviews first?",
    "created_at": "2011-03-22T16:43:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109546",
    "user": "https://github.com/gutow"
}
```

<a id='comment:15'></a>
Replying to [kcrisman](#comment%3A14):
> This will have to be part of a new SageNB package before it can be merged.  See also #9238.


OK, so what does that involve? Does this mean make a complete .spkg of the sageNB?  Then where do things have to go?  Also don't we need positive reviews first?



---

archive/issue_comments_109547.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [gutow](#comment%3A15):\n> Replying to [kcrisman](#comment%3A14):\n> > This will have to be part of a new SageNB package before it can be merged.  See also #9238.\n\n> \n> OK, so what does that involve? Does this mean make a complete .spkg of the sageNB?  Then where do things have to go?  Also don't we need positive reviews first?\n\nYes, eventually!  This is just for informational purposes to someone coming to the ticket.",
    "created_at": "2011-03-22T16:46:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109547",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:16'></a>
Replying to [gutow](#comment%3A15):
> Replying to [kcrisman](#comment%3A14):
> > This will have to be part of a new SageNB package before it can be merged.  See also #9238.

> 
> OK, so what does that involve? Does this mean make a complete .spkg of the sageNB?  Then where do things have to go?  Also don't we need positive reviews first?

Yes, eventually!  This is just for informational purposes to someone coming to the ticket.



---

archive/issue_comments_109548.json:
```json
{
    "body": "<a id='comment:17'></a>\nGetting bad news:\n\n```\ntar: This does not look like a tar archive\ntar: Skipping to next header\ntar: Archive contains obsolescent base-64 headers\n```",
    "created_at": "2011-03-23T15:35:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109548",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:17'></a>
Getting bad news:

```
tar: This does not look like a tar archive
tar: Skipping to next header
tar: Archive contains obsolescent base-64 headers
```



---

archive/issue_comments_109549.json:
```json
{
    "body": "<a id='comment:18'></a>\nDid you use `./sage -pkg` to create this?  When I did, I got \n\n```\nCreating Sage package Jmol_for_SageNoteBook-1.1.5\n\nCreated package Jmol_for_SageNoteBook-1.1.5.spkg.\n\n    NAME: Jmol_for_SageNoteBook\n VERSION: 1.1.5\n    SIZE: 11.1M\n HG REPO: Error reading repository\nSPKG.txt: Good\n\nPlease test this package using\n```\n\nwhich is actually ok since I don't think you have an HG repo and this is a temporary package for testing.  Then success:\n\n```\nTemporary package directory: /Users/student/Desktop/sage-4.6.2/spkg/build/Jmol_for_SageNoteBook-1.1.5\nreplacing Jmol.js...\nJmol.js replaced.\nremoving Jmol*.jar and license files.\nrm: /Users/student/Desktop/sage-4.6.2/devel/sagenb/sagenb/data/jmol/LICENSE.txt: No such file or directory\ninstalling Jmol.jar and license files\u2026\nNew Jmol*.jar and license files installed.\n\nreal    0m1.051s\nuser    0m0.034s\nsys     0m0.320s\nSuccessfully installed Jmol_for_SageNoteBook-1.1.5\nNow cleaning up tmp files.\nMaking Sage/Python scripts relocatable...\nMaking script relocatable\nFinished installing Jmol_for_SageNoteBook-1.1.5.spkg\n```\n\nThen applying the files is ok until\n\n```\napplying /Users/student/.sage/temp/Dasher_03.local/468/tmp_4.patch\nfile sagenb/data/jmol/appletweb/SageMenu.mnu already exists\n1 out of 1 hunks FAILED -- saving rejects to file sagenb/data/jmol/appletweb/SageMenu.mnu.rej\n```\nProblematic is that then it's rejected?  I guess I'll see what happens... but this error will probably need to be fixed.",
    "created_at": "2011-03-23T15:47:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109549",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:18'></a>
Did you use `./sage -pkg` to create this?  When I did, I got 

```
Creating Sage package Jmol_for_SageNoteBook-1.1.5

Created package Jmol_for_SageNoteBook-1.1.5.spkg.

    NAME: Jmol_for_SageNoteBook
 VERSION: 1.1.5
    SIZE: 11.1M
 HG REPO: Error reading repository
SPKG.txt: Good

Please test this package using
```

which is actually ok since I don't think you have an HG repo and this is a temporary package for testing.  Then success:

```
Temporary package directory: /Users/student/Desktop/sage-4.6.2/spkg/build/Jmol_for_SageNoteBook-1.1.5
replacing Jmol.js...
Jmol.js replaced.
removing Jmol*.jar and license files.
rm: /Users/student/Desktop/sage-4.6.2/devel/sagenb/sagenb/data/jmol/LICENSE.txt: No such file or directory
installing Jmol.jar and license files…
New Jmol*.jar and license files installed.

real    0m1.051s
user    0m0.034s
sys     0m0.320s
Successfully installed Jmol_for_SageNoteBook-1.1.5
Now cleaning up tmp files.
Making Sage/Python scripts relocatable...
Making script relocatable
Finished installing Jmol_for_SageNoteBook-1.1.5.spkg
```

Then applying the files is ok until

```
applying /Users/student/.sage/temp/Dasher_03.local/468/tmp_4.patch
file sagenb/data/jmol/appletweb/SageMenu.mnu already exists
1 out of 1 hunks FAILED -- saving rejects to file sagenb/data/jmol/appletweb/SageMenu.mnu.rej
```
Problematic is that then it's rejected?  I guess I'll see what happens... but this error will probably need to be fixed.



---

archive/issue_comments_109550.json:
```json
{
    "body": "<a id='comment:19'></a>\nStill zapped, probably because of the problem with the menu?\n\nBut then I tried it again, and it worked!  I don't get that.  \n\nI'll try the notebook next.  Okay, works, but I do not see the new stuff for the applet.  I guess that's okay, since that's the other ticket, right?\n\nIs there any way I can tell if the correct menu item is in there?  (Such as something to look for in the menu for the applet?)",
    "created_at": "2011-03-23T16:19:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109550",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:19'></a>
Still zapped, probably because of the problem with the menu?

But then I tried it again, and it worked!  I don't get that.  

I'll try the notebook next.  Okay, works, but I do not see the new stuff for the applet.  I guess that's okay, since that's the other ticket, right?

Is there any way I can tell if the correct menu item is in there?  (Such as something to look for in the menu for the applet?)



---

archive/issue_comments_109551.json:
```json
{
    "body": "<a id='comment:20'></a>\n1. The correct menu is much shorter in the notebook than in the application launched from the command line.\u00a0 The application launched from the command line uses the default menu.\u00a0 I'll look into making them match.\n   1. Apply the patches in #9238 to see the updated notebook Jmol interface.\n   2. The .spkg problem is odd.\u00a0 I've got no errors ever.\u00a0 I just use ./sage -f \"<web address of patch>\".\n   3. The patch with the problem with the .mnu file means redoing it against a 4.6.2 that had the .mnu file in the repo.\u00a0 For some reason the version I got for ubuntu 10.04 lts did not.",
    "created_at": "2011-03-23T17:12:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109551",
    "user": "https://github.com/gutow"
}
```

<a id='comment:20'></a>
1. The correct menu is much shorter in the notebook than in the application launched from the command line.  The application launched from the command line uses the default menu.  I'll look into making them match.
   1. Apply the patches in #9238 to see the updated notebook Jmol interface.
   2. The .spkg problem is odd.  I've got no errors ever.  I just use ./sage -f "<web address of patch>".
   3. The patch with the problem with the .mnu file means redoing it against a 4.6.2 that had the .mnu file in the repo.  For some reason the version I got for ubuntu 10.04 lts did not.



---

archive/issue_comments_109552.json:
```json
{
    "body": "<a id='comment:21'></a>\n>  1. The correct menu is much shorter in the notebook than in the application launched from the command line.\u00a0 The application launched from the command line uses the default menu.\u00a0 I'll look into making them match.\n  \nWell, no need on this ticket!\n\nAs for this, the **first patch only** suffices to fix the command line problem, and the notebook still works right.  \n\nSo I would say that the second patch is *not* relevant to this ticket, esp. given its problems with import (which I am looking into - I think has to do with HG not applying some things correctly because of perceived line endings.  Look at the view of the attachment on this ticket, and look at the lines with `bond100` and `bond150` and note the weirdness there.  It looks like \n\n```\nbond100 | 0.10 \u221a\u00d6 = wireframe .1\n```\ninstead of angstroms like I think it's supposed to\n\n```\nbond100 | 0.10 \u00c5 = wireframe .1\n```\nNo wonder it's not applying, since it's not being interpreted right.  Anyway, not relevant for the ticket.\n\n>  1. Apply the patches in #9238 to see the updated notebook Jmol interface.\n  \nAs I thought - thanks, not relevant for reviewing this.\n\n>  2. The .spkg problem is odd.\u00a0 I've got no errors ever.\u00a0 I just use ./sage -f \"<web address of patch>\".\n  \nYes, that is what should work.  Since this isn't an spkg that would actually ever exist, it's not a problem, I hope.\n\n>  3. The patch with the problem with the .mnu file means redoing it against a 4.6.2 that had the .mnu file in the repo.\u00a0 For some reason the version I got for ubuntu 10.04 lts did not.\n  \nSee above.\n\nI get the following issue as well.\n\n```\nrm: /Users/.../sage-4.7.alpha2-jmol/devel/sagenb/sagenb/data/jmol/LICENSE.txt: No such file or directory\n```\nSo was there not a license before?  Apparently not - I can confirm that in an install that does not have the new Jmol.  So it's not a big deal, but at any rate you didn't have to put that in the script.\n\nOtherwise I think this is ready to go.  It would be nice to have someone on a system where command line plotting did *not* work before to try this.  Volker, du bist ja bei Sage Days 29, oder?  Probierst du es mal aus?",
    "created_at": "2011-03-23T19:50:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109552",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:21'></a>
>  1. The correct menu is much shorter in the notebook than in the application launched from the command line.  The application launched from the command line uses the default menu.  I'll look into making them match.
  
Well, no need on this ticket!

As for this, the **first patch only** suffices to fix the command line problem, and the notebook still works right.  

So I would say that the second patch is *not* relevant to this ticket, esp. given its problems with import (which I am looking into - I think has to do with HG not applying some things correctly because of perceived line endings.  Look at the view of the attachment on this ticket, and look at the lines with `bond100` and `bond150` and note the weirdness there.  It looks like 

```
bond100 | 0.10 √Ö = wireframe .1
```
instead of angstroms like I think it's supposed to

```
bond100 | 0.10 Å = wireframe .1
```
No wonder it's not applying, since it's not being interpreted right.  Anyway, not relevant for the ticket.

>  1. Apply the patches in #9238 to see the updated notebook Jmol interface.
  
As I thought - thanks, not relevant for reviewing this.

>  2. The .spkg problem is odd.  I've got no errors ever.  I just use ./sage -f "<web address of patch>".
  
Yes, that is what should work.  Since this isn't an spkg that would actually ever exist, it's not a problem, I hope.

>  3. The patch with the problem with the .mnu file means redoing it against a 4.6.2 that had the .mnu file in the repo.  For some reason the version I got for ubuntu 10.04 lts did not.
  
See above.

I get the following issue as well.

```
rm: /Users/.../sage-4.7.alpha2-jmol/devel/sagenb/sagenb/data/jmol/LICENSE.txt: No such file or directory
```
So was there not a license before?  Apparently not - I can confirm that in an install that does not have the new Jmol.  So it's not a big deal, but at any rate you didn't have to put that in the script.

Otherwise I think this is ready to go.  It would be nice to have someone on a system where command line plotting did *not* work before to try this.  Volker, du bist ja bei Sage Days 29, oder?  Probierst du es mal aus?



---

archive/issue_comments_109553.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -47,3 +47,8 @@\n ```\n \n For the record, I'm running Fedora 13 x86_64\n+\n+---\n+\n+Install [this spkg](http://www.uwosh.edu/faculty_staff/gutow/Jmol_for_SageNoteBook-1.1.5.spkg) and apply *only* [attachment:trac_9232_plot3d_base_pyx.patch].  \n+\n``````\n",
    "created_at": "2011-03-23T19:50:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109553",
    "user": "https://github.com/kcrisman"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -47,3 +47,8 @@
 ```
 
 For the record, I'm running Fedora 13 x86_64
+
+---
+
+Install [this spkg](http://www.uwosh.edu/faculty_staff/gutow/Jmol_for_SageNoteBook-1.1.5.spkg) and apply *only* [attachment:trac_9232_plot3d_base_pyx.patch].  
+
``````




---

archive/issue_comments_109554.json:
```json
{
    "body": "<a id='comment:22'></a>\nOh, and of course this can't actually be *merged* until a new SageNB package is produced.  I think I might be willing to do that once this and #9238 and one or two other things are ready; it would sure be worth it!",
    "created_at": "2011-03-23T19:52:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109554",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:22'></a>
Oh, and of course this can't actually be *merged* until a new SageNB package is produced.  I think I might be willing to do that once this and #9238 and one or two other things are ready; it would sure be worth it!



---

archive/issue_comments_109555.json:
```json
{
    "body": "<a id='comment:23'></a>\nI applied the jmol spkg and `trac_9232_plot3d_base_pyx.patch` and jmol is still broken on the command line, Fedora 14 x86_64.  I need to add `trac_10286_call_jmol_correctly.patch` from #10286 on top of it. The issue is that `sage-native-execute` must not be used for sage components like jmol.",
    "created_at": "2011-03-25T18:18:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109555",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:23'></a>
I applied the jmol spkg and `trac_9232_plot3d_base_pyx.patch` and jmol is still broken on the command line, Fedora 14 x86_64.  I need to add `trac_10286_call_jmol_correctly.patch` from #10286 on top of it. The issue is that `sage-native-execute` must not be used for sage components like jmol.



---

archive/issue_comments_109556.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2011-03-25T18:25:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109556",
    "user": "https://github.com/kcrisman"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_109557.json:
```json
{
    "body": "<a id='comment:24'></a>\nReplying to [vbraun](#comment%3A23):\n> I applied the jmol spkg and `trac_9232_plot3d_base_pyx.patch` and jmol is still broken on the command line, Fedora 14 x86_64.  I need to add `trac_10286_call_jmol_correctly.patch` from #10286 on top of it. The issue is that `sage-native-execute` must not be used for sage components like jmol.\n\nThanks for that feedback very much.  Ok, then I propose that that patch gets moved here, and then #10286 can be just about sage-native-execute.  Am I correct in assuming that *only* that patch from #10286 is needed to fix the behavior?",
    "created_at": "2011-03-25T18:25:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109557",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:24'></a>
Replying to [vbraun](#comment%3A23):
> I applied the jmol spkg and `trac_9232_plot3d_base_pyx.patch` and jmol is still broken on the command line, Fedora 14 x86_64.  I need to add `trac_10286_call_jmol_correctly.patch` from #10286 on top of it. The issue is that `sage-native-execute` must not be used for sage components like jmol.

Thanks for that feedback very much.  Ok, then I propose that that patch gets moved here, and then #10286 can be just about sage-native-execute.  Am I correct in assuming that *only* that patch from #10286 is needed to fix the behavior?



---

archive/issue_comments_109558.json:
```json
{
    "body": "<a id='comment:25'></a>\nYes, it would be fine to move `trac_10286_call_jmol_correctly.patch` here. Only that one-liner is needed.",
    "created_at": "2011-03-25T18:38:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109558",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:25'></a>
Yes, it would be fine to move `trac_10286_call_jmol_correctly.patch` here. Only that one-liner is needed.



---

archive/issue_comments_109559.json:
```json
{
    "body": "Attachment [trac_9232_call_jmol_correctly.patch](tarball://root/attachments/some-uuid/ticket9232/trac_9232_call_jmol_correctly.patch) by @kcrisman created at 2011-03-25 18:44:00\n\nApply this second.",
    "created_at": "2011-03-25T18:44:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109559",
    "user": "https://github.com/kcrisman"
}
```

Attachment [trac_9232_call_jmol_correctly.patch](tarball://root/attachments/some-uuid/ticket9232/trac_9232_call_jmol_correctly.patch) by @kcrisman created at 2011-03-25 18:44:00

Apply this second.



---

archive/issue_comments_109560.json:
```json
{
    "body": "**Changing reviewer** from \"Jason Grout, Karl-Dieter Crisman\" to \"Jason Grout, Karl-Dieter Crisman, Volker Braun\".",
    "created_at": "2011-03-25T18:45:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109560",
    "user": "https://github.com/kcrisman"
}
```

**Changing reviewer** from "Jason Grout, Karl-Dieter Crisman" to "Jason Grout, Karl-Dieter Crisman, Volker Braun".



---

archive/issue_comments_109561.json:
```json
{
    "body": "**Changing author** from \"Jonathan Gutow\" to \"Jonathan Gutow, Volker Braun\".",
    "created_at": "2011-03-25T18:45:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109561",
    "user": "https://github.com/kcrisman"
}
```

**Changing author** from "Jonathan Gutow" to "Jonathan Gutow, Volker Braun".



---

archive/issue_comments_109562.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2011-03-25T18:45:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109562",
    "user": "https://github.com/kcrisman"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_109563.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -50,5 +50,5 @@\n \n ---\n \n-Install [this spkg](http://www.uwosh.edu/faculty_staff/gutow/Jmol_for_SageNoteBook-1.1.5.spkg) and apply *only* [attachment:trac_9232_plot3d_base_pyx.patch].  \n+Install [this spkg](http://www.uwosh.edu/faculty_staff/gutow/Jmol_for_SageNoteBook-1.1.5.spkg) and apply [attachment:trac_9232_plot3d_base_pyx.patch] and [attachment:trac_9232_call_jmol_correctly.patch].\n \n``````\n",
    "created_at": "2011-03-25T18:45:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109563",
    "user": "https://github.com/kcrisman"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -50,5 +50,5 @@
 
 ---
 
-Install [this spkg](http://www.uwosh.edu/faculty_staff/gutow/Jmol_for_SageNoteBook-1.1.5.spkg) and apply *only* [attachment:trac_9232_plot3d_base_pyx.patch].  
+Install [this spkg](http://www.uwosh.edu/faculty_staff/gutow/Jmol_for_SageNoteBook-1.1.5.spkg) and apply [attachment:trac_9232_plot3d_base_pyx.patch] and [attachment:trac_9232_call_jmol_correctly.patch].
 
``````




---

archive/issue_comments_109564.json:
```json
{
    "body": "<a id='comment:26'></a>\nOkay, this *should* be all okay then.",
    "created_at": "2011-03-25T18:45:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109564",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:26'></a>
Okay, this *should* be all okay then.



---

archive/issue_comments_109565.json:
```json
{
    "body": "<a id='comment:27'></a>\nThings are a little bit of a mess because of the potential for flask changeover in SageNB.  What do people think of this?\n1. This ticket is used just for adding Volker's patch.  No sagenb change needed.\n2. Jonathan's patches for the menu, help, and surface lighting/spt files are moved to #9238.\n3. #9238 and all its attendant pieces become part of the flask notebook changeover, and henceforth the property of those doing that :)\nOtherwise this has the potential to just bitrot forever.",
    "created_at": "2011-03-29T00:29:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109565",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:27'></a>
Things are a little bit of a mess because of the potential for flask changeover in SageNB.  What do people think of this?
1. This ticket is used just for adding Volker's patch.  No sagenb change needed.
2. Jonathan's patches for the menu, help, and surface lighting/spt files are moved to #9238.
3. #9238 and all its attendant pieces become part of the flask notebook changeover, and henceforth the property of those doing that :)
Otherwise this has the potential to just bitrot forever.



---

archive/issue_comments_109566.json:
```json
{
    "body": "<a id='comment:28'></a>\nThe flask notebook has already split off of the current notebook.  So any patches that are applied to the current sage notebook will also need to be applied to the new notebook, probably in parallel.\n\nI'm already working on moving #9238 over to the new notebook.  It's just a matter of applying the patch to the new notebook, as far as I can tell.  (We'll find out better once we actually get jmol working with the new notebook!)",
    "created_at": "2011-03-29T01:01:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109566",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:28'></a>
The flask notebook has already split off of the current notebook.  So any patches that are applied to the current sage notebook will also need to be applied to the new notebook, probably in parallel.

I'm already working on moving #9238 over to the new notebook.  It's just a matter of applying the patch to the new notebook, as far as I can tell.  (We'll find out better once we actually get jmol working with the new notebook!)



---

archive/issue_comments_109567.json:
```json
{
    "body": "<a id='comment:29'></a>\nShould I continue to put my patches into #9238? I've still got some fixes that should reduce memory problems making Safari somewhat more reliable and I may be able to get the advanced controls working in IE.",
    "created_at": "2011-03-29T02:27:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109567",
    "user": "https://github.com/gutow"
}
```

<a id='comment:29'></a>
Should I continue to put my patches into #9238? I've still got some fixes that should reduce memory problems making Safari somewhat more reliable and I may be able to get the advanced controls working in IE.



---

archive/issue_comments_109568.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2011-03-29T13:34:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109568",
    "user": "https://github.com/kcrisman"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_109569.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -50,5 +50,4 @@\n \n ---\n \n-Install [this spkg](http://www.uwosh.edu/faculty_staff/gutow/Jmol_for_SageNoteBook-1.1.5.spkg) and apply [attachment:trac_9232_plot3d_base_pyx.patch] and [attachment:trac_9232_call_jmol_correctly.patch].\n-\n+Apply *only* [attachment:trac_9232_call_jmol_correctly.patch].\n``````\n",
    "created_at": "2011-03-29T13:34:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109569",
    "user": "https://github.com/kcrisman"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -50,5 +50,4 @@
 
 ---
 
-Install [this spkg](http://www.uwosh.edu/faculty_staff/gutow/Jmol_for_SageNoteBook-1.1.5.spkg) and apply [attachment:trac_9232_plot3d_base_pyx.patch] and [attachment:trac_9232_call_jmol_correctly.patch].
-
+Apply *only* [attachment:trac_9232_call_jmol_correctly.patch].
``````




---

archive/issue_comments_109570.json:
```json
{
    "body": "<a id='comment:30'></a>\nJonathan, definitely keep working on #9238.  Jason can just put those things in the new notebook.  Having something working completely is a very good idea, and we can continue to test it on the old notebook, which is still the current notebook, after all.\n\nI do think we need to also add the piece of #9238 that changes the lighting.  Currently I have good lighting in the command line and bad lighting in the notebook, even without the new jmol - someone the new jmol is called from the notebook, even though I didn't install it in this version!!!  I even checked this in the advanced menu.  Mystifying. \n\nI'm just testing quick, and then I'll post patches.  Since they aren't mine, I feel free to give positive review.",
    "created_at": "2011-03-29T13:34:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109570",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:30'></a>
Jonathan, definitely keep working on #9238.  Jason can just put those things in the new notebook.  Having something working completely is a very good idea, and we can continue to test it on the old notebook, which is still the current notebook, after all.

I do think we need to also add the piece of #9238 that changes the lighting.  Currently I have good lighting in the command line and bad lighting in the notebook, even without the new jmol - someone the new jmol is called from the notebook, even though I didn't install it in this version!!!  I even checked this in the advanced menu.  Mystifying. 

I'm just testing quick, and then I'll post patches.  Since they aren't mine, I feel free to give positive review.



---

archive/issue_comments_109571.json:
```json
{
    "body": "Attachment [trac_9232-lighting.patch](tarball://root/attachments/some-uuid/ticket9232/trac_9232-lighting.patch) by @kcrisman created at 2011-03-29 13:36:54",
    "created_at": "2011-03-29T13:36:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109571",
    "user": "https://github.com/kcrisman"
}
```

Attachment [trac_9232-lighting.patch](tarball://root/attachments/some-uuid/ticket9232/trac_9232-lighting.patch) by @kcrisman created at 2011-03-29 13:36:54



---

archive/issue_comments_109572.json:
```json
{
    "body": "<a id='comment:31'></a>\nApply [attachment:trac_9232_call_jmol_correctly.patch] and [attachment:trac_9232-lighting.patch].",
    "created_at": "2011-03-29T13:37:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109572",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:31'></a>
Apply [attachment:trac_9232_call_jmol_correctly.patch] and [attachment:trac_9232-lighting.patch].



---

archive/issue_comments_109573.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -50,4 +50,4 @@\n \n ---\n \n-Apply *only* [attachment:trac_9232_call_jmol_correctly.patch].\n+Apply [attachment:trac_9232_call_jmol_correctly.patch] and [attachment:trac_9232-lighting.patch].\n``````\n",
    "created_at": "2011-03-29T13:37:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109573",
    "user": "https://github.com/kcrisman"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -50,4 +50,4 @@
 
 ---
 
-Apply *only* [attachment:trac_9232_call_jmol_correctly.patch].
+Apply [attachment:trac_9232_call_jmol_correctly.patch] and [attachment:trac_9232-lighting.patch].
``````




---

archive/issue_comments_109574.json:
```json
{
    "body": "<a id='comment:32'></a>\nJust a ping to let the release manager know this is ready for alpha4.\n\n:-)",
    "created_at": "2011-04-06T12:15:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109574",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:32'></a>
Just a ping to let the release manager know this is ready for alpha4.

:-)



---

archive/issue_comments_109575.json:
```json
{
    "body": "<a id='comment:33'></a>\nPlease confirm that the `sagenb` does *not* need to be applied.",
    "created_at": "2011-04-07T08:51:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109575",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:33'></a>
Please confirm that the `sagenb` does *not* need to be applied.



---

archive/issue_comments_109576.json:
```json
{
    "body": "<a id='comment:34'></a>\nI meant to say more precisely: please confirm that the patch [attachment:trac_9232_notebook_fixes.patch] may be ignored.",
    "created_at": "2011-04-07T09:00:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109576",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:34'></a>
I meant to say more precisely: please confirm that the patch [attachment:trac_9232_notebook_fixes.patch] may be ignored.



---

archive/issue_comments_109577.json:
```json
{
    "body": "<a id='comment:35'></a>\nThat is correct.  Only the two patches listed at the end of the description are necessary.  The other two have been incorporated into ticket #9238 because they are enhancements to how Jmol works.",
    "created_at": "2011-04-07T12:55:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109577",
    "user": "https://github.com/gutow"
}
```

<a id='comment:35'></a>
That is correct.  Only the two patches listed at the end of the description are necessary.  The other two have been incorporated into ticket #9238 because they are enhancements to how Jmol works.



---

archive/issue_comments_109578.json:
```json
{
    "body": "**Merged:** sage-4.7.alpha4",
    "created_at": "2011-04-07T13:48:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109578",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-4.7.alpha4



---

archive/issue_events_027824.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-07T13:48:29Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9232#event-27824"
}
```



---

archive/issue_comments_109579.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2011-04-07T13:48:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9232#issuecomment-109579",
    "user": "https://github.com/jdemeyer"
}
```

**Resolution:** fixed
