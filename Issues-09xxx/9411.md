# Issue 9411: Given points on an elliptic curve, this finds a LLL reduced ZZ-independent set

archive/issues_009411.json:
```json
{
    "assignees": [
        "https://github.com/JohnCremona"
    ],
    "body": "This is based on magma code from Cremona.  It takes a set of points on an elliptic curve and uses LLL to return a ZZ-independent set with the same ZZ-span.\n\nApply:\n* [attachment: trac_9411_lll_reduce_number_field.2.patch](https://github.com/sagemath/sage/files/ticket9411/trac_9411_lll_reduce_number_field.2.patch.gz)\n* [attachment: trac_9411_review.patch](https://github.com/sagemath/sage/files/ticket9411/trac_9411_review.patch.gz)\n\nCC:  @sagetrac-jeremywest @JohnCremona\n\nKeywords: **LLL, rank, sd35.5**\n\nReviewer: **John Cremona, Paul Zimmermann, Fr\u00e9d\u00e9ric Chapoton**\n\nAuthor: **Aly Deines, John Cremona**\n\nMerged: **sage-5.13.beta5**\n\nComponent: **elliptic curves**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/9411_\n\n",
    "closed_at": "2013-12-05T08:02:12Z",
    "created_at": "2010-07-02T20:18:16Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20elliptic%20curves",
        "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.13",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Given points on an elliptic curve, this finds a LLL reduced ZZ-independent set",
    "type": "issue",
    "updated_at": "2013-12-05T08:02:12Z",
    "url": "https://github.com/sagemath/sage/issues/9411",
    "user": "https://github.com/adeines"
}
```
This is based on magma code from Cremona.  It takes a set of points on an elliptic curve and uses LLL to return a ZZ-independent set with the same ZZ-span.

Apply:
* [attachment: trac_9411_lll_reduce_number_field.2.patch](https://github.com/sagemath/sage/files/ticket9411/trac_9411_lll_reduce_number_field.2.patch.gz)
* [attachment: trac_9411_review.patch](https://github.com/sagemath/sage/files/ticket9411/trac_9411_review.patch.gz)

CC:  @sagetrac-jeremywest @JohnCremona

Keywords: **LLL, rank, sd35.5**

Reviewer: **John Cremona, Paul Zimmermann, Frédéric Chapoton**

Author: **Aly Deines, John Cremona**

Merged: **sage-5.13.beta5**

Component: **elliptic curves**

_Issue created by migration from https://trac.sagemath.org/ticket/9411_





---

archive/issue_events_120763.json:
```json
{
    "actor": "https://github.com/adeines",
    "created_at": "2010-07-02T20:18:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20elliptic%20curves",
    "label_color": "0000ff",
    "label_name": "c: elliptic curves",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9411#event-120763"
}
```



---

archive/issue_events_120764.json:
```json
{
    "actor": "https://github.com/adeines",
    "created_at": "2010-07-02T20:18:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9411#event-120764"
}
```



---

archive/issue_events_120765.json:
```json
{
    "actor": "https://github.com/adeines",
    "created_at": "2010-07-02T20:18:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9411#event-120765"
}
```



---

archive/issue_events_120766.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2010-07-02T20:18:16Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "subject": "https://github.com/adeines",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9411#event-120766"
}
```



---

archive/issue_comments_080505.json:
```json
{
    "body": "Attachment: **[trac_9411-LLL_points.patch.gz](https://github.com/sagemath/sage/files/ticket9411/trac_9411-LLL_points.patch.gz)**",
    "created_at": "2010-07-02T21:12:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9411#issuecomment-80505",
    "user": "https://github.com/adeines"
}
```

Attachment: **[trac_9411-LLL_points.patch.gz](https://github.com/sagemath/sage/files/ticket9411/trac_9411-LLL_points.patch.gz)**



---

archive/issue_comments_080506.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nAly, would it not have been simpler to move the code of the function lll_reduce(self, points, height_matrix=None) from ell_rational_field to ell_number_field?  That function was written when we only had heights over Q but it does the same thing, essentially.\n\nApologies if I should have told you about that function earlier...\n\nThere may well be other functions which can similarly be moved up;  someone should go systematically through ell_rational_field functions to see which others there are.\n\nOn your patch, I see the following:  (1) no tests over fields other than Q; (2) in defining E why not just E=self?;  (3) better to use the pari library than the gp interface (when there's a choice).  Otherwise it applies and builds fine.",
    "created_at": "2010-07-05T16:39:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9411#issuecomment-80506",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:1" align="right">comment:1</div>

Aly, would it not have been simpler to move the code of the function lll_reduce(self, points, height_matrix=None) from ell_rational_field to ell_number_field?  That function was written when we only had heights over Q but it does the same thing, essentially.

Apologies if I should have told you about that function earlier...

There may well be other functions which can similarly be moved up;  someone should go systematically through ell_rational_field functions to see which others there are.

On your patch, I see the following:  (1) no tests over fields other than Q; (2) in defining E why not just E=self?;  (3) better to use the pari library than the gp interface (when there's a choice).  Otherwise it applies and builds fine.



---

archive/issue_events_120767.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2010-07-05T16:39:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9411#event-120767"
}
```



---

archive/issue_comments_080507.json:
```json
{
    "body": "Reviewer: **John Cremona**",
    "created_at": "2010-07-05T16:39:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9411#issuecomment-80507",
    "user": "https://github.com/JohnCremona"
}
```

Reviewer: **John Cremona**



---

archive/issue_comments_080508.json:
```json
{
    "body": "Author: **Alyson Deines**",
    "created_at": "2010-07-05T16:39:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9411#issuecomment-80508",
    "user": "https://github.com/JohnCremona"
}
```

Author: **Alyson Deines**



---

archive/issue_comments_080509.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nKnowing about the lll_reduce function and finally getting back to this ticket, I've just created a patch which simply moves the function lll_reduce to ell_number_field.  I've also included doctests over quadratic number fields.  \n\nOne note, this code isn't very robust.  For example, in many cases the height pairing matrix is *not* positive definite.  In this case \n\"the output depends on the undocumented behaviour of PARI's ``lllgram()``  function\", which means there is a divide by zero error.  Here's an example:\n\n```\n            sage: Qrt5.<rt5>=NumberField(x^2-5)\n            sage: E = EllipticCurve([0,5-rt5,0,rt5,0])\n            sage: QuadraticForm(E.height_pairing_matrix(E.gens())).is_positive_definite()\n            False\n            sage: E.lll_reduce(E.gens())\n            Exception raised:\n            Traceback (most recent call last):\n            File \"/Users/aly/Desktop/sage-4.6.1.rc1/local/bin/ncadoctest.py\", line 1231, in run_one_test\n            self.run_one_example(test, example, filename, compileflags)\n            File \"/Users/aly/Desktop/sage-4.6.1.rc1/local/bin/sagedoctest.py\", line 38, in run_one_example\n            OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n            File \"/Users/aly/Desktop/sage-4.6.1.rc1/local/bin/ncadoctest.py\", line 1172, in run_one_example\n            compileflags, 1) in test.globs\n            File \"<doctest __main__.example_39[8]>\", line 1, in <module>\n            E.lll_reduce(E.gens())###line 2106:\n            sage: E.lll_reduce(E.gens())\n            File \"/Users/aly/Desktop/sage-4.6.1.rc1/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_number_field.py\", line 2117, in lll_reduce\n            U = pari(height_matrix).lllgram().python()\n            File \"gen.pyx\", line 7749, in sage.libs.pari.gen.gen.lllgram (sage/libs/pari/gen.c:34364)\n            File \"gen.pyx\", line 9851, in sage.libs.pari.gen._pari_trap (sage/libs/pari/gen.c:46022)\n            PariError: division by zero (27)\n```",
    "created_at": "2011-01-12T06:09:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9411#issuecomment-80509",
    "user": "https://github.com/adeines"
}
```

<div id="comment:2" align="right">comment:2</div>

Knowing about the lll_reduce function and finally getting back to this ticket, I've just created a patch which simply moves the function lll_reduce to ell_number_field.  I've also included doctests over quadratic number fields.  

One note, this code isn't very robust.  For example, in many cases the height pairing matrix is *not* positive definite.  In this case 
"the output depends on the undocumented behaviour of PARI's ``lllgram()``  function", which means there is a divide by zero error.  Here's an example:

```
            sage: Qrt5.<rt5>=NumberField(x^2-5)
            sage: E = EllipticCurve([0,5-rt5,0,rt5,0])
            sage: QuadraticForm(E.height_pairing_matrix(E.gens())).is_positive_definite()
            False
            sage: E.lll_reduce(E.gens())
            Exception raised:
            Traceback (most recent call last):
            File "/Users/aly/Desktop/sage-4.6.1.rc1/local/bin/ncadoctest.py", line 1231, in run_one_test
            self.run_one_example(test, example, filename, compileflags)
            File "/Users/aly/Desktop/sage-4.6.1.rc1/local/bin/sagedoctest.py", line 38, in run_one_example
            OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
            File "/Users/aly/Desktop/sage-4.6.1.rc1/local/bin/ncadoctest.py", line 1172, in run_one_example
            compileflags, 1) in test.globs
            File "<doctest __main__.example_39[8]>", line 1, in <module>
            E.lll_reduce(E.gens())###line 2106:
            sage: E.lll_reduce(E.gens())
            File "/Users/aly/Desktop/sage-4.6.1.rc1/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_number_field.py", line 2117, in lll_reduce
            U = pari(height_matrix).lllgram().python()
            File "gen.pyx", line 7749, in sage.libs.pari.gen.gen.lllgram (sage/libs/pari/gen.c:34364)
            File "gen.pyx", line 9851, in sage.libs.pari.gen._pari_trap (sage/libs/pari/gen.c:46022)
            PariError: division by zero (27)
```



---

archive/issue_comments_080510.json:
```json
{
    "body": "Attachment: **[trac_9411_lll_reduce_number_field.patch.gz](https://github.com/sagemath/sage/files/ticket9411/trac_9411_lll_reduce_number_field.patch.gz)**\n\nThis replaces the previous patch.  It applies to sage-4.6.1.rc1",
    "created_at": "2011-01-12T06:10:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9411#issuecomment-80510",
    "user": "https://github.com/adeines"
}
```

Attachment: **[trac_9411_lll_reduce_number_field.patch.gz](https://github.com/sagemath/sage/files/ticket9411/trac_9411_lll_reduce_number_field.patch.gz)**

This replaces the previous patch.  It applies to sage-4.6.1.rc1



---

archive/issue_events_120768.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2011-01-12T09:36:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9411#event-120768"
}
```



---

archive/issue_events_120769.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2011-01-12T09:36:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9411#event-120769"
}
```



---

archive/issue_comments_080511.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nThanks for putting more work into this.  I have not time to re-review right now, but I do intend to.\n\nAbout the robustness,  a better long term solution would be to separate out two different aspects:  (1) give some points, return a maximal independent subset (or, return an independent set which has the same ZZ-span, which is not the same thing);  (2) given independent points, LLL-reduce them.  \n\nBut for this ticket I suggest that we just do the best we can using the pari function and sufficient precision.",
    "created_at": "2011-01-12T09:36:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9411#issuecomment-80511",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:3" align="right">comment:3</div>

Thanks for putting more work into this.  I have not time to re-review right now, but I do intend to.

About the robustness,  a better long term solution would be to separate out two different aspects:  (1) give some points, return a maximal independent subset (or, return an independent set which has the same ZZ-span, which is not the same thing);  (2) given independent points, LLL-reduce them.  

But for this ticket I suggest that we just do the best we can using the pari function and sufficient precision.



---

archive/issue_comments_080512.json:
```json
{
    "body": "Changed author from **Alyson Deines** to **Aly Deines**",
    "created_at": "2011-01-13T07:17:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9411#issuecomment-80512",
    "user": "https://github.com/adeines"
}
```

Changed author from **Alyson Deines** to **Aly Deines**



---

archive/issue_comments_080513.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI'm working on this now.  First, I deleted the duplicate function still in ell_rational_field.py (but moved the examples there to ell_number_field.py).  I also added a precision parameter to be passed to the height pairing matrix call, and am trying to make an example where it makes a difference!",
    "created_at": "2011-04-22T17:24:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9411#issuecomment-80513",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:5" align="right">comment:5</div>

I'm working on this now.  First, I deleted the duplicate function still in ell_rational_field.py (but moved the examples there to ell_number_field.py).  I also added a precision parameter to be passed to the height pairing matrix call, and am trying to make an example where it makes a difference!



---

archive/issue_comments_080514.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n This is based on magma code from Cremona.  It takes a set of points on an elliptic curve and uses LLL to return a ZZ-independent set with the same ZZ-span.\n+\n+Apply only:   trac_9411_lll_reduce_number_field.2.patch\n``````\n",
    "created_at": "2011-05-03T16:34:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9411#issuecomment-80514",
    "user": "https://github.com/JohnCremona"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 This is based on magma code from Cremona.  It takes a set of points on an elliptic curve and uses LLL to return a ZZ-independent set with the same ZZ-span.
+
+Apply only:   trac_9411_lll_reduce_number_field.2.patch
``````




---

archive/issue_comments_080515.json:
```json
{
    "body": "Changed author from **Aly Deines** to **Aly Deines, John Cremona**",
    "created_at": "2011-05-03T16:34:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9411#issuecomment-80515",
    "user": "https://github.com/JohnCremona"
}
```

Changed author from **Aly Deines** to **Aly Deines, John Cremona**



---

archive/issue_comments_080516.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI uploaded my patch which is a revision of Aly's, since I did not want it to get lost.  It's fine for testing but I have not yet included an example where the precision parameter makes a difference.",
    "created_at": "2011-05-03T16:34:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9411#issuecomment-80516",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:6" align="right">comment:6</div>

I uploaded my patch which is a revision of Aly's, since I did not want it to get lost.  It's fine for testing but I have not yet included an example where the precision parameter makes a difference.



---

archive/issue_comments_080517.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nWhat's the status of this ticket? It's marked as \"needs review\", but the last comment suggests that more work is needed.",
    "created_at": "2011-12-30T17:47:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9411#issuecomment-80517",
    "user": "https://github.com/loefflerd"
}
```

<div id="comment:7" align="right">comment:7</div>

What's the status of this ticket? It's marked as "needs review", but the last comment suggests that more work is needed.



---

archive/issue_comments_080518.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nWell, I think it is ready for review.  I certainly think that in principle the function ought to allow the user to set the precision which is used to compute the height-pairing matrix (which was not the case before).  Secondly, we now have one function in ell_number_field instead of just one function on ell_rational_field, or two functions.  So Sage is certainly enhanced by this!\n\nOf course, the reviewer might insist on seeing an example where higher precision makes a difference....but I don't and I am listed as a reviewer though the latest patch was by me so we need a third party to have a look.",
    "created_at": "2011-12-30T18:40:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9411#issuecomment-80518",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:8" align="right">comment:8</div>

Well, I think it is ready for review.  I certainly think that in principle the function ought to allow the user to set the precision which is used to compute the height-pairing matrix (which was not the case before).  Secondly, we now have one function in ell_number_field instead of just one function on ell_rational_field, or two functions.  So Sage is certainly enhanced by this!

Of course, the reviewer might insist on seeing an example where higher precision makes a difference....but I don't and I am listed as a reviewer though the latest patch was by me so we need a third party to have a look.



---

archive/issue_events_120770.json:
```json
{
    "actor": "https://github.com/zimmermann6",
    "created_at": "2012-01-11T15:21:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9411#event-120770"
}
```



---

archive/issue_events_120771.json:
```json
{
    "actor": "https://github.com/zimmermann6",
    "created_at": "2012-01-11T15:21:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9411#event-120771"
}
```



---

archive/issue_comments_080519.json:
```json
{
    "body": "Changed keywords from **LLL, rank** to **LLL, rank, sd35.5**",
    "created_at": "2012-01-11T15:21:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9411#issuecomment-80519",
    "user": "https://github.com/zimmermann6"
}
```

Changed keywords from **LLL, rank** to **LLL, rank, sd35.5**



---

archive/issue_comments_080520.json:
```json
{
    "body": "Changed reviewer from **John Cremona** to **John Cremona, Paul Zimmermann**",
    "created_at": "2012-01-11T15:21:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9411#issuecomment-80520",
    "user": "https://github.com/zimmermann6"
}
```

Changed reviewer from **John Cremona** to **John Cremona, Paul Zimmermann**



---

archive/issue_comments_080521.json:
```json
{
    "body": "Work Issues: **improve documentation**",
    "created_at": "2012-01-11T15:21:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9411#issuecomment-80521",
    "user": "https://github.com/zimmermann6"
}
```

Work Issues: **improve documentation**



---

archive/issue_comments_080522.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nall doctests pass on top of sage-4.8.alpha6.\n\nHowever I suggest adding an example checking the relation between the input points, `newpoints`\nand the output matrix `U`:\n\n```\nsage: E = EllipticCurve([0, 1, 1, -2, 42])\nsage: Pi = E.gens()\nsage: Qi, U = E.lll_reduce(Pi)\nsage: all(sum(U[i,j]*Pi[i] for i in range(4)) == Qi[j] for j in range(4))\nTrue\n```\n\nAnd please add an example where an `height_matrix` is given, for example\n(this also gives an example where the precision matters):\n\n```\nsage: E = EllipticCurve([0, 1, 1, -2, 42])\nsage: Pi = E.gens()\nsage: H=E.height_pairing_matrix(Pi,3)\nsage: E.lll_reduce(Pi,height_matrix=H)\n([(-4 : 1 : 1), (-3 : 5 : 1), (-2 : 6 : 1), (1 : -7 : 1)], [1 0 0 1]\n[0 1 0 1]\n[0 0 0 1]\n[0 0 1 1])\n```\n\nAlso, I guess \"number of bits of precision of result\" should read \"number of bits of precision of intermediate computations\" (in fact the precision of the height matrix computation, which is\ngiven as input to Pari).\n\nPaul\n\nPS: the doctest coverage could be 100% if we could remove the deprecate function\n`local_information`. Can this be done?",
    "created_at": "2012-01-11T15:21:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9411#issuecomment-80522",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:9" align="right">comment:9</div>

all doctests pass on top of sage-4.8.alpha6.

However I suggest adding an example checking the relation between the input points, `newpoints`
and the output matrix `U`:

```
sage: E = EllipticCurve([0, 1, 1, -2, 42])
sage: Pi = E.gens()
sage: Qi, U = E.lll_reduce(Pi)
sage: all(sum(U[i,j]*Pi[i] for i in range(4)) == Qi[j] for j in range(4))
True
```

And please add an example where an `height_matrix` is given, for example
(this also gives an example where the precision matters):

```
sage: E = EllipticCurve([0, 1, 1, -2, 42])
sage: Pi = E.gens()
sage: H=E.height_pairing_matrix(Pi,3)
sage: E.lll_reduce(Pi,height_matrix=H)
([(-4 : 1 : 1), (-3 : 5 : 1), (-2 : 6 : 1), (1 : -7 : 1)], [1 0 0 1]
[0 1 0 1]
[0 0 0 1]
[0 0 1 1])
```

Also, I guess "number of bits of precision of result" should read "number of bits of precision of intermediate computations" (in fact the precision of the height matrix computation, which is
given as input to Pari).

Paul

PS: the doctest coverage could be 100% if we could remove the deprecate function
`local_information`. Can this be done?



---

archive/issue_comments_080523.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\napply only trac_9411_lll_reduce_number_field.2.patch",
    "created_at": "2013-08-20T13:55:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9411#issuecomment-80523",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:10" align="right">comment:10</div>

apply only trac_9411_lll_reduce_number_field.2.patch



---

archive/issue_comments_080524.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nthis needs to be rebased",
    "created_at": "2013-08-20T13:59:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9411#issuecomment-80524",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:11" align="right">comment:11</div>

this needs to be rebased



---

archive/issue_comments_080525.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI volunteer to do that since I wrote the current patch.  I think we can now remove that deprecated function too (if it is still there).",
    "created_at": "2013-08-20T14:06:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9411#issuecomment-80525",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:12" align="right">comment:12</div>

I volunteer to do that since I wrote the current patch.  I think we can now remove that deprecated function too (if it is still there).



---

archive/issue_comments_080526.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nI did the rebasing but am now also adding the tests suggested by Paul Zimmermann's comment 9.",
    "created_at": "2013-08-21T14:47:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9411#issuecomment-80526",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:13" align="right">comment:13</div>

I did the rebasing but am now also adding the tests suggested by Paul Zimmermann's comment 9.



---

archive/issue_comments_080527.json:
```json
{
    "body": "Attachment: **[trac_9411_lll_reduce_number_field.2.patch.gz](https://github.com/sagemath/sage/files/ticket9411/trac_9411_lll_reduce_number_field.2.patch.gz)**\n\nrebased on 5.12.beta1 and added 2 new doctests",
    "created_at": "2013-08-21T14:59:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9411#issuecomment-80527",
    "user": "https://github.com/JohnCremona"
}
```

Attachment: **[trac_9411_lll_reduce_number_field.2.patch.gz](https://github.com/sagemath/sage/files/ticket9411/trac_9411_lll_reduce_number_field.2.patch.gz)**

rebased on 5.12.beta1 and added 2 new doctests



---

archive/issue_events_120772.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2013-08-21T15:00:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9411#event-120772"
}
```



---

archive/issue_events_120773.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2013-08-21T15:00:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9411#event-120773"
}
```



---

archive/issue_comments_080528.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@JohnCremona](#comment:13):\n> I did the rebasing but am now also adding the tests suggested by Paul Zimmermann's comment 9.\n\nDone, so back to \"needs review\".",
    "created_at": "2013-08-21T15:00:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9411#issuecomment-80528",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@JohnCremona](#comment:13):
> I did the rebasing but am now also adding the tests suggested by Paul Zimmermann's comment 9.

Done, so back to "needs review".



---

archive/issue_comments_080529.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\napply only trac_9411_lll_reduce_number_field.2.patch",
    "created_at": "2013-08-29T07:52:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9411#issuecomment-80529",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:15" align="right">comment:15</div>

apply only trac_9411_lll_reduce_number_field.2.patch



---

archive/issue_comments_080530.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n This is based on magma code from Cremona.  It takes a set of points on an elliptic curve and uses LLL to return a ZZ-independent set with the same ZZ-span.\n \n-Apply only:   trac_9411_lll_reduce_number_field.2.patch\n+Apply:\n+* [attachment: trac_9411_lll_reduce_number_field.2.patch](https://github.com/sagemath/sage/files/ticket9411/trac_9411_lll_reduce_number_field.2.patch.gz)\n+* [attachment: trac_9411_review.patch](https://github.com/sagemath/sage/files/ticket9411/trac_9411_review.patch.gz)\n``````\n",
    "created_at": "2013-09-11T20:09:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9411#issuecomment-80530",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
 This is based on magma code from Cremona.  It takes a set of points on an elliptic curve and uses LLL to return a ZZ-independent set with the same ZZ-span.
 
-Apply only:   trac_9411_lll_reduce_number_field.2.patch
+Apply:
+* [attachment: trac_9411_lll_reduce_number_field.2.patch](https://github.com/sagemath/sage/files/ticket9411/trac_9411_lll_reduce_number_field.2.patch.gz)
+* [attachment: trac_9411_review.patch](https://github.com/sagemath/sage/files/ticket9411/trac_9411_review.patch.gz)
``````




---

archive/issue_comments_080531.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nlooks good to me.\n\nI have made a review patch, mainly about details of the doc, but also removing the deprecated function `local_information`.\n\nIf the minor changes in my review patch are ok, this can be set to positive review\n\nfor the bot:\n\napply trac_9411_lll_reduce_number_field.2.patch, trac_9411_review.patch",
    "created_at": "2013-09-11T20:09:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9411#issuecomment-80531",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:16" align="right">comment:16</div>

looks good to me.

I have made a review patch, mainly about details of the doc, but also removing the deprecated function `local_information`.

If the minor changes in my review patch are ok, this can be set to positive review

for the bot:

apply trac_9411_lll_reduce_number_field.2.patch, trac_9411_review.patch



---

archive/issue_comments_080532.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nAttachment: **[trac_9411_review.patch.gz](https://github.com/sagemath/sage/files/ticket9411/trac_9411_review.patch.gz)**\n\nrebased. Once again, if my minor changes are ok, you can set this to positive review",
    "created_at": "2013-11-25T19:07:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9411#issuecomment-80532",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:17" align="right">comment:17</div>

Attachment: **[trac_9411_review.patch.gz](https://github.com/sagemath/sage/files/ticket9411/trac_9411_review.patch.gz)**

rebased. Once again, if my minor changes are ok, you can set this to positive review



---

archive/issue_comments_080533.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nOK, I am happy to give chapoton's reviewer's patch +1 and set this to positive review.  Since there have been other elliptic curve patches already merged into 5.14.beta4 I hope the rebasing is sufficient!",
    "created_at": "2013-11-25T19:29:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9411#issuecomment-80533",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:18" align="right">comment:18</div>

OK, I am happy to give chapoton's reviewer's patch +1 and set this to positive review.  Since there have been other elliptic curve patches already merged into 5.14.beta4 I hope the rebasing is sufficient!



---

archive/issue_events_120774.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2013-11-25T19:29:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9411#event-120774"
}
```



---

archive/issue_events_120775.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2013-11-25T19:29:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9411#event-120775"
}
```



---

archive/issue_comments_080534.json:
```json
{
    "body": "Changed reviewer from **John Cremona, Paul Zimmermann** to **John Cremona, Paul Zimmermann, Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2013-11-25T20:02:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9411#issuecomment-80534",
    "user": "https://github.com/fchapoton"
}
```

Changed reviewer from **John Cremona, Paul Zimmermann** to **John Cremona, Paul Zimmermann, Frédéric Chapoton**



---

archive/issue_events_120776.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-11-26T10:57:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "milestone_number": null,
    "milestone_title": "sage-5.13",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9411#event-120776"
}
```



---

archive/issue_comments_080535.json:
```json
{
    "body": "Changed work issues from **improve documentation** to none",
    "created_at": "2013-11-26T11:16:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9411#issuecomment-80535",
    "user": "https://github.com/jdemeyer"
}
```

Changed work issues from **improve documentation** to none



---

archive/issue_comments_080536.json:
```json
{
    "body": "Merged: **sage-5.13.beta5**",
    "created_at": "2013-12-05T08:02:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9411#issuecomment-80536",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.13.beta5**



---

archive/issue_events_120777.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-12-05T08:02:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9411#event-120777"
}
```



---

archive/issue_events_120778.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-12-05T08:02:12Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/9411",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9411#event-120778"
}
```
