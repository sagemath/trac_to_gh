# Issue 9667: Use PARI's hash_GEN() for gen.__hash__

archive/issues_009667.json:
```json
{
    "body": "The latest version of PARI has a function `hash_GEN` which hashes a PARI `GEN`.  Since this is very likely faster than hashing the string representation of a `GEN`, we should use this for the `gen` class in sage/libs/pari/gen.pyx\n\nThis patch has been included in #9764.\n\nAssignee: @williamstein\n\nResolution: duplicate\n\nAuthor: Jeroen Demeyer\n\nIssue created by migration from https://trac.sagemath.org/ticket/9667\n\n",
    "closed_at": "2010-09-28T11:15:03Z",
    "created_at": "2010-08-02T09:47:20Z",
    "labels": [
        "component: interfaces",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Use PARI's hash_GEN() for gen.__hash__",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/9667",
    "user": "https://github.com/jdemeyer"
}
```
The latest version of PARI has a function `hash_GEN` which hashes a PARI `GEN`.  Since this is very likely faster than hashing the string representation of a `GEN`, we should use this for the `gen` class in sage/libs/pari/gen.pyx

This patch has been included in #9764.

Assignee: @williamstein

Resolution: duplicate

Author: Jeroen Demeyer

Issue created by migration from https://trac.sagemath.org/ticket/9667





---

archive/issue_comments_097804.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,6 @@\n The latest version of PARI has a function `hash_GEN` which hashes a PARI `GEN`.  Since this is very likely faster than hashing the string representation of a `GEN`, we should use this for the `gen` class in sage/libs/pari/gen.pyx\n+\n+Dependencies: #9343\n \n Author: Jeroen Demeyer\n \n```\n",
    "created_at": "2010-08-02T09:47:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9667#issuecomment-97804",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,6 @@
 The latest version of PARI has a function `hash_GEN` which hashes a PARI `GEN`.  Since this is very likely faster than hashing the string representation of a `GEN`, we should use this for the `gen` class in sage/libs/pari/gen.pyx
+
+Dependencies: #9343
 
 Author: Jeroen Demeyer
 
```




---

archive/issue_comments_097805.json:
```json
{
    "body": "Patch to be applied on top of #9343",
    "created_at": "2010-08-02T12:22:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9667#issuecomment-97805",
    "user": "https://github.com/jdemeyer"
}
```

Patch to be applied on top of #9343



---

archive/issue_comments_097806.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2010-09-15T17:12:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9667#issuecomment-97806",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_097807.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,6 @@\n+The latest version of PARI has a function `hash_GEN` which hashes a PARI `GEN`.  Since this is very likely faster than hashing the string representation of a `GEN`, we should use this for the `gen` class in sage/libs/pari/gen.pyx\n \n+This patch has been included in #9764.\n \n Author: Jeroen Demeyer\n \n```\n",
    "created_at": "2010-09-15T17:12:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9667#issuecomment-97807",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,6 @@
+The latest version of PARI has a function `hash_GEN` which hashes a PARI `GEN`.  Since this is very likely faster than hashing the string representation of a `GEN`, we should use this for the `gen` class in sage/libs/pari/gen.pyx
 
+This patch has been included in #9764.
 
 Author: Jeroen Demeyer
 
```




---

archive/issue_comments_097808.json:
```json
{
    "body": "<a id='comment:2'></a>Attachment [9667.patch](tarball://root/attachments/some-uuid/ticket9667/9667.patch) by @jdemeyer created at 2010-09-15 17:12:33",
    "created_at": "2010-09-15T17:12:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9667#issuecomment-97808",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'></a>Attachment [9667.patch](tarball://root/attachments/some-uuid/ticket9667/9667.patch) by @jdemeyer created at 2010-09-15 17:12:33



---

archive/issue_events_024114.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-09-15T17:12:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9667",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9667#event-24114"
}
```



---

archive/issue_comments_097809.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2010-09-15T17:13:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9667#issuecomment-97809",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_097810.json:
```json
{
    "body": "<a id='comment:3'></a>Ignore this ticket, see #9764 instead.",
    "created_at": "2010-09-15T17:13:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9667#issuecomment-97810",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:3'></a>Ignore this ticket, see #9764 instead.



---

archive/issue_comments_097811.json:
```json
{
    "body": "Resolution: duplicate",
    "created_at": "2010-09-28T11:15:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9667#issuecomment-97811",
    "user": "https://github.com/qed777"
}
```

Resolution: duplicate



---

archive/issue_events_024115.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2010-09-28T11:15:03Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/9667",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9667#event-24115"
}
```



---

archive/issue_comments_097812.json:
```json
{
    "body": "<a id='comment:5'></a>Hi,\n\nFor the record, this change introduced a major bug into Sage, because PARI's hash_GEN is itself buggy.  For example, by playing with ideals in Sage (code is complicated though...), I quickly got into this situation:\n\n```\nsage: n0\n[11, 3; 0, 1]\nsage: n1\n[11, 3; 0, 1]\nsage: hash(n0)\n-7493989779944505307\nsage: hash(n1)\n-6341068275337658331\n```",
    "created_at": "2011-07-29T20:19:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9667#issuecomment-97812",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:5'></a>Hi,

For the record, this change introduced a major bug into Sage, because PARI's hash_GEN is itself buggy.  For example, by playing with ideals in Sage (code is complicated though...), I quickly got into this situation:

```
sage: n0
[11, 3; 0, 1]
sage: n1
[11, 3; 0, 1]
sage: hash(n0)
-7493989779944505307
sage: hash(n1)
-6341068275337658331
```



---

archive/issue_comments_097813.json:
```json
{
    "body": "<a id='comment:6'></a>Replying to [comment:5 was]:\n> For the record, this change introduced a major bug into Sage, because PARI's hash_GEN is itself buggy.\n\nSee #11611, I have not tracked it down precisely.",
    "created_at": "2011-08-01T10:03:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9667#issuecomment-97813",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'></a>Replying to [comment:5 was]:
> For the record, this change introduced a major bug into Sage, because PARI's hash_GEN is itself buggy.

See #11611, I have not tracked it down precisely.



---

archive/issue_comments_097814.json:
```json
{
    "body": "<a id='comment:7'></a>Replying to [comment:5 was]:\n> Hi,\n> \n> For the record, this change introduced a major bug into Sage, because PARI's hash_GEN is itself buggy.\n\nDon't blaim PARI when the fault is the Sage->PARI interface. The issue is not `hash_GEN()`, it is a problem with how integers are converted from Sage to PARI.  I have a patch for this issue at #11611.",
    "created_at": "2011-08-03T13:35:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9667#issuecomment-97814",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'></a>Replying to [comment:5 was]:
> Hi,
> 
> For the record, this change introduced a major bug into Sage, because PARI's hash_GEN is itself buggy.

Don't blaim PARI when the fault is the Sage->PARI interface. The issue is not `hash_GEN()`, it is a problem with how integers are converted from Sage to PARI.  I have a patch for this issue at #11611.
