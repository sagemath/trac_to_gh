# Issue 9763: Metrology module (a different implementation of the units module)

archive/issues_009762.json:
```json
{
    "body": "This is a module that implements physical units in a more convenient way than the already existing units module: instead of creating separate variables for each unit, it creates an object containing the value, the dimension (mass, length, time...) as a list, and the units as an expression, plus the conversion factor. \n\nIt includes an easy-to-use function to create units from a string, implements `SI` prefixes and has a nice `LaTeX` output.\n\nTO DO: Add more units (there are currently only 74, plus 13 constants), review the documentation and code in case it doesn't follow the Sage style, modify sage/symbolic/all.py to include this module (adding \"import metrology\" causes Sage to throw exceptions when starting).\n\n**Assignee:** @burcin\n\n**CC:**  @kini\n\n**Keywords:** units, SI, metrology\n\n**Status:** needs_work\n\n**Author:** Javier Mora\n\n**Reviewer:** Burcin Erocal\n\nIssue created by migration from https://trac.sagemath.org/ticket/9763\n\n",
    "created_at": "2010-08-18T18:49:10Z",
    "labels": [
        "component: symbolics",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-feature",
    "title": "Metrology module (a different implementation of the units module)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/9763",
    "user": "https://github.com/cousteaulecommandant"
}
```
This is a module that implements physical units in a more convenient way than the already existing units module: instead of creating separate variables for each unit, it creates an object containing the value, the dimension (mass, length, time...) as a list, and the units as an expression, plus the conversion factor. 

It includes an easy-to-use function to create units from a string, implements `SI` prefixes and has a nice `LaTeX` output.

TO DO: Add more units (there are currently only 74, plus 13 constants), review the documentation and code in case it doesn't follow the Sage style, modify sage/symbolic/all.py to include this module (adding "import metrology" causes Sage to throw exceptions when starting).

**Assignee:** @burcin

**CC:**  @kini

**Keywords:** units, SI, metrology

**Status:** needs_work

**Author:** Javier Mora

**Reviewer:** Burcin Erocal

Issue created by migration from https://trac.sagemath.org/ticket/9763





---

archive/attachments_012584.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_9763_add_metrology.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket9763/trac_9763_add_metrology.patch",
    "created_at": "2010-08-18T18:58:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9763",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/cousteaulecommandant"
}
```



---

archive/issue_comments_111471.json:
```json
{
    "body": "Creates the metrology.py file, but doesn't edit the corresponding all.py",
    "created_at": "2010-08-18T18:58:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9763#issuecomment-111471",
    "user": "https://github.com/cousteaulecommandant"
}
```

Creates the metrology.py file, but doesn't edit the corresponding all.py



---

archive/issue_comments_111472.json:
```json
{
    "body": "The metrology.py file itself, in case it's preferred",
    "created_at": "2010-08-18T19:00:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9763#issuecomment-111472",
    "user": "https://github.com/cousteaulecommandant"
}
```

The metrology.py file itself, in case it's preferred



---

archive/attachments_012585.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "metrology.py",
    "asset_url": "tarball://root/attachments/some-uuid/ticket9763/metrology.py",
    "created_at": "2010-08-18T19:00:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9763",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.py",
    "user": "https://github.com/cousteaulecommandant"
}
```



---

archive/issue_comments_111473.json:
```json
{
    "body": "Example of usage, Pi theorem",
    "created_at": "2010-08-18T19:00:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9763#issuecomment-111473",
    "user": "https://github.com/cousteaulecommandant"
}
```

Example of usage, Pi theorem



---

archive/issue_comments_111474.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2010-08-18T19:02:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9763#issuecomment-111474",
    "user": "https://github.com/cousteaulecommandant"
}
```

**Changing status** from new to needs_review.



---

archive/attachments_012586.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "example_metrology.sage",
    "asset_url": "tarball://root/attachments/some-uuid/ticket9763/example_metrology.sage",
    "created_at": "2010-08-18T19:02:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9763",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.sage",
    "user": "https://github.com/cousteaulecommandant"
}
```



---

archive/issue_comments_111475.json:
```json
{
    "body": "<a id='comment:1'></a>\n",
    "created_at": "2010-08-18T19:02:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9763#issuecomment-111475",
    "user": "https://github.com/cousteaulecommandant"
}
```

<a id='comment:1'></a>




---

archive/issue_events_029207.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2011-05-10T12:20:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9763",
    "milestone": "sage-feature",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9763#event-29207"
}
```



---

archive/issue_comments_111476.json:
```json
{
    "body": "<a id='comment:3'></a>\nThis needs more work as stated in the ticket description and seen by the fact that not all functions included have doctests.\n\nI don't think it makes sense to have 2 different units modules. I suppose the goal here is to replace the existing one at some point. Is the functionality here a clear extension of the existing one? Is there anything that the current module does that this will not be able to do? (I never used the units module.)\n\nBesides the questions of functionality, here are a few things I noticed when I read the patch:\n\n* The `Units` class should derive from `SageObject`.\n* I don't think introducing a function named `U` to the top level namespace is appropriate. Users which need this functionality so often can define such a shortcut in their initialization file.",
    "created_at": "2011-05-10T12:20:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9763#issuecomment-111476",
    "user": "https://github.com/burcin"
}
```

<a id='comment:3'></a>
This needs more work as stated in the ticket description and seen by the fact that not all functions included have doctests.

I don't think it makes sense to have 2 different units modules. I suppose the goal here is to replace the existing one at some point. Is the functionality here a clear extension of the existing one? Is there anything that the current module does that this will not be able to do? (I never used the units module.)

Besides the questions of functionality, here are a few things I noticed when I read the patch:

* The `Units` class should derive from `SageObject`.
* I don't think introducing a function named `U` to the top level namespace is appropriate. Users which need this functionality so often can define such a shortcut in their initialization file.



---

archive/issue_comments_111477.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2011-05-10T12:20:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9763#issuecomment-111477",
    "user": "https://github.com/burcin"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_111478.json:
```json
{
    "body": "**Reviewer:** Burcin Erocal",
    "created_at": "2011-05-10T12:20:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9763#issuecomment-111478",
    "user": "https://github.com/burcin"
}
```

**Reviewer:** Burcin Erocal



---

archive/issue_comments_111479.json:
```json
{
    "body": "<a id='comment:4'></a>\nAs burcin said, the idea was to have this as a replacement for the current units module, without removing the old one. (Another idea was to call it units2, but that looked kind of ugly)\n\nMaking `Units` derive from `SageObject` might be a good idea; however I didn't know much about Sage (nor do I now, actually) so I didn't consider this possibility. Maybe a Units ring could be made too.\n\nThe `U()` function was called this way so one could create units conveniently, like\n\n```python\nfrom metrology import U\nlength = U(\"1 m\")\n```\nHowever, it's not necessary to have this function on the top level namespace, and Python guidelines usually suggest something like\n\n```python\nimport metrology\nlength = metrology.U(\"1 m\")\n```\n\nAs for advantages/disadvantages, well, I don't remember them all, but here's a rough list:\n\n### Pros\n\n* Create units from a text string, including multiples and fractions.\n* LaTeX representation of units.\n* Abstraction of units, as (value, unit !SI value, unit dimmensions), which allows to know the mass-length-time decomposition of the magnitude.\n* `0 * 1m = 0 m`, not just `0`. Also, it's possible to convert from 0 degrees Celsius to Fahrenheit, which is impossible with the current `units` module.\n\n### Cons\n\n* `Units` is a class written from scratch, with all operations (`__add__()`, `__mul__()`...) coded explicitly.\n* Interoperability with other data types (for example, a matrix of units) might be messy.\n* The `units` module has a pretty nice documentation for each unit, not present in this module.\n* It's very incomplete, missing a lot of units.",
    "created_at": "2011-05-10T21:41:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9763#issuecomment-111479",
    "user": "https://github.com/cousteaulecommandant"
}
```

<a id='comment:4'></a>
As burcin said, the idea was to have this as a replacement for the current units module, without removing the old one. (Another idea was to call it units2, but that looked kind of ugly)

Making `Units` derive from `SageObject` might be a good idea; however I didn't know much about Sage (nor do I now, actually) so I didn't consider this possibility. Maybe a Units ring could be made too.

The `U()` function was called this way so one could create units conveniently, like

```python
from metrology import U
length = U("1 m")
```
However, it's not necessary to have this function on the top level namespace, and Python guidelines usually suggest something like

```python
import metrology
length = metrology.U("1 m")
```

As for advantages/disadvantages, well, I don't remember them all, but here's a rough list:

### Pros

* Create units from a text string, including multiples and fractions.
* LaTeX representation of units.
* Abstraction of units, as (value, unit !SI value, unit dimmensions), which allows to know the mass-length-time decomposition of the magnitude.
* `0 * 1m = 0 m`, not just `0`. Also, it's possible to convert from 0 degrees Celsius to Fahrenheit, which is impossible with the current `units` module.

### Cons

* `Units` is a class written from scratch, with all operations (`__add__()`, `__mul__()`...) coded explicitly.
* Interoperability with other data types (for example, a matrix of units) might be messy.
* The `units` module has a pretty nice documentation for each unit, not present in this module.
* It's very incomplete, missing a lot of units.



---

archive/issue_comments_111480.json:
```json
{
    "body": "<a id='comment:5'></a>\n(Apparently I forgot the space before each \"*\", resulting on a bad formatting. Since comments cannot be edited, I'll put the points again here for better readability)\n\n**Pros**\n\n* Create units from a text string, including multiples and fractions.\n* LaTeX representation of units.\n* Abstraction of units, as (value, unit SI value, unit dimmensions), which allows to know the mass-length-time decomposition of the magnitude.\n* `0 * 1m = 0 m`, not just `0`. Also, it's possible to convert from 0 degrees Celsius to Fahrenheit, which is impossible with the current `units` module.\n\n**Cons**\n\n* `Units` is a class written from scratch, with all operations (`__add__()`, `__mul__()`...) coded explicitly.\n* Interoperability with other data types (for example, a matrix of units) might be messy.\n* The `units` module has a pretty nice documentation for each unit, not present in this module.\n* It's very incomplete, missing a lot of units.",
    "created_at": "2011-05-10T21:50:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9763#issuecomment-111480",
    "user": "https://github.com/cousteaulecommandant"
}
```

<a id='comment:5'></a>
(Apparently I forgot the space before each "*", resulting on a bad formatting. Since comments cannot be edited, I'll put the points again here for better readability)

**Pros**

* Create units from a text string, including multiples and fractions.
* LaTeX representation of units.
* Abstraction of units, as (value, unit SI value, unit dimmensions), which allows to know the mass-length-time decomposition of the magnitude.
* `0 * 1m = 0 m`, not just `0`. Also, it's possible to convert from 0 degrees Celsius to Fahrenheit, which is impossible with the current `units` module.

**Cons**

* `Units` is a class written from scratch, with all operations (`__add__()`, `__mul__()`...) coded explicitly.
* Interoperability with other data types (for example, a matrix of units) might be messy.
* The `units` module has a pretty nice documentation for each unit, not present in this module.
* It's very incomplete, missing a lot of units.
