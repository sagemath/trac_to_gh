# Issue 9740: matrix plot is upside down and should wrap more matplotlib options

archive/issues_009740.json:
```json
{
    "body": "This patch:\n* flips the matrix so that it is right side up, and flips the y-axis to correctly label the rows, unless origin='lower' is specified.\n* Adds matplotlib's vmin and vmax parameters, which control the scaling\n* Adds matplotlib's norm parameter, which also controls the scaling\n\n\n\nAssignee: jason, was\n\nCC:  @rbeezer @kcrisman\n\nResolution: fixed\n\nAuthor: Jason Grout\n\nReviewer: Karl-Dieter Crisman\n\nMerged: sage-4.6.alpha3\n\nIssue created by migration from https://trac.sagemath.org/ticket/9740\n\n",
    "closed_at": "2010-10-03T06:36:03Z",
    "created_at": "2010-08-13T08:14:04Z",
    "labels": [
        "component: graphics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.6",
    "title": "matrix plot is upside down and should wrap more matplotlib options",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/9740",
    "user": "https://github.com/jasongrout"
}
```
This patch:
* flips the matrix so that it is right side up, and flips the y-axis to correctly label the rows, unless origin='lower' is specified.
* Adds matplotlib's vmin and vmax parameters, which control the scaling
* Adds matplotlib's norm parameter, which also controls the scaling



Assignee: jason, was

CC:  @rbeezer @kcrisman

Resolution: fixed

Author: Jason Grout

Reviewer: Karl-Dieter Crisman

Merged: sage-4.6.alpha3

Issue created by migration from https://trac.sagemath.org/ticket/9740





---

archive/issue_comments_120327.json:
```json
{
    "body": "<a id='comment:1'></a>\noh, and it also makes axes=False by default, since it looked really silly having axes\n\nand this patch also shifts the matrix by 0.5 so it is centered in the plot.",
    "created_at": "2010-08-13T08:14:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9740#issuecomment-120327",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:1'></a>
oh, and it also makes axes=False by default, since it looked really silly having axes

and this patch also shifts the matrix by 0.5 so it is centered in the plot.



---

archive/issue_comments_120328.json:
```json
{
    "body": "<a id='comment:2'></a>\nCCing people that might be interested in reviewing this.",
    "created_at": "2010-08-13T08:42:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9740#issuecomment-120328",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:2'></a>
CCing people that might be interested in reviewing this.



---

archive/issue_comments_120329.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2010-08-13T08:42:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9740#issuecomment-120329",
    "user": "https://github.com/jasongrout"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_120330.json:
```json
{
    "body": "<a id='comment:3'></a>\nIn what sense were the matrix plots wrong before?  I'm a little confused - the matrix plots I used in number theory seemed to be ok.  Also, what matrix plots have axes?  The ones I make only have frames, which look quite nice (except for being labeled wrong).   Anyway, posting a picture of \"before\" and \"after\" that is very clear would be helpful before one takes the time to wade through the mpl code :)\n\n#2189 is related, though I don't know if this fixes all the issues mentioned there (i.e. labeling).",
    "created_at": "2010-08-13T12:54:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9740#issuecomment-120330",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:3'></a>
In what sense were the matrix plots wrong before?  I'm a little confused - the matrix plots I used in number theory seemed to be ok.  Also, what matrix plots have axes?  The ones I make only have frames, which look quite nice (except for being labeled wrong).   Anyway, posting a picture of "before" and "after" that is very clear would be helpful before one takes the time to wade through the mpl code :)

#2189 is related, though I don't know if this fixes all the issues mentioned there (i.e. labeling).



---

archive/issue_comments_120331.json:
```json
{
    "body": "<a id='comment:4'></a>\nBefore:\n\n* axes=True was the default, so typically there were lines on the far right and far bottom of the plot going through the first row and first column of the matrix\n\n* matrices were plotted upside-down, where the first row was on the bottom of the matrix.\n\nYou're right that #2189 is related, but that patch will have to be rewritten so much that it's probably easiest to write it from scratch.  Thanks for pointing out the patch, though.  You're also right that we are solving a different problem here.  This patch does not fix the issue there.",
    "created_at": "2010-08-13T15:45:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9740#issuecomment-120331",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:4'></a>
Before:

* axes=True was the default, so typically there were lines on the far right and far bottom of the plot going through the first row and first column of the matrix

* matrices were plotted upside-down, where the first row was on the bottom of the matrix.

You're right that #2189 is related, but that patch will have to be rewritten so much that it's probably easiest to write it from scratch.  Thanks for pointing out the patch, though.  You're also right that we are solving a different problem here.  This patch does not fix the issue there.



---

archive/issue_comments_120332.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [jason](#comment%3A4):\n> Before:\n> \n> * axes=True was the default, so typically there were lines on the far right and far bottom of the plot going through the first row and first column of the matrix\n\n\nI don't remember seeing that.\n\n>  * matrices were plotted upside-down, where the first row was on the bottom of the matrix.\n\n\nHuh, that is weird, because I definitely didn't have that experience.\n\nAttached is a screenshot of what I get.  The top row is all the powers of 1 mod 7 (which are all 1), and the left row is all the 0th powers of a mod 7 (which are all 1).  The right row is Fermat's Little Theorem, that the 6th powers are also 1 mod 7.  The matrix itself is\n\n```\nsage: p=7\nsage: matrix(p-1,[mod(a,p)^b for a in range(1,p) for b in srange(p)])\n[1 1 1 1 1 1 1]\n[1 2 4 1 2 4 1]\n[1 3 2 6 4 5 1]\n[1 4 2 1 4 2 1]\n[1 5 4 6 2 3 1]\n[1 6 1 6 1 6 1]\n```\nI feel like I must be missing something.",
    "created_at": "2010-08-13T15:56:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9740#issuecomment-120332",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:5'></a>
Replying to [jason](#comment%3A4):
> Before:
> 
> * axes=True was the default, so typically there were lines on the far right and far bottom of the plot going through the first row and first column of the matrix


I don't remember seeing that.

>  * matrices were plotted upside-down, where the first row was on the bottom of the matrix.


Huh, that is weird, because I definitely didn't have that experience.

Attached is a screenshot of what I get.  The top row is all the powers of 1 mod 7 (which are all 1), and the left row is all the 0th powers of a mod 7 (which are all 1).  The right row is Fermat's Little Theorem, that the 6th powers are also 1 mod 7.  The matrix itself is

```
sage: p=7
sage: matrix(p-1,[mod(a,p)^b for a in range(1,p) for b in srange(p)])
[1 1 1 1 1 1 1]
[1 2 4 1 2 4 1]
[1 3 2 6 4 5 1]
[1 4 2 1 4 2 1]
[1 5 4 6 2 3 1]
[1 6 1 6 1 6 1]
```
I feel like I must be missing something.



---

archive/issue_comments_120333.json:
```json
{
    "body": "The matrix in an interact for p=7",
    "created_at": "2010-08-13T15:56:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9740#issuecomment-120333",
    "user": "https://github.com/kcrisman"
}
```

The matrix in an interact for p=7



---

archive/issue_comments_120334.json:
```json
{
    "body": "<a id='comment:6'></a>\nAttachment [Screen shot 2010-08-13 at 11.52.45 AM.png](tarball://root/attachments/some-uuid/ticket9740/Screen shot 2010-08-13 at 11.52.45 AM.png) by @jasongrout created at 2010-08-13 16:06:24\n\nCould you try the following two plots?\n\nmatrix_plot(identity_matrix(100))\n\nmatrix_plot(identity_matrix(100, sparse=True))",
    "created_at": "2010-08-13T16:06:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9740#issuecomment-120334",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:6'></a>
Attachment [Screen shot 2010-08-13 at 11.52.45 AM.png](tarball://root/attachments/some-uuid/ticket9740/Screen shot 2010-08-13 at 11.52.45 AM.png) by @jasongrout created at 2010-08-13 16:06:24

Could you try the following two plots?

matrix_plot(identity_matrix(100))

matrix_plot(identity_matrix(100, sparse=True))



---

archive/issue_comments_120335.json:
```json
{
    "body": "<a id='comment:7'></a>\n(that is *before* the patch, of course...)",
    "created_at": "2010-08-13T16:06:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9740#issuecomment-120335",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:7'></a>
(that is *before* the patch, of course...)



---

archive/issue_comments_120336.json:
```json
{
    "body": "<a id='comment:8'></a>\n> matrix_plot(identity_matrix(100))\n\nLooks fine, diagonal is from upper left to lower right, like the matrix. 0 (lowest input) is black, 1 (highest input) is white, I think this is as usual.  With cmap='jet' I get something I like :)  What do *you* get for this one?\n> matrix_plot(identity_matrix(100, sparse=True))\n\nYikes!  Two issues.  First, it is definitely flipped.  Second, what's up with the colors?  I get white for the off-diagonal zeros and blue for the diagonal.  My diagnosis: something going on with all that special code for sparse matrices.\n\nAnd now I see what you mean about the axes showing up.  I thought that was just part of the frame because my matrices tend to have blue or black around the edges, since the values are one!  Good catch with making axes=False in the future.",
    "created_at": "2010-08-13T16:16:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9740#issuecomment-120336",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:8'></a>
> matrix_plot(identity_matrix(100))

Looks fine, diagonal is from upper left to lower right, like the matrix. 0 (lowest input) is black, 1 (highest input) is white, I think this is as usual.  With cmap='jet' I get something I like :)  What do *you* get for this one?
> matrix_plot(identity_matrix(100, sparse=True))

Yikes!  Two issues.  First, it is definitely flipped.  Second, what's up with the colors?  I get white for the off-diagonal zeros and blue for the diagonal.  My diagnosis: something going on with all that special code for sparse matrices.

And now I see what you mean about the axes showing up.  I thought that was just part of the frame because my matrices tend to have blue or black around the edges, since the values are one!  Good catch with making axes=False in the future.



---

archive/issue_comments_120337.json:
```json
{
    "body": "<a id='comment:9'></a>\nAfter the patch, the labels are corrected.  The issue of flipping the matrix is also affected by a matplotlibrc variable, so you might have the \"correct\" value of origin='upper'.  Of course, this is ignored for sparse matrices.  That patch corrects all this so that things are consistent.\n\nFor sparse matrices---the correct picture is whote for off-diagonal and blue for diagonal.  That uses spy underneath, which does not plot zero entries, which is exactly what you want for sparse matrices.",
    "created_at": "2010-08-13T16:21:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9740#issuecomment-120337",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:9'></a>
After the patch, the labels are corrected.  The issue of flipping the matrix is also affected by a matplotlibrc variable, so you might have the "correct" value of origin='upper'.  Of course, this is ignored for sparse matrices.  That patch corrects all this so that things are consistent.

For sparse matrices---the correct picture is whote for off-diagonal and blue for diagonal.  That uses spy underneath, which does not plot zero entries, which is exactly what you want for sparse matrices.



---

archive/issue_comments_120338.json:
```json
{
    "body": "<a id='comment:10'></a>\nGot it.  And sure enough, in my top directory (i.e., above my user account) there is one, probably placed there eons ago by some primitive Sage installation, with\n\n```\nimage.origin : upper             # lower | upper\n```\nIs that it?\n\nI hate to be picky, but I have another question.\n\n```\nGenerally matrices are plotted with the (0,0) entry in the upper \nright.  However, sometimes if we are plotting an image, we'd like \nthe (0,0) entry to be in the lower left. \n```\nShould the first word in the second line be 'left'?  And if not, please explain.",
    "created_at": "2010-08-13T16:46:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9740#issuecomment-120338",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:10'></a>
Got it.  And sure enough, in my top directory (i.e., above my user account) there is one, probably placed there eons ago by some primitive Sage installation, with

```
image.origin : upper             # lower | upper
```
Is that it?

I hate to be picky, but I have another question.

```
Generally matrices are plotted with the (0,0) entry in the upper 
right.  However, sometimes if we are plotting an image, we'd like 
the (0,0) entry to be in the lower left. 
```
Should the first word in the second line be 'left'?  And if not, please explain.



---

archive/issue_comments_120339.json:
```json
{
    "body": "<a id='comment:11'></a>\nYep, that's it.  And yes, you're right about the doc correction.  New patch coming up.",
    "created_at": "2010-08-13T16:59:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9740#issuecomment-120339",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:11'></a>
Yep, that's it.  And yes, you're right about the doc correction.  New patch coming up.



---

archive/issue_comments_120340.json:
```json
{
    "body": "<a id='comment:12'></a>\nI should have made that a separate patch; sorry.  The only change is that one word 'right'->'left'",
    "created_at": "2010-08-13T17:06:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9740#issuecomment-120340",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:12'></a>
I should have made that a separate patch; sorry.  The only change is that one word 'right'->'left'



---

archive/issue_comments_120341.json:
```json
{
    "body": "<a id='comment:13'></a>\nA new version of the patch that:\n\n* makes it possible to plot dense matrices upside-down\n* ensures tick labels are integrs.",
    "created_at": "2010-08-14T16:25:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9740#issuecomment-120341",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:13'></a>
A new version of the patch that:

* makes it possible to plot dense matrices upside-down
* ensures tick labels are integrs.



---

archive/issue_comments_120342.json:
```json
{
    "body": "<a id='comment:14'></a>\nJust one more enhancement to bring sparse plotting in line with dense plotting: we were automatically converting to floating point numbers in the dense case, which allowed plotting matrices over finite fields, for example.  The coerce-float patch enables this for sparse matrices as well.",
    "created_at": "2010-09-07T03:29:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9740#issuecomment-120342",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:14'></a>
Just one more enhancement to bring sparse plotting in line with dense plotting: we were automatically converting to floating point numbers in the dense case, which allowed plotting matrices over finite fields, for example.  The coerce-float patch enables this for sparse matrices as well.



---

archive/issue_comments_120343.json:
```json
{
    "body": "<a id='comment:15'></a>\nI'm rebasing this for 4.6.alpha1 momentarily...",
    "created_at": "2010-09-28T16:02:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9740#issuecomment-120343",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:15'></a>
I'm rebasing this for 4.6.alpha1 momentarily...



---

archive/issue_comments_120344.json:
```json
{
    "body": "<a id='comment:16'></a>\nI've rebased to 4.6.alpha1 and combined the two patches.  kcrisman: can you review this?",
    "created_at": "2010-09-28T16:04:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9740#issuecomment-120344",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:16'></a>
I've rebased to 4.6.alpha1 and combined the two patches.  kcrisman: can you review this?



---

archive/issue_comments_120345.json:
```json
{
    "body": "Attachment [trac-9740-matrixplot.patch](tarball://root/attachments/some-uuid/ticket9740/trac-9740-matrixplot.patch) by @jasongrout created at 2010-09-28 17:22:52\n\napply only this patch; rebased to 4.6.alpha1",
    "created_at": "2010-09-28T17:22:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9740#issuecomment-120345",
    "user": "https://github.com/jasongrout"
}
```

Attachment [trac-9740-matrixplot.patch](tarball://root/attachments/some-uuid/ticket9740/trac-9740-matrixplot.patch) by @jasongrout created at 2010-09-28 17:22:52

apply only this patch; rebased to 4.6.alpha1



---

archive/issue_comments_120346.json:
```json
{
    "body": "<a id='comment:17'></a>\nptestlong in 4.6.alpha1 (Ubuntu 10.04 64-bit) passes with the following tickets applied in order: #9221 (and new spkg), #9740, #9746, #4342.",
    "created_at": "2010-09-28T19:08:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9740#issuecomment-120346",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:17'></a>
ptestlong in 4.6.alpha1 (Ubuntu 10.04 64-bit) passes with the following tickets applied in order: #9221 (and new spkg), #9740, #9746, #4342.



---

archive/issue_comments_120347.json:
```json
{
    "body": "<a id='comment:18'></a>\nExplain `axes_integer`.  Also, the options for the locators weren't always\n\n```\nlocator_options=dict(nbins=9,steps=[1,2,5,10],integer=axes_integer)\n```\nin all cases - will this make anything different, particularly the `steps` addition?  That stuff should have been a separate ticket, or maybe on #9221 ;)\n\nExplain\n\n```\nlimits[k]-=0.5\n```\nI assume this makes it so that the matrix has `0,1,2,3` as opposed to putting entries between `0-1`, `1-2`, etc.  I can't check this because the branch I'm making for this decided to rebuild documentation, which takes a while... sigh.\n\nGood catch on the complex guys.\n\nJust point of information to other readers; very minor doc issues are corrected in #9746.",
    "created_at": "2010-09-28T19:33:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9740#issuecomment-120347",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:18'></a>
Explain `axes_integer`.  Also, the options for the locators weren't always

```
locator_options=dict(nbins=9,steps=[1,2,5,10],integer=axes_integer)
```
in all cases - will this make anything different, particularly the `steps` addition?  That stuff should have been a separate ticket, or maybe on #9221 ;)

Explain

```
limits[k]-=0.5
```
I assume this makes it so that the matrix has `0,1,2,3` as opposed to putting entries between `0-1`, `1-2`, etc.  I can't check this because the branch I'm making for this decided to rebuild documentation, which takes a while... sigh.

Good catch on the complex guys.

Just point of information to other readers; very minor doc issues are corrected in #9746.



---

archive/issue_comments_120348.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [kcrisman](#comment%3A18):\n> Explain `axes_integer`.  \n> Explain\n> \n> ```\n> limits[k]-=0.5\n> ```\n> I assume this makes it so that the matrix has `0,1,2,3` as opposed to putting entries between `0-1`, `1-2`, etc.  I can't check this because the branch I'm making for this decided to rebuild documentation, which takes a while... sigh.\n\n\nOkay, I think that these two things combine to make this happen, after reading [this](http://matplotlib.sourceforge.net/api/ticker_api.html#matplotlib.ticker.MaxNLocator) again.\n\nI still don't know if I like sparse and dense matrices looking so different.  So the idea is that the little circle points indicate sparse, while the boxes indicate dense?  I'm thinking of \n\n```\nsage: b=random_matrix(GF(2),12,sparse=True,density=0.99)\nsage: matrix_plot(b)\n\nsage: b=random_matrix(GF(2),12,density=0.99)\nsage: matrix_plot(b)\n```\n\nAlso, my favorite use case doesn't work yet, though to be fair it didn't work before, so this shouldn't hold things up (and is a currently open ticket).  But just in case, is there a quick way to get this now?  After all, one might want the first row to be labeled 1 sometimes!\n\n```\nsage: M = matrix(ZZ,[[1,2,3,4],[1,4,9,16],[1,8,27,64]])\nsage: matrix_plot(M)\nsage: matrix_plot(M,ticks=[1,2,3,4])\nERROR: An unexpected error occurred while tokenizing input\n<snip>\n   1992 \n   1993             from matplotlib.ticker import OldScalarFormatter, MaxNLocator, MultipleLocator, FixedLocator, NullLocator, Locator\n-> 1994             x_locator, y_locator = ticks\n   1995             if x_locator is None:\n   1996                 x_locator = MaxNLocator(**locator_options)\n\nValueError: too many values to unpack\n```\n\nI should be able to finish reviewing this later on today.",
    "created_at": "2010-09-28T20:00:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9740#issuecomment-120348",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:19'></a>
Replying to [kcrisman](#comment%3A18):
> Explain `axes_integer`.  
> Explain
> 
> ```
> limits[k]-=0.5
> ```
> I assume this makes it so that the matrix has `0,1,2,3` as opposed to putting entries between `0-1`, `1-2`, etc.  I can't check this because the branch I'm making for this decided to rebuild documentation, which takes a while... sigh.


Okay, I think that these two things combine to make this happen, after reading [this](http://matplotlib.sourceforge.net/api/ticker_api.html#matplotlib.ticker.MaxNLocator) again.

I still don't know if I like sparse and dense matrices looking so different.  So the idea is that the little circle points indicate sparse, while the boxes indicate dense?  I'm thinking of 

```
sage: b=random_matrix(GF(2),12,sparse=True,density=0.99)
sage: matrix_plot(b)

sage: b=random_matrix(GF(2),12,density=0.99)
sage: matrix_plot(b)
```

Also, my favorite use case doesn't work yet, though to be fair it didn't work before, so this shouldn't hold things up (and is a currently open ticket).  But just in case, is there a quick way to get this now?  After all, one might want the first row to be labeled 1 sometimes!

```
sage: M = matrix(ZZ,[[1,2,3,4],[1,4,9,16],[1,8,27,64]])
sage: matrix_plot(M)
sage: matrix_plot(M,ticks=[1,2,3,4])
ERROR: An unexpected error occurred while tokenizing input
<snip>
   1992 
   1993             from matplotlib.ticker import OldScalarFormatter, MaxNLocator, MultipleLocator, FixedLocator, NullLocator, Locator
-> 1994             x_locator, y_locator = ticks
   1995             if x_locator is None:
   1996                 x_locator = MaxNLocator(**locator_options)

ValueError: too many values to unpack
```

I should be able to finish reviewing this later on today.



---

archive/issue_comments_120349.json:
```json
{
    "body": "<a id='comment:20'></a>\nI fixed the issues you mentioned.  I also changed the option name to `ticks_integer` to be more consistent with the new ticks options.\n\nYes, the defaults may change slightly with the steps option.  I don't know why I didn't put in those steps defaults before; they look better, and this will provide consistency to have the same steps options for different calls.  Possibly it should have gone on another ticket, but I already had to consolidate things for the integer option.",
    "created_at": "2010-09-28T20:02:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9740#issuecomment-120349",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:20'></a>
I fixed the issues you mentioned.  I also changed the option name to `ticks_integer` to be more consistent with the new ticks options.

Yes, the defaults may change slightly with the steps option.  I don't know why I didn't put in those steps defaults before; they look better, and this will provide consistency to have the same steps options for different calls.  Possibly it should have gone on another ticket, but I already had to consolidate things for the integer option.



---

archive/issue_comments_120350.json:
```json
{
    "body": "<a id='comment:21'></a>\nI didn't fix the issues you mentioned in http://trac.sagemath.org/sage_trac/ticket/9740#comment:19, though.",
    "created_at": "2010-09-28T20:10:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9740#issuecomment-120350",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:21'></a>
I didn't fix the issues you mentioned in http://trac.sagemath.org/sage_trac/ticket/9740#comment:19, though.



---

archive/issue_comments_120351.json:
```json
{
    "body": "<a id='comment:22'></a>\nReplying to [kcrisman](#comment%3A19):\n> Replying to [kcrisman](#comment%3A18):\n> > Explain `axes_integer`.  \n> > Explain\n> > \n> > ```\n> > limits[k]-=0.5\n> > ```\n> > I assume this makes it so that the matrix has `0,1,2,3` as opposed to putting entries between `0-1`, `1-2`, etc.  I can't check this because the branch I'm making for this decided to rebuild documentation, which takes a while... sigh.\n\n> \n> Okay, I think that these two things combine to make this happen, after reading [this](http://matplotlib.sourceforge.net/api/ticker_api.html#matplotlib.ticker.MaxNLocator) again.\n> \n> I still don't know if I like sparse and dense matrices looking so different.  So the idea is that the little circle points indicate sparse, while the boxes indicate dense?  I'm thinking of \n> \n> ```\n> sage: b=random_matrix(GF(2),12,sparse=True,density=0.99)\n> sage: matrix_plot(b)\n> \n> sage: b=random_matrix(GF(2),12,density=0.99)\n> sage: matrix_plot(b)\n> ```\n\n\nYes; you can choose the marker used in sparse matrices.  Aside from the fact that this is a fundamental difference in matplotlib, it does also make sense.  In dense matrices, most entries are nonzero, so you color every pixel/square.  In sparse matrices, most entries are zero, so you only put a marker where there is a nonzero.\n\n\n> \n> Also, my favorite use case doesn't work yet, though to be fair it didn't work before, so this shouldn't hold things up (and is a currently open ticket).  But just in case, is there a quick way to get this now?  After all, one might want the first row to be labeled 1 sometimes!\n> \n> ```\n> sage: M = matrix(ZZ,[[1,2,3,4],[1,4,9,16],[1,8,27,64]])\n> sage: matrix_plot(M)\n> sage: matrix_plot(M,ticks=[1,2,3,4])\n> ERROR: An unexpected error occurred while tokenizing input\n> <snip>\n>    1992 \n>    1993             from matplotlib.ticker import OldScalarFormatter, MaxNLocator, MultipleLocator, FixedLocator, NullLocator, Locator\n> -> 1994             x_locator, y_locator = ticks\n>    1995             if x_locator is None:\n>    1996                 x_locator = MaxNLocator(**locator_options)\n> \n> ValueError: too many values to unpack\n> ```\n\n\nYes, definitely another ticket.",
    "created_at": "2010-09-28T20:13:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9740#issuecomment-120351",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:22'></a>
Replying to [kcrisman](#comment%3A19):
> Replying to [kcrisman](#comment%3A18):
> > Explain `axes_integer`.  
> > Explain
> > 
> > ```
> > limits[k]-=0.5
> > ```
> > I assume this makes it so that the matrix has `0,1,2,3` as opposed to putting entries between `0-1`, `1-2`, etc.  I can't check this because the branch I'm making for this decided to rebuild documentation, which takes a while... sigh.

> 
> Okay, I think that these two things combine to make this happen, after reading [this](http://matplotlib.sourceforge.net/api/ticker_api.html#matplotlib.ticker.MaxNLocator) again.
> 
> I still don't know if I like sparse and dense matrices looking so different.  So the idea is that the little circle points indicate sparse, while the boxes indicate dense?  I'm thinking of 
> 
> ```
> sage: b=random_matrix(GF(2),12,sparse=True,density=0.99)
> sage: matrix_plot(b)
> 
> sage: b=random_matrix(GF(2),12,density=0.99)
> sage: matrix_plot(b)
> ```


Yes; you can choose the marker used in sparse matrices.  Aside from the fact that this is a fundamental difference in matplotlib, it does also make sense.  In dense matrices, most entries are nonzero, so you color every pixel/square.  In sparse matrices, most entries are zero, so you only put a marker where there is a nonzero.


> 
> Also, my favorite use case doesn't work yet, though to be fair it didn't work before, so this shouldn't hold things up (and is a currently open ticket).  But just in case, is there a quick way to get this now?  After all, one might want the first row to be labeled 1 sometimes!
> 
> ```
> sage: M = matrix(ZZ,[[1,2,3,4],[1,4,9,16],[1,8,27,64]])
> sage: matrix_plot(M)
> sage: matrix_plot(M,ticks=[1,2,3,4])
> ERROR: An unexpected error occurred while tokenizing input
> <snip>
>    1992 
>    1993             from matplotlib.ticker import OldScalarFormatter, MaxNLocator, MultipleLocator, FixedLocator, NullLocator, Locator
> -> 1994             x_locator, y_locator = ticks
>    1995             if x_locator is None:
>    1996                 x_locator = MaxNLocator(**locator_options)
> 
> ValueError: too many values to unpack
> ```


Yes, definitely another ticket.



---

archive/issue_comments_120352.json:
```json
{
    "body": "<a id='comment:23'></a>\nof course, your ticks example above does *not* label the first row 1; it would only put a tick on the *second* row (if it worked).  You probably want to change the tick_formatter argument to relabel things.",
    "created_at": "2010-09-28T20:15:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9740#issuecomment-120352",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:23'></a>
of course, your ticks example above does *not* label the first row 1; it would only put a tick on the *second* row (if it worked).  You probably want to change the tick_formatter argument to relabel things.



---

archive/issue_comments_120353.json:
```json
{
    "body": "<a id='comment:24'></a>\nReplying to [jason](#comment%3A21):\n> I didn't fix the issues you mentioned in http://trac.sagemath.org/sage_trac/ticket/9740#comment:19, though.\n\nThat's okay, they are preexisting behavior and still similar, so can be discussed elsewhere.\n\nYou beat me to realizing the rebase needed now in #4342.  Luckily I could just roll that back... someday I'll use queues.",
    "created_at": "2010-09-28T20:17:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9740#issuecomment-120353",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:24'></a>
Replying to [jason](#comment%3A21):
> I didn't fix the issues you mentioned in http://trac.sagemath.org/sage_trac/ticket/9740#comment:19, though.

That's okay, they are preexisting behavior and still similar, so can be discussed elsewhere.

You beat me to realizing the rebase needed now in #4342.  Luckily I could just roll that back... someday I'll use queues.



---

archive/issue_comments_120354.json:
```json
{
    "body": "<a id='comment:25'></a>\nOkay, in general this is great!  I love the live documentation for testing, by the way - don't know why I never thought of that before.\n\nTwo things, which perhaps should still be addressed - what do you think?\n\nFirst, the error message with the `matrix_plot(A,marker=',')` is not very helpful when you choose a different marker (for instance, '<' works (and is cool with small matrices) but ';' doesn't).  I realize this isn't part of the ticket per se, so maybe this should be a followup.\n\nSecond, there are two instances of \n\n```\nExtra options will get passed on to show(), as long as they are valid:\n```\nin the documentation for `MatrixPlot`.  Again, maybe this is better addressed on a followup ticket.\n\nI like that the error message for when `vmin` and `vmax` clash is actually helpful, even though it's an mpl error.\n\nI also just noticed that the doc for `matrix_plot` doesn't mention that the default for `norm` is `None`, though it is.  This can probably be fixed very easily.",
    "created_at": "2010-09-29T03:10:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9740#issuecomment-120354",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:25'></a>
Okay, in general this is great!  I love the live documentation for testing, by the way - don't know why I never thought of that before.

Two things, which perhaps should still be addressed - what do you think?

First, the error message with the `matrix_plot(A,marker=',')` is not very helpful when you choose a different marker (for instance, '<' works (and is cool with small matrices) but ';' doesn't).  I realize this isn't part of the ticket per se, so maybe this should be a followup.

Second, there are two instances of 

```
Extra options will get passed on to show(), as long as they are valid:
```
in the documentation for `MatrixPlot`.  Again, maybe this is better addressed on a followup ticket.

I like that the error message for when `vmin` and `vmax` clash is actually helpful, even though it's an mpl error.

I also just noticed that the doc for `matrix_plot` doesn't mention that the default for `norm` is `None`, though it is.  This can probably be fixed very easily.



---

archive/issue_comments_120355.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2010-09-29T03:32:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9740#issuecomment-120355",
    "user": "https://github.com/kcrisman"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_120356.json:
```json
{
    "body": "<a id='comment:26'></a>\n> Second, there are two instances of \n> \n> ```\n> Extra options will get passed on to show(), as long as they are valid:\n> ```\n> in the documentation for `MatrixPlot`.  Again, maybe this is better addressed on a followup ticket.\n\nOr in #9746?\n\n> I also just noticed that the doc for `matrix_plot` doesn't mention that the default for `norm` is `None`, though it is.  This can probably be fixed very easily.\n\nAfter thinking about it, since the ticket says to wrap more mpl options, this should be addressed on this ticket.",
    "created_at": "2010-09-29T03:32:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9740#issuecomment-120356",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:26'></a>
> Second, there are two instances of 
> 
> ```
> Extra options will get passed on to show(), as long as they are valid:
> ```
> in the documentation for `MatrixPlot`.  Again, maybe this is better addressed on a followup ticket.

Or in #9746?

> I also just noticed that the doc for `matrix_plot` doesn't mention that the default for `norm` is `None`, though it is.  This can probably be fixed very easily.

After thinking about it, since the ticket says to wrap more mpl options, this should be addressed on this ticket.



---

archive/issue_comments_120357.json:
```json
{
    "body": "Reviewer: Karl-Dieter Crisman",
    "created_at": "2010-09-29T03:33:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9740#issuecomment-120357",
    "user": "https://github.com/kcrisman"
}
```

Reviewer: Karl-Dieter Crisman



---

archive/issue_comments_120358.json:
```json
{
    "body": "apply on top of previous patches",
    "created_at": "2010-09-29T04:21:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9740#issuecomment-120358",
    "user": "https://github.com/jasongrout"
}
```

apply on top of previous patches



---

archive/issue_comments_120359.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2010-09-29T04:22:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9740#issuecomment-120359",
    "user": "https://github.com/jasongrout"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_120360.json:
```json
{
    "body": "<a id='comment:28'></a>\nAttachment [9740-review-fixes.patch](tarball://root/attachments/some-uuid/ticket9740/9740-review-fixes.patch) by @jasongrout created at 2010-09-29 04:22:44\n\nI updated the review-fixes patch to take care of the issues you brought up.  I also polished two more references in the docs.",
    "created_at": "2010-09-29T04:22:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9740#issuecomment-120360",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:28'></a>
Attachment [9740-review-fixes.patch](tarball://root/attachments/some-uuid/ticket9740/9740-review-fixes.patch) by @jasongrout created at 2010-09-29 04:22:44

I updated the review-fixes patch to take care of the issues you brought up.  I also polished two more references in the docs.



---

archive/issue_comments_120361.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2010-09-29T17:53:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9740#issuecomment-120361",
    "user": "https://github.com/kcrisman"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_120362.json:
```json
{
    "body": "<a id='comment:29'></a>\nThanks a ton - the only other thing I saw is fixed in #9746, so all is well, other than stuff above that can go in another ticket.\n\nPositive review.",
    "created_at": "2010-09-29T17:53:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9740#issuecomment-120362",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:29'></a>
Thanks a ton - the only other thing I saw is fixed in #9746, so all is well, other than stuff above that can go in another ticket.

Positive review.



---

archive/issue_comments_120363.json:
```json
{
    "body": "Merged: sage-4.6.alpha3",
    "created_at": "2010-10-03T06:36:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9740#issuecomment-120363",
    "user": "https://github.com/qed777"
}
```

Merged: sage-4.6.alpha3



---

archive/issue_comments_120364.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2010-10-03T06:36:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9740#issuecomment-120364",
    "user": "https://github.com/qed777"
}
```

Resolution: fixed



---

archive/issue_events_029601.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2010-10-03T06:36:03Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/9740",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9740#event-29601"
}
```
