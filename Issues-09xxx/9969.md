# Issue 9969: Update extension code for mpmath-0.17

archive/issues_009968.json:
```json
{
    "assignees": [],
    "body": "The patch adds fast Cython version of some more mpmath functions to sage.libs.mpmath.\n\nThis ticket contains a new spkg for mpmath-0.17 and two patches\nthat need to be applied to sage itself. First mpmath_update_fixed_4.6.1.patch, then truediv_fix.patch.\n\nIt can be tested with:\n\n```\nsage: import mpmath\nsage: mpmath.runtests()\nsage: mpmath.doctests()\n```\nNew SPKG: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpmath-0.17.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpmath-0.17.spkg)\n\nApply:\n* [attachment: mpmath_update_fixed_4.6.1.patch](https://github.com/sagemath/sage/files/ticket9969/mpmath_update_fixed_4.6.1.patch.gz)\n* [attachment: truediv_fix.patch](https://github.com/sagemath/sage/files/ticket9969/truediv_fix.patch.gz)\n\nComponent: **packages: standard**\n\nAuthor: **Fredrik Johansson**\n\nReviewer: **Fran\u00e7ois Bissey**\n\nMerged: **sage-4.7.alpha5**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/9969_\n\n",
    "closed_at": "2011-05-06T07:19:20Z",
    "created_at": "2010-09-22T13:16:04Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%20blocker%20/%201",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Update extension code for mpmath-0.17",
    "type": "issue",
    "updated_at": "2011-05-06T07:19:20Z",
    "url": "https://github.com/sagemath/sage/issues/9969",
    "user": "https://github.com/fredrik-johansson"
}
```
The patch adds fast Cython version of some more mpmath functions to sage.libs.mpmath.

This ticket contains a new spkg for mpmath-0.17 and two patches
that need to be applied to sage itself. First mpmath_update_fixed_4.6.1.patch, then truediv_fix.patch.

It can be tested with:

```
sage: import mpmath
sage: mpmath.runtests()
sage: mpmath.doctests()
```
New SPKG: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpmath-0.17.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpmath-0.17.spkg)

Apply:
* [attachment: mpmath_update_fixed_4.6.1.patch](https://github.com/sagemath/sage/files/ticket9969/mpmath_update_fixed_4.6.1.patch.gz)
* [attachment: truediv_fix.patch](https://github.com/sagemath/sage/files/ticket9969/truediv_fix.patch.gz)

Component: **packages: standard**

Author: **Fredrik Johansson**

Reviewer: **Fran√ßois Bissey**

Merged: **sage-4.7.alpha5**

_Issue created by migration from https://trac.sagemath.org/ticket/9969_





---

archive/issue_events_128551.json:
```json
{
    "actor": "https://github.com/fredrik-johansson",
    "created_at": "2010-09-22T13:16:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "0000b0",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9969#event-128551"
}
```



---

archive/issue_events_128552.json:
```json
{
    "actor": "https://github.com/fredrik-johansson",
    "created_at": "2010-09-22T13:16:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9969#event-128552"
}
```



---

archive/issue_events_128553.json:
```json
{
    "actor": "https://github.com/fredrik-johansson",
    "created_at": "2010-09-22T13:16:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9969#event-128553"
}
```



---

archive/issue_comments_090733.json:
```json
{
    "body": "Attachment: **[14600.patch.gz](https://github.com/sagemath/sage/files/ticket9969/14600.patch.gz)**\n\nupdated mpmath Cython extension code",
    "created_at": "2010-09-22T13:16:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9969#issuecomment-90733",
    "user": "https://github.com/fredrik-johansson"
}
```

Attachment: **[14600.patch.gz](https://github.com/sagemath/sage/files/ticket9969/14600.patch.gz)**

updated mpmath Cython extension code



---

archive/issue_comments_090734.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nHere is an spkg: http://sage.math.washington.edu/home/fredrik/mpmath-0.16.spkg\n\nIt should work fine together with the patch. Sorry for the very long delay!",
    "created_at": "2010-10-30T21:42:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9969#issuecomment-90734",
    "user": "https://github.com/fredrik-johansson"
}
```

<div id="comment:1" align="right">comment:1</div>

Here is an spkg: http://sage.math.washington.edu/home/fredrik/mpmath-0.16.spkg

It should work fine together with the patch. Sorry for the very long delay!



---

archive/issue_events_128554.json:
```json
{
    "actor": "https://github.com/fredrik-johansson",
    "created_at": "2010-10-30T21:42:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9969#event-128554"
}
```



---

archive/issue_events_128555.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-11-02T22:23:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9969#event-128555"
}
```



---

archive/issue_events_128556.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-11-02T22:23:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9969#event-128556"
}
```



---

archive/issue_comments_090735.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nREPORT:\n\n* All tests passon sage.math.\n\n*  Your code needs \"::\\n\\n\" before any sage sessions for sphinx to format it right.\nSee the template here and note rightafterwords: http://sagemath.blogspot.com/\nright now if somebody introspects one of your functions in the notebook, sphinx will butcher it.\n\n* You define \"isqrt\" but sage integers already have an isqrt method that is exactly the same.  Clarify in the documentation the distinction.\n\nBug me again by email or chat when you've posted another patch (or patch on top of the above) that fixes the above two little things.",
    "created_at": "2010-11-02T22:23:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9969#issuecomment-90735",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:2" align="right">comment:2</div>

REPORT:

* All tests passon sage.math.

*  Your code needs "::\n\n" before any sage sessions for sphinx to format it right.
See the template here and note rightafterwords: http://sagemath.blogspot.com/
right now if somebody introspects one of your functions in the notebook, sphinx will butcher it.

* You define "isqrt" but sage integers already have an isqrt method that is exactly the same.  Clarify in the documentation the distinction.

Bug me again by email or chat when you've posted another patch (or patch on top of the above) that fixes the above two little things.



---

archive/issue_comments_090736.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nOh, could you have at least a short comment explaining what every single function does.  E.g.,\n\n```\ncdef cy_exp_basecase(mpz_t y, mpz_t x, int prec):\n     # <what this function does>\n```",
    "created_at": "2010-11-02T22:25:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9969#issuecomment-90736",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:3" align="right">comment:3</div>

Oh, could you have at least a short comment explaining what every single function does.  E.g.,

```
cdef cy_exp_basecase(mpz_t y, mpz_t x, int prec):
     # <what this function does>
```



---

archive/issue_comments_090737.json:
```json
{
    "body": "Attachment: **[docstring-fixes.patch.gz](https://github.com/sagemath/sage/files/ticket9969/docstring-fixes.patch.gz)**",
    "created_at": "2010-11-19T14:57:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9969#issuecomment-90737",
    "user": "https://github.com/fredrik-johansson"
}
```

Attachment: **[docstring-fixes.patch.gz](https://github.com/sagemath/sage/files/ticket9969/docstring-fixes.patch.gz)**



---

archive/issue_comments_090738.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nAdded second patch with docstring fixes.",
    "created_at": "2010-11-19T15:01:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9969#issuecomment-90738",
    "user": "https://github.com/fredrik-johansson"
}
```

<div id="comment:4" align="right">comment:4</div>

Added second patch with docstring fixes.



---

archive/issue_comments_090739.json:
```json
{
    "body": "Author: **fredrik.johansson**",
    "created_at": "2010-11-19T15:01:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9969#issuecomment-90739",
    "user": "https://github.com/fredrik-johansson"
}
```

Author: **fredrik.johansson**



---

archive/issue_events_128557.json:
```json
{
    "actor": "https://github.com/fredrik-johansson",
    "created_at": "2010-11-19T15:01:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9969#event-128557"
}
```



---

archive/issue_events_128558.json:
```json
{
    "actor": "https://github.com/fredrik-johansson",
    "created_at": "2010-11-19T15:01:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9969#event-128558"
}
```



---

archive/issue_comments_090740.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nIf I understand correctly you need to apply 14600.patch first, then docstring-fixes.patch?\nThis goes in sage-on-gentoo tonight for testing.",
    "created_at": "2011-01-27T08:51:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9969#issuecomment-90740",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:6" align="right">comment:6</div>

If I understand correctly you need to apply 14600.patch first, then docstring-fixes.patch?
This goes in sage-on-gentoo tonight for testing.



---

archive/issue_comments_090741.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI forgot, for it to go in sage proper a new spkg will be needed. Are you working on that?",
    "created_at": "2011-01-27T08:55:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9969#issuecomment-90741",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:7" align="right">comment:7</div>

I forgot, for it to go in sage proper a new spkg will be needed. Are you working on that?



---

archive/issue_comments_090742.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nYes, the patches should be applied in that order.\n\nThe spkg was linked in a post above: http://sage.math.washington.edu/home/fredrik/mpmath-0.16.spkg",
    "created_at": "2011-01-27T09:40:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9969#issuecomment-90742",
    "user": "https://github.com/fredrik-johansson"
}
```

<div id="comment:8" align="right">comment:8</div>

Yes, the patches should be applied in that order.

The spkg was linked in a post above: http://sage.math.washington.edu/home/fredrik/mpmath-0.16.spkg



---

archive/issue_comments_090743.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI should get a reader since I am obviously blind :)\nI say we try to get it formally in 4.7, I rewrite the\ndescription a little bit.",
    "created_at": "2011-01-27T10:04:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9969#issuecomment-90743",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:9" align="right">comment:9</div>

I should get a reader since I am obviously blind :)
I say we try to get it formally in 4.7, I rewrite the
description a little bit.



---

archive/issue_comments_090744.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,7 @@\n The patch adds fast Cython version of some more mpmath functions to sage.libs.mpmath.\n \n-This should wait to be merged until mpmath 0.16 gets released (I will do this soon). Right now, it can be tested with an svn trunk checkout of mpmath.\n+This ticket contains a new spkg for mpmath-0.16 and two patches\n+that need to be applied to sage itself. First 14600.patch, then docstring-fixes.patch.\n \n It can be tested with:\n \n@@ -9,3 +10,6 @@\n sage: mpmath.runtests()\n sage: mpmath.doctests()\n ```\n+1. [http://sage.math.washington.edu/home/fredrik/mpmath-0.16.spkg](http://sage.math.washington.edu/home/fredrik/mpmath-0.16.spkg)\n+2. [attachment: 14600.patch](https://github.com/sagemath/sage/files/ticket9969/14600.patch.gz)\n+3. [attachment: docstring-fixes.patch](https://github.com/sagemath/sage/files/ticket9969/docstring-fixes.patch.gz)\n``````\n",
    "created_at": "2011-01-27T10:04:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9969#issuecomment-90744",
    "user": "https://github.com/kiwifb"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,7 @@
 The patch adds fast Cython version of some more mpmath functions to sage.libs.mpmath.
 
-This should wait to be merged until mpmath 0.16 gets released (I will do this soon). Right now, it can be tested with an svn trunk checkout of mpmath.
+This ticket contains a new spkg for mpmath-0.16 and two patches
+that need to be applied to sage itself. First 14600.patch, then docstring-fixes.patch.
 
 It can be tested with:
 
@@ -9,3 +10,6 @@
 sage: mpmath.runtests()
 sage: mpmath.doctests()
 ```
+1. [http://sage.math.washington.edu/home/fredrik/mpmath-0.16.spkg](http://sage.math.washington.edu/home/fredrik/mpmath-0.16.spkg)
+2. [attachment: 14600.patch](https://github.com/sagemath/sage/files/ticket9969/14600.patch.gz)
+3. [attachment: docstring-fixes.patch](https://github.com/sagemath/sage/files/ticket9969/docstring-fixes.patch.gz)
``````




---

archive/issue_events_128559.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2011-01-27T10:04:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "milestone_number": null,
    "milestone_title": "sage-4.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9969#event-128559"
}
```



---

archive/issue_comments_090745.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI just saw your post about mpmath-0.17 release, are you planing to update this ticket\nfor mpmath 0.17?",
    "created_at": "2011-02-01T22:18:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9969#issuecomment-90745",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:10" align="right">comment:10</div>

I just saw your post about mpmath-0.17 release, are you planing to update this ticket
for mpmath 0.17?



---

archive/issue_comments_090746.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nYes, I'll create an spkg for 0.17 immediately to replace the 0.16 one.\n\nNothing should have changed in the way of Sage compatibility, so the patches should still be fine.",
    "created_at": "2011-02-01T22:22:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9969#issuecomment-90746",
    "user": "https://github.com/fredrik-johansson"
}
```

<div id="comment:11" align="right">comment:11</div>

Yes, I'll create an spkg for 0.17 immediately to replace the 0.16 one.

Nothing should have changed in the way of Sage compatibility, so the patches should still be fine.



---

archive/issue_events_128560.json:
```json
{
    "actor": "https://github.com/fredrik-johansson",
    "created_at": "2011-02-01T22:27:45Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "title_is": "Update extension code for mpmath-0.17",
    "title_was": "Update extension code for mpmath-0.16",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9969#event-128560"
}
```



---

archive/issue_comments_090747.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n The patch adds fast Cython version of some more mpmath functions to sage.libs.mpmath.\n \n-This ticket contains a new spkg for mpmath-0.16 and two patches\n+This ticket contains a new spkg for mpmath-0.17 and two patches\n that need to be applied to sage itself. First 14600.patch, then docstring-fixes.patch.\n \n It can be tested with:\n@@ -10,6 +10,6 @@\n sage: mpmath.runtests()\n sage: mpmath.doctests()\n ```\n-1. [http://sage.math.washington.edu/home/fredrik/mpmath-0.16.spkg](http://sage.math.washington.edu/home/fredrik/mpmath-0.16.spkg)\n+1. [http://sage.math.washington.edu/home/fredrik/mpmath-0.17.spkg](http://sage.math.washington.edu/home/fredrik/mpmath-0.17.spkg)\n 2. [attachment: 14600.patch](https://github.com/sagemath/sage/files/ticket9969/14600.patch.gz)\n 3. [attachment: docstring-fixes.patch](https://github.com/sagemath/sage/files/ticket9969/docstring-fixes.patch.gz)\n``````\n",
    "created_at": "2011-02-01T22:27:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9969#issuecomment-90747",
    "user": "https://github.com/fredrik-johansson"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 The patch adds fast Cython version of some more mpmath functions to sage.libs.mpmath.
 
-This ticket contains a new spkg for mpmath-0.16 and two patches
+This ticket contains a new spkg for mpmath-0.17 and two patches
 that need to be applied to sage itself. First 14600.patch, then docstring-fixes.patch.
 
 It can be tested with:
@@ -10,6 +10,6 @@
 sage: mpmath.runtests()
 sage: mpmath.doctests()
 ```
-1. [http://sage.math.washington.edu/home/fredrik/mpmath-0.16.spkg](http://sage.math.washington.edu/home/fredrik/mpmath-0.16.spkg)
+1. [http://sage.math.washington.edu/home/fredrik/mpmath-0.17.spkg](http://sage.math.washington.edu/home/fredrik/mpmath-0.17.spkg)
 2. [attachment: 14600.patch](https://github.com/sagemath/sage/files/ticket9969/14600.patch.gz)
 3. [attachment: docstring-fixes.patch](https://github.com/sagemath/sage/files/ticket9969/docstring-fixes.patch.gz)
``````




---

archive/issue_comments_090748.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nBy the way, I noticed (too late) that there are two failing doctests if you run mpmath.doctests() as per the instructions. These failures a trivial (output formatting) and can be ignored.",
    "created_at": "2011-02-01T22:31:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9969#issuecomment-90748",
    "user": "https://github.com/fredrik-johansson"
}
```

<div id="comment:13" align="right">comment:13</div>

By the way, I noticed (too late) that there are two failing doctests if you run mpmath.doctests() as per the instructions. These failures a trivial (output formatting) and can be ignored.



---

archive/issue_comments_090749.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@fredrik-johansson](#comment:11):\n> Yes, I'll create an spkg for 0.17 immediately to replace the 0.16 one.\n> \n> Nothing should have changed in the way of Sage compatibility, so the patches should still be fine.\n\nGood to know, that means I won't have to change anything to support mpmath-0.17 in sage-on-gentoo when 4.6.2 is released.",
    "created_at": "2011-02-01T22:33:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9969#issuecomment-90749",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@fredrik-johansson](#comment:11):
> Yes, I'll create an spkg for 0.17 immediately to replace the 0.16 one.
> 
> Nothing should have changed in the way of Sage compatibility, so the patches should still be fine.

Good to know, that means I won't have to change anything to support mpmath-0.17 in sage-on-gentoo when 4.6.2 is released.



---

archive/issue_comments_090750.json:
```json
{
    "body": "Fixed patch that should apply in sage-4.6.1",
    "created_at": "2011-02-17T10:15:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9969#issuecomment-90750",
    "user": "https://github.com/fredrik-johansson"
}
```

Fixed patch that should apply in sage-4.6.1



---

archive/issue_comments_090751.json:
```json
{
    "body": "Attachment: **[mpmath_update_fixed_4.6.1.patch.gz](https://github.com/sagemath/sage/files/ticket9969/mpmath_update_fixed_4.6.1.patch.gz)**\n\nPatch that fixes some mpmath test failures due to use of the truediv operator",
    "created_at": "2011-02-18T08:35:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9969#issuecomment-90751",
    "user": "https://github.com/fredrik-johansson"
}
```

Attachment: **[mpmath_update_fixed_4.6.1.patch.gz](https://github.com/sagemath/sage/files/ticket9969/mpmath_update_fixed_4.6.1.patch.gz)**

Patch that fixes some mpmath test failures due to use of the truediv operator



---

archive/issue_comments_090752.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,7 @@\n The patch adds fast Cython version of some more mpmath functions to sage.libs.mpmath.\n \n This ticket contains a new spkg for mpmath-0.17 and two patches\n-that need to be applied to sage itself. First 14600.patch, then docstring-fixes.patch.\n+that need to be applied to sage itself. First mpmath_update_fixed_4.6.1.patch, then truediv_fix.patch.\n \n It can be tested with:\n \n@@ -11,5 +11,5 @@\n sage: mpmath.doctests()\n ```\n 1. [http://sage.math.washington.edu/home/fredrik/mpmath-0.17.spkg](http://sage.math.washington.edu/home/fredrik/mpmath-0.17.spkg)\n-2. [attachment: 14600.patch](https://github.com/sagemath/sage/files/ticket9969/14600.patch.gz)\n-3. [attachment: docstring-fixes.patch](https://github.com/sagemath/sage/files/ticket9969/docstring-fixes.patch.gz)\n+2. [attachment: mpmath_update_fixed_4.6.1.patch](https://github.com/sagemath/sage/files/ticket9969/mpmath_update_fixed_4.6.1.patch.gz)\n+3. [attachment: truediv_fix.patch](https://github.com/sagemath/sage/files/ticket9969/truediv_fix.patch.gz)\n``````\n",
    "created_at": "2011-02-18T08:36:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9969#issuecomment-90752",
    "user": "https://github.com/fredrik-johansson"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,7 @@
 The patch adds fast Cython version of some more mpmath functions to sage.libs.mpmath.
 
 This ticket contains a new spkg for mpmath-0.17 and two patches
-that need to be applied to sage itself. First 14600.patch, then docstring-fixes.patch.
+that need to be applied to sage itself. First mpmath_update_fixed_4.6.1.patch, then truediv_fix.patch.
 
 It can be tested with:
 
@@ -11,5 +11,5 @@
 sage: mpmath.doctests()
 ```
 1. [http://sage.math.washington.edu/home/fredrik/mpmath-0.17.spkg](http://sage.math.washington.edu/home/fredrik/mpmath-0.17.spkg)
-2. [attachment: 14600.patch](https://github.com/sagemath/sage/files/ticket9969/14600.patch.gz)
-3. [attachment: docstring-fixes.patch](https://github.com/sagemath/sage/files/ticket9969/docstring-fixes.patch.gz)
+2. [attachment: mpmath_update_fixed_4.6.1.patch](https://github.com/sagemath/sage/files/ticket9969/mpmath_update_fixed_4.6.1.patch.gz)
+3. [attachment: truediv_fix.patch](https://github.com/sagemath/sage/files/ticket9969/truediv_fix.patch.gz)
``````




---

archive/issue_comments_090753.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nAttachment: **[truediv_fix.patch.gz](https://github.com/sagemath/sage/files/ticket9969/truediv_fix.patch.gz)**",
    "created_at": "2011-02-18T08:36:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9969#issuecomment-90753",
    "user": "https://github.com/fredrik-johansson"
}
```

<div id="comment:15" align="right">comment:15</div>

Attachment: **[truediv_fix.patch.gz](https://github.com/sagemath/sage/files/ticket9969/truediv_fix.patch.gz)**



---

archive/issue_comments_090754.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nThe two new patches together are smaller than the two previous patches. Is docstring-fixes.patch really not needed anymore?",
    "created_at": "2011-02-18T08:45:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9969#issuecomment-90754",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:16" align="right">comment:16</div>

The two new patches together are smaller than the two previous patches. Is docstring-fixes.patch really not needed anymore?



---

archive/issue_comments_090755.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nMost of docstring-fixes.patch consisted of reformatting existing docstrings, and there's a lot of air in the diff format, so I think the numbers add up.",
    "created_at": "2011-02-18T08:51:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9969#issuecomment-90755",
    "user": "https://github.com/fredrik-johansson"
}
```

<div id="comment:17" align="right">comment:17</div>

Most of docstring-fixes.patch consisted of reformatting existing docstrings, and there's a lot of air in the diff format, so I think the numbers add up.



---

archive/issue_comments_090756.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@fredrik-johansson](#comment:17):\n> Most of docstring-fixes.patch consisted of reformatting existing docstrings, and there's a lot of air in the diff format, so I think the numbers add up.\n\nI thought it could be the case. I will try to review this quickly so we can have it included in 4.7.alpha.",
    "created_at": "2011-02-18T09:03:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9969#issuecomment-90756",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@fredrik-johansson](#comment:17):
> Most of docstring-fixes.patch consisted of reformatting existing docstrings, and there's a lot of air in the diff format, so I think the numbers add up.

I thought it could be the case. I will try to review this quickly so we can have it included in 4.7.alpha.



---

archive/issue_comments_090757.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\ntests are not looking good to me.\n\n```\nPython 2.6.6 (r266:84292, Jan 28 2011, 01:59:55) \n[GCC 4.5.2] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import mpmath\n>>> mpmath.runtests()\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"/usr/lib64/python2.6/site-packages/mpmath/__init__.py\", line 413, in runtests\n    from .tests import runtests as tests\nImportError: No module named tests\n```\nI get pretty much the same thing from sage. \n\nBy the way that looks more like a procedure to do a spkg-check than a doctest.",
    "created_at": "2011-02-18T10:35:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9969#issuecomment-90757",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:19" align="right">comment:19</div>

tests are not looking good to me.

```
Python 2.6.6 (r266:84292, Jan 28 2011, 01:59:55) 
[GCC 4.5.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import mpmath
>>> mpmath.runtests()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib64/python2.6/site-packages/mpmath/__init__.py", line 413, in runtests
    from .tests import runtests as tests
ImportError: No module named tests
```
I get pretty much the same thing from sage. 

By the way that looks more like a procedure to do a spkg-check than a doctest.



---

archive/issue_comments_090758.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nHmm... it doesn't seem like mpmath installed correctly for you.\n\nIs \"/usr/lib64/python2.6/site-packages\" actually the location of your Sage site-packages library, or is this a standalone installation of mpmath 0.17?",
    "created_at": "2011-02-18T10:42:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9969#issuecomment-90758",
    "user": "https://github.com/fredrik-johansson"
}
```

<div id="comment:20" align="right">comment:20</div>

Hmm... it doesn't seem like mpmath installed correctly for you.

Is "/usr/lib64/python2.6/site-packages" actually the location of your Sage site-packages library, or is this a standalone installation of mpmath 0.17?



---

archive/issue_comments_090759.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nsorry for the noise I shouldn't post past 11pm. There is an issue in Gentoo and sage-on-gentoo but there shouldn't be any in a pure sage environment. It may take a little bit of time testing this on various hardware.",
    "created_at": "2011-02-19T08:21:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9969#issuecomment-90759",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:21" align="right">comment:21</div>

sorry for the noise I shouldn't post past 11pm. There is an issue in Gentoo and sage-on-gentoo but there shouldn't be any in a pure sage environment. It may take a little bit of time testing this on various hardware.



---

archive/issue_comments_090760.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nSomething I have noticed in the gentoo ebuild. There is now an option to use matplotlib. Since matplotlib is shipped in sage mpmath may have to depend on it or configured not to use it.\n\nUsually people choose the first option in this case, unless there is major trouble. If you want to do that, the deps file in spkg/standard will need to be updated.",
    "created_at": "2011-02-19T09:17:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9969#issuecomment-90760",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:22" align="right">comment:22</div>

Something I have noticed in the gentoo ebuild. There is now an option to use matplotlib. Since matplotlib is shipped in sage mpmath may have to depend on it or configured not to use it.

Usually people choose the first option in this case, unless there is major trouble. If you want to do that, the deps file in spkg/standard will need to be updated.



---

archive/issue_comments_090761.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nI got a number of failing mpmath.doctests on my x86 box. A formatting issue really. Does any of the code interacts with ecl or maxima? The install I tested it on is based on 4.6.2.alpha4 with ecl-11.1.1 (#10766) and maxima-5.23.2 (#10773) and a couple of other patch that should be orthogonal (ppl #10039 and associated patches).\n\n```\nalmosteq 0.004\nfindroot **********************************************************************\nFile \"/home/francois/Work/sandbox/sage-4.6.2.alpha4/local/lib/python2.6/site-packages/mpmath/calculus/optimization.py\", line 835, in NoName\nFailed example:\n    findroot(f, -10, solver='anewton', verbose=True)\nExpected:\n    x:     -9.88888888888888888889\n    error: 0.111111111111111111111\n    converging slowly\n    x:     -9.77890011223344556678\n    error: 0.10998877665544332211\n    converging slowly\n    x:     -9.67002233332199662166\n    error: 0.108877778911448945119\n    converging slowly\n    accelerating convergence\n    x:     -9.5622443299551077669\n    error: 0.107778003366888854764\n    converging slowly\n    x:     0.99999999999999999214\n    error: 10.562244329955107759\n    x:     1.0\n    error: 7.8598304758094664213e-18\n    1.0\nGot:\n    ('x:    ', -9.88888888888888888889)\n    ('error:', 0.111111111111111111111)\n    converging slowly\n    ('x:    ', -9.77890011223344556678)\n    ('error:', 0.10998877665544332211)\n    converging slowly\n    ('x:    ', -9.67002233332199662166)\n    ('error:', 0.108877778911448945119)\n    converging slowly\n    accelerating convergence\n    ('x:    ', -9.5622443299551077669)\n    ('error:', 0.107778003366888854764)\n    converging slowly\n    ('x:    ', 0.99999999999999999214)\n    ('error:', 10.562244329955107759)\n    ('x:    ', 1.0)\n    ('error:', 7.8598304758094664213e-18)\n    1.0\n0.132\n__name__ 0.001\n```\nand\n\n```\nsuperfac 0.05\nsecondzeta **********************************************************************\nFile \"/home/francois/Work/sandbox/sage-4.6.2.alpha4/local/lib/python2.6/site-packages/mpmath/functions/zeta.py\", line 983, in NoName\nFailed example:\n    secondzeta(0.5 + 40j, error=True, verbose=True)\nExpected:\n    main term = (-30190318549.138656312556 - 13964804384.624622876523j)\n        computed using 19 zeros of zeta\n    prime term = (132717176.89212754625045 + 188980555.17563978290601j)\n        computed using 9 values of the von Mangoldt function\n    exponential term = (542447428666.07179812536 + 362434922978.80192435203j)\n    singular term = (512124392939.98154322355 + 348281138038.65531023921j)\n    ((0.059471043 + 0.3463514534j), 1.455191523e-11)\nGot:\n    ('main term =', (-30190318549.138656312556 - 13964804384.624622876523j))\n    ('    computed using', 19, 'zeros of zeta')\n    ('prime term =', (132717176.89212754625045 + 188980555.17563978290601j))\n    ('    computed using', 9, 'values of the von Mangoldt function')\n    ('exponential term =', (542447428666.07179812536 + 362434922978.80192435203j))\n    ('singular term =', (512124392939.98154322355 + 348281138038.65531023921j))\n    ((0.059471043 + 0.3463514534j), 1.455191523e-11)\n**********************************************************************\nFile \"/home/francois/Work/sandbox/sage-4.6.2.alpha4/local/lib/python2.6/site-packages/mpmath/functions/zeta.py\", line 992, in NoName\nFailed example:\n    secondzeta(0.5 + 40j, a=0.04, error=True, verbose=True)\nExpected:\n    main term = (-151962888.19606243907725 - 217930683.90210294051982j)\n        computed using 9 zeros of zeta\n    prime term = (2476659342.3038722372461 + 28711581821.921627163136j)\n        computed using 37 values of the von Mangoldt function\n    exponential term = (178506047114.7838188264 + 819674143244.45677330576j)\n    singular term = (175877424884.22441310708 + 790744630738.28669174871j)\n    ((0.059471043 + 0.3463514534j), 1.455191523e-11)\nGot:\n    ('main term =', (-151962888.19606243907725 - 217930683.90210294051982j))\n    ('    computed using', 9, 'zeros of zeta')\n    ('prime term =', (2476659342.3038722372461 + 28711581821.921627163136j))\n    ('    computed using', 37, 'values of the von Mangoldt function')\n    ('exponential term =', (178506047114.7838188264 + 819674143244.45677330576j))\n    ('singular term =', (175877424884.22441310708 + 790744630738.28669174871j))\n    ((0.059471043 + 0.3463514534j), 1.455191523e-11)\n34.812\ninf 0.002\n```\nI am preparing a run on amd64 with a fresh 4.6.2.rc0 without any patches.",
    "created_at": "2011-02-21T08:46:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9969#issuecomment-90761",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:23" align="right">comment:23</div>

I got a number of failing mpmath.doctests on my x86 box. A formatting issue really. Does any of the code interacts with ecl or maxima? The install I tested it on is based on 4.6.2.alpha4 with ecl-11.1.1 (#10766) and maxima-5.23.2 (#10773) and a couple of other patch that should be orthogonal (ppl #10039 and associated patches).

```
almosteq 0.004
findroot **********************************************************************
File "/home/francois/Work/sandbox/sage-4.6.2.alpha4/local/lib/python2.6/site-packages/mpmath/calculus/optimization.py", line 835, in NoName
Failed example:
    findroot(f, -10, solver='anewton', verbose=True)
Expected:
    x:     -9.88888888888888888889
    error: 0.111111111111111111111
    converging slowly
    x:     -9.77890011223344556678
    error: 0.10998877665544332211
    converging slowly
    x:     -9.67002233332199662166
    error: 0.108877778911448945119
    converging slowly
    accelerating convergence
    x:     -9.5622443299551077669
    error: 0.107778003366888854764
    converging slowly
    x:     0.99999999999999999214
    error: 10.562244329955107759
    x:     1.0
    error: 7.8598304758094664213e-18
    1.0
Got:
    ('x:    ', -9.88888888888888888889)
    ('error:', 0.111111111111111111111)
    converging slowly
    ('x:    ', -9.77890011223344556678)
    ('error:', 0.10998877665544332211)
    converging slowly
    ('x:    ', -9.67002233332199662166)
    ('error:', 0.108877778911448945119)
    converging slowly
    accelerating convergence
    ('x:    ', -9.5622443299551077669)
    ('error:', 0.107778003366888854764)
    converging slowly
    ('x:    ', 0.99999999999999999214)
    ('error:', 10.562244329955107759)
    ('x:    ', 1.0)
    ('error:', 7.8598304758094664213e-18)
    1.0
0.132
__name__ 0.001
```
and

```
superfac 0.05
secondzeta **********************************************************************
File "/home/francois/Work/sandbox/sage-4.6.2.alpha4/local/lib/python2.6/site-packages/mpmath/functions/zeta.py", line 983, in NoName
Failed example:
    secondzeta(0.5 + 40j, error=True, verbose=True)
Expected:
    main term = (-30190318549.138656312556 - 13964804384.624622876523j)
        computed using 19 zeros of zeta
    prime term = (132717176.89212754625045 + 188980555.17563978290601j)
        computed using 9 values of the von Mangoldt function
    exponential term = (542447428666.07179812536 + 362434922978.80192435203j)
    singular term = (512124392939.98154322355 + 348281138038.65531023921j)
    ((0.059471043 + 0.3463514534j), 1.455191523e-11)
Got:
    ('main term =', (-30190318549.138656312556 - 13964804384.624622876523j))
    ('    computed using', 19, 'zeros of zeta')
    ('prime term =', (132717176.89212754625045 + 188980555.17563978290601j))
    ('    computed using', 9, 'values of the von Mangoldt function')
    ('exponential term =', (542447428666.07179812536 + 362434922978.80192435203j))
    ('singular term =', (512124392939.98154322355 + 348281138038.65531023921j))
    ((0.059471043 + 0.3463514534j), 1.455191523e-11)
**********************************************************************
File "/home/francois/Work/sandbox/sage-4.6.2.alpha4/local/lib/python2.6/site-packages/mpmath/functions/zeta.py", line 992, in NoName
Failed example:
    secondzeta(0.5 + 40j, a=0.04, error=True, verbose=True)
Expected:
    main term = (-151962888.19606243907725 - 217930683.90210294051982j)
        computed using 9 zeros of zeta
    prime term = (2476659342.3038722372461 + 28711581821.921627163136j)
        computed using 37 values of the von Mangoldt function
    exponential term = (178506047114.7838188264 + 819674143244.45677330576j)
    singular term = (175877424884.22441310708 + 790744630738.28669174871j)
    ((0.059471043 + 0.3463514534j), 1.455191523e-11)
Got:
    ('main term =', (-151962888.19606243907725 - 217930683.90210294051982j))
    ('    computed using', 9, 'zeros of zeta')
    ('prime term =', (2476659342.3038722372461 + 28711581821.921627163136j))
    ('    computed using', 37, 'values of the von Mangoldt function')
    ('exponential term =', (178506047114.7838188264 + 819674143244.45677330576j))
    ('singular term =', (175877424884.22441310708 + 790744630738.28669174871j))
    ((0.059471043 + 0.3463514534j), 1.455191523e-11)
34.812
inf 0.002
```
I am preparing a run on amd64 with a fresh 4.6.2.rc0 without any patches.



---

archive/issue_comments_090762.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nThese two failures were noted in a previous comment. They can safely be ignored.",
    "created_at": "2011-02-21T09:52:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9969#issuecomment-90762",
    "user": "https://github.com/fredrik-johansson"
}
```

<div id="comment:24" align="right">comment:24</div>

These two failures were noted in a previous comment. They can safely be ignored.



---

archive/issue_comments_090763.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@fredrik-johansson](#comment:24):\n> These two failures were noted in a previous comment. They can safely be ignored.\n\nI didn't realise they were the same one. I guess I expected they were fixed but that would require a new version of mpmath, not just sage patch I imagine.\nOnce I have tested this at least on amd64 I can give a positive review.",
    "created_at": "2011-02-21T09:57:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9969#issuecomment-90763",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@fredrik-johansson](#comment:24):
> These two failures were noted in a previous comment. They can safely be ignored.

I didn't realise they were the same one. I guess I expected they were fixed but that would require a new version of mpmath, not just sage patch I imagine.
Once I have tested this at least on amd64 I can give a positive review.



---

archive/issue_comments_090764.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nOK so I tested this on linux-amd64 and OS X (10.5). and the tests perform ok.\nAlthough there is some noise on OS X because the wrong version of freetype is detected. I am not sure that the spkg fault or not.\n\n```\ntest_visualization\n    axes                      dyld: Library not loaded: /usr/X11/lib/libfreetype.6.dylib\n  Referenced from: /usr/X11/bin/fc-list\n  Reason: Incompatible library version: fc-list requires version 13.0.0 or later, but libfreetype.6.dylib provides version 10.0.0\ndyld: Library not loaded: /usr/X11/lib/libfreetype.6.dylib\n  Referenced from: /usr/X11/bin/fc-list\n  Reason: Incompatible library version: fc-list requires version 13.0.0 or later, but libfreetype.6.dylib provides version 10.0.0\nok        6.5380421 s\n\nfinished tests in 17.99 seconds\n```\nOn further inspection this test is run because matplotlib is present and I assume that this message originates from matplotlib. So the problem is probably in matplotlib.\n\nThe last thing is whether we make matplotlib a dependency of mpmath or not.\nI will post a patch making this the default. Voice any opposition then.",
    "created_at": "2011-02-21T21:12:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9969#issuecomment-90764",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:26" align="right">comment:26</div>

OK so I tested this on linux-amd64 and OS X (10.5). and the tests perform ok.
Although there is some noise on OS X because the wrong version of freetype is detected. I am not sure that the spkg fault or not.

```
test_visualization
    axes                      dyld: Library not loaded: /usr/X11/lib/libfreetype.6.dylib
  Referenced from: /usr/X11/bin/fc-list
  Reason: Incompatible library version: fc-list requires version 13.0.0 or later, but libfreetype.6.dylib provides version 10.0.0
dyld: Library not loaded: /usr/X11/lib/libfreetype.6.dylib
  Referenced from: /usr/X11/bin/fc-list
  Reason: Incompatible library version: fc-list requires version 13.0.0 or later, but libfreetype.6.dylib provides version 10.0.0
ok        6.5380421 s

finished tests in 17.99 seconds
```
On further inspection this test is run because matplotlib is present and I assume that this message originates from matplotlib. So the problem is probably in matplotlib.

The last thing is whether we make matplotlib a dependency of mpmath or not.
I will post a patch making this the default. Voice any opposition then.



---

archive/issue_comments_090765.json:
```json
{
    "body": "Attachment: **[mpmath-deps.patch.gz](https://github.com/sagemath/sage/files/ticket9969/mpmath-deps.patch.gz)**\n\npatch to deps to make mpmath depend on matplotlib",
    "created_at": "2011-02-21T21:19:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9969#issuecomment-90765",
    "user": "https://github.com/kiwifb"
}
```

Attachment: **[mpmath-deps.patch.gz](https://github.com/sagemath/sage/files/ticket9969/mpmath-deps.patch.gz)**

patch to deps to make mpmath depend on matplotlib



---

archive/issue_comments_090766.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nFredrik, a question about mpmath behavior with regards to matplotlib. Is mpmath detecting matplotlib at compilation time or its presence at runtime?",
    "created_at": "2011-03-13T22:57:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9969#issuecomment-90766",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:27" align="right">comment:27</div>

Fredrik, a question about mpmath behavior with regards to matplotlib. Is mpmath detecting matplotlib at compilation time or its presence at runtime?



---

archive/issue_comments_090767.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nRuntime. In fact, it only attempts to import matplotlib from inside the plotting functions (which are pure Python).",
    "created_at": "2011-03-13T23:29:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9969#issuecomment-90767",
    "user": "https://github.com/fredrik-johansson"
}
```

<div id="comment:28" align="right">comment:28</div>

Runtime. In fact, it only attempts to import matplotlib from inside the plotting functions (which are pure Python).



---

archive/issue_comments_090768.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nThanks, that means we don't need to depend on it. I am giving this a positive review. Hopefully it will be picked up for 4.7.",
    "created_at": "2011-03-14T00:29:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9969#issuecomment-90768",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:29" align="right">comment:29</div>

Thanks, that means we don't need to depend on it. I am giving this a positive review. Hopefully it will be picked up for 4.7.



---

archive/issue_events_128561.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2011-03-14T00:29:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9969#event-128561"
}
```



---

archive/issue_events_128562.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2011-03-14T00:29:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9969#event-128562"
}
```



---

archive/issue_comments_090769.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,6 +10,8 @@\n sage: mpmath.runtests()\n sage: mpmath.doctests()\n ```\n-1. [http://sage.math.washington.edu/home/fredrik/mpmath-0.17.spkg](http://sage.math.washington.edu/home/fredrik/mpmath-0.17.spkg)\n-2. [attachment: mpmath_update_fixed_4.6.1.patch](https://github.com/sagemath/sage/files/ticket9969/mpmath_update_fixed_4.6.1.patch.gz)\n-3. [attachment: truediv_fix.patch](https://github.com/sagemath/sage/files/ticket9969/truediv_fix.patch.gz)\n+New SPKG: [http://sage.math.washington.edu/home/fredrik/mpmath-0.17.spkg](http://sage.math.washington.edu/home/fredrik/mpmath-0.17.spkg)\n+\n+Apply:\n+* [attachment: mpmath_update_fixed_4.6.1.patch](https://github.com/sagemath/sage/files/ticket9969/mpmath_update_fixed_4.6.1.patch.gz)\n+* [attachment: truediv_fix.patch](https://github.com/sagemath/sage/files/ticket9969/truediv_fix.patch.gz)\n``````\n",
    "created_at": "2011-03-20T07:58:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9969#issuecomment-90769",
    "user": "https://github.com/kiwifb"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,6 +10,8 @@
 sage: mpmath.runtests()
 sage: mpmath.doctests()
 ```
-1. [http://sage.math.washington.edu/home/fredrik/mpmath-0.17.spkg](http://sage.math.washington.edu/home/fredrik/mpmath-0.17.spkg)
-2. [attachment: mpmath_update_fixed_4.6.1.patch](https://github.com/sagemath/sage/files/ticket9969/mpmath_update_fixed_4.6.1.patch.gz)
-3. [attachment: truediv_fix.patch](https://github.com/sagemath/sage/files/ticket9969/truediv_fix.patch.gz)
+New SPKG: [http://sage.math.washington.edu/home/fredrik/mpmath-0.17.spkg](http://sage.math.washington.edu/home/fredrik/mpmath-0.17.spkg)
+
+Apply:
+* [attachment: mpmath_update_fixed_4.6.1.patch](https://github.com/sagemath/sage/files/ticket9969/mpmath_update_fixed_4.6.1.patch.gz)
+* [attachment: truediv_fix.patch](https://github.com/sagemath/sage/files/ticket9969/truediv_fix.patch.gz)
``````




---

archive/issue_comments_090770.json:
```json
{
    "body": "Reviewer: **Fran\u00e7ois Bissey**",
    "created_at": "2011-03-27T11:37:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9969#issuecomment-90770",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Fran√ßois Bissey**



---

archive/issue_comments_090771.json:
```json
{
    "body": "Changed author from **fredrik.johansson** to **Fredrik Johansson**",
    "created_at": "2011-03-27T11:37:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9969#issuecomment-90771",
    "user": "https://github.com/jdemeyer"
}
```

Changed author from **fredrik.johansson** to **Fredrik Johansson**



---

archive/issue_comments_090772.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nPlease change the commit message (using `hg qrefresh -e`) such that the ticket number appears on the first line.",
    "created_at": "2011-03-27T13:51:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9969#issuecomment-90772",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:32" align="right">comment:32</div>

Please change the commit message (using `hg qrefresh -e`) such that the ticket number appears on the first line.



---

archive/issue_events_128563.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-27T13:51:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9969#event-128563"
}
```



---

archive/issue_events_128564.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-27T13:51:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9969#event-128564"
}
```



---

archive/issue_events_128565.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-11T13:47:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9969#event-128565"
}
```



---

archive/issue_events_128566.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-11T13:47:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9969#event-128566"
}
```



---

archive/issue_comments_090773.json:
```json
{
    "body": "Merged: **sage-4.7.alpha5**",
    "created_at": "2011-04-11T19:16:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9969#issuecomment-90773",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-4.7.alpha5**



---

archive/issue_events_128567.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-11T19:16:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9969#event-128567"
}
```



---

archive/issue_events_128568.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-11T19:16:07Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9969#event-128568"
}
```



---

archive/issue_comments_090774.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nSorry I meant to do the refresh but I was unable to get it working.",
    "created_at": "2011-04-13T02:49:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9969#issuecomment-90774",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:35" align="right">comment:35</div>

Sorry I meant to do the refresh but I was unable to get it working.



---

archive/issue_comments_090775.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nThe files `SPKG.txt` and `spkg-install` should be put under hg control.  Also, SPKG.txt should not be executable.  Please fix these trivial issues.",
    "created_at": "2011-05-04T09:47:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9969#issuecomment-90775",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:36" align="right">comment:36</div>

The files `SPKG.txt` and `spkg-install` should be put under hg control.  Also, SPKG.txt should not be executable.  Please fix these trivial issues.



---

archive/issue_events_128569.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-05-04T09:47:49Z",
    "event": "reopened",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9969#event-128569"
}
```



---

archive/issue_events_128570.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-05-04T09:48:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9969#event-128570"
}
```



---

archive/issue_events_128571.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-05-04T09:48:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20blocker%20/%201",
    "label_color": "ff0000",
    "label_name": "p: blocker / 1",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9969#event-128571"
}
```



---

archive/issue_comments_090776.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nI can fix the permissions in the spkg. What is involved to put SPKG.txt and spkg-install under hg control?",
    "created_at": "2011-05-04T09:54:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9969#issuecomment-90776",
    "user": "https://github.com/fredrik-johansson"
}
```

<div id="comment:38" align="right">comment:38</div>

I can fix the permissions in the spkg. What is involved to put SPKG.txt and spkg-install under hg control?



---

archive/issue_comments_090777.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nReplying to [@fredrik-johansson](#comment:38):\n> I can fix the permissions in the spkg. What is involved to put SPKG.txt and spkg-install under hg control?\n\nNever mind.  I did it myself: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpmath-0.17.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpmath-0.17.spkg)",
    "created_at": "2011-05-04T12:19:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9969#issuecomment-90777",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:39" align="right">comment:39</div>

Replying to [@fredrik-johansson](#comment:38):
> I can fix the permissions in the spkg. What is involved to put SPKG.txt and spkg-install under hg control?

Never mind.  I did it myself: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpmath-0.17.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpmath-0.17.spkg)



---

archive/issue_events_128572.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-05-04T12:19:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9969#event-128572"
}
```



---

archive/issue_comments_090778.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,7 +10,7 @@\n sage: mpmath.runtests()\n sage: mpmath.doctests()\n ```\n-New SPKG: [http://sage.math.washington.edu/home/fredrik/mpmath-0.17.spkg](http://sage.math.washington.edu/home/fredrik/mpmath-0.17.spkg)\n+New SPKG: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpmath-0.17.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpmath-0.17.spkg)\n \n Apply:\n * [attachment: mpmath_update_fixed_4.6.1.patch](https://github.com/sagemath/sage/files/ticket9969/mpmath_update_fixed_4.6.1.patch.gz)\n``````\n",
    "created_at": "2011-05-04T12:19:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9969#issuecomment-90778",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,7 +10,7 @@
 sage: mpmath.runtests()
 sage: mpmath.doctests()
 ```
-New SPKG: [http://sage.math.washington.edu/home/fredrik/mpmath-0.17.spkg](http://sage.math.washington.edu/home/fredrik/mpmath-0.17.spkg)
+New SPKG: [http://boxen.math.washington.edu/home/jdemeyer/spkg/mpmath-0.17.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/mpmath-0.17.spkg)
 
 Apply:
 * [attachment: mpmath_update_fixed_4.6.1.patch](https://github.com/sagemath/sage/files/ticket9969/mpmath_update_fixed_4.6.1.patch.gz)
``````




---

archive/issue_events_128573.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-05-06T07:19:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9969#event-128573"
}
```



---

archive/issue_events_128574.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-05-06T07:19:20Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/9969",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9969#event-128574"
}
```
