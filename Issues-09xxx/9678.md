# Issue 9678: Rewrite interrupt handling

archive/issues_009678.json:
```json
{
    "body": "There are lots of things to be improved in the interrupt handling routines in c_lib/src/interrupt.c and c_lib/include/interrupt.h.\n\nMajor changes planned:\n* **DONE**: make `sig_on()` have function syntax so that we can declare it `cdef int sig_on() except 0`.  See #10115 for the syntax changes.\n* **DONE**: do not save signals in `sigsetjmp()` (by giving a second argument of 0 instead of 1).  This speeds up a sig_on/sig_off loop from 382 clock cycles to 30 clock cycles on a Core(TM)2 Duo CPU T5870 @ 2.00GHz running Linux 2.6.34 glibc 2.11.2.\n* **DONE**: using `sigaction()` instead of `signal()` since that has more well-defined semantics.\n* **DONE**: handle SIGINT differently from other signals (other signals are urgent and cannot be ignored.  SIGINT on the other hand does not need to handled immediately, but we have to be careful for race conditions).\n* **DONE**: allow `sig_on()` and `sig_off()` to be nested.\n* **DONE**: implement `sig_retry()` for retrying failed computations (this is useful for PARI, see #10018).\n* **DONE**: have an interface for more general errors which are not signals.  This can then be used by PARI, NTL and possibly other C libraries (various tickets).\n* **DONE**: clean up old, unused code.\n* **DONE**: testing interrupt handling: #10030.\n* **DONE**: fix breakage because of this patch: #10061.\n* **DONE**: documentation: #10109.\n* **DONE**: Block interrupts during malloc: #10258.\n* **DONE**: eliminate race condition when a SIGINT arrives before `sig_on()` or during `sig_on()`.\n\nOther potentially related tickets:\n* #800 (make _sig_on and _sig_off faster when stacked)\n* #9640 (Change PARI error catching mechanism)\n* #9564 (libsingular exponentiation can not be interrupted)\n* #7879 (Remove unnecessary signal handling for low prec mpfr operations) --- hopefully `sig_on()` and `sig_off()` can be made very fast such that this shouldn't be an issue anymore.\n* #7794 (`PolynomialRing_integral_domain` ignores Ctrl-C and segfaults)\n* #5313 (patch singular so that when it runs out of memory the error message says \"singular\" in it)\n* #7702 (Handle interrupts better in the notebook)\n* #3423 (Make Pari error messages more informative)\n* #10126 (Fix error handing in Matrix_rational_dense._invert_pari())\n* #10818 (EclLib should allow signals to make LISP code interruptable)\n\n**Assignee:** @jdemeyer\n\n**CC:**  @nexttime\n\n**Keywords:** interrupt, error, c, cython\n\n**Reviewer:** Volker Braun\n\n**Author:** Jeroen Demeyer\n\n**Merged:** sage-4.7.alpha1\n\nIssue created by migration from https://trac.sagemath.org/ticket/9678\n\n",
    "closed_at": "2011-03-08T21:45:19Z",
    "created_at": "2010-08-03T21:33:54Z",
    "labels": [
        "component: c_lib",
        "blocker"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.7",
    "title": "Rewrite interrupt handling",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/9678",
    "user": "https://github.com/jdemeyer"
}
```
There are lots of things to be improved in the interrupt handling routines in c_lib/src/interrupt.c and c_lib/include/interrupt.h.

Major changes planned:
* **DONE**: make `sig_on()` have function syntax so that we can declare it `cdef int sig_on() except 0`.  See #10115 for the syntax changes.
* **DONE**: do not save signals in `sigsetjmp()` (by giving a second argument of 0 instead of 1).  This speeds up a sig_on/sig_off loop from 382 clock cycles to 30 clock cycles on a Core(TM)2 Duo CPU T5870 @ 2.00GHz running Linux 2.6.34 glibc 2.11.2.
* **DONE**: using `sigaction()` instead of `signal()` since that has more well-defined semantics.
* **DONE**: handle SIGINT differently from other signals (other signals are urgent and cannot be ignored.  SIGINT on the other hand does not need to handled immediately, but we have to be careful for race conditions).
* **DONE**: allow `sig_on()` and `sig_off()` to be nested.
* **DONE**: implement `sig_retry()` for retrying failed computations (this is useful for PARI, see #10018).
* **DONE**: have an interface for more general errors which are not signals.  This can then be used by PARI, NTL and possibly other C libraries (various tickets).
* **DONE**: clean up old, unused code.
* **DONE**: testing interrupt handling: #10030.
* **DONE**: fix breakage because of this patch: #10061.
* **DONE**: documentation: #10109.
* **DONE**: Block interrupts during malloc: #10258.
* **DONE**: eliminate race condition when a SIGINT arrives before `sig_on()` or during `sig_on()`.

Other potentially related tickets:
* #800 (make _sig_on and _sig_off faster when stacked)
* #9640 (Change PARI error catching mechanism)
* #9564 (libsingular exponentiation can not be interrupted)
* #7879 (Remove unnecessary signal handling for low prec mpfr operations) --- hopefully `sig_on()` and `sig_off()` can be made very fast such that this shouldn't be an issue anymore.
* #7794 (`PolynomialRing_integral_domain` ignores Ctrl-C and segfaults)
* #5313 (patch singular so that when it runs out of memory the error message says "singular" in it)
* #7702 (Handle interrupts better in the notebook)
* #3423 (Make Pari error messages more informative)
* #10126 (Fix error handing in Matrix_rational_dense._invert_pari())
* #10818 (EclLib should allow signals to make LISP code interruptable)

**Assignee:** @jdemeyer

**CC:**  @nexttime

**Keywords:** interrupt, error, c, cython

**Reviewer:** Volker Braun

**Author:** Jeroen Demeyer

**Merged:** sage-4.7.alpha1

Issue created by migration from https://trac.sagemath.org/ticket/9678





---

archive/issue_comments_109697.json:
```json
{
    "body": "**Remove assignee** @jasongrout.",
    "created_at": "2010-09-16T07:41:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109697",
    "user": "https://github.com/jdemeyer"
}
```

**Remove assignee** @jasongrout.



---

archive/issue_comments_109698.json:
```json
{
    "body": "<a id='comment:2'></a>\nAuthor of what? ;-)",
    "created_at": "2010-09-16T09:09:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109698",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:2'></a>
Author of what? ;-)



---

archive/issue_comments_109699.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,4 +2,5 @@\n \n * using sigaction() instead of signal()\n * having an interface for more general errors which are not signals\n-* testing!\n+\n+For testing, see the separate ticket #10030.\n``````\n",
    "created_at": "2010-10-01T12:45:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109699",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,4 +2,5 @@
 
 * using sigaction() instead of signal()
 * having an interface for more general errors which are not signals
-* testing!
+
+For testing, see the separate ticket #10030.
``````




---

archive/issue_comments_109700.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,6 +1,7 @@\n-There are lots of things to be improved in the interrupt handling routines in c_lib/src/interrupt.c and c_lib/include/interrupt.h, such as:\n+There are lots of things to be improved in the interrupt handling routines in c_lib/src/interrupt.c and c_lib/include/interrupt.h.\n \n-* using sigaction() instead of signal()\n-* having an interface for more general errors which are not signals\n+There also seems to be a lot of old, unused code which should be cleaned up.\n+\n+TODO: an interface for more general errors which are not signals\n \n For testing, see the separate ticket #10030.\n``````\n",
    "created_at": "2010-10-03T08:36:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109700",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,6 +1,7 @@
-There are lots of things to be improved in the interrupt handling routines in c_lib/src/interrupt.c and c_lib/include/interrupt.h, such as:
+There are lots of things to be improved in the interrupt handling routines in c_lib/src/interrupt.c and c_lib/include/interrupt.h.
 
-* using sigaction() instead of signal()
-* having an interface for more general errors which are not signals
+There also seems to be a lot of old, unused code which should be cleaned up.
+
+TODO: an interface for more general errors which are not signals
 
 For testing, see the separate ticket #10030.
``````




---

archive/issue_comments_109701.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,6 +2,12 @@\n \n There also seems to be a lot of old, unused code which should be cleaned up.\n \n-TODO: an interface for more general errors which are not signals\n+TODO: an interface for more general errors which are not signals (and use it for PARI, see #9640).\n \n For testing, see the separate ticket #10030.\n+\n+Related tickets:\n+* #9564 (libsingular exponentiation can not be interrupted)\n+* #7879 (Remove unnecessary signal handling for low prec mpfr operations) --- hopefully `_sig_on` and `_sig_off` can be made very fast such that this shouldn't be an issue anymore.\n+* #10018 (Unhandled SIGSEGV after bnfcertify())\n+* #7794 (`PolynomialRing_integral_domain` ignores Ctrl-C and segfaults)\n``````\n",
    "created_at": "2010-10-06T09:00:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109701",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,6 +2,12 @@
 
 There also seems to be a lot of old, unused code which should be cleaned up.
 
-TODO: an interface for more general errors which are not signals
+TODO: an interface for more general errors which are not signals (and use it for PARI, see #9640).
 
 For testing, see the separate ticket #10030.
+
+Related tickets:
+* #9564 (libsingular exponentiation can not be interrupted)
+* #7879 (Remove unnecessary signal handling for low prec mpfr operations) --- hopefully `_sig_on` and `_sig_off` can be made very fast such that this shouldn't be an issue anymore.
+* #10018 (Unhandled SIGSEGV after bnfcertify())
+* #7794 (`PolynomialRing_integral_domain` ignores Ctrl-C and segfaults)
``````




---

archive/issue_comments_109702.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -11,3 +11,4 @@\n * #7879 (Remove unnecessary signal handling for low prec mpfr operations) --- hopefully `_sig_on` and `_sig_off` can be made very fast such that this shouldn't be an issue anymore.\n * #10018 (Unhandled SIGSEGV after bnfcertify())\n * #7794 (`PolynomialRing_integral_domain` ignores Ctrl-C and segfaults)\n+* #5313 (patch singular so that when it runs out of memory the error message says \"singular\" in it)\n``````\n",
    "created_at": "2010-10-06T09:03:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109702",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -11,3 +11,4 @@
 * #7879 (Remove unnecessary signal handling for low prec mpfr operations) --- hopefully `_sig_on` and `_sig_off` can be made very fast such that this shouldn't be an issue anymore.
 * #10018 (Unhandled SIGSEGV after bnfcertify())
 * #7794 (`PolynomialRing_integral_domain` ignores Ctrl-C and segfaults)
+* #5313 (patch singular so that when it runs out of memory the error message says "singular" in it)
``````




---

archive/issue_comments_109703.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,13 +2,16 @@\n \n There also seems to be a lot of old, unused code which should be cleaned up.\n \n-TODO: an interface for more general errors which are not signals (and use it for PARI, see #9640).\n+TODO: an interface for more general errors which are not signals.\n \n For testing, see the separate ticket #10030.\n \n Related tickets:\n+* #800 (make _sig_on and _sig_off faster when stacked)\n+* #9640 (Change PARI error catching mechanism)\n * #9564 (libsingular exponentiation can not be interrupted)\n * #7879 (Remove unnecessary signal handling for low prec mpfr operations) --- hopefully `_sig_on` and `_sig_off` can be made very fast such that this shouldn't be an issue anymore.\n * #10018 (Unhandled SIGSEGV after bnfcertify())\n * #7794 (`PolynomialRing_integral_domain` ignores Ctrl-C and segfaults)\n * #5313 (patch singular so that when it runs out of memory the error message says \"singular\" in it)\n+* #3423 (Make Pari error messages more informative)\n``````\n",
    "created_at": "2010-10-06T09:07:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109703",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,13 +2,16 @@
 
 There also seems to be a lot of old, unused code which should be cleaned up.
 
-TODO: an interface for more general errors which are not signals (and use it for PARI, see #9640).
+TODO: an interface for more general errors which are not signals.
 
 For testing, see the separate ticket #10030.
 
 Related tickets:
+* #800 (make _sig_on and _sig_off faster when stacked)
+* #9640 (Change PARI error catching mechanism)
 * #9564 (libsingular exponentiation can not be interrupted)
 * #7879 (Remove unnecessary signal handling for low prec mpfr operations) --- hopefully `_sig_on` and `_sig_off` can be made very fast such that this shouldn't be an issue anymore.
 * #10018 (Unhandled SIGSEGV after bnfcertify())
 * #7794 (`PolynomialRing_integral_domain` ignores Ctrl-C and segfaults)
 * #5313 (patch singular so that when it runs out of memory the error message says "singular" in it)
+* #3423 (Make Pari error messages more informative)
``````




---

archive/issue_comments_109704.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,10 +1,14 @@\n There are lots of things to be improved in the interrupt handling routines in c_lib/src/interrupt.c and c_lib/include/interrupt.h.\n \n-There also seems to be a lot of old, unused code which should be cleaned up.\n-\n-TODO: an interface for more general errors which are not signals.\n-\n-For testing, see the separate ticket #10030.\n+Major changes planned:\n+* using `setjmp()` instead of `sigsetjmp()`.  This is about a factor 20 faster on my x86_64 Linux box.\n+* DONE: using `sigaction()` instead of `signal()` since that has more well-defined semantics.\n+* DONE: allow `_sig_on` and `_sig_off` to be stacked.\n+* have an interface for more general errors which are not signals.\n+* DONE: clean up old, unused code.\n+* Testing interrupt handling: #10030.\n+* Fix breakage because of this patch: #10061.\n+* Documentation (right now, there is essentially nothing in the Sage developer manual).\n \n Related tickets:\n * #800 (make _sig_on and _sig_off faster when stacked)\n``````\n",
    "created_at": "2010-10-09T17:05:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109704",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,10 +1,14 @@
 There are lots of things to be improved in the interrupt handling routines in c_lib/src/interrupt.c and c_lib/include/interrupt.h.
 
-There also seems to be a lot of old, unused code which should be cleaned up.
-
-TODO: an interface for more general errors which are not signals.
-
-For testing, see the separate ticket #10030.
+Major changes planned:
+* using `setjmp()` instead of `sigsetjmp()`.  This is about a factor 20 faster on my x86_64 Linux box.
+* DONE: using `sigaction()` instead of `signal()` since that has more well-defined semantics.
+* DONE: allow `_sig_on` and `_sig_off` to be stacked.
+* have an interface for more general errors which are not signals.
+* DONE: clean up old, unused code.
+* Testing interrupt handling: #10030.
+* Fix breakage because of this patch: #10061.
+* Documentation (right now, there is essentially nothing in the Sage developer manual).
 
 Related tickets:
 * #800 (make _sig_on and _sig_off faster when stacked)
``````




---

archive/issue_comments_109705.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -8,9 +8,10 @@\n * DONE: clean up old, unused code.\n * Testing interrupt handling: #10030.\n * Fix breakage because of this patch: #10061.\n-* Documentation (right now, there is essentially nothing in the Sage developer manual).\n+* Documentation: #10109.\n+* Allow to temporarily suspend interrupts and do this in `sage_malloc()` and friends (an interrupt during `malloc()` will mess up the heap, this happens sometimes with a \"fixed\"  #9564!)\n \n-Related tickets:\n+Other related tickets:\n * #800 (make _sig_on and _sig_off faster when stacked)\n * #9640 (Change PARI error catching mechanism)\n * #9564 (libsingular exponentiation can not be interrupted)\n``````\n",
    "created_at": "2010-10-09T20:45:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109705",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -8,9 +8,10 @@
 * DONE: clean up old, unused code.
 * Testing interrupt handling: #10030.
 * Fix breakage because of this patch: #10061.
-* Documentation (right now, there is essentially nothing in the Sage developer manual).
+* Documentation: #10109.
+* Allow to temporarily suspend interrupts and do this in `sage_malloc()` and friends (an interrupt during `malloc()` will mess up the heap, this happens sometimes with a "fixed"  #9564!)
 
-Related tickets:
+Other related tickets:
 * #800 (make _sig_on and _sig_off faster when stacked)
 * #9640 (Change PARI error catching mechanism)
 * #9564 (libsingular exponentiation can not be interrupted)
``````




---

archive/issue_comments_109706.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,6 +1,7 @@\n There are lots of things to be improved in the interrupt handling routines in c_lib/src/interrupt.c and c_lib/include/interrupt.h.\n \n Major changes planned:\n+* make `_sig_on()` an inline function instead of a macro, see #10115 for the syntax changes.\n * using `setjmp()` instead of `sigsetjmp()`.  This is about a factor 20 faster on my x86_64 Linux box.\n * DONE: using `sigaction()` instead of `signal()` since that has more well-defined semantics.\n * DONE: allow `_sig_on` and `_sig_off` to be stacked.\n``````\n",
    "created_at": "2010-10-10T10:14:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109706",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,6 +1,7 @@
 There are lots of things to be improved in the interrupt handling routines in c_lib/src/interrupt.c and c_lib/include/interrupt.h.
 
 Major changes planned:
+* make `_sig_on()` an inline function instead of a macro, see #10115 for the syntax changes.
 * using `setjmp()` instead of `sigsetjmp()`.  This is about a factor 20 faster on my x86_64 Linux box.
 * DONE: using `sigaction()` instead of `signal()` since that has more well-defined semantics.
 * DONE: allow `_sig_on` and `_sig_off` to be stacked.
``````




---

archive/issue_comments_109707.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,10 +1,10 @@\n There are lots of things to be improved in the interrupt handling routines in c_lib/src/interrupt.c and c_lib/include/interrupt.h.\n \n Major changes planned:\n-* make `_sig_on()` an inline function instead of a macro, see #10115 for the syntax changes.\n+* make `sig_on()` an inline function instead of a macro, see #10115 for the syntax changes.\n * using `setjmp()` instead of `sigsetjmp()`.  This is about a factor 20 faster on my x86_64 Linux box.\n * DONE: using `sigaction()` instead of `signal()` since that has more well-defined semantics.\n-* DONE: allow `_sig_on` and `_sig_off` to be stacked.\n+* DONE: allow `sig_on()` and `sig_off()` to be nested.\n * have an interface for more general errors which are not signals.\n * DONE: clean up old, unused code.\n * Testing interrupt handling: #10030.\n@@ -16,8 +16,10 @@\n * #800 (make _sig_on and _sig_off faster when stacked)\n * #9640 (Change PARI error catching mechanism)\n * #9564 (libsingular exponentiation can not be interrupted)\n-* #7879 (Remove unnecessary signal handling for low prec mpfr operations) --- hopefully `_sig_on` and `_sig_off` can be made very fast such that this shouldn't be an issue anymore.\n+* #7879 (Remove unnecessary signal handling for low prec mpfr operations) --- hopefully `sig_on()` and `sig_off()` can be made very fast such that this shouldn't be an issue anymore.\n * #10018 (Unhandled SIGSEGV after bnfcertify())\n * #7794 (`PolynomialRing_integral_domain` ignores Ctrl-C and segfaults)\n * #5313 (patch singular so that when it runs out of memory the error message says \"singular\" in it)\n * #3423 (Make Pari error messages more informative)\n+\n+Dependency: #10115\n``````\n",
    "created_at": "2010-10-13T12:53:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109707",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,10 +1,10 @@
 There are lots of things to be improved in the interrupt handling routines in c_lib/src/interrupt.c and c_lib/include/interrupt.h.
 
 Major changes planned:
-* make `_sig_on()` an inline function instead of a macro, see #10115 for the syntax changes.
+* make `sig_on()` an inline function instead of a macro, see #10115 for the syntax changes.
 * using `setjmp()` instead of `sigsetjmp()`.  This is about a factor 20 faster on my x86_64 Linux box.
 * DONE: using `sigaction()` instead of `signal()` since that has more well-defined semantics.
-* DONE: allow `_sig_on` and `_sig_off` to be stacked.
+* DONE: allow `sig_on()` and `sig_off()` to be nested.
 * have an interface for more general errors which are not signals.
 * DONE: clean up old, unused code.
 * Testing interrupt handling: #10030.
@@ -16,8 +16,10 @@
 * #800 (make _sig_on and _sig_off faster when stacked)
 * #9640 (Change PARI error catching mechanism)
 * #9564 (libsingular exponentiation can not be interrupted)
-* #7879 (Remove unnecessary signal handling for low prec mpfr operations) --- hopefully `_sig_on` and `_sig_off` can be made very fast such that this shouldn't be an issue anymore.
+* #7879 (Remove unnecessary signal handling for low prec mpfr operations) --- hopefully `sig_on()` and `sig_off()` can be made very fast such that this shouldn't be an issue anymore.
 * #10018 (Unhandled SIGSEGV after bnfcertify())
 * #7794 (`PolynomialRing_integral_domain` ignores Ctrl-C and segfaults)
 * #5313 (patch singular so that when it runs out of memory the error message says "singular" in it)
 * #3423 (Make Pari error messages more informative)
+
+Dependency: #10115
``````




---

archive/issue_comments_109708.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,16 +1,17 @@\n There are lots of things to be improved in the interrupt handling routines in c_lib/src/interrupt.c and c_lib/include/interrupt.h.\n \n Major changes planned:\n-* make `sig_on()` an inline function instead of a macro, see #10115 for the syntax changes.\n+* make `sig_on()` have function syntax so that we can declare it `cdef int sig_on() except 0`.  See #10115 for the syntax changes.\n * using `setjmp()` instead of `sigsetjmp()`.  This is about a factor 20 faster on my x86_64 Linux box.\n-* DONE: using `sigaction()` instead of `signal()` since that has more well-defined semantics.\n-* DONE: allow `sig_on()` and `sig_off()` to be nested.\n+* **DONE**: using `sigaction()` instead of `signal()` since that has more well-defined semantics.\n+* **DONE**: allow `sig_on()` and `sig_off()` to be nested.\n * have an interface for more general errors which are not signals.\n-* DONE: clean up old, unused code.\n-* Testing interrupt handling: #10030.\n-* Fix breakage because of this patch: #10061.\n-* Documentation: #10109.\n-* Allow to temporarily suspend interrupts and do this in `sage_malloc()` and friends (an interrupt during `malloc()` will mess up the heap, this happens sometimes with a \"fixed\"  #9564!)\n+* **DONE**: clean up old, unused code.\n+* **IN PROGRESS**: testing interrupt handling: #10030.\n+* **IN PROGRESS**: fix breakage because of this patch: #10061.\n+* **IN PROGRESS**: documentation: #10109.\n+* allow to temporarily suspend interrupts and do this in `sage_malloc()` and friends (an interrupt during `malloc()` will mess up the heap, this happens sometimes with a \"fixed\"  #9564!)\n+* eliminate race conditions as much as possible, like a SIGINT arriving before `sig_on()` was called.\n \n Other related tickets:\n * #800 (make _sig_on and _sig_off faster when stacked)\n``````\n",
    "created_at": "2010-10-16T09:29:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109708",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,16 +1,17 @@
 There are lots of things to be improved in the interrupt handling routines in c_lib/src/interrupt.c and c_lib/include/interrupt.h.
 
 Major changes planned:
-* make `sig_on()` an inline function instead of a macro, see #10115 for the syntax changes.
+* make `sig_on()` have function syntax so that we can declare it `cdef int sig_on() except 0`.  See #10115 for the syntax changes.
 * using `setjmp()` instead of `sigsetjmp()`.  This is about a factor 20 faster on my x86_64 Linux box.
-* DONE: using `sigaction()` instead of `signal()` since that has more well-defined semantics.
-* DONE: allow `sig_on()` and `sig_off()` to be nested.
+* **DONE**: using `sigaction()` instead of `signal()` since that has more well-defined semantics.
+* **DONE**: allow `sig_on()` and `sig_off()` to be nested.
 * have an interface for more general errors which are not signals.
-* DONE: clean up old, unused code.
-* Testing interrupt handling: #10030.
-* Fix breakage because of this patch: #10061.
-* Documentation: #10109.
-* Allow to temporarily suspend interrupts and do this in `sage_malloc()` and friends (an interrupt during `malloc()` will mess up the heap, this happens sometimes with a "fixed"  #9564!)
+* **DONE**: clean up old, unused code.
+* **IN PROGRESS**: testing interrupt handling: #10030.
+* **IN PROGRESS**: fix breakage because of this patch: #10061.
+* **IN PROGRESS**: documentation: #10109.
+* allow to temporarily suspend interrupts and do this in `sage_malloc()` and friends (an interrupt during `malloc()` will mess up the heap, this happens sometimes with a "fixed"  #9564!)
+* eliminate race conditions as much as possible, like a SIGINT arriving before `sig_on()` was called.
 
 Other related tickets:
 * #800 (make _sig_on and _sig_off faster when stacked)
``````




---

archive/issue_comments_109709.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,7 +1,7 @@\n There are lots of things to be improved in the interrupt handling routines in c_lib/src/interrupt.c and c_lib/include/interrupt.h.\n \n Major changes planned:\n-* make `sig_on()` have function syntax so that we can declare it `cdef int sig_on() except 0`.  See #10115 for the syntax changes.\n+* **DONE**: make `sig_on()` have function syntax so that we can declare it `cdef int sig_on() except 0`.  See #10115 for the syntax changes.\n * using `setjmp()` instead of `sigsetjmp()`.  This is about a factor 20 faster on my x86_64 Linux box.\n * **DONE**: using `sigaction()` instead of `signal()` since that has more well-defined semantics.\n * **DONE**: allow `sig_on()` and `sig_off()` to be nested.\n``````\n",
    "created_at": "2010-10-16T13:50:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109709",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,7 +1,7 @@
 There are lots of things to be improved in the interrupt handling routines in c_lib/src/interrupt.c and c_lib/include/interrupt.h.
 
 Major changes planned:
-* make `sig_on()` have function syntax so that we can declare it `cdef int sig_on() except 0`.  See #10115 for the syntax changes.
+* **DONE**: make `sig_on()` have function syntax so that we can declare it `cdef int sig_on() except 0`.  See #10115 for the syntax changes.
 * using `setjmp()` instead of `sigsetjmp()`.  This is about a factor 20 faster on my x86_64 Linux box.
 * **DONE**: using `sigaction()` instead of `signal()` since that has more well-defined semantics.
 * **DONE**: allow `sig_on()` and `sig_off()` to be nested.
``````




---

archive/issue_comments_109710.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,7 +2,7 @@\n \n Major changes planned:\n * **DONE**: make `sig_on()` have function syntax so that we can declare it `cdef int sig_on() except 0`.  See #10115 for the syntax changes.\n-* using `setjmp()` instead of `sigsetjmp()`.  This is about a factor 20 faster on my x86_64 Linux box.\n+* using `setjmp()` instead of `sigsetjmp()`.  This speeds up a sig_on/sig_off loop from 382 clock cycles to 24 clock cycles on a Core(TM)2 Duo CPU T5870 @ 2.00GHz running Linux 2.6.32 glibc 2.11.2.\n * **DONE**: using `sigaction()` instead of `signal()` since that has more well-defined semantics.\n * **DONE**: allow `sig_on()` and `sig_off()` to be nested.\n * have an interface for more general errors which are not signals.\n``````\n",
    "created_at": "2010-10-16T18:52:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109710",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,7 +2,7 @@
 
 Major changes planned:
 * **DONE**: make `sig_on()` have function syntax so that we can declare it `cdef int sig_on() except 0`.  See #10115 for the syntax changes.
-* using `setjmp()` instead of `sigsetjmp()`.  This is about a factor 20 faster on my x86_64 Linux box.
+* using `setjmp()` instead of `sigsetjmp()`.  This speeds up a sig_on/sig_off loop from 382 clock cycles to 24 clock cycles on a Core(TM)2 Duo CPU T5870 @ 2.00GHz running Linux 2.6.32 glibc 2.11.2.
 * **DONE**: using `sigaction()` instead of `signal()` since that has more well-defined semantics.
 * **DONE**: allow `sig_on()` and `sig_off()` to be nested.
 * have an interface for more general errors which are not signals.
``````




---

archive/issue_comments_109711.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -23,4 +23,4 @@\n * #5313 (patch singular so that when it runs out of memory the error message says \"singular\" in it)\n * #3423 (Make Pari error messages more informative)\n \n-Dependency: #10115\n+Dependency: #10115, #9893\n``````\n",
    "created_at": "2010-10-17T08:39:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109711",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -23,4 +23,4 @@
 * #5313 (patch singular so that when it runs out of memory the error message says "singular" in it)
 * #3423 (Make Pari error messages more informative)
 
-Dependency: #10115
+Dependency: #10115, #9893
``````




---

archive/issue_comments_109712.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,6 +4,7 @@\n * **DONE**: make `sig_on()` have function syntax so that we can declare it `cdef int sig_on() except 0`.  See #10115 for the syntax changes.\n * using `setjmp()` instead of `sigsetjmp()`.  This speeds up a sig_on/sig_off loop from 382 clock cycles to 24 clock cycles on a Core(TM)2 Duo CPU T5870 @ 2.00GHz running Linux 2.6.32 glibc 2.11.2.\n * **DONE**: using `sigaction()` instead of `signal()` since that has more well-defined semantics.\n+* **DONE**: handle SIGINT differently from other signals (other signals are urgent and cannot be ignored.  SIGINT on the other hand does not need to handled immediately, but we have to be careful for race conditions).\n * **DONE**: allow `sig_on()` and `sig_off()` to be nested.\n * have an interface for more general errors which are not signals.\n * **DONE**: clean up old, unused code.\n@@ -11,9 +12,10 @@\n * **IN PROGRESS**: fix breakage because of this patch: #10061.\n * **IN PROGRESS**: documentation: #10109.\n * allow to temporarily suspend interrupts and do this in `sage_malloc()` and friends (an interrupt during `malloc()` will mess up the heap, this happens sometimes with a \"fixed\"  #9564!)\n-* eliminate race conditions as much as possible, like a SIGINT arriving before `sig_on()` was called.\n+* eliminate race conditions as much as possible, like a SIGINT arriving before `sig_on()` or during `sig_on()`.\n \n Other related tickets:\n+* #9893 (Make PARI *not* catch signals)\n * #800 (make _sig_on and _sig_off faster when stacked)\n * #9640 (Change PARI error catching mechanism)\n * #9564 (libsingular exponentiation can not be interrupted)\n@@ -22,5 +24,6 @@\n * #7794 (`PolynomialRing_integral_domain` ignores Ctrl-C and segfaults)\n * #5313 (patch singular so that when it runs out of memory the error message says \"singular\" in it)\n * #3423 (Make Pari error messages more informative)\n+* #10126 (Fix error handing in Matrix_rational_dense._invert_pari())\n \n-Dependency: #10115, #9893\n+Dependencies: #10115, #9893\n``````\n",
    "created_at": "2010-10-17T17:01:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109712",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,6 +4,7 @@
 * **DONE**: make `sig_on()` have function syntax so that we can declare it `cdef int sig_on() except 0`.  See #10115 for the syntax changes.
 * using `setjmp()` instead of `sigsetjmp()`.  This speeds up a sig_on/sig_off loop from 382 clock cycles to 24 clock cycles on a Core(TM)2 Duo CPU T5870 @ 2.00GHz running Linux 2.6.32 glibc 2.11.2.
 * **DONE**: using `sigaction()` instead of `signal()` since that has more well-defined semantics.
+* **DONE**: handle SIGINT differently from other signals (other signals are urgent and cannot be ignored.  SIGINT on the other hand does not need to handled immediately, but we have to be careful for race conditions).
 * **DONE**: allow `sig_on()` and `sig_off()` to be nested.
 * have an interface for more general errors which are not signals.
 * **DONE**: clean up old, unused code.
@@ -11,9 +12,10 @@
 * **IN PROGRESS**: fix breakage because of this patch: #10061.
 * **IN PROGRESS**: documentation: #10109.
 * allow to temporarily suspend interrupts and do this in `sage_malloc()` and friends (an interrupt during `malloc()` will mess up the heap, this happens sometimes with a "fixed"  #9564!)
-* eliminate race conditions as much as possible, like a SIGINT arriving before `sig_on()` was called.
+* eliminate race conditions as much as possible, like a SIGINT arriving before `sig_on()` or during `sig_on()`.
 
 Other related tickets:
+* #9893 (Make PARI *not* catch signals)
 * #800 (make _sig_on and _sig_off faster when stacked)
 * #9640 (Change PARI error catching mechanism)
 * #9564 (libsingular exponentiation can not be interrupted)
@@ -22,5 +24,6 @@
 * #7794 (`PolynomialRing_integral_domain` ignores Ctrl-C and segfaults)
 * #5313 (patch singular so that when it runs out of memory the error message says "singular" in it)
 * #3423 (Make Pari error messages more informative)
+* #10126 (Fix error handing in Matrix_rational_dense._invert_pari())
 
-Dependency: #10115, #9893
+Dependencies: #10115, #9893
``````




---

archive/issue_comments_109713.json:
```json
{
    "body": "**Changing status** from new to needs_work.",
    "created_at": "2010-10-17T18:48:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109713",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from new to needs_work.



---

archive/issue_comments_109714.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -6,6 +6,7 @@\n * **DONE**: using `sigaction()` instead of `signal()` since that has more well-defined semantics.\n * **DONE**: handle SIGINT differently from other signals (other signals are urgent and cannot be ignored.  SIGINT on the other hand does not need to handled immediately, but we have to be careful for race conditions).\n * **DONE**: allow `sig_on()` and `sig_off()` to be nested.\n+* **IN PROGRESS**: implement `sig_retry()` for retrying failed computations (this is useful for PARI, see #10018).\n * have an interface for more general errors which are not signals.\n * **DONE**: clean up old, unused code.\n * **IN PROGRESS**: testing interrupt handling: #10030.\n@@ -26,4 +27,6 @@\n * #3423 (Make Pari error messages more informative)\n * #10126 (Fix error handing in Matrix_rational_dense._invert_pari())\n \n+Patch chain: #10115, #9893, **#9678**, #10061, #10030, #10018, #9640\n+\n Dependencies: #10115, #9893\n``````\n",
    "created_at": "2010-10-17T18:48:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109714",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -6,6 +6,7 @@
 * **DONE**: using `sigaction()` instead of `signal()` since that has more well-defined semantics.
 * **DONE**: handle SIGINT differently from other signals (other signals are urgent and cannot be ignored.  SIGINT on the other hand does not need to handled immediately, but we have to be careful for race conditions).
 * **DONE**: allow `sig_on()` and `sig_off()` to be nested.
+* **IN PROGRESS**: implement `sig_retry()` for retrying failed computations (this is useful for PARI, see #10018).
 * have an interface for more general errors which are not signals.
 * **DONE**: clean up old, unused code.
 * **IN PROGRESS**: testing interrupt handling: #10030.
@@ -26,4 +27,6 @@
 * #3423 (Make Pari error messages more informative)
 * #10126 (Fix error handing in Matrix_rational_dense._invert_pari())
 
+Patch chain: #10115, #9893, **#9678**, #10061, #10030, #10018, #9640
+
 Dependencies: #10115, #9893
``````




---

archive/issue_comments_109715.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,7 +2,7 @@\n \n Major changes planned:\n * **DONE**: make `sig_on()` have function syntax so that we can declare it `cdef int sig_on() except 0`.  See #10115 for the syntax changes.\n-* using `setjmp()` instead of `sigsetjmp()`.  This speeds up a sig_on/sig_off loop from 382 clock cycles to 24 clock cycles on a Core(TM)2 Duo CPU T5870 @ 2.00GHz running Linux 2.6.32 glibc 2.11.2.\n+* **DONE**: do not save signals in `sigsetjmp()` (by giving a second argument of 0 instead of 1).  This speeds up a sig_on/sig_off loop from 382 clock cycles to 24 clock cycles on a Core(TM)2 Duo CPU T5870 @ 2.00GHz running Linux 2.6.32 glibc 2.11.2.\n * **DONE**: using `sigaction()` instead of `signal()` since that has more well-defined semantics.\n * **DONE**: handle SIGINT differently from other signals (other signals are urgent and cannot be ignored.  SIGINT on the other hand does not need to handled immediately, but we have to be careful for race conditions).\n * **DONE**: allow `sig_on()` and `sig_off()` to be nested.\n``````\n",
    "created_at": "2010-10-18T20:51:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109715",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,7 +2,7 @@
 
 Major changes planned:
 * **DONE**: make `sig_on()` have function syntax so that we can declare it `cdef int sig_on() except 0`.  See #10115 for the syntax changes.
-* using `setjmp()` instead of `sigsetjmp()`.  This speeds up a sig_on/sig_off loop from 382 clock cycles to 24 clock cycles on a Core(TM)2 Duo CPU T5870 @ 2.00GHz running Linux 2.6.32 glibc 2.11.2.
+* **DONE**: do not save signals in `sigsetjmp()` (by giving a second argument of 0 instead of 1).  This speeds up a sig_on/sig_off loop from 382 clock cycles to 24 clock cycles on a Core(TM)2 Duo CPU T5870 @ 2.00GHz running Linux 2.6.32 glibc 2.11.2.
 * **DONE**: using `sigaction()` instead of `signal()` since that has more well-defined semantics.
 * **DONE**: handle SIGINT differently from other signals (other signals are urgent and cannot be ignored.  SIGINT on the other hand does not need to handled immediately, but we have to be careful for race conditions).
 * **DONE**: allow `sig_on()` and `sig_off()` to be nested.
``````




---

archive/issue_comments_109716.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -16,7 +16,6 @@\n * eliminate race conditions as much as possible, like a SIGINT arriving before `sig_on()` or during `sig_on()`.\n \n Other related tickets:\n-* #9893 (Make PARI *not* catch signals)\n * #800 (make _sig_on and _sig_off faster when stacked)\n * #9640 (Change PARI error catching mechanism)\n * #9564 (libsingular exponentiation can not be interrupted)\n@@ -27,6 +26,4 @@\n * #3423 (Make Pari error messages more informative)\n * #10126 (Fix error handing in Matrix_rational_dense._invert_pari())\n \n-Patch chain: #10115, #9893, **#9678**, #10061, #10030, #10018, #9640\n-\n-Dependencies: #10115, #9893\n+Patch chain: **#9678**, #10061, #10030, #10018, #9640\n``````\n",
    "created_at": "2010-11-11T22:19:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109716",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -16,7 +16,6 @@
 * eliminate race conditions as much as possible, like a SIGINT arriving before `sig_on()` or during `sig_on()`.
 
 Other related tickets:
-* #9893 (Make PARI *not* catch signals)
 * #800 (make _sig_on and _sig_off faster when stacked)
 * #9640 (Change PARI error catching mechanism)
 * #9564 (libsingular exponentiation can not be interrupted)
@@ -27,6 +26,4 @@
 * #3423 (Make Pari error messages more informative)
 * #10126 (Fix error handing in Matrix_rational_dense._invert_pari())
 
-Patch chain: #10115, #9893, **#9678**, #10061, #10030, #10018, #9640
-
-Dependencies: #10115, #9893
+Patch chain: **#9678**, #10061, #10030, #10018, #9640
``````




---

archive/issue_comments_109717.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -13,7 +13,7 @@\n * **IN PROGRESS**: fix breakage because of this patch: #10061.\n * **IN PROGRESS**: documentation: #10109.\n * allow to temporarily suspend interrupts and do this in `sage_malloc()` and friends (an interrupt during `malloc()` will mess up the heap, this happens sometimes with a \"fixed\"  #9564!)\n-* eliminate race conditions as much as possible, like a SIGINT arriving before `sig_on()` or during `sig_on()`.\n+* **DONE**: eliminate race condition when a SIGINT arrives before `sig_on()` or during `sig_on()`.\n \n Other related tickets:\n * #800 (make _sig_on and _sig_off faster when stacked)\n@@ -26,4 +26,4 @@\n * #3423 (Make Pari error messages more informative)\n * #10126 (Fix error handing in Matrix_rational_dense._invert_pari())\n \n-Patch chain: **#9678**, #10061, #10030, #10018, #9640\n+Patch chain: #9893, **#9678**, #10061, #10030, #10018, #9640\n``````\n",
    "created_at": "2010-11-13T12:32:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109717",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -13,7 +13,7 @@
 * **IN PROGRESS**: fix breakage because of this patch: #10061.
 * **IN PROGRESS**: documentation: #10109.
 * allow to temporarily suspend interrupts and do this in `sage_malloc()` and friends (an interrupt during `malloc()` will mess up the heap, this happens sometimes with a "fixed"  #9564!)
-* eliminate race conditions as much as possible, like a SIGINT arriving before `sig_on()` or during `sig_on()`.
+* **DONE**: eliminate race condition when a SIGINT arrives before `sig_on()` or during `sig_on()`.
 
 Other related tickets:
 * #800 (make _sig_on and _sig_off faster when stacked)
@@ -26,4 +26,4 @@
 * #3423 (Make Pari error messages more informative)
 * #10126 (Fix error handing in Matrix_rational_dense._invert_pari())
 
-Patch chain: **#9678**, #10061, #10030, #10018, #9640
+Patch chain: #9893, **#9678**, #10061, #10030, #10018, #9640
``````




---

archive/issue_comments_109718.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -26,4 +26,4 @@\n * #3423 (Make Pari error messages more informative)\n * #10126 (Fix error handing in Matrix_rational_dense._invert_pari())\n \n-Patch chain: #9893, **#9678**, #10061, #10030, #10018, #9640\n+Patch chain: #9893, #9345, **#9678**, #10061, #10030, #10018, #9640\n``````\n",
    "created_at": "2010-11-13T13:52:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109718",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -26,4 +26,4 @@
 * #3423 (Make Pari error messages more informative)
 * #10126 (Fix error handing in Matrix_rational_dense._invert_pari())
 
-Patch chain: #9893, **#9678**, #10061, #10030, #10018, #9640
+Patch chain: #9893, #9345, **#9678**, #10061, #10030, #10018, #9640
``````




---

archive/issue_comments_109719.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -12,7 +12,7 @@\n * **IN PROGRESS**: testing interrupt handling: #10030.\n * **IN PROGRESS**: fix breakage because of this patch: #10061.\n * **IN PROGRESS**: documentation: #10109.\n-* allow to temporarily suspend interrupts and do this in `sage_malloc()` and friends (an interrupt during `malloc()` will mess up the heap, this happens sometimes with a \"fixed\"  #9564!)\n+* Block interrupts during malloc: #10258.\n * **DONE**: eliminate race condition when a SIGINT arrives before `sig_on()` or during `sig_on()`.\n \n Other related tickets:\n@@ -20,10 +20,9 @@\n * #9640 (Change PARI error catching mechanism)\n * #9564 (libsingular exponentiation can not be interrupted)\n * #7879 (Remove unnecessary signal handling for low prec mpfr operations) --- hopefully `sig_on()` and `sig_off()` can be made very fast such that this shouldn't be an issue anymore.\n-* #10018 (Unhandled SIGSEGV after bnfcertify())\n * #7794 (`PolynomialRing_integral_domain` ignores Ctrl-C and segfaults)\n * #5313 (patch singular so that when it runs out of memory the error message says \"singular\" in it)\n * #3423 (Make Pari error messages more informative)\n * #10126 (Fix error handing in Matrix_rational_dense._invert_pari())\n \n-Patch chain: #9893, #9345, **#9678**, #10061, #10030, #10018, #9640\n+Patch chain: #9893, #9345, **#9678**, #10061, #10258, #10030, #10018, #9640\n``````\n",
    "created_at": "2010-11-13T14:15:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109719",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -12,7 +12,7 @@
 * **IN PROGRESS**: testing interrupt handling: #10030.
 * **IN PROGRESS**: fix breakage because of this patch: #10061.
 * **IN PROGRESS**: documentation: #10109.
-* allow to temporarily suspend interrupts and do this in `sage_malloc()` and friends (an interrupt during `malloc()` will mess up the heap, this happens sometimes with a "fixed"  #9564!)
+* Block interrupts during malloc: #10258.
 * **DONE**: eliminate race condition when a SIGINT arrives before `sig_on()` or during `sig_on()`.
 
 Other related tickets:
@@ -20,10 +20,9 @@
 * #9640 (Change PARI error catching mechanism)
 * #9564 (libsingular exponentiation can not be interrupted)
 * #7879 (Remove unnecessary signal handling for low prec mpfr operations) --- hopefully `sig_on()` and `sig_off()` can be made very fast such that this shouldn't be an issue anymore.
-* #10018 (Unhandled SIGSEGV after bnfcertify())
 * #7794 (`PolynomialRing_integral_domain` ignores Ctrl-C and segfaults)
 * #5313 (patch singular so that when it runs out of memory the error message says "singular" in it)
 * #3423 (Make Pari error messages more informative)
 * #10126 (Fix error handing in Matrix_rational_dense._invert_pari())
 
-Patch chain: #9893, #9345, **#9678**, #10061, #10030, #10018, #9640
+Patch chain: #9893, #9345, **#9678**, #10061, #10258, #10030, #10018, #9640
``````




---

archive/issue_comments_109720.json:
```json
{
    "body": "**Assignee:** @jdemeyer",
    "created_at": "2010-11-14T17:33:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109720",
    "user": "https://github.com/jdemeyer"
}
```

**Assignee:** @jdemeyer



---

archive/issue_comments_109721.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -7,22 +7,26 @@\n * **DONE**: handle SIGINT differently from other signals (other signals are urgent and cannot be ignored.  SIGINT on the other hand does not need to handled immediately, but we have to be careful for race conditions).\n * **DONE**: allow `sig_on()` and `sig_off()` to be nested.\n * **IN PROGRESS**: implement `sig_retry()` for retrying failed computations (this is useful for PARI, see #10018).\n-* have an interface for more general errors which are not signals.\n+* **todo**: have an interface for more general errors which are not signals.\n * **DONE**: clean up old, unused code.\n * **IN PROGRESS**: testing interrupt handling: #10030.\n-* **IN PROGRESS**: fix breakage because of this patch: #10061.\n+* **DONE**: fix breakage because of this patch: #10061.\n * **IN PROGRESS**: documentation: #10109.\n-* Block interrupts during malloc: #10258.\n+* **todo**: Block interrupts during malloc: #10258.\n * **DONE**: eliminate race condition when a SIGINT arrives before `sig_on()` or during `sig_on()`.\n \n-Other related tickets:\n+Other potentially related tickets:\n * #800 (make _sig_on and _sig_off faster when stacked)\n * #9640 (Change PARI error catching mechanism)\n * #9564 (libsingular exponentiation can not be interrupted)\n * #7879 (Remove unnecessary signal handling for low prec mpfr operations) --- hopefully `sig_on()` and `sig_off()` can be made very fast such that this shouldn't be an issue anymore.\n * #7794 (`PolynomialRing_integral_domain` ignores Ctrl-C and segfaults)\n * #5313 (patch singular so that when it runs out of memory the error message says \"singular\" in it)\n+* #7702 (Handle interrupts better in the notebook)\n+* #9163 (Doctest error in expect.py on Cygwin and OS X)\n * #3423 (Make Pari error messages more informative)\n * #10126 (Fix error handing in Matrix_rational_dense._invert_pari())\n \n Patch chain: #9893, #9345, **#9678**, #10061, #10258, #10030, #10018, #9640\n+\n+All patches in this chain up to #10030 must be applied before all doctests will pass.  These tickets are \"logically\" separated, but some functionality might depend on other tickets.\n``````\n",
    "created_at": "2010-11-14T17:33:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109721",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -7,22 +7,26 @@
 * **DONE**: handle SIGINT differently from other signals (other signals are urgent and cannot be ignored.  SIGINT on the other hand does not need to handled immediately, but we have to be careful for race conditions).
 * **DONE**: allow `sig_on()` and `sig_off()` to be nested.
 * **IN PROGRESS**: implement `sig_retry()` for retrying failed computations (this is useful for PARI, see #10018).
-* have an interface for more general errors which are not signals.
+* **todo**: have an interface for more general errors which are not signals.
 * **DONE**: clean up old, unused code.
 * **IN PROGRESS**: testing interrupt handling: #10030.
-* **IN PROGRESS**: fix breakage because of this patch: #10061.
+* **DONE**: fix breakage because of this patch: #10061.
 * **IN PROGRESS**: documentation: #10109.
-* Block interrupts during malloc: #10258.
+* **todo**: Block interrupts during malloc: #10258.
 * **DONE**: eliminate race condition when a SIGINT arrives before `sig_on()` or during `sig_on()`.
 
-Other related tickets:
+Other potentially related tickets:
 * #800 (make _sig_on and _sig_off faster when stacked)
 * #9640 (Change PARI error catching mechanism)
 * #9564 (libsingular exponentiation can not be interrupted)
 * #7879 (Remove unnecessary signal handling for low prec mpfr operations) --- hopefully `sig_on()` and `sig_off()` can be made very fast such that this shouldn't be an issue anymore.
 * #7794 (`PolynomialRing_integral_domain` ignores Ctrl-C and segfaults)
 * #5313 (patch singular so that when it runs out of memory the error message says "singular" in it)
+* #7702 (Handle interrupts better in the notebook)
+* #9163 (Doctest error in expect.py on Cygwin and OS X)
 * #3423 (Make Pari error messages more informative)
 * #10126 (Fix error handing in Matrix_rational_dense._invert_pari())
 
 Patch chain: #9893, #9345, **#9678**, #10061, #10258, #10030, #10018, #9640
+
+All patches in this chain up to #10030 must be applied before all doctests will pass.  These tickets are "logically" separated, but some functionality might depend on other tickets.
``````




---

archive/issue_comments_109722.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -12,7 +12,7 @@\n * **IN PROGRESS**: testing interrupt handling: #10030.\n * **DONE**: fix breakage because of this patch: #10061.\n * **IN PROGRESS**: documentation: #10109.\n-* **todo**: Block interrupts during malloc: #10258.\n+* **IN PROGRESS**: Block interrupts during malloc: #10258.\n * **DONE**: eliminate race condition when a SIGINT arrives before `sig_on()` or during `sig_on()`.\n \n Other potentially related tickets:\n@@ -23,10 +23,9 @@\n * #7794 (`PolynomialRing_integral_domain` ignores Ctrl-C and segfaults)\n * #5313 (patch singular so that when it runs out of memory the error message says \"singular\" in it)\n * #7702 (Handle interrupts better in the notebook)\n-* #9163 (Doctest error in expect.py on Cygwin and OS X)\n * #3423 (Make Pari error messages more informative)\n * #10126 (Fix error handing in Matrix_rational_dense._invert_pari())\n \n-Patch chain: #9893, #9345, **#9678**, #10061, #10258, #10030, #10018, #9640\n+Patch chain: **#9678**, #10061, #10258, #10030, #10018, #9640\n \n-All patches in this chain up to #10030 must be applied before all doctests will pass.  These tickets are \"logically\" separated, but some functionality might depend on other tickets.\n+All patches in this chain up to #10030 must be applied before all doctests will pass.  These tickets are \"logically\" separated, but some doctests might depend on other tickets.\n``````\n",
    "created_at": "2011-01-10T02:07:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109722",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -12,7 +12,7 @@
 * **IN PROGRESS**: testing interrupt handling: #10030.
 * **DONE**: fix breakage because of this patch: #10061.
 * **IN PROGRESS**: documentation: #10109.
-* **todo**: Block interrupts during malloc: #10258.
+* **IN PROGRESS**: Block interrupts during malloc: #10258.
 * **DONE**: eliminate race condition when a SIGINT arrives before `sig_on()` or during `sig_on()`.
 
 Other potentially related tickets:
@@ -23,10 +23,9 @@
 * #7794 (`PolynomialRing_integral_domain` ignores Ctrl-C and segfaults)
 * #5313 (patch singular so that when it runs out of memory the error message says "singular" in it)
 * #7702 (Handle interrupts better in the notebook)
-* #9163 (Doctest error in expect.py on Cygwin and OS X)
 * #3423 (Make Pari error messages more informative)
 * #10126 (Fix error handing in Matrix_rational_dense._invert_pari())
 
-Patch chain: #9893, #9345, **#9678**, #10061, #10258, #10030, #10018, #9640
+Patch chain: **#9678**, #10061, #10258, #10030, #10018, #9640
 
-All patches in this chain up to #10030 must be applied before all doctests will pass.  These tickets are "logically" separated, but some functionality might depend on other tickets.
+All patches in this chain up to #10030 must be applied before all doctests will pass.  These tickets are "logically" separated, but some doctests might depend on other tickets.
``````




---

archive/issue_comments_109723.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -7,12 +7,12 @@\n * **DONE**: handle SIGINT differently from other signals (other signals are urgent and cannot be ignored.  SIGINT on the other hand does not need to handled immediately, but we have to be careful for race conditions).\n * **DONE**: allow `sig_on()` and `sig_off()` to be nested.\n * **IN PROGRESS**: implement `sig_retry()` for retrying failed computations (this is useful for PARI, see #10018).\n-* **todo**: have an interface for more general errors which are not signals.\n+* **TODO**: have an interface for more general errors which are not signals.\n * **DONE**: clean up old, unused code.\n-* **IN PROGRESS**: testing interrupt handling: #10030.\n+* **DONE**: testing interrupt handling: #10030.\n * **DONE**: fix breakage because of this patch: #10061.\n * **IN PROGRESS**: documentation: #10109.\n-* **IN PROGRESS**: Block interrupts during malloc: #10258.\n+* **DONE**: Block interrupts during malloc: #10258.\n * **DONE**: eliminate race condition when a SIGINT arrives before `sig_on()` or during `sig_on()`.\n \n Other potentially related tickets:\n``````\n",
    "created_at": "2011-01-13T23:33:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109723",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -7,12 +7,12 @@
 * **DONE**: handle SIGINT differently from other signals (other signals are urgent and cannot be ignored.  SIGINT on the other hand does not need to handled immediately, but we have to be careful for race conditions).
 * **DONE**: allow `sig_on()` and `sig_off()` to be nested.
 * **IN PROGRESS**: implement `sig_retry()` for retrying failed computations (this is useful for PARI, see #10018).
-* **todo**: have an interface for more general errors which are not signals.
+* **TODO**: have an interface for more general errors which are not signals.
 * **DONE**: clean up old, unused code.
-* **IN PROGRESS**: testing interrupt handling: #10030.
+* **DONE**: testing interrupt handling: #10030.
 * **DONE**: fix breakage because of this patch: #10061.
 * **IN PROGRESS**: documentation: #10109.
-* **IN PROGRESS**: Block interrupts during malloc: #10258.
+* **DONE**: Block interrupts during malloc: #10258.
 * **DONE**: eliminate race condition when a SIGINT arrives before `sig_on()` or during `sig_on()`.
 
 Other potentially related tickets:
``````




---

archive/issue_comments_109724.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -6,7 +6,7 @@\n * **DONE**: using `sigaction()` instead of `signal()` since that has more well-defined semantics.\n * **DONE**: handle SIGINT differently from other signals (other signals are urgent and cannot be ignored.  SIGINT on the other hand does not need to handled immediately, but we have to be careful for race conditions).\n * **DONE**: allow `sig_on()` and `sig_off()` to be nested.\n-* **IN PROGRESS**: implement `sig_retry()` for retrying failed computations (this is useful for PARI, see #10018).\n+* **DONE**: implement `sig_retry()` for retrying failed computations (this is useful for PARI, see #10018).\n * **TODO**: have an interface for more general errors which are not signals.\n * **DONE**: clean up old, unused code.\n * **DONE**: testing interrupt handling: #10030.\n``````\n",
    "created_at": "2011-01-14T00:24:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109724",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -6,7 +6,7 @@
 * **DONE**: using `sigaction()` instead of `signal()` since that has more well-defined semantics.
 * **DONE**: handle SIGINT differently from other signals (other signals are urgent and cannot be ignored.  SIGINT on the other hand does not need to handled immediately, but we have to be careful for race conditions).
 * **DONE**: allow `sig_on()` and `sig_off()` to be nested.
-* **IN PROGRESS**: implement `sig_retry()` for retrying failed computations (this is useful for PARI, see #10018).
+* **DONE**: implement `sig_retry()` for retrying failed computations (this is useful for PARI, see #10018).
 * **TODO**: have an interface for more general errors which are not signals.
 * **DONE**: clean up old, unused code.
 * **DONE**: testing interrupt handling: #10030.
``````




---

archive/issue_comments_109725.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -7,7 +7,7 @@\n * **DONE**: handle SIGINT differently from other signals (other signals are urgent and cannot be ignored.  SIGINT on the other hand does not need to handled immediately, but we have to be careful for race conditions).\n * **DONE**: allow `sig_on()` and `sig_off()` to be nested.\n * **DONE**: implement `sig_retry()` for retrying failed computations (this is useful for PARI, see #10018).\n-* **TODO**: have an interface for more general errors which are not signals.\n+* ***TODO***: have an interface for more general errors which are not signals.  This can then be used by PARI, NTL and possibly other C libraries.\n * **DONE**: clean up old, unused code.\n * **DONE**: testing interrupt handling: #10030.\n * **DONE**: fix breakage because of this patch: #10061.\n``````\n",
    "created_at": "2011-01-14T00:26:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109725",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -7,7 +7,7 @@
 * **DONE**: handle SIGINT differently from other signals (other signals are urgent and cannot be ignored.  SIGINT on the other hand does not need to handled immediately, but we have to be careful for race conditions).
 * **DONE**: allow `sig_on()` and `sig_off()` to be nested.
 * **DONE**: implement `sig_retry()` for retrying failed computations (this is useful for PARI, see #10018).
-* **TODO**: have an interface for more general errors which are not signals.
+* ***TODO***: have an interface for more general errors which are not signals.  This can then be used by PARI, NTL and possibly other C libraries.
 * **DONE**: clean up old, unused code.
 * **DONE**: testing interrupt handling: #10030.
 * **DONE**: fix breakage because of this patch: #10061.
``````




---

archive/issue_events_028869.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-01-14T17:40:59Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "milestone": "sage-4.6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9678#event-28869"
}
```



---

archive/issue_comments_109726.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2011-01-14T17:40:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109726",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_109727.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,7 +2,7 @@\n \n Major changes planned:\n * **DONE**: make `sig_on()` have function syntax so that we can declare it `cdef int sig_on() except 0`.  See #10115 for the syntax changes.\n-* **DONE**: do not save signals in `sigsetjmp()` (by giving a second argument of 0 instead of 1).  This speeds up a sig_on/sig_off loop from 382 clock cycles to 24 clock cycles on a Core(TM)2 Duo CPU T5870 @ 2.00GHz running Linux 2.6.32 glibc 2.11.2.\n+* **DONE**: do not save signals in `sigsetjmp()` (by giving a second argument of 0 instead of 1).  This speeds up a sig_on/sig_off loop from 382 clock cycles to 30 clock cycles on a Core(TM)2 Duo CPU T5870 @ 2.00GHz running Linux 2.6.34 glibc 2.11.2.\n * **DONE**: using `sigaction()` instead of `signal()` since that has more well-defined semantics.\n * **DONE**: handle SIGINT differently from other signals (other signals are urgent and cannot be ignored.  SIGINT on the other hand does not need to handled immediately, but we have to be careful for race conditions).\n * **DONE**: allow `sig_on()` and `sig_off()` to be nested.\n``````\n",
    "created_at": "2011-01-14T17:52:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109727",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,7 +2,7 @@
 
 Major changes planned:
 * **DONE**: make `sig_on()` have function syntax so that we can declare it `cdef int sig_on() except 0`.  See #10115 for the syntax changes.
-* **DONE**: do not save signals in `sigsetjmp()` (by giving a second argument of 0 instead of 1).  This speeds up a sig_on/sig_off loop from 382 clock cycles to 24 clock cycles on a Core(TM)2 Duo CPU T5870 @ 2.00GHz running Linux 2.6.32 glibc 2.11.2.
+* **DONE**: do not save signals in `sigsetjmp()` (by giving a second argument of 0 instead of 1).  This speeds up a sig_on/sig_off loop from 382 clock cycles to 30 clock cycles on a Core(TM)2 Duo CPU T5870 @ 2.00GHz running Linux 2.6.34 glibc 2.11.2.
 * **DONE**: using `sigaction()` instead of `signal()` since that has more well-defined semantics.
 * **DONE**: handle SIGINT differently from other signals (other signals are urgent and cannot be ignored.  SIGINT on the other hand does not need to handled immediately, but we have to be careful for race conditions).
 * **DONE**: allow `sig_on()` and `sig_off()` to be nested.
``````




---

archive/attachments_012401.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "9678.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket9678/9678.patch",
    "created_at": "2011-01-15T05:04:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/jdemeyer"
}
```



---

archive/issue_comments_109728.json:
```json
{
    "body": "",
    "created_at": "2011-01-15T05:04:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109728",
    "user": "https://github.com/jdemeyer"
}
```





---

archive/issue_comments_109729.json:
```json
{
    "body": "<a id='comment:30'></a>\nDefinite improvement! We should put it in the very next Sage-4.6.2.alpha to give it as much exposure as possible since it touches a couple of core C files.",
    "created_at": "2011-01-21T00:15:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109729",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:30'></a>
Definite improvement! We should put it in the very next Sage-4.6.2.alpha to give it as much exposure as possible since it touches a couple of core C files.



---

archive/issue_comments_109730.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2011-01-21T00:15:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109730",
    "user": "https://github.com/vbraun"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_109731.json:
```json
{
    "body": "**Reviewer:** Volker Braun",
    "created_at": "2011-01-21T08:38:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109731",
    "user": "https://github.com/jdemeyer"
}
```

**Reviewer:** Volker Braun



---

archive/issue_comments_109732.json:
```json
{
    "body": "<a id='comment:32'></a>\nReplying to [vbraun](#comment%3A30):\n> Definite improvement! We should put it in the very next Sage-4.6.2.alpha to give it as much exposure as possible since it touches a couple of core C files.\n\n\nAlternatively, I am considering making 4.6.2 a pretty straightforward release and then putting various \"big\" tickets such as this one, #9433, #10572 in the next release which would then be sage-4.7.",
    "created_at": "2011-01-21T08:42:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109732",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:32'></a>
Replying to [vbraun](#comment%3A30):
> Definite improvement! We should put it in the very next Sage-4.6.2.alpha to give it as much exposure as possible since it touches a couple of core C files.


Alternatively, I am considering making 4.6.2 a pretty straightforward release and then putting various "big" tickets such as this one, #9433, #10572 in the next release which would then be sage-4.7.



---

archive/issue_events_028870.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-02-07T08:22:55Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "milestone": "sage-4.6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9678#event-28870"
}
```



---

archive/issue_events_028871.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-02-07T08:22:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "milestone": "sage-4.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9678#event-28871"
}
```



---

archive/issue_comments_109733.json:
```json
{
    "body": "<a id='comment:35'></a>\nI'm trying out Sage-4.6.2.rc0 in Fedora 14 i386 inside `VirtualBox`, and it doesn't catch the SIGILL. Bactrace is below. Everything else works fine. Also, no such issue on my native Fedora 14 x86_64.\n\nI'm not sure who is to blame here, could be something with the virtual machine. I did write a SIGILL handler in Perl and that works, so `VirtualBox` is at least in principle able to have guests raise and handle SIGILL. Though there is also some forking involved... \n\nThe only thing thats special about SIGILL that comes to mind is that it might not be automatically be reset to SIG_DFL upon entrance. But I don't see how that could cause this. Here is my testcase:\n\n```\n[vbraun@localhost ~]$ sage -gdb\n----------------------------------------------------------------------\n| Sage Version 4.6.2.rc0, Release Date: 2011-02-18                   |\n| Type notebook() for the GUI, and license() for information.        |\n----------------------------------------------------------------------\n**********************************************************************\n*                                                                    *\n* Warning: this is a prerelease version, and it may be unstable.     *\n*                                                                    *\n**********************************************************************\n/home/vbraun/Sage/sage/local/bin/sage-ipython\nGNU gdb (GDB) Fedora (7.2-41.fc14)\nCopyright (C) 2010 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\nand \"show warranty\" for details.\nThis GDB was configured as \"i686-redhat-linux-gnu\".\nFor bug reporting instructions, please see:\n<http://www.gnu.org/software/gdb/bugs/>...\nReading symbols from /mnt/sage/vbraun/sage-4.6.2.rc0/local/bin/python...done.\n[Thread debugging using libthread_db enabled]\nPython 2.6.4 (r264:75706, Feb 19 2011, 16:56:24) \n[GCC 4.5.1 20100924 (Red Hat 4.5.1-4)] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\nTraceback (most recent call last):\n  File \"/usr/share/gdb/auto-load/usr/lib/libstdc++.so.6.0.14-gdb.py\", line 59, in <module>\n    from libstdcxx.v6.printers import register_libstdcxx_printers\n  File \"/usr/lib/../share/gcc-4.5.1/python/libstdcxx/v6/printers.py\", line 19, in <module>\n    import itertools\nImportError: No module named itertools\nDetaching after fork from child process 10247.\n```  \nSo far, so good. Now run:\n\n```\nsage: import sage.tests.interrupt\nsage: sage.tests.interrupt.test_signal_ill()\nDetaching after fork from child process 10248.\n\nProgram received signal SIGILL, Illegal instruction.\n0x05dac6b1 in _sig_on_prejmp (__pyx_self=<value optimized out>, __pyx_args=0xb7fa702c, __pyx_kwds=0x0) at /home/vbraun/Sage/sage/local/include/csage/interrupt.h:192\n192\t        _signals.sig_on_count++;\nMissing separate debuginfos, use: debuginfo-install expat-2.0.1-10.fc13.i686 fontconfig-2.8.0-2.fc14.i686 glibc-2.13-1.i686 keyutils-libs-1.2-6.fc12.i686 krb5-libs-1.8.2-8.fc14.i686 libcom_err-1.41.12-6.fc14.i686 libgcc-4.5.1-4.fc14.i686 libgfortran-4.5.1-4.fc14.i686 libselinux-2.0.96-6.fc14.1.i686 libstdc++-4.5.1-4.fc14.i686 ncurses-libs-5.7-9.20100703.fc14.i686 nss-softokn-freebl-3.12.9-2.fc14.i686 openssl-1.0.0d-1.fc14.i686\n(gdb) l\n187\t    fprintf(stderr, \"sig_on (counter = %i) at %s:%i\\n\", _signals.sig_on_count+1, file, line);\n188\t    fflush(stderr);\n189\t#endif\n190\t    if (_signals.sig_on_count > 0)\n191\t    {\n192\t        _signals.sig_on_count++;\n193\t        return 1;\n194\t    }\n195\t\n196\t    /* At this point, _signals.sig_on_count == 0 */\n(gdb) bt\n#0  0x05dac6b1 in _sig_on_prejmp (__pyx_self=<value optimized out>, __pyx_args=0xb7fa702c, __pyx_kwds=0x0)\n    at /home/vbraun/Sage/sage/local/include/csage/interrupt.h:192\n#1  __pyx_pf_4sage_5tests_9interrupt_test_signal_ill (__pyx_self=<value optimized out>, __pyx_args=0xb7fa702c, __pyx_kwds=0x0) at sage/tests/interrupt.c:2878\n#2  0x0017c398 in PyCFunction_Call (func=0xaad686c, arg=0xb7fa702c, kw=0x0) at Objects/methodobject.c:85\n#3  0x001de9dd in call_function (f=0x820c4d4, throwflag=0) at Python/ceval.c:3706\n#4  PyEval_EvalFrameEx (f=0x820c4d4, throwflag=0) at Python/ceval.c:2389\n#5  0x001e06e7 in PyEval_EvalCodeEx (co=0xaa5fd58, globals=0x83cf3e4, locals=0x83cf3e4, args=0x0, argcount=0, kws=0x0, kwcount=0, defs=0x0, defcount=0, \n    closure=0x0) at Python/ceval.c:2968\n#6  0x001e0803 in PyEval_EvalCode (co=0xaa5fd58, globals=0x83cf3e4, locals=0x83cf3e4) at Python/ceval.c:522\n#7  0x001deccb in exec_statement (f=0x81630ec, throwflag=0) at Python/ceval.c:4401\n#8  PyEval_EvalFrameEx (f=0x81630ec, throwflag=0) at Python/ceval.c:1717\n#9  0x001e06e7 in PyEval_EvalCodeEx (co=0x837aa88, globals=0x8370714, locals=0x0, args=0x8162c08, argcount=2, kws=0x8162c10, kwcount=0, defs=0x0, defcount=0, \n    closure=0x0) at Python/ceval.c:2968\n#10 0x001dea92 in fast_function (f=0x8162abc, throwflag=0) at Python/ceval.c:3802\n```",
    "created_at": "2011-02-19T22:38:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109733",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:35'></a>
I'm trying out Sage-4.6.2.rc0 in Fedora 14 i386 inside `VirtualBox`, and it doesn't catch the SIGILL. Bactrace is below. Everything else works fine. Also, no such issue on my native Fedora 14 x86_64.

I'm not sure who is to blame here, could be something with the virtual machine. I did write a SIGILL handler in Perl and that works, so `VirtualBox` is at least in principle able to have guests raise and handle SIGILL. Though there is also some forking involved... 

The only thing thats special about SIGILL that comes to mind is that it might not be automatically be reset to SIG_DFL upon entrance. But I don't see how that could cause this. Here is my testcase:

```
[vbraun@localhost ~]$ sage -gdb
----------------------------------------------------------------------
| Sage Version 4.6.2.rc0, Release Date: 2011-02-18                   |
| Type notebook() for the GUI, and license() for information.        |
----------------------------------------------------------------------
**********************************************************************
*                                                                    *
* Warning: this is a prerelease version, and it may be unstable.     *
*                                                                    *
**********************************************************************
/home/vbraun/Sage/sage/local/bin/sage-ipython
GNU gdb (GDB) Fedora (7.2-41.fc14)
Copyright (C) 2010 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "i686-redhat-linux-gnu".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>...
Reading symbols from /mnt/sage/vbraun/sage-4.6.2.rc0/local/bin/python...done.
[Thread debugging using libthread_db enabled]
Python 2.6.4 (r264:75706, Feb 19 2011, 16:56:24) 
[GCC 4.5.1 20100924 (Red Hat 4.5.1-4)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
Traceback (most recent call last):
  File "/usr/share/gdb/auto-load/usr/lib/libstdc++.so.6.0.14-gdb.py", line 59, in <module>
    from libstdcxx.v6.printers import register_libstdcxx_printers
  File "/usr/lib/../share/gcc-4.5.1/python/libstdcxx/v6/printers.py", line 19, in <module>
    import itertools
ImportError: No module named itertools
Detaching after fork from child process 10247.
```  
So far, so good. Now run:

```
sage: import sage.tests.interrupt
sage: sage.tests.interrupt.test_signal_ill()
Detaching after fork from child process 10248.

Program received signal SIGILL, Illegal instruction.
0x05dac6b1 in _sig_on_prejmp (__pyx_self=<value optimized out>, __pyx_args=0xb7fa702c, __pyx_kwds=0x0) at /home/vbraun/Sage/sage/local/include/csage/interrupt.h:192
192	        _signals.sig_on_count++;
Missing separate debuginfos, use: debuginfo-install expat-2.0.1-10.fc13.i686 fontconfig-2.8.0-2.fc14.i686 glibc-2.13-1.i686 keyutils-libs-1.2-6.fc12.i686 krb5-libs-1.8.2-8.fc14.i686 libcom_err-1.41.12-6.fc14.i686 libgcc-4.5.1-4.fc14.i686 libgfortran-4.5.1-4.fc14.i686 libselinux-2.0.96-6.fc14.1.i686 libstdc++-4.5.1-4.fc14.i686 ncurses-libs-5.7-9.20100703.fc14.i686 nss-softokn-freebl-3.12.9-2.fc14.i686 openssl-1.0.0d-1.fc14.i686
(gdb) l
187	    fprintf(stderr, "sig_on (counter = %i) at %s:%i\n", _signals.sig_on_count+1, file, line);
188	    fflush(stderr);
189	#endif
190	    if (_signals.sig_on_count > 0)
191	    {
192	        _signals.sig_on_count++;
193	        return 1;
194	    }
195	
196	    /* At this point, _signals.sig_on_count == 0 */
(gdb) bt
#0  0x05dac6b1 in _sig_on_prejmp (__pyx_self=<value optimized out>, __pyx_args=0xb7fa702c, __pyx_kwds=0x0)
    at /home/vbraun/Sage/sage/local/include/csage/interrupt.h:192
#1  __pyx_pf_4sage_5tests_9interrupt_test_signal_ill (__pyx_self=<value optimized out>, __pyx_args=0xb7fa702c, __pyx_kwds=0x0) at sage/tests/interrupt.c:2878
#2  0x0017c398 in PyCFunction_Call (func=0xaad686c, arg=0xb7fa702c, kw=0x0) at Objects/methodobject.c:85
#3  0x001de9dd in call_function (f=0x820c4d4, throwflag=0) at Python/ceval.c:3706
#4  PyEval_EvalFrameEx (f=0x820c4d4, throwflag=0) at Python/ceval.c:2389
#5  0x001e06e7 in PyEval_EvalCodeEx (co=0xaa5fd58, globals=0x83cf3e4, locals=0x83cf3e4, args=0x0, argcount=0, kws=0x0, kwcount=0, defs=0x0, defcount=0, 
    closure=0x0) at Python/ceval.c:2968
#6  0x001e0803 in PyEval_EvalCode (co=0xaa5fd58, globals=0x83cf3e4, locals=0x83cf3e4) at Python/ceval.c:522
#7  0x001deccb in exec_statement (f=0x81630ec, throwflag=0) at Python/ceval.c:4401
#8  PyEval_EvalFrameEx (f=0x81630ec, throwflag=0) at Python/ceval.c:1717
#9  0x001e06e7 in PyEval_EvalCodeEx (co=0x837aa88, globals=0x8370714, locals=0x0, args=0x8162c08, argcount=2, kws=0x8162c10, kwcount=0, defs=0x0, defcount=0, 
    closure=0x0) at Python/ceval.c:2968
#10 0x001dea92 in fast_function (f=0x8162abc, throwflag=0) at Python/ceval.c:3802
```



---

archive/issue_comments_109734.json:
```json
{
    "body": "<a id='comment:36'></a>\nVolker, do you have `strace` installed?  If so, you could try\n\n```\n$ mkdir trace\n$ strace -ff -o trace/sage ./sage -c 'import sage.tests.interrupt; sage.tests.interrupt.test_signal_ill()'\n```\n\nand send me the `trace/` directory.\n\nAnd maybe do the same for `test_signal_bus()` to compare with.",
    "created_at": "2011-02-20T11:09:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109734",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:36'></a>
Volker, do you have `strace` installed?  If so, you could try

```
$ mkdir trace
$ strace -ff -o trace/sage ./sage -c 'import sage.tests.interrupt; sage.tests.interrupt.test_signal_ill()'
```

and send me the `trace/` directory.

And maybe do the same for `test_signal_bus()` to compare with.



---

archive/issue_comments_109735.json:
```json
{
    "body": "<a id='comment:37'></a>\nSure, no problem. I did strace ill, bus, and fpe and uploaded the trace/ directory to http://www.stp.dias.ie/~vbraun/trace.tar.bz2",
    "created_at": "2011-02-20T11:25:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109735",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:37'></a>
Sure, no problem. I did strace ill, bus, and fpe and uploaded the trace/ directory to http://www.stp.dias.ie/~vbraun/trace.tar.bz2



---

archive/issue_comments_109736.json:
```json
{
    "body": "<a id='comment:38'></a>\nHold your horses! Its working now, and SIGILL is caught correctly. I did rebuild the sage library in the meantime, so I probably miscompiled something before.",
    "created_at": "2011-02-20T11:31:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109736",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:38'></a>
Hold your horses! Its working now, and SIGILL is caught correctly. I did rebuild the sage library in the meantime, so I probably miscompiled something before.



---

archive/issue_comments_109737.json:
```json
{
    "body": "<a id='comment:39'></a>\nIn any case, based on your trace, it looks like everything is working correctly.  I see the following:\n\n```\n--- SIGILL (Illegal instruction) @ 0 (0) ---\nrt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0\nwrite(2, \"Traceback (most recent call last\"..., 35) = 35\nwrite(2, \"  File \\\"/home/vbraun/Sage/sage/l\"..., 74) = 74\n```\n\nSo, the program receives `SIGILL` and prints a Traceback, which is exactly what should happen.\n\nI cannot understand why at some point it did not work for you...",
    "created_at": "2011-02-20T14:48:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109737",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:39'></a>
In any case, based on your trace, it looks like everything is working correctly.  I see the following:

```
--- SIGILL (Illegal instruction) @ 0 (0) ---
rt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0
write(2, "Traceback (most recent call last"..., 35) = 35
write(2, "  File \"/home/vbraun/Sage/sage/l"..., 74) = 74
```

So, the program receives `SIGILL` and prints a Traceback, which is exactly what should happen.

I cannot understand why at some point it did not work for you...



---

archive/issue_comments_109738.json:
```json
{
    "body": "<a id='comment:40'></a>\nAfter many more rebuilds I found the problem: On i386 (and only i386) the Parma Polyhedra library (PPL, #10039) tests if SSE is available. It does this during the library initialization by installing a SIGILL handler and then issuing SSE instructions. It then resets the handler to `signal(SIGILL, SIG_DFL)`. Clearly, this deactivates Sage's SIGILL handler. \n\nSince we don't use PPL's floating point arithmetics I'll make sure to configure it in a way that it does not test for SSE availability.",
    "created_at": "2011-02-20T16:49:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109738",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:40'></a>
After many more rebuilds I found the problem: On i386 (and only i386) the Parma Polyhedra library (PPL, #10039) tests if SSE is available. It does this during the library initialization by installing a SIGILL handler and then issuing SSE instructions. It then resets the handler to `signal(SIGILL, SIG_DFL)`. Clearly, this deactivates Sage's SIGILL handler. 

Since we don't use PPL's floating point arithmetics I'll make sure to configure it in a way that it does not test for SSE availability.



---

archive/issue_comments_109739.json:
```json
{
    "body": "<a id='comment:41'></a>\nReplying to [vbraun](#comment%3A40):\n> After many more rebuilds I found the problem: On i386 (and only i386) the Parma Polyhedra library (PPL, #10039) tests if SSE is available. It does this during the library initialization by installing a SIGILL handler and then issuing SSE instructions. It then resets the handler to `signal(SIGILL, SIG_DFL)`. Clearly, this deactivates Sage's SIGILL handler. \n\n\nI consider this to be a bug in PPL.  Using `sigaction()` or `signal()`, it is possible to save an existing signal handler and then restore it afterwards.",
    "created_at": "2011-02-20T16:55:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109739",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:41'></a>
Replying to [vbraun](#comment%3A40):
> After many more rebuilds I found the problem: On i386 (and only i386) the Parma Polyhedra library (PPL, #10039) tests if SSE is available. It does this during the library initialization by installing a SIGILL handler and then issuing SSE instructions. It then resets the handler to `signal(SIGILL, SIG_DFL)`. Clearly, this deactivates Sage's SIGILL handler. 


I consider this to be a bug in PPL.  Using `sigaction()` or `signal()`, it is possible to save an existing signal handler and then restore it afterwards.



---

archive/issue_comments_109740.json:
```json
{
    "body": "<a id='comment:42'></a>\nI agree and will report it upstream.",
    "created_at": "2011-02-20T17:05:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109740",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:42'></a>
I agree and will report it upstream.



---

archive/issue_events_028872.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-08T21:45:19Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9678#event-28872"
}
```



---

archive/issue_comments_109741.json:
```json
{
    "body": "**Merged:** sage-4.7.alpha1",
    "created_at": "2011-03-08T21:45:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109741",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-4.7.alpha1



---

archive/issue_comments_109742.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -25,7 +25,4 @@\n * #7702 (Handle interrupts better in the notebook)\n * #3423 (Make Pari error messages more informative)\n * #10126 (Fix error handing in Matrix_rational_dense._invert_pari())\n-\n-Patch chain: **#9678**, #10061, #10258, #10030, #10018, #9640\n-\n-All patches in this chain up to #10030 must be applied before all doctests will pass.  These tickets are \"logically\" separated, but some doctests might depend on other tickets.\n+* #10818 (EclLib should allow signals to make LISP code interruptable)\n``````\n",
    "created_at": "2011-03-28T19:53:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109742",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -25,7 +25,4 @@
 * #7702 (Handle interrupts better in the notebook)
 * #3423 (Make Pari error messages more informative)
 * #10126 (Fix error handing in Matrix_rational_dense._invert_pari())
-
-Patch chain: **#9678**, #10061, #10258, #10030, #10018, #9640
-
-All patches in this chain up to #10030 must be applied before all doctests will pass.  These tickets are "logically" separated, but some doctests might depend on other tickets.
+* #10818 (EclLib should allow signals to make LISP code interruptable)
``````




---

archive/issue_comments_109743.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -11,7 +11,7 @@\n * **DONE**: clean up old, unused code.\n * **DONE**: testing interrupt handling: #10030.\n * **DONE**: fix breakage because of this patch: #10061.\n-* **IN PROGRESS**: documentation: #10109.\n+* **DONE**: documentation: #10109.\n * **DONE**: Block interrupts during malloc: #10258.\n * **DONE**: eliminate race condition when a SIGINT arrives before `sig_on()` or during `sig_on()`.\n \n``````\n",
    "created_at": "2011-04-14T19:46:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109743",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -11,7 +11,7 @@
 * **DONE**: clean up old, unused code.
 * **DONE**: testing interrupt handling: #10030.
 * **DONE**: fix breakage because of this patch: #10061.
-* **IN PROGRESS**: documentation: #10109.
+* **DONE**: documentation: #10109.
 * **DONE**: Block interrupts during malloc: #10258.
 * **DONE**: eliminate race condition when a SIGINT arrives before `sig_on()` or during `sig_on()`.
 
``````




---

archive/issue_comments_109744.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -7,7 +7,7 @@\n * **DONE**: handle SIGINT differently from other signals (other signals are urgent and cannot be ignored.  SIGINT on the other hand does not need to handled immediately, but we have to be careful for race conditions).\n * **DONE**: allow `sig_on()` and `sig_off()` to be nested.\n * **DONE**: implement `sig_retry()` for retrying failed computations (this is useful for PARI, see #10018).\n-* ***TODO***: have an interface for more general errors which are not signals.  This can then be used by PARI, NTL and possibly other C libraries.\n+* **DONE**: have an interface for more general errors which are not signals.  This can then be used by PARI, NTL and possibly other C libraries (various tickets).\n * **DONE**: clean up old, unused code.\n * **DONE**: testing interrupt handling: #10030.\n * **DONE**: fix breakage because of this patch: #10061.\n``````\n",
    "created_at": "2015-07-13T19:25:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9678#issuecomment-109744",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -7,7 +7,7 @@
 * **DONE**: handle SIGINT differently from other signals (other signals are urgent and cannot be ignored.  SIGINT on the other hand does not need to handled immediately, but we have to be careful for race conditions).
 * **DONE**: allow `sig_on()` and `sig_off()` to be nested.
 * **DONE**: implement `sig_retry()` for retrying failed computations (this is useful for PARI, see #10018).
-* ***TODO***: have an interface for more general errors which are not signals.  This can then be used by PARI, NTL and possibly other C libraries.
+* **DONE**: have an interface for more general errors which are not signals.  This can then be used by PARI, NTL and possibly other C libraries (various tickets).
 * **DONE**: clean up old, unused code.
 * **DONE**: testing interrupt handling: #10030.
 * **DONE**: fix breakage because of this patch: #10061.
``````

