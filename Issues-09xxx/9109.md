# Issue 9109: Fast cython class for maps between finite sets.

archive/issues_009109.json:
```json
{
    "body": "The patch implements fast Cython classes for maps between finite sets. The goal in particular is to allow for building easily submonoids of the monoid of all maps from one set to itself.\n\nSee for example class NDPFMonoidPosetNewSet in\n[parking_functions_posets-fh.patch](http://combinat.sagemath.org/hgwebdir.cgi/patches/file/tip/parking_functions_posets-fh.patch#l1) \n\n\n**Apply:**\n1. [attachment:trac_9109-finite_set_maps-fh.patch](https://github.com/sagemath/sage/files/ticket9109/trac_9109-finite_set_maps-fh.patch)\n\n**Dependencies:** #8702\n\n**Assignee:** @hivert\n\n**Keywords:** finite sets map\n\n**Author:** Florent Hivert\n\n**Reviewer:** Mike Hansen, Nicolas M. Thi\u00e9ry\n\n**Merged:** sage-4.7.alpha5\n\nIssue created by migration from https://trac.sagemath.org/ticket/9109\n\n",
    "closed_at": "2011-04-13T07:42:50Z",
    "created_at": "2010-06-01T17:08:23Z",
    "labels": [
        "component: combinatorics",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.7",
    "title": "Fast cython class for maps between finite sets.",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/9109",
    "user": "https://github.com/hivert"
}
```
The patch implements fast Cython classes for maps between finite sets. The goal in particular is to allow for building easily submonoids of the monoid of all maps from one set to itself.

See for example class NDPFMonoidPosetNewSet in
[parking_functions_posets-fh.patch](http://combinat.sagemath.org/hgwebdir.cgi/patches/file/tip/parking_functions_posets-fh.patch#l1) 


**Apply:**
1. [attachment:trac_9109-finite_set_maps-fh.patch](https://github.com/sagemath/sage/files/ticket9109/trac_9109-finite_set_maps-fh.patch)

**Dependencies:** #8702

**Assignee:** @hivert

**Keywords:** finite sets map

**Author:** Florent Hivert

**Reviewer:** Mike Hansen, Nicolas M. Thiéry

**Merged:** sage-4.7.alpha5

Issue created by migration from https://trac.sagemath.org/ticket/9109





---

archive/issue_comments_077387.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,10 @@\n-A class for dealing with maps between finite sets.\n+The patch implement fast Sython classes to deals with maps between finite\n+sets. The goal in particular is to allows to build very easily submonoid of\n+the monoid of function from one set to itself.\n \n-The patch is in preparation os sage-combinat-queue\n+See for example class NDPFMonoidPosetNewSet in\n+http://combinat.sagemath.org/hgwebdir.cgi/patches/file/3cc643fbe6f3/parking_functions_posets-fh.patch#l1\n+\n+Depends on #9109\n+\n+\n``````\n",
    "created_at": "2010-06-15T10:26:31Z",
    "issue": "https://github.com/sagemath/sage/issues/9109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9109#issuecomment-77387",
    "user": "https://github.com/hivert"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,10 @@
-A class for dealing with maps between finite sets.
+The patch implement fast Sython classes to deals with maps between finite
+sets. The goal in particular is to allows to build very easily submonoid of
+the monoid of function from one set to itself.
 
-The patch is in preparation os sage-combinat-queue
+See for example class NDPFMonoidPosetNewSet in
+http://combinat.sagemath.org/hgwebdir.cgi/patches/file/3cc643fbe6f3/parking_functions_posets-fh.patch#l1
+
+Depends on #9109
+
+
``````




---

archive/issue_events_066192.json:
```json
{
    "actor": "https://github.com/hivert",
    "created_at": "2010-06-15T10:26:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9109",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9109#event-66192"
}
```



---

archive/issue_comments_077388.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -5,6 +5,6 @@\n See for example class NDPFMonoidPosetNewSet in\n http://combinat.sagemath.org/hgwebdir.cgi/patches/file/3cc643fbe6f3/parking_functions_posets-fh.patch#l1\n \n-Depends on #9109\n+Depends on #8702\n \n \n``````\n",
    "created_at": "2010-06-15T11:26:51Z",
    "issue": "https://github.com/sagemath/sage/issues/9109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9109#issuecomment-77388",
    "user": "https://github.com/hivert"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -5,6 +5,6 @@
 See for example class NDPFMonoidPosetNewSet in
 http://combinat.sagemath.org/hgwebdir.cgi/patches/file/3cc643fbe6f3/parking_functions_posets-fh.patch#l1
 
-Depends on #9109
+Depends on #8702
 
 
``````




---

archive/issue_comments_077389.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-The patch implement fast Sython classes to deals with maps between finite\n+The patch implement fast Cython classes to deals with maps between finite\n sets. The goal in particular is to allows to build very easily submonoid of\n the monoid of function from one set to itself.\n \n``````\n",
    "created_at": "2010-06-15T13:25:11Z",
    "issue": "https://github.com/sagemath/sage/issues/9109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9109#issuecomment-77389",
    "user": "https://github.com/hivert"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-The patch implement fast Sython classes to deals with maps between finite
+The patch implement fast Cython classes to deals with maps between finite
 sets. The goal in particular is to allows to build very easily submonoid of
 the monoid of function from one set to itself.
 
``````




---

archive/issue_comments_077390.json:
```json
{
    "body": "<a id='comment:4'></a>\nI just uploaded a new version after some changes in #8702",
    "created_at": "2010-10-24T09:48:07Z",
    "issue": "https://github.com/sagemath/sage/issues/9109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9109#issuecomment-77390",
    "user": "https://github.com/hivert"
}
```

<a id='comment:4'></a>
I just uploaded a new version after some changes in #8702



---

archive/issue_comments_077391.json:
```json
{
    "body": "**Changing assignee** from sage-combinat to @hivert.",
    "created_at": "2010-10-24T09:48:07Z",
    "issue": "https://github.com/sagemath/sage/issues/9109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9109#issuecomment-77391",
    "user": "https://github.com/hivert"
}
```

**Changing assignee** from sage-combinat to @hivert.



---

archive/attachments_011478.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_9109-finite_set_maps-fh.2.patch",
    "asset_url": "tarball://root/attachments/ticket9109/trac_9109-finite_set_maps-fh.2.patch",
    "created_at": "2010-10-24T09:48:33Z",
    "issue": "https://github.com/sagemath/sage/issues/9109",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket9109/trac_9109-finite_set_maps-fh.2.patch",
    "user": "https://github.com/hivert"
}
```



---

archive/issue_comments_077392.json:
```json
{
    "body": "Attachment [trac_9109-finite_set_maps-fh.2.patch](https://github.com/sagemath/sage/files/ticket9109/trac_9109-finite_set_maps-fh.2.patch) by @hivert created at 2010-10-24 09:48:33",
    "created_at": "2010-10-24T09:48:33Z",
    "issue": "https://github.com/sagemath/sage/issues/9109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9109#issuecomment-77392",
    "user": "https://github.com/hivert"
}
```

Attachment [trac_9109-finite_set_maps-fh.2.patch](https://github.com/sagemath/sage/files/ticket9109/trac_9109-finite_set_maps-fh.2.patch) by @hivert created at 2010-10-24 09:48:33



---

archive/issue_comments_077393.json:
```json
{
    "body": "**Reviewer:** Mike Hansen, Nicolas M. Thi\u00e9ry",
    "created_at": "2011-04-02T17:54:41Z",
    "issue": "https://github.com/sagemath/sage/issues/9109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9109#issuecomment-77393",
    "user": "https://github.com/hivert"
}
```

**Reviewer:** Mike Hansen, Nicolas M. Thiéry



---

archive/issue_comments_077394.json:
```json
{
    "body": "<a id='comment:5'></a>\nThis should now be ready for review",
    "created_at": "2011-04-02T17:54:41Z",
    "issue": "https://github.com/sagemath/sage/issues/9109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9109#issuecomment-77394",
    "user": "https://github.com/hivert"
}
```

<a id='comment:5'></a>
This should now be ready for review



---

archive/issue_comments_077395.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,8 +3,9 @@\n the monoid of function from one set to itself.\n \n See for example class NDPFMonoidPosetNewSet in\n-http://combinat.sagemath.org/hgwebdir.cgi/patches/file/3cc643fbe6f3/parking_functions_posets-fh.patch#l1\n+[parking_functions_posets-fh.patch](http://combinat.sagemath.org/hgwebdir.cgi/patches/file/tip/parking_functions_posets-fh.patch#l1) \n \n Depends on #8702\n \n+Apply only [trac_9109-finite_set_maps-fh.patch](https://github.com/sagemath/sage/files/ticket9109/trac_9109-finite_set_maps-fh.patch)\n \n``````\n",
    "created_at": "2011-04-02T17:54:41Z",
    "issue": "https://github.com/sagemath/sage/issues/9109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9109#issuecomment-77395",
    "user": "https://github.com/hivert"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,8 +3,9 @@
 the monoid of function from one set to itself.
 
 See for example class NDPFMonoidPosetNewSet in
-http://combinat.sagemath.org/hgwebdir.cgi/patches/file/3cc643fbe6f3/parking_functions_posets-fh.patch#l1
+[parking_functions_posets-fh.patch](http://combinat.sagemath.org/hgwebdir.cgi/patches/file/tip/parking_functions_posets-fh.patch#l1) 
 
 Depends on #8702
 
+Apply only [trac_9109-finite_set_maps-fh.patch](https://github.com/sagemath/sage/files/ticket9109/trac_9109-finite_set_maps-fh.patch)
 
``````




---

archive/issue_comments_077396.json:
```json
{
    "body": "<a id='comment:6'></a>\nThey are still a few glitches remaining. Setting status back to need work",
    "created_at": "2011-04-02T21:54:40Z",
    "issue": "https://github.com/sagemath/sage/issues/9109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9109#issuecomment-77396",
    "user": "https://github.com/hivert"
}
```

<a id='comment:6'></a>
They are still a few glitches remaining. Setting status back to need work



---

archive/issue_events_066193.json:
```json
{
    "actor": "https://github.com/hivert",
    "created_at": "2011-04-02T21:54:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9109",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9109#event-66193"
}
```



---

archive/issue_events_066194.json:
```json
{
    "actor": "https://github.com/hivert",
    "created_at": "2011-04-02T21:54:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9109",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9109#event-66194"
}
```



---

archive/issue_comments_077397.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -5,7 +5,8 @@\n See for example class NDPFMonoidPosetNewSet in\n [parking_functions_posets-fh.patch](http://combinat.sagemath.org/hgwebdir.cgi/patches/file/tip/parking_functions_posets-fh.patch#l1) \n \n-Depends on #8702\n \n-Apply only [trac_9109-finite_set_maps-fh.patch](https://github.com/sagemath/sage/files/ticket9109/trac_9109-finite_set_maps-fh.patch)\n+**Apply:**\n+1. [attachment:trac_9109-finite_set_maps-fh.patch](https://github.com/sagemath/sage/files/ticket9109/trac_9109-finite_set_maps-fh.patch)\n \n+**Dependencies:** #8702\n``````\n",
    "created_at": "2011-04-03T07:39:46Z",
    "issue": "https://github.com/sagemath/sage/issues/9109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9109#issuecomment-77397",
    "user": "https://github.com/hivert"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -5,7 +5,8 @@
 See for example class NDPFMonoidPosetNewSet in
 [parking_functions_posets-fh.patch](http://combinat.sagemath.org/hgwebdir.cgi/patches/file/tip/parking_functions_posets-fh.patch#l1) 
 
-Depends on #8702
 
-Apply only [trac_9109-finite_set_maps-fh.patch](https://github.com/sagemath/sage/files/ticket9109/trac_9109-finite_set_maps-fh.patch)
+**Apply:**
+1. [attachment:trac_9109-finite_set_maps-fh.patch](https://github.com/sagemath/sage/files/ticket9109/trac_9109-finite_set_maps-fh.patch)
 
+**Dependencies:** #8702
``````




---

archive/issue_comments_077398.json:
```json
{
    "body": "<a id='comment:8'></a>\nThe submitted patch should fix all remaining problem. Please review.",
    "created_at": "2011-04-03T15:26:04Z",
    "issue": "https://github.com/sagemath/sage/issues/9109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9109#issuecomment-77398",
    "user": "https://github.com/hivert"
}
```

<a id='comment:8'></a>
The submitted patch should fix all remaining problem. Please review.



---

archive/issue_events_066195.json:
```json
{
    "actor": "https://github.com/hivert",
    "created_at": "2011-04-03T15:26:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9109",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9109#event-66195"
}
```



---

archive/issue_events_066196.json:
```json
{
    "actor": "https://github.com/hivert",
    "created_at": "2011-04-03T15:26:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9109",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9109#event-66196"
}
```



---

archive/issue_comments_077399.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,6 +1,4 @@\n-The patch implement fast Cython classes to deals with maps between finite\n-sets. The goal in particular is to allows to build very easily submonoid of\n-the monoid of function from one set to itself.\n+The patch implements fast Cython classes for maps between finite sets. The goal in particular is to allow for building easily submonoids of the monoid of all maps from one set to itself.\n \n See for example class NDPFMonoidPosetNewSet in\n [parking_functions_posets-fh.patch](http://combinat.sagemath.org/hgwebdir.cgi/patches/file/tip/parking_functions_posets-fh.patch#l1) \n``````\n",
    "created_at": "2011-04-05T11:35:51Z",
    "issue": "https://github.com/sagemath/sage/issues/9109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9109#issuecomment-77399",
    "user": "https://github.com/nthiery"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,6 +1,4 @@
-The patch implement fast Cython classes to deals with maps between finite
-sets. The goal in particular is to allows to build very easily submonoid of
-the monoid of function from one set to itself.
+The patch implements fast Cython classes for maps between finite sets. The goal in particular is to allow for building easily submonoids of the monoid of all maps from one set to itself.
 
 See for example class NDPFMonoidPosetNewSet in
 [parking_functions_posets-fh.patch](http://combinat.sagemath.org/hgwebdir.cgi/patches/file/tip/parking_functions_posets-fh.patch#l1) 
``````




---

archive/issue_comments_077400.json:
```json
{
    "body": "<a id='comment:9'></a>\nWe discussed the design quite some with Florent, and used the code intensively over the last month. It's a useful addition! Thanks!\n\nFlorent: please check the small reviewer patch on the Sage-Combinat queue. If the changes are ok with you, you can fold/upload and set a positive review on my behalf.",
    "created_at": "2011-04-05T11:35:51Z",
    "issue": "https://github.com/sagemath/sage/issues/9109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9109#issuecomment-77400",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:9'></a>
We discussed the design quite some with Florent, and used the code intensively over the last month. It's a useful addition! Thanks!

Florent: please check the small reviewer patch on the Sage-Combinat queue. If the changes are ok with you, you can fold/upload and set a positive review on my behalf.



---

archive/issue_comments_077401.json:
```json
{
    "body": "<a id='comment:10'></a>\n> Florent: please check the small reviewer patch on the Sage-Combinat\n> queue. If the changes are ok with you, you can fold/upload and set a\n> positive review on my behalf.\n\n\nHi Nicolas ! Thanks a lot for the numerous English corrections. The doc is\nmuch better now ! I'm perfectly ok with all your changes, except for the\nfollowing wrong ReST markup:\n\n```\ndiff --git a/sage/sets/finite_set_map_cy.pyx b/sage/sets/finite_set_map_cy.pyx\n--- a/sage/sets/finite_set_map_cy.pyx\n+++ b/sage/sets/finite_set_map_cy.pyx\n@@ -86,7 +86,7 @@ cpdef fibers(f, domain):\n         {1: {1}}\n \n     .. seealso:: :func:`fibers_args` if one needs to pass extra\n-    arguments to ``f``.\n+       arguments to ``f``.\n     \"\"\"\n     result = {}\n     for x in domain:\n```\n\nI folded your patch and added this small change. It is a rather trivial change\nbut, in order to follow the rules, someone has to look at it. So it's now your\njob to set the positive review :-)",
    "created_at": "2011-04-05T19:13:25Z",
    "issue": "https://github.com/sagemath/sage/issues/9109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9109#issuecomment-77401",
    "user": "https://github.com/hivert"
}
```

<a id='comment:10'></a>
> Florent: please check the small reviewer patch on the Sage-Combinat
> queue. If the changes are ok with you, you can fold/upload and set a
> positive review on my behalf.


Hi Nicolas ! Thanks a lot for the numerous English corrections. The doc is
much better now ! I'm perfectly ok with all your changes, except for the
following wrong ReST markup:

```
diff --git a/sage/sets/finite_set_map_cy.pyx b/sage/sets/finite_set_map_cy.pyx
--- a/sage/sets/finite_set_map_cy.pyx
+++ b/sage/sets/finite_set_map_cy.pyx
@@ -86,7 +86,7 @@ cpdef fibers(f, domain):
         {1: {1}}
 
     .. seealso:: :func:`fibers_args` if one needs to pass extra
-    arguments to ``f``.
+       arguments to ``f``.
     """
     result = {}
     for x in domain:
```

I folded your patch and added this small change. It is a rather trivial change
but, in order to follow the rules, someone has to look at it. So it's now your
job to set the positive review :-)



---

archive/attachments_011479.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_9109-finite_set_maps-fh.patch",
    "asset_url": "tarball://root/attachments/ticket9109/trac_9109-finite_set_maps-fh.patch",
    "created_at": "2011-04-05T21:38:53Z",
    "issue": "https://github.com/sagemath/sage/issues/9109",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket9109/trac_9109-finite_set_maps-fh.patch",
    "user": "https://github.com/nthiery"
}
```



---

archive/issue_comments_077402.json:
```json
{
    "body": "<a id='comment:11'></a>\nAttachment [trac_9109-finite_set_maps-fh.patch](https://github.com/sagemath/sage/files/ticket9109/trac_9109-finite_set_maps-fh.patch) by @nthiery created at 2011-04-05 21:38:53",
    "created_at": "2011-04-05T21:38:53Z",
    "issue": "https://github.com/sagemath/sage/issues/9109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9109#issuecomment-77402",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:11'></a>
Attachment [trac_9109-finite_set_maps-fh.patch](https://github.com/sagemath/sage/files/ticket9109/trac_9109-finite_set_maps-fh.patch) by @nthiery created at 2011-04-05 21:38:53



---

archive/issue_events_066197.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2011-04-05T21:38:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9109",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9109#event-66197"
}
```



---

archive/issue_events_066198.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2011-04-05T21:38:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9109",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9109#event-66198"
}
```



---

archive/issue_comments_077403.json:
```json
{
    "body": "**Merged:** sage-4.7.alpha5",
    "created_at": "2011-04-13T07:42:50Z",
    "issue": "https://github.com/sagemath/sage/issues/9109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9109#issuecomment-77403",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-4.7.alpha5



---

archive/issue_events_066199.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-13T07:42:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9109",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9109#event-66199"
}
```



---

archive/issue_events_066200.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-13T07:42:50Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/9109",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9109#event-66200"
}
```
