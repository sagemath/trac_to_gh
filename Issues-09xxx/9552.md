# Issue 9552: cython.py references the old sage notebook code

archive/issues_009552.json:
```json
{
    "body": " I noticed to my surprise that misc/cython.py has these lines in it (which should be fixed, of course):\n\n```\n import sage.server.support\n    d = {}\n    sage.server.support.cython_import_all(tmpfile, d,\n                                         verbose=verbose, compile_message=compile_message,\n                                         use_cache=use_cache,\n                                         create_local_c_file=False)\n```\n\nAssignee: @jasongrout\n\nCC:  @kiwifb\n\nBranch/Commit: [1fc034eda517210fee9afa56b60dfe4ff39f6586](https://github.com/sagemath/sagetrac-mirror/commit/1fc034eda517210fee9afa56b60dfe4ff39f6586)\n\nReviewer: Fran\u00e7ois Bissey\n\nAuthor: Jeroen Demeyer\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/9552\n\n",
    "closed_at": "2015-05-30T22:48:30Z",
    "created_at": "2010-07-19T19:59:21Z",
    "labels": [
        "component: misc",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.8",
    "title": "cython.py references the old sage notebook code",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/9552",
    "user": "https://github.com/williamstein"
}
```
 I noticed to my surprise that misc/cython.py has these lines in it (which should be fixed, of course):

```
 import sage.server.support
    d = {}
    sage.server.support.cython_import_all(tmpfile, d,
                                         verbose=verbose, compile_message=compile_message,
                                         use_cache=use_cache,
                                         create_local_c_file=False)
```

Assignee: @jasongrout

CC:  @kiwifb

Branch/Commit: [1fc034eda517210fee9afa56b60dfe4ff39f6586](https://github.com/sagemath/sagetrac-mirror/commit/1fc034eda517210fee9afa56b60dfe4ff39f6586)

Reviewer: Fran√ßois Bissey

Author: Jeroen Demeyer

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/9552





---

archive/issue_events_028926.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9552",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9552#event-28926"
}
```



---

archive/issue_events_028927.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9552",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9552#event-28927"
}
```



---

archive/issue_events_028928.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9552",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9552#event-28928"
}
```



---

archive/issue_events_028929.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9552",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9552#event-28929"
}
```



---

archive/issue_events_028930.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9552",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9552#event-28930"
}
```



---

archive/issue_events_028931.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9552",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9552#event-28931"
}
```



---

archive/issue_events_028932.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9552",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9552#event-28932"
}
```



---

archive/issue_events_028933.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/9552",
    "rename": {
        "from": "cython.pyx references the old sage notebook code",
        "to": "cython.py references the old sage notebook code"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9552#event-28933"
}
```



---

archive/issue_comments_116252.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n- I noticed to my surprise that misc/cython.pyx has these lines in it (which should be fixed, of course):\n+ I noticed to my surprise that misc/cython.py has these lines in it (which should be fixed, of course):\n \n ```\n  import sage.server.support\n``````\n",
    "created_at": "2014-08-15T05:41:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9552#issuecomment-116252",
    "user": "https://github.com/kcrisman"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
- I noticed to my surprise that misc/cython.pyx has these lines in it (which should be fixed, of course):
+ I noticed to my surprise that misc/cython.py has these lines in it (which should be fixed, of course):
 
 ```
  import sage.server.support
``````




---

archive/issue_comments_116253.json:
```json
{
    "body": "<a id='comment:5'></a>\nYeah, I think a lot of that stuff could go elsewhere, it's just support...\n\nIn this case the \"right\" fix is to move the whole Cython stuff somewhere else, probably just to cython.py (which is not a pyx file, at least not any more).",
    "created_at": "2014-08-15T05:41:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9552#issuecomment-116253",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:5'></a>
Yeah, I think a lot of that stuff could go elsewhere, it's just support...

In this case the "right" fix is to move the whole Cython stuff somewhere else, probably just to cython.py (which is not a pyx file, at least not any more).



---

archive/issue_comments_116254.json:
```json
{
    "body": "<a id='comment:6'></a>\nIndeed, this wouldn't be hard to do.  Worst-case we could move them but leave a deprecation that points to the new location (cython.py seems best).\n\n```\nsage: search_src('cython_import')\nmisc/cython.py:657:    sage.server.support.cython_import_all(tmpfile, d,\nmisc/cython.py:756:    from sage.server.support import cython_import\nmisc/cython.py:757:    return cython_import(file, create_local_c_file=False)\nmisc/cython_c.pyx:61:    sage.server.support.cython_import_all(tmpfile, globals(),\nserver/support.py:425:def cython_import(filename, verbose=False, compile_message=False,\nserver/support.py:452:def cython_import_all(filename, globals, verbose=False, compile_message=False,\nserver/support.py:468:    m = cython_import(filename, verbose=verbose, compile_message=compile_message,\n```\nThe notebook already has its own versions of these two functions so that is not a problem, as far as I can tell (though it wouldn't hurt testing it can still Cythonize after doing this).",
    "created_at": "2014-08-15T05:46:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9552#issuecomment-116254",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:6'></a>
Indeed, this wouldn't be hard to do.  Worst-case we could move them but leave a deprecation that points to the new location (cython.py seems best).

```
sage: search_src('cython_import')
misc/cython.py:657:    sage.server.support.cython_import_all(tmpfile, d,
misc/cython.py:756:    from sage.server.support import cython_import
misc/cython.py:757:    return cython_import(file, create_local_c_file=False)
misc/cython_c.pyx:61:    sage.server.support.cython_import_all(tmpfile, globals(),
server/support.py:425:def cython_import(filename, verbose=False, compile_message=False,
server/support.py:452:def cython_import_all(filename, globals, verbose=False, compile_message=False,
server/support.py:468:    m = cython_import(filename, verbose=verbose, compile_message=compile_message,
```
The notebook already has its own versions of these two functions so that is not a problem, as far as I can tell (though it wouldn't hurt testing it can still Cythonize after doing this).



---

archive/issue_comments_116255.json:
```json
{
    "body": "Branch: [u/jdemeyer/ticket/9552](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/9552)",
    "created_at": "2015-03-25T16:58:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9552#issuecomment-116255",
    "user": "https://github.com/jdemeyer"
}
```

Branch: [u/jdemeyer/ticket/9552](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/9552)



---

archive/issue_comments_116256.json:
```json
{
    "body": "Commit: [325ca9ca11b9ade262297562989a8ca1ff398eab](https://github.com/sagemath/sagetrac-mirror/commit/325ca9ca11b9ade262297562989a8ca1ff398eab)",
    "created_at": "2015-03-25T17:00:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9552#issuecomment-116256",
    "user": "https://github.com/jdemeyer"
}
```

Commit: [325ca9ca11b9ade262297562989a8ca1ff398eab](https://github.com/sagemath/sagetrac-mirror/commit/325ca9ca11b9ade262297562989a8ca1ff398eab)



---

archive/issue_comments_116257.json:
```json
{
    "body": "<a id='comment:8'></a>\nNew commits:\n|                                                                                                                                          |                                                                |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------|\n|[325ca9c](https://github.com/sagemath/sagetrac-mirror/commit/325ca9ca11b9ade262297562989a8ca1ff398eab)|`Move Cython functions from server/support.py to misc/cython.py`|",
    "created_at": "2015-03-25T17:00:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9552#issuecomment-116257",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'></a>
New commits:
|                                                                                                                                          |                                                                |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------|
|[325ca9c](https://github.com/sagemath/sagetrac-mirror/commit/325ca9ca11b9ade262297562989a8ca1ff398eab)|`Move Cython functions from server/support.py to misc/cython.py`|



---

archive/issue_comments_116258.json:
```json
{
    "body": "Author: Jeroen Demeyer",
    "created_at": "2015-03-25T17:00:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9552#issuecomment-116258",
    "user": "https://github.com/jdemeyer"
}
```

Author: Jeroen Demeyer



---

archive/issue_comments_116259.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-03-25T17:00:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9552#issuecomment-116259",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_events_028934.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-25T17:00:00Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9552",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9552#event-28934"
}
```



---

archive/issue_events_028935.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-25T17:00:00Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9552",
    "milestone": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9552#event-28935"
}
```



---

archive/issue_comments_116260.json:
```json
{
    "body": "<a id='comment:9'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                          |                                                                |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------|\n|[1fc034e](https://github.com/sagemath/sagetrac-mirror/commit/1fc034eda517210fee9afa56b60dfe4ff39f6586)|`Move Cython functions from server/support.py to misc/cython.py`|",
    "created_at": "2015-05-05T21:02:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9552#issuecomment-116260",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                          |                                                                |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------|
|[1fc034e](https://github.com/sagemath/sagetrac-mirror/commit/1fc034eda517210fee9afa56b60dfe4ff39f6586)|`Move Cython functions from server/support.py to misc/cython.py`|



---

archive/issue_comments_116261.json:
```json
{
    "body": "Changing commit from \"[325ca9ca11b9ade262297562989a8ca1ff398eab](https://github.com/sagemath/sagetrac-mirror/commit/325ca9ca11b9ade262297562989a8ca1ff398eab)\" to \"[1fc034eda517210fee9afa56b60dfe4ff39f6586](https://github.com/sagemath/sagetrac-mirror/commit/1fc034eda517210fee9afa56b60dfe4ff39f6586)\"",
    "created_at": "2015-05-05T21:02:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9552#issuecomment-116261",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[325ca9ca11b9ade262297562989a8ca1ff398eab](https://github.com/sagemath/sagetrac-mirror/commit/325ca9ca11b9ade262297562989a8ca1ff398eab)" to "[1fc034eda517210fee9afa56b60dfe4ff39f6586](https://github.com/sagemath/sagetrac-mirror/commit/1fc034eda517210fee9afa56b60dfe4ff39f6586)"



---

archive/issue_events_028936.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-05-30T07:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9552",
    "milestone": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9552#event-28936"
}
```



---

archive/issue_events_028937.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-05-30T07:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9552",
    "milestone": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9552#event-28937"
}
```



---

archive/issue_comments_116262.json:
```json
{
    "body": "<a id='comment:11'></a>\nLooks good to me.",
    "created_at": "2015-05-30T11:09:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9552#issuecomment-116262",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:11'></a>
Looks good to me.



---

archive/issue_comments_116263.json:
```json
{
    "body": "Reviewer: Fran\u00e7ois Bissey",
    "created_at": "2015-05-30T11:09:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9552#issuecomment-116263",
    "user": "https://github.com/kiwifb"
}
```

Reviewer: Fran√ßois Bissey



---

archive/issue_comments_116264.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-05-30T11:09:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9552#issuecomment-116264",
    "user": "https://github.com/kiwifb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_116265.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-05-30T22:48:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9552#issuecomment-116265",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_028938.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-05-30T22:48:30Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/9552",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9552#event-28938"
}
```



---

archive/issue_comments_116266.json:
```json
{
    "body": "Changing branch from \"[u/jdemeyer/ticket/9552](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/9552)\" to \"[1fc034eda517210fee9afa56b60dfe4ff39f6586](https://github.com/sagemath/sagetrac-mirror/commit/1fc034eda517210fee9afa56b60dfe4ff39f6586)\"",
    "created_at": "2015-05-30T22:48:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9552#issuecomment-116266",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "[u/jdemeyer/ticket/9552](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/9552)" to "[1fc034eda517210fee9afa56b60dfe4ff39f6586](https://github.com/sagemath/sagetrac-mirror/commit/1fc034eda517210fee9afa56b60dfe4ff39f6586)"
