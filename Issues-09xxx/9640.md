# Issue 9640: Change PARI error catching mechanism

archive/issues_009640.json:
```json
{
    "body": "Currently, the exceptions thrown by PARI are rather cryptic, like\n\n```\nTraceback (most recent call last):\n...\nPariError:  (15)\n```\n\nThis ticket does the following:\n\n- Use `cb_pari_handle_exception()` instead of `err_catch()` to catch PARI exceptions.\n\n- Using a mechanism similar to #9636, catch the full text of the exception and pass it to `PariError`.\n\n- Introduce a new function `sig_error()` to callback to the interrupt/signal handling code to handle errors which aren't signals and use that for PARI.\n\nApply: [attachment:9640-pari_error_callbacks_v2.patch]\n\n\n**Assignee:** @williamstein\n\n**CC:**  @nexttime @jdemeyer\n\n**Keywords:** pari error interrupt\n\n**Reviewer:** Jeroen Demeyer, Peter Bruin\n\n**Author:** Peter Bruin, Jeroen Demeyer\n\n**Merged:** sage-5.13.beta3\n\n**Dependencies:** #14029, #13311\n\nIssue created by migration from https://trac.sagemath.org/ticket/9640\n\n",
    "closed_at": "2013-11-06T12:48:56Z",
    "created_at": "2010-07-29T15:47:12Z",
    "labels": [
        "component: interfaces",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.13",
    "title": "Change PARI error catching mechanism",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/9640",
    "user": "https://github.com/jdemeyer"
}
```
Currently, the exceptions thrown by PARI are rather cryptic, like

```
Traceback (most recent call last):
...
PariError:  (15)
```

This ticket does the following:

- Use `cb_pari_handle_exception()` instead of `err_catch()` to catch PARI exceptions.

- Using a mechanism similar to #9636, catch the full text of the exception and pass it to `PariError`.

- Introduce a new function `sig_error()` to callback to the interrupt/signal handling code to handle errors which aren't signals and use that for PARI.

Apply: [attachment:9640-pari_error_callbacks_v2.patch]


**Assignee:** @williamstein

**CC:**  @nexttime @jdemeyer

**Keywords:** pari error interrupt

**Reviewer:** Jeroen Demeyer, Peter Bruin

**Author:** Peter Bruin, Jeroen Demeyer

**Merged:** sage-5.13.beta3

**Dependencies:** #14029, #13311

Issue created by migration from https://trac.sagemath.org/ticket/9640





---

archive/issue_comments_087777.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -6,6 +6,6 @@\n PariError:  (15)\n ```\n \n-Using a mechanism similar to #9636, it should be possible to catch the full text of the exception and use it to throw PariError.  We should change to using cb_pari_handle_exception() instead of err_catch() to catch PARI exceptions.\n+Using a mechanism similar to #9636, it should be possible to catch the full text of the exception and use it to throw `PariError`.  We should change to using `cb_pari_handle_exception()` instead of `err_catch()` to catch PARI exceptions.\n \n-Dependencies: #9343, #9636\n+Dependencies: #9678\n``````\n",
    "created_at": "2010-09-27T10:53:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9640#issuecomment-87777",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -6,6 +6,6 @@
 PariError:  (15)
 ```
 
-Using a mechanism similar to #9636, it should be possible to catch the full text of the exception and use it to throw PariError.  We should change to using cb_pari_handle_exception() instead of err_catch() to catch PARI exceptions.
+Using a mechanism similar to #9636, it should be possible to catch the full text of the exception and use it to throw `PariError`.  We should change to using `cb_pari_handle_exception()` instead of `err_catch()` to catch PARI exceptions.
 
-Dependencies: #9343, #9636
+Dependencies: #9678
``````




---

archive/issue_comments_087778.json:
```json
{
    "body": "**Author:** Jeroen Demeyer",
    "created_at": "2010-09-27T11:55:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9640#issuecomment-87778",
    "user": "https://github.com/nexttime"
}
```

**Author:** Jeroen Demeyer



---

archive/issue_comments_087779.json:
```json
{
    "body": "Old patch for reference",
    "created_at": "2010-10-17T18:31:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9640#issuecomment-87779",
    "user": "https://github.com/jdemeyer"
}
```

Old patch for reference



---

archive/attachments_012343.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "9640old.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket9640/9640old.patch",
    "created_at": "2010-10-17T18:32:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/jdemeyer"
}
```



---

archive/issue_comments_087780.json:
```json
{
    "body": "<a id='comment:3'></a>\n",
    "created_at": "2010-10-17T18:32:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9640#issuecomment-87780",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:3'></a>




---

archive/issue_comments_087781.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -8,4 +8,4 @@\n \n Using a mechanism similar to #9636, it should be possible to catch the full text of the exception and use it to throw `PariError`.  We should change to using `cb_pari_handle_exception()` instead of `err_catch()` to catch PARI exceptions.\n \n-Dependencies: #9678\n+Dependencies: #10115, #9893, #9678\n``````\n",
    "created_at": "2010-10-17T18:32:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9640#issuecomment-87781",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -8,4 +8,4 @@
 
 Using a mechanism similar to #9636, it should be possible to catch the full text of the exception and use it to throw `PariError`.  We should change to using `cb_pari_handle_exception()` instead of `err_catch()` to catch PARI exceptions.
 
-Dependencies: #9678
+Dependencies: #10115, #9893, #9678
``````




---

archive/issue_comments_087782.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"pari error interrupt\".",
    "created_at": "2010-10-17T18:32:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9640#issuecomment-87782",
    "user": "https://github.com/jdemeyer"
}
```

**Changing keywords** from "" to "pari error interrupt".



---

archive/issue_events_073140.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "milestone": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9640#event-73140"
}
```



---

archive/issue_events_073141.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9640#event-73141"
}
```



---

archive/issue_comments_087783.json:
```json
{
    "body": "<a id='comment:6'></a>\nI am working on a patch that does the following things suggested by the ticket description:\n- Rewrite `pari_catch_sig_on()` and `pari_catch_sig_off()` to use the callbacks `cb_pari_handle_exception` and `cb_pari_err_recover` (defined by the PARI library) in combination with `sig_on()`/`sig_off()`, as opposed to the additional `setjmp()` of the current implementation.\n- Catch output sent to `pariErr` and store it in a string attribute `pari_instance.error_string` for later use by `PariError`.\n\nIt seems to work quite well; the only doctest failures I've seen so far are a few tests expecting a PARI warning message.  With the patch, these are not printed because they also go to `pariErr`.\n\nTo be done:\n- Make `PariError` aware of the stored string to give a more informative error message.  This should probably simply be extracted from the lines starting with `***` in `pari_instance.error_string`.\n- Minor change in PARI: send any extra newline at the start of the error message to `pariErr` instead of `pariOut` (this happens if the last printed character was not a newline).\n- Distinguish between errors and warnings; the latter should probably be printed to `stderr` as before.  This should be done either by filtering the text sent to `pariErr` or by having `pari_catch_sig_off()` check if `pari_instance.error_string` is non-empty even if no error occurred.\n\nThis may make #14894 redundant, although that ticket could be used for general things to be done for the upgrade to PARI 2.6.",
    "created_at": "2013-09-11T14:09:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9640#issuecomment-87783",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:6'></a>
I am working on a patch that does the following things suggested by the ticket description:
- Rewrite `pari_catch_sig_on()` and `pari_catch_sig_off()` to use the callbacks `cb_pari_handle_exception` and `cb_pari_err_recover` (defined by the PARI library) in combination with `sig_on()`/`sig_off()`, as opposed to the additional `setjmp()` of the current implementation.
- Catch output sent to `pariErr` and store it in a string attribute `pari_instance.error_string` for later use by `PariError`.

It seems to work quite well; the only doctest failures I've seen so far are a few tests expecting a PARI warning message.  With the patch, these are not printed because they also go to `pariErr`.

To be done:
- Make `PariError` aware of the stored string to give a more informative error message.  This should probably simply be extracted from the lines starting with `***` in `pari_instance.error_string`.
- Minor change in PARI: send any extra newline at the start of the error message to `pariErr` instead of `pariOut` (this happens if the last printed character was not a newline).
- Distinguish between errors and warnings; the latter should probably be printed to `stderr` as before.  This should be done either by filtering the text sent to `pariErr` or by having `pari_catch_sig_off()` check if `pari_instance.error_string` is non-empty even if no error occurred.

This may make #14894 redundant, although that ticket could be used for general things to be done for the upgrade to PARI 2.6.



---

archive/attachments_012344.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "9640-pari_error_handling.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket9640/9640-pari_error_handling.patch",
    "created_at": "2013-09-11T15:22:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/pjbruin"
}
```



---

archive/issue_comments_087784.json:
```json
{
    "body": "based on 5.12.beta4 + #15124",
    "created_at": "2013-09-11T15:22:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9640#issuecomment-87784",
    "user": "https://github.com/pjbruin"
}
```

based on 5.12.beta4 + #15124



---

archive/issue_comments_087785.json:
```json
{
    "body": "**Work_Issues:** see comment 6",
    "created_at": "2013-09-11T15:24:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9640#issuecomment-87785",
    "user": "https://github.com/pjbruin"
}
```

**Work_Issues:** see comment 6



---

archive/issue_events_073142.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2013-09-11T15:24:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9640#event-73142"
}
```



---

archive/issue_comments_087786.json:
```json
{
    "body": "<a id='comment:7'></a>\nThe attached patch passes doctests on x86_64 GNU/Linux, except for two tests expecting a PARI warning (see above).",
    "created_at": "2013-09-11T15:24:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9640#issuecomment-87786",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:7'></a>
The attached patch passes doctests on x86_64 GNU/Linux, except for two tests expecting a PARI warning (see above).



---

archive/issue_events_073143.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2013-09-11T15:25:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9640#event-73143"
}
```



---

archive/issue_events_073144.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2013-09-11T15:25:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9640#event-73144"
}
```



---

archive/issue_comments_087787.json:
```json
{
    "body": "<a id='comment:9'></a>\nIt would be better practice to move `_pari_init_err()`, `_pari_handle_exception()` and `_pari_err_recover()` from `pari_err.h` to a C file or to translate them to Cython.  At the moment I don't think it is worth the trouble.",
    "created_at": "2013-09-11T15:37:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9640#issuecomment-87787",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:9'></a>
It would be better practice to move `_pari_init_err()`, `_pari_handle_exception()` and `_pari_err_recover()` from `pari_err.h` to a C file or to translate them to Cython.  At the moment I don't think it is worth the trouble.



---

archive/issue_comments_087788.json:
```json
{
    "body": "**Changing author** from \"Jeroen Demeyer\" to \"Peter Bruin\".",
    "created_at": "2013-09-11T15:37:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9640#issuecomment-87788",
    "user": "https://github.com/pjbruin"
}
```

**Changing author** from "Jeroen Demeyer" to "Peter Bruin".



---

archive/issue_events_073145.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2013-09-12T19:42:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9640#event-73145"
}
```



---

archive/issue_events_073146.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2013-09-12T19:42:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9640#event-73146"
}
```



---

archive/issue_comments_087789.json:
```json
{
    "body": "**Changing work_issues** from \"see comment 6\" to \"\".",
    "created_at": "2013-09-12T19:42:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9640#issuecomment-87789",
    "user": "https://github.com/pjbruin"
}
```

**Changing work_issues** from "see comment 6" to "".



---

archive/issue_comments_087790.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -6,6 +6,11 @@\n PariError:  (15)\n ```\n \n-Using a mechanism similar to #9636, it should be possible to catch the full text of the exception and use it to throw `PariError`.  We should change to using `cb_pari_handle_exception()` instead of `err_catch()` to catch PARI exceptions.\n+This ticket does the following:\n \n-Dependencies: #10115, #9893, #9678\n+- Use `cb_pari_handle_exception()` instead of `err_catch()` to catch PARI exceptions.\n+\n+- Using a mechanism similar to #9636, catch the full text of the exception and pass it to `PariError`.  (It is not printed automatically, but can be accessed via `PariError.errtext()`.)\n+\n+Apply: [attachment:9640-pari_error_callbacks.patch]\n+\n``````\n",
    "created_at": "2013-09-12T19:42:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9640#issuecomment-87790",
    "user": "https://github.com/pjbruin"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -6,6 +6,11 @@
 PariError:  (15)
 ```
 
-Using a mechanism similar to #9636, it should be possible to catch the full text of the exception and use it to throw `PariError`.  We should change to using `cb_pari_handle_exception()` instead of `err_catch()` to catch PARI exceptions.
+This ticket does the following:
 
-Dependencies: #10115, #9893, #9678
+- Use `cb_pari_handle_exception()` instead of `err_catch()` to catch PARI exceptions.
+
+- Using a mechanism similar to #9636, catch the full text of the exception and pass it to `PariError`.  (It is not printed automatically, but can be accessed via `PariError.errtext()`.)
+
+Apply: [attachment:9640-pari_error_callbacks.patch]
+
``````




---

archive/issue_comments_087791.json:
```json
{
    "body": "<a id='comment:10'></a>\nThe latest patch does everything that I think it should do.  I hope it is reasonably self-explanatory.  A few remarks:\n\n- The error text is now passed to `PariError` and can be accessed using `PariError.errtext()`; is is not printed automatically.  Using this text to improve messages like `PariError:  (15)` will probably have to wait until another ticket.  (Edit: `user` errors are an exception, since they are converted into `RuntimeError`; here we append the error text to the currently used \"PARI user exception\".)\n\n- There is no problem with PARI sending escape sequences for colours in error messages; this is disabled by default.\n\n- The printing of a possible extra newline before the error message is easily avoided using `pari_set_last_newline(1)`.\n\n- The callback functions are now Cython functions in the new file `pari_error.pyx`.  It is important that this does *not* include `pari_err.pxi`; because of the way Cython imports functions, `pari_err.pxi` and `pari_err.h` use function pointers with the same names as the functions defined in `pari_error.pyx`.",
    "created_at": "2013-09-12T19:42:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9640#issuecomment-87791",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:10'></a>
The latest patch does everything that I think it should do.  I hope it is reasonably self-explanatory.  A few remarks:

- The error text is now passed to `PariError` and can be accessed using `PariError.errtext()`; is is not printed automatically.  Using this text to improve messages like `PariError:  (15)` will probably have to wait until another ticket.  (Edit: `user` errors are an exception, since they are converted into `RuntimeError`; here we append the error text to the currently used "PARI user exception".)

- There is no problem with PARI sending escape sequences for colours in error messages; this is disabled by default.

- The printing of a possible extra newline before the error message is easily avoided using `pari_set_last_newline(1)`.

- The callback functions are now Cython functions in the new file `pari_error.pyx`.  It is important that this does *not* include `pari_err.pxi`; because of the way Cython imports functions, `pari_err.pxi` and `pari_err.h` use function pointers with the same names as the functions defined in `pari_error.pyx`.



---

archive/issue_comments_087792.json:
```json
{
    "body": "<a id='comment:11'></a>\nPatchbot:\n\n```\napply 9640-pari_error_callbacks.patch\u200b\n```",
    "created_at": "2013-09-23T10:28:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9640#issuecomment-87792",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:11'></a>
Patchbot:

```
apply 9640-pari_error_callbacks.patchâ€‹
```



---

archive/issue_comments_087793.json:
```json
{
    "body": "<a id='comment:12'></a>\nWhy not set `cb_pari_handle_exception = _pari_handle_exception` globally and have `pari_catch_sig_on()` simply be **equal** to `sig_on()` (and then of course change `pari_catch_sig_on()` back to `sig_on()`).",
    "created_at": "2013-10-03T09:56:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9640#issuecomment-87793",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>
Why not set `cb_pari_handle_exception = _pari_handle_exception` globally and have `pari_catch_sig_on()` simply be **equal** to `sig_on()` (and then of course change `pari_catch_sig_on()` back to `sig_on()`).



---

archive/issue_comments_087794.json:
```json
{
    "body": "<a id='comment:13'></a>\nInstead of using `sage_siglongjmp()`, I think it's safer to call `abort()` and use the normal signal handling mechanism. Otherwise we have to consider race conditions like a `SIGINT` arriving during the `sage_siglongjmp()` call...",
    "created_at": "2013-10-03T10:05:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9640#issuecomment-87794",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'></a>
Instead of using `sage_siglongjmp()`, I think it's safer to call `abort()` and use the normal signal handling mechanism. Otherwise we have to consider race conditions like a `SIGINT` arriving during the `sage_siglongjmp()` call...



---

archive/issue_comments_087795.json:
```json
{
    "body": "<a id='comment:14'></a>\nReplying to [jdemeyer](#comment%3A12):\n> Why not set `cb_pari_handle_exception = _pari_handle_exception` globally and have `pari_catch_sig_on()` simply be **equal** to `sig_on()` (and then of course change `pari_catch_sig_on()` back to `sig_on()`).\n\nGood question.  That would mean we simply always have PARI exception handling enabled, which would be more efficient and should not make any difference since PARI shouldn't be called outside of `sig_on()/sig_off()` anyway.  I'll try it out.",
    "created_at": "2013-10-03T10:06:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9640#issuecomment-87795",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:14'></a>
Replying to [jdemeyer](#comment%3A12):
> Why not set `cb_pari_handle_exception = _pari_handle_exception` globally and have `pari_catch_sig_on()` simply be **equal** to `sig_on()` (and then of course change `pari_catch_sig_on()` back to `sig_on()`).

Good question.  That would mean we simply always have PARI exception handling enabled, which would be more efficient and should not make any difference since PARI shouldn't be called outside of `sig_on()/sig_off()` anyway.  I'll try it out.



---

archive/issue_comments_087796.json:
```json
{
    "body": "<a id='comment:15'></a>\nAnyway, I am thinking about a review patch so I will make these changes myself.\n\nPeter, is there any chance you could review #14029 and #13311 because those tickets also make changes to the interrupt code.",
    "created_at": "2013-10-03T10:08:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9640#issuecomment-87796",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:15'></a>
Anyway, I am thinking about a review patch so I will make these changes myself.

Peter, is there any chance you could review #14029 and #13311 because those tickets also make changes to the interrupt code.



---

archive/issue_comments_087797.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [jdemeyer](#comment%3A13):\n> Instead of using `sage_siglongjmp()`, I think it's safer to call `abort()` and use the normal signal handling mechanism. Otherwise we have to consider race conditions like a `SIGINT` arriving during the `sage_siglongjmp()` call...\n\nWhy `abort()` and not `raise(SIGUSR1)` or another signal code?",
    "created_at": "2013-10-03T10:08:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9640#issuecomment-87797",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:16'></a>
Replying to [jdemeyer](#comment%3A13):
> Instead of using `sage_siglongjmp()`, I think it's safer to call `abort()` and use the normal signal handling mechanism. Otherwise we have to consider race conditions like a `SIGINT` arriving during the `sage_siglongjmp()` call...

Why `abort()` and not `raise(SIGUSR1)` or another signal code?



---

archive/issue_comments_087798.json:
```json
{
    "body": "<a id='comment:17'></a>\nI am thinking about merging (parts of) #10018 here, especially the doctests.",
    "created_at": "2013-10-03T10:10:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9640#issuecomment-87798",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'></a>
I am thinking about merging (parts of) #10018 here, especially the doctests.



---

archive/issue_comments_087799.json:
```json
{
    "body": "<a id='comment:18'></a>\nReplying to [pbruin](#comment%3A16):\n> Replying to [jdemeyer](#comment%3A13):\n> > Instead of using `sage_siglongjmp()`, I think it's safer to call `abort()` and use the normal signal handling mechanism. Otherwise we have to consider race conditions like a `SIGINT` arriving during the `sage_siglongjmp()` call...\n\n> Why `abort()` and not `raise(SIGUSR1)` or another signal code?\nBecause we already handle `abort()` anyway and because I see no gain of adding an extra signal, with the risk that `SIGUSR1` is used by other Sage packages.",
    "created_at": "2013-10-03T10:11:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9640#issuecomment-87799",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:18'></a>
Replying to [pbruin](#comment%3A16):
> Replying to [jdemeyer](#comment%3A13):
> > Instead of using `sage_siglongjmp()`, I think it's safer to call `abort()` and use the normal signal handling mechanism. Otherwise we have to consider race conditions like a `SIGINT` arriving during the `sage_siglongjmp()` call...

> Why `abort()` and not `raise(SIGUSR1)` or another signal code?
Because we already handle `abort()` anyway and because I see no gain of adding an extra signal, with the risk that `SIGUSR1` is used by other Sage packages.



---

archive/issue_comments_087800.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [jdemeyer](#comment%3A18):\n> Replying to [pbruin](#comment%3A16):\n> > Why `abort()` and not `raise(SIGUSR1)` or another signal code?\n\n> Because we already handle `abort()` anyway and because I see no gain of adding an extra signal, with the risk that `SIGUSR1` is used by other Sage packages.\nBut we handle it by raising a new `RuntimeError`, among other things, unless I misunderstand `interrupt.c`.  So wouldn't the `SIGABRT` handler need to have a special case for the case where it is called in this way?  This would be rather inelegant.",
    "created_at": "2013-10-03T10:23:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9640#issuecomment-87800",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:19'></a>
Replying to [jdemeyer](#comment%3A18):
> Replying to [pbruin](#comment%3A16):
> > Why `abort()` and not `raise(SIGUSR1)` or another signal code?

> Because we already handle `abort()` anyway and because I see no gain of adding an extra signal, with the risk that `SIGUSR1` is used by other Sage packages.
But we handle it by raising a new `RuntimeError`, among other things, unless I misunderstand `interrupt.c`.  So wouldn't the `SIGABRT` handler need to have a special case for the case where it is called in this way?  This would be rather inelegant.



---

archive/issue_comments_087801.json:
```json
{
    "body": "<a id='comment:20'></a>\nReplying to [pbruin](#comment%3A19):\n> This would be rather inelegant.\n\nI personally don't find it inelegant. In any case, we would encapsalate this through some call like `sig_error()`.",
    "created_at": "2013-10-03T10:26:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9640#issuecomment-87801",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:20'></a>
Replying to [pbruin](#comment%3A19):
> This would be rather inelegant.

I personally don't find it inelegant. In any case, we would encapsalate this through some call like `sig_error()`.



---

archive/issue_comments_087802.json:
```json
{
    "body": "<a id='comment:21'></a>\nReplying to [jdemeyer](#comment%3A15):\n> Peter, is there any chance you could review #14029 and #13311 because those tickets also make changes to the interrupt code.\n\nNot very soon, unfortunately (lots of work at the moment), but I'll put my name in the CC list.",
    "created_at": "2013-10-03T20:22:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9640#issuecomment-87802",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:21'></a>
Replying to [jdemeyer](#comment%3A15):
> Peter, is there any chance you could review #14029 and #13311 because those tickets also make changes to the interrupt code.

Not very soon, unfortunately (lots of work at the moment), but I'll put my name in the CC list.



---

archive/issue_comments_087803.json:
```json
{
    "body": "**Dependencies:** #14029, #13311",
    "created_at": "2013-11-01T10:31:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9640#issuecomment-87803",
    "user": "https://github.com/jdemeyer"
}
```

**Dependencies:** #14029, #13311



---

archive/issue_events_073147.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-11-01T10:31:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9640#event-73147"
}
```



---

archive/issue_events_073148.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-11-01T10:31:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9640#event-73148"
}
```



---

archive/issue_comments_087804.json:
```json
{
    "body": "<a id='comment:23'></a>\nWorking/thinking about this...",
    "created_at": "2013-11-01T10:31:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9640#issuecomment-87804",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:23'></a>
Working/thinking about this...



---

archive/attachments_012345.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "9640-pari_error_callbacks.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket9640/9640-pari_error_callbacks.patch",
    "created_at": "2013-11-01T10:32:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/jdemeyer"
}
```



---

archive/issue_comments_087805.json:
```json
{
    "body": "based on 5.12.beta4 + #15124",
    "created_at": "2013-11-01T10:32:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9640#issuecomment-87805",
    "user": "https://github.com/jdemeyer"
}
```

based on 5.12.beta4 + #15124



---

archive/issue_comments_087806.json:
```json
{
    "body": "**Changing author** from \"Peter Bruin\" to \"Peter Bruin, Jeroen Demeyer\".",
    "created_at": "2013-11-01T21:43:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9640#issuecomment-87806",
    "user": "https://github.com/jdemeyer"
}
```

**Changing author** from "Peter Bruin" to "Peter Bruin, Jeroen Demeyer".



---

archive/issue_comments_087807.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -12,5 +12,5 @@\n \n - Using a mechanism similar to #9636, catch the full text of the exception and pass it to `PariError`.  (It is not printed automatically, but can be accessed via `PariError.errtext()`.)\n \n-Apply: [attachment:9640-pari_error_callbacks.patch]\n+Apply: [attachment:9640-pari_error_callbacks_v2.patch]\n \n``````\n",
    "created_at": "2013-11-01T21:43:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9640#issuecomment-87807",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -12,5 +12,5 @@
 
 - Using a mechanism similar to #9636, catch the full text of the exception and pass it to `PariError`.  (It is not printed automatically, but can be accessed via `PariError.errtext()`.)
 
-Apply: [attachment:9640-pari_error_callbacks.patch]
+Apply: [attachment:9640-pari_error_callbacks_v2.patch]
 
``````




---

archive/issue_comments_087808.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -10,7 +10,7 @@\n \n - Use `cb_pari_handle_exception()` instead of `err_catch()` to catch PARI exceptions.\n \n-- Using a mechanism similar to #9636, catch the full text of the exception and pass it to `PariError`.  (It is not printed automatically, but can be accessed via `PariError.errtext()`.)\n+- Using a mechanism similar to #9636, catch the full text of the exception and pass it to `PariError`.\n \n Apply: [attachment:9640-pari_error_callbacks_v2.patch]\n \n``````\n",
    "created_at": "2013-11-01T22:01:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9640#issuecomment-87808",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -10,7 +10,7 @@
 
 - Use `cb_pari_handle_exception()` instead of `err_catch()` to catch PARI exceptions.
 
-- Using a mechanism similar to #9636, catch the full text of the exception and pass it to `PariError`.  (It is not printed automatically, but can be accessed via `PariError.errtext()`.)
+- Using a mechanism similar to #9636, catch the full text of the exception and pass it to `PariError`.
 
 Apply: [attachment:9640-pari_error_callbacks_v2.patch]
 
``````




---

archive/issue_comments_087809.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -12,5 +12,7 @@\n \n - Using a mechanism similar to #9636, catch the full text of the exception and pass it to `PariError`.\n \n+- Introduce a new function `sig_error()` to callback to the interrupt/signal handling code to handle errors which aren't signals and use that for PARI.\n+\n Apply: [attachment:9640-pari_error_callbacks_v2.patch]\n \n``````\n",
    "created_at": "2013-11-01T22:35:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9640#issuecomment-87809",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -12,5 +12,7 @@
 
 - Using a mechanism similar to #9636, catch the full text of the exception and pass it to `PariError`.
 
+- Introduce a new function `sig_error()` to callback to the interrupt/signal handling code to handle errors which aren't signals and use that for PARI.
+
 Apply: [attachment:9640-pari_error_callbacks_v2.patch]
 
``````




---

archive/issue_events_073149.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-11-01T22:42:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9640#event-73149"
}
```



---

archive/issue_events_073150.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-11-01T22:42:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9640#event-73150"
}
```



---

archive/issue_comments_087810.json:
```json
{
    "body": "<a id='comment:28'></a>\nWhat is the use of `PariError.parimessage()`?  It doesn't seem to be used, and appears to normally be a substring of `PariError.__str__()`.  Do you have any application for it in mind, or can it be removed?",
    "created_at": "2013-11-02T18:14:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9640#issuecomment-87810",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:28'></a>
What is the use of `PariError.parimessage()`?  It doesn't seem to be used, and appears to normally be a substring of `PariError.__str__()`.  Do you have any application for it in mind, or can it be removed?



---

archive/issue_comments_087811.json:
```json
{
    "body": "<a id='comment:29'></a>\nReplying to [pbruin](#comment%3A28):\n> What is the use of `PariError.parimessage()`?  It doesn't seem to be used, and appears to normally be a substring of `PariError.__str__()`.  Do you have any application for it in mind, or can it be removed?\n\nFor me, it can be removed. But it existed before (as a function `__errmessage()`) and one possible use would be to check that an error is of a given type without relying on the PARI error codes (for example, in pure Python code). Something like:\n\n```python\ntry:\n    pari.....\nexcept PariError as E:\n    if E.parimessage() == \"division by zero\":\n        raise ZeroDivisionError\n    else:\n        raise\n```\nPerhaps this is never going to happen, but at least the method `parimessage()` doesn't hurt either.",
    "created_at": "2013-11-02T20:03:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9640#issuecomment-87811",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:29'></a>
Replying to [pbruin](#comment%3A28):
> What is the use of `PariError.parimessage()`?  It doesn't seem to be used, and appears to normally be a substring of `PariError.__str__()`.  Do you have any application for it in mind, or can it be removed?

For me, it can be removed. But it existed before (as a function `__errmessage()`) and one possible use would be to check that an error is of a given type without relying on the PARI error codes (for example, in pure Python code). Something like:

```python
try:
    pari.....
except PariError as E:
    if E.parimessage() == "division by zero":
        raise ZeroDivisionError
    else:
        raise
```
Perhaps this is never going to happen, but at least the method `parimessage()` doesn't hurt either.



---

archive/issue_comments_087812.json:
```json
{
    "body": "<a id='comment:30'></a>\nReplying to [jdemeyer](#comment%3A29):\n> Replying to [pbruin](#comment%3A28):\n> > What is the use of `PariError.parimessage()`?  It doesn't seem to be used, and appears to normally be a substring of `PariError.__str__()`.  Do you have any application for it in mind, or can it be removed?\n\n> For me, it can be removed. But it existed before (as a function `__errmessage()`) and one possible use would be to check that an error is of a given type without relying on the PARI error codes (for example, in pure Python code).\nThat is a possibility.  On the other hand, the global variable `errmessage` is another thing that has disappeared in PARI 2.6.  It has been replaced by a function `const char *numerr_name(long numerr)` which returns e.g. `\"e_INV\"` for zero division errors.  This means that in the near future your example will probably look like\n\n```python\nif pari.numerr_name(E.errnum()) == \"e_INV\":\n    raise ZeroDivisionError\n```\nOf course, one could then think of a method of `PariError` encapsulating this if necessary, but `parimessage` would no longer be an appropriate name.\n\nFor the time being (at least until we switch to PARI 2.6) or unless someone really wants a method like this, I think it is easiest to just remove it.",
    "created_at": "2013-11-03T00:46:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9640#issuecomment-87812",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:30'></a>
Replying to [jdemeyer](#comment%3A29):
> Replying to [pbruin](#comment%3A28):
> > What is the use of `PariError.parimessage()`?  It doesn't seem to be used, and appears to normally be a substring of `PariError.__str__()`.  Do you have any application for it in mind, or can it be removed?

> For me, it can be removed. But it existed before (as a function `__errmessage()`) and one possible use would be to check that an error is of a given type without relying on the PARI error codes (for example, in pure Python code).
That is a possibility.  On the other hand, the global variable `errmessage` is another thing that has disappeared in PARI 2.6.  It has been replaced by a function `const char *numerr_name(long numerr)` which returns e.g. `"e_INV"` for zero division errors.  This means that in the near future your example will probably look like

```python
if pari.numerr_name(E.errnum()) == "e_INV":
    raise ZeroDivisionError
```
Of course, one could then think of a method of `PariError` encapsulating this if necessary, but `parimessage` would no longer be an appropriate name.

For the time being (at least until we switch to PARI 2.6) or unless someone really wants a method like this, I think it is easiest to just remove it.



---

archive/attachments_012346.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "9640-pari_error_callbacks_v2.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket9640/9640-pari_error_callbacks_v2.patch",
    "created_at": "2013-11-03T08:11:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/jdemeyer"
}
```



---

archive/issue_comments_087813.json:
```json
{
    "body": "<a id='comment:31'></a>\nRemoved `PariError.parimessage()` method and moved the `cdef extern from \"misc.h\":` block to the top of `gen.pyx`.",
    "created_at": "2013-11-03T08:11:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9640#issuecomment-87813",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:31'></a>
Removed `PariError.parimessage()` method and moved the `cdef extern from "misc.h":` block to the top of `gen.pyx`.



---

archive/issue_comments_087814.json:
```json
{
    "body": "<a id='comment:32'></a>\nI'm happy with this now.  Hopefully someone wants to review it.",
    "created_at": "2013-11-04T12:08:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9640#issuecomment-87814",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:32'></a>
I'm happy with this now.  Hopefully someone wants to review it.



---

archive/issue_events_073151.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-11-04T12:44:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9640#event-73151"
}
```



---

archive/issue_events_073152.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-11-04T12:44:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9640#event-73152"
}
```



---

archive/issue_comments_087815.json:
```json
{
    "body": "**Reviewer:** Jeroen Demeyer, Peter Bruin",
    "created_at": "2013-11-04T12:44:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9640#issuecomment-87815",
    "user": "https://github.com/jdemeyer"
}
```

**Reviewer:** Jeroen Demeyer, Peter Bruin



---

archive/issue_comments_087816.json:
```json
{
    "body": "<a id='comment:34'></a>\nReplying to [pbruin](#comment%3A32):\n> I'm happy with this now.  Hopefully someone wants to review it.\n\nSince we both looked at eachother's work, I guess that counts as positive review.",
    "created_at": "2013-11-04T12:45:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9640#issuecomment-87816",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:34'></a>
Replying to [pbruin](#comment%3A32):
> I'm happy with this now.  Hopefully someone wants to review it.

Since we both looked at eachother's work, I guess that counts as positive review.



---

archive/issue_comments_087817.json:
```json
{
    "body": "**Merged:** sage-5.13.beta3",
    "created_at": "2013-11-06T12:48:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/9640#issuecomment-87817",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.13.beta3



---

archive/issue_events_073153.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-11-06T12:48:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9640#event-73153"
}
```



---

archive/issue_events_073154.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-11-06T12:48:56Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/9640",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/9640#event-73154"
}
```
