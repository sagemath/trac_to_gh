# Issue 19458: Remove duplicate code in cachefunc.pyx

archive/issues_019458.json:
```json
{
    "body": "There is a lot of duplicate code in the `CachedFunction` and `WeakCachedFunction` types. The version of `CachedFunction` uses `<dict>self.cache` typing, but the speed gain is so tiny that it doesn't justify the code duplication. In the light of future optimizations to `CachedFunction`, it is better to remove this duplicate code.\n\nIssue created by migration from https://trac.sagemath.org/ticket/19695\n\n",
    "created_at": "2015-12-12T14:53:36Z",
    "labels": [
        "component: misc"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.10",
    "title": "Remove duplicate code in cachefunc.pyx",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19458",
    "user": "https://github.com/jdemeyer"
}
```
There is a lot of duplicate code in the `CachedFunction` and `WeakCachedFunction` types. The version of `CachedFunction` uses `<dict>self.cache` typing, but the speed gain is so tiny that it doesn't justify the code duplication. In the light of future optimizations to `CachedFunction`, it is better to remove this duplicate code.

Issue created by migration from https://trac.sagemath.org/ticket/19695





---

archive/issue_comments_267166.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-12-12T14:55:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19458",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19458#issuecomment-267166",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_267167.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-12-12T14:55:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19458",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19458#issuecomment-267167",
    "user": "https://github.com/jdemeyer"
}
```

New commits:



---

archive/issue_comments_267168.json:
```json
{
    "body": "The description is not quite clear to me, so I am not sure what to look at in the code. What exactly were the purposes of two classes, which one should be gone, and should the class be gone eventually or just some methods?",
    "created_at": "2015-12-15T03:52:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19458",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19458#issuecomment-267168",
    "user": "https://github.com/novoselt"
}
```

The description is not quite clear to me, so I am not sure what to look at in the code. What exactly were the purposes of two classes, which one should be gone, and should the class be gone eventually or just some methods?



---

archive/issue_comments_267169.json:
```json
{
    "body": "Replying to [comment:3 novoselt]:\n> The description is not quite clear to me, so I am not sure what to look at in the code. What exactly were the purposes of two classes, which one should be gone, and should the class be gone eventually or just some methods?\n\nNo, the class should not be gone. The two classes are `CachedFunction` and `WeakCachedFunction` which are exactly the same except for the type of `self.cache`. The two classes are both useful.",
    "created_at": "2015-12-15T22:21:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19458",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19458#issuecomment-267169",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:3 novoselt]:
> The description is not quite clear to me, so I am not sure what to look at in the code. What exactly were the purposes of two classes, which one should be gone, and should the class be gone eventually or just some methods?

No, the class should not be gone. The two classes are `CachedFunction` and `WeakCachedFunction` which are exactly the same except for the type of `self.cache`. The two classes are both useful.



---

archive/issue_comments_267170.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-12-17T04:12:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19458",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19458#issuecomment-267170",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_267171.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-12-22T19:49:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19458",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19458#issuecomment-267171",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_054056.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-12-22T19:49:37Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19458",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19458#event-54056"
}
```
