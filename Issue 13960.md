# Issue 13960: Error in NumberField.composite_fields()

archive/issues_013960.json:
```json
{
    "body": "Assignee: davidloeffler\n\nCC:  wstein robertwb jdemeyer\n\nKeywords: number field\n\ncomposite fields fails for certain values:\n\n\n```\nsage: R.<x>=QQ[]\nsage: f=6*x^5+x^4+x^2+5*x+7\nsage: r=f.roots(QQbar,multiplicities=False)\nsage: F1=NumberField(f.monic(),'a',embedding=r[0])\nsage: F2=NumberField(f.monic(),'a',embedding=r[1])\nsage: F1.composite_fields(F2,both_maps=True)\n---------------------------------------------------------------------------\nPariError                                 Traceback (most recent call last)\n\n/home/mmarco/sage-5.7/<ipython console> in <module>()\n\n/usr/lib64/python2.7/site-packages/sage/rings/number_field/number_field.pyc in composite_fields(self, other, names, both_maps, preserve_embedding)\n   3788                 if subfields_have_embeddings:\n   3789                     embedding = other.coerce_embedding()(b) + k*self.coerce_embedding()(a)\n-> 3790                 F = NumberField(r, names[i], check=False, embedding=embedding)\n   3791                 i += 1\n   3792                 if both_maps:\n\n/usr/lib64/python2.7/site-packages/sage/rings/number_field/number_field.pyc in NumberField(polynomial, name, check, names, cache, embedding, latex_name, assume_disc_small, maximize_at_primes)\n    459     else:\n    460         K = NumberField_absolute(polynomial, name, latex_name, check, embedding,\n--> 461              assume_disc_small=assume_disc_small, maximize_at_primes=maximize_at_primes)\n    462 \n    463     if cache:\n\n/usr/lib64/python2.7/site-packages/sage/rings/number_field/number_field.pyc in __init__(self, polynomial, name, latex_name, check, embedding, assume_disc_small, maximize_at_primes)\n   5449         \"\"\"\n   5450         NumberField_generic.__init__(self, polynomial, name, latex_name, check, embedding,\n-> 5451                                      assume_disc_small=assume_disc_small, maximize_at_primes=maximize_at_primes)\n   5452         self._element_class = number_field_element.NumberFieldElement_absolute\n   5453         self._zero_element = self(0)\n\n/usr/lib64/python2.7/site-packages/sage/rings/number_field/number_field.pyc in __init__(self, polynomial, name, latex_name, check, embedding, category, assume_disc_small, maximize_at_primes)\n   1022         self.__pari_bnf_certified = False\n   1023         self._integral_basis_dict = {}\n-> 1024         embedding = number_field_morphisms.create_embedding_from_approx(self, embedding)\n   1025         self._populate_coercion_lists_(embedding=embedding)\n   1026                                                                                                                    \n\n/usr/lib64/python2.7/site-packages/sage/rings/number_field/number_field_morphisms.so in sage.rings.number_field.number_field_morphisms.create_embedding_from_approx (sage/rings/number_field/number_field_morphisms.c:5021)()\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in __ne__(self, other)\n   3803             True\n   3804         \"\"\"\n-> 3805         return not self.__eq__(other)\n   3806 \n   3807     def __nonzero__(self):\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in __eq__(self, other)\n   3778             try:\n   3779                 self, other = canonical_coercion(self, other)\n-> 3780                 return self == other\n   3781             except TypeError:\n   3782                 return False\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in __eq__(self, other)\n   3783         if self is other: return True\n   3784         if other._descr.is_rational() and other._descr.rational_value() == 0:\n-> 3785             return not self.__nonzero__()\n   3786         if self._descr.is_rational() and self._descr.rational_value() == 0:\n   3787             return not other.__nonzero__()\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in __nonzero__(self)\n   3829         if self._value.prec() < 128:\n   3830             self._more_precision()\n-> 3831             return self.__nonzero__()\n   3832 \n   3833         # Sigh...\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in __nonzero__(self)\n   3832 \n   3833         # Sigh...\n-> 3834         self.exactify()\n   3835         return self.__nonzero__()\n   3836 \n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   3464         od = self._descr\n   3465         if od.is_exact(): return\n-> 3466         self._set_descr(self._descr.exactify())\n   3467 \n   3468     def _set_descr(self, new_descr):\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   7589             left = self._left\n   7590             right = self._right\n-> 7591             left.exactify()\n   7592             right.exactify()\n   7593             gen = left._exact_field().union(right._exact_field())\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   3464         od = self._descr\n   3465         if od.is_exact(): return\n-> 3466         self._set_descr(self._descr.exactify())\n   3467 \n   3468     def _set_descr(self, new_descr):\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   7589             left = self._left\n   7590             right = self._right\n-> 7591             left.exactify()\n   7592             right.exactify()\n   7593             gen = left._exact_field().union(right._exact_field())\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   3464         od = self._descr\n   3465         if od.is_exact(): return\n-> 3466         self._set_descr(self._descr.exactify())\n   3467 \n   3468     def _set_descr(self, new_descr):\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   7589             left = self._left\n   7590             right = self._right\n-> 7591             left.exactify()\n   7592             right.exactify()\n   7593             gen = left._exact_field().union(right._exact_field())\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   3464         od = self._descr\n   3465         if od.is_exact(): return\n-> 3466         self._set_descr(self._descr.exactify())\n   3467 \n   3468     def _set_descr(self, new_descr):\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   7589             left = self._left\n   7590             right = self._right\n-> 7591             left.exactify()\n   7592             right.exactify()\n   7593             gen = left._exact_field().union(right._exact_field())\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   3464         od = self._descr\n   3465         if od.is_exact(): return\n-> 3466         self._set_descr(self._descr.exactify())\n   3467 \n   3468     def _set_descr(self, new_descr):\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   7589             left = self._left\n   7590             right = self._right\n-> 7591             left.exactify()\n   7592             right.exactify()\n   7593             gen = left._exact_field().union(right._exact_field())\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   3464         od = self._descr\n   3465         if od.is_exact(): return\n-> 3466         self._set_descr(self._descr.exactify())\n   3467 \n   3468     def _set_descr(self, new_descr):\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   7589             left = self._left\n   7590             right = self._right\n-> 7591             left.exactify()\n   7592             right.exactify()\n   7593             gen = left._exact_field().union(right._exact_field())\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   3464         od = self._descr\n   3465         if od.is_exact(): return\n-> 3466         self._set_descr(self._descr.exactify())\n   3467 \n   3468     def _set_descr(self, new_descr):\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   7589             left = self._left\n   7590             right = self._right\n-> 7591             left.exactify()\n   7592             right.exactify()\n   7593             gen = left._exact_field().union(right._exact_field())\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   3464         od = self._descr\n   3465         if od.is_exact(): return\n-> 3466         self._set_descr(self._descr.exactify())\n   3467 \n   3468     def _set_descr(self, new_descr):\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   7589             left = self._left\n   7590             right = self._right\n-> 7591             left.exactify()\n   7592             right.exactify()\n   7593             gen = left._exact_field().union(right._exact_field())\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   3464         od = self._descr\n   3465         if od.is_exact(): return\n-> 3466         self._set_descr(self._descr.exactify())\n   3467 \n   3468     def _set_descr(self, new_descr):\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   7589             left = self._left\n   7590             right = self._right\n-> 7591             left.exactify()\n   7592             right.exactify()\n   7593             gen = left._exact_field().union(right._exact_field())\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   3464         od = self._descr\n   3465         if od.is_exact(): return\n-> 3466         self._set_descr(self._descr.exactify())\n   3467 \n   3468     def _set_descr(self, new_descr):\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   7589             left = self._left\n   7590             right = self._right\n-> 7591             left.exactify()\n   7592             right.exactify()\n   7593             gen = left._exact_field().union(right._exact_field())\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   3464         od = self._descr\n   3465         if od.is_exact(): return\n-> 3466         self._set_descr(self._descr.exactify())\n   3467 \n   3468     def _set_descr(self, new_descr):\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   7589             left = self._left\n   7590             right = self._right\n-> 7591             left.exactify()\n   7592             right.exactify()\n   7593             gen = left._exact_field().union(right._exact_field())\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   3464         od = self._descr\n   3465         if od.is_exact(): return\n-> 3466         self._set_descr(self._descr.exactify())\n   3467 \n   3468     def _set_descr(self, new_descr):\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   7589             left = self._left\n   7590             right = self._right\n-> 7591             left.exactify()\n   7592             right.exactify()\n   7593             gen = left._exact_field().union(right._exact_field())\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   3464         od = self._descr\n   3465         if od.is_exact(): return\n-> 3466         self._set_descr(self._descr.exactify())\n   3467 \n   3468     def _set_descr(self, new_descr):\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   7589             left = self._left\n   7590             right = self._right\n-> 7591             left.exactify()\n   7592             right.exactify()\n   7593             gen = left._exact_field().union(right._exact_field())\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   3464         od = self._descr\n   3465         if od.is_exact(): return\n-> 3466         self._set_descr(self._descr.exactify())\n   3467 \n   3468     def _set_descr(self, new_descr):\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   7589             left = self._left\n   7590             right = self._right\n-> 7591             left.exactify()\n   7592             right.exactify()\n   7593             gen = left._exact_field().union(right._exact_field())\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   3464         od = self._descr\n   3465         if od.is_exact(): return\n-> 3466         self._set_descr(self._descr.exactify())\n   3467 \n   3468     def _set_descr(self, new_descr):\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   7589             left = self._left\n   7590             right = self._right\n-> 7591             left.exactify()\n   7592             right.exactify()\n   7593             gen = left._exact_field().union(right._exact_field())\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   3464         od = self._descr\n   3465         if od.is_exact(): return\n-> 3466         self._set_descr(self._descr.exactify())\n   3467 \n   3468     def _set_descr(self, new_descr):\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   7589             left = self._left\n   7590             right = self._right\n-> 7591             left.exactify()\n   7592             right.exactify()\n   7593             gen = left._exact_field().union(right._exact_field())\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   3464         od = self._descr\n   3465         if od.is_exact(): return\n-> 3466         self._set_descr(self._descr.exactify())\n   3467 \n   3468     def _set_descr(self, new_descr):\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   7589             left = self._left\n   7590             right = self._right\n-> 7591             left.exactify()\n   7592             right.exactify()\n   7593             gen = left._exact_field().union(right._exact_field())\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   3464         od = self._descr\n   3465         if od.is_exact(): return\n-> 3466         self._set_descr(self._descr.exactify())\n   3467 \n   3468     def _set_descr(self, new_descr):\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   7589             left = self._left\n   7590             right = self._right\n-> 7591             left.exactify()\n   7592             right.exactify()\n   7593             gen = left._exact_field().union(right._exact_field())\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   3464         od = self._descr\n   3465         if od.is_exact(): return\n-> 3466         self._set_descr(self._descr.exactify())\n   3467 \n   3468     def _set_descr(self, new_descr):\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   7589             left = self._left\n   7590             right = self._right\n-> 7591             left.exactify()\n   7592             right.exactify()\n   7593             gen = left._exact_field().union(right._exact_field())\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   3464         od = self._descr\n   3465         if od.is_exact(): return\n-> 3466         self._set_descr(self._descr.exactify())\n   3467 \n   3468     def _set_descr(self, new_descr):\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   7589             left = self._left\n   7590             right = self._right\n-> 7591             left.exactify()\n   7592             right.exactify()\n   7593             gen = left._exact_field().union(right._exact_field())\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   3464         od = self._descr\n   3465         if od.is_exact(): return\n-> 3466         self._set_descr(self._descr.exactify())\n   3467 \n   3468     def _set_descr(self, new_descr):\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   7589             left = self._left\n   7590             right = self._right\n-> 7591             left.exactify()\n   7592             right.exactify()\n   7593             gen = left._exact_field().union(right._exact_field())\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   3464         od = self._descr\n   3465         if od.is_exact(): return\n-> 3466         self._set_descr(self._descr.exactify())\n   3467 \n   3468     def _set_descr(self, new_descr):\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   7589             left = self._left\n   7590             right = self._right\n-> 7591             left.exactify()\n   7592             right.exactify()\n   7593             gen = left._exact_field().union(right._exact_field())\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   3464         od = self._descr\n   3465         if od.is_exact(): return\n-> 3466         self._set_descr(self._descr.exactify())\n   3467 \n   3468     def _set_descr(self, new_descr):\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   7589             left = self._left\n   7590             right = self._right\n-> 7591             left.exactify()\n   7592             right.exactify()\n   7593             gen = left._exact_field().union(right._exact_field())\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   3464         od = self._descr\n   3465         if od.is_exact(): return\n-> 3466         self._set_descr(self._descr.exactify())\n   3467 \n   3468     def _set_descr(self, new_descr):\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   7589             left = self._left\n   7590             right = self._right\n-> 7591             left.exactify()\n   7592             right.exactify()\n   7593             gen = left._exact_field().union(right._exact_field())\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   3464         od = self._descr\n   3465         if od.is_exact(): return\n-> 3466         self._set_descr(self._descr.exactify())\n   3467 \n   3468     def _set_descr(self, new_descr):\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   7589             left = self._left\n   7590             right = self._right\n-> 7591             left.exactify()\n   7592             right.exactify()\n   7593             gen = left._exact_field().union(right._exact_field())\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   3464         od = self._descr\n   3465         if od.is_exact(): return\n-> 3466         self._set_descr(self._descr.exactify())\n   3467 \n   3468     def _set_descr(self, new_descr):\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   7589             left = self._left\n   7590             right = self._right\n-> 7591             left.exactify()\n   7592             right.exactify()\n   7593             gen = left._exact_field().union(right._exact_field())\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   3464         od = self._descr\n   3465         if od.is_exact(): return\n-> 3466         self._set_descr(self._descr.exactify())\n   3467 \n   3468     def _set_descr(self, new_descr):\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   7589             left = self._left\n   7590             right = self._right\n-> 7591             left.exactify()\n   7592             right.exactify()\n   7593             gen = left._exact_field().union(right._exact_field())\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   3464         od = self._descr\n   3465         if od.is_exact(): return\n-> 3466         self._set_descr(self._descr.exactify())\n   3467 \n   3468     def _set_descr(self, new_descr):\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   7589             left = self._left\n   7590             right = self._right\n-> 7591             left.exactify()\n   7592             right.exactify()\n   7593             gen = left._exact_field().union(right._exact_field())\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   3464         od = self._descr\n   3465         if od.is_exact(): return\n-> 3466         self._set_descr(self._descr.exactify())\n   3467 \n   3468     def _set_descr(self, new_descr):\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   7589             left = self._left\n   7590             right = self._right\n-> 7591             left.exactify()\n   7592             right.exactify()\n   7593             gen = left._exact_field().union(right._exact_field())\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   3464         od = self._descr\n   3465         if od.is_exact(): return\n-> 3466         self._set_descr(self._descr.exactify())\n   3467 \n   3468     def _set_descr(self, new_descr):\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   7589             left = self._left\n   7590             right = self._right\n-> 7591             left.exactify()\n   7592             right.exactify()\n   7593             gen = left._exact_field().union(right._exact_field())\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   3464         od = self._descr\n   3465         if od.is_exact(): return\n-> 3466         self._set_descr(self._descr.exactify())\n   3467 \n   3468     def _set_descr(self, new_descr):\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   7589             left = self._left\n   7590             right = self._right\n-> 7591             left.exactify()\n   7592             right.exactify()\n   7593             gen = left._exact_field().union(right._exact_field())\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   3464         od = self._descr\n   3465         if od.is_exact(): return\n-> 3466         self._set_descr(self._descr.exactify())\n   3467 \n   3468     def _set_descr(self, new_descr):\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   7589             left = self._left\n   7590             right = self._right\n-> 7591             left.exactify()\n   7592             right.exactify()\n   7593             gen = left._exact_field().union(right._exact_field())\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   3464         od = self._descr\n   3465         if od.is_exact(): return\n-> 3466         self._set_descr(self._descr.exactify())\n   3467 \n   3468     def _set_descr(self, new_descr):\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   7589             left = self._left\n   7590             right = self._right\n-> 7591             left.exactify()\n   7592             right.exactify()\n   7593             gen = left._exact_field().union(right._exact_field())\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   3464         od = self._descr\n   3465         if od.is_exact(): return\n-> 3466         self._set_descr(self._descr.exactify())\n   3467 \n   3468     def _set_descr(self, new_descr):\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   7589             left = self._left\n   7590             right = self._right\n-> 7591             left.exactify()\n   7592             right.exactify()\n   7593             gen = left._exact_field().union(right._exact_field())\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   3464         od = self._descr\n   3465         if od.is_exact(): return\n-> 3466         self._set_descr(self._descr.exactify())\n   3467 \n   3468     def _set_descr(self, new_descr):\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   7589             left = self._left\n   7590             right = self._right\n-> 7591             left.exactify()\n   7592             right.exactify()\n   7593             gen = left._exact_field().union(right._exact_field())\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   3464         od = self._descr\n   3465         if od.is_exact(): return\n-> 3466         self._set_descr(self._descr.exactify())\n   3467 \n   3468     def _set_descr(self, new_descr):\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   7589             left = self._left\n   7590             right = self._right\n-> 7591             left.exactify()\n   7592             right.exactify()\n   7593             gen = left._exact_field().union(right._exact_field())\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   3464         od = self._descr\n   3465         if od.is_exact(): return\n-> 3466         self._set_descr(self._descr.exactify())\n   3467 \n   3468     def _set_descr(self, new_descr):\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   7589             left = self._left\n   7590             right = self._right\n-> 7591             left.exactify()\n   7592             right.exactify()\n   7593             gen = left._exact_field().union(right._exact_field())\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   3464         od = self._descr\n   3465         if od.is_exact(): return\n-> 3466         self._set_descr(self._descr.exactify())\n   3467 \n   3468     def _set_descr(self, new_descr):\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   7589             left = self._left\n   7590             right = self._right\n-> 7591             left.exactify()\n   7592             right.exactify()\n   7593             gen = left._exact_field().union(right._exact_field())\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   3464         od = self._descr\n   3465         if od.is_exact(): return\n-> 3466         self._set_descr(self._descr.exactify())\n   3467 \n   3468     def _set_descr(self, new_descr):\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   7589             left = self._left\n   7590             right = self._right\n-> 7591             left.exactify()\n   7592             right.exactify()\n   7593             gen = left._exact_field().union(right._exact_field())\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   3464         od = self._descr\n   3465         if od.is_exact(): return\n-> 3466         self._set_descr(self._descr.exactify())\n   3467 \n   3468     def _set_descr(self, new_descr):\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   7590             right = self._right\n   7591             left.exactify()\n-> 7592             right.exactify()\n   7593             gen = left._exact_field().union(right._exact_field())\n   7594             left_value = gen(left._exact_value())\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   3464         od = self._descr\n   3465         if od.is_exact(): return\n-> 3466         self._set_descr(self._descr.exactify())\n   3467 \n   3468     def _set_descr(self, new_descr):\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)\n   7591             left.exactify()\n   7592             right.exactify()\n-> 7593             gen = left._exact_field().union(right._exact_field())\n   7594             left_value = gen(left._exact_value())\n   7595             right_value = gen(right._exact_value())\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in union(self, other)\n   2280         newpol_sage_y = QQy(newpol_sage)\n   2281 \n-> 2282         red_elt, red_back, red_pol = do_polred(newpol_sage_y)\n   2283 \n   2284         red_back_x = QQx(red_back)\n\n/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in do_polred(poly)\n   1561     assert(best is not None)\n   1562     parent = poly.parent()\n-> 1563     rev = parent(best_elt.Mod(pari_poly).modreverse().lift())\n   1564     return parent(best_elt), rev, parent(best)\n   1565 \n\n/usr/lib64/python2.7/site-packages/sage/libs/pari/gen.so in sage.libs.pari.gen._pari_trap (sage/libs/pari/gen.c:55006)()\n\nPariError:  (5)\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/14164\n\n",
    "created_at": "2013-02-22T12:36:42Z",
    "labels": [
        "number fields",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.9",
    "title": "Error in NumberField.composite_fields()",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13960",
    "user": "mmarco"
}
```
Assignee: davidloeffler

CC:  wstein robertwb jdemeyer

Keywords: number field

composite fields fails for certain values:


```
sage: R.<x>=QQ[]
sage: f=6*x^5+x^4+x^2+5*x+7
sage: r=f.roots(QQbar,multiplicities=False)
sage: F1=NumberField(f.monic(),'a',embedding=r[0])
sage: F2=NumberField(f.monic(),'a',embedding=r[1])
sage: F1.composite_fields(F2,both_maps=True)
---------------------------------------------------------------------------
PariError                                 Traceback (most recent call last)

/home/mmarco/sage-5.7/<ipython console> in <module>()

/usr/lib64/python2.7/site-packages/sage/rings/number_field/number_field.pyc in composite_fields(self, other, names, both_maps, preserve_embedding)
   3788                 if subfields_have_embeddings:
   3789                     embedding = other.coerce_embedding()(b) + k*self.coerce_embedding()(a)
-> 3790                 F = NumberField(r, names[i], check=False, embedding=embedding)
   3791                 i += 1
   3792                 if both_maps:

/usr/lib64/python2.7/site-packages/sage/rings/number_field/number_field.pyc in NumberField(polynomial, name, check, names, cache, embedding, latex_name, assume_disc_small, maximize_at_primes)
    459     else:
    460         K = NumberField_absolute(polynomial, name, latex_name, check, embedding,
--> 461              assume_disc_small=assume_disc_small, maximize_at_primes=maximize_at_primes)
    462 
    463     if cache:

/usr/lib64/python2.7/site-packages/sage/rings/number_field/number_field.pyc in __init__(self, polynomial, name, latex_name, check, embedding, assume_disc_small, maximize_at_primes)
   5449         """
   5450         NumberField_generic.__init__(self, polynomial, name, latex_name, check, embedding,
-> 5451                                      assume_disc_small=assume_disc_small, maximize_at_primes=maximize_at_primes)
   5452         self._element_class = number_field_element.NumberFieldElement_absolute
   5453         self._zero_element = self(0)

/usr/lib64/python2.7/site-packages/sage/rings/number_field/number_field.pyc in __init__(self, polynomial, name, latex_name, check, embedding, category, assume_disc_small, maximize_at_primes)
   1022         self.__pari_bnf_certified = False
   1023         self._integral_basis_dict = {}
-> 1024         embedding = number_field_morphisms.create_embedding_from_approx(self, embedding)
   1025         self._populate_coercion_lists_(embedding=embedding)
   1026                                                                                                                    

/usr/lib64/python2.7/site-packages/sage/rings/number_field/number_field_morphisms.so in sage.rings.number_field.number_field_morphisms.create_embedding_from_approx (sage/rings/number_field/number_field_morphisms.c:5021)()

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in __ne__(self, other)
   3803             True
   3804         """
-> 3805         return not self.__eq__(other)
   3806 
   3807     def __nonzero__(self):

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in __eq__(self, other)
   3778             try:
   3779                 self, other = canonical_coercion(self, other)
-> 3780                 return self == other
   3781             except TypeError:
   3782                 return False

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in __eq__(self, other)
   3783         if self is other: return True
   3784         if other._descr.is_rational() and other._descr.rational_value() == 0:
-> 3785             return not self.__nonzero__()
   3786         if self._descr.is_rational() and self._descr.rational_value() == 0:
   3787             return not other.__nonzero__()

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in __nonzero__(self)
   3829         if self._value.prec() < 128:
   3830             self._more_precision()
-> 3831             return self.__nonzero__()
   3832 
   3833         # Sigh...

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in __nonzero__(self)
   3832 
   3833         # Sigh...
-> 3834         self.exactify()
   3835         return self.__nonzero__()
   3836 

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   3464         od = self._descr
   3465         if od.is_exact(): return
-> 3466         self._set_descr(self._descr.exactify())
   3467 
   3468     def _set_descr(self, new_descr):

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   7589             left = self._left
   7590             right = self._right
-> 7591             left.exactify()
   7592             right.exactify()
   7593             gen = left._exact_field().union(right._exact_field())

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   3464         od = self._descr
   3465         if od.is_exact(): return
-> 3466         self._set_descr(self._descr.exactify())
   3467 
   3468     def _set_descr(self, new_descr):

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   7589             left = self._left
   7590             right = self._right
-> 7591             left.exactify()
   7592             right.exactify()
   7593             gen = left._exact_field().union(right._exact_field())

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   3464         od = self._descr
   3465         if od.is_exact(): return
-> 3466         self._set_descr(self._descr.exactify())
   3467 
   3468     def _set_descr(self, new_descr):

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   7589             left = self._left
   7590             right = self._right
-> 7591             left.exactify()
   7592             right.exactify()
   7593             gen = left._exact_field().union(right._exact_field())

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   3464         od = self._descr
   3465         if od.is_exact(): return
-> 3466         self._set_descr(self._descr.exactify())
   3467 
   3468     def _set_descr(self, new_descr):

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   7589             left = self._left
   7590             right = self._right
-> 7591             left.exactify()
   7592             right.exactify()
   7593             gen = left._exact_field().union(right._exact_field())

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   3464         od = self._descr
   3465         if od.is_exact(): return
-> 3466         self._set_descr(self._descr.exactify())
   3467 
   3468     def _set_descr(self, new_descr):

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   7589             left = self._left
   7590             right = self._right
-> 7591             left.exactify()
   7592             right.exactify()
   7593             gen = left._exact_field().union(right._exact_field())

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   3464         od = self._descr
   3465         if od.is_exact(): return
-> 3466         self._set_descr(self._descr.exactify())
   3467 
   3468     def _set_descr(self, new_descr):

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   7589             left = self._left
   7590             right = self._right
-> 7591             left.exactify()
   7592             right.exactify()
   7593             gen = left._exact_field().union(right._exact_field())

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   3464         od = self._descr
   3465         if od.is_exact(): return
-> 3466         self._set_descr(self._descr.exactify())
   3467 
   3468     def _set_descr(self, new_descr):

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   7589             left = self._left
   7590             right = self._right
-> 7591             left.exactify()
   7592             right.exactify()
   7593             gen = left._exact_field().union(right._exact_field())

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   3464         od = self._descr
   3465         if od.is_exact(): return
-> 3466         self._set_descr(self._descr.exactify())
   3467 
   3468     def _set_descr(self, new_descr):

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   7589             left = self._left
   7590             right = self._right
-> 7591             left.exactify()
   7592             right.exactify()
   7593             gen = left._exact_field().union(right._exact_field())

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   3464         od = self._descr
   3465         if od.is_exact(): return
-> 3466         self._set_descr(self._descr.exactify())
   3467 
   3468     def _set_descr(self, new_descr):

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   7589             left = self._left
   7590             right = self._right
-> 7591             left.exactify()
   7592             right.exactify()
   7593             gen = left._exact_field().union(right._exact_field())

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   3464         od = self._descr
   3465         if od.is_exact(): return
-> 3466         self._set_descr(self._descr.exactify())
   3467 
   3468     def _set_descr(self, new_descr):

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   7589             left = self._left
   7590             right = self._right
-> 7591             left.exactify()
   7592             right.exactify()
   7593             gen = left._exact_field().union(right._exact_field())

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   3464         od = self._descr
   3465         if od.is_exact(): return
-> 3466         self._set_descr(self._descr.exactify())
   3467 
   3468     def _set_descr(self, new_descr):

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   7589             left = self._left
   7590             right = self._right
-> 7591             left.exactify()
   7592             right.exactify()
   7593             gen = left._exact_field().union(right._exact_field())

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   3464         od = self._descr
   3465         if od.is_exact(): return
-> 3466         self._set_descr(self._descr.exactify())
   3467 
   3468     def _set_descr(self, new_descr):

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   7589             left = self._left
   7590             right = self._right
-> 7591             left.exactify()
   7592             right.exactify()
   7593             gen = left._exact_field().union(right._exact_field())

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   3464         od = self._descr
   3465         if od.is_exact(): return
-> 3466         self._set_descr(self._descr.exactify())
   3467 
   3468     def _set_descr(self, new_descr):

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   7589             left = self._left
   7590             right = self._right
-> 7591             left.exactify()
   7592             right.exactify()
   7593             gen = left._exact_field().union(right._exact_field())

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   3464         od = self._descr
   3465         if od.is_exact(): return
-> 3466         self._set_descr(self._descr.exactify())
   3467 
   3468     def _set_descr(self, new_descr):

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   7589             left = self._left
   7590             right = self._right
-> 7591             left.exactify()
   7592             right.exactify()
   7593             gen = left._exact_field().union(right._exact_field())

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   3464         od = self._descr
   3465         if od.is_exact(): return
-> 3466         self._set_descr(self._descr.exactify())
   3467 
   3468     def _set_descr(self, new_descr):

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   7589             left = self._left
   7590             right = self._right
-> 7591             left.exactify()
   7592             right.exactify()
   7593             gen = left._exact_field().union(right._exact_field())

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   3464         od = self._descr
   3465         if od.is_exact(): return
-> 3466         self._set_descr(self._descr.exactify())
   3467 
   3468     def _set_descr(self, new_descr):

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   7589             left = self._left
   7590             right = self._right
-> 7591             left.exactify()
   7592             right.exactify()
   7593             gen = left._exact_field().union(right._exact_field())

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   3464         od = self._descr
   3465         if od.is_exact(): return
-> 3466         self._set_descr(self._descr.exactify())
   3467 
   3468     def _set_descr(self, new_descr):

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   7589             left = self._left
   7590             right = self._right
-> 7591             left.exactify()
   7592             right.exactify()
   7593             gen = left._exact_field().union(right._exact_field())

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   3464         od = self._descr
   3465         if od.is_exact(): return
-> 3466         self._set_descr(self._descr.exactify())
   3467 
   3468     def _set_descr(self, new_descr):

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   7589             left = self._left
   7590             right = self._right
-> 7591             left.exactify()
   7592             right.exactify()
   7593             gen = left._exact_field().union(right._exact_field())

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   3464         od = self._descr
   3465         if od.is_exact(): return
-> 3466         self._set_descr(self._descr.exactify())
   3467 
   3468     def _set_descr(self, new_descr):

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   7589             left = self._left
   7590             right = self._right
-> 7591             left.exactify()
   7592             right.exactify()
   7593             gen = left._exact_field().union(right._exact_field())

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   3464         od = self._descr
   3465         if od.is_exact(): return
-> 3466         self._set_descr(self._descr.exactify())
   3467 
   3468     def _set_descr(self, new_descr):

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   7589             left = self._left
   7590             right = self._right
-> 7591             left.exactify()
   7592             right.exactify()
   7593             gen = left._exact_field().union(right._exact_field())

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   3464         od = self._descr
   3465         if od.is_exact(): return
-> 3466         self._set_descr(self._descr.exactify())
   3467 
   3468     def _set_descr(self, new_descr):

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   7589             left = self._left
   7590             right = self._right
-> 7591             left.exactify()
   7592             right.exactify()
   7593             gen = left._exact_field().union(right._exact_field())

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   3464         od = self._descr
   3465         if od.is_exact(): return
-> 3466         self._set_descr(self._descr.exactify())
   3467 
   3468     def _set_descr(self, new_descr):

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   7589             left = self._left
   7590             right = self._right
-> 7591             left.exactify()
   7592             right.exactify()
   7593             gen = left._exact_field().union(right._exact_field())

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   3464         od = self._descr
   3465         if od.is_exact(): return
-> 3466         self._set_descr(self._descr.exactify())
   3467 
   3468     def _set_descr(self, new_descr):

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   7589             left = self._left
   7590             right = self._right
-> 7591             left.exactify()
   7592             right.exactify()
   7593             gen = left._exact_field().union(right._exact_field())

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   3464         od = self._descr
   3465         if od.is_exact(): return
-> 3466         self._set_descr(self._descr.exactify())
   3467 
   3468     def _set_descr(self, new_descr):

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   7589             left = self._left
   7590             right = self._right
-> 7591             left.exactify()
   7592             right.exactify()
   7593             gen = left._exact_field().union(right._exact_field())

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   3464         od = self._descr
   3465         if od.is_exact(): return
-> 3466         self._set_descr(self._descr.exactify())
   3467 
   3468     def _set_descr(self, new_descr):

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   7589             left = self._left
   7590             right = self._right
-> 7591             left.exactify()
   7592             right.exactify()
   7593             gen = left._exact_field().union(right._exact_field())

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   3464         od = self._descr
   3465         if od.is_exact(): return
-> 3466         self._set_descr(self._descr.exactify())
   3467 
   3468     def _set_descr(self, new_descr):

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   7589             left = self._left
   7590             right = self._right
-> 7591             left.exactify()
   7592             right.exactify()
   7593             gen = left._exact_field().union(right._exact_field())

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   3464         od = self._descr
   3465         if od.is_exact(): return
-> 3466         self._set_descr(self._descr.exactify())
   3467 
   3468     def _set_descr(self, new_descr):

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   7589             left = self._left
   7590             right = self._right
-> 7591             left.exactify()
   7592             right.exactify()
   7593             gen = left._exact_field().union(right._exact_field())

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   3464         od = self._descr
   3465         if od.is_exact(): return
-> 3466         self._set_descr(self._descr.exactify())
   3467 
   3468     def _set_descr(self, new_descr):

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   7589             left = self._left
   7590             right = self._right
-> 7591             left.exactify()
   7592             right.exactify()
   7593             gen = left._exact_field().union(right._exact_field())

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   3464         od = self._descr
   3465         if od.is_exact(): return
-> 3466         self._set_descr(self._descr.exactify())
   3467 
   3468     def _set_descr(self, new_descr):

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   7589             left = self._left
   7590             right = self._right
-> 7591             left.exactify()
   7592             right.exactify()
   7593             gen = left._exact_field().union(right._exact_field())

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   3464         od = self._descr
   3465         if od.is_exact(): return
-> 3466         self._set_descr(self._descr.exactify())
   3467 
   3468     def _set_descr(self, new_descr):

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   7589             left = self._left
   7590             right = self._right
-> 7591             left.exactify()
   7592             right.exactify()
   7593             gen = left._exact_field().union(right._exact_field())

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   3464         od = self._descr
   3465         if od.is_exact(): return
-> 3466         self._set_descr(self._descr.exactify())
   3467 
   3468     def _set_descr(self, new_descr):

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   7589             left = self._left
   7590             right = self._right
-> 7591             left.exactify()
   7592             right.exactify()
   7593             gen = left._exact_field().union(right._exact_field())

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   3464         od = self._descr
   3465         if od.is_exact(): return
-> 3466         self._set_descr(self._descr.exactify())
   3467 
   3468     def _set_descr(self, new_descr):

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   7589             left = self._left
   7590             right = self._right
-> 7591             left.exactify()
   7592             right.exactify()
   7593             gen = left._exact_field().union(right._exact_field())

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   3464         od = self._descr
   3465         if od.is_exact(): return
-> 3466         self._set_descr(self._descr.exactify())
   3467 
   3468     def _set_descr(self, new_descr):

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   7589             left = self._left
   7590             right = self._right
-> 7591             left.exactify()
   7592             right.exactify()
   7593             gen = left._exact_field().union(right._exact_field())

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   3464         od = self._descr
   3465         if od.is_exact(): return
-> 3466         self._set_descr(self._descr.exactify())
   3467 
   3468     def _set_descr(self, new_descr):

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   7589             left = self._left
   7590             right = self._right
-> 7591             left.exactify()
   7592             right.exactify()
   7593             gen = left._exact_field().union(right._exact_field())

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   3464         od = self._descr
   3465         if od.is_exact(): return
-> 3466         self._set_descr(self._descr.exactify())
   3467 
   3468     def _set_descr(self, new_descr):

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   7589             left = self._left
   7590             right = self._right
-> 7591             left.exactify()
   7592             right.exactify()
   7593             gen = left._exact_field().union(right._exact_field())

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   3464         od = self._descr
   3465         if od.is_exact(): return
-> 3466         self._set_descr(self._descr.exactify())
   3467 
   3468     def _set_descr(self, new_descr):

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   7589             left = self._left
   7590             right = self._right
-> 7591             left.exactify()
   7592             right.exactify()
   7593             gen = left._exact_field().union(right._exact_field())

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   3464         od = self._descr
   3465         if od.is_exact(): return
-> 3466         self._set_descr(self._descr.exactify())
   3467 
   3468     def _set_descr(self, new_descr):

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   7589             left = self._left
   7590             right = self._right
-> 7591             left.exactify()
   7592             right.exactify()
   7593             gen = left._exact_field().union(right._exact_field())

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   3464         od = self._descr
   3465         if od.is_exact(): return
-> 3466         self._set_descr(self._descr.exactify())
   3467 
   3468     def _set_descr(self, new_descr):

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   7589             left = self._left
   7590             right = self._right
-> 7591             left.exactify()
   7592             right.exactify()
   7593             gen = left._exact_field().union(right._exact_field())

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   3464         od = self._descr
   3465         if od.is_exact(): return
-> 3466         self._set_descr(self._descr.exactify())
   3467 
   3468     def _set_descr(self, new_descr):

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   7589             left = self._left
   7590             right = self._right
-> 7591             left.exactify()
   7592             right.exactify()
   7593             gen = left._exact_field().union(right._exact_field())

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   3464         od = self._descr
   3465         if od.is_exact(): return
-> 3466         self._set_descr(self._descr.exactify())
   3467 
   3468     def _set_descr(self, new_descr):

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   7590             right = self._right
   7591             left.exactify()
-> 7592             right.exactify()
   7593             gen = left._exact_field().union(right._exact_field())
   7594             left_value = gen(left._exact_value())

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   3464         od = self._descr
   3465         if od.is_exact(): return
-> 3466         self._set_descr(self._descr.exactify())
   3467 
   3468     def _set_descr(self, new_descr):

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in exactify(self)
   7591             left.exactify()
   7592             right.exactify()
-> 7593             gen = left._exact_field().union(right._exact_field())
   7594             left_value = gen(left._exact_value())
   7595             right_value = gen(right._exact_value())

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in union(self, other)
   2280         newpol_sage_y = QQy(newpol_sage)
   2281 
-> 2282         red_elt, red_back, red_pol = do_polred(newpol_sage_y)
   2283 
   2284         red_back_x = QQx(red_back)

/usr/lib64/python2.7/site-packages/sage/rings/qqbar.pyc in do_polred(poly)
   1561     assert(best is not None)
   1562     parent = poly.parent()
-> 1563     rev = parent(best_elt.Mod(pari_poly).modreverse().lift())
   1564     return parent(best_elt), rev, parent(best)
   1565 

/usr/lib64/python2.7/site-packages/sage/libs/pari/gen.so in sage.libs.pari.gen._pari_trap (sage/libs/pari/gen.c:55006)()

PariError:  (5)
```


Issue created by migration from https://trac.sagemath.org/ticket/14164





---

archive/issue_comments_174235.json:
```json
{
    "body": "This is at least partially a duplicate of #13054, in the sense that #13054 changes the error message to\n\n```\nTypeError: Coercion of PARI polmod with modulus 10077696*x^20 - 6718464*x^19 - 559872*x^18 - 56173824*x^17 + 728401248*x^16 - 2136243456*x^15 + 1038731904*x^14 - 3715874496*x^13 + 21591002400*x^12 - 63829125504*x^11 + 414323181024*x^10 - 242460667872*x^9 + 573731183904*x^8 - 1417417413120*x^7 - 5375183629440*x^6 + 23136669276768*x^5 + 9900813726912*x^4 - 70740914752800*x^3 + 237933452109888*x^2 - 479963026372896*x + 500774065215360 into number field with defining polynomial 104976*x^20 - 69984*x^19 - 5832*x^18 - 585144*x^17 + 7587513*x^16 - 22252536*x^15 + 10820124*x^14 - 38707026*x^13 + 224906275*x^12 - 664886724*x^11 + 4315866469*x^10 - 2525631957*x^9 + 5976366499*x^8 - 14764764720*x^7 - 55991496140*x^6 + 241006971633*x^5 + 103133476322*x^4 - 736884528675*x^3 + 2478473459478*x^2 - 4999614858051*x + 5216396512660 failed\n```\n",
    "created_at": "2013-02-22T13:09:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13960",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13960#issuecomment-174235",
    "user": "jdemeyer"
}
```

This is at least partially a duplicate of #13054, in the sense that #13054 changes the error message to

```
TypeError: Coercion of PARI polmod with modulus 10077696*x^20 - 6718464*x^19 - 559872*x^18 - 56173824*x^17 + 728401248*x^16 - 2136243456*x^15 + 1038731904*x^14 - 3715874496*x^13 + 21591002400*x^12 - 63829125504*x^11 + 414323181024*x^10 - 242460667872*x^9 + 573731183904*x^8 - 1417417413120*x^7 - 5375183629440*x^6 + 23136669276768*x^5 + 9900813726912*x^4 - 70740914752800*x^3 + 237933452109888*x^2 - 479963026372896*x + 500774065215360 into number field with defining polynomial 104976*x^20 - 69984*x^19 - 5832*x^18 - 585144*x^17 + 7587513*x^16 - 22252536*x^15 + 10820124*x^14 - 38707026*x^13 + 224906275*x^12 - 664886724*x^11 + 4315866469*x^10 - 2525631957*x^9 + 5976366499*x^8 - 14764764720*x^7 - 55991496140*x^6 + 241006971633*x^5 + 103133476322*x^4 - 736884528675*x^3 + 2478473459478*x^2 - 4999614858051*x + 5216396512660 failed
```




---

archive/issue_comments_174236.json:
```json
{
    "body": "See also #18243.  The bug should soon be fixed by #252; let's use this ticket to add doctests for both tickets.",
    "created_at": "2015-06-20T08:03:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13960",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13960#issuecomment-174236",
    "user": "pbruin"
}
```

See also #18243.  The bug should soon be fixed by #252; let's use this ticket to add doctests for both tickets.



---

archive/issue_comments_174237.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-07-22T11:48:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13960",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13960#issuecomment-174237",
    "user": "pbruin"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_174238.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-07-22T11:55:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13960",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13960#issuecomment-174238",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_174239.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-08-28T21:19:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13960",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13960#issuecomment-174239",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_174240.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-09-17T02:36:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13960",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13960#issuecomment-174240",
    "user": "vdelecroix"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_174241.json:
```json
{
    "body": "I changed the description a little bit.",
    "created_at": "2015-09-17T02:36:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13960",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13960#issuecomment-174241",
    "user": "vdelecroix"
}
```

I changed the description a little bit.



---

archive/issue_comments_174242.json:
```json
{
    "body": "On some 32-bit machines I get now \n\n```\nsage -t --long src/sage/modular/modform/ambient.py\n**********************************************************************\nFile \"src/sage/modular/modform/ambient.py\", line 812, in sage.modular.modform.ambient.?._compute_hecke_matrix\nFailed example:\n    f = t.charpoly()                   # long time (4s)\nException raised:\n    Traceback (most recent call last):\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.modular.modform.ambient.?._compute_hecke_matrix[4]>\", line 1, in <module>\n        f = t.charpoly()                   # long time (4s)\n      File \"sage/matrix/matrix_integer_dense.pyx\", line 1251, in sage.matrix.matrix_integer_dense.Matrix_integer_dense.charpoly (/home/buildbot/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix_integer_dense.c:12808)\n        g = self._charpoly_linbox(var)\n      File \"sage/matrix/matrix_integer_dense.pyx\", line 1304, in sage.matrix.matrix_integer_dense.Matrix_integer_dense._charpoly_linbox (/home/buildbot/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix_integer_dense.c:13608)\n        return self._poly_linbox(var=var, typ='charpoly')\n      File \"sage/matrix/matrix_integer_dense.pyx\", line 1327, in sage.matrix.matrix_integer_dense.Matrix_integer_dense._poly_linbox (/home/buildbot/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix_integer_dense.c:13967)\n        sig_on()\n      File \"sage/libs/ntl/error.pyx\", line 42, in sage.libs.ntl.error.NTL_error_callback (/home/buildbot/slave/sage_git/build/src/build/cythonized/sage/libs/ntl/error.cpp:756)\n        raise NTLError(s)\n    NTLError: FFT prime index too large\n**********************************************************************\n```\n\n* http://build.sagedev.org/release/builders/%20%20slow%20AIMS%20bu14_32s02%20%28Ubuntu%2014.04%2032%20bit%29%20incremental/builds/120/steps/shell_4/logs/stdio\n* http://build.sagedev.org/release/builders/%20%20slow%20Oxford%20ARM%20%28Ubuntu%2012.10%29%20incremental/builds/220/steps/shell_4/logs/stdio",
    "created_at": "2015-09-17T20:55:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13960",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13960#issuecomment-174242",
    "user": "vbraun"
}
```

On some 32-bit machines I get now 

```
sage -t --long src/sage/modular/modform/ambient.py
**********************************************************************
File "src/sage/modular/modform/ambient.py", line 812, in sage.modular.modform.ambient.?._compute_hecke_matrix
Failed example:
    f = t.charpoly()                   # long time (4s)
Exception raised:
    Traceback (most recent call last):
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.modular.modform.ambient.?._compute_hecke_matrix[4]>", line 1, in <module>
        f = t.charpoly()                   # long time (4s)
      File "sage/matrix/matrix_integer_dense.pyx", line 1251, in sage.matrix.matrix_integer_dense.Matrix_integer_dense.charpoly (/home/buildbot/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix_integer_dense.c:12808)
        g = self._charpoly_linbox(var)
      File "sage/matrix/matrix_integer_dense.pyx", line 1304, in sage.matrix.matrix_integer_dense.Matrix_integer_dense._charpoly_linbox (/home/buildbot/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix_integer_dense.c:13608)
        return self._poly_linbox(var=var, typ='charpoly')
      File "sage/matrix/matrix_integer_dense.pyx", line 1327, in sage.matrix.matrix_integer_dense.Matrix_integer_dense._poly_linbox (/home/buildbot/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix_integer_dense.c:13967)
        sig_on()
      File "sage/libs/ntl/error.pyx", line 42, in sage.libs.ntl.error.NTL_error_callback (/home/buildbot/slave/sage_git/build/src/build/cythonized/sage/libs/ntl/error.cpp:756)
        raise NTLError(s)
    NTLError: FFT prime index too large
**********************************************************************
```

* http://build.sagedev.org/release/builders/%20%20slow%20AIMS%20bu14_32s02%20%28Ubuntu%2014.04%2032%20bit%29%20incremental/builds/120/steps/shell_4/logs/stdio
* http://build.sagedev.org/release/builders/%20%20slow%20Oxford%20ARM%20%28Ubuntu%2012.10%29%20incremental/builds/220/steps/shell_4/logs/stdio



---

archive/issue_comments_174243.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-09-17T20:55:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13960",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13960#issuecomment-174243",
    "user": "vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_174244.json:
```json
{
    "body": "Hmm must be a different ticket...",
    "created_at": "2015-09-17T20:59:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13960",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13960#issuecomment-174244",
    "user": "vbraun"
}
```

Hmm must be a different ticket...



---

archive/issue_comments_174245.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2015-09-17T20:59:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13960",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13960#issuecomment-174245",
    "user": "vbraun"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_174246.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-09-18T13:03:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13960",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13960#issuecomment-174246",
    "user": "vbraun"
}
```

Resolution: fixed
