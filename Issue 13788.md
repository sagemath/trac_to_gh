# Issue 13788: Set Fortran compiler variables

Issue created by migration from https://trac.sagemath.org/ticket/13992

Original creator: jdemeyer

Original creation time: 2013-01-23 07:34:21

Assignee: GeorgSWeber

Since !SCons is too stupid to figure out by itself how to compile Fortran code (#13985), we should set environment variables in `sage-env`, similar to how we do for `CC` and `CXX`.


---

Attachment


---

Attachment


---

Comment by fbissey created at 2013-01-25 09:13:44

I like the patches. I am surprised that you put g77 as a candidate. I am not sure sage can be built using g77. I would have to dig to check.


---

Comment by jdemeyer created at 2013-01-25 09:16:54

Replying to [comment:7 fbissey]:
> I like the patches. I am surprised that you put g77 as a candidate. I am not sure sage can be built using g77. I would have to dig to check.
I don't know either whether it works, I could remove it if you prefer.


---

Comment by fbissey created at 2013-01-25 09:26:50

After a quick scan of the spkg, nothing jumps at me as deal breaker. Building with g77 could be interesting experiment but let's not go there for this ticket. It's good as is.
Numpy may need bumping before numpy 1.7.0 is ready - especially given its dependency on #12415. Ypu haven't put this for review, what do you think needs to be done apart from bumping spkg?


---

Comment by jdemeyer created at 2013-01-25 09:37:20

I didn't put this to needs_review mainly because I wanted to test it on the buildbots first.  But if you say "positive_review if it works", that's fine for me.

Note that the spkgs are not part of this ticket, just the two patches.


---

Comment by fbissey created at 2013-01-25 09:40:37

Sure. Positive review if it works for me.


---

Comment by jdemeyer created at 2013-01-25 13:08:50

Resolution: fixed


---

Comment by jdemeyer created at 2013-01-25 13:08:50

Works fine.


---

Comment by leif created at 2013-01-25 14:16:19

Does `CPP` meanwhile get a default value?

Just asking because you also removed

```
# letting at least CPP have a default value ('cpp') probably makes sense.
```

from `sage-env`.


---

Comment by jdemeyer created at 2013-01-25 14:21:28

Replying to [comment:13 leif]:
> Does `CPP` meanwhile get a default value?
No, it doesn't.  I removed your comment because I don't know any reason why we should set `CPP`.


---

Comment by leif created at 2013-01-25 14:27:08

P.S.:  Just found out somebody finally removed setting `FC` to `sage_fortran` in the R spkg... :-)  (which I did years? ago, in an spkg that never got merged...)


---

Comment by leif created at 2013-01-25 14:32:04

Replying to [comment:14 jdemeyer]:
> Replying to [comment:13 leif]:
> > Does `CPP` meanwhile get a default value?
> No, it doesn't.  I removed your comment because I don't know any reason why we should set `CPP`.

Mainly for use in `spkg-install` scripts and the like.  I don't think I had anything else in mind (other than overriding a _preset_ `CPP` if Sage's GCC gets installed, which we already do).


---

Comment by jdemeyer created at 2013-01-25 14:36:56

To what should be set `CPP` then?  `$CC -E`?  Or `cpp`?  Or `/lib/cpp`?  For now, letting `configure` figure it out has worked fine.


---

Comment by leif created at 2013-01-25 15:10:30

Replying to [comment:17 jdemeyer]:
> To what should be set `CPP` then?  `$CC -E`?  Or `cpp`?  Or `/lib/cpp`?  For now, letting `configure` figure it out has worked fine.

Just to `cpp` in case it's not already set, for use in our "own" scripts (that don't have/use `configure`), just like `CC`, `CXX`, but also `AR` etc., i.e., for convenience (and consistency).


---

Comment by jdemeyer created at 2013-01-25 15:14:49

But `$CPP` is not so clear, as `configure` uses `$CC -E` by default.
