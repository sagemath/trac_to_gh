# Issue 21866: Printing p-adic numbers

Issue created by migration from Trac.

Original creator: caruso

Original creation time: 2016-12-27 23:04:06

CC:  roed saraedum

Keywords: padic printing

Currently, in the printing mode `digits`, the "initial" zeroes of a p-adic number are not displayed:


```
sage: R = Zp(5, print_mode='digits')
sage: R(89)
...324
```


It is a bit annoying because the precision does not appear on the printing. Even worse, when "initial" zeroes are located after the decimal mark, there appears as question mark whereas they are not unknown:


```
sage: x = R(89)/5^5; x
...?.??324
sage: x.precision_absolute()
15
```


I would suggest to change this behaviour and display all digits (including the initial zeroes) until the precision. Any thoughts?



---

Comment by roed created at 2016-12-27 23:11:03

I'm happy to add zeros indicating the precision.

There's also a question of whether digits are should be printed in an opposite order, to align with the convention for real numbers where "smaller" digits appear further to the right.  I'm comfortable with the current ordering, but others have suggested a change over the years.


---

Comment by caruso created at 2016-12-27 23:13:31

Personally, I do prefer the current ordering.


---

Comment by chapoton created at 2016-12-29 15:51:17

beware of current work going on in #22036 (python3 compatibility, needs review)


---

Comment by caruso created at 2017-06-10 16:14:02

Here is a proposal.


---

Comment by caruso created at 2017-06-10 16:14:02

Changing status from new to needs_review.


---

Comment by git created at 2017-06-10 16:20:19

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by roed created at 2017-06-10 16:46:03

I'm happy with the general principle.  A couple suggestions:

 * Why are there trailing zeros in the hunk `-874,8 +874,24 `@``@` cdef class pAdicPrinter_class(SageObject)`?
 * If they are supposed to be there, you should use `alphabet[0]` rather than `"0"`.
 * Can you add some doctests showing the improved behavior?


---

Comment by roed created at 2017-06-10 16:46:03

Changing status from needs_review to needs_work.


---

Comment by caruso created at 2017-06-10 18:21:53

Changing status from needs_work to needs_review.


---

Comment by caruso created at 2017-06-10 18:21:53

The trailing zero is indeed not necessary, just for convenience. I however agree for using `alphabet[0]` instead of `0`.

I've added doctests.


---

Comment by git created at 2017-06-10 18:22:17

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-06-14 05:39:27

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by roed created at 2017-06-16 21:54:58

There's no problem merging this ticket with #20310.  I'm rebuilding and running tests, but am about to get on a flight.


---

Comment by roed created at 2017-06-17 07:13:10

Okay, I had one test failure in `src/sage/rings/padics/padic_ZZ_pX_CR_element.pyx` after merging with #20310.  I'm not sure if the problem is from changes introduced there.

We can keep talking about this in a week and a half, or you and Julian can resolve it.


---

Comment by caruso created at 2017-07-20 04:17:25

Changing keywords from "padic printing" to "padic printing, sd87".


---

Comment by abourgeois created at 2017-07-20 21:39:32

Changing status from needs_review to positive_review.


---

Comment by abourgeois created at 2017-07-20 21:39:32

All doctests pass.


---

Comment by vbraun created at 2017-07-21 20:36:40

author name..


---

Comment by vbraun created at 2017-07-21 20:36:40

Changing status from positive_review to needs_work.


---

Comment by caruso created at 2017-07-21 20:42:50

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2017-07-26 22:13:32

Resolution: fixed
