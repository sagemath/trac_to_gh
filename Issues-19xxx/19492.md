# Issue 19492: Optimize linear codes: __eq__, dual_code and commented debug lines

archive/issues_019255.json:
```json
{
    "body": "Some code in `LinearCode.py` is quite old and/or slow, and could be optimized.\nThis tickets proposes a faster implementation for `__eq__` and `dual_code` methods.\nIt also removes a lot of commented debug lines.\n\n**Branch/Commit:** [b869837b6732e6c0d9458e18c48abb4957e63387](https://github.com/sagemath/sagetrac-mirror/commit/b869837b6732e6c0d9458e18c48abb4957e63387)\n\n**Reviewer:** Vincent Delecroix\n\n**Author:** David Lucas\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/19492\n\n",
    "closed_at": "2016-01-07T22:41:06Z",
    "created_at": "2015-10-28T14:42:41Z",
    "labels": [
        "component: coding theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.0",
    "title": "Optimize linear codes: __eq__, dual_code and commented debug lines",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19492",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```
Some code in `LinearCode.py` is quite old and/or slow, and could be optimized.
This tickets proposes a faster implementation for `__eq__` and `dual_code` methods.
It also removes a lot of commented debug lines.

**Branch/Commit:** [b869837b6732e6c0d9458e18c48abb4957e63387](https://github.com/sagemath/sagetrac-mirror/commit/b869837b6732e6c0d9458e18c48abb4957e63387)

**Reviewer:** Vincent Delecroix

**Author:** David Lucas

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/19492





---

archive/issue_comments_352785.json:
```json
{
    "body": "**Branch:** [u/dlucas/clean_linear_code](https://github.com/sagemath/sagetrac-mirror/tree/u/dlucas/clean_linear_code)",
    "created_at": "2015-10-28T14:44:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19492#issuecomment-352785",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

**Branch:** [u/dlucas/clean_linear_code](https://github.com/sagemath/sagetrac-mirror/tree/u/dlucas/clean_linear_code)



---

archive/issue_comments_352786.json:
```json
{
    "body": "**Commit:** [d64c3603f5f870f4d35cfd85ce74c01c5fd6a4f9](https://github.com/sagemath/sagetrac-mirror/commit/d64c3603f5f870f4d35cfd85ce74c01c5fd6a4f9)",
    "created_at": "2015-10-28T14:49:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19492#issuecomment-352786",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

**Commit:** [d64c3603f5f870f4d35cfd85ce74c01c5fd6a4f9](https://github.com/sagemath/sagetrac-mirror/commit/d64c3603f5f870f4d35cfd85ce74c01c5fd6a4f9)



---

archive/issue_comments_352787.json:
```json
{
    "body": "<a id='comment:2'></a>\nLet `C` be a linear code with `H` a parity check matrix of `C`. The generator matrix of `C`'s dual is `H`. I made changes in `AbstractLinearCode`'s `dual_code` method to use that property instead of the old implementation and got something faster.\n\nI also rewrote `AbstractLinearCode`'s `__eq__` which is now less heavy and a bit faster.\n\nFinally, I removed a lot of old debug prints that were still present in this file as commented lines.\n\nThis is now ready for review.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eba939b4bc66092f256d61ff137b6dae39d13508\">eba939b</a></td><td><code>Changes in dual_code method</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d64c3603f5f870f4d35cfd85ce74c01c5fd6a4f9\">d64c360</a></td><td><code>Changes in __eq__ method, removed commented debug lines</code></td></tr></table>\n",
    "created_at": "2015-10-28T14:49:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19492#issuecomment-352787",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

<a id='comment:2'></a>
Let `C` be a linear code with `H` a parity check matrix of `C`. The generator matrix of `C`'s dual is `H`. I made changes in `AbstractLinearCode`'s `dual_code` method to use that property instead of the old implementation and got something faster.

I also rewrote `AbstractLinearCode`'s `__eq__` which is now less heavy and a bit faster.

Finally, I removed a lot of old debug prints that were still present in this file as commented lines.

This is now ready for review.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eba939b4bc66092f256d61ff137b6dae39d13508">eba939b</a></td><td><code>Changes in dual_code method</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d64c3603f5f870f4d35cfd85ce74c01c5fd6a4f9">d64c360</a></td><td><code>Changes in __eq__ method, removed commented debug lines</code></td></tr></table>




---

archive/issue_comments_352788.json:
```json
{
    "body": "**Author:** David Lucas",
    "created_at": "2015-10-28T14:49:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19492#issuecomment-352788",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

**Author:** David Lucas



---

archive/issue_comments_352789.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2015-10-28T14:49:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19492#issuecomment-352789",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

**Changing status** from new to needs_review.



---

archive/issue_events_061105.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/19492",
    "rename": {
        "from": "Cleaning linear codes: __eq__, dual_code and commented debug lines",
        "to": "Optimize linear codes: __eq__, dual_code and commented debug lines"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19492#event-61105"
}
```



---

archive/issue_events_061106.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-01-02T21:18:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19492",
    "milestone": "sage-7.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19492#event-61106"
}
```



---

archive/issue_comments_352790.json:
```json
{
    "body": "<a id='comment:4'></a>\nThe following would be cleaner on two lines.\n\n```\n+        Ks, rbas = self.parity_check_matrix().right_kernel(), right.gens()\n```\nOtherwise it looks good.",
    "created_at": "2016-01-02T21:18:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19492#issuecomment-352790",
    "user": "https://github.com/videlec"
}
```

<a id='comment:4'></a>
The following would be cleaner on two lines.

```
+        Ks, rbas = self.parity_check_matrix().right_kernel(), right.gens()
```
Otherwise it looks good.



---

archive/issue_comments_352791.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2016-01-02T21:18:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19492#issuecomment-352791",
    "user": "https://github.com/videlec"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_352792.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f3a7f0790113ce41b9822ea7722796afbaa8342d\">f3a7f07</a></td><td><code>Integrated reviewer's comment</code></td></tr></table>\n",
    "created_at": "2016-01-05T09:18:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19492#issuecomment-352792",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f3a7f0790113ce41b9822ea7722796afbaa8342d">f3a7f07</a></td><td><code>Integrated reviewer's comment</code></td></tr></table>




---

archive/issue_comments_352793.json:
```json
{
    "body": "**Changing commit** from \"[d64c3603f5f870f4d35cfd85ce74c01c5fd6a4f9](https://github.com/sagemath/sagetrac-mirror/commit/d64c3603f5f870f4d35cfd85ce74c01c5fd6a4f9)\" to \"[f3a7f0790113ce41b9822ea7722796afbaa8342d](https://github.com/sagemath/sagetrac-mirror/commit/f3a7f0790113ce41b9822ea7722796afbaa8342d)\".",
    "created_at": "2016-01-05T09:18:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19492#issuecomment-352793",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[d64c3603f5f870f4d35cfd85ce74c01c5fd6a4f9](https://github.com/sagemath/sagetrac-mirror/commit/d64c3603f5f870f4d35cfd85ce74c01c5fd6a4f9)" to "[f3a7f0790113ce41b9822ea7722796afbaa8342d](https://github.com/sagemath/sagetrac-mirror/commit/f3a7f0790113ce41b9822ea7722796afbaa8342d)".



---

archive/issue_comments_352794.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2016-01-05T09:20:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19492#issuecomment-352794",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_352795.json:
```json
{
    "body": "<a id='comment:6'></a>\nThanks for your input.\n\nI changed the code to what you suggested. I also fixed a silly copy-paste mistake two lines below the one you mentioned.\n\nDavid",
    "created_at": "2016-01-05T09:20:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19492#issuecomment-352795",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

<a id='comment:6'></a>
Thanks for your input.

I changed the code to what you suggested. I also fixed a silly copy-paste mistake two lines below the one you mentioned.

David



---

archive/issue_comments_352796.json:
```json
{
    "body": "<a id='comment:7'></a>\nWhile you are at it, the print statements like\n\n```\nprint \" t = \",t,\" , v = \",n,\" , k = \",w,\" , lambda = \",wts[w]*binomial(w,t)/binomial(n,t)\n```\nare really ugly. Could you do something cleaner like\n\n```\nprint \"t={} v={} k={} lambda={}\".format(t, n, w, wts[w]*binomial(w,t)/binomial(n,t))\n```",
    "created_at": "2016-01-05T22:17:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19492#issuecomment-352796",
    "user": "https://github.com/videlec"
}
```

<a id='comment:7'></a>
While you are at it, the print statements like

```
print " t = ",t," , v = ",n," , k = ",w," , lambda = ",wts[w]*binomial(w,t)/binomial(n,t)
```
are really ugly. Could you do something cleaner like

```
print "t={} v={} k={} lambda={}".format(t, n, w, wts[w]*binomial(w,t)/binomial(n,t))
```



---

archive/issue_comments_352797.json:
```json
{
    "body": "<a id='comment:8'></a>\nEven better would be\n\n```\nprint(\"t={} v={} k={} lambda={}\".format(t, n, w, wts[w]*binomial(w,t)/binomial(n,t)))\n```\nsince that's compatible with Python 2 and 3.",
    "created_at": "2016-01-06T07:11:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19492#issuecomment-352797",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'></a>
Even better would be

```
print("t={} v={} k={} lambda={}".format(t, n, w, wts[w]*binomial(w,t)/binomial(n,t)))
```
since that's compatible with Python 2 and 3.



---

archive/issue_comments_352798.json:
```json
{
    "body": "<a id='comment:9'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b869837b6732e6c0d9458e18c48abb4957e63387\">b869837</a></td><td><code>Changed some print statements to something cleaner</code></td></tr></table>\n",
    "created_at": "2016-01-06T12:46:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19492#issuecomment-352798",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b869837b6732e6c0d9458e18c48abb4957e63387">b869837</a></td><td><code>Changed some print statements to something cleaner</code></td></tr></table>




---

archive/issue_comments_352799.json:
```json
{
    "body": "**Changing commit** from \"[f3a7f0790113ce41b9822ea7722796afbaa8342d](https://github.com/sagemath/sagetrac-mirror/commit/f3a7f0790113ce41b9822ea7722796afbaa8342d)\" to \"[b869837b6732e6c0d9458e18c48abb4957e63387](https://github.com/sagemath/sagetrac-mirror/commit/b869837b6732e6c0d9458e18c48abb4957e63387)\".",
    "created_at": "2016-01-06T12:46:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19492#issuecomment-352799",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[f3a7f0790113ce41b9822ea7722796afbaa8342d](https://github.com/sagemath/sagetrac-mirror/commit/f3a7f0790113ce41b9822ea7722796afbaa8342d)" to "[b869837b6732e6c0d9458e18c48abb4957e63387](https://github.com/sagemath/sagetrac-mirror/commit/b869837b6732e6c0d9458e18c48abb4957e63387)".



---

archive/issue_comments_352800.json:
```json
{
    "body": "<a id='comment:10'></a>\nIt's done.\nI picked Jeroen's suggestion for the new statements.",
    "created_at": "2016-01-06T12:48:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19492#issuecomment-352800",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

<a id='comment:10'></a>
It's done.
I picked Jeroen's suggestion for the new statements.



---

archive/issue_comments_352801.json:
```json
{
    "body": "**Reviewer:** Vincent Delecroix",
    "created_at": "2016-01-06T23:49:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19492#issuecomment-352801",
    "user": "https://github.com/videlec"
}
```

**Reviewer:** Vincent Delecroix



---

archive/issue_comments_352802.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2016-01-06T23:49:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19492#issuecomment-352802",
    "user": "https://github.com/videlec"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_events_061107.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-01-07T22:41:06Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19492",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19492#event-61107"
}
```



---

archive/issue_comments_352803.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2016-01-07T22:41:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19492#issuecomment-352803",
    "user": "https://github.com/vbraun"
}
```

**Resolution:** fixed



---

archive/issue_comments_352804.json:
```json
{
    "body": "**Changing branch** from \"[u/dlucas/clean_linear_code](https://github.com/sagemath/sagetrac-mirror/tree/u/dlucas/clean_linear_code)\" to \"[b869837b6732e6c0d9458e18c48abb4957e63387](https://github.com/sagemath/sagetrac-mirror/commit/b869837b6732e6c0d9458e18c48abb4957e63387)\".",
    "created_at": "2016-01-07T22:41:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19492#issuecomment-352804",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/dlucas/clean_linear_code](https://github.com/sagemath/sagetrac-mirror/tree/u/dlucas/clean_linear_code)" to "[b869837b6732e6c0d9458e18c48abb4957e63387](https://github.com/sagemath/sagetrac-mirror/commit/b869837b6732e6c0d9458e18c48abb4957e63387)".
