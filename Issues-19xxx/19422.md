# Issue 19422: A new structure for Punctured Codes

archive/issues_019185.json:
```json
{
    "assignees": [],
    "body": "This ticket proposes a new implementation for punctured codes.\n\nIt contains:\n\n- a new code class, `PuncturedCode`\n\n- a dedicated encoder to compute the generator matrix of a Punctured Code.\n\n- a dedicate decoder which uses the original code to correct errors\n\nThis new structure presents the following advantages:\n\n- it keeps track of the code it comes from. If one punctures a code A, the punctured code one gets will remember it comes from A.\n\n- This allows to perform several operations, like encoding or picking a random element without constructing the generator matrix for the punctured code, thus saving time and memory.\n\n- because it keeps track of the original code, it's possible to get a structured representation of the punctured code, e.g. if one punctures a GRS code and asks for the structured representation of the punctured code one got, a GRS code will be returned.\n\n\nDepends on #19653\n\nCC:  @wdjoyner @ppurka\n\nBranch/Commit: **[45d4ee1](https://github.com/sagemath/sagetrac-mirror/commit/45d4ee111d235690820ef35269fb8991aa6f4abb)**\n\nReviewer: **Julien Lavauzelle**\n\nAuthor: **David Lucas**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/19422_\n\n",
    "closed_at": "2016-05-24T07:06:34Z",
    "created_at": "2015-10-16T13:43:28Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20coding%20theory",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "A new structure for Punctured Codes",
    "type": "issue",
    "updated_at": "2016-05-24T07:06:34Z",
    "url": "https://github.com/sagemath/sage/issues/19422",
    "user": "https://github.com/sagetrac-dlucas"
}
```
This ticket proposes a new implementation for punctured codes.

It contains:

- a new code class, `PuncturedCode`

- a dedicated encoder to compute the generator matrix of a Punctured Code.

- a dedicate decoder which uses the original code to correct errors

This new structure presents the following advantages:

- it keeps track of the code it comes from. If one punctures a code A, the punctured code one gets will remember it comes from A.

- This allows to perform several operations, like encoding or picking a random element without constructing the generator matrix for the punctured code, thus saving time and memory.

- because it keeps track of the original code, it's possible to get a structured representation of the punctured code, e.g. if one punctures a GRS code and asks for the structured representation of the punctured code one got, a GRS code will be returned.


Depends on #19653

CC:  @wdjoyner @ppurka

Branch/Commit: **[45d4ee1](https://github.com/sagemath/sagetrac-mirror/commit/45d4ee111d235690820ef35269fb8991aa6f4abb)**

Reviewer: **Julien Lavauzelle**

Author: **David Lucas**

_Issue created by migration from https://trac.sagemath.org/ticket/19422_





---

archive/issue_events_257539.json:
```json
{
    "actor": "https://github.com/sagetrac-dlucas",
    "created_at": "2015-10-16T13:43:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "milestone_number": null,
    "milestone_title": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19422#event-257539"
}
```



---

archive/issue_events_257540.json:
```json
{
    "actor": "https://github.com/sagetrac-dlucas",
    "created_at": "2015-10-16T13:43:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20coding%20theory",
    "label_color": "0000ff",
    "label_name": "component: coding theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19422#event-257540"
}
```



---

archive/issue_events_257541.json:
```json
{
    "actor": "https://github.com/sagetrac-dlucas",
    "created_at": "2015-10-16T13:43:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19422#event-257541"
}
```



---

archive/issue_events_257542.json:
```json
{
    "actor": "https://github.com/sagetrac-dlucas",
    "created_at": "2015-10-16T13:43:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19422#event-257542"
}
```



---

archive/issue_comments_278567.json:
```json
{
    "body": "Branch: **[u/dlucas/punctured_codes](https://github.com/sagemath/sagetrac-mirror/tree/u/dlucas/punctured_codes)**",
    "created_at": "2015-10-16T13:44:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278567",
    "user": "https://github.com/sagetrac-dlucas"
}
```

Branch: **[u/dlucas/punctured_codes](https://github.com/sagemath/sagetrac-mirror/tree/u/dlucas/punctured_codes)**



---

archive/issue_comments_278568.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nContent available, it's now ready for review.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/37683a13c904825582e9a4457a44ba0b70168a33\">37683a1</a></td><td><code>New Punctured Codes object, coming with its own encoder</code></td></tr></table>\n",
    "created_at": "2015-10-16T13:47:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278568",
    "user": "https://github.com/sagetrac-dlucas"
}
```

<a id='comment:2'>Comment 2:</a>
Content available, it's now ready for review.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/37683a13c904825582e9a4457a44ba0b70168a33">37683a1</a></td><td><code>New Punctured Codes object, coming with its own encoder</code></td></tr></table>




---

archive/issue_comments_278569.json:
```json
{
    "body": "Commit: **[37683a1](https://github.com/sagemath/sagetrac-mirror/commit/37683a13c904825582e9a4457a44ba0b70168a33)**",
    "created_at": "2015-10-16T13:47:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278569",
    "user": "https://github.com/sagetrac-dlucas"
}
```

Commit: **[37683a1](https://github.com/sagemath/sagetrac-mirror/commit/37683a13c904825582e9a4457a44ba0b70168a33)**



---

archive/issue_events_257543.json:
```json
{
    "actor": "https://github.com/sagetrac-dlucas",
    "created_at": "2015-10-16T13:47:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19422#event-257543"
}
```



---

archive/issue_comments_278570.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\n`AbstractLinearCode` has a method `punctured`. Shouldn't this return a `PuncturedCode` object after this patch?",
    "created_at": "2015-10-18T16:28:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278570",
    "user": "https://github.com/johanrosenkilde"
}
```

<a id='comment:3'>Comment 3:</a>
`AbstractLinearCode` has a method `punctured`. Shouldn't this return a `PuncturedCode` object after this patch?



---

archive/issue_comments_278571.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nI chose to keep this method as it directly returns a `LinearCode` object.\nSo if one wants to puncture and immediately get the `LinearCode` representation of his punctured code, he can thanks to this method. I plan to change it when the mechanism to get another representation of a punctured code (e.g. get a RS code from a punctured RS code) will be ready.",
    "created_at": "2015-10-19T07:38:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278571",
    "user": "https://github.com/sagetrac-dlucas"
}
```

<a id='comment:4'>Comment 4:</a>
I chose to keep this method as it directly returns a `LinearCode` object.
So if one wants to puncture and immediately get the `LinearCode` representation of his punctured code, he can thanks to this method. I plan to change it when the mechanism to get another representation of a punctured code (e.g. get a RS code from a punctured RS code) will be ready.



---

archive/issue_comments_278572.json:
```json
{
    "body": "Author: **David Lucas**",
    "created_at": "2015-10-19T08:15:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278572",
    "user": "https://github.com/sagetrac-dlucas"
}
```

Author: **David Lucas**



---

archive/issue_comments_278573.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nI think the default should always be to retain as much structure as possible. The `C.punctured()` method is certainly the \"default\" a user would call.\n\nFurthermore, having a `PuncturedCode` should never get in the way for users who are simply interested in the unstructured linear code representation: it advertises exactly the same methods (plus some more). So I don't think there is any deprecation needed.",
    "created_at": "2015-10-19T10:03:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278573",
    "user": "https://github.com/johanrosenkilde"
}
```

<a id='comment:6'>Comment 6:</a>
I think the default should always be to retain as much structure as possible. The `C.punctured()` method is certainly the "default" a user would call.

Furthermore, having a `PuncturedCode` should never get in the way for users who are simply interested in the unstructured linear code representation: it advertises exactly the same methods (plus some more). So I don't think there is any deprecation needed.



---

archive/issue_comments_278574.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7f9d27ed9483b51342702e115a74e37904cde921\">7f9d27e</a></td><td><code>AbstractLinearCode's punctured method now returns a PuncturedCode object</code></td></tr></table>\n",
    "created_at": "2015-10-19T10:32:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278574",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:7'>Comment 7:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7f9d27ed9483b51342702e115a74e37904cde921">7f9d27e</a></td><td><code>AbstractLinearCode's punctured method now returns a PuncturedCode object</code></td></tr></table>




---

archive/issue_comments_278575.json:
```json
{
    "body": "Changed commit from **[37683a1](https://github.com/sagemath/sagetrac-mirror/commit/37683a13c904825582e9a4457a44ba0b70168a33)** to **[7f9d27e](https://github.com/sagemath/sagetrac-mirror/commit/7f9d27ed9483b51342702e115a74e37904cde921)**",
    "created_at": "2015-10-19T10:32:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278575",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[37683a1](https://github.com/sagemath/sagetrac-mirror/commit/37683a13c904825582e9a4457a44ba0b70168a33)** to **[7f9d27e](https://github.com/sagemath/sagetrac-mirror/commit/7f9d27ed9483b51342702e115a74e37904cde921)**



---

archive/issue_comments_278576.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nOk, I agree with you.\n\nChanges have been made and pushed.",
    "created_at": "2015-10-19T10:33:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278576",
    "user": "https://github.com/sagetrac-dlucas"
}
```

<a id='comment:8'>Comment 8:</a>
Ok, I agree with you.

Changes have been made and pushed.



---

archive/issue_comments_278577.json:
```json
{
    "body": "Changed commit from **[7f9d27e](https://github.com/sagemath/sagetrac-mirror/commit/7f9d27ed9483b51342702e115a74e37904cde921)** to **[ca859cb](https://github.com/sagemath/sagetrac-mirror/commit/ca859cbf3e6b86ccc218d6e51813ae45b9babb34)**",
    "created_at": "2016-01-13T10:08:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278577",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7f9d27e](https://github.com/sagemath/sagetrac-mirror/commit/7f9d27ed9483b51342702e115a74e37904cde921)** to **[ca859cb](https://github.com/sagemath/sagetrac-mirror/commit/ca859cbf3e6b86ccc218d6e51813ae45b9babb34)**



---

archive/issue_comments_278578.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4473a2cc2594d7d4331bb53c104d5f9d57eb94c4\">4473a2c</a></td><td><code>Updated to latest beta and fixed conflicts</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/74fc44ecbffc7b7ba4a610b80790cd87dd7aa1ea\">74fc44e</a></td><td><code>Added decoder for punctured codes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ca859cbf3e6b86ccc218d6e51813ae45b9babb34\">ca859cb</a></td><td><code>Added a mechanism to get the structured representation of any punctured code</code></td></tr></table>\n",
    "created_at": "2016-01-13T10:08:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278578",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:9'>Comment 9:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4473a2cc2594d7d4331bb53c104d5f9d57eb94c4">4473a2c</a></td><td><code>Updated to latest beta and fixed conflicts</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/74fc44ecbffc7b7ba4a610b80790cd87dd7aa1ea">74fc44e</a></td><td><code>Added decoder for punctured codes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ca859cbf3e6b86ccc218d6e51813ae45b9babb34">ca859cb</a></td><td><code>Added a mechanism to get the structured representation of any punctured code</code></td></tr></table>




---

archive/issue_comments_278579.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nA few updates on this ticket:\n\n- it's now under the latest beta\n- as we now have the structure for decoders in Sage, I added a dedicated decoder for punctured codes\n- as we now have GRS codes in Sage, which still are GRS codes after puncturing, I introduced a mechanism which allows one to get the most specific representation possible for a punctured code, based on the original code.\n\nThis is still open for review.",
    "created_at": "2016-01-13T10:13:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278579",
    "user": "https://github.com/sagetrac-dlucas"
}
```

<a id='comment:10'>Comment 10:</a>
A few updates on this ticket:

- it's now under the latest beta
- as we now have the structure for decoders in Sage, I added a dedicated decoder for punctured codes
- as we now have GRS codes in Sage, which still are GRS codes after puncturing, I introduced a mechanism which allows one to get the most specific representation possible for a punctured code, based on the original code.

This is still open for review.



---

archive/issue_comments_278580.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,10 +6,13 @@\n \n - a dedicated encoder to compute the generator matrix of a Punctured Code.\n \n+- a dedicate decoder which uses the original code to correct errors\n+\n This new structure presents the following advantages:\n \n-- it keeps track of the code it comes from. If one punctures a code A, the punctured code he gets will remember it comes from A.\n+- it keeps track of the code it comes from. If one punctures a code A, the punctured code one gets will remember it comes from A.\n \n - This allows to perform several operations, like encoding or picking a random element without constructing the generator matrix for the punctured code, thus saving time and memory.\n \n-- Later on, it will also allow to decode words using a decoder over the original code of the punctured code.\n+- because it keeps track of the original code, it's possible to get a structured representation of the punctured code, e.g. if one punctures a GRS code and asks for the structured representation of the punctured code one got, a GRS code will be returned.\n+\n``````\n",
    "created_at": "2016-01-13T10:13:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278580",
    "user": "https://github.com/sagetrac-dlucas"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,10 +6,13 @@
 
 - a dedicated encoder to compute the generator matrix of a Punctured Code.
 
+- a dedicate decoder which uses the original code to correct errors
+
 This new structure presents the following advantages:
 
-- it keeps track of the code it comes from. If one punctures a code A, the punctured code he gets will remember it comes from A.
+- it keeps track of the code it comes from. If one punctures a code A, the punctured code one gets will remember it comes from A.
 
 - This allows to perform several operations, like encoding or picking a random element without constructing the generator matrix for the punctured code, thus saving time and memory.
 
-- Later on, it will also allow to decode words using a decoder over the original code of the punctured code.
+- because it keeps track of the original code, it's possible to get a structured representation of the punctured code, e.g. if one punctures a GRS code and asks for the structured representation of the punctured code one got, a GRS code will be returned.
+
``````




---

archive/issue_comments_278581.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/26aae1797b74fb3d27b11d73958884e013c1dc28\">26aae17</a></td><td><code>Fixed conflict after update to 7.1beta0</code></td></tr></table>\n",
    "created_at": "2016-01-27T16:21:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278581",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:11'>Comment 11:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/26aae1797b74fb3d27b11d73958884e013c1dc28">26aae17</a></td><td><code>Fixed conflict after update to 7.1beta0</code></td></tr></table>




---

archive/issue_comments_278582.json:
```json
{
    "body": "Changed commit from **[ca859cb](https://github.com/sagemath/sagetrac-mirror/commit/ca859cbf3e6b86ccc218d6e51813ae45b9babb34)** to **[26aae17](https://github.com/sagemath/sagetrac-mirror/commit/26aae1797b74fb3d27b11d73958884e013c1dc28)**",
    "created_at": "2016-01-27T16:21:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278582",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[ca859cb](https://github.com/sagemath/sagetrac-mirror/commit/ca859cbf3e6b86ccc218d6e51813ae45b9babb34)** to **[26aae17](https://github.com/sagemath/sagetrac-mirror/commit/26aae1797b74fb3d27b11d73958884e013c1dc28)**



---

archive/issue_events_257544.json:
```json
{
    "actor": "https://github.com/sagetrac-dlucas",
    "created_at": "2016-01-27T16:21:48Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "milestone_number": null,
    "milestone_title": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19422#event-257544"
}
```



---

archive/issue_events_257545.json:
```json
{
    "actor": "https://github.com/sagetrac-dlucas",
    "created_at": "2016-01-27T16:21:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "milestone_number": null,
    "milestone_title": "sage-7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19422#event-257545"
}
```



---

archive/issue_comments_278583.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nI updated this ticket to latest beta, and fixed merge conflict.\nIt's still open for review.",
    "created_at": "2016-01-27T16:21:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278583",
    "user": "https://github.com/sagetrac-dlucas"
}
```

<a id='comment:12'>Comment 12:</a>
I updated this ticket to latest beta, and fixed merge conflict.
It's still open for review.



---

archive/issue_comments_278584.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8b654ac829600347c3c9c569269586f3117f44c7\">8b654ac</a></td><td><code>Renamed method precompute and changed its doc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b60ca15874ba350d3e66e0eb1bcebbe4f2ef603b\">b60ca15</a></td><td><code>Rewrote documentation of partial_xgcd and made it a private method</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5ed4ac3227c5d4d360be90fa5e49a340dda36eba\">5ed4ac3</a></td><td><code>Fixed error in error-erasure's decoding radius</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/03c15f3eb5b0a8327f8a801d0cc033809ce3070d\">03c15f3</a></td><td><code>Removed useless backslashes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cc3cb4d76ba72206943bfe1bf6f736085e90d099\">cc3cb4d</a></td><td><code>Rewrote error message in KeyEquationSyndromeDecoder</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a7f3ee1101e5a1ff91bcc5212e016d3cbc08b09f\">a7f3ee1</a></td><td><code>Fixed typos</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c8bc40645e03331fa1aa772e3922795152a205ba\">c8bc406</a></td><td><code>Rewrote some examples</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7cbcca2969f5a72776eaff64951318a6c3c89a84\">7cbcca2</a></td><td><code>Rewrote some sentences</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4aebb5a23a3c571f945bb7da558e03ff4b4c1ace\">4aebb5a</a></td><td><code>Fixed bug related to full codes, plus some minor tweaks</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fa355cd4cbc783dc0435ab62c90f52492af6e64f\">fa355cd</a></td><td><code>Enhanced decoder documentation</code></td></tr></table>\n",
    "created_at": "2016-02-22T13:41:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278584",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:13'>Comment 13:</a>
Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8b654ac829600347c3c9c569269586f3117f44c7">8b654ac</a></td><td><code>Renamed method precompute and changed its doc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b60ca15874ba350d3e66e0eb1bcebbe4f2ef603b">b60ca15</a></td><td><code>Rewrote documentation of partial_xgcd and made it a private method</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5ed4ac3227c5d4d360be90fa5e49a340dda36eba">5ed4ac3</a></td><td><code>Fixed error in error-erasure's decoding radius</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/03c15f3eb5b0a8327f8a801d0cc033809ce3070d">03c15f3</a></td><td><code>Removed useless backslashes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cc3cb4d76ba72206943bfe1bf6f736085e90d099">cc3cb4d</a></td><td><code>Rewrote error message in KeyEquationSyndromeDecoder</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a7f3ee1101e5a1ff91bcc5212e016d3cbc08b09f">a7f3ee1</a></td><td><code>Fixed typos</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c8bc40645e03331fa1aa772e3922795152a205ba">c8bc406</a></td><td><code>Rewrote some examples</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7cbcca2969f5a72776eaff64951318a6c3c89a84">7cbcca2</a></td><td><code>Rewrote some sentences</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4aebb5a23a3c571f945bb7da558e03ff4b4c1ace">4aebb5a</a></td><td><code>Fixed bug related to full codes, plus some minor tweaks</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fa355cd4cbc783dc0435ab62c90f52492af6e64f">fa355cd</a></td><td><code>Enhanced decoder documentation</code></td></tr></table>




---

archive/issue_comments_278585.json:
```json
{
    "body": "Changed commit from **[26aae17](https://github.com/sagemath/sagetrac-mirror/commit/26aae1797b74fb3d27b11d73958884e013c1dc28)** to **[fa355cd](https://github.com/sagemath/sagetrac-mirror/commit/fa355cd4cbc783dc0435ab62c90f52492af6e64f)**",
    "created_at": "2016-02-22T13:41:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278585",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[26aae17](https://github.com/sagemath/sagetrac-mirror/commit/26aae1797b74fb3d27b11d73958884e013c1dc28)** to **[fa355cd](https://github.com/sagemath/sagetrac-mirror/commit/fa355cd4cbc783dc0435ab62c90f52492af6e64f)**



---

archive/issue_comments_278586.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nI fixed a few typos, updated deprecated imports which were breaking doctests.\nI also completely rewrote doctests and documentation of the decoder, using GRS decoders introduced in #19653.\n\nThis is still open for review.",
    "created_at": "2016-02-22T13:42:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278586",
    "user": "https://github.com/sagetrac-dlucas"
}
```

<a id='comment:14'>Comment 14:</a>
I fixed a few typos, updated deprecated imports which were breaking doctests.
I also completely rewrote doctests and documentation of the decoder, using GRS decoders introduced in #19653.

This is still open for review.



---

archive/issue_comments_278587.json:
```json
{
    "body": "Dependencies: **#19653**",
    "created_at": "2016-02-22T13:42:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278587",
    "user": "https://github.com/sagetrac-dlucas"
}
```

Dependencies: **#19653**



---

archive/issue_comments_278588.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a074cb8a53bb85a96e6f8f7abf77a038cbe3ed25\">a074cb8</a></td><td><code>Changed my helper methods into private methods</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6ad583f27736146eb019ba99ecfb54e67c31f5ea\">6ad583f</a></td><td><code>Fixed bug in KeyEquation decoder's decode_to_code, added sanity checks, enhanced doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fca099ed40912d26eff991fc612ee793681000c5\">fca099e</a></td><td><code>Added new sanity check on the output of BW and Gao decoder</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/57dbfbf126d1b4743ae4e6346076d39a30f9835c\">57dbfbf</a></td><td><code>Rewrote random_element method</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7953d60aa6a583aba7767a74bf43194a34383194\">7953d60</a></td><td><code>Proper sanity checks for output of decode_to_* methods</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8673ac587f4e8bece38fc7027c96eef9771c7eec\">8673ac5</a></td><td><code>Optimized a bit polynomial division in Gao and BW</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e1b6b091ee15d723378847bfb00e58d41b37d5ee\">e1b6b09</a></td><td><code>Merged now postive reviewed #19666 and fixed conflicts</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5093dce713233b65314fc6fe2ef666fbca7e1ec9\">5093dce</a></td><td><code>Update to 7.1beta5</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f3b4b11582fd4c2e976d2e0450d0e8699be0272e\">f3b4b11</a></td><td><code>Fixed typo in Guruswami-Sudan doc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5c61b119d82215569131ea6741f5abbc0ef2da2f\">5c61b11</a></td><td><code>Merged dependecies and fixed conflicts</code></td></tr></table>\n",
    "created_at": "2016-02-26T14:37:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278588",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:16'>Comment 16:</a>
Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a074cb8a53bb85a96e6f8f7abf77a038cbe3ed25">a074cb8</a></td><td><code>Changed my helper methods into private methods</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6ad583f27736146eb019ba99ecfb54e67c31f5ea">6ad583f</a></td><td><code>Fixed bug in KeyEquation decoder's decode_to_code, added sanity checks, enhanced doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fca099ed40912d26eff991fc612ee793681000c5">fca099e</a></td><td><code>Added new sanity check on the output of BW and Gao decoder</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/57dbfbf126d1b4743ae4e6346076d39a30f9835c">57dbfbf</a></td><td><code>Rewrote random_element method</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7953d60aa6a583aba7767a74bf43194a34383194">7953d60</a></td><td><code>Proper sanity checks for output of decode_to_* methods</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8673ac587f4e8bece38fc7027c96eef9771c7eec">8673ac5</a></td><td><code>Optimized a bit polynomial division in Gao and BW</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e1b6b091ee15d723378847bfb00e58d41b37d5ee">e1b6b09</a></td><td><code>Merged now postive reviewed #19666 and fixed conflicts</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5093dce713233b65314fc6fe2ef666fbca7e1ec9">5093dce</a></td><td><code>Update to 7.1beta5</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f3b4b11582fd4c2e976d2e0450d0e8699be0272e">f3b4b11</a></td><td><code>Fixed typo in Guruswami-Sudan doc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5c61b119d82215569131ea6741f5abbc0ef2da2f">5c61b11</a></td><td><code>Merged dependecies and fixed conflicts</code></td></tr></table>




---

archive/issue_comments_278589.json:
```json
{
    "body": "Changed commit from **[fa355cd](https://github.com/sagemath/sagetrac-mirror/commit/fa355cd4cbc783dc0435ab62c90f52492af6e64f)** to **[5c61b11](https://github.com/sagemath/sagetrac-mirror/commit/5c61b119d82215569131ea6741f5abbc0ef2da2f)**",
    "created_at": "2016-02-26T14:37:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278589",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[fa355cd](https://github.com/sagemath/sagetrac-mirror/commit/fa355cd4cbc783dc0435ab62c90f52492af6e64f)** to **[5c61b11](https://github.com/sagemath/sagetrac-mirror/commit/5c61b119d82215569131ea6741f5abbc0ef2da2f)**



---

archive/issue_comments_278590.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nI updated this ticket to the latest beta and fixed conflicts. This is still open for review.",
    "created_at": "2016-02-26T14:38:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278590",
    "user": "https://github.com/sagetrac-dlucas"
}
```

<a id='comment:17'>Comment 17:</a>
I updated this ticket to the latest beta and fixed conflicts. This is still open for review.



---

archive/issue_comments_278591.json:
```json
{
    "body": "Changed commit from **[5c61b11](https://github.com/sagemath/sagetrac-mirror/commit/5c61b119d82215569131ea6741f5abbc0ef2da2f)** to **[69da167](https://github.com/sagemath/sagetrac-mirror/commit/69da167f0a9d4a0fc68e0846416577a5ddb44eba)**",
    "created_at": "2016-03-31T13:39:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278591",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5c61b11](https://github.com/sagemath/sagetrac-mirror/commit/5c61b119d82215569131ea6741f5abbc0ef2da2f)** to **[69da167](https://github.com/sagemath/sagetrac-mirror/commit/69da167f0a9d4a0fc68e0846416577a5ddb44eba)**



---

archive/issue_comments_278592.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f2e8c288ca6d9ffa4e628c5ae42ed1769411094e\">f2e8c28</a></td><td><code>Merge branch 'develop' into punctured_code</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/69da167f0a9d4a0fc68e0846416577a5ddb44eba\">69da167</a></td><td><code>Fixed broken doctest</code></td></tr></table>\n",
    "created_at": "2016-03-31T13:39:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278592",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:18'>Comment 18:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f2e8c288ca6d9ffa4e628c5ae42ed1769411094e">f2e8c28</a></td><td><code>Merge branch 'develop' into punctured_code</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/69da167f0a9d4a0fc68e0846416577a5ddb44eba">69da167</a></td><td><code>Fixed broken doctest</code></td></tr></table>




---

archive/issue_events_257546.json:
```json
{
    "actor": "https://github.com/sagetrac-dlucas",
    "created_at": "2016-03-31T13:41:37Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "milestone_number": null,
    "milestone_title": "sage-7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19422#event-257546"
}
```



---

archive/issue_events_257547.json:
```json
{
    "actor": "https://github.com/sagetrac-dlucas",
    "created_at": "2016-03-31T13:41:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "milestone_number": null,
    "milestone_title": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19422#event-257547"
}
```



---

archive/issue_comments_278593.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nI updated this ticket to 7.2beta1 and fixed a broken doctest.\nThis is still open for review.",
    "created_at": "2016-03-31T13:41:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278593",
    "user": "https://github.com/sagetrac-dlucas"
}
```

<a id='comment:19'>Comment 19:</a>
I updated this ticket to 7.2beta1 and fixed a broken doctest.
This is still open for review.



---

archive/issue_comments_278594.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nI start the review even though the ticket is not updated to the latest beta. Despite my comments, note that I realize that building this framework must have been a huge work, and that I found it really user-friendly =)\n\n*** General remarks ***\n\n* As I read the (quite long) name of the canonical decoder of your punctured code (`PuncturedCodeOriginalCodeDecoder`), I asked myself the following question: if I understand well your naming convention, decoders are named `Code`+`DecoderName`. Is it necessary to have the `Code` suffix ? My point is that it could be sufficient to only keep `DecoderName`, because if a user wants to know what kind of code the decoder is applied to, he just needs to call `Dec.code()`.\n* You consider puncturing points as a list. Would it be better (and more confortable to compute unions and intersections) to consider them a set ?\n\n*** index.rst ***\n\n* why do you remove `sage/coding/source_coding/huffman` ?\n\n*** src/sage/coding/grs.py ***\n\n* The method `_punctured_form(self, points)` doesn't work if `points` is not sorted (e.g. `C_grs._punctured_form([4,3])`). That's due to your strange way to select the evaluation points and multipliers. I think you should remove the block:\n\n```\nstart = 0\nfor i in points:\n    punctured_alphas += alphas[start:i]\n    punctured_col_mults += col_mults[start:i]\n    start = i + 1\n    punctured_alphas += alphas[start:n]\n    punctured_col_mults += col_mults[start:n]\n```\n\nand replace it by something like (that's only a suggestion):\n\n```\npunctured_alphas = [ alphas[i] for i in range(n) if i not in points ]\npunctured_col_mults = [ col_mults[i] for i in range(n) if i not in points ]\n```\n* In the same method, if I understand it well, this block:\n\n```\nif G.rank() != dimension:\n    G = G.echelon_form()\n    for i in range(dimension):\n        if G[i] == 0:\n        dimension -= 1\n```\n\naims at computing the code dimension (stored in `dimension`). In fact, you already computed it in `G.rank()`.\n\n*** src/sage/coding/linear_code.py ***\n\n* in `_punctured_form` method, `G.echelon_form()` puts all the zero lines at the bottom of the new matrix. Thus, if you want to get the non-zero part of the matrix, I think you could simply write\n\n```\n    k = G.rank()\n    return LinearCode(G[:k])\n```",
    "created_at": "2016-04-16T11:58:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278594",
    "user": "https://github.com/jlavauzelle"
}
```

<a id='comment:20'>Comment 20:</a>
I start the review even though the ticket is not updated to the latest beta. Despite my comments, note that I realize that building this framework must have been a huge work, and that I found it really user-friendly =)

*** General remarks ***

* As I read the (quite long) name of the canonical decoder of your punctured code (`PuncturedCodeOriginalCodeDecoder`), I asked myself the following question: if I understand well your naming convention, decoders are named `Code`+`DecoderName`. Is it necessary to have the `Code` suffix ? My point is that it could be sufficient to only keep `DecoderName`, because if a user wants to know what kind of code the decoder is applied to, he just needs to call `Dec.code()`.
* You consider puncturing points as a list. Would it be better (and more confortable to compute unions and intersections) to consider them a set ?

*** index.rst ***

* why do you remove `sage/coding/source_coding/huffman` ?

*** src/sage/coding/grs.py ***

* The method `_punctured_form(self, points)` doesn't work if `points` is not sorted (e.g. `C_grs._punctured_form([4,3])`). That's due to your strange way to select the evaluation points and multipliers. I think you should remove the block:

```
start = 0
for i in points:
    punctured_alphas += alphas[start:i]
    punctured_col_mults += col_mults[start:i]
    start = i + 1
    punctured_alphas += alphas[start:n]
    punctured_col_mults += col_mults[start:n]
```

and replace it by something like (that's only a suggestion):

```
punctured_alphas = [ alphas[i] for i in range(n) if i not in points ]
punctured_col_mults = [ col_mults[i] for i in range(n) if i not in points ]
```
* In the same method, if I understand it well, this block:

```
if G.rank() != dimension:
    G = G.echelon_form()
    for i in range(dimension):
        if G[i] == 0:
        dimension -= 1
```

aims at computing the code dimension (stored in `dimension`). In fact, you already computed it in `G.rank()`.

*** src/sage/coding/linear_code.py ***

* in `_punctured_form` method, `G.echelon_form()` puts all the zero lines at the bottom of the new matrix. Thus, if you want to get the non-zero part of the matrix, I think you could simply write

```
    k = G.rank()
    return LinearCode(G[:k])
```



---

archive/issue_comments_278595.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\n*** src/sage/coding/punctured_code.py ***\n--- function `puncture` ---\n- same strange way to compute the non-punctured positions than in grs.py. For example, it doesn't work with:\n\n```\nC = codes.RandomLinearCode(11, 5, GF(7))\nCp = codes.PuncturedCode(C, [4,3])\nv = vector(GF(7), (2,3,0,2,1,5,1,5,6,5,3))\nsage.coding.punctured_code.puncture(v, [4,3], Cp)\n```\n\n--- class `PuncturedCode` ---\n- constructor:\n`positions = list(set(positions))` is a short (maybe dirty) way to do:\n\n```\nunique_positions = set()\nfor i in positions:\n    unique_positions.add(i)\npositions = []\nfor i in unique_positions:\n   positions.append(i)\n```\nand it looks to sort the elements as well =) Also remark that you don't have this \"multiplicity\" issue when using Python sets (instead of lists) for storing puncturing points.\n- in encode() method, you missed parentheses after `self.punctured_positions` in `return puncture(c, self.punctured_positions, self)`\n- in structured_representation(self) method: in the doc, you wrote \"A punctured GRS code is still a punctured code\" but I think you meant \"still a GRS code\". Moreover, I don't understand what you mean by \"Which is not the case for generic linear codes\": punctured linear codes are still linear codes.\n- still in structured_representation(self) method, I tried this:\n\n```\nsage: C = codes.GeneralizedReedSolomonCode(GF(7).list(), 4)\nsage: P = codes.PuncturedCode(C, [1,3])\nsage: Q = codes.PuncturedCode(P, [1,3])\nsage: P.length()\n5\nsage: Q.length()\n3\nsage: P.structured_representation()\n[5, 4, 2] Generalized Reed-Solomon Code over Finite Field of size 7\nsage: Q.structured_representation()\n[5, 3, 3] Generalized Reed-Solomon Code over Finite Field of size 7\n```\nSo, double puncturing works well (`Q` seems to be the right code), but `structured_representation()` doesn't build the right Reed-Solomon code.\n\n--- class `PuncturedCodePuncturedMatrixEncoder` ---\n- in `GeneratorMatrix`: same comment as in linear_code.py, I think echelon_form()do the job and you just need to keep the `k` first rows.\n\n--- class `PuncturedCodeOriginalCodeDecoder` ---\n- sage is stuck (infinite loop ?) when I run this:\n\n```\nsage: R = codes.RandomLinearCode(11, 5, GF(7))\nsage: P = codes.PuncturedCode(R, [1,3])\nsage: P.decoder()\n```\n- l.444: you wrote ``'random_values'`` instead of ``'random-values'``\n- in the constructor: you have a test variable `error_erasure` to which you assign `0` and `1`. Maybe `True` and `False` are more explicit.\n- in `decode_to_code`: l.600, I think you forgot to increment `shift` (otherwise I misunderstood the use of `shift`)\n- maybe add an `elif self._strategy == 'try-all'` at line 643.\n- l.670: `ValueError(\"The number of erasures exceed decoding capability\")` --> exceeds\n- l.672: decoding capability must be:\n\n```\n    return (diff - punctured -1) // 2\n```\n- l.665; you could have negative radius with:\n\n```\nif self._strategy != 'try-all' and \"error-erasure\" not in D.decoder_type():\n    return D.decoding_radius() - punctured\n```\n- I don't understand the last `return D.decoding_radius()`, line 675. To which case does it apply ?",
    "created_at": "2016-04-16T12:01:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278595",
    "user": "https://github.com/jlavauzelle"
}
```

<a id='comment:21'>Comment 21:</a>
*** src/sage/coding/punctured_code.py ***
--- function `puncture` ---
- same strange way to compute the non-punctured positions than in grs.py. For example, it doesn't work with:

```
C = codes.RandomLinearCode(11, 5, GF(7))
Cp = codes.PuncturedCode(C, [4,3])
v = vector(GF(7), (2,3,0,2,1,5,1,5,6,5,3))
sage.coding.punctured_code.puncture(v, [4,3], Cp)
```

--- class `PuncturedCode` ---
- constructor:
`positions = list(set(positions))` is a short (maybe dirty) way to do:

```
unique_positions = set()
for i in positions:
    unique_positions.add(i)
positions = []
for i in unique_positions:
   positions.append(i)
```
and it looks to sort the elements as well =) Also remark that you don't have this "multiplicity" issue when using Python sets (instead of lists) for storing puncturing points.
- in encode() method, you missed parentheses after `self.punctured_positions` in `return puncture(c, self.punctured_positions, self)`
- in structured_representation(self) method: in the doc, you wrote "A punctured GRS code is still a punctured code" but I think you meant "still a GRS code". Moreover, I don't understand what you mean by "Which is not the case for generic linear codes": punctured linear codes are still linear codes.
- still in structured_representation(self) method, I tried this:

```
sage: C = codes.GeneralizedReedSolomonCode(GF(7).list(), 4)
sage: P = codes.PuncturedCode(C, [1,3])
sage: Q = codes.PuncturedCode(P, [1,3])
sage: P.length()
5
sage: Q.length()
3
sage: P.structured_representation()
[5, 4, 2] Generalized Reed-Solomon Code over Finite Field of size 7
sage: Q.structured_representation()
[5, 3, 3] Generalized Reed-Solomon Code over Finite Field of size 7
```
So, double puncturing works well (`Q` seems to be the right code), but `structured_representation()` doesn't build the right Reed-Solomon code.

--- class `PuncturedCodePuncturedMatrixEncoder` ---
- in `GeneratorMatrix`: same comment as in linear_code.py, I think echelon_form()do the job and you just need to keep the `k` first rows.

--- class `PuncturedCodeOriginalCodeDecoder` ---
- sage is stuck (infinite loop ?) when I run this:

```
sage: R = codes.RandomLinearCode(11, 5, GF(7))
sage: P = codes.PuncturedCode(R, [1,3])
sage: P.decoder()
```
- l.444: you wrote ``'random_values'`` instead of ``'random-values'``
- in the constructor: you have a test variable `error_erasure` to which you assign `0` and `1`. Maybe `True` and `False` are more explicit.
- in `decode_to_code`: l.600, I think you forgot to increment `shift` (otherwise I misunderstood the use of `shift`)
- maybe add an `elif self._strategy == 'try-all'` at line 643.
- l.670: `ValueError("The number of erasures exceed decoding capability")` --> exceeds
- l.672: decoding capability must be:

```
    return (diff - punctured -1) // 2
```
- l.665; you could have negative radius with:

```
if self._strategy != 'try-all' and "error-erasure" not in D.decoder_type():
    return D.decoding_radius() - punctured
```
- I don't understand the last `return D.decoding_radius()`, line 675. To which case does it apply ?



---

archive/issue_events_257548.json:
```json
{
    "actor": "https://github.com/jlavauzelle",
    "created_at": "2016-04-16T12:01:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19422#event-257548"
}
```



---

archive/issue_events_257549.json:
```json
{
    "actor": "https://github.com/jlavauzelle",
    "created_at": "2016-04-16T12:01:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19422#event-257549"
}
```



---

archive/issue_comments_278596.json:
```json
{
    "body": "Changed commit from **[69da167](https://github.com/sagemath/sagetrac-mirror/commit/69da167f0a9d4a0fc68e0846416577a5ddb44eba)** to **[659105c](https://github.com/sagemath/sagetrac-mirror/commit/659105c517f3e6115e70a9f502f3681ca9075086)**",
    "created_at": "2016-04-16T15:07:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278596",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[69da167](https://github.com/sagemath/sagetrac-mirror/commit/69da167f0a9d4a0fc68e0846416577a5ddb44eba)** to **[659105c](https://github.com/sagemath/sagetrac-mirror/commit/659105c517f3e6115e70a9f502f3681ca9075086)**



---

archive/issue_comments_278597.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/050d00d3b35af730369751ebe73cf8853831c572\">050d00d</a></td><td><code>Merge branch 'develop' into punctured_code</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/31fbb4f82d74660cac0da537ac6573a65d4752ef\">31fbb4f</a></td><td><code>positions is now a set instead of a list</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e3f8f6bcec65dc3297c4338726a1816e91ef280d\">e3f8f6b</a></td><td><code>Reinstated huffman in index.rst</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/564760f09872f23f4ac3a193e0396102bfd05066\">564760f</a></td><td><code>Rewrote _punctured_form in grs.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/07463851c07f120c4d76071e53b1f4089d5433a8\">0746385</a></td><td><code>Changed method _punctured_form in linear_code.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a27ca48c5ab5a498c7c9630d81a95b11e32c4da0\">a27ca48</a></td><td><code>Rewrote method puncture in punctured_code</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b0decac025340646e043d27d0c2615cb14d1c281\">b0decac</a></td><td><code>Changed docstring in structured_representation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d16f13a43bd99b15b3a87fb29bd01f723dbc1c49\">d16f13a</a></td><td><code>Simplified generator_matrix computation in the encoder</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/21b357081ae6373a4c66b481afa0229aef05f12a\">21b3570</a></td><td><code>Added generic decoders as available decoders for punctured codes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/659105c517f3e6115e70a9f502f3681ca9075086\">659105c</a></td><td><code>Some tweaking to punctured_code.py</code></td></tr></table>\n",
    "created_at": "2016-04-16T15:07:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278597",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:22'>Comment 22:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/050d00d3b35af730369751ebe73cf8853831c572">050d00d</a></td><td><code>Merge branch 'develop' into punctured_code</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/31fbb4f82d74660cac0da537ac6573a65d4752ef">31fbb4f</a></td><td><code>positions is now a set instead of a list</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e3f8f6bcec65dc3297c4338726a1816e91ef280d">e3f8f6b</a></td><td><code>Reinstated huffman in index.rst</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/564760f09872f23f4ac3a193e0396102bfd05066">564760f</a></td><td><code>Rewrote _punctured_form in grs.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/07463851c07f120c4d76071e53b1f4089d5433a8">0746385</a></td><td><code>Changed method _punctured_form in linear_code.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a27ca48c5ab5a498c7c9630d81a95b11e32c4da0">a27ca48</a></td><td><code>Rewrote method puncture in punctured_code</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b0decac025340646e043d27d0c2615cb14d1c281">b0decac</a></td><td><code>Changed docstring in structured_representation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d16f13a43bd99b15b3a87fb29bd01f723dbc1c49">d16f13a</a></td><td><code>Simplified generator_matrix computation in the encoder</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/21b357081ae6373a4c66b481afa0229aef05f12a">21b3570</a></td><td><code>Added generic decoders as available decoders for punctured codes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/659105c517f3e6115e70a9f502f3681ca9075086">659105c</a></td><td><code>Some tweaking to punctured_code.py</code></td></tr></table>




---

archive/issue_events_257550.json:
```json
{
    "actor": "https://github.com/sagetrac-dlucas",
    "created_at": "2016-04-16T15:14:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19422#event-257550"
}
```



---

archive/issue_events_257551.json:
```json
{
    "actor": "https://github.com/sagetrac-dlucas",
    "created_at": "2016-04-16T15:14:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19422#event-257551"
}
```



---

archive/issue_comments_278598.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nHello Julien,\n\nThanks for your thorough review!\n\nI followed all your suggestions (good idea to change the set of points to a list!).\nSome remarks/answers follow:\n\n- As `positions` is now a set, the test of duplicate positions in the constructor is no longer needed.\n- Open question: now that I changed `positions` to a set, the `str` methods return the ugly str format of a set: `set([3,4])` for `{3, 4}`. Which means the string representation of a punctured code now states `PuncturedCode coming from ... punctured in position(s) set([pos])` which is quite ugly... So, do you think I should keep that, or, only for these `str` methods return a list while it might be a bit confusing for the user because he/she entered a set a got a list?\n\n> sage is stuck (infinite loop ?) when I run this: \n\nOh, yes, it's not an infinite loop! It's because it builds the original decoder of your code, namely a `SyndromeDecoder` for a linear code over GF(7), length 11, dimension 5... Which takes a while because of the table of syndromes which is heavy to build.\n\nBest,\n\nDavid",
    "created_at": "2016-04-16T15:14:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278598",
    "user": "https://github.com/sagetrac-dlucas"
}
```

<a id='comment:23'>Comment 23:</a>
Hello Julien,

Thanks for your thorough review!

I followed all your suggestions (good idea to change the set of points to a list!).
Some remarks/answers follow:

- As `positions` is now a set, the test of duplicate positions in the constructor is no longer needed.
- Open question: now that I changed `positions` to a set, the `str` methods return the ugly str format of a set: `set([3,4])` for `{3, 4}`. Which means the string representation of a punctured code now states `PuncturedCode coming from ... punctured in position(s) set([pos])` which is quite ugly... So, do you think I should keep that, or, only for these `str` methods return a list while it might be a bit confusing for the user because he/she entered a set a got a list?

> sage is stuck (infinite loop ?) when I run this: 

Oh, yes, it's not an infinite loop! It's because it builds the original decoder of your code, namely a `SyndromeDecoder` for a linear code over GF(7), length 11, dimension 5... Which takes a while because of the table of syndromes which is heavy to build.

Best,

David



---

archive/issue_comments_278599.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nI'd prefer it if the user could enter either a set or a list of punctured positions, or a single position. The internal representation as a set probably makes sense though. I consider str and repr as just pretty-printing, so formatting as a (sorted) list make sense.",
    "created_at": "2016-04-16T16:13:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278599",
    "user": "https://github.com/johanrosenkilde"
}
```

<a id='comment:24'>Comment 24:</a>
I'd prefer it if the user could enter either a set or a list of punctured positions, or a single position. The internal representation as a set probably makes sense though. I consider str and repr as just pretty-printing, so formatting as a (sorted) list make sense.



---

archive/issue_comments_278600.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cef203fb5010d120386968f432648a60338c9fcc\">cef203f</a></td><td><code>Reinstated list as an allowed input type for punctured codes. Changed str methods for punctured codes.</code></td></tr></table>\n",
    "created_at": "2016-04-18T09:19:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278600",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:25'>Comment 25:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cef203fb5010d120386968f432648a60338c9fcc">cef203f</a></td><td><code>Reinstated list as an allowed input type for punctured codes. Changed str methods for punctured codes.</code></td></tr></table>




---

archive/issue_comments_278601.json:
```json
{
    "body": "Changed commit from **[659105c](https://github.com/sagemath/sagetrac-mirror/commit/659105c517f3e6115e70a9f502f3681ca9075086)** to **[cef203f](https://github.com/sagemath/sagetrac-mirror/commit/cef203fb5010d120386968f432648a60338c9fcc)**",
    "created_at": "2016-04-18T09:19:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278601",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[659105c](https://github.com/sagemath/sagetrac-mirror/commit/659105c517f3e6115e70a9f502f3681ca9075086)** to **[cef203f](https://github.com/sagemath/sagetrac-mirror/commit/cef203fb5010d120386968f432648a60338c9fcc)**



---

archive/issue_comments_278602.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nHello,\n\nThe user can now pass either an Integer, an int, a list or a set to `PuncturedCode`. The internal representation is a set. I added a few extra sanitization tests, so if one passes a list/set of anything but ints/Integers, an exception is raised.\n\nI also reinstated the list representation of the punctured positions for str methods.\n\nRemark:\n\nfor now, `punctured_positions` (the getter for `positions`) always return a set, even if one passed an int/Integer/list at construction time. I think it's fine like that, but if you think it can be confusing/annoying for the user, I can change its behaviour so it returns the exact data one passed at construction time.\n\nThis is still open for review.\n\nBest,\n\nDavid",
    "created_at": "2016-04-18T09:23:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278602",
    "user": "https://github.com/sagetrac-dlucas"
}
```

<a id='comment:26'>Comment 26:</a>
Hello,

The user can now pass either an Integer, an int, a list or a set to `PuncturedCode`. The internal representation is a set. I added a few extra sanitization tests, so if one passes a list/set of anything but ints/Integers, an exception is raised.

I also reinstated the list representation of the punctured positions for str methods.

Remark:

for now, `punctured_positions` (the getter for `positions`) always return a set, even if one passed an int/Integer/list at construction time. I think it's fine like that, but if you think it can be confusing/annoying for the user, I can change its behaviour so it returns the exact data one passed at construction time.

This is still open for review.

Best,

David



---

archive/issue_comments_278603.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nAwesome!\n\n> for now, `punctured_positions` (the getter for `positions`) always return a set, even if one passed an int/Integer/list at construction time. I think it's fine like that, but if you think it can be confusing/annoying for the user, I can change its behaviour so it returns the exact data one passed at construction time.\n\nI think this makes complete sense.",
    "created_at": "2016-04-18T11:34:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278603",
    "user": "https://github.com/johanrosenkilde"
}
```

<a id='comment:27'>Comment 27:</a>
Awesome!

> for now, `punctured_positions` (the getter for `positions`) always return a set, even if one passed an int/Integer/list at construction time. I think it's fine like that, but if you think it can be confusing/annoying for the user, I can change its behaviour so it returns the exact data one passed at construction time.

I think this makes complete sense.



---

archive/issue_comments_278604.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2d13b55e6603e014bc7c79d3852384f3a314677f\">2d13b55</a></td><td><code>Changed punctured method to support a list of vectors</code></td></tr></table>\n",
    "created_at": "2016-04-19T12:12:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278604",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:28'>Comment 28:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2d13b55e6603e014bc7c79d3852384f3a314677f">2d13b55</a></td><td><code>Changed punctured method to support a list of vectors</code></td></tr></table>




---

archive/issue_comments_278605.json:
```json
{
    "body": "Changed commit from **[cef203f](https://github.com/sagemath/sagetrac-mirror/commit/cef203fb5010d120386968f432648a60338c9fcc)** to **[2d13b55](https://github.com/sagemath/sagetrac-mirror/commit/2d13b55e6603e014bc7c79d3852384f3a314677f)**",
    "created_at": "2016-04-19T12:12:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278605",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[cef203f](https://github.com/sagemath/sagetrac-mirror/commit/cef203fb5010d120386968f432648a60338c9fcc)** to **[2d13b55](https://github.com/sagemath/sagetrac-mirror/commit/2d13b55e6603e014bc7c79d3852384f3a314677f)**



---

archive/issue_comments_278606.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\nHello,\n\nI fixed a bug: Punctured Code's decoder was not working if its original decoder was a list decoder.\nI changed `puncture` method (which is BTW now called `_puncture` as it's a helper function): it can now puncture a list of vectors or a vector. This takes care of the list-decoding issue.\n\nBest,\n\nDavid",
    "created_at": "2016-04-19T12:14:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278606",
    "user": "https://github.com/sagetrac-dlucas"
}
```

<a id='comment:29'>Comment 29:</a>
Hello,

I fixed a bug: Punctured Code's decoder was not working if its original decoder was a list decoder.
I changed `puncture` method (which is BTW now called `_puncture` as it's a helper function): it can now puncture a list of vectors or a vector. This takes care of the list-decoding issue.

Best,

David



---

archive/issue_comments_278607.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/771f3fee348ec72cbbcc43ef292e01e3c36fa5ae\">771f3fe</a></td><td><code>decoder_type works now properly on uninstantiated classes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0d8ed860e6fc00db358323a9e81599ff057a96d5\">0d8ed86</a></td><td><code>Merge branch 'develop' into decoder_type_method_for_uninstanciated_classes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c2777fff9335498b434d4ed260bfbacc4efeb079\">c2777ff</a></td><td><code>Merge branch 'decoder_type_method_for_uninstanciated_classes' into talk_secret</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/021b84199c943ece656ff79416864d261c885f65\">021b841</a></td><td><code>Merge branch 'punctured_code' into talk_secret</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5bb39feb29a9c8da1ea503b4a01527b312520aaa\">5bb39fe</a></td><td><code>Fixed bug related to sets and sorting in decode_to_code</code></td></tr></table>\n",
    "created_at": "2016-04-19T14:54:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278607",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:30'>Comment 30:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/771f3fee348ec72cbbcc43ef292e01e3c36fa5ae">771f3fe</a></td><td><code>decoder_type works now properly on uninstantiated classes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0d8ed860e6fc00db358323a9e81599ff057a96d5">0d8ed86</a></td><td><code>Merge branch 'develop' into decoder_type_method_for_uninstanciated_classes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c2777fff9335498b434d4ed260bfbacc4efeb079">c2777ff</a></td><td><code>Merge branch 'decoder_type_method_for_uninstanciated_classes' into talk_secret</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/021b84199c943ece656ff79416864d261c885f65">021b841</a></td><td><code>Merge branch 'punctured_code' into talk_secret</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5bb39feb29a9c8da1ea503b4a01527b312520aaa">5bb39fe</a></td><td><code>Fixed bug related to sets and sorting in decode_to_code</code></td></tr></table>




---

archive/issue_comments_278608.json:
```json
{
    "body": "Changed commit from **[2d13b55](https://github.com/sagemath/sagetrac-mirror/commit/2d13b55e6603e014bc7c79d3852384f3a314677f)** to **[5bb39fe](https://github.com/sagemath/sagetrac-mirror/commit/5bb39feb29a9c8da1ea503b4a01527b312520aaa)**",
    "created_at": "2016-04-19T14:54:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278608",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2d13b55](https://github.com/sagemath/sagetrac-mirror/commit/2d13b55e6603e014bc7c79d3852384f3a314677f)** to **[5bb39fe](https://github.com/sagemath/sagetrac-mirror/commit/5bb39feb29a9c8da1ea503b4a01527b312520aaa)**



---

archive/issue_comments_278609.json:
```json
{
    "body": "Changed branch from **[u/dlucas/punctured_codes](https://github.com/sagemath/sagetrac-mirror/tree/u/dlucas/punctured_codes)** to **[u/dlucas/punctured_code](https://github.com/sagemath/sagetrac-mirror/tree/u/dlucas/punctured_code)**",
    "created_at": "2016-04-19T14:59:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278609",
    "user": "https://github.com/sagetrac-dlucas"
}
```

Changed branch from **[u/dlucas/punctured_codes](https://github.com/sagemath/sagetrac-mirror/tree/u/dlucas/punctured_codes)** to **[u/dlucas/punctured_code](https://github.com/sagemath/sagetrac-mirror/tree/u/dlucas/punctured_code)**



---

archive/issue_comments_278610.json:
```json
{
    "body": "Changed commit from **[5bb39fe](https://github.com/sagemath/sagetrac-mirror/commit/5bb39feb29a9c8da1ea503b4a01527b312520aaa)** to none",
    "created_at": "2016-04-19T14:59:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278610",
    "user": "https://github.com/sagetrac-dlucas"
}
```

Changed commit from **[5bb39fe](https://github.com/sagemath/sagetrac-mirror/commit/5bb39feb29a9c8da1ea503b4a01527b312520aaa)** to none



---

archive/issue_comments_278611.json:
```json
{
    "body": "<a id='comment:32'>Comment 32:</a>\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/564760f09872f23f4ac3a193e0396102bfd05066\">564760f</a></td><td><code>Rewrote _punctured_form in grs.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/07463851c07f120c4d76071e53b1f4089d5433a8\">0746385</a></td><td><code>Changed method _punctured_form in linear_code.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a27ca48c5ab5a498c7c9630d81a95b11e32c4da0\">a27ca48</a></td><td><code>Rewrote method puncture in punctured_code</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b0decac025340646e043d27d0c2615cb14d1c281\">b0decac</a></td><td><code>Changed docstring in structured_representation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d16f13a43bd99b15b3a87fb29bd01f723dbc1c49\">d16f13a</a></td><td><code>Simplified generator_matrix computation in the encoder</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/21b357081ae6373a4c66b481afa0229aef05f12a\">21b3570</a></td><td><code>Added generic decoders as available decoders for punctured codes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/659105c517f3e6115e70a9f502f3681ca9075086\">659105c</a></td><td><code>Some tweaking to punctured_code.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cef203fb5010d120386968f432648a60338c9fcc\">cef203f</a></td><td><code>Reinstated list as an allowed input type for punctured codes. Changed str methods for punctured codes.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2d13b55e6603e014bc7c79d3852384f3a314677f\">2d13b55</a></td><td><code>Changed punctured method to support a list of vectors</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/36e71c57401929089bc1938aa016b251b54f8916\">36e71c5</a></td><td><code>Fixed bug related to sets and sorting in decode_to_code</code></td></tr></table>\n",
    "created_at": "2016-04-19T14:59:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278611",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:32'>Comment 32:</a>
Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/564760f09872f23f4ac3a193e0396102bfd05066">564760f</a></td><td><code>Rewrote _punctured_form in grs.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/07463851c07f120c4d76071e53b1f4089d5433a8">0746385</a></td><td><code>Changed method _punctured_form in linear_code.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a27ca48c5ab5a498c7c9630d81a95b11e32c4da0">a27ca48</a></td><td><code>Rewrote method puncture in punctured_code</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b0decac025340646e043d27d0c2615cb14d1c281">b0decac</a></td><td><code>Changed docstring in structured_representation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d16f13a43bd99b15b3a87fb29bd01f723dbc1c49">d16f13a</a></td><td><code>Simplified generator_matrix computation in the encoder</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/21b357081ae6373a4c66b481afa0229aef05f12a">21b3570</a></td><td><code>Added generic decoders as available decoders for punctured codes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/659105c517f3e6115e70a9f502f3681ca9075086">659105c</a></td><td><code>Some tweaking to punctured_code.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cef203fb5010d120386968f432648a60338c9fcc">cef203f</a></td><td><code>Reinstated list as an allowed input type for punctured codes. Changed str methods for punctured codes.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2d13b55e6603e014bc7c79d3852384f3a314677f">2d13b55</a></td><td><code>Changed punctured method to support a list of vectors</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/36e71c57401929089bc1938aa016b251b54f8916">36e71c5</a></td><td><code>Fixed bug related to sets and sorting in decode_to_code</code></td></tr></table>




---

archive/issue_comments_278612.json:
```json
{
    "body": "Commit: **[36e71c5](https://github.com/sagemath/sagetrac-mirror/commit/36e71c57401929089bc1938aa016b251b54f8916)**",
    "created_at": "2016-04-19T14:59:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278612",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[36e71c5](https://github.com/sagemath/sagetrac-mirror/commit/36e71c57401929089bc1938aa016b251b54f8916)**



---

archive/issue_comments_278613.json:
```json
{
    "body": "<a id='comment:33'>Comment 33:</a>\nSorry, I messed up with my git branches in the push before that.\nAnyway, my last commit fixes a bug related to `decode_to_code`: the loops I was using to insert elements in lists were failing because they were expecting to receive the positions to insert as a sorted list of positions.\nI wrote a helper functions to deal with this, and it now works fine.\nThis is still open for review (and this time, I cannot find any more issues).\n\nBest,\n\nDavid",
    "created_at": "2016-04-19T15:02:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278613",
    "user": "https://github.com/sagetrac-dlucas"
}
```

<a id='comment:33'>Comment 33:</a>
Sorry, I messed up with my git branches in the push before that.
Anyway, my last commit fixes a bug related to `decode_to_code`: the loops I was using to insert elements in lists were failing because they were expecting to receive the positions to insert as a sorted list of positions.
I wrote a helper functions to deal with this, and it now works fine.
This is still open for review (and this time, I cannot find any more issues).

Best,

David



---

archive/issue_comments_278614.json:
```json
{
    "body": "<a id='comment:34'>Comment 34:</a>\nHi David,\n\nA few remarks -- the last ones, I hope:\n\n\n- in `structured_representation` method: it doesn't work when one concatenates puncturings. For example, the following script\n\n```\n    C = codes.GeneralizedReedSolomonCode(GF(7).list(), 4)\n    P = codes.PuncturedCode(C, [0,6])\n    D = P.structured_representation()\n    P2 = codes.PuncturedCode(P, [0,4])\n    D2 = P2.structured_representation()\n```\nfails at fifth line (so double puncturing actually works, only `structured_representation` crashes). From the crash log, it seems that you don't build the right set of `pts`.\n\n- in `PuncturedCodePuncturedMatrixEncoder`, one can construct this encoder while passing as argument a code which is not a punctured one. As a direct consequence, this scripts fails:\n\n```\n    C = codes.GeneralizedReedSolomonCode(GF(7).list(), 4)\n    E = codes.encoders.PuncturedCodePuncturedMatrixEncoder(C)\n    G = E.generator_matrix()\n```\nThe question is: is it the user's mistake, or should the code handle it ? Maybe it's reasonable to throw an error.\n\n\n- same remark for your decoder: one can pass a non-punctured code as parameter.\n\n- in `__init__` function of `PuncturedCodeOriginalCodeDecoder`, maybe it is better to use `True/False` boolean values instead of `error_erasure = 0` and `error_erasure = 1`.\n\n- I also prefer the compact notation:\n\n```\n    e_list = [ one if i in pts else zero for i in range(Cor.length()) ]\n```\ninstead of:\n\n```\n    e_list = []\n    for i in range(Cor.length()):\n        if i in pts:\n            e_list.append(one)\n        else:\n            e_list.append(zero)\n```\n\n\n- finally, a typo, l.441 : default instead of dafault\n\nI did not perform exhaustive tests of all the combinations of codes/encoders/decoders/strategies, because it is too long. So given the complexity of the feature you're trying to implement, it's still possible there remains some minor errors -- especially with extreme settings -- but maybe a real deep use of this class (by actual users) could make them appear more easily.\n\nThus, when you're done fixing the previous errors, I give the green light.\n\nJulien",
    "created_at": "2016-05-22T13:03:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278614",
    "user": "https://github.com/jlavauzelle"
}
```

<a id='comment:34'>Comment 34:</a>
Hi David,

A few remarks -- the last ones, I hope:


- in `structured_representation` method: it doesn't work when one concatenates puncturings. For example, the following script

```
    C = codes.GeneralizedReedSolomonCode(GF(7).list(), 4)
    P = codes.PuncturedCode(C, [0,6])
    D = P.structured_representation()
    P2 = codes.PuncturedCode(P, [0,4])
    D2 = P2.structured_representation()
```
fails at fifth line (so double puncturing actually works, only `structured_representation` crashes). From the crash log, it seems that you don't build the right set of `pts`.

- in `PuncturedCodePuncturedMatrixEncoder`, one can construct this encoder while passing as argument a code which is not a punctured one. As a direct consequence, this scripts fails:

```
    C = codes.GeneralizedReedSolomonCode(GF(7).list(), 4)
    E = codes.encoders.PuncturedCodePuncturedMatrixEncoder(C)
    G = E.generator_matrix()
```
The question is: is it the user's mistake, or should the code handle it ? Maybe it's reasonable to throw an error.


- same remark for your decoder: one can pass a non-punctured code as parameter.

- in `__init__` function of `PuncturedCodeOriginalCodeDecoder`, maybe it is better to use `True/False` boolean values instead of `error_erasure = 0` and `error_erasure = 1`.

- I also prefer the compact notation:

```
    e_list = [ one if i in pts else zero for i in range(Cor.length()) ]
```
instead of:

```
    e_list = []
    for i in range(Cor.length()):
        if i in pts:
            e_list.append(one)
        else:
            e_list.append(zero)
```


- finally, a typo, l.441 : default instead of dafault

I did not perform exhaustive tests of all the combinations of codes/encoders/decoders/strategies, because it is too long. So given the complexity of the feature you're trying to implement, it's still possible there remains some minor errors -- especially with extreme settings -- but maybe a real deep use of this class (by actual users) could make them appear more easily.

Thus, when you're done fixing the previous errors, I give the green light.

Julien



---

archive/issue_events_257552.json:
```json
{
    "actor": "https://github.com/jlavauzelle",
    "created_at": "2016-05-22T13:03:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19422#event-257552"
}
```



---

archive/issue_events_257553.json:
```json
{
    "actor": "https://github.com/jlavauzelle",
    "created_at": "2016-05-22T13:03:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19422#event-257553"
}
```



---

archive/issue_comments_278615.json:
```json
{
    "body": "Changed commit from **[36e71c5](https://github.com/sagemath/sagetrac-mirror/commit/36e71c57401929089bc1938aa016b251b54f8916)** to **[8a3a084](https://github.com/sagemath/sagetrac-mirror/commit/8a3a084f960197006447424522ea768c4a89bb62)**",
    "created_at": "2016-05-23T13:16:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278615",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[36e71c5](https://github.com/sagemath/sagetrac-mirror/commit/36e71c57401929089bc1938aa016b251b54f8916)** to **[8a3a084](https://github.com/sagemath/sagetrac-mirror/commit/8a3a084f960197006447424522ea768c4a89bb62)**



---

archive/issue_comments_278616.json:
```json
{
    "body": "<a id='comment:35'>Comment 35:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ddedfc3258912eb2827069fde3ab5c0b84f28e80\">ddedfc3</a></td><td><code>Update to latest beta</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f96481237f860128999b4679d4d62d01d9cd425e\">f964812</a></td><td><code>Fixed bug in index.rst file</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6afe4a9a23852c26f53d27a5f1a84ed6355a5867\">6afe4a9</a></td><td><code>Fixed bug related in structured_representation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/890b309b8b942ba7172a033702ed3239943fe835\">890b309</a></td><td><code>Added input check for encoder and decoder</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8a3a084f960197006447424522ea768c4a89bb62\">8a3a084</a></td><td><code>Tweaks: fixed typo, removed not Pythonic syntax</code></td></tr></table>\n",
    "created_at": "2016-05-23T13:16:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278616",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:35'>Comment 35:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ddedfc3258912eb2827069fde3ab5c0b84f28e80">ddedfc3</a></td><td><code>Update to latest beta</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f96481237f860128999b4679d4d62d01d9cd425e">f964812</a></td><td><code>Fixed bug in index.rst file</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6afe4a9a23852c26f53d27a5f1a84ed6355a5867">6afe4a9</a></td><td><code>Fixed bug related in structured_representation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/890b309b8b942ba7172a033702ed3239943fe835">890b309</a></td><td><code>Added input check for encoder and decoder</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8a3a084f960197006447424522ea768c4a89bb62">8a3a084</a></td><td><code>Tweaks: fixed typo, removed not Pythonic syntax</code></td></tr></table>




---

archive/issue_comments_278617.json:
```json
{
    "body": "<a id='comment:36'>Comment 36:</a>\nHello Julien,\n\nThanks for your comments!\n\nI fixed the bug in `structured_representation`. I also fixed a bug I found while compiling the documentation, added input sanitization in the encoder and the decoder (speaking of which, these checks are missing almost everywhere... I'll open a new ticket to fix that in other classes).\n\nI also removed non-Pythonic syntax (fun fact: four lines below the ones you noticed, `error_erasure` was set to `True` or `False`... Consistency, I haz it).\n\nShould be ok now.\nFYI, I tested locally `error-erasure`, `list-decoder` and \"classical\" decoders, standard decoding tests passed.\n\nDavid",
    "created_at": "2016-05-23T13:26:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278617",
    "user": "https://github.com/sagetrac-dlucas"
}
```

<a id='comment:36'>Comment 36:</a>
Hello Julien,

Thanks for your comments!

I fixed the bug in `structured_representation`. I also fixed a bug I found while compiling the documentation, added input sanitization in the encoder and the decoder (speaking of which, these checks are missing almost everywhere... I'll open a new ticket to fix that in other classes).

I also removed non-Pythonic syntax (fun fact: four lines below the ones you noticed, `error_erasure` was set to `True` or `False`... Consistency, I haz it).

Should be ok now.
FYI, I tested locally `error-erasure`, `list-decoder` and "classical" decoders, standard decoding tests passed.

David



---

archive/issue_events_257554.json:
```json
{
    "actor": "https://github.com/sagetrac-dlucas",
    "created_at": "2016-05-23T13:27:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19422#event-257554"
}
```



---

archive/issue_events_257555.json:
```json
{
    "actor": "https://github.com/sagetrac-dlucas",
    "created_at": "2016-05-23T13:27:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19422#event-257555"
}
```



---

archive/issue_events_257556.json:
```json
{
    "actor": "https://github.com/sagetrac-dlucas",
    "created_at": "2016-05-23T13:27:02Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "milestone_number": null,
    "milestone_title": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19422#event-257556"
}
```



---

archive/issue_events_257557.json:
```json
{
    "actor": "https://github.com/sagetrac-dlucas",
    "created_at": "2016-05-23T13:27:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19422#event-257557"
}
```



---

archive/issue_comments_278618.json:
```json
{
    "body": "<a id='comment:38'>Comment 38:</a>\nHi David,\n\nYour fix of `structured_representation` doesn't work. Try this:\n\n```\n    C = codes.GeneralizedReedSolomonCode(GF(7).list(), 4)\n    Cp = codes.PuncturedCode(C, [5,6])\n    Cp2 = codes.PuncturedCode(Cp, [1,2])\n```\nIf you print `list_pts` at the end of the method, you'll see it is not `[1,2,5,6]` as expected.\n\nHere is a piece of code which should work:\n\n```\n        while(isinstance(C, PuncturedCode)):\n            cur_pts = list(C.punctured_positions())\n            list_len = len(list_pts)\n            for p in cur_pts:\n                for i in range(list_len):\n                    if (p <= list_pts[i]):\n                        list_pts[i] += 1\n            list_pts += cur_pts\n            C = C.original_code()\n        return C._punctured_form(set(list_pts))\n```\nI'm not satisfied about its algorithmic complexity, so you're free to improve it, even though I cannot believe that this piece of code will ever become a bottleneck of any algorithm.\n\nI agree with the other fixes :)\n\nJulien",
    "created_at": "2016-05-23T15:34:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278618",
    "user": "https://github.com/jlavauzelle"
}
```

<a id='comment:38'>Comment 38:</a>
Hi David,

Your fix of `structured_representation` doesn't work. Try this:

```
    C = codes.GeneralizedReedSolomonCode(GF(7).list(), 4)
    Cp = codes.PuncturedCode(C, [5,6])
    Cp2 = codes.PuncturedCode(Cp, [1,2])
```
If you print `list_pts` at the end of the method, you'll see it is not `[1,2,5,6]` as expected.

Here is a piece of code which should work:

```
        while(isinstance(C, PuncturedCode)):
            cur_pts = list(C.punctured_positions())
            list_len = len(list_pts)
            for p in cur_pts:
                for i in range(list_len):
                    if (p <= list_pts[i]):
                        list_pts[i] += 1
            list_pts += cur_pts
            C = C.original_code()
        return C._punctured_form(set(list_pts))
```
I'm not satisfied about its algorithmic complexity, so you're free to improve it, even though I cannot believe that this piece of code will ever become a bottleneck of any algorithm.

I agree with the other fixes :)

Julien



---

archive/issue_comments_278619.json:
```json
{
    "body": "<a id='comment:39'>Comment 39:</a>\n> If you print `list_pts` at the end of the method, you'll see it is not `[1,2,5,6]` as expected.\n\nOh yes you're right, my solution only works if one erases the same coordinates repeatedly...",
    "created_at": "2016-05-23T15:40:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278619",
    "user": "https://github.com/sagetrac-dlucas"
}
```

<a id='comment:39'>Comment 39:</a>
> If you print `list_pts` at the end of the method, you'll see it is not `[1,2,5,6]` as expected.

Oh yes you're right, my solution only works if one erases the same coordinates repeatedly...



---

archive/issue_comments_278620.json:
```json
{
    "body": "Changed commit from **[8a3a084](https://github.com/sagemath/sagetrac-mirror/commit/8a3a084f960197006447424522ea768c4a89bb62)** to **[45d4ee1](https://github.com/sagemath/sagetrac-mirror/commit/45d4ee111d235690820ef35269fb8991aa6f4abb)**",
    "created_at": "2016-05-23T15:45:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278620",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[8a3a084](https://github.com/sagemath/sagetrac-mirror/commit/8a3a084f960197006447424522ea768c4a89bb62)** to **[45d4ee1](https://github.com/sagemath/sagetrac-mirror/commit/45d4ee111d235690820ef35269fb8991aa6f4abb)**



---

archive/issue_comments_278621.json:
```json
{
    "body": "<a id='comment:40'>Comment 40:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/45d4ee111d235690820ef35269fb8991aa6f4abb\">45d4ee1</a></td><td><code>Fixed structured_representation</code></td></tr></table>\n",
    "created_at": "2016-05-23T15:45:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278621",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:40'>Comment 40:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/45d4ee111d235690820ef35269fb8991aa6f4abb">45d4ee1</a></td><td><code>Fixed structured_representation</code></td></tr></table>




---

archive/issue_comments_278622.json:
```json
{
    "body": "<a id='comment:41'>Comment 41:</a>\nI took your solution and tested it on several instances.\nI'm fine with it, even if it's not perfect.\n\nDavid",
    "created_at": "2016-05-23T15:47:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278622",
    "user": "https://github.com/sagetrac-dlucas"
}
```

<a id='comment:41'>Comment 41:</a>
I took your solution and tested it on several instances.
I'm fine with it, even if it's not perfect.

David



---

archive/issue_events_257558.json:
```json
{
    "actor": "https://github.com/jlavauzelle",
    "created_at": "2016-05-23T16:00:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19422#event-257558"
}
```



---

archive/issue_events_257559.json:
```json
{
    "actor": "https://github.com/jlavauzelle",
    "created_at": "2016-05-23T16:00:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19422#event-257559"
}
```



---

archive/issue_comments_278623.json:
```json
{
    "body": "Reviewer: **Julien Lavauzelle**",
    "created_at": "2016-05-23T16:00:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278623",
    "user": "https://github.com/jlavauzelle"
}
```

Reviewer: **Julien Lavauzelle**



---

archive/issue_comments_278624.json:
```json
{
    "body": "<a id='comment:42'>Comment 42:</a>\nNow that's ok for me. Great job again !\n\nJulien",
    "created_at": "2016-05-23T16:00:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278624",
    "user": "https://github.com/jlavauzelle"
}
```

<a id='comment:42'>Comment 42:</a>
Now that's ok for me. Great job again !

Julien



---

archive/issue_comments_278625.json:
```json
{
    "body": "<a id='comment:43'>Comment 43:</a>\nAmazing, thanks!",
    "created_at": "2016-05-23T16:54:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278625",
    "user": "https://github.com/sagetrac-dlucas"
}
```

<a id='comment:43'>Comment 43:</a>
Amazing, thanks!



---

archive/issue_comments_278626.json:
```json
{
    "body": "Changed branch from **[u/dlucas/punctured_code](https://github.com/sagemath/sagetrac-mirror/tree/u/dlucas/punctured_code)** to **[45d4ee1](https://github.com/sagemath/sagetrac-mirror/commit/45d4ee111d235690820ef35269fb8991aa6f4abb)**",
    "created_at": "2016-05-24T07:06:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19422#issuecomment-278626",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/dlucas/punctured_code](https://github.com/sagemath/sagetrac-mirror/tree/u/dlucas/punctured_code)** to **[45d4ee1](https://github.com/sagemath/sagetrac-mirror/commit/45d4ee111d235690820ef35269fb8991aa6f4abb)**



---

archive/issue_events_257560.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-05-24T07:06:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19422#event-257560"
}
```



---

archive/issue_events_257561.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "717a2e526a560dd674a823d8f2fb0628582aa223",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-05-24T07:06:34Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/19422",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19422#event-257561"
}
```
