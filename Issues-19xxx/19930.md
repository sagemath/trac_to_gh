# Issue 19930: A proper class for Hamming codes

archive/issues_019693.json:
```json
{
    "body": "`codes.HammingCode` is not a constructor for a class, but a method which builds a generic linear code.\n\nThis ticket proposes a class implementation of Hamming codes, using the API introduced in #18099 which properly sets Hamming codes as a class. It also comes with a new generic encoder for codes built from a parity check matrix.\n\nCC:  @wdjoyner @ppurka @ClementPernet\n\nReviewer: Cl\u00e9ment Pernet\n\nAuthor: David Lucas\n\nBranch: 2b6875adf5689fd87a0d9bc74fce262a5ca18be5\n\nCommit: 2b6875adf5689fd87a0d9bc74fce262a5ca18be5\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/19930\n\n",
    "closed_at": "2016-03-20T23:41:40Z",
    "created_at": "2016-01-21T09:53:42Z",
    "labels": [
        "component: coding theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.1",
    "title": "A proper class for Hamming codes",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19930",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```
`codes.HammingCode` is not a constructor for a class, but a method which builds a generic linear code.

This ticket proposes a class implementation of Hamming codes, using the API introduced in #18099 which properly sets Hamming codes as a class. It also comes with a new generic encoder for codes built from a parity check matrix.

CC:  @wdjoyner @ppurka @ClementPernet

Reviewer: Cl√©ment Pernet

Author: David Lucas

Branch: 2b6875adf5689fd87a0d9bc74fce262a5ca18be5

Commit: 2b6875adf5689fd87a0d9bc74fce262a5ca18be5

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/19930





---

archive/issue_comments_270415.json:
```json
{
    "body": "<a id='comment:2'></a>I pushed the patch, this is now open for review.\n\nAlongside with the new classes, I also made the (very small) following changes:\n\n- an `isinstance` test in `codecan/autgroup_can_label.pyx` was based on the old API and thus was only working with instances of class `LinearCode`. I changed it so it works now with any linear code, specific code families included.\n\n- the method `__cmp__` in `AbstractLinearCode` was quite useless (imho), so I removed it.\n\nDavid \n\n---\nNew commits:",
    "created_at": "2016-01-21T10:00:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19930#issuecomment-270415",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

<a id='comment:2'></a>I pushed the patch, this is now open for review.

Alongside with the new classes, I also made the (very small) following changes:

- an `isinstance` test in `codecan/autgroup_can_label.pyx` was based on the old API and thus was only working with instances of class `LinearCode`. I changed it so it works now with any linear code, specific code families included.

- the method `__cmp__` in `AbstractLinearCode` was quite useless (imho), so I removed it.

David 

---
New commits:



---

archive/issue_comments_270416.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-01-21T10:00:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19930#issuecomment-270416",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_270417.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-21T13:06:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19930#issuecomment-270417",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_270418.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-27T15:28:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19930#issuecomment-270418",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_270419.json:
```json
{
    "body": "<a id='comment:5'></a>I updated this ticket to latest beta.\nI also added a note on `parity_check_matrix` method which points to some references on how to build Hamming codes over anything else than a binary field, as this is definitely non-standard. \n\nAlso note that with this ticket, the implementation of `codes.LinearCodeFromCheckMatrix` can be improved so it does not rely on the dual code but on the encoder introduced here (which saves computation at construction time). See follow-up ticket #19975 for this issue.\n\n---\nNew commits:",
    "created_at": "2016-01-27T15:30:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19930#issuecomment-270419",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

<a id='comment:5'></a>I updated this ticket to latest beta.
I also added a note on `parity_check_matrix` method which points to some references on how to build Hamming codes over anything else than a binary field, as this is definitely non-standard. 

Also note that with this ticket, the implementation of `codes.LinearCodeFromCheckMatrix` can be improved so it does not rely on the dual code but on the encoder introduced here (which saves computation at construction time). See follow-up ticket #19975 for this issue.

---
New commits:



---

archive/issue_comments_270420.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-02-01T10:02:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19930#issuecomment-270420",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_270421.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-02-17T10:34:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19930#issuecomment-270421",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_270422.json:
```json
{
    "body": "<a id='comment:8'></a>I updated to latest beta and fixed merge conflicts. This is still open for review.",
    "created_at": "2016-02-17T10:35:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19930#issuecomment-270422",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

<a id='comment:8'></a>I updated to latest beta and fixed merge conflicts. This is still open for review.



---

archive/issue_comments_270423.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-02-17T15:38:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19930#issuecomment-270423",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_270424.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-01T13:53:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19930#issuecomment-270424",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_270425.json:
```json
{
    "body": "<a id='comment:12'></a>I updated to latest beta and fixed merge conflict. This is still open for review.",
    "created_at": "2016-03-01T13:53:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19930#issuecomment-270425",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

<a id='comment:12'></a>I updated to latest beta and fixed merge conflict. This is still open for review.



---

archive/issue_comments_270426.json:
```json
{
    "body": "<a id='comment:14'></a>When comparing 2 Hamming codes in docstrings, you replaced the code comparaison by a comparison on the echelon form of their respective generating matrices.\n\nI suggest to avoid calling directly echelon_form method, and rather compare their systematic generator matrices (which is equivalent but seems clearer).\n\n```\nC1.generator_matrix_systematic()==C2.generator_matrix_systematic()\n```",
    "created_at": "2016-03-17T18:33:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19930#issuecomment-270426",
    "user": "https://github.com/ClementPernet"
}
```

<a id='comment:14'></a>When comparing 2 Hamming codes in docstrings, you replaced the code comparaison by a comparison on the echelon form of their respective generating matrices.

I suggest to avoid calling directly echelon_form method, and rather compare their systematic generator matrices (which is equivalent but seems clearer).

```
C1.generator_matrix_systematic()==C2.generator_matrix_systematic()
```



---

archive/issue_comments_270427.json:
```json
{
    "body": "<a id='comment:15'></a>lines 156 to 161 of hamming_code.py: this code seems very odd to me. I do not see what you are trying to do here.\n- the two branches of the if then else block are identical.\n- The series of swaps being performed result in a cyclic rotation of the first m/2 rows and the last one. Is this really what is intended?\n\nIf, as I presume, you're trying to simply flip the order of the rows, then, try something like\n\n```\nH = H[::-1,:]\n```",
    "created_at": "2016-03-18T09:17:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19930#issuecomment-270427",
    "user": "https://github.com/ClementPernet"
}
```

<a id='comment:15'></a>lines 156 to 161 of hamming_code.py: this code seems very odd to me. I do not see what you are trying to do here.
- the two branches of the if then else block are identical.
- The series of swaps being performed result in a cyclic rotation of the first m/2 rows and the last one. Is this really what is intended?

If, as I presume, you're trying to simply flip the order of the rows, then, try something like

```
H = H[::-1,:]
```



---

archive/issue_comments_270428.json:
```json
{
    "body": "<a id='comment:16'></a>The rest of the modifications are ok to me. So once these 2 issues have been addressed, I'll be happy to give a positive review.",
    "created_at": "2016-03-18T09:30:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19930#issuecomment-270428",
    "user": "https://github.com/ClementPernet"
}
```

<a id='comment:16'></a>The rest of the modifications are ok to me. So once these 2 issues have been addressed, I'll be happy to give a positive review.



---

archive/issue_comments_270429.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-18T12:53:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19930#issuecomment-270429",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_270430.json:
```json
{
    "body": "<a id='comment:18'></a>Hello,\n\nI made the changes.\n\nI also removed a test from `AbstractLinearCode`'s `__eq__` which was comparing the matrices of two codes. As it was not testing `__eq__` for codes at all, I simply deleted it.\n\nDavid",
    "created_at": "2016-03-18T12:55:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19930#issuecomment-270430",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

<a id='comment:18'></a>Hello,

I made the changes.

I also removed a test from `AbstractLinearCode`'s `__eq__` which was comparing the matrices of two codes. As it was not testing `__eq__` for codes at all, I simply deleted it.

David



---

archive/issue_comments_270431.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-03-18T14:08:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19930#issuecomment-270431",
    "user": "https://github.com/ClementPernet"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_270432.json:
```json
{
    "body": "<a id='comment:19'></a>All good. Positive review.",
    "created_at": "2016-03-18T14:08:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19930#issuecomment-270432",
    "user": "https://github.com/ClementPernet"
}
```

<a id='comment:19'></a>All good. Positive review.



---

archive/issue_events_054414.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-03-20T23:41:40Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19930",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19930#event-54414"
}
```



---

archive/issue_comments_270433.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-03-20T23:41:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19930#issuecomment-270433",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
