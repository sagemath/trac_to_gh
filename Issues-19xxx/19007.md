# Issue 19007: Refactor Closeness Centrality

archive/issues_018770.json:
```json
{
    "body": "Now, the closeness centrality algorithm simply calls the corresponding NetworkX routine (only for undirected graphs).\n\nThis ticket will move this routine to file generic_graph (closeness centrality is defined also in this case ![1]), and it will modify input/output variables as in routine shortest_path. Then, it will call our shortest path new routines instead of NetworkX routines.\n\nThis ticket is a first step towards the inclusion of the algorithm in ![2].\n\n![1] !http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=6816651&tag=1\n\n![2] !http://arxiv.org/pdf/1507.01490v1.pdf\n\n**CC:**  @nathanncohen @dcoudert\n\n**Keywords:** Closeness centrality\n\n**Branch/Commit:** [1551c6fd513cd4f7ac6c787badd589cf349fb788](https://github.com/sagemath/sagetrac-mirror/commit/1551c6fd513cd4f7ac6c787badd589cf349fb788)\n\n**Reviewer:** David Coudert\n\n**Author:** Michele Borassi\n\n**Dependencies:** #18931, #18876, #18910\n\nIssue created by migration from https://trac.sagemath.org/ticket/19007\n\n",
    "closed_at": "2015-08-21T01:56:20Z",
    "created_at": "2015-08-10T08:08:44Z",
    "labels": [
        "component: graph theory",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.9",
    "title": "Refactor Closeness Centrality",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/19007",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```
Now, the closeness centrality algorithm simply calls the corresponding NetworkX routine (only for undirected graphs).

This ticket will move this routine to file generic_graph (closeness centrality is defined also in this case ![1]), and it will modify input/output variables as in routine shortest_path. Then, it will call our shortest path new routines instead of NetworkX routines.

This ticket is a first step towards the inclusion of the algorithm in ![2].

![1] !http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=6816651&tag=1

![2] !http://arxiv.org/pdf/1507.01490v1.pdf

**CC:**  @nathanncohen @dcoudert

**Keywords:** Closeness centrality

**Branch/Commit:** [1551c6fd513cd4f7ac6c787badd589cf349fb788](https://github.com/sagemath/sagetrac-mirror/commit/1551c6fd513cd4f7ac6c787badd589cf349fb788)

**Reviewer:** David Coudert

**Author:** Michele Borassi

**Dependencies:** #18931, #18876, #18910

Issue created by migration from https://trac.sagemath.org/ticket/19007





---

archive/issue_events_170961.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/borassi",
    "created_at": "2015-08-10T09:38:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "label": "component: graph theory",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19007#event-170961"
}
```



---

archive/issue_events_170962.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/borassi",
    "created_at": "2015-08-10T09:38:32Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "rename": {
        "from": "refactor_centrality_closeness",
        "to": "Refactor Closeness Centrality"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19007#event-170962"
}
```



---

archive/issue_events_170963.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/borassi",
    "created_at": "2015-08-10T09:38:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "label": "enhancement",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19007#event-170963"
}
```



---

archive/issue_comments_269808.json:
```json
{
    "body": "**Author:** Michele Borassi",
    "created_at": "2015-08-10T09:38:32Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269808",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

**Author:** Michele Borassi



---

archive/issue_comments_269809.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"Closeness centrality\".",
    "created_at": "2015-08-10T09:38:32Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269809",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

**Changing keywords** from "" to "Closeness centrality".



---

archive/issue_comments_269810.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,9 @@\n+Now, the closeness centrality algorithm simply calls the corresponding NetworkX routine (only for undirected graphs).\n \n+This ticket will move this routine to file generic_graph (closeness centrality is defined also in this case ![1]), and it will modify input/output variables as in routine shortest_path. Then, it will call our shortest path new routines instead of NetworkX routines.\n+\n+This ticket is a first step towards the inclusion of the algorithm in ![2].\n+\n+![1] !http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=6816651&tag=1\n+\n+![2] !http://arxiv.org/pdf/1507.01490v1.pdf\n``````\n",
    "created_at": "2015-08-10T09:38:32Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269810",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,9 @@
+Now, the closeness centrality algorithm simply calls the corresponding NetworkX routine (only for undirected graphs).
 
+This ticket will move this routine to file generic_graph (closeness centrality is defined also in this case ![1]), and it will modify input/output variables as in routine shortest_path. Then, it will call our shortest path new routines instead of NetworkX routines.
+
+This ticket is a first step towards the inclusion of the algorithm in ![2].
+
+![1] !http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=6816651&tag=1
+
+![2] !http://arxiv.org/pdf/1507.01490v1.pdf
``````




---

archive/issue_comments_269811.json:
```json
{
    "body": "**Branch:** [u/borassi/refactor_centrality_closeness](https://github.com/sagemath/sagetrac-mirror/tree/u/borassi/refactor_centrality_closeness)",
    "created_at": "2015-08-13T16:51:13Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269811",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

**Branch:** [u/borassi/refactor_centrality_closeness](https://github.com/sagemath/sagetrac-mirror/tree/u/borassi/refactor_centrality_closeness)



---

archive/issue_comments_269812.json:
```json
{
    "body": "**Dependencies:** #18931, #18876, #18910",
    "created_at": "2015-08-13T16:54:33Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269812",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

**Dependencies:** #18931, #18876, #18910



---

archive/issue_events_170964.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/borassi",
    "created_at": "2015-08-13T16:54:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19007#event-170964"
}
```



---

archive/issue_comments_269813.json:
```json
{
    "body": "<a id='comment:3'></a>\nHello!\n\nThis is the first version of the refactoring of closeness_centrality. Let me know if you like it!",
    "created_at": "2015-08-13T16:54:33Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269813",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

<a id='comment:3'></a>
Hello!

This is the first version of the refactoring of closeness_centrality. Let me know if you like it!



---

archive/issue_comments_269814.json:
```json
{
    "body": "**Commit:** [5c85793ccb8234ac668173620523f45dbae4b985](https://github.com/sagemath/sagetrac-mirror/commit/5c85793ccb8234ac668173620523f45dbae4b985)",
    "created_at": "2015-08-13T16:54:33Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269814",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

**Commit:** [5c85793ccb8234ac668173620523f45dbae4b985](https://github.com/sagemath/sagetrac-mirror/commit/5c85793ccb8234ac668173620523f45dbae4b985)



---

archive/issue_comments_269815.json:
```json
{
    "body": "<a id='comment:4'></a>\nI don't really understand what you are doing in this commit\nhttps://github.com/sagemath/sagetrac-mirror/commits/5c85793ccb8234ac668173620523f45dbae4b985\n\nIn the ticket description you say that you will move everything in `generic_graph`, but it might be more readable/clean to create a new file for centrality measures, no?\nAlso, you moved only references to the methods, right? (or the modifications are hidden in the merge with #18931).\n\n```\n+            - :meth:`~sage.graphs.graph.Graph.centrality_degree`\n+            - :meth:`~centrality_betweenness`\n```\n\nDavid.",
    "created_at": "2015-08-13T17:47:52Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269815",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:4'></a>
I don't really understand what you are doing in this commit
https://github.com/sagemath/sagetrac-mirror/commits/5c85793ccb8234ac668173620523f45dbae4b985

In the ticket description you say that you will move everything in `generic_graph`, but it might be more readable/clean to create a new file for centrality measures, no?
Also, you moved only references to the methods, right? (or the modifications are hidden in the merge with #18931).

```
+            - :meth:`~sage.graphs.graph.Graph.centrality_degree`
+            - :meth:`~centrality_betweenness`
```

David.



---

archive/issue_comments_269816.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5853eb73a9705229a1947fe89b91624117683e59\">5853eb7</a></td><td><code>Merged with beta2</code></td></tr></table>\n",
    "created_at": "2015-08-14T09:48:15Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269816",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5853eb73a9705229a1947fe89b91624117683e59">5853eb7</a></td><td><code>Merged with beta2</code></td></tr></table>




---

archive/issue_comments_269817.json:
```json
{
    "body": "**Changing commit** from \"[5c85793ccb8234ac668173620523f45dbae4b985](https://github.com/sagemath/sagetrac-mirror/commit/5c85793ccb8234ac668173620523f45dbae4b985)\" to \"[5853eb73a9705229a1947fe89b91624117683e59](https://github.com/sagemath/sagetrac-mirror/commit/5853eb73a9705229a1947fe89b91624117683e59)\".",
    "created_at": "2015-08-14T09:48:15Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269817",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[5c85793ccb8234ac668173620523f45dbae4b985](https://github.com/sagemath/sagetrac-mirror/commit/5c85793ccb8234ac668173620523f45dbae4b985)" to "[5853eb73a9705229a1947fe89b91624117683e59](https://github.com/sagemath/sagetrac-mirror/commit/5853eb73a9705229a1947fe89b91624117683e59)".



---

archive/issue_comments_269818.json:
```json
{
    "body": "**Changing commit** from \"[5853eb73a9705229a1947fe89b91624117683e59](https://github.com/sagemath/sagetrac-mirror/commit/5853eb73a9705229a1947fe89b91624117683e59)\" to \"[a19addbd50db4086adbfc88c29b5c01f368dabc6](https://github.com/sagemath/sagetrac-mirror/commit/a19addbd50db4086adbfc88c29b5c01f368dabc6)\".",
    "created_at": "2015-08-14T10:13:05Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269818",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[5853eb73a9705229a1947fe89b91624117683e59](https://github.com/sagemath/sagetrac-mirror/commit/5853eb73a9705229a1947fe89b91624117683e59)" to "[a19addbd50db4086adbfc88c29b5c01f368dabc6](https://github.com/sagemath/sagetrac-mirror/commit/a19addbd50db4086adbfc88c29b5c01f368dabc6)".



---

archive/issue_comments_269819.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a19addbd50db4086adbfc88c29b5c01f368dabc6\">a19addb</a></td><td><code>Rewrote closeness centrality according to new standards</code></td></tr></table>\n",
    "created_at": "2015-08-14T10:13:05Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269819",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a19addbd50db4086adbfc88c29b5c01f368dabc6">a19addb</a></td><td><code>Rewrote closeness centrality according to new standards</code></td></tr></table>




---

archive/issue_comments_269820.json:
```json
{
    "body": "<a id='comment:7'></a>\nHello!\n\nThank you for the comment, I will try to address the main issues raised.\n\nI have put everything in a single commit, which simply removes the closeness centrality routine from `graph.py` and rewrites it in `generic_graph.py`. Now the ticket should be much easier to review. Since closeness centrality highly depends on shortest paths, the new routine follows all conventions in ticket #18931.\n\nAbout the creation of a new file: we already have file `centrality.pyx`, containing fast algorithms for betweenness centrality. However, these routines are called from a `centrality_betweenness` routine in file `generic_graph.py`, which should be used by the user. In this ticket, I just copied this policy.\n\nIn my opinion, if we want to create a new file, we should at least move also betweenness centrality and degree centrality: in my opinion, this goes beyond the scope of this ticket. Do you agree?\n\nBest,\n\nMichele\n\nReplying to [dcoudert](#comment%3A4):\n\n> I don't really understand what you are doing in this commit\n> https://github.com/sagemath/sagetrac-mirror/commits/5c85793ccb8234ac668173620523f45dbae4b985\n> \n> In the ticket description you say that you will move everything in `generic_graph`, but it might be more readable/clean to create a new file for centrality measures, no?\n> Also, you moved only references to the methods, right? (or the modifications are hidden in the merge with #18931).\n> \n> ```\n> +            - :meth:`~sage.graphs.graph.Graph.centrality_degree`\n> +            - :meth:`~centrality_betweenness`\n> ```\n> \n> David.\n",
    "created_at": "2015-08-14T12:25:08Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269820",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

<a id='comment:7'></a>
Hello!

Thank you for the comment, I will try to address the main issues raised.

I have put everything in a single commit, which simply removes the closeness centrality routine from `graph.py` and rewrites it in `generic_graph.py`. Now the ticket should be much easier to review. Since closeness centrality highly depends on shortest paths, the new routine follows all conventions in ticket #18931.

About the creation of a new file: we already have file `centrality.pyx`, containing fast algorithms for betweenness centrality. However, these routines are called from a `centrality_betweenness` routine in file `generic_graph.py`, which should be used by the user. In this ticket, I just copied this policy.

In my opinion, if we want to create a new file, we should at least move also betweenness centrality and degree centrality: in my opinion, this goes beyond the scope of this ticket. Do you agree?

Best,

Michele

Replying to [dcoudert](#comment%3A4):

> I don't really understand what you are doing in this commit
> https://github.com/sagemath/sagetrac-mirror/commits/5c85793ccb8234ac668173620523f45dbae4b985
> 
> In the ticket description you say that you will move everything in `generic_graph`, but it might be more readable/clean to create a new file for centrality measures, no?
> Also, you moved only references to the methods, right? (or the modifications are hidden in the merge with #18931).
> 
> ```
> +            - :meth:`~sage.graphs.graph.Graph.centrality_degree`
> +            - :meth:`~centrality_betweenness`
> ```
> 
> David.




---

archive/issue_comments_269821.json:
```json
{
    "body": "<a id='comment:8'></a>\nSomething is wrong here\n\n```\n+            try:\n+                v_iter = iter(vert)\n+            except TypeError:\n+                v_iter = [v_iter]\n+                v_iter = iter(vert)\n```\nI assume you want first to have `v_vert = iter(list(vert))\n\nThe default of calling `distances = self.shortest_path_all_pairs(by_weight,algorithm, weight_function, check_weight)[0]` is that you get a dictionary of dictionary, that is a huge data structure for large graphs (lost of memory and long to create). At least the second part of this method should be cythonized to get the array of distances, as is done for `centrality_betweenness`.\n\nDavid.",
    "created_at": "2015-08-14T15:14:30Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269821",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:8'></a>
Something is wrong here

```
+            try:
+                v_iter = iter(vert)
+            except TypeError:
+                v_iter = [v_iter]
+                v_iter = iter(vert)
```
I assume you want first to have `v_vert = iter(list(vert))

The default of calling `distances = self.shortest_path_all_pairs(by_weight,algorithm, weight_function, check_weight)[0]` is that you get a dictionary of dictionary, that is a huge data structure for large graphs (lost of memory and long to create). At least the second part of this method should be cythonized to get the array of distances, as is done for `centrality_betweenness`.

David.



---

archive/issue_comments_269822.json:
```json
{
    "body": "<a id='comment:9'></a>\n> Something is wrong here\n> \n> ```\n> +            try:\n> +                v_iter = iter(vert)\n> +            except TypeError:\n> +                v_iter = [v_iter]\n> +                v_iter = iter(vert)\n> ```\n\n\n+1.\n\nIn some cases a vertex can be a pair, and thus is iterable. This would react badly with this code.\n\n```\nsage: g=graphs.KneserGraph(5,2)\nsage: v=g.vertices()[0]\nsage: g.centrality_closeness(v)\n<crash>\n```\n\nNathann",
    "created_at": "2015-08-14T15:18:55Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269822",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:9'></a>
> Something is wrong here
> 
> ```
> +            try:
> +                v_iter = iter(vert)
> +            except TypeError:
> +                v_iter = [v_iter]
> +                v_iter = iter(vert)
> ```


+1.

In some cases a vertex can be a pair, and thus is iterable. This would react badly with this code.

```
sage: g=graphs.KneserGraph(5,2)
sage: v=g.vertices()[0]
sage: g.centrality_closeness(v)
<crash>
```

Nathann



---

archive/issue_comments_269823.json:
```json
{
    "body": "<a id='comment:10'></a>\nRight. My previous proposal is not a good solution.\nSomething like that might also be unsafe if some labels in `vert` are not in `G`, but this can be checked when trying to associate computed values and vertices.\n\n```\nv_vert = iter([vert]) if vert in G else iter(vert)\n```",
    "created_at": "2015-08-14T15:45:55Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269823",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:10'></a>
Right. My previous proposal is not a good solution.
Something like that might also be unsafe if some labels in `vert` are not in `G`, but this can be checked when trying to associate computed values and vertices.

```
v_vert = iter([vert]) if vert in G else iter(vert)
```



---

archive/issue_comments_269824.json:
```json
{
    "body": "<a id='comment:11'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7dfa2d26bcaf422f60b3ffd083bc535048922b2f\">7dfa2d2</a></td><td><code>Corrected v_iter, cythonized Johnson</code></td></tr></table>\n",
    "created_at": "2015-08-16T16:43:26Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269824",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7dfa2d26bcaf422f60b3ffd083bc535048922b2f">7dfa2d2</a></td><td><code>Corrected v_iter, cythonized Johnson</code></td></tr></table>




---

archive/issue_comments_269825.json:
```json
{
    "body": "**Changing commit** from \"[a19addbd50db4086adbfc88c29b5c01f368dabc6](https://github.com/sagemath/sagetrac-mirror/commit/a19addbd50db4086adbfc88c29b5c01f368dabc6)\" to \"[7dfa2d26bcaf422f60b3ffd083bc535048922b2f](https://github.com/sagemath/sagetrac-mirror/commit/7dfa2d26bcaf422f60b3ffd083bc535048922b2f)\".",
    "created_at": "2015-08-16T16:43:26Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269825",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[a19addbd50db4086adbfc88c29b5c01f368dabc6](https://github.com/sagemath/sagetrac-mirror/commit/a19addbd50db4086adbfc88c29b5c01f368dabc6)" to "[7dfa2d26bcaf422f60b3ffd083bc535048922b2f](https://github.com/sagemath/sagetrac-mirror/commit/7dfa2d26bcaf422f60b3ffd083bc535048922b2f)".



---

archive/issue_comments_269826.json:
```json
{
    "body": "<a id='comment:12'></a>\nHello!\n\nI hope you spent a great Assumption day!\n\nWith this new commit, (hopefully) I solved the problems with\u00a0`v_vert`  and I cythonized the Johnson algorithm. In my opinion, it is not worth  cythonizing Floyd-Warshall, because it is much slower than Johnson,  especially on sparse graphs.\n\nThank you very much!\n\nMichele",
    "created_at": "2015-08-16T16:46:31Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269826",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

<a id='comment:12'></a>
Hello!

I hope you spent a great Assumption day!

With this new commit, (hopefully) I solved the problems withÂ `v_vert`  and I cythonized the Johnson algorithm. In my opinion, it is not worth  cythonizing Floyd-Warshall, because it is much slower than Johnson,  especially on sparse graphs.

Thank you very much!

Michele



---

archive/issue_comments_269827.json:
```json
{
    "body": "<a id='comment:13'></a>\nHello,\n\nI'm trying to understand the behavior of the method on digraphs.\nYou wrote that the centrality of vertices of degree 0 is not reported. Does it means that for digraphs you don't report the centrality of vertices with out-degree 0?\nAlso, what's the expected behavior on strongly connected digraphs?\n\nDavid.",
    "created_at": "2015-08-17T09:41:02Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269827",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:13'></a>
Hello,

I'm trying to understand the behavior of the method on digraphs.
You wrote that the centrality of vertices of degree 0 is not reported. Does it means that for digraphs you don't report the centrality of vertices with out-degree 0?
Also, what's the expected behavior on strongly connected digraphs?

David.



---

archive/issue_comments_269828.json:
```json
{
    "body": "<a id='comment:14'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7a4059a8803326baf32f9922307d9f7ee3ce7238\">7a4059a</a></td><td><code>Improved documentation</code></td></tr></table>\n",
    "created_at": "2015-08-17T11:09:19Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269828",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7a4059a8803326baf32f9922307d9f7ee3ce7238">7a4059a</a></td><td><code>Improved documentation</code></td></tr></table>




---

archive/issue_comments_269829.json:
```json
{
    "body": "**Changing commit** from \"[7dfa2d26bcaf422f60b3ffd083bc535048922b2f](https://github.com/sagemath/sagetrac-mirror/commit/7dfa2d26bcaf422f60b3ffd083bc535048922b2f)\" to \"[7a4059a8803326baf32f9922307d9f7ee3ce7238](https://github.com/sagemath/sagetrac-mirror/commit/7a4059a8803326baf32f9922307d9f7ee3ce7238)\".",
    "created_at": "2015-08-17T11:09:19Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269829",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[7dfa2d26bcaf422f60b3ffd083bc535048922b2f](https://github.com/sagemath/sagetrac-mirror/commit/7dfa2d26bcaf422f60b3ffd083bc535048922b2f)" to "[7a4059a8803326baf32f9922307d9f7ee3ce7238](https://github.com/sagemath/sagetrac-mirror/commit/7a4059a8803326baf32f9922307d9f7ee3ce7238)".



---

archive/issue_comments_269830.json:
```json
{
    "body": "<a id='comment:15'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5c67f79dcb519e1df3a76021677a8292583a3d31\">5c67f79</a></td><td><code>Small mistake</code></td></tr></table>\n",
    "created_at": "2015-08-17T11:09:54Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269830",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5c67f79dcb519e1df3a76021677a8292583a3d31">5c67f79</a></td><td><code>Small mistake</code></td></tr></table>




---

archive/issue_comments_269831.json:
```json
{
    "body": "**Changing commit** from \"[7a4059a8803326baf32f9922307d9f7ee3ce7238](https://github.com/sagemath/sagetrac-mirror/commit/7a4059a8803326baf32f9922307d9f7ee3ce7238)\" to \"[5c67f79dcb519e1df3a76021677a8292583a3d31](https://github.com/sagemath/sagetrac-mirror/commit/5c67f79dcb519e1df3a76021677a8292583a3d31)\".",
    "created_at": "2015-08-17T11:09:54Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269831",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[7a4059a8803326baf32f9922307d9f7ee3ce7238](https://github.com/sagemath/sagetrac-mirror/commit/7a4059a8803326baf32f9922307d9f7ee3ce7238)" to "[5c67f79dcb519e1df3a76021677a8292583a3d31](https://github.com/sagemath/sagetrac-mirror/commit/5c67f79dcb519e1df3a76021677a8292583a3d31)".



---

archive/issue_comments_269832.json:
```json
{
    "body": "<a id='comment:16'></a>\nHello!\n\nI tried to improve the documentation, answering your questions.\n\nMichele\n\nReplying to [dcoudert](#comment%3A13):\n\n> You wrote that the centrality of vertices of degree 0 is not reported. Does it means that for digraphs you don't report the centrality of vertices with out-degree 0?\n\n\nYes, I changed in the documentation \"degree\" with \"(out)degree\"\n\n> Also, what's the expected behavior on strongly connected digraphs?\n\n\nThe closeness centrality of a vertex v is 1/farn(v), where farn(v) is the average distance between v and a random vertex w different from v (as in the case of connected graphs). I added an example about this.",
    "created_at": "2015-08-17T11:13:50Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269832",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

<a id='comment:16'></a>
Hello!

I tried to improve the documentation, answering your questions.

Michele

Replying to [dcoudert](#comment%3A13):

> You wrote that the centrality of vertices of degree 0 is not reported. Does it means that for digraphs you don't report the centrality of vertices with out-degree 0?


Yes, I changed in the documentation "degree" with "(out)degree"

> Also, what's the expected behavior on strongly connected digraphs?


The closeness centrality of a vertex v is 1/farn(v), where farn(v) is the average distance between v and a random vertex w different from v (as in the case of connected graphs). I added an example about this.



---

archive/issue_comments_269833.json:
```json
{
    "body": "<a id='comment:17'></a>\nHello,\n\nThis is much better now. The method works well, passes all tests and the doc build properly.\n\nOne possible modification is to move the method to file `centrality.pyx` which is made for  gathering centrality methods. Let me know.\n\nBest,\nDavid.",
    "created_at": "2015-08-17T12:03:48Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269833",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:17'></a>
Hello,

This is much better now. The method works well, passes all tests and the doc build properly.

One possible modification is to move the method to file `centrality.pyx` which is made for  gathering centrality methods. Let me know.

Best,
David.



---

archive/issue_comments_269834.json:
```json
{
    "body": "**Changing commit** from \"[5c67f79dcb519e1df3a76021677a8292583a3d31](https://github.com/sagemath/sagetrac-mirror/commit/5c67f79dcb519e1df3a76021677a8292583a3d31)\" to \"[48514adedac2e122137907f410a92dcd5e6e6e3c](https://github.com/sagemath/sagetrac-mirror/commit/48514adedac2e122137907f410a92dcd5e6e6e3c)\".",
    "created_at": "2015-08-17T14:23:59Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269834",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[5c67f79dcb519e1df3a76021677a8292583a3d31](https://github.com/sagemath/sagetrac-mirror/commit/5c67f79dcb519e1df3a76021677a8292583a3d31)" to "[48514adedac2e122137907f410a92dcd5e6e6e3c](https://github.com/sagemath/sagetrac-mirror/commit/48514adedac2e122137907f410a92dcd5e6e6e3c)".



---

archive/issue_comments_269835.json:
```json
{
    "body": "<a id='comment:18'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/48514adedac2e122137907f410a92dcd5e6e6e3c\">48514ad</a></td><td><code>Moved centrality_closeness to centrality.pyx</code></td></tr></table>\n",
    "created_at": "2015-08-17T14:23:59Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269835",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/48514adedac2e122137907f410a92dcd5e6e6e3c">48514ad</a></td><td><code>Moved centrality_closeness to centrality.pyx</code></td></tr></table>




---

archive/issue_comments_269836.json:
```json
{
    "body": "<a id='comment:19'></a>\nDone!\n\nHowever, I had to do some \"magic\" to avoid duplicate references... Hope it is ok!",
    "created_at": "2015-08-17T14:30:44Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269836",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

<a id='comment:19'></a>
Done!

However, I had to do some "magic" to avoid duplicate references... Hope it is ok!



---

archive/issue_comments_269837.json:
```json
{
    "body": "**Changing commit** from \"[48514adedac2e122137907f410a92dcd5e6e6e3c](https://github.com/sagemath/sagetrac-mirror/commit/48514adedac2e122137907f410a92dcd5e6e6e3c)\" to \"[cf9cf870c430b7f4ba06ec990fa37cf9ae66290d](https://github.com/sagemath/sagetrac-mirror/commit/cf9cf870c430b7f4ba06ec990fa37cf9ae66290d)\".",
    "created_at": "2015-08-17T15:11:04Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269837",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[48514adedac2e122137907f410a92dcd5e6e6e3c](https://github.com/sagemath/sagetrac-mirror/commit/48514adedac2e122137907f410a92dcd5e6e6e3c)" to "[cf9cf870c430b7f4ba06ec990fa37cf9ae66290d](https://github.com/sagemath/sagetrac-mirror/commit/cf9cf870c430b7f4ba06ec990fa37cf9ae66290d)".



---

archive/issue_comments_269838.json:
```json
{
    "body": "<a id='comment:20'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cf9cf870c430b7f4ba06ec990fa37cf9ae66290d\">cf9cf87</a></td><td><code>Trailing whitespaces</code></td></tr></table>\n",
    "created_at": "2015-08-17T15:11:04Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269838",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cf9cf870c430b7f4ba06ec990fa37cf9ae66290d">cf9cf87</a></td><td><code>Trailing whitespaces</code></td></tr></table>




---

archive/issue_comments_269839.json:
```json
{
    "body": "<a id='comment:21'></a>\nYep, I add to `make doc-clean && make doc` to get it compiled.\n\nI just saw in the doc of `centrality_degree` in `graph.py`, in section See also, that the link to `centrality_closeness` is broken. In fact, the code is <code>:meth:\\`centrality_closeness\\`</code>. Could you check that?\nIn fact we should also move this methode to `centrality.pyx`, but in another ticket.\n\nAfter that I think it will be ok.\n\nDavid.",
    "created_at": "2015-08-17T17:23:06Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269839",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:21'></a>
Yep, I add to `make doc-clean && make doc` to get it compiled.

I just saw in the doc of `centrality_degree` in `graph.py`, in section See also, that the link to `centrality_closeness` is broken. In fact, the code is <code>:meth:\`centrality_closeness\`</code>. Could you check that?
In fact we should also move this methode to `centrality.pyx`, but in another ticket.

After that I think it will be ok.

David.



---

archive/issue_comments_269840.json:
```json
{
    "body": "**Changing commit** from \"[cf9cf870c430b7f4ba06ec990fa37cf9ae66290d](https://github.com/sagemath/sagetrac-mirror/commit/cf9cf870c430b7f4ba06ec990fa37cf9ae66290d)\" to \"[90638aa3a78bf992aa29902f929f131a973c021e](https://github.com/sagemath/sagetrac-mirror/commit/90638aa3a78bf992aa29902f929f131a973c021e)\".",
    "created_at": "2015-08-18T07:46:06Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269840",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[cf9cf870c430b7f4ba06ec990fa37cf9ae66290d](https://github.com/sagemath/sagetrac-mirror/commit/cf9cf870c430b7f4ba06ec990fa37cf9ae66290d)" to "[90638aa3a78bf992aa29902f929f131a973c021e](https://github.com/sagemath/sagetrac-mirror/commit/90638aa3a78bf992aa29902f929f131a973c021e)".



---

archive/issue_comments_269841.json:
```json
{
    "body": "<a id='comment:22'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/90638aa3a78bf992aa29902f929f131a973c021e\">90638aa</a></td><td><code>Corrected link</code></td></tr></table>\n",
    "created_at": "2015-08-18T07:46:06Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269841",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/90638aa3a78bf992aa29902f929f131a973c021e">90638aa</a></td><td><code>Corrected link</code></td></tr></table>




---

archive/issue_comments_269842.json:
```json
{
    "body": "<a id='comment:23'></a>\nDone!",
    "created_at": "2015-08-18T07:46:32Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269842",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

<a id='comment:23'></a>
Done!



---

archive/issue_comments_269843.json:
```json
{
    "body": "<a id='comment:24'></a>\nHello,\n\ndo you understand why the patchbot reports some errors?\nI have no error when testing this patch on my computer (install, long tests, trials, docbuild html et pdf,...).\n\nBest,\nDavid.",
    "created_at": "2015-08-18T09:29:16Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269843",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:24'></a>
Hello,

do you understand why the patchbot reports some errors?
I have no error when testing this patch on my computer (install, long tests, trials, docbuild html et pdf,...).

Best,
David.



---

archive/issue_comments_269844.json:
```json
{
    "body": "<a id='comment:25'></a>\nWhat is the patchbot? How can I find these errors?",
    "created_at": "2015-08-18T09:30:52Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269844",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

<a id='comment:25'></a>
What is the patchbot? How can I find these errors?



---

archive/issue_comments_269845.json:
```json
{
    "body": "<a id='comment:26'></a>\non the top of this page, you can see a blue disk (or red or green, etc.) with a link to http://patchbot.sagemath.org/ticket/19007/\nIt reports on automatic tests of your patch. Tests are performed on all modules.",
    "created_at": "2015-08-18T09:33:59Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269845",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:26'></a>
on the top of this page, you can see a blue disk (or red or green, etc.) with a link to http://patchbot.sagemath.org/ticket/19007/
It reports on automatic tests of your patch. Tests are performed on all modules.



---

archive/issue_comments_269846.json:
```json
{
    "body": "<a id='comment:27'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/73dd6d5e0a69e8c26ba23bf5425a9b4122a34ff6\">73dd6d5</a></td><td><code>Solve patchbot - first attempt</code></td></tr></table>\n",
    "created_at": "2015-08-18T12:21:04Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269846",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/73dd6d5e0a69e8c26ba23bf5425a9b4122a34ff6">73dd6d5</a></td><td><code>Solve patchbot - first attempt</code></td></tr></table>




---

archive/issue_comments_269847.json:
```json
{
    "body": "**Changing commit** from \"[90638aa3a78bf992aa29902f929f131a973c021e](https://github.com/sagemath/sagetrac-mirror/commit/90638aa3a78bf992aa29902f929f131a973c021e)\" to \"[73dd6d5e0a69e8c26ba23bf5425a9b4122a34ff6](https://github.com/sagemath/sagetrac-mirror/commit/73dd6d5e0a69e8c26ba23bf5425a9b4122a34ff6)\".",
    "created_at": "2015-08-18T12:21:04Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269847",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[90638aa3a78bf992aa29902f929f131a973c021e](https://github.com/sagemath/sagetrac-mirror/commit/90638aa3a78bf992aa29902f929f131a973c021e)" to "[73dd6d5e0a69e8c26ba23bf5425a9b4122a34ff6](https://github.com/sagemath/sagetrac-mirror/commit/73dd6d5e0a69e8c26ba23bf5425a9b4122a34ff6)".



---

archive/issue_comments_269848.json:
```json
{
    "body": "<a id='comment:28'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f1c7fd57d513efda616b6dc8c3a81c7891ef5f12\">f1c7fd5</a></td><td><code>Solve patchbot - second attempt</code></td></tr></table>\n",
    "created_at": "2015-08-18T12:25:03Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269848",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f1c7fd57d513efda616b6dc8c3a81c7891ef5f12">f1c7fd5</a></td><td><code>Solve patchbot - second attempt</code></td></tr></table>




---

archive/issue_comments_269849.json:
```json
{
    "body": "**Changing commit** from \"[73dd6d5e0a69e8c26ba23bf5425a9b4122a34ff6](https://github.com/sagemath/sagetrac-mirror/commit/73dd6d5e0a69e8c26ba23bf5425a9b4122a34ff6)\" to \"[f1c7fd57d513efda616b6dc8c3a81c7891ef5f12](https://github.com/sagemath/sagetrac-mirror/commit/f1c7fd57d513efda616b6dc8c3a81c7891ef5f12)\".",
    "created_at": "2015-08-18T12:25:03Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269849",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[73dd6d5e0a69e8c26ba23bf5425a9b4122a34ff6](https://github.com/sagemath/sagetrac-mirror/commit/73dd6d5e0a69e8c26ba23bf5425a9b4122a34ff6)" to "[f1c7fd57d513efda616b6dc8c3a81c7891ef5f12](https://github.com/sagemath/sagetrac-mirror/commit/f1c7fd57d513efda616b6dc8c3a81c7891ef5f12)".



---

archive/issue_comments_269850.json:
```json
{
    "body": "<a id='comment:29'></a>\nNote that the patchbot needs a lot of time: it is not tested instantaneously and it takes some hours of computations...",
    "created_at": "2015-08-18T12:27:36Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269850",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:29'></a>
Note that the patchbot needs a lot of time: it is not tested instantaneously and it takes some hours of computations...



---

archive/issue_comments_269851.json:
```json
{
    "body": "<a id='comment:30'></a>\nOk, I will wait until it answers... In my opinion, the problem is that we need to import centrality.pyx in generic_graph at startup, and this slows down the startup time. I tried to change the imports, hoping the total time will decrease. If any of the two attempts work, we are fine, otherwise I probably have to mail sage-devel...",
    "created_at": "2015-08-18T12:31:19Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269851",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

<a id='comment:30'></a>
Ok, I will wait until it answers... In my opinion, the problem is that we need to import centrality.pyx in generic_graph at startup, and this slows down the startup time. I tried to change the imports, hoping the total time will decrease. If any of the two attempts work, we are fine, otherwise I probably have to mail sage-devel...



---

archive/issue_comments_269852.json:
```json
{
    "body": "<a id='comment:31'></a>\nWell, generic graph is becoming really really big with lots of tests.\nFor instance, do we really need the tests with `for i in range(100): `. Can't we have only one test we randomly chosen number of edges? That should be enough.\n\nDavid.",
    "created_at": "2015-08-18T12:37:58Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269852",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:31'></a>
Well, generic graph is becoming really really big with lots of tests.
For instance, do we really need the tests with `for i in range(100): `. Can't we have only one test we randomly chosen number of edges? That should be enough.

David.



---

archive/issue_comments_269853.json:
```json
{
    "body": "<a id='comment:32'></a>\nI'm afraid that all the attempts I have made were unsuccessful. The point is that importing module `centrality.pyx` at startup is expensive, and I need it to import it to add method `centrality_closeness` to `GenericGraph`. Hence, the startup time becomes 2 seconds (too much).\n\nIn my opinion, this might be a reason why it is better to leave method `centrality_closeness` in `generic_graph`, and put only Cython-related methods inside `centrality.pyx`, in order to use lazy imports. May I move method centrality_closeness back?\n\nIf we still want to move `centrality_closeness` and related methods to `centrality.pyx`, I think we should open another ticket, in order to find a way to use lazy imports (I have no idea how, though).",
    "created_at": "2015-08-19T09:58:58Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269853",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

<a id='comment:32'></a>
I'm afraid that all the attempts I have made were unsuccessful. The point is that importing module `centrality.pyx` at startup is expensive, and I need it to import it to add method `centrality_closeness` to `GenericGraph`. Hence, the startup time becomes 2 seconds (too much).

In my opinion, this might be a reason why it is better to leave method `centrality_closeness` in `generic_graph`, and put only Cython-related methods inside `centrality.pyx`, in order to use lazy imports. May I move method centrality_closeness back?

If we still want to move `centrality_closeness` and related methods to `centrality.pyx`, I think we should open another ticket, in order to find a way to use lazy imports (I have no idea how, though).



---

archive/issue_comments_269854.json:
```json
{
    "body": "<a id='comment:33'></a>\nok, move it back to generic graph.\nDavid.",
    "created_at": "2015-08-19T10:01:20Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269854",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:33'></a>
ok, move it back to generic graph.
David.



---

archive/issue_comments_269855.json:
```json
{
    "body": "**Changing commit** from \"[f1c7fd57d513efda616b6dc8c3a81c7891ef5f12](https://github.com/sagemath/sagetrac-mirror/commit/f1c7fd57d513efda616b6dc8c3a81c7891ef5f12)\" to \"[1551c6fd513cd4f7ac6c787badd589cf349fb788](https://github.com/sagemath/sagetrac-mirror/commit/1551c6fd513cd4f7ac6c787badd589cf349fb788)\".",
    "created_at": "2015-08-19T12:55:42Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269855",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[f1c7fd57d513efda616b6dc8c3a81c7891ef5f12](https://github.com/sagemath/sagetrac-mirror/commit/f1c7fd57d513efda616b6dc8c3a81c7891ef5f12)" to "[1551c6fd513cd4f7ac6c787badd589cf349fb788](https://github.com/sagemath/sagetrac-mirror/commit/1551c6fd513cd4f7ac6c787badd589cf349fb788)".



---

archive/issue_comments_269856.json:
```json
{
    "body": "<a id='comment:34'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1551c6fd513cd4f7ac6c787badd589cf349fb788\">1551c6f</a></td><td><code>Undo commit moving closeness_centrality to centrality.pyx. Corrected links.</code></td></tr></table>\n",
    "created_at": "2015-08-19T12:55:42Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269856",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1551c6fd513cd4f7ac6c787badd589cf349fb788">1551c6f</a></td><td><code>Undo commit moving closeness_centrality to centrality.pyx. Corrected links.</code></td></tr></table>




---

archive/issue_comments_269857.json:
```json
{
    "body": "**Reviewer:** David Coudert",
    "created_at": "2015-08-19T13:03:27Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269857",
    "user": "https://github.com/dcoudert"
}
```

**Reviewer:** David Coudert



---

archive/issue_comments_269858.json:
```json
{
    "body": "<a id='comment:35'></a>\nFor me the patch is good to go, but I prefer to wait for the next patchbot answer.\nDavid.",
    "created_at": "2015-08-19T13:03:27Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269858",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:35'></a>
For me the patch is good to go, but I prefer to wait for the next patchbot answer.
David.



---

archive/issue_events_170965.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2015-08-20T06:34:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19007#event-170965"
}
```



---

archive/issue_events_170966.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2015-08-20T06:34:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19007#event-170966"
}
```



---

archive/issue_comments_269859.json:
```json
{
    "body": "<a id='comment:36'></a>\nSince the patchbot reports no error and that the patch passes all tests/docbuild/etc. on my computer, I set it to positive review.\nThanks.\nDavid.",
    "created_at": "2015-08-20T06:34:11Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269859",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:36'></a>
Since the patchbot reports no error and that the patch passes all tests/docbuild/etc. on my computer, I set it to positive review.
Thanks.
David.



---

archive/issue_events_170967.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-08-21T01:56:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19007#event-170967"
}
```



---

archive/issue_events_170968.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-08-21T01:56:20Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19007#event-170968"
}
```



---

archive/issue_comments_269860.json:
```json
{
    "body": "**Changing branch** from \"[u/borassi/refactor_centrality_closeness](https://github.com/sagemath/sagetrac-mirror/tree/u/borassi/refactor_centrality_closeness)\" to \"[1551c6fd513cd4f7ac6c787badd589cf349fb788](https://github.com/sagemath/sagetrac-mirror/commit/1551c6fd513cd4f7ac6c787badd589cf349fb788)\".",
    "created_at": "2015-08-21T01:56:20Z",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269860",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/borassi/refactor_centrality_closeness](https://github.com/sagemath/sagetrac-mirror/tree/u/borassi/refactor_centrality_closeness)" to "[1551c6fd513cd4f7ac6c787badd589cf349fb788](https://github.com/sagemath/sagetrac-mirror/commit/1551c6fd513cd4f7ac6c787badd589cf349fb788)".
