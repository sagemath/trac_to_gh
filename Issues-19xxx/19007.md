# Issue 19007: Refactor Closeness Centrality

archive/issues_018770.json:
```json
{
    "assignees": [],
    "body": "Now, the closeness centrality algorithm simply calls the corresponding NetworkX routine (only for undirected graphs).\n\nThis ticket will move this routine to file generic_graph (closeness centrality is defined also in this case ![1]), and it will modify input/output variables as in routine shortest_path. Then, it will call our shortest path new routines instead of NetworkX routines.\n\nThis ticket is a first step towards the inclusion of the algorithm in ![2].\n\n![1] !http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=6816651&tag=1\n\n![2] !http://arxiv.org/pdf/1507.01490v1.pdf\n\nDepends on #18931\nDepends on #18876\nDepends on #18910\n\nCC:  @nathanncohen @dcoudert\n\nKeywords: **Closeness centrality**\n\nBranch/Commit: **[1551c6f](https://github.com/sagemath/sagetrac-mirror/commit/1551c6fd513cd4f7ac6c787badd589cf349fb788)**\n\nReviewer: **David Coudert**\n\nAuthor: **Michele Borassi**\n\nComponent: **graph theory**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/19007_\n\n",
    "closed_at": "2015-08-21T01:56:20Z",
    "created_at": "2015-08-10T08:08:44Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.9",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Refactor Closeness Centrality",
    "type": "issue",
    "updated_at": "2015-08-21T01:56:20Z",
    "url": "https://github.com/sagemath/sage/issues/19007",
    "user": "https://github.com/sagetrac-borassi"
}
```
Now, the closeness centrality algorithm simply calls the corresponding NetworkX routine (only for undirected graphs).

This ticket will move this routine to file generic_graph (closeness centrality is defined also in this case ![1]), and it will modify input/output variables as in routine shortest_path. Then, it will call our shortest path new routines instead of NetworkX routines.

This ticket is a first step towards the inclusion of the algorithm in ![2].

![1] !http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=6816651&tag=1

![2] !http://arxiv.org/pdf/1507.01490v1.pdf

Depends on #18931
Depends on #18876
Depends on #18910

CC:  @nathanncohen @dcoudert

Keywords: **Closeness centrality**

Branch/Commit: **[1551c6f](https://github.com/sagemath/sagetrac-mirror/commit/1551c6fd513cd4f7ac6c787badd589cf349fb788)**

Reviewer: **David Coudert**

Author: **Michele Borassi**

Component: **graph theory**

_Issue created by migration from https://trac.sagemath.org/ticket/19007_





---

archive/issue_events_269777.json:
```json
{
    "actor": "https://github.com/sagetrac-borassi",
    "created_at": "2015-08-10T08:08:44Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "milestone_number": null,
    "milestone_title": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19007#event-269777"
}
```



---

archive/issue_events_269778.json:
```json
{
    "actor": "https://github.com/sagetrac-borassi",
    "created_at": "2015-08-10T08:08:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19007#event-269778"
}
```



---

archive/issue_events_269779.json:
```json
{
    "actor": "https://github.com/sagetrac-borassi",
    "created_at": "2015-08-10T09:38:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19007#event-269779"
}
```



---

archive/issue_events_269780.json:
```json
{
    "actor": "https://github.com/sagetrac-borassi",
    "created_at": "2015-08-10T09:38:32Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "title_is": "Refactor Closeness Centrality",
    "title_was": "refactor_centrality_closeness",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19007#event-269780"
}
```



---

archive/issue_events_269781.json:
```json
{
    "actor": "https://github.com/sagetrac-borassi",
    "created_at": "2015-08-10T09:38:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19007#event-269781"
}
```



---

archive/issue_comments_267376.json:
```json
{
    "body": "Author: **Michele Borassi**",
    "created_at": "2015-08-10T09:38:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267376",
    "user": "https://github.com/sagetrac-borassi"
}
```

Author: **Michele Borassi**



---

archive/issue_comments_267377.json:
```json
{
    "body": "Changed keywords from none to **Closeness centrality**",
    "created_at": "2015-08-10T09:38:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267377",
    "user": "https://github.com/sagetrac-borassi"
}
```

Changed keywords from none to **Closeness centrality**



---

archive/issue_comments_267378.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,9 @@\n+Now, the closeness centrality algorithm simply calls the corresponding NetworkX routine (only for undirected graphs).\n \n+This ticket will move this routine to file generic_graph (closeness centrality is defined also in this case ![1]), and it will modify input/output variables as in routine shortest_path. Then, it will call our shortest path new routines instead of NetworkX routines.\n+\n+This ticket is a first step towards the inclusion of the algorithm in ![2].\n+\n+![1] !http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=6816651&tag=1\n+\n+![2] !http://arxiv.org/pdf/1507.01490v1.pdf\n``````\n",
    "created_at": "2015-08-10T09:38:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267378",
    "user": "https://github.com/sagetrac-borassi"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,9 @@
+Now, the closeness centrality algorithm simply calls the corresponding NetworkX routine (only for undirected graphs).
 
+This ticket will move this routine to file generic_graph (closeness centrality is defined also in this case ![1]), and it will modify input/output variables as in routine shortest_path. Then, it will call our shortest path new routines instead of NetworkX routines.
+
+This ticket is a first step towards the inclusion of the algorithm in ![2].
+
+![1] !http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=6816651&tag=1
+
+![2] !http://arxiv.org/pdf/1507.01490v1.pdf
``````




---

archive/issue_comments_267379.json:
```json
{
    "body": "Branch: **[u/borassi/refactor_centrality_closeness](https://github.com/sagemath/sagetrac-mirror/tree/u/borassi/refactor_centrality_closeness)**",
    "created_at": "2015-08-13T16:51:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267379",
    "user": "https://github.com/sagetrac-borassi"
}
```

Branch: **[u/borassi/refactor_centrality_closeness](https://github.com/sagemath/sagetrac-mirror/tree/u/borassi/refactor_centrality_closeness)**



---

archive/issue_comments_267380.json:
```json
{
    "body": "Dependencies: **#18931, #18876, #18910**",
    "created_at": "2015-08-13T16:54:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267380",
    "user": "https://github.com/sagetrac-borassi"
}
```

Dependencies: **#18931, #18876, #18910**



---

archive/issue_events_269782.json:
```json
{
    "actor": "https://github.com/sagetrac-borassi",
    "created_at": "2015-08-13T16:54:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19007#event-269782"
}
```



---

archive/issue_comments_267381.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nHello!\n\nThis is the first version of the refactoring of closeness_centrality. Let me know if you like it!",
    "created_at": "2015-08-13T16:54:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267381",
    "user": "https://github.com/sagetrac-borassi"
}
```

<div id="comment:3" align="right">comment:3</div>

Hello!

This is the first version of the refactoring of closeness_centrality. Let me know if you like it!



---

archive/issue_comments_267382.json:
```json
{
    "body": "Commit: **[5c85793](https://github.com/sagemath/sagetrac-mirror/commit/5c85793ccb8234ac668173620523f45dbae4b985)**",
    "created_at": "2015-08-13T16:54:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267382",
    "user": "https://github.com/sagetrac-borassi"
}
```

Commit: **[5c85793](https://github.com/sagemath/sagetrac-mirror/commit/5c85793ccb8234ac668173620523f45dbae4b985)**



---

archive/issue_comments_267383.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI don't really understand what you are doing in this commit\nhttps://github.com/sagemath/sagetrac-mirror/commits/5c85793ccb8234ac668173620523f45dbae4b985\n\nIn the ticket description you say that you will move everything in `generic_graph`, but it might be more readable/clean to create a new file for centrality measures, no?\nAlso, you moved only references to the methods, right? (or the modifications are hidden in the merge with #18931).\n\n```\n+            - :meth:`~sage.graphs.graph.Graph.centrality_degree`\n+            - :meth:`~centrality_betweenness`\n```\n\nDavid.",
    "created_at": "2015-08-13T17:47:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267383",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:4" align="right">comment:4</div>

I don't really understand what you are doing in this commit
https://github.com/sagemath/sagetrac-mirror/commits/5c85793ccb8234ac668173620523f45dbae4b985

In the ticket description you say that you will move everything in `generic_graph`, but it might be more readable/clean to create a new file for centrality measures, no?
Also, you moved only references to the methods, right? (or the modifications are hidden in the merge with #18931).

```
+            - :meth:`~sage.graphs.graph.Graph.centrality_degree`
+            - :meth:`~centrality_betweenness`
```

David.



---

archive/issue_comments_267384.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5853eb73a9705229a1947fe89b91624117683e59\">5853eb7</a></td><td><code>Merged with beta2</code></td></tr></table>\n",
    "created_at": "2015-08-14T09:48:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267384",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5853eb73a9705229a1947fe89b91624117683e59">5853eb7</a></td><td><code>Merged with beta2</code></td></tr></table>




---

archive/issue_comments_267385.json:
```json
{
    "body": "Changed commit from **[5c85793](https://github.com/sagemath/sagetrac-mirror/commit/5c85793ccb8234ac668173620523f45dbae4b985)** to **[5853eb7](https://github.com/sagemath/sagetrac-mirror/commit/5853eb73a9705229a1947fe89b91624117683e59)**",
    "created_at": "2015-08-14T09:48:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267385",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5c85793](https://github.com/sagemath/sagetrac-mirror/commit/5c85793ccb8234ac668173620523f45dbae4b985)** to **[5853eb7](https://github.com/sagemath/sagetrac-mirror/commit/5853eb73a9705229a1947fe89b91624117683e59)**



---

archive/issue_comments_267386.json:
```json
{
    "body": "Changed commit from **[5853eb7](https://github.com/sagemath/sagetrac-mirror/commit/5853eb73a9705229a1947fe89b91624117683e59)** to **[a19addb](https://github.com/sagemath/sagetrac-mirror/commit/a19addbd50db4086adbfc88c29b5c01f368dabc6)**",
    "created_at": "2015-08-14T10:13:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267386",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5853eb7](https://github.com/sagemath/sagetrac-mirror/commit/5853eb73a9705229a1947fe89b91624117683e59)** to **[a19addb](https://github.com/sagemath/sagetrac-mirror/commit/a19addbd50db4086adbfc88c29b5c01f368dabc6)**



---

archive/issue_comments_267387.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a19addbd50db4086adbfc88c29b5c01f368dabc6\">a19addb</a></td><td><code>Rewrote closeness centrality according to new standards</code></td></tr></table>\n",
    "created_at": "2015-08-14T10:13:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267387",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a19addbd50db4086adbfc88c29b5c01f368dabc6">a19addb</a></td><td><code>Rewrote closeness centrality according to new standards</code></td></tr></table>




---

archive/issue_comments_267388.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nHello!\n\nThank you for the comment, I will try to address the main issues raised.\n\nI have put everything in a single commit, which simply removes the closeness centrality routine from `graph.py` and rewrites it in `generic_graph.py`. Now the ticket should be much easier to review. Since closeness centrality highly depends on shortest paths, the new routine follows all conventions in ticket #18931.\n\nAbout the creation of a new file: we already have file `centrality.pyx`, containing fast algorithms for betweenness centrality. However, these routines are called from a `centrality_betweenness` routine in file `generic_graph.py`, which should be used by the user. In this ticket, I just copied this policy.\n\nIn my opinion, if we want to create a new file, we should at least move also betweenness centrality and degree centrality: in my opinion, this goes beyond the scope of this ticket. Do you agree?\n\nBest,\n\nMichele\n\nReplying to [@dcoudert](#comment:4):\n\n> I don't really understand what you are doing in this commit\n> https://github.com/sagemath/sagetrac-mirror/commits/5c85793ccb8234ac668173620523f45dbae4b985\n> \n> In the ticket description you say that you will move everything in `generic_graph`, but it might be more readable/clean to create a new file for centrality measures, no?\n> Also, you moved only references to the methods, right? (or the modifications are hidden in the merge with #18931).\n> \n> ```\n> +            - :meth:`~sage.graphs.graph.Graph.centrality_degree`\n> +            - :meth:`~centrality_betweenness`\n> ```\n> \n> David.",
    "created_at": "2015-08-14T12:25:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267388",
    "user": "https://github.com/sagetrac-borassi"
}
```

<div id="comment:7" align="right">comment:7</div>

Hello!

Thank you for the comment, I will try to address the main issues raised.

I have put everything in a single commit, which simply removes the closeness centrality routine from `graph.py` and rewrites it in `generic_graph.py`. Now the ticket should be much easier to review. Since closeness centrality highly depends on shortest paths, the new routine follows all conventions in ticket #18931.

About the creation of a new file: we already have file `centrality.pyx`, containing fast algorithms for betweenness centrality. However, these routines are called from a `centrality_betweenness` routine in file `generic_graph.py`, which should be used by the user. In this ticket, I just copied this policy.

In my opinion, if we want to create a new file, we should at least move also betweenness centrality and degree centrality: in my opinion, this goes beyond the scope of this ticket. Do you agree?

Best,

Michele

Replying to [@dcoudert](#comment:4):

> I don't really understand what you are doing in this commit
> https://github.com/sagemath/sagetrac-mirror/commits/5c85793ccb8234ac668173620523f45dbae4b985
> 
> In the ticket description you say that you will move everything in `generic_graph`, but it might be more readable/clean to create a new file for centrality measures, no?
> Also, you moved only references to the methods, right? (or the modifications are hidden in the merge with #18931).
> 
> ```
> +            - :meth:`~sage.graphs.graph.Graph.centrality_degree`
> +            - :meth:`~centrality_betweenness`
> ```
> 
> David.



---

archive/issue_comments_267389.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nSomething is wrong here\n\n```\n+            try:\n+                v_iter = iter(vert)\n+            except TypeError:\n+                v_iter = [v_iter]\n+                v_iter = iter(vert)\n```\nI assume you want first to have `v_vert = iter(list(vert))\n\nThe default of calling `distances = self.shortest_path_all_pairs(by_weight,algorithm, weight_function, check_weight)[0]` is that you get a dictionary of dictionary, that is a huge data structure for large graphs (lost of memory and long to create). At least the second part of this method should be cythonized to get the array of distances, as is done for `centrality_betweenness`.\n\nDavid.",
    "created_at": "2015-08-14T15:14:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267389",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:8" align="right">comment:8</div>

Something is wrong here

```
+            try:
+                v_iter = iter(vert)
+            except TypeError:
+                v_iter = [v_iter]
+                v_iter = iter(vert)
```
I assume you want first to have `v_vert = iter(list(vert))

The default of calling `distances = self.shortest_path_all_pairs(by_weight,algorithm, weight_function, check_weight)[0]` is that you get a dictionary of dictionary, that is a huge data structure for large graphs (lost of memory and long to create). At least the second part of this method should be cythonized to get the array of distances, as is done for `centrality_betweenness`.

David.



---

archive/issue_comments_267390.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\n> Something is wrong here\n> \n> ```\n> +            try:\n> +                v_iter = iter(vert)\n> +            except TypeError:\n> +                v_iter = [v_iter]\n> +                v_iter = iter(vert)\n> ```\n\n+1.\n\nIn some cases a vertex can be a pair, and thus is iterable. This would react badly with this code.\n\n```\nsage: g=graphs.KneserGraph(5,2)\nsage: v=g.vertices()[0]\nsage: g.centrality_closeness(v)\n<crash>\n```\n\nNathann",
    "created_at": "2015-08-14T15:18:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267390",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:9" align="right">comment:9</div>

> Something is wrong here
> 
> ```
> +            try:
> +                v_iter = iter(vert)
> +            except TypeError:
> +                v_iter = [v_iter]
> +                v_iter = iter(vert)
> ```

+1.

In some cases a vertex can be a pair, and thus is iterable. This would react badly with this code.

```
sage: g=graphs.KneserGraph(5,2)
sage: v=g.vertices()[0]
sage: g.centrality_closeness(v)
<crash>
```

Nathann



---

archive/issue_comments_267391.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nRight. My previous proposal is not a good solution.\nSomething like that might also be unsafe if some labels in `vert` are not in `G`, but this can be checked when trying to associate computed values and vertices.\n\n```\nv_vert = iter([vert]) if vert in G else iter(vert)\n```",
    "created_at": "2015-08-14T15:45:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267391",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:10" align="right">comment:10</div>

Right. My previous proposal is not a good solution.
Something like that might also be unsafe if some labels in `vert` are not in `G`, but this can be checked when trying to associate computed values and vertices.

```
v_vert = iter([vert]) if vert in G else iter(vert)
```



---

archive/issue_comments_267392.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7dfa2d26bcaf422f60b3ffd083bc535048922b2f\">7dfa2d2</a></td><td><code>Corrected v_iter, cythonized Johnson</code></td></tr></table>\n",
    "created_at": "2015-08-16T16:43:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267392",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7dfa2d26bcaf422f60b3ffd083bc535048922b2f">7dfa2d2</a></td><td><code>Corrected v_iter, cythonized Johnson</code></td></tr></table>




---

archive/issue_comments_267393.json:
```json
{
    "body": "Changed commit from **[a19addb](https://github.com/sagemath/sagetrac-mirror/commit/a19addbd50db4086adbfc88c29b5c01f368dabc6)** to **[7dfa2d2](https://github.com/sagemath/sagetrac-mirror/commit/7dfa2d26bcaf422f60b3ffd083bc535048922b2f)**",
    "created_at": "2015-08-16T16:43:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267393",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[a19addb](https://github.com/sagemath/sagetrac-mirror/commit/a19addbd50db4086adbfc88c29b5c01f368dabc6)** to **[7dfa2d2](https://github.com/sagemath/sagetrac-mirror/commit/7dfa2d26bcaf422f60b3ffd083bc535048922b2f)**



---

archive/issue_comments_267394.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nHello!\n\nI hope you spent a great Assumption day!\n\nWith this new commit, (hopefully) I solved the problems with\u00a0`v_vert`  and I cythonized the Johnson algorithm. In my opinion, it is not worth  cythonizing Floyd-Warshall, because it is much slower than Johnson,  especially on sparse graphs.\n\nThank you very much!\n\nMichele",
    "created_at": "2015-08-16T16:46:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267394",
    "user": "https://github.com/sagetrac-borassi"
}
```

<div id="comment:12" align="right">comment:12</div>

Hello!

I hope you spent a great Assumption day!

With this new commit, (hopefully) I solved the problems with `v_vert`  and I cythonized the Johnson algorithm. In my opinion, it is not worth  cythonizing Floyd-Warshall, because it is much slower than Johnson,  especially on sparse graphs.

Thank you very much!

Michele



---

archive/issue_comments_267395.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nHello,\n\nI'm trying to understand the behavior of the method on digraphs.\nYou wrote that the centrality of vertices of degree 0 is not reported. Does it means that for digraphs you don't report the centrality of vertices with out-degree 0?\nAlso, what's the expected behavior on strongly connected digraphs?\n\nDavid.",
    "created_at": "2015-08-17T09:41:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267395",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:13" align="right">comment:13</div>

Hello,

I'm trying to understand the behavior of the method on digraphs.
You wrote that the centrality of vertices of degree 0 is not reported. Does it means that for digraphs you don't report the centrality of vertices with out-degree 0?
Also, what's the expected behavior on strongly connected digraphs?

David.



---

archive/issue_comments_267396.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7a4059a8803326baf32f9922307d9f7ee3ce7238\">7a4059a</a></td><td><code>Improved documentation</code></td></tr></table>\n",
    "created_at": "2015-08-17T11:09:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267396",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7a4059a8803326baf32f9922307d9f7ee3ce7238">7a4059a</a></td><td><code>Improved documentation</code></td></tr></table>




---

archive/issue_comments_267397.json:
```json
{
    "body": "Changed commit from **[7dfa2d2](https://github.com/sagemath/sagetrac-mirror/commit/7dfa2d26bcaf422f60b3ffd083bc535048922b2f)** to **[7a4059a](https://github.com/sagemath/sagetrac-mirror/commit/7a4059a8803326baf32f9922307d9f7ee3ce7238)**",
    "created_at": "2015-08-17T11:09:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267397",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7dfa2d2](https://github.com/sagemath/sagetrac-mirror/commit/7dfa2d26bcaf422f60b3ffd083bc535048922b2f)** to **[7a4059a](https://github.com/sagemath/sagetrac-mirror/commit/7a4059a8803326baf32f9922307d9f7ee3ce7238)**



---

archive/issue_comments_267398.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5c67f79dcb519e1df3a76021677a8292583a3d31\">5c67f79</a></td><td><code>Small mistake</code></td></tr></table>\n",
    "created_at": "2015-08-17T11:09:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267398",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5c67f79dcb519e1df3a76021677a8292583a3d31">5c67f79</a></td><td><code>Small mistake</code></td></tr></table>




---

archive/issue_comments_267399.json:
```json
{
    "body": "Changed commit from **[7a4059a](https://github.com/sagemath/sagetrac-mirror/commit/7a4059a8803326baf32f9922307d9f7ee3ce7238)** to **[5c67f79](https://github.com/sagemath/sagetrac-mirror/commit/5c67f79dcb519e1df3a76021677a8292583a3d31)**",
    "created_at": "2015-08-17T11:09:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267399",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7a4059a](https://github.com/sagemath/sagetrac-mirror/commit/7a4059a8803326baf32f9922307d9f7ee3ce7238)** to **[5c67f79](https://github.com/sagemath/sagetrac-mirror/commit/5c67f79dcb519e1df3a76021677a8292583a3d31)**



---

archive/issue_comments_267400.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nHello!\n\nI tried to improve the documentation, answering your questions.\n\nMichele\n\nReplying to [@dcoudert](#comment:13):\n\n> You wrote that the centrality of vertices of degree 0 is not reported. Does it means that for digraphs you don't report the centrality of vertices with out-degree 0?\n\nYes, I changed in the documentation \"degree\" with \"(out)degree\"\n\n> Also, what's the expected behavior on strongly connected digraphs?\n\nThe closeness centrality of a vertex v is 1/farn(v), where farn(v) is the average distance between v and a random vertex w different from v (as in the case of connected graphs). I added an example about this.",
    "created_at": "2015-08-17T11:13:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267400",
    "user": "https://github.com/sagetrac-borassi"
}
```

<div id="comment:16" align="right">comment:16</div>

Hello!

I tried to improve the documentation, answering your questions.

Michele

Replying to [@dcoudert](#comment:13):

> You wrote that the centrality of vertices of degree 0 is not reported. Does it means that for digraphs you don't report the centrality of vertices with out-degree 0?

Yes, I changed in the documentation "degree" with "(out)degree"

> Also, what's the expected behavior on strongly connected digraphs?

The closeness centrality of a vertex v is 1/farn(v), where farn(v) is the average distance between v and a random vertex w different from v (as in the case of connected graphs). I added an example about this.



---

archive/issue_comments_267401.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nHello,\n\nThis is much better now. The method works well, passes all tests and the doc build properly.\n\nOne possible modification is to move the method to file `centrality.pyx` which is made for  gathering centrality methods. Let me know.\n\nBest,\nDavid.",
    "created_at": "2015-08-17T12:03:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267401",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:17" align="right">comment:17</div>

Hello,

This is much better now. The method works well, passes all tests and the doc build properly.

One possible modification is to move the method to file `centrality.pyx` which is made for  gathering centrality methods. Let me know.

Best,
David.



---

archive/issue_comments_267402.json:
```json
{
    "body": "Changed commit from **[5c67f79](https://github.com/sagemath/sagetrac-mirror/commit/5c67f79dcb519e1df3a76021677a8292583a3d31)** to **[48514ad](https://github.com/sagemath/sagetrac-mirror/commit/48514adedac2e122137907f410a92dcd5e6e6e3c)**",
    "created_at": "2015-08-17T14:23:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267402",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5c67f79](https://github.com/sagemath/sagetrac-mirror/commit/5c67f79dcb519e1df3a76021677a8292583a3d31)** to **[48514ad](https://github.com/sagemath/sagetrac-mirror/commit/48514adedac2e122137907f410a92dcd5e6e6e3c)**



---

archive/issue_comments_267403.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/48514adedac2e122137907f410a92dcd5e6e6e3c\">48514ad</a></td><td><code>Moved centrality_closeness to centrality.pyx</code></td></tr></table>\n",
    "created_at": "2015-08-17T14:23:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267403",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/48514adedac2e122137907f410a92dcd5e6e6e3c">48514ad</a></td><td><code>Moved centrality_closeness to centrality.pyx</code></td></tr></table>




---

archive/issue_comments_267404.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nDone!\n\nHowever, I had to do some \"magic\" to avoid duplicate references... Hope it is ok!",
    "created_at": "2015-08-17T14:30:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267404",
    "user": "https://github.com/sagetrac-borassi"
}
```

<div id="comment:19" align="right">comment:19</div>

Done!

However, I had to do some "magic" to avoid duplicate references... Hope it is ok!



---

archive/issue_comments_267405.json:
```json
{
    "body": "Changed commit from **[48514ad](https://github.com/sagemath/sagetrac-mirror/commit/48514adedac2e122137907f410a92dcd5e6e6e3c)** to **[cf9cf87](https://github.com/sagemath/sagetrac-mirror/commit/cf9cf870c430b7f4ba06ec990fa37cf9ae66290d)**",
    "created_at": "2015-08-17T15:11:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267405",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[48514ad](https://github.com/sagemath/sagetrac-mirror/commit/48514adedac2e122137907f410a92dcd5e6e6e3c)** to **[cf9cf87](https://github.com/sagemath/sagetrac-mirror/commit/cf9cf870c430b7f4ba06ec990fa37cf9ae66290d)**



---

archive/issue_comments_267406.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cf9cf870c430b7f4ba06ec990fa37cf9ae66290d\">cf9cf87</a></td><td><code>Trailing whitespaces</code></td></tr></table>\n",
    "created_at": "2015-08-17T15:11:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267406",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cf9cf870c430b7f4ba06ec990fa37cf9ae66290d">cf9cf87</a></td><td><code>Trailing whitespaces</code></td></tr></table>




---

archive/issue_comments_267407.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nYep, I add to `make doc-clean && make doc` to get it compiled.\n\nI just saw in the doc of `centrality_degree` in `graph.py`, in section See also, that the link to `centrality_closeness` is broken. In fact, the code is <code>:meth:\\`centrality_closeness\\`</code>. Could you check that?\nIn fact we should also move this methode to `centrality.pyx`, but in another ticket.\n\nAfter that I think it will be ok.\n\nDavid.",
    "created_at": "2015-08-17T17:23:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267407",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:21" align="right">comment:21</div>

Yep, I add to `make doc-clean && make doc` to get it compiled.

I just saw in the doc of `centrality_degree` in `graph.py`, in section See also, that the link to `centrality_closeness` is broken. In fact, the code is <code>:meth:\`centrality_closeness\`</code>. Could you check that?
In fact we should also move this methode to `centrality.pyx`, but in another ticket.

After that I think it will be ok.

David.



---

archive/issue_comments_267408.json:
```json
{
    "body": "Changed commit from **[cf9cf87](https://github.com/sagemath/sagetrac-mirror/commit/cf9cf870c430b7f4ba06ec990fa37cf9ae66290d)** to **[90638aa](https://github.com/sagemath/sagetrac-mirror/commit/90638aa3a78bf992aa29902f929f131a973c021e)**",
    "created_at": "2015-08-18T07:46:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267408",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[cf9cf87](https://github.com/sagemath/sagetrac-mirror/commit/cf9cf870c430b7f4ba06ec990fa37cf9ae66290d)** to **[90638aa](https://github.com/sagemath/sagetrac-mirror/commit/90638aa3a78bf992aa29902f929f131a973c021e)**



---

archive/issue_comments_267409.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/90638aa3a78bf992aa29902f929f131a973c021e\">90638aa</a></td><td><code>Corrected link</code></td></tr></table>\n",
    "created_at": "2015-08-18T07:46:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267409",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/90638aa3a78bf992aa29902f929f131a973c021e">90638aa</a></td><td><code>Corrected link</code></td></tr></table>




---

archive/issue_comments_267410.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nDone!",
    "created_at": "2015-08-18T07:46:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267410",
    "user": "https://github.com/sagetrac-borassi"
}
```

<div id="comment:23" align="right">comment:23</div>

Done!



---

archive/issue_comments_267411.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nHello,\n\ndo you understand why the patchbot reports some errors?\nI have no error when testing this patch on my computer (install, long tests, trials, docbuild html et pdf,...).\n\nBest,\nDavid.",
    "created_at": "2015-08-18T09:29:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267411",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:24" align="right">comment:24</div>

Hello,

do you understand why the patchbot reports some errors?
I have no error when testing this patch on my computer (install, long tests, trials, docbuild html et pdf,...).

Best,
David.



---

archive/issue_comments_267412.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nWhat is the patchbot? How can I find these errors?",
    "created_at": "2015-08-18T09:30:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267412",
    "user": "https://github.com/sagetrac-borassi"
}
```

<div id="comment:25" align="right">comment:25</div>

What is the patchbot? How can I find these errors?



---

archive/issue_comments_267413.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\non the top of this page, you can see a blue disk (or red or green, etc.) with a link to http://patchbot.sagemath.org/ticket/19007/\nIt reports on automatic tests of your patch. Tests are performed on all modules.",
    "created_at": "2015-08-18T09:33:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267413",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:26" align="right">comment:26</div>

on the top of this page, you can see a blue disk (or red or green, etc.) with a link to http://patchbot.sagemath.org/ticket/19007/
It reports on automatic tests of your patch. Tests are performed on all modules.



---

archive/issue_comments_267414.json:
```json
{
    "body": "<div id=\"comment:27\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/73dd6d5e0a69e8c26ba23bf5425a9b4122a34ff6\">73dd6d5</a></td><td><code>Solve patchbot - first attempt</code></td></tr></table>\n",
    "created_at": "2015-08-18T12:21:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267414",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/73dd6d5e0a69e8c26ba23bf5425a9b4122a34ff6">73dd6d5</a></td><td><code>Solve patchbot - first attempt</code></td></tr></table>




---

archive/issue_comments_267415.json:
```json
{
    "body": "Changed commit from **[90638aa](https://github.com/sagemath/sagetrac-mirror/commit/90638aa3a78bf992aa29902f929f131a973c021e)** to **[73dd6d5](https://github.com/sagemath/sagetrac-mirror/commit/73dd6d5e0a69e8c26ba23bf5425a9b4122a34ff6)**",
    "created_at": "2015-08-18T12:21:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267415",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[90638aa](https://github.com/sagemath/sagetrac-mirror/commit/90638aa3a78bf992aa29902f929f131a973c021e)** to **[73dd6d5](https://github.com/sagemath/sagetrac-mirror/commit/73dd6d5e0a69e8c26ba23bf5425a9b4122a34ff6)**



---

archive/issue_comments_267416.json:
```json
{
    "body": "<div id=\"comment:28\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f1c7fd57d513efda616b6dc8c3a81c7891ef5f12\">f1c7fd5</a></td><td><code>Solve patchbot - second attempt</code></td></tr></table>\n",
    "created_at": "2015-08-18T12:25:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267416",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f1c7fd57d513efda616b6dc8c3a81c7891ef5f12">f1c7fd5</a></td><td><code>Solve patchbot - second attempt</code></td></tr></table>




---

archive/issue_comments_267417.json:
```json
{
    "body": "Changed commit from **[73dd6d5](https://github.com/sagemath/sagetrac-mirror/commit/73dd6d5e0a69e8c26ba23bf5425a9b4122a34ff6)** to **[f1c7fd5](https://github.com/sagemath/sagetrac-mirror/commit/f1c7fd57d513efda616b6dc8c3a81c7891ef5f12)**",
    "created_at": "2015-08-18T12:25:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267417",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[73dd6d5](https://github.com/sagemath/sagetrac-mirror/commit/73dd6d5e0a69e8c26ba23bf5425a9b4122a34ff6)** to **[f1c7fd5](https://github.com/sagemath/sagetrac-mirror/commit/f1c7fd57d513efda616b6dc8c3a81c7891ef5f12)**



---

archive/issue_comments_267418.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nNote that the patchbot needs a lot of time: it is not tested instantaneously and it takes some hours of computations...",
    "created_at": "2015-08-18T12:27:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267418",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:29" align="right">comment:29</div>

Note that the patchbot needs a lot of time: it is not tested instantaneously and it takes some hours of computations...



---

archive/issue_comments_267419.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nOk, I will wait until it answers... In my opinion, the problem is that we need to import centrality.pyx in generic_graph at startup, and this slows down the startup time. I tried to change the imports, hoping the total time will decrease. If any of the two attempts work, we are fine, otherwise I probably have to mail sage-devel...",
    "created_at": "2015-08-18T12:31:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267419",
    "user": "https://github.com/sagetrac-borassi"
}
```

<div id="comment:30" align="right">comment:30</div>

Ok, I will wait until it answers... In my opinion, the problem is that we need to import centrality.pyx in generic_graph at startup, and this slows down the startup time. I tried to change the imports, hoping the total time will decrease. If any of the two attempts work, we are fine, otherwise I probably have to mail sage-devel...



---

archive/issue_comments_267420.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nWell, generic graph is becoming really really big with lots of tests.\nFor instance, do we really need the tests with `for i in range(100): `. Can't we have only one test we randomly chosen number of edges? That should be enough.\n\nDavid.",
    "created_at": "2015-08-18T12:37:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267420",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:31" align="right">comment:31</div>

Well, generic graph is becoming really really big with lots of tests.
For instance, do we really need the tests with `for i in range(100): `. Can't we have only one test we randomly chosen number of edges? That should be enough.

David.



---

archive/issue_comments_267421.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nI'm afraid that all the attempts I have made were unsuccessful. The point is that importing module `centrality.pyx` at startup is expensive, and I need it to import it to add method `centrality_closeness` to `GenericGraph`. Hence, the startup time becomes 2 seconds (too much).\n\nIn my opinion, this might be a reason why it is better to leave method `centrality_closeness` in `generic_graph`, and put only Cython-related methods inside `centrality.pyx`, in order to use lazy imports. May I move method centrality_closeness back?\n\nIf we still want to move `centrality_closeness` and related methods to `centrality.pyx`, I think we should open another ticket, in order to find a way to use lazy imports (I have no idea how, though).",
    "created_at": "2015-08-19T09:58:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267421",
    "user": "https://github.com/sagetrac-borassi"
}
```

<div id="comment:32" align="right">comment:32</div>

I'm afraid that all the attempts I have made were unsuccessful. The point is that importing module `centrality.pyx` at startup is expensive, and I need it to import it to add method `centrality_closeness` to `GenericGraph`. Hence, the startup time becomes 2 seconds (too much).

In my opinion, this might be a reason why it is better to leave method `centrality_closeness` in `generic_graph`, and put only Cython-related methods inside `centrality.pyx`, in order to use lazy imports. May I move method centrality_closeness back?

If we still want to move `centrality_closeness` and related methods to `centrality.pyx`, I think we should open another ticket, in order to find a way to use lazy imports (I have no idea how, though).



---

archive/issue_comments_267422.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nok, move it back to generic graph.\nDavid.",
    "created_at": "2015-08-19T10:01:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267422",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:33" align="right">comment:33</div>

ok, move it back to generic graph.
David.



---

archive/issue_comments_267423.json:
```json
{
    "body": "Changed commit from **[f1c7fd5](https://github.com/sagemath/sagetrac-mirror/commit/f1c7fd57d513efda616b6dc8c3a81c7891ef5f12)** to **[1551c6f](https://github.com/sagemath/sagetrac-mirror/commit/1551c6fd513cd4f7ac6c787badd589cf349fb788)**",
    "created_at": "2015-08-19T12:55:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267423",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[f1c7fd5](https://github.com/sagemath/sagetrac-mirror/commit/f1c7fd57d513efda616b6dc8c3a81c7891ef5f12)** to **[1551c6f](https://github.com/sagemath/sagetrac-mirror/commit/1551c6fd513cd4f7ac6c787badd589cf349fb788)**



---

archive/issue_comments_267424.json:
```json
{
    "body": "<div id=\"comment:34\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1551c6fd513cd4f7ac6c787badd589cf349fb788\">1551c6f</a></td><td><code>Undo commit moving closeness_centrality to centrality.pyx. Corrected links.</code></td></tr></table>\n",
    "created_at": "2015-08-19T12:55:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267424",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:34"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1551c6fd513cd4f7ac6c787badd589cf349fb788">1551c6f</a></td><td><code>Undo commit moving closeness_centrality to centrality.pyx. Corrected links.</code></td></tr></table>




---

archive/issue_comments_267425.json:
```json
{
    "body": "Reviewer: **David Coudert**",
    "created_at": "2015-08-19T13:03:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267425",
    "user": "https://github.com/dcoudert"
}
```

Reviewer: **David Coudert**



---

archive/issue_comments_267426.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nFor me the patch is good to go, but I prefer to wait for the next patchbot answer.\nDavid.",
    "created_at": "2015-08-19T13:03:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267426",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:35" align="right">comment:35</div>

For me the patch is good to go, but I prefer to wait for the next patchbot answer.
David.



---

archive/issue_events_269783.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2015-08-20T06:34:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19007#event-269783"
}
```



---

archive/issue_events_269784.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2015-08-20T06:34:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19007#event-269784"
}
```



---

archive/issue_comments_267427.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nSince the patchbot reports no error and that the patch passes all tests/docbuild/etc. on my computer, I set it to positive review.\nThanks.\nDavid.",
    "created_at": "2015-08-20T06:34:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267427",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:36" align="right">comment:36</div>

Since the patchbot reports no error and that the patch passes all tests/docbuild/etc. on my computer, I set it to positive review.
Thanks.
David.



---

archive/issue_events_269785.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-08-21T01:56:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19007#event-269785"
}
```



---

archive/issue_events_269786.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "30994dc2cbce2a5cf3f120c24600c24c07126744",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-08-21T01:56:20Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19007#event-269786"
}
```



---

archive/issue_comments_267428.json:
```json
{
    "body": "Changed branch from **[u/borassi/refactor_centrality_closeness](https://github.com/sagemath/sagetrac-mirror/tree/u/borassi/refactor_centrality_closeness)** to **[1551c6f](https://github.com/sagemath/sagetrac-mirror/commit/1551c6fd513cd4f7ac6c787badd589cf349fb788)**",
    "created_at": "2015-08-21T01:56:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-267428",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/borassi/refactor_centrality_closeness](https://github.com/sagemath/sagetrac-mirror/tree/u/borassi/refactor_centrality_closeness)** to **[1551c6f](https://github.com/sagemath/sagetrac-mirror/commit/1551c6fd513cd4f7ac6c787badd589cf349fb788)**
