# Issue 19007: Refactor Closeness Centrality

archive/issues_018770.json:
```json
{
    "assignees": [],
    "body": "Now, the closeness centrality algorithm simply calls the corresponding NetworkX routine (only for undirected graphs).\n\nThis ticket will move this routine to file generic_graph (closeness centrality is defined also in this case ![1]), and it will modify input/output variables as in routine shortest_path. Then, it will call our shortest path new routines instead of NetworkX routines.\n\nThis ticket is a first step towards the inclusion of the algorithm in ![2].\n\n![1] !http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=6816651&tag=1\n\n![2] !http://arxiv.org/pdf/1507.01490v1.pdf\n\nDepends on #18931\nDepends on #18876\nDepends on #18910\n\nCC:  @nathanncohen @dcoudert\n\nKeywords: **Closeness centrality**\n\nBranch/Commit: **[1551c6f](https://github.com/sagemath/sagetrac-mirror/commit/1551c6fd513cd4f7ac6c787badd589cf349fb788)**\n\nReviewer: **David Coudert**\n\nAuthor: **Michele Borassi**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/19007_\n\n",
    "closed_at": "2015-08-21T01:56:20Z",
    "created_at": "2015-08-10T08:08:44Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.9",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Refactor Closeness Centrality",
    "type": "issue",
    "updated_at": "2015-08-21T01:56:20Z",
    "url": "https://github.com/sagemath/sage/issues/19007",
    "user": "https://github.com/sagetrac-borassi"
}
```
Now, the closeness centrality algorithm simply calls the corresponding NetworkX routine (only for undirected graphs).

This ticket will move this routine to file generic_graph (closeness centrality is defined also in this case ![1]), and it will modify input/output variables as in routine shortest_path. Then, it will call our shortest path new routines instead of NetworkX routines.

This ticket is a first step towards the inclusion of the algorithm in ![2].

![1] !http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=6816651&tag=1

![2] !http://arxiv.org/pdf/1507.01490v1.pdf

Depends on #18931
Depends on #18876
Depends on #18910

CC:  @nathanncohen @dcoudert

Keywords: **Closeness centrality**

Branch/Commit: **[1551c6f](https://github.com/sagemath/sagetrac-mirror/commit/1551c6fd513cd4f7ac6c787badd589cf349fb788)**

Reviewer: **David Coudert**

Author: **Michele Borassi**

_Issue created by migration from https://trac.sagemath.org/ticket/19007_





---

archive/issue_events_242907.json:
```json
{
    "actor": "https://github.com/sagetrac-borassi",
    "created_at": "2015-08-10T08:08:44Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "milestone_number": null,
    "milestone_title": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19007#event-242907"
}
```



---

archive/issue_events_242908.json:
```json
{
    "actor": "https://github.com/sagetrac-borassi",
    "created_at": "2015-08-10T08:08:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19007#event-242908"
}
```



---

archive/issue_events_242909.json:
```json
{
    "actor": "https://github.com/sagetrac-borassi",
    "created_at": "2015-08-10T09:38:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "component: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19007#event-242909"
}
```



---

archive/issue_events_242910.json:
```json
{
    "actor": "https://github.com/sagetrac-borassi",
    "created_at": "2015-08-10T09:38:32Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "title_is": "Refactor Closeness Centrality",
    "title_was": "refactor_centrality_closeness",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19007#event-242910"
}
```



---

archive/issue_events_242911.json:
```json
{
    "actor": "https://github.com/sagetrac-borassi",
    "created_at": "2015-08-10T09:38:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19007#event-242911"
}
```



---

archive/issue_comments_269902.json:
```json
{
    "body": "Author: **Michele Borassi**",
    "created_at": "2015-08-10T09:38:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269902",
    "user": "https://github.com/sagetrac-borassi"
}
```

Author: **Michele Borassi**



---

archive/issue_comments_269903.json:
```json
{
    "body": "Changed keywords from **** to **Closeness centrality**",
    "created_at": "2015-08-10T09:38:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269903",
    "user": "https://github.com/sagetrac-borassi"
}
```

Changed keywords from **** to **Closeness centrality**



---

archive/issue_comments_269904.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,9 @@\n+Now, the closeness centrality algorithm simply calls the corresponding NetworkX routine (only for undirected graphs).\n \n+This ticket will move this routine to file generic_graph (closeness centrality is defined also in this case ![1]), and it will modify input/output variables as in routine shortest_path. Then, it will call our shortest path new routines instead of NetworkX routines.\n+\n+This ticket is a first step towards the inclusion of the algorithm in ![2].\n+\n+![1] !http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=6816651&tag=1\n+\n+![2] !http://arxiv.org/pdf/1507.01490v1.pdf\n``````\n",
    "created_at": "2015-08-10T09:38:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269904",
    "user": "https://github.com/sagetrac-borassi"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,9 @@
+Now, the closeness centrality algorithm simply calls the corresponding NetworkX routine (only for undirected graphs).
 
+This ticket will move this routine to file generic_graph (closeness centrality is defined also in this case ![1]), and it will modify input/output variables as in routine shortest_path. Then, it will call our shortest path new routines instead of NetworkX routines.
+
+This ticket is a first step towards the inclusion of the algorithm in ![2].
+
+![1] !http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=6816651&tag=1
+
+![2] !http://arxiv.org/pdf/1507.01490v1.pdf
``````




---

archive/issue_comments_269905.json:
```json
{
    "body": "Branch: **[u/borassi/refactor_centrality_closeness](https://github.com/sagemath/sagetrac-mirror/tree/u/borassi/refactor_centrality_closeness)**",
    "created_at": "2015-08-13T16:51:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269905",
    "user": "https://github.com/sagetrac-borassi"
}
```

Branch: **[u/borassi/refactor_centrality_closeness](https://github.com/sagemath/sagetrac-mirror/tree/u/borassi/refactor_centrality_closeness)**



---

archive/issue_comments_269906.json:
```json
{
    "body": "Dependencies: **#18931, #18876, #18910**",
    "created_at": "2015-08-13T16:54:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269906",
    "user": "https://github.com/sagetrac-borassi"
}
```

Dependencies: **#18931, #18876, #18910**



---

archive/issue_events_242912.json:
```json
{
    "actor": "https://github.com/sagetrac-borassi",
    "created_at": "2015-08-13T16:54:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19007#event-242912"
}
```



---

archive/issue_comments_269907.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nHello!\n\nThis is the first version of the refactoring of closeness_centrality. Let me know if you like it!",
    "created_at": "2015-08-13T16:54:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269907",
    "user": "https://github.com/sagetrac-borassi"
}
```

<a id='comment:3'>Comment 3:</a>
Hello!

This is the first version of the refactoring of closeness_centrality. Let me know if you like it!



---

archive/issue_comments_269908.json:
```json
{
    "body": "Commit: **[5c85793](https://github.com/sagemath/sagetrac-mirror/commit/5c85793ccb8234ac668173620523f45dbae4b985)**",
    "created_at": "2015-08-13T16:54:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269908",
    "user": "https://github.com/sagetrac-borassi"
}
```

Commit: **[5c85793](https://github.com/sagemath/sagetrac-mirror/commit/5c85793ccb8234ac668173620523f45dbae4b985)**



---

archive/issue_comments_269909.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nI don't really understand what you are doing in this commit\nhttps://github.com/sagemath/sagetrac-mirror/commits/5c85793ccb8234ac668173620523f45dbae4b985\n\nIn the ticket description you say that you will move everything in `generic_graph`, but it might be more readable/clean to create a new file for centrality measures, no?\nAlso, you moved only references to the methods, right? (or the modifications are hidden in the merge with #18931).\n\n```\n+            - :meth:`~sage.graphs.graph.Graph.centrality_degree`\n+            - :meth:`~centrality_betweenness`\n```\n\nDavid.",
    "created_at": "2015-08-13T17:47:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269909",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:4'>Comment 4:</a>
I don't really understand what you are doing in this commit
https://github.com/sagemath/sagetrac-mirror/commits/5c85793ccb8234ac668173620523f45dbae4b985

In the ticket description you say that you will move everything in `generic_graph`, but it might be more readable/clean to create a new file for centrality measures, no?
Also, you moved only references to the methods, right? (or the modifications are hidden in the merge with #18931).

```
+            - :meth:`~sage.graphs.graph.Graph.centrality_degree`
+            - :meth:`~centrality_betweenness`
```

David.



---

archive/issue_comments_269910.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5853eb73a9705229a1947fe89b91624117683e59\">5853eb7</a></td><td><code>Merged with beta2</code></td></tr></table>\n",
    "created_at": "2015-08-14T09:48:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269910",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:5'>Comment 5:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5853eb73a9705229a1947fe89b91624117683e59">5853eb7</a></td><td><code>Merged with beta2</code></td></tr></table>




---

archive/issue_comments_269911.json:
```json
{
    "body": "Changed commit from **[5c85793](https://github.com/sagemath/sagetrac-mirror/commit/5c85793ccb8234ac668173620523f45dbae4b985)** to **[5853eb7](https://github.com/sagemath/sagetrac-mirror/commit/5853eb73a9705229a1947fe89b91624117683e59)**",
    "created_at": "2015-08-14T09:48:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269911",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5c85793](https://github.com/sagemath/sagetrac-mirror/commit/5c85793ccb8234ac668173620523f45dbae4b985)** to **[5853eb7](https://github.com/sagemath/sagetrac-mirror/commit/5853eb73a9705229a1947fe89b91624117683e59)**



---

archive/issue_comments_269912.json:
```json
{
    "body": "Changed commit from **[5853eb7](https://github.com/sagemath/sagetrac-mirror/commit/5853eb73a9705229a1947fe89b91624117683e59)** to **[a19addb](https://github.com/sagemath/sagetrac-mirror/commit/a19addbd50db4086adbfc88c29b5c01f368dabc6)**",
    "created_at": "2015-08-14T10:13:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269912",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5853eb7](https://github.com/sagemath/sagetrac-mirror/commit/5853eb73a9705229a1947fe89b91624117683e59)** to **[a19addb](https://github.com/sagemath/sagetrac-mirror/commit/a19addbd50db4086adbfc88c29b5c01f368dabc6)**



---

archive/issue_comments_269913.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a19addbd50db4086adbfc88c29b5c01f368dabc6\">a19addb</a></td><td><code>Rewrote closeness centrality according to new standards</code></td></tr></table>\n",
    "created_at": "2015-08-14T10:13:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269913",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:6'>Comment 6:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a19addbd50db4086adbfc88c29b5c01f368dabc6">a19addb</a></td><td><code>Rewrote closeness centrality according to new standards</code></td></tr></table>




---

archive/issue_comments_269914.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nHello!\n\nThank you for the comment, I will try to address the main issues raised.\n\nI have put everything in a single commit, which simply removes the closeness centrality routine from `graph.py` and rewrites it in `generic_graph.py`. Now the ticket should be much easier to review. Since closeness centrality highly depends on shortest paths, the new routine follows all conventions in ticket #18931.\n\nAbout the creation of a new file: we already have file `centrality.pyx`, containing fast algorithms for betweenness centrality. However, these routines are called from a `centrality_betweenness` routine in file `generic_graph.py`, which should be used by the user. In this ticket, I just copied this policy.\n\nIn my opinion, if we want to create a new file, we should at least move also betweenness centrality and degree centrality: in my opinion, this goes beyond the scope of this ticket. Do you agree?\n\nBest,\n\nMichele\n\nReplying to [@dcoudert](#comment%3A4):\n\n> I don't really understand what you are doing in this commit\n> https://github.com/sagemath/sagetrac-mirror/commits/5c85793ccb8234ac668173620523f45dbae4b985\n> \n> In the ticket description you say that you will move everything in `generic_graph`, but it might be more readable/clean to create a new file for centrality measures, no?\n> Also, you moved only references to the methods, right? (or the modifications are hidden in the merge with #18931).\n> \n> ```\n> +            - :meth:`~sage.graphs.graph.Graph.centrality_degree`\n> +            - :meth:`~centrality_betweenness`\n> ```\n> \n> David.",
    "created_at": "2015-08-14T12:25:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269914",
    "user": "https://github.com/sagetrac-borassi"
}
```

<a id='comment:7'>Comment 7:</a>
Hello!

Thank you for the comment, I will try to address the main issues raised.

I have put everything in a single commit, which simply removes the closeness centrality routine from `graph.py` and rewrites it in `generic_graph.py`. Now the ticket should be much easier to review. Since closeness centrality highly depends on shortest paths, the new routine follows all conventions in ticket #18931.

About the creation of a new file: we already have file `centrality.pyx`, containing fast algorithms for betweenness centrality. However, these routines are called from a `centrality_betweenness` routine in file `generic_graph.py`, which should be used by the user. In this ticket, I just copied this policy.

In my opinion, if we want to create a new file, we should at least move also betweenness centrality and degree centrality: in my opinion, this goes beyond the scope of this ticket. Do you agree?

Best,

Michele

Replying to [@dcoudert](#comment%3A4):

> I don't really understand what you are doing in this commit
> https://github.com/sagemath/sagetrac-mirror/commits/5c85793ccb8234ac668173620523f45dbae4b985
> 
> In the ticket description you say that you will move everything in `generic_graph`, but it might be more readable/clean to create a new file for centrality measures, no?
> Also, you moved only references to the methods, right? (or the modifications are hidden in the merge with #18931).
> 
> ```
> +            - :meth:`~sage.graphs.graph.Graph.centrality_degree`
> +            - :meth:`~centrality_betweenness`
> ```
> 
> David.



---

archive/issue_comments_269915.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nSomething is wrong here\n\n```\n+            try:\n+                v_iter = iter(vert)\n+            except TypeError:\n+                v_iter = [v_iter]\n+                v_iter = iter(vert)\n```\nI assume you want first to have `v_vert = iter(list(vert))\n\nThe default of calling `distances = self.shortest_path_all_pairs(by_weight,algorithm, weight_function, check_weight)[0]` is that you get a dictionary of dictionary, that is a huge data structure for large graphs (lost of memory and long to create). At least the second part of this method should be cythonized to get the array of distances, as is done for `centrality_betweenness`.\n\nDavid.",
    "created_at": "2015-08-14T15:14:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269915",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:8'>Comment 8:</a>
Something is wrong here

```
+            try:
+                v_iter = iter(vert)
+            except TypeError:
+                v_iter = [v_iter]
+                v_iter = iter(vert)
```
I assume you want first to have `v_vert = iter(list(vert))

The default of calling `distances = self.shortest_path_all_pairs(by_weight,algorithm, weight_function, check_weight)[0]` is that you get a dictionary of dictionary, that is a huge data structure for large graphs (lost of memory and long to create). At least the second part of this method should be cythonized to get the array of distances, as is done for `centrality_betweenness`.

David.



---

archive/issue_comments_269916.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\n> Something is wrong here\n> \n> ```\n> +            try:\n> +                v_iter = iter(vert)\n> +            except TypeError:\n> +                v_iter = [v_iter]\n> +                v_iter = iter(vert)\n> ```\n\n+1.\n\nIn some cases a vertex can be a pair, and thus is iterable. This would react badly with this code.\n\n```\nsage: g=graphs.KneserGraph(5,2)\nsage: v=g.vertices()[0]\nsage: g.centrality_closeness(v)\n<crash>\n```\n\nNathann",
    "created_at": "2015-08-14T15:18:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269916",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:9'>Comment 9:</a>
> Something is wrong here
> 
> ```
> +            try:
> +                v_iter = iter(vert)
> +            except TypeError:
> +                v_iter = [v_iter]
> +                v_iter = iter(vert)
> ```

+1.

In some cases a vertex can be a pair, and thus is iterable. This would react badly with this code.

```
sage: g=graphs.KneserGraph(5,2)
sage: v=g.vertices()[0]
sage: g.centrality_closeness(v)
<crash>
```

Nathann



---

archive/issue_comments_269917.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nRight. My previous proposal is not a good solution.\nSomething like that might also be unsafe if some labels in `vert` are not in `G`, but this can be checked when trying to associate computed values and vertices.\n\n```\nv_vert = iter([vert]) if vert in G else iter(vert)\n```",
    "created_at": "2015-08-14T15:45:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269917",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:10'>Comment 10:</a>
Right. My previous proposal is not a good solution.
Something like that might also be unsafe if some labels in `vert` are not in `G`, but this can be checked when trying to associate computed values and vertices.

```
v_vert = iter([vert]) if vert in G else iter(vert)
```



---

archive/issue_comments_269918.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7dfa2d26bcaf422f60b3ffd083bc535048922b2f\">7dfa2d2</a></td><td><code>Corrected v_iter, cythonized Johnson</code></td></tr></table>\n",
    "created_at": "2015-08-16T16:43:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269918",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:11'>Comment 11:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7dfa2d26bcaf422f60b3ffd083bc535048922b2f">7dfa2d2</a></td><td><code>Corrected v_iter, cythonized Johnson</code></td></tr></table>




---

archive/issue_comments_269919.json:
```json
{
    "body": "Changed commit from **[a19addb](https://github.com/sagemath/sagetrac-mirror/commit/a19addbd50db4086adbfc88c29b5c01f368dabc6)** to **[7dfa2d2](https://github.com/sagemath/sagetrac-mirror/commit/7dfa2d26bcaf422f60b3ffd083bc535048922b2f)**",
    "created_at": "2015-08-16T16:43:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269919",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[a19addb](https://github.com/sagemath/sagetrac-mirror/commit/a19addbd50db4086adbfc88c29b5c01f368dabc6)** to **[7dfa2d2](https://github.com/sagemath/sagetrac-mirror/commit/7dfa2d26bcaf422f60b3ffd083bc535048922b2f)**



---

archive/issue_comments_269920.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nHello!\n\nI hope you spent a great Assumption day!\n\nWith this new commit, (hopefully) I solved the problems with\u00a0`v_vert`  and I cythonized the Johnson algorithm. In my opinion, it is not worth  cythonizing Floyd-Warshall, because it is much slower than Johnson,  especially on sparse graphs.\n\nThank you very much!\n\nMichele",
    "created_at": "2015-08-16T16:46:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269920",
    "user": "https://github.com/sagetrac-borassi"
}
```

<a id='comment:12'>Comment 12:</a>
Hello!

I hope you spent a great Assumption day!

With this new commit, (hopefully) I solved the problems withÂ `v_vert`  and I cythonized the Johnson algorithm. In my opinion, it is not worth  cythonizing Floyd-Warshall, because it is much slower than Johnson,  especially on sparse graphs.

Thank you very much!

Michele



---

archive/issue_comments_269921.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nHello,\n\nI'm trying to understand the behavior of the method on digraphs.\nYou wrote that the centrality of vertices of degree 0 is not reported. Does it means that for digraphs you don't report the centrality of vertices with out-degree 0?\nAlso, what's the expected behavior on strongly connected digraphs?\n\nDavid.",
    "created_at": "2015-08-17T09:41:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269921",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:13'>Comment 13:</a>
Hello,

I'm trying to understand the behavior of the method on digraphs.
You wrote that the centrality of vertices of degree 0 is not reported. Does it means that for digraphs you don't report the centrality of vertices with out-degree 0?
Also, what's the expected behavior on strongly connected digraphs?

David.



---

archive/issue_comments_269922.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7a4059a8803326baf32f9922307d9f7ee3ce7238\">7a4059a</a></td><td><code>Improved documentation</code></td></tr></table>\n",
    "created_at": "2015-08-17T11:09:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269922",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:14'>Comment 14:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7a4059a8803326baf32f9922307d9f7ee3ce7238">7a4059a</a></td><td><code>Improved documentation</code></td></tr></table>




---

archive/issue_comments_269923.json:
```json
{
    "body": "Changed commit from **[7dfa2d2](https://github.com/sagemath/sagetrac-mirror/commit/7dfa2d26bcaf422f60b3ffd083bc535048922b2f)** to **[7a4059a](https://github.com/sagemath/sagetrac-mirror/commit/7a4059a8803326baf32f9922307d9f7ee3ce7238)**",
    "created_at": "2015-08-17T11:09:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269923",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7dfa2d2](https://github.com/sagemath/sagetrac-mirror/commit/7dfa2d26bcaf422f60b3ffd083bc535048922b2f)** to **[7a4059a](https://github.com/sagemath/sagetrac-mirror/commit/7a4059a8803326baf32f9922307d9f7ee3ce7238)**



---

archive/issue_comments_269924.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5c67f79dcb519e1df3a76021677a8292583a3d31\">5c67f79</a></td><td><code>Small mistake</code></td></tr></table>\n",
    "created_at": "2015-08-17T11:09:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269924",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:15'>Comment 15:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5c67f79dcb519e1df3a76021677a8292583a3d31">5c67f79</a></td><td><code>Small mistake</code></td></tr></table>




---

archive/issue_comments_269925.json:
```json
{
    "body": "Changed commit from **[7a4059a](https://github.com/sagemath/sagetrac-mirror/commit/7a4059a8803326baf32f9922307d9f7ee3ce7238)** to **[5c67f79](https://github.com/sagemath/sagetrac-mirror/commit/5c67f79dcb519e1df3a76021677a8292583a3d31)**",
    "created_at": "2015-08-17T11:09:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269925",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7a4059a](https://github.com/sagemath/sagetrac-mirror/commit/7a4059a8803326baf32f9922307d9f7ee3ce7238)** to **[5c67f79](https://github.com/sagemath/sagetrac-mirror/commit/5c67f79dcb519e1df3a76021677a8292583a3d31)**



---

archive/issue_comments_269926.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nHello!\n\nI tried to improve the documentation, answering your questions.\n\nMichele\n\nReplying to [@dcoudert](#comment%3A13):\n\n> You wrote that the centrality of vertices of degree 0 is not reported. Does it means that for digraphs you don't report the centrality of vertices with out-degree 0?\n\nYes, I changed in the documentation \"degree\" with \"(out)degree\"\n\n> Also, what's the expected behavior on strongly connected digraphs?\n\nThe closeness centrality of a vertex v is 1/farn(v), where farn(v) is the average distance between v and a random vertex w different from v (as in the case of connected graphs). I added an example about this.",
    "created_at": "2015-08-17T11:13:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269926",
    "user": "https://github.com/sagetrac-borassi"
}
```

<a id='comment:16'>Comment 16:</a>
Hello!

I tried to improve the documentation, answering your questions.

Michele

Replying to [@dcoudert](#comment%3A13):

> You wrote that the centrality of vertices of degree 0 is not reported. Does it means that for digraphs you don't report the centrality of vertices with out-degree 0?

Yes, I changed in the documentation "degree" with "(out)degree"

> Also, what's the expected behavior on strongly connected digraphs?

The closeness centrality of a vertex v is 1/farn(v), where farn(v) is the average distance between v and a random vertex w different from v (as in the case of connected graphs). I added an example about this.



---

archive/issue_comments_269927.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nHello,\n\nThis is much better now. The method works well, passes all tests and the doc build properly.\n\nOne possible modification is to move the method to file `centrality.pyx` which is made for  gathering centrality methods. Let me know.\n\nBest,\nDavid.",
    "created_at": "2015-08-17T12:03:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269927",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:17'>Comment 17:</a>
Hello,

This is much better now. The method works well, passes all tests and the doc build properly.

One possible modification is to move the method to file `centrality.pyx` which is made for  gathering centrality methods. Let me know.

Best,
David.



---

archive/issue_comments_269928.json:
```json
{
    "body": "Changed commit from **[5c67f79](https://github.com/sagemath/sagetrac-mirror/commit/5c67f79dcb519e1df3a76021677a8292583a3d31)** to **[48514ad](https://github.com/sagemath/sagetrac-mirror/commit/48514adedac2e122137907f410a92dcd5e6e6e3c)**",
    "created_at": "2015-08-17T14:23:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269928",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5c67f79](https://github.com/sagemath/sagetrac-mirror/commit/5c67f79dcb519e1df3a76021677a8292583a3d31)** to **[48514ad](https://github.com/sagemath/sagetrac-mirror/commit/48514adedac2e122137907f410a92dcd5e6e6e3c)**



---

archive/issue_comments_269929.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/48514adedac2e122137907f410a92dcd5e6e6e3c\">48514ad</a></td><td><code>Moved centrality_closeness to centrality.pyx</code></td></tr></table>\n",
    "created_at": "2015-08-17T14:23:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269929",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:18'>Comment 18:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/48514adedac2e122137907f410a92dcd5e6e6e3c">48514ad</a></td><td><code>Moved centrality_closeness to centrality.pyx</code></td></tr></table>




---

archive/issue_comments_269930.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nDone!\n\nHowever, I had to do some \"magic\" to avoid duplicate references... Hope it is ok!",
    "created_at": "2015-08-17T14:30:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269930",
    "user": "https://github.com/sagetrac-borassi"
}
```

<a id='comment:19'>Comment 19:</a>
Done!

However, I had to do some "magic" to avoid duplicate references... Hope it is ok!



---

archive/issue_comments_269931.json:
```json
{
    "body": "Changed commit from **[48514ad](https://github.com/sagemath/sagetrac-mirror/commit/48514adedac2e122137907f410a92dcd5e6e6e3c)** to **[cf9cf87](https://github.com/sagemath/sagetrac-mirror/commit/cf9cf870c430b7f4ba06ec990fa37cf9ae66290d)**",
    "created_at": "2015-08-17T15:11:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269931",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[48514ad](https://github.com/sagemath/sagetrac-mirror/commit/48514adedac2e122137907f410a92dcd5e6e6e3c)** to **[cf9cf87](https://github.com/sagemath/sagetrac-mirror/commit/cf9cf870c430b7f4ba06ec990fa37cf9ae66290d)**



---

archive/issue_comments_269932.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cf9cf870c430b7f4ba06ec990fa37cf9ae66290d\">cf9cf87</a></td><td><code>Trailing whitespaces</code></td></tr></table>\n",
    "created_at": "2015-08-17T15:11:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269932",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:20'>Comment 20:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cf9cf870c430b7f4ba06ec990fa37cf9ae66290d">cf9cf87</a></td><td><code>Trailing whitespaces</code></td></tr></table>




---

archive/issue_comments_269933.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nYep, I add to `make doc-clean && make doc` to get it compiled.\n\nI just saw in the doc of `centrality_degree` in `graph.py`, in section See also, that the link to `centrality_closeness` is broken. In fact, the code is <code>:meth:\\`centrality_closeness\\`</code>. Could you check that?\nIn fact we should also move this methode to `centrality.pyx`, but in another ticket.\n\nAfter that I think it will be ok.\n\nDavid.",
    "created_at": "2015-08-17T17:23:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269933",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:21'>Comment 21:</a>
Yep, I add to `make doc-clean && make doc` to get it compiled.

I just saw in the doc of `centrality_degree` in `graph.py`, in section See also, that the link to `centrality_closeness` is broken. In fact, the code is <code>:meth:\`centrality_closeness\`</code>. Could you check that?
In fact we should also move this methode to `centrality.pyx`, but in another ticket.

After that I think it will be ok.

David.



---

archive/issue_comments_269934.json:
```json
{
    "body": "Changed commit from **[cf9cf87](https://github.com/sagemath/sagetrac-mirror/commit/cf9cf870c430b7f4ba06ec990fa37cf9ae66290d)** to **[90638aa](https://github.com/sagemath/sagetrac-mirror/commit/90638aa3a78bf992aa29902f929f131a973c021e)**",
    "created_at": "2015-08-18T07:46:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269934",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[cf9cf87](https://github.com/sagemath/sagetrac-mirror/commit/cf9cf870c430b7f4ba06ec990fa37cf9ae66290d)** to **[90638aa](https://github.com/sagemath/sagetrac-mirror/commit/90638aa3a78bf992aa29902f929f131a973c021e)**



---

archive/issue_comments_269935.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/90638aa3a78bf992aa29902f929f131a973c021e\">90638aa</a></td><td><code>Corrected link</code></td></tr></table>\n",
    "created_at": "2015-08-18T07:46:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269935",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:22'>Comment 22:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/90638aa3a78bf992aa29902f929f131a973c021e">90638aa</a></td><td><code>Corrected link</code></td></tr></table>




---

archive/issue_comments_269936.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nDone!",
    "created_at": "2015-08-18T07:46:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269936",
    "user": "https://github.com/sagetrac-borassi"
}
```

<a id='comment:23'>Comment 23:</a>
Done!



---

archive/issue_comments_269937.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nHello,\n\ndo you understand why the patchbot reports some errors?\nI have no error when testing this patch on my computer (install, long tests, trials, docbuild html et pdf,...).\n\nBest,\nDavid.",
    "created_at": "2015-08-18T09:29:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269937",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:24'>Comment 24:</a>
Hello,

do you understand why the patchbot reports some errors?
I have no error when testing this patch on my computer (install, long tests, trials, docbuild html et pdf,...).

Best,
David.



---

archive/issue_comments_269938.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nWhat is the patchbot? How can I find these errors?",
    "created_at": "2015-08-18T09:30:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269938",
    "user": "https://github.com/sagetrac-borassi"
}
```

<a id='comment:25'>Comment 25:</a>
What is the patchbot? How can I find these errors?



---

archive/issue_comments_269939.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\non the top of this page, you can see a blue disk (or red or green, etc.) with a link to http://patchbot.sagemath.org/ticket/19007/\nIt reports on automatic tests of your patch. Tests are performed on all modules.",
    "created_at": "2015-08-18T09:33:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269939",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:26'>Comment 26:</a>
on the top of this page, you can see a blue disk (or red or green, etc.) with a link to http://patchbot.sagemath.org/ticket/19007/
It reports on automatic tests of your patch. Tests are performed on all modules.



---

archive/issue_comments_269940.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/73dd6d5e0a69e8c26ba23bf5425a9b4122a34ff6\">73dd6d5</a></td><td><code>Solve patchbot - first attempt</code></td></tr></table>\n",
    "created_at": "2015-08-18T12:21:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269940",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:27'>Comment 27:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/73dd6d5e0a69e8c26ba23bf5425a9b4122a34ff6">73dd6d5</a></td><td><code>Solve patchbot - first attempt</code></td></tr></table>




---

archive/issue_comments_269941.json:
```json
{
    "body": "Changed commit from **[90638aa](https://github.com/sagemath/sagetrac-mirror/commit/90638aa3a78bf992aa29902f929f131a973c021e)** to **[73dd6d5](https://github.com/sagemath/sagetrac-mirror/commit/73dd6d5e0a69e8c26ba23bf5425a9b4122a34ff6)**",
    "created_at": "2015-08-18T12:21:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269941",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[90638aa](https://github.com/sagemath/sagetrac-mirror/commit/90638aa3a78bf992aa29902f929f131a973c021e)** to **[73dd6d5](https://github.com/sagemath/sagetrac-mirror/commit/73dd6d5e0a69e8c26ba23bf5425a9b4122a34ff6)**



---

archive/issue_comments_269942.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f1c7fd57d513efda616b6dc8c3a81c7891ef5f12\">f1c7fd5</a></td><td><code>Solve patchbot - second attempt</code></td></tr></table>\n",
    "created_at": "2015-08-18T12:25:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269942",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:28'>Comment 28:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f1c7fd57d513efda616b6dc8c3a81c7891ef5f12">f1c7fd5</a></td><td><code>Solve patchbot - second attempt</code></td></tr></table>




---

archive/issue_comments_269943.json:
```json
{
    "body": "Changed commit from **[73dd6d5](https://github.com/sagemath/sagetrac-mirror/commit/73dd6d5e0a69e8c26ba23bf5425a9b4122a34ff6)** to **[f1c7fd5](https://github.com/sagemath/sagetrac-mirror/commit/f1c7fd57d513efda616b6dc8c3a81c7891ef5f12)**",
    "created_at": "2015-08-18T12:25:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269943",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[73dd6d5](https://github.com/sagemath/sagetrac-mirror/commit/73dd6d5e0a69e8c26ba23bf5425a9b4122a34ff6)** to **[f1c7fd5](https://github.com/sagemath/sagetrac-mirror/commit/f1c7fd57d513efda616b6dc8c3a81c7891ef5f12)**



---

archive/issue_comments_269944.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\nNote that the patchbot needs a lot of time: it is not tested instantaneously and it takes some hours of computations...",
    "created_at": "2015-08-18T12:27:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269944",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:29'>Comment 29:</a>
Note that the patchbot needs a lot of time: it is not tested instantaneously and it takes some hours of computations...



---

archive/issue_comments_269945.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\nOk, I will wait until it answers... In my opinion, the problem is that we need to import centrality.pyx in generic_graph at startup, and this slows down the startup time. I tried to change the imports, hoping the total time will decrease. If any of the two attempts work, we are fine, otherwise I probably have to mail sage-devel...",
    "created_at": "2015-08-18T12:31:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269945",
    "user": "https://github.com/sagetrac-borassi"
}
```

<a id='comment:30'>Comment 30:</a>
Ok, I will wait until it answers... In my opinion, the problem is that we need to import centrality.pyx in generic_graph at startup, and this slows down the startup time. I tried to change the imports, hoping the total time will decrease. If any of the two attempts work, we are fine, otherwise I probably have to mail sage-devel...



---

archive/issue_comments_269946.json:
```json
{
    "body": "<a id='comment:31'>Comment 31:</a>\nWell, generic graph is becoming really really big with lots of tests.\nFor instance, do we really need the tests with `for i in range(100): `. Can't we have only one test we randomly chosen number of edges? That should be enough.\n\nDavid.",
    "created_at": "2015-08-18T12:37:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269946",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:31'>Comment 31:</a>
Well, generic graph is becoming really really big with lots of tests.
For instance, do we really need the tests with `for i in range(100): `. Can't we have only one test we randomly chosen number of edges? That should be enough.

David.



---

archive/issue_comments_269947.json:
```json
{
    "body": "<a id='comment:32'>Comment 32:</a>\nI'm afraid that all the attempts I have made were unsuccessful. The point is that importing module `centrality.pyx` at startup is expensive, and I need it to import it to add method `centrality_closeness` to `GenericGraph`. Hence, the startup time becomes 2 seconds (too much).\n\nIn my opinion, this might be a reason why it is better to leave method `centrality_closeness` in `generic_graph`, and put only Cython-related methods inside `centrality.pyx`, in order to use lazy imports. May I move method centrality_closeness back?\n\nIf we still want to move `centrality_closeness` and related methods to `centrality.pyx`, I think we should open another ticket, in order to find a way to use lazy imports (I have no idea how, though).",
    "created_at": "2015-08-19T09:58:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269947",
    "user": "https://github.com/sagetrac-borassi"
}
```

<a id='comment:32'>Comment 32:</a>
I'm afraid that all the attempts I have made were unsuccessful. The point is that importing module `centrality.pyx` at startup is expensive, and I need it to import it to add method `centrality_closeness` to `GenericGraph`. Hence, the startup time becomes 2 seconds (too much).

In my opinion, this might be a reason why it is better to leave method `centrality_closeness` in `generic_graph`, and put only Cython-related methods inside `centrality.pyx`, in order to use lazy imports. May I move method centrality_closeness back?

If we still want to move `centrality_closeness` and related methods to `centrality.pyx`, I think we should open another ticket, in order to find a way to use lazy imports (I have no idea how, though).



---

archive/issue_comments_269948.json:
```json
{
    "body": "<a id='comment:33'>Comment 33:</a>\nok, move it back to generic graph.\nDavid.",
    "created_at": "2015-08-19T10:01:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269948",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:33'>Comment 33:</a>
ok, move it back to generic graph.
David.



---

archive/issue_comments_269949.json:
```json
{
    "body": "Changed commit from **[f1c7fd5](https://github.com/sagemath/sagetrac-mirror/commit/f1c7fd57d513efda616b6dc8c3a81c7891ef5f12)** to **[1551c6f](https://github.com/sagemath/sagetrac-mirror/commit/1551c6fd513cd4f7ac6c787badd589cf349fb788)**",
    "created_at": "2015-08-19T12:55:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269949",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[f1c7fd5](https://github.com/sagemath/sagetrac-mirror/commit/f1c7fd57d513efda616b6dc8c3a81c7891ef5f12)** to **[1551c6f](https://github.com/sagemath/sagetrac-mirror/commit/1551c6fd513cd4f7ac6c787badd589cf349fb788)**



---

archive/issue_comments_269950.json:
```json
{
    "body": "<a id='comment:34'>Comment 34:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1551c6fd513cd4f7ac6c787badd589cf349fb788\">1551c6f</a></td><td><code>Undo commit moving closeness_centrality to centrality.pyx. Corrected links.</code></td></tr></table>\n",
    "created_at": "2015-08-19T12:55:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269950",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:34'>Comment 34:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1551c6fd513cd4f7ac6c787badd589cf349fb788">1551c6f</a></td><td><code>Undo commit moving closeness_centrality to centrality.pyx. Corrected links.</code></td></tr></table>




---

archive/issue_comments_269951.json:
```json
{
    "body": "Reviewer: **David Coudert**",
    "created_at": "2015-08-19T13:03:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269951",
    "user": "https://github.com/dcoudert"
}
```

Reviewer: **David Coudert**



---

archive/issue_comments_269952.json:
```json
{
    "body": "<a id='comment:35'>Comment 35:</a>\nFor me the patch is good to go, but I prefer to wait for the next patchbot answer.\nDavid.",
    "created_at": "2015-08-19T13:03:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269952",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:35'>Comment 35:</a>
For me the patch is good to go, but I prefer to wait for the next patchbot answer.
David.



---

archive/issue_events_242913.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2015-08-20T06:34:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19007#event-242913"
}
```



---

archive/issue_events_242914.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2015-08-20T06:34:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19007#event-242914"
}
```



---

archive/issue_comments_269953.json:
```json
{
    "body": "<a id='comment:36'>Comment 36:</a>\nSince the patchbot reports no error and that the patch passes all tests/docbuild/etc. on my computer, I set it to positive review.\nThanks.\nDavid.",
    "created_at": "2015-08-20T06:34:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269953",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:36'>Comment 36:</a>
Since the patchbot reports no error and that the patch passes all tests/docbuild/etc. on my computer, I set it to positive review.
Thanks.
David.



---

archive/issue_events_242915.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-08-21T01:56:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19007#event-242915"
}
```



---

archive/issue_events_242916.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "30994dc2cbce2a5cf3f120c24600c24c07126744",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-08-21T01:56:20Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19007#event-242916"
}
```



---

archive/issue_comments_269954.json:
```json
{
    "body": "Changed branch from **[u/borassi/refactor_centrality_closeness](https://github.com/sagemath/sagetrac-mirror/tree/u/borassi/refactor_centrality_closeness)** to **[1551c6f](https://github.com/sagemath/sagetrac-mirror/commit/1551c6fd513cd4f7ac6c787badd589cf349fb788)**",
    "created_at": "2015-08-21T01:56:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19007",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19007#issuecomment-269954",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/borassi/refactor_centrality_closeness](https://github.com/sagemath/sagetrac-mirror/tree/u/borassi/refactor_centrality_closeness)** to **[1551c6f](https://github.com/sagemath/sagetrac-mirror/commit/1551c6fd513cd4f7ac6c787badd589cf349fb788)**
