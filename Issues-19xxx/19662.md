# Issue 19662: Less wasteful management of edge labels

archive/issues_019425.json:
```json
{
    "body": "I hate loops,\nI hate multiple edges,\nI hate edge labels.\n\nA colleague of mine recently reported very slow performances with our graphs, and he was using edge labels. There were.... Let's say \"obvious loss of performances\" to stay calm.\n\nIf you are sensitive to bad algorithms, be warned -- what you will see while reviewing this branch may shock you.\n\nAs an illustration. Before\n\n```\nsage: %time Graph([(u,v,1) for u,v in combinations(range(200),2)])\nCPU times: user 1.82 s, sys: 0 ns, total: 1.82 s\nWall time: 1.83 s\nGraph on 200 vertices\n```\n\nAfter\n\n```\nsage: %time Graph([(u,v,1) for u,v in combinations(range(200),2)])\nCPU times: user 88 ms, sys: 12 ms, total: 100 ms\nWall time: 86.6 ms\nGraph on 200 vertices\n```\n\nNathann\n\nCC:  @dcoudert borassi\n\nBranch/Commit: 1b97eb1147e804d6d506d0ef94e0de09c6cd58e9\n\nReviewer: Andrey Novoseltsev\n\nAuthor: Nathann Cohen\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/19662\n\n",
    "closed_at": "2015-12-05T10:01:08Z",
    "created_at": "2015-12-03T08:23:29Z",
    "labels": [
        "component: graph theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.10",
    "title": "Less wasteful management of edge labels",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19662",
    "user": "https://github.com/nathanncohen"
}
```
I hate loops,
I hate multiple edges,
I hate edge labels.

A colleague of mine recently reported very slow performances with our graphs, and he was using edge labels. There were.... Let's say "obvious loss of performances" to stay calm.

If you are sensitive to bad algorithms, be warned -- what you will see while reviewing this branch may shock you.

As an illustration. Before

```
sage: %time Graph([(u,v,1) for u,v in combinations(range(200),2)])
CPU times: user 1.82 s, sys: 0 ns, total: 1.82 s
Wall time: 1.83 s
Graph on 200 vertices
```

After

```
sage: %time Graph([(u,v,1) for u,v in combinations(range(200),2)])
CPU times: user 88 ms, sys: 12 ms, total: 100 ms
Wall time: 86.6 ms
Graph on 200 vertices
```

Nathann

CC:  @dcoudert borassi

Branch/Commit: 1b97eb1147e804d6d506d0ef94e0de09c6cd58e9

Reviewer: Andrey Novoseltsev

Author: Nathann Cohen

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/19662





---

archive/issue_comments_284109.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-12-03T08:28:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19662#issuecomment-284109",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_284110.json:
```json
{
    "body": "<a id='comment:1'></a>New commits:",
    "created_at": "2015-12-03T08:28:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19662#issuecomment-284110",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:1'></a>New commits:



---

archive/issue_comments_284111.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-12-03T10:51:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19662#issuecomment-284111",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_284112.json:
```json
{
    "body": "<a id='comment:3'></a>Would be nice to have here an example of shocking increase in performance, but after my experience with graph equality I feel you.",
    "created_at": "2015-12-03T22:01:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19662#issuecomment-284112",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:3'></a>Would be nice to have here an example of shocking increase in performance, but after my experience with graph equality I feel you.



---

archive/issue_comments_284113.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-12-03T22:01:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19662#issuecomment-284113",
    "user": "https://github.com/novoselt"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_284114.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -5,6 +5,24 @@\n A colleague of mine recently reported very slow performances with our graphs, and he was using edge labels. There were.... Let's say \"obvious loss of performances\" to stay calm.\n \n If you are sensitive to bad algorithms, be warned -- what you will see while reviewing this branch may shock you.\n+\n+As an illustration. Before\n+\n+\\`\\`\\`\n+sage: %time Graph([(u,v,1) for u,v in combinations(range(200),2)])\n+CPU times: user 1.82 s, sys: 0 ns, total: 1.82 s\n+Wall time: 1.83 s\n+Graph on 200 vertices\n+\\`\\`\\`\n+\n+After\n+\n+\\`\\`\\`\n+sage: %time Graph([(u,v,1) for u,v in combinations(range(200),2)])\n+CPU times: user 88 ms, sys: 12 ms, total: 100 ms\n+Wall time: 86.6 ms\n+Graph on 200 vertices\n+\\`\\`\\`\n \n Nathann\n \n```\n",
    "created_at": "2015-12-04T09:24:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19662#issuecomment-284114",
    "user": "https://github.com/nathanncohen"
}
```

Description changed:
```diff
--- 
+++ 
@@ -5,6 +5,24 @@
 A colleague of mine recently reported very slow performances with our graphs, and he was using edge labels. There were.... Let's say "obvious loss of performances" to stay calm.
 
 If you are sensitive to bad algorithms, be warned -- what you will see while reviewing this branch may shock you.
+
+As an illustration. Before
+
+\`\`\`
+sage: %time Graph([(u,v,1) for u,v in combinations(range(200),2)])
+CPU times: user 1.82 s, sys: 0 ns, total: 1.82 s
+Wall time: 1.83 s
+Graph on 200 vertices
+\`\`\`
+
+After
+
+\`\`\`
+sage: %time Graph([(u,v,1) for u,v in combinations(range(200),2)])
+CPU times: user 88 ms, sys: 12 ms, total: 100 ms
+Wall time: 86.6 ms
+Graph on 200 vertices
+\`\`\`
 
 Nathann
 
```




---

archive/issue_comments_284115.json:
```json
{
    "body": "<a id='comment:4'></a>Thank you for the review. I added a small example, and you can increase the number to get a speedup factor as large as you wish.\n\nNathann",
    "created_at": "2015-12-04T09:24:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19662#issuecomment-284115",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:4'></a>Thank you for the review. I added a small example, and you can increase the number to get a speedup factor as large as you wish.

Nathann



---

archive/issue_events_054003.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-12-05T10:01:08Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19662",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19662#event-54003"
}
```



---

archive/issue_comments_284116.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-12-05T10:01:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19662#issuecomment-284116",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
