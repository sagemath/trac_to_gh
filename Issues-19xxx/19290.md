# Issue 19290: MatroidUnion _rank accept any iterator, partition accept empty partition

archive/issues_019053.json:
```json
{
    "body": "Currently, in MatroidUnion `_rank(X)` can only accept objects `X` that we can take the set difference with another frozenset. There are objects having `frozenset` interface, but cannot be used in taking differences.\n\nThe PartitionMatroid can't handle empty partition. \n\n**CC:**  stefan yomcat rudi\n\n**Branch:** [u/chaoxu/matroid_union](https://github.com/sagemath/sagetrac-mirror/tree/u/chaoxu/matroid_union)\n\n**Commit:** [4f501fbc5cdc0958d148bfe98b42a3a571a337e5](https://github.com/sagemath/sagetrac-mirror/commit/4f501fbc5cdc0958d148bfe98b42a3a571a337e5)\n\n**Author:** Chao Xu\n\n**Resolution:** wontfix\n\nIssue created by migration from https://trac.sagemath.org/ticket/19290\n\n",
    "closed_at": "2017-07-13T07:54:31Z",
    "created_at": "2015-09-24T23:47:11Z",
    "labels": [
        "component: matroid theory",
        "trivial",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "MatroidUnion _rank accept any iterator, partition accept empty partition",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19290",
    "user": "https://github.com/chaoxu"
}
```
Currently, in MatroidUnion `_rank(X)` can only accept objects `X` that we can take the set difference with another frozenset. There are objects having `frozenset` interface, but cannot be used in taking differences.

The PartitionMatroid can't handle empty partition. 

**CC:**  stefan yomcat rudi

**Branch:** [u/chaoxu/matroid_union](https://github.com/sagemath/sagetrac-mirror/tree/u/chaoxu/matroid_union)

**Commit:** [4f501fbc5cdc0958d148bfe98b42a3a571a337e5](https://github.com/sagemath/sagetrac-mirror/commit/4f501fbc5cdc0958d148bfe98b42a3a571a337e5)

**Author:** Chao Xu

**Resolution:** wontfix

Issue created by migration from https://trac.sagemath.org/ticket/19290





---

archive/issue_comments_348364.json:
```json
{
    "body": "**Branch:** [u/chaoxu/matroid_union](https://github.com/sagemath/sagetrac-mirror/tree/u/chaoxu/matroid_union)",
    "created_at": "2015-09-24T23:47:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19290#issuecomment-348364",
    "user": "https://github.com/chaoxu"
}
```

**Branch:** [u/chaoxu/matroid_union](https://github.com/sagemath/sagetrac-mirror/tree/u/chaoxu/matroid_union)



---

archive/issue_comments_348365.json:
```json
{
    "body": "<a id='comment:2'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4f501fbc5cdc0958d148bfe98b42a3a571a337e5\">4f501fb</a></td><td><code>fix bugs: empty partition. _rank in MatroidUnion accepts any iterator.</code></td></tr></table>\n",
    "created_at": "2015-09-24T23:48:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19290#issuecomment-348365",
    "user": "https://github.com/chaoxu"
}
```

<a id='comment:2'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4f501fbc5cdc0958d148bfe98b42a3a571a337e5">4f501fb</a></td><td><code>fix bugs: empty partition. _rank in MatroidUnion accepts any iterator.</code></td></tr></table>




---

archive/issue_comments_348366.json:
```json
{
    "body": "**Commit:** [4f501fbc5cdc0958d148bfe98b42a3a571a337e5](https://github.com/sagemath/sagetrac-mirror/commit/4f501fbc5cdc0958d148bfe98b42a3a571a337e5)",
    "created_at": "2015-09-24T23:48:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19290#issuecomment-348366",
    "user": "https://github.com/chaoxu"
}
```

**Commit:** [4f501fbc5cdc0958d148bfe98b42a3a571a337e5](https://github.com/sagemath/sagetrac-mirror/commit/4f501fbc5cdc0958d148bfe98b42a3a571a337e5)



---

archive/issue_comments_348367.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2015-09-24T23:48:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19290#issuecomment-348367",
    "user": "https://github.com/chaoxu"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_348368.json:
```json
{
    "body": "<a id='comment:3'></a>\nHi Chao,\n\nIt is OK if underscored methods like ._rank are picky about the kind of input they can handle. The idea behind having both .rank() and ._rank() is that .rank() should be convenient to use (by checking the input, possibly reformatting it), and ._rank() as efficient as possible (by assuming the input is of the right form).  \n\nSo unless there is no efficiency hit whatsoever, I don't like the idea of adjusting ._rank to accept more varied input.",
    "created_at": "2015-10-03T13:16:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19290#issuecomment-348368",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

<a id='comment:3'></a>
Hi Chao,

It is OK if underscored methods like ._rank are picky about the kind of input they can handle. The idea behind having both .rank() and ._rank() is that .rank() should be convenient to use (by checking the input, possibly reformatting it), and ._rank() as efficient as possible (by assuming the input is of the right form).  

So unless there is no efficiency hit whatsoever, I don't like the idea of adjusting ._rank to accept more varied input.



---

archive/issue_comments_348369.json:
```json
{
    "body": "<a id='comment:4'></a>\nSee http://doc.sagemath.org/html/en/reference/matroids/sage/matroids/matroid.html#sage.matroids.matroid.Matroid for an explanation of what we normally assume about inputs to our underscored functions. I agree with Rudi in this case, it is the responsibility of the caller to provide something with set interface to _rank, not the responsibility of _rank.\n\nIn addition, please keep your tickets to one issue per ticket: the PartitionMatroid fix is fine, but can't go in because of the first issue.",
    "created_at": "2016-03-08T17:02:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19290#issuecomment-348369",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

<a id='comment:4'></a>
See http://doc.sagemath.org/html/en/reference/matroids/sage/matroids/matroid.html#sage.matroids.matroid.Matroid for an explanation of what we normally assume about inputs to our underscored functions. I agree with Rudi in this case, it is the responsibility of the caller to provide something with set interface to _rank, not the responsibility of _rank.

In addition, please keep your tickets to one issue per ticket: the PartitionMatroid fix is fine, but can't go in because of the first issue.



---

archive/issue_comments_348370.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2016-03-08T17:02:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19290#issuecomment-348370",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_events_060750.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/Stefan",
    "created_at": "2017-06-11T01:55:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19290",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19290#event-60750"
}
```



---

archive/issue_comments_348371.json:
```json
{
    "body": "<a id='comment:5'></a>\nThe first issue is not a bug; the second issue is now #23213",
    "created_at": "2017-06-11T01:55:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19290#issuecomment-348371",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

<a id='comment:5'></a>
The first issue is not a bug; the second issue is now #23213



---

archive/issue_comments_348372.json:
```json
{
    "body": "**Changing status** from needs_work to positive_review.",
    "created_at": "2017-06-11T01:55:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19290#issuecomment-348372",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

**Changing status** from needs_work to positive_review.



---

archive/issue_events_060751.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-07-13T07:54:31Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19290",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19290#event-60751"
}
```



---

archive/issue_comments_348373.json:
```json
{
    "body": "<a id='comment:6'></a>\nClosing tickets in the sage-duplicate/invalid/wontfix module with positive_review (i.e. someone has confirmed they should be closed).",
    "created_at": "2017-07-13T07:54:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19290#issuecomment-348373",
    "user": "https://github.com/embray"
}
```

<a id='comment:6'></a>
Closing tickets in the sage-duplicate/invalid/wontfix module with positive_review (i.e. someone has confirmed they should be closed).



---

archive/issue_comments_348374.json:
```json
{
    "body": "**Resolution:** wontfix",
    "created_at": "2017-07-13T07:54:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19290#issuecomment-348374",
    "user": "https://github.com/embray"
}
```

**Resolution:** wontfix
