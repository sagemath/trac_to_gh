# Issue 19463: A coding/two_weight_db module

archive/issues_019226.json:
```json
{
    "body": "CC:  @johanrosenkilde dlucas @dimpase\n\nThis ticket creates a new coding/two_weight_db module.\n\nIn it are stored all codes that were stored in graphs/strongly_regular_db.pyx. I expect that this file will change heavily, if we end up enriching our list of two weight codes for their own sake.\n\nA first commit moves out of the `strongly_regular_graph` function the code that builds the database of small strongly regular graphs. Which turned out to be a good idea later, as building this list actually takes some time in order to guess the parameters of the SRG from the 2-weight code.\n\nNathann\n\nIssue created by migration from https://trac.sagemath.org/ticket/19463\n\n",
    "closed_at": "2015-11-29T12:12:07Z",
    "created_at": "2015-10-23T15:05:04Z",
    "labels": [
        "component: coding theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.10",
    "title": "A coding/two_weight_db module",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19463",
    "user": "https://github.com/nathanncohen"
}
```
CC:  @johanrosenkilde dlucas @dimpase

This ticket creates a new coding/two_weight_db module.

In it are stored all codes that were stored in graphs/strongly_regular_db.pyx. I expect that this file will change heavily, if we end up enriching our list of two weight codes for their own sake.

A first commit moves out of the `strongly_regular_graph` function the code that builds the database of small strongly regular graphs. Which turned out to be a good idea later, as building this list actually takes some time in order to guess the parameters of the SRG from the 2-weight code.

Nathann

Issue created by migration from https://trac.sagemath.org/ticket/19463





---

archive/issue_comments_263458.json:
```json
{
    "body": "What the hell. I made a mistake and was dead sure I had deleted that branch that took me hours. Praise the Lord for 'git reflog' [1] `O_o`\n\nNathann\n\n[1] http://stackoverflow.com/questions/3640764/can-i-recover-branch-after-its-deletion-in-git\n\n---\nNew commits:",
    "created_at": "2015-10-23T15:11:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19463#issuecomment-263458",
    "user": "https://github.com/nathanncohen"
}
```

What the hell. I made a mistake and was dead sure I had deleted that branch that took me hours. Praise the Lord for 'git reflog' [1] `O_o`

Nathann

[1] http://stackoverflow.com/questions/3640764/can-i-recover-branch-after-its-deletion-in-git

---
New commits:



---

archive/issue_comments_263459.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-10-23T15:11:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19463#issuecomment-263459",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_263460.json:
```json
{
    "body": "in [BJ03], you get name wrong; it is\nIliya Bouyukliev, Juriaan Simonis, i.e. the 1st names are Iliya and Juriaan.\n(Juriaan is not so uncommon given Dutch name, Simonis is a relatively rare !Dutch/Flemish surname).",
    "created_at": "2015-10-24T13:21:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19463#issuecomment-263460",
    "user": "https://github.com/dimpase"
}
```

in [BJ03], you get name wrong; it is
Iliya Bouyukliev, Juriaan Simonis, i.e. the 1st names are Iliya and Juriaan.
(Juriaan is not so uncommon given Dutch name, Simonis is a relatively rare !Dutch/Flemish surname).



---

archive/issue_comments_263461.json:
```json
{
    "body": "The code should be capable of telling whether an SRG with such and such parameters can be constructed merely from  knowledge of parameters of two-weight codes available in the DB. Currently this is not implemented, partly due to an error in the formulas on http://moodle.tec.hkr.se/~chen/research/2-weight-codes/index.htm",
    "created_at": "2015-10-24T13:57:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19463#issuecomment-263461",
    "user": "https://github.com/dimpase"
}
```

The code should be capable of telling whether an SRG with such and such parameters can be constructed merely from  knowledge of parameters of two-weight codes available in the DB. Currently this is not implemented, partly due to an error in the formulas on http://moodle.tec.hkr.se/~chen/research/2-weight-codes/index.htm



---

archive/issue_comments_263462.json:
```json
{
    "body": "Isn't there a simpler way of getting the set of weights than\n\n```\n_,w1,w2 = sorted(set([x.hamming_weight() for x in LinearCode(M)]))\n```\nYou are going through the whole set of vectors! But I admit that the module is not imported on sage startup.\n\nOne possibility: hard code the values + add a (long) doctest that checks that these values are indeed correct?",
    "created_at": "2015-10-25T00:45:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19463#issuecomment-263462",
    "user": "https://github.com/videlec"
}
```

Isn't there a simpler way of getting the set of weights than

```
_,w1,w2 = sorted(set([x.hamming_weight() for x in LinearCode(M)]))
```
You are going through the whole set of vectors! But I admit that the module is not imported on sage startup.

One possibility: hard code the values + add a (long) doctest that checks that these values are indeed correct?



---

archive/issue_comments_263463.json:
```json
{
    "body": "... and note that there is `WeightDistribution` in the guava GAP package (very efficiently written in C).",
    "created_at": "2015-10-25T01:07:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19463#issuecomment-263463",
    "user": "https://github.com/videlec"
}
```

... and note that there is `WeightDistribution` in the guava GAP package (very efficiently written in C).



---

archive/issue_comments_263464.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-10-25T07:05:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19463#issuecomment-263464",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_263465.json:
```json
{
    "body": "> in [BJ03], you get name wrong\n\n\nFixed.\n\n> Isn't there a simpler way of getting the set of weights than\n\n\nI now call `LinearCode.weight_distribution`.\n\n> One possibility: hard code the values + add a (long) doctest that checks that these values are indeed correct?\n\n\nThat was done in an early version of this patch. I removed it to not see data repeated. I guess that it cannot hurt... All this code may eventually be wiped out however, if we start adding generic code constructions instead of fixed-size examples. That will probably change all the design, but well. We'll see.\n\nNathann",
    "created_at": "2015-10-25T07:34:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19463#issuecomment-263465",
    "user": "https://github.com/nathanncohen"
}
```

> in [BJ03], you get name wrong


Fixed.

> Isn't there a simpler way of getting the set of weights than


I now call `LinearCode.weight_distribution`.

> One possibility: hard code the values + add a (long) doctest that checks that these values are indeed correct?


That was done in an early version of this patch. I removed it to not see data repeated. I guess that it cannot hurt... All this code may eventually be wiped out however, if we start adding generic code constructions instead of fixed-size examples. That will probably change all the design, but well. We'll see.

Nathann



---

archive/issue_comments_263466.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-10-25T07:34:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19463#issuecomment-263466",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_263467.json:
```json
{
    "body": "Replying to [comment:4 vdelecroix]:\n> Isn't there a simpler way of getting the set of weights than\n> \n> ```\n> _,w1,w2 = sorted(set([x.hamming_weight() for x in LinearCode(M)]))\n> ```\n> You are going through the whole set of vectors! But I admit that the module is not imported on sage startup.\n> \n> One possibility: hard code the values + add a (long) doctest that checks that these values are indeed correct?\n\n\nI was thinking that it would be nice to refactor the DB by creating a class `TwoWeightCode`; a two-weight code has, after all, rather special properties and certain properties could be computed much faster for it.\n\nI would give this class a flag at construction time `verify = True`. When this is true, it computes the weight distribution and verifies the code is two-weight. When it is false, the code is assumed two-weight: the two weights could either be given to the constructor, or they could be inferred very easily by running through the code until two distinct weights had been encountered. This can be expected to happen very quickly. A long test could then run a `verify_is_two_weight` in the codes or something.\n\nJohan",
    "created_at": "2015-10-25T11:29:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19463#issuecomment-263467",
    "user": "https://github.com/johanrosenkilde"
}
```

Replying to [comment:4 vdelecroix]:
> Isn't there a simpler way of getting the set of weights than
> 
> ```
> _,w1,w2 = sorted(set([x.hamming_weight() for x in LinearCode(M)]))
> ```
> You are going through the whole set of vectors! But I admit that the module is not imported on sage startup.
> 
> One possibility: hard code the values + add a (long) doctest that checks that these values are indeed correct?


I was thinking that it would be nice to refactor the DB by creating a class `TwoWeightCode`; a two-weight code has, after all, rather special properties and certain properties could be computed much faster for it.

I would give this class a flag at construction time `verify = True`. When this is true, it computes the weight distribution and verifies the code is two-weight. When it is false, the code is assumed two-weight: the two weights could either be given to the constructor, or they could be inferred very easily by running through the code until two distinct weights had been encountered. This can be expected to happen very quickly. A long test could then run a `verify_is_two_weight` in the codes or something.

Johan



---

archive/issue_comments_263468.json:
```json
{
    "body": "> I was thinking that it would be nice to refactor the DB by creating a class `TwoWeightCode`; a two-weight code has, after all, rather special properties and certain properties could be computed much faster for it.\n\n\nI have no objection to that if you plan to do it yourself.\n\nNathann",
    "created_at": "2015-10-25T11:35:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19463#issuecomment-263468",
    "user": "https://github.com/nathanncohen"
}
```

> I was thinking that it would be nice to refactor the DB by creating a class `TwoWeightCode`; a two-weight code has, after all, rather special properties and certain properties could be computed much faster for it.


I have no objection to that if you plan to do it yourself.

Nathann



---

archive/issue_comments_263469.json:
```json
{
    "body": "To be more precise: this is a trac ticket. What is going here is a review, and I read anything that is written here as a comment about my code. When somebody says here that \"it would be cool if your code did this/that\" I read it as a comment from a reviewer. Could you make it clear whether you were asking me to implement it, or is it a random idea you were throwing here?\n\nNathann",
    "created_at": "2015-10-25T11:39:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19463#issuecomment-263469",
    "user": "https://github.com/nathanncohen"
}
```

To be more precise: this is a trac ticket. What is going here is a review, and I read anything that is written here as a comment about my code. When somebody says here that "it would be cool if your code did this/that" I read it as a comment from a reviewer. Could you make it clear whether you were asking me to implement it, or is it a random idea you were throwing here?

Nathann



---

archive/issue_comments_263470.json:
```json
{
    "body": "I wrote it as a \"random idea\". I am somewhat motivated to do it myself, but realistically, I might well not find time to do it. I have no objections to your code if no one else wants to implement my suggestion.\n\nIt was also a comment to Vincent's suggestion. Something like: what he suggests opens up a few questions IMHO, and to properly cater all that, one needs a more invasive restructuring of your code. In that sense it was a defence of your code as it's currently written.\n\nJohan",
    "created_at": "2015-10-25T12:06:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19463#issuecomment-263470",
    "user": "https://github.com/johanrosenkilde"
}
```

I wrote it as a "random idea". I am somewhat motivated to do it myself, but realistically, I might well not find time to do it. I have no objections to your code if no one else wants to implement my suggestion.

It was also a comment to Vincent's suggestion. Something like: what he suggests opens up a few questions IMHO, and to properly cater all that, one needs a more invasive restructuring of your code. In that sense it was a defence of your code as it's currently written.

Johan



---

archive/issue_comments_263471.json:
```json
{
    "body": "> It was also a comment to Vincent's suggestion. Something like: what he suggests opens up a few questions IMHO, and to properly cater all that, one needs a more invasive restructuring of your code. In that sense it was a defence of your code as it's currently written.\n\n\nI expect all this code to be totally wiped out and rewritten in the future.\n\nAs you saw in the emails I sent about 2-weight codes the plan is to make it the 'new database' for those objects, and from what Eric Chen was saying it seems that all these codes belong to known families that we will be able to generate easily later.\n\nI do not know what this code will look like, if it will totally replace what we have or only replace it partially, and how soon this will be implemented.\n\nWhat I did here is extract the codes from the strongly regular graph module, in what will eventually become an independent database. Which, for the moment, is nothing but a dictionary with a bit of doc.\n\nNathann",
    "created_at": "2015-10-25T12:25:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19463#issuecomment-263471",
    "user": "https://github.com/nathanncohen"
}
```

> It was also a comment to Vincent's suggestion. Something like: what he suggests opens up a few questions IMHO, and to properly cater all that, one needs a more invasive restructuring of your code. In that sense it was a defence of your code as it's currently written.


I expect all this code to be totally wiped out and rewritten in the future.

As you saw in the emails I sent about 2-weight codes the plan is to make it the 'new database' for those objects, and from what Eric Chen was saying it seems that all these codes belong to known families that we will be able to generate easily later.

I do not know what this code will look like, if it will totally replace what we have or only replace it partially, and how soon this will be implemented.

What I did here is extract the codes from the strongly regular graph module, in what will eventually become an independent database. Which, for the moment, is nothing but a dictionary with a bit of doc.

Nathann



---

archive/issue_comments_263472.json:
```json
{
    "body": "> As you saw in the emails I sent about 2-weight codes the plan is to make it the 'new database' for those objects, and from what Eric Chen was saying it seems that all these codes belong to known families that we will be able to generate easily later.\n\n\nMy suggestion would make even more sense in this case, almost no matter how the future code will be written. Encapsulating the two-weight code properties and algorithms in a class is much more tidy and more easily supports computing things on demand.",
    "created_at": "2015-10-25T16:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19463#issuecomment-263472",
    "user": "https://github.com/johanrosenkilde"
}
```

> As you saw in the emails I sent about 2-weight codes the plan is to make it the 'new database' for those objects, and from what Eric Chen was saying it seems that all these codes belong to known families that we will be able to generate easily later.


My suggestion would make even more sense in this case, almost no matter how the future code will be written. Encapsulating the two-weight code properties and algorithms in a class is much more tidy and more easily supports computing things on demand.



---

archive/issue_comments_263473.json:
```json
{
    "body": "> My suggestion would make even more sense in this case, almost no matter how the future code will be written. Encapsulating the two-weight code properties and algorithms in a class is much more tidy and more easily supports computing things on demand.\n\n\nWhich properties and algorithms are you talking about?\n\nNathann",
    "created_at": "2015-10-25T17:01:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19463#issuecomment-263473",
    "user": "https://github.com/nathanncohen"
}
```

> My suggestion would make even more sense in this case, almost no matter how the future code will be written. Encapsulating the two-weight code properties and algorithms in a class is much more tidy and more easily supports computing things on demand.


Which properties and algorithms are you talking about?

Nathann



---

archive/issue_comments_263474.json:
```json
{
    "body": "Replying to [comment:15 ncohen]:\n> > My suggestion would make even more sense in this case, almost no matter how the future code will be written. Encapsulating the two-weight code properties and algorithms in a class is much more tidy and more easily supports computing things on demand.\n\n> \n> Which properties and algorithms are you talking about?\n\n\nsee the examples in http://pages.uoregon.edu/kantor/PAPERS/2-WeightCodes.pdf\nMost of them are infinite series. It's 30 years old paper, one should check if there is a newer survey...",
    "created_at": "2015-10-25T18:02:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19463#issuecomment-263474",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:15 ncohen]:
> > My suggestion would make even more sense in this case, almost no matter how the future code will be written. Encapsulating the two-weight code properties and algorithms in a class is much more tidy and more easily supports computing things on demand.

> 
> Which properties and algorithms are you talking about?


see the examples in http://pages.uoregon.edu/kantor/PAPERS/2-WeightCodes.pdf
Most of them are infinite series. It's 30 years old paper, one should check if there is a newer survey...



---

archive/issue_comments_263475.json:
```json
{
    "body": "I just love conversing with you guys. I ask one person what properties/algorithms he would expect to see in a `TwoWeightCode` class and I am answered with a survey on those codes.\n\nIf you have any question about the code under review here, I will be glad to help.\n\nNathann",
    "created_at": "2015-10-25T18:06:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19463#issuecomment-263475",
    "user": "https://github.com/nathanncohen"
}
```

I just love conversing with you guys. I ask one person what properties/algorithms he would expect to see in a `TwoWeightCode` class and I am answered with a survey on those codes.

If you have any question about the code under review here, I will be glad to help.

Nathann



---

archive/issue_comments_263476.json:
```json
{
    "body": "Replying to [comment:17 ncohen]:\n> I just love conversing with you guys. I ask one person what properties/algorithms he would expect to see in a `TwoWeightCode` class and I am answered with a survey on those codes.\n\n\nwell, I meant algorithms to build all these...\nOne further bunch of algorithms would be constructing these complementary and projective duals...\n\nDisclaimer: I am not a coding theorist and I know almost nothing about all these marvellous practical things about decoding/encoding, etc...",
    "created_at": "2015-10-25T18:14:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19463#issuecomment-263476",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:17 ncohen]:
> I just love conversing with you guys. I ask one person what properties/algorithms he would expect to see in a `TwoWeightCode` class and I am answered with a survey on those codes.


well, I meant algorithms to build all these...
One further bunch of algorithms would be constructing these complementary and projective duals...

Disclaimer: I am not a coding theorist and I know almost nothing about all these marvellous practical things about decoding/encoding, etc...



---

archive/issue_comments_263477.json:
```json
{
    "body": "> well, I meant algorithms to build all these...\n\n\nOh. Well, that was not the topic. As you can read, we were discussing the usefulness of a specific class for two weight codes. While I hold nothing against it, I wondered why Johan thought that it would be useful: I personally just need the codes to build strongly regular graphs. I don't know which properties/methods we would attach to them if we had such a class.\n\nNathann",
    "created_at": "2015-10-25T18:17:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19463#issuecomment-263477",
    "user": "https://github.com/nathanncohen"
}
```

> well, I meant algorithms to build all these...


Oh. Well, that was not the topic. As you can read, we were discussing the usefulness of a specific class for two weight codes. While I hold nothing against it, I wondered why Johan thought that it would be useful: I personally just need the codes to build strongly regular graphs. I don't know which properties/methods we would attach to them if we had such a class.

Nathann



---

archive/issue_comments_263478.json:
```json
{
    "body": "Probably it makes sense to make a sub-class for projective codes, for a q-ary [n,k]-projective code naturally corresponds to a set in PG(k-1, q), to which one can do things not possible with general codes. But 2-distance? Well, I don't know.",
    "created_at": "2015-10-25T18:41:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19463#issuecomment-263478",
    "user": "https://github.com/dimpase"
}
```

Probably it makes sense to make a sub-class for projective codes, for a q-ary [n,k]-projective code naturally corresponds to a set in PG(k-1, q), to which one can do things not possible with general codes. But 2-distance? Well, I don't know.



---

archive/issue_comments_263479.json:
```json
{
    "body": "Replying to [comment:19 ncohen]:\n> > well, I meant algorithms to build all these...\n\n> \n> While I hold nothing against it, I wondered why Johan thought that it would be useful: I personally just need the codes to build strongly regular graphs. I don't know which properties/methods we would attach to them if we had such a class.\n\n\nA class is just a dictionary with code attached to it :-) Two-weight codes are special codes that allow certain properties to be calculated much faster than the general exponential bounds. Such as, obviously, minimum distance and which hamming weights are in the code, but there's surely more. Since such codes are apparently interesting in graph theory and combinatorics, it seems likely that someone might want to play around with them as codes, before you build graphs. \"playing around\" would then be computing stuff on them. Making them a class would give a natural place to put this code. By just making them `LinearCode`s, we miss out on the opportunity of putting these fast algorithms in a natural place. I'm not really talking about encoding/decoding, since I don't know that anyone should be interested in that.\n\nOne concrete example in your use where a class might be useful is in lazy computation of the two weights, using the faster, probabilistic algorithm.\n\nThe constructions of families that Dima talks about could be either functions that instantiate `TwoWeightCode` or subclasses, depending on whether the first would be overkill or not.\n\nI concede that it might look like over-engineering from your point of view, however. From my point of view, this is a very special class of codes that is seemingly useful and (now) used in Sage. Therefore its natural that it should have a class :-)",
    "created_at": "2015-10-26T08:50:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19463#issuecomment-263479",
    "user": "https://github.com/johanrosenkilde"
}
```

Replying to [comment:19 ncohen]:
> > well, I meant algorithms to build all these...

> 
> While I hold nothing against it, I wondered why Johan thought that it would be useful: I personally just need the codes to build strongly regular graphs. I don't know which properties/methods we would attach to them if we had such a class.


A class is just a dictionary with code attached to it :-) Two-weight codes are special codes that allow certain properties to be calculated much faster than the general exponential bounds. Such as, obviously, minimum distance and which hamming weights are in the code, but there's surely more. Since such codes are apparently interesting in graph theory and combinatorics, it seems likely that someone might want to play around with them as codes, before you build graphs. "playing around" would then be computing stuff on them. Making them a class would give a natural place to put this code. By just making them `LinearCode`s, we miss out on the opportunity of putting these fast algorithms in a natural place. I'm not really talking about encoding/decoding, since I don't know that anyone should be interested in that.

One concrete example in your use where a class might be useful is in lazy computation of the two weights, using the faster, probabilistic algorithm.

The constructions of families that Dima talks about could be either functions that instantiate `TwoWeightCode` or subclasses, depending on whether the first would be overkill or not.

I concede that it might look like over-engineering from your point of view, however. From my point of view, this is a very special class of codes that is seemingly useful and (now) used in Sage. Therefore its natural that it should have a class :-)



---

archive/issue_comments_263480.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-10-31T16:15:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19463#issuecomment-263480",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_263481.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-24T11:39:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19463#issuecomment-263481",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_263482.json:
```json
{
    "body": "Just merged this branch with the latest beta, as it was in conflict. This branch moves a long list of constructors, and there is a need to double-check everything every time this list gets modified by another patch.\n\nNathann",
    "created_at": "2015-11-24T11:41:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19463#issuecomment-263482",
    "user": "https://github.com/nathanncohen"
}
```

Just merged this branch with the latest beta, as it was in conflict. This branch moves a long list of constructors, and there is a need to double-check everything every time this list gets modified by another patch.

Nathann



---

archive/issue_comments_263483.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-25T17:46:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19463#issuecomment-263483",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_263484.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-26T13:30:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19463#issuecomment-263484",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_263485.json:
```json
{
    "body": "take the last commit from `public/19463` to avoid the following:\n\n```\n$ sage -btp src/sage/coding/two_weight_db.py\npython -u setup.py install\nUpdating Cython code....\nEnabling Cython debugging support\nCompiling sage/graphs/strongly_regular_db.pyx because it changed.\n[1/1] Cythonizing sage/graphs/strongly_regular_db.pyx\n\nError compiling Cython file:\n------------------------------------------------------------\n...\n        sage: G = SRG_630_85_20_10()                    # long time\n        sage: G.is_strongly_regular(parameters=True)    # long time\n        (630, 85, 20, 10)\n    \"\"\"\n    from sage.graphs.generators.intersection import IntersectionGraph\n    hs = HoffmanSingletonGraph()\n                             ^\n------------------------------------------------------------\n\nsage/graphs/strongly_regular_db.pyx:2340:30: undeclared name not builtin: HoffmanSingletonGraph\n...\n```",
    "created_at": "2015-11-26T14:37:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19463#issuecomment-263485",
    "user": "https://github.com/dimpase"
}
```

take the last commit from `public/19463` to avoid the following:

```
$ sage -btp src/sage/coding/two_weight_db.py
python -u setup.py install
Updating Cython code....
Enabling Cython debugging support
Compiling sage/graphs/strongly_regular_db.pyx because it changed.
[1/1] Cythonizing sage/graphs/strongly_regular_db.pyx

Error compiling Cython file:
------------------------------------------------------------
...
        sage: G = SRG_630_85_20_10()                    # long time
        sage: G.is_strongly_regular(parameters=True)    # long time
        (630, 85, 20, 10)
    """
    from sage.graphs.generators.intersection import IntersectionGraph
    hs = HoffmanSingletonGraph()
                             ^
------------------------------------------------------------

sage/graphs/strongly_regular_db.pyx:2340:30: undeclared name not builtin: HoffmanSingletonGraph
...
```



---

archive/issue_comments_263486.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2015-11-26T14:41:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19463#issuecomment-263486",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_263487.json:
```json
{
    "body": "......................................\n\nNEVER use one of Dima's branches.",
    "created_at": "2015-11-26T14:41:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19463#issuecomment-263487",
    "user": "https://github.com/nathanncohen"
}
```

......................................

NEVER use one of Dima's branches.



---

archive/issue_comments_263488.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-11-26T14:42:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19463#issuecomment-263488",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_263489.json:
```json
{
    "body": "Fixed. Thanks,\n\nNathann",
    "created_at": "2015-11-26T14:43:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19463#issuecomment-263489",
    "user": "https://github.com/nathanncohen"
}
```

Fixed. Thanks,

Nathann



---

archive/issue_comments_263490.json:
```json
{
    "body": "Replying to [comment:32 ncohen]:\n> ......................................\n> \n> NEVER use one of Dima's branches.\n\n\nI told you - take the last commit :-)",
    "created_at": "2015-11-26T14:49:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19463#issuecomment-263490",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:32 ncohen]:
> ......................................
> 
> NEVER use one of Dima's branches.


I told you - take the last commit :-)



---

archive/issue_comments_263491.json:
```json
{
    "body": "I don't quite understand the new design, but it seems to work.",
    "created_at": "2015-11-26T15:09:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19463#issuecomment-263491",
    "user": "https://github.com/dimpase"
}
```

I don't quite understand the new design, but it seems to work.



---

archive/issue_comments_263492.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-11-26T15:09:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19463#issuecomment-263492",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_263493.json:
```json
{
    "body": "Merge conflict",
    "created_at": "2015-11-27T22:26:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19463#issuecomment-263493",
    "user": "https://github.com/vbraun"
}
```

Merge conflict



---

archive/issue_comments_263494.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-11-27T22:26:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19463#issuecomment-263494",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_263495.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-11-27T23:05:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19463#issuecomment-263495",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_263496.json:
```json
{
    "body": "the merge conflict was in the .rst file, trivial to resolve. I hope I didn't screw up the branch I propose...",
    "created_at": "2015-11-27T23:05:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19463#issuecomment-263496",
    "user": "https://github.com/dimpase"
}
```

the merge conflict was in the .rst file, trivial to resolve. I hope I didn't screw up the branch I propose...



---

archive/issue_comments_263497.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-28T09:18:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19463#issuecomment-263497",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_263498.json:
```json
{
    "body": "This new commit only merges it with beta6, and not with anything else.",
    "created_at": "2015-11-28T09:19:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19463#issuecomment-263498",
    "user": "https://github.com/nathanncohen"
}
```

This new commit only merges it with beta6, and not with anything else.



---

archive/issue_comments_263499.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-11-28T09:19:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19463#issuecomment-263499",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_053722.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-11-29T12:12:07Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19463",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19463#event-53722"
}
```



---

archive/issue_comments_263500.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-11-29T12:12:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19463#issuecomment-263500",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_263501.json:
```json
{
    "body": "There is still a two-weight code left in `graphs/strongly_regular_graphs_db`, namely, in \n`SRG_729_336_153_156` there is matrix `L`, which gives\n\n```\nsage: [w for w,f in enumerate(LinearCode(L.T).weight_distribution()) if w and f]\n[108, 117]\nsage: LinearCode(L.T)\nLinear code of length 168, dimension 6 over Finite Field of size 3\n```",
    "created_at": "2015-11-29T16:51:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19463#issuecomment-263501",
    "user": "https://github.com/dimpase"
}
```

There is still a two-weight code left in `graphs/strongly_regular_graphs_db`, namely, in 
`SRG_729_336_153_156` there is matrix `L`, which gives

```
sage: [w for w,f in enumerate(LinearCode(L.T).weight_distribution()) if w and f]
[108, 117]
sage: LinearCode(L.T)
Linear code of length 168, dimension 6 over Finite Field of size 3
```



---

archive/issue_comments_263502.json:
```json
{
    "body": "I didn't know that commenting on closed tickets looks like it nukes commits. I think it's actually just a wrong message, as I can still see this commit just fine.",
    "created_at": "2015-11-29T16:58:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19463#issuecomment-263502",
    "user": "https://github.com/dimpase"
}
```

I didn't know that commenting on closed tickets looks like it nukes commits. I think it's actually just a wrong message, as I can still see this commit just fine.
