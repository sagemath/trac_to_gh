# Issue 19158: Undo the breaking of old-style packages

archive/issues_018921.json:
```json
{
    "assignees": [],
    "body": "Ticket #19004 has the very user-unfriendly consequence that all old-style packages are effectively gone:\n\n```\n$ ./sage -i chomp\nAttempting to download package chomp\nError: could not find a package matching chomp\n       Try 'sage --package list' to see the available packages\n       Did you mean: csdp, gmp, cbc, cmake, cvxopt?\n```\n\nInstead of removing support for old-style packages, we should deprecate them.\n\nDepends on #19101\n\nCC:  @nathanncohen @vbraun @jhpalmieri\n\nBranch/Commit: **[`3dda704`](https://github.com/sagemath/sagetrac-mirror/commit/3dda7044efe3c1aa9fac340dda0ce82ec9abc509)**\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **Jeroen Demeyer**\n\nComponent: **scripts**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/19158_\n\n",
    "closed_at": "2015-09-16T18:31:29Z",
    "created_at": "2015-09-07T20:28:29Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20scripts",
        "https://github.com/sagemath/sage/labels/p%3A%20blocker%20/%201",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.9",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Undo the breaking of old-style packages",
    "type": "issue",
    "updated_at": "2015-09-16T18:31:29Z",
    "url": "https://github.com/sagemath/sage/issues/19158",
    "user": "https://github.com/jdemeyer"
}
```
Ticket #19004 has the very user-unfriendly consequence that all old-style packages are effectively gone:

```
$ ./sage -i chomp
Attempting to download package chomp
Error: could not find a package matching chomp
       Try 'sage --package list' to see the available packages
       Did you mean: csdp, gmp, cbc, cmake, cvxopt?
```

Instead of removing support for old-style packages, we should deprecate them.

Depends on #19101

CC:  @nathanncohen @vbraun @jhpalmieri

Branch/Commit: **[`3dda704`](https://github.com/sagemath/sagetrac-mirror/commit/3dda7044efe3c1aa9fac340dda0ce82ec9abc509)**

Reviewer: **Travis Scrimshaw**

Author: **Jeroen Demeyer**

Component: **scripts**

_Issue created by migration from https://trac.sagemath.org/ticket/19158_





---

archive/issue_events_269547.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-09-07T20:28:29Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "milestone_number": null,
    "milestone_title": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19158#event-269547"
}
```



---

archive/issue_events_269548.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-09-07T20:28:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20scripts",
    "label_color": "0000b0",
    "label_name": "c: scripts",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19158#event-269548"
}
```



---

archive/issue_events_269549.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-09-07T20:28:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20blocker%20/%201",
    "label_color": "ff0000",
    "label_name": "p: blocker / 1",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19158#event-269549"
}
```



---

archive/issue_events_269550.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-09-07T20:28:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19158#event-269550"
}
```



---

archive/issue_comments_270966.json:
```json
{
    "body": "Dependencies: **#19101**",
    "created_at": "2015-09-07T20:29:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19158#issuecomment-270966",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#19101**



---

archive/issue_comments_270967.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nIMHO the only thing that needs to be done is make chomp a new-style package.\n\nThe mixture of old and new packages has always been broken. Let it die. We can support old packages as legacy but not mash it up with new packages in an utterly confusing manner to users.",
    "created_at": "2015-09-07T21:21:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19158#issuecomment-270967",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:2" align="right">comment:2</div>

IMHO the only thing that needs to be done is make chomp a new-style package.

The mixture of old and new packages has always been broken. Let it die. We can support old packages as legacy but not mash it up with new packages in an utterly confusing manner to users.



---

archive/issue_comments_270968.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\n1. There has been no deprecation at all for this, which really goes against Sage's 1-year deprecation policy. You cannot just break user's work flows like this.\n\n2. Old-style packages still appear in various places in the documentation:\n\n- Various places document `sage -i chomp` (or other old-style packages)\n- `sage --optional` shows both new-style and old-style packages\n- We even have a page in the developer documentation about creating old-style packages.",
    "created_at": "2015-09-08T06:23:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19158#issuecomment-270968",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:3" align="right">comment:3</div>

1. There has been no deprecation at all for this, which really goes against Sage's 1-year deprecation policy. You cannot just break user's work flows like this.

2. Old-style packages still appear in various places in the documentation:

- Various places document `sage -i chomp` (or other old-style packages)
- `sage --optional` shows both new-style and old-style packages
- We even have a page in the developer documentation about creating old-style packages.



---

archive/issue_comments_270969.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\n1. There is no deprecation period for fixing bugs.\n2. The documentation should be fixed (Often we should just point people towards pip; Suggesting some ancient unmaintained spkg is yet another bug in itself)",
    "created_at": "2015-09-08T07:28:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19158#issuecomment-270969",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:4" align="right">comment:4</div>

1. There is no deprecation period for fixing bugs.
2. The documentation should be fixed (Often we should just point people towards pip; Suggesting some ancient unmaintained spkg is yet another bug in itself)



---

archive/issue_comments_270970.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@vbraun](#comment%3A4):\n> 1. There is no deprecation period for fixing bugs.\n\nThe fact that `sage -i chomp` used to install `chomp` is a bug??",
    "created_at": "2015-09-08T07:36:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19158#issuecomment-270970",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@vbraun](#comment%3A4):
> 1. There is no deprecation period for fixing bugs.

The fact that `sage -i chomp` used to install `chomp` is a bug??



---

archive/issue_comments_270971.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nThat `sage -i python` used to install an ancient Python is a bug. That the undesirable behavior of silently installing ancient packages happened to be somewhat(1) desirable for chomp doesn't make it less of a bug.\n\n(1) The chomp spkg actually doesn't compile with modern gcc due to tighter C++ checking\n\n```\n../include/capd/matrixAlgorithms/floatMatrixAlgorithms.hpp:245:159: error: redeclaration of 'template<class MatrixType> int chomp::matrixAlgorithms::symMatrixDiagonalize(const MatrixType&, MatrixType&, typename MatrixType::ScalarType)' may not have default arguments [-fpermissive]\n int symMatrixDiagonalize(const MatrixType& A, MatrixType& D, typename MatrixType::ScalarType diagonalizingRelTolerance = typename MatrixType::ScalarType(1e-5))\n                                                                                                                                                               ^\n../include/capd/matrixAlgorithms/floatMatrixAlgorithms.hpp:326:177: error: redeclaration of 'template<class MatrixType> typename MatrixType::ScalarType chomp::matrixAlgorithms::spectralRadiusOfSymMatrix(const MatrixType&, typename MatrixType::ScalarType)' may not have default arguments [-fpermissive]\n```",
    "created_at": "2015-09-08T08:09:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19158#issuecomment-270971",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:6" align="right">comment:6</div>

That `sage -i python` used to install an ancient Python is a bug. That the undesirable behavior of silently installing ancient packages happened to be somewhat(1) desirable for chomp doesn't make it less of a bug.

(1) The chomp spkg actually doesn't compile with modern gcc due to tighter C++ checking

```
../include/capd/matrixAlgorithms/floatMatrixAlgorithms.hpp:245:159: error: redeclaration of 'template<class MatrixType> int chomp::matrixAlgorithms::symMatrixDiagonalize(const MatrixType&, MatrixType&, typename MatrixType::ScalarType)' may not have default arguments [-fpermissive]
 int symMatrixDiagonalize(const MatrixType& A, MatrixType& D, typename MatrixType::ScalarType diagonalizingRelTolerance = typename MatrixType::ScalarType(1e-5))
                                                                                                                                                               ^
../include/capd/matrixAlgorithms/floatMatrixAlgorithms.hpp:326:177: error: redeclaration of 'template<class MatrixType> typename MatrixType::ScalarType chomp::matrixAlgorithms::spectralRadiusOfSymMatrix(const MatrixType&, typename MatrixType::ScalarType)' may not have default arguments [-fpermissive]
```



---

archive/issue_comments_270972.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@vbraun](#comment%3A6):\n> That `sage -i python` used to install an ancient Python is a bug.\n\nAgreed. But #19004 wasn't the right fix.\n\n> That the undesirable behavior of silently installing ancient packages happened to be somewhat(1) desirable for chomp doesn't make it less of a bug.\n\nThis ticket isn't about `chomp` at all, I'm just using that package as one example of an old-style package.",
    "created_at": "2015-09-08T08:14:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19158#issuecomment-270972",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@vbraun](#comment%3A6):
> That `sage -i python` used to install an ancient Python is a bug.

Agreed. But #19004 wasn't the right fix.

> That the undesirable behavior of silently installing ancient packages happened to be somewhat(1) desirable for chomp doesn't make it less of a bug.

This ticket isn't about `chomp` at all, I'm just using that package as one example of an old-style package.



---

archive/issue_comments_270973.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nIMHO we should have removed old spkgs a long time ago. It was ok during the transition period but has been causing us constant pain since then. We are much better of with #19004 than without. For every old-style package that you might actually want to install I can name you ten that are going to get in the way if you accidentally install them.",
    "created_at": "2015-09-08T08:40:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19158#issuecomment-270973",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:8" align="right">comment:8</div>

IMHO we should have removed old spkgs a long time ago. It was ok during the transition period but has been causing us constant pain since then. We are much better of with #19004 than without. For every old-style package that you might actually want to install I can name you ten that are going to get in the way if you accidentally install them.



---

archive/issue_comments_270974.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@vbraun](#comment%3A8):\n> IMHO we should have removed old spkgs a long time ago.\n\nBut we didn't, so we are currently stuck with them.\n\n> It was ok during the transition period but has been causing us constant pain since then.\n\nMaybe, but like I said: #19004 isn't the solution. The solution is warning users that they are installing old-style packages with a proper deprecation warning.",
    "created_at": "2015-09-08T09:57:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19158#issuecomment-270974",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@vbraun](#comment%3A8):
> IMHO we should have removed old spkgs a long time ago.

But we didn't, so we are currently stuck with them.

> It was ok during the transition period but has been causing us constant pain since then.

Maybe, but like I said: #19004 isn't the solution. The solution is warning users that they are installing old-style packages with a proper deprecation warning.



---

archive/issue_comments_270975.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@jdemeyer](#comment%3A9):\n> Maybe, but like I said: #19004 isn't the solution. The solution is warning users that they are installing old-style packages with a proper deprecation warning.\n\nNo, the solution is to not install broken/deprecated packages. Or, rather, make it difficult enough so that nobody does it accidentally.",
    "created_at": "2015-09-08T10:20:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19158#issuecomment-270975",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@jdemeyer](#comment%3A9):
> Maybe, but like I said: #19004 isn't the solution. The solution is warning users that they are installing old-style packages with a proper deprecation warning.

No, the solution is to not install broken/deprecated packages. Or, rather, make it difficult enough so that nobody does it accidentally.



---

archive/issue_comments_270976.json:
```json
{
    "body": "Branch: **[u/jdemeyer/ticket/19158](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/19158)**",
    "created_at": "2015-09-08T11:49:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19158#issuecomment-270976",
    "user": "https://github.com/jdemeyer"
}
```

Branch: **[u/jdemeyer/ticket/19158](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/19158)**



---

archive/issue_events_269551.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-09-08T11:50:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19158#event-269551"
}
```



---

archive/issue_comments_270977.json:
```json
{
    "body": "Commit: **[`39f1e4d`](https://github.com/sagemath/sagetrac-mirror/commit/39f1e4d655ee4c1cc4a2f8de35f0790583c040f9)**",
    "created_at": "2015-09-08T11:50:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19158#issuecomment-270977",
    "user": "https://github.com/jdemeyer"
}
```

Commit: **[`39f1e4d`](https://github.com/sagemath/sagetrac-mirror/commit/39f1e4d655ee4c1cc4a2f8de35f0790583c040f9)**



---

archive/issue_comments_270978.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/31ff6e7884b7154077abf29c66ab81c9da37a515\"><code>31ff6e7</code></a></td><td><code>Parse sage-spkg options in sage-spkg</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cb05746662de891c8444009150962c1b2bfe941f\"><code>cb05746</code></a></td><td><code>Add sage --location option to run sage-location</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e856a8e872282fe7f059900559f5e589f1b016aa\"><code>e856a8e</code></a></td><td><code>Change sage -i to install with dependencies</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e105028888e726fd08f72a9e386227b9abc65bea\"><code>e105028</code></a></td><td><code>Revert sage-spkg changes from Trac #19004</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/39f1e4d655ee4c1cc4a2f8de35f0790583c040f9\"><code>39f1e4d</code></a></td><td><code>Deprecate old-style packages</code></td></tr></table>\n",
    "created_at": "2015-09-08T11:50:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19158#issuecomment-270978",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:12"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/31ff6e7884b7154077abf29c66ab81c9da37a515"><code>31ff6e7</code></a></td><td><code>Parse sage-spkg options in sage-spkg</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cb05746662de891c8444009150962c1b2bfe941f"><code>cb05746</code></a></td><td><code>Add sage --location option to run sage-location</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e856a8e872282fe7f059900559f5e589f1b016aa"><code>e856a8e</code></a></td><td><code>Change sage -i to install with dependencies</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e105028888e726fd08f72a9e386227b9abc65bea"><code>e105028</code></a></td><td><code>Revert sage-spkg changes from Trac #19004</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/39f1e4d655ee4c1cc4a2f8de35f0790583c040f9"><code>39f1e4d</code></a></td><td><code>Deprecate old-style packages</code></td></tr></table>




---

archive/issue_comments_270979.json:
```json
{
    "body": "Author: **Jeroen Demeyer**",
    "created_at": "2015-09-08T11:50:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19158#issuecomment-270979",
    "user": "https://github.com/jdemeyer"
}
```

Author: **Jeroen Demeyer**



---

archive/issue_comments_270980.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nI'm against",
    "created_at": "2015-09-08T11:57:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19158#issuecomment-270980",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:13" align="right">comment:13</div>

I'm against



---

archive/issue_comments_270981.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@vbraun](#comment%3A13):\n> I'm against\n\nWell, I am against #19004.\n\nIs there any compromise possible? A solution which still allows users to install old-style packages?",
    "created_at": "2015-09-08T11:59:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19158#issuecomment-270981",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@vbraun](#comment%3A13):
> I'm against

Well, I am against #19004.

Is there any compromise possible? A solution which still allows users to install old-style packages?



---

archive/issue_comments_270982.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nYou can install old-style packages, they just aren't searched for. If you want to try to compile chomp just run e.g.\n\n```\nsage -f http://files.sagemath.org/spkg/optional/chomp-20130518.p1.spkg\n```",
    "created_at": "2015-09-08T20:58:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19158#issuecomment-270982",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:15" align="right">comment:15</div>

You can install old-style packages, they just aren't searched for. If you want to try to compile chomp just run e.g.

```
sage -f http://files.sagemath.org/spkg/optional/chomp-20130518.p1.spkg
```



---

archive/issue_comments_270983.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@vbraun](#comment%3A15):\n> You can install old-style packages, they just aren't searched for.\n\nThat's \"you can\" for a very dubious value of \"can\". To users, it really looks like the package is completely gone.",
    "created_at": "2015-09-08T21:25:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19158#issuecomment-270983",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@vbraun](#comment%3A15):
> You can install old-style packages, they just aren't searched for.

That's "you can" for a very dubious value of "can". To users, it really looks like the package is completely gone.



---

archive/issue_comments_270984.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-This is really really bad:\n+Ticket #19004 has the very user-unfriendly consequence that all old-style packages are effectively gone:\n \n ```\n $ ./sage -i chomp\n@@ -7,3 +7,5 @@\n        Try 'sage --package list' to see the available packages\n        Did you mean: csdp, gmp, cbc, cmake, cvxopt?\n ```\n+\n+Instead of removing support for old-style packages, we should deprecate them.\n``````\n",
    "created_at": "2015-09-08T21:26:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19158#issuecomment-270984",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-This is really really bad:
+Ticket #19004 has the very user-unfriendly consequence that all old-style packages are effectively gone:
 
 ```
 $ ./sage -i chomp
@@ -7,3 +7,5 @@
        Try 'sage --package list' to see the available packages
        Did you mean: csdp, gmp, cbc, cmake, cvxopt?
 ```
+
+Instead of removing support for old-style packages, we should deprecate them.
``````




---

archive/issue_comments_270985.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nAnd thats good because they are either huge nuisances (like \"python\") or just broken.",
    "created_at": "2015-09-08T21:59:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19158#issuecomment-270985",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:18" align="right">comment:18</div>

And thats good because they are either huge nuisances (like "python") or just broken.



---

archive/issue_comments_270986.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nWe obviously cannot resolve this here, so I'm writing to sage-devel.",
    "created_at": "2015-09-09T07:32:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19158#issuecomment-270986",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:19" align="right">comment:19</div>

We obviously cannot resolve this here, so I'm writing to sage-devel.



---

archive/issue_comments_270987.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nAs I said on #19105, you shouldn't search \"standard\" packages on-line.",
    "created_at": "2015-09-11T18:31:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19158#issuecomment-270987",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:20" align="right">comment:20</div>

As I said on #19105, you shouldn't search "standard" packages on-line.



---

archive/issue_comments_270988.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@jhpalmieri](#comment%3A20):\n> As I said on #19105, you shouldn't search \"standard\" packages on-line.\n\nSure, that's an easy change (although not very relevant if we merge #19105).\n\nBut I'm confused by your comment. Does it imply you're in favour of this ticket now?",
    "created_at": "2015-09-11T21:39:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19158#issuecomment-270988",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@jhpalmieri](#comment%3A20):
> As I said on #19105, you shouldn't search "standard" packages on-line.

Sure, that's an easy change (although not very relevant if we merge #19105).

But I'm confused by your comment. Does it imply you're in favour of this ticket now?



---

archive/issue_comments_270989.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nI don't think I ever said I wasn't in favor of it. My last post on the sage-devel thread said, \"I could also be easily persuaded to (B) if we don't allow \"sage -i python\" to install the old python-2.5 package.\"",
    "created_at": "2015-09-11T22:26:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19158#issuecomment-270989",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:22" align="right">comment:22</div>

I don't think I ever said I wasn't in favor of it. My last post on the sage-devel thread said, "I could also be easily persuaded to (B) if we don't allow "sage -i python" to install the old python-2.5 package."



---

archive/issue_comments_270990.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/efd2725fda77a95bbb84998facced905c18ae1af\"><code>efd2725</code></a></td><td><code>Do not consider \"standard\" and \"archive\" packages</code></td></tr></table>\n",
    "created_at": "2015-09-14T08:22:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19158#issuecomment-270990",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/efd2725fda77a95bbb84998facced905c18ae1af"><code>efd2725</code></a></td><td><code>Do not consider "standard" and "archive" packages</code></td></tr></table>




---

archive/issue_comments_270991.json:
```json
{
    "body": "Changed commit from **[`39f1e4d`](https://github.com/sagemath/sagetrac-mirror/commit/39f1e4d655ee4c1cc4a2f8de35f0790583c040f9)** to **[`efd2725`](https://github.com/sagemath/sagetrac-mirror/commit/efd2725fda77a95bbb84998facced905c18ae1af)**",
    "created_at": "2015-09-14T08:22:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19158#issuecomment-270991",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`39f1e4d`](https://github.com/sagemath/sagetrac-mirror/commit/39f1e4d655ee4c1cc4a2f8de35f0790583c040f9)** to **[`efd2725`](https://github.com/sagemath/sagetrac-mirror/commit/efd2725fda77a95bbb84998facced905c18ae1af)**



---

archive/issue_comments_270992.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@jhpalmieri](#comment%3A22):\n> My last post on the sage-devel thread said, \"I could also be easily persuaded to (B) if we don't allow \"sage -i python\" to install the old python-2.5 package.\"\n\nGreat! My last commit does that, since we no longer look for standard packages:\n\n```\nAttempting to download package python\n>>> Checking online list of optional packages.\n>>> Checking online list of experimental packages.\n>>> Checking online list of huge packages.\nError: could not find a package matching python\n       Try 'sage --package list' to see the available packages\n       Did you mean: cython, ipython, python2, python3, patch?\n```",
    "created_at": "2015-09-14T08:44:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19158#issuecomment-270992",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@jhpalmieri](#comment%3A22):
> My last post on the sage-devel thread said, "I could also be easily persuaded to (B) if we don't allow "sage -i python" to install the old python-2.5 package."

Great! My last commit does that, since we no longer look for standard packages:

```
Attempting to download package python
>>> Checking online list of optional packages.
>>> Checking online list of experimental packages.
>>> Checking online list of huge packages.
Error: could not find a package matching python
       Try 'sage --package list' to see the available packages
       Did you mean: cython, ipython, python2, python3, patch?
```



---

archive/issue_comments_270993.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nGiven William Stein's support, I am still very convinced that we should move forward with this ticket.",
    "created_at": "2015-09-14T08:51:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19158#issuecomment-270993",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:25" align="right">comment:25</div>

Given William Stein's support, I am still very convinced that we should move forward with this ticket.



---

archive/issue_comments_270994.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nI was able to install (old-style) chomp without any problems with this ticket. Moreover it doesn't let me install python. Overall I'm ready to set this to positive review except for an interface question.\n\nCould we add an option to the warning that if the user presses Y or enter (after perhaps a mandatory 5 second reading period) that the old-style spkg installs? If this is too difficult, then could we drop the sleep to 15 seconds or so (it's not that long of a message)?",
    "created_at": "2015-09-15T19:29:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19158#issuecomment-270994",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:26" align="right">comment:26</div>

I was able to install (old-style) chomp without any problems with this ticket. Moreover it doesn't let me install python. Overall I'm ready to set this to positive review except for an interface question.

Could we add an option to the warning that if the user presses Y or enter (after perhaps a mandatory 5 second reading period) that the old-style spkg installs? If this is too difficult, then could we drop the sleep to 15 seconds or so (it's not that long of a message)?



---

archive/issue_comments_270995.json:
```json
{
    "body": "<div id=\"comment:27\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3dda7044efe3c1aa9fac340dda0ce82ec9abc509\"><code>3dda704</code></a></td><td><code>Improve prompt</code></td></tr></table>\n",
    "created_at": "2015-09-15T20:57:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19158#issuecomment-270995",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3dda7044efe3c1aa9fac340dda0ce82ec9abc509"><code>3dda704</code></a></td><td><code>Improve prompt</code></td></tr></table>




---

archive/issue_comments_270996.json:
```json
{
    "body": "Changed commit from **[`efd2725`](https://github.com/sagemath/sagetrac-mirror/commit/efd2725fda77a95bbb84998facced905c18ae1af)** to **[`3dda704`](https://github.com/sagemath/sagetrac-mirror/commit/3dda7044efe3c1aa9fac340dda0ce82ec9abc509)**",
    "created_at": "2015-09-15T20:57:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19158#issuecomment-270996",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`efd2725`](https://github.com/sagemath/sagetrac-mirror/commit/efd2725fda77a95bbb84998facced905c18ae1af)** to **[`3dda704`](https://github.com/sagemath/sagetrac-mirror/commit/3dda7044efe3c1aa9fac340dda0ce82ec9abc509)**



---

archive/issue_comments_270997.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nLGTM. Thanks!",
    "created_at": "2015-09-15T21:10:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19158#issuecomment-270997",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:28" align="right">comment:28</div>

LGTM. Thanks!



---

archive/issue_events_269552.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-09-15T21:10:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19158#event-269552"
}
```



---

archive/issue_events_269553.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-09-15T21:10:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19158#event-269553"
}
```



---

archive/issue_comments_270998.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2015-09-15T21:10:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19158#issuecomment-270998",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_270999.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nUrgh thats so ugly I just threw up in my mouth a little. Ever wondered why none of the gnu coreutils does the ask + timeout? \n\nI expect you to fix the topcom/TOPCOM issue and do something about the totally broken packages.",
    "created_at": "2015-09-15T22:24:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19158#issuecomment-270999",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:29" align="right">comment:29</div>

Urgh thats so ugly I just threw up in my mouth a little. Ever wondered why none of the gnu coreutils does the ask + timeout? 

I expect you to fix the topcom/TOPCOM issue and do something about the totally broken packages.



---

archive/issue_comments_271000.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nReplying to [@vbraun](#comment%3A29):\n> I expect you to fix the topcom/TOPCOM issue and do something about the totally broken packages.\n\nSee #19220 for `TOPCOM`. That and `python` are the two serious problems with old-style packages, as far as I understand. Other old-style packages may be broken, but that's not new. I don't know of any other packages which will break the Sage installation if you try to install them.",
    "created_at": "2015-09-16T02:54:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19158#issuecomment-271000",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:30" align="right">comment:30</div>

Replying to [@vbraun](#comment%3A29):
> I expect you to fix the topcom/TOPCOM issue and do something about the totally broken packages.

See #19220 for `TOPCOM`. That and `python` are the two serious problems with old-style packages, as far as I understand. Other old-style packages may be broken, but that's not new. I don't know of any other packages which will break the Sage installation if you try to install them.



---

archive/issue_comments_271001.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nPython is handled on #19105.",
    "created_at": "2015-09-16T03:02:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19158#issuecomment-271001",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:31" align="right">comment:31</div>

Python is handled on #19105.



---

archive/issue_comments_271002.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nWell somebody has to go through the list. Fun things:\n* kash3 is binary-only. Somehow that wasn't OK for gap3 but you just re-enabled another optional binary-only package.\n* Anything that is pip installable is wayyy outdated, terrible UX to just use ancient cruft even if it works. Nobody even made a list of which packages fall in that category\n* The undocumented: soya_cvs-2006.05.09.spkg has no SPKG.txt, wtf is it and why is it a 9-year old cvs snapshot?\n\nAnd by \"somebody\", I mean somebody who was is favor of this ticket.",
    "created_at": "2015-09-16T07:54:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19158#issuecomment-271002",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:32" align="right">comment:32</div>

Well somebody has to go through the list. Fun things:
* kash3 is binary-only. Somehow that wasn't OK for gap3 but you just re-enabled another optional binary-only package.
* Anything that is pip installable is wayyy outdated, terrible UX to just use ancient cruft even if it works. Nobody even made a list of which packages fall in that category
* The undocumented: soya_cvs-2006.05.09.spkg has no SPKG.txt, wtf is it and why is it a 9-year old cvs snapshot?

And by "somebody", I mean somebody who was is favor of this ticket.



---

archive/issue_events_269554.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-09-16T18:31:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19158#event-269554"
}
```



---

archive/issue_events_269555.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "8ea6605956fd0ed65a4f3572a80f9082f90391d5",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-09-16T18:31:29Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19158#event-269555"
}
```



---

archive/issue_comments_271003.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/ticket/19158](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/19158)** to **[`3dda704`](https://github.com/sagemath/sagetrac-mirror/commit/3dda7044efe3c1aa9fac340dda0ce82ec9abc509)**",
    "created_at": "2015-09-16T18:31:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19158#issuecomment-271003",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jdemeyer/ticket/19158](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/19158)** to **[`3dda704`](https://github.com/sagemath/sagetrac-mirror/commit/3dda7044efe3c1aa9fac340dda0ce82ec9abc509)**
