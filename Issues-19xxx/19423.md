# Issue 19423: AsymptoticExpansion: combine shared code of invert, log, exp

archive/issues_019186.json:
```json
{
    "body": "From #19083, comment 66, 33:\n> I think that there is shared code between `__invert__`, `__log__`, `__exp__` and powers with rational exponents (#19316). In all those cases, it is important to split into main term and renormalized remainder. The main term is then processed according to the respective method, the remainder is inserted into a converging taylor series with certain coefficients (this could be handeled by one method getting the sequence of taylor coefficients as an argument).\n\nCC:  @cheuberg @behackl\n\nBranch/Commit: 96f1ea6c9e8ec4d195635a95cb055eff6a7cc4f2\n\nReviewer: Clemens Heuberger, Daniel Krenn\n\nAuthor: Clemens Heuberger, Daniel Krenn\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/19423\n\n",
    "closed_at": "2016-02-09T23:04:11Z",
    "created_at": "2015-10-16T14:07:40Z",
    "labels": [
        "component: asymptotic expansions"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.1",
    "title": "AsymptoticExpansion: combine shared code of invert, log, exp",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19423",
    "user": "https://github.com/dkrenn"
}
```
From #19083, comment 66, 33:
> I think that there is shared code between `__invert__`, `__log__`, `__exp__` and powers with rational exponents (#19316). In all those cases, it is important to split into main term and renormalized remainder. The main term is then processed according to the respective method, the remainder is inserted into a converging taylor series with certain coefficients (this could be handeled by one method getting the sequence of taylor coefficients as an argument).

CC:  @cheuberg @behackl

Branch/Commit: 96f1ea6c9e8ec4d195635a95cb055eff6a7cc4f2

Reviewer: Clemens Heuberger, Daniel Krenn

Author: Clemens Heuberger, Daniel Krenn

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/19423





---

archive/issue_comments_280053.json:
```json
{
    "body": "<a id='comment:3'></a>New commits:",
    "created_at": "2016-01-30T12:10:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19423#issuecomment-280053",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:3'></a>New commits:



---

archive/issue_comments_280054.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n From #19083, comment 66, 33:\n-> I think that there is shared code between `__invert__`, `__log__`, `__exp__` and powers with rational exponents. In all those cases, it is important to split into main term and renormalized remainder. The main term is then processed according to the respective method, the remainder is inserted into a converging taylor series with certain coefficients (this could be handeled by one method getting the sequence of taylor coefficients as an argument).\n+> I think that there is shared code between `__invert__`, `__log__`, `__exp__` and powers with rational exponents (#19316). In all those cases, it is important to split into main term and renormalized remainder. The main term is then processed according to the respective method, the remainder is inserted into a converging taylor series with certain coefficients (this could be handeled by one method getting the sequence of taylor coefficients as an argument).\n \n Comment: 1\n \n```\n",
    "created_at": "2016-01-30T12:10:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19423#issuecomment-280054",
    "user": "https://github.com/dkrenn"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,5 +1,5 @@
 From #19083, comment 66, 33:
-> I think that there is shared code between `__invert__`, `__log__`, `__exp__` and powers with rational exponents. In all those cases, it is important to split into main term and renormalized remainder. The main term is then processed according to the respective method, the remainder is inserted into a converging taylor series with certain coefficients (this could be handeled by one method getting the sequence of taylor coefficients as an argument).
+> I think that there is shared code between `__invert__`, `__log__`, `__exp__` and powers with rational exponents (#19316). In all those cases, it is important to split into main term and renormalized remainder. The main term is then processed according to the respective method, the remainder is inserted into a converging taylor series with certain coefficients (this could be handeled by one method getting the sequence of taylor coefficients as an argument).
 
 Comment: 1
 
```




---

archive/issue_comments_280055.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-01-30T12:10:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19423#issuecomment-280055",
    "user": "https://github.com/dkrenn"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_280056.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-30T12:37:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19423#issuecomment-280056",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_events_053652.json:
```json
{
    "actor": "https://github.com/cheuberg",
    "created_at": "2016-01-31T12:39:35Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19423",
    "milestone": "sage-7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19423#event-53652"
}
```



---

archive/issue_comments_280057.json:
```json
{
    "body": "<a id='comment:5'></a>1. What I had in mind was more commonality between the three methods: Most of the methods deal with writing `self = max_elem * (1 + geom)`. This part could be done by a common routine. (log and inversion a slightly more comfortable with `1 - geom`, but I'd prefer to read standard taylor coefficients.\n2. `_taylor_`:\n   - I am not convinced of the name of the method. `_power_series_` ?\n   - The role of `precision` is not explained.\n   - There should be a doctest where a fixed point is reached before reaching `precision`\n3. logarithm: I think that it would be more readable to start with 0 and let the coefficients start at `k=1`.",
    "created_at": "2016-01-31T12:39:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19423#issuecomment-280057",
    "user": "https://github.com/cheuberg"
}
```

<a id='comment:5'></a>1. What I had in mind was more commonality between the three methods: Most of the methods deal with writing `self = max_elem * (1 + geom)`. This part could be done by a common routine. (log and inversion a slightly more comfortable with `1 - geom`, but I'd prefer to read standard taylor coefficients.
2. `_taylor_`:
   - I am not convinced of the name of the method. `_power_series_` ?
   - The role of `precision` is not explained.
   - There should be a doctest where a fixed point is reached before reaching `precision`
3. logarithm: I think that it would be more readable to start with 0 and let the coefficients start at `k=1`.



---

archive/issue_comments_280058.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-01-31T12:39:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19423#issuecomment-280058",
    "user": "https://github.com/cheuberg"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_280059.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-02-04T17:49:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19423#issuecomment-280059",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_280060.json:
```json
{
    "body": "<a id='comment:8'></a>Replying to [comment:5 cheuberg]:\n> 1. What I had in mind was more commonality between the three methods: Most of the methods deal with writing `self = max_elem * (1 + geom)`. This part could be done by a common routine.\n\n\ndone.\n\n>   (log and inversion a slightly more comfortable with `1 - geom`, but I'd prefer to read standard taylor coefficients.\n\n\nI used `-x` and everything is fine.\n\n> 2. `_taylor_`:\n>    - I am not convinced of the name of the method. `_power_series_` ?\n\n\ndone.\n\n>   - The role of `precision` is not explained.\n\n\nstill to do.\n\n>   - There should be a doctest where a fixed point is reached before reaching `precision`\n\n\nstill to do.\n\n> 3. logarithm: I think that it would be more readable to start with 0 and let the coefficients start at `k=1`.\n\n\nI can live with the previous implementation for efficiency reasons.",
    "created_at": "2016-02-04T17:52:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19423#issuecomment-280060",
    "user": "https://github.com/cheuberg"
}
```

<a id='comment:8'></a>Replying to [comment:5 cheuberg]:
> 1. What I had in mind was more commonality between the three methods: Most of the methods deal with writing `self = max_elem * (1 + geom)`. This part could be done by a common routine.


done.

>   (log and inversion a slightly more comfortable with `1 - geom`, but I'd prefer to read standard taylor coefficients.


I used `-x` and everything is fine.

> 2. `_taylor_`:
>    - I am not convinced of the name of the method. `_power_series_` ?


done.

>   - The role of `precision` is not explained.


still to do.

>   - There should be a doctest where a fixed point is reached before reaching `precision`


still to do.

> 3. logarithm: I think that it would be more readable to start with 0 and let the coefficients start at `k=1`.


I can live with the previous implementation for efficiency reasons.



---

archive/issue_comments_280061.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-02-05T15:53:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19423#issuecomment-280061",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_280062.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-02-05T15:54:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19423#issuecomment-280062",
    "user": "https://github.com/cheuberg"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_280063.json:
```json
{
    "body": "<a id='comment:10'></a>Replying to [comment:8 cheuberg]:\n> Replying to [comment:5 cheuberg]:\n> >   - The role of `precision` is not explained.\n\n\ndone.\n> >   - There should be a doctest where a fixed point is reached before reaching `precision`\n\n\ndone.\n\nFrom my side, that's it. Please (cross-)review my changes.",
    "created_at": "2016-02-05T15:54:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19423#issuecomment-280063",
    "user": "https://github.com/cheuberg"
}
```

<a id='comment:10'></a>Replying to [comment:8 cheuberg]:
> Replying to [comment:5 cheuberg]:
> >   - The role of `precision` is not explained.


done.
> >   - There should be a doctest where a fixed point is reached before reaching `precision`


done.

From my side, that's it. Please (cross-)review my changes.



---

archive/issue_comments_280064.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [comment:10 cheuberg]:\n> From my side, that's it. Please (cross-)review my changes.\n\n\nCross-reviewed and fine from my side, but I've put a punch of small commits on top. Please cross-review them.\n\n---\nNew commits:",
    "created_at": "2016-02-08T12:25:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19423#issuecomment-280064",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:12'></a>Replying to [comment:10 cheuberg]:
> From my side, that's it. Please (cross-)review my changes.


Cross-reviewed and fine from my side, but I've put a punch of small commits on top. Please cross-review them.

---
New commits:



---

archive/issue_comments_280065.json:
```json
{
    "body": "<a id='comment:13'></a>https://groups.google.com/d/msg/sage-devel/2aBJVdA5YoY/aOrL7ggZCgAJ",
    "created_at": "2016-02-08T13:41:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19423#issuecomment-280065",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:13'></a>https://groups.google.com/d/msg/sage-devel/2aBJVdA5YoY/aOrL7ggZCgAJ



---

archive/issue_comments_280066.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-02-08T13:41:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19423#issuecomment-280066",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_280067.json:
```json
{
    "body": "<a id='comment:14'></a>Dima, thanks for setting this to positive on my behalf.\n\nPatchbot \"findstat\" shows errors which should be in no way related to this ticket.",
    "created_at": "2016-02-09T07:03:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19423#issuecomment-280067",
    "user": "https://github.com/cheuberg"
}
```

<a id='comment:14'></a>Dima, thanks for setting this to positive on my behalf.

Patchbot "findstat" shows errors which should be in no way related to this ticket.



---

archive/issue_comments_280068.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-02-09T23:04:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19423#issuecomment-280068",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_053653.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-02-09T23:04:11Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19423",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19423#event-53653"
}
```
