# Issue 19796: Simplify build of interpreters by skipping header files

archive/issues_019559.json:
```json
{
    "body": "When upgrading GSL, there are problems with `sage/ext/interpreters` due to missing dependency checking. I could have gone for a minimal fix, but I decided to fundamentally simplify the building of interpreters, at the expense of making this branch more complicated.\n\nThose \"interpreters\" involve a lot of files (there are generated .pyx, .pxd, .c and .h files), so the dependencies are difficult for Cython to follow. With this patch, the .h files are completely gone.\n\nThis commit was cherry-picked from the positively-reviewed branch at #19756.\n\nCC:  @vbraun @kiwifb\n\nReviewer: Volker Braun\n\nAuthor: Jeroen Demeyer\n\nBranch: e4686731d4d1acb1f75b223a0e855bff1c3b8561\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/19796\n\n",
    "closed_at": "2015-12-29T17:52:09Z",
    "created_at": "2015-12-29T10:07:04Z",
    "labels": [
        "component: cython",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.0",
    "title": "Simplify build of interpreters by skipping header files",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19796",
    "user": "https://github.com/jdemeyer"
}
```
When upgrading GSL, there are problems with `sage/ext/interpreters` due to missing dependency checking. I could have gone for a minimal fix, but I decided to fundamentally simplify the building of interpreters, at the expense of making this branch more complicated.

Those "interpreters" involve a lot of files (there are generated .pyx, .pxd, .c and .h files), so the dependencies are difficult for Cython to follow. With this patch, the .h files are completely gone.

This commit was cherry-picked from the positively-reviewed branch at #19756.

CC:  @vbraun @kiwifb

Reviewer: Volker Braun

Author: Jeroen Demeyer

Branch: e4686731d4d1acb1f75b223a0e855bff1c3b8561

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/19796





---

archive/issue_comments_359622.json:
```json
{
    "body": "Changing branch from \"\" to \"u/jdemeyer/simplify_build_of_interpreters_by_skipping_header_files\"",
    "created_at": "2015-12-29T10:08:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19796#issuecomment-359622",
    "user": "https://github.com/jdemeyer"
}
```

Changing branch from "" to "u/jdemeyer/simplify_build_of_interpreters_by_skipping_header_files"



---

archive/issue_comments_359623.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-12-29T10:09:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19796#issuecomment-359623",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_359624.json:
```json
{
    "body": "Changing commit from \"\" to \"e4686731d4d1acb1f75b223a0e855bff1c3b8561\"",
    "created_at": "2015-12-29T10:09:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19796#issuecomment-359624",
    "user": "https://github.com/jdemeyer"
}
```

Changing commit from "" to "e4686731d4d1acb1f75b223a0e855bff1c3b8561"



---

archive/issue_comments_359625.json:
```json
{
    "body": "<a id='comment:2'></a>\nNew commits:\n|                                                                                                                                          |                                                         |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------|\n|[e468673](https://github.com/sagemath/sagetrac-mirror/commit/e4686731d4d1acb1f75b223a0e855bff1c3b8561)|`Simplify build of interpreters by skipping header files`|",
    "created_at": "2015-12-29T10:09:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19796#issuecomment-359625",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'></a>
New commits:
|                                                                                                                                          |                                                         |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------|
|[e468673](https://github.com/sagemath/sagetrac-mirror/commit/e4686731d4d1acb1f75b223a0e855bff1c3b8561)|`Simplify build of interpreters by skipping header files`|



---

archive/issue_comments_359626.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-12-29T10:09:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19796#issuecomment-359626",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_061619.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-12-29T17:52:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19796",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19796#event-61619"
}
```



---

archive/issue_comments_359627.json:
```json
{
    "body": "Changing branch from \"u/jdemeyer/simplify_build_of_interpreters_by_skipping_header_files\" to \"e4686731d4d1acb1f75b223a0e855bff1c3b8561\"",
    "created_at": "2015-12-29T17:52:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19796#issuecomment-359627",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/jdemeyer/simplify_build_of_interpreters_by_skipping_header_files" to "e4686731d4d1acb1f75b223a0e855bff1c3b8561"



---

archive/issue_comments_359628.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-12-29T17:52:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19796#issuecomment-359628",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_359629.json:
```json
{
    "body": "<a id='comment:5'></a>\nNot sure it is directly related to this ticket, but interpreter compilation now fails on cygwin:\n\n```\ngcc -shared -Wl,--enable-auto-image-base -L/home/Sebastien/sage22/sage/local/lib -Wl,-rpath,/home/Sebastien/sage22/sage/local/lib -L/home/Sebastien/sage22/sage/local/lib -Wl,-rpath,/home/Sebastien/sage22/sage/local/lib build/temp.cygwin-2.3.1-x86_64-2.7/home/Sebastien/sage22/sage/src/build/cythonized/sage/ext/interpreters/wrapper_el.o build/temp.cygwin-2.3.1-x86_64-2.7/sage/ext/interpreters/interp_el.o -L/home/Sebastien/sage22/sage/local/lib -L/home/Sebastien/sage22/sage/local/lib/python2.7/config -L/home/Sebastien/sage22/sage/local/lib -lpython2.7 -o build/lib.cygwin-2.3.1-x86_64-2.7/sage/ext/interpreters/wrapper_el.dll\nbuild/temp.cygwin-2.3.1-x86_64-2.7/home/Sebastien/sage22/sage/src/build/cythonized/sage/ext/interpreters/wrapper_py.o: dans la fonction \u00ab __pyx_pf_4sage_3ext_12interpreters_10wrapper_py_10Wrapper_py_4__call__ \u00bb:\n/home/Sebastien/sage22/sage/src/build/cythonized/sage/ext/interpreters/wrapper_py.c:1456: r\u00e9f\u00e9rence ind\u00e9finie vers \u00ab __imp_interp_py \u00bb\n```",
    "created_at": "2016-01-09T09:15:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19796#issuecomment-359629",
    "user": "https://trac.sagemath.org/admin/accounts/users/gouezel"
}
```

<a id='comment:5'></a>
Not sure it is directly related to this ticket, but interpreter compilation now fails on cygwin:

```
gcc -shared -Wl,--enable-auto-image-base -L/home/Sebastien/sage22/sage/local/lib -Wl,-rpath,/home/Sebastien/sage22/sage/local/lib -L/home/Sebastien/sage22/sage/local/lib -Wl,-rpath,/home/Sebastien/sage22/sage/local/lib build/temp.cygwin-2.3.1-x86_64-2.7/home/Sebastien/sage22/sage/src/build/cythonized/sage/ext/interpreters/wrapper_el.o build/temp.cygwin-2.3.1-x86_64-2.7/sage/ext/interpreters/interp_el.o -L/home/Sebastien/sage22/sage/local/lib -L/home/Sebastien/sage22/sage/local/lib/python2.7/config -L/home/Sebastien/sage22/sage/local/lib -lpython2.7 -o build/lib.cygwin-2.3.1-x86_64-2.7/sage/ext/interpreters/wrapper_el.dll
build/temp.cygwin-2.3.1-x86_64-2.7/home/Sebastien/sage22/sage/src/build/cythonized/sage/ext/interpreters/wrapper_py.o: dans la fonction « __pyx_pf_4sage_3ext_12interpreters_10wrapper_py_10Wrapper_py_4__call__ »:
/home/Sebastien/sage22/sage/src/build/cythonized/sage/ext/interpreters/wrapper_py.c:1456: référence indéfinie vers « __imp_interp_py »
```



---

archive/issue_comments_359630.json:
```json
{
    "body": "Changing commit from \"e4686731d4d1acb1f75b223a0e855bff1c3b8561\" to \"\"",
    "created_at": "2016-01-09T09:15:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19796#issuecomment-359630",
    "user": "https://trac.sagemath.org/admin/accounts/users/gouezel"
}
```

Changing commit from "e4686731d4d1acb1f75b223a0e855bff1c3b8561" to ""



---

archive/issue_comments_359631.json:
```json
{
    "body": "<a id='comment:6'></a>\nIt is very likely related to this ticket. If you want it fixed, please open a new ticket.",
    "created_at": "2016-01-11T22:11:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19796#issuecomment-359631",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'></a>
It is very likely related to this ticket. If you want it fixed, please open a new ticket.



---

archive/issue_comments_359632.json:
```json
{
    "body": "<a id='comment:7'></a>\nNew ticket at #19868",
    "created_at": "2016-01-12T08:13:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19796#issuecomment-359632",
    "user": "https://trac.sagemath.org/admin/accounts/users/gouezel"
}
```

<a id='comment:7'></a>
New ticket at #19868
