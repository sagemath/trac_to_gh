# Issue 19229: Bug in elliptic curve Galois Representation

archive/issues_018992.json:
```json
{
    "assignees": [],
    "body": "\n```\nsage: K.<a> = NumberField(x^2-x+1)\nsage: E = EllipticCurve([a+1,1,1,0,0])\nsage: C = E.isogeny_class()\n...\nValueError: 0 is not prime.\n```\nis caused by\n\n```\nsage: from sage.schemes.elliptic_curves.isogeny_class import possible_isogeny_degrees\nsage: possible_isogeny_degrees(E)                                                                      \n[0]\n```\nand in turn by\n\n```\nsage: EG = E.galois_representation()\nsage: EG.reducible_primes()\n[0]\n```\n\nAccording to the documentation for the last function it should return [0] if and only if E has CM, which is does not:\n\n```\nsage: E.has_cm()\nFalse\nsage: E.j_invariant().is_integral()\nFalse\n```\n(CM curves certainly have integral j-invariant, so you don't need to trust the is_cm() method to believe that!)\n\n\nKeywords: **Galois representations**\n\nBranch/Commit: **[8680baa](https://github.com/sagemath/sagetrac-mirror/commit/8680baa2190b4ba4c183ac1a44ce4a619e731256)**\n\nReviewer: **Fr\u00e9d\u00e9ric Chapoton**\n\nAuthor: **John Cremona**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/19229_\n\n",
    "closed_at": "2016-02-10T08:20:59Z",
    "created_at": "2015-09-17T16:06:10Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20elliptic%20curves",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Bug in elliptic curve Galois Representation",
    "type": "issue",
    "updated_at": "2016-02-10T08:20:59Z",
    "url": "https://github.com/sagemath/sage/issues/19229",
    "user": "https://github.com/JohnCremona"
}
```

```
sage: K.<a> = NumberField(x^2-x+1)
sage: E = EllipticCurve([a+1,1,1,0,0])
sage: C = E.isogeny_class()
...
ValueError: 0 is not prime.
```
is caused by

```
sage: from sage.schemes.elliptic_curves.isogeny_class import possible_isogeny_degrees
sage: possible_isogeny_degrees(E)                                                                      
[0]
```
and in turn by

```
sage: EG = E.galois_representation()
sage: EG.reducible_primes()
[0]
```

According to the documentation for the last function it should return [0] if and only if E has CM, which is does not:

```
sage: E.has_cm()
False
sage: E.j_invariant().is_integral()
False
```
(CM curves certainly have integral j-invariant, so you don't need to trust the is_cm() method to believe that!)


Keywords: **Galois representations**

Branch/Commit: **[8680baa](https://github.com/sagemath/sagetrac-mirror/commit/8680baa2190b4ba4c183ac1a44ce4a619e731256)**

Reviewer: **Frédéric Chapoton**

Author: **John Cremona**

_Issue created by migration from https://trac.sagemath.org/ticket/19229_





---

archive/issue_events_255188.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2015-09-17T16:06:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "milestone_number": null,
    "milestone_title": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19229#event-255188"
}
```



---

archive/issue_events_255189.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2015-09-17T16:06:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20elliptic%20curves",
    "label_color": "0000ff",
    "label_name": "component: elliptic curves",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19229#event-255189"
}
```



---

archive/issue_events_255190.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2015-09-17T16:06:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19229#event-255190"
}
```



---

archive/issue_events_255191.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2015-09-17T16:06:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19229#event-255191"
}
```



---

archive/issue_comments_275290.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nTracked down to {{{_semistable_reducible_primes()}} in line 801:\n\n```\nF = NumberField(y**2 - a, 'a')\n```\nwhere a is an integer, but then the code base-changes the base field to this field Q(sqrt(a)), and there is a problem since 'a' is the name of K's generator.  This causes a ValueError which is caught in the wrong place in lines 292-4:\n\n```\n        try:\n            bad_primes = _semistable_reducible_primes(E)\n        except ValueError:\n            return [0]\n```\n\nI will fix this by putting in a test for CM much earlier (which did not exist when this code was written).  Also when constructing F we can make sure that the name of iots generator is not the same as that of K.",
    "created_at": "2015-09-17T16:16:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275290",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:1'>Comment 1:</a>
Tracked down to {{{_semistable_reducible_primes()}} in line 801:

```
F = NumberField(y**2 - a, 'a')
```
where a is an integer, but then the code base-changes the base field to this field Q(sqrt(a)), and there is a problem since 'a' is the name of K's generator.  This causes a ValueError which is caught in the wrong place in lines 292-4:

```
        try:
            bad_primes = _semistable_reducible_primes(E)
        except ValueError:
            return [0]
```

I will fix this by putting in a test for CM much earlier (which did not exist when this code was written).  Also when constructing F we can make sure that the name of iots generator is not the same as that of K.



---

archive/issue_comments_275291.json:
```json
{
    "body": "Author: **John Cremona**",
    "created_at": "2015-09-18T10:28:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275291",
    "user": "https://github.com/JohnCremona"
}
```

Author: **John Cremona**



---

archive/issue_comments_275292.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,7 +2,7 @@\n ```\n sage: K.<a> = NumberField(x^2-x+1)\n sage: E = EllipticCurve([a+1,1,1,0,0])\n-sage: C = IsogenyClass_EC_NumberField(E)\n+sage: C = E.isogeny_class(E)\n ...\n ValueError: 0 is not prime.\n ```\n``````\n",
    "created_at": "2015-09-18T10:28:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275292",
    "user": "https://github.com/JohnCremona"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,7 +2,7 @@
 ```
 sage: K.<a> = NumberField(x^2-x+1)
 sage: E = EllipticCurve([a+1,1,1,0,0])
-sage: C = IsogenyClass_EC_NumberField(E)
+sage: C = E.isogeny_class(E)
 ...
 ValueError: 0 is not prime.
 ```
``````




---

archive/issue_comments_275293.json:
```json
{
    "body": "Commit: **[df3d3f7](https://github.com/sagemath/sagetrac-mirror/commit/df3d3f7c5819198be47c0f3dc8d7419066cee34c)**",
    "created_at": "2015-09-18T10:49:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275293",
    "user": "https://github.com/JohnCremona"
}
```

Commit: **[df3d3f7](https://github.com/sagemath/sagetrac-mirror/commit/df3d3f7c5819198be47c0f3dc8d7419066cee34c)**



---

archive/issue_comments_275294.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/df3d3f7c5819198be47c0f3dc8d7419066cee34c\">df3d3f7</a></td><td><code>19229: e.c. gal.reps. bug fix</code></td></tr></table>\n",
    "created_at": "2015-09-18T10:49:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275294",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:3'>Comment 3:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/df3d3f7c5819198be47c0f3dc8d7419066cee34c">df3d3f7</a></td><td><code>19229: e.c. gal.reps. bug fix</code></td></tr></table>




---

archive/issue_comments_275295.json:
```json
{
    "body": "Branch: **[u/cremona/19229](https://github.com/sagemath/sagetrac-mirror/tree/u/cremona/19229)**",
    "created_at": "2015-09-18T10:49:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275295",
    "user": "https://github.com/JohnCremona"
}
```

Branch: **[u/cremona/19229](https://github.com/sagemath/sagetrac-mirror/tree/u/cremona/19229)**



---

archive/issue_comments_275296.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nFixed as follows: on construction of the GaloisRepresentation object the CM status of the elliptic curve is assessed and cached.  This enables some cleaning of the code later where we never have to rely on the raising of exceptions to catch situations which only happen in the CM case.  This does not in itself fix the bug, we just get a different error, so the second fix is to make the variable name of a number field constructed on one function not clash.\n\nAppropriate doctests added here and in the docstring for E.isogeny_class().",
    "created_at": "2015-09-18T10:52:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275296",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:4'>Comment 4:</a>
Fixed as follows: on construction of the GaloisRepresentation object the CM status of the elliptic curve is assessed and cached.  This enables some cleaning of the code later where we never have to rely on the raising of exceptions to catch situations which only happen in the CM case.  This does not in itself fix the bug, we just get a different error, so the second fix is to make the variable name of a number field constructed on one function not clash.

Appropriate doctests added here and in the docstring for E.isogeny_class().



---

archive/issue_events_255192.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2015-09-18T10:52:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19229#event-255192"
}
```



---

archive/issue_comments_275297.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,7 +2,7 @@\n ```\n sage: K.<a> = NumberField(x^2-x+1)\n sage: E = EllipticCurve([a+1,1,1,0,0])\n-sage: C = E.isogeny_class(E)\n+sage: C = E.isogeny_class()\n ...\n ValueError: 0 is not prime.\n ```\n``````\n",
    "created_at": "2015-09-18T10:53:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275297",
    "user": "https://github.com/JohnCremona"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,7 +2,7 @@
 ```
 sage: K.<a> = NumberField(x^2-x+1)
 sage: E = EllipticCurve([a+1,1,1,0,0])
-sage: C = E.isogeny_class(E)
+sage: C = E.isogeny_class()
 ...
 ValueError: 0 is not prime.
 ```
``````




---

archive/issue_comments_275298.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nAnyone out there?",
    "created_at": "2015-12-08T17:51:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275298",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:6'>Comment 6:</a>
Anyone out there?



---

archive/issue_comments_275299.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nWhat's the point of this \"poor man's caching\", why not use `cached_method`?\n\n```diff\n+        self._has_cm = E.has_cm()\n+        self._has_rational_cm = E.has_rational_cm()\n```\n\nThere seems to be an indentation problem with\n\n```diff\n+ # ramified primes\n```\n\nFunny spacing:\n\n```diff\n+ if E .has_bad_reduction(P):\n```",
    "created_at": "2015-12-08T20:37:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275299",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'>Comment 7:</a>
What's the point of this "poor man's caching", why not use `cached_method`?

```diff
+        self._has_cm = E.has_cm()
+        self._has_rational_cm = E.has_rational_cm()
```

There seems to be an indentation problem with

```diff
+ # ramified primes
```

Funny spacing:

```diff
+ if E .has_bad_reduction(P):
```



---

archive/issue_comments_275300.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nReplying to [@jdemeyer](#comment%3A7):\n> What's the point of this \"poor man's caching\", why not use `cached_method`?\n> \n> ```diff\n> +        self._has_cm = E.has_cm()\n> +        self._has_rational_cm = E.has_rational_cm()\n> ```\n\nNo reason, but that is how it was, and this is a bug fix.\n\n> \n> There seems to be an indentation problem with\n> \n> ```diff\n> + # ramified primes\n> ```\n> \n> Funny spacing:\n> \n> ```diff\n> + if E .has_bad_reduction(P):\n> ```\n\n\nI will look at those.",
    "created_at": "2015-12-09T09:11:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275300",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:8'>Comment 8:</a>
Replying to [@jdemeyer](#comment%3A7):
> What's the point of this "poor man's caching", why not use `cached_method`?
> 
> ```diff
> +        self._has_cm = E.has_cm()
> +        self._has_rational_cm = E.has_rational_cm()
> ```

No reason, but that is how it was, and this is a bug fix.

> 
> There seems to be an indentation problem with
> 
> ```diff
> + # ramified primes
> ```
> 
> Funny spacing:
> 
> ```diff
> + if E .has_bad_reduction(P):
> ```


I will look at those.



---

archive/issue_comments_275301.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/83f8108d06a97bedf136b1ae4a0c6c9fcd0a7236\">83f8108</a></td><td><code>Merge branch 'u/cremona/19229' of trac.sagemath.org:sage into 19229</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cbd7a97697c15edab51f836b2fd0f6e48d329bc6\">cbd7a97</a></td><td><code>#19229: fixes after review</code></td></tr></table>\n",
    "created_at": "2015-12-09T10:17:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275301",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:9'>Comment 9:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/83f8108d06a97bedf136b1ae4a0c6c9fcd0a7236">83f8108</a></td><td><code>Merge branch 'u/cremona/19229' of trac.sagemath.org:sage into 19229</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cbd7a97697c15edab51f836b2fd0f6e48d329bc6">cbd7a97</a></td><td><code>#19229: fixes after review</code></td></tr></table>




---

archive/issue_comments_275302.json:
```json
{
    "body": "Changed commit from **[df3d3f7](https://github.com/sagemath/sagetrac-mirror/commit/df3d3f7c5819198be47c0f3dc8d7419066cee34c)** to **[cbd7a97](https://github.com/sagemath/sagetrac-mirror/commit/cbd7a97697c15edab51f836b2fd0f6e48d329bc6)**",
    "created_at": "2015-12-09T10:17:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275302",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[df3d3f7](https://github.com/sagemath/sagetrac-mirror/commit/df3d3f7c5819198be47c0f3dc8d7419066cee34c)** to **[cbd7a97](https://github.com/sagemath/sagetrac-mirror/commit/cbd7a97697c15edab51f836b2fd0f6e48d329bc6)**



---

archive/issue_comments_275303.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nI merged with current beta, fixed the two spacing issues, made 3 methods into cached_methods as suggested.  I also tidied up imports in ell_number_field.\n\nPlease re-review!",
    "created_at": "2015-12-09T10:19:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275303",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:10'>Comment 10:</a>
I merged with current beta, fixed the two spacing issues, made 3 methods into cached_methods as suggested.  I also tidied up imports in ell_number_field.

Please re-review!



---

archive/issue_comments_275304.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nDid you do something while committing? I see you added files `src/sage/schemes/hyperelliptic_curves/hypellfrob.cpp` and `src/sage/schemes/toric/divisor_class.c`\n\nI recommend to fix this using `--amend` to make sure these added files don't appear in the git history at all.",
    "created_at": "2015-12-09T15:03:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275304",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:11'>Comment 11:</a>
Did you do something while committing? I see you added files `src/sage/schemes/hyperelliptic_curves/hypellfrob.cpp` and `src/sage/schemes/toric/divisor_class.c`

I recommend to fix this using `--amend` to make sure these added files don't appear in the git history at all.



---

archive/issue_events_255193.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-12-09T15:03:24Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "milestone_number": null,
    "milestone_title": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19229#event-255193"
}
```



---

archive/issue_events_255194.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-12-09T15:03:24Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "milestone_number": null,
    "milestone_title": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19229#event-255194"
}
```



---

archive/issue_events_255195.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-12-09T15:03:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19229#event-255195"
}
```



---

archive/issue_events_255196.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-12-09T15:03:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19229#event-255196"
}
```



---

archive/issue_comments_275305.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nThat was a mistake.  git is showing up hundreds of .c, .cpp, .h files which makes \"git status\" hard to read and I added some files by mistake *but then thought that I had removed them again*.  What a pain.  I'll fix it.",
    "created_at": "2015-12-09T15:39:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275305",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:12'>Comment 12:</a>
That was a mistake.  git is showing up hundreds of .c, .cpp, .h files which makes "git status" hard to read and I added some files by mistake *but then thought that I had removed them again*.  What a pain.  I'll fix it.



---

archive/issue_comments_275306.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nReplying to [@JohnCremona](#comment%3A12):\n> git is showing up hundreds of .c, .cpp, .h files which makes \"git status\" hard to read\n\nThis isn't supposed to be like that. Do yourself a favour and remove those files.",
    "created_at": "2015-12-09T15:47:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275306",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'>Comment 13:</a>
Replying to [@JohnCremona](#comment%3A12):
> git is showing up hundreds of .c, .cpp, .h files which makes "git status" hard to read

This isn't supposed to be like that. Do yourself a favour and remove those files.



---

archive/issue_comments_275307.json:
```json
{
    "body": "Changed commit from **[cbd7a97](https://github.com/sagemath/sagetrac-mirror/commit/cbd7a97697c15edab51f836b2fd0f6e48d329bc6)** to **[62accc0](https://github.com/sagemath/sagetrac-mirror/commit/62accc077ff28e2306364abaa60199846e292fdd)**",
    "created_at": "2015-12-09T15:49:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275307",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[cbd7a97](https://github.com/sagemath/sagetrac-mirror/commit/cbd7a97697c15edab51f836b2fd0f6e48d329bc6)** to **[62accc0](https://github.com/sagemath/sagetrac-mirror/commit/62accc077ff28e2306364abaa60199846e292fdd)**



---

archive/issue_comments_275308.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/62accc077ff28e2306364abaa60199846e292fdd\">62accc0</a></td><td><code>19229: fixes after review</code></td></tr></table>\n",
    "created_at": "2015-12-09T15:49:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275308",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:14'>Comment 14:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/62accc077ff28e2306364abaa60199846e292fdd">62accc0</a></td><td><code>19229: fixes after review</code></td></tr></table>




---

archive/issue_events_255197.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2015-12-09T15:51:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19229#event-255197"
}
```



---

archive/issue_events_255198.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2015-12-09T15:51:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19229#event-255198"
}
```



---

archive/issue_comments_275309.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nReplying to [@jdemeyer](#comment%3A13):\n> Replying to [@JohnCremona](#comment%3A12):\n> > git is showing up hundreds of .c, .cpp, .h files which makes \"git status\" hard to read\n\n> \n> This isn't supposed to be like that. Do yourself a favour and remove those files.\n\nAny idea how they got there?  None have anything to do with anything I have done.  I presume a simple rm (not git) will suffice?\n\nI fixed the commit...",
    "created_at": "2015-12-09T15:51:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275309",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:15'>Comment 15:</a>
Replying to [@jdemeyer](#comment%3A13):
> Replying to [@JohnCremona](#comment%3A12):
> > git is showing up hundreds of .c, .cpp, .h files which makes "git status" hard to read

> 
> This isn't supposed to be like that. Do yourself a favour and remove those files.

Any idea how they got there?  None have anything to do with anything I have done.  I presume a simple rm (not git) will suffice?

I fixed the commit...



---

archive/issue_comments_275310.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nReplying to [@JohnCremona](#comment%3A15):\n> Any idea how they got there?\n\nWell, they are quite old. Note the header:\n\n```\n/* Generated by Cython 0.20.1 on Fri May 2 15:58:45 2014 */\n```\n\nI guess you don't remember what you were doing with your Sage installation that day.\n\nI wouldn't think about it too much. Just delete those files.",
    "created_at": "2015-12-09T16:05:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275310",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:16'>Comment 16:</a>
Replying to [@JohnCremona](#comment%3A15):
> Any idea how they got there?

Well, they are quite old. Note the header:

```
/* Generated by Cython 0.20.1 on Fri May 2 15:58:45 2014 */
```

I guess you don't remember what you were doing with your Sage installation that day.

I wouldn't think about it too much. Just delete those files.



---

archive/issue_events_255199.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-12-12T19:38:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19229#event-255199"
}
```



---

archive/issue_events_255200.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-12-12T19:38:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19229#event-255200"
}
```



---

archive/issue_comments_275311.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nObvious question: what is the performance impact of the earlier CM checks? It seems that the old code was careful to postpone CM checks.\n\nAll the methods where you added a check for CM should have a doctest for the case when there is no CM. Many don't have such a doctest.\n\nLike I said before, this should be replaced by real caching (you implemented the caching, but forgot to remove this part):\n\n```diff\n+        self._has_cm = E.has_cm()\n+        self._has_rational_cm = E.has_rational_cm()\n```\n\nI think this comment is not very clear:\n\n```diff\n+        # See #19229: can cause problems if this name is 'a' but it has to be something!\n+        F = NumberField(y**2 - a, 'grnf_a')\n```",
    "created_at": "2015-12-12T19:38:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275311",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'>Comment 17:</a>
Obvious question: what is the performance impact of the earlier CM checks? It seems that the old code was careful to postpone CM checks.

All the methods where you added a check for CM should have a doctest for the case when there is no CM. Many don't have such a doctest.

Like I said before, this should be replaced by real caching (you implemented the caching, but forgot to remove this part):

```diff
+        self._has_cm = E.has_cm()
+        self._has_rational_cm = E.has_rational_cm()
```

I think this comment is not very clear:

```diff
+        # See #19229: can cause problems if this name is 'a' but it has to be something!
+        F = NumberField(y**2 - a, 'grnf_a')
```



---

archive/issue_comments_275312.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nJust a question (not something to do for this ticket): did you ever consider computing the CM discriminant using the period lattice? If you have a sufficiently good (I guess this is the hard part) approximation to \u03c4, you can compute its minimal polynomial A \u03c4<sup>2</sup> + B \u03c4 + C and from that the discriminant.",
    "created_at": "2015-12-13T11:06:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275312",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:18'>Comment 18:</a>
Just a question (not something to do for this ticket): did you ever consider computing the CM discriminant using the period lattice? If you have a sufficiently good (I guess this is the hard part) approximation to τ, you can compute its minimal polynomial A τ<sup>2</sup> + B τ + C and from that the discriminant.



---

archive/issue_comments_275313.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nIn `src/sage/schemes/elliptic_curves/ell_number_field.py`, there are two lines\n\n```\n         \"\"\"\n```\nindented by **9** spaced instead of 8.",
    "created_at": "2015-12-13T12:00:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275313",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:19'>Comment 19:</a>
In `src/sage/schemes/elliptic_curves/ell_number_field.py`, there are two lines

```
         """
```
indented by **9** spaced instead of 8.



---

archive/issue_comments_275314.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nReplying to [@jdemeyer](#comment%3A17):\n> Obvious question: what is the performance impact of the earlier CM checks? It seems that the old code was careful to postpone CM checks.\n\nGood question.  When the code was first written there was no CM check available, so the presence of CM was detected indirectly; not that for CM curves the output will always be trivial.  So I thought it simpler to put the CM check in early.  On the other hand, whil it is often easy to see that a curve does *not* have CM (e.g. if j is not an algebraic integer), proving that it does have CM is harder.  So perhaps it was better to discover the presence of CM the old way.  I will investigate that.\n\n> \n> All the methods where you added a check for CM should have a doctest for the case when there is no CM. Many don't have such a doctest.\n\nOK.\n\n> \n> Like I said before, this should be replaced by real caching (you implemented the caching, but forgot to remove this part):\n> \n> ```diff\n> +        self._has_cm = E.has_cm()\n> +        self._has_rational_cm = E.has_rational_cm()\n> ```\n\nTo be fixed.\n\n> \n> I think this comment is not very clear:\n> \n> ```diff\n> +        # See #19229: can cause problems if this name is 'a' but it has to be something!\n> +        F = NumberField(y**2 - a, 'grnf_a')\n> ```\n\nI'll explain here and also make the comment clearer.  The original bug was only triggered when the base field already had 'a' as the name for its generator.  Here we need to construct a number field and so we need a name which must not be a name used before in a similar context.  So I cam up with such a name (I think grnfstands for \"Galois Rep Number Field\").",
    "created_at": "2015-12-14T20:13:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275314",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:20'>Comment 20:</a>
Replying to [@jdemeyer](#comment%3A17):
> Obvious question: what is the performance impact of the earlier CM checks? It seems that the old code was careful to postpone CM checks.

Good question.  When the code was first written there was no CM check available, so the presence of CM was detected indirectly; not that for CM curves the output will always be trivial.  So I thought it simpler to put the CM check in early.  On the other hand, whil it is often easy to see that a curve does *not* have CM (e.g. if j is not an algebraic integer), proving that it does have CM is harder.  So perhaps it was better to discover the presence of CM the old way.  I will investigate that.

> 
> All the methods where you added a check for CM should have a doctest for the case when there is no CM. Many don't have such a doctest.

OK.

> 
> Like I said before, this should be replaced by real caching (you implemented the caching, but forgot to remove this part):
> 
> ```diff
> +        self._has_cm = E.has_cm()
> +        self._has_rational_cm = E.has_rational_cm()
> ```

To be fixed.

> 
> I think this comment is not very clear:
> 
> ```diff
> +        # See #19229: can cause problems if this name is 'a' but it has to be something!
> +        F = NumberField(y**2 - a, 'grnf_a')
> ```

I'll explain here and also make the comment clearer.  The original bug was only triggered when the base field already had 'a' as the name for its generator.  Here we need to construct a number field and so we need a name which must not be a name used before in a similar context.  So I cam up with such a name (I think grnfstands for "Galois Rep Number Field").



---

archive/issue_comments_275315.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nReplying to [@jdemeyer](#comment%3A18):\n> Just a question (not something to do for this ticket): did you ever consider computing the CM discriminant using the period lattice? If you have a sufficiently good (I guess this is the hard part) approximation to \u03c4, you can compute its minimal polynomial A \u03c4<sup>2</sup> + B \u03c4 + C and from that the discriminant.\n\nInteresting idea.  Note that the existing code involves computing Hilbert Class Polynomials which does something similar.  We can get tau to high precision easily since there is such a fast convergence for the periods.  But some care would be needed to make this rigorous.\n\nImproving the detection of CM would certainly be useful.",
    "created_at": "2015-12-14T20:16:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275315",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:21'>Comment 21:</a>
Replying to [@jdemeyer](#comment%3A18):
> Just a question (not something to do for this ticket): did you ever consider computing the CM discriminant using the period lattice? If you have a sufficiently good (I guess this is the hard part) approximation to τ, you can compute its minimal polynomial A τ<sup>2</sup> + B τ + C and from that the discriminant.

Interesting idea.  Note that the existing code involves computing Hilbert Class Polynomials which does something similar.  We can get tau to high precision easily since there is such a fast convergence for the periods.  But some care would be needed to make this rigorous.

Improving the detection of CM would certainly be useful.



---

archive/issue_comments_275316.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nThe new commit addresses the caching issue and the testing of the CM special cases.  I also improved CM detection simply by caching the relevant functions.  Testing whether one algebraic integer j of degree h is CM involves computing the quadratic orders of class number h: this is now cached so only done once for each h;  and then computing the Hilbert class polynomials for each of these: now also cached, so as soon as a non-CM j of degree h is tested then testing any others of the same degree is no harder than checking whether its absolute minimal polynomial is in a cached list.\n\nPushing the new commit once tests have completed.",
    "created_at": "2015-12-29T17:59:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275316",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:22'>Comment 22:</a>
The new commit addresses the caching issue and the testing of the CM special cases.  I also improved CM detection simply by caching the relevant functions.  Testing whether one algebraic integer j of degree h is CM involves computing the quadratic orders of class number h: this is now cached so only done once for each h;  and then computing the Hilbert class polynomials for each of these: now also cached, so as soon as a non-CM j of degree h is tested then testing any others of the same degree is no harder than checking whether its absolute minimal polynomial is in a cached list.

Pushing the new commit once tests have completed.



---

archive/issue_comments_275317.json:
```json
{
    "body": "Changed commit from **[62accc0](https://github.com/sagemath/sagetrac-mirror/commit/62accc077ff28e2306364abaa60199846e292fdd)** to **[e640e42](https://github.com/sagemath/sagetrac-mirror/commit/e640e422ac1d54987a281130630d36a6a712c500)**",
    "created_at": "2015-12-29T18:01:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275317",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[62accc0](https://github.com/sagemath/sagetrac-mirror/commit/62accc077ff28e2306364abaa60199846e292fdd)** to **[e640e42](https://github.com/sagemath/sagetrac-mirror/commit/e640e422ac1d54987a281130630d36a6a712c500)**



---

archive/issue_comments_275318.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/521dac61294b1bca6bd7fecff4c5306f3527b82b\">521dac6</a></td><td><code>19229: e.c. gal.reps. bug fix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fffbfed6cf36421e17db7878b5f487960cea004c\">fffbfed</a></td><td><code>19229: fixes after review</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e640e422ac1d54987a281130630d36a6a712c500\">e640e42</a></td><td><code>#19229: more improvements after review</code></td></tr></table>\n",
    "created_at": "2015-12-29T18:01:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275318",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:23'>Comment 23:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/521dac61294b1bca6bd7fecff4c5306f3527b82b">521dac6</a></td><td><code>19229: e.c. gal.reps. bug fix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fffbfed6cf36421e17db7878b5f487960cea004c">fffbfed</a></td><td><code>19229: fixes after review</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e640e422ac1d54987a281130630d36a6a712c500">e640e42</a></td><td><code>#19229: more improvements after review</code></td></tr></table>




---

archive/issue_events_255201.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2016-01-04T14:21:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19229#event-255201"
}
```



---

archive/issue_events_255202.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2016-01-04T14:21:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19229#event-255202"
}
```



---

archive/issue_events_255203.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-02-03T07:44:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19229#event-255203"
}
```



---

archive/issue_events_255204.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-02-03T07:44:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19229#event-255204"
}
```



---

archive/issue_comments_275319.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\ndoes no longer apply.",
    "created_at": "2016-02-03T07:44:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275319",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:25'>Comment 25:</a>
does no longer apply.



---

archive/issue_comments_275320.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nDammit, I thought this was merged ages ago.  So I'll fix it -- I am using it every day!",
    "created_at": "2016-02-03T08:35:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275320",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:26'>Comment 26:</a>
Dammit, I thought this was merged ages ago.  So I'll fix it -- I am using it every day!



---

archive/issue_comments_275321.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3ce177a794d2d4555831225a1c9629404f4ce91e\">3ce177a</a></td><td><code>Merge branch 'develop' into 19229</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/de3fdf1f0a502f5f9aaa75c835be91573d1cbe6a\">de3fdf1</a></td><td><code>minor changes to imports in one file</code></td></tr></table>\n",
    "created_at": "2016-02-04T14:40:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275321",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:27'>Comment 27:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3ce177a794d2d4555831225a1c9629404f4ce91e">3ce177a</a></td><td><code>Merge branch 'develop' into 19229</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/de3fdf1f0a502f5f9aaa75c835be91573d1cbe6a">de3fdf1</a></td><td><code>minor changes to imports in one file</code></td></tr></table>




---

archive/issue_comments_275322.json:
```json
{
    "body": "Changed commit from **[e640e42](https://github.com/sagemath/sagetrac-mirror/commit/e640e422ac1d54987a281130630d36a6a712c500)** to **[de3fdf1](https://github.com/sagemath/sagetrac-mirror/commit/de3fdf1f0a502f5f9aaa75c835be91573d1cbe6a)**",
    "created_at": "2016-02-04T14:40:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275322",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e640e42](https://github.com/sagemath/sagetrac-mirror/commit/e640e422ac1d54987a281130630d36a6a712c500)** to **[de3fdf1](https://github.com/sagemath/sagetrac-mirror/commit/de3fdf1f0a502f5f9aaa75c835be91573d1cbe6a)**



---

archive/issue_comments_275323.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nOK, I merged into 7.0.beta1 and make some import adjustments so it now works.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3ce177a794d2d4555831225a1c9629404f4ce91e\">3ce177a</a></td><td><code>Merge branch 'develop' into 19229</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/de3fdf1f0a502f5f9aaa75c835be91573d1cbe6a\">de3fdf1</a></td><td><code>minor changes to imports in one file</code></td></tr></table>\n",
    "created_at": "2016-02-04T14:41:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275323",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:28'>Comment 28:</a>
OK, I merged into 7.0.beta1 and make some import adjustments so it now works.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3ce177a794d2d4555831225a1c9629404f4ce91e">3ce177a</a></td><td><code>Merge branch 'develop' into 19229</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/de3fdf1f0a502f5f9aaa75c835be91573d1cbe6a">de3fdf1</a></td><td><code>minor changes to imports in one file</code></td></tr></table>




---

archive/issue_events_255205.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2016-02-04T14:41:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19229#event-255205"
}
```



---

archive/issue_events_255206.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2016-02-04T14:41:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19229#event-255206"
}
```



---

archive/issue_comments_275324.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\ntwo failing doctests !",
    "created_at": "2016-02-04T16:55:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275324",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:29'>Comment 29:</a>
two failing doctests !



---

archive/issue_comments_275325.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\nI can guess which ones wince I noticed that there are two which sometoimes do work and sometimes do not.  Since you do not tell me, I guess that these are the 2 6x6 matrices for the CM isogeny class example with class number 6.\n\nIn my defence, I can assure you that on my machine the tests *did* pass before I uploaded the branch....",
    "created_at": "2016-02-04T17:14:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275325",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:30'>Comment 30:</a>
I can guess which ones wince I noticed that there are two which sometoimes do work and sometimes do not.  Since you do not tell me, I guess that these are the 2 6x6 matrices for the CM isogeny class example with class number 6.

In my defence, I can assure you that on my machine the tests *did* pass before I uploaded the branch....



---

archive/issue_comments_275326.json:
```json
{
    "body": "<a id='comment:31'>Comment 31:</a>\nTo know the failing doctest, you have to click on the patchbot icon (currently yellow with a question mark) at the top right of this page. \n\nThen click on the \"shortlog\" link of the next-to-last report by \"poseidon\" patchbot.\n\nThis is indeed a 6*6 matrix of numbers and a 6*6 matrix of lists.",
    "created_at": "2016-02-04T19:01:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275326",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:31'>Comment 31:</a>
To know the failing doctest, you have to click on the patchbot icon (currently yellow with a question mark) at the top right of this page. 

Then click on the "shortlog" link of the next-to-last report by "poseidon" patchbot.

This is indeed a 6*6 matrix of numbers and a 6*6 matrix of lists.



---

archive/issue_comments_275327.json:
```json
{
    "body": "<a id='comment:32'>Comment 32:</a>\nYes that is the thing I was expecting.  Note that there is another bot on which the test passes.  It's something nondeterministic in how I sort the curves in an isogeny class.",
    "created_at": "2016-02-04T19:15:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275327",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:32'>Comment 32:</a>
Yes that is the thing I was expecting.  Note that there is another bot on which the test passes.  It's something nondeterministic in how I sort the curves in an isogeny class.



---

archive/issue_comments_275328.json:
```json
{
    "body": "<a id='comment:33'>Comment 33:</a>\nBy the, this (sometimes) failing doctest has nothing whatsoever to do with the changes on this ticket, but there is some randomness creeping into the sorting of curves.",
    "created_at": "2016-02-04T20:31:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275328",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:33'>Comment 33:</a>
By the, this (sometimes) failing doctest has nothing whatsoever to do with the changes on this ticket, but there is some randomness creeping into the sorting of curves.



---

archive/issue_comments_275329.json:
```json
{
    "body": "<a id='comment:34'>Comment 34:</a>\nI have found a typo (several times):\n\n```\ninfintely many primes\n```\nOtherwise looks good to me (but I am no expert)",
    "created_at": "2016-02-04T20:56:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275329",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:34'>Comment 34:</a>
I have found a typo (several times):

```
infintely many primes
```
Otherwise looks good to me (but I am no expert)



---

archive/issue_events_255207.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-02-04T20:56:44Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "milestone_number": null,
    "milestone_title": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19229#event-255207"
}
```



---

archive/issue_events_255208.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-02-04T20:56:44Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "milestone_number": null,
    "milestone_title": "sage-7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19229#event-255208"
}
```



---

archive/issue_comments_275330.json:
```json
{
    "body": "<a id='comment:36'>Comment 36:</a>\nWould people be bothered if I marked the two strange doctests as \"random\" for the time being?  Otherwise this sorting issue is delaying the merging of a genuine bug-fix.  I have a strong personal incentive to get the sorting issue dealt with, but that should not be on this ticket anyway.\n\nI plan to update the branch accordingly.",
    "created_at": "2016-02-09T14:55:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275330",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:36'>Comment 36:</a>
Would people be bothered if I marked the two strange doctests as "random" for the time being?  Otherwise this sorting issue is delaying the merging of a genuine bug-fix.  I have a strong personal incentive to get the sorting issue dealt with, but that should not be on this ticket anyway.

I plan to update the branch accordingly.



---

archive/issue_comments_275331.json:
```json
{
    "body": "<a id='comment:37'>Comment 37:</a>\nReplying to [@JohnCremona](#comment%3A36):\n> Would people be bothered if I marked the two strange doctests as \"random\" for the time being?\n\nWith proper documentation and a reference to the discussion, no problem.",
    "created_at": "2016-02-09T14:57:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275331",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:37'>Comment 37:</a>
Replying to [@JohnCremona](#comment%3A36):
> Would people be bothered if I marked the two strange doctests as "random" for the time being?

With proper documentation and a reference to the discussion, no problem.



---

archive/issue_comments_275332.json:
```json
{
    "body": "<a id='comment:38'>Comment 38:</a>\nReplying to [@jdemeyer](#comment%3A37):\n> Replying to [@JohnCremona](#comment%3A36):\n> > Would people be bothered if I marked the two strange doctests as \"random\" for the time being?\n\n> \n> With proper documentation and a reference to the discussion, no problem.\n\nOK, I'll see if I can meet your high standards or \"proper\"!\n\nI corrected all occurrences of \"infintely\" also (2 here, but a few a other places).",
    "created_at": "2016-02-09T16:41:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275332",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:38'>Comment 38:</a>
Replying to [@jdemeyer](#comment%3A37):
> Replying to [@JohnCremona](#comment%3A36):
> > Would people be bothered if I marked the two strange doctests as "random" for the time being?

> 
> With proper documentation and a reference to the discussion, no problem.

OK, I'll see if I can meet your high standards or "proper"!

I corrected all occurrences of "infintely" also (2 here, but a few a other places).



---

archive/issue_comments_275333.json:
```json
{
    "body": "<a id='comment:39'>Comment 39:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/226821f4bc9af41bb444cae0ef348e61ba813481\">226821f</a></td><td><code>corrected typo infinite(ly) in a few places</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8680baa2190b4ba4c183ac1a44ce4a619e731256\">8680baa</a></td><td><code>made two doctests random pending #20028</code></td></tr></table>\n",
    "created_at": "2016-02-09T16:49:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275333",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:39'>Comment 39:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/226821f4bc9af41bb444cae0ef348e61ba813481">226821f</a></td><td><code>corrected typo infinite(ly) in a few places</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8680baa2190b4ba4c183ac1a44ce4a619e731256">8680baa</a></td><td><code>made two doctests random pending #20028</code></td></tr></table>




---

archive/issue_comments_275334.json:
```json
{
    "body": "Changed commit from **[de3fdf1](https://github.com/sagemath/sagetrac-mirror/commit/de3fdf1f0a502f5f9aaa75c835be91573d1cbe6a)** to **[8680baa](https://github.com/sagemath/sagetrac-mirror/commit/8680baa2190b4ba4c183ac1a44ce4a619e731256)**",
    "created_at": "2016-02-09T16:49:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275334",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[de3fdf1](https://github.com/sagemath/sagetrac-mirror/commit/de3fdf1f0a502f5f9aaa75c835be91573d1cbe6a)** to **[8680baa](https://github.com/sagemath/sagetrac-mirror/commit/8680baa2190b4ba4c183ac1a44ce4a619e731256)**



---

archive/issue_comments_275335.json:
```json
{
    "body": "<a id='comment:40'>Comment 40:</a>\nI opened a new ticket #20028 for the issue of sorting number field elements.  Th ebranch now marks thoe tests as #random and refers to the discussion on this ticket.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/226821f4bc9af41bb444cae0ef348e61ba813481\">226821f</a></td><td><code>corrected typo infinite(ly) in a few places</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8680baa2190b4ba4c183ac1a44ce4a619e731256\">8680baa</a></td><td><code>made two doctests random pending #20028</code></td></tr></table>\n",
    "created_at": "2016-02-09T16:50:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275335",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:40'>Comment 40:</a>
I opened a new ticket #20028 for the issue of sorting number field elements.  Th ebranch now marks thoe tests as #random and refers to the discussion on this ticket.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/226821f4bc9af41bb444cae0ef348e61ba813481">226821f</a></td><td><code>corrected typo infinite(ly) in a few places</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8680baa2190b4ba4c183ac1a44ce4a619e731256">8680baa</a></td><td><code>made two doctests random pending #20028</code></td></tr></table>




---

archive/issue_comments_275336.json:
```json
{
    "body": "Reviewer: **Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2016-02-09T21:01:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275336",
    "user": "https://github.com/fchapoton"
}
```

Reviewer: **Frédéric Chapoton**



---

archive/issue_events_255209.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-02-09T21:01:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19229#event-255209"
}
```



---

archive/issue_events_255210.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-02-09T21:01:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19229#event-255210"
}
```



---

archive/issue_comments_275337.json:
```json
{
    "body": "<a id='comment:41'>Comment 41:</a>\nok, good enough for me",
    "created_at": "2016-02-09T21:01:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275337",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:41'>Comment 41:</a>
ok, good enough for me



---

archive/issue_comments_275338.json:
```json
{
    "body": "Changed branch from **[u/cremona/19229](https://github.com/sagemath/sagetrac-mirror/tree/u/cremona/19229)** to **[8680baa](https://github.com/sagemath/sagetrac-mirror/commit/8680baa2190b4ba4c183ac1a44ce4a619e731256)**",
    "created_at": "2016-02-10T08:20:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19229#issuecomment-275338",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/cremona/19229](https://github.com/sagemath/sagetrac-mirror/tree/u/cremona/19229)** to **[8680baa](https://github.com/sagemath/sagetrac-mirror/commit/8680baa2190b4ba4c183ac1a44ce4a619e731256)**



---

archive/issue_events_255211.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-02-10T08:20:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19229#event-255211"
}
```



---

archive/issue_events_255212.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "53130384c2b7c7f884ed9632cfa58d9f06000d63",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-02-10T08:20:59Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/19229",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19229#event-255212"
}
```
