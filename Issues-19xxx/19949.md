# Issue 19949: composition of symbolic subring functors

archive/issues_019712.json:
```json
{
    "body": "This ticket is a follow-up to #19259:\n\nCurrently, subrings of symbolic subrings cannot be created. This can be changed by implementing a composition of the subring functor and letting the respective factory just call the \"correct\" functor.\n\nCC:  @dkrenn @tscrim\n\nBranch: [u/mkoeppe/symbolics/subring-functor](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/symbolics/subring-functor)\n\nCommit: [b35e0f0f5dee3fba44796137bcfbe0dd7def6c45](https://github.com/sagemath/sagetrac-mirror/commit/b35e0f0f5dee3fba44796137bcfbe0dd7def6c45)\n\nAuthor: Benjamin Hackl\n\nStatus: new\n\nIssue created by migration from https://trac.sagemath.org/ticket/19949\n\n",
    "created_at": "2016-01-23T17:52:36Z",
    "labels": [
        "component: symbolics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "composition of symbolic subring functors",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19949",
    "user": "https://github.com/behackl"
}
```
This ticket is a follow-up to #19259:

Currently, subrings of symbolic subrings cannot be created. This can be changed by implementing a composition of the subring functor and letting the respective factory just call the "correct" functor.

CC:  @dkrenn @tscrim

Branch: [u/mkoeppe/symbolics/subring-functor](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/symbolics/subring-functor)

Commit: [b35e0f0f5dee3fba44796137bcfbe0dd7def6c45](https://github.com/sagemath/sagetrac-mirror/commit/b35e0f0f5dee3fba44796137bcfbe0dd7def6c45)

Author: Benjamin Hackl

Status: new

Issue created by migration from https://trac.sagemath.org/ticket/19949





---

archive/issue_comments_363008.json:
```json
{
    "body": "Branch: [u/behackl/symbolics/subring-functor](https://github.com/sagemath/sagetrac-mirror/tree/u/behackl/symbolics/subring-functor)",
    "created_at": "2016-01-24T00:22:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19949#issuecomment-363008",
    "user": "https://github.com/behackl"
}
```

Branch: [u/behackl/symbolics/subring-functor](https://github.com/sagemath/sagetrac-mirror/tree/u/behackl/symbolics/subring-functor)



---

archive/issue_comments_363009.json:
```json
{
    "body": "Commit: [ad9aa8c21d4ce0e39b1ac6ce9c81e9a604ceb953](https://github.com/sagemath/sagetrac-mirror/commit/ad9aa8c21d4ce0e39b1ac6ce9c81e9a604ceb953)",
    "created_at": "2016-01-24T00:22:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19949#issuecomment-363009",
    "user": "https://github.com/behackl"
}
```

Commit: [ad9aa8c21d4ce0e39b1ac6ce9c81e9a604ceb953](https://github.com/sagemath/sagetrac-mirror/commit/ad9aa8c21d4ce0e39b1ac6ce9c81e9a604ceb953)



---

archive/issue_comments_363010.json:
```json
{
    "body": "<a id='comment:2'></a>\nLast 10 new commits:\n|                                                                                                                                          |                                         |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|\n|[05dc834](https://github.com/sagemath/sagetrac-mirror/commit/05dc8345c3cc09a083bd588366793149daa1d6ab)|`misc. changes, indentation, line breaks`|\n|[8cc884a](https://github.com/sagemath/sagetrac-mirror/commit/8cc884a527e7d72fe125509c8f1cfa556ee83773)|`fix merge of functors`|\n|[aeae8f3](https://github.com/sagemath/sagetrac-mirror/commit/aeae8f3358607c5081e72470b66672765e42ecb3)|`Merge tag '7.0' into symbolics/symbolic-subring`|\n|[c4a0e22](https://github.com/sagemath/sagetrac-mirror/commit/c4a0e226b7fa34959d990be3bb768d270fd7f9a5)|`merge accepting and rejecting functors in all cases`|\n|[d376b10](https://github.com/sagemath/sagetrac-mirror/commit/d376b1022bc5f7aa5b8ffbb422cfe0bfa0d951d5)|`revert changes to merge of functors`|\n|[4cc9ef0](https://github.com/sagemath/sagetrac-mirror/commit/4cc9ef079a95b088e168cad0199ae3767ebc0480)|`improve _apply_functor of subring functors`|\n|[41efe52](https://github.com/sagemath/sagetrac-mirror/commit/41efe52220053dd9371ce1ec81dc15ca1ed0e503)|`no calling factory in _apply_functor`|\n|[a484912](https://github.com/sagemath/sagetrac-mirror/commit/a48491219958e65c5fa4e8275ad4abccafcb9ed7)|`remove restriction from .subring`|\n|[3efe686](https://github.com/sagemath/sagetrac-mirror/commit/3efe6863a0118d6168267ca7148e539e310d7035)|`let factory create and call functors`|\n|[ad9aa8c](https://github.com/sagemath/sagetrac-mirror/commit/ad9aa8c21d4ce0e39b1ac6ce9c81e9a604ceb953)|`add doctest for subring of subring`|",
    "created_at": "2016-01-24T00:22:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19949#issuecomment-363010",
    "user": "https://github.com/behackl"
}
```

<a id='comment:2'></a>
Last 10 new commits:
|                                                                                                                                          |                                         |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|
|[05dc834](https://github.com/sagemath/sagetrac-mirror/commit/05dc8345c3cc09a083bd588366793149daa1d6ab)|`misc. changes, indentation, line breaks`|
|[8cc884a](https://github.com/sagemath/sagetrac-mirror/commit/8cc884a527e7d72fe125509c8f1cfa556ee83773)|`fix merge of functors`|
|[aeae8f3](https://github.com/sagemath/sagetrac-mirror/commit/aeae8f3358607c5081e72470b66672765e42ecb3)|`Merge tag '7.0' into symbolics/symbolic-subring`|
|[c4a0e22](https://github.com/sagemath/sagetrac-mirror/commit/c4a0e226b7fa34959d990be3bb768d270fd7f9a5)|`merge accepting and rejecting functors in all cases`|
|[d376b10](https://github.com/sagemath/sagetrac-mirror/commit/d376b1022bc5f7aa5b8ffbb422cfe0bfa0d951d5)|`revert changes to merge of functors`|
|[4cc9ef0](https://github.com/sagemath/sagetrac-mirror/commit/4cc9ef079a95b088e168cad0199ae3767ebc0480)|`improve _apply_functor of subring functors`|
|[41efe52](https://github.com/sagemath/sagetrac-mirror/commit/41efe52220053dd9371ce1ec81dc15ca1ed0e503)|`no calling factory in _apply_functor`|
|[a484912](https://github.com/sagemath/sagetrac-mirror/commit/a48491219958e65c5fa4e8275ad4abccafcb9ed7)|`remove restriction from .subring`|
|[3efe686](https://github.com/sagemath/sagetrac-mirror/commit/3efe6863a0118d6168267ca7148e539e310d7035)|`let factory create and call functors`|
|[ad9aa8c](https://github.com/sagemath/sagetrac-mirror/commit/ad9aa8c21d4ce0e39b1ac6ce9c81e9a604ceb953)|`add doctest for subring of subring`|



---

archive/issue_comments_363011.json:
```json
{
    "body": "Author: Benjamin Hackl",
    "created_at": "2016-01-24T00:22:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19949#issuecomment-363011",
    "user": "https://github.com/behackl"
}
```

Author: Benjamin Hackl



---

archive/issue_events_061916.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-06T05:21:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19949",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19949#event-61916"
}
```



---

archive/issue_comments_363012.json:
```json
{
    "body": "Changing branch from \"[u/behackl/symbolics/subring-functor](https://github.com/sagemath/sagetrac-mirror/tree/u/behackl/symbolics/subring-functor)\" to \"[u/mkoeppe/symbolics/subring-functor](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/symbolics/subring-functor)\"",
    "created_at": "2021-07-06T16:13:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19949#issuecomment-363012",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "[u/behackl/symbolics/subring-functor](https://github.com/sagemath/sagetrac-mirror/tree/u/behackl/symbolics/subring-functor)" to "[u/mkoeppe/symbolics/subring-functor](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/symbolics/subring-functor)"



---

archive/issue_comments_363013.json:
```json
{
    "body": "<a id='comment:5'></a>\nRebased\n\n---\nNew commits:\n|                                                                                                                                          |                                            |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|\n|[90a75de](https://github.com/sagemath/sagetrac-mirror/commit/90a75ded45d4ecb4a8743dc2222efaee7e3db84a)|`improve _apply_functor of subring functors`|\n|[2afc520](https://github.com/sagemath/sagetrac-mirror/commit/2afc520a1c9e730222486334ede5cdffc51f2153)|`no calling factory in _apply_functor`|\n|[17574fd](https://github.com/sagemath/sagetrac-mirror/commit/17574fda7e2f0ba7102dd5945e55b5db040665f5)|`remove restriction from .subring`|\n|[50cc01f](https://github.com/sagemath/sagetrac-mirror/commit/50cc01f630dd4fd479eef0b99efb47ee8201f8a8)|`let factory create and call functors`|\n|[b35e0f0](https://github.com/sagemath/sagetrac-mirror/commit/b35e0f0f5dee3fba44796137bcfbe0dd7def6c45)|`add doctest for subring of subring`|",
    "created_at": "2021-07-06T16:13:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19949#issuecomment-363013",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>
Rebased

---
New commits:
|                                                                                                                                          |                                            |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|
|[90a75de](https://github.com/sagemath/sagetrac-mirror/commit/90a75ded45d4ecb4a8743dc2222efaee7e3db84a)|`improve _apply_functor of subring functors`|
|[2afc520](https://github.com/sagemath/sagetrac-mirror/commit/2afc520a1c9e730222486334ede5cdffc51f2153)|`no calling factory in _apply_functor`|
|[17574fd](https://github.com/sagemath/sagetrac-mirror/commit/17574fda7e2f0ba7102dd5945e55b5db040665f5)|`remove restriction from .subring`|
|[50cc01f](https://github.com/sagemath/sagetrac-mirror/commit/50cc01f630dd4fd479eef0b99efb47ee8201f8a8)|`let factory create and call functors`|
|[b35e0f0](https://github.com/sagemath/sagetrac-mirror/commit/b35e0f0f5dee3fba44796137bcfbe0dd7def6c45)|`add doctest for subring of subring`|



---

archive/issue_comments_363014.json:
```json
{
    "body": "Changing commit from \"[ad9aa8c21d4ce0e39b1ac6ce9c81e9a604ceb953](https://github.com/sagemath/sagetrac-mirror/commit/ad9aa8c21d4ce0e39b1ac6ce9c81e9a604ceb953)\" to \"[b35e0f0f5dee3fba44796137bcfbe0dd7def6c45](https://github.com/sagemath/sagetrac-mirror/commit/b35e0f0f5dee3fba44796137bcfbe0dd7def6c45)\"",
    "created_at": "2021-07-06T16:13:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19949#issuecomment-363014",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "[ad9aa8c21d4ce0e39b1ac6ce9c81e9a604ceb953](https://github.com/sagemath/sagetrac-mirror/commit/ad9aa8c21d4ce0e39b1ac6ce9c81e9a604ceb953)" to "[b35e0f0f5dee3fba44796137bcfbe0dd7def6c45](https://github.com/sagemath/sagetrac-mirror/commit/b35e0f0f5dee3fba44796137bcfbe0dd7def6c45)"



---

archive/issue_comments_363015.json:
```json
{
    "body": "Changing dependencies from \"#19259\" to \"\"",
    "created_at": "2021-07-06T16:13:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19949#issuecomment-363015",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#19259" to ""



---

archive/issue_comments_363016.json:
```json
{
    "body": "<a id='comment:6'></a>\nGiven that #19259 was merged 5 years ago, I think `SymbolicSubring` should not introduce a new positional parameter at the beginning but add it as a keyword parameter. I would also suggest to rename it from `parent` to `ambient` or something like this.\n\nAlso, I think `SymbolicSubringFactory` does not achieve unique representation semantics because the same subring can be created using different (functor, parent) pairs.\nI think a possible way to fix it would be to give `UniqueRepresentation` to `GenericSymbolicSubringFunctor` and `GenericSymbolicSubring`, and to turn `SymbolicSubringFactory` into a simple function.",
    "created_at": "2021-07-06T16:31:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19949#issuecomment-363016",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
Given that #19259 was merged 5 years ago, I think `SymbolicSubring` should not introduce a new positional parameter at the beginning but add it as a keyword parameter. I would also suggest to rename it from `parent` to `ambient` or something like this.

Also, I think `SymbolicSubringFactory` does not achieve unique representation semantics because the same subring can be created using different (functor, parent) pairs.
I think a possible way to fix it would be to give `UniqueRepresentation` to `GenericSymbolicSubringFunctor` and `GenericSymbolicSubring`, and to turn `SymbolicSubringFactory` into a simple function.



---

archive/issue_events_061917.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:16:42Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19949",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19949#event-61917"
}
```



---

archive/issue_events_061918.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:16:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19949",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19949#event-61918"
}
```



---

archive/issue_events_061919.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19949",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19949#event-61919"
}
```



---

archive/issue_events_061920.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19949",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19949#event-61920"
}
```



---

archive/issue_events_061921.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-01T21:16:35Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19949",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19949#event-61921"
}
```



---

archive/issue_events_061922.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-01T21:16:35Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19949",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19949#event-61922"
}
```



---

archive/issue_events_061923.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T05:25:02Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19949",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19949#event-61923"
}
```



---

archive/issue_events_061924.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T05:25:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19949",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19949#event-61924"
}
```
